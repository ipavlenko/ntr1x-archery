'use strict';var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};window.Core=function($,Vue){var Core={};// if (CKEDITOR) {
//     CKEDITOR_BASEPATH = '/assets/vendor/ckeditor/';
// }
return Core;}(jQuery,Vue);(function(Vue,$,Core){Core.TabsMixin=function(active){return{data:function data(){return{tabs:{active:active}};},methods:{activate:function activate(tab){this.tabs.active=tab;},isActive:function isActive(tab){return this.tabs.active==tab;}}};};Core.ActionMixin=function(ModalEditor){return{props:{model:Object,globals:Object,context:Object},methods:{open:function open(context){var dialog=new ModalEditor({data:{globals:this.globals,owner:this,context:context||this.context,original:this.model,current:JSON.parse(JSON.stringify(this.model))},methods:{submit:function submit(){this.owner.doApply(this.current);this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));$('[data-auto-focus]',dialog.$el).focus();},doApply:function doApply(model){Object.assign(this.model,JSON.parse(JSON.stringify(model)),{_action:this.model._action?this.model._action:'update'});// this.model =
// Object.assign({}, JSON.parse(JSON.stringify(model)), {
//     _action: this.model._action
//         ? this.model._action
//         : 'update'
// });
this.$nextTick(function(){$(window).trigger('resize');});}}};};Core.EditorMixin=function(ListViewer,ModalEditor){return{props:{items:Array,globals:Object},methods:{trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});},create:function create(item,context){var dialog=new ModalEditor({data:{globals:this.globals,owner:this,context:context,original:null,current:item?JSON.parse(JSON.stringify(item)):{}},methods:{submit:function submit(){this.owner.doCreate(this.current);this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));$('[data-auto-focus]',dialog.$el).focus();},remove:function remove(item,context){this.doRemove(item,context);},update:function update(item,context){this.active=item;var dialog=new ModalEditor({data:{globals:this.globals,owner:this,context:context,original:item,current:JSON.parse(JSON.stringify(item))},methods:{submit:function submit(){this.owner.doUpdate(this.current);this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));$('[data-auto-focus]',dialog.$el).focus();},doCreate:function doCreate(item){this.items.push(Object.assign({},JSON.parse(JSON.stringify(item)),{_action:'create'}));this.$set('items',$.extend(true,[],this.items));$(window).trigger('resize');this.active=null;},doUpdate:function doUpdate(item){Object.assign(this.active,JSON.parse(JSON.stringify(item)),{_action:this.active._action?this.active._action:'update'});// this.items = $.extend(true, [], this.items);//this.items.slice();
this.items=this.items.slice();$(window).trigger('resize');this.active=null;},doRemove:function doRemove(item){var index=this.items.indexOf(item);if(index!==-1){var item2=this.items[index];if(item2._action=='create'){this.items.$remove(item2);}else{item2._action='remove';}}// this.items = $.extend(true, [], this.items);
this.$set('items',$.extend(true,[],this.items));$(window).trigger('resize');this.active=null;}},events:{create:function create(data){this.create(data.item,data.context);},update:function update(data){this.update(data.item,data.context);},remove:function remove(data){this.remove(data.item,data.context);},doCreate:function doCreate(data){this.doCreate(data.item,data.context);},doUpdate:function doUpdate(data){this.doUpdate(data.item,data.context);},doRemove:function doRemove(data){this.doRemove(data.item,data.context);}}};};Core.ListViewerMixin={props:{items:Array,globals:Object},methods:{trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});},create:function create(item,context){this.$dispatch('create',{item:item,context:context});},update:function update(item,context){this.$dispatch('update',{item:item,context:context});},remove:function remove(item,context){this.$dispatch('remove',{item:item,context:context});}}};Core.ModalEditorMixin={attached:function attached(){var _this=this;$(this.$el).modal('show');$(this.$el).on('hide.bs.modal',function(e){e.stopPropagation();_this.reset();});},detached:function detached(){$(this.$el).modal('hide');},methods:{submit:function submit(){},reset:function reset(){}}};})(Vue,jQuery,Core);(function($,Vue,Core){Core.WidgetMixin={props:{page:Object,data:Object,storage:Object,stack:Object,bindings:Object,children:Array,editable:Boolean},data:function data(){return{systemId:this.systemId};},created:function created(){this.randomId=Vue.service('palette').generateId('widget-');this.$watch('bindings.id',function(value){if(value){this.systemId=value;}else{this.systemId=this.randomId;}},{immediate:true});}};Core.StackedMixin={props:{globals:Object,settings:Object,page:Object,data:Object,storage:Object,editable:Boolean,children:Array},data:function data(){return{stackId:this.stackId};},created:function created(){this.stackId=Vue.service('palette').generateId('stack-');}};})(jQuery,Vue,Core);(function($,window,pluginName,undefined){var defaults={drag:true,drop:true,vertical:true,containerSelector:'ol, ul',itemSelector:'li',excludeSelector:'',bodyClass:'dragging',activeClass:'active',draggedClass:'dragged',verticalClass:'vertical',horizontalClass:'horizontal',placeholderClass:'placeholder',placeholder:'<li class="placeholder"></li>',onDragStart:function onDragStart(context,event){var size={height:context.$item.outerHeight(),width:context.$item.outerWidth()};context.$originalItem=context.$item;context.$item=context.$originalItem.clone().addClass(context.sortable.options.draggedClass).css({position:'fixed',left:event.pageX-context.adjustment.left,top:event.pageY-context.adjustment.top,width:size.width,height:size.height}).appendTo(context.$parent);},onDrag:function onDrag(context,event){context.$item.css({left:event.pageX-context.adjustment.left,top:event.pageY-context.adjustment.top});},onDrop:function onDrop(context/*, event*/){context.$item.remove();if(context.location){context.$item=context.location.before?context.$item.insertBefore(context.location.$item):context.$item.insertAfter(context.location.$item);context.$item.css({position:'',left:'',top:'',width:'',height:''});}}};var context=null;var sortables=[];function Sortable($element,options){var _this2=this;this.$element=$element;this.options=$.extend({},defaults,options);$element.on('mousedown.sortable',this.options.itemSelector,function(e){_this2.handleStart(e);});this.draggable=null;sortables.push(this);}$(document).ready(function(){$(document).on('mouseup.sortable',function(e){context&&context.sortable.handleEnd(e,context);}).on('mousemove.sortable',function(e){context&&context.sortable.handleDrag(e,context);});});Sortable.prototype={dropLocation:function dropLocation(e){var $item;var sortable;if(context){var display=context.$item.css('display');context.$item.css({display:'none'});for(var i=0;i<sortables.length;i++){var s=sortables[i];if(s.options.drop){var $result=$(document.elementFromPoint(e.pageX,e.pageY)).closest(s.options.itemSelector);if($result.length&&$result.closest(s.$element).length){$item=$result;sortable=s;break;}}}context.$item.css({display:display});}else{for(var _i=0;_i<sortables.length;_i++){var _s=sortables[_i];if(_s.options.drop){var _$result=$(document.elementFromPoint(e.pageX,e.pageY)).closest(_s.options.itemSelector);if(_$result.length&&_$result.closest(_s.$element).length){$item=_$result;sortable=_s;break;}}}}if(sortable&&$item&&$item.length){var $container=$item.closest(sortable.options.containerSelector);var offset=$item.offset();var size={width:$item.outerWidth(),height:$item.outerHeight()};var orientation=this.options.vertical?$container.hasClass(sortable.options.horizontalClass)?'h':'v':$container.hasClass(sortable.options.verticalClass)?'v':'h';var before=orientation=='h'?e.pageX-offset.left<size.width/2:e.pageY-offset.top<size.height/2;return{$item:$item,$container:$container,sortable:sortable,before:before};}return null;},handleStart:function handleStart(e){if(this.options.excludeSelector&&$(e.target).closest(this.options.excludeSelector).length){// console.log('exclude');
return true;}var excludeTags=['TEXTAREA','INPUT','BUTTON','LABEL'];if(excludeTags.indexOf($(e.target).prop('tagName'))<0){e.preventDefault();e.stopPropagation();}else{return true;}if(!context){var $item=$(e.target).closest(this.options.itemSelector);// var $parent = $item.parent();
var offset=$item.offset();context={sortable:this,index:$item.index(),$container:$item.closest(this.options.containerSelector),$parent:$item.parent(),$item:$item,$originalItem:$item,$targetItem:null,$targetContainer:null,location:this.dropLocation(e),adjustment:{left:e.clientX-offset.left,top:e.clientY-offset.top}};this.options.onDragStart(context,e,defaults.onDragStart);}},handleEnd:function handleEnd(e){if(context){for(var i=0;i<sortables.length;i++){var sortable=sortables[i];$(sortable.options.containerSelector,sortable.$element).removeClass(sortable.options.activeClass);}if(context.$placeholder){context.$placeholder.remove();}context.location=this.dropLocation(e);if(context.location){context.location.sortable.options.onDrop(context,e,defaults.onDrop);}else{context.$item.remove();}context=null;}},handleDrag:function handleDrag(e){if(context){for(var i=0;i<sortables.length;i++){var sortable=sortables[i];$(this.options.containerSelector,sortable.$element).removeClass(this.options.activeClass);}if(context.$placeholder){context.$placeholder.remove();}context.location=this.dropLocation(e);if(context.location){context.location.$container.addClass(context.location.sortable.options.activeClass);context.$placeholder=context.location.before?$(context.location.sortable.options.placeholder).insertBefore(context.location.$item):$(context.location.sortable.options.placeholder).insertAfter(context.location.$item);}context.sortable.options.onDrag(context,e,defaults.onDrag);}}};var API=$.extend(Sortable.prototype,{enable:function enable(){},disable:function disable(){},destroy:function destroy(){}});$.fn[pluginName]=function(methodOrOptions){var args=Array.prototype.slice.call(arguments,1);return this.map(function(){var $t=$(this),object=$t.data(pluginName);if(object&&API[methodOrOptions]){return API[methodOrOptions].apply(object,args)||this;}else if(!object&&(methodOrOptions===undefined||(typeof methodOrOptions==='undefined'?'undefined':_typeof(methodOrOptions))==='object')){$t.data(pluginName,new Sortable($t,methodOrOptions));}return this;});};})(jQuery,window,'sortable');(function($){Vue.directive('affix',{bind:function bind(){if($.fn.affix){$(this.el).affix(this.vm.$get(this.expression));}}});})(jQuery);(function($){Vue.directive('combo',{bind:function bind(){if($.fn.tagsinput){$(this.el).select2({tags:true,multiple:false,createTag:function createTag(params){return{id:params.term,text:params.term,newOption:true};}});}}});})(jQuery);(function($){Vue.directive('date',{bind:function bind(){if($.fn.datepicker){$(this.el).datepicker({autoclose:true,todayHighlight:true,format:'yyyy-mm-dd'});}}});})(jQuery,Core);(function($){Vue.directive('rich',{bind:function bind(){if(window.CKEDITOR){this.editor=window.CKEDITOR.inline(this.el,{stylesSet:[{name:'Bolder',element:'span',attributes:{'class':'extrabold'}}],toolbarGroups:[// { name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },
// { name: 'editing',     groups: [ 'find', 'selection', 'spellchecker' ] },
{name:'links'},// { name: 'forms' },
{name:'tools'},{name:'document',groups:['mode','document','doctools']},{name:'others'},{name:'paragraph',groups:['list','indent','blocks','align']},{name:'colors'},'/',{name:'basicstyles',groups:['basicstyles','cleanup']},{name:'styles'},'/',{name:'insert',groups:['ImageButton']}//{name: 'about'}
]});this.editor.on('change',function(){this.editor.updateElement();this.vm.$set(this.expression,$(this.el).val());}.bind(this));this.editor.setData(this.vm.$get(this.expression));}},unbind:function unbind(){this.editor.destroy();this.editor=null;this.textarea=null;this.input=null;}});})(jQuery);(function($){Vue.directive('scrollable',{bind:function bind(){if($.fn.perfectScrollbar){Vue.nextTick(function(){$(this.el).perfectScrollbar({// axis: this.expression
});}.bind(this));}}});})(jQuery);(function($){Vue.directive('tags',{bind:function bind(){if($.fn.tagsinput){$(this.el).tagsinput({});}}});})(jQuery,Core);(function(){Vue.filter('get',function(context,str){if(context==null){return null;}if(str==null){return context;}return _.get(context,str);});Vue.filter('template',function(string,data){var re=/${([^}]+)}/g;return string.replace(re,function(match,key){return data[key];});});Vue.filter('assign',function(target,source1,source2,source3){return Object.assign(target,source1,source2,source3);});Vue.filter('copy',function(source){return new Vue({data:source!=null?JSON.parse(JSON.stringify(source)):null}).$data;});Vue.filter('clone',function(source){return new Vue({data:source!=null?JSON.parse(JSON.stringify(source)):null}).$data;});})();(function($){$.extend($.expr[':'],{focusable:function focusable(el){return $(el).is('a, button, :input, [tabindex]');}});})(jQuery);// (function($) {
//
//     $(document).ready(function() {
//
//         function reposition(element) {
//
//             var modal = $(element),
//                 dialog = $('.modal-dialog', modal);
//
//             modal.css('display', 'block');
//             dialog.css('margin-top', Math.max(0, ($(window).height() - dialog.height()) / 2));
//         }
//
//         $($(document), '.modal.modal-center').on('show.bs.modal', function(e) {
//             if ($(e.target).hasClass('.modal-center')) {
//                 reposition(e.target);
//             }
//         });
//
//         $(window).on('resize', () => {
//             $('.modal.modal-center:visible').each(function(index, element) {
//                 reposition(element);
//             });
//         });
//     });
//
// })(jQuery);
(function($,Vue){Vue.use({install:function install(Vue){var services={};Vue.service=function(name,service){return services[name]=services[name]||service;};}});})(jQuery,Vue);(function(){Vue.validator('email',function(val){return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(val);});})();window.Shell=function($,Vue,Core){var Shell={Widgets:{},Pages:{}};return Shell;}(jQuery,Vue,Core);(function(Vue,$){var ModalComponent=Vue.component('shell-modal',{template:'#shell-modal',props:{page:Object},attached:function attached(){var _this3=this;$(this.$el).modal('show');$(this.$el).on('hidden.bs.modal',function(e){_this3.$dispatch('close');});}});Vue.component('shell-modal-stack',{template:'#shell-modal-stack',data:function data(){return{modals:this.modals};},created:function created(){var _this4=this;this.$set('modals',[]);Vue.service('modals',{show:function show(page,config){_this4.modals.push({page:Vue.service('shell').page(page)});}});},events:{close:function close(){this.modals.pop();}}});})(Vue,jQuery);(function(Vue,$,Core,Shell){var ModalEditor=Vue.component('bindings-dialog',{template:'#bindings-dialog',mixins:[Core.ModalEditorMixin],methods:{setStrategy:function setStrategy(strategy){this.$set('current.binding.strategy',strategy);},getStrategy:function getStrategy(strategy){return this.$get('current.binding.strategy');}},created:function created(){this.$set('current.binding',this.current.binding||{strategy:'interpolate',expression:null});// if (!this.current.binding) this.current.binding = {};
}});var Editor=Vue.component('bindings',{mixins:[Core.ActionMixin(ModalEditor)]});})(Vue,jQuery,Core,Shell);(function($,Vue,Core,Shell){Shell.Pages=Shell.Pages||{};var PagesModalEditor=Shell.Pages.ModalEditor=Vue.component('shell-pages-dialog',{template:'#shell-pages-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('main')],created:function created(){var items=[];for(var i=0;i<this.context.widget.props.length;i++){var prop=this.context.widget.props[i];var param=this.current.root.params[prop.name];var item={prop:prop,param:param};items.push(item);}this.items=items;},data:function data(){return{context:this.context,items:this.items};},methods:{hasProps:function hasProps(tab){if(this.context.widget&&this.context.widget.props){for(var i=0;i<this.context.widget.props.length;i++){var prop=this.context.widget.props[i];if(prop.tab==tab)return true;}}return false;}}});})(jQuery,Vue,Core,Shell);(function(Vue,$,Core,Shell){var ListViewer=Vue.component('domains-list',{template:'#domains-list',mixins:[Core.ListViewerMixin]});var ModalEditor=Vue.component('domains-dialog',{template:'#domains-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('main')]});var Editor=Vue.component('domains',{mixins:[Core.EditorMixin(ListViewer,ModalEditor)],template:'#domains'});var SettingsListViewer=Vue.component('domains-settings-list',{template:'#domains-settings-list',mixins:[Core.ListViewerMixin]});var SettingsModalEditor=Vue.component('domains-settings-dialog',{template:'#domains-settings-dialog',mixins:[Core.ModalEditorMixin]});var SettingsEditor=Vue.component('domains-settings',{mixins:[Core.EditorMixin(SettingsListViewer,SettingsModalEditor)],template:'#domains-settings'});})(Vue,jQuery,Core,Shell);(function($,Vue,Core,Shell){var PagesModalEditor=Shell.Pages.ModalEditor=Vue.component('shell-pages-dialog',{template:'#shell-pages-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('main')],created:function created(){var items=[];for(var i=0;i<this.context.widget.props.length;i++){var prop=this.context.widget.props[i];var param=this.current.root.params[prop.name];var item={prop:prop,param:param};items.push(item);}this.items=items;},data:function data(){return{context:this.context,items:this.items};},methods:{hasProps:function hasProps(tab){if(this.context.widget&&this.context.widget.props){for(var i=0;i<this.context.widget.props.length;i++){var prop=this.context.widget.props[i];if(prop.tab==tab)return true;}}return false;}}});})(jQuery,Vue,Core,Shell);(function(Vue,$,Core,Shell){var ListViewer=Vue.component('schemes-list',{template:'#schemes-list',mixins:[Core.ListViewerMixin]});var ModalEditor=Vue.component('schemes-dialog',{template:'#schemes-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('main')]});var Editor=Vue.component('schemes',{mixins:[Core.EditorMixin(ListViewer,ModalEditor)],template:'#schemes'});var SettingsListViewer=Vue.component('schemes-settings-list',{template:'#schemes-settings-list',mixins:[Core.ListViewerMixin]});var SettingsModalEditor=Vue.component('schemes-settings-dialog',{template:'#schemes-settings-dialog',mixins:[Core.ModalEditorMixin]});var SettingsEditor=Vue.component('schemes-settings',{mixins:[Core.EditorMixin(SettingsListViewer,SettingsModalEditor)],template:'#schemes-settings'});})(Vue,jQuery,Core,Shell);(function(Vue,$,Core,Shell){var ModalEditor=Vue.component('settings-dialog',{template:'#settings-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('domains')]});var Editor=Vue.component('settings',{mixins:[Core.ActionMixin(ModalEditor)],props:{globals:Object},methods:{push:function push(){var _this5=this;$.ajax({url:'/settings/do-update',method:'POST',dataType:"json",data:JSON.stringify(this.model),contentType:"application/json"}).done(function(d){Object.assign(_this5.model,d);});},pull:function pull(){var _this6=this;$.ajax({url:'/settings',method:'GET',dataType:"json"}).done(function(d){Object.assign(_this6.model,d);});}}});})(Vue,jQuery,Core,Shell);(function(Vue,$,Core,Shell){var ParamVariable=Vue.component('params-variable',{template:'#params-variable',props:{id:String,item:Object,globals:Object}});var ParamAsis=Vue.component('params-asis',{template:'#params-asis',props:{id:String,item:Object,globals:Object},data:function data(){return{value:this.value,error:this.error};},created:function created(){var _this7=this;try{this.value=this.item.param.value==null?null:JSON.stringify(this.item.param.value);this.error=false;}catch(e){this.value='';this.error=true;}this.$watch('value',function(v){var pv=null;try{pv=v==null||v==''?null:JSON.parse(v);_this7.error=false;}catch(e){pv=null;console.log(e,v);_this7.error=true;}_this7.$set('item.param.value',pv);});}});var ParamString=Vue.component('params-string',{template:'#params-string',props:{id:String,item:Object,globals:Object}});var ParamSelect=Vue.component('params-select',{template:'#params-select',props:{id:String,item:Object,globals:Object}});var ParamRich=Vue.component('params-rich',{template:'#params-rich',props:{id:String,item:Object,globals:Object}});var ParamSource=Vue.component('params-source',{template:'#params-source',props:{id:String,item:Object,globals:Object}});var ParamMultiple=Vue.component('params-multiple',{template:'#params-multiple',props:{id:String,item:Object,globals:Object},data:function data(){return{items:this.item.items};}});var ParamObject=Vue.component('params-object',{template:'#params-object',props:{id:String,item:Object,globals:Object}});var Params=Vue.component('params',{template:'#params',props:{owner:Object,tab:String,items:Array,globals:Object}});var defaults={'multiple':[],'object':{}};var ParamMultipleListViewer=Vue.component('params-multiple-list',{template:'#params-multiple-list',mixins:[Core.ListViewerMixin],props:{prop:Object,param:Object},methods:{getLabel:function getLabel(item){if(this.prop.display){var vm=new Vue({item:item});return vm.$interpolate(this.prop.display);}return'<item>';}}});var ParamBindingsModalEditor=Vue.component('params-bindings-dialog',{template:'#params-bindings-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('binding')],data:function data(){return{items:this.items};},created:function created(){var items=[];this.$set('current.binding',this.current.binding||{strategy:'interpolate',expression:null});if(this.context.prop.props){for(var i=0;i<this.context.prop.props.length;i++){var prop=this.context.prop.props[i];var param=this.current.value[prop.name]=this.current.value[prop.name]||{value:defaults[prop.type]||null};param._action=param._action=='update'?'update':'create';var item={prop:prop,param:param};items.push(item);}}this.$set('items',items);},methods:{setStrategy:function setStrategy(strategy){this.$set('current.binding.strategy',strategy);},getStrategy:function getStrategy(strategy){return this.$get('current.binding.strategy');}}});var ParamBindingsEditor=Vue.component('params-bindings',{mixins:[Core.ActionMixin(ParamBindingsModalEditor)]});var ParamProtoModalEditor=Vue.component('params-proto-dialog',{template:'#params-proto-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('binding')],data:function data(){return{items:this.items};},created:function created(){var items=[];this.$set('current.binding',this.current.binding||{strategy:'interpolate',expression:null});if(this.context.prop.props){for(var i=0;i<this.context.prop.props.length;i++){var prop=this.context.prop.props[i];var param=this.current.proto[prop.name]=this.current.proto[prop.name]||{value:defaults[prop.type]||null};param._action=param._action=='update'?'update':'create';var item={prop:prop,param:param};items.push(item);}}this.$set('items',items);},methods:{setStrategy:function setStrategy(strategy){this.$set('current.binding.strategy',strategy);},getStrategy:function getStrategy(strategy){return this.$get('current.binding.strategy');}}});var ParamProtoEditor=Vue.component('params-proto',{mixins:[Core.ActionMixin(ParamProtoModalEditor)]});var ParamMultipleModalEditor=Vue.component('params-multiple-dialog',{template:'#params-multiple-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('data')],data:function data(){return{items:this.items};},created:function created(){var items=[];for(var i=0;i<this.context.prop.props.length;i++){var prop=this.context.prop.props[i];var param=this.current[prop.name]=this.current[prop.name]||{value:defaults[prop.type]||null};param._action=param._action=='update'?'update':'create';var item={prop:prop,param:param};items.push(item);}this.$set('items',items);}});var ParamMultipleEditor=Vue.component('params-multiple-editor',{mixins:[Core.EditorMixin(ParamMultipleListViewer,ParamMultipleModalEditor)],template:'#params-multiple-editor',props:{prop:Object,param:Object,items:Array}});var ParamsList=Vue.component('params-list',{template:'#params-list',components:{'params-string':ParamString,'params-rich':ParamRich,'params-source':ParamSource,'params-multiple':ParamMultiple},props:{owner:Object,tab:String,items:Array,globals:Object}});})(Vue,jQuery,Core,Shell);(function(Vue,$,Core,Shell){var StoragesListViewer=Vue.component('storages-list',{template:'#storages-list',mixins:[Core.ListViewerMixin]});var StoragesModalEditor=Vue.component('storages-dialog',{template:'#storages-dialog',mixins:[Core.ModalEditorMixin]});var StoragesEditor=Vue.component('storages',{mixins:[Core.EditorMixin(StoragesListViewer,StoragesModalEditor)],template:'#storages'});var StoragesVariablesListViewer=Vue.component('storages-variables-list',{template:'#storages-variables-list',mixins:[Core.ListViewerMixin]});var StoragesVariablesModalEditor=Vue.component('storages-variables-dialog',{template:'#storages-variables-dialog',mixins:[Core.ModalEditorMixin]});var StoragesVariablesEditor=Vue.component('storages-variables',{mixins:[Core.EditorMixin(StoragesVariablesListViewer,StoragesVariablesModalEditor)],template:'#storages-variables'});})(Vue,jQuery,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-actions',{template:'#shell-actions',props:{model:Object,globals:Object},methods:{trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-brand',{template:'#shell-brand'});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-categories',{template:'#shell-categories',props:{categories:Array,globals:Object},methods:{trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-domains',{template:'#shell-domains',props:{domains:Array,globals:Object}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){var runtime=Vue.service('runtime',{evaluate:function evaluate(self,b,v){if(b&&b.expression){try{if(b.strategy=='eval'){var value=self.$eval(b.expression);return value;}else if(b.strategy=='wire'){var value=self.$get(b.expression);return value;}else{return self.$interpolate(b.expression);}}catch(e){console.log('Cannot evaluate expression',b.expression);return v;}}return v;},evaluateParams:function evaluateParams(self,props,params){var items=[];// console.log(props, params);
if(props){for(var i=0;i<props.length;i++){var prop=props[i];var param=params&&params[prop.name];items.push({prop:prop,param:param});}}var value={};for(var i=0;i<items.length;i++){var item=items[i];var n=item.prop.name;var r=item.prop.variable;var t=item.prop.type;var b=item.param?item.param.binding:null;var v=item.param?item.param.value:null;var p=item.param?item.param.proto:null;if(item.prop.type=='asis'){var res=runtime.evaluate(self,b,v);var vv=r?{value:res}:res;// console.log(n, b, v, vv, item);
value[n]=vv;}else if(item.prop.type=='object'){var vv;if(b&&b.expression){vv=runtime.evaluate(self,b,v);value[n]=vv;}else{var res=this.evaluateParams(self,item.prop.props,v);vv=r?{value:res}:res;value[n]=vv;}}else if(item.prop.type=='multiple'){if(b&&b.expression){var vv=null;var array=[];var result=runtime.evaluate(self,b,v);if(r){vv=result;}else{if($.isArray(result)){for(var j=0;j<result.length;j++){var vm=new Vue({data:Object.assign(JSON.parse(JSON.stringify(self.$data)),{item:result[j]})});array.push(this.evaluateParams(vm,item.prop.props,p));}vv=array;}}}else{var array=[];var index=0;for(var j=0;j<v.length;j++){var vi=v[j];if(vi._action!='remove'){array[index++]=this.evaluateParams(self,item.prop.props,vi);}}vv=r?{value:array}:array;}value[n]=vv;}else{var vv=runtime.evaluate(self,b,v);value[n]=vv||'';}}return value;}});var DecoratorMixin={props:{items:Array},methods:{removeWidget:function removeWidget(){this.$dispatch('removeChildWidget',{item:this.model});},doApply:function doApply(model){Object.assign(this.model,JSON.parse(JSON.stringify(model)),{_action:this.model._action?this.model._action:'update'});$(window).trigger('resize');},showSettings:function showSettings(){var dialog=new Shell.Widgets.ModalEditor({data:{globals:this.globals,owner:this,context:{widget:this.widget},original:this.model,current:JSON.parse(JSON.stringify(this.model))},methods:{submit:function submit(){this.owner.doApply(this.current);this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));}}};var BindingsMixin={data:function data(){return{bindings:this.bindings};},created:function created(){var _this8=this;this.$watch('data',function(data){var bindings=runtime.evaluateParams(_this8,_this8.widget.props,_this8.model.params);_this8.$set('bindings',bindings);},{deep:true,immediate:true});this.$watch('storage',function(storage){var bindings=runtime.evaluateParams(_this8,_this8.widget.props,_this8.model.params);_this8.$set('bindings',bindings);},{deep:true,immediate:true});this.$watch('model',function(model){var bindings=runtime.evaluateParams(_this8,_this8.widget.props,model.params);_this8.$set('bindings',bindings);},{deep:true,immediate:true});}};var CompositeMixin={data:function data(){return{children:this.children};},created:function created(){var _this9=this;this.$watch('items',function(items){var children=[];if(items){for(var i=0;i<items.length;i++){var item=items[i];if(item._action!='remove'){children.push(item);}}}if(children.length<1){children.push(JSON.parse(JSON.stringify(_this9.placeholder())));}_this9.children=children;},{immediate:true,deep:true});},events:{removeChildWidget:function removeChildWidget(data){var item=data.item;if(item._action=='create'){this.items.$remove(item);}else{item._action='remove';}this.items=this.items.slice();}},methods:{// find: function(children, item) {
//
//     var index = 0;
//     for (var i = 0; i < children.length && index < domIndex; i++) {
//
//         var child = children[i];
//
//         if (child._action != 'remove') {
//             index++;
//         }
//     }
//
//     return index;
// }
}};var SortableMixin=function SortableMixin(selector){return{data:function data(){return{selected:this.selected};},methods:{selectTarget:function selectTarget(){this.selected=true;},unselectTarget:function unselectTarget(){this.selected=false;}}};};Vue.component('shell-decorator-stub',{template:'#shell-decorator-stub',mixins:[DecoratorMixin,BindingsMixin],props:{globals:Object,settings:Object,stack:Object,page:Object,data:Object,storage:Object,model:Object,widget:Object,editable:Boolean,items:Array}});Vue.component('shell-decorator-widget',{template:'#shell-decorator-widget',mixins:[DecoratorMixin,BindingsMixin],props:{globals:Object,settings:Object,stack:Object,page:Object,data:Object,storage:Object,model:Object,widget:Object,editable:Boolean,items:Array}});Vue.component('shell-decorator-horizontal',{template:'#shell-decorator-horizontal',mixins:[DecoratorMixin,CompositeMixin,SortableMixin('>.ge.ge-content >.wg.wg-default-stack >.wg.wg-content >.wg.wg-table >.wg.wg-row'),BindingsMixin],props:{globals:Object,settings:Object,stack:Object,page:Object,data:Object,storage:Object,model:Object,widget:Object,editable:Boolean,items:Array},methods:{placeholder:function placeholder(){return Vue.service('palette').placeholder('\n                    <small>Horizontal Stack</small>\n                    <div>Drop Here</div>\n                ');}}});Vue.component('shell-decorator-vertical',{template:'#shell-decorator-vertical',mixins:[DecoratorMixin,CompositeMixin,SortableMixin('>.ge.ge-content >.wg.wg-default-stack >.wg.wg-content >.wg.wg-table'),BindingsMixin],props:{globals:Object,settings:Object,stack:Object,page:Object,data:Object,storage:Object,model:Object,widget:Object,editable:Boolean,items:Array},methods:{placeholder:function placeholder(){return Vue.service('palette').placeholder('\n                    <small>Vertical Stack</small>\n                    <div>Drop Here</div>\n                ');}}});Vue.component('shell-decorator-canvas',{template:'#shell-decorator-canvas',mixins:[CompositeMixin,SortableMixin('>.ge.ge-content >.wg.wg-default-stack >.wg.wg-content >.wg.wg-table'),BindingsMixin],props:{globals:Object,settings:Object,stack:Object,page:Object,data:Object,storage:Object,model:Object,widget:Object,editable:Boolean,items:Array},created:function created(){this.selected=true;},attached:function attached(){if(!this.$route||!this.$route.private){return;}var dragged;this.sortable=$(this.$el).sortable({vertical:true,drop:true,containerSelector:'.wg.wg-sortable-container.wg-sortable-editable',itemSelector:'.wg.wg-sortable-item.wg-sortable-editable',excludeSelector:'.ge.ge-overlay, .dropdown-menu',verticalClass:"wg-sortable-vertical",horizontalClass:"wg-sortable-horizontal",placeholder:'\n                    <div class="wg wg-sortable-placeholder">\n                        <div class="wg wg-placeholder-container">\n                            <div class="wg wg-placeholder-inner"></div>\n                        </div>\n                    </div>\n                ',onDragStart:function onDragStart(context,event,_super){_super(context,event);var stack=$(context.$container).closest('.ge.ge-widget').get(0).__vue__;var vue=context.$originalItem.find('.ge.ge-widget:first').get(0).__vue__;dragged={stack:stack,// index: stack.find(stack.items, context.$originalItem.index()),
index:stack.items.indexOf(vue.model),vue:vue};},onDrop:function onDrop(context,event,_super){_super(context,event);var vue=context.location.$item.find('.ge.ge-widget:first').get(0).__vue__;var newStack=context.location.$container.closest('.ge.ge-widget').get(0).__vue__;var newIndex=newStack.items.indexOf(vue.model)+(context.location.before?0:1);var w=context.$item.data('widget');if(w){var newItem=Vue.service('palette').item(w);newStack.items.splice(newIndex,0,newItem);}else if(dragged){var oldStack=dragged.stack;var oldIndex=dragged.index;var oldItem=dragged.vue.model;var newItem=Object.assign(JSON.parse(JSON.stringify(dragged.vue.model)));if(oldStack!=newStack){delete newItem.id;newItem._action='create';if(oldItem._action=='create'){oldStack.items.splice(oldIndex,1);}else{oldItem._action='remove';}newStack.items.splice(newIndex,0,newItem);}else if(newIndex!=oldIndex&&newIndex!=oldIndex+1){newItem._action=oldItem._action=='create'?'create':'update';if(newIndex<oldIndex){oldStack.items.splice(oldIndex,1);newStack.items.splice(newIndex,0,newItem);}else if(newIndex>oldIndex){newStack.items.splice(newIndex,0,newItem);oldStack.items.splice(oldIndex,1);}}oldStack.items=oldStack.items.slice();newStack.items=newStack.items.slice();}context.$item.remove();}});},methods:{placeholder:function placeholder(){return Vue.service('palette').placeholder('\n                    <small>Vertical Stack</small>\n                    <div>Drop Here</div>\n                ');}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-container',{template:'#shell-container',props:{globals:Object,settings:Object,page:Object}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){var LoaderMixin=Shell.LoaderMixin=Vue.component('shell-loader',{template:'#shell-loader',data:function data(){return{model:this.model};}});Shell.LoaderPrivate=Vue.component('shell-loader-private',{mixins:[LoaderMixin],template:'#shell-loader-private',created:function created(){var _this10=this;this.model=null;Vue.service('portals').get({id:this.$root.portal.id}).then(function(d){_this10.$set('model',{portal:d.data.portal,pages:d.data.pages});},function(e){console.log(e);});}});Shell.LoaderPublic=Vue.component('shell-loader-public',{mixins:[LoaderMixin],template:'#shell-loader-public',created:function created(){this.$set('model',{portal:this.$root.portal,pages:this.$root.pages});}});Shell.LoaderFrame=Vue.component('shell-loader-frame',{mixins:[LoaderMixin],template:'#shell-loader-frame',created:function created(){this.$set('model',{portal:this.$root.portal,pages:this.$root.pages});}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-page',{template:'#shell-page',mixins:[/*Core.ContainerMixin, Core.SortableMixin*/],props:{globals:Object,settings:Object,page:Object,editable:Boolean},data:function data(){return{decorator:this.decorator,data:this.data,storage:this.storage,widget:this.widget};},created:function created(){var _this11=this;this.widget=Vue.service('palette').widget('default-container/default-container-stack/default-stack-canvas');var runtime=Vue.service('runtime');this.decorator='shell-decorator-canvas';this.data={};this.storage={};this.$watch('page.storages',function(storages){if(storages){var storage={};for(var i=0;i<storages.length;i++){var st=storages[i];storage[st.name]={};for(var j=0;j<st.variables.length;j++){var variable=st.variables[j];storage[st.name][variable.name]={value:runtime.evaluate(_this11,variable.binding,variable.value)||null};}}_this11.$set('storage',storage);}},{immediate:true,deep:true});var loadData=function loadData(sources){if(sources){var deferred=[];for(var i=0;i<sources.length;i++){deferred.push(_this11.doRequest(sources[i]));}if(deferred.length>1){$.when.apply(_this11,deferred).done(function(){var data={};for(var i=0;i<arguments.length;i++){data[sources[i].name]=arguments[i][0];}this.$set('data',data);}.bind(_this11));}else if(deferred.length==1){deferred[0].done(function(d){var data={};data[sources[0].name]=d;this.$set('data',data);}.bind(_this11));}}};this.$watch('page.sources',function(sources){return loadData(sources);},{immediate:true,deep:true});this.$watch('storage',function(storage){return loadData(_this11.page.sources);},{immediate:true,deep:true});},methods:{doRequest:function doRequest(s){var query={};for(var i=0;i<s.params.length;i++){var param=s.params[i];if(param.in=='query'&&param.specified){var b=param.binding;var v=param.value;var value=Vue.service('runtime').evaluate(this,b,v);query[param.name]=value;}}return $.ajax({method:s.method,url:s.url,dataType:"json",data:query});}},events:{// modal: function(name, config) {
//     window.Modal.show(this.page, config);
// },
action:function action(expression){eval(expression);}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-pages',{template:'#shell-pages',props:{pages:Array,globals:Object},data:function data(){return{type:this.type,types:this.types,items:this.items};},created:function created(){var _this12=this;this.types=[{name:'page',title:'Pages'},{name:'modal',title:'Modals'}];this.type=this.types[0];this.$watch('pages',function(){var items=[];for(var i=0;i<_this12.pages.length;i++){var page=_this12.pages[i];if(page._action!='remove'){items.push(page);}}_this12.items=items;},{deep:true,immediate:true});},methods:{remove:function remove(page){var index=this.pages.indexOf(page);if(index!==-1){var item=this.pages[index];if(item._action=='create'){this.pages.$remove(item);}else{item._action='remove';}}this.pages=this.pages.slice();},create:function create(){var root=Vue.service('palette').item('default-container/default-container-stack/stack-canvas');var widget=Vue.service('palette').widget('default-container/default-container-stack/default-stack-canvas');var page={_action:'create',root:root,type:this.type.name,sources:[],storages:[]};new Shell.Pages.ModalEditor({data:{globals:this.globals,owner:this,context:{widget:widget},original:page,current:JSON.parse(JSON.stringify(page))},methods:{submit:function submit(){Object.assign(this.original,JSON.parse(JSON.stringify(this.current)));this.original._action=this.original._action?this.original._action:'create';this.original.root._action=this.original.root._action?this.original.root._action:'create';this.owner.pages.push(this.original);this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));},update:function update(page){var widget=Vue.service('palette').widget('default-container/default-container-stack/default-stack-canvas');new Shell.Pages.ModalEditor({data:{globals:this.globals,owner:this,context:{widget:widget},original:page,current:JSON.parse(JSON.stringify(page))},methods:{submit:function submit(){Object.assign(this.original,JSON.parse(JSON.stringify(this.current)));this.original._action=this.original._action?this.original._action:'update';this.original.root._action=this.original.root._action?this.original.root._action:'update';this.owner.pages=this.owner.pages.slice();this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));},trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){var PaletteItem=Vue.component('shell-palette-item',{template:'#shell-palette-item',props:{category:Object,group:Object,item:Object,globals:Object}});Vue.component('shell-palette',{template:'#shell-palette',props:{globals:Object,category:Object},data:function data(){return{categories:this.categories};},components:{'palette-item':PaletteItem},created:function created(){this.categories=Widgets.Palette.categories();},attached:function attached(){this.sortable=$(this.$el).sortable({group:'widgets',containerSelector:'.wg-sortable-container',itemSelector:'.wg-sortable-item',drop:false});},methods:{trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Shell.Shell={props:{model:Object},created:function created(){var _this13=this;Vue.service('shell',{page:function page(name){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this13.model.pages[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var p=_step.value;if(p.name==name){return p;}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return null;}});}};function relevant(current,collection){if(!current||current._action=='remove'||collection&&collection.indexOf(current)<0){if(collection){for(var i=0;i<collection.length;i++){var c=collection[i];if(c._action!='remove'){return c;}}}return null;}if(current&&current._action=='remove'){return null;}return current;}Shell.ShellPublic=Vue.component('shell-public',{mixins:[Shell.Shell],template:'#shell-public',data:function data(){return{page:this.page};},created:function created(){this.page=this.$route.page;}});Shell.ShellPrivate=Vue.component('shell-private',{mixins:[Shell.Shell],template:'#shell-private',data:function data(){return{globals:this.globals,leftOpen:this.left,rightOpen:this.right};},created:function created(){var _this14=this;this.globals={selection:{category:null,page:null,source:null,storage:null},// settings: this.settings,
model:this.model};this.leftOpen=true;this.rightOpen=true;this.scale=1;this.globals.selection.category=Vue.service('palette').categories()[0];this.$watch('model.pages',function(pages){_this14.globals.selection.page=relevant(_this14.globals.selection.page,pages);},{immediate:true});this.$watch('globals.selection.page.sources',function(sources){_this14.globals.selection.source=relevant(_this14.globals.selection.source,sources);},{immediate:true});this.$watch('globals.selection.page.storages',function(storages){_this14.globals.selection.storage=relevant(_this14.globals.selection.storage,storages);},{immediate:true});},events:{zoomIn:function zoomIn(data){this.scale+=0.1;$('.ge.ge-page',this.$el).css('transform','scale('+this.scale+')');$('.ge.ge-container',this.$el).perfectScrollbar('update');},zoomOut:function zoomOut(data){this.scale-=0.1;$('.ge.ge-page',this.$el).css('transform','scale('+this.scale+')');$('.ge.ge-container',this.$el).perfectScrollbar('update');},pull:function pull(data){var _this15=this;$.ajax({url:'/ws/portals/'+this.model.portal.id,method:'GET',dataType:"json"}).done(function(d){_this15.$set('model',{portal:d.portal,pages:d.pages});});},push:function push(data){var _this16=this;$.ajax({url:'/ws/portals/'+this.model.portal.id,method:'PUT',dataType:"json",data:JSON.stringify(this.model),contentType:"application/json"}).done(function(d){_this16.$set('model',{portal:d.portal,pages:d.pages});});},selectCategory:function selectCategory(data){this.globals.selection.category=data.item;},selectDomain:function selectDomain(data){this.globals.selection.domain=data.item;},selectPage:function selectPage(data){this.globals.selection.page=data.item;},selectSource:function selectSource(data){this.globals.selection.source=data.item;},selectStorage:function selectStorage(data){this.globals.selection.storage=data.item;}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-sources',{template:'#shell-sources',props:{sources:Array,globals:Object},data:function data(){return{type:this.type,types:this.types,items:this.items};},created:function created(){var _this17=this;this.types=[{name:'source',title:'Sources'},{name:'method',title:'Methods'}];this.type=this.types[0];this.$watch('sources',function(){var items=[];for(var i=0;i<_this17.sources.length;i++){var source=_this17.sources[i];if(source._action!='remove'){items.push(source);}}_this17.items=items;},{deep:true,immediate:true});},methods:{remove:function remove(source){var index=this.sources.indexOf(source);if(index!==-1){var item=this.sources[index];if(item._action=='create'){this.sources.$remove(source);}else{item._action='remove';}}this.sources=this.sources.slice();},create:function create(){var source={_action:'create',method:'GET',type:this.type.name,params:[],url:'',name:''};new Shell.Sources.ModalEditor({data:{globals:this.globals,owner:this,original:source,current:JSON.parse(JSON.stringify(source))},methods:{submit:function submit(){Object.assign(this.original,JSON.parse(JSON.stringify(this.current)));this.original._action=this.original._action?this.original._action:'create';this.owner.sources.push(this.original);this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));},update:function update(source){new Shell.Sources.ModalEditor({data:{globals:this.globals,owner:this,original:source,current:JSON.parse(JSON.stringify(source))},methods:{submit:function submit(){Object.assign(this.original,JSON.parse(JSON.stringify(this.current)));this.original._action=this.original._action?this.original._action:'update';this.owner.sources=this.owner.sources.slice();this.$remove();this.$destroy();},reset:function reset(){this.$remove();this.$destroy();}}}).$mount().$appendTo($('body').get(0));},trigger:function trigger(event,item,context){this.$dispatch(event,{item:item,context:context});}}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-storages',{template:'#shell-storages',props:{storages:Array,globals:Object}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Vue.component('shell-target',{template:'#shell-target',props:{}});})(jQuery,Vue,Core,Shell);(function($,Vue,Core,Shell){Shell.Widget=Vue.component('shell-widget',{template:'#shell-widget',mixins:[/* Core.DecoratorMixin, Core.ContainerMixin, Core.SortableMixin, Core.BindingsMixin */],props:{globals:Object,settings:Object,page:Object,stack:Object,model:Object,data:Object,storage:Object,editable:Boolean},init:function init(){this.decorators={alternatives:{'default-stack-horizontal':'shell-decorator-horizontal','default-stack-vertical':'shell-decorator-vertical','default-stub':'shell-decorator-stub'},fallback:'shell-decorator-widget'};},created:function created(){var palette=Vue.service('palette');this.widget=palette.widget(this.model.name);this.decorator=this.decorators.alternatives[this.widget.tag]||this.decorators.fallback;},data:function data(){return{widget:this.widget,decorator:this.decorator};}});})(jQuery,Vue,Core,Shell);(function(Vue,$,Core,Shell){var WidgetsModalEditor=Shell.Widgets.ModalEditor=Vue.component('shell-widgets-dialog',{template:'#shell-widgets-dialog',mixins:[Core.ModalEditorMixin,Core.TabsMixin('data')],created:function created(){var items=[];for(var i=0;i<this.context.widget.props.length;i++){var prop=this.context.widget.props[i];var param=this.current.params[prop.name];var item={prop:prop,param:param};items.push(item);}this.items=items;},data:function data(){return{context:this.context,items:this.items};},methods:{hasProps:function hasProps(tab){if(this.context.widget&&this.context.widget.props){for(var i=0;i<this.context.widget.props.length;i++){var prop=this.context.widget.props[i];if(prop.tab==tab)return true;}}return false;}}});})(Vue,jQuery,Core,Shell);(function(Vue,$,Core,Shell){var PageSpec=Vue.component('pages-sources-setup-dialog-page-spec',{template:'#pages-sources-setup-dialog-page-spec',props:{selection:Object},data:function data(){return{url:this.url,type:this.type,error:this.error,loading:this.loading,spec:this.spec};},created:function created(){this.url='';this.type='swagger_2.0';this.error=null;this.loading=false;this.spec=null;},methods:{load:function load(){var _this18=this;this.loading=true;$.ajax({url:this.url,method:'GET',dataType:"json",contentType:"application/json"}).done(function(d,a,b,c){_this18.loading=false;_this18.error=null;_this18.spec=d;_this18.submit();}).fail(function(e,m,d){_this18.loading=false;_this18.error='['+m+'] '+d;_this18.spec=null;});},submit:function submit(){if(this.spec){this.$dispatch('next',{page:'spec',spec:this.spec,url:this.url});}},reset:function reset(){this.$dispatch('reset');}}});var PageMethod=Vue.component('pages-sources-setup-dialog-page-method',{template:'#pages-sources-setup-dialog-page-method',props:{selection:Object},data:function data(){return{tags:this.tags,active:this.active};},created:function created(){var tags=[];var tagsMap={};if(this.selection.spec.tags){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.selection.spec.tags[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var tag=_step2.value;var t=_extends({},tag,{methods:[]});tags.push(t);tagsMap[t.name]=t;}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}}var noname={methods:[]};tags.push(noname);if(this.selection.spec.paths){for(var path in this.selection.spec.paths){var onPath=this.selection.spec.paths[path];for(var method in onPath){var operation=onPath[method];var used=false;if(operation.tags){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=operation.tags[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _t=_step3.value;var _tag=tagsMap[_t];if(_tag){_tag.methods.push({method:method,path:path,operation:operation});used=true;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}}if(!used){noname.methods.push({method:method,path:path,operation:operation});}}}}this.tags=tags;this.active=this.tags?this.tags[0]:null;},methods:{submit:function submit(method){this.selection.method=method;this.$dispatch('submit');},reset:function reset(){this.$dispatch('reset');},prev:function prev(){this.$dispatch('prev',{page:'method'});}}});var SetupModalEditor=Vue.component('pages-sources-setup-dialog',{template:'#pages-sources-setup-dialog',mixins:[Core.ModalEditorMixin],data:function data(){return{page:this.page,selection:this.selection};},created:function created(){this.page='spec';this.selection={spec:null,method:null};},components:{'page-spec':PageSpec,'page-method':PageMethod},events:{submit:function submit(){Object.assign(this.current,{method:(this.selection.method.method||'').toUpperCase(),name:this.selection.method.operation.operationId,url:''+this.selection.url+this.selection.method.path,params:this.selection.method.operation.parameters.map(function(p){return{_action:'create',in:p.in,name:p.name,required:p.required,specified:true};})});this.submit();},reset:function reset(){this.reset();},next:function next(_ref){var page=_ref.page;var spec=_ref.spec;var url=_ref.url;switch(page){case'spec':this.selection.spec=spec;this.selection.url=function(){var u=new URI(url);var protocol='schemes'in spec&&spec.schemes.length?spec.schemes[0]:u.protocol();var host='host'in spec?spec.host:u.host();var basePath='basePath'in spec?spec.basePath:u.directory();basePath=basePath=='/'?'':basePath;return protocol+'://'+host+basePath;}();this.page='method';break;}this.$nextTick(function(){$(window).trigger('resize');});},prev:function prev(_ref2){var page=_ref2.page;switch(page){case'method':this.selection.spec=null;this.page='spec';break;}this.$nextTick(function(){$(window).trigger('resize');});}}});var SourcesSetupEditor=Vue.component('pages-sources-setup',{mixins:[Core.ActionMixin(SetupModalEditor)]});})(Vue,jQuery,Core,Shell);(function(Vue,$,Core,Shell){Shell.Sources=Shell.Sources||{};var SourcesListViewer=Vue.component('pages-sources-list',{template:'#pages-sources-list',mixins:[Core.ListViewerMixin]});var SourcesModalEditor=Shell.Sources.ModalEditor=Vue.component('pages-sources-dialog',{template:'#pages-sources-dialog',mixins:[Core.ModalEditorMixin],methods:{check:function check(){console.log('check');},setup:function setup(){console.log('setup');}}});var SourcesEditor=Vue.component('pages-sources',{mixins:[Core.EditorMixin(SourcesListViewer,SourcesModalEditor)],template:'#pages-sources'});var SourcesParamsListViewer=Vue.component('pages-sources-params-list',{template:'#pages-sources-params-list',mixins:[Core.ListViewerMixin]});var SourcesParamsModalEditor=Vue.component('pages-sources-params-dialog',{template:'#pages-sources-params-dialog',mixins:[Core.ModalEditorMixin]});var SourcesParamsEditor=Vue.component('pages-sources-params',{mixins:[Core.EditorMixin(SourcesParamsListViewer,SourcesParamsModalEditor)],template:'#pages-sources-params'});})(Vue,jQuery,Core,Shell);window.Widgets=function($,Vue,Core){var Widgets={};Widgets.Palette=function(){var map={};var arr=[];var widgets={};var categories=function categories(){return arr;};var category=function category(n,_category){if(n in map){return map[n];}else{_category.name=n;map[n]=_category;arr.push(_category);}return this;};var widget=function widget(path){var segments=path.split('/');return this.category(segments[0]).group(segments[1]).widget(segments[2]);};var item=function item(path){var segments=path.split('/');var w=$.extend(true,{},this.category(segments[0]).group(segments[1]).item(segments[2]).widget,{_action:'create'});delete w.props;delete w.tabs;return w;};function generateId(prefix){var ALPHABET='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';var ID_LENGTH=8;var rtn='';for(var i=0;i<ID_LENGTH;i++){rtn+=ALPHABET.charAt(Math.floor(Math.random()*ALPHABET.length));}return prefix?prefix+rtn:rtn;}return{categories:categories,category:category,widget:widget,item:item,placeholder:function placeholder(content){return Widgets.StubWidgetFactory(content);},generateId:generateId};}();Widgets.Category=function(name,title,ignore){var map={};var arr=[];var groups=function groups(){return arr;};var group=function group(n,_group){if(n in map){return map[n];}else{_group.name=name+'/'+n;map[n]=_group;arr.push(_group);}return this;};Widgets.Palette.category(name,{title:title,groups:groups,group:group,ignore:ignore});return Widgets.Palette.category(name);};Widgets.Group=function(category,name,title,ignore){var map={};var arr=[];var items=function items(){return arr;};var item=function item(n,_item){if(n in map){return map[n];}else{_item.name=this.name+'/'+n;map[n]=_item;arr.push(_item);}return this;};var w_map={};var w_arr=[];var widgets=function widgets(){return w_arr;};var widget=function widget(n,_widget){if(n in w_map){return w_map[n];}else{_widget.name=this.name+'/'+n;w_map[n]=_widget;w_arr.push(_widget);}return this;};category.group(name,{title:title,items:items,item:item,widgets:widgets,widget:widget,ignore:ignore});return category.group(name);};Widgets.Widget=function(group,config){var name=config.name;group.widget(config.name,config);return group.widget(name);};Widgets.clone=function(original){return JSON.parse(JSON.stringify(original));};Widgets.create=function(config){var result={name:config.name,tag:config.tag,widgets:config.widgets,tabs:[],props:[],params:{}};if('_action'in config)result._action=config._action;function visit(w,m){if(m.override){if('tabs'in m)w.tabs=JSON.parse(JSON.stringify(m.tabs));if('props'in m)w.props=JSON.parse(JSON.stringify(m.props));}else{if('tabs'in m)w.tabs=w.tabs.concat(m.tabs);if('props'in m)w.props=w.props.concat(m.props);}}if(config.mixins){for(var i=0;i<config.mixins.length;i++){var m=config.mixins[i];visit(result,m);}}visit(result,config);return result;};Widgets.build=function(widget,params){var w=Object.assign(JSON.parse(JSON.stringify(widget)),{params:params||{}});function initParams(props,params){for(var i=0;i<props.length;i++){var prop=props[i];var param=params[prop.name]=params[prop.name]||{value:null};// TODO Set a type-dependent initial value
if(prop.props){if(prop.type=='multiple'){param.value=param.value==null?[]:param.value;param.proto=param.proto==null?{}:param.proto;for(var j=0;j<param.value.length;j++){initParams(prop.props,param.value[j]);}}else if(prop.type=='object'){param.value=param.value==null?{}:param.value;initParams(prop.props,param.value);}else if(prop.type=='asis'){param.value=param.value==null?{}:param.value;}}}}initParams(w.props,w.params);return w;};Widgets.Item=function(group,config){var name=config.name;group.item(config.name,config);return group.item(name);};Widgets.Prop=function(name,title,type,tab,placeholder){return{name:name,title:title,type:type,tab:tab,placeholder:placeholder};};Widgets.Param=function(value,binding,strategy){return{value:value||undefined};};Vue.service('palette',Widgets.Palette);return Widgets;}(jQuery,Vue,Core);(function($,Vue,Core,Widgets){Widgets.CompositeCategory=Widgets.Category('default-composites','Composite Elements');Widgets.FormCategory=Widgets.Category('default-form','Form Elements');Widgets.TextCategory=Widgets.Category('default-text','Text Elements');Widgets.ContainerCategory=Widgets.Category('default-container','Container Elements');Widgets.ImagesCategory=Widgets.Category('default-images','Free Images');Widgets.UtilCategory=Widgets.Category('default-util','Util Elements',true);})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var P=Widgets.Props={};var T=Widgets.Tabs={};T.Data={name:'data',title:'Data'};T.Appearance={name:'appearance',title:'Appearance'};T.Content={name:'content',title:'Content'};T.Events={name:'events',title:'Events'};P.Id={name:'id',title:'ID',type:'string',tab:'data',placeholder:'Unique ID'};P.Width={name:'width',title:'Width',type:'string',tab:'appearance'};P.Height={name:'height',title:'Height',type:'string',tab:'appearance'};P.Padding={name:'padding',title:'Padding',type:'string',tab:'appearance'};P.Margin={name:'margin',title:'Margin',type:'string',tab:'appearance'};P.Border={name:'border',title:'Border',type:'string',placeholder:'1px solid #000000',tab:'appearance'};P.Background={name:'background',title:'Background',type:'string',tab:'appearance'};P.Cols={name:'cols',title:'Columns',type:'string',tab:'appearance'};P.Rows={name:'rows',title:'Rows',type:'string',tab:'appearance'};P.Color={name:'color',title:'Color',type:'string',tab:'appearance'};P.Content={name:'content',title:'Content',type:'string',tab:'content'};P.Title={name:'title',title:'Title',type:'string',tab:'data'};P.Vlink={name:'vlink',title:'Vlink',type:'string',tab:'data'};P.Href={name:'href',title:'Href',type:'string',tab:'data'};P.Spacing={name:'spacing',title:'Border Spacing',type:'string',tab:'appearance'};P.Collapse={name:'collapse',title:'Border Collapse',type:'string',tab:'appearance'};P.Align={name:'align',title:'Text Align',type:'select',tab:'appearance',options:[{value:'left',text:'Left'},{value:'right',text:'Right'},{value:'center',text:'Ceneter'},{value:'justify',text:'Justify'}]};P.Dock={name:'dock',title:'Dock',type:'select',tab:'appearance',options:[{value:'above',text:'Above'},{value:'top',text:'Top'},{value:'right',text:'Right'},{value:'bottom',text:'Bottom'},{value:'left',text:'Left'}]};P.Click={name:'click',title:'@Click',type:'string',tab:'events'};Widgets.CanvasMixin={tabs:[T.Data,T.Appearance,T.Content]};Widgets.WidgetMixin={tabs:[T.Data,T.Appearance,T.Content],props:[P.Id]};Widgets.BoxMixin={props:[{name:'inner',title:'Inner Container',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Border,P.Background]},{name:'outer',title:'Outer Container',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Border,P.Background]}]};Widgets.SizeMixin={props:[P.Width,P.Height]};Widgets.EventsMixin={tabs:[T.Events],props:[P.Click]};})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.HeadersGroup=Widgets.Group(Widgets.CompositeCategory,'default-composite-headers','Headers');Widgets.FootersGroup=Widgets.Group(Widgets.CompositeCategory,'default-composite-footers','Footers');Widgets.OffersGroup=Widgets.Group(Widgets.CompositeCategory,'default-composite-offers','Offers');Widgets.TablesGroup=Widgets.Group(Widgets.CompositeCategory,'default-composite-tables','Tables');Widgets.NavigationGroup=Widgets.Group(Widgets.CompositeCategory,'default-composite-navigation','Navigation');Widgets.GalleryGroup=Widgets.Group(Widgets.CompositeCategory,'default-composite-gallery','Galleries');})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.StackGroup=Widgets.Group(Widgets.ContainerCategory,'default-container-stack','Stacked');Widgets.EmbeddedGroup=Widgets.Group(Widgets.ContainerCategory,'default-container-embedded','Embedded');})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.ButtonsGroup=Widgets.Group(Widgets.FormCategory,'default-form-buttons','Buttons');Widgets.DropdownsGroup=Widgets.Group(Widgets.FormCategory,'default-form-dropdowns','Dropdowns');Widgets.InputsGroup=Widgets.Group(Widgets.FormCategory,'default-form-inputs','Inputs');Widgets.RadiosGroup=Widgets.Group(Widgets.FormCategory,'default-form-radios','Radios');Widgets.ChecksGroup=Widgets.Group(Widgets.FormCategory,'default-form-checks','Checkboxes');})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.ImagesGroup=Widgets.Group(Widgets.ImagesCategory,'default-images-default','Images',true);Widgets.AbstractGroup=Widgets.Group(Widgets.ImagesCategory,'default-images-abstract','Abstract');Widgets.CityGroup=Widgets.Group(Widgets.ImagesCategory,'default-images-city','City');Widgets.NatureGroup=Widgets.Group(Widgets.ImagesCategory,'default-images-nature','Nature');Widgets.SpaceGroup=Widgets.Group(Widgets.ImagesCategory,'default-images-space','Space');})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.HeadingsGroup=Widgets.Group(Widgets.TextCategory,'default-text-headings','Headings');Widgets.BlocksGroup=Widgets.Group(Widgets.TextCategory,'default-text-blocks','Blocks');})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.UtilGroup=Widgets.Group(Widgets.UtilCategory,'default-util-group','Util Elements');})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-carousel',{template:'#default-carousel',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core){Vue.component('default-gallery',{template:'#default-gallery',mixins:[Core.WidgetMixin],data:function data(){return{matrix:this.matrix};},created:function created(){this.$watch('bindings',updateMatrix.bind(this),{immediate:true,deep:true});function updateMatrix(bindings){var items=bindings.items.collection||[];var rows=parseInt(bindings.rows);rows=rows>0?rows:1;var cols=parseInt(bindings.cols);cols=cols>0?cols:3;var cells=rows*cols;var div=parseInt(items.length/cells);var mod=items.length%cells;var count=mod>0||div==0?div+1:div;var matrix=[];for(var p=0;p<count;p++){var pd=[];for(var r=0;r<rows;r++){var rd=[];for(var c=0;c<cols;c++){var index=(p*rows+r)*cols+c;if(index<items.length){rd.push(items[index]);}}pd.push(rd);}matrix.push(pd);}this.matrix=matrix;};}});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){var P=Widgets.Props;var T=Widgets.Tabs;Widgets.GalleryWidget=Widgets.Widget(Widgets.GalleryGroup,Widgets.create({name:'default-gallery',tag:'default-gallery',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[P.Cols,P.Rows,P.Dock,P.Color,P.Align,{name:'border',title:'Border',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Spacing,P.Collapse]},{name:'items',title:'Items',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Appearance,T.Content],props:[P.Width,P.Height,P.Margin,P.Padding,P.Background,{name:'drawing',title:'Drawing',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Width,P.Height,P.Margin,P.Padding,P.Background]},{name:'description',title:'Description',type:'object',tab:'appearance',tabs:[T.Appearance,T.Content],props:[P.Width,P.Height,P.Margin,P.Padding,P.Background,P.Color,P.Align,P.Content]}]},{name:'style',title:'Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Width,P.Height,P.Margin,P.Padding,P.Background,{name:'drawing',title:'Drawing',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Width,P.Height,P.Margin,P.Padding,P.Background]},{name:'description',title:'Description',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Width,P.Height,P.Margin,P.Padding,P.Background,P.Color,P.Align]}]}]}]}));Widgets.GalleryWidgetFactory=function(defaults){var w=Widgets.build(Widgets.GalleryWidget,{rows:{value:defaults.rows},cols:{value:defaults.cols},dock:{value:defaults.dock},align:{value:defaults.align},color:{value:defaults.color},background:{value:defaults.background},border:{value:{spacing:{value:defaults.border.spacing}}},items:{value:{style:{value:{width:{value:defaults.items.style.width},height:{value:defaults.items.style.height},description:{value:{padding:{value:defaults.padding}}}}},collection:{value:defaults.items.collection.map(function(item){return{drawing:{value:{background:{value:item.drawing.background},height:{value:item.drawing.height}}},description:{value:{content:{value:item.description.content}}}};})}}}});return w;};Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r1c1f',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r1c1f.png',widget:Widgets.GalleryWidgetFactory({rows:1,cols:1,dock:'above',padding:'30px',align:'center',color:'#FFFFFF',border:{spacing:'0px'},items:{style:{width:'100%',height:'250px'},collection:[{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span style="font-size:48px">First Item</span></h3>\n                                <p><span style="font-size: 28px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span style="font-size:48px">Second Item</span></h3>\n                                <p><span style="font-size: 28px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF'},description:{content:'\n                                <h3><span style="font-size:48px">Third Item</span></h3>\n                                <p><span style="font-size: 28px">You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r1c1r',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r1c1r.png',widget:Widgets.GalleryWidgetFactory({rows:1,cols:1,dock:'right',padding:'30px',align:'left',color:'#333333',border:{spacing:'20px'},items:{style:{width:'100%',height:'240px'},collection:[{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span style="font-size:48px">First Item</span></h3>\n                                <p><span style="font-size: 28px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span style="font-size:48px">Second Item</span></h3>\n                                <p><span style="font-size: 28px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF'},description:{content:'\n                                <h3><span style="font-size:48px">Third Item</span></h3>\n                                <p><span style="font-size: 28px">You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r1c3f',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r1c3f.png',widget:Widgets.GalleryWidgetFactory({rows:1,cols:3,dock:'above',padding:'30px',align:'center',color:'#FFFFFF',border:{spacing:'20px'},items:{style:{width:'100%',height:'180px'},collection:[{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span>First Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span>Second Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF'},description:{content:'\n                                <h3><span>Third Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#A52939'},description:{content:'\n                                <h3><span>Fourth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE3B80'},description:{content:'\n                                <h3><span>Fifth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE6B9E'},description:{content:'\n                                <h3><span>Sixth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r1c3b',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r1c3b.png',widget:Widgets.GalleryWidgetFactory({rows:1,cols:3,dock:'bottom',padding:'15px',align:'left',color:'#333333',border:{spacing:'20px'},items:{style:{width:'100%'},collection:[{drawing:{background:'#FF6466',height:'180px'},description:{content:'\n                                <h3><span style="font-size:24px">First Item</span></h3>\n                                <p><span style="font-size: 18px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8',height:'180px'},description:{content:'\n                                <h3><span style="font-size:24px">Second Item</span></h3>\n                                <p><span style="font-size: 18px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF',height:'180px'},description:{content:'\n                                <h3><span style="font-size:24px">Third Item</span></h3>\n                                <p><span style="font-size: 18px">You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#A52939',height:'180px'},description:{content:'\n                                <h3><span>Fourth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE3B80',height:'180px'},description:{content:'\n                                <h3><span>Fifth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE6B9E',height:'180px'},description:{content:'\n                                <h3><span>Sixth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r2c4f',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r2c4f.png',widget:Widgets.GalleryWidgetFactory({rows:2,cols:4,dock:'above',padding:'15px',align:'center',color:'#FFFFFF',border:{spacing:'20px'},items:{style:{width:'100%',height:'180px'},collection:[{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span>First Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span>Second Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF'},description:{content:'\n                                <h3><span>Third Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#A52939'},description:{content:'\n                                <h3><span>Fourth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE3B80'},description:{content:'\n                                <h3><span>Fifth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE6B9E'},description:{content:'\n                                <h3><span>Sixth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span>Seventh Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span>Eighth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r2c4b',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r2c4b.png',widget:Widgets.GalleryWidgetFactory({rows:2,cols:4,dock:'bottom',padding:'15px',align:'center',color:'#333333',border:{spacing:'20px'},items:{style:{width:'100%'},collection:[{drawing:{background:'#FF6466',height:'180px'},description:{content:'\n                                <h3><span>First Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8',height:'180px'},description:{content:'\n                                <h3><span>Second Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF',height:'180px'},description:{content:'\n                                <h3><span>Third Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#A52939',height:'180px'},description:{content:'\n                                <h3><span>Fourth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE3B80',height:'180px'},description:{content:'\n                                <h3><span>Fifth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE6B9E',height:'180px'},description:{content:'\n                                <h3><span>Sixth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#FF6466',height:'180px'},description:{content:'\n                                <h3><span>Seventh Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8',height:'180px'},description:{content:'\n                                <h3><span>Eighth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r2c3f',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r2c3f.png',widget:Widgets.GalleryWidgetFactory({rows:2,cols:3,dock:'above',padding:'15px',align:'center',color:'#FFFFFF',border:{spacing:'20px'},items:{style:{width:'100%',height:'180px'},collection:[{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span>First Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span>Second Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF'},description:{content:'\n                                <h3><span>Third Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#A52939'},description:{content:'\n                                <h3><span>Fourth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE3B80'},description:{content:'\n                                <h3><span>Fifth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE6B9E'},description:{content:'\n                                <h3><span>Sixth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}}]}})});Widgets.Item(Widgets.GalleryGroup,{name:'gallery-r3c2r',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/gallery/gallery-r3c2r.png',widget:Widgets.GalleryWidgetFactory({rows:3,cols:2,dock:'right',padding:'15px',align:'left',color:'#333333',border:{spacing:'20px'},items:{style:{width:'100%',height:'140px'},collection:[{drawing:{background:'#FF6466'},description:{content:'\n                                <h3><span>First Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#605BE8'},description:{content:'\n                                <h3><span>Second Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#70FFBF'},description:{content:'\n                                <h3><span>Third Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#A52939'},description:{content:'\n                                <h3><span>Fourth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE3B80'},description:{content:'\n                                <h3><span>Fifth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}},{drawing:{background:'#EE6B9E'},description:{content:'\n                                <h3><span>Sixth Item</span></h3>\n                                <p><span>You can change item data using settings editor</span></p>\n                            '}}]}})});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-navbar',{template:'#default-navbar',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){Widgets.NavbarWidget=Widgets.Widget(Widgets.NavigationGroup,Widgets.create({name:'default-navbar',tag:'default-navbar',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'stereotype',title:'Stereotype',type:'string',tab:'data'}]}));Widgets.NavbarWidgetFactory=function(stereotype,content){return Widgets.build(Widgets.NavbarWidget,{stereotype:{value:stereotype}});};Widgets.Item(Widgets.NavigationGroup,{name:'navbar-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/navbar/navbar-default.png',widget:Widgets.NavbarWidgetFactory('default')});Widgets.Item(Widgets.NavigationGroup,{name:'navbar-inverse',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/navbar/navbar-inverse.png',widget:Widgets.NavbarWidgetFactory('inverse')});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var P=Widgets.Props;var T=Widgets.Tabs;Widgets.TableWidget=Widgets.Widget(Widgets.TablesGroup,Widgets.create({name:'default-table',tag:'default-table',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[// { name: 'stereotype', title: 'Stereotype', type: 'string', tab: 'data' },
{name:'columns',title:'Columns',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Data],props:[P.Margin,P.Padding,P.Background,{name:'name',title:'Name',type:'string',tab:'data'},{name:'title',title:'Title',type:'string',tab:'data'}]},{name:'style',title:'Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]},{name:'rows',title:'Rows',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Data],props:[P.Margin,P.Padding,P.Background,{name:'item',title:'Item',type:'asis',tab:'data'}]},{name:'style',title:'Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]}]}));Widgets.TableWidgetFactory=function(stereotype,content){return Widgets.build(Widgets.TableWidget,{// stereotype: { value: stereotype },
});};Widgets.Item(Widgets.TablesGroup,{name:'table-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/composites/table/table-default.png',widget:Widgets.build(Widgets.TableWidget,{outer:{value:{background:{value:'#FFFFFF'}}},inner:{value:{margin:{value:'0px auto'}}},columns:{value:{style:{value:{padding:{value:'12px 16px'},margin:{value:'4px 2px'}}},collection:{value:[{name:{value:"item.index"},title:{value:"#"}},{name:{value:"item.name"},title:{value:"Name"}},{name:{value:"item.department"},title:{value:"Department"}},{name:{value:"item.sallary"},title:{value:"Sallary"}}]}}},rows:{value:{style:{value:{padding:{value:'12px 16px'},margin:{value:'4px 2px'}}},collection:{value:[{item:{value:{index:1,name:'Иванов Иван',department:'Проектный',sallary:'70'}}},{item:{value:{index:2,name:'Иванов Иван',department:'Проектный',sallary:'60'}}},{item:{value:{index:3,name:'Иванов Иван',department:'Проектный',sallary:'80'}}},{item:{value:{index:4,name:'Иванов Иван',department:'Проектный',sallary:'65'}}}]}}}})});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-table',{template:'#default-table',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);// (function($, Vue, Core) {
//
//     Vue.component('default-frame', {
//         template: '#default-frame',
//         mixins: [ Core.WidgetMixin ],
//         attached: function() {
//
//             // let div = $('<div></div>').appendTo();
//
//             // console.log($('>.wg.wg-content', this.$el));
//             // let router = Core.FrameFactory(
//             //     $('>.wg.wg-content', this.$el),
//             //     $(document.body).data()
//             // )
//             //
//             // // console.log(router);
//             // // console.log(this.$router);
//             // router.go('second');
//         }
//     });
//
// })(jQuery, Vue, Core);
(function($,Vue,Core,Widgets){Widgets.FrameWidget=Widgets.Widget(Widgets.EmbeddedGroup,Widgets.create({name:'default-frame',tag:'default-frame',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'page',title:'Page',type:'string',tab:'data'}]}));Widgets.FrameWidgetFactory=function(){return Widgets.build(Widgets.FrameWidget,{});};Widgets.Item(Widgets.EmbeddedGroup,{name:'default-frame',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/frame/frame.png',widget:Widgets.FrameWidgetFactory()});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.StackCanvasWidget=Widgets.Widget(Widgets.StackGroup,Widgets.create({name:'default-stack-canvas',tag:'default-stack-canvas',mixins:[Widgets.CanvasMixin,Widgets.SizeMixin],widgets:[]}));Widgets.Item(Widgets.StackGroup,{hidden:true,name:'stack-canvas',widget:Widgets.build(Widgets.StackCanvasWidget)});Widgets.StackHorizontalWidget=Widgets.Widget(Widgets.StackGroup,Widgets.create({name:'default-stack-horizontal',tag:'default-stack-horizontal',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],widgets:[],props:[{name:'spacing',title:'Border Spacing',type:'string',tab:'appearance'},{name:'collapse',title:'Border Collapse',type:'string',tab:'appearance'}]}));Widgets.Item(Widgets.StackGroup,{name:'stack-horizontal',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/stack/stack-horizontal.png',widget:Widgets.build(Widgets.StackHorizontalWidget)});Widgets.StackVerticalWidget=Widgets.Widget(Widgets.StackGroup,Widgets.create({name:'default-stack-vertical',tag:'default-stack-vertical',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],widgets:[],props:[{name:'spacing',title:'Border Spacing',type:'string',tab:'appearance'},{name:'collapse',title:'Border Collapse',type:'string',tab:'appearance'}]}));Widgets.Item(Widgets.StackGroup,{name:'stack-vertical',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/stack/stack-vertical.png',widget:Widgets.build(Widgets.StackVerticalWidget,{})});Widgets.Item(Widgets.StackGroup,{name:'stack-2columns',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/stack/stack-2columns.png',widget:Widgets.build(Widgets.StackVerticalWidget,{})});Widgets.Item(Widgets.StackGroup,{name:'stack-3columns',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/stack/stack-3columns.png',widget:Widgets.build(Widgets.StackVerticalWidget,{})});Widgets.Item(Widgets.StackGroup,{name:'stack-left',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/stack/stack-left.png',widget:Widgets.build(Widgets.StackHorizontalWidget)});Widgets.Item(Widgets.StackGroup,{name:'stack-right',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/container/stack/stack-right.png',widget:Widgets.build(Widgets.StackHorizontalWidget)});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-stack-canvas',{template:'#default-stack-canvas',mixins:[Core.WidgetMixin,Core.StackedMixin]});Vue.component('default-stack-horizontal',{template:'#default-stack-horizontal',mixins:[Core.WidgetMixin,Core.StackedMixin]});Vue.component('default-stack-vertical',{template:'#default-stack-vertical',mixins:[Core.WidgetMixin,Core.StackedMixin]});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){Vue.component('default-button',{template:'#default-button',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.ButtonWidget=Widgets.Widget(Widgets.ButtonsGroup,Widgets.create({name:'default-button',tag:'default-button',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin,Widgets.EventsMixin],props:[{name:'title',title:'Title',type:'string',tab:'content'},{name:'type',title:'Type',type:'string',tab:'data'},{name:'stereotype',title:'Stereotype',type:'string',tab:'data'}]}));Widgets.ButtonWidgetFactory=function(title,stereotype){var w=Widgets.build(Widgets.ButtonWidget,{inner:{value:{margin:{value:'15px 15px'}}},type:{value:'button'},title:{value:title},stereotype:{value:stereotype}});return w;};Widgets.Item(Widgets.ButtonsGroup,{name:'button-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/button/button-default.png',widget:Widgets.ButtonWidgetFactory('Default','default')});Widgets.Item(Widgets.ButtonsGroup,{name:'button-primary',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/button/button-primary.png',widget:Widgets.ButtonWidgetFactory('Primary','primary')});Widgets.Item(Widgets.ButtonsGroup,{name:'button-success',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/button/button-success.png',widget:Widgets.ButtonWidgetFactory('Success','success')});Widgets.Item(Widgets.ButtonsGroup,{name:'button-info',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/button/button-info.png',widget:Widgets.ButtonWidgetFactory('Info','info')});Widgets.Item(Widgets.ButtonsGroup,{name:'button-warning',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/button/button-warning.png',widget:Widgets.ButtonWidgetFactory('Warning','warning')});Widgets.Item(Widgets.ButtonsGroup,{name:'button-danger',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/button/button-danger.png',widget:Widgets.ButtonWidgetFactory('Danger','danger')});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-check',{template:'#default-check',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){Widgets.CheckWidget=Widgets.Widget(Widgets.ChecksGroup,Widgets.create({name:'default-check',tag:'default-check',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'stereotype',title:'Stereotype',type:'string',tab:'data'},{name:'items',type:'multiple',title:'Items',tab:'data',tabs:[{name:'data',title:'Data'}],props:[{name:'value',title:'Value',type:'string',tab:'data'},{name:'label',title:'Label',type:'string',tab:'data'}]}]}));Widgets.CheckWidgetFactory=function(stereotype,value,options){return Widgets.build(Widgets.CheckWidget,{model:{value:{value:value}},inner:{value:{margin:{value:'15px 15px'}}},stereotype:{value:stereotype},items:{value:options.map(function(option){return{value:{value:option.value},label:{value:option.label}};})}});};Widgets.Item(Widgets.ChecksGroup,{name:'check-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/check/check-default.png',widget:Widgets.CheckWidgetFactory('default',['A','B'],[{value:'A',label:'A'},{value:'B',label:'B'},{value:'C',label:'C'}])});Widgets.Item(Widgets.ChecksGroup,{name:'check-primary',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/check/check-primary.png',widget:Widgets.CheckWidgetFactory('primary',['A','B'],[{value:'A',label:'A'},{value:'B',label:'B'},{value:'C',label:'C'}])});Widgets.Item(Widgets.ChecksGroup,{name:'check-success',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/check/check-success.png',widget:Widgets.CheckWidgetFactory('success',['A','B'],[{value:'A',label:'A'},{value:'B',label:'B'},{value:'C',label:'C'}])});Widgets.Item(Widgets.ChecksGroup,{name:'check-info',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/check/check-info.png',widget:Widgets.CheckWidgetFactory('info',['A','B'],[{value:'A',label:'A'},{value:'B',label:'B'},{value:'C',label:'C'}])});Widgets.Item(Widgets.ChecksGroup,{name:'check-warning',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/check/check-warning.png',widget:Widgets.CheckWidgetFactory('warning',['A','B'],[{value:'A',label:'A'},{value:'B',label:'B'},{value:'C',label:'C'}])});Widgets.Item(Widgets.ChecksGroup,{name:'check-danger',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/check/check-danger.png',widget:Widgets.CheckWidgetFactory('danger',['A','B'],[{value:'A',label:'A'},{value:'B',label:'B'},{value:'C',label:'C'}])});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Vue.component('default-dropdown',{template:'#default-dropdown',mixins:[Core.WidgetMixin],data:function data(){return{selected:this.selected};},created:function created(){var _this19=this;this.selected=null;this.$watch('bindings',function(b){if(b.items&&b.items.collection){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=b.items.collection[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var item=_step4.value;if(item.value==b.model.value){_this19.selected=item;break;}}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}}},{deep:true,immediate:true});},methods:{select:function select(item){this.$set('bindings.model.value',item.value);},isSelected:function isSelected(item){return this.selected==null?item.value==null:item.value==this.selected.value;}}});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var P=Widgets.Props;var T=Widgets.Tabs;Widgets.DropdownWidget=Widgets.Widget(Widgets.DropdownsGroup,Widgets.create({name:'default-dropdown',tag:'default-dropdown',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'stereotype',title:'Stereotype',type:'string',tab:'data'},{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'empty',title:'Empty',type:'string',tab:'data'},{name:'items',title:'Items',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Data],props:[P.Margin,P.Padding,P.Background,{name:'title',title:'Title',type:'string',tab:'data'},{name:'value',title:'Value',type:'string',tab:'data'}]},{name:'style',title:'Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]}]}));Widgets.DropdownWidgetFactory=function(stereotype){var w=Widgets.build(Widgets.DropdownWidget,{inner:{value:{margin:{value:'15px 15px'}}},stereotype:{value:stereotype},model:{value:{value:null}},empty:{value:'Select'},items:{value:{style:{value:{padding:{value:'12px 16px'},margin:{value:'4px 2px'}}},collection:{value:[{value:{value:"1"},title:{value:"One"}},{value:{value:"2"},title:{value:"Two"}},{value:{value:"3"},title:{value:"Three"}}]}}}});return w;};Widgets.Item(Widgets.DropdownsGroup,{name:'dropdown-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/dropdown/dropdown-default.png',widget:Widgets.DropdownWidgetFactory('default')});Widgets.Item(Widgets.DropdownsGroup,{name:'dropdown-primary',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/dropdown/dropdown-primary.png',widget:Widgets.DropdownWidgetFactory('primary')});Widgets.Item(Widgets.DropdownsGroup,{name:'dropdown-success',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/dropdown/dropdown-success.png',widget:Widgets.DropdownWidgetFactory('success')});Widgets.Item(Widgets.DropdownsGroup,{name:'dropdown-info',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/dropdown/dropdown-info.png',widget:Widgets.DropdownWidgetFactory('info')});Widgets.Item(Widgets.DropdownsGroup,{name:'dropdown-warning',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/dropdown/dropdown-warning.png',widget:Widgets.DropdownWidgetFactory('warning')});Widgets.Item(Widgets.DropdownsGroup,{name:'dropdown-danger',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/dropdown/dropdown-danger.png',widget:Widgets.DropdownWidgetFactory('danger')});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-input-text',{template:'#default-input-text',mixins:[Core.WidgetMixin]});Vue.component('default-input-textarea',{template:'#default-input-textarea',mixins:[Core.WidgetMixin]});Vue.component('default-input-checkbox',{template:'#default-input-checkbox',mixins:[Core.WidgetMixin]});Vue.component('default-input-radio',{template:'#default-input-radio',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){Widgets.InputWidget=Widgets.Widget(Widgets.InputsGroup,Widgets.create({name:'default-input-text',tag:'default-input-text',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'type',title:'Type',type:'string',tab:'content'},{name:'label',title:'Label',type:'string',tab:'content'},{name:'placeholder',title:'Placeholder',type:'string',tab:'content'}]}));Widgets.InputWidgetFactory=function(label,type){return Widgets.build(Widgets.InputWidget,{model:{value:{value:''}},inner:{value:{margin:{value:'15px 15px'}}},label:{value:label},type:{value:type}});};Widgets.Item(Widgets.InputsGroup,{name:'input-text',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/input/text.png',widget:Widgets.InputWidgetFactory('Input','text')});Widgets.TextareaWidget=Widgets.Widget(Widgets.InputsGroup,Widgets.create({name:'default-input-textarea',tag:'default-input-textarea',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'label',title:'Label',type:'string',tab:'data'},{name:'placeholder',title:'Placeholder',type:'string',tab:'data'}]}));Widgets.TextareaWidgetFactory=function(label,placeholder){return Widgets.build(Widgets.TextareaWidget,{model:{value:{value:''}},placeholder:{value:placeholder},inner:{value:{margin:{value:'15px 15px'}}},label:{value:label}});};Widgets.Item(Widgets.InputsGroup,{name:'input-textarea',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/input/textarea.png',widget:Widgets.TextareaWidgetFactory('Textarea','Type message here')});Widgets.RadioInputWidget=Widgets.Widget(Widgets.InputsGroup,Widgets.create({name:'default-input-radio',tag:'default-input-radio',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'stereotype',title:'Stereotype',type:'string',tab:'data'},{name:'items',type:'multiple',title:'Items',tab:'data',tabs:[{name:'data',title:'Data'}],props:[{name:'value',title:'Value',type:'string',tab:'data'},{name:'label',title:'Label',type:'string',tab:'data'}]}]}));Widgets.RadioInputWidgetFactory=function(value,options){return Widgets.build(Widgets.RadioInputWidget,{model:{value:{value:value}},inner:{value:{margin:{value:'15px 15px'}}},items:{value:options.map(function(option){return{value:Widgets.Param(option.value),label:Widgets.Param(option.label)};})}});};Widgets.Item(Widgets.InputsGroup,{name:'input-radio',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/input/radio.png',widget:Widgets.RadioInputWidgetFactory('1',[{value:'1',label:'First'},{value:'2',label:'Second'}])});Widgets.CheckInputWidget=Widgets.Widget(Widgets.InputsGroup,Widgets.create({name:'default-input-checkbox',tag:'default-input-checkbox',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'stereotype',title:'Stereotype',type:'string',tab:'data'},{name:'items',type:'multiple',title:'Items',tab:'data',tabs:[{name:'data',title:'Data'}],props:[{name:'value',title:'Value',type:'string',tab:'data'},{name:'label',title:'Label',type:'string',tab:'data'}]}]}));Widgets.CheckInputWidgetFactory=function(value,options){return Widgets.build(Widgets.CheckInputWidget,{model:{value:{value:value}},inner:{value:{margin:{value:'15px 15px'}}},items:{value:options.map(function(option){return{value:Widgets.Param(option.value),label:Widgets.Param(option.label)};})}});};Widgets.Item(Widgets.InputsGroup,{name:'input-check',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/input/checkbox.png',widget:Widgets.CheckInputWidgetFactory(['1'],[{value:'1',label:'First'},{value:'2',label:'Second'}])});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Vue.component('default-image',{template:'#default-image',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.ImageWidget=Widgets.Widget(Widgets.ImagesGroup,Widgets.create({name:'default-image',tag:'default-image',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'src',title:'Source',type:'string',tab:'appearance'}]}));Widgets.ImageWidgetFactory=function(url){var w=Widgets.build(Widgets.ImageWidget,{// height: { value: '300px' },
src:{value:url}});return w;};var images=[{group:Widgets.AbstractGroup,names:['a1','a2','a3','a4','a5','a6','a7','a8']},{group:Widgets.CityGroup,names:['c1','c2','c3','c4','c5','c6']},{group:Widgets.NatureGroup,names:['n1','n2','n3','n4','n5','n6']},{group:Widgets.SpaceGroup,names:['s1','s2','s3','s4','s5','s6']}];for(var i=0;i<images.length;i++){var settings=images[i];for(var j=0;j<settings.names.length;j++){var name=settings.names[j];Widgets.Item(settings.group,{name:name,thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/images/images/120x80/'+name+'.jpg',widget:Widgets.ImageWidgetFactory('/assets/vendor/ntr1x-archery-widgets/src/widgets/images/images/1920x1280/'+name+'.jpg')});}}})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Widgets.RadioWidget=Widgets.Widget(Widgets.RadiosGroup,Widgets.create({name:'default-radio',tag:'default-radio',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'model',title:'Model',type:'var',tab:'data',variable:true},{name:'stereotype',title:'Stereotype',type:'string',tab:'data'},{name:'items',type:'multiple',title:'Items',tab:'data',tabs:[{name:'data',title:'Data'}],props:[{name:'value',title:'Value',type:'string',tab:'data'},{name:'label',title:'Label',type:'string',tab:'data'}]}]}));Widgets.RadioWidgetFactory=function(stereotype,value,options){return Widgets.build(Widgets.RadioWidget,{model:{value:{value:value}},inner:{value:{margin:{value:'15px 15px'}}},stereotype:{value:stereotype},items:{value:options.map(function(option){return{value:{value:option.value},label:{value:option.label}};})}});};Widgets.Item(Widgets.RadiosGroup,{name:'radio-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/radio/radio-default.png',widget:Widgets.RadioWidgetFactory('default','1',[{value:'1',label:'On'},{value:'0',label:'Off'}])});Widgets.Item(Widgets.RadiosGroup,{name:'radio-primary',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/radio/radio-primary.png',widget:Widgets.RadioWidgetFactory('primary','1',[{value:'1',label:'On'},{value:'0',label:'Off'}])});Widgets.Item(Widgets.RadiosGroup,{name:'radio-success',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/radio/radio-success.png',widget:Widgets.RadioWidgetFactory('success','1',[{value:'1',label:'On'},{value:'0',label:'Off'}])});Widgets.Item(Widgets.RadiosGroup,{name:'radio-info',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/radio/radio-info.png',widget:Widgets.RadioWidgetFactory('info','1',[{value:'1',label:'On'},{value:'0',label:'Off'}])});Widgets.Item(Widgets.RadiosGroup,{name:'radio-warning',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/radio/radio-warning.png',widget:Widgets.RadioWidgetFactory('warning','1',[{value:'1',label:'On'},{value:'0',label:'Off'}])});Widgets.Item(Widgets.RadiosGroup,{name:'radio-danger',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/form/radio/radio-danger.png',widget:Widgets.RadioWidgetFactory('danger','1',[{value:'1',label:'On'},{value:'0',label:'Off'}])});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-radio',{template:'#default-radio',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){Widgets.TextWidget=Widgets.Widget(Widgets.BlocksGroup,Widgets.create({name:'default-text',tag:'default-text',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'stereotype',title:'Stereotype',type:'string',tab:'data'},{name:'content',title:'Content',type:'rich',tab:'content'}]}));Widgets.TextWidgetFactory=function(stereotype,content){return Widgets.build(Widgets.TextWidget,{content:{value:content},stereotype:{value:stereotype},inner:{value:{padding:{value:'15px 15px'}}}});};Widgets.Item(Widgets.HeadingsGroup,{name:'text-h1',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/text-h1.png',widget:Widgets.TextWidgetFactory('default','\n            <h1>Heading 1</h1>\n        ')});Widgets.Item(Widgets.HeadingsGroup,{name:'text-h2',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/text-h2.png',widget:Widgets.TextWidgetFactory('default','\n            <h2>Heading 2</h2>\n        ')});Widgets.Item(Widgets.HeadingsGroup,{name:'text-h3',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/text-h3.png',widget:Widgets.TextWidgetFactory('default','\n            <h3>Heading 3</h3>\n        ')});Widgets.Item(Widgets.HeadingsGroup,{name:'text-h4',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/text-h4.png',widget:Widgets.TextWidgetFactory('default','\n            <h4>Heading 4</h4>\n        ')});Widgets.Item(Widgets.HeadingsGroup,{name:'text-h5',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/text-h5.png',widget:Widgets.TextWidgetFactory('default','\n            <h5>Heading 5</h5>\n        ')});Widgets.Item(Widgets.HeadingsGroup,{name:'text-h6',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/text-h6.png',widget:Widgets.TextWidgetFactory('default','\n            <h6>Heading 6</h6>\n        ')});Widgets.Item(Widgets.BlocksGroup,{name:'block-default',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/block-default.png',widget:Widgets.TextWidgetFactory('default','\n            <h3>Lorem ipsum</h3>\n            <p>Etiam porta sem malesuada magna mollis euismod.</p>\n        ')});Widgets.Item(Widgets.BlocksGroup,{name:'block-primary',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/block-primary.png',widget:Widgets.TextWidgetFactory('primary','\n            <h3>Lorem ipsum</h3>\n            <p>Etiam porta sem malesuada magna mollis euismod.</p>\n        ')});Widgets.Item(Widgets.BlocksGroup,{name:'block-success',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/block-success.png',widget:Widgets.TextWidgetFactory('success','\n            <h3>Lorem ipsum</h3>\n            <p>Etiam porta sem malesuada magna mollis euismod.</p>\n        ')});Widgets.Item(Widgets.BlocksGroup,{name:'block-info',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/block-info.png',widget:Widgets.TextWidgetFactory('info','\n            <h3>Lorem ipsum</h3>\n            <p>Etiam porta sem malesuada magna mollis euismod.</p>\n        ')});Widgets.Item(Widgets.BlocksGroup,{name:'block-warning',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/block-warning.png',widget:Widgets.TextWidgetFactory('warning','\n            <h3>Lorem ipsum</h3>\n            <p>Etiam porta sem malesuada magna mollis euismod.</p>\n        ')});Widgets.Item(Widgets.BlocksGroup,{name:'block-danger',thumbnail:'/assets/vendor/ntr1x-archery-widgets/src/widgets/text/text/block-danger.png',widget:Widgets.TextWidgetFactory('danger','\n            <h3>Lorem ipsum</h3>\n            <p>Etiam porta sem malesuada magna mollis euismod.</p>\n        ')});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-text',{template:'#default-text',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core){Vue.component('default-box',{template:'#default-box',props:{bindings:Object,class:String}});})(jQuery,Vue,Core);(function(Vue){Vue.component('host',{template:'<slot></slot>'});})(Vue);(function($,Vue,Core,Widgets){Widgets.StubWidget=Widgets.Widget(Widgets.UtilGroup,Widgets.create({_action:'ignore',name:'default-stub',tag:'default-stub',mixins:[Widgets.BoxMixin],props:[{name:'content',type:'rich'}]}));Widgets.StubWidgetFactory=function(content){return Widgets.build(Widgets.StubWidget,{content:{value:content}});};})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('default-stub',{template:'#default-stub',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);(function($,Vue,Core){Vue.component('default-placeholder',{template:'#default-placeholder',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core);window.Designer=function($,Vue,Core,Shell){var Designer={};$(document).ready(function(){$('[data-vue-designer]').each(function(index,element){var _data=$(element).data();var App=Vue.extend({data:function data(){return _data;},created:function created(){Vue.service('security',Core.SecurityFactory(this));Vue.service('portals',Core.PortalsFactory(this));}});var router=new VueRouter({history:true,root:'/edit/'+_data.portal.id+'/'});router.beforeEach(function(transition){if(transition.to.auth&&!router.app.principal){transition.abort();}else if(transition.to.anon&&router.app.principal){transition.abort();}else{transition.next();}});var routes={'/':{component:Shell.LoaderPrivate,auth:true,private:true},'/:page':{component:Shell.LoaderPrivate,auth:true,private:true}};// function createRoute(page) {
//     return {
//         component: Shell.ShellPublic.extend({
//             data: function() {
//                 return {
//                     page: page,
//                 };
//             }
//         }),
//     };
// }
//
// if (data.model) {
//     for (var i = 0; i < data.model.pages.length; i++) {
//
//         var page = data.model.pages[i];
//         routes[page.name] = createRoute(page);
//     }
// }
router.map(routes);router.start(App,$('[data-vue-body]',element).get(0));});});return Designer;}(jQuery,Vue,Core,Shell);// (function($, Vue, Core, Shell) {
//
//     Core.FrameFactory =
//     function(element, data) {
//
//         var Frame = Vue.extend({
//             data: function() {
//                 return data;
//             },
//             created: function() {
//
//                 Vue.service('security', Core.SecurityFactory(this));
//                 Vue.service('portals', Core.PortalsFactory(this));
//             },
//         });
//
//         var router = new VueRouter({
//             abstract: true,
//             // root: `/view/${data.portal.id}/`
//         });
//
//         var routes = {};
//
//         for (let page of data.pages) {
//             routes[page.name || '/'] = {
//                 component: Vue.component(`shell-loader-frame-${page.id}`, {
//                     mixins: [ Shell.LoaderFrame ],
//                 }),
//                 auth: false,
//                 private: false,
//                 page: page,
//             }
//         }
//         router.map(routes);
//
//         router.start(Frame, element.get(0));
//
//         return router;
//     };
//
// })(jQuery, Vue, Core, Shell);
window.Landing=function($,Vue,Core,Shell){var Landing={};$(document).ready(function(){$('[data-vue-landing]').each(function(index,element){var _data2=$(element).data();var App=Vue.extend({data:function data(){return _data2;},created:function created(){Vue.service('security',Core.SecurityFactory(this));Vue.service('portals',Core.PortalsFactory(this));}});var router=new VueRouter({history:true});router.beforeEach(function(transition){if(transition.to.auth&&!router.app.principal){transition.abort();}else if(transition.to.anon&&router.app.principal){transition.abort();}else{transition.next();}});var routes={'/':{component:Landing.LandingPage},'/gallery':{component:Landing.LandingGalleryPage},'/storage':{component:Landing.LandingStoragePage},'/signin':{component:Landing.LandingSigninPage,anon:true},'/signup':{component:Landing.LandingSignupPage,anon:true},'/manage':{component:Landing.LandingManagePage,auth:true},'/manage/create':{component:Landing.LandingManageCreatePage,auth:true},'/manage/i/:portal/clone':{component:Landing.LandingManageClonePage,auth:true},'/manage/i/:portal/publish':{component:Landing.LandingManagePublishPage,auth:true}};router.map(routes);router.start(App,$('[data-vue-body]',element).get(0));});});return Landing;}(jQuery,Vue,Core,Shell);window.Viewer=function($,Vue,VueRouter,Core,Shell){var Viewer={};$(document).ready(function(){$('[data-vue-viewer]').each(function(index,element){var _data3=$(element).data();var App=Vue.extend({data:function data(){return _data3;},created:function created(){Vue.service('security',Core.SecurityFactory(this));Vue.service('portals',Core.PortalsFactory(this));}});var router=new VueRouter({history:true,root:'/view/'+_data3.portal.id+'/'});var routes={};var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=_data3.pages[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var page=_step5.value;routes[page.name||'/']={component:Vue.component('shell-loader-public-'+page.id,{mixins:[Shell.LoaderPublic]}),auth:false,private:false,page:page};}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}router.map(routes);router.start(App,$('[data-vue-body]',element).get(0));});});return Viewer;}(jQuery,Vue,VueRouter,Core,Shell);(function($,Vue,Core,Shell,Landing){Landing.LandingPage=Vue.component('landing-page',{template:'#landing-page'});Landing.LandingGalleryPage=Vue.component('landing-gallery-page',{template:'#landing-gallery-page'});Landing.LandingStoragePage=Vue.component('landing-storage-page',{template:'#landing-storage-page'});Landing.LandingSigninPage=Vue.component('landing-signin-page',{template:'#landing-signin-page'});Landing.LandingSignupPage=Vue.component('landing-signup-page',{template:'#landing-signup-page'});Landing.LandingProfilePage=Vue.component('landing-profile-page',{template:'#landing-profile-page'});Landing.LandingManagePage=Vue.component('landing-manage-page',{template:'#landing-manage-page'});Landing.LandingManageCreatePage=Vue.component('landing-manage-create-page',{template:'#landing-manage-create-page'});Landing.LandingManageClonePage=Vue.component('landing-manage-clone-page',{template:'#landing-manage-clone-page'});Landing.LandingManagePublishPage=Vue.component('landing-manage-publish-page',{template:'#landing-manage-publish-page'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core){Core.PortalsFactory=function(owner){return{load:function load(data){return new Promise(function(resolve,reject){owner.$http.get('/ws/portals',data).then(function(d){resolve(d);},function(e){reject(e);});});},create:function create(data){return new Promise(function(resolve,reject){owner.$http.post('/ws/portals',data).then(function(d){resolve(d);},function(e){reject(e);});});},remove:function remove(data){return new Promise(function(resolve,reject){owner.$http.delete('/ws/portals/'+data.id).then(function(d){resolve(d);},function(e){reject(e);});});},publish:function publish(data){return new Promise(function(resolve,reject){var fd=new FormData();fd.append('title',data.title);fd.append('thumbnail',data.thumbnail);owner.$http.post('/ws/portals/'+data.id+'/publication',fd).then(function(d){resolve(d);},function(e){reject(e);});});},unpublish:function unpublish(data){return new Promise(function(resolve,reject){var fd=new FormData();owner.$http.delete('/ws/portals/'+data.id+'/publication',fd).then(function(d){resolve(d);},function(e){reject(e);});});},get:function get(data){return new Promise(function(resolve,reject){owner.$http.get('/ws/portals/'+data.id).then(function(d){resolve(d);},function(e){reject(e);});});}};};})(jQuery,Vue,Core);// (function($, Vue, Core, Shell, Landing) {
//
//     Core.PublicationsFactory = function(owner) {
//
//         return {
//
//             // load: (data) => new Promise((resolve, reject) => {
//             //
//             //     owner.$http.get('/ws/publications', data).then(
//             //         (d) => { resolve(d); },
//             //         (e) => { reject(e); }
//             //     );
//             // }),
//
//             create: (data) => new Promise((resolve, reject) => {
//
//                 var fd = new FormData();
//                 fd.append('title', data.title);
//                 fd.append('portal', data.portal);
//                 fd.append('thumbnail', data.thumbnail);
//
//                 owner.$http.post(`/ws/publications`, fd).then(
//                     (d) => { resolve(d); },
//                     (e) => { reject(e); }
//                 );
//             }),
//
//             update: (data) => new Promise((resolve, reject) => {
//
//                 var fd = new FormData();
//                 fd.append('title', data.title);
//                 if (data.thumbnail) {
//                     fd.append('thumbnail', data.thumbnail);
//                 }
//
//                 owner.$http.put(`/ws/publications/${data.id}`, fd).then(
//                     (d) => { resolve(d); },
//                     (e) => { reject(e); }
//                 );
//             }),
//
//             remove: (data) => new Promise((resolve, reject) => {
//
//                 owner.$http.delete(`/ws/publications/${data.id}`).then(
//                     (d) => { resolve(d); },
//                     (e) => { reject(e); }
//                 );
//             }),
//
//             get: (data) => new Promise((resolve, reject) => {
//
//                 owner.$http.get(`/ws/publications/${data.id}`).then(
//                     (d) => { resolve(d); },
//                     (e) => { reject(e); }
//                 );
//             }),
//         };
//     }
//
// })(jQuery, Vue, Core, Shell, Landing);
(function($,Vue,Core){Core.SecurityFactory=function(owner){return{signup:function signup(data){return new Promise(function(resolve,reject){owner.$http.post('/ws/signup',data).then(function(d){owner.principal=d.data.principal;resolve(d);},function(e){owner.principal=null;reject(e);});});},signin:function signin(data){return new Promise(function(resolve,reject){owner.$http.post('/ws/signin',data).then(function(d){owner.principal=d.data.principal;resolve(d);},function(e){owner.principal=null;reject(e);});});},signout:function signout(){return new Promise(function(resolve,reject){owner.$http.post('/ws/signout').then(function(d){owner.principal=null;resolve(d);},function(e){reject(e);});});}};};})(jQuery,Vue,Core);(function($,Vue,Core,Shell,Landing){var validation={email:"/^([a-zA-Z0-9_\\.\\-]+)@([a-zA-Z0-9_\\.\\-]+)\\.([a-zA-Z0-9]{2,})$/g"};Landing.Signin=Vue.component('landing-account-signin',{template:'#landing-account-signin',data:function data(){return{form:this.form,validation:validation};},created:function created(){this.$set('form',{email:null,password:null});},methods:{signin:function signin(){var _this20=this;Vue.service('security').signin({email:this.form.email,password:this.form.password}).then(function(d){_this20.$router.go('/');},function(e){});}}});Landing.Signup=Vue.component('landing-account-signup',{template:'#landing-account-signup',data:function data(){return{form:this.form,validation:validation};},created:function created(){this.$set('form',{email:null,password:null});},methods:{signup:function signup(){var _this21=this;Vue.service('security').signup({email:this.form.email,password:this.form.password}).then(function(d){_this21.$router.go('/');},function(e){});}}});Landing.Profile=Vue.component('landing-account-profile',{template:'#landing-account-profile'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Footer=Vue.component('landing-footer',{template:'#landing-footer'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Feedback=Vue.component('landing-feedback',{template:'#landing-feedback'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Gallery=Vue.component('landing-gallery',{template:'#landing-gallery',data:function data(){return{portals:this.portals};},created:function created(){var _this22=this;this.portals=[];Vue.service('portals').load({params:{published:1,limit:3}}).then(function(d){_this22.portals=d.data.portals;},function(e){console.log(e);});}});Landing.GalleryFull=Vue.component('landing-gallery-full',{template:'#landing-gallery-full',data:function data(){return{portals:this.portals};},created:function created(){var _this23=this;this.portals=[];Vue.service('portals').load({params:{published:1}}).then(function(d){_this23.portals=d.data.portals;},function(e){console.log(e);});}});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Header=Vue.component('landing-header',{template:'#landing-header',methods:{signout:function signout(){var _this24=this;Vue.service('security').signout().then(function(d){_this24.$router.go('/');},function(e){});}}});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Storage=Vue.component('landing-pricing',{template:'#landing-pricing'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Manage=Vue.component('landing-manage',{template:'#landing-manage',data:function data(){return{url:window.location.protocol+'//'+window.location.hostname+(window.location.port?':'+window.location.port:''),portals:this.portals};},created:function created(){this.refresh();},methods:{refresh:function refresh(){var _this25=this;Vue.service('portals').load().then(function(d){_this25.$set('portals',d.data.portals);},function(e){_this25.$set('portals',[]);});},remove:function remove(id){var _this26=this;Vue.service('portals').remove({id:id}).then(function(d){_this26.refresh();},function(e){});},unpublish:function unpublish(id){var _this27=this;Vue.service('portals').unpublish({id:id}).then(function(d){_this27.refresh();},function(e){});}}});Landing.ManageCreate=Vue.component('landing-manage-create',{template:'#landing-manage-create',data:function data(){return{form:this.form};},created:function created(){this.$set('form',{title:null});},methods:{create:function create(){var _this28=this;Vue.service('portals').create({title:this.form.title}).then(function(d){_this28.$router.go('/manage');},function(e){});}}});Landing.ManageClone=Vue.component('landing-manage-clone',{template:'#landing-manage-clone',data:function data(){return{form:this.form};},created:function created(){var _this29=this;Vue.service('portals').get({id:this.$route.params.portal}).then(function(d){var portal=d.data.portal;var publication=portal.publication;_this29.$set('form',{id:d.data.portal.id,title:null,image:publication?'/uploads/'+publication.thumbnail.dir+'/'+publication.thumbnail.path:null});},function(e){});},methods:{clone:function clone(){var _this30=this;Vue.service('portals').create({clone:this.form.id,title:this.form.title}).then(function(d){_this30.$router.go('/manage');},function(e){console.log(e);});}}});Landing.ManagePublish=Vue.component('landing-manage-publish',{template:'#landing-manage-publish',data:function data(){return{form:this.form};},created:function created(){var _this31=this;this.file=null;Vue.service('portals').get({id:this.$route.params.portal}).then(function(d){var portal=d.data.portal;var publication=portal.publication;_this31.$set('form',{id:portal.id,title:publication?publication.title:'',image:publication?'/uploads/'+publication.thumbnail.dir+'/'+publication.thumbnail.path:null});},function(e){console.log(e);});},attached:function attached(){var _this32=this;$(this.$el).on('change','input[type="file"]',function(e){_this32.file=e.target.files[0];var reader=new FileReader();reader.onload=function(e){_this32.$set('form.image',e.target.result);};reader.readAsDataURL(_this32.file);});},methods:{publish:function publish(){var _this33=this;Vue.service('portals').publish({id:this.form.id,title:this.form.title,thumbnail:this.file}).then(function(d){_this33.$router.go('/manage');},function(e){console.log(e);});}}});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Storage=Vue.component('landing-storage',{template:'#landing-storage'});Landing.StorageFull=Vue.component('landing-storage-full',{template:'#landing-storage-full'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Super=Vue.component('landing-super',{template:'#landing-super'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Usecases=Vue.component('landing-usecases',{template:'#landing-usecases'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Shell,Landing){Landing.Video=Vue.component('landing-video',{template:'#landing-video'});})(jQuery,Vue,Core,Shell,Landing);(function($,Vue,Core,Widgets){Vue.component('academy-footer',{template:'#academy-footer',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var FooterWidget=Widgets.Widget(Widgets.FootersGroup,Widgets.create({name:'academy-footer',tag:'academy-footer',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'logo',title:'Logo',type:'string',tab:'content'},{name:'copy',title:'Copyright',type:'string',tab:'content'},{name:'email',title:'Email',type:'string',tab:'content'},{name:'phone',title:'Phone',type:'string',tab:'content'},{name:'tw',title:'Twitter',type:'string',tab:'content'},{name:'gl',title:'Google+',type:'string',tab:'content'},{name:'fb',title:'Facebook',type:'string',tab:'content'},{name:'vk',title:'Vkontakte',type:'string',tab:'content'}]}));Widgets.Item(Widgets.FootersGroup,{name:'academy-footer',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/footer/footer.png',widget:Widgets.build(FooterWidget,{outer:{value:{background:{value:'#0B3C55'}}},inner:{value:{margin:{value:'0px auto'}}},width:{value:'1200px'},email:{value:'info@moscowacademy.com'},phone:{value:'+7 (495) 123-4567'},tw:{value:'https://twitter.com/bookAgolf'},fb:{value:'https://ru-ru.facebook.com/bookagolf'},gl:{value:'https://plus.google.com/communities/102202642996727382512'},copy:{value:'Copyright 2016 © MoscowAcademy.com'}})});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core){Vue.component('academy-header',{template:'#academy-header',mixins:[Core.WidgetMixin],data:function data(){return{entries:this.entries};}});})(jQuery,Vue,Core);(function($,Vue,Core,Widgets){var HeaderWidget=Widgets.Widget(Widgets.HeadersGroup,Widgets.create({name:'academy-header',tag:'academy-header',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'logo',title:'Logo',type:'string',tab:'content'},{name:'promo',title:'Promo',type:'rich',tab:'content'},{name:'email',title:'Email',type:'string',tab:'content'},{name:'phone',title:'Phone',type:'string',tab:'content'},{name:'tw',title:'Twitter',type:'string',tab:'content'},{name:'gl',title:'Google+',type:'string',tab:'content'},{name:'fb',title:'Facebook',type:'string',tab:'content'},{name:'vk',title:'Vkontakte',type:'string',tab:'content'}]}));Widgets.Item(Widgets.HeadersGroup,{name:'academy-header',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/header/header.png',widget:Widgets.build(HeaderWidget,{outer:{value:{background:{value:'#F5F5F5'}}},inner:{value:{margin:{value:'0px auto'}}},width:{value:'1200px'},email:{value:'info@moscowacademy.com'},phone:{value:'+7 (495) 123-4567'},tw:{value:'https://twitter.com/bookAgolf'},fb:{value:'https://ru-ru.facebook.com/bookagolf'},gl:{value:'https://plus.google.com/communities/102202642996727382512'},logo:{value:'/assets/vendor/ntr1x-archery-widgets-academy/src/header/img/logo.png'},promo:{value:'\n                <h1>Voted the UK\'s<br />Leading Residential<br />Golf School</h1>\n                <h3>by Today’s Golfer Magazine</h3>\n            '}})});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Vue.component('academy-menu',{template:'#academy-menu',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var P=Widgets.Props;var T=Widgets.Tabs;var MenuWidget=Widgets.Widget(Widgets.NavigationGroup,Widgets.create({name:'academy-menu',tag:'academy-menu',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'items',title:'Items',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Data],props:[P.Margin,P.Padding,P.Background,{name:'vlink',title:'Vlink',type:'string',tab:'data'},{name:'href',title:'Href',type:'string',tab:'data'},{name:'title',title:'Title',type:'string',tab:'data'},{name:'active',title:'Active',type:'string',tab:'data'}]},{name:'style',title:'Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]}]}));Widgets.Item(Widgets.NavigationGroup,{name:'academy-menu',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/menu/menu.png',widget:Widgets.build(MenuWidget,{outer:{value:{background:{value:'#266181'}}},inner:{value:{margin:{value:'0px auto'}}},width:{value:'1200px'},items:{value:{style:{value:{padding:{value:'12px 16px'},margin:{value:'4px 2px'}}},collection:{value:[{vlink:{value:""},title:{value:"Home"},active:{value:true}},{vlink:{value:"courses"},title:{value:"Courses"}},{vlink:{value:"about"},title:{value:"About"}}]}}}})});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Vue.component('academy-offer-big',{template:'#academy-offer-big',mixins:[Core.WidgetMixin]});Vue.component('academy-offer-small',{template:'#academy-offer-small',mixins:[Core.WidgetMixin]});Vue.component('academy-offer-above',{template:'#academy-offer-above',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var BigOfferWidget=Widgets.Widget(Widgets.OffersGroup,Widgets.create({name:'academy-offer-big',tag:'academy-offer-big',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'image',title:'Image',type:'string',tab:'data'},{name:'title',title:'Title',type:'string',tab:'data'},{name:'promo',title:'Promo',type:'rich',tab:'data'},{name:'price',title:'Price',type:'string',tab:'data'},{name:'url',title:'Button URL',type:'string',tab:'data'},{name:'button',title:'Button Title ',type:'string',tab:'data'}]}));var BigOfferWidgetFactory=function BigOfferWidgetFactory(image){return Widgets.build(BigOfferWidget,{image:{value:image},title:{value:'Tuition Breaks'},price:{value:'from as little as £265'},url:{value:'http://google.com'},button:{value:'Find out more'},promo:{value:'\n                <p>Our tuition breaks offer you the opportunity for intensive\n                residential golf tuition in small groups. We cater for all\n                abilities and run our courses 7 days a week all year round.\n                Ideal for players of all levels.</p>\n            '},inner:{value:{background:{value:'#266181'}}},width:{value:'600px'}});};Widgets.Item(Widgets.OffersGroup,{name:'academy-offer-big',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/offer/offer-big.png',widget:BigOfferWidgetFactory("url('/assets/vendor/ntr1x-archery-widgets-academy/src/offer/img/offer.jpg') no-repeat")});var SmallOfferWidget=Widgets.Widget(Widgets.OffersGroup,Widgets.create({name:'academy-offer-small',tag:'academy-offer-small',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'title',title:'Title',type:'string',tab:'data'},{name:'url',title:'Button URL',type:'string',tab:'data'},{name:'button',title:'Button Title ',type:'string',tab:'data'}]}));var SmallOfferWidgetFactory=function SmallOfferWidgetFactory(background){return Widgets.build(SmallOfferWidget,{title:{value:'Online Booking'},url:{value:'http://google.com'},button:{value:'Book your course'},inner:{value:{background:{value:background},padding:{value:'15px'}}}});};Widgets.Item(Widgets.OffersGroup,{name:'academy-offer-small',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/offer/offer-small.png',widget:SmallOfferWidgetFactory("#164767 url('/assets/vendor/ntr1x-archery-widgets-academy/src/offer/img/brochure.png') no-repeat top right")});var AboveOfferWidget=Widgets.Widget(Widgets.OffersGroup,Widgets.create({name:'academy-offer-above',tag:'academy-offer-above',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'title',title:'Title',type:'string',tab:'data'},{name:'url',title:'URL',type:'string',tab:'data'}]}));var AboveOfferWidgetFactory=function AboveOfferWidgetFactory(background){return Widgets.build(AboveOfferWidget,{title:{value:'Online Booking'},url:{value:'http://google.com'},inner:{value:{background:{value:background},margin:{value:'0px auto'}}},width:{value:'235px'},height:{value:'235px'}});};Widgets.Item(Widgets.OffersGroup,{name:'academy-offer-above',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/offer/offer-above.png',widget:AboveOfferWidgetFactory("url('/assets/vendor/ntr1x-archery-widgets-academy/src/offer/img/beginner.jpg') no-repeat center center")});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){var P=Widgets.Props;var T=Widgets.Tabs;var SitemapWidget=Widgets.Widget(Widgets.NavigationGroup,Widgets.create({name:'academy-sitemap',tag:'academy-sitemap',mixins:[Widgets.WidgetMixin,Widgets.BoxMixin,Widgets.SizeMixin],props:[{name:'items',title:'Items',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Data,T.Appearance],props:[P.Margin,P.Padding,P.Background,P.Vlink,P.Href,P.Title,{name:'items',title:'Items',type:'object',tab:'data',tabs:[T.Data,T.Appearance],props:[{name:'collection',title:'Collection',type:'multiple',tab:'data',tabs:[T.Data],props:[P.Margin,P.Padding,P.Background,P.Vlink,P.Href,P.Title]},{name:'style',title:'Item Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]},{name:'head',title:'Head Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]},{name:'body',title:'Body Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]},{name:'style',title:'Item Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]},{name:'head',title:'Head Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]},{name:'body',title:'Body Style',type:'object',tab:'appearance',tabs:[T.Appearance],props:[P.Margin,P.Padding,P.Background]}]}]}));Widgets.Item(Widgets.NavigationGroup,{name:'academy-sitemap',thumbnail:'/assets/vendor/ntr1x-archery-widgets-academy/src/sitemap/sitemap.png',widget:Widgets.build(SitemapWidget,{outer:{value:{background:{value:'#266181'}}},inner:{value:{margin:{value:'0px auto'}}},width:{value:'1200px'},items:{value:{// style: {
//     value: {
//         padding: { value: '12px 16px' },
//         margin: { value: '4px 2px' },
//     }
// },
collection:{value:[{title:{value:"Tuition Courses"},items:{value:{collection:{value:[{title:{value:"Beginner Schools"}},{title:{value:"Intermediate Schools"}},{title:{value:"Advanced Schools"}},{title:{value:"Specialist Schools"}}]}}}},{title:{value:"During Your Stay"},items:{value:{collection:{value:[{title:{value:"Golf Lodge"}},{title:{value:"Restaurant & Bar"}},{title:{value:"Places to Visit"}},{title:{value:"FAQ"}}]}}}},{title:{value:"About Us"},items:{value:{collection:{value:[{title:{value:"Why Us?"}},{title:{value:"Testimonials"}},{title:{value:"In the Media"}},{title:{value:"How to find us"}}]}}}}]}}}})});})(jQuery,Vue,Core,Widgets);(function($,Vue,Core,Widgets){Vue.component('academy-sitemap',{template:'#academy-sitemap',mixins:[Core.WidgetMixin]});})(jQuery,Vue,Core,Widgets);
//# sourceMappingURL=app.js.map
