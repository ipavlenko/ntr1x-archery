/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.6",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.6",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.6",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.6",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");
d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.6",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
/* perfect-scrollbar v0.6.11 */
!function t(e,n,r){function o(l,a){if(!n[l]){if(!e[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};e[l][0].call(u.exports,function(t){var n=e[l][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,e,n){"use strict";function r(t){t.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||"undefined"==typeof t){var e=t;i.get(this)||o.initialize(this,e)}else{var n=t;"update"===n?o.update(this):"destroy"===n&&o.destroy(this)}})}}var o=t("../main"),i=t("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],r);else{var l=window.jQuery?window.jQuery:window.$;"undefined"!=typeof l&&r(l)}e.exports=r},{"../main":7,"../plugin/instances":18}],2:[function(t,e,n){"use strict";function r(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function o(t,e){var n=t.className.split(" "),r=n.indexOf(e);r>=0&&n.splice(r,1),t.className=n.join(" ")}n.add=function(t,e){t.classList?t.classList.add(e):r(t,e)},n.remove=function(t,e){t.classList?t.classList.remove(e):o(t,e)},n.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";function r(t,e){return window.getComputedStyle(t)[e]}function o(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function i(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r=r.toString()+"px"),t.style[n]=r}return t}var l={};l.e=function(t,e){var n=document.createElement(t);return n.className=e,n},l.appendTo=function(t,e){return e.appendChild(t),t},l.css=function(t,e,n){return"object"==typeof e?i(t,e):"undefined"==typeof n?r(t,e):o(t,e,n)},l.matches=function(t,e){return"undefined"!=typeof t.matches?t.matches(e):"undefined"!=typeof t.matchesSelector?t.matchesSelector(e):"undefined"!=typeof t.webkitMatchesSelector?t.webkitMatchesSelector(e):"undefined"!=typeof t.mozMatchesSelector?t.mozMatchesSelector(e):"undefined"!=typeof t.msMatchesSelector?t.msMatchesSelector(e):void 0},l.remove=function(t){"undefined"!=typeof t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},l.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return l.matches(t,e)})},e.exports=l},{}],4:[function(t,e,n){"use strict";var r=function(t){this.element=t,this.events={}};r.prototype.bind=function(t,e){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},r.prototype.unbind=function(t,e){var n="undefined"!=typeof e;this.events[t]=this.events[t].filter(function(r){return n&&r!==e?!0:(this.element.removeEventListener(t,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return"undefined"==typeof e&&(e=new r(t),this.eventElements.push(e)),e},o.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},o.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},o.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},o.prototype.once=function(t,e,n){var r=this.eventElement(t),o=function(t){r.unbind(e,o),n(t)};r.bind(e,o)},e.exports=o},{}],5:[function(t,e,n){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var r=t("./class"),o=t("./dom"),i=n.toInt=function(t){return parseInt(t,10)||0},l=n.clone=function(t){if(null===t)return null;if(t.constructor===Array)return t.map(l);if("object"==typeof t){var e={};for(var n in t)e[n]=l(t[n]);return e}return t};n.extend=function(t,e){var n=l(t);for(var r in e)n[r]=l(e[r]);return n},n.isEditable=function(t){return o.matches(t,"input,[contenteditable]")||o.matches(t,"select,[contenteditable]")||o.matches(t,"textarea,[contenteditable]")||o.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=r.list(t),n=0;n<e.length;n++){var o=e[n];0===o.indexOf("ps-")&&r.remove(t,o)}},n.outerWidth=function(t){return i(o.css(t,"width"))+i(o.css(t,"paddingLeft"))+i(o.css(t,"paddingRight"))+i(o.css(t,"borderLeftWidth"))+i(o.css(t,"borderRightWidth"))},n.startScrolling=function(t,e){r.add(t,"ps-in-scrolling"),"undefined"!=typeof e?r.add(t,"ps-"+e):(r.add(t,"ps-x"),r.add(t,"ps-y"))},n.stopScrolling=function(t,e){r.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?r.remove(t,"ps-"+e):(r.remove(t,"ps-x"),r.remove(t,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e,n){"use strict";var r=t("./plugin/destroy"),o=t("./plugin/initialize"),i=t("./plugin/update");e.exports={initialize:o,update:i,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),i=t("./instances");e.exports=function(t){var e=i.get(t);e&&(e.event.unbindAll(),o.remove(e.scrollbarX),o.remove(e.scrollbarY),o.remove(e.scrollbarXRail),o.remove(e.scrollbarYRail),r.removePsClasses(t),i.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e,n){"use strict";function r(t,e){function n(t){return t.getBoundingClientRect()}var r=function(t){t.stopPropagation()};e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",r),e.event.bind(e.scrollbarYRail,"click",function(r){var i=o.toInt(e.scrollbarYHeight/2),s=e.railYRatio*(r.pageY-window.pageYOffset-n(e.scrollbarYRail).top-i),c=e.railYRatio*(e.railYHeight-e.scrollbarYHeight),u=s/c;0>u?u=0:u>1&&(u=1),a(t,"top",(e.contentHeight-e.containerHeight)*u),l(t),r.stopPropagation()}),e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",r),e.event.bind(e.scrollbarXRail,"click",function(r){var i=o.toInt(e.scrollbarXWidth/2),s=e.railXRatio*(r.pageX-window.pageXOffset-n(e.scrollbarXRail).left-i),c=e.railXRatio*(e.railXWidth-e.scrollbarXWidth),u=s/c;0>u?u=0:u>1&&(u=1),a(t,"left",(e.contentWidth-e.containerWidth)*u-e.negativeScrollAdjustment),l(t),r.stopPropagation()})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e,n){"use strict";function r(t,e){function n(n){var o=r+n*e.railXRatio,l=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);0>o?e.scrollbarXLeft=0:o>l?e.scrollbarXLeft=l:e.scrollbarXLeft=o;var a=i.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;c(t,"left",a)}var r=null,o=null,a=function(e){n(e.pageX-o),s(t),e.stopPropagation(),e.preventDefault()},u=function(){i.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",a)};e.event.bind(e.scrollbarX,"mousedown",function(n){o=n.pageX,r=i.toInt(l.css(e.scrollbarX,"left"))*e.railXRatio,i.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",a),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(t,e){function n(n){var o=r+n*e.railYRatio,l=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);0>o?e.scrollbarYTop=0:o>l?e.scrollbarYTop=l:e.scrollbarYTop=o;var a=i.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));c(t,"top",a)}var r=null,o=null,a=function(e){n(e.pageY-o),s(t),e.stopPropagation(),e.preventDefault()},u=function(){i.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",a)};e.event.bind(e.scrollbarY,"mousedown",function(n){o=n.pageY,r=i.toInt(l.css(e.scrollbarY,"top"))*e.railYRatio,i.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",a),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var i=t("../../lib/helper"),l=t("../../lib/dom"),a=t("../instances"),s=t("../update-geometry"),c=t("../update-scroll");e.exports=function(t){var e=a.get(t);r(t,e),o(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var r=!1;e.event.bind(t,"mouseenter",function(){r=!0}),e.event.bind(t,"mouseleave",function(){r=!1});var l=!1;e.event.bind(e.ownerDocument,"keydown",function(c){if(!c.isDefaultPrevented||!c.isDefaultPrevented()){var u=i.matches(e.scrollbarX,":focus")||i.matches(e.scrollbarY,":focus");if(r||u){var d=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(o.isEditable(d))return}var p=0,f=0;switch(c.which){case 37:p=-30;break;case 38:f=30;break;case 39:p=30;break;case 40:f=-30;break;case 33:f=90;break;case 32:f=c.shiftKey?90:-90;break;case 34:f=-90;break;case 35:f=c.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:f=c.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}s(t,"top",t.scrollTop-f),s(t,"left",t.scrollLeft+p),a(t),l=n(p,f),l&&c.preventDefault()}}})}var o=t("../../lib/helper"),i=t("../../lib/dom"),l=t("../instances"),a=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=l.get(t);r(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function r(t){var e=t.deltaX,n=-1*t.deltaY;return("undefined"==typeof e||"undefined"==typeof n)&&(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),[e,n]}function o(e,n){var r=t.querySelector("textarea:hover, .ps-child:hover");if(r){if("TEXTAREA"!==r.tagName&&!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&0>n))return!0;var i=r.scrollLeft-r.clientWidth;if(i>0&&!(0===r.scrollLeft&&0>e||r.scrollLeft===i&&e>0))return!0}return!1}function a(a){var c=r(a),u=c[0],d=c[1];o(u,d)||(s=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(d?l(t,"top",t.scrollTop-d*e.settings.wheelSpeed):l(t,"top",t.scrollTop+u*e.settings.wheelSpeed),s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(u?l(t,"left",t.scrollLeft+u*e.settings.wheelSpeed):l(t,"left",t.scrollLeft-d*e.settings.wheelSpeed),s=!0):(l(t,"top",t.scrollTop-d*e.settings.wheelSpeed),l(t,"left",t.scrollLeft+u*e.settings.wheelSpeed)),i(t),s=s||n(u,d),s&&(a.stopPropagation(),a.preventDefault()))}var s=!1;"undefined"!=typeof window.onwheel?e.event.bind(t,"wheel",a):"undefined"!=typeof window.onmousewheel&&e.event.bind(t,"mousewheel",a)}var o=t("../instances"),i=t("../update-geometry"),l=t("../update-scroll");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e,n){"use strict";function r(t,e){e.event.bind(t,"scroll",function(){i(t)})}var o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19}],15:[function(t,e,n){"use strict";function r(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function r(){c||(c=setInterval(function(){return i.get(t)?(a(t,"top",t.scrollTop+u.top),a(t,"left",t.scrollLeft+u.left),void l(t)):void clearInterval(c)},50))}function s(){c&&(clearInterval(c),c=null),o.stopScrolling(t)}var c=null,u={top:0,left:0},d=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?d=!0:(d=!1,s())}),e.event.bind(window,"mouseup",function(){d&&(d=!1,s())}),e.event.bind(window,"mousemove",function(e){if(d){var n={x:e.pageX,y:e.pageY},i={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<i.left+3?(u.left=-5,o.startScrolling(t,"x")):n.x>i.right-3?(u.left=5,o.startScrolling(t,"x")):u.left=0,n.y<i.top+3?(i.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(t,"y")):n.y>i.bottom-3?(n.y-i.bottom+3<5?u.top=5:u.top=20,o.startScrolling(t,"y")):u.top=0,0===u.top&&0===u.left?s():r()}})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e,n){"use strict";function r(t,e,n,r){function o(n,r){var o=t.scrollTop,i=t.scrollLeft,l=Math.abs(n),a=Math.abs(r);if(a>l){if(0>r&&o===e.contentHeight-e.containerHeight||r>0&&0===o)return!e.settings.swipePropagation}else if(l>a&&(0>n&&i===e.contentWidth-e.containerWidth||n>0&&0===i))return!e.settings.swipePropagation;return!0}function s(e,n){a(t,"top",t.scrollTop-n),a(t,"left",t.scrollLeft-e),l(t)}function c(){Y=!0}function u(){Y=!1}function d(t){return t.targetTouches?t.targetTouches[0]:t}function p(t){return t.targetTouches&&1===t.targetTouches.length?!0:t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE?!0:!1}function f(t){if(p(t)){w=!0;var e=d(t);v.pageX=e.pageX,v.pageY=e.pageY,g=(new Date).getTime(),null!==y&&clearInterval(y),t.stopPropagation()}}function h(t){if(!w&&e.settings.swipePropagation&&f(t),!Y&&w&&p(t)){var n=d(t),r={pageX:n.pageX,pageY:n.pageY},i=r.pageX-v.pageX,l=r.pageY-v.pageY;s(i,l),v=r;var a=(new Date).getTime(),c=a-g;c>0&&(m.x=i/c,m.y=l/c,g=a),o(i,l)&&(t.stopPropagation(),t.preventDefault())}}function b(){!Y&&w&&(w=!1,clearInterval(y),y=setInterval(function(){return i.get(t)?Math.abs(m.x)<.01&&Math.abs(m.y)<.01?void clearInterval(y):(s(30*m.x,30*m.y),m.x*=.8,void(m.y*=.8)):void clearInterval(y)},10))}var v={},g=0,m={},y=null,Y=!1,w=!1;n&&(e.event.bind(window,"touchstart",c),e.event.bind(window,"touchend",u),e.event.bind(t,"touchstart",f),e.event.bind(t,"touchmove",h),e.event.bind(t,"touchend",b)),r&&(window.PointerEvent?(e.event.bind(window,"pointerdown",c),e.event.bind(window,"pointerup",u),e.event.bind(t,"pointerdown",f),e.event.bind(t,"pointermove",h),e.event.bind(t,"pointerup",b)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",c),e.event.bind(window,"MSPointerUp",u),e.event.bind(t,"MSPointerDown",f),e.event.bind(t,"MSPointerMove",h),e.event.bind(t,"MSPointerUp",b)))}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){if(o.env.supportsTouch||o.env.supportsIePointer){var e=i.get(t);r(t,e,o.env.supportsTouch,o.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/class"),i=t("./instances"),l=t("./update-geometry"),a={"click-rail":t("./handler/click-rail"),"drag-scrollbar":t("./handler/drag-scrollbar"),keyboard:t("./handler/keyboard"),wheel:t("./handler/mouse-wheel"),touch:t("./handler/touch"),selection:t("./handler/selection")},s=t("./handler/native-scroll");e.exports=function(t,e){e="object"==typeof e?e:{},o.add(t,"ps-container");var n=i.add(t);n.settings=r.extend(n.settings,e),o.add(t,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(e){a[e](t)}),s(t),l(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";function r(t){function e(){s.add(t,"ps-focus")}function n(){s.remove(t,"ps-focus")}var r=this;r.settings=a.clone(c),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===u.css(t,"direction"),r.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),r.negativeScrollAdjustment=r.isNegativeScroll?t.scrollWidth-t.clientWidth:0,r.event=new d,r.ownerDocument=t.ownerDocument||document,r.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),t),r.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",e),r.event.bind(r.scrollbarX,"blur",n),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=a.toInt(u.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom===r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:a.toInt(u.css(r.scrollbarXRail,"top")),r.railBorderXWidth=a.toInt(u.css(r.scrollbarXRail,"borderLeftWidth"))+a.toInt(u.css(r.scrollbarXRail,"borderRightWidth")),u.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=a.toInt(u.css(r.scrollbarXRail,"marginLeft"))+a.toInt(u.css(r.scrollbarXRail,"marginRight")),u.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),t),r.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",e),r.event.bind(r.scrollbarY,"blur",n),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=a.toInt(u.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight===r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:a.toInt(u.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?a.outerWidth(r.scrollbarY):null,r.railBorderYWidth=a.toInt(u.css(r.scrollbarYRail,"borderTopWidth"))+a.toInt(u.css(r.scrollbarYRail,"borderBottomWidth")),u.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=a.toInt(u.css(r.scrollbarYRail,"marginTop"))+a.toInt(u.css(r.scrollbarYRail,"marginBottom")),u.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function o(t){return t.getAttribute("data-ps-id")}function i(t,e){t.setAttribute("data-ps-id",e)}function l(t){t.removeAttribute("data-ps-id")}var a=t("../lib/helper"),s=t("../lib/class"),c=t("./default-setting"),u=t("../lib/dom"),d=t("../lib/event-manager"),p=t("../lib/guid"),f={};n.add=function(t){var e=p();return i(t,e),f[e]=new r(t),f[e]},n.remove=function(t){delete f[o(t)],l(t)},n.get=function(t){return f[o(t)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e,n){"use strict";function r(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function o(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,a.css(e.scrollbarXRail,n);var r={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?r.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:r.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:r.left=e.scrollbarYLeft+t.scrollLeft,a.css(e.scrollbarYRail,r),a.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),a.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var i=t("../lib/helper"),l=t("../lib/class"),a=t("../lib/dom"),s=t("./instances"),c=t("./update-scroll");e.exports=function(t){var e=s.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var n;t.contains(e.scrollbarXRail)||(n=a.queryChildren(t,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(t){a.remove(t)}),a.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(n=a.queryChildren(t,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(t){a.remove(t)}),a.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=r(e,i.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=i.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=r(e,i.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=i.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),o(t,e),e.scrollbarXActive?l.add(t,"ps-active-x"):(l.remove(t,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,c(t,"left",0)),e.scrollbarYActive?l.add(t,"ps-active-y"):(l.remove(t,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,c(t,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e,n){"use strict";var r,o,i=t("./instances"),l=document.createEvent("Event"),a=document.createEvent("Event"),s=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),f=document.createEvent("Event"),h=document.createEvent("Event"),b=document.createEvent("Event");l.initEvent("ps-scroll-up",!0,!0),a.initEvent("ps-scroll-down",!0,!0),s.initEvent("ps-scroll-left",!0,!0),c.initEvent("ps-scroll-right",!0,!0),u.initEvent("ps-scroll-y",!0,!0),d.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),f.initEvent("ps-x-reach-end",!0,!0),h.initEvent("ps-y-reach-start",!0,!0),b.initEvent("ps-y-reach-end",!0,!0),e.exports=function(t,e,n){if("undefined"==typeof t)throw"You must provide an element to the update-scroll function";if("undefined"==typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===e&&0>=n&&(t.scrollTop=n=0,t.dispatchEvent(h)),"left"===e&&0>=n&&(t.scrollLeft=n=0,t.dispatchEvent(p));var v=i.get(t);"top"===e&&n>=v.contentHeight-v.containerHeight&&(n=v.contentHeight-v.containerHeight,n-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(b)),"left"===e&&n>=v.contentWidth-v.containerWidth&&(n=v.contentWidth-v.containerWidth,n-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(f)),r||(r=t.scrollTop),o||(o=t.scrollLeft),"top"===e&&r>n&&t.dispatchEvent(l),"top"===e&&n>r&&t.dispatchEvent(a),"left"===e&&o>n&&t.dispatchEvent(s),"left"===e&&n>o&&t.dispatchEvent(c),"top"===e&&(t.scrollTop=r=n,t.dispatchEvent(u)),"left"===e&&(t.scrollLeft=o=n,t.dispatchEvent(d))}},{"./instances":18}],21:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),i=t("./instances"),l=t("./update-geometry"),a=t("./update-scroll");e.exports=function(t){var e=i.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,o.css(e.scrollbarXRail,"display","block"),o.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=r.toInt(o.css(e.scrollbarXRail,"marginLeft"))+r.toInt(o.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=r.toInt(o.css(e.scrollbarYRail,"marginTop"))+r.toInt(o.css(e.scrollbarYRail,"marginBottom")),o.css(e.scrollbarXRail,"display","none"),o.css(e.scrollbarYRail,"display","none"),l(t),a(t,"top",t.scrollTop),a(t,"left",t.scrollLeft),o.css(e.scrollbarXRail,"display",""),o.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
/*!
 * Vue.js v1.0.26
 * (c) 2016 Evan You
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.Vue = factory());
}(this, function () { 'use strict';

  function set(obj, key, val) {
    if (hasOwn(obj, key)) {
      obj[key] = val;
      return;
    }
    if (obj._isVue) {
      set(obj._data, key, val);
      return;
    }
    var ob = obj.__ob__;
    if (!ob) {
      obj[key] = val;
      return;
    }
    ob.convert(key, val);
    ob.dep.notify();
    if (ob.vms) {
      var i = ob.vms.length;
      while (i--) {
        var vm = ob.vms[i];
        vm._proxy(key);
        vm._digest();
      }
    }
    return val;
  }

  /**
   * Delete a property and trigger change if necessary.
   *
   * @param {Object} obj
   * @param {String} key
   */

  function del(obj, key) {
    if (!hasOwn(obj, key)) {
      return;
    }
    delete obj[key];
    var ob = obj.__ob__;
    if (!ob) {
      if (obj._isVue) {
        delete obj._data[key];
        obj._digest();
      }
      return;
    }
    ob.dep.notify();
    if (ob.vms) {
      var i = ob.vms.length;
      while (i--) {
        var vm = ob.vms[i];
        vm._unproxy(key);
        vm._digest();
      }
    }
  }

  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * Check whether the object has the property.
   *
   * @param {Object} obj
   * @param {String} key
   * @return {Boolean}
   */

  function hasOwn(obj, key) {
    return hasOwnProperty.call(obj, key);
  }

  /**
   * Check if an expression is a literal value.
   *
   * @param {String} exp
   * @return {Boolean}
   */

  var literalValueRE = /^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/;

  function isLiteral(exp) {
    return literalValueRE.test(exp);
  }

  /**
   * Check if a string starts with $ or _
   *
   * @param {String} str
   * @return {Boolean}
   */

  function isReserved(str) {
    var c = (str + '').charCodeAt(0);
    return c === 0x24 || c === 0x5F;
  }

  /**
   * Guard text output, make sure undefined outputs
   * empty string
   *
   * @param {*} value
   * @return {String}
   */

  function _toString(value) {
    return value == null ? '' : value.toString();
  }

  /**
   * Check and convert possible numeric strings to numbers
   * before setting back to data
   *
   * @param {*} value
   * @return {*|Number}
   */

  function toNumber(value) {
    if (typeof value !== 'string') {
      return value;
    } else {
      var parsed = Number(value);
      return isNaN(parsed) ? value : parsed;
    }
  }

  /**
   * Convert string boolean literals into real booleans.
   *
   * @param {*} value
   * @return {*|Boolean}
   */

  function toBoolean(value) {
    return value === 'true' ? true : value === 'false' ? false : value;
  }

  /**
   * Strip quotes from a string
   *
   * @param {String} str
   * @return {String | false}
   */

  function stripQuotes(str) {
    var a = str.charCodeAt(0);
    var b = str.charCodeAt(str.length - 1);
    return a === b && (a === 0x22 || a === 0x27) ? str.slice(1, -1) : str;
  }

  /**
   * Camelize a hyphen-delmited string.
   *
   * @param {String} str
   * @return {String}
   */

  var camelizeRE = /-(\w)/g;

  function camelize(str) {
    return str.replace(camelizeRE, toUpper);
  }

  function toUpper(_, c) {
    return c ? c.toUpperCase() : '';
  }

  /**
   * Hyphenate a camelCase string.
   *
   * @param {String} str
   * @return {String}
   */

  var hyphenateRE = /([a-z\d])([A-Z])/g;

  function hyphenate(str) {
    return str.replace(hyphenateRE, '$1-$2').toLowerCase();
  }

  /**
   * Converts hyphen/underscore/slash delimitered names into
   * camelized classNames.
   *
   * e.g. my-component => MyComponent
   *      some_else    => SomeElse
   *      some/comp    => SomeComp
   *
   * @param {String} str
   * @return {String}
   */

  var classifyRE = /(?:^|[-_\/])(\w)/g;

  function classify(str) {
    return str.replace(classifyRE, toUpper);
  }

  /**
   * Simple bind, faster than native
   *
   * @param {Function} fn
   * @param {Object} ctx
   * @return {Function}
   */

  function bind(fn, ctx) {
    return function (a) {
      var l = arguments.length;
      return l ? l > 1 ? fn.apply(ctx, arguments) : fn.call(ctx, a) : fn.call(ctx);
    };
  }

  /**
   * Convert an Array-like object to a real Array.
   *
   * @param {Array-like} list
   * @param {Number} [start] - start index
   * @return {Array}
   */

  function toArray(list, start) {
    start = start || 0;
    var i = list.length - start;
    var ret = new Array(i);
    while (i--) {
      ret[i] = list[i + start];
    }
    return ret;
  }

  /**
   * Mix properties into target object.
   *
   * @param {Object} to
   * @param {Object} from
   */

  function extend(to, from) {
    var keys = Object.keys(from);
    var i = keys.length;
    while (i--) {
      to[keys[i]] = from[keys[i]];
    }
    return to;
  }

  /**
   * Quick object check - this is primarily used to tell
   * Objects from primitive values when we know the value
   * is a JSON-compliant type.
   *
   * @param {*} obj
   * @return {Boolean}
   */

  function isObject(obj) {
    return obj !== null && typeof obj === 'object';
  }

  /**
   * Strict object type check. Only returns true
   * for plain JavaScript objects.
   *
   * @param {*} obj
   * @return {Boolean}
   */

  var toString = Object.prototype.toString;
  var OBJECT_STRING = '[object Object]';

  function isPlainObject(obj) {
    return toString.call(obj) === OBJECT_STRING;
  }

  /**
   * Array type check.
   *
   * @param {*} obj
   * @return {Boolean}
   */

  var isArray = Array.isArray;

  /**
   * Define a property.
   *
   * @param {Object} obj
   * @param {String} key
   * @param {*} val
   * @param {Boolean} [enumerable]
   */

  function def(obj, key, val, enumerable) {
    Object.defineProperty(obj, key, {
      value: val,
      enumerable: !!enumerable,
      writable: true,
      configurable: true
    });
  }

  /**
   * Debounce a function so it only gets called after the
   * input stops arriving after the given wait period.
   *
   * @param {Function} func
   * @param {Number} wait
   * @return {Function} - the debounced function
   */

  function _debounce(func, wait) {
    var timeout, args, context, timestamp, result;
    var later = function later() {
      var last = Date.now() - timestamp;
      if (last < wait && last >= 0) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      }
    };
    return function () {
      context = this;
      args = arguments;
      timestamp = Date.now();
      if (!timeout) {
        timeout = setTimeout(later, wait);
      }
      return result;
    };
  }

  /**
   * Manual indexOf because it's slightly faster than
   * native.
   *
   * @param {Array} arr
   * @param {*} obj
   */

  function indexOf(arr, obj) {
    var i = arr.length;
    while (i--) {
      if (arr[i] === obj) return i;
    }
    return -1;
  }

  /**
   * Make a cancellable version of an async callback.
   *
   * @param {Function} fn
   * @return {Function}
   */

  function cancellable(fn) {
    var cb = function cb() {
      if (!cb.cancelled) {
        return fn.apply(this, arguments);
      }
    };
    cb.cancel = function () {
      cb.cancelled = true;
    };
    return cb;
  }

  /**
   * Check if two values are loosely equal - that is,
   * if they are plain objects, do they have the same shape?
   *
   * @param {*} a
   * @param {*} b
   * @return {Boolean}
   */

  function looseEqual(a, b) {
    /* eslint-disable eqeqeq */
    return a == b || (isObject(a) && isObject(b) ? JSON.stringify(a) === JSON.stringify(b) : false);
    /* eslint-enable eqeqeq */
  }

  var hasProto = ('__proto__' in {});

  // Browser environment sniffing
  var inBrowser = typeof window !== 'undefined' && Object.prototype.toString.call(window) !== '[object Object]';

  // detect devtools
  var devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;

  // UA sniffing for working around browser-specific quirks
  var UA = inBrowser && window.navigator.userAgent.toLowerCase();
  var isIE = UA && UA.indexOf('trident') > 0;
  var isIE9 = UA && UA.indexOf('msie 9.0') > 0;
  var isAndroid = UA && UA.indexOf('android') > 0;
  var isIos = UA && /(iphone|ipad|ipod|ios)/i.test(UA);
  var iosVersionMatch = isIos && UA.match(/os ([\d_]+)/);
  var iosVersion = iosVersionMatch && iosVersionMatch[1].split('_');

  // detecting iOS UIWebView by indexedDB
  var hasMutationObserverBug = iosVersion && Number(iosVersion[0]) >= 9 && Number(iosVersion[1]) >= 3 && !window.indexedDB;

  var transitionProp = undefined;
  var transitionEndEvent = undefined;
  var animationProp = undefined;
  var animationEndEvent = undefined;

  // Transition property/event sniffing
  if (inBrowser && !isIE9) {
    var isWebkitTrans = window.ontransitionend === undefined && window.onwebkittransitionend !== undefined;
    var isWebkitAnim = window.onanimationend === undefined && window.onwebkitanimationend !== undefined;
    transitionProp = isWebkitTrans ? 'WebkitTransition' : 'transition';
    transitionEndEvent = isWebkitTrans ? 'webkitTransitionEnd' : 'transitionend';
    animationProp = isWebkitAnim ? 'WebkitAnimation' : 'animation';
    animationEndEvent = isWebkitAnim ? 'webkitAnimationEnd' : 'animationend';
  }

  /**
   * Defer a task to execute it asynchronously. Ideally this
   * should be executed as a microtask, so we leverage
   * MutationObserver if it's available, and fallback to
   * setTimeout(0).
   *
   * @param {Function} cb
   * @param {Object} ctx
   */

  var nextTick = (function () {
    var callbacks = [];
    var pending = false;
    var timerFunc;
    function nextTickHandler() {
      pending = false;
      var copies = callbacks.slice(0);
      callbacks = [];
      for (var i = 0; i < copies.length; i++) {
        copies[i]();
      }
    }

    /* istanbul ignore if */
    if (typeof MutationObserver !== 'undefined' && !hasMutationObserverBug) {
      var counter = 1;
      var observer = new MutationObserver(nextTickHandler);
      var textNode = document.createTextNode(counter);
      observer.observe(textNode, {
        characterData: true
      });
      timerFunc = function () {
        counter = (counter + 1) % 2;
        textNode.data = counter;
      };
    } else {
      // webpack attempts to inject a shim for setImmediate
      // if it is used as a global, so we have to work around that to
      // avoid bundling unnecessary code.
      var context = inBrowser ? window : typeof global !== 'undefined' ? global : {};
      timerFunc = context.setImmediate || setTimeout;
    }
    return function (cb, ctx) {
      var func = ctx ? function () {
        cb.call(ctx);
      } : cb;
      callbacks.push(func);
      if (pending) return;
      pending = true;
      timerFunc(nextTickHandler, 0);
    };
  })();

  var _Set = undefined;
  /* istanbul ignore if */
  if (typeof Set !== 'undefined' && Set.toString().match(/native code/)) {
    // use native Set when available.
    _Set = Set;
  } else {
    // a non-standard Set polyfill that only works with primitive keys.
    _Set = function () {
      this.set = Object.create(null);
    };
    _Set.prototype.has = function (key) {
      return this.set[key] !== undefined;
    };
    _Set.prototype.add = function (key) {
      this.set[key] = 1;
    };
    _Set.prototype.clear = function () {
      this.set = Object.create(null);
    };
  }

  function Cache(limit) {
    this.size = 0;
    this.limit = limit;
    this.head = this.tail = undefined;
    this._keymap = Object.create(null);
  }

  var p = Cache.prototype;

  /**
   * Put <value> into the cache associated with <key>.
   * Returns the entry which was removed to make room for
   * the new entry. Otherwise undefined is returned.
   * (i.e. if there was enough room already).
   *
   * @param {String} key
   * @param {*} value
   * @return {Entry|undefined}
   */

  p.put = function (key, value) {
    var removed;

    var entry = this.get(key, true);
    if (!entry) {
      if (this.size === this.limit) {
        removed = this.shift();
      }
      entry = {
        key: key
      };
      this._keymap[key] = entry;
      if (this.tail) {
        this.tail.newer = entry;
        entry.older = this.tail;
      } else {
        this.head = entry;
      }
      this.tail = entry;
      this.size++;
    }
    entry.value = value;

    return removed;
  };

  /**
   * Purge the least recently used (oldest) entry from the
   * cache. Returns the removed entry or undefined if the
   * cache was empty.
   */

  p.shift = function () {
    var entry = this.head;
    if (entry) {
      this.head = this.head.newer;
      this.head.older = undefined;
      entry.newer = entry.older = undefined;
      this._keymap[entry.key] = undefined;
      this.size--;
    }
    return entry;
  };

  /**
   * Get and register recent use of <key>. Returns the value
   * associated with <key> or undefined if not in cache.
   *
   * @param {String} key
   * @param {Boolean} returnEntry
   * @return {Entry|*}
   */

  p.get = function (key, returnEntry) {
    var entry = this._keymap[key];
    if (entry === undefined) return;
    if (entry === this.tail) {
      return returnEntry ? entry : entry.value;
    }
    // HEAD--------------TAIL
    //   <.older   .newer>
    //  <--- add direction --
    //   A  B  C  <D>  E
    if (entry.newer) {
      if (entry === this.head) {
        this.head = entry.newer;
      }
      entry.newer.older = entry.older; // C <-- E.
    }
    if (entry.older) {
      entry.older.newer = entry.newer; // C. --> E
    }
    entry.newer = undefined; // D --x
    entry.older = this.tail; // D. --> E
    if (this.tail) {
      this.tail.newer = entry; // E. <-- D
    }
    this.tail = entry;
    return returnEntry ? entry : entry.value;
  };

  var cache$1 = new Cache(1000);
  var filterTokenRE = /[^\s'"]+|'[^']*'|"[^"]*"/g;
  var reservedArgRE = /^in$|^-?\d+/;

  /**
   * Parser state
   */

  var str;
  var dir;
  var c;
  var prev;
  var i;
  var l;
  var lastFilterIndex;
  var inSingle;
  var inDouble;
  var curly;
  var square;
  var paren;
  /**
   * Push a filter to the current directive object
   */

  function pushFilter() {
    var exp = str.slice(lastFilterIndex, i).trim();
    var filter;
    if (exp) {
      filter = {};
      var tokens = exp.match(filterTokenRE);
      filter.name = tokens[0];
      if (tokens.length > 1) {
        filter.args = tokens.slice(1).map(processFilterArg);
      }
    }
    if (filter) {
      (dir.filters = dir.filters || []).push(filter);
    }
    lastFilterIndex = i + 1;
  }

  /**
   * Check if an argument is dynamic and strip quotes.
   *
   * @param {String} arg
   * @return {Object}
   */

  function processFilterArg(arg) {
    if (reservedArgRE.test(arg)) {
      return {
        value: toNumber(arg),
        dynamic: false
      };
    } else {
      var stripped = stripQuotes(arg);
      var dynamic = stripped === arg;
      return {
        value: dynamic ? arg : stripped,
        dynamic: dynamic
      };
    }
  }

  /**
   * Parse a directive value and extract the expression
   * and its filters into a descriptor.
   *
   * Example:
   *
   * "a + 1 | uppercase" will yield:
   * {
   *   expression: 'a + 1',
   *   filters: [
   *     { name: 'uppercase', args: null }
   *   ]
   * }
   *
   * @param {String} s
   * @return {Object}
   */

  function parseDirective(s) {
    var hit = cache$1.get(s);
    if (hit) {
      return hit;
    }

    // reset parser state
    str = s;
    inSingle = inDouble = false;
    curly = square = paren = 0;
    lastFilterIndex = 0;
    dir = {};

    for (i = 0, l = str.length; i < l; i++) {
      prev = c;
      c = str.charCodeAt(i);
      if (inSingle) {
        // check single quote
        if (c === 0x27 && prev !== 0x5C) inSingle = !inSingle;
      } else if (inDouble) {
        // check double quote
        if (c === 0x22 && prev !== 0x5C) inDouble = !inDouble;
      } else if (c === 0x7C && // pipe
      str.charCodeAt(i + 1) !== 0x7C && str.charCodeAt(i - 1) !== 0x7C) {
        if (dir.expression == null) {
          // first filter, end of expression
          lastFilterIndex = i + 1;
          dir.expression = str.slice(0, i).trim();
        } else {
          // already has filter
          pushFilter();
        }
      } else {
        switch (c) {
          case 0x22:
            inDouble = true;break; // "
          case 0x27:
            inSingle = true;break; // '
          case 0x28:
            paren++;break; // (
          case 0x29:
            paren--;break; // )
          case 0x5B:
            square++;break; // [
          case 0x5D:
            square--;break; // ]
          case 0x7B:
            curly++;break; // {
          case 0x7D:
            curly--;break; // }
        }
      }
    }

    if (dir.expression == null) {
      dir.expression = str.slice(0, i).trim();
    } else if (lastFilterIndex !== 0) {
      pushFilter();
    }

    cache$1.put(s, dir);
    return dir;
  }

var directive = Object.freeze({
    parseDirective: parseDirective
  });

  var regexEscapeRE = /[-.*+?^${}()|[\]\/\\]/g;
  var cache = undefined;
  var tagRE = undefined;
  var htmlRE = undefined;
  /**
   * Escape a string so it can be used in a RegExp
   * constructor.
   *
   * @param {String} str
   */

  function escapeRegex(str) {
    return str.replace(regexEscapeRE, '\\$&');
  }

  function compileRegex() {
    var open = escapeRegex(config.delimiters[0]);
    var close = escapeRegex(config.delimiters[1]);
    var unsafeOpen = escapeRegex(config.unsafeDelimiters[0]);
    var unsafeClose = escapeRegex(config.unsafeDelimiters[1]);
    tagRE = new RegExp(unsafeOpen + '((?:.|\\n)+?)' + unsafeClose + '|' + open + '((?:.|\\n)+?)' + close, 'g');
    htmlRE = new RegExp('^' + unsafeOpen + '((?:.|\\n)+?)' + unsafeClose + '$');
    // reset cache
    cache = new Cache(1000);
  }

  /**
   * Parse a template text string into an array of tokens.
   *
   * @param {String} text
   * @return {Array<Object> | null}
   *               - {String} type
   *               - {String} value
   *               - {Boolean} [html]
   *               - {Boolean} [oneTime]
   */

  function parseText(text) {
    if (!cache) {
      compileRegex();
    }
    var hit = cache.get(text);
    if (hit) {
      return hit;
    }
    if (!tagRE.test(text)) {
      return null;
    }
    var tokens = [];
    var lastIndex = tagRE.lastIndex = 0;
    var match, index, html, value, first, oneTime;
    /* eslint-disable no-cond-assign */
    while (match = tagRE.exec(text)) {
      /* eslint-enable no-cond-assign */
      index = match.index;
      // push text token
      if (index > lastIndex) {
        tokens.push({
          value: text.slice(lastIndex, index)
        });
      }
      // tag token
      html = htmlRE.test(match[0]);
      value = html ? match[1] : match[2];
      first = value.charCodeAt(0);
      oneTime = first === 42; // *
      value = oneTime ? value.slice(1) : value;
      tokens.push({
        tag: true,
        value: value.trim(),
        html: html,
        oneTime: oneTime
      });
      lastIndex = index + match[0].length;
    }
    if (lastIndex < text.length) {
      tokens.push({
        value: text.slice(lastIndex)
      });
    }
    cache.put(text, tokens);
    return tokens;
  }

  /**
   * Format a list of tokens into an expression.
   * e.g. tokens parsed from 'a {{b}} c' can be serialized
   * into one single expression as '"a " + b + " c"'.
   *
   * @param {Array} tokens
   * @param {Vue} [vm]
   * @return {String}
   */

  function tokensToExp(tokens, vm) {
    if (tokens.length > 1) {
      return tokens.map(function (token) {
        return formatToken(token, vm);
      }).join('+');
    } else {
      return formatToken(tokens[0], vm, true);
    }
  }

  /**
   * Format a single token.
   *
   * @param {Object} token
   * @param {Vue} [vm]
   * @param {Boolean} [single]
   * @return {String}
   */

  function formatToken(token, vm, single) {
    return token.tag ? token.oneTime && vm ? '"' + vm.$eval(token.value) + '"' : inlineFilters(token.value, single) : '"' + token.value + '"';
  }

  /**
   * For an attribute with multiple interpolation tags,
   * e.g. attr="some-{{thing | filter}}", in order to combine
   * the whole thing into a single watchable expression, we
   * have to inline those filters. This function does exactly
   * that. This is a bit hacky but it avoids heavy changes
   * to directive parser and watcher mechanism.
   *
   * @param {String} exp
   * @param {Boolean} single
   * @return {String}
   */

  var filterRE = /[^|]\|[^|]/;
  function inlineFilters(exp, single) {
    if (!filterRE.test(exp)) {
      return single ? exp : '(' + exp + ')';
    } else {
      var dir = parseDirective(exp);
      if (!dir.filters) {
        return '(' + exp + ')';
      } else {
        return 'this._applyFilters(' + dir.expression + // value
        ',null,' + // oldValue (null for read)
        JSON.stringify(dir.filters) + // filter descriptors
        ',false)'; // write?
      }
    }
  }

var text = Object.freeze({
    compileRegex: compileRegex,
    parseText: parseText,
    tokensToExp: tokensToExp
  });

  var delimiters = ['{{', '}}'];
  var unsafeDelimiters = ['{{{', '}}}'];

  var config = Object.defineProperties({

    /**
     * Whether to print debug messages.
     * Also enables stack trace for warnings.
     *
     * @type {Boolean}
     */

    debug: false,

    /**
     * Whether to suppress warnings.
     *
     * @type {Boolean}
     */

    silent: false,

    /**
     * Whether to use async rendering.
     */

    async: true,

    /**
     * Whether to warn against errors caught when evaluating
     * expressions.
     */

    warnExpressionErrors: true,

    /**
     * Whether to allow devtools inspection.
     * Disabled by default in production builds.
     */

    devtools: 'development' !== 'production',

    /**
     * Internal flag to indicate the delimiters have been
     * changed.
     *
     * @type {Boolean}
     */

    _delimitersChanged: true,

    /**
     * List of asset types that a component can own.
     *
     * @type {Array}
     */

    _assetTypes: ['component', 'directive', 'elementDirective', 'filter', 'transition', 'partial'],

    /**
     * prop binding modes
     */

    _propBindingModes: {
      ONE_WAY: 0,
      TWO_WAY: 1,
      ONE_TIME: 2
    },

    /**
     * Max circular updates allowed in a batcher flush cycle.
     */

    _maxUpdateCount: 100

  }, {
    delimiters: { /**
                   * Interpolation delimiters. Changing these would trigger
                   * the text parser to re-compile the regular expressions.
                   *
                   * @type {Array<String>}
                   */

      get: function get() {
        return delimiters;
      },
      set: function set(val) {
        delimiters = val;
        compileRegex();
      },
      configurable: true,
      enumerable: true
    },
    unsafeDelimiters: {
      get: function get() {
        return unsafeDelimiters;
      },
      set: function set(val) {
        unsafeDelimiters = val;
        compileRegex();
      },
      configurable: true,
      enumerable: true
    }
  });

  var warn = undefined;
  var formatComponentName = undefined;

  if ('development' !== 'production') {
    (function () {
      var hasConsole = typeof console !== 'undefined';

      warn = function (msg, vm) {
        if (hasConsole && !config.silent) {
          console.error('[Vue warn]: ' + msg + (vm ? formatComponentName(vm) : ''));
        }
      };

      formatComponentName = function (vm) {
        var name = vm._isVue ? vm.$options.name : vm.name;
        return name ? ' (found in component: <' + hyphenate(name) + '>)' : '';
      };
    })();
  }

  /**
   * Append with transition.
   *
   * @param {Element} el
   * @param {Element} target
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function appendWithTransition(el, target, vm, cb) {
    applyTransition(el, 1, function () {
      target.appendChild(el);
    }, vm, cb);
  }

  /**
   * InsertBefore with transition.
   *
   * @param {Element} el
   * @param {Element} target
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function beforeWithTransition(el, target, vm, cb) {
    applyTransition(el, 1, function () {
      before(el, target);
    }, vm, cb);
  }

  /**
   * Remove with transition.
   *
   * @param {Element} el
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function removeWithTransition(el, vm, cb) {
    applyTransition(el, -1, function () {
      remove(el);
    }, vm, cb);
  }

  /**
   * Apply transitions with an operation callback.
   *
   * @param {Element} el
   * @param {Number} direction
   *                  1: enter
   *                 -1: leave
   * @param {Function} op - the actual DOM operation
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function applyTransition(el, direction, op, vm, cb) {
    var transition = el.__v_trans;
    if (!transition ||
    // skip if there are no js hooks and CSS transition is
    // not supported
    !transition.hooks && !transitionEndEvent ||
    // skip transitions for initial compile
    !vm._isCompiled ||
    // if the vm is being manipulated by a parent directive
    // during the parent's compilation phase, skip the
    // animation.
    vm.$parent && !vm.$parent._isCompiled) {
      op();
      if (cb) cb();
      return;
    }
    var action = direction > 0 ? 'enter' : 'leave';
    transition[action](op, cb);
  }

var transition = Object.freeze({
    appendWithTransition: appendWithTransition,
    beforeWithTransition: beforeWithTransition,
    removeWithTransition: removeWithTransition,
    applyTransition: applyTransition
  });

  /**
   * Query an element selector if it's not an element already.
   *
   * @param {String|Element} el
   * @return {Element}
   */

  function query(el) {
    if (typeof el === 'string') {
      var selector = el;
      el = document.querySelector(el);
      if (!el) {
        'development' !== 'production' && warn('Cannot find element: ' + selector);
      }
    }
    return el;
  }

  /**
   * Check if a node is in the document.
   * Note: document.documentElement.contains should work here
   * but always returns false for comment nodes in phantomjs,
   * making unit tests difficult. This is fixed by doing the
   * contains() check on the node's parentNode instead of
   * the node itself.
   *
   * @param {Node} node
   * @return {Boolean}
   */

  function inDoc(node) {
    if (!node) return false;
    var doc = node.ownerDocument.documentElement;
    var parent = node.parentNode;
    return doc === node || doc === parent || !!(parent && parent.nodeType === 1 && doc.contains(parent));
  }

  /**
   * Get and remove an attribute from a node.
   *
   * @param {Node} node
   * @param {String} _attr
   */

  function getAttr(node, _attr) {
    var val = node.getAttribute(_attr);
    if (val !== null) {
      node.removeAttribute(_attr);
    }
    return val;
  }

  /**
   * Get an attribute with colon or v-bind: prefix.
   *
   * @param {Node} node
   * @param {String} name
   * @return {String|null}
   */

  function getBindAttr(node, name) {
    var val = getAttr(node, ':' + name);
    if (val === null) {
      val = getAttr(node, 'v-bind:' + name);
    }
    return val;
  }

  /**
   * Check the presence of a bind attribute.
   *
   * @param {Node} node
   * @param {String} name
   * @return {Boolean}
   */

  function hasBindAttr(node, name) {
    return node.hasAttribute(name) || node.hasAttribute(':' + name) || node.hasAttribute('v-bind:' + name);
  }

  /**
   * Insert el before target
   *
   * @param {Element} el
   * @param {Element} target
   */

  function before(el, target) {
    target.parentNode.insertBefore(el, target);
  }

  /**
   * Insert el after target
   *
   * @param {Element} el
   * @param {Element} target
   */

  function after(el, target) {
    if (target.nextSibling) {
      before(el, target.nextSibling);
    } else {
      target.parentNode.appendChild(el);
    }
  }

  /**
   * Remove el from DOM
   *
   * @param {Element} el
   */

  function remove(el) {
    el.parentNode.removeChild(el);
  }

  /**
   * Prepend el to target
   *
   * @param {Element} el
   * @param {Element} target
   */

  function prepend(el, target) {
    if (target.firstChild) {
      before(el, target.firstChild);
    } else {
      target.appendChild(el);
    }
  }

  /**
   * Replace target with el
   *
   * @param {Element} target
   * @param {Element} el
   */

  function replace(target, el) {
    var parent = target.parentNode;
    if (parent) {
      parent.replaceChild(el, target);
    }
  }

  /**
   * Add event listener shorthand.
   *
   * @param {Element} el
   * @param {String} event
   * @param {Function} cb
   * @param {Boolean} [useCapture]
   */

  function on(el, event, cb, useCapture) {
    el.addEventListener(event, cb, useCapture);
  }

  /**
   * Remove event listener shorthand.
   *
   * @param {Element} el
   * @param {String} event
   * @param {Function} cb
   */

  function off(el, event, cb) {
    el.removeEventListener(event, cb);
  }

  /**
   * For IE9 compat: when both class and :class are present
   * getAttribute('class') returns wrong value...
   *
   * @param {Element} el
   * @return {String}
   */

  function getClass(el) {
    var classname = el.className;
    if (typeof classname === 'object') {
      classname = classname.baseVal || '';
    }
    return classname;
  }

  /**
   * In IE9, setAttribute('class') will result in empty class
   * if the element also has the :class attribute; However in
   * PhantomJS, setting `className` does not work on SVG elements...
   * So we have to do a conditional check here.
   *
   * @param {Element} el
   * @param {String} cls
   */

  function setClass(el, cls) {
    /* istanbul ignore if */
    if (isIE9 && !/svg$/.test(el.namespaceURI)) {
      el.className = cls;
    } else {
      el.setAttribute('class', cls);
    }
  }

  /**
   * Add class with compatibility for IE & SVG
   *
   * @param {Element} el
   * @param {String} cls
   */

  function addClass(el, cls) {
    if (el.classList) {
      el.classList.add(cls);
    } else {
      var cur = ' ' + getClass(el) + ' ';
      if (cur.indexOf(' ' + cls + ' ') < 0) {
        setClass(el, (cur + cls).trim());
      }
    }
  }

  /**
   * Remove class with compatibility for IE & SVG
   *
   * @param {Element} el
   * @param {String} cls
   */

  function removeClass(el, cls) {
    if (el.classList) {
      el.classList.remove(cls);
    } else {
      var cur = ' ' + getClass(el) + ' ';
      var tar = ' ' + cls + ' ';
      while (cur.indexOf(tar) >= 0) {
        cur = cur.replace(tar, ' ');
      }
      setClass(el, cur.trim());
    }
    if (!el.className) {
      el.removeAttribute('class');
    }
  }

  /**
   * Extract raw content inside an element into a temporary
   * container div
   *
   * @param {Element} el
   * @param {Boolean} asFragment
   * @return {Element|DocumentFragment}
   */

  function extractContent(el, asFragment) {
    var child;
    var rawContent;
    /* istanbul ignore if */
    if (isTemplate(el) && isFragment(el.content)) {
      el = el.content;
    }
    if (el.hasChildNodes()) {
      trimNode(el);
      rawContent = asFragment ? document.createDocumentFragment() : document.createElement('div');
      /* eslint-disable no-cond-assign */
      while (child = el.firstChild) {
        /* eslint-enable no-cond-assign */
        rawContent.appendChild(child);
      }
    }
    return rawContent;
  }

  /**
   * Trim possible empty head/tail text and comment
   * nodes inside a parent.
   *
   * @param {Node} node
   */

  function trimNode(node) {
    var child;
    /* eslint-disable no-sequences */
    while ((child = node.firstChild, isTrimmable(child))) {
      node.removeChild(child);
    }
    while ((child = node.lastChild, isTrimmable(child))) {
      node.removeChild(child);
    }
    /* eslint-enable no-sequences */
  }

  function isTrimmable(node) {
    return node && (node.nodeType === 3 && !node.data.trim() || node.nodeType === 8);
  }

  /**
   * Check if an element is a template tag.
   * Note if the template appears inside an SVG its tagName
   * will be in lowercase.
   *
   * @param {Element} el
   */

  function isTemplate(el) {
    return el.tagName && el.tagName.toLowerCase() === 'template';
  }

  /**
   * Create an "anchor" for performing dom insertion/removals.
   * This is used in a number of scenarios:
   * - fragment instance
   * - v-html
   * - v-if
   * - v-for
   * - component
   *
   * @param {String} content
   * @param {Boolean} persist - IE trashes empty textNodes on
   *                            cloneNode(true), so in certain
   *                            cases the anchor needs to be
   *                            non-empty to be persisted in
   *                            templates.
   * @return {Comment|Text}
   */

  function createAnchor(content, persist) {
    var anchor = config.debug ? document.createComment(content) : document.createTextNode(persist ? ' ' : '');
    anchor.__v_anchor = true;
    return anchor;
  }

  /**
   * Find a component ref attribute that starts with $.
   *
   * @param {Element} node
   * @return {String|undefined}
   */

  var refRE = /^v-ref:/;

  function findRef(node) {
    if (node.hasAttributes()) {
      var attrs = node.attributes;
      for (var i = 0, l = attrs.length; i < l; i++) {
        var name = attrs[i].name;
        if (refRE.test(name)) {
          return camelize(name.replace(refRE, ''));
        }
      }
    }
  }

  /**
   * Map a function to a range of nodes .
   *
   * @param {Node} node
   * @param {Node} end
   * @param {Function} op
   */

  function mapNodeRange(node, end, op) {
    var next;
    while (node !== end) {
      next = node.nextSibling;
      op(node);
      node = next;
    }
    op(end);
  }

  /**
   * Remove a range of nodes with transition, store
   * the nodes in a fragment with correct ordering,
   * and call callback when done.
   *
   * @param {Node} start
   * @param {Node} end
   * @param {Vue} vm
   * @param {DocumentFragment} frag
   * @param {Function} cb
   */

  function removeNodeRange(start, end, vm, frag, cb) {
    var done = false;
    var removed = 0;
    var nodes = [];
    mapNodeRange(start, end, function (node) {
      if (node === end) done = true;
      nodes.push(node);
      removeWithTransition(node, vm, onRemoved);
    });
    function onRemoved() {
      removed++;
      if (done && removed >= nodes.length) {
        for (var i = 0; i < nodes.length; i++) {
          frag.appendChild(nodes[i]);
        }
        cb && cb();
      }
    }
  }

  /**
   * Check if a node is a DocumentFragment.
   *
   * @param {Node} node
   * @return {Boolean}
   */

  function isFragment(node) {
    return node && node.nodeType === 11;
  }

  /**
   * Get outerHTML of elements, taking care
   * of SVG elements in IE as well.
   *
   * @param {Element} el
   * @return {String}
   */

  function getOuterHTML(el) {
    if (el.outerHTML) {
      return el.outerHTML;
    } else {
      var container = document.createElement('div');
      container.appendChild(el.cloneNode(true));
      return container.innerHTML;
    }
  }

  var commonTagRE = /^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i;
  var reservedTagRE = /^(slot|partial|component)$/i;

  var isUnknownElement = undefined;
  if ('development' !== 'production') {
    isUnknownElement = function (el, tag) {
      if (tag.indexOf('-') > -1) {
        // http://stackoverflow.com/a/28210364/1070244
        return el.constructor === window.HTMLUnknownElement || el.constructor === window.HTMLElement;
      } else {
        return (/HTMLUnknownElement/.test(el.toString()) &&
          // Chrome returns unknown for several HTML5 elements.
          // https://code.google.com/p/chromium/issues/detail?id=540526
          // Firefox returns unknown for some "Interactive elements."
          !/^(data|time|rtc|rb|details|dialog|summary)$/.test(tag)
        );
      }
    };
  }

  /**
   * Check if an element is a component, if yes return its
   * component id.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Object|undefined}
   */

  function checkComponentAttr(el, options) {
    var tag = el.tagName.toLowerCase();
    var hasAttrs = el.hasAttributes();
    if (!commonTagRE.test(tag) && !reservedTagRE.test(tag)) {
      if (resolveAsset(options, 'components', tag)) {
        return { id: tag };
      } else {
        var is = hasAttrs && getIsBinding(el, options);
        if (is) {
          return is;
        } else if ('development' !== 'production') {
          var expectedTag = options._componentNameMap && options._componentNameMap[tag];
          if (expectedTag) {
            warn('Unknown custom element: <' + tag + '> - ' + 'did you mean <' + expectedTag + '>? ' + 'HTML is case-insensitive, remember to use kebab-case in templates.');
          } else if (isUnknownElement(el, tag)) {
            warn('Unknown custom element: <' + tag + '> - did you ' + 'register the component correctly? For recursive components, ' + 'make sure to provide the "name" option.');
          }
        }
      }
    } else if (hasAttrs) {
      return getIsBinding(el, options);
    }
  }

  /**
   * Get "is" binding from an element.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Object|undefined}
   */

  function getIsBinding(el, options) {
    // dynamic syntax
    var exp = el.getAttribute('is');
    if (exp != null) {
      if (resolveAsset(options, 'components', exp)) {
        el.removeAttribute('is');
        return { id: exp };
      }
    } else {
      exp = getBindAttr(el, 'is');
      if (exp != null) {
        return { id: exp, dynamic: true };
      }
    }
  }

  /**
   * Option overwriting strategies are functions that handle
   * how to merge a parent option value and a child option
   * value into the final value.
   *
   * All strategy functions follow the same signature:
   *
   * @param {*} parentVal
   * @param {*} childVal
   * @param {Vue} [vm]
   */

  var strats = config.optionMergeStrategies = Object.create(null);

  /**
   * Helper that recursively merges two data objects together.
   */

  function mergeData(to, from) {
    var key, toVal, fromVal;
    for (key in from) {
      toVal = to[key];
      fromVal = from[key];
      if (!hasOwn(to, key)) {
        set(to, key, fromVal);
      } else if (isObject(toVal) && isObject(fromVal)) {
        mergeData(toVal, fromVal);
      }
    }
    return to;
  }

  /**
   * Data
   */

  strats.data = function (parentVal, childVal, vm) {
    if (!vm) {
      // in a Vue.extend merge, both should be functions
      if (!childVal) {
        return parentVal;
      }
      if (typeof childVal !== 'function') {
        'development' !== 'production' && warn('The "data" option should be a function ' + 'that returns a per-instance value in component ' + 'definitions.', vm);
        return parentVal;
      }
      if (!parentVal) {
        return childVal;
      }
      // when parentVal & childVal are both present,
      // we need to return a function that returns the
      // merged result of both functions... no need to
      // check if parentVal is a function here because
      // it has to be a function to pass previous merges.
      return function mergedDataFn() {
        return mergeData(childVal.call(this), parentVal.call(this));
      };
    } else if (parentVal || childVal) {
      return function mergedInstanceDataFn() {
        // instance merge
        var instanceData = typeof childVal === 'function' ? childVal.call(vm) : childVal;
        var defaultData = typeof parentVal === 'function' ? parentVal.call(vm) : undefined;
        if (instanceData) {
          return mergeData(instanceData, defaultData);
        } else {
          return defaultData;
        }
      };
    }
  };

  /**
   * El
   */

  strats.el = function (parentVal, childVal, vm) {
    if (!vm && childVal && typeof childVal !== 'function') {
      'development' !== 'production' && warn('The "el" option should be a function ' + 'that returns a per-instance value in component ' + 'definitions.', vm);
      return;
    }
    var ret = childVal || parentVal;
    // invoke the element factory if this is instance merge
    return vm && typeof ret === 'function' ? ret.call(vm) : ret;
  };

  /**
   * Hooks and param attributes are merged as arrays.
   */

  strats.init = strats.created = strats.ready = strats.attached = strats.detached = strats.beforeCompile = strats.compiled = strats.beforeDestroy = strats.destroyed = strats.activate = function (parentVal, childVal) {
    return childVal ? parentVal ? parentVal.concat(childVal) : isArray(childVal) ? childVal : [childVal] : parentVal;
  };

  /**
   * Assets
   *
   * When a vm is present (instance creation), we need to do
   * a three-way merge between constructor options, instance
   * options and parent options.
   */

  function mergeAssets(parentVal, childVal) {
    var res = Object.create(parentVal || null);
    return childVal ? extend(res, guardArrayAssets(childVal)) : res;
  }

  config._assetTypes.forEach(function (type) {
    strats[type + 's'] = mergeAssets;
  });

  /**
   * Events & Watchers.
   *
   * Events & watchers hashes should not overwrite one
   * another, so we merge them as arrays.
   */

  strats.watch = strats.events = function (parentVal, childVal) {
    if (!childVal) return parentVal;
    if (!parentVal) return childVal;
    var ret = {};
    extend(ret, parentVal);
    for (var key in childVal) {
      var parent = ret[key];
      var child = childVal[key];
      if (parent && !isArray(parent)) {
        parent = [parent];
      }
      ret[key] = parent ? parent.concat(child) : [child];
    }
    return ret;
  };

  /**
   * Other object hashes.
   */

  strats.props = strats.methods = strats.computed = function (parentVal, childVal) {
    if (!childVal) return parentVal;
    if (!parentVal) return childVal;
    var ret = Object.create(null);
    extend(ret, parentVal);
    extend(ret, childVal);
    return ret;
  };

  /**
   * Default strategy.
   */

  var defaultStrat = function defaultStrat(parentVal, childVal) {
    return childVal === undefined ? parentVal : childVal;
  };

  /**
   * Make sure component options get converted to actual
   * constructors.
   *
   * @param {Object} options
   */

  function guardComponents(options) {
    if (options.components) {
      var components = options.components = guardArrayAssets(options.components);
      var ids = Object.keys(components);
      var def;
      if ('development' !== 'production') {
        var map = options._componentNameMap = {};
      }
      for (var i = 0, l = ids.length; i < l; i++) {
        var key = ids[i];
        if (commonTagRE.test(key) || reservedTagRE.test(key)) {
          'development' !== 'production' && warn('Do not use built-in or reserved HTML elements as component ' + 'id: ' + key);
          continue;
        }
        // record a all lowercase <-> kebab-case mapping for
        // possible custom element case error warning
        if ('development' !== 'production') {
          map[key.replace(/-/g, '').toLowerCase()] = hyphenate(key);
        }
        def = components[key];
        if (isPlainObject(def)) {
          components[key] = Vue.extend(def);
        }
      }
    }
  }

  /**
   * Ensure all props option syntax are normalized into the
   * Object-based format.
   *
   * @param {Object} options
   */

  function guardProps(options) {
    var props = options.props;
    var i, val;
    if (isArray(props)) {
      options.props = {};
      i = props.length;
      while (i--) {
        val = props[i];
        if (typeof val === 'string') {
          options.props[val] = null;
        } else if (val.name) {
          options.props[val.name] = val;
        }
      }
    } else if (isPlainObject(props)) {
      var keys = Object.keys(props);
      i = keys.length;
      while (i--) {
        val = props[keys[i]];
        if (typeof val === 'function') {
          props[keys[i]] = { type: val };
        }
      }
    }
  }

  /**
   * Guard an Array-format assets option and converted it
   * into the key-value Object format.
   *
   * @param {Object|Array} assets
   * @return {Object}
   */

  function guardArrayAssets(assets) {
    if (isArray(assets)) {
      var res = {};
      var i = assets.length;
      var asset;
      while (i--) {
        asset = assets[i];
        var id = typeof asset === 'function' ? asset.options && asset.options.name || asset.id : asset.name || asset.id;
        if (!id) {
          'development' !== 'production' && warn('Array-syntax assets must provide a "name" or "id" field.');
        } else {
          res[id] = asset;
        }
      }
      return res;
    }
    return assets;
  }

  /**
   * Merge two option objects into a new one.
   * Core utility used in both instantiation and inheritance.
   *
   * @param {Object} parent
   * @param {Object} child
   * @param {Vue} [vm] - if vm is present, indicates this is
   *                     an instantiation merge.
   */

  function mergeOptions(parent, child, vm) {
    guardComponents(child);
    guardProps(child);
    if ('development' !== 'production') {
      if (child.propsData && !vm) {
        warn('propsData can only be used as an instantiation option.');
      }
    }
    var options = {};
    var key;
    if (child['extends']) {
      parent = typeof child['extends'] === 'function' ? mergeOptions(parent, child['extends'].options, vm) : mergeOptions(parent, child['extends'], vm);
    }
    if (child.mixins) {
      for (var i = 0, l = child.mixins.length; i < l; i++) {
        var mixin = child.mixins[i];
        var mixinOptions = mixin.prototype instanceof Vue ? mixin.options : mixin;
        parent = mergeOptions(parent, mixinOptions, vm);
      }
    }
    for (key in parent) {
      mergeField(key);
    }
    for (key in child) {
      if (!hasOwn(parent, key)) {
        mergeField(key);
      }
    }
    function mergeField(key) {
      var strat = strats[key] || defaultStrat;
      options[key] = strat(parent[key], child[key], vm, key);
    }
    return options;
  }

  /**
   * Resolve an asset.
   * This function is used because child instances need access
   * to assets defined in its ancestor chain.
   *
   * @param {Object} options
   * @param {String} type
   * @param {String} id
   * @param {Boolean} warnMissing
   * @return {Object|Function}
   */

  function resolveAsset(options, type, id, warnMissing) {
    /* istanbul ignore if */
    if (typeof id !== 'string') {
      return;
    }
    var assets = options[type];
    var camelizedId;
    var res = assets[id] ||
    // camelCase ID
    assets[camelizedId = camelize(id)] ||
    // Pascal Case ID
    assets[camelizedId.charAt(0).toUpperCase() + camelizedId.slice(1)];
    if ('development' !== 'production' && warnMissing && !res) {
      warn('Failed to resolve ' + type.slice(0, -1) + ': ' + id, options);
    }
    return res;
  }

  var uid$1 = 0;

  /**
   * A dep is an observable that can have multiple
   * directives subscribing to it.
   *
   * @constructor
   */
  function Dep() {
    this.id = uid$1++;
    this.subs = [];
  }

  // the current target watcher being evaluated.
  // this is globally unique because there could be only one
  // watcher being evaluated at any time.
  Dep.target = null;

  /**
   * Add a directive subscriber.
   *
   * @param {Directive} sub
   */

  Dep.prototype.addSub = function (sub) {
    this.subs.push(sub);
  };

  /**
   * Remove a directive subscriber.
   *
   * @param {Directive} sub
   */

  Dep.prototype.removeSub = function (sub) {
    this.subs.$remove(sub);
  };

  /**
   * Add self as a dependency to the target watcher.
   */

  Dep.prototype.depend = function () {
    Dep.target.addDep(this);
  };

  /**
   * Notify all subscribers of a new value.
   */

  Dep.prototype.notify = function () {
    // stablize the subscriber list first
    var subs = toArray(this.subs);
    for (var i = 0, l = subs.length; i < l; i++) {
      subs[i].update();
    }
  };

  var arrayProto = Array.prototype;
  var arrayMethods = Object.create(arrayProto)

  /**
   * Intercept mutating methods and emit events
   */

  ;['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'].forEach(function (method) {
    // cache original method
    var original = arrayProto[method];
    def(arrayMethods, method, function mutator() {
      // avoid leaking arguments:
      // http://jsperf.com/closure-with-arguments
      var i = arguments.length;
      var args = new Array(i);
      while (i--) {
        args[i] = arguments[i];
      }
      var result = original.apply(this, args);
      var ob = this.__ob__;
      var inserted;
      switch (method) {
        case 'push':
          inserted = args;
          break;
        case 'unshift':
          inserted = args;
          break;
        case 'splice':
          inserted = args.slice(2);
          break;
      }
      if (inserted) ob.observeArray(inserted);
      // notify change
      ob.dep.notify();
      return result;
    });
  });

  /**
   * Swap the element at the given index with a new value
   * and emits corresponding event.
   *
   * @param {Number} index
   * @param {*} val
   * @return {*} - replaced element
   */

  def(arrayProto, '$set', function $set(index, val) {
    if (index >= this.length) {
      this.length = Number(index) + 1;
    }
    return this.splice(index, 1, val)[0];
  });

  /**
   * Convenience method to remove the element at given index or target element reference.
   *
   * @param {*} item
   */

  def(arrayProto, '$remove', function $remove(item) {
    /* istanbul ignore if */
    if (!this.length) return;
    var index = indexOf(this, item);
    if (index > -1) {
      return this.splice(index, 1);
    }
  });

  var arrayKeys = Object.getOwnPropertyNames(arrayMethods);

  /**
   * By default, when a reactive property is set, the new value is
   * also converted to become reactive. However in certain cases, e.g.
   * v-for scope alias and props, we don't want to force conversion
   * because the value may be a nested value under a frozen data structure.
   *
   * So whenever we want to set a reactive property without forcing
   * conversion on the new value, we wrap that call inside this function.
   */

  var shouldConvert = true;

  function withoutConversion(fn) {
    shouldConvert = false;
    fn();
    shouldConvert = true;
  }

  /**
   * Observer class that are attached to each observed
   * object. Once attached, the observer converts target
   * object's property keys into getter/setters that
   * collect dependencies and dispatches updates.
   *
   * @param {Array|Object} value
   * @constructor
   */

  function Observer(value) {
    this.value = value;
    this.dep = new Dep();
    def(value, '__ob__', this);
    if (isArray(value)) {
      var augment = hasProto ? protoAugment : copyAugment;
      augment(value, arrayMethods, arrayKeys);
      this.observeArray(value);
    } else {
      this.walk(value);
    }
  }

  // Instance methods

  /**
   * Walk through each property and convert them into
   * getter/setters. This method should only be called when
   * value type is Object.
   *
   * @param {Object} obj
   */

  Observer.prototype.walk = function (obj) {
    var keys = Object.keys(obj);
    for (var i = 0, l = keys.length; i < l; i++) {
      this.convert(keys[i], obj[keys[i]]);
    }
  };

  /**
   * Observe a list of Array items.
   *
   * @param {Array} items
   */

  Observer.prototype.observeArray = function (items) {
    for (var i = 0, l = items.length; i < l; i++) {
      observe(items[i]);
    }
  };

  /**
   * Convert a property into getter/setter so we can emit
   * the events when the property is accessed/changed.
   *
   * @param {String} key
   * @param {*} val
   */

  Observer.prototype.convert = function (key, val) {
    defineReactive(this.value, key, val);
  };

  /**
   * Add an owner vm, so that when $set/$delete mutations
   * happen we can notify owner vms to proxy the keys and
   * digest the watchers. This is only called when the object
   * is observed as an instance's root $data.
   *
   * @param {Vue} vm
   */

  Observer.prototype.addVm = function (vm) {
    (this.vms || (this.vms = [])).push(vm);
  };

  /**
   * Remove an owner vm. This is called when the object is
   * swapped out as an instance's $data object.
   *
   * @param {Vue} vm
   */

  Observer.prototype.removeVm = function (vm) {
    this.vms.$remove(vm);
  };

  // helpers

  /**
   * Augment an target Object or Array by intercepting
   * the prototype chain using __proto__
   *
   * @param {Object|Array} target
   * @param {Object} src
   */

  function protoAugment(target, src) {
    /* eslint-disable no-proto */
    target.__proto__ = src;
    /* eslint-enable no-proto */
  }

  /**
   * Augment an target Object or Array by defining
   * hidden properties.
   *
   * @param {Object|Array} target
   * @param {Object} proto
   */

  function copyAugment(target, src, keys) {
    for (var i = 0, l = keys.length; i < l; i++) {
      var key = keys[i];
      def(target, key, src[key]);
    }
  }

  /**
   * Attempt to create an observer instance for a value,
   * returns the new observer if successfully observed,
   * or the existing observer if the value already has one.
   *
   * @param {*} value
   * @param {Vue} [vm]
   * @return {Observer|undefined}
   * @static
   */

  function observe(value, vm) {
    if (!value || typeof value !== 'object') {
      return;
    }
    var ob;
    if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {
      ob = value.__ob__;
    } else if (shouldConvert && (isArray(value) || isPlainObject(value)) && Object.isExtensible(value) && !value._isVue) {
      ob = new Observer(value);
    }
    if (ob && vm) {
      ob.addVm(vm);
    }
    return ob;
  }

  /**
   * Define a reactive property on an Object.
   *
   * @param {Object} obj
   * @param {String} key
   * @param {*} val
   */

  function defineReactive(obj, key, val) {
    var dep = new Dep();

    var property = Object.getOwnPropertyDescriptor(obj, key);
    if (property && property.configurable === false) {
      return;
    }

    // cater for pre-defined getter/setters
    var getter = property && property.get;
    var setter = property && property.set;

    var childOb = observe(val);
    Object.defineProperty(obj, key, {
      enumerable: true,
      configurable: true,
      get: function reactiveGetter() {
        var value = getter ? getter.call(obj) : val;
        if (Dep.target) {
          dep.depend();
          if (childOb) {
            childOb.dep.depend();
          }
          if (isArray(value)) {
            for (var e, i = 0, l = value.length; i < l; i++) {
              e = value[i];
              e && e.__ob__ && e.__ob__.dep.depend();
            }
          }
        }
        return value;
      },
      set: function reactiveSetter(newVal) {
        var value = getter ? getter.call(obj) : val;
        if (newVal === value) {
          return;
        }
        if (setter) {
          setter.call(obj, newVal);
        } else {
          val = newVal;
        }
        childOb = observe(newVal);
        dep.notify();
      }
    });
  }



  var util = Object.freeze({
  	defineReactive: defineReactive,
  	set: set,
  	del: del,
  	hasOwn: hasOwn,
  	isLiteral: isLiteral,
  	isReserved: isReserved,
  	_toString: _toString,
  	toNumber: toNumber,
  	toBoolean: toBoolean,
  	stripQuotes: stripQuotes,
  	camelize: camelize,
  	hyphenate: hyphenate,
  	classify: classify,
  	bind: bind,
  	toArray: toArray,
  	extend: extend,
  	isObject: isObject,
  	isPlainObject: isPlainObject,
  	def: def,
  	debounce: _debounce,
  	indexOf: indexOf,
  	cancellable: cancellable,
  	looseEqual: looseEqual,
  	isArray: isArray,
  	hasProto: hasProto,
  	inBrowser: inBrowser,
  	devtools: devtools,
  	isIE: isIE,
  	isIE9: isIE9,
  	isAndroid: isAndroid,
  	isIos: isIos,
  	iosVersionMatch: iosVersionMatch,
  	iosVersion: iosVersion,
  	hasMutationObserverBug: hasMutationObserverBug,
  	get transitionProp () { return transitionProp; },
  	get transitionEndEvent () { return transitionEndEvent; },
  	get animationProp () { return animationProp; },
  	get animationEndEvent () { return animationEndEvent; },
  	nextTick: nextTick,
  	get _Set () { return _Set; },
  	query: query,
  	inDoc: inDoc,
  	getAttr: getAttr,
  	getBindAttr: getBindAttr,
  	hasBindAttr: hasBindAttr,
  	before: before,
  	after: after,
  	remove: remove,
  	prepend: prepend,
  	replace: replace,
  	on: on,
  	off: off,
  	setClass: setClass,
  	addClass: addClass,
  	removeClass: removeClass,
  	extractContent: extractContent,
  	trimNode: trimNode,
  	isTemplate: isTemplate,
  	createAnchor: createAnchor,
  	findRef: findRef,
  	mapNodeRange: mapNodeRange,
  	removeNodeRange: removeNodeRange,
  	isFragment: isFragment,
  	getOuterHTML: getOuterHTML,
  	mergeOptions: mergeOptions,
  	resolveAsset: resolveAsset,
  	checkComponentAttr: checkComponentAttr,
  	commonTagRE: commonTagRE,
  	reservedTagRE: reservedTagRE,
  	get warn () { return warn; }
  });

  var uid = 0;

  function initMixin (Vue) {
    /**
     * The main init sequence. This is called for every
     * instance, including ones that are created from extended
     * constructors.
     *
     * @param {Object} options - this options object should be
     *                           the result of merging class
     *                           options and the options passed
     *                           in to the constructor.
     */

    Vue.prototype._init = function (options) {
      options = options || {};

      this.$el = null;
      this.$parent = options.parent;
      this.$root = this.$parent ? this.$parent.$root : this;
      this.$children = [];
      this.$refs = {}; // child vm references
      this.$els = {}; // element references
      this._watchers = []; // all watchers as an array
      this._directives = []; // all directives

      // a uid
      this._uid = uid++;

      // a flag to avoid this being observed
      this._isVue = true;

      // events bookkeeping
      this._events = {}; // registered callbacks
      this._eventsCount = {}; // for $broadcast optimization

      // fragment instance properties
      this._isFragment = false;
      this._fragment = // @type {DocumentFragment}
      this._fragmentStart = // @type {Text|Comment}
      this._fragmentEnd = null; // @type {Text|Comment}

      // lifecycle state
      this._isCompiled = this._isDestroyed = this._isReady = this._isAttached = this._isBeingDestroyed = this._vForRemoving = false;
      this._unlinkFn = null;

      // context:
      // if this is a transcluded component, context
      // will be the common parent vm of this instance
      // and its host.
      this._context = options._context || this.$parent;

      // scope:
      // if this is inside an inline v-for, the scope
      // will be the intermediate scope created for this
      // repeat fragment. this is used for linking props
      // and container directives.
      this._scope = options._scope;

      // fragment:
      // if this instance is compiled inside a Fragment, it
      // needs to reigster itself as a child of that fragment
      // for attach/detach to work properly.
      this._frag = options._frag;
      if (this._frag) {
        this._frag.children.push(this);
      }

      // push self into parent / transclusion host
      if (this.$parent) {
        this.$parent.$children.push(this);
      }

      // merge options.
      options = this.$options = mergeOptions(this.constructor.options, options, this);

      // set ref
      this._updateRef();

      // initialize data as empty object.
      // it will be filled up in _initData().
      this._data = {};

      // call init hook
      this._callHook('init');

      // initialize data observation and scope inheritance.
      this._initState();

      // setup event system and option events.
      this._initEvents();

      // call created hook
      this._callHook('created');

      // if `el` option is passed, start compilation.
      if (options.el) {
        this.$mount(options.el);
      }
    };
  }

  var pathCache = new Cache(1000);

  // actions
  var APPEND = 0;
  var PUSH = 1;
  var INC_SUB_PATH_DEPTH = 2;
  var PUSH_SUB_PATH = 3;

  // states
  var BEFORE_PATH = 0;
  var IN_PATH = 1;
  var BEFORE_IDENT = 2;
  var IN_IDENT = 3;
  var IN_SUB_PATH = 4;
  var IN_SINGLE_QUOTE = 5;
  var IN_DOUBLE_QUOTE = 6;
  var AFTER_PATH = 7;
  var ERROR = 8;

  var pathStateMachine = [];

  pathStateMachine[BEFORE_PATH] = {
    'ws': [BEFORE_PATH],
    'ident': [IN_IDENT, APPEND],
    '[': [IN_SUB_PATH],
    'eof': [AFTER_PATH]
  };

  pathStateMachine[IN_PATH] = {
    'ws': [IN_PATH],
    '.': [BEFORE_IDENT],
    '[': [IN_SUB_PATH],
    'eof': [AFTER_PATH]
  };

  pathStateMachine[BEFORE_IDENT] = {
    'ws': [BEFORE_IDENT],
    'ident': [IN_IDENT, APPEND]
  };

  pathStateMachine[IN_IDENT] = {
    'ident': [IN_IDENT, APPEND],
    '0': [IN_IDENT, APPEND],
    'number': [IN_IDENT, APPEND],
    'ws': [IN_PATH, PUSH],
    '.': [BEFORE_IDENT, PUSH],
    '[': [IN_SUB_PATH, PUSH],
    'eof': [AFTER_PATH, PUSH]
  };

  pathStateMachine[IN_SUB_PATH] = {
    "'": [IN_SINGLE_QUOTE, APPEND],
    '"': [IN_DOUBLE_QUOTE, APPEND],
    '[': [IN_SUB_PATH, INC_SUB_PATH_DEPTH],
    ']': [IN_PATH, PUSH_SUB_PATH],
    'eof': ERROR,
    'else': [IN_SUB_PATH, APPEND]
  };

  pathStateMachine[IN_SINGLE_QUOTE] = {
    "'": [IN_SUB_PATH, APPEND],
    'eof': ERROR,
    'else': [IN_SINGLE_QUOTE, APPEND]
  };

  pathStateMachine[IN_DOUBLE_QUOTE] = {
    '"': [IN_SUB_PATH, APPEND],
    'eof': ERROR,
    'else': [IN_DOUBLE_QUOTE, APPEND]
  };

  /**
   * Determine the type of a character in a keypath.
   *
   * @param {Char} ch
   * @return {String} type
   */

  function getPathCharType(ch) {
    if (ch === undefined) {
      return 'eof';
    }

    var code = ch.charCodeAt(0);

    switch (code) {
      case 0x5B: // [
      case 0x5D: // ]
      case 0x2E: // .
      case 0x22: // "
      case 0x27: // '
      case 0x30:
        // 0
        return ch;

      case 0x5F: // _
      case 0x24:
        // $
        return 'ident';

      case 0x20: // Space
      case 0x09: // Tab
      case 0x0A: // Newline
      case 0x0D: // Return
      case 0xA0: // No-break space
      case 0xFEFF: // Byte Order Mark
      case 0x2028: // Line Separator
      case 0x2029:
        // Paragraph Separator
        return 'ws';
    }

    // a-z, A-Z
    if (code >= 0x61 && code <= 0x7A || code >= 0x41 && code <= 0x5A) {
      return 'ident';
    }

    // 1-9
    if (code >= 0x31 && code <= 0x39) {
      return 'number';
    }

    return 'else';
  }

  /**
   * Format a subPath, return its plain form if it is
   * a literal string or number. Otherwise prepend the
   * dynamic indicator (*).
   *
   * @param {String} path
   * @return {String}
   */

  function formatSubPath(path) {
    var trimmed = path.trim();
    // invalid leading 0
    if (path.charAt(0) === '0' && isNaN(path)) {
      return false;
    }
    return isLiteral(trimmed) ? stripQuotes(trimmed) : '*' + trimmed;
  }

  /**
   * Parse a string path into an array of segments
   *
   * @param {String} path
   * @return {Array|undefined}
   */

  function parse(path) {
    var keys = [];
    var index = -1;
    var mode = BEFORE_PATH;
    var subPathDepth = 0;
    var c, newChar, key, type, transition, action, typeMap;

    var actions = [];

    actions[PUSH] = function () {
      if (key !== undefined) {
        keys.push(key);
        key = undefined;
      }
    };

    actions[APPEND] = function () {
      if (key === undefined) {
        key = newChar;
      } else {
        key += newChar;
      }
    };

    actions[INC_SUB_PATH_DEPTH] = function () {
      actions[APPEND]();
      subPathDepth++;
    };

    actions[PUSH_SUB_PATH] = function () {
      if (subPathDepth > 0) {
        subPathDepth--;
        mode = IN_SUB_PATH;
        actions[APPEND]();
      } else {
        subPathDepth = 0;
        key = formatSubPath(key);
        if (key === false) {
          return false;
        } else {
          actions[PUSH]();
        }
      }
    };

    function maybeUnescapeQuote() {
      var nextChar = path[index + 1];
      if (mode === IN_SINGLE_QUOTE && nextChar === "'" || mode === IN_DOUBLE_QUOTE && nextChar === '"') {
        index++;
        newChar = '\\' + nextChar;
        actions[APPEND]();
        return true;
      }
    }

    while (mode != null) {
      index++;
      c = path[index];

      if (c === '\\' && maybeUnescapeQuote()) {
        continue;
      }

      type = getPathCharType(c);
      typeMap = pathStateMachine[mode];
      transition = typeMap[type] || typeMap['else'] || ERROR;

      if (transition === ERROR) {
        return; // parse error
      }

      mode = transition[0];
      action = actions[transition[1]];
      if (action) {
        newChar = transition[2];
        newChar = newChar === undefined ? c : newChar;
        if (action() === false) {
          return;
        }
      }

      if (mode === AFTER_PATH) {
        keys.raw = path;
        return keys;
      }
    }
  }

  /**
   * External parse that check for a cache hit first
   *
   * @param {String} path
   * @return {Array|undefined}
   */

  function parsePath(path) {
    var hit = pathCache.get(path);
    if (!hit) {
      hit = parse(path);
      if (hit) {
        pathCache.put(path, hit);
      }
    }
    return hit;
  }

  /**
   * Get from an object from a path string
   *
   * @param {Object} obj
   * @param {String} path
   */

  function getPath(obj, path) {
    return parseExpression(path).get(obj);
  }

  /**
   * Warn against setting non-existent root path on a vm.
   */

  var warnNonExistent;
  if ('development' !== 'production') {
    warnNonExistent = function (path, vm) {
      warn('You are setting a non-existent path "' + path.raw + '" ' + 'on a vm instance. Consider pre-initializing the property ' + 'with the "data" option for more reliable reactivity ' + 'and better performance.', vm);
    };
  }

  /**
   * Set on an object from a path
   *
   * @param {Object} obj
   * @param {String | Array} path
   * @param {*} val
   */

  function setPath(obj, path, val) {
    var original = obj;
    if (typeof path === 'string') {
      path = parse(path);
    }
    if (!path || !isObject(obj)) {
      return false;
    }
    var last, key;
    for (var i = 0, l = path.length; i < l; i++) {
      last = obj;
      key = path[i];
      if (key.charAt(0) === '*') {
        key = parseExpression(key.slice(1)).get.call(original, original);
      }
      if (i < l - 1) {
        obj = obj[key];
        if (!isObject(obj)) {
          obj = {};
          if ('development' !== 'production' && last._isVue) {
            warnNonExistent(path, last);
          }
          set(last, key, obj);
        }
      } else {
        if (isArray(obj)) {
          obj.$set(key, val);
        } else if (key in obj) {
          obj[key] = val;
        } else {
          if ('development' !== 'production' && obj._isVue) {
            warnNonExistent(path, obj);
          }
          set(obj, key, val);
        }
      }
    }
    return true;
  }

var path = Object.freeze({
    parsePath: parsePath,
    getPath: getPath,
    setPath: setPath
  });

  var expressionCache = new Cache(1000);

  var allowedKeywords = 'Math,Date,this,true,false,null,undefined,Infinity,NaN,' + 'isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,' + 'encodeURIComponent,parseInt,parseFloat';
  var allowedKeywordsRE = new RegExp('^(' + allowedKeywords.replace(/,/g, '\\b|') + '\\b)');

  // keywords that don't make sense inside expressions
  var improperKeywords = 'break,case,class,catch,const,continue,debugger,default,' + 'delete,do,else,export,extends,finally,for,function,if,' + 'import,in,instanceof,let,return,super,switch,throw,try,' + 'var,while,with,yield,enum,await,implements,package,' + 'protected,static,interface,private,public';
  var improperKeywordsRE = new RegExp('^(' + improperKeywords.replace(/,/g, '\\b|') + '\\b)');

  var wsRE = /\s/g;
  var newlineRE = /\n/g;
  var saveRE = /[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g;
  var restoreRE = /"(\d+)"/g;
  var pathTestRE = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/;
  var identRE = /[^\w$\.](?:[A-Za-z_$][\w$]*)/g;
  var literalValueRE$1 = /^(?:true|false|null|undefined|Infinity|NaN)$/;

  function noop() {}

  /**
   * Save / Rewrite / Restore
   *
   * When rewriting paths found in an expression, it is
   * possible for the same letter sequences to be found in
   * strings and Object literal property keys. Therefore we
   * remove and store these parts in a temporary array, and
   * restore them after the path rewrite.
   */

  var saved = [];

  /**
   * Save replacer
   *
   * The save regex can match two possible cases:
   * 1. An opening object literal
   * 2. A string
   * If matched as a plain string, we need to escape its
   * newlines, since the string needs to be preserved when
   * generating the function body.
   *
   * @param {String} str
   * @param {String} isString - str if matched as a string
   * @return {String} - placeholder with index
   */

  function save(str, isString) {
    var i = saved.length;
    saved[i] = isString ? str.replace(newlineRE, '\\n') : str;
    return '"' + i + '"';
  }

  /**
   * Path rewrite replacer
   *
   * @param {String} raw
   * @return {String}
   */

  function rewrite(raw) {
    var c = raw.charAt(0);
    var path = raw.slice(1);
    if (allowedKeywordsRE.test(path)) {
      return raw;
    } else {
      path = path.indexOf('"') > -1 ? path.replace(restoreRE, restore) : path;
      return c + 'scope.' + path;
    }
  }

  /**
   * Restore replacer
   *
   * @param {String} str
   * @param {String} i - matched save index
   * @return {String}
   */

  function restore(str, i) {
    return saved[i];
  }

  /**
   * Rewrite an expression, prefixing all path accessors with
   * `scope.` and generate getter/setter functions.
   *
   * @param {String} exp
   * @return {Function}
   */

  function compileGetter(exp) {
    if (improperKeywordsRE.test(exp)) {
      'development' !== 'production' && warn('Avoid using reserved keywords in expression: ' + exp);
    }
    // reset state
    saved.length = 0;
    // save strings and object literal keys
    var body = exp.replace(saveRE, save).replace(wsRE, '');
    // rewrite all paths
    // pad 1 space here because the regex matches 1 extra char
    body = (' ' + body).replace(identRE, rewrite).replace(restoreRE, restore);
    return makeGetterFn(body);
  }

  /**
   * Build a getter function. Requires eval.
   *
   * We isolate the try/catch so it doesn't affect the
   * optimization of the parse function when it is not called.
   *
   * @param {String} body
   * @return {Function|undefined}
   */

  function makeGetterFn(body) {
    try {
      /* eslint-disable no-new-func */
      return new Function('scope', 'return ' + body + ';');
      /* eslint-enable no-new-func */
    } catch (e) {
      if ('development' !== 'production') {
        /* istanbul ignore if */
        if (e.toString().match(/unsafe-eval|CSP/)) {
          warn('It seems you are using the default build of Vue.js in an environment ' + 'with Content Security Policy that prohibits unsafe-eval. ' + 'Use the CSP-compliant build instead: ' + 'http://vuejs.org/guide/installation.html#CSP-compliant-build');
        } else {
          warn('Invalid expression. ' + 'Generated function body: ' + body);
        }
      }
      return noop;
    }
  }

  /**
   * Compile a setter function for the expression.
   *
   * @param {String} exp
   * @return {Function|undefined}
   */

  function compileSetter(exp) {
    var path = parsePath(exp);
    if (path) {
      return function (scope, val) {
        setPath(scope, path, val);
      };
    } else {
      'development' !== 'production' && warn('Invalid setter expression: ' + exp);
    }
  }

  /**
   * Parse an expression into re-written getter/setters.
   *
   * @param {String} exp
   * @param {Boolean} needSet
   * @return {Function}
   */

  function parseExpression(exp, needSet) {
    exp = exp.trim();
    // try cache
    var hit = expressionCache.get(exp);
    if (hit) {
      if (needSet && !hit.set) {
        hit.set = compileSetter(hit.exp);
      }
      return hit;
    }
    var res = { exp: exp };
    res.get = isSimplePath(exp) && exp.indexOf('[') < 0
    // optimized super simple getter
    ? makeGetterFn('scope.' + exp)
    // dynamic getter
    : compileGetter(exp);
    if (needSet) {
      res.set = compileSetter(exp);
    }
    expressionCache.put(exp, res);
    return res;
  }

  /**
   * Check if an expression is a simple path.
   *
   * @param {String} exp
   * @return {Boolean}
   */

  function isSimplePath(exp) {
    return pathTestRE.test(exp) &&
    // don't treat literal values as paths
    !literalValueRE$1.test(exp) &&
    // Math constants e.g. Math.PI, Math.E etc.
    exp.slice(0, 5) !== 'Math.';
  }

var expression = Object.freeze({
    parseExpression: parseExpression,
    isSimplePath: isSimplePath
  });

  // we have two separate queues: one for directive updates
  // and one for user watcher registered via $watch().
  // we want to guarantee directive updates to be called
  // before user watchers so that when user watchers are
  // triggered, the DOM would have already been in updated
  // state.

  var queue = [];
  var userQueue = [];
  var has = {};
  var circular = {};
  var waiting = false;

  /**
   * Reset the batcher's state.
   */

  function resetBatcherState() {
    queue.length = 0;
    userQueue.length = 0;
    has = {};
    circular = {};
    waiting = false;
  }

  /**
   * Flush both queues and run the watchers.
   */

  function flushBatcherQueue() {
    var _again = true;

    _function: while (_again) {
      _again = false;

      runBatcherQueue(queue);
      runBatcherQueue(userQueue);
      // user watchers triggered more watchers,
      // keep flushing until it depletes
      if (queue.length) {
        _again = true;
        continue _function;
      }
      // dev tool hook
      /* istanbul ignore if */
      if (devtools && config.devtools) {
        devtools.emit('flush');
      }
      resetBatcherState();
    }
  }

  /**
   * Run the watchers in a single queue.
   *
   * @param {Array} queue
   */

  function runBatcherQueue(queue) {
    // do not cache length because more watchers might be pushed
    // as we run existing watchers
    for (var i = 0; i < queue.length; i++) {
      var watcher = queue[i];
      var id = watcher.id;
      has[id] = null;
      watcher.run();
      // in dev build, check and stop circular updates.
      if ('development' !== 'production' && has[id] != null) {
        circular[id] = (circular[id] || 0) + 1;
        if (circular[id] > config._maxUpdateCount) {
          warn('You may have an infinite update loop for watcher ' + 'with expression "' + watcher.expression + '"', watcher.vm);
          break;
        }
      }
    }
    queue.length = 0;
  }

  /**
   * Push a watcher into the watcher queue.
   * Jobs with duplicate IDs will be skipped unless it's
   * pushed when the queue is being flushed.
   *
   * @param {Watcher} watcher
   *   properties:
   *   - {Number} id
   *   - {Function} run
   */

  function pushWatcher(watcher) {
    var id = watcher.id;
    if (has[id] == null) {
      // push watcher into appropriate queue
      var q = watcher.user ? userQueue : queue;
      has[id] = q.length;
      q.push(watcher);
      // queue the flush
      if (!waiting) {
        waiting = true;
        nextTick(flushBatcherQueue);
      }
    }
  }

  var uid$2 = 0;

  /**
   * A watcher parses an expression, collects dependencies,
   * and fires callback when the expression value changes.
   * This is used for both the $watch() api and directives.
   *
   * @param {Vue} vm
   * @param {String|Function} expOrFn
   * @param {Function} cb
   * @param {Object} options
   *                 - {Array} filters
   *                 - {Boolean} twoWay
   *                 - {Boolean} deep
   *                 - {Boolean} user
   *                 - {Boolean} sync
   *                 - {Boolean} lazy
   *                 - {Function} [preProcess]
   *                 - {Function} [postProcess]
   * @constructor
   */
  function Watcher(vm, expOrFn, cb, options) {
    // mix in options
    if (options) {
      extend(this, options);
    }
    var isFn = typeof expOrFn === 'function';
    this.vm = vm;
    vm._watchers.push(this);
    this.expression = expOrFn;
    this.cb = cb;
    this.id = ++uid$2; // uid for batching
    this.active = true;
    this.dirty = this.lazy; // for lazy watchers
    this.deps = [];
    this.newDeps = [];
    this.depIds = new _Set();
    this.newDepIds = new _Set();
    this.prevError = null; // for async error stacks
    // parse expression for getter/setter
    if (isFn) {
      this.getter = expOrFn;
      this.setter = undefined;
    } else {
      var res = parseExpression(expOrFn, this.twoWay);
      this.getter = res.get;
      this.setter = res.set;
    }
    this.value = this.lazy ? undefined : this.get();
    // state for avoiding false triggers for deep and Array
    // watchers during vm._digest()
    this.queued = this.shallow = false;
  }

  /**
   * Evaluate the getter, and re-collect dependencies.
   */

  Watcher.prototype.get = function () {
    this.beforeGet();
    var scope = this.scope || this.vm;
    var value;
    try {
      value = this.getter.call(scope, scope);
    } catch (e) {
      if ('development' !== 'production' && config.warnExpressionErrors) {
        warn('Error when evaluating expression ' + '"' + this.expression + '": ' + e.toString(), this.vm);
      }
    }
    // "touch" every property so they are all tracked as
    // dependencies for deep watching
    if (this.deep) {
      traverse(value);
    }
    if (this.preProcess) {
      value = this.preProcess(value);
    }
    if (this.filters) {
      value = scope._applyFilters(value, null, this.filters, false);
    }
    if (this.postProcess) {
      value = this.postProcess(value);
    }
    this.afterGet();
    return value;
  };

  /**
   * Set the corresponding value with the setter.
   *
   * @param {*} value
   */

  Watcher.prototype.set = function (value) {
    var scope = this.scope || this.vm;
    if (this.filters) {
      value = scope._applyFilters(value, this.value, this.filters, true);
    }
    try {
      this.setter.call(scope, scope, value);
    } catch (e) {
      if ('development' !== 'production' && config.warnExpressionErrors) {
        warn('Error when evaluating setter ' + '"' + this.expression + '": ' + e.toString(), this.vm);
      }
    }
    // two-way sync for v-for alias
    var forContext = scope.$forContext;
    if (forContext && forContext.alias === this.expression) {
      if (forContext.filters) {
        'development' !== 'production' && warn('It seems you are using two-way binding on ' + 'a v-for alias (' + this.expression + '), and the ' + 'v-for has filters. This will not work properly. ' + 'Either remove the filters or use an array of ' + 'objects and bind to object properties instead.', this.vm);
        return;
      }
      forContext._withLock(function () {
        if (scope.$key) {
          // original is an object
          forContext.rawValue[scope.$key] = value;
        } else {
          forContext.rawValue.$set(scope.$index, value);
        }
      });
    }
  };

  /**
   * Prepare for dependency collection.
   */

  Watcher.prototype.beforeGet = function () {
    Dep.target = this;
  };

  /**
   * Add a dependency to this directive.
   *
   * @param {Dep} dep
   */

  Watcher.prototype.addDep = function (dep) {
    var id = dep.id;
    if (!this.newDepIds.has(id)) {
      this.newDepIds.add(id);
      this.newDeps.push(dep);
      if (!this.depIds.has(id)) {
        dep.addSub(this);
      }
    }
  };

  /**
   * Clean up for dependency collection.
   */

  Watcher.prototype.afterGet = function () {
    Dep.target = null;
    var i = this.deps.length;
    while (i--) {
      var dep = this.deps[i];
      if (!this.newDepIds.has(dep.id)) {
        dep.removeSub(this);
      }
    }
    var tmp = this.depIds;
    this.depIds = this.newDepIds;
    this.newDepIds = tmp;
    this.newDepIds.clear();
    tmp = this.deps;
    this.deps = this.newDeps;
    this.newDeps = tmp;
    this.newDeps.length = 0;
  };

  /**
   * Subscriber interface.
   * Will be called when a dependency changes.
   *
   * @param {Boolean} shallow
   */

  Watcher.prototype.update = function (shallow) {
    if (this.lazy) {
      this.dirty = true;
    } else if (this.sync || !config.async) {
      this.run();
    } else {
      // if queued, only overwrite shallow with non-shallow,
      // but not the other way around.
      this.shallow = this.queued ? shallow ? this.shallow : false : !!shallow;
      this.queued = true;
      // record before-push error stack in debug mode
      /* istanbul ignore if */
      if ('development' !== 'production' && config.debug) {
        this.prevError = new Error('[vue] async stack trace');
      }
      pushWatcher(this);
    }
  };

  /**
   * Batcher job interface.
   * Will be called by the batcher.
   */

  Watcher.prototype.run = function () {
    if (this.active) {
      var value = this.get();
      if (value !== this.value ||
      // Deep watchers and watchers on Object/Arrays should fire even
      // when the value is the same, because the value may
      // have mutated; but only do so if this is a
      // non-shallow update (caused by a vm digest).
      (isObject(value) || this.deep) && !this.shallow) {
        // set new value
        var oldValue = this.value;
        this.value = value;
        // in debug + async mode, when a watcher callbacks
        // throws, we also throw the saved before-push error
        // so the full cross-tick stack trace is available.
        var prevError = this.prevError;
        /* istanbul ignore if */
        if ('development' !== 'production' && config.debug && prevError) {
          this.prevError = null;
          try {
            this.cb.call(this.vm, value, oldValue);
          } catch (e) {
            nextTick(function () {
              throw prevError;
            }, 0);
            throw e;
          }
        } else {
          this.cb.call(this.vm, value, oldValue);
        }
      }
      this.queued = this.shallow = false;
    }
  };

  /**
   * Evaluate the value of the watcher.
   * This only gets called for lazy watchers.
   */

  Watcher.prototype.evaluate = function () {
    // avoid overwriting another watcher that is being
    // collected.
    var current = Dep.target;
    this.value = this.get();
    this.dirty = false;
    Dep.target = current;
  };

  /**
   * Depend on all deps collected by this watcher.
   */

  Watcher.prototype.depend = function () {
    var i = this.deps.length;
    while (i--) {
      this.deps[i].depend();
    }
  };

  /**
   * Remove self from all dependencies' subcriber list.
   */

  Watcher.prototype.teardown = function () {
    if (this.active) {
      // remove self from vm's watcher list
      // this is a somewhat expensive operation so we skip it
      // if the vm is being destroyed or is performing a v-for
      // re-render (the watcher list is then filtered by v-for).
      if (!this.vm._isBeingDestroyed && !this.vm._vForRemoving) {
        this.vm._watchers.$remove(this);
      }
      var i = this.deps.length;
      while (i--) {
        this.deps[i].removeSub(this);
      }
      this.active = false;
      this.vm = this.cb = this.value = null;
    }
  };

  /**
   * Recrusively traverse an object to evoke all converted
   * getters, so that every nested property inside the object
   * is collected as a "deep" dependency.
   *
   * @param {*} val
   */

  var seenObjects = new _Set();
  function traverse(val, seen) {
    var i = undefined,
        keys = undefined;
    if (!seen) {
      seen = seenObjects;
      seen.clear();
    }
    var isA = isArray(val);
    var isO = isObject(val);
    if ((isA || isO) && Object.isExtensible(val)) {
      if (val.__ob__) {
        var depId = val.__ob__.dep.id;
        if (seen.has(depId)) {
          return;
        } else {
          seen.add(depId);
        }
      }
      if (isA) {
        i = val.length;
        while (i--) traverse(val[i], seen);
      } else if (isO) {
        keys = Object.keys(val);
        i = keys.length;
        while (i--) traverse(val[keys[i]], seen);
      }
    }
  }

  var text$1 = {

    bind: function bind() {
      this.attr = this.el.nodeType === 3 ? 'data' : 'textContent';
    },

    update: function update(value) {
      this.el[this.attr] = _toString(value);
    }
  };

  var templateCache = new Cache(1000);
  var idSelectorCache = new Cache(1000);

  var map = {
    efault: [0, '', ''],
    legend: [1, '<fieldset>', '</fieldset>'],
    tr: [2, '<table><tbody>', '</tbody></table>'],
    col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>']
  };

  map.td = map.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];

  map.option = map.optgroup = [1, '<select multiple="multiple">', '</select>'];

  map.thead = map.tbody = map.colgroup = map.caption = map.tfoot = [1, '<table>', '</table>'];

  map.g = map.defs = map.symbol = map.use = map.image = map.text = map.circle = map.ellipse = map.line = map.path = map.polygon = map.polyline = map.rect = [1, '<svg ' + 'xmlns="http://www.w3.org/2000/svg" ' + 'xmlns:xlink="http://www.w3.org/1999/xlink" ' + 'xmlns:ev="http://www.w3.org/2001/xml-events"' + 'version="1.1">', '</svg>'];

  /**
   * Check if a node is a supported template node with a
   * DocumentFragment content.
   *
   * @param {Node} node
   * @return {Boolean}
   */

  function isRealTemplate(node) {
    return isTemplate(node) && isFragment(node.content);
  }

  var tagRE$1 = /<([\w:-]+)/;
  var entityRE = /&#?\w+?;/;
  var commentRE = /<!--/;

  /**
   * Convert a string template to a DocumentFragment.
   * Determines correct wrapping by tag types. Wrapping
   * strategy found in jQuery & component/domify.
   *
   * @param {String} templateString
   * @param {Boolean} raw
   * @return {DocumentFragment}
   */

  function stringToFragment(templateString, raw) {
    // try a cache hit first
    var cacheKey = raw ? templateString : templateString.trim();
    var hit = templateCache.get(cacheKey);
    if (hit) {
      return hit;
    }

    var frag = document.createDocumentFragment();
    var tagMatch = templateString.match(tagRE$1);
    var entityMatch = entityRE.test(templateString);
    var commentMatch = commentRE.test(templateString);

    if (!tagMatch && !entityMatch && !commentMatch) {
      // text only, return a single text node.
      frag.appendChild(document.createTextNode(templateString));
    } else {
      var tag = tagMatch && tagMatch[1];
      var wrap = map[tag] || map.efault;
      var depth = wrap[0];
      var prefix = wrap[1];
      var suffix = wrap[2];
      var node = document.createElement('div');

      node.innerHTML = prefix + templateString + suffix;
      while (depth--) {
        node = node.lastChild;
      }

      var child;
      /* eslint-disable no-cond-assign */
      while (child = node.firstChild) {
        /* eslint-enable no-cond-assign */
        frag.appendChild(child);
      }
    }
    if (!raw) {
      trimNode(frag);
    }
    templateCache.put(cacheKey, frag);
    return frag;
  }

  /**
   * Convert a template node to a DocumentFragment.
   *
   * @param {Node} node
   * @return {DocumentFragment}
   */

  function nodeToFragment(node) {
    // if its a template tag and the browser supports it,
    // its content is already a document fragment. However, iOS Safari has
    // bug when using directly cloned template content with touch
    // events and can cause crashes when the nodes are removed from DOM, so we
    // have to treat template elements as string templates. (#2805)
    /* istanbul ignore if */
    if (isRealTemplate(node)) {
      return stringToFragment(node.innerHTML);
    }
    // script template
    if (node.tagName === 'SCRIPT') {
      return stringToFragment(node.textContent);
    }
    // normal node, clone it to avoid mutating the original
    var clonedNode = cloneNode(node);
    var frag = document.createDocumentFragment();
    var child;
    /* eslint-disable no-cond-assign */
    while (child = clonedNode.firstChild) {
      /* eslint-enable no-cond-assign */
      frag.appendChild(child);
    }
    trimNode(frag);
    return frag;
  }

  // Test for the presence of the Safari template cloning bug
  // https://bugs.webkit.org/showug.cgi?id=137755
  var hasBrokenTemplate = (function () {
    /* istanbul ignore else */
    if (inBrowser) {
      var a = document.createElement('div');
      a.innerHTML = '<template>1</template>';
      return !a.cloneNode(true).firstChild.innerHTML;
    } else {
      return false;
    }
  })();

  // Test for IE10/11 textarea placeholder clone bug
  var hasTextareaCloneBug = (function () {
    /* istanbul ignore else */
    if (inBrowser) {
      var t = document.createElement('textarea');
      t.placeholder = 't';
      return t.cloneNode(true).value === 't';
    } else {
      return false;
    }
  })();

  /**
   * 1. Deal with Safari cloning nested <template> bug by
   *    manually cloning all template instances.
   * 2. Deal with IE10/11 textarea placeholder bug by setting
   *    the correct value after cloning.
   *
   * @param {Element|DocumentFragment} node
   * @return {Element|DocumentFragment}
   */

  function cloneNode(node) {
    /* istanbul ignore if */
    if (!node.querySelectorAll) {
      return node.cloneNode();
    }
    var res = node.cloneNode(true);
    var i, original, cloned;
    /* istanbul ignore if */
    if (hasBrokenTemplate) {
      var tempClone = res;
      if (isRealTemplate(node)) {
        node = node.content;
        tempClone = res.content;
      }
      original = node.querySelectorAll('template');
      if (original.length) {
        cloned = tempClone.querySelectorAll('template');
        i = cloned.length;
        while (i--) {
          cloned[i].parentNode.replaceChild(cloneNode(original[i]), cloned[i]);
        }
      }
    }
    /* istanbul ignore if */
    if (hasTextareaCloneBug) {
      if (node.tagName === 'TEXTAREA') {
        res.value = node.value;
      } else {
        original = node.querySelectorAll('textarea');
        if (original.length) {
          cloned = res.querySelectorAll('textarea');
          i = cloned.length;
          while (i--) {
            cloned[i].value = original[i].value;
          }
        }
      }
    }
    return res;
  }

  /**
   * Process the template option and normalizes it into a
   * a DocumentFragment that can be used as a partial or a
   * instance template.
   *
   * @param {*} template
   *        Possible values include:
   *        - DocumentFragment object
   *        - Node object of type Template
   *        - id selector: '#some-template-id'
   *        - template string: '<div><span>{{msg}}</span></div>'
   * @param {Boolean} shouldClone
   * @param {Boolean} raw
   *        inline HTML interpolation. Do not check for id
   *        selector and keep whitespace in the string.
   * @return {DocumentFragment|undefined}
   */

  function parseTemplate(template, shouldClone, raw) {
    var node, frag;

    // if the template is already a document fragment,
    // do nothing
    if (isFragment(template)) {
      trimNode(template);
      return shouldClone ? cloneNode(template) : template;
    }

    if (typeof template === 'string') {
      // id selector
      if (!raw && template.charAt(0) === '#') {
        // id selector can be cached too
        frag = idSelectorCache.get(template);
        if (!frag) {
          node = document.getElementById(template.slice(1));
          if (node) {
            frag = nodeToFragment(node);
            // save selector to cache
            idSelectorCache.put(template, frag);
          }
        }
      } else {
        // normal string template
        frag = stringToFragment(template, raw);
      }
    } else if (template.nodeType) {
      // a direct node
      frag = nodeToFragment(template);
    }

    return frag && shouldClone ? cloneNode(frag) : frag;
  }

var template = Object.freeze({
    cloneNode: cloneNode,
    parseTemplate: parseTemplate
  });

  var html = {

    bind: function bind() {
      // a comment node means this is a binding for
      // {{{ inline unescaped html }}}
      if (this.el.nodeType === 8) {
        // hold nodes
        this.nodes = [];
        // replace the placeholder with proper anchor
        this.anchor = createAnchor('v-html');
        replace(this.el, this.anchor);
      }
    },

    update: function update(value) {
      value = _toString(value);
      if (this.nodes) {
        this.swap(value);
      } else {
        this.el.innerHTML = value;
      }
    },

    swap: function swap(value) {
      // remove old nodes
      var i = this.nodes.length;
      while (i--) {
        remove(this.nodes[i]);
      }
      // convert new value to a fragment
      // do not attempt to retrieve from id selector
      var frag = parseTemplate(value, true, true);
      // save a reference to these nodes so we can remove later
      this.nodes = toArray(frag.childNodes);
      before(frag, this.anchor);
    }
  };

  /**
   * Abstraction for a partially-compiled fragment.
   * Can optionally compile content with a child scope.
   *
   * @param {Function} linker
   * @param {Vue} vm
   * @param {DocumentFragment} frag
   * @param {Vue} [host]
   * @param {Object} [scope]
   * @param {Fragment} [parentFrag]
   */
  function Fragment(linker, vm, frag, host, scope, parentFrag) {
    this.children = [];
    this.childFrags = [];
    this.vm = vm;
    this.scope = scope;
    this.inserted = false;
    this.parentFrag = parentFrag;
    if (parentFrag) {
      parentFrag.childFrags.push(this);
    }
    this.unlink = linker(vm, frag, host, scope, this);
    var single = this.single = frag.childNodes.length === 1 &&
    // do not go single mode if the only node is an anchor
    !frag.childNodes[0].__v_anchor;
    if (single) {
      this.node = frag.childNodes[0];
      this.before = singleBefore;
      this.remove = singleRemove;
    } else {
      this.node = createAnchor('fragment-start');
      this.end = createAnchor('fragment-end');
      this.frag = frag;
      prepend(this.node, frag);
      frag.appendChild(this.end);
      this.before = multiBefore;
      this.remove = multiRemove;
    }
    this.node.__v_frag = this;
  }

  /**
   * Call attach/detach for all components contained within
   * this fragment. Also do so recursively for all child
   * fragments.
   *
   * @param {Function} hook
   */

  Fragment.prototype.callHook = function (hook) {
    var i, l;
    for (i = 0, l = this.childFrags.length; i < l; i++) {
      this.childFrags[i].callHook(hook);
    }
    for (i = 0, l = this.children.length; i < l; i++) {
      hook(this.children[i]);
    }
  };

  /**
   * Insert fragment before target, single node version
   *
   * @param {Node} target
   * @param {Boolean} withTransition
   */

  function singleBefore(target, withTransition) {
    this.inserted = true;
    var method = withTransition !== false ? beforeWithTransition : before;
    method(this.node, target, this.vm);
    if (inDoc(this.node)) {
      this.callHook(attach);
    }
  }

  /**
   * Remove fragment, single node version
   */

  function singleRemove() {
    this.inserted = false;
    var shouldCallRemove = inDoc(this.node);
    var self = this;
    this.beforeRemove();
    removeWithTransition(this.node, this.vm, function () {
      if (shouldCallRemove) {
        self.callHook(detach);
      }
      self.destroy();
    });
  }

  /**
   * Insert fragment before target, multi-nodes version
   *
   * @param {Node} target
   * @param {Boolean} withTransition
   */

  function multiBefore(target, withTransition) {
    this.inserted = true;
    var vm = this.vm;
    var method = withTransition !== false ? beforeWithTransition : before;
    mapNodeRange(this.node, this.end, function (node) {
      method(node, target, vm);
    });
    if (inDoc(this.node)) {
      this.callHook(attach);
    }
  }

  /**
   * Remove fragment, multi-nodes version
   */

  function multiRemove() {
    this.inserted = false;
    var self = this;
    var shouldCallRemove = inDoc(this.node);
    this.beforeRemove();
    removeNodeRange(this.node, this.end, this.vm, this.frag, function () {
      if (shouldCallRemove) {
        self.callHook(detach);
      }
      self.destroy();
    });
  }

  /**
   * Prepare the fragment for removal.
   */

  Fragment.prototype.beforeRemove = function () {
    var i, l;
    for (i = 0, l = this.childFrags.length; i < l; i++) {
      // call the same method recursively on child
      // fragments, depth-first
      this.childFrags[i].beforeRemove(false);
    }
    for (i = 0, l = this.children.length; i < l; i++) {
      // Call destroy for all contained instances,
      // with remove:false and defer:true.
      // Defer is necessary because we need to
      // keep the children to call detach hooks
      // on them.
      this.children[i].$destroy(false, true);
    }
    var dirs = this.unlink.dirs;
    for (i = 0, l = dirs.length; i < l; i++) {
      // disable the watchers on all the directives
      // so that the rendered content stays the same
      // during removal.
      dirs[i]._watcher && dirs[i]._watcher.teardown();
    }
  };

  /**
   * Destroy the fragment.
   */

  Fragment.prototype.destroy = function () {
    if (this.parentFrag) {
      this.parentFrag.childFrags.$remove(this);
    }
    this.node.__v_frag = null;
    this.unlink();
  };

  /**
   * Call attach hook for a Vue instance.
   *
   * @param {Vue} child
   */

  function attach(child) {
    if (!child._isAttached && inDoc(child.$el)) {
      child._callHook('attached');
    }
  }

  /**
   * Call detach hook for a Vue instance.
   *
   * @param {Vue} child
   */

  function detach(child) {
    if (child._isAttached && !inDoc(child.$el)) {
      child._callHook('detached');
    }
  }

  var linkerCache = new Cache(5000);

  /**
   * A factory that can be used to create instances of a
   * fragment. Caches the compiled linker if possible.
   *
   * @param {Vue} vm
   * @param {Element|String} el
   */
  function FragmentFactory(vm, el) {
    this.vm = vm;
    var template;
    var isString = typeof el === 'string';
    if (isString || isTemplate(el) && !el.hasAttribute('v-if')) {
      template = parseTemplate(el, true);
    } else {
      template = document.createDocumentFragment();
      template.appendChild(el);
    }
    this.template = template;
    // linker can be cached, but only for components
    var linker;
    var cid = vm.constructor.cid;
    if (cid > 0) {
      var cacheId = cid + (isString ? el : getOuterHTML(el));
      linker = linkerCache.get(cacheId);
      if (!linker) {
        linker = compile(template, vm.$options, true);
        linkerCache.put(cacheId, linker);
      }
    } else {
      linker = compile(template, vm.$options, true);
    }
    this.linker = linker;
  }

  /**
   * Create a fragment instance with given host and scope.
   *
   * @param {Vue} host
   * @param {Object} scope
   * @param {Fragment} parentFrag
   */

  FragmentFactory.prototype.create = function (host, scope, parentFrag) {
    var frag = cloneNode(this.template);
    return new Fragment(this.linker, this.vm, frag, host, scope, parentFrag);
  };

  var ON = 700;
  var MODEL = 800;
  var BIND = 850;
  var TRANSITION = 1100;
  var EL = 1500;
  var COMPONENT = 1500;
  var PARTIAL = 1750;
  var IF = 2100;
  var FOR = 2200;
  var SLOT = 2300;

  var uid$3 = 0;

  var vFor = {

    priority: FOR,
    terminal: true,

    params: ['track-by', 'stagger', 'enter-stagger', 'leave-stagger'],

    bind: function bind() {
      // support "item in/of items" syntax
      var inMatch = this.expression.match(/(.*) (?:in|of) (.*)/);
      if (inMatch) {
        var itMatch = inMatch[1].match(/\((.*),(.*)\)/);
        if (itMatch) {
          this.iterator = itMatch[1].trim();
          this.alias = itMatch[2].trim();
        } else {
          this.alias = inMatch[1].trim();
        }
        this.expression = inMatch[2];
      }

      if (!this.alias) {
        'development' !== 'production' && warn('Invalid v-for expression "' + this.descriptor.raw + '": ' + 'alias is required.', this.vm);
        return;
      }

      // uid as a cache identifier
      this.id = '__v-for__' + ++uid$3;

      // check if this is an option list,
      // so that we know if we need to update the <select>'s
      // v-model when the option list has changed.
      // because v-model has a lower priority than v-for,
      // the v-model is not bound here yet, so we have to
      // retrive it in the actual updateModel() function.
      var tag = this.el.tagName;
      this.isOption = (tag === 'OPTION' || tag === 'OPTGROUP') && this.el.parentNode.tagName === 'SELECT';

      // setup anchor nodes
      this.start = createAnchor('v-for-start');
      this.end = createAnchor('v-for-end');
      replace(this.el, this.end);
      before(this.start, this.end);

      // cache
      this.cache = Object.create(null);

      // fragment factory
      this.factory = new FragmentFactory(this.vm, this.el);
    },

    update: function update(data) {
      this.diff(data);
      this.updateRef();
      this.updateModel();
    },

    /**
     * Diff, based on new data and old data, determine the
     * minimum amount of DOM manipulations needed to make the
     * DOM reflect the new data Array.
     *
     * The algorithm diffs the new data Array by storing a
     * hidden reference to an owner vm instance on previously
     * seen data. This allows us to achieve O(n) which is
     * better than a levenshtein distance based algorithm,
     * which is O(m * n).
     *
     * @param {Array} data
     */

    diff: function diff(data) {
      // check if the Array was converted from an Object
      var item = data[0];
      var convertedFromObject = this.fromObject = isObject(item) && hasOwn(item, '$key') && hasOwn(item, '$value');

      var trackByKey = this.params.trackBy;
      var oldFrags = this.frags;
      var frags = this.frags = new Array(data.length);
      var alias = this.alias;
      var iterator = this.iterator;
      var start = this.start;
      var end = this.end;
      var inDocument = inDoc(start);
      var init = !oldFrags;
      var i, l, frag, key, value, primitive;

      // First pass, go through the new Array and fill up
      // the new frags array. If a piece of data has a cached
      // instance for it, we reuse it. Otherwise build a new
      // instance.
      for (i = 0, l = data.length; i < l; i++) {
        item = data[i];
        key = convertedFromObject ? item.$key : null;
        value = convertedFromObject ? item.$value : item;
        primitive = !isObject(value);
        frag = !init && this.getCachedFrag(value, i, key);
        if (frag) {
          // reusable fragment
          frag.reused = true;
          // update $index
          frag.scope.$index = i;
          // update $key
          if (key) {
            frag.scope.$key = key;
          }
          // update iterator
          if (iterator) {
            frag.scope[iterator] = key !== null ? key : i;
          }
          // update data for track-by, object repeat &
          // primitive values.
          if (trackByKey || convertedFromObject || primitive) {
            withoutConversion(function () {
              frag.scope[alias] = value;
            });
          }
        } else {
          // new isntance
          frag = this.create(value, alias, i, key);
          frag.fresh = !init;
        }
        frags[i] = frag;
        if (init) {
          frag.before(end);
        }
      }

      // we're done for the initial render.
      if (init) {
        return;
      }

      // Second pass, go through the old fragments and
      // destroy those who are not reused (and remove them
      // from cache)
      var removalIndex = 0;
      var totalRemoved = oldFrags.length - frags.length;
      // when removing a large number of fragments, watcher removal
      // turns out to be a perf bottleneck, so we batch the watcher
      // removals into a single filter call!
      this.vm._vForRemoving = true;
      for (i = 0, l = oldFrags.length; i < l; i++) {
        frag = oldFrags[i];
        if (!frag.reused) {
          this.deleteCachedFrag(frag);
          this.remove(frag, removalIndex++, totalRemoved, inDocument);
        }
      }
      this.vm._vForRemoving = false;
      if (removalIndex) {
        this.vm._watchers = this.vm._watchers.filter(function (w) {
          return w.active;
        });
      }

      // Final pass, move/insert new fragments into the
      // right place.
      var targetPrev, prevEl, currentPrev;
      var insertionIndex = 0;
      for (i = 0, l = frags.length; i < l; i++) {
        frag = frags[i];
        // this is the frag that we should be after
        targetPrev = frags[i - 1];
        prevEl = targetPrev ? targetPrev.staggerCb ? targetPrev.staggerAnchor : targetPrev.end || targetPrev.node : start;
        if (frag.reused && !frag.staggerCb) {
          currentPrev = findPrevFrag(frag, start, this.id);
          if (currentPrev !== targetPrev && (!currentPrev ||
          // optimization for moving a single item.
          // thanks to suggestions by @livoras in #1807
          findPrevFrag(currentPrev, start, this.id) !== targetPrev)) {
            this.move(frag, prevEl);
          }
        } else {
          // new instance, or still in stagger.
          // insert with updated stagger index.
          this.insert(frag, insertionIndex++, prevEl, inDocument);
        }
        frag.reused = frag.fresh = false;
      }
    },

    /**
     * Create a new fragment instance.
     *
     * @param {*} value
     * @param {String} alias
     * @param {Number} index
     * @param {String} [key]
     * @return {Fragment}
     */

    create: function create(value, alias, index, key) {
      var host = this._host;
      // create iteration scope
      var parentScope = this._scope || this.vm;
      var scope = Object.create(parentScope);
      // ref holder for the scope
      scope.$refs = Object.create(parentScope.$refs);
      scope.$els = Object.create(parentScope.$els);
      // make sure point $parent to parent scope
      scope.$parent = parentScope;
      // for two-way binding on alias
      scope.$forContext = this;
      // define scope properties
      // important: define the scope alias without forced conversion
      // so that frozen data structures remain non-reactive.
      withoutConversion(function () {
        defineReactive(scope, alias, value);
      });
      defineReactive(scope, '$index', index);
      if (key) {
        defineReactive(scope, '$key', key);
      } else if (scope.$key) {
        // avoid accidental fallback
        def(scope, '$key', null);
      }
      if (this.iterator) {
        defineReactive(scope, this.iterator, key !== null ? key : index);
      }
      var frag = this.factory.create(host, scope, this._frag);
      frag.forId = this.id;
      this.cacheFrag(value, frag, index, key);
      return frag;
    },

    /**
     * Update the v-ref on owner vm.
     */

    updateRef: function updateRef() {
      var ref = this.descriptor.ref;
      if (!ref) return;
      var hash = (this._scope || this.vm).$refs;
      var refs;
      if (!this.fromObject) {
        refs = this.frags.map(findVmFromFrag);
      } else {
        refs = {};
        this.frags.forEach(function (frag) {
          refs[frag.scope.$key] = findVmFromFrag(frag);
        });
      }
      hash[ref] = refs;
    },

    /**
     * For option lists, update the containing v-model on
     * parent <select>.
     */

    updateModel: function updateModel() {
      if (this.isOption) {
        var parent = this.start.parentNode;
        var model = parent && parent.__v_model;
        if (model) {
          model.forceUpdate();
        }
      }
    },

    /**
     * Insert a fragment. Handles staggering.
     *
     * @param {Fragment} frag
     * @param {Number} index
     * @param {Node} prevEl
     * @param {Boolean} inDocument
     */

    insert: function insert(frag, index, prevEl, inDocument) {
      if (frag.staggerCb) {
        frag.staggerCb.cancel();
        frag.staggerCb = null;
      }
      var staggerAmount = this.getStagger(frag, index, null, 'enter');
      if (inDocument && staggerAmount) {
        // create an anchor and insert it synchronously,
        // so that we can resolve the correct order without
        // worrying about some elements not inserted yet
        var anchor = frag.staggerAnchor;
        if (!anchor) {
          anchor = frag.staggerAnchor = createAnchor('stagger-anchor');
          anchor.__v_frag = frag;
        }
        after(anchor, prevEl);
        var op = frag.staggerCb = cancellable(function () {
          frag.staggerCb = null;
          frag.before(anchor);
          remove(anchor);
        });
        setTimeout(op, staggerAmount);
      } else {
        var target = prevEl.nextSibling;
        /* istanbul ignore if */
        if (!target) {
          // reset end anchor position in case the position was messed up
          // by an external drag-n-drop library.
          after(this.end, prevEl);
          target = this.end;
        }
        frag.before(target);
      }
    },

    /**
     * Remove a fragment. Handles staggering.
     *
     * @param {Fragment} frag
     * @param {Number} index
     * @param {Number} total
     * @param {Boolean} inDocument
     */

    remove: function remove(frag, index, total, inDocument) {
      if (frag.staggerCb) {
        frag.staggerCb.cancel();
        frag.staggerCb = null;
        // it's not possible for the same frag to be removed
        // twice, so if we have a pending stagger callback,
        // it means this frag is queued for enter but removed
        // before its transition started. Since it is already
        // destroyed, we can just leave it in detached state.
        return;
      }
      var staggerAmount = this.getStagger(frag, index, total, 'leave');
      if (inDocument && staggerAmount) {
        var op = frag.staggerCb = cancellable(function () {
          frag.staggerCb = null;
          frag.remove();
        });
        setTimeout(op, staggerAmount);
      } else {
        frag.remove();
      }
    },

    /**
     * Move a fragment to a new position.
     * Force no transition.
     *
     * @param {Fragment} frag
     * @param {Node} prevEl
     */

    move: function move(frag, prevEl) {
      // fix a common issue with Sortable:
      // if prevEl doesn't have nextSibling, this means it's
      // been dragged after the end anchor. Just re-position
      // the end anchor to the end of the container.
      /* istanbul ignore if */
      if (!prevEl.nextSibling) {
        this.end.parentNode.appendChild(this.end);
      }
      frag.before(prevEl.nextSibling, false);
    },

    /**
     * Cache a fragment using track-by or the object key.
     *
     * @param {*} value
     * @param {Fragment} frag
     * @param {Number} index
     * @param {String} [key]
     */

    cacheFrag: function cacheFrag(value, frag, index, key) {
      var trackByKey = this.params.trackBy;
      var cache = this.cache;
      var primitive = !isObject(value);
      var id;
      if (key || trackByKey || primitive) {
        id = getTrackByKey(index, key, value, trackByKey);
        if (!cache[id]) {
          cache[id] = frag;
        } else if (trackByKey !== '$index') {
          'development' !== 'production' && this.warnDuplicate(value);
        }
      } else {
        id = this.id;
        if (hasOwn(value, id)) {
          if (value[id] === null) {
            value[id] = frag;
          } else {
            'development' !== 'production' && this.warnDuplicate(value);
          }
        } else if (Object.isExtensible(value)) {
          def(value, id, frag);
        } else if ('development' !== 'production') {
          warn('Frozen v-for objects cannot be automatically tracked, make sure to ' + 'provide a track-by key.');
        }
      }
      frag.raw = value;
    },

    /**
     * Get a cached fragment from the value/index/key
     *
     * @param {*} value
     * @param {Number} index
     * @param {String} key
     * @return {Fragment}
     */

    getCachedFrag: function getCachedFrag(value, index, key) {
      var trackByKey = this.params.trackBy;
      var primitive = !isObject(value);
      var frag;
      if (key || trackByKey || primitive) {
        var id = getTrackByKey(index, key, value, trackByKey);
        frag = this.cache[id];
      } else {
        frag = value[this.id];
      }
      if (frag && (frag.reused || frag.fresh)) {
        'development' !== 'production' && this.warnDuplicate(value);
      }
      return frag;
    },

    /**
     * Delete a fragment from cache.
     *
     * @param {Fragment} frag
     */

    deleteCachedFrag: function deleteCachedFrag(frag) {
      var value = frag.raw;
      var trackByKey = this.params.trackBy;
      var scope = frag.scope;
      var index = scope.$index;
      // fix #948: avoid accidentally fall through to
      // a parent repeater which happens to have $key.
      var key = hasOwn(scope, '$key') && scope.$key;
      var primitive = !isObject(value);
      if (trackByKey || key || primitive) {
        var id = getTrackByKey(index, key, value, trackByKey);
        this.cache[id] = null;
      } else {
        value[this.id] = null;
        frag.raw = null;
      }
    },

    /**
     * Get the stagger amount for an insertion/removal.
     *
     * @param {Fragment} frag
     * @param {Number} index
     * @param {Number} total
     * @param {String} type
     */

    getStagger: function getStagger(frag, index, total, type) {
      type = type + 'Stagger';
      var trans = frag.node.__v_trans;
      var hooks = trans && trans.hooks;
      var hook = hooks && (hooks[type] || hooks.stagger);
      return hook ? hook.call(frag, index, total) : index * parseInt(this.params[type] || this.params.stagger, 10);
    },

    /**
     * Pre-process the value before piping it through the
     * filters. This is passed to and called by the watcher.
     */

    _preProcess: function _preProcess(value) {
      // regardless of type, store the un-filtered raw value.
      this.rawValue = value;
      return value;
    },

    /**
     * Post-process the value after it has been piped through
     * the filters. This is passed to and called by the watcher.
     *
     * It is necessary for this to be called during the
     * watcher's dependency collection phase because we want
     * the v-for to update when the source Object is mutated.
     */

    _postProcess: function _postProcess(value) {
      if (isArray(value)) {
        return value;
      } else if (isPlainObject(value)) {
        // convert plain object to array.
        var keys = Object.keys(value);
        var i = keys.length;
        var res = new Array(i);
        var key;
        while (i--) {
          key = keys[i];
          res[i] = {
            $key: key,
            $value: value[key]
          };
        }
        return res;
      } else {
        if (typeof value === 'number' && !isNaN(value)) {
          value = range(value);
        }
        return value || [];
      }
    },

    unbind: function unbind() {
      if (this.descriptor.ref) {
        (this._scope || this.vm).$refs[this.descriptor.ref] = null;
      }
      if (this.frags) {
        var i = this.frags.length;
        var frag;
        while (i--) {
          frag = this.frags[i];
          this.deleteCachedFrag(frag);
          frag.destroy();
        }
      }
    }
  };

  /**
   * Helper to find the previous element that is a fragment
   * anchor. This is necessary because a destroyed frag's
   * element could still be lingering in the DOM before its
   * leaving transition finishes, but its inserted flag
   * should have been set to false so we can skip them.
   *
   * If this is a block repeat, we want to make sure we only
   * return frag that is bound to this v-for. (see #929)
   *
   * @param {Fragment} frag
   * @param {Comment|Text} anchor
   * @param {String} id
   * @return {Fragment}
   */

  function findPrevFrag(frag, anchor, id) {
    var el = frag.node.previousSibling;
    /* istanbul ignore if */
    if (!el) return;
    frag = el.__v_frag;
    while ((!frag || frag.forId !== id || !frag.inserted) && el !== anchor) {
      el = el.previousSibling;
      /* istanbul ignore if */
      if (!el) return;
      frag = el.__v_frag;
    }
    return frag;
  }

  /**
   * Find a vm from a fragment.
   *
   * @param {Fragment} frag
   * @return {Vue|undefined}
   */

  function findVmFromFrag(frag) {
    var node = frag.node;
    // handle multi-node frag
    if (frag.end) {
      while (!node.__vue__ && node !== frag.end && node.nextSibling) {
        node = node.nextSibling;
      }
    }
    return node.__vue__;
  }

  /**
   * Create a range array from given number.
   *
   * @param {Number} n
   * @return {Array}
   */

  function range(n) {
    var i = -1;
    var ret = new Array(Math.floor(n));
    while (++i < n) {
      ret[i] = i;
    }
    return ret;
  }

  /**
   * Get the track by key for an item.
   *
   * @param {Number} index
   * @param {String} key
   * @param {*} value
   * @param {String} [trackByKey]
   */

  function getTrackByKey(index, key, value, trackByKey) {
    return trackByKey ? trackByKey === '$index' ? index : trackByKey.charAt(0).match(/\w/) ? getPath(value, trackByKey) : value[trackByKey] : key || value;
  }

  if ('development' !== 'production') {
    vFor.warnDuplicate = function (value) {
      warn('Duplicate value found in v-for="' + this.descriptor.raw + '": ' + JSON.stringify(value) + '. Use track-by="$index" if ' + 'you are expecting duplicate values.', this.vm);
    };
  }

  var vIf = {

    priority: IF,
    terminal: true,

    bind: function bind() {
      var el = this.el;
      if (!el.__vue__) {
        // check else block
        var next = el.nextElementSibling;
        if (next && getAttr(next, 'v-else') !== null) {
          remove(next);
          this.elseEl = next;
        }
        // check main block
        this.anchor = createAnchor('v-if');
        replace(el, this.anchor);
      } else {
        'development' !== 'production' && warn('v-if="' + this.expression + '" cannot be ' + 'used on an instance root element.', this.vm);
        this.invalid = true;
      }
    },

    update: function update(value) {
      if (this.invalid) return;
      if (value) {
        if (!this.frag) {
          this.insert();
        }
      } else {
        this.remove();
      }
    },

    insert: function insert() {
      if (this.elseFrag) {
        this.elseFrag.remove();
        this.elseFrag = null;
      }
      // lazy init factory
      if (!this.factory) {
        this.factory = new FragmentFactory(this.vm, this.el);
      }
      this.frag = this.factory.create(this._host, this._scope, this._frag);
      this.frag.before(this.anchor);
    },

    remove: function remove() {
      if (this.frag) {
        this.frag.remove();
        this.frag = null;
      }
      if (this.elseEl && !this.elseFrag) {
        if (!this.elseFactory) {
          this.elseFactory = new FragmentFactory(this.elseEl._context || this.vm, this.elseEl);
        }
        this.elseFrag = this.elseFactory.create(this._host, this._scope, this._frag);
        this.elseFrag.before(this.anchor);
      }
    },

    unbind: function unbind() {
      if (this.frag) {
        this.frag.destroy();
      }
      if (this.elseFrag) {
        this.elseFrag.destroy();
      }
    }
  };

  var show = {

    bind: function bind() {
      // check else block
      var next = this.el.nextElementSibling;
      if (next && getAttr(next, 'v-else') !== null) {
        this.elseEl = next;
      }
    },

    update: function update(value) {
      this.apply(this.el, value);
      if (this.elseEl) {
        this.apply(this.elseEl, !value);
      }
    },

    apply: function apply(el, value) {
      if (inDoc(el)) {
        applyTransition(el, value ? 1 : -1, toggle, this.vm);
      } else {
        toggle();
      }
      function toggle() {
        el.style.display = value ? '' : 'none';
      }
    }
  };

  var text$2 = {

    bind: function bind() {
      var self = this;
      var el = this.el;
      var isRange = el.type === 'range';
      var lazy = this.params.lazy;
      var number = this.params.number;
      var debounce = this.params.debounce;

      // handle composition events.
      //   http://blog.evanyou.me/2014/01/03/composition-event/
      // skip this for Android because it handles composition
      // events quite differently. Android doesn't trigger
      // composition events for language input methods e.g.
      // Chinese, but instead triggers them for spelling
      // suggestions... (see Discussion/#162)
      var composing = false;
      if (!isAndroid && !isRange) {
        this.on('compositionstart', function () {
          composing = true;
        });
        this.on('compositionend', function () {
          composing = false;
          // in IE11 the "compositionend" event fires AFTER
          // the "input" event, so the input handler is blocked
          // at the end... have to call it here.
          //
          // #1327: in lazy mode this is unecessary.
          if (!lazy) {
            self.listener();
          }
        });
      }

      // prevent messing with the input when user is typing,
      // and force update on blur.
      this.focused = false;
      if (!isRange && !lazy) {
        this.on('focus', function () {
          self.focused = true;
        });
        this.on('blur', function () {
          self.focused = false;
          // do not sync value after fragment removal (#2017)
          if (!self._frag || self._frag.inserted) {
            self.rawListener();
          }
        });
      }

      // Now attach the main listener
      this.listener = this.rawListener = function () {
        if (composing || !self._bound) {
          return;
        }
        var val = number || isRange ? toNumber(el.value) : el.value;
        self.set(val);
        // force update on next tick to avoid lock & same value
        // also only update when user is not typing
        nextTick(function () {
          if (self._bound && !self.focused) {
            self.update(self._watcher.value);
          }
        });
      };

      // apply debounce
      if (debounce) {
        this.listener = _debounce(this.listener, debounce);
      }

      // Support jQuery events, since jQuery.trigger() doesn't
      // trigger native events in some cases and some plugins
      // rely on $.trigger()
      //
      // We want to make sure if a listener is attached using
      // jQuery, it is also removed with jQuery, that's why
      // we do the check for each directive instance and
      // store that check result on itself. This also allows
      // easier test coverage control by unsetting the global
      // jQuery variable in tests.
      this.hasjQuery = typeof jQuery === 'function';
      if (this.hasjQuery) {
        var method = jQuery.fn.on ? 'on' : 'bind';
        jQuery(el)[method]('change', this.rawListener);
        if (!lazy) {
          jQuery(el)[method]('input', this.listener);
        }
      } else {
        this.on('change', this.rawListener);
        if (!lazy) {
          this.on('input', this.listener);
        }
      }

      // IE9 doesn't fire input event on backspace/del/cut
      if (!lazy && isIE9) {
        this.on('cut', function () {
          nextTick(self.listener);
        });
        this.on('keyup', function (e) {
          if (e.keyCode === 46 || e.keyCode === 8) {
            self.listener();
          }
        });
      }

      // set initial value if present
      if (el.hasAttribute('value') || el.tagName === 'TEXTAREA' && el.value.trim()) {
        this.afterBind = this.listener;
      }
    },

    update: function update(value) {
      // #3029 only update when the value changes. This prevent
      // browsers from overwriting values like selectionStart
      value = _toString(value);
      if (value !== this.el.value) this.el.value = value;
    },

    unbind: function unbind() {
      var el = this.el;
      if (this.hasjQuery) {
        var method = jQuery.fn.off ? 'off' : 'unbind';
        jQuery(el)[method]('change', this.listener);
        jQuery(el)[method]('input', this.listener);
      }
    }
  };

  var radio = {

    bind: function bind() {
      var self = this;
      var el = this.el;

      this.getValue = function () {
        // value overwrite via v-bind:value
        if (el.hasOwnProperty('_value')) {
          return el._value;
        }
        var val = el.value;
        if (self.params.number) {
          val = toNumber(val);
        }
        return val;
      };

      this.listener = function () {
        self.set(self.getValue());
      };
      this.on('change', this.listener);

      if (el.hasAttribute('checked')) {
        this.afterBind = this.listener;
      }
    },

    update: function update(value) {
      this.el.checked = looseEqual(value, this.getValue());
    }
  };

  var select = {

    bind: function bind() {
      var _this = this;

      var self = this;
      var el = this.el;

      // method to force update DOM using latest value.
      this.forceUpdate = function () {
        if (self._watcher) {
          self.update(self._watcher.get());
        }
      };

      // check if this is a multiple select
      var multiple = this.multiple = el.hasAttribute('multiple');

      // attach listener
      this.listener = function () {
        var value = getValue(el, multiple);
        value = self.params.number ? isArray(value) ? value.map(toNumber) : toNumber(value) : value;
        self.set(value);
      };
      this.on('change', this.listener);

      // if has initial value, set afterBind
      var initValue = getValue(el, multiple, true);
      if (multiple && initValue.length || !multiple && initValue !== null) {
        this.afterBind = this.listener;
      }

      // All major browsers except Firefox resets
      // selectedIndex with value -1 to 0 when the element
      // is appended to a new parent, therefore we have to
      // force a DOM update whenever that happens...
      this.vm.$on('hook:attached', function () {
        nextTick(_this.forceUpdate);
      });
      if (!inDoc(el)) {
        nextTick(this.forceUpdate);
      }
    },

    update: function update(value) {
      var el = this.el;
      el.selectedIndex = -1;
      var multi = this.multiple && isArray(value);
      var options = el.options;
      var i = options.length;
      var op, val;
      while (i--) {
        op = options[i];
        val = op.hasOwnProperty('_value') ? op._value : op.value;
        /* eslint-disable eqeqeq */
        op.selected = multi ? indexOf$1(value, val) > -1 : looseEqual(value, val);
        /* eslint-enable eqeqeq */
      }
    },

    unbind: function unbind() {
      /* istanbul ignore next */
      this.vm.$off('hook:attached', this.forceUpdate);
    }
  };

  /**
   * Get select value
   *
   * @param {SelectElement} el
   * @param {Boolean} multi
   * @param {Boolean} init
   * @return {Array|*}
   */

  function getValue(el, multi, init) {
    var res = multi ? [] : null;
    var op, val, selected;
    for (var i = 0, l = el.options.length; i < l; i++) {
      op = el.options[i];
      selected = init ? op.hasAttribute('selected') : op.selected;
      if (selected) {
        val = op.hasOwnProperty('_value') ? op._value : op.value;
        if (multi) {
          res.push(val);
        } else {
          return val;
        }
      }
    }
    return res;
  }

  /**
   * Native Array.indexOf uses strict equal, but in this
   * case we need to match string/numbers with custom equal.
   *
   * @param {Array} arr
   * @param {*} val
   */

  function indexOf$1(arr, val) {
    var i = arr.length;
    while (i--) {
      if (looseEqual(arr[i], val)) {
        return i;
      }
    }
    return -1;
  }

  var checkbox = {

    bind: function bind() {
      var self = this;
      var el = this.el;

      this.getValue = function () {
        return el.hasOwnProperty('_value') ? el._value : self.params.number ? toNumber(el.value) : el.value;
      };

      function getBooleanValue() {
        var val = el.checked;
        if (val && el.hasOwnProperty('_trueValue')) {
          return el._trueValue;
        }
        if (!val && el.hasOwnProperty('_falseValue')) {
          return el._falseValue;
        }
        return val;
      }

      this.listener = function () {
        var model = self._watcher.value;
        if (isArray(model)) {
          var val = self.getValue();
          if (el.checked) {
            if (indexOf(model, val) < 0) {
              model.push(val);
            }
          } else {
            model.$remove(val);
          }
        } else {
          self.set(getBooleanValue());
        }
      };

      this.on('change', this.listener);
      if (el.hasAttribute('checked')) {
        this.afterBind = this.listener;
      }
    },

    update: function update(value) {
      var el = this.el;
      if (isArray(value)) {
        el.checked = indexOf(value, this.getValue()) > -1;
      } else {
        if (el.hasOwnProperty('_trueValue')) {
          el.checked = looseEqual(value, el._trueValue);
        } else {
          el.checked = !!value;
        }
      }
    }
  };

  var handlers = {
    text: text$2,
    radio: radio,
    select: select,
    checkbox: checkbox
  };

  var model = {

    priority: MODEL,
    twoWay: true,
    handlers: handlers,
    params: ['lazy', 'number', 'debounce'],

    /**
     * Possible elements:
     *   <select>
     *   <textarea>
     *   <input type="*">
     *     - text
     *     - checkbox
     *     - radio
     *     - number
     */

    bind: function bind() {
      // friendly warning...
      this.checkFilters();
      if (this.hasRead && !this.hasWrite) {
        'development' !== 'production' && warn('It seems you are using a read-only filter with ' + 'v-model="' + this.descriptor.raw + '". ' + 'You might want to use a two-way filter to ensure correct behavior.', this.vm);
      }
      var el = this.el;
      var tag = el.tagName;
      var handler;
      if (tag === 'INPUT') {
        handler = handlers[el.type] || handlers.text;
      } else if (tag === 'SELECT') {
        handler = handlers.select;
      } else if (tag === 'TEXTAREA') {
        handler = handlers.text;
      } else {
        'development' !== 'production' && warn('v-model does not support element type: ' + tag, this.vm);
        return;
      }
      el.__v_model = this;
      handler.bind.call(this);
      this.update = handler.update;
      this._unbind = handler.unbind;
    },

    /**
     * Check read/write filter stats.
     */

    checkFilters: function checkFilters() {
      var filters = this.filters;
      if (!filters) return;
      var i = filters.length;
      while (i--) {
        var filter = resolveAsset(this.vm.$options, 'filters', filters[i].name);
        if (typeof filter === 'function' || filter.read) {
          this.hasRead = true;
        }
        if (filter.write) {
          this.hasWrite = true;
        }
      }
    },

    unbind: function unbind() {
      this.el.__v_model = null;
      this._unbind && this._unbind();
    }
  };

  // keyCode aliases
  var keyCodes = {
    esc: 27,
    tab: 9,
    enter: 13,
    space: 32,
    'delete': [8, 46],
    up: 38,
    left: 37,
    right: 39,
    down: 40
  };

  function keyFilter(handler, keys) {
    var codes = keys.map(function (key) {
      var charCode = key.charCodeAt(0);
      if (charCode > 47 && charCode < 58) {
        return parseInt(key, 10);
      }
      if (key.length === 1) {
        charCode = key.toUpperCase().charCodeAt(0);
        if (charCode > 64 && charCode < 91) {
          return charCode;
        }
      }
      return keyCodes[key];
    });
    codes = [].concat.apply([], codes);
    return function keyHandler(e) {
      if (codes.indexOf(e.keyCode) > -1) {
        return handler.call(this, e);
      }
    };
  }

  function stopFilter(handler) {
    return function stopHandler(e) {
      e.stopPropagation();
      return handler.call(this, e);
    };
  }

  function preventFilter(handler) {
    return function preventHandler(e) {
      e.preventDefault();
      return handler.call(this, e);
    };
  }

  function selfFilter(handler) {
    return function selfHandler(e) {
      if (e.target === e.currentTarget) {
        return handler.call(this, e);
      }
    };
  }

  var on$1 = {

    priority: ON,
    acceptStatement: true,
    keyCodes: keyCodes,

    bind: function bind() {
      // deal with iframes
      if (this.el.tagName === 'IFRAME' && this.arg !== 'load') {
        var self = this;
        this.iframeBind = function () {
          on(self.el.contentWindow, self.arg, self.handler, self.modifiers.capture);
        };
        this.on('load', this.iframeBind);
      }
    },

    update: function update(handler) {
      // stub a noop for v-on with no value,
      // e.g. @mousedown.prevent
      if (!this.descriptor.raw) {
        handler = function () {};
      }

      if (typeof handler !== 'function') {
        'development' !== 'production' && warn('v-on:' + this.arg + '="' + this.expression + '" expects a function value, ' + 'got ' + handler, this.vm);
        return;
      }

      // apply modifiers
      if (this.modifiers.stop) {
        handler = stopFilter(handler);
      }
      if (this.modifiers.prevent) {
        handler = preventFilter(handler);
      }
      if (this.modifiers.self) {
        handler = selfFilter(handler);
      }
      // key filter
      var keys = Object.keys(this.modifiers).filter(function (key) {
        return key !== 'stop' && key !== 'prevent' && key !== 'self' && key !== 'capture';
      });
      if (keys.length) {
        handler = keyFilter(handler, keys);
      }

      this.reset();
      this.handler = handler;

      if (this.iframeBind) {
        this.iframeBind();
      } else {
        on(this.el, this.arg, this.handler, this.modifiers.capture);
      }
    },

    reset: function reset() {
      var el = this.iframeBind ? this.el.contentWindow : this.el;
      if (this.handler) {
        off(el, this.arg, this.handler);
      }
    },

    unbind: function unbind() {
      this.reset();
    }
  };

  var prefixes = ['-webkit-', '-moz-', '-ms-'];
  var camelPrefixes = ['Webkit', 'Moz', 'ms'];
  var importantRE = /!important;?$/;
  var propCache = Object.create(null);

  var testEl = null;

  var style = {

    deep: true,

    update: function update(value) {
      if (typeof value === 'string') {
        this.el.style.cssText = value;
      } else if (isArray(value)) {
        this.handleObject(value.reduce(extend, {}));
      } else {
        this.handleObject(value || {});
      }
    },

    handleObject: function handleObject(value) {
      // cache object styles so that only changed props
      // are actually updated.
      var cache = this.cache || (this.cache = {});
      var name, val;
      for (name in cache) {
        if (!(name in value)) {
          this.handleSingle(name, null);
          delete cache[name];
        }
      }
      for (name in value) {
        val = value[name];
        if (val !== cache[name]) {
          cache[name] = val;
          this.handleSingle(name, val);
        }
      }
    },

    handleSingle: function handleSingle(prop, value) {
      prop = normalize(prop);
      if (!prop) return; // unsupported prop
      // cast possible numbers/booleans into strings
      if (value != null) value += '';
      if (value) {
        var isImportant = importantRE.test(value) ? 'important' : '';
        if (isImportant) {
          /* istanbul ignore if */
          if ('development' !== 'production') {
            warn('It\'s probably a bad idea to use !important with inline rules. ' + 'This feature will be deprecated in a future version of Vue.');
          }
          value = value.replace(importantRE, '').trim();
          this.el.style.setProperty(prop.kebab, value, isImportant);
        } else {
          this.el.style[prop.camel] = value;
        }
      } else {
        this.el.style[prop.camel] = '';
      }
    }

  };

  /**
   * Normalize a CSS property name.
   * - cache result
   * - auto prefix
   * - camelCase -> dash-case
   *
   * @param {String} prop
   * @return {String}
   */

  function normalize(prop) {
    if (propCache[prop]) {
      return propCache[prop];
    }
    var res = prefix(prop);
    propCache[prop] = propCache[res] = res;
    return res;
  }

  /**
   * Auto detect the appropriate prefix for a CSS property.
   * https://gist.github.com/paulirish/523692
   *
   * @param {String} prop
   * @return {String}
   */

  function prefix(prop) {
    prop = hyphenate(prop);
    var camel = camelize(prop);
    var upper = camel.charAt(0).toUpperCase() + camel.slice(1);
    if (!testEl) {
      testEl = document.createElement('div');
    }
    var i = prefixes.length;
    var prefixed;
    if (camel !== 'filter' && camel in testEl.style) {
      return {
        kebab: prop,
        camel: camel
      };
    }
    while (i--) {
      prefixed = camelPrefixes[i] + upper;
      if (prefixed in testEl.style) {
        return {
          kebab: prefixes[i] + prop,
          camel: prefixed
        };
      }
    }
  }

  // xlink
  var xlinkNS = 'http://www.w3.org/1999/xlink';
  var xlinkRE = /^xlink:/;

  // check for attributes that prohibit interpolations
  var disallowedInterpAttrRE = /^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/;
  // these attributes should also set their corresponding properties
  // because they only affect the initial state of the element
  var attrWithPropsRE = /^(?:value|checked|selected|muted)$/;
  // these attributes expect enumrated values of "true" or "false"
  // but are not boolean attributes
  var enumeratedAttrRE = /^(?:draggable|contenteditable|spellcheck)$/;

  // these attributes should set a hidden property for
  // binding v-model to object values
  var modelProps = {
    value: '_value',
    'true-value': '_trueValue',
    'false-value': '_falseValue'
  };

  var bind$1 = {

    priority: BIND,

    bind: function bind() {
      var attr = this.arg;
      var tag = this.el.tagName;
      // should be deep watch on object mode
      if (!attr) {
        this.deep = true;
      }
      // handle interpolation bindings
      var descriptor = this.descriptor;
      var tokens = descriptor.interp;
      if (tokens) {
        // handle interpolations with one-time tokens
        if (descriptor.hasOneTime) {
          this.expression = tokensToExp(tokens, this._scope || this.vm);
        }

        // only allow binding on native attributes
        if (disallowedInterpAttrRE.test(attr) || attr === 'name' && (tag === 'PARTIAL' || tag === 'SLOT')) {
          'development' !== 'production' && warn(attr + '="' + descriptor.raw + '": ' + 'attribute interpolation is not allowed in Vue.js ' + 'directives and special attributes.', this.vm);
          this.el.removeAttribute(attr);
          this.invalid = true;
        }

        /* istanbul ignore if */
        if ('development' !== 'production') {
          var raw = attr + '="' + descriptor.raw + '": ';
          // warn src
          if (attr === 'src') {
            warn(raw + 'interpolation in "src" attribute will cause ' + 'a 404 request. Use v-bind:src instead.', this.vm);
          }

          // warn style
          if (attr === 'style') {
            warn(raw + 'interpolation in "style" attribute will cause ' + 'the attribute to be discarded in Internet Explorer. ' + 'Use v-bind:style instead.', this.vm);
          }
        }
      }
    },

    update: function update(value) {
      if (this.invalid) {
        return;
      }
      var attr = this.arg;
      if (this.arg) {
        this.handleSingle(attr, value);
      } else {
        this.handleObject(value || {});
      }
    },

    // share object handler with v-bind:class
    handleObject: style.handleObject,

    handleSingle: function handleSingle(attr, value) {
      var el = this.el;
      var interp = this.descriptor.interp;
      if (this.modifiers.camel) {
        attr = camelize(attr);
      }
      if (!interp && attrWithPropsRE.test(attr) && attr in el) {
        var attrValue = attr === 'value' ? value == null // IE9 will set input.value to "null" for null...
        ? '' : value : value;

        if (el[attr] !== attrValue) {
          el[attr] = attrValue;
        }
      }
      // set model props
      var modelProp = modelProps[attr];
      if (!interp && modelProp) {
        el[modelProp] = value;
        // update v-model if present
        var model = el.__v_model;
        if (model) {
          model.listener();
        }
      }
      // do not set value attribute for textarea
      if (attr === 'value' && el.tagName === 'TEXTAREA') {
        el.removeAttribute(attr);
        return;
      }
      // update attribute
      if (enumeratedAttrRE.test(attr)) {
        el.setAttribute(attr, value ? 'true' : 'false');
      } else if (value != null && value !== false) {
        if (attr === 'class') {
          // handle edge case #1960:
          // class interpolation should not overwrite Vue transition class
          if (el.__v_trans) {
            value += ' ' + el.__v_trans.id + '-transition';
          }
          setClass(el, value);
        } else if (xlinkRE.test(attr)) {
          el.setAttributeNS(xlinkNS, attr, value === true ? '' : value);
        } else {
          el.setAttribute(attr, value === true ? '' : value);
        }
      } else {
        el.removeAttribute(attr);
      }
    }
  };

  var el = {

    priority: EL,

    bind: function bind() {
      /* istanbul ignore if */
      if (!this.arg) {
        return;
      }
      var id = this.id = camelize(this.arg);
      var refs = (this._scope || this.vm).$els;
      if (hasOwn(refs, id)) {
        refs[id] = this.el;
      } else {
        defineReactive(refs, id, this.el);
      }
    },

    unbind: function unbind() {
      var refs = (this._scope || this.vm).$els;
      if (refs[this.id] === this.el) {
        refs[this.id] = null;
      }
    }
  };

  var ref = {
    bind: function bind() {
      'development' !== 'production' && warn('v-ref:' + this.arg + ' must be used on a child ' + 'component. Found on <' + this.el.tagName.toLowerCase() + '>.', this.vm);
    }
  };

  var cloak = {
    bind: function bind() {
      var el = this.el;
      this.vm.$once('pre-hook:compiled', function () {
        el.removeAttribute('v-cloak');
      });
    }
  };

  // must export plain object
  var directives = {
    text: text$1,
    html: html,
    'for': vFor,
    'if': vIf,
    show: show,
    model: model,
    on: on$1,
    bind: bind$1,
    el: el,
    ref: ref,
    cloak: cloak
  };

  var vClass = {

    deep: true,

    update: function update(value) {
      if (!value) {
        this.cleanup();
      } else if (typeof value === 'string') {
        this.setClass(value.trim().split(/\s+/));
      } else {
        this.setClass(normalize$1(value));
      }
    },

    setClass: function setClass(value) {
      this.cleanup(value);
      for (var i = 0, l = value.length; i < l; i++) {
        var val = value[i];
        if (val) {
          apply(this.el, val, addClass);
        }
      }
      this.prevKeys = value;
    },

    cleanup: function cleanup(value) {
      var prevKeys = this.prevKeys;
      if (!prevKeys) return;
      var i = prevKeys.length;
      while (i--) {
        var key = prevKeys[i];
        if (!value || value.indexOf(key) < 0) {
          apply(this.el, key, removeClass);
        }
      }
    }
  };

  /**
   * Normalize objects and arrays (potentially containing objects)
   * into array of strings.
   *
   * @param {Object|Array<String|Object>} value
   * @return {Array<String>}
   */

  function normalize$1(value) {
    var res = [];
    if (isArray(value)) {
      for (var i = 0, l = value.length; i < l; i++) {
        var _key = value[i];
        if (_key) {
          if (typeof _key === 'string') {
            res.push(_key);
          } else {
            for (var k in _key) {
              if (_key[k]) res.push(k);
            }
          }
        }
      }
    } else if (isObject(value)) {
      for (var key in value) {
        if (value[key]) res.push(key);
      }
    }
    return res;
  }

  /**
   * Add or remove a class/classes on an element
   *
   * @param {Element} el
   * @param {String} key The class name. This may or may not
   *                     contain a space character, in such a
   *                     case we'll deal with multiple class
   *                     names at once.
   * @param {Function} fn
   */

  function apply(el, key, fn) {
    key = key.trim();
    if (key.indexOf(' ') === -1) {
      fn(el, key);
      return;
    }
    // The key contains one or more space characters.
    // Since a class name doesn't accept such characters, we
    // treat it as multiple classes.
    var keys = key.split(/\s+/);
    for (var i = 0, l = keys.length; i < l; i++) {
      fn(el, keys[i]);
    }
  }

  var component = {

    priority: COMPONENT,

    params: ['keep-alive', 'transition-mode', 'inline-template'],

    /**
     * Setup. Two possible usages:
     *
     * - static:
     *   <comp> or <div v-component="comp">
     *
     * - dynamic:
     *   <component :is="view">
     */

    bind: function bind() {
      if (!this.el.__vue__) {
        // keep-alive cache
        this.keepAlive = this.params.keepAlive;
        if (this.keepAlive) {
          this.cache = {};
        }
        // check inline-template
        if (this.params.inlineTemplate) {
          // extract inline template as a DocumentFragment
          this.inlineTemplate = extractContent(this.el, true);
        }
        // component resolution related state
        this.pendingComponentCb = this.Component = null;
        // transition related state
        this.pendingRemovals = 0;
        this.pendingRemovalCb = null;
        // create a ref anchor
        this.anchor = createAnchor('v-component');
        replace(this.el, this.anchor);
        // remove is attribute.
        // this is removed during compilation, but because compilation is
        // cached, when the component is used elsewhere this attribute
        // will remain at link time.
        this.el.removeAttribute('is');
        this.el.removeAttribute(':is');
        // remove ref, same as above
        if (this.descriptor.ref) {
          this.el.removeAttribute('v-ref:' + hyphenate(this.descriptor.ref));
        }
        // if static, build right now.
        if (this.literal) {
          this.setComponent(this.expression);
        }
      } else {
        'development' !== 'production' && warn('cannot mount component "' + this.expression + '" ' + 'on already mounted element: ' + this.el);
      }
    },

    /**
     * Public update, called by the watcher in the dynamic
     * literal scenario, e.g. <component :is="view">
     */

    update: function update(value) {
      if (!this.literal) {
        this.setComponent(value);
      }
    },

    /**
     * Switch dynamic components. May resolve the component
     * asynchronously, and perform transition based on
     * specified transition mode. Accepts a few additional
     * arguments specifically for vue-router.
     *
     * The callback is called when the full transition is
     * finished.
     *
     * @param {String} value
     * @param {Function} [cb]
     */

    setComponent: function setComponent(value, cb) {
      this.invalidatePending();
      if (!value) {
        // just remove current
        this.unbuild(true);
        this.remove(this.childVM, cb);
        this.childVM = null;
      } else {
        var self = this;
        this.resolveComponent(value, function () {
          self.mountComponent(cb);
        });
      }
    },

    /**
     * Resolve the component constructor to use when creating
     * the child vm.
     *
     * @param {String|Function} value
     * @param {Function} cb
     */

    resolveComponent: function resolveComponent(value, cb) {
      var self = this;
      this.pendingComponentCb = cancellable(function (Component) {
        self.ComponentName = Component.options.name || (typeof value === 'string' ? value : null);
        self.Component = Component;
        cb();
      });
      this.vm._resolveComponent(value, this.pendingComponentCb);
    },

    /**
     * Create a new instance using the current constructor and
     * replace the existing instance. This method doesn't care
     * whether the new component and the old one are actually
     * the same.
     *
     * @param {Function} [cb]
     */

    mountComponent: function mountComponent(cb) {
      // actual mount
      this.unbuild(true);
      var self = this;
      var activateHooks = this.Component.options.activate;
      var cached = this.getCached();
      var newComponent = this.build();
      if (activateHooks && !cached) {
        this.waitingFor = newComponent;
        callActivateHooks(activateHooks, newComponent, function () {
          if (self.waitingFor !== newComponent) {
            return;
          }
          self.waitingFor = null;
          self.transition(newComponent, cb);
        });
      } else {
        // update ref for kept-alive component
        if (cached) {
          newComponent._updateRef();
        }
        this.transition(newComponent, cb);
      }
    },

    /**
     * When the component changes or unbinds before an async
     * constructor is resolved, we need to invalidate its
     * pending callback.
     */

    invalidatePending: function invalidatePending() {
      if (this.pendingComponentCb) {
        this.pendingComponentCb.cancel();
        this.pendingComponentCb = null;
      }
    },

    /**
     * Instantiate/insert a new child vm.
     * If keep alive and has cached instance, insert that
     * instance; otherwise build a new one and cache it.
     *
     * @param {Object} [extraOptions]
     * @return {Vue} - the created instance
     */

    build: function build(extraOptions) {
      var cached = this.getCached();
      if (cached) {
        return cached;
      }
      if (this.Component) {
        // default options
        var options = {
          name: this.ComponentName,
          el: cloneNode(this.el),
          template: this.inlineTemplate,
          // make sure to add the child with correct parent
          // if this is a transcluded component, its parent
          // should be the transclusion host.
          parent: this._host || this.vm,
          // if no inline-template, then the compiled
          // linker can be cached for better performance.
          _linkerCachable: !this.inlineTemplate,
          _ref: this.descriptor.ref,
          _asComponent: true,
          _isRouterView: this._isRouterView,
          // if this is a transcluded component, context
          // will be the common parent vm of this instance
          // and its host.
          _context: this.vm,
          // if this is inside an inline v-for, the scope
          // will be the intermediate scope created for this
          // repeat fragment. this is used for linking props
          // and container directives.
          _scope: this._scope,
          // pass in the owner fragment of this component.
          // this is necessary so that the fragment can keep
          // track of its contained components in order to
          // call attach/detach hooks for them.
          _frag: this._frag
        };
        // extra options
        // in 1.0.0 this is used by vue-router only
        /* istanbul ignore if */
        if (extraOptions) {
          extend(options, extraOptions);
        }
        var child = new this.Component(options);
        if (this.keepAlive) {
          this.cache[this.Component.cid] = child;
        }
        /* istanbul ignore if */
        if ('development' !== 'production' && this.el.hasAttribute('transition') && child._isFragment) {
          warn('Transitions will not work on a fragment instance. ' + 'Template: ' + child.$options.template, child);
        }
        return child;
      }
    },

    /**
     * Try to get a cached instance of the current component.
     *
     * @return {Vue|undefined}
     */

    getCached: function getCached() {
      return this.keepAlive && this.cache[this.Component.cid];
    },

    /**
     * Teardown the current child, but defers cleanup so
     * that we can separate the destroy and removal steps.
     *
     * @param {Boolean} defer
     */

    unbuild: function unbuild(defer) {
      if (this.waitingFor) {
        if (!this.keepAlive) {
          this.waitingFor.$destroy();
        }
        this.waitingFor = null;
      }
      var child = this.childVM;
      if (!child || this.keepAlive) {
        if (child) {
          // remove ref
          child._inactive = true;
          child._updateRef(true);
        }
        return;
      }
      // the sole purpose of `deferCleanup` is so that we can
      // "deactivate" the vm right now and perform DOM removal
      // later.
      child.$destroy(false, defer);
    },

    /**
     * Remove current destroyed child and manually do
     * the cleanup after removal.
     *
     * @param {Function} cb
     */

    remove: function remove(child, cb) {
      var keepAlive = this.keepAlive;
      if (child) {
        // we may have a component switch when a previous
        // component is still being transitioned out.
        // we want to trigger only one lastest insertion cb
        // when the existing transition finishes. (#1119)
        this.pendingRemovals++;
        this.pendingRemovalCb = cb;
        var self = this;
        child.$remove(function () {
          self.pendingRemovals--;
          if (!keepAlive) child._cleanup();
          if (!self.pendingRemovals && self.pendingRemovalCb) {
            self.pendingRemovalCb();
            self.pendingRemovalCb = null;
          }
        });
      } else if (cb) {
        cb();
      }
    },

    /**
     * Actually swap the components, depending on the
     * transition mode. Defaults to simultaneous.
     *
     * @param {Vue} target
     * @param {Function} [cb]
     */

    transition: function transition(target, cb) {
      var self = this;
      var current = this.childVM;
      // for devtool inspection
      if (current) current._inactive = true;
      target._inactive = false;
      this.childVM = target;
      switch (self.params.transitionMode) {
        case 'in-out':
          target.$before(self.anchor, function () {
            self.remove(current, cb);
          });
          break;
        case 'out-in':
          self.remove(current, function () {
            target.$before(self.anchor, cb);
          });
          break;
        default:
          self.remove(current);
          target.$before(self.anchor, cb);
      }
    },

    /**
     * Unbind.
     */

    unbind: function unbind() {
      this.invalidatePending();
      // Do not defer cleanup when unbinding
      this.unbuild();
      // destroy all keep-alive cached instances
      if (this.cache) {
        for (var key in this.cache) {
          this.cache[key].$destroy();
        }
        this.cache = null;
      }
    }
  };

  /**
   * Call activate hooks in order (asynchronous)
   *
   * @param {Array} hooks
   * @param {Vue} vm
   * @param {Function} cb
   */

  function callActivateHooks(hooks, vm, cb) {
    var total = hooks.length;
    var called = 0;
    hooks[0].call(vm, next);
    function next() {
      if (++called >= total) {
        cb();
      } else {
        hooks[called].call(vm, next);
      }
    }
  }

  var propBindingModes = config._propBindingModes;
  var empty = {};

  // regexes
  var identRE$1 = /^[$_a-zA-Z]+[\w$]*$/;
  var settablePathRE = /^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/;

  /**
   * Compile props on a root element and return
   * a props link function.
   *
   * @param {Element|DocumentFragment} el
   * @param {Array} propOptions
   * @param {Vue} vm
   * @return {Function} propsLinkFn
   */

  function compileProps(el, propOptions, vm) {
    var props = [];
    var names = Object.keys(propOptions);
    var i = names.length;
    var options, name, attr, value, path, parsed, prop;
    while (i--) {
      name = names[i];
      options = propOptions[name] || empty;

      if ('development' !== 'production' && name === '$data') {
        warn('Do not use $data as prop.', vm);
        continue;
      }

      // props could contain dashes, which will be
      // interpreted as minus calculations by the parser
      // so we need to camelize the path here
      path = camelize(name);
      if (!identRE$1.test(path)) {
        'development' !== 'production' && warn('Invalid prop key: "' + name + '". Prop keys ' + 'must be valid identifiers.', vm);
        continue;
      }

      prop = {
        name: name,
        path: path,
        options: options,
        mode: propBindingModes.ONE_WAY,
        raw: null
      };

      attr = hyphenate(name);
      // first check dynamic version
      if ((value = getBindAttr(el, attr)) === null) {
        if ((value = getBindAttr(el, attr + '.sync')) !== null) {
          prop.mode = propBindingModes.TWO_WAY;
        } else if ((value = getBindAttr(el, attr + '.once')) !== null) {
          prop.mode = propBindingModes.ONE_TIME;
        }
      }
      if (value !== null) {
        // has dynamic binding!
        prop.raw = value;
        parsed = parseDirective(value);
        value = parsed.expression;
        prop.filters = parsed.filters;
        // check binding type
        if (isLiteral(value) && !parsed.filters) {
          // for expressions containing literal numbers and
          // booleans, there's no need to setup a prop binding,
          // so we can optimize them as a one-time set.
          prop.optimizedLiteral = true;
        } else {
          prop.dynamic = true;
          // check non-settable path for two-way bindings
          if ('development' !== 'production' && prop.mode === propBindingModes.TWO_WAY && !settablePathRE.test(value)) {
            prop.mode = propBindingModes.ONE_WAY;
            warn('Cannot bind two-way prop with non-settable ' + 'parent path: ' + value, vm);
          }
        }
        prop.parentPath = value;

        // warn required two-way
        if ('development' !== 'production' && options.twoWay && prop.mode !== propBindingModes.TWO_WAY) {
          warn('Prop "' + name + '" expects a two-way binding type.', vm);
        }
      } else if ((value = getAttr(el, attr)) !== null) {
        // has literal binding!
        prop.raw = value;
      } else if ('development' !== 'production') {
        // check possible camelCase prop usage
        var lowerCaseName = path.toLowerCase();
        value = /[A-Z\-]/.test(name) && (el.getAttribute(lowerCaseName) || el.getAttribute(':' + lowerCaseName) || el.getAttribute('v-bind:' + lowerCaseName) || el.getAttribute(':' + lowerCaseName + '.once') || el.getAttribute('v-bind:' + lowerCaseName + '.once') || el.getAttribute(':' + lowerCaseName + '.sync') || el.getAttribute('v-bind:' + lowerCaseName + '.sync'));
        if (value) {
          warn('Possible usage error for prop `' + lowerCaseName + '` - ' + 'did you mean `' + attr + '`? HTML is case-insensitive, remember to use ' + 'kebab-case for props in templates.', vm);
        } else if (options.required) {
          // warn missing required
          warn('Missing required prop: ' + name, vm);
        }
      }
      // push prop
      props.push(prop);
    }
    return makePropsLinkFn(props);
  }

  /**
   * Build a function that applies props to a vm.
   *
   * @param {Array} props
   * @return {Function} propsLinkFn
   */

  function makePropsLinkFn(props) {
    return function propsLinkFn(vm, scope) {
      // store resolved props info
      vm._props = {};
      var inlineProps = vm.$options.propsData;
      var i = props.length;
      var prop, path, options, value, raw;
      while (i--) {
        prop = props[i];
        raw = prop.raw;
        path = prop.path;
        options = prop.options;
        vm._props[path] = prop;
        if (inlineProps && hasOwn(inlineProps, path)) {
          initProp(vm, prop, inlineProps[path]);
        }if (raw === null) {
          // initialize absent prop
          initProp(vm, prop, undefined);
        } else if (prop.dynamic) {
          // dynamic prop
          if (prop.mode === propBindingModes.ONE_TIME) {
            // one time binding
            value = (scope || vm._context || vm).$get(prop.parentPath);
            initProp(vm, prop, value);
          } else {
            if (vm._context) {
              // dynamic binding
              vm._bindDir({
                name: 'prop',
                def: propDef,
                prop: prop
              }, null, null, scope); // el, host, scope
            } else {
                // root instance
                initProp(vm, prop, vm.$get(prop.parentPath));
              }
          }
        } else if (prop.optimizedLiteral) {
          // optimized literal, cast it and just set once
          var stripped = stripQuotes(raw);
          value = stripped === raw ? toBoolean(toNumber(raw)) : stripped;
          initProp(vm, prop, value);
        } else {
          // string literal, but we need to cater for
          // Boolean props with no value, or with same
          // literal value (e.g. disabled="disabled")
          // see https://github.com/vuejs/vue-loader/issues/182
          value = options.type === Boolean && (raw === '' || raw === hyphenate(prop.name)) ? true : raw;
          initProp(vm, prop, value);
        }
      }
    };
  }

  /**
   * Process a prop with a rawValue, applying necessary coersions,
   * default values & assertions and call the given callback with
   * processed value.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @param {*} rawValue
   * @param {Function} fn
   */

  function processPropValue(vm, prop, rawValue, fn) {
    var isSimple = prop.dynamic && isSimplePath(prop.parentPath);
    var value = rawValue;
    if (value === undefined) {
      value = getPropDefaultValue(vm, prop);
    }
    value = coerceProp(prop, value, vm);
    var coerced = value !== rawValue;
    if (!assertProp(prop, value, vm)) {
      value = undefined;
    }
    if (isSimple && !coerced) {
      withoutConversion(function () {
        fn(value);
      });
    } else {
      fn(value);
    }
  }

  /**
   * Set a prop's initial value on a vm and its data object.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @param {*} value
   */

  function initProp(vm, prop, value) {
    processPropValue(vm, prop, value, function (value) {
      defineReactive(vm, prop.path, value);
    });
  }

  /**
   * Update a prop's value on a vm.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @param {*} value
   */

  function updateProp(vm, prop, value) {
    processPropValue(vm, prop, value, function (value) {
      vm[prop.path] = value;
    });
  }

  /**
   * Get the default value of a prop.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @return {*}
   */

  function getPropDefaultValue(vm, prop) {
    // no default, return undefined
    var options = prop.options;
    if (!hasOwn(options, 'default')) {
      // absent boolean value defaults to false
      return options.type === Boolean ? false : undefined;
    }
    var def = options['default'];
    // warn against non-factory defaults for Object & Array
    if (isObject(def)) {
      'development' !== 'production' && warn('Invalid default value for prop "' + prop.name + '": ' + 'Props with type Object/Array must use a factory function ' + 'to return the default value.', vm);
    }
    // call factory function for non-Function types
    return typeof def === 'function' && options.type !== Function ? def.call(vm) : def;
  }

  /**
   * Assert whether a prop is valid.
   *
   * @param {Object} prop
   * @param {*} value
   * @param {Vue} vm
   */

  function assertProp(prop, value, vm) {
    if (!prop.options.required && ( // non-required
    prop.raw === null || // abscent
    value == null) // null or undefined
    ) {
        return true;
      }
    var options = prop.options;
    var type = options.type;
    var valid = !type;
    var expectedTypes = [];
    if (type) {
      if (!isArray(type)) {
        type = [type];
      }
      for (var i = 0; i < type.length && !valid; i++) {
        var assertedType = assertType(value, type[i]);
        expectedTypes.push(assertedType.expectedType);
        valid = assertedType.valid;
      }
    }
    if (!valid) {
      if ('development' !== 'production') {
        warn('Invalid prop: type check failed for prop "' + prop.name + '".' + ' Expected ' + expectedTypes.map(formatType).join(', ') + ', got ' + formatValue(value) + '.', vm);
      }
      return false;
    }
    var validator = options.validator;
    if (validator) {
      if (!validator(value)) {
        'development' !== 'production' && warn('Invalid prop: custom validator check failed for prop "' + prop.name + '".', vm);
        return false;
      }
    }
    return true;
  }

  /**
   * Force parsing value with coerce option.
   *
   * @param {*} value
   * @param {Object} options
   * @return {*}
   */

  function coerceProp(prop, value, vm) {
    var coerce = prop.options.coerce;
    if (!coerce) {
      return value;
    }
    if (typeof coerce === 'function') {
      return coerce(value);
    } else {
      'development' !== 'production' && warn('Invalid coerce for prop "' + prop.name + '": expected function, got ' + typeof coerce + '.', vm);
      return value;
    }
  }

  /**
   * Assert the type of a value
   *
   * @param {*} value
   * @param {Function} type
   * @return {Object}
   */

  function assertType(value, type) {
    var valid;
    var expectedType;
    if (type === String) {
      expectedType = 'string';
      valid = typeof value === expectedType;
    } else if (type === Number) {
      expectedType = 'number';
      valid = typeof value === expectedType;
    } else if (type === Boolean) {
      expectedType = 'boolean';
      valid = typeof value === expectedType;
    } else if (type === Function) {
      expectedType = 'function';
      valid = typeof value === expectedType;
    } else if (type === Object) {
      expectedType = 'object';
      valid = isPlainObject(value);
    } else if (type === Array) {
      expectedType = 'array';
      valid = isArray(value);
    } else {
      valid = value instanceof type;
    }
    return {
      valid: valid,
      expectedType: expectedType
    };
  }

  /**
   * Format type for output
   *
   * @param {String} type
   * @return {String}
   */

  function formatType(type) {
    return type ? type.charAt(0).toUpperCase() + type.slice(1) : 'custom type';
  }

  /**
   * Format value
   *
   * @param {*} value
   * @return {String}
   */

  function formatValue(val) {
    return Object.prototype.toString.call(val).slice(8, -1);
  }

  var bindingModes = config._propBindingModes;

  var propDef = {

    bind: function bind() {
      var child = this.vm;
      var parent = child._context;
      // passed in from compiler directly
      var prop = this.descriptor.prop;
      var childKey = prop.path;
      var parentKey = prop.parentPath;
      var twoWay = prop.mode === bindingModes.TWO_WAY;

      var parentWatcher = this.parentWatcher = new Watcher(parent, parentKey, function (val) {
        updateProp(child, prop, val);
      }, {
        twoWay: twoWay,
        filters: prop.filters,
        // important: props need to be observed on the
        // v-for scope if present
        scope: this._scope
      });

      // set the child initial value.
      initProp(child, prop, parentWatcher.value);

      // setup two-way binding
      if (twoWay) {
        // important: defer the child watcher creation until
        // the created hook (after data observation)
        var self = this;
        child.$once('pre-hook:created', function () {
          self.childWatcher = new Watcher(child, childKey, function (val) {
            parentWatcher.set(val);
          }, {
            // ensure sync upward before parent sync down.
            // this is necessary in cases e.g. the child
            // mutates a prop array, then replaces it. (#1683)
            sync: true
          });
        });
      }
    },

    unbind: function unbind() {
      this.parentWatcher.teardown();
      if (this.childWatcher) {
        this.childWatcher.teardown();
      }
    }
  };

  var queue$1 = [];
  var queued = false;

  /**
   * Push a job into the queue.
   *
   * @param {Function} job
   */

  function pushJob(job) {
    queue$1.push(job);
    if (!queued) {
      queued = true;
      nextTick(flush);
    }
  }

  /**
   * Flush the queue, and do one forced reflow before
   * triggering transitions.
   */

  function flush() {
    // Force layout
    var f = document.documentElement.offsetHeight;
    for (var i = 0; i < queue$1.length; i++) {
      queue$1[i]();
    }
    queue$1 = [];
    queued = false;
    // dummy return, so js linters don't complain about
    // unused variable f
    return f;
  }

  var TYPE_TRANSITION = 'transition';
  var TYPE_ANIMATION = 'animation';
  var transDurationProp = transitionProp + 'Duration';
  var animDurationProp = animationProp + 'Duration';

  /**
   * If a just-entered element is applied the
   * leave class while its enter transition hasn't started yet,
   * and the transitioned property has the same value for both
   * enter/leave, then the leave transition will be skipped and
   * the transitionend event never fires. This function ensures
   * its callback to be called after a transition has started
   * by waiting for double raf.
   *
   * It falls back to setTimeout on devices that support CSS
   * transitions but not raf (e.g. Android 4.2 browser) - since
   * these environments are usually slow, we are giving it a
   * relatively large timeout.
   */

  var raf = inBrowser && window.requestAnimationFrame;
  var waitForTransitionStart = raf
  /* istanbul ignore next */
  ? function (fn) {
    raf(function () {
      raf(fn);
    });
  } : function (fn) {
    setTimeout(fn, 50);
  };

  /**
   * A Transition object that encapsulates the state and logic
   * of the transition.
   *
   * @param {Element} el
   * @param {String} id
   * @param {Object} hooks
   * @param {Vue} vm
   */
  function Transition(el, id, hooks, vm) {
    this.id = id;
    this.el = el;
    this.enterClass = hooks && hooks.enterClass || id + '-enter';
    this.leaveClass = hooks && hooks.leaveClass || id + '-leave';
    this.hooks = hooks;
    this.vm = vm;
    // async state
    this.pendingCssEvent = this.pendingCssCb = this.cancel = this.pendingJsCb = this.op = this.cb = null;
    this.justEntered = false;
    this.entered = this.left = false;
    this.typeCache = {};
    // check css transition type
    this.type = hooks && hooks.type;
    /* istanbul ignore if */
    if ('development' !== 'production') {
      if (this.type && this.type !== TYPE_TRANSITION && this.type !== TYPE_ANIMATION) {
        warn('invalid CSS transition type for transition="' + this.id + '": ' + this.type, vm);
      }
    }
    // bind
    var self = this;['enterNextTick', 'enterDone', 'leaveNextTick', 'leaveDone'].forEach(function (m) {
      self[m] = bind(self[m], self);
    });
  }

  var p$1 = Transition.prototype;

  /**
   * Start an entering transition.
   *
   * 1. enter transition triggered
   * 2. call beforeEnter hook
   * 3. add enter class
   * 4. insert/show element
   * 5. call enter hook (with possible explicit js callback)
   * 6. reflow
   * 7. based on transition type:
   *    - transition:
   *        remove class now, wait for transitionend,
   *        then done if there's no explicit js callback.
   *    - animation:
   *        wait for animationend, remove class,
   *        then done if there's no explicit js callback.
   *    - no css transition:
   *        done now if there's no explicit js callback.
   * 8. wait for either done or js callback, then call
   *    afterEnter hook.
   *
   * @param {Function} op - insert/show the element
   * @param {Function} [cb]
   */

  p$1.enter = function (op, cb) {
    this.cancelPending();
    this.callHook('beforeEnter');
    this.cb = cb;
    addClass(this.el, this.enterClass);
    op();
    this.entered = false;
    this.callHookWithCb('enter');
    if (this.entered) {
      return; // user called done synchronously.
    }
    this.cancel = this.hooks && this.hooks.enterCancelled;
    pushJob(this.enterNextTick);
  };

  /**
   * The "nextTick" phase of an entering transition, which is
   * to be pushed into a queue and executed after a reflow so
   * that removing the class can trigger a CSS transition.
   */

  p$1.enterNextTick = function () {
    var _this = this;

    // prevent transition skipping
    this.justEntered = true;
    waitForTransitionStart(function () {
      _this.justEntered = false;
    });
    var enterDone = this.enterDone;
    var type = this.getCssTransitionType(this.enterClass);
    if (!this.pendingJsCb) {
      if (type === TYPE_TRANSITION) {
        // trigger transition by removing enter class now
        removeClass(this.el, this.enterClass);
        this.setupCssCb(transitionEndEvent, enterDone);
      } else if (type === TYPE_ANIMATION) {
        this.setupCssCb(animationEndEvent, enterDone);
      } else {
        enterDone();
      }
    } else if (type === TYPE_TRANSITION) {
      removeClass(this.el, this.enterClass);
    }
  };

  /**
   * The "cleanup" phase of an entering transition.
   */

  p$1.enterDone = function () {
    this.entered = true;
    this.cancel = this.pendingJsCb = null;
    removeClass(this.el, this.enterClass);
    this.callHook('afterEnter');
    if (this.cb) this.cb();
  };

  /**
   * Start a leaving transition.
   *
   * 1. leave transition triggered.
   * 2. call beforeLeave hook
   * 3. add leave class (trigger css transition)
   * 4. call leave hook (with possible explicit js callback)
   * 5. reflow if no explicit js callback is provided
   * 6. based on transition type:
   *    - transition or animation:
   *        wait for end event, remove class, then done if
   *        there's no explicit js callback.
   *    - no css transition:
   *        done if there's no explicit js callback.
   * 7. wait for either done or js callback, then call
   *    afterLeave hook.
   *
   * @param {Function} op - remove/hide the element
   * @param {Function} [cb]
   */

  p$1.leave = function (op, cb) {
    this.cancelPending();
    this.callHook('beforeLeave');
    this.op = op;
    this.cb = cb;
    addClass(this.el, this.leaveClass);
    this.left = false;
    this.callHookWithCb('leave');
    if (this.left) {
      return; // user called done synchronously.
    }
    this.cancel = this.hooks && this.hooks.leaveCancelled;
    // only need to handle leaveDone if
    // 1. the transition is already done (synchronously called
    //    by the user, which causes this.op set to null)
    // 2. there's no explicit js callback
    if (this.op && !this.pendingJsCb) {
      // if a CSS transition leaves immediately after enter,
      // the transitionend event never fires. therefore we
      // detect such cases and end the leave immediately.
      if (this.justEntered) {
        this.leaveDone();
      } else {
        pushJob(this.leaveNextTick);
      }
    }
  };

  /**
   * The "nextTick" phase of a leaving transition.
   */

  p$1.leaveNextTick = function () {
    var type = this.getCssTransitionType(this.leaveClass);
    if (type) {
      var event = type === TYPE_TRANSITION ? transitionEndEvent : animationEndEvent;
      this.setupCssCb(event, this.leaveDone);
    } else {
      this.leaveDone();
    }
  };

  /**
   * The "cleanup" phase of a leaving transition.
   */

  p$1.leaveDone = function () {
    this.left = true;
    this.cancel = this.pendingJsCb = null;
    this.op();
    removeClass(this.el, this.leaveClass);
    this.callHook('afterLeave');
    if (this.cb) this.cb();
    this.op = null;
  };

  /**
   * Cancel any pending callbacks from a previously running
   * but not finished transition.
   */

  p$1.cancelPending = function () {
    this.op = this.cb = null;
    var hasPending = false;
    if (this.pendingCssCb) {
      hasPending = true;
      off(this.el, this.pendingCssEvent, this.pendingCssCb);
      this.pendingCssEvent = this.pendingCssCb = null;
    }
    if (this.pendingJsCb) {
      hasPending = true;
      this.pendingJsCb.cancel();
      this.pendingJsCb = null;
    }
    if (hasPending) {
      removeClass(this.el, this.enterClass);
      removeClass(this.el, this.leaveClass);
    }
    if (this.cancel) {
      this.cancel.call(this.vm, this.el);
      this.cancel = null;
    }
  };

  /**
   * Call a user-provided synchronous hook function.
   *
   * @param {String} type
   */

  p$1.callHook = function (type) {
    if (this.hooks && this.hooks[type]) {
      this.hooks[type].call(this.vm, this.el);
    }
  };

  /**
   * Call a user-provided, potentially-async hook function.
   * We check for the length of arguments to see if the hook
   * expects a `done` callback. If true, the transition's end
   * will be determined by when the user calls that callback;
   * otherwise, the end is determined by the CSS transition or
   * animation.
   *
   * @param {String} type
   */

  p$1.callHookWithCb = function (type) {
    var hook = this.hooks && this.hooks[type];
    if (hook) {
      if (hook.length > 1) {
        this.pendingJsCb = cancellable(this[type + 'Done']);
      }
      hook.call(this.vm, this.el, this.pendingJsCb);
    }
  };

  /**
   * Get an element's transition type based on the
   * calculated styles.
   *
   * @param {String} className
   * @return {Number}
   */

  p$1.getCssTransitionType = function (className) {
    /* istanbul ignore if */
    if (!transitionEndEvent ||
    // skip CSS transitions if page is not visible -
    // this solves the issue of transitionend events not
    // firing until the page is visible again.
    // pageVisibility API is supported in IE10+, same as
    // CSS transitions.
    document.hidden ||
    // explicit js-only transition
    this.hooks && this.hooks.css === false ||
    // element is hidden
    isHidden(this.el)) {
      return;
    }
    var type = this.type || this.typeCache[className];
    if (type) return type;
    var inlineStyles = this.el.style;
    var computedStyles = window.getComputedStyle(this.el);
    var transDuration = inlineStyles[transDurationProp] || computedStyles[transDurationProp];
    if (transDuration && transDuration !== '0s') {
      type = TYPE_TRANSITION;
    } else {
      var animDuration = inlineStyles[animDurationProp] || computedStyles[animDurationProp];
      if (animDuration && animDuration !== '0s') {
        type = TYPE_ANIMATION;
      }
    }
    if (type) {
      this.typeCache[className] = type;
    }
    return type;
  };

  /**
   * Setup a CSS transitionend/animationend callback.
   *
   * @param {String} event
   * @param {Function} cb
   */

  p$1.setupCssCb = function (event, cb) {
    this.pendingCssEvent = event;
    var self = this;
    var el = this.el;
    var onEnd = this.pendingCssCb = function (e) {
      if (e.target === el) {
        off(el, event, onEnd);
        self.pendingCssEvent = self.pendingCssCb = null;
        if (!self.pendingJsCb && cb) {
          cb();
        }
      }
    };
    on(el, event, onEnd);
  };

  /**
   * Check if an element is hidden - in that case we can just
   * skip the transition alltogether.
   *
   * @param {Element} el
   * @return {Boolean}
   */

  function isHidden(el) {
    if (/svg$/.test(el.namespaceURI)) {
      // SVG elements do not have offset(Width|Height)
      // so we need to check the client rect
      var rect = el.getBoundingClientRect();
      return !(rect.width || rect.height);
    } else {
      return !(el.offsetWidth || el.offsetHeight || el.getClientRects().length);
    }
  }

  var transition$1 = {

    priority: TRANSITION,

    update: function update(id, oldId) {
      var el = this.el;
      // resolve on owner vm
      var hooks = resolveAsset(this.vm.$options, 'transitions', id);
      id = id || 'v';
      oldId = oldId || 'v';
      el.__v_trans = new Transition(el, id, hooks, this.vm);
      removeClass(el, oldId + '-transition');
      addClass(el, id + '-transition');
    }
  };

  var internalDirectives = {
    style: style,
    'class': vClass,
    component: component,
    prop: propDef,
    transition: transition$1
  };

  // special binding prefixes
  var bindRE = /^v-bind:|^:/;
  var onRE = /^v-on:|^@/;
  var dirAttrRE = /^v-([^:]+)(?:$|:(.*)$)/;
  var modifierRE = /\.[^\.]+/g;
  var transitionRE = /^(v-bind:|:)?transition$/;

  // default directive priority
  var DEFAULT_PRIORITY = 1000;
  var DEFAULT_TERMINAL_PRIORITY = 2000;

  /**
   * Compile a template and return a reusable composite link
   * function, which recursively contains more link functions
   * inside. This top level compile function would normally
   * be called on instance root nodes, but can also be used
   * for partial compilation if the partial argument is true.
   *
   * The returned composite link function, when called, will
   * return an unlink function that tearsdown all directives
   * created during the linking phase.
   *
   * @param {Element|DocumentFragment} el
   * @param {Object} options
   * @param {Boolean} partial
   * @return {Function}
   */

  function compile(el, options, partial) {
    // link function for the node itself.
    var nodeLinkFn = partial || !options._asComponent ? compileNode(el, options) : null;
    // link function for the childNodes
    var childLinkFn = !(nodeLinkFn && nodeLinkFn.terminal) && !isScript(el) && el.hasChildNodes() ? compileNodeList(el.childNodes, options) : null;

    /**
     * A composite linker function to be called on a already
     * compiled piece of DOM, which instantiates all directive
     * instances.
     *
     * @param {Vue} vm
     * @param {Element|DocumentFragment} el
     * @param {Vue} [host] - host vm of transcluded content
     * @param {Object} [scope] - v-for scope
     * @param {Fragment} [frag] - link context fragment
     * @return {Function|undefined}
     */

    return function compositeLinkFn(vm, el, host, scope, frag) {
      // cache childNodes before linking parent, fix #657
      var childNodes = toArray(el.childNodes);
      // link
      var dirs = linkAndCapture(function compositeLinkCapturer() {
        if (nodeLinkFn) nodeLinkFn(vm, el, host, scope, frag);
        if (childLinkFn) childLinkFn(vm, childNodes, host, scope, frag);
      }, vm);
      return makeUnlinkFn(vm, dirs);
    };
  }

  /**
   * Apply a linker to a vm/element pair and capture the
   * directives created during the process.
   *
   * @param {Function} linker
   * @param {Vue} vm
   */

  function linkAndCapture(linker, vm) {
    /* istanbul ignore if */
    if ('development' === 'production') {}
    var originalDirCount = vm._directives.length;
    linker();
    var dirs = vm._directives.slice(originalDirCount);
    dirs.sort(directiveComparator);
    for (var i = 0, l = dirs.length; i < l; i++) {
      dirs[i]._bind();
    }
    return dirs;
  }

  /**
   * Directive priority sort comparator
   *
   * @param {Object} a
   * @param {Object} b
   */

  function directiveComparator(a, b) {
    a = a.descriptor.def.priority || DEFAULT_PRIORITY;
    b = b.descriptor.def.priority || DEFAULT_PRIORITY;
    return a > b ? -1 : a === b ? 0 : 1;
  }

  /**
   * Linker functions return an unlink function that
   * tearsdown all directives instances generated during
   * the process.
   *
   * We create unlink functions with only the necessary
   * information to avoid retaining additional closures.
   *
   * @param {Vue} vm
   * @param {Array} dirs
   * @param {Vue} [context]
   * @param {Array} [contextDirs]
   * @return {Function}
   */

  function makeUnlinkFn(vm, dirs, context, contextDirs) {
    function unlink(destroying) {
      teardownDirs(vm, dirs, destroying);
      if (context && contextDirs) {
        teardownDirs(context, contextDirs);
      }
    }
    // expose linked directives
    unlink.dirs = dirs;
    return unlink;
  }

  /**
   * Teardown partial linked directives.
   *
   * @param {Vue} vm
   * @param {Array} dirs
   * @param {Boolean} destroying
   */

  function teardownDirs(vm, dirs, destroying) {
    var i = dirs.length;
    while (i--) {
      dirs[i]._teardown();
      if ('development' !== 'production' && !destroying) {
        vm._directives.$remove(dirs[i]);
      }
    }
  }

  /**
   * Compile link props on an instance.
   *
   * @param {Vue} vm
   * @param {Element} el
   * @param {Object} props
   * @param {Object} [scope]
   * @return {Function}
   */

  function compileAndLinkProps(vm, el, props, scope) {
    var propsLinkFn = compileProps(el, props, vm);
    var propDirs = linkAndCapture(function () {
      propsLinkFn(vm, scope);
    }, vm);
    return makeUnlinkFn(vm, propDirs);
  }

  /**
   * Compile the root element of an instance.
   *
   * 1. attrs on context container (context scope)
   * 2. attrs on the component template root node, if
   *    replace:true (child scope)
   *
   * If this is a fragment instance, we only need to compile 1.
   *
   * @param {Element} el
   * @param {Object} options
   * @param {Object} contextOptions
   * @return {Function}
   */

  function compileRoot(el, options, contextOptions) {
    var containerAttrs = options._containerAttrs;
    var replacerAttrs = options._replacerAttrs;
    var contextLinkFn, replacerLinkFn;

    // only need to compile other attributes for
    // non-fragment instances
    if (el.nodeType !== 11) {
      // for components, container and replacer need to be
      // compiled separately and linked in different scopes.
      if (options._asComponent) {
        // 2. container attributes
        if (containerAttrs && contextOptions) {
          contextLinkFn = compileDirectives(containerAttrs, contextOptions);
        }
        if (replacerAttrs) {
          // 3. replacer attributes
          replacerLinkFn = compileDirectives(replacerAttrs, options);
        }
      } else {
        // non-component, just compile as a normal element.
        replacerLinkFn = compileDirectives(el.attributes, options);
      }
    } else if ('development' !== 'production' && containerAttrs) {
      // warn container directives for fragment instances
      var names = containerAttrs.filter(function (attr) {
        // allow vue-loader/vueify scoped css attributes
        return attr.name.indexOf('_v-') < 0 &&
        // allow event listeners
        !onRE.test(attr.name) &&
        // allow slots
        attr.name !== 'slot';
      }).map(function (attr) {
        return '"' + attr.name + '"';
      });
      if (names.length) {
        var plural = names.length > 1;
        warn('Attribute' + (plural ? 's ' : ' ') + names.join(', ') + (plural ? ' are' : ' is') + ' ignored on component ' + '<' + options.el.tagName.toLowerCase() + '> because ' + 'the component is a fragment instance: ' + 'http://vuejs.org/guide/components.html#Fragment-Instance');
      }
    }

    options._containerAttrs = options._replacerAttrs = null;
    return function rootLinkFn(vm, el, scope) {
      // link context scope dirs
      var context = vm._context;
      var contextDirs;
      if (context && contextLinkFn) {
        contextDirs = linkAndCapture(function () {
          contextLinkFn(context, el, null, scope);
        }, context);
      }

      // link self
      var selfDirs = linkAndCapture(function () {
        if (replacerLinkFn) replacerLinkFn(vm, el);
      }, vm);

      // return the unlink function that tearsdown context
      // container directives.
      return makeUnlinkFn(vm, selfDirs, context, contextDirs);
    };
  }

  /**
   * Compile a node and return a nodeLinkFn based on the
   * node type.
   *
   * @param {Node} node
   * @param {Object} options
   * @return {Function|null}
   */

  function compileNode(node, options) {
    var type = node.nodeType;
    if (type === 1 && !isScript(node)) {
      return compileElement(node, options);
    } else if (type === 3 && node.data.trim()) {
      return compileTextNode(node, options);
    } else {
      return null;
    }
  }

  /**
   * Compile an element and return a nodeLinkFn.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Function|null}
   */

  function compileElement(el, options) {
    // preprocess textareas.
    // textarea treats its text content as the initial value.
    // just bind it as an attr directive for value.
    if (el.tagName === 'TEXTAREA') {
      var tokens = parseText(el.value);
      if (tokens) {
        el.setAttribute(':value', tokensToExp(tokens));
        el.value = '';
      }
    }
    var linkFn;
    var hasAttrs = el.hasAttributes();
    var attrs = hasAttrs && toArray(el.attributes);
    // check terminal directives (for & if)
    if (hasAttrs) {
      linkFn = checkTerminalDirectives(el, attrs, options);
    }
    // check element directives
    if (!linkFn) {
      linkFn = checkElementDirectives(el, options);
    }
    // check component
    if (!linkFn) {
      linkFn = checkComponent(el, options);
    }
    // normal directives
    if (!linkFn && hasAttrs) {
      linkFn = compileDirectives(attrs, options);
    }
    return linkFn;
  }

  /**
   * Compile a textNode and return a nodeLinkFn.
   *
   * @param {TextNode} node
   * @param {Object} options
   * @return {Function|null} textNodeLinkFn
   */

  function compileTextNode(node, options) {
    // skip marked text nodes
    if (node._skip) {
      return removeText;
    }

    var tokens = parseText(node.wholeText);
    if (!tokens) {
      return null;
    }

    // mark adjacent text nodes as skipped,
    // because we are using node.wholeText to compile
    // all adjacent text nodes together. This fixes
    // issues in IE where sometimes it splits up a single
    // text node into multiple ones.
    var next = node.nextSibling;
    while (next && next.nodeType === 3) {
      next._skip = true;
      next = next.nextSibling;
    }

    var frag = document.createDocumentFragment();
    var el, token;
    for (var i = 0, l = tokens.length; i < l; i++) {
      token = tokens[i];
      el = token.tag ? processTextToken(token, options) : document.createTextNode(token.value);
      frag.appendChild(el);
    }
    return makeTextNodeLinkFn(tokens, frag, options);
  }

  /**
   * Linker for an skipped text node.
   *
   * @param {Vue} vm
   * @param {Text} node
   */

  function removeText(vm, node) {
    remove(node);
  }

  /**
   * Process a single text token.
   *
   * @param {Object} token
   * @param {Object} options
   * @return {Node}
   */

  function processTextToken(token, options) {
    var el;
    if (token.oneTime) {
      el = document.createTextNode(token.value);
    } else {
      if (token.html) {
        el = document.createComment('v-html');
        setTokenType('html');
      } else {
        // IE will clean up empty textNodes during
        // frag.cloneNode(true), so we have to give it
        // something here...
        el = document.createTextNode(' ');
        setTokenType('text');
      }
    }
    function setTokenType(type) {
      if (token.descriptor) return;
      var parsed = parseDirective(token.value);
      token.descriptor = {
        name: type,
        def: directives[type],
        expression: parsed.expression,
        filters: parsed.filters
      };
    }
    return el;
  }

  /**
   * Build a function that processes a textNode.
   *
   * @param {Array<Object>} tokens
   * @param {DocumentFragment} frag
   */

  function makeTextNodeLinkFn(tokens, frag) {
    return function textNodeLinkFn(vm, el, host, scope) {
      var fragClone = frag.cloneNode(true);
      var childNodes = toArray(fragClone.childNodes);
      var token, value, node;
      for (var i = 0, l = tokens.length; i < l; i++) {
        token = tokens[i];
        value = token.value;
        if (token.tag) {
          node = childNodes[i];
          if (token.oneTime) {
            value = (scope || vm).$eval(value);
            if (token.html) {
              replace(node, parseTemplate(value, true));
            } else {
              node.data = _toString(value);
            }
          } else {
            vm._bindDir(token.descriptor, node, host, scope);
          }
        }
      }
      replace(el, fragClone);
    };
  }

  /**
   * Compile a node list and return a childLinkFn.
   *
   * @param {NodeList} nodeList
   * @param {Object} options
   * @return {Function|undefined}
   */

  function compileNodeList(nodeList, options) {
    var linkFns = [];
    var nodeLinkFn, childLinkFn, node;
    for (var i = 0, l = nodeList.length; i < l; i++) {
      node = nodeList[i];
      nodeLinkFn = compileNode(node, options);
      childLinkFn = !(nodeLinkFn && nodeLinkFn.terminal) && node.tagName !== 'SCRIPT' && node.hasChildNodes() ? compileNodeList(node.childNodes, options) : null;
      linkFns.push(nodeLinkFn, childLinkFn);
    }
    return linkFns.length ? makeChildLinkFn(linkFns) : null;
  }

  /**
   * Make a child link function for a node's childNodes.
   *
   * @param {Array<Function>} linkFns
   * @return {Function} childLinkFn
   */

  function makeChildLinkFn(linkFns) {
    return function childLinkFn(vm, nodes, host, scope, frag) {
      var node, nodeLinkFn, childrenLinkFn;
      for (var i = 0, n = 0, l = linkFns.length; i < l; n++) {
        node = nodes[n];
        nodeLinkFn = linkFns[i++];
        childrenLinkFn = linkFns[i++];
        // cache childNodes before linking parent, fix #657
        var childNodes = toArray(node.childNodes);
        if (nodeLinkFn) {
          nodeLinkFn(vm, node, host, scope, frag);
        }
        if (childrenLinkFn) {
          childrenLinkFn(vm, childNodes, host, scope, frag);
        }
      }
    };
  }

  /**
   * Check for element directives (custom elements that should
   * be resovled as terminal directives).
   *
   * @param {Element} el
   * @param {Object} options
   */

  function checkElementDirectives(el, options) {
    var tag = el.tagName.toLowerCase();
    if (commonTagRE.test(tag)) {
      return;
    }
    var def = resolveAsset(options, 'elementDirectives', tag);
    if (def) {
      return makeTerminalNodeLinkFn(el, tag, '', options, def);
    }
  }

  /**
   * Check if an element is a component. If yes, return
   * a component link function.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Function|undefined}
   */

  function checkComponent(el, options) {
    var component = checkComponentAttr(el, options);
    if (component) {
      var ref = findRef(el);
      var descriptor = {
        name: 'component',
        ref: ref,
        expression: component.id,
        def: internalDirectives.component,
        modifiers: {
          literal: !component.dynamic
        }
      };
      var componentLinkFn = function componentLinkFn(vm, el, host, scope, frag) {
        if (ref) {
          defineReactive((scope || vm).$refs, ref, null);
        }
        vm._bindDir(descriptor, el, host, scope, frag);
      };
      componentLinkFn.terminal = true;
      return componentLinkFn;
    }
  }

  /**
   * Check an element for terminal directives in fixed order.
   * If it finds one, return a terminal link function.
   *
   * @param {Element} el
   * @param {Array} attrs
   * @param {Object} options
   * @return {Function} terminalLinkFn
   */

  function checkTerminalDirectives(el, attrs, options) {
    // skip v-pre
    if (getAttr(el, 'v-pre') !== null) {
      return skip;
    }
    // skip v-else block, but only if following v-if
    if (el.hasAttribute('v-else')) {
      var prev = el.previousElementSibling;
      if (prev && prev.hasAttribute('v-if')) {
        return skip;
      }
    }

    var attr, name, value, modifiers, matched, dirName, rawName, arg, def, termDef;
    for (var i = 0, j = attrs.length; i < j; i++) {
      attr = attrs[i];
      name = attr.name.replace(modifierRE, '');
      if (matched = name.match(dirAttrRE)) {
        def = resolveAsset(options, 'directives', matched[1]);
        if (def && def.terminal) {
          if (!termDef || (def.priority || DEFAULT_TERMINAL_PRIORITY) > termDef.priority) {
            termDef = def;
            rawName = attr.name;
            modifiers = parseModifiers(attr.name);
            value = attr.value;
            dirName = matched[1];
            arg = matched[2];
          }
        }
      }
    }

    if (termDef) {
      return makeTerminalNodeLinkFn(el, dirName, value, options, termDef, rawName, arg, modifiers);
    }
  }

  function skip() {}
  skip.terminal = true;

  /**
   * Build a node link function for a terminal directive.
   * A terminal link function terminates the current
   * compilation recursion and handles compilation of the
   * subtree in the directive.
   *
   * @param {Element} el
   * @param {String} dirName
   * @param {String} value
   * @param {Object} options
   * @param {Object} def
   * @param {String} [rawName]
   * @param {String} [arg]
   * @param {Object} [modifiers]
   * @return {Function} terminalLinkFn
   */

  function makeTerminalNodeLinkFn(el, dirName, value, options, def, rawName, arg, modifiers) {
    var parsed = parseDirective(value);
    var descriptor = {
      name: dirName,
      arg: arg,
      expression: parsed.expression,
      filters: parsed.filters,
      raw: value,
      attr: rawName,
      modifiers: modifiers,
      def: def
    };
    // check ref for v-for and router-view
    if (dirName === 'for' || dirName === 'router-view') {
      descriptor.ref = findRef(el);
    }
    var fn = function terminalNodeLinkFn(vm, el, host, scope, frag) {
      if (descriptor.ref) {
        defineReactive((scope || vm).$refs, descriptor.ref, null);
      }
      vm._bindDir(descriptor, el, host, scope, frag);
    };
    fn.terminal = true;
    return fn;
  }

  /**
   * Compile the directives on an element and return a linker.
   *
   * @param {Array|NamedNodeMap} attrs
   * @param {Object} options
   * @return {Function}
   */

  function compileDirectives(attrs, options) {
    var i = attrs.length;
    var dirs = [];
    var attr, name, value, rawName, rawValue, dirName, arg, modifiers, dirDef, tokens, matched;
    while (i--) {
      attr = attrs[i];
      name = rawName = attr.name;
      value = rawValue = attr.value;
      tokens = parseText(value);
      // reset arg
      arg = null;
      // check modifiers
      modifiers = parseModifiers(name);
      name = name.replace(modifierRE, '');

      // attribute interpolations
      if (tokens) {
        value = tokensToExp(tokens);
        arg = name;
        pushDir('bind', directives.bind, tokens);
        // warn against mixing mustaches with v-bind
        if ('development' !== 'production') {
          if (name === 'class' && Array.prototype.some.call(attrs, function (attr) {
            return attr.name === ':class' || attr.name === 'v-bind:class';
          })) {
            warn('class="' + rawValue + '": Do not mix mustache interpolation ' + 'and v-bind for "class" on the same element. Use one or the other.', options);
          }
        }
      } else

        // special attribute: transition
        if (transitionRE.test(name)) {
          modifiers.literal = !bindRE.test(name);
          pushDir('transition', internalDirectives.transition);
        } else

          // event handlers
          if (onRE.test(name)) {
            arg = name.replace(onRE, '');
            pushDir('on', directives.on);
          } else

            // attribute bindings
            if (bindRE.test(name)) {
              dirName = name.replace(bindRE, '');
              if (dirName === 'style' || dirName === 'class') {
                pushDir(dirName, internalDirectives[dirName]);
              } else {
                arg = dirName;
                pushDir('bind', directives.bind);
              }
            } else

              // normal directives
              if (matched = name.match(dirAttrRE)) {
                dirName = matched[1];
                arg = matched[2];

                // skip v-else (when used with v-show)
                if (dirName === 'else') {
                  continue;
                }

                dirDef = resolveAsset(options, 'directives', dirName, true);
                if (dirDef) {
                  pushDir(dirName, dirDef);
                }
              }
    }

    /**
     * Push a directive.
     *
     * @param {String} dirName
     * @param {Object|Function} def
     * @param {Array} [interpTokens]
     */

    function pushDir(dirName, def, interpTokens) {
      var hasOneTimeToken = interpTokens && hasOneTime(interpTokens);
      var parsed = !hasOneTimeToken && parseDirective(value);
      dirs.push({
        name: dirName,
        attr: rawName,
        raw: rawValue,
        def: def,
        arg: arg,
        modifiers: modifiers,
        // conversion from interpolation strings with one-time token
        // to expression is differed until directive bind time so that we
        // have access to the actual vm context for one-time bindings.
        expression: parsed && parsed.expression,
        filters: parsed && parsed.filters,
        interp: interpTokens,
        hasOneTime: hasOneTimeToken
      });
    }

    if (dirs.length) {
      return makeNodeLinkFn(dirs);
    }
  }

  /**
   * Parse modifiers from directive attribute name.
   *
   * @param {String} name
   * @return {Object}
   */

  function parseModifiers(name) {
    var res = Object.create(null);
    var match = name.match(modifierRE);
    if (match) {
      var i = match.length;
      while (i--) {
        res[match[i].slice(1)] = true;
      }
    }
    return res;
  }

  /**
   * Build a link function for all directives on a single node.
   *
   * @param {Array} directives
   * @return {Function} directivesLinkFn
   */

  function makeNodeLinkFn(directives) {
    return function nodeLinkFn(vm, el, host, scope, frag) {
      // reverse apply because it's sorted low to high
      var i = directives.length;
      while (i--) {
        vm._bindDir(directives[i], el, host, scope, frag);
      }
    };
  }

  /**
   * Check if an interpolation string contains one-time tokens.
   *
   * @param {Array} tokens
   * @return {Boolean}
   */

  function hasOneTime(tokens) {
    var i = tokens.length;
    while (i--) {
      if (tokens[i].oneTime) return true;
    }
  }

  function isScript(el) {
    return el.tagName === 'SCRIPT' && (!el.hasAttribute('type') || el.getAttribute('type') === 'text/javascript');
  }

  var specialCharRE = /[^\w\-:\.]/;

  /**
   * Process an element or a DocumentFragment based on a
   * instance option object. This allows us to transclude
   * a template node/fragment before the instance is created,
   * so the processed fragment can then be cloned and reused
   * in v-for.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Element|DocumentFragment}
   */

  function transclude(el, options) {
    // extract container attributes to pass them down
    // to compiler, because they need to be compiled in
    // parent scope. we are mutating the options object here
    // assuming the same object will be used for compile
    // right after this.
    if (options) {
      options._containerAttrs = extractAttrs(el);
    }
    // for template tags, what we want is its content as
    // a documentFragment (for fragment instances)
    if (isTemplate(el)) {
      el = parseTemplate(el);
    }
    if (options) {
      if (options._asComponent && !options.template) {
        options.template = '<slot></slot>';
      }
      if (options.template) {
        options._content = extractContent(el);
        el = transcludeTemplate(el, options);
      }
    }
    if (isFragment(el)) {
      // anchors for fragment instance
      // passing in `persist: true` to avoid them being
      // discarded by IE during template cloning
      prepend(createAnchor('v-start', true), el);
      el.appendChild(createAnchor('v-end', true));
    }
    return el;
  }

  /**
   * Process the template option.
   * If the replace option is true this will swap the $el.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Element|DocumentFragment}
   */

  function transcludeTemplate(el, options) {
    var template = options.template;
    var frag = parseTemplate(template, true);
    if (frag) {
      var replacer = frag.firstChild;
      var tag = replacer.tagName && replacer.tagName.toLowerCase();
      if (options.replace) {
        /* istanbul ignore if */
        if (el === document.body) {
          'development' !== 'production' && warn('You are mounting an instance with a template to ' + '<body>. This will replace <body> entirely. You ' + 'should probably use `replace: false` here.');
        }
        // there are many cases where the instance must
        // become a fragment instance: basically anything that
        // can create more than 1 root nodes.
        if (
        // multi-children template
        frag.childNodes.length > 1 ||
        // non-element template
        replacer.nodeType !== 1 ||
        // single nested component
        tag === 'component' || resolveAsset(options, 'components', tag) || hasBindAttr(replacer, 'is') ||
        // element directive
        resolveAsset(options, 'elementDirectives', tag) ||
        // for block
        replacer.hasAttribute('v-for') ||
        // if block
        replacer.hasAttribute('v-if')) {
          return frag;
        } else {
          options._replacerAttrs = extractAttrs(replacer);
          mergeAttrs(el, replacer);
          return replacer;
        }
      } else {
        el.appendChild(frag);
        return el;
      }
    } else {
      'development' !== 'production' && warn('Invalid template option: ' + template);
    }
  }

  /**
   * Helper to extract a component container's attributes
   * into a plain object array.
   *
   * @param {Element} el
   * @return {Array}
   */

  function extractAttrs(el) {
    if (el.nodeType === 1 && el.hasAttributes()) {
      return toArray(el.attributes);
    }
  }

  /**
   * Merge the attributes of two elements, and make sure
   * the class names are merged properly.
   *
   * @param {Element} from
   * @param {Element} to
   */

  function mergeAttrs(from, to) {
    var attrs = from.attributes;
    var i = attrs.length;
    var name, value;
    while (i--) {
      name = attrs[i].name;
      value = attrs[i].value;
      if (!to.hasAttribute(name) && !specialCharRE.test(name)) {
        to.setAttribute(name, value);
      } else if (name === 'class' && !parseText(value) && (value = value.trim())) {
        value.split(/\s+/).forEach(function (cls) {
          addClass(to, cls);
        });
      }
    }
  }

  /**
   * Scan and determine slot content distribution.
   * We do this during transclusion instead at compile time so that
   * the distribution is decoupled from the compilation order of
   * the slots.
   *
   * @param {Element|DocumentFragment} template
   * @param {Element} content
   * @param {Vue} vm
   */

  function resolveSlots(vm, content) {
    if (!content) {
      return;
    }
    var contents = vm._slotContents = Object.create(null);
    var el, name;
    for (var i = 0, l = content.children.length; i < l; i++) {
      el = content.children[i];
      /* eslint-disable no-cond-assign */
      if (name = el.getAttribute('slot')) {
        (contents[name] || (contents[name] = [])).push(el);
      }
      /* eslint-enable no-cond-assign */
      if ('development' !== 'production' && getBindAttr(el, 'slot')) {
        warn('The "slot" attribute must be static.', vm.$parent);
      }
    }
    for (name in contents) {
      contents[name] = extractFragment(contents[name], content);
    }
    if (content.hasChildNodes()) {
      var nodes = content.childNodes;
      if (nodes.length === 1 && nodes[0].nodeType === 3 && !nodes[0].data.trim()) {
        return;
      }
      contents['default'] = extractFragment(content.childNodes, content);
    }
  }

  /**
   * Extract qualified content nodes from a node list.
   *
   * @param {NodeList} nodes
   * @return {DocumentFragment}
   */

  function extractFragment(nodes, parent) {
    var frag = document.createDocumentFragment();
    nodes = toArray(nodes);
    for (var i = 0, l = nodes.length; i < l; i++) {
      var node = nodes[i];
      if (isTemplate(node) && !node.hasAttribute('v-if') && !node.hasAttribute('v-for')) {
        parent.removeChild(node);
        node = parseTemplate(node, true);
      }
      frag.appendChild(node);
    }
    return frag;
  }



  var compiler = Object.freeze({
  	compile: compile,
  	compileAndLinkProps: compileAndLinkProps,
  	compileRoot: compileRoot,
  	transclude: transclude,
  	resolveSlots: resolveSlots
  });

  function stateMixin (Vue) {
    /**
     * Accessor for `$data` property, since setting $data
     * requires observing the new object and updating
     * proxied properties.
     */

    Object.defineProperty(Vue.prototype, '$data', {
      get: function get() {
        return this._data;
      },
      set: function set(newData) {
        if (newData !== this._data) {
          this._setData(newData);
        }
      }
    });

    /**
     * Setup the scope of an instance, which contains:
     * - observed data
     * - computed properties
     * - user methods
     * - meta properties
     */

    Vue.prototype._initState = function () {
      this._initProps();
      this._initMeta();
      this._initMethods();
      this._initData();
      this._initComputed();
    };

    /**
     * Initialize props.
     */

    Vue.prototype._initProps = function () {
      var options = this.$options;
      var el = options.el;
      var props = options.props;
      if (props && !el) {
        'development' !== 'production' && warn('Props will not be compiled if no `el` option is ' + 'provided at instantiation.', this);
      }
      // make sure to convert string selectors into element now
      el = options.el = query(el);
      this._propsUnlinkFn = el && el.nodeType === 1 && props
      // props must be linked in proper scope if inside v-for
      ? compileAndLinkProps(this, el, props, this._scope) : null;
    };

    /**
     * Initialize the data.
     */

    Vue.prototype._initData = function () {
      var dataFn = this.$options.data;
      var data = this._data = dataFn ? dataFn() : {};
      if (!isPlainObject(data)) {
        data = {};
        'development' !== 'production' && warn('data functions should return an object.', this);
      }
      var props = this._props;
      // proxy data on instance
      var keys = Object.keys(data);
      var i, key;
      i = keys.length;
      while (i--) {
        key = keys[i];
        // there are two scenarios where we can proxy a data key:
        // 1. it's not already defined as a prop
        // 2. it's provided via a instantiation option AND there are no
        //    template prop present
        if (!props || !hasOwn(props, key)) {
          this._proxy(key);
        } else if ('development' !== 'production') {
          warn('Data field "' + key + '" is already defined ' + 'as a prop. To provide default value for a prop, use the "default" ' + 'prop option; if you want to pass prop values to an instantiation ' + 'call, use the "propsData" option.', this);
        }
      }
      // observe data
      observe(data, this);
    };

    /**
     * Swap the instance's $data. Called in $data's setter.
     *
     * @param {Object} newData
     */

    Vue.prototype._setData = function (newData) {
      newData = newData || {};
      var oldData = this._data;
      this._data = newData;
      var keys, key, i;
      // unproxy keys not present in new data
      keys = Object.keys(oldData);
      i = keys.length;
      while (i--) {
        key = keys[i];
        if (!(key in newData)) {
          this._unproxy(key);
        }
      }
      // proxy keys not already proxied,
      // and trigger change for changed values
      keys = Object.keys(newData);
      i = keys.length;
      while (i--) {
        key = keys[i];
        if (!hasOwn(this, key)) {
          // new property
          this._proxy(key);
        }
      }
      oldData.__ob__.removeVm(this);
      observe(newData, this);
      this._digest();
    };

    /**
     * Proxy a property, so that
     * vm.prop === vm._data.prop
     *
     * @param {String} key
     */

    Vue.prototype._proxy = function (key) {
      if (!isReserved(key)) {
        // need to store ref to self here
        // because these getter/setters might
        // be called by child scopes via
        // prototype inheritance.
        var self = this;
        Object.defineProperty(self, key, {
          configurable: true,
          enumerable: true,
          get: function proxyGetter() {
            return self._data[key];
          },
          set: function proxySetter(val) {
            self._data[key] = val;
          }
        });
      }
    };

    /**
     * Unproxy a property.
     *
     * @param {String} key
     */

    Vue.prototype._unproxy = function (key) {
      if (!isReserved(key)) {
        delete this[key];
      }
    };

    /**
     * Force update on every watcher in scope.
     */

    Vue.prototype._digest = function () {
      for (var i = 0, l = this._watchers.length; i < l; i++) {
        this._watchers[i].update(true); // shallow updates
      }
    };

    /**
     * Setup computed properties. They are essentially
     * special getter/setters
     */

    function noop() {}
    Vue.prototype._initComputed = function () {
      var computed = this.$options.computed;
      if (computed) {
        for (var key in computed) {
          var userDef = computed[key];
          var def = {
            enumerable: true,
            configurable: true
          };
          if (typeof userDef === 'function') {
            def.get = makeComputedGetter(userDef, this);
            def.set = noop;
          } else {
            def.get = userDef.get ? userDef.cache !== false ? makeComputedGetter(userDef.get, this) : bind(userDef.get, this) : noop;
            def.set = userDef.set ? bind(userDef.set, this) : noop;
          }
          Object.defineProperty(this, key, def);
        }
      }
    };

    function makeComputedGetter(getter, owner) {
      var watcher = new Watcher(owner, getter, null, {
        lazy: true
      });
      return function computedGetter() {
        if (watcher.dirty) {
          watcher.evaluate();
        }
        if (Dep.target) {
          watcher.depend();
        }
        return watcher.value;
      };
    }

    /**
     * Setup instance methods. Methods must be bound to the
     * instance since they might be passed down as a prop to
     * child components.
     */

    Vue.prototype._initMethods = function () {
      var methods = this.$options.methods;
      if (methods) {
        for (var key in methods) {
          this[key] = bind(methods[key], this);
        }
      }
    };

    /**
     * Initialize meta information like $index, $key & $value.
     */

    Vue.prototype._initMeta = function () {
      var metas = this.$options._meta;
      if (metas) {
        for (var key in metas) {
          defineReactive(this, key, metas[key]);
        }
      }
    };
  }

  var eventRE = /^v-on:|^@/;

  function eventsMixin (Vue) {
    /**
     * Setup the instance's option events & watchers.
     * If the value is a string, we pull it from the
     * instance's methods by name.
     */

    Vue.prototype._initEvents = function () {
      var options = this.$options;
      if (options._asComponent) {
        registerComponentEvents(this, options.el);
      }
      registerCallbacks(this, '$on', options.events);
      registerCallbacks(this, '$watch', options.watch);
    };

    /**
     * Register v-on events on a child component
     *
     * @param {Vue} vm
     * @param {Element} el
     */

    function registerComponentEvents(vm, el) {
      var attrs = el.attributes;
      var name, value, handler;
      for (var i = 0, l = attrs.length; i < l; i++) {
        name = attrs[i].name;
        if (eventRE.test(name)) {
          name = name.replace(eventRE, '');
          // force the expression into a statement so that
          // it always dynamically resolves the method to call (#2670)
          // kinda ugly hack, but does the job.
          value = attrs[i].value;
          if (isSimplePath(value)) {
            value += '.apply(this, $arguments)';
          }
          handler = (vm._scope || vm._context).$eval(value, true);
          handler._fromParent = true;
          vm.$on(name.replace(eventRE), handler);
        }
      }
    }

    /**
     * Register callbacks for option events and watchers.
     *
     * @param {Vue} vm
     * @param {String} action
     * @param {Object} hash
     */

    function registerCallbacks(vm, action, hash) {
      if (!hash) return;
      var handlers, key, i, j;
      for (key in hash) {
        handlers = hash[key];
        if (isArray(handlers)) {
          for (i = 0, j = handlers.length; i < j; i++) {
            register(vm, action, key, handlers[i]);
          }
        } else {
          register(vm, action, key, handlers);
        }
      }
    }

    /**
     * Helper to register an event/watch callback.
     *
     * @param {Vue} vm
     * @param {String} action
     * @param {String} key
     * @param {Function|String|Object} handler
     * @param {Object} [options]
     */

    function register(vm, action, key, handler, options) {
      var type = typeof handler;
      if (type === 'function') {
        vm[action](key, handler, options);
      } else if (type === 'string') {
        var methods = vm.$options.methods;
        var method = methods && methods[handler];
        if (method) {
          vm[action](key, method, options);
        } else {
          'development' !== 'production' && warn('Unknown method: "' + handler + '" when ' + 'registering callback for ' + action + ': "' + key + '".', vm);
        }
      } else if (handler && type === 'object') {
        register(vm, action, key, handler.handler, handler);
      }
    }

    /**
     * Setup recursive attached/detached calls
     */

    Vue.prototype._initDOMHooks = function () {
      this.$on('hook:attached', onAttached);
      this.$on('hook:detached', onDetached);
    };

    /**
     * Callback to recursively call attached hook on children
     */

    function onAttached() {
      if (!this._isAttached) {
        this._isAttached = true;
        this.$children.forEach(callAttach);
      }
    }

    /**
     * Iterator to call attached hook
     *
     * @param {Vue} child
     */

    function callAttach(child) {
      if (!child._isAttached && inDoc(child.$el)) {
        child._callHook('attached');
      }
    }

    /**
     * Callback to recursively call detached hook on children
     */

    function onDetached() {
      if (this._isAttached) {
        this._isAttached = false;
        this.$children.forEach(callDetach);
      }
    }

    /**
     * Iterator to call detached hook
     *
     * @param {Vue} child
     */

    function callDetach(child) {
      if (child._isAttached && !inDoc(child.$el)) {
        child._callHook('detached');
      }
    }

    /**
     * Trigger all handlers for a hook
     *
     * @param {String} hook
     */

    Vue.prototype._callHook = function (hook) {
      this.$emit('pre-hook:' + hook);
      var handlers = this.$options[hook];
      if (handlers) {
        for (var i = 0, j = handlers.length; i < j; i++) {
          handlers[i].call(this);
        }
      }
      this.$emit('hook:' + hook);
    };
  }

  function noop$1() {}

  /**
   * A directive links a DOM element with a piece of data,
   * which is the result of evaluating an expression.
   * It registers a watcher with the expression and calls
   * the DOM update function when a change is triggered.
   *
   * @param {Object} descriptor
   *                 - {String} name
   *                 - {Object} def
   *                 - {String} expression
   *                 - {Array<Object>} [filters]
   *                 - {Object} [modifiers]
   *                 - {Boolean} literal
   *                 - {String} attr
   *                 - {String} arg
   *                 - {String} raw
   *                 - {String} [ref]
   *                 - {Array<Object>} [interp]
   *                 - {Boolean} [hasOneTime]
   * @param {Vue} vm
   * @param {Node} el
   * @param {Vue} [host] - transclusion host component
   * @param {Object} [scope] - v-for scope
   * @param {Fragment} [frag] - owner fragment
   * @constructor
   */
  function Directive(descriptor, vm, el, host, scope, frag) {
    this.vm = vm;
    this.el = el;
    // copy descriptor properties
    this.descriptor = descriptor;
    this.name = descriptor.name;
    this.expression = descriptor.expression;
    this.arg = descriptor.arg;
    this.modifiers = descriptor.modifiers;
    this.filters = descriptor.filters;
    this.literal = this.modifiers && this.modifiers.literal;
    // private
    this._locked = false;
    this._bound = false;
    this._listeners = null;
    // link context
    this._host = host;
    this._scope = scope;
    this._frag = frag;
    // store directives on node in dev mode
    if ('development' !== 'production' && this.el) {
      this.el._vue_directives = this.el._vue_directives || [];
      this.el._vue_directives.push(this);
    }
  }

  /**
   * Initialize the directive, mixin definition properties,
   * setup the watcher, call definition bind() and update()
   * if present.
   */

  Directive.prototype._bind = function () {
    var name = this.name;
    var descriptor = this.descriptor;

    // remove attribute
    if ((name !== 'cloak' || this.vm._isCompiled) && this.el && this.el.removeAttribute) {
      var attr = descriptor.attr || 'v-' + name;
      this.el.removeAttribute(attr);
    }

    // copy def properties
    var def = descriptor.def;
    if (typeof def === 'function') {
      this.update = def;
    } else {
      extend(this, def);
    }

    // setup directive params
    this._setupParams();

    // initial bind
    if (this.bind) {
      this.bind();
    }
    this._bound = true;

    if (this.literal) {
      this.update && this.update(descriptor.raw);
    } else if ((this.expression || this.modifiers) && (this.update || this.twoWay) && !this._checkStatement()) {
      // wrapped updater for context
      var dir = this;
      if (this.update) {
        this._update = function (val, oldVal) {
          if (!dir._locked) {
            dir.update(val, oldVal);
          }
        };
      } else {
        this._update = noop$1;
      }
      var preProcess = this._preProcess ? bind(this._preProcess, this) : null;
      var postProcess = this._postProcess ? bind(this._postProcess, this) : null;
      var watcher = this._watcher = new Watcher(this.vm, this.expression, this._update, // callback
      {
        filters: this.filters,
        twoWay: this.twoWay,
        deep: this.deep,
        preProcess: preProcess,
        postProcess: postProcess,
        scope: this._scope
      });
      // v-model with inital inline value need to sync back to
      // model instead of update to DOM on init. They would
      // set the afterBind hook to indicate that.
      if (this.afterBind) {
        this.afterBind();
      } else if (this.update) {
        this.update(watcher.value);
      }
    }
  };

  /**
   * Setup all param attributes, e.g. track-by,
   * transition-mode, etc...
   */

  Directive.prototype._setupParams = function () {
    if (!this.params) {
      return;
    }
    var params = this.params;
    // swap the params array with a fresh object.
    this.params = Object.create(null);
    var i = params.length;
    var key, val, mappedKey;
    while (i--) {
      key = hyphenate(params[i]);
      mappedKey = camelize(key);
      val = getBindAttr(this.el, key);
      if (val != null) {
        // dynamic
        this._setupParamWatcher(mappedKey, val);
      } else {
        // static
        val = getAttr(this.el, key);
        if (val != null) {
          this.params[mappedKey] = val === '' ? true : val;
        }
      }
    }
  };

  /**
   * Setup a watcher for a dynamic param.
   *
   * @param {String} key
   * @param {String} expression
   */

  Directive.prototype._setupParamWatcher = function (key, expression) {
    var self = this;
    var called = false;
    var unwatch = (this._scope || this.vm).$watch(expression, function (val, oldVal) {
      self.params[key] = val;
      // since we are in immediate mode,
      // only call the param change callbacks if this is not the first update.
      if (called) {
        var cb = self.paramWatchers && self.paramWatchers[key];
        if (cb) {
          cb.call(self, val, oldVal);
        }
      } else {
        called = true;
      }
    }, {
      immediate: true,
      user: false
    });(this._paramUnwatchFns || (this._paramUnwatchFns = [])).push(unwatch);
  };

  /**
   * Check if the directive is a function caller
   * and if the expression is a callable one. If both true,
   * we wrap up the expression and use it as the event
   * handler.
   *
   * e.g. on-click="a++"
   *
   * @return {Boolean}
   */

  Directive.prototype._checkStatement = function () {
    var expression = this.expression;
    if (expression && this.acceptStatement && !isSimplePath(expression)) {
      var fn = parseExpression(expression).get;
      var scope = this._scope || this.vm;
      var handler = function handler(e) {
        scope.$event = e;
        fn.call(scope, scope);
        scope.$event = null;
      };
      if (this.filters) {
        handler = scope._applyFilters(handler, null, this.filters);
      }
      this.update(handler);
      return true;
    }
  };

  /**
   * Set the corresponding value with the setter.
   * This should only be used in two-way directives
   * e.g. v-model.
   *
   * @param {*} value
   * @public
   */

  Directive.prototype.set = function (value) {
    /* istanbul ignore else */
    if (this.twoWay) {
      this._withLock(function () {
        this._watcher.set(value);
      });
    } else if ('development' !== 'production') {
      warn('Directive.set() can only be used inside twoWay' + 'directives.');
    }
  };

  /**
   * Execute a function while preventing that function from
   * triggering updates on this directive instance.
   *
   * @param {Function} fn
   */

  Directive.prototype._withLock = function (fn) {
    var self = this;
    self._locked = true;
    fn.call(self);
    nextTick(function () {
      self._locked = false;
    });
  };

  /**
   * Convenience method that attaches a DOM event listener
   * to the directive element and autometically tears it down
   * during unbind.
   *
   * @param {String} event
   * @param {Function} handler
   * @param {Boolean} [useCapture]
   */

  Directive.prototype.on = function (event, handler, useCapture) {
    on(this.el, event, handler, useCapture);(this._listeners || (this._listeners = [])).push([event, handler]);
  };

  /**
   * Teardown the watcher and call unbind.
   */

  Directive.prototype._teardown = function () {
    if (this._bound) {
      this._bound = false;
      if (this.unbind) {
        this.unbind();
      }
      if (this._watcher) {
        this._watcher.teardown();
      }
      var listeners = this._listeners;
      var i;
      if (listeners) {
        i = listeners.length;
        while (i--) {
          off(this.el, listeners[i][0], listeners[i][1]);
        }
      }
      var unwatchFns = this._paramUnwatchFns;
      if (unwatchFns) {
        i = unwatchFns.length;
        while (i--) {
          unwatchFns[i]();
        }
      }
      if ('development' !== 'production' && this.el) {
        this.el._vue_directives.$remove(this);
      }
      this.vm = this.el = this._watcher = this._listeners = null;
    }
  };

  function lifecycleMixin (Vue) {
    /**
     * Update v-ref for component.
     *
     * @param {Boolean} remove
     */

    Vue.prototype._updateRef = function (remove) {
      var ref = this.$options._ref;
      if (ref) {
        var refs = (this._scope || this._context).$refs;
        if (remove) {
          if (refs[ref] === this) {
            refs[ref] = null;
          }
        } else {
          refs[ref] = this;
        }
      }
    };

    /**
     * Transclude, compile and link element.
     *
     * If a pre-compiled linker is available, that means the
     * passed in element will be pre-transcluded and compiled
     * as well - all we need to do is to call the linker.
     *
     * Otherwise we need to call transclude/compile/link here.
     *
     * @param {Element} el
     */

    Vue.prototype._compile = function (el) {
      var options = this.$options;

      // transclude and init element
      // transclude can potentially replace original
      // so we need to keep reference; this step also injects
      // the template and caches the original attributes
      // on the container node and replacer node.
      var original = el;
      el = transclude(el, options);
      this._initElement(el);

      // handle v-pre on root node (#2026)
      if (el.nodeType === 1 && getAttr(el, 'v-pre') !== null) {
        return;
      }

      // root is always compiled per-instance, because
      // container attrs and props can be different every time.
      var contextOptions = this._context && this._context.$options;
      var rootLinker = compileRoot(el, options, contextOptions);

      // resolve slot distribution
      resolveSlots(this, options._content);

      // compile and link the rest
      var contentLinkFn;
      var ctor = this.constructor;
      // component compilation can be cached
      // as long as it's not using inline-template
      if (options._linkerCachable) {
        contentLinkFn = ctor.linker;
        if (!contentLinkFn) {
          contentLinkFn = ctor.linker = compile(el, options);
        }
      }

      // link phase
      // make sure to link root with prop scope!
      var rootUnlinkFn = rootLinker(this, el, this._scope);
      var contentUnlinkFn = contentLinkFn ? contentLinkFn(this, el) : compile(el, options)(this, el);

      // register composite unlink function
      // to be called during instance destruction
      this._unlinkFn = function () {
        rootUnlinkFn();
        // passing destroying: true to avoid searching and
        // splicing the directives
        contentUnlinkFn(true);
      };

      // finally replace original
      if (options.replace) {
        replace(original, el);
      }

      this._isCompiled = true;
      this._callHook('compiled');
    };

    /**
     * Initialize instance element. Called in the public
     * $mount() method.
     *
     * @param {Element} el
     */

    Vue.prototype._initElement = function (el) {
      if (isFragment(el)) {
        this._isFragment = true;
        this.$el = this._fragmentStart = el.firstChild;
        this._fragmentEnd = el.lastChild;
        // set persisted text anchors to empty
        if (this._fragmentStart.nodeType === 3) {
          this._fragmentStart.data = this._fragmentEnd.data = '';
        }
        this._fragment = el;
      } else {
        this.$el = el;
      }
      this.$el.__vue__ = this;
      this._callHook('beforeCompile');
    };

    /**
     * Create and bind a directive to an element.
     *
     * @param {Object} descriptor - parsed directive descriptor
     * @param {Node} node   - target node
     * @param {Vue} [host] - transclusion host component
     * @param {Object} [scope] - v-for scope
     * @param {Fragment} [frag] - owner fragment
     */

    Vue.prototype._bindDir = function (descriptor, node, host, scope, frag) {
      this._directives.push(new Directive(descriptor, this, node, host, scope, frag));
    };

    /**
     * Teardown an instance, unobserves the data, unbind all the
     * directives, turn off all the event listeners, etc.
     *
     * @param {Boolean} remove - whether to remove the DOM node.
     * @param {Boolean} deferCleanup - if true, defer cleanup to
     *                                 be called later
     */

    Vue.prototype._destroy = function (remove, deferCleanup) {
      if (this._isBeingDestroyed) {
        if (!deferCleanup) {
          this._cleanup();
        }
        return;
      }

      var destroyReady;
      var pendingRemoval;

      var self = this;
      // Cleanup should be called either synchronously or asynchronoysly as
      // callback of this.$remove(), or if remove and deferCleanup are false.
      // In any case it should be called after all other removing, unbinding and
      // turning of is done
      var cleanupIfPossible = function cleanupIfPossible() {
        if (destroyReady && !pendingRemoval && !deferCleanup) {
          self._cleanup();
        }
      };

      // remove DOM element
      if (remove && this.$el) {
        pendingRemoval = true;
        this.$remove(function () {
          pendingRemoval = false;
          cleanupIfPossible();
        });
      }

      this._callHook('beforeDestroy');
      this._isBeingDestroyed = true;
      var i;
      // remove self from parent. only necessary
      // if parent is not being destroyed as well.
      var parent = this.$parent;
      if (parent && !parent._isBeingDestroyed) {
        parent.$children.$remove(this);
        // unregister ref (remove: true)
        this._updateRef(true);
      }
      // destroy all children.
      i = this.$children.length;
      while (i--) {
        this.$children[i].$destroy();
      }
      // teardown props
      if (this._propsUnlinkFn) {
        this._propsUnlinkFn();
      }
      // teardown all directives. this also tearsdown all
      // directive-owned watchers.
      if (this._unlinkFn) {
        this._unlinkFn();
      }
      i = this._watchers.length;
      while (i--) {
        this._watchers[i].teardown();
      }
      // remove reference to self on $el
      if (this.$el) {
        this.$el.__vue__ = null;
      }

      destroyReady = true;
      cleanupIfPossible();
    };

    /**
     * Clean up to ensure garbage collection.
     * This is called after the leave transition if there
     * is any.
     */

    Vue.prototype._cleanup = function () {
      if (this._isDestroyed) {
        return;
      }
      // remove self from owner fragment
      // do it in cleanup so that we can call $destroy with
      // defer right when a fragment is about to be removed.
      if (this._frag) {
        this._frag.children.$remove(this);
      }
      // remove reference from data ob
      // frozen object may not have observer.
      if (this._data && this._data.__ob__) {
        this._data.__ob__.removeVm(this);
      }
      // Clean up references to private properties and other
      // instances. preserve reference to _data so that proxy
      // accessors still work. The only potential side effect
      // here is that mutating the instance after it's destroyed
      // may affect the state of other components that are still
      // observing the same object, but that seems to be a
      // reasonable responsibility for the user rather than
      // always throwing an error on them.
      this.$el = this.$parent = this.$root = this.$children = this._watchers = this._context = this._scope = this._directives = null;
      // call the last hook...
      this._isDestroyed = true;
      this._callHook('destroyed');
      // turn off all instance listeners.
      this.$off();
    };
  }

  function miscMixin (Vue) {
    /**
     * Apply a list of filter (descriptors) to a value.
     * Using plain for loops here because this will be called in
     * the getter of any watcher with filters so it is very
     * performance sensitive.
     *
     * @param {*} value
     * @param {*} [oldValue]
     * @param {Array} filters
     * @param {Boolean} write
     * @return {*}
     */

    Vue.prototype._applyFilters = function (value, oldValue, filters, write) {
      var filter, fn, args, arg, offset, i, l, j, k;
      for (i = 0, l = filters.length; i < l; i++) {
        filter = filters[write ? l - i - 1 : i];
        fn = resolveAsset(this.$options, 'filters', filter.name, true);
        if (!fn) continue;
        fn = write ? fn.write : fn.read || fn;
        if (typeof fn !== 'function') continue;
        args = write ? [value, oldValue] : [value];
        offset = write ? 2 : 1;
        if (filter.args) {
          for (j = 0, k = filter.args.length; j < k; j++) {
            arg = filter.args[j];
            args[j + offset] = arg.dynamic ? this.$get(arg.value) : arg.value;
          }
        }
        value = fn.apply(this, args);
      }
      return value;
    };

    /**
     * Resolve a component, depending on whether the component
     * is defined normally or using an async factory function.
     * Resolves synchronously if already resolved, otherwise
     * resolves asynchronously and caches the resolved
     * constructor on the factory.
     *
     * @param {String|Function} value
     * @param {Function} cb
     */

    Vue.prototype._resolveComponent = function (value, cb) {
      var factory;
      if (typeof value === 'function') {
        factory = value;
      } else {
        factory = resolveAsset(this.$options, 'components', value, true);
      }
      /* istanbul ignore if */
      if (!factory) {
        return;
      }
      // async component factory
      if (!factory.options) {
        if (factory.resolved) {
          // cached
          cb(factory.resolved);
        } else if (factory.requested) {
          // pool callbacks
          factory.pendingCallbacks.push(cb);
        } else {
          factory.requested = true;
          var cbs = factory.pendingCallbacks = [cb];
          factory.call(this, function resolve(res) {
            if (isPlainObject(res)) {
              res = Vue.extend(res);
            }
            // cache resolved
            factory.resolved = res;
            // invoke callbacks
            for (var i = 0, l = cbs.length; i < l; i++) {
              cbs[i](res);
            }
          }, function reject(reason) {
            'development' !== 'production' && warn('Failed to resolve async component' + (typeof value === 'string' ? ': ' + value : '') + '. ' + (reason ? '\nReason: ' + reason : ''));
          });
        }
      } else {
        // normal component
        cb(factory);
      }
    };
  }

  var filterRE$1 = /[^|]\|[^|]/;

  function dataAPI (Vue) {
    /**
     * Get the value from an expression on this vm.
     *
     * @param {String} exp
     * @param {Boolean} [asStatement]
     * @return {*}
     */

    Vue.prototype.$get = function (exp, asStatement) {
      var res = parseExpression(exp);
      if (res) {
        if (asStatement) {
          var self = this;
          return function statementHandler() {
            self.$arguments = toArray(arguments);
            var result = res.get.call(self, self);
            self.$arguments = null;
            return result;
          };
        } else {
          try {
            return res.get.call(this, this);
          } catch (e) {}
        }
      }
    };

    /**
     * Set the value from an expression on this vm.
     * The expression must be a valid left-hand
     * expression in an assignment.
     *
     * @param {String} exp
     * @param {*} val
     */

    Vue.prototype.$set = function (exp, val) {
      var res = parseExpression(exp, true);
      if (res && res.set) {
        res.set.call(this, this, val);
      }
    };

    /**
     * Delete a property on the VM
     *
     * @param {String} key
     */

    Vue.prototype.$delete = function (key) {
      del(this._data, key);
    };

    /**
     * Watch an expression, trigger callback when its
     * value changes.
     *
     * @param {String|Function} expOrFn
     * @param {Function} cb
     * @param {Object} [options]
     *                 - {Boolean} deep
     *                 - {Boolean} immediate
     * @return {Function} - unwatchFn
     */

    Vue.prototype.$watch = function (expOrFn, cb, options) {
      var vm = this;
      var parsed;
      if (typeof expOrFn === 'string') {
        parsed = parseDirective(expOrFn);
        expOrFn = parsed.expression;
      }
      var watcher = new Watcher(vm, expOrFn, cb, {
        deep: options && options.deep,
        sync: options && options.sync,
        filters: parsed && parsed.filters,
        user: !options || options.user !== false
      });
      if (options && options.immediate) {
        cb.call(vm, watcher.value);
      }
      return function unwatchFn() {
        watcher.teardown();
      };
    };

    /**
     * Evaluate a text directive, including filters.
     *
     * @param {String} text
     * @param {Boolean} [asStatement]
     * @return {String}
     */

    Vue.prototype.$eval = function (text, asStatement) {
      // check for filters.
      if (filterRE$1.test(text)) {
        var dir = parseDirective(text);
        // the filter regex check might give false positive
        // for pipes inside strings, so it's possible that
        // we don't get any filters here
        var val = this.$get(dir.expression, asStatement);
        return dir.filters ? this._applyFilters(val, null, dir.filters) : val;
      } else {
        // no filter
        return this.$get(text, asStatement);
      }
    };

    /**
     * Interpolate a piece of template text.
     *
     * @param {String} text
     * @return {String}
     */

    Vue.prototype.$interpolate = function (text) {
      var tokens = parseText(text);
      var vm = this;
      if (tokens) {
        if (tokens.length === 1) {
          return vm.$eval(tokens[0].value) + '';
        } else {
          return tokens.map(function (token) {
            return token.tag ? vm.$eval(token.value) : token.value;
          }).join('');
        }
      } else {
        return text;
      }
    };

    /**
     * Log instance data as a plain JS object
     * so that it is easier to inspect in console.
     * This method assumes console is available.
     *
     * @param {String} [path]
     */

    Vue.prototype.$log = function (path) {
      var data = path ? getPath(this._data, path) : this._data;
      if (data) {
        data = clean(data);
      }
      // include computed fields
      if (!path) {
        var key;
        for (key in this.$options.computed) {
          data[key] = clean(this[key]);
        }
        if (this._props) {
          for (key in this._props) {
            data[key] = clean(this[key]);
          }
        }
      }
      console.log(data);
    };

    /**
     * "clean" a getter/setter converted object into a plain
     * object copy.
     *
     * @param {Object} - obj
     * @return {Object}
     */

    function clean(obj) {
      return JSON.parse(JSON.stringify(obj));
    }
  }

  function domAPI (Vue) {
    /**
     * Convenience on-instance nextTick. The callback is
     * auto-bound to the instance, and this avoids component
     * modules having to rely on the global Vue.
     *
     * @param {Function} fn
     */

    Vue.prototype.$nextTick = function (fn) {
      nextTick(fn, this);
    };

    /**
     * Append instance to target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$appendTo = function (target, cb, withTransition) {
      return insert(this, target, cb, withTransition, append, appendWithTransition);
    };

    /**
     * Prepend instance to target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$prependTo = function (target, cb, withTransition) {
      target = query(target);
      if (target.hasChildNodes()) {
        this.$before(target.firstChild, cb, withTransition);
      } else {
        this.$appendTo(target, cb, withTransition);
      }
      return this;
    };

    /**
     * Insert instance before target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$before = function (target, cb, withTransition) {
      return insert(this, target, cb, withTransition, beforeWithCb, beforeWithTransition);
    };

    /**
     * Insert instance after target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$after = function (target, cb, withTransition) {
      target = query(target);
      if (target.nextSibling) {
        this.$before(target.nextSibling, cb, withTransition);
      } else {
        this.$appendTo(target.parentNode, cb, withTransition);
      }
      return this;
    };

    /**
     * Remove instance from DOM
     *
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$remove = function (cb, withTransition) {
      if (!this.$el.parentNode) {
        return cb && cb();
      }
      var inDocument = this._isAttached && inDoc(this.$el);
      // if we are not in document, no need to check
      // for transitions
      if (!inDocument) withTransition = false;
      var self = this;
      var realCb = function realCb() {
        if (inDocument) self._callHook('detached');
        if (cb) cb();
      };
      if (this._isFragment) {
        removeNodeRange(this._fragmentStart, this._fragmentEnd, this, this._fragment, realCb);
      } else {
        var op = withTransition === false ? removeWithCb : removeWithTransition;
        op(this.$el, this, realCb);
      }
      return this;
    };

    /**
     * Shared DOM insertion function.
     *
     * @param {Vue} vm
     * @param {Element} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition]
     * @param {Function} op1 - op for non-transition insert
     * @param {Function} op2 - op for transition insert
     * @return vm
     */

    function insert(vm, target, cb, withTransition, op1, op2) {
      target = query(target);
      var targetIsDetached = !inDoc(target);
      var op = withTransition === false || targetIsDetached ? op1 : op2;
      var shouldCallHook = !targetIsDetached && !vm._isAttached && !inDoc(vm.$el);
      if (vm._isFragment) {
        mapNodeRange(vm._fragmentStart, vm._fragmentEnd, function (node) {
          op(node, target, vm);
        });
        cb && cb();
      } else {
        op(vm.$el, target, vm, cb);
      }
      if (shouldCallHook) {
        vm._callHook('attached');
      }
      return vm;
    }

    /**
     * Check for selectors
     *
     * @param {String|Element} el
     */

    function query(el) {
      return typeof el === 'string' ? document.querySelector(el) : el;
    }

    /**
     * Append operation that takes a callback.
     *
     * @param {Node} el
     * @param {Node} target
     * @param {Vue} vm - unused
     * @param {Function} [cb]
     */

    function append(el, target, vm, cb) {
      target.appendChild(el);
      if (cb) cb();
    }

    /**
     * InsertBefore operation that takes a callback.
     *
     * @param {Node} el
     * @param {Node} target
     * @param {Vue} vm - unused
     * @param {Function} [cb]
     */

    function beforeWithCb(el, target, vm, cb) {
      before(el, target);
      if (cb) cb();
    }

    /**
     * Remove operation that takes a callback.
     *
     * @param {Node} el
     * @param {Vue} vm - unused
     * @param {Function} [cb]
     */

    function removeWithCb(el, vm, cb) {
      remove(el);
      if (cb) cb();
    }
  }

  function eventsAPI (Vue) {
    /**
     * Listen on the given `event` with `fn`.
     *
     * @param {String} event
     * @param {Function} fn
     */

    Vue.prototype.$on = function (event, fn) {
      (this._events[event] || (this._events[event] = [])).push(fn);
      modifyListenerCount(this, event, 1);
      return this;
    };

    /**
     * Adds an `event` listener that will be invoked a single
     * time then automatically removed.
     *
     * @param {String} event
     * @param {Function} fn
     */

    Vue.prototype.$once = function (event, fn) {
      var self = this;
      function on() {
        self.$off(event, on);
        fn.apply(this, arguments);
      }
      on.fn = fn;
      this.$on(event, on);
      return this;
    };

    /**
     * Remove the given callback for `event` or all
     * registered callbacks.
     *
     * @param {String} event
     * @param {Function} fn
     */

    Vue.prototype.$off = function (event, fn) {
      var cbs;
      // all
      if (!arguments.length) {
        if (this.$parent) {
          for (event in this._events) {
            cbs = this._events[event];
            if (cbs) {
              modifyListenerCount(this, event, -cbs.length);
            }
          }
        }
        this._events = {};
        return this;
      }
      // specific event
      cbs = this._events[event];
      if (!cbs) {
        return this;
      }
      if (arguments.length === 1) {
        modifyListenerCount(this, event, -cbs.length);
        this._events[event] = null;
        return this;
      }
      // specific handler
      var cb;
      var i = cbs.length;
      while (i--) {
        cb = cbs[i];
        if (cb === fn || cb.fn === fn) {
          modifyListenerCount(this, event, -1);
          cbs.splice(i, 1);
          break;
        }
      }
      return this;
    };

    /**
     * Trigger an event on self.
     *
     * @param {String|Object} event
     * @return {Boolean} shouldPropagate
     */

    Vue.prototype.$emit = function (event) {
      var isSource = typeof event === 'string';
      event = isSource ? event : event.name;
      var cbs = this._events[event];
      var shouldPropagate = isSource || !cbs;
      if (cbs) {
        cbs = cbs.length > 1 ? toArray(cbs) : cbs;
        // this is a somewhat hacky solution to the question raised
        // in #2102: for an inline component listener like <comp @test="doThis">,
        // the propagation handling is somewhat broken. Therefore we
        // need to treat these inline callbacks differently.
        var hasParentCbs = isSource && cbs.some(function (cb) {
          return cb._fromParent;
        });
        if (hasParentCbs) {
          shouldPropagate = false;
        }
        var args = toArray(arguments, 1);
        for (var i = 0, l = cbs.length; i < l; i++) {
          var cb = cbs[i];
          var res = cb.apply(this, args);
          if (res === true && (!hasParentCbs || cb._fromParent)) {
            shouldPropagate = true;
          }
        }
      }
      return shouldPropagate;
    };

    /**
     * Recursively broadcast an event to all children instances.
     *
     * @param {String|Object} event
     * @param {...*} additional arguments
     */

    Vue.prototype.$broadcast = function (event) {
      var isSource = typeof event === 'string';
      event = isSource ? event : event.name;
      // if no child has registered for this event,
      // then there's no need to broadcast.
      if (!this._eventsCount[event]) return;
      var children = this.$children;
      var args = toArray(arguments);
      if (isSource) {
        // use object event to indicate non-source emit
        // on children
        args[0] = { name: event, source: this };
      }
      for (var i = 0, l = children.length; i < l; i++) {
        var child = children[i];
        var shouldPropagate = child.$emit.apply(child, args);
        if (shouldPropagate) {
          child.$broadcast.apply(child, args);
        }
      }
      return this;
    };

    /**
     * Recursively propagate an event up the parent chain.
     *
     * @param {String} event
     * @param {...*} additional arguments
     */

    Vue.prototype.$dispatch = function (event) {
      var shouldPropagate = this.$emit.apply(this, arguments);
      if (!shouldPropagate) return;
      var parent = this.$parent;
      var args = toArray(arguments);
      // use object event to indicate non-source emit
      // on parents
      args[0] = { name: event, source: this };
      while (parent) {
        shouldPropagate = parent.$emit.apply(parent, args);
        parent = shouldPropagate ? parent.$parent : null;
      }
      return this;
    };

    /**
     * Modify the listener counts on all parents.
     * This bookkeeping allows $broadcast to return early when
     * no child has listened to a certain event.
     *
     * @param {Vue} vm
     * @param {String} event
     * @param {Number} count
     */

    var hookRE = /^hook:/;
    function modifyListenerCount(vm, event, count) {
      var parent = vm.$parent;
      // hooks do not get broadcasted so no need
      // to do bookkeeping for them
      if (!parent || !count || hookRE.test(event)) return;
      while (parent) {
        parent._eventsCount[event] = (parent._eventsCount[event] || 0) + count;
        parent = parent.$parent;
      }
    }
  }

  function lifecycleAPI (Vue) {
    /**
     * Set instance target element and kick off the compilation
     * process. The passed in `el` can be a selector string, an
     * existing Element, or a DocumentFragment (for block
     * instances).
     *
     * @param {Element|DocumentFragment|string} el
     * @public
     */

    Vue.prototype.$mount = function (el) {
      if (this._isCompiled) {
        'development' !== 'production' && warn('$mount() should be called only once.', this);
        return;
      }
      el = query(el);
      if (!el) {
        el = document.createElement('div');
      }
      this._compile(el);
      this._initDOMHooks();
      if (inDoc(this.$el)) {
        this._callHook('attached');
        ready.call(this);
      } else {
        this.$once('hook:attached', ready);
      }
      return this;
    };

    /**
     * Mark an instance as ready.
     */

    function ready() {
      this._isAttached = true;
      this._isReady = true;
      this._callHook('ready');
    }

    /**
     * Teardown the instance, simply delegate to the internal
     * _destroy.
     *
     * @param {Boolean} remove
     * @param {Boolean} deferCleanup
     */

    Vue.prototype.$destroy = function (remove, deferCleanup) {
      this._destroy(remove, deferCleanup);
    };

    /**
     * Partially compile a piece of DOM and return a
     * decompile function.
     *
     * @param {Element|DocumentFragment} el
     * @param {Vue} [host]
     * @param {Object} [scope]
     * @param {Fragment} [frag]
     * @return {Function}
     */

    Vue.prototype.$compile = function (el, host, scope, frag) {
      return compile(el, this.$options, true)(this, el, host, scope, frag);
    };
  }

  /**
   * The exposed Vue constructor.
   *
   * API conventions:
   * - public API methods/properties are prefixed with `$`
   * - internal methods/properties are prefixed with `_`
   * - non-prefixed properties are assumed to be proxied user
   *   data.
   *
   * @constructor
   * @param {Object} [options]
   * @public
   */

  function Vue(options) {
    this._init(options);
  }

  // install internals
  initMixin(Vue);
  stateMixin(Vue);
  eventsMixin(Vue);
  lifecycleMixin(Vue);
  miscMixin(Vue);

  // install instance APIs
  dataAPI(Vue);
  domAPI(Vue);
  eventsAPI(Vue);
  lifecycleAPI(Vue);

  var slot = {

    priority: SLOT,
    params: ['name'],

    bind: function bind() {
      // this was resolved during component transclusion
      var name = this.params.name || 'default';
      var content = this.vm._slotContents && this.vm._slotContents[name];
      if (!content || !content.hasChildNodes()) {
        this.fallback();
      } else {
        this.compile(content.cloneNode(true), this.vm._context, this.vm);
      }
    },

    compile: function compile(content, context, host) {
      if (content && context) {
        if (this.el.hasChildNodes() && content.childNodes.length === 1 && content.childNodes[0].nodeType === 1 && content.childNodes[0].hasAttribute('v-if')) {
          // if the inserted slot has v-if
          // inject fallback content as the v-else
          var elseBlock = document.createElement('template');
          elseBlock.setAttribute('v-else', '');
          elseBlock.innerHTML = this.el.innerHTML;
          // the else block should be compiled in child scope
          elseBlock._context = this.vm;
          content.appendChild(elseBlock);
        }
        var scope = host ? host._scope : this._scope;
        this.unlink = context.$compile(content, host, scope, this._frag);
      }
      if (content) {
        replace(this.el, content);
      } else {
        remove(this.el);
      }
    },

    fallback: function fallback() {
      this.compile(extractContent(this.el, true), this.vm);
    },

    unbind: function unbind() {
      if (this.unlink) {
        this.unlink();
      }
    }
  };

  var partial = {

    priority: PARTIAL,

    params: ['name'],

    // watch changes to name for dynamic partials
    paramWatchers: {
      name: function name(value) {
        vIf.remove.call(this);
        if (value) {
          this.insert(value);
        }
      }
    },

    bind: function bind() {
      this.anchor = createAnchor('v-partial');
      replace(this.el, this.anchor);
      this.insert(this.params.name);
    },

    insert: function insert(id) {
      var partial = resolveAsset(this.vm.$options, 'partials', id, true);
      if (partial) {
        this.factory = new FragmentFactory(this.vm, partial);
        vIf.insert.call(this);
      }
    },

    unbind: function unbind() {
      if (this.frag) {
        this.frag.destroy();
      }
    }
  };

  var elementDirectives = {
    slot: slot,
    partial: partial
  };

  var convertArray = vFor._postProcess;

  /**
   * Limit filter for arrays
   *
   * @param {Number} n
   * @param {Number} offset (Decimal expected)
   */

  function limitBy(arr, n, offset) {
    offset = offset ? parseInt(offset, 10) : 0;
    n = toNumber(n);
    return typeof n === 'number' ? arr.slice(offset, offset + n) : arr;
  }

  /**
   * Filter filter for arrays
   *
   * @param {String} search
   * @param {String} [delimiter]
   * @param {String} ...dataKeys
   */

  function filterBy(arr, search, delimiter) {
    arr = convertArray(arr);
    if (search == null) {
      return arr;
    }
    if (typeof search === 'function') {
      return arr.filter(search);
    }
    // cast to lowercase string
    search = ('' + search).toLowerCase();
    // allow optional `in` delimiter
    // because why not
    var n = delimiter === 'in' ? 3 : 2;
    // extract and flatten keys
    var keys = Array.prototype.concat.apply([], toArray(arguments, n));
    var res = [];
    var item, key, val, j;
    for (var i = 0, l = arr.length; i < l; i++) {
      item = arr[i];
      val = item && item.$value || item;
      j = keys.length;
      if (j) {
        while (j--) {
          key = keys[j];
          if (key === '$key' && contains(item.$key, search) || contains(getPath(val, key), search)) {
            res.push(item);
            break;
          }
        }
      } else if (contains(item, search)) {
        res.push(item);
      }
    }
    return res;
  }

  /**
   * Filter filter for arrays
   *
   * @param {String|Array<String>|Function} ...sortKeys
   * @param {Number} [order]
   */

  function orderBy(arr) {
    var comparator = null;
    var sortKeys = undefined;
    arr = convertArray(arr);

    // determine order (last argument)
    var args = toArray(arguments, 1);
    var order = args[args.length - 1];
    if (typeof order === 'number') {
      order = order < 0 ? -1 : 1;
      args = args.length > 1 ? args.slice(0, -1) : args;
    } else {
      order = 1;
    }

    // determine sortKeys & comparator
    var firstArg = args[0];
    if (!firstArg) {
      return arr;
    } else if (typeof firstArg === 'function') {
      // custom comparator
      comparator = function (a, b) {
        return firstArg(a, b) * order;
      };
    } else {
      // string keys. flatten first
      sortKeys = Array.prototype.concat.apply([], args);
      comparator = function (a, b, i) {
        i = i || 0;
        return i >= sortKeys.length - 1 ? baseCompare(a, b, i) : baseCompare(a, b, i) || comparator(a, b, i + 1);
      };
    }

    function baseCompare(a, b, sortKeyIndex) {
      var sortKey = sortKeys[sortKeyIndex];
      if (sortKey) {
        if (sortKey !== '$key') {
          if (isObject(a) && '$value' in a) a = a.$value;
          if (isObject(b) && '$value' in b) b = b.$value;
        }
        a = isObject(a) ? getPath(a, sortKey) : a;
        b = isObject(b) ? getPath(b, sortKey) : b;
      }
      return a === b ? 0 : a > b ? order : -order;
    }

    // sort on a copy to avoid mutating original array
    return arr.slice().sort(comparator);
  }

  /**
   * String contain helper
   *
   * @param {*} val
   * @param {String} search
   */

  function contains(val, search) {
    var i;
    if (isPlainObject(val)) {
      var keys = Object.keys(val);
      i = keys.length;
      while (i--) {
        if (contains(val[keys[i]], search)) {
          return true;
        }
      }
    } else if (isArray(val)) {
      i = val.length;
      while (i--) {
        if (contains(val[i], search)) {
          return true;
        }
      }
    } else if (val != null) {
      return val.toString().toLowerCase().indexOf(search) > -1;
    }
  }

  var digitsRE = /(\d{3})(?=\d)/g;

  // asset collections must be a plain object.
  var filters = {

    orderBy: orderBy,
    filterBy: filterBy,
    limitBy: limitBy,

    /**
     * Stringify value.
     *
     * @param {Number} indent
     */

    json: {
      read: function read(value, indent) {
        return typeof value === 'string' ? value : JSON.stringify(value, null, arguments.length > 1 ? indent : 2);
      },
      write: function write(value) {
        try {
          return JSON.parse(value);
        } catch (e) {
          return value;
        }
      }
    },

    /**
     * 'abc' => 'Abc'
     */

    capitalize: function capitalize(value) {
      if (!value && value !== 0) return '';
      value = value.toString();
      return value.charAt(0).toUpperCase() + value.slice(1);
    },

    /**
     * 'abc' => 'ABC'
     */

    uppercase: function uppercase(value) {
      return value || value === 0 ? value.toString().toUpperCase() : '';
    },

    /**
     * 'AbC' => 'abc'
     */

    lowercase: function lowercase(value) {
      return value || value === 0 ? value.toString().toLowerCase() : '';
    },

    /**
     * 12345 => $12,345.00
     *
     * @param {String} sign
     * @param {Number} decimals Decimal places
     */

    currency: function currency(value, _currency, decimals) {
      value = parseFloat(value);
      if (!isFinite(value) || !value && value !== 0) return '';
      _currency = _currency != null ? _currency : '$';
      decimals = decimals != null ? decimals : 2;
      var stringified = Math.abs(value).toFixed(decimals);
      var _int = decimals ? stringified.slice(0, -1 - decimals) : stringified;
      var i = _int.length % 3;
      var head = i > 0 ? _int.slice(0, i) + (_int.length > 3 ? ',' : '') : '';
      var _float = decimals ? stringified.slice(-1 - decimals) : '';
      var sign = value < 0 ? '-' : '';
      return sign + _currency + head + _int.slice(i).replace(digitsRE, '$1,') + _float;
    },

    /**
     * 'item' => 'items'
     *
     * @params
     *  an array of strings corresponding to
     *  the single, double, triple ... forms of the word to
     *  be pluralized. When the number to be pluralized
     *  exceeds the length of the args, it will use the last
     *  entry in the array.
     *
     *  e.g. ['single', 'double', 'triple', 'multiple']
     */

    pluralize: function pluralize(value) {
      var args = toArray(arguments, 1);
      var length = args.length;
      if (length > 1) {
        var index = value % 10 - 1;
        return index in args ? args[index] : args[length - 1];
      } else {
        return args[0] + (value === 1 ? '' : 's');
      }
    },

    /**
     * Debounce a handler function.
     *
     * @param {Function} handler
     * @param {Number} delay = 300
     * @return {Function}
     */

    debounce: function debounce(handler, delay) {
      if (!handler) return;
      if (!delay) {
        delay = 300;
      }
      return _debounce(handler, delay);
    }
  };

  function installGlobalAPI (Vue) {
    /**
     * Vue and every constructor that extends Vue has an
     * associated options object, which can be accessed during
     * compilation steps as `this.constructor.options`.
     *
     * These can be seen as the default options of every
     * Vue instance.
     */

    Vue.options = {
      directives: directives,
      elementDirectives: elementDirectives,
      filters: filters,
      transitions: {},
      components: {},
      partials: {},
      replace: true
    };

    /**
     * Expose useful internals
     */

    Vue.util = util;
    Vue.config = config;
    Vue.set = set;
    Vue['delete'] = del;
    Vue.nextTick = nextTick;

    /**
     * The following are exposed for advanced usage / plugins
     */

    Vue.compiler = compiler;
    Vue.FragmentFactory = FragmentFactory;
    Vue.internalDirectives = internalDirectives;
    Vue.parsers = {
      path: path,
      text: text,
      template: template,
      directive: directive,
      expression: expression
    };

    /**
     * Each instance constructor, including Vue, has a unique
     * cid. This enables us to create wrapped "child
     * constructors" for prototypal inheritance and cache them.
     */

    Vue.cid = 0;
    var cid = 1;

    /**
     * Class inheritance
     *
     * @param {Object} extendOptions
     */

    Vue.extend = function (extendOptions) {
      extendOptions = extendOptions || {};
      var Super = this;
      var isFirstExtend = Super.cid === 0;
      if (isFirstExtend && extendOptions._Ctor) {
        return extendOptions._Ctor;
      }
      var name = extendOptions.name || Super.options.name;
      if ('development' !== 'production') {
        if (!/^[a-zA-Z][\w-]*$/.test(name)) {
          warn('Invalid component name: "' + name + '". Component names ' + 'can only contain alphanumeric characaters and the hyphen.');
          name = null;
        }
      }
      var Sub = createClass(name || 'VueComponent');
      Sub.prototype = Object.create(Super.prototype);
      Sub.prototype.constructor = Sub;
      Sub.cid = cid++;
      Sub.options = mergeOptions(Super.options, extendOptions);
      Sub['super'] = Super;
      // allow further extension
      Sub.extend = Super.extend;
      // create asset registers, so extended classes
      // can have their private assets too.
      config._assetTypes.forEach(function (type) {
        Sub[type] = Super[type];
      });
      // enable recursive self-lookup
      if (name) {
        Sub.options.components[name] = Sub;
      }
      // cache constructor
      if (isFirstExtend) {
        extendOptions._Ctor = Sub;
      }
      return Sub;
    };

    /**
     * A function that returns a sub-class constructor with the
     * given name. This gives us much nicer output when
     * logging instances in the console.
     *
     * @param {String} name
     * @return {Function}
     */

    function createClass(name) {
      /* eslint-disable no-new-func */
      return new Function('return function ' + classify(name) + ' (options) { this._init(options) }')();
      /* eslint-enable no-new-func */
    }

    /**
     * Plugin system
     *
     * @param {Object} plugin
     */

    Vue.use = function (plugin) {
      /* istanbul ignore if */
      if (plugin.installed) {
        return;
      }
      // additional parameters
      var args = toArray(arguments, 1);
      args.unshift(this);
      if (typeof plugin.install === 'function') {
        plugin.install.apply(plugin, args);
      } else {
        plugin.apply(null, args);
      }
      plugin.installed = true;
      return this;
    };

    /**
     * Apply a global mixin by merging it into the default
     * options.
     */

    Vue.mixin = function (mixin) {
      Vue.options = mergeOptions(Vue.options, mixin);
    };

    /**
     * Create asset registration methods with the following
     * signature:
     *
     * @param {String} id
     * @param {*} definition
     */

    config._assetTypes.forEach(function (type) {
      Vue[type] = function (id, definition) {
        if (!definition) {
          return this.options[type + 's'][id];
        } else {
          /* istanbul ignore if */
          if ('development' !== 'production') {
            if (type === 'component' && (commonTagRE.test(id) || reservedTagRE.test(id))) {
              warn('Do not use built-in or reserved HTML elements as component ' + 'id: ' + id);
            }
          }
          if (type === 'component' && isPlainObject(definition)) {
            if (!definition.name) {
              definition.name = id;
            }
            definition = Vue.extend(definition);
          }
          this.options[type + 's'][id] = definition;
          return definition;
        }
      };
    });

    // expose internal transition API
    extend(Vue.transition, transition);
  }

  installGlobalAPI(Vue);

  Vue.version = '1.0.26';

  // devtools global hook
  /* istanbul ignore next */
  setTimeout(function () {
    if (config.devtools) {
      if (devtools) {
        devtools.emit('init', Vue);
      } else if ('development' !== 'production' && inBrowser && /Chrome\/\d+/.test(window.navigator.userAgent)) {
        console.log('Download the Vue Devtools for a better development experience:\n' + 'https://github.com/vuejs/vue-devtools');
      }
    }
  }, 0);

  return Vue;

}));
/*!
 * vue-router v0.7.13
 * (c) 2016 Evan You
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  global.VueRouter = factory();
}(this, function () { 'use strict';

  var babelHelpers = {};

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };
  function Target(path, matcher, delegate) {
    this.path = path;
    this.matcher = matcher;
    this.delegate = delegate;
  }

  Target.prototype = {
    to: function to(target, callback) {
      var delegate = this.delegate;

      if (delegate && delegate.willAddRoute) {
        target = delegate.willAddRoute(this.matcher.target, target);
      }

      this.matcher.add(this.path, target);

      if (callback) {
        if (callback.length === 0) {
          throw new Error("You must have an argument in the function passed to `to`");
        }
        this.matcher.addChild(this.path, target, callback, this.delegate);
      }
      return this;
    }
  };

  function Matcher(target) {
    this.routes = {};
    this.children = {};
    this.target = target;
  }

  Matcher.prototype = {
    add: function add(path, handler) {
      this.routes[path] = handler;
    },

    addChild: function addChild(path, target, callback, delegate) {
      var matcher = new Matcher(target);
      this.children[path] = matcher;

      var match = generateMatch(path, matcher, delegate);

      if (delegate && delegate.contextEntered) {
        delegate.contextEntered(target, match);
      }

      callback(match);
    }
  };

  function generateMatch(startingPath, matcher, delegate) {
    return function (path, nestedCallback) {
      var fullPath = startingPath + path;

      if (nestedCallback) {
        nestedCallback(generateMatch(fullPath, matcher, delegate));
      } else {
        return new Target(startingPath + path, matcher, delegate);
      }
    };
  }

  function addRoute(routeArray, path, handler) {
    var len = 0;
    for (var i = 0, l = routeArray.length; i < l; i++) {
      len += routeArray[i].path.length;
    }

    path = path.substr(len);
    var route = { path: path, handler: handler };
    routeArray.push(route);
  }

  function eachRoute(baseRoute, matcher, callback, binding) {
    var routes = matcher.routes;

    for (var path in routes) {
      if (routes.hasOwnProperty(path)) {
        var routeArray = baseRoute.slice();
        addRoute(routeArray, path, routes[path]);

        if (matcher.children[path]) {
          eachRoute(routeArray, matcher.children[path], callback, binding);
        } else {
          callback.call(binding, routeArray);
        }
      }
    }
  }

  function map (callback, addRouteCallback) {
    var matcher = new Matcher();

    callback(generateMatch("", matcher, this.delegate));

    eachRoute([], matcher, function (route) {
      if (addRouteCallback) {
        addRouteCallback(this, route);
      } else {
        this.add(route);
      }
    }, this);
  }

  var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];

  var escapeRegex = new RegExp('(\\' + specials.join('|\\') + ')', 'g');

  var noWarning = false;
  function warn(msg) {
    if (!noWarning && typeof console !== 'undefined') {
      console.error('[vue-router] ' + msg);
    }
  }

  function tryDecode(uri, asComponent) {
    try {
      return asComponent ? decodeURIComponent(uri) : decodeURI(uri);
    } catch (e) {
      warn('malformed URI' + (asComponent ? ' component: ' : ': ') + uri);
    }
  }

  function isArray(test) {
    return Object.prototype.toString.call(test) === "[object Array]";
  }

  // A Segment represents a segment in the original route description.
  // Each Segment type provides an `eachChar` and `regex` method.
  //
  // The `eachChar` method invokes the callback with one or more character
  // specifications. A character specification consumes one or more input
  // characters.
  //
  // The `regex` method returns a regex fragment for the segment. If the
  // segment is a dynamic of star segment, the regex fragment also includes
  // a capture.
  //
  // A character specification contains:
  //
  // * `validChars`: a String with a list of all valid characters, or
  // * `invalidChars`: a String with a list of all invalid characters
  // * `repeat`: true if the character specification can repeat

  function StaticSegment(string) {
    this.string = string;
  }
  StaticSegment.prototype = {
    eachChar: function eachChar(callback) {
      var string = this.string,
          ch;

      for (var i = 0, l = string.length; i < l; i++) {
        ch = string.charAt(i);
        callback({ validChars: ch });
      }
    },

    regex: function regex() {
      return this.string.replace(escapeRegex, '\\$1');
    },

    generate: function generate() {
      return this.string;
    }
  };

  function DynamicSegment(name) {
    this.name = name;
  }
  DynamicSegment.prototype = {
    eachChar: function eachChar(callback) {
      callback({ invalidChars: "/", repeat: true });
    },

    regex: function regex() {
      return "([^/]+)";
    },

    generate: function generate(params) {
      var val = params[this.name];
      return val == null ? ":" + this.name : val;
    }
  };

  function StarSegment(name) {
    this.name = name;
  }
  StarSegment.prototype = {
    eachChar: function eachChar(callback) {
      callback({ invalidChars: "", repeat: true });
    },

    regex: function regex() {
      return "(.+)";
    },

    generate: function generate(params) {
      var val = params[this.name];
      return val == null ? ":" + this.name : val;
    }
  };

  function EpsilonSegment() {}
  EpsilonSegment.prototype = {
    eachChar: function eachChar() {},
    regex: function regex() {
      return "";
    },
    generate: function generate() {
      return "";
    }
  };

  function parse(route, names, specificity) {
    // normalize route as not starting with a "/". Recognition will
    // also normalize.
    if (route.charAt(0) === "/") {
      route = route.substr(1);
    }

    var segments = route.split("/"),
        results = [];

    // A routes has specificity determined by the order that its different segments
    // appear in. This system mirrors how the magnitude of numbers written as strings
    // works.
    // Consider a number written as: "abc". An example would be "200". Any other number written
    // "xyz" will be smaller than "abc" so long as `a > z`. For instance, "199" is smaller
    // then "200", even though "y" and "z" (which are both 9) are larger than "0" (the value
    // of (`b` and `c`). This is because the leading symbol, "2", is larger than the other
    // leading symbol, "1".
    // The rule is that symbols to the left carry more weight than symbols to the right
    // when a number is written out as a string. In the above strings, the leading digit
    // represents how many 100's are in the number, and it carries more weight than the middle
    // number which represents how many 10's are in the number.
    // This system of number magnitude works well for route specificity, too. A route written as
    // `a/b/c` will be more specific than `x/y/z` as long as `a` is more specific than
    // `x`, irrespective of the other parts.
    // Because of this similarity, we assign each type of segment a number value written as a
    // string. We can find the specificity of compound routes by concatenating these strings
    // together, from left to right. After we have looped through all of the segments,
    // we convert the string to a number.
    specificity.val = '';

    for (var i = 0, l = segments.length; i < l; i++) {
      var segment = segments[i],
          match;

      if (match = segment.match(/^:([^\/]+)$/)) {
        results.push(new DynamicSegment(match[1]));
        names.push(match[1]);
        specificity.val += '3';
      } else if (match = segment.match(/^\*([^\/]+)$/)) {
        results.push(new StarSegment(match[1]));
        specificity.val += '2';
        names.push(match[1]);
      } else if (segment === "") {
        results.push(new EpsilonSegment());
        specificity.val += '1';
      } else {
        results.push(new StaticSegment(segment));
        specificity.val += '4';
      }
    }

    specificity.val = +specificity.val;

    return results;
  }

  // A State has a character specification and (`charSpec`) and a list of possible
  // subsequent states (`nextStates`).
  //
  // If a State is an accepting state, it will also have several additional
  // properties:
  //
  // * `regex`: A regular expression that is used to extract parameters from paths
  //   that reached this accepting state.
  // * `handlers`: Information on how to convert the list of captures into calls
  //   to registered handlers with the specified parameters
  // * `types`: How many static, dynamic or star segments in this route. Used to
  //   decide which route to use if multiple registered routes match a path.
  //
  // Currently, State is implemented naively by looping over `nextStates` and
  // comparing a character specification against a character. A more efficient
  // implementation would use a hash of keys pointing at one or more next states.

  function State(charSpec) {
    this.charSpec = charSpec;
    this.nextStates = [];
  }

  State.prototype = {
    get: function get(charSpec) {
      var nextStates = this.nextStates;

      for (var i = 0, l = nextStates.length; i < l; i++) {
        var child = nextStates[i];

        var isEqual = child.charSpec.validChars === charSpec.validChars;
        isEqual = isEqual && child.charSpec.invalidChars === charSpec.invalidChars;

        if (isEqual) {
          return child;
        }
      }
    },

    put: function put(charSpec) {
      var state;

      // If the character specification already exists in a child of the current
      // state, just return that state.
      if (state = this.get(charSpec)) {
        return state;
      }

      // Make a new state for the character spec
      state = new State(charSpec);

      // Insert the new state as a child of the current state
      this.nextStates.push(state);

      // If this character specification repeats, insert the new state as a child
      // of itself. Note that this will not trigger an infinite loop because each
      // transition during recognition consumes a character.
      if (charSpec.repeat) {
        state.nextStates.push(state);
      }

      // Return the new state
      return state;
    },

    // Find a list of child states matching the next character
    match: function match(ch) {
      // DEBUG "Processing `" + ch + "`:"
      var nextStates = this.nextStates,
          child,
          charSpec,
          chars;

      // DEBUG "  " + debugState(this)
      var returned = [];

      for (var i = 0, l = nextStates.length; i < l; i++) {
        child = nextStates[i];

        charSpec = child.charSpec;

        if (typeof (chars = charSpec.validChars) !== 'undefined') {
          if (chars.indexOf(ch) !== -1) {
            returned.push(child);
          }
        } else if (typeof (chars = charSpec.invalidChars) !== 'undefined') {
          if (chars.indexOf(ch) === -1) {
            returned.push(child);
          }
        }
      }

      return returned;
    }

    /** IF DEBUG
    , debug: function() {
      var charSpec = this.charSpec,
          debug = "[",
          chars = charSpec.validChars || charSpec.invalidChars;
       if (charSpec.invalidChars) { debug += "^"; }
      debug += chars;
      debug += "]";
       if (charSpec.repeat) { debug += "+"; }
       return debug;
    }
    END IF **/
  };

  /** IF DEBUG
  function debug(log) {
    console.log(log);
  }

  function debugState(state) {
    return state.nextStates.map(function(n) {
      if (n.nextStates.length === 0) { return "( " + n.debug() + " [accepting] )"; }
      return "( " + n.debug() + " <then> " + n.nextStates.map(function(s) { return s.debug() }).join(" or ") + " )";
    }).join(", ")
  }
  END IF **/

  // Sort the routes by specificity
  function sortSolutions(states) {
    return states.sort(function (a, b) {
      return b.specificity.val - a.specificity.val;
    });
  }

  function recognizeChar(states, ch) {
    var nextStates = [];

    for (var i = 0, l = states.length; i < l; i++) {
      var state = states[i];

      nextStates = nextStates.concat(state.match(ch));
    }

    return nextStates;
  }

  var oCreate = Object.create || function (proto) {
    function F() {}
    F.prototype = proto;
    return new F();
  };

  function RecognizeResults(queryParams) {
    this.queryParams = queryParams || {};
  }
  RecognizeResults.prototype = oCreate({
    splice: Array.prototype.splice,
    slice: Array.prototype.slice,
    push: Array.prototype.push,
    length: 0,
    queryParams: null
  });

  function findHandler(state, path, queryParams) {
    var handlers = state.handlers,
        regex = state.regex;
    var captures = path.match(regex),
        currentCapture = 1;
    var result = new RecognizeResults(queryParams);

    for (var i = 0, l = handlers.length; i < l; i++) {
      var handler = handlers[i],
          names = handler.names,
          params = {};

      for (var j = 0, m = names.length; j < m; j++) {
        params[names[j]] = captures[currentCapture++];
      }

      result.push({ handler: handler.handler, params: params, isDynamic: !!names.length });
    }

    return result;
  }

  function addSegment(currentState, segment) {
    segment.eachChar(function (ch) {
      var state;

      currentState = currentState.put(ch);
    });

    return currentState;
  }

  function decodeQueryParamPart(part) {
    // http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1
    part = part.replace(/\+/gm, '%20');
    return tryDecode(part, true);
  }

  // The main interface

  var RouteRecognizer = function RouteRecognizer() {
    this.rootState = new State();
    this.names = {};
  };

  RouteRecognizer.prototype = {
    add: function add(routes, options) {
      var currentState = this.rootState,
          regex = "^",
          specificity = {},
          handlers = [],
          allSegments = [],
          name;

      var isEmpty = true;

      for (var i = 0, l = routes.length; i < l; i++) {
        var route = routes[i],
            names = [];

        var segments = parse(route.path, names, specificity);

        allSegments = allSegments.concat(segments);

        for (var j = 0, m = segments.length; j < m; j++) {
          var segment = segments[j];

          if (segment instanceof EpsilonSegment) {
            continue;
          }

          isEmpty = false;

          // Add a "/" for the new segment
          currentState = currentState.put({ validChars: "/" });
          regex += "/";

          // Add a representation of the segment to the NFA and regex
          currentState = addSegment(currentState, segment);
          regex += segment.regex();
        }

        var handler = { handler: route.handler, names: names };
        handlers.push(handler);
      }

      if (isEmpty) {
        currentState = currentState.put({ validChars: "/" });
        regex += "/";
      }

      currentState.handlers = handlers;
      currentState.regex = new RegExp(regex + "$");
      currentState.specificity = specificity;

      if (name = options && options.as) {
        this.names[name] = {
          segments: allSegments,
          handlers: handlers
        };
      }
    },

    handlersFor: function handlersFor(name) {
      var route = this.names[name],
          result = [];
      if (!route) {
        throw new Error("There is no route named " + name);
      }

      for (var i = 0, l = route.handlers.length; i < l; i++) {
        result.push(route.handlers[i]);
      }

      return result;
    },

    hasRoute: function hasRoute(name) {
      return !!this.names[name];
    },

    generate: function generate(name, params) {
      var route = this.names[name],
          output = "";
      if (!route) {
        throw new Error("There is no route named " + name);
      }

      var segments = route.segments;

      for (var i = 0, l = segments.length; i < l; i++) {
        var segment = segments[i];

        if (segment instanceof EpsilonSegment) {
          continue;
        }

        output += "/";
        output += segment.generate(params);
      }

      if (output.charAt(0) !== '/') {
        output = '/' + output;
      }

      if (params && params.queryParams) {
        output += this.generateQueryString(params.queryParams);
      }

      return output;
    },

    generateQueryString: function generateQueryString(params) {
      var pairs = [];
      var keys = [];
      for (var key in params) {
        if (params.hasOwnProperty(key)) {
          keys.push(key);
        }
      }
      keys.sort();
      for (var i = 0, len = keys.length; i < len; i++) {
        key = keys[i];
        var value = params[key];
        if (value == null) {
          continue;
        }
        var pair = encodeURIComponent(key);
        if (isArray(value)) {
          for (var j = 0, l = value.length; j < l; j++) {
            var arrayPair = key + '[]' + '=' + encodeURIComponent(value[j]);
            pairs.push(arrayPair);
          }
        } else {
          pair += "=" + encodeURIComponent(value);
          pairs.push(pair);
        }
      }

      if (pairs.length === 0) {
        return '';
      }

      return "?" + pairs.join("&");
    },

    parseQueryString: function parseQueryString(queryString) {
      var pairs = queryString.split("&"),
          queryParams = {};
      for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i].split('='),
            key = decodeQueryParamPart(pair[0]),
            keyLength = key.length,
            isArray = false,
            value;
        if (pair.length === 1) {
          value = 'true';
        } else {
          //Handle arrays
          if (keyLength > 2 && key.slice(keyLength - 2) === '[]') {
            isArray = true;
            key = key.slice(0, keyLength - 2);
            if (!queryParams[key]) {
              queryParams[key] = [];
            }
          }
          value = pair[1] ? decodeQueryParamPart(pair[1]) : '';
        }
        if (isArray) {
          queryParams[key].push(value);
        } else {
          queryParams[key] = value;
        }
      }
      return queryParams;
    },

    recognize: function recognize(path, silent) {
      noWarning = silent;
      var states = [this.rootState],
          pathLen,
          i,
          l,
          queryStart,
          queryParams = {},
          isSlashDropped = false;

      queryStart = path.indexOf('?');
      if (queryStart !== -1) {
        var queryString = path.substr(queryStart + 1, path.length);
        path = path.substr(0, queryStart);
        if (queryString) {
          queryParams = this.parseQueryString(queryString);
        }
      }

      path = tryDecode(path);
      if (!path) return;

      // DEBUG GROUP path

      if (path.charAt(0) !== "/") {
        path = "/" + path;
      }

      pathLen = path.length;
      if (pathLen > 1 && path.charAt(pathLen - 1) === "/") {
        path = path.substr(0, pathLen - 1);
        isSlashDropped = true;
      }

      for (i = 0, l = path.length; i < l; i++) {
        states = recognizeChar(states, path.charAt(i));
        if (!states.length) {
          break;
        }
      }

      // END DEBUG GROUP

      var solutions = [];
      for (i = 0, l = states.length; i < l; i++) {
        if (states[i].handlers) {
          solutions.push(states[i]);
        }
      }

      states = sortSolutions(solutions);

      var state = solutions[0];

      if (state && state.handlers) {
        // if a trailing slash was dropped and a star segment is the last segment
        // specified, put the trailing slash back
        if (isSlashDropped && state.regex.source.slice(-5) === "(.+)$") {
          path = path + "/";
        }
        return findHandler(state, path, queryParams);
      }
    }
  };

  RouteRecognizer.prototype.map = map;

  var genQuery = RouteRecognizer.prototype.generateQueryString;

  // export default for holding the Vue reference
  var exports$1 = {};
  /**
   * Warn stuff.
   *
   * @param {String} msg
   */

  function warn$1(msg) {
    /* istanbul ignore next */
    if (typeof console !== 'undefined') {
      console.error('[vue-router] ' + msg);
    }
  }

  /**
   * Resolve a relative path.
   *
   * @param {String} base
   * @param {String} relative
   * @param {Boolean} append
   * @return {String}
   */

  function resolvePath(base, relative, append) {
    var query = base.match(/(\?.*)$/);
    if (query) {
      query = query[1];
      base = base.slice(0, -query.length);
    }
    // a query!
    if (relative.charAt(0) === '?') {
      return base + relative;
    }
    var stack = base.split('/');
    // remove trailing segment if:
    // - not appending
    // - appending to trailing slash (last segment is empty)
    if (!append || !stack[stack.length - 1]) {
      stack.pop();
    }
    // resolve relative path
    var segments = relative.replace(/^\//, '').split('/');
    for (var i = 0; i < segments.length; i++) {
      var segment = segments[i];
      if (segment === '.') {
        continue;
      } else if (segment === '..') {
        stack.pop();
      } else {
        stack.push(segment);
      }
    }
    // ensure leading slash
    if (stack[0] !== '') {
      stack.unshift('');
    }
    return stack.join('/');
  }

  /**
   * Forgiving check for a promise
   *
   * @param {Object} p
   * @return {Boolean}
   */

  function isPromise(p) {
    return p && typeof p.then === 'function';
  }

  /**
   * Retrive a route config field from a component instance
   * OR a component contructor.
   *
   * @param {Function|Vue} component
   * @param {String} name
   * @return {*}
   */

  function getRouteConfig(component, name) {
    var options = component && (component.$options || component.options);
    return options && options.route && options.route[name];
  }

  /**
   * Resolve an async component factory. Have to do a dirty
   * mock here because of Vue core's internal API depends on
   * an ID check.
   *
   * @param {Object} handler
   * @param {Function} cb
   */

  var resolver = undefined;

  function resolveAsyncComponent(handler, cb) {
    if (!resolver) {
      resolver = {
        resolve: exports$1.Vue.prototype._resolveComponent,
        $options: {
          components: {
            _: handler.component
          }
        }
      };
    } else {
      resolver.$options.components._ = handler.component;
    }
    resolver.resolve('_', function (Component) {
      handler.component = Component;
      cb(Component);
    });
  }

  /**
   * Map the dynamic segments in a path to params.
   *
   * @param {String} path
   * @param {Object} params
   * @param {Object} query
   */

  function mapParams(path, params, query) {
    if (params === undefined) params = {};

    path = path.replace(/:([^\/]+)/g, function (_, key) {
      var val = params[key];
      /* istanbul ignore if */
      if (!val) {
        warn$1('param "' + key + '" not found when generating ' + 'path for "' + path + '" with params ' + JSON.stringify(params));
      }
      return val || '';
    });
    if (query) {
      path += genQuery(query);
    }
    return path;
  }

  var hashRE = /#.*$/;

  var HTML5History = (function () {
    function HTML5History(_ref) {
      var root = _ref.root;
      var onChange = _ref.onChange;
      babelHelpers.classCallCheck(this, HTML5History);

      if (root && root !== '/') {
        // make sure there's the starting slash
        if (root.charAt(0) !== '/') {
          root = '/' + root;
        }
        // remove trailing slash
        this.root = root.replace(/\/$/, '');
        this.rootRE = new RegExp('^\\' + this.root);
      } else {
        this.root = null;
      }
      this.onChange = onChange;
      // check base tag
      var baseEl = document.querySelector('base');
      this.base = baseEl && baseEl.getAttribute('href');
    }

    HTML5History.prototype.start = function start() {
      var _this = this;

      this.listener = function (e) {
        var url = location.pathname + location.search;
        if (_this.root) {
          url = url.replace(_this.rootRE, '');
        }
        _this.onChange(url, e && e.state, location.hash);
      };
      window.addEventListener('popstate', this.listener);
      this.listener();
    };

    HTML5History.prototype.stop = function stop() {
      window.removeEventListener('popstate', this.listener);
    };

    HTML5History.prototype.go = function go(path, replace, append) {
      var url = this.formatPath(path, append);
      if (replace) {
        history.replaceState({}, '', url);
      } else {
        // record scroll position by replacing current state
        history.replaceState({
          pos: {
            x: window.pageXOffset,
            y: window.pageYOffset
          }
        }, '', location.href);
        // then push new state
        history.pushState({}, '', url);
      }
      var hashMatch = path.match(hashRE);
      var hash = hashMatch && hashMatch[0];
      path = url
      // strip hash so it doesn't mess up params
      .replace(hashRE, '')
      // remove root before matching
      .replace(this.rootRE, '');
      this.onChange(path, null, hash);
    };

    HTML5History.prototype.formatPath = function formatPath(path, append) {
      return path.charAt(0) === '/'
      // absolute path
      ? this.root ? this.root + '/' + path.replace(/^\//, '') : path : resolvePath(this.base || location.pathname, path, append);
    };

    return HTML5History;
  })();

  var HashHistory = (function () {
    function HashHistory(_ref) {
      var hashbang = _ref.hashbang;
      var onChange = _ref.onChange;
      babelHelpers.classCallCheck(this, HashHistory);

      this.hashbang = hashbang;
      this.onChange = onChange;
    }

    HashHistory.prototype.start = function start() {
      var self = this;
      this.listener = function () {
        var path = location.hash;
        var raw = path.replace(/^#!?/, '');
        // always
        if (raw.charAt(0) !== '/') {
          raw = '/' + raw;
        }
        var formattedPath = self.formatPath(raw);
        if (formattedPath !== path) {
          location.replace(formattedPath);
          return;
        }
        // determine query
        // note it's possible to have queries in both the actual URL
        // and the hash fragment itself.
        var query = location.search && path.indexOf('?') > -1 ? '&' + location.search.slice(1) : location.search;
        self.onChange(path.replace(/^#!?/, '') + query);
      };
      window.addEventListener('hashchange', this.listener);
      this.listener();
    };

    HashHistory.prototype.stop = function stop() {
      window.removeEventListener('hashchange', this.listener);
    };

    HashHistory.prototype.go = function go(path, replace, append) {
      path = this.formatPath(path, append);
      if (replace) {
        location.replace(path);
      } else {
        location.hash = path;
      }
    };

    HashHistory.prototype.formatPath = function formatPath(path, append) {
      var isAbsoloute = path.charAt(0) === '/';
      var prefix = '#' + (this.hashbang ? '!' : '');
      return isAbsoloute ? prefix + path : prefix + resolvePath(location.hash.replace(/^#!?/, ''), path, append);
    };

    return HashHistory;
  })();

  var AbstractHistory = (function () {
    function AbstractHistory(_ref) {
      var onChange = _ref.onChange;
      babelHelpers.classCallCheck(this, AbstractHistory);

      this.onChange = onChange;
      this.currentPath = '/';
    }

    AbstractHistory.prototype.start = function start() {
      this.onChange('/');
    };

    AbstractHistory.prototype.stop = function stop() {
      // noop
    };

    AbstractHistory.prototype.go = function go(path, replace, append) {
      path = this.currentPath = this.formatPath(path, append);
      this.onChange(path);
    };

    AbstractHistory.prototype.formatPath = function formatPath(path, append) {
      return path.charAt(0) === '/' ? path : resolvePath(this.currentPath, path, append);
    };

    return AbstractHistory;
  })();

  /**
   * Determine the reusability of an existing router view.
   *
   * @param {Directive} view
   * @param {Object} handler
   * @param {Transition} transition
   */

  function canReuse(view, handler, transition) {
    var component = view.childVM;
    if (!component || !handler) {
      return false;
    }
    // important: check view.Component here because it may
    // have been changed in activate hook
    if (view.Component !== handler.component) {
      return false;
    }
    var canReuseFn = getRouteConfig(component, 'canReuse');
    return typeof canReuseFn === 'boolean' ? canReuseFn : canReuseFn ? canReuseFn.call(component, {
      to: transition.to,
      from: transition.from
    }) : true; // defaults to true
  }

  /**
   * Check if a component can deactivate.
   *
   * @param {Directive} view
   * @param {Transition} transition
   * @param {Function} next
   */

  function canDeactivate(view, transition, next) {
    var fromComponent = view.childVM;
    var hook = getRouteConfig(fromComponent, 'canDeactivate');
    if (!hook) {
      next();
    } else {
      transition.callHook(hook, fromComponent, next, {
        expectBoolean: true
      });
    }
  }

  /**
   * Check if a component can activate.
   *
   * @param {Object} handler
   * @param {Transition} transition
   * @param {Function} next
   */

  function canActivate(handler, transition, next) {
    resolveAsyncComponent(handler, function (Component) {
      // have to check due to async-ness
      if (transition.aborted) {
        return;
      }
      // determine if this component can be activated
      var hook = getRouteConfig(Component, 'canActivate');
      if (!hook) {
        next();
      } else {
        transition.callHook(hook, null, next, {
          expectBoolean: true
        });
      }
    });
  }

  /**
   * Call deactivate hooks for existing router-views.
   *
   * @param {Directive} view
   * @param {Transition} transition
   * @param {Function} next
   */

  function deactivate(view, transition, next) {
    var component = view.childVM;
    var hook = getRouteConfig(component, 'deactivate');
    if (!hook) {
      next();
    } else {
      transition.callHooks(hook, component, next);
    }
  }

  /**
   * Activate / switch component for a router-view.
   *
   * @param {Directive} view
   * @param {Transition} transition
   * @param {Number} depth
   * @param {Function} [cb]
   */

  function activate(view, transition, depth, cb, reuse) {
    var handler = transition.activateQueue[depth];
    if (!handler) {
      saveChildView(view);
      if (view._bound) {
        view.setComponent(null);
      }
      cb && cb();
      return;
    }

    var Component = view.Component = handler.component;
    var activateHook = getRouteConfig(Component, 'activate');
    var dataHook = getRouteConfig(Component, 'data');
    var waitForData = getRouteConfig(Component, 'waitForData');

    view.depth = depth;
    view.activated = false;

    var component = undefined;
    var loading = !!(dataHook && !waitForData);

    // "reuse" is a flag passed down when the parent view is
    // either reused via keep-alive or as a child of a kept-alive view.
    // of course we can only reuse if the current kept-alive instance
    // is of the correct type.
    reuse = reuse && view.childVM && view.childVM.constructor === Component;

    if (reuse) {
      // just reuse
      component = view.childVM;
      component.$loadingRouteData = loading;
    } else {
      saveChildView(view);

      // unbuild current component. this step also destroys
      // and removes all nested child views.
      view.unbuild(true);

      // build the new component. this will also create the
      // direct child view of the current one. it will register
      // itself as view.childView.
      component = view.build({
        _meta: {
          $loadingRouteData: loading
        },
        created: function created() {
          this._routerView = view;
        }
      });

      // handle keep-alive.
      // when a kept-alive child vm is restored, we need to
      // add its cached child views into the router's view list,
      // and also properly update current view's child view.
      if (view.keepAlive) {
        component.$loadingRouteData = loading;
        var cachedChildView = component._keepAliveRouterView;
        if (cachedChildView) {
          view.childView = cachedChildView;
          component._keepAliveRouterView = null;
        }
      }
    }

    // cleanup the component in case the transition is aborted
    // before the component is ever inserted.
    var cleanup = function cleanup() {
      component.$destroy();
    };

    // actually insert the component and trigger transition
    var insert = function insert() {
      if (reuse) {
        cb && cb();
        return;
      }
      var router = transition.router;
      if (router._rendered || router._transitionOnLoad) {
        view.transition(component);
      } else {
        // no transition on first render, manual transition
        /* istanbul ignore if */
        if (view.setCurrent) {
          // 0.12 compat
          view.setCurrent(component);
        } else {
          // 1.0
          view.childVM = component;
        }
        component.$before(view.anchor, null, false);
      }
      cb && cb();
    };

    var afterData = function afterData() {
      // activate the child view
      if (view.childView) {
        activate(view.childView, transition, depth + 1, null, reuse || view.keepAlive);
      }
      insert();
    };

    // called after activation hook is resolved
    var afterActivate = function afterActivate() {
      view.activated = true;
      if (dataHook && waitForData) {
        // wait until data loaded to insert
        loadData(component, transition, dataHook, afterData, cleanup);
      } else {
        // load data and insert at the same time
        if (dataHook) {
          loadData(component, transition, dataHook);
        }
        afterData();
      }
    };

    if (activateHook) {
      transition.callHooks(activateHook, component, afterActivate, {
        cleanup: cleanup,
        postActivate: true
      });
    } else {
      afterActivate();
    }
  }

  /**
   * Reuse a view, just reload data if necessary.
   *
   * @param {Directive} view
   * @param {Transition} transition
   */

  function reuse(view, transition) {
    var component = view.childVM;
    var dataHook = getRouteConfig(component, 'data');
    if (dataHook) {
      loadData(component, transition, dataHook);
    }
  }

  /**
   * Asynchronously load and apply data to component.
   *
   * @param {Vue} component
   * @param {Transition} transition
   * @param {Function} hook
   * @param {Function} cb
   * @param {Function} cleanup
   */

  function loadData(component, transition, hook, cb, cleanup) {
    component.$loadingRouteData = true;
    transition.callHooks(hook, component, function () {
      component.$loadingRouteData = false;
      component.$emit('route-data-loaded', component);
      cb && cb();
    }, {
      cleanup: cleanup,
      postActivate: true,
      processData: function processData(data) {
        // handle promise sugar syntax
        var promises = [];
        if (isPlainObject(data)) {
          Object.keys(data).forEach(function (key) {
            var val = data[key];
            if (isPromise(val)) {
              promises.push(val.then(function (resolvedVal) {
                component.$set(key, resolvedVal);
              }));
            } else {
              component.$set(key, val);
            }
          });
        }
        if (promises.length) {
          return promises[0].constructor.all(promises);
        }
      }
    });
  }

  /**
   * Save the child view for a kept-alive view so that
   * we can restore it when it is switched back to.
   *
   * @param {Directive} view
   */

  function saveChildView(view) {
    if (view.keepAlive && view.childVM && view.childView) {
      view.childVM._keepAliveRouterView = view.childView;
    }
    view.childView = null;
  }

  /**
   * Check plain object.
   *
   * @param {*} val
   */

  function isPlainObject(val) {
    return Object.prototype.toString.call(val) === '[object Object]';
  }

  /**
   * A RouteTransition object manages the pipeline of a
   * router-view switching process. This is also the object
   * passed into user route hooks.
   *
   * @param {Router} router
   * @param {Route} to
   * @param {Route} from
   */

  var RouteTransition = (function () {
    function RouteTransition(router, to, from) {
      babelHelpers.classCallCheck(this, RouteTransition);

      this.router = router;
      this.to = to;
      this.from = from;
      this.next = null;
      this.aborted = false;
      this.done = false;
    }

    /**
     * Abort current transition and return to previous location.
     */

    RouteTransition.prototype.abort = function abort() {
      if (!this.aborted) {
        this.aborted = true;
        // if the root path throws an error during validation
        // on initial load, it gets caught in an infinite loop.
        var abortingOnLoad = !this.from.path && this.to.path === '/';
        if (!abortingOnLoad) {
          this.router.replace(this.from.path || '/');
        }
      }
    };

    /**
     * Abort current transition and redirect to a new location.
     *
     * @param {String} path
     */

    RouteTransition.prototype.redirect = function redirect(path) {
      if (!this.aborted) {
        this.aborted = true;
        if (typeof path === 'string') {
          path = mapParams(path, this.to.params, this.to.query);
        } else {
          path.params = path.params || this.to.params;
          path.query = path.query || this.to.query;
        }
        this.router.replace(path);
      }
    };

    /**
     * A router view transition's pipeline can be described as
     * follows, assuming we are transitioning from an existing
     * <router-view> chain [Component A, Component B] to a new
     * chain [Component A, Component C]:
     *
     *  A    A
     *  | => |
     *  B    C
     *
     * 1. Reusablity phase:
     *   -> canReuse(A, A)
     *   -> canReuse(B, C)
     *   -> determine new queues:
     *      - deactivation: [B]
     *      - activation: [C]
     *
     * 2. Validation phase:
     *   -> canDeactivate(B)
     *   -> canActivate(C)
     *
     * 3. Activation phase:
     *   -> deactivate(B)
     *   -> activate(C)
     *
     * Each of these steps can be asynchronous, and any
     * step can potentially abort the transition.
     *
     * @param {Function} cb
     */

    RouteTransition.prototype.start = function start(cb) {
      var transition = this;

      // determine the queue of views to deactivate
      var deactivateQueue = [];
      var view = this.router._rootView;
      while (view) {
        deactivateQueue.unshift(view);
        view = view.childView;
      }
      var reverseDeactivateQueue = deactivateQueue.slice().reverse();

      // determine the queue of route handlers to activate
      var activateQueue = this.activateQueue = toArray(this.to.matched).map(function (match) {
        return match.handler;
      });

      // 1. Reusability phase
      var i = undefined,
          reuseQueue = undefined;
      for (i = 0; i < reverseDeactivateQueue.length; i++) {
        if (!canReuse(reverseDeactivateQueue[i], activateQueue[i], transition)) {
          break;
        }
      }
      if (i > 0) {
        reuseQueue = reverseDeactivateQueue.slice(0, i);
        deactivateQueue = reverseDeactivateQueue.slice(i).reverse();
        activateQueue = activateQueue.slice(i);
      }

      // 2. Validation phase
      transition.runQueue(deactivateQueue, canDeactivate, function () {
        transition.runQueue(activateQueue, canActivate, function () {
          transition.runQueue(deactivateQueue, deactivate, function () {
            // 3. Activation phase

            // Update router current route
            transition.router._onTransitionValidated(transition);

            // trigger reuse for all reused views
            reuseQueue && reuseQueue.forEach(function (view) {
              return reuse(view, transition);
            });

            // the root of the chain that needs to be replaced
            // is the top-most non-reusable view.
            if (deactivateQueue.length) {
              var _view = deactivateQueue[deactivateQueue.length - 1];
              var depth = reuseQueue ? reuseQueue.length : 0;
              activate(_view, transition, depth, cb);
            } else {
              cb();
            }
          });
        });
      });
    };

    /**
     * Asynchronously and sequentially apply a function to a
     * queue.
     *
     * @param {Array} queue
     * @param {Function} fn
     * @param {Function} cb
     */

    RouteTransition.prototype.runQueue = function runQueue(queue, fn, cb) {
      var transition = this;
      step(0);
      function step(index) {
        if (index >= queue.length) {
          cb();
        } else {
          fn(queue[index], transition, function () {
            step(index + 1);
          });
        }
      }
    };

    /**
     * Call a user provided route transition hook and handle
     * the response (e.g. if the user returns a promise).
     *
     * If the user neither expects an argument nor returns a
     * promise, the hook is assumed to be synchronous.
     *
     * @param {Function} hook
     * @param {*} [context]
     * @param {Function} [cb]
     * @param {Object} [options]
     *                 - {Boolean} expectBoolean
     *                 - {Boolean} postActive
     *                 - {Function} processData
     *                 - {Function} cleanup
     */

    RouteTransition.prototype.callHook = function callHook(hook, context, cb) {
      var _ref = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];

      var _ref$expectBoolean = _ref.expectBoolean;
      var expectBoolean = _ref$expectBoolean === undefined ? false : _ref$expectBoolean;
      var _ref$postActivate = _ref.postActivate;
      var postActivate = _ref$postActivate === undefined ? false : _ref$postActivate;
      var processData = _ref.processData;
      var cleanup = _ref.cleanup;

      var transition = this;
      var nextCalled = false;

      // abort the transition
      var abort = function abort() {
        cleanup && cleanup();
        transition.abort();
      };

      // handle errors
      var onError = function onError(err) {
        postActivate ? next() : abort();
        if (err && !transition.router._suppress) {
          warn$1('Uncaught error during transition: ');
          throw err instanceof Error ? err : new Error(err);
        }
      };

      // since promise swallows errors, we have to
      // throw it in the next tick...
      var onPromiseError = function onPromiseError(err) {
        try {
          onError(err);
        } catch (e) {
          setTimeout(function () {
            throw e;
          }, 0);
        }
      };

      // advance the transition to the next step
      var next = function next() {
        if (nextCalled) {
          warn$1('transition.next() should be called only once.');
          return;
        }
        nextCalled = true;
        if (transition.aborted) {
          cleanup && cleanup();
          return;
        }
        cb && cb();
      };

      var nextWithBoolean = function nextWithBoolean(res) {
        if (typeof res === 'boolean') {
          res ? next() : abort();
        } else if (isPromise(res)) {
          res.then(function (ok) {
            ok ? next() : abort();
          }, onPromiseError);
        } else if (!hook.length) {
          next();
        }
      };

      var nextWithData = function nextWithData(data) {
        var res = undefined;
        try {
          res = processData(data);
        } catch (err) {
          return onError(err);
        }
        if (isPromise(res)) {
          res.then(next, onPromiseError);
        } else {
          next();
        }
      };

      // expose a clone of the transition object, so that each
      // hook gets a clean copy and prevent the user from
      // messing with the internals.
      var exposed = {
        to: transition.to,
        from: transition.from,
        abort: abort,
        next: processData ? nextWithData : next,
        redirect: function redirect() {
          transition.redirect.apply(transition, arguments);
        }
      };

      // actually call the hook
      var res = undefined;
      try {
        res = hook.call(context, exposed);
      } catch (err) {
        return onError(err);
      }

      if (expectBoolean) {
        // boolean hooks
        nextWithBoolean(res);
      } else if (isPromise(res)) {
        // promise
        if (processData) {
          res.then(nextWithData, onPromiseError);
        } else {
          res.then(next, onPromiseError);
        }
      } else if (processData && isPlainOjbect(res)) {
        // data promise sugar
        nextWithData(res);
      } else if (!hook.length) {
        next();
      }
    };

    /**
     * Call a single hook or an array of async hooks in series.
     *
     * @param {Array} hooks
     * @param {*} context
     * @param {Function} cb
     * @param {Object} [options]
     */

    RouteTransition.prototype.callHooks = function callHooks(hooks, context, cb, options) {
      var _this = this;

      if (Array.isArray(hooks)) {
        this.runQueue(hooks, function (hook, _, next) {
          if (!_this.aborted) {
            _this.callHook(hook, context, next, options);
          }
        }, cb);
      } else {
        this.callHook(hooks, context, cb, options);
      }
    };

    return RouteTransition;
  })();

  function isPlainOjbect(val) {
    return Object.prototype.toString.call(val) === '[object Object]';
  }

  function toArray(val) {
    return val ? Array.prototype.slice.call(val) : [];
  }

  var internalKeysRE = /^(component|subRoutes|fullPath)$/;

  /**
   * Route Context Object
   *
   * @param {String} path
   * @param {Router} router
   */

  var Route = function Route(path, router) {
    var _this = this;

    babelHelpers.classCallCheck(this, Route);

    var matched = router._recognizer.recognize(path);
    if (matched) {
      // copy all custom fields from route configs
      [].forEach.call(matched, function (match) {
        for (var key in match.handler) {
          if (!internalKeysRE.test(key)) {
            _this[key] = match.handler[key];
          }
        }
      });
      // set query and params
      this.query = matched.queryParams;
      this.params = [].reduce.call(matched, function (prev, cur) {
        if (cur.params) {
          for (var key in cur.params) {
            prev[key] = cur.params[key];
          }
        }
        return prev;
      }, {});
    }
    // expose path and router
    this.path = path;
    // for internal use
    this.matched = matched || router._notFoundHandler;
    // internal reference to router
    Object.defineProperty(this, 'router', {
      enumerable: false,
      value: router
    });
    // Important: freeze self to prevent observation
    Object.freeze(this);
  };

  function applyOverride (Vue) {
    var _Vue$util = Vue.util;
    var extend = _Vue$util.extend;
    var isArray = _Vue$util.isArray;
    var defineReactive = _Vue$util.defineReactive;

    // override Vue's init and destroy process to keep track of router instances
    var init = Vue.prototype._init;
    Vue.prototype._init = function (options) {
      options = options || {};
      var root = options._parent || options.parent || this;
      var router = root.$router;
      var route = root.$route;
      if (router) {
        // expose router
        this.$router = router;
        router._children.push(this);
        /* istanbul ignore if */
        if (this._defineMeta) {
          // 0.12
          this._defineMeta('$route', route);
        } else {
          // 1.0
          defineReactive(this, '$route', route);
        }
      }
      init.call(this, options);
    };

    var destroy = Vue.prototype._destroy;
    Vue.prototype._destroy = function () {
      if (!this._isBeingDestroyed && this.$router) {
        this.$router._children.$remove(this);
      }
      destroy.apply(this, arguments);
    };

    // 1.0 only: enable route mixins
    var strats = Vue.config.optionMergeStrategies;
    var hooksToMergeRE = /^(data|activate|deactivate)$/;

    if (strats) {
      strats.route = function (parentVal, childVal) {
        if (!childVal) return parentVal;
        if (!parentVal) return childVal;
        var ret = {};
        extend(ret, parentVal);
        for (var key in childVal) {
          var a = ret[key];
          var b = childVal[key];
          // for data, activate and deactivate, we need to merge them into
          // arrays similar to lifecycle hooks.
          if (a && hooksToMergeRE.test(key)) {
            ret[key] = (isArray(a) ? a : [a]).concat(b);
          } else {
            ret[key] = b;
          }
        }
        return ret;
      };
    }
  }

  function View (Vue) {

    var _ = Vue.util;
    var componentDef =
    // 0.12
    Vue.directive('_component') ||
    // 1.0
    Vue.internalDirectives.component;
    // <router-view> extends the internal component directive
    var viewDef = _.extend({}, componentDef);

    // with some overrides
    _.extend(viewDef, {

      _isRouterView: true,

      bind: function bind() {
        var route = this.vm.$route;
        /* istanbul ignore if */
        if (!route) {
          warn$1('<router-view> can only be used inside a ' + 'router-enabled app.');
          return;
        }
        // force dynamic directive so v-component doesn't
        // attempt to build right now
        this._isDynamicLiteral = true;
        // finally, init by delegating to v-component
        componentDef.bind.call(this);

        // locate the parent view
        var parentView = undefined;
        var parent = this.vm;
        while (parent) {
          if (parent._routerView) {
            parentView = parent._routerView;
            break;
          }
          parent = parent.$parent;
        }
        if (parentView) {
          // register self as a child of the parent view,
          // instead of activating now. This is so that the
          // child's activate hook is called after the
          // parent's has resolved.
          this.parentView = parentView;
          parentView.childView = this;
        } else {
          // this is the root view!
          var router = route.router;
          router._rootView = this;
        }

        // handle late-rendered view
        // two possibilities:
        // 1. root view rendered after transition has been
        //    validated;
        // 2. child view rendered after parent view has been
        //    activated.
        var transition = route.router._currentTransition;
        if (!parentView && transition.done || parentView && parentView.activated) {
          var depth = parentView ? parentView.depth + 1 : 0;
          activate(this, transition, depth);
        }
      },

      unbind: function unbind() {
        if (this.parentView) {
          this.parentView.childView = null;
        }
        componentDef.unbind.call(this);
      }
    });

    Vue.elementDirective('router-view', viewDef);
  }

  var trailingSlashRE = /\/$/;
  var regexEscapeRE = /[-.*+?^${}()|[\]\/\\]/g;
  var queryStringRE = /\?.*$/;

  // install v-link, which provides navigation support for
  // HTML5 history mode
  function Link (Vue) {
    var _Vue$util = Vue.util;
    var _bind = _Vue$util.bind;
    var isObject = _Vue$util.isObject;
    var addClass = _Vue$util.addClass;
    var removeClass = _Vue$util.removeClass;

    var onPriority = Vue.directive('on').priority;
    var LINK_UPDATE = '__vue-router-link-update__';

    var activeId = 0;

    Vue.directive('link-active', {
      priority: 9999,
      bind: function bind() {
        var _this = this;

        var id = String(activeId++);
        // collect v-links contained within this element.
        // we need do this here before the parent-child relationship
        // gets messed up by terminal directives (if, for, components)
        var childLinks = this.el.querySelectorAll('[v-link]');
        for (var i = 0, l = childLinks.length; i < l; i++) {
          var link = childLinks[i];
          var existingId = link.getAttribute(LINK_UPDATE);
          var value = existingId ? existingId + ',' + id : id;
          // leave a mark on the link element which can be persisted
          // through fragment clones.
          link.setAttribute(LINK_UPDATE, value);
        }
        this.vm.$on(LINK_UPDATE, this.cb = function (link, path) {
          if (link.activeIds.indexOf(id) > -1) {
            link.updateClasses(path, _this.el);
          }
        });
      },
      unbind: function unbind() {
        this.vm.$off(LINK_UPDATE, this.cb);
      }
    });

    Vue.directive('link', {
      priority: onPriority - 2,

      bind: function bind() {
        var vm = this.vm;
        /* istanbul ignore if */
        if (!vm.$route) {
          warn$1('v-link can only be used inside a router-enabled app.');
          return;
        }
        this.router = vm.$route.router;
        // update things when the route changes
        this.unwatch = vm.$watch('$route', _bind(this.onRouteUpdate, this));
        // check v-link-active ids
        var activeIds = this.el.getAttribute(LINK_UPDATE);
        if (activeIds) {
          this.el.removeAttribute(LINK_UPDATE);
          this.activeIds = activeIds.split(',');
        }
        // no need to handle click if link expects to be opened
        // in a new window/tab.
        /* istanbul ignore if */
        if (this.el.tagName === 'A' && this.el.getAttribute('target') === '_blank') {
          return;
        }
        // handle click
        this.handler = _bind(this.onClick, this);
        this.el.addEventListener('click', this.handler);
      },

      update: function update(target) {
        this.target = target;
        if (isObject(target)) {
          this.append = target.append;
          this.exact = target.exact;
          this.prevActiveClass = this.activeClass;
          this.activeClass = target.activeClass;
        }
        this.onRouteUpdate(this.vm.$route);
      },

      onClick: function onClick(e) {
        // don't redirect with control keys
        /* istanbul ignore if */
        if (e.metaKey || e.ctrlKey || e.shiftKey) return;
        // don't redirect when preventDefault called
        /* istanbul ignore if */
        if (e.defaultPrevented) return;
        // don't redirect on right click
        /* istanbul ignore if */
        if (e.button !== 0) return;

        var target = this.target;
        if (target) {
          // v-link with expression, just go
          e.preventDefault();
          this.router.go(target);
        } else {
          // no expression, delegate for an <a> inside
          var el = e.target;
          while (el.tagName !== 'A' && el !== this.el) {
            el = el.parentNode;
          }
          if (el.tagName === 'A' && sameOrigin(el)) {
            e.preventDefault();
            var path = el.pathname;
            if (this.router.history.root) {
              path = path.replace(this.router.history.rootRE, '');
            }
            this.router.go({
              path: path,
              replace: target && target.replace,
              append: target && target.append
            });
          }
        }
      },

      onRouteUpdate: function onRouteUpdate(route) {
        // router.stringifyPath is dependent on current route
        // and needs to be called again whenver route changes.
        var newPath = this.router.stringifyPath(this.target);
        if (this.path !== newPath) {
          this.path = newPath;
          this.updateActiveMatch();
          this.updateHref();
        }
        if (this.activeIds) {
          this.vm.$emit(LINK_UPDATE, this, route.path);
        } else {
          this.updateClasses(route.path, this.el);
        }
      },

      updateActiveMatch: function updateActiveMatch() {
        this.activeRE = this.path && !this.exact ? new RegExp('^' + this.path.replace(/\/$/, '').replace(queryStringRE, '').replace(regexEscapeRE, '\\$&') + '(\\/|$)') : null;
      },

      updateHref: function updateHref() {
        if (this.el.tagName !== 'A') {
          return;
        }
        var path = this.path;
        var router = this.router;
        var isAbsolute = path.charAt(0) === '/';
        // do not format non-hash relative paths
        var href = path && (router.mode === 'hash' || isAbsolute) ? router.history.formatPath(path, this.append) : path;
        if (href) {
          this.el.href = href;
        } else {
          this.el.removeAttribute('href');
        }
      },

      updateClasses: function updateClasses(path, el) {
        var activeClass = this.activeClass || this.router._linkActiveClass;
        // clear old class
        if (this.prevActiveClass && this.prevActiveClass !== activeClass) {
          toggleClasses(el, this.prevActiveClass, removeClass);
        }
        // remove query string before matching
        var dest = this.path.replace(queryStringRE, '');
        path = path.replace(queryStringRE, '');
        // add new class
        if (this.exact) {
          if (dest === path ||
          // also allow additional trailing slash
          dest.charAt(dest.length - 1) !== '/' && dest === path.replace(trailingSlashRE, '')) {
            toggleClasses(el, activeClass, addClass);
          } else {
            toggleClasses(el, activeClass, removeClass);
          }
        } else {
          if (this.activeRE && this.activeRE.test(path)) {
            toggleClasses(el, activeClass, addClass);
          } else {
            toggleClasses(el, activeClass, removeClass);
          }
        }
      },

      unbind: function unbind() {
        this.el.removeEventListener('click', this.handler);
        this.unwatch && this.unwatch();
      }
    });

    function sameOrigin(link) {
      return link.protocol === location.protocol && link.hostname === location.hostname && link.port === location.port;
    }

    // this function is copied from v-bind:class implementation until
    // we properly expose it...
    function toggleClasses(el, key, fn) {
      key = key.trim();
      if (key.indexOf(' ') === -1) {
        fn(el, key);
        return;
      }
      var keys = key.split(/\s+/);
      for (var i = 0, l = keys.length; i < l; i++) {
        fn(el, keys[i]);
      }
    }
  }

  var historyBackends = {
    abstract: AbstractHistory,
    hash: HashHistory,
    html5: HTML5History
  };

  // late bind during install
  var Vue = undefined;

  /**
   * Router constructor
   *
   * @param {Object} [options]
   */

  var Router = (function () {
    function Router() {
      var _this = this;

      var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

      var _ref$hashbang = _ref.hashbang;
      var hashbang = _ref$hashbang === undefined ? true : _ref$hashbang;
      var _ref$abstract = _ref.abstract;
      var abstract = _ref$abstract === undefined ? false : _ref$abstract;
      var _ref$history = _ref.history;
      var history = _ref$history === undefined ? false : _ref$history;
      var _ref$saveScrollPosition = _ref.saveScrollPosition;
      var saveScrollPosition = _ref$saveScrollPosition === undefined ? false : _ref$saveScrollPosition;
      var _ref$transitionOnLoad = _ref.transitionOnLoad;
      var transitionOnLoad = _ref$transitionOnLoad === undefined ? false : _ref$transitionOnLoad;
      var _ref$suppressTransitionError = _ref.suppressTransitionError;
      var suppressTransitionError = _ref$suppressTransitionError === undefined ? false : _ref$suppressTransitionError;
      var _ref$root = _ref.root;
      var root = _ref$root === undefined ? null : _ref$root;
      var _ref$linkActiveClass = _ref.linkActiveClass;
      var linkActiveClass = _ref$linkActiveClass === undefined ? 'v-link-active' : _ref$linkActiveClass;
      babelHelpers.classCallCheck(this, Router);

      /* istanbul ignore if */
      if (!Router.installed) {
        throw new Error('Please install the Router with Vue.use() before ' + 'creating an instance.');
      }

      // Vue instances
      this.app = null;
      this._children = [];

      // route recognizer
      this._recognizer = new RouteRecognizer();
      this._guardRecognizer = new RouteRecognizer();

      // state
      this._started = false;
      this._startCb = null;
      this._currentRoute = {};
      this._currentTransition = null;
      this._previousTransition = null;
      this._notFoundHandler = null;
      this._notFoundRedirect = null;
      this._beforeEachHooks = [];
      this._afterEachHooks = [];

      // trigger transition on initial render?
      this._rendered = false;
      this._transitionOnLoad = transitionOnLoad;

      // history mode
      this._root = root;
      this._abstract = abstract;
      this._hashbang = hashbang;

      // check if HTML5 history is available
      var hasPushState = typeof window !== 'undefined' && window.history && window.history.pushState;
      this._history = history && hasPushState;
      this._historyFallback = history && !hasPushState;

      // create history object
      var inBrowser = Vue.util.inBrowser;
      this.mode = !inBrowser || this._abstract ? 'abstract' : this._history ? 'html5' : 'hash';

      var History = historyBackends[this.mode];
      this.history = new History({
        root: root,
        hashbang: this._hashbang,
        onChange: function onChange(path, state, anchor) {
          _this._match(path, state, anchor);
        }
      });

      // other options
      this._saveScrollPosition = saveScrollPosition;
      this._linkActiveClass = linkActiveClass;
      this._suppress = suppressTransitionError;
    }

    /**
     * Allow directly passing components to a route
     * definition.
     *
     * @param {String} path
     * @param {Object} handler
     */

    // API ===================================================

    /**
    * Register a map of top-level paths.
    *
    * @param {Object} map
    */

    Router.prototype.map = function map(_map) {
      for (var route in _map) {
        this.on(route, _map[route]);
      }
      return this;
    };

    /**
     * Register a single root-level path
     *
     * @param {String} rootPath
     * @param {Object} handler
     *                 - {String} component
     *                 - {Object} [subRoutes]
     *                 - {Boolean} [forceRefresh]
     *                 - {Function} [before]
     *                 - {Function} [after]
     */

    Router.prototype.on = function on(rootPath, handler) {
      if (rootPath === '*') {
        this._notFound(handler);
      } else {
        this._addRoute(rootPath, handler, []);
      }
      return this;
    };

    /**
     * Set redirects.
     *
     * @param {Object} map
     */

    Router.prototype.redirect = function redirect(map) {
      for (var path in map) {
        this._addRedirect(path, map[path]);
      }
      return this;
    };

    /**
     * Set aliases.
     *
     * @param {Object} map
     */

    Router.prototype.alias = function alias(map) {
      for (var path in map) {
        this._addAlias(path, map[path]);
      }
      return this;
    };

    /**
     * Set global before hook.
     *
     * @param {Function} fn
     */

    Router.prototype.beforeEach = function beforeEach(fn) {
      this._beforeEachHooks.push(fn);
      return this;
    };

    /**
     * Set global after hook.
     *
     * @param {Function} fn
     */

    Router.prototype.afterEach = function afterEach(fn) {
      this._afterEachHooks.push(fn);
      return this;
    };

    /**
     * Navigate to a given path.
     * The path can be an object describing a named path in
     * the format of { name: '...', params: {}, query: {}}
     * The path is assumed to be already decoded, and will
     * be resolved against root (if provided)
     *
     * @param {String|Object} path
     * @param {Boolean} [replace]
     */

    Router.prototype.go = function go(path) {
      var replace = false;
      var append = false;
      if (Vue.util.isObject(path)) {
        replace = path.replace;
        append = path.append;
      }
      path = this.stringifyPath(path);
      if (path) {
        this.history.go(path, replace, append);
      }
    };

    /**
     * Short hand for replacing current path
     *
     * @param {String} path
     */

    Router.prototype.replace = function replace(path) {
      if (typeof path === 'string') {
        path = { path: path };
      }
      path.replace = true;
      this.go(path);
    };

    /**
     * Start the router.
     *
     * @param {VueConstructor} App
     * @param {String|Element} container
     * @param {Function} [cb]
     */

    Router.prototype.start = function start(App, container, cb) {
      /* istanbul ignore if */
      if (this._started) {
        warn$1('already started.');
        return;
      }
      this._started = true;
      this._startCb = cb;
      if (!this.app) {
        /* istanbul ignore if */
        if (!App || !container) {
          throw new Error('Must start vue-router with a component and a ' + 'root container.');
        }
        /* istanbul ignore if */
        if (App instanceof Vue) {
          throw new Error('Must start vue-router with a component, not a ' + 'Vue instance.');
        }
        this._appContainer = container;
        var Ctor = this._appConstructor = typeof App === 'function' ? App : Vue.extend(App);
        // give it a name for better debugging
        Ctor.options.name = Ctor.options.name || 'RouterApp';
      }

      // handle history fallback in browsers that do not
      // support HTML5 history API
      if (this._historyFallback) {
        var _location = window.location;
        var _history = new HTML5History({ root: this._root });
        var path = _history.root ? _location.pathname.replace(_history.rootRE, '') : _location.pathname;
        if (path && path !== '/') {
          _location.assign((_history.root || '') + '/' + this.history.formatPath(path) + _location.search);
          return;
        }
      }

      this.history.start();
    };

    /**
     * Stop listening to route changes.
     */

    Router.prototype.stop = function stop() {
      this.history.stop();
      this._started = false;
    };

    /**
     * Normalize named route object / string paths into
     * a string.
     *
     * @param {Object|String|Number} path
     * @return {String}
     */

    Router.prototype.stringifyPath = function stringifyPath(path) {
      var generatedPath = '';
      if (path && typeof path === 'object') {
        if (path.name) {
          var extend = Vue.util.extend;
          var currentParams = this._currentTransition && this._currentTransition.to.params;
          var targetParams = path.params || {};
          var params = currentParams ? extend(extend({}, currentParams), targetParams) : targetParams;
          generatedPath = encodeURI(this._recognizer.generate(path.name, params));
        } else if (path.path) {
          generatedPath = encodeURI(path.path);
        }
        if (path.query) {
          // note: the generated query string is pre-URL-encoded by the recognizer
          var query = this._recognizer.generateQueryString(path.query);
          if (generatedPath.indexOf('?') > -1) {
            generatedPath += '&' + query.slice(1);
          } else {
            generatedPath += query;
          }
        }
      } else {
        generatedPath = encodeURI(path ? path + '' : '');
      }
      return generatedPath;
    };

    // Internal methods ======================================

    /**
    * Add a route containing a list of segments to the internal
    * route recognizer. Will be called recursively to add all
    * possible sub-routes.
    *
    * @param {String} path
    * @param {Object} handler
    * @param {Array} segments
    */

    Router.prototype._addRoute = function _addRoute(path, handler, segments) {
      guardComponent(path, handler);
      handler.path = path;
      handler.fullPath = (segments.reduce(function (path, segment) {
        return path + segment.path;
      }, '') + path).replace('//', '/');
      segments.push({
        path: path,
        handler: handler
      });
      this._recognizer.add(segments, {
        as: handler.name
      });
      // add sub routes
      if (handler.subRoutes) {
        for (var subPath in handler.subRoutes) {
          // recursively walk all sub routes
          this._addRoute(subPath, handler.subRoutes[subPath],
          // pass a copy in recursion to avoid mutating
          // across branches
          segments.slice());
        }
      }
    };

    /**
     * Set the notFound route handler.
     *
     * @param {Object} handler
     */

    Router.prototype._notFound = function _notFound(handler) {
      guardComponent('*', handler);
      this._notFoundHandler = [{ handler: handler }];
    };

    /**
     * Add a redirect record.
     *
     * @param {String} path
     * @param {String} redirectPath
     */

    Router.prototype._addRedirect = function _addRedirect(path, redirectPath) {
      if (path === '*') {
        this._notFoundRedirect = redirectPath;
      } else {
        this._addGuard(path, redirectPath, this.replace);
      }
    };

    /**
     * Add an alias record.
     *
     * @param {String} path
     * @param {String} aliasPath
     */

    Router.prototype._addAlias = function _addAlias(path, aliasPath) {
      this._addGuard(path, aliasPath, this._match);
    };

    /**
     * Add a path guard.
     *
     * @param {String} path
     * @param {String} mappedPath
     * @param {Function} handler
     */

    Router.prototype._addGuard = function _addGuard(path, mappedPath, _handler) {
      var _this2 = this;

      this._guardRecognizer.add([{
        path: path,
        handler: function handler(match, query) {
          var realPath = mapParams(mappedPath, match.params, query);
          _handler.call(_this2, realPath);
        }
      }]);
    };

    /**
     * Check if a path matches any redirect records.
     *
     * @param {String} path
     * @return {Boolean} - if true, will skip normal match.
     */

    Router.prototype._checkGuard = function _checkGuard(path) {
      var matched = this._guardRecognizer.recognize(path, true);
      if (matched) {
        matched[0].handler(matched[0], matched.queryParams);
        return true;
      } else if (this._notFoundRedirect) {
        matched = this._recognizer.recognize(path);
        if (!matched) {
          this.replace(this._notFoundRedirect);
          return true;
        }
      }
    };

    /**
     * Match a URL path and set the route context on vm,
     * triggering view updates.
     *
     * @param {String} path
     * @param {Object} [state]
     * @param {String} [anchor]
     */

    Router.prototype._match = function _match(path, state, anchor) {
      var _this3 = this;

      if (this._checkGuard(path)) {
        return;
      }

      var currentRoute = this._currentRoute;
      var currentTransition = this._currentTransition;

      if (currentTransition) {
        if (currentTransition.to.path === path) {
          // do nothing if we have an active transition going to the same path
          return;
        } else if (currentRoute.path === path) {
          // We are going to the same path, but we also have an ongoing but
          // not-yet-validated transition. Abort that transition and reset to
          // prev transition.
          currentTransition.aborted = true;
          this._currentTransition = this._prevTransition;
          return;
        } else {
          // going to a totally different path. abort ongoing transition.
          currentTransition.aborted = true;
        }
      }

      // construct new route and transition context
      var route = new Route(path, this);
      var transition = new RouteTransition(this, route, currentRoute);

      // current transition is updated right now.
      // however, current route will only be updated after the transition has
      // been validated.
      this._prevTransition = currentTransition;
      this._currentTransition = transition;

      if (!this.app) {
        (function () {
          // initial render
          var router = _this3;
          _this3.app = new _this3._appConstructor({
            el: _this3._appContainer,
            created: function created() {
              this.$router = router;
            },
            _meta: {
              $route: route
            }
          });
        })();
      }

      // check global before hook
      var beforeHooks = this._beforeEachHooks;
      var startTransition = function startTransition() {
        transition.start(function () {
          _this3._postTransition(route, state, anchor);
        });
      };

      if (beforeHooks.length) {
        transition.runQueue(beforeHooks, function (hook, _, next) {
          if (transition === _this3._currentTransition) {
            transition.callHook(hook, null, next, {
              expectBoolean: true
            });
          }
        }, startTransition);
      } else {
        startTransition();
      }

      if (!this._rendered && this._startCb) {
        this._startCb.call(null);
      }

      // HACK:
      // set rendered to true after the transition start, so
      // that components that are acitvated synchronously know
      // whether it is the initial render.
      this._rendered = true;
    };

    /**
     * Set current to the new transition.
     * This is called by the transition object when the
     * validation of a route has succeeded.
     *
     * @param {Transition} transition
     */

    Router.prototype._onTransitionValidated = function _onTransitionValidated(transition) {
      // set current route
      var route = this._currentRoute = transition.to;
      // update route context for all children
      if (this.app.$route !== route) {
        this.app.$route = route;
        this._children.forEach(function (child) {
          child.$route = route;
        });
      }
      // call global after hook
      if (this._afterEachHooks.length) {
        this._afterEachHooks.forEach(function (hook) {
          return hook.call(null, {
            to: transition.to,
            from: transition.from
          });
        });
      }
      this._currentTransition.done = true;
    };

    /**
     * Handle stuff after the transition.
     *
     * @param {Route} route
     * @param {Object} [state]
     * @param {String} [anchor]
     */

    Router.prototype._postTransition = function _postTransition(route, state, anchor) {
      // handle scroll positions
      // saved scroll positions take priority
      // then we check if the path has an anchor
      var pos = state && state.pos;
      if (pos && this._saveScrollPosition) {
        Vue.nextTick(function () {
          window.scrollTo(pos.x, pos.y);
        });
      } else if (anchor) {
        Vue.nextTick(function () {
          var el = document.getElementById(anchor.slice(1));
          if (el) {
            window.scrollTo(window.scrollX, el.offsetTop);
          }
        });
      }
    };

    return Router;
  })();

  function guardComponent(path, handler) {
    var comp = handler.component;
    if (Vue.util.isPlainObject(comp)) {
      comp = handler.component = Vue.extend(comp);
    }
    /* istanbul ignore if */
    if (typeof comp !== 'function') {
      handler.component = null;
      warn$1('invalid component for route "' + path + '".');
    }
  }

  /* Installation */

  Router.installed = false;

  /**
   * Installation interface.
   * Install the necessary directives.
   */

  Router.install = function (externalVue) {
    /* istanbul ignore if */
    if (Router.installed) {
      warn$1('already installed.');
      return;
    }
    Vue = externalVue;
    applyOverride(Vue);
    View(Vue);
    Link(Vue);
    exports$1.Vue = Vue;
    Router.installed = true;
  };

  // auto install
  /* istanbul ignore if */
  if (typeof window !== 'undefined' && window.Vue) {
    window.Vue.use(Router);
  }

  return Router;

}));
/*!
 * vue-resource v0.7.4
 * https://github.com/vuejs/vue-resource
 * Released under the MIT License.
 */

(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.VueResource = factory());
}(this, function () { 'use strict';

  var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
  };

  /**
   * Utility functions.
   */

  var util = {};
  var config = {};
  var array = [];
  var console = window.console;
  function Util (Vue) {
      util = Vue.util;
      config = Vue.config;
  }

  var isArray = Array.isArray;

  function warn(msg) {
      if (console && util.warn && (!config.silent || config.debug)) {
          console.warn('[VueResource warn]: ' + msg);
      }
  }

  function error(msg) {
      if (console) {
          console.error(msg);
      }
  }

  function nextTick(cb, ctx) {
      return util.nextTick(cb, ctx);
  }

  function trim(str) {
      return str.replace(/^\s*|\s*$/g, '');
  }

  function toLower(str) {
      return str ? str.toLowerCase() : '';
  }

  function isString(val) {
      return typeof val === 'string';
  }

  function isFunction(val) {
      return typeof val === 'function';
  }

  function isObject(obj) {
      return obj !== null && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object';
  }

  function isPlainObject(obj) {
      return isObject(obj) && Object.getPrototypeOf(obj) == Object.prototype;
  }

  function options(fn, obj, opts) {

      opts = opts || {};

      if (isFunction(opts)) {
          opts = opts.call(obj);
      }

      return merge(fn.bind({ $vm: obj, $options: opts }), fn, { $options: opts });
  }

  function each(obj, iterator) {

      var i, key;

      if (typeof obj.length == 'number') {
          for (i = 0; i < obj.length; i++) {
              iterator.call(obj[i], obj[i], i);
          }
      } else if (isObject(obj)) {
          for (key in obj) {
              if (obj.hasOwnProperty(key)) {
                  iterator.call(obj[key], obj[key], key);
              }
          }
      }

      return obj;
  }

  function extend(target) {

      var args = array.slice.call(arguments, 1);

      args.forEach(function (arg) {
          _merge(target, arg);
      });

      return target;
  }

  function merge(target) {

      var args = array.slice.call(arguments, 1);

      args.forEach(function (arg) {
          _merge(target, arg, true);
      });

      return target;
  }

  function _merge(target, source, deep) {
      for (var key in source) {
          if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {
              if (isPlainObject(source[key]) && !isPlainObject(target[key])) {
                  target[key] = {};
              }
              if (isArray(source[key]) && !isArray(target[key])) {
                  target[key] = [];
              }
              _merge(target[key], source[key], deep);
          } else if (source[key] !== undefined) {
              target[key] = source[key];
          }
      }
  }

  function root (options, next) {

      var url = next(options);

      if (isString(options.root) && !url.match(/^(https?:)?\//)) {
          url = options.root + '/' + url;
      }

      return url;
  }

  function query (options, next) {

      var urlParams = Object.keys(Url.options.params),
          query = {},
          url = next(options);

      each(options.params, function (value, key) {
          if (urlParams.indexOf(key) === -1) {
              query[key] = value;
          }
      });

      query = Url.params(query);

      if (query) {
          url += (url.indexOf('?') == -1 ? '?' : '&') + query;
      }

      return url;
  }

  function legacy (options, next) {

      var variables = [],
          url = next(options);

      url = url.replace(/(\/?):([a-z]\w*)/gi, function (match, slash, name) {

          warn('The `:' + name + '` parameter syntax has been deprecated. Use the `{' + name + '}` syntax instead.');

          if (options.params[name]) {
              variables.push(name);
              return slash + encodeUriSegment(options.params[name]);
          }

          return '';
      });

      variables.forEach(function (key) {
          delete options.params[key];
      });

      return url;
  }

  function encodeUriSegment(value) {

      return encodeUriQuery(value, true).replace(/%26/gi, '&').replace(/%3D/gi, '=').replace(/%2B/gi, '+');
  }

  function encodeUriQuery(value, spaces) {

      return encodeURIComponent(value).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, spaces ? '%20' : '+');
  }

  /**
   * URL Template v2.0.6 (https://github.com/bramstein/url-template)
   */

  function expand(url, params, variables) {

      var tmpl = parse(url),
          expanded = tmpl.expand(params);

      if (variables) {
          variables.push.apply(variables, tmpl.vars);
      }

      return expanded;
  }

  function parse(template) {

      var operators = ['+', '#', '.', '/', ';', '?', '&'],
          variables = [];

      return {
          vars: variables,
          expand: function expand(context) {
              return template.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g, function (_, expression, literal) {
                  if (expression) {

                      var operator = null,
                          values = [];

                      if (operators.indexOf(expression.charAt(0)) !== -1) {
                          operator = expression.charAt(0);
                          expression = expression.substr(1);
                      }

                      expression.split(/,/g).forEach(function (variable) {
                          var tmp = /([^:\*]*)(?::(\d+)|(\*))?/.exec(variable);
                          values.push.apply(values, getValues(context, operator, tmp[1], tmp[2] || tmp[3]));
                          variables.push(tmp[1]);
                      });

                      if (operator && operator !== '+') {

                          var separator = ',';

                          if (operator === '?') {
                              separator = '&';
                          } else if (operator !== '#') {
                              separator = operator;
                          }

                          return (values.length !== 0 ? operator : '') + values.join(separator);
                      } else {
                          return values.join(',');
                      }
                  } else {
                      return encodeReserved(literal);
                  }
              });
          }
      };
  }

  function getValues(context, operator, key, modifier) {

      var value = context[key],
          result = [];

      if (isDefined(value) && value !== '') {
          if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {
              value = value.toString();

              if (modifier && modifier !== '*') {
                  value = value.substring(0, parseInt(modifier, 10));
              }

              result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : null));
          } else {
              if (modifier === '*') {
                  if (Array.isArray(value)) {
                      value.filter(isDefined).forEach(function (value) {
                          result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : null));
                      });
                  } else {
                      Object.keys(value).forEach(function (k) {
                          if (isDefined(value[k])) {
                              result.push(encodeValue(operator, value[k], k));
                          }
                      });
                  }
              } else {
                  var tmp = [];

                  if (Array.isArray(value)) {
                      value.filter(isDefined).forEach(function (value) {
                          tmp.push(encodeValue(operator, value));
                      });
                  } else {
                      Object.keys(value).forEach(function (k) {
                          if (isDefined(value[k])) {
                              tmp.push(encodeURIComponent(k));
                              tmp.push(encodeValue(operator, value[k].toString()));
                          }
                      });
                  }

                  if (isKeyOperator(operator)) {
                      result.push(encodeURIComponent(key) + '=' + tmp.join(','));
                  } else if (tmp.length !== 0) {
                      result.push(tmp.join(','));
                  }
              }
          }
      } else {
          if (operator === ';') {
              result.push(encodeURIComponent(key));
          } else if (value === '' && (operator === '&' || operator === '?')) {
              result.push(encodeURIComponent(key) + '=');
          } else if (value === '') {
              result.push('');
          }
      }

      return result;
  }

  function isDefined(value) {
      return value !== undefined && value !== null;
  }

  function isKeyOperator(operator) {
      return operator === ';' || operator === '&' || operator === '?';
  }

  function encodeValue(operator, value, key) {

      value = operator === '+' || operator === '#' ? encodeReserved(value) : encodeURIComponent(value);

      if (key) {
          return encodeURIComponent(key) + '=' + value;
      } else {
          return value;
      }
  }

  function encodeReserved(str) {
      return str.split(/(%[0-9A-Fa-f]{2})/g).map(function (part) {
          if (!/%[0-9A-Fa-f]/.test(part)) {
              part = encodeURI(part);
          }
          return part;
      }).join('');
  }

  function template (options) {

      var variables = [],
          url = expand(options.url, options.params, variables);

      variables.forEach(function (key) {
          delete options.params[key];
      });

      return url;
  }

  /**
   * Service for URL templating.
   */

  var ie = document.documentMode;
  var el = document.createElement('a');

  function Url(url, params) {

      var self = this || {},
          options = url,
          transform;

      if (isString(url)) {
          options = { url: url, params: params };
      }

      options = merge({}, Url.options, self.$options, options);

      Url.transforms.forEach(function (handler) {
          transform = factory(handler, transform, self.$vm);
      });

      return transform(options);
  }

  /**
   * Url options.
   */

  Url.options = {
      url: '',
      root: null,
      params: {}
  };

  /**
   * Url transforms.
   */

  Url.transforms = [template, legacy, query, root];

  /**
   * Encodes a Url parameter string.
   *
   * @param {Object} obj
   */

  Url.params = function (obj) {

      var params = [],
          escape = encodeURIComponent;

      params.add = function (key, value) {

          if (isFunction(value)) {
              value = value();
          }

          if (value === null) {
              value = '';
          }

          this.push(escape(key) + '=' + escape(value));
      };

      serialize(params, obj);

      return params.join('&').replace(/%20/g, '+');
  };

  /**
   * Parse a URL and return its components.
   *
   * @param {String} url
   */

  Url.parse = function (url) {

      if (ie) {
          el.href = url;
          url = el.href;
      }

      el.href = url;

      return {
          href: el.href,
          protocol: el.protocol ? el.protocol.replace(/:$/, '') : '',
          port: el.port,
          host: el.host,
          hostname: el.hostname,
          pathname: el.pathname.charAt(0) === '/' ? el.pathname : '/' + el.pathname,
          search: el.search ? el.search.replace(/^\?/, '') : '',
          hash: el.hash ? el.hash.replace(/^#/, '') : ''
      };
  };

  function factory(handler, next, vm) {
      return function (options) {
          return handler.call(vm, options, next);
      };
  }

  function serialize(params, obj, scope) {

      var array = isArray(obj),
          plain = isPlainObject(obj),
          hash;

      each(obj, function (value, key) {

          hash = isObject(value) || isArray(value);

          if (scope) {
              key = scope + '[' + (plain || hash ? key : '') + ']';
          }

          if (!scope && array) {
              params.add(value.name, value.value);
          } else if (hash) {
              serialize(params, value, key);
          } else {
              params.add(key, value);
          }
      });
  }

  /**
   * Promises/A+ polyfill v1.1.4 (https://github.com/bramstein/promis)
   */

  var RESOLVED = 0;
  var REJECTED = 1;
  var PENDING = 2;

  function Promise$2(executor) {

      this.state = PENDING;
      this.value = undefined;
      this.deferred = [];

      var promise = this;

      try {
          executor(function (x) {
              promise.resolve(x);
          }, function (r) {
              promise.reject(r);
          });
      } catch (e) {
          promise.reject(e);
      }
  }

  Promise$2.reject = function (r) {
      return new Promise$2(function (resolve, reject) {
          reject(r);
      });
  };

  Promise$2.resolve = function (x) {
      return new Promise$2(function (resolve, reject) {
          resolve(x);
      });
  };

  Promise$2.all = function all(iterable) {
      return new Promise$2(function (resolve, reject) {
          var count = 0,
              result = [];

          if (iterable.length === 0) {
              resolve(result);
          }

          function resolver(i) {
              return function (x) {
                  result[i] = x;
                  count += 1;

                  if (count === iterable.length) {
                      resolve(result);
                  }
              };
          }

          for (var i = 0; i < iterable.length; i += 1) {
              Promise$2.resolve(iterable[i]).then(resolver(i), reject);
          }
      });
  };

  Promise$2.race = function race(iterable) {
      return new Promise$2(function (resolve, reject) {
          for (var i = 0; i < iterable.length; i += 1) {
              Promise$2.resolve(iterable[i]).then(resolve, reject);
          }
      });
  };

  var p$1 = Promise$2.prototype;

  p$1.resolve = function resolve(x) {
      var promise = this;

      if (promise.state === PENDING) {
          if (x === promise) {
              throw new TypeError('Promise settled with itself.');
          }

          var called = false;

          try {
              var then = x && x['then'];

              if (x !== null && (typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && typeof then === 'function') {
                  then.call(x, function (x) {
                      if (!called) {
                          promise.resolve(x);
                      }
                      called = true;
                  }, function (r) {
                      if (!called) {
                          promise.reject(r);
                      }
                      called = true;
                  });
                  return;
              }
          } catch (e) {
              if (!called) {
                  promise.reject(e);
              }
              return;
          }

          promise.state = RESOLVED;
          promise.value = x;
          promise.notify();
      }
  };

  p$1.reject = function reject(reason) {
      var promise = this;

      if (promise.state === PENDING) {
          if (reason === promise) {
              throw new TypeError('Promise settled with itself.');
          }

          promise.state = REJECTED;
          promise.value = reason;
          promise.notify();
      }
  };

  p$1.notify = function notify() {
      var promise = this;

      nextTick(function () {
          if (promise.state !== PENDING) {
              while (promise.deferred.length) {
                  var deferred = promise.deferred.shift(),
                      onResolved = deferred[0],
                      onRejected = deferred[1],
                      resolve = deferred[2],
                      reject = deferred[3];

                  try {
                      if (promise.state === RESOLVED) {
                          if (typeof onResolved === 'function') {
                              resolve(onResolved.call(undefined, promise.value));
                          } else {
                              resolve(promise.value);
                          }
                      } else if (promise.state === REJECTED) {
                          if (typeof onRejected === 'function') {
                              resolve(onRejected.call(undefined, promise.value));
                          } else {
                              reject(promise.value);
                          }
                      }
                  } catch (e) {
                      reject(e);
                  }
              }
          }
      });
  };

  p$1.then = function then(onResolved, onRejected) {
      var promise = this;

      return new Promise$2(function (resolve, reject) {
          promise.deferred.push([onResolved, onRejected, resolve, reject]);
          promise.notify();
      });
  };

  p$1.catch = function (onRejected) {
      return this.then(undefined, onRejected);
  };

  var PromiseObj = window.Promise || Promise$2;

  function Promise$1(executor, context) {

      if (executor instanceof PromiseObj) {
          this.promise = executor;
      } else {
          this.promise = new PromiseObj(executor.bind(context));
      }

      this.context = context;
  }

  Promise$1.all = function (iterable, context) {
      return new Promise$1(PromiseObj.all(iterable), context);
  };

  Promise$1.resolve = function (value, context) {
      return new Promise$1(PromiseObj.resolve(value), context);
  };

  Promise$1.reject = function (reason, context) {
      return new Promise$1(PromiseObj.reject(reason), context);
  };

  Promise$1.race = function (iterable, context) {
      return new Promise$1(PromiseObj.race(iterable), context);
  };

  var p = Promise$1.prototype;

  p.bind = function (context) {
      this.context = context;
      return this;
  };

  p.then = function (fulfilled, rejected) {

      if (fulfilled && fulfilled.bind && this.context) {
          fulfilled = fulfilled.bind(this.context);
      }

      if (rejected && rejected.bind && this.context) {
          rejected = rejected.bind(this.context);
      }

      this.promise = this.promise.then(fulfilled, rejected);

      return this;
  };

  p.catch = function (rejected) {

      if (rejected && rejected.bind && this.context) {
          rejected = rejected.bind(this.context);
      }

      this.promise = this.promise.catch(rejected);

      return this;
  };

  p.finally = function (callback) {

      return this.then(function (value) {
          callback.call(this);
          return value;
      }, function (reason) {
          callback.call(this);
          return PromiseObj.reject(reason);
      });
  };

  p.success = function (callback) {

      warn('The `success` method has been deprecated. Use the `then` method instead.');

      return this.then(function (response) {
          return callback.call(this, response.data, response.status, response) || response;
      });
  };

  p.error = function (callback) {

      warn('The `error` method has been deprecated. Use the `catch` method instead.');

      return this.catch(function (response) {
          return callback.call(this, response.data, response.status, response) || response;
      });
  };

  p.always = function (callback) {

      warn('The `always` method has been deprecated. Use the `finally` method instead.');

      var cb = function cb(response) {
          return callback.call(this, response.data, response.status, response) || response;
      };

      return this.then(cb, cb);
  };

  function xdrClient (request) {
      return new Promise$1(function (resolve) {

          var xdr = new XDomainRequest(),
              response = { request: request },
              handler;

          request.cancel = function () {
              xdr.abort();
          };

          xdr.open(request.method, Url(request), true);

          handler = function handler(event) {

              response.data = xdr.responseText;
              response.status = xdr.status;
              response.statusText = xdr.statusText || '';

              resolve(response);
          };

          xdr.timeout = 0;
          xdr.onload = handler;
          xdr.onabort = handler;
          xdr.onerror = handler;
          xdr.ontimeout = function () {};
          xdr.onprogress = function () {};

          xdr.send(request.data);
      });
  }

  var originUrl = Url.parse(location.href);
  var supportCors = 'withCredentials' in new XMLHttpRequest();

  var exports$1 = {
      request: function request(_request) {

          if (_request.crossOrigin === null) {
              _request.crossOrigin = crossOrigin(_request);
          }

          if (_request.crossOrigin) {

              if (!supportCors) {
                  _request.client = xdrClient;
              }

              _request.emulateHTTP = false;
          }

          return _request;
      }
  };

  function crossOrigin(request) {

      var requestUrl = Url.parse(Url(request));

      return requestUrl.protocol !== originUrl.protocol || requestUrl.host !== originUrl.host;
  }

  var exports$2 = {
      request: function request(_request) {

          if (_request.emulateJSON && isPlainObject(_request.data)) {
              _request.headers['Content-Type'] = 'application/x-www-form-urlencoded';
              _request.data = Url.params(_request.data);
          }

          if (isObject(_request.data) && /FormData/i.test(_request.data.toString())) {
              delete _request.headers['Content-Type'];
          }

          if (isPlainObject(_request.data)) {
              _request.data = JSON.stringify(_request.data);
          }

          return _request;
      },
      response: function response(_response) {

          try {
              _response.data = JSON.parse(_response.data);
          } catch (e) {}

          return _response;
      }
  };

  function jsonpClient (request) {
      return new Promise$1(function (resolve) {

          var callback = '_jsonp' + Math.random().toString(36).substr(2),
              response = { request: request, data: null },
              handler,
              script;

          request.params[request.jsonp] = callback;
          request.cancel = function () {
              handler({ type: 'cancel' });
          };

          script = document.createElement('script');
          script.src = Url(request);
          script.type = 'text/javascript';
          script.async = true;

          window[callback] = function (data) {
              response.data = data;
          };

          handler = function handler(event) {

              if (event.type === 'load' && response.data !== null) {
                  response.status = 200;
              } else if (event.type === 'error') {
                  response.status = 404;
              } else {
                  response.status = 0;
              }

              resolve(response);

              delete window[callback];
              document.body.removeChild(script);
          };

          script.onload = handler;
          script.onerror = handler;

          document.body.appendChild(script);
      });
  }

  var exports$3 = {
      request: function request(_request) {

          if (_request.method == 'JSONP') {
              _request.client = jsonpClient;
          }

          return _request;
      }
  };

  var exports$4 = {
      request: function request(_request) {

          if (isFunction(_request.beforeSend)) {
              _request.beforeSend.call(this, _request);
          }

          return _request;
      }
  };

  /**
   * HTTP method override Interceptor.
   */

  var exports$5 = {
      request: function request(_request) {

          if (_request.emulateHTTP && /^(PUT|PATCH|DELETE)$/i.test(_request.method)) {
              _request.headers['X-HTTP-Method-Override'] = _request.method;
              _request.method = 'POST';
          }

          return _request;
      }
  };

  var exports$6 = {
      request: function request(_request) {

          _request.method = _request.method.toUpperCase();
          _request.headers = extend({}, Http.headers.common, !_request.crossOrigin ? Http.headers.custom : {}, Http.headers[_request.method.toLowerCase()], _request.headers);

          if (isPlainObject(_request.data) && /^(GET|JSONP)$/i.test(_request.method)) {
              extend(_request.params, _request.data);
              delete _request.data;
          }

          return _request;
      }
  };

  /**
   * Timeout Interceptor.
   */

  var exports$7 = function exports() {

      var timeout;

      return {
          request: function request(_request) {

              if (_request.timeout) {
                  timeout = setTimeout(function () {
                      _request.cancel();
                  }, _request.timeout);
              }

              return _request;
          },
          response: function response(_response) {

              clearTimeout(timeout);

              return _response;
          }
      };
  };

  function interceptor (handler, vm) {

      return function (client) {

          if (isFunction(handler)) {
              handler = handler.call(vm, Promise$1);
          }

          return function (request) {

              if (isFunction(handler.request)) {
                  request = handler.request.call(vm, request);
              }

              return when(request, function (request) {
                  return when(client(request), function (response) {

                      if (isFunction(handler.response)) {
                          response = handler.response.call(vm, response);
                      }

                      return response;
                  });
              });
          };
      };
  }

  function when(value, fulfilled, rejected) {

      var promise = Promise$1.resolve(value);

      if (arguments.length < 2) {
          return promise;
      }

      return promise.then(fulfilled, rejected);
  }

  function xhrClient (request) {
      return new Promise$1(function (resolve) {

          var xhr = new XMLHttpRequest(),
              response = { request: request },
              handler;

          request.cancel = function () {
              xhr.abort();
          };

          xhr.open(request.method, Url(request), true);

          handler = function handler(event) {

              response.data = 'response' in xhr ? xhr.response : xhr.responseText;
              response.status = xhr.status === 1223 ? 204 : xhr.status; // IE9 status bug
              response.statusText = trim(xhr.statusText || '');
              response.headers = xhr.getAllResponseHeaders();

              resolve(response);
          };

          xhr.timeout = 0;
          xhr.onload = handler;
          xhr.onabort = handler;
          xhr.onerror = handler;
          xhr.ontimeout = function () {};
          xhr.onprogress = function () {};

          if (isPlainObject(request.xhr)) {
              extend(xhr, request.xhr);
          }

          if (isPlainObject(request.upload)) {
              extend(xhr.upload, request.upload);
          }

          each(request.headers || {}, function (value, header) {
              xhr.setRequestHeader(header, value);
          });

          xhr.send(request.data);
      });
  }

  function Client (request) {

      var response = (request.client || xhrClient)(request);

      return Promise$1.resolve(response).then(function (response) {

          if (response.headers) {

              var headers = parseHeaders(response.headers);

              response.headers = function (name) {

                  if (name) {
                      return headers[toLower(name)];
                  }

                  return headers;
              };
          }

          response.ok = response.status >= 200 && response.status < 300;

          return response;
      });
  }

  function parseHeaders(str) {

      var headers = {},
          value,
          name,
          i;

      if (isString(str)) {
          each(str.split('\n'), function (row) {

              i = row.indexOf(':');
              name = trim(toLower(row.slice(0, i)));
              value = trim(row.slice(i + 1));

              if (headers[name]) {

                  if (isArray(headers[name])) {
                      headers[name].push(value);
                  } else {
                      headers[name] = [headers[name], value];
                  }
              } else {

                  headers[name] = value;
              }
          });
      }

      return headers;
  }

  /**
   * Service for sending network requests.
   */

  var jsonType = { 'Content-Type': 'application/json' };

  function Http(url, options) {

      var self = this || {},
          client = Client,
          request,
          promise;

      Http.interceptors.forEach(function (handler) {
          client = interceptor(handler, self.$vm)(client);
      });

      options = isObject(url) ? url : extend({ url: url }, options);
      request = merge({}, Http.options, self.$options, options);
      promise = client(request).bind(self.$vm).then(function (response) {

          return response.ok ? response : Promise$1.reject(response);
      }, function (response) {

          if (response instanceof Error) {
              error(response);
          }

          return Promise$1.reject(response);
      });

      if (request.success) {
          promise.success(request.success);
      }

      if (request.error) {
          promise.error(request.error);
      }

      return promise;
  }

  Http.options = {
      method: 'get',
      data: '',
      params: {},
      headers: {},
      xhr: null,
      upload: null,
      jsonp: 'callback',
      beforeSend: null,
      crossOrigin: null,
      emulateHTTP: false,
      emulateJSON: false,
      timeout: 0
  };

  Http.headers = {
      put: jsonType,
      post: jsonType,
      patch: jsonType,
      delete: jsonType,
      common: { 'Accept': 'application/json, text/plain, */*' },
      custom: { 'X-Requested-With': 'XMLHttpRequest' }
  };

  Http.interceptors = [exports$4, exports$7, exports$3, exports$5, exports$2, exports$6, exports$1];

  ['get', 'put', 'post', 'patch', 'delete', 'jsonp'].forEach(function (method) {

      Http[method] = function (url, data, success, options) {

          if (isFunction(data)) {
              options = success;
              success = data;
              data = undefined;
          }

          if (isObject(success)) {
              options = success;
              success = undefined;
          }

          return this(url, extend({ method: method, data: data, success: success }, options));
      };
  });

  function Resource(url, params, actions, options) {

      var self = this || {},
          resource = {};

      actions = extend({}, Resource.actions, actions);

      each(actions, function (action, name) {

          action = merge({ url: url, params: params || {} }, options, action);

          resource[name] = function () {
              return (self.$http || Http)(opts(action, arguments));
          };
      });

      return resource;
  }

  function opts(action, args) {

      var options = extend({}, action),
          params = {},
          data,
          success,
          error;

      switch (args.length) {

          case 4:

              error = args[3];
              success = args[2];

          case 3:
          case 2:

              if (isFunction(args[1])) {

                  if (isFunction(args[0])) {

                      success = args[0];
                      error = args[1];

                      break;
                  }

                  success = args[1];
                  error = args[2];
              } else {

                  params = args[0];
                  data = args[1];
                  success = args[2];

                  break;
              }

          case 1:

              if (isFunction(args[0])) {
                  success = args[0];
              } else if (/^(POST|PUT|PATCH)$/i.test(options.method)) {
                  data = args[0];
              } else {
                  params = args[0];
              }

              break;

          case 0:

              break;

          default:

              throw 'Expected up to 4 arguments [params, data, success, error], got ' + args.length + ' arguments';
      }

      options.data = data;
      options.params = extend({}, options.params, params);

      if (success) {
          options.success = success;
      }

      if (error) {
          options.error = error;
      }

      return options;
  }

  Resource.actions = {

      get: { method: 'GET' },
      save: { method: 'POST' },
      query: { method: 'GET' },
      update: { method: 'PUT' },
      remove: { method: 'DELETE' },
      delete: { method: 'DELETE' }

  };

  function plugin(Vue) {

      if (plugin.installed) {
          return;
      }

      Util(Vue);

      Vue.url = Url;
      Vue.http = Http;
      Vue.resource = Resource;
      Vue.Promise = Promise$1;

      Object.defineProperties(Vue.prototype, {

          $url: {
              get: function get() {
                  return options(Vue.url, this, this.$options.url);
              }
          },

          $http: {
              get: function get() {
                  return options(Vue.http, this, this.$options.http);
              }
          },

          $resource: {
              get: function get() {
                  return Vue.resource.bind(this);
              }
          },

          $promise: {
              get: function get() {
                  var _this = this;

                  return function (executor) {
                      return new Vue.Promise(executor, _this);
                  };
              }
          }

      });
  }

  if (typeof window !== 'undefined' && window.Vue) {
      window.Vue.use(plugin);
  }

  return plugin;

}));
/*!
 * vue-validator v2.1.3
 * (c) 2016 kazuya kawaguchi
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.VueValidator = factory());
}(this, function () { 'use strict';

  var babelHelpers = {};
  babelHelpers.typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
  };

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  babelHelpers.createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  babelHelpers.inherits = function (subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
    }

    subClass.prototype = Object.create(superClass && superClass.prototype, {
      constructor: {
        value: subClass,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  };

  babelHelpers.possibleConstructorReturn = function (self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return call && (typeof call === "object" || typeof call === "function") ? call : self;
  };

  babelHelpers;

  /**
   * Utilties
   */

  // export default for holding the Vue reference
  var exports$1 = {};
  /**
   * warn
   *
   * @param {String} msg
   * @param {Error} [err]
   *
   */

  function warn(msg, err) {
    if (window.console) {
      console.warn('[vue-validator] ' + msg);
      if (err) {
        console.warn(err.stack);
      }
    }
  }

  /**
   * empty
   *
   * @param {Array|Object} target
   * @return {Boolean}
   */

  function empty(target) {
    if (target === null || target === undefined) {
      return true;
    }

    if (Array.isArray(target)) {
      if (target.length > 0) {
        return false;
      }
      if (target.length === 0) {
        return true;
      }
    } else if (exports$1.Vue.util.isPlainObject(target)) {
      for (var key in target) {
        if (exports$1.Vue.util.hasOwn(target, key)) {
          return false;
        }
      }
    }

    return true;
  }

  /**
   * each
   *
   * @param {Array|Object} target
   * @param {Function} iterator
   * @param {Object} [context]
   */

  function each(target, iterator, context) {
    if (Array.isArray(target)) {
      for (var i = 0; i < target.length; i++) {
        iterator.call(context || target[i], target[i], i);
      }
    } else if (exports$1.Vue.util.isPlainObject(target)) {
      var hasOwn = exports$1.Vue.util.hasOwn;
      for (var key in target) {
        if (hasOwn(target, key)) {
          iterator.call(context || target[key], target[key], key);
        }
      }
    }
  }

  /**
   * pull
   *
   * @param {Array} arr
   * @param {Object} item
   * @return {Object|null}
   */

  function pull(arr, item) {
    var index = exports$1.Vue.util.indexOf(arr, item);
    return ~index ? arr.splice(index, 1) : null;
  }

  /**
   * trigger
   *
   * @param {Element} el
   * @param {String} event
   * @param {Object} [args]
   */

  function trigger(el, event, args) {
    var e = document.createEvent('HTMLEvents');
    e.initEvent(event, true, false);

    if (args) {
      for (var prop in args) {
        e[prop] = args[prop];
      }
    }

    // Due to Firefox bug, events fired on disabled
    // non-attached form controls can throw errors
    try {
      el.dispatchEvent(e);
    } catch (e) {}
  }

  /**
   * Forgiving check for a promise
   *
   * @param {Object} p
   * @return {Boolean}
   */

  function isPromise(p) {
    return p && typeof p.then === 'function';
  }

  /**
   * Togging classes
   *
   * @param {Element} el
   * @param {String} key
   * @param {Function} fn
   */

  function toggleClasses(el, key, fn) {
    key = key.trim();
    if (key.indexOf(' ') === -1) {
      fn(el, key);
      return;
    }

    var keys = key.split(/\s+/);
    for (var i = 0, l = keys.length; i < l; i++) {
      fn(el, keys[i]);
    }
  }

  /**
   * Fundamental validate functions
   */

  /**
   * required
   *
   * This function validate whether the value has been filled out.
   *
   * @param {*} val
   * @return {Boolean}
   */

  function required(val) {
    if (Array.isArray(val)) {
      if (val.length !== 0) {
        var valid = true;
        for (var i = 0, l = val.length; i < l; i++) {
          valid = required(val[i]);
          if (!valid) {
            break;
          }
        }
        return valid;
      } else {
        return false;
      }
    } else if (typeof val === 'number' || typeof val === 'function') {
      return true;
    } else if (typeof val === 'boolean') {
      return val;
    } else if (typeof val === 'string') {
      return val.length > 0;
    } else if (val !== null && (typeof val === 'undefined' ? 'undefined' : babelHelpers.typeof(val)) === 'object') {
      return Object.keys(val).length > 0;
    } else if (val === null || val === undefined) {
      return false;
    }
  }

  /**
   * pattern
   *
   * This function validate whether the value matches the regex pattern
   *
   * @param val
   * @param {String} pat
   * @return {Boolean}
   */

  function pattern(val, pat) {
    if (typeof pat !== 'string') {
      return false;
    }

    var match = pat.match(new RegExp('^/(.*?)/([gimy]*)$'));
    if (!match) {
      return false;
    }

    return new RegExp(match[1], match[2]).test(val);
  }

  /**
   * minlength
   *
   * This function validate whether the minimum length.
   *
   * @param {String|Array} val
   * @param {String|Number} min
   * @return {Boolean}
   */

  function minlength(val, min) {
    if (typeof val === 'string') {
      return isInteger(min, 10) && val.length >= parseInt(min, 10);
    } else if (Array.isArray(val)) {
      return val.length >= parseInt(min, 10);
    } else {
      return false;
    }
  }

  /**
   * maxlength
   *
   * This function validate whether the maximum length.
   *
   * @param {String|Array} val
   * @param {String|Number} max
   * @return {Boolean}
   */

  function maxlength(val, max) {
    if (typeof val === 'string') {
      return isInteger(max, 10) && val.length <= parseInt(max, 10);
    } else if (Array.isArray(val)) {
      return val.length <= parseInt(max, 10);
    } else {
      return false;
    }
  }

  /**
   * min
   *
   * This function validate whether the minimum value of the numberable value.
   *
   * @param {*} val
   * @param {*} arg minimum
   * @return {Boolean}
   */

  function min(val, arg) {
    return !isNaN(+val) && !isNaN(+arg) && +val >= +arg;
  }

  /**
   * max
   *
   * This function validate whether the maximum value of the numberable value.
   *
   * @param {*} val
   * @param {*} arg maximum
   * @return {Boolean}
   */

  function max(val, arg) {
    return !isNaN(+val) && !isNaN(+arg) && +val <= +arg;
  }

  /**
   * isInteger
   *
   * This function check whether the value of the string is integer.
   *
   * @param {String} val
   * @return {Boolean}
   * @private
   */

  function isInteger(val) {
    return (/^(-?[1-9]\d*|0)$/.test(val)
    );
  }

var validators = Object.freeze({
    required: required,
    pattern: pattern,
    minlength: minlength,
    maxlength: maxlength,
    min: min,
    max: max
  });

  function Asset (Vue) {
    var extend = Vue.util.extend;

    // set global validators asset
    var assets = Object.create(null);
    extend(assets, validators);
    Vue.options.validators = assets;

    // set option merge strategy
    var strats = Vue.config.optionMergeStrategies;
    if (strats) {
      strats.validators = function (parent, child) {
        if (!child) {
          return parent;
        }
        if (!parent) {
          return child;
        }
        var ret = Object.create(null);
        extend(ret, parent);
        for (var key in child) {
          ret[key] = child[key];
        }
        return ret;
      };
    }

    /**
     * Register or retrieve a global validator definition.
     *
     * @param {String} id
     * @param {Function} definition
     */

    Vue.validator = function (id, definition) {
      if (!definition) {
        return Vue.options['validators'][id];
      } else {
        Vue.options['validators'][id] = definition;
      }
    };
  }

  function Override (Vue) {
    // override _init
    var init = Vue.prototype._init;
    Vue.prototype._init = function (options) {
      if (!this._validatorMaps) {
        this._validatorMaps = Object.create(null);
      }
      init.call(this, options);
    };

    // override _destroy
    var destroy = Vue.prototype._destroy;
    Vue.prototype._destroy = function () {
      destroy.apply(this, arguments);
      this._validatorMaps = null;
    };
  }

  var VALIDATE_UPDATE = '__vue-validator-validate-update__';
  var PRIORITY_VALIDATE = 16;
  var PRIORITY_VALIDATE_CLASS = 32;
  var REGEX_FILTER = /[^|]\|[^|]/;
  var REGEX_VALIDATE_DIRECTIVE = /^v-validate(?:$|:(.*)$)/;
  var REGEX_EVENT = /^v-on:|^@/;

  var classId = 0; // ID for validation class

  function ValidateClass (Vue) {
    var vIf = Vue.directive('if');
    var FragmentFactory = Vue.FragmentFactory;
    var _Vue$util = Vue.util;
    var toArray = _Vue$util.toArray;
    var replace = _Vue$util.replace;
    var createAnchor = _Vue$util.createAnchor;

    /**
     * `v-validate-class` directive
     */

    Vue.directive('validate-class', {
      terminal: true,
      priority: vIf.priority + PRIORITY_VALIDATE_CLASS,

      bind: function bind() {
        var _this = this;

        var id = String(classId++);
        this.setClassIds(this.el, id);

        this.vm.$on(VALIDATE_UPDATE, this.cb = function (classIds, validation, results) {
          if (classIds.indexOf(id) > -1) {
            validation.updateClasses(results, _this.frag.node);
          }
        });

        this.setupFragment();
      },
      unbind: function unbind() {
        this.vm.$off(VALIDATE_UPDATE, this.cb);
        this.teardownFragment();
      },
      setClassIds: function setClassIds(el, id) {
        var childNodes = toArray(el.childNodes);
        for (var i = 0, l = childNodes.length; i < l; i++) {
          var element = childNodes[i];
          if (element.nodeType === 1) {
            var hasAttrs = element.hasAttributes();
            var attrs = hasAttrs && toArray(element.attributes);
            for (var k = 0, _l = attrs.length; k < _l; k++) {
              var attr = attrs[k];
              if (attr.name.match(REGEX_VALIDATE_DIRECTIVE)) {
                var existingId = element.getAttribute(VALIDATE_UPDATE);
                var value = existingId ? existingId + ',' + id : id;
                element.setAttribute(VALIDATE_UPDATE, value);
              }
            }
          }

          if (element.hasChildNodes()) {
            this.setClassIds(element, id);
          }
        }
      },
      setupFragment: function setupFragment() {
        this.anchor = createAnchor('v-validate-class');
        replace(this.el, this.anchor);

        this.factory = new FragmentFactory(this.vm, this.el);
        this.frag = this.factory.create(this._host, this._scope, this._frag);
        this.frag.before(this.anchor);
      },
      teardownFragment: function teardownFragment() {
        if (this.frag) {
          this.frag.remove();
          this.frag = null;
          this.factory = null;
        }

        replace(this.anchor, this.el);
        this.anchor = null;
      }
    });
  }

  function Validate (Vue) {
    var vIf = Vue.directive('if');
    var FragmentFactory = Vue.FragmentFactory;
    var parseDirective = Vue.parsers.directive.parseDirective;
    var _Vue$util = Vue.util;
    var inBrowser = _Vue$util.inBrowser;
    var bind = _Vue$util.bind;
    var on = _Vue$util.on;
    var off = _Vue$util.off;
    var createAnchor = _Vue$util.createAnchor;
    var replace = _Vue$util.replace;
    var camelize = _Vue$util.camelize;
    var isPlainObject = _Vue$util.isPlainObject;

    // Test for IE10/11 textarea placeholder clone bug

    function checkTextareaCloneBug() {
      if (inBrowser) {
        var t = document.createElement('textarea');
        t.placeholder = 't';
        return t.cloneNode(true).value === 't';
      } else {
        return false;
      }
    }
    var hasTextareaCloneBug = checkTextareaCloneBug();

    /**
     * `v-validate` directive
     */

    Vue.directive('validate', {
      terminal: true,
      priority: vIf.priority + PRIORITY_VALIDATE,
      params: ['group', 'field', 'detect-blur', 'detect-change', 'initial', 'classes'],

      paramWatchers: {
        detectBlur: function detectBlur(val, old) {
          if (this._invalid) {
            return;
          }
          this.validation.detectBlur = this.isDetectBlur(val);
          this.validator.validate(this.field);
        },
        detectChange: function detectChange(val, old) {
          if (this._invalid) {
            return;
          }
          this.validation.detectChange = this.isDetectChange(val);
          this.validator.validate(this.field);
        }
      },

      bind: function bind() {
        var el = this.el;

        if ('development' !== 'production' && el.__vue__) {
          warn('v-validate="' + this.expression + '" cannot be used on an instance root element.');
          this._invalid = true;
          return;
        }

        if ('development' !== 'production' && (el.hasAttribute('v-if') || el.hasAttribute('v-for'))) {
          warn('v-validate cannot be used `v-if` or `v-for` build-in terminal directive ' + 'on an element. these is wrapped with `<template>` or other tags: ' + '(e.g. <validator name="validator">' + '<template v-if="hidden">' + '<input type="text" v-validate:field1="[\'required\']">' + '</template>' + '</validator>).');
          this._invalid = true;
          return;
        }

        if ('development' !== 'production' && !(this.arg || this.params.field)) {
          warn('you need specify field name for v-validate directive.');
          this._invalid = true;
          return;
        }

        var validatorName = this.vm.$options._validator;
        if ('development' !== 'production' && !validatorName) {
          warn('you need to wrap the elements to be validated in a <validator> element: ' + '(e.g. <validator name="validator">' + '<input type="text" v-validate:field1="[\'required\']">' + '</validator>).');
          this._invalid = true;
          return;
        }

        var raw = el.getAttribute('v-model');

        var _parseModelRaw = this.parseModelRaw(raw);

        var model = _parseModelRaw.model;
        var filters = _parseModelRaw.filters;

        this.model = model;

        this.setupFragment();
        this.setupValidate(validatorName, model, filters);
        this.listen();
      },
      update: function update(value, old) {
        if (!value || this._invalid) {
          return;
        }

        if (isPlainObject(value)) {
          this.handleObject(value);
        } else if (Array.isArray(value)) {
          this.handleArray(value);
        }

        var options = { field: this.field, noopable: this._initialNoopValidation };
        if (this.frag) {
          options.el = this.frag.node;
        }
        this.validator.validate(options);

        if (this._initialNoopValidation) {
          this._initialNoopValidation = null;
        }
      },
      unbind: function unbind() {
        if (this._invalid) {
          return;
        }

        this.unlisten();
        this.teardownValidate();
        this.teardownFragment();

        this.model = null;
      },
      parseModelRaw: function parseModelRaw(raw) {
        if (REGEX_FILTER.test(raw)) {
          var parsed = parseDirective(raw);
          return { model: parsed.expression, filters: parsed.filters };
        } else {
          return { model: raw };
        }
      },
      setupValidate: function setupValidate(name, model, filters) {
        var params = this.params;
        var validator = this.validator = this.vm._validatorMaps[name];

        this.field = camelize(this.arg ? this.arg : params.field);

        this.validation = validator.manageValidation(this.field, model, this.vm, this.getElementFrom(this.frag), this._scope, filters, params.initial, this.isDetectBlur(params.detectBlur), this.isDetectChange(params.detectChange));

        isPlainObject(params.classes) && this.validation.setValidationClasses(params.classes);

        params.group && validator.addGroupValidation(params.group, this.field);

        this._initialNoopValidation = this.isInitialNoopValidation(params.initial);
      },
      listen: function listen() {
        var model = this.model;
        var validation = this.validation;
        var el = this.getElementFrom(this.frag);

        this.onBlur = bind(validation.listener, validation);
        on(el, 'blur', this.onBlur);
        if ((el.type === 'radio' || el.tagName === 'SELECT') && !model) {
          this.onChange = bind(validation.listener, validation);
          on(el, 'change', this.onChange);
        } else if (el.type === 'checkbox') {
          if (!model) {
            this.onChange = bind(validation.listener, validation);
            on(el, 'change', this.onChange);
          } else {
            this.onClick = bind(validation.listener, validation);
            on(el, 'click', this.onClick);
          }
        } else {
          if (!model) {
            this.onInput = bind(validation.listener, validation);
            on(el, 'input', this.onInput);
          }
        }
      },
      unlisten: function unlisten() {
        var el = this.getElementFrom(this.frag);

        if (this.onInput) {
          off(el, 'input', this.onInput);
          this.onInput = null;
        }

        if (this.onClick) {
          off(el, 'click', this.onClick);
          this.onClick = null;
        }

        if (this.onChange) {
          off(el, 'change', this.onChange);
          this.onChange = null;
        }

        if (this.onBlur) {
          off(el, 'blur', this.onBlur);
          this.onBlur = null;
        }
      },
      teardownValidate: function teardownValidate() {
        if (this.validator && this.validation) {
          var el = this.getElementFrom(this.frag);

          this.params.group && this.validator.removeGroupValidation(this.params.group, this.field);

          this.validator.unmanageValidation(this.field, el);

          this.validator = null;
          this.validation = null;
          this.field = null;
        }
      },
      setupFragment: function setupFragment() {
        this.anchor = createAnchor('v-validate');
        replace(this.el, this.anchor);

        this.factory = new FragmentFactory(this.vm, this.shimNode(this.el));
        this.frag = this.factory.create(this._host, this._scope, this._frag);
        this.frag.before(this.anchor);
      },
      teardownFragment: function teardownFragment() {
        if (this.frag) {
          this.frag.remove();
          this.frag = null;
          this.factory = null;
        }

        replace(this.anchor, this.el);
        this.anchor = null;
      },
      handleArray: function handleArray(value) {
        var _this = this;

        each(value, function (val) {
          _this.validation.setValidation(val);
        });
      },
      handleObject: function handleObject(value) {
        var _this2 = this;

        each(value, function (val, key) {
          if (isPlainObject(val)) {
            if ('rule' in val) {
              var msg = 'message' in val ? val.message : null;
              var initial = 'initial' in val ? val.initial : null;
              _this2.validation.setValidation(key, val.rule, msg, initial);
            }
          } else {
            _this2.validation.setValidation(key, val);
          }
        });
      },
      isDetectBlur: function isDetectBlur(detectBlur) {
        return detectBlur === undefined || detectBlur === 'on' || detectBlur === true;
      },
      isDetectChange: function isDetectChange(detectChange) {
        return detectChange === undefined || detectChange === 'on' || detectChange === true;
      },
      isInitialNoopValidation: function isInitialNoopValidation(initial) {
        return initial === 'off' || initial === false;
      },
      shimNode: function shimNode(node) {
        var ret = node;
        if (hasTextareaCloneBug) {
          if (node.tagName === 'TEXTAREA') {
            ret = node.cloneNode(true);
            ret.value = node.value;
            var i = ret.childNodes.length;
            while (i--) {
              ret.removeChild(ret.childNodes[i]);
            }
          }
        }
        return ret;
      },
      getElementFrom: function getElementFrom(frag) {
        return frag.single ? frag.node : frag.node.nextSibling;
      }
    });
  }

  /**
   * BaseValidation class
   */

  var BaseValidation = function () {
    function BaseValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, BaseValidation);

      this.field = field;
      this.touched = false;
      this.dirty = false;
      this.modified = false;

      this._modified = false;
      this._model = model;
      this._filters = filters;
      this._validator = validator;
      this._vm = vm;
      this._el = el;
      this._forScope = scope;
      this._init = this._getValue(el);
      this._validators = {};
      this._detectBlur = detectBlur;
      this._detectChange = detectChange;
      this._classes = {};
    }

    BaseValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this = this;

      var scope = this._getScope();
      var model = this._model;

      this._initial = initial;

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        this._classIds = classIds.split(',');
      }

      if (model) {
        el.value = this._evalModel(model, this._filters);
        this._unwatch = scope.$watch(model, function (val, old) {
          if (val !== old) {
            if (_this.guardValidate(el, 'input')) {
              return;
            }

            _this.handleValidate(el, { noopable: _this._initial });
            if (_this._initial) {
              _this._initial = null;
            }
          }
        }, { deep: true });
      }
    };

    BaseValidation.prototype.unmanageElement = function unmanageElement(el) {
      this._unwatch && this._unwatch();
    };

    BaseValidation.prototype.setValidation = function setValidation(name, arg, msg, initial) {
      var validator = this._validators[name];
      if (!validator) {
        validator = this._validators[name] = {};
        validator.name = name;
      }

      validator.arg = arg;
      if (msg) {
        validator.msg = msg;
      }

      if (initial) {
        validator.initial = initial;
        validator._isNoopable = true;
      }
    };

    BaseValidation.prototype.setValidationClasses = function setValidationClasses(classes) {
      var _this2 = this;

      each(classes, function (value, key) {
        _this2._classes[key] = value;
      });
    };

    BaseValidation.prototype.willUpdateFlags = function willUpdateFlags() {
      var touched = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];

      touched && this.willUpdateTouched(this._el, 'blur');
      this.willUpdateDirty(this._el);
      this.willUpdateModified(this._el);
    };

    BaseValidation.prototype.willUpdateTouched = function willUpdateTouched(el, type) {
      if (type && type === 'blur') {
        this.touched = true;
        this._fireEvent(el, 'touched');
      }
    };

    BaseValidation.prototype.willUpdateDirty = function willUpdateDirty(el) {
      if (!this.dirty && this._checkModified(el)) {
        this.dirty = true;
        this._fireEvent(el, 'dirty');
      }
    };

    BaseValidation.prototype.willUpdateModified = function willUpdateModified(el) {
      this.modified = this._checkModified(el);
      if (this._modified !== this.modified) {
        this._fireEvent(el, 'modified', { modified: this.modified });
        this._modified = this.modified;
      }
    };

    BaseValidation.prototype.listener = function listener(e) {
      if (this.guardValidate(e.target, e.type)) {
        return;
      }

      this.handleValidate(e.target, { type: e.type });
    };

    BaseValidation.prototype.handleValidate = function handleValidate(el) {
      var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

      var _ref$type = _ref.type;
      var type = _ref$type === undefined ? null : _ref$type;
      var _ref$noopable = _ref.noopable;
      var noopable = _ref$noopable === undefined ? false : _ref$noopable;

      this.willUpdateTouched(el, type);
      this.willUpdateDirty(el);
      this.willUpdateModified(el);

      this._validator.validate({ field: this.field, el: el, noopable: noopable });
    };

    BaseValidation.prototype.validate = function validate(cb) {
      var _this3 = this;

      var noopable = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];
      var el = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

      var _ = exports$1.Vue.util;

      var results = {};
      var errors = [];
      var valid = true;

      this._runValidators(function (descriptor, name, done) {
        var asset = _this3._resolveValidator(name);
        var validator = null;
        var msg = null;

        if (_.isPlainObject(asset)) {
          if (asset.check && typeof asset.check === 'function') {
            validator = asset.check;
          }
          if (asset.message) {
            msg = asset.message;
          }
        } else if (typeof asset === 'function') {
          validator = asset;
        }

        if (descriptor.msg) {
          msg = descriptor.msg;
        }

        if (noopable) {
          results[name] = false;
          return done();
        }

        if (descriptor._isNoopable) {
          results[name] = false;
          descriptor._isNoopable = null;
          return done();
        }

        if (validator) {
          var value = _this3._getValue(_this3._el);
          _this3._invokeValidator(_this3._vm, validator, value, descriptor.arg, function (ret, err) {
            if (!ret) {
              valid = false;
              if (err) {
                // async error message
                errors.push({ validator: name, message: err });
                results[name] = err;
              } else if (msg) {
                var error = { validator: name };
                error.message = typeof msg === 'function' ? msg.call(_this3._vm, _this3.field, descriptor.arg) : msg;
                errors.push(error);
                results[name] = error.message;
              } else {
                results[name] = !ret;
              }
            } else {
              results[name] = !ret;
            }

            done();
          });
        } else {
          done();
        }
      }, function () {
        // finished
        _this3._fireEvent(_this3._el, valid ? 'valid' : 'invalid');

        var props = {
          valid: valid,
          invalid: !valid,
          touched: _this3.touched,
          untouched: !_this3.touched,
          dirty: _this3.dirty,
          pristine: !_this3.dirty,
          modified: _this3.modified
        };
        if (!empty(errors)) {
          props.errors = errors;
        }
        _.extend(results, props);

        _this3.willUpdateClasses(results, el);

        cb(results);
      });
    };

    BaseValidation.prototype.resetFlags = function resetFlags() {
      this.touched = false;
      this.dirty = false;
      this.modified = false;
      this._modified = false;
    };

    BaseValidation.prototype.reset = function reset() {
      each(this._validators, function (descriptor, key) {
        if (descriptor.initial && !descriptor._isNoopable) {
          descriptor._isNoopable = true;
        }
      });
      this.resetFlags();
      this._init = this._getValue(this._el);
    };

    BaseValidation.prototype.willUpdateClasses = function willUpdateClasses(results) {
      var _this4 = this;

      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      if (this._checkClassIds(el)) {
        (function () {
          var classIds = _this4._getClassIds(el);
          _this4.vm.$nextTick(function () {
            _this4.vm.$emit(VALIDATE_UPDATE, classIds, _this4, results);
          });
        })();
      } else {
        this.updateClasses(results);
      }
    };

    BaseValidation.prototype.updateClasses = function updateClasses(results) {
      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      this._updateClasses(el || this._el, results);
    };

    BaseValidation.prototype.guardValidate = function guardValidate(el, type) {
      if (type && type === 'blur' && !this.detectBlur) {
        return true;
      }

      if (type && type === 'input' && !this.detectChange) {
        return true;
      }

      if (type && type === 'change' && !this.detectChange) {
        return true;
      }

      if (type && type === 'click' && !this.detectChange) {
        return true;
      }

      return false;
    };

    BaseValidation.prototype._getValue = function _getValue(el) {
      return el.value;
    };

    BaseValidation.prototype._getScope = function _getScope() {
      return this._forScope || this._vm;
    };

    BaseValidation.prototype._getClassIds = function _getClassIds(el) {
      return this._classIds;
    };

    BaseValidation.prototype._checkModified = function _checkModified(target) {
      return this._init !== this._getValue(target);
    };

    BaseValidation.prototype._checkClassIds = function _checkClassIds(el) {
      return this._getClassIds(el);
    };

    BaseValidation.prototype._fireEvent = function _fireEvent(el, type, args) {
      trigger(el, type, args);
    };

    BaseValidation.prototype._evalModel = function _evalModel(model, filters) {
      var scope = this._getScope();

      var val = null;
      if (filters) {
        val = scope.$get(model);
        return filters ? this._applyFilters(val, null, filters) : val;
      } else {
        val = scope.$get(model);
        return val === undefined || val === null ? '' : val;
      }
    };

    BaseValidation.prototype._updateClasses = function _updateClasses(el, results) {
      this._toggleValid(el, results.valid);
      this._toggleTouched(el, results.touched);
      this._togglePristine(el, results.pristine);
      this._toggleModfied(el, results.modified);
    };

    BaseValidation.prototype._toggleValid = function _toggleValid(el, valid) {
      var _util$Vue$util = exports$1.Vue.util;
      var addClass = _util$Vue$util.addClass;
      var removeClass = _util$Vue$util.removeClass;

      var validClass = this._classes.valid || 'valid';
      var invalidClass = this._classes.invalid || 'invalid';

      if (valid) {
        toggleClasses(el, validClass, addClass);
        toggleClasses(el, invalidClass, removeClass);
      } else {
        toggleClasses(el, validClass, removeClass);
        toggleClasses(el, invalidClass, addClass);
      }
    };

    BaseValidation.prototype._toggleTouched = function _toggleTouched(el, touched) {
      var _util$Vue$util2 = exports$1.Vue.util;
      var addClass = _util$Vue$util2.addClass;
      var removeClass = _util$Vue$util2.removeClass;

      var touchedClass = this._classes.touched || 'touched';
      var untouchedClass = this._classes.untouched || 'untouched';

      if (touched) {
        toggleClasses(el, touchedClass, addClass);
        toggleClasses(el, untouchedClass, removeClass);
      } else {
        toggleClasses(el, touchedClass, removeClass);
        toggleClasses(el, untouchedClass, addClass);
      }
    };

    BaseValidation.prototype._togglePristine = function _togglePristine(el, pristine) {
      var _util$Vue$util3 = exports$1.Vue.util;
      var addClass = _util$Vue$util3.addClass;
      var removeClass = _util$Vue$util3.removeClass;

      var pristineClass = this._classes.pristine || 'pristine';
      var dirtyClass = this._classes.dirty || 'dirty';

      if (pristine) {
        toggleClasses(el, pristineClass, addClass);
        toggleClasses(el, dirtyClass, removeClass);
      } else {
        toggleClasses(el, pristineClass, removeClass);
        toggleClasses(el, dirtyClass, addClass);
      }
    };

    BaseValidation.prototype._toggleModfied = function _toggleModfied(el, modified) {
      var _util$Vue$util4 = exports$1.Vue.util;
      var addClass = _util$Vue$util4.addClass;
      var removeClass = _util$Vue$util4.removeClass;

      var modifiedClass = this._classes.modified || 'modified';

      if (modified) {
        toggleClasses(el, modifiedClass, addClass);
      } else {
        toggleClasses(el, modifiedClass, removeClass);
      }
    };

    BaseValidation.prototype._applyFilters = function _applyFilters(value, oldValue, filters, write) {
      var resolveAsset = exports$1.Vue.util.resolveAsset;
      var scope = this._getScope();

      var filter = void 0,
          fn = void 0,
          args = void 0,
          arg = void 0,
          offset = void 0,
          i = void 0,
          l = void 0,
          j = void 0,
          k = void 0;
      for (i = 0, l = filters.length; i < l; i++) {
        filter = filters[i];
        fn = resolveAsset(this._vm.$options, 'filters', filter.name);
        if (!fn) {
          continue;
        }

        fn = write ? fn.write : fn.read || fn;
        if (typeof fn !== 'function') {
          continue;
        }

        args = write ? [value, oldValue] : [value];
        offset = write ? 2 : 1;
        if (filter.args) {
          for (j = 0, k = filter.args.length; j < k; j++) {
            arg = filter.args[j];
            args[j + offset] = arg.dynamic ? scope.$get(arg.value) : arg.value;
          }
        }

        value = fn.apply(this._vm, args);
      }

      return value;
    };

    BaseValidation.prototype._runValidators = function _runValidators(fn, cb) {
      var validators = this._validators;
      var length = Object.keys(validators).length;

      var count = 0;
      each(validators, function (descriptor, name) {
        fn(descriptor, name, function () {
          ++count;
          count >= length && cb();
        });
      });
    };

    BaseValidation.prototype._invokeValidator = function _invokeValidator(vm, validator, val, arg, cb) {
      var future = validator.call(this, val, arg);
      if (typeof future === 'function') {
        // function
        future(function () {
          // resolve
          cb(true);
        }, function (msg) {
          // reject
          cb(false, msg);
        });
      } else if (isPromise(future)) {
        // promise
        future.then(function () {
          // resolve
          cb(true);
        }, function (msg) {
          // reject
          cb(false, msg);
        }).catch(function (err) {
          cb(false, err.message);
        });
      } else {
        // sync
        cb(future);
      }
    };

    BaseValidation.prototype._resolveValidator = function _resolveValidator(name) {
      var resolveAsset = exports$1.Vue.util.resolveAsset;
      return resolveAsset(this._vm.$options, 'validators', name);
    };

    babelHelpers.createClass(BaseValidation, [{
      key: 'vm',
      get: function get() {
        return this._vm;
      }
    }, {
      key: 'el',
      get: function get() {
        return this._el;
      }
    }, {
      key: 'detectChange',
      get: function get() {
        return this._detectChange;
      },
      set: function set(val) {
        this._detectChange = val;
      }
    }, {
      key: 'detectBlur',
      get: function get() {
        return this._detectBlur;
      },
      set: function set(val) {
        this._detectBlur = val;
      }
    }]);
    return BaseValidation;
  }();

  /**
   * CheckboxValidation class
   */

  var CheckboxValidation = function (_BaseValidation) {
    babelHelpers.inherits(CheckboxValidation, _BaseValidation);

    function CheckboxValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, CheckboxValidation);

      var _this = babelHelpers.possibleConstructorReturn(this, _BaseValidation.call(this, field, model, vm, el, scope, validator, filters, detectBlur, detectChange));

      _this._inits = [];
      return _this;
    }

    CheckboxValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this2 = this;

      var scope = this._getScope();
      var item = this._addItem(el, initial);

      var model = item.model = this._model;
      if (model) {
        var value = this._evalModel(model, this._filters);
        if (Array.isArray(value)) {
          this._setChecked(value, item.el);
          item.unwatch = scope.$watch(model, function (val, old) {
            if (val !== old) {
              if (_this2.guardValidate(item.el, 'change')) {
                return;
              }

              _this2.handleValidate(item.el, { noopable: item.initial });
              if (item.initial) {
                item.initial = null;
              }
            }
          });
        } else {
          el.checked = value || false;
          this._init = el.checked;
          item.init = el.checked;
          item.value = el.value;
          item.unwatch = scope.$watch(model, function (val, old) {
            if (val !== old) {
              if (_this2.guardValidate(el, 'change')) {
                return;
              }

              _this2.handleValidate(el, { noopable: item.initial });
              if (item.initial) {
                item.initial = null;
              }
            }
          });
        }
      } else {
        var options = { field: this.field, noopable: initial };
        if (this._checkClassIds(el)) {
          options.el = el;
        }
        this._validator.validate(options);
      }
    };

    CheckboxValidation.prototype.unmanageElement = function unmanageElement(el) {
      var found = -1;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          found = index;
          if (item.unwatch && item.model) {
            item.unwatch();
            item.unwatch = null;
            item.model = null;
          }
        }
      });
      if (found === -1) {
        return;
      }

      this._inits.splice(found, 1);
      this._validator.validate({ field: this.field });
    };

    CheckboxValidation.prototype.willUpdateFlags = function willUpdateFlags() {
      var _this3 = this;

      var touched = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];

      each(this._inits, function (item, index) {
        touched && _this3.willUpdateTouched(item.el, 'blur');
        _this3.willUpdateDirty(item.el);
        _this3.willUpdateModified(item.el);
      });
    };

    CheckboxValidation.prototype.reset = function reset() {
      this.resetFlags();
      each(this._inits, function (item, index) {
        item.init = item.el.checked;
        item.value = item.el.value;
      });
    };

    CheckboxValidation.prototype.updateClasses = function updateClasses(results) {
      var _this4 = this;

      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      if (el) {
        // for another element
        this._updateClasses(el, results);
      } else {
        each(this._inits, function (item, index) {
          _this4._updateClasses(item.el, results);
        });
      }
    };

    CheckboxValidation.prototype._addItem = function _addItem(el, initial) {
      var item = {
        el: el,
        init: el.checked,
        value: el.value,
        initial: initial
      };

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        item.classIds = classIds.split(',');
      }

      this._inits.push(item);
      return item;
    };

    CheckboxValidation.prototype._setChecked = function _setChecked(values, el) {
      for (var i = 0, l = values.length; i < l; i++) {
        var value = values[i];
        if (!el.disabled && el.value === value && !el.checked) {
          el.checked = true;
        }
      }
    };

    CheckboxValidation.prototype._getValue = function _getValue(el) {
      var _this5 = this;

      if (!this._inits || this._inits.length === 0) {
        return el.checked;
      } else {
        var _ret = function () {
          var vals = [];
          each(_this5._inits, function (item, index) {
            item.el.checked && vals.push(item.el.value);
          });
          return {
            v: vals
          };
        }();

        if ((typeof _ret === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret)) === "object") return _ret.v;
      }
    };

    CheckboxValidation.prototype._getClassIds = function _getClassIds(el) {
      var classIds = void 0;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          classIds = item.classIds;
        }
      });
      return classIds;
    };

    CheckboxValidation.prototype._checkModified = function _checkModified(target) {
      var _this6 = this;

      if (this._inits.length === 0) {
        return this._init !== target.checked;
      } else {
        var _ret2 = function () {
          var modified = false;
          each(_this6._inits, function (item, index) {
            if (!modified) {
              modified = item.init !== item.el.checked;
            }
          });
          return {
            v: modified
          };
        }();

        if ((typeof _ret2 === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret2)) === "object") return _ret2.v;
      }
    };

    return CheckboxValidation;
  }(BaseValidation);

  /**
   * RadioValidation class
   */

  var RadioValidation = function (_BaseValidation) {
    babelHelpers.inherits(RadioValidation, _BaseValidation);

    function RadioValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, RadioValidation);

      var _this = babelHelpers.possibleConstructorReturn(this, _BaseValidation.call(this, field, model, vm, el, scope, validator, filters, detectBlur, detectChange));

      _this._inits = [];
      return _this;
    }

    RadioValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this2 = this;

      var scope = this._getScope();
      var item = this._addItem(el, initial);

      var model = item.model = this._model;
      if (model) {
        var value = this._evalModel(model, this._filters);
        this._setChecked(value, el, item);
        item.unwatch = scope.$watch(model, function (val, old) {
          if (val !== old) {
            if (_this2.guardValidate(item.el, 'change')) {
              return;
            }

            _this2.handleValidate(el, { noopable: item.initial });
            if (item.initial) {
              item.initial = null;
            }
          }
        });
      } else {
        var options = { field: this.field, noopable: initial };
        if (this._checkClassIds(el)) {
          options.el = el;
        }
        this._validator.validate(options);
      }
    };

    RadioValidation.prototype.unmanageElement = function unmanageElement(el) {
      var found = -1;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          found = index;
        }
      });
      if (found === -1) {
        return;
      }

      this._inits.splice(found, 1);
      this._validator.validate({ field: this.field });
    };

    RadioValidation.prototype.willUpdateFlags = function willUpdateFlags() {
      var _this3 = this;

      var touched = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];

      each(this._inits, function (item, index) {
        touched && _this3.willUpdateTouched(item.el, 'blur');
        _this3.willUpdateDirty(item.el);
        _this3.willUpdateModified(item.el);
      });
    };

    RadioValidation.prototype.reset = function reset() {
      this.resetFlags();
      each(this._inits, function (item, index) {
        item.init = item.el.checked;
        item.value = item.el.value;
      });
    };

    RadioValidation.prototype.updateClasses = function updateClasses(results) {
      var _this4 = this;

      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      if (el) {
        // for another element
        this._updateClasses(el, results);
      } else {
        each(this._inits, function (item, index) {
          _this4._updateClasses(item.el, results);
        });
      }
    };

    RadioValidation.prototype._addItem = function _addItem(el, initial) {
      var item = {
        el: el,
        init: el.checked,
        value: el.value,
        initial: initial
      };

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        item.classIds = classIds.split(',');
      }

      this._inits.push(item);
      return item;
    };

    RadioValidation.prototype._setChecked = function _setChecked(value, el, item) {
      if (el.value === value) {
        el.checked = true;
        this._init = el.checked;
        item.init = el.checked;
        item.value = value;
      }
    };

    RadioValidation.prototype._getValue = function _getValue(el) {
      var _this5 = this;

      if (!this._inits || this._inits.length === 0) {
        return el.checked;
      } else {
        var _ret = function () {
          var vals = [];
          each(_this5._inits, function (item, index) {
            item.el.checked && vals.push(item.el.value);
          });
          return {
            v: vals
          };
        }();

        if ((typeof _ret === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret)) === "object") return _ret.v;
      }
    };

    RadioValidation.prototype._getClassIds = function _getClassIds(el) {
      var classIds = void 0;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          classIds = item.classIds;
        }
      });
      return classIds;
    };

    RadioValidation.prototype._checkModified = function _checkModified(target) {
      var _this6 = this;

      if (this._inits.length === 0) {
        return this._init !== target.checked;
      } else {
        var _ret2 = function () {
          var modified = false;
          each(_this6._inits, function (item, index) {
            if (!modified) {
              modified = item.init !== item.el.checked;
            }
          });
          return {
            v: modified
          };
        }();

        if ((typeof _ret2 === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret2)) === "object") return _ret2.v;
      }
    };

    return RadioValidation;
  }(BaseValidation);

  /**
   * SelectValidation class
   */

  var SelectValidation = function (_BaseValidation) {
    babelHelpers.inherits(SelectValidation, _BaseValidation);

    function SelectValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, SelectValidation);

      var _this = babelHelpers.possibleConstructorReturn(this, _BaseValidation.call(this, field, model, vm, el, scope, validator, filters, detectBlur, detectChange));

      _this._multiple = _this._el.hasAttribute('multiple');
      return _this;
    }

    SelectValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this2 = this;

      var scope = this._getScope();
      var model = this._model;

      this._initial = initial;

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        this._classIds = classIds.split(',');
      }

      if (model) {
        var value = this._evalModel(model, this._filters);
        var values = !Array.isArray(value) ? [value] : value;
        this._setOption(values, el);
        this._unwatch = scope.$watch(model, function (val, old) {
          var values1 = !Array.isArray(val) ? [val] : val;
          var values2 = !Array.isArray(old) ? [old] : old;
          if (values1.slice().sort().toString() !== values2.slice().sort().toString()) {
            if (_this2.guardValidate(el, 'change')) {
              return;
            }

            _this2.handleValidate(el, { noopable: _this2._initial });
            if (_this2._initial) {
              _this2._initial = null;
            }
          }
        });
      }
    };

    SelectValidation.prototype.unmanageElement = function unmanageElement(el) {
      this._unwatch && this._unwatch();
    };

    SelectValidation.prototype.reset = function reset() {
      this.resetFlags();
    };

    SelectValidation.prototype._getValue = function _getValue(el) {
      var ret = [];

      for (var i = 0, l = el.options.length; i < l; i++) {
        var option = el.options[i];
        if (!option.disabled && option.selected) {
          ret.push(option.value);
        }
      }

      return ret;
    };

    SelectValidation.prototype._setOption = function _setOption(values, el) {
      for (var i = 0, l = values.length; i < l; i++) {
        var value = values[i];
        for (var j = 0, m = el.options.length; j < m; j++) {
          var option = el.options[j];
          if (!option.disabled && option.value === value && (!option.hasAttribute('selected') || !option.selected)) {
            option.selected = true;
          }
        }
      }
    };

    SelectValidation.prototype._checkModified = function _checkModified(target) {
      var values = this._getValue(target).slice().sort();
      if (this._init.length !== values.length) {
        return true;
      } else {
        var inits = this._init.slice().sort();
        return inits.toString() !== values.toString();
      }
    };

    return SelectValidation;
  }(BaseValidation);

  /**
   * Validator class
   */

  var Validator$1 = function () {
    function Validator(name, dir, groups, classes) {
      var _this = this;

      babelHelpers.classCallCheck(this, Validator);

      this.name = name;

      this._scope = {};
      this._dir = dir;
      this._validations = {};
      this._checkboxValidations = {};
      this._radioValidations = {};
      this._groups = groups;
      this._groupValidations = {};
      this._events = {};
      this._modified = false;
      this._classes = classes;

      each(groups, function (group) {
        _this._groupValidations[group] = [];
      });
    }

    Validator.prototype.enableReactive = function enableReactive() {
      var vm = this._dir.vm;

      // define the validation scope
      exports$1.Vue.util.defineReactive(vm, this.name, this._scope);
      vm._validatorMaps[this.name] = this;

      // define the validation resetting meta method to vue instance
      this._defineResetValidation();

      // define the validate manually meta method to vue instance
      this._defineValidate();

      // define manually the validation errors
      this._defineSetValidationErrors();
    };

    Validator.prototype.disableReactive = function disableReactive() {
      var vm = this._dir.vm;
      vm.$setValidationErrors = null;
      delete vm['$setValidationErrors'];
      vm.$validate = null;
      delete vm['$validate'];
      vm.$validatorReset = null;
      delete vm['$validatorReset'];
      vm._validatorMaps[this.name] = null;
      delete vm._validatorMaps[this.name];
      vm[this.name] = null;
      delete vm[this.name];
    };

    Validator.prototype.registerEvents = function registerEvents() {
      var isSimplePath = exports$1.Vue.parsers.expression.isSimplePath;

      var attrs = this._dir.el.attributes;
      for (var i = 0, l = attrs.length; i < l; i++) {
        var event = attrs[i].name;
        if (REGEX_EVENT.test(event)) {
          var value = attrs[i].value;
          if (isSimplePath(value)) {
            value += '.apply(this, $arguments)';
          }
          event = event.replace(REGEX_EVENT, '');
          this._events[this._getEventName(event)] = this._dir.vm.$eval(value, true);
        }
      }
    };

    Validator.prototype.unregisterEvents = function unregisterEvents() {
      var _this2 = this;

      each(this._events, function (handler, event) {
        _this2._events[event] = null;
        delete _this2._events[event];
      });
    };

    Validator.prototype.manageValidation = function manageValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validation = null;

      if (el.tagName === 'SELECT') {
        validation = this._manageSelectValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      } else if (el.type === 'checkbox') {
        validation = this._manageCheckboxValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      } else if (el.type === 'radio') {
        validation = this._manageRadioValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      } else {
        validation = this._manageBaseValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      }

      validation.setValidationClasses(this._classes);

      return validation;
    };

    Validator.prototype.unmanageValidation = function unmanageValidation(field, el) {
      if (el.type === 'checkbox') {
        this._unmanageCheckboxValidation(field, el);
      } else if (el.type === 'radio') {
        this._unmanageRadioValidation(field, el);
      } else if (el.tagName === 'SELECT') {
        this._unmanageSelectValidation(field, el);
      } else {
        this._unmanageBaseValidation(field, el);
      }
    };

    Validator.prototype.addGroupValidation = function addGroupValidation(group, field) {
      var indexOf = exports$1.Vue.util.indexOf;

      var validation = this._getValidationFrom(field);
      var validations = this._groupValidations[group];

      validations && ! ~indexOf(validations, validation) && validations.push(validation);
    };

    Validator.prototype.removeGroupValidation = function removeGroupValidation(group, field) {
      var validation = this._getValidationFrom(field);
      var validations = this._groupValidations[group];

      validations && pull(validations, validation);
    };

    Validator.prototype.validate = function validate() {
      var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

      var _ref$el = _ref.el;
      var el = _ref$el === undefined ? null : _ref$el;
      var _ref$field = _ref.field;
      var field = _ref$field === undefined ? null : _ref$field;
      var _ref$touched = _ref.touched;
      var touched = _ref$touched === undefined ? false : _ref$touched;
      var _ref$noopable = _ref.noopable;
      var noopable = _ref$noopable === undefined ? false : _ref$noopable;
      var _ref$cb = _ref.cb;
      var cb = _ref$cb === undefined ? null : _ref$cb;

      if (!field) {
        // all
        each(this.validations, function (validation, key) {
          validation.willUpdateFlags(touched);
        });
        this._validates(cb);
      } else {
        // each field
        this._validate(field, touched, noopable, el, cb);
      }
    };

    Validator.prototype.setupScope = function setupScope() {
      var _this3 = this;

      this._defineProperties(function () {
        return _this3.validations;
      }, function () {
        return _this3._scope;
      });

      each(this._groups, function (name) {
        var validations = _this3._groupValidations[name];
        var group = {};
        exports$1.Vue.set(_this3._scope, name, group);
        _this3._defineProperties(function () {
          return validations;
        }, function () {
          return group;
        });
      });
    };

    Validator.prototype.waitFor = function waitFor(cb) {
      var method = '$activateValidator';
      var vm = this._dir.vm;

      vm[method] = function () {
        cb();
        vm[method] = null;
      };
    };

    Validator.prototype._defineResetValidation = function _defineResetValidation() {
      var _this4 = this;

      this._dir.vm.$resetValidation = function (cb) {
        _this4._resetValidation(cb);
      };
    };

    Validator.prototype._defineValidate = function _defineValidate() {
      var _this5 = this;

      this._dir.vm.$validate = function () {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        var field = null;
        var touched = false;
        var cb = null;

        each(args, function (arg, index) {
          if (typeof arg === 'string') {
            field = arg;
          } else if (typeof arg === 'boolean') {
            touched = arg;
          } else if (typeof arg === 'function') {
            cb = arg;
          }
        });

        _this5.validate({ field: field, touched: touched, cb: cb });
      };
    };

    Validator.prototype._defineSetValidationErrors = function _defineSetValidationErrors() {
      var _this6 = this;

      this._dir.vm.$setValidationErrors = function (errors) {
        _this6._setValidationErrors(errors);
      };
    };

    Validator.prototype._validate = function _validate(field) {
      var touched = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];
      var noopable = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];

      var _this7 = this;

      var el = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];
      var cb = arguments.length <= 4 || arguments[4] === undefined ? null : arguments[4];

      var scope = this._scope;

      var validation = this._getValidationFrom(field);
      if (validation) {
        validation.willUpdateFlags(touched);
        validation.validate(function (results) {
          exports$1.Vue.set(scope, field, results);
          _this7._fireEvents();
          cb && cb();
        }, noopable, el);
      }
    };

    Validator.prototype._validates = function _validates(cb) {
      var _this8 = this;

      var scope = this._scope;

      this._runValidates(function (validation, key, done) {
        validation.validate(function (results) {
          exports$1.Vue.set(scope, key, results);
          done();
        });
      }, function () {
        // finished
        _this8._fireEvents();
        cb && cb();
      });
    };

    Validator.prototype._getValidationFrom = function _getValidationFrom(field) {
      return this._validations[field] || this._checkboxValidations[field] && this._checkboxValidations[field].validation || this._radioValidations[field] && this._radioValidations[field].validation;
    };

    Validator.prototype._resetValidation = function _resetValidation(cb) {
      each(this.validations, function (validation, key) {
        validation.reset();
      });
      this._validates(cb);
    };

    Validator.prototype._setValidationErrors = function _setValidationErrors(errors) {
      var _this9 = this;

      var extend = exports$1.Vue.util.extend;

      // make tempolaly errors

      var temp = {};
      each(errors, function (error, index) {
        if (!temp[error.field]) {
          temp[error.field] = [];
        }
        temp[error.field].push(error);
      });

      // set errors
      each(temp, function (values, field) {
        var results = _this9._scope[field];
        var newResults = {};

        each(values, function (error) {
          if (error.validator) {
            results[error.validator] = error.message;
          }
        });

        results.valid = false;
        results.invalid = true;
        results.errors = values;
        extend(newResults, results);

        var validation = _this9._getValidationFrom(field);
        validation.willUpdateClasses(newResults, validation.el);

        exports$1.Vue.set(_this9._scope, field, newResults);
      });
    };

    Validator.prototype._manageBaseValidation = function _manageBaseValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validation = this._validations[field] = new BaseValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
      validation.manageElement(el, initial);
      return validation;
    };

    Validator.prototype._unmanageBaseValidation = function _unmanageBaseValidation(field, el) {
      var validation = this._validations[field];
      if (validation) {
        validation.unmanageElement(el);
        exports$1.Vue.delete(this._scope, field);
        this._validations[field] = null;
        delete this._validations[field];
      }
    };

    Validator.prototype._manageCheckboxValidation = function _manageCheckboxValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validationSet = this._checkboxValidations[field];
      if (!validationSet) {
        var validation = new CheckboxValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
        validationSet = { validation: validation, elements: 0 };
        this._checkboxValidations[field] = validationSet;
      }

      validationSet.elements++;
      validationSet.validation.manageElement(el, initial);
      return validationSet.validation;
    };

    Validator.prototype._unmanageCheckboxValidation = function _unmanageCheckboxValidation(field, el) {
      var validationSet = this._checkboxValidations[field];
      if (validationSet) {
        validationSet.elements--;
        validationSet.validation.unmanageElement(el);
        if (validationSet.elements === 0) {
          exports$1.Vue.delete(this._scope, field);
          this._checkboxValidations[field] = null;
          delete this._checkboxValidations[field];
        }
      }
    };

    Validator.prototype._manageRadioValidation = function _manageRadioValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validationSet = this._radioValidations[field];
      if (!validationSet) {
        var validation = new RadioValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
        validationSet = { validation: validation, elements: 0 };
        this._radioValidations[field] = validationSet;
      }

      validationSet.elements++;
      validationSet.validation.manageElement(el, initial);
      return validationSet.validation;
    };

    Validator.prototype._unmanageRadioValidation = function _unmanageRadioValidation(field, el) {
      var validationSet = this._radioValidations[field];
      if (validationSet) {
        validationSet.elements--;
        validationSet.validation.unmanageElement(el);
        if (validationSet.elements === 0) {
          exports$1.Vue.delete(this._scope, field);
          this._radioValidations[field] = null;
          delete this._radioValidations[field];
        }
      }
    };

    Validator.prototype._manageSelectValidation = function _manageSelectValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validation = this._validations[field] = new SelectValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
      validation.manageElement(el, initial);
      return validation;
    };

    Validator.prototype._unmanageSelectValidation = function _unmanageSelectValidation(field, el) {
      var validation = this._validations[field];
      if (validation) {
        validation.unmanageElement(el);
        exports$1.Vue.delete(this._scope, field);
        this._validations[field] = null;
        delete this._validations[field];
      }
    };

    Validator.prototype._fireEvent = function _fireEvent(type) {
      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      var handler = this._events[this._getEventName(type)];
      handler && this._dir.vm.$nextTick(function () {
        handler.apply(null, args);
      });
    };

    Validator.prototype._fireEvents = function _fireEvents() {
      var scope = this._scope;

      scope.touched && this._fireEvent('touched');
      scope.dirty && this._fireEvent('dirty');

      if (this._modified !== scope.modified) {
        this._fireEvent('modified', scope.modified);
        this._modified = scope.modified;
      }

      var valid = scope.valid;
      this._fireEvent(valid ? 'valid' : 'invalid');
    };

    Validator.prototype._getEventName = function _getEventName(type) {
      return this.name + ':' + type;
    };

    Validator.prototype._defineProperties = function _defineProperties(validationsGetter, targetGetter) {
      var _this10 = this;

      var bind = exports$1.Vue.util.bind;

      each({
        valid: { fn: this._defineValid, arg: validationsGetter },
        invalid: { fn: this._defineInvalid, arg: targetGetter },
        touched: { fn: this._defineTouched, arg: validationsGetter },
        untouched: { fn: this._defineUntouched, arg: targetGetter },
        modified: { fn: this._defineModified, arg: validationsGetter },
        dirty: { fn: this._defineDirty, arg: validationsGetter },
        pristine: { fn: this._definePristine, arg: targetGetter },
        errors: { fn: this._defineErrors, arg: validationsGetter }
      }, function (descriptor, name) {
        Object.defineProperty(targetGetter(), name, {
          enumerable: true,
          configurable: true,
          get: function get() {
            return bind(descriptor.fn, _this10)(descriptor.arg);
          }
        });
      });
    };

    Validator.prototype._runValidates = function _runValidates(fn, cb) {
      var length = Object.keys(this.validations).length;

      var count = 0;
      each(this.validations, function (validation, key) {
        fn(validation, key, function () {
          ++count;
          count >= length && cb();
        });
      });
    };

    Validator.prototype._walkValidations = function _walkValidations(validations, property, condition) {
      var _this11 = this;

      var hasOwn = exports$1.Vue.util.hasOwn;
      var ret = condition;

      each(validations, function (validation, key) {
        if (ret === !condition) {
          return;
        }
        if (hasOwn(_this11._scope, validation.field)) {
          var target = _this11._scope[validation.field];
          if (target && target[property] === !condition) {
            ret = !condition;
          }
        }
      });

      return ret;
    };

    Validator.prototype._defineValid = function _defineValid(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'valid', true);
    };

    Validator.prototype._defineInvalid = function _defineInvalid(scopeGetter) {
      return !scopeGetter().valid;
    };

    Validator.prototype._defineTouched = function _defineTouched(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'touched', false);
    };

    Validator.prototype._defineUntouched = function _defineUntouched(scopeGetter) {
      return !scopeGetter().touched;
    };

    Validator.prototype._defineModified = function _defineModified(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'modified', false);
    };

    Validator.prototype._defineDirty = function _defineDirty(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'dirty', false);
    };

    Validator.prototype._definePristine = function _definePristine(scopeGetter) {
      return !scopeGetter().dirty;
    };

    Validator.prototype._defineErrors = function _defineErrors(validationsGetter) {
      var _this12 = this;

      var hasOwn = exports$1.Vue.util.hasOwn;
      var isPlainObject = exports$1.Vue.util.isPlainObject;
      var errors = [];

      each(validationsGetter(), function (validation, key) {
        if (hasOwn(_this12._scope, validation.field)) {
          var target = _this12._scope[validation.field];
          if (target && !empty(target.errors)) {
            each(target.errors, function (err, index) {
              var error = { field: validation.field };
              if (isPlainObject(err)) {
                if (err.validator) {
                  error.validator = err.validator;
                }
                error.message = err.message;
              } else if (typeof err === 'string') {
                error.message = err;
              }
              errors.push(error);
            });
          }
        }
      });

      return empty(errors) ? undefined : errors.sort(function (a, b) {
        return a.field < b.field ? -1 : 1;
      });
    };

    babelHelpers.createClass(Validator, [{
      key: 'validations',
      get: function get() {
        var extend = exports$1.Vue.util.extend;

        var ret = {};
        extend(ret, this._validations);

        each(this._checkboxValidations, function (dataset, key) {
          ret[key] = dataset.validation;
        });

        each(this._radioValidations, function (dataset, key) {
          ret[key] = dataset.validation;
        });

        return ret;
      }
    }]);
    return Validator;
  }();

  function Validator (Vue) {
    var FragmentFactory = Vue.FragmentFactory;
    var vIf = Vue.directive('if');
    var _Vue$util = Vue.util;
    var isArray = _Vue$util.isArray;
    var isPlainObject = _Vue$util.isPlainObject;
    var createAnchor = _Vue$util.createAnchor;
    var replace = _Vue$util.replace;
    var extend = _Vue$util.extend;
    var camelize = _Vue$util.camelize;

    /**
     * `validator` element directive
     */

    Vue.elementDirective('validator', {
      params: ['name', 'groups', 'lazy', 'classes'],

      bind: function bind() {
        var params = this.params;

        if ('development' !== 'production' && !params.name) {
          warn('validator element requires a \'name\' attribute: ' + '(e.g. <validator name="validator1">...</validator>)');
          return;
        }

        this.validatorName = '$' + camelize(params.name);
        if (!this.vm._validatorMaps) {
          throw new Error('Invalid validator management error');
        }

        var classes = {};
        if (isPlainObject(this.params.classes)) {
          classes = this.params.classes;
        }

        this.setupValidator(classes);
        this.setupFragment(params.lazy);
      },
      unbind: function unbind() {
        this.teardownFragment();
        this.teardownValidator();
      },
      getGroups: function getGroups() {
        var params = this.params;
        var groups = [];

        if (params.groups) {
          if (isArray(params.groups)) {
            groups = params.groups;
          } else if (!isPlainObject(params.groups) && typeof params.groups === 'string') {
            groups.push(params.groups);
          }
        }

        return groups;
      },
      setupValidator: function setupValidator(classes) {
        var validator = this.validator = new Validator$1(this.validatorName, this, this.getGroups(), classes);
        validator.enableReactive();
        validator.setupScope();
        validator.registerEvents();
      },
      teardownValidator: function teardownValidator() {
        this.validator.unregisterEvents();
        this.validator.disableReactive();

        if (this.validatorName) {
          this.validatorName = null;
          this.validator = null;
        }
      },
      setupFragment: function setupFragment(lazy) {
        var _this = this;

        var vm = this.vm;

        this.validator.waitFor(function () {
          _this.anchor = createAnchor('vue-validator');
          replace(_this.el, _this.anchor);
          extend(vm.$options, { _validator: _this.validatorName });
          _this.factory = new FragmentFactory(vm, _this.el.innerHTML);
          vIf.insert.call(_this);
        });

        !lazy && vm.$activateValidator();
      },
      teardownFragment: function teardownFragment() {
        vIf.unbind.call(this);
      }
    });
  }

  function ValidatorError (Vue) {
    /**
     * ValidatorError component
     */

    var error = {
      name: 'validator-error',

      props: {
        field: {
          type: String,
          required: true
        },
        validator: {
          type: String
        },
        message: {
          type: String,
          required: true
        },
        partial: {
          type: String,
          default: 'validator-error-default'
        }
      },

      template: '<div><partial :name="partial"></partial></div>',

      partials: {}
    };

    // only use ValidatorError component
    error.partials['validator-error-default'] = '<p>{{field}}: {{message}}</p>';

    return error;
  }

  function Errors (Vue) {
    var _ = Vue.util;
    var error = ValidatorError(Vue); // import ValidatorError component

    /**
     * ValidatorErrors component
     */

    var errors = {
      name: 'validator-errors',

      props: {
        validation: {
          type: Object,
          required: true
        },
        group: {
          type: String,
          default: null
        },
        field: {
          type: String,
          default: null
        },
        component: {
          type: String,
          default: 'validator-error'
        }
      },

      computed: {
        errors: function errors() {
          var _this = this;

          if (this.group !== null) {
            return this.validation[this.group].errors;
          } else if (this.field !== null) {
            var target = this.validation[this.field];
            if (!target.errors) {
              return;
            }

            return target.errors.map(function (error) {
              var err = { field: _this.field };
              if (_.isPlainObject(error)) {
                if (error.validator) {
                  err.validator = error.validator;
                }
                err.message = error.message;
              } else if (typeof error === 'string') {
                err.message = error;
              }
              return err;
            });
          } else {
            return this.validation.errors;
          }
        }
      },

      template: '<template v-for="error in errors">' + '<component :is="component" :partial="partial" :field="error.field" :validator="error.validator" :message="error.message">' + '</component>' + '</template>',

      components: {}
    };

    // define 'partial' prop
    errors.props['partial'] = error.props['partial'];

    // only use ValidatorErrors component
    errors.components[error.name] = error;

    // install ValidatorErrors component
    Vue.component(errors.name, errors);

    return errors;
  }

  /**
   * plugin
   *
   * @param {Function} Vue
   * @param {Object} options
   */

  function plugin(Vue) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    if (plugin.installed) {
      warn('already installed.');
      return;
    }

    exports$1.Vue = Vue;
    Asset(Vue);
    Errors(Vue);

    Override(Vue);
    Validator(Vue);
    ValidateClass(Vue);
    Validate(Vue);
  }

  plugin.version = '2.1.3';

  if (typeof window !== 'undefined' && window.Vue) {
    window.Vue.use(plugin);
  }

  return plugin;

}));
//! moment.js
//! version : 2.14.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return md.apply(null,arguments)}
// This is done to register the method called with moment()
// without creating circular dependencies.
function b(a){md=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)
// even if its not own property I'd still call it non-empty
return!1;return!0}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return qb(a,b,c,d,!0).utc()}function k(){
// We need to deep clone this object.
return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a),c=nd.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a){return void 0===a}function p(a,b){var c,d,e;if(o(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),o(b._i)||(a._i=b._i),o(b._f)||(a._f=b._f),o(b._l)||(a._l=b._l),o(b._strict)||(a._strict=b._strict),o(b._tzm)||(a._tzm=b._tzm),o(b._isUTC)||(a._isUTC=b._isUTC),o(b._offset)||(a._offset=b._offset),o(b._pf)||(a._pf=l(b)),o(b._locale)||(a._locale=b._locale),od.length>0)for(c in od)d=od[c],e=b[d],o(e)||(a[d]=e);return a}
// Moment prototype object
function q(b){p(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),pd===!1&&(pd=!0,a.updateOffset(this),pd=!1)}function r(a){return a instanceof q||null!=a&&null!=a._isAMomentObject}function s(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=s(b)),c}
// compare two arrays, return the number of differences
function u(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function v(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function w(b,c){var d=!0;return i(function(){return null!=a.deprecationHandler&&a.deprecationHandler(null,b),d&&(v(b+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),d=!1),c.apply(this,arguments)},c)}function x(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),qd[b]||(v(c),qd[b]=!0)}function y(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function z(a){var b,c;for(c in a)b=a[c],y(b)?this[c]=b:this["_"+c]=b;this._config=a,
// Lenient ordinal parsing accepts just a number in addition to
// number + (possibly) stuff coming from _ordinalParseLenient.
this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function A(a,b){var c,e=i({},a);for(c in b)h(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},i(e[c],a[c]),i(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)h(a,c)&&!h(b,c)&&d(a[c])&&(
// make sure changes to properties don't modify parent config
e[c]=i({},e[c]));return e}function B(a){null!=a&&this.set(a)}function C(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return y(d)?d.call(b,c):d}function D(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function E(){return this._invalidDate}function F(a){return this._ordinal.replace("%d",a)}function G(a,b,c,d){var e=this._relativeTime[c];return y(e)?e(a,b,c,d):e.replace(/%d/i,a)}function H(a,b){var c=this._relativeTime[a>0?"future":"past"];return y(c)?c(b):c.replace(/%s/i,b)}function I(a,b){var c=a.toLowerCase();zd[c]=zd[c+"s"]=zd[b]=a}function J(a){return"string"==typeof a?zd[a]||zd[a.toLowerCase()]:void 0}function K(a){var b,c,d={};for(c in a)h(a,c)&&(b=J(c),b&&(d[b]=a[c]));return d}function L(a,b){Ad[a]=b}function M(a){var b=[];for(var c in a)b.push({unit:c,priority:Ad[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function N(b,c){return function(d){return null!=d?(P(this,b,d),a.updateOffset(this,c),this):O(this,b)}}function O(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function P(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}
// MOMENTS
function Q(a){return a=J(a),y(this[a])?this[a]():this}function R(a,b){if("object"==typeof a){a=K(a);for(var c=M(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=J(a),y(this[a]))return this[a](b);return this}function S(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}
// token:    'M'
// padded:   ['MM', 2]
// ordinal:  'Mo'
// callback: function () { this.month() + 1 }
function T(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Ed[a]=e),b&&(Ed[b[0]]=function(){return S(e.apply(this,arguments),b[1],b[2])}),c&&(Ed[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function U(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function V(a){var b,c,d=a.match(Bd);for(b=0,c=d.length;c>b;b++)Ed[d[b]]?d[b]=Ed[d[b]]:d[b]=U(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}
// format date using native date object
function W(a,b){return a.isValid()?(b=X(b,a.localeData()),Dd[b]=Dd[b]||V(b),Dd[b](a)):a.localeData().invalidDate()}function X(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cd.lastIndex=0;d>=0&&Cd.test(a);)a=a.replace(Cd,c),Cd.lastIndex=0,d-=1;return a}function Y(a,b,c){Wd[a]=y(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return h(Wd,a)?Wd[a](b._strict,b._locale):new RegExp($(a))}
// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
function $(a){return _(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function _(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aa(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=t(a)}),c=0;c<a.length;c++)Xd[a[c]]=d}function ba(a,b){aa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ca(a,b,c){null!=b&&h(Xd,a)&&Xd[a](b,c._a,c,a)}function da(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ea(a,b){return c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||fe).test(b)?"format":"standalone"][a.month()]}function fa(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[fe.test(b)?"format":"standalone"][a.month()]}function ga(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(
// this is not used
this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=j([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null):(e=sd.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:(e=sd.call(this._longMonthsParse,g),-1!==e?e:null)):(e=sd.call(this._longMonthsParse,g),-1!==e?e:(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null))}function ha(a,b,c){var d,e,f;if(this._monthsParseExact)return ga.call(this,a,b,c);
// TODO: add sorting
// Sorting makes sure if one month (or abbr) is a prefix of another
// see sorting in computeMonthsParse
for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){
// test the regex
if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}
// MOMENTS
function ia(a,b){var c;if(!a.isValid())
// No op
return a;if("string"==typeof b)if(/^\d+$/.test(b))b=t(b);else
// TODO: Another silent failure?
if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),da(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ja(b){return null!=b?(ia(this,b),a.updateOffset(this,!0),this):O(this,"Month")}function ka(){return da(this.year(),this.month())}function la(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=ie),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function ma(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=je),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function na(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=j([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(
// Sorting makes sure if one month (or abbr) is a prefix of another it
// will match the longer piece.
d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=_(d[b]),e[b]=_(e[b]);for(b=0;24>b;b++)f[b]=_(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}
// HELPERS
function oa(a){return pa(a)?366:365}function pa(a){return a%4===0&&a%100!==0||a%400===0}function qa(){return pa(this.year())}function ra(a,b,c,d,e,f,g){
//can't just apply() to create a date:
//http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
var h=new Date(a,b,c,d,e,f,g);
//the date constructor remaps years 0-99 to 1900-1999
return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));
//the Date.UTC function remaps years 0-99 to 1900-1999
return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}
// start-of-first-week - start-of-year
function ta(a,b,c){var// first-week day -- which january is always in the first week (4 for iso, 1 for other)
d=7+b-c,
// first-week day local weekday -- which local weekday is fwd
e=(7+sa(a,0,d).getUTCDay()-b)%7;return-e+d-1}
//http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
function ua(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ta(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=oa(f)+j):j>oa(a)?(f=a+1,g=j-oa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function va(a,b,c){var d,e,f=ta(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+wa(e,b,c)):g>wa(a.year(),b,c)?(d=g-wa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function wa(a,b,c){var d=ta(a,b,c),e=ta(a+1,b,c);return(oa(a)-d+e)/7}
// HELPERS
// LOCALES
function xa(a){return va(a,this._week.dow,this._week.doy).week}function ya(){return this._week.dow}function za(){return this._week.doy}
// MOMENTS
function Aa(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ba(a){var b=va(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}
// HELPERS
function Ca(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Da(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ea(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Fa(a){return this._weekdaysShort[a.day()]}function Ga(a){return this._weekdaysMin[a.day()]}function Ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=j([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ia(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ha.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){
// test the regex
if(e=j([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}
// MOMENTS
function Ja(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ca(a,this.localeData()),this.add(a-b,"d")):b}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function La(a){if(!this.isValid())return null!=a?this:NaN;
// behaves the same as moment#day except
// as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
// as a setter, sunday should belong to the previous week.
if(null!=a){var b=Da(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Ma(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=pe),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Na(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oa(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=re),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],k=[];for(b=0;7>b;b++)c=j([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),k.push(d),k.push(e),k.push(f);for(
// Sorting makes sure if one weekday (or abbr) is a prefix of another it
// will match the longer piece.
g.sort(a),h.sort(a),i.sort(a),k.sort(a),b=0;7>b;b++)h[b]=_(h[b]),i[b]=_(i[b]),k[b]=_(k[b]);this._weekdaysRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}
// FORMATTING
function Qa(){return this.hours()%12||12}function Ra(){return this.hours()||24}function Sa(a,b){T(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}
// PARSING
function Ta(a,b){return b._meridiemParse}
// LOCALES
function Ua(a){
// IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
// Using charAt should be more compatible.
return"p"===(a+"").toLowerCase().charAt(0)}function Va(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wa(a){return a?a.toLowerCase().replace("_","-"):a}
// pick the locale from the array
// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
function Xa(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Wa(a[f]).split("-"),b=e.length,c=Wa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Ya(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&u(e,c,!0)>=b-1)
//the next array item is better than a shallower substring of this one
break;b--}f++}return null}function Ya(a){var b=null;
// TODO: Find a better way to register and load all the locales in Node
if(!we[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=se._abbr,require("./locale/"+a),
// because defineLocale currently also sets the global locale, we
// want to undo that for lazy loaded locales
Za(b)}catch(c){}return we[a]}
// This function will load locale and then set the global locale.  If
// no arguments are passed in, it will simply return the current global
// locale key.
function Za(a,b){var c;
// moment.duration._locale = moment._locale = data;
return a&&(c=o(b)?ab(a):$a(a,b),c&&(se=c)),se._abbr}function $a(a,b){if(null!==b){var c=ve;
// treat as if there is no base config
// backwards compat for now: also set the locale
return b.abbr=a,null!=we[a]?(x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=we[a]._config):null!=b.parentLocale&&(null!=we[b.parentLocale]?c=we[b.parentLocale]._config:x("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),we[a]=new B(A(c,b)),Za(a),we[a]}
// useful for testing
return delete we[a],null}function _a(a,b){if(null!=b){var c,d=ve;
// MERGE
null!=we[a]&&(d=we[a]._config),b=A(d,b),c=new B(b),c.parentLocale=we[a],we[a]=c,
// backwards compat for now: also set the locale
Za(a)}else
// pass null for config to unupdate, useful for tests
null!=we[a]&&(null!=we[a].parentLocale?we[a]=we[a].parentLocale:null!=we[a]&&delete we[a]);return we[a]}
// returns locale data
function ab(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return se;if(!c(a)){if(b=Ya(a))return b;a=[a]}return Xa(a)}function bb(){return rd(we)}function cb(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[Zd]<0||c[Zd]>11?Zd:c[$d]<1||c[$d]>da(c[Yd],c[Zd])?$d:c[_d]<0||c[_d]>24||24===c[_d]&&(0!==c[ae]||0!==c[be]||0!==c[ce])?_d:c[ae]<0||c[ae]>59?ae:c[be]<0||c[be]>59?be:c[ce]<0||c[ce]>999?ce:-1,l(a)._overflowDayOfYear&&(Yd>b||b>$d)&&(b=$d),l(a)._overflowWeeks&&-1===b&&(b=de),l(a)._overflowWeekday&&-1===b&&(b=ee),l(a).overflow=b),a}
// date from iso format
function db(a){var b,c,d,e,f,g,h=a._i,i=xe.exec(h)||ye.exec(h);if(i){for(l(a).iso=!0,b=0,c=Ae.length;c>b;b++)if(Ae[b][1].exec(i[1])){e=Ae[b][0],d=Ae[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Be.length;c>b;b++)if(Be[b][1].exec(i[3])){
// match[2] should be 'T' or space
f=(i[2]||" ")+Be[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!ze.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),jb(a)}else a._isValid=!1}
// date from iso format or fallback
function eb(b){var c=Ce.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(db(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}
// Pick the first defined of two or three arguments.
function fb(a,b,c){return null!=a?a:null!=b?b:c}function gb(b){
// hooks is actually the exported moment object
var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}
// convert an array to a date.
// the array should mirror the parameters below
// note: all values past the year are optional and will default to the lowest possible value.
// [year, month, day , hour, minute, second, millisecond]
function hb(a){var b,c,d,e,f=[];if(!a._d){
// Default to current date.
// * if no year, month, day of month are given, default to today
// * if day of month is given, default month and year
// * if month is given, default only year
// * if year is given, don't default anything
for(d=gb(a),a._w&&null==a._a[$d]&&null==a._a[Zd]&&ib(a),a._dayOfYear&&(e=fb(a._a[Yd],d[Yd]),a._dayOfYear>oa(e)&&(l(a)._overflowDayOfYear=!0),c=sa(e,0,a._dayOfYear),a._a[Zd]=c.getUTCMonth(),a._a[$d]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];
// Zero out whatever was not defaulted, including time
for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];
// Check for 24:00:00.000
24===a._a[_d]&&0===a._a[ae]&&0===a._a[be]&&0===a._a[ce]&&(a._nextDay=!0,a._a[_d]=0),a._d=(a._useUTC?sa:ra).apply(null,f),
// Apply timezone offset from input. The actual utcOffset can be changed
// with parseZone.
null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[_d]=24)}}function ib(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=fb(b.GG,a._a[Yd],va(rb(),1,4).year),d=fb(b.W,1),e=fb(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=fb(b.gg,a._a[Yd],va(rb(),f,g).year),d=fb(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>wa(c,f,g)?l(a)._overflowWeeks=!0:null!=i?l(a)._overflowWeekday=!0:(h=ua(c,d,e,f,g),a._a[Yd]=h.year,a._dayOfYear=h.dayOfYear)}
// date from string and format string
function jb(b){
// TODO: Move this to another part of the creation flow to prevent circular deps
if(b._f===a.ISO_8601)return void db(b);b._a=[],l(b).empty=!0;
// This array is used to make a Date, either with `new Date` or `Date.UTC`
var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=X(b._f,b._locale).match(Bd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(Z(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Ed[f]?(d?l(b).empty=!1:l(b).unusedTokens.push(f),ca(f,d,b)):b._strict&&!d&&l(b).unusedTokens.push(f);
// add remaining unparsed input length to the string
l(b).charsLeftOver=i-j,h.length>0&&l(b).unusedInput.push(h),
// clear _12h flag if hour is <= 12
b._a[_d]<=12&&l(b).bigHour===!0&&b._a[_d]>0&&(l(b).bigHour=void 0),l(b).parsedDateParts=b._a.slice(0),l(b).meridiem=b._meridiem,
// handle meridiem
b._a[_d]=kb(b._locale,b._a[_d],b._meridiem),hb(b),cb(b)}function kb(a,b,c){var d;
// Fallback
return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}
// date from string and array of format strings
function lb(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],jb(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function mb(a){if(!a._d){var b=K(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),hb(a)}}function nb(a){var b=new q(cb(ob(a)));
// Adding is smart enough around DST
return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function ob(a){var b=a._i,d=a._f;return a._locale=a._locale||ab(a._l),null===b||void 0===d&&""===b?n({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),r(b)?new q(cb(b)):(c(d)?lb(a):f(b)?a._d=b:d?jb(a):pb(a),m(a)||(a._d=null),a))}function pb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):f(d)?b._d=new Date(d.valueOf()):"string"==typeof d?eb(b):c(d)?(b._a=g(d.slice(0),function(a){return parseInt(a,10)}),hb(b)):"object"==typeof d?mb(b):"number"==typeof d?
// from milliseconds
b._d=new Date(d):a.createFromInputFallback(b)}function qb(a,b,f,g,h){var i={};
// object construction must be done this way.
// https://github.com/moment/moment/issues/1423
return"boolean"==typeof f&&(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,nb(i)}function rb(a,b,c,d){return qb(a,b,c,d,!1)}
// Pick a moment m from moments so that m[fn](other) is true for all
// other. This relies on the function fn to be transitive.
//
// moments should either be an array of moment objects or an array, whose
// first element is an array of moment objects.
function sb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return rb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}
// TODO: Use [].sort instead?
function tb(){var a=[].slice.call(arguments,0);return sb("isBefore",a)}function ub(){var a=[].slice.call(arguments,0);return sb("isAfter",a)}function vb(a){var b=K(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;
// representation for dateAddRemove
this._milliseconds=+k+1e3*j+// 1000
6e4*i+// 1000 * 60
1e3*h*60*60,//using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978
// Because of dateAddRemove treats 24 hours as different from a
// day when working around DST, we need to store them separately
this._days=+g+7*f,
// It is impossible translate months into days without knowing
// which months you are are talking about, so we have to store
// it separately.
this._months=+e+3*d+12*c,this._data={},this._locale=ab(),this._bubble()}function wb(a){return a instanceof vb}
// FORMATTING
function xb(a,b){T(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+S(~~(a/60),2)+b+S(~~a%60,2)})}function yb(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ge)||["-",0,0],f=+(60*e[1])+t(e[2]);return"+"===e[0]?f:-f}
// Return a moment from input, that is local/utc/zone equivalent to model.
function zb(b,c){var d,e;
// Use low-level api, because this fn is low-level api.
return c._isUTC?(d=c.clone(),e=(r(b)||f(b)?b.valueOf():rb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):rb(b).local()}function Ab(a){
// On Firefox.24 Date#getTimezoneOffset returns a floating point.
// https://github.com/moment/moment/pull/1871
return 15*-Math.round(a._d.getTimezoneOffset()/15)}
// MOMENTS
// keepLocalTime = true means only change the timezone, without
// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
// +0200, so we adjust the time as needed, to be valid.
//
// Keeping the time actually adds/subtracts (one hour)
// from the actual represented time. That is why we call updateOffset
// a second time. In case it wants us to change the offset again
// _changeInProgress == true case, then we have to adjust, because
// there is no such time in the given timezone.
function Bb(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=yb(Td,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ab(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Sb(this,Mb(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ab(this):null!=b?this:NaN}function Cb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Db(a){return this.utcOffset(0,a)}function Eb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ab(this),"m")),this}function Fb(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(yb(Sd,this._i)),this}function Gb(a){return this.isValid()?(a=a?rb(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Hb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ib(){if(!o(this._isDSTShifted))return this._isDSTShifted;var a={};if(p(a,this),a=ob(a),a._a){var b=a._isUTC?j(a._a):rb(a._a);this._isDSTShifted=this.isValid()&&u(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jb(){return this.isValid()?!this._isUTC:!1}function Kb(){return this.isValid()?this._isUTC:!1}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Mb(a,b){var c,d,e,f=a,
// matching against regexp is expensive, do it on demand
g=null;// checks for null or undefined
return wb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=He.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[$d])*c,h:t(g[_d])*c,m:t(g[ae])*c,s:t(g[be])*c,ms:t(g[ce])*c}):(g=Ie.exec(a))?(c="-"===g[1]?-1:1,f={y:Nb(g[2],c),M:Nb(g[3],c),w:Nb(g[4],c),d:Nb(g[5],c),h:Nb(g[6],c),m:Nb(g[7],c),s:Nb(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=Pb(rb(f.from),rb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new vb(f),wb(a)&&h(a,"_locale")&&(d._locale=a._locale),d}function Nb(a,b){
// We'd normally use ~~inp for this, but unfortunately it also
// converts floats to ints.
// inp may be undefined, so careful calling replace on it.
var c=a&&parseFloat(a.replace(",","."));
// apply sign while we're at it
return(isNaN(c)?0:c)*b}function Ob(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Pb(a,b){var c;return a.isValid()&&b.isValid()?(b=zb(b,a),a.isBefore(b)?c=Ob(a,b):(c=Ob(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Qb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}
// TODO: remove 'name' arg after deprecation is removed
function Rb(a,b){return function(c,d){var e,f;
//invert the arguments, but complain about it
return null===d||isNaN(+d)||(x(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Mb(c,d),Sb(this,e,a),this}}function Sb(b,c,d,e){var f=c._milliseconds,g=Qb(c._days),h=Qb(c._months);b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&P(b,"Date",O(b,"Date")+g*d),h&&ia(b,O(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Tb(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"}function Ub(b,c){
// We want to compare the start of today, vs this.
// Getting start-of-today depends on whether we're local/utc/offset or not.
var d=b||rb(),e=zb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(y(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,rb(d)))}function Vb(){return new q(this)}function Wb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function Xb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function Yb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function Zb(a,b){var c,d=r(a)?a:rb(a);return this.isValid()&&d.isValid()?(b=J(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function $b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function _b(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function ac(a,b,c){var d,e,f,g;// 1000
// 1000 * 60
// 1000 * 60 * 60
// 1000 * 60 * 60 * 24, negate dst
// 1000 * 60 * 60 * 24 * 7, negate dst
return this.isValid()?(d=zb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=J(b),"year"===b||"month"===b||"quarter"===b?(g=bc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:s(g)):NaN):NaN}function bc(a,b){
// difference in months
var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),
// b is in (anchor - 1 month, anchor + 1 month)
f=a.clone().add(e,"months");
//check for negative zero, return zero if negative zero
// linear across the month
// linear across the month
return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function cc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?y(Date.prototype.toISOString)?this.toDate().toISOString():W(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ec(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=W(this,b);return this.localeData().postformat(c)}function fc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Mb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function gc(a){return this.from(rb(),a)}function hc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Mb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.to(rb(),a)}
// If passed a locale key, it will set the locale for this
// instance.  Otherwise, it will return the locale configuration
// variables for this instance.
function jc(a){var b;return void 0===a?this._locale._abbr:(b=ab(a),null!=b&&(this._locale=b),this)}function kc(){return this._locale}function lc(a){
// the following switch intentionally omits break keywords
// to utilize falling through the cases.
switch(a=J(a)){case"year":this.month(0);/* falls through */
case"quarter":case"month":this.date(1);/* falls through */
case"week":case"isoWeek":case"day":case"date":this.hours(0);/* falls through */
case"hour":this.minutes(0);/* falls through */
case"minute":this.seconds(0);/* falls through */
case"second":this.milliseconds(0)}
// weeks are a special case
// quarters are also special
return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function mc(a){
// 'date' is an alias for 'day', so it should be considered as such.
return a=J(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function nc(){return this._d.valueOf()-6e4*(this._offset||0)}function oc(){return Math.floor(this.valueOf()/1e3)}function pc(){return new Date(this.valueOf())}function qc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function rc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function sc(){
// new Date(NaN).toJSON() === null
return this.isValid()?this.toISOString():null}function tc(){return m(this)}function uc(){return i({},l(this))}function vc(){return l(this).overflow}function wc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xc(a,b){T(0,[a,a.length],0,b)}
// MOMENTS
function yc(a){return Cc.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zc(a){return Cc.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Ac(){return wa(this.year(),1,4)}function Bc(){var a=this.localeData()._week;return wa(this.year(),a.dow,a.doy)}function Cc(a,b,c,d,e){var f;return null==a?va(this,d,e).year:(f=wa(a,d,e),b>f&&(b=f),Dc.call(this,a,b,c,d,e))}function Dc(a,b,c,d,e){var f=ua(a,b,c,d,e),g=sa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}
// MOMENTS
function Ec(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}
// HELPERS
// MOMENTS
function Fc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Gc(a,b){b[ce]=t(1e3*("0."+a))}
// MOMENTS
function Hc(){return this._isUTC?"UTC":""}function Ic(){return this._isUTC?"Coordinated Universal Time":""}function Jc(a){return rb(1e3*a)}function Kc(){return rb.apply(null,arguments).parseZone()}function Lc(a){return a}function Mc(a,b,c,d){var e=ab(),f=j().set(d,b);return e[c](f,a)}function Nc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Mc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Mc(a,d,c,"month");return e}
// ()
// (5)
// (fmt, 5)
// (fmt)
// (true)
// (true, 5)
// (true, fmt, 5)
// (true, fmt)
function Oc(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=ab(),f=a?e._week.dow:0;if(null!=c)return Mc(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Mc(b,(g+f)%7,d,"day");return h}function Pc(a,b){return Nc(a,b,"months")}function Qc(a,b){return Nc(a,b,"monthsShort")}function Rc(a,b,c){return Oc(a,b,c,"weekdays")}function Sc(a,b,c){return Oc(a,b,c,"weekdaysShort")}function Tc(a,b,c){return Oc(a,b,c,"weekdaysMin")}function Uc(){var a=this._data;return this._milliseconds=Ue(this._milliseconds),this._days=Ue(this._days),this._months=Ue(this._months),a.milliseconds=Ue(a.milliseconds),a.seconds=Ue(a.seconds),a.minutes=Ue(a.minutes),a.hours=Ue(a.hours),a.months=Ue(a.months),a.years=Ue(a.years),this}function Vc(a,b,c,d){var e=Mb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}
// supports only 2.0-style add(1, 's') or add(duration)
function Wc(a,b){return Vc(this,a,b,1)}
// supports only 2.0-style subtract(1, 's') or subtract(duration)
function Xc(a,b){return Vc(this,a,b,-1)}function Yc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Zc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;
// if we have a mix of positive and negative values, bubble down first
// check: https://github.com/moment/moment/issues/2166
// The following code bubbles up values, see the tests for
// examples of what that means.
// convert days to months
// 12 months -> 1 year
return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Yc(_c(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=s(f/1e3),i.seconds=a%60,b=s(a/60),i.minutes=b%60,c=s(b/60),i.hours=c%24,g+=s(c/24),e=s($c(g)),h+=e,g-=Yc(_c(e)),d=s(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function $c(a){
// 400 years have 146097 days (taking into account leap year rules)
// 400 years have 12 months === 4800
return 4800*a/146097}function _c(a){
// the reverse of daysToMonths
return 146097*a/4800}function ad(a){var b,c,d=this._milliseconds;if(a=J(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+$c(b),"month"===a?c:c/12;switch(b=this._days+Math.round(_c(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;
// Math.floor prevents floating point math errors here
case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}
// TODO: Use this.as('ms')?
function bd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)}function cd(a){return function(){return this.as(a)}}function dd(a){return a=J(a),this[a+"s"]()}function ed(a){return function(){return this._data[a]}}function fd(){return s(this.days()/7)}
// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
function gd(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function hd(a,b,c){var d=Mb(a).abs(),e=jf(d.as("s")),f=jf(d.as("m")),g=jf(d.as("h")),h=jf(d.as("d")),i=jf(d.as("M")),j=jf(d.as("y")),k=e<kf.s&&["s",e]||1>=f&&["m"]||f<kf.m&&["mm",f]||1>=g&&["h"]||g<kf.h&&["hh",g]||1>=h&&["d"]||h<kf.d&&["dd",h]||1>=i&&["M"]||i<kf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,gd.apply(null,k)}
// This function allows you to set the rounding function for relative time strings
function id(a){return void 0===a?jf:"function"==typeof a?(jf=a,!0):!1}
// This function allows you to set a threshold for relative time strings
function jd(a,b){return void 0===kf[a]?!1:void 0===b?kf[a]:(kf[a]=b,!0)}function kd(a){var b=this.localeData(),c=hd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function ld(){
// for ISO strings we do not use the normal bubbling rules:
//  * milliseconds bubble up until they become hours
//  * days do not bubble at all
//  * months bubble up until they become years
// This is because there is no context-free conversion between hours and days
// (think of clock changes)
// and also not between days and months (28-31 days per month)
var a,b,c,d=lf(this._milliseconds)/1e3,e=lf(this._days),f=lf(this._months);a=s(d/60),b=s(a/60),d%=60,a%=60,c=s(f/12),f%=12;
// inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var md,nd;nd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};
// Plugins that add properties should also add the key here (null value),
// so we can properly clone ourselves.
var od=a.momentProperties=[],pd=!1,qd={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var rd;rd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var sd,td={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ud={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},vd="Invalid date",wd="%d",xd=/\d{1,2}/,yd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zd={},Ad={},Bd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dd={},Ed={},Fd=/\d/,Gd=/\d\d/,Hd=/\d{3}/,Id=/\d{4}/,Jd=/[+-]?\d{6}/,Kd=/\d\d?/,Ld=/\d\d\d\d?/,Md=/\d\d\d\d\d\d?/,Nd=/\d{1,3}/,Od=/\d{1,4}/,Pd=/[+-]?\d{1,6}/,Qd=/\d+/,Rd=/[+-]?\d+/,Sd=/Z|[+-]\d\d:?\d\d/gi,Td=/Z|[+-]\d\d(?::?\d\d)?/gi,Ud=/[+-]?\d+(\.\d{1,3})?/,Vd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Wd={},Xd={},Yd=0,Zd=1,$d=2,_d=3,ae=4,be=5,ce=6,de=7,ee=8;sd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){
// I know
var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),T("MMMM",0,0,function(a){return this.localeData().months(this,a)}),I("month","M"),L("month",8),Y("M",Kd),Y("MM",Kd,Gd),Y("MMM",function(a,b){return b.monthsShortRegex(a)}),Y("MMMM",function(a,b){return b.monthsRegex(a)}),aa(["M","MM"],function(a,b){b[Zd]=t(a)-1}),aa(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Zd]=e:l(c).invalidMonth=a});
// LOCALES
var fe=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,ge="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),he="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ie=Vd,je=Vd;
// FORMATTING
T("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),
// ALIASES
I("year","y"),
// PRIORITIES
L("year",1),
// PARSING
Y("Y",Rd),Y("YY",Kd,Gd),Y("YYYY",Od,Id),Y("YYYYY",Pd,Jd),Y("YYYYYY",Pd,Jd),aa(["YYYYY","YYYYYY"],Yd),aa("YYYY",function(b,c){c[Yd]=2===b.length?a.parseTwoDigitYear(b):t(b)}),aa("YY",function(b,c){c[Yd]=a.parseTwoDigitYear(b)}),aa("Y",function(a,b){b[Yd]=parseInt(a,10)}),
// HOOKS
a.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)};
// MOMENTS
var ke=N("FullYear",!0);
// FORMATTING
T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),
// ALIASES
I("week","w"),I("isoWeek","W"),
// PRIORITIES
L("week",5),L("isoWeek",5),
// PARSING
Y("w",Kd),Y("ww",Kd,Gd),Y("W",Kd),Y("WW",Kd,Gd),ba(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=t(a)});var le={dow:0,// Sunday is the first day of the week.
doy:6};
// FORMATTING
T("d",0,"do","day"),T("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),T("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),T("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),
// ALIASES
I("day","d"),I("weekday","e"),I("isoWeekday","E"),
// PRIORITY
L("day",11),L("weekday",11),L("isoWeekday",11),
// PARSING
Y("d",Kd),Y("e",Kd),Y("E",Kd),Y("dd",function(a,b){return b.weekdaysMinRegex(a)}),Y("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Y("dddd",function(a,b){return b.weekdaysRegex(a)}),ba(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);
// if we didn't get a weekday name, mark the date as invalid
null!=e?b.d=e:l(c).invalidWeekday=a}),ba(["d","e","E"],function(a,b,c,d){b[d]=t(a)});
// LOCALES
var me="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),oe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),pe=Vd,qe=Vd,re=Vd;T("H",["HH",2],0,"hour"),T("h",["hh",2],0,Qa),T("k",["kk",2],0,Ra),T("hmm",0,0,function(){return""+Qa.apply(this)+S(this.minutes(),2)}),T("hmmss",0,0,function(){return""+Qa.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),Sa("a",!0),Sa("A",!1),
// ALIASES
I("hour","h"),
// PRIORITY
L("hour",13),Y("a",Ta),Y("A",Ta),Y("H",Kd),Y("h",Kd),Y("HH",Kd,Gd),Y("hh",Kd,Gd),Y("hmm",Ld),Y("hmmss",Md),Y("Hmm",Ld),Y("Hmmss",Md),aa(["H","HH"],_d),aa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),aa(["h","hh"],function(a,b,c){b[_d]=t(a),l(c).bigHour=!0}),aa("hmm",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d)),l(c).bigHour=!0}),aa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e)),l(c).bigHour=!0}),aa("Hmm",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d))}),aa("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e))});var se,te=/[ap]\.?m?\.?/i,ue=N("Hours",!0),ve={calendar:td,longDateFormat:ud,invalidDate:vd,ordinal:wd,ordinalParse:xd,relativeTime:yd,months:ge,monthsShort:he,week:le,weekdays:me,weekdaysMin:oe,weekdaysShort:ne,meridiemParse:te},we={},xe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ye=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ze=/Z|[+-]\d\d(?::?\d\d)?/,Ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],
// YYYYMM is NOT allowed by the standard
["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ce=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),
// constant that refers to the ISO standard
a.ISO_8601=function(){};var De=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:n()}),Ee=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:n()}),Fe=function(){return Date.now?Date.now():+new Date};xb("Z",":"),xb("ZZ",""),
// PARSING
Y("Z",Td),Y("ZZ",Td),aa(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=yb(Td,a)});
// HELPERS
// timezone chunker
// '+10:00' > ['10',  '00']
// '-1530'  > ['-15', '30']
var Ge=/([\+\-]|\d\d)/gi;
// HOOKS
// This function will be called whenever a moment is mutated.
// It is intended to keep the offset in sync with the timezone.
a.updateOffset=function(){};
// ASP.NET json date format regex
var He=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ie=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Mb.fn=vb.prototype;var Je=Rb(1,"add"),Ke=Rb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Le=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});
// FORMATTING
T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),xc("gggg","weekYear"),xc("ggggg","weekYear"),xc("GGGG","isoWeekYear"),xc("GGGGG","isoWeekYear"),
// ALIASES
I("weekYear","gg"),I("isoWeekYear","GG"),
// PRIORITY
L("weekYear",1),L("isoWeekYear",1),
// PARSING
Y("G",Rd),Y("g",Rd),Y("GG",Kd,Gd),Y("gg",Kd,Gd),Y("GGGG",Od,Id),Y("gggg",Od,Id),Y("GGGGG",Pd,Jd),Y("ggggg",Pd,Jd),ba(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=t(a)}),ba(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),
// FORMATTING
T("Q",0,"Qo","quarter"),
// ALIASES
I("quarter","Q"),
// PRIORITY
L("quarter",7),
// PARSING
Y("Q",Fd),aa("Q",function(a,b){b[Zd]=3*(t(a)-1)}),
// FORMATTING
T("D",["DD",2],"Do","date"),
// ALIASES
I("date","D"),
// PRIOROITY
L("date",9),
// PARSING
Y("D",Kd),Y("DD",Kd,Gd),Y("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),aa(["D","DD"],$d),aa("Do",function(a,b){b[$d]=t(a.match(Kd)[0],10)});
// MOMENTS
var Me=N("Date",!0);
// FORMATTING
T("DDD",["DDDD",3],"DDDo","dayOfYear"),
// ALIASES
I("dayOfYear","DDD"),
// PRIORITY
L("dayOfYear",4),
// PARSING
Y("DDD",Nd),Y("DDDD",Hd),aa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=t(a)}),
// FORMATTING
T("m",["mm",2],0,"minute"),
// ALIASES
I("minute","m"),
// PRIORITY
L("minute",14),
// PARSING
Y("m",Kd),Y("mm",Kd,Gd),aa(["m","mm"],ae);
// MOMENTS
var Ne=N("Minutes",!1);
// FORMATTING
T("s",["ss",2],0,"second"),
// ALIASES
I("second","s"),
// PRIORITY
L("second",15),
// PARSING
Y("s",Kd),Y("ss",Kd,Gd),aa(["s","ss"],be);
// MOMENTS
var Oe=N("Seconds",!1);
// FORMATTING
T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return 10*this.millisecond()}),T(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),T(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),T(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),T(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),T(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),
// ALIASES
I("millisecond","ms"),
// PRIORITY
L("millisecond",16),
// PARSING
Y("S",Nd,Fd),Y("SS",Nd,Gd),Y("SSS",Nd,Hd);var Pe;for(Pe="SSSS";Pe.length<=9;Pe+="S")Y(Pe,Qd);for(Pe="S";Pe.length<=9;Pe+="S")aa(Pe,Gc);
// MOMENTS
var Qe=N("Milliseconds",!1);
// FORMATTING
T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var Re=q.prototype;Re.add=Je,Re.calendar=Ub,Re.clone=Vb,Re.diff=ac,Re.endOf=mc,Re.format=ec,Re.from=fc,Re.fromNow=gc,Re.to=hc,Re.toNow=ic,Re.get=Q,Re.invalidAt=vc,Re.isAfter=Wb,Re.isBefore=Xb,Re.isBetween=Yb,Re.isSame=Zb,Re.isSameOrAfter=$b,Re.isSameOrBefore=_b,Re.isValid=tc,Re.lang=Le,Re.locale=jc,Re.localeData=kc,Re.max=Ee,Re.min=De,Re.parsingFlags=uc,Re.set=R,Re.startOf=lc,Re.subtract=Ke,Re.toArray=qc,Re.toObject=rc,Re.toDate=pc,Re.toISOString=dc,Re.toJSON=sc,Re.toString=cc,Re.unix=oc,Re.valueOf=nc,Re.creationData=wc,
// Year
Re.year=ke,Re.isLeapYear=qa,
// Week Year
Re.weekYear=yc,Re.isoWeekYear=zc,
// Quarter
Re.quarter=Re.quarters=Ec,
// Month
Re.month=ja,Re.daysInMonth=ka,
// Week
Re.week=Re.weeks=Aa,Re.isoWeek=Re.isoWeeks=Ba,Re.weeksInYear=Bc,Re.isoWeeksInYear=Ac,
// Day
Re.date=Me,Re.day=Re.days=Ja,Re.weekday=Ka,Re.isoWeekday=La,Re.dayOfYear=Fc,
// Hour
Re.hour=Re.hours=ue,
// Minute
Re.minute=Re.minutes=Ne,
// Second
Re.second=Re.seconds=Oe,
// Millisecond
Re.millisecond=Re.milliseconds=Qe,
// Offset
Re.utcOffset=Bb,Re.utc=Db,Re.local=Eb,Re.parseZone=Fb,Re.hasAlignedHourOffset=Gb,Re.isDST=Hb,Re.isLocal=Jb,Re.isUtcOffset=Kb,Re.isUtc=Lb,Re.isUTC=Lb,
// Timezone
Re.zoneAbbr=Hc,Re.zoneName=Ic,
// Deprecations
Re.dates=w("dates accessor is deprecated. Use date instead.",Me),Re.months=w("months accessor is deprecated. Use month instead",ja),Re.years=w("years accessor is deprecated. Use year instead",ke),Re.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Cb),Re.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ib);var Se=Re,Te=B.prototype;Te.calendar=C,Te.longDateFormat=D,Te.invalidDate=E,Te.ordinal=F,Te.preparse=Lc,Te.postformat=Lc,Te.relativeTime=G,Te.pastFuture=H,Te.set=z,
// Month
Te.months=ea,Te.monthsShort=fa,Te.monthsParse=ha,Te.monthsRegex=ma,Te.monthsShortRegex=la,
// Week
Te.week=xa,Te.firstDayOfYear=za,Te.firstDayOfWeek=ya,
// Day of Week
Te.weekdays=Ea,Te.weekdaysMin=Ga,Te.weekdaysShort=Fa,Te.weekdaysParse=Ia,Te.weekdaysRegex=Ma,Te.weekdaysShortRegex=Na,Te.weekdaysMinRegex=Oa,
// Hours
Te.isPM=Ua,Te.meridiem=Va,Za("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),
// Side effect imports
a.lang=w("moment.lang is deprecated. Use moment.locale instead.",Za),a.langData=w("moment.langData is deprecated. Use moment.localeData instead.",ab);var Ue=Math.abs,Ve=cd("ms"),We=cd("s"),Xe=cd("m"),Ye=cd("h"),Ze=cd("d"),$e=cd("w"),_e=cd("M"),af=cd("y"),bf=ed("milliseconds"),cf=ed("seconds"),df=ed("minutes"),ef=ed("hours"),ff=ed("days"),gf=ed("months"),hf=ed("years"),jf=Math.round,kf={s:45,// seconds to minute
m:45,// minutes to hour
h:22,// hours to day
d:26,// days to month
M:11},lf=Math.abs,mf=vb.prototype;mf.abs=Uc,mf.add=Wc,mf.subtract=Xc,mf.as=ad,mf.asMilliseconds=Ve,mf.asSeconds=We,mf.asMinutes=Xe,mf.asHours=Ye,mf.asDays=Ze,mf.asWeeks=$e,mf.asMonths=_e,mf.asYears=af,mf.valueOf=bd,mf._bubble=Zc,mf.get=dd,mf.milliseconds=bf,mf.seconds=cf,mf.minutes=df,mf.hours=ef,mf.days=ff,mf.weeks=fd,mf.months=gf,mf.years=hf,mf.humanize=kd,mf.toISOString=ld,mf.toString=ld,mf.toJSON=ld,mf.locale=jc,mf.localeData=kc,
// Deprecations
mf.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ld),mf.lang=Le,
// Side effect imports
// FORMATTING
T("X",0,0,"unix"),T("x",0,0,"valueOf"),
// PARSING
Y("x",Rd),Y("X",Ud),aa("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),aa("x",function(a,b,c){c._d=new Date(t(a))}),
// Side effect imports
a.version="2.14.1",b(rb),a.fn=Se,a.min=tb,a.max=ub,a.now=Fe,a.utc=j,a.unix=Jc,a.months=Pc,a.isDate=f,a.locale=Za,a.invalid=n,a.duration=Mb,a.isMoment=r,a.weekdays=Rc,a.parseZone=Kc,a.localeData=ab,a.isDuration=wb,a.monthsShort=Qc,a.weekdaysMin=Tc,a.defineLocale=$a,a.updateLocale=_a,a.locales=bb,a.weekdaysShort=Sc,a.normalizeUnits=J,a.relativeTimeRounding=id,a.relativeTimeThreshold=jd,a.calendarFormat=Tb,a.prototype=Se;var nf=a;return nf});
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */


(function (factory) {
	"use strict";

	if (typeof define === "function" && define.amd) {
		define(factory);
	}
	else if (typeof module != "undefined" && typeof module.exports != "undefined") {
		module.exports = factory();
	}
	else if (typeof Package !== "undefined") {
		Sortable = factory();  // export for Meteor.js
	}
	else {
		/* jshint sub:true */
		window["Sortable"] = factory();
	}
})(function () {
	"use strict";

	var dragEl,
		parentEl,
		ghostEl,
		cloneEl,
		rootEl,
		nextEl,

		scrollEl,
		scrollParentEl,

		lastEl,
		lastCSS,
		lastParentCSS,

		oldIndex,
		newIndex,

		activeGroup,
		autoScroll = {},

		tapEvt,
		touchEvt,

		moved,

		/** @const */
		RSPACE = /\s+/g,

		expando = 'Sortable' + (new Date).getTime(),

		win = window,
		document = win.document,
		parseInt = win.parseInt,

		supportDraggable = !!('draggable' in document.createElement('div')),
		supportCssPointerEvents = (function (el) {
			el = document.createElement('x');
			el.style.cssText = 'pointer-events:auto';
			return el.style.pointerEvents === 'auto';
		})(),

		_silent = false,

		abs = Math.abs,
		slice = [].slice,

		touchDragOverListeners = [],

		_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {
			// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521
			if (rootEl && options.scroll) {
				var el,
					rect,
					sens = options.scrollSensitivity,
					speed = options.scrollSpeed,

					x = evt.clientX,
					y = evt.clientY,

					winWidth = window.innerWidth,
					winHeight = window.innerHeight,

					vx,
					vy
				;

				// Delect scrollEl
				if (scrollParentEl !== rootEl) {
					scrollEl = options.scroll;
					scrollParentEl = rootEl;

					if (scrollEl === true) {
						scrollEl = rootEl;

						do {
							if ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||
								(scrollEl.offsetHeight < scrollEl.scrollHeight)
							) {
								break;
							}
							/* jshint boss:true */
						} while (scrollEl = scrollEl.parentNode);
					}
				}

				if (scrollEl) {
					el = scrollEl;
					rect = scrollEl.getBoundingClientRect();
					vx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);
					vy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);
				}


				if (!(vx || vy)) {
					vx = (winWidth - x <= sens) - (x <= sens);
					vy = (winHeight - y <= sens) - (y <= sens);

					/* jshint expr:true */
					(vx || vy) && (el = win);
				}


				if (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {
					autoScroll.el = el;
					autoScroll.vx = vx;
					autoScroll.vy = vy;

					clearInterval(autoScroll.pid);

					if (el) {
						autoScroll.pid = setInterval(function () {
							if (el === win) {
								win.scrollTo(win.pageXOffset + vx * speed, win.pageYOffset + vy * speed);
							} else {
								vy && (el.scrollTop += vy * speed);
								vx && (el.scrollLeft += vx * speed);
							}
						}, 24);
					}
				}
			}
		}, 30),

		_prepareGroup = function (options) {
			var group = options.group;

			if (!group || typeof group != 'object') {
				group = options.group = {name: group};
			}

			['pull', 'put'].forEach(function (key) {
				if (!(key in group)) {
					group[key] = true;
				}
			});

			options.groups = ' ' + group.name + (group.put.join ? ' ' + group.put.join(' ') : '') + ' ';
		}
	;



	/**
	 * @class  Sortable
	 * @param  {HTMLElement}  el
	 * @param  {Object}       [options]
	 */
	function Sortable(el, options) {
		if (!(el && el.nodeType && el.nodeType === 1)) {
			throw 'Sortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);
		}

		this.el = el; // root element
		this.options = options = _extend({}, options);


		// Export instance
		el[expando] = this;


		// Default options
		var defaults = {
			group: Math.random(),
			sort: true,
			disabled: false,
			store: null,
			handle: null,
			scroll: true,
			scrollSensitivity: 30,
			scrollSpeed: 10,
			draggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',
			ghostClass: 'sortable-ghost',
			chosenClass: 'sortable-chosen',
			ignore: 'a, img',
			filter: null,
			animation: 0,
			setData: function (dataTransfer, dragEl) {
				dataTransfer.setData('Text', dragEl.textContent);
			},
			dropBubble: false,
			dragoverBubble: false,
			dataIdAttr: 'data-id',
			delay: 0,
			forceFallback: false,
			fallbackClass: 'sortable-fallback',
			fallbackOnBody: false
		};


		// Set default options
		for (var name in defaults) {
			!(name in options) && (options[name] = defaults[name]);
		}

		_prepareGroup(options);

		// Bind all private methods
		for (var fn in this) {
			if (fn.charAt(0) === '_') {
				this[fn] = this[fn].bind(this);
			}
		}

		// Setup drag mode
		this.nativeDraggable = options.forceFallback ? false : supportDraggable;

		// Bind events
		_on(el, 'mousedown', this._onTapStart);
		_on(el, 'touchstart', this._onTapStart);

		if (this.nativeDraggable) {
			_on(el, 'dragover', this);
			_on(el, 'dragenter', this);
		}

		touchDragOverListeners.push(this._onDragOver);

		// Restore sorting
		options.store && this.sort(options.store.get(this));
	}


	Sortable.prototype = /** @lends Sortable.prototype */ {
		constructor: Sortable,

		_onTapStart: function (/** Event|TouchEvent */evt) {
			var _this = this,
				el = this.el,
				options = this.options,
				type = evt.type,
				touch = evt.touches && evt.touches[0],
				target = (touch || evt).target,
				originalTarget = target,
				filter = options.filter;


			if (type === 'mousedown' && evt.button !== 0 || options.disabled) {
				return; // only left button or enabled
			}

			target = _closest(target, options.draggable, el);

			if (!target) {
				return;
			}

			// get the index of the dragged element within its parent
			oldIndex = _index(target);

			// Check filter
			if (typeof filter === 'function') {
				if (filter.call(this, evt, target, this)) {
					_dispatchEvent(_this, originalTarget, 'filter', target, el, oldIndex);
					evt.preventDefault();
					return; // cancel dnd
				}
			}
			else if (filter) {
				filter = filter.split(',').some(function (criteria) {
					criteria = _closest(originalTarget, criteria.trim(), el);

					if (criteria) {
						_dispatchEvent(_this, criteria, 'filter', target, el, oldIndex);
						return true;
					}
				});

				if (filter) {
					evt.preventDefault();
					return; // cancel dnd
				}
			}


			if (options.handle && !_closest(originalTarget, options.handle, el)) {
				return;
			}


			// Prepare `dragstart`
			this._prepareDragStart(evt, touch, target);
		},

		_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target) {
			var _this = this,
				el = _this.el,
				options = _this.options,
				ownerDocument = el.ownerDocument,
				dragStartFn;

			if (target && !dragEl && (target.parentNode === el)) {
				tapEvt = evt;

				rootEl = el;
				dragEl = target;
				parentEl = dragEl.parentNode;
				nextEl = dragEl.nextSibling;
				activeGroup = options.group;

				dragStartFn = function () {
					// Delayed drag has been triggered
					// we can re-enable the events: touchmove/mousemove
					_this._disableDelayedDrag();

					// Make the element draggable
					dragEl.draggable = true;

					// Chosen item
					_toggleClass(dragEl, _this.options.chosenClass, true);

					// Bind the events: dragstart/dragend
					_this._triggerDragStart(touch);
				};

				// Disable "draggable"
				options.ignore.split(',').forEach(function (criteria) {
					_find(dragEl, criteria.trim(), _disableDraggable);
				});

				_on(ownerDocument, 'mouseup', _this._onDrop);
				_on(ownerDocument, 'touchend', _this._onDrop);
				_on(ownerDocument, 'touchcancel', _this._onDrop);

				if (options.delay) {
					// If the user moves the pointer or let go the click or touch
					// before the delay has been reached:
					// disable the delayed drag
					_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);
					_on(ownerDocument, 'touchend', _this._disableDelayedDrag);
					_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);
					_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);
					_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);

					_this._dragStartTimer = setTimeout(dragStartFn, options.delay);
				} else {
					dragStartFn();
				}
			}
		},

		_disableDelayedDrag: function () {
			var ownerDocument = this.el.ownerDocument;

			clearTimeout(this._dragStartTimer);
			_off(ownerDocument, 'mouseup', this._disableDelayedDrag);
			_off(ownerDocument, 'touchend', this._disableDelayedDrag);
			_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);
			_off(ownerDocument, 'mousemove', this._disableDelayedDrag);
			_off(ownerDocument, 'touchmove', this._disableDelayedDrag);
		},

		_triggerDragStart: function (/** Touch */touch) {
			if (touch) {
				// Touch device support
				tapEvt = {
					target: dragEl,
					clientX: touch.clientX,
					clientY: touch.clientY
				};

				this._onDragStart(tapEvt, 'touch');
			}
			else if (!this.nativeDraggable) {
				this._onDragStart(tapEvt, true);
			}
			else {
				_on(dragEl, 'dragend', this);
				_on(rootEl, 'dragstart', this._onDragStart);
			}

			try {
				if (document.selection) {
					document.selection.empty();
				} else {
					window.getSelection().removeAllRanges();
				}
			} catch (err) {
			}
		},

		_dragStarted: function () {
			if (rootEl && dragEl) {
				// Apply effect
				_toggleClass(dragEl, this.options.ghostClass, true);

				Sortable.active = this;

				// Drag start event
				_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);
			}
		},

		_emulateDragOver: function () {
			if (touchEvt) {
				if (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {
					return;
				}

				this._lastX = touchEvt.clientX;
				this._lastY = touchEvt.clientY;

				if (!supportCssPointerEvents) {
					_css(ghostEl, 'display', 'none');
				}

				var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),
					parent = target,
					groupName = ' ' + this.options.group.name + '',
					i = touchDragOverListeners.length;

				if (parent) {
					do {
						if (parent[expando] && parent[expando].options.groups.indexOf(groupName) > -1) {
							while (i--) {
								touchDragOverListeners[i]({
									clientX: touchEvt.clientX,
									clientY: touchEvt.clientY,
									target: target,
									rootEl: parent
								});
							}

							break;
						}

						target = parent; // store last element
					}
					/* jshint boss:true */
					while (parent = parent.parentNode);
				}

				if (!supportCssPointerEvents) {
					_css(ghostEl, 'display', '');
				}
			}
		},


		_onTouchMove: function (/**TouchEvent*/evt) {
			if (tapEvt) {
				// only set the status to dragging, when we are actually dragging
				if (!Sortable.active) {
					this._dragStarted();
				}

				// as well as creating the ghost element on the document body
				this._appendGhost();

				var touch = evt.touches ? evt.touches[0] : evt,
					dx = touch.clientX - tapEvt.clientX,
					dy = touch.clientY - tapEvt.clientY,
					translate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';

				moved = true;
				touchEvt = touch;

				_css(ghostEl, 'webkitTransform', translate3d);
				_css(ghostEl, 'mozTransform', translate3d);
				_css(ghostEl, 'msTransform', translate3d);
				_css(ghostEl, 'transform', translate3d);

				evt.preventDefault();
			}
		},

		_appendGhost: function () {
			if (!ghostEl) {
				var rect = dragEl.getBoundingClientRect(),
					css = _css(dragEl),
					options = this.options,
					ghostRect;

				ghostEl = dragEl.cloneNode(true);

				_toggleClass(ghostEl, options.ghostClass, false);
				_toggleClass(ghostEl, options.fallbackClass, true);

				_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));
				_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));
				_css(ghostEl, 'width', rect.width);
				_css(ghostEl, 'height', rect.height);
				_css(ghostEl, 'opacity', '0.8');
				_css(ghostEl, 'position', 'fixed');
				_css(ghostEl, 'zIndex', '100000');
				_css(ghostEl, 'pointerEvents', 'none');

				options.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);

				// Fixing dimensions.
				ghostRect = ghostEl.getBoundingClientRect();
				_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);
				_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);
			}
		},

		_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {
			var dataTransfer = evt.dataTransfer,
				options = this.options;

			this._offUpEvents();

			if (activeGroup.pull == 'clone') {
				cloneEl = dragEl.cloneNode(true);
				_css(cloneEl, 'display', 'none');
				rootEl.insertBefore(cloneEl, dragEl);
			}

			if (useFallback) {

				if (useFallback === 'touch') {
					// Bind touch events
					_on(document, 'touchmove', this._onTouchMove);
					_on(document, 'touchend', this._onDrop);
					_on(document, 'touchcancel', this._onDrop);
				} else {
					// Old brwoser
					_on(document, 'mousemove', this._onTouchMove);
					_on(document, 'mouseup', this._onDrop);
				}

				this._loopId = setInterval(this._emulateDragOver, 50);
			}
			else {
				if (dataTransfer) {
					dataTransfer.effectAllowed = 'move';
					options.setData && options.setData.call(this, dataTransfer, dragEl);
				}

				_on(document, 'drop', this);
				setTimeout(this._dragStarted, 0);
			}
		},

		_onDragOver: function (/**Event*/evt) {
			var el = this.el,
				target,
				dragRect,
				revert,
				options = this.options,
				group = options.group,
				groupPut = group.put,
				isOwner = (activeGroup === group),
				canSort = options.sort;

			if (evt.preventDefault !== void 0) {
				evt.preventDefault();
				!options.dragoverBubble && evt.stopPropagation();
			}

			moved = true;

			if (activeGroup && !options.disabled &&
				(isOwner
					? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list
					: activeGroup.pull && groupPut && (
						(activeGroup.name === group.name) || // by Name
						(groupPut.indexOf && ~groupPut.indexOf(activeGroup.name)) // by Array
					)
				) &&
				(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback
			) {
				// Smart auto-scrolling
				_autoScroll(evt, options, this.el);

				if (_silent) {
					return;
				}

				target = _closest(evt.target, options.draggable, el);
				dragRect = dragEl.getBoundingClientRect();

				if (revert) {
					_cloneHide(true);

					if (cloneEl || nextEl) {
						rootEl.insertBefore(dragEl, cloneEl || nextEl);
					}
					else if (!canSort) {
						rootEl.appendChild(dragEl);
					}

					return;
				}


				if ((el.children.length === 0) || (el.children[0] === ghostEl) ||
					(el === evt.target) && (target = _ghostIsLast(el, evt))
				) {

					if (target) {
						if (target.animated) {
							return;
						}

						targetRect = target.getBoundingClientRect();
					}

					_cloneHide(isOwner);

					if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect) !== false) {
						if (!dragEl.contains(el)) {
							el.appendChild(dragEl);
							parentEl = el; // actualization
						}

						this._animate(dragRect, dragEl);
						target && this._animate(targetRect, target);
					}
				}
				else if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {
					if (lastEl !== target) {
						lastEl = target;
						lastCSS = _css(target);
						lastParentCSS = _css(target.parentNode);
					}


					var targetRect = target.getBoundingClientRect(),
						width = targetRect.right - targetRect.left,
						height = targetRect.bottom - targetRect.top,
						floating = /left|right|inline/.test(lastCSS.cssFloat + lastCSS.display)
							|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),
						isWide = (target.offsetWidth > dragEl.offsetWidth),
						isLong = (target.offsetHeight > dragEl.offsetHeight),
						halfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,
						nextSibling = target.nextElementSibling,
						moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect),
						after
					;

					if (moveVector !== false) {
						_silent = true;
						setTimeout(_unsilent, 30);

						_cloneHide(isOwner);

						if (moveVector === 1 || moveVector === -1) {
							after = (moveVector === 1);
						}
						else if (floating) {
							var elTop = dragEl.offsetTop,
								tgTop = target.offsetTop;

							if (elTop === tgTop) {
								after = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;
							} else {
								after = tgTop > elTop;
							}
						} else {
							after = (nextSibling !== dragEl) && !isLong || halfway && isLong;
						}

						if (!dragEl.contains(el)) {
							if (after && !nextSibling) {
								el.appendChild(dragEl);
							} else {
								target.parentNode.insertBefore(dragEl, after ? nextSibling : target);
							}
						}

						parentEl = dragEl.parentNode; // actualization

						this._animate(dragRect, dragEl);
						this._animate(targetRect, target);
					}
				}
			}
		},

		_animate: function (prevRect, target) {
			var ms = this.options.animation;

			if (ms) {
				var currentRect = target.getBoundingClientRect();

				_css(target, 'transition', 'none');
				_css(target, 'transform', 'translate3d('
					+ (prevRect.left - currentRect.left) + 'px,'
					+ (prevRect.top - currentRect.top) + 'px,0)'
				);

				target.offsetWidth; // repaint

				_css(target, 'transition', 'all ' + ms + 'ms');
				_css(target, 'transform', 'translate3d(0,0,0)');

				clearTimeout(target.animated);
				target.animated = setTimeout(function () {
					_css(target, 'transition', '');
					_css(target, 'transform', '');
					target.animated = false;
				}, ms);
			}
		},

		_offUpEvents: function () {
			var ownerDocument = this.el.ownerDocument;

			_off(document, 'touchmove', this._onTouchMove);
			_off(ownerDocument, 'mouseup', this._onDrop);
			_off(ownerDocument, 'touchend', this._onDrop);
			_off(ownerDocument, 'touchcancel', this._onDrop);
		},

		_onDrop: function (/**Event*/evt) {
			var el = this.el,
				options = this.options;

			clearInterval(this._loopId);
			clearInterval(autoScroll.pid);
			clearTimeout(this._dragStartTimer);

			// Unbind events
			_off(document, 'mousemove', this._onTouchMove);

			if (this.nativeDraggable) {
				_off(document, 'drop', this);
				_off(el, 'dragstart', this._onDragStart);
			}

			this._offUpEvents();

			if (evt) {
				if (moved) {
					evt.preventDefault();
					!options.dropBubble && evt.stopPropagation();
				}

				ghostEl && ghostEl.parentNode.removeChild(ghostEl);

				if (dragEl) {
					if (this.nativeDraggable) {
						_off(dragEl, 'dragend', this);
					}

					_disableDraggable(dragEl);

					// Remove class's
					_toggleClass(dragEl, this.options.ghostClass, false);
					_toggleClass(dragEl, this.options.chosenClass, false);

					if (rootEl !== parentEl) {
						newIndex = _index(dragEl);

						if (newIndex >= 0) {
							// drag from one list and drop into another
							_dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);
							_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);

							// Add event
							_dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);

							// Remove event
							_dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);
						}
					}
					else {
						// Remove clone
						cloneEl && cloneEl.parentNode.removeChild(cloneEl);

						if (dragEl.nextSibling !== nextEl) {
							// Get the index of the dragged element within its parent
							newIndex = _index(dragEl);

							if (newIndex >= 0) {
								// drag & drop within the same list
								_dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);
								_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);
							}
						}
					}

					if (Sortable.active) {
						if (newIndex === null || newIndex === -1) {
							newIndex = oldIndex;
						}

						_dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);

						// Save sorting
						this.save();
					}
				}

				// Nulling
				rootEl =
				dragEl =
				parentEl =
				ghostEl =
				nextEl =
				cloneEl =

				scrollEl =
				scrollParentEl =

				tapEvt =
				touchEvt =

				moved =
				newIndex =

				lastEl =
				lastCSS =

				activeGroup =
				Sortable.active = null;
			}
		},


		handleEvent: function (/**Event*/evt) {
			var type = evt.type;

			if (type === 'dragover' || type === 'dragenter') {
				if (dragEl) {
					this._onDragOver(evt);
					_globalDragOver(evt);
				}
			}
			else if (type === 'drop' || type === 'dragend') {
				this._onDrop(evt);
			}
		},


		/**
		 * Serializes the item into an array of string.
		 * @returns {String[]}
		 */
		toArray: function () {
			var order = [],
				el,
				children = this.el.children,
				i = 0,
				n = children.length,
				options = this.options;

			for (; i < n; i++) {
				el = children[i];
				if (_closest(el, options.draggable, this.el)) {
					order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));
				}
			}

			return order;
		},


		/**
		 * Sorts the elements according to the array.
		 * @param  {String[]}  order  order of the items
		 */
		sort: function (order) {
			var items = {}, rootEl = this.el;

			this.toArray().forEach(function (id, i) {
				var el = rootEl.children[i];

				if (_closest(el, this.options.draggable, rootEl)) {
					items[id] = el;
				}
			}, this);

			order.forEach(function (id) {
				if (items[id]) {
					rootEl.removeChild(items[id]);
					rootEl.appendChild(items[id]);
				}
			});
		},


		/**
		 * Save the current sorting
		 */
		save: function () {
			var store = this.options.store;
			store && store.set(this);
		},


		/**
		 * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.
		 * @param   {HTMLElement}  el
		 * @param   {String}       [selector]  default: `options.draggable`
		 * @returns {HTMLElement|null}
		 */
		closest: function (el, selector) {
			return _closest(el, selector || this.options.draggable, this.el);
		},


		/**
		 * Set/get option
		 * @param   {string} name
		 * @param   {*}      [value]
		 * @returns {*}
		 */
		option: function (name, value) {
			var options = this.options;

			if (value === void 0) {
				return options[name];
			} else {
				options[name] = value;

				if (name === 'group') {
					_prepareGroup(options);
				}
			}
		},


		/**
		 * Destroy
		 */
		destroy: function () {
			var el = this.el;

			el[expando] = null;

			_off(el, 'mousedown', this._onTapStart);
			_off(el, 'touchstart', this._onTapStart);

			if (this.nativeDraggable) {
				_off(el, 'dragover', this);
				_off(el, 'dragenter', this);
			}

			// Remove draggable attributes
			Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {
				el.removeAttribute('draggable');
			});

			touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);

			this._onDrop();

			this.el = el = null;
		}
	};


	function _cloneHide(state) {
		if (cloneEl && (cloneEl.state !== state)) {
			_css(cloneEl, 'display', state ? 'none' : '');
			!state && cloneEl.state && rootEl.insertBefore(cloneEl, dragEl);
			cloneEl.state = state;
		}
	}


	function _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {
		if (el) {
			ctx = ctx || document;
			selector = selector.split('.');

			var tag = selector.shift().toUpperCase(),
				re = new RegExp('\\s(' + selector.join('|') + ')(?=\\s)', 'g');

			do {
				if (
					(tag === '>*' && el.parentNode === ctx) || (
						(tag === '' || el.nodeName.toUpperCase() == tag) &&
						(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)
					)
				) {
					return el;
				}
			}
			while (el !== ctx && (el = el.parentNode));
		}

		return null;
	}


	function _globalDragOver(/**Event*/evt) {
		if (evt.dataTransfer) {
			evt.dataTransfer.dropEffect = 'move';
		}
		evt.preventDefault();
	}


	function _on(el, event, fn) {
		el.addEventListener(event, fn, false);
	}


	function _off(el, event, fn) {
		el.removeEventListener(event, fn, false);
	}


	function _toggleClass(el, name, state) {
		if (el) {
			if (el.classList) {
				el.classList[state ? 'add' : 'remove'](name);
			}
			else {
				var className = (' ' + el.className + ' ').replace(RSPACE, ' ').replace(' ' + name + ' ', ' ');
				el.className = (className + (state ? ' ' + name : '')).replace(RSPACE, ' ');
			}
		}
	}


	function _css(el, prop, val) {
		var style = el && el.style;

		if (style) {
			if (val === void 0) {
				if (document.defaultView && document.defaultView.getComputedStyle) {
					val = document.defaultView.getComputedStyle(el, '');
				}
				else if (el.currentStyle) {
					val = el.currentStyle;
				}

				return prop === void 0 ? val : val[prop];
			}
			else {
				if (!(prop in style)) {
					prop = '-webkit-' + prop;
				}

				style[prop] = val + (typeof val === 'string' ? '' : 'px');
			}
		}
	}


	function _find(ctx, tagName, iterator) {
		if (ctx) {
			var list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;

			if (iterator) {
				for (; i < n; i++) {
					iterator(list[i], i);
				}
			}

			return list;
		}

		return [];
	}



	function _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {
		var evt = document.createEvent('Event'),
			options = (sortable || rootEl[expando]).options,
			onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);

		evt.initEvent(name, true, true);

		evt.to = rootEl;
		evt.from = fromEl || rootEl;
		evt.item = targetEl || rootEl;
		evt.clone = cloneEl;

		evt.oldIndex = startIndex;
		evt.newIndex = newIndex;

		rootEl.dispatchEvent(evt);

		if (options[onName]) {
			options[onName].call(sortable, evt);
		}
	}


	function _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect) {
		var evt,
			sortable = fromEl[expando],
			onMoveFn = sortable.options.onMove,
			retVal;

		evt = document.createEvent('Event');
		evt.initEvent('move', true, true);

		evt.to = toEl;
		evt.from = fromEl;
		evt.dragged = dragEl;
		evt.draggedRect = dragRect;
		evt.related = targetEl || toEl;
		evt.relatedRect = targetRect || toEl.getBoundingClientRect();

		fromEl.dispatchEvent(evt);

		if (onMoveFn) {
			retVal = onMoveFn.call(sortable, evt);
		}

		return retVal;
	}


	function _disableDraggable(el) {
		el.draggable = false;
	}


	function _unsilent() {
		_silent = false;
	}


	/** @returns {HTMLElement|false} */
	function _ghostIsLast(el, evt) {
		var lastEl = el.lastElementChild,
				rect = lastEl.getBoundingClientRect();

		return ((evt.clientY - (rect.top + rect.height) > 5) || (evt.clientX - (rect.right + rect.width) > 5)) && lastEl; // min delta
	}


	/**
	 * Generate id
	 * @param   {HTMLElement} el
	 * @returns {String}
	 * @private
	 */
	function _generateId(el) {
		var str = el.tagName + el.className + el.src + el.href + el.textContent,
			i = str.length,
			sum = 0;

		while (i--) {
			sum += str.charCodeAt(i);
		}

		return sum.toString(36);
	}

	/**
	 * Returns the index of an element within its parent
	 * @param  {HTMLElement} el
	 * @return {number}
	 */
	function _index(el) {
		var index = 0;

		if (!el || !el.parentNode) {
			return -1;
		}

		while (el && (el = el.previousElementSibling)) {
			if (el.nodeName.toUpperCase() !== 'TEMPLATE') {
				index++;
			}
		}

		return index;
	}

	function _throttle(callback, ms) {
		var args, _this;

		return function () {
			if (args === void 0) {
				args = arguments;
				_this = this;

				setTimeout(function () {
					if (args.length === 1) {
						callback.call(_this, args[0]);
					} else {
						callback.apply(_this, args);
					}

					args = void 0;
				}, ms);
			}
		};
	}

	function _extend(dst, src) {
		if (dst && src) {
			for (var key in src) {
				if (src.hasOwnProperty(key)) {
					dst[key] = src[key];
				}
			}
		}

		return dst;
	}


	// Export utils
	Sortable.utils = {
		on: _on,
		off: _off,
		css: _css,
		find: _find,
		is: function (el, selector) {
			return !!_closest(el, selector, el);
		},
		extend: _extend,
		throttle: _throttle,
		closest: _closest,
		toggleClass: _toggleClass,
		index: _index
	};


	/**
	 * Create sortable instance
	 * @param {HTMLElement}  el
	 * @param {Object}      [options]
	 */
	Sortable.create = function (el, options) {
		return new Sortable(el, options);
	};


	// Export
	Sortable.version = '1.4.2';
	return Sortable;
});

/*! version : 4.17.37
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
!function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],a);else if("object"==typeof exports)a(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";a(jQuery,moment)}}(function(a,b){"use strict";if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c=function(c,d){var e,f,g,h,i,j,k,l={},m=!0,n=!1,o=!1,p=0,q=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],r=["days","months","years","decades"],s=["top","bottom","auto"],t=["left","right","auto"],u=["default","top","bottom"],v={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},w={},x=function(a){var c,e,f,g,h,i=!1;return void 0!==b.tz&&void 0!==d.timeZone&&null!==d.timeZone&&""!==d.timeZone&&(i=!0),void 0===a||null===a?c=i?b().tz(d.timeZone).startOf("d"):b().startOf("d"):i?(e=b().tz(d.timeZone).utcOffset(),f=b(a,j,d.useStrict).utcOffset(),f!==e?(g=b().tz(d.timeZone).format("Z"),h=b(a,j,d.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+g,c=b(h,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict),c},y=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return-1!==i.indexOf("Y");case"M":return-1!==i.indexOf("M");case"d":return-1!==i.toLowerCase().indexOf("d");case"h":case"H":return-1!==i.toLowerCase().indexOf("h");case"m":return-1!==i.indexOf("m");case"s":return-1!==i.indexOf("s");default:return!1}},z=function(){return y("h")||y("m")||y("s")},A=function(){return y("y")||y("M")||y("d")},B=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",d.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(d.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",d.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},C=function(){var b=a("<tr>"),c=a("<tr>"),e=a("<tr>");return y("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:d.tooltips.pickHour}).attr("data-action","showHours"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(d.icons.down))))),y("m")&&(y("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:d.tooltips.pickMinute}).attr("data-action","showMinutes"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(d.icons.down))))),y("s")&&(y("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:d.tooltips.pickSecond}).attr("data-action","showSeconds"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(d.icons.down))))),h||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:d.tooltips.togglePeriod}))),e.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,e]))},D=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[C()];return y("h")&&e.push(b),y("m")&&e.push(c),y("s")&&e.push(d),e},E=function(){var b=[];return d.showTodayButton&&b.push(a("<td>").append(a("<a>").attr({"data-action":"today",title:d.tooltips.today}).append(a("<span>").addClass(d.icons.today)))),!d.sideBySide&&A()&&z()&&b.push(a("<td>").append(a("<a>").attr({"data-action":"togglePicker",title:d.tooltips.selectTime}).append(a("<span>").addClass(d.icons.time)))),d.showClear&&b.push(a("<td>").append(a("<a>").attr({"data-action":"clear",title:d.tooltips.clear}).append(a("<span>").addClass(d.icons.clear)))),d.showClose&&b.push(a("<td>").append(a("<a>").attr({"data-action":"close",title:d.tooltips.close}).append(a("<span>").addClass(d.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},F=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(B()),e=a("<div>").addClass("timepicker").append(D()),f=a("<ul>").addClass("list-unstyled"),g=a("<li>").addClass("picker-switch"+(d.collapse?" accordion-toggle":"")).append(E());return d.inline&&b.removeClass("dropdown-menu"),h&&b.addClass("usetwentyfour"),y("s")&&!h&&b.addClass("wider"),d.sideBySide&&A()&&z()?(b.addClass("timepicker-sbs"),"top"===d.toolbarPlacement&&b.append(g),b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))),"bottom"===d.toolbarPlacement&&b.append(g),b):("top"===d.toolbarPlacement&&f.append(g),A()&&f.append(a("<li>").addClass(d.collapse&&z()?"collapse in":"").append(c)),"default"===d.toolbarPlacement&&f.append(g),z()&&f.append(a("<li>").addClass(d.collapse&&A()?"collapse":"").append(e)),"bottom"===d.toolbarPlacement&&f.append(g),b.append(f))},G=function(){var b,e={};return b=c.is("input")||d.inline?c.data():c.find("input").data(),b.dateOptions&&b.dateOptions instanceof Object&&(e=a.extend(!0,e,b.dateOptions)),a.each(d,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(e[a]=b[c])}),e},H=function(){var b,e=(n||c).position(),f=(n||c).offset(),g=d.widgetPositioning.vertical,h=d.widgetPositioning.horizontal;if(d.widgetParent)b=d.widgetParent.append(o);else if(c.is("input"))b=c.after(o).parent();else{if(d.inline)return void(b=c.append(o));b=c,c.children().first().after(o)}if("auto"===g&&(g=f.top+1.5*o.height()>=a(window).height()+a(window).scrollTop()&&o.height()+c.outerHeight()<f.top?"top":"bottom"),"auto"===h&&(h=b.width()<f.left+o.outerWidth()/2&&f.left+o.outerWidth()>a(window).width()?"right":"left"),"top"===g?o.addClass("top").removeClass("bottom"):o.addClass("bottom").removeClass("top"),"right"===h?o.addClass("pull-right"):o.removeClass("pull-right"),"relative"!==b.css("position")&&(b=b.parents().filter(function(){return"relative"===a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a relative positioned container");o.css({top:"top"===g?"auto":e.top+c.outerHeight(),bottom:"top"===g?e.top+c.outerHeight():"auto",left:"left"===h?b===c?0:e.left:"auto",right:"left"===h?"auto":b.outerWidth()-c.outerWidth()-(b===c?0:e.left)})},I=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||c.trigger(a)},J=function(a){"y"===a&&(a="YYYY"),I({type:"dp.update",change:a,viewDate:f.clone()})},K=function(a){o&&(a&&(k=Math.max(p,Math.min(3,k+a))),o.find(".datepicker > div").hide().filter(".datepicker-"+q[k].clsName).show())},L=function(){var b=a("<tr>"),c=f.clone().startOf("w").startOf("d");for(d.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(f.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");o.find(".datepicker-days thead").append(b)},M=function(a){return d.disabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a){return d.enabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){return d.disabledHours[a.format("H")]===!0},P=function(a){return d.enabledHours[a.format("H")]===!0},Q=function(b,c){if(!b.isValid())return!1;if(d.disabledDates&&"d"===c&&M(b))return!1;if(d.enabledDates&&"d"===c&&!N(b))return!1;if(d.minDate&&b.isBefore(d.minDate,c))return!1;if(d.maxDate&&b.isAfter(d.maxDate,c))return!1;if(d.daysOfWeekDisabled&&"d"===c&&-1!==d.daysOfWeekDisabled.indexOf(b.day()))return!1;if(d.disabledHours&&("h"===c||"m"===c||"s"===c)&&O(b))return!1;if(d.enabledHours&&("h"===c||"m"===c||"s"===c)&&!P(b))return!1;if(d.disabledTimeIntervals&&("h"===c||"m"===c||"s"===c)){var e=!1;if(a.each(d.disabledTimeIntervals,function(){return b.isBetween(this[0],this[1])?(e=!0,!1):void 0}),e)return!1}return!0},R=function(){for(var b=[],c=f.clone().startOf("y").startOf("d");c.isSame(f,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");o.find(".datepicker-months td").empty().append(b)},S=function(){var b=o.find(".datepicker-months"),c=b.find("th"),g=b.find("tbody").find("span");c.eq(0).find("span").attr("title",d.tooltips.prevYear),c.eq(1).attr("title",d.tooltips.selectYear),c.eq(2).find("span").attr("title",d.tooltips.nextYear),b.find(".disabled").removeClass("disabled"),Q(f.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(f.year()),Q(f.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),g.removeClass("active"),e.isSame(f,"y")&&!m&&g.eq(e.month()).addClass("active"),g.each(function(b){Q(f.clone().month(b),"M")||a(this).addClass("disabled")})},T=function(){var a=o.find(".datepicker-years"),b=a.find("th"),c=f.clone().subtract(5,"y"),g=f.clone().add(6,"y"),h="";for(b.eq(0).find("span").attr("title",d.tooltips.prevDecade),b.eq(1).attr("title",d.tooltips.selectDecade),b.eq(2).find("span").attr("title",d.tooltips.nextDecade),a.find(".disabled").removeClass("disabled"),d.minDate&&d.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+g.year()),d.maxDate&&d.maxDate.isBefore(g,"y")&&b.eq(2).addClass("disabled");!c.isAfter(g,"y");)h+='<span data-action="selectYear" class="year'+(c.isSame(e,"y")&&!m?" active":"")+(Q(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(h)},U=function(){var a=o.find(".datepicker-decades"),c=a.find("th"),g=b({y:f.year()-f.year()%100-1}),h=g.clone().add(100,"y"),i=g.clone(),j="";for(c.eq(0).find("span").attr("title",d.tooltips.prevCentury),c.eq(2).find("span").attr("title",d.tooltips.nextCentury),a.find(".disabled").removeClass("disabled"),(g.isSame(b({y:1900}))||d.minDate&&d.minDate.isAfter(g,"y"))&&c.eq(0).addClass("disabled"),c.eq(1).text(g.year()+"-"+h.year()),(g.isSame(b({y:2e3}))||d.maxDate&&d.maxDate.isBefore(h,"y"))&&c.eq(2).addClass("disabled");!g.isAfter(h,"y");)j+='<span data-action="selectDecade" class="decade'+(g.isSame(e,"y")?" active":"")+(Q(g,"y")?"":" disabled")+'" data-selection="'+(g.year()+6)+'">'+(g.year()+1)+" - "+(g.year()+12)+"</span>",g.add(12,"y");j+="<span></span><span></span><span></span>",a.find("td").html(j),c.eq(1).text(i.year()+1+"-"+g.year())},V=function(){var b,c,g,h,i=o.find(".datepicker-days"),j=i.find("th"),k=[];if(A()){for(j.eq(0).find("span").attr("title",d.tooltips.prevMonth),j.eq(1).attr("title",d.tooltips.selectMonth),j.eq(2).find("span").attr("title",d.tooltips.nextMonth),i.find(".disabled").removeClass("disabled"),j.eq(1).text(f.format(d.dayViewHeaderFormat)),Q(f.clone().subtract(1,"M"),"M")||j.eq(0).addClass("disabled"),Q(f.clone().add(1,"M"),"M")||j.eq(2).addClass("disabled"),b=f.clone().startOf("M").startOf("w").startOf("d"),h=0;42>h;h++)0===b.weekday()&&(c=a("<tr>"),d.calendarWeeks&&c.append('<td class="cw">'+b.week()+"</td>"),k.push(c)),g="",b.isBefore(f,"M")&&(g+=" old"),b.isAfter(f,"M")&&(g+=" new"),b.isSame(e,"d")&&!m&&(g+=" active"),Q(b,"d")||(g+=" disabled"),b.isSame(x(),"d")&&(g+=" today"),(0===b.day()||6===b.day())&&(g+=" weekend"),c.append('<td data-action="selectDay" data-day="'+b.format("L")+'" class="day'+g+'">'+b.date()+"</td>"),b.add(1,"d");i.find("tbody").empty().append(k),S(),T(),U()}},W=function(){var b=o.find(".timepicker-hours table"),c=f.clone().startOf("d"),d=[],e=a("<tr>");for(f.hour()>11&&!h&&c.hour(12);c.isSame(f,"d")&&(h||f.hour()<12&&c.hour()<12||f.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(Q(c,"h")?"":" disabled")+'">'+c.format(h?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},X=function(){for(var b=o.find(".timepicker-minutes table"),c=f.clone().startOf("h"),e=[],g=a("<tr>"),h=1===d.stepping?5:d.stepping;f.isSame(c,"h");)c.minute()%(4*h)===0&&(g=a("<tr>"),e.push(g)),g.append('<td data-action="selectMinute" class="minute'+(Q(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(h,"m");b.empty().append(e)},Y=function(){for(var b=o.find(".timepicker-seconds table"),c=f.clone().startOf("m"),d=[],e=a("<tr>");f.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(Q(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},Z=function(){var a,b,c=o.find(".timepicker span[data-time-component]");h||(a=o.find(".timepicker [data-action=togglePeriod]"),b=e.clone().add(e.hours()>=12?-12:12,"h"),a.text(e.format("A")),Q(b,"h")?a.removeClass("disabled"):a.addClass("disabled")),c.filter("[data-time-component=hours]").text(e.format(h?"HH":"hh")),c.filter("[data-time-component=minutes]").text(e.format("mm")),c.filter("[data-time-component=seconds]").text(e.format("ss")),W(),X(),Y()},$=function(){o&&(V(),Z())},_=function(a){var b=m?null:e;return a?(a=a.clone().locale(d.locale),1!==d.stepping&&a.minutes(Math.round(a.minutes()/d.stepping)*d.stepping%60).seconds(0),void(Q(a)?(e=a,f=e.clone(),g.val(e.format(i)),c.data("date",e.format(i)),m=!1,$(),I({type:"dp.change",date:e.clone(),oldDate:b})):(d.keepInvalid||g.val(m?"":e.format(i)),I({type:"dp.error",date:a})))):(m=!0,g.val(""),c.data("date",""),I({type:"dp.change",date:!1,oldDate:b}),void $())},aa=function(){var b=!1;return o?(o.find(".collapse").each(function(){var c=a(this).data("collapse");return c&&c.transitioning?(b=!0,!1):!0}),b?l:(n&&n.hasClass("btn")&&n.toggleClass("active"),o.hide(),a(window).off("resize",H),o.off("click","[data-action]"),o.off("mousedown",!1),o.remove(),o=!1,I({type:"dp.hide",date:e.clone()}),g.blur(),l)):l},ba=function(){_(null)},ca={next:function(){var a=q[k].navFnc;f.add(q[k].navStep,a),V(),J(a)},previous:function(){var a=q[k].navFnc;f.subtract(q[k].navStep,a),V(),J(a)},pickerSwitch:function(){K(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));f.month(c),k===p?(_(e.clone().year(f.year()).month(f.month())),d.inline||aa()):(K(-1),V()),J("M")},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDecade:function(b){var c=parseInt(a(b.target).data("selection"),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDay:function(b){var c=f.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),_(c.date(parseInt(a(b.target).text(),10))),z()||d.keepOpen||d.inline||aa()},incrementHours:function(){var a=e.clone().add(1,"h");Q(a,"h")&&_(a)},incrementMinutes:function(){var a=e.clone().add(d.stepping,"m");Q(a,"m")&&_(a)},incrementSeconds:function(){var a=e.clone().add(1,"s");Q(a,"s")&&_(a)},decrementHours:function(){var a=e.clone().subtract(1,"h");Q(a,"h")&&_(a)},decrementMinutes:function(){var a=e.clone().subtract(d.stepping,"m");Q(a,"m")&&_(a)},decrementSeconds:function(){var a=e.clone().subtract(1,"s");Q(a,"s")&&_(a)},togglePeriod:function(){_(e.clone().add(e.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,e=a(b.target),f=e.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),e.is("span")?e.toggleClass(d.icons.time+" "+d.icons.date):e.find("span").toggleClass(d.icons.time+" "+d.icons.date)}},showPicker:function(){o.find(".timepicker > div:not(.timepicker-picker)").hide(),o.find(".timepicker .timepicker-picker").show()},showHours:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-hours").show()},showMinutes:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);h||(e.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),_(e.clone().hours(c)),ca.showPicker.call(l)},selectMinute:function(b){_(e.clone().minutes(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},selectSecond:function(b){_(e.clone().seconds(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},clear:ba,today:function(){var a=x();Q(a,"d")&&_(a)},close:aa},da=function(b){return a(b.currentTarget).is(".disabled")?!1:(ca[a(b.currentTarget).data("action")].apply(l,arguments),!1)},ea=function(){var b,c={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return g.prop("disabled")||!d.ignoreReadonly&&g.prop("readonly")||o?l:(void 0!==g.val()&&0!==g.val().trim().length?_(ga(g.val().trim())):d.useCurrent&&m&&(g.is("input")&&0===g.val().trim().length||d.inline)&&(b=x(),"string"==typeof d.useCurrent&&(b=c[d.useCurrent](b)),_(b)),o=F(),L(),R(),o.find(".timepicker-hours").hide(),o.find(".timepicker-minutes").hide(),o.find(".timepicker-seconds").hide(),$(),K(),a(window).on("resize",H),o.on("click","[data-action]",da),o.on("mousedown",!1),n&&n.hasClass("btn")&&n.toggleClass("active"),o.show(),H(),d.focusOnShow&&!g.is(":focus")&&g.focus(),I({type:"dp.show"}),l)},fa=function(){return o?aa():ea()},ga=function(a){return a=void 0===d.parseInputDate?b.isMoment(a)||a instanceof Date?b(a):x(a):d.parseInputDate(a),a.locale(d.locale),a},ha=function(a){var b,c,e,f,g=null,h=[],i={},j=a.which,k="p";w[j]=k;for(b in w)w.hasOwnProperty(b)&&w[b]===k&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in d.keyBinds)if(d.keyBinds.hasOwnProperty(b)&&"function"==typeof d.keyBinds[b]&&(e=b.split(" "),e.length===h.length&&v[j]===e[e.length-1])){for(f=!0,c=e.length-2;c>=0;c--)if(!(v[e[c]]in i)){f=!1;break}if(f){g=d.keyBinds[b];break}}g&&(g.call(l,o),a.stopPropagation(),a.preventDefault())},ia=function(a){w[a.which]="r",a.stopPropagation(),a.preventDefault()},ja=function(b){var c=a(b.target).val().trim(),d=c?ga(c):null;return _(d),b.stopImmediatePropagation(),!1},ka=function(){g.on({change:ja,blur:d.debug?"":aa,keydown:ha,keyup:ia,focus:d.allowInputToggle?ea:""}),c.is("input")?g.on({focus:ea}):n&&(n.on("click",fa),n.on("mousedown",!1))},la=function(){g.off({change:ja,blur:blur,keydown:ha,keyup:ia,focus:d.allowInputToggle?aa:""}),c.is("input")?g.off({focus:ea}):n&&(n.off("click",fa),n.off("mousedown",!1))},ma=function(b){var c={};return a.each(b,function(){var a=ga(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),Object.keys(c).length?c:!1},na=function(b){var c={};return a.each(b,function(){c[this]=!0}),Object.keys(c).length?c:!1},oa=function(){var a=d.format||"L LT";i=a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){var b=e.localeData().longDateFormat(a)||a;return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){return e.localeData().longDateFormat(a)||a})}),j=d.extraFormats?d.extraFormats.slice():[],j.indexOf(a)<0&&j.indexOf(i)<0&&j.push(i),h=i.toLowerCase().indexOf("a")<1&&i.replace(/\[.*?\]/g,"").indexOf("h")<1,y("y")&&(p=2),y("M")&&(p=1),y("d")&&(p=0),k=Math.max(p,k),m||_(e)};if(l.destroy=function(){aa(),la(),c.removeData("DateTimePicker"),c.removeData("date")},l.toggle=fa,l.show=ea,l.hide=aa,l.disable=function(){return aa(),n&&n.hasClass("btn")&&n.addClass("disabled"),g.prop("disabled",!0),l},l.enable=function(){return n&&n.hasClass("btn")&&n.removeClass("disabled"),g.prop("disabled",!1),l},l.ignoreReadonly=function(a){if(0===arguments.length)return d.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return d.ignoreReadonly=a,l},l.options=function(b){if(0===arguments.length)return a.extend(!0,{},d);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,d,b),a.each(d,function(a,b){if(void 0===l[a])throw new TypeError("option "+a+" is not recognized!");l[a](b)}),l},l.date=function(a){if(0===arguments.length)return m?null:e.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return _(null===a?null:ga(a)),l},l.format=function(a){if(0===arguments.length)return d.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+a);return d.format=a,i&&oa(),l},l.timeZone=function(a){return 0===arguments.length?d.timeZone:(d.timeZone=a,l)},l.dayViewHeaderFormat=function(a){if(0===arguments.length)return d.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return d.dayViewHeaderFormat=a,l},l.extraFormats=function(a){if(0===arguments.length)return d.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return d.extraFormats=a,j&&oa(),l},l.disabledDates=function(b){if(0===arguments.length)return d.disabledDates?a.extend({},d.disabledDates):d.disabledDates;if(!b)return d.disabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return d.disabledDates=ma(b),d.enabledDates=!1,$(),l},l.enabledDates=function(b){if(0===arguments.length)return d.enabledDates?a.extend({},d.enabledDates):d.enabledDates;if(!b)return d.enabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return d.enabledDates=ma(b),d.disabledDates=!1,$(),l},l.daysOfWeekDisabled=function(a){if(0===arguments.length)return d.daysOfWeekDisabled.splice(0);if("boolean"==typeof a&&!a)return d.daysOfWeekDisabled=!1,$(),l;if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(d.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||0>b||isNaN(b)?a:(-1===a.indexOf(b)&&a.push(b),a)},[]).sort(),d.useCurrent&&!d.keepInvalid){for(var b=0;!Q(e,"d");){if(e.add(1,"d"),7===b)throw"Tried 7 times to find a valid date";b++}_(e)}return $(),l},l.maxDate=function(a){if(0===arguments.length)return d.maxDate?d.maxDate.clone():d.maxDate;if("boolean"==typeof a&&a===!1)return d.maxDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(d.minDate&&b.isBefore(d.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+b.format(i));return d.maxDate=b,d.useCurrent&&!d.keepInvalid&&e.isAfter(a)&&_(d.maxDate),f.isAfter(b)&&(f=b.clone().subtract(d.stepping,"m")),$(),l},l.minDate=function(a){if(0===arguments.length)return d.minDate?d.minDate.clone():d.minDate;if("boolean"==typeof a&&a===!1)return d.minDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(d.maxDate&&b.isAfter(d.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+b.format(i));return d.minDate=b,d.useCurrent&&!d.keepInvalid&&e.isBefore(a)&&_(d.minDate),f.isBefore(b)&&(f=b.clone().add(d.stepping,"m")),$(),l},l.defaultDate=function(a){if(0===arguments.length)return d.defaultDate?d.defaultDate.clone():d.defaultDate;if(!a)return d.defaultDate=!1,l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!Q(b))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return d.defaultDate=b,(d.defaultDate&&d.inline||""===g.val().trim())&&_(d.defaultDate),l},l.locale=function(a){if(0===arguments.length)return d.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return d.locale=a,e.locale(d.locale),f.locale(d.locale),i&&oa(),o&&(aa(),ea()),l},l.stepping=function(a){return 0===arguments.length?d.stepping:(a=parseInt(a,10),(isNaN(a)||1>a)&&(a=1),d.stepping=a,l)},l.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return d.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&-1===b.indexOf(a.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return d.useCurrent=a,l},l.collapse=function(a){if(0===arguments.length)return d.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return d.collapse===a?l:(d.collapse=a,o&&(aa(),ea()),l)},l.icons=function(b){if(0===arguments.length)return a.extend({},d.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(d.icons,b),o&&(aa(),ea()),l},l.tooltips=function(b){if(0===arguments.length)return a.extend({},d.tooltips);if(!(b instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return a.extend(d.tooltips,b),o&&(aa(),ea()),l},l.useStrict=function(a){if(0===arguments.length)return d.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return d.useStrict=a,l},l.sideBySide=function(a){if(0===arguments.length)return d.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return d.sideBySide=a,o&&(aa(),ea()),l},l.viewMode=function(a){if(0===arguments.length)return d.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(-1===r.indexOf(a))throw new TypeError("viewMode() parameter must be one of ("+r.join(", ")+") value");return d.viewMode=a,k=Math.max(r.indexOf(a),p),K(),l},l.toolbarPlacement=function(a){if(0===arguments.length)return d.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===u.indexOf(a))throw new TypeError("toolbarPlacement() parameter must be one of ("+u.join(", ")+") value");return d.toolbarPlacement=a,o&&(aa(),ea()),l},l.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},d.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),-1===t.indexOf(b.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+t.join(", ")+")");d.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),-1===s.indexOf(b.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+s.join(", ")+")");d.widgetPositioning.vertical=b.vertical}return $(),l},l.calendarWeeks=function(a){if(0===arguments.length)return d.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return d.calendarWeeks=a,$(),l},l.showTodayButton=function(a){if(0===arguments.length)return d.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return d.showTodayButton=a,o&&(aa(),ea()),l},l.showClear=function(a){if(0===arguments.length)return d.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return d.showClear=a,o&&(aa(),ea()),l},l.widgetParent=function(b){if(0===arguments.length)return d.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return d.widgetParent=b,o&&(aa(),ea()),l},l.keepOpen=function(a){if(0===arguments.length)return d.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return d.keepOpen=a,l},l.focusOnShow=function(a){if(0===arguments.length)return d.focusOnShow;if("boolean"!=typeof a)throw new TypeError("focusOnShow() expects a boolean parameter");return d.focusOnShow=a,l},l.inline=function(a){if(0===arguments.length)return d.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return d.inline=a,l},l.clear=function(){return ba(),l},l.keyBinds=function(a){return d.keyBinds=a,l},l.getMoment=function(a){return x(a)},l.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return d.debug=a,l},l.allowInputToggle=function(a){if(0===arguments.length)return d.allowInputToggle;if("boolean"!=typeof a)throw new TypeError("allowInputToggle() expects a boolean parameter");return d.allowInputToggle=a,l},l.showClose=function(a){if(0===arguments.length)return d.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return d.showClose=a,l},l.keepInvalid=function(a){if(0===arguments.length)return d.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");return d.keepInvalid=a,l},l.datepickerInput=function(a){if(0===arguments.length)return d.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return d.datepickerInput=a,l},l.parseInputDate=function(a){if(0===arguments.length)return d.parseInputDate;
if("function"!=typeof a)throw new TypeError("parseInputDate() sholud be as function");return d.parseInputDate=a,l},l.disabledTimeIntervals=function(b){if(0===arguments.length)return d.disabledTimeIntervals?a.extend({},d.disabledTimeIntervals):d.disabledTimeIntervals;if(!b)return d.disabledTimeIntervals=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return d.disabledTimeIntervals=b,$(),l},l.disabledHours=function(b){if(0===arguments.length)return d.disabledHours?a.extend({},d.disabledHours):d.disabledHours;if(!b)return d.disabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(d.disabledHours=na(b),d.enabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.enabledHours=function(b){if(0===arguments.length)return d.enabledHours?a.extend({},d.enabledHours):d.enabledHours;if(!b)return d.enabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(d.enabledHours=na(b),d.disabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.viewDate=function(a){if(0===arguments.length)return f.clone();if(!a)return f=e.clone(),l;if(!("string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return f=ga(a),J(),l},c.is("input"))g=c;else if(g=c.find(d.datepickerInput),0===g.size())g=c.find("input");else if(!g.is("input"))throw new Error('CSS class "'+d.datepickerInput+'" cannot be applied to non input element');if(c.hasClass("input-group")&&(n=0===c.find(".datepickerbutton").size()?c.find(".input-group-addon"):c.find(".datepickerbutton")),!d.inline&&!g.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e=x(),f=e.clone(),a.extend(!0,d,G()),l.options(d),oa(),ka(),g.prop("disabled")&&l.disable(),g.is("input")&&0!==g.val().trim().length?_(ga(g.val().trim())):d.defaultDate&&void 0===g.attr("placeholder")&&_(d.defaultDate),d.inline&&ea(),l};a.fn.datetimepicker=function(b){return this.each(function(){var d=a(this);d.data("DateTimePicker")||(b=a.extend(!0,{},a.fn.datetimepicker.defaults,b),d.data("DateTimePicker",c(d,b)))})},a.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(7,"d")):this.date(b.clone().add(this.stepping(),"m"))}},down:function(a){if(!a)return void this.show();var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(7,"d")):this.date(b.clone().subtract(this.stepping(),"m"))},"control up":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(1,"y")):this.date(b.clone().add(1,"h"))}},"control down":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(1,"y")):this.date(b.clone().subtract(1,"h"))}},left:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"d"))}},right:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"d"))}},pageUp:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}});
/*
 * bootstrap-tagsinput v0.8.0
 * 
 */

!function(a){"use strict";function b(b,c){this.isInit=!0,this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(c),this.isInit=!1}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?i.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function g(b,c){var d=!1;return a.each(c,function(a,c){if("number"==typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}}),d}var h={tagClass:function(a){return"label label-info"},focusClass:"focus",itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};b.prototype={constructor:b,add:function(b,c,d){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags)&&(b===!1||b)){if("string"==typeof b&&f.options.trimValue&&(b=a.trim(b)),"object"==typeof b&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if(f.isSelect&&!f.multiple&&f.itemsArray.length>0&&f.remove(f.itemsArray[0]),"string"==typeof b&&"INPUT"===this.$element[0].tagName){var g=f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter,h=b.split(g);if(h.length>1){for(var i=0;i<h.length;i++)this.add(h[i],!0);return void(c||f.pushVal(f.options.triggerChange))}}var j=f.options.itemValue(b),k=f.options.itemText(b),l=f.options.tagClass(b),m=f.options.itemTitle(b),n=a.grep(f.itemsArray,function(a){return f.options.itemValue(a)===j})[0];if(!n||f.options.allowDuplicates){if(!(f.items().toString().length+b.length+1>f.options.maxInputLength)){var o=a.Event("beforeItemAdd",{item:b,cancel:!1,options:d});if(f.$element.trigger(o),!o.cancel){f.itemsArray.push(b);var p=a('<span class="tag '+e(l)+(null!==m?'" title="'+m:"")+'">'+e(k)+'<span data-role="remove"></span></span>');p.data("item",b),f.findInputWrapper().before(p),p.after(" ");var q=a('option[value="'+encodeURIComponent(j)+'"]',f.$element).length||a('option[value="'+e(j)+'"]',f.$element).length;if(f.isSelect&&!q){var r=a("<option selected>"+e(k)+"</option>");r.data("item",b),r.attr("value",j),f.$element.append(r)}c||f.pushVal(f.options.triggerChange),(f.options.maxTags===f.itemsArray.length||f.items().toString().length===f.options.maxInputLength)&&f.$container.addClass("bootstrap-tagsinput-max"),a(".typeahead, .twitter-typeahead",f.$container).length&&f.$input.typeahead("val",""),this.isInit?f.$element.trigger(a.Event("itemAddedOnInit",{item:b,options:d})):f.$element.trigger(a.Event("itemAdded",{item:b,options:d}))}}}else if(f.options.onTagExists){var s=a(".tag",f.$container).filter(function(){return a(this).data("item")===n});f.options.onTagExists(b,s)}}}},remove:function(b,c,d){var e=this;if(e.objectItems&&(b="object"==typeof b?a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==e.options.itemValue(b)}):a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==b}),b=b[b.length-1]),b){var f=a.Event("beforeItemRemove",{item:b,cancel:!1,options:d});if(e.$element.trigger(f),f.cancel)return;a(".tag",e.$container).filter(function(){return a(this).data("item")===b}).remove(),a("option",e.$element).filter(function(){return a(this).data("item")===b}).remove(),-1!==a.inArray(b,e.itemsArray)&&e.itemsArray.splice(a.inArray(b,e.itemsArray),1)}c||e.pushVal(e.options.triggerChange),e.options.maxTags>e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max"),e.$element.trigger(a.Event("itemRemoved",{item:b,options:d}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal(b.options.triggerChange)},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),d=c.data("item"),f=b.options.itemValue(d),g=b.options.itemText(d),h=b.options.tagClass(d);if(c.attr("class",null),c.addClass("tag "+e(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===d});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0),b.options.triggerChange&&b.$element.trigger("change")},build:function(b){var e=this;if(e.options=a.extend({},h,b),e.objectItems&&(e.options.freeInput=!1),c(e.options,"itemValue"),c(e.options,"itemText"),d(e.options,"tagClass"),e.options.typeahead){var i=e.options.typeahead||{};d(i,"source"),e.$input.typeahead(a.extend({},i,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=i.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){return e.add(this.map[a]),this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var j=null,k={},l=e.options.typeaheadjs;a.isArray(l)?(j=l[0],k=l[1]):k=l,e.$input.typeahead(j,k).on("typeahead:selected",a.proxy(function(a,b){k.valueKey?e.add(b[k.valueKey]):e.add(b),e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",a.proxy(function(b){0===a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on({focusin:function(){e.$container.addClass(e.options.focusClass)},focusout:function(){e.$container.removeClass(e.options.focusClass)}}),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),d=e.findInputWrapper();if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");switch(b.which){case 8:if(0===f(c[0])){var g=d.prev();g.length&&e.remove(g.data("item"))}break;case 46:if(0===f(c[0])){var h=d.next();h.length&&e.remove(h.data("item"))}break;case 37:var i=d.prev();0===c.val().length&&i[0]&&(i.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus())}var k=c.val().length;Math.ceil(k/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("keypress","input",a.proxy(function(b){var c=a(b.target);if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");var d=c.val(),f=e.options.maxChars&&d.length>=e.options.maxChars;e.options.freeInput&&(g(b,e.options.confirmKeys)||f)&&(0!==d.length&&(e.add(f?d.substr(0,e.options.maxChars):d),c.val("")),e.options.cancelConfirmKeysOnEmpty===!1&&b.preventDefault());var h=c.val().length;Math.ceil(h/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d,e){var f=[];return this.each(function(){var g=a(this).data("tagsinput");if(g)if(c||d){if(void 0!==g[c]){if(3===g[c].length&&void 0!==e)var h=g[c](d,null,e);else var h=g[c](d);void 0!==h&&f.push(h)}}else f.push(g);else g=new b(this,c),a(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?f.length>1?f:f[0]:f},a.fn.tagsinput.Constructor=b;var i=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map
/* =============================================================
 * bootstrap-combobox.js v1.1.7
 * =============================================================
 * Copyright 2012 Daniel Farrell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

!function( $ ) {

 "use strict";

 /* COMBOBOX PUBLIC CLASS DEFINITION
  * ================================ */

  var Combobox = function ( element, options ) {
    this.options = $.extend({}, $.fn.combobox.defaults, options);
    this.template = this.options.template || this.template
    this.$source = $(element);
    this.$container = this.setup();
    this.$element = this.$container.find('input[type=text]');
    this.$target = this.$container.find('input[type=hidden]');
    this.$button = this.$container.find('.dropdown-toggle');
    this.$menu = $(this.options.menu).appendTo('body');
    this.matcher = this.options.matcher || this.matcher;
    this.sorter = this.options.sorter || this.sorter;
    this.highlighter = this.options.highlighter || this.highlighter;
    this.shown = false;
    this.selected = false;
    this.refresh();
    this.transferAttributes();
    this.listen();
  };

  Combobox.prototype = {

    constructor: Combobox

  , setup: function () {
      var combobox = $(this.template());
      this.$source.before(combobox);
      this.$source.hide();
      return combobox;
    }

  , disable: function() {
      this.$element.prop('disabled', true);
      this.$button.attr('disabled', true);
      this.disabled = true;
      this.$container.addClass('combobox-disabled');
    }

  , enable: function() {
      this.$element.prop('disabled', false);
      this.$button.attr('disabled', false);
      this.disabled = false;
      this.$container.removeClass('combobox-disabled');
    }
  , parse: function () {
      var that = this
        , map = {}
        , source = []
        , selected = false
        , selectedValue = '';
      this.$source.find('option').each(function() {
        var option = $(this);
        if (option.val() === '') {
          that.options.placeholder = option.text();
          return;
        }
        map[option.text()] = option.val();
        source.push(option.text());
        if (option.prop('selected')) {
          selected = option.text();
          selectedValue = option.val();
        }
      })
      this.map = map;
      if (selected) {
        this.$element.val(selected);
        this.$target.val(selectedValue);
        this.$container.addClass('combobox-selected');
        this.selected = true;
      }
      return source;
    }

  , transferAttributes: function() {
    this.options.placeholder = this.$source.attr('data-placeholder') || this.options.placeholder
    if(this.options.appendId !== "undefined") {
    	this.$element.attr('id', this.$source.attr('id') + this.options.appendId);
    }
    this.$element.attr('placeholder', this.options.placeholder)
    this.$target.prop('name', this.$source.prop('name'))
    this.$target.val(this.$source.val())
    this.$source.removeAttr('name')  // Remove from source otherwise form will pass parameter twice.
    this.$element.attr('required', this.$source.attr('required'))
    this.$element.attr('rel', this.$source.attr('rel'))
    this.$element.attr('title', this.$source.attr('title'))
    this.$element.attr('class', this.$source.attr('class'))
    this.$element.attr('tabindex', this.$source.attr('tabindex'))
    this.$source.removeAttr('tabindex')
    if (this.$source.attr('disabled')!==undefined)
      this.disable();
  }

  , select: function () {
      var val = this.$menu.find('.active').attr('data-value');
      this.$element.val(this.updater(val)).trigger('change');
      this.$target.val(this.map[val]).trigger('change');
      this.$source.val(this.map[val]).trigger('change');
      this.$container.addClass('combobox-selected');
      this.selected = true;
      return this.hide();
    }

  , updater: function (item) {
      return item;
    }

  , show: function () {
      var pos = $.extend({}, this.$element.position(), {
        height: this.$element[0].offsetHeight
      });

      this.$menu
        .insertAfter(this.$element)
        .css({
          top: pos.top + pos.height
        , left: pos.left
        })
        .show();

      $('.dropdown-menu').on('mousedown', $.proxy(this.scrollSafety, this));

      this.shown = true;
      return this;
    }

  , hide: function () {
      this.$menu.hide();
      $('.dropdown-menu').off('mousedown', $.proxy(this.scrollSafety, this));
      this.$element.on('blur', $.proxy(this.blur, this));
      this.shown = false;
      return this;
    }

  , lookup: function (event) {
      this.query = this.$element.val();
      return this.process(this.source);
    }

  , process: function (items) {
      var that = this;

      items = $.grep(items, function (item) {
        return that.matcher(item);
      })

      items = this.sorter(items);

      if (!items.length) {
        return this.shown ? this.hide() : this;
      }

      return this.render(items.slice(0, this.options.items)).show();
    }

  , template: function() {
      if (this.options.bsVersion == '2') {
        return '<div class="combobox-container"><input type="hidden" /> <div class="input-append"> <input type="text" autocomplete="false" /> <span class="add-on dropdown-toggle" data-dropdown="dropdown"> <span class="caret"/> <i class="icon-remove"/> </span> </div> </div>'
      } else {
        return '<div class="combobox-container"> <input type="hidden" /> <div class="input-group"> <input type="text" autocomplete="false" /> <span class="input-group-addon dropdown-toggle" data-dropdown="dropdown"> <span class="caret" /> <span class="glyphicon glyphicon-remove" /> </span> </div> </div>'
      }
    }

  , matcher: function (item) {
      return ~item.toLowerCase().indexOf(this.query.toLowerCase());
    }

  , sorter: function (items) {
      var beginswith = []
        , caseSensitive = []
        , caseInsensitive = []
        , item;

      while (item = items.shift()) {
        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) {beginswith.push(item);}
        else if (~item.indexOf(this.query)) {caseSensitive.push(item);}
        else {caseInsensitive.push(item);}
      }

      return beginswith.concat(caseSensitive, caseInsensitive);
    }

  , highlighter: function (item) {
      var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&');
      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
        return '<strong>' + match + '</strong>';
      })
    }

  , render: function (items) {
      var that = this;

      items = $(items).map(function (i, item) {
        i = $(that.options.item).attr('data-value', item);
        i.find('a').html(that.highlighter(item));
        return i[0];
      })

      items.first().addClass('active');
      this.$menu.html(items);
      return this;
    }

  , next: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , next = active.next();

      if (!next.length) {
        next = $(this.$menu.find('li')[0]);
      }

      next.addClass('active');
    }

  , prev: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , prev = active.prev();

      if (!prev.length) {
        prev = this.$menu.find('li').last();
      }

      prev.addClass('active');
    }

  , toggle: function () {
    if (!this.disabled) {
      if (this.$container.hasClass('combobox-selected')) {
        this.clearTarget();
        this.triggerChange();
        this.clearElement();
      } else {
        if (this.shown) {
          this.hide();
        } else {
          this.clearElement();
          this.lookup();
        }
      }
    }
  }

  , scrollSafety: function(e) {
      if (e.target.tagName == 'UL') {
          this.$element.off('blur');
      }
  }
  , clearElement: function () {
    this.$element.val('').focus();
  }

  , clearTarget: function () {
    this.$source.val('');
    this.$target.val('');
    this.$container.removeClass('combobox-selected');
    this.selected = false;
  }

  , triggerChange: function () {
    this.$source.trigger('change');
  }

  , refresh: function () {
    this.source = this.parse();
    this.options.items = this.source.length;
  }

  , listen: function () {
      this.$element
        .on('focus',    $.proxy(this.focus, this))
        .on('blur',     $.proxy(this.blur, this))
        .on('keypress', $.proxy(this.keypress, this))
        .on('keyup',    $.proxy(this.keyup, this));

      if (this.eventSupported('keydown')) {
        this.$element.on('keydown', $.proxy(this.keydown, this));
      }

      this.$menu
        .on('click', $.proxy(this.click, this))
        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))
        .on('mouseleave', 'li', $.proxy(this.mouseleave, this));

      this.$button
        .on('click', $.proxy(this.toggle, this));
    }

  , eventSupported: function(eventName) {
      var isSupported = eventName in this.$element;
      if (!isSupported) {
        this.$element.setAttribute(eventName, 'return;');
        isSupported = typeof this.$element[eventName] === 'function';
      }
      return isSupported;
    }

  , move: function (e) {
      if (!this.shown) {return;}

      switch(e.keyCode) {
        case 9: // tab
        case 13: // enter
        case 27: // escape
          e.preventDefault();
          break;

        case 38: // up arrow
          e.preventDefault();
          this.prev();
          this.fixMenuScroll();
          break;

        case 40: // down arrow
          e.preventDefault();
          this.next();
          this.fixMenuScroll();
          break;
      }

      e.stopPropagation();
    }

  , fixMenuScroll: function(){
      var active = this.$menu.find('.active');
      if(active.length){
          var top = active.position().top;
          var bottom = top + active.height();
          var scrollTop = this.$menu.scrollTop();
          var menuHeight = this.$menu.height();
          if(bottom > menuHeight){
              this.$menu.scrollTop(scrollTop + bottom - menuHeight);
          } else if(top < 0){
              this.$menu.scrollTop(scrollTop + top);
          }
      }
  }

  , keydown: function (e) {
      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27]);
      this.move(e);
    }

  , keypress: function (e) {
      if (this.suppressKeyPressRepeat) {return;}
      this.move(e);
    }

  , keyup: function (e) {
      switch(e.keyCode) {
        case 40: // down arrow
         if (!this.shown){
           this.toggle();
         }
         break;
        case 39: // right arrow
        case 38: // up arrow
        case 37: // left arrow
        case 36: // home
        case 35: // end
        case 16: // shift
        case 17: // ctrl
        case 18: // alt
          break;

        case 9: // tab
        case 13: // enter
          if (!this.shown) {return;}
          this.select();
          break;

        case 27: // escape
          if (!this.shown) {return;}
          this.hide();
          break;

        default:
          this.clearTarget();
          this.lookup();
      }

      e.stopPropagation();
      e.preventDefault();
  }

  , focus: function (e) {
      this.focused = true;
    }

  , blur: function (e) {
      var that = this;
      this.focused = false;
      var val = this.$element.val();
      if (!this.selected && val !== '' ) {
        this.$element.val('');
        this.$source.val('').trigger('change');
        this.$target.val('').trigger('change');
      }
      if (!this.mousedover && this.shown) {setTimeout(function () { that.hide(); }, 200);}
    }

  , click: function (e) {
      e.stopPropagation();
      e.preventDefault();
      this.select();
      this.$element.focus();
    }

  , mouseenter: function (e) {
      this.mousedover = true;
      this.$menu.find('.active').removeClass('active');
      $(e.currentTarget).addClass('active');
    }

  , mouseleave: function (e) {
      this.mousedover = false;
    }
  };

  /* COMBOBOX PLUGIN DEFINITION
   * =========================== */
  $.fn.combobox = function ( option ) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('combobox')
        , options = typeof option == 'object' && option;
      if(!data) {$this.data('combobox', (data = new Combobox(this, options)));}
      if (typeof option == 'string') {data[option]();}
    });
  };

  $.fn.combobox.defaults = {
    bsVersion: '3'
  , menu: '<ul class="typeahead typeahead-long dropdown-menu"></ul>'
  , item: '<li><a href="#"></a></li>'
  };

  $.fn.combobox.Constructor = Combobox;

}( window.jQuery );

/*! =======================================================
                      VERSION  7.1.1              
========================================================= */
"use strict";function _typeof(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}/*! =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(a){if("function"==typeof define&&define.amd)try{define(["jquery"],a)}catch(b){define([],a)}else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var c;try{c=require("jquery")}catch(b){c=null}module.exports=a(c)}else window&&(window.Slider=a(window.jQuery))}(function(a){var b;return function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l&&l!==k)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}var m=this.map(function(){var d=a.data(this,b);return d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d)),a(this)});return!m||m.length>1?m:m[0]}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;c(a)}(a),function(a){function c(b,c){function d(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(e){return d}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{};for(var f=Object.keys(this.defaultOptions),g=0;g<f.length;g++){var h=f[g],i=c[h];i="undefined"!=typeof i?i:d(this.element,h),i=null!==i?i:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=i}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var j,k,l,m,n,o=this.element.style.width,p=!1,q=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var r=document.createElement("div");r.className="slider-track",k=document.createElement("div"),k.className="slider-track-low",j=document.createElement("div"),j.className="slider-selection",l=document.createElement("div"),l.className="slider-track-high",m=document.createElement("div"),m.className="slider-handle min-slider-handle",m.setAttribute("role","slider"),m.setAttribute("aria-valuemin",this.options.min),m.setAttribute("aria-valuemax",this.options.max),n=document.createElement("div"),n.className="slider-handle max-slider-handle",n.setAttribute("role","slider"),n.setAttribute("aria-valuemin",this.options.min),n.setAttribute("aria-valuemax",this.options.max),r.appendChild(k),r.appendChild(j),r.appendChild(l);var s=Array.isArray(this.options.labelledby);if(s&&this.options.labelledby[0]&&m.setAttribute("aria-labelledby",this.options.labelledby[0]),s&&this.options.labelledby[1]&&n.setAttribute("aria-labelledby",this.options.labelledby[1]),!s&&this.options.labelledby&&(m.setAttribute("aria-labelledby",this.options.labelledby),n.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(g=0;g<this.options.ticks.length;g++){var t=document.createElement("div");t.className="slider-tick",this.ticks.push(t),r.appendChild(t)}j.className+=" tick-slider-selection"}if(r.appendChild(m),r.appendChild(n),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",g=0;g<this.options.ticks_labels.length;g++){var u=document.createElement("div"),v=0===this.options.ticks_positions.length,w=this.options.reversed&&v?this.options.ticks_labels.length-(g+1):g;u.className="slider-tick-label",u.innerHTML=this.options.ticks_labels[w],this.tickLabels.push(u),this.tickLabelContainer.appendChild(u)}var x=function(a){var b=document.createElement("div");b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},y=document.createElement("div");y.className="tooltip tooltip-main",y.setAttribute("role","presentation"),x(y);var z=document.createElement("div");z.className="tooltip tooltip-min",z.setAttribute("role","presentation"),x(z);var A=document.createElement("div");A.className="tooltip tooltip-max",A.setAttribute("role","presentation"),x(A),this.sliderElem.appendChild(r),this.sliderElem.appendChild(y),this.sliderElem.appendChild(z),this.sliderElem.appendChild(A),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),q.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),e[this.options.scale]&&(this.options.scale=e[this.options.scale]),p===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=o,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=k||this.trackLow,this.trackSelection=j||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=m||this.handle1,this.handle2=n||this.handle2,p===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),g=0;g<this.ticks.length;g++)this._removeClass(this.ticks[g],"round triangle hide");var B=["round","triangle","custom"],C=-1!==B.indexOf(this.options.handle);if(C)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),g=0;g<this.ticks.length;g++)this._addClass(this.ticks[g],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var d={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},e={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min),c=!0;if(this.options.ticks_positions.length>0){for(var d,e,f,g=0,h=1;h<this.options.ticks_positions.length;h++)if(a<=this.options.ticks_positions[h]){d=this.options.ticks[h-1],f=this.options.ticks_positions[h-1],e=this.options.ticks[h],g=this.options.ticks_positions[h];break}var i=(a-f)/(g-f);b=d+i*(e-d),c=!1}var j=c?this.options.min:0,k=j+Math.round(b/this.options.step)*this.options.step;return k<this.options.min?this.options.min:k>this.options.max?this.options.max:k},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0){var g=(a-b)/(c-b);return d+g*(e-d)}}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a);return 100*(d-c)/(b-c)}}};if(b=function(a,b){return c.call(this,a,b),this},b.prototype={_init:function(){},constructor:b,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this._state.value=this._validateInputValue(a);var e=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var f=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(f),b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),c.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){var c=this.eventToCallbackMap[a];if(void 0!==c)for(var d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++){var c=a[b];this.eventToCallbackMap[c]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var a;if(a=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=a[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var b="vertical"===this.options.orientation?"height":"width",c="vertical"===this.options.orientation?"marginTop":"marginLeft",d=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var e=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[c]=-d/2+"px"),e=this.tickLabelContainer.offsetHeight;else for(f=0;f<this.tickLabelContainer.childNodes.length;f++)this.tickLabelContainer.childNodes[f].offsetHeight>e&&(e=this.tickLabelContainer.childNodes[f].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=e+"px")}for(var f=0;f<this.options.ticks.length;f++){var g=this.options.ticks_positions[f]||this._toPercentage(this.options.ticks[f]);this.options.reversed&&(g=100-g),this.ticks[f].style[this.stylePos]=g+"%",this._removeClass(this.ticks[f],"in-selection"),this.options.range?g>=a[0]&&g<=a[1]&&this._addClass(this.ticks[f],"in-selection"):"after"===this.options.selection&&g>=a[0]?this._addClass(this.ticks[f],"in-selection"):"before"===this.options.selection&&g<=a[0]&&this._addClass(this.ticks[f],"in-selection"),this.tickLabels[f]&&(this.tickLabels[f].style[b]=d+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[f]?(this.tickLabels[f].style.position="absolute",this.tickLabels[f].style[this.stylePos]=g+"%",this.tickLabels[f].style[c]=-d/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[f].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var h;if(this.options.range){h=this.options.formatter(this._state.value),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var i=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,i);var j=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,j),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else h=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";var k=this.tooltip_min.getBoundingClientRect(),l=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?k.right>l.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):k.right>l.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_resize:function(a){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);if(this.options.range){var c=Math.abs(this._state.percentage[0]-b),d=Math.abs(this._state.percentage[1]-b);this._state.dragged=d>c?0:1,this._adjustPercentageForRangeSliders(b)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var e=this._calculateValue();return this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(a){if(void 0===a.changedTouches)return void this._mousedown(a);var b=a.changedTouches[0];this.touchX=b.pageX,this.touchY=b.pageY},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed;(d||e)&&(c=-c)}var f=this._state.value[a]+c*this.options.step;return this.options.range&&(f=[a?this._state.value[0]:f,a?f:this._state.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._setDataVal(f),this._trigger("slideStop",f),this._layout(),this._pauseEvent(b),!1}},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;var b=this._getPercentage(a);this._adjustPercentageForRangeSliders(b),this._state.percentage[this._state.dragged]=b,this._layout();var c=this._calculateValue(!0);return this.setValue(c,!0,!0),!1},_touchmove:function(a){if(void 0!==a.changedTouches){var b=a.changedTouches[0],c=b.pageX-this.touchX,d=b.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&5>=c&&c>=-5&&(d>=15||-15>=d)?this._mousedown(a):5>=d&&d>=-5&&(c>=15||-15>=c)&&this._mousedown(a))}},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a);b=b?b-1:0;var c=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],b)>c&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._setDataVal(a),this._trigger("slideStop",a),!1},_calculateValue:function(a){var b;if(this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(var c=[b,1/0],d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=c[1]&&(c=[this.options.ticks[d],e])}if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=a[this.mousePos],c=this._state.offset[this.stylePos],d=b-c,e=d/this._state.size*100;return e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(d.formatInvalidInputErrorMsg(a))},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!=typeof c)throw new Error(d.formatInvalidInputErrorMsg(c))}},_setDataVal:function(a){this.element.setAttribute("data-value",a),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];f(c)}a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.textContent?a.textContent=b:"undefined"!=typeof a.innerText&&(a.innerText=b)},_removeClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)");d=d.replace(g," ")}a.className=d.trim()},_addClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d);h||(d+=" "+f)}a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop,"BODY"!==a.tagName&&(b-=a.scrollTop);return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b=this.options.tooltip_position||"right",c="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b),a.style[c]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?a.forEach(function(a){this._addClass(a,"bottom"),a.style.top="22px"}.bind(this)):a.forEach(function(a){this._addClass(a,"top"),a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},a){var f=a.fn.slider?"bootstrapSlider":"slider";a.bridget(f,b),a(function(){a("input[data-provide=slider]")[f]()})}}(a),b});
/*
Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,d={timestamp:"G14E",version:"4.5.7",revision:"e98277f",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var k=c[d].src.match(a);if(k){b=k[1];break}}-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+
b:location.href.match(/^[^\?]*\/(?:)/)[0]+b);if(!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a);this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",
a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(c){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(b){function d(){try{document.documentElement.doScroll("left")}catch(f){setTimeout(d,1);return}a()}c.push(b);"complete"===document.readyState&&setTimeout(a,1);if(1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",
a);window.attachEvent("onload",a);b=!1;try{b=!window.frameElement}catch(w){}document.documentElement.doScroll&&b&&d()}}}()},b=window.CKEDITOR_GETURL;if(b){var c=d.getUrl;d.getUrl=function(a){return b.call(d,a)||c.call(d,a)}}return d}());
CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var d=CKEDITOR.event.prototype,b;for(b in d)null==a[b]&&(a[b]=d[b])},CKEDITOR.event.prototype=function(){function a(a){var e=d(this);return e[a]||(e[a]=new b(a))}var d=function(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={})},b=function(a){this.name=a;this.listeners=[]};b.prototype={getListenerIndex:function(a){for(var b=0,d=this.listeners;b<d.length;b++)if(d[b].fn==a)return b;return-1}};
return{define:function(b,d){var g=a.call(this,b);CKEDITOR.tools.extend(g,d,!0)},on:function(b,d,g,l,k){function n(a,f,x,k){a={name:b,sender:this,editor:a,data:f,listenerData:l,stop:x,cancel:k,removeListener:w};return!1===d.call(g,a)?!1:a.data}function w(){x.removeListener(b,d)}var f=a.call(this,b);if(0>f.getListenerIndex(d)){f=f.listeners;g||(g=this);isNaN(k)&&(k=10);var x=this;n.fn=d;n.priority=k;for(var A=f.length-1;0<=A;A--)if(f[A].priority<=k)return f.splice(A+1,0,n),{removeListener:w};f.unshift(n)}return{removeListener:w}},
once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[1]=function(a){a.removeListener();return b.apply(this,arguments)};return this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a},fire:function(){var a=0,b=function(){a=1},g=0,l=function(){g=1};return function(k,n,w){var f=d(this)[k];k=a;var x=g;a=g=0;if(f){var A=f.listeners;if(A.length)for(var A=A.slice(0),u,B=0;B<A.length;B++){if(f.errorProof)try{u=
A[B].call(this,w,n,b,l)}catch(q){}else u=A[B].call(this,w,n,b,l);!1===u?g=1:"undefined"!=typeof u&&(n=u);if(a||g)break}}n=g?!1:"undefined"==typeof n?!0:n;a=k;g=x;return n}}(),fireOnce:function(a,b,g){b=this.fire(a,b,g);delete d(this)[a];return b},removeListener:function(a,b){var g=d(this)[a];if(g){var l=g.getListenerIndex(b);0<=l&&g.listeners.splice(l,1)}},removeAllListeners:function(){var a=d(this),b;for(b in a)delete a[b]},hasListeners:function(a){return(a=d(this)[a])&&0<a.listeners.length}}}());
CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fire.call(this,a,d,this)},CKEDITOR.editor.prototype.fireOnce=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,a,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));
CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),d=a.match(/edge[ \/](\d+.?\d*)/),b=-1<a.indexOf("trident/"),b=!(!d&&!b),b={ie:b,edge:!!d,webkit:!b&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;
return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie;b.webkit&&(-1<a.indexOf("chrome")?b.chrome=!0:b.safari=!0);var c=0;b.ie&&(c=d?parseFloat(d[1]):b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==c,b.ie8Compat=8==c,b.ie7Compat=7==c,b.ie6Compat=7>c||b.quirks);b.gecko&&(d=a.match(/rv:([\d\.]+)/))&&(d=d[1].split("."),c=1E4*d[0]+100*(d[1]||0)+1*(d[2]||0));b.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));
b.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));b.version=c;b.isCompatible=!(b.ie&&7>c)&&!(b.gecko&&4E4>c)&&!(b.webkit&&534>c);b.hidpi=2<=window.devicePixelRatio;b.needsBrFiller=b.gecko||b.webkit||b.ie&&10<c;b.needsNbspFiller=b.ie&&11>c;b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown");b.quirks&&(b.cssClass+=" cke_browser_quirks");b.ie&&(b.cssClass+=" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version));b.air&&(b.cssClass+=" cke_browser_air");
b.iOS&&(b.cssClass+=" cke_browser_ios");b.hidpi&&(b.cssClass+=" cke_hidpi");return b}());
"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)};(function(){CKEDITOR.domReady(function(){var a=
CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*d))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:d})};
CKEDITOR.error=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:d})};
CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var d=console[a.data.type]?a.data.type:"log",b=a.data.errorCode;if(a=a.data.additionalData)console[d]("[CKEDITOR] Error code: "+b+".",a);else console[d]("[CKEDITOR] Error code: "+b+".");console[d]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+b)}},null,null,999);CKEDITOR.dom={};
(function(){var a=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,e=/</g,g=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,k={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:"",shy:""},n=function(a,f){return"#"==f[0]?String.fromCharCode(parseInt(f.slice(1),10)):k[f]};CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(a,f){if(!a&&!f)return!0;if(!a||!f||a.length!=f.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=f[b])return!1;
return!0},getIndex:function(a,f){for(var b=0;b<a.length;++b)if(f(a[b]))return b;return-1},clone:function(a){var f;if(a&&a instanceof Array){f=[];for(var b=0;b<a.length;b++)f[b]=CKEDITOR.tools.clone(a[b]);return f}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;f=new a.constructor;for(b in a)f[b]=CKEDITOR.tools.clone(a[b]);return f},capitalize:function(a,f){return a.charAt(0).toUpperCase()+
(f?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var f=arguments.length,b,c;"boolean"==typeof(b=arguments[f-1])?f--:"boolean"==typeof(b=arguments[f-2])&&(c=arguments[f-1],f-=2);for(var k=1;k<f;k++){var d=arguments[k],q;for(q in d)if(!0===b||null==a[q])if(!c||q in c)a[q]=d[q]}return a},prototypedCopy:function(a){var f=function(){};f.prototype=a;return new f},copy:function(a){var f={},b;for(b in a)f[b]=a[b];return f},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},
isEmpty:function(a){for(var f in a)if(a.hasOwnProperty(f))return!1;return!0},cssVendorPrefix:function(a,f,b){if(b)return d+a+":"+f+";"+a+":"+f;b={};b[a]=f;b[d+a]=f;return b},cssStyleToDomStyle:function(){var a=document.createElement("div").style,f="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?f:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var f,
b=[],c=0;c<a.length;c++)if(f=a[c])/@import|[{}]/.test(f)?b.push("\x3cstyle\x3e"+f+"\x3c/style\x3e"):b.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+f+'"\x3e');return b.join("")},htmlEncode:function(a){return void 0===a||null===a?"":String(a).replace(b,"\x26amp;").replace(c,"\x26gt;").replace(e,"\x26lt;")},htmlDecode:function(a){return a.replace(l,n)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(g,"\x26quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},
transformPlainTextToHtml:function(a,f){var b=f==CKEDITOR.ENTER_BR,c=this.htmlEncode(a.replace(/\r\n/g,"\n")),c=c.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),k=f==CKEDITOR.ENTER_P?"p":"div";if(!b){var d=/\n{2}/g;if(d.test(c))var q="\x3c"+k+"\x3e",n="\x3c/"+k+"\x3e",c=q+c.replace(d,function(){return n+q})+n}c=c.replace(/\n/g,"\x3cbr\x3e");b||(c=c.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+k+"\x3e)"),function(a){return CKEDITOR.tools.repeat(a,2)}));c=c.replace(/^ | $/g,"\x26nbsp;");return c=c.replace(/(>|\s) /g,
function(a,f){return f+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",f=0;8>f;f++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,f){var b=f(a);b.prototype=a.prototype;return b},setTimeout:function(a,f,b,c,k){k||(k=window);b||(b=k);return k.setTimeout(function(){c?a.apply(b,[].concat(c)):a.apply(b)},
f||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(f){return f.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(f){return f.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(f){return f.replace(a,"")}}(),indexOf:function(a,f){if("function"==typeof f)for(var b=0,c=a.length;b<c;b++){if(f(a[b]))return b}else{if(a.indexOf)return a.indexOf(f);b=0;for(c=a.length;b<c;b++)if(a[b]===f)return b}return-1},search:function(a,b){var c=CKEDITOR.tools.indexOf(a,
b);return 0<=c?a[c]:null},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(a){var b=a.$,c=a.base,k=a.privates||a._,d=a.proto;a=a.statics;!b&&(b=function(){c&&this.base.apply(this,arguments)});if(k)var n=b,b=function(){var a=this._||(this._={}),b;for(b in k){var f=k[b];a[b]="function"==typeof f?CKEDITOR.tools.bind(f,this):f}n.apply(this,arguments)};c&&(b.prototype=this.prototypedCopy(c.prototype),b.prototype.constructor=b,b.base=c,b.baseProto=c.prototype,b.prototype.base=
function(){this.base=c.prototype.base;c.apply(this,arguments);this.base=arguments.callee});d&&this.extend(b.prototype,d,!0);a&&this.extend(b,a,!0);return b},addFunction:function(b,f){return a.push(function(){return b.apply(f||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var f=a[b];return f&&f.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^-?\d+\.?\d*px$/,b;return function(c){b=CKEDITOR.tools.trim(c+"")+"px";return a.test(b)?
b:c||""}}(),convertToPx:function(){var a;return function(b){a||(a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(a));return/%$/.test(b)?b:(a.setStyle("width",b),a.$.clientWidth)}}(),repeat:function(a,b){return Array(b+1).join(a)},tryThese:function(){for(var a,b=0,c=arguments.length;b<c;b++){var k=arguments[b];try{a=k();break}catch(d){}}return a},
genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var b=arguments,c=this;window.setTimeout(function(){a.apply(c,b)},0)}},normalizeCssText:function(a,b){var c=[],k,d=CKEDITOR.tools.parseCssText(a,!0,b);for(k in d)c.push(k+":"+d[k]);c.sort();return c.length?c.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,k){a=[b,c,k];for(b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);
return"#"+a.join("")})},parseCssText:function(a,b,c){var k={};c&&(c=new CKEDITOR.dom.element("span"),c.setAttribute("style",a),a=CKEDITOR.tools.convertRgbToHex(c.getAttribute("style")||""));if(!a||";"==a)return k;a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){b&&(c=c.toLowerCase(),"font-family"==c&&(d=d.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),d=CKEDITOR.tools.trim(d));k[c]=d});return k},writeCssText:function(a,b){var c,k=[];for(c in a)k.push(c+
":"+a[c]);b&&k.sort();return k.join("; ")},objectCompare:function(a,b,c){var k;if(!a&&!b)return!0;if(!a||!b)return!1;for(k in a)if(a[k]!=b[k])return!1;if(!c)for(k in b)if(a[k]!=b[k])return!1;return!0},objectKeys:function(a){var b=[],c;for(c in a)b.push(c);return b},convertArrayToObject:function(a,b){var c={};1==arguments.length&&(b=!0);for(var k=0,d=a.length;k<d;++k)c[a[k]]=b;return c},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){a=a?a.replace(/.+?(?:\.|$)/,
""):document.domain;if(!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b,c){function k(){n=(new Date).getTime();d=!1;c?b.call(c):b()}var d,n=0;return{input:function(){if(!d){var b=(new Date).getTime()-n;b<a?d=setTimeout(k,a-b):k()}},reset:function(){d&&clearTimeout(d);d=n=0}}},enableHtml5Elements:function(a,b){for(var c="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),
k=c.length,d;k--;)d=a.createElement(c[k]),b&&a.appendChild(d)},checkIfAnyArrayItemMatches:function(a,b){for(var c=0,k=a.length;c<k;++c)if(a[c].match(b))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,b){for(var c in a)if(c.match(b))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",getCookie:function(a){a=a.toLowerCase();for(var b=document.cookie.split(";"),c,k,d=0;d<b.length;d++)if(c=b[d].split("\x3d"),
k=decodeURIComponent(CKEDITOR.tools.trim(c[0]).toLowerCase()),k===a)return decodeURIComponent(1<c.length?c[1]:"");return null},setCookie:function(a,b){document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+";path\x3d/"},getCsrfToken:function(){var a=CKEDITOR.tools.getCookie("ckCsrfToken");if(!a||40!=a.length){var a=[],b="";if(window.crypto&&window.crypto.getRandomValues)a=new Uint8Array(40),window.crypto.getRandomValues(a);else for(var c=0;40>c;c++)a.push(Math.floor(256*Math.random()));
for(c=0;c<a.length;c++)var k="abcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%36),b=b+(.5<Math.random()?k.toUpperCase():k);a=b;CKEDITOR.tools.setCookie("ckCsrfToken",a)}return a}}})();
CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,d=function(a,b){for(var c=CKEDITOR.tools.clone(a),k=1;k<arguments.length;k++){b=arguments[k];for(var d in b)delete c[d]}return c},b={},c={},e={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},k={"#":1},n={center:1,dir:1,noframes:1};
a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},k,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(c,e,b,n);d={a:d(b,{a:1,button:1}),abbr:b,address:c,
area:l,article:c,aside:c,audio:a({source:1,track:1},c),b:b,base:l,bdi:b,bdo:b,blockquote:c,body:c,br:l,button:d(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:l,colgroup:{col:1},command:l,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:c,dl:{dt:1,dd:1},dt:c,em:b,embed:l,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},g),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:a({head:1,
body:1},c,g),i:b,iframe:k,img:l,input:l,ins:b,kbd:b,keygen:l,label:b,legend:b,li:c,link:l,main:c,map:c,mark:b,menu:a({li:1},c),meta:l,meter:d(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:k,output:b,p:b,param:l,pre:b,progress:d(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:k,section:c,select:{optgroup:1,option:1},small:b,source:l,span:b,strong:b,style:k,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),
sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:k,tfoot:{tr:1},th:c,thead:{tr:1},time:d(b,{time:1}),title:k,tr:{th:1,td:1},track:l,u:b,ul:{li:1},"var":b,video:a({source:1,track:1},c),wbr:l,acronym:b,applet:a({param:1},c),basefont:l,big:b,center:c,dialog:l,dir:{li:1},font:b,isindex:l,noframes:c,strike:b,tt:b};a(d,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},e,n),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,
fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,
track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},d.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,
s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return d}();
CKEDITOR.dom.event=function(a){this.$=a};
CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;this.$.shiftKey&&(a+=CKEDITOR.SHIFT);this.$.altKey&&(a+=CKEDITOR.ALT);return a},preventDefault:function(a){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=
this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;
CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(a){a&&(this.$=a)};
CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;(a=this.getCustomData("_"))||this.setCustomData("_",a={});return a},on:function(d){var b=this.getCustomData("_cke_nativeListeners");b||(b={},this.setCustomData("_cke_nativeListeners",b));b[d]||(b=b[d]=a(this,d),this.$.addEventListener?this.$.addEventListener(d,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+
d,b));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){var a=this.getCustomData("_cke_nativeListeners"),b;for(b in a){var c=a[b];this.$.detachEvent?this.$.detachEvent("on"+
b,c):this.$.removeEventListener&&this.$.removeEventListener(b,c,!1);delete a[b]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();
(function(a){var d={};CKEDITOR.on("reset",function(){d={}});a.equals=function(a){try{return a&&a.$===this.$}catch(c){return!1}};a.setCustomData=function(a,c){var e=this.getUniqueId();(d[e]||(d[e]={}))[a]=c;return this};a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&d[c])&&a in c?c[a]:null};a.removeCustomData=function(a){var c=this.$["data-cke-expando"],c=c&&d[c],e,g;c&&(e=c[a],g=a in c,delete c[a]);return g?e:null};a.clearCustomData=function(){this.removeAllListeners();var a=
this.$["data-cke-expando"];a&&delete d[a]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);
CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;
CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,d){a.append(this,d);return a},clone:function(a,d){function b(c){c["data-cke-expando"]&&(c["data-cke-expando"]=!1);if(c.nodeType==CKEDITOR.NODE_ELEMENT||c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(d||c.nodeType!=CKEDITOR.NODE_ELEMENT||c.removeAttribute("id",!1),a){c=c.childNodes;for(var e=0;e<c.length;e++)b(c[e])}}function c(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=
b.getName();":"==d[0]&&b.renameNode(d.substring(1))}if(a)for(d=0;d<b.getChildCount();d++)c(b.getChild(d))}}var e=this.$.cloneNode(a);b(e);e=new CKEDITOR.dom.node(e);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&c(e);return e},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,
a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var d=[],b=this.getDocument().$.documentElement,c=this.$;c&&c!=b;){var e=c.parentNode;e&&d.unshift(this.getIndex.call({$:c},a));c=e}return d},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function d(a,c){var n=c?a.nextSibling:a.previousSibling;return n&&n.nodeType==CKEDITOR.NODE_TEXT?b(n)?d(n,
c):n:null}function b(a){return!a.nodeValue||a.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var c=this.$,e=-1,g;if(!this.$.parentNode||a&&c.nodeType==CKEDITOR.NODE_TEXT&&b(c)&&!d(c)&&!d(c,!0))return-1;do a&&c!=this.$&&c.nodeType==CKEDITOR.NODE_TEXT&&(g||b(c))||(e++,g=c.nodeType==CKEDITOR.NODE_TEXT);while(c=c.previousSibling);return e},getNextSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getFirst&&this.getFirst();var e;if(!a){if(this.type==
CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getNext()}for(;!a&&(e=(e||this).getParent());){if(b&&!1===b(e,!0))return null;a=e.getNext()}return!a||b&&!1===b(a)?null:d&&d!=a.type?a.getNextSourceNode(!1,d,b):a},getPreviousSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getLast&&this.getLast();var e;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getPrevious()}for(;!a&&(e=(e||this).getParent());){if(b&&!1===
b(e,!0))return null;a=e.getPrevious()}return!a||b&&!1===b(a)?null:d&&a.type!=d?a.getPreviousSourceNode(!1,d,b):a},getPrevious:function(a){var d=this.$,b;do b=(d=d.previousSibling)&&10!=d.nodeType&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getNext:function(a){var d=this.$,b;do b=(d=d.nextSibling)&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getParent:function(a){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||a&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?
new CKEDITOR.dom.node(d):null},getParents:function(a){var d=this,b=[];do b[a?"push":"unshift"](d);while(d=d.getParent());return b},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var d=this.contains?this:this.getParent();do if(d.contains(a))return d;while(d=d.getParent());return null},getPosition:function(a){var d=this.$,b=a.$;if(d.compareDocumentPosition)return d.compareDocumentPosition(b);if(d==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==
CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(d.contains){if(d.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(d))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in d)return 0>d.sourceIndex||0>b.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:d.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}d=this.getAddress();a=a.getAddress();for(var b=Math.min(d.length,a.length),c=0;c<b;c++)if(d[c]!=
a[c])return d[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return d.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,d){var b=this.$,c,e;d||(b=b.parentNode);"function"==typeof a?(e=!0,c=a):(e=!1,c=function(b){b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"";return"string"==typeof a?b==a:b in a});for(;b;){if(c(e?new CKEDITOR.dom.node(b):b))return new CKEDITOR.dom.node(b);
try{b=b.parentNode}catch(g){b=null}}return null},hasAscendant:function(a,d){var b=this.$;d||(b=b.parentNode);for(;b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return!0;b=b.parentNode}return!1},move:function(a,d){a.append(this.remove(),d)},remove:function(a){var d=this.$,b=d.parentNode;if(b){if(a)for(;a=d.firstChild;)b.insertBefore(d.removeChild(a),d);b.removeChild(d)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&
(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(b-d.length),this.$.removeChild(this.$.firstChild));else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(d.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{a.remove();continue}}break}CKEDITOR.env.needsBrFiller&&
(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var d=this;this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent());CKEDITOR.env.edge&&d&&d.is("textarea","input")&&(a=!0);if(!a&&d&&"undefined"!=typeof d.$.isContentEditable)return!(d.$.isContentEditable||d.data("cke-editable"));for(;d;){if(d.data("cke-editable"))return!1;if(d.hasAttribute("contenteditable"))return"false"==d.getAttribute("contenteditable");d=d.getParent()}return!0}});
CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,d="CSS1Compat"==a.compatMode;return{width:(d?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(d?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||
a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(d)}},appendStyleText:function(a){if(this.$.createStyleSheet){var d=this.$.createStyleSheet("");d.cssText=a}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b)}return d||
b.$.sheet},createElement:function(a,d){var b=new CKEDITOR.dom.element(a,this);d&&(d.attributes&&b.setAttributes(d.attributes),d.styles&&b.setStyles(d.styles));return b},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(d){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,d){for(var b=
this.$.documentElement,c=0;b&&c<a.length;c++){var e=a[c];if(d)for(var g=-1,l=0;l<b.childNodes.length;l++){var k=b.childNodes[l];if(!0!==d||3!=k.nodeType||!k.previousSibling||3!=k.previousSibling.nodeType)if(g++,g==e){b=k;break}}else b=b.childNodes[e]}return b?new CKEDITOR.dom.node(b):null},getElementsByTag:function(a,d){CKEDITOR.env.ie&&8>=document.documentMode||!d||(a=d+":"+a);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];
return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+
CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(a);this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a));return a}});CKEDITOR.dom.nodeList=function(a){this.$=a};
CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;
CKEDITOR.dom.element.createFromHtml=function(a,d){var b=new CKEDITOR.dom.element("div",d);b.setHtml(a);return b.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(a,d,b,c){var e=d.getCustomData("list_marker_id")||d.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),g=d.getCustomData("list_marker_names")||d.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[e]=d;g[b]=1;return d.setCustomData(b,c)};
CKEDITOR.dom.element.clearAllMarkers=function(a){for(var d in a)CKEDITOR.dom.element.clearMarkers(a,a[d],1)};CKEDITOR.dom.element.clearMarkers=function(a,d,b){var c=d.getCustomData("list_marker_names"),e=d.getCustomData("list_marker_id"),g;for(g in c)d.removeCustomData(g);d.removeCustomData("list_marker_names");b&&(d.removeCustomData("list_marker_id"),delete a[e])};
(function(){function a(a,b){return-1<(" "+a+" ").replace(g," ").indexOf(" "+b+" ")}function d(a){var b=!0;a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1);return function(){b||a.removeAttribute("id")}}function b(a,b){return"#"+a.$.id+" "+b.split(/,\s*/).join(", #"+a.$.id+" ")}function c(a){for(var b=0,c=0,f=l[a].length;c<f;c++)b+=parseInt(this.getComputedStyle(l[a][c])||0,10)||0;return b}var e=document.createElement("_").classList,e="undefined"!==typeof e&&null!==String(e.add).match(/\[Native code\]/gi),
g=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:e?function(a){this.$.classList.add(a);return this}:function(b){var c=this.$.className;c&&(a(c,b)||(c+=" "+b));this.$.className=c||b;return this},removeClass:e?function(a){var b=this.$;b.classList.remove(a);b.className||b.removeAttribute("class");return this}:function(b){var c=this.getAttribute("class");c&&a(c,b)&&((c=c.replace(new RegExp("(?:^|\\s+)"+b+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",
c):this.removeAttribute("class"));return this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){"string"==typeof a&&(a=this.getDocument().createElement(a));b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?
this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this);c.setEndAfter(a);var f=c.extractContents(!1,b||!1);c.insertNode(this.remove());
f.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(this.$.compareDocumentPosition(a.$)&16)}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,
"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!a.width&&(a.width=a.right-a.left);!a.height&&(a.height=a.bottom-a.top);return a},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();c.appendChild(b);b.innerHTML=a;c.removeChild(b);return a}catch(f){this.$.innerHTML=
"";b=new CKEDITOR.dom.element("body",this.getDocument());b.$.innerHTML=a;for(b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");a.innerHTML="x";a=a.textContent;return function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case "class":a=
"className";break;case "http-equiv":a="httpEquiv";break;case "name":return this.$.name;case "tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case "checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[a];case "style":return this.$.style.cssText;case "contenteditable":case "contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):
null}return this.$.getAttribute(a,2)}:a}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,
getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=
b&&(a=b.toLowerCase()+":"+a)}this.getName=function(){return a};return this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a));return b},getLast:function(a){var b=this.$.lastChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a));return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];
for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==a?(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1);a=a.clone(0,
1);b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);b=b.getOuterHtml();a=a.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var c=this.getParent();
c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),b,c;a&&CKEDITOR.env.webkit&&(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement)&&(a=(new CKEDITOR.dom.element(c)).isVisible()));return!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),
b=0,c=a.count();b<c;b++){var f=a.getItem(b);if(f.type!=CKEDITOR.NODE_ELEMENT||!f.data("cke-bookmark"))if(f.type==CKEDITOR.NODE_ELEMENT&&!f.isEmptyInlineRemoveable()||f.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(f.getText()))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return!0;case "data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:
function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(b){var c=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case "class":return 0<this.$.className.length;case "checked":return!!this.$.checked;case "value":return b=this.getAttribute("type"),"checkbox"==b||"radio"==b?"on"!=this.$.value:!!this.$.value}return c?c.specified:!1}return CKEDITOR.env.ie?
8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c!=a){var f;if(b)for(;f=c.lastChild;)a.insertBefore(c.removeChild(f),a.firstChild);else for(;f=c.firstChild;)a.appendChild(c.removeChild(f))}},mergeSiblings:function(){function a(b,c,f){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var d=[];c.data("cke-bookmark")||c.isEmptyInlineRemoveable();)if(d.push(c),
c=f?c.getNext():c.getPrevious(),!c||c.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(c)){for(var k=f?b.getLast():b.getFirst();d.length;)d.shift().move(b,!f);c.moveChildren(b,!f);c.remove();k&&k.type==CKEDITOR.NODE_ELEMENT&&k.mergeSiblings()}}}return function(b){if(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))a(this,this.getNext(),!0),a(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){this.$.setAttribute(a,
b);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(f){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,
a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable");this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},
removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var c=["top","left","right","bottom"],f;"border"==a&&(f=["color","style","width"]);for(var b=[],d=0;d<c.length;d++)if(f)for(var e=0;e<f.length;e++)b.push([a,c[d],f[e]].join("-"));else b.push([a,c[d]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},
setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+a+")")):this.setStyle("opacity",a)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable",
"on");for(var a,b=this.getElementsByTag("*"),c=0,f=b.count();c<f;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,f=this.getDocument(),d=f.getBody(),e="BackCompat"==f.$.compatMode;if(document.documentElement.getBoundingClientRect){var u=this.$.getBoundingClientRect(),g=f.$.documentElement,q=g.clientTop||
d.$.clientTop||0,y=g.clientLeft||d.$.clientLeft||0,l=!0;CKEDITOR.env.ie&&(l=f.getDocumentElement().contains(this),f=f.getBody().contains(this),l=e&&f||!e&&l);l&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=d.$.scrollLeft||g.scrollLeft,c=d.$.scrollTop||g.scrollTop):(c=e?d.$:g,b=c.scrollLeft,c=c.scrollTop),b=u.left+b-y,c=u.top+c-q)}else for(q=this,y=null;q&&"body"!=q.getName()&&"html"!=q.getName();){b+=q.$.offsetLeft-q.$.scrollLeft;c+=q.$.offsetTop-q.$.scrollTop;q.equals(this)||
(b+=q.$.clientLeft||0,c+=q.$.clientTop||0);for(;y&&!y.equals(q);)b-=y.$.scrollLeft,c-=y.$.scrollTop,y=y.getParent();y=q;q=(u=q.$.offsetParent)?new CKEDITOR.dom.element(u):null}a&&(u=this.getWindow(),q=a.getWindow(),!u.equals(q)&&u.$.frameElement&&(a=(new CKEDITOR.dom.element(u.$.frameElement)).getDocumentPosition(a),b+=a.x,c+=a.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||e||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0);return{x:b,y:c}},scrollIntoView:function(a){var b=
this.getParent();if(b){do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var f=c.$.frameElement;f&&(b=new CKEDITOR.dom.element(f))}catch(d){}}while(b=b.getParent())}},scrollIntoParent:function(a,b,c){var f,d,e,u;function g(b,c){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function q(a,b){var c={x:0,y:0};if(!a.is(l?
"body":"html")){var f=a.$.getBoundingClientRect();c.x=f.left;c.y=f.top}f=a.getWindow();f.equals(b)||(f=q(CKEDITOR.dom.element.get(f.$.frameElement),b),c.x+=f.x,c.y+=f.y);return c}function y(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());e=a.getDocument();var l="BackCompat"==e.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=l?e.getBody():e.getDocumentElement());e=a.getWindow();d=q(this,e);var t=q(a,e),z=this.$.offsetHeight;f=this.$.offsetWidth;var h=a.$.clientHeight,
p=a.$.clientWidth;e=d.x-y(this,"left")-t.x||0;u=d.y-y(this,"top")-t.y||0;f=d.x+f+y(this,"right")-(t.x+p)||0;d=d.y+z+y(this,"bottom")-(t.y+h)||0;(0>u||0<d)&&g(0,!0===b?u:!1===b?d:0>u?u:d);c&&(0>e||0<f)&&g(0>e?e:f,0)},setState:function(a,b,c){b=b||"cke";switch(a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on");this.removeClass(b+"_off");this.removeClass(b+"_disabled");c&&this.setAttribute("aria-pressed",!0);c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+
"_disabled");this.removeClass(b+"_off");this.removeClass(b+"_on");c&&this.setAttribute("aria-disabled",!0);c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,
b){var c=this.$.attributes;b=b||{};for(var f=0;f<c.length;f++){var d=c[f],e=d.nodeName.toLowerCase(),u;if(!(e in b))if("checked"==e&&(u=this.getAttribute(e)))a.setAttribute(e,u);else if(!CKEDITOR.env.ie||this.hasAttribute(e))u=this.getAttribute(e),null===u&&(u=d.nodeValue),a.setAttribute(e,u)}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);
this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$;delete this.getName}},getChild:function(){function a(b,c){var f=b.childNodes;if(0<=c&&c<f.length)return f[c]}return function(b){var c=this.$;if(b.slice)for(b=b.slice();0<b.length&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT&&
b.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){a="data-"+a;if(void 0===b)return this.getAttribute(a);!1===b?this.removeAttribute(a):this.setAttribute(a,b);return null},
getEditor:function(){var a=CKEDITOR.instances,b,c;for(b in a)if(c=a[b],c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return c;return null},find:function(a){var c=d(this);a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,a)));c();return a},findOne:function(a){var c=d(this);a=this.$.querySelector(b(this,a));c();return a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var f=a(this);if(!1!==f){c=this.getChildren();for(var d=0;d<c.count();d++)f=
c.getItem(d),f.type==CKEDITOR.NODE_ELEMENT?f.forEach(a,b):b&&f.type!=b||a(f)}}});var l={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,d){"number"==typeof b&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=c.call(this,a)),this.setStyle(a,b+"px"))};CKEDITOR.dom.element.prototype.getSize=function(a,b){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],
this.$["client"+CKEDITOR.tools.capitalize(a)])||0;b&&(d-=c.call(this,a));return d}})();CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a};
CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(a);return a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,
insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});
(function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(c.collapsed)return this.end(),null;c.optimize()}var f,d=c.startContainer;f=c.endContainer;var e=c.startOffset,x=c.endOffset,z,h=this.guard,p=this.type,m=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var C=f.type==CKEDITOR.NODE_ELEMENT?f:f.getParent(),r=f.type==CKEDITOR.NODE_ELEMENT?f.getChild(x):f.getNext();this._.guardLTR=function(a,b){return(!b||!C.equals(a))&&(!r||
!a.equals(r))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}if(a&&!this._.guardRTL){var G=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),g=d.type==CKEDITOR.NODE_ELEMENT?e?d.getChild(e-1):null:d.getPrevious();this._.guardRTL=function(a,b){return(!b||!G.equals(a))&&(!g||!a.equals(g))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}var l=a?this._.guardRTL:this._.guardLTR;z=h?function(a,b){return!1===l(a,b)?!1:h(a,b)}:l;this.current?f=this.current[m](!1,p,z):(a?f.type==CKEDITOR.NODE_ELEMENT&&
(f=0<x?f.getChild(x-1):!1===z(f,!0)?null:f.getPreviousSourceNode(!0,p,z)):(f=d,f.type==CKEDITOR.NODE_ELEMENT&&((f=f.getChild(e))||(f=!1===z(d,!0)?null:d.getNextSourceNode(!0,p,z)))),f&&!1===z(f)&&(f=null));for(;f&&!this._.end;){this.current=f;if(!this.evaluator||!1!==this.evaluator(f)){if(!b)return f}else if(b&&this.evaluator)return!1;f=f[m](!1,p,z)}this.end();return this.current=null}function d(b){for(var c,f=null;c=a.call(this,b);)f=c;return f}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=
a;this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return d.call(this)},lastBackward:function(){return d.call(this,1)},reset:function(){delete this.current;this._={}}}});var b={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1},c={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in c||!b[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0};CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};
CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(f){var d,e;d=f&&f.type!=CKEDITOR.NODE_ELEMENT&&(e=f.getParent())&&c(e);d=a?d:d||c(f);return!!(b^d)}};CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(a^c)}};CKEDITOR.dom.walker.invisible=
function(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.env.webkit?1:0;return function(f){b(f)?f=1:(f.type==CKEDITOR.NODE_TEXT&&(f=f.getParent()),f=f.$.offsetWidth<=c);return!!(a^f)}};CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}};CKEDITOR.dom.walker.bogus=function(a){function b(a){return!g(a)&&!l(a)}return function(c){var f=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&e.test(c.getText());f&&(f=c.getParent(),c=c.getNext(b),f=f.isBlockBoundary()&&
(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()));return!!(a^f)}};CKEDITOR.dom.walker.temp=function(a){return function(b){b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());b=b&&b.hasAttribute("data-cke-temp");return!!(a^b)}};var e=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark(),k=CKEDITOR.dom.walker.temp(),n=function(a){return l(a)||g(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=
function(a){return function(b){b=g(b)||l(b)||k(b);return!!(a^b)}};var w=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var c=0,f=b.getChildCount();c<f;++c)if(!w(b.getChild(c)))return!!a;return!a}};var f=CKEDITOR.dom.walker.empty(),x=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var b={},c;for(c in a)CKEDITOR.dtd[c]["#"]&&(b[c]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){b=
w(b)?!1:b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(x)&&f(b))?!0:!1;return!!(a^b)}};CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(n(a));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&e.test(a.getText()))?a:!1}})();
CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var d=a instanceof CKEDITOR.dom.document;this.document=d?a:a.getDocument();this.root=d?a.getBody():a};
(function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function d(a,b,c,d,e){function q(a,b,c,f){var d=c?a.getPrevious():a.getNext();if(f&&k)return d;h||f?b.append(a.clone(!0,e),c):(a.remove(),z&&b.append(a));return d}function g(){var a,b,c,f=Math.min(v.length,D.length);for(a=0;a<f;a++)if(b=v[a],c=D[a],!b.equals(c))return a;return a-1}function l(){var b=I-1,c=w&&n&&!p.equals(m);b<E-1||b<L-1||c?(c?a.moveToPosition(m,
CKEDITOR.POSITION_BEFORE_START):L==b+1&&H?a.moveToPosition(D[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(D[b+1],CKEDITOR.POSITION_BEFORE_START),d&&(b=v[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(c=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',a.document),c.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:c}))):a.collapse(!0)}a.optimizeBookmark();var k=0===b,z=1==b,h=2==b;b=h||z;var p=a.startContainer,m=a.endContainer,
C=a.startOffset,r=a.endOffset,G,H,w,n,M,Q;if(h&&m.type==CKEDITOR.NODE_TEXT&&p.equals(m))p=a.document.createText(p.substring(C,r)),c.append(p);else{m.type==CKEDITOR.NODE_TEXT?h?Q=!0:m=m.split(r):0<m.getChildCount()?r>=m.getChildCount()?(m=m.getChild(r-1),H=!0):m=m.getChild(r):n=H=!0;p.type==CKEDITOR.NODE_TEXT?h?M=!0:p.split(C):0<p.getChildCount()?0===C?(p=p.getChild(C),G=!0):p=p.getChild(C-1):w=G=!0;for(var v=p.getParents(),D=m.getParents(),I=g(),E=v.length-1,L=D.length-1,J=c,ba,Z,V,fa=-1,O=I;O<=E;O++){Z=
v[O];V=Z.getNext();for(O!=E||Z.equals(D[O])&&E<L?b&&(ba=J.append(Z.clone(0,e))):G?q(Z,J,!1,w):M&&J.append(a.document.createText(Z.substring(C)));V;){if(V.equals(D[O])){fa=O;break}V=q(V,J)}J=ba}J=c;for(O=I;O<=L;O++)if(c=D[O],V=c.getPrevious(),c.equals(v[O]))b&&(J=J.getChild(0));else{O!=L||c.equals(v[O])&&L<E?b&&(ba=J.append(c.clone(0,e))):H?q(c,J,!1,n):Q&&J.append(a.document.createText(c.substring(0,r)));if(O>fa)for(;V;)V=q(V,J,!0);J=ba}h||l()}}function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),
c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(e){return c(e)||b(e)?!0:d(e)&&!a?a=!0:e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(g)?!1:!0}}function c(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&l(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function e(a){return function(){var b;return this[a?
"getPreviousNode":"getNextNode"](function(a){!b&&w(a)&&(b=a);return n(a)&&!(l(a)&&a.equals(b))})}}var g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},l=CKEDITOR.dom.walker.bogus(),k=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,n=CKEDITOR.dom.walker.editable(),w=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);a._setStartContainer(this.startContainer);
a.startOffset=this.startOffset;a._setEndContainer(this.endContainer);a.endOffset=this.endOffset;a.collapsed=this.collapsed;return a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,2,b,!1,"undefined"==typeof a?!0:a);return b},deleteContents:function(a){this.collapsed||
d(this,0,null,a)},extractContents:function(a,b){var c=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,1,c,a,"undefined"==typeof b?!0:b);return c},createBookmark:function(a){var b,c,d,e,q=this.collapsed;b=this.document.createElement("span");b.data("cke-bookmark",1);b.setStyle("display","none");b.setHtml("\x26nbsp;");a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(q?"C":"S")));q||(c=b.clone(),c.setHtml("\x26nbsp;"),a&&c.setAttribute("id",d+"E"),e=this.clone(),
e.collapse(),e.insertNode(c));e=this.clone();e.collapse(!0);e.insertNode(b);c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END);return{startNode:a?d+(q?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:q}},createBookmark2:function(){function a(b){var f=b.container,d=b.offset,e;e=f;var g=d;e=e.type!=CKEDITOR.NODE_ELEMENT||0===g||g==e.getChildCount()?0:e.getChild(g-1).type==CKEDITOR.NODE_TEXT&&e.getChild(g).type==CKEDITOR.NODE_TEXT;e&&(f=f.getChild(d-
1),d=f.getLength());if(f.type==CKEDITOR.NODE_ELEMENT&&0<d){a:{for(e=f;d--;)if(g=e.getChild(d).getIndex(!0),0<=g){d=g;break a}d=-1}d+=1}if(f.type==CKEDITOR.NODE_TEXT){e=f;for(g=0;(e=e.getPrevious())&&e.type==CKEDITOR.NODE_TEXT;)g+=e.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;e=g;f.getText()?d+=e:(g=f.getPrevious(c),e?(d=e,f=g?g.getNext():f.getParent().getFirst()):(f=f.getParent(),d=g?g.getIndex(!0)+1:0))}b.container=f;b.offset=d}function b(a,c){var f=c.getCustomData("cke-fillingChar");
if(f){var d=a.container;f.equals(d)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=d.getIndex(),a.container=d.getParent()))}}var c=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(c){var d=this.collapsed,e={container:this.startContainer,offset:this.startOffset},g={container:this.endContainer,offset:this.endOffset};c&&(a(e),b(e,this.root),d||(a(g),b(g,this.root)));return{start:e.container.getAddress(c),end:d?null:g.container.getAddress(c),
startOffset:e.offset,endOffset:g.offset,normalized:c,collapsed:d,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset;this.setStart(b,c);d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):
this.collapse(!0)},getBoundaryNodes:function(){var a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset,e;if(a.type==CKEDITOR.NODE_ELEMENT)if(e=a.getChildCount(),e>c)a=a.getChild(c);else if(1>e)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a);a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(e=b.getChildCount(),e>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>e)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=
b.lastChild;b=new CKEDITOR.dom.node(b)}a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b);return{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):
this.setStartBefore(a));a=this.endContainer;b=this.endOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START);b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,e=this.collapsed;if((!a||
e)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var q=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(q,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else d=c.getIndex(),c=c.getParent();this.setStart(c,d);if(e){this.collapse(!0);return}}c=this.endContainer;d=this.endOffset;b||e||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):
d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:var q=function(a,b){var c=new CKEDITOR.dom.range(l);c.setStart(a,b);c.setEndAt(l,CKEDITOR.POSITION_BEFORE_END);var c=new CKEDITOR.dom.walker(c),f;for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};f=
c.next();){if(f.type!=CKEDITOR.NODE_TEXT)return!1;G=f!=a?f.getText():f.substring(b);if(d.test(G))return!1}return!0};if(this.collapsed)break;var g=this.getCommonAncestor(),l=this.root,k,z,h,p,m,C=!1,r,G;r=this.startContainer;var H=this.startOffset;r.type==CKEDITOR.NODE_TEXT?(H&&(r=!CKEDITOR.tools.trim(r.substring(0,H)).length&&r,C=!!r),r&&((p=r.getPrevious())||(h=r.getParent()))):(H&&(p=r.getChild(H-1)||r.getLast()),p||(h=r));for(h=c(h);h||p;){if(h&&!p){!m&&h.equals(g)&&(m=!0);if(e?h.isBlockBoundary():
!l.contains(h))break;C&&"inline"==h.getComputedStyle("display")||(C=!1,m?k=h:this.setStartBefore(h));p=h.getPrevious()}for(;p;)if(r=!1,p.type==CKEDITOR.NODE_COMMENT)p=p.getPrevious();else{if(p.type==CKEDITOR.NODE_TEXT)G=p.getText(),d.test(G)&&(p=null),r=/[\s\ufeff]$/.test(G);else if((p.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&p.is("br"))&&!p.data("cke-bookmark"))if(C&&CKEDITOR.dtd.$removeEmpty[p.getName()]){G=p.getText();if(d.test(G))p=null;else for(var H=p.$.getElementsByTagName("*"),w=0,n;n=
H[w++];)if(!CKEDITOR.dtd.$removeEmpty[n.nodeName.toLowerCase()]){p=null;break}p&&(r=!!G.length)}else p=null;r&&(C?m?k=h:h&&this.setStartBefore(h):C=!0);if(p){r=p.getPrevious();if(!h&&!r){h=p;p=null;break}p=r}else h=null}h&&(h=c(h.getParent()))}r=this.endContainer;H=this.endOffset;h=p=null;m=C=!1;r.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(r.substring(H)).length?C=!0:(C=!r.getLength(),H==r.getLength()?(p=r.getNext())||(h=r.getParent()):q(r,H)&&(h=r.getParent())):(p=r.getChild(H))||(h=r);for(;h||
p;){if(h&&!p){!m&&h.equals(g)&&(m=!0);if(e?h.isBlockBoundary():!l.contains(h))break;C&&"inline"==h.getComputedStyle("display")||(C=!1,m?z=h:h&&this.setEndAfter(h));p=h.getNext()}for(;p;){r=!1;if(p.type==CKEDITOR.NODE_TEXT)G=p.getText(),q(p,0)||(p=null),r=/^[\s\ufeff]/.test(G);else if(p.type==CKEDITOR.NODE_ELEMENT){if((0<p.$.offsetWidth||b&&p.is("br"))&&!p.data("cke-bookmark"))if(C&&CKEDITOR.dtd.$removeEmpty[p.getName()]){G=p.getText();if(d.test(G))p=null;else for(H=p.$.getElementsByTagName("*"),w=
0;n=H[w++];)if(!CKEDITOR.dtd.$removeEmpty[n.nodeName.toLowerCase()]){p=null;break}p&&(r=!!G.length)}else p=null}else r=1;r&&C&&(m?z=h:this.setEndAfter(h));if(p){r=p.getNext();if(!h&&!r){h=p;p=null;break}p=r}else h=null}h&&(h=c(h.getParent()))}k&&z&&(g=k.contains(z)?z:k,this.setStartBefore(g),this.setEndAfter(g));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:h=new CKEDITOR.dom.range(this.root);l=this.root;h.setStartAt(l,CKEDITOR.POSITION_AFTER_START);h.setEnd(this.startContainer,
this.startOffset);h=new CKEDITOR.dom.walker(h);var M,Q,v=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),D=null,I=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(D){if(D.equals(a)){D=null;return}}else D=a;else if(D)return;var b=v(a);b||(M=a);return b},e=function(a){var b=I(a);!b&&a.is&&a.is("br")&&(Q=a);return b};h.guard=I;h=h.lastBackward();M=M||l;this.setStartAt(M,!M.is("br")&&(!h&&this.checkStartOfBlock()||h&&M.contains(h))?
CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){h=this.clone();h=new CKEDITOR.dom.walker(h);var E=CKEDITOR.dom.walker.whitespaces(),L=CKEDITOR.dom.walker.bookmark();h.evaluator=function(a){return!E(a)&&!L(a)};if((h=h.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br"))break}h=this.clone();h.collapse();h.setEndAt(l,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:I;M=D=Q=null;h=h.lastForward();
M=M||l;this.setEndAt(M,!h&&this.checkEndOfBlock()||h&&M.contains(h)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);Q&&this.setEndAfter(Q)}},shrink:function(a,b,c){if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var d=this.clone(),e=this.startContainer,q=this.endContainer,g=this.startOffset,l=this.endOffset,k=1,z=1;e&&e.type==CKEDITOR.NODE_TEXT&&(g?g>=e.getLength()?d.setStartAfter(e):(d.setStartBefore(e),k=0):d.setStartBefore(e));q&&q.type==CKEDITOR.NODE_TEXT&&(l?l>=q.getLength()?d.setEndAfter(q):
(d.setEndAfter(q),z=0):d.setEndBefore(q));var d=new CKEDITOR.dom.walker(d),h=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var p;d.guard=function(b,d){if(h(b))return!0;if(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(p)||!1===c&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))return!1;d||b.type!=CKEDITOR.NODE_ELEMENT||
(p=b);return!0};k&&(e=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(e,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);z&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!k&&!z)}},insertNode:function(a){this.optimizeBookmark();this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a);a.getParent()&&a.getParent().equals(this.endContainer)&&
this.endOffset++;this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b);this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset);this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent());this._setStartContainer(b);this.startOffset=
c;this.endContainer||(this._setEndContainer(b),this.endOffset=c);a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent());this._setEndContainer(b);this.endOffset=c;this.startContainer||(this._setStartContainer(b),this.startOffset=c);a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),
a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,
0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(d);d.trim();this.insertNode(d);var e=d.getBogus();e&&e.remove();
d.appendBogus();this.moveToBookmark(c);return d},splitBlock:function(a,b){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),e=c.block,q=d.block,g=null;if(!c.blockLimit.equals(d.blockLimit))return null;"br"!=a&&(e||(e=this.fixBlock(!0,a),q=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),q||(q=this.fixBlock(!1,a)));c=e&&this.checkStartOfBlock();d=q&&this.checkEndOfBlock();this.deleteContents();e&&e.equals(q)&&
(d?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(q,CKEDITOR.POSITION_AFTER_END),q=null):c?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e=null):(q=this.splitElement(e,b||!1),e.is("ul","ol")||e.appendBogus()));return{previousBlock:e,nextBlock:q,wasStartOfBlock:c,wasEndOfBlock:d,elementPath:g}},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);
var c=this.extractContents(!1,b||!1),d=a.clone(!1,b||!1);c.appendTo(d);d.insertAfter(a);this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);return d},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var c=this.createBookmark(),d=this[b?"endPath":"startPath"](),e=d.block||
d.blockLimit,g;e&&!e.equals(d.root)&&!e.getFirst(a(e));)g=e.getParent(),this[b?"setEndAt":"setStartAt"](e,CKEDITOR.POSITION_AFTER_END),e.remove(1),e=g;this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,e=this.clone();e.collapse(d);e[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:
CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);e.evaluator=c(d);return e[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,c)),k.test(a)&&this.trim(0,1));this.trim();a=new CKEDITOR.dom.elementPath(this.startContainer,this.root);c=this.clone();c.collapse(!0);c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(c);
a.evaluator=b();return a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(c)),k.test(a)&&this.trim(1,0));this.trim();a=new CKEDITOR.dom.elementPath(this.endContainer,this.root);c=this.clone();c.collapse(!1);c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(c);a.evaluator=b();return a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();
d.collapse(1);d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.previous()},getNextNode:function(a,b,c){var d=this.clone();d.collapse();d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||
"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&k.test(a.getText())?this.moveToPosition(a,
CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),
!0;var d=a,e=c,q=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(q=d[b?"getLast":"getFirst"](w));e||q||(q=d[b?"getPrevious":"getNext"](w));a=q}return!!c},moveToClosestEditablePosition:function(a,b){var c,d=0,e,q,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];a?(c=new CKEDITOR.dom.range(this.root),c.moveToPosition(a,g[b?0:1])):c=this.clone();if(a&&!a.is(CKEDITOR.dtd.$block))d=1;else if(e=c[b?"getNextEditableNode":"getPreviousEditableNode"]())d=1,(q=e.type==CKEDITOR.NODE_ELEMENT)&&
e.is(CKEDITOR.dtd.$block)&&"false"==e.getAttribute("contenteditable")?(c.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(e,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&q&&e.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(e,0),c.collapse()):c.moveToPosition(e,g[b?1:0]);d&&this.moveToRange(c);return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=
this.clone();a.optimize();if(a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();a.reset();return d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=
this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:e(),getPreviousEditableNode:e(1),scrollIntoView:function(){var a=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),b,c,d,e=this.clone();e.optimize();(d=e.startContainer.type==CKEDITOR.NODE_TEXT)?(c=e.startContainer.getText(),b=e.startContainer.split(e.startOffset),a.insertAfter(e.startContainer)):e.insertNode(a);a.scrollIntoView();
d&&(e.startContainer.setText(c),b.remove());a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";
(function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function d(a){var b=[];a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function b(a,c,e,g){a:{null==g&&(g=d(e));for(var l;l=g.shift();)if(l.getDtd().p){g={element:l,remaining:g};break a}g=null}if(!g)return 0;if((l=CKEDITOR.filter.instances[g.element.data("cke-filter")])&&!l.check(c))return b(a,
c,e,g.remaining);c=new CKEDITOR.dom.range(g.element);c.selectNodeContents(g.element);c=c.createIterator();c.enlargeBr=a.enlargeBr;c.enforceRealBlocks=a.enforceRealBlocks;c.activeFilter=c.filter=l;a._.nestedEditable={element:g.element,container:e,remaining:g.remaining,iterator:c};return 1}function c(a,b,c){if(!b)return!1;a=a.clone();a.collapse(!c);return a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END)}var e=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),l=CKEDITOR.dom.walker.whitespaces(!0),
k=function(a){return g(a)&&l(a)},n={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var d,l,A,u,B;a=a||"p";if(this._.nestedEditable){if(d=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,d;this.activeFilter=this.filter;if(b(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=
null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var q=this.range.clone();l=q.startPath();var y=q.endPath(),F=!q.collapsed&&c(q,l.block),t=!q.collapsed&&c(q,y.block,1);q.shrink(CKEDITOR.SHRINK_ELEMENT,!0);F&&q.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END);t&&q.setEndAt(y.block,CKEDITOR.POSITION_AFTER_START);l=q.endContainer.hasAscendant("pre",!0)||q.startContainer.hasAscendant("pre",!0);q.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);
q.collapsed||(l=new CKEDITOR.dom.walker(q.clone()),y=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=y,this._.nextNode=l.next(),l=new CKEDITOR.dom.walker(q.clone()),l.evaluator=y,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,q.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(y=this.range.clone(),y.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),y.checkEndOfBlock()&&
(y=new CKEDITOR.dom.elementPath(y.endContainer,y.root),this._.lastNode=(y.block||y.blockLimit).getNextSourceNode(!0))),this._.lastNode&&q.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=q.document.createText(""),this._.lastNode.insertAfter(l)),q=null);this._.started=1;l=q}y=this._.nextNode;q=this._.lastNode;for(this._.nextNode=null;y;){var F=0,t=y.hasAscendant("pre"),z=y.type!=CKEDITOR.NODE_ELEMENT,h=0;if(z)y.type==CKEDITOR.NODE_TEXT&&e.test(y.getText())&&(z=0);else{var p=y.getName();
if(CKEDITOR.dtd.$block[p]&&"false"==y.getAttribute("contenteditable")){d=y;b(this,a,d);break}else if(y.isBlockBoundary(this.forceBrBreak&&!t&&{br:1})){if("br"==p)z=1;else if(!l&&!y.getChildCount()&&"hr"!=p){d=y;A=y.equals(q);break}l&&(l.setEndAt(y,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=y));F=1}else{if(y.getFirst()){l||(l=this.range.clone(),l.setStartAt(y,CKEDITOR.POSITION_BEFORE_START));y=y.getFirst();continue}z=1}}z&&!l&&(l=this.range.clone(),l.setStartAt(y,CKEDITOR.POSITION_BEFORE_START));
A=(!F||z)&&y.equals(q);if(l&&!F)for(;!y.getNext(k)&&!A;){p=y.getParent();if(p.isBlockBoundary(this.forceBrBreak&&!t&&{br:1})){F=1;z=0;A||p.equals(q);l.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}y=p;z=1;A=y.equals(q);h=1}z&&l.setEndAt(y,CKEDITOR.POSITION_AFTER_END);y=this._getNextSourceNode(y,h,q);if((A=!y)||F&&l)break}if(!d){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(l.startContainer,l.root);y=d.blockLimit;F={div:1,th:1,td:1};
d=d.block;!d&&y&&!this.enforceRealBlocks&&F[y.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!y.equals(l.root)?d=y:!d||this.enforceRealBlocks&&d.is(n)?(d=this.range.document.createElement(a),l.extractContents().appendTo(d),d.trim(),l.insertNode(d),u=B=!0):"li"!=d.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(d=d.clone(!1),l.extractContents().appendTo(d),d.trim(),B=l.splitBlock(),u=!B.wasStartOfBlock,B=!B.wasEndOfBlock,l.insertNode(d)):A||(this._.nextNode=d.equals(q)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,
1,q))}u&&(u=d.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&("br"==u.getName()?u.remove():u.getLast()&&"br"==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove());B&&(u=d.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(g)||u.getNext(g))&&u.remove();this._.nextNode||(this._.nextNode=A||d.equals(q)||!q?null:this._getNextSourceNode(d,1,q));return d},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(e))}var e=
this.range.root;for(a=a.getNextSourceNode(b,null,d);!g(a);)a=a.getNextSourceNode(b,null,d);return a}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();
CKEDITOR.command=function(a,d){this.uiItems=[];this.exec=function(b){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&a.focus();return!1===this.fire("exec")?!0:!1!==d.exec.call(this,a,b)};this.refresh=function(a,b){if(!this.readOnly&&a.readOnly)return!0;if(this.context&&!b.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[a.mode]&&this.disable();return!1===this.fire("refresh",
{editor:a,path:b})?!0:d.refresh&&!1!==d.refresh.apply(this,arguments)};var b;this.checkAllowed=function(c){return c||"boolean"!=typeof b?b=a.activeFilter.checkFeature(this):b};CKEDITOR.tools.extend(this,d,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!d.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};
CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=a;this.fire("state");return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?
this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;
CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};
(function(){function a(a,b,c,d,e){var h,p;a=[];for(h in b){p=b[h];p="boolean"==typeof p?{}:"function"==typeof p?{match:p}:K(p);"$"!=h.charAt(0)&&(p.elements=h);c&&(p.featureName=c.toLowerCase());var m=p;m.elements=l(m.elements,/\s+/)||null;m.propertiesOnly=m.propertiesOnly||!0===m.elements;var r=/\s*,\s*/,q=void 0;for(q in Q){m[q]=l(m[q],r)||null;var f=m,E=v[q],z=l(m[v[q]],r),g=m[q],C=[],G=!0,L=void 0;z?G=!1:z={};for(L in g)"!"==L.charAt(0)&&(L=L.slice(1),C.push(L),z[L]=!0,G=!1);for(;L=C.pop();)g[L]=
g["!"+L],delete g["!"+L];f[E]=(G?!1:z)||null}m.match=m.match||null;d.push(p);a.push(p)}b=e.elements;e=e.generic;var k;c=0;for(d=a.length;c<d;++c){h=K(a[c]);p=!0===h.classes||!0===h.styles||!0===h.attributes;m=h;q=E=r=void 0;for(r in Q)m[r]=F(m[r]);f=!0;for(q in v){r=v[q];E=m[r];z=[];g=void 0;for(g in E)-1<g.indexOf("*")?z.push(new RegExp("^"+g.replace(/\*/g,".*")+"$")):z.push(g);E=z;E.length&&(m[r]=E,f=!1)}m.nothingRequired=f;m.noProperties=!(m.attributes||m.classes||m.styles);if(!0===h.elements||
null===h.elements)e[p?"unshift":"push"](h);else for(k in m=h.elements,delete h.elements,m)if(b[k])b[k][p?"unshift":"push"](h);else b[k]=[h]}}function d(a,c,d,h){if(!a.match||a.match(c))if(h||k(a,c))if(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=b(a.attributes,c.attributes,d.validAttributes)),d.allStyles||(d.allStyles=b(a.styles,c.styles,d.validStyles)),!d.allClasses){a=a.classes;c=c.classes;h=d.validClasses;if(a)if(!0===a)a=!0;else{for(var p=0,e=c.length,m;p<e;++p)m=c[p],h[m]||
(h[m]=a(m));a=!1}else a=!1;d.allClasses=a}}function b(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function c(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;c.hadInvalidAttribute=e(a.attributes,b.attributes)||c.hadInvalidAttribute;c.hadInvalidStyle=e(a.styles,b.styles)||c.hadInvalidStyle;a=a.classes;b=b.classes;if(a){for(var d=!1,h=!0===a,p=b.length;p--;)if(h||a(b[p]))b.splice(p,1),d=!0;a=d}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function e(a,
b){if(!a)return!1;var c=!1,d=!0===a,h;for(h in b)if(d||a(h))delete b[h],c=!0;return c}function g(a,b,c){if(a.disabled||a.customConfig&&!c||!b)return!1;a._.cachedChecks={};return!0}function l(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=R(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var c={},d=0,h;for(h in a)c[h]=a[h],d++;return d?c:!1}function k(a,b){if(a.nothingRequired)return!0;
var c,d,h,p;if(h=a.requiredClasses)for(p=b.classes,c=0;c<h.length;++c)if(d=h[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(p,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(p,d))return!1;return n(b.styles,a.requiredStyles)&&n(b.attributes,a.requiredAttributes)}function n(a,b){if(!b)return!0;for(var c=0,d;c<b.length;++c)if(d=b[c],"string"==typeof d){if(!(d in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return!1;return!0}function w(a){if(!a)return{};
a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function f(a){var b,c,d,h,p={},e=1;for(a=R(a);b=a.match(D);)(c=b[2])?(d=x(c,"styles"),h=x(c,"attrs"),c=x(c,"classes")):d=h=c=null,p["$"+e++]={elements:b[1],classes:c,styles:d,attributes:h},a=a.slice(b[0].length);return p}function x(a,b){var c=a.match(I[b]);return c?R(c[1]):null}function A(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||
"",1));a.classes||(a.classes=c?c.split(/\s+/):[])}function u(a,b,h,e){var m=0,r;e.toHtml&&(b.name=b.name.replace(E,"$1"));if(e.doCallbacks&&a.elementCallbacks){a:{r=a.elementCallbacks;for(var g=0,f=r.length,z;g<f;++g)if(z=r[g](b)){r=z;break a}r=void 0}if(r)return r}if(e.doTransform&&(r=a._.transformations[b.name])){A(b);for(g=0;g<r.length;++g)p(a,b,r[g]);q(b)}if(e.doFilter){a:{g=b.name;f=a._;a=f.allowedRules.elements[g];r=f.allowedRules.generic;g=f.disallowedRules.elements[g];f=f.disallowedRules.generic;
z=e.skipRequired;var C={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},v,l;if(a||r){A(b);if(g)for(v=0,l=g.length;v<l;++v)if(!1===c(g[v],b,C)){a=null;break a}if(f)for(v=0,l=f.length;v<l;++v)c(f[v],b,C);if(a)for(v=0,l=a.length;v<l;++v)d(a[v],b,C,z);if(r)for(v=0,l=r.length;v<l;++v)d(r[v],b,C,z);a=C}else a=null}if(!a||!a.valid)return h.push(b),1;l=a.validAttributes;var G=a.validStyles;
r=a.validClasses;var g=b.attributes,k=b.styles,f=b.classes;z=b.classBackup;var I=b.styleBackup,D,H,J=[],C=[],n=/^data-cke-/;v=!1;delete g.style;delete g["class"];delete b.classBackup;delete b.styleBackup;if(!a.allAttributes)for(D in g)l[D]||(n.test(D)?D==(H=D.replace(/^data-cke-saved-/,""))||l[H]||(delete g[D],v=!0):(delete g[D],v=!0));if(!a.allStyles||a.hadInvalidStyle){for(D in k)a.allStyles||G[D]?J.push(D+":"+k[D]):v=!0;J.length&&(g.style=J.sort().join("; "))}else I&&(g.style=I);if(!a.allClasses||
a.hadInvalidClass){for(D=0;D<f.length;++D)(a.allClasses||r[f[D]])&&C.push(f[D]);C.length&&(g["class"]=C.sort().join(" "));z&&C.length<z.split(/\s+/).length&&(v=!0)}else z&&(g["class"]=z);v&&(m=1);if(!e.skipFinalValidation&&!y(b))return h.push(b),1}e.toHtml&&(b.name=b.name.replace(L,"cke:$1"));return m}function B(a){var b=[],c;for(c in a)-1<c.indexOf("*")&&b.push(c.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function q(a){var b=a.attributes,c;delete b.style;delete b["class"];
if(c=CKEDITOR.tools.writeCssText(a.styles,!0))b.style=c;a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function y(a){switch(a.name){case "a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case "img":if(!a.attributes.src)return!1}return!0}function F(a){if(!a)return!1;if(!0===a)return!0;var b=B(a);return function(c){return c in a||b&&c.match(b)}}function t(){return new CKEDITOR.htmlParser.element("br")}function z(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==
a.name||H.$block[a.name])}function h(a,b,c){var d=a.name;if(H.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(t()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(H.$block[d]||"tr"==d)if("br"==b)a.previous&&!z(a.previous)&&(b=t(),b.insertBefore(a)),a.next&&!z(a.next)&&(b=t(),b.insertAfter(a)),a.replaceWithChildren();else{var d=a.children,h;b:{h=H[b];for(var p=0,e=d.length,m;p<e;++p)if(m=d[p],m.type==CKEDITOR.NODE_ELEMENT&&!h[m.name]){h=!1;break b}h=!0}if(h)a.name=b,a.attributes=
{},c.push({check:"parent-down",el:a});else{h=a.parent;for(var p=h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==h.name,r,g,e=d.length;0<e;)m=d[--e],p&&(m.type==CKEDITOR.NODE_TEXT||m.type==CKEDITOR.NODE_ELEMENT&&H.$inline[m.name])?(r||(r=new CKEDITOR.htmlParser.element(b),r.insertAfter(a),c.push({check:"parent-down",el:r})),r.add(m,0)):(r=null,g=H[h.name]||H.span,m.insertAfter(a),h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||m.type!=CKEDITOR.NODE_ELEMENT||g[m.name]||c.push({check:"el-up",el:m}));a.remove()}}else d in
{style:1,script:1}?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function p(a,b,c){var d,h;for(d=0;d<c.length;++d)if(h=c[d],!(h.check&&!a.check(h.check,!1)||h.left&&!h.left(b))){h.right(b,J);break}}function m(a,b){var c=b.getDefinition(),d=c.attributes,h=c.styles,p,e,m,r;if(a.name!=c.element)return!1;for(p in d)if("class"==p)for(c=d[p].split(/\s+/),m=a.classes.join("|");r=c.pop();){if(-1==m.indexOf(r))return!1}else if(a.attributes[p]!=d[p])return!1;for(e in h)if(a.styles[e]!=
h[e])return!1;return!0}function C(a,b){var c,d;"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]);return[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function r(a){return function(b){return m(b,a)}}function G(a){return function(b,c){c[a](b)}}var H=CKEDITOR.dtd,K=CKEDITOR.tools.copy,R=CKEDITOR.tools.trim,M=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(a){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=
!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(a instanceof CKEDITOR.editor){a=this.editor=a;this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(M[a.enterMode]+" "+M[a.shiftEnterMode],"default",
1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(b,c,d){if(!g(this,b,d))return!1;var h,p;if("string"==typeof b)b=f(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);h=b.getDefinition();b={};d=h.attributes;b[h.element]=h={styles:h.styles,requiredStyles:h.styles&&CKEDITOR.tools.objectKeys(h.styles)};d&&(d=
K(d),h.classes=d["class"]?d["class"].split(/\s+/):null,h.requiredClasses=h.classes,delete d["class"],h.attributes=d,h.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(h=0;h<b.length;++h)p=this.allow(b[h],c,d);return p}a(this,b,c,this.allowedContent,this._.allowedRules);return!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var p=this,e=[],m=this.editor&&this.editor.config.protectedSource,r,g=!1,f={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};
a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(r=u(p,a,e,f),r&1)g=!0;else if(r&2)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var h,q,z;if(m)for(q=0;q<m.length;++q)if((z=d.match(m[q]))&&z[0].length==d.length){c=!0;
break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d);1==d.children.length&&(h=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&u(p,h,c,f);c=!c.length}c||e.push(a)}},null,!0);e.length&&(g=!0);var q;a=[];d=M[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var z;c=e.pop();)c.type==CKEDITOR.NODE_ELEMENT?h(c,d,a):c.remove();for(;q=a.pop();)if(c=q.el,c.parent)switch(z=H[c.parent.name]||H.span,q.check){case "it":H.$removeEmpty[c.name]&&!c.children.length?h(c,d,a):y(c)||h(c,d,a);break;case "el-up":c.parent.type==
CKEDITOR.NODE_DOCUMENT_FRAGMENT||z[c.name]||h(c,d,a);break;case "parent-down":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||z[c.name]||h(c.parent,d,a)}return g},checkFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));return!a.requiredContent||this.check(a.requiredContent)},disable:function(){this.disabled=!0},disallow:function(b){if(!g(this,b,!0))return!1;"string"==typeof b&&(b=f(b));a(this,b,null,this.disallowedContent,this._.disallowedRules);return!0},
addContentForms:function(a){if(!this.disabled&&a){var b,c,d=[],h;for(b=0;b<a.length&&!h;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(h=c);if(h){for(b=0;b<a.length;++b)d.push(C(a[b],h));this.addTransformations(d)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(a)},addFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));this.allow(a.allowedContent,a.name);this.addTransformations(a.contentTransformations);
this.addContentForms(a.contentForms);return a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d=this._.transformations,h;for(h=0;h<a.length;++h){b=a[h];var p=void 0,e=void 0,m=void 0,g=void 0,q=void 0,f=void 0;c=[];for(e=0;e<b.length;++e)m=b[e],"string"==typeof m?(m=m.split(/\s*:\s*/),g=m[0],q=null,f=m[1]):(g=m.check,q=m.left,f=m.right),p||(p=m,p=p.element?p.element:g?g.match(/^([a-z0-9]+)/i)[0]:
p.left.getDefinition().element),q instanceof CKEDITOR.style&&(q=r(q)),c.push({check:g==p?null:g,left:q,right:"string"==typeof f?G(f):f});b=p;d[b]||(d[b]=[]);d[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var h,e;if("string"==typeof a){e=a+"\x3c"+(!1===b?"0":"1")+(c?"1":"0")+"\x3e";if(e in this._.cachedChecks)return this._.cachedChecks[e];d=f(a).$1;h=d.styles;var m=d.classes;d.name=d.elements;
d.classes=m=m?m.split(/\s*,\s*/):[];d.styles=w(h);d.attributes=w(d.attributes);d.children=[];m.length&&(d.attributes["class"]=m.join(" "));h&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles));h=d}else d=a.getDefinition(),h=d.styles,m=d.attributes||{},h?(h=K(h),m.style=CKEDITOR.tools.writeCssText(h,!0)):h={},h={name:d.element,attributes:m,classes:m["class"]?m["class"].split(/\s+/):[],styles:h,children:[]};var m=CKEDITOR.tools.clone(h),r=[],g;if(!1!==b&&(g=this._.transformations[h.name])){for(d=
0;d<g.length;++d)p(this,h,g[d]);q(h)}u(this,m,r,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c});b=0<r.length?!1:CKEDITOR.tools.objectCompare(h.attributes,m.attributes,!0)?!0:!1;"string"==typeof a&&(this._.cachedChecks[e]=b);return b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var h=a.slice(),p;if(this.check(M[c]))return c;for(d||(h=h.reverse());p=h.pop();)if(this.check(p))return b[p];
return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var Q={styles:1,attributes:1,classes:1},v={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},D=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,I={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},E=/^cke:(object|embed|param)$/,
L=/^(object|embed|param)$/,J=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width");this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width");this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){c=c||b;if(!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){c=c||b;if(!(c in a.attributes)){var d=a.styles[b],h=d&&d.match(/^(\d+)(?:\.\d*)?px$/);
h?a.attributes[c]=h[1]:"cke-test"==d&&(a.attributes[c]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;if("left"==b||"right"==b)a.styles["float"]=b}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];if("left"==b||"right"==b)a.attributes.align=b}delete a.styles["float"]},matchesStyle:m,transform:function(a,b){if("string"==typeof b)a.name=b;else{var c=b.getDefinition(),d=c.styles,
h=c.attributes,p,m,e,r;a.name=c.element;for(p in h)if("class"==p)for(c=a.classes.join("|"),e=h[p].split(/\s+/);r=e.pop();)-1==c.indexOf(r)&&a.classes.push(r);else a.attributes[p]=h[p];for(m in d)a.styles[m]=d[m]}}}})();
(function(){CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:a};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer);a&&(this.currentActive=a);this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=
1},unlock:function(){delete this._.locked},blur:function(a){function d(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?d.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;d.call(this)},b,this)}},add:function(a,d){var b=a.getCustomData("focusmanager");if(!b||b!=this){b&&b.remove(a);var b=
"focus",c="blur";d&&(CKEDITOR.env.ie?(b="focusin",c="focusout"):CKEDITOR.event.useCapture=1);var e={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(b,e.focus,this);a.on(c,e.blur,this);d&&(CKEDITOR.event.useCapture=0);a.setCustomData("focusmanager",this);a.setCustomData("focusmanager_handlers",e)}},remove:function(a){a.removeCustomData("focusmanager");var d=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",d.blur);a.removeListener("focus",
d.focus)}}})();CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};
(function(){var a,d=function(b){b=b.data;var d=b.getKeystroke(),g=this.keystrokes[d],l=this._.editor;a=!1===l.fire("key",{keyCode:d,domEvent:b});a||(g&&(a=!1!==l.execCommand(g,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[d]));a&&b.preventDefault(!0);return!a},b=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)a.on("keypress",b,this)}}})();
(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,d,b){a&&CKEDITOR.lang.languages[a]||(a=
this.detect(d,a));var c=this;d=function(){c[a].dir=c.rtl[a]?"rtl":"ltr";b(a,c[a])};this[a]?d():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),d,this)},detect:function(a,d){var b=this.languages;d=d||navigator.userLanguage||navigator.language||a;var c=d.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),e=c[1],c=c[2];b[e+"-"+c]?e=e+"-"+c:b[e]||(e=null);CKEDITOR.lang.detect=e?function(){return e}:function(a){return a};return e||a}}})();
CKEDITOR.scriptLoader=function(){var a={},d={};return{load:function(b,c,e,g){var l="string"==typeof b;l&&(b=[b]);e||(e=CKEDITOR);var k=b.length,n=[],w=[],f=function(a){c&&(l?c.call(e,a):c.call(e,n,w))};if(0===k)f(!0);else{var x=function(a,b){(b?n:w).push(a);0>=--k&&(g&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),f(b))},A=function(b,c){a[b]=1;var e=d[b];delete d[b];for(var g=0;g<e.length;g++)e[g](b,c)},u=function(b){if(a[b])x(b,!0);else{var e=d[b]||(d[b]=[]);e.push(x);if(!(1<e.length)){var g=
new CKEDITOR.dom.element("script");g.setAttributes({type:"text/javascript",src:b});c&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?g.$.onreadystatechange=function(){if("loaded"==g.$.readyState||"complete"==g.$.readyState)g.$.onreadystatechange=null,A(b,!0)}:(g.$.onload=function(){setTimeout(function(){A(b,!0)},0)},g.$.onerror=function(){A(b,!1)}));g.appendTo(CKEDITOR.document.getHead())}}};g&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var B=0;B<k;B++)u(b[B])}},queue:function(){function a(){var b;
(b=c[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)}var c=[];return function(d,g){var l=this;c.push({scriptUrl:d,callback:function(){g&&g.apply(this,arguments);c.shift();a.call(l)}});1==c.length&&a.call(this)}}()}}();CKEDITOR.resourceManager=function(a,d){this.basePath=a;this.fileName=d;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};
CKEDITOR.resourceManager.prototype={add:function(a,d){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var b=this.registered[a]=d||{};b.name=a;b.path=this.getPath(a);CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b);return this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var d=this.externals[a];return CKEDITOR.getUrl(d&&d.dir||this.basePath+a+"/")},getFilePath:function(a){var d=this.externals[a];
return CKEDITOR.getUrl(this.getPath(a)+(d?d.file:this.fileName+".js"))},addExternal:function(a,d,b){a=a.split(",");for(var c=0;c<a.length;c++){var e=a[c];b||(d=d.replace(/[^\/]+$/,function(a){b=a;return""}));this.externals[e]={dir:d,file:b||this.fileName+".js"}}},load:function(a,d,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var c=this.loaded,e=this.registered,g=[],l={},k={},n=0;n<a.length;n++){var w=a[n];if(w)if(c[w]||e[w])k[w]=this.get(w);else{var f=this.getFilePath(w);g.push(f);f in l||(l[f]=
[]);l[f].push(w)}}CKEDITOR.scriptLoader.load(g,function(a,e){if(e.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+l[e[0]].join(",")+'" was not found at "'+e[0]+'".');for(var g=0;g<a.length;g++)for(var f=l[a[g]],q=0;q<f.length;q++){var y=f[q];k[y]=this.get(y);c[y]=1}d.call(b,k)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var d={};return function(b,c,e){var g={},l=function(b){a.call(this,b,function(a){CKEDITOR.tools.extend(g,a);var b=[],f;for(f in a){var k=a[f],A=k&&k.requires;if(!d[f]){if(k.icons)for(var u=k.icons.split(","),B=u.length;B--;)CKEDITOR.skin.addIcon(u[B],k.path+"icons/"+(CKEDITOR.env.hidpi&&k.hidpi?"hidpi/":"")+u[B]+".png");d[f]=1}if(A)for(A.split&&(A=A.split(",")),k=0;k<A.length;k++)g[A[k]]||b.push(A[k])}if(b.length)l.call(this,
b);else{for(f in g)k=g[f],k.onLoad&&!k.onLoad._called&&(!1===k.onLoad()&&delete g[f],k.onLoad._called=1);c&&c.call(e||window,g)}},this)};l.call(this,b)}});CKEDITOR.plugins.setLang=function(a,d,b){var c=this.get(a);a=c.langEntries||(c.langEntries={});c=c.lang||(c.lang=[]);c.split&&(c=c.split(","));-1==CKEDITOR.tools.indexOf(c,d)&&c.push(d);a[d]=b};CKEDITOR.ui=function(a){if(a.ui)return a.ui;this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this};
CKEDITOR.ui.prototype={add:function(a,d,b){b.name=a.toLowerCase();var c=this.items[a]={type:d,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(c,b)},get:function(a){return this.instances[a]},create:function(a){var d=this.items[a],b=d&&this._.handlers[d.type],c=d&&d.command&&this.editor.getCommand(d.command),b=b&&b.create.apply(this,d.args);this.instances[a]=b;c&&c.uiItems.push(b);b&&!b.type&&(b.type=d.type);return b},addHandler:function(a,d){this._.handlers[a]=
d},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}};CKEDITOR.event.implementOn(CKEDITOR.ui);
(function(){function a(a,e,f){CKEDITOR.event.call(this);a=a&&CKEDITOR.tools.clone(a);if(void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!f)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!b(e,f))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');
this.element=e;this.elementMode=f;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||d();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",
c);this.on("selectionChange",function(a){g(this,a.data.path)});this.on("activeFilterChange",function(){g(this,this.elementPath(),!0)});this.on("mode",c);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?k(this,a):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function d(){do var a="editor"+ ++u;while(CKEDITOR.instances[a]);return a}function b(a,
b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function c(){var a=this.commands,b;for(b in a)e(this,a[b])}function e(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function g(a,b,c){if(b){var d,e,h=a.commands;for(e in h)d=h[e],(c||d.contextSensitive)&&d.refresh(a,b)}}function l(a){var b=a.config.customConfig;if(!b)return!1;var b=
CKEDITOR.getUrl(b),c=B[b]||(B[b]={});c.fn?(c.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&l(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};l(a)});return!0}function k(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0);delete a.config.on}c=a.config;a.readOnly=c.readOnly?!0:a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?
a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):!1;a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1;a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0;a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode;
a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode;c.skin&&(CKEDITOR.skinName=c.skin);a.fireOnce("configLoaded");a.dataProcessor=new CKEDITOR.htmlDataProcessor(a);a.filter=a.activeFilter=new CKEDITOR.filter(a);n(a)});b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig);l(a)||a.fireOnce("customConfigLoaded")}function n(a){CKEDITOR.skin.loadPart("editor",function(){w(a)})}function w(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,
c){var d=a.config.title;a.langCode=b;a.lang=CKEDITOR.tools.prototypedCopy(c);a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", ");a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir);a.fire("langLoaded");f(a)})}function f(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1);x(a)})}function x(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=
b.removePlugins;if(d)var h=new RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(h,""),c=c+(","+d);if(e)var p=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(p,"");CKEDITOR.env.air&&(c+=",adobeair");CKEDITOR.plugins.load(c.split(","),function(c){var d=[],h=[],e=[];a.plugins=c;for(var g in c){var f=c[g],z=f.lang,l=null,k=f.requires,v;CKEDITOR.tools.isArray(k)&&(k=k.join(","));if(k&&(v=k.match(p)))for(;k=v.pop();)CKEDITOR.error("editor-plugin-required",
{plugin:k.replace(",",""),requiredBy:g});z&&!a.lang[g]&&(z.split&&(z=z.split(",")),0<=CKEDITOR.tools.indexOf(z,a.langCode)?l=a.langCode:(l=a.langCode.replace(/-.*/,""),l=l!=a.langCode&&0<=CKEDITOR.tools.indexOf(z,l)?l:0<=CKEDITOR.tools.indexOf(z,"en")?"en":z[0]),f.langEntries&&f.langEntries[l]?(a.lang[g]=f.langEntries[l],l=null):e.push(CKEDITOR.getUrl(f.path+"lang/"+l+".js")));h.push(l);d.push(f)}CKEDITOR.scriptLoader.load(e,function(){for(var c=["beforeInit","init","afterInit"],e=0;e<c.length;e++)for(var p=
0;p<d.length;p++){var m=d[p];0===e&&h[p]&&m.lang&&m.langEntries&&(a.lang[m.name]=m.langEntries[h[p]]);if(m[c[e]])m[c[e]](a)}a.fireOnce("pluginsLoaded");b.keystrokes&&a.setKeystroke(a.config.keystrokes);for(p=0;p<a.config.blockedKeystrokes.length;p++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[p]]=1;a.status="loaded";a.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,a)})})}function A(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();
this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b));a.is("textarea")?a.setValue(b):a.setHtml(b);return!0}return!1}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var u=0,B={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);this.mode&&e(this,c);return this.commands[a]=c},_attachToForm:function(){function a(b){c.updateElement();c._.required&&!d.getValue()&&!1===c.fire("required")&&b.data.preventDefault()}
function b(a){return!!(a&&a.call&&a.apply)}var c=this,d=c.element,e=new CKEDITOR.dom.element(d.$.form);d.is("textarea")&&e&&(e.on("submit",a),b(e.$.submit)&&(e.$.submit=CKEDITOR.tools.override(e.$.submit,function(b){return function(){a();b.apply?b.apply(this):b()}})),c.on("destroy",function(){e.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy");!a&&A.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status=
"destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){a=this.getSelection();if(!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&
!1!==this.fire("beforeCommandExec",d)&&(d.returnValue=c.exec(d.commandData),!c.async&&!1!==this.fire("afterCommandExec",d))?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"");b={dataValue:b};!a&&this.fire("getData",b);return b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");
"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"");return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,e=b;b&&"object"==typeof b&&(c=b.internal,e=b.callback,d=!b.noSnapshot);!c&&d&&this.fire("saveSnapshot");if(e||!c)this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot");e&&e.call(a.editor)});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;
!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a;this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,c){this.fire("insertHtml",{dataValue:a,mode:b,range:c})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),c=this.getSelection(),c=c&&c.getRanges();if(!b||!c||0===c.length)return null;
for(var d=new CKEDITOR.dom.documentFragment,e,h,p,m=0;m<c.length;m++){var g=c[m],r=g.startContainer;r.getName&&"tr"==r.getName()?(e||(e=r.getAscendant("table").clone(),e.append(r.getAscendant("tbody").clone()),d.append(e),e=e.findOne("tbody")),h&&h.equals(r)||(h=r,p=r.clone(),e.append(p)),p.append(g.cloneContents())):d.append(g.cloneContents())}b=e?d:b.getHtmlFromRange(c[0]);return a?b.getHtml():b},extractSelectedHtml:function(a,b){var c=this.editable(),d=this.getSelection().getRanges();if(!c||0===
d.length)return null;d=d[0];c=c.extractHtmlFromRange(d,b);b||this.getSelection().selectRanges([d]);return a?c.getHtml():c},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return A.call(this)},setKeystroke:function(){for(var a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,
0)],c,d,e=b.length;e--;)c=b[e],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter);this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:
a:this.enterMode;b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode;if(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange")},showNotification:function(a){alert(a)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};
(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(b){for(var c,e,g=0,l;c=this._.htmlPartsRegex.exec(b);){e=c.index;if(e>g)if(g=b.substring(g,e),l)l.push(g);else this.onText(g);
g=this._.htmlPartsRegex.lastIndex;if(e=c[1])if(e=e.toLowerCase(),l&&CKEDITOR.dtd.$cdata[e]&&(this.onCDATA(l.join("")),l=null),!l){this.onTagClose(e);continue}if(l)l.push(c[0]);else if(e=c[3]){if(e=e.toLowerCase(),!/="/.test(e)){var k={},n,w=c[4];c=!!c[5];if(w)for(;n=a.exec(w);){var f=n[1].toLowerCase();n=n[2]||n[3]||n[4]||"";k[f]=!n&&d[f]?f:CKEDITOR.tools.htmlDecodeAttr(n)}this.onTagOpen(e,k,c);!l&&CKEDITOR.dtd.$cdata[e]&&(l=[])}}else if(e=c[2])this.onComment(e)}if(b.length>g)this.onText(b.substring(g,
b.length))}}})();
CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("\x3c",a)},openTagClose:function(a,d){d?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(a,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d));this._.output.push(" ",a,'\x3d"',d,'"')},closeTag:function(a){this._.output.push("\x3c/",a,"\x3e")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,
"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(a){var d=this._.output.join("");a&&this.reset();return d}}});"use strict";
(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,d=CKEDITOR.tools.indexOf(a,this),b=this.previous,c=this.next;b&&(b.next=c);c&&(c.previous=b);a.splice(d,1);this.parent=null},replaceWith:function(a){var d=this.parent.children,b=CKEDITOR.tools.indexOf(d,this),c=a.previous=this.previous,e=a.next=this.next;c&&(c.next=a);e&&(e.previous=a);d[b]=a;a.parent=this.parent;this.parent=null},insertAfter:function(a){var d=a.parent.children,
b=CKEDITOR.tools.indexOf(d,a),c=a.next;d.splice(b+1,0,this);this.next=a.next;this.previous=a;a.next=this;c&&(c.previous=this);this.parent=a.parent},insertBefore:function(a){var d=a.parent.children,b=CKEDITOR.tools.indexOf(d,a);d.splice(b,0,this);this.next=a;(this.previous=a.previous)&&(a.previous.next=this);a.previous=this;this.parent=a.parent},getAscendant:function(a){var d="function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a},b=this.parent;for(;b&&
b.type==CKEDITOR.NODE_ELEMENT;){if(d(b))return b;b=b.parent}return null},wrapWith:function(a){this.replaceWith(a);a.add(this);return a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:!1}};
CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,d){var b=this.value;if(!(b=a.onComment(d,b,this)))return this.remove(),!1;if("string"!=typeof b)return this.replaceWith(b),!1;this.value=b;return!0},writeHtml:function(a,d){d&&this.filter(d);a.comment(this.value)}});"use strict";
(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,d){if(!(this.value=a.onText(d,this.value,this)))return this.remove(),!1},writeHtml:function(a,d){d&&this.filter(d);a.text(this.value)}})})();"use strict";
(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};
(function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var d=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},c=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),e={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=
function(g,l,k){function n(a){var b;if(0<y.length)for(var c=0;c<y.length;c++){var d=y[c],h=d.name,e=CKEDITOR.dtd[h],g=t.name&&CKEDITOR.dtd[t.name];g&&!g[h]||a&&e&&!e[a]&&CKEDITOR.dtd[a]?h==t.name&&(x(t,t.parent,1),c--):(b||(w(),b=1),d=d.clone(),d.parent=t,t=d,y.splice(c,1),c--)}}function w(){for(;F.length;)x(F.shift(),t)}function f(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b=a.children.length,c=a.children[b-1],d;c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?
c.value=d:a.children.length=b-1)}}function x(b,c,d){c=c||t||q;var e=t;void 0===b.previous&&(A(c,b)&&(t=c,B.onTagOpen(k,{}),b.returnPoint=c=t),f(b),a(b)&&!b.children.length||c.add(b),"pre"==b.name&&(h=!1),"textarea"==b.name&&(z=!1));b.returnPoint?(t=b.returnPoint,delete b.returnPoint):t=d?c:e}function A(a,b){if((a==q||"body"==a.name)&&k&&(!a.name||CKEDITOR.dtd[a.name][k])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&
!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function u(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var B=new CKEDITOR.htmlParser,q=l instanceof CKEDITOR.htmlParser.element?l:"string"==typeof l?new CKEDITOR.htmlParser.element(l):new CKEDITOR.htmlParser.fragment,y=[],F=[],t=q,z="textarea"==q.name,h="pre"==q.name;B.onTagOpen=function(e,m,g,f){m=new CKEDITOR.htmlParser.element(e,m);m.isUnknown&&g&&(m.isEmpty=!0);m.isOptionalClose=f;
if(a(m))y.push(m);else{if("pre"==e)h=!0;else{if("br"==e&&h){t.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==e&&(z=!0)}if("br"==e)F.push(m);else{for(;!(f=(g=t.name)?CKEDITOR.dtd[g]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c,m.isUnknown||t.isUnknown||f[e]);)if(t.isOptionalClose)B.onTagClose(g);else if(e in b&&g in b)g=t.children,(g=g[g.length-1])&&"li"==g.name||x(g=new CKEDITOR.htmlParser.element("li"),t),!m.returnPoint&&(m.returnPoint=t),t=g;else if(e in CKEDITOR.dtd.$listItem&&
!u(e,g))B.onTagOpen("li"==e?"ul":"dl",{},0,1);else if(g in d&&!u(e,g))!m.returnPoint&&(m.returnPoint=t),t=t.parent;else if(g in CKEDITOR.dtd.$inline&&y.unshift(t),t.parent)x(t,t.parent,1);else{m.isOrphan=1;break}n(e);w();m.parent=t;m.isEmpty?x(m):t=m}}};B.onTagClose=function(a){for(var b=y.length-1;0<=b;b--)if(a==y[b].name){y.splice(b,1);return}for(var c=[],d=[],h=t;h!=q&&h.name!=a;)h._.isBlockLike||d.unshift(h),c.push(h),h=h.returnPoint||h.parent;if(h!=q){for(b=0;b<c.length;b++){var e=c[b];x(e,e.parent)}t=
h;h._.isBlockLike&&w();x(h,h.parent);h==t&&(t=t.parent);y=y.concat(d)}"body"==a&&(k=!1)};B.onText=function(a){if(!(t._.hasInlineStarted&&!F.length||h||z)&&(a=CKEDITOR.tools.ltrim(a),0===a.length))return;var b=t.name,g=b?CKEDITOR.dtd[b]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;if(!z&&!g["#"]&&b in d)B.onTagOpen(e[b]||""),B.onText(a);else{w();n();h||z||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));a=new CKEDITOR.htmlParser.text(a);if(A(t,a))this.onTagOpen(k,{},0,1);t.add(a)}};B.onCDATA=
function(a){t.add(new CKEDITOR.htmlParser.cdata(a))};B.onComment=function(a){w();n();t.add(new CKEDITOR.htmlParser.comment(a))};B.parse(g);for(w();t!=q;)x(t,t.parent,1);f(q);return q};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=0<b?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length)){this.children.pop();this.add(a);return}c.next=
a}a.previous=c;a.parent=this;this.children.splice(b,0,a);this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b);a.onRoot(b,this);this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id){c=this.getFilterContext(c);if(b&&!this.parent)a.onRoot(c,this);this.childrenFilteredBy=a.id;for(b=0;b<this.children.length;b++)!1===this.children[b].filter(a,
c)&&b--}},writeHtml:function(a,b){b&&this.filter(b);this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();if(c&&!this.parent&&b)b.onRoot(d,this);b&&this.filterChildren(b,!1,d);b=0;c=this.children;for(d=c.length;b<d;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.children;for(var e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},getFilterContext:function(a){return a||
{}}}})();"use strict";
(function(){function a(){this.rules=[]}function d(b,c,d,g){var l,k;for(l in c)(k=b[l])||(k=b[l]=new a),k.add(c[l],d,g)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;b&&this.addRules(b,10)},proto:{addRules:function(a,c){var e;"number"==typeof c?e=c:c&&"priority"in c&&(e=
c.priority);"number"!=typeof e&&(e=10);"object"!=typeof c&&(c={});a.elementNames&&this.elementNameRules.addMany(a.elementNames,e,c);a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,e,c);a.elements&&d(this.elementsRules,a.elements,e,c);a.attributes&&d(this.attributesRules,a.attributes,e,c);a.text&&this.textRules.add(a.text,e,c);a.comment&&this.commentRules.add(a.comment,e,c);a.root&&this.rootRules.add(a.root,e,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,c){return this.elementNameRules.execOnName(a,
c)},onAttributeName:function(a,c){return this.attributeNameRules.execOnName(a,c)},onText:function(a,c,d){return this.textRules.exec(a,c,d)},onComment:function(a,c,d){return this.commentRules.exec(a,c,d)},onRoot:function(a,c){return this.rootRules.exec(a,c)},onElement:function(a,c){for(var d=[this.elementsRules["^"],this.elementsRules[c.name],this.elementsRules.$],g,l=0;3>l;l++)if(g=d[l]){g=g.exec(a,c,this);if(!1===g)return null;if(g&&g!=c)return this.onNode(a,g);if(c.parent&&!c.name)break}return c},
onNode:function(a,c){var d=c.type;return d==CKEDITOR.NODE_ELEMENT?this.onElement(a,c):d==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,c.value)):d==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,c.value)):null},onAttribute:function(a,c,d,g){return(d=this.attributesRules[d])?d.exec(a,g,c,this):g}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(a,c,d){this.rules.splice(this.findIndex(c),0,{value:a,priority:c,options:d})},addMany:function(a,
c,d){for(var g=[this.findIndex(c),0],l=0,k=a.length;l<k;l++)g.push({value:a[l],priority:c,options:d});this.rules.splice.apply(this.rules,g)},findIndex:function(a){for(var c=this.rules,d=c.length-1;0<=d&&a<c[d].priority;)d--;return d+1},exec:function(a,c){var d=c instanceof CKEDITOR.htmlParser.node||c instanceof CKEDITOR.htmlParser.fragment,g=Array.prototype.slice.call(arguments,1),l=this.rules,k=l.length,n,w,f,x;for(x=0;x<k;x++)if(d&&(n=c.type,w=c.name),f=l[x],!(a.nonEditable&&!f.options.applyToAll||
a.nestedEditable&&f.options.excludeNestedEditable)){f=f.value.apply(null,g);if(!1===f||d&&f&&(f.name!=w||f.type!=n))return f;null!=f&&(g[0]=c=f)}return c},execOnName:function(a,c){for(var d=0,g=this.rules,l=g.length,k;c&&d<l;d++)k=g[d],a.nonEditable&&!k.options.applyToAll||a.nestedEditable&&k.options.excludeNestedEditable||(c=c.replace(k.value[0],k.value[1]));return c}}})();
(function(){function a(a,d){function m(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function p(a,d){return function(h){if(h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=[],p=b(h),r,v;if(p)for(f(p,1)&&e.push(p);p;)g(p)&&(r=c(p))&&f(r)&&((v=c(r))&&!g(v)?e.push(r):(m(z).insertAfter(r),r.remove())),p=p.previous;for(p=0;p<e.length;p++)e[p].remove();if(e=!a||!1!==("function"==typeof d?d(h):d))z||CKEDITOR.env.needsBrFiller||
h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?z||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||h.name in CKEDITOR.dtd.tr||h.name in CKEDITOR.dtd.$listItem)?(e=b(h),e=!e||"form"==h.name&&"input"==e.name):e=!1:e=!1;e&&h.add(m(a))}}}function f(a,b){if((!z||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;return a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(y))&&(c.index&&((new CKEDITOR.htmlParser.text(a.value.substring(0,c.index))).insertBefore(a),
a.value=c[0]),!CKEDITOR.env.needsBrFiller&&z&&(!b||a.parent.name in v)||!z&&((c=a.previous)&&"br"==c.name||!c||g(c)))?!0:!1}var r={elements:{}},z="html"==d,v=CKEDITOR.tools.extend({},h),C;for(C in v)"#"in t[C]||delete v[C];for(C in v)r.elements[C]=p(z,a.config.fillEmptyBlocks);r.root=p(z,!1);r.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=b.attributes;if("data-cke-bogus"in d||"data-cke-eol"in d)delete d["data-cke-bogus"];else{for(d=b.next;d&&e(d);)d=
d.next;var h=c(b);!d&&g(b.parent)?l(b.parent,m(a)):g(d)&&h&&!g(h)&&m(a).insertBefore(d)}}}}(z);return r}function d(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function b(a){for(a=a.children[a.children.length-1];a&&e(a);)a=a.previous;return a}function c(a){for(a=a.previous;a&&e(a);)a=a.previous;return a}function e(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function g(a){return a&&
(a.type==CKEDITOR.NODE_ELEMENT&&a.name in h||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function l(a,b){var c=a.children[a.children.length-1];a.children.push(b);b.parent=a;c&&(c.next=b,b.previous=c)}function k(a){a=a.attributes;"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1);a.contenteditable="false"}function n(a){a=a.attributes;switch(a["data-cke-editable"]){case "true":a.contenteditable="true";break;case "1":delete a.contenteditable}}function w(a){return a.replace(G,
function(a,b,c){return"\x3c"+b+c.replace(H,function(a,b){return K.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+"\x3e"})}function f(a,b){return a.replace(b,function(a,b,c){0===a.indexOf("\x3ctextarea")&&(a=b+u(c).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(a)+"\x3c/cke:encoded\x3e"})}function x(a){return a.replace(Q,function(a,b){return decodeURIComponent(b)})}function A(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,
function(a){return"\x3c!--"+F+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"})}function u(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function B(a,b){var c=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function q(a,b){var c=[],d=b.config.protectedSource,h=b._.dataStore||(b._.dataStore=
{id:1}),e=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,d=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"\x3c!--{cke_tempcomment}"+(c.push(a)-1)+"--\x3e"});for(var p=0;p<d.length;p++)a=a.replace(d[p],function(a){a=a.replace(e,function(a,b,d){return c[d]});return/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(c.push(a)-1)+"--\x3e"});a=a.replace(e,function(a,b,d){return"\x3c!--"+F+(b?"{C}":
"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"--\x3e"});a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){h[h.id]=decodeURIComponent(b);return"{cke_protected_"+h.id++ +"}"})});return a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,h){return"\x3c"+c+d+"\x3e"+B(u(h),b)+"\x3c/"+c+"\x3e"})}CKEDITOR.htmlDataProcessor=function(b){var c,
h,e=this;this.editor=b;this.dataFilter=c=new CKEDITOR.htmlParser.filter;this.htmlFilter=h=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;c.addRules(p);c.addRules(m,{applyToAll:!0});c.addRules(a(b,"data"),{applyToAll:!0});h.addRules(C);h.addRules(r,{applyToAll:!0});h.addRules(a(b,"html"),{applyToAll:!0});b.on("toHtml",function(a){a=a.data;var c=a.dataValue,h,c=q(c,b),c=f(c,M),c=w(c),c=f(c,R),c=c.replace(v,"$1cke:$2"),c=c.replace(I,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),
c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");h=a.context||b.editable().getName();var e;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==h&&(h="div",c="\x3cpre\x3e"+c+"\x3c/pre\x3e",e=1);h=b.document.createElement(h);h.setHtml("a"+c);c=h.getHtml().substr(1);c=c.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");e&&(c=c.replace(/^<pre>|<\/pre>$/gi,""));c=c.replace(D,"$1$2");c=x(c);c=u(c);h=!1===a.fixForBody?!1:
d(a.enterMode,b.config.autoParagraph);c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,h);h&&(e=c,!e.children.length&&CKEDITOR.dtd[e.name][h]&&(h=new CKEDITOR.htmlParser.element(h),e.add(h)));a.dataValue=c},null,null,5);b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")},null,null,6);b.on("toHtml",function(a){a.data.dataValue.filterChildren(e.dataFilter,!0)},null,null,10);b.on("toHtml",function(a){a=a.data;var b=a.dataValue,
c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c);b=c.getHtml(!0);a.dataValue=A(b)},null,null,15);b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,""));a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,d(a.data.enterMode,b.config.autoParagraph))},null,null,5);b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(e.htmlFilter,!0)},null,null,10);b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,
!1,!0)},null,null,11);b.on("toDataFormat",function(a){var c=a.data.dataValue,d=e.writer;d.reset();c.writeChildrenHtml(d);c=d.getHtml(!0);c=u(c);c=B(c,b);a.data.dataValue=c},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var h=this.editor,e,p,m,g;b&&"object"==typeof b?(e=b.context,c=b.fixForBody,d=b.dontFilter,p=b.filter,m=b.enterMode,g=b.protectedWhitespaces):e=b;e||null===e||(e=h.editable().getName());return h.fire("toHtml",{dataValue:a,context:e,fixForBody:c,dontFilter:d,
filter:p||h.filter,enterMode:m||h.enterMode,protectedWhitespaces:g}).dataValue},toDataFormat:function(a,b){var c,d,h;b&&(c=b.context,d=b.filter,h=b.enterMode);c||null===c||(c=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:h||this.editor.enterMode}).dataValue}};var y=/(?:&nbsp;|\xa0)$/,F="{cke_protected}",t=CKEDITOR.dtd,z="caption colgroup col thead tfoot tbody".split(" "),h=CKEDITOR.tools.extend({},t.$blockLimit,
t.$block),p={elements:{input:k,textarea:k}},m={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},C={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c);b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},r={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,
""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c=["name","href","src"],d,h=0;h<c.length;h++)d="data-cke-saved-"+c[h],d in b&&delete b[c[h]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(z,a.name),d=CKEDITOR.tools.indexOf(z,b.name));-1<c&&-1<d&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1);return c>d?
1:-1})},param:function(a){a.children=[];a.isEmpty=!0;return a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable;delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck;delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value));a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&l(a,b=new CKEDITOR.htmlParser.text);
b.value=a.attributes["data-cke-title"]||""},input:n,textarea:n},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(r.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var G=/<(a|area|img|input|source)\b([^>]*)>/gi,H=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/^(href|src|name)$/i,R=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,
M=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,Q=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,v=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,D=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,I=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";
CKEDITOR.htmlParser.element=function(a,d){this.name=a;this.attributes=d||{};this.children=[];var b=a||"",c=b.match(/^cke:(.*)/);c&&(b=c[1]);b=!!(CKEDITOR.dtd.$nonBodyContent[b]||CKEDITOR.dtd.$block[b]||CKEDITOR.dtd.$listItem[b]||CKEDITOR.dtd.$tableContent[b]||CKEDITOR.dtd.$nonEditable[b]||"br"==b);this.isEmpty=!!CKEDITOR.dtd.$empty[a];this.isUnknown=!CKEDITOR.dtd[a];this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b}};
CKEDITOR.htmlParser.cssStyle=function(a){var d={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,e){"font-family"==c&&(e=e.replace(/["']/g,""));d[c.toLowerCase()]=e});return{rules:d,populate:function(a){var c=this.toString();c&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",c):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=c:a.style=c)},toString:function(){var a=[],c;
for(c in d)d[c]&&a.push(c,":",d[c],";");return a.join("")}}};
(function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var d=function(a,b){a=a[0];b=b[0];return a<b?-1:a>b?1:0},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var d=this,l,k;b=d.getFilterContext(b);if(b.off)return!0;
if(!d.parent)a.onRoot(b,d);for(;;){l=d.name;if(!(k=a.onElementName(b,l)))return this.remove(),!1;d.name=k;if(!(d=a.onElement(b,d)))return this.remove(),!1;if(d!==this)return this.replaceWith(d),!1;if(d.name==l)break;if(d.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(d),!1;if(!d.name)return this.replaceWithChildren(),!1}l=d.attributes;var n,w;for(n in l){for(k=l[n];;)if(w=a.onAttributeName(b,n))if(w!=n)delete l[n],n=w;else break;else{delete l[n];break}w&&(!1===(k=a.onAttribute(b,d,w,k))?delete l[w]:
l[w]=k)}d.isEmpty||this.filterChildren(a,!1,b);return!0},filterChildren:b.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var g=this.name,l=[],k=this.attributes,n,w;a.openTag(g,k);for(n in k)l.push([n,k[n]]);a.sortAttributes&&l.sort(d);n=0;for(w=l.length;n<w;n++)k=l[n],a.attribute(k[0],k[1]);a.openTagClose(g,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(g)},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);
this.remove()},forEach:b.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var d=0,g=this.children.length;d<g;++d)if(b(this.children[d]))return this.children[d];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(a);return a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,d=a.length;b<d;++b)a[b].parent=this},getOuterHtml:function(){var a=
new CKEDITOR.htmlParser.basicWriter;this.writeHtml(a);return a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),d=this.clone(),l=0;l<b.length;++l)b[l].parent=d;d.children=b;b[0]&&(b[0].previous=null);0<a&&(this.children[a-1].next=null);this.parent.add(d,this.getIndex()+1);return d},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=
CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?(new RegExp("(?:^|\\s)"+a+"(?\x3d\\s|$)")).test(b):!1},getFilterContext:function(a){var b=[];a||(a={off:!1,nonEditable:!1,nestedEditable:!1});a.off||"off"!=this.attributes["data-cke-processor"]||b.push("off",!0);a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&
"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0);if(b.length){a=CKEDITOR.tools.copy(a);for(var d=0;d<b.length;d+=2)a[b[d]]=b[d+1]}return a}},!0)})();
(function(){var a={},d=/{([^}]+)}/g,b=/([\\'])/g,c=/\n/g,e=/\r/g;CKEDITOR.template=function(g){if(a[g])this.output=a[g];else{var l=g.replace(b,"\\$1").replace(c,"\\n").replace(e,"\\r").replace(d,function(a,b){return"',data['"+b+"']\x3d\x3dundefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[g]=Function("data","buffer","return buffer?buffer.push('"+l+"'):['"+l+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);
CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))});a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,a)};CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};
(function(){var a={};CKEDITOR.addTemplate=function(d,b){var c=a[d];if(c)return c;c={name:d,source:b};CKEDITOR.fire("template",c);return a[d]=new CKEDITOR.template(c.source)};CKEDITOR.getTemplate=function(d){return a[d]}})();(function(){var a=[];CKEDITOR.addCss=function(d){a.push(d)};CKEDITOR.getCss=function(){return a.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;
CKEDITOR.TRISTATE_DISABLED=0;
(function(){CKEDITOR.inline=function(a,d){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var b=new CKEDITOR.editor(d,a,CKEDITOR.ELEMENT_MODE_INLINE),c=a.is("textarea")?a:null;c?(b.setData(c.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!b.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+c.getValue()+"\x3c/div\x3e",CKEDITOR.document),
a.insertAfter(c),c.hide(),c.$.form&&b._attachToForm()):b.setData(a.getHtml(),null,!0);b.on("loaded",function(){b.fire("uiReady");b.editable(a);b.container=a;b.ui.contentsElement=a;b.setData(b.getData(1));b.resetDirty();b.fire("contentDom");b.mode="wysiwyg";b.fire("mode");b.status="ready";b.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,b)},null,null,1E4);b.on("destroy",function(){c&&(b.container.clearCustomData(),b.container.remove(),c.show());b.element.clearCustomData();delete b.element});
return b};CKEDITOR.inlineAll=function(){var a,d,b;for(b in CKEDITOR.dtd.$editable)for(var c=CKEDITOR.document.getElementsByTag(b),e=0,g=c.count();e<g;e++)a=c.getItem(e),"true"==a.getAttribute("contenteditable")&&(d={element:a,config:{}},!1!==CKEDITOR.fire("inline",d)&&CKEDITOR.inline(a,d.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";
(function(){function a(a,e,g,l){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var k=new CKEDITOR.editor(e,a,l);l==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),k._.required=a.hasAttribute("required"),a.removeAttribute("required"));g&&k.setData(g,null,!0);k.on("loaded",function(){b(k);l==CKEDITOR.ELEMENT_MODE_REPLACE&&k.config.autoUpdateElement&&
a.$.form&&k._attachToForm();k.setMode(k.config.startupMode,function(){k.resetDirty();k.status="ready";k.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,k)})});k.on("destroy",d);return k}function d(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove());b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function b(a){var b=a.name,d=a.element,l=a.elementMode,k=
a.fire("uiSpace",{space:"top",html:""}).html,n=a.fire("uiSpace",{space:"bottom",html:""}).html,w=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),
b=CKEDITOR.dom.element.createFromHtml(w.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:k?'\x3cspan id\x3d"'+a.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+k+"\x3c/span\x3e":"",contentId:a.ui.spaceId("contents"),bottomHtml:n?'\x3cspan id\x3d"'+a.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+n+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));l==CKEDITOR.ELEMENT_MODE_REPLACE?
(d.hide(),b.insertAfter(d)):d.append(b);a.container=b;a.ui.contentsElement=a.ui.space("contents");k&&a.ui.space("top").unselectable();n&&a.ui.space("bottom").unselectable();d=a.config.width;l=a.config.height;d&&b.setStyle("width",CKEDITOR.tools.cssLength(d));l&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(l));b.disableContextMenu();CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()});a.fireOnce("uiReady")}CKEDITOR.replace=function(b,d){return a(b,d,null,CKEDITOR.ELEMENT_MODE_REPLACE)};
CKEDITOR.appendTo=function(b,d,g){return a(b,d,g,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var d=null,l=a[b];if(l.name||l.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(l.className))continue}else if("function"==typeof arguments[0]&&(d={},!1===arguments[0](l,d)))continue;this.replace(l,d)}}};CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes=
{}))[a]=b};CKEDITOR.editor.prototype.setMode=function(a,b){var d=this,l=this._.modes;if(a!=d.mode&&l&&l[a]){d.fire("beforeSetMode",a);if(d.mode){var k=d.checkDirty(),l=d._.previousModeData,n,w=0;d.fire("beforeModeUnload");d.editable(0);d._.previousMode=d.mode;d._.previousModeData=n=d.getData(1);"source"==d.mode&&l==n&&(d.fire("lockSnapshot",{forceUpdate:!0}),w=1);d.ui.space("contents").setHtml("");d.mode=""}else d._.previousModeData=d.getData(1);this._.modes[a](function(){d.mode=a;void 0!==k&&!k&&
d.resetDirty();w?d.fire("unlockSnapshot"):"wysiwyg"==a&&d.fire("saveSnapshot");setTimeout(function(){d.fire("mode");b&&b.call(d)},0)})}};CKEDITOR.editor.prototype.resize=function(a,b,d,l){var k=this.container,n=this.ui.space("contents"),w=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;l=l?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):k;l.setSize("width",a,!0);w&&(w.style.width="1%");var f=(l.$.offsetHeight||0)-(n.$.clientHeight||
0),k=Math.max(b-(d?0:f),0);b=d?b+f:b;n.setStyle("height",k+"px");w&&(w.style.width="100%");this.fire("resize",{outerHeight:b,contentsHeight:k,outerWidth:a||l.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";
(function(){function a(a){var b=a.editor,e=a.data.path,m=e.blockLimit,f=a.data.selection,r=f.getRanges()[0],g;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(f=d(f,e))f.appendBogus(),g=CKEDITOR.env.ie;l(b,e.block,m)&&r.collapsed&&!r.getCommonAncestor().isReadOnly()&&(e=r.clone(),e.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),m=new CKEDITOR.dom.walker(e),m.guard=function(a){return!c(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!m.checkForward()||e.checkStartOfBlock()&&e.checkEndOfBlock())&&
(b=r.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(c))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),g=1,a.cancel());g&&r.select()}function d(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,e=d&&d.getLast(c);if(!(!d||!d.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||d.is("pre")||d.getBogus()))return d}function b(a){var b=a.data.getTarget();b.is("input")&&
(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function c(a){return f(a)&&x(a)}function e(a,b){return function(c){var d=c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget;(d=d&&d.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(d):null)&&(b.equals(d)||b.contains(d))||a.call(this,c)}}function g(a){function b(a){return function(b,h){h&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(f)&&(d=b);if(!(h||!c(b)||a&&u(b)))return!1}}var d,e=a.getRanges()[0];a=a.root;
var f={table:1,ul:1,ol:1,dl:1};if(e.startPath().contains(f)){var r=e.clone();r.collapse(1);r.setStartAt(a,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(r);a.guard=b();a.checkBackward();if(d)return r=e.clone(),r.collapse(),r.setEndAt(d,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(r),a.guard=b(!0),d=!1,a.checkForward(),d}return null}function l(a,b,c){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable"))}
function k(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function n(a){var b=a.editor;b.getSelection().scrollIntoView();setTimeout(function(){b.fire("saveSnapshot")},0)}function w(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b);this.editor=a;
this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a))){a.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b;}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,
b){var c=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=e(b,this),c[0]=a,c[1]=b);return CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);this._.listeners.push(b);return b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a=
this._.attrChanges,b,c;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertText:function(a){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(a),
"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var d=this.editor;d.focus();d.fire("saveSnapshot");c||(c=d.getSelection().getRanges()[0]);q(this,b||"html",a,c);c.select();n(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,c){q(this,c||"html",a,b);this.editor.fire("afterInsertHtml",
{intoRange:b})},insertElement:function(a,b){var d=this.editor;d.focus();d.fire("saveSnapshot");var e=d.activeEnterMode,d=d.getSelection(),f=a.getName(),f=CKEDITOR.dtd.$block[f];b||(b=d.getRanges()[0]);this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return c(a)&&!u(a)}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?b.moveToElementEditStart(f):b.moveToElementEditEnd(a):f||e==CKEDITOR.ENTER_BR||(f=b.fixBlock(!0,
e==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(f))));d.selectRanges([b]);n(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;b.deleteContents(1);b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&y(b);var g,l;if(f)for(;(g=b.getCommonAncestor(0,1))&&(l=CKEDITOR.dtd[g.getName()])&&
(!l||!l[e]);)g.getName()in CKEDITOR.dtd.span?b.splitElement(g):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());b.insertNode(a);return!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a));this.setHtml(a);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();a||(b=this.editor.dataProcessor.toDataFormat(b));
return b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");this.status="detached";var a=this.editor;this._.detach();delete a.document;delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var b=c.getDocument().$,d=b.getSelection(),h;a:if(d.anchorNode&&d.anchorNode==c.$)h=!0;else{if(CKEDITOR.env.webkit&&(h=c.getDocument().getActive())&&h.equals(c)&&!d.anchorNode){h=
!0;break a}h=void 0}h&&(h=new CKEDITOR.dom.range(c),h.moveToElementEditStart(c),b=b.createRange(),b.setStart(h.startContainer.$,h.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}function b(){var a=c.getDocument().$,d=a.selection,h=c.getDocument().getActive();"None"==d.type&&h.equals(c)&&(d=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),d.moveToElementEditStart(c),d=d.startContainer,d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),a.moveToElementText(d.$),a.collapse(!0),a.select())}
var c=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),b());else if(this.hasFocus)this.focus(),a();else this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){if(a.collapsed)return new CKEDITOR.dom.documentFragment(a.document);a={doc:this.getDocument(),range:a.clone()};F.eol.detect(a,this);F.bogus.exclude(a);F.cell.shrink(a);a.fragment=a.range.cloneContents();F.tree.rebuild(a,this);F.eol.fix(a,this);return new CKEDITOR.dom.documentFragment(a.fragment.$)},
extractHtmlFromRange:function(a,b){var c=t,d={range:a,doc:a.document},e=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),e;a.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.table.detectPurge(d);d.bookmark=a.createBookmark();delete d.range;var f=this.editor.createRange();f.moveToPosition(d.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);d.targetBookmark=f.createBookmark();c.list.detectMerge(d,this);c.table.detectRanges(d,this);c.block.detectMerge(d,this);d.tableContentsRanges?(c.table.deleteRanges(d),
a.moveToBookmark(d.bookmark),d.range=a):(a.moveToBookmark(d.bookmark),d.range=a,a.extractContents(c.detectExtractMerge(d)));a.moveToBookmark(d.targetBookmark);a.optimize();c.fixUneditableRangePosition(a);c.list.merge(d,this);c.table.purge(d,this);c.block.merge(d,this);if(b){c=a.startPath();if(d=a.checkStartOfBlock()&&a.checkEndOfBlock()&&c.block&&!a.root.equals(c.block)){a:{var d=c.block.getElementsByTag("span"),f=0,g;if(d)for(;g=d.getItem(f++);)if(!x(g)){d=!0;break a}d=!1}d=!d}d&&(a.moveToPosition(c.block,
CKEDITOR.POSITION_BEFORE_START),c.block.remove())}else c.autoParagraph(this.editor,a),A(a.startContainer)&&a.startContainer.appendBogus();a.startContainer.mergeSiblings();return e},setup:function(){var a=this.editor;this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(B,function(a,b){return b}));a.setData(b,null,1)},this);this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this);this.attachListener(a,
"afterSetData",function(){this.setData(a.getData(1))},this);this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this);this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this);this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this);this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this);this.attachListener(a,"insertText",
function(a){this.insertText(a.data)},this);this.setReadOnly(a.readOnly);this.attachClass("cke_editable");a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+a.config.contentsLangDirection);a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly;a.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=
!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);a.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",a.tabIndex);if(!this.is("textarea")){a.document=this.getDocument();a.window=this.getWindow();var d=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var e=a.config.contentsLangDirection;this.getDirection(1)!=
e&&this.changeAttr("dir",e);var m=CKEDITOR.getCss();m&&(e=d.getHead(),e.getCustomData("stylesheet")||(m=d.appendStyleText(m),m=new CKEDITOR.dom.element(m.ownerNode||m.owningElement),e.setCustomData("stylesheet",m),m.data("cke-temp",1)));e=d.getCustomData("stylesheet_ref")||0;d.setCustomData("stylesheet_ref",e+1);this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling);this.attachListener(this,"click",function(a){a=a.data;var b=(new CKEDITOR.dom.elementPath(a.getTarget(),this)).contains("a");
b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var l={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c=b.data.domEvent.getKey(),d;if(c in l){b=a.getSelection();var h,e=b.getRanges()[0],m=e.startPath(),p,v,k,c=8==c;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(h=b.getSelectedElement())||(h=g(b))?(a.fire("saveSnapshot"),e.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START),h.remove(),e.select(),a.fire("saveSnapshot"),d=1):e.collapsed&&((p=m.block)&&(k=p[c?"getPrevious":
"getNext"](f))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("table")&&e[c?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),e[c?"checkEndOfBlock":"checkStartOfBlock"]()&&p.remove(),e["moveToElementEdit"+(c?"End":"Start")](k),e.select(),a.fire("saveSnapshot"),d=1):m.blockLimit&&m.blockLimit.is("td")&&(v=m.blockLimit.getAscendant("table"))&&e.checkBoundaryOfElement(v,c?CKEDITOR.START:CKEDITOR.END)&&(k=v[c?"getPrevious":"getNext"](f))?(a.fire("saveSnapshot"),e["moveToElementEdit"+(c?"End":"Start")](k),
e.checkStartOfBlock()&&e.checkEndOfBlock()?k.remove():e.select(),a.fire("saveSnapshot"),d=1):(v=m.contains(["td","th","caption"]))&&e.checkBoundaryOfElement(v,c?CKEDITOR.START:CKEDITOR.END)&&(d=1))}return!d});a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in l&&!this.getFirst(c)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())});this.attachListener(this,"dblclick",function(b){if(a.readOnly)return!1;
b={element:b.data.getTarget()};a.fire("doubleclick",b)});CKEDITOR.env.ie&&this.attachListener(this,"click",b);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&a.getSelection().selectElement(b)});
CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(B,""))){var c=a.createRange();c.moveToElementEditStart(b);c.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(a,
"key",function(b){if(a.readOnly)return!0;b=b.data.domEvent.getKey();if(b in l){var c=8==b,d=a.getSelection().getRanges()[0];b=d.startPath();if(d.collapsed)a:{var h=b.block;if(h&&d[c?"checkStartOfBlock":"checkEndOfBlock"]()&&d.moveToClosestEditablePosition(h,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var e=d.startContainer.getChild(d.startOffset-(c?1:0));if(e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("hr")){a.fire("saveSnapshot");e.remove();b=!0;break a}}d=d.startPath().block;if(!d||
d&&d.contains(h))b=void 0;else{a.fire("saveSnapshot");var m;(m=(c?d:h).getBogus())&&m.remove();m=a.getSelection();e=m.createBookmarks();(c?h:d).moveChildren(c?d:h,!1);b.lastElement.mergeSiblings();w(h,d,!c);m.selectBookmarks(e);b=!0}}else b=!1}else c=d,m=b.block,d=c.endPath().block,m&&d&&!m.equals(d)?(a.fire("saveSnapshot"),(h=m.getBogus())&&h.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),c.deleteContents(),d.getParent()&&(d.moveChildren(m,!1),b.lastElement.mergeSiblings(),w(m,d,!0)),c=a.getSelection().getRanges()[0],
c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),b=!0):b=!1;if(!b)return;a.getSelection().scrollIntoView();a.fire("saveSnapshot");return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=
a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;if(b&&a)return 0;arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null));return b};CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",
function(a){a=a.data;a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))});c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})});CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=
b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox");a.changeAttr("aria-label",c);c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+e+'" class\x3d"cke_voice_label"\x3e'+d+"\x3c/span\x3e");c.append(d);a.changeAttr("aria-describedby",e)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");
var f=CKEDITOR.dom.walker.whitespaces(!0),x=CKEDITOR.dom.walker.bookmark(!1,!0),A=CKEDITOR.dom.walker.empty(),u=CKEDITOR.dom.walker.bogus(),B=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,q=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function b(c,d){var e,m,f,p,g=[],l=d.range.startContainer;e=d.range.startPath();for(var l=q[l.getName()],r=0,k=c.getChildren(),C=k.count(),G=-1,n=-1,w=0,K=e.contains(q.$list);r<
C;++r)e=k.getItem(r),a(e)?(f=e.getName(),K&&f in CKEDITOR.dtd.$list?g=g.concat(b(e,d)):(p=!!l[f],"br"!=f||!e.data("cke-eol")||r&&r!=C-1||(w=(m=r?g[r-1].node:k.getItem(r+1))&&(!a(m)||!m.is("br")),m=m&&a(m)&&q.$block[m.getName()]),-1!=G||p||(G=r),p||(n=r),g.push({isElement:1,isLineBreak:w,isBlock:e.isBlockBoundary(),hasBlockSibling:m,node:e,name:f,allowed:p}),m=w=0)):g.push({isElement:0,node:e,allowed:1});-1<G&&(g[G].firstNotAllowed=1);-1<n&&(g[n].lastNotAllowed=1);return g}function d(b,c){var e=[],
h=b.getChildren(),m=h.count(),f,g=0,l=q[c],r=!b.is(q.$inline)||b.is("br");for(r&&e.push(" ");g<m;g++)f=h.getItem(g),a(f)&&!f.is(l)?e=e.concat(d(f,c)):e.push(f);r&&e.push(" ");return e}function e(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function f(b){return b&&a(b)&&(b.is(q.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function g(b,c,d,e){var h=b.clone(),m,f;h.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);(m=(new CKEDITOR.dom.walker(h)).next())&&a(m)&&n[m.getName()]&&
(f=m.getPrevious())&&a(f)&&!f.getParent().equals(b.startContainer)&&d.contains(f)&&e.contains(m)&&m.isIdentical(f)&&(m.moveChildren(f),m.remove(),g(b,c,d,e))}function G(b,c){function d(b,c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var e=c.endContainer.getChild(c.endOffset),h=c.endContainer.getChild(c.endOffset-1);e&&d(e,b[b.length-1]);h&&d(h,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var q=CKEDITOR.dtd,n={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,
h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},w={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},M=CKEDITOR.tools.extend({},q.$inline);delete M.br;return function(n,v,D,I){var E=n.editor,L=!1;"unfiltered_html"==v&&(v="html",L=!0);if(!I.checkReadOnly()){var J=(new CKEDITOR.dom.elementPath(I.startContainer,I.root)).blockLimit||I.root;n={type:v,dontFilter:L,editable:n,editor:E,range:I,blockLimit:J,mergeCandidates:[],zombies:[]};v=n.range;I=n.mergeCandidates;var K,u;"text"==n.type&&v.shrink(CKEDITOR.SHRINK_ELEMENT,
!0,!1)&&(K=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",v.document),v.insertNode(K),v.setStartAfter(K));L=new CKEDITOR.dom.elementPath(v.startContainer);n.endPath=J=new CKEDITOR.dom.elementPath(v.endContainer);if(!v.collapsed){var E=J.block||J.blockLimit,y=v.getCommonAncestor();E&&!E.equals(y)&&!E.contains(y)&&v.checkEndOfBlock()&&n.zombies.push(E);v.deleteContents()}for(;(u=e(v))&&a(u)&&u.isBlockBoundary()&&L.contains(u);)v.moveToPosition(u,CKEDITOR.POSITION_BEFORE_END);
g(v,n.blockLimit,L,J);K&&(v.setEndBefore(K),v.collapse(),K.remove());K=v.startPath();if(E=K.contains(f,!1,1))v.splitElement(E),n.inlineStylesRoot=E,n.inlineStylesPeak=K.lastElement;K=v.createBookmark();(E=K.startNode.getPrevious(c))&&a(E)&&f(E)&&I.push(E);(E=K.startNode.getNext(c))&&a(E)&&f(E)&&I.push(E);for(E=K.startNode;(E=E.getParent())&&f(E);)I.push(E);v.moveToBookmark(K);if(K=D){K=n.range;if("text"==n.type&&n.inlineStylesRoot){u=n.inlineStylesPeak;v=u.getDocument().createText("{cke-peak}");for(I=
n.inlineStylesRoot.getParent();!u.equals(I);)v=v.appendTo(u.clone()),u=u.getParent();D=v.getOuterHtml().split("{cke-peak}").join(D)}u=n.blockLimit.getName();if(/^\s+|\s+$/.test(D)&&"span"in CKEDITOR.dtd[u]){var A='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';D=A+D+A}D=n.editor.dataProcessor.toHtml(D,{context:null,fixForBody:!1,protectedWhitespaces:!!A,dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode});u=K.document.createElement("body");u.setHtml(D);
A&&(u.getFirst().remove(),u.getLast().remove());if((A=K.startPath().block)&&(1!=A.getChildCount()||!A.getBogus()))a:{var x;if(1==u.getChildCount()&&a(x=u.getFirst())&&x.is(w)&&!x.hasAttribute("contenteditable")){A=x.getElementsByTag("*");K=0;for(I=A.count();K<I;K++)if(v=A.getItem(K),!v.is(M))break a;x.moveChildren(x.getParent(1));x.remove()}}n.dataWrapper=u;K=D}if(K){x=n.range;K=x.document;var t;u=n.blockLimit;I=0;var B,A=[],N,T;D=E=0;var F,W;v=x.startContainer;var L=n.endPath.elements[0],X,J=L.getPosition(v),
y=!!L.getCommonAncestor(v)&&J!=CKEDITOR.POSITION_IDENTICAL&&!(J&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);v=b(n.dataWrapper,n);for(G(v,x);I<v.length;I++){J=v[I];if(t=J.isLineBreak){t=x;F=u;var S=void 0,aa=void 0;J.hasBlockSibling?t=1:(S=t.startContainer.getAscendant(q.$block,1))&&S.is({div:1,p:1})?(aa=S.getPosition(F),aa==CKEDITOR.POSITION_IDENTICAL||aa==CKEDITOR.POSITION_CONTAINS?t=0:(F=t.splitElement(S),t.moveToPosition(F,CKEDITOR.POSITION_AFTER_START),t=1)):t=0}if(t)D=0<I;else{t=
x.startPath();!J.isBlock&&l(n.editor,t.block,t.blockLimit)&&(T=k(n.editor))&&(T=K.createElement(T),T.appendBogus(),x.insertNode(T),CKEDITOR.env.needsBrFiller&&(B=T.getBogus())&&B.remove(),x.moveToPosition(T,CKEDITOR.POSITION_BEFORE_END));if((t=x.startPath().block)&&!t.equals(N)){if(B=t.getBogus())B.remove(),A.push(t);N=t}J.firstNotAllowed&&(E=1);if(E&&J.isElement){t=x.startContainer;for(F=null;t&&!q[t.getName()][J.name];){if(t.equals(u)){t=null;break}F=t;t=t.getParent()}if(t)F&&(W=x.splitElement(F),
n.zombies.push(W),n.zombies.push(F));else{F=u.getName();X=!I;t=I==v.length-1;F=d(J.node,F);for(var S=[],aa=F.length,ca=0,ea=void 0,Y=0,U=-1;ca<aa;ca++)ea=F[ca]," "==ea?(Y||X&&!ca||(S.push(new CKEDITOR.dom.text(" ")),U=S.length),Y=1):(S.push(ea),Y=0);t&&U==S.length&&S.pop();X=S}}if(X){for(;t=X.pop();)x.insertNode(t);X=0}else x.insertNode(J.node);J.lastNotAllowed&&I<v.length-1&&((W=y?L:W)&&x.setEndAt(W,CKEDITOR.POSITION_AFTER_START),E=0);x.collapse()}}1!=v.length?B=!1:(B=v[0],B=B.isElement&&"false"==
B.node.getAttribute("contenteditable"));B&&(D=!0,t=v[0].node,x.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),x.setEndAt(t,CKEDITOR.POSITION_AFTER_END));n.dontMoveCaret=D;n.bogusNeededBlocks=A}B=n.range;var P;W=n.bogusNeededBlocks;for(X=B.createBookmark();N=n.zombies.pop();)N.getParent()&&(T=B.clone(),T.moveToElementEditStart(N),T.removeEmptyBlocksAtEnd());if(W)for(;N=W.pop();)CKEDITOR.env.needsBrFiller?N.appendBogus():N.append(B.document.createText(""));for(;N=n.mergeCandidates.pop();)N.mergeSiblings();
B.moveToBookmark(X);if(!n.dontMoveCaret){for(N=e(B);N&&a(N)&&!N.is(q.$empty);){if(N.isBlockBoundary())B.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END);else{if(f(N)&&N.getHtml().match(/(\s|&nbsp;)$/g)){P=null;break}P=B.clone();P.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END)}N=N.getLast(c)}P&&B.moveToRange(P)}}}}(),y=function(){function a(b){b=new CKEDITOR.dom.walker(b);b.guard=function(a,b){if(b)return!1;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$tableContent)};b.evaluator=function(a){return a.type==
CKEDITOR.NODE_ELEMENT};return b}function b(a,c,d){c=a.getDocument().createElement(c);a.append(c,d);return c}function c(a){var b=a.count(),d;for(b;0<b--;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&d.getChildCount()&&d.getFirst().remove())}return function(d){var e=d.startContainer,f=e.getAscendant("table",1),g=!1;c(f.getElementsByTag("td"));c(f.getElementsByTag("th"));f=d.clone();f.setStart(e,0);f=a(f).lastBackward();f||(f=d.clone(),f.setEndAt(e,
CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),g=!0);f||(f=e);f.is("table")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",g)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",g)),(e=f.getBogus())&&e.remove(),d.moveToPosition(f,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),F={eol:{detect:function(a,b){var c=a.range,d=c.clone(),e=c.clone(),f=new CKEDITOR.dom.elementPath(c.startContainer,b),g=new CKEDITOR.dom.elementPath(c.endContainer,
b);d.collapse(1);e.collapse();f.block&&d.checkBoundaryOfElement(f.block,CKEDITOR.END)&&(c.setStartAfter(f.block),a.prependEolBr=1);g.block&&e.checkBoundaryOfElement(g.block,CKEDITOR.START)&&(c.setEndBefore(g.block),a.appendEolBr=1)},fix:function(a,b){var c=b.getDocument(),d;a.appendEolBr&&(d=this.createEolBr(c),a.fragment.append(d));!a.prependEolBr||d&&!d.getPrevious()||a.fragment.append(this.createEolBr(c),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},
bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),c=b.startNode,b=b.endNode;!b||!u(b)||c&&c.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var c=a.range,d=c.getCommonAncestor(),e=new CKEDITOR.dom.elementPath(d,b),f=new CKEDITOR.dom.elementPath(c.startContainer,b),c=new CKEDITOR.dom.elementPath(c.endContainer,b),g;d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent());if(e.blockLimit.is({tr:1,table:1})){var l=e.contains("table").getParent();g=function(a){return!a.equals(l)}}else if(e.block&&
e.block.is(CKEDITOR.dtd.$listItem)&&(f=f.contains(CKEDITOR.dtd.$list),c=c.contains(CKEDITOR.dtd.$list),!f.equals(c))){var k=e.contains(CKEDITOR.dtd.$list).getParent();g=function(a){return!a.equals(k)}}g||(g=function(a){return!a.equals(e.block)&&!a.equals(e.blockLimit)});this.rebuildFragment(a,b,d,g)},rebuildFragment:function(a,b,c,d){for(var e;c&&!c.equals(b)&&d(c);)e=c.clone(0,1),a.fragment.appendTo(e),a.fragment=e,c=c.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,c=a.endContainer,
d=a.startOffset,e=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(c)&&b.is("tr")&&++d==e&&a.shrink(CKEDITOR.SHRINK_TEXT)}}},t=function(){function a(b,c){var d=b.getParent();if(d.is(CKEDITOR.dtd.$inline))b[c?"insertBefore":"insertAfter"](d)}function b(c,d,e){a(d);a(e,1);for(var h;h=e.getNext();)h.insertAfter(d),d=h;A(c)&&c.remove()}function c(a,b){var d=new CKEDITOR.dom.range(a);d.setStartAfter(b.startNode);d.setEndBefore(b.endNode);return d}return{list:{detectMerge:function(a,b){var d=c(b,a.bookmark),
e=d.startPath(),h=d.endPath(),f=e.contains(CKEDITOR.dtd.$list),g=h.contains(CKEDITOR.dtd.$list);a.mergeList=f&&g&&f.getParent().equals(g.getParent())&&!f.equals(g);a.mergeListItems=e.block&&h.block&&e.block.is(CKEDITOR.dtd.$listItem)&&h.block.is(CKEDITOR.dtd.$listItem);if(a.mergeList||a.mergeListItems)d=d.clone(),d.setStartBefore(a.bookmark.startNode),d.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=d.createBookmark()},merge:function(a,c){if(a.mergeListBookmark){var d=a.mergeListBookmark.startNode,
e=a.mergeListBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c);if(a.mergeList){var p=f.contains(CKEDITOR.dtd.$list),l=g.contains(CKEDITOR.dtd.$list);p.equals(l)||(l.moveChildren(p),l.remove())}a.mergeListItems&&(f=f.contains(CKEDITOR.dtd.$listItem),g=g.contains(CKEDITOR.dtd.$listItem),f.equals(g)||b(g,d,e));d.remove();e.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var c=new CKEDITOR.dom.range(b);c.setStartBefore(a.bookmark.startNode);
c.setEndAfter(a.bookmark.endNode);a.mergeBlockBookmark=c.createBookmark()}},merge:function(a,c){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var d=a.mergeBlockBookmark.startNode,e=a.mergeBlockBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c),f=f.block,g=g.block;f&&g&&!f.equals(g)&&b(g,d,e);d.remove();e.remove()}}},table:function(){function a(c){var e=[],h,f=new CKEDITOR.dom.walker(c),g=c.startPath().contains(d),m=c.endPath().contains(d),p={};f.guard=function(a,
f){if(a.type==CKEDITOR.NODE_ELEMENT){var l="visited_"+(f?"out":"in");if(a.getCustomData(l))return;CKEDITOR.dom.element.setMarker(p,a,l,1)}if(f&&g&&a.equals(g))h=c.clone(),h.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e.push(h);else if(!f&&m&&a.equals(m))h=c.clone(),h.setStartAt(m,CKEDITOR.POSITION_AFTER_START),e.push(h);else{if(l=!f)l=a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&(!g||b(a,g))&&(!m||b(a,m));l&&(h=c.clone(),h.selectNodeContents(a),e.push(h))}};f.lastForward();CKEDITOR.dom.element.clearAllMarkers(p);
return e}function b(a,c){var d=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,e=a.getPosition(c);return e===CKEDITOR.POSITION_IDENTICAL?!1:0===(e&d)}var d={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,c=b.clone();c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=new CKEDITOR.dom.walker(c),e=0;c.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&++e};c.checkForward();if(1<e){var c=b.startPath().contains("table"),h=b.endPath().contains("table");c&&h&&b.checkBoundaryOfElement(c,
CKEDITOR.START)&&b.checkBoundaryOfElement(h,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(c),b.setEndAfter(h),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(e,h){var f=c(h,e.bookmark),g=f.clone(),l,k,v=f.getCommonAncestor();v.is(CKEDITOR.dtd.$tableContent)&&!v.is(d)&&(v=v.getAscendant("table",!0));k=v;v=new CKEDITOR.dom.elementPath(f.startContainer,k);k=new CKEDITOR.dom.elementPath(f.endContainer,k);v=v.contains("table");k=k.contains("table");if(v||k)v&&k&&b(v,k)?(e.tableSurroundingRange=
g,g.setStartAt(v,CKEDITOR.POSITION_AFTER_END),g.setEndAt(k,CKEDITOR.POSITION_BEFORE_START),g=f.clone(),g.setEndAt(v,CKEDITOR.POSITION_AFTER_END),l=f.clone(),l.setStartAt(k,CKEDITOR.POSITION_BEFORE_START),l=a(g).concat(a(l))):v?k||(e.tableSurroundingRange=g,g.setStartAt(v,CKEDITOR.POSITION_AFTER_END),f.setEndAt(v,CKEDITOR.POSITION_AFTER_END)):(e.tableSurroundingRange=g,g.setEndAt(k,CKEDITOR.POSITION_BEFORE_START),f.setStartAt(k,CKEDITOR.POSITION_AFTER_START)),e.tableContentsRanges=l?l:a(f)},deleteRanges:function(a){for(var b;b=
a.tableContentsRanges.pop();)b.extractContents(),A(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,c=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode);c.moveToBookmark(a.purgeTableBookmark);c.deleteContents();a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&
a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var c=b.startPath(),d;l(a,c.block,c.blockLimit)&&(d=k(a))&&(d=b.document.createElement(d),d.appendBogus(),b.insertNode(d),b.moveToPosition(d,CKEDITOR.POSITION_AFTER_START))}}}()})();
(function(){function a(){var a=this._.fakeSelection,b;a&&(b=this.getSelection(1),b&&b.isHidden()||(a.reset(),a=0));if(!a&&(a=b||this.getSelection(1),!a||a.getType()==CKEDITOR.SELECTION_NONE))return;this.fire("selectionCheck",a);b=this.elementPath();b.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b}))}function d(){A=!0;x||(b.call(this),x=CKEDITOR.tools.setTimeout(b,
200,this))}function b(){x=null;A&&(CKEDITOR.tools.setTimeout(a,0,this),A=!1)}function c(a){return u(a)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(CKEDITOR.dtd.$empty)?!0:!1}function e(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var d=a.startContainer,e=a.getPreviousNode(c,null,d),f=a.getNextNode(c,null,d);return b(e)||b(f,1)||!(e||f||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()&&
d.getBogus())?!0:!1}function g(a){l(a,!1);var b=a.getDocument().createText(t);a.setCustomData("cke-fillingChar",b);return b}function l(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(!1!==b){var d=a.getDocument().getSelection().getNative(),e=d&&"None"!=d.type&&d.getRangeAt(0),f=t.length;if(c.getLength()>f&&e&&e.intersectsNode(c.$)){var g=[{node:d.anchorNode,offset:d.anchorOffset},{node:d.focusNode,offset:d.focusOffset}];d.anchorNode==c.$&&d.anchorOffset>f&&(g[0].offset-=f);d.focusNode==
c.$&&d.focusOffset>f&&(g[1].offset-=f)}}c.setText(k(c.getText(),1));g&&(c=a.getDocument().$,d=c.getSelection(),c=c.createRange(),c.setStart(g[0].node,g[0].offset),c.collapse(!0),d.removeAllRanges(),d.addRange(c),d.extend(g[1].node,g[1].offset))}}function k(a,b){return b?a.replace(z,function(a,b){return b?"":""}):a.replace(t,"")}function n(a){var b=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+
'"\x3e\x26nbsp;\x3c/div\x3e',a.document);a.fire("lockSnapshot");a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),e=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START);d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);c.selectRanges([d]);e.removeListener();a.fire("unlockSnapshot");a._.hiddenSelectionContainer=b}function w(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),
f=e[0];1==e.length&&f.collapsed&&(d=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}function f(a){for(var b=0;b<a.length;b++){var c=a[b];c.getCommonAncestor().isReadOnly()&&a.splice(b,1);if(!c.collapsed){if(c.startContainer.isReadOnly())for(var d=c.startContainer,e;d&&!((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)e&&"false"==
d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer;e=c.endContainer;var f=c.startOffset,g=c.endOffset,l=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(f>=d.getLength()?l.setStartAfter(d):l.setStartBefore(d));e&&e.type==CKEDITOR.NODE_TEXT&&(g?l.setEndAfter(e):l.setEndBefore(e));d=new CKEDITOR.dom.walker(l);d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();c.setEndBefore(d);c.collapsed&&a.splice(b--,1);d.getPosition(l.endContainer)&
CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e));return!0}return!1};d.next()}}return a}var x,A,u=CKEDITOR.dom.walker.invisible(1),B=function(){function a(b){return function(a){var c=a.editor.createRange();c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]);return!1}}function b(a){return function(b){var c=b.editor,d=c.createRange(),e;(e=d.moveToClosestEditablePosition(b.selected,a))||(e=d.moveToClosestEditablePosition(b.selected,!a));
e&&c.getSelection().selectRanges([d]);c.fire("saveSnapshot");b.selected.remove();e||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d]));c.fire("saveSnapshot");return!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(b){function c(){var a=e.getSelection();a&&a.removeAllRanges()}var e=b.editor;e.on("contentDom",function(){function b(){D=new CKEDITOR.dom.selection(e.getSelection());D.lock()}function c(){h.removeListener("mouseup",
c);k.removeListener("mouseup",c);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==f.$&&b.select()}var f=e.document,h=CKEDITOR.document,g=e.editable(),p=f.getBody(),k=f.getDocumentElement(),n=g.isInline(),v,D;CKEDITOR.env.gecko&&g.attachListener(g,"focus",function(a){a.removeListener();0!==v&&(a=e.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==g.$&&(a=e.createRange(),a.moveToElementEditStart(g),a.select())},null,null,-2);g.attachListener(g,
CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){v&&CKEDITOR.env.webkit&&(v=e._.previousActive&&e._.previousActive.equals(f.getActive()));e.unlockSelection(v);v=0},null,null,-1);g.attachListener(g,"mousedown",function(){v=0});if(CKEDITOR.env.ie||n)q?g.attachListener(g,"beforedeactivate",b,null,null,-1):g.attachListener(e,"selectionCheck",b,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){e.lockSelection(D);v=1},null,null,-1),g.attachListener(g,"mousedown",function(){v=
0});if(CKEDITOR.env.ie&&!n){var I;g.attachListener(g,"mousedown",function(a){2==a.data.$.button&&((a=e.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(I=e.window.getScrollPosition()))});g.attachListener(g,"mouseup",function(a){2==a.data.$.button&&I&&(e.document.$.documentElement.scrollLeft=I.x,e.document.$.documentElement.scrollTop=I.y);I=null});if("BackCompat"!=f.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)k.on("mousedown",function(a){function b(a){a=a.data.$;
if(d){var c=p.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY)}catch(e){}d.setEndPoint(0>f.compareEndPoints("StartToStart",c)?"EndToEnd":"StartToStart",c);d.select()}}function c(){k.removeListener("mousemove",b);h.removeListener("mouseup",c);k.removeListener("mouseup",c);d.select()}a=a.data;if(a.getTarget().is("html")&&a.$.y<k.$.clientHeight&&a.$.x<k.$.clientWidth){var d=p.$.createTextRange();try{d.moveToPoint(a.$.clientX,a.$.clientY)}catch(e){}var f=d.duplicate();k.on("mousemove",b);h.on("mouseup",
c);k.on("mouseup",c)}});if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)k.on("mousedown",function(a){a.data.getTarget().is("html")&&(h.on("mouseup",c),k.on("mouseup",c))})}}g.attachListener(g,"selectionchange",a,e);g.attachListener(g,"keyup",d,e);g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e.forceNextSelectionCheck();e.selectionChange(1)});if(n&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var E;g.attachListener(g,"mousedown",function(){E=1});g.attachListener(f.getDocumentElement(),
"mouseup",function(){E&&d.call(e);E=0})}else g.attachListener(CKEDITOR.env.ie?g:f.getDocumentElement(),"mouseup",d,e);CKEDITOR.env.webkit&&g.attachListener(f,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:l(g)}},null,null,-1);g.attachListener(g,"keydown",w(e),null,null,-1)});e.on("setData",function(){e.unlockSelection();CKEDITOR.env.webkit&&c()});e.on("contentDomUnload",function(){e.unlockSelection()});if(CKEDITOR.env.ie9Compat)e.on("beforeDestroy",
c,null,null,9);e.on("dataReady",function(){delete e._.fakeSelection;delete e._.hiddenSelectionContainer;e.selectionChange(1)});e.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=e.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=e.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100);e.on("key",function(a){if("wysiwyg"==e.mode){var b=e.getSelection();if(b.isFake){var c=
B[a.data.keyCode];if(c)return c({editor:e,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on("instanceReady",function(a){var b=a.editor;b.on("selectionChange",function(){var a=b.editable(),c=a.getCustomData("cke-fillingChar");c&&(c.getCustomData("ready")?l(a):c.setCustomData("ready",1))},null,null,-1);b.on("beforeSetMode",function(){l(b.editable())},null,null,-1);b.on("getSnapshot",function(a){a.data&&(a.data=k(a.data))},b,null,20);b.on("toDataFormat",
function(a){a.data.dataValue=k(a.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:d).call(this)};CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(a){a=a||this.getSelection(1);return a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&
a.lock(),this._.savedSelection=a,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():
new CKEDITOR.dom.selection(this.root);a.selectRanges([this]);return a};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var q="function"!=typeof window.getSelection,y=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var c=a instanceof CKEDITOR.dom.element;this.rev=b?b.rev:y++;this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument();this.root=c?a:this.document.getBody();this.isLocked=0;this._={cache:{}};if(b)return CKEDITOR.tools.extend(this._.cache,
b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var d,e;if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}if(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=
null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var F={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1},t=CKEDITOR.tools.repeat("",7),z=new RegExp(t+"( )?","g");CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:k,_createFillingCharSequenceNode:g,FILLING_CHAR_SEQUENCE:t});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==
this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=q?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:q?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT);"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT);c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=
CKEDITOR.SELECTION_TEXT,c=this.getNative();if(!c||!c.rangeCount)b=CKEDITOR.SELECTION_NONE;else if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&1==c.endOffset-c.startOffset&&F[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}return a.type=b},getRanges:function(){var a=q?function(){function a(b){return(new CKEDITOR.dom.node(b)).getIndex()}var b=function(b,c){b=b.duplicate();b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,
offset:0};for(var e=d.children,f,g,h=b.duplicate(),l=0,v=e.length-1,k=-1,m,E;l<=v;)if(k=Math.floor((l+v)/2),f=e[k],h.moveToElementText(f),m=h.compareEndPoints("StartToStart",b),0<m)v=k-1;else if(0>m)l=k+1;else return{container:d,offset:a(f)};if(-1==k||k==e.length-1&&0>m){h.moveToElementText(d);h.setEndPoint("StartToStart",b);h=h.text.replace(/(\r\n|\r)/g,"\n").length;e=d.childNodes;if(!h)return f=e[e.length-1],f.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};
for(d=e.length;0<h&&0<d;)g=e[--d],g.nodeType==CKEDITOR.NODE_TEXT&&(E=g,h-=g.nodeValue.length);return{container:E,offset:-h}}h.collapse(0<m?!0:!1);h.setEndPoint(0<m?"StartToStart":"EndToStart",b);h=h.text.replace(/(\r\n|\r)/g,"\n").length;if(!h)return{container:d,offset:a(f)+(0<m?0:1)};for(;0<h;)try{g=f[0<m?"previousSibling":"nextSibling"],g.nodeType==CKEDITOR.NODE_TEXT&&(h-=g.nodeValue.length,E=g),f=g}catch(n){return{container:d,offset:a(f)}}return{container:E,offset:0<m?-h:E.nodeValue.length+h}};
return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=
c.item(e),h=f.parentNode,g=0,a=new CKEDITOR.dom.range(this.root);g<h.childNodes.length&&h.childNodes[g]!=f;g++);a.setStart(new CKEDITOR.dom.node(h),g);a.setEnd(new CKEDITOR.dom.node(h),g+1);d.push(a)}return d}return[]}}():function(){var a=[],b,c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root);b.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset);b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset);a.push(b)}return a};
return function(b){var c=this._.cache,d=c.ranges;d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this)));return b?f(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=
c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);b=c.startContainer;if(b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;
var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a=b.getRanges()[0].clone(),c,d,e=2;e&&!((c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&F[c.getName()]&&(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=q?"Control"==b.type?"":b.createRange().text:
b.toString();return a.selectedText=b},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0;this.reset();a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={};this.isFake=
0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot");b.remove();a.fire("unlockSnapshot");!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=y++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a);b.setEndAfter(a);this.selectRanges([b])},selectRanges:function(a){var b=
this.root.editor,b=b&&b._.hiddenSelectionContainer;this.reset();if(b)for(var b=this.root,c,d=0;d<a.length;++d)c=a[d],c.endContainer.equals(b)&&(c.endOffset=Math.min(c.endOffset,b.getChildCount()));if(a.length)if(this.isLocked){var f=CKEDITOR.document.getActive();this.unlock();this.selectRanges(a);this.lock();f&&!f.equals(this.root)&&f.focus()}else{var k;a:{var n,w;if(1==a.length&&!(w=a[0]).collapsed&&(k=w.getEnclosedNode())&&k.type==CKEDITOR.NODE_ELEMENT&&(w=w.clone(),w.shrink(CKEDITOR.SHRINK_ELEMENT,
!0),(n=w.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&(k=n),"false"==k.getAttribute("contenteditable")))break a;k=void 0}if(k)this.fake(k);else{if(q){w=CKEDITOR.dom.walker.whitespaces(!0);n=/\ufeff|\u00a0/;b={table:1,tbody:1,tr:1};1<a.length&&(k=a[a.length-1],a[0].setEnd(k.endContainer,k.endOffset));k=a[0];a=k.collapsed;var u,t,x;if((c=k.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in F&&(!c.is("a")||!c.getText()))try{x=c.$.createControlRange();x.addElement(c.$);x.select();
return}catch(v){}if(k.startContainer.type==CKEDITOR.NODE_ELEMENT&&k.startContainer.getName()in b||k.endContainer.type==CKEDITOR.NODE_ELEMENT&&k.endContainer.getName()in b)k.shrink(CKEDITOR.NODE_ELEMENT,!0),a=k.collapsed;x=k.createBookmark();b=x.startNode;a||(f=x.endNode);x=k.document.$.body.createTextRange();x.moveToElementText(b.$);x.moveStart("character",1);f?(n=k.document.$.body.createTextRange(),n.moveToElementText(f.$),x.setEndPoint("EndToEnd",n),x.moveEnd("character",-1)):(u=b.getNext(w),t=
b.hasAscendant("pre"),u=!(u&&u.getText&&u.getText().match(n))&&(t||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br")),t=k.document.createElement("span"),t.setHtml("\x26#65279;"),t.insertBefore(b),u&&k.document.createText("").insertBefore(b));k.setStartBefore(b);b.remove();a?(u?(x.moveStart("character",-1),x.select(),k.document.$.selection.clear()):x.select(),k.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove()):(k.setEndBefore(f),f.remove(),x.select())}else{f=this.getNative();
if(!f)return;this.removeAllRanges();for(x=0;x<a.length;x++){if(x<a.length-1&&(u=a[x],t=a[x+1],n=u.clone(),n.setStart(u.endContainer,u.endOffset),n.setEnd(t.startContainer,t.startOffset),!n.collapsed&&(n.shrink(CKEDITOR.NODE_ELEMENT,!0),k=n.getCommonAncestor(),n=n.getEnclosedNode(),k.isReadOnly()||n&&n.isReadOnly()))){t.setStart(u.startContainer,u.startOffset);a.splice(x--,1);continue}k=a[x];t=this.document.$.createRange();k.collapsed&&CKEDITOR.env.webkit&&e(k)&&(n=g(this.root),k.insertNode(n),(u=
n.getNext())&&!n.getPrevious()&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()?(l(this.root),k.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START)):k.moveToPosition(n,CKEDITOR.POSITION_AFTER_END));t.setStart(k.startContainer.$,k.startOffset);try{t.setEnd(k.endContainer.$,k.endOffset)}catch(D){if(0<=D.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))k.collapse(1),t.setEnd(k.endContainer.$,k.endOffset);else throw D;}f.addRange(t)}}this.reset();this.root.fire("selectionchange")}}},fake:function(a){var b=
this.root.editor;this.reset();n(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a);d.setEndAfter(a);c.ranges=new CKEDITOR.dom.rangeList(d);c.selectedElement=c.startElement=a;c.type=CKEDITOR.SELECTION_ELEMENT;c.selectedText=c.nativeSel=null;this.isFake=1;this.rev=y++;b._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent());return!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){a=
this.getRanges().createBookmarks(a);this.isFake&&(a.isFake=1);return a},createBookmarks2:function(a){a=this.getRanges().createBookmarks2(a);this.isFake&&(a.isFake=1);return a},selectBookmarks:function(a){for(var b=[],c,d=0;d<a.length;d++){var e=new CKEDITOR.dom.range(this.root);e.moveToBookmark(a[d]);b.push(e)}a.isFake&&(c=b[0].getEnclosedNode(),c&&c.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),a.isFake=0));a.isFake?this.fake(c):this.selectRanges(b);return this},getCommonAncestor:function(){var a=
this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[q?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;
(function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function d(a,b,c,d){return(a.getPosition(b)|d)==d&&(!c.childRule||c.childRule(a))}function b(c){var f=c.document;if(c.collapsed)f=F(this,f),c.insertNode(f),c.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END);else{var g=this.element,h=this._.definition,l,k=h.ignoreReadonly,m=k||h.includeReadonly;null==
m&&(m=c.root.getCustomData("cke_includeReadonly"));var n=CKEDITOR.dtd[g];n||(l=!0,n=CKEDITOR.dtd.span);c.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.trim();var p=c.createBookmark(),q=p.startNode,w=p.endNode,r=q,u;if(!k){var x=c.getCommonAncestor(),k=a(q,x),x=a(w,x);k&&(r=k.getNextSourceNode(!0));x&&(w=x)}for(r.getPosition(w)==CKEDITOR.POSITION_FOLLOWING&&(r=0);r;){k=!1;if(r.equals(w))r=null,k=!0;else{var t=r.type==CKEDITOR.NODE_ELEMENT?r.getName():null,x=t&&"false"==r.getAttribute("contentEditable"),y=t&&
r.getAttribute("data-nostyle");if(t&&r.data("cke-bookmark")){r=r.getNextSourceNode(!0);continue}if(x&&m&&CKEDITOR.dtd.$block[t])for(var A=r,z=e(A),C=void 0,G=z.length,H=0,A=G&&new CKEDITOR.dom.range(A.getDocument());H<G;++H){var C=z[H],R=CKEDITOR.filter.instances[C.data("cke-filter")];if(R?R.check(this):1)A.selectNodeContents(C),b.call(this,A)}z=t?!n[t]||y?0:x&&!m?0:d(r,w,h,M):1;if(z)if(C=r.getParent(),z=h,G=g,H=l,!C||!(C.getDtd()||CKEDITOR.dtd.span)[G]&&!H||z.parentRule&&!z.parentRule(C))k=!0;else{if(u||
t&&CKEDITOR.dtd.$removeEmpty[t]&&(r.getPosition(w)|M)!=M||(u=c.clone(),u.setStartBefore(r)),t=r.type,t==CKEDITOR.NODE_TEXT||x||t==CKEDITOR.NODE_ELEMENT&&!r.getChildCount()){for(var t=r,Y;(k=!t.getNext(K))&&(Y=t.getParent(),n[Y.getName()])&&d(Y,q,h,Q);)t=Y;u.setEndAfter(t)}}else k=!0;r=r.getNextSourceNode(y||x)}if(k&&u&&!u.collapsed){for(var k=F(this,f),x=k.hasAttributes(),y=u.getCommonAncestor(),t={},z={},C={},G={},U,P,da;k&&y;){if(y.getName()==g){for(U in h.attributes)!G[U]&&(da=y.getAttribute(P))&&
(k.getAttribute(U)==da?z[U]=1:G[U]=1);for(P in h.styles)!C[P]&&(da=y.getStyle(P))&&(k.getStyle(P)==da?t[P]=1:C[P]=1)}y=y.getParent()}for(U in z)k.removeAttribute(U);for(P in t)k.removeStyle(P);x&&!k.hasAttributes()&&(k=null);k?(u.extractContents().appendTo(k),u.insertNode(k),B.call(this,k),k.mergeSiblings(),CKEDITOR.env.ie||k.$.normalize()):(k=new CKEDITOR.dom.element("span"),u.extractContents().appendTo(k),u.insertNode(k),B.call(this,k),k.remove(!0));u=null}}c.moveToBookmark(p);c.shrink(CKEDITOR.SHRINK_TEXT);
c.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(m.getParent()),e=null,f=null,g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;n.checkElementRemovable(h,!0)&&(e=h)}for(g=0;g<c.elements.length;g++){h=c.elements[g];if(h==c.block||h==c.blockLimit)break;n.checkElementRemovable(h,!0)&&(f=h)}f&&m.breakParent(f);e&&d.breakParent(e)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=
a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f,g=0,k;g<e.elements.length&&(k=e.elements[g])&&k!=e.block&&k!=e.blockLimit;g++)if(this.checkElementRemovable(k)){var l;a.collapsed&&(a.checkBoundaryOfElement(k,CKEDITOR.END)||(l=a.checkBoundaryOfElement(k,CKEDITOR.START)))?(f=k,f.match=l?"start":"end"):(k.mergeSiblings(),k.is(this.element)?u.call(this,k):q(k,h(this)[k.getName()]))}if(f){k=d;for(g=0;;g++){l=e.elements[g];if(l.equals(f))break;
else if(l.match)continue;else l=l.clone();l.append(k);k=l}k["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var m=c.endNode,n=this;b();for(e=d;!e.equals(m);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?u.call(this,e):q(e,h(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)&&(b(),f=d.getNext())),e=f}a.moveToBookmark(c);a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function e(a){var b=[];a.forEach(function(a){if("true"==
a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function g(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1))&&!a.isReadOnly()&&t(a,this)}function l(a){var b=a.getCommonAncestor(!0,!0);if(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&
a.removeStyle(e)}}function k(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0;this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e=a.document,f;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(f=F(this,e,d),w(d,f));a.moveToBookmark(b)}function n(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&
(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),w(d,e)):u.call(this,d));a.moveToBookmark(b)}function w(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),g=!d&&e;if(d&&!e){e=b;(g=a.getBogus())&&g.remove();g=a.getHtml();g=x(g,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");g=g.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");g=g.replace(/([ \t\n\r]+|&nbsp;)/g,
" ");g=g.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var h=a.getDocument().createElement("div");h.append(e);e.$.outerHTML="\x3cpre\x3e"+g+"\x3c/pre\x3e";e.copyAttributes(h.getFirst());e=h.getFirst().remove()}else e.setHtml(g);b=e}else g?b=A(c?[a.getHtml()]:f(a),b):a.moveChildren(b);b.replace(a);if(d){var c=b,k;(k=c.getPrevious(R))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("pre")&&(d=x(k.getHtml(),/\n$/,"")+"\n\n"+x(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="\x3cpre\x3e"+d+"\x3c/pre\x3e":
c.setHtml(d),k.remove())}else c&&y(b)}function f(a){var b=[];x(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"\x3c/pre\x3e"+c+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)});return b}function x(a,b,c){var d="",e="";a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){b&&(d=b);c&&(e=c);return""});return d+a.replace(b,c)+e}function A(a,b){var c;
1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=x(e,/^[ \t]*\n/,""),e=x(e,/\n$/,""),e=x(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"\x26nbsp;":b?" "+CKEDITOR.tools.repeat("\x26nbsp;",a.length-1):CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"\x3cbr\x3e"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e);
c.append(f)}else b.setHtml(e)}return c||b}function u(a,b){var c=this._.definition,d=c.attributes,c=c.styles,e=h(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c),g;for(g in d)if("class"!=g&&!this._.definition.fullMatch||a.getAttribute(g)==p(g,d[g]))b&&"data-"==g.slice(0,5)||(f=a.hasAttribute(g),a.removeAttribute(g));for(var k in c)this._.definition.fullMatch&&a.getStyle(k)!=p(k,c[k],!0)||(f=f||!!a.getStyle(k),a.removeStyle(k));q(a,e,C[a.getName()]);f&&(this._.definition.alwaysRemoveElement?
y(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?y(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function B(a){for(var b=h(this),c=a.getElementsByTag(this.element),d,e=c.count();0<=--e;)d=c.getItem(e),d.isReadOnly()||u.call(this,d,!0);for(var f in b)if(f!=this.element)for(c=a.getElementsByTag(f),e=c.count()-1;0<=e;e--)d=c.getItem(e),d.isReadOnly()||q(d,b[f])}function q(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e=b[d][0],
f;if(f=a.getAttribute(e)){var g=b[d][1];(null===g||g.test&&g.test(f)||"string"==typeof g&&f==g)&&a.removeAttribute(e)}}c||y(a)}function y(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(R),d=a.getNext(R);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br",1);!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br");a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),
d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function F(a,b,c){var d;d=a.element;"*"==d&&(d="span");d=new CKEDITOR.dom.element(d,b);c&&c.copyAttributes(d);d=t(d,a);b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1);return d}function t(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);c&&a.setAttribute("style",c);return a}function z(a,
b){for(var c in a)a[c]=a[c].replace(H,function(a,c){return b[c]})}function h(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e=c[d],f,g;"string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes);e=b[f]||(b[f]={});if(g){var e=e.attributes=e.attributes||[],h;for(h in g)e.push([h.toLowerCase(),g[h]])}}}return b}function p(a,b,c){var d=new CKEDITOR.dom.element("span");
d[c?"setStyle":"setAttribute"](a,b);return d[c?"getStyle":"getAttribute"](a)}function m(a,b,c){var d=a.document,e=a.getRanges();b=b?this.removeFromRange:this.applyToRange;for(var f,g=e.createIterator();f=g.getNextRange();)b.call(this,f,c);a.selectRanges(e);d.removeCustomData("doc_processing_style")}var C={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,
details:1,datagrid:1,datalist:1},r={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},G=/\s*(?:;\s*|$)/,H=/#\((.+?)\)/g,K=CKEDITOR.dom.walker.bookmark(0,1),R=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style);
b&&(a=CKEDITOR.tools.clone(a),z(a.attributes,b),z(a.styles,b));c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";this.type=a.type||(C[c]?CKEDITOR.STYLE_BLOCK:r[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:a}};CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return m.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=
this._.enterMode;b||(this._.enterMode=a.activeEnterMode);m.call(this,a.getSelection(),0,a);this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return m.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);m.call(this,a.getSelection(),1,a);this._.enterMode=b}},applyToRange:function(a){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?k:this.type==CKEDITOR.STYLE_OBJECT?
g:null;return this.applyToRange(a)},removeFromRange:function(a){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?n:this.type==CKEDITOR.STYLE_OBJECT?l:null;return this.removeFromRange(a)},applyToObject:function(a){t(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c=a.elements,d=0,e;d<c.length;d++)if(e=c[d],
this.type!=CKEDITOR.STYLE_INLINE||e!=a.block&&e!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=e.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(e,!0,b))return!0}}return!1},checkApplicable:function(a,b,c){b&&b instanceof CKEDITOR.filter&&(c=b);if(c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},
checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var g in f)e++,d[g]=f[g];if(g=CKEDITOR.style.getStyleText(c))d.style||e++,d.style=g;d._length=e;c=c._AC=d}if(c._length){for(var h in c)if("_length"!=h){e=a.getAttribute(h)||"";if("style"==h)a:{d=c[h];"string"==typeof d&&
(d=CKEDITOR.tools.parseCssText(d));"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0));g=void 0;for(g in d)if(!(g in e)||e[g]!=d[g]&&"inherit"!=d[g]&&"inherit"!=e[g]){d=!1;break a}d=!0}else d=c[h]==e;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}else return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=h(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];if(null===
e)return!0;if("string"==typeof e){if(d==e)return!0}else if(e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["\x3c",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'\x3d"',e[f],'"');(e=CKEDITOR.style.getStyleText(b))&&c.push(' style\x3d"',e,'"');c.push("\x3e",a||b.name,"\x3c/",d,"\x3e");return c.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;
var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(G,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(G,";");"inherit"==f?d+=g:c+=g}c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0));return a._ST=c+d};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a};this.setup&&this.setup(a)};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},
a,!0);return this.customHandlers[a.type]=b};var M=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,Q=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(a,d){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,d,!0)};
CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,d,b){CKEDITOR.stylesSet.addExternal(a,d,"");CKEDITOR.stylesSet.load(a,b)};
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,d){var b=this._.styleStateChangeCallbacks;b||(b=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var d=0;d<b.length;d++){var g=b[d],l=g.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;g.fn.call(this,l)}}));b.push({style:a,fn:d})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);
else{var d=this,b=d.config.stylesCombo_stylesSet||d.config.stylesSet;if(!1===b)a(null);else if(b instanceof Array)d._.stylesDefinitions=b,a(b);else{b||(b="default");var b=b.split(":"),c=b[0];CKEDITOR.stylesSet.addExternal(c,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(c,function(b){d._.stylesDefinitions=b[c];a(d._.stylesDefinitions)})}}}});
CKEDITOR.dom.comment=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";
(function(){var a={},d={},b;for(b in CKEDITOR.dtd.$blockLimit)b in CKEDITOR.dtd.$list||(a[b]=1);for(b in CKEDITOR.dtd.$block)b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(d[b]=1);CKEDITOR.dom.elementPath=function(b,e){var g=null,l=null,k=[],n=b,w;e=e||b.getDocument().getBody();do if(n.type==CKEDITOR.NODE_ELEMENT){k.push(n);if(!this.lastElement&&(this.lastElement=n,n.is(CKEDITOR.dtd.$object)||"false"==n.getAttribute("contenteditable")))continue;if(n.equals(e))break;if(!l&&(w=n.getName(),
"true"==n.getAttribute("contenteditable")?l=n:!g&&d[w]&&(g=n),a[w])){if(w=!g&&"div"==w){a:{w=n.getChildren();for(var f=0,x=w.count();f<x;f++){var A=w.getItem(f);if(A.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[A.getName()]){w=!0;break a}}w=!1}w=!w}w?g=n:l=n}}while(n=n.getParent());l||(l=e);this.block=g;this.blockLimit=l;this.root=e;this.elements=k}})();
CKEDITOR.dom.elementPath.prototype={compare:function(a){var d=this.elements;a=a&&a.elements;if(!a||d.length!=a.length)return!1;for(var b=0;b<d.length;b++)if(!d[b].equals(a[b]))return!1;return!0},contains:function(a,d,b){var c;"string"==typeof a&&(c=function(b){return b.getName()==a});a instanceof CKEDITOR.dom.element?c=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?c=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?c=a:"object"==typeof a&&(c=function(b){return b.getName()in
a});var e=this.elements,g=e.length;d&&g--;b&&(e=Array.prototype.slice.call(e,0),e.reverse());for(d=0;d<g;d++)if(c(e[d]))return e[d];return null},isContextFor:function(a){var d;return a in CKEDITOR.dtd.$block?(d=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!d.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};
CKEDITOR.dom.text=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createTextNode(a));this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;
CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var d=this.$.parentNode,b=d.childNodes.length,c=this.getLength(),e=this.getDocument(),g=new CKEDITOR.dom.text(this.$.splitText(a),e);d.childNodes.length==b&&(a>=c?(g=e.createText(""),g.insertAfter(this)):(a=e.createText(""),a.insertAfter(g),a.remove()));return g},substring:function(a,
d){return"number"!=typeof d?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,d)}});
(function(){function a(a,c,d){var g=a.serializable,l=c[d?"endContainer":"startContainer"],k=d?"endOffset":"startOffset",n=g?c.document.getById(a.startNode):a.startNode;a=g?c.document.getById(a.endNode):a.endNode;l.equals(n.getPrevious())?(c.startOffset=c.startOffset-l.getLength()-a.getPrevious().getLength(),l=a.getNext()):l.equals(a.getPrevious())&&(c.startOffset-=l.getLength(),l=a.getNext());l.equals(n.getParent())&&c[k]++;l.equals(a.getParent())&&c[k]++;c[d?"endContainer":"startContainer"]=l;return c}
CKEDITOR.dom.rangeList=function(a){if(a instanceof CKEDITOR.dom.rangeList)return a;a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[];return CKEDITOR.tools.extend(a,d)};var d={createIterator:function(){var a=this,c=CKEDITOR.dom.walker.bookmark(),d=[],g;return{getNextRange:function(l){g=void 0===g?0:g+1;var k=a[g];if(k&&1<a.length){if(!g)for(var n=a.length-1;0<=n;n--)d.unshift(a[n].createBookmark(!0));if(l)for(var w=0;a[g+w+1];){var f=k.document;l=0;n=f.getById(d[w].endNode);for(f=f.getById(d[w+1].startNode);;){n=
n.getNextSourceNode(!1);if(f.equals(n))l=1;else if(c(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())continue;break}if(!l)break;w++}for(k.moveToBookmark(d.shift());w--;)n=a[++g],n.moveToBookmark(d.shift()),k.setEnd(n.endContainer,n.endOffset)}return k}}},createBookmarks:function(b){for(var c=[],d,g=0;g<this.length;g++){c.push(d=this[g].createBookmark(b,!0));for(var l=g+1;l<this.length;l++)this[l]=a(d,this[l]),this[l]=a(d,this[l],!0)}return c},createBookmarks2:function(a){for(var c=[],d=0;d<
this.length;d++)c.push(this[d].createBookmark2(a));return c},moveToBookmarks:function(a){for(var c=0;c<this.length;c++)this[c].moveToBookmark(a[c])}}})();
(function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function d(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var c=c.split(",").sort(function(a,b){return a>b?-1:1}),e=0,g;e<c.length;e++)if(g=c[e],d.ie&&(g.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==g)&&(g="ie"),d[g]){b+="_"+c[e];break}return CKEDITOR.getUrl(a()+b+".css")}function b(a,b){g[a]||(CKEDITOR.document.appendStyleSheet(d(a)),g[a]=1);b&&b()}function c(a){var b=
a.getById(l);b||(b=a.getHead().append("style"),b.setAttribute("id",l),b.setAttribute("type","text/css"));return b}function e(a,b,c){var d,e,g;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var k=0;k<a.length;k++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){g=b[e][1];for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);a[k].$.sheet.addRule(b[e][0],g)}else{g=b;for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?
a[k].$.styleSheet.cssText+=g:a[k].$.innerHTML+=g}}var g={};CKEDITOR.skin={path:a,loadPart:function(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(c,d)}):b(c,d)},getPath:function(a){return CKEDITOR.getUrl(d(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase();this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var g;a&&(a=a.toLowerCase(),b&&(g=this.icons[a+"-rtl"]),
g||(g=this.icons[a]));a=c||g&&g.path||"";d=d||g&&g.offset;e=e||g&&g.bgsize||"16px";a&&(a=a.replace(/'/g,"\\'"));return a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+d+"px;background-size:"+e+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=c(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var c=CKEDITOR.skin.chameleon,d="",g="";"function"==typeof c&&(d=c(this,"editor"),g=
c(this,"panel"));a=[[n,a]];e([b],d,a);e(k,g,a)}).call(this,a)}});var l="cke_ui_color",k=[],n=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!a.getById("cke_ui_color")){a=c(a);k.push(a);var d=b.getUiColor();d&&e([a],CKEDITOR.skin.chameleon(b,"panel"),[[n,d]])}};b.on("panelShow",a);b.on("menuShow",a);b.config.uiColor&&b.setUiColor(b.config.uiColor)}})})();
(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var d=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!d||d!=b)}catch(c){CKEDITOR.env.hc=!1}a.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");
CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,d=0;d<a.length;d++)CKEDITOR.editor.prototype.constructor.apply(a[d][0],a[d][1]),CKEDITOR.add(a[d][0])})();/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";
CKEDITOR.skin.chameleon=function(){var b=function(){return function(b,e){for(var a=b.match(/[^#]./g),c=0;3>c;c++){var f=c,d;d=parseInt(a[c],16);d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2);a[f]=d}return"#"+a.join("")}}(),c=function(){var b=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d'{from}',endColorstr\x3d'{to}');");return function(c,a){return b.output({from:c,
to:a})}}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),
panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};
return function(g,e){var a=g.uiColor,a={id:"."+g.id,defaultBorder:b(a,-.1),defaultGradient:c(b(a,.9),a),lightGradient:c(b(a,1),b(a,.7)),mediumGradient:c(b(a,.8),b(a,.5)),ckeButtonOn:c(b(a,.6),b(a,.7)),ckeResizer:b(a,-.4),ckeToolbarSeparator:b(a,.5),ckeColorauto:b(a,.8),dialogBody:b(a,.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-.6),elementsPathBg:a,menubuttonIcon:b(a,.5),menubuttonIconHover:b(a,.3)};return f[e].output(a).replace(/\[/g,"{").replace(/\]/g,
"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var h=function(b){this._||(this._={});this._["default"]=this._.initValue=b["default"]||"";this._.required=b.required||!1;for(var a=[this._],d=1;d<arguments.length;d++)a.push(arguments[d]);a.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,a);return this._},v={build:function(b,a,d){return new CKEDITOR.ui.dialog.textInput(b,a,d)}},n={build:function(b,a,d){return new CKEDITOR.ui.dialog[a.type](b,a,d)}},q={isChanged:function(){return this.getValue()!=
this.getInitValue()},reset:function(b){this.setValue(this.getInitValue(),b)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},r=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},
this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},!0),x=/^on([A-Z]\w+)/,t=function(b){for(var a in b)(x.test(a)||"title"==a||"type"==a)&&delete b[a];return b},w=function(b){b=b.data.getKeystroke();b==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):b==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,a,d,f){if(!(4>arguments.length)){var c=h.call(this,a);c.labelId=CKEDITOR.tools.getNextId()+
"_label";this._.children=[];var e={role:a.role||"presentation"};a.includeLabel&&(e["aria-labelledby"]=c.labelId);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"div",null,e,function(){var e=[],g=a.required?" cke_required":"";"horizontal"!=a.labelLayout?e.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" ',' id\x3d"'+c.labelId+'"',c.inputId?' for\x3d"'+c.inputId+'"':"",(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",a.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',
a.controlStyle?' style\x3d"'+a.controlStyle+'"':"",' role\x3d"presentation"\x3e',f.call(this,b,a),"\x3c/div\x3e"):(g={type:"hbox",widths:a.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" id\x3d"'+c.labelId+'" for\x3d"'+c.inputId+'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(a.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(a.controlStyle?' style\x3d"'+a.controlStyle+
'"':"")+"\x3e"+f.call(this,b,a)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,g,e));return e.join("")})}},textInput:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={"class":"cke_dialog_ui_input_"+a.type,id:f,type:a.type};a.validate&&(this.validate=a.validate);a.maxLength&&(c.maxlength=a.maxLength);a.size&&(c.size=a.size);a.inputStyle&&(c.style=a.inputStyle);var e=this,m=!1;b.on("load",function(){e.getInputElement().on("keydown",
function(a){13==a.data.getKeystroke()&&(m=!0)});e.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&m&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),m=!1);e.bidi&&w.call(e,a)},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var b=['\x3cdiv class\x3d"cke_dialog_ui_input_',a.type,'" role\x3d"presentation"'];a.width&&b.push('style\x3d"width:'+a.width+'" ');b.push("\x3e\x3cinput ");c["aria-labelledby"]=this._.labelId;this._.required&&
(c["aria-required"]=this._.required);for(var e in c)b.push(e+'\x3d"'+c[e]+'" ');b.push(" /\x3e\x3c/div\x3e");return b.join("")})}},textarea:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",e={};a.validate&&(this.validate=a.validate);e.rows=a.rows||5;e.cols=a.cols||20;e["class"]="cke_dialog_ui_input_textarea "+(a["class"]||"");"undefined"!=typeof a.inputStyle&&(e.style=a.inputStyle);a.dir&&(e.dir=a.dir);if(f.bidi)b.on("load",
function(){f.getInputElement().on("keyup",w)},f);CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);var a=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',c,'" '],b;for(b in e)a.push(b+'\x3d"'+CKEDITOR.tools.htmlEncode(e[b])+'" ');a.push("\x3e",CKEDITOR.tools.htmlEncode(f._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return a.join("")})}},checkbox:function(b,
a,d){if(!(3>arguments.length)){var f=h.call(this,a,{"default":!!a["default"]});a.validate&&(this.validate=a.validate);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"span",null,null,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],d=CKEDITOR.tools.getNextId()+"_label",g={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":d};t(c);a["default"]&&(g.checked="checked");"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);
f.checkbox=new CKEDITOR.ui.dialog.uiElement(b,c,e,"input",null,g);e.push(' \x3clabel id\x3d"',d,'" for\x3d"',g.id,'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(a.label),"\x3c/label\x3e");return e.join("")})}},radio:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);this._["default"]||(this._["default"]=this._.initValue=a.items[0][1]);a.validate&&(this.validate=a.validate);var f=[],c=this;a.role="radiogroup";a.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,
b,a,d,function(){for(var e=[],d=[],g=(a.id?a.id:CKEDITOR.tools.getNextId())+"_radio",k=0;k<a.items.length;k++){var l=a.items[k],h=void 0!==l[2]?l[2]:l[0],n=void 0!==l[1]?l[1]:l[0],p=CKEDITOR.tools.getNextId()+"_radio_input",q=p+"_label",p=CKEDITOR.tools.extend({},a,{id:p,title:null,type:null},!0),h=CKEDITOR.tools.extend({},p,{title:h},!0),r={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:n,"aria-labelledby":q},u=[];c._["default"]==n&&(r.checked="checked");t(p);t(h);"undefined"!=typeof p.inputStyle&&
(p.style=p.inputStyle);p.keyboardFocusable=!0;f.push(new CKEDITOR.ui.dialog.uiElement(b,p,u,"input",null,r));u.push(" ");new CKEDITOR.ui.dialog.uiElement(b,h,u,"label",null,{id:q,"for":r.id},l[0]);e.push(u.join(""))}new CKEDITOR.ui.dialog.hbox(b,f,e,d);return d.join("")});this._.children=f}},button:function(b,a,d){if(arguments.length){"function"==typeof a&&(a=a(b.getParentEditor()));h.call(this,a,{disabled:a.disabled||!1});CKEDITOR.event.implementOn(this);var f=this;b.on("load",function(){var a=this.getElement();
(function(){a.on("click",function(a){f.click();a.data.preventDefault()});a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(f.click(),a.data.preventDefault())})})();a.unselectable()},this);var c=CKEDITOR.tools.extend({},a);delete c.style;var e=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"a",null,{style:a.style,href:"javascript:void(0)",title:a.label,hidefocus:"true","class":a["class"],role:"button","aria-labelledby":e},'\x3cspan id\x3d"'+e+'" class\x3d"cke_dialog_ui_button"\x3e'+
CKEDITOR.tools.htmlEncode(a.label)+"\x3c/span\x3e")}},select:function(b,a,d){if(!(3>arguments.length)){var f=h.call(this,a);a.validate&&(this.validate=a.validate);f.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],d=[],g={id:f.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('\x3cdiv class\x3d"cke_dialog_ui_input_',
a.type,'" role\x3d"presentation"');a.width&&e.push('style\x3d"width:'+a.width+'" ');e.push("\x3e");void 0!==a.size&&(g.size=a.size);void 0!==a.multiple&&(g.multiple=a.multiple);t(c);for(var k=0,l;k<a.items.length&&(l=a.items[k]);k++)d.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(l[0]));"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);f.select=new CKEDITOR.ui.dialog.uiElement(b,c,e,"select",null,
g,d.join(""));e.push("\x3c/div\x3e");return e.join("")})}},file:function(b,a,d){if(!(3>arguments.length)){void 0===a["default"]&&(a["default"]="");var f=CKEDITOR.tools.extend(h.call(this,a),{definition:a,buttons:[]});a.validate&&(this.validate=a.validate);b.on("load",function(){CKEDITOR.document.getById(f.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){f.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var b=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',
f.frameId,'" title\x3d"',a.label,'" src\x3d"javascript:void('];b.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");b.push(')"\x3e\x3c/iframe\x3e');return b.join("")})}},fileButton:function(b,a,d){var f=this;if(!(3>arguments.length)){h.call(this,a);a.validate&&(this.validate=a.validate);var c=CKEDITOR.tools.extend({},a),e=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button";c.onClick=function(c){var d=
a["for"];e&&!1===e.call(this,c)||(b.getContentElement(d[0],d[1]).submit(),this.disable())};b.on("load",function(){b.getContentElement(a["for"][0],a["for"][1])._.buttons.push(f)});CKEDITOR.ui.dialog.button.call(this,b,c,d)}},html:function(){var b=/^\s*<[\w:]+\s+([^>]*)?>/,a=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/;return function(f,c,e){if(!(3>arguments.length)){var m=[],g=c.html;"\x3c"!=g.charAt(0)&&(g="\x3cspan\x3e"+g+"\x3c/span\x3e");var k=c.focus;if(k){var l=this.focus;this.focus=function(){("function"==
typeof k?k:l).call(this);this.fire("focus")};c.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,f,c,m,"span",null,null,"");m=m.join("").match(b);g=g.match(a)||["","",""];d.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]);e.push([g[1]," ",m[1]||"",g[2]].join(""))}}}(),fieldset:function(b,a,d,f,c){var e=c.label;this._={children:a};CKEDITOR.ui.dialog.uiElement.call(this,b,c,f,"fieldset",null,null,function(){var a=[];e&&a.push("\x3clegend"+
(c.labelStyle?' style\x3d"'+c.labelStyle+'"':"")+"\x3e"+e+"\x3c/legend\x3e");for(var b=0;b<d.length;b++)a.push(d[b]);return a.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(b){var a=CKEDITOR.document.getById(this._.labelId);1>a.getChildCount()?(new CKEDITOR.dom.text(b,CKEDITOR.document)).appendTo(a):a.getChild(0).$.nodeValue=b;return this},getLabel:function(){var b=
CKEDITOR.document.getById(this._.labelId);return!b||1>b.getChildCount()?"":b.getChild(0).getText()},eventProcessors:r},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var b=this.getElement();b&&b.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},
isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(b,a){this.on("click",function(){a.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},
focus:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&a.$.focus()},0)},select:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&(a.$.focus(),a.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(b){if(this.bidi){var a=b&&b.charAt(0);(a=""==a?"ltr":""==a?"rtl":null)&&(b=b.slice(1));this.setDirectionMarker(a)}b||(b="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},
getValue:function(){var b=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&b){var a=this.getDirectionMarker();a&&(b=("ltr"==a?"":"")+b)}return b},setDirectionMarker:function(b){var a=this.getInputElement();b?a.setAttributes({dir:b,"data-cke-dir-marker":b}):this.getDirectionMarker()&&a.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.textarea.prototype=
new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(b,a,d){var f=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;f.$.text=b;f.$.value=void 0===a||null===a?b:a;void 0===d||null===d?CKEDITOR.env.ie?c.add(f.$):c.add(f.$,null):c.add(f.$,d);return this},remove:function(b){this.getInputElement().$.remove(b);
return this},clear:function(){for(var b=this.getInputElement().$;0<b.length;)b.remove(0);return this},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(b,a){this.getInputElement().$.checked=b;!a&&this.fire("change",{value:b})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(b,
a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this);this.on("change",a);return null}},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(b,a){for(var d=this._.children,f,c=0;c<d.length&&(f=d[c]);c++)f.getElement().$.checked=
f.getValue()==b;!a&&this.fire("change",{value:b})},getValue:function(){for(var b=this._.children,a=0;a<b.length;a++)if(b[a].getElement().$.checked)return b[a].getValue();return null},accessKeyUp:function(){var b=this._.children,a;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked){b[a].getElement().focus();return}b[0].getElement().focus()},eventProcessors:{onChange:function(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){for(var a=
this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",a);return null}}},q,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,q,{getInputElement:function(){var b=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<b.$.forms.length?new CKEDITOR.dom.element(b.$.forms[0].elements[0]):
this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(b){var a=/^on([A-Z]\w+)/,d,f=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})},c;for(c in b)if(d=c.match(a))this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,b[c]):f(this,this._.dialog,d[1].toLowerCase(),b[c]);return this},reset:function(){function b(){d.$.open();
var b="";f.size&&(b=f.size-(CKEDITOR.env.ie?7:0));var h=a.frameId+"_input";d.$.write(['\x3chtml dir\x3d"'+g+'" lang\x3d"'+k+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+g+'" lang\x3d"'+k+'" action\x3d"',CKEDITOR.tools.htmlEncode(f.action),'"\x3e\x3clabel id\x3d"',a.labelId,'" for\x3d"',h,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(f.label),
'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',h,'" aria-labelledby\x3d"',a.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(f.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<b?b:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+e+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+m+")}","\x3c/script\x3e"].join(""));
d.$.close();for(b=0;b<c.length;b++)c[b].enable()}var a=this._,d=CKEDITOR.document.getById(a.frameId).getFrameDocument(),f=a.definition,c=a.buttons,e=this.formLoadedNumber,m=this.formUnloadNumber,g=a.dialog._.editor.lang.dir,k=a.dialog._.editor.langCode;e||(e=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),m=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(e);
CKEDITOR.tools.removeFunction(m)}));CKEDITOR.env.gecko?setTimeout(b,500):b()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=
new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",v);CKEDITOR.dialog.addUIElement("password",v);CKEDITOR.dialog.addUIElement("textarea",n);CKEDITOR.dialog.addUIElement("checkbox",n);CKEDITOR.dialog.addUIElement("radio",n);CKEDITOR.dialog.addUIElement("button",n);CKEDITOR.dialog.addUIElement("select",n);CKEDITOR.dialog.addUIElement("file",n);CKEDITOR.dialog.addUIElement("fileButton",n);CKEDITOR.dialog.addUIElement("html",
n);CKEDITOR.dialog.addUIElement("fieldset",{build:function(b,a,d){for(var f=a.children,c,e=[],h=[],g=0;g<f.length&&(c=f[g]);g++){var k=[];e.push(k);h.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(b,c,k))}return new CKEDITOR.ui.dialog[a.type](b,h,e,d,a)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;
(function(){function x(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function A(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function K(a,b){for(var c=a.$.getElementsByTagName("input"),
d=0,e=c.length;d<e;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function T(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0));a||(this.select?this.select():this.focus());b&&alert(b);this.fire("validated",{valid:a,msg:b})}
function U(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function V(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",W).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),c=b.getChild([0,0,0,0,0]),d=c.getChild(0),e=c.getChild(1);a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(c);
!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+a+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(c.getParent()));d.unselectable();e.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:d,close:e,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),
footer:c.getChild([3,0,1,0])}}}function L(a,b,c){this.element=b;this.focusIndex=c;this.tabIndex=0;this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.currentFocusIndex=this.focusIndex;this.element.focus()};b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});b.on("focus",function(){this.fire("mouseover")});b.on("blur",function(){this.fire("mouseout")})}function X(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();
c.on("resize",b);a.on("hide",function(){c.removeListener("resize",b)})}function M(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b)}function Y(a){function b(b){var c=a.getSize(),k=CKEDITOR.document.getWindow().getViewPaneSize(),q=b.data.$.screenX,n=b.data.$.screenY,r=q-d.x,l=n-d.y;d={x:q,y:n};e.x+=r;e.y+=l;a.move(e.x+h[3]<g?-h[3]:e.x-h[1]>k.width-c.width-g?k.width-c.width+("rtl"==f.lang.dir?0:h[1]):e.x,e.y+h[0]<g?-h[0]:e.y-h[2]>k.height-c.height-g?k.height-c.height+h[2]:e.y,1);b.data.preventDefault()}
function c(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",c);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mousemove",b);a.removeListener("mouseup",c)}}var d=null,e=null,f=a.getParentEditor(),g=f.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20);a.parts.title.on("mousedown",function(g){d={x:g.data.$.screenX,y:g.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",
c);e=a.getPosition();if(CKEDITOR.env.ie6Compat){var f=u.getChild(0).getFrameDocument();f.on("mousemove",b);f.on("mouseup",c)}g.data.preventDefault()},a)}function Z(a){function b(b){var c="rtl"==f.lang.dir,n=k.width,q=k.height,G=n+(b.data.$.screenX-m.x)*(c?-1:1)*(a._.moved?1:2),H=q+(b.data.$.screenY-m.y)*(a._.moved?1:2),B=a._.element.getFirst(),B=c&&B.getComputedStyle("right"),C=a.getPosition();C.y+H>p.height&&(H=p.height-C.y);(c?B:C.x)+G>p.width&&(G=p.width-(c?B:C.x));if(e==CKEDITOR.DIALOG_RESIZE_WIDTH||
e==CKEDITOR.DIALOG_RESIZE_BOTH)n=Math.max(d.minWidth||0,G-g);if(e==CKEDITOR.DIALOG_RESIZE_HEIGHT||e==CKEDITOR.DIALOG_RESIZE_BOTH)q=Math.max(d.minHeight||0,H-h);a.resize(n,q);a._.moved||a.layout();b.data.preventDefault()}function c(){CKEDITOR.document.removeListener("mouseup",c);CKEDITOR.document.removeListener("mousemove",b);q&&(q.remove(),q=null);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mouseup",c);a.removeListener("mousemove",b)}}var d=a.definition,e=d.resizable;
if(e!=CKEDITOR.DIALOG_RESIZE_NONE){var f=a.getParentEditor(),g,h,p,m,k,q,n=CKEDITOR.tools.addFunction(function(e){k=a.getSize();var d=a.parts.contents;d.$.getElementsByTagName("iframe").length&&(q=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),d.append(q));h=k.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));g=k.width-a.parts.contents.getSize("width",
1);m={x:e.screenX,y:e.screenY};p=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);CKEDITOR.env.ie6Compat&&(d=u.getChild(0).getFrameDocument(),d.on("mousemove",b),d.on("mouseup",c));e.preventDefault&&e.preventDefault()});a.on("load",function(){var b="";e==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":e==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+
b+" cke_resizer_"+f.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(f.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+n+', event )"\x3e'+("ltr"==f.lang.dir?"":"")+"\x3c/div\x3e");a.parts.footer.append(b,1)});f.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function I(a){a.data.preventDefault(1)}function N(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,f=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,
e,f),g=z[c];g?g.show():(f=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",f,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(d="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+d+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",f.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),f.push("void((function(){"+
encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),f.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),f.push("\x3c/div\x3e"),g=CKEDITOR.dom.element.createFromHtml(f.join("")),g.setOpacity(void 0!==e?e:.5),g.on("keydown",I),g.on("keypress",I),g.on("keyup",I),g.appendTo(CKEDITOR.document.getBody()),z[c]=g);a.focusManager.add(g);
u=g;a=function(){var a=b.getViewPaneSize();g.setStyles({width:a.width+"px",height:a.height+"px"})};var h=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;g.setStyles({left:a.x+"px",top:a.y+"px"});if(c){do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)}};J=a;b.on("resize",a);a();CKEDITOR.env.mac&&CKEDITOR.env.webkit||g.focus();if(CKEDITOR.env.ie6Compat){var p=function(){h();arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){p.prevScrollHandler=
window.onscroll||function(){};window.onscroll=p},0);h()}}function O(a){u&&(a.focusManager.remove(u),a=CKEDITOR.document.getWindow(),u.hide(),a.removeListener("resize",J),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),J=null)}var v=CKEDITOR.tools.cssLength,W='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+
CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';
CKEDITOR.dialog=function(a,b){function c(){var a=l._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;c<b;c++)a[c].focusIndex=c}function d(a){var b=l._.focusList;a=a||0;if(!(1>b.length)){var c=l._.currentFocusIndex;l._.tabBarMode&&0>a&&(c=0);try{b[c].getInputElement().$.blur()}catch(e){}var d=c,g=1<l._.pageCount;do{d+=a;if(g&&!l._.tabBarMode&&(d==b.length||-1==d)){l._.tabBarMode=!0;l._.tabs[l._.currentTabId][0].focus();
l._.currentFocusIndex=-1;return}d=(d+b.length)%b.length;if(d==c)break}while(a&&!b[d].isFocusable());b[d].focus();"text"==b[d].type&&b[d].select()}}function e(b){if(l==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),e="rtl"==a.lang.dir,g=[37,38,39,40];q=n=0;if(9==c||c==CKEDITOR.SHIFT+9)d(c==CKEDITOR.SHIFT+9?-1:1),q=1;else if(c==CKEDITOR.ALT+121&&!l._.tabBarMode&&1<l.getPageCount())l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1,q=1;else if(-1!=CKEDITOR.tools.indexOf(g,
c)&&l._.tabBarMode)c=-1!=CKEDITOR.tools.indexOf([e?39:37,38],c)?x.call(l):A.call(l),l.selectPage(c),l._.tabs[c][0].focus(),q=1;else if(13!=c&&32!=c||!l._.tabBarMode)if(13==c)c=b.data.getTarget(),c.is("a","button","select","textarea")||c.is("input")&&"button"==c.$.type||((c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),q=1),n=1;else if(27==c)(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),n=1;else return;else this.selectPage(this._.currentTabId),
this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1),q=1;f(b)}}function f(a){q?a.data.preventDefault(1):n&&a.data.stopPropagation()}var g=CKEDITOR.dialog._.dialogDefinitions[b],h=CKEDITOR.tools.clone(aa),p=a.config.dialog_buttonsOrder||"OS",m=a.lang.dir,k={},q,n;("OS"==p&&CKEDITOR.env.mac||"rtl"==p&&"ltr"==m||"ltr"==p&&"rtl"==m)&&h.buttons.reverse();g=CKEDITOR.tools.extend(g(a),h);g=CKEDITOR.tools.clone(g);g=new P(this,g);h=V(a);this._={editor:a,element:h.element,name:b,contentSize:{width:0,height:0},
size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=h.parts;CKEDITOR.tools.setTimeout(function(){a.fire("ariaWidget",this.parts.contents)},0,this);h={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};h["rtl"==m?"right":"left"]=0;this.parts.dialog.setStyles(h);CKEDITOR.event.call(this);this.definition=g=CKEDITOR.fire("dialogDefinition",
{name:b,definition:g},a).definition;if(!("removeDialogTabs"in a._)&&a.config.removeDialogTabs){h=a.config.removeDialogTabs.split(";");for(m=0;m<h.length;m++)if(p=h[m].split(":"),2==p.length){var r=p[0];k[r]||(k[r]=[]);k[r].push(p[1])}a._.removeDialogTabs=k}if(a._.removeDialogTabs&&(k=a._.removeDialogTabs[b]))for(m=0;m<k.length;m++)g.removeContents(k[m]);if(g.onLoad)this.on("load",g.onLoad);if(g.onShow)this.on("show",g.onShow);if(g.onHide)this.on("hide",g.onHide);if(g.onOk)this.on("ok",function(b){a.fire("saveSnapshot");
setTimeout(function(){a.fire("saveSnapshot")},0);!1===g.onOk.call(this,b)&&(b.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(g.onCancel)this.on("cancel",function(a){!1===g.onCancel.call(this,a)&&(a.data.hide=!1)});var l=this,t=function(a){var b=l._.contents,c=!1,d;for(d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(a){t(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;d&&(a.data.hide=!1,a.stop());T.call(b,!d,"string"==typeof c?
c:void 0);return d}})},this,null,0);this.on("cancel",function(b){t(function(c){if(c.isChanged())return a.config.dialog_noConfirmCancel||confirm(a.lang.common.confirmCancel)||(b.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();a.data.preventDefault()},this);this.changeFocus=d;var y=this._.element;a.focusManager.add(y,1);this.on("show",function(){y.on("keydown",e,this);if(CKEDITOR.env.gecko)y.on("keypress",f,this)});this.on("hide",
function(){y.removeListener("keydown",e);CKEDITOR.env.gecko&&y.removeListener("keypress",f);t(function(a){U.apply(a)})});this.on("iframeAdded",function(a){(new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document)).on("keydown",e,this,null,0)});this.on("show",function(){c();var b=1<l._.pageCount;a.config.dialog_startupFocusTab&&b?(l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=b?-1:this._.focusList.length-1,g.onFocus?
(b=g.onFocus.call(this))&&b.focus():d(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove();b.appendTo(a)},this);Y(this);Z(this);(new CKEDITOR.dom.text(g.title,CKEDITOR.document)).appendTo(this.parts.title);for(m=0;m<g.contents.length;m++)(k=g.contents[m])&&this.addPage(k);this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),
this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1)),a.data.preventDefault())},this);m=[];k=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},m).getChild();this.parts.footer.setHtml(m.join(""));for(m=0;m<k.length;m++)this._.buttons[k[m].id]=k[m]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==
a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();
return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,f="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%");f&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},f||(f=CKEDITOR.document.getWindow().getScrollPosition(),a+=f.x,b+=f.y),e&&(f=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-f.width-a),b={top:(0<b?b:0)+"px"},
b[e?"right":"left"]=(0<a?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,N(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);
a.on("keydown",Q);a.on("keyup",R);this._.hasFocus=!1;for(var c in b.contents)if(b.contents[c]){var a=b.contents[c],d=this._.tabs[a.id],e=a.requiredContent,f=0;if(d){for(var g in this._.contents[a.id]){var h=this._.contents[a.id][g];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),f++))}!f||e&&!this._.editor.activeFilter.check(e)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout();
X(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<e?e:0)>c.height||
b.width+(0<d?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){this.foreach(a);return this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},
commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var a=this._.element;a.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(ba(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();
if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else O(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;a.removeListener("keydown",Q);a.removeListener("keyup",R);var c=this._.editor;c.focus();setTimeout(function(){c.focusManager.unlock();CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog;
this.foreach(function(a){a.resetInitValue&&a.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),
g=0;d=f.shift();)d.notAllowed||"hbox"==d.type||"vbox"==d.type||g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());g||(a.hidden=!0);b=CKEDITOR.dom.element.createFromHtml(b.join(""));b.setAttribute("role","tabpanel");d=CKEDITOR.env;e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber();c=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style\x3d"display:none"':"",' id\x3d"',e,'"',d.gecko&&!d.hc?"":' href\x3d"javascript:void(0)"',
' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',a.label,"\x3c/a\x3e"].join(""));b.setAttribute("aria-labelledby",e);this._.tabs[a.id]=[c,b];this._.tabIdList.push(a.id);!a.hidden&&this._.pageCount++;this._.lastTab=c;this.updateStyle();b.setAttribute("name",a.id);b.appendTo(this.parts.contents);c.unselectable();this.parts.tabs.append(c);a.accessKey&&(S(this,this,"CTRL+"+a.accessKey,ca,da),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&
!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],d=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),d.hide());d.setAttribute("aria-hidden",b!=a)}var e=this._.tabs[a];e[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(K(e[1]),e[1].show(),setTimeout(function(){K(e[1],1)},0)):e[1].show();this._.currentTabId=a;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},
updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(x.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){if(a=this._.tabs[a]&&this._.tabs[a][0])a.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},
getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},
getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new L(this,a,b));else{this._.focusList.splice(b,0,new L(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}},setState:function(a){if(this.state!=a){this.state=a;if(a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,c={attributes:{"class":"cke_dialog_spinner"},
styles:{"float":"rtl"==b?"right":"left"}};c.styles["margin-"+("rtl"==b?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",c);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&
"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){a=a.config.removeDialogTabs;return!(a&&a.match(new RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog;!1!==a.fire("ok",
{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog;!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,
b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var aa={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},D=function(a,b,c){for(var d=0,e;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=D(e[c],
b,c)))return e;return null},E=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]&&(g=E(g[d],b,c,d,!0)))return g}if(e)return null}a.push(b);return b},F=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=F(e[c],b,c)))return e}return null},P=function(a,b){this.dialog=a;for(var c=b.contents,d=0,e;e=c[d];d++)c[d]=e&&new M(a,e);CKEDITOR.tools.extend(this,b)};P.prototype={getContents:function(a){return D(this.contents,
a)},getButton:function(a){return D(this.buttons,a)},addContents:function(a,b){return E(this.contents,a,b)},addButton:function(a,b){return E(this.buttons,a,b)},removeContents:function(a){F(this.contents,a)},removeButton:function(a){F(this.buttons,a)}};M.prototype={get:function(a){return D(this.elements,a,"children")},add:function(a,b){return E(this.elements,a,b,"children")},remove:function(a){F(this.elements,a,"children")}};var J,z={},u,w={},Q=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=
a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},R=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),
a.data.preventDefault()))},S=function(a,b,c,d,e){(w[c]||(w[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},ba=function(a){for(var b in w){for(var c=w[b],d=c.length-1;0<=d;d--)c[d].dialog!=a&&c[d].uiElement!=a||c.splice(d,1);0===c.length&&delete w[b]}},da=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},ca=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(4>arguments.length)){var h=(d.call?d(b):d)||
"div",p=["\x3c",h," "],m=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},q=(g&&g.call?g.call(this,a,b):g)||"",n=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(m.display="none",this.notAllowed=!0);k.id=n;var r={};b.type&&(r["cke_dialog_ui_"+b.type]=1);b.className&&(r[b.className]=1);b.disabled&&(r.cke_disabled=1);for(var l=k["class"]&&k["class"].split?k["class"].split(" "):[],n=0;n<l.length;n++)l[n]&&(r[l[n]]=1);l=
[];for(n in r)l.push(n);k["class"]=l.join(" ");b.title&&(k.title=b.title);r=(b.style||"").split(";");b.align&&(l=b.align,m["margin-left"]="left"==l?0:"auto",m["margin-right"]="right"==l?0:"auto");for(n in m)r.push(n+":"+m[n]);b.hidden&&r.push("display:none");for(n=r.length-1;0<=n;n--)""===r[n]&&r.splice(n,1);0<r.length&&(k.style=(k.style?k.style+"; ":"")+r.join("; "));for(n in k)p.push(n+'\x3d"'+CKEDITOR.tools.htmlEncode(k[n])+'" ');p.push("\x3e",q,"\x3c/",h,"\x3e");c.push(p.join(""));(this._||(this._=
{})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}}));"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}}));CKEDITOR.event.implementOn(this);
this.registerEvents(b);this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&S(this,a,"CTRL+"+b.accessKey);var t=this;a.on("load",function(){var b=t.getInputElement();if(b){var c=t.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1;a._.hasFocus=!0;t.fire("focus");c&&this.addClass(c)});b.on("blur",function(){t.fire("blur");c&&this.removeClass(c)})}});CKEDITOR.tools.extend(this,b);this.keyboardFocusable&&(this.tabIndex=
b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=t.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.widths||null,h=e&&e.height||null,p,m={role:"presentation"};e&&e.align&&(m.align=e.align);CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},m,function(){var a=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(p=0;p<c.length;p++){var b="cke_dialog_ui_hbox_child",
d=[];0===p&&(b="cke_dialog_ui_hbox_first");p==c.length-1&&(b="cke_dialog_ui_hbox_last");a.push('\x3ctd class\x3d"',b,'" role\x3d"presentation" ');g?g[p]&&d.push("width:"+v(g[p])):d.push("width:"+Math.floor(100/c.length)+"%");h&&d.push("height:"+v(h));e&&void 0!==e.padding&&d.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[p].align&&d.push("text-align:"+f[p].align);0<d.length&&a.push('style\x3d"'+d.join("; ")+'" ');a.push("\x3e",c[p],"\x3c/td\x3e")}a.push("\x3c/tr\x3e\x3c/tbody\x3e");
return a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];b.push('style\x3d"');e&&e.expand&&b.push("height:100%;");b.push("width:"+v(g||"100%"),";");CKEDITOR.env.webkit&&b.push("float:none;");b.push('"');b.push('align\x3d"',
CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" ');b.push("\x3e\x3ctbody\x3e");for(var d=0;d<c.length;d++){var k=[];b.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');g&&k.push("width:"+v(g||"100%"));h?k.push("height:"+v(h[d])):e&&e.expand&&k.push("height:"+Math.floor(100/c.length)+"%");e&&void 0!==e.padding&&k.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&k.push("text-align:"+f[d].align);0<k.length&&b.push('style\x3d"',
k.join("; "),'" ');b.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',c[d],"\x3c/td\x3e\x3c/tr\x3e")}b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},
isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););if(!a)return this;a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})},e;for(e in a)if(c=
e.match(b))this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]);return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=
this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>
a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var a={build:function(a,c,d){for(var e=c.children,f,g=[],h=[],p=0;p<e.length&&(f=e[p]);p++){var m=[];g.push(m);h.push(CKEDITOR.dialog._.uiElementBuilders[f.type].build(a,f,m))}return new CKEDITOR.ui.dialog[c.type](a,h,g,d,c)}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",
a)})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0)};CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var a=
arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],c,d=CKEDITOR.VALIDATE_AND,e=[],f;for(f=0;f<a.length;f++)if("function"==typeof a[f])e.push(a[f]);else break;f<a.length&&"string"==typeof a[f]&&(c=a[f],f++);f<a.length&&"number"==typeof a[f]&&(d=a[f]);var n=d==CKEDITOR.VALIDATE_AND?!0:!1;for(f=0;f<e.length;f++)n=d==CKEDITOR.VALIDATE_AND?n&&e[f](b):n||e[f](b);return n?!0:c}},regex:function(a,b){return function(c){c=this&&this.getValue?this.getValue():c;return a.test(c)?!0:b}},
notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return f.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},
notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}};CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in z)z[c].remove();z={}}a=a.editor._.storedDialogs;for(var d in a)a[d].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];null===CKEDITOR.dialog._.currentTop&&N(this);if("function"==typeof d)c=
this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw O(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed");this.openDialog(a,b)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return c}})})();
CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(x){x.on("doubleclick",function(A){A.data.dialog&&x.openDialog(A.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1};b.canUndo=!1;b.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(b){var c=this;b.addCommand("a11yHelp",{exec:function(){var a=b.langCode,a=c.availableLangs[a]?
a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a];b.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");b.on("ariaEditorHelpLabel",function(a){a.data.label=b.lang.common.editorHelp})}})})();(function(){function f(c){var a=this.att;c=c&&c.hasAttribute(a)&&c.getAttribute(a)||"";void 0!==c&&this.setValue(c)}function g(){for(var c,a=0;a<arguments.length;a++)if(arguments[a]instanceof CKEDITOR.dom.element){c=arguments[a];break}if(c){var a=this.att,b=this.getValue();b?c.setAttribute(a,b):c.removeAttribute(a,b)}}var k={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(c){c||(c=k);var a=[];c.id&&a.push("id");c.dir&&a.push("dir");var b=
"";a.length&&(b+="["+a.join(",")+"]");c.classes&&(b+="(*)");c.styles&&(b+="{*}");return b},createAdvancedTab:function(c,a,b){a||(a=k);var d=c.lang.common,h={id:"advanced",label:d.advancedTab,title:d.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},e=[];if(a.id||a.dir)a.id&&e.push({id:"advId",att:"id",type:"text",requiredContent:b?b+"[id]":null,label:d.id,setup:f,commit:g}),a.dir&&e.push({id:"advLangDir",att:"dir",type:"select",requiredContent:b?b+"[dir]":null,label:d.langDir,"default":"",
style:"width:100%",items:[[d.notSet,""],[d.langDirLTR,"ltr"],[d.langDirRTL,"rtl"]],setup:f,commit:g}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(e)});if(a.styles||a.classes)e=[],a.styles&&e.push({id:"advStyles",att:"style",type:"text",requiredContent:b?b+"{cke-xyz}":null,label:d.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(d.invalidInlineStyle),onChange:function(){},getStyle:function(a,c){var b=this.getValue().match(new RegExp("(?:^|;)\\s*"+
a+"\\s*:\\s*([^;]*)","i"));return b?b[1]:c},updateStyle:function(a,b){var d=this.getValue(),e=c.document.createElement("span");e.setAttribute("style",d);e.setStyle(a,b);d=CKEDITOR.tools.normalizeCssText(e.getAttribute("style"));this.setValue(d,1)},setup:f,commit:g}),a.classes&&e.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:b?b+"(cke-xyz)":null,label:d.cssClasses,"default":"",setup:f,commit:g}]}),h.elements[0].children.push({type:"hbox",
widths:["50%","50%"],children:[].concat(e)});return h}})})();CKEDITOR.plugins.add("basicstyles",{init:function(c){var e=0,d=function(g,d,b,a){if(a){a=new CKEDITOR.style(a);var f=h[b];f.unshift(a);c.attachStyleStateChange(a,function(a){!c.readOnly&&c.getCommand(b).setState(a)});c.addCommand(b,new CKEDITOR.styleCommand(a,{contentForms:f}));c.ui.addButton&&c.ui.addButton(g,{label:d,command:b,toolbar:"basicstyles,"+(e+=10)})}},h={bold:["strong","b",["span",function(a){a=a.styles["font-weight"];return"bold"==a||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==
a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=c.config,a=c.lang.basicstyles;d("Bold",a.bold,"bold",b.coreStyles_bold);d("Italic",a.italic,"italic",b.coreStyles_italic);d("Underline",a.underline,"underline",b.coreStyles_underline);d("Strike",a.strike,"strike",b.coreStyles_strike);d("Subscript",a.subscript,
"subscript",b.coreStyles_subscript);d("Superscript",a.superscript,"superscript",b.coreStyles_superscript);c.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};
CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function q(a,f,d,b){if(!a.isReadOnly()&&!a.equals(d.editable())){CKEDITOR.dom.element.setMarker(b,a,"bidi_processed",1);b=a;for(var c=d.editable();(b=b.getParent())&&!b.equals(c);)if(b.getCustomData("bidi_processed")){a.removeStyle("direction");a.removeAttribute("dir");return}b="useComputedState"in d.config?d.config.useComputedState:1;(b?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=f&&(a.removeStyle("direction"),b?(a.removeAttribute("dir"),f!=a.getComputedStyle("direction")&&
a.setAttribute("dir",f)):a.setAttribute("dir",f),d.forceNextSelectionCheck())}}function v(a,f,d){var b=a.getCommonAncestor(!1,!0);a=a.clone();a.enlarge(d==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(a.checkBoundaryOfElement(b,CKEDITOR.START)&&a.checkBoundaryOfElement(b,CKEDITOR.END)){for(var c;b&&b.type==CKEDITOR.NODE_ELEMENT&&(c=b.getParent())&&1==c.getChildCount()&&!(b.getName()in f);)b=c;return b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in f&&b}}function p(a){return{context:"p",
allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(a,d){var b=a.config.useComputedState,c,b=void 0===b||b;if(!b){c=d.lastElement;for(var h=a.editable();c&&!(c.getName()in u||c.equals(h));){var e=c.getParent();if(!e)break;c=e}}c=c||d.block||d.blockLimit;c.equals(a.editable())&&(h=a.getSelection().getRanges()[0].getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&(c=h);c&&(b=b?c.getComputedStyle("direction"):
c.getStyle("direction")||c.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));b=(d.block||d.blockLimit||a.editable()).getDirection(1);b!=(a._.selDir||a.lang.dir)&&(a._.selDir=b,a.fire("contentDirChanged",b))},exec:function(f){var d=f.getSelection(),b=f.config.enterMode,c=d.getRanges();if(c&&c.length){for(var h={},e=d.createBookmarks(),c=c.createIterator(),g,
l=0;g=c.getNextRange(1);){var k=g.getEnclosedNode();k&&(!k||k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in r)||(k=v(g,t,b));k&&q(k,a,f,h);var m=new CKEDITOR.dom.walker(g),n=e[l].startNode,p=e[l++].endNode;m.evaluator=function(a){var c=b==CKEDITOR.ENTER_P?"p":"div",d;if(d=(a?a.type==CKEDITOR.NODE_ELEMENT:!1)&&a.getName()in t){if(c=a.is(c))c=(c=a.getParent())?c.type==CKEDITOR.NODE_ELEMENT:!1;d=!(c&&a.getParent().is("blockquote"))}return!!(d&&a.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(p)&
CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;k=m.next();)q(k,a,f,h);g=g.createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;k=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)q(k,a,f,h)}CKEDITOR.dom.element.clearAllMarkers(h);f.forceNextSelectionCheck();d.selectBookmarks(e);f.focus()}}}}function w(a){var f=a==l.setAttribute,d=a==l.removeAttribute,b=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(c,h){if(!this.isReadOnly()){var e;if(e=c==(f||d?
"dir":"direction")||"style"==c&&(d||b.test(h))){a:{e=this;for(var g=e.getDocument().getBody().getParent();e;){if(e.equals(g)){e=!1;break a}e=e.getParent()}e=!0}e=!e}if(e&&(e=this.getDirection(1),g=a.apply(this,arguments),e!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),g}return a.apply(this,arguments)}}var t={table:1,ul:1,ol:1,blockquote:1,div:1},r={},u={};CKEDITOR.tools.extend(r,t,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(u,r,{td:1});CKEDITOR.plugins.add("bidi",{init:function(a){function f(b,
c,d,e,f){a.addCommand(d,new CKEDITOR.command(a,e));a.ui.addButton&&a.ui.addButton(b,{label:c,command:d,toolbar:"bidi,"+f})}if(!a.blockless){var d=a.lang.bidi;f("BidiLtr",d.ltr,"bidiltr",p("ltr"),10);f("BidiRtl",d.rtl,"bidirtl",p("rtl"),20);a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})});a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var c=a.ui.space(a.config.toolbarLocation);if(c)c[b]("cke_mixed_dir_content")})}}});
for(var l=CKEDITOR.dom.element.prototype,n=["setStyle","removeStyle","setAttribute","removeAttribute"],m=0;m<n.length;m++)l[n[m]]=CKEDITOR.tools.override(l[n[m]],w)})();(function(){var m={exec:function(g){var a=g.getCommand("blockquote").state,k=g.getSelection(),c=k&&k.getRanges()[0];if(c){var h=k.createBookmarks();if(CKEDITOR.env.ie){var e=h[0].startNode,b=h[0].endNode,d;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break}if(b&&"blockquote"==b.getParent().getName())for(d=b;d=d.getPrevious();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){b.move(d);break}}var f=c.createIterator();
f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR;if(a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();)e.push(a);1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),b=h.shift(),c.insertNode(a),a.append(new CKEDITOR.dom.text("",g.document)),c.moveToBookmark(b),c.selectNodeContents(a),c.collapse(!0),b=c.createBookmark(),e.push(a),h.unshift(b));d=e[0].getParent();c=[];for(b=0;b<e.length;b++)a=e[b],d=d.getCommonAncestor(a.getParent());for(a={table:1,tbody:1,
tr:1,ol:1,ul:1};a[d.getName()];)d=d.getParent();for(b=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);)a=a.getParent();a.equals(b)||c.push(a);b=a}for(;0<c.length;)if(a=c.shift(),"blockquote"==a.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();)b.append(a.getFirst().remove()),e.push(b.getLast());b.replace(a)}else e.push(a);c=g.document.createElement("blockquote");for(c.insertBefore(e[0]);0<e.length;)a=e.shift(),c.append(a)}else if(a==CKEDITOR.TRISTATE_ON){b=[];
for(d={};a=f.getNextParagraph();){for(e=c=null;a.getParent();){if("blockquote"==a.getParent().getName()){c=a.getParent();e=a;break}a=a.getParent()}c&&e&&!e.getCustomData("blockquote_moveout")&&(b.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(d);a=[];e=[];for(d={};0<b.length;)f=b.shift(),c=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):f.remove().insertAfter(c):f.remove().insertBefore(c),c.getCustomData("blockquote_processed")||
(e.push(c),CKEDITOR.dom.element.setMarker(d,c,"blockquote_processed",!0)),a.push(f);CKEDITOR.dom.element.clearAllMarkers(d);for(b=e.length-1;0<=b;b--){c=e[b];a:{d=c;for(var f=0,m=d.getChildCount(),l=void 0;f<m&&(l=d.getChild(f));f++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){d=!1;break a}d=!0}d&&c.remove()}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(c=!0;a.length;)if(f=a.shift(),"div"==f.getName()){b=new CKEDITOR.dom.documentFragment(g.document);!c||!f.getPrevious()||f.getPrevious().type==
CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary()||b.append(g.document.createElement("br"));for(c=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(b);c&&b.append(g.document.createElement("br"));b.replace(f);c=!1}}k.selectBookmarks(h);g.focus()}},refresh:function(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",
requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(g){g.blockless||(g.addCommand("blockquote",m),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function r(b,a,c){a.type||(a.type="auto");if(c&&!1===b.fire("beforePaste",a)||!a.dataValue&&a.dataTransfer.isEmpty())return!1;a.dataValue||(a.dataValue="");if(CKEDITOR.env.gecko&&"drop"==a.method&&b.toolbox)b.once("afterPaste",function(){b.toolbox.focus()});return b.fire("paste",a)}function y(b){function a(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var d=function(a){b.readOnly&&"cut"==a.name||n.initPasteDataTransfer(a,b);a.data.preventDefault()};a.on("copy",
d);a.on("cut",d);a.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}a.on(n.mainPasteEvent,function(b){"beforepaste"==n.mainPasteEvent&&p||k(b)});"beforepaste"==n.mainPasteEvent&&(a.on("paste",function(a){v||(e(),a.data.preventDefault(),k(a),f("paste")||b.openDialog("paste"))}),a.on("contextmenu",g,null,null,0),a.on("beforepaste",function(b){!b.data||b.data.$.ctrlKey||b.data.$.shiftKey||g()},null,null,0));a.on("beforecut",function(){!p&&h(b)});var c;a.attachListener(CKEDITOR.env.ie?
a:b.document.getDocumentElement(),"mouseup",function(){c=setTimeout(function(){t()},0)});b.on("destroy",function(){clearTimeout(c)});a.on("keyup",t)}function c(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,exec:function(){"cut"==this.type&&h();var a;var d=this.type;if(CKEDITOR.env.ie)a=f(d);else try{a=b.document.$.execCommand(d,!1,null)}catch(c){a=!1}a||b.showNotification(b.lang.clipboard[this.type+"Error"]);return a}}}function d(){return{canUndo:!1,async:!0,exec:function(b,a){var d=function(a,
d){a&&r(b,a,!!d);b.fire("afterCommandExec",{name:"paste",command:c,returnValue:!!a})},c=this;"string"==typeof a?d({dataValue:a,method:"paste",dataTransfer:n.initPasteDataTransfer()},1):b.getClipboardData(d)}}}function e(){v=1;setTimeout(function(){v=0},100)}function g(){p=1;setTimeout(function(){p=0},10)}function f(a){var d=b.document,c=d.getBody(),e=!1,f=function(){e=!0};c.on(a,f);7<CKEDITOR.env.version?d.$.execCommand(a):d.$.selection.createRange().execCommand(a);c.removeListener(a,f);return e}
function h(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var a=b.getSelection(),d,c,e;a.getType()==CKEDITOR.SELECTION_ELEMENT&&(d=a.getSelectedElement())&&(c=a.getRanges()[0],e=b.document.createText(""),e.insertBefore(d),c.setStartBefore(e),c.setEndAfter(d),a.selectRanges([c]),setTimeout(function(){d.getParent()&&(e.remove(),a.selectElement(d))},0))}}function l(a,d){var c=b.document,e=b.editable(),f=function(b){b.cancel()},q;if(!c.getById("cke_pastebin")){var g=b.getSelection(),h=g.createBookmarks();
CKEDITOR.env.ie&&g.root.fire("selectionchange");var m=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",c);m.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var k=0,c=c.getWindow();CKEDITOR.env.webkit?(e.append(m),m.addClass("cke_editable"),e.is("body")||(k="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),k=k.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(m);m.setStyles({position:"absolute",
top:c.getScrollPosition().y-k+10+"px",width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&m.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(k=m.getParent().isReadOnly())?(m.setOpacity(0),m.setAttribute("contenteditable",!0)):m.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-1000px");b.on("selectionChange",f,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)q=e.once("blur",f,null,null,-100);
k&&m.focus();k=new CKEDITOR.dom.range(m);k.selectNodeContents(m);var t=k.select();CKEDITOR.env.ie&&(q=e.once("blur",function(){b.lockSelection(t)}));var l=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=l);q&&q.removeListener();CKEDITOR.env.ie&&e.focus();g.selectBookmarks(h);m.remove();var a;CKEDITOR.env.webkit&&(a=m.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(m=a);b.removeListener("selectionChange",f);
d(m.getHtml())},0)}}function z(){if("paste"==n.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus();e();var a=b.focusManager;a.lock();if(b.editable().fire(n.mainPasteEvent)&&!f("paste"))return a.unlock(),!1;a.unlock();return!0}function q(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable();e();"paste"==n.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),
setTimeout(function(){b.fire("saveSnapshot")},50)}}function k(a){var d={type:"auto",method:"paste",dataTransfer:n.initPasteDataTransfer(a)};d.dataTransfer.cacheData();var c=!1!==b.fire("beforePaste",d);c&&n.canClipboardApiBeTrusted(d.dataTransfer,b)?(a.data.preventDefault(),setTimeout(function(){r(b,d)},0)):l(a,function(a){d.dataValue=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");c&&r(b,d)})}function t(){if("wysiwyg"==b.mode){var a=u("paste");b.getCommand("cut").setState(u("cut"));b.getCommand("copy").setState(u("copy"));
b.getCommand("paste").setState(a);b.fire("pasteState",a)}}function u(a){if(w&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;a=b.getSelection();var d=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==d.length&&d[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var n=CKEDITOR.plugins.clipboard,p=0,v=0,w=0;(function(){b.on("key",q);b.on("contentDom",a);b.on("selectionChange",function(b){w=b.data.selection.getRanges()[0].checkReadOnly();
t()});b.contextMenu&&b.contextMenu.addListener(function(b,a){w=a.getRanges()[0].checkReadOnly();return{cut:u("cut"),copy:u("copy"),paste:u("paste")}})})();(function(){function a(d,c,e,f,q){var g=b.lang.clipboard[c];b.addCommand(c,e);b.ui.addButton&&b.ui.addButton(d,{label:g,command:c,toolbar:"clipboard,"+f});b.addMenuItems&&b.addMenuItem(c,{label:g,command:c,group:"clipboard",order:q})}a("Cut","cut",c("cut"),10,1);a("Copy","copy",c("copy"),20,4);a("Paste","paste",d(),30,8)})();b.getClipboardData=
function(a,d){function c(a){a.removeListener();a.cancel();d(a.data)}function e(a){a.removeListener();a.cancel();k=!0;d({type:g,dataValue:a.data.dataValue,dataTransfer:a.data.dataTransfer,method:"paste"})}function f(){this.customTitle=a&&a.title}var q=!1,g="auto",k=!1;d||(d=a,a=null);b.on("paste",c,null,null,0);b.on("beforePaste",function(a){a.removeListener();q=!0;g=a.data.type},null,null,1E3);!1===z()&&(b.removeListener("paste",c),q&&b.fire("pasteDialog",f)?(b.on("pasteDialogCommit",e),b.on("dialogHide",
function(a){a.removeListener();a.data.removeListener("pasteDialogCommit",e);setTimeout(function(){k||d(null)},10)})):d(null))}}function A(b){if(CKEDITOR.env.webkit){if(!b.match(/^[^<]*$/g)&&!b.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!b.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}
function B(b,a){function c(a){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",~~(a/2))+(1==a%2?"\x3cbr\x3e":"")}a=a.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");a=a.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()});if(a.match(/^[^<]$/))return a;CKEDITOR.env.webkit&&-1<a.indexOf("\x3cdiv\x3e")&&(a=a.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),a.match(/<div>(<br>|)<\/div>/)&&
(a="\x3cp\x3e"+a.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("\x3c/div\x3e\x3cdiv\x3e").length+1)})+"\x3c/p\x3e"),a=a.replace(/<\/div><div>/g,"\x3cbr\x3e"),a=a.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(a=a.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<a.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(a="\x3cp\x3e"+a.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"\x3c/p\x3e"));return C(b,a)}function D(){function b(){var a={},b;for(b in CKEDITOR.dtd)"$"!=
b.charAt(0)&&"div"!=b&&"span"!=b&&(a[b]=1);return a}var a={};return{get:function(c){return"plain-text"==c?a.plainText||(a.plainText=new CKEDITOR.filter("br")):"semantic-content"==c?((c=a.semanticContent)||(c=new CKEDITOR.filter,c.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),c=a.semanticContent=c),c):c?new CKEDITOR.filter(c):null}}}function x(b,a,c){a=CKEDITOR.htmlParser.fragment.fromHtml(a);var d=new CKEDITOR.htmlParser.basicWriter;c.applyTo(a,!0,!1,b.activeEnterMode);a.writeHtml(d);
return d.getHtml()}function C(b,a){b.enterMode==CKEDITOR.ENTER_BR?a=a.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("\x3cbr\x3e",a.length/7*2)}).replace(/<\/?p>/g,""):b.enterMode==CKEDITOR.ENTER_DIV&&(a=a.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return a}function E(b){b.data.preventDefault();b.data.$.dataTransfer.dropEffect="none"}function F(b){var a=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function c(a,d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);c.sourceEditor.fire("saveSnapshot");
c.sourceEditor.editable().extractHtmlFromRange(a);c.sourceEditor.getSelection().selectRanges([a]);c.sourceEditor.fire("saveSnapshot")}function d(d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);a.resetDragDataTransfer()}function e(a,d,c){var e={$:a.data.$,target:a.data.getTarget()};d&&(e.dragRange=d);c&&(e.dropRange=c);!1===b.fire(a.name,e)&&a.data.preventDefault()}function g(a){a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent());return a.getChildCount()}var f=b.editable(),h=CKEDITOR.plugins.clipboard.getDropTarget(b),
l=b.ui.space("top"),p=b.ui.space("bottom");a.preventDefaultDropOnElement(l);a.preventDefaultDropOnElement(p);f.attachListener(h,"dragstart",e);f.attachListener(b,"dragstart",a.resetDragDataTransfer,a,null,1);f.attachListener(b,"dragstart",function(d){a.initDragDataTransfer(d,b)},null,null,2);f.attachListener(b,"dragstart",function(){var d=a.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(a.dragStartContainerChildCount=d?g(d.startContainer):null,a.dragEndContainerChildCount=
d?g(d.endContainer):null)},null,null,100);f.attachListener(h,"dragend",e);f.attachListener(b,"dragend",a.initDragDataTransfer,a,null,1);f.attachListener(b,"dragend",a.resetDragDataTransfer,a,null,100);f.attachListener(h,"dragover",function(a){var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()});f.attachListener(h,"drop",function(d){if(!d.data.$.defaultPrevented){d.data.preventDefault();
var c=d.data.getTarget();if(!c.isReadOnly()||c.type==CKEDITOR.NODE_ELEMENT&&c.is("html")){var c=a.getRangeAtDropPosition(d,b),f=a.dragRange;c&&e(d,f,c)}}},null,null,9999);f.attachListener(b,"drop",a.initDragDataTransfer,a,null,1);f.attachListener(b,"drop",function(e){if(e=e.data){var f=e.dropRange,g=e.dragRange,h=e.dataTransfer;h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(g,f,h,b)},0):h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c(g,f,h):
d(f,h)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(b){var a,c=D();b.config.forcePasteAsPlainText?a="plain-text":b.config.pasteFilter?a=b.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in b.config||(a="semantic-content");b.pasteFilter=c.get(a);y(b);F(b);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));b.on("paste",function(a){a.data.dataTransfer||(a.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!a.data.dataValue){var c=
a.data.dataTransfer,g=c.getData("text/html");if(g)a.data.dataValue=g,a.data.type="html";else if(g=c.getData("text/plain"))a.data.dataValue=b.editable().transformPlainTextToHtml(g),a.data.type="text"}},null,null,1);b.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,
"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<b.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(b.match(/^<[^<]+cke_(editable|contents)/i)){var f,h,l=new CKEDITOR.dom.element("div");for(l.setHtml(b);1==l.getChildCount()&&(f=l.getFirst())&&f.type==CKEDITOR.NODE_ELEMENT&&(f.hasClass("cke_editable")||f.hasClass("cke_contents"));)l=h=f;
h&&(b=h.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,f){return f.toLowerCase()in c?(a.data.preSniffing="html","\x3c"+f):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,f){return f in c?(a.data.endsWithEOL=1,"\x3c/"+f+"\x3e"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1"));a.data.dataValue=b},null,null,3);b.on("paste",function(a){a=a.data;var e=a.type,g=a.dataValue,f,h=b.config.clipboard_defaultContentType||"html",
l=a.dataTransfer.getTransferType(b);f="html"==e||"html"==a.preSniffing?"html":A(g);"htmlifiedtext"==f&&(g=B(b.config,g));"text"==e&&"html"==f?g=x(b,g,c.get("plain-text")):l==CKEDITOR.DATA_TRANSFER_EXTERNAL&&b.pasteFilter&&!a.dontFilter&&(g=x(b,g,b.pasteFilter));a.startsWithEOL&&(g='\x3cbr data-cke-eol\x3d"1"\x3e'+g);a.endsWithEOL&&(g+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==e&&(e="html"==f||"html"==h?"html":"text");a.type=e;a.dataValue=g;delete a.preSniffing;delete a.startsWithEOL;delete a.endsWithEOL},
null,null,6);b.on("paste",function(a){a=a.data;a.dataValue&&(b.insertHtml(a.dataValue,a.type,a.range),setTimeout(function(){b.fire("afterPaste")},0))},null,null,1E3);b.on("pasteDialog",function(a){setTimeout(function(){b.openDialog("paste",a.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?
"beforepaste":"paste",canClipboardApiBeTrusted:function(b,a){return b.getTransferType(a)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!b.isEmpty()||CKEDITOR.env.gecko&&(b.getData("text/html")||b.getFilesCount())?!0:!1},getDropTarget:function(b){var a=b.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||a.isInline()?a:b.document},fixSplitNodesAfterDrop:function(b,a,c,d){function e(b,c,d){var e=b;e.type==CKEDITOR.NODE_TEXT&&(e=b.getParent());if(e.equals(c)&&d!=c.getChildCount())return b=
a.startContainer.getChild(a.startOffset-1),c=a.startContainer.getChild(a.startOffset),b&&b.type==CKEDITOR.NODE_TEXT&&c&&c.type==CKEDITOR.NODE_TEXT&&(d=b.getLength(),b.setText(b.getText()+c.getText()),c.remove(),a.setStart(b,d),a.collapse(!0)),!0}var g=a.startContainer;"number"==typeof d&&"number"==typeof c&&g.type==CKEDITOR.NODE_ELEMENT&&(e(b.startContainer,g,c)||e(b.endContainer,g,d))},isDropRangeAffectedByDragRange:function(b,a){var c=a.startContainer,d=a.endOffset;return b.endContainer.equals(c)&&
b.endOffset<=d||b.startContainer.getParent().equals(c)&&b.startContainer.getIndex()<d||b.endContainer.getParent().equals(c)&&b.endContainer.getIndex()<d?!0:!1},internalDrop:function(b,a,c,d){var e=CKEDITOR.plugins.clipboard,g=d.editable(),f,h;d.fire("saveSnapshot");d.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,a,e.dragStartContainerChildCount,e.dragEndContainerChildCount);(h=this.isDropRangeAffectedByDragRange(b,a))||(f=b.createBookmark(!1));
e=a.clone().createBookmark(!1);h&&(f=b.createBookmark(!1));b=f.startNode;a=f.endNode;h=e.startNode;a&&b.getPosition(h)&CKEDITOR.POSITION_PRECEDING&&a.getPosition(h)&CKEDITOR.POSITION_FOLLOWING&&h.insertBefore(b);b=d.createRange();b.moveToBookmark(f);g.extractHtmlFromRange(b,1);a=d.createRange();a.moveToBookmark(e);r(d,{dataTransfer:c,method:"drop",range:a},1);d.fire("unlockSnapshot")},getRangeAtDropPosition:function(b,a){var c=b.data.$,d=c.clientX,e=c.clientY,g=a.getSelection(!0).getRanges()[0],f=
a.createRange();if(b.data.testRange)return b.data.testRange;if(document.caretRangeFromPoint)c=a.document.$.caretRangeFromPoint(d,e),f.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),f.collapse(!0);else if(c.rangeParent)f.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),f.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&g&&a.editable().hasFocus)return g;if(document.body.createTextRange){a.focus();c=a.document.getBody().$.createTextRange();try{for(var h=!1,l=0;20>l&&
!h;l++){if(!h)try{c.moveToPoint(d,e-l),h=!0}catch(p){}if(!h)try{c.moveToPoint(d,e+l),h=!0}catch(q){}}if(h){var k="cke-temp-"+(new Date).getTime();c.pasteHTML('\x3cspan id\x3d"'+k+'"\x3e\x3c/span\x3e');var t=a.document.getById(k);f.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);t.remove()}else{var u=a.document.$.elementFromPoint(d,e),n=new CKEDITOR.dom.element(u),r;if(n.equals(a.editable())||"html"==n.getName())return g&&g.startContainer&&!g.startContainer.equals(a.editable())?g:null;r=n.getClientRect();
d<r.left?f.setStartAt(n,CKEDITOR.POSITION_AFTER_START):f.setStartAt(n,CKEDITOR.POSITION_BEFORE_END);f.collapse(!0)}}catch(v){return null}}else return null}return f},initDragDataTransfer:function(b,a){var c=b.data.$?b.data.$.dataTransfer:null,d=new this.dataTransfer(c,a);c?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d;b.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(b,a){if(this.isCustomCopyCutSupported&&
b&&b.data&&b.data.$){var c=new this.dataTransfer(b.data.$.clipboardData,a);this.copyCutData&&c.id==this.copyCutData.id?(c=this.copyCutData,c.$=b.data.$.clipboardData):this.copyCutData=c;return c}return new this.dataTransfer(null,a)},preventDefaultDropOnElement:function(b){b&&b.on("dragover",E)}};var p=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(b,a){b&&(this.$=b);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,
fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(a){a=a.toLowerCase();return"text"==a||"text/plain"==a?"Text":"url"==a?"URL":a}};this.id=this.getData(p);this.id||(this.id="Text"==p?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=p)try{this.$.setData(p,this.id)}catch(c){}a&&(this.sourceEditor=a,this.setData("text/html",a.getSelectedHtml(1)),"Text"==p||this.getData("text/plain")||this.setData("text/plain",a.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=
1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(b){b=this._.normalizeType(b);var a=this._.data[b];if(void 0===a||null===a||""===a)try{a=this.$.getData(b)}catch(c){}if(void 0===a||null===a||""===a)a="";"text/html"==b?(a=a.replace(this._.metaRegExp,""),(b=this._.bodyRegExp.exec(a))&&b.length&&(a=b[1],a=a.replace(this._.fragmentRegExp,""))):"Text"==b&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==a.substring(0,
7)&&(a="");return a},setData:function(b,a){b=this._.normalizeType(b);this._.data[b]=a;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==b||"Text"==b){"Text"==p&&"Text"==b&&(this.id=a);try{this.$.setData(b,a)}catch(c){}}},getTransferType:function(b){return this.sourceEditor?this.sourceEditor==b?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function b(b){b=a._.normalizeType(b);var c=a.getData(b);c&&(a._.data[b]=
c)}if(this.$){var a=this,c,d;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(c=0;c<this.$.types.length;c++)b(this.$.types[c])}else b("Text"),b("URL");d=this._getImageFromClipboard();if(this.$&&this.$.files||d){this._.files=[];for(c=0;c<this.$.files.length;c++)this._.files.push(this.$.files[c]);0===this._.files.length&&d&&this._.files.push(d)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:
this._getImageFromClipboard()?1:0},getFile:function(b){return this._.files.length?this._.files[b]:this.$&&this.$.files&&this.$.files.length?this.$.files[b]:0===b?this._getImageFromClipboard():void 0},isEmpty:function(){var b={},a;if(this.getFilesCount())return!1;for(a in this._.data)b[a]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)b[this.$.types[c]]=1}else b.Text=1,b.URL=1;"Text"!=p&&(b[p]=0);for(a in b)if(b[a]&&""!==
this.getData(a))return!1;return!0},_getImageFromClipboard:function(){var b;if(this.$&&this.$.items&&this.$.items[0])try{if((b=this.$.items[0].getAsFile())&&b.type)return b}catch(a){}}}})();(function(){var c='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(c+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var c=c+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),c=c+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',
r=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),t=CKEDITOR.addTemplate("button",c);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};
CKEDITOR.ui.button.prototype={render:function(a,b){function c(){var e=a.mode;e&&(e=this.modes[e]?void 0!==k[e]?k[e]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:e,this.setState(e),this.refresh&&this.refresh())}var l=CKEDITOR.env,m=this._.id=CKEDITOR.tools.getNextId(),f="",g=this.command,n;this._.editor=a;var d={id:m,button:this,editor:a,focus:function(){CKEDITOR.document.getById(m).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},
u=CKEDITOR.tools.addFunction(function(a){if(d.onkey)return a=new CKEDITOR.dom.event(a),!1!==d.onkey(d,a.getKeystroke())}),v=CKEDITOR.tools.addFunction(function(a){var b;d.onfocus&&(b=!1!==d.onfocus(d,new CKEDITOR.dom.event(a)));return b}),p=0;d.clickFn=n=CKEDITOR.tools.addFunction(function(){p&&(a.unlockSelection(1),p=0);d.execute();l.iOS&&a.focus()});if(this.modes){var k={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(k[a.mode]=this._.state)},this);a.on("activeFilterChange",
c,this);a.on("mode",c,this);!this.readOnly&&a.on("readOnly",c,this)}else g&&(g=a.getCommand(g))&&(g.on("state",function(){this.setState(g.state)},this),f+=g.state==CKEDITOR.TRISTATE_ON?"on":g.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");if(this.directional)a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst();b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl");d.setAttribute("style",CKEDITOR.skin.getIconStyle(h,
"rtl"==b,this.icon,this.iconOffset))},this);g||(f+="off");var q=this.name||this.command,h=q;this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null);f={id:m,name:q,iconName:h,label:this.label,cls:this.className||"",state:f,ariaDisabled:"disabled"==f?"true":"false",title:this.title,titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:u,focusFn:v,clickFn:n,style:CKEDITOR.skin.getIconStyle(h,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?
r.output():""};t.output(f,b);if(this.onRender)this.onRender();return d},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?
b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b);return this._.feature=b}};CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(c){var a=this._;a.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(c),a.on?a.panel.hide():a.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){var a=c.panel||{};delete c.panel;this.base(c);this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.block={attributes:a.attributes};this.hasArrow=a.toolbarRelated=
!0;this.click=e;this._={panelDefinition:a}},statics:{handler:{create:function(c){return new CKEDITOR.ui.panelButton(c)}}},proto:{createPanel:function(c){var a=this._;if(!a.panel){var f=this._.panelDefinition,e=this._.panelDefinition.block,g=f.parent||CKEDITOR.document.getBody(),d=this._.panel=new CKEDITOR.ui.floatPanel(c,g,f),f=d.addBlock(a.id,e),b=this;d.onShow=function(){b.className&&this.element.addClass(b.className+"_panel");b.setState(CKEDITOR.TRISTATE_ON);a.on=1;b.editorFocus&&c.focus();if(b.onOpen)b.onOpen()};
d.onHide=function(d){b.className&&this.element.getFirst().removeClass(b.className+"_panel");b.setState(b.modes&&b.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.on=0;if(!d&&b.onClose)b.onClose()};d.onEscape=function(){d.hide(1);b.document.getById(a.id).focus()};if(this.onBlock)this.onBlock(d,f);f.onHide=function(){a.on=0;b.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});
CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var f=CKEDITOR.addTemplate("panel",
'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),g=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),h=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');
CKEDITOR.ui.panel.prototype={render:function(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));a.write(h.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+
b+");"},d)));a.getWindow().$.CKEDITOR=CKEDITOR;a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this);a=a.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var d={editorId:a.id,id:this.id,langCode:a.langCode,
dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";d.frame=g.output({id:this.id+"_frame",src:e})}e=f.output(d);b&&b.push(e);return e},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),
b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,d=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");b&&b.hide();this._.currentBlock=a;CKEDITOR.fire("ariaWidget",d);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.show();return a},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=
CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=
a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){var d=this.keys[a];switch(d){case "next":for(var e=this._.focusIndex,d=this.element.getElementsByTag("a"),c;c=d.getItem(++e);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}return c||
b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case "prev":e=this._.focusIndex;for(d=this.element.getElementsByTag("a");0<e&&(c=d.getItem(--e));){if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}c=null}return c||b?!1:(this._.focusIndex=d.count(),this.onKeyDown(a,1));case "click":case "mouseup":return e=this._.focusIndex,(c=0<=e&&this.element.getElementsByTag("a").getItem(e))&&(c.$[d]?c.$[d]():c.$["on"+d]()),!1}return!0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});
(function(){function v(a,b,c,l,h){h=CKEDITOR.tools.genKey(b.getUniqueId(),c.getUniqueId(),a.lang.dir,a.uiColor||"",l.css||"",h||"");var g=f[h];g||(g=f[h]=new CKEDITOR.ui.panel(b,l),g.element=c.append(CKEDITOR.dom.element.createFromHtml(g.render(a),b)),g.element.setStyles({display:"none",position:"absolute"}));return g}var f={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(a,b,c,l){function h(){e.hide()}c.forceIFrame=1;c.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&
(b=CKEDITOR.document.getById("cke_"+a.name));var g=b.getDocument();l=v(a,g,b,c,l||0);var m=l.element,p=m.getFirst(),e=this;m.disableContextMenu();this.element=m;this._={editor:a,panel:l,parentElement:b,definition:c,document:g,iframe:p,children:[],dir:a.lang.dir,showBlockParams:null};a.on("mode",h);a.on("resize",h);g.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,
b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,l,h,g){var m=this._.panel,p=m.showBlock(a);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var e=this._.editor.editable();this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var k=this.element,e=this._.iframe,e=CKEDITOR.env.ie&&!CKEDITOR.env.edge?e:new CKEDITOR.dom.window(e.$.contentWindow),f=k.getDocument(),r=this._.parentElement.getPositionedAncestor(),
t=b.getDocumentPosition(f),f=r?r.getDocumentPosition(f):{x:0,y:0},q="rtl"==this._.dir,d=t.x+(l||0)-f.x,n=t.y+(h||0)-f.y;!q||1!=c&&4!=c?q||2!=c&&3!=c||(d+=b.$.offsetWidth-1):d+=b.$.offsetWidth;if(3==c||4==c)n+=b.$.offsetHeight-1;this._.panel._.offsetParentId=b.getId();k.setStyles({top:n+"px",left:0,display:""});k.setOpacity(0);k.getFirst().removeStyle("width");this._.editor.focusManager.add(e);this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(a){function u(){delete this._.returnFocus;
this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(u,0,this)):u.call(this))},this),e.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(e.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),e.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,
this._.blurSet=1);m.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this);CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=k;a.removeStyle("width");if(p.autoSize){var b=p.element.getDocument(),b=(CKEDITOR.env.webkit?p.element:b.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3);a.setStyle("width",b+10+"px");b=p.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&
0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3);a.setStyle("height",b+"px");m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");q&&(d-=k.$.offsetWidth);k.setStyle("left",d+"px");var b=m.element.getWindow(),a=k.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,e=a.height||a.bottom-a.top,l=q?a.right:b.width-a.left,h=q?b.width-a.right:a.left;q?l<c&&(d=h>c?d+c:b.width>c?d-a.left:d-a.right+b.width):l<c&&(d=h>c?d-c:b.width>
c?d-a.right+b.width:d-a.left);c=a.top;b.height-a.top<e&&(n=c>e?n-e:b.height>e?n-a.bottom+b.height:n-a.top);CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(k.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(d=CKEDITOR.env.ie8Compat?d-2*k.getDocument().getDocumentElement().$.scrollLeft:d-(a.$.scrollWidth-a.$.clientWidth)));var a=k.getFirst(),f;(f=a.getCustomData("activePanel"))&&f.onHide&&f.onHide.call(this,1);a.setCustomData("activePanel",this);
k.setStyles({top:n+"px",left:d+"px"});k.setOpacity(1);g&&g()},this);m.isLoaded?a():m.onLoad=a;CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();p.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;
this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();
this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus)CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(a){var b=this._.panel;void 0!==a&&(b.allowBlur=a);return b.allowBlur},showAsChild:function(a,b,c,f,h,g){if(this._.activeChild!=a||a._.panel._.offsetParentId!=c.getId())this.hideChild(),a.onHide=
CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,f,h,g),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var a=CKEDITOR.tools.isEmpty(CKEDITOR.instances),
b;for(b in f){var c=f[b];a?c.destroy():c.element.hide()}a&&(f={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(c){function r(p,g,e,h){var k=new CKEDITOR.style(l["colorButton_"+g+"Style"]),m=CKEDITOR.tools.getNextId()+"_colorBox";c.ui.add(p,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+h,allowedContent:k,requiredContent:k,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":f.panelTitle}},onBlock:function(a,b){b.autoSize=!0;b.element.addClass("cke_colorblock");
b.element.setHtml(u(a,g,m));b.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var d=b.keys,e="rtl"==c.lang.dir;d[e?37:39]="next";d[40]="next";d[9]="next";d[e?39:37]="prev";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d[32]="click"},refresh:function(){c.activeFilter.check(k)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var a=c.getSelection(),a=a&&a.getStartElement(),a=c.elementPath(a),b;if(a){a=a.block||a.blockLimit||c.document.getBody();do b=
a&&a.getComputedStyle("back"==g?"background-color":"color")||"transparent";while("back"==g&&"transparent"==b&&a&&(a=a.getParent()));b&&"transparent"!=b||(b="#ffffff");this._.panel._.iframe.getFrameDocument().getById(m).setStyle("background-color",b);return b}}})}function u(p,g,e){var h=[],k=l.colorButton_colors.split(","),m=c.plugins.colordialog&&!1!==l.colorButton_enableMore,a=k.length+(m?2:1),b=CKEDITOR.tools.addFunction(function(a,b){function d(a){this.removeListener("ok",d);this.removeListener("cancel",
d);"ok"==a.name&&e(this.getContentElement("picker","selectedColor").getValue(),b)}var e=arguments.callee;if("?"==a)c.openDialog("colordialog",function(){this.on("ok",d);this.on("cancel",d)});else{c.focus();p.hide();c.fire("saveSnapshot");c.removeStyle(new CKEDITOR.style(l["colorButton_"+b+"Style"],{color:"inherit"}));if(a){var f=l["colorButton_"+b+"Style"];f.childRule="back"==b?function(a){return t(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||t(a)};c.applyStyle(new CKEDITOR.style(f,
{color:a}))}c.fire("saveSnapshot")}});h.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',f.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",null,'",g,"');return false;\" href\x3d\"javascript:void('",f.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',a,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',e,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',
f.auto,'\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(e=0;e<k.length;e++){0===e%8&&h.push("\x3c/tr\x3e\x3ctr\x3e");var d=k[e].split("/"),n=d[0],q=d[1]||n;d[1]||(n="#"+n.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));d=c.lang.colorbutton.colors[q]||q;h.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',d,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",'",n,"','",g,"'); return false;\" href\x3d\"javascript:void('",
d,'\')" role\x3d"option" aria-posinset\x3d"',e+2,'" aria-setsize\x3d"',a,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',q,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}m&&h.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',f.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",'?','",g,"');return false;\" href\x3d\"javascript:void('",f.more,"')\"",' role\x3d"option" aria-posinset\x3d"',
a,'" aria-setsize\x3d"',a,'"\x3e',f.more,"\x3c/a\x3e\x3c/td\x3e");h.push("\x3c/tr\x3e\x3c/table\x3e");return h.join("")}function t(c){return"false"==c.getAttribute("contentEditable")||c.getAttribute("data-nostyle")}var l=c.config,f=c.lang.colorbutton;CKEDITOR.env.hc||(r("TextColor","fore",f.textColorTitle,10),r("BGColor","back",f.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";
CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(b){var c=new CKEDITOR.dialogCommand("colordialog");c.editorFocus=!1;b.addCommand("colordialog",c);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");b.getColorFromDialog=function(c,f){var d=function(a){this.removeListener("ok",d);this.removeListener("cancel",d);a="ok"==a.name?this.getValueOf("picker","selectedColor"):null;c.call(f,a)},e=function(a){a.on("ok",d);a.on("cancel",d)};b.execCommand("colordialog");if(b._.storedDialogs&&
b._.storedDialogs.colordialog)e(b._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener();b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){e(this);b.onLoad=a;"function"==typeof a&&a.call(this)}})}})}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));a.addCommand("templates",new CKEDITOR.dialogCommand("templates"));a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var c={},f={};CKEDITOR.addTemplates=function(a,d){c[a]=d};CKEDITOR.getTemplates=function(a){return c[a]};CKEDITOR.loadTemplates=function(a,d){for(var e=
[],b=0,c=a.length;b<c;b++)f[a[b]]||(e.push(a[b]),f[a[b]]=1);e.length?CKEDITOR.scriptLoader.load(e,d):setTimeout(d,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(g){for(var h=g.config.menu_groups.split(","),p=g._.menuGroups={},n=g._.menuItems={},a=0;a<h.length;a++)p[h[a]]=a+1;g.addMenuGroup=function(b,a){p[b]=a||100};g.addMenuItem=function(a,c){p[c.group]&&(n[a]=new CKEDITOR.menuItem(this,a,c))};g.addMenuItems=function(a){for(var c in a)this.addMenuItem(c,a[c])};g.getMenuItem=function(a){return n[a]};g.removeMenuItem=function(a){delete n[a]}}});
(function(){function g(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}var h='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(h+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(h+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var h=h+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),p=CKEDITOR.addTemplate("menuItem",h+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),
n=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),m=c.block.attributes=c.attributes||{};!m.role&&(m.role="menu");this._.panelDefinition=
c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),m=this._.listeners;this.removeAll();for(var e=0;e<m.length;e++){var l=m[e](b,a,c);if(l)for(var k in l){var f=this.editor.getMenuItem(k);!f||f.command&&!this.editor.getCommand(f.command).state||(f.state=l[k],this.add(f))}}},onClick:function(a){this.hide();if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;b?b._.panel.hideChild(1):
27==a&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var m in c){var e=this.editor.getMenuItem(m);e&&(e.state=c[m],b.add(e))}var l=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+
String(a));setTimeout(function(){b.show(l,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length);this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,b,c,m){if(!this.parent&&(this._.onShow(),!this.items.length))return;b=b||("rtl"==this.editor.lang.dir?2:1);var e=this.items,l=this.editor,k=this._.panel,f=this._.element;if(!k){k=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);
k.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this);k.onShow=function(){k._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};k.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);f=k.addBlock(this.id,this._.panelDefinition.block);f.autoSize=!0;var d=f.keys;d[40]="next";d[9]="next";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d["rtl"==l.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";d[32]=CKEDITOR.env.ie?"mouseup":
"click";CKEDITOR.env.ie&&(d[13]="mouseup");f=this._.element=f.element;d=f.getDocument();d.getBody().setStyle("overflow","hidden");d.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,l.config.menu_subMenuDelay||400,this,[a])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);
this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b)},this)}g(e);for(var d=l.elementPath(),d=['\x3cdiv class\x3d"cke_menu'+(d&&d.direction()!=l.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],h=e.length,p=h&&e[0].group,n=0;n<h;n++){var q=e[n];p!=q.group&&(d.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),
p=q.group);q.render(this,n,d)}d.push("\x3c/div\x3e");f.setHtml(d.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(k,this.id,a,b,c,m):k.showBlock(this.id,a,b,c,m);l.fire("menuShow",[k])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b});this.group=
a._.menuGroups[this.group];this.editor=a;this.name=b},proto:{render:function(a,b,c){var h=a.id+String(b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,l="",k=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(l=' aria-checked\x3d"'+(e==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,d="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=
this.icon);a={id:h,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:k,hasPopup:f?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?n.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:l};
p.output(a,c)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){a.on("contextmenu",function(a){a=a.data;var c=CKEDITOR.env.webkit?f:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!c){a.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,
b=(new CKEDITOR.dom.elementPath(a.getTarget(),c.editable())).contains(function(a){return a.hasAttribute("contenteditable")},!0);b&&"false"==b.getAttribute("contenteditable")&&c.getSelection().fake(b)}var b=a.getTarget().getDocument(),d=a.getTarget().getDocument().getDocumentElement(),c=!b.equals(CKEDITOR.document),b=b.getWindow().getScrollPosition(),g=c?a.$.clientX:a.$.pageX||b.x+a.$.clientX,h=c?a.$.clientY:a.$.pageY||b.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(d,null,g,h)},CKEDITOR.env.ie?
200:0,this)}},this);if(CKEDITOR.env.webkit){var f,d=function(){f=0};a.on("keydown",function(a){f=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey});a.on("keyup",d);a.on("contextmenu",d)}},open:function(a,e,f,d){this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(a,e,f,d)}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)});
a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(a){if(!a.blockless){var c=a.lang.div,b="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(b+=";div[dir,id,lang,title]{*}");a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:b,requiredContent:"div",contextSensitive:!0,refresh:function(a,c){this.setState("div"in(a.config.div_wrapTable?c.root:c.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));a.addCommand("editdiv",
new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));a.addCommand("removediv",{requiredContent:"div",exec:function(a){function c(b){(b=CKEDITOR.plugins.div.getSurroundDiv(a,b))&&!b.data("cke-div-added")&&(f.push(b),b.data("cke-div-added"))}for(var b=a.getSelection(),g=b&&b.getRanges(),e,h=b.createBookmarks(),f=[],d=0;d<g.length;d++)e=g[d],e.collapsed?c(b.getStartElement()):(e=new CKEDITOR.dom.walker(e),e.evaluator=c,e.lastForward());for(d=0;d<f.length;d++)f[d].remove(!0);b.selectBookmarks(h)}});
a.ui.addButton&&a.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv",toolbar:"blocks,50"});a.addMenuItems&&(a.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){return!b||b.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+
"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(a,c){var b=a.elementPath(c);return a.elementPath(b.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(b){function f(d){var e=c.width,m=c.height,f=e+(d.data.$.screenX-n.x)*("rtl"==g?-1:1);d=m+(d.data.$.screenY-n.y);h&&(e=Math.max(a.resize_minWidth,Math.min(f,a.resize_maxWidth)));p&&(m=Math.max(a.resize_minHeight,Math.min(d,a.resize_maxHeight)));b.resize(h?e:null,m)}function k(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",k);b.document&&(b.document.removeListener("mousemove",f),b.document.removeListener("mouseup",
k))}var a=b.config,r=b.ui.spaceId("resizer"),g=b.element?b.element.getDirection(1):"ltr";!a.resize_dir&&(a.resize_dir="vertical");void 0===a.resize_maxWidth&&(a.resize_maxWidth=3E3);void 0===a.resize_maxHeight&&(a.resize_maxHeight=3E3);void 0===a.resize_minWidth&&(a.resize_minWidth=750);void 0===a.resize_minHeight&&(a.resize_minHeight=250);if(!1!==a.resize_enabled){var l=null,n,c,h=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,p=("both"==a.resize_dir||"vertical"==
a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,q=CKEDITOR.tools.addFunction(function(d){l||(l=b.getResizable());c={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0};n={x:d.screenX,y:d.screenY};a.resize_minWidth>c.width&&(a.resize_minWidth=c.width);a.resize_minHeight>c.height&&(a.resize_minHeight=c.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",k);b.document&&(b.document.on("mousemove",f),b.document.on("mouseup",k));d.preventDefault&&d.preventDefault()});b.on("destroy",
function(){CKEDITOR.tools.removeFunction(q)});b.on("uiSpace",function(a){if("bottom"==a.data.space){var e="";h&&!p&&(e=" cke_resizer_horizontal");!h&&p&&(e=" cke_resizer_vertical");var c='\x3cspan id\x3d"'+r+'" class\x3d"cke_resizer'+e+" cke_resizer_"+g+'" title\x3d"'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+q+', event)"\x3e'+("ltr"==g?"":"")+"\x3c/span\x3e";"ltr"==g&&"ltr"==e?a.data.html+=c:a.data.html=c+a.data.html}},b,null,100);b.on("maximize",
function(a){b.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function B(a){function d(){for(var b=g(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||q(a),f=0;f<e.length;f++){var l=e[f];if("/"!=l){"string"==typeof l&&(l=e[f]={name:l});var m,d=l.groups;if(d)for(var h=0;h<d.length;h++)m=d[h],(m=b[m])&&c(l,m);(m=b[l.name])&&c(l,m)}}return e}function g(){var b={},c,f,e;for(c in a.ui.items)f=a.ui.items[c],e=f.toolbar||"others",e=e.split(","),f=e[0],e=parseInt(e[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:c,order:e});for(f in b)b[f]=b[f].sort(function(b,
a){return b.order==a.order?0:0>a.order?-1:0>b.order?1:b.order<a.order?-1:1});return b}function c(c,e){if(e.length){c.items?c.items.push(a.ui.create("-")):c.items=[];for(var f;f=e.shift();)f="string"==typeof f?f:f.name,b&&-1!=CKEDITOR.tools.indexOf(b,f)||(f=a.ui.create(f))&&a.addFeature(f)&&c.items.push(f)}}function h(b){var a=[],e,d,h;for(e=0;e<b.length;++e)d=b[e],h={},"/"==d?a.push(d):CKEDITOR.tools.isArray(d)?(c(h,CKEDITOR.tools.clone(d)),a.push(h)):d.items&&(c(h,CKEDITOR.tools.clone(d.items)),
h.name=d.name,a.push(h));return a}var b=a.config.removeButtons,b=b&&b.split(","),e=a.config.toolbar;"string"==typeof e&&(e=a.config["toolbar_"+e]);return a.toolbar=e?h(e):d()}function q(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list",
"indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var y=function(){this.toolbars=[];this.focusCommandExecuted=!1};y.prototype.focus=function(){for(var a=0,d;d=this.toolbars[a++];)for(var g=0,c;c=d.items[g++];)if(c.focus){c.focus();return}};var C={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},
100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var d,g=function(c,h){var b,e="rtl"==a.lang.dir,k=a.config.toolbarGroupCycling,r=e?37:39,e=e?39:37,k=void 0===k||k;switch(h){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;)if(b=9==h?(b?b.next:c.toolbar.next)||a.toolbox.toolbars[0]:(b?b.previous:c.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],b.items.length)for(c=b.items[d?b.items.length-1:0];c&&!c.focus;)(c=d?c.previous:c.next)||
(b=0);c&&c.focus();return!1;case r:b=c;do b=b.next,!b&&k&&(b=c.toolbar.items[0]);while(b&&!b.focus);b?b.focus():g(c,9);return!1;case 40:return c.button&&c.button.hasArrow?(a.once("panelShow",function(b){b.data._.panel._.currentBlock.onKeyDown(40)}),c.execute()):g(c,40==h?r:e),!1;case e:case 38:b=c;do b=b.previous,!b&&k&&(b=c.toolbar.items[c.toolbar.items.length-1]);while(b&&!b.focus);b?b.focus():(d=1,g(c,CKEDITOR.SHIFT+9),d=0);return!1;case 27:return a.focus(),!1;case 13:case 32:return c.execute(),
!1}return!0};a.on("uiSpace",function(c){if(c.data.space==a.config.toolbarLocation){c.removeListener();a.toolbox=new y;var d=CKEDITOR.tools.getNextId(),b=['\x3cspan id\x3d"',d,'" class\x3d"cke_voice_label"\x3e',a.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+a.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',d,'" onmousedown\x3d"return false;"\x3e'],d=!1!==a.config.toolbarStartupExpanded,e,k;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&
b.push('\x3cspan class\x3d"cke_toolbox_main"'+(d?"\x3e":' style\x3d"display:none"\x3e'));for(var r=a.toolbox.toolbars,f=B(a),l=0;l<f.length;l++){var m,n=0,v,p=f[l],w;if(p)if(e&&(b.push("\x3c/span\x3e"),k=e=0),"/"===p)b.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e');else{w=p.items||p;for(var x=0;x<w.length;x++){var t=w[x],q;if(t){var z=function(c){c=c.render(a,b);u=n.items.push(c)-1;0<u&&(c.previous=n.items[u-1],c.previous.next=c);c.toolbar=n;c.onkey=g;c.onfocus=function(){a.toolbox.focusCommandExecuted||
a.focus()}};if(t.type==CKEDITOR.UI_SEPARATOR)k=e&&t;else{q=!1!==t.canGroup;if(!n){m=CKEDITOR.tools.getNextId();n={id:m,items:[]};v=p.name&&(a.lang.toolbar.toolbarGroups[p.name]||p.name);b.push('\x3cspan id\x3d"',m,'" class\x3d"cke_toolbar"',v?' aria-labelledby\x3d"'+m+'_label"':"",' role\x3d"toolbar"\x3e');v&&b.push('\x3cspan id\x3d"',m,'_label" class\x3d"cke_voice_label"\x3e',v,"\x3c/span\x3e");b.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var u=r.push(n)-1;0<u&&(n.previous=r[u-
1],n.previous.next=n)}q?e||(b.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),e=1):e&&(b.push("\x3c/span\x3e"),e=0);k&&(z(k),k=0);z(t)}}}e&&(b.push("\x3c/span\x3e"),k=e=0);n&&b.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}a.config.toolbarCanCollapse&&b.push("\x3c/span\x3e");if(a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var A=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(A)});
a.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var a=b.ui.space("toolbar_collapser"),c=a.getPrevious(),e=b.ui.space("contents"),d=c.getParent(),f=parseInt(e.$.style.height,10),h=d.$.offsetHeight,g=a.hasClass("cke_toolbox_collapser_min");g?(c.show(),a.removeClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarCollapse)):(c.hide(),a.addClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarExpand));a.getFirst().setText(g?"":"");e.setStyle("height",
f-(d.$.offsetHeight-h)+"px");b.fire("resize",{outerHeight:b.container.$.offsetHeight,contentsHeight:e.$.offsetHeight,outerWidth:b.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");b.push('\x3ca title\x3d"'+(d?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id\x3d"'+a.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');d||b.push(" cke_toolbox_collapser_min");
b.push('" onclick\x3d"CKEDITOR.tools.callFunction('+A+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}b.push("\x3c/span\x3e");c.data.html+=b.join("")}});a.on("destroy",function(){if(this.toolbox){var a,d=0,b,e,g;for(a=this.toolbox.toolbars;d<a.length;d++)for(e=a[d].items,b=0;b<e.length;b++)g=e[b],g.clickFn&&CKEDITOR.tools.removeFunction(g.clickFn),g.keyDownFn&&CKEDITOR.tools.removeFunction(g.keyDownFn)}});a.on("uiReady",function(){var c=a.ui.space("toolbox");c&&a.focusManager.add(c,
1)});a.addCommand("toolbarFocus",C);a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");a.ui.add("-",CKEDITOR.UI_SEPARATOR,{});a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,d){d.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(a,d,g){var c=q(this.editor),h=0===d,b={name:a};if(g){if(g=CKEDITOR.tools.search(c,function(a){return a.name==g})){!g.groups&&(g.groups=[]);if(d&&
(d=CKEDITOR.tools.indexOf(g.groups,d),0<=d)){g.groups.splice(d+1,0,a);return}h?g.groups.splice(0,0,a):g.groups.push(a);return}d=null}d&&(d=CKEDITOR.tools.indexOf(c,function(a){return a.name==d}));h?c.splice(0,0,a):"number"==typeof d?c.splice(d+1,0,b):c.push(a)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function q(a,d){function l(c){c=k.list[c];if(c.equals(a.editable())||"true"==c.getAttribute("contenteditable")){var e=a.createRange();e.selectNodeContents(c);e.select()}else a.getSelection().selectElement(c);a.focus()}function m(){n&&n.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete k.list}var p=a.ui.spaceId("path"),n,k=a._.elementsPath,q=k.idBase;d.html+='\x3cspan id\x3d"'+p+'_label" class\x3d"cke_voice_label"\x3e'+a.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+
p+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+p+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';a.on("uiReady",function(){var c=a.ui.space("path");c&&a.focusManager.add(c,1)});k.onClick=l;var v=CKEDITOR.tools.addFunction(l),w=CKEDITOR.tools.addFunction(function(c,e){var g=k.idBase,b;e=new CKEDITOR.dom.event(e);b="rtl"==a.lang.dir;switch(e.getKeystroke()){case b?39:37:case 9:return(b=CKEDITOR.document.getById(g+(c+1)))||(b=CKEDITOR.document.getById(g+
"0")),b.focus(),!1;case b?37:39:case CKEDITOR.SHIFT+9:return(b=CKEDITOR.document.getById(g+(c-1)))||(b=CKEDITOR.document.getById(g+(k.list.length-1))),b.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return l(c),!1}return!0});a.on("selectionChange",function(){for(var c=[],e=k.list=[],g=[],b=k.filters,d=!0,l=a.elementPath().elements,f,u=l.length;u--;){var h=l[u],r=0;f=h.data("cke-display-name")?h.data("cke-display-name"):h.data("cke-real-element-type")?h.data("cke-real-element-type"):h.getName();
(d=h.hasAttribute("contenteditable")?"true"==h.getAttribute("contenteditable"):d)||h.hasAttribute("contenteditable")||(r=1);for(var t=0;t<b.length;t++){var m=b[t](h,f);if(!1===m){r=1;break}f=m||f}r||(e.unshift(h),g.unshift(f))}e=e.length;for(b=0;b<e;b++)f=g[b],d=a.lang.elementspath.eleTitle.replace(/%1/,f),f=x.output({id:q+b,label:d,text:f,jsTitle:"javascript:void('"+f+"')",index:b,keyDownFn:w,clickFn:v}),c.unshift(f);n||(n=CKEDITOR.document.getById(p));g=n;g.setHtml(c.join("")+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');
a.fire("elementsPathUpdate",{space:g})});a.on("readOnly",m);a.on("contentDomUnload",m);a.addCommand("elementsPathFocus",y.toolbarFocus);a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var y={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},d="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var x=CKEDITOR.addTemplate("pathItem",'\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+d+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+
"_",filters:[]};a.on("uiSpace",function(d){"bottom"==d.data.space&&q(a,d.data)})}})})();(function(){function q(b,d,a){a=b.config.forceEnterMode||a;"wysiwyg"==b.mode&&(d||(d=b.activeEnterMode),b.elementPath().isContextFor("p")||(d=CKEDITOR.ENTER_BR,a=1),b.fire("saveSnapshot"),d==CKEDITOR.ENTER_BR?t(b,d,null,a):u(b,d,null,a),b.fire("saveSnapshot"))}function v(b){b=b.getSelection().getRanges(!0);for(var d=b.length-1;0<d;d--)b[d].deleteContents();return b[0]}function y(b){var d=b.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},
!0);if(b.root.equals(d))return b;d=new CKEDITOR.dom.range(d);d.moveToRange(b);return d}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b)}});b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b,b.activeShiftEnterMode,1)}});b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var z=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(b,
d,a,h){if(a=a||v(b)){a=y(a);var f=a.document,k=a.checkStartOfBlock(),m=a.checkEndOfBlock(),l=b.elementPath(a.startContainer),c=l.block,n=d==CKEDITOR.ENTER_DIV?"div":"p",e;if(k&&m){if(c&&(c.is("li")||c.getParent().is("li"))){c.is("li")||(c=c.getParent());a=c.getParent();e=a.getParent();h=!c.hasPrevious();var p=!c.hasNext(),n=b.getSelection(),g=n.createBookmarks(),k=c.getDirection(1),m=c.getAttribute("class"),r=c.getAttribute("style"),q=e.getDirection(1)!=k;b=b.enterMode!=CKEDITOR.ENTER_BR||q||r||m;
if(e.is("li"))h||p?(h&&p&&a.remove(),c[p?"insertAfter":"insertBefore"](e)):c.breakParent(e);else{if(b)if(l.block.is("li")?(e=f.createElement(d==CKEDITOR.ENTER_P?"p":"div"),q&&e.setAttribute("dir",k),r&&e.setAttribute("style",r),m&&e.setAttribute("class",m),c.moveChildren(e)):e=l.block,h||p)e[h?"insertBefore":"insertAfter"](a);else c.breakParent(a),e.insertAfter(a);else if(c.appendBogus(!0),h||p)for(;f=c[h?"getFirst":"getLast"]();)f[h?"insertBefore":"insertAfter"](a);else for(c.breakParent(a);f=c.getLast();)f.insertAfter(a);
c.remove()}n.selectBookmarks(g);return}if(c&&c.getParent().is("blockquote")){c.breakParent(c.getParent());c.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getPrevious().remove();c.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getNext().remove();a.moveToElementEditStart(c);a.select();return}}else if(c&&c.is("pre")&&!m){t(b,d,a,h);return}if(k=a.splitBlock(n)){d=k.previousBlock;c=k.nextBlock;l=k.wasStartOfBlock;b=k.wasEndOfBlock;c?(g=c.getParent(),g.is("li")&&(c.breakParent(g),
c.move(c.getNext(),1))):d&&(g=d.getParent())&&g.is("li")&&(d.breakParent(g),g=d.getNext(),a.moveToElementEditStart(g),d.move(d.getPrevious()));if(l||b){if(d){if(d.is("li")||!w.test(d.getName())&&!d.is("pre"))e=d.clone()}else c&&(e=c.clone());e?h&&!e.is("li")&&e.renameNode(n):g&&g.is("li")?e=g:(e=f.createElement(n),d&&(p=d.getDirection())&&e.setAttribute("dir",p));if(f=k.elementPath)for(h=0,n=f.elements.length;h<n;h++){g=f.elements[h];if(g.equals(f.block)||g.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[g.getName()]&&
(g=g.clone(),e.moveChildren(g),e.append(g))}e.appendBogus();e.getParent()||a.insertNode(e);e.is("li")&&e.removeAttribute("value");!CKEDITOR.env.ie||!l||b&&d.getChildCount()||(a.moveToElementEditStart(b?d:e),a.select());a.moveToElementEditStart(l&&!b?c:e)}else c.is("li")&&(e=a.clone(),e.selectNodeContents(c),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return!(A(a)||z(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(g=e.next())&&
g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?f.createElement("br"):f.createText("")).insertBefore(g)),c&&a.moveToElementEditStart(c);a.select();a.scrollIntoView()}}},enterBr:function(b,d,a,h){if(a=a||v(b)){var f=a.document,k=a.checkEndOfBlock(),m=new CKEDITOR.dom.elementPath(b.getSelection().getStartElement()),l=m.block,c=l&&m.block.getName();h||"li"!=c?(!h&&k&&w.test(c)?(k=l.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",k),f.insertAfter(l),a.setStart(f,
0)):(f.createElement("br").insertAfter(l),CKEDITOR.env.gecko&&f.createText("").insertAfter(l),a.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(b="pre"==c&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?f.createText("\r"):f.createElement("br"),a.deleteContents(),a.insertNode(b),CKEDITOR.env.needsBrFiller?(f.createText("").insertAfter(b),k&&(l||m.blockLimit).appendBogus(),b.getNext().$.nodeValue="",a.setStartAt(b.getNext(),CKEDITOR.POSITION_AFTER_START)):
a.setStartAt(b,CKEDITOR.POSITION_AFTER_END)),a.collapse(!0),a.select(),a.scrollIntoView()):u(b,d,a,h)}}};var x=CKEDITOR.plugins.enterkey,t=x.enterBr,u=x.enterBlock,w=/^h[1-6]$/})();(function(){function k(b,f){var g={},c=[],e={nbsp:"",shy:"",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};b=b.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(b,a){var d=f?"\x26"+a+";":e[a];g[d]=f?e[a]:"\x26"+a+";";c.push(d);return""});if(!f&&b){b=b.split(",");var a=document.createElement("div"),d;a.innerHTML="\x26"+b.join(";\x26")+";";d=a.innerHTML;a=null;for(a=0;a<d.length;a++){var h=d.charAt(a);g[h]="\x26"+b[a]+";";c.push(h)}}g.regex=c.join(f?"|":"");return g}CKEDITOR.plugins.add("entities",
{afterInit:function(b){function f(a){return h[a]}function g(b){return"force"!=c.entities_processNumerical&&a[b]?a[b]:"\x26#"+b.charCodeAt(0)+";"}var c=b.config;if(b=(b=b.dataProcessor)&&b.htmlFilter){var e=[];!1!==c.basicEntities&&e.push("nbsp,gt,lt,amp");c.entities&&(e.length&&e.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),
c.entities_latin&&e.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),c.entities_greek&&e.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),
c.entities_additional&&e.push(c.entities_additional));var a=k(e.join(",")),d=a.regex?"["+a.regex+"]":"a^";delete a.regex;c.entities&&c.entities_processNumerical&&(d="[^ -~]|"+d);var d=new RegExp(d,"g"),h=k("nbsp,gt,lt,amp,shy",!0),l=new RegExp(h.regex,"g");b.addRules({text:function(a){return a.replace(l,f).replace(d,g)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;
CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,a,b,d){a=a||"80%";b=b||"70%";"string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10));"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10));640>a&&(a=640);420>b&&(b=420);var f=parseInt((window.screen.height-b)/2,10),g=parseInt((window.screen.width-a)/2,10);d=(d||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+
a+",height\x3d"+b+",top\x3d"+f+",left\x3d"+g;var c=window.open("",null,d,!0);if(!c)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(c.moveTo(g,f),c.resizeTo(a,b)),c.focus(),c.location.href=e}catch(h){window.open(e,null,d,!0)}return!0}});(function(){function g(a,c){var d=[];if(c)for(var b in c)d.push(b+"\x3d"+encodeURIComponent(c[b]));else return a;return a+(-1!=a.indexOf("?")?"\x26":"?")+d.join("\x26")}function k(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1)}function m(){var a=this.getDialog(),c=a.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+k(a.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",a=c.config["filebrowser"+k(a.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||
"70%",b=this.filebrowser.params||{};b.CKEditor=c.name;b.CKEditorFuncNum=c._.filebrowserFn;b.langCode||(b.langCode=c.langCode);b=g(this.filebrowser.url,b);c.popup(b,d,a,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function n(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function p(a,c,d){var b=d.params||
{};b.CKEditor=a.name;b.CKEditorFuncNum=a._.filebrowserFn;b.langCode||(b.langCode=a.langCode);c.action=g(d.url,b);c.filebrowser=d}function l(a,c,d,b){if(b&&b.length)for(var e,g=b.length;g--;)if(e=b[g],"hbox"!=e.type&&"vbox"!=e.type&&"fieldset"!=e.type||l(a,c,d,e.children),e.filebrowser)if("string"==typeof e.filebrowser&&(e.filebrowser={action:"fileButton"==e.type?"QuickUpload":"Browse",target:e.filebrowser}),"Browse"==e.filebrowser.action){var f=e.filebrowser.url;void 0===f&&(f=a.config["filebrowser"+
k(c)+"BrowseUrl"],void 0===f&&(f=a.config.filebrowserBrowseUrl));f&&(e.onClick=m,e.filebrowser.url=f,e.hidden=!1)}else if("QuickUpload"==e.filebrowser.action&&e["for"]&&(f=e.filebrowser.url,void 0===f&&(f=a.config["filebrowser"+k(c)+"UploadUrl"],void 0===f&&(f=a.config.filebrowserUploadUrl)),f)){var h=e.onClick;e.onClick=function(a){var b=a.sender;if(h&&!1===h.call(b,a))return!1;if(n.call(b,a)){a=b.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(b=new CKEDITOR.dom.element(a.$.form))(a=
b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):(a=new CKEDITOR.dom.element("input"),a.setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken());return!0}return!1};e.filebrowser.url=f;e.hidden=!1;p(a,d.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser)}}function h(a,c,d){if(-1!==d.indexOf(";")){d=d.split(";");for(var b=0;b<d.length;b++)if(h(a,c,d[b]))return!0;return!1}return(a=a.getContents(c).get(d).filebrowser)&&a.url}function q(a,
c){var d=this._.filebrowserSe.getDialog(),b=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;b&&d.getContentElement(b[0],b[1]).reset();if("function"!=typeof c||!1!==c.call(this._.filebrowserSe))if(!e||!1!==e.call(this._.filebrowserSe,a,c))if("string"==typeof c&&c&&alert(c),a&&(b=this._.filebrowserSe,d=b.getDialog(),b=b.filebrowser.target||null))if(b=b.split(":"),e=d.getContentElement(b[0],b[1]))e.setValue(a),d.selectPage(b[0])}CKEDITOR.plugins.add("filebrowser",{requires:"popup",
init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(q,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var c=a.data.definition,d,b=0;b<c.contents.length;++b)if(d=c.contents[b])l(a.editor,a.data.name,c,d.elements),d.hidden&&d.filebrowser&&(d.hidden=!h(c,d.id,d.filebrowser))})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(a){var b=a.addCommand("find",new CKEDITOR.dialogCommand("find"));b.canUndo=!1;b.readOnly=1;a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+
"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function g(a,b){var c=l.exec(a),d=l.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px"}return b}var k=CKEDITOR.htmlParser.cssStyle,h=CKEDITOR.tools.cssLength,l=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,m={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=(new k(a)).rules;a=b.attributes;var d=c.width,
c=c.height;d&&(a.width=g(a.width,d));c&&(a.height=g(a.height,c))}return b}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(m,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown;b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,
alt:e,title:e,align:a.getAttribute("align")||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,c=new k,d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(c.rules.width=h(d)),a&&(c.rules.height=h(a)),c.populate(b));return this.document.createElement("img",{attributes:b})};CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,f;f=new CKEDITOR.htmlParser.basicWriter;
a.writeHtml(f);f=f.getHtml();b={"class":b,"data-cke-realelement":encodeURIComponent(f),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.attributes.align||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,d=a.attributes,a=new k,c=d.width,d=d.height,void 0!==c&&(a.rules.width=h(c)),void 0!==d&&(a.rules.height=h(d)),a.populate(b));return new CKEDITOR.htmlParser.element("img",b)};CKEDITOR.editor.prototype.restoreRealElement=
function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width");a=a.getStyle("height");c&&b.setAttribute("width",g(b.getAttribute("width"),c));a&&b.setAttribute("height",g(b.getAttribute("height"),a))}return b}})();(function(){function d(a){a=a.attributes;return"application/x-shockwave-flash"==a.type||f.test(a.src||"")}function e(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var f=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},
init:function(a){var b="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(b+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(b+=";object[id]{*}; embed[bgcolor]{*}(*)");a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:b,requiredContent:"embed"}));a.ui.addButton&&a.ui.addButton("Flash",
{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash")});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},
afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{"cke:object":function(b){var c=b.attributes;if(!(c.classid&&String(c.classid).toLowerCase()||d(b))){for(c=0;c<b.children.length;c++)if("cke:embed"==b.children[c].name){if(!d(b.children[c]))break;return e(a,b)}return null}return e(a,b)},"cke:embed":function(b){return d(b)?e(a,b):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function k(a){var l=a.config,p=a.fire("uiSpace",{space:"top",html:""}).html,t=function(){function f(a,c,e){b.setStyle(c,w(e));b.setStyle("position",a)}function e(a){var b=k.getDocumentPosition();switch(a){case "top":f("absolute","top",b.y-q-r);break;case "pin":f("fixed","top",x);break;case "bottom":f("absolute","top",b.y+(c.height||c.bottom-c.top)+r)}m=a}var m,k,n,c,h,q,v,p=l.floatSpaceDockedOffsetX||0,r=l.floatSpaceDockedOffsetY||0,u=l.floatSpacePinnedOffsetX||0,x=l.floatSpacePinnedOffsetY||
0;return function(d){if(k=a.editable()){var f=d&&"focus"==d.name;f&&b.show();a.fire("floatingSpaceLayout",{show:f});b.removeStyle("left");b.removeStyle("right");n=b.getClientRect();c=k.getClientRect();h=g.getViewPaneSize();q=n.height;v="pageXOffset"in g.$?g.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;m?(q+r<=c.top?e("top"):q+r>h.height-c.bottom?e("pin"):e("bottom"),d=h.width/2,d=l.floatSpacePreferRight?"right":0<c.left&&c.right<h.width&&c.width>n.width?"rtl"==l.contentsLangDirection?
"right":"left":d-c.left>c.right-d?"left":"right",n.width>h.width?(d="left",f=0):(f="left"==d?0<c.left?c.left:0:c.right<h.width?h.width-c.right:0,f+n.width>h.width&&(d="left"==d?"right":"left",f=0)),b.setStyle(d,w(("pin"==m?u:p)+f+("pin"==m?0:"left"==d?v:-v)))):(m="pin",e("pin"),t(d))}}}();if(p){var k=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?
" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),b=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:p,id:a.id,langDir:a.lang.dir,
langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(l.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),u=CKEDITOR.tools.eventsBuffer(500,t),e=CKEDITOR.tools.eventsBuffer(100,t);b.unselectable();b.on("mousedown",function(a){a=a.data;a.getTarget().hasAscendant("a",1)||a.preventDefault()});a.on("focus",function(b){t(b);a.on("change",u.input);g.on("scroll",e.input);g.on("resize",e.input)});a.on("blur",function(){b.hide();a.removeListener("change",u.input);g.removeListener("scroll",
e.input);g.removeListener("resize",e.input)});a.on("destroy",function(){g.removeListener("scroll",e.input);g.removeListener("resize",e.input);b.clearCustomData();b.remove()});a.focusManager.hasFocus&&b.show();a.focusManager.add(b,1)}}var g=CKEDITOR.document.getWindow(),w=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){k(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var f=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),g=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),
h=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),k=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0);!c.role&&
(c.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",c.role);c=this.keys;c[40]="next";c[9]="next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(c[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var a=f.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(a);delete this._.started}},getClick:function(){this._.click||
(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);if(this.onClick)this.onClick(a,b)},this));return this._.click}},proto:{add:function(a,b,c){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[a]=d;var e;e=CKEDITOR.tools.htmlEncodeAttr(a).replace(k,"\\'");a={id:d,val:e,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(c||a),text:b||a};
this._.pendingList.push(g.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push(h.output({id:b,label:a}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display",
"none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),d;for(d in a)c.getById(a[d]).setStyle("display","");for(var e in b)a=c.getById(b[e]),d=a.getNext(),a.setStyle("display",""),d&&"ul"==d.getName()&&d.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);
b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var c=b.getById(a);c.removeClass("cke_selected");b.getById(a+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var a=this._.items,b=this.element.getDocument(),c;for(c in a){var d=a[c];b.getById(d).removeClass("cke_selected");b.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&
this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var b=this.element.getElementsByTag("a"),c,d=-1;if(a)for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++d);){if(a.equals(c)){this._.focusIndex=d;break}}else this.element.focus();c&&setTimeout(function(){c.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});
(function(){var d='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var d=d+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+
(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),k=CKEDITOR.addTemplate("combo",d);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";
a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){function g(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var c=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(c=CKEDITOR.TRISTATE_DISABLED);this.setState(c);this.setValue("");c!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var d=
CKEDITOR.env,h="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(b){l&&(a.unlockSelection(1),l=0);c.execute(b)},this),f=this,c={id:h,combo:this,focus:function(){CKEDITOR.document.getById(h).getChild(1).focus()},execute:function(c){var b=f._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(f.createPanel(a),b.on)b.panel.hide();else{f.commit();var d=f.getValue();d?b.list.mark(d):b.list.unmarkAll();b.panel.showBlock(f.id,new CKEDITOR.dom.element(c),4)}},clickFn:e};a.on("activeFilterChange",g,this);a.on("mode",
g,this);a.on("selectionChange",g,this);!this.readOnly&&a.on("readOnly",g,this);var m=CKEDITOR.tools.addFunction(function(b,d){b=new CKEDITOR.dom.event(b);var g=b.getKeystroke();if(40==g)a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)});switch(g){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,d);break;default:c.onkey(c,g)}b.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){c.onfocus&&c.onfocus()}),l=0;c.keyDownFn=m;d={id:h,name:this.name||this.command,label:this.label,
title:this.title,cls:this.className||"",titleJs:d.gecko&&!d.hc?"":(this.title||"").replace("'",""),keydownFn:m,focusFn:n,clickFn:e};k.output(d,b);if(this.onRender)this.onRender();return c},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,d=this._.panelDefinition.block,k=b.parent||CKEDITOR.document.getBody(),h="cke_combopanel__"+this.name,e=new CKEDITOR.ui.floatPanel(a,k,b),f=e.addListBlock(this.id,d),c=this;e.onShow=function(){this.element.addClass(h);c.setState(CKEDITOR.TRISTATE_ON);
c._.on=1;c.editorFocus&&!a.focusManager.hasFocus&&a.focus();if(c.onOpen)c.onOpen();a.once("panelShow",function(){f.focus(!f.multiSelect&&c.getValue())})};e.onHide=function(b){this.element.removeClass(h);c.setState(c.modes&&c.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c._.on=0;if(!b&&c.onClose)c.onClose()};e.onEscape=function(){e.hide(1)};f.onClick=function(a,b){c.onClick&&c.onClick.call(c,a,b);e.hide()};this._.panel=e;this._.list=f;e.getBlock(this.id).onHide=function(){c._.on=
0;c.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(a,b){this._.value=a;var d=this.document.getById("cke_"+this.id+"_text");d&&(a||b?d.removeClass("cke_combo_inlinelabel"):(b=this.label,d.addClass("cke_combo_inlinelabel")),d.setText("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},
showAll:function(){this._.list.showAll()},add:function(a,b,d){this._.items[a]=d||a;this._.list.add(a,b,d)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");this._.state=
a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}})();(function(){function l(a,b,c,f,p,l,t,v){var w=a.config,q=new CKEDITOR.style(t),k=p.split(";");p=[];for(var m={},d=0;d<k.length;d++){var h=k[d];if(h){var h=h.split("/"),u={},n=k[d]=h[0];u[c]=p[d]=h[1]||n;m[n]=new CKEDITOR.style(t,u);m[n]._.definition.name=n}else k.splice(d--,1)}a.ui.addRichCombo(b,{label:f.label,title:f.panelTitle,toolbar:"styles,"+v,allowedContent:q,requiredContent:q,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(w.contentsCss),multiSelect:!1,attributes:{"aria-label":f.panelTitle}},
init:function(){this.startGroup(f.panelTitle);for(var a=0;a<k.length;a++){var b=k[a];this.add(b,m[b].buildPreview(),b)}},onClick:function(b){a.focus();a.fire("saveSnapshot");var c=this.getValue(),f=m[b];if(c&&b!=c){var k=m[c],e=a.getSelection().getRanges()[0];if(e.collapsed){var d=a.elementPath(),g=d.contains(function(a){return k.checkElementRemovable(a)});if(g){var h=e.checkBoundaryOfElement(g,CKEDITOR.START),l=e.checkBoundaryOfElement(g,CKEDITOR.END);if(h&&l){for(h=e.createBookmark();d=g.getFirst();)d.insertBefore(g);
g.remove();e.moveToBookmark(h)}else h?e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START):l?e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END):(e.splitElement(g),e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END),r(e,d.elements.slice(),g));a.getSelection().selectRanges([e])}}else a.removeStyle(k)}a[c==b?"removeStyle":"applyStyle"](f);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path.elements;for(var d=0,f;d<b.length;d++){f=b[d];for(var e in m)if(m[e].checkElementMatch(f,
!0,a)){e!=c&&this.setValue(e);return}}this.setValue("",l)},this)},refresh:function(){a.activeFilter.check(q)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function r(a,b,c){var f=b.pop();if(f){if(c)return r(a,b,f.equals(c)?null:c);c=f.clone();a.insertNode(c);a.moveToPosition(c,CKEDITOR.POSITION_AFTER_START);r(a,b)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(a){var b=a.config;l(a,"Font","family",a.lang.font,b.font_names,b.font_defaultLabel,b.font_style,30);l(a,"FontSize","size",
a.lang.font.fontSize,b.fontSize_sizes,b.fontSize_defaultLabel,b.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";
CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(a){var b=a.lang,g=0,h={email:1,password:1,search:1,tel:1,text:1,url:1},l={checkbox:"input[type,name,checked,required]",
radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},m={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",
select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},e=function(d,c,e){var h={allowedContent:l[c],requiredContent:m[c]};"form"==c&&(h.context="form");a.addCommand(c,new CKEDITOR.dialogCommand(c,h));a.ui.addButton&&a.ui.addButton(d,{label:b.common[d.charAt(0).toLowerCase()+d.slice(1)],command:c,toolbar:"forms,"+(g+=10)});CKEDITOR.dialog.add(c,e)},f=this.path+"dialogs/";!a.blockless&&e("Form","form",f+"form.js");e("Checkbox","checkbox",f+"checkbox.js");e("Radio","radio",
f+"radio.js");e("TextField","textfield",f+"textfield.js");e("Textarea","textarea",f+"textarea.js");e("Select","select",f+"select.js");e("Button","button",f+"button.js");var k=a.plugins.image;k&&!a.plugins.image2&&e("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");e("HiddenField","hiddenfield",f+"hiddenfield.js");a.addMenuItems&&(e={checkbox:{label:b.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:b.forms.checkboxAndRadio.radioTitle,
command:"radio",group:"radio"},textfield:{label:b.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:b.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:b.forms.button.title,command:"button",group:"button"},select:{label:b.forms.select.title,command:"select",group:"select"},textarea:{label:b.forms.textarea.title,command:"textarea",group:"textarea"}},k&&(e.imagebutton={label:b.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&
(e.form={label:b.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(e));a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(d,c,a){if((d=a.contains("form",1))&&!d.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),a.contextMenu.addListener(function(d){if(d&&!d.isReadOnly()){var c=d.getName();if("select"==c)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==c)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==c){var a=d.getAttribute("type")||"text";switch(a){case "button":case "submit":case "reset":return{button:CKEDITOR.TRISTATE_OFF};
case "checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case "radio":return{radio:CKEDITOR.TRISTATE_OFF};case "image":return k?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(h[a])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==c&&"hiddenfield"==d.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));a.on("doubleclick",function(d){var c=d.data.element;if(!a.blockless&&c.is("form"))d.data.dialog="form";else if(c.is("select"))d.data.dialog="select";else if(c.is("textarea"))d.data.dialog=
"textarea";else if(c.is("img")&&"hiddenfield"==c.data("cke-real-element-type"))d.data.dialog="hiddenfield";else if(c.is("input")){c=c.getAttribute("type")||"text";switch(c){case "button":case "submit":case "reset":d.data.dialog="button";break;case "checkbox":d.data.dialog="checkbox";break;case "radio":d.data.dialog="radio";break;case "image":d.data.dialog="imagebutton"}h[c]&&(d.data.dialog="textfield")}})},afterInit:function(a){var b=a.dataProcessor,g=b&&b.htmlFilter,b=b&&b.dataFilter;CKEDITOR.env.ie&&
g&&g.addRules({elements:{input:function(a){a=a.attributes;var b=a.type;b||(a.type="text");"checkbox"!=b&&"radio"!=b||"on"!=a.value||delete a.value}}},{applyToAll:!0});b&&b.addRules({elements:{input:function(b){if("hidden"==b.attributes.type)return a.createFakeParserElement(b,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var f=a.config,c=a.lang.format,l=f.format_tags.split(";"),d={},m=0,n=[],g=0;g<l.length;g++){var h=l[g],k=new CKEDITOR.style(f["format_"+h]);if(!a.filter.customConfig||a.filter.check(k))m++,d[h]=k,d[h]._.enterMode=a.config.enterMode,n.push(k)}0!==m&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:n,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),
multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in d){var e=c["tag_"+a];this.add(a,d[a].buildPreview(e),e)}},onClick:function(b){a.focus();a.fire("saveSnapshot");b=d[b];var e=a.elementPath();a[b.checkActive(e,a)?"removeStyle":"applyStyle"](b);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var e=this.getValue();b=b.data.path;this.refresh();for(var c in d)if(d[c].checkActive(b,a)){c!=
e&&this.setValue(c,a.lang.format["tag_"+c]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in d)a.activeFilter.check(d[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in d)if(a.activeFilter.check(d[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};
CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var b={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(b){var a=new CKEDITOR.htmlWriter;a.forceSimpleAmpersand=b.config.forceSimpleAmpersand;a.indentationChars=b.config.dataIndentationChars||"\t";b.dataProcessor.writer=a}});
CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var b=CKEDITOR.dtd,a;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in
b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",b);this._.afterCloser=0},
openTagClose:function(b,a){var c=this._.rules[b];a?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push("\x3e"),c&&c.indent&&(this._.indentation+=this.indentationChars));c&&c.breakAfterOpen&&this.lineBreak();"pre"==b&&(this._.inPre=1)},attribute:function(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"\x26")),a=CKEDITOR.tools.htmlEncodeAttr(a));this._.output.push(" ",b,'\x3d"',a,'"')},closeTag:function(b){var a=
this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",b,"\x3e");"pre"==b&&(this._.inPre=0);a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace);this._.afterCloser=1},text:function(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b)));this._.output.push(b)},comment:function(b){this._.indent&&
this.indentation();this._.output.push("\x3c!--",b,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0},setRules:function(b,a){var c=this._.rules[b];c?CKEDITOR.tools.extend(c,a,!0):this._.rules[b]=a}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var b=a.lang.iframe,c="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(c+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,
classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:c,requiredContent:"iframe"}));a.ui.addButton&&a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe",toolbar:"insert,80"});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe")});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});
a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&"iframe"==a.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})})();(function(){function m(a){function f(a){var b=!1;g.attachListener(g,"keydown",function(){var d=c.getBody().getElementsByTag(a);if(!b){for(var e=0;e<d.count();e++)d.getItem(e).setCustomData("retain",!0);b=!0}},null,null,1);g.attachListener(g,"keyup",function(){var d=c.getElementsByTag(a);b&&(1!=d.count()||d.getItem(0).getCustomData("retain")||d.getItem(0).remove(1),b=!1)})}var b=this.editor,c=a.document,d=c.body,e=c.getElementById("cke_actscrpt");e&&e.parentNode.removeChild(e);(e=c.getElementById("cke_shimscrpt"))&&
e.parentNode.removeChild(e);(e=c.getElementById("cke_basetagscrpt"))&&e.parentNode.removeChild(e);d.contentEditable=!0;CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled"));delete this._.isLoadingData;this.$=d;c=new CKEDITOR.dom.document(c);this.setup();this.fixInitialSelection();var g=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&c.getDocumentElement().addClass(c.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&b.enterMode!=CKEDITOR.ENTER_P?f("p"):CKEDITOR.env.edge&&b.enterMode!=
CKEDITOR.ENTER_DIV&&f("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)c.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){b.editable().focus()})});n(b);try{b.document.$.execCommand("2D-position",!1,!0)}catch(h){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==b.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var c=a.data.getKeystroke();if(33==c||34==c)if(CKEDITOR.env.ie)setTimeout(function(){b.getSelection().scrollIntoView()},
0);else if(b.window.$.innerHeight>this.$.offsetHeight){var d=b.createRange();d[33==c?"moveToElementEditStart":"moveToElementEditEnd"](this);d.select();a.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(c,"blur",function(){try{c.$.selection.empty()}catch(a){}});CKEDITOR.env.iOS&&this.attachListener(c,"touchend",function(){a.focus()});d=b.document.getElementsByTag("title").getItem(0);d.data("cke-title",d.getText());CKEDITOR.env.ie&&(b.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==
this.status&&(this.status="ready");b.fire("contentDom");this._.isPendingFocus&&(b.focus(),this._.isPendingFocus=!1);setTimeout(function(){b.fire("dataReady")},0)},0,this)}function n(a){function f(){var c;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(c&&(c.detachEvent("onresizestart",b),c=null),d.$.attachEvent("onresizestart",b),c=d.$)})}function b(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var c=a.document.$;c.execCommand("enableObjectResizing",
!1,!a.config.disableObjectResizing);c.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(d){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&f(a)}function p(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var f=[],b;for(b in CKEDITOR.dtd.$removeEmpty)f.push("html.CSS1Compat "+b+"[contenteditable\x3dfalse]");a.push(f.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&
(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));a.push("html{cursor:text;*cursor:auto}");a.push("img,input,textarea{cursor:default}");return a.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(f){function b(b){b&&b.removeListener();a.editable(new l(a,
d.$.contentWindow.document.body));a.setData(a.getData(1),f)}var c="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",c=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(c)+"}())":"",d=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+c+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');d.setStyles({width:"100%",height:"100%"});d.addClass("cke_wysiwyg_frame").addClass("cke_reset");
c=a.ui.space("contents");c.append(d);var e=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(e)d.on("load",b);var g=a.title,h=a.fire("ariaEditorHelpLabel",{}).label;g&&(CKEDITOR.env.ie&&h&&(g+=", "+h),d.setAttribute("title",g));if(h){var g=CKEDITOR.tools.getNextId(),k=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+g+'" class\x3d"cke_voice_label"\x3e'+h+"\x3c/span\x3e");c.append(k,1);d.setAttribute("aria-describedby",g)}a.on("beforeModeUnload",function(a){a.removeListener();k&&k.remove()});
d.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!e&&b();a.fire("ariaWidget",d)})}});CKEDITOR.editor.prototype.addContentsCss=function(a){var f=this.config,b=f.contentsCss;CKEDITOR.tools.isArray(b)||(f.contentsCss=b?[b]:[]);f.contentsCss.push(a)};var l=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(m,0,this,a)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},
base:CKEDITOR.editable,proto:{setData:function(a,f){var b=this.editor;if(f)this.setHtml(a),this.fixInitialSelection(),b.fire("dataReady");else{this._.isLoadingData=!0;b._.dataStore={id:1};var c=b.config,d=c.fullPage,e=c.docType,g=CKEDITOR.tools.buildStyleHtml(p()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');d||(g+=CKEDITOR.tools.buildStyleHtml(b.config.contentsCss));var h=c.baseHref?'\x3cbase href\x3d"'+c.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){b.docType=
e=a;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){b.xmlDeclaration=a;return""}));a=b.dataProcessor.toHtml(a);d?(/<body[\s|>]/.test(a)||(a="\x3cbody\x3e"+a),/<html[\s|>]/.test(a)||(a="\x3chtml\x3e"+a+"\x3c/html\x3e"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):a=a.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),h&&(a=a.replace(/<head[^>]*?>/,"$\x26"+h)),a=a.replace(/<\/head\s*>/,g+"$\x26"),a=
e+a):a=c.docType+'\x3chtml dir\x3d"'+c.contentsLangDirection+'" lang\x3d"'+(c.contentsLanguage||b.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+h+g+"\x3c/head\x3e\x3cbody"+(c.bodyId?' id\x3d"'+c.bodyId+'"':"")+(c.bodyClass?' class\x3d"'+c.bodyClass+'"':"")+"\x3e"+a+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(a=a.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),2E4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));
c='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');
h&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');a=a.replace(/(?=\s*<\/(:?head)>)/,c);this.clearCustomData();this.clearListeners();b.fire("contentDomUnload");var k=this.getDocument();try{k.write(a)}catch(l){setTimeout(function(){k.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var f=a.config,b=f.fullPage,c=b&&a.docType,d=b&&a.xmlDeclaration,
e=this.getDocument(),b=b?e.getDocumentElement().getOuterHtml():e.getBody().getHtml();CKEDITOR.env.gecko&&f.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,""));b=a.dataProcessor.toDataFormat(b);d&&(b=d+"\n"+b);c&&(b=c+"\n"+b);return b},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:l.baseProto.focus.call(this)},detach:function(){var a=this.editor,f=a.document,b;try{b=a.window.getFrame()}catch(c){}l.baseProto.detach.call(this);this.clearCustomData();f.getDocumentElement().clearCustomData();
CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);b&&b.getParent()?(b.clearCustomData(),(a=b.removeCustomData("onResize"))&&a.removeListener(),b.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function e(b,a){a||(a=b.getSelection().getSelectedElement());if(a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())return a}function f(b){var a=b.getStyle("float");if("inherit"==a||"none"==a)a=0;a||(a=b.getAttribute("align"));return a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";
CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.on("doubleclick",function(b){var a=
b.data.element;!a.is("img")||a.data("cke-realelement")||a.isReadOnly()||(b.data.dialog="image")});b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}});b.contextMenu&&b.contextMenu.addListener(function(a){if(e(b,a))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(b){function a(a){var d=b.getCommand("justify"+a);if(d){if("left"==a||"right"==a)d.on("exec",function(d){var c=e(b),g;c&&(g=f(c),g==a?(c.removeStyle("float"),a==f(c)&&c.removeAttribute("align")):
c.setStyle("float",a),d.cancel())});d.on("refresh",function(d){var c=e(b);c&&(c=f(c),this.setState(c==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel())})}}b.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function m(a,b){var e,f;b.on("refresh",function(a){var b=[k],c;for(c in a.data.states)b.push(a.data.states[c]);this.setState(CKEDITOR.tools.search(b,p)?p:k)},b,null,100);b.on("exec",function(b){e=a.getSelection();f=e.createBookmarks(1);b.data||(b.data={});b.data.done=!1},b,null,0);b.on("exec",function(){a.forceNextSelectionCheck();e.selectBookmarks(f)},b,null,100)}var k=CKEDITOR.TRISTATE_DISABLED,p=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;
m(a,a.addCommand("indent",new b(!0)));m(a,a.addCommand("outdent",new b));a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));a.on("dirChanged",function(b){var f=a.createRange(),l=b.data.node;f.setStartBefore(l);f.setEndAfter(l);for(var n=new CKEDITOR.dom.walker(f),c;c=n.next();)if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(l)&&
c.getDirection())f.setStartAfter(c),n=new CKEDITOR.dom.walker(f);else{var d=a.config.indentClasses;if(d)for(var g="ltr"==b.data.dir?["_rtl",""]:["","_rtl"],h=0;h<d.length;h++)c.hasClass(d[h]+g[0])&&(c.removeClass(d[h]+g[0]),c.addClass(d[h]+g[1]));d=c.getStyle("margin-right");g=c.getStyle("margin-left");d?c.setStyle("margin-left",d):c.removeStyle("margin-left");g?c.setStyle("margin-right",g):c.removeStyle("margin-right")}})}});CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a;
this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b;this.editor=a;this.jobs={};this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!e;this.relatedGlobal=e?"indent":"outdent";this.indentKey=e?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var e=a.getCommand(b.relatedGlobal),c;for(c in b.jobs)e.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=
!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),e.on("refresh",function(d){d.data.states||(d.data.states={});d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var e=this.jobs[b];if(e.state!=k)return e.exec.call(this,a)},refreshJob:function(a,
b,e){b=this.jobs[b];a.activeFilter.checkFeature(this)?b.state=b.refresh.call(this,a,e):b.state=k;return b.state},getContext:function(a){return a.contains(this.context)}}})();(function(){function f(b,c,a){if(!b.getCustomData("indent_processed")){var d=this.editor,l=this.isIndent;if(c){d=b.$.className.match(this.classNameRegex);a=0;d&&(d=d[1],a=CKEDITOR.tools.indexOf(c,d)+1);if(0>(a+=l?1:-1))return;a=Math.min(a,c.length);a=Math.max(a,0);b.$.className=CKEDITOR.tools.ltrim(b.$.className.replace(this.classNameRegex,""));0<a&&b.addClass(c[a-1])}else{c=m(b,a);a=parseInt(b.getStyle(c),10);var g=d.config.indentOffset||40;isNaN(a)&&(a=0);a+=(l?1:-1)*g;if(0>a)return;a=Math.max(a,
0);a=Math.ceil(a/g)*g;b.setStyle(c,a?a+(d.config.indentUnit||"px"):"");""===b.getAttribute("style")&&b.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,b,"indent_processed",1)}}function m(b,c){return"ltr"==(c||b.getComputedStyle("direction"))?"margin-left":"margin-right"}var h=CKEDITOR.dtd.$listItem,p=CKEDITOR.dtd.$list,k=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(b){function c(){a.specificDefinition.apply(this,
arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:d?null:"margin-left,margin-right",classes:d||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(d?"("+d.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(a,b){var e=b.block||b.blockLimit;if(!e.is(h))var c=e.getAscendant(h),e=c&&b.contains(c)||e;e.is(h)&&(e=e.getParent());if(this.enterBr||this.getContext(b)){if(d){var c=d,e=e.$.className.match(this.classNameRegex),
f=this.isIndent,c=e?f?e[1]!=c.slice(-1):!0:f;return c?n:k}return this.isIndent?n:e?CKEDITOR[0>=(parseInt(e.getStyle(m(e)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:k}return k},exec:function(a){var b=a.getSelection(),b=b&&b.getRanges()[0],c;if(c=a.elementPath().contains(p))f.call(this,c,d);else for(b=b.createIterator(),a=a.config.enterMode,b.enforceRealBlocks=!0,b.enlargeBr=a!=CKEDITOR.ENTER_BR;c=b.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");)c.isReadOnly()||f.call(this,c,d);return!0}}}}var a=
CKEDITOR.plugins.indent,d=b.config.indentClasses;a.registerCommands(b,{indentblock:new c(b,"indentblock",!0),outdentblock:new c(b,"outdentblock")});CKEDITOR.tools.extend(c.prototype,a.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:d?new RegExp("(?:^|\\s+)("+d.join("|")+")(?\x3d$|\\s)"):null})}})})();(function(){function w(c){function f(b){for(var e=d.startContainer,a=d.endContainer;e&&!e.getParent().equals(b);)e=e.getParent();for(;a&&!a.getParent().equals(b);)a=a.getParent();if(!e||!a)return!1;for(var g=e,e=[],k=!1;!k;)g.equals(a)&&(k=!0),e.push(g),g=g.getNext();if(1>e.length)return!1;g=b.getParents(!0);for(a=0;a<g.length;a++)if(g[a].getName&&p[g[a].getName()]){b=g[a];break}for(var g=l.isIndent?1:-1,a=e[0],e=e[e.length-1],k=CKEDITOR.plugins.list.listToArray(b,q),n=k[e.getCustomData("listarray_index")].indent,
a=a.getCustomData("listarray_index");a<=e.getCustomData("listarray_index");a++)if(k[a].indent+=g,0<g){var h=k[a].parent;k[a].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(a=e.getCustomData("listarray_index")+1;a<k.length&&k[a].indent>n;a++)k[a].indent+=g;e=CKEDITOR.plugins.list.arrayToList(k,q,null,c.config.enterMode,b.getDirection());if(!l.isIndent){var f;if((f=b.getParent())&&f.is("li"))for(var g=e.listNode.getChildren(),r=[],m,a=g.count()-1;0<=a;a--)(m=g.getItem(a))&&m.is&&m.is("li")&&
r.push(m)}e&&e.listNode.replace(b);if(r&&r.length)for(a=0;a<r.length;a++){for(m=b=r[a];(m=m.getNext())&&m.is&&m.getName()in p;)CKEDITOR.env.needsNbspFiller&&!b.getFirst(x)&&b.append(d.document.createText("")),b.append(m);b.insertAfter(f)}e&&c.fire("contentDomInvalidated");return!0}for(var l=this,q=this.database,p=this.context,n=c.getSelection(),n=(n&&n.getRanges()).createIterator(),d;d=n.getNextRange();){for(var b=d.getCommonAncestor();b&&(b.type!=CKEDITOR.NODE_ELEMENT||!p[b.getName()]);){if(c.editable().equals(b)){b=
!1;break}b=b.getParent()}b||(b=d.startPath().contains(p))&&d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);if(!b){var h=d.getEnclosedNode();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in p&&(d.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),b=h)}b&&d.startContainer.type==CKEDITOR.NODE_ELEMENT&&d.startContainer.getName()in p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.startContainer=h.next());b&&d.endContainer.type==CKEDITOR.NODE_ELEMENT&&d.endContainer.getName()in
p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.endContainer=h.previous());if(b)return f(b)}return 0}function t(c){return c.type==CKEDITOR.NODE_ELEMENT&&c.is("li")}function x(c){return y(c)&&z(c)}var y=CKEDITOR.dom.walker.whitespaces(!0),z=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.TRISTATE_DISABLED,v=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(c){function f(c){l.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];c.on("key",
function(f){if("wysiwyg"==c.mode&&f.data.keyCode==this.indentKey){var n=this.getContext(c.elementPath());!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,c.elementPath(),n)||(c.execCommand(this.relatedGlobal),f.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(c,f){var d=this.getContext(f),b=CKEDITOR.plugins.indentList.firstItemInPath(this.context,f,d);return d&&this.isIndent&&!b?v:u}:function(c,f){return!this.getContext(f)||this.isIndent?
u:v},exec:CKEDITOR.tools.bind(w,this)}}var l=CKEDITOR.plugins.indent;l.registerCommands(c,{indentlist:new f(c,"indentlist",!0),outdentlist:new f(c,"outdentlist")});CKEDITOR.tools.extend(f.prototype,l.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(c,f,l){var q=f.contains(t);l||(l=f.contains(c));return l&&q&&q.equals(l.getFirst(t))}})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");
CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function n(a,c){c=void 0===c||c;var b;if(c)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b}b=a.getStyle("text-align")||a.getAttribute("align")||""}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&c&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b}function g(a,c,b){this.editor=a;this.name=c;this.value=b;this.context="p";c=a.config.justifyClasses;var h=a.config.enterMode==
CKEDITOR.ENTER_P?"p":"div";if(c){switch(b){case "left":this.cssClassName=c[0];break;case "center":this.cssClassName=c[1];break;case "right":this.cssClassName=c[2];break;case "justify":this.cssClassName=c[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?\x3d$|\\s)");this.requiredContent=h+"("+this.cssClassName+")"}else this.requiredContent=h+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",
classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function l(a){var c=a.editor,b=c.createRange();b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);for(var h=new CKEDITOR.dom.walker(b),d;d=h.next();)if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())b.setStartAfter(d),h=new CKEDITOR.dom.walker(b);else{var e=c.config.justifyClasses;e&&(d.hasClass(e[0])?(d.removeClass(e[0]),d.addClass(e[2])):d.hasClass(e[2])&&(d.removeClass(e[2]),
d.addClass(e[0])));e=d.getStyle("text-align");"left"==e?d.setStyle("text-align","right"):"right"==e&&d.setStyle("text-align","left")}}g.prototype={exec:function(a){var c=a.getSelection(),b=a.config.enterMode;if(c){for(var h=c.createBookmarks(),d=c.getRanges(),e=this.cssClassName,g,f,k=a.config.useComputedState,k=void 0===k||k,m=d.length-1;0<=m;m--)for(g=d[m].createIterator(),g.enlargeBr=b!=CKEDITOR.ENTER_BR;f=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)if(!f.isReadOnly()){f.removeAttribute("align");
f.removeStyle("text-align");var l=e&&(f.$.className=CKEDITOR.tools.ltrim(f.$.className.replace(this.cssClassRegex,""))),p=this.state==CKEDITOR.TRISTATE_OFF&&(!k||n(f,!0)!=this.value);e?p?f.addClass(e):l||f.removeAttribute("class"):p&&f.setStyle("text-align",this.value)}a.focus();a.forceNextSelectionCheck();c.selectBookmarks(h)}},refresh:function(a,c){var b=c.block||c.blockLimit;this.setState("body"!=b.getName()&&n(b,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};
CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var c=new g(a,"justifyleft","left"),b=new g(a,"justifycenter","center"),h=new g(a,"justifyright","right"),d=new g(a,"justifyblock","justify");a.addCommand("justifyleft",c);a.addCommand("justifycenter",b);a.addCommand("justifyright",h);a.addCommand("justifyblock",d);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,
command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));a.on("dirChanged",l)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var d=function(c){var a=this._,b=a.menu;a.state!==CKEDITOR.TRISTATE_DISABLED&&(a.on&&b?b.hide():(a.previousState=a.state,b||(b=a.menu=new CKEDITOR.menu(c,{panel:{className:"cke_menu_panel",attributes:{"aria-label":c.lang.common.options}}}),b.onHide=CKEDITOR.tools.bind(function(){var b=this.command?c.getCommand(this.command).modes:this.modes;this.setState(!b||b[c.mode]?a.previousState:CKEDITOR.TRISTATE_DISABLED);a.on=0},this),
this.onMenu&&b.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),a.on=1,setTimeout(function(){b.show(CKEDITOR.document.getById(a.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){delete c.panel;this.base(c);this.hasArrow=!0;this.click=d},statics:{handler:{create:function(c){return new CKEDITOR.ui.menuButton(c)}}}})},beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});
CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(a){var b=a.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],c=this,d=a.lang.language,e={},g,h,k,f;a.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(a,b){var c=e["language_"+b];if(c)a[c.style.checkActive(a.elementPath(),a)?"removeStyle":"applyStyle"](c.style)},refresh:function(a){this.setState(c.getCurrentLangElement(a)?CKEDITOR.TRISTATE_ON:
CKEDITOR.TRISTATE_OFF)}});for(f=0;f<b.length;f++)g=b[f].split(":"),h=g[0],k="language_"+h,e[k]={label:g[1],langId:h,group:"language",order:f,ltr:"rtl"!=(""+g[2]).toLowerCase(),onClick:function(){a.execCommand("language",this.langId)},role:"menuitemcheckbox"},e[k].style=new CKEDITOR.style({element:"span",attributes:{lang:h,dir:e[k].ltr?"ltr":"rtl"}});e.language_remove={label:d.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:e.length,onClick:function(){var b=c.getCurrentLangElement(a);
b&&a.execCommand("language",b.getAttribute("lang"))}};a.addMenuGroup("language",1);a.addMenuGroup("language_remove");a.addMenuItems(e);a.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:d.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var b={},d=c.getCurrentLangElement(a),f;for(f in e)b[f]=CKEDITOR.TRISTATE_OFF;b.language_remove=d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;d&&(b["language_"+d.getAttribute("lang")]=
CKEDITOR.TRISTATE_ON);return b}})},getCurrentLangElement:function(a){var b=a.elementPath();a=b&&b.elements;var c;if(b)for(var d=0;d<a.length;d++)b=a[d],!c&&"span"==b.getName()&&b.hasAttribute("dir")&&b.hasAttribute("lang")&&(c=b);return c}})})();(function(){function p(c){return c.replace(/'/g,"\\$\x26")}function q(c){for(var b,a=c.length,f=[],e=0;e<a;e++)b=c.charCodeAt(e),f.push(b);return"String.fromCharCode("+f.join(",")+")"}function r(c,b){var a=c.plugins.link,f=a.compiledProtectionFunction.params,e,d;d=[a.compiledProtectionFunction.name,"("];for(var g=0;g<f.length;g++)a=f[g].toLowerCase(),e=b[a],0<g&&d.push(","),d.push("'",e?p(encodeURIComponent(b[a])):"","'");d.push(")");return d.join("")}function n(c){c=c.config.emailProtection||"";
var b;c&&"encode"!=c&&(b={},c.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,e){b.name=c;b.params=[];e.replace(/[^,\s]+/g,function(a){b.params.push(a)})}));return b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function c(b){return a.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",
a=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(c("ltr")+c("rtl"))},init:function(c){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(c,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(c,"link","target")&&(b=b.replace("]",
",target,onclick]"));c.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"}));c.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));c.addCommand("unlink",new CKEDITOR.unlinkCommand);c.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);c.setKeystroke(CKEDITOR.CTRL+76,"link");c.ui.addButton&&(c.ui.addButton("Link",{label:c.lang.link.toolbar,command:"link",toolbar:"links,10"}),c.ui.addButton("Unlink",
{label:c.lang.link.unlink,command:"unlink",toolbar:"links,20"}),c.ui.addButton("Anchor",{label:c.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");c.on("doubleclick",function(a){var b=CKEDITOR.plugins.link.getSelectedLink(c)||a.data.element;b.isReadOnly()||(b.is("a")?(a.data.dialog=!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount()?"link":"anchor",a.data.link=
b):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,b)&&(a.data.dialog="anchor"))},null,null,0);c.on("doubleclick",function(a){a.data.dialog in{link:1,anchor:1}&&a.data.link&&c.getSelection().selectElement(a.data.link)},null,null,20);c.addMenuItems&&c.addMenuItems({anchor:{label:c.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:c.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:c.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:c.lang.link.unlink,
command:"unlink",group:"link",order:5}});c.contextMenu&&c.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;a=CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a);if(!a&&!(a=CKEDITOR.plugins.link.getSelectedLink(c)))return null;var b={};a.getAttribute("href")&&a.getChildCount()&&(b={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});a&&a.hasAttribute("name")&&(b.anchor=b.removeAnchor=CKEDITOR.TRISTATE_OFF);return b});this.compiledProtectionFunction=n(c)},afterInit:function(c){c.dataProcessor.dataFilter.addRules({elements:{a:function(a){return a.attributes.name?
a.children.length?null:c.createFakeParserElement(a,"cke_anchor","anchor"):null}}});var b=c._.elementsPath&&c._.elementsPath.filters;b&&b.push(function(a,b){if("a"==b&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a)||a.getAttribute("name")&&(!a.getAttribute("href")||!a.getChildCount())))return"anchor"})}});var t=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,v=/subject=([^;?:@&=$,\/]*)/i,w=/body=([^;?:@&=$,\/]*)/i,x=/^#(.*)$/,y=/^((?:http|https|ftp|news):\/\/)?(.*)$/,z=/^(_(?:self|top|parent|blank))$/,
A=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,B=/^javascript:([^(]+)\(([^)]+)\)$/,C=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,D=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};
CKEDITOR.plugins.link={getSelectedLink:function(c){var b=c.getSelection(),a=b.getSelectedElement();return a&&a.is("a")?a:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),c.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(c){for(var b=c.editable(),a=b.isInline()&&!c.plugins.divarea?c.document:b,b=a.getElementsByTag("a"),a=a.getElementsByTag("img"),f=[],e=0,d;d=b.getItem(e++);)(d.data("cke-saved-name")||d.hasAttribute("name"))&&f.push({name:d.data("cke-saved-name")||
d.getAttribute("name"),id:d.getAttribute("id")});for(e=0;d=a.getItem(e++);)(d=this.tryRestoreFakeAnchor(c,d))&&f.push({name:d.getAttribute("name"),id:d.getAttribute("id")});return f},fakeAnchor:!0,tryRestoreFakeAnchor:function(c,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var a=c.restoreRealElement(b);if(a.data("cke-saved-name"))return a}},parseLinkAttributes:function(c,b){var a=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",f=c.plugins.link.compiledProtectionFunction,
e=c.config.emailProtection,d,g={};a.match(t)&&("encode"==e?a=a.replace(A,function(a,b,c){c=c||"";return"mailto:"+String.fromCharCode.apply(String,b.split(","))+c.replace(/\\'/g,"'")}):e&&a.replace(B,function(a,b,c){if(b==f.name){g.type="email";a=g.email={};b=/(^')|('$)/g;c=c.match(/[^,\s]+/g);for(var d=c.length,e,h,k=0;k<d;k++)e=decodeURIComponent,h=c[k].replace(b,"").replace(/\\'/g,"'"),h=e(h),e=f.params[k].toLowerCase(),a[e]=h;a.address=[a.name,a.domain].join("@")}}));if(!g.type)if(e=a.match(x))g.type=
"anchor",g.anchor={},g.anchor.name=g.anchor.id=e[1];else if(e=a.match(u)){d=a.match(v);a=a.match(w);g.type="email";var k=g.email={};k.address=e[1];d&&(k.subject=decodeURIComponent(d[1]));a&&(k.body=decodeURIComponent(a[1]))}else a&&(d=a.match(y))&&(g.type="url",g.url={},g.url.protocol=d[1],g.url.url=d[2]);if(b){if(a=b.getAttribute("target"))g.target={type:a.match(z)?a:"frame",name:a};else if(a=(a=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&a.match(C))for(g.target={type:"popup",name:a[1]};e=
D.exec(a[2]);)"yes"!=e[2]&&"1"!=e[2]||e[1]in{height:1,width:1,top:1,left:1}?isFinite(e[2])&&(g.target[e[1]]=e[2]):g.target[e[1]]=!0;var a={},h;for(h in m)(e=b.getAttribute(h))&&(a[m[h]]=e);if(h=b.data("cke-saved-name")||a.advName)a.advName=h;CKEDITOR.tools.isEmpty(a)||(g.advanced=a)}return g},getLinkAttributes:function(c,b){var a=c.config.emailProtection||"",f={};switch(b.type){case "url":var a=b.url&&void 0!==b.url.protocol?b.url.protocol:"http://",e=b.url&&CKEDITOR.tools.trim(b.url.url)||"";f["data-cke-saved-href"]=
0===e.indexOf("/")?e:a+e;break;case "anchor":a=b.anchor&&b.anchor.id;f["data-cke-saved-href"]="#"+(b.anchor&&b.anchor.name||a||"");break;case "email":var d=b.email,e=d.address;switch(a){case "":case "encode":var g=encodeURIComponent(d.subject||""),k=encodeURIComponent(d.body||""),d=[];g&&d.push("subject\x3d"+g);k&&d.push("body\x3d"+k);d=d.length?"?"+d.join("\x26"):"";"encode"==a?(a=["javascript:void(location.href\x3d'mailto:'+",q(e)],d&&a.push("+'",p(d),"'"),a.push(")")):a=["mailto:",e,d];break;default:a=
e.split("@",2),d.name=a[0],d.domain=a[1],a=["javascript:",r(c,d)]}f["data-cke-saved-href"]=a.join("")}if(b.target)if("popup"==b.target.type){for(var a=["window.open(this.href, '",b.target.name||"","', '"],h="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),e=h.length,g=function(a){b.target[a]&&h.push(a+"\x3d"+b.target[a])},d=0;d<e;d++)h[d]+=b.target[h[d]]?"\x3dyes":"\x3dno";g("width");g("left");g("height");g("top");a.push(h.join(","),"'); return false;");f["data-cke-pa-onclick"]=
a.join("")}else"notSet"!=b.target.type&&b.target.name&&(f.target=b.target.name);if(b.advanced){for(var l in m)(a=b.advanced[m[l]])&&(f[l]=a);f.name&&(f["data-cke-saved-name"]=f.name)}f["data-cke-saved-href"]&&(f.href=f["data-cke-saved-href"]);l={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};b.advanced&&CKEDITOR.tools.extend(l,m);for(var n in f)delete l[n];return{set:f,removed:CKEDITOR.tools.objectKeys(l)}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype=
{exec:function(c){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});c.removeStyle(b)},refresh:function(c,b){var a=b.lastElement&&b.lastElement.getAscendant("a",!0);a&&"a"==a.getName()&&a.getAttribute("href")&&a.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(c){var b=
c.getSelection(),a=b.createBookmarks(),f;if(b&&(f=b.getSelectedElement())&&(f.getChildCount()?f.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,f)))f.remove(1);else if(f=CKEDITOR.plugins.link.getSelectedLink(c))f.hasAttribute("href")?(f.removeAttributes({name:1,"data-cke-saved-name":1}),f.removeClass("cke_anchor")):f.remove(1);b.selectBookmarks(a)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function I(b,m,e){function c(c){if(!(!(a=d[c?"getFirst":"getLast"]())||a.is&&a.isBlockBoundary()||!(p=m.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||p.is&&p.isBlockBoundary({br:1})))b.document.createElement("br")[c?"insertBefore":"insertAfter"](a)}for(var f=CKEDITOR.plugins.list.listToArray(m.root,e),g=[],k=0;k<m.contents.length;k++){var h=m.contents[k];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(g.push(h),CKEDITOR.dom.element.setMarker(e,
h,"list_item_processed",!0))}h=null;for(k=0;k<g.length;k++)h=g[k].getCustomData("listarray_index"),f[h].indent=-1;for(k=h+1;k<f.length;k++)if(f[k].indent>f[k-1].indent+1){g=f[k-1].indent+1-f[k].indent;for(h=f[k].indent;f[k]&&f[k].indent>=h;)f[k].indent+=g,k++;k--}var d=CKEDITOR.plugins.list.arrayToList(f,e,null,b.config.enterMode,m.root.getAttribute("dir")).listNode,a,p;c(!0);c();d.replace(m.root);b.fire("contentDomInvalidated")}function B(b,m){this.name=b;this.context=this.type=m;this.allowedContent=
m+" li";this.requiredContent=m}function E(b,m,e,c){for(var f,g;f=b[c?"getLast":"getFirst"](J);)(g=f.getDirection(1))!==m.getDirection(1)&&f.setAttribute("dir",g),f.remove(),e?f[c?"insertBefore":"insertAfter"](e):m.append(f,c)}function F(b){function m(e){var c=b[e?"getPrevious":"getNext"](u);c&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(b.getName())&&(E(b,c,null,!e),b.remove(),b=c)}m();m(1)}function G(b){return b.type==CKEDITOR.NODE_ELEMENT&&(b.getName()in CKEDITOR.dtd.$block||b.getName()in CKEDITOR.dtd.$listItem)&&
CKEDITOR.dtd[b.getName()]["#"]}function C(b,m,e){b.fire("saveSnapshot");e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var c=e.extractContents();m.trim(!1,!0);var f=m.createBookmark(),g=new CKEDITOR.dom.elementPath(m.startContainer),k=g.block,g=g.lastElement.getAscendant("li",1)||k,h=new CKEDITOR.dom.elementPath(e.startContainer),d=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);k?(k=k.getBogus())&&k.remove():h&&(k=h.getPrevious(u))&&z(k)&&k.remove();(k=c.getLast())&&k.type==CKEDITOR.NODE_ELEMENT&&
k.is("br")&&k.remove();(k=m.startContainer.getChild(m.startOffset))?c.insertBefore(k):m.startContainer.append(c);d&&(c=A(d))&&(g.contains(d)?(E(c,d.getParent(),d),c.remove()):g.append(c));for(;e.checkStartOfBlock()&&e.checkEndOfBlock();){h=e.startPath();c=h.block;if(!c)break;c.is("li")&&(g=c.getParent(),c.equals(g.getLast(u))&&c.equals(g.getFirst(u))&&(c=g));e.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START);c.remove()}e=e.clone();c=b.editable();e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);
e.evaluator=function(a){return u(a)&&!z(a)};(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&F(e);m.moveToBookmark(f);m.select();b.fire("saveSnapshot")}function A(b){return(b=b.getLast(u))&&b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in v?b:null}var v={ol:1,ul:1},K=CKEDITOR.dom.walker.whitespaces(),H=CKEDITOR.dom.walker.bookmark(),u=function(b){return!(K(b)||H(b))},z=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(b,m,e,c,f){if(!v[b.getName()])return[];
c||(c=0);e||(e=[]);for(var g=0,k=b.getChildCount();g<k;g++){var h=b.getChild(g);h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,m,e,c+1);if("li"==h.$.nodeName.toLowerCase()){var d={parent:b,indent:c,element:h,contents:[]};f?d.grandparent=f:(d.grandparent=b.getParent(),d.grandparent&&"li"==d.grandparent.$.nodeName.toLowerCase()&&(d.grandparent=d.grandparent.getParent()));m&&CKEDITOR.dom.element.setMarker(m,h,"listarray_index",e.length);e.push(d);
for(var a=0,p=h.getChildCount(),l;a<p;a++)l=h.getChild(a),l.type==CKEDITOR.NODE_ELEMENT&&v[l.getName()]?CKEDITOR.plugins.list.listToArray(l,m,e,c+1,d.grandparent):d.contents.push(l)}}return e},arrayToList:function(b,m,e,c,f){e||(e=0);if(!b||b.length<e+1)return null;for(var g,k=b[e].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(k),d=null,a=e,p=Math.max(b[e].indent,0),l=null,q,n,t=c==CKEDITOR.ENTER_P?"p":"div";;){var r=b[a];g=r.grandparent;q=r.element.getDirection(1);if(r.indent==p){d&&b[a].parent.getName()==
d.getName()||(d=b[a].parent.clone(!1,1),f&&d.setAttribute("dir",f),h.append(d));l=d.append(r.element.clone(0,1));q!=d.getDirection(1)&&l.setAttribute("dir",q);for(g=0;g<r.contents.length;g++)l.append(r.contents[g].clone(1,1));a++}else if(r.indent==Math.max(p,0)+1)r=b[a-1].element.getDirection(1),a=CKEDITOR.plugins.list.arrayToList(b,null,a,c,r!=q?q:null),!l.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=k.$.documentMode&&l.append(k.createText("")),l.append(a.listNode),a=a.nextIndex;else if(-1==
r.indent&&!e&&g){v[g.getName()]?(l=r.element.clone(!1,!0),q!=g.getDirection(1)&&l.setAttribute("dir",q)):l=new CKEDITOR.dom.documentFragment(k);var d=g.getDirection(1)!=q,y=r.element,D=y.getAttribute("class"),z=y.getAttribute("style"),A=l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(c!=CKEDITOR.ENTER_BR||d||z||D),w,B=r.contents.length,x;for(g=0;g<B;g++)if(w=r.contents[g],H(w)&&1<B)A?x=w.clone(1,1):l.append(w.clone(1,1));else if(w.type==CKEDITOR.NODE_ELEMENT&&w.isBlockBoundary()){d&&!w.getDirection()&&
w.setAttribute("dir",q);n=w;var C=y.getAttribute("style");C&&n.setAttribute("style",C.replace(/([^;])$/,"$1;")+(n.getAttribute("style")||""));D&&w.addClass(D);n=null;x&&(l.append(x),x=null);l.append(w.clone(1,1))}else A?(n||(n=k.createElement(t),l.append(n),d&&n.setAttribute("dir",q)),z&&n.setAttribute("style",z),D&&n.setAttribute("class",D),x&&(n.append(x),x=null),n.append(w.clone(1,1))):l.append(w.clone(1,1));x&&((n||l).append(x),x=null);l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&a!=b.length-1&&(CKEDITOR.env.needsBrFiller&&
(q=l.getLast())&&q.type==CKEDITOR.NODE_ELEMENT&&q.is("br")&&q.remove(),(q=l.getLast(u))&&q.type==CKEDITOR.NODE_ELEMENT&&q.is(CKEDITOR.dtd.$block)||l.append(k.createElement("br")));q=l.$.nodeName.toLowerCase();"div"!=q&&"p"!=q||l.appendBogus();h.append(l);d=null;a++}else return null;n=null;if(b.length<=a||Math.max(b[a].indent,0)<p)break}if(m)for(b=h.getFirst();b;){if(b.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(m,b),b.getName()in CKEDITOR.dtd.$listItem&&(e=b,k=f=c=void 0,c=e.getDirection()))){for(f=
e.getParent();f&&!(k=f.getDirection());)f=f.getParent();c==k&&e.removeAttribute("dir")}b=b.getNextSourceNode()}return{listNode:h,nextIndex:a}}};var L=/^h[1-6]$/,J=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);B.prototype={exec:function(b){this.refresh(b,b.elementPath());var m=b.config,e=b.getSelection(),c=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var f=b.editable();if(f.getFirst(u)){var g=1==c.length&&c[0];(m=g&&g.getEnclosedNode())&&m.is&&this.type==m.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else m.enterMode==
CKEDITOR.ENTER_BR?f.appendBogus():c[0].fixBlock(1,m.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(c)}for(var m=e.createBookmarks(!0),f=[],k={},c=c.createIterator(),h=0;(g=c.getNextRange())&&++h;){var d=g.getBoundaryNodes(),a=d.startNode,p=d.endNode;a.type==CKEDITOR.NODE_ELEMENT&&"td"==a.getName()&&g.setStartAt(d.startNode,CKEDITOR.POSITION_AFTER_START);p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&g.setEndAt(d.endNode,CKEDITOR.POSITION_BEFORE_END);g=g.createIterator();for(g.forceBrBreak=
this.state==CKEDITOR.TRISTATE_OFF;d=g.getNextParagraph();)if(!d.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(k,d,"list_block",1);for(var l=b.elementPath(d),a=l.elements,p=0,l=l.blockLimit,q,n=a.length-1;0<=n&&(q=a[n]);n--)if(v[q.getName()]&&l.contains(q)){l.removeCustomData("list_group_object_"+h);(a=q.getCustomData("list_group_object"))?a.contents.push(d):(a={root:q,contents:[d]},f.push(a),CKEDITOR.dom.element.setMarker(k,q,"list_group_object",a));p=1;break}p||(p=l,p.getCustomData("list_group_object_"+
h)?p.getCustomData("list_group_object_"+h).contents.push(d):(a={root:p,contents:[d]},CKEDITOR.dom.element.setMarker(k,p,"list_group_object_"+h,a),f.push(a)))}}for(q=[];0<f.length;)if(a=f.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(v[a.root.getName()]){c=b;h=a;a=k;g=q;p=CKEDITOR.plugins.list.listToArray(h.root,a);l=[];for(d=0;d<h.contents.length;d++)n=h.contents[d],(n=n.getAscendant("li",!0))&&!n.getCustomData("list_item_processed")&&(l.push(n),CKEDITOR.dom.element.setMarker(a,n,"list_item_processed",
!0));for(var n=h.root.getDocument(),t=void 0,r=void 0,d=0;d<l.length;d++){var y=l[d].getCustomData("listarray_index"),t=p[y].parent;t.is(this.type)||(r=n.createElement(this.type),t.copyAttributes(r,{start:1,type:1}),r.removeStyle("list-style-type"),p[y].parent=r)}a=CKEDITOR.plugins.list.arrayToList(p,a,null,c.config.enterMode);p=void 0;l=a.listNode.getChildCount();for(d=0;d<l&&(p=a.listNode.getChild(d));d++)p.getName()==this.type&&g.push(p);a.listNode.replace(h.root);c.fire("contentDomInvalidated")}else{p=
b;g=a;d=q;l=g.contents;c=g.root.getDocument();h=[];1==l.length&&l[0].equals(g.root)&&(a=c.createElement("div"),l[0].moveChildren&&l[0].moveChildren(a),l[0].append(a),l[0]=a);g=g.contents[0].getParent();for(n=0;n<l.length;n++)g=g.getCommonAncestor(l[n].getParent());t=p.config.useComputedState;p=a=void 0;t=void 0===t||t;for(n=0;n<l.length;n++)for(r=l[n];y=r.getParent();){if(y.equals(g)){h.push(r);!p&&r.getDirection()&&(p=1);r=r.getDirection(t);null!==a&&(a=a&&a!=r?null:r);break}r=y}if(!(1>h.length)){l=
h[h.length-1].getNext();n=c.createElement(this.type);d.push(n);for(t=d=void 0;h.length;)d=h.shift(),t=c.createElement("li"),r=d,r.is("pre")||L.test(r.getName())||"false"==r.getAttribute("contenteditable")?d.appendTo(t):(d.copyAttributes(t),a&&d.getDirection()&&(t.removeStyle("direction"),t.removeAttribute("dir")),d.moveChildren(t),d.remove()),t.appendTo(n);a&&p&&n.setAttribute("dir",a);l?n.insertBefore(l):n.appendTo(g)}}else this.state==CKEDITOR.TRISTATE_ON&&v[a.root.getName()]&&I.call(this,b,a,k);
for(n=0;n<q.length;n++)F(q[n]);CKEDITOR.dom.element.clearAllMarkers(k);e.selectBookmarks(m);b.focus()},refresh:function(b,m){var e=m.contains(v,1),c=m.blockLimit||m.root;e&&c.contains(e)?this.setState(e.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(b){b.blockless||(b.addCommand("numberedlist",new B("numberedlist","ol")),b.addCommand("bulletedlist",new B("bulletedlist","ul")),b.ui.addButton&&
(b.ui.addButton("NumberedList",{label:b.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),b.ui.addButton("BulletedList",{label:b.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),b.on("key",function(m){var e=m.data.domEvent.getKey(),c;if("wysiwyg"==b.mode&&e in{8:1,46:1}){var f=b.getSelection().getRanges()[0],g=f&&f.startPath();if(f&&f.collapsed){var k=8==e,h=b.editable(),d=new CKEDITOR.dom.walker(f.clone());d.evaluator=function(a){return u(a)&&
!z(a)};d.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))};e=f.clone();if(k){var a;(a=g.contains(v))&&f.checkBoundaryOfElement(a,CKEDITOR.START)&&(a=a.getParent())&&a.is("li")&&(a=A(a))?(c=a,a=a.getPrevious(u),e.moveToPosition(a&&z(a)?a:c,CKEDITOR.POSITION_BEFORE_START)):(d.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.range.setEnd(f.startContainer,f.startOffset),(a=d.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in v||a.is("li"))&&(a.is("li")||(d.range.selectNodeContents(a),
d.reset(),d.evaluator=G,a=d.previous()),c=a,e.moveToElementEditEnd(c),e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(c)C(b,e,f),m.cancel();else{var p=g.contains(v);p&&f.checkBoundaryOfElement(p,CKEDITOR.START)&&(c=p.getFirst(u),f.checkBoundaryOfElement(c,CKEDITOR.START)&&(a=p.getPrevious(u),A(c)?a&&(f.moveToElementEditEnd(a),f.select()):b.execCommand("outdent"),m.cancel()))}}else if(c=g.contains("li")){if(d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),k=(h=c.getLast(u))&&
G(h)?h:c,g=0,(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in v&&a.equals(h)?(g=1,a=d.next()):f.checkBoundaryOfElement(k,CKEDITOR.END)&&(g=2),g&&a){f=f.clone();f.moveToElementEditStart(a);if(1==g&&(e.optimize(),!e.startContainer.equals(c))){for(c=e.startContainer;c.is(CKEDITOR.dtd.$inline);)p=c,c=c.getParent();p&&e.moveToPosition(p,CKEDITOR.POSITION_AFTER_END)}2==g&&(e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END),f.endPath().block&&f.moveToPosition(f.endPath().block,CKEDITOR.POSITION_AFTER_START));
C(b,e,f);m.cancel()}}else d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(v)&&(a=a.getFirst(u),g.block&&f.checkStartOfBlock()&&f.checkEndOfBlock()?(g.block.remove(),f.moveToElementEditStart(a),f.select()):A(a)?(f.moveToElementEditStart(a),f.select()):(f=f.clone(),f.moveToElementEditStart(a),C(b,e,f)),m.cancel());setTimeout(function(){b.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){if(!a.blockless){var b;b=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});b=a.addCommand("numberedListStyle",b);a.addFeature(b);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");b=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});b=a.addCommand("bulletedListStyle",b);
a.addFeature(b);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");a.addMenuGroup("list",108);a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var b=a.getName();if("ol"==b)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==b)return{bulletedlist:CKEDITOR.TRISTATE_OFF};
a=a.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function V(a,c,d){return n(c)&&n(d)&&d.equals(c.getNext(function(a){return!(E(a)||F(a)||u(a))}))}function z(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2))}function O(a){var c=a.element;if(c&&n(c)&&(c=c.getAscendant(a.triggers,!0))&&a.editable.contains(c)){var d=P(c);if("true"==d.getAttribute("contenteditable"))return c;if(d.is(a.triggers))return d}return null}function ka(a,c,d){r(a,c);r(a,d);a=c.size.bottom;d=d.size.top;return a&&d?0|(a+d)/2:a||d}function w(a,c,d){return c=
c[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!E(b)||n(b)&&!u(b)&&!A(a,b)})}function q(a,c,d){return a>c&&a<d}function P(a,c){if(a.data("cke-editable"))return null;for(c||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function la(a){var c=a.doc,d=G('\x3cspan contenteditable\x3d"false" style\x3d"'+Q+"position:absolute;border-top:1px dashed "+a.boxColor+'"\x3e\x3c/span\x3e',c),b=CKEDITOR.getUrl(this.path+
"images/"+(t.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");v(d,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(a.editable,!0);return this},lineChildren:[v(G('\x3cspan title\x3d"'+a.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',c),{base:Q+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+b+") center no-repeat "+a.boxColor+";cursor:pointer;"+(t.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":
"")+(t.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),v(G(W,c),{base:X+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),v(G(W,c),{base:X+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px",
"border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){r(a,this);var b=a.holdDistance,c=this.size;return c&&q(a.mouse.y,c.top-b,c.bottom+b)&&q(a.mouse.x,c.left-b,c.right+b)?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,h=d.upper,g=d.lower,l=h||g,p=l.getParent(),m={};this.trigger=d;h&&r(a,h,!0);g&&r(a,g,!0);r(a,p,!0);a.inInlineMode&&H(a,!0);p.equals(c)?(m.left=b.scroll.x,m.right=-b.scroll.x,m.width=""):(m.left=
l.size.left-l.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),m.width=l.size.outerWidth+l.size.margin.left+l.size.margin.right+b.scroll.x,m.right="");h&&g?m.top=h.size.margin.bottom===g.size.margin.top?0|h.size.bottom+h.size.margin.bottom/2:h.size.margin.bottom<g.size.margin.top?h.size.bottom+h.size.margin.bottom:h.size.bottom+h.size.margin.bottom-g.size.margin.top:h?g||(m.top=h.size.bottom+h.size.margin.bottom):m.top=g.size.top-g.size.margin.top;d.is(C)||q(m.top,
b.scroll.y-15,b.scroll.y+5)?(m.top=a.inInlineMode?0:b.scroll.y,this.look(C)):d.is(D)||q(m.top,b.pane.bottom-5,b.pane.bottom+15)?(m.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(D)):(a.inInlineMode&&(m.top-=b.editable.top+b.editable.border.top),this.look(x));a.inInlineMode&&(m.top--,m.top+=b.editable.scroll.top,m.left+=b.editable.scroll.left);for(var n in m)m[n]=CKEDITOR.tools.cssLength(m[n]);this.setStyles(m)},look:function(a){if(this.oldLook!=
a){for(var b=this.lineChildren.length,c;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new R("span",a.doc)});for(c=d.lineChildren.length;c--;)d.lineChildren[c].appendTo(d);d.look(x);d.appendTo(d.wrap);d.unselectable();d.lineChildren[0].on("mouseup",function(b){d.detach();S(a,function(b){var c=a.line.trigger;b[c.is(I)?"insertBefore":"insertAfter"](c.is(I)?c.lower:c.upper)},!0);a.editor.focus();t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();
b.data.preventDefault(!0)});d.on("mousedown",function(a){a.data.preventDefault(!0)});a.line=d}function S(a,c,d){var b=new CKEDITOR.dom.range(a.doc),e=a.editor,f;t.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(J):(f=(f=P(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new R(K[f],a.doc),f.is("br")||a.doc.createText(J).appendTo(f));d&&e.fire("saveSnapshot");c(f);b.moveToPosition(f,CKEDITOR.POSITION_AFTER_START);e.getSelection().selectRanges([b]);a.hotNode=f;d&&e.fire("saveSnapshot")}
function Y(a,c){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(b){var d=t.ie&&9>t.version?" ":J,f=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!c;S(a,function(d){f&&a.hotNode&&a.hotNode.remove();d[c?"insertAfter":"insertBefore"](b);d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!c});a.lastCmdDirection=!!c});t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();a.line.detach()}return function(b){b=b.getSelection().getStartElement();
var e;b=b.getAscendant(Z,1);if(!aa(a,b)&&b&&!b.equals(a.editable)&&!b.contains(a.editable)){(e=P(b))&&"false"==e.getAttribute("contenteditable")&&(b=e);a.element=b;e=w(a,b,!c);var f;n(e)&&e.is(a.triggers)&&e.is(ma)&&(!w(a,e,!c)||(f=w(a,e,!c))&&n(f)&&f.is(a.triggers))?d(e):(f=O(a,b),n(f)&&(w(a,f,!c)?(b=w(a,f,!c))&&n(b)&&b.is(a.triggers)&&d(f):d(f)))}}}()}}function A(a,c){if(!c||c.type!=CKEDITOR.NODE_ELEMENT||!c.$)return!1;var d=a.line;return d.wrap.equals(c)||d.wrap.contains(c)}function n(a){return a&&
a.type==CKEDITOR.NODE_ELEMENT&&a.$}function u(a){if(!n(a))return!1;var c;(c=ba(a))||(n(a)?(c={left:1,right:1,center:1},c=!(!c[a.getComputedStyle("float")]&&!c[a.getAttribute("align")])):c=!1);return c}function ba(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function L(a,c){return n(c)?c.is(a.triggers):null}function aa(a,c){if(!c)return!1;for(var d=c.getParents(1),b=d.length;b--;)for(var e=a.tabuList.length;e--;)if(d[b].hasAttribute(a.tabuList[e]))return!0;return!1}function na(a,
c,d){c=c[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(oa)});if(!c)return!1;r(a,c);return d?c.size.top>a.mouse.y:c.size.bottom<a.mouse.y}function ca(a){var c=a.editable,d=a.mouse,b=a.view,e=a.triggerOffset;H(a);var f=d.y>(a.inInlineMode?b.editable.top+b.editable.height/2:Math.min(b.editable.height,b.pane.height)/2),c=c[f?"getLast":"getFirst"](function(a){return!(E(a)||F(a))});if(!c)return null;A(a,c)&&(c=a.line.wrap[f?"getPrevious":"getNext"](function(a){return!(E(a)||F(a))}));
if(!n(c)||u(c)||!L(a,c))return null;r(a,c);return!f&&0<=c.size.top&&q(d.y,0,c.size.top+e)?(a=a.inInlineMode||0===b.scroll.y?C:x,new z([null,c,I,M,a])):f&&c.size.bottom<=b.pane.height&&q(d.y,c.size.bottom-e,b.pane.height)?(a=a.inInlineMode||q(c.size.bottom,b.pane.height-e,b.pane.height)?D:x,new z([c,null,da,M,a])):null}function ea(a){var c=a.mouse,d=a.view,b=a.triggerOffset,e=O(a);if(!e)return null;r(a,e);var b=Math.min(b,0|e.size.outerHeight/2),f=[],k,h;if(q(c.y,e.size.top-1,e.size.top+b))h=!1;else if(q(c.y,
e.size.bottom-b,e.size.bottom+1))h=!0;else return null;if(u(e)||na(a,e,h)||e.getParent().is(fa))return null;var g=w(a,e,!h);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(n(g)){if(u(g)||!L(a,g)||g.getParent().is(fa))return null;f=[g,e][h?"reverse":"concat"]().concat([T,M])}}else e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?(H(a),h&&q(c.y,e.size.bottom-b,d.pane.height)&&q(e.size.bottom,d.pane.height-b,d.pane.height)?k=D:q(c.y,0,e.size.top+b)&&(k=C)):k=x,f=[null,e][h?"reverse":
"concat"]().concat([h?da:I,M,k,e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?h?D:C:x]);return 0 in f?new z(f):null}function U(a,c,d,b){for(var e=c.getDocumentPosition(),f={},k={},h={},g={},l=y.length;l--;)f[y[l]]=parseInt(c.getComputedStyle.call(c,"border-"+y[l]+"-width"),10)||0,h[y[l]]=parseInt(c.getComputedStyle.call(c,"padding-"+y[l]),10)||0,k[y[l]]=parseInt(c.getComputedStyle.call(c,"margin-"+y[l]),10)||0;d&&!b||N(a,b);g.top=e.y-(d?0:a.view.scroll.y);g.left=e.x-(d?0:a.view.scroll.x);
g.outerWidth=c.$.offsetWidth;g.outerHeight=c.$.offsetHeight;g.height=g.outerHeight-(h.top+h.bottom+f.top+f.bottom);g.width=g.outerWidth-(h.left+h.right+f.left+f.right);g.bottom=g.top+g.outerHeight;g.right=g.left+g.outerWidth;a.inInlineMode&&(g.scroll={top:c.$.scrollTop,left:c.$.scrollLeft});return v({border:f,padding:h,margin:k,ignoreScroll:d},g,!0)}function r(a,c,d){if(!n(c))return c.size=null;if(!c.size)c.size={};else if(c.size.ignoreScroll==d&&c.size.date>new Date-ga)return null;return v(c.size,
U(a,c,d),{date:+new Date},!0)}function H(a,c){a.view.editable=U(a,a.editable,c,!0)}function N(a,c){a.view||(a.view={});var d=a.view;if(!(!c&&d&&d.date>new Date-ga)){var b=a.win,d=b.getScrollPosition(),b=b.getViewPaneSize();v(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-b.width,height:a.doc.$.documentElement.scrollHeight-b.height},pane:{width:b.width,height:b.height,bottom:b.height+d.y},date:+new Date},!0)}}function pa(a,c,d,b){for(var e=b,f=b,k=0,h=!1,g=!1,l=a.view.pane.height,
p=a.mouse;p.y+k<l&&0<p.y-k;){h||(h=c(e,b));g||(g=c(f,b));!h&&0<p.y-k&&(e=d(a,{x:p.x,y:p.y-k}));!g&&p.y+k<l&&(f=d(a,{x:p.x,y:p.y+k}));if(h&&g)break;k+=2}return new z([e,f,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var c=a.config,d=c.magicline_triggerOffset||30,b={editor:a,enterMode:c.enterMode,triggerOffset:d,holdDistance:0|d*(c.magicline_holdDistance||.5),boxColor:c.magicline_color||"#ff0000",rtl:"rtl"==c.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(c.magicline_tabuList||
[]),triggers:c.magicline_everywhere?Z:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},e,f,k;b.isRelevant=function(a){return n(a)&&!A(b,a)&&!u(a)};a.on("contentDom",function(){var d=a.editable(),g=a.document,l=a.window;v(b,{editable:d,inInlineMode:d.isInline(),doc:g,win:l,hotNode:null},!0);b.boundary=b.inInlineMode?b.editable:b.doc.getDocumentElement();d.is(B.$inline)||(b.inInlineMode&&!ba(d)&&d.setStyles({position:"relative",top:null,left:null}),la.call(this,b),N(b),d.attachListener(a,"beforeUndoImage",
function(){b.line.detach()}),d.attachListener(a,"beforeGetData",function(){b.line.wrap.getParent()&&(b.line.detach(),a.once("getData",function(){b.line.attach()},null,null,1E3))},null,null,0),d.attachListener(b.inInlineMode?g:g.getWindow().getFrame(),"mouseout",function(c){if("wysiwyg"==a.mode)if(b.inInlineMode){var d=c.data.$.clientX;c=c.data.$.clientY;N(b);H(b,!0);var e=b.view.editable,f=b.view.scroll;d>e.left-f.x&&d<e.right-f.x&&c>e.top-f.y&&c<e.bottom-f.y||(clearTimeout(k),k=null,b.line.detach())}else clearTimeout(k),
k=null,b.line.detach()}),d.attachListener(d,"keyup",function(){b.hiddenMode=0}),d.attachListener(d,"keydown",function(c){if("wysiwyg"==a.mode)switch(c.data.getKeystroke()){case 2228240:case 16:b.hiddenMode=1,b.line.detach()}}),d.attachListener(b.inInlineMode?d:g,"mousemove",function(c){f=!0;if("wysiwyg"==a.mode&&!a.readOnly&&!k){var d={x:c.data.$.clientX,y:c.data.$.clientY};k=setTimeout(function(){b.mouse=d;k=b.trigger=null;N(b);f&&!b.hiddenMode&&a.focusManager.hasFocus&&!b.line.mouseNear()&&(b.element=
ha(b,!0))&&((b.trigger=ca(b)||ea(b)||ia(b))&&!aa(b,b.trigger.upper||b.trigger.lower)?b.line.attach().place():(b.trigger=null,b.line.detach()),f=!1)},30)}}),d.attachListener(l,"scroll",function(){"wysiwyg"==a.mode&&(b.line.detach(),t.webkit&&(b.hiddenMode=1,clearTimeout(e),e=setTimeout(function(){b.mouseDown||(b.hiddenMode=0)},50)))}),d.attachListener(ja?g:l,"mousedown",function(){"wysiwyg"==a.mode&&(b.line.detach(),b.hiddenMode=1,b.mouseDown=1)}),d.attachListener(ja?g:l,"mouseup",function(){b.hiddenMode=
0;b.mouseDown=0}),a.addCommand("accessPreviousSpace",Y(b)),a.addCommand("accessNextSpace",Y(b,!0)),a.setKeystroke([[c.magicline_keystrokePrevious,"accessPreviousSpace"],[c.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var c,d,e,f;for(f in{p:1,br:1,div:1})for(c=a.document.getElementsByTag(f),e=c.count();e--;)if((d=c.getItem(e)).data("cke-magicline-hot")){b.hotNode=d;b.lastCmdDirection="true"===d.data("cke-magicline-dir")?!0:!1;return}}),this.backdoor={accessFocusSpace:S,
boxTrigger:z,isLine:A,getAscendantTrigger:O,getNonEmptyNeighbour:w,getSize:U,that:b,triggerEdge:ea,triggerEditable:ca,triggerExpand:ia})},this)}});var v=CKEDITOR.tools.extend,R=CKEDITOR.dom.element,G=R.createFromHtml,t=CKEDITOR.env,ja=CKEDITOR.env.ie&&9>CKEDITOR.env.version,B=CKEDITOR.dtd,K={},I=128,da=64,T=32,M=16,C=4,D=2,x=1,J="",fa=B.$listItem,oa=B.$tableContent,ma=v({},B.$nonEditable,B.$empty),Z=B.$block,ga=100,Q="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",
X=Q+"border-color:transparent;display:block;border-style:solid;",W="\x3cspan\x3e"+J+"\x3c/span\x3e";K[CKEDITOR.ENTER_BR]="br";K[CKEDITOR.ENTER_P]="p";K[CKEDITOR.ENTER_DIV]="div";z.prototype={set:function(a,c,d){this.properties=a+c+(d||x);return this},is:function(a){return(this.properties&a)==a}};var ha=function(){function a(a,d){var b=a.$.elementFromPoint(d.x,d.y);return b&&b.nodeType?new CKEDITOR.dom.element(b):null}return function(c,d,b){if(!c.mouse)return null;var e=c.doc,f=c.line.wrap;b=b||c.mouse;
var k=a(e,b);d&&A(c,k)&&(f.hide(),k=a(e,b),f.show());return!k||k.type!=CKEDITOR.NODE_ELEMENT||!k.$||t.ie&&9>t.version&&!c.boundary.equals(k)&&!c.boundary.contains(k)?null:k}}(),E=CKEDITOR.dom.walker.whitespaces(),F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),ia=function(){function a(a){var b=a.element,e,f,k;if(!n(b)||b.contains(a.editable)||b.isReadOnly())return null;k=pa(a,function(a,b){return!b.equals(a)},function(a,b){return ha(a,!0,b)},b);e=k.upper;f=k.lower;if(V(a,e,f))return k.set(T,
8);if(e&&b.contains(e))for(;!e.getParent().equals(b);)e=e.getParent();else e=b.getFirst(function(b){return c(a,b)});if(f&&b.contains(f))for(;!f.getParent().equals(b);)f=f.getParent();else f=b.getLast(function(b){return c(a,b)});if(!e||!f)return null;r(a,e);r(a,f);if(!q(a.mouse.y,e.size.top,f.size.bottom))return null;for(var b=Number.MAX_VALUE,h,g,l,p;f&&!f.equals(e)&&(g=e.getNext(a.isRelevant));)h=Math.abs(ka(a,e,g)-a.mouse.y),h<b&&(b=h,l=e,p=g),e=g,r(a,e);if(!l||!p||!q(a.mouse.y,l.size.top,p.size.bottom))return null;
k.upper=l;k.lower=p;return k.set(T,8)}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||F(b)||u(b)||A(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var b=a(c),e;if(e=b){e=b.upper;var f=b.lower;e=!e||!f||u(f)||u(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:L(c,e)&&L(c,f)&&V(c,e,f)?!0:!1}return e?b:null}}(),y=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;
CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function n(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var c=a.$.elements.namedItem(f[b]);c&&(c=new CKEDITOR.dom.element(c),e.push([c,c.nextSibling]),c.remove())}return e}function t(a,e){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<e.length)for(var f=e.length-1;0<=f;f--){var b=e[f][0],c=e[f][1];c?b.insertBefore(c):b.appendTo(a)}}function r(a,e){var f=n(a),b={},c=a.$;e||(b["class"]=c.className||
"",c.className="");b.inline=c.style.cssText||"";e||(c.style.cssText="position: static; overflow: visible");t(f);return b}function u(a,e){var f=n(a),b=a.$;"class"in e&&(b.className=e["class"]);"inline"in e&&(b.style.cssText=e.inline);t(f)}function v(a){if(!a.editable().isInline()){var e=CKEDITOR.instances,f;for(f in e){var b=e[f];"wysiwyg"!=b.mode||b.readOnly||(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),
a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=c.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=a.lang,b=CKEDITOR.document,c=b.getWindow(),l,m,p,n=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),g=a.ui.space("contents");
if("wysiwyg"==a.mode){var d=a.getSelection();l=d&&d.getRanges();m=c.getScrollPosition()}else{var k=a.editable().$;l=!CKEDITOR.env.ie&&[k.selectionStart,k.selectionEnd];m=[k.scrollLeft,k.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){c.on("resize",e);p=c.getScrollPosition();for(d=a.container;d=d.getParent();)d.setCustomData("maximize_saved_styles",r(d)),d.setStyle("z-index",a.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",r(g,!0));h.setCustomData("maximize_saved_styles",r(h,!0));
g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};b.getDocumentElement().setStyles(g);!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||b.getBody().setStyles(g);CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(0,0)},0):c.$.scrollTo(0,0);h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");h.$.offsetLeft;h.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"});h.addClass("cke_maximized");
e();g=h.getDocumentPosition();h.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"});CKEDITOR.env.gecko&&v(a)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",e);for(var d=[g,h],q=0;q<d.length;q++)u(d[q],d[q].getCustomData("maximize_saved_styles")),d[q].removeCustomData("maximize_saved_styles");for(d=a.container;d=d.getParent();)u(d,d.getCustomData("maximize_saved_styles")),d.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(p.x,p.y)},0):c.$.scrollTo(p.x,
p.y);h.removeClass("cke_maximized");CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0));a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:g.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState();if(d=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,d=CKEDITOR.document.getById(d._.id),d.getChild(1).setHtml(g),d.setAttribute("title",g),d.setAttribute("href",'javascript:void("'+
g+'");');"wysiwyg"==a.mode?l?(CKEDITOR.env.gecko&&v(a),a.getSelection().selectRanges(l),(k=a.getSelection().getStartElement())&&k.scrollIntoView(!0)):c.$.scrollTo(m.x,m.y):(l&&(k.selectionStart=l[0],k.selectionEnd=l[1]),k.scrollLeft=m[0],k.scrollTop=m[1]);l=m=null;n=this.state;a.fire("maximize",this.state)},canUndo:!1});a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==
CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:n)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(b){var a=this;b.setData(b.config.newpage_html||"",function(){b.focus();setTimeout(function(){b.fire("afterCommandExec",{name:"newpage",command:a});b.selectionChange()},200)})},async:!0});a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function e(a){return{"aria-label":a,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var a=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g,
" !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}")},init:function(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(b){b=b.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&a.getSelection().selectElement(b)})}))},afterInit:function(a){function b(f){CKEDITOR.tools.extend(f.attributes,
e(a.lang.pagebreak.alt),!0);f.children.length=0}var c=a.dataProcessor,g=c&&c.dataFilter,c=c&&c.htmlFilter,h=/page-break-after\s*:\s*always/i,k=/display\s*:\s*none/i;c&&c.addRules({attributes:{"class":function(a,b){var c=a.replace("cke_pagebreak","");if(c!=a){var d=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];b.children.length=0;b.add(d);d=b.attributes;delete d["aria-label"];delete d.contenteditable;delete d.title}return c}}},{applyToAll:!0,
priority:5});g&&g.addRules({elements:{div:function(a){if(a.attributes["data-cke-pagebreak"])b(a);else if(h.test(a.attributes.style)){var c=a.children[0];c&&"span"==c.name&&k.test(c.attributes.style)&&b(a)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(a){var b=a.document.createElement("div",{attributes:e(a.lang.pagebreak.alt)});a.insertElement(b)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(a){return(a=a.parent)&&"div"==a.name&&a.styles&&a.styles["page-break-after"]},
styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var c={canUndo:!1,async:!0,exec:function(a){a.getClipboardData({title:a.lang.pastetext.title},function(b){b&&a.fire("paste",{type:"text",dataValue:b.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastetext",command:c,returnValue:!!b})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(a){a.addCommand("pastetext",c);a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,
command:"pastetext",toolbar:"clipboard,40"});if(a.config.forcePasteAsPlainText)a.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")});a.on("pasteState",function(b){a.getCommand("pastetext").setState(b.data)})}})})();(function(){function h(a,d,f){var b=CKEDITOR.cleanWord;b?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||d+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0));return!b}function k(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(a){var d=0,f=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var e=this;d=1;a.once("beforePaste",k);a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",
{type:"html",dataValue:c.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!c})})}});a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});a.on("pasteState",function(b){a.getCommand("pastefromword").setState(b.data)});a.on("paste",function(b){var e=b.data,c=e.dataValue;if(c&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(c))){e.dontFilter=
!0;var g=h(a,f,function(){if(g)a.fire("paste",e);else if(!a.config.pasteFromWordPromptCleanup||d||confirm(a.lang.pastefromword.confirmCleanup))e.dataValue=CKEDITOR.cleanWord(c,a);d=0});g&&b.cancel()}},null,null,3)}})})();(function(){var h,k={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(a){var g,b=a.config,f=b.baseHref?'\x3cbase href\x3d"'+b.baseHref+'"/\x3e':"";if(b.fullPage)g=a.getData().replace(/<head>/,"$\x26"+f).replace(/[^>]*(?=<\/title>)/,"$\x26 \x26mdash; "+a.lang.preview.preview);else{var b="\x3cbody ",d=a.document&&a.document.getBody();d&&(d.getAttribute("id")&&(b+='id\x3d"'+d.getAttribute("id")+'" '),d.getAttribute("class")&&(b+='class\x3d"'+d.getAttribute("class")+'" '));b+="\x3e";g=a.config.docType+
'\x3chtml dir\x3d"'+a.config.contentsLangDirection+'"\x3e\x3chead\x3e'+f+"\x3ctitle\x3e"+a.lang.preview.preview+"\x3c/title\x3e"+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+"\x3c/head\x3e"+b+a.getData()+"\x3c/body\x3e\x3c/html\x3e"}f=640;b=420;d=80;try{var c=window.screen,f=Math.round(.8*c.width),b=Math.round(.7*c.height),d=Math.round(.1*c.width)}catch(k){}if(!1===a.fire("contentPreview",a={dataValue:g}))return!1;var c="",e;CKEDITOR.env.ie&&(window._cke_htmlToLoad=a.dataValue,e="javascript:void( (function(){document.open();"+
("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )",c="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=a.dataValue,c=CKEDITOR.getUrl(h+"preview.html"));c=window.open(c,null,"toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d"+f+",height\x3d"+b+",left\x3d"+d);CKEDITOR.env.ie&&c&&(c.location=
e);CKEDITOR.env.ie||CKEDITOR.env.gecko||(e=c.document,e.open(),e.write(a.dataValue),e.close());return!0}};CKEDITOR.plugins.add("preview",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(h=this.path,a.addCommand("preview",k),a.ui.addButton&&a.ui.addButton("Preview",{label:a.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var h=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,m=a.getSelection().getRanges(),n=m.createIterator(),p=function(a){return a.type==CKEDITOR.NODE_ELEMENT},c;c=n.getNextRange();){c.collapsed||c.enlarge(CKEDITOR.ENLARGE_ELEMENT);
var l=c.createBookmark(),b=l.startNode,d=l.endNode,k=function(b){for(var c=a.elementPath(b),e=c.elements,d=1,g;(g=e[d])&&!g.equals(c.block)&&!g.equals(c.blockLimit);d++)h.test(g.getName())&&f(a,g)&&b.breakParent(g)};k(b);if(d)for(k(d),b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(d);)if(b.isReadOnly()){if(b.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;b=b.getNext(p)}else k=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==b.getName()&&b.data("cke-realelement")||!f(a,b)||(h.test(b.getName())?
b.remove(1):(b.removeAttributes(e),a.fire("removeFormatCleanup",b))),b=k;c.moveToBookmark(l)}a.forceNextSelectionCheck();a.getSelection().selectRanges(m)}}},filter:function(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++)if(!1===e[f](h))return!1;return!0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";
CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var b={readOnly:1,exec:function(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit()}catch(b){a.submit.click&&a.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(a){a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.addCommand("save",b).modes={wysiwyg:!!a.element.$.form},a.ui.addButton&&a.ui.addButton("Save",{label:a.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(b){b.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var b=a.editable();if(b.is("textarea"))a=b.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(b.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var c=a.createRange();c.selectNodeContents(b);c.select()}a.forceNextSelectionCheck();a.selectionChange()}},canUndo:!1});b.ui.addButton&&
b.ui.addButton("SelectAll",{label:b.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var k={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var c=this.state!=CKEDITOR.TRISTATE_ON||a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!a.focusManager.hasFocus?"removeClass":"attachClass";a.editable()[c]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),c,b,e,f,k=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&
9>CKEDITOR.env.version),g=l?":not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)":"",d,h;for(c=b=e=f="";d=a.pop();)h=a.length?",":"",c+=".cke_show_blocks "+d+g+h,e+=".cke_show_blocks.cke_contents_ltr "+d+g+h,f+=".cke_show_blocks.cke_contents_rtl "+d+g+h,b+=".cke_show_blocks "+d+g+"{background-image:url("+CKEDITOR.getUrl(k+"images/block_"+d+".png")+")}";CKEDITOR.addCss((c+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(b,e+"{background-position:top left;padding-left:8px}",
f+"{background-position:top right;padding-right:8px}"));l||CKEDITOR.addCss(".cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(a){function c(){b.refresh(a)}
if(!a.blockless){var b=a.addCommand("showblocks",k);b.canUndo=!1;a.config.startupOutlineBlocks&&b.setState(CKEDITOR.TRISTATE_ON);a.ui.addButton&&a.ui.addButton("ShowBlocks",{label:a.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a.on("focus",c),a.on("blur",c));a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)})}}})})();(function(){var f={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,
"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a)},init:function(a){var b=a.addCommand("showborders",f);b.canUndo=!1;!1!==a.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON);a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)},null,null,100);a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.on("removeFormatCleanup",function(d){d=d.data;a.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&d.is("table")&&(!d.hasAttribute("border")||
0>=parseInt(d.getAttribute("border"),10))&&d.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter;b=b&&b.htmlFilter;a&&a.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"],c=parseInt(a.border,10);c&&!(0>=c)||b&&-1!=b.indexOf("cke_show_border")||(a["class"]=(b||"")+" cke_show_border")}}});b&&b.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,
""))}}})}});CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;if("table"==b||"tableProperties"==b)if(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var e=parseInt(this.getValue(),10);c[!e||0>=e?"addClass":"removeClass"]("cke_show_border")}}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,
arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments);parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}})})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(a){function d(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();a&&this.focus()}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;a.addMode("source",function(e){var b=a.ui.space("contents").getDocument().createElement("textarea");b.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?
"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));b.setAttribute("dir","ltr");b.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");a.ui.space("contents").append(b);b=a.editable(new c(a,b));b.setData(a.getData(1));CKEDITOR.env.ie&&(b.attachListener(a,"resize",d,b),b.attachListener(CKEDITOR.document.getWindow(),"resize",d,b),CKEDITOR.tools.setTimeout(d,0,b));a.fire("ariaWidget",
this);e()});a.addCommand("source",f.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var c=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},
insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){c.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(c){"wysiwyg"==c.mode&&c.fire("saveSnapshot");c.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);c.setMode("source"==c.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var b=
a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.bindEvents(a);this.parseConfig(a);this.addRule(a);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(a);var b=a.lang.scayt,e=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:b.text_title,title:a.plugins.wsc?a.lang.wsc.title:b.text_title,modes:{wysiwyg:!(e.ie&&(8>e.version||e.quirks))},
toolbar:"spellchecker,20",refresh:function(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=d.state.scayt[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);a.fire("scaytButtonState",b)},onRender:function(){var b=this;a.on("scaytButtonState",function(a){void 0!==typeof a.data&&b.setState(a.data)})},onMenu:function(){var b=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&d.state.scayt[a.name]?"btn_disable":"btn_enable"];b={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};a.config.scayt_uiTabs[0]||delete b.scaytOptions;a.config.scayt_uiTabs[1]||delete b.scaytLangs;a.config.scayt_uiTabs[2]||delete b.scaytDict;return b}});a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(b,d){var e=
a.scayt,k,l;e&&(l=e.getSelectionNode())&&(k=c.menuGenerator(a,l),e.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" .")));return k}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(b){return function(){var d=a.scayt;d&&d.hideBanner();return b.apply(this)}}))},addMenuItems:function(a){var c=this,d=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");for(var b=a.config.scayt_contextMenuItemsOrder.split("|"),e=0;e<b.length;e++)b[e]="scayt_"+b[e];
if((b=["grayt_description","grayt_suggest","grayt_control"].concat(b))&&b.length)for(e=0;e<b.length;e++)a.addMenuGroup(b[e],e-10);a.addCommand("scaytToggle",{exec:function(a){var b=a.scayt;d.state.scayt[a.name]=!d.state.scayt[a.name];!0===d.state.scayt[a.name]?b||d.createScayt(a):b&&d.destroy(a)}});a.addCommand("scaytAbout",{exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytOptions",{exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();
a.openDialog(c.dialogName)}});a.addCommand("scaytLangs",{exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytDict",{exec:function(a){a.scayt.tabToOpen="dictionaries";a.lockSelection();a.openDialog(c.dialogName)}});b={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",
command:"scaytOptions"},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};a.plugins.wsc&&(b.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,d=a.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(c=c.replace(/\s/g,""))?(d&&b.state.scayt[a.name]&&d.setMarkupPaused&&d.setMarkupPaused(!0),
a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}});a.addMenuItems(b)},bindEvents:function(a){var c=CKEDITOR.plugins.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,b=function(){c.destroy(a)},e=function(){!c.state.scayt[a.name]||a.readOnly||a.scayt||c.createScayt(a)},f=function(){var b=a.editable();b.attachListener(b,"focus",function(b){CKEDITOR.plugins.scayt&&!a.scayt&&setTimeout(e,0);b=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[a.name]&&a.scayt;var c,
h;if((d||b)&&a._.savedSelection){b=a._.savedSelection.getSelectedElement();b=!b&&a._.savedSelection.getRanges();for(var f=0;f<b.length;f++)h=b[f],"string"===typeof h.startContainer.$.nodeValue&&(c=h.startContainer.getText().length,(c<h.startOffset||c<h.endOffset)&&a.unlockSelection(!1))}},this,null,-10)},g=function(){d?a.config.scayt_inlineModeImmediateMarkup?e():(a.on("blur",function(){setTimeout(b,0)}),a.on("focus",e),a.focusManager.hasFocus&&e()):e();f();var c=a.editable();c.attachListener(c,"mousedown",
function(b){b=b.data.getTarget();var d=a.widgets&&a.widgets.getByElement(b);d&&(d.wrapper=b.getAscendant(function(a){return a.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};a.on("contentDom",g);a.on("beforeCommandExec",function(b){var d=a.scayt,e=null,f=!1,g=!0;b.data.name in c.options.disablingCommandExec&&"wysiwyg"==a.mode?d&&(c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==b.data.name&&"italic"!==b.data.name&&"underline"!==b.data.name&&"strike"!==b.data.name&&
"subscript"!==b.data.name&&"superscript"!==b.data.name&&"enter"!==b.data.name&&"cut"!==b.data.name&&"language"!==b.data.name||!d||("cut"===b.data.name&&(g=!1,f=!0),"language"===b.data.name&&(e=(e=a.plugins.language.getCurrentLangElement(a))&&e.$,f=!0),a.fire("reloadMarkupScayt",{removeOptions:{removeInside:g,forceBookmark:f,selectionNode:e},timeout:0}))});a.on("beforeSetMode",function(b){if("source"==b.data){if(b=a.scayt)c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);a.document&&
a.document.getBody().removeAttribute("_jquid")}});a.on("afterCommandExec",function(b){"wysiwyg"!=a.mode||"undo"!=b.data.name&&"redo"!=b.data.name||setTimeout(function(){var b=a.scayt,d=b&&b.getScaytLangList();d&&d.ltr&&d.rtl&&b.fire("startSpellCheck, startGrammarCheck")},250)});a.on("readOnly",function(b){var d;b&&(d=a.scayt,!0===b.editor.readOnly?d&&d.fire("removeMarkupInDocument",{}):d?d.fire("startSpellCheck, startGrammarCheck"):"wysiwyg"==b.editor.mode&&!0===c.state.scayt[b.editor.name]&&(c.createScayt(a),
b.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});a.on("beforeDestroy",b);a.on("setData",function(){b();(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||a.plugins.divarea)&&g()},this,null,50);a.on("reloadMarkupScayt",function(b){var d=b.data&&b.data.removeOptions;setTimeout(function(){var b=a.scayt,c=b&&b.getScaytLangList();c&&c.ltr&&c.rtl&&(a.document.fire("keydown",new CKEDITOR.dom.event({keyCode:37})),b.removeMarkupInSelectionNode(d),b.fire("startSpellCheck, startGrammarCheck"))},b.data&&
b.data.timeout||0)});a.on("insertElement",function(){a.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);a.on("insertHtml",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("insertText",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("scaytDialogShown",function(b){b.data.selectPage(a.scayt.tabToOpen)})},parseConfig:function(a){var c=CKEDITOR.plugins.scayt;c.replaceOldOptionsNames(a.config);"boolean"!==typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=
!1);c.state.scayt[a.name]=a.config.scayt_autoStartup;"boolean"!==typeof a.config.grayt_autoStartup&&(a.config.grayt_autoStartup=!1);"boolean"!==typeof a.config.scayt_inlineModeImmediateMarkup&&(a.config.scayt_inlineModeImmediateMarkup=!1);c.state.grayt[a.name]=a.config.grayt_autoStartup;a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignore|ignoreall|add");a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");a.config.scayt_sLang||
(a.config.scayt_sLang="en_US");if(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)a.config.scayt_maxSuggestions=5;if(void 0===a.config.scayt_minWordLength||"number"!=typeof a.config.scayt_minWordLength||1>a.config.scayt_minWordLength)a.config.scayt_minWordLength=4;if(void 0===a.config.scayt_customDictionaryIds||"string"!==typeof a.config.scayt_customDictionaryIds)a.config.scayt_customDictionaryIds="";if(void 0===a.config.scayt_userDictionaryName||
"string"!==typeof a.config.scayt_userDictionaryName)a.config.scayt_userDictionaryName=null;if("string"===typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var d=[],b=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){1===Number(a)||0===Number(a)?(b.push(!0),d.push(Number(a))):b.push(!1)});null===CKEDITOR.tools.search(b,!1)?a.config.scayt_uiTabs=d:a.config.scayt_uiTabs=[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];
"string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null);"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null);"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null);"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null);a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on");"string"!==typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");
"string"!==typeof a.config.scayt_srcUrl&&(c=document.location.protocol,c=-1!=c.search(/https?:/)?c:"http:",a.config.scayt_srcUrl=c+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;
"boolean"!==typeof a.config.scayt_multiLanguageMode&&(a.config.scayt_multiLanguageMode=!1);"object"!==typeof a.config.scayt_multiLanguageStyles&&(a.config.scayt_multiLanguageStyles={});a.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof a.config.scayt_ignoreAllCapsWords&&(a.config.scayt_ignoreAllCapsWords=!1);a.config.scayt_ignoreDomainNames&&"boolean"!==typeof a.config.scayt_ignoreDomainNames&&(a.config.scayt_ignoreDomainNames=!1);a.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof a.config.scayt_ignoreWordsWithMixedCases&&
(a.config.scayt_ignoreWordsWithMixedCases=!1);a.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof a.config.scayt_ignoreWordsWithNumbers&&(a.config.scayt_ignoreWordsWithNumbers=!1);if(a.config.scayt_disableOptionsStorage){var c=CKEDITOR.tools.isArray(a.config.scayt_disableOptionsStorage)?a.config.scayt_disableOptionsStorage:"string"===typeof a.config.scayt_disableOptionsStorage?[a.config.scayt_disableOptionsStorage]:void 0,e="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),
f=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],g=CKEDITOR.tools.search,h=CKEDITOR.tools.indexOf;a.config.scayt_disableOptionsStorage=function(a){for(var b=[],d=0;d<a.length;d++){var c=a[d],m=!!g(a,"options");if(!g(e,c)||m&&g(f,function(a){if("lang"===a)return!1}))return;g(f,c)&&f.splice(h(f,c),1);if("all"===c||m&&g(a,"lang"))return[];"options"===c&&(f=["lang"])}return b=b.concat(f)}(c)}},addRule:function(a){var c=CKEDITOR.plugins.scayt,
d=a.dataProcessor,b=d&&d.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters,d=d&&d.dataFilter,f=a.addRemoveFormatFilter,g=function(b){if(a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute)))return!1},h=function(b){var d=!0;a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute))&&(d=!1);return d};e&&e.push(g);d&&d.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&
a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});b&&b.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});f&&f.call(a,h)},scaytMenuDefinition:function(a){var c=
this;a=a.scayt;return{scayt:{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary()},10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,
exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen=
"dictionaries";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",
order:2,exec:function(a){a.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(a,c,d){var b={},e={},f=d?"word":"phrase",g=d?"startGrammarCheck":"startSpellCheck",h=a.scayt;if(0<c.length&&"no_any_suggestions"!==c[0])if(d)for(d=0;d<c.length;d++){var k="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_");a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],f,g));d<a.config.scayt_maxSuggestions?(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_suggest",
order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_moresuggest",order:d+1}),e[k]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:h.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return e}}),b.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(d=0;d<c.length;d++)k="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_"),a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],
f,g)),a.addMenuItem(k,{label:c[d],command:k,group:"grayt_suggest",order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF;else b.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:h.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return b},menuGenerator:function(a,c){var d=a.scayt,b=this.scaytMenuDefinition(a),e={},f=a.config.scayt_contextCommands.split("|"),g=c.getAttribute(d.getLangAttribute())||
d.getLang(),h,k;h=d.isScaytNode(c);k=d.isGraytNode(c);h?(b=b.scayt,e=c.getAttribute(d.getScaytNodeAttributeName()),d.fire("getSuggestionsList",{lang:g,word:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,h)):k&&(b=b.grayt,e=c.getAttribute(d.getGraytNodeAttributeName()),k=d.getProblemDescriptionText(e,g),b.grayt_problemdescription&&k&&(b.grayt_problemdescription.label=k),d.fire("getGrammarSuggestionsList",{lang:g,phrase:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,
h));if(h&&"off"==a.config.scayt_contextCommands)return e;for(var l in b)h&&-1==CKEDITOR.tools.indexOf(f,l.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||(e[l]="undefined"!=typeof b[l].state?b[l].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof b[l].verification||b[l].verification(a)||delete e[l],a.addCommand(l,{exec:b[l].exec}),a.addMenuItem(l,{label:a.lang.scayt[b[l].label]||b[l].label,command:l,group:b[l].group,order:b[l].order}));return e},createCommand:function(a,c,d){return{exec:function(b){b=
b.scayt;var e={};e[c]=a;b.replaceSelectionNode(e);"startGrammarCheck"===d&&b.removeMarkupInSelectionNode({grammarOnly:!0});b.fire(d)}}}});
CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",
scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(a){for(var c in a)c in this.backCompatibilityMap&&(a[this.backCompatibilityMap[c]]=a[c],delete a[c])},createScayt:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,function(a){var e=a.window&&a.window.getFrame()||a.editable();e?(e={lang:a.config.scayt_sLang,container:e.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,
debug:a.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,problem_grammar_data_attribute:c.options.problem_grammar_data_attribute,problem_grammar_class:c.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,multiLanguageMode:a.config.scayt_multiLanguageMode,multiLanguageStyles:a.config.scayt_multiLanguageStyles,
graytAutoStartup:d.state.grayt[a.name]},a.config.scayt_serviceProtocol&&(e.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(e.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(e.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(e.service_path=a.config.scayt_servicePath),"boolean"===typeof a.config.scayt_ignoreAllCapsWords&&(e["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"===typeof a.config.scayt_ignoreDomainNames&&
(e["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"===typeof a.config.scayt_ignoreWordsWithMixedCases&&(e["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"===typeof a.config.scayt_ignoreWordsWithNumbers&&(e["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers),e=new SCAYT.CKSCAYT(e,function(){},function(){}),e.subscribe("suggestionListSend",function(a){for(var b={},d=[],c=0;c<a.suggestionList.length;c++)b["word_"+a.suggestionList[c]]||
(b["word_"+a.suggestionList[c]]=a.suggestionList[c],d.push(a.suggestionList[c]));CKEDITOR.plugins.scayt.suggestions=d}),e.subscribe("selectionIsChanged",function(d){a.getSelection().isLocked&&a.lockSelection()}),e.subscribe("graytStateChanged",function(c){d.state.grayt[a.name]=c.state}),a.scayt=e,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):d.state.scayt[a.name]=!1})},destroy:function(a){a.scayt&&a.scayt.destroy();delete a.scayt;a.fire("scaytButtonState",
CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,c){var d=this,b,e;this.loadingHelper[a.name]||("undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[a.name]=c,this.loadingHelper.loadOrder.push(a.name),b=new Date,b=b.getTime(),e=a.config.scayt_srcUrl,e+=0<=e.indexOf("?")?"":"?"+b,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(e,function(a){if(a){CKEDITOR.fireOnce("scaytReady");for(var b=0;b<d.loadingHelper.loadOrder.length;b++){a=d.loadingHelper.loadOrder[b];
if("function"===typeof d.loadingHelper[a])d.loadingHelper[a](CKEDITOR.instances[a]);delete d.loadingHelper[a]}d.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"===typeof c&&c(a)))}};
CKEDITOR.on("dialogDefinition",function(a){var c=a.data.name;a=a.data.definition.dialog;if("scaytDialog"===c)a.on("cancel",function(a){return!1},this,null,-1);if("checkspell"===c)a.on("cancel",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!1);a.unlockSelection()},this,null,-2);if("link"===c)a.on("ok",function(a){var b=a.sender&&a.sender.getParentEditor();b&&setTimeout(function(){b.fire("reloadMarkupScayt",
{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})});
CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,c=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(b="ready"==this.status)var f=c.removeMarkupFromString(this.getSnapshot()),c=c.removeMarkupFromString(this._.previousValue),b=b&&c!==f}else b=a.call(this);return b}});a.resetDirty=CKEDITOR.tools.override(a.resetDirty,
function(a){return function(){var b=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=b.removeMarkupFromString(this.getSnapshot()):a.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,c="function"==typeof a.equalsContent?"equalsContent":"equals";a[c]=CKEDITOR.tools.override(a[c],function(a){return function(b){var c=b.editor.scayt,f=this.contents,g=b.contents,h=null;CKEDITOR.plugins.scayt&&
CKEDITOR.plugins.scayt.state.scayt[b.editor.name]&&b.editor.scayt&&(this.contents=c.removeMarkupFromString(f)||"",b.contents=c.removeMarkupFromString(g)||"");h=a.apply(this,arguments);this.contents=f;b.contents=g;return h}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(c){var l=c.config,g=c.lang.stylescombo,f={},k=[],m=[];c.on("stylesSet",function(b){if(b=b.data.styles){for(var a,h,d,e=0,n=b.length;e<n;e++)(a=b[e],c.blockless&&a.element in CKEDITOR.dtd.$block||(h=a.name,a=new CKEDITOR.style(a),c.filter.customConfig&&!c.filter.check(a)))||(a._name=h,a._.enterMode=l.enterMode,a._.type=d=a.assignedTo||a.type,a._.weight=e+1E3*(d==CKEDITOR.STYLE_OBJECT?1:d==CKEDITOR.STYLE_BLOCK?2:3),f[h]=
a,k.push(a),m.push(a));k.sort(function(a,b){return a._.weight-b._.weight})}});c.ui.addRichCombo("Styles",{label:g.label,title:g.panelTitle,toolbar:"styles,10",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!0,attributes:{"aria-label":g.panelTitle}},init:function(){var b,a,c,d,e,f;e=0;for(f=k.length;e<f;e++)b=k[e],a=b._name,d=b._.type,d!=c&&(this.startGroup(g["panelTitle"+String(d)]),c=d),this.add(a,b.type==CKEDITOR.STYLE_OBJECT?a:b.buildPreview(),a);
this.commit()},onClick:function(b){c.focus();c.fire("saveSnapshot");b=f[b];var a=c.elementPath();c[b.checkActive(a,c)?"removeStyle":"applyStyle"](b);c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(b){var a=this.getValue();b=b.data.path.elements;for(var h=0,d=b.length,e;h<d;h++){e=b[h];for(var g in f)if(f[g].checkElementRemovable(e,!0,c)){g!=a&&this.setValue(g);return}}this.setValue("")},this)},onOpen:function(){var b=c.getSelection().getSelectedElement(),b=c.elementPath(b),
a=[0,0,0,0];this.showAll();this.unmarkAll();for(var h in f){var d=f[h],e=d._.type;d.checkApplicable(b,c,c.activeFilter)?a[e]++:this.hideItem(h);d.checkActive(b,c)&&this.mark(h)}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);a[CKEDITOR.STYLE_INLINE]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=c.elementPath();if(b){for(var a in f)if(f[a].checkApplicable(b,
c,c.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){f={};k=[]}})}})})();(function(){function k(c){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(d){if(d.editable().hasFocus){var e=d.getSelection(),b;if(b=(new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root)).contains({td:1,th:1},1)){var e=d.createRange(),a=CKEDITOR.tools.tryThese(function(){var a=b.getParent().$.cells[b.$.cellIndex+(c?-1:1)];a.parentNode.parentNode;return a},function(){var a=b.getParent(),a=a.getAscendant("table").$.rows[a.$.rowIndex+(c?-1:1)];return a.cells[c?a.cells.length-1:
0]});if(a||c)if(a)a=new CKEDITOR.dom.element(a),e.moveToElementEditStart(a),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(a);else return!0;else{for(var f=b.getAscendant("table").$,a=b.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),d.document),g=0,h=a.length;g<h;g++)f.append((new CKEDITOR.dom.element(a[g],d.document)).clone(!1,!1)).appendBogus();e.moveToElementEditStart(f)}e.select(!0);return!0}}return!1}}}var h={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function(c){c.container.focusNext(!0,
c.tabIndex)}},f={exec:function(c){c.container.focusPrevious(!0,c.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(c){for(var d=!1!==c.config.enableTabKeyTools,e=c.config.tabSpaces||0,b="";e--;)b+="";if(b)c.on("key",function(a){9==a.data.keyCode&&(c.insertText(b),a.cancel())});if(d)c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&c.execCommand("selectPreviousCell"))&&a.cancel()});c.addCommand("blur",CKEDITOR.tools.extend(g,h));c.addCommand("blurBack",
CKEDITOR.tools.extend(f,h));c.addCommand("selectNextCell",k());c.addCommand("selectPreviousCell",k(!0))}})})();
CKEDITOR.dom.element.prototype.focusNext=function(k,h){var g=void 0===h?this.getTabIndex():h,f,c,d,e,b,a;if(0>=g)for(b=this.getNextSourceNode(k,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&b.equals(this)){if(c=!0,k){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(b)&&
(f=1);if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break}a>g&&(!d||!e||a<e)?(d=b,e=a):d||0!==a||(d=b,e=a)}}d&&d.focus()};
CKEDITOR.dom.element.prototype.focusPrevious=function(k,h){for(var g=void 0===h?this.getTabIndex():h,f,c,d,e=0,b,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&a.equals(this)){if(c=!0,k){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(a)&&(f=1);if(a.isVisible()&&!(0>(b=a.getTabIndex())))if(0>=g){if(f&&0===b){d=a;break}b>e&&(d=a,e=b)}else{if(f&&b==g){d=a;break}b<g&&(!d||b>e)&&(d=a,e=b)}}d&&d.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,f){this.setState(f.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?
"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var d=b.getParent(),c=a.editable();1!=d.getChildCount()||d.is("td","th")||d.equals(c)||(b=d);a=a.createRange();a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START);
b.remove();a.select()}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog=
"tableProperties")});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function t(e){function d(a){0<b.length||a.type!=CKEDITOR.NODE_ELEMENT||!C.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(c,a,"selected_cell",!0),b.push(a))}e=e.getRanges();for(var b=[],c={},a=0;a<e.length;a++){var f=e[a];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&b.push(f);else{var f=new CKEDITOR.dom.walker(f),g;for(f.guard=d;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",
!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,g,"selected_cell",!0),b.push(g))}}CKEDITOR.dom.element.clearAllMarkers(c);return b}function p(e,d){for(var b=t(e),c=b[0],a=c.getAscendant("table"),c=c.getDocument(),f=b[0].getParent(),g=f.$.rowIndex,b=b[b.length-1],h=b.getParent().$.rowIndex+b.$.rowSpan-1,b=new CKEDITOR.dom.element(a.$.rows[h]),g=d?g:h,f=d?f:b,b=CKEDITOR.tools.buildTableMap(a),a=b[g],g=d?b[g-1]:b[g+1],b=b[0].length,c=c.createElement("tr"),
h=0;a[h]&&h<b;h++){var k;1<a[h].rowSpan&&g&&a[h]==g[h]?(k=a[h],k.rowSpan+=1):(k=(new CKEDITOR.dom.element(a[h])).clone(),k.removeAttribute("rowSpan"),k.appendBogus(),c.append(k),k=k.$);h+=k.colSpan-1}d?c.insertBefore(f):c.insertAfter(f)}function u(e){if(e instanceof CKEDITOR.dom.selection){var d=t(e),b=d[0].getAscendant("table"),c=CKEDITOR.tools.buildTableMap(b);e=d[0].getParent().$.rowIndex;for(var d=d[d.length-1],a=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],f=e;f<=a;f++){for(var g=c[f],h=new CKEDITOR.dom.element(b.$.rows[f]),
k=0;k<g.length;k++){var l=new CKEDITOR.dom.element(g[k]),n=l.getParent().$.rowIndex;1==l.$.rowSpan?l.remove():(--l.$.rowSpan,n==f&&(n=c[f+1],n[k-1]?l.insertAfter(new CKEDITOR.dom.element(n[k-1])):(new CKEDITOR.dom.element(b.$.rows[f+1])).append(l,1)));k+=l.$.colSpan-1}d.push(h)}c=b.$.rows;b=new CKEDITOR.dom.element(c[a+1]||(0<e?c[e-1]:null)||b.$.parentNode);for(f=d.length;0<=f;f--)u(d[f]);return b}e instanceof CKEDITOR.dom.element&&(b=e.getAscendant("table"),1==b.$.rows.length?b.remove():e.remove());
return null}function v(e,d){for(var b=d?Infinity:0,c=0;c<e.length;c++){var a;a=e[c];for(var f=d,g=a.getParent().$.cells,h=0,k=0;k<g.length;k++){var l=g[k],h=h+(f?1:l.colSpan);if(l==a.$)break}a=h-1;if(d?a<b:a>b)b=a}return b}function m(e,d){for(var b=t(e),c=b[0].getAscendant("table"),a=v(b,1),b=v(b),a=d?a:b,f=CKEDITOR.tools.buildTableMap(c),c=[],b=[],g=f.length,h=0;h<g;h++)c.push(f[h][a]),b.push(d?f[h][a-1]:f[h][a+1]);for(h=0;h<g;h++)c[h]&&(1<c[h].colSpan&&b[h]==c[h]?(a=c[h],a.colSpan+=1):(a=(new CKEDITOR.dom.element(c[h])).clone(),
a.removeAttribute("colSpan"),a.appendBogus(),a[d?"insertBefore":"insertAfter"].call(a,new CKEDITOR.dom.element(c[h])),a=a.$),h+=a.rowSpan-1)}function y(e,d){var b=e.getStartElement();if(b=b.getAscendant("td",1)||b.getAscendant("th",1)){var c=b.clone();c.appendBogus();d?c.insertBefore(b):c.insertAfter(b)}}function x(e){if(e instanceof CKEDITOR.dom.selection){e=t(e);var d=e[0]&&e[0].getAscendant("table"),b;a:{var c=0;b=e.length-1;for(var a={},f,g;f=e[c++];)CKEDITOR.dom.element.setMarker(a,f,"delete_cell",
!0);for(c=0;f=e[c++];)if((g=f.getPrevious())&&!g.getCustomData("delete_cell")||(g=f.getNext())&&!g.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(a);b=g;break a}CKEDITOR.dom.element.clearAllMarkers(a);g=e[0].getParent();(g=g.getPrevious())?b=g.getLast():(g=e[b].getParent(),b=(g=g.getNext())?g.getChild(0):null)}for(g=e.length-1;0<=g;g--)x(e[g]);b?q(b,!0):d&&d.remove()}else e instanceof CKEDITOR.dom.element&&(d=e.getParent(),1==d.getChildCount()?d.remove():e.remove())}function q(e,
d){var b=e.getDocument(),c=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(c.focus(),b.focus());b=new CKEDITOR.dom.range(b);b["moveToElementEdit"+(d?"End":"Start")](e)||(b.selectNodeContents(e),b.collapse(d?!1:!0));b.select(!0)}function z(e,d,b){e=e[d];if("undefined"==typeof b)return e;for(d=0;e&&d<e.length;d++){if(b.is&&e[d]==b.$)return d;if(d==b)return new CKEDITOR.dom.element(e[d])}return b.is?-1:null}function w(e,d,b){var c=t(e),a;if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&
a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))return!1;var f;e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,k=g[0].length,l=e.getParent().$.rowIndex,n=z(g,l,e);if(d){var r;try{var q=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1;r=g["up"==d?l-q:"down"==d?l+q:l]["left"==d?n-f:"right"==d?n+f:n]}catch(D){return!1}if(!r||e.$==r)return!1;c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(r))}d=e.getDocument();var p=l,
q=r=0,u=!b&&new CKEDITOR.dom.documentFragment(d),w=0;for(d=0;d<c.length;d++){f=c[d];var m=f.getParent(),x=f.getFirst(),v=f.$.colSpan,y=f.$.rowSpan,m=m.$.rowIndex,A=z(g,m,f),w=w+v*y,q=Math.max(q,A-n+v);r=Math.max(r,m-l+y);b||(v=f,(y=v.getBogus())&&y.remove(),v.trim(),f.getChildren().count()&&(m==p||!x||x.isBlockBoundary&&x.isBlockBoundary({br:1})||(p=u.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!p||p.is&&p.is("br")||u.append("br")),f.moveChildren(u)),d?f.remove():f.setHtml(""));p=m}if(b)return r*
q==w;u.moveChildren(e);e.appendBogus();q>=k?e.removeAttribute("rowSpan"):e.$.rowSpan=r;r>=h?e.removeAttribute("colSpan"):e.$.colSpan=q;b=new CKEDITOR.dom.nodeList(a.$.rows);c=b.count();for(d=c-1;0<=d;d--)a=b.getItem(d),a.$.cells.length||(a.remove(),c++);return e}function A(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(a),g=c.$.rowIndex,h=z(f,g,b),k=b.$.rowSpan,l;if(1<k){l=Math.ceil(k/2);for(var k=Math.floor(k/
2),c=g+l,a=new CKEDITOR.dom.element(a.$.rows[c]),f=z(f,c),n,c=b.clone(),g=0;g<f.length;g++)if(n=f[g],n.parentNode==a.$&&g>h){c.insertBefore(new CKEDITOR.dom.element(n));break}else n=null;n||a.append(c)}else for(k=l=1,a=c.clone(),a.insertAfter(c),a.append(c=b.clone()),n=z(f,g),h=0;h<n.length;h++)n[h].rowSpan++;c.appendBogus();b.$.rowSpan=l;c.$.rowSpan=k;1==l&&b.removeAttribute("rowSpan");1==k&&c.removeAttribute("rowSpan");return c}function B(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=
b[0],c=b.getParent(),a=c.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),f=z(a,c.$.rowIndex,b),g=b.$.colSpan;if(1<g)c=Math.ceil(g/2),g=Math.floor(g/2);else{for(var g=c=1,h=[],k=0;k<a.length;k++){var l=a[k];h.push(l[f]);1<l[f].rowSpan&&(k+=l[f].rowSpan-1)}for(a=0;a<h.length;a++)h[a].colSpan++}a=b.clone();a.insertAfter(b);a.appendBogus();b.$.colSpan=c;a.$.colSpan=g;1==c&&b.removeAttribute("colSpan");1==g&&a.removeAttribute("colSpan");return a}var C=/^(?:td|th)$/;CKEDITOR.plugins.tabletools=
{requires:"table,dialog,contextmenu",init:function(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function b(a,b){var c=e.addCommand(a,b);e.addFeature(c)}var c=e.lang.table;b("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",
requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");b("rowDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();q(u(a))}}));b("rowInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a,!0)}}));b("rowInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a)}}));b("columnDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();a=t(a);var b=a[0],c=a[a.length-1];a=b.getAscendant("table");
for(var d=CKEDITOR.tools.buildTableMap(a),e,l,n=[],r=0,p=d.length;r<p;r++)for(var m=0,u=d[r].length;m<u;m++)d[r][m]==b.$&&(e=m),d[r][m]==c.$&&(l=m);for(r=e;r<=l;r++)for(m=0;m<d.length;m++)c=d[m],b=new CKEDITOR.dom.element(a.$.rows[m]),c=new CKEDITOR.dom.element(c[r]),c.$&&(1==c.$.colSpan?c.remove():--c.$.colSpan,m+=c.$.rowSpan-1,b.$.cells.length||n.push(b));l=a.$.rows[0]&&a.$.rows[0].cells;e=new CKEDITOR.dom.element(l[e]||(e?l[e-1]:a.$.parentNode));n.length==p&&a.remove();e&&q(e,!0)}}));b("columnInsertBefore",
d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a,!0)}}));b("columnInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a)}}));b("cellDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();x(a)}}));b("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){q(w(a.getSelection()),!0)}}));b("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(w(a.getSelection(),
"right"),!0)}}));b("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(w(a.getSelection(),"down"),!0)}}));b("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(B(a.getSelection()))}}));b("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(A(a.getSelection()))}}));b("cellInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a,!0)}}));
b("cellInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a)}}));e.addMenuItems&&e.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=e.getSelection(),b=t(a);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:w(a,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:w(a,"right",!0)?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:w(a,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:B(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:A(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<b.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,
group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",
command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:c.row.insertBefore,
group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:c.column.insertBefore,
group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:t};
CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(t){t=t.$.rows;for(var p=-1,u=[],v=0;v<t.length;v++){p++;!u[p]&&(u[p]=[]);for(var m=-1,y=0;y<t[v].cells.length;y++){var x=t[v].cells[y];for(m++;u[p][m];)m++;for(var q=isNaN(x.colSpan)?1:x.colSpan,x=isNaN(x.rowSpan)?1:x.rowSpan,z=0;z<x;z++){u[p+z]||(u[p+z]=[]);for(var w=0;w<q;w++)u[p+z][m+w]=t[v].cells[y]}m+=q-1}}return u};(function(){var g=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],n={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(a){function b(a){d.enabled&&!1!==a.data.command.canUndo&&d.save()}function c(){d.enabled=a.readOnly?!1:"wysiwyg"==a.mode;d.onChange()}var d=a.undoManager=new e(a),l=d.editingHandler=new k(d),f=a.addCommand("undo",{exec:function(){d.undo()&&(a.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),h=a.addCommand("redo",{exec:function(){d.redo()&&
(a.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});a.setKeystroke([[g[0],"undo"],[g[1],"redo"],[g[2],"redo"]]);d.onChange=function(){f.setState(d.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);h.setState(d.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};a.on("beforeCommandExec",b);a.on("afterCommandExec",b);a.on("saveSnapshot",function(a){d.save(a.data&&a.data.contentOnly)});a.on("contentDom",l.attachListeners,l);a.on("instanceReady",function(){a.fire("saveSnapshot")});
a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&d.save(!0)});a.on("mode",c);a.on("readOnly",c);a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"}));a.resetUndo=function(){d.reset();a.fire("saveSnapshot")};a.on("updateSnapshot",function(){d.currentImage&&d.update()});a.on("lockSnapshot",function(a){a=a.data;d.lock(a&&a.dontUpdate,a&&a.forceUpdate)});a.on("unlockSnapshot",
d.unlock,d)}});CKEDITOR.plugins.undo={};var e=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=a.config.undoStackSize||20;this.strokesLimit=25;this.editor=a;this.reset()};e.prototype={type:function(a,b){var c=e.getKeyGroup(a),d=this.strokesRecorded[c]+1;b=b||d>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());b?(d=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[c]=
d;this.previousKeyGroup=c},keyGroupChanged:function(a){return e.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(a,b,c){var d=this.editor;if(this.locked||
"ready"!=d.status||"wysiwyg"!=d.mode)return!1;var e=d.editable();if(!e||"ready"!=e.status)return!1;e=this.snapshots;b||(b=new f(d));if(!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==c&&d.fire("change");e.splice(this.index+1,e.length-this.index-1);e.length==this.limit&&e.shift();this.index=e.push(b)-1;this.currentImage=b;!1!==c&&this.refreshState();return!0},restoreImage:function(a){var b=this.editor,
c;a.bookmarks&&(b.focus(),c=b.getSelection());this.locked={level:999};this.editor.loadSnapshot(a.contents);a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(c=this.editor.document.getBody().$.createTextRange(),c.collapse(!0),c.select());this.locked=null;this.index=a.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();b.fire("change")},getNextImage:function(a){var b=this.snapshots,c=this.currentImage,d;if(c)if(a)for(d=this.index-1;0<=d;d--){if(a=b[d],!c.equalsContent(a))return a.index=
d,a}else for(d=this.index+1;d<b.length;d++)if(a=b[d],!c.equalsContent(a))return a.index=d,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||
(a=new f(this.editor));for(var b=this.index,c=this.snapshots;0<b&&this.currentImage.equalsContent(c[b-1]);)--b;c.splice(b,this.index-b+1,a);this.index=b;this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return c.equalsContent(a)&&!c.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var d=new f(this.editor,
!0);this.currentImage&&this.currentImage.equalsContent(d)&&(c=d)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a)this.update();else if(a){var b=new f(this.editor,!0);a.equalsContent(b)||this.update()}}}};e.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};e.keyGroups={PRINTABLE:0,FUNCTIONAL:1};e.isNavigationKey=function(a){return!!e.navigationKeyCodes[a]};e.getKeyGroup=function(a){var b=e.keyGroups;
return n[a]?b.FUNCTIONAL:b.PRINTABLE};e.getOppositeKeyGroup=function(a){var b=e.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL};e.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&e.getKeyGroup(a)==e.keyGroups.FUNCTIONAL};var f=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a;a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=c;b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0));a.fire("afterUndoImage")},
h=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={equalsContent:function(a){var b=this.contents;a=a.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(h,""),a=a.replace(h,""));return b!=a?!1:!0},equalsSelection:function(a){var b=this.bookmarks;a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,
e.end))return!1}}return!0}};var k=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;this.ignoreInputEvent=!1;this.keyEventsStack=new m;this.lastKeydownImage=null};k.prototype={onKeydown:function(a){var b=a.data.getKey();if(229!==b)if(-1<CKEDITOR.tools.indexOf(g,a.data.getKeystroke()))a.data.preventDefault();else if(this.keyEventsStack.cleanUp(a),a=this.undoManager,this.keyEventsStack.getLast(b)||this.keyEventsStack.push(b),this.lastKeydownImage=new f(a.editor),e.isNavigationKey(b)||
this.undoManager.keyGroupChanged(b))if(a.strokesRecorded[0]||a.strokesRecorded[1])a.save(!1,this.lastKeydownImage,!1),a.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0));this.keyEventsStack.increment(a.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager;
a=a.data.getKey();var c=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a);if(!(e.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new f(b.editor,!0))))if(0<c)b.type(a);else if(e.isNavigationKey(a))this.onNavigationKey(!0)},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new f(b.editor));b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,
b=a.editable(),c=this;b.attachListener(b,"keydown",function(a){c.onKeydown(a);if(e.ieFunctionalKeysBug(a.data.getKey()))c.onInput()},null,null,999);b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",c.onInput,c,null,999);b.attachListener(b,"keyup",c.onKeyup,c,null,999);b.attachListener(b,"paste",c.ignoreInputEventListener,c,null,999);b.attachListener(b,"drop",c.ignoreInputEventListener,c,null,999);b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){c.onNavigationKey()},
null,null,999);b.attachListener(this.undoManager.editor,"blur",function(){c.keyEventsStack.remove(9)},null,null,999)}};var m=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};m.prototype={push:function(a){a=this.stack.push({keyCode:a,inputs:0});return this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){a=this.getLastIndex(a);return-1!=a?this.stack[a]:
null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a);-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$;a.ctrlKey||a.metaKey||this.remove(17);a.shiftKey||this.remove(16);a.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"===typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){};a.config.wsc_onClose="function"===typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||
CKEDITOR.config.wsc_customDictionaryIds||"";a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(a){var b=CKEDITOR.env;this.parseConfig(a);this.parseApi(a);
a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(b.ie&&(8>b.version||b.quirks))};"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(b=b.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},
toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins='dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc';CKEDITOR.config.skin='moono';(function() {var setIcons = function(icons, strip) {var path = CKEDITOR.getUrl( 'plugins/' + strip );icons = icons.split( ',' );for ( var i = 0; i < icons.length; i++ )CKEDITOR.skin.icons[ icons[ i ] ] = { path: path, offset: -icons[ ++i ], bgsize : icons[ ++i ] };};if (CKEDITOR.env.hidpi) setIcons('about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,','icons_hidpi.png');else setIcons('about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto','icons.png');})();CKEDITOR.lang.languages={"af":1,"sq":1,"ar":1,"eu":1,"bn":1,"bs":1,"bg":1,"ca":1,"zh-cn":1,"zh":1,"hr":1,"cs":1,"da":1,"nl":1,"en":1,"en-au":1,"en-ca":1,"en-gb":1,"eo":1,"et":1,"fo":1,"fi":1,"fr":1,"fr-ca":1,"gl":1,"ka":1,"de":1,"de-ch":1,"el":1,"gu":1,"he":1,"hi":1,"hu":1,"is":1,"id":1,"it":1,"ja":1,"km":1,"ko":1,"ku":1,"lv":1,"lt":1,"mk":1,"ms":1,"mn":1,"no":1,"nb":1,"fa":1,"pl":1,"pt-br":1,"pt":1,"ro":1,"ru":1,"sr":1,"sr-latn":1,"si":1,"sk":1,"sl":1,"es":1,"sv":1,"tt":1,"th":1,"tr":1,"ug":1,"uk":1,"vi":1,"cy":1};}());
/*global exports, require*/
/* eslint-disable no-eval */
/* JSONPath 0.8.0 - XPath for JSON
 *
 * Copyright (c) 2007 Stefan Goessner (goessner.net)
 * Licensed under the MIT (MIT-LICENSE.txt) licence.
 */

var module;
(function (require) {'use strict';

// Make sure to know if we are in real node or not (the `require` variable
// could actually be require.js, for example.
var isNode = module && !!module.exports;

var allowedResultTypes = ['value', 'path', 'pointer', 'parent', 'parentProperty', 'all'];

var vm = isNode
    ? require('vm') : {
        runInNewContext: function (expr, context) {
            return eval(Object.keys(context).reduce(function (s, vr) {
                return 'var ' + vr + '=' + JSON.stringify(context[vr]).replace(/\u2028|\u2029/g, function (m) {
                    // http://www.thespanner.co.uk/2011/07/25/the-json-specification-is-now-wrong/
                    return '\\u202' + (m === '\u2028' ? '8' : '9');
                }) + ';' + s;
            }, expr));
        }
    };

function push (arr, elem) {arr = arr.slice(); arr.push(elem); return arr;}
function unshift (elem, arr) {arr = arr.slice(); arr.unshift(elem); return arr;}
function NewError (value) {
  this.avoidNew = true;
  this.value = value;
  this.message = 'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)';
}

function JSONPath (opts, expr, obj, callback, otherTypeCallback) {
    if (!(this instanceof JSONPath)) {
        try {
            return new JSONPath(opts, expr, obj, callback, otherTypeCallback);
        }
        catch (e) {
            if (!e.avoidNew) {
                throw e;
            }
            return e.value;
        }
    }

    if (typeof opts === 'string') {
        otherTypeCallback = callback;
        callback = obj;
        obj = expr;
        expr = opts;
        opts = {};
    }
    opts = opts || {};
    var objArgs = opts.hasOwnProperty('json') && opts.hasOwnProperty('path');
    this.json = opts.json || obj;
    this.path = opts.path || expr;
    this.resultType = (opts.resultType && opts.resultType.toLowerCase()) || 'value';
    this.flatten = opts.flatten || false;
    this.wrap = opts.hasOwnProperty('wrap') ? opts.wrap : true;
    this.sandbox = opts.sandbox || {};
    this.preventEval = opts.preventEval || false;
    this.parent = opts.parent || null;
    this.parentProperty = opts.parentProperty || null;
    this.callback = opts.callback || callback || null;
    this.otherTypeCallback = opts.otherTypeCallback || otherTypeCallback || function () {
        throw new Error('You must supply an otherTypeCallback callback option with the @other() operator.');
    };

    if (opts.autostart !== false) {
        var ret = this.evaluate({
            path: (objArgs ? opts.path : expr),
            json: (objArgs ? opts.json : obj)
        });
        if (!ret || typeof ret !== 'object') {
            throw new NewError(ret);
        }
        return ret;
    }
}

// PUBLIC METHODS

JSONPath.prototype.evaluate = function (expr, json, callback, otherTypeCallback) {
    var self = this,
        flatten = this.flatten,
        wrap = this.wrap,
        currParent = this.parent,
        currParentProperty = this.parentProperty;

    this.currResultType = this.resultType;
    this.currPreventEval = this.preventEval;
    this.currSandbox = this.sandbox;
    callback = callback || this.callback;
    this.currOtherTypeCallback = otherTypeCallback || this.otherTypeCallback;

    json = json || this.json;
    expr = expr || this.path;
    if (expr && typeof expr === 'object') {
        if (!expr.path) {
            throw new Error('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');
        }
        json = expr.hasOwnProperty('json') ? expr.json : json;
        flatten = expr.hasOwnProperty('flatten') ? expr.flatten : flatten;
        this.currResultType = expr.hasOwnProperty('resultType') ? expr.resultType : this.currResultType;
        this.currSandbox = expr.hasOwnProperty('sandbox') ? expr.sandbox : this.currSandbox;
        wrap = expr.hasOwnProperty('wrap') ? expr.wrap : wrap;
        this.currPreventEval = expr.hasOwnProperty('preventEval') ? expr.preventEval : this.currPreventEval;
        callback = expr.hasOwnProperty('callback') ? expr.callback : callback;
        this.currOtherTypeCallback = expr.hasOwnProperty('otherTypeCallback') ? expr.otherTypeCallback : this.currOtherTypeCallback;
        currParent = expr.hasOwnProperty('parent') ? expr.parent : currParent;
        currParentProperty = expr.hasOwnProperty('parentProperty') ? expr.parentProperty : currParentProperty;
        expr = expr.path;
    }
    currParent = currParent || null;
    currParentProperty = currParentProperty || null;

    if (Array.isArray(expr)) {
        expr = JSONPath.toPathString(expr);
    }
    if (!expr || !json || allowedResultTypes.indexOf(this.currResultType) === -1) {
        return;
    }
    this._obj = json;

    var exprList = JSONPath.toPathArray(expr);
    if (exprList[0] === '$' && exprList.length > 1) {exprList.shift();}
    var result = this._trace(exprList, json, ['$'], currParent, currParentProperty, callback);
    result = result.filter(function (ea) {return ea && !ea.isParentSelector;});

    if (!result.length) {return wrap ? [] : undefined;}
    if (result.length === 1 && !wrap && !Array.isArray(result[0].value)) {
        return this._getPreferredOutput(result[0]);
    }
    return result.reduce(function (result, ea) {
        var valOrPath = self._getPreferredOutput(ea);
        if (flatten && Array.isArray(valOrPath)) {
            result = result.concat(valOrPath);
        }
        else {
            result.push(valOrPath);
        }
        return result;
    }, []);
};

// PRIVATE METHODS

JSONPath.prototype._getPreferredOutput = function (ea) {
    var resultType = this.currResultType;
    switch (resultType) {
    case 'all':
        ea.path = typeof ea.path === 'string' ? ea.path : JSONPath.toPathString(ea.path);
        return ea;
    case 'value': case 'parent': case 'parentProperty':
        return ea[resultType];
    case 'path':
        return JSONPath.toPathString(ea[resultType]);
    case 'pointer':
        return JSONPath.toPointer(ea.path);
    }
};

JSONPath.prototype._handleCallback = function (fullRetObj, callback, type) {
    if (callback) {
        var preferredOutput = this._getPreferredOutput(fullRetObj);
        fullRetObj.path = typeof fullRetObj.path === 'string' ? fullRetObj.path : JSONPath.toPathString(fullRetObj.path);
        callback(preferredOutput, type, fullRetObj);
    }
};

JSONPath.prototype._trace = function (expr, val, path, parent, parentPropName, callback) {
    // No expr to follow? return path and value as the result of this trace branch
    var retObj, self = this;
    if (!expr.length) {
        retObj = {path: path, value: val, parent: parent, parentProperty: parentPropName};
        this._handleCallback(retObj, callback, 'value');
        return retObj;
    }

    var loc = expr[0], x = expr.slice(1);

    // We need to gather the return value of recursive trace calls in order to
    // do the parent sel computation.
    var ret = [];
    function addRet (elems) {ret = ret.concat(elems);}

    if (val && Object.prototype.hasOwnProperty.call(val, loc)) { // simple case--directly follow property
        addRet(this._trace(x, val[loc], push(path, loc), val, loc, callback));
    }
    else if (loc === '*') { // all child properties
        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {
            addRet(self._trace(unshift(m, x), v, p, par, pr, cb));
        });
    }
    else if (loc === '..') { // all descendent parent properties
        addRet(this._trace(x, val, path, parent, parentPropName, callback)); // Check remaining expression with val's immediate children
        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {
            // We don't join m and x here because we only want parents, not scalar values
            if (typeof v[m] === 'object') { // Keep going with recursive descent on val's object children
                addRet(self._trace(unshift(l, x), v[m], push(p, m), v, m, cb));
            }
        });
    }
    else if (loc[0] === '(') { // [(expr)] (dynamic property/index)
        if (this.currPreventEval) {
            throw new Error('Eval [(expr)] prevented in JSONPath expression.');
        }
        // As this will resolve to a property name (but we don't know it yet), property and parent information is relative to the parent of the property to which this expression will resolve
        addRet(this._trace(unshift(this._eval(loc, val, path[path.length - 1], path.slice(0, -1), parent, parentPropName), x), val, path, parent, parentPropName, callback));
    }
    // The parent sel computation is handled in the frame above using the
    // ancestor object of val
    else if (loc === '^') {
        // This is not a final endpoint, so we do not invoke the callback here
        return path.length ? {
            path: path.slice(0, -1),
            expr: x,
            isParentSelector: true
        } : [];
    }
    else if (loc === '~') { // property name
        retObj = {path: push(path, loc), value: parentPropName, parent: parent, parentProperty: null};
        this._handleCallback(retObj, callback, 'property');
        return retObj;
    }
    else if (loc === '$') { // root only
        addRet(this._trace(x, val, path, null, null, callback));
    }
    else if (loc.indexOf('?(') === 0) { // [?(expr)] (filtering)
        if (this.currPreventEval) {
            throw new Error('Eval [?(expr)] prevented in JSONPath expression.');
        }
        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {
            if (self._eval(l.replace(/^\?\((.*?)\)$/, '$1'), v[m], m, p, par, pr)) {
                addRet(self._trace(unshift(m, x), v, p, par, pr, cb));
            }
        });
    }
    else if (loc.indexOf(',') > -1) { // [name1,name2,...]
        var parts, i;
        for (parts = loc.split(','), i = 0; i < parts.length; i++) {
            addRet(this._trace(unshift(parts[i], x), val, path, parent, parentPropName, callback));
        }
    }
    else if (loc[0] === '@') { // value type: @boolean(), etc.
        var addType = false;
        var valueType = loc.slice(1, -2);
        switch (valueType) {
        case 'scalar':
            if (!val || (['object', 'function'].indexOf(typeof val) === -1)) {
                addType = true;
            }
            break;
        case 'boolean': case 'string': case 'undefined': case 'function':
            if (typeof val === valueType) {
                addType = true;
            }
            break;
        case 'number':
            if (typeof val === valueType && isFinite(val)) {
                addType = true;
            }
            break;
        case 'nonFinite':
            if (typeof val === 'number' && !isFinite(val)) {
                addType = true;
            }
            break;
        case 'object':
            if (val && typeof val === valueType) {
                addType = true;
            }
            break;
        case 'array':
            if (Array.isArray(val)) {
                addType = true;
            }
            break;
        case 'other':
            addType = this.currOtherTypeCallback(val, path, parent, parentPropName);
            break;
        case 'integer':
            if (val === +val && isFinite(val) && !(val % 1)) {
                addType = true;
            }
            break;
        case 'null':
            if (val === null) {
                addType = true;
            }
            break;
        }
        if (addType) {
            retObj = {path: path, value: val, parent: parent, parentProperty: parentPropName};
            this._handleCallback(retObj, callback, 'value');
            return retObj;
        }
    }
    else if (/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(loc)) { // [start:end:step]  Python slice syntax
        addRet(this._slice(loc, x, val, path, parent, parentPropName, callback));
    }

    // We check the resulting values for parent selections. For parent
    // selections we discard the value object and continue the trace with the
    // current val object
    return ret.reduce(function (all, ea) {
        return all.concat(ea.isParentSelector ? self._trace(ea.expr, val, ea.path, parent, parentPropName, callback) : ea);
    }, []);
};

JSONPath.prototype._walk = function (loc, expr, val, path, parent, parentPropName, callback, f) {
    var i, n, m;
    if (Array.isArray(val)) {
        for (i = 0, n = val.length; i < n; i++) {
            f(i, loc, expr, val, path, parent, parentPropName, callback);
        }
    }
    else if (typeof val === 'object') {
        for (m in val) {
            if (Object.prototype.hasOwnProperty.call(val, m)) {
                f(m, loc, expr, val, path, parent, parentPropName, callback);
            }
        }
    }
};

JSONPath.prototype._slice = function (loc, expr, val, path, parent, parentPropName, callback) {
    if (!Array.isArray(val)) {return;}
    var i,
        len = val.length, parts = loc.split(':'),
        start = (parts[0] && parseInt(parts[0], 10)) || 0,
        end = (parts[1] && parseInt(parts[1], 10)) || len,
        step = (parts[2] && parseInt(parts[2], 10)) || 1;
    start = (start < 0) ? Math.max(0, start + len) : Math.min(len, start);
    end = (end < 0) ? Math.max(0, end + len) : Math.min(len, end);
    var ret = [];
    for (i = start; i < end; i += step) {
        ret = ret.concat(this._trace(unshift(i, expr), val, path, parent, parentPropName, callback));
    }
    return ret;
};

JSONPath.prototype._eval = function (code, _v, _vname, path, parent, parentPropName) {
    if (!this._obj || !_v) {return false;}
    if (code.indexOf('@parentProperty') > -1) {
        this.currSandbox._$_parentProperty = parentPropName;
        code = code.replace(/@parentProperty/g, '_$_parentProperty');
    }
    if (code.indexOf('@parent') > -1) {
        this.currSandbox._$_parent = parent;
        code = code.replace(/@parent/g, '_$_parent');
    }
    if (code.indexOf('@property') > -1) {
        this.currSandbox._$_property = _vname;
        code = code.replace(/@property/g, '_$_property');
    }
    if (code.indexOf('@path') > -1) {
        this.currSandbox._$_path = JSONPath.toPathString(path.concat([_vname]));
        code = code.replace(/@path/g, '_$_path');
    }
    if (code.match(/@([\.\s\)\[])/)) {
        this.currSandbox._$_v = _v;
        code = code.replace(/@([\.\s\)\[])/g, '_$_v$1');
    }
    try {
        return vm.runInNewContext(code, this.currSandbox);
    }
    catch (e) {
        console.log(e);
        throw new Error('jsonPath: ' + e.message + ': ' + code);
    }
};

// PUBLIC CLASS PROPERTIES AND METHODS

// Could store the cache object itself
JSONPath.cache = {};

JSONPath.toPathString = function (pathArr) {
    var i, n, x = pathArr, p = '$';
    for (i = 1, n = x.length; i < n; i++) {
        if (!(/^(~|\^|@.*?\(\))$/).test(x[i])) {
            p += (/^[0-9*]+$/).test(x[i]) ? ('[' + x[i] + ']') : ("['" + x[i] + "']");
        }
    }
    return p;
};

JSONPath.toPointer = function (pointer) {
    var i, n, x = pointer, p = '';
    for (i = 1, n = x.length; i < n; i++) {
        if (!(/^(~|\^|@.*?\(\))$/).test(x[i])) {
            p += '/' + x[i].toString()
                  .replace(/\~/g, '~0')
                  .replace(/\//g, '~1');
        }
    }
    return p;
};

JSONPath.toPathArray = function (expr) {
    var cache = JSONPath.cache;
    if (cache[expr]) {return cache[expr];}
    var subx = [];
    var normalized = expr
                    // Properties
                    .replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g, ';$&;')
                    // Parenthetical evaluations (filtering and otherwise), directly within brackets or single quotes
                    .replace(/[\['](\??\(.*?\))[\]']/g, function ($0, $1) {return '[#' + (subx.push($1) - 1) + ']';})
                    // Escape periods and tildes within properties
                    .replace(/\['([^'\]]*)'\]/g, function ($0, prop) {
                        return "['" + prop.replace(/\./g, '%@%').replace(/~/g, '%%@@%%') + "']";
                    })
                    // Properties operator
                    .replace(/~/g, ';~;')
                    // Split by property boundaries
                    .replace(/'?\.'?(?![^\[]*\])|\['?/g, ';')
                    // Reinsert periods within properties
                    .replace(/%@%/g, '.')
                    // Reinsert tildes within properties
                    .replace(/%%@@%%/g, '~')
                    // Parent
                    .replace(/(?:;)?(\^+)(?:;)?/g, function ($0, ups) {return ';' + ups.split('').join(';') + ';';})
                    // Descendents
                    .replace(/;;;|;;/g, ';..;')
                    // Remove trailing
                    .replace(/;$|'?\]|'$/g, '');

    var exprList = normalized.split(';').map(function (expr) {
        var match = expr.match(/#([0-9]+)/);
        return !match || !match[1] ? expr : subx[match[1]];
    });
    cache[expr] = exprList;
    return cache[expr];
};

// For backward compatibility (deprecated)
JSONPath.eval = function (obj, expr, opts) {
    return JSONPath(opts, expr, obj);
};

if (typeof define === 'function' && define.amd) {
    define(function () {return JSONPath;});
}
else if (isNode) {
    module.exports = JSONPath;
}
else {
    self.jsonPath = { // Deprecated
        eval: JSONPath.eval
    };
    self.JSONPath = JSONPath;
}
}(typeof require === 'undefined' ? null : require));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJib290c3RyYXAubWluLmpzIiwicGVyZmVjdC1zY3JvbGxiYXIuanF1ZXJ5Lm1pbi5qcyIsInZ1ZS5qcyIsInZ1ZS1yb3V0ZXIuanMiLCJ2dWUtcmVzb3VyY2UuanMiLCJ2dWUtdmFsaWRhdG9yLmpzIiwibW9tZW50Lm1pbi5qcyIsIlNvcnRhYmxlLmpzIiwiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLm1pbi5qcyIsImJvb3RzdHJhcC10YWdzaW5wdXQubWluLmpzIiwiYm9vdHN0cmFwLWNvbWJvYm94LmpzIiwiYm9vdHN0cmFwLXNsaWRlci5taW4uanMiLCJja2VkaXRvci5qcyIsImpzb25wYXRoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeDFUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNWlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2p1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzljQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJ2ZW5kb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgalF1ZXJ5IHYyLjEuNCB8IChjKSAyMDA1LCAyMDE1IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcihcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIik7cmV0dXJuIGIoYSl9OmIoYSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWMuc2xpY2UsZT1jLmNvbmNhdCxmPWMucHVzaCxnPWMuaW5kZXhPZixoPXt9LGk9aC50b1N0cmluZyxqPWguaGFzT3duUHJvcGVydHksaz17fSxsPWEuZG9jdW1lbnQsbT1cIjIuMS40XCIsbj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbi5mbi5pbml0KGEsYil9LG89L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLHA9L14tbXMtLyxxPS8tKFtcXGRhLXpdKS9naSxyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX07bi5mbj1uLnByb3RvdHlwZT17anF1ZXJ5Om0sY29uc3RydWN0b3I6bixzZWxlY3RvcjpcIlwiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1uLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLFwib2JqZWN0XCI9PXR5cGVvZiBnfHxuLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYobi5pc1BsYWluT2JqZWN0KGQpfHwoZT1uLmlzQXJyYXkoZCkpKT8oZT8oZT0hMSxmPWMmJm4uaXNBcnJheShjKT9jOltdKTpmPWMmJm4uaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09bi5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LG4uZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09bi50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzQXJyYXkoYSkmJmEtcGFyc2VGbG9hdChhKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSk/ITE6YS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSxcImlzUHJvdG90eXBlT2ZcIik/ITE6ITB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hK1wiXCI6XCJvYmplY3RcIj09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/aFtpLmNhbGwoYSldfHxcIm9iamVjdFwiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGM9ZXZhbDthPW4udHJpbShhKSxhJiYoMT09PWEuaW5kZXhPZihcInVzZSBzdHJpY3RcIik/KGI9bC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGIudGV4dD1hLGwuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCxcIm1zLVwiKS5yZXBsYWNlKHEscil9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT0wLGY9YS5sZW5ndGgsZz1zKGEpO2lmKGMpe2lmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGlmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShvLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHMoT2JqZWN0KGEpKT9uLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbD09Yj8tMTpnLmNhbGwoYixhLGMpfSxtZXJnZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7Yz5kO2QrKylhW2UrK109YltkXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1zKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhlPWQuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZS5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6a30pLG4uZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtoW1wiW29iamVjdCBcIitiK1wiXVwiXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBzKGEpe3ZhciBiPVwibGVuZ3RoXCJpbiBhJiZhLmxlbmd0aCxjPW4udHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1jfHxuLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOlwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PVwic2l6emxlXCIrMSpuZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWhhKCksej1oYSgpLEE9aGEoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz0xPDwzMSxEPXt9Lmhhc093blByb3BlcnR5LEU9W10sRj1FLnBvcCxHPUUucHVzaCxIPUUucHVzaCxJPUUuc2xpY2UsSj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSz1cImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsTD1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTT1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLE49TS5yZXBsYWNlKFwid1wiLFwidyNcIiksTz1cIlxcXFxbXCIrTCtcIiooXCIrTStcIikoPzpcIitMK1wiKihbKl4kfCF+XT89KVwiK0wrXCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIitOK1wiKSl8KVwiK0wrXCIqXFxcXF1cIixQPVwiOihcIitNK1wiKSg/OlxcXFwoKCgnKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitPK1wiKSopfC4qKVxcXFwpfClcIixRPW5ldyBSZWdFeHAoTCtcIitcIixcImdcIiksUj1uZXcgUmVnRXhwKFwiXlwiK0wrXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK0wrXCIrJFwiLFwiZ1wiKSxTPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiosXCIrTCtcIipcIiksVD1uZXcgUmVnRXhwKFwiXlwiK0wrXCIqKFs+K35dfFwiK0wrXCIpXCIrTCtcIipcIiksVT1uZXcgUmVnRXhwKFwiPVwiK0wrXCIqKFteXFxcXF0nXFxcIl0qPylcIitMK1wiKlxcXFxdXCIsXCJnXCIpLFY9bmV3IFJlZ0V4cChQKSxXPW5ldyBSZWdFeHAoXCJeXCIrTitcIiRcIiksWD17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK00rXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTStcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK00ucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrTyksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrUCksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrTCtcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK0wrXCIqKD86KFsrLV18KVwiK0wrXCIqKFxcXFxkKyl8KSlcIitMK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK0srXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitMK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitMK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitMK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxZPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWj0vXmhcXGQkL2ksJD0vXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLF89L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sYWE9L1srfl0vLGJhPS8nfFxcXFwvZyxjYT1uZXcgUmVnRXhwKFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIrTCtcIj98KFwiK0wrXCIpfC4pXCIsXCJpZ1wiKSxkYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCIweFwiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6MD5kP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxlYT1mdW5jdGlvbigpe20oKX07dHJ5e0guYXBwbHkoRT1JLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEVbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmEpe0g9e2FwcGx5OkUubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ry5hcHBseShhLEkuY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHMsdyx4O2lmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLGQ9ZHx8W10saz1iLm5vZGVUeXBlLFwic3RyaW5nXCIhPXR5cGVvZiBhfHwhYXx8MSE9PWsmJjkhPT1rJiYxMSE9PWspcmV0dXJuIGQ7aWYoIWUmJnApe2lmKDExIT09ayYmKGY9Xy5leGVjKGEpKSlpZihqPWZbMV0pe2lmKDk9PT1rKXtpZihoPWIuZ2V0RWxlbWVudEJ5SWQoaiksIWh8fCFoLnBhcmVudE5vZGUpcmV0dXJuIGQ7aWYoaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2UgaWYoYi5vd25lckRvY3VtZW50JiYoaD1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpJiZ0KGIsaCkmJmguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNle2lmKGZbMl0pcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChqPWZbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaikpLGR9aWYoYy5xc2EmJighcXx8IXEudGVzdChhKSkpe2lmKHM9cj11LHc9Yix4PTEhPT1rJiZhLDE9PT1rJiZcIm9iamVjdFwiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/cz1yLnJlcGxhY2UoYmEsXCJcXFxcJCZcIik6Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLHMpLHM9XCJbaWQ9J1wiK3MrXCInXSBcIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcmEob1tsXSk7dz1hYS50ZXN0KGEpJiZwYShiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKFwiLFwiKX1pZih4KXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbCh4KSksZH1jYXRjaCh5KXt9ZmluYWxseXtyfHxiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFIsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gaGEoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBpYShhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGphKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9YS5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGxhKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxDKS0ofmEuc291cmNlSW5kZXh8fEMpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBtYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIGlhKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGlhKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gcGEoYSl7cmV0dXJuIGEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZhfWM9Z2Euc3VwcG9ydD17fSxmPWdhLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9cIkhUTUxcIiE9PWIubm9kZU5hbWU6ITF9LG09Z2Euc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPWcuZG9jdW1lbnRFbGVtZW50LGU9Zy5kZWZhdWx0VmlldyxlJiZlIT09ZS50b3AmJihlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsZWEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGVhKSkscD0hZihnKSxjLmF0dHJpYnV0ZXM9amEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9amEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZy5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChnLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFnLmdldEVsZW1lbnRzQnlOYW1lfHwhZy5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjJiZjLnBhcmVudE5vZGU/W2NdOltdfX0sZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKFwiKlwiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChnLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGphKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPVwiPGEgaWQ9J1wiK3UrXCInPjwvYT48c2VsZWN0IGlkPSdcIit1K1wiLVxcZl0nIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsYS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoJiZxLnB1c2goXCJbKl4kXT1cIitMK1wiKig/OicnfFxcXCJcXFwiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8cS5wdXNoKFwiXFxcXFtcIitMK1wiKig/OnZhbHVlfFwiK0srXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltpZH49XCIrdStcIi1dXCIpLmxlbmd0aHx8cS5wdXNoKFwifj1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhI1wiK3UrXCIrKlwiKS5sZW5ndGh8fHEucHVzaChcIi4jLitbK35dXCIpfSksamEoZnVuY3Rpb24oYSl7dmFyIGI9Zy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK0wrXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fHEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmphKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCJkaXZcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixQKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPSQudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fCQudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PWd8fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09Z3x8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGg9W2FdLGk9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PWc/LTE6Yj09PWc/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4gbGEoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlpLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWlbZF0pZCsrO3JldHVybiBkP2xhKGhbZF0saVtkXSk6aFtkXT09PXY/LTE6aVtkXT09PXY/MTowfSxnKTpufSxnYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGdhKGEsbnVsbCxudWxsLGIpfSxnYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVSxcIj0nJDEnXVwiKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZ2EoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZ2EuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxnYS5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZ2EuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGdhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWdhLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmlhLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoY2EsZGEpLGFbM109KGFbM118fGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoY2EsZGEpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGdhLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmdhLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBYLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fFwiXCI6YyYmVi50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKFwiKVwiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYStcIiBcIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoXCIoXnxcIitMK1wiKVwiK2ErXCIoXCIrTCtcInwkKVwiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT9cIiE9XCI9PT1iOmI/KGUrPVwiXCIsXCI9XCI9PT1iP2U9PT1jOlwiIT1cIj09PWI/ZSE9PWM6XCJePVwiPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOlwiKj1cIj09PWI/YyYmZS5pbmRleE9mKGMpPi0xOlwiJD1cIj09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09YzpcIn49XCI9PT1iPyhcIiBcIitlLnJlcGxhY2UoUSxcIiBcIikrXCIgXCIpLmluZGV4T2YoYyk+LTE6XCJ8PVwiPT09Yj9lPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YytcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVwibnRoXCIhPT1hLnNsaWNlKDAsMyksZz1cImxhc3RcIiE9PWEuc2xpY2UoLTQpLGg9XCJvZi10eXBlXCI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPSFpJiYhaDtpZihxKXtpZihmKXt3aGlsZShwKXtsPWI7d2hpbGUobD1sW3BdKWlmKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXtrPXFbdV18fChxW3VdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sbT1qWzBdPT09dyYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdyxuLG1dO2JyZWFrfX1lbHNlIGlmKHMmJihqPShiW3VdfHwoYlt1XT17fSkpW2FdKSYmalswXT09PXcpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHMmJigobFt1XXx8KGxbdV09e30pKVthXT1bdyxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9pYShmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SihhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDppYShmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUixcIiQxXCIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoY2EsZGEpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYXx8XCJcIil8fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoY2EsZGEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWi50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om9hKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpvYShmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6b2EoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpvYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpvYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om9hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPW1hKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW5hKGIpO2Z1bmN0aW9uIHFhKCl7fXFhLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcWEsZz1nYS50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthK1wiIFwiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpeyghY3x8KGU9Uy5leGVjKGgpKSkmJihlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVQuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUixcIiBcIil9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtmb3IoZyBpbiBkLmZpbHRlcikhKGU9WFtnXS5leGVjKGgpKXx8altnXSYmIShlPWpbZ10oZSkpfHwoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZyxtYXRjaGVzOmV9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtpZighYylicmVha31yZXR1cm4gYj9oLmxlbmd0aDpoP2dhLmVycm9yKGEpOnooYSxpKS5zbGljZSgwKX07ZnVuY3Rpb24gcmEoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPVwiXCI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHNhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJlwicGFyZW50Tm9kZVwiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9Ylt1XXx8KGJbdV09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHRhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHVhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZ2EoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHZhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gd2EoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9d2EoZCkpLGUmJiFlW3VdJiYoZT13YShlLGYpKSxpYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx1YShifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnZhKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj12YShyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SihmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dmEocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkguYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHhhKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz1zYShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9c2EoZnVuY3Rpb24oYSl7cmV0dXJuIEooYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bc2EodGEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHdhKGk+MSYmdGEobSksaT4xJiZyYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtpLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFIsXCIkMVwiKSxjLGU+aSYmeGEoYS5zbGljZShpLGUpKSxmPmUmJnhhKGE9YS5zbGljZShlKSksZj5lJiZyYShhKSl9bS5wdXNoKGMpfXJldHVybiB0YShtKX1mdW5jdGlvbiB5YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxtLG8scD0wLHE9XCIwXCIscj1mJiZbXSxzPVtdLHQ9aix1PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsayksdj13Kz1udWxsPT10PzE6TWF0aC5yYW5kb20oKXx8LjEseD11Lmxlbmd0aDtmb3IoayYmKGo9ZyE9PW4mJmcpO3EhPT14JiZudWxsIT0obD11W3FdKTtxKyspe2lmKGUmJmwpe209MDt3aGlsZShvPWFbbSsrXSlpZihvKGwsZyxoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXYpfWMmJigobD0hbyYmbCkmJnAtLSxmJiZyLnB1c2gobCkpfWlmKHArPXEsYyYmcSE9PXApe209MDt3aGlsZShvPWJbbSsrXSlvKHIscyxnLGgpO2lmKGYpe2lmKHA+MCl3aGlsZShxLS0pcltxXXx8c1txXXx8KHNbcV09Ri5jYWxsKGkpKTtzPXZhKHMpfUguYXBwbHkoaSxzKSxrJiYhZiYmcy5sZW5ndGg+MCYmcCtiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz12LGo9dCkscn07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthK1wiIFwiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj14YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseWEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWdhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJlwiSURcIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNhLGRhKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9WC5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGFhLnRlc3QoalswXS50eXBlKSYmcGEoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnJhKGopLCFhKXJldHVybiBILmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLGFhLnRlc3QoYSkmJnBhKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KFwiXCIpLnNvcnQoQikuam9pbihcIlwiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGEgaHJlZj0nIyc+PC9hPlwiLFwiI1wiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KXx8a2EoXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphLmdldEF0dHJpYnV0ZShiLFwidHlwZVwiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxpbnB1dC8+XCIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksXCJcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX0pfHxrYShcInZhbHVlXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHxcImlucHV0XCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIil9KXx8a2EoSyxmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOmFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZ2F9KGEpO24uZmluZD10LG4uZXhwcj10LnNlbGVjdG9ycyxuLmV4cHJbXCI6XCJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlPXQudW5pcXVlU29ydCxuLnRleHQ9dC5nZXRUZXh0LG4uaXNYTUxEb2M9dC5pc1hNTCxuLmNvbnRhaW5zPXQuY29udGFpbnM7dmFyIHU9bi5leHByLm1hdGNoLm5lZWRzQ29udGV4dCx2PS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyx3PS9eLlteOiNcXFtcXC4sXSokLztmdW5jdGlvbiB4KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYil7aWYody50ZXN0KGIpKXJldHVybiBuLmZpbHRlcihiLGEsYyk7Yj1uLmZpbHRlcihiLGEpfXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gZy5jYWxsKGIsYSk+PTAhPT1jfSl9bi5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF07cmV0dXJuIGMmJihhPVwiOm5vdChcIithK1wiKVwiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMucHVzaFN0YWNrKG4oYSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtjPmI7YisrKWlmKG4uY29udGFpbnMoZVtiXSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IoYj0wO2M+YjtiKyspbi5maW5kKGEsZVtiXSxkKTtyZXR1cm4gZD10aGlzLnB1c2hTdGFjayhjPjE/bi51bmlxdWUoZCk6ZCksZC5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrXCIgXCIrYTphLGR9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeCh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeCh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheCh0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBhJiZ1LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciB5LHo9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sQT1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKCFhKXJldHVybiB0aGlzO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihjPVwiPFwiPT09YVswXSYmXCI+XCI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOnouZXhlYyhhKSwhY3x8IWNbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHx5KS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihjWzFdKXtpZihiPWIgaW5zdGFuY2VvZiBuP2JbMF06YixuLm1lcmdlKHRoaXMsbi5wYXJzZUhUTUwoY1sxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpsLCEwKSksdi50ZXN0KGNbMV0pJiZuLmlzUGxhaW5PYmplY3QoYikpZm9yKGMgaW4gYiluLmlzRnVuY3Rpb24odGhpc1tjXSk/dGhpc1tjXShiW2NdKTp0aGlzLmF0dHIoYyxiW2NdKTtyZXR1cm4gdGhpc31yZXR1cm4gZD1sLmdldEVsZW1lbnRCeUlkKGNbMl0pLGQmJmQucGFyZW50Tm9kZSYmKHRoaXMubGVuZ3RoPTEsdGhpc1swXT1kKSx0aGlzLmNvbnRleHQ9bCx0aGlzLnNlbGVjdG9yPWEsdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOm4uaXNGdW5jdGlvbihhKT9cInVuZGVmaW5lZFwiIT10eXBlb2YgeS5yZWFkeT95LnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0EucHJvdG90eXBlPW4uZm4seT1uKGwpO3ZhciBCPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEM9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmbihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz11LnRlc3QoYSl8fFwic3RyaW5nXCIhPXR5cGVvZiBhP24oYSxifHx0aGlzLmNvbnRleHQpOjA7ZT5kO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJm4uZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9uLnVuaXF1ZShmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09dHlwZW9mIGE/Zy5jYWxsKG4oYSksdGhpc1swXSk6Zy5jYWxsKHRoaXMsYS5qcXVlcnk/YVswXTphKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLnVuaXF1ZShuLm1lcmdlKHRoaXMuZ2V0KCksbihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBEKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1uLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLFwicGFyZW50Tm9kZVwiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJuZXh0U2libGluZ1wiKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLFwibmV4dFNpYmxpbmdcIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIsYyl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBuLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBuLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuXCJVbnRpbFwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJlwic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1uLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8bi51bmlxdWUoZSksQi50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEU9L1xcUysvZyxGPXt9O2Z1bmN0aW9uIEcoYSl7dmFyIGI9RlthXT17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRSl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT1cInN0cmluZ1wiPT10eXBlb2YgYT9GW2FdfHxHKGEpOm4uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGYsZyxoPVtdLGk9IWEub25jZSYmW10saj1mdW5jdGlvbihsKXtmb3IoYj1hLm1lbW9yeSYmbCxjPSEwLGc9ZXx8MCxlPTAsZj1oLmxlbmd0aCxkPSEwO2gmJmY+ZztnKyspaWYoaFtnXS5hcHBseShsWzBdLGxbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2Upe2I9ITE7YnJlYWt9ZD0hMSxoJiYoaT9pLmxlbmd0aCYmaihpLnNoaWZ0KCkpOmI/aD1bXTprLmRpc2FibGUoKSl9LGs9e2FkZDpmdW5jdGlvbigpe2lmKGgpe3ZhciBjPWgubGVuZ3RoOyFmdW5jdGlvbiBnKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi50eXBlKGMpO1wiZnVuY3Rpb25cIj09PWQ/YS51bmlxdWUmJmsuaGFzKGMpfHxoLnB1c2goYyk6YyYmYy5sZW5ndGgmJlwic3RyaW5nXCIhPT1kJiZnKGMpfSl9KGFyZ3VtZW50cyksZD9mPWgubGVuZ3RoOmImJihlPWMsaihiKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBoJiZuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsaCxjKSk+LTEpaC5zcGxpY2UoYywxKSxkJiYoZj49YyYmZi0tLGc+PWMmJmctLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsaCk+LTE6ISghaHx8IWgubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gaD1bXSxmPTAsdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBoPWk9Yj12b2lkIDAsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haH0sbG9jazpmdW5jdGlvbigpe3JldHVybiBpPXZvaWQgMCxifHxrLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haX0sZmlyZVdpdGg6ZnVuY3Rpb24oYSxiKXtyZXR1cm4haHx8YyYmIWl8fChiPWJ8fFtdLGI9W2EsYi5zbGljZT9iLnNsaWNlKCk6Yl0sZD9pLnB1c2goYik6aihiKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBrLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhY319O3JldHVybiBrfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1tcInJlc29sdmVcIixcImRvbmVcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlamVjdGVkXCJdLFtcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIixuLkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLGM9XCJwZW5kaW5nXCIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5kb25lKGMucmVzb2x2ZSkuZmFpbChjLnJlamVjdCkucHJvZ3Jlc3MoYy5ub3RpZnkpOmNbZlswXStcIldpdGhcIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bi5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixuLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1lP2Q6dGhpcyxhcmd1bWVudHMpLHRoaXN9LGVbZlswXStcIldpdGhcIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1kLmNhbGwoYXJndW1lbnRzKSxlPWMubGVuZ3RoLGY9MSE9PWV8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2U6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihlKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6ZSxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGU+MSlmb3IoaT1uZXcgQXJyYXkoZSksaj1uZXcgQXJyYXkoZSksaz1uZXcgQXJyYXkoZSk7ZT5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5kb25lKGgoYixrLGMpKS5mYWlsKGcucmVqZWN0KS5wcm9ncmVzcyhoKGIsaixpKSk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEg7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEgucmVzb2x2ZVdpdGgobCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGwpLnRyaWdnZXJIYW5kbGVyKFwicmVhZHlcIiksbihsKS5vZmYoXCJyZWFkeVwiKSkpKX19KTtmdW5jdGlvbiBJKCl7bC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSxuLnJlYWR5KCl9bi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe3JldHVybiBIfHwoSD1uLkRlZmVycmVkKCksXCJjb21wbGV0ZVwiPT09bC5yZWFkeVN0YXRlP3NldFRpbWVvdXQobi5yZWFkeSk6KGwuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixJLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSSwhMSkpKSxILnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBKPW4uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoXCJvYmplY3RcIj09PW4udHlwZShjKSl7ZT0hMDtmb3IoaCBpbiBjKW4uYWNjZXNzKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9O24uYWNjZXB0RGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV8fDk9PT1hLm5vZGVUeXBlfHwhK2Eubm9kZVR5cGV9O2Z1bmN0aW9uIEsoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89bi5leHBhbmRvK0sudWlkKyt9Sy51aWQ9MSxLLmFjY2VwdHM9bi5hY2NlcHREYXRhLEsucHJvdG90eXBlPXtrZXk6ZnVuY3Rpb24oYSl7aWYoIUsuYWNjZXB0cyhhKSlyZXR1cm4gMDt2YXIgYj17fSxjPWFbdGhpcy5leHBhbmRvXTtpZighYyl7Yz1LLnVpZCsrO3RyeXtiW3RoaXMuZXhwYW5kb109e3ZhbHVlOmN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEsYil9Y2F0Y2goZCl7Ylt0aGlzLmV4cGFuZG9dPWMsbi5leHRlbmQoYSxiKX19cmV0dXJuIHRoaXMuY2FjaGVbY118fCh0aGlzLmNhY2hlW2NdPXt9KSxjfSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9dGhpcy5rZXkoYSksZj10aGlzLmNhY2hlW2VdO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWZbYl09YztlbHNlIGlmKG4uaXNFbXB0eU9iamVjdChmKSluLmV4dGVuZCh0aGlzLmNhY2hlW2VdLGIpO2Vsc2UgZm9yKGQgaW4gYilmW2RdPWJbZF07cmV0dXJuIGZ9LGdldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2FjaGVbdGhpcy5rZXkoYSldO3JldHVybiB2b2lkIDA9PT1iP2M6Y1tiXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmXCJzdHJpbmdcIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLmtleShhKSxnPXRoaXMuY2FjaGVbZl07aWYodm9pZCAwPT09Yil0aGlzLmNhY2hlW2ZdPXt9O2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGc/ZD1bYixlXTooZD1lLGQ9ZCBpbiBnP1tkXTpkLm1hdGNoKEUpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBnW2RbY11dfX0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGEpe2FbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXX19O3ZhciBMPW5ldyBLLE09bmV3IEssTj0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIFAoYSxiLGMpe3ZhciBkO2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKWlmKGQ9XCJkYXRhLVwiK2IucmVwbGFjZShPLFwiLSQxXCIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSxcInN0cmluZ1wiPT10eXBlb2YgYyl7dHJ5e2M9XCJ0cnVlXCI9PT1jPyEwOlwiZmFsc2VcIj09PWM/ITE6XCJudWxsXCI9PT1jP251bGw6K2MrXCJcIj09PWM/K2M6Ti50ZXN0KGMpP24ucGFyc2VKU09OKGMpOmN9Y2F0Y2goZSl7fU0uc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfW4uZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBNLmhhc0RhdGEoYSl8fEwuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7XG5yZXR1cm4gTS5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TS5yZW1vdmUoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBMLmFjY2VzcyhhLGIsYyl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TC5yZW1vdmUoYSxiKX19KSxuLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPU0uZ2V0KGYpLDE9PT1mLm5vZGVUeXBlJiYhTC5nZXQoZixcImhhc0RhdGFBdHRyc1wiKSkpe2M9Zy5sZW5ndGg7d2hpbGUoYy0tKWdbY10mJihkPWdbY10ubmFtZSwwPT09ZC5pbmRleE9mKFwiZGF0YS1cIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7TC5zZXQoZixcImhhc0RhdGFBdHRyc1wiLCEwKX1yZXR1cm4gZX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtNLnNldCh0aGlzLGEpfSk6Sih0aGlzLGZ1bmN0aW9uKGIpe3ZhciBjLGQ9bi5jYW1lbENhc2UoYSk7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1NLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1NLmdldChmLGQpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1QKGYsZCx2b2lkIDApLHZvaWQgMCE9PWMpcmV0dXJuIGN9ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1NLmdldCh0aGlzLGQpO00uc2V0KHRoaXMsZCxiKSwtMSE9PWEuaW5kZXhPZihcIi1cIikmJnZvaWQgMCE9PWMmJk0uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8XCJmeFwiKStcInF1ZXVlXCIsZD1MLmdldChhLGIpLGMmJighZHx8bi5pc0FycmF5KGMpP2Q9TC5hY2Nlc3MoYSxiLG4ubWFrZUFycmF5KGMpKTpkLnB1c2goYykpLGR8fFtdKTp2b2lkIDB9LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fFwiZnhcIjt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9O1wiaW5wcm9ncmVzc1wiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKFwiZnhcIj09PWImJmMudW5zaGlmdChcImlucHJvZ3Jlc3NcIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YitcInF1ZXVlSG9va3NcIjtyZXR1cm4gTC5nZXQoYSxjKXx8TC5hY2Nlc3MoYSxjLHtlbXB0eTpuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe0wucmVtb3ZlKGEsW2IrXCJxdWV1ZVwiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPVwiZnhcIixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9uLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPW4ucXVldWUodGhpcyxhLGIpO24uX3F1ZXVlSG9va3ModGhpcyxhKSxcImZ4XCI9PT1hJiZcImlucHJvZ3Jlc3NcIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPW4uRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8XCJmeFwiO3doaWxlKGctLSljPUwuZ2V0KGZbZ10sYStcInF1ZXVlSG9va3NcIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFE9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLFI9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLFM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLFwibm9uZVwiPT09bi5jc3MoYSxcImRpc3BsYXlcIil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX0sVD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaTshZnVuY3Rpb24oKXt2YXIgYT1sLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxjPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksYy5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLGMuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwidFwiKSxiLmFwcGVuZENoaWxkKGMpLGsuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixrLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIFU9XCJ1bmRlZmluZWRcIjtrLmZvY3VzaW5CdWJibGVzPVwib25mb2N1c2luXCJpbiBhO3ZhciBWPS9ea2V5LyxXPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFg9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFk9L14oW14uXSopKD86XFwuKC4rKXwpJC87ZnVuY3Rpb24gWigpe3JldHVybiEwfWZ1bmN0aW9uICQoKXtyZXR1cm4hMX1mdW5jdGlvbiBfKCl7dHJ5e3JldHVybiBsLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPUwuZ2V0KGEpO2lmKHIpe2MuaGFuZGxlciYmKGY9YyxjPWYuaGFuZGxlcixlPWYuc2VsZWN0b3IpLGMuZ3VpZHx8KGMuZ3VpZD1uLmd1aWQrKyksKGk9ci5ldmVudHMpfHwoaT1yLmV2ZW50cz17fSksKGc9ci5oYW5kbGUpfHwoZz1yLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm4gdHlwZW9mIG4hPT1VJiZuLmV2ZW50LnRyaWdnZXJlZCE9PWIudHlwZT9uLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGEsYXJndW1lbnRzKTp2b2lkIDB9KSxiPShifHxcIlwiKS5tYXRjaChFKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbihcIi5cIil9LGYpLChtPWlbb10pfHwobT1pW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGwuc2V0dXAmJmwuc2V0dXAuY2FsbChhLGQscCxnKSE9PSExfHxhLmFkZEV2ZW50TGlzdGVuZXImJmEuYWRkRXZlbnRMaXN0ZW5lcihvLGcsITEpKSxsLmFkZCYmKGwuYWRkLmNhbGwoYSxrKSxrLmhhbmRsZXIuZ3VpZHx8KGsuaGFuZGxlci5ndWlkPWMuZ3VpZCkpLGU/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxrKTptLnB1c2goayksbi5ldmVudC5nbG9iYWxbb109ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPUwuaGFzRGF0YShhKSYmTC5nZXQoYSk7aWYociYmKGk9ci5ldmVudHMpKXtiPShifHxcIlwiKS5tYXRjaChFKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09aVtvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcC5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnEhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKFwiKipcIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEscCxyLmhhbmRsZSkhPT0hMXx8bi5yZW1vdmVFdmVudChhLG8sci5oYW5kbGUpLGRlbGV0ZSBpW29dKX1lbHNlIGZvcihvIGluIGkpbi5ldmVudC5yZW1vdmUoYSxvK2Jbal0sYyxkLCEwKTtuLmlzRW1wdHlPYmplY3QoaSkmJihkZWxldGUgci5oYW5kbGUsTC5yZW1vdmUoYSxcImV2ZW50c1wiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmLGcsaCxpLGssbSxvLHA9W2R8fGxdLHE9ai5jYWxsKGIsXCJ0eXBlXCIpP2IudHlwZTpiLHI9ai5jYWxsKGIsXCJuYW1lc3BhY2VcIik/Yi5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKGc9aD1kPWR8fGwsMyE9PWQubm9kZVR5cGUmJjghPT1kLm5vZGVUeXBlJiYhWC50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKFwiLlwiKT49MCYmKHI9cS5zcGxpdChcIi5cIikscT1yLnNoaWZ0KCksci5zb3J0KCkpLGs9cS5pbmRleE9mKFwiOlwiKTwwJiZcIm9uXCIrcSxiPWJbbi5leHBhbmRvXT9iOm5ldyBuLkV2ZW50KHEsXCJvYmplY3RcIj09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWU/MjozLGIubmFtZXNwYWNlPXIuam9pbihcIi5cIiksYi5uYW1lc3BhY2VfcmU9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Iuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZCksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGV8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShkLGMpIT09ITEpKXtpZighZSYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGQpKXtmb3IoaT1vLmRlbGVnYXRlVHlwZXx8cSxYLnRlc3QoaStxKXx8KGc9Zy5wYXJlbnROb2RlKTtnO2c9Zy5wYXJlbnROb2RlKXAucHVzaChnKSxoPWc7aD09PShkLm93bmVyRG9jdW1lbnR8fGwpJiZwLnB1c2goaC5kZWZhdWx0Vmlld3x8aC5wYXJlbnRXaW5kb3d8fGEpfWY9MDt3aGlsZSgoZz1wW2YrK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1mPjE/aTpvLmJpbmRUeXBlfHxxLG09KEwuZ2V0KGcsXCJldmVudHNcIil8fHt9KVtiLnR5cGVdJiZMLmdldChnLFwiaGFuZGxlXCIpLG0mJm0uYXBwbHkoZyxjKSxtPWsmJmdba10sbSYmbS5hcHBseSYmbi5hY2NlcHREYXRhKGcpJiYoYi5yZXN1bHQ9bS5hcHBseShnLGMpLGIucmVzdWx0PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGIudHlwZT1xLGV8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fG8uX2RlZmF1bHQmJm8uX2RlZmF1bHQuYXBwbHkocC5wb3AoKSxjKSE9PSExfHwhbi5hY2NlcHREYXRhKGQpfHxrJiZuLmlzRnVuY3Rpb24oZFtxXSkmJiFuLmlzV2luZG93KGQpJiYoaD1kW2tdLGgmJihkW2tdPW51bGwpLG4uZXZlbnQudHJpZ2dlcmVkPXEsZFtxXSgpLG4uZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxoJiYoZFtrXT1oKSksYi5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihhKXthPW4uZXZlbnQuZml4KGEpO3ZhciBiLGMsZSxmLGcsaD1bXSxpPWQuY2FsbChhcmd1bWVudHMpLGo9KEwuZ2V0KHRoaXMsXCJldmVudHNcIil8fHt9KVthLnR5cGVdfHxbXSxrPW4uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW4uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sYz0wO3doaWxlKChnPWYuaGFuZGxlcnNbYysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChnLm5hbWVzcGFjZSkpJiYoYS5oYW5kbGVPYmo9ZyxhLmRhdGE9Zy5kYXRhLGU9KChuLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihhLnJlc3VsdD1lKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJighYS5idXR0b258fFwiY2xpY2tcIiE9PWEudHlwZSkpZm9yKDtpIT09dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZihpLmRpc2FibGVkIT09ITB8fFwiY2xpY2tcIiE9PWEudHlwZSl7Zm9yKGQ9W10sYz0wO2g+YztjKyspZj1iW2NdLGU9Zi5zZWxlY3RvcitcIiBcIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+PTA6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LHByb3BzOlwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczpcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWEud2hpY2gmJihhLndoaWNoPW51bGwhPWIuY2hhckNvZGU/Yi5jaGFyQ29kZTpiLmtleUNvZGUpLGF9fSxtb3VzZUhvb2tzOntwcm9wczpcImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxsLGQ9Yy5kb2N1bWVudEVsZW1lbnQsZT1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGQmJmQuc2Nyb2xsTGVmdHx8ZSYmZS5zY3JvbGxMZWZ0fHwwKS0oZCYmZC5jbGllbnRMZWZ0fHxlJiZlLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhkJiZkLnNjcm9sbFRvcHx8ZSYmZS5zY3JvbGxUb3B8fDApLShkJiZkLmNsaWVudFRvcHx8ZSYmZS5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1mfHwoYS53aGljaD0xJmY/MToyJmY/Mzo0JmY/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGQsZT1hLnR5cGUsZj1hLGc9dGhpcy5maXhIb29rc1tlXTtnfHwodGhpcy5maXhIb29rc1tlXT1nPVcudGVzdChlKT90aGlzLm1vdXNlSG9va3M6Vi50ZXN0KGUpP3RoaXMua2V5SG9va3M6e30pLGQ9Zy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChnLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZiksYj1kLmxlbmd0aDt3aGlsZShiLS0pYz1kW2JdLGFbY109ZltjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1sKSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxnLmZpbHRlcj9nLmZpbHRlcihhLGYpOmF9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09XygpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNpblwifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1fKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNvdXRcIn0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJm4ubm9kZU5hbWUodGhpcyxcImlucHV0XCIpPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5leHRlbmQobmV3IG4uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtkP24uZXZlbnQudHJpZ2dlcihlLG51bGwsYik6bi5ldmVudC5kaXNwYXRjaC5jYWxsKGIsZSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/WjokKTp0aGlzLnR5cGU9YSxiJiZuLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxuLm5vdygpLHZvaWQodGhpc1tuLmV4cGFuZG9dPSEwKSk6bmV3IG4uRXZlbnQoYSxiKX0sbi5FdmVudC5wcm90b3R5cGU9e2lzRGVmYXVsdFByZXZlbnRlZDokLGlzUHJvcGFnYXRpb25TdG9wcGVkOiQsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6JCxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1aLGEmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9WixhJiZhLnN0b3BQcm9wYWdhdGlvbiYmYS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9WixhJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sbi5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIscG9pbnRlcmVudGVyOlwicG9pbnRlcm92ZXJcIixwb2ludGVybGVhdmU6XCJwb2ludGVyb3V0XCJ9LGZ1bmN0aW9uKGEsYil7bi5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4oIWV8fGUhPT1kJiYhbi5jb250YWlucyhkLGUpKSYmKGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksay5mb2N1c2luQnViYmxlc3x8bi5lYWNoKHtmb2N1czpcImZvY3VzaW5cIixibHVyOlwiZm9jdXNvdXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihhKXtuLmV2ZW50LnNpbXVsYXRlKGIsYS50YXJnZXQsbi5ldmVudC5maXgoYSksITApfTtuLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKTtlfHxkLmFkZEV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLmFjY2VzcyhkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYiktMTtlP0wuYWNjZXNzKGQsYixlKTooZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYywhMCksTC5yZW1vdmUoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1jfHxiLGI9dm9pZCAwKTtmb3IoZyBpbiBhKXRoaXMub24oZyxiLGMsYVtnXSxlKTtyZXR1cm4gdGhpc31pZihudWxsPT1jJiZudWxsPT1kPyhkPWIsYz1iPXZvaWQgMCk6bnVsbD09ZCYmKFwic3RyaW5nXCI9PXR5cGVvZiBiPyhkPWMsYz12b2lkIDApOihkPWMsYz1iLGI9dm9pZCAwKSksZD09PSExKWQ9JDtlbHNlIGlmKCFkKXJldHVybiB0aGlzO3JldHVybiAxPT09ZSYmKGY9ZCxkPWZ1bmN0aW9uKGEpe3JldHVybiBuKCkub2ZmKGEpLGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkLmd1aWQ9Zi5ndWlkfHwoZi5ndWlkPW4uZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5hZGQodGhpcyxhLGQsYyxiKX0pfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLG4oYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrXCIuXCIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuKGI9PT0hMXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYikmJihjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9JCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtyZXR1cm4gYz9uLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApOnZvaWQgMH19KTt2YXIgYWE9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLGJhPS88KFtcXHc6XSspLyxjYT0vPHwmIz9cXHcrOy8sZGE9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxlYT0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLGZhPS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksZ2E9L150cnVlXFwvKC4qKS8saGE9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLGlhPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07aWEub3B0Z3JvdXA9aWEub3B0aW9uLGlhLnRib2R5PWlhLnRmb290PWlhLmNvbGdyb3VwPWlhLmNhcHRpb249aWEudGhlYWQsaWEudGg9aWEudGQ7ZnVuY3Rpb24gamEoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLFwidGFibGVcIikmJm4ubm9kZU5hbWUoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLFwidHJcIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikpOmF9ZnVuY3Rpb24ga2EoYSl7cmV0dXJuIGEudHlwZT0obnVsbCE9PWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkrXCIvXCIrYS50eXBlLGF9ZnVuY3Rpb24gbGEoYSl7dmFyIGI9Z2EuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxhfWZ1bmN0aW9uIG1hKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKUwuc2V0KGFbY10sXCJnbG9iYWxFdmFsXCIsIWJ8fEwuZ2V0KGJbY10sXCJnbG9iYWxFdmFsXCIpKX1mdW5jdGlvbiBuYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKEwuaGFzRGF0YShhKSYmKGY9TC5hY2Nlc3MoYSksZz1MLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9TS5oYXNEYXRhKGEpJiYoaD1NLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE0uc2V0KGIsaSkpfX1mdW5jdGlvbiBvYShhLGIpe3ZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHxcIipcIik6YS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHxcIipcIik6W107cmV0dXJuIHZvaWQgMD09PWJ8fGImJm4ubm9kZU5hbWUoYSxiKT9uLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIHBhKGEsYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1wiaW5wdXRcIj09PWMmJlQudGVzdChhLnR5cGUpP2IuY2hlY2tlZD1hLmNoZWNrZWQ6KFwiaW5wdXRcIj09PWN8fFwidGV4dGFyZWFcIj09PWMpJiYoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfW4uZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNsb25lTm9kZSghMCksaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZighKGsubm9DbG9uZUNoZWNrZWR8fDEhPT1hLm5vZGVUeXBlJiYxMSE9PWEubm9kZVR5cGV8fG4uaXNYTUxEb2MoYSkpKWZvcihnPW9hKGgpLGY9b2EoYSksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKylwYShmW2RdLGdbZF0pO2lmKGIpaWYoYylmb3IoZj1mfHxvYShhKSxnPWd8fG9hKGgpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspbmEoZltkXSxnW2RdKTtlbHNlIG5hKGEsaCk7cmV0dXJuIGc9b2EoaCxcInNjcmlwdFwiKSxnLmxlbmd0aD4wJiZtYShnLCFpJiZvYShhLFwic2NyaXB0XCIpKSxofSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZSxmLGcsaCxpLGosaz1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxsPVtdLG09MCxvPWEubGVuZ3RoO28+bTttKyspaWYoZT1hW21dLGV8fDA9PT1lKWlmKFwib2JqZWN0XCI9PT1uLnR5cGUoZSkpbi5tZXJnZShsLGUubm9kZVR5cGU/W2VdOmUpO2Vsc2UgaWYoY2EudGVzdChlKSl7Zj1mfHxrLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSksZz0oYmEuZXhlYyhlKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksaD1pYVtnXXx8aWEuX2RlZmF1bHQsZi5pbm5lckhUTUw9aFsxXStlLnJlcGxhY2UoYWEsXCI8JDE+PC8kMj5cIikraFsyXSxqPWhbMF07d2hpbGUoai0tKWY9Zi5sYXN0Q2hpbGQ7bi5tZXJnZShsLGYuY2hpbGROb2RlcyksZj1rLmZpcnN0Q2hpbGQsZi50ZXh0Q29udGVudD1cIlwifWVsc2UgbC5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZSkpO2sudGV4dENvbnRlbnQ9XCJcIixtPTA7d2hpbGUoZT1sW20rK10paWYoKCFkfHwtMT09PW4uaW5BcnJheShlLGQpKSYmKGk9bi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSksZj1vYShrLmFwcGVuZENoaWxkKGUpLFwic2NyaXB0XCIpLGkmJm1hKGYpLGMpKXtqPTA7d2hpbGUoZT1mW2orK10pZmEudGVzdChlLnR5cGV8fFwiXCIpJiZjLnB1c2goZSl9cmV0dXJuIGt9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGUsZj1uLmV2ZW50LnNwZWNpYWwsZz0wO3ZvaWQgMCE9PShjPWFbZ10pO2crKyl7aWYobi5hY2NlcHREYXRhKGMpJiYoZT1jW0wuZXhwYW5kb10sZSYmKGI9TC5jYWNoZVtlXSkpKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cylmW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO0wuY2FjaGVbZV0mJmRlbGV0ZSBMLmNhY2hlW2VdfWRlbGV0ZSBNLmNhY2hlW2NbTS5leHBhbmRvXV19fX0pLG4uZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/bi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmKHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWphKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1hP24uZmlsdGVyKGEsdGhpcyk6dGhpcyxlPTA7bnVsbCE9KGM9ZFtlXSk7ZSsrKWJ8fDEhPT1jLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShvYShjKSksYy5wYXJlbnROb2RlJiYoYiYmbi5jb250YWlucyhjLm93bmVyRG9jdW1lbnQsYykmJm1hKG9hKGMsXCJzY3JpcHRcIikpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYShhLCExKSksYS50ZXh0Q29udGVudD1cIlwiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhZGEudGVzdChhKSYmIWlhWyhiYS5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFhLFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO2Q+YztjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthPXRoaXMucGFyZW50Tm9kZSxuLmNsZWFuRGF0YShvYSh0aGlzKSksYSYmYS5yZXBsYWNlQ2hpbGQoYix0aGlzKX0pLGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlKGEsITApfSxkb21NYW5pcDpmdW5jdGlvbihhLGIpe2E9ZS5hcHBseShbXSxhKTt2YXIgYyxkLGYsZyxoLGksaj0wLGw9dGhpcy5sZW5ndGgsbT10aGlzLG89bC0xLHA9YVswXSxxPW4uaXNGdW5jdGlvbihwKTtpZihxfHxsPjEmJlwic3RyaW5nXCI9PXR5cGVvZiBwJiYhay5jaGVja0Nsb25lJiZlYS50ZXN0KHApKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9bS5lcShjKTtxJiYoYVswXT1wLmNhbGwodGhpcyxjLGQuaHRtbCgpKSksZC5kb21NYW5pcChhLGIpfSk7aWYobCYmKGM9bi5idWlsZEZyYWdtZW50KGEsdGhpc1swXS5vd25lckRvY3VtZW50LCExLHRoaXMpLGQ9Yy5maXJzdENoaWxkLDE9PT1jLmNoaWxkTm9kZXMubGVuZ3RoJiYoYz1kKSxkKSl7Zm9yKGY9bi5tYXAob2EoYyxcInNjcmlwdFwiKSxrYSksZz1mLmxlbmd0aDtsPmo7aisrKWg9YyxqIT09byYmKGg9bi5jbG9uZShoLCEwLCEwKSxnJiZuLm1lcmdlKGYsb2EoaCxcInNjcmlwdFwiKSkpLGIuY2FsbCh0aGlzW2pdLGgsaik7aWYoZylmb3IoaT1mW2YubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsbi5tYXAoZixsYSksaj0wO2c+ajtqKyspaD1mW2pdLGZhLnRlc3QoaC50eXBlfHxcIlwiKSYmIUwuYWNjZXNzKGgsXCJnbG9iYWxFdmFsXCIpJiZuLmNvbnRhaW5zKGksaCkmJihoLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGguc3JjKTpuLmdsb2JhbEV2YWwoaC50ZXh0Q29udGVudC5yZXBsYWNlKGhhLFwiXCIpKSl9cmV0dXJuIHRoaXN9fSksbi5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZz1lLmxlbmd0aC0xLGg9MDtnPj1oO2grKyljPWg9PT1nP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxmLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciBxYSxyYT17fTtmdW5jdGlvbiBzYShiLGMpe3ZhciBkLGU9bihjLmNyZWF0ZUVsZW1lbnQoYikpLmFwcGVuZFRvKGMuYm9keSksZj1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoZD1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGVbMF0pKT9kLmRpc3BsYXk6bi5jc3MoZVswXSxcImRpc3BsYXlcIik7cmV0dXJuIGUuZGV0YWNoKCksZn1mdW5jdGlvbiB0YShhKXt2YXIgYj1sLGM9cmFbYV07cmV0dXJuIGN8fChjPXNhKGEsYiksXCJub25lXCIhPT1jJiZjfHwocWE9KHFhfHxuKFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9cWFbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1zYShhLGIpLHFhLmRldGFjaCgpKSxyYVthXT1jKSxjfXZhciB1YT0vXm1hcmdpbi8sdmE9bmV3IFJlZ0V4cChcIl4oXCIrUStcIikoPyFweClbYS16JV0rJFwiLFwiaVwiKSx3YT1mdW5jdGlvbihiKXtyZXR1cm4gYi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Lm9wZW5lcj9iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpOmEuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfTtmdW5jdGlvbiB4YShhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fHdhKGEpLGMmJihnPWMuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXSksYyYmKFwiXCIhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSx2YS50ZXN0KGcpJiZ1YS50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crXCJcIjpnfWZ1bmN0aW9uIHlhKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3JldHVybiBhKCk/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSFmdW5jdGlvbigpe3ZhciBiLGMsZD1sLmRvY3VtZW50RWxlbWVudCxlPWwuY3JlYXRlRWxlbWVudChcImRpdlwiKSxmPWwuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihmLnN0eWxlKXtmLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiY29udGVudC1ib3hcIixmLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJcIixrLmNsZWFyQ2xvbmVTdHlsZT1cImNvbnRlbnQtYm94XCI9PT1mLnN0eWxlLmJhY2tncm91bmRDbGlwLGUuc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZS5hcHBlbmRDaGlsZChmKTtmdW5jdGlvbiBnKCl7Zi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIixmLmlubmVySFRNTD1cIlwiLGQuYXBwZW5kQ2hpbGQoZSk7dmFyIGc9YS5nZXRDb21wdXRlZFN0eWxlKGYsbnVsbCk7Yj1cIjElXCIhPT1nLnRvcCxjPVwiNHB4XCI9PT1nLndpZHRoLGQucmVtb3ZlQ2hpbGQoZSl9YS5nZXRDb21wdXRlZFN0eWxlJiZuLmV4dGVuZChrLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZnKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO3JldHVybiBjLnN0eWxlLmNzc1RleHQ9Zi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowXCIsYy5zdHlsZS5tYXJnaW5SaWdodD1jLnN0eWxlLndpZHRoPVwiMFwiLGYuc3R5bGUud2lkdGg9XCIxcHhcIixkLmFwcGVuZENoaWxkKGUpLGI9IXBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGMsbnVsbCkubWFyZ2luUmlnaHQpLGQucmVtb3ZlQ2hpbGQoZSksZi5yZW1vdmVDaGlsZChjKSxifX0pfX0oKSxuLnN3YXA9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O3ZhciB6YT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sQWE9bmV3IFJlZ0V4cChcIl4oXCIrUStcIikoLiopJFwiLFwiaVwiKSxCYT1uZXcgUmVnRXhwKFwiXihbKy1dKT0oXCIrUStcIilcIixcImlcIiksQ2E9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LERhPXtsZXR0ZXJTcGFjaW5nOlwiMFwiLGZvbnRXZWlnaHQ6XCI0MDBcIn0sRWE9W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdO2Z1bmN0aW9uIEZhKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWJbMF0udG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9YixlPUVhLmxlbmd0aDt3aGlsZShlLS0paWYoYj1FYVtlXStjLGIgaW4gYSlyZXR1cm4gYjtyZXR1cm4gZH1mdW5jdGlvbiBHYShhLGIsYyl7dmFyIGQ9QWEuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMV0tKGN8fDApKSsoZFsyXXx8XCJweFwiKTpifWZ1bmN0aW9uIEhhKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD9cImJvcmRlclwiOlwiY29udGVudFwiKT80Olwid2lkdGhcIj09PWI/MTowLGc9MDs0PmY7Zis9MilcIm1hcmdpblwiPT09YyYmKGcrPW4uY3NzKGEsYytSW2ZdLCEwLGUpKSxkPyhcImNvbnRlbnRcIj09PWMmJihnLT1uLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSkpLFwibWFyZ2luXCIhPT1jJiYoZy09bi5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk6KGcrPW4uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSxcInBhZGRpbmdcIiE9PWMmJihnKz1uLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBJYShhLGIsYyl7dmFyIGQ9ITAsZT1cIndpZHRoXCI9PT1iP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQsZj13YShhKSxnPVwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9eGEoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSx2YS50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGsuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStIYShhLGIsY3x8KGc/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksZCxmKStcInB4XCJ9ZnVuY3Rpb24gSmEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109TC5nZXQoZCxcIm9sZGRpc3BsYXlcIiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8XCJub25lXCIhPT1jfHwoZC5zdHlsZS5kaXNwbGF5PVwiXCIpLFwiXCI9PT1kLnN0eWxlLmRpc3BsYXkmJlMoZCkmJihmW2ddPUwuYWNjZXNzKGQsXCJvbGRkaXNwbGF5XCIsdGEoZC5ub2RlTmFtZSkpKSk6KGU9UyhkKSxcIm5vbmVcIj09PWMmJmV8fEwuc2V0KGQsXCJvbGRkaXNwbGF5XCIsZT9jOm4uY3NzKGQsXCJkaXNwbGF5XCIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJlwibm9uZVwiIT09ZC5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9eGEoYSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PWM/XCIxXCI6Y319fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7XCJmbG9hdFwiOlwiY3NzRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmEoaSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWM/ZyYmXCJnZXRcImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTooZj10eXBlb2YgYyxcInN0cmluZ1wiPT09ZiYmKGU9QmEuZXhlYyhjKSkmJihjPShlWzFdKzEpKmVbMl0rcGFyc2VGbG9hdChuLmNzcyhhLGIpKSxmPVwibnVtYmVyXCIpLG51bGwhPWMmJmM9PT1jJiYoXCJudW1iZXJcIiE9PWZ8fG4uY3NzTnVtYmVyW2hdfHwoYys9XCJweFwiKSxrLmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PWN8fDAhPT1iLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwoaVtiXT1cImluaGVyaXRcIiksZyYmXCJzZXRcImluIGcmJnZvaWQgMD09PShjPWcuc2V0KGEsYyxkKSl8fChpW2JdPWMpKSx2b2lkIDApfX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZhKGEuc3R5bGUsaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSxnJiZcImdldFwiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9eGEoYSxiLGQpKSxcIm5vcm1hbFwiPT09ZSYmYiBpbiBEYSYmKGU9RGFbYl0pLFwiXCI9PT1jfHxjPyhmPXBhcnNlRmxvYXQoZSksYz09PSEwfHxuLmlzTnVtZXJpYyhmKT9mfHwwOmUpOmV9fSksbi5lYWNoKFtcImhlaWdodFwiLFwid2lkdGhcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP3phLnRlc3Qobi5jc3MoYSxcImRpc3BsYXlcIikpJiYwPT09YS5vZmZzZXRXaWR0aD9uLnN3YXAoYSxDYSxmdW5jdGlvbigpe3JldHVybiBJYShhLGIsZCl9KTpJYShhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJndhKGEpO3JldHVybiBHYShhLGMsZD9IYShhLGIsZCxcImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxlKSxlKTowKX19fSksbi5jc3NIb29rcy5tYXJnaW5SaWdodD15YShrLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9uLnN3YXAoYSx7ZGlzcGxheTpcImlubGluZS1ibG9ja1wifSx4YSxbYSxcIm1hcmdpblJpZ2h0XCJdKTp2b2lkIDB9KSxuLmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj1cInN0cmluZ1wiPT10eXBlb2YgYz9jLnNwbGl0KFwiIFwiKTpbY107ND5kO2QrKyllW2ErUltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSx1YS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1HYSl9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPXdhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1ModGhpcyk/bih0aGlzKS5zaG93KCk6bih0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBLYShhLGIsYyxkLGUpe3JldHVybiBuZXcgS2EucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKX1uLlR3ZWVuPUthLEthLnByb3RvdHlwZT17Y29uc3RydWN0b3I6S2EsaW5pdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsdGhpcy5lYXNpbmc9ZXx8XCJzd2luZ1wiLHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/XCJcIjpcInB4XCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1LYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6S2EucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9S2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPW4uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpLYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxLYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9S2EucHJvdG90eXBlLEthLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbnVsbD09YS5lbGVtW2EucHJvcF18fGEuZWxlbS5zdHlsZSYmbnVsbCE9YS5lbGVtLnN0eWxlW2EucHJvcF0/KGI9bi5jc3MoYS5lbGVtLGEucHJvcCxcIlwiKSxiJiZcImF1dG9cIiE9PWI/YjowKTphLmVsZW1bYS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGEpe24uZnguc3RlcFthLnByb3BdP24uZnguc3RlcFthLnByb3BdKGEpOmEuZWxlbS5zdHlsZSYmKG51bGwhPWEuZWxlbS5zdHlsZVtuLmNzc1Byb3BzW2EucHJvcF1dfHxuLmNzc0hvb2tzW2EucHJvcF0pP24uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpOmEuZWxlbVthLnByb3BdPWEubm93fX19LEthLnByb3BIb29rcy5zY3JvbGxUb3A9S2EucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfX0sbi5meD1LYS5wcm90b3R5cGUuaW5pdCxuLmZ4LnN0ZXA9e307dmFyIExhLE1hLE5hPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxPYT1uZXcgUmVnRXhwKFwiXig/OihbKy1dKT18KShcIitRK1wiKShbYS16JV0qKSRcIixcImlcIiksUGE9L3F1ZXVlSG9va3MkLyxRYT1bVmFdLFJhPXtcIipcIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYiksZD1jLmN1cigpLGU9T2EuZXhlYyhiKSxmPWUmJmVbM118fChuLmNzc051bWJlclthXT9cIlwiOlwicHhcIiksZz0obi5jc3NOdW1iZXJbYV18fFwicHhcIiE9PWYmJitkKSYmT2EuZXhlYyhuLmNzcyhjLmVsZW0sYSkpLGg9MSxpPTIwO2lmKGcmJmdbM10hPT1mKXtmPWZ8fGdbM10sZT1lfHxbXSxnPStkfHwxO2RvIGg9aHx8XCIuNVwiLGcvPWgsbi5zdHlsZShjLmVsZW0sYSxnK2YpO3doaWxlKGghPT0oaD1jLmN1cigpL2QpJiYxIT09aCYmLS1pKX1yZXR1cm4gZSYmKGc9Yy5zdGFydD0rZ3x8K2R8fDAsYy51bml0PWYsYy5lbmQ9ZVsxXT9nKyhlWzFdKzEpKmVbMl06K2VbMl0pLGN9XX07ZnVuY3Rpb24gU2EoKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe0xhPXZvaWQgMH0pLExhPW4ubm93KCl9ZnVuY3Rpb24gVGEoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowOzQ+ZDtkKz0yLWIpYz1SW2RdLGVbXCJtYXJnaW5cIitjXT1lW1wicGFkZGluZ1wiK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIFVhKGEsYixjKXtmb3IodmFyIGQsZT0oUmFbYl18fFtdKS5jb25jYXQoUmFbXCIqXCJdKSxmPTAsZz1lLmxlbmd0aDtnPmY7ZisrKWlmKGQ9ZVtmXS5jYWxsKGMsYixhKSlyZXR1cm4gZH1mdW5jdGlvbiBWYShhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosayxsPXRoaXMsbT17fSxvPWEuc3R5bGUscD1hLm5vZGVUeXBlJiZTKGEpLHE9TC5nZXQoYSxcImZ4c2hvd1wiKTtjLnF1ZXVlfHwoaD1uLl9xdWV1ZUhvb2tzKGEsXCJmeFwiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxsLmFsd2F5cyhmdW5jdGlvbigpe2wuYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG4ucXVldWUoYSxcImZ4XCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKFwiaGVpZ2h0XCJpbiBifHxcIndpZHRoXCJpbiBiKSYmKGMub3ZlcmZsb3c9W28ub3ZlcmZsb3csby5vdmVyZmxvd1gsby5vdmVyZmxvd1ldLGo9bi5jc3MoYSxcImRpc3BsYXlcIiksaz1cIm5vbmVcIj09PWo/TC5nZXQoYSxcIm9sZGRpc3BsYXlcIil8fHRhKGEubm9kZU5hbWUpOmosXCJpbmxpbmVcIj09PWsmJlwibm9uZVwiPT09bi5jc3MoYSxcImZsb2F0XCIpJiYoby5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz1cImhpZGRlblwiLGwuYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxOYS5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fFwidG9nZ2xlXCI9PT1lLGU9PT0ocD9cImhpZGVcIjpcInNob3dcIikpe2lmKFwic2hvd1wiIT09ZXx8IXF8fHZvaWQgMD09PXFbZF0pY29udGludWU7cD0hMH1tW2RdPXEmJnFbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChtKSlcImlubGluZVwiPT09KFwibm9uZVwiPT09aj90YShhLm5vZGVOYW1lKTpqKSYmKG8uZGlzcGxheT1qKTtlbHNle3E/XCJoaWRkZW5cImluIHEmJihwPXEuaGlkZGVuKTpxPUwuYWNjZXNzKGEsXCJmeHNob3dcIix7fSksZiYmKHEuaGlkZGVuPSFwKSxwP24oYSkuc2hvdygpOmwuZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbC5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7TC5yZW1vdmUoYSxcImZ4c2hvd1wiKTtmb3IoYiBpbiBtKW4uc3R5bGUoYSxiLG1bYl0pfSk7Zm9yKGQgaW4gbSlnPVVhKHA/cVtkXTowLGQsbCksZCBpbiBxfHwocVtkXT1nLnN0YXJ0LHAmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9XCJ3aWR0aFwiPT09ZHx8XCJoZWlnaHRcIj09PWQ/MTowKSl9fWZ1bmN0aW9uIFdhKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9bi5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxuLmlzQXJyYXkoZikmJihlPWZbMV0sZj1hW2NdPWZbMF0pLGMhPT1kJiYoYVtkXT1mLGRlbGV0ZSBhW2NdKSxnPW4uY3NzSG9va3NbZF0sZyYmXCJleHBhbmRcImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBYYShhLGIsYyl7dmFyIGQsZSxmPTAsZz1RYS5sZW5ndGgsaD1uLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1MYXx8U2EoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7aT5nO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLDE+ZiYmaT9jOihoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6bi5leHRlbmQoe30sYiksb3B0czpuLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOkxhfHxTYSgpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj9oLnJlc29sdmVXaXRoKGEsW2osYl0pOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoV2EoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7Zz5mO2YrKylpZihkPVFhW2ZdLmNhbGwoaixhLGssai5vcHRzKSlyZXR1cm4gZDtyZXR1cm4gbi5tYXAoayxVYSxqKSxuLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxuLmZ4LnRpbWVyKG4uZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpfW4uQW5pbWF0aW9uPW4uZXh0ZW5kKFhhLHt0d2VlbmVyOmZ1bmN0aW9uKGEsYil7bi5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bXCIqXCJdKTphPWEuc3BsaXQoXCIgXCIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWM9YVtkXSxSYVtjXT1SYVtjXXx8W10sUmFbY10udW5zaGlmdChiKX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9RYS51bnNoaWZ0KGEpOlFhLnB1c2goYSl9fSksbi5zcGVlZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSYmXCJvYmplY3RcIj09dHlwZW9mIGE/bi5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxuLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIW4uaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIGQuZHVyYXRpb249bi5meC5vZmY/MDpcIm51bWJlclwiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PWQucXVldWV8fGQucXVldWU9PT0hMCkmJihkLnF1ZXVlPVwiZnhcIiksZC5vbGQ9ZC5jb21wbGV0ZSxkLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bi5pc0Z1bmN0aW9uKGQub2xkKSYmZC5vbGQuY2FsbCh0aGlzKSxkLnF1ZXVlJiZuLmRlcXVldWUodGhpcyxkLnF1ZXVlKX0sZH0sbi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoUykuY3NzKFwib3BhY2l0eVwiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9WGEodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8TC5nZXQodGhpcyxcImZpbmlzaFwiKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYStcInF1ZXVlSG9va3NcIixmPW4udGltZXJzLGc9TC5nZXQodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmUGEudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPUwuZ2V0KHRoaXMpLGQ9Y1thK1wicXVldWVcIl0sZT1jW2ErXCJxdWV1ZUhvb2tzXCJdLGY9bi50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLG4ucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2c+YjtiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksbi5lYWNoKFtcInRvZ2dsZVwiLFwic2hvd1wiLFwiaGlkZVwiXSxmdW5jdGlvbihhLGIpe3ZhciBjPW4uZm5bYl07bi5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fFwiYm9vbGVhblwiPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoVGEoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOlRhKFwic2hvd1wiKSxzbGlkZVVwOlRhKFwiaGlkZVwiKSxzbGlkZVRvZ2dsZTpUYShcInRvZ2dsZVwiKSxmYWRlSW46e29wYWNpdHk6XCJzaG93XCJ9LGZhZGVPdXQ6e29wYWNpdHk6XCJoaWRlXCJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6XCJ0b2dnbGVcIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1uLnRpbWVycztmb3IoTGE9bi5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxuLmZ4LnN0b3AoKSxMYT12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtNYXx8KE1hPXNldEludGVydmFsKG4uZngudGljayxuLmZ4LmludGVydmFsKSl9LG4uZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoTWEpLE1hPW51bGx9LG4uZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LG4uZm4uZGVsYXk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1uLmZ4P24uZnguc3BlZWRzW2FdfHxhOmEsYj1ifHxcImZ4XCIsdGhpcy5xdWV1ZShiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9c2V0VGltZW91dChiLGEpO2Muc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChkKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxiPWwuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxjPWIuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKTthLnR5cGU9XCJjaGVja2JveFwiLGsuY2hlY2tPbj1cIlwiIT09YS52YWx1ZSxrLm9wdFNlbGVjdGVkPWMuc2VsZWN0ZWQsYi5kaXNhYmxlZD0hMCxrLm9wdERpc2FibGVkPSFjLmRpc2FibGVkLGE9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS52YWx1ZT1cInRcIixhLnR5cGU9XCJyYWRpb1wiLGsucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIFlhLFphLCRhPW4uZXhwci5hdHRySGFuZGxlO24uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKGEmJjMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIHR5cGVvZiBhLmdldEF0dHJpYnV0ZT09PVU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxkPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT9aYTpZYSkpLFxudm9pZCAwPT09Yz9kJiZcImdldFwiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9bi5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiZcInNldFwiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6dm9pZCBuLnJlbW92ZUF0dHIoYSxiKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1uLnByb3BGaXhbY118fGMsbi5leHByLm1hdGNoLmJvb2wudGVzdChjKSYmKGFbZF09ITEpLGEucmVtb3ZlQXR0cmlidXRlKGMpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFrLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJm4ubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fX0pLFphPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sbi5lYWNoKG4uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRhW2JdfHxuLmZpbmQuYXR0cjskYVtiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9JGFbYl0sJGFbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLCRhW2JdPWYpLGV9fSk7dmFyIF9hPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifSxwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz1hLm5vZGVUeXBlO2lmKGEmJjMhPT1nJiY4IT09ZyYmMiE9PWcpcmV0dXJuIGY9MSE9PWd8fCFuLmlzWE1MRG9jKGEpLGYmJihiPW4ucHJvcEZpeFtiXXx8YixlPW4ucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJlwic2V0XCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJlwiZ2V0XCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKFwidGFiaW5kZXhcIil8fF9hLnRlc3QoYS5ub2RlTmFtZSl8fGEuaHJlZj9hLnRhYkluZGV4Oi0xfX19fSksay5vcHRTZWxlY3RlZHx8KG4ucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9fSksbi5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe24ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgYWI9L1tcXHRcXHJcXG5cXGZdL2c7bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPVwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpOlwiIFwiKSl7Zj0wO3doaWxlKGU9YltmKytdKWQuaW5kZXhPZihcIiBcIitlK1wiIFwiKTwwJiYoZCs9ZStcIiBcIik7Zz1uLnRyaW0oZCksYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPTA9PT1hcmd1bWVudHMubGVuZ3RofHxcInN0cmluZ1wiPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFiLFwiIFwiKTpcIlwiKSl7Zj0wO3doaWxlKGU9YltmKytdKXdoaWxlKGQuaW5kZXhPZihcIiBcIitlK1wiIFwiKT49MClkPWQucmVwbGFjZShcIiBcIitlK1wiIFwiLFwiIFwiKTtnPWE/bi50cmltKGQpOlwiXCIsYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiZcInN0cmluZ1wiPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe24odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZihcInN0cmluZ1wiPT09Yyl7dmFyIGIsZD0wLGU9bih0aGlzKSxmPWEubWF0Y2goRSl8fFtdO3doaWxlKGI9ZltkKytdKWUuaGFzQ2xhc3MoYik/ZS5yZW1vdmVDbGFzcyhiKTplLmFkZENsYXNzKGIpfWVsc2UoYz09PVV8fFwiYm9vbGVhblwiPT09YykmJih0aGlzLmNsYXNzTmFtZSYmTC5zZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT9cIlwiOkwuZ2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIpfHxcIlwiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtmb3IodmFyIGI9XCIgXCIrYStcIiBcIixjPTAsZD10aGlzLmxlbmd0aDtkPmM7YysrKWlmKDE9PT10aGlzW2NdLm5vZGVUeXBlJiYoXCIgXCIrdGhpc1tjXS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpLmluZGV4T2YoYik+PTApcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGJiPS9cXHIvZztuLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bi5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG4odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGU/ZSs9XCJcIjpuLmlzQXJyYXkoZSkmJihlPW4ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bi52YWxIb29rc1tlLnR5cGVdfHxuLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShiYixcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLG4uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6bi50cmltKG4udGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZuLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPW4uaW5BcnJheShkLnZhbHVlLGYpPj0wKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksbi5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe24udmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmlzQXJyYXkoYik/YS5jaGVja2VkPW4uaW5BcnJheShuKGEpLnZhbCgpLGIpPj0wOnZvaWQgMH19LGsuY2hlY2tPbnx8KG4udmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6YS52YWx1ZX0pfSksbi5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG4uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSxcIioqXCIpOnRoaXMub2ZmKGIsYXx8XCIqKlwiLGMpfX0pO3ZhciBjYj1uLm5vdygpLGRiPS9cXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErXCJcIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7dHJ5e2M9bmV3IERPTVBhcnNlcixiPWMucGFyc2VGcm9tU3RyaW5nKGEsXCJ0ZXh0L3htbFwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGgpJiZuLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2EpLGJ9O3ZhciBlYj0vIy4qJC8sZmI9LyhbPyZdKV89W14mXSovLGdiPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20saGI9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8saWI9L14oPzpHRVR8SEVBRCkkLyxqYj0vXlxcL1xcLy8sa2I9L14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sbGI9e30sbWI9e30sbmI9XCIqL1wiLmNvbmNhdChcIipcIiksb2I9YS5sb2NhdGlvbi5ocmVmLHBiPWtiLmV4ZWMob2IudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHFiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIHJiKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PW1iO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbi5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gc2IoYSxiKXt2YXIgYyxkLGU9bi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmbi5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIHRiKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIHViKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19bi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOm9iLHR5cGU6XCJHRVRcIixpc0xvY2FsOmhiLnRlc3QocGJbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOm5iLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpuLnBhcnNlSlNPTixcInRleHQgeG1sXCI6bi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/c2Ioc2IoYSxuLmFqYXhTZXR0aW5ncyksYik6c2Iobi5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6cWIobGIpLGFqYXhUcmFuc3BvcnQ6cWIobWIpLGFqYXg6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYj1ifHx7fTt2YXIgYyxkLGUsZixnLGgsaSxqLGs9bi5hamF4U2V0dXAoe30sYiksbD1rLmNvbnRleHR8fGssbT1rLmNvbnRleHQmJihsLm5vZGVUeXBlfHxsLmpxdWVyeSk/bihsKTpuLmV2ZW50LG89bi5EZWZlcnJlZCgpLHA9bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PVwiY2FuY2VsZWRcIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFmKXtmPXt9O3doaWxlKGI9Z2IuZXhlYyhlKSlmW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWZbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9lOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBjJiZjLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8b2IpK1wiXCIpLnJlcGxhY2UoZWIsXCJcIikucmVwbGFjZShqYixwYlsxXStcIi8vXCIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW4udHJpbShrLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W1wiXCJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihoPWtiLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFofHxoWzFdPT09cGJbMV0mJmhbMl09PT1wYlsyXSYmKGhbM118fChcImh0dHA6XCI9PT1oWzFdP1wiODBcIjpcIjQ0M1wiKSk9PT0ocGJbM118fChcImh0dHA6XCI9PT1wYlsxXT9cIjgwXCI6XCI0NDNcIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW4ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxyYihsYixrLGIsdiksMj09PXQpcmV0dXJuIHY7aT1uLmV2ZW50JiZrLmdsb2JhbCxpJiYwPT09bi5hY3RpdmUrKyYmbi5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLGsudHlwZT1rLnR5cGUudG9VcHBlckNhc2UoKSxrLmhhc0NvbnRlbnQ9IWliLnRlc3Qoay50eXBlKSxkPWsudXJsLGsuaGFzQ29udGVudHx8KGsuZGF0YSYmKGQ9ay51cmwrPShkYi50ZXN0KGQpP1wiJlwiOlwiP1wiKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9ZmIudGVzdChkKT9kLnJlcGxhY2UoZmIsXCIkMV89XCIrY2IrKyk6ZCsoZGIudGVzdChkKT9cIiZcIjpcIj9cIikrXCJfPVwiK2NiKyspKSxrLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTW9kaWZpZWQtU2luY2VcIixuLmxhc3RNb2RpZmllZFtkXSksbi5ldGFnW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsbi5ldGFnW2RdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixrLmNvbnRlbnRUeXBlKSx2LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKyhcIipcIiE9PWsuZGF0YVR5cGVzWzBdP1wiLCBcIituYitcIjsgcT0wLjAxXCI6XCJcIik6ay5hY2NlcHRzW1wiKlwiXSk7Zm9yKGogaW4gay5oZWFkZXJzKXYuc2V0UmVxdWVzdEhlYWRlcihqLGsuaGVhZGVyc1tqXSk7aWYoay5iZWZvcmVTZW5kJiYoay5iZWZvcmVTZW5kLmNhbGwobCx2LGspPT09ITF8fDI9PT10KSlyZXR1cm4gdi5hYm9ydCgpO3U9XCJhYm9ydFwiO2ZvcihqIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbal0oa1tqXSk7aWYoYz1yYihtYixrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGkmJm0udHJpZ2dlcihcImFqYXhTZW5kXCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydChcInRpbWVvdXRcIil9LGsudGltZW91dCkpO3RyeXt0PTEsYy5zZW5kKHIseCl9Y2F0Y2godyl7aWYoISgyPnQpKXRocm93IHc7eCgtMSx3KX19ZWxzZSB4KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHgoYSxiLGYsaCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGM9dm9pZCAwLGU9aHx8XCJcIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsZiYmKHU9dGIoayx2LGYpKSx1PXViKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksdyYmKG4ubGFzdE1vZGlmaWVkW2RdPXcpLHc9di5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksdyYmKG4uZXRhZ1tkXT13KSksMjA0PT09YXx8XCJIRUFEXCI9PT1rLnR5cGU/eD1cIm5vY29udGVudFwiOjMwND09PWE/eD1cIm5vdG1vZGlmaWVkXCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9XCJlcnJvclwiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrXCJcIixqP28ucmVzb2x2ZVdpdGgobCxbcix4LHZdKTpvLnJlamVjdFdpdGgobCxbdix4LHNdKSx2LnN0YXR1c0NvZGUocSkscT12b2lkIDAsaSYmbS50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaSYmKG0udHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt2LGtdKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxuLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1uLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bi5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8bih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MH0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgdmI9LyUyMC9nLHdiPS9cXFtcXF0kLyx4Yj0vXFxyP1xcbi9nLHliPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSx6Yj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gQWIoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8d2IudGVzdChhKT9kKGEsZSk6QWIoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1uLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilBYihhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj9cIlwiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQWIoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbihcIiZcIikucmVwbGFjZSh2YixcIitcIil9LG4uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW4ucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmemIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXliLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFULnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoeGIsXCJcXHJcXG5cIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh4YixcIlxcclxcblwiKX19KS5nZXQoKX19KSxuLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChhKXt9fTt2YXIgQmI9MCxDYj17fSxEYj17MDoyMDAsMTIyMzoyMDR9LEViPW4uYWpheFNldHRpbmdzLnhocigpO2EuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIENiKUNiW2FdKCl9KSxrLmNvcnM9ISFFYiYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIEViLGsuYWpheD1FYj0hIUViLG4uYWpheFRyYW5zcG9ydChmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gay5jb3JzfHxFYiYmIWEuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEueGhyKCksZz0rK0JiO2lmKGYub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLGEueGhyRmllbGRzKWZvcihlIGluIGEueGhyRmllbGRzKWZbZV09YS54aHJGaWVsZHNbZV07YS5taW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSksYS5jcm9zc0RvbWFpbnx8Y1tcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihlIGluIGMpZi5zZXRSZXF1ZXN0SGVhZGVyKGUsY1tlXSk7Yj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtiJiYoZGVsZXRlIENiW2ddLGI9Zi5vbmxvYWQ9Zi5vbmVycm9yPW51bGwsXCJhYm9ydFwiPT09YT9mLmFib3J0KCk6XCJlcnJvclwiPT09YT9kKGYuc3RhdHVzLGYuc3RhdHVzVGV4dCk6ZChEYltmLnN0YXR1c118fGYuc3RhdHVzLGYuc3RhdHVzVGV4dCxcInN0cmluZ1wiPT10eXBlb2YgZi5yZXNwb25zZVRleHQ/e3RleHQ6Zi5yZXNwb25zZVRleHR9OnZvaWQgMCxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxmLm9ubG9hZD1iKCksZi5vbmVycm9yPWIoXCJlcnJvclwiKSxiPUNiW2ddPWIoXCJhYm9ydFwiKTt0cnl7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKX1jYXRjaChoKXtpZihiKXRocm93IGh9fSxhYm9ydDpmdW5jdGlvbigpe2ImJmIoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIil9KSxuLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj1uKFwiPHNjcmlwdD5cIikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oXCJsb2FkIGVycm9yXCIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZlKFwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxsLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEZiPVtdLEdiPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87bi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9RmIucG9wKCl8fG4uZXhwYW5kbytcIl9cIitjYisrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihHYi50ZXN0KGIudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdGEmJiEoYi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmR2IudGVzdChiLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShHYixcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShkYi50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssRmIucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGw7dmFyIGQ9di5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW4uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbihlKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgSGI9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJkhiKXJldHVybiBIYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZihcIiBcIik7cmV0dXJuIGg+PTAmJihkPW4udHJpbShhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksbi5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKFwiPGRpdj5cIikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxuLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSWI9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gSmIoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsXCJwb3NpdGlvblwiKSxsPW4oYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLFwidG9wXCIpLGk9bi5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1KYihmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuXCJmaXhlZFwiPT09bi5jc3MoYyxcInBvc2l0aW9uXCIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxuLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGQubGVmdCs9bi5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1kLnRvcC1uLmNzcyhjLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8SWI7d2hpbGUoYSYmIW4ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1uLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8SWJ9KX19KSxuLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9XCJwYWdlWU9mZnNldFwiPT09YztuLmZuW2JdPWZ1bmN0aW9uKGUpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixlLGYpe3ZhciBnPUpiKGIpO3JldHVybiB2b2lkIDA9PT1mP2c/Z1tjXTpiW2VdOnZvaWQoZz9nLnNjcm9sbFRvKGQ/YS5wYWdlWE9mZnNldDpmLGQ/ZjphLnBhZ2VZT2Zmc2V0KTpiW2VdPWYpfSxiLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxuLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT15YShrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YShhLGIpLHZhLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIEtiPWEualF1ZXJ5LExiPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPUxiKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1LYiksbn0sdHlwZW9mIGI9PT1VJiYoYS5qUXVlcnk9YS4kPW4pLG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS5taW4ubWFwIiwiLyohXG4gKiBCb290c3RyYXAgdjMuMy42IChodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbSlcbiAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKi9cbmlmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBqUXVlcnkpdGhyb3cgbmV3IEVycm9yKFwiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnlcIik7K2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3ZhciBiPWEuZm4uanF1ZXJ5LnNwbGl0KFwiIFwiKVswXS5zcGxpdChcIi5cIik7aWYoYlswXTwyJiZiWzFdPDl8fDE9PWJbMF0mJjk9PWJbMV0mJmJbMl08MXx8YlswXT4yKXRocm93IG5ldyBFcnJvcihcIkJvb3RzdHJhcCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5IHZlcnNpb24gMS45LjEgb3IgaGlnaGVyLCBidXQgbG93ZXIgdGhhbiB2ZXJzaW9uIDNcIil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm9vdHN0cmFwXCIpLGI9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn07Zm9yKHZhciBjIGluIGIpaWYodm9pZCAwIT09YS5zdHlsZVtjXSlyZXR1cm57ZW5kOmJbY119O3JldHVybiExfWEuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYil7dmFyIGM9ITEsZD10aGlzO2EodGhpcykub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtjPSEwfSk7dmFyIGU9ZnVuY3Rpb24oKXtjfHxhKGQpLnRyaWdnZXIoYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKX07cmV0dXJuIHNldFRpbWVvdXQoZSxiKSx0aGlzfSxhKGZ1bmN0aW9uKCl7YS5zdXBwb3J0LnRyYW5zaXRpb249YigpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiYoYS5ldmVudC5zcGVjaWFsLmJzVHJhbnNpdGlvbkVuZD17YmluZFR5cGU6YS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLGRlbGVnYXRlVHlwZTphLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsaGFuZGxlOmZ1bmN0aW9uKGIpe3JldHVybiBhKGIudGFyZ2V0KS5pcyh0aGlzKT9iLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxlPWMuZGF0YShcImJzLmFsZXJ0XCIpO2V8fGMuZGF0YShcImJzLmFsZXJ0XCIsZT1uZXcgZCh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0uY2FsbChjKX0pfXZhciBjPSdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nLGQ9ZnVuY3Rpb24oYil7YShiKS5vbihcImNsaWNrXCIsYyx0aGlzLmNsb3NlKX07ZC5WRVJTSU9OPVwiMy4zLjZcIixkLlRSQU5TSVRJT05fRFVSQVRJT049MTUwLGQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGMoKXtnLmRldGFjaCgpLnRyaWdnZXIoXCJjbG9zZWQuYnMuYWxlcnRcIikucmVtb3ZlKCl9dmFyIGU9YSh0aGlzKSxmPWUuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2Z8fChmPWUuYXR0cihcImhyZWZcIiksZj1mJiZmLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBnPWEoZik7YiYmYi5wcmV2ZW50RGVmYXVsdCgpLGcubGVuZ3RofHwoZz1lLmNsb3Nlc3QoXCIuYWxlcnRcIikpLGcudHJpZ2dlcihiPWEuRXZlbnQoXCJjbG9zZS5icy5hbGVydFwiKSksYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGcucmVtb3ZlQ2xhc3MoXCJpblwiKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmZy5oYXNDbGFzcyhcImZhZGVcIik/Zy5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixjKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pOmMoKSl9O3ZhciBlPWEuZm4uYWxlcnQ7YS5mbi5hbGVydD1iLGEuZm4uYWxlcnQuQ29uc3RydWN0b3I9ZCxhLmZuLmFsZXJ0Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5hbGVydD1lLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuYWxlcnQuZGF0YS1hcGlcIixjLGQucHJvdG90eXBlLmNsb3NlKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmJ1dHRvblwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiO2V8fGQuZGF0YShcImJzLmJ1dHRvblwiLGU9bmV3IGModGhpcyxmKSksXCJ0b2dnbGVcIj09Yj9lLnRvZ2dsZSgpOmImJmUuc2V0U3RhdGUoYil9KX12YXIgYz1mdW5jdGlvbihiLGQpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLmlzTG9hZGluZz0hMX07Yy5WRVJTSU9OPVwiMy4zLjZcIixjLkRFRkFVTFRTPXtsb2FkaW5nVGV4dDpcImxvYWRpbmcuLi5cIn0sYy5wcm90b3R5cGUuc2V0U3RhdGU9ZnVuY3Rpb24oYil7dmFyIGM9XCJkaXNhYmxlZFwiLGQ9dGhpcy4kZWxlbWVudCxlPWQuaXMoXCJpbnB1dFwiKT9cInZhbFwiOlwiaHRtbFwiLGY9ZC5kYXRhKCk7Yis9XCJUZXh0XCIsbnVsbD09Zi5yZXNldFRleHQmJmQuZGF0YShcInJlc2V0VGV4dFwiLGRbZV0oKSksc2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7ZFtlXShudWxsPT1mW2JdP3RoaXMub3B0aW9uc1tiXTpmW2JdKSxcImxvYWRpbmdUZXh0XCI9PWI/KHRoaXMuaXNMb2FkaW5nPSEwLGQuYWRkQ2xhc3MoYykuYXR0cihjLGMpKTp0aGlzLmlzTG9hZGluZyYmKHRoaXMuaXNMb2FkaW5nPSExLGQucmVtb3ZlQ2xhc3MoYykucmVtb3ZlQXR0cihjKSl9LHRoaXMpLDApfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt2YXIgYT0hMCxiPXRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScpO2lmKGIubGVuZ3RoKXt2YXIgYz10aGlzLiRlbGVtZW50LmZpbmQoXCJpbnB1dFwiKTtcInJhZGlvXCI9PWMucHJvcChcInR5cGVcIik/KGMucHJvcChcImNoZWNrZWRcIikmJihhPSExKSxiLmZpbmQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJhY3RpdmVcIikpOlwiY2hlY2tib3hcIj09Yy5wcm9wKFwidHlwZVwiKSYmKGMucHJvcChcImNoZWNrZWRcIikhPT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpJiYoYT0hMSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSksYy5wcm9wKFwiY2hlY2tlZFwiLHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIikpLGEmJmMudHJpZ2dlcihcImNoYW5nZVwiKX1lbHNlIHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtcHJlc3NlZFwiLCF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpKSx0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpfTt2YXIgZD1hLmZuLmJ1dHRvbjthLmZuLmJ1dHRvbj1iLGEuZm4uYnV0dG9uLkNvbnN0cnVjdG9yPWMsYS5mbi5idXR0b24ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmJ1dHRvbj1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuYnV0dG9uLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZV49XCJidXR0b25cIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpO2QuaGFzQ2xhc3MoXCJidG5cIil8fChkPWQuY2xvc2VzdChcIi5idG5cIikpLGIuY2FsbChkLFwidG9nZ2xlXCIpLGEoYy50YXJnZXQpLmlzKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKXx8YShjLnRhcmdldCkuaXMoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpfHxjLnByZXZlbnREZWZhdWx0KCl9KS5vbihcImZvY3VzLmJzLmJ1dHRvbi5kYXRhLWFwaSBibHVyLmJzLmJ1dHRvbi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5jbG9zZXN0KFwiLmJ0blwiKS50b2dnbGVDbGFzcyhcImZvY3VzXCIsL15mb2N1cyhpbik/JC8udGVzdChiLnR5cGUpKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuY2Fyb3VzZWxcIiksZj1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxnPVwic3RyaW5nXCI9PXR5cGVvZiBiP2I6Zi5zbGlkZTtlfHxkLmRhdGEoXCJicy5jYXJvdXNlbFwiLGU9bmV3IGModGhpcyxmKSksXCJudW1iZXJcIj09dHlwZW9mIGI/ZS50byhiKTpnP2VbZ10oKTpmLmludGVydmFsJiZlLnBhdXNlKCkuY3ljbGUoKX0pfXZhciBjPWZ1bmN0aW9uKGIsYyl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuJGluZGljYXRvcnM9dGhpcy4kZWxlbWVudC5maW5kKFwiLmNhcm91c2VsLWluZGljYXRvcnNcIiksdGhpcy5vcHRpb25zPWMsdGhpcy5wYXVzZWQ9bnVsbCx0aGlzLnNsaWRpbmc9bnVsbCx0aGlzLmludGVydmFsPW51bGwsdGhpcy4kYWN0aXZlPW51bGwsdGhpcy4kaXRlbXM9bnVsbCx0aGlzLm9wdGlvbnMua2V5Ym9hcmQmJnRoaXMuJGVsZW1lbnQub24oXCJrZXlkb3duLmJzLmNhcm91c2VsXCIsYS5wcm94eSh0aGlzLmtleWRvd24sdGhpcykpLFwiaG92ZXJcIj09dGhpcy5vcHRpb25zLnBhdXNlJiYhKFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpJiZ0aGlzLiRlbGVtZW50Lm9uKFwibW91c2VlbnRlci5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5wYXVzZSx0aGlzKSkub24oXCJtb3VzZWxlYXZlLmJzLmNhcm91c2VsXCIsYS5wcm94eSh0aGlzLmN5Y2xlLHRoaXMpKX07Yy5WRVJTSU9OPVwiMy4zLjZcIixjLlRSQU5TSVRJT05fRFVSQVRJT049NjAwLGMuREVGQVVMVFM9e2ludGVydmFsOjVlMyxwYXVzZTpcImhvdmVyXCIsd3JhcDohMCxrZXlib2FyZDohMH0sYy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihhKXtpZighL2lucHV0fHRleHRhcmVhL2kudGVzdChhLnRhcmdldC50YWdOYW1lKSl7c3dpdGNoKGEud2hpY2gpe2Nhc2UgMzc6dGhpcy5wcmV2KCk7YnJlYWs7Y2FzZSAzOTp0aGlzLm5leHQoKTticmVhaztkZWZhdWx0OnJldHVybn1hLnByZXZlbnREZWZhdWx0KCl9fSxjLnByb3RvdHlwZS5jeWNsZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSExKSx0aGlzLmludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCYmIXRoaXMucGF1c2VkJiYodGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbChhLnByb3h5KHRoaXMubmV4dCx0aGlzKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKSx0aGlzfSxjLnByb3RvdHlwZS5nZXRJdGVtSW5kZXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJGl0ZW1zPWEucGFyZW50KCkuY2hpbGRyZW4oXCIuaXRlbVwiKSx0aGlzLiRpdGVtcy5pbmRleChhfHx0aGlzLiRhY3RpdmUpfSxjLnByb3RvdHlwZS5nZXRJdGVtRm9yRGlyZWN0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRJdGVtSW5kZXgoYiksZD1cInByZXZcIj09YSYmMD09PWN8fFwibmV4dFwiPT1hJiZjPT10aGlzLiRpdGVtcy5sZW5ndGgtMTtpZihkJiYhdGhpcy5vcHRpb25zLndyYXApcmV0dXJuIGI7dmFyIGU9XCJwcmV2XCI9PWE/LTE6MSxmPShjK2UpJXRoaXMuJGl0ZW1zLmxlbmd0aDtyZXR1cm4gdGhpcy4kaXRlbXMuZXEoZil9LGMucHJvdG90eXBlLnRvPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz10aGlzLmdldEl0ZW1JbmRleCh0aGlzLiRhY3RpdmU9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpKTtyZXR1cm4gYT50aGlzLiRpdGVtcy5sZW5ndGgtMXx8MD5hP3ZvaWQgMDp0aGlzLnNsaWRpbmc/dGhpcy4kZWxlbWVudC5vbmUoXCJzbGlkLmJzLmNhcm91c2VsXCIsZnVuY3Rpb24oKXtiLnRvKGEpfSk6Yz09YT90aGlzLnBhdXNlKCkuY3ljbGUoKTp0aGlzLnNsaWRlKGE+Yz9cIm5leHRcIjpcInByZXZcIix0aGlzLiRpdGVtcy5lcShhKSl9LGMucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKGIpe3JldHVybiBifHwodGhpcy5wYXVzZWQ9ITApLHRoaXMuJGVsZW1lbnQuZmluZChcIi5uZXh0LCAucHJldlwiKS5sZW5ndGgmJmEuc3VwcG9ydC50cmFuc2l0aW9uJiYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCksdGhpcy5jeWNsZSghMCkpLHRoaXMuaW50ZXJ2YWw9Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzfSxjLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcIm5leHRcIil9LGMucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zbGlkaW5nP3ZvaWQgMDp0aGlzLnNsaWRlKFwicHJldlwiKX0sYy5wcm90b3R5cGUuc2xpZGU9ZnVuY3Rpb24oYixkKXt2YXIgZT10aGlzLiRlbGVtZW50LmZpbmQoXCIuaXRlbS5hY3RpdmVcIiksZj1kfHx0aGlzLmdldEl0ZW1Gb3JEaXJlY3Rpb24oYixlKSxnPXRoaXMuaW50ZXJ2YWwsaD1cIm5leHRcIj09Yj9cImxlZnRcIjpcInJpZ2h0XCIsaT10aGlzO2lmKGYuaGFzQ2xhc3MoXCJhY3RpdmVcIikpcmV0dXJuIHRoaXMuc2xpZGluZz0hMTt2YXIgaj1mWzBdLGs9YS5FdmVudChcInNsaWRlLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246aH0pO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihrKSwhay5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYodGhpcy5zbGlkaW5nPSEwLGcmJnRoaXMucGF1c2UoKSx0aGlzLiRpbmRpY2F0b3JzLmxlbmd0aCl7dGhpcy4kaW5kaWNhdG9ycy5maW5kKFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTt2YXIgbD1hKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleChmKV0pO2wmJmwuYWRkQ2xhc3MoXCJhY3RpdmVcIil9dmFyIG09YS5FdmVudChcInNsaWQuYnMuY2Fyb3VzZWxcIix7cmVsYXRlZFRhcmdldDpqLGRpcmVjdGlvbjpofSk7cmV0dXJuIGEuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwic2xpZGVcIik/KGYuYWRkQ2xhc3MoYiksZlswXS5vZmZzZXRXaWR0aCxlLmFkZENsYXNzKGgpLGYuYWRkQ2xhc3MoaCksZS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2YucmVtb3ZlQ2xhc3MoW2IsaF0uam9pbihcIiBcIikpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGUucmVtb3ZlQ2xhc3MoW1wiYWN0aXZlXCIsaF0uam9pbihcIiBcIikpLGkuc2xpZGluZz0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS4kZWxlbWVudC50cmlnZ2VyKG0pfSwwKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTikpOihlLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGYuYWRkQ2xhc3MoXCJhY3RpdmVcIiksdGhpcy5zbGlkaW5nPSExLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihtKSksZyYmdGhpcy5jeWNsZSgpLHRoaXN9fTt2YXIgZD1hLmZuLmNhcm91c2VsO2EuZm4uY2Fyb3VzZWw9YixhLmZuLmNhcm91c2VsLkNvbnN0cnVjdG9yPWMsYS5mbi5jYXJvdXNlbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uY2Fyb3VzZWw9ZCx0aGlzfTt2YXIgZT1mdW5jdGlvbihjKXt2YXIgZCxlPWEodGhpcyksZj1hKGUuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHwoZD1lLmF0dHIoXCJocmVmXCIpKSYmZC5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpKTtpZihmLmhhc0NsYXNzKFwiY2Fyb3VzZWxcIikpe3ZhciBnPWEuZXh0ZW5kKHt9LGYuZGF0YSgpLGUuZGF0YSgpKSxoPWUuYXR0cihcImRhdGEtc2xpZGUtdG9cIik7aCYmKGcuaW50ZXJ2YWw9ITEpLGIuY2FsbChmLGcpLGgmJmYuZGF0YShcImJzLmNhcm91c2VsXCIpLnRvKGgpLGMucHJldmVudERlZmF1bHQoKX19O2EoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGlcIixcIltkYXRhLXNsaWRlXVwiLGUpLm9uKFwiY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGlcIixcIltkYXRhLXNsaWRlLXRvXVwiLGUpLGEod2luZG93KS5vbihcImxvYWRcIixmdW5jdGlvbigpe2EoJ1tkYXRhLXJpZGU9XCJjYXJvdXNlbFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpO2IuY2FsbChjLGMuZGF0YSgpKX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7dmFyIGMsZD1iLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8KGM9Yi5hdHRyKFwiaHJlZlwiKSkmJmMucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKTtyZXR1cm4gYShkKX1mdW5jdGlvbiBjKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGU9Yy5kYXRhKFwiYnMuY29sbGFwc2VcIiksZj1hLmV4dGVuZCh7fSxkLkRFRkFVTFRTLGMuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKTshZSYmZi50b2dnbGUmJi9zaG93fGhpZGUvLnRlc3QoYikmJihmLnRvZ2dsZT0hMSksZXx8Yy5kYXRhKFwiYnMuY29sbGFwc2VcIixlPW5ldyBkKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgZD1mdW5jdGlvbihiLGMpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sZC5ERUZBVUxUUyxjKSx0aGlzLiR0cmlnZ2VyPWEoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2hyZWY9XCIjJytiLmlkKydcIl0sW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS10YXJnZXQ9XCIjJytiLmlkKydcIl0nKSx0aGlzLnRyYW5zaXRpb25pbmc9bnVsbCx0aGlzLm9wdGlvbnMucGFyZW50P3RoaXMuJHBhcmVudD10aGlzLmdldFBhcmVudCgpOnRoaXMuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuJGVsZW1lbnQsdGhpcy4kdHJpZ2dlciksdGhpcy5vcHRpb25zLnRvZ2dsZSYmdGhpcy50b2dnbGUoKX07ZC5WRVJTSU9OPVwiMy4zLjZcIixkLlRSQU5TSVRJT05fRFVSQVRJT049MzUwLGQuREVGQVVMVFM9e3RvZ2dsZTohMH0sZC5wcm90b3R5cGUuZGltZW5zaW9uPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcIndpZHRoXCIpO3JldHVybiBhP1wid2lkdGhcIjpcImhlaWdodFwifSxkLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKSl7dmFyIGIsZT10aGlzLiRwYXJlbnQmJnRoaXMuJHBhcmVudC5jaGlsZHJlbihcIi5wYW5lbFwiKS5jaGlsZHJlbihcIi5pbiwgLmNvbGxhcHNpbmdcIik7aWYoIShlJiZlLmxlbmd0aCYmKGI9ZS5kYXRhKFwiYnMuY29sbGFwc2VcIiksYiYmYi50cmFuc2l0aW9uaW5nKSkpe3ZhciBmPWEuRXZlbnQoXCJzaG93LmJzLmNvbGxhcHNlXCIpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihmKSwhZi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7ZSYmZS5sZW5ndGgmJihjLmNhbGwoZSxcImhpZGVcIiksYnx8ZS5kYXRhKFwiYnMuY29sbGFwc2VcIixudWxsKSk7dmFyIGc9dGhpcy5kaW1lbnNpb24oKTt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIikuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpW2ddKDApLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMuJHRyaWdnZXIucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZWRcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIGg9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlIGluXCIpW2ddKFwiXCIpLHRoaXMudHJhbnNpdGlvbmluZz0wLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcInNob3duLmJzLmNvbGxhcHNlXCIpfTtpZighYS5zdXBwb3J0LnRyYW5zaXRpb24pcmV0dXJuIGguY2FsbCh0aGlzKTt2YXIgaT1hLmNhbWVsQ2FzZShbXCJzY3JvbGxcIixnXS5qb2luKFwiLVwiKSk7dGhpcy4kZWxlbWVudC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixhLnByb3h5KGgsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGQuVFJBTlNJVElPTl9EVVJBVElPTilbZ10odGhpcy4kZWxlbWVudFswXVtpXSl9fX19LGQucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIikpe3ZhciBiPWEuRXZlbnQoXCJoaWRlLmJzLmNvbGxhcHNlXCIpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihiKSwhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGM9dGhpcy5kaW1lbnNpb24oKTt0aGlzLiRlbGVtZW50W2NdKHRoaXMuJGVsZW1lbnRbY10oKSlbMF0ub2Zmc2V0SGVpZ2h0LHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2UgaW5cIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksdGhpcy4kdHJpZ2dlci5hZGRDbGFzcyhcImNvbGxhcHNlZFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSx0aGlzLnRyYW5zaXRpb25pbmc9MTt2YXIgZT1mdW5jdGlvbigpe3RoaXMudHJhbnNpdGlvbmluZz0wLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLmFkZENsYXNzKFwiY29sbGFwc2VcIikudHJpZ2dlcihcImhpZGRlbi5icy5jb2xsYXBzZVwiKX07cmV0dXJuIGEuc3VwcG9ydC50cmFuc2l0aW9uP3ZvaWQgdGhpcy4kZWxlbWVudFtjXSgwKS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixhLnByb3h5KGUsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGQuVFJBTlNJVElPTl9EVVJBVElPTik6ZS5jYWxsKHRoaXMpfX19LGQucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbigpe3RoaXNbdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpP1wiaGlkZVwiOlwic2hvd1wiXSgpfSxkLnByb3RvdHlwZS5nZXRQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzLm9wdGlvbnMucGFyZW50KS5maW5kKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicrdGhpcy5vcHRpb25zLnBhcmVudCsnXCJdJykuZWFjaChhLnByb3h5KGZ1bmN0aW9uKGMsZCl7dmFyIGU9YShkKTt0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhiKGUpLGUpfSx0aGlzKSkuZW5kKCl9LGQucHJvdG90eXBlLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcz1mdW5jdGlvbihhLGIpe3ZhciBjPWEuaGFzQ2xhc3MoXCJpblwiKTthLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsYyksYi50b2dnbGVDbGFzcyhcImNvbGxhcHNlZFwiLCFjKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGMpfTt2YXIgZT1hLmZuLmNvbGxhcHNlO2EuZm4uY29sbGFwc2U9YyxhLmZuLmNvbGxhcHNlLkNvbnN0cnVjdG9yPWQsYS5mbi5jb2xsYXBzZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uY29sbGFwc2U9ZSx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmNvbGxhcHNlLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdJyxmdW5jdGlvbihkKXt2YXIgZT1hKHRoaXMpO2UuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHxkLnByZXZlbnREZWZhdWx0KCk7dmFyIGY9YihlKSxnPWYuZGF0YShcImJzLmNvbGxhcHNlXCIpLGg9Zz9cInRvZ2dsZVwiOmUuZGF0YSgpO2MuY2FsbChmLGgpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7dmFyIGM9Yi5hdHRyKFwiZGF0YS10YXJnZXRcIik7Y3x8KGM9Yi5hdHRyKFwiaHJlZlwiKSxjPWMmJi8jW0EtWmEtel0vLnRlc3QoYykmJmMucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLyxcIlwiKSk7dmFyIGQ9YyYmYShjKTtyZXR1cm4gZCYmZC5sZW5ndGg/ZDpiLnBhcmVudCgpfWZ1bmN0aW9uIGMoYyl7YyYmMz09PWMud2hpY2h8fChhKGUpLnJlbW92ZSgpLGEoZikuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1iKGQpLGY9e3JlbGF0ZWRUYXJnZXQ6dGhpc307ZS5oYXNDbGFzcyhcIm9wZW5cIikmJihjJiZcImNsaWNrXCI9PWMudHlwZSYmL2lucHV0fHRleHRhcmVhL2kudGVzdChjLnRhcmdldC50YWdOYW1lKSYmYS5jb250YWlucyhlWzBdLGMudGFyZ2V0KXx8KGUudHJpZ2dlcihjPWEuRXZlbnQoXCJoaWRlLmJzLmRyb3Bkb3duXCIsZikpLGMuaXNEZWZhdWx0UHJldmVudGVkKCl8fChkLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJmYWxzZVwiKSxlLnJlbW92ZUNsYXNzKFwib3BlblwiKS50cmlnZ2VyKGEuRXZlbnQoXCJoaWRkZW4uYnMuZHJvcGRvd25cIixmKSkpKSl9KSl9ZnVuY3Rpb24gZChiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWMuZGF0YShcImJzLmRyb3Bkb3duXCIpO2R8fGMuZGF0YShcImJzLmRyb3Bkb3duXCIsZD1uZXcgZyh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmRbYl0uY2FsbChjKX0pfXZhciBlPVwiLmRyb3Bkb3duLWJhY2tkcm9wXCIsZj0nW2RhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIl0nLGc9ZnVuY3Rpb24oYil7YShiKS5vbihcImNsaWNrLmJzLmRyb3Bkb3duXCIsdGhpcy50b2dnbGUpfTtnLlZFUlNJT049XCIzLjMuNlwiLGcucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihkKXt2YXIgZT1hKHRoaXMpO2lmKCFlLmlzKFwiLmRpc2FibGVkLCA6ZGlzYWJsZWRcIikpe3ZhciBmPWIoZSksZz1mLmhhc0NsYXNzKFwib3BlblwiKTtpZihjKCksIWcpe1wib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJiFmLmNsb3Nlc3QoXCIubmF2YmFyLW5hdlwiKS5sZW5ndGgmJmEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuYWRkQ2xhc3MoXCJkcm9wZG93bi1iYWNrZHJvcFwiKS5pbnNlcnRBZnRlcihhKHRoaXMpKS5vbihcImNsaWNrXCIsYyk7dmFyIGg9e3JlbGF0ZWRUYXJnZXQ6dGhpc307aWYoZi50cmlnZ2VyKGQ9YS5FdmVudChcInNob3cuYnMuZHJvcGRvd25cIixoKSksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47ZS50cmlnZ2VyKFwiZm9jdXNcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIixcInRydWVcIiksZi50b2dnbGVDbGFzcyhcIm9wZW5cIikudHJpZ2dlcihhLkV2ZW50KFwic2hvd24uYnMuZHJvcGRvd25cIixoKSl9cmV0dXJuITF9fSxnLnByb3RvdHlwZS5rZXlkb3duPWZ1bmN0aW9uKGMpe2lmKC8oMzh8NDB8Mjd8MzIpLy50ZXN0KGMud2hpY2gpJiYhL2lucHV0fHRleHRhcmVhL2kudGVzdChjLnRhcmdldC50YWdOYW1lKSl7dmFyIGQ9YSh0aGlzKTtpZihjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSwhZC5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgZT1iKGQpLGc9ZS5oYXNDbGFzcyhcIm9wZW5cIik7aWYoIWcmJjI3IT1jLndoaWNofHxnJiYyNz09Yy53aGljaClyZXR1cm4gMjc9PWMud2hpY2gmJmUuZmluZChmKS50cmlnZ2VyKFwiZm9jdXNcIiksZC50cmlnZ2VyKFwiY2xpY2tcIik7dmFyIGg9XCIgbGk6bm90KC5kaXNhYmxlZCk6dmlzaWJsZSBhXCIsaT1lLmZpbmQoXCIuZHJvcGRvd24tbWVudVwiK2gpO2lmKGkubGVuZ3RoKXt2YXIgaj1pLmluZGV4KGMudGFyZ2V0KTszOD09Yy53aGljaCYmaj4wJiZqLS0sNDA9PWMud2hpY2gmJmo8aS5sZW5ndGgtMSYmaisrLH5qfHwoaj0wKSxpLmVxKGopLnRyaWdnZXIoXCJmb2N1c1wiKX19fX07dmFyIGg9YS5mbi5kcm9wZG93bjthLmZuLmRyb3Bkb3duPWQsYS5mbi5kcm9wZG93bi5Db25zdHJ1Y3Rvcj1nLGEuZm4uZHJvcGRvd24ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmRyb3Bkb3duPWgsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaVwiLGMpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixcIi5kcm9wZG93biBmb3JtXCIsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixmLGcucHJvdG90eXBlLnRvZ2dsZSkub24oXCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsZixnLnByb3RvdHlwZS5rZXlkb3duKS5vbihcImtleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGlcIixcIi5kcm9wZG93bi1tZW51XCIsZy5wcm90b3R5cGUua2V5ZG93bil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYixkKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKSxmPWUuZGF0YShcImJzLm1vZGFsXCIpLGc9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxlLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYik7Znx8ZS5kYXRhKFwiYnMubW9kYWxcIixmPW5ldyBjKHRoaXMsZykpLFwic3RyaW5nXCI9PXR5cGVvZiBiP2ZbYl0oZCk6Zy5zaG93JiZmLnNob3coZCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMub3B0aW9ucz1jLHRoaXMuJGJvZHk9YShkb2N1bWVudC5ib2R5KSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy4kZGlhbG9nPXRoaXMuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1kaWFsb2dcIiksdGhpcy4kYmFja2Ryb3A9bnVsbCx0aGlzLmlzU2hvd249bnVsbCx0aGlzLm9yaWdpbmFsQm9keVBhZD1udWxsLHRoaXMuc2Nyb2xsYmFyV2lkdGg9MCx0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITEsdGhpcy5vcHRpb25zLnJlbW90ZSYmdGhpcy4kZWxlbWVudC5maW5kKFwiLm1vZGFsLWNvbnRlbnRcIikubG9hZCh0aGlzLm9wdGlvbnMucmVtb3RlLGEucHJveHkoZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJsb2FkZWQuYnMubW9kYWxcIil9LHRoaXMpKX07Yy5WRVJTSU9OPVwiMy4zLjZcIixjLlRSQU5TSVRJT05fRFVSQVRJT049MzAwLGMuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5ERUZBVUxUUz17YmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITAsc2hvdzohMH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzU2hvd24/dGhpcy5oaWRlKCk6dGhpcy5zaG93KGEpfSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsZT1hLkV2ZW50KFwic2hvdy5icy5tb2RhbFwiLHtyZWxhdGVkVGFyZ2V0OmJ9KTt0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSksdGhpcy5pc1Nob3dufHxlLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwodGhpcy5pc1Nob3duPSEwLHRoaXMuY2hlY2tTY3JvbGxiYXIoKSx0aGlzLnNldFNjcm9sbGJhcigpLHRoaXMuJGJvZHkuYWRkQ2xhc3MoXCJtb2RhbC1vcGVuXCIpLHRoaXMuZXNjYXBlKCksdGhpcy5yZXNpemUoKSx0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2suZGlzbWlzcy5icy5tb2RhbFwiLCdbZGF0YS1kaXNtaXNzPVwibW9kYWxcIl0nLGEucHJveHkodGhpcy5oaWRlLHRoaXMpKSx0aGlzLiRkaWFsb2cub24oXCJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbFwiLGZ1bmN0aW9uKCl7ZC4kZWxlbWVudC5vbmUoXCJtb3VzZXVwLmRpc21pc3MuYnMubW9kYWxcIixmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5pcyhkLiRlbGVtZW50KSYmKGQuaWdub3JlQmFja2Ryb3BDbGljaz0hMCl9KX0pLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXt2YXIgZT1hLnN1cHBvcnQudHJhbnNpdGlvbiYmZC4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik7ZC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGh8fGQuJGVsZW1lbnQuYXBwZW5kVG8oZC4kYm9keSksZC4kZWxlbWVudC5zaG93KCkuc2Nyb2xsVG9wKDApLGQuYWRqdXN0RGlhbG9nKCksZSYmZC4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCxkLiRlbGVtZW50LmFkZENsYXNzKFwiaW5cIiksZC5lbmZvcmNlRm9jdXMoKTt2YXIgZj1hLkV2ZW50KFwic2hvd24uYnMubW9kYWxcIix7cmVsYXRlZFRhcmdldDpifSk7ZT9kLiRkaWFsb2cub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtkLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKS50cmlnZ2VyKGYpfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpkLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKS50cmlnZ2VyKGYpfSkpfSxjLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGIpe2ImJmIucHJldmVudERlZmF1bHQoKSxiPWEuRXZlbnQoXCJoaWRlLmJzLm1vZGFsXCIpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihiKSx0aGlzLmlzU2hvd24mJiFiLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYodGhpcy5pc1Nob3duPSExLHRoaXMuZXNjYXBlKCksdGhpcy5yZXNpemUoKSxhKGRvY3VtZW50KS5vZmYoXCJmb2N1c2luLmJzLm1vZGFsXCIpLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJpblwiKS5vZmYoXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIpLm9mZihcIm1vdXNldXAuZGlzbWlzcy5icy5tb2RhbFwiKSx0aGlzLiRkaWFsb2cub2ZmKFwibW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWxcIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP3RoaXMuJGVsZW1lbnQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eSh0aGlzLmhpZGVNb2RhbCx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTp0aGlzLmhpZGVNb2RhbCgpKX0sYy5wcm90b3R5cGUuZW5mb3JjZUZvY3VzPWZ1bmN0aW9uKCl7YShkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5icy5tb2RhbFwiKS5vbihcImZvY3VzaW4uYnMubW9kYWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuJGVsZW1lbnRbMF09PT1hLnRhcmdldHx8dGhpcy4kZWxlbWVudC5oYXMoYS50YXJnZXQpLmxlbmd0aHx8dGhpcy4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIil9LHRoaXMpKX0sYy5wcm90b3R5cGUuZXNjYXBlPWZ1bmN0aW9uKCl7dGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMua2V5Ym9hcmQ/dGhpcy4kZWxlbWVudC5vbihcImtleWRvd24uZGlzbWlzcy5icy5tb2RhbFwiLGEucHJveHkoZnVuY3Rpb24oYSl7Mjc9PWEud2hpY2gmJnRoaXMuaGlkZSgpfSx0aGlzKSk6dGhpcy5pc1Nob3dufHx0aGlzLiRlbGVtZW50Lm9mZihcImtleWRvd24uZGlzbWlzcy5icy5tb2RhbFwiKX0sYy5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5pc1Nob3duP2Eod2luZG93KS5vbihcInJlc2l6ZS5icy5tb2RhbFwiLGEucHJveHkodGhpcy5oYW5kbGVVcGRhdGUsdGhpcykpOmEod2luZG93KS5vZmYoXCJyZXNpemUuYnMubW9kYWxcIil9LGMucHJvdG90eXBlLmhpZGVNb2RhbD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy4kZWxlbWVudC5oaWRlKCksdGhpcy5iYWNrZHJvcChmdW5jdGlvbigpe2EuJGJvZHkucmVtb3ZlQ2xhc3MoXCJtb2RhbC1vcGVuXCIpLGEucmVzZXRBZGp1c3RtZW50cygpLGEucmVzZXRTY3JvbGxiYXIoKSxhLiRlbGVtZW50LnRyaWdnZXIoXCJoaWRkZW4uYnMubW9kYWxcIil9KX0sYy5wcm90b3R5cGUucmVtb3ZlQmFja2Ryb3A9ZnVuY3Rpb24oKXt0aGlzLiRiYWNrZHJvcCYmdGhpcy4kYmFja2Ryb3AucmVtb3ZlKCksdGhpcy4kYmFja2Ryb3A9bnVsbH0sYy5wcm90b3R5cGUuYmFja2Ryb3A9ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxlPXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP1wiZmFkZVwiOlwiXCI7aWYodGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMuYmFja2Ryb3Ape3ZhciBmPWEuc3VwcG9ydC50cmFuc2l0aW9uJiZlO2lmKHRoaXMuJGJhY2tkcm9wPWEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuYWRkQ2xhc3MoXCJtb2RhbC1iYWNrZHJvcCBcIitlKS5hcHBlbmRUbyh0aGlzLiRib2R5KSx0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2suZGlzbWlzcy5icy5tb2RhbFwiLGEucHJveHkoZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz92b2lkKHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz0hMSk6dm9pZChhLnRhcmdldD09PWEuY3VycmVudFRhcmdldCYmKFwic3RhdGljXCI9PXRoaXMub3B0aW9ucy5iYWNrZHJvcD90aGlzLiRlbGVtZW50WzBdLmZvY3VzKCk6dGhpcy5oaWRlKCkpKX0sdGhpcykpLGYmJnRoaXMuJGJhY2tkcm9wWzBdLm9mZnNldFdpZHRoLHRoaXMuJGJhY2tkcm9wLmFkZENsYXNzKFwiaW5cIiksIWIpcmV0dXJuO2Y/dGhpcy4kYmFja2Ryb3Aub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYikuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTpiKCl9ZWxzZSBpZighdGhpcy5pc1Nob3duJiZ0aGlzLiRiYWNrZHJvcCl7dGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoXCJpblwiKTt2YXIgZz1mdW5jdGlvbigpe2QucmVtb3ZlQmFja2Ryb3AoKSxiJiZiKCl9O2Euc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLiRiYWNrZHJvcC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixnKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pOmcoKX1lbHNlIGImJmIoKX0sYy5wcm90b3R5cGUuaGFuZGxlVXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5hZGp1c3REaWFsb2coKX0sYy5wcm90b3R5cGUuYWRqdXN0RGlhbG9nPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudFswXS5zY3JvbGxIZWlnaHQ+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDt0aGlzLiRlbGVtZW50LmNzcyh7cGFkZGluZ0xlZnQ6IXRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJmE/dGhpcy5zY3JvbGxiYXJXaWR0aDpcIlwiLHBhZGRpbmdSaWdodDp0aGlzLmJvZHlJc092ZXJmbG93aW5nJiYhYT90aGlzLnNjcm9sbGJhcldpZHRoOlwiXCJ9KX0sYy5wcm90b3R5cGUucmVzZXRBZGp1c3RtZW50cz1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQuY3NzKHtwYWRkaW5nTGVmdDpcIlwiLHBhZGRpbmdSaWdodDpcIlwifSl9LGMucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9d2luZG93LmlubmVyV2lkdGg7aWYoIWEpe3ZhciBiPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthPWIucmlnaHQtTWF0aC5hYnMoYi5sZWZ0KX10aGlzLmJvZHlJc092ZXJmbG93aW5nPWRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg8YSx0aGlzLnNjcm9sbGJhcldpZHRoPXRoaXMubWVhc3VyZVNjcm9sbGJhcigpfSxjLnByb3RvdHlwZS5zZXRTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgYT1wYXJzZUludCh0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIil8fDAsMTApO3RoaXMub3JpZ2luYWxCb2R5UGFkPWRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0fHxcIlwiLHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJnRoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiLGErdGhpcy5zY3JvbGxiYXJXaWR0aCl9LGMucHJvdG90eXBlLnJlc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsdGhpcy5vcmlnaW5hbEJvZHlQYWQpfSxjLnByb3RvdHlwZS5tZWFzdXJlU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLmNsYXNzTmFtZT1cIm1vZGFsLXNjcm9sbGJhci1tZWFzdXJlXCIsdGhpcy4kYm9keS5hcHBlbmQoYSk7dmFyIGI9YS5vZmZzZXRXaWR0aC1hLmNsaWVudFdpZHRoO3JldHVybiB0aGlzLiRib2R5WzBdLnJlbW92ZUNoaWxkKGEpLGJ9O3ZhciBkPWEuZm4ubW9kYWw7YS5mbi5tb2RhbD1iLGEuZm4ubW9kYWwuQ29uc3RydWN0b3I9YyxhLmZuLm1vZGFsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5tb2RhbD1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMubW9kYWwuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyksZT1kLmF0dHIoXCJocmVmXCIpLGY9YShkLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8ZSYmZS5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpKSxnPWYuZGF0YShcImJzLm1vZGFsXCIpP1widG9nZ2xlXCI6YS5leHRlbmQoe3JlbW90ZTohLyMvLnRlc3QoZSkmJmV9LGYuZGF0YSgpLGQuZGF0YSgpKTtkLmlzKFwiYVwiKSYmYy5wcmV2ZW50RGVmYXVsdCgpLGYub25lKFwic2hvdy5icy5tb2RhbFwiLGZ1bmN0aW9uKGEpe2EuaXNEZWZhdWx0UHJldmVudGVkKCl8fGYub25lKFwiaGlkZGVuLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtkLmlzKFwiOnZpc2libGVcIikmJmQudHJpZ2dlcihcImZvY3VzXCIpfSl9KSxiLmNhbGwoZixnLHRoaXMpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy50b29sdGlwXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7KGV8fCEvZGVzdHJveXxoaWRlLy50ZXN0KGIpKSYmKGV8fGQuZGF0YShcImJzLnRvb2x0aXBcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLnR5cGU9bnVsbCx0aGlzLm9wdGlvbnM9bnVsbCx0aGlzLmVuYWJsZWQ9bnVsbCx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzLiRlbGVtZW50PW51bGwsdGhpcy5pblN0YXRlPW51bGwsdGhpcy5pbml0KFwidG9vbHRpcFwiLGEsYil9O2MuVkVSU0lPTj1cIjMuMy42XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxjLkRFRkFVTFRTPXthbmltYXRpb246ITAscGxhY2VtZW50OlwidG9wXCIsc2VsZWN0b3I6ITEsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOlwiaG92ZXIgZm9jdXNcIix0aXRsZTpcIlwiLGRlbGF5OjAsaHRtbDohMSxjb250YWluZXI6ITEsdmlld3BvcnQ6e3NlbGVjdG9yOlwiYm9keVwiLHBhZGRpbmc6MH19LGMucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oYixjLGQpe2lmKHRoaXMuZW5hYmxlZD0hMCx0aGlzLnR5cGU9Yix0aGlzLiRlbGVtZW50PWEoYyksdGhpcy5vcHRpb25zPXRoaXMuZ2V0T3B0aW9ucyhkKSx0aGlzLiR2aWV3cG9ydD10aGlzLm9wdGlvbnMudmlld3BvcnQmJmEoYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy52aWV3cG9ydCk/dGhpcy5vcHRpb25zLnZpZXdwb3J0LmNhbGwodGhpcyx0aGlzLiRlbGVtZW50KTp0aGlzLm9wdGlvbnMudmlld3BvcnQuc2VsZWN0b3J8fHRoaXMub3B0aW9ucy52aWV3cG9ydCksdGhpcy5pblN0YXRlPXtjbGljazohMSxob3ZlcjohMSxmb2N1czohMX0sdGhpcy4kZWxlbWVudFswXWluc3RhbmNlb2YgZG9jdW1lbnQuY29uc3RydWN0b3ImJiF0aGlzLm9wdGlvbnMuc2VsZWN0b3IpdGhyb3cgbmV3IEVycm9yKFwiYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFsaXppbmcgXCIrdGhpcy50eXBlK1wiIG9uIHRoZSB3aW5kb3cuZG9jdW1lbnQgb2JqZWN0IVwiKTtmb3IodmFyIGU9dGhpcy5vcHRpb25zLnRyaWdnZXIuc3BsaXQoXCIgXCIpLGY9ZS5sZW5ndGg7Zi0tOyl7dmFyIGc9ZVtmXTtpZihcImNsaWNrXCI9PWcpdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLnRvZ2dsZSx0aGlzKSk7ZWxzZSBpZihcIm1hbnVhbFwiIT1nKXt2YXIgaD1cImhvdmVyXCI9PWc/XCJtb3VzZWVudGVyXCI6XCJmb2N1c2luXCIsaT1cImhvdmVyXCI9PWc/XCJtb3VzZWxlYXZlXCI6XCJmb2N1c291dFwiO3RoaXMuJGVsZW1lbnQub24oaCtcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy5lbnRlcix0aGlzKSksdGhpcy4kZWxlbWVudC5vbihpK1wiLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmxlYXZlLHRoaXMpKX19dGhpcy5vcHRpb25zLnNlbGVjdG9yP3RoaXMuX29wdGlvbnM9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt0cmlnZ2VyOlwibWFudWFsXCIsc2VsZWN0b3I6XCJcIn0pOnRoaXMuZml4VGl0bGUoKX0sYy5wcm90b3R5cGUuZ2V0RGVmYXVsdHM9ZnVuY3Rpb24oKXtyZXR1cm4gYy5ERUZBVUxUU30sYy5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbihiKXtyZXR1cm4gYj1hLmV4dGVuZCh7fSx0aGlzLmdldERlZmF1bHRzKCksdGhpcy4kZWxlbWVudC5kYXRhKCksYiksYi5kZWxheSYmXCJudW1iZXJcIj09dHlwZW9mIGIuZGVsYXkmJihiLmRlbGF5PXtzaG93OmIuZGVsYXksaGlkZTpiLmRlbGF5fSksYn0sYy5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGI9e30sYz10aGlzLmdldERlZmF1bHRzKCk7cmV0dXJuIHRoaXMuX29wdGlvbnMmJmEuZWFjaCh0aGlzLl9vcHRpb25zLGZ1bmN0aW9uKGEsZCl7Y1thXSE9ZCYmKGJbYV09ZCl9KSxifSxjLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSxiIGluc3RhbmNlb2YgYS5FdmVudCYmKGMuaW5TdGF0ZVtcImZvY3VzaW5cIj09Yi50eXBlP1wiZm9jdXNcIjpcImhvdmVyXCJdPSEwKSxjLnRpcCgpLmhhc0NsYXNzKFwiaW5cIil8fFwiaW5cIj09Yy5ob3ZlclN0YXRlP3ZvaWQoYy5ob3ZlclN0YXRlPVwiaW5cIik6KGNsZWFyVGltZW91dChjLnRpbWVvdXQpLGMuaG92ZXJTdGF0ZT1cImluXCIsYy5vcHRpb25zLmRlbGF5JiZjLm9wdGlvbnMuZGVsYXkuc2hvdz92b2lkKGMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJpblwiPT1jLmhvdmVyU3RhdGUmJmMuc2hvdygpfSxjLm9wdGlvbnMuZGVsYXkuc2hvdykpOmMuc2hvdygpKX0sYy5wcm90b3R5cGUuaXNJblN0YXRlVHJ1ZT1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmluU3RhdGUpaWYodGhpcy5pblN0YXRlW2FdKXJldHVybiEwO3JldHVybiExfSxjLnByb3RvdHlwZS5sZWF2ZT1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSxiIGluc3RhbmNlb2YgYS5FdmVudCYmKGMuaW5TdGF0ZVtcImZvY3Vzb3V0XCI9PWIudHlwZT9cImZvY3VzXCI6XCJob3ZlclwiXT0hMSksYy5pc0luU3RhdGVUcnVlKCk/dm9pZCAwOihjbGVhclRpbWVvdXQoYy50aW1lb3V0KSxjLmhvdmVyU3RhdGU9XCJvdXRcIixjLm9wdGlvbnMuZGVsYXkmJmMub3B0aW9ucy5kZWxheS5oaWRlP3ZvaWQoYy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtcIm91dFwiPT1jLmhvdmVyU3RhdGUmJmMuaGlkZSgpfSxjLm9wdGlvbnMuZGVsYXkuaGlkZSkpOmMuaGlkZSgpKX0sYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciBiPWEuRXZlbnQoXCJzaG93LmJzLlwiK3RoaXMudHlwZSk7aWYodGhpcy5oYXNDb250ZW50KCkmJnRoaXMuZW5hYmxlZCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpO3ZhciBkPWEuY29udGFpbnModGhpcy4kZWxlbWVudFswXS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx0aGlzLiRlbGVtZW50WzBdKTtpZihiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwhZClyZXR1cm47dmFyIGU9dGhpcyxmPXRoaXMudGlwKCksZz10aGlzLmdldFVJRCh0aGlzLnR5cGUpO3RoaXMuc2V0Q29udGVudCgpLGYuYXR0cihcImlkXCIsZyksdGhpcy4kZWxlbWVudC5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLGcpLHRoaXMub3B0aW9ucy5hbmltYXRpb24mJmYuYWRkQ2xhc3MoXCJmYWRlXCIpO3ZhciBoPVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQ/dGhpcy5vcHRpb25zLnBsYWNlbWVudC5jYWxsKHRoaXMsZlswXSx0aGlzLiRlbGVtZW50WzBdKTp0aGlzLm9wdGlvbnMucGxhY2VtZW50LGk9L1xccz9hdXRvP1xccz8vaSxqPWkudGVzdChoKTtqJiYoaD1oLnJlcGxhY2UoaSxcIlwiKXx8XCJ0b3BcIiksZi5kZXRhY2goKS5jc3Moe3RvcDowLGxlZnQ6MCxkaXNwbGF5OlwiYmxvY2tcIn0pLmFkZENsYXNzKGgpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsdGhpcyksdGhpcy5vcHRpb25zLmNvbnRhaW5lcj9mLmFwcGVuZFRvKHRoaXMub3B0aW9ucy5jb250YWluZXIpOmYuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudCksdGhpcy4kZWxlbWVudC50cmlnZ2VyKFwiaW5zZXJ0ZWQuYnMuXCIrdGhpcy50eXBlKTt2YXIgaz10aGlzLmdldFBvc2l0aW9uKCksbD1mWzBdLm9mZnNldFdpZHRoLG09ZlswXS5vZmZzZXRIZWlnaHQ7aWYoail7dmFyIG49aCxvPXRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpO2g9XCJib3R0b21cIj09aCYmay5ib3R0b20rbT5vLmJvdHRvbT9cInRvcFwiOlwidG9wXCI9PWgmJmsudG9wLW08by50b3A/XCJib3R0b21cIjpcInJpZ2h0XCI9PWgmJmsucmlnaHQrbD5vLndpZHRoP1wibGVmdFwiOlwibGVmdFwiPT1oJiZrLmxlZnQtbDxvLmxlZnQ/XCJyaWdodFwiOmgsZi5yZW1vdmVDbGFzcyhuKS5hZGRDbGFzcyhoKX12YXIgcD10aGlzLmdldENhbGN1bGF0ZWRPZmZzZXQoaCxrLGwsbSk7dGhpcy5hcHBseVBsYWNlbWVudChwLGgpO3ZhciBxPWZ1bmN0aW9uKCl7dmFyIGE9ZS5ob3ZlclN0YXRlO2UuJGVsZW1lbnQudHJpZ2dlcihcInNob3duLmJzLlwiK2UudHlwZSksZS5ob3ZlclN0YXRlPW51bGwsXCJvdXRcIj09YSYmZS5sZWF2ZShlKX07YS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJHRpcC5oYXNDbGFzcyhcImZhZGVcIik/Zi5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixxKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOnEoKX19LGMucHJvdG90eXBlLmFwcGx5UGxhY2VtZW50PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy50aXAoKSxlPWRbMF0ub2Zmc2V0V2lkdGgsZj1kWzBdLm9mZnNldEhlaWdodCxnPXBhcnNlSW50KGQuY3NzKFwibWFyZ2luLXRvcFwiKSwxMCksaD1wYXJzZUludChkLmNzcyhcIm1hcmdpbi1sZWZ0XCIpLDEwKTtpc05hTihnKSYmKGc9MCksaXNOYU4oaCkmJihoPTApLGIudG9wKz1nLGIubGVmdCs9aCxhLm9mZnNldC5zZXRPZmZzZXQoZFswXSxhLmV4dGVuZCh7dXNpbmc6ZnVuY3Rpb24oYSl7ZC5jc3Moe3RvcDpNYXRoLnJvdW5kKGEudG9wKSxsZWZ0Ok1hdGgucm91bmQoYS5sZWZ0KX0pfX0sYiksMCksZC5hZGRDbGFzcyhcImluXCIpO3ZhciBpPWRbMF0ub2Zmc2V0V2lkdGgsaj1kWzBdLm9mZnNldEhlaWdodDtcInRvcFwiPT1jJiZqIT1mJiYoYi50b3A9Yi50b3ArZi1qKTt2YXIgaz10aGlzLmdldFZpZXdwb3J0QWRqdXN0ZWREZWx0YShjLGIsaSxqKTtrLmxlZnQ/Yi5sZWZ0Kz1rLmxlZnQ6Yi50b3ArPWsudG9wO3ZhciBsPS90b3B8Ym90dG9tLy50ZXN0KGMpLG09bD8yKmsubGVmdC1lK2k6MiprLnRvcC1mK2osbj1sP1wib2Zmc2V0V2lkdGhcIjpcIm9mZnNldEhlaWdodFwiO2Qub2Zmc2V0KGIpLHRoaXMucmVwbGFjZUFycm93KG0sZFswXVtuXSxsKX0sYy5wcm90b3R5cGUucmVwbGFjZUFycm93PWZ1bmN0aW9uKGEsYixjKXt0aGlzLmFycm93KCkuY3NzKGM/XCJsZWZ0XCI6XCJ0b3BcIiw1MCooMS1hL2IpK1wiJVwiKS5jc3MoYz9cInRvcFwiOlwibGVmdFwiLFwiXCIpfSxjLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aXAoKSxiPXRoaXMuZ2V0VGl0bGUoKTthLmZpbmQoXCIudG9vbHRpcC1pbm5lclwiKVt0aGlzLm9wdGlvbnMuaHRtbD9cImh0bWxcIjpcInRleHRcIl0oYiksYS5yZW1vdmVDbGFzcyhcImZhZGUgaW4gdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0XCIpfSxjLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGQoKXtcImluXCIhPWUuaG92ZXJTdGF0ZSYmZi5kZXRhY2goKSxlLiRlbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpLnRyaWdnZXIoXCJoaWRkZW4uYnMuXCIrZS50eXBlKSxiJiZiKCl9dmFyIGU9dGhpcyxmPWEodGhpcy4kdGlwKSxnPWEuRXZlbnQoXCJoaWRlLmJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihnKSxnLmlzRGVmYXVsdFByZXZlbnRlZCgpP3ZvaWQgMDooZi5yZW1vdmVDbGFzcyhcImluXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZmLmhhc0NsYXNzKFwiZmFkZVwiKT9mLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGQpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZCgpLHRoaXMuaG92ZXJTdGF0ZT1udWxsLHRoaXMpfSxjLnByb3RvdHlwZS5maXhUaXRsZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQ7KGEuYXR0cihcInRpdGxlXCIpfHxcInN0cmluZ1wiIT10eXBlb2YgYS5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiKSkmJmEuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIixhLmF0dHIoXCJ0aXRsZVwiKXx8XCJcIikuYXR0cihcInRpdGxlXCIsXCJcIil9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfSxjLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbihiKXtiPWJ8fHRoaXMuJGVsZW1lbnQ7dmFyIGM9YlswXSxkPVwiQk9EWVwiPT1jLnRhZ05hbWUsZT1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO251bGw9PWUud2lkdGgmJihlPWEuZXh0ZW5kKHt9LGUse3dpZHRoOmUucmlnaHQtZS5sZWZ0LGhlaWdodDplLmJvdHRvbS1lLnRvcH0pKTt2YXIgZj1kP3t0b3A6MCxsZWZ0OjB9OmIub2Zmc2V0KCksZz17c2Nyb2xsOmQ/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A6Yi5zY3JvbGxUb3AoKX0saD1kP3t3aWR0aDphKHdpbmRvdykud2lkdGgoKSxoZWlnaHQ6YSh3aW5kb3cpLmhlaWdodCgpfTpudWxsO3JldHVybiBhLmV4dGVuZCh7fSxlLGcsaCxmKX0sYy5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5cImJvdHRvbVwiPT1hP3t0b3A6Yi50b3ArYi5oZWlnaHQsbGVmdDpiLmxlZnQrYi53aWR0aC8yLWMvMn06XCJ0b3BcIj09YT97dG9wOmIudG9wLWQsbGVmdDpiLmxlZnQrYi53aWR0aC8yLWMvMn06XCJsZWZ0XCI9PWE/e3RvcDpiLnRvcCtiLmhlaWdodC8yLWQvMixsZWZ0OmIubGVmdC1jfTp7dG9wOmIudG9wK2IuaGVpZ2h0LzItZC8yLGxlZnQ6Yi5sZWZ0K2Iud2lkdGh9fSxjLnByb3RvdHlwZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e3RvcDowLGxlZnQ6MH07aWYoIXRoaXMuJHZpZXdwb3J0KXJldHVybiBlO3ZhciBmPXRoaXMub3B0aW9ucy52aWV3cG9ydCYmdGhpcy5vcHRpb25zLnZpZXdwb3J0LnBhZGRpbmd8fDAsZz10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtpZigvcmlnaHR8bGVmdC8udGVzdChhKSl7dmFyIGg9Yi50b3AtZi1nLnNjcm9sbCxpPWIudG9wK2YtZy5zY3JvbGwrZDtoPGcudG9wP2UudG9wPWcudG9wLWg6aT5nLnRvcCtnLmhlaWdodCYmKGUudG9wPWcudG9wK2cuaGVpZ2h0LWkpfWVsc2V7dmFyIGo9Yi5sZWZ0LWYsaz1iLmxlZnQrZitjO2o8Zy5sZWZ0P2UubGVmdD1nLmxlZnQtajprPmcucmlnaHQmJihlLmxlZnQ9Zy5sZWZ0K2cud2lkdGgtayl9cmV0dXJuIGV9LGMucHJvdG90eXBlLmdldFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLiRlbGVtZW50LGM9dGhpcy5vcHRpb25zO3JldHVybiBhPWIuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIil8fChcImZ1bmN0aW9uXCI9PXR5cGVvZiBjLnRpdGxlP2MudGl0bGUuY2FsbChiWzBdKTpjLnRpdGxlKX0sYy5wcm90b3R5cGUuZ2V0VUlEPWZ1bmN0aW9uKGEpe2RvIGErPX5+KDFlNipNYXRoLnJhbmRvbSgpKTt3aGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSk7cmV0dXJuIGF9LGMucHJvdG90eXBlLnRpcD1mdW5jdGlvbigpe2lmKCF0aGlzLiR0aXAmJih0aGlzLiR0aXA9YSh0aGlzLm9wdGlvbnMudGVtcGxhdGUpLDEhPXRoaXMuJHRpcC5sZW5ndGgpKXRocm93IG5ldyBFcnJvcih0aGlzLnR5cGUrXCIgYHRlbXBsYXRlYCBvcHRpb24gbXVzdCBjb25zaXN0IG9mIGV4YWN0bHkgMSB0b3AtbGV2ZWwgZWxlbWVudCFcIik7cmV0dXJuIHRoaXMuJHRpcH0sYy5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZChcIi50b29sdGlwLWFycm93XCIpfSxjLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITB9LGMucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITF9LGMucHJvdG90eXBlLnRvZ2dsZUVuYWJsZWQ9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9IXRoaXMuZW5hYmxlZH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7YiYmKGM9YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUpLGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxjKSkpLGI/KGMuaW5TdGF0ZS5jbGljaz0hYy5pblN0YXRlLmNsaWNrLGMuaXNJblN0YXRlVHJ1ZSgpP2MuZW50ZXIoYyk6Yy5sZWF2ZShjKSk6Yy50aXAoKS5oYXNDbGFzcyhcImluXCIpP2MubGVhdmUoYyk6Yy5lbnRlcihjKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksdGhpcy5oaWRlKGZ1bmN0aW9uKCl7YS4kZWxlbWVudC5vZmYoXCIuXCIrYS50eXBlKS5yZW1vdmVEYXRhKFwiYnMuXCIrYS50eXBlKSxhLiR0aXAmJmEuJHRpcC5kZXRhY2goKSxhLiR0aXA9bnVsbCxhLiRhcnJvdz1udWxsLGEuJHZpZXdwb3J0PW51bGx9KX07dmFyIGQ9YS5mbi50b29sdGlwO2EuZm4udG9vbHRpcD1iLGEuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvcj1jLGEuZm4udG9vbHRpcC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4udG9vbHRpcD1kLHRoaXN9fShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMucG9wb3ZlclwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiOyhlfHwhL2Rlc3Ryb3l8aGlkZS8udGVzdChiKSkmJihlfHxkLmRhdGEoXCJicy5wb3BvdmVyXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpKX0pfXZhciBjPWZ1bmN0aW9uKGEsYil7dGhpcy5pbml0KFwicG9wb3ZlclwiLGEsYil9O2lmKCFhLmZuLnRvb2x0aXApdGhyb3cgbmV3IEVycm9yKFwiUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzXCIpO2MuVkVSU0lPTj1cIjMuMy42XCIsYy5ERUZBVUxUUz1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMse3BsYWNlbWVudDpcInJpZ2h0XCIsdHJpZ2dlcjpcImNsaWNrXCIsY29udGVudDpcIlwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PjwvZGl2Pid9KSxjLnByb3RvdHlwZT1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpLGM9dGhpcy5nZXRDb250ZW50KCk7YS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEuZmluZChcIi5wb3BvdmVyLWNvbnRlbnRcIikuY2hpbGRyZW4oKS5kZXRhY2goKS5lbmQoKVt0aGlzLm9wdGlvbnMuaHRtbD9cInN0cmluZ1wiPT10eXBlb2YgYz9cImh0bWxcIjpcImFwcGVuZFwiOlwidGV4dFwiXShjKSxhLnJlbW92ZUNsYXNzKFwiZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW5cIiksYS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaHRtbCgpfHxhLmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKS5oaWRlKCl9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLmdldENvbnRlbnQoKX0sYy5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQsYj10aGlzLm9wdGlvbnM7cmV0dXJuIGEuYXR0cihcImRhdGEtY29udGVudFwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGIuY29udGVudD9iLmNvbnRlbnQuY2FsbChhWzBdKTpiLmNvbnRlbnQpfSxjLnByb3RvdHlwZS5hcnJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhcnJvdz10aGlzLiRhcnJvd3x8dGhpcy50aXAoKS5maW5kKFwiLmFycm93XCIpfTt2YXIgZD1hLmZuLnBvcG92ZXI7YS5mbi5wb3BvdmVyPWIsYS5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWMsYS5mbi5wb3BvdmVyLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5wb3BvdmVyPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYyxkKXt0aGlzLiRib2R5PWEoZG9jdW1lbnQuYm9keSksdGhpcy4kc2Nyb2xsRWxlbWVudD1hKGEoYykuaXMoZG9jdW1lbnQuYm9keSk/d2luZG93OmMpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxiLkRFRkFVTFRTLGQpLHRoaXMuc2VsZWN0b3I9KHRoaXMub3B0aW9ucy50YXJnZXR8fFwiXCIpK1wiIC5uYXYgbGkgPiBhXCIsdGhpcy5vZmZzZXRzPVtdLHRoaXMudGFyZ2V0cz1bXSx0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuc2Nyb2xsSGVpZ2h0PTAsdGhpcy4kc2Nyb2xsRWxlbWVudC5vbihcInNjcm9sbC5icy5zY3JvbGxzcHlcIixhLnByb3h5KHRoaXMucHJvY2Vzcyx0aGlzKSksdGhpcy5yZWZyZXNoKCksdGhpcy5wcm9jZXNzKCl9ZnVuY3Rpb24gYyhjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnNjcm9sbHNweVwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBjJiZjO2V8fGQuZGF0YShcImJzLnNjcm9sbHNweVwiLGU9bmV3IGIodGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGMmJmVbY10oKX0pfWIuVkVSU0lPTj1cIjMuMy42XCIsYi5ERUZBVUxUUz17b2Zmc2V0OjEwfSxiLnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfSxiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPVwib2Zmc2V0XCIsZD0wO3RoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5zY3JvbGxIZWlnaHQ9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKSxhLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pfHwoYz1cInBvc2l0aW9uXCIsZD10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpKSx0aGlzLiRib2R5LmZpbmQodGhpcy5zZWxlY3RvcikubWFwKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKSxlPWIuZGF0YShcInRhcmdldFwiKXx8Yi5hdHRyKFwiaHJlZlwiKSxmPS9eIy4vLnRlc3QoZSkmJmEoZSk7cmV0dXJuIGYmJmYubGVuZ3RoJiZmLmlzKFwiOnZpc2libGVcIikmJltbZltjXSgpLnRvcCtkLGVdXXx8bnVsbH0pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYVswXS1iWzBdfSkuZWFjaChmdW5jdGlvbigpe2Iub2Zmc2V0cy5wdXNoKHRoaXNbMF0pLGIudGFyZ2V0cy5wdXNoKHRoaXNbMV0pfSl9LGIucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkrdGhpcy5vcHRpb25zLm9mZnNldCxjPXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksZD10aGlzLm9wdGlvbnMub2Zmc2V0K2MtdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKSxlPXRoaXMub2Zmc2V0cyxmPXRoaXMudGFyZ2V0cyxnPXRoaXMuYWN0aXZlVGFyZ2V0O2lmKHRoaXMuc2Nyb2xsSGVpZ2h0IT1jJiZ0aGlzLnJlZnJlc2goKSxiPj1kKXJldHVybiBnIT0oYT1mW2YubGVuZ3RoLTFdKSYmdGhpcy5hY3RpdmF0ZShhKTtpZihnJiZiPGVbMF0pcmV0dXJuIHRoaXMuYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5jbGVhcigpO2ZvcihhPWUubGVuZ3RoO2EtLTspZyE9ZlthXSYmYj49ZVthXSYmKHZvaWQgMD09PWVbYSsxXXx8YjxlW2ErMV0pJiZ0aGlzLmFjdGl2YXRlKGZbYV0pfSxiLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihiKXt0aGlzLmFjdGl2ZVRhcmdldD1iLHRoaXMuY2xlYXIoKTt2YXIgYz10aGlzLnNlbGVjdG9yKydbZGF0YS10YXJnZXQ9XCInK2IrJ1wiXSwnK3RoaXMuc2VsZWN0b3IrJ1tocmVmPVwiJytiKydcIl0nLGQ9YShjKS5wYXJlbnRzKFwibGlcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5kLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpLmxlbmd0aCYmKGQ9ZC5jbG9zZXN0KFwibGkuZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikpLGQudHJpZ2dlcihcImFjdGl2YXRlLmJzLnNjcm9sbHNweVwiKX0sYi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXthKHRoaXMuc2VsZWN0b3IpLnBhcmVudHNVbnRpbCh0aGlzLm9wdGlvbnMudGFyZ2V0LFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX07dmFyIGQ9YS5mbi5zY3JvbGxzcHk7YS5mbi5zY3JvbGxzcHk9YyxhLmZuLnNjcm9sbHNweS5Db25zdHJ1Y3Rvcj1iLGEuZm4uc2Nyb2xsc3B5Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5zY3JvbGxzcHk9ZCx0aGlzfSxhKHdpbmRvdykub24oXCJsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaVwiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtc3B5PVwic2Nyb2xsXCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7Yy5jYWxsKGIsYi5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnRhYlwiKTtlfHxkLmRhdGEoXCJicy50YWJcIixlPW5ldyBjKHRoaXMpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGM9ZnVuY3Rpb24oYil7dGhpcy5lbGVtZW50PWEoYil9O2MuVkVSU0lPTj1cIjMuMy42XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LGM9Yi5jbG9zZXN0KFwidWw6bm90KC5kcm9wZG93bi1tZW51KVwiKSxkPWIuZGF0YShcInRhcmdldFwiKTtpZihkfHwoZD1iLmF0dHIoXCJocmVmXCIpLGQ9ZCYmZC5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKSwhYi5wYXJlbnQoXCJsaVwiKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSl7dmFyIGU9Yy5maW5kKFwiLmFjdGl2ZTpsYXN0IGFcIiksZj1hLkV2ZW50KFwiaGlkZS5icy50YWJcIix7cmVsYXRlZFRhcmdldDpiWzBdfSksZz1hLkV2ZW50KFwic2hvdy5icy50YWJcIix7cmVsYXRlZFRhcmdldDplWzBdfSk7aWYoZS50cmlnZ2VyKGYpLGIudHJpZ2dlcihnKSwhZy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmIWYuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBoPWEoZCk7dGhpcy5hY3RpdmF0ZShiLmNsb3Nlc3QoXCJsaVwiKSxjKSx0aGlzLmFjdGl2YXRlKGgsaC5wYXJlbnQoKSxmdW5jdGlvbigpe2UudHJpZ2dlcih7dHlwZTpcImhpZGRlbi5icy50YWJcIixyZWxhdGVkVGFyZ2V0OmJbMF19KSxiLnRyaWdnZXIoe3R5cGU6XCJzaG93bi5icy50YWJcIixyZWxhdGVkVGFyZ2V0OmVbMF19KX0pfX19LGMucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGIsZCxlKXtmdW5jdGlvbiBmKCl7Zy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5maW5kKFwiPiAuZHJvcGRvd24tbWVudSA+IC5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikuZW5kKCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJykuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksYi5hZGRDbGFzcyhcImFjdGl2ZVwiKS5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSxoPyhiWzBdLm9mZnNldFdpZHRoLGIuYWRkQ2xhc3MoXCJpblwiKSk6Yi5yZW1vdmVDbGFzcyhcImZhZGVcIiksYi5wYXJlbnQoXCIuZHJvcGRvd24tbWVudVwiKS5sZW5ndGgmJmIuY2xvc2VzdChcImxpLmRyb3Bkb3duXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpLmVuZCgpLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLGUmJmUoKX12YXIgZz1kLmZpbmQoXCI+IC5hY3RpdmVcIiksaD1lJiZhLnN1cHBvcnQudHJhbnNpdGlvbiYmKGcubGVuZ3RoJiZnLmhhc0NsYXNzKFwiZmFkZVwiKXx8ISFkLmZpbmQoXCI+IC5mYWRlXCIpLmxlbmd0aCk7Zy5sZW5ndGgmJmg/Zy5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOmYoKSxnLnJlbW92ZUNsYXNzKFwiaW5cIil9O3ZhciBkPWEuZm4udGFiO2EuZm4udGFiPWIsYS5mbi50YWIuQ29uc3RydWN0b3I9YyxhLmZuLnRhYi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4udGFiPWQsdGhpc307dmFyIGU9ZnVuY3Rpb24oYyl7Yy5wcmV2ZW50RGVmYXVsdCgpLGIuY2FsbChhKHRoaXMpLFwic2hvd1wiKX07YShkb2N1bWVudCkub24oXCJjbGljay5icy50YWIuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJyxlKS5vbihcImNsaWNrLmJzLnRhYi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJwaWxsXCJdJyxlKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmFmZml4XCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7ZXx8ZC5kYXRhKFwiYnMuYWZmaXhcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgYz1mdW5jdGlvbihiLGQpe3RoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQpLHRoaXMuJHRhcmdldD1hKHRoaXMub3B0aW9ucy50YXJnZXQpLm9uKFwic2Nyb2xsLmJzLmFmZml4LmRhdGEtYXBpXCIsYS5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sdGhpcykpLm9uKFwiY2xpY2suYnMuYWZmaXguZGF0YS1hcGlcIixhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3AsdGhpcykpLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLmFmZml4ZWQ9bnVsbCx0aGlzLnVucGluPW51bGwsdGhpcy5waW5uZWRPZmZzZXQ9bnVsbCx0aGlzLmNoZWNrUG9zaXRpb24oKX07Yy5WRVJTSU9OPVwiMy4zLjZcIixjLlJFU0VUPVwiYWZmaXggYWZmaXgtdG9wIGFmZml4LWJvdHRvbVwiLGMuREVGQVVMVFM9e29mZnNldDowLHRhcmdldDp3aW5kb3d9LGMucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxmPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCksZz10aGlzLiR0YXJnZXQuaGVpZ2h0KCk7aWYobnVsbCE9YyYmXCJ0b3BcIj09dGhpcy5hZmZpeGVkKXJldHVybiBjPmU/XCJ0b3BcIjohMTtpZihcImJvdHRvbVwiPT10aGlzLmFmZml4ZWQpcmV0dXJuIG51bGwhPWM/ZSt0aGlzLnVucGluPD1mLnRvcD8hMTpcImJvdHRvbVwiOmEtZD49ZStnPyExOlwiYm90dG9tXCI7dmFyIGg9bnVsbD09dGhpcy5hZmZpeGVkLGk9aD9lOmYudG9wLGo9aD9nOmI7cmV0dXJuIG51bGwhPWMmJmM+PWU/XCJ0b3BcIjpudWxsIT1kJiZpK2o+PWEtZD9cImJvdHRvbVwiOiExfSxjLnByb3RvdHlwZS5nZXRQaW5uZWRPZmZzZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBpbm5lZE9mZnNldClyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhjLlJFU0VUKS5hZGRDbGFzcyhcImFmZml4XCIpO3ZhciBhPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxiPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCk7cmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0PWIudG9wLWF9LGMucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wPWZ1bmN0aW9uKCl7c2V0VGltZW91dChhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSwxKX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuJGVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSl7dmFyIGI9dGhpcy4kZWxlbWVudC5oZWlnaHQoKSxkPXRoaXMub3B0aW9ucy5vZmZzZXQsZT1kLnRvcCxmPWQuYm90dG9tLGc9TWF0aC5tYXgoYShkb2N1bWVudCkuaGVpZ2h0KCksYShkb2N1bWVudC5ib2R5KS5oZWlnaHQoKSk7XCJvYmplY3RcIiE9dHlwZW9mIGQmJihmPWU9ZCksXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmKGU9ZC50b3AodGhpcy4kZWxlbWVudCkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJihmPWQuYm90dG9tKHRoaXMuJGVsZW1lbnQpKTt2YXIgaD10aGlzLmdldFN0YXRlKGcsYixlLGYpO2lmKHRoaXMuYWZmaXhlZCE9aCl7bnVsbCE9dGhpcy51bnBpbiYmdGhpcy4kZWxlbWVudC5jc3MoXCJ0b3BcIixcIlwiKTt2YXIgaT1cImFmZml4XCIrKGg/XCItXCIraDpcIlwiKSxqPWEuRXZlbnQoaStcIi5icy5hZmZpeFwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoaiksai5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47dGhpcy5hZmZpeGVkPWgsdGhpcy51bnBpbj1cImJvdHRvbVwiPT1oP3RoaXMuZ2V0UGlubmVkT2Zmc2V0KCk6bnVsbCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGMuUkVTRVQpLmFkZENsYXNzKGkpLnRyaWdnZXIoaS5yZXBsYWNlKFwiYWZmaXhcIixcImFmZml4ZWRcIikrXCIuYnMuYWZmaXhcIil9XCJib3R0b21cIj09aCYmdGhpcy4kZWxlbWVudC5vZmZzZXQoe3RvcDpnLWItZn0pfX07dmFyIGQ9YS5mbi5hZmZpeDthLmZuLmFmZml4PWIsYS5mbi5hZmZpeC5Db25zdHJ1Y3Rvcj1jLGEuZm4uYWZmaXgubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFmZml4PWQsdGhpc30sYSh3aW5kb3cpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtc3B5PVwiYWZmaXhcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWMuZGF0YSgpO2Qub2Zmc2V0PWQub2Zmc2V0fHx7fSxudWxsIT1kLm9mZnNldEJvdHRvbSYmKGQub2Zmc2V0LmJvdHRvbT1kLm9mZnNldEJvdHRvbSksbnVsbCE9ZC5vZmZzZXRUb3AmJihkLm9mZnNldC50b3A9ZC5vZmZzZXRUb3ApLGIuY2FsbChjLGQpfSl9KX0oalF1ZXJ5KTsiLCIvKiBwZXJmZWN0LXNjcm9sbGJhciB2MC42LjExICovXHJcbiFmdW5jdGlvbiB0KGUsbixyKXtmdW5jdGlvbiBvKGwsYSl7aWYoIW5bbF0pe2lmKCFlW2xdKXt2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFhJiZzKXJldHVybiBzKGwsITApO2lmKGkpcmV0dXJuIGkobCwhMCk7dmFyIGM9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitsK1wiJ1wiKTt0aHJvdyBjLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsY312YXIgdT1uW2xdPXtleHBvcnRzOnt9fTtlW2xdWzBdLmNhbGwodS5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciBuPWVbbF1bMV1bdF07cmV0dXJuIG8obj9uOnQpfSx1LHUuZXhwb3J0cyx0LGUsbixyKX1yZXR1cm4gbltsXS5leHBvcnRzfWZvcih2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGw9MDtsPHIubGVuZ3RoO2wrKylvKHJbbF0pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dC5mbi5wZXJmZWN0U2Nyb2xsYmFyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT10eXBlb2YgdHx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIHQpe3ZhciBlPXQ7aS5nZXQodGhpcyl8fG8uaW5pdGlhbGl6ZSh0aGlzLGUpfWVsc2V7dmFyIG49dDtcInVwZGF0ZVwiPT09bj9vLnVwZGF0ZSh0aGlzKTpcImRlc3Ryb3lcIj09PW4mJm8uZGVzdHJveSh0aGlzKX19KX19dmFyIG89dChcIi4uL21haW5cIiksaT10KFwiLi4vcGx1Z2luL2luc3RhbmNlc1wiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtcImpxdWVyeVwiXSxyKTtlbHNle3ZhciBsPXdpbmRvdy5qUXVlcnk/d2luZG93LmpRdWVyeTp3aW5kb3cuJDtcInVuZGVmaW5lZFwiIT10eXBlb2YgbCYmcihsKX1lLmV4cG9ydHM9cn0se1wiLi4vbWFpblwiOjcsXCIuLi9wbHVnaW4vaW5zdGFuY2VzXCI6MTh9XSwyOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe3ZhciBuPXQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtuLmluZGV4T2YoZSk8MCYmbi5wdXNoKGUpLHQuY2xhc3NOYW1lPW4uam9pbihcIiBcIil9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuPXQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKSxyPW4uaW5kZXhPZihlKTtyPj0wJiZuLnNwbGljZShyLDEpLHQuY2xhc3NOYW1lPW4uam9pbihcIiBcIil9bi5hZGQ9ZnVuY3Rpb24odCxlKXt0LmNsYXNzTGlzdD90LmNsYXNzTGlzdC5hZGQoZSk6cih0LGUpfSxuLnJlbW92ZT1mdW5jdGlvbih0LGUpe3QuY2xhc3NMaXN0P3QuY2xhc3NMaXN0LnJlbW92ZShlKTpvKHQsZSl9LG4ubGlzdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jbGFzc0xpc3Q/QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KHQuY2xhc3NMaXN0KTp0LmNsYXNzTmFtZS5zcGxpdChcIiBcIil9fSx7fV0sMzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUodClbZV19ZnVuY3Rpb24gbyh0LGUsbil7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIG4mJihuPW4udG9TdHJpbmcoKStcInB4XCIpLHQuc3R5bGVbZV09bix0fWZ1bmN0aW9uIGkodCxlKXtmb3IodmFyIG4gaW4gZSl7dmFyIHI9ZVtuXTtcIm51bWJlclwiPT10eXBlb2YgciYmKHI9ci50b1N0cmluZygpK1wicHhcIiksdC5zdHlsZVtuXT1yfXJldHVybiB0fXZhciBsPXt9O2wuZT1mdW5jdGlvbih0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7cmV0dXJuIG4uY2xhc3NOYW1lPWUsbn0sbC5hcHBlbmRUbz1mdW5jdGlvbih0LGUpe3JldHVybiBlLmFwcGVuZENoaWxkKHQpLHR9LGwuY3NzPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZT9pKHQsZSk6XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4/cih0LGUpOm8odCxlLG4pfSxsLm1hdGNoZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgdC5tYXRjaGVzP3QubWF0Y2hlcyhlKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5tYXRjaGVzU2VsZWN0b3I/dC5tYXRjaGVzU2VsZWN0b3IoZSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yP3Qud2Via2l0TWF0Y2hlc1NlbGVjdG9yKGUpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0Lm1vek1hdGNoZXNTZWxlY3Rvcj90Lm1vek1hdGNoZXNTZWxlY3RvcihlKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5tc01hdGNoZXNTZWxlY3Rvcj90Lm1zTWF0Y2hlc1NlbGVjdG9yKGUpOnZvaWQgMH0sbC5yZW1vdmU9ZnVuY3Rpb24odCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQucmVtb3ZlP3QucmVtb3ZlKCk6dC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9LGwucXVlcnlDaGlsZHJlbj1mdW5jdGlvbih0LGUpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodC5jaGlsZE5vZGVzLGZ1bmN0aW9uKHQpe3JldHVybiBsLm1hdGNoZXModCxlKX0pfSxlLmV4cG9ydHM9bH0se31dLDQ6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1mdW5jdGlvbih0KXt0aGlzLmVsZW1lbnQ9dCx0aGlzLmV2ZW50cz17fX07ci5wcm90b3R5cGUuYmluZD1mdW5jdGlvbih0LGUpe1widW5kZWZpbmVkXCI9PXR5cGVvZiB0aGlzLmV2ZW50c1t0XSYmKHRoaXMuZXZlbnRzW3RdPVtdKSx0aGlzLmV2ZW50c1t0XS5wdXNoKGUpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHQsZSwhMSl9LHIucHJvdG90eXBlLnVuYmluZD1mdW5jdGlvbih0LGUpe3ZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlO3RoaXMuZXZlbnRzW3RdPXRoaXMuZXZlbnRzW3RdLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gbiYmciE9PWU/ITA6KHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHQsciwhMSksITEpfSx0aGlzKX0sci5wcm90b3R5cGUudW5iaW5kQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuZXZlbnRzKXRoaXMudW5iaW5kKHQpfTt2YXIgbz1mdW5jdGlvbigpe3RoaXMuZXZlbnRFbGVtZW50cz1bXX07by5wcm90b3R5cGUuZXZlbnRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZXZlbnRFbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZWxlbWVudD09PXR9KVswXTtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgZSYmKGU9bmV3IHIodCksdGhpcy5ldmVudEVsZW1lbnRzLnB1c2goZSkpLGV9LG8ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuZXZlbnRFbGVtZW50KHQpLmJpbmQoZSxuKX0sby5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmV2ZW50RWxlbWVudCh0KS51bmJpbmQoZSxuKX0sby5wcm90b3R5cGUudW5iaW5kQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmV2ZW50RWxlbWVudHMubGVuZ3RoO3QrKyl0aGlzLmV2ZW50RWxlbWVudHNbdF0udW5iaW5kQWxsKCl9LG8ucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZXZlbnRFbGVtZW50KHQpLG89ZnVuY3Rpb24odCl7ci51bmJpbmQoZSxvKSxuKHQpfTtyLmJpbmQoZSxvKX0sZS5leHBvcnRzPW99LHt9XSw1OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3JldHVybiBNYXRoLmZsb29yKDY1NTM2KigxK01hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0KCkrdCgpK1wiLVwiK3QoKStcIi1cIit0KCkrXCItXCIrdCgpK1wiLVwiK3QoKSt0KCkrdCgpfX0oKX0se31dLDY6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi9jbGFzc1wiKSxvPXQoXCIuL2RvbVwiKSxpPW4udG9JbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHBhcnNlSW50KHQsMTApfHwwfSxsPW4uY2xvbmU9ZnVuY3Rpb24odCl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7aWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXJldHVybiB0Lm1hcChsKTtpZihcIm9iamVjdFwiPT10eXBlb2YgdCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT1sKHRbbl0pO3JldHVybiBlfXJldHVybiB0fTtuLmV4dGVuZD1mdW5jdGlvbih0LGUpe3ZhciBuPWwodCk7Zm9yKHZhciByIGluIGUpbltyXT1sKGVbcl0pO3JldHVybiBufSxuLmlzRWRpdGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIG8ubWF0Y2hlcyh0LFwiaW5wdXQsW2NvbnRlbnRlZGl0YWJsZV1cIil8fG8ubWF0Y2hlcyh0LFwic2VsZWN0LFtjb250ZW50ZWRpdGFibGVdXCIpfHxvLm1hdGNoZXModCxcInRleHRhcmVhLFtjb250ZW50ZWRpdGFibGVdXCIpfHxvLm1hdGNoZXModCxcImJ1dHRvbixbY29udGVudGVkaXRhYmxlXVwiKX0sbi5yZW1vdmVQc0NsYXNzZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXIubGlzdCh0KSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvPWVbbl07MD09PW8uaW5kZXhPZihcInBzLVwiKSYmci5yZW1vdmUodCxvKX19LG4ub3V0ZXJXaWR0aD1mdW5jdGlvbih0KXtyZXR1cm4gaShvLmNzcyh0LFwid2lkdGhcIikpK2koby5jc3ModCxcInBhZGRpbmdMZWZ0XCIpKStpKG8uY3NzKHQsXCJwYWRkaW5nUmlnaHRcIikpK2koby5jc3ModCxcImJvcmRlckxlZnRXaWR0aFwiKSkraShvLmNzcyh0LFwiYm9yZGVyUmlnaHRXaWR0aFwiKSl9LG4uc3RhcnRTY3JvbGxpbmc9ZnVuY3Rpb24odCxlKXtyLmFkZCh0LFwicHMtaW4tc2Nyb2xsaW5nXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlP3IuYWRkKHQsXCJwcy1cIitlKTooci5hZGQodCxcInBzLXhcIiksci5hZGQodCxcInBzLXlcIikpfSxuLnN0b3BTY3JvbGxpbmc9ZnVuY3Rpb24odCxlKXtyLnJlbW92ZSh0LFwicHMtaW4tc2Nyb2xsaW5nXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlP3IucmVtb3ZlKHQsXCJwcy1cIitlKTooci5yZW1vdmUodCxcInBzLXhcIiksci5yZW1vdmUodCxcInBzLXlcIikpfSxuLmVudj17aXNXZWJLaXQ6XCJXZWJraXRBcHBlYXJhbmNlXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUsc3VwcG9ydHNUb3VjaDpcIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCxzdXBwb3J0c0llUG9pbnRlcjpudWxsIT09d2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzfX0se1wiLi9jbGFzc1wiOjIsXCIuL2RvbVwiOjN9XSw3OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4vcGx1Z2luL2Rlc3Ryb3lcIiksbz10KFwiLi9wbHVnaW4vaW5pdGlhbGl6ZVwiKSxpPXQoXCIuL3BsdWdpbi91cGRhdGVcIik7ZS5leHBvcnRzPXtpbml0aWFsaXplOm8sdXBkYXRlOmksZGVzdHJveTpyfX0se1wiLi9wbHVnaW4vZGVzdHJveVwiOjksXCIuL3BsdWdpbi9pbml0aWFsaXplXCI6MTcsXCIuL3BsdWdpbi91cGRhdGVcIjoyMX1dLDg6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9e2hhbmRsZXJzOltcImNsaWNrLXJhaWxcIixcImRyYWctc2Nyb2xsYmFyXCIsXCJrZXlib2FyZFwiLFwid2hlZWxcIixcInRvdWNoXCJdLG1heFNjcm9sbGJhckxlbmd0aDpudWxsLG1pblNjcm9sbGJhckxlbmd0aDpudWxsLHNjcm9sbFhNYXJnaW5PZmZzZXQ6MCxzY3JvbGxZTWFyZ2luT2Zmc2V0OjAsc3RvcFByb3BhZ2F0aW9uT25DbGljazohMCxzdXBwcmVzc1Njcm9sbFg6ITEsc3VwcHJlc3NTY3JvbGxZOiExLHN3aXBlUHJvcGFnYXRpb246ITAsdXNlQm90aFdoZWVsQXhlczohMSx3aGVlbFByb3BhZ2F0aW9uOiExLHdoZWVsU3BlZWQ6MSx0aGVtZTpcImRlZmF1bHRcIn19LHt9XSw5OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4uL2xpYi9oZWxwZXJcIiksbz10KFwiLi4vbGliL2RvbVwiKSxpPXQoXCIuL2luc3RhbmNlc1wiKTtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9aS5nZXQodCk7ZSYmKGUuZXZlbnQudW5iaW5kQWxsKCksby5yZW1vdmUoZS5zY3JvbGxiYXJYKSxvLnJlbW92ZShlLnNjcm9sbGJhclkpLG8ucmVtb3ZlKGUuc2Nyb2xsYmFyWFJhaWwpLG8ucmVtb3ZlKGUuc2Nyb2xsYmFyWVJhaWwpLHIucmVtb3ZlUHNDbGFzc2VzKHQpLGkucmVtb3ZlKHQpKX19LHtcIi4uL2xpYi9kb21cIjozLFwiLi4vbGliL2hlbHBlclwiOjYsXCIuL2luc3RhbmNlc1wiOjE4fV0sMTA6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX12YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfTtlLnNldHRpbmdzLnN0b3BQcm9wYWdhdGlvbk9uQ2xpY2smJmUuZXZlbnQuYmluZChlLnNjcm9sbGJhclksXCJjbGlja1wiLHIpLGUuZXZlbnQuYmluZChlLnNjcm9sbGJhcllSYWlsLFwiY2xpY2tcIixmdW5jdGlvbihyKXt2YXIgaT1vLnRvSW50KGUuc2Nyb2xsYmFyWUhlaWdodC8yKSxzPWUucmFpbFlSYXRpbyooci5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQtbihlLnNjcm9sbGJhcllSYWlsKS50b3AtaSksYz1lLnJhaWxZUmF0aW8qKGUucmFpbFlIZWlnaHQtZS5zY3JvbGxiYXJZSGVpZ2h0KSx1PXMvYzswPnU/dT0wOnU+MSYmKHU9MSksYSh0LFwidG9wXCIsKGUuY29udGVudEhlaWdodC1lLmNvbnRhaW5lckhlaWdodCkqdSksbCh0KSxyLnN0b3BQcm9wYWdhdGlvbigpfSksZS5zZXR0aW5ncy5zdG9wUHJvcGFnYXRpb25PbkNsaWNrJiZlLmV2ZW50LmJpbmQoZS5zY3JvbGxiYXJYLFwiY2xpY2tcIixyKSxlLmV2ZW50LmJpbmQoZS5zY3JvbGxiYXJYUmFpbCxcImNsaWNrXCIsZnVuY3Rpb24ocil7dmFyIGk9by50b0ludChlLnNjcm9sbGJhclhXaWR0aC8yKSxzPWUucmFpbFhSYXRpbyooci5wYWdlWC13aW5kb3cucGFnZVhPZmZzZXQtbihlLnNjcm9sbGJhclhSYWlsKS5sZWZ0LWkpLGM9ZS5yYWlsWFJhdGlvKihlLnJhaWxYV2lkdGgtZS5zY3JvbGxiYXJYV2lkdGgpLHU9cy9jOzA+dT91PTA6dT4xJiYodT0xKSxhKHQsXCJsZWZ0XCIsKGUuY29udGVudFdpZHRoLWUuY29udGFpbmVyV2lkdGgpKnUtZS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQpLGwodCksci5zdG9wUHJvcGFnYXRpb24oKX0pfXZhciBvPXQoXCIuLi8uLi9saWIvaGVscGVyXCIpLGk9dChcIi4uL2luc3RhbmNlc1wiKSxsPXQoXCIuLi91cGRhdGUtZ2VvbWV0cnlcIiksYT10KFwiLi4vdXBkYXRlLXNjcm9sbFwiKTtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9aS5nZXQodCk7cih0LGUpfX0se1wiLi4vLi4vbGliL2hlbHBlclwiOjYsXCIuLi9pbnN0YW5jZXNcIjoxOCxcIi4uL3VwZGF0ZS1nZW9tZXRyeVwiOjE5LFwiLi4vdXBkYXRlLXNjcm9sbFwiOjIwfV0sMTE6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7ZnVuY3Rpb24gbihuKXt2YXIgbz1yK24qZS5yYWlsWFJhdGlvLGw9TWF0aC5tYXgoMCxlLnNjcm9sbGJhclhSYWlsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpK2UucmFpbFhSYXRpbyooZS5yYWlsWFdpZHRoLWUuc2Nyb2xsYmFyWFdpZHRoKTswPm8/ZS5zY3JvbGxiYXJYTGVmdD0wOm8+bD9lLnNjcm9sbGJhclhMZWZ0PWw6ZS5zY3JvbGxiYXJYTGVmdD1vO3ZhciBhPWkudG9JbnQoZS5zY3JvbGxiYXJYTGVmdCooZS5jb250ZW50V2lkdGgtZS5jb250YWluZXJXaWR0aCkvKGUuY29udGFpbmVyV2lkdGgtZS5yYWlsWFJhdGlvKmUuc2Nyb2xsYmFyWFdpZHRoKSktZS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQ7Yyh0LFwibGVmdFwiLGEpfXZhciByPW51bGwsbz1udWxsLGE9ZnVuY3Rpb24oZSl7bihlLnBhZ2VYLW8pLHModCksZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCl9LHU9ZnVuY3Rpb24oKXtpLnN0b3BTY3JvbGxpbmcodCxcInhcIiksZS5ldmVudC51bmJpbmQoZS5vd25lckRvY3VtZW50LFwibW91c2Vtb3ZlXCIsYSl9O2UuZXZlbnQuYmluZChlLnNjcm9sbGJhclgsXCJtb3VzZWRvd25cIixmdW5jdGlvbihuKXtvPW4ucGFnZVgscj1pLnRvSW50KGwuY3NzKGUuc2Nyb2xsYmFyWCxcImxlZnRcIikpKmUucmFpbFhSYXRpbyxpLnN0YXJ0U2Nyb2xsaW5nKHQsXCJ4XCIpLGUuZXZlbnQuYmluZChlLm93bmVyRG9jdW1lbnQsXCJtb3VzZW1vdmVcIixhKSxlLmV2ZW50Lm9uY2UoZS5vd25lckRvY3VtZW50LFwibW91c2V1cFwiLHUpLG4uc3RvcFByb3BhZ2F0aW9uKCksbi5wcmV2ZW50RGVmYXVsdCgpfSl9ZnVuY3Rpb24gbyh0LGUpe2Z1bmN0aW9uIG4obil7dmFyIG89cituKmUucmFpbFlSYXRpbyxsPU1hdGgubWF4KDAsZS5zY3JvbGxiYXJZUmFpbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApK2UucmFpbFlSYXRpbyooZS5yYWlsWUhlaWdodC1lLnNjcm9sbGJhcllIZWlnaHQpOzA+bz9lLnNjcm9sbGJhcllUb3A9MDpvPmw/ZS5zY3JvbGxiYXJZVG9wPWw6ZS5zY3JvbGxiYXJZVG9wPW87dmFyIGE9aS50b0ludChlLnNjcm9sbGJhcllUb3AqKGUuY29udGVudEhlaWdodC1lLmNvbnRhaW5lckhlaWdodCkvKGUuY29udGFpbmVySGVpZ2h0LWUucmFpbFlSYXRpbyplLnNjcm9sbGJhcllIZWlnaHQpKTtjKHQsXCJ0b3BcIixhKX12YXIgcj1udWxsLG89bnVsbCxhPWZ1bmN0aW9uKGUpe24oZS5wYWdlWS1vKSxzKHQpLGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpfSx1PWZ1bmN0aW9uKCl7aS5zdG9wU2Nyb2xsaW5nKHQsXCJ5XCIpLGUuZXZlbnQudW5iaW5kKGUub3duZXJEb2N1bWVudCxcIm1vdXNlbW92ZVwiLGEpfTtlLmV2ZW50LmJpbmQoZS5zY3JvbGxiYXJZLFwibW91c2Vkb3duXCIsZnVuY3Rpb24obil7bz1uLnBhZ2VZLHI9aS50b0ludChsLmNzcyhlLnNjcm9sbGJhclksXCJ0b3BcIikpKmUucmFpbFlSYXRpbyxpLnN0YXJ0U2Nyb2xsaW5nKHQsXCJ5XCIpLGUuZXZlbnQuYmluZChlLm93bmVyRG9jdW1lbnQsXCJtb3VzZW1vdmVcIixhKSxlLmV2ZW50Lm9uY2UoZS5vd25lckRvY3VtZW50LFwibW91c2V1cFwiLHUpLG4uc3RvcFByb3BhZ2F0aW9uKCksbi5wcmV2ZW50RGVmYXVsdCgpfSl9dmFyIGk9dChcIi4uLy4uL2xpYi9oZWxwZXJcIiksbD10KFwiLi4vLi4vbGliL2RvbVwiKSxhPXQoXCIuLi9pbnN0YW5jZXNcIikscz10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpLGM9dChcIi4uL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPWEuZ2V0KHQpO3IodCxlKSxvKHQsZSl9fSx7XCIuLi8uLi9saWIvZG9tXCI6MyxcIi4uLy4uL2xpYi9oZWxwZXJcIjo2LFwiLi4vaW5zdGFuY2VzXCI6MTgsXCIuLi91cGRhdGUtZ2VvbWV0cnlcIjoxOSxcIi4uL3VwZGF0ZS1zY3JvbGxcIjoyMH1dLDEyOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2Z1bmN0aW9uIG4obixyKXt2YXIgbz10LnNjcm9sbFRvcDtpZigwPT09bil7aWYoIWUuc2Nyb2xsYmFyWUFjdGl2ZSlyZXR1cm4hMTtpZigwPT09byYmcj4wfHxvPj1lLmNvbnRlbnRIZWlnaHQtZS5jb250YWluZXJIZWlnaHQmJjA+cilyZXR1cm4hZS5zZXR0aW5ncy53aGVlbFByb3BhZ2F0aW9ufXZhciBpPXQuc2Nyb2xsTGVmdDtpZigwPT09cil7aWYoIWUuc2Nyb2xsYmFyWEFjdGl2ZSlyZXR1cm4hMTtpZigwPT09aSYmMD5ufHxpPj1lLmNvbnRlbnRXaWR0aC1lLmNvbnRhaW5lcldpZHRoJiZuPjApcmV0dXJuIWUuc2V0dGluZ3Mud2hlZWxQcm9wYWdhdGlvbn1yZXR1cm4hMH12YXIgcj0hMTtlLmV2ZW50LmJpbmQodCxcIm1vdXNlZW50ZXJcIixmdW5jdGlvbigpe3I9ITB9KSxlLmV2ZW50LmJpbmQodCxcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe3I9ITF9KTt2YXIgbD0hMTtlLmV2ZW50LmJpbmQoZS5vd25lckRvY3VtZW50LFwia2V5ZG93blwiLGZ1bmN0aW9uKGMpe2lmKCFjLmlzRGVmYXVsdFByZXZlbnRlZHx8IWMuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciB1PWkubWF0Y2hlcyhlLnNjcm9sbGJhclgsXCI6Zm9jdXNcIil8fGkubWF0Y2hlcyhlLnNjcm9sbGJhclksXCI6Zm9jdXNcIik7aWYocnx8dSl7dmFyIGQ9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudD9kb2N1bWVudC5hY3RpdmVFbGVtZW50OmUub3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50O2lmKGQpe2lmKFwiSUZSQU1FXCI9PT1kLnRhZ05hbWUpZD1kLmNvbnRlbnREb2N1bWVudC5hY3RpdmVFbGVtZW50O2Vsc2UgZm9yKDtkLnNoYWRvd1Jvb3Q7KWQ9ZC5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQ7aWYoby5pc0VkaXRhYmxlKGQpKXJldHVybn12YXIgcD0wLGY9MDtzd2l0Y2goYy53aGljaCl7Y2FzZSAzNzpwPS0zMDticmVhaztjYXNlIDM4OmY9MzA7YnJlYWs7Y2FzZSAzOTpwPTMwO2JyZWFrO2Nhc2UgNDA6Zj0tMzA7YnJlYWs7Y2FzZSAzMzpmPTkwO2JyZWFrO2Nhc2UgMzI6Zj1jLnNoaWZ0S2V5PzkwOi05MDticmVhaztjYXNlIDM0OmY9LTkwO2JyZWFrO2Nhc2UgMzU6Zj1jLmN0cmxLZXk/LWUuY29udGVudEhlaWdodDotZS5jb250YWluZXJIZWlnaHQ7YnJlYWs7Y2FzZSAzNjpmPWMuY3RybEtleT90LnNjcm9sbFRvcDplLmNvbnRhaW5lckhlaWdodDticmVhaztkZWZhdWx0OnJldHVybn1zKHQsXCJ0b3BcIix0LnNjcm9sbFRvcC1mKSxzKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0K3ApLGEodCksbD1uKHAsZiksbCYmYy5wcmV2ZW50RGVmYXVsdCgpfX19KX12YXIgbz10KFwiLi4vLi4vbGliL2hlbHBlclwiKSxpPXQoXCIuLi8uLi9saWIvZG9tXCIpLGw9dChcIi4uL2luc3RhbmNlc1wiKSxhPXQoXCIuLi91cGRhdGUtZ2VvbWV0cnlcIikscz10KFwiLi4vdXBkYXRlLXNjcm9sbFwiKTtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9bC5nZXQodCk7cih0LGUpfX0se1wiLi4vLi4vbGliL2RvbVwiOjMsXCIuLi8uLi9saWIvaGVscGVyXCI6NixcIi4uL2luc3RhbmNlc1wiOjE4LFwiLi4vdXBkYXRlLWdlb21ldHJ5XCI6MTksXCIuLi91cGRhdGUtc2Nyb2xsXCI6MjB9XSwxMzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtmdW5jdGlvbiBuKG4scil7dmFyIG89dC5zY3JvbGxUb3A7aWYoMD09PW4pe2lmKCFlLnNjcm9sbGJhcllBY3RpdmUpcmV0dXJuITE7aWYoMD09PW8mJnI+MHx8bz49ZS5jb250ZW50SGVpZ2h0LWUuY29udGFpbmVySGVpZ2h0JiYwPnIpcmV0dXJuIWUuc2V0dGluZ3Mud2hlZWxQcm9wYWdhdGlvbn12YXIgaT10LnNjcm9sbExlZnQ7aWYoMD09PXIpe2lmKCFlLnNjcm9sbGJhclhBY3RpdmUpcmV0dXJuITE7aWYoMD09PWkmJjA+bnx8aT49ZS5jb250ZW50V2lkdGgtZS5jb250YWluZXJXaWR0aCYmbj4wKXJldHVybiFlLnNldHRpbmdzLndoZWVsUHJvcGFnYXRpb259cmV0dXJuITB9ZnVuY3Rpb24gcih0KXt2YXIgZT10LmRlbHRhWCxuPS0xKnQuZGVsdGFZO3JldHVybihcInVuZGVmaW5lZFwiPT10eXBlb2YgZXx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4pJiYoZT0tMSp0LndoZWVsRGVsdGFYLzYsbj10LndoZWVsRGVsdGFZLzYpLHQuZGVsdGFNb2RlJiYxPT09dC5kZWx0YU1vZGUmJihlKj0xMCxuKj0xMCksZSE9PWUmJm4hPT1uJiYoZT0wLG49dC53aGVlbERlbHRhKSxbZSxuXX1mdW5jdGlvbiBvKGUsbil7dmFyIHI9dC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWE6aG92ZXIsIC5wcy1jaGlsZDpob3ZlclwiKTtpZihyKXtpZihcIlRFWFRBUkVBXCIhPT1yLnRhZ05hbWUmJiF3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyKS5vdmVyZmxvdy5tYXRjaCgvKHNjcm9sbHxhdXRvKS8pKXJldHVybiExO3ZhciBvPXIuc2Nyb2xsSGVpZ2h0LXIuY2xpZW50SGVpZ2h0O2lmKG8+MCYmISgwPT09ci5zY3JvbGxUb3AmJm4+MHx8ci5zY3JvbGxUb3A9PT1vJiYwPm4pKXJldHVybiEwO3ZhciBpPXIuc2Nyb2xsTGVmdC1yLmNsaWVudFdpZHRoO2lmKGk+MCYmISgwPT09ci5zY3JvbGxMZWZ0JiYwPmV8fHIuc2Nyb2xsTGVmdD09PWkmJmU+MCkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gYShhKXt2YXIgYz1yKGEpLHU9Y1swXSxkPWNbMV07byh1LGQpfHwocz0hMSxlLnNldHRpbmdzLnVzZUJvdGhXaGVlbEF4ZXM/ZS5zY3JvbGxiYXJZQWN0aXZlJiYhZS5zY3JvbGxiYXJYQWN0aXZlPyhkP2wodCxcInRvcFwiLHQuc2Nyb2xsVG9wLWQqZS5zZXR0aW5ncy53aGVlbFNwZWVkKTpsKHQsXCJ0b3BcIix0LnNjcm9sbFRvcCt1KmUuc2V0dGluZ3Mud2hlZWxTcGVlZCkscz0hMCk6ZS5zY3JvbGxiYXJYQWN0aXZlJiYhZS5zY3JvbGxiYXJZQWN0aXZlJiYodT9sKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0K3UqZS5zZXR0aW5ncy53aGVlbFNwZWVkKTpsKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0LWQqZS5zZXR0aW5ncy53aGVlbFNwZWVkKSxzPSEwKToobCh0LFwidG9wXCIsdC5zY3JvbGxUb3AtZCplLnNldHRpbmdzLndoZWVsU3BlZWQpLGwodCxcImxlZnRcIix0LnNjcm9sbExlZnQrdSplLnNldHRpbmdzLndoZWVsU3BlZWQpKSxpKHQpLHM9c3x8bih1LGQpLHMmJihhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSkpfXZhciBzPSExO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cub253aGVlbD9lLmV2ZW50LmJpbmQodCxcIndoZWVsXCIsYSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdy5vbm1vdXNld2hlZWwmJmUuZXZlbnQuYmluZCh0LFwibW91c2V3aGVlbFwiLGEpfXZhciBvPXQoXCIuLi9pbnN0YW5jZXNcIiksaT10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpLGw9dChcIi4uL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPW8uZ2V0KHQpO3IodCxlKX19LHtcIi4uL2luc3RhbmNlc1wiOjE4LFwiLi4vdXBkYXRlLWdlb21ldHJ5XCI6MTksXCIuLi91cGRhdGUtc2Nyb2xsXCI6MjB9XSwxNDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtlLmV2ZW50LmJpbmQodCxcInNjcm9sbFwiLGZ1bmN0aW9uKCl7aSh0KX0pfXZhciBvPXQoXCIuLi9pbnN0YW5jZXNcIiksaT10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1vLmdldCh0KTtyKHQsZSl9fSx7XCIuLi9pbnN0YW5jZXNcIjoxOCxcIi4uL3VwZGF0ZS1nZW9tZXRyeVwiOjE5fV0sMTU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7ZnVuY3Rpb24gbigpe3ZhciB0PXdpbmRvdy5nZXRTZWxlY3Rpb24/d2luZG93LmdldFNlbGVjdGlvbigpOmRvY3VtZW50LmdldFNlbGVjdGlvbj9kb2N1bWVudC5nZXRTZWxlY3Rpb24oKTpcIlwiO3JldHVybiAwPT09dC50b1N0cmluZygpLmxlbmd0aD9udWxsOnQuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcn1mdW5jdGlvbiByKCl7Y3x8KGM9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXQodCk/KGEodCxcInRvcFwiLHQuc2Nyb2xsVG9wK3UudG9wKSxhKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0K3UubGVmdCksdm9pZCBsKHQpKTp2b2lkIGNsZWFySW50ZXJ2YWwoYyl9LDUwKSl9ZnVuY3Rpb24gcygpe2MmJihjbGVhckludGVydmFsKGMpLGM9bnVsbCksby5zdG9wU2Nyb2xsaW5nKHQpfXZhciBjPW51bGwsdT17dG9wOjAsbGVmdDowfSxkPSExO2UuZXZlbnQuYmluZChlLm93bmVyRG9jdW1lbnQsXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe3QuY29udGFpbnMobigpKT9kPSEwOihkPSExLHMoKSl9KSxlLmV2ZW50LmJpbmQod2luZG93LFwibW91c2V1cFwiLGZ1bmN0aW9uKCl7ZCYmKGQ9ITEscygpKX0pLGUuZXZlbnQuYmluZCh3aW5kb3csXCJtb3VzZW1vdmVcIixmdW5jdGlvbihlKXtpZihkKXt2YXIgbj17eDplLnBhZ2VYLHk6ZS5wYWdlWX0saT17bGVmdDp0Lm9mZnNldExlZnQscmlnaHQ6dC5vZmZzZXRMZWZ0K3Qub2Zmc2V0V2lkdGgsdG9wOnQub2Zmc2V0VG9wLGJvdHRvbTp0Lm9mZnNldFRvcCt0Lm9mZnNldEhlaWdodH07bi54PGkubGVmdCszPyh1LmxlZnQ9LTUsby5zdGFydFNjcm9sbGluZyh0LFwieFwiKSk6bi54PmkucmlnaHQtMz8odS5sZWZ0PTUsby5zdGFydFNjcm9sbGluZyh0LFwieFwiKSk6dS5sZWZ0PTAsbi55PGkudG9wKzM/KGkudG9wKzMtbi55PDU/dS50b3A9LTU6dS50b3A9LTIwLG8uc3RhcnRTY3JvbGxpbmcodCxcInlcIikpOm4ueT5pLmJvdHRvbS0zPyhuLnktaS5ib3R0b20rMzw1P3UudG9wPTU6dS50b3A9MjAsby5zdGFydFNjcm9sbGluZyh0LFwieVwiKSk6dS50b3A9MCwwPT09dS50b3AmJjA9PT11LmxlZnQ/cygpOnIoKX19KX12YXIgbz10KFwiLi4vLi4vbGliL2hlbHBlclwiKSxpPXQoXCIuLi9pbnN0YW5jZXNcIiksbD10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpLGE9dChcIi4uL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0KHQpO3IodCxlKX19LHtcIi4uLy4uL2xpYi9oZWxwZXJcIjo2LFwiLi4vaW5zdGFuY2VzXCI6MTgsXCIuLi91cGRhdGUtZ2VvbWV0cnlcIjoxOSxcIi4uL3VwZGF0ZS1zY3JvbGxcIjoyMH1dLDE2OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUsbixyKXtmdW5jdGlvbiBvKG4scil7dmFyIG89dC5zY3JvbGxUb3AsaT10LnNjcm9sbExlZnQsbD1NYXRoLmFicyhuKSxhPU1hdGguYWJzKHIpO2lmKGE+bCl7aWYoMD5yJiZvPT09ZS5jb250ZW50SGVpZ2h0LWUuY29udGFpbmVySGVpZ2h0fHxyPjAmJjA9PT1vKXJldHVybiFlLnNldHRpbmdzLnN3aXBlUHJvcGFnYXRpb259ZWxzZSBpZihsPmEmJigwPm4mJmk9PT1lLmNvbnRlbnRXaWR0aC1lLmNvbnRhaW5lcldpZHRofHxuPjAmJjA9PT1pKSlyZXR1cm4hZS5zZXR0aW5ncy5zd2lwZVByb3BhZ2F0aW9uO3JldHVybiEwfWZ1bmN0aW9uIHMoZSxuKXthKHQsXCJ0b3BcIix0LnNjcm9sbFRvcC1uKSxhKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0LWUpLGwodCl9ZnVuY3Rpb24gYygpe1k9ITB9ZnVuY3Rpb24gdSgpe1k9ITF9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gdC50YXJnZXRUb3VjaGVzP3QudGFyZ2V0VG91Y2hlc1swXTp0fWZ1bmN0aW9uIHAodCl7cmV0dXJuIHQudGFyZ2V0VG91Y2hlcyYmMT09PXQudGFyZ2V0VG91Y2hlcy5sZW5ndGg/ITA6dC5wb2ludGVyVHlwZSYmXCJtb3VzZVwiIT09dC5wb2ludGVyVHlwZSYmdC5wb2ludGVyVHlwZSE9PXQuTVNQT0lOVEVSX1RZUEVfTU9VU0U/ITA6ITF9ZnVuY3Rpb24gZih0KXtpZihwKHQpKXt3PSEwO3ZhciBlPWQodCk7di5wYWdlWD1lLnBhZ2VYLHYucGFnZVk9ZS5wYWdlWSxnPShuZXcgRGF0ZSkuZ2V0VGltZSgpLG51bGwhPT15JiZjbGVhckludGVydmFsKHkpLHQuc3RvcFByb3BhZ2F0aW9uKCl9fWZ1bmN0aW9uIGgodCl7aWYoIXcmJmUuc2V0dGluZ3Muc3dpcGVQcm9wYWdhdGlvbiYmZih0KSwhWSYmdyYmcCh0KSl7dmFyIG49ZCh0KSxyPXtwYWdlWDpuLnBhZ2VYLHBhZ2VZOm4ucGFnZVl9LGk9ci5wYWdlWC12LnBhZ2VYLGw9ci5wYWdlWS12LnBhZ2VZO3MoaSxsKSx2PXI7dmFyIGE9KG5ldyBEYXRlKS5nZXRUaW1lKCksYz1hLWc7Yz4wJiYobS54PWkvYyxtLnk9bC9jLGc9YSksbyhpLGwpJiYodC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCkpfX1mdW5jdGlvbiBiKCl7IVkmJncmJih3PSExLGNsZWFySW50ZXJ2YWwoeSkseT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3JldHVybiBpLmdldCh0KT9NYXRoLmFicyhtLngpPC4wMSYmTWF0aC5hYnMobS55KTwuMDE/dm9pZCBjbGVhckludGVydmFsKHkpOihzKDMwKm0ueCwzMCptLnkpLG0ueCo9Ljgsdm9pZChtLnkqPS44KSk6dm9pZCBjbGVhckludGVydmFsKHkpfSwxMCkpfXZhciB2PXt9LGc9MCxtPXt9LHk9bnVsbCxZPSExLHc9ITE7biYmKGUuZXZlbnQuYmluZCh3aW5kb3csXCJ0b3VjaHN0YXJ0XCIsYyksZS5ldmVudC5iaW5kKHdpbmRvdyxcInRvdWNoZW5kXCIsdSksZS5ldmVudC5iaW5kKHQsXCJ0b3VjaHN0YXJ0XCIsZiksZS5ldmVudC5iaW5kKHQsXCJ0b3VjaG1vdmVcIixoKSxlLmV2ZW50LmJpbmQodCxcInRvdWNoZW5kXCIsYikpLHImJih3aW5kb3cuUG9pbnRlckV2ZW50PyhlLmV2ZW50LmJpbmQod2luZG93LFwicG9pbnRlcmRvd25cIixjKSxlLmV2ZW50LmJpbmQod2luZG93LFwicG9pbnRlcnVwXCIsdSksZS5ldmVudC5iaW5kKHQsXCJwb2ludGVyZG93blwiLGYpLGUuZXZlbnQuYmluZCh0LFwicG9pbnRlcm1vdmVcIixoKSxlLmV2ZW50LmJpbmQodCxcInBvaW50ZXJ1cFwiLGIpKTp3aW5kb3cuTVNQb2ludGVyRXZlbnQmJihlLmV2ZW50LmJpbmQod2luZG93LFwiTVNQb2ludGVyRG93blwiLGMpLGUuZXZlbnQuYmluZCh3aW5kb3csXCJNU1BvaW50ZXJVcFwiLHUpLGUuZXZlbnQuYmluZCh0LFwiTVNQb2ludGVyRG93blwiLGYpLGUuZXZlbnQuYmluZCh0LFwiTVNQb2ludGVyTW92ZVwiLGgpLGUuZXZlbnQuYmluZCh0LFwiTVNQb2ludGVyVXBcIixiKSkpfXZhciBvPXQoXCIuLi8uLi9saWIvaGVscGVyXCIpLGk9dChcIi4uL2luc3RhbmNlc1wiKSxsPXQoXCIuLi91cGRhdGUtZ2VvbWV0cnlcIiksYT10KFwiLi4vdXBkYXRlLXNjcm9sbFwiKTtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoby5lbnYuc3VwcG9ydHNUb3VjaHx8by5lbnYuc3VwcG9ydHNJZVBvaW50ZXIpe3ZhciBlPWkuZ2V0KHQpO3IodCxlLG8uZW52LnN1cHBvcnRzVG91Y2gsby5lbnYuc3VwcG9ydHNJZVBvaW50ZXIpfX19LHtcIi4uLy4uL2xpYi9oZWxwZXJcIjo2LFwiLi4vaW5zdGFuY2VzXCI6MTgsXCIuLi91cGRhdGUtZ2VvbWV0cnlcIjoxOSxcIi4uL3VwZGF0ZS1zY3JvbGxcIjoyMH1dLDE3OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4uL2xpYi9oZWxwZXJcIiksbz10KFwiLi4vbGliL2NsYXNzXCIpLGk9dChcIi4vaW5zdGFuY2VzXCIpLGw9dChcIi4vdXBkYXRlLWdlb21ldHJ5XCIpLGE9e1wiY2xpY2stcmFpbFwiOnQoXCIuL2hhbmRsZXIvY2xpY2stcmFpbFwiKSxcImRyYWctc2Nyb2xsYmFyXCI6dChcIi4vaGFuZGxlci9kcmFnLXNjcm9sbGJhclwiKSxrZXlib2FyZDp0KFwiLi9oYW5kbGVyL2tleWJvYXJkXCIpLHdoZWVsOnQoXCIuL2hhbmRsZXIvbW91c2Utd2hlZWxcIiksdG91Y2g6dChcIi4vaGFuZGxlci90b3VjaFwiKSxzZWxlY3Rpb246dChcIi4vaGFuZGxlci9zZWxlY3Rpb25cIil9LHM9dChcIi4vaGFuZGxlci9uYXRpdmUtc2Nyb2xsXCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2U9XCJvYmplY3RcIj09dHlwZW9mIGU/ZTp7fSxvLmFkZCh0LFwicHMtY29udGFpbmVyXCIpO3ZhciBuPWkuYWRkKHQpO24uc2V0dGluZ3M9ci5leHRlbmQobi5zZXR0aW5ncyxlKSxvLmFkZCh0LFwicHMtdGhlbWUtXCIrbi5zZXR0aW5ncy50aGVtZSksbi5zZXR0aW5ncy5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV0odCl9KSxzKHQpLGwodCl9fSx7XCIuLi9saWIvY2xhc3NcIjoyLFwiLi4vbGliL2hlbHBlclwiOjYsXCIuL2hhbmRsZXIvY2xpY2stcmFpbFwiOjEwLFwiLi9oYW5kbGVyL2RyYWctc2Nyb2xsYmFyXCI6MTEsXCIuL2hhbmRsZXIva2V5Ym9hcmRcIjoxMixcIi4vaGFuZGxlci9tb3VzZS13aGVlbFwiOjEzLFwiLi9oYW5kbGVyL25hdGl2ZS1zY3JvbGxcIjoxNCxcIi4vaGFuZGxlci9zZWxlY3Rpb25cIjoxNSxcIi4vaGFuZGxlci90b3VjaFwiOjE2LFwiLi9pbnN0YW5jZXNcIjoxOCxcIi4vdXBkYXRlLWdlb21ldHJ5XCI6MTl9XSwxODpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7ZnVuY3Rpb24gZSgpe3MuYWRkKHQsXCJwcy1mb2N1c1wiKX1mdW5jdGlvbiBuKCl7cy5yZW1vdmUodCxcInBzLWZvY3VzXCIpfXZhciByPXRoaXM7ci5zZXR0aW5ncz1hLmNsb25lKGMpLHIuY29udGFpbmVyV2lkdGg9bnVsbCxyLmNvbnRhaW5lckhlaWdodD1udWxsLHIuY29udGVudFdpZHRoPW51bGwsci5jb250ZW50SGVpZ2h0PW51bGwsci5pc1J0bD1cInJ0bFwiPT09dS5jc3ModCxcImRpcmVjdGlvblwiKSxyLmlzTmVnYXRpdmVTY3JvbGw9ZnVuY3Rpb24oKXt2YXIgZT10LnNjcm9sbExlZnQsbj1udWxsO3JldHVybiB0LnNjcm9sbExlZnQ9LTEsbj10LnNjcm9sbExlZnQ8MCx0LnNjcm9sbExlZnQ9ZSxufSgpLHIubmVnYXRpdmVTY3JvbGxBZGp1c3RtZW50PXIuaXNOZWdhdGl2ZVNjcm9sbD90LnNjcm9sbFdpZHRoLXQuY2xpZW50V2lkdGg6MCxyLmV2ZW50PW5ldyBkLHIub3duZXJEb2N1bWVudD10Lm93bmVyRG9jdW1lbnR8fGRvY3VtZW50LHIuc2Nyb2xsYmFyWFJhaWw9dS5hcHBlbmRUbyh1LmUoXCJkaXZcIixcInBzLXNjcm9sbGJhci14LXJhaWxcIiksdCksci5zY3JvbGxiYXJYPXUuYXBwZW5kVG8odS5lKFwiZGl2XCIsXCJwcy1zY3JvbGxiYXIteFwiKSxyLnNjcm9sbGJhclhSYWlsKSxyLnNjcm9sbGJhclguc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwwKSxyLmV2ZW50LmJpbmQoci5zY3JvbGxiYXJYLFwiZm9jdXNcIixlKSxyLmV2ZW50LmJpbmQoci5zY3JvbGxiYXJYLFwiYmx1clwiLG4pLHIuc2Nyb2xsYmFyWEFjdGl2ZT1udWxsLHIuc2Nyb2xsYmFyWFdpZHRoPW51bGwsci5zY3JvbGxiYXJYTGVmdD1udWxsLHIuc2Nyb2xsYmFyWEJvdHRvbT1hLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWFJhaWwsXCJib3R0b21cIikpLHIuaXNTY3JvbGxiYXJYVXNpbmdCb3R0b209ci5zY3JvbGxiYXJYQm90dG9tPT09ci5zY3JvbGxiYXJYQm90dG9tLHIuc2Nyb2xsYmFyWFRvcD1yLmlzU2Nyb2xsYmFyWFVzaW5nQm90dG9tP251bGw6YS50b0ludCh1LmNzcyhyLnNjcm9sbGJhclhSYWlsLFwidG9wXCIpKSxyLnJhaWxCb3JkZXJYV2lkdGg9YS50b0ludCh1LmNzcyhyLnNjcm9sbGJhclhSYWlsLFwiYm9yZGVyTGVmdFdpZHRoXCIpKSthLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWFJhaWwsXCJib3JkZXJSaWdodFdpZHRoXCIpKSx1LmNzcyhyLnNjcm9sbGJhclhSYWlsLFwiZGlzcGxheVwiLFwiYmxvY2tcIiksci5yYWlsWE1hcmdpbldpZHRoPWEudG9JbnQodS5jc3Moci5zY3JvbGxiYXJYUmFpbCxcIm1hcmdpbkxlZnRcIikpK2EudG9JbnQodS5jc3Moci5zY3JvbGxiYXJYUmFpbCxcIm1hcmdpblJpZ2h0XCIpKSx1LmNzcyhyLnNjcm9sbGJhclhSYWlsLFwiZGlzcGxheVwiLFwiXCIpLHIucmFpbFhXaWR0aD1udWxsLHIucmFpbFhSYXRpbz1udWxsLHIuc2Nyb2xsYmFyWVJhaWw9dS5hcHBlbmRUbyh1LmUoXCJkaXZcIixcInBzLXNjcm9sbGJhci15LXJhaWxcIiksdCksci5zY3JvbGxiYXJZPXUuYXBwZW5kVG8odS5lKFwiZGl2XCIsXCJwcy1zY3JvbGxiYXIteVwiKSxyLnNjcm9sbGJhcllSYWlsKSxyLnNjcm9sbGJhclkuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwwKSxyLmV2ZW50LmJpbmQoci5zY3JvbGxiYXJZLFwiZm9jdXNcIixlKSxyLmV2ZW50LmJpbmQoci5zY3JvbGxiYXJZLFwiYmx1clwiLG4pLHIuc2Nyb2xsYmFyWUFjdGl2ZT1udWxsLHIuc2Nyb2xsYmFyWUhlaWdodD1udWxsLHIuc2Nyb2xsYmFyWVRvcD1udWxsLHIuc2Nyb2xsYmFyWVJpZ2h0PWEudG9JbnQodS5jc3Moci5zY3JvbGxiYXJZUmFpbCxcInJpZ2h0XCIpKSxyLmlzU2Nyb2xsYmFyWVVzaW5nUmlnaHQ9ci5zY3JvbGxiYXJZUmlnaHQ9PT1yLnNjcm9sbGJhcllSaWdodCxyLnNjcm9sbGJhcllMZWZ0PXIuaXNTY3JvbGxiYXJZVXNpbmdSaWdodD9udWxsOmEudG9JbnQodS5jc3Moci5zY3JvbGxiYXJZUmFpbCxcImxlZnRcIikpLHIuc2Nyb2xsYmFyWU91dGVyV2lkdGg9ci5pc1J0bD9hLm91dGVyV2lkdGgoci5zY3JvbGxiYXJZKTpudWxsLHIucmFpbEJvcmRlcllXaWR0aD1hLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWVJhaWwsXCJib3JkZXJUb3BXaWR0aFwiKSkrYS50b0ludCh1LmNzcyhyLnNjcm9sbGJhcllSYWlsLFwiYm9yZGVyQm90dG9tV2lkdGhcIikpLHUuY3NzKHIuc2Nyb2xsYmFyWVJhaWwsXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxyLnJhaWxZTWFyZ2luSGVpZ2h0PWEudG9JbnQodS5jc3Moci5zY3JvbGxiYXJZUmFpbCxcIm1hcmdpblRvcFwiKSkrYS50b0ludCh1LmNzcyhyLnNjcm9sbGJhcllSYWlsLFwibWFyZ2luQm90dG9tXCIpKSx1LmNzcyhyLnNjcm9sbGJhcllSYWlsLFwiZGlzcGxheVwiLFwiXCIpLHIucmFpbFlIZWlnaHQ9bnVsbCxyLnJhaWxZUmF0aW89bnVsbH1mdW5jdGlvbiBvKHQpe3JldHVybiB0LmdldEF0dHJpYnV0ZShcImRhdGEtcHMtaWRcIil9ZnVuY3Rpb24gaSh0LGUpe3Quc2V0QXR0cmlidXRlKFwiZGF0YS1wcy1pZFwiLGUpfWZ1bmN0aW9uIGwodCl7dC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBzLWlkXCIpfXZhciBhPXQoXCIuLi9saWIvaGVscGVyXCIpLHM9dChcIi4uL2xpYi9jbGFzc1wiKSxjPXQoXCIuL2RlZmF1bHQtc2V0dGluZ1wiKSx1PXQoXCIuLi9saWIvZG9tXCIpLGQ9dChcIi4uL2xpYi9ldmVudC1tYW5hZ2VyXCIpLHA9dChcIi4uL2xpYi9ndWlkXCIpLGY9e307bi5hZGQ9ZnVuY3Rpb24odCl7dmFyIGU9cCgpO3JldHVybiBpKHQsZSksZltlXT1uZXcgcih0KSxmW2VdfSxuLnJlbW92ZT1mdW5jdGlvbih0KXtkZWxldGUgZltvKHQpXSxsKHQpfSxuLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gZltvKHQpXX19LHtcIi4uL2xpYi9jbGFzc1wiOjIsXCIuLi9saWIvZG9tXCI6MyxcIi4uL2xpYi9ldmVudC1tYW5hZ2VyXCI6NCxcIi4uL2xpYi9ndWlkXCI6NSxcIi4uL2xpYi9oZWxwZXJcIjo2LFwiLi9kZWZhdWx0LXNldHRpbmdcIjo4fV0sMTk6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7cmV0dXJuIHQuc2V0dGluZ3MubWluU2Nyb2xsYmFyTGVuZ3RoJiYoZT1NYXRoLm1heChlLHQuc2V0dGluZ3MubWluU2Nyb2xsYmFyTGVuZ3RoKSksdC5zZXR0aW5ncy5tYXhTY3JvbGxiYXJMZW5ndGgmJihlPU1hdGgubWluKGUsdC5zZXR0aW5ncy5tYXhTY3JvbGxiYXJMZW5ndGgpKSxlfWZ1bmN0aW9uIG8odCxlKXt2YXIgbj17d2lkdGg6ZS5yYWlsWFdpZHRofTtlLmlzUnRsP24ubGVmdD1lLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCt0LnNjcm9sbExlZnQrZS5jb250YWluZXJXaWR0aC1lLmNvbnRlbnRXaWR0aDpuLmxlZnQ9dC5zY3JvbGxMZWZ0LGUuaXNTY3JvbGxiYXJYVXNpbmdCb3R0b20/bi5ib3R0b209ZS5zY3JvbGxiYXJYQm90dG9tLXQuc2Nyb2xsVG9wOm4udG9wPWUuc2Nyb2xsYmFyWFRvcCt0LnNjcm9sbFRvcCxhLmNzcyhlLnNjcm9sbGJhclhSYWlsLG4pO3ZhciByPXt0b3A6dC5zY3JvbGxUb3AsaGVpZ2h0OmUucmFpbFlIZWlnaHR9O2UuaXNTY3JvbGxiYXJZVXNpbmdSaWdodD9lLmlzUnRsP3IucmlnaHQ9ZS5jb250ZW50V2lkdGgtKGUubmVnYXRpdmVTY3JvbGxBZGp1c3RtZW50K3Quc2Nyb2xsTGVmdCktZS5zY3JvbGxiYXJZUmlnaHQtZS5zY3JvbGxiYXJZT3V0ZXJXaWR0aDpyLnJpZ2h0PWUuc2Nyb2xsYmFyWVJpZ2h0LXQuc2Nyb2xsTGVmdDplLmlzUnRsP3IubGVmdD1lLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCt0LnNjcm9sbExlZnQrMiplLmNvbnRhaW5lcldpZHRoLWUuY29udGVudFdpZHRoLWUuc2Nyb2xsYmFyWUxlZnQtZS5zY3JvbGxiYXJZT3V0ZXJXaWR0aDpyLmxlZnQ9ZS5zY3JvbGxiYXJZTGVmdCt0LnNjcm9sbExlZnQsYS5jc3MoZS5zY3JvbGxiYXJZUmFpbCxyKSxhLmNzcyhlLnNjcm9sbGJhclgse2xlZnQ6ZS5zY3JvbGxiYXJYTGVmdCx3aWR0aDplLnNjcm9sbGJhclhXaWR0aC1lLnJhaWxCb3JkZXJYV2lkdGh9KSxhLmNzcyhlLnNjcm9sbGJhclkse3RvcDplLnNjcm9sbGJhcllUb3AsaGVpZ2h0OmUuc2Nyb2xsYmFyWUhlaWdodC1lLnJhaWxCb3JkZXJZV2lkdGh9KX12YXIgaT10KFwiLi4vbGliL2hlbHBlclwiKSxsPXQoXCIuLi9saWIvY2xhc3NcIiksYT10KFwiLi4vbGliL2RvbVwiKSxzPXQoXCIuL2luc3RhbmNlc1wiKSxjPXQoXCIuL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXMuZ2V0KHQpO2UuY29udGFpbmVyV2lkdGg9dC5jbGllbnRXaWR0aCxlLmNvbnRhaW5lckhlaWdodD10LmNsaWVudEhlaWdodCxlLmNvbnRlbnRXaWR0aD10LnNjcm9sbFdpZHRoLGUuY29udGVudEhlaWdodD10LnNjcm9sbEhlaWdodDt2YXIgbjt0LmNvbnRhaW5zKGUuc2Nyb2xsYmFyWFJhaWwpfHwobj1hLnF1ZXJ5Q2hpbGRyZW4odCxcIi5wcy1zY3JvbGxiYXIteC1yYWlsXCIpLG4ubGVuZ3RoPjAmJm4uZm9yRWFjaChmdW5jdGlvbih0KXthLnJlbW92ZSh0KX0pLGEuYXBwZW5kVG8oZS5zY3JvbGxiYXJYUmFpbCx0KSksdC5jb250YWlucyhlLnNjcm9sbGJhcllSYWlsKXx8KG49YS5xdWVyeUNoaWxkcmVuKHQsXCIucHMtc2Nyb2xsYmFyLXktcmFpbFwiKSxuLmxlbmd0aD4wJiZuLmZvckVhY2goZnVuY3Rpb24odCl7YS5yZW1vdmUodCl9KSxhLmFwcGVuZFRvKGUuc2Nyb2xsYmFyWVJhaWwsdCkpLCFlLnNldHRpbmdzLnN1cHByZXNzU2Nyb2xsWCYmZS5jb250YWluZXJXaWR0aCtlLnNldHRpbmdzLnNjcm9sbFhNYXJnaW5PZmZzZXQ8ZS5jb250ZW50V2lkdGg/KGUuc2Nyb2xsYmFyWEFjdGl2ZT0hMCxlLnJhaWxYV2lkdGg9ZS5jb250YWluZXJXaWR0aC1lLnJhaWxYTWFyZ2luV2lkdGgsZS5yYWlsWFJhdGlvPWUuY29udGFpbmVyV2lkdGgvZS5yYWlsWFdpZHRoLGUuc2Nyb2xsYmFyWFdpZHRoPXIoZSxpLnRvSW50KGUucmFpbFhXaWR0aCplLmNvbnRhaW5lcldpZHRoL2UuY29udGVudFdpZHRoKSksZS5zY3JvbGxiYXJYTGVmdD1pLnRvSW50KChlLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCt0LnNjcm9sbExlZnQpKihlLnJhaWxYV2lkdGgtZS5zY3JvbGxiYXJYV2lkdGgpLyhlLmNvbnRlbnRXaWR0aC1lLmNvbnRhaW5lcldpZHRoKSkpOmUuc2Nyb2xsYmFyWEFjdGl2ZT0hMSwhZS5zZXR0aW5ncy5zdXBwcmVzc1Njcm9sbFkmJmUuY29udGFpbmVySGVpZ2h0K2Uuc2V0dGluZ3Muc2Nyb2xsWU1hcmdpbk9mZnNldDxlLmNvbnRlbnRIZWlnaHQ/KGUuc2Nyb2xsYmFyWUFjdGl2ZT0hMCxlLnJhaWxZSGVpZ2h0PWUuY29udGFpbmVySGVpZ2h0LWUucmFpbFlNYXJnaW5IZWlnaHQsZS5yYWlsWVJhdGlvPWUuY29udGFpbmVySGVpZ2h0L2UucmFpbFlIZWlnaHQsZS5zY3JvbGxiYXJZSGVpZ2h0PXIoZSxpLnRvSW50KGUucmFpbFlIZWlnaHQqZS5jb250YWluZXJIZWlnaHQvZS5jb250ZW50SGVpZ2h0KSksZS5zY3JvbGxiYXJZVG9wPWkudG9JbnQodC5zY3JvbGxUb3AqKGUucmFpbFlIZWlnaHQtZS5zY3JvbGxiYXJZSGVpZ2h0KS8oZS5jb250ZW50SGVpZ2h0LWUuY29udGFpbmVySGVpZ2h0KSkpOmUuc2Nyb2xsYmFyWUFjdGl2ZT0hMSxlLnNjcm9sbGJhclhMZWZ0Pj1lLnJhaWxYV2lkdGgtZS5zY3JvbGxiYXJYV2lkdGgmJihlLnNjcm9sbGJhclhMZWZ0PWUucmFpbFhXaWR0aC1lLnNjcm9sbGJhclhXaWR0aCksZS5zY3JvbGxiYXJZVG9wPj1lLnJhaWxZSGVpZ2h0LWUuc2Nyb2xsYmFyWUhlaWdodCYmKGUuc2Nyb2xsYmFyWVRvcD1lLnJhaWxZSGVpZ2h0LWUuc2Nyb2xsYmFyWUhlaWdodCksbyh0LGUpLGUuc2Nyb2xsYmFyWEFjdGl2ZT9sLmFkZCh0LFwicHMtYWN0aXZlLXhcIik6KGwucmVtb3ZlKHQsXCJwcy1hY3RpdmUteFwiKSxlLnNjcm9sbGJhclhXaWR0aD0wLGUuc2Nyb2xsYmFyWExlZnQ9MCxjKHQsXCJsZWZ0XCIsMCkpLGUuc2Nyb2xsYmFyWUFjdGl2ZT9sLmFkZCh0LFwicHMtYWN0aXZlLXlcIik6KGwucmVtb3ZlKHQsXCJwcy1hY3RpdmUteVwiKSxlLnNjcm9sbGJhcllIZWlnaHQ9MCxlLnNjcm9sbGJhcllUb3A9MCxjKHQsXCJ0b3BcIiwwKSl9fSx7XCIuLi9saWIvY2xhc3NcIjoyLFwiLi4vbGliL2RvbVwiOjMsXCIuLi9saWIvaGVscGVyXCI6NixcIi4vaW5zdGFuY2VzXCI6MTgsXCIuL3VwZGF0ZS1zY3JvbGxcIjoyMH1dLDIwOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsbyxpPXQoXCIuL2luc3RhbmNlc1wiKSxsPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIiksYT1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLHM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIiksdT1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxwPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIiksZj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGg9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7bC5pbml0RXZlbnQoXCJwcy1zY3JvbGwtdXBcIiwhMCwhMCksYS5pbml0RXZlbnQoXCJwcy1zY3JvbGwtZG93blwiLCEwLCEwKSxzLmluaXRFdmVudChcInBzLXNjcm9sbC1sZWZ0XCIsITAsITApLGMuaW5pdEV2ZW50KFwicHMtc2Nyb2xsLXJpZ2h0XCIsITAsITApLHUuaW5pdEV2ZW50KFwicHMtc2Nyb2xsLXlcIiwhMCwhMCksZC5pbml0RXZlbnQoXCJwcy1zY3JvbGwteFwiLCEwLCEwKSxwLmluaXRFdmVudChcInBzLXgtcmVhY2gtc3RhcnRcIiwhMCwhMCksZi5pbml0RXZlbnQoXCJwcy14LXJlYWNoLWVuZFwiLCEwLCEwKSxoLmluaXRFdmVudChcInBzLXktcmVhY2gtc3RhcnRcIiwhMCwhMCksYi5pbml0RXZlbnQoXCJwcy15LXJlYWNoLWVuZFwiLCEwLCEwKSxlLmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0KXRocm93XCJZb3UgbXVzdCBwcm92aWRlIGFuIGVsZW1lbnQgdG8gdGhlIHVwZGF0ZS1zY3JvbGwgZnVuY3Rpb25cIjtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgZSl0aHJvd1wiWW91IG11c3QgcHJvdmlkZSBhbiBheGlzIHRvIHRoZSB1cGRhdGUtc2Nyb2xsIGZ1bmN0aW9uXCI7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIG4pdGhyb3dcIllvdSBtdXN0IHByb3ZpZGUgYSB2YWx1ZSB0byB0aGUgdXBkYXRlLXNjcm9sbCBmdW5jdGlvblwiO1widG9wXCI9PT1lJiYwPj1uJiYodC5zY3JvbGxUb3A9bj0wLHQuZGlzcGF0Y2hFdmVudChoKSksXCJsZWZ0XCI9PT1lJiYwPj1uJiYodC5zY3JvbGxMZWZ0PW49MCx0LmRpc3BhdGNoRXZlbnQocCkpO3ZhciB2PWkuZ2V0KHQpO1widG9wXCI9PT1lJiZuPj12LmNvbnRlbnRIZWlnaHQtdi5jb250YWluZXJIZWlnaHQmJihuPXYuY29udGVudEhlaWdodC12LmNvbnRhaW5lckhlaWdodCxuLXQuc2Nyb2xsVG9wPD0xP249dC5zY3JvbGxUb3A6dC5zY3JvbGxUb3A9bix0LmRpc3BhdGNoRXZlbnQoYikpLFwibGVmdFwiPT09ZSYmbj49di5jb250ZW50V2lkdGgtdi5jb250YWluZXJXaWR0aCYmKG49di5jb250ZW50V2lkdGgtdi5jb250YWluZXJXaWR0aCxuLXQuc2Nyb2xsTGVmdDw9MT9uPXQuc2Nyb2xsTGVmdDp0LnNjcm9sbExlZnQ9bix0LmRpc3BhdGNoRXZlbnQoZikpLHJ8fChyPXQuc2Nyb2xsVG9wKSxvfHwobz10LnNjcm9sbExlZnQpLFwidG9wXCI9PT1lJiZyPm4mJnQuZGlzcGF0Y2hFdmVudChsKSxcInRvcFwiPT09ZSYmbj5yJiZ0LmRpc3BhdGNoRXZlbnQoYSksXCJsZWZ0XCI9PT1lJiZvPm4mJnQuZGlzcGF0Y2hFdmVudChzKSxcImxlZnRcIj09PWUmJm4+byYmdC5kaXNwYXRjaEV2ZW50KGMpLFwidG9wXCI9PT1lJiYodC5zY3JvbGxUb3A9cj1uLHQuZGlzcGF0Y2hFdmVudCh1KSksXCJsZWZ0XCI9PT1lJiYodC5zY3JvbGxMZWZ0PW89bix0LmRpc3BhdGNoRXZlbnQoZCkpfX0se1wiLi9pbnN0YW5jZXNcIjoxOH1dLDIxOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dChcIi4uL2xpYi9oZWxwZXJcIiksbz10KFwiLi4vbGliL2RvbVwiKSxpPXQoXCIuL2luc3RhbmNlc1wiKSxsPXQoXCIuL3VwZGF0ZS1nZW9tZXRyeVwiKSxhPXQoXCIuL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0KHQpO2UmJihlLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudD1lLmlzTmVnYXRpdmVTY3JvbGw/dC5zY3JvbGxXaWR0aC10LmNsaWVudFdpZHRoOjAsby5jc3MoZS5zY3JvbGxiYXJYUmFpbCxcImRpc3BsYXlcIixcImJsb2NrXCIpLG8uY3NzKGUuc2Nyb2xsYmFyWVJhaWwsXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxlLnJhaWxYTWFyZ2luV2lkdGg9ci50b0ludChvLmNzcyhlLnNjcm9sbGJhclhSYWlsLFwibWFyZ2luTGVmdFwiKSkrci50b0ludChvLmNzcyhlLnNjcm9sbGJhclhSYWlsLFwibWFyZ2luUmlnaHRcIikpLGUucmFpbFlNYXJnaW5IZWlnaHQ9ci50b0ludChvLmNzcyhlLnNjcm9sbGJhcllSYWlsLFwibWFyZ2luVG9wXCIpKStyLnRvSW50KG8uY3NzKGUuc2Nyb2xsYmFyWVJhaWwsXCJtYXJnaW5Cb3R0b21cIikpLG8uY3NzKGUuc2Nyb2xsYmFyWFJhaWwsXCJkaXNwbGF5XCIsXCJub25lXCIpLG8uY3NzKGUuc2Nyb2xsYmFyWVJhaWwsXCJkaXNwbGF5XCIsXCJub25lXCIpLGwodCksYSh0LFwidG9wXCIsdC5zY3JvbGxUb3ApLGEodCxcImxlZnRcIix0LnNjcm9sbExlZnQpLG8uY3NzKGUuc2Nyb2xsYmFyWFJhaWwsXCJkaXNwbGF5XCIsXCJcIiksby5jc3MoZS5zY3JvbGxiYXJZUmFpbCxcImRpc3BsYXlcIixcIlwiKSl9fSx7XCIuLi9saWIvZG9tXCI6MyxcIi4uL2xpYi9oZWxwZXJcIjo2LFwiLi9pbnN0YW5jZXNcIjoxOCxcIi4vdXBkYXRlLWdlb21ldHJ5XCI6MTksXCIuL3VwZGF0ZS1zY3JvbGxcIjoyMH1dfSx7fSxbMV0pOyIsIi8qIVxyXG4gKiBWdWUuanMgdjEuMC4yNlxyXG4gKiAoYykgMjAxNiBFdmFuIFlvdVxyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xyXG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcclxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxyXG4gIChnbG9iYWwuVnVlID0gZmFjdG9yeSgpKTtcclxufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcclxuICAgIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XHJcbiAgICAgIG9ialtrZXldID0gdmFsO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAob2JqLl9pc1Z1ZSkge1xyXG4gICAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBvYiA9IG9iai5fX29iX187XHJcbiAgICBpZiAoIW9iKSB7XHJcbiAgICAgIG9ialtrZXldID0gdmFsO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcclxuICAgIG9iLmRlcC5ub3RpZnkoKTtcclxuICAgIGlmIChvYi52bXMpIHtcclxuICAgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xyXG4gICAgICAgIHZtLl9wcm94eShrZXkpO1xyXG4gICAgICAgIHZtLl9kaWdlc3QoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcclxuICAgIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBkZWxldGUgb2JqW2tleV07XHJcbiAgICB2YXIgb2IgPSBvYmouX19vYl9fO1xyXG4gICAgaWYgKCFvYikge1xyXG4gICAgICBpZiAob2JqLl9pc1Z1ZSkge1xyXG4gICAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcclxuICAgICAgICBvYmouX2RpZ2VzdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIG9iLmRlcC5ub3RpZnkoKTtcclxuICAgIGlmIChvYi52bXMpIHtcclxuICAgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xyXG4gICAgICAgIHZtLl91bnByb3h5KGtleSk7XHJcbiAgICAgICAgdm0uX2RpZ2VzdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xyXG4gIC8qKlxyXG4gICAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIHZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XHJcblxyXG4gIGZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcclxuICAgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xyXG4gICAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XHJcbiAgICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xyXG4gICAqIGVtcHR5IHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXHJcbiAgICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlXHJcbiAgICogQHJldHVybiB7KnxOdW1iZXJ9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqIEByZXR1cm4geyp8Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxyXG4gICAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcclxuICAgIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XHJcbiAgICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcclxuICAgIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xyXG5cclxuICBmdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcclxuICAgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xyXG4gICAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICB2YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcclxuXHJcbiAgZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xyXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xyXG4gICAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxyXG4gICAqXHJcbiAgICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcclxuICAgKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxyXG4gICAqICAgICAgc29tZS9jb21wICAgID0+IFNvbWVDb21wXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICB2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcclxuXHJcbiAgZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcclxuICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xyXG4gICAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxyXG4gICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XHJcbiAgICBzdGFydCA9IHN0YXJ0IHx8IDA7XHJcbiAgICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XHJcbiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHRvXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZyb21cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XHJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xyXG4gICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcclxuICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXHJcbiAgICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxyXG4gICAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gb2JqXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XHJcbiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxyXG4gICAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IG9ialxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XHJcbiAgdmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcclxuXHJcbiAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcclxuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBcnJheSB0eXBlIGNoZWNrLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSBvYmpcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XHJcblxyXG4gIC8qKlxyXG4gICAqIERlZmluZSBhIHByb3BlcnR5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcGFyYW0geyp9IHZhbFxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcclxuICAgICAgdmFsdWU6IHZhbCxcclxuICAgICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxyXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcclxuICAgKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XHJcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XHJcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcclxuICAgICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xyXG4gICAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XHJcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29udGV4dCA9IHRoaXM7XHJcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICAgIGlmICghdGltZW91dCkge1xyXG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxyXG4gICAqIG5hdGl2ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFyclxyXG4gICAqIEBwYXJhbSB7Kn0gb2JqXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGluZGV4T2YoYXJyLCBvYmopIHtcclxuICAgIHZhciBpID0gYXJyLmxlbmd0aDtcclxuICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcclxuICAgIH1cclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcclxuICAgIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xyXG4gICAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xyXG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjYjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxyXG4gICAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gYVxyXG4gICAqIEBwYXJhbSB7Kn0gYlxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xyXG4gICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXHJcbiAgICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcclxuICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXHJcbiAgfVxyXG5cclxuICB2YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xyXG5cclxuICAvLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXHJcbiAgdmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cpICE9PSAnW29iamVjdCBPYmplY3RdJztcclxuXHJcbiAgLy8gZGV0ZWN0IGRldnRvb2xzXHJcbiAgdmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xyXG5cclxuICAvLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3NcclxuICB2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuICB2YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XHJcbiAgdmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XHJcbiAgdmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XHJcbiAgdmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcclxuICB2YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xyXG4gIHZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xyXG5cclxuICAvLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcclxuICB2YXIgaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyA9IGlvc1ZlcnNpb24gJiYgTnVtYmVyKGlvc1ZlcnNpb25bMF0pID49IDkgJiYgTnVtYmVyKGlvc1ZlcnNpb25bMV0pID49IDMgJiYgIXdpbmRvdy5pbmRleGVkREI7XHJcblxyXG4gIHZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcclxuICB2YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xyXG4gIHZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xyXG4gIHZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLy8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xyXG4gIGlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XHJcbiAgICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XHJcbiAgICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XHJcbiAgICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XHJcbiAgICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xyXG4gICAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XHJcbiAgICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWZlciBhIHRhc2sgdG8gZXhlY3V0ZSBpdCBhc3luY2hyb25vdXNseS4gSWRlYWxseSB0aGlzXHJcbiAgICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxyXG4gICAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xyXG4gICAqIHNldFRpbWVvdXQoMCkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcclxuICAgKi9cclxuXHJcbiAgdmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBjYWxsYmFja3MgPSBbXTtcclxuICAgIHZhciBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICB2YXIgdGltZXJGdW5jO1xyXG4gICAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xyXG4gICAgICBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XHJcbiAgICAgIGNhbGxiYWNrcyA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvcGllc1tpXSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XHJcbiAgICAgIHZhciBjb3VudGVyID0gMTtcclxuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcclxuICAgICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XHJcbiAgICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcclxuICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xyXG4gICAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcclxuICAgICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXHJcbiAgICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXHJcbiAgICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcclxuICAgICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xyXG4gICAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYi5jYWxsKGN0eCk7XHJcbiAgICAgIH0gOiBjYjtcclxuICAgICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XHJcbiAgICAgIGlmIChwZW5kaW5nKSByZXR1cm47XHJcbiAgICAgIHBlbmRpbmcgPSB0cnVlO1xyXG4gICAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcbiAgdmFyIF9TZXQgPSB1bmRlZmluZWQ7XHJcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgaWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIFNldC50b1N0cmluZygpLm1hdGNoKC9uYXRpdmUgY29kZS8pKSB7XHJcbiAgICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cclxuICAgIF9TZXQgPSBTZXQ7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cclxuICAgIF9TZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIH07XHJcbiAgICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNldFtrZXldICE9PSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICB0aGlzLnNldFtrZXldID0gMTtcclxuICAgIH07XHJcbiAgICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XHJcbiAgICB0aGlzLnNpemUgPSAwO1xyXG4gICAgdGhpcy5saW1pdCA9IGxpbWl0O1xyXG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICB9XHJcblxyXG4gIHZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xyXG5cclxuICAvKipcclxuICAgKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXHJcbiAgICogUmV0dXJucyB0aGUgZW50cnkgd2hpY2ggd2FzIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvclxyXG4gICAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXHJcbiAgICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgKiBAcmV0dXJuIHtFbnRyeXx1bmRlZmluZWR9XHJcbiAgICovXHJcblxyXG4gIHAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgIHZhciByZW1vdmVkO1xyXG5cclxuICAgIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XHJcbiAgICBpZiAoIWVudHJ5KSB7XHJcbiAgICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcclxuICAgICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVudHJ5ID0ge1xyXG4gICAgICAgIGtleToga2V5XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XHJcbiAgICAgIGlmICh0aGlzLnRhaWwpIHtcclxuICAgICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcclxuICAgICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnRhaWwgPSBlbnRyeTtcclxuICAgICAgdGhpcy5zaXplKys7XHJcbiAgICB9XHJcbiAgICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgIHJldHVybiByZW1vdmVkO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXHJcbiAgICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxyXG4gICAqIGNhY2hlIHdhcyBlbXB0eS5cclxuICAgKi9cclxuXHJcbiAgcC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XHJcbiAgICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMuc2l6ZS0tO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcclxuICAgKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XHJcbiAgICogQHJldHVybiB7RW50cnl8Kn1cclxuICAgKi9cclxuXHJcbiAgcC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xyXG4gICAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XHJcbiAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcclxuICAgICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcclxuICAgIH1cclxuICAgIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcclxuICAgIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cclxuICAgIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cclxuICAgIC8vICAgQSAgQiAgQyAgPEQ+ICBFXHJcbiAgICBpZiAoZW50cnkubmV3ZXIpIHtcclxuICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcclxuICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcclxuICAgICAgfVxyXG4gICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxyXG4gICAgfVxyXG4gICAgaWYgKGVudHJ5Lm9sZGVyKSB7XHJcbiAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXHJcbiAgICB9XHJcbiAgICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcclxuICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxyXG4gICAgaWYgKHRoaXMudGFpbCkge1xyXG4gICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcclxuICAgIH1cclxuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xyXG4gICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcclxuICB9O1xyXG5cclxuICB2YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcclxuICB2YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xyXG4gIHZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlciBzdGF0ZVxyXG4gICAqL1xyXG5cclxuICB2YXIgc3RyO1xyXG4gIHZhciBkaXI7XHJcbiAgdmFyIGM7XHJcbiAgdmFyIHByZXY7XHJcbiAgdmFyIGk7XHJcbiAgdmFyIGw7XHJcbiAgdmFyIGxhc3RGaWx0ZXJJbmRleDtcclxuICB2YXIgaW5TaW5nbGU7XHJcbiAgdmFyIGluRG91YmxlO1xyXG4gIHZhciBjdXJseTtcclxuICB2YXIgc3F1YXJlO1xyXG4gIHZhciBwYXJlbjtcclxuICAvKipcclxuICAgKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3RcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcclxuICAgIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XHJcbiAgICB2YXIgZmlsdGVyO1xyXG4gICAgaWYgKGV4cCkge1xyXG4gICAgICBmaWx0ZXIgPSB7fTtcclxuICAgICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcclxuICAgICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XHJcbiAgICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZpbHRlcikge1xyXG4gICAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xyXG4gICAgfVxyXG4gICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXJnXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xyXG4gICAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXHJcbiAgICAgICAgZHluYW1pYzogZmFsc2VcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XHJcbiAgICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxyXG4gICAgICAgIGR5bmFtaWM6IGR5bmFtaWNcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXHJcbiAgICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxyXG4gICAqXHJcbiAgICogRXhhbXBsZTpcclxuICAgKlxyXG4gICAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxyXG4gICAqIHtcclxuICAgKiAgIGV4cHJlc3Npb246ICdhICsgMScsXHJcbiAgICogICBmaWx0ZXJzOiBbXHJcbiAgICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxyXG4gICAqICAgXVxyXG4gICAqIH1cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XHJcbiAgICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XHJcbiAgICBpZiAoaGl0KSB7XHJcbiAgICAgIHJldHVybiBoaXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXHJcbiAgICBzdHIgPSBzO1xyXG4gICAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xyXG4gICAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XHJcbiAgICBsYXN0RmlsdGVySW5kZXggPSAwO1xyXG4gICAgZGlyID0ge307XHJcblxyXG4gICAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgcHJldiA9IGM7XHJcbiAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgaWYgKGluU2luZ2xlKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXHJcbiAgICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XHJcbiAgICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcclxuICAgICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcclxuICAgICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcclxuICAgICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcclxuICAgICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xyXG4gICAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXHJcbiAgICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcclxuICAgICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXHJcbiAgICAgICAgICBwdXNoRmlsdGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN3aXRjaCAoYykge1xyXG4gICAgICAgICAgY2FzZSAweDIyOlxyXG4gICAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXHJcbiAgICAgICAgICBjYXNlIDB4Mjc6XHJcbiAgICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xyXG4gICAgICAgICAgY2FzZSAweDI4OlxyXG4gICAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXHJcbiAgICAgICAgICBjYXNlIDB4Mjk6XHJcbiAgICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcclxuICAgICAgICAgIGNhc2UgMHg1QjpcclxuICAgICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcclxuICAgICAgICAgIGNhc2UgMHg1RDpcclxuICAgICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cclxuICAgICAgICAgIGNhc2UgMHg3QjpcclxuICAgICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xyXG4gICAgICAgICAgY2FzZSAweDdEOlxyXG4gICAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcclxuICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xyXG4gICAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcclxuICAgICAgcHVzaEZpbHRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhY2hlJDEucHV0KHMsIGRpcik7XHJcbiAgICByZXR1cm4gZGlyO1xyXG4gIH1cclxuXHJcbnZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIHBhcnNlRGlyZWN0aXZlOiBwYXJzZURpcmVjdGl2ZVxyXG4gIH0pO1xyXG5cclxuICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XHJcbiAgdmFyIGNhY2hlID0gdW5kZWZpbmVkO1xyXG4gIHZhciB0YWdSRSA9IHVuZGVmaW5lZDtcclxuICB2YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xyXG4gIC8qKlxyXG4gICAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxyXG4gICAqIGNvbnN0cnVjdG9yLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcclxuICAgIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21waWxlUmVnZXgoKSB7XHJcbiAgICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcclxuICAgIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcclxuICAgIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pO1xyXG4gICAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xyXG4gICAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XHJcbiAgICBodG1sUkUgPSBuZXcgUmVnRXhwKCdeJyArIHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJyQnKTtcclxuICAgIC8vIHJlc2V0IGNhY2hlXHJcbiAgICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxyXG4gICAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxyXG4gICAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXHJcbiAgICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXHJcbiAgICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cclxuICAgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xyXG4gICAgaWYgKCFjYWNoZSkge1xyXG4gICAgICBjb21waWxlUmVnZXgoKTtcclxuICAgIH1cclxuICAgIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XHJcbiAgICBpZiAoaGl0KSB7XHJcbiAgICAgIHJldHVybiBoaXQ7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB2YXIgdG9rZW5zID0gW107XHJcbiAgICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcclxuICAgIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcclxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXHJcbiAgICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XHJcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cclxuICAgICAgaW5kZXggPSBtYXRjaC5pbmRleDtcclxuICAgICAgLy8gcHVzaCB0ZXh0IHRva2VuXHJcbiAgICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xyXG4gICAgICAgIHRva2Vucy5wdXNoKHtcclxuICAgICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gdGFnIHRva2VuXHJcbiAgICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XHJcbiAgICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XHJcbiAgICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcclxuICAgICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxyXG4gICAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xyXG4gICAgICB0b2tlbnMucHVzaCh7XHJcbiAgICAgICAgdGFnOiB0cnVlLFxyXG4gICAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXHJcbiAgICAgICAgaHRtbDogaHRtbCxcclxuICAgICAgICBvbmVUaW1lOiBvbmVUaW1lXHJcbiAgICAgIH0pO1xyXG4gICAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcclxuICAgIH1cclxuICAgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICB0b2tlbnMucHVzaCh7XHJcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xyXG4gICAgcmV0dXJuIHRva2VucztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cclxuICAgKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxyXG4gICAqIGludG8gb25lIHNpbmdsZSBleHByZXNzaW9uIGFzICdcImEgXCIgKyBiICsgXCIgY1wiJy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xyXG4gICAqIEBwYXJhbSB7VnVlfSBbdm1dXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XHJcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XHJcbiAgICAgIH0pLmpvaW4oJysnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxyXG4gICAqIEBwYXJhbSB7VnVlfSBbdm1dXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcclxuICAgIHJldHVybiB0b2tlbi50YWcgPyB0b2tlbi5vbmVUaW1lICYmIHZtID8gJ1wiJyArIHZtLiRldmFsKHRva2VuLnZhbHVlKSArICdcIicgOiBpbmxpbmVGaWx0ZXJzKHRva2VuLnZhbHVlLCBzaW5nbGUpIDogJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXHJcbiAgICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxyXG4gICAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxyXG4gICAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XHJcbiAgICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcclxuICAgKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgKi9cclxuXHJcbiAgdmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcclxuICBmdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XHJcbiAgICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xyXG4gICAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XHJcbiAgICAgIGlmICghZGlyLmZpbHRlcnMpIHtcclxuICAgICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXHJcbiAgICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcclxuICAgICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcclxuICAgICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxudmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxyXG4gICAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXHJcbiAgICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcclxuICB9KTtcclxuXHJcbiAgdmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XHJcbiAgdmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcclxuXHJcbiAgdmFyIGNvbmZpZyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXHJcbiAgICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICovXHJcblxyXG4gICAgZGVidWc6IGZhbHNlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG5cclxuICAgIHNpbGVudDogZmFsc2UsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXHJcbiAgICAgKi9cclxuXHJcbiAgICBhc3luYzogdHJ1ZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXHJcbiAgICAgKiBleHByZXNzaW9ucy5cclxuICAgICAqL1xyXG5cclxuICAgIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0byBhbGxvdyBkZXZ0b29scyBpbnNwZWN0aW9uLlxyXG4gICAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cclxuICAgICAqL1xyXG5cclxuICAgIGRldnRvb2xzOiAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxyXG4gICAgICogY2hhbmdlZC5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG5cclxuICAgIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAqL1xyXG5cclxuICAgIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcclxuICAgICAqL1xyXG5cclxuICAgIF9wcm9wQmluZGluZ01vZGVzOiB7XHJcbiAgICAgIE9ORV9XQVk6IDAsXHJcbiAgICAgIFRXT19XQVk6IDEsXHJcbiAgICAgIE9ORV9USU1FOiAyXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXHJcbiAgICAgKi9cclxuXHJcbiAgICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxyXG5cclxuICB9LCB7XHJcbiAgICBkZWxpbWl0ZXJzOiB7IC8qKlxyXG4gICAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcclxuICAgICAgICAgICAgICAgICAgICogdGhlIHRleHQgcGFyc2VyIHRvIHJlLWNvbXBpbGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXHJcbiAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxyXG4gICAgICAgICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcclxuICAgICAgICBkZWxpbWl0ZXJzID0gdmFsO1xyXG4gICAgICAgIGNvbXBpbGVSZWdleCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgIH0sXHJcbiAgICB1bnNhZmVEZWxpbWl0ZXJzOiB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcclxuICAgICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xyXG4gICAgICAgIGNvbXBpbGVSZWdleCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWVcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgdmFyIHdhcm4gPSB1bmRlZmluZWQ7XHJcbiAgdmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xyXG5cclxuICAgICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XHJcbiAgICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgIWNvbmZpZy5zaWxlbnQpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xyXG4gICAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XHJcbiAgICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xyXG4gICAgICB9O1xyXG4gICAgfSkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGFwcGVuZFdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xyXG4gICAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9LCB2bSwgY2IpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XHJcbiAgICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xyXG4gICAgfSwgdm0sIGNiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XHJcbiAgICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJlbW92ZShlbCk7XHJcbiAgICB9LCB2bSwgY2IpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxyXG4gICAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcclxuICAgKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XHJcbiAgICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFucztcclxuICAgIGlmICghdHJhbnNpdGlvbiB8fFxyXG4gICAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXHJcbiAgICAvLyBub3Qgc3VwcG9ydGVkXHJcbiAgICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XHJcbiAgICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcclxuICAgICF2bS5faXNDb21waWxlZCB8fFxyXG4gICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxyXG4gICAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcclxuICAgIC8vIGFuaW1hdGlvbi5cclxuICAgIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcclxuICAgICAgb3AoKTtcclxuICAgICAgaWYgKGNiKSBjYigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnO1xyXG4gICAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XHJcbiAgfVxyXG5cclxudmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcclxuICAgIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcclxuICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcclxuICAgIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcclxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBxdWVyeShlbCkge1xyXG4gICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdmFyIHNlbGVjdG9yID0gZWw7XHJcbiAgICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XHJcbiAgICAgIGlmICghZWwpIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cclxuICAgKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxyXG4gICAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXHJcbiAgICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxyXG4gICAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcclxuICAgKiB0aGUgbm9kZSBpdHNlbGYuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpbkRvYyhub2RlKSB7XHJcbiAgICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcclxuICAgIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcclxuICAgIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xyXG4gICAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcclxuICAgIGlmICh2YWwgIT09IG51bGwpIHtcclxuICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXHJcbiAgICogQHJldHVybiB7U3RyaW5nfG51bGx9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcclxuICAgIHZhciB2YWwgPSBnZXRBdHRyKG5vZGUsICc6JyArIG5hbWUpO1xyXG4gICAgaWYgKHZhbCA9PT0gbnVsbCkge1xyXG4gICAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XHJcbiAgICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XHJcbiAgICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xyXG4gICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xyXG4gICAgICBiZWZvcmUoZWwsIHRhcmdldC5uZXh0U2libGluZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgZWwgZnJvbSBET01cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XHJcbiAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XHJcbiAgICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcclxuICAgICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xyXG4gICAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgaWYgKHBhcmVudCkge1xyXG4gICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcclxuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcclxuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxyXG4gICAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBnZXRDbGFzcyhlbCkge1xyXG4gICAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcclxuICAgIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBjbGFzc25hbWUgPSBjbGFzc25hbWUuYmFzZVZhbCB8fCAnJztcclxuICAgIH1cclxuICAgIHJldHVybiBjbGFzc25hbWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xyXG4gICAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXHJcbiAgICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXHJcbiAgICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNsc1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xyXG4gICAgICBlbC5jbGFzc05hbWUgPSBjbHM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNsc1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XHJcbiAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XHJcbiAgICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xyXG4gICAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xyXG4gICAgaWYgKGVsLmNsYXNzTGlzdCkge1xyXG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xyXG4gICAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xyXG4gICAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XHJcbiAgICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xyXG4gICAgICB9XHJcbiAgICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcclxuICAgIH1cclxuICAgIGlmICghZWwuY2xhc3NOYW1lKSB7XHJcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxyXG4gICAqIGNvbnRhaW5lciBkaXZcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcclxuICAgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XHJcbiAgICB2YXIgY2hpbGQ7XHJcbiAgICB2YXIgcmF3Q29udGVudDtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcclxuICAgICAgZWwgPSBlbC5jb250ZW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xyXG4gICAgICB0cmltTm9kZShlbCk7XHJcbiAgICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXHJcbiAgICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXHJcbiAgICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByYXdDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxyXG4gICAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XHJcbiAgICB2YXIgY2hpbGQ7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cclxuICAgIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcclxuICAgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XHJcbiAgICB9XHJcbiAgICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcclxuICAgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XHJcbiAgICB9XHJcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxyXG4gICAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxyXG4gICAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XHJcbiAgICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxyXG4gICAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XHJcbiAgICogLSBmcmFnbWVudCBpbnN0YW5jZVxyXG4gICAqIC0gdi1odG1sXHJcbiAgICogLSB2LWlmXHJcbiAgICogLSB2LWZvclxyXG4gICAqIC0gY29tcG9uZW50XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXHJcbiAgICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xyXG4gICAgdmFyIGFuY2hvciA9IGNvbmZpZy5kZWJ1ZyA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCkgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpO1xyXG4gICAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xyXG4gICAgcmV0dXJuIGFuY2hvcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxyXG4gICAqL1xyXG5cclxuICB2YXIgcmVmUkUgPSAvXnYtcmVmOi87XHJcblxyXG4gIGZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xyXG4gICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XHJcbiAgICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XHJcbiAgICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcclxuICAgICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gZW5kXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcclxuICAgIHZhciBuZXh0O1xyXG4gICAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xyXG4gICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcclxuICAgICAgb3Aobm9kZSk7XHJcbiAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgfVxyXG4gICAgb3AoZW5kKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcclxuICAgKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXHJcbiAgICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOb2RlfSBzdGFydFxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gZW5kXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xyXG4gICAgdmFyIGRvbmUgPSBmYWxzZTtcclxuICAgIHZhciByZW1vdmVkID0gMDtcclxuICAgIHZhciBub2RlcyA9IFtdO1xyXG4gICAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xyXG4gICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcclxuICAgIH0pO1xyXG4gICAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xyXG4gICAgICByZW1vdmVkKys7XHJcbiAgICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNiICYmIGNiKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDExO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcclxuICAgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xyXG4gICAgaWYgKGVsLm91dGVySFRNTCkge1xyXG4gICAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvaTtcclxuICB2YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xyXG5cclxuICB2YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcclxuICAgICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xyXG4gICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcclxuICAgICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcclxuICAgICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXHJcbiAgICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XHJcbiAgICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXHJcbiAgICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xyXG4gICAqIGNvbXBvbmVudCBpZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xyXG4gICAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcclxuICAgIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xyXG4gICAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xyXG4gICAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGlzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcclxuICAgICAgICAgIGlmIChleHBlY3RlZFRhZykge1xyXG4gICAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChoYXNBdHRycykge1xyXG4gICAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIGR5bmFtaWMgc3ludGF4XHJcbiAgICB2YXIgZXhwID0gZWwuZ2V0QXR0cmlidXRlKCdpcycpO1xyXG4gICAgaWYgKGV4cCAhPSBudWxsKSB7XHJcbiAgICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xyXG4gICAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xyXG4gICAgICBpZiAoZXhwICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcclxuICAgKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxyXG4gICAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxyXG4gICAqXHJcbiAgICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcclxuICAgKiBAcGFyYW0geyp9IGNoaWxkVmFsXHJcbiAgICogQHBhcmFtIHtWdWV9IFt2bV1cclxuICAgKi9cclxuXHJcbiAgdmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XHJcbiAgICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcclxuICAgIGZvciAoa2V5IGluIGZyb20pIHtcclxuICAgICAgdG9WYWwgPSB0b1trZXldO1xyXG4gICAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xyXG4gICAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xyXG4gICAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcclxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcclxuICAgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG87XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEYXRhXHJcbiAgICovXHJcblxyXG4gIHN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XHJcbiAgICBpZiAoIXZtKSB7XHJcbiAgICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXHJcbiAgICAgIGlmICghY2hpbGRWYWwpIHtcclxuICAgICAgICByZXR1cm4gcGFyZW50VmFsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XHJcbiAgICAgICAgcmV0dXJuIHBhcmVudFZhbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXBhcmVudFZhbCkge1xyXG4gICAgICAgIHJldHVybiBjaGlsZFZhbDtcclxuICAgICAgfVxyXG4gICAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXHJcbiAgICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxyXG4gICAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cclxuICAgICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXHJcbiAgICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xyXG4gICAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xyXG4gICAgICAgIC8vIGluc3RhbmNlIG1lcmdlXHJcbiAgICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XHJcbiAgICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XHJcbiAgICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEVsXHJcbiAgICovXHJcblxyXG4gIHN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xyXG4gICAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcclxuICAgIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2VcclxuICAgIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nID8gcmV0LmNhbGwodm0pIDogcmV0O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxyXG4gICAqL1xyXG5cclxuICBzdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xyXG4gICAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBc3NldHNcclxuICAgKlxyXG4gICAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cclxuICAgKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXHJcbiAgICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcclxuICAgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcclxuICAgIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcclxuICB9XHJcblxyXG4gIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcclxuICB9KTtcclxuXHJcbiAgLyoqXHJcbiAgICogRXZlbnRzICYgV2F0Y2hlcnMuXHJcbiAgICpcclxuICAgKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXHJcbiAgICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXHJcbiAgICovXHJcblxyXG4gIHN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xyXG4gICAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcclxuICAgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XHJcbiAgICB2YXIgcmV0ID0ge307XHJcbiAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xyXG4gICAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XHJcbiAgICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcclxuICAgICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcclxuICAgICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XHJcbiAgICAgICAgcGFyZW50ID0gW3BhcmVudF07XHJcbiAgICAgIH1cclxuICAgICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE90aGVyIG9iamVjdCBoYXNoZXMuXHJcbiAgICovXHJcblxyXG4gIHN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcclxuICAgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XHJcbiAgICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xyXG4gICAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xyXG4gICAgZXh0ZW5kKHJldCwgY2hpbGRWYWwpO1xyXG4gICAgcmV0dXJuIHJldDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEZWZhdWx0IHN0cmF0ZWd5LlxyXG4gICAqL1xyXG5cclxuICB2YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcclxuICAgIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXHJcbiAgICogY29uc3RydWN0b3JzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcclxuICAgICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XHJcbiAgICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcclxuICAgICAgdmFyIGRlZjtcclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XHJcbiAgICAgIH1cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGlkc1tpXTtcclxuICAgICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XHJcbiAgICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXHJcbiAgICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXHJcbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xyXG4gICAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXHJcbiAgICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xyXG4gICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcclxuICAgIHZhciBpLCB2YWw7XHJcbiAgICBpZiAoaXNBcnJheShwcm9wcykpIHtcclxuICAgICAgb3B0aW9ucy5wcm9wcyA9IHt9O1xyXG4gICAgICBpID0gcHJvcHMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgdmFsID0gcHJvcHNbaV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcclxuICAgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xyXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcclxuICAgICAgaSA9IGtleXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcclxuICAgKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XHJcbiAgICBpZiAoaXNBcnJheShhc3NldHMpKSB7XHJcbiAgICAgIHZhciByZXMgPSB7fTtcclxuICAgICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xyXG4gICAgICB2YXIgYXNzZXQ7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICBhc3NldCA9IGFzc2V0c1tpXTtcclxuICAgICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XHJcbiAgICAgICAgaWYgKCFpZCkge1xyXG4gICAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXNbaWRdID0gYXNzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXNzZXRzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxyXG4gICAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXHJcbiAgICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xyXG4gICAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XHJcbiAgICBndWFyZENvbXBvbmVudHMoY2hpbGQpO1xyXG4gICAgZ3VhcmRQcm9wcyhjaGlsZCk7XHJcbiAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XHJcbiAgICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBvcHRpb25zID0ge307XHJcbiAgICB2YXIga2V5O1xyXG4gICAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcclxuICAgICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcclxuICAgIH1cclxuICAgIGlmIChjaGlsZC5taXhpbnMpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xyXG4gICAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XHJcbiAgICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoa2V5IGluIHBhcmVudCkge1xyXG4gICAgICBtZXJnZUZpZWxkKGtleSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGtleSBpbiBjaGlsZCkge1xyXG4gICAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcclxuICAgICAgICBtZXJnZUZpZWxkKGtleSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XHJcbiAgICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcclxuICAgICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNvbHZlIGFuIGFzc2V0LlxyXG4gICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xyXG4gICAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdhcm5NaXNzaW5nXHJcbiAgICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xyXG4gICAgdmFyIGNhbWVsaXplZElkO1xyXG4gICAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcclxuICAgIC8vIGNhbWVsQ2FzZSBJRFxyXG4gICAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxyXG4gICAgLy8gUGFzY2FsIENhc2UgSURcclxuICAgIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcclxuICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xyXG4gICAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHZhciB1aWQkMSA9IDA7XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxyXG4gICAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXHJcbiAgICpcclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKi9cclxuICBmdW5jdGlvbiBEZXAoKSB7XHJcbiAgICB0aGlzLmlkID0gdWlkJDErKztcclxuICAgIHRoaXMuc3VicyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgLy8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxyXG4gIC8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcclxuICAvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cclxuICBEZXAudGFyZ2V0ID0gbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXHJcbiAgICovXHJcblxyXG4gIERlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xyXG4gICAgdGhpcy5zdWJzLnB1c2goc3ViKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcclxuICAgKi9cclxuXHJcbiAgRGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XHJcbiAgICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXHJcbiAgICovXHJcblxyXG4gIERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cclxuICAgKi9cclxuXHJcbiAgRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XHJcbiAgICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgc3Vic1tpXS51cGRhdGUoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcclxuICB2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKVxyXG5cclxuICAvKipcclxuICAgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcclxuICAgKi9cclxuXHJcbiAgO1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XHJcbiAgICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2RcclxuICAgIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcclxuICAgIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcclxuICAgICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XHJcbiAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcclxuICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xyXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcclxuICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcclxuICAgICAgdmFyIGluc2VydGVkO1xyXG4gICAgICBzd2l0Y2ggKG1ldGhvZCkge1xyXG4gICAgICAgIGNhc2UgJ3B1c2gnOlxyXG4gICAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAndW5zaGlmdCc6XHJcbiAgICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdzcGxpY2UnOlxyXG4gICAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xyXG4gICAgICAvLyBub3RpZnkgY2hhbmdlXHJcbiAgICAgIG9iLmRlcC5ub3RpZnkoKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXHJcbiAgICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcclxuICAgKiBAcGFyYW0geyp9IHZhbFxyXG4gICAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxyXG4gICAqL1xyXG5cclxuICBkZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcclxuICAgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gaXRlbVxyXG4gICAqL1xyXG5cclxuICBkZWYoYXJyYXlQcm90bywgJyRyZW1vdmUnLCBmdW5jdGlvbiAkcmVtb3ZlKGl0ZW0pIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLCBpdGVtKTtcclxuICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xyXG5cclxuICAvKipcclxuICAgKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXHJcbiAgICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cclxuICAgKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxyXG4gICAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cclxuICAgKlxyXG4gICAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXHJcbiAgICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cclxuICAgKi9cclxuXHJcbiAgdmFyIHNob3VsZENvbnZlcnQgPSB0cnVlO1xyXG5cclxuICBmdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xyXG4gICAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xyXG4gICAgZm4oKTtcclxuICAgIHNob3VsZENvbnZlcnQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxyXG4gICAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxyXG4gICAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XHJcbiAgICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBPYnNlcnZlcih2YWx1ZSkge1xyXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XHJcbiAgICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XHJcbiAgICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcclxuICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy53YWxrKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEluc3RhbmNlIG1ldGhvZHNcclxuXHJcbiAgLyoqXHJcbiAgICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXHJcbiAgICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXHJcbiAgICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXHJcbiAgICovXHJcblxyXG4gIE9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXHJcbiAgICovXHJcblxyXG4gIE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIG9ic2VydmUoaXRlbXNbaV0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcclxuICAgKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XHJcbiAgICogQHBhcmFtIHsqfSB2YWxcclxuICAgKi9cclxuXHJcbiAgT2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcclxuICAgIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXHJcbiAgICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxyXG4gICAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XHJcbiAgICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICovXHJcblxyXG4gIE9ic2VydmVyLnByb3RvdHlwZS5hZGRWbSA9IGZ1bmN0aW9uICh2bSkge1xyXG4gICAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcclxuICAgKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqL1xyXG5cclxuICBPYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcclxuICAgIHRoaXMudm1zLiRyZW1vdmUodm0pO1xyXG4gIH07XHJcblxyXG4gIC8vIGhlbHBlcnNcclxuXHJcbiAgLyoqXHJcbiAgICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xyXG4gICAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNyY1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcclxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXHJcbiAgICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xyXG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXHJcbiAgICogaGlkZGVuIHByb3BlcnRpZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxyXG4gICAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXHJcbiAgICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlXHJcbiAgICogQHBhcmFtIHtWdWV9IFt2bV1cclxuICAgKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XHJcbiAgICogQHN0YXRpY1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBvYnNlcnZlKHZhbHVlLCB2bSkge1xyXG4gICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBvYjtcclxuICAgIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xyXG4gICAgICBvYiA9IHZhbHVlLl9fb2JfXztcclxuICAgIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcclxuICAgICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iICYmIHZtKSB7XHJcbiAgICAgIG9iLmFkZFZtKHZtKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvYjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XHJcbiAgICogQHBhcmFtIHsqfSB2YWxcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xyXG4gICAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcclxuXHJcbiAgICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcclxuICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcclxuICAgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XHJcbiAgICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xyXG5cclxuICAgIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xyXG4gICAgICAgIGlmIChEZXAudGFyZ2V0KSB7XHJcbiAgICAgICAgICBkZXAuZGVwZW5kKCk7XHJcbiAgICAgICAgICBpZiAoY2hpbGRPYikge1xyXG4gICAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcclxuICAgICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcclxuICAgICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2V0dGVyKSB7XHJcbiAgICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbCA9IG5ld1ZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcclxuICAgICAgICBkZXAubm90aWZ5KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICB2YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xyXG4gIFx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxyXG4gIFx0c2V0OiBzZXQsXHJcbiAgXHRkZWw6IGRlbCxcclxuICBcdGhhc093bjogaGFzT3duLFxyXG4gIFx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXHJcbiAgXHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxyXG4gIFx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXHJcbiAgXHR0b051bWJlcjogdG9OdW1iZXIsXHJcbiAgXHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcclxuICBcdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3RlcyxcclxuICBcdGNhbWVsaXplOiBjYW1lbGl6ZSxcclxuICBcdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxyXG4gIFx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxyXG4gIFx0YmluZDogYmluZCxcclxuICBcdHRvQXJyYXk6IHRvQXJyYXksXHJcbiAgXHRleHRlbmQ6IGV4dGVuZCxcclxuICBcdGlzT2JqZWN0OiBpc09iamVjdCxcclxuICBcdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXHJcbiAgXHRkZWY6IGRlZixcclxuICBcdGRlYm91bmNlOiBfZGVib3VuY2UsXHJcbiAgXHRpbmRleE9mOiBpbmRleE9mLFxyXG4gIFx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxyXG4gIFx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcclxuICBcdGlzQXJyYXk6IGlzQXJyYXksXHJcbiAgXHRoYXNQcm90bzogaGFzUHJvdG8sXHJcbiAgXHRpbkJyb3dzZXI6IGluQnJvd3NlcixcclxuICBcdGRldnRvb2xzOiBkZXZ0b29scyxcclxuICBcdGlzSUU6IGlzSUUsXHJcbiAgXHRpc0lFOTogaXNJRTksXHJcbiAgXHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcclxuICBcdGlzSW9zOiBpc0lvcyxcclxuICBcdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxyXG4gIFx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcclxuICBcdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXHJcbiAgXHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXHJcbiAgXHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcclxuICBcdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXHJcbiAgXHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXHJcbiAgXHRuZXh0VGljazogbmV4dFRpY2ssXHJcbiAgXHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxyXG4gIFx0cXVlcnk6IHF1ZXJ5LFxyXG4gIFx0aW5Eb2M6IGluRG9jLFxyXG4gIFx0Z2V0QXR0cjogZ2V0QXR0cixcclxuICBcdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcclxuICBcdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcclxuICBcdGJlZm9yZTogYmVmb3JlLFxyXG4gIFx0YWZ0ZXI6IGFmdGVyLFxyXG4gIFx0cmVtb3ZlOiByZW1vdmUsXHJcbiAgXHRwcmVwZW5kOiBwcmVwZW5kLFxyXG4gIFx0cmVwbGFjZTogcmVwbGFjZSxcclxuICBcdG9uOiBvbixcclxuICBcdG9mZjogb2ZmLFxyXG4gIFx0c2V0Q2xhc3M6IHNldENsYXNzLFxyXG4gIFx0YWRkQ2xhc3M6IGFkZENsYXNzLFxyXG4gIFx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxyXG4gIFx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxyXG4gIFx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxyXG4gIFx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcclxuICBcdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxyXG4gIFx0ZmluZFJlZjogZmluZFJlZixcclxuICBcdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxyXG4gIFx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXHJcbiAgXHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxyXG4gIFx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXHJcbiAgXHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcclxuICBcdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxyXG4gIFx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXHJcbiAgXHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXHJcbiAgXHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxyXG4gIFx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxyXG4gIH0pO1xyXG5cclxuICB2YXIgdWlkID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XHJcbiAgICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXHJcbiAgICAgKiBjb25zdHJ1Y3RvcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3NcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgIHRoaXMuJGVsID0gbnVsbDtcclxuICAgICAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XHJcbiAgICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xyXG4gICAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xyXG4gICAgICB0aGlzLiRyZWZzID0ge307IC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcclxuICAgICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xyXG4gICAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcclxuICAgICAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdOyAvLyBhbGwgZGlyZWN0aXZlc1xyXG5cclxuICAgICAgLy8gYSB1aWRcclxuICAgICAgdGhpcy5fdWlkID0gdWlkKys7XHJcblxyXG4gICAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxyXG4gICAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XHJcblxyXG4gICAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcclxuICAgICAgdGhpcy5fZXZlbnRzID0ge307IC8vIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXHJcbiAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxyXG5cclxuICAgICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xyXG4gICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XHJcbiAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxyXG4gICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XHJcblxyXG4gICAgICAvLyBsaWZlY3ljbGUgc3RhdGVcclxuICAgICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcclxuXHJcbiAgICAgIC8vIGNvbnRleHQ6XHJcbiAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcclxuICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXHJcbiAgICAgIC8vIGFuZCBpdHMgaG9zdC5cclxuICAgICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xyXG5cclxuICAgICAgLy8gc2NvcGU6XHJcbiAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXHJcbiAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXHJcbiAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXHJcbiAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cclxuICAgICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcclxuXHJcbiAgICAgIC8vIGZyYWdtZW50OlxyXG4gICAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxyXG4gICAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XHJcbiAgICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXHJcbiAgICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xyXG4gICAgICBpZiAodGhpcy5fZnJhZykge1xyXG4gICAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3RcclxuICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xyXG4gICAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gbWVyZ2Ugb3B0aW9ucy5cclxuICAgICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcclxuXHJcbiAgICAgIC8vIHNldCByZWZcclxuICAgICAgdGhpcy5fdXBkYXRlUmVmKCk7XHJcblxyXG4gICAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxyXG4gICAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cclxuICAgICAgdGhpcy5fZGF0YSA9IHt9O1xyXG5cclxuICAgICAgLy8gY2FsbCBpbml0IGhvb2tcclxuICAgICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcclxuXHJcbiAgICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXHJcbiAgICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xyXG5cclxuICAgICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxyXG4gICAgICB0aGlzLl9pbml0RXZlbnRzKCk7XHJcblxyXG4gICAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xyXG4gICAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xyXG5cclxuICAgICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cclxuICAgICAgaWYgKG9wdGlvbnMuZWwpIHtcclxuICAgICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XHJcblxyXG4gIC8vIGFjdGlvbnNcclxuICB2YXIgQVBQRU5EID0gMDtcclxuICB2YXIgUFVTSCA9IDE7XHJcbiAgdmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XHJcbiAgdmFyIFBVU0hfU1VCX1BBVEggPSAzO1xyXG5cclxuICAvLyBzdGF0ZXNcclxuICB2YXIgQkVGT1JFX1BBVEggPSAwO1xyXG4gIHZhciBJTl9QQVRIID0gMTtcclxuICB2YXIgQkVGT1JFX0lERU5UID0gMjtcclxuICB2YXIgSU5fSURFTlQgPSAzO1xyXG4gIHZhciBJTl9TVUJfUEFUSCA9IDQ7XHJcbiAgdmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XHJcbiAgdmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XHJcbiAgdmFyIEFGVEVSX1BBVEggPSA3O1xyXG4gIHZhciBFUlJPUiA9IDg7XHJcblxyXG4gIHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XHJcblxyXG4gIHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xyXG4gICAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcclxuICAgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcclxuICAgICdbJzogW0lOX1NVQl9QQVRIXSxcclxuICAgICdlb2YnOiBbQUZURVJfUEFUSF1cclxuICB9O1xyXG5cclxuICBwYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xyXG4gICAgJ3dzJzogW0lOX1BBVEhdLFxyXG4gICAgJy4nOiBbQkVGT1JFX0lERU5UXSxcclxuICAgICdbJzogW0lOX1NVQl9QQVRIXSxcclxuICAgICdlb2YnOiBbQUZURVJfUEFUSF1cclxuICB9O1xyXG5cclxuICBwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XHJcbiAgICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcclxuICAgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxyXG4gIH07XHJcblxyXG4gIHBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xyXG4gICAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxyXG4gICAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXHJcbiAgICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxyXG4gICAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxyXG4gICAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcclxuICAgICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcclxuICAgICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cclxuICB9O1xyXG5cclxuICBwYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcclxuICAgIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxyXG4gICAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcclxuICAgICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxyXG4gICAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXHJcbiAgICAnZW9mJzogRVJST1IsXHJcbiAgICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxyXG4gIH07XHJcblxyXG4gIHBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcclxuICAgIFwiJ1wiOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXHJcbiAgICAnZW9mJzogRVJST1IsXHJcbiAgICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cclxuICB9O1xyXG5cclxuICBwYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XHJcbiAgICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXHJcbiAgICAnZW9mJzogRVJST1IsXHJcbiAgICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtDaGFyfSBjaFxyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcclxuICAgIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybiAnZW9mJztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XHJcblxyXG4gICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgIGNhc2UgMHg1QjogLy8gW1xyXG4gICAgICBjYXNlIDB4NUQ6IC8vIF1cclxuICAgICAgY2FzZSAweDJFOiAvLyAuXHJcbiAgICAgIGNhc2UgMHgyMjogLy8gXCJcclxuICAgICAgY2FzZSAweDI3OiAvLyAnXHJcbiAgICAgIGNhc2UgMHgzMDpcclxuICAgICAgICAvLyAwXHJcbiAgICAgICAgcmV0dXJuIGNoO1xyXG5cclxuICAgICAgY2FzZSAweDVGOiAvLyBfXHJcbiAgICAgIGNhc2UgMHgyNDpcclxuICAgICAgICAvLyAkXHJcbiAgICAgICAgcmV0dXJuICdpZGVudCc7XHJcblxyXG4gICAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXHJcbiAgICAgIGNhc2UgMHgwOTogLy8gVGFiXHJcbiAgICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxyXG4gICAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxyXG4gICAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXHJcbiAgICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcclxuICAgICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXHJcbiAgICAgIGNhc2UgMHgyMDI5OlxyXG4gICAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3JcclxuICAgICAgICByZXR1cm4gJ3dzJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBhLXosIEEtWlxyXG4gICAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xyXG4gICAgICByZXR1cm4gJ2lkZW50JztcclxuICAgIH1cclxuXHJcbiAgICAvLyAxLTlcclxuICAgIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XHJcbiAgICAgIHJldHVybiAnbnVtYmVyJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJ2Vsc2UnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXHJcbiAgICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxyXG4gICAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcclxuICAgIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XHJcbiAgICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxyXG4gICAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICAgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcclxuICAgIHZhciBrZXlzID0gW107XHJcbiAgICB2YXIgaW5kZXggPSAtMTtcclxuICAgIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XHJcbiAgICB2YXIgc3ViUGF0aERlcHRoID0gMDtcclxuICAgIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcclxuXHJcbiAgICB2YXIgYWN0aW9ucyA9IFtdO1xyXG5cclxuICAgIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGtleXMucHVzaChrZXkpO1xyXG4gICAgICAgIGtleSA9IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGtleSA9IG5ld0NoYXI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAga2V5ICs9IG5ld0NoYXI7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcclxuICAgICAgc3ViUGF0aERlcHRoKys7XHJcbiAgICB9O1xyXG5cclxuICAgIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XHJcbiAgICAgICAgc3ViUGF0aERlcHRoLS07XHJcbiAgICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xyXG4gICAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XHJcbiAgICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xyXG4gICAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xyXG4gICAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XHJcbiAgICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xyXG4gICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xyXG4gICAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xyXG4gICAgICBpbmRleCsrO1xyXG4gICAgICBjID0gcGF0aFtpbmRleF07XHJcblxyXG4gICAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XHJcbiAgICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xyXG4gICAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XHJcblxyXG4gICAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcclxuICAgICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xyXG4gICAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xyXG4gICAgICBpZiAoYWN0aW9uKSB7XHJcbiAgICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XHJcbiAgICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xyXG4gICAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XHJcbiAgICAgICAga2V5cy5yYXcgPSBwYXRoO1xyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICAgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XHJcbiAgICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcclxuICAgIGlmICghaGl0KSB7XHJcbiAgICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xyXG4gICAgICBpZiAoaGl0KSB7XHJcbiAgICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGl0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XHJcbiAgICByZXR1cm4gcGFyc2VFeHByZXNzaW9uKHBhdGgpLmdldChvYmopO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxyXG4gICAqL1xyXG5cclxuICB2YXIgd2Fybk5vbkV4aXN0ZW50O1xyXG4gIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xyXG4gICAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXHJcbiAgICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcclxuICAgIHZhciBvcmlnaW5hbCA9IG9iajtcclxuICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXRoIHx8ICFpc09iamVjdChvYmopKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciBsYXN0LCBrZXk7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIGxhc3QgPSBvYmo7XHJcbiAgICAgIGtleSA9IHBhdGhbaV07XHJcbiAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcclxuICAgICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpIDwgbCAtIDEpIHtcclxuICAgICAgICBvYmogPSBvYmpba2V5XTtcclxuICAgICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcclxuICAgICAgICAgIG9iaiA9IHt9O1xyXG4gICAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xyXG4gICAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoaXNBcnJheShvYmopKSB7XHJcbiAgICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICBvYmpba2V5XSA9IHZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XHJcbiAgICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxudmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcclxuICAgIHBhcnNlUGF0aDogcGFyc2VQYXRoLFxyXG4gICAgZ2V0UGF0aDogZ2V0UGF0aCxcclxuICAgIHNldFBhdGg6IHNldFBhdGhcclxuICB9KTtcclxuXHJcbiAgdmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcclxuXHJcbiAgdmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xyXG4gIHZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcclxuXHJcbiAgLy8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xyXG4gIHZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XHJcbiAgdmFyIGltcHJvcGVyS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XHJcblxyXG4gIHZhciB3c1JFID0gL1xccy9nO1xyXG4gIHZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XHJcbiAgdmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XHJcbiAgdmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XHJcbiAgdmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcclxuICB2YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XHJcbiAgdmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xyXG5cclxuICBmdW5jdGlvbiBub29wKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXHJcbiAgICpcclxuICAgKiBXaGVuIHJld3JpdGluZyBwYXRocyBmb3VuZCBpbiBhbiBleHByZXNzaW9uLCBpdCBpc1xyXG4gICAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXHJcbiAgICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXHJcbiAgICogcmVtb3ZlIGFuZCBzdG9yZSB0aGVzZSBwYXJ0cyBpbiBhIHRlbXBvcmFyeSBhcnJheSwgYW5kXHJcbiAgICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXHJcbiAgICovXHJcblxyXG4gIHZhciBzYXZlZCA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBTYXZlIHJlcGxhY2VyXHJcbiAgICpcclxuICAgKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxyXG4gICAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcclxuICAgKiAyLiBBIHN0cmluZ1xyXG4gICAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xyXG4gICAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXHJcbiAgICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHNhdmUoc3RyLCBpc1N0cmluZykge1xyXG4gICAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XHJcbiAgICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcclxuICAgIHJldHVybiAnXCInICsgaSArICdcIic7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByYXdcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XHJcbiAgICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XHJcbiAgICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcclxuICAgIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XHJcbiAgICAgIHJldHVybiByYXc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XHJcbiAgICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdG9yZSByZXBsYWNlclxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xyXG4gICAgcmV0dXJuIHNhdmVkW2ldO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcclxuICAgKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XHJcbiAgICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xyXG4gICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XHJcbiAgICB9XHJcbiAgICAvLyByZXNldCBzdGF0ZVxyXG4gICAgc2F2ZWQubGVuZ3RoID0gMDtcclxuICAgIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xyXG4gICAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xyXG4gICAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcclxuICAgIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcclxuICAgIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XHJcbiAgICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXHJcbiAgICpcclxuICAgKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXHJcbiAgICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxyXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXHJcbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XHJcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XHJcbiAgICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbm9vcDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxyXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcclxuICAgIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XHJcbiAgICBpZiAocGF0aCkge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcclxuICAgICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcclxuICAgIGV4cCA9IGV4cC50cmltKCk7XHJcbiAgICAvLyB0cnkgY2FjaGVcclxuICAgIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XHJcbiAgICBpZiAoaGl0KSB7XHJcbiAgICAgIGlmIChuZWVkU2V0ICYmICFoaXQuc2V0KSB7XHJcbiAgICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGhpdDtcclxuICAgIH1cclxuICAgIHZhciByZXMgPSB7IGV4cDogZXhwIH07XHJcbiAgICByZXMuZ2V0ID0gaXNTaW1wbGVQYXRoKGV4cCkgJiYgZXhwLmluZGV4T2YoJ1snKSA8IDBcclxuICAgIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXHJcbiAgICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcclxuICAgIC8vIGR5bmFtaWMgZ2V0dGVyXHJcbiAgICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcclxuICAgIGlmIChuZWVkU2V0KSB7XHJcbiAgICAgIHJlcy5zZXQgPSBjb21waWxlU2V0dGVyKGV4cCk7XHJcbiAgICB9XHJcbiAgICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xyXG4gICAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXHJcbiAgICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xyXG4gICAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXHJcbiAgICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXHJcbiAgICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XHJcbiAgfVxyXG5cclxudmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcclxuICAgIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxyXG4gICAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcclxuICB9KTtcclxuXHJcbiAgLy8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXHJcbiAgLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxyXG4gIC8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxyXG4gIC8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxyXG4gIC8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXHJcbiAgLy8gc3RhdGUuXHJcblxyXG4gIHZhciBxdWV1ZSA9IFtdO1xyXG4gIHZhciB1c2VyUXVldWUgPSBbXTtcclxuICB2YXIgaGFzID0ge307XHJcbiAgdmFyIGNpcmN1bGFyID0ge307XHJcbiAgdmFyIHdhaXRpbmcgPSBmYWxzZTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XHJcbiAgICBxdWV1ZS5sZW5ndGggPSAwO1xyXG4gICAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XHJcbiAgICBoYXMgPSB7fTtcclxuICAgIGNpcmN1bGFyID0ge307XHJcbiAgICB3YWl0aW5nID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XHJcbiAgICB2YXIgX2FnYWluID0gdHJ1ZTtcclxuXHJcbiAgICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcclxuICAgICAgX2FnYWluID0gZmFsc2U7XHJcblxyXG4gICAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xyXG4gICAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcclxuICAgICAgLy8gdXNlciB3YXRjaGVycyB0cmlnZ2VyZWQgbW9yZSB3YXRjaGVycyxcclxuICAgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xyXG4gICAgICBpZiAocXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgX2FnYWluID0gdHJ1ZTtcclxuICAgICAgICBjb250aW51ZSBfZnVuY3Rpb247XHJcbiAgICAgIH1cclxuICAgICAgLy8gZGV2IHRvb2wgaG9va1xyXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xyXG4gICAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcclxuICAgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxyXG4gICAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XHJcbiAgICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XHJcbiAgICAgIGhhc1tpZF0gPSBudWxsO1xyXG4gICAgICB3YXRjaGVyLnJ1bigpO1xyXG4gICAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXHJcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XHJcbiAgICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XHJcbiAgICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcclxuICAgICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUubGVuZ3RoID0gMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXHJcbiAgICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXHJcbiAgICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcclxuICAgKiAgIHByb3BlcnRpZXM6XHJcbiAgICogICAtIHtOdW1iZXJ9IGlkXHJcbiAgICogICAtIHtGdW5jdGlvbn0gcnVuXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcclxuICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XHJcbiAgICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XHJcbiAgICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXHJcbiAgICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XHJcbiAgICAgIGhhc1tpZF0gPSBxLmxlbmd0aDtcclxuICAgICAgcS5wdXNoKHdhdGNoZXIpO1xyXG4gICAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcclxuICAgICAgaWYgKCF3YWl0aW5nKSB7XHJcbiAgICAgICAgd2FpdGluZyA9IHRydWU7XHJcbiAgICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgdWlkJDIgPSAwO1xyXG5cclxuICAvKipcclxuICAgKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcclxuICAgKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxyXG4gICAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxyXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcclxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xyXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XHJcbiAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cclxuICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKi9cclxuICBmdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xyXG4gICAgLy8gbWl4IGluIG9wdGlvbnNcclxuICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XHJcbiAgICB0aGlzLnZtID0gdm07XHJcbiAgICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcclxuICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XHJcbiAgICB0aGlzLmNiID0gY2I7XHJcbiAgICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xyXG4gICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcclxuICAgIHRoaXMuZGVwcyA9IFtdO1xyXG4gICAgdGhpcy5uZXdEZXBzID0gW107XHJcbiAgICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XHJcbiAgICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XHJcbiAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3NcclxuICAgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcclxuICAgIGlmIChpc0ZuKSB7XHJcbiAgICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcclxuICAgICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcclxuICAgICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xyXG4gICAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcclxuICAgIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcclxuICAgIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcclxuICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXHJcbiAgICovXHJcblxyXG4gIFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYmVmb3JlR2V0KCk7XHJcbiAgICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XHJcbiAgICB2YXIgdmFsdWU7XHJcbiAgICB0cnkge1xyXG4gICAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcclxuICAgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xyXG4gICAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXHJcbiAgICBpZiAodGhpcy5kZWVwKSB7XHJcbiAgICAgIHRyYXZlcnNlKHZhbHVlKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcclxuICAgICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xyXG4gICAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcclxuICAgICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHRoaXMuYWZ0ZXJHZXQoKTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqL1xyXG5cclxuICBXYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcclxuICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcclxuICAgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcclxuICAgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xyXG4gICAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcclxuICAgIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xyXG4gICAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XHJcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzY29wZS4ka2V5KSB7XHJcbiAgICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3RcclxuICAgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxyXG4gICAqL1xyXG5cclxuICBXYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBEZXAudGFyZ2V0ID0gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtEZXB9IGRlcFxyXG4gICAqL1xyXG5cclxuICBXYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XHJcbiAgICB2YXIgaWQgPSBkZXAuaWQ7XHJcbiAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcclxuICAgICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcclxuICAgICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcclxuICAgICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XHJcbiAgICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXHJcbiAgICovXHJcblxyXG4gIFdhdGNoZXIucHJvdG90eXBlLmFmdGVyR2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgRGVwLnRhcmdldCA9IG51bGw7XHJcbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XHJcbiAgICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcclxuICAgICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XHJcbiAgICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xyXG4gICAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XHJcbiAgICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xyXG4gICAgdG1wID0gdGhpcy5kZXBzO1xyXG4gICAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xyXG4gICAgdGhpcy5uZXdEZXBzID0gdG1wO1xyXG4gICAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXHJcbiAgICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xyXG4gICAqL1xyXG5cclxuICBXYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xyXG4gICAgaWYgKHRoaXMubGF6eSkge1xyXG4gICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcclxuICAgICAgdGhpcy5ydW4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxyXG4gICAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxyXG4gICAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcclxuICAgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xyXG4gICAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxyXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcclxuICAgICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcclxuICAgICAgfVxyXG4gICAgICBwdXNoV2F0Y2hlcih0aGlzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXHJcbiAgICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXHJcbiAgICovXHJcblxyXG4gIFdhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLmFjdGl2ZSkge1xyXG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xyXG4gICAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcclxuICAgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXHJcbiAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcclxuICAgICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcclxuICAgICAgLy8gbm9uLXNoYWxsb3cgdXBkYXRlIChjYXVzZWQgYnkgYSB2bSBkaWdlc3QpLlxyXG4gICAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xyXG4gICAgICAgIC8vIHNldCBuZXcgdmFsdWVcclxuICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xyXG4gICAgICAgIC8vIHRocm93cywgd2UgYWxzbyB0aHJvdyB0aGUgc2F2ZWQgYmVmb3JlLXB1c2ggZXJyb3JcclxuICAgICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cclxuICAgICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XHJcbiAgICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cclxuICAgKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXHJcbiAgICovXHJcblxyXG4gIFdhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcclxuICAgIC8vIGNvbGxlY3RlZC5cclxuICAgIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcclxuICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xyXG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xyXG4gICAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXHJcbiAgICovXHJcblxyXG4gIFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcclxuICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXHJcbiAgICovXHJcblxyXG4gIFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuYWN0aXZlKSB7XHJcbiAgICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3RcclxuICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxyXG4gICAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxyXG4gICAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXHJcbiAgICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XHJcbiAgICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcclxuICAgKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxyXG4gICAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbFxyXG4gICAqL1xyXG5cclxuICB2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xyXG4gIGZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xyXG4gICAgdmFyIGkgPSB1bmRlZmluZWQsXHJcbiAgICAgICAga2V5cyA9IHVuZGVmaW5lZDtcclxuICAgIGlmICghc2Vlbikge1xyXG4gICAgICBzZWVuID0gc2Vlbk9iamVjdHM7XHJcbiAgICAgIHNlZW4uY2xlYXIoKTtcclxuICAgIH1cclxuICAgIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XHJcbiAgICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcclxuICAgIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XHJcbiAgICAgIGlmICh2YWwuX19vYl9fKSB7XHJcbiAgICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XHJcbiAgICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWVuLmFkZChkZXBJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc0EpIHtcclxuICAgICAgICBpID0gdmFsLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzTykge1xyXG4gICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xyXG4gICAgICAgIGkgPSBrZXlzLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgdGV4dCQxID0ge1xyXG5cclxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xyXG4gICAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xyXG4gIHZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XHJcblxyXG4gIHZhciBtYXAgPSB7XHJcbiAgICBlZmF1bHQ6IFswLCAnJywgJyddLFxyXG4gICAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcclxuICAgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcclxuICAgIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cclxuICB9O1xyXG5cclxuICBtYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcclxuXHJcbiAgbWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xyXG5cclxuICBtYXAudGhlYWQgPSBtYXAudGJvZHkgPSBtYXAuY29sZ3JvdXAgPSBtYXAuY2FwdGlvbiA9IG1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xyXG5cclxuICBtYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcclxuICAgKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc1JlYWxUZW1wbGF0ZShub2RlKSB7XHJcbiAgICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XHJcbiAgfVxyXG5cclxuICB2YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XHJcbiAgdmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XHJcbiAgdmFyIGNvbW1lbnRSRSA9IC88IS0tLztcclxuXHJcbiAgLyoqXHJcbiAgICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXHJcbiAgICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcclxuICAgKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSByYXdcclxuICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlU3RyaW5nLCByYXcpIHtcclxuICAgIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxyXG4gICAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XHJcbiAgICB2YXIgaGl0ID0gdGVtcGxhdGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xyXG4gICAgaWYgKGhpdCkge1xyXG4gICAgICByZXR1cm4gaGl0O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XHJcbiAgICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcclxuICAgIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XHJcblxyXG4gICAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xyXG4gICAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXHJcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcclxuICAgICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xyXG4gICAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xyXG4gICAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcclxuICAgICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XHJcbiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nICsgc3VmZml4O1xyXG4gICAgICB3aGlsZSAoZGVwdGgtLSkge1xyXG4gICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGNoaWxkO1xyXG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xyXG4gICAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXHJcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcmF3KSB7XHJcbiAgICAgIHRyaW1Ob2RlKGZyYWcpO1xyXG4gICAgfVxyXG4gICAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xyXG4gICAgcmV0dXJuIGZyYWc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XHJcbiAgICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxyXG4gICAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xyXG4gICAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxyXG4gICAgLy8gZXZlbnRzIGFuZCBjYW4gY2F1c2UgY3Jhc2hlcyB3aGVuIHRoZSBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIERPTSwgc28gd2VcclxuICAgIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcclxuICAgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xyXG4gICAgfVxyXG4gICAgLy8gc2NyaXB0IHRlbXBsYXRlXHJcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xyXG4gICAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcclxuICAgIH1cclxuICAgIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcclxuICAgIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xyXG4gICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICB2YXIgY2hpbGQ7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xyXG4gICAgd2hpbGUgKGNoaWxkID0gY2xvbmVkTm9kZS5maXJzdENoaWxkKSB7XHJcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cclxuICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgICB9XHJcbiAgICB0cmltTm9kZShmcmFnKTtcclxuICAgIHJldHVybiBmcmFnO1xyXG4gIH1cclxuXHJcbiAgLy8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcclxuICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxyXG4gIHZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgaWYgKGluQnJvd3Nlcikge1xyXG4gICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+JztcclxuICAgICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9KSgpO1xyXG5cclxuICAvLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xyXG4gIHZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAoaW5Ccm93c2VyKSB7XHJcbiAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgICAgdC5wbGFjZWhvbGRlciA9ICd0JztcclxuICAgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSkoKTtcclxuXHJcbiAgLyoqXHJcbiAgICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxyXG4gICAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cclxuICAgKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xyXG4gICAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxyXG4gICAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcclxuICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XHJcbiAgICB9XHJcbiAgICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XHJcbiAgICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XHJcbiAgICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xyXG4gICAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XHJcbiAgICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XHJcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcclxuICAgICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcclxuICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcclxuICAgICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xyXG4gICAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xyXG4gICAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcclxuICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxyXG4gICAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXHJcbiAgICogaW5zdGFuY2UgdGVtcGxhdGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHRlbXBsYXRlXHJcbiAgICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxyXG4gICAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XHJcbiAgICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxyXG4gICAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXHJcbiAgICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2PidcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSByYXdcclxuICAgKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxyXG4gICAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXHJcbiAgICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHNob3VsZENsb25lLCByYXcpIHtcclxuICAgIHZhciBub2RlLCBmcmFnO1xyXG5cclxuICAgIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbiAgICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcclxuICAgICAgdHJpbU5vZGUodGVtcGxhdGUpO1xyXG4gICAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgLy8gaWQgc2VsZWN0b3JcclxuICAgICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcclxuICAgICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xyXG4gICAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcclxuICAgICAgICBpZiAoIWZyYWcpIHtcclxuICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XHJcbiAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XHJcbiAgICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcclxuICAgICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcclxuICAgICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xyXG4gICAgICAvLyBhIGRpcmVjdCBub2RlXHJcbiAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xyXG4gIH1cclxuXHJcbnZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXHJcbiAgICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXHJcbiAgfSk7XHJcblxyXG4gIHZhciBodG1sID0ge1xyXG5cclxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxyXG4gICAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxyXG4gICAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xyXG4gICAgICAgIC8vIGhvbGQgbm9kZXNcclxuICAgICAgICB0aGlzLm5vZGVzID0gW107XHJcbiAgICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXHJcbiAgICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xyXG4gICAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcclxuICAgICAgaWYgKHRoaXMubm9kZXMpIHtcclxuICAgICAgICB0aGlzLnN3YXAodmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc3dhcDogZnVuY3Rpb24gc3dhcCh2YWx1ZSkge1xyXG4gICAgICAvLyByZW1vdmUgb2xkIG5vZGVzXHJcbiAgICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxyXG4gICAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXHJcbiAgICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxyXG4gICAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xyXG4gICAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cclxuICAgKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXHJcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXHJcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcclxuICAgIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xyXG4gICAgdGhpcy52bSA9IHZtO1xyXG4gICAgdGhpcy5zY29wZSA9IHNjb3BlO1xyXG4gICAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcclxuICAgIGlmIChwYXJlbnRGcmFnKSB7XHJcbiAgICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcclxuICAgIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcclxuICAgIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxyXG4gICAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xyXG4gICAgaWYgKHNpbmdsZSkge1xyXG4gICAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XHJcbiAgICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xyXG4gICAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcclxuICAgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xyXG4gICAgICB0aGlzLmZyYWcgPSBmcmFnO1xyXG4gICAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XHJcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xyXG4gICAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xyXG4gICAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxyXG4gICAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxyXG4gICAqIGZyYWdtZW50cy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcclxuICAgKi9cclxuXHJcbiAgRnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcclxuICAgIHZhciBpLCBsO1xyXG4gICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xyXG4gICAgfVxyXG4gICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XHJcbiAgICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xyXG4gICAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XHJcbiAgICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XHJcbiAgICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xyXG4gICAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcclxuICAgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcclxuICAgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcclxuICAgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XHJcbiAgICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcclxuICAgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XHJcbiAgICAgIH1cclxuICAgICAgc2VsZi5kZXN0cm95KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbXVsdGlCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xyXG4gICAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XHJcbiAgICB2YXIgdm0gPSB0aGlzLnZtO1xyXG4gICAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xyXG4gICAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcclxuICAgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xyXG4gICAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xyXG4gICAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcclxuICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcclxuICAgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XHJcbiAgICAgIH1cclxuICAgICAgc2VsZi5kZXN0cm95KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXBhcmUgdGhlIGZyYWdtZW50IGZvciByZW1vdmFsLlxyXG4gICAqL1xyXG5cclxuICBGcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGksIGw7XHJcbiAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxyXG4gICAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XHJcbiAgICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXHJcbiAgICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxyXG4gICAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXHJcbiAgICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXHJcbiAgICAgIC8vIG9uIHRoZW0uXHJcbiAgICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xyXG4gICAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xyXG4gICAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXHJcbiAgICAgIC8vIGR1cmluZyByZW1vdmFsLlxyXG4gICAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cclxuICAgKi9cclxuXHJcbiAgRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XHJcbiAgICAgIHRoaXMucGFyZW50RnJhZy5jaGlsZEZyYWdzLiRyZW1vdmUodGhpcyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xyXG4gICAgdGhpcy51bmxpbmsoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcclxuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xyXG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcclxuICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xyXG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYVxyXG4gICAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gRnJhZ21lbnRGYWN0b3J5KHZtLCBlbCkge1xyXG4gICAgdGhpcy52bSA9IHZtO1xyXG4gICAgdmFyIHRlbXBsYXRlO1xyXG4gICAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJztcclxuICAgIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcclxuICAgICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcclxuICAgIHZhciBsaW5rZXI7XHJcbiAgICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xyXG4gICAgaWYgKGNpZCA+IDApIHtcclxuICAgICAgdmFyIGNhY2hlSWQgPSBjaWQgKyAoaXNTdHJpbmcgPyBlbCA6IGdldE91dGVySFRNTChlbCkpO1xyXG4gICAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XHJcbiAgICAgIGlmICghbGlua2VyKSB7XHJcbiAgICAgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xyXG4gICAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmxpbmtlciA9IGxpbmtlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1Z1ZX0gaG9zdFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxyXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcclxuICAgKi9cclxuXHJcbiAgRnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcclxuICAgIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xyXG4gICAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xyXG4gIH07XHJcblxyXG4gIHZhciBPTiA9IDcwMDtcclxuICB2YXIgTU9ERUwgPSA4MDA7XHJcbiAgdmFyIEJJTkQgPSA4NTA7XHJcbiAgdmFyIFRSQU5TSVRJT04gPSAxMTAwO1xyXG4gIHZhciBFTCA9IDE1MDA7XHJcbiAgdmFyIENPTVBPTkVOVCA9IDE1MDA7XHJcbiAgdmFyIFBBUlRJQUwgPSAxNzUwO1xyXG4gIHZhciBJRiA9IDIxMDA7XHJcbiAgdmFyIEZPUiA9IDIyMDA7XHJcbiAgdmFyIFNMT1QgPSAyMzAwO1xyXG5cclxuICB2YXIgdWlkJDMgPSAwO1xyXG5cclxuICB2YXIgdkZvciA9IHtcclxuXHJcbiAgICBwcmlvcml0eTogRk9SLFxyXG4gICAgdGVybWluYWw6IHRydWUsXHJcblxyXG4gICAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcclxuICAgICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcclxuICAgICAgaWYgKGluTWF0Y2gpIHtcclxuICAgICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xyXG4gICAgICAgIGlmIChpdE1hdGNoKSB7XHJcbiAgICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XHJcbiAgICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLmFsaWFzKSB7XHJcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxyXG4gICAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xyXG5cclxuICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcclxuICAgICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXHJcbiAgICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXHJcbiAgICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxyXG4gICAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cclxuICAgICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXHJcbiAgICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XHJcbiAgICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcclxuXHJcbiAgICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xyXG4gICAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xyXG4gICAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XHJcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xyXG4gICAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xyXG5cclxuICAgICAgLy8gY2FjaGVcclxuICAgICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcblxyXG4gICAgICAvLyBmcmFnbWVudCBmYWN0b3J5XHJcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcclxuICAgICAgdGhpcy5kaWZmKGRhdGEpO1xyXG4gICAgICB0aGlzLnVwZGF0ZVJlZigpO1xyXG4gICAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlmZiwgYmFzZWQgb24gbmV3IGRhdGEgYW5kIG9sZCBkYXRhLCBkZXRlcm1pbmUgdGhlXHJcbiAgICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcclxuICAgICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcclxuICAgICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxyXG4gICAgICogc2VlbiBkYXRhLiBUaGlzIGFsbG93cyB1cyB0byBhY2hpZXZlIE8obikgd2hpY2ggaXNcclxuICAgICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxyXG4gICAgICogd2hpY2ggaXMgTyhtICogbikuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxyXG4gICAgICovXHJcblxyXG4gICAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XHJcbiAgICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XHJcbiAgICAgIHZhciBpdGVtID0gZGF0YVswXTtcclxuICAgICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xyXG5cclxuICAgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xyXG4gICAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xyXG4gICAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcclxuICAgICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcclxuICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcclxuICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcclxuICAgICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xyXG4gICAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcclxuICAgICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XHJcbiAgICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XHJcblxyXG4gICAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcclxuICAgICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxyXG4gICAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcclxuICAgICAgLy8gaW5zdGFuY2UuXHJcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGl0ZW0gPSBkYXRhW2ldO1xyXG4gICAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xyXG4gICAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbTtcclxuICAgICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xyXG4gICAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XHJcbiAgICAgICAgaWYgKGZyYWcpIHtcclxuICAgICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XHJcbiAgICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XHJcbiAgICAgICAgICAvLyB1cGRhdGUgJGluZGV4XHJcbiAgICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XHJcbiAgICAgICAgICAvLyB1cGRhdGUgJGtleVxyXG4gICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3JcclxuICAgICAgICAgIGlmIChpdGVyYXRvcikge1xyXG4gICAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxyXG4gICAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cclxuICAgICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XHJcbiAgICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gbmV3IGlzbnRhbmNlXHJcbiAgICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xyXG4gICAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmcmFnc1tpXSA9IGZyYWc7XHJcbiAgICAgICAgaWYgKGluaXQpIHtcclxuICAgICAgICAgIGZyYWcuYmVmb3JlKGVuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXHJcbiAgICAgIGlmIChpbml0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcclxuICAgICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxyXG4gICAgICAvLyBmcm9tIGNhY2hlKVxyXG4gICAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcclxuICAgICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcclxuICAgICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxyXG4gICAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXHJcbiAgICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXHJcbiAgICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XHJcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XHJcbiAgICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xyXG4gICAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xyXG4gICAgICBpZiAocmVtb3ZhbEluZGV4KSB7XHJcbiAgICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcclxuICAgICAgICAgIHJldHVybiB3LmFjdGl2ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxyXG4gICAgICAvLyByaWdodCBwbGFjZS5cclxuICAgICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XHJcbiAgICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XHJcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBmcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBmcmFnID0gZnJhZ3NbaV07XHJcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxyXG4gICAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV07XHJcbiAgICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XHJcbiAgICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xyXG4gICAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpO1xyXG4gICAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcclxuICAgICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXHJcbiAgICAgICAgICAvLyB0aGFua3MgdG8gc3VnZ2VzdGlvbnMgYnkgQGxpdm9yYXMgaW4gIzE4MDdcclxuICAgICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxyXG4gICAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxyXG4gICAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxyXG4gICAgICogQHJldHVybiB7RnJhZ21lbnR9XHJcbiAgICAgKi9cclxuXHJcbiAgICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcclxuICAgICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xyXG4gICAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXHJcbiAgICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XHJcbiAgICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xyXG4gICAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcclxuICAgICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcclxuICAgICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XHJcbiAgICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxyXG4gICAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XHJcbiAgICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcclxuICAgICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xyXG4gICAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xyXG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxyXG4gICAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cclxuICAgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xyXG4gICAgICB9KTtcclxuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XHJcbiAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xyXG4gICAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcclxuICAgICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXHJcbiAgICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XHJcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xyXG4gICAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcclxuICAgICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xyXG4gICAgICByZXR1cm4gZnJhZztcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxyXG4gICAgICovXHJcblxyXG4gICAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XHJcbiAgICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xyXG4gICAgICBpZiAoIXJlZikgcmV0dXJuO1xyXG4gICAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcclxuICAgICAgdmFyIHJlZnM7XHJcbiAgICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XHJcbiAgICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZWZzID0ge307XHJcbiAgICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XHJcbiAgICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBoYXNoW3JlZl0gPSByZWZzO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXHJcbiAgICAgKiBwYXJlbnQgPHNlbGVjdD4uXHJcbiAgICAgKi9cclxuXHJcbiAgICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZTtcclxuICAgICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcclxuICAgICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICAgIG1vZGVsLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcclxuICAgICAqL1xyXG5cclxuICAgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcclxuICAgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XHJcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XHJcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcclxuICAgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xyXG4gICAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxyXG4gICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxyXG4gICAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxyXG4gICAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XHJcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcclxuICAgICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcclxuICAgICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcclxuICAgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcclxuICAgICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XHJcbiAgICAgICAgICByZW1vdmUoYW5jaG9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcclxuICAgICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXHJcbiAgICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcclxuICAgICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XHJcbiAgICAgKi9cclxuXHJcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcclxuICAgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XHJcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XHJcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xyXG4gICAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcclxuICAgICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcclxuICAgICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxyXG4gICAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XHJcbiAgICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcclxuICAgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xyXG4gICAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xyXG4gICAgICAgICAgZnJhZy5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmcmFnLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxyXG4gICAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXHJcbiAgICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxyXG4gICAgICovXHJcblxyXG4gICAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcclxuICAgICAgLy8gZml4IGEgY29tbW9uIGlzc3VlIHdpdGggU29ydGFibGU6XHJcbiAgICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xyXG4gICAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cclxuICAgICAgLy8gdGhlIGVuZCBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxyXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcclxuICAgICAgICB0aGlzLmVuZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcclxuICAgICAgfVxyXG4gICAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXHJcbiAgICAgKi9cclxuXHJcbiAgICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xyXG4gICAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XHJcbiAgICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XHJcbiAgICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xyXG4gICAgICB2YXIgaWQ7XHJcbiAgICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcclxuICAgICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xyXG4gICAgICAgIGlmICghY2FjaGVbaWRdKSB7XHJcbiAgICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcclxuICAgICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZCA9IHRoaXMuaWQ7XHJcbiAgICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XHJcbiAgICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XHJcbiAgICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZnJhZy5yYXcgPSB2YWx1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XHJcbiAgICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cclxuICAgICAqL1xyXG5cclxuICAgIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcclxuICAgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xyXG4gICAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcclxuICAgICAgdmFyIGZyYWc7XHJcbiAgICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcclxuICAgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcclxuICAgICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xyXG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmcmFnO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xyXG4gICAgICovXHJcblxyXG4gICAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XHJcbiAgICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xyXG4gICAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XHJcbiAgICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XHJcbiAgICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcclxuICAgICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cclxuICAgICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXHJcbiAgICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcclxuICAgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XHJcbiAgICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcclxuICAgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcclxuICAgICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xyXG4gICAgICAgIGZyYWcucmF3ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAgICovXHJcblxyXG4gICAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcclxuICAgICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XHJcbiAgICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XHJcbiAgICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xyXG4gICAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcclxuICAgICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXHJcbiAgICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxyXG4gICAgICovXHJcblxyXG4gICAgX3ByZVByb2Nlc3M6IGZ1bmN0aW9uIF9wcmVQcm9jZXNzKHZhbHVlKSB7XHJcbiAgICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cclxuICAgICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXHJcbiAgICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcclxuICAgICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XHJcbiAgICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cclxuICAgICAqL1xyXG5cclxuICAgIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XHJcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xyXG4gICAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxyXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xyXG4gICAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcclxuICAgICAgICB2YXIga2V5O1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICByZXNbaV0gPSB7XHJcbiAgICAgICAgICAgICRrZXk6IGtleSxcclxuICAgICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWUgfHwgW107XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XHJcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XHJcbiAgICAgICAgKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzW3RoaXMuZGVzY3JpcHRvci5yZWZdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5mcmFncykge1xyXG4gICAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGZyYWc7XHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgZnJhZyA9IHRoaXMuZnJhZ3NbaV07XHJcbiAgICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XHJcbiAgICAgICAgICBmcmFnLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcclxuICAgKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXHJcbiAgICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXHJcbiAgICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcclxuICAgKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxyXG4gICAqXHJcbiAgICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxyXG4gICAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xyXG4gICAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcclxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcclxuICAgIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmICghZWwpIHJldHVybjtcclxuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcclxuICAgIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcclxuICAgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICBpZiAoIWVsKSByZXR1cm47XHJcbiAgICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcclxuICAgIH1cclxuICAgIHJldHVybiBmcmFnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcclxuICAgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XHJcbiAgICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcclxuICAgIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcclxuICAgIGlmIChmcmFnLmVuZCkge1xyXG4gICAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBub2RlLl9fdnVlX187XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBuXHJcbiAgICogQHJldHVybiB7QXJyYXl9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHJhbmdlKG4pIHtcclxuICAgIHZhciBpID0gLTE7XHJcbiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xyXG4gICAgd2hpbGUgKCsraSA8IG4pIHtcclxuICAgICAgcmV0W2ldID0gaTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcGFyYW0geyp9IHZhbHVlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XHJcbiAgICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHZhciB2SWYgPSB7XHJcblxyXG4gICAgcHJpb3JpdHk6IElGLFxyXG4gICAgdGVybWluYWw6IHRydWUsXHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcclxuICAgICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xyXG4gICAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICByZW1vdmUobmV4dCk7XHJcbiAgICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcclxuICAgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xyXG4gICAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XHJcbiAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xyXG4gICAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5mcmFnKSB7XHJcbiAgICAgICAgICB0aGlzLmluc2VydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xyXG4gICAgICBpZiAodGhpcy5lbHNlRnJhZykge1xyXG4gICAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgLy8gbGF6eSBpbml0IGZhY3RvcnlcclxuICAgICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xyXG4gICAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XHJcbiAgICAgIGlmICh0aGlzLmZyYWcpIHtcclxuICAgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5mcmFnID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcclxuICAgICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcclxuICAgICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XHJcbiAgICAgIGlmICh0aGlzLmZyYWcpIHtcclxuICAgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XHJcbiAgICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgc2hvdyA9IHtcclxuXHJcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXHJcbiAgICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xyXG4gICAgICBpZiAodGhpcy5lbHNlRWwpIHtcclxuICAgICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcclxuICAgICAgaWYgKGluRG9jKGVsKSkge1xyXG4gICAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9nZ2xlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIHRleHQkMiA9IHtcclxuXHJcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcbiAgICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcclxuICAgICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xyXG4gICAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xyXG4gICAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcclxuXHJcbiAgICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXHJcbiAgICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xyXG4gICAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXHJcbiAgICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcclxuICAgICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cclxuICAgICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcclxuICAgICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXHJcbiAgICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcclxuICAgICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcclxuICAgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXHJcbiAgICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXHJcbiAgICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxyXG4gICAgICAgICAgLy9cclxuICAgICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxyXG4gICAgICAgICAgaWYgKCFsYXp5KSB7XHJcbiAgICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXHJcbiAgICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cclxuICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XHJcbiAgICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xyXG4gICAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcclxuICAgICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XHJcbiAgICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxyXG4gICAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcclxuICAgICAgICBzZWxmLnNldCh2YWwpO1xyXG4gICAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcclxuICAgICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXHJcbiAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcclxuICAgICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBhcHBseSBkZWJvdW5jZVxyXG4gICAgICBpZiAoZGVib3VuY2UpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3RcclxuICAgICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xyXG4gICAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcclxuICAgICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcclxuICAgICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcclxuICAgICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXHJcbiAgICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcclxuICAgICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxyXG4gICAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XHJcbiAgICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xyXG4gICAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xyXG4gICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XHJcbiAgICAgICAgaWYgKCFsYXp5KSB7XHJcbiAgICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xyXG4gICAgICAgIGlmICghbGF6eSkge1xyXG4gICAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcclxuICAgICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XHJcbiAgICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XHJcbiAgICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxyXG4gICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgZWwudmFsdWUudHJpbSgpKSB7XHJcbiAgICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxyXG4gICAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XHJcbiAgICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcclxuICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9LFxyXG5cclxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICB2YXIgZWwgPSB0aGlzLmVsO1xyXG4gICAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcclxuICAgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XHJcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcclxuICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcmFkaW8gPSB7XHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICB2YXIgZWwgPSB0aGlzLmVsO1xyXG5cclxuICAgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxyXG4gICAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcclxuICAgICAgICAgIHJldHVybiBlbC5fdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcclxuICAgICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XHJcbiAgICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcclxuXHJcbiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xyXG4gICAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBzZWxlY3QgPSB7XHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcclxuXHJcbiAgICAgIC8vIG1ldGhvZCB0byBmb3JjZSB1cGRhdGUgRE9NIHVzaW5nIGxhdGVzdCB2YWx1ZS5cclxuICAgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xyXG4gICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci5nZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxyXG4gICAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xyXG5cclxuICAgICAgLy8gYXR0YWNoIGxpc3RlbmVyXHJcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcclxuICAgICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xyXG4gICAgICAgIHNlbGYuc2V0KHZhbHVlKTtcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XHJcblxyXG4gICAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxyXG4gICAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcclxuICAgICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xyXG4gICAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XHJcbiAgICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cclxuICAgICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxyXG4gICAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoIWluRG9jKGVsKSkge1xyXG4gICAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcbiAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcclxuICAgICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xyXG4gICAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xyXG4gICAgICB2YXIgb3AsIHZhbDtcclxuICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIG9wID0gb3B0aW9uc1tpXTtcclxuICAgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcclxuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cclxuICAgICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xyXG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XHJcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBzZWxlY3QgdmFsdWVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbml0XHJcbiAgICogQHJldHVybiB7QXJyYXl8Kn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XHJcbiAgICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XHJcbiAgICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIG9wID0gZWwub3B0aW9uc1tpXTtcclxuICAgICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XHJcbiAgICAgIGlmIChzZWxlY3RlZCkge1xyXG4gICAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xyXG4gICAgICAgIGlmIChtdWx0aSkge1xyXG4gICAgICAgICAgcmVzLnB1c2godmFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcclxuICAgKiBjYXNlIHdlIG5lZWQgdG8gbWF0Y2ggc3RyaW5nL251bWJlcnMgd2l0aCBjdXN0b20gZXF1YWwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJcclxuICAgKiBAcGFyYW0geyp9IHZhbFxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcclxuICAgIHZhciBpID0gYXJyLmxlbmd0aDtcclxuICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAtMTtcclxuICB9XHJcblxyXG4gIHZhciBjaGVja2JveCA9IHtcclxuXHJcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcblxyXG4gICAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcclxuICAgICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcclxuICAgICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcclxuICAgICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkobW9kZWwpKSB7XHJcbiAgICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcclxuICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcclxuICAgICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIGhhbmRsZXJzID0ge1xyXG4gICAgdGV4dDogdGV4dCQyLFxyXG4gICAgcmFkaW86IHJhZGlvLFxyXG4gICAgc2VsZWN0OiBzZWxlY3QsXHJcbiAgICBjaGVja2JveDogY2hlY2tib3hcclxuICB9O1xyXG5cclxuICB2YXIgbW9kZWwgPSB7XHJcblxyXG4gICAgcHJpb3JpdHk6IE1PREVMLFxyXG4gICAgdHdvV2F5OiB0cnVlLFxyXG4gICAgaGFuZGxlcnM6IGhhbmRsZXJzLFxyXG4gICAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQb3NzaWJsZSBlbGVtZW50czpcclxuICAgICAqICAgPHNlbGVjdD5cclxuICAgICAqICAgPHRleHRhcmVhPlxyXG4gICAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cclxuICAgICAqICAgICAtIHRleHRcclxuICAgICAqICAgICAtIGNoZWNrYm94XHJcbiAgICAgKiAgICAgLSByYWRpb1xyXG4gICAgICogICAgIC0gbnVtYmVyXHJcbiAgICAgKi9cclxuXHJcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXHJcbiAgICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XHJcbiAgICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyBhIHJlYWQtb25seSBmaWx0ZXIgd2l0aCAnICsgJ3YtbW9kZWw9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIi4gJyArICdZb3UgbWlnaHQgd2FudCB0byB1c2UgYSB0d28td2F5IGZpbHRlciB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nLCB0aGlzLnZtKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZWwgPSB0aGlzLmVsO1xyXG4gICAgICB2YXIgdGFnID0gZWwudGFnTmFtZTtcclxuICAgICAgdmFyIGhhbmRsZXI7XHJcbiAgICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcclxuICAgICAgICBoYW5kbGVyID0gaGFuZGxlcnNbZWwudHlwZV0gfHwgaGFuZGxlcnMudGV4dDtcclxuICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcclxuICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdURVhUQVJFQScpIHtcclxuICAgICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XHJcbiAgICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xyXG4gICAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xyXG4gICAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cclxuICAgICAqL1xyXG5cclxuICAgIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xyXG4gICAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcclxuICAgICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XHJcbiAgICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcclxuICAgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xyXG4gICAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xyXG4gICAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XHJcbiAgICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBrZXlDb2RlIGFsaWFzZXNcclxuICB2YXIga2V5Q29kZXMgPSB7XHJcbiAgICBlc2M6IDI3LFxyXG4gICAgdGFiOiA5LFxyXG4gICAgZW50ZXI6IDEzLFxyXG4gICAgc3BhY2U6IDMyLFxyXG4gICAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXHJcbiAgICB1cDogMzgsXHJcbiAgICBsZWZ0OiAzNyxcclxuICAgIHJpZ2h0OiAzOSxcclxuICAgIGRvd246IDQwXHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcclxuICAgIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XHJcbiAgICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XHJcbiAgICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xyXG4gICAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcclxuICAgIH0pO1xyXG4gICAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcclxuICAgIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcclxuICAgICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XHJcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHZhciBvbiQxID0ge1xyXG5cclxuICAgIHByaW9yaXR5OiBPTixcclxuICAgIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcclxuICAgIGtleUNvZGVzOiBrZXlDb2RlcyxcclxuXHJcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xyXG4gICAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XHJcbiAgICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXHJcbiAgICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XHJcbiAgICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xyXG4gICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhcHBseSBtb2RpZmllcnNcclxuICAgICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcclxuICAgICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xyXG4gICAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgLy8ga2V5IGZpbHRlclxyXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50JyAmJiBrZXkgIT09ICdzZWxmJyAmJiBrZXkgIT09ICdjYXB0dXJlJztcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChrZXlzLmxlbmd0aCkge1xyXG4gICAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcclxuXHJcbiAgICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcclxuICAgICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XHJcbiAgICAgIGlmICh0aGlzLmhhbmRsZXIpIHtcclxuICAgICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XHJcbiAgdmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcclxuICB2YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XHJcbiAgdmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcblxyXG4gIHZhciB0ZXN0RWwgPSBudWxsO1xyXG5cclxuICB2YXIgc3R5bGUgPSB7XHJcblxyXG4gICAgZGVlcDogdHJ1ZSxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcclxuICAgICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xyXG4gICAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cclxuICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcclxuICAgICAgdmFyIG5hbWUsIHZhbDtcclxuICAgICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XHJcbiAgICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcclxuICAgICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcclxuICAgICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xyXG4gICAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xyXG4gICAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xyXG4gICAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxyXG4gICAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXHJcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xyXG4gICAgICAgIGlmIChpc0ltcG9ydGFudCkge1xyXG4gICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XHJcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxyXG4gICAqIC0gY2FjaGUgcmVzdWx0XHJcbiAgICogLSBhdXRvIHByZWZpeFxyXG4gICAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XHJcbiAgICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XHJcbiAgICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XHJcbiAgICB9XHJcbiAgICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xyXG4gICAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXHJcbiAgICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHByZWZpeChwcm9wKSB7XHJcbiAgICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xyXG4gICAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XHJcbiAgICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpO1xyXG4gICAgaWYgKCF0ZXN0RWwpIHtcclxuICAgICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB9XHJcbiAgICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcclxuICAgIHZhciBwcmVmaXhlZDtcclxuICAgIGlmIChjYW1lbCAhPT0gJ2ZpbHRlcicgJiYgY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAga2ViYWI6IHByb3AsXHJcbiAgICAgICAgY2FtZWw6IGNhbWVsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xyXG4gICAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXHJcbiAgICAgICAgICBjYW1lbDogcHJlZml4ZWRcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB4bGlua1xyXG4gIHZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xyXG4gIHZhciB4bGlua1JFID0gL154bGluazovO1xyXG5cclxuICAvLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXHJcbiAgdmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcclxuICAvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcclxuICAvLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcclxuICB2YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xyXG4gIC8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXHJcbiAgLy8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXHJcbiAgdmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcclxuXHJcbiAgLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxyXG4gIC8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXHJcbiAgdmFyIG1vZGVsUHJvcHMgPSB7XHJcbiAgICB2YWx1ZTogJ192YWx1ZScsXHJcbiAgICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcclxuICAgICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcclxuICB9O1xyXG5cclxuICB2YXIgYmluZCQxID0ge1xyXG5cclxuICAgIHByaW9yaXR5OiBCSU5ELFxyXG5cclxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XHJcbiAgICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XHJcbiAgICAgIC8vIHNob3VsZCBiZSBkZWVwIHdhdGNoIG9uIG9iamVjdCBtb2RlXHJcbiAgICAgIGlmICghYXR0cikge1xyXG4gICAgICAgIHRoaXMuZGVlcCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3NcclxuICAgICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XHJcbiAgICAgIHZhciB0b2tlbnMgPSBkZXNjcmlwdG9yLmludGVycDtcclxuICAgICAgaWYgKHRva2Vucykge1xyXG4gICAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xyXG4gICAgICAgIGlmIChkZXNjcmlwdG9yLmhhc09uZVRpbWUpIHtcclxuICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcclxuICAgICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XHJcbiAgICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBWdWUuanMgJyArICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJywgdGhpcy52bSk7XHJcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcclxuICAgICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XHJcbiAgICAgICAgICAvLyB3YXJuIHNyY1xyXG4gICAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XHJcbiAgICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gd2FybiBzdHlsZVxyXG4gICAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcclxuICAgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIGlmICh0aGlzLmludmFsaWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcclxuICAgICAgaWYgKHRoaXMuYXJnKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBzaGFyZSBvYmplY3QgaGFuZGxlciB3aXRoIHYtYmluZDpjbGFzc1xyXG4gICAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXHJcblxyXG4gICAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcclxuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcclxuICAgICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XHJcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xyXG4gICAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XHJcbiAgICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxyXG4gICAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xyXG4gICAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIHNldCBtb2RlbCBwcm9wc1xyXG4gICAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcclxuICAgICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XHJcbiAgICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xyXG4gICAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcclxuICAgICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XHJcbiAgICAgICAgaWYgKG1vZGVsKSB7XHJcbiAgICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcclxuICAgICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xyXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxyXG4gICAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XHJcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xyXG4gICAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcclxuICAgICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3NcclxuICAgICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcclxuICAgICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcclxuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgZWwgPSB7XHJcblxyXG4gICAgcHJpb3JpdHk6IEVMLFxyXG5cclxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICBpZiAoIXRoaXMuYXJnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XHJcbiAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XHJcbiAgICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XHJcbiAgICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcclxuICAgICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcclxuICAgICAgICByZWZzW3RoaXMuaWRdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciByZWYgPSB7XHJcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBjbG9hayA9IHtcclxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcbiAgICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3RcclxuICB2YXIgZGlyZWN0aXZlcyA9IHtcclxuICAgIHRleHQ6IHRleHQkMSxcclxuICAgIGh0bWw6IGh0bWwsXHJcbiAgICAnZm9yJzogdkZvcixcclxuICAgICdpZic6IHZJZixcclxuICAgIHNob3c6IHNob3csXHJcbiAgICBtb2RlbDogbW9kZWwsXHJcbiAgICBvbjogb24kMSxcclxuICAgIGJpbmQ6IGJpbmQkMSxcclxuICAgIGVsOiBlbCxcclxuICAgIHJlZjogcmVmLFxyXG4gICAgY2xvYWs6IGNsb2FrXHJcbiAgfTtcclxuXHJcbiAgdmFyIHZDbGFzcyA9IHtcclxuXHJcbiAgICBkZWVwOiB0cnVlLFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmNsZWFudXAoKTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xyXG4gICAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICBhcHBseSh0aGlzLmVsLCB2YWwsIGFkZENsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XHJcbiAgICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XHJcbiAgICAgIGlmICghcHJldktleXMpIHJldHVybjtcclxuICAgICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XHJcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XHJcbiAgICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXHJcbiAgICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXHJcbiAgICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbm9ybWFsaXplJDEodmFsdWUpIHtcclxuICAgIHZhciByZXMgPSBbXTtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XHJcbiAgICAgICAgaWYgKF9rZXkpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgX2tleSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmVzLnB1c2goX2tleSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIF9rZXkpIHtcclxuICAgICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XHJcbiAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3RcclxuICAgKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3NcclxuICAgKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcclxuICAgIGtleSA9IGtleS50cmltKCk7XHJcbiAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcclxuICAgICAgZm4oZWwsIGtleSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cclxuICAgIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXHJcbiAgICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxyXG4gICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgZm4oZWwsIGtleXNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIGNvbXBvbmVudCA9IHtcclxuXHJcbiAgICBwcmlvcml0eTogQ09NUE9ORU5ULFxyXG5cclxuICAgIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxyXG4gICAgICpcclxuICAgICAqIC0gc3RhdGljOlxyXG4gICAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cclxuICAgICAqXHJcbiAgICAgKiAtIGR5bmFtaWM6XHJcbiAgICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxyXG4gICAgICovXHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcclxuICAgICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXHJcbiAgICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XHJcbiAgICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XHJcbiAgICAgICAgICB0aGlzLmNhY2hlID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XHJcbiAgICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcclxuICAgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcclxuICAgICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXHJcbiAgICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XHJcbiAgICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cclxuICAgICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xyXG4gICAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXHJcbiAgICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxyXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xyXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcclxuICAgICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXHJcbiAgICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcclxuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXHJcbiAgICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xyXG4gICAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xyXG4gICAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cclxuICAgICAqL1xyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XHJcbiAgICAgIGlmICghdGhpcy5saXRlcmFsKSB7XHJcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxyXG4gICAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cclxuICAgICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxyXG4gICAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xyXG4gICAgICogZmluaXNoZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICAgKi9cclxuXHJcbiAgICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcclxuICAgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xyXG4gICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxyXG4gICAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcclxuICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcclxuICAgICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXHJcbiAgICAgKiB0aGUgY2hpbGQgdm0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAgICovXHJcblxyXG4gICAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcclxuICAgICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcclxuICAgICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcclxuICAgICAgICBjYigpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcclxuICAgICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcclxuICAgICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxyXG4gICAgICogdGhlIHNhbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAgICovXHJcblxyXG4gICAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XHJcbiAgICAgIC8vIGFjdHVhbCBtb3VudFxyXG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xyXG4gICAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcclxuICAgICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcclxuICAgICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xyXG4gICAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcclxuICAgICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xyXG4gICAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XHJcbiAgICAgICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcclxuICAgICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXHJcbiAgICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxyXG4gICAgICovXHJcblxyXG4gICAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xyXG4gICAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXHJcbiAgICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxyXG4gICAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxyXG4gICAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXHJcbiAgICAgKi9cclxuXHJcbiAgICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XHJcbiAgICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xyXG4gICAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5Db21wb25lbnQpIHtcclxuICAgICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMuQ29tcG9uZW50TmFtZSxcclxuICAgICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXHJcbiAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcclxuICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcclxuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcclxuICAgICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXHJcbiAgICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcclxuICAgICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcclxuICAgICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXHJcbiAgICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxyXG4gICAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcclxuICAgICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcclxuICAgICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcclxuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcclxuICAgICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxyXG4gICAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxyXG4gICAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXHJcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxyXG4gICAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcclxuICAgICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXHJcbiAgICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXHJcbiAgICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxyXG4gICAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXHJcbiAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxyXG4gICAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXHJcbiAgICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXHJcbiAgICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gZXh0cmEgb3B0aW9uc1xyXG4gICAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XHJcbiAgICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xyXG4gICAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xyXG4gICAgICAgICAgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdID0gY2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xyXG4gICAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cclxuICAgICAqL1xyXG5cclxuICAgIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cclxuICAgICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcclxuICAgICAqL1xyXG5cclxuICAgIHVuYnVpbGQ6IGZ1bmN0aW9uIHVuYnVpbGQoZGVmZXIpIHtcclxuICAgICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xyXG4gICAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcclxuICAgICAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcclxuICAgICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xyXG4gICAgICAgIGlmIChjaGlsZCkge1xyXG4gICAgICAgICAgLy8gcmVtb3ZlIHJlZlxyXG4gICAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXHJcbiAgICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcclxuICAgICAgLy8gbGF0ZXIuXHJcbiAgICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xyXG4gICAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAgICovXHJcblxyXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XHJcbiAgICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcclxuICAgICAgaWYgKGNoaWxkKSB7XHJcbiAgICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xyXG4gICAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxyXG4gICAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxyXG4gICAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XHJcbiAgICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcclxuICAgICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XHJcbiAgICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xyXG4gICAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGNiKSB7XHJcbiAgICAgICAgY2IoKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcclxuICAgICAqIHRyYW5zaXRpb24gbW9kZS4gRGVmYXVsdHMgdG8gc2ltdWx0YW5lb3VzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cclxuICAgICAqL1xyXG5cclxuICAgIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xyXG4gICAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXHJcbiAgICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xyXG4gICAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XHJcbiAgICAgICAgY2FzZSAnaW4tb3V0JzpcclxuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnb3V0LWluJzpcclxuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xyXG4gICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuYmluZC5cclxuICAgICAqL1xyXG5cclxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XHJcbiAgICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXHJcbiAgICAgIHRoaXMudW5idWlsZCgpO1xyXG4gICAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcclxuICAgICAgaWYgKHRoaXMuY2FjaGUpIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xyXG4gICAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gaG9va3NcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XHJcbiAgICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XHJcbiAgICB2YXIgY2FsbGVkID0gMDtcclxuICAgIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XHJcbiAgICAgICAgY2IoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgcHJvcEJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcclxuICB2YXIgZW1wdHkgPSB7fTtcclxuXHJcbiAgLy8gcmVnZXhlc1xyXG4gIHZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xyXG4gIHZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxyXG4gICAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XHJcbiAgICB2YXIgcHJvcHMgPSBbXTtcclxuICAgIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcclxuICAgIHZhciBpID0gbmFtZXMubGVuZ3RoO1xyXG4gICAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3A7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIG5hbWUgPSBuYW1lc1tpXTtcclxuICAgICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5O1xyXG5cclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XHJcbiAgICAgICAgd2FybignRG8gbm90IHVzZSAkZGF0YSBhcyBwcm9wLicsIHZtKTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcclxuICAgICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcclxuICAgICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXHJcbiAgICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcclxuICAgICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xyXG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLicsIHZtKTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcHJvcCA9IHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcclxuICAgICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXHJcbiAgICAgICAgcmF3OiBudWxsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xyXG4gICAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cclxuICAgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcclxuICAgICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcclxuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcclxuICAgICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxyXG4gICAgICAgIHByb3AucmF3ID0gdmFsdWU7XHJcbiAgICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xyXG4gICAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XHJcbiAgICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XHJcbiAgICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXHJcbiAgICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XHJcbiAgICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXHJcbiAgICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxyXG4gICAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXHJcbiAgICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xyXG4gICAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3NcclxuICAgICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcclxuICAgICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XHJcbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xyXG4gICAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXHJcbiAgICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcclxuICAgICAgfSBlbHNlIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAvLyBjaGVjayBwb3NzaWJsZSBjYW1lbENhc2UgcHJvcCB1c2FnZVxyXG4gICAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcclxuICAgICAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxyXG4gICAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBwdXNoIHByb3BcclxuICAgICAgcHJvcHMucHVzaChwcm9wKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xyXG4gICAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXHJcbiAgICAgIHZtLl9wcm9wcyA9IHt9O1xyXG4gICAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XHJcbiAgICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xyXG4gICAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcclxuICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIHByb3AgPSBwcm9wc1tpXTtcclxuICAgICAgICByYXcgPSBwcm9wLnJhdztcclxuICAgICAgICBwYXRoID0gcHJvcC5wYXRoO1xyXG4gICAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XHJcbiAgICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcclxuICAgICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xyXG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcclxuICAgICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxyXG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcclxuICAgICAgICAgIC8vIGR5bmFtaWMgcHJvcFxyXG4gICAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xyXG4gICAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXHJcbiAgICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XHJcbiAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcclxuICAgICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcclxuICAgICAgICAgICAgICB2bS5fYmluZERpcih7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXHJcbiAgICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXHJcbiAgICAgICAgICAgICAgICBwcm9wOiBwcm9wXHJcbiAgICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xyXG4gICAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2VcclxuICAgICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XHJcbiAgICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcclxuICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3JcclxuICAgICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXHJcbiAgICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcclxuICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXHJcbiAgICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XHJcbiAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3MgYSBwcm9wIHdpdGggYSByYXdWYWx1ZSwgYXBwbHlpbmcgbmVjZXNzYXJ5IGNvZXJzaW9ucyxcclxuICAgKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcclxuICAgKiBwcm9jZXNzZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxyXG4gICAqIEBwYXJhbSB7Kn0gcmF3VmFsdWVcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcclxuICAgIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcclxuICAgIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xyXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcclxuICAgIH1cclxuICAgIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xyXG4gICAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XHJcbiAgICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xyXG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xyXG4gICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm4odmFsdWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZuKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcclxuICAgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xyXG4gICAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxyXG4gICAqIEByZXR1cm4geyp9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcclxuICAgIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcclxuICAgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xyXG4gICAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xyXG4gICAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxyXG4gICAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xyXG4gICAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxyXG4gICAgaWYgKGlzT2JqZWN0KGRlZikpIHtcclxuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xyXG4gICAgfVxyXG4gICAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcclxuICAgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcclxuICAgIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXHJcbiAgICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XHJcbiAgICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xyXG4gICAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XHJcbiAgICB2YXIgdmFsaWQgPSAhdHlwZTtcclxuICAgIHZhciBleHBlY3RlZFR5cGVzID0gW107XHJcbiAgICBpZiAodHlwZSkge1xyXG4gICAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcclxuICAgICAgICB0eXBlID0gW3R5cGVdO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcclxuICAgICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XHJcbiAgICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xyXG4gICAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xyXG4gICAgaWYgKHZhbGlkYXRvcikge1xyXG4gICAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJywgdm0pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqIEByZXR1cm4geyp9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XHJcbiAgICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcclxuICAgIGlmICghY29lcmNlKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcclxuICAgIHZhciB2YWxpZDtcclxuICAgIHZhciBleHBlY3RlZFR5cGU7XHJcbiAgICBpZiAodHlwZSA9PT0gU3RyaW5nKSB7XHJcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xyXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcclxuICAgICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XHJcbiAgICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcclxuICAgICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xyXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBGdW5jdGlvbikge1xyXG4gICAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xyXG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcclxuICAgICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XHJcbiAgICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XHJcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XHJcbiAgICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiB2YWxpZCxcclxuICAgICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XHJcbiAgICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZvcm1hdCB2YWx1ZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcclxuXHJcbiAgdmFyIHByb3BEZWYgPSB7XHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgdmFyIGNoaWxkID0gdGhpcy52bTtcclxuICAgICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xyXG4gICAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxyXG4gICAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xyXG4gICAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XHJcbiAgICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XHJcbiAgICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xyXG5cclxuICAgICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XHJcbiAgICAgIH0sIHtcclxuICAgICAgICB0d29XYXk6IHR3b1dheSxcclxuICAgICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXHJcbiAgICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxyXG4gICAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcclxuICAgICAgICBzY29wZTogdGhpcy5fc2NvcGVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXHJcbiAgICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcclxuXHJcbiAgICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xyXG4gICAgICBpZiAodHdvV2F5KSB7XHJcbiAgICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxyXG4gICAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcclxuICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxyXG4gICAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxyXG4gICAgICAgICAgICBzeW5jOiB0cnVlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XHJcbiAgICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xyXG4gICAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgcXVldWUkMSA9IFtdO1xyXG4gIHZhciBxdWV1ZWQgPSBmYWxzZTtcclxuXHJcbiAgLyoqXHJcbiAgICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwdXNoSm9iKGpvYikge1xyXG4gICAgcXVldWUkMS5wdXNoKGpvYik7XHJcbiAgICBpZiAoIXF1ZXVlZCkge1xyXG4gICAgICBxdWV1ZWQgPSB0cnVlO1xyXG4gICAgICBuZXh0VGljayhmbHVzaCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcclxuICAgKiB0cmlnZ2VyaW5nIHRyYW5zaXRpb25zLlxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBmbHVzaCgpIHtcclxuICAgIC8vIEZvcmNlIGxheW91dFxyXG4gICAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHF1ZXVlJDFbaV0oKTtcclxuICAgIH1cclxuICAgIHF1ZXVlJDEgPSBbXTtcclxuICAgIHF1ZXVlZCA9IGZhbHNlO1xyXG4gICAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XHJcbiAgICAvLyB1bnVzZWQgdmFyaWFibGUgZlxyXG4gICAgcmV0dXJuIGY7XHJcbiAgfVxyXG5cclxuICB2YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xyXG4gIHZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xyXG4gIHZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcclxuICB2YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xyXG5cclxuICAvKipcclxuICAgKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXHJcbiAgICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxyXG4gICAqIGFuZCB0aGUgdHJhbnNpdGlvbmVkIHByb3BlcnR5IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYm90aFxyXG4gICAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcclxuICAgKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXHJcbiAgICogaXRzIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWRcclxuICAgKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxyXG4gICAqXHJcbiAgICogSXQgZmFsbHMgYmFjayB0byBzZXRUaW1lb3V0IG9uIGRldmljZXMgdGhhdCBzdXBwb3J0IENTU1xyXG4gICAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2VcclxuICAgKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXHJcbiAgICogcmVsYXRpdmVseSBsYXJnZSB0aW1lb3V0LlxyXG4gICAqL1xyXG5cclxuICB2YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgdmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcclxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gID8gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICByYWYoZnVuY3Rpb24gKCkge1xyXG4gICAgICByYWYoZm4pO1xyXG4gICAgfSk7XHJcbiAgfSA6IGZ1bmN0aW9uIChmbikge1xyXG4gICAgc2V0VGltZW91dChmbiwgNTApO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xyXG4gICAqIG9mIHRoZSB0cmFuc2l0aW9uLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMuZWwgPSBlbDtcclxuICAgIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcclxuICAgIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcclxuICAgIHRoaXMuaG9va3MgPSBob29rcztcclxuICAgIHRoaXMudm0gPSB2bTtcclxuICAgIC8vIGFzeW5jIHN0YXRlXHJcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xyXG4gICAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XHJcbiAgICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xyXG4gICAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxyXG4gICAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcclxuICAgICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBiaW5kXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcclxuICAgICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cclxuICAgKlxyXG4gICAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXHJcbiAgICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXHJcbiAgICogMy4gYWRkIGVudGVyIGNsYXNzXHJcbiAgICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxyXG4gICAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcclxuICAgKiA2LiByZWZsb3dcclxuICAgKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XHJcbiAgICogICAgLSB0cmFuc2l0aW9uOlxyXG4gICAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxyXG4gICAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cclxuICAgKiAgICAtIGFuaW1hdGlvbjpcclxuICAgKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXHJcbiAgICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxyXG4gICAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XHJcbiAgICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXHJcbiAgICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxyXG4gICAqICAgIGFmdGVyRW50ZXIgaG9vay5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICovXHJcblxyXG4gIHAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcclxuICAgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xyXG4gICAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcclxuICAgIHRoaXMuY2IgPSBjYjtcclxuICAgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XHJcbiAgICBvcCgpO1xyXG4gICAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xyXG4gICAgaWYgKHRoaXMuZW50ZXJlZCkge1xyXG4gICAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cclxuICAgIH1cclxuICAgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xyXG4gICAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcclxuICAgKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xyXG4gICAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXHJcbiAgICovXHJcblxyXG4gIHAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcclxuICAgIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xyXG4gICAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcclxuICAgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xyXG4gICAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XHJcbiAgICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcclxuICAgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XHJcbiAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcclxuICAgICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XHJcbiAgICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVudGVyRG9uZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xyXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxyXG4gICAqL1xyXG5cclxuICBwJDEuZW50ZXJEb25lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcclxuICAgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XHJcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xyXG4gICAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xyXG4gICAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cclxuICAgKlxyXG4gICAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxyXG4gICAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xyXG4gICAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcclxuICAgKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXHJcbiAgICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXHJcbiAgICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxyXG4gICAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XHJcbiAgICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcclxuICAgKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cclxuICAgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxyXG4gICAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXHJcbiAgICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxyXG4gICAqICAgIGFmdGVyTGVhdmUgaG9vay5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICovXHJcblxyXG4gIHAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcclxuICAgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xyXG4gICAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcclxuICAgIHRoaXMub3AgPSBvcDtcclxuICAgIHRoaXMuY2IgPSBjYjtcclxuICAgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XHJcbiAgICB0aGlzLmxlZnQgPSBmYWxzZTtcclxuICAgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XHJcbiAgICBpZiAodGhpcy5sZWZ0KSB7XHJcbiAgICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxyXG4gICAgfVxyXG4gICAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XHJcbiAgICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxyXG4gICAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxyXG4gICAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxyXG4gICAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xyXG4gICAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcclxuICAgICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXHJcbiAgICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2VcclxuICAgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXHJcbiAgICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XHJcbiAgICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxyXG4gICAqL1xyXG5cclxuICBwJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xyXG4gICAgaWYgKHR5cGUpIHtcclxuICAgICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XHJcbiAgICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXHJcbiAgICovXHJcblxyXG4gIHAkMS5sZWF2ZURvbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxlZnQgPSB0cnVlO1xyXG4gICAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcclxuICAgIHRoaXMub3AoKTtcclxuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XHJcbiAgICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XHJcbiAgICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xyXG4gICAgdGhpcy5vcCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXHJcbiAgICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxyXG4gICAqL1xyXG5cclxuICBwJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcclxuICAgIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XHJcbiAgICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcclxuICAgICAgaGFzUGVuZGluZyA9IHRydWU7XHJcbiAgICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xyXG4gICAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XHJcbiAgICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xyXG4gICAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmIChoYXNQZW5kaW5nKSB7XHJcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XHJcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jYW5jZWwpIHtcclxuICAgICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcclxuICAgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGwgYSB1c2VyLXByb3ZpZGVkIHN5bmNocm9ub3VzIGhvb2sgZnVuY3Rpb24uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAqL1xyXG5cclxuICBwJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xyXG4gICAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXHJcbiAgICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xyXG4gICAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXHJcbiAgICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcclxuICAgKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3JcclxuICAgKiBhbmltYXRpb24uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxyXG4gICAqL1xyXG5cclxuICBwJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XHJcbiAgICBpZiAoaG9vaykge1xyXG4gICAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xyXG4gICAgICB9XHJcbiAgICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcclxuICAgKiBjYWxjdWxhdGVkIHN0eWxlcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICovXHJcblxyXG4gIHAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcclxuICAgIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxyXG4gICAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxyXG4gICAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXHJcbiAgICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXHJcbiAgICAvLyBDU1MgdHJhbnNpdGlvbnMuXHJcbiAgICBkb2N1bWVudC5oaWRkZW4gfHxcclxuICAgIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxyXG4gICAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcclxuICAgIC8vIGVsZW1lbnQgaXMgaGlkZGVuXHJcbiAgICBpc0hpZGRlbih0aGlzLmVsKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xyXG4gICAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xyXG4gICAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XHJcbiAgICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcclxuICAgIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XHJcbiAgICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XHJcbiAgICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xyXG4gICAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xyXG4gICAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGUpIHtcclxuICAgICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHlwZTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBTZXR1cCBhIENTUyB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBjYWxsYmFjay5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXHJcbiAgICovXHJcblxyXG4gIHAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xyXG4gICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcbiAgICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcclxuICAgICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XHJcbiAgICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XHJcbiAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XHJcbiAgICAgICAgICBjYigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIG9uKGVsLCBldmVudCwgb25FbmQpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XHJcbiAgICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc0hpZGRlbihlbCkge1xyXG4gICAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcclxuICAgICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXHJcbiAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgdGhlIGNsaWVudCByZWN0XHJcbiAgICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciB0cmFuc2l0aW9uJDEgPSB7XHJcblxyXG4gICAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXHJcblxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG9sZElkKSB7XHJcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcbiAgICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cclxuICAgICAgdmFyIGhvb2tzID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICd0cmFuc2l0aW9ucycsIGlkKTtcclxuICAgICAgaWQgPSBpZCB8fCAndic7XHJcbiAgICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xyXG4gICAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLnZtKTtcclxuICAgICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XHJcbiAgICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XHJcbiAgICBzdHlsZTogc3R5bGUsXHJcbiAgICAnY2xhc3MnOiB2Q2xhc3MsXHJcbiAgICBjb21wb25lbnQ6IGNvbXBvbmVudCxcclxuICAgIHByb3A6IHByb3BEZWYsXHJcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcclxuICB9O1xyXG5cclxuICAvLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcclxuICB2YXIgYmluZFJFID0gL152LWJpbmQ6fF46LztcclxuICB2YXIgb25SRSA9IC9edi1vbjp8XkAvO1xyXG4gIHZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XHJcbiAgdmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xyXG4gIHZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcclxuXHJcbiAgLy8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcclxuICB2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XHJcbiAgdmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXHJcbiAgICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcclxuICAgKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcclxuICAgKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcclxuICAgKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxyXG4gICAqXHJcbiAgICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxyXG4gICAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcclxuICAgKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcclxuICAgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cclxuICAgIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xyXG4gICAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcclxuICAgIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxyXG4gICAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxyXG4gICAgICogaW5zdGFuY2VzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXHJcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXHJcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cclxuICAgICAqL1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xyXG4gICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcclxuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xyXG4gICAgICAvLyBsaW5rXHJcbiAgICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xyXG4gICAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xyXG4gICAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcclxuICAgICAgfSwgdm0pO1xyXG4gICAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcclxuICAgKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGxpbmtBbmRDYXB0dXJlKGxpbmtlciwgdm0pIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKCdkZXZlbG9wbWVudCcgPT09ICdwcm9kdWN0aW9uJykge31cclxuICAgIHZhciBvcmlnaW5hbERpckNvdW50ID0gdm0uX2RpcmVjdGl2ZXMubGVuZ3RoO1xyXG4gICAgbGlua2VyKCk7XHJcbiAgICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xyXG4gICAgZGlycy5zb3J0KGRpcmVjdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICBkaXJzW2ldLl9iaW5kKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlycztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERpcmVjdGl2ZSBwcmlvcml0eSBzb3J0IGNvbXBhcmF0b3JcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGJcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XHJcbiAgICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xyXG4gICAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcclxuICAgIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTGlua2VyIGZ1bmN0aW9ucyByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXRcclxuICAgKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcclxuICAgKiB0aGUgcHJvY2Vzcy5cclxuICAgKlxyXG4gICAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XHJcbiAgICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge0FycmF5fSBkaXJzXHJcbiAgICogQHBhcmFtIHtWdWV9IFtjb250ZXh0XVxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWFrZVVubGlua0ZuKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xyXG4gICAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcclxuICAgICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcclxuICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dERpcnMpIHtcclxuICAgICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcclxuICAgIHVubGluay5kaXJzID0gZGlycztcclxuICAgIHJldHVybiB1bmxpbms7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZGlyc1xyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcclxuICAgIHZhciBpID0gZGlycy5sZW5ndGg7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XHJcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcclxuICAgICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIGxpbmsgcHJvcHMgb24gYW4gaW5zdGFuY2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xyXG4gICAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xyXG4gICAgdmFyIHByb3BEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xyXG4gICAgfSwgdm0pO1xyXG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxyXG4gICAqXHJcbiAgICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXHJcbiAgICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXHJcbiAgICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcclxuICAgKlxyXG4gICAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xyXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcclxuICAgIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzO1xyXG4gICAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xyXG4gICAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xyXG5cclxuICAgIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXHJcbiAgICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXHJcbiAgICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XHJcbiAgICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcclxuICAgICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXHJcbiAgICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xyXG4gICAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXHJcbiAgICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XHJcbiAgICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcGxhY2VyQXR0cnMpIHtcclxuICAgICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcclxuICAgICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxyXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XHJcbiAgICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xyXG4gICAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHIpIHtcclxuICAgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcclxuICAgICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxyXG4gICAgICAgIC8vIGFsbG93IGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxyXG4gICAgICAgIC8vIGFsbG93IHNsb3RzXHJcbiAgICAgICAgYXR0ci5uYW1lICE9PSAnc2xvdCc7XHJcbiAgICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xyXG4gICAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcclxuICAgICAgICB3YXJuKCdBdHRyaWJ1dGUnICsgKHBsdXJhbCA/ICdzICcgOiAnICcpICsgbmFtZXMuam9pbignLCAnKSArIChwbHVyYWwgPyAnIGFyZScgOiAnIGlzJykgKyAnIGlnbm9yZWQgb24gY29tcG9uZW50ICcgKyAnPCcgKyBvcHRpb25zLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+IGJlY2F1c2UgJyArICd0aGUgY29tcG9uZW50IGlzIGEgZnJhZ21lbnQgaW5zdGFuY2U6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzLmh0bWwjRnJhZ21lbnQtSW5zdGFuY2UnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbih2bSwgZWwsIHNjb3BlKSB7XHJcbiAgICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXHJcbiAgICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XHJcbiAgICAgIHZhciBjb250ZXh0RGlycztcclxuICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xyXG4gICAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY29udGV4dExpbmtGbihjb250ZXh0LCBlbCwgbnVsbCwgc2NvcGUpO1xyXG4gICAgICAgIH0sIGNvbnRleHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBsaW5rIHNlbGZcclxuICAgICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcclxuICAgICAgfSwgdm0pO1xyXG5cclxuICAgICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxyXG4gICAgICAvLyBjb250YWluZXIgZGlyZWN0aXZlcy5cclxuICAgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcclxuICAgKiBub2RlIHR5cGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcclxuICAgIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcclxuICAgIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xyXG4gICAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xyXG4gICAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXHJcbiAgICAvLyB0ZXh0YXJlYSB0cmVhdHMgaXRzIHRleHQgY29udGVudCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cclxuICAgIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXHJcbiAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xyXG4gICAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KGVsLnZhbHVlKTtcclxuICAgICAgaWYgKHRva2Vucykge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XHJcbiAgICAgICAgZWwudmFsdWUgPSAnJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIGxpbmtGbjtcclxuICAgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcclxuICAgIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XHJcbiAgICAvLyBjaGVjayB0ZXJtaW5hbCBkaXJlY3RpdmVzIChmb3IgJiBpZilcclxuICAgIGlmIChoYXNBdHRycykge1xyXG4gICAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXHJcbiAgICBpZiAoIWxpbmtGbikge1xyXG4gICAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIC8vIGNoZWNrIGNvbXBvbmVudFxyXG4gICAgaWYgKCFsaW5rRm4pIHtcclxuICAgICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcclxuICAgIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XHJcbiAgICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsaW5rRm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xyXG4gICAgLy8gc2tpcCBtYXJrZWQgdGV4dCBub2Rlc1xyXG4gICAgaWYgKG5vZGUuX3NraXApIHtcclxuICAgICAgcmV0dXJuIHJlbW92ZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChub2RlLndob2xlVGV4dCk7XHJcbiAgICBpZiAoIXRva2Vucykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcclxuICAgIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcclxuICAgIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXHJcbiAgICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxyXG4gICAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cclxuICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcclxuICAgIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcclxuICAgICAgbmV4dC5fc2tpcCA9IHRydWU7XHJcbiAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgdmFyIGVsLCB0b2tlbjtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcclxuICAgICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcclxuICAgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMaW5rZXIgZm9yIGFuIHNraXBwZWQgdGV4dCBub2RlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICogQHBhcmFtIHtUZXh0fSBub2RlXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcclxuICAgIHJlbW92ZShub2RlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHJldHVybiB7Tm9kZX1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykge1xyXG4gICAgdmFyIGVsO1xyXG4gICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcclxuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodG9rZW4uaHRtbCkge1xyXG4gICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJyk7XHJcbiAgICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSUUgd2lsbCBjbGVhbiB1cCBlbXB0eSB0ZXh0Tm9kZXMgZHVyaW5nXHJcbiAgICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxyXG4gICAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXHJcbiAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpO1xyXG4gICAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xyXG4gICAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xyXG4gICAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodG9rZW4udmFsdWUpO1xyXG4gICAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xyXG4gICAgICAgIG5hbWU6IHR5cGUsXHJcbiAgICAgICAgZGVmOiBkaXJlY3RpdmVzW3R5cGVdLFxyXG4gICAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxyXG4gICAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xyXG4gICAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gdGV4dE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSkge1xyXG4gICAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XHJcbiAgICAgIHZhciB0b2tlbiwgdmFsdWUsIG5vZGU7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xyXG4gICAgICAgIHZhbHVlID0gdG9rZW4udmFsdWU7XHJcbiAgICAgICAgaWYgKHRva2VuLnRhZykge1xyXG4gICAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XHJcbiAgICAgICAgICBpZiAodG9rZW4ub25lVGltZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xyXG4gICAgICAgICAgICAgIHJlcGxhY2Uobm9kZSwgcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmVwbGFjZShlbCwgZnJhZ0Nsb25lKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIGEgbm9kZSBsaXN0IGFuZCByZXR1cm4gYSBjaGlsZExpbmtGbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xyXG4gICAgdmFyIGxpbmtGbnMgPSBbXTtcclxuICAgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcclxuICAgICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xyXG4gICAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xyXG4gICAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGxpbmtGbnNcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbih2bSwgbm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XHJcbiAgICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcclxuICAgICAgICBub2RlID0gbm9kZXNbbl07XHJcbiAgICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcclxuICAgICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcclxuICAgICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcclxuICAgICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcclxuICAgICAgICBpZiAobm9kZUxpbmtGbikge1xyXG4gICAgICAgICAgbm9kZUxpbmtGbih2bSwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcclxuICAgICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXHJcbiAgICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xyXG4gICAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmIChjb21tb25UYWdSRS50ZXN0KHRhZykpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpO1xyXG4gICAgaWYgKGRlZikge1xyXG4gICAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXHJcbiAgICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xyXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xyXG4gICAgaWYgKGNvbXBvbmVudCkge1xyXG4gICAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XHJcbiAgICAgIHZhciBkZXNjcmlwdG9yID0ge1xyXG4gICAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxyXG4gICAgICAgIHJlZjogcmVmLFxyXG4gICAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcclxuICAgICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXHJcbiAgICAgICAgbW9kaWZpZXJzOiB7XHJcbiAgICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xyXG4gICAgICAgIGlmIChyZWYpIHtcclxuICAgICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XHJcbiAgICAgIH07XHJcbiAgICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XHJcbiAgICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxyXG4gICAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xyXG4gICAgLy8gc2tpcCB2LXByZVxyXG4gICAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBza2lwO1xyXG4gICAgfVxyXG4gICAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXHJcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xyXG4gICAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcbiAgICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcclxuICAgICAgICByZXR1cm4gc2tpcDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcclxuICAgIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XHJcbiAgICAgIGF0dHIgPSBhdHRyc1tpXTtcclxuICAgICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcclxuICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcclxuICAgICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcclxuICAgICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xyXG4gICAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XHJcbiAgICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XHJcbiAgICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XHJcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcclxuICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XHJcbiAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRlcm1EZWYpIHtcclxuICAgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBza2lwKCkge31cclxuICBza2lwLnRlcm1pbmFsID0gdHJ1ZTtcclxuXHJcbiAgLyoqXHJcbiAgICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxyXG4gICAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XHJcbiAgICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxyXG4gICAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlZlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcclxuICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcclxuICAgICAgbmFtZTogZGlyTmFtZSxcclxuICAgICAgYXJnOiBhcmcsXHJcbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxyXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcclxuICAgICAgcmF3OiB2YWx1ZSxcclxuICAgICAgYXR0cjogcmF3TmFtZSxcclxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXHJcbiAgICAgIGRlZjogZGVmXHJcbiAgICB9O1xyXG4gICAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcclxuICAgIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XHJcbiAgICAgIGRlc2NyaXB0b3IucmVmID0gZmluZFJlZihlbCk7XHJcbiAgICB9XHJcbiAgICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xyXG4gICAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcclxuICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XHJcbiAgICAgIH1cclxuICAgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcclxuICAgIH07XHJcbiAgICBmbi50ZXJtaW5hbCA9IHRydWU7XHJcbiAgICByZXR1cm4gZm47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHJldHVybiB7RnVuY3Rpb259XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcclxuICAgIHZhciBkaXJzID0gW107XHJcbiAgICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIGF0dHIgPSBhdHRyc1tpXTtcclxuICAgICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XHJcbiAgICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xyXG4gICAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xyXG4gICAgICAvLyByZXNldCBhcmdcclxuICAgICAgYXJnID0gbnVsbDtcclxuICAgICAgLy8gY2hlY2sgbW9kaWZpZXJzXHJcbiAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xyXG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcclxuXHJcbiAgICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xyXG4gICAgICBpZiAodG9rZW5zKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xyXG4gICAgICAgIGFyZyA9IG5hbWU7XHJcbiAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCwgdG9rZW5zKTtcclxuICAgICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxyXG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XHJcbiAgICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlXHJcblxyXG4gICAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XHJcbiAgICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcclxuICAgICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XHJcbiAgICAgICAgfSBlbHNlXHJcblxyXG4gICAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcclxuICAgICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcclxuICAgICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcclxuICAgICAgICAgICAgcHVzaERpcignb24nLCBkaXJlY3RpdmVzLm9uKTtcclxuICAgICAgICAgIH0gZWxzZVxyXG5cclxuICAgICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXHJcbiAgICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xyXG4gICAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XHJcbiAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xyXG4gICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2VcclxuXHJcbiAgICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcclxuICAgICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xyXG4gICAgICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XHJcbiAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xyXG4gICAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHVzaCBhIGRpcmVjdGl2ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHB1c2hEaXIoZGlyTmFtZSwgZGVmLCBpbnRlcnBUb2tlbnMpIHtcclxuICAgICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XHJcbiAgICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcclxuICAgICAgZGlycy5wdXNoKHtcclxuICAgICAgICBuYW1lOiBkaXJOYW1lLFxyXG4gICAgICAgIGF0dHI6IHJhd05hbWUsXHJcbiAgICAgICAgcmF3OiByYXdWYWx1ZSxcclxuICAgICAgICBkZWY6IGRlZixcclxuICAgICAgICBhcmc6IGFyZyxcclxuICAgICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcclxuICAgICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cclxuICAgICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxyXG4gICAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIHRoZSBhY3R1YWwgdm0gY29udGV4dCBmb3Igb25lLXRpbWUgYmluZGluZ3MuXHJcbiAgICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxyXG4gICAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcclxuICAgICAgICBpbnRlcnA6IGludGVycFRva2VucyxcclxuICAgICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRpcnMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XHJcbiAgICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgdmFyIGkgPSBtYXRjaC5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XHJcbiAgICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxyXG4gICAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XHJcbiAgICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc1NjcmlwdChlbCkge1xyXG4gICAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmICghZWwuaGFzQXR0cmlidXRlKCd0eXBlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICd0ZXh0L2phdmFzY3JpcHQnKTtcclxuICB9XHJcblxyXG4gIHZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xyXG5cclxuICAvKipcclxuICAgKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcclxuICAgKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXHJcbiAgICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcclxuICAgKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXHJcbiAgICogaW4gdi1mb3IuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICAgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcclxuICAgIC8vIGV4dHJhY3QgY29udGFpbmVyIGF0dHJpYnV0ZXMgdG8gcGFzcyB0aGVtIGRvd25cclxuICAgIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxyXG4gICAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcclxuICAgIC8vIGFzc3VtaW5nIHRoZSBzYW1lIG9iamVjdCB3aWxsIGJlIHVzZWQgZm9yIGNvbXBpbGVcclxuICAgIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXHJcbiAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IGV4dHJhY3RBdHRycyhlbCk7XHJcbiAgICB9XHJcbiAgICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXHJcbiAgICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXHJcbiAgICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcclxuICAgICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xyXG4gICAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90Pic7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcclxuICAgICAgICBvcHRpb25zLl9jb250ZW50ID0gZXh0cmFjdENvbnRlbnQoZWwpO1xyXG4gICAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XHJcbiAgICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXHJcbiAgICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcclxuICAgICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXHJcbiAgICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcclxuICAgICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlQW5jaG9yKCd2LWVuZCcsIHRydWUpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cclxuICAgKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcclxuICAgIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XHJcbiAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xyXG4gICAgaWYgKGZyYWcpIHtcclxuICAgICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xyXG4gICAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICsgJzxib2R5Pi4gVGhpcyB3aWxsIHJlcGxhY2UgPGJvZHk+IGVudGlyZWx5LiBZb3UgJyArICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcclxuICAgICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcclxuICAgICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXHJcbiAgICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcclxuICAgICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxyXG4gICAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XHJcbiAgICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcclxuICAgICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XHJcbiAgICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcclxuICAgICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxyXG4gICAgICAgIC8vIGZvciBibG9ja1xyXG4gICAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1mb3InKSB8fFxyXG4gICAgICAgIC8vIGlmIGJsb2NrXHJcbiAgICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcclxuICAgICAgICAgIHJldHVybiBmcmFnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcclxuICAgICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKTtcclxuICAgICAgICAgIHJldHVybiByZXBsYWNlcjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXHJcbiAgICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgKiBAcmV0dXJuIHtBcnJheX1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XHJcbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XHJcbiAgICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXHJcbiAgICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRvXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcclxuICAgIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcclxuICAgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xyXG4gICAgdmFyIG5hbWUsIHZhbHVlO1xyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcclxuICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcclxuICAgICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xyXG4gICAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XHJcbiAgICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcclxuICAgICAgICAgIGFkZENsYXNzKHRvLCBjbHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cclxuICAgKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxyXG4gICAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXHJcbiAgICogdGhlIHNsb3RzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XHJcbiAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xyXG4gICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgdmFyIGVsLCBuYW1lO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XHJcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXHJcbiAgICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcclxuICAgICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcclxuICAgICAgfVxyXG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXHJcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcclxuICAgICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcclxuICAgICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2RlcztcclxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZXNcclxuICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xyXG4gICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcclxuICAgICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XHJcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgIG5vZGUgPSBwYXJzZVRlbXBsYXRlKG5vZGUsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnJhZztcclxuICB9XHJcblxyXG5cclxuXHJcbiAgdmFyIGNvbXBpbGVyID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgXHRjb21waWxlOiBjb21waWxlLFxyXG4gIFx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcclxuICBcdGNvbXBpbGVSb290OiBjb21waWxlUm9vdCxcclxuICBcdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXHJcbiAgXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcclxuICAgIC8qKlxyXG4gICAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcclxuICAgICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcclxuICAgICAqIHByb3hpZWQgcHJvcGVydGllcy5cclxuICAgICAqL1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdEYXRhKSB7XHJcbiAgICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcclxuICAgICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XHJcbiAgICAgKiAtIG9ic2VydmVkIGRhdGFcclxuICAgICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xyXG4gICAgICogLSB1c2VyIG1ldGhvZHNcclxuICAgICAqIC0gbWV0YSBwcm9wZXJ0aWVzXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuX2luaXRQcm9wcygpO1xyXG4gICAgICB0aGlzLl9pbml0TWV0YSgpO1xyXG4gICAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xyXG4gICAgICB0aGlzLl9pbml0RGF0YSgpO1xyXG4gICAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHByb3BzLlxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XHJcbiAgICAgIHZhciBlbCA9IG9wdGlvbnMuZWw7XHJcbiAgICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XHJcbiAgICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcclxuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xyXG4gICAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XHJcbiAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xyXG4gICAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXHJcbiAgICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xyXG4gICAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xyXG4gICAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcclxuICAgICAgICBkYXRhID0ge307XHJcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LicsIHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xyXG4gICAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXHJcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XHJcbiAgICAgIHZhciBpLCBrZXk7XHJcbiAgICAgIGkgPSBrZXlzLmxlbmd0aDtcclxuICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgLy8gdGhlcmUgYXJlIHR3byBzY2VuYXJpb3Mgd2hlcmUgd2UgY2FuIHByb3h5IGEgZGF0YSBrZXk6XHJcbiAgICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxyXG4gICAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xyXG4gICAgICAgIC8vICAgIHRlbXBsYXRlIHByb3AgcHJlc2VudFxyXG4gICAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xyXG4gICAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcclxuICAgICAgICB9IGVsc2UgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgd2FybignRGF0YSBmaWVsZCBcIicgKyBrZXkgKyAnXCIgaXMgYWxyZWFkeSBkZWZpbmVkICcgKyAnYXMgYSBwcm9wLiBUbyBwcm92aWRlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcHJvcCwgdXNlIHRoZSBcImRlZmF1bHRcIiAnICsgJ3Byb3Agb3B0aW9uOyBpZiB5b3Ugd2FudCB0byBwYXNzIHByb3AgdmFsdWVzIHRvIGFuIGluc3RhbnRpYXRpb24gJyArICdjYWxsLCB1c2UgdGhlIFwicHJvcHNEYXRhXCIgb3B0aW9uLicsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBvYnNlcnZlIGRhdGFcclxuICAgICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xyXG4gICAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcclxuICAgICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xyXG4gICAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcclxuICAgICAgdmFyIGtleXMsIGtleSwgaTtcclxuICAgICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXHJcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcclxuICAgICAgaSA9IGtleXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcclxuICAgICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxyXG4gICAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXHJcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcclxuICAgICAgaSA9IGtleXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XHJcbiAgICAgICAgICAvLyBuZXcgcHJvcGVydHlcclxuICAgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xyXG4gICAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xyXG4gICAgICB0aGlzLl9kaWdlc3QoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XHJcbiAgICAgKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XHJcbiAgICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXHJcbiAgICAgICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxyXG4gICAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXHJcbiAgICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XHJcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xyXG4gICAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcclxuICAgICAgICBkZWxldGUgdGhpc1trZXldO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XHJcbiAgICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBub29wKCkge31cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcclxuICAgICAgaWYgKGNvbXB1dGVkKSB7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XHJcbiAgICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XHJcbiAgICAgICAgICB2YXIgZGVmID0ge1xyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcclxuICAgICAgICAgICAgZGVmLnNldCA9IG5vb3A7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XHJcbiAgICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XHJcbiAgICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xyXG4gICAgICAgIGxhenk6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcclxuICAgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xyXG4gICAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoRGVwLnRhcmdldCkge1xyXG4gICAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXHJcbiAgICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xyXG4gICAgICogY2hpbGQgY29tcG9uZW50cy5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRob2RzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcclxuICAgICAgaWYgKG1ldGhvZHMpIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xyXG4gICAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xyXG4gICAgICBpZiAobWV0YXMpIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YXMpIHtcclxuICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgdmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcclxuXHJcbiAgZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXHJcbiAgICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcclxuICAgICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xyXG4gICAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcclxuICAgICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcclxuICAgICAgfVxyXG4gICAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpO1xyXG4gICAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgdi1vbiBldmVudHMgb24gYSBjaGlsZCBjb21wb25lbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xyXG4gICAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xyXG4gICAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XHJcbiAgICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xyXG4gICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XHJcbiAgICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcclxuICAgICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxyXG4gICAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxyXG4gICAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcclxuICAgICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcclxuICAgICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcclxuICAgICAgaWYgKCFoYXNoKSByZXR1cm47XHJcbiAgICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xyXG4gICAgICBmb3IgKGtleSBpbiBoYXNoKSB7XHJcbiAgICAgICAgaGFuZGxlcnMgPSBoYXNoW2tleV07XHJcbiAgICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XHJcbiAgICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnNbaV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XHJcbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXI7XHJcbiAgICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xyXG4gICAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XHJcbiAgICAgICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcclxuICAgICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XHJcbiAgICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xyXG4gICAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xyXG4gICAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcclxuICAgICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcclxuICAgICAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcclxuICAgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtWdWV9IGNoaWxkXHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XHJcbiAgICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xyXG4gICAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBob29rXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcclxuICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcclxuICAgICAgaWYgKGhhbmRsZXJzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcclxuICAgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG5vb3AkMSgpIHt9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXHJcbiAgICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXHJcbiAgICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xyXG4gICAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcclxuICAgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxyXG4gICAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cclxuICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxyXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXR0clxyXG4gICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xyXG4gICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xyXG4gICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IFtyZWZdXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXHJcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcclxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxyXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcclxuICAgIHRoaXMudm0gPSB2bTtcclxuICAgIHRoaXMuZWwgPSBlbDtcclxuICAgIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXHJcbiAgICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xyXG4gICAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lO1xyXG4gICAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xyXG4gICAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcclxuICAgIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnM7XHJcbiAgICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XHJcbiAgICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xyXG4gICAgLy8gcHJpdmF0ZVxyXG4gICAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcclxuICAgIC8vIGxpbmsgY29udGV4dFxyXG4gICAgdGhpcy5faG9zdCA9IGhvc3Q7XHJcbiAgICB0aGlzLl9zY29wZSA9IHNjb3BlO1xyXG4gICAgdGhpcy5fZnJhZyA9IGZyYWc7XHJcbiAgICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcclxuICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xyXG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdO1xyXG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXHJcbiAgICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXHJcbiAgICogaWYgcHJlc2VudC5cclxuICAgKi9cclxuXHJcbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XHJcblxyXG4gICAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxyXG4gICAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcclxuICAgICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XHJcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcclxuICAgIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcclxuICAgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlID0gZGVmO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXh0ZW5kKHRoaXMsIGRlZik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xyXG4gICAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcclxuXHJcbiAgICAvLyBpbml0aWFsIGJpbmRcclxuICAgIGlmICh0aGlzLmJpbmQpIHtcclxuICAgICAgdGhpcy5iaW5kKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9ib3VuZCA9IHRydWU7XHJcblxyXG4gICAgaWYgKHRoaXMubGl0ZXJhbCkge1xyXG4gICAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XHJcbiAgICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcclxuICAgICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XHJcbiAgICAgIHZhciBkaXIgPSB0aGlzO1xyXG4gICAgICBpZiAodGhpcy51cGRhdGUpIHtcclxuICAgICAgICB0aGlzLl91cGRhdGUgPSBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcclxuICAgICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcclxuICAgICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl91cGRhdGUgPSBub29wJDE7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XHJcbiAgICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzID8gYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcykgOiBudWxsO1xyXG4gICAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcclxuICAgICAge1xyXG4gICAgICAgIGZpbHRlcnM6IHRoaXMuZmlsdGVycyxcclxuICAgICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxyXG4gICAgICAgIGRlZXA6IHRoaXMuZGVlcCxcclxuICAgICAgICBwcmVQcm9jZXNzOiBwcmVQcm9jZXNzLFxyXG4gICAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2VzcyxcclxuICAgICAgICBzY29wZTogdGhpcy5fc2NvcGVcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXHJcbiAgICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXHJcbiAgICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cclxuICAgICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XHJcbiAgICAgICAgdGhpcy5hZnRlckJpbmQoKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXHJcbiAgICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cclxuICAgKi9cclxuXHJcbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoIXRoaXMucGFyYW1zKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcclxuICAgIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxyXG4gICAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xyXG4gICAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXk7XHJcbiAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xyXG4gICAgICBtYXBwZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xyXG4gICAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xyXG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcclxuICAgICAgICAvLyBkeW5hbWljXHJcbiAgICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHN0YXRpY1xyXG4gICAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcclxuICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcclxuICAgICAgICAgIHRoaXMucGFyYW1zW21hcHBlZEtleV0gPSB2YWwgPT09ICcnID8gdHJ1ZSA6IHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxyXG4gICAqL1xyXG5cclxuICBEaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcclxuICAgIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcclxuICAgICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcclxuICAgICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxyXG4gICAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cclxuICAgICAgaWYgKGNhbGxlZCkge1xyXG4gICAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcclxuICAgICAgICBpZiAoY2IpIHtcclxuICAgICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjYWxsZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGltbWVkaWF0ZTogdHJ1ZSxcclxuICAgICAgdXNlcjogZmFsc2VcclxuICAgIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXHJcbiAgICogYW5kIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY2FsbGFibGUgb25lLiBJZiBib3RoIHRydWUsXHJcbiAgICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxyXG4gICAqIGhhbmRsZXIuXHJcbiAgICpcclxuICAgKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcclxuICAgKlxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIERpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XHJcbiAgICBpZiAoZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJiAhaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pKSB7XHJcbiAgICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XHJcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XHJcbiAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihlKSB7XHJcbiAgICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcclxuICAgICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XHJcbiAgICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbDtcclxuICAgICAgfTtcclxuICAgICAgaWYgKHRoaXMuZmlsdGVycykge1xyXG4gICAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXHJcbiAgICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xyXG4gICAqIGUuZy4gdi1tb2RlbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcblxyXG4gIERpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgaWYgKHRoaXMudHdvV2F5KSB7XHJcbiAgICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cclxuICAgKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAqL1xyXG5cclxuICBEaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5fbG9ja2VkID0gdHJ1ZTtcclxuICAgIGZuLmNhbGwoc2VsZik7XHJcbiAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcclxuICAgKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxyXG4gICAqIGR1cmluZyB1bmJpbmQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cclxuICAgKi9cclxuXHJcbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xyXG4gICAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXHJcbiAgICovXHJcblxyXG4gIERpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuX2JvdW5kKSB7XHJcbiAgICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnVuYmluZCkge1xyXG4gICAgICAgIHRoaXMudW5iaW5kKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcclxuICAgICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcclxuICAgICAgdmFyIGk7XHJcbiAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcclxuICAgICAgaWYgKHVud2F0Y2hGbnMpIHtcclxuICAgICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcclxuICAgICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xyXG4gICAgICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmO1xyXG4gICAgICBpZiAocmVmKSB7XHJcbiAgICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XHJcbiAgICAgICAgaWYgKHJlbW92ZSkge1xyXG4gICAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xyXG4gICAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zY2x1ZGUsIGNvbXBpbGUgYW5kIGxpbmsgZWxlbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxyXG4gICAgICogcGFzc2VkIGluIGVsZW1lbnQgd2lsbCBiZSBwcmUtdHJhbnNjbHVkZWQgYW5kIGNvbXBpbGVkXHJcbiAgICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxyXG4gICAgICpcclxuICAgICAqIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNhbGwgdHJhbnNjbHVkZS9jb21waWxlL2xpbmsgaGVyZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcclxuXHJcbiAgICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxyXG4gICAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXHJcbiAgICAgIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcclxuICAgICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcclxuICAgICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxyXG4gICAgICB2YXIgb3JpZ2luYWwgPSBlbDtcclxuICAgICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcclxuICAgICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xyXG5cclxuICAgICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXHJcbiAgICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXHJcbiAgICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxyXG4gICAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XHJcbiAgICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcclxuXHJcbiAgICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cclxuICAgICAgcmVzb2x2ZVNsb3RzKHRoaXMsIG9wdGlvbnMuX2NvbnRlbnQpO1xyXG5cclxuICAgICAgLy8gY29tcGlsZSBhbmQgbGluayB0aGUgcmVzdFxyXG4gICAgICB2YXIgY29udGVudExpbmtGbjtcclxuICAgICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xyXG4gICAgICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxyXG4gICAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxyXG4gICAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcclxuICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXI7XHJcbiAgICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XHJcbiAgICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGxpbmsgcGhhc2VcclxuICAgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXHJcbiAgICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XHJcbiAgICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XHJcblxyXG4gICAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXHJcbiAgICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cclxuICAgICAgdGhpcy5fdW5saW5rRm4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcm9vdFVubGlua0ZuKCk7XHJcbiAgICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcclxuICAgICAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xyXG4gICAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxyXG4gICAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XHJcbiAgICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xyXG4gICAgICogJG1vdW50KCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xyXG4gICAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuJGVsID0gdGhpcy5fZnJhZ21lbnRTdGFydCA9IGVsLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcclxuICAgICAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xyXG4gICAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9mcmFnbWVudCA9IGVsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJGVsID0gZWw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XHJcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3JcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcclxuICAgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcclxuICAgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXHJcbiAgICAgKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xyXG4gICAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xyXG4gICAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XHJcbiAgICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIGRlc3Ryb3lSZWFkeTtcclxuICAgICAgdmFyIHBlbmRpbmdSZW1vdmFsO1xyXG5cclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcclxuICAgICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cclxuICAgICAgLy8gSW4gYW55IGNhc2UgaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgb3RoZXIgcmVtb3ZpbmcsIHVuYmluZGluZyBhbmRcclxuICAgICAgLy8gdHVybmluZyBvZiBpcyBkb25lXHJcbiAgICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xyXG4gICAgICAgIGlmIChkZXN0cm95UmVhZHkgJiYgIXBlbmRpbmdSZW1vdmFsICYmICFkZWZlckNsZWFudXApIHtcclxuICAgICAgICAgIHNlbGYuX2NsZWFudXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcclxuICAgICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xyXG4gICAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcclxuICAgICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XHJcbiAgICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xyXG4gICAgICB2YXIgaTtcclxuICAgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XHJcbiAgICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXHJcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XHJcbiAgICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xyXG4gICAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcclxuICAgICAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cclxuICAgICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIHRoaXMuJGNoaWxkcmVuW2ldLiRkZXN0cm95KCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gdGVhcmRvd24gcHJvcHNcclxuICAgICAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcclxuICAgICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXHJcbiAgICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cclxuICAgICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XHJcbiAgICAgICAgdGhpcy5fdW5saW5rRm4oKTtcclxuICAgICAgfVxyXG4gICAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcclxuICAgICAgfVxyXG4gICAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXHJcbiAgICAgIGlmICh0aGlzLiRlbCkge1xyXG4gICAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkZXN0cm95UmVhZHkgPSB0cnVlO1xyXG4gICAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXHJcbiAgICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxyXG4gICAgICogaXMgYW55LlxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcclxuICAgICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcclxuICAgICAgLy8gZGVmZXIgcmlnaHQgd2hlbiBhIGZyYWdtZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXHJcbiAgICAgIGlmICh0aGlzLl9mcmFnKSB7XHJcbiAgICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXHJcbiAgICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxyXG4gICAgICBpZiAodGhpcy5fZGF0YSAmJiB0aGlzLl9kYXRhLl9fb2JfXykge1xyXG4gICAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxyXG4gICAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XHJcbiAgICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcclxuICAgICAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxyXG4gICAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXHJcbiAgICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcclxuICAgICAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cclxuICAgICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXHJcbiAgICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcclxuICAgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXHJcbiAgICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xyXG4gICAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxyXG4gICAgICB0aGlzLiRvZmYoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtaXNjTWl4aW4gKFZ1ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cclxuICAgICAqIFVzaW5nIHBsYWluIGZvciBsb29wcyBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIGJlIGNhbGxlZCBpblxyXG4gICAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxyXG4gICAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyc1xyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxyXG4gICAgICogQHJldHVybiB7Kn1cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XHJcbiAgICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcclxuICAgICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xyXG4gICAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xyXG4gICAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xyXG4gICAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XHJcbiAgICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xyXG4gICAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XHJcbiAgICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XHJcbiAgICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XHJcbiAgICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xyXG4gICAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxyXG4gICAgICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxyXG4gICAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2VcclxuICAgICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXHJcbiAgICAgKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xyXG4gICAgICB2YXIgZmFjdG9yeTtcclxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmYWN0b3J5ID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdmFsdWUsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICBpZiAoIWZhY3RvcnkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3RvcnlcclxuICAgICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xyXG4gICAgICAgICAgLy8gY2FjaGVkXHJcbiAgICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XHJcbiAgICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xyXG4gICAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmYWN0b3J5LnJlcXVlc3RlZCA9IHRydWU7XHJcbiAgICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcclxuICAgICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xyXG4gICAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXMpKSB7XHJcbiAgICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNhY2hlIHJlc29sdmVkXHJcbiAgICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XHJcbiAgICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgY2JzW2ldKHJlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcclxuICAgICAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudCcgKyAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/ICc6ICcgKyB2YWx1ZSA6ICcnKSArICcuICcgKyAocmVhc29uID8gJ1xcblJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxyXG4gICAgICAgIGNiKGZhY3RvcnkpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgdmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xyXG5cclxuICBmdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cclxuICAgICAqIEByZXR1cm4geyp9XHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xyXG4gICAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XHJcbiAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICBpZiAoYXNTdGF0ZW1lbnQpIHtcclxuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xyXG4gICAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSB0b0FycmF5KGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XHJcbiAgICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxyXG4gICAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxyXG4gICAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcclxuICAgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xyXG4gICAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcclxuICAgICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xyXG4gICAgICogdmFsdWUgY2hhbmdlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXHJcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XHJcbiAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgIHZhciBwYXJzZWQ7XHJcbiAgICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcclxuICAgICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcclxuICAgICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcclxuICAgICAgICBzeW5jOiBvcHRpb25zICYmIG9wdGlvbnMuc3luYyxcclxuICAgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXHJcbiAgICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcclxuICAgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xyXG4gICAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcclxuICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XHJcbiAgICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxyXG4gICAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XHJcbiAgICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xyXG4gICAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxyXG4gICAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XHJcbiAgICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcclxuICAgICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIG5vIGZpbHRlclxyXG4gICAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XHJcbiAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgIGlmICh0b2tlbnMpIHtcclxuICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0b2tlbi50YWcgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgOiB0b2tlbi52YWx1ZTtcclxuICAgICAgICAgIH0pLmpvaW4oJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XHJcbiAgICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xyXG4gICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgIGRhdGEgPSBjbGVhbihkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xyXG4gICAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgICB2YXIga2V5O1xyXG4gICAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcclxuICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9wcm9wcykge1xyXG4gICAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcclxuICAgICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxyXG4gICAgICogb2JqZWN0IGNvcHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICAgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBjbGVhbihvYmopIHtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkb21BUEkgKFZ1ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXHJcbiAgICAgKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxyXG4gICAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgbmV4dFRpY2soZm4sIHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcclxuICAgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XHJcbiAgICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XHJcbiAgICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcclxuICAgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xyXG4gICAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xyXG4gICAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XHJcbiAgICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xyXG4gICAgICAgIHJldHVybiBjYiAmJiBjYigpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XHJcbiAgICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcclxuICAgICAgLy8gZm9yIHRyYW5zaXRpb25zXHJcbiAgICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xyXG4gICAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcclxuICAgICAgICBpZiAoY2IpIGNiKCk7XHJcbiAgICAgIH07XHJcbiAgICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XHJcbiAgICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcclxuICAgICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxyXG4gICAgICogQHJldHVybiB2bVxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcclxuICAgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcclxuICAgICAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhaW5Eb2ModGFyZ2V0KTtcclxuICAgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XHJcbiAgICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcclxuICAgICAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XHJcbiAgICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjYiAmJiBjYigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xyXG4gICAgICAgIHZtLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdm07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XHJcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcclxuICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcclxuICAgICAgaWYgKGNiKSBjYigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOb2RlfSBlbFxyXG4gICAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcclxuICAgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xyXG4gICAgICBiZWZvcmUoZWwsIHRhcmdldCk7XHJcbiAgICAgIGlmIChjYikgY2IoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxcclxuICAgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcclxuICAgICAgcmVtb3ZlKGVsKTtcclxuICAgICAgaWYgKGNiKSBjYigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXZlbnRzQVBJIChWdWUpIHtcclxuICAgIC8qKlxyXG4gICAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcclxuICAgICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xyXG4gICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXHJcbiAgICAgKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgZnVuY3Rpb24gb24oKSB7XHJcbiAgICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XHJcbiAgICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgfVxyXG4gICAgICBvbi5mbiA9IGZuO1xyXG4gICAgICB0aGlzLiRvbihldmVudCwgb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxyXG4gICAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xyXG4gICAgICB2YXIgY2JzO1xyXG4gICAgICAvLyBhbGxcclxuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xyXG4gICAgICAgICAgZm9yIChldmVudCBpbiB0aGlzLl9ldmVudHMpIHtcclxuICAgICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcclxuICAgICAgICAgICAgaWYgKGNicykge1xyXG4gICAgICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfVxyXG4gICAgICAvLyBzcGVjaWZpYyBldmVudFxyXG4gICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xyXG4gICAgICBpZiAoIWNicykge1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcclxuICAgICAgdmFyIGNiO1xyXG4gICAgICB2YXIgaSA9IGNicy5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICBjYiA9IGNic1tpXTtcclxuICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xyXG4gICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xyXG4gICAgICAgICAgY2JzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gc2hvdWxkUHJvcGFnYXRlXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XHJcbiAgICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XHJcbiAgICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xyXG4gICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcclxuICAgICAgaWYgKGNicykge1xyXG4gICAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xyXG4gICAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXHJcbiAgICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXHJcbiAgICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXHJcbiAgICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxyXG4gICAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XHJcbiAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgY2IgPSBjYnNbaV07XHJcbiAgICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xyXG4gICAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xyXG4gICAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xyXG4gICAgICAvLyBpZiBubyBjaGlsZCBoYXMgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudCxcclxuICAgICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxyXG4gICAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xyXG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlbjtcclxuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XHJcbiAgICAgIGlmIChpc1NvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XHJcbiAgICAgICAgLy8gb24gY2hpbGRyZW5cclxuICAgICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XHJcbiAgICAgIH1cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3MpO1xyXG4gICAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcclxuICAgICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XHJcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XHJcbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xyXG4gICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxyXG4gICAgICAvLyBvbiBwYXJlbnRzXHJcbiAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcclxuICAgICAgd2hpbGUgKHBhcmVudCkge1xyXG4gICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xyXG4gICAgICAgIHBhcmVudCA9IHNob3VsZFByb3BhZ2F0ZSA/IHBhcmVudC4kcGFyZW50IDogbnVsbDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cclxuICAgICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cclxuICAgICAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtWdWV9IHZtXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxyXG4gICAgICovXHJcblxyXG4gICAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xyXG4gICAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XHJcbiAgICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xyXG4gICAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcclxuICAgICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cclxuICAgICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xyXG4gICAgICB3aGlsZSAocGFyZW50KSB7XHJcbiAgICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcclxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcclxuICAgIC8qKlxyXG4gICAgICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cclxuICAgICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXHJcbiAgICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xyXG4gICAgICogaW5zdGFuY2VzKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xyXG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZWwgPSBxdWVyeShlbCk7XHJcbiAgICAgIGlmICghZWwpIHtcclxuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX2NvbXBpbGUoZWwpO1xyXG4gICAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcclxuICAgICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xyXG4gICAgICAgIHRoaXMuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xyXG4gICAgICAgIHJlYWR5LmNhbGwodGhpcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxyXG4gICAgICovXHJcblxyXG4gICAgZnVuY3Rpb24gcmVhZHkoKSB7XHJcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcclxuICAgICAqIF9kZXN0cm95LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xyXG4gICAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcclxuICAgICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcclxuICAgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXHJcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcclxuICAgICAgcmV0dXJuIGNvbXBpbGUoZWwsIHRoaXMuJG9wdGlvbnMsIHRydWUpKHRoaXMsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxyXG4gICAqXHJcbiAgICogQVBJIGNvbnZlbnRpb25zOlxyXG4gICAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYCRgXHJcbiAgICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXHJcbiAgICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcclxuICAgKiAgIGRhdGEuXHJcbiAgICpcclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBWdWUob3B0aW9ucykge1xyXG4gICAgdGhpcy5faW5pdChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIC8vIGluc3RhbGwgaW50ZXJuYWxzXHJcbiAgaW5pdE1peGluKFZ1ZSk7XHJcbiAgc3RhdGVNaXhpbihWdWUpO1xyXG4gIGV2ZW50c01peGluKFZ1ZSk7XHJcbiAgbGlmZWN5Y2xlTWl4aW4oVnVlKTtcclxuICBtaXNjTWl4aW4oVnVlKTtcclxuXHJcbiAgLy8gaW5zdGFsbCBpbnN0YW5jZSBBUElzXHJcbiAgZGF0YUFQSShWdWUpO1xyXG4gIGRvbUFQSShWdWUpO1xyXG4gIGV2ZW50c0FQSShWdWUpO1xyXG4gIGxpZmVjeWNsZUFQSShWdWUpO1xyXG5cclxuICB2YXIgc2xvdCA9IHtcclxuXHJcbiAgICBwcmlvcml0eTogU0xPVCxcclxuICAgIHBhcmFtczogWyduYW1lJ10sXHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgLy8gdGhpcyB3YXMgcmVzb2x2ZWQgZHVyaW5nIGNvbXBvbmVudCB0cmFuc2NsdXNpb25cclxuICAgICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0JztcclxuICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xyXG4gICAgICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgdGhpcy5mYWxsYmFjaygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY29tcGlsZShjb250ZW50LmNsb25lTm9kZSh0cnVlKSwgdGhpcy52bS5fY29udGV4dCwgdGhpcy52bSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XHJcbiAgICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcclxuICAgICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XHJcbiAgICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxyXG4gICAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxyXG4gICAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XHJcbiAgICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XHJcbiAgICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XHJcbiAgICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcclxuICAgICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XHJcbiAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xyXG4gICAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlbW92ZSh0aGlzLmVsKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XHJcbiAgICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICBpZiAodGhpcy51bmxpbmspIHtcclxuICAgICAgICB0aGlzLnVubGluaygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIHBhcnRpYWwgPSB7XHJcblxyXG4gICAgcHJpb3JpdHk6IFBBUlRJQUwsXHJcblxyXG4gICAgcGFyYW1zOiBbJ25hbWUnXSxcclxuXHJcbiAgICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcclxuICAgIHBhcmFtV2F0Y2hlcnM6IHtcclxuICAgICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xyXG4gICAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xyXG4gICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcclxuICAgICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XHJcbiAgICAgIHZhciBwYXJ0aWFsID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkLCB0cnVlKTtcclxuICAgICAgaWYgKHBhcnRpYWwpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xyXG4gICAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgaWYgKHRoaXMuZnJhZykge1xyXG4gICAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XHJcbiAgICBzbG90OiBzbG90LFxyXG4gICAgcGFydGlhbDogcGFydGlhbFxyXG4gIH07XHJcblxyXG4gIHZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2VzcztcclxuXHJcbiAgLyoqXHJcbiAgICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbGltaXRCeShhcnIsIG4sIG9mZnNldCkge1xyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xyXG4gICAgbiA9IHRvTnVtYmVyKG4pO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pIDogYXJyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IC4uLmRhdGFLZXlzXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcclxuICAgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xyXG4gICAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xyXG4gICAgfVxyXG4gICAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXHJcbiAgICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxyXG4gICAgLy8gYmVjYXVzZSB3aHkgbm90XHJcbiAgICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xyXG4gICAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXHJcbiAgICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XHJcbiAgICB2YXIgcmVzID0gW107XHJcbiAgICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgaXRlbSA9IGFycltpXTtcclxuICAgICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xyXG4gICAgICBqID0ga2V5cy5sZW5ndGg7XHJcbiAgICAgIGlmIChqKSB7XHJcbiAgICAgICAgd2hpbGUgKGotLSkge1xyXG4gICAgICAgICAga2V5ID0ga2V5c1tqXTtcclxuICAgICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcclxuICAgICAgICAgICAgcmVzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XHJcbiAgICAgICAgcmVzLnB1c2goaXRlbSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcmRlcl1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcclxuICAgIHZhciBjb21wYXJhdG9yID0gbnVsbDtcclxuICAgIHZhciBzb3J0S2V5cyA9IHVuZGVmaW5lZDtcclxuICAgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xyXG5cclxuICAgIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcclxuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xyXG4gICAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xyXG4gICAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcclxuICAgICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XHJcbiAgICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvcmRlciA9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZGV0ZXJtaW5lIHNvcnRLZXlzICYgY29tcGFyYXRvclxyXG4gICAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcclxuICAgIGlmICghZmlyc3RBcmcpIHtcclxuICAgICAgcmV0dXJuIGFycjtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXHJcbiAgICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3RcclxuICAgICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcclxuICAgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiLCBpKSB7XHJcbiAgICAgICAgaSA9IGkgfHwgMDtcclxuICAgICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcclxuICAgICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xyXG4gICAgICBpZiAoc29ydEtleSkge1xyXG4gICAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcclxuICAgICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XHJcbiAgICAgICAgICBpZiAoaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcclxuICAgICAgICBiID0gaXNPYmplY3QoYikgPyBnZXRQYXRoKGIsIHNvcnRLZXkpIDogYjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XHJcbiAgICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0cmluZyBjb250YWluIGhlbHBlclxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWxcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XHJcbiAgICB2YXIgaTtcclxuICAgIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcclxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xyXG4gICAgICBpID0ga2V5cy5sZW5ndGg7XHJcbiAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XHJcbiAgICAgIGkgPSB2YWwubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHZhbCAhPSBudWxsKSB7XHJcbiAgICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xyXG5cclxuICAvLyBhc3NldCBjb2xsZWN0aW9ucyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlxyXG4gIHZhciBmaWx0ZXJzID0ge1xyXG5cclxuICAgIG9yZGVyQnk6IG9yZGVyQnksXHJcbiAgICBmaWx0ZXJCeTogZmlsdGVyQnksXHJcbiAgICBsaW1pdEJ5OiBsaW1pdEJ5LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RyaW5naWZ5IHZhbHVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcclxuICAgICAqL1xyXG5cclxuICAgIGpzb246IHtcclxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGluZGVudCA6IDIpO1xyXG4gICAgICB9LFxyXG4gICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAnYWJjJyA9PiAnQWJjJ1xyXG4gICAgICovXHJcblxyXG4gICAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xyXG4gICAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XHJcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogJ2FiYycgPT4gJ0FCQydcclxuICAgICAqL1xyXG5cclxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6ICcnO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqICdBYkMnID0+ICdhYmMnXHJcbiAgICAgKi9cclxuXHJcbiAgICBsb3dlcmNhc2U6IGZ1bmN0aW9uIGxvd2VyY2FzZSh2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAxMjM0NSA9PiAkMTIsMzQ1LjAwXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWNpbWFscyBEZWNpbWFsIHBsYWNlc1xyXG4gICAgICovXHJcblxyXG4gICAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xyXG4gICAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcclxuICAgICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xyXG4gICAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XHJcbiAgICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xyXG4gICAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcclxuICAgICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XHJcbiAgICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XHJcbiAgICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XHJcbiAgICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqICdpdGVtJyA9PiAnaXRlbXMnXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtc1xyXG4gICAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xyXG4gICAgICogIHRoZSBzaW5nbGUsIGRvdWJsZSwgdHJpcGxlIC4uLiBmb3JtcyBvZiB0aGUgd29yZCB0b1xyXG4gICAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXHJcbiAgICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxyXG4gICAgICogIGVudHJ5IGluIHRoZSBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cclxuICAgICAqL1xyXG5cclxuICAgIHBsdXJhbGl6ZTogZnVuY3Rpb24gcGx1cmFsaXplKHZhbHVlKSB7XHJcbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xyXG4gICAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XHJcbiAgICAgIGlmIChsZW5ndGggPiAxKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXHJcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgICAqL1xyXG5cclxuICAgIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShoYW5kbGVyLCBkZWxheSkge1xyXG4gICAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcclxuICAgICAgaWYgKCFkZWxheSkge1xyXG4gICAgICAgIGRlbGF5ID0gMzAwO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBWdWUgYW5kIGV2ZXJ5IGNvbnN0cnVjdG9yIHRoYXQgZXh0ZW5kcyBWdWUgaGFzIGFuXHJcbiAgICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXHJcbiAgICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cclxuICAgICAqXHJcbiAgICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XHJcbiAgICAgKiBWdWUgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUub3B0aW9ucyA9IHtcclxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcclxuICAgICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxyXG4gICAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxyXG4gICAgICB0cmFuc2l0aW9uczoge30sXHJcbiAgICAgIGNvbXBvbmVudHM6IHt9LFxyXG4gICAgICBwYXJ0aWFsczoge30sXHJcbiAgICAgIHJlcGxhY2U6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xyXG4gICAgICovXHJcblxyXG4gICAgVnVlLnV0aWwgPSB1dGlsO1xyXG4gICAgVnVlLmNvbmZpZyA9IGNvbmZpZztcclxuICAgIFZ1ZS5zZXQgPSBzZXQ7XHJcbiAgICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xyXG4gICAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xyXG4gICAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcclxuICAgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMgPSBpbnRlcm5hbERpcmVjdGl2ZXM7XHJcbiAgICBWdWUucGFyc2VycyA9IHtcclxuICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxyXG4gICAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcclxuICAgICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxyXG4gICAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxyXG4gICAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUuY2lkID0gMDtcclxuICAgIHZhciBjaWQgPSAxO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xhc3MgaW5oZXJpdGFuY2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xyXG4gICAgICovXHJcblxyXG4gICAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XHJcbiAgICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xyXG4gICAgICB2YXIgU3VwZXIgPSB0aGlzO1xyXG4gICAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcclxuICAgICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xyXG4gICAgICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcclxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XHJcbiAgICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcclxuICAgICAgICAgIG5hbWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XHJcbiAgICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XHJcbiAgICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XHJcbiAgICAgIFN1Yi5jaWQgPSBjaWQrKztcclxuICAgICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoU3VwZXIub3B0aW9ucywgZXh0ZW5kT3B0aW9ucyk7XHJcbiAgICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xyXG4gICAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxyXG4gICAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xyXG4gICAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXHJcbiAgICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cclxuICAgICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcclxuICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXHJcbiAgICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XHJcbiAgICAgICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1YjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gU3ViO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXHJcbiAgICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cclxuICAgICAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXHJcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgICAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcclxuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cclxuICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcclxuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGx1Z2luIHN5c3RlbVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cclxuICAgICAqL1xyXG5cclxuICAgIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XHJcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcclxuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XHJcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcclxuICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xyXG4gICAgICB9XHJcbiAgICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcclxuICAgICAqIG9wdGlvbnMuXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcclxuICAgICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXHJcbiAgICAgKiBzaWduYXR1cmU6XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkXHJcbiAgICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cclxuICAgICAqL1xyXG5cclxuICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xyXG4gICAgICAgIGlmICghZGVmaW5pdGlvbikge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XHJcbiAgICAgICAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsgaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xyXG4gICAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XHJcbiAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcclxuICAgIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XHJcbiAgfVxyXG5cclxuICBpbnN0YWxsR2xvYmFsQVBJKFZ1ZSk7XHJcblxyXG4gIFZ1ZS52ZXJzaW9uID0gJzEuMC4yNic7XHJcblxyXG4gIC8vIGRldnRvb2xzIGdsb2JhbCBob29rXHJcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcclxuICAgICAgaWYgKGRldnRvb2xzKSB7XHJcbiAgICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIDApO1xyXG5cclxuICByZXR1cm4gVnVlO1xyXG5cclxufSkpOyIsIi8qIVxyXG4gKiB2dWUtcm91dGVyIHYwLjcuMTNcclxuICogKGMpIDIwMTYgRXZhbiBZb3VcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4gKi9cclxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XHJcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcclxuICBnbG9iYWwuVnVlUm91dGVyID0gZmFjdG9yeSgpO1xyXG59KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICB2YXIgYmFiZWxIZWxwZXJzID0ge307XHJcblxyXG4gIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcclxuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuICBmdW5jdGlvbiBUYXJnZXQocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHtcclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICB0aGlzLm1hdGNoZXIgPSBtYXRjaGVyO1xyXG4gICAgdGhpcy5kZWxlZ2F0ZSA9IGRlbGVnYXRlO1xyXG4gIH1cclxuXHJcbiAgVGFyZ2V0LnByb3RvdHlwZSA9IHtcclxuICAgIHRvOiBmdW5jdGlvbiB0byh0YXJnZXQsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciBkZWxlZ2F0ZSA9IHRoaXMuZGVsZWdhdGU7XHJcblxyXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUud2lsbEFkZFJvdXRlKSB7XHJcbiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFkZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMubWF0Y2hlci5hZGQodGhpcy5wYXRoLCB0YXJnZXQpO1xyXG5cclxuICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgaGF2ZSBhbiBhcmd1bWVudCBpbiB0aGUgZnVuY3Rpb24gcGFzc2VkIHRvIGB0b2BcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlzLnBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIHRoaXMuZGVsZWdhdGUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHt9O1xyXG4gICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xyXG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgfVxyXG5cclxuICBNYXRjaGVyLnByb3RvdHlwZSA9IHtcclxuICAgIGFkZDogZnVuY3Rpb24gYWRkKHBhdGgsIGhhbmRsZXIpIHtcclxuICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSBoYW5kbGVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRDaGlsZDogZnVuY3Rpb24gYWRkQ2hpbGQocGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgZGVsZWdhdGUpIHtcclxuICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcih0YXJnZXQpO1xyXG4gICAgICB0aGlzLmNoaWxkcmVuW3BhdGhdID0gbWF0Y2hlcjtcclxuXHJcbiAgICAgIHZhciBtYXRjaCA9IGdlbmVyYXRlTWF0Y2gocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xyXG5cclxuICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKSB7XHJcbiAgICAgICAgZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhbGxiYWNrKG1hdGNoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBnZW5lcmF0ZU1hdGNoKHN0YXJ0aW5nUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAocGF0aCwgbmVzdGVkQ2FsbGJhY2spIHtcclxuICAgICAgdmFyIGZ1bGxQYXRoID0gc3RhcnRpbmdQYXRoICsgcGF0aDtcclxuXHJcbiAgICAgIGlmIChuZXN0ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIG5lc3RlZENhbGxiYWNrKGdlbmVyYXRlTWF0Y2goZnVsbFBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsgcGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkUm91dGUocm91dGVBcnJheSwgcGF0aCwgaGFuZGxlcikge1xyXG4gICAgdmFyIGxlbiA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIGxlbiArPSByb3V0ZUFycmF5W2ldLnBhdGgubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdGggPSBwYXRoLnN1YnN0cihsZW4pO1xyXG4gICAgdmFyIHJvdXRlID0geyBwYXRoOiBwYXRoLCBoYW5kbGVyOiBoYW5kbGVyIH07XHJcbiAgICByb3V0ZUFycmF5LnB1c2gocm91dGUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZWFjaFJvdXRlKGJhc2VSb3V0ZSwgbWF0Y2hlciwgY2FsbGJhY2ssIGJpbmRpbmcpIHtcclxuICAgIHZhciByb3V0ZXMgPSBtYXRjaGVyLnJvdXRlcztcclxuXHJcbiAgICBmb3IgKHZhciBwYXRoIGluIHJvdXRlcykge1xyXG4gICAgICBpZiAocm91dGVzLmhhc093blByb3BlcnR5KHBhdGgpKSB7XHJcbiAgICAgICAgdmFyIHJvdXRlQXJyYXkgPSBiYXNlUm91dGUuc2xpY2UoKTtcclxuICAgICAgICBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pO1xyXG5cclxuICAgICAgICBpZiAobWF0Y2hlci5jaGlsZHJlbltwYXRoXSkge1xyXG4gICAgICAgICAgZWFjaFJvdXRlKHJvdXRlQXJyYXksIG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBiaW5kaW5nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCByb3V0ZUFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1hcCAoY2FsbGJhY2ssIGFkZFJvdXRlQ2FsbGJhY2spIHtcclxuICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIoKTtcclxuXHJcbiAgICBjYWxsYmFjayhnZW5lcmF0ZU1hdGNoKFwiXCIsIG1hdGNoZXIsIHRoaXMuZGVsZWdhdGUpKTtcclxuXHJcbiAgICBlYWNoUm91dGUoW10sIG1hdGNoZXIsIGZ1bmN0aW9uIChyb3V0ZSkge1xyXG4gICAgICBpZiAoYWRkUm91dGVDYWxsYmFjaykge1xyXG4gICAgICAgIGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYWRkKHJvdXRlKTtcclxuICAgICAgfVxyXG4gICAgfSwgdGhpcyk7XHJcbiAgfVxyXG5cclxuICB2YXIgc3BlY2lhbHMgPSBbJy8nLCAnLicsICcqJywgJysnLCAnPycsICd8JywgJygnLCAnKScsICdbJywgJ10nLCAneycsICd9JywgJ1xcXFwnXTtcclxuXHJcbiAgdmFyIGVzY2FwZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFxcXFwnICsgc3BlY2lhbHMuam9pbignfFxcXFwnKSArICcpJywgJ2cnKTtcclxuXHJcbiAgdmFyIG5vV2FybmluZyA9IGZhbHNlO1xyXG4gIGZ1bmN0aW9uIHdhcm4obXNnKSB7XHJcbiAgICBpZiAoIW5vV2FybmluZyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdHJ5RGVjb2RlKHVyaSwgYXNDb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhc0NvbXBvbmVudCA/IGRlY29kZVVSSUNvbXBvbmVudCh1cmkpIDogZGVjb2RlVVJJKHVyaSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHdhcm4oJ21hbGZvcm1lZCBVUkknICsgKGFzQ29tcG9uZW50ID8gJyBjb21wb25lbnQ6ICcgOiAnOiAnKSArIHVyaSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0FycmF5KHRlc3QpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGVzdCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcclxuICB9XHJcblxyXG4gIC8vIEEgU2VnbWVudCByZXByZXNlbnRzIGEgc2VnbWVudCBpbiB0aGUgb3JpZ2luYWwgcm91dGUgZGVzY3JpcHRpb24uXHJcbiAgLy8gRWFjaCBTZWdtZW50IHR5cGUgcHJvdmlkZXMgYW4gYGVhY2hDaGFyYCBhbmQgYHJlZ2V4YCBtZXRob2QuXHJcbiAgLy9cclxuICAvLyBUaGUgYGVhY2hDaGFyYCBtZXRob2QgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJcclxuICAvLyBzcGVjaWZpY2F0aW9ucy4gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb25zdW1lcyBvbmUgb3IgbW9yZSBpbnB1dFxyXG4gIC8vIGNoYXJhY3RlcnMuXHJcbiAgLy9cclxuICAvLyBUaGUgYHJlZ2V4YCBtZXRob2QgcmV0dXJucyBhIHJlZ2V4IGZyYWdtZW50IGZvciB0aGUgc2VnbWVudC4gSWYgdGhlXHJcbiAgLy8gc2VnbWVudCBpcyBhIGR5bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0aGUgcmVnZXggZnJhZ21lbnQgYWxzbyBpbmNsdWRlc1xyXG4gIC8vIGEgY2FwdHVyZS5cclxuICAvL1xyXG4gIC8vIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29udGFpbnM6XHJcbiAgLy9cclxuICAvLyAqIGB2YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIHZhbGlkIGNoYXJhY3RlcnMsIG9yXHJcbiAgLy8gKiBgaW52YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIGludmFsaWQgY2hhcmFjdGVyc1xyXG4gIC8vICogYHJlcGVhdGA6IHRydWUgaWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNhbiByZXBlYXRcclxuXHJcbiAgZnVuY3Rpb24gU3RhdGljU2VnbWVudChzdHJpbmcpIHtcclxuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xyXG4gIH1cclxuICBTdGF0aWNTZWdtZW50LnByb3RvdHlwZSA9IHtcclxuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xyXG4gICAgICB2YXIgc3RyaW5nID0gdGhpcy5zdHJpbmcsXHJcbiAgICAgICAgICBjaDtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RyaW5nLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGNoID0gc3RyaW5nLmNoYXJBdChpKTtcclxuICAgICAgICBjYWxsYmFjayh7IHZhbGlkQ2hhcnM6IGNoIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoZXNjYXBlUmVnZXgsICdcXFxcJDEnKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmc7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gRHluYW1pY1NlZ21lbnQobmFtZSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICB9XHJcbiAgRHluYW1pY1NlZ21lbnQucHJvdG90eXBlID0ge1xyXG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XHJcbiAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIi9cIiwgcmVwZWF0OiB0cnVlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XHJcbiAgICAgIHJldHVybiBcIihbXi9dKylcIjtcclxuICAgIH0sXHJcblxyXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKHBhcmFtcykge1xyXG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XHJcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIFN0YXJTZWdtZW50KG5hbWUpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgfVxyXG4gIFN0YXJTZWdtZW50LnByb3RvdHlwZSA9IHtcclxuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xyXG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCJcIiwgcmVwZWF0OiB0cnVlIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XHJcbiAgICAgIHJldHVybiBcIiguKylcIjtcclxuICAgIH0sXHJcblxyXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKHBhcmFtcykge1xyXG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XHJcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIEVwc2lsb25TZWdtZW50KCkge31cclxuICBFcHNpbG9uU2VnbWVudC5wcm90b3R5cGUgPSB7XHJcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoKSB7fSxcclxuICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcclxuICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9LFxyXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZShyb3V0ZSwgbmFtZXMsIHNwZWNpZmljaXR5KSB7XHJcbiAgICAvLyBub3JtYWxpemUgcm91dGUgYXMgbm90IHN0YXJ0aW5nIHdpdGggYSBcIi9cIi4gUmVjb2duaXRpb24gd2lsbFxyXG4gICAgLy8gYWxzbyBub3JtYWxpemUuXHJcbiAgICBpZiAocm91dGUuY2hhckF0KDApID09PSBcIi9cIikge1xyXG4gICAgICByb3V0ZSA9IHJvdXRlLnN1YnN0cigxKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zcGxpdChcIi9cIiksXHJcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xyXG5cclxuICAgIC8vIEEgcm91dGVzIGhhcyBzcGVjaWZpY2l0eSBkZXRlcm1pbmVkIGJ5IHRoZSBvcmRlciB0aGF0IGl0cyBkaWZmZXJlbnQgc2VnbWVudHNcclxuICAgIC8vIGFwcGVhciBpbi4gVGhpcyBzeXN0ZW0gbWlycm9ycyBob3cgdGhlIG1hZ25pdHVkZSBvZiBudW1iZXJzIHdyaXR0ZW4gYXMgc3RyaW5nc1xyXG4gICAgLy8gd29ya3MuXHJcbiAgICAvLyBDb25zaWRlciBhIG51bWJlciB3cml0dGVuIGFzOiBcImFiY1wiLiBBbiBleGFtcGxlIHdvdWxkIGJlIFwiMjAwXCIuIEFueSBvdGhlciBudW1iZXIgd3JpdHRlblxyXG4gICAgLy8gXCJ4eXpcIiB3aWxsIGJlIHNtYWxsZXIgdGhhbiBcImFiY1wiIHNvIGxvbmcgYXMgYGEgPiB6YC4gRm9yIGluc3RhbmNlLCBcIjE5OVwiIGlzIHNtYWxsZXJcclxuICAgIC8vIHRoZW4gXCIyMDBcIiwgZXZlbiB0aG91Z2ggXCJ5XCIgYW5kIFwielwiICh3aGljaCBhcmUgYm90aCA5KSBhcmUgbGFyZ2VyIHRoYW4gXCIwXCIgKHRoZSB2YWx1ZVxyXG4gICAgLy8gb2YgKGBiYCBhbmQgYGNgKS4gVGhpcyBpcyBiZWNhdXNlIHRoZSBsZWFkaW5nIHN5bWJvbCwgXCIyXCIsIGlzIGxhcmdlciB0aGFuIHRoZSBvdGhlclxyXG4gICAgLy8gbGVhZGluZyBzeW1ib2wsIFwiMVwiLlxyXG4gICAgLy8gVGhlIHJ1bGUgaXMgdGhhdCBzeW1ib2xzIHRvIHRoZSBsZWZ0IGNhcnJ5IG1vcmUgd2VpZ2h0IHRoYW4gc3ltYm9scyB0byB0aGUgcmlnaHRcclxuICAgIC8vIHdoZW4gYSBudW1iZXIgaXMgd3JpdHRlbiBvdXQgYXMgYSBzdHJpbmcuIEluIHRoZSBhYm92ZSBzdHJpbmdzLCB0aGUgbGVhZGluZyBkaWdpdFxyXG4gICAgLy8gcmVwcmVzZW50cyBob3cgbWFueSAxMDAncyBhcmUgaW4gdGhlIG51bWJlciwgYW5kIGl0IGNhcnJpZXMgbW9yZSB3ZWlnaHQgdGhhbiB0aGUgbWlkZGxlXHJcbiAgICAvLyBudW1iZXIgd2hpY2ggcmVwcmVzZW50cyBob3cgbWFueSAxMCdzIGFyZSBpbiB0aGUgbnVtYmVyLlxyXG4gICAgLy8gVGhpcyBzeXN0ZW0gb2YgbnVtYmVyIG1hZ25pdHVkZSB3b3JrcyB3ZWxsIGZvciByb3V0ZSBzcGVjaWZpY2l0eSwgdG9vLiBBIHJvdXRlIHdyaXR0ZW4gYXNcclxuICAgIC8vIGBhL2IvY2Agd2lsbCBiZSBtb3JlIHNwZWNpZmljIHRoYW4gYHgveS96YCBhcyBsb25nIGFzIGBhYCBpcyBtb3JlIHNwZWNpZmljIHRoYW5cclxuICAgIC8vIGB4YCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBvdGhlciBwYXJ0cy5cclxuICAgIC8vIEJlY2F1c2Ugb2YgdGhpcyBzaW1pbGFyaXR5LCB3ZSBhc3NpZ24gZWFjaCB0eXBlIG9mIHNlZ21lbnQgYSBudW1iZXIgdmFsdWUgd3JpdHRlbiBhcyBhXHJcbiAgICAvLyBzdHJpbmcuIFdlIGNhbiBmaW5kIHRoZSBzcGVjaWZpY2l0eSBvZiBjb21wb3VuZCByb3V0ZXMgYnkgY29uY2F0ZW5hdGluZyB0aGVzZSBzdHJpbmdzXHJcbiAgICAvLyB0b2dldGhlciwgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBBZnRlciB3ZSBoYXZlIGxvb3BlZCB0aHJvdWdoIGFsbCBvZiB0aGUgc2VnbWVudHMsXHJcbiAgICAvLyB3ZSBjb252ZXJ0IHRoZSBzdHJpbmcgdG8gYSBudW1iZXIuXHJcbiAgICBzcGVjaWZpY2l0eS52YWwgPSAnJztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldLFxyXG4gICAgICAgICAgbWF0Y2g7XHJcblxyXG4gICAgICBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXlxcL10rKSQvKSkge1xyXG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21lbnQobWF0Y2hbMV0pKTtcclxuICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTtcclxuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzMnO1xyXG4gICAgICB9IGVsc2UgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXlxcKihbXlxcL10rKSQvKSkge1xyXG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgU3RhclNlZ21lbnQobWF0Y2hbMV0pKTtcclxuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzInO1xyXG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xyXG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQgPT09IFwiXCIpIHtcclxuICAgICAgICByZXN1bHRzLnB1c2gobmV3IEVwc2lsb25TZWdtZW50KCkpO1xyXG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHNlZ21lbnQpKTtcclxuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzQnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3BlY2lmaWNpdHkudmFsID0gK3NwZWNpZmljaXR5LnZhbDtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxuICB9XHJcblxyXG4gIC8vIEEgU3RhdGUgaGFzIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYW5kIChgY2hhclNwZWNgKSBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlXHJcbiAgLy8gc3Vic2VxdWVudCBzdGF0ZXMgKGBuZXh0U3RhdGVzYCkuXHJcbiAgLy9cclxuICAvLyBJZiBhIFN0YXRlIGlzIGFuIGFjY2VwdGluZyBzdGF0ZSwgaXQgd2lsbCBhbHNvIGhhdmUgc2V2ZXJhbCBhZGRpdGlvbmFsXHJcbiAgLy8gcHJvcGVydGllczpcclxuICAvL1xyXG4gIC8vICogYHJlZ2V4YDogQSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIGV4dHJhY3QgcGFyYW1ldGVycyBmcm9tIHBhdGhzXHJcbiAgLy8gICB0aGF0IHJlYWNoZWQgdGhpcyBhY2NlcHRpbmcgc3RhdGUuXHJcbiAgLy8gKiBgaGFuZGxlcnNgOiBJbmZvcm1hdGlvbiBvbiBob3cgdG8gY29udmVydCB0aGUgbGlzdCBvZiBjYXB0dXJlcyBpbnRvIGNhbGxzXHJcbiAgLy8gICB0byByZWdpc3RlcmVkIGhhbmRsZXJzIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXJzXHJcbiAgLy8gKiBgdHlwZXNgOiBIb3cgbWFueSBzdGF0aWMsIGR5bmFtaWMgb3Igc3RhciBzZWdtZW50cyBpbiB0aGlzIHJvdXRlLiBVc2VkIHRvXHJcbiAgLy8gICBkZWNpZGUgd2hpY2ggcm91dGUgdG8gdXNlIGlmIG11bHRpcGxlIHJlZ2lzdGVyZWQgcm91dGVzIG1hdGNoIGEgcGF0aC5cclxuICAvL1xyXG4gIC8vIEN1cnJlbnRseSwgU3RhdGUgaXMgaW1wbGVtZW50ZWQgbmFpdmVseSBieSBsb29waW5nIG92ZXIgYG5leHRTdGF0ZXNgIGFuZFxyXG4gIC8vIGNvbXBhcmluZyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFnYWluc3QgYSBjaGFyYWN0ZXIuIEEgbW9yZSBlZmZpY2llbnRcclxuICAvLyBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBoYXNoIG9mIGtleXMgcG9pbnRpbmcgYXQgb25lIG9yIG1vcmUgbmV4dCBzdGF0ZXMuXHJcblxyXG4gIGZ1bmN0aW9uIFN0YXRlKGNoYXJTcGVjKSB7XHJcbiAgICB0aGlzLmNoYXJTcGVjID0gY2hhclNwZWM7XHJcbiAgICB0aGlzLm5leHRTdGF0ZXMgPSBbXTtcclxuICB9XHJcblxyXG4gIFN0YXRlLnByb3RvdHlwZSA9IHtcclxuICAgIGdldDogZnVuY3Rpb24gZ2V0KGNoYXJTcGVjKSB7XHJcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHZhciBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XHJcblxyXG4gICAgICAgIHZhciBpc0VxdWFsID0gY2hpbGQuY2hhclNwZWMudmFsaWRDaGFycyA9PT0gY2hhclNwZWMudmFsaWRDaGFycztcclxuICAgICAgICBpc0VxdWFsID0gaXNFcXVhbCAmJiBjaGlsZC5jaGFyU3BlYy5pbnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLmludmFsaWRDaGFycztcclxuXHJcbiAgICAgICAgaWYgKGlzRXF1YWwpIHtcclxuICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcHV0OiBmdW5jdGlvbiBwdXQoY2hhclNwZWMpIHtcclxuICAgICAgdmFyIHN0YXRlO1xyXG5cclxuICAgICAgLy8gSWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnRcclxuICAgICAgLy8gc3RhdGUsIGp1c3QgcmV0dXJuIHRoYXQgc3RhdGUuXHJcbiAgICAgIGlmIChzdGF0ZSA9IHRoaXMuZ2V0KGNoYXJTcGVjKSkge1xyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTWFrZSBhIG5ldyBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciBzcGVjXHJcbiAgICAgIHN0YXRlID0gbmV3IFN0YXRlKGNoYXJTcGVjKTtcclxuXHJcbiAgICAgIC8vIEluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgc3RhdGVcclxuICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xyXG5cclxuICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRzLCBpbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkXHJcbiAgICAgIC8vIG9mIGl0c2VsZi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgdHJpZ2dlciBhbiBpbmZpbml0ZSBsb29wIGJlY2F1c2UgZWFjaFxyXG4gICAgICAvLyB0cmFuc2l0aW9uIGR1cmluZyByZWNvZ25pdGlvbiBjb25zdW1lcyBhIGNoYXJhY3Rlci5cclxuICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkge1xyXG4gICAgICAgIHN0YXRlLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJldHVybiB0aGUgbmV3IHN0YXRlXHJcbiAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gRmluZCBhIGxpc3Qgb2YgY2hpbGQgc3RhdGVzIG1hdGNoaW5nIHRoZSBuZXh0IGNoYXJhY3RlclxyXG4gICAgbWF0Y2g6IGZ1bmN0aW9uIG1hdGNoKGNoKSB7XHJcbiAgICAgIC8vIERFQlVHIFwiUHJvY2Vzc2luZyBgXCIgKyBjaCArIFwiYDpcIlxyXG4gICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcyxcclxuICAgICAgICAgIGNoaWxkLFxyXG4gICAgICAgICAgY2hhclNwZWMsXHJcbiAgICAgICAgICBjaGFycztcclxuXHJcbiAgICAgIC8vIERFQlVHIFwiICBcIiArIGRlYnVnU3RhdGUodGhpcylcclxuICAgICAgdmFyIHJldHVybmVkID0gW107XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xyXG5cclxuICAgICAgICBjaGFyU3BlYyA9IGNoaWxkLmNoYXJTcGVjO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpID09PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXR1cm5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogSUYgREVCVUdcclxuICAgICwgZGVidWc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLFxyXG4gICAgICAgICAgZGVidWcgPSBcIltcIixcclxuICAgICAgICAgIGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycyB8fCBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XHJcbiAgICAgICBpZiAoY2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9IFwiXlwiOyB9XHJcbiAgICAgIGRlYnVnICs9IGNoYXJzO1xyXG4gICAgICBkZWJ1ZyArPSBcIl1cIjtcclxuICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcgKz0gXCIrXCI7IH1cclxuICAgICAgIHJldHVybiBkZWJ1ZztcclxuICAgIH1cclxuICAgIEVORCBJRiAqKi9cclxuICB9O1xyXG5cclxuICAvKiogSUYgREVCVUdcclxuICBmdW5jdGlvbiBkZWJ1Zyhsb2cpIHtcclxuICAgIGNvbnNvbGUubG9nKGxvZyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7XHJcbiAgICByZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikge1xyXG4gICAgICBpZiAobi5uZXh0U3RhdGVzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gXCIoIFwiICsgbi5kZWJ1ZygpICsgXCIgW2FjY2VwdGluZ10gKVwiOyB9XHJcbiAgICAgIHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiA8dGhlbj4gXCIgKyBuLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuZGVidWcoKSB9KS5qb2luKFwiIG9yIFwiKSArIFwiIClcIjtcclxuICAgIH0pLmpvaW4oXCIsIFwiKVxyXG4gIH1cclxuICBFTkQgSUYgKiovXHJcblxyXG4gIC8vIFNvcnQgdGhlIHJvdXRlcyBieSBzcGVjaWZpY2l0eVxyXG4gIGZ1bmN0aW9uIHNvcnRTb2x1dGlvbnMoc3RhdGVzKSB7XHJcbiAgICByZXR1cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgcmV0dXJuIGIuc3BlY2lmaWNpdHkudmFsIC0gYS5zcGVjaWZpY2l0eS52YWw7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlY29nbml6ZUNoYXIoc3RhdGVzLCBjaCkge1xyXG4gICAgdmFyIG5leHRTdGF0ZXMgPSBbXTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xyXG5cclxuICAgICAgbmV4dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0YXRlLm1hdGNoKGNoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5leHRTdGF0ZXM7XHJcbiAgfVxyXG5cclxuICB2YXIgb0NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvKSB7XHJcbiAgICBmdW5jdGlvbiBGKCkge31cclxuICAgIEYucHJvdG90eXBlID0gcHJvdG87XHJcbiAgICByZXR1cm4gbmV3IEYoKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKSB7XHJcbiAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXMgfHwge307XHJcbiAgfVxyXG4gIFJlY29nbml6ZVJlc3VsdHMucHJvdG90eXBlID0gb0NyZWF0ZSh7XHJcbiAgICBzcGxpY2U6IEFycmF5LnByb3RvdHlwZS5zcGxpY2UsXHJcbiAgICBzbGljZTogQXJyYXkucHJvdG90eXBlLnNsaWNlLFxyXG4gICAgcHVzaDogQXJyYXkucHJvdG90eXBlLnB1c2gsXHJcbiAgICBsZW5ndGg6IDAsXHJcbiAgICBxdWVyeVBhcmFtczogbnVsbFxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpIHtcclxuICAgIHZhciBoYW5kbGVycyA9IHN0YXRlLmhhbmRsZXJzLFxyXG4gICAgICAgIHJlZ2V4ID0gc3RhdGUucmVnZXg7XHJcbiAgICB2YXIgY2FwdHVyZXMgPSBwYXRoLm1hdGNoKHJlZ2V4KSxcclxuICAgICAgICBjdXJyZW50Q2FwdHVyZSA9IDE7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbaV0sXHJcbiAgICAgICAgICBuYW1lcyA9IGhhbmRsZXIubmFtZXMsXHJcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcclxuXHJcbiAgICAgIGZvciAodmFyIGogPSAwLCBtID0gbmFtZXMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XHJcbiAgICAgICAgcGFyYW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXN1bHQucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIuaGFuZGxlciwgcGFyYW1zOiBwYXJhbXMsIGlzRHluYW1pYzogISFuYW1lcy5sZW5ndGggfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7XHJcbiAgICBzZWdtZW50LmVhY2hDaGFyKGZ1bmN0aW9uIChjaCkge1xyXG4gICAgICB2YXIgc3RhdGU7XHJcblxyXG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KGNoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkZWNvZGVRdWVyeVBhcmFtUGFydChwYXJ0KSB7XHJcbiAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNDAxL2ludGVyYWN0L2Zvcm1zLmh0bWwjaC0xNy4xMy40LjFcclxuICAgIHBhcnQgPSBwYXJ0LnJlcGxhY2UoL1xcKy9nbSwgJyUyMCcpO1xyXG4gICAgcmV0dXJuIHRyeURlY29kZShwYXJ0LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIC8vIFRoZSBtYWluIGludGVyZmFjZVxyXG5cclxuICB2YXIgUm91dGVSZWNvZ25pemVyID0gZnVuY3Rpb24gUm91dGVSZWNvZ25pemVyKCkge1xyXG4gICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUoKTtcclxuICAgIHRoaXMubmFtZXMgPSB7fTtcclxuICB9O1xyXG5cclxuICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlID0ge1xyXG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocm91dGVzLCBvcHRpb25zKSB7XHJcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0ZSxcclxuICAgICAgICAgIHJlZ2V4ID0gXCJeXCIsXHJcbiAgICAgICAgICBzcGVjaWZpY2l0eSA9IHt9LFxyXG4gICAgICAgICAgaGFuZGxlcnMgPSBbXSxcclxuICAgICAgICAgIGFsbFNlZ21lbnRzID0gW10sXHJcbiAgICAgICAgICBuYW1lO1xyXG5cclxuICAgICAgdmFyIGlzRW1wdHkgPSB0cnVlO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHJvdXRlID0gcm91dGVzW2ldLFxyXG4gICAgICAgICAgICBuYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXJzZShyb3V0ZS5wYXRoLCBuYW1lcywgc3BlY2lmaWNpdHkpO1xyXG5cclxuICAgICAgICBhbGxTZWdtZW50cyA9IGFsbFNlZ21lbnRzLmNvbmNhdChzZWdtZW50cyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gc2VnbWVudHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XHJcbiAgICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2pdO1xyXG5cclxuICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIC8vIEFkZCBhIFwiL1wiIGZvciB0aGUgbmV3IHNlZ21lbnRcclxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcclxuICAgICAgICAgIHJlZ2V4ICs9IFwiL1wiO1xyXG5cclxuICAgICAgICAgIC8vIEFkZCBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzZWdtZW50IHRvIHRoZSBORkEgYW5kIHJlZ2V4XHJcbiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBhZGRTZWdtZW50KGN1cnJlbnRTdGF0ZSwgc2VnbWVudCk7XHJcbiAgICAgICAgICByZWdleCArPSBzZWdtZW50LnJlZ2V4KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaGFuZGxlciA9IHsgaGFuZGxlcjogcm91dGUuaGFuZGxlciwgbmFtZXM6IG5hbWVzIH07XHJcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGlzRW1wdHkpIHtcclxuICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogXCIvXCIgfSk7XHJcbiAgICAgICAgcmVnZXggKz0gXCIvXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGN1cnJlbnRTdGF0ZS5oYW5kbGVycyA9IGhhbmRsZXJzO1xyXG4gICAgICBjdXJyZW50U3RhdGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4ICsgXCIkXCIpO1xyXG4gICAgICBjdXJyZW50U3RhdGUuc3BlY2lmaWNpdHkgPSBzcGVjaWZpY2l0eTtcclxuXHJcbiAgICAgIGlmIChuYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmFzKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lc1tuYW1lXSA9IHtcclxuICAgICAgICAgIHNlZ21lbnRzOiBhbGxTZWdtZW50cyxcclxuICAgICAgICAgIGhhbmRsZXJzOiBoYW5kbGVyc1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlcnNGb3I6IGZ1bmN0aW9uIGhhbmRsZXJzRm9yKG5hbWUpIHtcclxuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcclxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICBpZiAoIXJvdXRlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZS5oYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICByZXN1bHQucHVzaChyb3V0ZS5oYW5kbGVyc1tpXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhc1JvdXRlOiBmdW5jdGlvbiBoYXNSb3V0ZShuYW1lKSB7XHJcbiAgICAgIHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07XHJcbiAgICB9LFxyXG5cclxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShuYW1lLCBwYXJhbXMpIHtcclxuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcclxuICAgICAgICAgIG91dHB1dCA9IFwiXCI7XHJcbiAgICAgIGlmICghcm91dGUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zZWdtZW50cztcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcclxuXHJcbiAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvdXRwdXQgKz0gXCIvXCI7XHJcbiAgICAgICAgb3V0cHV0ICs9IHNlZ21lbnQuZ2VuZXJhdGUocGFyYW1zKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG91dHB1dC5jaGFyQXQoMCkgIT09ICcvJykge1xyXG4gICAgICAgIG91dHB1dCA9ICcvJyArIG91dHB1dDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucXVlcnlQYXJhbXMpIHtcclxuICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcy5xdWVyeVBhcmFtcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG5cclxuICAgIGdlbmVyYXRlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zKSB7XHJcbiAgICAgIHZhciBwYWlycyA9IFtdO1xyXG4gICAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICAgICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAga2V5cy5zb3J0KCk7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbXNba2V5XTtcclxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYWlyID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaiA8IGw7IGorKykge1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlQYWlyID0ga2V5ICsgJ1tdJyArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSk7XHJcbiAgICAgICAgICAgIHBhaXJzLnB1c2goYXJyYXlQYWlyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGFpciArPSBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgICBwYWlycy5wdXNoKHBhaXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHBhaXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFwiP1wiICsgcGFpcnMuam9pbihcIiZcIik7XHJcbiAgICB9LFxyXG5cclxuICAgIHBhcnNlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcclxuICAgICAgdmFyIHBhaXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpLFxyXG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKSxcclxuICAgICAgICAgICAga2V5ID0gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclswXSksXHJcbiAgICAgICAgICAgIGtleUxlbmd0aCA9IGtleS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGlzQXJyYXkgPSBmYWxzZSxcclxuICAgICAgICAgICAgdmFsdWU7XHJcbiAgICAgICAgaWYgKHBhaXIubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9ICd0cnVlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy9IYW5kbGUgYXJyYXlzXHJcbiAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMiAmJiBrZXkuc2xpY2Uoa2V5TGVuZ3RoIC0gMikgPT09ICdbXScpIHtcclxuICAgICAgICAgICAgaXNBcnJheSA9IHRydWU7XHJcbiAgICAgICAgICAgIGtleSA9IGtleS5zbGljZSgwLCBrZXlMZW5ndGggLSAyKTtcclxuICAgICAgICAgICAgaWYgKCFxdWVyeVBhcmFtc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB2YWx1ZSA9IHBhaXJbMV0gPyBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzFdKSA6ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNBcnJheSkge1xyXG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XS5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcXVlcnlQYXJhbXM7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlY29nbml6ZTogZnVuY3Rpb24gcmVjb2duaXplKHBhdGgsIHNpbGVudCkge1xyXG4gICAgICBub1dhcm5pbmcgPSBzaWxlbnQ7XHJcbiAgICAgIHZhciBzdGF0ZXMgPSBbdGhpcy5yb290U3RhdGVdLFxyXG4gICAgICAgICAgcGF0aExlbixcclxuICAgICAgICAgIGksXHJcbiAgICAgICAgICBsLFxyXG4gICAgICAgICAgcXVlcnlTdGFydCxcclxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge30sXHJcbiAgICAgICAgICBpc1NsYXNoRHJvcHBlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpO1xyXG4gICAgICBpZiAocXVlcnlTdGFydCAhPT0gLTEpIHtcclxuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0cihxdWVyeVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpO1xyXG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KTtcclxuICAgICAgICBpZiAocXVlcnlTdHJpbmcpIHtcclxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBhdGggPSB0cnlEZWNvZGUocGF0aCk7XHJcbiAgICAgIGlmICghcGF0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aFxyXG5cclxuICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9PSBcIi9cIikge1xyXG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBhdGhMZW4gPSBwYXRoLmxlbmd0aDtcclxuICAgICAgaWYgKHBhdGhMZW4gPiAxICYmIHBhdGguY2hhckF0KHBhdGhMZW4gLSAxKSA9PT0gXCIvXCIpIHtcclxuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aExlbiAtIDEpO1xyXG4gICAgICAgIGlzU2xhc2hEcm9wcGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgc3RhdGVzID0gcmVjb2duaXplQ2hhcihzdGF0ZXMsIHBhdGguY2hhckF0KGkpKTtcclxuICAgICAgICBpZiAoIXN0YXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRU5EIERFQlVHIEdST1VQXHJcblxyXG4gICAgICB2YXIgc29sdXRpb25zID0gW107XHJcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlc1tpXS5oYW5kbGVycykge1xyXG4gICAgICAgICAgc29sdXRpb25zLnB1c2goc3RhdGVzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXRlcyA9IHNvcnRTb2x1dGlvbnMoc29sdXRpb25zKTtcclxuXHJcbiAgICAgIHZhciBzdGF0ZSA9IHNvbHV0aW9uc1swXTtcclxuXHJcbiAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5oYW5kbGVycykge1xyXG4gICAgICAgIC8vIGlmIGEgdHJhaWxpbmcgc2xhc2ggd2FzIGRyb3BwZWQgYW5kIGEgc3RhciBzZWdtZW50IGlzIHRoZSBsYXN0IHNlZ21lbnRcclxuICAgICAgICAvLyBzcGVjaWZpZWQsIHB1dCB0aGUgdHJhaWxpbmcgc2xhc2ggYmFja1xyXG4gICAgICAgIGlmIChpc1NsYXNoRHJvcHBlZCAmJiBzdGF0ZS5yZWdleC5zb3VyY2Uuc2xpY2UoLTUpID09PSBcIiguKykkXCIpIHtcclxuICAgICAgICAgIHBhdGggPSBwYXRoICsgXCIvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZS5tYXAgPSBtYXA7XHJcblxyXG4gIHZhciBnZW5RdWVyeSA9IFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeVN0cmluZztcclxuXHJcbiAgLy8gZXhwb3J0IGRlZmF1bHQgZm9yIGhvbGRpbmcgdGhlIFZ1ZSByZWZlcmVuY2VcclxuICB2YXIgZXhwb3J0cyQxID0ge307XHJcbiAgLyoqXHJcbiAgICogV2FybiBzdHVmZi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtc2dcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gd2FybiQxKG1zZykge1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzb2x2ZSBhIHJlbGF0aXZlIHBhdGguXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZVxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZVxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXBwZW5kXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiByZXNvbHZlUGF0aChiYXNlLCByZWxhdGl2ZSwgYXBwZW5kKSB7XHJcbiAgICB2YXIgcXVlcnkgPSBiYXNlLm1hdGNoKC8oXFw/LiopJC8pO1xyXG4gICAgaWYgKHF1ZXJ5KSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnlbMV07XHJcbiAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDAsIC1xdWVyeS5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgLy8gYSBxdWVyeSFcclxuICAgIGlmIChyZWxhdGl2ZS5jaGFyQXQoMCkgPT09ICc/Jykge1xyXG4gICAgICByZXR1cm4gYmFzZSArIHJlbGF0aXZlO1xyXG4gICAgfVxyXG4gICAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xyXG4gICAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNlZ21lbnQgaWY6XHJcbiAgICAvLyAtIG5vdCBhcHBlbmRpbmdcclxuICAgIC8vIC0gYXBwZW5kaW5nIHRvIHRyYWlsaW5nIHNsYXNoIChsYXN0IHNlZ21lbnQgaXMgZW1wdHkpXHJcbiAgICBpZiAoIWFwcGVuZCB8fCAhc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0pIHtcclxuICAgICAgc3RhY2sucG9wKCk7XHJcbiAgICB9XHJcbiAgICAvLyByZXNvbHZlIHJlbGF0aXZlIHBhdGhcclxuICAgIHZhciBzZWdtZW50cyA9IHJlbGF0aXZlLnJlcGxhY2UoL15cXC8vLCAnJykuc3BsaXQoJy8nKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcclxuICAgICAgaWYgKHNlZ21lbnQgPT09ICcuJykge1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKHNlZ21lbnQgPT09ICcuLicpIHtcclxuICAgICAgICBzdGFjay5wb3AoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGFjay5wdXNoKHNlZ21lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBlbnN1cmUgbGVhZGluZyBzbGFzaFxyXG4gICAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xyXG4gICAgICBzdGFjay51bnNoaWZ0KCcnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGFjay5qb2luKCcvJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHBcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc1Byb21pc2UocCkge1xyXG4gICAgcmV0dXJuIHAgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpdmUgYSByb3V0ZSBjb25maWcgZmllbGQgZnJvbSBhIGNvbXBvbmVudCBpbnN0YW5jZVxyXG4gICAqIE9SIGEgY29tcG9uZW50IGNvbnRydWN0b3IuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFZ1ZX0gY29tcG9uZW50XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcclxuICAgKiBAcmV0dXJuIHsqfVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsIG5hbWUpIHtcclxuICAgIHZhciBvcHRpb25zID0gY29tcG9uZW50ICYmIChjb21wb25lbnQuJG9wdGlvbnMgfHwgY29tcG9uZW50Lm9wdGlvbnMpO1xyXG4gICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5yb3V0ZSAmJiBvcHRpb25zLnJvdXRlW25hbWVdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzb2x2ZSBhbiBhc3luYyBjb21wb25lbnQgZmFjdG9yeS4gSGF2ZSB0byBkbyBhIGRpcnR5XHJcbiAgICogbW9jayBoZXJlIGJlY2F1c2Ugb2YgVnVlIGNvcmUncyBpbnRlcm5hbCBBUEkgZGVwZW5kcyBvblxyXG4gICAqIGFuIElEIGNoZWNrLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxyXG4gICAqL1xyXG5cclxuICB2YXIgcmVzb2x2ZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBjYikge1xyXG4gICAgaWYgKCFyZXNvbHZlcikge1xyXG4gICAgICByZXNvbHZlciA9IHtcclxuICAgICAgICByZXNvbHZlOiBleHBvcnRzJDEuVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCxcclxuICAgICAgICAkb3B0aW9uczoge1xyXG4gICAgICAgICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICAgICBfOiBoYW5kbGVyLmNvbXBvbmVudFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc29sdmVyLiRvcHRpb25zLmNvbXBvbmVudHMuXyA9IGhhbmRsZXIuY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgcmVzb2x2ZXIucmVzb2x2ZSgnXycsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcclxuICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBDb21wb25lbnQ7XHJcbiAgICAgIGNiKENvbXBvbmVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcCB0aGUgZHluYW1pYyBzZWdtZW50cyBpbiBhIHBhdGggdG8gcGFyYW1zLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG1hcFBhcmFtcyhwYXRoLCBwYXJhbXMsIHF1ZXJ5KSB7XHJcbiAgICBpZiAocGFyYW1zID09PSB1bmRlZmluZWQpIHBhcmFtcyA9IHt9O1xyXG5cclxuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLzooW15cXC9dKykvZywgZnVuY3Rpb24gKF8sIGtleSkge1xyXG4gICAgICB2YXIgdmFsID0gcGFyYW1zW2tleV07XHJcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgIHdhcm4kMSgncGFyYW0gXCInICsga2V5ICsgJ1wiIG5vdCBmb3VuZCB3aGVuIGdlbmVyYXRpbmcgJyArICdwYXRoIGZvciBcIicgKyBwYXRoICsgJ1wiIHdpdGggcGFyYW1zICcgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdmFsIHx8ICcnO1xyXG4gICAgfSk7XHJcbiAgICBpZiAocXVlcnkpIHtcclxuICAgICAgcGF0aCArPSBnZW5RdWVyeShxdWVyeSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aDtcclxuICB9XHJcblxyXG4gIHZhciBoYXNoUkUgPSAvIy4qJC87XHJcblxyXG4gIHZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSFRNTDVIaXN0b3J5KF9yZWYpIHtcclxuICAgICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7XHJcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XHJcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBIVE1MNUhpc3RvcnkpO1xyXG5cclxuICAgICAgaWYgKHJvb3QgJiYgcm9vdCAhPT0gJy8nKSB7XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZXJlJ3MgdGhlIHN0YXJ0aW5nIHNsYXNoXHJcbiAgICAgICAgaWYgKHJvb3QuY2hhckF0KDApICE9PSAnLycpIHtcclxuICAgICAgICAgIHJvb3QgPSAnLycgKyByb290O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcclxuICAgICAgICB0aGlzLnJvb3QgPSByb290LnJlcGxhY2UoL1xcLyQvLCAnJyk7XHJcbiAgICAgICAgdGhpcy5yb290UkUgPSBuZXcgUmVnRXhwKCdeXFxcXCcgKyB0aGlzLnJvb3QpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucm9vdCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xyXG4gICAgICAvLyBjaGVjayBiYXNlIHRhZ1xyXG4gICAgICB2YXIgYmFzZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpO1xyXG4gICAgICB0aGlzLmJhc2UgPSBiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xyXG4gICAgfVxyXG5cclxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaDtcclxuICAgICAgICBpZiAoX3RoaXMucm9vdCkge1xyXG4gICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoX3RoaXMucm9vdFJFLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90aGlzLm9uQ2hhbmdlKHVybCwgZSAmJiBlLnN0YXRlLCBsb2NhdGlvbi5oYXNoKTtcclxuICAgICAgfTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XHJcbiAgICAgIHRoaXMubGlzdGVuZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XHJcbiAgICB9O1xyXG5cclxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcclxuICAgICAgdmFyIHVybCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xyXG4gICAgICBpZiAocmVwbGFjZSkge1xyXG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgdXJsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyByZWNvcmQgc2Nyb2xsIHBvc2l0aW9uIGJ5IHJlcGxhY2luZyBjdXJyZW50IHN0YXRlXHJcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xyXG4gICAgICAgICAgcG9zOiB7XHJcbiAgICAgICAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCxcclxuICAgICAgICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgJycsIGxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIC8vIHRoZW4gcHVzaCBuZXcgc3RhdGVcclxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIHVybCk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGhhc2hNYXRjaCA9IHBhdGgubWF0Y2goaGFzaFJFKTtcclxuICAgICAgdmFyIGhhc2ggPSBoYXNoTWF0Y2ggJiYgaGFzaE1hdGNoWzBdO1xyXG4gICAgICBwYXRoID0gdXJsXHJcbiAgICAgIC8vIHN0cmlwIGhhc2ggc28gaXQgZG9lc24ndCBtZXNzIHVwIHBhcmFtc1xyXG4gICAgICAucmVwbGFjZShoYXNoUkUsICcnKVxyXG4gICAgICAvLyByZW1vdmUgcm9vdCBiZWZvcmUgbWF0Y2hpbmdcclxuICAgICAgLnJlcGxhY2UodGhpcy5yb290UkUsICcnKTtcclxuICAgICAgdGhpcy5vbkNoYW5nZShwYXRoLCBudWxsLCBoYXNoKTtcclxuICAgIH07XHJcblxyXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcclxuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLydcclxuICAgICAgLy8gYWJzb2x1dGUgcGF0aFxyXG4gICAgICA/IHRoaXMucm9vdCA/IHRoaXMucm9vdCArICcvJyArIHBhdGgucmVwbGFjZSgvXlxcLy8sICcnKSA6IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUsIHBhdGgsIGFwcGVuZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBIVE1MNUhpc3Rvcnk7XHJcbiAgfSkoKTtcclxuXHJcbiAgdmFyIEhhc2hIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhhc2hIaXN0b3J5KF9yZWYpIHtcclxuICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcclxuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcclxuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhhc2hIaXN0b3J5KTtcclxuXHJcbiAgICAgIHRoaXMuaGFzaGJhbmcgPSBoYXNoYmFuZztcclxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBsb2NhdGlvbi5oYXNoO1xyXG4gICAgICAgIHZhciByYXcgPSBwYXRoLnJlcGxhY2UoL14jIT8vLCAnJyk7XHJcbiAgICAgICAgLy8gYWx3YXlzXHJcbiAgICAgICAgaWYgKHJhdy5jaGFyQXQoMCkgIT09ICcvJykge1xyXG4gICAgICAgICAgcmF3ID0gJy8nICsgcmF3O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9ybWF0dGVkUGF0aCA9IHNlbGYuZm9ybWF0UGF0aChyYXcpO1xyXG4gICAgICAgIGlmIChmb3JtYXR0ZWRQYXRoICE9PSBwYXRoKSB7XHJcbiAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGZvcm1hdHRlZFBhdGgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkZXRlcm1pbmUgcXVlcnlcclxuICAgICAgICAvLyBub3RlIGl0J3MgcG9zc2libGUgdG8gaGF2ZSBxdWVyaWVzIGluIGJvdGggdGhlIGFjdHVhbCBVUkxcclxuICAgICAgICAvLyBhbmQgdGhlIGhhc2ggZnJhZ21lbnQgaXRzZWxmLlxyXG4gICAgICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaCAmJiBwYXRoLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnICsgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpIDogbG9jYXRpb24uc2VhcmNoO1xyXG4gICAgICAgIHNlbGYub25DaGFuZ2UocGF0aC5yZXBsYWNlKC9eIyE/LywgJycpICsgcXVlcnkpO1xyXG4gICAgICB9O1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xyXG4gICAgICB0aGlzLmxpc3RlbmVyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcclxuICAgIH07XHJcblxyXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XHJcbiAgICAgIHBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcclxuICAgICAgaWYgKHJlcGxhY2UpIHtcclxuICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHBhdGgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvY2F0aW9uLmhhc2ggPSBwYXRoO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcclxuICAgICAgdmFyIGlzQWJzb2xvdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcclxuICAgICAgdmFyIHByZWZpeCA9ICcjJyArICh0aGlzLmhhc2hiYW5nID8gJyEnIDogJycpO1xyXG4gICAgICByZXR1cm4gaXNBYnNvbG91dGUgPyBwcmVmaXggKyBwYXRoIDogcHJlZml4ICsgcmVzb2x2ZVBhdGgobG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIyE/LywgJycpLCBwYXRoLCBhcHBlbmQpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gSGFzaEhpc3Rvcnk7XHJcbiAgfSkoKTtcclxuXHJcbiAgdmFyIEFic3RyYWN0SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBYnN0cmFjdEhpc3RvcnkoX3JlZikge1xyXG4gICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xyXG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJzdHJhY3RIaXN0b3J5KTtcclxuXHJcbiAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcclxuICAgICAgdGhpcy5jdXJyZW50UGF0aCA9ICcvJztcclxuICAgIH1cclxuXHJcbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICAgIHRoaXMub25DaGFuZ2UoJy8nKTtcclxuICAgIH07XHJcblxyXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcclxuICAgICAgLy8gbm9vcFxyXG4gICAgfTtcclxuXHJcbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XHJcbiAgICAgIHBhdGggPSB0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XHJcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCk7XHJcbiAgICB9O1xyXG5cclxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XHJcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aCA6IHJlc29sdmVQYXRoKHRoaXMuY3VycmVudFBhdGgsIHBhdGgsIGFwcGVuZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBBYnN0cmFjdEhpc3Rvcnk7XHJcbiAgfSkoKTtcclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lIHRoZSByZXVzYWJpbGl0eSBvZiBhbiBleGlzdGluZyByb3V0ZXIgdmlldy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gY2FuUmV1c2UodmlldywgaGFuZGxlciwgdHJhbnNpdGlvbikge1xyXG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcclxuICAgIGlmICghY29tcG9uZW50IHx8ICFoYW5kbGVyKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIGltcG9ydGFudDogY2hlY2sgdmlldy5Db21wb25lbnQgaGVyZSBiZWNhdXNlIGl0IG1heVxyXG4gICAgLy8gaGF2ZSBiZWVuIGNoYW5nZWQgaW4gYWN0aXZhdGUgaG9va1xyXG4gICAgaWYgKHZpZXcuQ29tcG9uZW50ICE9PSBoYW5kbGVyLmNvbXBvbmVudCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgY2FuUmV1c2VGbiA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2NhblJldXNlJyk7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNhblJldXNlRm4gPT09ICdib29sZWFuJyA/IGNhblJldXNlRm4gOiBjYW5SZXVzZUZuID8gY2FuUmV1c2VGbi5jYWxsKGNvbXBvbmVudCwge1xyXG4gICAgICB0bzogdHJhbnNpdGlvbi50byxcclxuICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXHJcbiAgICB9KSA6IHRydWU7IC8vIGRlZmF1bHRzIHRvIHRydWVcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBkZWFjdGl2YXRlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGNhbkRlYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgbmV4dCkge1xyXG4gICAgdmFyIGZyb21Db21wb25lbnQgPSB2aWV3LmNoaWxkVk07XHJcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGZyb21Db21wb25lbnQsICdjYW5EZWFjdGl2YXRlJyk7XHJcbiAgICBpZiAoIWhvb2spIHtcclxuICAgICAgbmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBmcm9tQ29tcG9uZW50LCBuZXh0LCB7XHJcbiAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBhY3RpdmF0ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXHJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBjYW5BY3RpdmF0ZShoYW5kbGVyLCB0cmFuc2l0aW9uLCBuZXh0KSB7XHJcbiAgICByZXNvbHZlQXN5bmNDb21wb25lbnQoaGFuZGxlciwgZnVuY3Rpb24gKENvbXBvbmVudCkge1xyXG4gICAgICAvLyBoYXZlIHRvIGNoZWNrIGR1ZSB0byBhc3luYy1uZXNzXHJcbiAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoaXMgY29tcG9uZW50IGNhbiBiZSBhY3RpdmF0ZWRcclxuICAgICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdjYW5BY3RpdmF0ZScpO1xyXG4gICAgICBpZiAoIWhvb2spIHtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XHJcbiAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbCBkZWFjdGl2YXRlIGhvb2tzIGZvciBleGlzdGluZyByb3V0ZXItdmlld3MuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xyXG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XHJcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xyXG4gICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkZWFjdGl2YXRlJyk7XHJcbiAgICBpZiAoIWhvb2spIHtcclxuICAgICAgbmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBuZXh0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFjdGl2YXRlIC8gc3dpdGNoIGNvbXBvbmVudCBmb3IgYSByb3V0ZXItdmlldy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XHJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlcHRoXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IsIHJldXNlKSB7XHJcbiAgICB2YXIgaGFuZGxlciA9IHRyYW5zaXRpb24uYWN0aXZhdGVRdWV1ZVtkZXB0aF07XHJcbiAgICBpZiAoIWhhbmRsZXIpIHtcclxuICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcclxuICAgICAgaWYgKHZpZXcuX2JvdW5kKSB7XHJcbiAgICAgICAgdmlldy5zZXRDb21wb25lbnQobnVsbCk7XHJcbiAgICAgIH1cclxuICAgICAgY2IgJiYgY2IoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBDb21wb25lbnQgPSB2aWV3LkNvbXBvbmVudCA9IGhhbmRsZXIuY29tcG9uZW50O1xyXG4gICAgdmFyIGFjdGl2YXRlSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2FjdGl2YXRlJyk7XHJcbiAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdkYXRhJyk7XHJcbiAgICB2YXIgd2FpdEZvckRhdGEgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICd3YWl0Rm9yRGF0YScpO1xyXG5cclxuICAgIHZpZXcuZGVwdGggPSBkZXB0aDtcclxuICAgIHZpZXcuYWN0aXZhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgdmFyIGNvbXBvbmVudCA9IHVuZGVmaW5lZDtcclxuICAgIHZhciBsb2FkaW5nID0gISEoZGF0YUhvb2sgJiYgIXdhaXRGb3JEYXRhKTtcclxuXHJcbiAgICAvLyBcInJldXNlXCIgaXMgYSBmbGFnIHBhc3NlZCBkb3duIHdoZW4gdGhlIHBhcmVudCB2aWV3IGlzXHJcbiAgICAvLyBlaXRoZXIgcmV1c2VkIHZpYSBrZWVwLWFsaXZlIG9yIGFzIGEgY2hpbGQgb2YgYSBrZXB0LWFsaXZlIHZpZXcuXHJcbiAgICAvLyBvZiBjb3Vyc2Ugd2UgY2FuIG9ubHkgcmV1c2UgaWYgdGhlIGN1cnJlbnQga2VwdC1hbGl2ZSBpbnN0YW5jZVxyXG4gICAgLy8gaXMgb2YgdGhlIGNvcnJlY3QgdHlwZS5cclxuICAgIHJldXNlID0gcmV1c2UgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWTS5jb25zdHJ1Y3RvciA9PT0gQ29tcG9uZW50O1xyXG5cclxuICAgIGlmIChyZXVzZSkge1xyXG4gICAgICAvLyBqdXN0IHJldXNlXHJcbiAgICAgIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcclxuICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XHJcblxyXG4gICAgICAvLyB1bmJ1aWxkIGN1cnJlbnQgY29tcG9uZW50LiB0aGlzIHN0ZXAgYWxzbyBkZXN0cm95c1xyXG4gICAgICAvLyBhbmQgcmVtb3ZlcyBhbGwgbmVzdGVkIGNoaWxkIHZpZXdzLlxyXG4gICAgICB2aWV3LnVuYnVpbGQodHJ1ZSk7XHJcblxyXG4gICAgICAvLyBidWlsZCB0aGUgbmV3IGNvbXBvbmVudC4gdGhpcyB3aWxsIGFsc28gY3JlYXRlIHRoZVxyXG4gICAgICAvLyBkaXJlY3QgY2hpbGQgdmlldyBvZiB0aGUgY3VycmVudCBvbmUuIGl0IHdpbGwgcmVnaXN0ZXJcclxuICAgICAgLy8gaXRzZWxmIGFzIHZpZXcuY2hpbGRWaWV3LlxyXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmJ1aWxkKHtcclxuICAgICAgICBfbWV0YToge1xyXG4gICAgICAgICAgJGxvYWRpbmdSb3V0ZURhdGE6IGxvYWRpbmdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XHJcbiAgICAgICAgICB0aGlzLl9yb3V0ZXJWaWV3ID0gdmlldztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gaGFuZGxlIGtlZXAtYWxpdmUuXHJcbiAgICAgIC8vIHdoZW4gYSBrZXB0LWFsaXZlIGNoaWxkIHZtIGlzIHJlc3RvcmVkLCB3ZSBuZWVkIHRvXHJcbiAgICAgIC8vIGFkZCBpdHMgY2FjaGVkIGNoaWxkIHZpZXdzIGludG8gdGhlIHJvdXRlcidzIHZpZXcgbGlzdCxcclxuICAgICAgLy8gYW5kIGFsc28gcHJvcGVybHkgdXBkYXRlIGN1cnJlbnQgdmlldydzIGNoaWxkIHZpZXcuXHJcbiAgICAgIGlmICh2aWV3LmtlZXBBbGl2ZSkge1xyXG4gICAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XHJcbiAgICAgICAgdmFyIGNhY2hlZENoaWxkVmlldyA9IGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldztcclxuICAgICAgICBpZiAoY2FjaGVkQ2hpbGRWaWV3KSB7XHJcbiAgICAgICAgICB2aWV3LmNoaWxkVmlldyA9IGNhY2hlZENoaWxkVmlldztcclxuICAgICAgICAgIGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2xlYW51cCB0aGUgY29tcG9uZW50IGluIGNhc2UgdGhlIHRyYW5zaXRpb24gaXMgYWJvcnRlZFxyXG4gICAgLy8gYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgZXZlciBpbnNlcnRlZC5cclxuICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cCgpIHtcclxuICAgICAgY29tcG9uZW50LiRkZXN0cm95KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGFjdHVhbGx5IGluc2VydCB0aGUgY29tcG9uZW50IGFuZCB0cmlnZ2VyIHRyYW5zaXRpb25cclxuICAgIHZhciBpbnNlcnQgPSBmdW5jdGlvbiBpbnNlcnQoKSB7XHJcbiAgICAgIGlmIChyZXVzZSkge1xyXG4gICAgICAgIGNiICYmIGNiKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlcjtcclxuICAgICAgaWYgKHJvdXRlci5fcmVuZGVyZWQgfHwgcm91dGVyLl90cmFuc2l0aW9uT25Mb2FkKSB7XHJcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKGNvbXBvbmVudCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gbm8gdHJhbnNpdGlvbiBvbiBmaXJzdCByZW5kZXIsIG1hbnVhbCB0cmFuc2l0aW9uXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKHZpZXcuc2V0Q3VycmVudCkge1xyXG4gICAgICAgICAgLy8gMC4xMiBjb21wYXRcclxuICAgICAgICAgIHZpZXcuc2V0Q3VycmVudChjb21wb25lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyAxLjBcclxuICAgICAgICAgIHZpZXcuY2hpbGRWTSA9IGNvbXBvbmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29tcG9uZW50LiRiZWZvcmUodmlldy5hbmNob3IsIG51bGwsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBjYiAmJiBjYigpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYWZ0ZXJEYXRhID0gZnVuY3Rpb24gYWZ0ZXJEYXRhKCkge1xyXG4gICAgICAvLyBhY3RpdmF0ZSB0aGUgY2hpbGQgdmlld1xyXG4gICAgICBpZiAodmlldy5jaGlsZFZpZXcpIHtcclxuICAgICAgICBhY3RpdmF0ZSh2aWV3LmNoaWxkVmlldywgdHJhbnNpdGlvbiwgZGVwdGggKyAxLCBudWxsLCByZXVzZSB8fCB2aWV3LmtlZXBBbGl2ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaW5zZXJ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhbGxlZCBhZnRlciBhY3RpdmF0aW9uIGhvb2sgaXMgcmVzb2x2ZWRcclxuICAgIHZhciBhZnRlckFjdGl2YXRlID0gZnVuY3Rpb24gYWZ0ZXJBY3RpdmF0ZSgpIHtcclxuICAgICAgdmlldy5hY3RpdmF0ZWQgPSB0cnVlO1xyXG4gICAgICBpZiAoZGF0YUhvb2sgJiYgd2FpdEZvckRhdGEpIHtcclxuICAgICAgICAvLyB3YWl0IHVudGlsIGRhdGEgbG9hZGVkIHRvIGluc2VydFxyXG4gICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2ssIGFmdGVyRGF0YSwgY2xlYW51cCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gbG9hZCBkYXRhIGFuZCBpbnNlcnQgYXQgdGhlIHNhbWUgdGltZVxyXG4gICAgICAgIGlmIChkYXRhSG9vaykge1xyXG4gICAgICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFmdGVyRGF0YSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChhY3RpdmF0ZUhvb2spIHtcclxuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoYWN0aXZhdGVIb29rLCBjb21wb25lbnQsIGFmdGVyQWN0aXZhdGUsIHtcclxuICAgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxyXG4gICAgICAgIHBvc3RBY3RpdmF0ZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFmdGVyQWN0aXZhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldXNlIGEgdmlldywganVzdCByZWxvYWQgZGF0YSBpZiBuZWNlc3NhcnkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xyXG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiByZXVzZSh2aWV3LCB0cmFuc2l0aW9uKSB7XHJcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xyXG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGF0YScpO1xyXG4gICAgaWYgKGRhdGFIb29rKSB7XHJcbiAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2spO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXN5bmNocm9ub3VzbHkgbG9hZCBhbmQgYXBwbHkgZGF0YSB0byBjb21wb25lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1Z1ZX0gY29tcG9uZW50XHJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xlYW51cFxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGhvb2ssIGNiLCBjbGVhbnVwKSB7XHJcbiAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSB0cnVlO1xyXG4gICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGZhbHNlO1xyXG4gICAgICBjb21wb25lbnQuJGVtaXQoJ3JvdXRlLWRhdGEtbG9hZGVkJywgY29tcG9uZW50KTtcclxuICAgICAgY2IgJiYgY2IoKTtcclxuICAgIH0sIHtcclxuICAgICAgY2xlYW51cDogY2xlYW51cCxcclxuICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlLFxyXG4gICAgICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xyXG4gICAgICAgIC8vIGhhbmRsZSBwcm9taXNlIHN1Z2FyIHN5bnRheFxyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRhdGEpKSB7XHJcbiAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFba2V5XTtcclxuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZSh2YWwpKSB7XHJcbiAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh2YWwudGhlbihmdW5jdGlvbiAocmVzb2x2ZWRWYWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgcmVzb2x2ZWRWYWwpO1xyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb21wb25lbnQuJHNldChrZXksIHZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvbWlzZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICByZXR1cm4gcHJvbWlzZXNbMF0uY29uc3RydWN0b3IuYWxsKHByb21pc2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZSB0aGUgY2hpbGQgdmlldyBmb3IgYSBrZXB0LWFsaXZlIHZpZXcgc28gdGhhdFxyXG4gICAqIHdlIGNhbiByZXN0b3JlIGl0IHdoZW4gaXQgaXMgc3dpdGNoZWQgYmFjayB0by5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVDaGlsZFZpZXcodmlldykge1xyXG4gICAgaWYgKHZpZXcua2VlcEFsaXZlICYmIHZpZXcuY2hpbGRWTSAmJiB2aWV3LmNoaWxkVmlldykge1xyXG4gICAgICB2aWV3LmNoaWxkVk0uX2tlZXBBbGl2ZVJvdXRlclZpZXcgPSB2aWV3LmNoaWxkVmlldztcclxuICAgIH1cclxuICAgIHZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIHBsYWluIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Kn0gdmFsXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBSb3V0ZVRyYW5zaXRpb24gb2JqZWN0IG1hbmFnZXMgdGhlIHBpcGVsaW5lIG9mIGFcclxuICAgKiByb3V0ZXItdmlldyBzd2l0Y2hpbmcgcHJvY2Vzcy4gVGhpcyBpcyBhbHNvIHRoZSBvYmplY3RcclxuICAgKiBwYXNzZWQgaW50byB1c2VyIHJvdXRlIGhvb2tzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlclxyXG4gICAqIEBwYXJhbSB7Um91dGV9IHRvXHJcbiAgICogQHBhcmFtIHtSb3V0ZX0gZnJvbVxyXG4gICAqL1xyXG5cclxuICB2YXIgUm91dGVUcmFuc2l0aW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJvdXRlVHJhbnNpdGlvbihyb3V0ZXIsIHRvLCBmcm9tKSB7XHJcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZVRyYW5zaXRpb24pO1xyXG5cclxuICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XHJcbiAgICAgIHRoaXMudG8gPSB0bztcclxuICAgICAgdGhpcy5mcm9tID0gZnJvbTtcclxuICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcclxuICAgICAgdGhpcy5hYm9ydGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZXR1cm4gdG8gcHJldmlvdXMgbG9jYXRpb24uXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XHJcbiAgICAgIGlmICghdGhpcy5hYm9ydGVkKSB7XHJcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcclxuICAgICAgICAvLyBpZiB0aGUgcm9vdCBwYXRoIHRocm93cyBhbiBlcnJvciBkdXJpbmcgdmFsaWRhdGlvblxyXG4gICAgICAgIC8vIG9uIGluaXRpYWwgbG9hZCwgaXQgZ2V0cyBjYXVnaHQgaW4gYW4gaW5maW5pdGUgbG9vcC5cclxuICAgICAgICB2YXIgYWJvcnRpbmdPbkxvYWQgPSAhdGhpcy5mcm9tLnBhdGggJiYgdGhpcy50by5wYXRoID09PSAnLyc7XHJcbiAgICAgICAgaWYgKCFhYm9ydGluZ09uTG9hZCkge1xyXG4gICAgICAgICAgdGhpcy5yb3V0ZXIucmVwbGFjZSh0aGlzLmZyb20ucGF0aCB8fCAnLycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFib3J0IGN1cnJlbnQgdHJhbnNpdGlvbiBhbmQgcmVkaXJlY3QgdG8gYSBuZXcgbG9jYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICAgICAqL1xyXG5cclxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3QgPSBmdW5jdGlvbiByZWRpcmVjdChwYXRoKSB7XHJcbiAgICAgIGlmICghdGhpcy5hYm9ydGVkKSB7XHJcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICBwYXRoID0gbWFwUGFyYW1zKHBhdGgsIHRoaXMudG8ucGFyYW1zLCB0aGlzLnRvLnF1ZXJ5KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGF0aC5wYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB0aGlzLnRvLnBhcmFtcztcclxuICAgICAgICAgIHBhdGgucXVlcnkgPSBwYXRoLnF1ZXJ5IHx8IHRoaXMudG8ucXVlcnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UocGF0aCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHJvdXRlciB2aWV3IHRyYW5zaXRpb24ncyBwaXBlbGluZSBjYW4gYmUgZGVzY3JpYmVkIGFzXHJcbiAgICAgKiBmb2xsb3dzLCBhc3N1bWluZyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIGFuIGV4aXN0aW5nXHJcbiAgICAgKiA8cm91dGVyLXZpZXc+IGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IEJdIHRvIGEgbmV3XHJcbiAgICAgKiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBDXTpcclxuICAgICAqXHJcbiAgICAgKiAgQSAgICBBXHJcbiAgICAgKiAgfCA9PiB8XHJcbiAgICAgKiAgQiAgICBDXHJcbiAgICAgKlxyXG4gICAgICogMS4gUmV1c2FibGl0eSBwaGFzZTpcclxuICAgICAqICAgLT4gY2FuUmV1c2UoQSwgQSlcclxuICAgICAqICAgLT4gY2FuUmV1c2UoQiwgQylcclxuICAgICAqICAgLT4gZGV0ZXJtaW5lIG5ldyBxdWV1ZXM6XHJcbiAgICAgKiAgICAgIC0gZGVhY3RpdmF0aW9uOiBbQl1cclxuICAgICAqICAgICAgLSBhY3RpdmF0aW9uOiBbQ11cclxuICAgICAqXHJcbiAgICAgKiAyLiBWYWxpZGF0aW9uIHBoYXNlOlxyXG4gICAgICogICAtPiBjYW5EZWFjdGl2YXRlKEIpXHJcbiAgICAgKiAgIC0+IGNhbkFjdGl2YXRlKEMpXHJcbiAgICAgKlxyXG4gICAgICogMy4gQWN0aXZhdGlvbiBwaGFzZTpcclxuICAgICAqICAgLT4gZGVhY3RpdmF0ZShCKVxyXG4gICAgICogICAtPiBhY3RpdmF0ZShDKVxyXG4gICAgICpcclxuICAgICAqIEVhY2ggb2YgdGhlc2Ugc3RlcHMgY2FuIGJlIGFzeW5jaHJvbm91cywgYW5kIGFueVxyXG4gICAgICogc3RlcCBjYW4gcG90ZW50aWFsbHkgYWJvcnQgdGhlIHRyYW5zaXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcclxuICAgICAqL1xyXG5cclxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChjYikge1xyXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XHJcblxyXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHZpZXdzIHRvIGRlYWN0aXZhdGVcclxuICAgICAgdmFyIGRlYWN0aXZhdGVRdWV1ZSA9IFtdO1xyXG4gICAgICB2YXIgdmlldyA9IHRoaXMucm91dGVyLl9yb290VmlldztcclxuICAgICAgd2hpbGUgKHZpZXcpIHtcclxuICAgICAgICBkZWFjdGl2YXRlUXVldWUudW5zaGlmdCh2aWV3KTtcclxuICAgICAgICB2aWV3ID0gdmlldy5jaGlsZFZpZXc7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHJldmVyc2VEZWFjdGl2YXRlUXVldWUgPSBkZWFjdGl2YXRlUXVldWUuc2xpY2UoKS5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHJvdXRlIGhhbmRsZXJzIHRvIGFjdGl2YXRlXHJcbiAgICAgIHZhciBhY3RpdmF0ZVF1ZXVlID0gdGhpcy5hY3RpdmF0ZVF1ZXVlID0gdG9BcnJheSh0aGlzLnRvLm1hdGNoZWQpLm1hcChmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2guaGFuZGxlcjtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyAxLiBSZXVzYWJpbGl0eSBwaGFzZVxyXG4gICAgICB2YXIgaSA9IHVuZGVmaW5lZCxcclxuICAgICAgICAgIHJldXNlUXVldWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCFjYW5SZXVzZShyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlW2ldLCBhY3RpdmF0ZVF1ZXVlW2ldLCB0cmFuc2l0aW9uKSkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgIHJldXNlUXVldWUgPSByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKDAsIGkpO1xyXG4gICAgICAgIGRlYWN0aXZhdGVRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoaSkucmV2ZXJzZSgpO1xyXG4gICAgICAgIGFjdGl2YXRlUXVldWUgPSBhY3RpdmF0ZVF1ZXVlLnNsaWNlKGkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyAyLiBWYWxpZGF0aW9uIHBoYXNlXHJcbiAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoZGVhY3RpdmF0ZVF1ZXVlLCBjYW5EZWFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShhY3RpdmF0ZVF1ZXVlLCBjYW5BY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gMy4gQWN0aXZhdGlvbiBwaGFzZVxyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHJvdXRlciBjdXJyZW50IHJvdXRlXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24ucm91dGVyLl9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHJldXNlIGZvciBhbGwgcmV1c2VkIHZpZXdzXHJcbiAgICAgICAgICAgIHJldXNlUXVldWUgJiYgcmV1c2VRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoZSByb290IG9mIHRoZSBjaGFpbiB0aGF0IG5lZWRzIHRvIGJlIHJlcGxhY2VkXHJcbiAgICAgICAgICAgIC8vIGlzIHRoZSB0b3AtbW9zdCBub24tcmV1c2FibGUgdmlldy5cclxuICAgICAgICAgICAgaWYgKGRlYWN0aXZhdGVRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICB2YXIgX3ZpZXcgPSBkZWFjdGl2YXRlUXVldWVbZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgIHZhciBkZXB0aCA9IHJldXNlUXVldWUgPyByZXVzZVF1ZXVlLmxlbmd0aCA6IDA7XHJcbiAgICAgICAgICAgICAgYWN0aXZhdGUoX3ZpZXcsIHRyYW5zaXRpb24sIGRlcHRoLCBjYik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jaHJvbm91c2x5IGFuZCBzZXF1ZW50aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiB0byBhXHJcbiAgICAgKiBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnJ1blF1ZXVlID0gZnVuY3Rpb24gcnVuUXVldWUocXVldWUsIGZuLCBjYikge1xyXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XHJcbiAgICAgIHN0ZXAoMCk7XHJcbiAgICAgIGZ1bmN0aW9uIHN0ZXAoaW5kZXgpIHtcclxuICAgICAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjYigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmbihxdWV1ZVtpbmRleF0sIHRyYW5zaXRpb24sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc3RlcChpbmRleCArIDEpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbCBhIHVzZXIgcHJvdmlkZWQgcm91dGUgdHJhbnNpdGlvbiBob29rIGFuZCBoYW5kbGVcclxuICAgICAqIHRoZSByZXNwb25zZSAoZS5nLiBpZiB0aGUgdXNlciByZXR1cm5zIGEgcHJvbWlzZSkuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlIHVzZXIgbmVpdGhlciBleHBlY3RzIGFuIGFyZ3VtZW50IG5vciByZXR1cm5zIGFcclxuICAgICAqIHByb21pc2UsIHRoZSBob29rIGlzIGFzc3VtZWQgdG8gYmUgc3luY2hyb25vdXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xyXG4gICAgICogQHBhcmFtIHsqfSBbY29udGV4dF1cclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBleHBlY3RCb29sZWFuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gcG9zdEFjdGl2ZVxyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBwcm9jZXNzRGF0YVxyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBjbGVhbnVwXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgY29udGV4dCwgY2IpIHtcclxuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcclxuXHJcbiAgICAgIHZhciBfcmVmJGV4cGVjdEJvb2xlYW4gPSBfcmVmLmV4cGVjdEJvb2xlYW47XHJcbiAgICAgIHZhciBleHBlY3RCb29sZWFuID0gX3JlZiRleHBlY3RCb29sZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkZXhwZWN0Qm9vbGVhbjtcclxuICAgICAgdmFyIF9yZWYkcG9zdEFjdGl2YXRlID0gX3JlZi5wb3N0QWN0aXZhdGU7XHJcbiAgICAgIHZhciBwb3N0QWN0aXZhdGUgPSBfcmVmJHBvc3RBY3RpdmF0ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHBvc3RBY3RpdmF0ZTtcclxuICAgICAgdmFyIHByb2Nlc3NEYXRhID0gX3JlZi5wcm9jZXNzRGF0YTtcclxuICAgICAgdmFyIGNsZWFudXAgPSBfcmVmLmNsZWFudXA7XHJcblxyXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XHJcbiAgICAgIHZhciBuZXh0Q2FsbGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBhYm9ydCB0aGUgdHJhbnNpdGlvblxyXG4gICAgICB2YXIgYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcclxuICAgICAgICBjbGVhbnVwICYmIGNsZWFudXAoKTtcclxuICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBoYW5kbGUgZXJyb3JzXHJcbiAgICAgIHZhciBvbkVycm9yID0gZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcclxuICAgICAgICBwb3N0QWN0aXZhdGUgPyBuZXh0KCkgOiBhYm9ydCgpO1xyXG4gICAgICAgIGlmIChlcnIgJiYgIXRyYW5zaXRpb24ucm91dGVyLl9zdXBwcmVzcykge1xyXG4gICAgICAgICAgd2FybiQxKCdVbmNhdWdodCBlcnJvciBkdXJpbmcgdHJhbnNpdGlvbjogJyk7XHJcbiAgICAgICAgICB0aHJvdyBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIHNpbmNlIHByb21pc2Ugc3dhbGxvd3MgZXJyb3JzLCB3ZSBoYXZlIHRvXHJcbiAgICAgIC8vIHRocm93IGl0IGluIHRoZSBuZXh0IHRpY2suLi5cclxuICAgICAgdmFyIG9uUHJvbWlzZUVycm9yID0gZnVuY3Rpb24gb25Qcm9taXNlRXJyb3IoZXJyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIG9uRXJyb3IoZXJyKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIGFkdmFuY2UgdGhlIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxyXG4gICAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgaWYgKG5leHRDYWxsZWQpIHtcclxuICAgICAgICAgIHdhcm4kMSgndHJhbnNpdGlvbi5uZXh0KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5leHRDYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcclxuICAgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYiAmJiBjYigpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdmFyIG5leHRXaXRoQm9vbGVhbiA9IGZ1bmN0aW9uIG5leHRXaXRoQm9vbGVhbihyZXMpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICByZXMgPyBuZXh0KCkgOiBhYm9ydCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcclxuICAgICAgICAgIHJlcy50aGVuKGZ1bmN0aW9uIChvaykge1xyXG4gICAgICAgICAgICBvayA/IG5leHQoKSA6IGFib3J0KCk7XHJcbiAgICAgICAgICB9LCBvblByb21pc2VFcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcclxuICAgICAgICAgIG5leHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgbmV4dFdpdGhEYXRhID0gZnVuY3Rpb24gbmV4dFdpdGhEYXRhKGRhdGEpIHtcclxuICAgICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICByZXMgPSBwcm9jZXNzRGF0YShkYXRhKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzKSkge1xyXG4gICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gZXhwb3NlIGEgY2xvbmUgb2YgdGhlIHRyYW5zaXRpb24gb2JqZWN0LCBzbyB0aGF0IGVhY2hcclxuICAgICAgLy8gaG9vayBnZXRzIGEgY2xlYW4gY29weSBhbmQgcHJldmVudCB0aGUgdXNlciBmcm9tXHJcbiAgICAgIC8vIG1lc3Npbmcgd2l0aCB0aGUgaW50ZXJuYWxzLlxyXG4gICAgICB2YXIgZXhwb3NlZCA9IHtcclxuICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcclxuICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb20sXHJcbiAgICAgICAgYWJvcnQ6IGFib3J0LFxyXG4gICAgICAgIG5leHQ6IHByb2Nlc3NEYXRhID8gbmV4dFdpdGhEYXRhIDogbmV4dCxcclxuICAgICAgICByZWRpcmVjdDogZnVuY3Rpb24gcmVkaXJlY3QoKSB7XHJcbiAgICAgICAgICB0cmFuc2l0aW9uLnJlZGlyZWN0LmFwcGx5KHRyYW5zaXRpb24sIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gYWN0dWFsbHkgY2FsbCB0aGUgaG9va1xyXG4gICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJlcyA9IGhvb2suY2FsbChjb250ZXh0LCBleHBvc2VkKTtcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGV4cGVjdEJvb2xlYW4pIHtcclxuICAgICAgICAvLyBib29sZWFuIGhvb2tzXHJcbiAgICAgICAgbmV4dFdpdGhCb29sZWFuKHJlcyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcclxuICAgICAgICAvLyBwcm9taXNlXHJcbiAgICAgICAgaWYgKHByb2Nlc3NEYXRhKSB7XHJcbiAgICAgICAgICByZXMudGhlbihuZXh0V2l0aERhdGEsIG9uUHJvbWlzZUVycm9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzRGF0YSAmJiBpc1BsYWluT2piZWN0KHJlcykpIHtcclxuICAgICAgICAvLyBkYXRhIHByb21pc2Ugc3VnYXJcclxuICAgICAgICBuZXh0V2l0aERhdGEocmVzKTtcclxuICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsIGEgc2luZ2xlIGhvb2sgb3IgYW4gYXJyYXkgb2YgYXN5bmMgaG9va3MgaW4gc2VyaWVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXHJcbiAgICAgKiBAcGFyYW0geyp9IGNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rcyA9IGZ1bmN0aW9uIGNhbGxIb29rcyhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGhvb2tzKSkge1xyXG4gICAgICAgIHRoaXMucnVuUXVldWUoaG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XHJcbiAgICAgICAgICBpZiAoIV90aGlzLmFib3J0ZWQpIHtcclxuICAgICAgICAgICAgX3RoaXMuY2FsbEhvb2soaG9vaywgY29udGV4dCwgbmV4dCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgY2IpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY2FsbEhvb2soaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gUm91dGVUcmFuc2l0aW9uO1xyXG4gIH0pKCk7XHJcblxyXG4gIGZ1bmN0aW9uIGlzUGxhaW5PamJlY3QodmFsKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdG9BcnJheSh2YWwpIHtcclxuICAgIHJldHVybiB2YWwgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh2YWwpIDogW107XHJcbiAgfVxyXG5cclxuICB2YXIgaW50ZXJuYWxLZXlzUkUgPSAvXihjb21wb25lbnR8c3ViUm91dGVzfGZ1bGxQYXRoKSQvO1xyXG5cclxuICAvKipcclxuICAgKiBSb3V0ZSBDb250ZXh0IE9iamVjdFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXHJcbiAgICovXHJcblxyXG4gIHZhciBSb3V0ZSA9IGZ1bmN0aW9uIFJvdXRlKHBhdGgsIHJvdXRlcikge1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGUpO1xyXG5cclxuICAgIHZhciBtYXRjaGVkID0gcm91dGVyLl9yZWNvZ25pemVyLnJlY29nbml6ZShwYXRoKTtcclxuICAgIGlmIChtYXRjaGVkKSB7XHJcbiAgICAgIC8vIGNvcHkgYWxsIGN1c3RvbSBmaWVsZHMgZnJvbSByb3V0ZSBjb25maWdzXHJcbiAgICAgIFtdLmZvckVhY2guY2FsbChtYXRjaGVkLCBmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWF0Y2guaGFuZGxlcikge1xyXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbEtleXNSRS50ZXN0KGtleSkpIHtcclxuICAgICAgICAgICAgX3RoaXNba2V5XSA9IG1hdGNoLmhhbmRsZXJba2V5XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBzZXQgcXVlcnkgYW5kIHBhcmFtc1xyXG4gICAgICB0aGlzLnF1ZXJ5ID0gbWF0Y2hlZC5xdWVyeVBhcmFtcztcclxuICAgICAgdGhpcy5wYXJhbXMgPSBbXS5yZWR1Y2UuY2FsbChtYXRjaGVkLCBmdW5jdGlvbiAocHJldiwgY3VyKSB7XHJcbiAgICAgICAgaWYgKGN1ci5wYXJhbXMpIHtcclxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjdXIucGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHByZXZba2V5XSA9IGN1ci5wYXJhbXNba2V5XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgIH0sIHt9KTtcclxuICAgIH1cclxuICAgIC8vIGV4cG9zZSBwYXRoIGFuZCByb3V0ZXJcclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAvLyBmb3IgaW50ZXJuYWwgdXNlXHJcbiAgICB0aGlzLm1hdGNoZWQgPSBtYXRjaGVkIHx8IHJvdXRlci5fbm90Rm91bmRIYW5kbGVyO1xyXG4gICAgLy8gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIHJvdXRlclxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyb3V0ZXInLCB7XHJcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICB2YWx1ZTogcm91dGVyXHJcbiAgICB9KTtcclxuICAgIC8vIEltcG9ydGFudDogZnJlZXplIHNlbGYgdG8gcHJldmVudCBvYnNlcnZhdGlvblxyXG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBhcHBseU92ZXJyaWRlIChWdWUpIHtcclxuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcclxuICAgIHZhciBleHRlbmQgPSBfVnVlJHV0aWwuZXh0ZW5kO1xyXG4gICAgdmFyIGlzQXJyYXkgPSBfVnVlJHV0aWwuaXNBcnJheTtcclxuICAgIHZhciBkZWZpbmVSZWFjdGl2ZSA9IF9WdWUkdXRpbC5kZWZpbmVSZWFjdGl2ZTtcclxuXHJcbiAgICAvLyBvdmVycmlkZSBWdWUncyBpbml0IGFuZCBkZXN0cm95IHByb2Nlc3MgdG8ga2VlcCB0cmFjayBvZiByb3V0ZXIgaW5zdGFuY2VzXHJcbiAgICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XHJcbiAgICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgIHZhciByb290ID0gb3B0aW9ucy5fcGFyZW50IHx8IG9wdGlvbnMucGFyZW50IHx8IHRoaXM7XHJcbiAgICAgIHZhciByb3V0ZXIgPSByb290LiRyb3V0ZXI7XHJcbiAgICAgIHZhciByb3V0ZSA9IHJvb3QuJHJvdXRlO1xyXG4gICAgICBpZiAocm91dGVyKSB7XHJcbiAgICAgICAgLy8gZXhwb3NlIHJvdXRlclxyXG4gICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcclxuICAgICAgICByb3V0ZXIuX2NoaWxkcmVuLnB1c2godGhpcyk7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKHRoaXMuX2RlZmluZU1ldGEpIHtcclxuICAgICAgICAgIC8vIDAuMTJcclxuICAgICAgICAgIHRoaXMuX2RlZmluZU1ldGEoJyRyb3V0ZScsIHJvdXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gMS4wXHJcbiAgICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCAnJHJvdXRlJywgcm91dGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkZXN0cm95ID0gVnVlLnByb3RvdHlwZS5fZGVzdHJveTtcclxuICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICghdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCAmJiB0aGlzLiRyb3V0ZXIpIHtcclxuICAgICAgICB0aGlzLiRyb3V0ZXIuX2NoaWxkcmVuLiRyZW1vdmUodGhpcyk7XHJcbiAgICAgIH1cclxuICAgICAgZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAxLjAgb25seTogZW5hYmxlIHJvdXRlIG1peGluc1xyXG4gICAgdmFyIHN0cmF0cyA9IFZ1ZS5jb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO1xyXG4gICAgdmFyIGhvb2tzVG9NZXJnZVJFID0gL14oZGF0YXxhY3RpdmF0ZXxkZWFjdGl2YXRlKSQvO1xyXG5cclxuICAgIGlmIChzdHJhdHMpIHtcclxuICAgICAgc3RyYXRzLnJvdXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcclxuICAgICAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xyXG4gICAgICAgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XHJcbiAgICAgICAgdmFyIHJldCA9IHt9O1xyXG4gICAgICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XHJcbiAgICAgICAgICB2YXIgYSA9IHJldFtrZXldO1xyXG4gICAgICAgICAgdmFyIGIgPSBjaGlsZFZhbFtrZXldO1xyXG4gICAgICAgICAgLy8gZm9yIGRhdGEsIGFjdGl2YXRlIGFuZCBkZWFjdGl2YXRlLCB3ZSBuZWVkIHRvIG1lcmdlIHRoZW0gaW50b1xyXG4gICAgICAgICAgLy8gYXJyYXlzIHNpbWlsYXIgdG8gbGlmZWN5Y2xlIGhvb2tzLlxyXG4gICAgICAgICAgaWYgKGEgJiYgaG9va3NUb01lcmdlUkUudGVzdChrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldFtrZXldID0gKGlzQXJyYXkoYSkgPyBhIDogW2FdKS5jb25jYXQoYik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXRba2V5XSA9IGI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBWaWV3IChWdWUpIHtcclxuXHJcbiAgICB2YXIgXyA9IFZ1ZS51dGlsO1xyXG4gICAgdmFyIGNvbXBvbmVudERlZiA9XHJcbiAgICAvLyAwLjEyXHJcbiAgICBWdWUuZGlyZWN0aXZlKCdfY29tcG9uZW50JykgfHxcclxuICAgIC8vIDEuMFxyXG4gICAgVnVlLmludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQ7XHJcbiAgICAvLyA8cm91dGVyLXZpZXc+IGV4dGVuZHMgdGhlIGludGVybmFsIGNvbXBvbmVudCBkaXJlY3RpdmVcclxuICAgIHZhciB2aWV3RGVmID0gXy5leHRlbmQoe30sIGNvbXBvbmVudERlZik7XHJcblxyXG4gICAgLy8gd2l0aCBzb21lIG92ZXJyaWRlc1xyXG4gICAgXy5leHRlbmQodmlld0RlZiwge1xyXG5cclxuICAgICAgX2lzUm91dGVyVmlldzogdHJ1ZSxcclxuXHJcbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgICAgdmFyIHJvdXRlID0gdGhpcy52bS4kcm91dGU7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKCFyb3V0ZSkge1xyXG4gICAgICAgICAgd2FybiQxKCc8cm91dGVyLXZpZXc+IGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGEgJyArICdyb3V0ZXItZW5hYmxlZCBhcHAuJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZvcmNlIGR5bmFtaWMgZGlyZWN0aXZlIHNvIHYtY29tcG9uZW50IGRvZXNuJ3RcclxuICAgICAgICAvLyBhdHRlbXB0IHRvIGJ1aWxkIHJpZ2h0IG5vd1xyXG4gICAgICAgIHRoaXMuX2lzRHluYW1pY0xpdGVyYWwgPSB0cnVlO1xyXG4gICAgICAgIC8vIGZpbmFsbHksIGluaXQgYnkgZGVsZWdhdGluZyB0byB2LWNvbXBvbmVudFxyXG4gICAgICAgIGNvbXBvbmVudERlZi5iaW5kLmNhbGwodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIGxvY2F0ZSB0aGUgcGFyZW50IHZpZXdcclxuICAgICAgICB2YXIgcGFyZW50VmlldyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy52bTtcclxuICAgICAgICB3aGlsZSAocGFyZW50KSB7XHJcbiAgICAgICAgICBpZiAocGFyZW50Ll9yb3V0ZXJWaWV3KSB7XHJcbiAgICAgICAgICAgIHBhcmVudFZpZXcgPSBwYXJlbnQuX3JvdXRlclZpZXc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXJlbnRWaWV3KSB7XHJcbiAgICAgICAgICAvLyByZWdpc3RlciBzZWxmIGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVudCB2aWV3LFxyXG4gICAgICAgICAgLy8gaW5zdGVhZCBvZiBhY3RpdmF0aW5nIG5vdy4gVGhpcyBpcyBzbyB0aGF0IHRoZVxyXG4gICAgICAgICAgLy8gY2hpbGQncyBhY3RpdmF0ZSBob29rIGlzIGNhbGxlZCBhZnRlciB0aGVcclxuICAgICAgICAgIC8vIHBhcmVudCdzIGhhcyByZXNvbHZlZC5cclxuICAgICAgICAgIHRoaXMucGFyZW50VmlldyA9IHBhcmVudFZpZXc7XHJcbiAgICAgICAgICBwYXJlbnRWaWV3LmNoaWxkVmlldyA9IHRoaXM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIHJvb3QgdmlldyFcclxuICAgICAgICAgIHZhciByb3V0ZXIgPSByb3V0ZS5yb3V0ZXI7XHJcbiAgICAgICAgICByb3V0ZXIuX3Jvb3RWaWV3ID0gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGhhbmRsZSBsYXRlLXJlbmRlcmVkIHZpZXdcclxuICAgICAgICAvLyB0d28gcG9zc2liaWxpdGllczpcclxuICAgICAgICAvLyAxLiByb290IHZpZXcgcmVuZGVyZWQgYWZ0ZXIgdHJhbnNpdGlvbiBoYXMgYmVlblxyXG4gICAgICAgIC8vICAgIHZhbGlkYXRlZDtcclxuICAgICAgICAvLyAyLiBjaGlsZCB2aWV3IHJlbmRlcmVkIGFmdGVyIHBhcmVudCB2aWV3IGhhcyBiZWVuXHJcbiAgICAgICAgLy8gICAgYWN0aXZhdGVkLlxyXG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gcm91dGUucm91dGVyLl9jdXJyZW50VHJhbnNpdGlvbjtcclxuICAgICAgICBpZiAoIXBhcmVudFZpZXcgJiYgdHJhbnNpdGlvbi5kb25lIHx8IHBhcmVudFZpZXcgJiYgcGFyZW50Vmlldy5hY3RpdmF0ZWQpIHtcclxuICAgICAgICAgIHZhciBkZXB0aCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LmRlcHRoICsgMSA6IDA7XHJcbiAgICAgICAgICBhY3RpdmF0ZSh0aGlzLCB0cmFuc2l0aW9uLCBkZXB0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Vmlldykge1xyXG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3LmNoaWxkVmlldyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbXBvbmVudERlZi51bmJpbmQuY2FsbCh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgVnVlLmVsZW1lbnREaXJlY3RpdmUoJ3JvdXRlci12aWV3Jywgdmlld0RlZik7XHJcbiAgfVxyXG5cclxuICB2YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLyQvO1xyXG4gIHZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcclxuICB2YXIgcXVlcnlTdHJpbmdSRSA9IC9cXD8uKiQvO1xyXG5cclxuICAvLyBpbnN0YWxsIHYtbGluaywgd2hpY2ggcHJvdmlkZXMgbmF2aWdhdGlvbiBzdXBwb3J0IGZvclxyXG4gIC8vIEhUTUw1IGhpc3RvcnkgbW9kZVxyXG4gIGZ1bmN0aW9uIExpbmsgKFZ1ZSkge1xyXG4gICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xyXG4gICAgdmFyIF9iaW5kID0gX1Z1ZSR1dGlsLmJpbmQ7XHJcbiAgICB2YXIgaXNPYmplY3QgPSBfVnVlJHV0aWwuaXNPYmplY3Q7XHJcbiAgICB2YXIgYWRkQ2xhc3MgPSBfVnVlJHV0aWwuYWRkQ2xhc3M7XHJcbiAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XHJcblxyXG4gICAgdmFyIG9uUHJpb3JpdHkgPSBWdWUuZGlyZWN0aXZlKCdvbicpLnByaW9yaXR5O1xyXG4gICAgdmFyIExJTktfVVBEQVRFID0gJ19fdnVlLXJvdXRlci1saW5rLXVwZGF0ZV9fJztcclxuXHJcbiAgICB2YXIgYWN0aXZlSWQgPSAwO1xyXG5cclxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmstYWN0aXZlJywge1xyXG4gICAgICBwcmlvcml0eTogOTk5OSxcclxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICB2YXIgaWQgPSBTdHJpbmcoYWN0aXZlSWQrKyk7XHJcbiAgICAgICAgLy8gY29sbGVjdCB2LWxpbmtzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbGVtZW50LlxyXG4gICAgICAgIC8vIHdlIG5lZWQgZG8gdGhpcyBoZXJlIGJlZm9yZSB0aGUgcGFyZW50LWNoaWxkIHJlbGF0aW9uc2hpcFxyXG4gICAgICAgIC8vIGdldHMgbWVzc2VkIHVwIGJ5IHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGlmLCBmb3IsIGNvbXBvbmVudHMpXHJcbiAgICAgICAgdmFyIGNoaWxkTGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t2LWxpbmtdJyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgdmFyIGxpbmsgPSBjaGlsZExpbmtzW2ldO1xyXG4gICAgICAgICAgdmFyIGV4aXN0aW5nSWQgPSBsaW5rLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSBleGlzdGluZ0lkID8gZXhpc3RpbmdJZCArICcsJyArIGlkIDogaWQ7XHJcbiAgICAgICAgICAvLyBsZWF2ZSBhIG1hcmsgb24gdGhlIGxpbmsgZWxlbWVudCB3aGljaCBjYW4gYmUgcGVyc2lzdGVkXHJcbiAgICAgICAgICAvLyB0aHJvdWdoIGZyYWdtZW50IGNsb25lcy5cclxuICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKExJTktfVVBEQVRFLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudm0uJG9uKExJTktfVVBEQVRFLCB0aGlzLmNiID0gZnVuY3Rpb24gKGxpbmssIHBhdGgpIHtcclxuICAgICAgICAgIGlmIChsaW5rLmFjdGl2ZUlkcy5pbmRleE9mKGlkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGxpbmsudXBkYXRlQ2xhc3NlcyhwYXRoLCBfdGhpcy5lbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICAgIHRoaXMudm0uJG9mZihMSU5LX1VQREFURSwgdGhpcy5jYik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmsnLCB7XHJcbiAgICAgIHByaW9yaXR5OiBvblByaW9yaXR5IC0gMixcclxuXHJcbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcy52bTtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoIXZtLiRyb3V0ZSkge1xyXG4gICAgICAgICAgd2FybiQxKCd2LWxpbmsgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSByb3V0ZXItZW5hYmxlZCBhcHAuJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucm91dGVyID0gdm0uJHJvdXRlLnJvdXRlcjtcclxuICAgICAgICAvLyB1cGRhdGUgdGhpbmdzIHdoZW4gdGhlIHJvdXRlIGNoYW5nZXNcclxuICAgICAgICB0aGlzLnVud2F0Y2ggPSB2bS4kd2F0Y2goJyRyb3V0ZScsIF9iaW5kKHRoaXMub25Sb3V0ZVVwZGF0ZSwgdGhpcykpO1xyXG4gICAgICAgIC8vIGNoZWNrIHYtbGluay1hY3RpdmUgaWRzXHJcbiAgICAgICAgdmFyIGFjdGl2ZUlkcyA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKExJTktfVVBEQVRFKTtcclxuICAgICAgICBpZiAoYWN0aXZlSWRzKSB7XHJcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShMSU5LX1VQREFURSk7XHJcbiAgICAgICAgICB0aGlzLmFjdGl2ZUlkcyA9IGFjdGl2ZUlkcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBubyBuZWVkIHRvIGhhbmRsZSBjbGljayBpZiBsaW5rIGV4cGVjdHMgdG8gYmUgb3BlbmVkXHJcbiAgICAgICAgLy8gaW4gYSBuZXcgd2luZG93L3RhYi5cclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnQScgJiYgdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpID09PSAnX2JsYW5rJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBoYW5kbGUgY2xpY2tcclxuICAgICAgICB0aGlzLmhhbmRsZXIgPSBfYmluZCh0aGlzLm9uQ2xpY2ssIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KHRhcmdldCkpIHtcclxuICAgICAgICAgIHRoaXMuYXBwZW5kID0gdGFyZ2V0LmFwcGVuZDtcclxuICAgICAgICAgIHRoaXMuZXhhY3QgPSB0YXJnZXQuZXhhY3Q7XHJcbiAgICAgICAgICB0aGlzLnByZXZBY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3M7XHJcbiAgICAgICAgICB0aGlzLmFjdGl2ZUNsYXNzID0gdGFyZ2V0LmFjdGl2ZUNsYXNzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uUm91dGVVcGRhdGUodGhpcy52bS4kcm91dGUpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XHJcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5KSByZXR1cm47XHJcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XHJcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xyXG4gICAgICAgIGlmICh0YXJnZXQpIHtcclxuICAgICAgICAgIC8vIHYtbGluayB3aXRoIGV4cHJlc3Npb24sIGp1c3QgZ29cclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHRoaXMucm91dGVyLmdvKHRhcmdldCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIG5vIGV4cHJlc3Npb24sIGRlbGVnYXRlIGZvciBhbiA8YT4gaW5zaWRlXHJcbiAgICAgICAgICB2YXIgZWwgPSBlLnRhcmdldDtcclxuICAgICAgICAgIHdoaWxlIChlbC50YWdOYW1lICE9PSAnQScgJiYgZWwgIT09IHRoaXMuZWwpIHtcclxuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdBJyAmJiBzYW1lT3JpZ2luKGVsKSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZWwucGF0aG5hbWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3QpIHtcclxuICAgICAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdFJFLCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28oe1xyXG4gICAgICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgICAgICAgcmVwbGFjZTogdGFyZ2V0ICYmIHRhcmdldC5yZXBsYWNlLFxyXG4gICAgICAgICAgICAgIGFwcGVuZDogdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgb25Sb3V0ZVVwZGF0ZTogZnVuY3Rpb24gb25Sb3V0ZVVwZGF0ZShyb3V0ZSkge1xyXG4gICAgICAgIC8vIHJvdXRlci5zdHJpbmdpZnlQYXRoIGlzIGRlcGVuZGVudCBvbiBjdXJyZW50IHJvdXRlXHJcbiAgICAgICAgLy8gYW5kIG5lZWRzIHRvIGJlIGNhbGxlZCBhZ2FpbiB3aGVudmVyIHJvdXRlIGNoYW5nZXMuXHJcbiAgICAgICAgdmFyIG5ld1BhdGggPSB0aGlzLnJvdXRlci5zdHJpbmdpZnlQYXRoKHRoaXMudGFyZ2V0KTtcclxuICAgICAgICBpZiAodGhpcy5wYXRoICE9PSBuZXdQYXRoKSB7XHJcbiAgICAgICAgICB0aGlzLnBhdGggPSBuZXdQYXRoO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVNYXRjaCgpO1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVIcmVmKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkcykge1xyXG4gICAgICAgICAgdGhpcy52bS4kZW1pdChMSU5LX1VQREFURSwgdGhpcywgcm91dGUucGF0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlQ2xhc3Nlcyhyb3V0ZS5wYXRoLCB0aGlzLmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1cGRhdGVBY3RpdmVNYXRjaDogZnVuY3Rpb24gdXBkYXRlQWN0aXZlTWF0Y2goKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVSRSA9IHRoaXMucGF0aCAmJiAhdGhpcy5leGFjdCA/IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5wYXRoLnJlcGxhY2UoL1xcLyQvLCAnJykucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJykucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJykgKyAnKFxcXFwvfCQpJykgOiBudWxsO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXBkYXRlSHJlZjogZnVuY3Rpb24gdXBkYXRlSHJlZigpIHtcclxuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lICE9PSAnQScpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7XHJcbiAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xyXG4gICAgICAgIHZhciBpc0Fic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcclxuICAgICAgICAvLyBkbyBub3QgZm9ybWF0IG5vbi1oYXNoIHJlbGF0aXZlIHBhdGhzXHJcbiAgICAgICAgdmFyIGhyZWYgPSBwYXRoICYmIChyb3V0ZXIubW9kZSA9PT0gJ2hhc2gnIHx8IGlzQWJzb2x1dGUpID8gcm91dGVyLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoLCB0aGlzLmFwcGVuZCkgOiBwYXRoO1xyXG4gICAgICAgIGlmIChocmVmKSB7XHJcbiAgICAgICAgICB0aGlzLmVsLmhyZWYgPSBocmVmO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIHVwZGF0ZUNsYXNzZXM6IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocGF0aCwgZWwpIHtcclxuICAgICAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzIHx8IHRoaXMucm91dGVyLl9saW5rQWN0aXZlQ2xhc3M7XHJcbiAgICAgICAgLy8gY2xlYXIgb2xkIGNsYXNzXHJcbiAgICAgICAgaWYgKHRoaXMucHJldkFjdGl2ZUNsYXNzICYmIHRoaXMucHJldkFjdGl2ZUNsYXNzICE9PSBhY3RpdmVDbGFzcykge1xyXG4gICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdGhpcy5wcmV2QWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVtb3ZlIHF1ZXJ5IHN0cmluZyBiZWZvcmUgbWF0Y2hpbmdcclxuICAgICAgICB2YXIgZGVzdCA9IHRoaXMucGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcclxuICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcclxuICAgICAgICAvLyBhZGQgbmV3IGNsYXNzXHJcbiAgICAgICAgaWYgKHRoaXMuZXhhY3QpIHtcclxuICAgICAgICAgIGlmIChkZXN0ID09PSBwYXRoIHx8XHJcbiAgICAgICAgICAvLyBhbHNvIGFsbG93IGFkZGl0aW9uYWwgdHJhaWxpbmcgc2xhc2hcclxuICAgICAgICAgIGRlc3QuY2hhckF0KGRlc3QubGVuZ3RoIC0gMSkgIT09ICcvJyAmJiBkZXN0ID09PSBwYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykpIHtcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIGFkZENsYXNzKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJFICYmIHRoaXMuYWN0aXZlUkUudGVzdChwYXRoKSkge1xyXG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcclxuICAgICAgICB0aGlzLnVud2F0Y2ggJiYgdGhpcy51bndhdGNoKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhbWVPcmlnaW4obGluaykge1xyXG4gICAgICByZXR1cm4gbGluay5wcm90b2NvbCA9PT0gbG9jYXRpb24ucHJvdG9jb2wgJiYgbGluay5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWUgJiYgbGluay5wb3J0ID09PSBsb2NhdGlvbi5wb3J0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgY29waWVkIGZyb20gdi1iaW5kOmNsYXNzIGltcGxlbWVudGF0aW9uIHVudGlsXHJcbiAgICAvLyB3ZSBwcm9wZXJseSBleHBvc2UgaXQuLi5cclxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoZWwsIGtleSwgZm4pIHtcclxuICAgICAga2V5ID0ga2V5LnRyaW0oKTtcclxuICAgICAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XHJcbiAgICAgICAgZm4oZWwsIGtleSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBmbihlbCwga2V5c1tpXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBoaXN0b3J5QmFja2VuZHMgPSB7XHJcbiAgICBhYnN0cmFjdDogQWJzdHJhY3RIaXN0b3J5LFxyXG4gICAgaGFzaDogSGFzaEhpc3RvcnksXHJcbiAgICBodG1sNTogSFRNTDVIaXN0b3J5XHJcbiAgfTtcclxuXHJcbiAgLy8gbGF0ZSBiaW5kIGR1cmluZyBpbnN0YWxsXHJcbiAgdmFyIFZ1ZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLyoqXHJcbiAgICogUm91dGVyIGNvbnN0cnVjdG9yXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcblxyXG4gIHZhciBSb3V0ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUm91dGVyKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcclxuXHJcbiAgICAgIHZhciBfcmVmJGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcclxuICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZiRoYXNoYmFuZyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IF9yZWYkaGFzaGJhbmc7XHJcbiAgICAgIHZhciBfcmVmJGFic3RyYWN0ID0gX3JlZi5hYnN0cmFjdDtcclxuICAgICAgdmFyIGFic3RyYWN0ID0gX3JlZiRhYnN0cmFjdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGFic3RyYWN0O1xyXG4gICAgICB2YXIgX3JlZiRoaXN0b3J5ID0gX3JlZi5oaXN0b3J5O1xyXG4gICAgICB2YXIgaGlzdG9yeSA9IF9yZWYkaGlzdG9yeSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGhpc3Rvcnk7XHJcbiAgICAgIHZhciBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYuc2F2ZVNjcm9sbFBvc2l0aW9uO1xyXG4gICAgICB2YXIgc2F2ZVNjcm9sbFBvc2l0aW9uID0gX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb247XHJcbiAgICAgIHZhciBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmLnRyYW5zaXRpb25PbkxvYWQ7XHJcbiAgICAgIHZhciB0cmFuc2l0aW9uT25Mb2FkID0gX3JlZiR0cmFuc2l0aW9uT25Mb2FkID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkdHJhbnNpdGlvbk9uTG9hZDtcclxuICAgICAgdmFyIF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmLnN1cHByZXNzVHJhbnNpdGlvbkVycm9yO1xyXG4gICAgICB2YXIgc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XHJcbiAgICAgIHZhciBfcmVmJHJvb3QgPSBfcmVmLnJvb3Q7XHJcbiAgICAgIHZhciByb290ID0gX3JlZiRyb290ID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlZiRyb290O1xyXG4gICAgICB2YXIgX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmLmxpbmtBY3RpdmVDbGFzcztcclxuICAgICAgdmFyIGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYkbGlua0FjdGl2ZUNsYXNzID09PSB1bmRlZmluZWQgPyAndi1saW5rLWFjdGl2ZScgOiBfcmVmJGxpbmtBY3RpdmVDbGFzcztcclxuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlcik7XHJcblxyXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgaWYgKCFSb3V0ZXIuaW5zdGFsbGVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgaW5zdGFsbCB0aGUgUm91dGVyIHdpdGggVnVlLnVzZSgpIGJlZm9yZSAnICsgJ2NyZWF0aW5nIGFuIGluc3RhbmNlLicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBWdWUgaW5zdGFuY2VzXHJcbiAgICAgIHRoaXMuYXBwID0gbnVsbDtcclxuICAgICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcclxuXHJcbiAgICAgIC8vIHJvdXRlIHJlY29nbml6ZXJcclxuICAgICAgdGhpcy5fcmVjb2duaXplciA9IG5ldyBSb3V0ZVJlY29nbml6ZXIoKTtcclxuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xyXG5cclxuICAgICAgLy8gc3RhdGVcclxuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLl9zdGFydENiID0gbnVsbDtcclxuICAgICAgdGhpcy5fY3VycmVudFJvdXRlID0ge307XHJcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDtcclxuICAgICAgdGhpcy5fcHJldmlvdXNUcmFuc2l0aW9uID0gbnVsbDtcclxuICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gbnVsbDtcclxuICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IG51bGw7XHJcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcyA9IFtdO1xyXG4gICAgICB0aGlzLl9hZnRlckVhY2hIb29rcyA9IFtdO1xyXG5cclxuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIG9uIGluaXRpYWwgcmVuZGVyP1xyXG4gICAgICB0aGlzLl9yZW5kZXJlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLl90cmFuc2l0aW9uT25Mb2FkID0gdHJhbnNpdGlvbk9uTG9hZDtcclxuXHJcbiAgICAgIC8vIGhpc3RvcnkgbW9kZVxyXG4gICAgICB0aGlzLl9yb290ID0gcm9vdDtcclxuICAgICAgdGhpcy5fYWJzdHJhY3QgPSBhYnN0cmFjdDtcclxuICAgICAgdGhpcy5faGFzaGJhbmcgPSBoYXNoYmFuZztcclxuXHJcbiAgICAgIC8vIGNoZWNrIGlmIEhUTUw1IGhpc3RvcnkgaXMgYXZhaWxhYmxlXHJcbiAgICAgIHZhciBoYXNQdXNoU3RhdGUgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGU7XHJcbiAgICAgIHRoaXMuX2hpc3RvcnkgPSBoaXN0b3J5ICYmIGhhc1B1c2hTdGF0ZTtcclxuICAgICAgdGhpcy5faGlzdG9yeUZhbGxiYWNrID0gaGlzdG9yeSAmJiAhaGFzUHVzaFN0YXRlO1xyXG5cclxuICAgICAgLy8gY3JlYXRlIGhpc3Rvcnkgb2JqZWN0XHJcbiAgICAgIHZhciBpbkJyb3dzZXIgPSBWdWUudXRpbC5pbkJyb3dzZXI7XHJcbiAgICAgIHRoaXMubW9kZSA9ICFpbkJyb3dzZXIgfHwgdGhpcy5fYWJzdHJhY3QgPyAnYWJzdHJhY3QnIDogdGhpcy5faGlzdG9yeSA/ICdodG1sNScgOiAnaGFzaCc7XHJcblxyXG4gICAgICB2YXIgSGlzdG9yeSA9IGhpc3RvcnlCYWNrZW5kc1t0aGlzLm1vZGVdO1xyXG4gICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh7XHJcbiAgICAgICAgcm9vdDogcm9vdCxcclxuICAgICAgICBoYXNoYmFuZzogdGhpcy5faGFzaGJhbmcsXHJcbiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHBhdGgsIHN0YXRlLCBhbmNob3IpIHtcclxuICAgICAgICAgIF90aGlzLl9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gb3RoZXIgb3B0aW9uc1xyXG4gICAgICB0aGlzLl9zYXZlU2Nyb2xsUG9zaXRpb24gPSBzYXZlU2Nyb2xsUG9zaXRpb247XHJcbiAgICAgIHRoaXMuX2xpbmtBY3RpdmVDbGFzcyA9IGxpbmtBY3RpdmVDbGFzcztcclxuICAgICAgdGhpcy5fc3VwcHJlc3MgPSBzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsbG93IGRpcmVjdGx5IHBhc3NpbmcgY29tcG9uZW50cyB0byBhIHJvdXRlXHJcbiAgICAgKiBkZWZpbml0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxyXG4gICAgICovXHJcblxyXG4gICAgLy8gQVBJID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBSZWdpc3RlciBhIG1hcCBvZiB0b3AtbGV2ZWwgcGF0aHMuXHJcbiAgICAqXHJcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcclxuICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiBtYXAoX21hcCkge1xyXG4gICAgICBmb3IgKHZhciByb3V0ZSBpbiBfbWFwKSB7XHJcbiAgICAgICAgdGhpcy5vbihyb3V0ZSwgX21hcFtyb3V0ZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIGEgc2luZ2xlIHJvb3QtbGV2ZWwgcGF0aFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByb290UGF0aFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcclxuICAgICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGNvbXBvbmVudFxyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW3N1YlJvdXRlc11cclxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbZm9yY2VSZWZyZXNoXVxyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYmVmb3JlXVxyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYWZ0ZXJdXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24ocm9vdFBhdGgsIGhhbmRsZXIpIHtcclxuICAgICAgaWYgKHJvb3RQYXRoID09PSAnKicpIHtcclxuICAgICAgICB0aGlzLl9ub3RGb3VuZChoYW5kbGVyKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9hZGRSb3V0ZShyb290UGF0aCwgaGFuZGxlciwgW10pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCByZWRpcmVjdHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxyXG4gICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KG1hcCkge1xyXG4gICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xyXG4gICAgICAgIHRoaXMuX2FkZFJlZGlyZWN0KHBhdGgsIG1hcFtwYXRoXSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGFsaWFzZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxyXG4gICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIGFsaWFzKG1hcCkge1xyXG4gICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xyXG4gICAgICAgIHRoaXMuX2FkZEFsaWFzKHBhdGgsIG1hcFtwYXRoXSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGdsb2JhbCBiZWZvcmUgaG9vay5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5iZWZvcmVFYWNoID0gZnVuY3Rpb24gYmVmb3JlRWFjaChmbikge1xyXG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MucHVzaChmbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBnbG9iYWwgYWZ0ZXIgaG9vay5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2goZm4pIHtcclxuICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MucHVzaChmbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE5hdmlnYXRlIHRvIGEgZ2l2ZW4gcGF0aC5cclxuICAgICAqIFRoZSBwYXRoIGNhbiBiZSBhbiBvYmplY3QgZGVzY3JpYmluZyBhIG5hbWVkIHBhdGggaW5cclxuICAgICAqIHRoZSBmb3JtYXQgb2YgeyBuYW1lOiAnLi4uJywgcGFyYW1zOiB7fSwgcXVlcnk6IHt9fVxyXG4gICAgICogVGhlIHBhdGggaXMgYXNzdW1lZCB0byBiZSBhbHJlYWR5IGRlY29kZWQsIGFuZCB3aWxsXHJcbiAgICAgKiBiZSByZXNvbHZlZCBhZ2FpbnN0IHJvb3QgKGlmIHByb3ZpZGVkKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gcGF0aFxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbcmVwbGFjZV1cclxuICAgICAqL1xyXG5cclxuICAgIFJvdXRlci5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoKSB7XHJcbiAgICAgIHZhciByZXBsYWNlID0gZmFsc2U7XHJcbiAgICAgIHZhciBhcHBlbmQgPSBmYWxzZTtcclxuICAgICAgaWYgKFZ1ZS51dGlsLmlzT2JqZWN0KHBhdGgpKSB7XHJcbiAgICAgICAgcmVwbGFjZSA9IHBhdGgucmVwbGFjZTtcclxuICAgICAgICBhcHBlbmQgPSBwYXRoLmFwcGVuZDtcclxuICAgICAgfVxyXG4gICAgICBwYXRoID0gdGhpcy5zdHJpbmdpZnlQYXRoKHBhdGgpO1xyXG4gICAgICBpZiAocGF0aCkge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5nbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvcnQgaGFuZCBmb3IgcmVwbGFjaW5nIGN1cnJlbnQgcGF0aFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgpIHtcclxuICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHBhdGggPSB7IHBhdGg6IHBhdGggfTtcclxuICAgICAgfVxyXG4gICAgICBwYXRoLnJlcGxhY2UgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdvKHBhdGgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IHRoZSByb3V0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtWdWVDb25zdHJ1Y3Rvcn0gQXBwXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBjb250YWluZXJcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cclxuICAgICAqL1xyXG5cclxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChBcHAsIGNvbnRhaW5lciwgY2IpIHtcclxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgIGlmICh0aGlzLl9zdGFydGVkKSB7XHJcbiAgICAgICAgd2FybiQxKCdhbHJlYWR5IHN0YXJ0ZWQuJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9zdGFydENiID0gY2I7XHJcbiAgICAgIGlmICghdGhpcy5hcHApIHtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoIUFwcCB8fCAhY29udGFpbmVyKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50IGFuZCBhICcgKyAncm9vdCBjb250YWluZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmIChBcHAgaW5zdGFuY2VvZiBWdWUpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQsIG5vdCBhICcgKyAnVnVlIGluc3RhbmNlLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hcHBDb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdmFyIEN0b3IgPSB0aGlzLl9hcHBDb25zdHJ1Y3RvciA9IHR5cGVvZiBBcHAgPT09ICdmdW5jdGlvbicgPyBBcHAgOiBWdWUuZXh0ZW5kKEFwcCk7XHJcbiAgICAgICAgLy8gZ2l2ZSBpdCBhIG5hbWUgZm9yIGJldHRlciBkZWJ1Z2dpbmdcclxuICAgICAgICBDdG9yLm9wdGlvbnMubmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8ICdSb3V0ZXJBcHAnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBoYW5kbGUgaGlzdG9yeSBmYWxsYmFjayBpbiBicm93c2VycyB0aGF0IGRvIG5vdFxyXG4gICAgICAvLyBzdXBwb3J0IEhUTUw1IGhpc3RvcnkgQVBJXHJcbiAgICAgIGlmICh0aGlzLl9oaXN0b3J5RmFsbGJhY2spIHtcclxuICAgICAgICB2YXIgX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xyXG4gICAgICAgIHZhciBfaGlzdG9yeSA9IG5ldyBIVE1MNUhpc3RvcnkoeyByb290OiB0aGlzLl9yb290IH0pO1xyXG4gICAgICAgIHZhciBwYXRoID0gX2hpc3Rvcnkucm9vdCA/IF9sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKF9oaXN0b3J5LnJvb3RSRSwgJycpIDogX2xvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgIGlmIChwYXRoICYmIHBhdGggIT09ICcvJykge1xyXG4gICAgICAgICAgX2xvY2F0aW9uLmFzc2lnbigoX2hpc3Rvcnkucm9vdCB8fCAnJykgKyAnLycgKyB0aGlzLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoKSArIF9sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5oaXN0b3J5LnN0YXJ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcCBsaXN0ZW5pbmcgdG8gcm91dGUgY2hhbmdlcy5cclxuICAgICAqL1xyXG5cclxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XHJcbiAgICAgIHRoaXMuaGlzdG9yeS5zdG9wKCk7XHJcbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3JtYWxpemUgbmFtZWQgcm91dGUgb2JqZWN0IC8gc3RyaW5nIHBhdGhzIGludG9cclxuICAgICAqIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ3xOdW1iZXJ9IHBhdGhcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqL1xyXG5cclxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RyaW5naWZ5UGF0aCA9IGZ1bmN0aW9uIHN0cmluZ2lmeVBhdGgocGF0aCkge1xyXG4gICAgICB2YXIgZ2VuZXJhdGVkUGF0aCA9ICcnO1xyXG4gICAgICBpZiAocGF0aCAmJiB0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAocGF0aC5uYW1lKSB7XHJcbiAgICAgICAgICB2YXIgZXh0ZW5kID0gVnVlLnV0aWwuZXh0ZW5kO1xyXG4gICAgICAgICAgdmFyIGN1cnJlbnRQYXJhbXMgPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiAmJiB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi50by5wYXJhbXM7XHJcbiAgICAgICAgICB2YXIgdGFyZ2V0UGFyYW1zID0gcGF0aC5wYXJhbXMgfHwge307XHJcbiAgICAgICAgICB2YXIgcGFyYW1zID0gY3VycmVudFBhcmFtcyA/IGV4dGVuZChleHRlbmQoe30sIGN1cnJlbnRQYXJhbXMpLCB0YXJnZXRQYXJhbXMpIDogdGFyZ2V0UGFyYW1zO1xyXG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSSh0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlKHBhdGgubmFtZSwgcGFyYW1zKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXRoLnBhdGgpIHtcclxuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aC5wYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhdGgucXVlcnkpIHtcclxuICAgICAgICAgIC8vIG5vdGU6IHRoZSBnZW5lcmF0ZWQgcXVlcnkgc3RyaW5nIGlzIHByZS1VUkwtZW5jb2RlZCBieSB0aGUgcmVjb2duaXplclxyXG4gICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhdGgucXVlcnkpO1xyXG4gICAgICAgICAgaWYgKGdlbmVyYXRlZFBhdGguaW5kZXhPZignPycpID4gLTEpIHtcclxuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSAnJicgKyBxdWVyeS5zbGljZSgxKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdlbmVyYXRlZFBhdGggKz0gcXVlcnk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aCA/IHBhdGggKyAnJyA6ICcnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZ2VuZXJhdGVkUGF0aDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBZGQgYSByb3V0ZSBjb250YWluaW5nIGEgbGlzdCBvZiBzZWdtZW50cyB0byB0aGUgaW50ZXJuYWxcclxuICAgICogcm91dGUgcmVjb2duaXplci4gV2lsbCBiZSBjYWxsZWQgcmVjdXJzaXZlbHkgdG8gYWRkIGFsbFxyXG4gICAgKiBwb3NzaWJsZSBzdWItcm91dGVzLlxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxyXG4gICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxyXG4gICAgKiBAcGFyYW0ge0FycmF5fSBzZWdtZW50c1xyXG4gICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSb3V0ZSA9IGZ1bmN0aW9uIF9hZGRSb3V0ZShwYXRoLCBoYW5kbGVyLCBzZWdtZW50cykge1xyXG4gICAgICBndWFyZENvbXBvbmVudChwYXRoLCBoYW5kbGVyKTtcclxuICAgICAgaGFuZGxlci5wYXRoID0gcGF0aDtcclxuICAgICAgaGFuZGxlci5mdWxsUGF0aCA9IChzZWdtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKHBhdGgsIHNlZ21lbnQpIHtcclxuICAgICAgICByZXR1cm4gcGF0aCArIHNlZ21lbnQucGF0aDtcclxuICAgICAgfSwgJycpICsgcGF0aCkucmVwbGFjZSgnLy8nLCAnLycpO1xyXG4gICAgICBzZWdtZW50cy5wdXNoKHtcclxuICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIuYWRkKHNlZ21lbnRzLCB7XHJcbiAgICAgICAgYXM6IGhhbmRsZXIubmFtZVxyXG4gICAgICB9KTtcclxuICAgICAgLy8gYWRkIHN1YiByb3V0ZXNcclxuICAgICAgaWYgKGhhbmRsZXIuc3ViUm91dGVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgc3ViUGF0aCBpbiBoYW5kbGVyLnN1YlJvdXRlcykge1xyXG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgd2FsayBhbGwgc3ViIHJvdXRlc1xyXG4gICAgICAgICAgdGhpcy5fYWRkUm91dGUoc3ViUGF0aCwgaGFuZGxlci5zdWJSb3V0ZXNbc3ViUGF0aF0sXHJcbiAgICAgICAgICAvLyBwYXNzIGEgY29weSBpbiByZWN1cnNpb24gdG8gYXZvaWQgbXV0YXRpbmdcclxuICAgICAgICAgIC8vIGFjcm9zcyBicmFuY2hlc1xyXG4gICAgICAgICAgc2VnbWVudHMuc2xpY2UoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBub3RGb3VuZCByb3V0ZSBoYW5kbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9ub3RGb3VuZCA9IGZ1bmN0aW9uIF9ub3RGb3VuZChoYW5kbGVyKSB7XHJcbiAgICAgIGd1YXJkQ29tcG9uZW50KCcqJywgaGFuZGxlcik7XHJcbiAgICAgIHRoaXMuX25vdEZvdW5kSGFuZGxlciA9IFt7IGhhbmRsZXI6IGhhbmRsZXIgfV07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgcmVkaXJlY3QgcmVjb3JkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVkaXJlY3RQYXRoXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSZWRpcmVjdCA9IGZ1bmN0aW9uIF9hZGRSZWRpcmVjdChwYXRoLCByZWRpcmVjdFBhdGgpIHtcclxuICAgICAgaWYgKHBhdGggPT09ICcqJykge1xyXG4gICAgICAgIHRoaXMuX25vdEZvdW5kUmVkaXJlY3QgPSByZWRpcmVjdFBhdGg7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgcmVkaXJlY3RQYXRoLCB0aGlzLnJlcGxhY2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGFuIGFsaWFzIHJlY29yZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzUGF0aFxyXG4gICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkQWxpYXMgPSBmdW5jdGlvbiBfYWRkQWxpYXMocGF0aCwgYWxpYXNQYXRoKSB7XHJcbiAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIGFsaWFzUGF0aCwgdGhpcy5fbWF0Y2gpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIHBhdGggZ3VhcmQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYXBwZWRQYXRoXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRHdWFyZCA9IGZ1bmN0aW9uIF9hZGRHdWFyZChwYXRoLCBtYXBwZWRQYXRoLCBfaGFuZGxlcikge1xyXG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuX2d1YXJkUmVjb2duaXplci5hZGQoW3tcclxuICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobWF0Y2gsIHF1ZXJ5KSB7XHJcbiAgICAgICAgICB2YXIgcmVhbFBhdGggPSBtYXBQYXJhbXMobWFwcGVkUGF0aCwgbWF0Y2gucGFyYW1zLCBxdWVyeSk7XHJcbiAgICAgICAgICBfaGFuZGxlci5jYWxsKF90aGlzMiwgcmVhbFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfV0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGEgcGF0aCBtYXRjaGVzIGFueSByZWRpcmVjdCByZWNvcmRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAtIGlmIHRydWUsIHdpbGwgc2tpcCBub3JtYWwgbWF0Y2guXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9jaGVja0d1YXJkID0gZnVuY3Rpb24gX2NoZWNrR3VhcmQocGF0aCkge1xyXG4gICAgICB2YXIgbWF0Y2hlZCA9IHRoaXMuX2d1YXJkUmVjb2duaXplci5yZWNvZ25pemUocGF0aCwgdHJ1ZSk7XHJcbiAgICAgIGlmIChtYXRjaGVkKSB7XHJcbiAgICAgICAgbWF0Y2hlZFswXS5oYW5kbGVyKG1hdGNoZWRbMF0sIG1hdGNoZWQucXVlcnlQYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX25vdEZvdW5kUmVkaXJlY3QpIHtcclxuICAgICAgICBtYXRjaGVkID0gdGhpcy5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XHJcbiAgICAgICAgaWYgKCFtYXRjaGVkKSB7XHJcbiAgICAgICAgICB0aGlzLnJlcGxhY2UodGhpcy5fbm90Rm91bmRSZWRpcmVjdCk7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaCBhIFVSTCBwYXRoIGFuZCBzZXQgdGhlIHJvdXRlIGNvbnRleHQgb24gdm0sXHJcbiAgICAgKiB0cmlnZ2VyaW5nIHZpZXcgdXBkYXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGF0ZV1cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxyXG4gICAgICovXHJcblxyXG4gICAgUm91dGVyLnByb3RvdHlwZS5fbWF0Y2ggPSBmdW5jdGlvbiBfbWF0Y2gocGF0aCwgc3RhdGUsIGFuY2hvcikge1xyXG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcclxuXHJcbiAgICAgIGlmICh0aGlzLl9jaGVja0d1YXJkKHBhdGgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgY3VycmVudFJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlO1xyXG4gICAgICB2YXIgY3VycmVudFRyYW5zaXRpb24gPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbjtcclxuXHJcbiAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbikge1xyXG4gICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbi50by5wYXRoID09PSBwYXRoKSB7XHJcbiAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHdlIGhhdmUgYW4gYWN0aXZlIHRyYW5zaXRpb24gZ29pbmcgdG8gdGhlIHNhbWUgcGF0aFxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFJvdXRlLnBhdGggPT09IHBhdGgpIHtcclxuICAgICAgICAgIC8vIFdlIGFyZSBnb2luZyB0byB0aGUgc2FtZSBwYXRoLCBidXQgd2UgYWxzbyBoYXZlIGFuIG9uZ29pbmcgYnV0XHJcbiAgICAgICAgICAvLyBub3QteWV0LXZhbGlkYXRlZCB0cmFuc2l0aW9uLiBBYm9ydCB0aGF0IHRyYW5zaXRpb24gYW5kIHJlc2V0IHRvXHJcbiAgICAgICAgICAvLyBwcmV2IHRyYW5zaXRpb24uXHJcbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fcHJldlRyYW5zaXRpb247XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIGdvaW5nIHRvIGEgdG90YWxseSBkaWZmZXJlbnQgcGF0aC4gYWJvcnQgb25nb2luZyB0cmFuc2l0aW9uLlxyXG4gICAgICAgICAgY3VycmVudFRyYW5zaXRpb24uYWJvcnRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjb25zdHJ1Y3QgbmV3IHJvdXRlIGFuZCB0cmFuc2l0aW9uIGNvbnRleHRcclxuICAgICAgdmFyIHJvdXRlID0gbmV3IFJvdXRlKHBhdGgsIHRoaXMpO1xyXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IG5ldyBSb3V0ZVRyYW5zaXRpb24odGhpcywgcm91dGUsIGN1cnJlbnRSb3V0ZSk7XHJcblxyXG4gICAgICAvLyBjdXJyZW50IHRyYW5zaXRpb24gaXMgdXBkYXRlZCByaWdodCBub3cuXHJcbiAgICAgIC8vIGhvd2V2ZXIsIGN1cnJlbnQgcm91dGUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gaGFzXHJcbiAgICAgIC8vIGJlZW4gdmFsaWRhdGVkLlxyXG4gICAgICB0aGlzLl9wcmV2VHJhbnNpdGlvbiA9IGN1cnJlbnRUcmFuc2l0aW9uO1xyXG4gICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XHJcblxyXG4gICAgICBpZiAoIXRoaXMuYXBwKSB7XHJcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXHJcbiAgICAgICAgICB2YXIgcm91dGVyID0gX3RoaXMzO1xyXG4gICAgICAgICAgX3RoaXMzLmFwcCA9IG5ldyBfdGhpczMuX2FwcENvbnN0cnVjdG9yKHtcclxuICAgICAgICAgICAgZWw6IF90aGlzMy5fYXBwQ29udGFpbmVyLFxyXG4gICAgICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX21ldGE6IHtcclxuICAgICAgICAgICAgICAkcm91dGU6IHJvdXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNoZWNrIGdsb2JhbCBiZWZvcmUgaG9va1xyXG4gICAgICB2YXIgYmVmb3JlSG9va3MgPSB0aGlzLl9iZWZvcmVFYWNoSG9va3M7XHJcbiAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiBzdGFydFRyYW5zaXRpb24oKSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbi5zdGFydChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBfdGhpczMuX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmIChiZWZvcmVIb29rcy5sZW5ndGgpIHtcclxuICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGJlZm9yZUhvb2tzLCBmdW5jdGlvbiAoaG9vaywgXywgbmV4dCkge1xyXG4gICAgICAgICAgaWYgKHRyYW5zaXRpb24gPT09IF90aGlzMy5fY3VycmVudFRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XHJcbiAgICAgICAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBzdGFydFRyYW5zaXRpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0YXJ0VHJhbnNpdGlvbigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuX3JlbmRlcmVkICYmIHRoaXMuX3N0YXJ0Q2IpIHtcclxuICAgICAgICB0aGlzLl9zdGFydENiLmNhbGwobnVsbCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhBQ0s6XHJcbiAgICAgIC8vIHNldCByZW5kZXJlZCB0byB0cnVlIGFmdGVyIHRoZSB0cmFuc2l0aW9uIHN0YXJ0LCBzb1xyXG4gICAgICAvLyB0aGF0IGNvbXBvbmVudHMgdGhhdCBhcmUgYWNpdHZhdGVkIHN5bmNocm9ub3VzbHkga25vd1xyXG4gICAgICAvLyB3aGV0aGVyIGl0IGlzIHRoZSBpbml0aWFsIHJlbmRlci5cclxuICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBjdXJyZW50IHRvIHRoZSBuZXcgdHJhbnNpdGlvbi5cclxuICAgICAqIFRoaXMgaXMgY2FsbGVkIGJ5IHRoZSB0cmFuc2l0aW9uIG9iamVjdCB3aGVuIHRoZVxyXG4gICAgICogdmFsaWRhdGlvbiBvZiBhIHJvdXRlIGhhcyBzdWNjZWVkZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9vblRyYW5zaXRpb25WYWxpZGF0ZWQgPSBmdW5jdGlvbiBfb25UcmFuc2l0aW9uVmFsaWRhdGVkKHRyYW5zaXRpb24pIHtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgcm91dGVcclxuICAgICAgdmFyIHJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlID0gdHJhbnNpdGlvbi50bztcclxuICAgICAgLy8gdXBkYXRlIHJvdXRlIGNvbnRleHQgZm9yIGFsbCBjaGlsZHJlblxyXG4gICAgICBpZiAodGhpcy5hcHAuJHJvdXRlICE9PSByb3V0ZSkge1xyXG4gICAgICAgIHRoaXMuYXBwLiRyb3V0ZSA9IHJvdXRlO1xyXG4gICAgICAgIHRoaXMuX2NoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XHJcbiAgICAgICAgICBjaGlsZC4kcm91dGUgPSByb3V0ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBjYWxsIGdsb2JhbCBhZnRlciBob29rXHJcbiAgICAgIGlmICh0aGlzLl9hZnRlckVhY2hIb29rcy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgICAgICByZXR1cm4gaG9vay5jYWxsKG51bGwsIHtcclxuICAgICAgICAgICAgdG86IHRyYW5zaXRpb24udG8sXHJcbiAgICAgICAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24uZG9uZSA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHN0dWZmIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Um91dGV9IHJvdXRlXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXHJcbiAgICAgKi9cclxuXHJcbiAgICBSb3V0ZXIucHJvdG90eXBlLl9wb3N0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIF9wb3N0VHJhbnNpdGlvbihyb3V0ZSwgc3RhdGUsIGFuY2hvcikge1xyXG4gICAgICAvLyBoYW5kbGUgc2Nyb2xsIHBvc2l0aW9uc1xyXG4gICAgICAvLyBzYXZlZCBzY3JvbGwgcG9zaXRpb25zIHRha2UgcHJpb3JpdHlcclxuICAgICAgLy8gdGhlbiB3ZSBjaGVjayBpZiB0aGUgcGF0aCBoYXMgYW4gYW5jaG9yXHJcbiAgICAgIHZhciBwb3MgPSBzdGF0ZSAmJiBzdGF0ZS5wb3M7XHJcbiAgICAgIGlmIChwb3MgJiYgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhwb3MueCwgcG9zLnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGFuY2hvcikge1xyXG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3Iuc2xpY2UoMSkpO1xyXG4gICAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh3aW5kb3cuc2Nyb2xsWCwgZWwub2Zmc2V0VG9wKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gUm91dGVyO1xyXG4gIH0pKCk7XHJcblxyXG4gIGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpIHtcclxuICAgIHZhciBjb21wID0gaGFuZGxlci5jb21wb25lbnQ7XHJcbiAgICBpZiAoVnVlLnV0aWwuaXNQbGFpbk9iamVjdChjb21wKSkge1xyXG4gICAgICBjb21wID0gaGFuZGxlci5jb21wb25lbnQgPSBWdWUuZXh0ZW5kKGNvbXApO1xyXG4gICAgfVxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAodHlwZW9mIGNvbXAgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICB3YXJuJDEoJ2ludmFsaWQgY29tcG9uZW50IGZvciByb3V0ZSBcIicgKyBwYXRoICsgJ1wiLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyogSW5zdGFsbGF0aW9uICovXHJcblxyXG4gIFJvdXRlci5pbnN0YWxsZWQgPSBmYWxzZTtcclxuXHJcbiAgLyoqXHJcbiAgICogSW5zdGFsbGF0aW9uIGludGVyZmFjZS5cclxuICAgKiBJbnN0YWxsIHRoZSBuZWNlc3NhcnkgZGlyZWN0aXZlcy5cclxuICAgKi9cclxuXHJcbiAgUm91dGVyLmluc3RhbGwgPSBmdW5jdGlvbiAoZXh0ZXJuYWxWdWUpIHtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKFJvdXRlci5pbnN0YWxsZWQpIHtcclxuICAgICAgd2FybiQxKCdhbHJlYWR5IGluc3RhbGxlZC4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgVnVlID0gZXh0ZXJuYWxWdWU7XHJcbiAgICBhcHBseU92ZXJyaWRlKFZ1ZSk7XHJcbiAgICBWaWV3KFZ1ZSk7XHJcbiAgICBMaW5rKFZ1ZSk7XHJcbiAgICBleHBvcnRzJDEuVnVlID0gVnVlO1xyXG4gICAgUm91dGVyLmluc3RhbGxlZCA9IHRydWU7XHJcbiAgfTtcclxuXHJcbiAgLy8gYXV0byBpbnN0YWxsXHJcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcclxuICAgIHdpbmRvdy5WdWUudXNlKFJvdXRlcik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gUm91dGVyO1xyXG5cclxufSkpOyIsIi8qIVxyXG4gKiB2dWUtcmVzb3VyY2UgdjAuNy40XHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtcmVzb3VyY2VcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XHJcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxyXG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XHJcbiAgKGdsb2JhbC5WdWVSZXNvdXJjZSA9IGZhY3RvcnkoKSk7XHJcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcclxuICB9IDogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBVdGlsaXR5IGZ1bmN0aW9ucy5cclxuICAgKi9cclxuXHJcbiAgdmFyIHV0aWwgPSB7fTtcclxuICB2YXIgY29uZmlnID0ge307XHJcbiAgdmFyIGFycmF5ID0gW107XHJcbiAgdmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcclxuICBmdW5jdGlvbiBVdGlsIChWdWUpIHtcclxuICAgICAgdXRpbCA9IFZ1ZS51dGlsO1xyXG4gICAgICBjb25maWcgPSBWdWUuY29uZmlnO1xyXG4gIH1cclxuXHJcbiAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xyXG5cclxuICBmdW5jdGlvbiB3YXJuKG1zZykge1xyXG4gICAgICBpZiAoY29uc29sZSAmJiB1dGlsLndhcm4gJiYgKCFjb25maWcuc2lsZW50IHx8IGNvbmZpZy5kZWJ1ZykpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignW1Z1ZVJlc291cmNlIHdhcm5dOiAnICsgbXNnKTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXJyb3IobXNnKSB7XHJcbiAgICAgIGlmIChjb25zb2xlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG5leHRUaWNrKGNiLCBjdHgpIHtcclxuICAgICAgcmV0dXJuIHV0aWwubmV4dFRpY2soY2IsIGN0eCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0cmltKHN0cikge1xyXG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqfFxccyokL2csICcnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvTG93ZXIoc3RyKSB7XHJcbiAgICAgIHJldHVybiBzdHIgPyBzdHIudG9Mb3dlckNhc2UoKSA6ICcnO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XHJcbiAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iaikpID09PSAnb2JqZWN0JztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XHJcbiAgICAgIHJldHVybiBpc09iamVjdChvYmopICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09IE9iamVjdC5wcm90b3R5cGU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvcHRpb25zKGZuLCBvYmosIG9wdHMpIHtcclxuXHJcbiAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG5cclxuICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0cykpIHtcclxuICAgICAgICAgIG9wdHMgPSBvcHRzLmNhbGwob2JqKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG1lcmdlKGZuLmJpbmQoeyAkdm06IG9iaiwgJG9wdGlvbnM6IG9wdHMgfSksIGZuLCB7ICRvcHRpb25zOiBvcHRzIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZWFjaChvYmosIGl0ZXJhdG9yKSB7XHJcblxyXG4gICAgICB2YXIgaSwga2V5O1xyXG5cclxuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoID09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChvYmpbaV0sIG9ialtpXSwgaSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob2JqKSkge1xyXG4gICAgICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwob2JqW2tleV0sIG9ialtrZXldLCBrZXkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG9iajtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQpIHtcclxuXHJcbiAgICAgIHZhciBhcmdzID0gYXJyYXkuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG5cclxuICAgICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHtcclxuICAgICAgICAgIF9tZXJnZSh0YXJnZXQsIGFyZyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHRhcmdldDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1lcmdlKHRhcmdldCkge1xyXG5cclxuICAgICAgdmFyIGFyZ3MgPSBhcnJheS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcblxyXG4gICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGFyZykge1xyXG4gICAgICAgICAgX21lcmdlKHRhcmdldCwgYXJnLCB0cnVlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX21lcmdlKHRhcmdldCwgc291cmNlLCBkZWVwKSB7XHJcbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcclxuICAgICAgICAgIGlmIChkZWVwICYmIChpc1BsYWluT2JqZWN0KHNvdXJjZVtrZXldKSB8fCBpc0FycmF5KHNvdXJjZVtrZXldKSkpIHtcclxuICAgICAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChzb3VyY2Vba2V5XSkgJiYgIWlzUGxhaW5PYmplY3QodGFyZ2V0W2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0ge307XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChpc0FycmF5KHNvdXJjZVtrZXldKSAmJiAhaXNBcnJheSh0YXJnZXRba2V5XSkpIHtcclxuICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBbXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgX21lcmdlKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgZGVlcCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZVtrZXldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByb290IChvcHRpb25zLCBuZXh0KSB7XHJcblxyXG4gICAgICB2YXIgdXJsID0gbmV4dChvcHRpb25zKTtcclxuXHJcbiAgICAgIGlmIChpc1N0cmluZyhvcHRpb25zLnJvb3QpICYmICF1cmwubWF0Y2goL14oaHR0cHM/Oik/XFwvLykpIHtcclxuICAgICAgICAgIHVybCA9IG9wdGlvbnMucm9vdCArICcvJyArIHVybDtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHVybDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHF1ZXJ5IChvcHRpb25zLCBuZXh0KSB7XHJcblxyXG4gICAgICB2YXIgdXJsUGFyYW1zID0gT2JqZWN0LmtleXMoVXJsLm9wdGlvbnMucGFyYW1zKSxcclxuICAgICAgICAgIHF1ZXJ5ID0ge30sXHJcbiAgICAgICAgICB1cmwgPSBuZXh0KG9wdGlvbnMpO1xyXG5cclxuICAgICAgZWFjaChvcHRpb25zLnBhcmFtcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgIGlmICh1cmxQYXJhbXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgIHF1ZXJ5W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBxdWVyeSA9IFVybC5wYXJhbXMocXVlcnkpO1xyXG5cclxuICAgICAgaWYgKHF1ZXJ5KSB7XHJcbiAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT0gLTEgPyAnPycgOiAnJicpICsgcXVlcnk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB1cmw7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBsZWdhY3kgKG9wdGlvbnMsIG5leHQpIHtcclxuXHJcbiAgICAgIHZhciB2YXJpYWJsZXMgPSBbXSxcclxuICAgICAgICAgIHVybCA9IG5leHQob3B0aW9ucyk7XHJcblxyXG4gICAgICB1cmwgPSB1cmwucmVwbGFjZSgvKFxcLz8pOihbYS16XVxcdyopL2dpLCBmdW5jdGlvbiAobWF0Y2gsIHNsYXNoLCBuYW1lKSB7XHJcblxyXG4gICAgICAgICAgd2FybignVGhlIGA6JyArIG5hbWUgKyAnYCBwYXJhbWV0ZXIgc3ludGF4IGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYHsnICsgbmFtZSArICd9YCBzeW50YXggaW5zdGVhZC4nKTtcclxuXHJcbiAgICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICB2YXJpYWJsZXMucHVzaChuYW1lKTtcclxuICAgICAgICAgICAgICByZXR1cm4gc2xhc2ggKyBlbmNvZGVVcmlTZWdtZW50KG9wdGlvbnMucGFyYW1zW25hbWVdKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdmFyaWFibGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgZGVsZXRlIG9wdGlvbnMucGFyYW1zW2tleV07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHVybDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsdWUpIHtcclxuXHJcbiAgICAgIHJldHVybiBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgdHJ1ZSkucmVwbGFjZSgvJTI2L2dpLCAnJicpLnJlcGxhY2UoLyUzRC9naSwgJz0nKS5yZXBsYWNlKC8lMkIvZ2ksICcrJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgc3BhY2VzKSB7XHJcblxyXG4gICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKS5yZXBsYWNlKC8lNDAvZ2ksICdAJykucmVwbGFjZSgvJTNBL2dpLCAnOicpLnJlcGxhY2UoLyUyNC9nLCAnJCcpLnJlcGxhY2UoLyUyQy9naSwgJywnKS5yZXBsYWNlKC8lMjAvZywgc3BhY2VzID8gJyUyMCcgOiAnKycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVVJMIFRlbXBsYXRlIHYyLjAuNiAoaHR0cHM6Ly9naXRodWIuY29tL2JyYW1zdGVpbi91cmwtdGVtcGxhdGUpXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGV4cGFuZCh1cmwsIHBhcmFtcywgdmFyaWFibGVzKSB7XHJcblxyXG4gICAgICB2YXIgdG1wbCA9IHBhcnNlKHVybCksXHJcbiAgICAgICAgICBleHBhbmRlZCA9IHRtcGwuZXhwYW5kKHBhcmFtcyk7XHJcblxyXG4gICAgICBpZiAodmFyaWFibGVzKSB7XHJcbiAgICAgICAgICB2YXJpYWJsZXMucHVzaC5hcHBseSh2YXJpYWJsZXMsIHRtcGwudmFycyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBleHBhbmRlZDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlKHRlbXBsYXRlKSB7XHJcblxyXG4gICAgICB2YXIgb3BlcmF0b3JzID0gWycrJywgJyMnLCAnLicsICcvJywgJzsnLCAnPycsICcmJ10sXHJcbiAgICAgICAgICB2YXJpYWJsZXMgPSBbXTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB2YXJzOiB2YXJpYWJsZXMsXHJcbiAgICAgICAgICBleHBhbmQ6IGZ1bmN0aW9uIGV4cGFuZChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoL1xceyhbXlxce1xcfV0rKVxcfXwoW15cXHtcXH1dKykvZywgZnVuY3Rpb24gKF8sIGV4cHJlc3Npb24sIGxpdGVyYWwpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGV4cHJlc3Npb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgb3BlcmF0b3IgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvcnMuaW5kZXhPZihleHByZXNzaW9uLmNoYXJBdCgwKSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3IgPSBleHByZXNzaW9uLmNoYXJBdCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbi5zcGxpdCgvLC9nKS5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSAvKFteOlxcKl0qKSg/OjooXFxkKyl8KFxcKikpPy8uZXhlYyh2YXJpYWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2guYXBwbHkodmFsdWVzLCBnZXRWYWx1ZXMoY29udGV4dCwgb3BlcmF0b3IsIHRtcFsxXSwgdG1wWzJdIHx8IHRtcFszXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5wdXNoKHRtcFsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgJiYgb3BlcmF0b3IgIT09ICcrJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VwYXJhdG9yID0gJywnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICc/Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3IgPSAnJic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciAhPT0gJyMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh2YWx1ZXMubGVuZ3RoICE9PSAwID8gb3BlcmF0b3IgOiAnJykgKyB2YWx1ZXMuam9pbihzZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLmpvaW4oJywnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVSZXNlcnZlZChsaXRlcmFsKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0VmFsdWVzKGNvbnRleHQsIG9wZXJhdG9yLCBrZXksIG1vZGlmaWVyKSB7XHJcblxyXG4gICAgICB2YXIgdmFsdWUgPSBjb250ZXh0W2tleV0sXHJcbiAgICAgICAgICByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpICYmIHZhbHVlICE9PSAnJykge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKG1vZGlmaWVyICYmIG1vZGlmaWVyICE9PSAnKicpIHtcclxuICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgcGFyc2VJbnQobW9kaWZpZXIsIDEwKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWUsIGlzS2V5T3BlcmF0b3Iob3BlcmF0b3IpID8ga2V5IDogbnVsbCkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAobW9kaWZpZXIgPT09ICcqJykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmZpbHRlcihpc0RlZmluZWQpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZW5jb2RlVmFsdWUob3BlcmF0b3IsIHZhbHVlLCBpc0tleU9wZXJhdG9yKG9wZXJhdG9yKSA/IGtleSA6IG51bGwpKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlW2tdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWVba10sIGspKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWUuZmlsdGVyKGlzRGVmaW5lZCkuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlW2tdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWVba10udG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoaXNLZXlPcGVyYXRvcihvcGVyYXRvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgdG1wLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG1wLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godG1wLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICc7Jykge1xyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICcnICYmIChvcGVyYXRvciA9PT0gJyYnIHx8IG9wZXJhdG9yID09PSAnPycpKSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaCgnJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0RlZmluZWQodmFsdWUpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGw7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0tleU9wZXJhdG9yKG9wZXJhdG9yKSB7XHJcbiAgICAgIHJldHVybiBvcGVyYXRvciA9PT0gJzsnIHx8IG9wZXJhdG9yID09PSAnJicgfHwgb3BlcmF0b3IgPT09ICc/JztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVuY29kZVZhbHVlKG9wZXJhdG9yLCB2YWx1ZSwga2V5KSB7XHJcblxyXG4gICAgICB2YWx1ZSA9IG9wZXJhdG9yID09PSAnKycgfHwgb3BlcmF0b3IgPT09ICcjJyA/IGVuY29kZVJlc2VydmVkKHZhbHVlKSA6IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcblxyXG4gICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyB2YWx1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZW5jb2RlUmVzZXJ2ZWQoc3RyKSB7XHJcbiAgICAgIHJldHVybiBzdHIuc3BsaXQoLyglWzAtOUEtRmEtZl17Mn0pL2cpLm1hcChmdW5jdGlvbiAocGFydCkge1xyXG4gICAgICAgICAgaWYgKCEvJVswLTlBLUZhLWZdLy50ZXN0KHBhcnQpKSB7XHJcbiAgICAgICAgICAgICAgcGFydCA9IGVuY29kZVVSSShwYXJ0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBwYXJ0O1xyXG4gICAgICB9KS5qb2luKCcnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRlbXBsYXRlIChvcHRpb25zKSB7XHJcblxyXG4gICAgICB2YXIgdmFyaWFibGVzID0gW10sXHJcbiAgICAgICAgICB1cmwgPSBleHBhbmQob3B0aW9ucy51cmwsIG9wdGlvbnMucGFyYW1zLCB2YXJpYWJsZXMpO1xyXG5cclxuICAgICAgdmFyaWFibGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgZGVsZXRlIG9wdGlvbnMucGFyYW1zW2tleV07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHVybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlcnZpY2UgZm9yIFVSTCB0ZW1wbGF0aW5nLlxyXG4gICAqL1xyXG5cclxuICB2YXIgaWUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XHJcbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG5cclxuICBmdW5jdGlvbiBVcmwodXJsLCBwYXJhbXMpIHtcclxuXHJcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCB7fSxcclxuICAgICAgICAgIG9wdGlvbnMgPSB1cmwsXHJcbiAgICAgICAgICB0cmFuc2Zvcm07XHJcblxyXG4gICAgICBpZiAoaXNTdHJpbmcodXJsKSkge1xyXG4gICAgICAgICAgb3B0aW9ucyA9IHsgdXJsOiB1cmwsIHBhcmFtczogcGFyYW1zIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9wdGlvbnMgPSBtZXJnZSh7fSwgVXJsLm9wdGlvbnMsIHNlbGYuJG9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgVXJsLnRyYW5zZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgdHJhbnNmb3JtID0gZmFjdG9yeShoYW5kbGVyLCB0cmFuc2Zvcm0sIHNlbGYuJHZtKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtKG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXJsIG9wdGlvbnMuXHJcbiAgICovXHJcblxyXG4gIFVybC5vcHRpb25zID0ge1xyXG4gICAgICB1cmw6ICcnLFxyXG4gICAgICByb290OiBudWxsLFxyXG4gICAgICBwYXJhbXM6IHt9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVXJsIHRyYW5zZm9ybXMuXHJcbiAgICovXHJcblxyXG4gIFVybC50cmFuc2Zvcm1zID0gW3RlbXBsYXRlLCBsZWdhY3ksIHF1ZXJ5LCByb290XTtcclxuXHJcbiAgLyoqXHJcbiAgICogRW5jb2RlcyBhIFVybCBwYXJhbWV0ZXIgc3RyaW5nLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxyXG4gICAqL1xyXG5cclxuICBVcmwucGFyYW1zID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgdmFyIHBhcmFtcyA9IFtdLFxyXG4gICAgICAgICAgZXNjYXBlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xyXG5cclxuICAgICAgcGFyYW1zLmFkZCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gJyc7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5wdXNoKGVzY2FwZShrZXkpICsgJz0nICsgZXNjYXBlKHZhbHVlKSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzZXJpYWxpemUocGFyYW1zLCBvYmopO1xyXG5cclxuICAgICAgcmV0dXJuIHBhcmFtcy5qb2luKCcmJykucmVwbGFjZSgvJTIwL2csICcrJyk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUGFyc2UgYSBVUkwgYW5kIHJldHVybiBpdHMgY29tcG9uZW50cy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcclxuICAgKi9cclxuXHJcbiAgVXJsLnBhcnNlID0gZnVuY3Rpb24gKHVybCkge1xyXG5cclxuICAgICAgaWYgKGllKSB7XHJcbiAgICAgICAgICBlbC5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgdXJsID0gZWwuaHJlZjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWwuaHJlZiA9IHVybDtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBocmVmOiBlbC5ocmVmLFxyXG4gICAgICAgICAgcHJvdG9jb2w6IGVsLnByb3RvY29sID8gZWwucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcclxuICAgICAgICAgIHBvcnQ6IGVsLnBvcnQsXHJcbiAgICAgICAgICBob3N0OiBlbC5ob3N0LFxyXG4gICAgICAgICAgaG9zdG5hbWU6IGVsLmhvc3RuYW1lLFxyXG4gICAgICAgICAgcGF0aG5hbWU6IGVsLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nID8gZWwucGF0aG5hbWUgOiAnLycgKyBlbC5wYXRobmFtZSxcclxuICAgICAgICAgIHNlYXJjaDogZWwuc2VhcmNoID8gZWwuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcclxuICAgICAgICAgIGhhc2g6IGVsLmhhc2ggPyBlbC5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJydcclxuICAgICAgfTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBmYWN0b3J5KGhhbmRsZXIsIG5leHQsIHZtKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh2bSwgb3B0aW9ucywgbmV4dCk7XHJcbiAgICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXJpYWxpemUocGFyYW1zLCBvYmosIHNjb3BlKSB7XHJcblxyXG4gICAgICB2YXIgYXJyYXkgPSBpc0FycmF5KG9iaiksXHJcbiAgICAgICAgICBwbGFpbiA9IGlzUGxhaW5PYmplY3Qob2JqKSxcclxuICAgICAgICAgIGhhc2g7XHJcblxyXG4gICAgICBlYWNoKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuXHJcbiAgICAgICAgICBoYXNoID0gaXNPYmplY3QodmFsdWUpIHx8IGlzQXJyYXkodmFsdWUpO1xyXG5cclxuICAgICAgICAgIGlmIChzY29wZSkge1xyXG4gICAgICAgICAgICAgIGtleSA9IHNjb3BlICsgJ1snICsgKHBsYWluIHx8IGhhc2ggPyBrZXkgOiAnJykgKyAnXSc7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKCFzY29wZSAmJiBhcnJheSkge1xyXG4gICAgICAgICAgICAgIHBhcmFtcy5hZGQodmFsdWUubmFtZSwgdmFsdWUudmFsdWUpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNoKSB7XHJcbiAgICAgICAgICAgICAgc2VyaWFsaXplKHBhcmFtcywgdmFsdWUsIGtleSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHBhcmFtcy5hZGQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUHJvbWlzZXMvQSsgcG9seWZpbGwgdjEuMS40IChodHRwczovL2dpdGh1Yi5jb20vYnJhbXN0ZWluL3Byb21pcylcclxuICAgKi9cclxuXHJcbiAgdmFyIFJFU09MVkVEID0gMDtcclxuICB2YXIgUkVKRUNURUQgPSAxO1xyXG4gIHZhciBQRU5ESU5HID0gMjtcclxuXHJcbiAgZnVuY3Rpb24gUHJvbWlzZSQyKGV4ZWN1dG9yKSB7XHJcblxyXG4gICAgICB0aGlzLnN0YXRlID0gUEVORElORztcclxuICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy5kZWZlcnJlZCA9IFtdO1xyXG5cclxuICAgICAgdmFyIHByb21pc2UgPSB0aGlzO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAgIGV4ZWN1dG9yKGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHgpO1xyXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICBwcm9taXNlLnJlamVjdChyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBwcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgUHJvbWlzZSQyLnJlamVjdCA9IGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQyKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgIHJlamVjdChyKTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgUHJvbWlzZSQyLnJlc29sdmUgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICByZXNvbHZlKHgpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICBQcm9taXNlJDIuYWxsID0gZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQyKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgIHZhciBjb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgICAgaWYgKGl0ZXJhYmxlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiByZXNvbHZlcihpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHg7XHJcbiAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IGl0ZXJhYmxlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhYmxlLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgUHJvbWlzZSQyLnJlc29sdmUoaXRlcmFibGVbaV0pLnRoZW4ocmVzb2x2ZXIoaSksIHJlamVjdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIFByb21pc2UkMi5yYWNlID0gZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhYmxlLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgUHJvbWlzZSQyLnJlc29sdmUoaXRlcmFibGVbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHAkMSA9IFByb21pc2UkMi5wcm90b3R5cGU7XHJcblxyXG4gIHAkMS5yZXNvbHZlID0gZnVuY3Rpb24gcmVzb2x2ZSh4KSB7XHJcbiAgICAgIHZhciBwcm9taXNlID0gdGhpcztcclxuXHJcbiAgICAgIGlmIChwcm9taXNlLnN0YXRlID09PSBQRU5ESU5HKSB7XHJcbiAgICAgICAgICBpZiAoeCA9PT0gcHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2Ugc2V0dGxlZCB3aXRoIGl0c2VsZi4nKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgY2FsbGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICB2YXIgdGhlbiA9IHggJiYgeFsndGhlbiddO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoeCAhPT0gbnVsbCAmJiAodHlwZW9mIHggPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHgpKSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHgsIGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSh4KTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVqZWN0KHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBwcm9taXNlLnN0YXRlID0gUkVTT0xWRUQ7XHJcbiAgICAgICAgICBwcm9taXNlLnZhbHVlID0geDtcclxuICAgICAgICAgIHByb21pc2Uubm90aWZ5KCk7XHJcbiAgICAgIH1cclxuICB9O1xyXG5cclxuICBwJDEucmVqZWN0ID0gZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xyXG4gICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XHJcblxyXG4gICAgICBpZiAocHJvbWlzZS5zdGF0ZSA9PT0gUEVORElORykge1xyXG4gICAgICAgICAgaWYgKHJlYXNvbiA9PT0gcHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2Ugc2V0dGxlZCB3aXRoIGl0c2VsZi4nKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBwcm9taXNlLnN0YXRlID0gUkVKRUNURUQ7XHJcbiAgICAgICAgICBwcm9taXNlLnZhbHVlID0gcmVhc29uO1xyXG4gICAgICAgICAgcHJvbWlzZS5ub3RpZnkoKTtcclxuICAgICAgfVxyXG4gIH07XHJcblxyXG4gIHAkMS5ub3RpZnkgPSBmdW5jdGlvbiBub3RpZnkoKSB7XHJcbiAgICAgIHZhciBwcm9taXNlID0gdGhpcztcclxuXHJcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChwcm9taXNlLnN0YXRlICE9PSBQRU5ESU5HKSB7XHJcbiAgICAgICAgICAgICAgd2hpbGUgKHByb21pc2UuZGVmZXJyZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IHByb21pc2UuZGVmZXJyZWQuc2hpZnQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZWQgPSBkZWZlcnJlZFswXSxcclxuICAgICAgICAgICAgICAgICAgICAgIG9uUmVqZWN0ZWQgPSBkZWZlcnJlZFsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBkZWZlcnJlZFsyXSxcclxuICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCA9IGRlZmVycmVkWzNdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlLnN0YXRlID09PSBSRVNPTFZFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25SZXNvbHZlZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG9uUmVzb2x2ZWQuY2FsbCh1bmRlZmluZWQsIHByb21pc2UudmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvbWlzZS5zdGF0ZSA9PT0gUkVKRUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvblJlamVjdGVkLmNhbGwodW5kZWZpbmVkLCBwcm9taXNlLnZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICBwJDEudGhlbiA9IGZ1bmN0aW9uIHRoZW4ob25SZXNvbHZlZCwgb25SZWplY3RlZCkge1xyXG4gICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICBwcm9taXNlLmRlZmVycmVkLnB1c2goW29uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdF0pO1xyXG4gICAgICAgICAgcHJvbWlzZS5ub3RpZnkoKTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcCQxLmNhdGNoID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpO1xyXG4gIH07XHJcblxyXG4gIHZhciBQcm9taXNlT2JqID0gd2luZG93LlByb21pc2UgfHwgUHJvbWlzZSQyO1xyXG5cclxuICBmdW5jdGlvbiBQcm9taXNlJDEoZXhlY3V0b3IsIGNvbnRleHQpIHtcclxuXHJcbiAgICAgIGlmIChleGVjdXRvciBpbnN0YW5jZW9mIFByb21pc2VPYmopIHtcclxuICAgICAgICAgIHRoaXMucHJvbWlzZSA9IGV4ZWN1dG9yO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2VPYmooZXhlY3V0b3IuYmluZChjb250ZXh0KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBQcm9taXNlJDEuYWxsID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBjb250ZXh0KSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKFByb21pc2VPYmouYWxsKGl0ZXJhYmxlKSwgY29udGV4dCk7XHJcbiAgfTtcclxuXHJcbiAgUHJvbWlzZSQxLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUsIGNvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoUHJvbWlzZU9iai5yZXNvbHZlKHZhbHVlKSwgY29udGV4dCk7XHJcbiAgfTtcclxuXHJcbiAgUHJvbWlzZSQxLnJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24sIGNvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoUHJvbWlzZU9iai5yZWplY3QocmVhc29uKSwgY29udGV4dCk7XHJcbiAgfTtcclxuXHJcbiAgUHJvbWlzZSQxLnJhY2UgPSBmdW5jdGlvbiAoaXRlcmFibGUsIGNvbnRleHQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoUHJvbWlzZU9iai5yYWNlKGl0ZXJhYmxlKSwgY29udGV4dCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIHAgPSBQcm9taXNlJDEucHJvdG90eXBlO1xyXG5cclxuICBwLmJpbmQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICBwLnRoZW4gPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCkge1xyXG5cclxuICAgICAgaWYgKGZ1bGZpbGxlZCAmJiBmdWxmaWxsZWQuYmluZCAmJiB0aGlzLmNvbnRleHQpIHtcclxuICAgICAgICAgIGZ1bGZpbGxlZCA9IGZ1bGZpbGxlZC5iaW5kKHRoaXMuY29udGV4dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyZWplY3RlZCAmJiByZWplY3RlZC5iaW5kICYmIHRoaXMuY29udGV4dCkge1xyXG4gICAgICAgICAgcmVqZWN0ZWQgPSByZWplY3RlZC5iaW5kKHRoaXMuY29udGV4dCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMucHJvbWlzZS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgcC5jYXRjaCA9IGZ1bmN0aW9uIChyZWplY3RlZCkge1xyXG5cclxuICAgICAgaWYgKHJlamVjdGVkICYmIHJlamVjdGVkLmJpbmQgJiYgdGhpcy5jb250ZXh0KSB7XHJcbiAgICAgICAgICByZWplY3RlZCA9IHJlamVjdGVkLmJpbmQodGhpcy5jb250ZXh0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmNhdGNoKHJlamVjdGVkKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIHAuZmluYWxseSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZU9iai5yZWplY3QocmVhc29uKTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcC5zdWNjZXNzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICB3YXJuKCdUaGUgYHN1Y2Nlc3NgIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgdGhlIGB0aGVuYCBtZXRob2QgaW5zdGVhZC4nKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlKSB8fCByZXNwb25zZTtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcC5lcnJvciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG5cclxuICAgICAgd2FybignVGhlIGBlcnJvcmAgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYGNhdGNoYCBtZXRob2QgaW5zdGVhZC4nKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpcywgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZSkgfHwgcmVzcG9uc2U7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHAuYWx3YXlzID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICB3YXJuKCdUaGUgYGFsd2F5c2AgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYGZpbmFsbHlgIG1ldGhvZCBpbnN0ZWFkLicpO1xyXG5cclxuICAgICAgdmFyIGNiID0gZnVuY3Rpb24gY2IocmVzcG9uc2UpIHtcclxuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXMsIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UpIHx8IHJlc3BvbnNlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMudGhlbihjYiwgY2IpO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIHhkckNsaWVudCAocmVxdWVzdCkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG5cclxuICAgICAgICAgIHZhciB4ZHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKSxcclxuICAgICAgICAgICAgICByZXNwb25zZSA9IHsgcmVxdWVzdDogcmVxdWVzdCB9LFxyXG4gICAgICAgICAgICAgIGhhbmRsZXI7XHJcblxyXG4gICAgICAgICAgcmVxdWVzdC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgeGRyLmFib3J0KCk7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHhkci5vcGVuKHJlcXVlc3QubWV0aG9kLCBVcmwocmVxdWVzdCksIHRydWUpO1xyXG5cclxuICAgICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSB4ZHIucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IHhkci5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzVGV4dCA9IHhkci5zdGF0dXNUZXh0IHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgeGRyLnRpbWVvdXQgPSAwO1xyXG4gICAgICAgICAgeGRyLm9ubG9hZCA9IGhhbmRsZXI7XHJcbiAgICAgICAgICB4ZHIub25hYm9ydCA9IGhhbmRsZXI7XHJcbiAgICAgICAgICB4ZHIub25lcnJvciA9IGhhbmRsZXI7XHJcbiAgICAgICAgICB4ZHIub250aW1lb3V0ID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgICB4ZHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgICAgICAgIHhkci5zZW5kKHJlcXVlc3QuZGF0YSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmFyIG9yaWdpblVybCA9IFVybC5wYXJzZShsb2NhdGlvbi5ocmVmKTtcclxuICB2YXIgc3VwcG9ydENvcnMgPSAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgdmFyIGV4cG9ydHMkMSA9IHtcclxuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xyXG5cclxuICAgICAgICAgIGlmIChfcmVxdWVzdC5jcm9zc09yaWdpbiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIF9yZXF1ZXN0LmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW4oX3JlcXVlc3QpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChfcmVxdWVzdC5jcm9zc09yaWdpbikge1xyXG5cclxuICAgICAgICAgICAgICBpZiAoIXN1cHBvcnRDb3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmNsaWVudCA9IHhkckNsaWVudDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIF9yZXF1ZXN0LmVtdWxhdGVIVFRQID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIF9yZXF1ZXN0O1xyXG4gICAgICB9XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gY3Jvc3NPcmlnaW4ocmVxdWVzdCkge1xyXG5cclxuICAgICAgdmFyIHJlcXVlc3RVcmwgPSBVcmwucGFyc2UoVXJsKHJlcXVlc3QpKTtcclxuXHJcbiAgICAgIHJldHVybiByZXF1ZXN0VXJsLnByb3RvY29sICE9PSBvcmlnaW5VcmwucHJvdG9jb2wgfHwgcmVxdWVzdFVybC5ob3N0ICE9PSBvcmlnaW5VcmwuaG9zdDtcclxuICB9XHJcblxyXG4gIHZhciBleHBvcnRzJDIgPSB7XHJcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3QoX3JlcXVlc3QpIHtcclxuXHJcbiAgICAgICAgICBpZiAoX3JlcXVlc3QuZW11bGF0ZUpTT04gJiYgaXNQbGFpbk9iamVjdChfcmVxdWVzdC5kYXRhKSkge1xyXG4gICAgICAgICAgICAgIF9yZXF1ZXN0LmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XHJcbiAgICAgICAgICAgICAgX3JlcXVlc3QuZGF0YSA9IFVybC5wYXJhbXMoX3JlcXVlc3QuZGF0YSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KF9yZXF1ZXN0LmRhdGEpICYmIC9Gb3JtRGF0YS9pLnRlc3QoX3JlcXVlc3QuZGF0YS50b1N0cmluZygpKSkge1xyXG4gICAgICAgICAgICAgIGRlbGV0ZSBfcmVxdWVzdC5oZWFkZXJzWydDb250ZW50LVR5cGUnXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChfcmVxdWVzdC5kYXRhKSkge1xyXG4gICAgICAgICAgICAgIF9yZXF1ZXN0LmRhdGEgPSBKU09OLnN0cmluZ2lmeShfcmVxdWVzdC5kYXRhKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gX3JlcXVlc3Q7XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiByZXNwb25zZShfcmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIF9yZXNwb25zZS5kYXRhID0gSlNPTi5wYXJzZShfcmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgICAgICAgIHJldHVybiBfcmVzcG9uc2U7XHJcbiAgICAgIH1cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBqc29ucENsaWVudCAocmVxdWVzdCkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG5cclxuICAgICAgICAgIHZhciBjYWxsYmFjayA9ICdfanNvbnAnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLFxyXG4gICAgICAgICAgICAgIHJlc3BvbnNlID0geyByZXF1ZXN0OiByZXF1ZXN0LCBkYXRhOiBudWxsIH0sXHJcbiAgICAgICAgICAgICAgaGFuZGxlcixcclxuICAgICAgICAgICAgICBzY3JpcHQ7XHJcblxyXG4gICAgICAgICAgcmVxdWVzdC5wYXJhbXNbcmVxdWVzdC5qc29ucF0gPSBjYWxsYmFjaztcclxuICAgICAgICAgIHJlcXVlc3QuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIGhhbmRsZXIoeyB0eXBlOiAnY2FuY2VsJyB9KTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgICBzY3JpcHQuc3JjID0gVXJsKHJlcXVlc3QpO1xyXG4gICAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgd2luZG93W2NhbGxiYWNrXSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnbG9hZCcgJiYgcmVzcG9uc2UuZGF0YSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSAyMDA7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50eXBlID09PSAnZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IDQwNDtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tdO1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGhhbmRsZXI7XHJcbiAgICAgICAgICBzY3JpcHQub25lcnJvciA9IGhhbmRsZXI7XHJcblxyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciBleHBvcnRzJDMgPSB7XHJcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3QoX3JlcXVlc3QpIHtcclxuXHJcbiAgICAgICAgICBpZiAoX3JlcXVlc3QubWV0aG9kID09ICdKU09OUCcpIHtcclxuICAgICAgICAgICAgICBfcmVxdWVzdC5jbGllbnQgPSBqc29ucENsaWVudDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gX3JlcXVlc3Q7XHJcbiAgICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgZXhwb3J0cyQ0ID0ge1xyXG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiByZXF1ZXN0KF9yZXF1ZXN0KSB7XHJcblxyXG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oX3JlcXVlc3QuYmVmb3JlU2VuZCkpIHtcclxuICAgICAgICAgICAgICBfcmVxdWVzdC5iZWZvcmVTZW5kLmNhbGwodGhpcywgX3JlcXVlc3QpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBfcmVxdWVzdDtcclxuICAgICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEhUVFAgbWV0aG9kIG92ZXJyaWRlIEludGVyY2VwdG9yLlxyXG4gICAqL1xyXG5cclxuICB2YXIgZXhwb3J0cyQ1ID0ge1xyXG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiByZXF1ZXN0KF9yZXF1ZXN0KSB7XHJcblxyXG4gICAgICAgICAgaWYgKF9yZXF1ZXN0LmVtdWxhdGVIVFRQICYmIC9eKFBVVHxQQVRDSHxERUxFVEUpJC9pLnRlc3QoX3JlcXVlc3QubWV0aG9kKSkge1xyXG4gICAgICAgICAgICAgIF9yZXF1ZXN0LmhlYWRlcnNbJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnXSA9IF9yZXF1ZXN0Lm1ldGhvZDtcclxuICAgICAgICAgICAgICBfcmVxdWVzdC5tZXRob2QgPSAnUE9TVCc7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIF9yZXF1ZXN0O1xyXG4gICAgICB9XHJcbiAgfTtcclxuXHJcbiAgdmFyIGV4cG9ydHMkNiA9IHtcclxuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xyXG5cclxuICAgICAgICAgIF9yZXF1ZXN0Lm1ldGhvZCA9IF9yZXF1ZXN0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgX3JlcXVlc3QuaGVhZGVycyA9IGV4dGVuZCh7fSwgSHR0cC5oZWFkZXJzLmNvbW1vbiwgIV9yZXF1ZXN0LmNyb3NzT3JpZ2luID8gSHR0cC5oZWFkZXJzLmN1c3RvbSA6IHt9LCBIdHRwLmhlYWRlcnNbX3JlcXVlc3QubWV0aG9kLnRvTG93ZXJDYXNlKCldLCBfcmVxdWVzdC5oZWFkZXJzKTtcclxuXHJcbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChfcmVxdWVzdC5kYXRhKSAmJiAvXihHRVR8SlNPTlApJC9pLnRlc3QoX3JlcXVlc3QubWV0aG9kKSkge1xyXG4gICAgICAgICAgICAgIGV4dGVuZChfcmVxdWVzdC5wYXJhbXMsIF9yZXF1ZXN0LmRhdGEpO1xyXG4gICAgICAgICAgICAgIGRlbGV0ZSBfcmVxdWVzdC5kYXRhO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBfcmVxdWVzdDtcclxuICAgICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFRpbWVvdXQgSW50ZXJjZXB0b3IuXHJcbiAgICovXHJcblxyXG4gIHZhciBleHBvcnRzJDcgPSBmdW5jdGlvbiBleHBvcnRzKCkge1xyXG5cclxuICAgICAgdmFyIHRpbWVvdXQ7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX3JlcXVlc3QudGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdC5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgfSwgX3JlcXVlc3QudGltZW91dCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gX3JlcXVlc3Q7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIHJlc3BvbnNlKF9yZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBfcmVzcG9uc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gaW50ZXJjZXB0b3IgKGhhbmRsZXIsIHZtKSB7XHJcblxyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGNsaWVudCkge1xyXG5cclxuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgICAgaGFuZGxlciA9IGhhbmRsZXIuY2FsbCh2bSwgUHJvbWlzZSQxKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlci5yZXF1ZXN0KSkge1xyXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gaGFuZGxlci5yZXF1ZXN0LmNhbGwodm0sIHJlcXVlc3QpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHdoZW4ocmVxdWVzdCwgZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHdoZW4oY2xpZW50KHJlcXVlc3QpLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyLnJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gaGFuZGxlci5yZXNwb25zZS5jYWxsKHZtLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH07XHJcbiAgICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB3aGVuKHZhbHVlLCBmdWxmaWxsZWQsIHJlamVjdGVkKSB7XHJcblxyXG4gICAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKHZhbHVlKTtcclxuXHJcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB4aHJDbGllbnQgKHJlcXVlc3QpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuXHJcbiAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7IHJlcXVlc3Q6IHJlcXVlc3QgfSxcclxuICAgICAgICAgICAgICBoYW5kbGVyO1xyXG5cclxuICAgICAgICAgIHJlcXVlc3QuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgVXJsKHJlcXVlc3QpLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IHhoci5zdGF0dXMgPT09IDEyMjMgPyAyMDQgOiB4aHIuc3RhdHVzOyAvLyBJRTkgc3RhdHVzIGJ1Z1xyXG4gICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1c1RleHQgPSB0cmltKHhoci5zdGF0dXNUZXh0IHx8ICcnKTtcclxuICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO1xyXG5cclxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgeGhyLnRpbWVvdXQgPSAwO1xyXG4gICAgICAgICAgeGhyLm9ubG9hZCA9IGhhbmRsZXI7XHJcbiAgICAgICAgICB4aHIub25hYm9ydCA9IGhhbmRsZXI7XHJcbiAgICAgICAgICB4aHIub25lcnJvciA9IGhhbmRsZXI7XHJcbiAgICAgICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcXVlc3QueGhyKSkge1xyXG4gICAgICAgICAgICAgIGV4dGVuZCh4aHIsIHJlcXVlc3QueGhyKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXF1ZXN0LnVwbG9hZCkpIHtcclxuICAgICAgICAgICAgICBleHRlbmQoeGhyLnVwbG9hZCwgcmVxdWVzdC51cGxvYWQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGVhY2gocmVxdWVzdC5oZWFkZXJzIHx8IHt9LCBmdW5jdGlvbiAodmFsdWUsIGhlYWRlcikge1xyXG4gICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgdmFsdWUpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgeGhyLnNlbmQocmVxdWVzdC5kYXRhKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBDbGllbnQgKHJlcXVlc3QpIHtcclxuXHJcbiAgICAgIHZhciByZXNwb25zZSA9IChyZXF1ZXN0LmNsaWVudCB8fCB4aHJDbGllbnQpKHJlcXVlc3QpO1xyXG5cclxuICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKHJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgIGlmIChyZXNwb25zZS5oZWFkZXJzKSB7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gcGFyc2VIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xyXG5cclxuICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVyc1t0b0xvd2VyKG5hbWUpXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXNwb25zZS5vayA9IHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwO1xyXG5cclxuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoc3RyKSB7XHJcblxyXG4gICAgICB2YXIgaGVhZGVycyA9IHt9LFxyXG4gICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgaTtcclxuXHJcbiAgICAgIGlmIChpc1N0cmluZyhzdHIpKSB7XHJcbiAgICAgICAgICBlYWNoKHN0ci5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIChyb3cpIHtcclxuXHJcbiAgICAgICAgICAgICAgaSA9IHJvdy5pbmRleE9mKCc6Jyk7XHJcbiAgICAgICAgICAgICAgbmFtZSA9IHRyaW0odG9Mb3dlcihyb3cuc2xpY2UoMCwgaSkpKTtcclxuICAgICAgICAgICAgICB2YWx1ZSA9IHRyaW0ocm93LnNsaWNlKGkgKyAxKSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChoZWFkZXJzW25hbWVdKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShoZWFkZXJzW25hbWVdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tuYW1lXS5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbbmFtZV0gPSBbaGVhZGVyc1tuYW1lXSwgdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGhlYWRlcnNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXJ2aWNlIGZvciBzZW5kaW5nIG5ldHdvcmsgcmVxdWVzdHMuXHJcbiAgICovXHJcblxyXG4gIHZhciBqc29uVHlwZSA9IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9O1xyXG5cclxuICBmdW5jdGlvbiBIdHRwKHVybCwgb3B0aW9ucykge1xyXG5cclxuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IHt9LFxyXG4gICAgICAgICAgY2xpZW50ID0gQ2xpZW50LFxyXG4gICAgICAgICAgcmVxdWVzdCxcclxuICAgICAgICAgIHByb21pc2U7XHJcblxyXG4gICAgICBIdHRwLmludGVyY2VwdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICBjbGllbnQgPSBpbnRlcmNlcHRvcihoYW5kbGVyLCBzZWxmLiR2bSkoY2xpZW50KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBvcHRpb25zID0gaXNPYmplY3QodXJsKSA/IHVybCA6IGV4dGVuZCh7IHVybDogdXJsIH0sIG9wdGlvbnMpO1xyXG4gICAgICByZXF1ZXN0ID0gbWVyZ2Uoe30sIEh0dHAub3B0aW9ucywgc2VsZi4kb3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgIHByb21pc2UgPSBjbGllbnQocmVxdWVzdCkuYmluZChzZWxmLiR2bSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uub2sgPyByZXNwb25zZSA6IFByb21pc2UkMS5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgIGVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZSQxLnJlamVjdChyZXNwb25zZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHJlcXVlc3Quc3VjY2Vzcykge1xyXG4gICAgICAgICAgcHJvbWlzZS5zdWNjZXNzKHJlcXVlc3Quc3VjY2Vzcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyZXF1ZXN0LmVycm9yKSB7XHJcbiAgICAgICAgICBwcm9taXNlLmVycm9yKHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcHJvbWlzZTtcclxuICB9XHJcblxyXG4gIEh0dHAub3B0aW9ucyA9IHtcclxuICAgICAgbWV0aG9kOiAnZ2V0JyxcclxuICAgICAgZGF0YTogJycsXHJcbiAgICAgIHBhcmFtczoge30sXHJcbiAgICAgIGhlYWRlcnM6IHt9LFxyXG4gICAgICB4aHI6IG51bGwsXHJcbiAgICAgIHVwbG9hZDogbnVsbCxcclxuICAgICAganNvbnA6ICdjYWxsYmFjaycsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IG51bGwsXHJcbiAgICAgIGNyb3NzT3JpZ2luOiBudWxsLFxyXG4gICAgICBlbXVsYXRlSFRUUDogZmFsc2UsXHJcbiAgICAgIGVtdWxhdGVKU09OOiBmYWxzZSxcclxuICAgICAgdGltZW91dDogMFxyXG4gIH07XHJcblxyXG4gIEh0dHAuaGVhZGVycyA9IHtcclxuICAgICAgcHV0OiBqc29uVHlwZSxcclxuICAgICAgcG9zdDoganNvblR5cGUsXHJcbiAgICAgIHBhdGNoOiBqc29uVHlwZSxcclxuICAgICAgZGVsZXRlOiBqc29uVHlwZSxcclxuICAgICAgY29tbW9uOiB7ICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJyB9LFxyXG4gICAgICBjdXN0b206IHsgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnIH1cclxuICB9O1xyXG5cclxuICBIdHRwLmludGVyY2VwdG9ycyA9IFtleHBvcnRzJDQsIGV4cG9ydHMkNywgZXhwb3J0cyQzLCBleHBvcnRzJDUsIGV4cG9ydHMkMiwgZXhwb3J0cyQ2LCBleHBvcnRzJDFdO1xyXG5cclxuICBbJ2dldCcsICdwdXQnLCAncG9zdCcsICdwYXRjaCcsICdkZWxldGUnLCAnanNvbnAnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcclxuXHJcbiAgICAgIEh0dHBbbWV0aG9kXSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIHN1Y2Nlc3MsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkYXRhKSkge1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMgPSBzdWNjZXNzO1xyXG4gICAgICAgICAgICAgIHN1Y2Nlc3MgPSBkYXRhO1xyXG4gICAgICAgICAgICAgIGRhdGEgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGlzT2JqZWN0KHN1Y2Nlc3MpKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9ucyA9IHN1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgc3VjY2VzcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gdGhpcyh1cmwsIGV4dGVuZCh7IG1ldGhvZDogbWV0aG9kLCBkYXRhOiBkYXRhLCBzdWNjZXNzOiBzdWNjZXNzIH0sIG9wdGlvbnMpKTtcclxuICAgICAgfTtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gUmVzb3VyY2UodXJsLCBwYXJhbXMsIGFjdGlvbnMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCB7fSxcclxuICAgICAgICAgIHJlc291cmNlID0ge307XHJcblxyXG4gICAgICBhY3Rpb25zID0gZXh0ZW5kKHt9LCBSZXNvdXJjZS5hY3Rpb25zLCBhY3Rpb25zKTtcclxuXHJcbiAgICAgIGVhY2goYWN0aW9ucywgZnVuY3Rpb24gKGFjdGlvbiwgbmFtZSkge1xyXG5cclxuICAgICAgICAgIGFjdGlvbiA9IG1lcmdlKHsgdXJsOiB1cmwsIHBhcmFtczogcGFyYW1zIHx8IHt9IH0sIG9wdGlvbnMsIGFjdGlvbik7XHJcblxyXG4gICAgICAgICAgcmVzb3VyY2VbbmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChzZWxmLiRodHRwIHx8IEh0dHApKG9wdHMoYWN0aW9uLCBhcmd1bWVudHMpKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb3B0cyhhY3Rpb24sIGFyZ3MpIHtcclxuXHJcbiAgICAgIHZhciBvcHRpb25zID0gZXh0ZW5kKHt9LCBhY3Rpb24pLFxyXG4gICAgICAgICAgcGFyYW1zID0ge30sXHJcbiAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgc3VjY2VzcyxcclxuICAgICAgICAgIGVycm9yO1xyXG5cclxuICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgIGNhc2UgNDpcclxuXHJcbiAgICAgICAgICAgICAgZXJyb3IgPSBhcmdzWzNdO1xyXG4gICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzJdO1xyXG5cclxuICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIGNhc2UgMjpcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYXJnc1sxXSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGFyZ3NbMF0pKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGFyZ3NbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IGFyZ3NbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzFdO1xyXG4gICAgICAgICAgICAgICAgICBlcnJvciA9IGFyZ3NbMl07XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ3NbMF07XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmdzWzFdO1xyXG4gICAgICAgICAgICAgICAgICBzdWNjZXNzID0gYXJnc1syXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjYXNlIDE6XHJcblxyXG4gICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGFyZ3NbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzBdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoL14oUE9TVHxQVVR8UEFUQ0gpJC9pLnRlc3Qob3B0aW9ucy5tZXRob2QpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmdzWzBdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ3NbMF07XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlIDA6XHJcblxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGRlZmF1bHQ6XHJcblxyXG4gICAgICAgICAgICAgIHRocm93ICdFeHBlY3RlZCB1cCB0byA0IGFyZ3VtZW50cyBbcGFyYW1zLCBkYXRhLCBzdWNjZXNzLCBlcnJvcl0sIGdvdCAnICsgYXJncy5sZW5ndGggKyAnIGFyZ3VtZW50cyc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7XHJcbiAgICAgIG9wdGlvbnMucGFyYW1zID0gZXh0ZW5kKHt9LCBvcHRpb25zLnBhcmFtcywgcGFyYW1zKTtcclxuXHJcbiAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBzdWNjZXNzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIG9wdGlvbnMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBSZXNvdXJjZS5hY3Rpb25zID0ge1xyXG5cclxuICAgICAgZ2V0OiB7IG1ldGhvZDogJ0dFVCcgfSxcclxuICAgICAgc2F2ZTogeyBtZXRob2Q6ICdQT1NUJyB9LFxyXG4gICAgICBxdWVyeTogeyBtZXRob2Q6ICdHRVQnIH0sXHJcbiAgICAgIHVwZGF0ZTogeyBtZXRob2Q6ICdQVVQnIH0sXHJcbiAgICAgIHJlbW92ZTogeyBtZXRob2Q6ICdERUxFVEUnIH0sXHJcbiAgICAgIGRlbGV0ZTogeyBtZXRob2Q6ICdERUxFVEUnIH1cclxuXHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gcGx1Z2luKFZ1ZSkge1xyXG5cclxuICAgICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgVXRpbChWdWUpO1xyXG5cclxuICAgICAgVnVlLnVybCA9IFVybDtcclxuICAgICAgVnVlLmh0dHAgPSBIdHRwO1xyXG4gICAgICBWdWUucmVzb3VyY2UgPSBSZXNvdXJjZTtcclxuICAgICAgVnVlLlByb21pc2UgPSBQcm9taXNlJDE7XHJcblxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWdWUucHJvdG90eXBlLCB7XHJcblxyXG4gICAgICAgICAgJHVybDoge1xyXG4gICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucyhWdWUudXJsLCB0aGlzLCB0aGlzLiRvcHRpb25zLnVybCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAkaHR0cDoge1xyXG4gICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucyhWdWUuaHR0cCwgdGhpcywgdGhpcy4kb3B0aW9ucy5odHRwKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICRyZXNvdXJjZToge1xyXG4gICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gVnVlLnJlc291cmNlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAkcHJvbWlzZToge1xyXG4gICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChleGVjdXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWdWUuUHJvbWlzZShleGVjdXRvciwgX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcclxuICAgICAgd2luZG93LlZ1ZS51c2UocGx1Z2luKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBwbHVnaW47XHJcblxyXG59KSk7IiwiLyohXHJcbiAqIHZ1ZS12YWxpZGF0b3IgdjIuMS4zXHJcbiAqIChjKSAyMDE2IGthenV5YSBrYXdhZ3VjaGlcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG4gKi9cclxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XHJcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcclxuICAoZ2xvYmFsLlZ1ZVZhbGlkYXRvciA9IGZhY3RvcnkoKSk7XHJcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcclxuICBiYWJlbEhlbHBlcnMudHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcclxuICB9IDogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcclxuICB9O1xyXG5cclxuICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XHJcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcclxuICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XHJcbiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcclxuICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcclxuICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XHJcbiAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcclxuICAgIH07XHJcbiAgfSgpO1xyXG5cclxuICBiYWJlbEhlbHBlcnMuaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcclxuICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XHJcbiAgICAgIGNvbnN0cnVjdG9yOiB7XHJcbiAgICAgICAgdmFsdWU6IHN1YkNsYXNzLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcclxuICB9O1xyXG5cclxuICBiYWJlbEhlbHBlcnMucG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XHJcbiAgICBpZiAoIXNlbGYpIHtcclxuICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xyXG4gIH07XHJcblxyXG4gIGJhYmVsSGVscGVycztcclxuXHJcbiAgLyoqXHJcbiAgICogVXRpbHRpZXNcclxuICAgKi9cclxuXHJcbiAgLy8gZXhwb3J0IGRlZmF1bHQgZm9yIGhvbGRpbmcgdGhlIFZ1ZSByZWZlcmVuY2VcclxuICB2YXIgZXhwb3J0cyQxID0ge307XHJcbiAgLyoqXHJcbiAgICogd2FyblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xyXG4gICAqIEBwYXJhbSB7RXJyb3J9IFtlcnJdXHJcbiAgICpcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gd2Fybihtc2csIGVycikge1xyXG4gICAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW3Z1ZS12YWxpZGF0b3JdICcgKyBtc2cpO1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGVtcHR5XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdGFyZ2V0XHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gZW1wdHkodGFyZ2V0KSB7XHJcbiAgICBpZiAodGFyZ2V0ID09PSBudWxsIHx8IHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcclxuICAgICAgaWYgKHRhcmdldC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0YXJnZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZXhwb3J0cyQxLlZ1ZS51dGlsLmlzUGxhaW5PYmplY3QodGFyZ2V0KSkge1xyXG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKGV4cG9ydHMkMS5WdWUudXRpbC5oYXNPd24odGFyZ2V0LCBrZXkpKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBlYWNoXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdGFyZ2V0XHJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3JcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHRdXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIGVhY2godGFyZ2V0LCBpdGVyYXRvciwgY29udGV4dCkge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCB8fCB0YXJnZXRbaV0sIHRhcmdldFtpXSwgaSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZXhwb3J0cyQxLlZ1ZS51dGlsLmlzUGxhaW5PYmplY3QodGFyZ2V0KSkge1xyXG4gICAgICB2YXIgaGFzT3duID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmhhc093bjtcclxuICAgICAgZm9yICh2YXIga2V5IGluIHRhcmdldCkge1xyXG4gICAgICAgIGlmIChoYXNPd24odGFyZ2V0LCBrZXkpKSB7XHJcbiAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQgfHwgdGFyZ2V0W2tleV0sIHRhcmdldFtrZXldLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogcHVsbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cclxuICAgKiBAcmV0dXJuIHtPYmplY3R8bnVsbH1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcHVsbChhcnIsIGl0ZW0pIHtcclxuICAgIHZhciBpbmRleCA9IGV4cG9ydHMkMS5WdWUudXRpbC5pbmRleE9mKGFyciwgaXRlbSk7XHJcbiAgICByZXR1cm4gfmluZGV4ID8gYXJyLnNwbGljZShpbmRleCwgMSkgOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogdHJpZ2dlclxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnc11cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gdHJpZ2dlcihlbCwgZXZlbnQsIGFyZ3MpIHtcclxuICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcclxuICAgIGUuaW5pdEV2ZW50KGV2ZW50LCB0cnVlLCBmYWxzZSk7XHJcblxyXG4gICAgaWYgKGFyZ3MpIHtcclxuICAgICAgZm9yICh2YXIgcHJvcCBpbiBhcmdzKSB7XHJcbiAgICAgICAgZVtwcm9wXSA9IGFyZ3NbcHJvcF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEdWUgdG8gRmlyZWZveCBidWcsIGV2ZW50cyBmaXJlZCBvbiBkaXNhYmxlZFxyXG4gICAgLy8gbm9uLWF0dGFjaGVkIGZvcm0gY29udHJvbHMgY2FuIHRocm93IGVycm9yc1xyXG4gICAgdHJ5IHtcclxuICAgICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHBcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBpc1Byb21pc2UocCkge1xyXG4gICAgcmV0dXJuIHAgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRvZ2dpbmcgY2xhc3Nlc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiB0b2dnbGVDbGFzc2VzKGVsLCBrZXksIGZuKSB7XHJcbiAgICBrZXkgPSBrZXkudHJpbSgpO1xyXG4gICAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XHJcbiAgICAgIGZuKGVsLCBrZXkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgZm4oZWwsIGtleXNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuZGFtZW50YWwgdmFsaWRhdGUgZnVuY3Rpb25zXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIHJlcXVpcmVkXHJcbiAgICpcclxuICAgKiBUaGlzIGZ1bmN0aW9uIHZhbGlkYXRlIHdoZXRoZXIgdGhlIHZhbHVlIGhhcyBiZWVuIGZpbGxlZCBvdXQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbFxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHJlcXVpcmVkKHZhbCkge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG4gICAgICBpZiAodmFsLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIHZhciB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWwubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICB2YWxpZCA9IHJlcXVpcmVkKHZhbFtpXSk7XHJcbiAgICAgICAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdib29sZWFuJykge1xyXG4gICAgICByZXR1cm4gdmFsO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gdmFsLmxlbmd0aCA+IDA7XHJcbiAgICB9IGVsc2UgaWYgKHZhbCAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IGJhYmVsSGVscGVycy50eXBlb2YodmFsKSkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA+IDA7XHJcbiAgICB9IGVsc2UgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBwYXR0ZXJuXHJcbiAgICpcclxuICAgKiBUaGlzIGZ1bmN0aW9uIHZhbGlkYXRlIHdoZXRoZXIgdGhlIHZhbHVlIG1hdGNoZXMgdGhlIHJlZ2V4IHBhdHRlcm5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB2YWxcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0XHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gcGF0dGVybih2YWwsIHBhdCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbWF0Y2ggPSBwYXQubWF0Y2gobmV3IFJlZ0V4cCgnXi8oLio/KS8oW2dpbXldKikkJykpO1xyXG4gICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAobWF0Y2hbMV0sIG1hdGNoWzJdKS50ZXN0KHZhbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBtaW5sZW5ndGhcclxuICAgKlxyXG4gICAqIFRoaXMgZnVuY3Rpb24gdmFsaWRhdGUgd2hldGhlciB0aGUgbWluaW11bSBsZW5ndGguXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gdmFsXHJcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBtaW5cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBtaW5sZW5ndGgodmFsLCBtaW4pIHtcclxuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gaXNJbnRlZ2VyKG1pbiwgMTApICYmIHZhbC5sZW5ndGggPj0gcGFyc2VJbnQobWluLCAxMCk7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG4gICAgICByZXR1cm4gdmFsLmxlbmd0aCA+PSBwYXJzZUludChtaW4sIDEwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG1heGxlbmd0aFxyXG4gICAqXHJcbiAgICogVGhpcyBmdW5jdGlvbiB2YWxpZGF0ZSB3aGV0aGVyIHRoZSBtYXhpbXVtIGxlbmd0aC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSB2YWxcclxuICAgKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IG1heFxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIG1heGxlbmd0aCh2YWwsIG1heCkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiBpc0ludGVnZXIobWF4LCAxMCkgJiYgdmFsLmxlbmd0aCA8PSBwYXJzZUludChtYXgsIDEwKTtcclxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XHJcbiAgICAgIHJldHVybiB2YWwubGVuZ3RoIDw9IHBhcnNlSW50KG1heCwgMTApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogbWluXHJcbiAgICpcclxuICAgKiBUaGlzIGZ1bmN0aW9uIHZhbGlkYXRlIHdoZXRoZXIgdGhlIG1pbmltdW0gdmFsdWUgb2YgdGhlIG51bWJlcmFibGUgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyp9IHZhbFxyXG4gICAqIEBwYXJhbSB7Kn0gYXJnIG1pbmltdW1cclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG5cclxuICBmdW5jdGlvbiBtaW4odmFsLCBhcmcpIHtcclxuICAgIHJldHVybiAhaXNOYU4oK3ZhbCkgJiYgIWlzTmFOKCthcmcpICYmICt2YWwgPj0gK2FyZztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG1heFxyXG4gICAqXHJcbiAgICogVGhpcyBmdW5jdGlvbiB2YWxpZGF0ZSB3aGV0aGVyIHRoZSBtYXhpbXVtIHZhbHVlIG9mIHRoZSBudW1iZXJhYmxlIHZhbHVlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsqfSB2YWxcclxuICAgKiBAcGFyYW0geyp9IGFyZyBtYXhpbXVtXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gbWF4KHZhbCwgYXJnKSB7XHJcbiAgICByZXR1cm4gIWlzTmFOKCt2YWwpICYmICFpc05hTigrYXJnKSAmJiArdmFsIDw9ICthcmc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBpc0ludGVnZXJcclxuICAgKlxyXG4gICAqIFRoaXMgZnVuY3Rpb24gY2hlY2sgd2hldGhlciB0aGUgdmFsdWUgb2YgdGhlIHN0cmluZyBpcyBpbnRlZ2VyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbFxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuXHJcbiAgZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbCkge1xyXG4gICAgcmV0dXJuICgvXigtP1sxLTldXFxkKnwwKSQvLnRlc3QodmFsKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG52YXIgdmFsaWRhdG9ycyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgcmVxdWlyZWQ6IHJlcXVpcmVkLFxyXG4gICAgcGF0dGVybjogcGF0dGVybixcclxuICAgIG1pbmxlbmd0aDogbWlubGVuZ3RoLFxyXG4gICAgbWF4bGVuZ3RoOiBtYXhsZW5ndGgsXHJcbiAgICBtaW46IG1pbixcclxuICAgIG1heDogbWF4XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIEFzc2V0IChWdWUpIHtcclxuICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XHJcblxyXG4gICAgLy8gc2V0IGdsb2JhbCB2YWxpZGF0b3JzIGFzc2V0XHJcbiAgICB2YXIgYXNzZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIGV4dGVuZChhc3NldHMsIHZhbGlkYXRvcnMpO1xyXG4gICAgVnVlLm9wdGlvbnMudmFsaWRhdG9ycyA9IGFzc2V0cztcclxuXHJcbiAgICAvLyBzZXQgb3B0aW9uIG1lcmdlIHN0cmF0ZWd5XHJcbiAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XHJcbiAgICBpZiAoc3RyYXRzKSB7XHJcbiAgICAgIHN0cmF0cy52YWxpZGF0b3JzID0gZnVuY3Rpb24gKHBhcmVudCwgY2hpbGQpIHtcclxuICAgICAgICBpZiAoIWNoaWxkKSB7XHJcbiAgICAgICAgICByZXR1cm4gcGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXBhcmVudCkge1xyXG4gICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgICAgICBleHRlbmQocmV0LCBwYXJlbnQpO1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjaGlsZCkge1xyXG4gICAgICAgICAgcmV0W2tleV0gPSBjaGlsZFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgb3IgcmV0cmlldmUgYSBnbG9iYWwgdmFsaWRhdG9yIGRlZmluaXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkZWZpbml0aW9uXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUudmFsaWRhdG9yID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XHJcbiAgICAgIGlmICghZGVmaW5pdGlvbikge1xyXG4gICAgICAgIHJldHVybiBWdWUub3B0aW9uc1sndmFsaWRhdG9ycyddW2lkXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBWdWUub3B0aW9uc1sndmFsaWRhdG9ycyddW2lkXSA9IGRlZmluaXRpb247XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBPdmVycmlkZSAoVnVlKSB7XHJcbiAgICAvLyBvdmVycmlkZSBfaW5pdFxyXG4gICAgdmFyIGluaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xyXG4gICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgIGlmICghdGhpcy5fdmFsaWRhdG9yTWFwcykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRvck1hcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgICB9XHJcbiAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gb3ZlcnJpZGUgX2Rlc3Ryb3lcclxuICAgIHZhciBkZXN0cm95ID0gVnVlLnByb3RvdHlwZS5fZGVzdHJveTtcclxuICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGRlc3Ryb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgdGhpcy5fdmFsaWRhdG9yTWFwcyA9IG51bGw7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgdmFyIFZBTElEQVRFX1VQREFURSA9ICdfX3Z1ZS12YWxpZGF0b3ItdmFsaWRhdGUtdXBkYXRlX18nO1xyXG4gIHZhciBQUklPUklUWV9WQUxJREFURSA9IDE2O1xyXG4gIHZhciBQUklPUklUWV9WQUxJREFURV9DTEFTUyA9IDMyO1xyXG4gIHZhciBSRUdFWF9GSUxURVIgPSAvW158XVxcfFtefF0vO1xyXG4gIHZhciBSRUdFWF9WQUxJREFURV9ESVJFQ1RJVkUgPSAvXnYtdmFsaWRhdGUoPzokfDooLiopJCkvO1xyXG4gIHZhciBSRUdFWF9FVkVOVCA9IC9edi1vbjp8XkAvO1xyXG5cclxuICB2YXIgY2xhc3NJZCA9IDA7IC8vIElEIGZvciB2YWxpZGF0aW9uIGNsYXNzXHJcblxyXG4gIGZ1bmN0aW9uIFZhbGlkYXRlQ2xhc3MgKFZ1ZSkge1xyXG4gICAgdmFyIHZJZiA9IFZ1ZS5kaXJlY3RpdmUoJ2lmJyk7XHJcbiAgICB2YXIgRnJhZ21lbnRGYWN0b3J5ID0gVnVlLkZyYWdtZW50RmFjdG9yeTtcclxuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcclxuICAgIHZhciB0b0FycmF5ID0gX1Z1ZSR1dGlsLnRvQXJyYXk7XHJcbiAgICB2YXIgcmVwbGFjZSA9IF9WdWUkdXRpbC5yZXBsYWNlO1xyXG4gICAgdmFyIGNyZWF0ZUFuY2hvciA9IF9WdWUkdXRpbC5jcmVhdGVBbmNob3I7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBgdi12YWxpZGF0ZS1jbGFzc2AgZGlyZWN0aXZlXHJcbiAgICAgKi9cclxuXHJcbiAgICBWdWUuZGlyZWN0aXZlKCd2YWxpZGF0ZS1jbGFzcycsIHtcclxuICAgICAgdGVybWluYWw6IHRydWUsXHJcbiAgICAgIHByaW9yaXR5OiB2SWYucHJpb3JpdHkgKyBQUklPUklUWV9WQUxJREFURV9DTEFTUyxcclxuXHJcbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIGlkID0gU3RyaW5nKGNsYXNzSWQrKyk7XHJcbiAgICAgICAgdGhpcy5zZXRDbGFzc0lkcyh0aGlzLmVsLCBpZCk7XHJcblxyXG4gICAgICAgIHRoaXMudm0uJG9uKFZBTElEQVRFX1VQREFURSwgdGhpcy5jYiA9IGZ1bmN0aW9uIChjbGFzc0lkcywgdmFsaWRhdGlvbiwgcmVzdWx0cykge1xyXG4gICAgICAgICAgaWYgKGNsYXNzSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGlvbi51cGRhdGVDbGFzc2VzKHJlc3VsdHMsIF90aGlzLmZyYWcubm9kZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBGcmFnbWVudCgpO1xyXG4gICAgICB9LFxyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICB0aGlzLnZtLiRvZmYoVkFMSURBVEVfVVBEQVRFLCB0aGlzLmNiKTtcclxuICAgICAgICB0aGlzLnRlYXJkb3duRnJhZ21lbnQoKTtcclxuICAgICAgfSxcclxuICAgICAgc2V0Q2xhc3NJZHM6IGZ1bmN0aW9uIHNldENsYXNzSWRzKGVsLCBpZCkge1xyXG4gICAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgZWxlbWVudCA9IGNoaWxkTm9kZXNbaV07XHJcbiAgICAgICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gMSkge1xyXG4gICAgICAgICAgICB2YXIgaGFzQXR0cnMgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbGVtZW50LmF0dHJpYnV0ZXMpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMCwgX2wgPSBhdHRycy5sZW5ndGg7IGsgPCBfbDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGF0dHIgPSBhdHRyc1trXTtcclxuICAgICAgICAgICAgICBpZiAoYXR0ci5uYW1lLm1hdGNoKFJFR0VYX1ZBTElEQVRFX0RJUkVDVElWRSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFZBTElEQVRFX1VQREFURSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChlbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENsYXNzSWRzKGVsZW1lbnQsIGlkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldHVwRnJhZ21lbnQ6IGZ1bmN0aW9uIHNldHVwRnJhZ21lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtdmFsaWRhdGUtY2xhc3MnKTtcclxuICAgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcclxuXHJcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcclxuICAgICAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcclxuICAgICAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcclxuICAgICAgfSxcclxuICAgICAgdGVhcmRvd25GcmFnbWVudDogZnVuY3Rpb24gdGVhcmRvd25GcmFnbWVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5mcmFnKSB7XHJcbiAgICAgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XHJcbiAgICAgICAgICB0aGlzLmZyYWcgPSBudWxsO1xyXG4gICAgICAgICAgdGhpcy5mYWN0b3J5ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcGxhY2UodGhpcy5hbmNob3IsIHRoaXMuZWwpO1xyXG4gICAgICAgIHRoaXMuYW5jaG9yID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBWYWxpZGF0ZSAoVnVlKSB7XHJcbiAgICB2YXIgdklmID0gVnVlLmRpcmVjdGl2ZSgnaWYnKTtcclxuICAgIHZhciBGcmFnbWVudEZhY3RvcnkgPSBWdWUuRnJhZ21lbnRGYWN0b3J5O1xyXG4gICAgdmFyIHBhcnNlRGlyZWN0aXZlID0gVnVlLnBhcnNlcnMuZGlyZWN0aXZlLnBhcnNlRGlyZWN0aXZlO1xyXG4gICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xyXG4gICAgdmFyIGluQnJvd3NlciA9IF9WdWUkdXRpbC5pbkJyb3dzZXI7XHJcbiAgICB2YXIgYmluZCA9IF9WdWUkdXRpbC5iaW5kO1xyXG4gICAgdmFyIG9uID0gX1Z1ZSR1dGlsLm9uO1xyXG4gICAgdmFyIG9mZiA9IF9WdWUkdXRpbC5vZmY7XHJcbiAgICB2YXIgY3JlYXRlQW5jaG9yID0gX1Z1ZSR1dGlsLmNyZWF0ZUFuY2hvcjtcclxuICAgIHZhciByZXBsYWNlID0gX1Z1ZSR1dGlsLnJlcGxhY2U7XHJcbiAgICB2YXIgY2FtZWxpemUgPSBfVnVlJHV0aWwuY2FtZWxpemU7XHJcbiAgICB2YXIgaXNQbGFpbk9iamVjdCA9IF9WdWUkdXRpbC5pc1BsYWluT2JqZWN0O1xyXG5cclxuICAgIC8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tUZXh0YXJlYUNsb25lQnVnKCkge1xyXG4gICAgICBpZiAoaW5Ccm93c2VyKSB7XHJcbiAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XHJcbiAgICAgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB2YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IGNoZWNrVGV4dGFyZWFDbG9uZUJ1ZygpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogYHYtdmFsaWRhdGVgIGRpcmVjdGl2ZVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLmRpcmVjdGl2ZSgndmFsaWRhdGUnLCB7XHJcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxyXG4gICAgICBwcmlvcml0eTogdklmLnByaW9yaXR5ICsgUFJJT1JJVFlfVkFMSURBVEUsXHJcbiAgICAgIHBhcmFtczogWydncm91cCcsICdmaWVsZCcsICdkZXRlY3QtYmx1cicsICdkZXRlY3QtY2hhbmdlJywgJ2luaXRpYWwnLCAnY2xhc3NlcyddLFxyXG5cclxuICAgICAgcGFyYW1XYXRjaGVyczoge1xyXG4gICAgICAgIGRldGVjdEJsdXI6IGZ1bmN0aW9uIGRldGVjdEJsdXIodmFsLCBvbGQpIHtcclxuICAgICAgICAgIGlmICh0aGlzLl9pbnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMudmFsaWRhdGlvbi5kZXRlY3RCbHVyID0gdGhpcy5pc0RldGVjdEJsdXIodmFsKTtcclxuICAgICAgICAgIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlKHRoaXMuZmllbGQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGV0ZWN0Q2hhbmdlOiBmdW5jdGlvbiBkZXRlY3RDaGFuZ2UodmFsLCBvbGQpIHtcclxuICAgICAgICAgIGlmICh0aGlzLl9pbnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMudmFsaWRhdGlvbi5kZXRlY3RDaGFuZ2UgPSB0aGlzLmlzRGV0ZWN0Q2hhbmdlKHZhbCk7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZSh0aGlzLmZpZWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XHJcblxyXG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgZWwuX192dWVfXykge1xyXG4gICAgICAgICAgd2Fybigndi12YWxpZGF0ZT1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlIHVzZWQgb24gYW4gaW5zdGFuY2Ugcm9vdCBlbGVtZW50LicpO1xyXG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSB8fCBlbC5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpKSB7XHJcbiAgICAgICAgICB3YXJuKCd2LXZhbGlkYXRlIGNhbm5vdCBiZSB1c2VkIGB2LWlmYCBvciBgdi1mb3JgIGJ1aWxkLWluIHRlcm1pbmFsIGRpcmVjdGl2ZSAnICsgJ29uIGFuIGVsZW1lbnQuIHRoZXNlIGlzIHdyYXBwZWQgd2l0aCBgPHRlbXBsYXRlPmAgb3Igb3RoZXIgdGFnczogJyArICcoZS5nLiA8dmFsaWRhdG9yIG5hbWU9XCJ2YWxpZGF0b3JcIj4nICsgJzx0ZW1wbGF0ZSB2LWlmPVwiaGlkZGVuXCI+JyArICc8aW5wdXQgdHlwZT1cInRleHRcIiB2LXZhbGlkYXRlOmZpZWxkMT1cIltcXCdyZXF1aXJlZFxcJ11cIj4nICsgJzwvdGVtcGxhdGU+JyArICc8L3ZhbGlkYXRvcj4pLicpO1xyXG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmICEodGhpcy5hcmcgfHwgdGhpcy5wYXJhbXMuZmllbGQpKSB7XHJcbiAgICAgICAgICB3YXJuKCd5b3UgbmVlZCBzcGVjaWZ5IGZpZWxkIG5hbWUgZm9yIHYtdmFsaWRhdGUgZGlyZWN0aXZlLicpO1xyXG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdmFsaWRhdG9yTmFtZSA9IHRoaXMudm0uJG9wdGlvbnMuX3ZhbGlkYXRvcjtcclxuICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmICF2YWxpZGF0b3JOYW1lKSB7XHJcbiAgICAgICAgICB3YXJuKCd5b3UgbmVlZCB0byB3cmFwIHRoZSBlbGVtZW50cyB0byBiZSB2YWxpZGF0ZWQgaW4gYSA8dmFsaWRhdG9yPiBlbGVtZW50OiAnICsgJyhlLmcuIDx2YWxpZGF0b3IgbmFtZT1cInZhbGlkYXRvclwiPicgKyAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdi12YWxpZGF0ZTpmaWVsZDE9XCJbXFwncmVxdWlyZWRcXCddXCI+JyArICc8L3ZhbGlkYXRvcj4pLicpO1xyXG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmF3ID0gZWwuZ2V0QXR0cmlidXRlKCd2LW1vZGVsJyk7XHJcblxyXG4gICAgICAgIHZhciBfcGFyc2VNb2RlbFJhdyA9IHRoaXMucGFyc2VNb2RlbFJhdyhyYXcpO1xyXG5cclxuICAgICAgICB2YXIgbW9kZWwgPSBfcGFyc2VNb2RlbFJhdy5tb2RlbDtcclxuICAgICAgICB2YXIgZmlsdGVycyA9IF9wYXJzZU1vZGVsUmF3LmZpbHRlcnM7XHJcblxyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cEZyYWdtZW50KCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cFZhbGlkYXRlKHZhbGlkYXRvck5hbWUsIG1vZGVsLCBmaWx0ZXJzKTtcclxuICAgICAgICB0aGlzLmxpc3RlbigpO1xyXG4gICAgICB9LFxyXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgb2xkKSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB0aGlzLl9pbnZhbGlkKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcclxuICAgICAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZUFycmF5KHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0geyBmaWVsZDogdGhpcy5maWVsZCwgbm9vcGFibGU6IHRoaXMuX2luaXRpYWxOb29wVmFsaWRhdGlvbiB9O1xyXG4gICAgICAgIGlmICh0aGlzLmZyYWcpIHtcclxuICAgICAgICAgIG9wdGlvbnMuZWwgPSB0aGlzLmZyYWcubm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbml0aWFsTm9vcFZhbGlkYXRpb24pIHtcclxuICAgICAgICAgIHRoaXMuX2luaXRpYWxOb29wVmFsaWRhdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5faW52YWxpZCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51bmxpc3RlbigpO1xyXG4gICAgICAgIHRoaXMudGVhcmRvd25WYWxpZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMudGVhcmRvd25GcmFnbWVudCgpO1xyXG5cclxuICAgICAgICB0aGlzLm1vZGVsID0gbnVsbDtcclxuICAgICAgfSxcclxuICAgICAgcGFyc2VNb2RlbFJhdzogZnVuY3Rpb24gcGFyc2VNb2RlbFJhdyhyYXcpIHtcclxuICAgICAgICBpZiAoUkVHRVhfRklMVEVSLnRlc3QocmF3KSkge1xyXG4gICAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHJhdyk7XHJcbiAgICAgICAgICByZXR1cm4geyBtb2RlbDogcGFyc2VkLmV4cHJlc3Npb24sIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB7IG1vZGVsOiByYXcgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHNldHVwVmFsaWRhdGU6IGZ1bmN0aW9uIHNldHVwVmFsaWRhdGUobmFtZSwgbW9kZWwsIGZpbHRlcnMpIHtcclxuICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgdmFyIHZhbGlkYXRvciA9IHRoaXMudmFsaWRhdG9yID0gdGhpcy52bS5fdmFsaWRhdG9yTWFwc1tuYW1lXTtcclxuXHJcbiAgICAgICAgdGhpcy5maWVsZCA9IGNhbWVsaXplKHRoaXMuYXJnID8gdGhpcy5hcmcgOiBwYXJhbXMuZmllbGQpO1xyXG5cclxuICAgICAgICB0aGlzLnZhbGlkYXRpb24gPSB2YWxpZGF0b3IubWFuYWdlVmFsaWRhdGlvbih0aGlzLmZpZWxkLCBtb2RlbCwgdGhpcy52bSwgdGhpcy5nZXRFbGVtZW50RnJvbSh0aGlzLmZyYWcpLCB0aGlzLl9zY29wZSwgZmlsdGVycywgcGFyYW1zLmluaXRpYWwsIHRoaXMuaXNEZXRlY3RCbHVyKHBhcmFtcy5kZXRlY3RCbHVyKSwgdGhpcy5pc0RldGVjdENoYW5nZShwYXJhbXMuZGV0ZWN0Q2hhbmdlKSk7XHJcblxyXG4gICAgICAgIGlzUGxhaW5PYmplY3QocGFyYW1zLmNsYXNzZXMpICYmIHRoaXMudmFsaWRhdGlvbi5zZXRWYWxpZGF0aW9uQ2xhc3NlcyhwYXJhbXMuY2xhc3Nlcyk7XHJcblxyXG4gICAgICAgIHBhcmFtcy5ncm91cCAmJiB2YWxpZGF0b3IuYWRkR3JvdXBWYWxpZGF0aW9uKHBhcmFtcy5ncm91cCwgdGhpcy5maWVsZCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxOb29wVmFsaWRhdGlvbiA9IHRoaXMuaXNJbml0aWFsTm9vcFZhbGlkYXRpb24ocGFyYW1zLmluaXRpYWwpO1xyXG4gICAgICB9LFxyXG4gICAgICBsaXN0ZW46IGZ1bmN0aW9uIGxpc3RlbigpIHtcclxuICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsO1xyXG4gICAgICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy52YWxpZGF0aW9uO1xyXG4gICAgICAgIHZhciBlbCA9IHRoaXMuZ2V0RWxlbWVudEZyb20odGhpcy5mcmFnKTtcclxuXHJcbiAgICAgICAgdGhpcy5vbkJsdXIgPSBiaW5kKHZhbGlkYXRpb24ubGlzdGVuZXIsIHZhbGlkYXRpb24pO1xyXG4gICAgICAgIG9uKGVsLCAnYmx1cicsIHRoaXMub25CbHVyKTtcclxuICAgICAgICBpZiAoKGVsLnR5cGUgPT09ICdyYWRpbycgfHwgZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcpICYmICFtb2RlbCkge1xyXG4gICAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGJpbmQodmFsaWRhdGlvbi5saXN0ZW5lciwgdmFsaWRhdGlvbik7XHJcbiAgICAgICAgICBvbihlbCwgJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWwudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgICAgaWYgKCFtb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlID0gYmluZCh2YWxpZGF0aW9uLmxpc3RlbmVyLCB2YWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgb24oZWwsICdjaGFuZ2UnLCB0aGlzLm9uQ2hhbmdlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGljayA9IGJpbmQodmFsaWRhdGlvbi5saXN0ZW5lciwgdmFsaWRhdGlvbik7XHJcbiAgICAgICAgICAgIG9uKGVsLCAnY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoIW1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25JbnB1dCA9IGJpbmQodmFsaWRhdGlvbi5saXN0ZW5lciwgdmFsaWRhdGlvbik7XHJcbiAgICAgICAgICAgIG9uKGVsLCAnaW5wdXQnLCB0aGlzLm9uSW5wdXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgdW5saXN0ZW46IGZ1bmN0aW9uIHVubGlzdGVuKCkge1xyXG4gICAgICAgIHZhciBlbCA9IHRoaXMuZ2V0RWxlbWVudEZyb20odGhpcy5mcmFnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25JbnB1dCkge1xyXG4gICAgICAgICAgb2ZmKGVsLCAnaW5wdXQnLCB0aGlzLm9uSW5wdXQpO1xyXG4gICAgICAgICAgdGhpcy5vbklucHV0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9uQ2xpY2spIHtcclxuICAgICAgICAgIG9mZihlbCwgJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcclxuICAgICAgICAgIHRoaXMub25DbGljayA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICAgICAgb2ZmKGVsLCAnY2hhbmdlJywgdGhpcy5vbkNoYW5nZSk7XHJcbiAgICAgICAgICB0aGlzLm9uQ2hhbmdlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9uQmx1cikge1xyXG4gICAgICAgICAgb2ZmKGVsLCAnYmx1cicsIHRoaXMub25CbHVyKTtcclxuICAgICAgICAgIHRoaXMub25CbHVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRlYXJkb3duVmFsaWRhdGU6IGZ1bmN0aW9uIHRlYXJkb3duVmFsaWRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdG9yICYmIHRoaXMudmFsaWRhdGlvbikge1xyXG4gICAgICAgICAgdmFyIGVsID0gdGhpcy5nZXRFbGVtZW50RnJvbSh0aGlzLmZyYWcpO1xyXG5cclxuICAgICAgICAgIHRoaXMucGFyYW1zLmdyb3VwICYmIHRoaXMudmFsaWRhdG9yLnJlbW92ZUdyb3VwVmFsaWRhdGlvbih0aGlzLnBhcmFtcy5ncm91cCwgdGhpcy5maWVsZCk7XHJcblxyXG4gICAgICAgICAgdGhpcy52YWxpZGF0b3IudW5tYW5hZ2VWYWxpZGF0aW9uKHRoaXMuZmllbGQsIGVsKTtcclxuXHJcbiAgICAgICAgICB0aGlzLnZhbGlkYXRvciA9IG51bGw7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkYXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgdGhpcy5maWVsZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzZXR1cEZyYWdtZW50OiBmdW5jdGlvbiBzZXR1cEZyYWdtZW50KCkge1xyXG4gICAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXZhbGlkYXRlJyk7XHJcbiAgICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XHJcblxyXG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5zaGltTm9kZSh0aGlzLmVsKSk7XHJcbiAgICAgICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XHJcbiAgICAgICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRlYXJkb3duRnJhZ21lbnQ6IGZ1bmN0aW9uIHRlYXJkb3duRnJhZ21lbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZnJhZykge1xyXG4gICAgICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5mcmFnID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXBsYWNlKHRoaXMuYW5jaG9yLCB0aGlzLmVsKTtcclxuICAgICAgICB0aGlzLmFuY2hvciA9IG51bGw7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUFycmF5OiBmdW5jdGlvbiBoYW5kbGVBcnJheSh2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGVhY2godmFsdWUsIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgIF90aGlzLnZhbGlkYXRpb24uc2V0VmFsaWRhdGlvbih2YWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xyXG5cclxuICAgICAgICBlYWNoKHZhbHVlLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcclxuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcclxuICAgICAgICAgICAgaWYgKCdydWxlJyBpbiB2YWwpIHtcclxuICAgICAgICAgICAgICB2YXIgbXNnID0gJ21lc3NhZ2UnIGluIHZhbCA/IHZhbC5tZXNzYWdlIDogbnVsbDtcclxuICAgICAgICAgICAgICB2YXIgaW5pdGlhbCA9ICdpbml0aWFsJyBpbiB2YWwgPyB2YWwuaW5pdGlhbCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgX3RoaXMyLnZhbGlkYXRpb24uc2V0VmFsaWRhdGlvbihrZXksIHZhbC5ydWxlLCBtc2csIGluaXRpYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfdGhpczIudmFsaWRhdGlvbi5zZXRWYWxpZGF0aW9uKGtleSwgdmFsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgaXNEZXRlY3RCbHVyOiBmdW5jdGlvbiBpc0RldGVjdEJsdXIoZGV0ZWN0Qmx1cikge1xyXG4gICAgICAgIHJldHVybiBkZXRlY3RCbHVyID09PSB1bmRlZmluZWQgfHwgZGV0ZWN0Qmx1ciA9PT0gJ29uJyB8fCBkZXRlY3RCbHVyID09PSB0cnVlO1xyXG4gICAgICB9LFxyXG4gICAgICBpc0RldGVjdENoYW5nZTogZnVuY3Rpb24gaXNEZXRlY3RDaGFuZ2UoZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgcmV0dXJuIGRldGVjdENoYW5nZSA9PT0gdW5kZWZpbmVkIHx8IGRldGVjdENoYW5nZSA9PT0gJ29uJyB8fCBkZXRlY3RDaGFuZ2UgPT09IHRydWU7XHJcbiAgICAgIH0sXHJcbiAgICAgIGlzSW5pdGlhbE5vb3BWYWxpZGF0aW9uOiBmdW5jdGlvbiBpc0luaXRpYWxOb29wVmFsaWRhdGlvbihpbml0aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGluaXRpYWwgPT09ICdvZmYnIHx8IGluaXRpYWwgPT09IGZhbHNlO1xyXG4gICAgICB9LFxyXG4gICAgICBzaGltTm9kZTogZnVuY3Rpb24gc2hpbU5vZGUobm9kZSkge1xyXG4gICAgICAgIHZhciByZXQgPSBub2RlO1xyXG4gICAgICAgIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XHJcbiAgICAgICAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XHJcbiAgICAgICAgICAgIHJldCA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICByZXQudmFsdWUgPSBub2RlLnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgaSA9IHJldC5jaGlsZE5vZGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgIHJldC5yZW1vdmVDaGlsZChyZXQuY2hpbGROb2Rlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgfSxcclxuICAgICAgZ2V0RWxlbWVudEZyb206IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tKGZyYWcpIHtcclxuICAgICAgICByZXR1cm4gZnJhZy5zaW5nbGUgPyBmcmFnLm5vZGUgOiBmcmFnLm5vZGUubmV4dFNpYmxpbmc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmFzZVZhbGlkYXRpb24gY2xhc3NcclxuICAgKi9cclxuXHJcbiAgdmFyIEJhc2VWYWxpZGF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmFzZVZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCB2YWxpZGF0b3IsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xyXG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzZVZhbGlkYXRpb24pO1xyXG5cclxuICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gICAgICB0aGlzLnRvdWNoZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm1vZGlmaWVkID0gZmFsc2U7XHJcblxyXG4gICAgICB0aGlzLl9tb2RpZmllZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLl9tb2RlbCA9IG1vZGVsO1xyXG4gICAgICB0aGlzLl9maWx0ZXJzID0gZmlsdGVycztcclxuICAgICAgdGhpcy5fdmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG4gICAgICB0aGlzLl92bSA9IHZtO1xyXG4gICAgICB0aGlzLl9lbCA9IGVsO1xyXG4gICAgICB0aGlzLl9mb3JTY29wZSA9IHNjb3BlO1xyXG4gICAgICB0aGlzLl9pbml0ID0gdGhpcy5fZ2V0VmFsdWUoZWwpO1xyXG4gICAgICB0aGlzLl92YWxpZGF0b3JzID0ge307XHJcbiAgICAgIHRoaXMuX2RldGVjdEJsdXIgPSBkZXRlY3RCbHVyO1xyXG4gICAgICB0aGlzLl9kZXRlY3RDaGFuZ2UgPSBkZXRlY3RDaGFuZ2U7XHJcbiAgICAgIHRoaXMuX2NsYXNzZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUubWFuYWdlRWxlbWVudCA9IGZ1bmN0aW9uIG1hbmFnZUVsZW1lbnQoZWwsIGluaXRpYWwpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX2dldFNjb3BlKCk7XHJcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX21vZGVsO1xyXG5cclxuICAgICAgdGhpcy5faW5pdGlhbCA9IGluaXRpYWw7XHJcblxyXG4gICAgICB2YXIgY2xhc3NJZHMgPSBlbC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcclxuICAgICAgaWYgKGNsYXNzSWRzKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFZBTElEQVRFX1VQREFURSk7XHJcbiAgICAgICAgdGhpcy5fY2xhc3NJZHMgPSBjbGFzc0lkcy5zcGxpdCgnLCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICBlbC52YWx1ZSA9IHRoaXMuX2V2YWxNb2RlbChtb2RlbCwgdGhpcy5fZmlsdGVycyk7XHJcbiAgICAgICAgdGhpcy5fdW53YXRjaCA9IHNjb3BlLiR3YXRjaChtb2RlbCwgZnVuY3Rpb24gKHZhbCwgb2xkKSB7XHJcbiAgICAgICAgICBpZiAodmFsICE9PSBvbGQpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmd1YXJkVmFsaWRhdGUoZWwsICdpbnB1dCcpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVWYWxpZGF0ZShlbCwgeyBub29wYWJsZTogX3RoaXMuX2luaXRpYWwgfSk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5faW5pdGlhbCkge1xyXG4gICAgICAgICAgICAgIF90aGlzLl9pbml0aWFsID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIHsgZGVlcDogdHJ1ZSB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUudW5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gdW5tYW5hZ2VFbGVtZW50KGVsKSB7XHJcbiAgICAgIHRoaXMuX3Vud2F0Y2ggJiYgdGhpcy5fdW53YXRjaCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuc2V0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIHNldFZhbGlkYXRpb24obmFtZSwgYXJnLCBtc2csIGluaXRpYWwpIHtcclxuICAgICAgdmFyIHZhbGlkYXRvciA9IHRoaXMuX3ZhbGlkYXRvcnNbbmFtZV07XHJcbiAgICAgIGlmICghdmFsaWRhdG9yKSB7XHJcbiAgICAgICAgdmFsaWRhdG9yID0gdGhpcy5fdmFsaWRhdG9yc1tuYW1lXSA9IHt9O1xyXG4gICAgICAgIHZhbGlkYXRvci5uYW1lID0gbmFtZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFsaWRhdG9yLmFyZyA9IGFyZztcclxuICAgICAgaWYgKG1zZykge1xyXG4gICAgICAgIHZhbGlkYXRvci5tc2cgPSBtc2c7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpbml0aWFsKSB7XHJcbiAgICAgICAgdmFsaWRhdG9yLmluaXRpYWwgPSBpbml0aWFsO1xyXG4gICAgICAgIHZhbGlkYXRvci5faXNOb29wYWJsZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLnNldFZhbGlkYXRpb25DbGFzc2VzID0gZnVuY3Rpb24gc2V0VmFsaWRhdGlvbkNsYXNzZXMoY2xhc3Nlcykge1xyXG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcclxuXHJcbiAgICAgIGVhY2goY2xhc3NlcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICBfdGhpczIuX2NsYXNzZXNba2V5XSA9IHZhbHVlO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLndpbGxVcGRhdGVGbGFncyA9IGZ1bmN0aW9uIHdpbGxVcGRhdGVGbGFncygpIHtcclxuICAgICAgdmFyIHRvdWNoZWQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1swXTtcclxuXHJcbiAgICAgIHRvdWNoZWQgJiYgdGhpcy53aWxsVXBkYXRlVG91Y2hlZCh0aGlzLl9lbCwgJ2JsdXInKTtcclxuICAgICAgdGhpcy53aWxsVXBkYXRlRGlydHkodGhpcy5fZWwpO1xyXG4gICAgICB0aGlzLndpbGxVcGRhdGVNb2RpZmllZCh0aGlzLl9lbCk7XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS53aWxsVXBkYXRlVG91Y2hlZCA9IGZ1bmN0aW9uIHdpbGxVcGRhdGVUb3VjaGVkKGVsLCB0eXBlKSB7XHJcbiAgICAgIGlmICh0eXBlICYmIHR5cGUgPT09ICdibHVyJykge1xyXG4gICAgICAgIHRoaXMudG91Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KGVsLCAndG91Y2hlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS53aWxsVXBkYXRlRGlydHkgPSBmdW5jdGlvbiB3aWxsVXBkYXRlRGlydHkoZWwpIHtcclxuICAgICAgaWYgKCF0aGlzLmRpcnR5ICYmIHRoaXMuX2NoZWNrTW9kaWZpZWQoZWwpKSB7XHJcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KGVsLCAnZGlydHknKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZU1vZGlmaWVkID0gZnVuY3Rpb24gd2lsbFVwZGF0ZU1vZGlmaWVkKGVsKSB7XHJcbiAgICAgIHRoaXMubW9kaWZpZWQgPSB0aGlzLl9jaGVja01vZGlmaWVkKGVsKTtcclxuICAgICAgaWYgKHRoaXMuX21vZGlmaWVkICE9PSB0aGlzLm1vZGlmaWVkKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KGVsLCAnbW9kaWZpZWQnLCB7IG1vZGlmaWVkOiB0aGlzLm1vZGlmaWVkIH0pO1xyXG4gICAgICAgIHRoaXMuX21vZGlmaWVkID0gdGhpcy5tb2RpZmllZDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUubGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcihlKSB7XHJcbiAgICAgIGlmICh0aGlzLmd1YXJkVmFsaWRhdGUoZS50YXJnZXQsIGUudHlwZSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuaGFuZGxlVmFsaWRhdGUoZS50YXJnZXQsIHsgdHlwZTogZS50eXBlIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuaGFuZGxlVmFsaWRhdGUgPSBmdW5jdGlvbiBoYW5kbGVWYWxpZGF0ZShlbCkge1xyXG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xyXG5cclxuICAgICAgdmFyIF9yZWYkdHlwZSA9IF9yZWYudHlwZTtcclxuICAgICAgdmFyIHR5cGUgPSBfcmVmJHR5cGUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHR5cGU7XHJcbiAgICAgIHZhciBfcmVmJG5vb3BhYmxlID0gX3JlZi5ub29wYWJsZTtcclxuICAgICAgdmFyIG5vb3BhYmxlID0gX3JlZiRub29wYWJsZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJG5vb3BhYmxlO1xyXG5cclxuICAgICAgdGhpcy53aWxsVXBkYXRlVG91Y2hlZChlbCwgdHlwZSk7XHJcbiAgICAgIHRoaXMud2lsbFVwZGF0ZURpcnR5KGVsKTtcclxuICAgICAgdGhpcy53aWxsVXBkYXRlTW9kaWZpZWQoZWwpO1xyXG5cclxuICAgICAgdGhpcy5fdmFsaWRhdG9yLnZhbGlkYXRlKHsgZmllbGQ6IHRoaXMuZmllbGQsIGVsOiBlbCwgbm9vcGFibGU6IG5vb3BhYmxlIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShjYikge1xyXG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBub29wYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzFdO1xyXG4gICAgICB2YXIgZWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzJdO1xyXG5cclxuICAgICAgdmFyIF8gPSBleHBvcnRzJDEuVnVlLnV0aWw7XHJcblxyXG4gICAgICB2YXIgcmVzdWx0cyA9IHt9O1xyXG4gICAgICB2YXIgZXJyb3JzID0gW107XHJcbiAgICAgIHZhciB2YWxpZCA9IHRydWU7XHJcblxyXG4gICAgICB0aGlzLl9ydW5WYWxpZGF0b3JzKGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBuYW1lLCBkb25lKSB7XHJcbiAgICAgICAgdmFyIGFzc2V0ID0gX3RoaXMzLl9yZXNvbHZlVmFsaWRhdG9yKG5hbWUpO1xyXG4gICAgICAgIHZhciB2YWxpZGF0b3IgPSBudWxsO1xyXG4gICAgICAgIHZhciBtc2cgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGFzc2V0KSkge1xyXG4gICAgICAgICAgaWYgKGFzc2V0LmNoZWNrICYmIHR5cGVvZiBhc3NldC5jaGVjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3IgPSBhc3NldC5jaGVjaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChhc3NldC5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIG1zZyA9IGFzc2V0Lm1lc3NhZ2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHZhbGlkYXRvciA9IGFzc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IubXNnKSB7XHJcbiAgICAgICAgICBtc2cgPSBkZXNjcmlwdG9yLm1zZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChub29wYWJsZSkge1xyXG4gICAgICAgICAgcmVzdWx0c1tuYW1lXSA9IGZhbHNlO1xyXG4gICAgICAgICAgcmV0dXJuIGRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkZXNjcmlwdG9yLl9pc05vb3BhYmxlKSB7XHJcbiAgICAgICAgICByZXN1bHRzW25hbWVdID0gZmFsc2U7XHJcbiAgICAgICAgICBkZXNjcmlwdG9yLl9pc05vb3BhYmxlID0gbnVsbDtcclxuICAgICAgICAgIHJldHVybiBkb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpczMuX2dldFZhbHVlKF90aGlzMy5fZWwpO1xyXG4gICAgICAgICAgX3RoaXMzLl9pbnZva2VWYWxpZGF0b3IoX3RoaXMzLl92bSwgdmFsaWRhdG9yLCB2YWx1ZSwgZGVzY3JpcHRvci5hcmcsIGZ1bmN0aW9uIChyZXQsIGVycikge1xyXG4gICAgICAgICAgICBpZiAoIXJldCkge1xyXG4gICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgLy8gYXN5bmMgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goeyB2YWxpZGF0b3I6IG5hbWUsIG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHNbbmFtZV0gPSBlcnI7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHsgdmFsaWRhdG9yOiBuYW1lIH07XHJcbiAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gdHlwZW9mIG1zZyA9PT0gJ2Z1bmN0aW9uJyA/IG1zZy5jYWxsKF90aGlzMy5fdm0sIF90aGlzMy5maWVsZCwgZGVzY3JpcHRvci5hcmcpIDogbXNnO1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0c1tuYW1lXSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHNbbmFtZV0gPSAhcmV0O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXN1bHRzW25hbWVdID0gIXJldDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBmaW5pc2hlZFxyXG4gICAgICAgIF90aGlzMy5fZmlyZUV2ZW50KF90aGlzMy5fZWwsIHZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJyk7XHJcblxyXG4gICAgICAgIHZhciBwcm9wcyA9IHtcclxuICAgICAgICAgIHZhbGlkOiB2YWxpZCxcclxuICAgICAgICAgIGludmFsaWQ6ICF2YWxpZCxcclxuICAgICAgICAgIHRvdWNoZWQ6IF90aGlzMy50b3VjaGVkLFxyXG4gICAgICAgICAgdW50b3VjaGVkOiAhX3RoaXMzLnRvdWNoZWQsXHJcbiAgICAgICAgICBkaXJ0eTogX3RoaXMzLmRpcnR5LFxyXG4gICAgICAgICAgcHJpc3RpbmU6ICFfdGhpczMuZGlydHksXHJcbiAgICAgICAgICBtb2RpZmllZDogX3RoaXMzLm1vZGlmaWVkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIWVtcHR5KGVycm9ycykpIHtcclxuICAgICAgICAgIHByb3BzLmVycm9ycyA9IGVycm9ycztcclxuICAgICAgICB9XHJcbiAgICAgICAgXy5leHRlbmQocmVzdWx0cywgcHJvcHMpO1xyXG5cclxuICAgICAgICBfdGhpczMud2lsbFVwZGF0ZUNsYXNzZXMocmVzdWx0cywgZWwpO1xyXG5cclxuICAgICAgICBjYihyZXN1bHRzKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5yZXNldEZsYWdzID0gZnVuY3Rpb24gcmVzZXRGbGFncygpIHtcclxuICAgICAgdGhpcy50b3VjaGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcclxuICAgICAgdGhpcy5tb2RpZmllZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLl9tb2RpZmllZCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgZWFjaCh0aGlzLl92YWxpZGF0b3JzLCBmdW5jdGlvbiAoZGVzY3JpcHRvciwga2V5KSB7XHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IuaW5pdGlhbCAmJiAhZGVzY3JpcHRvci5faXNOb29wYWJsZSkge1xyXG4gICAgICAgICAgZGVzY3JpcHRvci5faXNOb29wYWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5yZXNldEZsYWdzKCk7XHJcbiAgICAgIHRoaXMuX2luaXQgPSB0aGlzLl9nZXRWYWx1ZSh0aGlzLl9lbCk7XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS53aWxsVXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIHdpbGxVcGRhdGVDbGFzc2VzKHJlc3VsdHMpIHtcclxuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XHJcblxyXG4gICAgICB2YXIgZWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xyXG5cclxuICAgICAgaWYgKHRoaXMuX2NoZWNrQ2xhc3NJZHMoZWwpKSB7XHJcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHZhciBjbGFzc0lkcyA9IF90aGlzNC5fZ2V0Q2xhc3NJZHMoZWwpO1xyXG4gICAgICAgICAgX3RoaXM0LnZtLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzNC52bS4kZW1pdChWQUxJREFURV9VUERBVEUsIGNsYXNzSWRzLCBfdGhpczQsIHJlc3VsdHMpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNsYXNzZXMocmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLnVwZGF0ZUNsYXNzZXMgPSBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzKHJlc3VsdHMpIHtcclxuICAgICAgdmFyIGVsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcclxuXHJcbiAgICAgIHRoaXMuX3VwZGF0ZUNsYXNzZXMoZWwgfHwgdGhpcy5fZWwsIHJlc3VsdHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuZ3VhcmRWYWxpZGF0ZSA9IGZ1bmN0aW9uIGd1YXJkVmFsaWRhdGUoZWwsIHR5cGUpIHtcclxuICAgICAgaWYgKHR5cGUgJiYgdHlwZSA9PT0gJ2JsdXInICYmICF0aGlzLmRldGVjdEJsdXIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGUgJiYgdHlwZSA9PT0gJ2lucHV0JyAmJiAhdGhpcy5kZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGUgJiYgdHlwZSA9PT0gJ2NoYW5nZScgJiYgIXRoaXMuZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0eXBlICYmIHR5cGUgPT09ICdjbGljaycgJiYgIXRoaXMuZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRWYWx1ZSA9IGZ1bmN0aW9uIF9nZXRWYWx1ZShlbCkge1xyXG4gICAgICByZXR1cm4gZWwudmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fZ2V0U2NvcGUgPSBmdW5jdGlvbiBfZ2V0U2NvcGUoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9mb3JTY29wZSB8fCB0aGlzLl92bTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRDbGFzc0lkcyA9IGZ1bmN0aW9uIF9nZXRDbGFzc0lkcyhlbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2xhc3NJZHM7XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fY2hlY2tNb2RpZmllZCA9IGZ1bmN0aW9uIF9jaGVja01vZGlmaWVkKHRhcmdldCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5faW5pdCAhPT0gdGhpcy5fZ2V0VmFsdWUodGFyZ2V0KTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9jaGVja0NsYXNzSWRzID0gZnVuY3Rpb24gX2NoZWNrQ2xhc3NJZHMoZWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldENsYXNzSWRzKGVsKTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9maXJlRXZlbnQgPSBmdW5jdGlvbiBfZmlyZUV2ZW50KGVsLCB0eXBlLCBhcmdzKSB7XHJcbiAgICAgIHRyaWdnZXIoZWwsIHR5cGUsIGFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuX2V2YWxNb2RlbCA9IGZ1bmN0aW9uIF9ldmFsTW9kZWwobW9kZWwsIGZpbHRlcnMpIHtcclxuICAgICAgdmFyIHNjb3BlID0gdGhpcy5fZ2V0U2NvcGUoKTtcclxuXHJcbiAgICAgIHZhciB2YWwgPSBudWxsO1xyXG4gICAgICBpZiAoZmlsdGVycykge1xyXG4gICAgICAgIHZhbCA9IHNjb3BlLiRnZXQobW9kZWwpO1xyXG4gICAgICAgIHJldHVybiBmaWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZmlsdGVycykgOiB2YWw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFsID0gc2NvcGUuJGdldChtb2RlbCk7XHJcbiAgICAgICAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCA/ICcnIDogdmFsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fdXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIF91cGRhdGVDbGFzc2VzKGVsLCByZXN1bHRzKSB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZVZhbGlkKGVsLCByZXN1bHRzLnZhbGlkKTtcclxuICAgICAgdGhpcy5fdG9nZ2xlVG91Y2hlZChlbCwgcmVzdWx0cy50b3VjaGVkKTtcclxuICAgICAgdGhpcy5fdG9nZ2xlUHJpc3RpbmUoZWwsIHJlc3VsdHMucHJpc3RpbmUpO1xyXG4gICAgICB0aGlzLl90b2dnbGVNb2RmaWVkKGVsLCByZXN1bHRzLm1vZGlmaWVkKTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl90b2dnbGVWYWxpZCA9IGZ1bmN0aW9uIF90b2dnbGVWYWxpZChlbCwgdmFsaWQpIHtcclxuICAgICAgdmFyIF91dGlsJFZ1ZSR1dGlsID0gZXhwb3J0cyQxLlZ1ZS51dGlsO1xyXG4gICAgICB2YXIgYWRkQ2xhc3MgPSBfdXRpbCRWdWUkdXRpbC5hZGRDbGFzcztcclxuICAgICAgdmFyIHJlbW92ZUNsYXNzID0gX3V0aWwkVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XHJcblxyXG4gICAgICB2YXIgdmFsaWRDbGFzcyA9IHRoaXMuX2NsYXNzZXMudmFsaWQgfHwgJ3ZhbGlkJztcclxuICAgICAgdmFyIGludmFsaWRDbGFzcyA9IHRoaXMuX2NsYXNzZXMuaW52YWxpZCB8fCAnaW52YWxpZCc7XHJcblxyXG4gICAgICBpZiAodmFsaWQpIHtcclxuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB2YWxpZENsYXNzLCBhZGRDbGFzcyk7XHJcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgaW52YWxpZENsYXNzLCByZW1vdmVDbGFzcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdmFsaWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGludmFsaWRDbGFzcywgYWRkQ2xhc3MpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fdG9nZ2xlVG91Y2hlZCA9IGZ1bmN0aW9uIF90b2dnbGVUb3VjaGVkKGVsLCB0b3VjaGVkKSB7XHJcbiAgICAgIHZhciBfdXRpbCRWdWUkdXRpbDIgPSBleHBvcnRzJDEuVnVlLnV0aWw7XHJcbiAgICAgIHZhciBhZGRDbGFzcyA9IF91dGlsJFZ1ZSR1dGlsMi5hZGRDbGFzcztcclxuICAgICAgdmFyIHJlbW92ZUNsYXNzID0gX3V0aWwkVnVlJHV0aWwyLnJlbW92ZUNsYXNzO1xyXG5cclxuICAgICAgdmFyIHRvdWNoZWRDbGFzcyA9IHRoaXMuX2NsYXNzZXMudG91Y2hlZCB8fCAndG91Y2hlZCc7XHJcbiAgICAgIHZhciB1bnRvdWNoZWRDbGFzcyA9IHRoaXMuX2NsYXNzZXMudW50b3VjaGVkIHx8ICd1bnRvdWNoZWQnO1xyXG5cclxuICAgICAgaWYgKHRvdWNoZWQpIHtcclxuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB0b3VjaGVkQ2xhc3MsIGFkZENsYXNzKTtcclxuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB1bnRvdWNoZWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHRvdWNoZWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHVudG91Y2hlZENsYXNzLCBhZGRDbGFzcyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl90b2dnbGVQcmlzdGluZSA9IGZ1bmN0aW9uIF90b2dnbGVQcmlzdGluZShlbCwgcHJpc3RpbmUpIHtcclxuICAgICAgdmFyIF91dGlsJFZ1ZSR1dGlsMyA9IGV4cG9ydHMkMS5WdWUudXRpbDtcclxuICAgICAgdmFyIGFkZENsYXNzID0gX3V0aWwkVnVlJHV0aWwzLmFkZENsYXNzO1xyXG4gICAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfdXRpbCRWdWUkdXRpbDMucmVtb3ZlQ2xhc3M7XHJcblxyXG4gICAgICB2YXIgcHJpc3RpbmVDbGFzcyA9IHRoaXMuX2NsYXNzZXMucHJpc3RpbmUgfHwgJ3ByaXN0aW5lJztcclxuICAgICAgdmFyIGRpcnR5Q2xhc3MgPSB0aGlzLl9jbGFzc2VzLmRpcnR5IHx8ICdkaXJ0eSc7XHJcblxyXG4gICAgICBpZiAocHJpc3RpbmUpIHtcclxuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBwcmlzdGluZUNsYXNzLCBhZGRDbGFzcyk7XHJcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgZGlydHlDbGFzcywgcmVtb3ZlQ2xhc3MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHByaXN0aW5lQ2xhc3MsIHJlbW92ZUNsYXNzKTtcclxuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBkaXJ0eUNsYXNzLCBhZGRDbGFzcyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl90b2dnbGVNb2RmaWVkID0gZnVuY3Rpb24gX3RvZ2dsZU1vZGZpZWQoZWwsIG1vZGlmaWVkKSB7XHJcbiAgICAgIHZhciBfdXRpbCRWdWUkdXRpbDQgPSBleHBvcnRzJDEuVnVlLnV0aWw7XHJcbiAgICAgIHZhciBhZGRDbGFzcyA9IF91dGlsJFZ1ZSR1dGlsNC5hZGRDbGFzcztcclxuICAgICAgdmFyIHJlbW92ZUNsYXNzID0gX3V0aWwkVnVlJHV0aWw0LnJlbW92ZUNsYXNzO1xyXG5cclxuICAgICAgdmFyIG1vZGlmaWVkQ2xhc3MgPSB0aGlzLl9jbGFzc2VzLm1vZGlmaWVkIHx8ICdtb2RpZmllZCc7XHJcblxyXG4gICAgICBpZiAobW9kaWZpZWQpIHtcclxuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBtb2RpZmllZENsYXNzLCBhZGRDbGFzcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgbW9kaWZpZWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gX2FwcGx5RmlsdGVycyh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XHJcbiAgICAgIHZhciByZXNvbHZlQXNzZXQgPSBleHBvcnRzJDEuVnVlLnV0aWwucmVzb2x2ZUFzc2V0O1xyXG4gICAgICB2YXIgc2NvcGUgPSB0aGlzLl9nZXRTY29wZSgpO1xyXG5cclxuICAgICAgdmFyIGZpbHRlciA9IHZvaWQgMCxcclxuICAgICAgICAgIGZuID0gdm9pZCAwLFxyXG4gICAgICAgICAgYXJncyA9IHZvaWQgMCxcclxuICAgICAgICAgIGFyZyA9IHZvaWQgMCxcclxuICAgICAgICAgIG9mZnNldCA9IHZvaWQgMCxcclxuICAgICAgICAgIGkgPSB2b2lkIDAsXHJcbiAgICAgICAgICBsID0gdm9pZCAwLFxyXG4gICAgICAgICAgaiA9IHZvaWQgMCxcclxuICAgICAgICAgIGsgPSB2b2lkIDA7XHJcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGZpbHRlciA9IGZpbHRlcnNbaV07XHJcbiAgICAgICAgZm4gPSByZXNvbHZlQXNzZXQodGhpcy5fdm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUpO1xyXG4gICAgICAgIGlmICghZm4pIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcclxuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcclxuICAgICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xyXG4gICAgICAgIGlmIChmaWx0ZXIuYXJncykge1xyXG4gICAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xyXG4gICAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcclxuICAgICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gc2NvcGUuJGdldChhcmcudmFsdWUpIDogYXJnLnZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLl92bSwgYXJncyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9ydW5WYWxpZGF0b3JzID0gZnVuY3Rpb24gX3J1blZhbGlkYXRvcnMoZm4sIGNiKSB7XHJcbiAgICAgIHZhciB2YWxpZGF0b3JzID0gdGhpcy5fdmFsaWRhdG9ycztcclxuICAgICAgdmFyIGxlbmd0aCA9IE9iamVjdC5rZXlzKHZhbGlkYXRvcnMpLmxlbmd0aDtcclxuXHJcbiAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgIGVhY2godmFsaWRhdG9ycywgZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5hbWUpIHtcclxuICAgICAgICBmbihkZXNjcmlwdG9yLCBuYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICArK2NvdW50O1xyXG4gICAgICAgICAgY291bnQgPj0gbGVuZ3RoICYmIGNiKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuX2ludm9rZVZhbGlkYXRvciA9IGZ1bmN0aW9uIF9pbnZva2VWYWxpZGF0b3Iodm0sIHZhbGlkYXRvciwgdmFsLCBhcmcsIGNiKSB7XHJcbiAgICAgIHZhciBmdXR1cmUgPSB2YWxpZGF0b3IuY2FsbCh0aGlzLCB2YWwsIGFyZyk7XHJcbiAgICAgIGlmICh0eXBlb2YgZnV0dXJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gZnVuY3Rpb25cclxuICAgICAgICBmdXR1cmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgLy8gcmVzb2x2ZVxyXG4gICAgICAgICAgY2IodHJ1ZSk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgLy8gcmVqZWN0XHJcbiAgICAgICAgICBjYihmYWxzZSwgbXNnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UoZnV0dXJlKSkge1xyXG4gICAgICAgIC8vIHByb21pc2VcclxuICAgICAgICBmdXR1cmUudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAvLyByZXNvbHZlXHJcbiAgICAgICAgICBjYih0cnVlKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAvLyByZWplY3RcclxuICAgICAgICAgIGNiKGZhbHNlLCBtc2cpO1xyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgIGNiKGZhbHNlLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gc3luY1xyXG4gICAgICAgIGNiKGZ1dHVyZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9yZXNvbHZlVmFsaWRhdG9yID0gZnVuY3Rpb24gX3Jlc29sdmVWYWxpZGF0b3IobmFtZSkge1xyXG4gICAgICB2YXIgcmVzb2x2ZUFzc2V0ID0gZXhwb3J0cyQxLlZ1ZS51dGlsLnJlc29sdmVBc3NldDtcclxuICAgICAgcmV0dXJuIHJlc29sdmVBc3NldCh0aGlzLl92bS4kb3B0aW9ucywgJ3ZhbGlkYXRvcnMnLCBuYW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgYmFiZWxIZWxwZXJzLmNyZWF0ZUNsYXNzKEJhc2VWYWxpZGF0aW9uLCBbe1xyXG4gICAgICBrZXk6ICd2bScsXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92bTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6ICdlbCcsXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6ICdkZXRlY3RDaGFuZ2UnLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGV0ZWN0Q2hhbmdlO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9kZXRlY3RDaGFuZ2UgPSB2YWw7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnZGV0ZWN0Qmx1cicsXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZXRlY3RCbHVyO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9kZXRlY3RCbHVyID0gdmFsO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcbiAgICByZXR1cm4gQmFzZVZhbGlkYXRpb247XHJcbiAgfSgpO1xyXG5cclxuICAvKipcclxuICAgKiBDaGVja2JveFZhbGlkYXRpb24gY2xhc3NcclxuICAgKi9cclxuXHJcbiAgdmFyIENoZWNrYm94VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChfQmFzZVZhbGlkYXRpb24pIHtcclxuICAgIGJhYmVsSGVscGVycy5pbmhlcml0cyhDaGVja2JveFZhbGlkYXRpb24sIF9CYXNlVmFsaWRhdGlvbik7XHJcblxyXG4gICAgZnVuY3Rpb24gQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdmFsaWRhdG9yLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIENoZWNrYm94VmFsaWRhdGlvbik7XHJcblxyXG4gICAgICB2YXIgX3RoaXMgPSBiYWJlbEhlbHBlcnMucG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZVZhbGlkYXRpb24uY2FsbCh0aGlzLCBmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHZhbGlkYXRvciwgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSk7XHJcblxyXG4gICAgICBfdGhpcy5faW5pdHMgPSBbXTtcclxuICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUubWFuYWdlRWxlbWVudCA9IGZ1bmN0aW9uIG1hbmFnZUVsZW1lbnQoZWwsIGluaXRpYWwpIHtcclxuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XHJcblxyXG4gICAgICB2YXIgc2NvcGUgPSB0aGlzLl9nZXRTY29wZSgpO1xyXG4gICAgICB2YXIgaXRlbSA9IHRoaXMuX2FkZEl0ZW0oZWwsIGluaXRpYWwpO1xyXG5cclxuICAgICAgdmFyIG1vZGVsID0gaXRlbS5tb2RlbCA9IHRoaXMuX21vZGVsO1xyXG4gICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9ldmFsTW9kZWwobW9kZWwsIHRoaXMuX2ZpbHRlcnMpO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgdGhpcy5fc2V0Q2hlY2tlZCh2YWx1ZSwgaXRlbS5lbCk7XHJcbiAgICAgICAgICBpdGVtLnVud2F0Y2ggPSBzY29wZS4kd2F0Y2gobW9kZWwsIGZ1bmN0aW9uICh2YWwsIG9sZCkge1xyXG4gICAgICAgICAgICBpZiAodmFsICE9PSBvbGQpIHtcclxuICAgICAgICAgICAgICBpZiAoX3RoaXMyLmd1YXJkVmFsaWRhdGUoaXRlbS5lbCwgJ2NoYW5nZScpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBfdGhpczIuaGFuZGxlVmFsaWRhdGUoaXRlbS5lbCwgeyBub29wYWJsZTogaXRlbS5pbml0aWFsIH0pO1xyXG4gICAgICAgICAgICAgIGlmIChpdGVtLmluaXRpYWwpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uaW5pdGlhbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlIHx8IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5faW5pdCA9IGVsLmNoZWNrZWQ7XHJcbiAgICAgICAgICBpdGVtLmluaXQgPSBlbC5jaGVja2VkO1xyXG4gICAgICAgICAgaXRlbS52YWx1ZSA9IGVsLnZhbHVlO1xyXG4gICAgICAgICAgaXRlbS51bndhdGNoID0gc2NvcGUuJHdhdGNoKG1vZGVsLCBmdW5jdGlvbiAodmFsLCBvbGQpIHtcclxuICAgICAgICAgICAgaWYgKHZhbCAhPT0gb2xkKSB7XHJcbiAgICAgICAgICAgICAgaWYgKF90aGlzMi5ndWFyZFZhbGlkYXRlKGVsLCAnY2hhbmdlJykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIF90aGlzMi5oYW5kbGVWYWxpZGF0ZShlbCwgeyBub29wYWJsZTogaXRlbS5pbml0aWFsIH0pO1xyXG4gICAgICAgICAgICAgIGlmIChpdGVtLmluaXRpYWwpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uaW5pdGlhbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7IGZpZWxkOiB0aGlzLmZpZWxkLCBub29wYWJsZTogaW5pdGlhbCB9O1xyXG4gICAgICAgIGlmICh0aGlzLl9jaGVja0NsYXNzSWRzKGVsKSkge1xyXG4gICAgICAgICAgb3B0aW9ucy5lbCA9IGVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl92YWxpZGF0b3IudmFsaWRhdGUob3B0aW9ucyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hlY2tib3hWYWxpZGF0aW9uLnByb3RvdHlwZS51bm1hbmFnZUVsZW1lbnQgPSBmdW5jdGlvbiB1bm1hbmFnZUVsZW1lbnQoZWwpIHtcclxuICAgICAgdmFyIGZvdW5kID0gLTE7XHJcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGlmIChpdGVtLmVsID09PSBlbCkge1xyXG4gICAgICAgICAgZm91bmQgPSBpbmRleDtcclxuICAgICAgICAgIGlmIChpdGVtLnVud2F0Y2ggJiYgaXRlbS5tb2RlbCkge1xyXG4gICAgICAgICAgICBpdGVtLnVud2F0Y2goKTtcclxuICAgICAgICAgICAgaXRlbS51bndhdGNoID0gbnVsbDtcclxuICAgICAgICAgICAgaXRlbS5tb2RlbCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGZvdW5kID09PSAtMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5faW5pdHMuc3BsaWNlKGZvdW5kLCAxKTtcclxuICAgICAgdGhpcy5fdmFsaWRhdG9yLnZhbGlkYXRlKHsgZmllbGQ6IHRoaXMuZmllbGQgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZUZsYWdzID0gZnVuY3Rpb24gd2lsbFVwZGF0ZUZsYWdzKCkge1xyXG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcclxuXHJcbiAgICAgIHZhciB0b3VjaGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMF07XHJcblxyXG4gICAgICBlYWNoKHRoaXMuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICB0b3VjaGVkICYmIF90aGlzMy53aWxsVXBkYXRlVG91Y2hlZChpdGVtLmVsLCAnYmx1cicpO1xyXG4gICAgICAgIF90aGlzMy53aWxsVXBkYXRlRGlydHkoaXRlbS5lbCk7XHJcbiAgICAgICAgX3RoaXMzLndpbGxVcGRhdGVNb2RpZmllZChpdGVtLmVsKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgdGhpcy5yZXNldEZsYWdzKCk7XHJcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGl0ZW0uaW5pdCA9IGl0ZW0uZWwuY2hlY2tlZDtcclxuICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS5lbC52YWx1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUudXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocmVzdWx0cykge1xyXG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBlbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMV07XHJcblxyXG4gICAgICBpZiAoZWwpIHtcclxuICAgICAgICAvLyBmb3IgYW5vdGhlciBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NlcyhlbCwgcmVzdWx0cyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWFjaCh0aGlzLl9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICBfdGhpczQuX3VwZGF0ZUNsYXNzZXMoaXRlbS5lbCwgcmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ2hlY2tib3hWYWxpZGF0aW9uLnByb3RvdHlwZS5fYWRkSXRlbSA9IGZ1bmN0aW9uIF9hZGRJdGVtKGVsLCBpbml0aWFsKSB7XHJcbiAgICAgIHZhciBpdGVtID0ge1xyXG4gICAgICAgIGVsOiBlbCxcclxuICAgICAgICBpbml0OiBlbC5jaGVja2VkLFxyXG4gICAgICAgIHZhbHVlOiBlbC52YWx1ZSxcclxuICAgICAgICBpbml0aWFsOiBpbml0aWFsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgY2xhc3NJZHMgPSBlbC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcclxuICAgICAgaWYgKGNsYXNzSWRzKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFZBTElEQVRFX1VQREFURSk7XHJcbiAgICAgICAgaXRlbS5jbGFzc0lkcyA9IGNsYXNzSWRzLnNwbGl0KCcsJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuX2luaXRzLnB1c2goaXRlbSk7XHJcbiAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfTtcclxuXHJcbiAgICBDaGVja2JveFZhbGlkYXRpb24ucHJvdG90eXBlLl9zZXRDaGVja2VkID0gZnVuY3Rpb24gX3NldENoZWNrZWQodmFsdWVzLCBlbCkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNbaV07XHJcbiAgICAgICAgaWYgKCFlbC5kaXNhYmxlZCAmJiBlbC52YWx1ZSA9PT0gdmFsdWUgJiYgIWVsLmNoZWNrZWQpIHtcclxuICAgICAgICAgIGVsLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGVja2JveFZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRWYWx1ZSA9IGZ1bmN0aW9uIF9nZXRWYWx1ZShlbCkge1xyXG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcclxuXHJcbiAgICAgIGlmICghdGhpcy5faW5pdHMgfHwgdGhpcy5faW5pdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLmNoZWNrZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgdmFscyA9IFtdO1xyXG4gICAgICAgICAgZWFjaChfdGhpczUuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaXRlbS5lbC5jaGVja2VkICYmIHZhbHMucHVzaChpdGVtLmVsLnZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdjogdmFsc1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KCk7XHJcblxyXG4gICAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBiYWJlbEhlbHBlcnMudHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDaGVja2JveFZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRDbGFzc0lkcyA9IGZ1bmN0aW9uIF9nZXRDbGFzc0lkcyhlbCkge1xyXG4gICAgICB2YXIgY2xhc3NJZHMgPSB2b2lkIDA7XHJcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGlmIChpdGVtLmVsID09PSBlbCkge1xyXG4gICAgICAgICAgY2xhc3NJZHMgPSBpdGVtLmNsYXNzSWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjbGFzc0lkcztcclxuICAgIH07XHJcblxyXG4gICAgQ2hlY2tib3hWYWxpZGF0aW9uLnByb3RvdHlwZS5fY2hlY2tNb2RpZmllZCA9IGZ1bmN0aW9uIF9jaGVja01vZGlmaWVkKHRhcmdldCkge1xyXG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcclxuXHJcbiAgICAgIGlmICh0aGlzLl9pbml0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdCAhPT0gdGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIF9yZXQyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICBlYWNoKF90aGlzNi5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoIW1vZGlmaWVkKSB7XHJcbiAgICAgICAgICAgICAgbW9kaWZpZWQgPSBpdGVtLmluaXQgIT09IGl0ZW0uZWwuY2hlY2tlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2OiBtb2RpZmllZFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KCk7XHJcblxyXG4gICAgICAgIGlmICgodHlwZW9mIF9yZXQyID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogYmFiZWxIZWxwZXJzLnR5cGVvZihfcmV0MikpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldDIudjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gQ2hlY2tib3hWYWxpZGF0aW9uO1xyXG4gIH0oQmFzZVZhbGlkYXRpb24pO1xyXG5cclxuICAvKipcclxuICAgKiBSYWRpb1ZhbGlkYXRpb24gY2xhc3NcclxuICAgKi9cclxuXHJcbiAgdmFyIFJhZGlvVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChfQmFzZVZhbGlkYXRpb24pIHtcclxuICAgIGJhYmVsSGVscGVycy5pbmhlcml0cyhSYWRpb1ZhbGlkYXRpb24sIF9CYXNlVmFsaWRhdGlvbik7XHJcblxyXG4gICAgZnVuY3Rpb24gUmFkaW9WYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdmFsaWRhdG9yLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJhZGlvVmFsaWRhdGlvbik7XHJcblxyXG4gICAgICB2YXIgX3RoaXMgPSBiYWJlbEhlbHBlcnMucG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfQmFzZVZhbGlkYXRpb24uY2FsbCh0aGlzLCBmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHZhbGlkYXRvciwgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSk7XHJcblxyXG4gICAgICBfdGhpcy5faW5pdHMgPSBbXTtcclxuICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUubWFuYWdlRWxlbWVudCA9IGZ1bmN0aW9uIG1hbmFnZUVsZW1lbnQoZWwsIGluaXRpYWwpIHtcclxuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XHJcblxyXG4gICAgICB2YXIgc2NvcGUgPSB0aGlzLl9nZXRTY29wZSgpO1xyXG4gICAgICB2YXIgaXRlbSA9IHRoaXMuX2FkZEl0ZW0oZWwsIGluaXRpYWwpO1xyXG5cclxuICAgICAgdmFyIG1vZGVsID0gaXRlbS5tb2RlbCA9IHRoaXMuX21vZGVsO1xyXG4gICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9ldmFsTW9kZWwobW9kZWwsIHRoaXMuX2ZpbHRlcnMpO1xyXG4gICAgICAgIHRoaXMuX3NldENoZWNrZWQodmFsdWUsIGVsLCBpdGVtKTtcclxuICAgICAgICBpdGVtLnVud2F0Y2ggPSBzY29wZS4kd2F0Y2gobW9kZWwsIGZ1bmN0aW9uICh2YWwsIG9sZCkge1xyXG4gICAgICAgICAgaWYgKHZhbCAhPT0gb2xkKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpczIuZ3VhcmRWYWxpZGF0ZShpdGVtLmVsLCAnY2hhbmdlJykpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF90aGlzMi5oYW5kbGVWYWxpZGF0ZShlbCwgeyBub29wYWJsZTogaXRlbS5pbml0aWFsIH0pO1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5pbml0aWFsKSB7XHJcbiAgICAgICAgICAgICAgaXRlbS5pbml0aWFsID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0geyBmaWVsZDogdGhpcy5maWVsZCwgbm9vcGFibGU6IGluaXRpYWwgfTtcclxuICAgICAgICBpZiAodGhpcy5fY2hlY2tDbGFzc0lkcyhlbCkpIHtcclxuICAgICAgICAgIG9wdGlvbnMuZWwgPSBlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdG9yLnZhbGlkYXRlKG9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUudW5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gdW5tYW5hZ2VFbGVtZW50KGVsKSB7XHJcbiAgICAgIHZhciBmb3VuZCA9IC0xO1xyXG4gICAgICBlYWNoKHRoaXMuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICBpZiAoaXRlbS5lbCA9PT0gZWwpIHtcclxuICAgICAgICAgIGZvdW5kID0gaW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGZvdW5kID09PSAtMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5faW5pdHMuc3BsaWNlKGZvdW5kLCAxKTtcclxuICAgICAgdGhpcy5fdmFsaWRhdG9yLnZhbGlkYXRlKHsgZmllbGQ6IHRoaXMuZmllbGQgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZUZsYWdzID0gZnVuY3Rpb24gd2lsbFVwZGF0ZUZsYWdzKCkge1xyXG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcclxuXHJcbiAgICAgIHZhciB0b3VjaGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMF07XHJcblxyXG4gICAgICBlYWNoKHRoaXMuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICB0b3VjaGVkICYmIF90aGlzMy53aWxsVXBkYXRlVG91Y2hlZChpdGVtLmVsLCAnYmx1cicpO1xyXG4gICAgICAgIF90aGlzMy53aWxsVXBkYXRlRGlydHkoaXRlbS5lbCk7XHJcbiAgICAgICAgX3RoaXMzLndpbGxVcGRhdGVNb2RpZmllZChpdGVtLmVsKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgdGhpcy5yZXNldEZsYWdzKCk7XHJcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGl0ZW0uaW5pdCA9IGl0ZW0uZWwuY2hlY2tlZDtcclxuICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS5lbC52YWx1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUudXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocmVzdWx0cykge1xyXG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBlbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMV07XHJcblxyXG4gICAgICBpZiAoZWwpIHtcclxuICAgICAgICAvLyBmb3IgYW5vdGhlciBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NlcyhlbCwgcmVzdWx0cyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWFjaCh0aGlzLl9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICBfdGhpczQuX3VwZGF0ZUNsYXNzZXMoaXRlbS5lbCwgcmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS5fYWRkSXRlbSA9IGZ1bmN0aW9uIF9hZGRJdGVtKGVsLCBpbml0aWFsKSB7XHJcbiAgICAgIHZhciBpdGVtID0ge1xyXG4gICAgICAgIGVsOiBlbCxcclxuICAgICAgICBpbml0OiBlbC5jaGVja2VkLFxyXG4gICAgICAgIHZhbHVlOiBlbC52YWx1ZSxcclxuICAgICAgICBpbml0aWFsOiBpbml0aWFsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgY2xhc3NJZHMgPSBlbC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcclxuICAgICAgaWYgKGNsYXNzSWRzKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFZBTElEQVRFX1VQREFURSk7XHJcbiAgICAgICAgaXRlbS5jbGFzc0lkcyA9IGNsYXNzSWRzLnNwbGl0KCcsJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuX2luaXRzLnB1c2goaXRlbSk7XHJcbiAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfTtcclxuXHJcbiAgICBSYWRpb1ZhbGlkYXRpb24ucHJvdG90eXBlLl9zZXRDaGVja2VkID0gZnVuY3Rpb24gX3NldENoZWNrZWQodmFsdWUsIGVsLCBpdGVtKSB7XHJcbiAgICAgIGlmIChlbC52YWx1ZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICBlbC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9pbml0ID0gZWwuY2hlY2tlZDtcclxuICAgICAgICBpdGVtLmluaXQgPSBlbC5jaGVja2VkO1xyXG4gICAgICAgIGl0ZW0udmFsdWUgPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBSYWRpb1ZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRWYWx1ZSA9IGZ1bmN0aW9uIF9nZXRWYWx1ZShlbCkge1xyXG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcclxuXHJcbiAgICAgIGlmICghdGhpcy5faW5pdHMgfHwgdGhpcy5faW5pdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLmNoZWNrZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgdmFscyA9IFtdO1xyXG4gICAgICAgICAgZWFjaChfdGhpczUuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaXRlbS5lbC5jaGVja2VkICYmIHZhbHMucHVzaChpdGVtLmVsLnZhbHVlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdjogdmFsc1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KCk7XHJcblxyXG4gICAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBiYWJlbEhlbHBlcnMudHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBSYWRpb1ZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRDbGFzc0lkcyA9IGZ1bmN0aW9uIF9nZXRDbGFzc0lkcyhlbCkge1xyXG4gICAgICB2YXIgY2xhc3NJZHMgPSB2b2lkIDA7XHJcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgIGlmIChpdGVtLmVsID09PSBlbCkge1xyXG4gICAgICAgICAgY2xhc3NJZHMgPSBpdGVtLmNsYXNzSWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjbGFzc0lkcztcclxuICAgIH07XHJcblxyXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS5fY2hlY2tNb2RpZmllZCA9IGZ1bmN0aW9uIF9jaGVja01vZGlmaWVkKHRhcmdldCkge1xyXG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcclxuXHJcbiAgICAgIGlmICh0aGlzLl9pbml0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdCAhPT0gdGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIF9yZXQyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICBlYWNoKF90aGlzNi5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoIW1vZGlmaWVkKSB7XHJcbiAgICAgICAgICAgICAgbW9kaWZpZWQgPSBpdGVtLmluaXQgIT09IGl0ZW0uZWwuY2hlY2tlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2OiBtb2RpZmllZFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KCk7XHJcblxyXG4gICAgICAgIGlmICgodHlwZW9mIF9yZXQyID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogYmFiZWxIZWxwZXJzLnR5cGVvZihfcmV0MikpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldDIudjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gUmFkaW9WYWxpZGF0aW9uO1xyXG4gIH0oQmFzZVZhbGlkYXRpb24pO1xyXG5cclxuICAvKipcclxuICAgKiBTZWxlY3RWYWxpZGF0aW9uIGNsYXNzXHJcbiAgICovXHJcblxyXG4gIHZhciBTZWxlY3RWYWxpZGF0aW9uID0gZnVuY3Rpb24gKF9CYXNlVmFsaWRhdGlvbikge1xyXG4gICAgYmFiZWxIZWxwZXJzLmluaGVyaXRzKFNlbGVjdFZhbGlkYXRpb24sIF9CYXNlVmFsaWRhdGlvbik7XHJcblxyXG4gICAgZnVuY3Rpb24gU2VsZWN0VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHZhbGlkYXRvciwgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3RWYWxpZGF0aW9uKTtcclxuXHJcbiAgICAgIHZhciBfdGhpcyA9IGJhYmVsSGVscGVycy5wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlVmFsaWRhdGlvbi5jYWxsKHRoaXMsIGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdmFsaWRhdG9yLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpKTtcclxuXHJcbiAgICAgIF90aGlzLl9tdWx0aXBsZSA9IF90aGlzLl9lbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XHJcbiAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBTZWxlY3RWYWxpZGF0aW9uLnByb3RvdHlwZS5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gbWFuYWdlRWxlbWVudChlbCwgaW5pdGlhbCkge1xyXG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX2dldFNjb3BlKCk7XHJcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuX21vZGVsO1xyXG5cclxuICAgICAgdGhpcy5faW5pdGlhbCA9IGluaXRpYWw7XHJcblxyXG4gICAgICB2YXIgY2xhc3NJZHMgPSBlbC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcclxuICAgICAgaWYgKGNsYXNzSWRzKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFZBTElEQVRFX1VQREFURSk7XHJcbiAgICAgICAgdGhpcy5fY2xhc3NJZHMgPSBjbGFzc0lkcy5zcGxpdCgnLCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9ldmFsTW9kZWwobW9kZWwsIHRoaXMuX2ZpbHRlcnMpO1xyXG4gICAgICAgIHZhciB2YWx1ZXMgPSAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBbdmFsdWVdIDogdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fc2V0T3B0aW9uKHZhbHVlcywgZWwpO1xyXG4gICAgICAgIHRoaXMuX3Vud2F0Y2ggPSBzY29wZS4kd2F0Y2gobW9kZWwsIGZ1bmN0aW9uICh2YWwsIG9sZCkge1xyXG4gICAgICAgICAgdmFyIHZhbHVlczEgPSAhQXJyYXkuaXNBcnJheSh2YWwpID8gW3ZhbF0gOiB2YWw7XHJcbiAgICAgICAgICB2YXIgdmFsdWVzMiA9ICFBcnJheS5pc0FycmF5KG9sZCkgPyBbb2xkXSA6IG9sZDtcclxuICAgICAgICAgIGlmICh2YWx1ZXMxLnNsaWNlKCkuc29ydCgpLnRvU3RyaW5nKCkgIT09IHZhbHVlczIuc2xpY2UoKS5zb3J0KCkudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMyLmd1YXJkVmFsaWRhdGUoZWwsICdjaGFuZ2UnKSkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX3RoaXMyLmhhbmRsZVZhbGlkYXRlKGVsLCB7IG5vb3BhYmxlOiBfdGhpczIuX2luaXRpYWwgfSk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpczIuX2luaXRpYWwpIHtcclxuICAgICAgICAgICAgICBfdGhpczIuX2luaXRpYWwgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgU2VsZWN0VmFsaWRhdGlvbi5wcm90b3R5cGUudW5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gdW5tYW5hZ2VFbGVtZW50KGVsKSB7XHJcbiAgICAgIHRoaXMuX3Vud2F0Y2ggJiYgdGhpcy5fdW53YXRjaCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBTZWxlY3RWYWxpZGF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xyXG4gICAgICB0aGlzLnJlc2V0RmxhZ3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgU2VsZWN0VmFsaWRhdGlvbi5wcm90b3R5cGUuX2dldFZhbHVlID0gZnVuY3Rpb24gX2dldFZhbHVlKGVsKSB7XHJcbiAgICAgIHZhciByZXQgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB2YXIgb3B0aW9uID0gZWwub3B0aW9uc1tpXTtcclxuICAgICAgICBpZiAoIW9wdGlvbi5kaXNhYmxlZCAmJiBvcHRpb24uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgIHJldC5wdXNoKG9wdGlvbi52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxuXHJcbiAgICBTZWxlY3RWYWxpZGF0aW9uLnByb3RvdHlwZS5fc2V0T3B0aW9uID0gZnVuY3Rpb24gX3NldE9wdGlvbih2YWx1ZXMsIGVsKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlc1tpXTtcclxuICAgICAgICBmb3IgKHZhciBqID0gMCwgbSA9IGVsLm9wdGlvbnMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XHJcbiAgICAgICAgICB2YXIgb3B0aW9uID0gZWwub3B0aW9uc1tqXTtcclxuICAgICAgICAgIGlmICghb3B0aW9uLmRpc2FibGVkICYmIG9wdGlvbi52YWx1ZSA9PT0gdmFsdWUgJiYgKCFvcHRpb24uaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIHx8ICFvcHRpb24uc2VsZWN0ZWQpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFNlbGVjdFZhbGlkYXRpb24ucHJvdG90eXBlLl9jaGVja01vZGlmaWVkID0gZnVuY3Rpb24gX2NoZWNrTW9kaWZpZWQodGFyZ2V0KSB7XHJcbiAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLl9nZXRWYWx1ZSh0YXJnZXQpLnNsaWNlKCkuc29ydCgpO1xyXG4gICAgICBpZiAodGhpcy5faW5pdC5sZW5ndGggIT09IHZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgaW5pdHMgPSB0aGlzLl9pbml0LnNsaWNlKCkuc29ydCgpO1xyXG4gICAgICAgIHJldHVybiBpbml0cy50b1N0cmluZygpICE9PSB2YWx1ZXMudG9TdHJpbmcoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gU2VsZWN0VmFsaWRhdGlvbjtcclxuICB9KEJhc2VWYWxpZGF0aW9uKTtcclxuXHJcbiAgLyoqXHJcbiAgICogVmFsaWRhdG9yIGNsYXNzXHJcbiAgICovXHJcblxyXG4gIHZhciBWYWxpZGF0b3IkMSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbGlkYXRvcihuYW1lLCBkaXIsIGdyb3VwcywgY2xhc3Nlcykge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFZhbGlkYXRvcik7XHJcblxyXG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG5cclxuICAgICAgdGhpcy5fc2NvcGUgPSB7fTtcclxuICAgICAgdGhpcy5fZGlyID0gZGlyO1xyXG4gICAgICB0aGlzLl92YWxpZGF0aW9ucyA9IHt9O1xyXG4gICAgICB0aGlzLl9jaGVja2JveFZhbGlkYXRpb25zID0ge307XHJcbiAgICAgIHRoaXMuX3JhZGlvVmFsaWRhdGlvbnMgPSB7fTtcclxuICAgICAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzO1xyXG4gICAgICB0aGlzLl9ncm91cFZhbGlkYXRpb25zID0ge307XHJcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xyXG4gICAgICB0aGlzLl9tb2RpZmllZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLl9jbGFzc2VzID0gY2xhc3NlcztcclxuXHJcbiAgICAgIGVhY2goZ3JvdXBzLCBmdW5jdGlvbiAoZ3JvdXApIHtcclxuICAgICAgICBfdGhpcy5fZ3JvdXBWYWxpZGF0aW9uc1tncm91cF0gPSBbXTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5lbmFibGVSZWFjdGl2ZSA9IGZ1bmN0aW9uIGVuYWJsZVJlYWN0aXZlKCkge1xyXG4gICAgICB2YXIgdm0gPSB0aGlzLl9kaXIudm07XHJcblxyXG4gICAgICAvLyBkZWZpbmUgdGhlIHZhbGlkYXRpb24gc2NvcGVcclxuICAgICAgZXhwb3J0cyQxLlZ1ZS51dGlsLmRlZmluZVJlYWN0aXZlKHZtLCB0aGlzLm5hbWUsIHRoaXMuX3Njb3BlKTtcclxuICAgICAgdm0uX3ZhbGlkYXRvck1hcHNbdGhpcy5uYW1lXSA9IHRoaXM7XHJcblxyXG4gICAgICAvLyBkZWZpbmUgdGhlIHZhbGlkYXRpb24gcmVzZXR0aW5nIG1ldGEgbWV0aG9kIHRvIHZ1ZSBpbnN0YW5jZVxyXG4gICAgICB0aGlzLl9kZWZpbmVSZXNldFZhbGlkYXRpb24oKTtcclxuXHJcbiAgICAgIC8vIGRlZmluZSB0aGUgdmFsaWRhdGUgbWFudWFsbHkgbWV0YSBtZXRob2QgdG8gdnVlIGluc3RhbmNlXHJcbiAgICAgIHRoaXMuX2RlZmluZVZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAvLyBkZWZpbmUgbWFudWFsbHkgdGhlIHZhbGlkYXRpb24gZXJyb3JzXHJcbiAgICAgIHRoaXMuX2RlZmluZVNldFZhbGlkYXRpb25FcnJvcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5kaXNhYmxlUmVhY3RpdmUgPSBmdW5jdGlvbiBkaXNhYmxlUmVhY3RpdmUoKSB7XHJcbiAgICAgIHZhciB2bSA9IHRoaXMuX2Rpci52bTtcclxuICAgICAgdm0uJHNldFZhbGlkYXRpb25FcnJvcnMgPSBudWxsO1xyXG4gICAgICBkZWxldGUgdm1bJyRzZXRWYWxpZGF0aW9uRXJyb3JzJ107XHJcbiAgICAgIHZtLiR2YWxpZGF0ZSA9IG51bGw7XHJcbiAgICAgIGRlbGV0ZSB2bVsnJHZhbGlkYXRlJ107XHJcbiAgICAgIHZtLiR2YWxpZGF0b3JSZXNldCA9IG51bGw7XHJcbiAgICAgIGRlbGV0ZSB2bVsnJHZhbGlkYXRvclJlc2V0J107XHJcbiAgICAgIHZtLl92YWxpZGF0b3JNYXBzW3RoaXMubmFtZV0gPSBudWxsO1xyXG4gICAgICBkZWxldGUgdm0uX3ZhbGlkYXRvck1hcHNbdGhpcy5uYW1lXTtcclxuICAgICAgdm1bdGhpcy5uYW1lXSA9IG51bGw7XHJcbiAgICAgIGRlbGV0ZSB2bVt0aGlzLm5hbWVdO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLnJlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gcmVnaXN0ZXJFdmVudHMoKSB7XHJcbiAgICAgIHZhciBpc1NpbXBsZVBhdGggPSBleHBvcnRzJDEuVnVlLnBhcnNlcnMuZXhwcmVzc2lvbi5pc1NpbXBsZVBhdGg7XHJcblxyXG4gICAgICB2YXIgYXR0cnMgPSB0aGlzLl9kaXIuZWwuYXR0cmlidXRlcztcclxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSBhdHRyc1tpXS5uYW1lO1xyXG4gICAgICAgIGlmIChSRUdFWF9FVkVOVC50ZXN0KGV2ZW50KSkge1xyXG4gICAgICAgICAgdmFyIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XHJcbiAgICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV2ZW50ID0gZXZlbnQucmVwbGFjZShSRUdFWF9FVkVOVCwgJycpO1xyXG4gICAgICAgICAgdGhpcy5fZXZlbnRzW3RoaXMuX2dldEV2ZW50TmFtZShldmVudCldID0gdGhpcy5fZGlyLnZtLiRldmFsKHZhbHVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS51bnJlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gdW5yZWdpc3RlckV2ZW50cygpIHtcclxuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XHJcblxyXG4gICAgICBlYWNoKHRoaXMuX2V2ZW50cywgZnVuY3Rpb24gKGhhbmRsZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgX3RoaXMyLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcclxuICAgICAgICBkZWxldGUgX3RoaXMyLl9ldmVudHNbZXZlbnRdO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5tYW5hZ2VWYWxpZGF0aW9uID0gZnVuY3Rpb24gbWFuYWdlVmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIGZpbHRlcnMsIGluaXRpYWwsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xyXG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHtcclxuICAgICAgICB2YWxpZGF0aW9uID0gdGhpcy5fbWFuYWdlU2VsZWN0VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIGZpbHRlcnMsIGluaXRpYWwsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZWwudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgIHZhbGlkYXRpb24gPSB0aGlzLl9tYW5hZ2VDaGVja2JveFZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCBmaWx0ZXJzLCBpbml0aWFsLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKGVsLnR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICB2YWxpZGF0aW9uID0gdGhpcy5fbWFuYWdlUmFkaW9WYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWxpZGF0aW9uID0gdGhpcy5fbWFuYWdlQmFzZVZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCBmaWx0ZXJzLCBpbml0aWFsLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YWxpZGF0aW9uLnNldFZhbGlkYXRpb25DbGFzc2VzKHRoaXMuX2NsYXNzZXMpO1xyXG5cclxuICAgICAgcmV0dXJuIHZhbGlkYXRpb247XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUudW5tYW5hZ2VWYWxpZGF0aW9uID0gZnVuY3Rpb24gdW5tYW5hZ2VWYWxpZGF0aW9uKGZpZWxkLCBlbCkge1xyXG4gICAgICBpZiAoZWwudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgIHRoaXMuX3VubWFuYWdlQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBlbCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZWwudHlwZSA9PT0gJ3JhZGlvJykge1xyXG4gICAgICAgIHRoaXMuX3VubWFuYWdlUmFkaW9WYWxpZGF0aW9uKGZpZWxkLCBlbCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHtcclxuICAgICAgICB0aGlzLl91bm1hbmFnZVNlbGVjdFZhbGlkYXRpb24oZmllbGQsIGVsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl91bm1hbmFnZUJhc2VWYWxpZGF0aW9uKGZpZWxkLCBlbCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5hZGRHcm91cFZhbGlkYXRpb24gPSBmdW5jdGlvbiBhZGRHcm91cFZhbGlkYXRpb24oZ3JvdXAsIGZpZWxkKSB7XHJcbiAgICAgIHZhciBpbmRleE9mID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmluZGV4T2Y7XHJcblxyXG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuX2dldFZhbGlkYXRpb25Gcm9tKGZpZWxkKTtcclxuICAgICAgdmFyIHZhbGlkYXRpb25zID0gdGhpcy5fZ3JvdXBWYWxpZGF0aW9uc1tncm91cF07XHJcblxyXG4gICAgICB2YWxpZGF0aW9ucyAmJiAhIH5pbmRleE9mKHZhbGlkYXRpb25zLCB2YWxpZGF0aW9uKSAmJiB2YWxpZGF0aW9ucy5wdXNoKHZhbGlkYXRpb24pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLnJlbW92ZUdyb3VwVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIHJlbW92ZUdyb3VwVmFsaWRhdGlvbihncm91cCwgZmllbGQpIHtcclxuICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLl9nZXRWYWxpZGF0aW9uRnJvbShmaWVsZCk7XHJcbiAgICAgIHZhciB2YWxpZGF0aW9ucyA9IHRoaXMuX2dyb3VwVmFsaWRhdGlvbnNbZ3JvdXBdO1xyXG5cclxuICAgICAgdmFsaWRhdGlvbnMgJiYgcHVsbCh2YWxpZGF0aW9ucywgdmFsaWRhdGlvbik7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZSgpIHtcclxuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcclxuXHJcbiAgICAgIHZhciBfcmVmJGVsID0gX3JlZi5lbDtcclxuICAgICAgdmFyIGVsID0gX3JlZiRlbCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkZWw7XHJcbiAgICAgIHZhciBfcmVmJGZpZWxkID0gX3JlZi5maWVsZDtcclxuICAgICAgdmFyIGZpZWxkID0gX3JlZiRmaWVsZCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkZmllbGQ7XHJcbiAgICAgIHZhciBfcmVmJHRvdWNoZWQgPSBfcmVmLnRvdWNoZWQ7XHJcbiAgICAgIHZhciB0b3VjaGVkID0gX3JlZiR0b3VjaGVkID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkdG91Y2hlZDtcclxuICAgICAgdmFyIF9yZWYkbm9vcGFibGUgPSBfcmVmLm5vb3BhYmxlO1xyXG4gICAgICB2YXIgbm9vcGFibGUgPSBfcmVmJG5vb3BhYmxlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkbm9vcGFibGU7XHJcbiAgICAgIHZhciBfcmVmJGNiID0gX3JlZi5jYjtcclxuICAgICAgdmFyIGNiID0gX3JlZiRjYiA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkY2I7XHJcblxyXG4gICAgICBpZiAoIWZpZWxkKSB7XHJcbiAgICAgICAgLy8gYWxsXHJcbiAgICAgICAgZWFjaCh0aGlzLnZhbGlkYXRpb25zLCBmdW5jdGlvbiAodmFsaWRhdGlvbiwga2V5KSB7XHJcbiAgICAgICAgICB2YWxpZGF0aW9uLndpbGxVcGRhdGVGbGFncyh0b3VjaGVkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZXMoY2IpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGVhY2ggZmllbGRcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZShmaWVsZCwgdG91Y2hlZCwgbm9vcGFibGUsIGVsLCBjYik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5zZXR1cFNjb3BlID0gZnVuY3Rpb24gc2V0dXBTY29wZSgpIHtcclxuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XHJcblxyXG4gICAgICB0aGlzLl9kZWZpbmVQcm9wZXJ0aWVzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX3RoaXMzLnZhbGlkYXRpb25zO1xyXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzMy5fc2NvcGU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZWFjaCh0aGlzLl9ncm91cHMsIGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHZhbGlkYXRpb25zID0gX3RoaXMzLl9ncm91cFZhbGlkYXRpb25zW25hbWVdO1xyXG4gICAgICAgIHZhciBncm91cCA9IHt9O1xyXG4gICAgICAgIGV4cG9ydHMkMS5WdWUuc2V0KF90aGlzMy5fc2NvcGUsIG5hbWUsIGdyb3VwKTtcclxuICAgICAgICBfdGhpczMuX2RlZmluZVByb3BlcnRpZXMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25zO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHJldHVybiBncm91cDtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUud2FpdEZvciA9IGZ1bmN0aW9uIHdhaXRGb3IoY2IpIHtcclxuICAgICAgdmFyIG1ldGhvZCA9ICckYWN0aXZhdGVWYWxpZGF0b3InO1xyXG4gICAgICB2YXIgdm0gPSB0aGlzLl9kaXIudm07XHJcblxyXG4gICAgICB2bVttZXRob2RdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNiKCk7XHJcbiAgICAgICAgdm1bbWV0aG9kXSA9IG51bGw7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVJlc2V0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIF9kZWZpbmVSZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5fZGlyLnZtLiRyZXNldFZhbGlkYXRpb24gPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICBfdGhpczQuX3Jlc2V0VmFsaWRhdGlvbihjYik7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVZhbGlkYXRlID0gZnVuY3Rpb24gX2RlZmluZVZhbGlkYXRlKCkge1xyXG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuX2Rpci52bS4kdmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcclxuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGQgPSBudWxsO1xyXG4gICAgICAgIHZhciB0b3VjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGNiID0gbnVsbDtcclxuXHJcbiAgICAgICAgZWFjaChhcmdzLCBmdW5jdGlvbiAoYXJnLCBpbmRleCkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZpZWxkID0gYXJnO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgdG91Y2hlZCA9IGFyZztcclxuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjYiA9IGFyZztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgX3RoaXM1LnZhbGlkYXRlKHsgZmllbGQ6IGZpZWxkLCB0b3VjaGVkOiB0b3VjaGVkLCBjYjogY2IgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVNldFZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiBfZGVmaW5lU2V0VmFsaWRhdGlvbkVycm9ycygpIHtcclxuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XHJcblxyXG4gICAgICB0aGlzLl9kaXIudm0uJHNldFZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiAoZXJyb3JzKSB7XHJcbiAgICAgICAgX3RoaXM2Ll9zZXRWYWxpZGF0aW9uRXJyb3JzKGVycm9ycyk7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRlID0gZnVuY3Rpb24gX3ZhbGlkYXRlKGZpZWxkKSB7XHJcbiAgICAgIHZhciB0b3VjaGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMV07XHJcbiAgICAgIHZhciBub29wYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzJdO1xyXG5cclxuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XHJcblxyXG4gICAgICB2YXIgZWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzNdO1xyXG4gICAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzRdO1xyXG5cclxuICAgICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGU7XHJcblxyXG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuX2dldFZhbGlkYXRpb25Gcm9tKGZpZWxkKTtcclxuICAgICAgaWYgKHZhbGlkYXRpb24pIHtcclxuICAgICAgICB2YWxpZGF0aW9uLndpbGxVcGRhdGVGbGFncyh0b3VjaGVkKTtcclxuICAgICAgICB2YWxpZGF0aW9uLnZhbGlkYXRlKGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICBleHBvcnRzJDEuVnVlLnNldChzY29wZSwgZmllbGQsIHJlc3VsdHMpO1xyXG4gICAgICAgICAgX3RoaXM3Ll9maXJlRXZlbnRzKCk7XHJcbiAgICAgICAgICBjYiAmJiBjYigpO1xyXG4gICAgICAgIH0sIG5vb3BhYmxlLCBlbCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fdmFsaWRhdGVzID0gZnVuY3Rpb24gX3ZhbGlkYXRlcyhjYikge1xyXG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlO1xyXG5cclxuICAgICAgdGhpcy5fcnVuVmFsaWRhdGVzKGZ1bmN0aW9uICh2YWxpZGF0aW9uLCBrZXksIGRvbmUpIHtcclxuICAgICAgICB2YWxpZGF0aW9uLnZhbGlkYXRlKGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICBleHBvcnRzJDEuVnVlLnNldChzY29wZSwga2V5LCByZXN1bHRzKTtcclxuICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGZpbmlzaGVkXHJcbiAgICAgICAgX3RoaXM4Ll9maXJlRXZlbnRzKCk7XHJcbiAgICAgICAgY2IgJiYgY2IoKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2dldFZhbGlkYXRpb25Gcm9tID0gZnVuY3Rpb24gX2dldFZhbGlkYXRpb25Gcm9tKGZpZWxkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF0gfHwgdGhpcy5fY2hlY2tib3hWYWxpZGF0aW9uc1tmaWVsZF0gJiYgdGhpcy5fY2hlY2tib3hWYWxpZGF0aW9uc1tmaWVsZF0udmFsaWRhdGlvbiB8fCB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXSAmJiB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXS52YWxpZGF0aW9uO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9yZXNldFZhbGlkYXRpb24gPSBmdW5jdGlvbiBfcmVzZXRWYWxpZGF0aW9uKGNiKSB7XHJcbiAgICAgIGVhY2godGhpcy52YWxpZGF0aW9ucywgZnVuY3Rpb24gKHZhbGlkYXRpb24sIGtleSkge1xyXG4gICAgICAgIHZhbGlkYXRpb24ucmVzZXQoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX3ZhbGlkYXRlcyhjYik7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3NldFZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiBfc2V0VmFsaWRhdGlvbkVycm9ycyhlcnJvcnMpIHtcclxuICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XHJcblxyXG4gICAgICB2YXIgZXh0ZW5kID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmV4dGVuZDtcclxuXHJcbiAgICAgIC8vIG1ha2UgdGVtcG9sYWx5IGVycm9yc1xyXG5cclxuICAgICAgdmFyIHRlbXAgPSB7fTtcclxuICAgICAgZWFjaChlcnJvcnMsIGZ1bmN0aW9uIChlcnJvciwgaW5kZXgpIHtcclxuICAgICAgICBpZiAoIXRlbXBbZXJyb3IuZmllbGRdKSB7XHJcbiAgICAgICAgICB0ZW1wW2Vycm9yLmZpZWxkXSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZW1wW2Vycm9yLmZpZWxkXS5wdXNoKGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBzZXQgZXJyb3JzXHJcbiAgICAgIGVhY2godGVtcCwgZnVuY3Rpb24gKHZhbHVlcywgZmllbGQpIHtcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IF90aGlzOS5fc2NvcGVbZmllbGRdO1xyXG4gICAgICAgIHZhciBuZXdSZXN1bHRzID0ge307XHJcblxyXG4gICAgICAgIGVhY2godmFsdWVzLCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgIGlmIChlcnJvci52YWxpZGF0b3IpIHtcclxuICAgICAgICAgICAgcmVzdWx0c1tlcnJvci52YWxpZGF0b3JdID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmVzdWx0cy52YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIHJlc3VsdHMuaW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgcmVzdWx0cy5lcnJvcnMgPSB2YWx1ZXM7XHJcbiAgICAgICAgZXh0ZW5kKG5ld1Jlc3VsdHMsIHJlc3VsdHMpO1xyXG5cclxuICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IF90aGlzOS5fZ2V0VmFsaWRhdGlvbkZyb20oZmllbGQpO1xyXG4gICAgICAgIHZhbGlkYXRpb24ud2lsbFVwZGF0ZUNsYXNzZXMobmV3UmVzdWx0cywgdmFsaWRhdGlvbi5lbCk7XHJcblxyXG4gICAgICAgIGV4cG9ydHMkMS5WdWUuc2V0KF90aGlzOS5fc2NvcGUsIGZpZWxkLCBuZXdSZXN1bHRzKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX21hbmFnZUJhc2VWYWxpZGF0aW9uID0gZnVuY3Rpb24gX21hbmFnZUJhc2VWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy5fdmFsaWRhdGlvbnNbZmllbGRdID0gbmV3IEJhc2VWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdGhpcywgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKTtcclxuICAgICAgdmFsaWRhdGlvbi5tYW5hZ2VFbGVtZW50KGVsLCBpbml0aWFsKTtcclxuICAgICAgcmV0dXJuIHZhbGlkYXRpb247XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3VubWFuYWdlQmFzZVZhbGlkYXRpb24gPSBmdW5jdGlvbiBfdW5tYW5hZ2VCYXNlVmFsaWRhdGlvbihmaWVsZCwgZWwpIHtcclxuICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF07XHJcbiAgICAgIGlmICh2YWxpZGF0aW9uKSB7XHJcbiAgICAgICAgdmFsaWRhdGlvbi51bm1hbmFnZUVsZW1lbnQoZWwpO1xyXG4gICAgICAgIGV4cG9ydHMkMS5WdWUuZGVsZXRlKHRoaXMuX3Njb3BlLCBmaWVsZCk7XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbnNbZmllbGRdID0gbnVsbDtcclxuICAgICAgICBkZWxldGUgdGhpcy5fdmFsaWRhdGlvbnNbZmllbGRdO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX21hbmFnZUNoZWNrYm94VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIF9tYW5hZ2VDaGVja2JveFZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCBmaWx0ZXJzLCBpbml0aWFsLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgdmFyIHZhbGlkYXRpb25TZXQgPSB0aGlzLl9jaGVja2JveFZhbGlkYXRpb25zW2ZpZWxkXTtcclxuICAgICAgaWYgKCF2YWxpZGF0aW9uU2V0KSB7XHJcbiAgICAgICAgdmFyIHZhbGlkYXRpb24gPSBuZXcgQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdGhpcywgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKTtcclxuICAgICAgICB2YWxpZGF0aW9uU2V0ID0geyB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLCBlbGVtZW50czogMCB9O1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdID0gdmFsaWRhdGlvblNldDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFsaWRhdGlvblNldC5lbGVtZW50cysrO1xyXG4gICAgICB2YWxpZGF0aW9uU2V0LnZhbGlkYXRpb24ubWFuYWdlRWxlbWVudChlbCwgaW5pdGlhbCk7XHJcbiAgICAgIHJldHVybiB2YWxpZGF0aW9uU2V0LnZhbGlkYXRpb247XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3VubWFuYWdlQ2hlY2tib3hWYWxpZGF0aW9uID0gZnVuY3Rpb24gX3VubWFuYWdlQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBlbCkge1xyXG4gICAgICB2YXIgdmFsaWRhdGlvblNldCA9IHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdO1xyXG4gICAgICBpZiAodmFsaWRhdGlvblNldCkge1xyXG4gICAgICAgIHZhbGlkYXRpb25TZXQuZWxlbWVudHMtLTtcclxuICAgICAgICB2YWxpZGF0aW9uU2V0LnZhbGlkYXRpb24udW5tYW5hZ2VFbGVtZW50KGVsKTtcclxuICAgICAgICBpZiAodmFsaWRhdGlvblNldC5lbGVtZW50cyA9PT0gMCkge1xyXG4gICAgICAgICAgZXhwb3J0cyQxLlZ1ZS5kZWxldGUodGhpcy5fc2NvcGUsIGZpZWxkKTtcclxuICAgICAgICAgIHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdID0gbnVsbDtcclxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jaGVja2JveFZhbGlkYXRpb25zW2ZpZWxkXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fbWFuYWdlUmFkaW9WYWxpZGF0aW9uID0gZnVuY3Rpb24gX21hbmFnZVJhZGlvVmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIGZpbHRlcnMsIGluaXRpYWwsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xyXG4gICAgICB2YXIgdmFsaWRhdGlvblNldCA9IHRoaXMuX3JhZGlvVmFsaWRhdGlvbnNbZmllbGRdO1xyXG4gICAgICBpZiAoIXZhbGlkYXRpb25TZXQpIHtcclxuICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IG5ldyBSYWRpb1ZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCB0aGlzLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpO1xyXG4gICAgICAgIHZhbGlkYXRpb25TZXQgPSB7IHZhbGlkYXRpb246IHZhbGlkYXRpb24sIGVsZW1lbnRzOiAwIH07XHJcbiAgICAgICAgdGhpcy5fcmFkaW9WYWxpZGF0aW9uc1tmaWVsZF0gPSB2YWxpZGF0aW9uU2V0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YWxpZGF0aW9uU2V0LmVsZW1lbnRzKys7XHJcbiAgICAgIHZhbGlkYXRpb25TZXQudmFsaWRhdGlvbi5tYW5hZ2VFbGVtZW50KGVsLCBpbml0aWFsKTtcclxuICAgICAgcmV0dXJuIHZhbGlkYXRpb25TZXQudmFsaWRhdGlvbjtcclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fdW5tYW5hZ2VSYWRpb1ZhbGlkYXRpb24gPSBmdW5jdGlvbiBfdW5tYW5hZ2VSYWRpb1ZhbGlkYXRpb24oZmllbGQsIGVsKSB7XHJcbiAgICAgIHZhciB2YWxpZGF0aW9uU2V0ID0gdGhpcy5fcmFkaW9WYWxpZGF0aW9uc1tmaWVsZF07XHJcbiAgICAgIGlmICh2YWxpZGF0aW9uU2V0KSB7XHJcbiAgICAgICAgdmFsaWRhdGlvblNldC5lbGVtZW50cy0tO1xyXG4gICAgICAgIHZhbGlkYXRpb25TZXQudmFsaWRhdGlvbi51bm1hbmFnZUVsZW1lbnQoZWwpO1xyXG4gICAgICAgIGlmICh2YWxpZGF0aW9uU2V0LmVsZW1lbnRzID09PSAwKSB7XHJcbiAgICAgICAgICBleHBvcnRzJDEuVnVlLmRlbGV0ZSh0aGlzLl9zY29wZSwgZmllbGQpO1xyXG4gICAgICAgICAgdGhpcy5fcmFkaW9WYWxpZGF0aW9uc1tmaWVsZF0gPSBudWxsO1xyXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX3JhZGlvVmFsaWRhdGlvbnNbZmllbGRdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9tYW5hZ2VTZWxlY3RWYWxpZGF0aW9uID0gZnVuY3Rpb24gX21hbmFnZVNlbGVjdFZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCBmaWx0ZXJzLCBpbml0aWFsLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpIHtcclxuICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF0gPSBuZXcgU2VsZWN0VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHRoaXMsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSk7XHJcbiAgICAgIHZhbGlkYXRpb24ubWFuYWdlRWxlbWVudChlbCwgaW5pdGlhbCk7XHJcbiAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl91bm1hbmFnZVNlbGVjdFZhbGlkYXRpb24gPSBmdW5jdGlvbiBfdW5tYW5hZ2VTZWxlY3RWYWxpZGF0aW9uKGZpZWxkLCBlbCkge1xyXG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuX3ZhbGlkYXRpb25zW2ZpZWxkXTtcclxuICAgICAgaWYgKHZhbGlkYXRpb24pIHtcclxuICAgICAgICB2YWxpZGF0aW9uLnVubWFuYWdlRWxlbWVudChlbCk7XHJcbiAgICAgICAgZXhwb3J0cyQxLlZ1ZS5kZWxldGUodGhpcy5fc2NvcGUsIGZpZWxkKTtcclxuICAgICAgICB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF0gPSBudWxsO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF07XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZmlyZUV2ZW50ID0gZnVuY3Rpb24gX2ZpcmVFdmVudCh0eXBlKSB7XHJcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcclxuICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0aGlzLl9nZXRFdmVudE5hbWUodHlwZSldO1xyXG4gICAgICBoYW5kbGVyICYmIHRoaXMuX2Rpci52bS4kbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGhhbmRsZXIuYXBwbHkobnVsbCwgYXJncyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9maXJlRXZlbnRzID0gZnVuY3Rpb24gX2ZpcmVFdmVudHMoKSB7XHJcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlO1xyXG5cclxuICAgICAgc2NvcGUudG91Y2hlZCAmJiB0aGlzLl9maXJlRXZlbnQoJ3RvdWNoZWQnKTtcclxuICAgICAgc2NvcGUuZGlydHkgJiYgdGhpcy5fZmlyZUV2ZW50KCdkaXJ0eScpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuX21vZGlmaWVkICE9PSBzY29wZS5tb2RpZmllZCkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudCgnbW9kaWZpZWQnLCBzY29wZS5tb2RpZmllZCk7XHJcbiAgICAgICAgdGhpcy5fbW9kaWZpZWQgPSBzY29wZS5tb2RpZmllZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHZhbGlkID0gc2NvcGUudmFsaWQ7XHJcbiAgICAgIHRoaXMuX2ZpcmVFdmVudCh2YWxpZCA/ICd2YWxpZCcgOiAnaW52YWxpZCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9nZXRFdmVudE5hbWUgPSBmdW5jdGlvbiBfZ2V0RXZlbnROYW1lKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubmFtZSArICc6JyArIHR5cGU7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh2YWxpZGF0aW9uc0dldHRlciwgdGFyZ2V0R2V0dGVyKSB7XHJcbiAgICAgIHZhciBfdGhpczEwID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBiaW5kID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmJpbmQ7XHJcblxyXG4gICAgICBlYWNoKHtcclxuICAgICAgICB2YWxpZDogeyBmbjogdGhpcy5fZGVmaW5lVmFsaWQsIGFyZzogdmFsaWRhdGlvbnNHZXR0ZXIgfSxcclxuICAgICAgICBpbnZhbGlkOiB7IGZuOiB0aGlzLl9kZWZpbmVJbnZhbGlkLCBhcmc6IHRhcmdldEdldHRlciB9LFxyXG4gICAgICAgIHRvdWNoZWQ6IHsgZm46IHRoaXMuX2RlZmluZVRvdWNoZWQsIGFyZzogdmFsaWRhdGlvbnNHZXR0ZXIgfSxcclxuICAgICAgICB1bnRvdWNoZWQ6IHsgZm46IHRoaXMuX2RlZmluZVVudG91Y2hlZCwgYXJnOiB0YXJnZXRHZXR0ZXIgfSxcclxuICAgICAgICBtb2RpZmllZDogeyBmbjogdGhpcy5fZGVmaW5lTW9kaWZpZWQsIGFyZzogdmFsaWRhdGlvbnNHZXR0ZXIgfSxcclxuICAgICAgICBkaXJ0eTogeyBmbjogdGhpcy5fZGVmaW5lRGlydHksIGFyZzogdmFsaWRhdGlvbnNHZXR0ZXIgfSxcclxuICAgICAgICBwcmlzdGluZTogeyBmbjogdGhpcy5fZGVmaW5lUHJpc3RpbmUsIGFyZzogdGFyZ2V0R2V0dGVyIH0sXHJcbiAgICAgICAgZXJyb3JzOiB7IGZuOiB0aGlzLl9kZWZpbmVFcnJvcnMsIGFyZzogdmFsaWRhdGlvbnNHZXR0ZXIgfVxyXG4gICAgICB9LCBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbmFtZSkge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXRHZXR0ZXIoKSwgbmFtZSwge1xyXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYmluZChkZXNjcmlwdG9yLmZuLCBfdGhpczEwKShkZXNjcmlwdG9yLmFyZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9ydW5WYWxpZGF0ZXMgPSBmdW5jdGlvbiBfcnVuVmFsaWRhdGVzKGZuLCBjYikge1xyXG4gICAgICB2YXIgbGVuZ3RoID0gT2JqZWN0LmtleXModGhpcy52YWxpZGF0aW9ucykubGVuZ3RoO1xyXG5cclxuICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgZWFjaCh0aGlzLnZhbGlkYXRpb25zLCBmdW5jdGlvbiAodmFsaWRhdGlvbiwga2V5KSB7XHJcbiAgICAgICAgZm4odmFsaWRhdGlvbiwga2V5LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICArK2NvdW50O1xyXG4gICAgICAgICAgY291bnQgPj0gbGVuZ3RoICYmIGNiKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl93YWxrVmFsaWRhdGlvbnMgPSBmdW5jdGlvbiBfd2Fsa1ZhbGlkYXRpb25zKHZhbGlkYXRpb25zLCBwcm9wZXJ0eSwgY29uZGl0aW9uKSB7XHJcbiAgICAgIHZhciBfdGhpczExID0gdGhpcztcclxuXHJcbiAgICAgIHZhciBoYXNPd24gPSBleHBvcnRzJDEuVnVlLnV0aWwuaGFzT3duO1xyXG4gICAgICB2YXIgcmV0ID0gY29uZGl0aW9uO1xyXG5cclxuICAgICAgZWFjaCh2YWxpZGF0aW9ucywgZnVuY3Rpb24gKHZhbGlkYXRpb24sIGtleSkge1xyXG4gICAgICAgIGlmIChyZXQgPT09ICFjb25kaXRpb24pIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhc093bihfdGhpczExLl9zY29wZSwgdmFsaWRhdGlvbi5maWVsZCkpIHtcclxuICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpczExLl9zY29wZVt2YWxpZGF0aW9uLmZpZWxkXTtcclxuICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0W3Byb3BlcnR5XSA9PT0gIWNvbmRpdGlvbikge1xyXG4gICAgICAgICAgICByZXQgPSAhY29uZGl0aW9uO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVWYWxpZCA9IGZ1bmN0aW9uIF9kZWZpbmVWYWxpZCh2YWxpZGF0aW9uc0dldHRlcikge1xyXG4gICAgICByZXR1cm4gdGhpcy5fd2Fsa1ZhbGlkYXRpb25zKHZhbGlkYXRpb25zR2V0dGVyKCksICd2YWxpZCcsIHRydWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVJbnZhbGlkID0gZnVuY3Rpb24gX2RlZmluZUludmFsaWQoc2NvcGVHZXR0ZXIpIHtcclxuICAgICAgcmV0dXJuICFzY29wZUdldHRlcigpLnZhbGlkO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVUb3VjaGVkID0gZnVuY3Rpb24gX2RlZmluZVRvdWNoZWQodmFsaWRhdGlvbnNHZXR0ZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3dhbGtWYWxpZGF0aW9ucyh2YWxpZGF0aW9uc0dldHRlcigpLCAndG91Y2hlZCcsIGZhbHNlKTtcclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZGVmaW5lVW50b3VjaGVkID0gZnVuY3Rpb24gX2RlZmluZVVudG91Y2hlZChzY29wZUdldHRlcikge1xyXG4gICAgICByZXR1cm4gIXNjb3BlR2V0dGVyKCkudG91Y2hlZDtcclxuICAgIH07XHJcblxyXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZGVmaW5lTW9kaWZpZWQgPSBmdW5jdGlvbiBfZGVmaW5lTW9kaWZpZWQodmFsaWRhdGlvbnNHZXR0ZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3dhbGtWYWxpZGF0aW9ucyh2YWxpZGF0aW9uc0dldHRlcigpLCAnbW9kaWZpZWQnLCBmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZURpcnR5ID0gZnVuY3Rpb24gX2RlZmluZURpcnR5KHZhbGlkYXRpb25zR2V0dGVyKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl93YWxrVmFsaWRhdGlvbnModmFsaWRhdGlvbnNHZXR0ZXIoKSwgJ2RpcnR5JywgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVQcmlzdGluZSA9IGZ1bmN0aW9uIF9kZWZpbmVQcmlzdGluZShzY29wZUdldHRlcikge1xyXG4gICAgICByZXR1cm4gIXNjb3BlR2V0dGVyKCkuZGlydHk7XHJcbiAgICB9O1xyXG5cclxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZUVycm9ycyA9IGZ1bmN0aW9uIF9kZWZpbmVFcnJvcnModmFsaWRhdGlvbnNHZXR0ZXIpIHtcclxuICAgICAgdmFyIF90aGlzMTIgPSB0aGlzO1xyXG5cclxuICAgICAgdmFyIGhhc093biA9IGV4cG9ydHMkMS5WdWUudXRpbC5oYXNPd247XHJcbiAgICAgIHZhciBpc1BsYWluT2JqZWN0ID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmlzUGxhaW5PYmplY3Q7XHJcbiAgICAgIHZhciBlcnJvcnMgPSBbXTtcclxuXHJcbiAgICAgIGVhY2godmFsaWRhdGlvbnNHZXR0ZXIoKSwgZnVuY3Rpb24gKHZhbGlkYXRpb24sIGtleSkge1xyXG4gICAgICAgIGlmIChoYXNPd24oX3RoaXMxMi5fc2NvcGUsIHZhbGlkYXRpb24uZmllbGQpKSB7XHJcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMxMi5fc2NvcGVbdmFsaWRhdGlvbi5maWVsZF07XHJcbiAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlbXB0eSh0YXJnZXQuZXJyb3JzKSkge1xyXG4gICAgICAgICAgICBlYWNoKHRhcmdldC5lcnJvcnMsIGZ1bmN0aW9uIChlcnIsIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGVycm9yID0geyBmaWVsZDogdmFsaWRhdGlvbi5maWVsZCB9O1xyXG4gICAgICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGVycikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIudmFsaWRhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVycm9yLnZhbGlkYXRvciA9IGVyci52YWxpZGF0b3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGVycjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGVtcHR5KGVycm9ycykgPyB1bmRlZmluZWQgOiBlcnJvcnMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhLmZpZWxkIDwgYi5maWVsZCA/IC0xIDogMTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyhWYWxpZGF0b3IsIFt7XHJcbiAgICAgIGtleTogJ3ZhbGlkYXRpb25zJyxcclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgdmFyIGV4dGVuZCA9IGV4cG9ydHMkMS5WdWUudXRpbC5leHRlbmQ7XHJcblxyXG4gICAgICAgIHZhciByZXQgPSB7fTtcclxuICAgICAgICBleHRlbmQocmV0LCB0aGlzLl92YWxpZGF0aW9ucyk7XHJcblxyXG4gICAgICAgIGVhY2godGhpcy5fY2hlY2tib3hWYWxpZGF0aW9ucywgZnVuY3Rpb24gKGRhdGFzZXQsIGtleSkge1xyXG4gICAgICAgICAgcmV0W2tleV0gPSBkYXRhc2V0LnZhbGlkYXRpb247XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVhY2godGhpcy5fcmFkaW9WYWxpZGF0aW9ucywgZnVuY3Rpb24gKGRhdGFzZXQsIGtleSkge1xyXG4gICAgICAgICAgcmV0W2tleV0gPSBkYXRhc2V0LnZhbGlkYXRpb247XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuICAgIHJldHVybiBWYWxpZGF0b3I7XHJcbiAgfSgpO1xyXG5cclxuICBmdW5jdGlvbiBWYWxpZGF0b3IgKFZ1ZSkge1xyXG4gICAgdmFyIEZyYWdtZW50RmFjdG9yeSA9IFZ1ZS5GcmFnbWVudEZhY3Rvcnk7XHJcbiAgICB2YXIgdklmID0gVnVlLmRpcmVjdGl2ZSgnaWYnKTtcclxuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcclxuICAgIHZhciBpc0FycmF5ID0gX1Z1ZSR1dGlsLmlzQXJyYXk7XHJcbiAgICB2YXIgaXNQbGFpbk9iamVjdCA9IF9WdWUkdXRpbC5pc1BsYWluT2JqZWN0O1xyXG4gICAgdmFyIGNyZWF0ZUFuY2hvciA9IF9WdWUkdXRpbC5jcmVhdGVBbmNob3I7XHJcbiAgICB2YXIgcmVwbGFjZSA9IF9WdWUkdXRpbC5yZXBsYWNlO1xyXG4gICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XHJcbiAgICB2YXIgY2FtZWxpemUgPSBfVnVlJHV0aWwuY2FtZWxpemU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBgdmFsaWRhdG9yYCBlbGVtZW50IGRpcmVjdGl2ZVxyXG4gICAgICovXHJcblxyXG4gICAgVnVlLmVsZW1lbnREaXJlY3RpdmUoJ3ZhbGlkYXRvcicsIHtcclxuICAgICAgcGFyYW1zOiBbJ25hbWUnLCAnZ3JvdXBzJywgJ2xhenknLCAnY2xhc3NlcyddLFxyXG5cclxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XHJcblxyXG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgIXBhcmFtcy5uYW1lKSB7XHJcbiAgICAgICAgICB3YXJuKCd2YWxpZGF0b3IgZWxlbWVudCByZXF1aXJlcyBhIFxcJ25hbWVcXCcgYXR0cmlidXRlOiAnICsgJyhlLmcuIDx2YWxpZGF0b3IgbmFtZT1cInZhbGlkYXRvcjFcIj4uLi48L3ZhbGlkYXRvcj4pJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZhbGlkYXRvck5hbWUgPSAnJCcgKyBjYW1lbGl6ZShwYXJhbXMubmFtZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnZtLl92YWxpZGF0b3JNYXBzKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsaWRhdG9yIG1hbmFnZW1lbnQgZXJyb3InKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjbGFzc2VzID0ge307XHJcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGhpcy5wYXJhbXMuY2xhc3NlcykpIHtcclxuICAgICAgICAgIGNsYXNzZXMgPSB0aGlzLnBhcmFtcy5jbGFzc2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cFZhbGlkYXRvcihjbGFzc2VzKTtcclxuICAgICAgICB0aGlzLnNldHVwRnJhZ21lbnQocGFyYW1zLmxhenkpO1xyXG4gICAgICB9LFxyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICB0aGlzLnRlYXJkb3duRnJhZ21lbnQoKTtcclxuICAgICAgICB0aGlzLnRlYXJkb3duVmFsaWRhdG9yKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEdyb3VwczogZnVuY3Rpb24gZ2V0R3JvdXBzKCkge1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcclxuICAgICAgICB2YXIgZ3JvdXBzID0gW107XHJcblxyXG4gICAgICAgIGlmIChwYXJhbXMuZ3JvdXBzKSB7XHJcbiAgICAgICAgICBpZiAoaXNBcnJheShwYXJhbXMuZ3JvdXBzKSkge1xyXG4gICAgICAgICAgICBncm91cHMgPSBwYXJhbXMuZ3JvdXBzO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghaXNQbGFpbk9iamVjdChwYXJhbXMuZ3JvdXBzKSAmJiB0eXBlb2YgcGFyYW1zLmdyb3VwcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZ3JvdXBzLnB1c2gocGFyYW1zLmdyb3Vwcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZ3JvdXBzO1xyXG4gICAgICB9LFxyXG4gICAgICBzZXR1cFZhbGlkYXRvcjogZnVuY3Rpb24gc2V0dXBWYWxpZGF0b3IoY2xhc3Nlcykge1xyXG4gICAgICAgIHZhciB2YWxpZGF0b3IgPSB0aGlzLnZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3IkMSh0aGlzLnZhbGlkYXRvck5hbWUsIHRoaXMsIHRoaXMuZ2V0R3JvdXBzKCksIGNsYXNzZXMpO1xyXG4gICAgICAgIHZhbGlkYXRvci5lbmFibGVSZWFjdGl2ZSgpO1xyXG4gICAgICAgIHZhbGlkYXRvci5zZXR1cFNjb3BlKCk7XHJcbiAgICAgICAgdmFsaWRhdG9yLnJlZ2lzdGVyRXZlbnRzKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRlYXJkb3duVmFsaWRhdG9yOiBmdW5jdGlvbiB0ZWFyZG93blZhbGlkYXRvcigpIHtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvci51bnJlZ2lzdGVyRXZlbnRzKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3IuZGlzYWJsZVJlYWN0aXZlKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRvck5hbWUpIHtcclxuICAgICAgICAgIHRoaXMudmFsaWRhdG9yTmFtZSA9IG51bGw7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkYXRvciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzZXR1cEZyYWdtZW50OiBmdW5jdGlvbiBzZXR1cEZyYWdtZW50KGxhenkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICB2YXIgdm0gPSB0aGlzLnZtO1xyXG5cclxuICAgICAgICB0aGlzLnZhbGlkYXRvci53YWl0Rm9yKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIF90aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndnVlLXZhbGlkYXRvcicpO1xyXG4gICAgICAgICAgcmVwbGFjZShfdGhpcy5lbCwgX3RoaXMuYW5jaG9yKTtcclxuICAgICAgICAgIGV4dGVuZCh2bS4kb3B0aW9ucywgeyBfdmFsaWRhdG9yOiBfdGhpcy52YWxpZGF0b3JOYW1lIH0pO1xyXG4gICAgICAgICAgX3RoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3Rvcnkodm0sIF90aGlzLmVsLmlubmVySFRNTCk7XHJcbiAgICAgICAgICB2SWYuaW5zZXJ0LmNhbGwoX3RoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAhbGF6eSAmJiB2bS4kYWN0aXZhdGVWYWxpZGF0b3IoKTtcclxuICAgICAgfSxcclxuICAgICAgdGVhcmRvd25GcmFnbWVudDogZnVuY3Rpb24gdGVhcmRvd25GcmFnbWVudCgpIHtcclxuICAgICAgICB2SWYudW5iaW5kLmNhbGwodGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gVmFsaWRhdG9yRXJyb3IgKFZ1ZSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0b3JFcnJvciBjb21wb25lbnRcclxuICAgICAqL1xyXG5cclxuICAgIHZhciBlcnJvciA9IHtcclxuICAgICAgbmFtZTogJ3ZhbGlkYXRvci1lcnJvcicsXHJcblxyXG4gICAgICBwcm9wczoge1xyXG4gICAgICAgIGZpZWxkOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFsaWRhdG9yOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmdcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1lc3NhZ2U6IHtcclxuICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXJ0aWFsOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICBkZWZhdWx0OiAndmFsaWRhdG9yLWVycm9yLWRlZmF1bHQnXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGVtcGxhdGU6ICc8ZGl2PjxwYXJ0aWFsIDpuYW1lPVwicGFydGlhbFwiPjwvcGFydGlhbD48L2Rpdj4nLFxyXG5cclxuICAgICAgcGFydGlhbHM6IHt9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG9ubHkgdXNlIFZhbGlkYXRvckVycm9yIGNvbXBvbmVudFxyXG4gICAgZXJyb3IucGFydGlhbHNbJ3ZhbGlkYXRvci1lcnJvci1kZWZhdWx0J10gPSAnPHA+e3tmaWVsZH19OiB7e21lc3NhZ2V9fTwvcD4nO1xyXG5cclxuICAgIHJldHVybiBlcnJvcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIEVycm9ycyAoVnVlKSB7XHJcbiAgICB2YXIgXyA9IFZ1ZS51dGlsO1xyXG4gICAgdmFyIGVycm9yID0gVmFsaWRhdG9yRXJyb3IoVnVlKTsgLy8gaW1wb3J0IFZhbGlkYXRvckVycm9yIGNvbXBvbmVudFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdG9yRXJyb3JzIGNvbXBvbmVudFxyXG4gICAgICovXHJcblxyXG4gICAgdmFyIGVycm9ycyA9IHtcclxuICAgICAgbmFtZTogJ3ZhbGlkYXRvci1lcnJvcnMnLFxyXG5cclxuICAgICAgcHJvcHM6IHtcclxuICAgICAgICB2YWxpZGF0aW9uOiB7XHJcbiAgICAgICAgICB0eXBlOiBPYmplY3QsXHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ3JvdXA6IHtcclxuICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgIGRlZmF1bHQ6IG51bGxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZpZWxkOiB7XHJcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICBkZWZhdWx0OiBudWxsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wb25lbnQ6IHtcclxuICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0b3ItZXJyb3InXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgY29tcHV0ZWQ6IHtcclxuICAgICAgICBlcnJvcnM6IGZ1bmN0aW9uIGVycm9ycygpIHtcclxuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMuZ3JvdXAgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGlvblt0aGlzLmdyb3VwXS5lcnJvcnM7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZmllbGQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudmFsaWRhdGlvblt0aGlzLmZpZWxkXTtcclxuICAgICAgICAgICAgaWYgKCF0YXJnZXQuZXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmVycm9ycy5tYXAoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGVyciA9IHsgZmllbGQ6IF90aGlzLmZpZWxkIH07XHJcbiAgICAgICAgICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChlcnJvcikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci52YWxpZGF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgZXJyLnZhbGlkYXRvciA9IGVycm9yLnZhbGlkYXRvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVyci5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGVyci5tZXNzYWdlID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiBlcnI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGlvbi5lcnJvcnM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGVtcGxhdGU6ICc8dGVtcGxhdGUgdi1mb3I9XCJlcnJvciBpbiBlcnJvcnNcIj4nICsgJzxjb21wb25lbnQgOmlzPVwiY29tcG9uZW50XCIgOnBhcnRpYWw9XCJwYXJ0aWFsXCIgOmZpZWxkPVwiZXJyb3IuZmllbGRcIiA6dmFsaWRhdG9yPVwiZXJyb3IudmFsaWRhdG9yXCIgOm1lc3NhZ2U9XCJlcnJvci5tZXNzYWdlXCI+JyArICc8L2NvbXBvbmVudD4nICsgJzwvdGVtcGxhdGU+JyxcclxuXHJcbiAgICAgIGNvbXBvbmVudHM6IHt9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRlZmluZSAncGFydGlhbCcgcHJvcFxyXG4gICAgZXJyb3JzLnByb3BzWydwYXJ0aWFsJ10gPSBlcnJvci5wcm9wc1sncGFydGlhbCddO1xyXG5cclxuICAgIC8vIG9ubHkgdXNlIFZhbGlkYXRvckVycm9ycyBjb21wb25lbnRcclxuICAgIGVycm9ycy5jb21wb25lbnRzW2Vycm9yLm5hbWVdID0gZXJyb3I7XHJcblxyXG4gICAgLy8gaW5zdGFsbCBWYWxpZGF0b3JFcnJvcnMgY29tcG9uZW50XHJcbiAgICBWdWUuY29tcG9uZW50KGVycm9ycy5uYW1lLCBlcnJvcnMpO1xyXG5cclxuICAgIHJldHVybiBlcnJvcnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBwbHVnaW5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFZ1ZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICovXHJcblxyXG4gIGZ1bmN0aW9uIHBsdWdpbihWdWUpIHtcclxuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XHJcblxyXG4gICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcclxuICAgICAgd2FybignYWxyZWFkeSBpbnN0YWxsZWQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnRzJDEuVnVlID0gVnVlO1xyXG4gICAgQXNzZXQoVnVlKTtcclxuICAgIEVycm9ycyhWdWUpO1xyXG5cclxuICAgIE92ZXJyaWRlKFZ1ZSk7XHJcbiAgICBWYWxpZGF0b3IoVnVlKTtcclxuICAgIFZhbGlkYXRlQ2xhc3MoVnVlKTtcclxuICAgIFZhbGlkYXRlKFZ1ZSk7XHJcbiAgfVxyXG5cclxuICBwbHVnaW4udmVyc2lvbiA9ICcyLjEuMyc7XHJcblxyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XHJcbiAgICB3aW5kb3cuVnVlLnVzZShwbHVnaW4pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHBsdWdpbjtcclxuXHJcbn0pKTsiLCIvLyEgbW9tZW50LmpzXHJcbi8vISB2ZXJzaW9uIDogMi4xNC4xXHJcbi8vISBhdXRob3JzIDogVGltIFdvb2QsIElza3JlbiBDaGVybmV2LCBNb21lbnQuanMgY29udHJpYnV0b3JzXHJcbi8vISBsaWNlbnNlIDogTUlUXHJcbi8vISBtb21lbnRqcy5jb21cclxuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9YigpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoYik6YS5tb21lbnQ9YigpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYSgpe3JldHVybiBtZC5hcHBseShudWxsLGFyZ3VtZW50cyl9XHJcbi8vIFRoaXMgaXMgZG9uZSB0byByZWdpc3RlciB0aGUgbWV0aG9kIGNhbGxlZCB3aXRoIG1vbWVudCgpXHJcbi8vIHdpdGhvdXQgY3JlYXRpbmcgY2lyY3VsYXIgZGVwZW5kZW5jaWVzLlxyXG5mdW5jdGlvbiBiKGEpe21kPWF9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHxcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9ZnVuY3Rpb24gZChhKXtyZXR1cm5cIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfWZ1bmN0aW9uIGUoYSl7dmFyIGI7Zm9yKGIgaW4gYSlcclxuLy8gZXZlbiBpZiBpdHMgbm90IG93biBwcm9wZXJ0eSBJJ2Qgc3RpbGwgY2FsbCBpdCBub24tZW1wdHlcclxucmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIERhdGV8fFwiW29iamVjdCBEYXRlXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYyxkPVtdO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2MpZC5wdXNoKGIoYVtjXSxjKSk7cmV0dXJuIGR9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX1mdW5jdGlvbiBpKGEsYil7Zm9yKHZhciBjIGluIGIpaChiLGMpJiYoYVtjXT1iW2NdKTtyZXR1cm4gaChiLFwidG9TdHJpbmdcIikmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpLGgoYixcInZhbHVlT2ZcIikmJihhLnZhbHVlT2Y9Yi52YWx1ZU9mKSxhfWZ1bmN0aW9uIGooYSxiLGMsZCl7cmV0dXJuIHFiKGEsYixjLGQsITApLnV0YygpfWZ1bmN0aW9uIGsoKXtcclxuLy8gV2UgbmVlZCB0byBkZWVwIGNsb25lIHRoaXMgb2JqZWN0LlxyXG5yZXR1cm57ZW1wdHk6ITEsdW51c2VkVG9rZW5zOltdLHVudXNlZElucHV0OltdLG92ZXJmbG93Oi0yLGNoYXJzTGVmdE92ZXI6MCxudWxsSW5wdXQ6ITEsaW52YWxpZE1vbnRoOm51bGwsaW52YWxpZEZvcm1hdDohMSx1c2VySW52YWxpZGF0ZWQ6ITEsaXNvOiExLHBhcnNlZERhdGVQYXJ0czpbXSxtZXJpZGllbTpudWxsfX1mdW5jdGlvbiBsKGEpe3JldHVybiBudWxsPT1hLl9wZiYmKGEuX3BmPWsoKSksYS5fcGZ9ZnVuY3Rpb24gbShhKXtpZihudWxsPT1hLl9pc1ZhbGlkKXt2YXIgYj1sKGEpLGM9bmQuY2FsbChiLnBhcnNlZERhdGVQYXJ0cyxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YX0pO2EuX2lzVmFsaWQ9IWlzTmFOKGEuX2QuZ2V0VGltZSgpKSYmYi5vdmVyZmxvdzwwJiYhYi5lbXB0eSYmIWIuaW52YWxpZE1vbnRoJiYhYi5pbnZhbGlkV2Vla2RheSYmIWIubnVsbElucHV0JiYhYi5pbnZhbGlkRm9ybWF0JiYhYi51c2VySW52YWxpZGF0ZWQmJighYi5tZXJpZGllbXx8Yi5tZXJpZGllbSYmYyksYS5fc3RyaWN0JiYoYS5faXNWYWxpZD1hLl9pc1ZhbGlkJiYwPT09Yi5jaGFyc0xlZnRPdmVyJiYwPT09Yi51bnVzZWRUb2tlbnMubGVuZ3RoJiZ2b2lkIDA9PT1iLmJpZ0hvdXIpfXJldHVybiBhLl9pc1ZhbGlkfWZ1bmN0aW9uIG4oYSl7dmFyIGI9aihOYU4pO3JldHVybiBudWxsIT1hP2kobChiKSxhKTpsKGIpLnVzZXJJbnZhbGlkYXRlZD0hMCxifWZ1bmN0aW9uIG8oYSl7cmV0dXJuIHZvaWQgMD09PWF9ZnVuY3Rpb24gcChhLGIpe3ZhciBjLGQsZTtpZihvKGIuX2lzQU1vbWVudE9iamVjdCl8fChhLl9pc0FNb21lbnRPYmplY3Q9Yi5faXNBTW9tZW50T2JqZWN0KSxvKGIuX2kpfHwoYS5faT1iLl9pKSxvKGIuX2YpfHwoYS5fZj1iLl9mKSxvKGIuX2wpfHwoYS5fbD1iLl9sKSxvKGIuX3N0cmljdCl8fChhLl9zdHJpY3Q9Yi5fc3RyaWN0KSxvKGIuX3R6bSl8fChhLl90em09Yi5fdHptKSxvKGIuX2lzVVRDKXx8KGEuX2lzVVRDPWIuX2lzVVRDKSxvKGIuX29mZnNldCl8fChhLl9vZmZzZXQ9Yi5fb2Zmc2V0KSxvKGIuX3BmKXx8KGEuX3BmPWwoYikpLG8oYi5fbG9jYWxlKXx8KGEuX2xvY2FsZT1iLl9sb2NhbGUpLG9kLmxlbmd0aD4wKWZvcihjIGluIG9kKWQ9b2RbY10sZT1iW2RdLG8oZSl8fChhW2RdPWUpO3JldHVybiBhfVxyXG4vLyBNb21lbnQgcHJvdG90eXBlIG9iamVjdFxyXG5mdW5jdGlvbiBxKGIpe3AodGhpcyxiKSx0aGlzLl9kPW5ldyBEYXRlKG51bGwhPWIuX2Q/Yi5fZC5nZXRUaW1lKCk6TmFOKSxwZD09PSExJiYocGQ9ITAsYS51cGRhdGVPZmZzZXQodGhpcykscGQ9ITEpfWZ1bmN0aW9uIHIoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBxfHxudWxsIT1hJiZudWxsIT1hLl9pc0FNb21lbnRPYmplY3R9ZnVuY3Rpb24gcyhhKXtyZXR1cm4gMD5hP01hdGguY2VpbChhKXx8MDpNYXRoLmZsb29yKGEpfWZ1bmN0aW9uIHQoYSl7dmFyIGI9K2EsYz0wO3JldHVybiAwIT09YiYmaXNGaW5pdGUoYikmJihjPXMoYikpLGN9XHJcbi8vIGNvbXBhcmUgdHdvIGFycmF5cywgcmV0dXJuIHRoZSBudW1iZXIgb2YgZGlmZmVyZW5jZXNcclxuZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQsZT1NYXRoLm1pbihhLmxlbmd0aCxiLmxlbmd0aCksZj1NYXRoLmFicyhhLmxlbmd0aC1iLmxlbmd0aCksZz0wO2ZvcihkPTA7ZT5kO2QrKykoYyYmYVtkXSE9PWJbZF18fCFjJiZ0KGFbZF0pIT09dChiW2RdKSkmJmcrKztyZXR1cm4gZytmfWZ1bmN0aW9uIHYoYil7YS5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9PT0hMSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gd2FybmluZzogXCIrYil9ZnVuY3Rpb24gdyhiLGMpe3ZhciBkPSEwO3JldHVybiBpKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPWEuZGVwcmVjYXRpb25IYW5kbGVyJiZhLmRlcHJlY2F0aW9uSGFuZGxlcihudWxsLGIpLGQmJih2KGIrXCJcXG5Bcmd1bWVudHM6IFwiK0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbihcIiwgXCIpK1wiXFxuXCIrKG5ldyBFcnJvcikuc3RhY2spLGQ9ITEpLGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjKX1mdW5jdGlvbiB4KGIsYyl7bnVsbCE9YS5kZXByZWNhdGlvbkhhbmRsZXImJmEuZGVwcmVjYXRpb25IYW5kbGVyKGIsYykscWRbYl18fCh2KGMpLHFkW2JdPSEwKX1mdW5jdGlvbiB5KGEpe3JldHVybiBhIGluc3RhbmNlb2YgRnVuY3Rpb258fFwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX1mdW5jdGlvbiB6KGEpe3ZhciBiLGM7Zm9yKGMgaW4gYSliPWFbY10seShiKT90aGlzW2NdPWI6dGhpc1tcIl9cIitjXT1iO3RoaXMuX2NvbmZpZz1hLFxyXG4vLyBMZW5pZW50IG9yZGluYWwgcGFyc2luZyBhY2NlcHRzIGp1c3QgYSBudW1iZXIgaW4gYWRkaXRpb24gdG9cclxuLy8gbnVtYmVyICsgKHBvc3NpYmx5KSBzdHVmZiBjb21pbmcgZnJvbSBfb3JkaW5hbFBhcnNlTGVuaWVudC5cclxudGhpcy5fb3JkaW5hbFBhcnNlTGVuaWVudD1uZXcgUmVnRXhwKHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UrXCJ8XCIrL1xcZHsxLDJ9Ly5zb3VyY2UpfWZ1bmN0aW9uIEEoYSxiKXt2YXIgYyxlPWkoe30sYSk7Zm9yKGMgaW4gYiloKGIsYykmJihkKGFbY10pJiZkKGJbY10pPyhlW2NdPXt9LGkoZVtjXSxhW2NdKSxpKGVbY10sYltjXSkpOm51bGwhPWJbY10/ZVtjXT1iW2NdOmRlbGV0ZSBlW2NdKTtmb3IoYyBpbiBhKWgoYSxjKSYmIWgoYixjKSYmZChhW2NdKSYmKFxyXG4vLyBtYWtlIHN1cmUgY2hhbmdlcyB0byBwcm9wZXJ0aWVzIGRvbid0IG1vZGlmeSBwYXJlbnQgY29uZmlnXHJcbmVbY109aSh7fSxlW2NdKSk7cmV0dXJuIGV9ZnVuY3Rpb24gQihhKXtudWxsIT1hJiZ0aGlzLnNldChhKX1mdW5jdGlvbiBDKGEsYixjKXt2YXIgZD10aGlzLl9jYWxlbmRhclthXXx8dGhpcy5fY2FsZW5kYXIuc2FtZUVsc2U7cmV0dXJuIHkoZCk/ZC5jYWxsKGIsYyk6ZH1mdW5jdGlvbiBEKGEpe3ZhciBiPXRoaXMuX2xvbmdEYXRlRm9ybWF0W2FdLGM9dGhpcy5fbG9uZ0RhdGVGb3JtYXRbYS50b1VwcGVyQ2FzZSgpXTtyZXR1cm4gYnx8IWM/YjoodGhpcy5fbG9uZ0RhdGVGb3JtYXRbYV09Yy5yZXBsYWNlKC9NTU1NfE1NfEREfGRkZGQvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgxKX0pLHRoaXMuX2xvbmdEYXRlRm9ybWF0W2FdKX1mdW5jdGlvbiBFKCl7cmV0dXJuIHRoaXMuX2ludmFsaWREYXRlfWZ1bmN0aW9uIEYoYSl7cmV0dXJuIHRoaXMuX29yZGluYWwucmVwbGFjZShcIiVkXCIsYSl9ZnVuY3Rpb24gRyhhLGIsYyxkKXt2YXIgZT10aGlzLl9yZWxhdGl2ZVRpbWVbY107cmV0dXJuIHkoZSk/ZShhLGIsYyxkKTplLnJlcGxhY2UoLyVkL2ksYSl9ZnVuY3Rpb24gSChhLGIpe3ZhciBjPXRoaXMuX3JlbGF0aXZlVGltZVthPjA/XCJmdXR1cmVcIjpcInBhc3RcIl07cmV0dXJuIHkoYyk/YyhiKTpjLnJlcGxhY2UoLyVzL2ksYil9ZnVuY3Rpb24gSShhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTt6ZFtjXT16ZFtjK1wic1wiXT16ZFtiXT1hfWZ1bmN0aW9uIEooYSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGE/emRbYV18fHpkW2EudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIEsoYSl7dmFyIGIsYyxkPXt9O2ZvcihjIGluIGEpaChhLGMpJiYoYj1KKGMpLGImJihkW2JdPWFbY10pKTtyZXR1cm4gZH1mdW5jdGlvbiBMKGEsYil7QWRbYV09Yn1mdW5jdGlvbiBNKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWIucHVzaCh7dW5pdDpjLHByaW9yaXR5OkFkW2NdfSk7cmV0dXJuIGIuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnByaW9yaXR5LWIucHJpb3JpdHl9KSxifWZ1bmN0aW9uIE4oYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIG51bGwhPWQ/KFAodGhpcyxiLGQpLGEudXBkYXRlT2Zmc2V0KHRoaXMsYyksdGhpcyk6Tyh0aGlzLGIpfX1mdW5jdGlvbiBPKGEsYil7cmV0dXJuIGEuaXNWYWxpZCgpP2EuX2RbXCJnZXRcIisoYS5faXNVVEM/XCJVVENcIjpcIlwiKStiXSgpOk5hTn1mdW5jdGlvbiBQKGEsYixjKXthLmlzVmFsaWQoKSYmYS5fZFtcInNldFwiKyhhLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK2JdKGMpfVxyXG4vLyBNT01FTlRTXHJcbmZ1bmN0aW9uIFEoYSl7cmV0dXJuIGE9SihhKSx5KHRoaXNbYV0pP3RoaXNbYV0oKTp0aGlzfWZ1bmN0aW9uIFIoYSxiKXtpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7YT1LKGEpO2Zvcih2YXIgYz1NKGEpLGQ9MDtkPGMubGVuZ3RoO2QrKyl0aGlzW2NbZF0udW5pdF0oYVtjW2RdLnVuaXRdKX1lbHNlIGlmKGE9SihhKSx5KHRoaXNbYV0pKXJldHVybiB0aGlzW2FdKGIpO3JldHVybiB0aGlzfWZ1bmN0aW9uIFMoYSxiLGMpe3ZhciBkPVwiXCIrTWF0aC5hYnMoYSksZT1iLWQubGVuZ3RoLGY9YT49MDtyZXR1cm4oZj9jP1wiK1wiOlwiXCI6XCItXCIpK01hdGgucG93KDEwLE1hdGgubWF4KDAsZSkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpK2R9XHJcbi8vIHRva2VuOiAgICAnTSdcclxuLy8gcGFkZGVkOiAgIFsnTU0nLCAyXVxyXG4vLyBvcmRpbmFsOiAgJ01vJ1xyXG4vLyBjYWxsYmFjazogZnVuY3Rpb24gKCkgeyB0aGlzLm1vbnRoKCkgKyAxIH1cclxuZnVuY3Rpb24gVChhLGIsYyxkKXt2YXIgZT1kO1wic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1mdW5jdGlvbigpe3JldHVybiB0aGlzW2RdKCl9KSxhJiYoRWRbYV09ZSksYiYmKEVkW2JbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIFMoZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksYlsxXSxiWzJdKX0pLGMmJihFZFtjXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEpfSl9ZnVuY3Rpb24gVShhKXtyZXR1cm4gYS5tYXRjaCgvXFxbW1xcc1xcU10vKT9hLnJlcGxhY2UoL15cXFt8XFxdJC9nLFwiXCIpOmEucmVwbGFjZSgvXFxcXC9nLFwiXCIpfWZ1bmN0aW9uIFYoYSl7dmFyIGIsYyxkPWEubWF0Y2goQmQpO2ZvcihiPTAsYz1kLmxlbmd0aDtjPmI7YisrKUVkW2RbYl1dP2RbYl09RWRbZFtiXV06ZFtiXT1VKGRbYl0pO3JldHVybiBmdW5jdGlvbihiKXt2YXIgZSxmPVwiXCI7Zm9yKGU9MDtjPmU7ZSsrKWYrPWRbZV1pbnN0YW5jZW9mIEZ1bmN0aW9uP2RbZV0uY2FsbChiLGEpOmRbZV07cmV0dXJuIGZ9fVxyXG4vLyBmb3JtYXQgZGF0ZSB1c2luZyBuYXRpdmUgZGF0ZSBvYmplY3RcclxuZnVuY3Rpb24gVyhhLGIpe3JldHVybiBhLmlzVmFsaWQoKT8oYj1YKGIsYS5sb2NhbGVEYXRhKCkpLERkW2JdPURkW2JdfHxWKGIpLERkW2JdKGEpKTphLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfWZ1bmN0aW9uIFgoYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBiLmxvbmdEYXRlRm9ybWF0KGEpfHxhfXZhciBkPTU7Zm9yKENkLmxhc3RJbmRleD0wO2Q+PTAmJkNkLnRlc3QoYSk7KWE9YS5yZXBsYWNlKENkLGMpLENkLmxhc3RJbmRleD0wLGQtPTE7cmV0dXJuIGF9ZnVuY3Rpb24gWShhLGIsYyl7V2RbYV09eShiKT9iOmZ1bmN0aW9uKGEsZCl7cmV0dXJuIGEmJmM/YzpifX1mdW5jdGlvbiBaKGEsYil7cmV0dXJuIGgoV2QsYSk/V2RbYV0oYi5fc3RyaWN0LGIuX2xvY2FsZSk6bmV3IFJlZ0V4cCgkKGEpKX1cclxuLy8gQ29kZSBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU2MTQ5My9pcy10aGVyZS1hLXJlZ2V4cC1lc2NhcGUtZnVuY3Rpb24taW4tamF2YXNjcmlwdFxyXG5mdW5jdGlvbiAkKGEpe3JldHVybiBfKGEucmVwbGFjZShcIlxcXFxcIixcIlwiKS5yZXBsYWNlKC9cXFxcKFxcWyl8XFxcXChcXF0pfFxcWyhbXlxcXVxcW10qKVxcXXxcXFxcKC4pL2csZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gYnx8Y3x8ZHx8ZX0pKX1mdW5jdGlvbiBfKGEpe3JldHVybiBhLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZyxcIlxcXFwkJlwiKX1mdW5jdGlvbiBhYShhLGIpe3ZhciBjLGQ9Yjtmb3IoXCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPVthXSksXCJudW1iZXJcIj09dHlwZW9mIGImJihkPWZ1bmN0aW9uKGEsYyl7Y1tiXT10KGEpfSksYz0wO2M8YS5sZW5ndGg7YysrKVhkW2FbY11dPWR9ZnVuY3Rpb24gYmEoYSxiKXthYShhLGZ1bmN0aW9uKGEsYyxkLGUpe2QuX3c9ZC5fd3x8e30sYihhLGQuX3csZCxlKX0pfWZ1bmN0aW9uIGNhKGEsYixjKXtudWxsIT1iJiZoKFhkLGEpJiZYZFthXShiLGMuX2EsYyxhKX1mdW5jdGlvbiBkYShhLGIpe3JldHVybiBuZXcgRGF0ZShEYXRlLlVUQyhhLGIrMSwwKSkuZ2V0VVRDRGF0ZSgpfWZ1bmN0aW9uIGVhKGEsYil7cmV0dXJuIGModGhpcy5fbW9udGhzKT90aGlzLl9tb250aHNbYS5tb250aCgpXTp0aGlzLl9tb250aHNbKHRoaXMuX21vbnRocy5pc0Zvcm1hdHx8ZmUpLnRlc3QoYik/XCJmb3JtYXRcIjpcInN0YW5kYWxvbmVcIl1bYS5tb250aCgpXX1mdW5jdGlvbiBmYShhLGIpe3JldHVybiBjKHRoaXMuX21vbnRoc1Nob3J0KT90aGlzLl9tb250aHNTaG9ydFthLm1vbnRoKCldOnRoaXMuX21vbnRoc1Nob3J0W2ZlLnRlc3QoYik/XCJmb3JtYXRcIjpcInN0YW5kYWxvbmVcIl1bYS5tb250aCgpXX1mdW5jdGlvbiBnYShhLGIsYyl7dmFyIGQsZSxmLGc9YS50b0xvY2FsZUxvd2VyQ2FzZSgpO2lmKCF0aGlzLl9tb250aHNQYXJzZSlmb3IoXHJcbi8vIHRoaXMgaXMgbm90IHVzZWRcclxudGhpcy5fbW9udGhzUGFyc2U9W10sdGhpcy5fbG9uZ01vbnRoc1BhcnNlPVtdLHRoaXMuX3Nob3J0TW9udGhzUGFyc2U9W10sZD0wOzEyPmQ7KytkKWY9aihbMmUzLGRdKSx0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2RdPXRoaXMubW9udGhzU2hvcnQoZixcIlwiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLHRoaXMuX2xvbmdNb250aHNQYXJzZVtkXT10aGlzLm1vbnRocyhmLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCk7cmV0dXJuIGM/XCJNTU1cIj09PWI/KGU9c2QuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpOihlPXNkLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpOlwiTU1NXCI9PT1iPyhlPXNkLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKSk6KGU9c2QuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsZyksLTEhPT1lP2U6KGU9c2QuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpKX1mdW5jdGlvbiBoYShhLGIsYyl7dmFyIGQsZSxmO2lmKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpcmV0dXJuIGdhLmNhbGwodGhpcyxhLGIsYyk7XHJcbi8vIFRPRE86IGFkZCBzb3J0aW5nXHJcbi8vIFNvcnRpbmcgbWFrZXMgc3VyZSBpZiBvbmUgbW9udGggKG9yIGFiYnIpIGlzIGEgcHJlZml4IG9mIGFub3RoZXJcclxuLy8gc2VlIHNvcnRpbmcgaW4gY29tcHV0ZU1vbnRoc1BhcnNlXHJcbmZvcih0aGlzLl9tb250aHNQYXJzZXx8KHRoaXMuX21vbnRoc1BhcnNlPVtdLHRoaXMuX2xvbmdNb250aHNQYXJzZT1bXSx0aGlzLl9zaG9ydE1vbnRoc1BhcnNlPVtdKSxkPTA7MTI+ZDtkKyspe1xyXG4vLyB0ZXN0IHRoZSByZWdleFxyXG5pZihlPWooWzJlMyxkXSksYyYmIXRoaXMuX2xvbmdNb250aHNQYXJzZVtkXSYmKHRoaXMuX2xvbmdNb250aHNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMubW9udGhzKGUsXCJcIikucmVwbGFjZShcIi5cIixcIlwiKStcIiRcIixcImlcIiksdGhpcy5fc2hvcnRNb250aHNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMubW9udGhzU2hvcnQoZSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiXCIpK1wiJFwiLFwiaVwiKSksY3x8dGhpcy5fbW9udGhzUGFyc2VbZF18fChmPVwiXlwiK3RoaXMubW9udGhzKGUsXCJcIikrXCJ8XlwiK3RoaXMubW9udGhzU2hvcnQoZSxcIlwiKSx0aGlzLl9tb250aHNQYXJzZVtkXT1uZXcgUmVnRXhwKGYucmVwbGFjZShcIi5cIixcIlwiKSxcImlcIikpLGMmJlwiTU1NTVwiPT09YiYmdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2RdLnRlc3QoYSkpcmV0dXJuIGQ7aWYoYyYmXCJNTU1cIj09PWImJnRoaXMuX3Nob3J0TW9udGhzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZDtpZighYyYmdGhpcy5fbW9udGhzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZH19XHJcbi8vIE1PTUVOVFNcclxuZnVuY3Rpb24gaWEoYSxiKXt2YXIgYztpZighYS5pc1ZhbGlkKCkpXHJcbi8vIE5vIG9wXHJcbnJldHVybiBhO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWlmKC9eXFxkKyQvLnRlc3QoYikpYj10KGIpO2Vsc2VcclxuLy8gVE9ETzogQW5vdGhlciBzaWxlbnQgZmFpbHVyZT9cclxuaWYoYj1hLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZShiKSxcIm51bWJlclwiIT10eXBlb2YgYilyZXR1cm4gYTtyZXR1cm4gYz1NYXRoLm1pbihhLmRhdGUoKSxkYShhLnllYXIoKSxiKSksYS5fZFtcInNldFwiKyhhLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK1wiTW9udGhcIl0oYixjKSxhfWZ1bmN0aW9uIGphKGIpe3JldHVybiBudWxsIT1iPyhpYSh0aGlzLGIpLGEudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMpOk8odGhpcyxcIk1vbnRoXCIpfWZ1bmN0aW9uIGthKCl7cmV0dXJuIGRhKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSl9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3Q/KGgodGhpcyxcIl9tb250aHNSZWdleFwiKXx8bmEuY2FsbCh0aGlzKSxhP3RoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzU2hvcnRSZWdleCk6KGgodGhpcyxcIl9tb250aHNTaG9ydFJlZ2V4XCIpfHwodGhpcy5fbW9udGhzU2hvcnRSZWdleD1pZSksdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCYmYT90aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1Nob3J0UmVnZXgpfWZ1bmN0aW9uIG1hKGEpe3JldHVybiB0aGlzLl9tb250aHNQYXJzZUV4YWN0PyhoKHRoaXMsXCJfbW9udGhzUmVnZXhcIil8fG5hLmNhbGwodGhpcyksYT90aGlzLl9tb250aHNTdHJpY3RSZWdleDp0aGlzLl9tb250aHNSZWdleCk6KGgodGhpcyxcIl9tb250aHNSZWdleFwiKXx8KHRoaXMuX21vbnRoc1JlZ2V4PWplKSx0aGlzLl9tb250aHNTdHJpY3RSZWdleCYmYT90aGlzLl9tb250aHNTdHJpY3RSZWdleDp0aGlzLl9tb250aHNSZWdleCl9ZnVuY3Rpb24gbmEoKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJuIGIubGVuZ3RoLWEubGVuZ3RofXZhciBiLGMsZD1bXSxlPVtdLGY9W107Zm9yKGI9MDsxMj5iO2IrKyljPWooWzJlMyxiXSksZC5wdXNoKHRoaXMubW9udGhzU2hvcnQoYyxcIlwiKSksZS5wdXNoKHRoaXMubW9udGhzKGMsXCJcIikpLGYucHVzaCh0aGlzLm1vbnRocyhjLFwiXCIpKSxmLnB1c2godGhpcy5tb250aHNTaG9ydChjLFwiXCIpKTtmb3IoXHJcbi8vIFNvcnRpbmcgbWFrZXMgc3VyZSBpZiBvbmUgbW9udGggKG9yIGFiYnIpIGlzIGEgcHJlZml4IG9mIGFub3RoZXIgaXRcclxuLy8gd2lsbCBtYXRjaCB0aGUgbG9uZ2VyIHBpZWNlLlxyXG5kLnNvcnQoYSksZS5zb3J0KGEpLGYuc29ydChhKSxiPTA7MTI+YjtiKyspZFtiXT1fKGRbYl0pLGVbYl09XyhlW2JdKTtmb3IoYj0wOzI0PmI7YisrKWZbYl09XyhmW2JdKTt0aGlzLl9tb250aHNSZWdleD1uZXcgUmVnRXhwKFwiXihcIitmLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKSx0aGlzLl9tb250aHNTaG9ydFJlZ2V4PXRoaXMuX21vbnRoc1JlZ2V4LHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4PW5ldyBSZWdFeHAoXCJeKFwiK2Uuam9pbihcInxcIikrXCIpXCIsXCJpXCIpLHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrZC5qb2luKFwifFwiKStcIilcIixcImlcIil9XHJcbi8vIEhFTFBFUlNcclxuZnVuY3Rpb24gb2EoYSl7cmV0dXJuIHBhKGEpPzM2NjozNjV9ZnVuY3Rpb24gcGEoYSl7cmV0dXJuIGElND09PTAmJmElMTAwIT09MHx8YSU0MDA9PT0wfWZ1bmN0aW9uIHFhKCl7cmV0dXJuIHBhKHRoaXMueWVhcigpKX1mdW5jdGlvbiByYShhLGIsYyxkLGUsZixnKXtcclxuLy9jYW4ndCBqdXN0IGFwcGx5KCkgdG8gY3JlYXRlIGEgZGF0ZTpcclxuLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4MTM0OC9pbnN0YW50aWF0aW5nLWEtamF2YXNjcmlwdC1vYmplY3QtYnktY2FsbGluZy1wcm90b3R5cGUtY29uc3RydWN0b3ItYXBwbHlcclxudmFyIGg9bmV3IERhdGUoYSxiLGMsZCxlLGYsZyk7XHJcbi8vdGhlIGRhdGUgY29uc3RydWN0b3IgcmVtYXBzIHllYXJzIDAtOTkgdG8gMTkwMC0xOTk5XHJcbnJldHVybiAxMDA+YSYmYT49MCYmaXNGaW5pdGUoaC5nZXRGdWxsWWVhcigpKSYmaC5zZXRGdWxsWWVhcihhKSxofWZ1bmN0aW9uIHNhKGEpe3ZhciBiPW5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsYXJndW1lbnRzKSk7XHJcbi8vdGhlIERhdGUuVVRDIGZ1bmN0aW9uIHJlbWFwcyB5ZWFycyAwLTk5IHRvIDE5MDAtMTk5OVxyXG5yZXR1cm4gMTAwPmEmJmE+PTAmJmlzRmluaXRlKGIuZ2V0VVRDRnVsbFllYXIoKSkmJmIuc2V0VVRDRnVsbFllYXIoYSksYn1cclxuLy8gc3RhcnQtb2YtZmlyc3Qtd2VlayAtIHN0YXJ0LW9mLXllYXJcclxuZnVuY3Rpb24gdGEoYSxiLGMpe3Zhci8vIGZpcnN0LXdlZWsgZGF5IC0tIHdoaWNoIGphbnVhcnkgaXMgYWx3YXlzIGluIHRoZSBmaXJzdCB3ZWVrICg0IGZvciBpc28sIDEgZm9yIG90aGVyKVxyXG5kPTcrYi1jLFxyXG4vLyBmaXJzdC13ZWVrIGRheSBsb2NhbCB3ZWVrZGF5IC0tIHdoaWNoIGxvY2FsIHdlZWtkYXkgaXMgZndkXHJcbmU9KDcrc2EoYSwwLGQpLmdldFVUQ0RheSgpLWIpJTc7cmV0dXJuLWUrZC0xfVxyXG4vL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZSNDYWxjdWxhdGluZ19hX2RhdGVfZ2l2ZW5fdGhlX3llYXIuMkNfd2Vla19udW1iZXJfYW5kX3dlZWtkYXlcclxuZnVuY3Rpb24gdWEoYSxiLGMsZCxlKXt2YXIgZixnLGg9KDcrYy1kKSU3LGk9dGEoYSxkLGUpLGo9MSs3KihiLTEpK2graTtyZXR1cm4gMD49aj8oZj1hLTEsZz1vYShmKStqKTpqPm9hKGEpPyhmPWErMSxnPWotb2EoYSkpOihmPWEsZz1qKSx7eWVhcjpmLGRheU9mWWVhcjpnfX1mdW5jdGlvbiB2YShhLGIsYyl7dmFyIGQsZSxmPXRhKGEueWVhcigpLGIsYyksZz1NYXRoLmZsb29yKChhLmRheU9mWWVhcigpLWYtMSkvNykrMTtyZXR1cm4gMT5nPyhlPWEueWVhcigpLTEsZD1nK3dhKGUsYixjKSk6Zz53YShhLnllYXIoKSxiLGMpPyhkPWctd2EoYS55ZWFyKCksYixjKSxlPWEueWVhcigpKzEpOihlPWEueWVhcigpLGQ9Zykse3dlZWs6ZCx5ZWFyOmV9fWZ1bmN0aW9uIHdhKGEsYixjKXt2YXIgZD10YShhLGIsYyksZT10YShhKzEsYixjKTtyZXR1cm4ob2EoYSktZCtlKS83fVxyXG4vLyBIRUxQRVJTXHJcbi8vIExPQ0FMRVNcclxuZnVuY3Rpb24geGEoYSl7cmV0dXJuIHZhKGEsdGhpcy5fd2Vlay5kb3csdGhpcy5fd2Vlay5kb3kpLndlZWt9ZnVuY3Rpb24geWEoKXtyZXR1cm4gdGhpcy5fd2Vlay5kb3d9ZnVuY3Rpb24gemEoKXtyZXR1cm4gdGhpcy5fd2Vlay5kb3l9XHJcbi8vIE1PTUVOVFNcclxuZnVuY3Rpb24gQWEoYSl7dmFyIGI9dGhpcy5sb2NhbGVEYXRhKCkud2Vlayh0aGlzKTtyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKDcqKGEtYiksXCJkXCIpfWZ1bmN0aW9uIEJhKGEpe3ZhciBiPXZhKHRoaXMsMSw0KS53ZWVrO3JldHVybiBudWxsPT1hP2I6dGhpcy5hZGQoNyooYS1iKSxcImRcIil9XHJcbi8vIEhFTFBFUlNcclxuZnVuY3Rpb24gQ2EoYSxiKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYT9hOmlzTmFOKGEpPyhhPWIud2Vla2RheXNQYXJzZShhKSxcIm51bWJlclwiPT10eXBlb2YgYT9hOm51bGwpOnBhcnNlSW50KGEsMTApfWZ1bmN0aW9uIERhKGEsYil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGE/Yi53ZWVrZGF5c1BhcnNlKGEpJTd8fDc6aXNOYU4oYSk/bnVsbDphfWZ1bmN0aW9uIEVhKGEsYil7cmV0dXJuIGModGhpcy5fd2Vla2RheXMpP3RoaXMuX3dlZWtkYXlzW2EuZGF5KCldOnRoaXMuX3dlZWtkYXlzW3RoaXMuX3dlZWtkYXlzLmlzRm9ybWF0LnRlc3QoYik/XCJmb3JtYXRcIjpcInN0YW5kYWxvbmVcIl1bYS5kYXkoKV19ZnVuY3Rpb24gRmEoYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRbYS5kYXkoKV19ZnVuY3Rpb24gR2EoYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluW2EuZGF5KCldfWZ1bmN0aW9uIEhhKGEsYixjKXt2YXIgZCxlLGYsZz1hLnRvTG9jYWxlTG93ZXJDYXNlKCk7aWYoIXRoaXMuX3dlZWtkYXlzUGFyc2UpZm9yKHRoaXMuX3dlZWtkYXlzUGFyc2U9W10sdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlPVtdLHRoaXMuX21pbldlZWtkYXlzUGFyc2U9W10sZD0wOzc+ZDsrK2QpZj1qKFsyZTMsMV0pLmRheShkKSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2RdPXRoaXMud2Vla2RheXNNaW4oZixcIlwiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtkXT10aGlzLndlZWtkYXlzU2hvcnQoZixcIlwiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLHRoaXMuX3dlZWtkYXlzUGFyc2VbZF09dGhpcy53ZWVrZGF5cyhmLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCk7cmV0dXJuIGM/XCJkZGRkXCI9PT1iPyhlPXNkLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKTpcImRkZFwiPT09Yj8oZT1zZC5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKTooZT1zZC5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsZyksLTEhPT1lP2U6bnVsbCk6XCJkZGRkXCI9PT1iPyhlPXNkLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsZyksLTEhPT1lP2U6bnVsbCkpKTpcImRkZFwiPT09Yj8oZT1zZC5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsZyksLTEhPT1lP2U6KGU9c2QuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpKSk6KGU9c2QuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOihlPXNkLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKSkpfWZ1bmN0aW9uIElhKGEsYixjKXt2YXIgZCxlLGY7aWYodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KXJldHVybiBIYS5jYWxsKHRoaXMsYSxiLGMpO2Zvcih0aGlzLl93ZWVrZGF5c1BhcnNlfHwodGhpcy5fd2Vla2RheXNQYXJzZT1bXSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlPVtdLHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZT1bXSx0aGlzLl9mdWxsV2Vla2RheXNQYXJzZT1bXSksZD0wOzc+ZDtkKyspe1xyXG4vLyB0ZXN0IHRoZSByZWdleFxyXG5pZihlPWooWzJlMywxXSkuZGF5KGQpLGMmJiF0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtkXSYmKHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2RdPW5ldyBSZWdFeHAoXCJeXCIrdGhpcy53ZWVrZGF5cyhlLFwiXCIpLnJlcGxhY2UoXCIuXCIsXCIuP1wiKStcIiRcIixcImlcIiksdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2RdPW5ldyBSZWdFeHAoXCJeXCIrdGhpcy53ZWVrZGF5c1Nob3J0KGUsXCJcIikucmVwbGFjZShcIi5cIixcIi4/XCIpK1wiJFwiLFwiaVwiKSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2RdPW5ldyBSZWdFeHAoXCJeXCIrdGhpcy53ZWVrZGF5c01pbihlLFwiXCIpLnJlcGxhY2UoXCIuXCIsXCIuP1wiKStcIiRcIixcImlcIikpLHRoaXMuX3dlZWtkYXlzUGFyc2VbZF18fChmPVwiXlwiK3RoaXMud2Vla2RheXMoZSxcIlwiKStcInxeXCIrdGhpcy53ZWVrZGF5c1Nob3J0KGUsXCJcIikrXCJ8XlwiK3RoaXMud2Vla2RheXNNaW4oZSxcIlwiKSx0aGlzLl93ZWVrZGF5c1BhcnNlW2RdPW5ldyBSZWdFeHAoZi5yZXBsYWNlKFwiLlwiLFwiXCIpLFwiaVwiKSksYyYmXCJkZGRkXCI9PT1iJiZ0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtkXS50ZXN0KGEpKXJldHVybiBkO2lmKGMmJlwiZGRkXCI9PT1iJiZ0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZDtpZihjJiZcImRkXCI9PT1iJiZ0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2RdLnRlc3QoYSkpcmV0dXJuIGQ7aWYoIWMmJnRoaXMuX3dlZWtkYXlzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZH19XHJcbi8vIE1PTUVOVFNcclxuZnVuY3Rpb24gSmEoYSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1hP3RoaXM6TmFOO3ZhciBiPXRoaXMuX2lzVVRDP3RoaXMuX2QuZ2V0VVRDRGF5KCk6dGhpcy5fZC5nZXREYXkoKTtyZXR1cm4gbnVsbCE9YT8oYT1DYShhLHRoaXMubG9jYWxlRGF0YSgpKSx0aGlzLmFkZChhLWIsXCJkXCIpKTpifWZ1bmN0aW9uIEthKGEpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbnVsbCE9YT90aGlzOk5hTjt2YXIgYj0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcImRcIil9ZnVuY3Rpb24gTGEoYSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1hP3RoaXM6TmFOO1xyXG4vLyBiZWhhdmVzIHRoZSBzYW1lIGFzIG1vbWVudCNkYXkgZXhjZXB0XHJcbi8vIGFzIGEgZ2V0dGVyLCByZXR1cm5zIDcgaW5zdGVhZCBvZiAwICgxLTcgcmFuZ2UgaW5zdGVhZCBvZiAwLTYpXHJcbi8vIGFzIGEgc2V0dGVyLCBzdW5kYXkgc2hvdWxkIGJlbG9uZyB0byB0aGUgcHJldmlvdXMgd2Vlay5cclxuaWYobnVsbCE9YSl7dmFyIGI9RGEoYSx0aGlzLmxvY2FsZURhdGEoKSk7cmV0dXJuIHRoaXMuZGF5KHRoaXMuZGF5KCklNz9iOmItNyl9cmV0dXJuIHRoaXMuZGF5KCl8fDd9ZnVuY3Rpb24gTWEoYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdD8oaCh0aGlzLFwiX3dlZWtkYXlzUmVnZXhcIil8fFBhLmNhbGwodGhpcyksYT90aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzUmVnZXgpOihoKHRoaXMsXCJfd2Vla2RheXNSZWdleFwiKXx8KHRoaXMuX3dlZWtkYXlzUmVnZXg9cGUpLHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXgmJmE/dGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1JlZ2V4KX1mdW5jdGlvbiBOYShhKXtyZXR1cm4gdGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0PyhoKHRoaXMsXCJfd2Vla2RheXNSZWdleFwiKXx8UGEuY2FsbCh0aGlzKSxhP3RoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXgpOihoKHRoaXMsXCJfd2Vla2RheXNTaG9ydFJlZ2V4XCIpfHwodGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PXFlKSx0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXgmJmE/dGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCl9ZnVuY3Rpb24gT2EoYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdD8oaCh0aGlzLFwiX3dlZWtkYXlzUmVnZXhcIil8fFBhLmNhbGwodGhpcyksYT90aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzTWluUmVnZXgpOihoKHRoaXMsXCJfd2Vla2RheXNNaW5SZWdleFwiKXx8KHRoaXMuX3dlZWtkYXlzTWluUmVnZXg9cmUpLHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXgmJmE/dGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c01pblJlZ2V4KX1mdW5jdGlvbiBQYSgpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm4gYi5sZW5ndGgtYS5sZW5ndGh9dmFyIGIsYyxkLGUsZixnPVtdLGg9W10saT1bXSxrPVtdO2ZvcihiPTA7Nz5iO2IrKyljPWooWzJlMywxXSkuZGF5KGIpLGQ9dGhpcy53ZWVrZGF5c01pbihjLFwiXCIpLGU9dGhpcy53ZWVrZGF5c1Nob3J0KGMsXCJcIiksZj10aGlzLndlZWtkYXlzKGMsXCJcIiksZy5wdXNoKGQpLGgucHVzaChlKSxpLnB1c2goZiksay5wdXNoKGQpLGsucHVzaChlKSxrLnB1c2goZik7Zm9yKFxyXG4vLyBTb3J0aW5nIG1ha2VzIHN1cmUgaWYgb25lIHdlZWtkYXkgKG9yIGFiYnIpIGlzIGEgcHJlZml4IG9mIGFub3RoZXIgaXRcclxuLy8gd2lsbCBtYXRjaCB0aGUgbG9uZ2VyIHBpZWNlLlxyXG5nLnNvcnQoYSksaC5zb3J0KGEpLGkuc29ydChhKSxrLnNvcnQoYSksYj0wOzc+YjtiKyspaFtiXT1fKGhbYl0pLGlbYl09XyhpW2JdKSxrW2JdPV8oa1tiXSk7dGhpcy5fd2Vla2RheXNSZWdleD1uZXcgUmVnRXhwKFwiXihcIitrLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKSx0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg9dGhpcy5fd2Vla2RheXNSZWdleCx0aGlzLl93ZWVrZGF5c01pblJlZ2V4PXRoaXMuX3dlZWtkYXlzUmVnZXgsdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleD1uZXcgUmVnRXhwKFwiXihcIitpLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKSx0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIraC5qb2luKFwifFwiKStcIilcIixcImlcIiksdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleD1uZXcgUmVnRXhwKFwiXihcIitnLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKX1cclxuLy8gRk9STUFUVElOR1xyXG5mdW5jdGlvbiBRYSgpe3JldHVybiB0aGlzLmhvdXJzKCklMTJ8fDEyfWZ1bmN0aW9uIFJhKCl7cmV0dXJuIHRoaXMuaG91cnMoKXx8MjR9ZnVuY3Rpb24gU2EoYSxiKXtUKGEsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSx0aGlzLm1pbnV0ZXMoKSxiKX0pfVxyXG4vLyBQQVJTSU5HXHJcbmZ1bmN0aW9uIFRhKGEsYil7cmV0dXJuIGIuX21lcmlkaWVtUGFyc2V9XHJcbi8vIExPQ0FMRVNcclxuZnVuY3Rpb24gVWEoYSl7XHJcbi8vIElFOCBRdWlya3MgTW9kZSAmIElFNyBTdGFuZGFyZHMgTW9kZSBkbyBub3QgYWxsb3cgYWNjZXNzaW5nIHN0cmluZ3MgbGlrZSBhcnJheXNcclxuLy8gVXNpbmcgY2hhckF0IHNob3VsZCBiZSBtb3JlIGNvbXBhdGlibGUuXHJcbnJldHVyblwicFwiPT09KGErXCJcIikudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCl9ZnVuY3Rpb24gVmEoYSxiLGMpe3JldHVybiBhPjExP2M/XCJwbVwiOlwiUE1cIjpjP1wiYW1cIjpcIkFNXCJ9ZnVuY3Rpb24gV2EoYSl7cmV0dXJuIGE/YS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJfXCIsXCItXCIpOmF9XHJcbi8vIHBpY2sgdGhlIGxvY2FsZSBmcm9tIHRoZSBhcnJheVxyXG4vLyB0cnkgWydlbi1hdScsICdlbi1nYiddIGFzICdlbi1hdScsICdlbi1nYicsICdlbicsIGFzIGluIG1vdmUgdGhyb3VnaCB0aGUgbGlzdCB0cnlpbmcgZWFjaFxyXG4vLyBzdWJzdHJpbmcgZnJvbSBtb3N0IHNwZWNpZmljIHRvIGxlYXN0LCBidXQgbW92ZSB0byB0aGUgbmV4dCBhcnJheSBpdGVtIGlmIGl0J3MgYSBtb3JlIHNwZWNpZmljIHZhcmlhbnQgdGhhbiB0aGUgY3VycmVudCByb290XHJcbmZ1bmN0aW9uIFhhKGEpe2Zvcih2YXIgYixjLGQsZSxmPTA7ZjxhLmxlbmd0aDspe2ZvcihlPVdhKGFbZl0pLnNwbGl0KFwiLVwiKSxiPWUubGVuZ3RoLGM9V2EoYVtmKzFdKSxjPWM/Yy5zcGxpdChcIi1cIik6bnVsbDtiPjA7KXtpZihkPVlhKGUuc2xpY2UoMCxiKS5qb2luKFwiLVwiKSkpcmV0dXJuIGQ7aWYoYyYmYy5sZW5ndGg+PWImJnUoZSxjLCEwKT49Yi0xKVxyXG4vL3RoZSBuZXh0IGFycmF5IGl0ZW0gaXMgYmV0dGVyIHRoYW4gYSBzaGFsbG93ZXIgc3Vic3RyaW5nIG9mIHRoaXMgb25lXHJcbmJyZWFrO2ItLX1mKyt9cmV0dXJuIG51bGx9ZnVuY3Rpb24gWWEoYSl7dmFyIGI9bnVsbDtcclxuLy8gVE9ETzogRmluZCBhIGJldHRlciB3YXkgdG8gcmVnaXN0ZXIgYW5kIGxvYWQgYWxsIHRoZSBsb2NhbGVzIGluIE5vZGVcclxuaWYoIXdlW2FdJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUmJm1vZHVsZS5leHBvcnRzKXRyeXtiPXNlLl9hYmJyLHJlcXVpcmUoXCIuL2xvY2FsZS9cIithKSxcclxuLy8gYmVjYXVzZSBkZWZpbmVMb2NhbGUgY3VycmVudGx5IGFsc28gc2V0cyB0aGUgZ2xvYmFsIGxvY2FsZSwgd2VcclxuLy8gd2FudCB0byB1bmRvIHRoYXQgZm9yIGxhenkgbG9hZGVkIGxvY2FsZXNcclxuWmEoYil9Y2F0Y2goYyl7fXJldHVybiB3ZVthXX1cclxuLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGxvYWQgbG9jYWxlIGFuZCB0aGVuIHNldCB0aGUgZ2xvYmFsIGxvY2FsZS4gIElmXHJcbi8vIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkIGluLCBpdCB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgZ2xvYmFsXHJcbi8vIGxvY2FsZSBrZXkuXHJcbmZ1bmN0aW9uIFphKGEsYil7dmFyIGM7XHJcbi8vIG1vbWVudC5kdXJhdGlvbi5fbG9jYWxlID0gbW9tZW50Ll9sb2NhbGUgPSBkYXRhO1xyXG5yZXR1cm4gYSYmKGM9byhiKT9hYihhKTokYShhLGIpLGMmJihzZT1jKSksc2UuX2FiYnJ9ZnVuY3Rpb24gJGEoYSxiKXtpZihudWxsIT09Yil7dmFyIGM9dmU7XHJcbi8vIHRyZWF0IGFzIGlmIHRoZXJlIGlzIG5vIGJhc2UgY29uZmlnXHJcbi8vIGJhY2t3YXJkcyBjb21wYXQgZm9yIG5vdzogYWxzbyBzZXQgdGhlIGxvY2FsZVxyXG5yZXR1cm4gYi5hYmJyPWEsbnVsbCE9d2VbYV0/KHgoXCJkZWZpbmVMb2NhbGVPdmVycmlkZVwiLFwidXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgYW4gZXhpc3RpbmcgbG9jYWxlLiBtb21lbnQuZGVmaW5lTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uXCIpLGM9d2VbYV0uX2NvbmZpZyk6bnVsbCE9Yi5wYXJlbnRMb2NhbGUmJihudWxsIT13ZVtiLnBhcmVudExvY2FsZV0/Yz13ZVtiLnBhcmVudExvY2FsZV0uX2NvbmZpZzp4KFwicGFyZW50TG9jYWxlVW5kZWZpbmVkXCIsXCJzcGVjaWZpZWQgcGFyZW50TG9jYWxlIGlzIG5vdCBkZWZpbmVkIHlldC4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvcGFyZW50LWxvY2FsZS9cIikpLHdlW2FdPW5ldyBCKEEoYyxiKSksWmEoYSksd2VbYV19XHJcbi8vIHVzZWZ1bCBmb3IgdGVzdGluZ1xyXG5yZXR1cm4gZGVsZXRlIHdlW2FdLG51bGx9ZnVuY3Rpb24gX2EoYSxiKXtpZihudWxsIT1iKXt2YXIgYyxkPXZlO1xyXG4vLyBNRVJHRVxyXG5udWxsIT13ZVthXSYmKGQ9d2VbYV0uX2NvbmZpZyksYj1BKGQsYiksYz1uZXcgQihiKSxjLnBhcmVudExvY2FsZT13ZVthXSx3ZVthXT1jLFxyXG4vLyBiYWNrd2FyZHMgY29tcGF0IGZvciBub3c6IGFsc28gc2V0IHRoZSBsb2NhbGVcclxuWmEoYSl9ZWxzZVxyXG4vLyBwYXNzIG51bGwgZm9yIGNvbmZpZyB0byB1bnVwZGF0ZSwgdXNlZnVsIGZvciB0ZXN0c1xyXG5udWxsIT13ZVthXSYmKG51bGwhPXdlW2FdLnBhcmVudExvY2FsZT93ZVthXT13ZVthXS5wYXJlbnRMb2NhbGU6bnVsbCE9d2VbYV0mJmRlbGV0ZSB3ZVthXSk7cmV0dXJuIHdlW2FdfVxyXG4vLyByZXR1cm5zIGxvY2FsZSBkYXRhXHJcbmZ1bmN0aW9uIGFiKGEpe3ZhciBiO2lmKGEmJmEuX2xvY2FsZSYmYS5fbG9jYWxlLl9hYmJyJiYoYT1hLl9sb2NhbGUuX2FiYnIpLCFhKXJldHVybiBzZTtpZighYyhhKSl7aWYoYj1ZYShhKSlyZXR1cm4gYjthPVthXX1yZXR1cm4gWGEoYSl9ZnVuY3Rpb24gYmIoKXtyZXR1cm4gcmQod2UpfWZ1bmN0aW9uIGNiKGEpe3ZhciBiLGM9YS5fYTtyZXR1cm4gYyYmLTI9PT1sKGEpLm92ZXJmbG93JiYoYj1jW1pkXTwwfHxjW1pkXT4xMT9aZDpjWyRkXTwxfHxjWyRkXT5kYShjW1lkXSxjW1pkXSk/JGQ6Y1tfZF08MHx8Y1tfZF0+MjR8fDI0PT09Y1tfZF0mJigwIT09Y1thZV18fDAhPT1jW2JlXXx8MCE9PWNbY2VdKT9fZDpjW2FlXTwwfHxjW2FlXT41OT9hZTpjW2JlXTwwfHxjW2JlXT41OT9iZTpjW2NlXTwwfHxjW2NlXT45OTk/Y2U6LTEsbChhKS5fb3ZlcmZsb3dEYXlPZlllYXImJihZZD5ifHxiPiRkKSYmKGI9JGQpLGwoYSkuX292ZXJmbG93V2Vla3MmJi0xPT09YiYmKGI9ZGUpLGwoYSkuX292ZXJmbG93V2Vla2RheSYmLTE9PT1iJiYoYj1lZSksbChhKS5vdmVyZmxvdz1iKSxhfVxyXG4vLyBkYXRlIGZyb20gaXNvIGZvcm1hdFxyXG5mdW5jdGlvbiBkYihhKXt2YXIgYixjLGQsZSxmLGcsaD1hLl9pLGk9eGUuZXhlYyhoKXx8eWUuZXhlYyhoKTtpZihpKXtmb3IobChhKS5pc289ITAsYj0wLGM9QWUubGVuZ3RoO2M+YjtiKyspaWYoQWVbYl1bMV0uZXhlYyhpWzFdKSl7ZT1BZVtiXVswXSxkPUFlW2JdWzJdIT09ITE7YnJlYWt9aWYobnVsbD09ZSlyZXR1cm4gdm9pZChhLl9pc1ZhbGlkPSExKTtpZihpWzNdKXtmb3IoYj0wLGM9QmUubGVuZ3RoO2M+YjtiKyspaWYoQmVbYl1bMV0uZXhlYyhpWzNdKSl7XHJcbi8vIG1hdGNoWzJdIHNob3VsZCBiZSAnVCcgb3Igc3BhY2VcclxuZj0oaVsyXXx8XCIgXCIpK0JlW2JdWzBdO2JyZWFrfWlmKG51bGw9PWYpcmV0dXJuIHZvaWQoYS5faXNWYWxpZD0hMSl9aWYoIWQmJm51bGwhPWYpcmV0dXJuIHZvaWQoYS5faXNWYWxpZD0hMSk7aWYoaVs0XSl7aWYoIXplLmV4ZWMoaVs0XSkpcmV0dXJuIHZvaWQoYS5faXNWYWxpZD0hMSk7Zz1cIlpcIn1hLl9mPWUrKGZ8fFwiXCIpKyhnfHxcIlwiKSxqYihhKX1lbHNlIGEuX2lzVmFsaWQ9ITF9XHJcbi8vIGRhdGUgZnJvbSBpc28gZm9ybWF0IG9yIGZhbGxiYWNrXHJcbmZ1bmN0aW9uIGViKGIpe3ZhciBjPUNlLmV4ZWMoYi5faSk7cmV0dXJuIG51bGwhPT1jP3ZvaWQoYi5fZD1uZXcgRGF0ZSgrY1sxXSkpOihkYihiKSx2b2lkKGIuX2lzVmFsaWQ9PT0hMSYmKGRlbGV0ZSBiLl9pc1ZhbGlkLGEuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soYikpKSl9XHJcbi8vIFBpY2sgdGhlIGZpcnN0IGRlZmluZWQgb2YgdHdvIG9yIHRocmVlIGFyZ3VtZW50cy5cclxuZnVuY3Rpb24gZmIoYSxiLGMpe3JldHVybiBudWxsIT1hP2E6bnVsbCE9Yj9iOmN9ZnVuY3Rpb24gZ2IoYil7XHJcbi8vIGhvb2tzIGlzIGFjdHVhbGx5IHRoZSBleHBvcnRlZCBtb21lbnQgb2JqZWN0XHJcbnZhciBjPW5ldyBEYXRlKGEubm93KCkpO3JldHVybiBiLl91c2VVVEM/W2MuZ2V0VVRDRnVsbFllYXIoKSxjLmdldFVUQ01vbnRoKCksYy5nZXRVVENEYXRlKCldOltjLmdldEZ1bGxZZWFyKCksYy5nZXRNb250aCgpLGMuZ2V0RGF0ZSgpXX1cclxuLy8gY29udmVydCBhbiBhcnJheSB0byBhIGRhdGUuXHJcbi8vIHRoZSBhcnJheSBzaG91bGQgbWlycm9yIHRoZSBwYXJhbWV0ZXJzIGJlbG93XHJcbi8vIG5vdGU6IGFsbCB2YWx1ZXMgcGFzdCB0aGUgeWVhciBhcmUgb3B0aW9uYWwgYW5kIHdpbGwgZGVmYXVsdCB0byB0aGUgbG93ZXN0IHBvc3NpYmxlIHZhbHVlLlxyXG4vLyBbeWVhciwgbW9udGgsIGRheSAsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF1cclxuZnVuY3Rpb24gaGIoYSl7dmFyIGIsYyxkLGUsZj1bXTtpZighYS5fZCl7XHJcbi8vIERlZmF1bHQgdG8gY3VycmVudCBkYXRlLlxyXG4vLyAqIGlmIG5vIHllYXIsIG1vbnRoLCBkYXkgb2YgbW9udGggYXJlIGdpdmVuLCBkZWZhdWx0IHRvIHRvZGF5XHJcbi8vICogaWYgZGF5IG9mIG1vbnRoIGlzIGdpdmVuLCBkZWZhdWx0IG1vbnRoIGFuZCB5ZWFyXHJcbi8vICogaWYgbW9udGggaXMgZ2l2ZW4sIGRlZmF1bHQgb25seSB5ZWFyXHJcbi8vICogaWYgeWVhciBpcyBnaXZlbiwgZG9uJ3QgZGVmYXVsdCBhbnl0aGluZ1xyXG5mb3IoZD1nYihhKSxhLl93JiZudWxsPT1hLl9hWyRkXSYmbnVsbD09YS5fYVtaZF0mJmliKGEpLGEuX2RheU9mWWVhciYmKGU9ZmIoYS5fYVtZZF0sZFtZZF0pLGEuX2RheU9mWWVhcj5vYShlKSYmKGwoYSkuX292ZXJmbG93RGF5T2ZZZWFyPSEwKSxjPXNhKGUsMCxhLl9kYXlPZlllYXIpLGEuX2FbWmRdPWMuZ2V0VVRDTW9udGgoKSxhLl9hWyRkXT1jLmdldFVUQ0RhdGUoKSksYj0wOzM+YiYmbnVsbD09YS5fYVtiXTsrK2IpYS5fYVtiXT1mW2JdPWRbYl07XHJcbi8vIFplcm8gb3V0IHdoYXRldmVyIHdhcyBub3QgZGVmYXVsdGVkLCBpbmNsdWRpbmcgdGltZVxyXG5mb3IoOzc+YjtiKyspYS5fYVtiXT1mW2JdPW51bGw9PWEuX2FbYl0/Mj09PWI/MTowOmEuX2FbYl07XHJcbi8vIENoZWNrIGZvciAyNDowMDowMC4wMDBcclxuMjQ9PT1hLl9hW19kXSYmMD09PWEuX2FbYWVdJiYwPT09YS5fYVtiZV0mJjA9PT1hLl9hW2NlXSYmKGEuX25leHREYXk9ITAsYS5fYVtfZF09MCksYS5fZD0oYS5fdXNlVVRDP3NhOnJhKS5hcHBseShudWxsLGYpLFxyXG4vLyBBcHBseSB0aW1lem9uZSBvZmZzZXQgZnJvbSBpbnB1dC4gVGhlIGFjdHVhbCB1dGNPZmZzZXQgY2FuIGJlIGNoYW5nZWRcclxuLy8gd2l0aCBwYXJzZVpvbmUuXHJcbm51bGwhPWEuX3R6bSYmYS5fZC5zZXRVVENNaW51dGVzKGEuX2QuZ2V0VVRDTWludXRlcygpLWEuX3R6bSksYS5fbmV4dERheSYmKGEuX2FbX2RdPTI0KX19ZnVuY3Rpb24gaWIoYSl7dmFyIGIsYyxkLGUsZixnLGgsaTtiPWEuX3csbnVsbCE9Yi5HR3x8bnVsbCE9Yi5XfHxudWxsIT1iLkU/KGY9MSxnPTQsYz1mYihiLkdHLGEuX2FbWWRdLHZhKHJiKCksMSw0KS55ZWFyKSxkPWZiKGIuVywxKSxlPWZiKGIuRSwxKSwoMT5lfHxlPjcpJiYoaT0hMCkpOihmPWEuX2xvY2FsZS5fd2Vlay5kb3csZz1hLl9sb2NhbGUuX3dlZWsuZG95LGM9ZmIoYi5nZyxhLl9hW1lkXSx2YShyYigpLGYsZykueWVhciksZD1mYihiLncsMSksbnVsbCE9Yi5kPyhlPWIuZCwoMD5lfHxlPjYpJiYoaT0hMCkpOm51bGwhPWIuZT8oZT1iLmUrZiwoYi5lPDB8fGIuZT42KSYmKGk9ITApKTplPWYpLDE+ZHx8ZD53YShjLGYsZyk/bChhKS5fb3ZlcmZsb3dXZWVrcz0hMDpudWxsIT1pP2woYSkuX292ZXJmbG93V2Vla2RheT0hMDooaD11YShjLGQsZSxmLGcpLGEuX2FbWWRdPWgueWVhcixhLl9kYXlPZlllYXI9aC5kYXlPZlllYXIpfVxyXG4vLyBkYXRlIGZyb20gc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nXHJcbmZ1bmN0aW9uIGpiKGIpe1xyXG4vLyBUT0RPOiBNb3ZlIHRoaXMgdG8gYW5vdGhlciBwYXJ0IG9mIHRoZSBjcmVhdGlvbiBmbG93IHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwc1xyXG5pZihiLl9mPT09YS5JU09fODYwMSlyZXR1cm4gdm9pZCBkYihiKTtiLl9hPVtdLGwoYikuZW1wdHk9ITA7XHJcbi8vIFRoaXMgYXJyYXkgaXMgdXNlZCB0byBtYWtlIGEgRGF0ZSwgZWl0aGVyIHdpdGggYG5ldyBEYXRlYCBvciBgRGF0ZS5VVENgXHJcbnZhciBjLGQsZSxmLGcsaD1cIlwiK2IuX2ksaT1oLmxlbmd0aCxqPTA7Zm9yKGU9WChiLl9mLGIuX2xvY2FsZSkubWF0Y2goQmQpfHxbXSxjPTA7YzxlLmxlbmd0aDtjKyspZj1lW2NdLGQ9KGgubWF0Y2goWihmLGIpKXx8W10pWzBdLGQmJihnPWguc3Vic3RyKDAsaC5pbmRleE9mKGQpKSxnLmxlbmd0aD4wJiZsKGIpLnVudXNlZElucHV0LnB1c2goZyksaD1oLnNsaWNlKGguaW5kZXhPZihkKStkLmxlbmd0aCksais9ZC5sZW5ndGgpLEVkW2ZdPyhkP2woYikuZW1wdHk9ITE6bChiKS51bnVzZWRUb2tlbnMucHVzaChmKSxjYShmLGQsYikpOmIuX3N0cmljdCYmIWQmJmwoYikudW51c2VkVG9rZW5zLnB1c2goZik7XHJcbi8vIGFkZCByZW1haW5pbmcgdW5wYXJzZWQgaW5wdXQgbGVuZ3RoIHRvIHRoZSBzdHJpbmdcclxubChiKS5jaGFyc0xlZnRPdmVyPWktaixoLmxlbmd0aD4wJiZsKGIpLnVudXNlZElucHV0LnB1c2goaCksXHJcbi8vIGNsZWFyIF8xMmggZmxhZyBpZiBob3VyIGlzIDw9IDEyXHJcbmIuX2FbX2RdPD0xMiYmbChiKS5iaWdIb3VyPT09ITAmJmIuX2FbX2RdPjAmJihsKGIpLmJpZ0hvdXI9dm9pZCAwKSxsKGIpLnBhcnNlZERhdGVQYXJ0cz1iLl9hLnNsaWNlKDApLGwoYikubWVyaWRpZW09Yi5fbWVyaWRpZW0sXHJcbi8vIGhhbmRsZSBtZXJpZGllbVxyXG5iLl9hW19kXT1rYihiLl9sb2NhbGUsYi5fYVtfZF0sYi5fbWVyaWRpZW0pLGhiKGIpLGNiKGIpfWZ1bmN0aW9uIGtiKGEsYixjKXt2YXIgZDtcclxuLy8gRmFsbGJhY2tcclxucmV0dXJuIG51bGw9PWM/YjpudWxsIT1hLm1lcmlkaWVtSG91cj9hLm1lcmlkaWVtSG91cihiLGMpOm51bGwhPWEuaXNQTT8oZD1hLmlzUE0oYyksZCYmMTI+YiYmKGIrPTEyKSxkfHwxMiE9PWJ8fChiPTApLGIpOmJ9XHJcbi8vIGRhdGUgZnJvbSBzdHJpbmcgYW5kIGFycmF5IG9mIGZvcm1hdCBzdHJpbmdzXHJcbmZ1bmN0aW9uIGxiKGEpe3ZhciBiLGMsZCxlLGY7aWYoMD09PWEuX2YubGVuZ3RoKXJldHVybiBsKGEpLmludmFsaWRGb3JtYXQ9ITAsdm9pZChhLl9kPW5ldyBEYXRlKE5hTikpO2ZvcihlPTA7ZTxhLl9mLmxlbmd0aDtlKyspZj0wLGI9cCh7fSxhKSxudWxsIT1hLl91c2VVVEMmJihiLl91c2VVVEM9YS5fdXNlVVRDKSxiLl9mPWEuX2ZbZV0samIoYiksbShiKSYmKGYrPWwoYikuY2hhcnNMZWZ0T3ZlcixmKz0xMCpsKGIpLnVudXNlZFRva2Vucy5sZW5ndGgsbChiKS5zY29yZT1mLChudWxsPT1kfHxkPmYpJiYoZD1mLGM9YikpO2koYSxjfHxiKX1mdW5jdGlvbiBtYihhKXtpZighYS5fZCl7dmFyIGI9SyhhLl9pKTthLl9hPWcoW2IueWVhcixiLm1vbnRoLGIuZGF5fHxiLmRhdGUsYi5ob3VyLGIubWludXRlLGIuc2Vjb25kLGIubWlsbGlzZWNvbmRdLGZ1bmN0aW9uKGEpe3JldHVybiBhJiZwYXJzZUludChhLDEwKX0pLGhiKGEpfX1mdW5jdGlvbiBuYihhKXt2YXIgYj1uZXcgcShjYihvYihhKSkpO1xyXG4vLyBBZGRpbmcgaXMgc21hcnQgZW5vdWdoIGFyb3VuZCBEU1RcclxucmV0dXJuIGIuX25leHREYXkmJihiLmFkZCgxLFwiZFwiKSxiLl9uZXh0RGF5PXZvaWQgMCksYn1mdW5jdGlvbiBvYihhKXt2YXIgYj1hLl9pLGQ9YS5fZjtyZXR1cm4gYS5fbG9jYWxlPWEuX2xvY2FsZXx8YWIoYS5fbCksbnVsbD09PWJ8fHZvaWQgMD09PWQmJlwiXCI9PT1iP24oe251bGxJbnB1dDohMH0pOihcInN0cmluZ1wiPT10eXBlb2YgYiYmKGEuX2k9Yj1hLl9sb2NhbGUucHJlcGFyc2UoYikpLHIoYik/bmV3IHEoY2IoYikpOihjKGQpP2xiKGEpOmYoYik/YS5fZD1iOmQ/amIoYSk6cGIoYSksbShhKXx8KGEuX2Q9bnVsbCksYSkpfWZ1bmN0aW9uIHBiKGIpe3ZhciBkPWIuX2k7dm9pZCAwPT09ZD9iLl9kPW5ldyBEYXRlKGEubm93KCkpOmYoZCk/Yi5fZD1uZXcgRGF0ZShkLnZhbHVlT2YoKSk6XCJzdHJpbmdcIj09dHlwZW9mIGQ/ZWIoYik6YyhkKT8oYi5fYT1nKGQuc2xpY2UoMCksZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KGEsMTApfSksaGIoYikpOlwib2JqZWN0XCI9PXR5cGVvZiBkP21iKGIpOlwibnVtYmVyXCI9PXR5cGVvZiBkP1xyXG4vLyBmcm9tIG1pbGxpc2Vjb25kc1xyXG5iLl9kPW5ldyBEYXRlKGQpOmEuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soYil9ZnVuY3Rpb24gcWIoYSxiLGYsZyxoKXt2YXIgaT17fTtcclxuLy8gb2JqZWN0IGNvbnN0cnVjdGlvbiBtdXN0IGJlIGRvbmUgdGhpcyB3YXkuXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNDIzXHJcbnJldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZiYmKGc9ZixmPXZvaWQgMCksKGQoYSkmJmUoYSl8fGMoYSkmJjA9PT1hLmxlbmd0aCkmJihhPXZvaWQgMCksaS5faXNBTW9tZW50T2JqZWN0PSEwLGkuX3VzZVVUQz1pLl9pc1VUQz1oLGkuX2w9ZixpLl9pPWEsaS5fZj1iLGkuX3N0cmljdD1nLG5iKGkpfWZ1bmN0aW9uIHJiKGEsYixjLGQpe3JldHVybiBxYihhLGIsYyxkLCExKX1cclxuLy8gUGljayBhIG1vbWVudCBtIGZyb20gbW9tZW50cyBzbyB0aGF0IG1bZm5dKG90aGVyKSBpcyB0cnVlIGZvciBhbGxcclxuLy8gb3RoZXIuIFRoaXMgcmVsaWVzIG9uIHRoZSBmdW5jdGlvbiBmbiB0byBiZSB0cmFuc2l0aXZlLlxyXG4vL1xyXG4vLyBtb21lbnRzIHNob3VsZCBlaXRoZXIgYmUgYW4gYXJyYXkgb2YgbW9tZW50IG9iamVjdHMgb3IgYW4gYXJyYXksIHdob3NlXHJcbi8vIGZpcnN0IGVsZW1lbnQgaXMgYW4gYXJyYXkgb2YgbW9tZW50IG9iamVjdHMuXHJcbmZ1bmN0aW9uIHNiKGEsYil7dmFyIGQsZTtpZigxPT09Yi5sZW5ndGgmJmMoYlswXSkmJihiPWJbMF0pLCFiLmxlbmd0aClyZXR1cm4gcmIoKTtmb3IoZD1iWzBdLGU9MTtlPGIubGVuZ3RoOysrZSliW2VdLmlzVmFsaWQoKSYmIWJbZV1bYV0oZCl8fChkPWJbZV0pO3JldHVybiBkfVxyXG4vLyBUT0RPOiBVc2UgW10uc29ydCBpbnN0ZWFkP1xyXG5mdW5jdGlvbiB0Yigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBzYihcImlzQmVmb3JlXCIsYSl9ZnVuY3Rpb24gdWIoKXt2YXIgYT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gc2IoXCJpc0FmdGVyXCIsYSl9ZnVuY3Rpb24gdmIoYSl7dmFyIGI9SyhhKSxjPWIueWVhcnx8MCxkPWIucXVhcnRlcnx8MCxlPWIubW9udGh8fDAsZj1iLndlZWt8fDAsZz1iLmRheXx8MCxoPWIuaG91cnx8MCxpPWIubWludXRlfHwwLGo9Yi5zZWNvbmR8fDAsaz1iLm1pbGxpc2Vjb25kfHwwO1xyXG4vLyByZXByZXNlbnRhdGlvbiBmb3IgZGF0ZUFkZFJlbW92ZVxyXG50aGlzLl9taWxsaXNlY29uZHM9K2srMWUzKmorLy8gMTAwMFxyXG42ZTQqaSsvLyAxMDAwICogNjBcclxuMWUzKmgqNjAqNjAsLy91c2luZyAxMDAwICogNjAgKiA2MCBpbnN0ZWFkIG9mIDM2ZTUgdG8gYXZvaWQgZmxvYXRpbmcgcG9pbnQgcm91bmRpbmcgZXJyb3JzIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8yOTc4XHJcbi8vIEJlY2F1c2Ugb2YgZGF0ZUFkZFJlbW92ZSB0cmVhdHMgMjQgaG91cnMgYXMgZGlmZmVyZW50IGZyb20gYVxyXG4vLyBkYXkgd2hlbiB3b3JraW5nIGFyb3VuZCBEU1QsIHdlIG5lZWQgdG8gc3RvcmUgdGhlbSBzZXBhcmF0ZWx5XHJcbnRoaXMuX2RheXM9K2crNypmLFxyXG4vLyBJdCBpcyBpbXBvc3NpYmxlIHRyYW5zbGF0ZSBtb250aHMgaW50byBkYXlzIHdpdGhvdXQga25vd2luZ1xyXG4vLyB3aGljaCBtb250aHMgeW91IGFyZSBhcmUgdGFsa2luZyBhYm91dCwgc28gd2UgaGF2ZSB0byBzdG9yZVxyXG4vLyBpdCBzZXBhcmF0ZWx5LlxyXG50aGlzLl9tb250aHM9K2UrMypkKzEyKmMsdGhpcy5fZGF0YT17fSx0aGlzLl9sb2NhbGU9YWIoKSx0aGlzLl9idWJibGUoKX1mdW5jdGlvbiB3YihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHZifVxyXG4vLyBGT1JNQVRUSU5HXHJcbmZ1bmN0aW9uIHhiKGEsYil7VChhLDAsMCxmdW5jdGlvbigpe3ZhciBhPXRoaXMudXRjT2Zmc2V0KCksYz1cIitcIjtyZXR1cm4gMD5hJiYoYT0tYSxjPVwiLVwiKSxjK1Mofn4oYS82MCksMikrYitTKH5+YSU2MCwyKX0pfWZ1bmN0aW9uIHliKGEsYil7dmFyIGM9KGJ8fFwiXCIpLm1hdGNoKGEpfHxbXSxkPWNbYy5sZW5ndGgtMV18fFtdLGU9KGQrXCJcIikubWF0Y2goR2UpfHxbXCItXCIsMCwwXSxmPSsoNjAqZVsxXSkrdChlWzJdKTtyZXR1cm5cIitcIj09PWVbMF0/ZjotZn1cclxuLy8gUmV0dXJuIGEgbW9tZW50IGZyb20gaW5wdXQsIHRoYXQgaXMgbG9jYWwvdXRjL3pvbmUgZXF1aXZhbGVudCB0byBtb2RlbC5cclxuZnVuY3Rpb24gemIoYixjKXt2YXIgZCxlO1xyXG4vLyBVc2UgbG93LWxldmVsIGFwaSwgYmVjYXVzZSB0aGlzIGZuIGlzIGxvdy1sZXZlbCBhcGkuXHJcbnJldHVybiBjLl9pc1VUQz8oZD1jLmNsb25lKCksZT0ocihiKXx8ZihiKT9iLnZhbHVlT2YoKTpyYihiKS52YWx1ZU9mKCkpLWQudmFsdWVPZigpLGQuX2Quc2V0VGltZShkLl9kLnZhbHVlT2YoKStlKSxhLnVwZGF0ZU9mZnNldChkLCExKSxkKTpyYihiKS5sb2NhbCgpfWZ1bmN0aW9uIEFiKGEpe1xyXG4vLyBPbiBGaXJlZm94LjI0IERhdGUjZ2V0VGltZXpvbmVPZmZzZXQgcmV0dXJucyBhIGZsb2F0aW5nIHBvaW50LlxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9wdWxsLzE4NzFcclxucmV0dXJuIDE1Ki1NYXRoLnJvdW5kKGEuX2QuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSl9XHJcbi8vIE1PTUVOVFNcclxuLy8ga2VlcExvY2FsVGltZSA9IHRydWUgbWVhbnMgb25seSBjaGFuZ2UgdGhlIHRpbWV6b25lLCB3aXRob3V0XHJcbi8vIGFmZmVjdGluZyB0aGUgbG9jYWwgaG91ci4gU28gNTozMToyNiArMDMwMCAtLVt1dGNPZmZzZXQoMiwgdHJ1ZSldLS0+XHJcbi8vIDU6MzE6MjYgKzAyMDAgSXQgaXMgcG9zc2libGUgdGhhdCA1OjMxOjI2IGRvZXNuJ3QgZXhpc3Qgd2l0aCBvZmZzZXRcclxuLy8gKzAyMDAsIHNvIHdlIGFkanVzdCB0aGUgdGltZSBhcyBuZWVkZWQsIHRvIGJlIHZhbGlkLlxyXG4vL1xyXG4vLyBLZWVwaW5nIHRoZSB0aW1lIGFjdHVhbGx5IGFkZHMvc3VidHJhY3RzIChvbmUgaG91cilcclxuLy8gZnJvbSB0aGUgYWN0dWFsIHJlcHJlc2VudGVkIHRpbWUuIFRoYXQgaXMgd2h5IHdlIGNhbGwgdXBkYXRlT2Zmc2V0XHJcbi8vIGEgc2Vjb25kIHRpbWUuIEluIGNhc2UgaXQgd2FudHMgdXMgdG8gY2hhbmdlIHRoZSBvZmZzZXQgYWdhaW5cclxuLy8gX2NoYW5nZUluUHJvZ3Jlc3MgPT0gdHJ1ZSBjYXNlLCB0aGVuIHdlIGhhdmUgdG8gYWRqdXN0LCBiZWNhdXNlXHJcbi8vIHRoZXJlIGlzIG5vIHN1Y2ggdGltZSBpbiB0aGUgZ2l2ZW4gdGltZXpvbmUuXHJcbmZ1bmN0aW9uIEJiKGIsYyl7dmFyIGQsZT10aGlzLl9vZmZzZXR8fDA7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP251bGwhPWI/KFwic3RyaW5nXCI9PXR5cGVvZiBiP2I9eWIoVGQsYik6TWF0aC5hYnMoYik8MTYmJihiPTYwKmIpLCF0aGlzLl9pc1VUQyYmYyYmKGQ9QWIodGhpcykpLHRoaXMuX29mZnNldD1iLHRoaXMuX2lzVVRDPSEwLG51bGwhPWQmJnRoaXMuYWRkKGQsXCJtXCIpLGUhPT1iJiYoIWN8fHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M/U2IodGhpcyxNYihiLWUsXCJtXCIpLDEsITEpOnRoaXMuX2NoYW5nZUluUHJvZ3Jlc3N8fCh0aGlzLl9jaGFuZ2VJblByb2dyZXNzPSEwLGEudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9bnVsbCkpLHRoaXMpOnRoaXMuX2lzVVRDP2U6QWIodGhpcyk6bnVsbCE9Yj90aGlzOk5hTn1mdW5jdGlvbiBDYihhLGIpe3JldHVybiBudWxsIT1hPyhcInN0cmluZ1wiIT10eXBlb2YgYSYmKGE9LWEpLHRoaXMudXRjT2Zmc2V0KGEsYiksdGhpcyk6LXRoaXMudXRjT2Zmc2V0KCl9ZnVuY3Rpb24gRGIoYSl7cmV0dXJuIHRoaXMudXRjT2Zmc2V0KDAsYSl9ZnVuY3Rpb24gRWIoYSl7cmV0dXJuIHRoaXMuX2lzVVRDJiYodGhpcy51dGNPZmZzZXQoMCxhKSx0aGlzLl9pc1VUQz0hMSxhJiZ0aGlzLnN1YnRyYWN0KEFiKHRoaXMpLFwibVwiKSksdGhpc31mdW5jdGlvbiBGYigpe3JldHVybiB0aGlzLl90em0/dGhpcy51dGNPZmZzZXQodGhpcy5fdHptKTpcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5faSYmdGhpcy51dGNPZmZzZXQoeWIoU2QsdGhpcy5faSkpLHRoaXN9ZnVuY3Rpb24gR2IoYSl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpPyhhPWE/cmIoYSkudXRjT2Zmc2V0KCk6MCwodGhpcy51dGNPZmZzZXQoKS1hKSU2MD09PTApOiExfWZ1bmN0aW9uIEhiKCl7cmV0dXJuIHRoaXMudXRjT2Zmc2V0KCk+dGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpfHx0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCg1KS51dGNPZmZzZXQoKX1mdW5jdGlvbiBJYigpe2lmKCFvKHRoaXMuX2lzRFNUU2hpZnRlZCkpcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDt2YXIgYT17fTtpZihwKGEsdGhpcyksYT1vYihhKSxhLl9hKXt2YXIgYj1hLl9pc1VUQz9qKGEuX2EpOnJiKGEuX2EpO3RoaXMuX2lzRFNUU2hpZnRlZD10aGlzLmlzVmFsaWQoKSYmdShhLl9hLGIudG9BcnJheSgpKT4wfWVsc2UgdGhpcy5faXNEU1RTaGlmdGVkPSExO3JldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWR9ZnVuY3Rpb24gSmIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/IXRoaXMuX2lzVVRDOiExfWZ1bmN0aW9uIEtiKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX2lzVVRDOiExfWZ1bmN0aW9uIExiKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX2lzVVRDJiYwPT09dGhpcy5fb2Zmc2V0OiExfWZ1bmN0aW9uIE1iKGEsYil7dmFyIGMsZCxlLGY9YSxcclxuLy8gbWF0Y2hpbmcgYWdhaW5zdCByZWdleHAgaXMgZXhwZW5zaXZlLCBkbyBpdCBvbiBkZW1hbmRcclxuZz1udWxsOy8vIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWRcclxucmV0dXJuIHdiKGEpP2Y9e21zOmEuX21pbGxpc2Vjb25kcyxkOmEuX2RheXMsTTphLl9tb250aHN9OlwibnVtYmVyXCI9PXR5cGVvZiBhPyhmPXt9LGI/ZltiXT1hOmYubWlsbGlzZWNvbmRzPWEpOihnPUhlLmV4ZWMoYSkpPyhjPVwiLVwiPT09Z1sxXT8tMToxLGY9e3k6MCxkOnQoZ1skZF0pKmMsaDp0KGdbX2RdKSpjLG06dChnW2FlXSkqYyxzOnQoZ1tiZV0pKmMsbXM6dChnW2NlXSkqY30pOihnPUllLmV4ZWMoYSkpPyhjPVwiLVwiPT09Z1sxXT8tMToxLGY9e3k6TmIoZ1syXSxjKSxNOk5iKGdbM10sYyksdzpOYihnWzRdLGMpLGQ6TmIoZ1s1XSxjKSxoOk5iKGdbNl0sYyksbTpOYihnWzddLGMpLHM6TmIoZ1s4XSxjKX0pOm51bGw9PWY/Zj17fTpcIm9iamVjdFwiPT10eXBlb2YgZiYmKFwiZnJvbVwiaW4gZnx8XCJ0b1wiaW4gZikmJihlPVBiKHJiKGYuZnJvbSkscmIoZi50bykpLGY9e30sZi5tcz1lLm1pbGxpc2Vjb25kcyxmLk09ZS5tb250aHMpLGQ9bmV3IHZiKGYpLHdiKGEpJiZoKGEsXCJfbG9jYWxlXCIpJiYoZC5fbG9jYWxlPWEuX2xvY2FsZSksZH1mdW5jdGlvbiBOYihhLGIpe1xyXG4vLyBXZSdkIG5vcm1hbGx5IHVzZSB+fmlucCBmb3IgdGhpcywgYnV0IHVuZm9ydHVuYXRlbHkgaXQgYWxzb1xyXG4vLyBjb252ZXJ0cyBmbG9hdHMgdG8gaW50cy5cclxuLy8gaW5wIG1heSBiZSB1bmRlZmluZWQsIHNvIGNhcmVmdWwgY2FsbGluZyByZXBsYWNlIG9uIGl0LlxyXG52YXIgYz1hJiZwYXJzZUZsb2F0KGEucmVwbGFjZShcIixcIixcIi5cIikpO1xyXG4vLyBhcHBseSBzaWduIHdoaWxlIHdlJ3JlIGF0IGl0XHJcbnJldHVybihpc05hTihjKT8wOmMpKmJ9ZnVuY3Rpb24gT2IoYSxiKXt2YXIgYz17bWlsbGlzZWNvbmRzOjAsbW9udGhzOjB9O3JldHVybiBjLm1vbnRocz1iLm1vbnRoKCktYS5tb250aCgpKzEyKihiLnllYXIoKS1hLnllYXIoKSksYS5jbG9uZSgpLmFkZChjLm1vbnRocyxcIk1cIikuaXNBZnRlcihiKSYmLS1jLm1vbnRocyxjLm1pbGxpc2Vjb25kcz0rYi0rYS5jbG9uZSgpLmFkZChjLm1vbnRocyxcIk1cIiksY31mdW5jdGlvbiBQYihhLGIpe3ZhciBjO3JldHVybiBhLmlzVmFsaWQoKSYmYi5pc1ZhbGlkKCk/KGI9emIoYixhKSxhLmlzQmVmb3JlKGIpP2M9T2IoYSxiKTooYz1PYihiLGEpLGMubWlsbGlzZWNvbmRzPS1jLm1pbGxpc2Vjb25kcyxjLm1vbnRocz0tYy5tb250aHMpLGMpOnttaWxsaXNlY29uZHM6MCxtb250aHM6MH19ZnVuY3Rpb24gUWIoYSl7cmV0dXJuIDA+YT8tMSpNYXRoLnJvdW5kKC0xKmEpOk1hdGgucm91bmQoYSl9XHJcbi8vIFRPRE86IHJlbW92ZSAnbmFtZScgYXJnIGFmdGVyIGRlcHJlY2F0aW9uIGlzIHJlbW92ZWRcclxuZnVuY3Rpb24gUmIoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZSxmO1xyXG4vL2ludmVydCB0aGUgYXJndW1lbnRzLCBidXQgY29tcGxhaW4gYWJvdXQgaXRcclxucmV0dXJuIG51bGw9PT1kfHxpc05hTigrZCl8fCh4KGIsXCJtb21lbnQoKS5cIitiK1wiKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLlwiK2IrXCIobnVtYmVyLCBwZXJpb2QpLiBTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9hZGQtaW52ZXJ0ZWQtcGFyYW0vIGZvciBtb3JlIGluZm8uXCIpLGY9YyxjPWQsZD1mKSxjPVwic3RyaW5nXCI9PXR5cGVvZiBjPytjOmMsZT1NYihjLGQpLFNiKHRoaXMsZSxhKSx0aGlzfX1mdW5jdGlvbiBTYihiLGMsZCxlKXt2YXIgZj1jLl9taWxsaXNlY29uZHMsZz1RYihjLl9kYXlzKSxoPVFiKGMuX21vbnRocyk7Yi5pc1ZhbGlkKCkmJihlPW51bGw9PWU/ITA6ZSxmJiZiLl9kLnNldFRpbWUoYi5fZC52YWx1ZU9mKCkrZipkKSxnJiZQKGIsXCJEYXRlXCIsTyhiLFwiRGF0ZVwiKStnKmQpLGgmJmlhKGIsTyhiLFwiTW9udGhcIikraCpkKSxlJiZhLnVwZGF0ZU9mZnNldChiLGd8fGgpKX1mdW5jdGlvbiBUYihhLGIpe3ZhciBjPWEuZGlmZihiLFwiZGF5c1wiLCEwKTtyZXR1cm4tNj5jP1wic2FtZUVsc2VcIjotMT5jP1wibGFzdFdlZWtcIjowPmM/XCJsYXN0RGF5XCI6MT5jP1wic2FtZURheVwiOjI+Yz9cIm5leHREYXlcIjo3PmM/XCJuZXh0V2Vla1wiOlwic2FtZUVsc2VcIn1mdW5jdGlvbiBVYihiLGMpe1xyXG4vLyBXZSB3YW50IHRvIGNvbXBhcmUgdGhlIHN0YXJ0IG9mIHRvZGF5LCB2cyB0aGlzLlxyXG4vLyBHZXR0aW5nIHN0YXJ0LW9mLXRvZGF5IGRlcGVuZHMgb24gd2hldGhlciB3ZSdyZSBsb2NhbC91dGMvb2Zmc2V0IG9yIG5vdC5cclxudmFyIGQ9Ynx8cmIoKSxlPXpiKGQsdGhpcykuc3RhcnRPZihcImRheVwiKSxmPWEuY2FsZW5kYXJGb3JtYXQodGhpcyxlKXx8XCJzYW1lRWxzZVwiLGc9YyYmKHkoY1tmXSk/Y1tmXS5jYWxsKHRoaXMsZCk6Y1tmXSk7cmV0dXJuIHRoaXMuZm9ybWF0KGd8fHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGYsdGhpcyxyYihkKSkpfWZ1bmN0aW9uIFZiKCl7cmV0dXJuIG5ldyBxKHRoaXMpfWZ1bmN0aW9uIFdiKGEsYil7dmFyIGM9cihhKT9hOnJiKGEpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmYy5pc1ZhbGlkKCk/KGI9SihvKGIpP1wibWlsbGlzZWNvbmRcIjpiKSxcIm1pbGxpc2Vjb25kXCI9PT1iP3RoaXMudmFsdWVPZigpPmMudmFsdWVPZigpOmMudmFsdWVPZigpPHRoaXMuY2xvbmUoKS5zdGFydE9mKGIpLnZhbHVlT2YoKSk6ITF9ZnVuY3Rpb24gWGIoYSxiKXt2YXIgYz1yKGEpP2E6cmIoYSk7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiZjLmlzVmFsaWQoKT8oYj1KKG8oYik/XCJtaWxsaXNlY29uZFwiOmIpLFwibWlsbGlzZWNvbmRcIj09PWI/dGhpcy52YWx1ZU9mKCk8Yy52YWx1ZU9mKCk6dGhpcy5jbG9uZSgpLmVuZE9mKGIpLnZhbHVlT2YoKTxjLnZhbHVlT2YoKSk6ITF9ZnVuY3Rpb24gWWIoYSxiLGMsZCl7cmV0dXJuIGQ9ZHx8XCIoKVwiLChcIihcIj09PWRbMF0/dGhpcy5pc0FmdGVyKGEsYyk6IXRoaXMuaXNCZWZvcmUoYSxjKSkmJihcIilcIj09PWRbMV0/dGhpcy5pc0JlZm9yZShiLGMpOiF0aGlzLmlzQWZ0ZXIoYixjKSl9ZnVuY3Rpb24gWmIoYSxiKXt2YXIgYyxkPXIoYSk/YTpyYihhKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJmQuaXNWYWxpZCgpPyhiPUooYnx8XCJtaWxsaXNlY29uZFwiKSxcIm1pbGxpc2Vjb25kXCI9PT1iP3RoaXMudmFsdWVPZigpPT09ZC52YWx1ZU9mKCk6KGM9ZC52YWx1ZU9mKCksdGhpcy5jbG9uZSgpLnN0YXJ0T2YoYikudmFsdWVPZigpPD1jJiZjPD10aGlzLmNsb25lKCkuZW5kT2YoYikudmFsdWVPZigpKSk6ITF9ZnVuY3Rpb24gJGIoYSxiKXtyZXR1cm4gdGhpcy5pc1NhbWUoYSxiKXx8dGhpcy5pc0FmdGVyKGEsYil9ZnVuY3Rpb24gX2IoYSxiKXtyZXR1cm4gdGhpcy5pc1NhbWUoYSxiKXx8dGhpcy5pc0JlZm9yZShhLGIpfWZ1bmN0aW9uIGFjKGEsYixjKXt2YXIgZCxlLGYsZzsvLyAxMDAwXHJcbi8vIDEwMDAgKiA2MFxyXG4vLyAxMDAwICogNjAgKiA2MFxyXG4vLyAxMDAwICogNjAgKiA2MCAqIDI0LCBuZWdhdGUgZHN0XHJcbi8vIDEwMDAgKiA2MCAqIDYwICogMjQgKiA3LCBuZWdhdGUgZHN0XHJcbnJldHVybiB0aGlzLmlzVmFsaWQoKT8oZD16YihhLHRoaXMpLGQuaXNWYWxpZCgpPyhlPTZlNCooZC51dGNPZmZzZXQoKS10aGlzLnV0Y09mZnNldCgpKSxiPUooYiksXCJ5ZWFyXCI9PT1ifHxcIm1vbnRoXCI9PT1ifHxcInF1YXJ0ZXJcIj09PWI/KGc9YmModGhpcyxkKSxcInF1YXJ0ZXJcIj09PWI/Zy89MzpcInllYXJcIj09PWImJihnLz0xMikpOihmPXRoaXMtZCxnPVwic2Vjb25kXCI9PT1iP2YvMWUzOlwibWludXRlXCI9PT1iP2YvNmU0OlwiaG91clwiPT09Yj9mLzM2ZTU6XCJkYXlcIj09PWI/KGYtZSkvODY0ZTU6XCJ3ZWVrXCI9PT1iPyhmLWUpLzYwNDhlNTpmKSxjP2c6cyhnKSk6TmFOKTpOYU59ZnVuY3Rpb24gYmMoYSxiKXtcclxuLy8gZGlmZmVyZW5jZSBpbiBtb250aHNcclxudmFyIGMsZCxlPTEyKihiLnllYXIoKS1hLnllYXIoKSkrKGIubW9udGgoKS1hLm1vbnRoKCkpLFxyXG4vLyBiIGlzIGluIChhbmNob3IgLSAxIG1vbnRoLCBhbmNob3IgKyAxIG1vbnRoKVxyXG5mPWEuY2xvbmUoKS5hZGQoZSxcIm1vbnRoc1wiKTtcclxuLy9jaGVjayBmb3IgbmVnYXRpdmUgemVybywgcmV0dXJuIHplcm8gaWYgbmVnYXRpdmUgemVyb1xyXG4vLyBsaW5lYXIgYWNyb3NzIHRoZSBtb250aFxyXG4vLyBsaW5lYXIgYWNyb3NzIHRoZSBtb250aFxyXG5yZXR1cm4gMD5iLWY/KGM9YS5jbG9uZSgpLmFkZChlLTEsXCJtb250aHNcIiksZD0oYi1mKS8oZi1jKSk6KGM9YS5jbG9uZSgpLmFkZChlKzEsXCJtb250aHNcIiksZD0oYi1mKS8oYy1mKSksLShlK2QpfHwwfWZ1bmN0aW9uIGNjKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5sb2NhbGUoXCJlblwiKS5mb3JtYXQoXCJkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgW0dNVF1aWlwiKX1mdW5jdGlvbiBkYygpe3ZhciBhPXRoaXMuY2xvbmUoKS51dGMoKTtyZXR1cm4gMDxhLnllYXIoKSYmYS55ZWFyKCk8PTk5OTk/eShEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyk/dGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpOlcoYSxcIllZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl1cIik6VyhhLFwiWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdXCIpfWZ1bmN0aW9uIGVjKGIpe2J8fChiPXRoaXMuaXNVdGMoKT9hLmRlZmF1bHRGb3JtYXRVdGM6YS5kZWZhdWx0Rm9ybWF0KTt2YXIgYz1XKHRoaXMsYik7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQoYyl9ZnVuY3Rpb24gZmMoYSxiKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJihyKGEpJiZhLmlzVmFsaWQoKXx8cmIoYSkuaXNWYWxpZCgpKT9NYih7dG86dGhpcyxmcm9tOmF9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIWIpOnRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9ZnVuY3Rpb24gZ2MoYSl7cmV0dXJuIHRoaXMuZnJvbShyYigpLGEpfWZ1bmN0aW9uIGhjKGEsYil7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiYocihhKSYmYS5pc1ZhbGlkKCl8fHJiKGEpLmlzVmFsaWQoKSk/TWIoe2Zyb206dGhpcyx0bzphfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCFiKTp0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfWZ1bmN0aW9uIGljKGEpe3JldHVybiB0aGlzLnRvKHJiKCksYSl9XHJcbi8vIElmIHBhc3NlZCBhIGxvY2FsZSBrZXksIGl0IHdpbGwgc2V0IHRoZSBsb2NhbGUgZm9yIHRoaXNcclxuLy8gaW5zdGFuY2UuICBPdGhlcndpc2UsIGl0IHdpbGwgcmV0dXJuIHRoZSBsb2NhbGUgY29uZmlndXJhdGlvblxyXG4vLyB2YXJpYWJsZXMgZm9yIHRoaXMgaW5zdGFuY2UuXHJcbmZ1bmN0aW9uIGpjKGEpe3ZhciBiO3JldHVybiB2b2lkIDA9PT1hP3RoaXMuX2xvY2FsZS5fYWJicjooYj1hYihhKSxudWxsIT1iJiYodGhpcy5fbG9jYWxlPWIpLHRoaXMpfWZ1bmN0aW9uIGtjKCl7cmV0dXJuIHRoaXMuX2xvY2FsZX1mdW5jdGlvbiBsYyhhKXtcclxuLy8gdGhlIGZvbGxvd2luZyBzd2l0Y2ggaW50ZW50aW9uYWxseSBvbWl0cyBicmVhayBrZXl3b3Jkc1xyXG4vLyB0byB1dGlsaXplIGZhbGxpbmcgdGhyb3VnaCB0aGUgY2FzZXMuXHJcbnN3aXRjaChhPUooYSkpe2Nhc2VcInllYXJcIjp0aGlzLm1vbnRoKDApOy8qIGZhbGxzIHRocm91Z2ggKi9cclxuY2FzZVwicXVhcnRlclwiOmNhc2VcIm1vbnRoXCI6dGhpcy5kYXRlKDEpOy8qIGZhbGxzIHRocm91Z2ggKi9cclxuY2FzZVwid2Vla1wiOmNhc2VcImlzb1dlZWtcIjpjYXNlXCJkYXlcIjpjYXNlXCJkYXRlXCI6dGhpcy5ob3VycygwKTsvKiBmYWxscyB0aHJvdWdoICovXHJcbmNhc2VcImhvdXJcIjp0aGlzLm1pbnV0ZXMoMCk7LyogZmFsbHMgdGhyb3VnaCAqL1xyXG5jYXNlXCJtaW51dGVcIjp0aGlzLnNlY29uZHMoMCk7LyogZmFsbHMgdGhyb3VnaCAqL1xyXG5jYXNlXCJzZWNvbmRcIjp0aGlzLm1pbGxpc2Vjb25kcygwKX1cclxuLy8gd2Vla3MgYXJlIGEgc3BlY2lhbCBjYXNlXHJcbi8vIHF1YXJ0ZXJzIGFyZSBhbHNvIHNwZWNpYWxcclxucmV0dXJuXCJ3ZWVrXCI9PT1hJiZ0aGlzLndlZWtkYXkoMCksXCJpc29XZWVrXCI9PT1hJiZ0aGlzLmlzb1dlZWtkYXkoMSksXCJxdWFydGVyXCI9PT1hJiZ0aGlzLm1vbnRoKDMqTWF0aC5mbG9vcih0aGlzLm1vbnRoKCkvMykpLHRoaXN9ZnVuY3Rpb24gbWMoYSl7XHJcbi8vICdkYXRlJyBpcyBhbiBhbGlhcyBmb3IgJ2RheScsIHNvIGl0IHNob3VsZCBiZSBjb25zaWRlcmVkIGFzIHN1Y2guXHJcbnJldHVybiBhPUooYSksdm9pZCAwPT09YXx8XCJtaWxsaXNlY29uZFwiPT09YT90aGlzOihcImRhdGVcIj09PWEmJihhPVwiZGF5XCIpLHRoaXMuc3RhcnRPZihhKS5hZGQoMSxcImlzb1dlZWtcIj09PWE/XCJ3ZWVrXCI6YSkuc3VidHJhY3QoMSxcIm1zXCIpKX1mdW5jdGlvbiBuYygpe3JldHVybiB0aGlzLl9kLnZhbHVlT2YoKS02ZTQqKHRoaXMuX29mZnNldHx8MCl9ZnVuY3Rpb24gb2MoKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKS8xZTMpfWZ1bmN0aW9uIHBjKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKX1mdW5jdGlvbiBxYygpe3ZhciBhPXRoaXM7cmV0dXJuW2EueWVhcigpLGEubW9udGgoKSxhLmRhdGUoKSxhLmhvdXIoKSxhLm1pbnV0ZSgpLGEuc2Vjb25kKCksYS5taWxsaXNlY29uZCgpXX1mdW5jdGlvbiByYygpe3ZhciBhPXRoaXM7cmV0dXJue3llYXJzOmEueWVhcigpLG1vbnRoczphLm1vbnRoKCksZGF0ZTphLmRhdGUoKSxob3VyczphLmhvdXJzKCksbWludXRlczphLm1pbnV0ZXMoKSxzZWNvbmRzOmEuc2Vjb25kcygpLG1pbGxpc2Vjb25kczphLm1pbGxpc2Vjb25kcygpfX1mdW5jdGlvbiBzYygpe1xyXG4vLyBuZXcgRGF0ZShOYU4pLnRvSlNPTigpID09PSBudWxsXHJcbnJldHVybiB0aGlzLmlzVmFsaWQoKT90aGlzLnRvSVNPU3RyaW5nKCk6bnVsbH1mdW5jdGlvbiB0Yygpe3JldHVybiBtKHRoaXMpfWZ1bmN0aW9uIHVjKCl7cmV0dXJuIGkoe30sbCh0aGlzKSl9ZnVuY3Rpb24gdmMoKXtyZXR1cm4gbCh0aGlzKS5vdmVyZmxvd31mdW5jdGlvbiB3Yygpe3JldHVybntpbnB1dDp0aGlzLl9pLGZvcm1hdDp0aGlzLl9mLGxvY2FsZTp0aGlzLl9sb2NhbGUsaXNVVEM6dGhpcy5faXNVVEMsc3RyaWN0OnRoaXMuX3N0cmljdH19ZnVuY3Rpb24geGMoYSxiKXtUKDAsW2EsYS5sZW5ndGhdLDAsYil9XHJcbi8vIE1PTUVOVFNcclxuZnVuY3Rpb24geWMoYSl7cmV0dXJuIENjLmNhbGwodGhpcyxhLHRoaXMud2VlaygpLHRoaXMud2Vla2RheSgpLHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpfWZ1bmN0aW9uIHpjKGEpe3JldHVybiBDYy5jYWxsKHRoaXMsYSx0aGlzLmlzb1dlZWsoKSx0aGlzLmlzb1dlZWtkYXkoKSwxLDQpfWZ1bmN0aW9uIEFjKCl7cmV0dXJuIHdhKHRoaXMueWVhcigpLDEsNCl9ZnVuY3Rpb24gQmMoKXt2YXIgYT10aGlzLmxvY2FsZURhdGEoKS5fd2VlaztyZXR1cm4gd2EodGhpcy55ZWFyKCksYS5kb3csYS5kb3kpfWZ1bmN0aW9uIENjKGEsYixjLGQsZSl7dmFyIGY7cmV0dXJuIG51bGw9PWE/dmEodGhpcyxkLGUpLnllYXI6KGY9d2EoYSxkLGUpLGI+ZiYmKGI9ZiksRGMuY2FsbCh0aGlzLGEsYixjLGQsZSkpfWZ1bmN0aW9uIERjKGEsYixjLGQsZSl7dmFyIGY9dWEoYSxiLGMsZCxlKSxnPXNhKGYueWVhciwwLGYuZGF5T2ZZZWFyKTtyZXR1cm4gdGhpcy55ZWFyKGcuZ2V0VVRDRnVsbFllYXIoKSksdGhpcy5tb250aChnLmdldFVUQ01vbnRoKCkpLHRoaXMuZGF0ZShnLmdldFVUQ0RhdGUoKSksdGhpc31cclxuLy8gTU9NRU5UU1xyXG5mdW5jdGlvbiBFYyhhKXtyZXR1cm4gbnVsbD09YT9NYXRoLmNlaWwoKHRoaXMubW9udGgoKSsxKS8zKTp0aGlzLm1vbnRoKDMqKGEtMSkrdGhpcy5tb250aCgpJTMpfVxyXG4vLyBIRUxQRVJTXHJcbi8vIE1PTUVOVFNcclxuZnVuY3Rpb24gRmMoYSl7dmFyIGI9TWF0aC5yb3VuZCgodGhpcy5jbG9uZSgpLnN0YXJ0T2YoXCJkYXlcIiktdGhpcy5jbG9uZSgpLnN0YXJ0T2YoXCJ5ZWFyXCIpKS84NjRlNSkrMTtyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcImRcIil9ZnVuY3Rpb24gR2MoYSxiKXtiW2NlXT10KDFlMyooXCIwLlwiK2EpKX1cclxuLy8gTU9NRU5UU1xyXG5mdW5jdGlvbiBIYygpe3JldHVybiB0aGlzLl9pc1VUQz9cIlVUQ1wiOlwiXCJ9ZnVuY3Rpb24gSWMoKXtyZXR1cm4gdGhpcy5faXNVVEM/XCJDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZVwiOlwiXCJ9ZnVuY3Rpb24gSmMoYSl7cmV0dXJuIHJiKDFlMyphKX1mdW5jdGlvbiBLYygpe3JldHVybiByYi5hcHBseShudWxsLGFyZ3VtZW50cykucGFyc2Vab25lKCl9ZnVuY3Rpb24gTGMoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gTWMoYSxiLGMsZCl7dmFyIGU9YWIoKSxmPWooKS5zZXQoZCxiKTtyZXR1cm4gZVtjXShmLGEpfWZ1bmN0aW9uIE5jKGEsYixjKXtpZihcIm51bWJlclwiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcIlwiLG51bGwhPWIpcmV0dXJuIE1jKGEsYixjLFwibW9udGhcIik7dmFyIGQsZT1bXTtmb3IoZD0wOzEyPmQ7ZCsrKWVbZF09TWMoYSxkLGMsXCJtb250aFwiKTtyZXR1cm4gZX1cclxuLy8gKClcclxuLy8gKDUpXHJcbi8vIChmbXQsIDUpXHJcbi8vIChmbXQpXHJcbi8vICh0cnVlKVxyXG4vLyAodHJ1ZSwgNSlcclxuLy8gKHRydWUsIGZtdCwgNSlcclxuLy8gKHRydWUsIGZtdClcclxuZnVuY3Rpb24gT2MoYSxiLGMsZCl7XCJib29sZWFuXCI9PXR5cGVvZiBhPyhcIm51bWJlclwiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYj1ifHxcIlwiKTooYj1hLGM9YixhPSExLFwibnVtYmVyXCI9PXR5cGVvZiBiJiYoYz1iLGI9dm9pZCAwKSxiPWJ8fFwiXCIpO3ZhciBlPWFiKCksZj1hP2UuX3dlZWsuZG93OjA7aWYobnVsbCE9YylyZXR1cm4gTWMoYiwoYytmKSU3LGQsXCJkYXlcIik7dmFyIGcsaD1bXTtmb3IoZz0wOzc+ZztnKyspaFtnXT1NYyhiLChnK2YpJTcsZCxcImRheVwiKTtyZXR1cm4gaH1mdW5jdGlvbiBQYyhhLGIpe3JldHVybiBOYyhhLGIsXCJtb250aHNcIil9ZnVuY3Rpb24gUWMoYSxiKXtyZXR1cm4gTmMoYSxiLFwibW9udGhzU2hvcnRcIil9ZnVuY3Rpb24gUmMoYSxiLGMpe3JldHVybiBPYyhhLGIsYyxcIndlZWtkYXlzXCIpfWZ1bmN0aW9uIFNjKGEsYixjKXtyZXR1cm4gT2MoYSxiLGMsXCJ3ZWVrZGF5c1Nob3J0XCIpfWZ1bmN0aW9uIFRjKGEsYixjKXtyZXR1cm4gT2MoYSxiLGMsXCJ3ZWVrZGF5c01pblwiKX1mdW5jdGlvbiBVYygpe3ZhciBhPXRoaXMuX2RhdGE7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcz1VZSh0aGlzLl9taWxsaXNlY29uZHMpLHRoaXMuX2RheXM9VWUodGhpcy5fZGF5cyksdGhpcy5fbW9udGhzPVVlKHRoaXMuX21vbnRocyksYS5taWxsaXNlY29uZHM9VWUoYS5taWxsaXNlY29uZHMpLGEuc2Vjb25kcz1VZShhLnNlY29uZHMpLGEubWludXRlcz1VZShhLm1pbnV0ZXMpLGEuaG91cnM9VWUoYS5ob3VycyksYS5tb250aHM9VWUoYS5tb250aHMpLGEueWVhcnM9VWUoYS55ZWFycyksdGhpc31mdW5jdGlvbiBWYyhhLGIsYyxkKXt2YXIgZT1NYihiLGMpO3JldHVybiBhLl9taWxsaXNlY29uZHMrPWQqZS5fbWlsbGlzZWNvbmRzLGEuX2RheXMrPWQqZS5fZGF5cyxhLl9tb250aHMrPWQqZS5fbW9udGhzLGEuX2J1YmJsZSgpfVxyXG4vLyBzdXBwb3J0cyBvbmx5IDIuMC1zdHlsZSBhZGQoMSwgJ3MnKSBvciBhZGQoZHVyYXRpb24pXHJcbmZ1bmN0aW9uIFdjKGEsYil7cmV0dXJuIFZjKHRoaXMsYSxiLDEpfVxyXG4vLyBzdXBwb3J0cyBvbmx5IDIuMC1zdHlsZSBzdWJ0cmFjdCgxLCAncycpIG9yIHN1YnRyYWN0KGR1cmF0aW9uKVxyXG5mdW5jdGlvbiBYYyhhLGIpe3JldHVybiBWYyh0aGlzLGEsYiwtMSl9ZnVuY3Rpb24gWWMoYSl7cmV0dXJuIDA+YT9NYXRoLmZsb29yKGEpOk1hdGguY2VpbChhKX1mdW5jdGlvbiBaYygpe3ZhciBhLGIsYyxkLGUsZj10aGlzLl9taWxsaXNlY29uZHMsZz10aGlzLl9kYXlzLGg9dGhpcy5fbW9udGhzLGk9dGhpcy5fZGF0YTtcclxuLy8gaWYgd2UgaGF2ZSBhIG1peCBvZiBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgdmFsdWVzLCBidWJibGUgZG93biBmaXJzdFxyXG4vLyBjaGVjazogaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzIxNjZcclxuLy8gVGhlIGZvbGxvd2luZyBjb2RlIGJ1YmJsZXMgdXAgdmFsdWVzLCBzZWUgdGhlIHRlc3RzIGZvclxyXG4vLyBleGFtcGxlcyBvZiB3aGF0IHRoYXQgbWVhbnMuXHJcbi8vIGNvbnZlcnQgZGF5cyB0byBtb250aHNcclxuLy8gMTIgbW9udGhzIC0+IDEgeWVhclxyXG5yZXR1cm4gZj49MCYmZz49MCYmaD49MHx8MD49ZiYmMD49ZyYmMD49aHx8KGYrPTg2NGU1KlljKF9jKGgpK2cpLGc9MCxoPTApLGkubWlsbGlzZWNvbmRzPWYlMWUzLGE9cyhmLzFlMyksaS5zZWNvbmRzPWElNjAsYj1zKGEvNjApLGkubWludXRlcz1iJTYwLGM9cyhiLzYwKSxpLmhvdXJzPWMlMjQsZys9cyhjLzI0KSxlPXMoJGMoZykpLGgrPWUsZy09WWMoX2MoZSkpLGQ9cyhoLzEyKSxoJT0xMixpLmRheXM9ZyxpLm1vbnRocz1oLGkueWVhcnM9ZCx0aGlzfWZ1bmN0aW9uICRjKGEpe1xyXG4vLyA0MDAgeWVhcnMgaGF2ZSAxNDYwOTcgZGF5cyAodGFraW5nIGludG8gYWNjb3VudCBsZWFwIHllYXIgcnVsZXMpXHJcbi8vIDQwMCB5ZWFycyBoYXZlIDEyIG1vbnRocyA9PT0gNDgwMFxyXG5yZXR1cm4gNDgwMCphLzE0NjA5N31mdW5jdGlvbiBfYyhhKXtcclxuLy8gdGhlIHJldmVyc2Ugb2YgZGF5c1RvTW9udGhzXHJcbnJldHVybiAxNDYwOTcqYS80ODAwfWZ1bmN0aW9uIGFkKGEpe3ZhciBiLGMsZD10aGlzLl9taWxsaXNlY29uZHM7aWYoYT1KKGEpLFwibW9udGhcIj09PWF8fFwieWVhclwiPT09YSlyZXR1cm4gYj10aGlzLl9kYXlzK2QvODY0ZTUsYz10aGlzLl9tb250aHMrJGMoYiksXCJtb250aFwiPT09YT9jOmMvMTI7c3dpdGNoKGI9dGhpcy5fZGF5cytNYXRoLnJvdW5kKF9jKHRoaXMuX21vbnRocykpLGEpe2Nhc2VcIndlZWtcIjpyZXR1cm4gYi83K2QvNjA0OGU1O2Nhc2VcImRheVwiOnJldHVybiBiK2QvODY0ZTU7Y2FzZVwiaG91clwiOnJldHVybiAyNCpiK2QvMzZlNTtjYXNlXCJtaW51dGVcIjpyZXR1cm4gMTQ0MCpiK2QvNmU0O2Nhc2VcInNlY29uZFwiOnJldHVybiA4NjQwMCpiK2QvMWUzO1xyXG4vLyBNYXRoLmZsb29yIHByZXZlbnRzIGZsb2F0aW5nIHBvaW50IG1hdGggZXJyb3JzIGhlcmVcclxuY2FzZVwibWlsbGlzZWNvbmRcIjpyZXR1cm4gTWF0aC5mbG9vcig4NjRlNSpiKStkO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB1bml0IFwiK2EpfX1cclxuLy8gVE9ETzogVXNlIHRoaXMuYXMoJ21zJyk/XHJcbmZ1bmN0aW9uIGJkKCl7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzK3RoaXMuX21vbnRocyUxMioyNTkyZTYrMzE1MzZlNip0KHRoaXMuX21vbnRocy8xMil9ZnVuY3Rpb24gY2QoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoYSl9fWZ1bmN0aW9uIGRkKGEpe3JldHVybiBhPUooYSksdGhpc1thK1wic1wiXSgpfWZ1bmN0aW9uIGVkKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhW2FdfX1mdW5jdGlvbiBmZCgpe3JldHVybiBzKHRoaXMuZGF5cygpLzcpfVxyXG4vLyBoZWxwZXIgZnVuY3Rpb24gZm9yIG1vbWVudC5mbi5mcm9tLCBtb21lbnQuZm4uZnJvbU5vdywgYW5kIG1vbWVudC5kdXJhdGlvbi5mbi5odW1hbml6ZVxyXG5mdW5jdGlvbiBnZChhLGIsYyxkLGUpe3JldHVybiBlLnJlbGF0aXZlVGltZShifHwxLCEhYyxhLGQpfWZ1bmN0aW9uIGhkKGEsYixjKXt2YXIgZD1NYihhKS5hYnMoKSxlPWpmKGQuYXMoXCJzXCIpKSxmPWpmKGQuYXMoXCJtXCIpKSxnPWpmKGQuYXMoXCJoXCIpKSxoPWpmKGQuYXMoXCJkXCIpKSxpPWpmKGQuYXMoXCJNXCIpKSxqPWpmKGQuYXMoXCJ5XCIpKSxrPWU8a2YucyYmW1wic1wiLGVdfHwxPj1mJiZbXCJtXCJdfHxmPGtmLm0mJltcIm1tXCIsZl18fDE+PWcmJltcImhcIl18fGc8a2YuaCYmW1wiaGhcIixnXXx8MT49aCYmW1wiZFwiXXx8aDxrZi5kJiZbXCJkZFwiLGhdfHwxPj1pJiZbXCJNXCJdfHxpPGtmLk0mJltcIk1NXCIsaV18fDE+PWomJltcInlcIl18fFtcInl5XCIsal07cmV0dXJuIGtbMl09YixrWzNdPSthPjAsa1s0XT1jLGdkLmFwcGx5KG51bGwsayl9XHJcbi8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXQgdGhlIHJvdW5kaW5nIGZ1bmN0aW9uIGZvciByZWxhdGl2ZSB0aW1lIHN0cmluZ3NcclxuZnVuY3Rpb24gaWQoYSl7cmV0dXJuIHZvaWQgMD09PWE/amY6XCJmdW5jdGlvblwiPT10eXBlb2YgYT8oamY9YSwhMCk6ITF9XHJcbi8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXQgYSB0aHJlc2hvbGQgZm9yIHJlbGF0aXZlIHRpbWUgc3RyaW5nc1xyXG5mdW5jdGlvbiBqZChhLGIpe3JldHVybiB2b2lkIDA9PT1rZlthXT8hMTp2b2lkIDA9PT1iP2tmW2FdOihrZlthXT1iLCEwKX1mdW5jdGlvbiBrZChhKXt2YXIgYj10aGlzLmxvY2FsZURhdGEoKSxjPWhkKHRoaXMsIWEsYik7cmV0dXJuIGEmJihjPWIucGFzdEZ1dHVyZSgrdGhpcyxjKSksYi5wb3N0Zm9ybWF0KGMpfWZ1bmN0aW9uIGxkKCl7XHJcbi8vIGZvciBJU08gc3RyaW5ncyB3ZSBkbyBub3QgdXNlIHRoZSBub3JtYWwgYnViYmxpbmcgcnVsZXM6XHJcbi8vICAqIG1pbGxpc2Vjb25kcyBidWJibGUgdXAgdW50aWwgdGhleSBiZWNvbWUgaG91cnNcclxuLy8gICogZGF5cyBkbyBub3QgYnViYmxlIGF0IGFsbFxyXG4vLyAgKiBtb250aHMgYnViYmxlIHVwIHVudGlsIHRoZXkgYmVjb21lIHllYXJzXHJcbi8vIFRoaXMgaXMgYmVjYXVzZSB0aGVyZSBpcyBubyBjb250ZXh0LWZyZWUgY29udmVyc2lvbiBiZXR3ZWVuIGhvdXJzIGFuZCBkYXlzXHJcbi8vICh0aGluayBvZiBjbG9jayBjaGFuZ2VzKVxyXG4vLyBhbmQgYWxzbyBub3QgYmV0d2VlbiBkYXlzIGFuZCBtb250aHMgKDI4LTMxIGRheXMgcGVyIG1vbnRoKVxyXG52YXIgYSxiLGMsZD1sZih0aGlzLl9taWxsaXNlY29uZHMpLzFlMyxlPWxmKHRoaXMuX2RheXMpLGY9bGYodGhpcy5fbW9udGhzKTthPXMoZC82MCksYj1zKGEvNjApLGQlPTYwLGElPTYwLGM9cyhmLzEyKSxmJT0xMjtcclxuLy8gaW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL2RvcmRpbGxlL21vbWVudC1pc29kdXJhdGlvbi9ibG9iL21hc3Rlci9tb21lbnQuaXNvZHVyYXRpb24uanNcclxudmFyIGc9YyxoPWYsaT1lLGo9YixrPWEsbD1kLG09dGhpcy5hc1NlY29uZHMoKTtyZXR1cm4gbT8oMD5tP1wiLVwiOlwiXCIpK1wiUFwiKyhnP2crXCJZXCI6XCJcIikrKGg/aCtcIk1cIjpcIlwiKSsoaT9pK1wiRFwiOlwiXCIpKyhqfHxrfHxsP1wiVFwiOlwiXCIpKyhqP2orXCJIXCI6XCJcIikrKGs/aytcIk1cIjpcIlwiKSsobD9sK1wiU1wiOlwiXCIpOlwiUDBEXCJ9dmFyIG1kLG5kO25kPUFycmF5LnByb3RvdHlwZS5zb21lP0FycmF5LnByb3RvdHlwZS5zb21lOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1PYmplY3QodGhpcyksYz1iLmxlbmd0aD4+PjAsZD0wO2M+ZDtkKyspaWYoZCBpbiBiJiZhLmNhbGwodGhpcyxiW2RdLGQsYikpcmV0dXJuITA7cmV0dXJuITF9O1xyXG4vLyBQbHVnaW5zIHRoYXQgYWRkIHByb3BlcnRpZXMgc2hvdWxkIGFsc28gYWRkIHRoZSBrZXkgaGVyZSAobnVsbCB2YWx1ZSksXHJcbi8vIHNvIHdlIGNhbiBwcm9wZXJseSBjbG9uZSBvdXJzZWx2ZXMuXHJcbnZhciBvZD1hLm1vbWVudFByb3BlcnRpZXM9W10scGQ9ITEscWQ9e307YS5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9ITEsYS5kZXByZWNhdGlvbkhhbmRsZXI9bnVsbDt2YXIgcmQ7cmQ9T2JqZWN0LmtleXM/T2JqZWN0LmtleXM6ZnVuY3Rpb24oYSl7dmFyIGIsYz1bXTtmb3IoYiBpbiBhKWgoYSxiKSYmYy5wdXNoKGIpO3JldHVybiBjfTt2YXIgc2QsdGQ9e3NhbWVEYXk6XCJbVG9kYXkgYXRdIExUXCIsbmV4dERheTpcIltUb21vcnJvdyBhdF0gTFRcIixuZXh0V2VlazpcImRkZGQgW2F0XSBMVFwiLGxhc3REYXk6XCJbWWVzdGVyZGF5IGF0XSBMVFwiLGxhc3RXZWVrOlwiW0xhc3RdIGRkZGQgW2F0XSBMVFwiLHNhbWVFbHNlOlwiTFwifSx1ZD17TFRTOlwiaDptbTpzcyBBXCIsTFQ6XCJoOm1tIEFcIixMOlwiTU0vREQvWVlZWVwiLExMOlwiTU1NTSBELCBZWVlZXCIsTExMOlwiTU1NTSBELCBZWVlZIGg6bW0gQVwiLExMTEw6XCJkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBXCJ9LHZkPVwiSW52YWxpZCBkYXRlXCIsd2Q9XCIlZFwiLHhkPS9cXGR7MSwyfS8seWQ9e2Z1dHVyZTpcImluICVzXCIscGFzdDpcIiVzIGFnb1wiLHM6XCJhIGZldyBzZWNvbmRzXCIsbTpcImEgbWludXRlXCIsbW06XCIlZCBtaW51dGVzXCIsaDpcImFuIGhvdXJcIixoaDpcIiVkIGhvdXJzXCIsZDpcImEgZGF5XCIsZGQ6XCIlZCBkYXlzXCIsTTpcImEgbW9udGhcIixNTTpcIiVkIG1vbnRoc1wiLHk6XCJhIHllYXJcIix5eTpcIiVkIHllYXJzXCJ9LHpkPXt9LEFkPXt9LEJkPS8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhbSGhdbW0oc3MpP3xNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xRbz98WVlZWVlZfFlZWVlZfFlZWVl8WVl8Z2coZ2dnPyk/fEdHKEdHRz8pP3xlfEV8YXxBfGhoP3xISD98a2s/fG1tP3xzcz98U3sxLDl9fHh8WHx6ej98Wlo/fC4pL2csQ2Q9LyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZyxEZD17fSxFZD17fSxGZD0vXFxkLyxHZD0vXFxkXFxkLyxIZD0vXFxkezN9LyxJZD0vXFxkezR9LyxKZD0vWystXT9cXGR7Nn0vLEtkPS9cXGRcXGQ/LyxMZD0vXFxkXFxkXFxkXFxkPy8sTWQ9L1xcZFxcZFxcZFxcZFxcZFxcZD8vLE5kPS9cXGR7MSwzfS8sT2Q9L1xcZHsxLDR9LyxQZD0vWystXT9cXGR7MSw2fS8sUWQ9L1xcZCsvLFJkPS9bKy1dP1xcZCsvLFNkPS9afFsrLV1cXGRcXGQ6P1xcZFxcZC9naSxUZD0vWnxbKy1dXFxkXFxkKD86Oj9cXGRcXGQpPy9naSxVZD0vWystXT9cXGQrKFxcLlxcZHsxLDN9KT8vLFZkPS9bMC05XSpbJ2EtelxcdTAwQTAtXFx1MDVGRlxcdTA3MDAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0rfFtcXHUwNjAwLVxcdTA2RkZcXC9dKyhcXHMqP1tcXHUwNjAwLVxcdTA2RkZdKyl7MSwyfS9pLFdkPXt9LFhkPXt9LFlkPTAsWmQ9MSwkZD0yLF9kPTMsYWU9NCxiZT01LGNlPTYsZGU9NyxlZT04O3NkPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP0FycmF5LnByb3RvdHlwZS5pbmRleE9mOmZ1bmN0aW9uKGEpe1xyXG4vLyBJIGtub3dcclxudmFyIGI7Zm9yKGI9MDtiPHRoaXMubGVuZ3RoOysrYilpZih0aGlzW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX0sVChcIk1cIixbXCJNTVwiLDJdLFwiTW9cIixmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vbnRoKCkrMX0pLFQoXCJNTU1cIiwwLDAsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRoc1Nob3J0KHRoaXMsYSl9KSxUKFwiTU1NTVwiLDAsMCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsYSl9KSxJKFwibW9udGhcIixcIk1cIiksTChcIm1vbnRoXCIsOCksWShcIk1cIixLZCksWShcIk1NXCIsS2QsR2QpLFkoXCJNTU1cIixmdW5jdGlvbihhLGIpe3JldHVybiBiLm1vbnRoc1Nob3J0UmVnZXgoYSl9KSxZKFwiTU1NTVwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIubW9udGhzUmVnZXgoYSl9KSxhYShbXCJNXCIsXCJNTVwiXSxmdW5jdGlvbihhLGIpe2JbWmRdPXQoYSktMX0pLGFhKFtcIk1NTVwiLFwiTU1NTVwiXSxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLl9sb2NhbGUubW9udGhzUGFyc2UoYSxkLGMuX3N0cmljdCk7bnVsbCE9ZT9iW1pkXT1lOmwoYykuaW52YWxpZE1vbnRoPWF9KTtcclxuLy8gTE9DQUxFU1xyXG52YXIgZmU9L0Rbb0RdPyhcXFtbXlxcW1xcXV0qXFxdfFxccyspK01NTU0/LyxnZT1cIkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXJcIi5zcGxpdChcIl9cIiksaGU9XCJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlY1wiLnNwbGl0KFwiX1wiKSxpZT1WZCxqZT1WZDtcclxuLy8gRk9STUFUVElOR1xyXG5UKFwiWVwiLDAsMCxmdW5jdGlvbigpe3ZhciBhPXRoaXMueWVhcigpO3JldHVybiA5OTk5Pj1hP1wiXCIrYTpcIitcIithfSksVCgwLFtcIllZXCIsMl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnllYXIoKSUxMDB9KSxUKDAsW1wiWVlZWVwiLDRdLDAsXCJ5ZWFyXCIpLFQoMCxbXCJZWVlZWVwiLDVdLDAsXCJ5ZWFyXCIpLFQoMCxbXCJZWVlZWVlcIiw2LCEwXSwwLFwieWVhclwiKSxcclxuLy8gQUxJQVNFU1xyXG5JKFwieWVhclwiLFwieVwiKSxcclxuLy8gUFJJT1JJVElFU1xyXG5MKFwieWVhclwiLDEpLFxyXG4vLyBQQVJTSU5HXHJcblkoXCJZXCIsUmQpLFkoXCJZWVwiLEtkLEdkKSxZKFwiWVlZWVwiLE9kLElkKSxZKFwiWVlZWVlcIixQZCxKZCksWShcIllZWVlZWVwiLFBkLEpkKSxhYShbXCJZWVlZWVwiLFwiWVlZWVlZXCJdLFlkKSxhYShcIllZWVlcIixmdW5jdGlvbihiLGMpe2NbWWRdPTI9PT1iLmxlbmd0aD9hLnBhcnNlVHdvRGlnaXRZZWFyKGIpOnQoYil9KSxhYShcIllZXCIsZnVuY3Rpb24oYixjKXtjW1lkXT1hLnBhcnNlVHdvRGlnaXRZZWFyKGIpfSksYWEoXCJZXCIsZnVuY3Rpb24oYSxiKXtiW1lkXT1wYXJzZUludChhLDEwKX0pLFxyXG4vLyBIT09LU1xyXG5hLnBhcnNlVHdvRGlnaXRZZWFyPWZ1bmN0aW9uKGEpe3JldHVybiB0KGEpKyh0KGEpPjY4PzE5MDA6MmUzKX07XHJcbi8vIE1PTUVOVFNcclxudmFyIGtlPU4oXCJGdWxsWWVhclwiLCEwKTtcclxuLy8gRk9STUFUVElOR1xyXG5UKFwid1wiLFtcInd3XCIsMl0sXCJ3b1wiLFwid2Vla1wiKSxUKFwiV1wiLFtcIldXXCIsMl0sXCJXb1wiLFwiaXNvV2Vla1wiKSxcclxuLy8gQUxJQVNFU1xyXG5JKFwid2Vla1wiLFwid1wiKSxJKFwiaXNvV2Vla1wiLFwiV1wiKSxcclxuLy8gUFJJT1JJVElFU1xyXG5MKFwid2Vla1wiLDUpLEwoXCJpc29XZWVrXCIsNSksXHJcbi8vIFBBUlNJTkdcclxuWShcIndcIixLZCksWShcInd3XCIsS2QsR2QpLFkoXCJXXCIsS2QpLFkoXCJXV1wiLEtkLEdkKSxiYShbXCJ3XCIsXCJ3d1wiLFwiV1wiLFwiV1dcIl0sZnVuY3Rpb24oYSxiLGMsZCl7YltkLnN1YnN0cigwLDEpXT10KGEpfSk7dmFyIGxlPXtkb3c6MCwvLyBTdW5kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2Vlay5cclxuZG95OjZ9O1xyXG4vLyBGT1JNQVRUSU5HXHJcblQoXCJkXCIsMCxcImRvXCIsXCJkYXlcIiksVChcImRkXCIsMCwwLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLGEpfSksVChcImRkZFwiLDAsMCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLGEpfSksVChcImRkZGRcIiwwLDAsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsYSl9KSxUKFwiZVwiLDAsMCxcIndlZWtkYXlcIiksVChcIkVcIiwwLDAsXCJpc29XZWVrZGF5XCIpLFxyXG4vLyBBTElBU0VTXHJcbkkoXCJkYXlcIixcImRcIiksSShcIndlZWtkYXlcIixcImVcIiksSShcImlzb1dlZWtkYXlcIixcIkVcIiksXHJcbi8vIFBSSU9SSVRZXHJcbkwoXCJkYXlcIiwxMSksTChcIndlZWtkYXlcIiwxMSksTChcImlzb1dlZWtkYXlcIiwxMSksXHJcbi8vIFBBUlNJTkdcclxuWShcImRcIixLZCksWShcImVcIixLZCksWShcIkVcIixLZCksWShcImRkXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi53ZWVrZGF5c01pblJlZ2V4KGEpfSksWShcImRkZFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIud2Vla2RheXNTaG9ydFJlZ2V4KGEpfSksWShcImRkZGRcIixmdW5jdGlvbihhLGIpe3JldHVybiBiLndlZWtkYXlzUmVnZXgoYSl9KSxiYShbXCJkZFwiLFwiZGRkXCIsXCJkZGRkXCJdLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMuX2xvY2FsZS53ZWVrZGF5c1BhcnNlKGEsZCxjLl9zdHJpY3QpO1xyXG4vLyBpZiB3ZSBkaWRuJ3QgZ2V0IGEgd2Vla2RheSBuYW1lLCBtYXJrIHRoZSBkYXRlIGFzIGludmFsaWRcclxubnVsbCE9ZT9iLmQ9ZTpsKGMpLmludmFsaWRXZWVrZGF5PWF9KSxiYShbXCJkXCIsXCJlXCIsXCJFXCJdLGZ1bmN0aW9uKGEsYixjLGQpe2JbZF09dChhKX0pO1xyXG4vLyBMT0NBTEVTXHJcbnZhciBtZT1cIlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5XCIuc3BsaXQoXCJfXCIpLG5lPVwiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0XCIuc3BsaXQoXCJfXCIpLG9lPVwiU3VfTW9fVHVfV2VfVGhfRnJfU2FcIi5zcGxpdChcIl9cIikscGU9VmQscWU9VmQscmU9VmQ7VChcIkhcIixbXCJISFwiLDJdLDAsXCJob3VyXCIpLFQoXCJoXCIsW1wiaGhcIiwyXSwwLFFhKSxUKFwia1wiLFtcImtrXCIsMl0sMCxSYSksVChcImhtbVwiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrUWEuYXBwbHkodGhpcykrUyh0aGlzLm1pbnV0ZXMoKSwyKX0pLFQoXCJobW1zc1wiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrUWEuYXBwbHkodGhpcykrUyh0aGlzLm1pbnV0ZXMoKSwyKStTKHRoaXMuc2Vjb25kcygpLDIpfSksVChcIkhtbVwiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrdGhpcy5ob3VycygpK1ModGhpcy5taW51dGVzKCksMil9KSxUKFwiSG1tc3NcIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm5cIlwiK3RoaXMuaG91cnMoKStTKHRoaXMubWludXRlcygpLDIpK1ModGhpcy5zZWNvbmRzKCksMil9KSxTYShcImFcIiwhMCksU2EoXCJBXCIsITEpLFxyXG4vLyBBTElBU0VTXHJcbkkoXCJob3VyXCIsXCJoXCIpLFxyXG4vLyBQUklPUklUWVxyXG5MKFwiaG91clwiLDEzKSxZKFwiYVwiLFRhKSxZKFwiQVwiLFRhKSxZKFwiSFwiLEtkKSxZKFwiaFwiLEtkKSxZKFwiSEhcIixLZCxHZCksWShcImhoXCIsS2QsR2QpLFkoXCJobW1cIixMZCksWShcImhtbXNzXCIsTWQpLFkoXCJIbW1cIixMZCksWShcIkhtbXNzXCIsTWQpLGFhKFtcIkhcIixcIkhIXCJdLF9kKSxhYShbXCJhXCIsXCJBXCJdLGZ1bmN0aW9uKGEsYixjKXtjLl9pc1BtPWMuX2xvY2FsZS5pc1BNKGEpLGMuX21lcmlkaWVtPWF9KSxhYShbXCJoXCIsXCJoaFwiXSxmdW5jdGlvbihhLGIsYyl7YltfZF09dChhKSxsKGMpLmJpZ0hvdXI9ITB9KSxhYShcImhtbVwiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmxlbmd0aC0yO2JbX2RdPXQoYS5zdWJzdHIoMCxkKSksYlthZV09dChhLnN1YnN0cihkKSksbChjKS5iaWdIb3VyPSEwfSksYWEoXCJobW1zc1wiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmxlbmd0aC00LGU9YS5sZW5ndGgtMjtiW19kXT10KGEuc3Vic3RyKDAsZCkpLGJbYWVdPXQoYS5zdWJzdHIoZCwyKSksYltiZV09dChhLnN1YnN0cihlKSksbChjKS5iaWdIb3VyPSEwfSksYWEoXCJIbW1cIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5sZW5ndGgtMjtiW19kXT10KGEuc3Vic3RyKDAsZCkpLGJbYWVdPXQoYS5zdWJzdHIoZCkpfSksYWEoXCJIbW1zc1wiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmxlbmd0aC00LGU9YS5sZW5ndGgtMjtiW19kXT10KGEuc3Vic3RyKDAsZCkpLGJbYWVdPXQoYS5zdWJzdHIoZCwyKSksYltiZV09dChhLnN1YnN0cihlKSl9KTt2YXIgc2UsdGU9L1thcF1cXC4/bT9cXC4/L2ksdWU9TihcIkhvdXJzXCIsITApLHZlPXtjYWxlbmRhcjp0ZCxsb25nRGF0ZUZvcm1hdDp1ZCxpbnZhbGlkRGF0ZTp2ZCxvcmRpbmFsOndkLG9yZGluYWxQYXJzZTp4ZCxyZWxhdGl2ZVRpbWU6eWQsbW9udGhzOmdlLG1vbnRoc1Nob3J0OmhlLHdlZWs6bGUsd2Vla2RheXM6bWUsd2Vla2RheXNNaW46b2Usd2Vla2RheXNTaG9ydDpuZSxtZXJpZGllbVBhcnNlOnRlfSx3ZT17fSx4ZT0vXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pLSg/OlxcZFxcZC1cXGRcXGR8V1xcZFxcZC1cXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkKSkoPzooVHwgKShcXGRcXGQoPzo6XFxkXFxkKD86OlxcZFxcZCg/OlsuLF1cXGQrKT8pPyk/KShbXFwrXFwtXVxcZFxcZCg/Ojo/XFxkXFxkKT98XFxzKlopPyk/Lyx5ZT0vXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pKD86XFxkXFxkXFxkXFxkfFdcXGRcXGRcXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkKSkoPzooVHwgKShcXGRcXGQoPzpcXGRcXGQoPzpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPy8semU9L1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vLEFlPVtbXCJZWVlZWVktTU0tRERcIiwvWystXVxcZHs2fS1cXGRcXGQtXFxkXFxkL10sW1wiWVlZWS1NTS1ERFwiLC9cXGR7NH0tXFxkXFxkLVxcZFxcZC9dLFtcIkdHR0ctW1ddV1ctRVwiLC9cXGR7NH0tV1xcZFxcZC1cXGQvXSxbXCJHR0dHLVtXXVdXXCIsL1xcZHs0fS1XXFxkXFxkLywhMV0sW1wiWVlZWS1ERERcIiwvXFxkezR9LVxcZHszfS9dLFtcIllZWVktTU1cIiwvXFxkezR9LVxcZFxcZC8sITFdLFtcIllZWVlZWU1NRERcIiwvWystXVxcZHsxMH0vXSxbXCJZWVlZTU1ERFwiLC9cXGR7OH0vXSxcclxuLy8gWVlZWU1NIGlzIE5PVCBhbGxvd2VkIGJ5IHRoZSBzdGFuZGFyZFxyXG5bXCJHR0dHW1ddV1dFXCIsL1xcZHs0fVdcXGR7M30vXSxbXCJHR0dHW1ddV1dcIiwvXFxkezR9V1xcZHsyfS8sITFdLFtcIllZWVlERERcIiwvXFxkezd9L11dLEJlPVtbXCJISDptbTpzcy5TU1NTXCIsL1xcZFxcZDpcXGRcXGQ6XFxkXFxkXFwuXFxkKy9dLFtcIkhIOm1tOnNzLFNTU1NcIiwvXFxkXFxkOlxcZFxcZDpcXGRcXGQsXFxkKy9dLFtcIkhIOm1tOnNzXCIsL1xcZFxcZDpcXGRcXGQ6XFxkXFxkL10sW1wiSEg6bW1cIiwvXFxkXFxkOlxcZFxcZC9dLFtcIkhIbW1zcy5TU1NTXCIsL1xcZFxcZFxcZFxcZFxcZFxcZFxcLlxcZCsvXSxbXCJISG1tc3MsU1NTU1wiLC9cXGRcXGRcXGRcXGRcXGRcXGQsXFxkKy9dLFtcIkhIbW1zc1wiLC9cXGRcXGRcXGRcXGRcXGRcXGQvXSxbXCJISG1tXCIsL1xcZFxcZFxcZFxcZC9dLFtcIkhIXCIsL1xcZFxcZC9dXSxDZT0vXlxcLz9EYXRlXFwoKFxcLT9cXGQrKS9pO2EuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2s9dyhcIm1vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlLiBUaGlzIGlzIGRpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvanMtZGF0ZS8gZm9yIG1vcmUgaW5mby5cIixmdW5jdGlvbihhKXthLl9kPW5ldyBEYXRlKGEuX2krKGEuX3VzZVVUQz9cIiBVVENcIjpcIlwiKSl9KSxcclxuLy8gY29uc3RhbnQgdGhhdCByZWZlcnMgdG8gdGhlIElTTyBzdGFuZGFyZFxyXG5hLklTT184NjAxPWZ1bmN0aW9uKCl7fTt2YXIgRGU9dyhcIm1vbWVudCgpLm1pbiBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1heCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvXCIsZnVuY3Rpb24oKXt2YXIgYT1yYi5hcHBseShudWxsLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiZhLmlzVmFsaWQoKT90aGlzPmE/dGhpczphOm4oKX0pLEVlPXcoXCJtb21lbnQoKS5tYXggaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5taW4gaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4L1wiLGZ1bmN0aW9uKCl7dmFyIGE9cmIuYXBwbHkobnVsbCxhcmd1bWVudHMpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmYS5pc1ZhbGlkKCk/YT50aGlzP3RoaXM6YTpuKCl9KSxGZT1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdz9EYXRlLm5vdygpOituZXcgRGF0ZX07eGIoXCJaXCIsXCI6XCIpLHhiKFwiWlpcIixcIlwiKSxcclxuLy8gUEFSU0lOR1xyXG5ZKFwiWlwiLFRkKSxZKFwiWlpcIixUZCksYWEoW1wiWlwiLFwiWlpcIl0sZnVuY3Rpb24oYSxiLGMpe2MuX3VzZVVUQz0hMCxjLl90em09eWIoVGQsYSl9KTtcclxuLy8gSEVMUEVSU1xyXG4vLyB0aW1lem9uZSBjaHVua2VyXHJcbi8vICcrMTA6MDAnID4gWycxMCcsICAnMDAnXVxyXG4vLyAnLTE1MzAnICA+IFsnLTE1JywgJzMwJ11cclxudmFyIEdlPS8oW1xcK1xcLV18XFxkXFxkKS9naTtcclxuLy8gSE9PS1NcclxuLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciBhIG1vbWVudCBpcyBtdXRhdGVkLlxyXG4vLyBJdCBpcyBpbnRlbmRlZCB0byBrZWVwIHRoZSBvZmZzZXQgaW4gc3luYyB3aXRoIHRoZSB0aW1lem9uZS5cclxuYS51cGRhdGVPZmZzZXQ9ZnVuY3Rpb24oKXt9O1xyXG4vLyBBU1AuTkVUIGpzb24gZGF0ZSBmb3JtYXQgcmVnZXhcclxudmFyIEhlPS9eKFxcLSk/KD86KFxcZCopWy4gXSk/KFxcZCspXFw6KFxcZCspKD86XFw6KFxcZCspXFwuPyhcXGR7M30pP1xcZCopPyQvLEllPS9eKC0pP1AoPzooLT9bMC05LC5dKilZKT8oPzooLT9bMC05LC5dKilNKT8oPzooLT9bMC05LC5dKilXKT8oPzooLT9bMC05LC5dKilEKT8oPzpUKD86KC0/WzAtOSwuXSopSCk/KD86KC0/WzAtOSwuXSopTSk/KD86KC0/WzAtOSwuXSopUyk/KT8kLztNYi5mbj12Yi5wcm90b3R5cGU7dmFyIEplPVJiKDEsXCJhZGRcIiksS2U9UmIoLTEsXCJzdWJ0cmFjdFwiKTthLmRlZmF1bHRGb3JtYXQ9XCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiLGEuZGVmYXVsdEZvcm1hdFV0Yz1cIllZWVktTU0tRERUSEg6bW06c3NbWl1cIjt2YXIgTGU9dyhcIm1vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCB1c2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIHRvIGdldCB0aGUgbGFuZ3VhZ2UgY29uZmlndXJhdGlvbi4gVXNlIG1vbWVudCgpLmxvY2FsZSgpIHRvIGNoYW5nZSBsYW5ndWFnZXMuXCIsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dGhpcy5sb2NhbGVEYXRhKCk6dGhpcy5sb2NhbGUoYSl9KTtcclxuLy8gRk9STUFUVElOR1xyXG5UKDAsW1wiZ2dcIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2Vla1llYXIoKSUxMDB9KSxUKDAsW1wiR0dcIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNvV2Vla1llYXIoKSUxMDB9KSx4YyhcImdnZ2dcIixcIndlZWtZZWFyXCIpLHhjKFwiZ2dnZ2dcIixcIndlZWtZZWFyXCIpLHhjKFwiR0dHR1wiLFwiaXNvV2Vla1llYXJcIikseGMoXCJHR0dHR1wiLFwiaXNvV2Vla1llYXJcIiksXHJcbi8vIEFMSUFTRVNcclxuSShcIndlZWtZZWFyXCIsXCJnZ1wiKSxJKFwiaXNvV2Vla1llYXJcIixcIkdHXCIpLFxyXG4vLyBQUklPUklUWVxyXG5MKFwid2Vla1llYXJcIiwxKSxMKFwiaXNvV2Vla1llYXJcIiwxKSxcclxuLy8gUEFSU0lOR1xyXG5ZKFwiR1wiLFJkKSxZKFwiZ1wiLFJkKSxZKFwiR0dcIixLZCxHZCksWShcImdnXCIsS2QsR2QpLFkoXCJHR0dHXCIsT2QsSWQpLFkoXCJnZ2dnXCIsT2QsSWQpLFkoXCJHR0dHR1wiLFBkLEpkKSxZKFwiZ2dnZ2dcIixQZCxKZCksYmEoW1wiZ2dnZ1wiLFwiZ2dnZ2dcIixcIkdHR0dcIixcIkdHR0dHXCJdLGZ1bmN0aW9uKGEsYixjLGQpe2JbZC5zdWJzdHIoMCwyKV09dChhKX0pLGJhKFtcImdnXCIsXCJHR1wiXSxmdW5jdGlvbihiLGMsZCxlKXtjW2VdPWEucGFyc2VUd29EaWdpdFllYXIoYil9KSxcclxuLy8gRk9STUFUVElOR1xyXG5UKFwiUVwiLDAsXCJRb1wiLFwicXVhcnRlclwiKSxcclxuLy8gQUxJQVNFU1xyXG5JKFwicXVhcnRlclwiLFwiUVwiKSxcclxuLy8gUFJJT1JJVFlcclxuTChcInF1YXJ0ZXJcIiw3KSxcclxuLy8gUEFSU0lOR1xyXG5ZKFwiUVwiLEZkKSxhYShcIlFcIixmdW5jdGlvbihhLGIpe2JbWmRdPTMqKHQoYSktMSl9KSxcclxuLy8gRk9STUFUVElOR1xyXG5UKFwiRFwiLFtcIkREXCIsMl0sXCJEb1wiLFwiZGF0ZVwiKSxcclxuLy8gQUxJQVNFU1xyXG5JKFwiZGF0ZVwiLFwiRFwiKSxcclxuLy8gUFJJT1JPSVRZXHJcbkwoXCJkYXRlXCIsOSksXHJcbi8vIFBBUlNJTkdcclxuWShcIkRcIixLZCksWShcIkREXCIsS2QsR2QpLFkoXCJEb1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/Yi5fb3JkaW5hbFBhcnNlOmIuX29yZGluYWxQYXJzZUxlbmllbnR9KSxhYShbXCJEXCIsXCJERFwiXSwkZCksYWEoXCJEb1wiLGZ1bmN0aW9uKGEsYil7YlskZF09dChhLm1hdGNoKEtkKVswXSwxMCl9KTtcclxuLy8gTU9NRU5UU1xyXG52YXIgTWU9TihcIkRhdGVcIiwhMCk7XHJcbi8vIEZPUk1BVFRJTkdcclxuVChcIkRERFwiLFtcIkRERERcIiwzXSxcIkRERG9cIixcImRheU9mWWVhclwiKSxcclxuLy8gQUxJQVNFU1xyXG5JKFwiZGF5T2ZZZWFyXCIsXCJERERcIiksXHJcbi8vIFBSSU9SSVRZXHJcbkwoXCJkYXlPZlllYXJcIiw0KSxcclxuLy8gUEFSU0lOR1xyXG5ZKFwiREREXCIsTmQpLFkoXCJEREREXCIsSGQpLGFhKFtcIkRERFwiLFwiRERERFwiXSxmdW5jdGlvbihhLGIsYyl7Yy5fZGF5T2ZZZWFyPXQoYSl9KSxcclxuLy8gRk9STUFUVElOR1xyXG5UKFwibVwiLFtcIm1tXCIsMl0sMCxcIm1pbnV0ZVwiKSxcclxuLy8gQUxJQVNFU1xyXG5JKFwibWludXRlXCIsXCJtXCIpLFxyXG4vLyBQUklPUklUWVxyXG5MKFwibWludXRlXCIsMTQpLFxyXG4vLyBQQVJTSU5HXHJcblkoXCJtXCIsS2QpLFkoXCJtbVwiLEtkLEdkKSxhYShbXCJtXCIsXCJtbVwiXSxhZSk7XHJcbi8vIE1PTUVOVFNcclxudmFyIE5lPU4oXCJNaW51dGVzXCIsITEpO1xyXG4vLyBGT1JNQVRUSU5HXHJcblQoXCJzXCIsW1wic3NcIiwyXSwwLFwic2Vjb25kXCIpLFxyXG4vLyBBTElBU0VTXHJcbkkoXCJzZWNvbmRcIixcInNcIiksXHJcbi8vIFBSSU9SSVRZXHJcbkwoXCJzZWNvbmRcIiwxNSksXHJcbi8vIFBBUlNJTkdcclxuWShcInNcIixLZCksWShcInNzXCIsS2QsR2QpLGFhKFtcInNcIixcInNzXCJdLGJlKTtcclxuLy8gTU9NRU5UU1xyXG52YXIgT2U9TihcIlNlY29uZHNcIiwhMSk7XHJcbi8vIEZPUk1BVFRJTkdcclxuVChcIlNcIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm5+fih0aGlzLm1pbGxpc2Vjb25kKCkvMTAwKX0pLFQoMCxbXCJTU1wiLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm5+fih0aGlzLm1pbGxpc2Vjb25kKCkvMTApfSksVCgwLFtcIlNTU1wiLDNdLDAsXCJtaWxsaXNlY29uZFwiKSxUKDAsW1wiU1NTU1wiLDRdLDAsZnVuY3Rpb24oKXtyZXR1cm4gMTAqdGhpcy5taWxsaXNlY29uZCgpfSksVCgwLFtcIlNTU1NTXCIsNV0sMCxmdW5jdGlvbigpe3JldHVybiAxMDAqdGhpcy5taWxsaXNlY29uZCgpfSksVCgwLFtcIlNTU1NTU1wiLDZdLDAsZnVuY3Rpb24oKXtyZXR1cm4gMWUzKnRoaXMubWlsbGlzZWNvbmQoKX0pLFQoMCxbXCJTU1NTU1NTXCIsN10sMCxmdW5jdGlvbigpe3JldHVybiAxZTQqdGhpcy5taWxsaXNlY29uZCgpfSksVCgwLFtcIlNTU1NTU1NTXCIsOF0sMCxmdW5jdGlvbigpe3JldHVybiAxZTUqdGhpcy5taWxsaXNlY29uZCgpfSksVCgwLFtcIlNTU1NTU1NTU1wiLDldLDAsZnVuY3Rpb24oKXtyZXR1cm4gMWU2KnRoaXMubWlsbGlzZWNvbmQoKX0pLFxyXG4vLyBBTElBU0VTXHJcbkkoXCJtaWxsaXNlY29uZFwiLFwibXNcIiksXHJcbi8vIFBSSU9SSVRZXHJcbkwoXCJtaWxsaXNlY29uZFwiLDE2KSxcclxuLy8gUEFSU0lOR1xyXG5ZKFwiU1wiLE5kLEZkKSxZKFwiU1NcIixOZCxHZCksWShcIlNTU1wiLE5kLEhkKTt2YXIgUGU7Zm9yKFBlPVwiU1NTU1wiO1BlLmxlbmd0aDw9OTtQZSs9XCJTXCIpWShQZSxRZCk7Zm9yKFBlPVwiU1wiO1BlLmxlbmd0aDw9OTtQZSs9XCJTXCIpYWEoUGUsR2MpO1xyXG4vLyBNT01FTlRTXHJcbnZhciBRZT1OKFwiTWlsbGlzZWNvbmRzXCIsITEpO1xyXG4vLyBGT1JNQVRUSU5HXHJcblQoXCJ6XCIsMCwwLFwiem9uZUFiYnJcIiksVChcInp6XCIsMCwwLFwiem9uZU5hbWVcIik7dmFyIFJlPXEucHJvdG90eXBlO1JlLmFkZD1KZSxSZS5jYWxlbmRhcj1VYixSZS5jbG9uZT1WYixSZS5kaWZmPWFjLFJlLmVuZE9mPW1jLFJlLmZvcm1hdD1lYyxSZS5mcm9tPWZjLFJlLmZyb21Ob3c9Z2MsUmUudG89aGMsUmUudG9Ob3c9aWMsUmUuZ2V0PVEsUmUuaW52YWxpZEF0PXZjLFJlLmlzQWZ0ZXI9V2IsUmUuaXNCZWZvcmU9WGIsUmUuaXNCZXR3ZWVuPVliLFJlLmlzU2FtZT1aYixSZS5pc1NhbWVPckFmdGVyPSRiLFJlLmlzU2FtZU9yQmVmb3JlPV9iLFJlLmlzVmFsaWQ9dGMsUmUubGFuZz1MZSxSZS5sb2NhbGU9amMsUmUubG9jYWxlRGF0YT1rYyxSZS5tYXg9RWUsUmUubWluPURlLFJlLnBhcnNpbmdGbGFncz11YyxSZS5zZXQ9UixSZS5zdGFydE9mPWxjLFJlLnN1YnRyYWN0PUtlLFJlLnRvQXJyYXk9cWMsUmUudG9PYmplY3Q9cmMsUmUudG9EYXRlPXBjLFJlLnRvSVNPU3RyaW5nPWRjLFJlLnRvSlNPTj1zYyxSZS50b1N0cmluZz1jYyxSZS51bml4PW9jLFJlLnZhbHVlT2Y9bmMsUmUuY3JlYXRpb25EYXRhPXdjLFxyXG4vLyBZZWFyXHJcblJlLnllYXI9a2UsUmUuaXNMZWFwWWVhcj1xYSxcclxuLy8gV2VlayBZZWFyXHJcblJlLndlZWtZZWFyPXljLFJlLmlzb1dlZWtZZWFyPXpjLFxyXG4vLyBRdWFydGVyXHJcblJlLnF1YXJ0ZXI9UmUucXVhcnRlcnM9RWMsXHJcbi8vIE1vbnRoXHJcblJlLm1vbnRoPWphLFJlLmRheXNJbk1vbnRoPWthLFxyXG4vLyBXZWVrXHJcblJlLndlZWs9UmUud2Vla3M9QWEsUmUuaXNvV2Vlaz1SZS5pc29XZWVrcz1CYSxSZS53ZWVrc0luWWVhcj1CYyxSZS5pc29XZWVrc0luWWVhcj1BYyxcclxuLy8gRGF5XHJcblJlLmRhdGU9TWUsUmUuZGF5PVJlLmRheXM9SmEsUmUud2Vla2RheT1LYSxSZS5pc29XZWVrZGF5PUxhLFJlLmRheU9mWWVhcj1GYyxcclxuLy8gSG91clxyXG5SZS5ob3VyPVJlLmhvdXJzPXVlLFxyXG4vLyBNaW51dGVcclxuUmUubWludXRlPVJlLm1pbnV0ZXM9TmUsXHJcbi8vIFNlY29uZFxyXG5SZS5zZWNvbmQ9UmUuc2Vjb25kcz1PZSxcclxuLy8gTWlsbGlzZWNvbmRcclxuUmUubWlsbGlzZWNvbmQ9UmUubWlsbGlzZWNvbmRzPVFlLFxyXG4vLyBPZmZzZXRcclxuUmUudXRjT2Zmc2V0PUJiLFJlLnV0Yz1EYixSZS5sb2NhbD1FYixSZS5wYXJzZVpvbmU9RmIsUmUuaGFzQWxpZ25lZEhvdXJPZmZzZXQ9R2IsUmUuaXNEU1Q9SGIsUmUuaXNMb2NhbD1KYixSZS5pc1V0Y09mZnNldD1LYixSZS5pc1V0Yz1MYixSZS5pc1VUQz1MYixcclxuLy8gVGltZXpvbmVcclxuUmUuem9uZUFiYnI9SGMsUmUuem9uZU5hbWU9SWMsXHJcbi8vIERlcHJlY2F0aW9uc1xyXG5SZS5kYXRlcz13KFwiZGF0ZXMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIGRhdGUgaW5zdGVhZC5cIixNZSksUmUubW9udGhzPXcoXCJtb250aHMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbnRoIGluc3RlYWRcIixqYSksUmUueWVhcnM9dyhcInllYXJzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSB5ZWFyIGluc3RlYWRcIixrZSksUmUuem9uZT13KFwibW9tZW50KCkuem9uZSBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50KCkudXRjT2Zmc2V0IGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3Mvem9uZS9cIixDYiksUmUuaXNEU1RTaGlmdGVkPXcoXCJpc0RTVFNoaWZ0ZWQgaXMgZGVwcmVjYXRlZC4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvZHN0LXNoaWZ0ZWQvIGZvciBtb3JlIGluZm9ybWF0aW9uXCIsSWIpO3ZhciBTZT1SZSxUZT1CLnByb3RvdHlwZTtUZS5jYWxlbmRhcj1DLFRlLmxvbmdEYXRlRm9ybWF0PUQsVGUuaW52YWxpZERhdGU9RSxUZS5vcmRpbmFsPUYsVGUucHJlcGFyc2U9TGMsVGUucG9zdGZvcm1hdD1MYyxUZS5yZWxhdGl2ZVRpbWU9RyxUZS5wYXN0RnV0dXJlPUgsVGUuc2V0PXosXHJcbi8vIE1vbnRoXHJcblRlLm1vbnRocz1lYSxUZS5tb250aHNTaG9ydD1mYSxUZS5tb250aHNQYXJzZT1oYSxUZS5tb250aHNSZWdleD1tYSxUZS5tb250aHNTaG9ydFJlZ2V4PWxhLFxyXG4vLyBXZWVrXHJcblRlLndlZWs9eGEsVGUuZmlyc3REYXlPZlllYXI9emEsVGUuZmlyc3REYXlPZldlZWs9eWEsXHJcbi8vIERheSBvZiBXZWVrXHJcblRlLndlZWtkYXlzPUVhLFRlLndlZWtkYXlzTWluPUdhLFRlLndlZWtkYXlzU2hvcnQ9RmEsVGUud2Vla2RheXNQYXJzZT1JYSxUZS53ZWVrZGF5c1JlZ2V4PU1hLFRlLndlZWtkYXlzU2hvcnRSZWdleD1OYSxUZS53ZWVrZGF5c01pblJlZ2V4PU9hLFxyXG4vLyBIb3Vyc1xyXG5UZS5pc1BNPVVhLFRlLm1lcmlkaWVtPVZhLFphKFwiZW5cIix7b3JkaW5hbFBhcnNlOi9cXGR7MSwyfSh0aHxzdHxuZHxyZCkvLG9yZGluYWw6ZnVuY3Rpb24oYSl7dmFyIGI9YSUxMCxjPTE9PT10KGElMTAwLzEwKT9cInRoXCI6MT09PWI/XCJzdFwiOjI9PT1iP1wibmRcIjozPT09Yj9cInJkXCI6XCJ0aFwiO3JldHVybiBhK2N9fSksXHJcbi8vIFNpZGUgZWZmZWN0IGltcG9ydHNcclxuYS5sYW5nPXcoXCJtb21lbnQubGFuZyBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZSBpbnN0ZWFkLlwiLFphKSxhLmxhbmdEYXRhPXcoXCJtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuXCIsYWIpO3ZhciBVZT1NYXRoLmFicyxWZT1jZChcIm1zXCIpLFdlPWNkKFwic1wiKSxYZT1jZChcIm1cIiksWWU9Y2QoXCJoXCIpLFplPWNkKFwiZFwiKSwkZT1jZChcIndcIiksX2U9Y2QoXCJNXCIpLGFmPWNkKFwieVwiKSxiZj1lZChcIm1pbGxpc2Vjb25kc1wiKSxjZj1lZChcInNlY29uZHNcIiksZGY9ZWQoXCJtaW51dGVzXCIpLGVmPWVkKFwiaG91cnNcIiksZmY9ZWQoXCJkYXlzXCIpLGdmPWVkKFwibW9udGhzXCIpLGhmPWVkKFwieWVhcnNcIiksamY9TWF0aC5yb3VuZCxrZj17czo0NSwvLyBzZWNvbmRzIHRvIG1pbnV0ZVxyXG5tOjQ1LC8vIG1pbnV0ZXMgdG8gaG91clxyXG5oOjIyLC8vIGhvdXJzIHRvIGRheVxyXG5kOjI2LC8vIGRheXMgdG8gbW9udGhcclxuTToxMX0sbGY9TWF0aC5hYnMsbWY9dmIucHJvdG90eXBlO21mLmFicz1VYyxtZi5hZGQ9V2MsbWYuc3VidHJhY3Q9WGMsbWYuYXM9YWQsbWYuYXNNaWxsaXNlY29uZHM9VmUsbWYuYXNTZWNvbmRzPVdlLG1mLmFzTWludXRlcz1YZSxtZi5hc0hvdXJzPVllLG1mLmFzRGF5cz1aZSxtZi5hc1dlZWtzPSRlLG1mLmFzTW9udGhzPV9lLG1mLmFzWWVhcnM9YWYsbWYudmFsdWVPZj1iZCxtZi5fYnViYmxlPVpjLG1mLmdldD1kZCxtZi5taWxsaXNlY29uZHM9YmYsbWYuc2Vjb25kcz1jZixtZi5taW51dGVzPWRmLG1mLmhvdXJzPWVmLG1mLmRheXM9ZmYsbWYud2Vla3M9ZmQsbWYubW9udGhzPWdmLG1mLnllYXJzPWhmLG1mLmh1bWFuaXplPWtkLG1mLnRvSVNPU3RyaW5nPWxkLG1mLnRvU3RyaW5nPWxkLG1mLnRvSlNPTj1sZCxtZi5sb2NhbGU9amMsbWYubG9jYWxlRGF0YT1rYyxcclxuLy8gRGVwcmVjYXRpb25zXHJcbm1mLnRvSXNvU3RyaW5nPXcoXCJ0b0lzb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdG9JU09TdHJpbmcoKSBpbnN0ZWFkIChub3RpY2UgdGhlIGNhcGl0YWxzKVwiLGxkKSxtZi5sYW5nPUxlLFxyXG4vLyBTaWRlIGVmZmVjdCBpbXBvcnRzXHJcbi8vIEZPUk1BVFRJTkdcclxuVChcIlhcIiwwLDAsXCJ1bml4XCIpLFQoXCJ4XCIsMCwwLFwidmFsdWVPZlwiKSxcclxuLy8gUEFSU0lOR1xyXG5ZKFwieFwiLFJkKSxZKFwiWFwiLFVkKSxhYShcIlhcIixmdW5jdGlvbihhLGIsYyl7Yy5fZD1uZXcgRGF0ZSgxZTMqcGFyc2VGbG9hdChhLDEwKSl9KSxhYShcInhcIixmdW5jdGlvbihhLGIsYyl7Yy5fZD1uZXcgRGF0ZSh0KGEpKX0pLFxyXG4vLyBTaWRlIGVmZmVjdCBpbXBvcnRzXHJcbmEudmVyc2lvbj1cIjIuMTQuMVwiLGIocmIpLGEuZm49U2UsYS5taW49dGIsYS5tYXg9dWIsYS5ub3c9RmUsYS51dGM9aixhLnVuaXg9SmMsYS5tb250aHM9UGMsYS5pc0RhdGU9ZixhLmxvY2FsZT1aYSxhLmludmFsaWQ9bixhLmR1cmF0aW9uPU1iLGEuaXNNb21lbnQ9cixhLndlZWtkYXlzPVJjLGEucGFyc2Vab25lPUtjLGEubG9jYWxlRGF0YT1hYixhLmlzRHVyYXRpb249d2IsYS5tb250aHNTaG9ydD1RYyxhLndlZWtkYXlzTWluPVRjLGEuZGVmaW5lTG9jYWxlPSRhLGEudXBkYXRlTG9jYWxlPV9hLGEubG9jYWxlcz1iYixhLndlZWtkYXlzU2hvcnQ9U2MsYS5ub3JtYWxpemVVbml0cz1KLGEucmVsYXRpdmVUaW1lUm91bmRpbmc9aWQsYS5yZWxhdGl2ZVRpbWVUaHJlc2hvbGQ9amQsYS5jYWxlbmRhckZvcm1hdD1UYixhLnByb3RvdHlwZT1TZTt2YXIgbmY9YTtyZXR1cm4gbmZ9KTsiLCIvKiohXHJcbiAqIFNvcnRhYmxlXHJcbiAqIEBhdXRob3JcdFJ1YmFYYSAgIDx0cmFzaEBydWJheGEub3JnPlxyXG4gKiBAbGljZW5zZSBNSVRcclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xyXG5cdH1cclxuXHRlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xyXG5cdH1cclxuXHRlbHNlIGlmICh0eXBlb2YgUGFja2FnZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0U29ydGFibGUgPSBmYWN0b3J5KCk7ICAvLyBleHBvcnQgZm9yIE1ldGVvci5qc1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdC8qIGpzaGludCBzdWI6dHJ1ZSAqL1xyXG5cdFx0d2luZG93W1wiU29ydGFibGVcIl0gPSBmYWN0b3J5KCk7XHJcblx0fVxyXG59KShmdW5jdGlvbiAoKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdHZhciBkcmFnRWwsXHJcblx0XHRwYXJlbnRFbCxcclxuXHRcdGdob3N0RWwsXHJcblx0XHRjbG9uZUVsLFxyXG5cdFx0cm9vdEVsLFxyXG5cdFx0bmV4dEVsLFxyXG5cclxuXHRcdHNjcm9sbEVsLFxyXG5cdFx0c2Nyb2xsUGFyZW50RWwsXHJcblxyXG5cdFx0bGFzdEVsLFxyXG5cdFx0bGFzdENTUyxcclxuXHRcdGxhc3RQYXJlbnRDU1MsXHJcblxyXG5cdFx0b2xkSW5kZXgsXHJcblx0XHRuZXdJbmRleCxcclxuXHJcblx0XHRhY3RpdmVHcm91cCxcclxuXHRcdGF1dG9TY3JvbGwgPSB7fSxcclxuXHJcblx0XHR0YXBFdnQsXHJcblx0XHR0b3VjaEV2dCxcclxuXHJcblx0XHRtb3ZlZCxcclxuXHJcblx0XHQvKiogQGNvbnN0ICovXHJcblx0XHRSU1BBQ0UgPSAvXFxzKy9nLFxyXG5cclxuXHRcdGV4cGFuZG8gPSAnU29ydGFibGUnICsgKG5ldyBEYXRlKS5nZXRUaW1lKCksXHJcblxyXG5cdFx0d2luID0gd2luZG93LFxyXG5cdFx0ZG9jdW1lbnQgPSB3aW4uZG9jdW1lbnQsXHJcblx0XHRwYXJzZUludCA9IHdpbi5wYXJzZUludCxcclxuXHJcblx0XHRzdXBwb3J0RHJhZ2dhYmxlID0gISEoJ2RyYWdnYWJsZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxyXG5cdFx0c3VwcG9ydENzc1BvaW50ZXJFdmVudHMgPSAoZnVuY3Rpb24gKGVsKSB7XHJcblx0XHRcdGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgneCcpO1xyXG5cdFx0XHRlbC5zdHlsZS5jc3NUZXh0ID0gJ3BvaW50ZXItZXZlbnRzOmF1dG8nO1xyXG5cdFx0XHRyZXR1cm4gZWwuc3R5bGUucG9pbnRlckV2ZW50cyA9PT0gJ2F1dG8nO1xyXG5cdFx0fSkoKSxcclxuXHJcblx0XHRfc2lsZW50ID0gZmFsc2UsXHJcblxyXG5cdFx0YWJzID0gTWF0aC5hYnMsXHJcblx0XHRzbGljZSA9IFtdLnNsaWNlLFxyXG5cclxuXHRcdHRvdWNoRHJhZ092ZXJMaXN0ZW5lcnMgPSBbXSxcclxuXHJcblx0XHRfYXV0b1Njcm9sbCA9IF90aHJvdHRsZShmdW5jdGlvbiAoLyoqRXZlbnQqL2V2dCwgLyoqT2JqZWN0Ki9vcHRpb25zLCAvKipIVE1MRWxlbWVudCovcm9vdEVsKSB7XHJcblx0XHRcdC8vIEJ1ZzogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTA1NTIxXHJcblx0XHRcdGlmIChyb290RWwgJiYgb3B0aW9ucy5zY3JvbGwpIHtcclxuXHRcdFx0XHR2YXIgZWwsXHJcblx0XHRcdFx0XHRyZWN0LFxyXG5cdFx0XHRcdFx0c2VucyA9IG9wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHksXHJcblx0XHRcdFx0XHRzcGVlZCA9IG9wdGlvbnMuc2Nyb2xsU3BlZWQsXHJcblxyXG5cdFx0XHRcdFx0eCA9IGV2dC5jbGllbnRYLFxyXG5cdFx0XHRcdFx0eSA9IGV2dC5jbGllbnRZLFxyXG5cclxuXHRcdFx0XHRcdHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXHJcblx0XHRcdFx0XHR3aW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcblxyXG5cdFx0XHRcdFx0dngsXHJcblx0XHRcdFx0XHR2eVxyXG5cdFx0XHRcdDtcclxuXHJcblx0XHRcdFx0Ly8gRGVsZWN0IHNjcm9sbEVsXHJcblx0XHRcdFx0aWYgKHNjcm9sbFBhcmVudEVsICE9PSByb290RWwpIHtcclxuXHRcdFx0XHRcdHNjcm9sbEVsID0gb3B0aW9ucy5zY3JvbGw7XHJcblx0XHRcdFx0XHRzY3JvbGxQYXJlbnRFbCA9IHJvb3RFbDtcclxuXHJcblx0XHRcdFx0XHRpZiAoc2Nyb2xsRWwgPT09IHRydWUpIHtcclxuXHRcdFx0XHRcdFx0c2Nyb2xsRWwgPSByb290RWw7XHJcblxyXG5cdFx0XHRcdFx0XHRkbyB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKChzY3JvbGxFbC5vZmZzZXRXaWR0aCA8IHNjcm9sbEVsLnNjcm9sbFdpZHRoKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0KHNjcm9sbEVsLm9mZnNldEhlaWdodCA8IHNjcm9sbEVsLnNjcm9sbEhlaWdodClcclxuXHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHQvKiBqc2hpbnQgYm9zczp0cnVlICovXHJcblx0XHRcdFx0XHRcdH0gd2hpbGUgKHNjcm9sbEVsID0gc2Nyb2xsRWwucGFyZW50Tm9kZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoc2Nyb2xsRWwpIHtcclxuXHRcdFx0XHRcdGVsID0gc2Nyb2xsRWw7XHJcblx0XHRcdFx0XHRyZWN0ID0gc2Nyb2xsRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHR2eCA9IChhYnMocmVjdC5yaWdodCAtIHgpIDw9IHNlbnMpIC0gKGFicyhyZWN0LmxlZnQgLSB4KSA8PSBzZW5zKTtcclxuXHRcdFx0XHRcdHZ5ID0gKGFicyhyZWN0LmJvdHRvbSAtIHkpIDw9IHNlbnMpIC0gKGFicyhyZWN0LnRvcCAtIHkpIDw9IHNlbnMpO1xyXG5cdFx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRcdGlmICghKHZ4IHx8IHZ5KSkge1xyXG5cdFx0XHRcdFx0dnggPSAod2luV2lkdGggLSB4IDw9IHNlbnMpIC0gKHggPD0gc2Vucyk7XHJcblx0XHRcdFx0XHR2eSA9ICh3aW5IZWlnaHQgLSB5IDw9IHNlbnMpIC0gKHkgPD0gc2Vucyk7XHJcblxyXG5cdFx0XHRcdFx0LyoganNoaW50IGV4cHI6dHJ1ZSAqL1xyXG5cdFx0XHRcdFx0KHZ4IHx8IHZ5KSAmJiAoZWwgPSB3aW4pO1xyXG5cdFx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRcdGlmIChhdXRvU2Nyb2xsLnZ4ICE9PSB2eCB8fCBhdXRvU2Nyb2xsLnZ5ICE9PSB2eSB8fCBhdXRvU2Nyb2xsLmVsICE9PSBlbCkge1xyXG5cdFx0XHRcdFx0YXV0b1Njcm9sbC5lbCA9IGVsO1xyXG5cdFx0XHRcdFx0YXV0b1Njcm9sbC52eCA9IHZ4O1xyXG5cdFx0XHRcdFx0YXV0b1Njcm9sbC52eSA9IHZ5O1xyXG5cclxuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoYXV0b1Njcm9sbC5waWQpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChlbCkge1xyXG5cdFx0XHRcdFx0XHRhdXRvU2Nyb2xsLnBpZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoZWwgPT09IHdpbikge1xyXG5cdFx0XHRcdFx0XHRcdFx0d2luLnNjcm9sbFRvKHdpbi5wYWdlWE9mZnNldCArIHZ4ICogc3BlZWQsIHdpbi5wYWdlWU9mZnNldCArIHZ5ICogc3BlZWQpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHR2eSAmJiAoZWwuc2Nyb2xsVG9wICs9IHZ5ICogc3BlZWQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0dnggJiYgKGVsLnNjcm9sbExlZnQgKz0gdnggKiBzcGVlZCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAyNCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LCAzMCksXHJcblxyXG5cdFx0X3ByZXBhcmVHcm91cCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblx0XHRcdHZhciBncm91cCA9IG9wdGlvbnMuZ3JvdXA7XHJcblxyXG5cdFx0XHRpZiAoIWdyb3VwIHx8IHR5cGVvZiBncm91cCAhPSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdGdyb3VwID0gb3B0aW9ucy5ncm91cCA9IHtuYW1lOiBncm91cH07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdFsncHVsbCcsICdwdXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuXHRcdFx0XHRpZiAoIShrZXkgaW4gZ3JvdXApKSB7XHJcblx0XHRcdFx0XHRncm91cFtrZXldID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0b3B0aW9ucy5ncm91cHMgPSAnICcgKyBncm91cC5uYW1lICsgKGdyb3VwLnB1dC5qb2luID8gJyAnICsgZ3JvdXAucHV0LmpvaW4oJyAnKSA6ICcnKSArICcgJztcclxuXHRcdH1cclxuXHQ7XHJcblxyXG5cclxuXHJcblx0LyoqXHJcblx0ICogQGNsYXNzICBTb3J0YWJsZVxyXG5cdCAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSAgZWxcclxuXHQgKiBAcGFyYW0gIHtPYmplY3R9ICAgICAgIFtvcHRpb25zXVxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIFNvcnRhYmxlKGVsLCBvcHRpb25zKSB7XHJcblx0XHRpZiAoIShlbCAmJiBlbC5ub2RlVHlwZSAmJiBlbC5ub2RlVHlwZSA9PT0gMSkpIHtcclxuXHRcdFx0dGhyb3cgJ1NvcnRhYmxlOiBgZWxgIG11c3QgYmUgSFRNTEVsZW1lbnQsIGFuZCBub3QgJyArIHt9LnRvU3RyaW5nLmNhbGwoZWwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWwgPSBlbDsgLy8gcm9vdCBlbGVtZW50XHJcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zID0gX2V4dGVuZCh7fSwgb3B0aW9ucyk7XHJcblxyXG5cclxuXHRcdC8vIEV4cG9ydCBpbnN0YW5jZVxyXG5cdFx0ZWxbZXhwYW5kb10gPSB0aGlzO1xyXG5cclxuXHJcblx0XHQvLyBEZWZhdWx0IG9wdGlvbnNcclxuXHRcdHZhciBkZWZhdWx0cyA9IHtcclxuXHRcdFx0Z3JvdXA6IE1hdGgucmFuZG9tKCksXHJcblx0XHRcdHNvcnQ6IHRydWUsXHJcblx0XHRcdGRpc2FibGVkOiBmYWxzZSxcclxuXHRcdFx0c3RvcmU6IG51bGwsXHJcblx0XHRcdGhhbmRsZTogbnVsbCxcclxuXHRcdFx0c2Nyb2xsOiB0cnVlLFxyXG5cdFx0XHRzY3JvbGxTZW5zaXRpdml0eTogMzAsXHJcblx0XHRcdHNjcm9sbFNwZWVkOiAxMCxcclxuXHRcdFx0ZHJhZ2dhYmxlOiAvW3VvXWwvaS50ZXN0KGVsLm5vZGVOYW1lKSA/ICdsaScgOiAnPionLFxyXG5cdFx0XHRnaG9zdENsYXNzOiAnc29ydGFibGUtZ2hvc3QnLFxyXG5cdFx0XHRjaG9zZW5DbGFzczogJ3NvcnRhYmxlLWNob3NlbicsXHJcblx0XHRcdGlnbm9yZTogJ2EsIGltZycsXHJcblx0XHRcdGZpbHRlcjogbnVsbCxcclxuXHRcdFx0YW5pbWF0aW9uOiAwLFxyXG5cdFx0XHRzZXREYXRhOiBmdW5jdGlvbiAoZGF0YVRyYW5zZmVyLCBkcmFnRWwpIHtcclxuXHRcdFx0XHRkYXRhVHJhbnNmZXIuc2V0RGF0YSgnVGV4dCcsIGRyYWdFbC50ZXh0Q29udGVudCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGRyb3BCdWJibGU6IGZhbHNlLFxyXG5cdFx0XHRkcmFnb3ZlckJ1YmJsZTogZmFsc2UsXHJcblx0XHRcdGRhdGFJZEF0dHI6ICdkYXRhLWlkJyxcclxuXHRcdFx0ZGVsYXk6IDAsXHJcblx0XHRcdGZvcmNlRmFsbGJhY2s6IGZhbHNlLFxyXG5cdFx0XHRmYWxsYmFja0NsYXNzOiAnc29ydGFibGUtZmFsbGJhY2snLFxyXG5cdFx0XHRmYWxsYmFja09uQm9keTogZmFsc2VcclxuXHRcdH07XHJcblxyXG5cclxuXHRcdC8vIFNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdGZvciAodmFyIG5hbWUgaW4gZGVmYXVsdHMpIHtcclxuXHRcdFx0IShuYW1lIGluIG9wdGlvbnMpICYmIChvcHRpb25zW25hbWVdID0gZGVmYXVsdHNbbmFtZV0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdF9wcmVwYXJlR3JvdXAob3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gQmluZCBhbGwgcHJpdmF0ZSBtZXRob2RzXHJcblx0XHRmb3IgKHZhciBmbiBpbiB0aGlzKSB7XHJcblx0XHRcdGlmIChmbi5jaGFyQXQoMCkgPT09ICdfJykge1xyXG5cdFx0XHRcdHRoaXNbZm5dID0gdGhpc1tmbl0uYmluZCh0aGlzKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldHVwIGRyYWcgbW9kZVxyXG5cdFx0dGhpcy5uYXRpdmVEcmFnZ2FibGUgPSBvcHRpb25zLmZvcmNlRmFsbGJhY2sgPyBmYWxzZSA6IHN1cHBvcnREcmFnZ2FibGU7XHJcblxyXG5cdFx0Ly8gQmluZCBldmVudHNcclxuXHRcdF9vbihlbCwgJ21vdXNlZG93bicsIHRoaXMuX29uVGFwU3RhcnQpO1xyXG5cdFx0X29uKGVsLCAndG91Y2hzdGFydCcsIHRoaXMuX29uVGFwU3RhcnQpO1xyXG5cclxuXHRcdGlmICh0aGlzLm5hdGl2ZURyYWdnYWJsZSkge1xyXG5cdFx0XHRfb24oZWwsICdkcmFnb3ZlcicsIHRoaXMpO1xyXG5cdFx0XHRfb24oZWwsICdkcmFnZW50ZXInLCB0aGlzKTtcclxuXHRcdH1cclxuXHJcblx0XHR0b3VjaERyYWdPdmVyTGlzdGVuZXJzLnB1c2godGhpcy5fb25EcmFnT3Zlcik7XHJcblxyXG5cdFx0Ly8gUmVzdG9yZSBzb3J0aW5nXHJcblx0XHRvcHRpb25zLnN0b3JlICYmIHRoaXMuc29ydChvcHRpb25zLnN0b3JlLmdldCh0aGlzKSk7XHJcblx0fVxyXG5cclxuXHJcblx0U29ydGFibGUucHJvdG90eXBlID0gLyoqIEBsZW5kcyBTb3J0YWJsZS5wcm90b3R5cGUgKi8ge1xyXG5cdFx0Y29uc3RydWN0b3I6IFNvcnRhYmxlLFxyXG5cclxuXHRcdF9vblRhcFN0YXJ0OiBmdW5jdGlvbiAoLyoqIEV2ZW50fFRvdWNoRXZlbnQgKi9ldnQpIHtcclxuXHRcdFx0dmFyIF90aGlzID0gdGhpcyxcclxuXHRcdFx0XHRlbCA9IHRoaXMuZWwsXHJcblx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHR0eXBlID0gZXZ0LnR5cGUsXHJcblx0XHRcdFx0dG91Y2ggPSBldnQudG91Y2hlcyAmJiBldnQudG91Y2hlc1swXSxcclxuXHRcdFx0XHR0YXJnZXQgPSAodG91Y2ggfHwgZXZ0KS50YXJnZXQsXHJcblx0XHRcdFx0b3JpZ2luYWxUYXJnZXQgPSB0YXJnZXQsXHJcblx0XHRcdFx0ZmlsdGVyID0gb3B0aW9ucy5maWx0ZXI7XHJcblxyXG5cclxuXHRcdFx0aWYgKHR5cGUgPT09ICdtb3VzZWRvd24nICYmIGV2dC5idXR0b24gIT09IDAgfHwgb3B0aW9ucy5kaXNhYmxlZCkge1xyXG5cdFx0XHRcdHJldHVybjsgLy8gb25seSBsZWZ0IGJ1dHRvbiBvciBlbmFibGVkXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRhcmdldCA9IF9jbG9zZXN0KHRhcmdldCwgb3B0aW9ucy5kcmFnZ2FibGUsIGVsKTtcclxuXHJcblx0XHRcdGlmICghdGFyZ2V0KSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBnZXQgdGhlIGluZGV4IG9mIHRoZSBkcmFnZ2VkIGVsZW1lbnQgd2l0aGluIGl0cyBwYXJlbnRcclxuXHRcdFx0b2xkSW5kZXggPSBfaW5kZXgodGFyZ2V0KTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGZpbHRlclxyXG5cdFx0XHRpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdGlmIChmaWx0ZXIuY2FsbCh0aGlzLCBldnQsIHRhcmdldCwgdGhpcykpIHtcclxuXHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KF90aGlzLCBvcmlnaW5hbFRhcmdldCwgJ2ZpbHRlcicsIHRhcmdldCwgZWwsIG9sZEluZGV4KTtcclxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBjYW5jZWwgZG5kXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKGZpbHRlcikge1xyXG5cdFx0XHRcdGZpbHRlciA9IGZpbHRlci5zcGxpdCgnLCcpLnNvbWUoZnVuY3Rpb24gKGNyaXRlcmlhKSB7XHJcblx0XHRcdFx0XHRjcml0ZXJpYSA9IF9jbG9zZXN0KG9yaWdpbmFsVGFyZ2V0LCBjcml0ZXJpYS50cmltKCksIGVsKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoY3JpdGVyaWEpIHtcclxuXHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQoX3RoaXMsIGNyaXRlcmlhLCAnZmlsdGVyJywgdGFyZ2V0LCBlbCwgb2xkSW5kZXgpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0aWYgKGZpbHRlcikge1xyXG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm47IC8vIGNhbmNlbCBkbmRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRpZiAob3B0aW9ucy5oYW5kbGUgJiYgIV9jbG9zZXN0KG9yaWdpbmFsVGFyZ2V0LCBvcHRpb25zLmhhbmRsZSwgZWwpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly8gUHJlcGFyZSBgZHJhZ3N0YXJ0YFxyXG5cdFx0XHR0aGlzLl9wcmVwYXJlRHJhZ1N0YXJ0KGV2dCwgdG91Y2gsIHRhcmdldCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9wcmVwYXJlRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoLyoqIEV2ZW50ICovZXZ0LCAvKiogVG91Y2ggKi90b3VjaCwgLyoqIEhUTUxFbGVtZW50ICovdGFyZ2V0KSB7XHJcblx0XHRcdHZhciBfdGhpcyA9IHRoaXMsXHJcblx0XHRcdFx0ZWwgPSBfdGhpcy5lbCxcclxuXHRcdFx0XHRvcHRpb25zID0gX3RoaXMub3B0aW9ucyxcclxuXHRcdFx0XHRvd25lckRvY3VtZW50ID0gZWwub3duZXJEb2N1bWVudCxcclxuXHRcdFx0XHRkcmFnU3RhcnRGbjtcclxuXHJcblx0XHRcdGlmICh0YXJnZXQgJiYgIWRyYWdFbCAmJiAodGFyZ2V0LnBhcmVudE5vZGUgPT09IGVsKSkge1xyXG5cdFx0XHRcdHRhcEV2dCA9IGV2dDtcclxuXHJcblx0XHRcdFx0cm9vdEVsID0gZWw7XHJcblx0XHRcdFx0ZHJhZ0VsID0gdGFyZ2V0O1xyXG5cdFx0XHRcdHBhcmVudEVsID0gZHJhZ0VsLnBhcmVudE5vZGU7XHJcblx0XHRcdFx0bmV4dEVsID0gZHJhZ0VsLm5leHRTaWJsaW5nO1xyXG5cdFx0XHRcdGFjdGl2ZUdyb3VwID0gb3B0aW9ucy5ncm91cDtcclxuXHJcblx0XHRcdFx0ZHJhZ1N0YXJ0Rm4gPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQvLyBEZWxheWVkIGRyYWcgaGFzIGJlZW4gdHJpZ2dlcmVkXHJcblx0XHRcdFx0XHQvLyB3ZSBjYW4gcmUtZW5hYmxlIHRoZSBldmVudHM6IHRvdWNobW92ZS9tb3VzZW1vdmVcclxuXHRcdFx0XHRcdF90aGlzLl9kaXNhYmxlRGVsYXllZERyYWcoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBNYWtlIHRoZSBlbGVtZW50IGRyYWdnYWJsZVxyXG5cdFx0XHRcdFx0ZHJhZ0VsLmRyYWdnYWJsZSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ2hvc2VuIGl0ZW1cclxuXHRcdFx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIF90aGlzLm9wdGlvbnMuY2hvc2VuQ2xhc3MsIHRydWUpO1xyXG5cclxuXHRcdFx0XHRcdC8vIEJpbmQgdGhlIGV2ZW50czogZHJhZ3N0YXJ0L2RyYWdlbmRcclxuXHRcdFx0XHRcdF90aGlzLl90cmlnZ2VyRHJhZ1N0YXJ0KHRvdWNoKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQvLyBEaXNhYmxlIFwiZHJhZ2dhYmxlXCJcclxuXHRcdFx0XHRvcHRpb25zLmlnbm9yZS5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24gKGNyaXRlcmlhKSB7XHJcblx0XHRcdFx0XHRfZmluZChkcmFnRWwsIGNyaXRlcmlhLnRyaW0oKSwgX2Rpc2FibGVEcmFnZ2FibGUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ21vdXNldXAnLCBfdGhpcy5fb25Ecm9wKTtcclxuXHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ3RvdWNoZW5kJywgX3RoaXMuX29uRHJvcCk7XHJcblx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICd0b3VjaGNhbmNlbCcsIF90aGlzLl9vbkRyb3ApO1xyXG5cclxuXHRcdFx0XHRpZiAob3B0aW9ucy5kZWxheSkge1xyXG5cdFx0XHRcdFx0Ly8gSWYgdGhlIHVzZXIgbW92ZXMgdGhlIHBvaW50ZXIgb3IgbGV0IGdvIHRoZSBjbGljayBvciB0b3VjaFxyXG5cdFx0XHRcdFx0Ly8gYmVmb3JlIHRoZSBkZWxheSBoYXMgYmVlbiByZWFjaGVkOlxyXG5cdFx0XHRcdFx0Ly8gZGlzYWJsZSB0aGUgZGVsYXllZCBkcmFnXHJcblx0XHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ21vdXNldXAnLCBfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcclxuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAndG91Y2hlbmQnLCBfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcclxuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAndG91Y2hjYW5jZWwnLCBfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcclxuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAnbW91c2Vtb3ZlJywgX3RoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XHJcblx0XHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ3RvdWNobW92ZScsIF90aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xyXG5cclxuXHRcdFx0XHRcdF90aGlzLl9kcmFnU3RhcnRUaW1lciA9IHNldFRpbWVvdXQoZHJhZ1N0YXJ0Rm4sIG9wdGlvbnMuZGVsYXkpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkcmFnU3RhcnRGbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfZGlzYWJsZURlbGF5ZWREcmFnOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBvd25lckRvY3VtZW50ID0gdGhpcy5lbC5vd25lckRvY3VtZW50O1xyXG5cclxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX2RyYWdTdGFydFRpbWVyKTtcclxuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XHJcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ3RvdWNoZW5kJywgdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcclxuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2hjYW5jZWwnLCB0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xyXG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICdtb3VzZW1vdmUnLCB0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xyXG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICd0b3VjaG1vdmUnLCB0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJpZ2dlckRyYWdTdGFydDogZnVuY3Rpb24gKC8qKiBUb3VjaCAqL3RvdWNoKSB7XHJcblx0XHRcdGlmICh0b3VjaCkge1xyXG5cdFx0XHRcdC8vIFRvdWNoIGRldmljZSBzdXBwb3J0XHJcblx0XHRcdFx0dGFwRXZ0ID0ge1xyXG5cdFx0XHRcdFx0dGFyZ2V0OiBkcmFnRWwsXHJcblx0XHRcdFx0XHRjbGllbnRYOiB0b3VjaC5jbGllbnRYLFxyXG5cdFx0XHRcdFx0Y2xpZW50WTogdG91Y2guY2xpZW50WVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHRoaXMuX29uRHJhZ1N0YXJ0KHRhcEV2dCwgJ3RvdWNoJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoIXRoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XHJcblx0XHRcdFx0dGhpcy5fb25EcmFnU3RhcnQodGFwRXZ0LCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRfb24oZHJhZ0VsLCAnZHJhZ2VuZCcsIHRoaXMpO1xyXG5cdFx0XHRcdF9vbihyb290RWwsICdkcmFnc3RhcnQnLCB0aGlzLl9vbkRyYWdTdGFydCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xyXG5cdFx0XHRcdFx0ZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kcmFnU3RhcnRlZDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpZiAocm9vdEVsICYmIGRyYWdFbCkge1xyXG5cdFx0XHRcdC8vIEFwcGx5IGVmZmVjdFxyXG5cdFx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIHRoaXMub3B0aW9ucy5naG9zdENsYXNzLCB0cnVlKTtcclxuXHJcblx0XHRcdFx0U29ydGFibGUuYWN0aXZlID0gdGhpcztcclxuXHJcblx0XHRcdFx0Ly8gRHJhZyBzdGFydCBldmVudFxyXG5cdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3N0YXJ0JywgZHJhZ0VsLCByb290RWwsIG9sZEluZGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfZW11bGF0ZURyYWdPdmVyOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmICh0b3VjaEV2dCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLl9sYXN0WCA9PT0gdG91Y2hFdnQuY2xpZW50WCAmJiB0aGlzLl9sYXN0WSA9PT0gdG91Y2hFdnQuY2xpZW50WSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fbGFzdFggPSB0b3VjaEV2dC5jbGllbnRYO1xyXG5cdFx0XHRcdHRoaXMuX2xhc3RZID0gdG91Y2hFdnQuY2xpZW50WTtcclxuXHJcblx0XHRcdFx0aWYgKCFzdXBwb3J0Q3NzUG9pbnRlckV2ZW50cykge1xyXG5cdFx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnZGlzcGxheScsICdub25lJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0b3VjaEV2dC5jbGllbnRYLCB0b3VjaEV2dC5jbGllbnRZKSxcclxuXHRcdFx0XHRcdHBhcmVudCA9IHRhcmdldCxcclxuXHRcdFx0XHRcdGdyb3VwTmFtZSA9ICcgJyArIHRoaXMub3B0aW9ucy5ncm91cC5uYW1lICsgJycsXHJcblx0XHRcdFx0XHRpID0gdG91Y2hEcmFnT3Zlckxpc3RlbmVycy5sZW5ndGg7XHJcblxyXG5cdFx0XHRcdGlmIChwYXJlbnQpIHtcclxuXHRcdFx0XHRcdGRvIHtcclxuXHRcdFx0XHRcdFx0aWYgKHBhcmVudFtleHBhbmRvXSAmJiBwYXJlbnRbZXhwYW5kb10ub3B0aW9ucy5ncm91cHMuaW5kZXhPZihncm91cE5hbWUpID4gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHR3aGlsZSAoaS0tKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0b3VjaERyYWdPdmVyTGlzdGVuZXJzW2ldKHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xpZW50WDogdG91Y2hFdnQuY2xpZW50WCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xpZW50WTogdG91Y2hFdnQuY2xpZW50WSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0OiB0YXJnZXQsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJvb3RFbDogcGFyZW50XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR0YXJnZXQgPSBwYXJlbnQ7IC8vIHN0b3JlIGxhc3QgZWxlbWVudFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0LyoganNoaW50IGJvc3M6dHJ1ZSAqL1xyXG5cdFx0XHRcdFx0d2hpbGUgKHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICghc3VwcG9ydENzc1BvaW50ZXJFdmVudHMpIHtcclxuXHRcdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2Rpc3BsYXknLCAnJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHRfb25Ub3VjaE1vdmU6IGZ1bmN0aW9uICgvKipUb3VjaEV2ZW50Ki9ldnQpIHtcclxuXHRcdFx0aWYgKHRhcEV2dCkge1xyXG5cdFx0XHRcdC8vIG9ubHkgc2V0IHRoZSBzdGF0dXMgdG8gZHJhZ2dpbmcsIHdoZW4gd2UgYXJlIGFjdHVhbGx5IGRyYWdnaW5nXHJcblx0XHRcdFx0aWYgKCFTb3J0YWJsZS5hY3RpdmUpIHtcclxuXHRcdFx0XHRcdHRoaXMuX2RyYWdTdGFydGVkKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBhcyB3ZWxsIGFzIGNyZWF0aW5nIHRoZSBnaG9zdCBlbGVtZW50IG9uIHRoZSBkb2N1bWVudCBib2R5XHJcblx0XHRcdFx0dGhpcy5fYXBwZW5kR2hvc3QoKTtcclxuXHJcblx0XHRcdFx0dmFyIHRvdWNoID0gZXZ0LnRvdWNoZXMgPyBldnQudG91Y2hlc1swXSA6IGV2dCxcclxuXHRcdFx0XHRcdGR4ID0gdG91Y2guY2xpZW50WCAtIHRhcEV2dC5jbGllbnRYLFxyXG5cdFx0XHRcdFx0ZHkgPSB0b3VjaC5jbGllbnRZIC0gdGFwRXZ0LmNsaWVudFksXHJcblx0XHRcdFx0XHR0cmFuc2xhdGUzZCA9IGV2dC50b3VjaGVzID8gJ3RyYW5zbGF0ZTNkKCcgKyBkeCArICdweCwnICsgZHkgKyAncHgsMCknIDogJ3RyYW5zbGF0ZSgnICsgZHggKyAncHgsJyArIGR5ICsgJ3B4KSc7XHJcblxyXG5cdFx0XHRcdG1vdmVkID0gdHJ1ZTtcclxuXHRcdFx0XHR0b3VjaEV2dCA9IHRvdWNoO1xyXG5cclxuXHRcdFx0XHRfY3NzKGdob3N0RWwsICd3ZWJraXRUcmFuc2Zvcm0nLCB0cmFuc2xhdGUzZCk7XHJcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnbW96VHJhbnNmb3JtJywgdHJhbnNsYXRlM2QpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ21zVHJhbnNmb3JtJywgdHJhbnNsYXRlM2QpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3RyYW5zZm9ybScsIHRyYW5zbGF0ZTNkKTtcclxuXHJcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2FwcGVuZEdob3N0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmICghZ2hvc3RFbCkge1xyXG5cdFx0XHRcdHZhciByZWN0ID0gZHJhZ0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG5cdFx0XHRcdFx0Y3NzID0gX2NzcyhkcmFnRWwpLFxyXG5cdFx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHRcdGdob3N0UmVjdDtcclxuXHJcblx0XHRcdFx0Z2hvc3RFbCA9IGRyYWdFbC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG5cdFx0XHRcdF90b2dnbGVDbGFzcyhnaG9zdEVsLCBvcHRpb25zLmdob3N0Q2xhc3MsIGZhbHNlKTtcclxuXHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZ2hvc3RFbCwgb3B0aW9ucy5mYWxsYmFja0NsYXNzLCB0cnVlKTtcclxuXHJcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAndG9wJywgcmVjdC50b3AgLSBwYXJzZUludChjc3MubWFyZ2luVG9wLCAxMCkpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2xlZnQnLCByZWN0LmxlZnQgLSBwYXJzZUludChjc3MubWFyZ2luTGVmdCwgMTApKTtcclxuXHRcdFx0XHRfY3NzKGdob3N0RWwsICd3aWR0aCcsIHJlY3Qud2lkdGgpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2hlaWdodCcsIHJlY3QuaGVpZ2h0KTtcclxuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdvcGFjaXR5JywgJzAuOCcpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3Bvc2l0aW9uJywgJ2ZpeGVkJyk7XHJcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnekluZGV4JywgJzEwMDAwMCcpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3BvaW50ZXJFdmVudHMnLCAnbm9uZScpO1xyXG5cclxuXHRcdFx0XHRvcHRpb25zLmZhbGxiYWNrT25Cb2R5ICYmIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZ2hvc3RFbCkgfHwgcm9vdEVsLmFwcGVuZENoaWxkKGdob3N0RWwpO1xyXG5cclxuXHRcdFx0XHQvLyBGaXhpbmcgZGltZW5zaW9ucy5cclxuXHRcdFx0XHRnaG9zdFJlY3QgPSBnaG9zdEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3dpZHRoJywgcmVjdC53aWR0aCAqIDIgLSBnaG9zdFJlY3Qud2lkdGgpO1xyXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2hlaWdodCcsIHJlY3QuaGVpZ2h0ICogMiAtIGdob3N0UmVjdC5oZWlnaHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9vbkRyYWdTdGFydDogZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQsIC8qKmJvb2xlYW4qL3VzZUZhbGxiYWNrKSB7XHJcblx0XHRcdHZhciBkYXRhVHJhbnNmZXIgPSBldnQuZGF0YVRyYW5zZmVyLFxyXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHR0aGlzLl9vZmZVcEV2ZW50cygpO1xyXG5cclxuXHRcdFx0aWYgKGFjdGl2ZUdyb3VwLnB1bGwgPT0gJ2Nsb25lJykge1xyXG5cdFx0XHRcdGNsb25lRWwgPSBkcmFnRWwuY2xvbmVOb2RlKHRydWUpO1xyXG5cdFx0XHRcdF9jc3MoY2xvbmVFbCwgJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cdFx0XHRcdHJvb3RFbC5pbnNlcnRCZWZvcmUoY2xvbmVFbCwgZHJhZ0VsKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHVzZUZhbGxiYWNrKSB7XHJcblxyXG5cdFx0XHRcdGlmICh1c2VGYWxsYmFjayA9PT0gJ3RvdWNoJykge1xyXG5cdFx0XHRcdFx0Ly8gQmluZCB0b3VjaCBldmVudHNcclxuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcclxuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ3RvdWNoZW5kJywgdGhpcy5fb25Ecm9wKTtcclxuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ3RvdWNoY2FuY2VsJywgdGhpcy5fb25Ecm9wKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gT2xkIGJyd29zZXJcclxuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ21vdXNlbW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcclxuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ21vdXNldXAnLCB0aGlzLl9vbkRyb3ApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fbG9vcElkID0gc2V0SW50ZXJ2YWwodGhpcy5fZW11bGF0ZURyYWdPdmVyLCA1MCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0aWYgKGRhdGFUcmFuc2Zlcikge1xyXG5cdFx0XHRcdFx0ZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XHJcblx0XHRcdFx0XHRvcHRpb25zLnNldERhdGEgJiYgb3B0aW9ucy5zZXREYXRhLmNhbGwodGhpcywgZGF0YVRyYW5zZmVyLCBkcmFnRWwpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0X29uKGRvY3VtZW50LCAnZHJvcCcsIHRoaXMpO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQodGhpcy5fZHJhZ1N0YXJ0ZWQsIDApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9vbkRyYWdPdmVyOiBmdW5jdGlvbiAoLyoqRXZlbnQqL2V2dCkge1xyXG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsLFxyXG5cdFx0XHRcdHRhcmdldCxcclxuXHRcdFx0XHRkcmFnUmVjdCxcclxuXHRcdFx0XHRyZXZlcnQsXHJcblx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHRncm91cCA9IG9wdGlvbnMuZ3JvdXAsXHJcblx0XHRcdFx0Z3JvdXBQdXQgPSBncm91cC5wdXQsXHJcblx0XHRcdFx0aXNPd25lciA9IChhY3RpdmVHcm91cCA9PT0gZ3JvdXApLFxyXG5cdFx0XHRcdGNhblNvcnQgPSBvcHRpb25zLnNvcnQ7XHJcblxyXG5cdFx0XHRpZiAoZXZ0LnByZXZlbnREZWZhdWx0ICE9PSB2b2lkIDApIHtcclxuXHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHQhb3B0aW9ucy5kcmFnb3ZlckJ1YmJsZSAmJiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vdmVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmIChhY3RpdmVHcm91cCAmJiAhb3B0aW9ucy5kaXNhYmxlZCAmJlxyXG5cdFx0XHRcdChpc093bmVyXHJcblx0XHRcdFx0XHQ/IGNhblNvcnQgfHwgKHJldmVydCA9ICFyb290RWwuY29udGFpbnMoZHJhZ0VsKSkgLy8gUmV2ZXJ0aW5nIGl0ZW0gaW50byB0aGUgb3JpZ2luYWwgbGlzdFxyXG5cdFx0XHRcdFx0OiBhY3RpdmVHcm91cC5wdWxsICYmIGdyb3VwUHV0ICYmIChcclxuXHRcdFx0XHRcdFx0KGFjdGl2ZUdyb3VwLm5hbWUgPT09IGdyb3VwLm5hbWUpIHx8IC8vIGJ5IE5hbWVcclxuXHRcdFx0XHRcdFx0KGdyb3VwUHV0LmluZGV4T2YgJiYgfmdyb3VwUHV0LmluZGV4T2YoYWN0aXZlR3JvdXAubmFtZSkpIC8vIGJ5IEFycmF5XHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KSAmJlxyXG5cdFx0XHRcdChldnQucm9vdEVsID09PSB2b2lkIDAgfHwgZXZ0LnJvb3RFbCA9PT0gdGhpcy5lbCkgLy8gdG91Y2ggZmFsbGJhY2tcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Ly8gU21hcnQgYXV0by1zY3JvbGxpbmdcclxuXHRcdFx0XHRfYXV0b1Njcm9sbChldnQsIG9wdGlvbnMsIHRoaXMuZWwpO1xyXG5cclxuXHRcdFx0XHRpZiAoX3NpbGVudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGFyZ2V0ID0gX2Nsb3Nlc3QoZXZ0LnRhcmdldCwgb3B0aW9ucy5kcmFnZ2FibGUsIGVsKTtcclxuXHRcdFx0XHRkcmFnUmVjdCA9IGRyYWdFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcblx0XHRcdFx0aWYgKHJldmVydCkge1xyXG5cdFx0XHRcdFx0X2Nsb25lSGlkZSh0cnVlKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoY2xvbmVFbCB8fCBuZXh0RWwpIHtcclxuXHRcdFx0XHRcdFx0cm9vdEVsLmluc2VydEJlZm9yZShkcmFnRWwsIGNsb25lRWwgfHwgbmV4dEVsKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKCFjYW5Tb3J0KSB7XHJcblx0XHRcdFx0XHRcdHJvb3RFbC5hcHBlbmRDaGlsZChkcmFnRWwpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0XHRpZiAoKGVsLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgfHwgKGVsLmNoaWxkcmVuWzBdID09PSBnaG9zdEVsKSB8fFxyXG5cdFx0XHRcdFx0KGVsID09PSBldnQudGFyZ2V0KSAmJiAodGFyZ2V0ID0gX2dob3N0SXNMYXN0KGVsLCBldnQpKVxyXG5cdFx0XHRcdCkge1xyXG5cclxuXHRcdFx0XHRcdGlmICh0YXJnZXQpIHtcclxuXHRcdFx0XHRcdFx0aWYgKHRhcmdldC5hbmltYXRlZCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dGFyZ2V0UmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRfY2xvbmVIaWRlKGlzT3duZXIpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChfb25Nb3ZlKHJvb3RFbCwgZWwsIGRyYWdFbCwgZHJhZ1JlY3QsIHRhcmdldCwgdGFyZ2V0UmVjdCkgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcdGlmICghZHJhZ0VsLmNvbnRhaW5zKGVsKSkge1xyXG5cdFx0XHRcdFx0XHRcdGVsLmFwcGVuZENoaWxkKGRyYWdFbCk7XHJcblx0XHRcdFx0XHRcdFx0cGFyZW50RWwgPSBlbDsgLy8gYWN0dWFsaXphdGlvblxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR0aGlzLl9hbmltYXRlKGRyYWdSZWN0LCBkcmFnRWwpO1xyXG5cdFx0XHRcdFx0XHR0YXJnZXQgJiYgdGhpcy5fYW5pbWF0ZSh0YXJnZXRSZWN0LCB0YXJnZXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmICh0YXJnZXQgJiYgIXRhcmdldC5hbmltYXRlZCAmJiB0YXJnZXQgIT09IGRyYWdFbCAmJiAodGFyZ2V0LnBhcmVudE5vZGVbZXhwYW5kb10gIT09IHZvaWQgMCkpIHtcclxuXHRcdFx0XHRcdGlmIChsYXN0RWwgIT09IHRhcmdldCkge1xyXG5cdFx0XHRcdFx0XHRsYXN0RWwgPSB0YXJnZXQ7XHJcblx0XHRcdFx0XHRcdGxhc3RDU1MgPSBfY3NzKHRhcmdldCk7XHJcblx0XHRcdFx0XHRcdGxhc3RQYXJlbnRDU1MgPSBfY3NzKHRhcmdldC5wYXJlbnROb2RlKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRcdFx0dmFyIHRhcmdldFJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcblx0XHRcdFx0XHRcdHdpZHRoID0gdGFyZ2V0UmVjdC5yaWdodCAtIHRhcmdldFJlY3QubGVmdCxcclxuXHRcdFx0XHRcdFx0aGVpZ2h0ID0gdGFyZ2V0UmVjdC5ib3R0b20gLSB0YXJnZXRSZWN0LnRvcCxcclxuXHRcdFx0XHRcdFx0ZmxvYXRpbmcgPSAvbGVmdHxyaWdodHxpbmxpbmUvLnRlc3QobGFzdENTUy5jc3NGbG9hdCArIGxhc3RDU1MuZGlzcGxheSlcclxuXHRcdFx0XHRcdFx0XHR8fCAobGFzdFBhcmVudENTUy5kaXNwbGF5ID09ICdmbGV4JyAmJiBsYXN0UGFyZW50Q1NTWydmbGV4LWRpcmVjdGlvbiddLmluZGV4T2YoJ3JvdycpID09PSAwKSxcclxuXHRcdFx0XHRcdFx0aXNXaWRlID0gKHRhcmdldC5vZmZzZXRXaWR0aCA+IGRyYWdFbC5vZmZzZXRXaWR0aCksXHJcblx0XHRcdFx0XHRcdGlzTG9uZyA9ICh0YXJnZXQub2Zmc2V0SGVpZ2h0ID4gZHJhZ0VsLm9mZnNldEhlaWdodCksXHJcblx0XHRcdFx0XHRcdGhhbGZ3YXkgPSAoZmxvYXRpbmcgPyAoZXZ0LmNsaWVudFggLSB0YXJnZXRSZWN0LmxlZnQpIC8gd2lkdGggOiAoZXZ0LmNsaWVudFkgLSB0YXJnZXRSZWN0LnRvcCkgLyBoZWlnaHQpID4gMC41LFxyXG5cdFx0XHRcdFx0XHRuZXh0U2libGluZyA9IHRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcsXHJcblx0XHRcdFx0XHRcdG1vdmVWZWN0b3IgPSBfb25Nb3ZlKHJvb3RFbCwgZWwsIGRyYWdFbCwgZHJhZ1JlY3QsIHRhcmdldCwgdGFyZ2V0UmVjdCksXHJcblx0XHRcdFx0XHRcdGFmdGVyXHJcblx0XHRcdFx0XHQ7XHJcblxyXG5cdFx0XHRcdFx0aWYgKG1vdmVWZWN0b3IgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcdF9zaWxlbnQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KF91bnNpbGVudCwgMzApO1xyXG5cclxuXHRcdFx0XHRcdFx0X2Nsb25lSGlkZShpc093bmVyKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmIChtb3ZlVmVjdG9yID09PSAxIHx8IG1vdmVWZWN0b3IgPT09IC0xKSB7XHJcblx0XHRcdFx0XHRcdFx0YWZ0ZXIgPSAobW92ZVZlY3RvciA9PT0gMSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoZmxvYXRpbmcpIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgZWxUb3AgPSBkcmFnRWwub2Zmc2V0VG9wLFxyXG5cdFx0XHRcdFx0XHRcdFx0dGdUb3AgPSB0YXJnZXQub2Zmc2V0VG9wO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoZWxUb3AgPT09IHRnVG9wKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRhZnRlciA9ICh0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZyA9PT0gZHJhZ0VsKSAmJiAhaXNXaWRlIHx8IGhhbGZ3YXkgJiYgaXNXaWRlO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRhZnRlciA9IHRnVG9wID4gZWxUb3A7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGFmdGVyID0gKG5leHRTaWJsaW5nICE9PSBkcmFnRWwpICYmICFpc0xvbmcgfHwgaGFsZndheSAmJiBpc0xvbmc7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdGlmICghZHJhZ0VsLmNvbnRhaW5zKGVsKSkge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChhZnRlciAmJiAhbmV4dFNpYmxpbmcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGVsLmFwcGVuZENoaWxkKGRyYWdFbCk7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnRWwsIGFmdGVyID8gbmV4dFNpYmxpbmcgOiB0YXJnZXQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0cGFyZW50RWwgPSBkcmFnRWwucGFyZW50Tm9kZTsgLy8gYWN0dWFsaXphdGlvblxyXG5cclxuXHRcdFx0XHRcdFx0dGhpcy5fYW5pbWF0ZShkcmFnUmVjdCwgZHJhZ0VsKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5fYW5pbWF0ZSh0YXJnZXRSZWN0LCB0YXJnZXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfYW5pbWF0ZTogZnVuY3Rpb24gKHByZXZSZWN0LCB0YXJnZXQpIHtcclxuXHRcdFx0dmFyIG1zID0gdGhpcy5vcHRpb25zLmFuaW1hdGlvbjtcclxuXHJcblx0XHRcdGlmIChtcykge1xyXG5cdFx0XHRcdHZhciBjdXJyZW50UmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcblx0XHRcdFx0X2Nzcyh0YXJnZXQsICd0cmFuc2l0aW9uJywgJ25vbmUnKTtcclxuXHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgnXHJcblx0XHRcdFx0XHQrIChwcmV2UmVjdC5sZWZ0IC0gY3VycmVudFJlY3QubGVmdCkgKyAncHgsJ1xyXG5cdFx0XHRcdFx0KyAocHJldlJlY3QudG9wIC0gY3VycmVudFJlY3QudG9wKSArICdweCwwKSdcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHR0YXJnZXQub2Zmc2V0V2lkdGg7IC8vIHJlcGFpbnRcclxuXHJcblx0XHRcdFx0X2Nzcyh0YXJnZXQsICd0cmFuc2l0aW9uJywgJ2FsbCAnICsgbXMgKyAnbXMnKTtcclxuXHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgwLDAsMCknKTtcclxuXHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRhcmdldC5hbmltYXRlZCk7XHJcblx0XHRcdFx0dGFyZ2V0LmFuaW1hdGVkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zaXRpb24nLCAnJyk7XHJcblx0XHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICcnKTtcclxuXHRcdFx0XHRcdHRhcmdldC5hbmltYXRlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdH0sIG1zKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfb2ZmVXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIG93bmVyRG9jdW1lbnQgPSB0aGlzLmVsLm93bmVyRG9jdW1lbnQ7XHJcblxyXG5cdFx0XHRfb2ZmKGRvY3VtZW50LCAndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUpO1xyXG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICdtb3VzZXVwJywgdGhpcy5fb25Ecm9wKTtcclxuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLl9vbkRyb3ApO1xyXG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICd0b3VjaGNhbmNlbCcsIHRoaXMuX29uRHJvcCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9vbkRyb3A6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XHJcblx0XHRcdHZhciBlbCA9IHRoaXMuZWwsXHJcblx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5fbG9vcElkKTtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChhdXRvU2Nyb2xsLnBpZCk7XHJcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLl9kcmFnU3RhcnRUaW1lcik7XHJcblxyXG5cdFx0XHQvLyBVbmJpbmQgZXZlbnRzXHJcblx0XHRcdF9vZmYoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcclxuXHRcdFx0XHRfb2ZmKGRvY3VtZW50LCAnZHJvcCcsIHRoaXMpO1xyXG5cdFx0XHRcdF9vZmYoZWwsICdkcmFnc3RhcnQnLCB0aGlzLl9vbkRyYWdTdGFydCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX29mZlVwRXZlbnRzKCk7XHJcblxyXG5cdFx0XHRpZiAoZXZ0KSB7XHJcblx0XHRcdFx0aWYgKG1vdmVkKSB7XHJcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdCFvcHRpb25zLmRyb3BCdWJibGUgJiYgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Z2hvc3RFbCAmJiBnaG9zdEVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2hvc3RFbCk7XHJcblxyXG5cdFx0XHRcdGlmIChkcmFnRWwpIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLm5hdGl2ZURyYWdnYWJsZSkge1xyXG5cdFx0XHRcdFx0XHRfb2ZmKGRyYWdFbCwgJ2RyYWdlbmQnLCB0aGlzKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRfZGlzYWJsZURyYWdnYWJsZShkcmFnRWwpO1xyXG5cclxuXHRcdFx0XHRcdC8vIFJlbW92ZSBjbGFzcydzXHJcblx0XHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZHJhZ0VsLCB0aGlzLm9wdGlvbnMuZ2hvc3RDbGFzcywgZmFsc2UpO1xyXG5cdFx0XHRcdFx0X3RvZ2dsZUNsYXNzKGRyYWdFbCwgdGhpcy5vcHRpb25zLmNob3NlbkNsYXNzLCBmYWxzZSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHJvb3RFbCAhPT0gcGFyZW50RWwpIHtcclxuXHRcdFx0XHRcdFx0bmV3SW5kZXggPSBfaW5kZXgoZHJhZ0VsKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmIChuZXdJbmRleCA+PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gZHJhZyBmcm9tIG9uZSBsaXN0IGFuZCBkcm9wIGludG8gYW5vdGhlclxyXG5cdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KG51bGwsIHBhcmVudEVsLCAnc29ydCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xyXG5cdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3NvcnQnLCBkcmFnRWwsIHJvb3RFbCwgb2xkSW5kZXgsIG5ld0luZGV4KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gQWRkIGV2ZW50XHJcblx0XHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQobnVsbCwgcGFyZW50RWwsICdhZGQnLCBkcmFnRWwsIHJvb3RFbCwgb2xkSW5kZXgsIG5ld0luZGV4KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGV2ZW50XHJcblx0XHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQodGhpcywgcm9vdEVsLCAncmVtb3ZlJywgZHJhZ0VsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgY2xvbmVcclxuXHRcdFx0XHRcdFx0Y2xvbmVFbCAmJiBjbG9uZUVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xvbmVFbCk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoZHJhZ0VsLm5leHRTaWJsaW5nICE9PSBuZXh0RWwpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkcmFnZ2VkIGVsZW1lbnQgd2l0aGluIGl0cyBwYXJlbnRcclxuXHRcdFx0XHRcdFx0XHRuZXdJbmRleCA9IF9pbmRleChkcmFnRWwpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAobmV3SW5kZXggPj0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZHJhZyAmIGRyb3Agd2l0aGluIHRoZSBzYW1lIGxpc3RcclxuXHRcdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3VwZGF0ZScsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQodGhpcywgcm9vdEVsLCAnc29ydCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmIChTb3J0YWJsZS5hY3RpdmUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKG5ld0luZGV4ID09PSBudWxsIHx8IG5ld0luZGV4ID09PSAtMSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld0luZGV4ID0gb2xkSW5kZXg7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ2VuZCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gU2F2ZSBzb3J0aW5nXHJcblx0XHRcdFx0XHRcdHRoaXMuc2F2ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gTnVsbGluZ1xyXG5cdFx0XHRcdHJvb3RFbCA9XHJcblx0XHRcdFx0ZHJhZ0VsID1cclxuXHRcdFx0XHRwYXJlbnRFbCA9XHJcblx0XHRcdFx0Z2hvc3RFbCA9XHJcblx0XHRcdFx0bmV4dEVsID1cclxuXHRcdFx0XHRjbG9uZUVsID1cclxuXHJcblx0XHRcdFx0c2Nyb2xsRWwgPVxyXG5cdFx0XHRcdHNjcm9sbFBhcmVudEVsID1cclxuXHJcblx0XHRcdFx0dGFwRXZ0ID1cclxuXHRcdFx0XHR0b3VjaEV2dCA9XHJcblxyXG5cdFx0XHRcdG1vdmVkID1cclxuXHRcdFx0XHRuZXdJbmRleCA9XHJcblxyXG5cdFx0XHRcdGxhc3RFbCA9XHJcblx0XHRcdFx0bGFzdENTUyA9XHJcblxyXG5cdFx0XHRcdGFjdGl2ZUdyb3VwID1cclxuXHRcdFx0XHRTb3J0YWJsZS5hY3RpdmUgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHRoYW5kbGVFdmVudDogZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQpIHtcclxuXHRcdFx0dmFyIHR5cGUgPSBldnQudHlwZTtcclxuXHJcblx0XHRcdGlmICh0eXBlID09PSAnZHJhZ292ZXInIHx8IHR5cGUgPT09ICdkcmFnZW50ZXInKSB7XHJcblx0XHRcdFx0aWYgKGRyYWdFbCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fb25EcmFnT3ZlcihldnQpO1xyXG5cdFx0XHRcdFx0X2dsb2JhbERyYWdPdmVyKGV2dCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHR5cGUgPT09ICdkcm9wJyB8fCB0eXBlID09PSAnZHJhZ2VuZCcpIHtcclxuXHRcdFx0XHR0aGlzLl9vbkRyb3AoZXZ0KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBTZXJpYWxpemVzIHRoZSBpdGVtIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5nLlxyXG5cdFx0ICogQHJldHVybnMge1N0cmluZ1tdfVxyXG5cdFx0ICovXHJcblx0XHR0b0FycmF5OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBvcmRlciA9IFtdLFxyXG5cdFx0XHRcdGVsLFxyXG5cdFx0XHRcdGNoaWxkcmVuID0gdGhpcy5lbC5jaGlsZHJlbixcclxuXHRcdFx0XHRpID0gMCxcclxuXHRcdFx0XHRuID0gY2hpbGRyZW4ubGVuZ3RoLFxyXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHRmb3IgKDsgaSA8IG47IGkrKykge1xyXG5cdFx0XHRcdGVsID0gY2hpbGRyZW5baV07XHJcblx0XHRcdFx0aWYgKF9jbG9zZXN0KGVsLCBvcHRpb25zLmRyYWdnYWJsZSwgdGhpcy5lbCkpIHtcclxuXHRcdFx0XHRcdG9yZGVyLnB1c2goZWwuZ2V0QXR0cmlidXRlKG9wdGlvbnMuZGF0YUlkQXR0cikgfHwgX2dlbmVyYXRlSWQoZWwpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBvcmRlcjtcclxuXHRcdH0sXHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogU29ydHMgdGhlIGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUgYXJyYXkuXHJcblx0XHQgKiBAcGFyYW0gIHtTdHJpbmdbXX0gIG9yZGVyICBvcmRlciBvZiB0aGUgaXRlbXNcclxuXHRcdCAqL1xyXG5cdFx0c29ydDogZnVuY3Rpb24gKG9yZGVyKSB7XHJcblx0XHRcdHZhciBpdGVtcyA9IHt9LCByb290RWwgPSB0aGlzLmVsO1xyXG5cclxuXHRcdFx0dGhpcy50b0FycmF5KCkuZm9yRWFjaChmdW5jdGlvbiAoaWQsIGkpIHtcclxuXHRcdFx0XHR2YXIgZWwgPSByb290RWwuY2hpbGRyZW5baV07XHJcblxyXG5cdFx0XHRcdGlmIChfY2xvc2VzdChlbCwgdGhpcy5vcHRpb25zLmRyYWdnYWJsZSwgcm9vdEVsKSkge1xyXG5cdFx0XHRcdFx0aXRlbXNbaWRdID0gZWw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKTtcclxuXHJcblx0XHRcdG9yZGVyLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XHJcblx0XHRcdFx0aWYgKGl0ZW1zW2lkXSkge1xyXG5cdFx0XHRcdFx0cm9vdEVsLnJlbW92ZUNoaWxkKGl0ZW1zW2lkXSk7XHJcblx0XHRcdFx0XHRyb290RWwuYXBwZW5kQ2hpbGQoaXRlbXNbaWRdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBTYXZlIHRoZSBjdXJyZW50IHNvcnRpbmdcclxuXHRcdCAqL1xyXG5cdFx0c2F2ZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgc3RvcmUgPSB0aGlzLm9wdGlvbnMuc3RvcmU7XHJcblx0XHRcdHN0b3JlICYmIHN0b3JlLnNldCh0aGlzKTtcclxuXHRcdH0sXHJcblxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogRm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgc2V0LCBnZXQgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBzZWxlY3RvciBieSB0ZXN0aW5nIHRoZSBlbGVtZW50IGl0c2VsZiBhbmQgdHJhdmVyc2luZyB1cCB0aHJvdWdoIGl0cyBhbmNlc3RvcnMgaW4gdGhlIERPTSB0cmVlLlxyXG5cdFx0ICogQHBhcmFtICAge0hUTUxFbGVtZW50fSAgZWxcclxuXHRcdCAqIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgIFtzZWxlY3Rvcl0gIGRlZmF1bHQ6IGBvcHRpb25zLmRyYWdnYWJsZWBcclxuXHRcdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxudWxsfVxyXG5cdFx0ICovXHJcblx0XHRjbG9zZXN0OiBmdW5jdGlvbiAoZWwsIHNlbGVjdG9yKSB7XHJcblx0XHRcdHJldHVybiBfY2xvc2VzdChlbCwgc2VsZWN0b3IgfHwgdGhpcy5vcHRpb25zLmRyYWdnYWJsZSwgdGhpcy5lbCk7XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFNldC9nZXQgb3B0aW9uXHJcblx0XHQgKiBAcGFyYW0gICB7c3RyaW5nfSBuYW1lXHJcblx0XHQgKiBAcGFyYW0gICB7Kn0gICAgICBbdmFsdWVdXHJcblx0XHQgKiBAcmV0dXJucyB7Kn1cclxuXHRcdCAqL1xyXG5cdFx0b3B0aW9uOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuXHRcdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHRpZiAodmFsdWUgPT09IHZvaWQgMCkge1xyXG5cdFx0XHRcdHJldHVybiBvcHRpb25zW25hbWVdO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG9wdGlvbnNbbmFtZV0gPSB2YWx1ZTtcclxuXHJcblx0XHRcdFx0aWYgKG5hbWUgPT09ICdncm91cCcpIHtcclxuXHRcdFx0XHRcdF9wcmVwYXJlR3JvdXAob3B0aW9ucyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIERlc3Ryb3lcclxuXHRcdCAqL1xyXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsO1xyXG5cclxuXHRcdFx0ZWxbZXhwYW5kb10gPSBudWxsO1xyXG5cclxuXHRcdFx0X29mZihlbCwgJ21vdXNlZG93bicsIHRoaXMuX29uVGFwU3RhcnQpO1xyXG5cdFx0XHRfb2ZmKGVsLCAndG91Y2hzdGFydCcsIHRoaXMuX29uVGFwU3RhcnQpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XHJcblx0XHRcdFx0X29mZihlbCwgJ2RyYWdvdmVyJywgdGhpcyk7XHJcblx0XHRcdFx0X29mZihlbCwgJ2RyYWdlbnRlcicsIHRoaXMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgZHJhZ2dhYmxlIGF0dHJpYnV0ZXNcclxuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZHJhZ2dhYmxlXScpLCBmdW5jdGlvbiAoZWwpIHtcclxuXHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RyYWdnYWJsZScpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRvdWNoRHJhZ092ZXJMaXN0ZW5lcnMuc3BsaWNlKHRvdWNoRHJhZ092ZXJMaXN0ZW5lcnMuaW5kZXhPZih0aGlzLl9vbkRyYWdPdmVyKSwgMSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbkRyb3AoKTtcclxuXHJcblx0XHRcdHRoaXMuZWwgPSBlbCA9IG51bGw7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblxyXG5cdGZ1bmN0aW9uIF9jbG9uZUhpZGUoc3RhdGUpIHtcclxuXHRcdGlmIChjbG9uZUVsICYmIChjbG9uZUVsLnN0YXRlICE9PSBzdGF0ZSkpIHtcclxuXHRcdFx0X2NzcyhjbG9uZUVsLCAnZGlzcGxheScsIHN0YXRlID8gJ25vbmUnIDogJycpO1xyXG5cdFx0XHQhc3RhdGUgJiYgY2xvbmVFbC5zdGF0ZSAmJiByb290RWwuaW5zZXJ0QmVmb3JlKGNsb25lRWwsIGRyYWdFbCk7XHJcblx0XHRcdGNsb25lRWwuc3RhdGUgPSBzdGF0ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRmdW5jdGlvbiBfY2xvc2VzdCgvKipIVE1MRWxlbWVudCovZWwsIC8qKlN0cmluZyovc2VsZWN0b3IsIC8qKkhUTUxFbGVtZW50Ki9jdHgpIHtcclxuXHRcdGlmIChlbCkge1xyXG5cdFx0XHRjdHggPSBjdHggfHwgZG9jdW1lbnQ7XHJcblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc3BsaXQoJy4nKTtcclxuXHJcblx0XHRcdHZhciB0YWcgPSBzZWxlY3Rvci5zaGlmdCgpLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdFx0cmUgPSBuZXcgUmVnRXhwKCdcXFxccygnICsgc2VsZWN0b3Iuam9pbignfCcpICsgJykoPz1cXFxccyknLCAnZycpO1xyXG5cclxuXHRcdFx0ZG8ge1xyXG5cdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdCh0YWcgPT09ICc+KicgJiYgZWwucGFyZW50Tm9kZSA9PT0gY3R4KSB8fCAoXHJcblx0XHRcdFx0XHRcdCh0YWcgPT09ICcnIHx8IGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gdGFnKSAmJlxyXG5cdFx0XHRcdFx0XHQoIXNlbGVjdG9yLmxlbmd0aCB8fCAoKCcgJyArIGVsLmNsYXNzTmFtZSArICcgJykubWF0Y2gocmUpIHx8IFtdKS5sZW5ndGggPT0gc2VsZWN0b3IubGVuZ3RoKVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGVsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR3aGlsZSAoZWwgIT09IGN0eCAmJiAoZWwgPSBlbC5wYXJlbnROb2RlKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHJcblx0ZnVuY3Rpb24gX2dsb2JhbERyYWdPdmVyKC8qKkV2ZW50Ki9ldnQpIHtcclxuXHRcdGlmIChldnQuZGF0YVRyYW5zZmVyKSB7XHJcblx0XHRcdGV2dC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJztcclxuXHRcdH1cclxuXHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIF9vbihlbCwgZXZlbnQsIGZuKSB7XHJcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIF9vZmYoZWwsIGV2ZW50LCBmbikge1xyXG5cdFx0ZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcclxuXHR9XHJcblxyXG5cclxuXHRmdW5jdGlvbiBfdG9nZ2xlQ2xhc3MoZWwsIG5hbWUsIHN0YXRlKSB7XHJcblx0XHRpZiAoZWwpIHtcclxuXHRcdFx0aWYgKGVsLmNsYXNzTGlzdCkge1xyXG5cdFx0XHRcdGVsLmNsYXNzTGlzdFtzdGF0ZSA/ICdhZGQnIDogJ3JlbW92ZSddKG5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHZhciBjbGFzc05hbWUgPSAoJyAnICsgZWwuY2xhc3NOYW1lICsgJyAnKS5yZXBsYWNlKFJTUEFDRSwgJyAnKS5yZXBsYWNlKCcgJyArIG5hbWUgKyAnICcsICcgJyk7XHJcblx0XHRcdFx0ZWwuY2xhc3NOYW1lID0gKGNsYXNzTmFtZSArIChzdGF0ZSA/ICcgJyArIG5hbWUgOiAnJykpLnJlcGxhY2UoUlNQQUNFLCAnICcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHJcblx0ZnVuY3Rpb24gX2NzcyhlbCwgcHJvcCwgdmFsKSB7XHJcblx0XHR2YXIgc3R5bGUgPSBlbCAmJiBlbC5zdHlsZTtcclxuXHJcblx0XHRpZiAoc3R5bGUpIHtcclxuXHRcdFx0aWYgKHZhbCA9PT0gdm9pZCAwKSB7XHJcblx0XHRcdFx0aWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpIHtcclxuXHRcdFx0XHRcdHZhbCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsICcnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoZWwuY3VycmVudFN0eWxlKSB7XHJcblx0XHRcdFx0XHR2YWwgPSBlbC5jdXJyZW50U3R5bGU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gcHJvcCA9PT0gdm9pZCAwID8gdmFsIDogdmFsW3Byb3BdO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGlmICghKHByb3AgaW4gc3R5bGUpKSB7XHJcblx0XHRcdFx0XHRwcm9wID0gJy13ZWJraXQtJyArIHByb3A7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRzdHlsZVtwcm9wXSA9IHZhbCArICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/ICcnIDogJ3B4Jyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRmdW5jdGlvbiBfZmluZChjdHgsIHRhZ05hbWUsIGl0ZXJhdG9yKSB7XHJcblx0XHRpZiAoY3R4KSB7XHJcblx0XHRcdHZhciBsaXN0ID0gY3R4LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpLCBpID0gMCwgbiA9IGxpc3QubGVuZ3RoO1xyXG5cclxuXHRcdFx0aWYgKGl0ZXJhdG9yKSB7XHJcblx0XHRcdFx0Zm9yICg7IGkgPCBuOyBpKyspIHtcclxuXHRcdFx0XHRcdGl0ZXJhdG9yKGxpc3RbaV0sIGkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGxpc3Q7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIFtdO1xyXG5cdH1cclxuXHJcblxyXG5cclxuXHRmdW5jdGlvbiBfZGlzcGF0Y2hFdmVudChzb3J0YWJsZSwgcm9vdEVsLCBuYW1lLCB0YXJnZXRFbCwgZnJvbUVsLCBzdGFydEluZGV4LCBuZXdJbmRleCkge1xyXG5cdFx0dmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpLFxyXG5cdFx0XHRvcHRpb25zID0gKHNvcnRhYmxlIHx8IHJvb3RFbFtleHBhbmRvXSkub3B0aW9ucyxcclxuXHRcdFx0b25OYW1lID0gJ29uJyArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cigxKTtcclxuXHJcblx0XHRldnQuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpO1xyXG5cclxuXHRcdGV2dC50byA9IHJvb3RFbDtcclxuXHRcdGV2dC5mcm9tID0gZnJvbUVsIHx8IHJvb3RFbDtcclxuXHRcdGV2dC5pdGVtID0gdGFyZ2V0RWwgfHwgcm9vdEVsO1xyXG5cdFx0ZXZ0LmNsb25lID0gY2xvbmVFbDtcclxuXHJcblx0XHRldnQub2xkSW5kZXggPSBzdGFydEluZGV4O1xyXG5cdFx0ZXZ0Lm5ld0luZGV4ID0gbmV3SW5kZXg7XHJcblxyXG5cdFx0cm9vdEVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxuXHJcblx0XHRpZiAob3B0aW9uc1tvbk5hbWVdKSB7XHJcblx0XHRcdG9wdGlvbnNbb25OYW1lXS5jYWxsKHNvcnRhYmxlLCBldnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIF9vbk1vdmUoZnJvbUVsLCB0b0VsLCBkcmFnRWwsIGRyYWdSZWN0LCB0YXJnZXRFbCwgdGFyZ2V0UmVjdCkge1xyXG5cdFx0dmFyIGV2dCxcclxuXHRcdFx0c29ydGFibGUgPSBmcm9tRWxbZXhwYW5kb10sXHJcblx0XHRcdG9uTW92ZUZuID0gc29ydGFibGUub3B0aW9ucy5vbk1vdmUsXHJcblx0XHRcdHJldFZhbDtcclxuXHJcblx0XHRldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuXHRcdGV2dC5pbml0RXZlbnQoJ21vdmUnLCB0cnVlLCB0cnVlKTtcclxuXHJcblx0XHRldnQudG8gPSB0b0VsO1xyXG5cdFx0ZXZ0LmZyb20gPSBmcm9tRWw7XHJcblx0XHRldnQuZHJhZ2dlZCA9IGRyYWdFbDtcclxuXHRcdGV2dC5kcmFnZ2VkUmVjdCA9IGRyYWdSZWN0O1xyXG5cdFx0ZXZ0LnJlbGF0ZWQgPSB0YXJnZXRFbCB8fCB0b0VsO1xyXG5cdFx0ZXZ0LnJlbGF0ZWRSZWN0ID0gdGFyZ2V0UmVjdCB8fCB0b0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuXHRcdGZyb21FbC5kaXNwYXRjaEV2ZW50KGV2dCk7XHJcblxyXG5cdFx0aWYgKG9uTW92ZUZuKSB7XHJcblx0XHRcdHJldFZhbCA9IG9uTW92ZUZuLmNhbGwoc29ydGFibGUsIGV2dCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldFZhbDtcclxuXHR9XHJcblxyXG5cclxuXHRmdW5jdGlvbiBfZGlzYWJsZURyYWdnYWJsZShlbCkge1xyXG5cdFx0ZWwuZHJhZ2dhYmxlID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHJcblx0ZnVuY3Rpb24gX3Vuc2lsZW50KCkge1xyXG5cdFx0X3NpbGVudCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblxyXG5cdC8qKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8ZmFsc2V9ICovXHJcblx0ZnVuY3Rpb24gX2dob3N0SXNMYXN0KGVsLCBldnQpIHtcclxuXHRcdHZhciBsYXN0RWwgPSBlbC5sYXN0RWxlbWVudENoaWxkLFxyXG5cdFx0XHRcdHJlY3QgPSBsYXN0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG5cdFx0cmV0dXJuICgoZXZ0LmNsaWVudFkgLSAocmVjdC50b3AgKyByZWN0LmhlaWdodCkgPiA1KSB8fCAoZXZ0LmNsaWVudFggLSAocmVjdC5yaWdodCArIHJlY3Qud2lkdGgpID4gNSkpICYmIGxhc3RFbDsgLy8gbWluIGRlbHRhXHJcblx0fVxyXG5cclxuXHJcblx0LyoqXHJcblx0ICogR2VuZXJhdGUgaWRcclxuXHQgKiBAcGFyYW0gICB7SFRNTEVsZW1lbnR9IGVsXHJcblx0ICogQHJldHVybnMge1N0cmluZ31cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIF9nZW5lcmF0ZUlkKGVsKSB7XHJcblx0XHR2YXIgc3RyID0gZWwudGFnTmFtZSArIGVsLmNsYXNzTmFtZSArIGVsLnNyYyArIGVsLmhyZWYgKyBlbC50ZXh0Q29udGVudCxcclxuXHRcdFx0aSA9IHN0ci5sZW5ndGgsXHJcblx0XHRcdHN1bSA9IDA7XHJcblxyXG5cdFx0d2hpbGUgKGktLSkge1xyXG5cdFx0XHRzdW0gKz0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHN1bS50b1N0cmluZygzNik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiBhbiBlbGVtZW50IHdpdGhpbiBpdHMgcGFyZW50XHJcblx0ICogQHBhcmFtICB7SFRNTEVsZW1lbnR9IGVsXHJcblx0ICogQHJldHVybiB7bnVtYmVyfVxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIF9pbmRleChlbCkge1xyXG5cdFx0dmFyIGluZGV4ID0gMDtcclxuXHJcblx0XHRpZiAoIWVsIHx8ICFlbC5wYXJlbnROb2RlKSB7XHJcblx0XHRcdHJldHVybiAtMTtcclxuXHRcdH1cclxuXHJcblx0XHR3aGlsZSAoZWwgJiYgKGVsID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZykpIHtcclxuXHRcdFx0aWYgKGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09ICdURU1QTEFURScpIHtcclxuXHRcdFx0XHRpbmRleCsrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gX3Rocm90dGxlKGNhbGxiYWNrLCBtcykge1xyXG5cdFx0dmFyIGFyZ3MsIF90aGlzO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmIChhcmdzID09PSB2b2lkIDApIHtcclxuXHRcdFx0XHRhcmdzID0gYXJndW1lbnRzO1xyXG5cdFx0XHRcdF90aGlzID0gdGhpcztcclxuXHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChfdGhpcywgYXJnc1swXSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRjYWxsYmFjay5hcHBseShfdGhpcywgYXJncyk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0YXJncyA9IHZvaWQgMDtcclxuXHRcdFx0XHR9LCBtcyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfZXh0ZW5kKGRzdCwgc3JjKSB7XHJcblx0XHRpZiAoZHN0ICYmIHNyYykge1xyXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gc3JjKSB7XHJcblx0XHRcdFx0aWYgKHNyYy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcblx0XHRcdFx0XHRkc3Rba2V5XSA9IHNyY1trZXldO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBkc3Q7XHJcblx0fVxyXG5cclxuXHJcblx0Ly8gRXhwb3J0IHV0aWxzXHJcblx0U29ydGFibGUudXRpbHMgPSB7XHJcblx0XHRvbjogX29uLFxyXG5cdFx0b2ZmOiBfb2ZmLFxyXG5cdFx0Y3NzOiBfY3NzLFxyXG5cdFx0ZmluZDogX2ZpbmQsXHJcblx0XHRpczogZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xyXG5cdFx0XHRyZXR1cm4gISFfY2xvc2VzdChlbCwgc2VsZWN0b3IsIGVsKTtcclxuXHRcdH0sXHJcblx0XHRleHRlbmQ6IF9leHRlbmQsXHJcblx0XHR0aHJvdHRsZTogX3Rocm90dGxlLFxyXG5cdFx0Y2xvc2VzdDogX2Nsb3Nlc3QsXHJcblx0XHR0b2dnbGVDbGFzczogX3RvZ2dsZUNsYXNzLFxyXG5cdFx0aW5kZXg6IF9pbmRleFxyXG5cdH07XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGUgc29ydGFibGUgaW5zdGFuY2VcclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAgZWxcclxuXHQgKiBAcGFyYW0ge09iamVjdH0gICAgICBbb3B0aW9uc11cclxuXHQgKi9cclxuXHRTb3J0YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHtcclxuXHRcdHJldHVybiBuZXcgU29ydGFibGUoZWwsIG9wdGlvbnMpO1xyXG5cdH07XHJcblxyXG5cclxuXHQvLyBFeHBvcnRcclxuXHRTb3J0YWJsZS52ZXJzaW9uID0gJzEuNC4yJztcclxuXHRyZXR1cm4gU29ydGFibGU7XHJcbn0pO1xyXG4iLCIvKiEgdmVyc2lvbiA6IDQuMTcuMzdcclxuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gYm9vdHN0cmFwLWRhdGV0aW1lanNcclxuIGh0dHBzOi8vZ2l0aHViLmNvbS9Fb25hc2Rhbi9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXJcclxuIENvcHlyaWdodCAoYykgMjAxNSBKb25hdGhhbiBQZXRlcnNvblxyXG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqL1xyXG4hZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXCJqcXVlcnlcIixcIm1vbWVudFwiXSxhKTtlbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzKWEocmVxdWlyZShcImpxdWVyeVwiKSxyZXF1aXJlKFwibW9tZW50XCIpKTtlbHNle2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBqUXVlcnkpdGhyb3dcImJvb3RzdHJhcC1kYXRldGltZXBpY2tlciByZXF1aXJlcyBqUXVlcnkgdG8gYmUgbG9hZGVkIGZpcnN0XCI7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIG1vbWVudCl0aHJvd1wiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyIHJlcXVpcmVzIE1vbWVudC5qcyB0byBiZSBsb2FkZWQgZmlyc3RcIjthKGpRdWVyeSxtb21lbnQpfX0oZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtpZighYil0aHJvdyBuZXcgRXJyb3IoXCJib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIgcmVxdWlyZXMgTW9tZW50LmpzIHRvIGJlIGxvYWRlZCBmaXJzdFwiKTt2YXIgYz1mdW5jdGlvbihjLGQpe3ZhciBlLGYsZyxoLGksaixrLGw9e30sbT0hMCxuPSExLG89ITEscD0wLHE9W3tjbHNOYW1lOlwiZGF5c1wiLG5hdkZuYzpcIk1cIixuYXZTdGVwOjF9LHtjbHNOYW1lOlwibW9udGhzXCIsbmF2Rm5jOlwieVwiLG5hdlN0ZXA6MX0se2Nsc05hbWU6XCJ5ZWFyc1wiLG5hdkZuYzpcInlcIixuYXZTdGVwOjEwfSx7Y2xzTmFtZTpcImRlY2FkZXNcIixuYXZGbmM6XCJ5XCIsbmF2U3RlcDoxMDB9XSxyPVtcImRheXNcIixcIm1vbnRoc1wiLFwieWVhcnNcIixcImRlY2FkZXNcIl0scz1bXCJ0b3BcIixcImJvdHRvbVwiLFwiYXV0b1wiXSx0PVtcImxlZnRcIixcInJpZ2h0XCIsXCJhdXRvXCJdLHU9W1wiZGVmYXVsdFwiLFwidG9wXCIsXCJib3R0b21cIl0sdj17dXA6MzgsMzg6XCJ1cFwiLGRvd246NDAsNDA6XCJkb3duXCIsbGVmdDozNywzNzpcImxlZnRcIixyaWdodDozOSwzOTpcInJpZ2h0XCIsdGFiOjksOTpcInRhYlwiLGVzY2FwZToyNywyNzpcImVzY2FwZVwiLGVudGVyOjEzLDEzOlwiZW50ZXJcIixwYWdlVXA6MzMsMzM6XCJwYWdlVXBcIixwYWdlRG93bjozNCwzNDpcInBhZ2VEb3duXCIsc2hpZnQ6MTYsMTY6XCJzaGlmdFwiLGNvbnRyb2w6MTcsMTc6XCJjb250cm9sXCIsc3BhY2U6MzIsMzI6XCJzcGFjZVwiLHQ6ODQsODQ6XCJ0XCIsXCJkZWxldGVcIjo0Niw0NjpcImRlbGV0ZVwifSx3PXt9LHg9ZnVuY3Rpb24oYSl7dmFyIGMsZSxmLGcsaCxpPSExO3JldHVybiB2b2lkIDAhPT1iLnR6JiZ2b2lkIDAhPT1kLnRpbWVab25lJiZudWxsIT09ZC50aW1lWm9uZSYmXCJcIiE9PWQudGltZVpvbmUmJihpPSEwKSx2b2lkIDA9PT1hfHxudWxsPT09YT9jPWk/YigpLnR6KGQudGltZVpvbmUpLnN0YXJ0T2YoXCJkXCIpOmIoKS5zdGFydE9mKFwiZFwiKTppPyhlPWIoKS50eihkLnRpbWVab25lKS51dGNPZmZzZXQoKSxmPWIoYSxqLGQudXNlU3RyaWN0KS51dGNPZmZzZXQoKSxmIT09ZT8oZz1iKCkudHooZC50aW1lWm9uZSkuZm9ybWF0KFwiWlwiKSxoPWIoYSxqLGQudXNlU3RyaWN0KS5mb3JtYXQoXCJZWVlZLU1NLUREW1RdSEg6bW06c3NcIikrZyxjPWIoaCxqLGQudXNlU3RyaWN0KS50eihkLnRpbWVab25lKSk6Yz1iKGEsaixkLnVzZVN0cmljdCkudHooZC50aW1lWm9uZSkpOmM9YihhLGosZC51c2VTdHJpY3QpLGN9LHk9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGF8fGEubGVuZ3RoPjEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImlzRW5hYmxlZCBleHBlY3RzIGEgc2luZ2xlIGNoYXJhY3RlciBzdHJpbmcgcGFyYW1ldGVyXCIpO3N3aXRjaChhKXtjYXNlXCJ5XCI6cmV0dXJuLTEhPT1pLmluZGV4T2YoXCJZXCIpO2Nhc2VcIk1cIjpyZXR1cm4tMSE9PWkuaW5kZXhPZihcIk1cIik7Y2FzZVwiZFwiOnJldHVybi0xIT09aS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJkXCIpO2Nhc2VcImhcIjpjYXNlXCJIXCI6cmV0dXJuLTEhPT1pLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImhcIik7Y2FzZVwibVwiOnJldHVybi0xIT09aS5pbmRleE9mKFwibVwiKTtjYXNlXCJzXCI6cmV0dXJuLTEhPT1pLmluZGV4T2YoXCJzXCIpO2RlZmF1bHQ6cmV0dXJuITF9fSx6PWZ1bmN0aW9uKCl7cmV0dXJuIHkoXCJoXCIpfHx5KFwibVwiKXx8eShcInNcIil9LEE9ZnVuY3Rpb24oKXtyZXR1cm4geShcInlcIil8fHkoXCJNXCIpfHx5KFwiZFwiKX0sQj1mdW5jdGlvbigpe3ZhciBiPWEoXCI8dGhlYWQ+XCIpLmFwcGVuZChhKFwiPHRyPlwiKS5hcHBlbmQoYShcIjx0aD5cIikuYWRkQ2xhc3MoXCJwcmV2XCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwicHJldmlvdXNcIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy5wcmV2aW91cykpKS5hcHBlbmQoYShcIjx0aD5cIikuYWRkQ2xhc3MoXCJwaWNrZXItc3dpdGNoXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwicGlja2VyU3dpdGNoXCIpLmF0dHIoXCJjb2xzcGFuXCIsZC5jYWxlbmRhcldlZWtzP1wiNlwiOlwiNVwiKSkuYXBwZW5kKGEoXCI8dGg+XCIpLmFkZENsYXNzKFwibmV4dFwiKS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcIm5leHRcIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy5uZXh0KSkpKSxjPWEoXCI8dGJvZHk+XCIpLmFwcGVuZChhKFwiPHRyPlwiKS5hcHBlbmQoYShcIjx0ZD5cIikuYXR0cihcImNvbHNwYW5cIixkLmNhbGVuZGFyV2Vla3M/XCI4XCI6XCI3XCIpKSk7cmV0dXJuW2EoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcImRhdGVwaWNrZXItZGF5c1wiKS5hcHBlbmQoYShcIjx0YWJsZT5cIikuYWRkQ2xhc3MoXCJ0YWJsZS1jb25kZW5zZWRcIikuYXBwZW5kKGIpLmFwcGVuZChhKFwiPHRib2R5PlwiKSkpLGEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcImRhdGVwaWNrZXItbW9udGhzXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKS5hcHBlbmQoYi5jbG9uZSgpKS5hcHBlbmQoYy5jbG9uZSgpKSksYShcIjxkaXY+XCIpLmFkZENsYXNzKFwiZGF0ZXBpY2tlci15ZWFyc1wiKS5hcHBlbmQoYShcIjx0YWJsZT5cIikuYWRkQ2xhc3MoXCJ0YWJsZS1jb25kZW5zZWRcIikuYXBwZW5kKGIuY2xvbmUoKSkuYXBwZW5kKGMuY2xvbmUoKSkpLGEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcImRhdGVwaWNrZXItZGVjYWRlc1wiKS5hcHBlbmQoYShcIjx0YWJsZT5cIikuYWRkQ2xhc3MoXCJ0YWJsZS1jb25kZW5zZWRcIikuYXBwZW5kKGIuY2xvbmUoKSkuYXBwZW5kKGMuY2xvbmUoKSkpXX0sQz1mdW5jdGlvbigpe3ZhciBiPWEoXCI8dHI+XCIpLGM9YShcIjx0cj5cIiksZT1hKFwiPHRyPlwiKTtyZXR1cm4geShcImhcIikmJihiLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtocmVmOlwiI1wiLHRhYmluZGV4OlwiLTFcIix0aXRsZTpkLnRvb2x0aXBzLmluY3JlbWVudEhvdXJ9KS5hZGRDbGFzcyhcImJ0blwiKS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcImluY3JlbWVudEhvdXJzXCIpLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKGQuaWNvbnMudXApKSkpLGMuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwidGltZXBpY2tlci1ob3VyXCIpLmF0dHIoe1wiZGF0YS10aW1lLWNvbXBvbmVudFwiOlwiaG91cnNcIix0aXRsZTpkLnRvb2x0aXBzLnBpY2tIb3VyfSkuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJzaG93SG91cnNcIikpKSxlLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtocmVmOlwiI1wiLHRhYmluZGV4OlwiLTFcIix0aXRsZTpkLnRvb2x0aXBzLmRlY3JlbWVudEhvdXJ9KS5hZGRDbGFzcyhcImJ0blwiKS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcImRlY3JlbWVudEhvdXJzXCIpLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKGQuaWNvbnMuZG93bikpKSkpLHkoXCJtXCIpJiYoeShcImhcIikmJihiLmFwcGVuZChhKFwiPHRkPlwiKS5hZGRDbGFzcyhcInNlcGFyYXRvclwiKSksYy5hcHBlbmQoYShcIjx0ZD5cIikuYWRkQ2xhc3MoXCJzZXBhcmF0b3JcIikuaHRtbChcIjpcIikpLGUuYXBwZW5kKGEoXCI8dGQ+XCIpLmFkZENsYXNzKFwic2VwYXJhdG9yXCIpKSksYi5hcHBlbmQoYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8YT5cIikuYXR0cih7aHJlZjpcIiNcIix0YWJpbmRleDpcIi0xXCIsdGl0bGU6ZC50b29sdGlwcy5pbmNyZW1lbnRNaW51dGV9KS5hZGRDbGFzcyhcImJ0blwiKS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcImluY3JlbWVudE1pbnV0ZXNcIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy51cCkpKSksYy5hcHBlbmQoYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJ0aW1lcGlja2VyLW1pbnV0ZVwiKS5hdHRyKHtcImRhdGEtdGltZS1jb21wb25lbnRcIjpcIm1pbnV0ZXNcIix0aXRsZTpkLnRvb2x0aXBzLnBpY2tNaW51dGV9KS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcInNob3dNaW51dGVzXCIpKSksZS5hcHBlbmQoYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8YT5cIikuYXR0cih7aHJlZjpcIiNcIix0YWJpbmRleDpcIi0xXCIsdGl0bGU6ZC50b29sdGlwcy5kZWNyZW1lbnRNaW51dGV9KS5hZGRDbGFzcyhcImJ0blwiKS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcImRlY3JlbWVudE1pbnV0ZXNcIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy5kb3duKSkpKSkseShcInNcIikmJih5KFwibVwiKSYmKGIuYXBwZW5kKGEoXCI8dGQ+XCIpLmFkZENsYXNzKFwic2VwYXJhdG9yXCIpKSxjLmFwcGVuZChhKFwiPHRkPlwiKS5hZGRDbGFzcyhcInNlcGFyYXRvclwiKS5odG1sKFwiOlwiKSksZS5hcHBlbmQoYShcIjx0ZD5cIikuYWRkQ2xhc3MoXCJzZXBhcmF0b3JcIikpKSxiLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtocmVmOlwiI1wiLHRhYmluZGV4OlwiLTFcIix0aXRsZTpkLnRvb2x0aXBzLmluY3JlbWVudFNlY29uZH0pLmFkZENsYXNzKFwiYnRuXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiaW5jcmVtZW50U2Vjb25kc1wiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLnVwKSkpKSxjLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhcInRpbWVwaWNrZXItc2Vjb25kXCIpLmF0dHIoe1wiZGF0YS10aW1lLWNvbXBvbmVudFwiOlwic2Vjb25kc1wiLHRpdGxlOmQudG9vbHRpcHMucGlja1NlY29uZH0pLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwic2hvd1NlY29uZHNcIikpKSxlLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtocmVmOlwiI1wiLHRhYmluZGV4OlwiLTFcIix0aXRsZTpkLnRvb2x0aXBzLmRlY3JlbWVudFNlY29uZH0pLmFkZENsYXNzKFwiYnRuXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiZGVjcmVtZW50U2Vjb25kc1wiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLmRvd24pKSkpKSxofHwoYi5hcHBlbmQoYShcIjx0ZD5cIikuYWRkQ2xhc3MoXCJzZXBhcmF0b3JcIikpLGMuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGJ1dHRvbj5cIikuYWRkQ2xhc3MoXCJidG4gYnRuLXByaW1hcnlcIikuYXR0cih7XCJkYXRhLWFjdGlvblwiOlwidG9nZ2xlUGVyaW9kXCIsdGFiaW5kZXg6XCItMVwiLHRpdGxlOmQudG9vbHRpcHMudG9nZ2xlUGVyaW9kfSkpKSxlLmFwcGVuZChhKFwiPHRkPlwiKS5hZGRDbGFzcyhcInNlcGFyYXRvclwiKSkpLGEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInRpbWVwaWNrZXItcGlja2VyXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKS5hcHBlbmQoW2IsYyxlXSkpfSxEPWZ1bmN0aW9uKCl7dmFyIGI9YShcIjxkaXY+XCIpLmFkZENsYXNzKFwidGltZXBpY2tlci1ob3Vyc1wiKS5hcHBlbmQoYShcIjx0YWJsZT5cIikuYWRkQ2xhc3MoXCJ0YWJsZS1jb25kZW5zZWRcIikpLGM9YShcIjxkaXY+XCIpLmFkZENsYXNzKFwidGltZXBpY2tlci1taW51dGVzXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKSksZD1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ0aW1lcGlja2VyLXNlY29uZHNcIikuYXBwZW5kKGEoXCI8dGFibGU+XCIpLmFkZENsYXNzKFwidGFibGUtY29uZGVuc2VkXCIpKSxlPVtDKCldO3JldHVybiB5KFwiaFwiKSYmZS5wdXNoKGIpLHkoXCJtXCIpJiZlLnB1c2goYykseShcInNcIikmJmUucHVzaChkKSxlfSxFPWZ1bmN0aW9uKCl7dmFyIGI9W107cmV0dXJuIGQuc2hvd1RvZGF5QnV0dG9uJiZiLnB1c2goYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8YT5cIikuYXR0cih7XCJkYXRhLWFjdGlvblwiOlwidG9kYXlcIix0aXRsZTpkLnRvb2x0aXBzLnRvZGF5fSkuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy50b2RheSkpKSksIWQuc2lkZUJ5U2lkZSYmQSgpJiZ6KCkmJmIucHVzaChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtcImRhdGEtYWN0aW9uXCI6XCJ0b2dnbGVQaWNrZXJcIix0aXRsZTpkLnRvb2x0aXBzLnNlbGVjdFRpbWV9KS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLnRpbWUpKSkpLGQuc2hvd0NsZWFyJiZiLnB1c2goYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8YT5cIikuYXR0cih7XCJkYXRhLWFjdGlvblwiOlwiY2xlYXJcIix0aXRsZTpkLnRvb2x0aXBzLmNsZWFyfSkuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy5jbGVhcikpKSksZC5zaG93Q2xvc2UmJmIucHVzaChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtcImRhdGEtYWN0aW9uXCI6XCJjbG9zZVwiLHRpdGxlOmQudG9vbHRpcHMuY2xvc2V9KS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLmNsb3NlKSkpKSxhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKS5hcHBlbmQoYShcIjx0Ym9keT5cIikuYXBwZW5kKGEoXCI8dHI+XCIpLmFwcGVuZChiKSkpfSxGPWZ1bmN0aW9uKCl7dmFyIGI9YShcIjxkaXY+XCIpLmFkZENsYXNzKFwiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCBkcm9wZG93bi1tZW51XCIpLGM9YShcIjxkaXY+XCIpLmFkZENsYXNzKFwiZGF0ZXBpY2tlclwiKS5hcHBlbmQoQigpKSxlPWEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInRpbWVwaWNrZXJcIikuYXBwZW5kKEQoKSksZj1hKFwiPHVsPlwiKS5hZGRDbGFzcyhcImxpc3QtdW5zdHlsZWRcIiksZz1hKFwiPGxpPlwiKS5hZGRDbGFzcyhcInBpY2tlci1zd2l0Y2hcIisoZC5jb2xsYXBzZT9cIiBhY2NvcmRpb24tdG9nZ2xlXCI6XCJcIikpLmFwcGVuZChFKCkpO3JldHVybiBkLmlubGluZSYmYi5yZW1vdmVDbGFzcyhcImRyb3Bkb3duLW1lbnVcIiksaCYmYi5hZGRDbGFzcyhcInVzZXR3ZW50eWZvdXJcIikseShcInNcIikmJiFoJiZiLmFkZENsYXNzKFwid2lkZXJcIiksZC5zaWRlQnlTaWRlJiZBKCkmJnooKT8oYi5hZGRDbGFzcyhcInRpbWVwaWNrZXItc2JzXCIpLFwidG9wXCI9PT1kLnRvb2xiYXJQbGFjZW1lbnQmJmIuYXBwZW5kKGcpLGIuYXBwZW5kKGEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInJvd1wiKS5hcHBlbmQoYy5hZGRDbGFzcyhcImNvbC1tZC02XCIpKS5hcHBlbmQoZS5hZGRDbGFzcyhcImNvbC1tZC02XCIpKSksXCJib3R0b21cIj09PWQudG9vbGJhclBsYWNlbWVudCYmYi5hcHBlbmQoZyksYik6KFwidG9wXCI9PT1kLnRvb2xiYXJQbGFjZW1lbnQmJmYuYXBwZW5kKGcpLEEoKSYmZi5hcHBlbmQoYShcIjxsaT5cIikuYWRkQ2xhc3MoZC5jb2xsYXBzZSYmeigpP1wiY29sbGFwc2UgaW5cIjpcIlwiKS5hcHBlbmQoYykpLFwiZGVmYXVsdFwiPT09ZC50b29sYmFyUGxhY2VtZW50JiZmLmFwcGVuZChnKSx6KCkmJmYuYXBwZW5kKGEoXCI8bGk+XCIpLmFkZENsYXNzKGQuY29sbGFwc2UmJkEoKT9cImNvbGxhcHNlXCI6XCJcIikuYXBwZW5kKGUpKSxcImJvdHRvbVwiPT09ZC50b29sYmFyUGxhY2VtZW50JiZmLmFwcGVuZChnKSxiLmFwcGVuZChmKSl9LEc9ZnVuY3Rpb24oKXt2YXIgYixlPXt9O3JldHVybiBiPWMuaXMoXCJpbnB1dFwiKXx8ZC5pbmxpbmU/Yy5kYXRhKCk6Yy5maW5kKFwiaW5wdXRcIikuZGF0YSgpLGIuZGF0ZU9wdGlvbnMmJmIuZGF0ZU9wdGlvbnMgaW5zdGFuY2VvZiBPYmplY3QmJihlPWEuZXh0ZW5kKCEwLGUsYi5kYXRlT3B0aW9ucykpLGEuZWFjaChkLGZ1bmN0aW9uKGEpe3ZhciBjPVwiZGF0ZVwiK2EuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKTt2b2lkIDAhPT1iW2NdJiYoZVthXT1iW2NdKX0pLGV9LEg9ZnVuY3Rpb24oKXt2YXIgYixlPShufHxjKS5wb3NpdGlvbigpLGY9KG58fGMpLm9mZnNldCgpLGc9ZC53aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbCxoPWQud2lkZ2V0UG9zaXRpb25pbmcuaG9yaXpvbnRhbDtpZihkLndpZGdldFBhcmVudCliPWQud2lkZ2V0UGFyZW50LmFwcGVuZChvKTtlbHNlIGlmKGMuaXMoXCJpbnB1dFwiKSliPWMuYWZ0ZXIobykucGFyZW50KCk7ZWxzZXtpZihkLmlubGluZSlyZXR1cm4gdm9pZChiPWMuYXBwZW5kKG8pKTtiPWMsYy5jaGlsZHJlbigpLmZpcnN0KCkuYWZ0ZXIobyl9aWYoXCJhdXRvXCI9PT1nJiYoZz1mLnRvcCsxLjUqby5oZWlnaHQoKT49YSh3aW5kb3cpLmhlaWdodCgpK2Eod2luZG93KS5zY3JvbGxUb3AoKSYmby5oZWlnaHQoKStjLm91dGVySGVpZ2h0KCk8Zi50b3A/XCJ0b3BcIjpcImJvdHRvbVwiKSxcImF1dG9cIj09PWgmJihoPWIud2lkdGgoKTxmLmxlZnQrby5vdXRlcldpZHRoKCkvMiYmZi5sZWZ0K28ub3V0ZXJXaWR0aCgpPmEod2luZG93KS53aWR0aCgpP1wicmlnaHRcIjpcImxlZnRcIiksXCJ0b3BcIj09PWc/by5hZGRDbGFzcyhcInRvcFwiKS5yZW1vdmVDbGFzcyhcImJvdHRvbVwiKTpvLmFkZENsYXNzKFwiYm90dG9tXCIpLnJlbW92ZUNsYXNzKFwidG9wXCIpLFwicmlnaHRcIj09PWg/by5hZGRDbGFzcyhcInB1bGwtcmlnaHRcIik6by5yZW1vdmVDbGFzcyhcInB1bGwtcmlnaHRcIiksXCJyZWxhdGl2ZVwiIT09Yi5jc3MoXCJwb3NpdGlvblwiKSYmKGI9Yi5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuXCJyZWxhdGl2ZVwiPT09YSh0aGlzKS5jc3MoXCJwb3NpdGlvblwiKX0pLmZpcnN0KCkpLDA9PT1iLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJkYXRldGltZXBpY2tlciBjb21wb25lbnQgc2hvdWxkIGJlIHBsYWNlZCB3aXRoaW4gYSByZWxhdGl2ZSBwb3NpdGlvbmVkIGNvbnRhaW5lclwiKTtvLmNzcyh7dG9wOlwidG9wXCI9PT1nP1wiYXV0b1wiOmUudG9wK2Mub3V0ZXJIZWlnaHQoKSxib3R0b206XCJ0b3BcIj09PWc/ZS50b3ArYy5vdXRlckhlaWdodCgpOlwiYXV0b1wiLGxlZnQ6XCJsZWZ0XCI9PT1oP2I9PT1jPzA6ZS5sZWZ0OlwiYXV0b1wiLHJpZ2h0OlwibGVmdFwiPT09aD9cImF1dG9cIjpiLm91dGVyV2lkdGgoKS1jLm91dGVyV2lkdGgoKS0oYj09PWM/MDplLmxlZnQpfSl9LEk9ZnVuY3Rpb24oYSl7XCJkcC5jaGFuZ2VcIj09PWEudHlwZSYmKGEuZGF0ZSYmYS5kYXRlLmlzU2FtZShhLm9sZERhdGUpfHwhYS5kYXRlJiYhYS5vbGREYXRlKXx8Yy50cmlnZ2VyKGEpfSxKPWZ1bmN0aW9uKGEpe1wieVwiPT09YSYmKGE9XCJZWVlZXCIpLEkoe3R5cGU6XCJkcC51cGRhdGVcIixjaGFuZ2U6YSx2aWV3RGF0ZTpmLmNsb25lKCl9KX0sSz1mdW5jdGlvbihhKXtvJiYoYSYmKGs9TWF0aC5tYXgocCxNYXRoLm1pbigzLGsrYSkpKSxvLmZpbmQoXCIuZGF0ZXBpY2tlciA+IGRpdlwiKS5oaWRlKCkuZmlsdGVyKFwiLmRhdGVwaWNrZXItXCIrcVtrXS5jbHNOYW1lKS5zaG93KCkpfSxMPWZ1bmN0aW9uKCl7dmFyIGI9YShcIjx0cj5cIiksYz1mLmNsb25lKCkuc3RhcnRPZihcIndcIikuc3RhcnRPZihcImRcIik7Zm9yKGQuY2FsZW5kYXJXZWVrcz09PSEwJiZiLmFwcGVuZChhKFwiPHRoPlwiKS5hZGRDbGFzcyhcImN3XCIpLnRleHQoXCIjXCIpKTtjLmlzQmVmb3JlKGYuY2xvbmUoKS5lbmRPZihcIndcIikpOyliLmFwcGVuZChhKFwiPHRoPlwiKS5hZGRDbGFzcyhcImRvd1wiKS50ZXh0KGMuZm9ybWF0KFwiZGRcIikpKSxjLmFkZCgxLFwiZFwiKTtvLmZpbmQoXCIuZGF0ZXBpY2tlci1kYXlzIHRoZWFkXCIpLmFwcGVuZChiKX0sTT1mdW5jdGlvbihhKXtyZXR1cm4gZC5kaXNhYmxlZERhdGVzW2EuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKV09PT0hMH0sTj1mdW5jdGlvbihhKXtyZXR1cm4gZC5lbmFibGVkRGF0ZXNbYS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpXT09PSEwfSxPPWZ1bmN0aW9uKGEpe3JldHVybiBkLmRpc2FibGVkSG91cnNbYS5mb3JtYXQoXCJIXCIpXT09PSEwfSxQPWZ1bmN0aW9uKGEpe3JldHVybiBkLmVuYWJsZWRIb3Vyc1thLmZvcm1hdChcIkhcIildPT09ITB9LFE9ZnVuY3Rpb24oYixjKXtpZighYi5pc1ZhbGlkKCkpcmV0dXJuITE7aWYoZC5kaXNhYmxlZERhdGVzJiZcImRcIj09PWMmJk0oYikpcmV0dXJuITE7aWYoZC5lbmFibGVkRGF0ZXMmJlwiZFwiPT09YyYmIU4oYikpcmV0dXJuITE7aWYoZC5taW5EYXRlJiZiLmlzQmVmb3JlKGQubWluRGF0ZSxjKSlyZXR1cm4hMTtpZihkLm1heERhdGUmJmIuaXNBZnRlcihkLm1heERhdGUsYykpcmV0dXJuITE7aWYoZC5kYXlzT2ZXZWVrRGlzYWJsZWQmJlwiZFwiPT09YyYmLTEhPT1kLmRheXNPZldlZWtEaXNhYmxlZC5pbmRleE9mKGIuZGF5KCkpKXJldHVybiExO2lmKGQuZGlzYWJsZWRIb3VycyYmKFwiaFwiPT09Y3x8XCJtXCI9PT1jfHxcInNcIj09PWMpJiZPKGIpKXJldHVybiExO2lmKGQuZW5hYmxlZEhvdXJzJiYoXCJoXCI9PT1jfHxcIm1cIj09PWN8fFwic1wiPT09YykmJiFQKGIpKXJldHVybiExO2lmKGQuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzJiYoXCJoXCI9PT1jfHxcIm1cIj09PWN8fFwic1wiPT09Yykpe3ZhciBlPSExO2lmKGEuZWFjaChkLmRpc2FibGVkVGltZUludGVydmFscyxmdW5jdGlvbigpe3JldHVybiBiLmlzQmV0d2Vlbih0aGlzWzBdLHRoaXNbMV0pPyhlPSEwLCExKTp2b2lkIDB9KSxlKXJldHVybiExfXJldHVybiEwfSxSPWZ1bmN0aW9uKCl7Zm9yKHZhciBiPVtdLGM9Zi5jbG9uZSgpLnN0YXJ0T2YoXCJ5XCIpLnN0YXJ0T2YoXCJkXCIpO2MuaXNTYW1lKGYsXCJ5XCIpOyliLnB1c2goYShcIjxzcGFuPlwiKS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcInNlbGVjdE1vbnRoXCIpLmFkZENsYXNzKFwibW9udGhcIikudGV4dChjLmZvcm1hdChcIk1NTVwiKSkpLGMuYWRkKDEsXCJNXCIpO28uZmluZChcIi5kYXRlcGlja2VyLW1vbnRocyB0ZFwiKS5lbXB0eSgpLmFwcGVuZChiKX0sUz1mdW5jdGlvbigpe3ZhciBiPW8uZmluZChcIi5kYXRlcGlja2VyLW1vbnRoc1wiKSxjPWIuZmluZChcInRoXCIpLGc9Yi5maW5kKFwidGJvZHlcIikuZmluZChcInNwYW5cIik7Yy5lcSgwKS5maW5kKFwic3BhblwiKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLnByZXZZZWFyKSxjLmVxKDEpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMuc2VsZWN0WWVhciksYy5lcSgyKS5maW5kKFwic3BhblwiKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLm5leHRZZWFyKSxiLmZpbmQoXCIuZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSxRKGYuY2xvbmUoKS5zdWJ0cmFjdCgxLFwieVwiKSxcInlcIil8fGMuZXEoMCkuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxjLmVxKDEpLnRleHQoZi55ZWFyKCkpLFEoZi5jbG9uZSgpLmFkZCgxLFwieVwiKSxcInlcIil8fGMuZXEoMikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxnLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGUuaXNTYW1lKGYsXCJ5XCIpJiYhbSYmZy5lcShlLm1vbnRoKCkpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGcuZWFjaChmdW5jdGlvbihiKXtRKGYuY2xvbmUoKS5tb250aChiKSxcIk1cIil8fGEodGhpcykuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKX0pfSxUPWZ1bmN0aW9uKCl7dmFyIGE9by5maW5kKFwiLmRhdGVwaWNrZXIteWVhcnNcIiksYj1hLmZpbmQoXCJ0aFwiKSxjPWYuY2xvbmUoKS5zdWJ0cmFjdCg1LFwieVwiKSxnPWYuY2xvbmUoKS5hZGQoNixcInlcIiksaD1cIlwiO2ZvcihiLmVxKDApLmZpbmQoXCJzcGFuXCIpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMucHJldkRlY2FkZSksYi5lcSgxKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLnNlbGVjdERlY2FkZSksYi5lcSgyKS5maW5kKFwic3BhblwiKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLm5leHREZWNhZGUpLGEuZmluZChcIi5kaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpLGQubWluRGF0ZSYmZC5taW5EYXRlLmlzQWZ0ZXIoYyxcInlcIikmJmIuZXEoMCkuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxiLmVxKDEpLnRleHQoYy55ZWFyKCkrXCItXCIrZy55ZWFyKCkpLGQubWF4RGF0ZSYmZC5tYXhEYXRlLmlzQmVmb3JlKGcsXCJ5XCIpJiZiLmVxKDIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIik7IWMuaXNBZnRlcihnLFwieVwiKTspaCs9JzxzcGFuIGRhdGEtYWN0aW9uPVwic2VsZWN0WWVhclwiIGNsYXNzPVwieWVhcicrKGMuaXNTYW1lKGUsXCJ5XCIpJiYhbT9cIiBhY3RpdmVcIjpcIlwiKSsoUShjLFwieVwiKT9cIlwiOlwiIGRpc2FibGVkXCIpKydcIj4nK2MueWVhcigpK1wiPC9zcGFuPlwiLGMuYWRkKDEsXCJ5XCIpO2EuZmluZChcInRkXCIpLmh0bWwoaCl9LFU9ZnVuY3Rpb24oKXt2YXIgYT1vLmZpbmQoXCIuZGF0ZXBpY2tlci1kZWNhZGVzXCIpLGM9YS5maW5kKFwidGhcIiksZz1iKHt5OmYueWVhcigpLWYueWVhcigpJTEwMC0xfSksaD1nLmNsb25lKCkuYWRkKDEwMCxcInlcIiksaT1nLmNsb25lKCksaj1cIlwiO2ZvcihjLmVxKDApLmZpbmQoXCJzcGFuXCIpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMucHJldkNlbnR1cnkpLGMuZXEoMikuZmluZChcInNwYW5cIikuYXR0cihcInRpdGxlXCIsZC50b29sdGlwcy5uZXh0Q2VudHVyeSksYS5maW5kKFwiLmRpc2FibGVkXCIpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksKGcuaXNTYW1lKGIoe3k6MTkwMH0pKXx8ZC5taW5EYXRlJiZkLm1pbkRhdGUuaXNBZnRlcihnLFwieVwiKSkmJmMuZXEoMCkuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxjLmVxKDEpLnRleHQoZy55ZWFyKCkrXCItXCIraC55ZWFyKCkpLChnLmlzU2FtZShiKHt5OjJlM30pKXx8ZC5tYXhEYXRlJiZkLm1heERhdGUuaXNCZWZvcmUoaCxcInlcIikpJiZjLmVxKDIpLmFkZENsYXNzKFwiZGlzYWJsZWRcIik7IWcuaXNBZnRlcihoLFwieVwiKTspais9JzxzcGFuIGRhdGEtYWN0aW9uPVwic2VsZWN0RGVjYWRlXCIgY2xhc3M9XCJkZWNhZGUnKyhnLmlzU2FtZShlLFwieVwiKT9cIiBhY3RpdmVcIjpcIlwiKSsoUShnLFwieVwiKT9cIlwiOlwiIGRpc2FibGVkXCIpKydcIiBkYXRhLXNlbGVjdGlvbj1cIicrKGcueWVhcigpKzYpKydcIj4nKyhnLnllYXIoKSsxKStcIiAtIFwiKyhnLnllYXIoKSsxMikrXCI8L3NwYW4+XCIsZy5hZGQoMTIsXCJ5XCIpO2orPVwiPHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48c3Bhbj48L3NwYW4+XCIsYS5maW5kKFwidGRcIikuaHRtbChqKSxjLmVxKDEpLnRleHQoaS55ZWFyKCkrMStcIi1cIitnLnllYXIoKSl9LFY9ZnVuY3Rpb24oKXt2YXIgYixjLGcsaCxpPW8uZmluZChcIi5kYXRlcGlja2VyLWRheXNcIiksaj1pLmZpbmQoXCJ0aFwiKSxrPVtdO2lmKEEoKSl7Zm9yKGouZXEoMCkuZmluZChcInNwYW5cIikuYXR0cihcInRpdGxlXCIsZC50b29sdGlwcy5wcmV2TW9udGgpLGouZXEoMSkuYXR0cihcInRpdGxlXCIsZC50b29sdGlwcy5zZWxlY3RNb250aCksai5lcSgyKS5maW5kKFwic3BhblwiKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLm5leHRNb250aCksaS5maW5kKFwiLmRpc2FibGVkXCIpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksai5lcSgxKS50ZXh0KGYuZm9ybWF0KGQuZGF5Vmlld0hlYWRlckZvcm1hdCkpLFEoZi5jbG9uZSgpLnN1YnRyYWN0KDEsXCJNXCIpLFwiTVwiKXx8ai5lcSgwKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLFEoZi5jbG9uZSgpLmFkZCgxLFwiTVwiKSxcIk1cIil8fGouZXEoMikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxiPWYuY2xvbmUoKS5zdGFydE9mKFwiTVwiKS5zdGFydE9mKFwid1wiKS5zdGFydE9mKFwiZFwiKSxoPTA7NDI+aDtoKyspMD09PWIud2Vla2RheSgpJiYoYz1hKFwiPHRyPlwiKSxkLmNhbGVuZGFyV2Vla3MmJmMuYXBwZW5kKCc8dGQgY2xhc3M9XCJjd1wiPicrYi53ZWVrKCkrXCI8L3RkPlwiKSxrLnB1c2goYykpLGc9XCJcIixiLmlzQmVmb3JlKGYsXCJNXCIpJiYoZys9XCIgb2xkXCIpLGIuaXNBZnRlcihmLFwiTVwiKSYmKGcrPVwiIG5ld1wiKSxiLmlzU2FtZShlLFwiZFwiKSYmIW0mJihnKz1cIiBhY3RpdmVcIiksUShiLFwiZFwiKXx8KGcrPVwiIGRpc2FibGVkXCIpLGIuaXNTYW1lKHgoKSxcImRcIikmJihnKz1cIiB0b2RheVwiKSwoMD09PWIuZGF5KCl8fDY9PT1iLmRheSgpKSYmKGcrPVwiIHdlZWtlbmRcIiksYy5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj1cInNlbGVjdERheVwiIGRhdGEtZGF5PVwiJytiLmZvcm1hdChcIkxcIikrJ1wiIGNsYXNzPVwiZGF5JytnKydcIj4nK2IuZGF0ZSgpK1wiPC90ZD5cIiksYi5hZGQoMSxcImRcIik7aS5maW5kKFwidGJvZHlcIikuZW1wdHkoKS5hcHBlbmQoayksUygpLFQoKSxVKCl9fSxXPWZ1bmN0aW9uKCl7dmFyIGI9by5maW5kKFwiLnRpbWVwaWNrZXItaG91cnMgdGFibGVcIiksYz1mLmNsb25lKCkuc3RhcnRPZihcImRcIiksZD1bXSxlPWEoXCI8dHI+XCIpO2ZvcihmLmhvdXIoKT4xMSYmIWgmJmMuaG91cigxMik7Yy5pc1NhbWUoZixcImRcIikmJihofHxmLmhvdXIoKTwxMiYmYy5ob3VyKCk8MTJ8fGYuaG91cigpPjExKTspYy5ob3VyKCklND09PTAmJihlPWEoXCI8dHI+XCIpLGQucHVzaChlKSksZS5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj1cInNlbGVjdEhvdXJcIiBjbGFzcz1cImhvdXInKyhRKGMsXCJoXCIpP1wiXCI6XCIgZGlzYWJsZWRcIikrJ1wiPicrYy5mb3JtYXQoaD9cIkhIXCI6XCJoaFwiKStcIjwvdGQ+XCIpLGMuYWRkKDEsXCJoXCIpO2IuZW1wdHkoKS5hcHBlbmQoZCl9LFg9ZnVuY3Rpb24oKXtmb3IodmFyIGI9by5maW5kKFwiLnRpbWVwaWNrZXItbWludXRlcyB0YWJsZVwiKSxjPWYuY2xvbmUoKS5zdGFydE9mKFwiaFwiKSxlPVtdLGc9YShcIjx0cj5cIiksaD0xPT09ZC5zdGVwcGluZz81OmQuc3RlcHBpbmc7Zi5pc1NhbWUoYyxcImhcIik7KWMubWludXRlKCklKDQqaCk9PT0wJiYoZz1hKFwiPHRyPlwiKSxlLnB1c2goZykpLGcuYXBwZW5kKCc8dGQgZGF0YS1hY3Rpb249XCJzZWxlY3RNaW51dGVcIiBjbGFzcz1cIm1pbnV0ZScrKFEoYyxcIm1cIik/XCJcIjpcIiBkaXNhYmxlZFwiKSsnXCI+JytjLmZvcm1hdChcIm1tXCIpK1wiPC90ZD5cIiksYy5hZGQoaCxcIm1cIik7Yi5lbXB0eSgpLmFwcGVuZChlKX0sWT1mdW5jdGlvbigpe2Zvcih2YXIgYj1vLmZpbmQoXCIudGltZXBpY2tlci1zZWNvbmRzIHRhYmxlXCIpLGM9Zi5jbG9uZSgpLnN0YXJ0T2YoXCJtXCIpLGQ9W10sZT1hKFwiPHRyPlwiKTtmLmlzU2FtZShjLFwibVwiKTspYy5zZWNvbmQoKSUyMD09PTAmJihlPWEoXCI8dHI+XCIpLGQucHVzaChlKSksZS5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj1cInNlbGVjdFNlY29uZFwiIGNsYXNzPVwic2Vjb25kJysoUShjLFwic1wiKT9cIlwiOlwiIGRpc2FibGVkXCIpKydcIj4nK2MuZm9ybWF0KFwic3NcIikrXCI8L3RkPlwiKSxjLmFkZCg1LFwic1wiKTtiLmVtcHR5KCkuYXBwZW5kKGQpfSxaPWZ1bmN0aW9uKCl7dmFyIGEsYixjPW8uZmluZChcIi50aW1lcGlja2VyIHNwYW5bZGF0YS10aW1lLWNvbXBvbmVudF1cIik7aHx8KGE9by5maW5kKFwiLnRpbWVwaWNrZXIgW2RhdGEtYWN0aW9uPXRvZ2dsZVBlcmlvZF1cIiksYj1lLmNsb25lKCkuYWRkKGUuaG91cnMoKT49MTI/LTEyOjEyLFwiaFwiKSxhLnRleHQoZS5mb3JtYXQoXCJBXCIpKSxRKGIsXCJoXCIpP2EucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTphLmFkZENsYXNzKFwiZGlzYWJsZWRcIikpLGMuZmlsdGVyKFwiW2RhdGEtdGltZS1jb21wb25lbnQ9aG91cnNdXCIpLnRleHQoZS5mb3JtYXQoaD9cIkhIXCI6XCJoaFwiKSksYy5maWx0ZXIoXCJbZGF0YS10aW1lLWNvbXBvbmVudD1taW51dGVzXVwiKS50ZXh0KGUuZm9ybWF0KFwibW1cIikpLGMuZmlsdGVyKFwiW2RhdGEtdGltZS1jb21wb25lbnQ9c2Vjb25kc11cIikudGV4dChlLmZvcm1hdChcInNzXCIpKSxXKCksWCgpLFkoKX0sJD1mdW5jdGlvbigpe28mJihWKCksWigpKX0sXz1mdW5jdGlvbihhKXt2YXIgYj1tP251bGw6ZTtyZXR1cm4gYT8oYT1hLmNsb25lKCkubG9jYWxlKGQubG9jYWxlKSwxIT09ZC5zdGVwcGluZyYmYS5taW51dGVzKE1hdGgucm91bmQoYS5taW51dGVzKCkvZC5zdGVwcGluZykqZC5zdGVwcGluZyU2MCkuc2Vjb25kcygwKSx2b2lkKFEoYSk/KGU9YSxmPWUuY2xvbmUoKSxnLnZhbChlLmZvcm1hdChpKSksYy5kYXRhKFwiZGF0ZVwiLGUuZm9ybWF0KGkpKSxtPSExLCQoKSxJKHt0eXBlOlwiZHAuY2hhbmdlXCIsZGF0ZTplLmNsb25lKCksb2xkRGF0ZTpifSkpOihkLmtlZXBJbnZhbGlkfHxnLnZhbChtP1wiXCI6ZS5mb3JtYXQoaSkpLEkoe3R5cGU6XCJkcC5lcnJvclwiLGRhdGU6YX0pKSkpOihtPSEwLGcudmFsKFwiXCIpLGMuZGF0YShcImRhdGVcIixcIlwiKSxJKHt0eXBlOlwiZHAuY2hhbmdlXCIsZGF0ZTohMSxvbGREYXRlOmJ9KSx2b2lkICQoKSl9LGFhPWZ1bmN0aW9uKCl7dmFyIGI9ITE7cmV0dXJuIG8/KG8uZmluZChcIi5jb2xsYXBzZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKS5kYXRhKFwiY29sbGFwc2VcIik7cmV0dXJuIGMmJmMudHJhbnNpdGlvbmluZz8oYj0hMCwhMSk6ITB9KSxiP2w6KG4mJm4uaGFzQ2xhc3MoXCJidG5cIikmJm4udG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIiksby5oaWRlKCksYSh3aW5kb3cpLm9mZihcInJlc2l6ZVwiLEgpLG8ub2ZmKFwiY2xpY2tcIixcIltkYXRhLWFjdGlvbl1cIiksby5vZmYoXCJtb3VzZWRvd25cIiwhMSksby5yZW1vdmUoKSxvPSExLEkoe3R5cGU6XCJkcC5oaWRlXCIsZGF0ZTplLmNsb25lKCl9KSxnLmJsdXIoKSxsKSk6bH0sYmE9ZnVuY3Rpb24oKXtfKG51bGwpfSxjYT17bmV4dDpmdW5jdGlvbigpe3ZhciBhPXFba10ubmF2Rm5jO2YuYWRkKHFba10ubmF2U3RlcCxhKSxWKCksSihhKX0scHJldmlvdXM6ZnVuY3Rpb24oKXt2YXIgYT1xW2tdLm5hdkZuYztmLnN1YnRyYWN0KHFba10ubmF2U3RlcCxhKSxWKCksSihhKX0scGlja2VyU3dpdGNoOmZ1bmN0aW9uKCl7SygxKX0sc2VsZWN0TW9udGg6ZnVuY3Rpb24oYil7dmFyIGM9YShiLnRhcmdldCkuY2xvc2VzdChcInRib2R5XCIpLmZpbmQoXCJzcGFuXCIpLmluZGV4KGEoYi50YXJnZXQpKTtmLm1vbnRoKGMpLGs9PT1wPyhfKGUuY2xvbmUoKS55ZWFyKGYueWVhcigpKS5tb250aChmLm1vbnRoKCkpKSxkLmlubGluZXx8YWEoKSk6KEsoLTEpLFYoKSksSihcIk1cIil9LHNlbGVjdFllYXI6ZnVuY3Rpb24oYil7dmFyIGM9cGFyc2VJbnQoYShiLnRhcmdldCkudGV4dCgpLDEwKXx8MDtmLnllYXIoYyksaz09PXA/KF8oZS5jbG9uZSgpLnllYXIoZi55ZWFyKCkpKSxkLmlubGluZXx8YWEoKSk6KEsoLTEpLFYoKSksSihcIllZWVlcIil9LHNlbGVjdERlY2FkZTpmdW5jdGlvbihiKXt2YXIgYz1wYXJzZUludChhKGIudGFyZ2V0KS5kYXRhKFwic2VsZWN0aW9uXCIpLDEwKXx8MDtmLnllYXIoYyksaz09PXA/KF8oZS5jbG9uZSgpLnllYXIoZi55ZWFyKCkpKSxkLmlubGluZXx8YWEoKSk6KEsoLTEpLFYoKSksSihcIllZWVlcIil9LHNlbGVjdERheTpmdW5jdGlvbihiKXt2YXIgYz1mLmNsb25lKCk7YShiLnRhcmdldCkuaXMoXCIub2xkXCIpJiZjLnN1YnRyYWN0KDEsXCJNXCIpLGEoYi50YXJnZXQpLmlzKFwiLm5ld1wiKSYmYy5hZGQoMSxcIk1cIiksXyhjLmRhdGUocGFyc2VJbnQoYShiLnRhcmdldCkudGV4dCgpLDEwKSkpLHooKXx8ZC5rZWVwT3Blbnx8ZC5pbmxpbmV8fGFhKCl9LGluY3JlbWVudEhvdXJzOmZ1bmN0aW9uKCl7dmFyIGE9ZS5jbG9uZSgpLmFkZCgxLFwiaFwiKTtRKGEsXCJoXCIpJiZfKGEpfSxpbmNyZW1lbnRNaW51dGVzOmZ1bmN0aW9uKCl7dmFyIGE9ZS5jbG9uZSgpLmFkZChkLnN0ZXBwaW5nLFwibVwiKTtRKGEsXCJtXCIpJiZfKGEpfSxpbmNyZW1lbnRTZWNvbmRzOmZ1bmN0aW9uKCl7dmFyIGE9ZS5jbG9uZSgpLmFkZCgxLFwic1wiKTtRKGEsXCJzXCIpJiZfKGEpfSxkZWNyZW1lbnRIb3VyczpmdW5jdGlvbigpe3ZhciBhPWUuY2xvbmUoKS5zdWJ0cmFjdCgxLFwiaFwiKTtRKGEsXCJoXCIpJiZfKGEpfSxkZWNyZW1lbnRNaW51dGVzOmZ1bmN0aW9uKCl7dmFyIGE9ZS5jbG9uZSgpLnN1YnRyYWN0KGQuc3RlcHBpbmcsXCJtXCIpO1EoYSxcIm1cIikmJl8oYSl9LGRlY3JlbWVudFNlY29uZHM6ZnVuY3Rpb24oKXt2YXIgYT1lLmNsb25lKCkuc3VidHJhY3QoMSxcInNcIik7UShhLFwic1wiKSYmXyhhKX0sdG9nZ2xlUGVyaW9kOmZ1bmN0aW9uKCl7XyhlLmNsb25lKCkuYWRkKGUuaG91cnMoKT49MTI/LTEyOjEyLFwiaFwiKSl9LHRvZ2dsZVBpY2tlcjpmdW5jdGlvbihiKXt2YXIgYyxlPWEoYi50YXJnZXQpLGY9ZS5jbG9zZXN0KFwidWxcIiksZz1mLmZpbmQoXCIuaW5cIiksaD1mLmZpbmQoXCIuY29sbGFwc2U6bm90KC5pbilcIik7aWYoZyYmZy5sZW5ndGgpe2lmKGM9Zy5kYXRhKFwiY29sbGFwc2VcIiksYyYmYy50cmFuc2l0aW9uaW5nKXJldHVybjtnLmNvbGxhcHNlPyhnLmNvbGxhcHNlKFwiaGlkZVwiKSxoLmNvbGxhcHNlKFwic2hvd1wiKSk6KGcucmVtb3ZlQ2xhc3MoXCJpblwiKSxoLmFkZENsYXNzKFwiaW5cIikpLGUuaXMoXCJzcGFuXCIpP2UudG9nZ2xlQ2xhc3MoZC5pY29ucy50aW1lK1wiIFwiK2QuaWNvbnMuZGF0ZSk6ZS5maW5kKFwic3BhblwiKS50b2dnbGVDbGFzcyhkLmljb25zLnRpbWUrXCIgXCIrZC5pY29ucy5kYXRlKX19LHNob3dQaWNrZXI6ZnVuY3Rpb24oKXtvLmZpbmQoXCIudGltZXBpY2tlciA+IGRpdjpub3QoLnRpbWVwaWNrZXItcGlja2VyKVwiKS5oaWRlKCksby5maW5kKFwiLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyXCIpLnNob3coKX0sc2hvd0hvdXJzOmZ1bmN0aW9uKCl7by5maW5kKFwiLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyXCIpLmhpZGUoKSxvLmZpbmQoXCIudGltZXBpY2tlciAudGltZXBpY2tlci1ob3Vyc1wiKS5zaG93KCl9LHNob3dNaW51dGVzOmZ1bmN0aW9uKCl7by5maW5kKFwiLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyXCIpLmhpZGUoKSxvLmZpbmQoXCIudGltZXBpY2tlciAudGltZXBpY2tlci1taW51dGVzXCIpLnNob3coKX0sc2hvd1NlY29uZHM6ZnVuY3Rpb24oKXtvLmZpbmQoXCIudGltZXBpY2tlciAudGltZXBpY2tlci1waWNrZXJcIikuaGlkZSgpLG8uZmluZChcIi50aW1lcGlja2VyIC50aW1lcGlja2VyLXNlY29uZHNcIikuc2hvdygpfSxzZWxlY3RIb3VyOmZ1bmN0aW9uKGIpe3ZhciBjPXBhcnNlSW50KGEoYi50YXJnZXQpLnRleHQoKSwxMCk7aHx8KGUuaG91cnMoKT49MTI/MTIhPT1jJiYoYys9MTIpOjEyPT09YyYmKGM9MCkpLF8oZS5jbG9uZSgpLmhvdXJzKGMpKSxjYS5zaG93UGlja2VyLmNhbGwobCl9LHNlbGVjdE1pbnV0ZTpmdW5jdGlvbihiKXtfKGUuY2xvbmUoKS5taW51dGVzKHBhcnNlSW50KGEoYi50YXJnZXQpLnRleHQoKSwxMCkpKSxjYS5zaG93UGlja2VyLmNhbGwobCl9LHNlbGVjdFNlY29uZDpmdW5jdGlvbihiKXtfKGUuY2xvbmUoKS5zZWNvbmRzKHBhcnNlSW50KGEoYi50YXJnZXQpLnRleHQoKSwxMCkpKSxjYS5zaG93UGlja2VyLmNhbGwobCl9LGNsZWFyOmJhLHRvZGF5OmZ1bmN0aW9uKCl7dmFyIGE9eCgpO1EoYSxcImRcIikmJl8oYSl9LGNsb3NlOmFhfSxkYT1mdW5jdGlvbihiKXtyZXR1cm4gYShiLmN1cnJlbnRUYXJnZXQpLmlzKFwiLmRpc2FibGVkXCIpPyExOihjYVthKGIuY3VycmVudFRhcmdldCkuZGF0YShcImFjdGlvblwiKV0uYXBwbHkobCxhcmd1bWVudHMpLCExKX0sZWE9ZnVuY3Rpb24oKXt2YXIgYixjPXt5ZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1vbnRoKDApLmRhdGUoMSkuaG91cnMoMCkuc2Vjb25kcygwKS5taW51dGVzKDApfSxtb250aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRlKDEpLmhvdXJzKDApLnNlY29uZHMoMCkubWludXRlcygwKX0sZGF5OmZ1bmN0aW9uKGEpe3JldHVybiBhLmhvdXJzKDApLnNlY29uZHMoMCkubWludXRlcygwKX0saG91cjpmdW5jdGlvbihhKXtyZXR1cm4gYS5zZWNvbmRzKDApLm1pbnV0ZXMoMCl9LG1pbnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5zZWNvbmRzKDApfX07cmV0dXJuIGcucHJvcChcImRpc2FibGVkXCIpfHwhZC5pZ25vcmVSZWFkb25seSYmZy5wcm9wKFwicmVhZG9ubHlcIil8fG8/bDoodm9pZCAwIT09Zy52YWwoKSYmMCE9PWcudmFsKCkudHJpbSgpLmxlbmd0aD9fKGdhKGcudmFsKCkudHJpbSgpKSk6ZC51c2VDdXJyZW50JiZtJiYoZy5pcyhcImlucHV0XCIpJiYwPT09Zy52YWwoKS50cmltKCkubGVuZ3RofHxkLmlubGluZSkmJihiPXgoKSxcInN0cmluZ1wiPT10eXBlb2YgZC51c2VDdXJyZW50JiYoYj1jW2QudXNlQ3VycmVudF0oYikpLF8oYikpLG89RigpLEwoKSxSKCksby5maW5kKFwiLnRpbWVwaWNrZXItaG91cnNcIikuaGlkZSgpLG8uZmluZChcIi50aW1lcGlja2VyLW1pbnV0ZXNcIikuaGlkZSgpLG8uZmluZChcIi50aW1lcGlja2VyLXNlY29uZHNcIikuaGlkZSgpLCQoKSxLKCksYSh3aW5kb3cpLm9uKFwicmVzaXplXCIsSCksby5vbihcImNsaWNrXCIsXCJbZGF0YS1hY3Rpb25dXCIsZGEpLG8ub24oXCJtb3VzZWRvd25cIiwhMSksbiYmbi5oYXNDbGFzcyhcImJ0blwiKSYmbi50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSxvLnNob3coKSxIKCksZC5mb2N1c09uU2hvdyYmIWcuaXMoXCI6Zm9jdXNcIikmJmcuZm9jdXMoKSxJKHt0eXBlOlwiZHAuc2hvd1wifSksbCl9LGZhPWZ1bmN0aW9uKCl7cmV0dXJuIG8/YWEoKTplYSgpfSxnYT1mdW5jdGlvbihhKXtyZXR1cm4gYT12b2lkIDA9PT1kLnBhcnNlSW5wdXREYXRlP2IuaXNNb21lbnQoYSl8fGEgaW5zdGFuY2VvZiBEYXRlP2IoYSk6eChhKTpkLnBhcnNlSW5wdXREYXRlKGEpLGEubG9jYWxlKGQubG9jYWxlKSxhfSxoYT1mdW5jdGlvbihhKXt2YXIgYixjLGUsZixnPW51bGwsaD1bXSxpPXt9LGo9YS53aGljaCxrPVwicFwiO3dbal09aztmb3IoYiBpbiB3KXcuaGFzT3duUHJvcGVydHkoYikmJndbYl09PT1rJiYoaC5wdXNoKGIpLHBhcnNlSW50KGIsMTApIT09aiYmKGlbYl09ITApKTtmb3IoYiBpbiBkLmtleUJpbmRzKWlmKGQua2V5QmluZHMuaGFzT3duUHJvcGVydHkoYikmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGQua2V5QmluZHNbYl0mJihlPWIuc3BsaXQoXCIgXCIpLGUubGVuZ3RoPT09aC5sZW5ndGgmJnZbal09PT1lW2UubGVuZ3RoLTFdKSl7Zm9yKGY9ITAsYz1lLmxlbmd0aC0yO2M+PTA7Yy0tKWlmKCEodltlW2NdXWluIGkpKXtmPSExO2JyZWFrfWlmKGYpe2c9ZC5rZXlCaW5kc1tiXTticmVha319ZyYmKGcuY2FsbChsLG8pLGEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpKX0saWE9ZnVuY3Rpb24oYSl7d1thLndoaWNoXT1cInJcIixhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKX0samE9ZnVuY3Rpb24oYil7dmFyIGM9YShiLnRhcmdldCkudmFsKCkudHJpbSgpLGQ9Yz9nYShjKTpudWxsO3JldHVybiBfKGQpLGIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksITF9LGthPWZ1bmN0aW9uKCl7Zy5vbih7Y2hhbmdlOmphLGJsdXI6ZC5kZWJ1Zz9cIlwiOmFhLGtleWRvd246aGEsa2V5dXA6aWEsZm9jdXM6ZC5hbGxvd0lucHV0VG9nZ2xlP2VhOlwiXCJ9KSxjLmlzKFwiaW5wdXRcIik/Zy5vbih7Zm9jdXM6ZWF9KTpuJiYobi5vbihcImNsaWNrXCIsZmEpLG4ub24oXCJtb3VzZWRvd25cIiwhMSkpfSxsYT1mdW5jdGlvbigpe2cub2ZmKHtjaGFuZ2U6amEsYmx1cjpibHVyLGtleWRvd246aGEsa2V5dXA6aWEsZm9jdXM6ZC5hbGxvd0lucHV0VG9nZ2xlP2FhOlwiXCJ9KSxjLmlzKFwiaW5wdXRcIik/Zy5vZmYoe2ZvY3VzOmVhfSk6biYmKG4ub2ZmKFwiY2xpY2tcIixmYSksbi5vZmYoXCJtb3VzZWRvd25cIiwhMSkpfSxtYT1mdW5jdGlvbihiKXt2YXIgYz17fTtyZXR1cm4gYS5lYWNoKGIsZnVuY3Rpb24oKXt2YXIgYT1nYSh0aGlzKTthLmlzVmFsaWQoKSYmKGNbYS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpXT0hMCl9KSxPYmplY3Qua2V5cyhjKS5sZW5ndGg/YzohMX0sbmE9ZnVuY3Rpb24oYil7dmFyIGM9e307cmV0dXJuIGEuZWFjaChiLGZ1bmN0aW9uKCl7Y1t0aGlzXT0hMH0pLE9iamVjdC5rZXlzKGMpLmxlbmd0aD9jOiExfSxvYT1mdW5jdGlvbigpe3ZhciBhPWQuZm9ybWF0fHxcIkwgTFRcIjtpPWEucmVwbGFjZSgvKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nLGZ1bmN0aW9uKGEpe3ZhciBiPWUubG9jYWxlRGF0YSgpLmxvbmdEYXRlRm9ybWF0KGEpfHxhO3JldHVybiBiLnJlcGxhY2UoLyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZyxmdW5jdGlvbihhKXtyZXR1cm4gZS5sb2NhbGVEYXRhKCkubG9uZ0RhdGVGb3JtYXQoYSl8fGF9KX0pLGo9ZC5leHRyYUZvcm1hdHM/ZC5leHRyYUZvcm1hdHMuc2xpY2UoKTpbXSxqLmluZGV4T2YoYSk8MCYmai5pbmRleE9mKGkpPDAmJmoucHVzaChpKSxoPWkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiYVwiKTwxJiZpLnJlcGxhY2UoL1xcWy4qP1xcXS9nLFwiXCIpLmluZGV4T2YoXCJoXCIpPDEseShcInlcIikmJihwPTIpLHkoXCJNXCIpJiYocD0xKSx5KFwiZFwiKSYmKHA9MCksaz1NYXRoLm1heChwLGspLG18fF8oZSl9O2lmKGwuZGVzdHJveT1mdW5jdGlvbigpe2FhKCksbGEoKSxjLnJlbW92ZURhdGEoXCJEYXRlVGltZVBpY2tlclwiKSxjLnJlbW92ZURhdGEoXCJkYXRlXCIpfSxsLnRvZ2dsZT1mYSxsLnNob3c9ZWEsbC5oaWRlPWFhLGwuZGlzYWJsZT1mdW5jdGlvbigpe3JldHVybiBhYSgpLG4mJm4uaGFzQ2xhc3MoXCJidG5cIikmJm4uYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSxnLnByb3AoXCJkaXNhYmxlZFwiLCEwKSxsfSxsLmVuYWJsZT1mdW5jdGlvbigpe3JldHVybiBuJiZuLmhhc0NsYXNzKFwiYnRuXCIpJiZuLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksZy5wcm9wKFwiZGlzYWJsZWRcIiwhMSksbH0sbC5pZ25vcmVSZWFkb25seT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5pZ25vcmVSZWFkb25seTtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImlnbm9yZVJlYWRvbmx5ICgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5pZ25vcmVSZWFkb25seT1hLGx9LGwub3B0aW9ucz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYS5leHRlbmQoITAse30sZCk7aWYoIShiIGluc3RhbmNlb2YgT2JqZWN0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwib3B0aW9ucygpIG9wdGlvbnMgcGFyYW1ldGVyIHNob3VsZCBiZSBhbiBvYmplY3RcIik7cmV0dXJuIGEuZXh0ZW5kKCEwLGQsYiksYS5lYWNoKGQsZnVuY3Rpb24oYSxiKXtpZih2b2lkIDA9PT1sW2FdKXRocm93IG5ldyBUeXBlRXJyb3IoXCJvcHRpb24gXCIrYStcIiBpcyBub3QgcmVjb2duaXplZCFcIik7bFthXShiKX0pLGx9LGwuZGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbT9udWxsOmUuY2xvbmUoKTtpZighKG51bGw9PT1hfHxcInN0cmluZ1wiPT10eXBlb2YgYXx8Yi5pc01vbWVudChhKXx8YSBpbnN0YW5jZW9mIERhdGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkYXRlKCkgcGFyYW1ldGVyIG11c3QgYmUgb25lIG9mIFtudWxsLCBzdHJpbmcsIG1vbWVudCBvciBEYXRlXVwiKTtyZXR1cm4gXyhudWxsPT09YT9udWxsOmdhKGEpKSxsfSxsLmZvcm1hdD1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5mb3JtYXQ7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihcImJvb2xlYW5cIiE9dHlwZW9mIGF8fGEhPT0hMSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImZvcm1hdCgpIGV4cGVjdHMgYSBzdGluZyBvciBib29sZWFuOmZhbHNlIHBhcmFtZXRlciBcIithKTtyZXR1cm4gZC5mb3JtYXQ9YSxpJiZvYSgpLGx9LGwudGltZVpvbmU9ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP2QudGltZVpvbmU6KGQudGltZVpvbmU9YSxsKX0sbC5kYXlWaWV3SGVhZGVyRm9ybWF0PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmRheVZpZXdIZWFkZXJGb3JtYXQ7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRheVZpZXdIZWFkZXJGb3JtYXQoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5kYXlWaWV3SGVhZGVyRm9ybWF0PWEsbH0sbC5leHRyYUZvcm1hdHM9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuZXh0cmFGb3JtYXRzO2lmKGEhPT0hMSYmIShhIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJleHRyYUZvcm1hdHMoKSBleHBlY3RzIGFuIGFycmF5IG9yIGZhbHNlIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5leHRyYUZvcm1hdHM9YSxqJiZvYSgpLGx9LGwuZGlzYWJsZWREYXRlcz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5kaXNhYmxlZERhdGVzP2EuZXh0ZW5kKHt9LGQuZGlzYWJsZWREYXRlcyk6ZC5kaXNhYmxlZERhdGVzO2lmKCFiKXJldHVybiBkLmRpc2FibGVkRGF0ZXM9ITEsJCgpLGw7aWYoIShiIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkaXNhYmxlZERhdGVzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuZGlzYWJsZWREYXRlcz1tYShiKSxkLmVuYWJsZWREYXRlcz0hMSwkKCksbH0sbC5lbmFibGVkRGF0ZXM9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuZW5hYmxlZERhdGVzP2EuZXh0ZW5kKHt9LGQuZW5hYmxlZERhdGVzKTpkLmVuYWJsZWREYXRlcztpZighYilyZXR1cm4gZC5lbmFibGVkRGF0ZXM9ITEsJCgpLGw7aWYoIShiIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJlbmFibGVkRGF0ZXMoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlclwiKTtyZXR1cm4gZC5lbmFibGVkRGF0ZXM9bWEoYiksZC5kaXNhYmxlZERhdGVzPSExLCQoKSxsfSxsLmRheXNPZldlZWtEaXNhYmxlZD1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5kYXlzT2ZXZWVrRGlzYWJsZWQuc3BsaWNlKDApO2lmKFwiYm9vbGVhblwiPT10eXBlb2YgYSYmIWEpcmV0dXJuIGQuZGF5c09mV2Vla0Rpc2FibGVkPSExLCQoKSxsO2lmKCEoYSBpbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGF5c09mV2Vla0Rpc2FibGVkKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXJcIik7aWYoZC5kYXlzT2ZXZWVrRGlzYWJsZWQ9YS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj1wYXJzZUludChiLDEwKSxiPjZ8fDA+Ynx8aXNOYU4oYik/YTooLTE9PT1hLmluZGV4T2YoYikmJmEucHVzaChiKSxhKX0sW10pLnNvcnQoKSxkLnVzZUN1cnJlbnQmJiFkLmtlZXBJbnZhbGlkKXtmb3IodmFyIGI9MDshUShlLFwiZFwiKTspe2lmKGUuYWRkKDEsXCJkXCIpLDc9PT1iKXRocm93XCJUcmllZCA3IHRpbWVzIHRvIGZpbmQgYSB2YWxpZCBkYXRlXCI7YisrfV8oZSl9cmV0dXJuICQoKSxsfSxsLm1heERhdGU9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQubWF4RGF0ZT9kLm1heERhdGUuY2xvbmUoKTpkLm1heERhdGU7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhJiZhPT09ITEpcmV0dXJuIGQubWF4RGF0ZT0hMSwkKCksbDtcInN0cmluZ1wiPT10eXBlb2YgYSYmKFwibm93XCI9PT1hfHxcIm1vbWVudFwiPT09YSkmJihhPXgoKSk7dmFyIGI9Z2EoYSk7aWYoIWIuaXNWYWxpZCgpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtYXhEYXRlKCkgQ291bGQgbm90IHBhcnNlIGRhdGUgcGFyYW1ldGVyOiBcIithKTtpZihkLm1pbkRhdGUmJmIuaXNCZWZvcmUoZC5taW5EYXRlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwibWF4RGF0ZSgpIGRhdGUgcGFyYW1ldGVyIGlzIGJlZm9yZSBvcHRpb25zLm1pbkRhdGU6IFwiK2IuZm9ybWF0KGkpKTtyZXR1cm4gZC5tYXhEYXRlPWIsZC51c2VDdXJyZW50JiYhZC5rZWVwSW52YWxpZCYmZS5pc0FmdGVyKGEpJiZfKGQubWF4RGF0ZSksZi5pc0FmdGVyKGIpJiYoZj1iLmNsb25lKCkuc3VidHJhY3QoZC5zdGVwcGluZyxcIm1cIikpLCQoKSxsfSxsLm1pbkRhdGU9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQubWluRGF0ZT9kLm1pbkRhdGUuY2xvbmUoKTpkLm1pbkRhdGU7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhJiZhPT09ITEpcmV0dXJuIGQubWluRGF0ZT0hMSwkKCksbDtcInN0cmluZ1wiPT10eXBlb2YgYSYmKFwibm93XCI9PT1hfHxcIm1vbWVudFwiPT09YSkmJihhPXgoKSk7dmFyIGI9Z2EoYSk7aWYoIWIuaXNWYWxpZCgpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtaW5EYXRlKCkgQ291bGQgbm90IHBhcnNlIGRhdGUgcGFyYW1ldGVyOiBcIithKTtpZihkLm1heERhdGUmJmIuaXNBZnRlcihkLm1heERhdGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtaW5EYXRlKCkgZGF0ZSBwYXJhbWV0ZXIgaXMgYWZ0ZXIgb3B0aW9ucy5tYXhEYXRlOiBcIitiLmZvcm1hdChpKSk7cmV0dXJuIGQubWluRGF0ZT1iLGQudXNlQ3VycmVudCYmIWQua2VlcEludmFsaWQmJmUuaXNCZWZvcmUoYSkmJl8oZC5taW5EYXRlKSxmLmlzQmVmb3JlKGIpJiYoZj1iLmNsb25lKCkuYWRkKGQuc3RlcHBpbmcsXCJtXCIpKSwkKCksbH0sbC5kZWZhdWx0RGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5kZWZhdWx0RGF0ZT9kLmRlZmF1bHREYXRlLmNsb25lKCk6ZC5kZWZhdWx0RGF0ZTtpZighYSlyZXR1cm4gZC5kZWZhdWx0RGF0ZT0hMSxsO1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoXCJub3dcIj09PWF8fFwibW9tZW50XCI9PT1hKSYmKGE9eCgpKTt2YXIgYj1nYShhKTtpZighYi5pc1ZhbGlkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRlZmF1bHREYXRlKCkgQ291bGQgbm90IHBhcnNlIGRhdGUgcGFyYW1ldGVyOiBcIithKTtpZighUShiKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVmYXVsdERhdGUoKSBkYXRlIHBhc3NlZCBpcyBpbnZhbGlkIGFjY29yZGluZyB0byBjb21wb25lbnQgc2V0dXAgdmFsaWRhdGlvbnNcIik7cmV0dXJuIGQuZGVmYXVsdERhdGU9YiwoZC5kZWZhdWx0RGF0ZSYmZC5pbmxpbmV8fFwiXCI9PT1nLnZhbCgpLnRyaW0oKSkmJl8oZC5kZWZhdWx0RGF0ZSksbH0sbC5sb2NhbGU9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQubG9jYWxlO2lmKCFiLmxvY2FsZURhdGEoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImxvY2FsZSgpIGxvY2FsZSBcIithK1wiIGlzIG5vdCBsb2FkZWQgZnJvbSBtb21lbnQgbG9jYWxlcyFcIik7cmV0dXJuIGQubG9jYWxlPWEsZS5sb2NhbGUoZC5sb2NhbGUpLGYubG9jYWxlKGQubG9jYWxlKSxpJiZvYSgpLG8mJihhYSgpLGVhKCkpLGx9LGwuc3RlcHBpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP2Quc3RlcHBpbmc6KGE9cGFyc2VJbnQoYSwxMCksKGlzTmFOKGEpfHwxPmEpJiYoYT0xKSxkLnN0ZXBwaW5nPWEsbCl9LGwudXNlQ3VycmVudD1mdW5jdGlvbihhKXt2YXIgYj1bXCJ5ZWFyXCIsXCJtb250aFwiLFwiZGF5XCIsXCJob3VyXCIsXCJtaW51dGVcIl07aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQudXNlQ3VycmVudDtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEmJlwic3RyaW5nXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ1c2VDdXJyZW50KCkgZXhwZWN0cyBhIGJvb2xlYW4gb3Igc3RyaW5nIHBhcmFtZXRlclwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmLTE9PT1iLmluZGV4T2YoYS50b0xvd2VyQ2FzZSgpKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidXNlQ3VycmVudCgpIGV4cGVjdHMgYSBzdHJpbmcgcGFyYW1ldGVyIG9mIFwiK2Iuam9pbihcIiwgXCIpKTtyZXR1cm4gZC51c2VDdXJyZW50PWEsbH0sbC5jb2xsYXBzZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5jb2xsYXBzZTtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvbGxhcHNlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmNvbGxhcHNlPT09YT9sOihkLmNvbGxhcHNlPWEsbyYmKGFhKCksZWEoKSksbCl9LGwuaWNvbnM9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGEuZXh0ZW5kKHt9LGQuaWNvbnMpO2lmKCEoYiBpbnN0YW5jZW9mIE9iamVjdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImljb25zKCkgZXhwZWN0cyBwYXJhbWV0ZXIgdG8gYmUgYW4gT2JqZWN0XCIpO3JldHVybiBhLmV4dGVuZChkLmljb25zLGIpLG8mJihhYSgpLGVhKCkpLGx9LGwudG9vbHRpcHM9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGEuZXh0ZW5kKHt9LGQudG9vbHRpcHMpO2lmKCEoYiBpbnN0YW5jZW9mIE9iamVjdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcInRvb2x0aXBzKCkgZXhwZWN0cyBwYXJhbWV0ZXIgdG8gYmUgYW4gT2JqZWN0XCIpO3JldHVybiBhLmV4dGVuZChkLnRvb2x0aXBzLGIpLG8mJihhYSgpLGVhKCkpLGx9LGwudXNlU3RyaWN0PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLnVzZVN0cmljdDtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInVzZVN0cmljdCgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC51c2VTdHJpY3Q9YSxsfSxsLnNpZGVCeVNpZGU9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuc2lkZUJ5U2lkZTtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInNpZGVCeVNpZGUoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuc2lkZUJ5U2lkZT1hLG8mJihhYSgpLGVhKCkpLGx9LGwudmlld01vZGU9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQudmlld01vZGU7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInZpZXdNb2RlKCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXJcIik7aWYoLTE9PT1yLmluZGV4T2YoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcInZpZXdNb2RlKCkgcGFyYW1ldGVyIG11c3QgYmUgb25lIG9mIChcIityLmpvaW4oXCIsIFwiKStcIikgdmFsdWVcIik7cmV0dXJuIGQudmlld01vZGU9YSxrPU1hdGgubWF4KHIuaW5kZXhPZihhKSxwKSxLKCksbH0sbC50b29sYmFyUGxhY2VtZW50PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLnRvb2xiYXJQbGFjZW1lbnQ7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInRvb2xiYXJQbGFjZW1lbnQoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlclwiKTtpZigtMT09PXUuaW5kZXhPZihhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidG9vbGJhclBsYWNlbWVudCgpIHBhcmFtZXRlciBtdXN0IGJlIG9uZSBvZiAoXCIrdS5qb2luKFwiLCBcIikrXCIpIHZhbHVlXCIpO3JldHVybiBkLnRvb2xiYXJQbGFjZW1lbnQ9YSxvJiYoYWEoKSxlYSgpKSxsfSxsLndpZGdldFBvc2l0aW9uaW5nPWZ1bmN0aW9uKGIpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBhLmV4dGVuZCh7fSxkLndpZGdldFBvc2l0aW9uaW5nKTtpZihcIltvYmplY3QgT2JqZWN0XVwiIT09e30udG9TdHJpbmcuY2FsbChiKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwid2lkZ2V0UG9zaXRpb25pbmcoKSBleHBlY3RzIGFuIG9iamVjdCB2YXJpYWJsZVwiKTtpZihiLmhvcml6b250YWwpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiLmhvcml6b250YWwpdGhyb3cgbmV3IFR5cGVFcnJvcihcIndpZGdldFBvc2l0aW9uaW5nKCkgaG9yaXpvbnRhbCB2YXJpYWJsZSBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKGIuaG9yaXpvbnRhbD1iLmhvcml6b250YWwudG9Mb3dlckNhc2UoKSwtMT09PXQuaW5kZXhPZihiLmhvcml6b250YWwpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ3aWRnZXRQb3NpdGlvbmluZygpIGV4cGVjdHMgaG9yaXpvbnRhbCBwYXJhbWV0ZXIgdG8gYmUgb25lIG9mIChcIit0LmpvaW4oXCIsIFwiKStcIilcIik7ZC53aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsPWIuaG9yaXpvbnRhbH1pZihiLnZlcnRpY2FsKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYi52ZXJ0aWNhbCl0aHJvdyBuZXcgVHlwZUVycm9yKFwid2lkZ2V0UG9zaXRpb25pbmcoKSB2ZXJ0aWNhbCB2YXJpYWJsZSBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKGIudmVydGljYWw9Yi52ZXJ0aWNhbC50b0xvd2VyQ2FzZSgpLC0xPT09cy5pbmRleE9mKGIudmVydGljYWwpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ3aWRnZXRQb3NpdGlvbmluZygpIGV4cGVjdHMgdmVydGljYWwgcGFyYW1ldGVyIHRvIGJlIG9uZSBvZiAoXCIrcy5qb2luKFwiLCBcIikrXCIpXCIpO2Qud2lkZ2V0UG9zaXRpb25pbmcudmVydGljYWw9Yi52ZXJ0aWNhbH1yZXR1cm4gJCgpLGx9LGwuY2FsZW5kYXJXZWVrcz1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5jYWxlbmRhcldlZWtzO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FsZW5kYXJXZWVrcygpIGV4cGVjdHMgcGFyYW1ldGVyIHRvIGJlIGEgYm9vbGVhbiB2YWx1ZVwiKTtyZXR1cm4gZC5jYWxlbmRhcldlZWtzPWEsJCgpLGx9LGwuc2hvd1RvZGF5QnV0dG9uPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLnNob3dUb2RheUJ1dHRvbjtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInNob3dUb2RheUJ1dHRvbigpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5zaG93VG9kYXlCdXR0b249YSxvJiYoYWEoKSxlYSgpKSxsfSxsLnNob3dDbGVhcj1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5zaG93Q2xlYXI7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJzaG93Q2xlYXIoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuc2hvd0NsZWFyPWEsbyYmKGFhKCksZWEoKSksbH0sbC53aWRnZXRQYXJlbnQ9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQud2lkZ2V0UGFyZW50O2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYj1hKGIpKSxudWxsIT09YiYmXCJzdHJpbmdcIiE9dHlwZW9mIGImJiEoYiBpbnN0YW5jZW9mIGEpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ3aWRnZXRQYXJlbnQoKSBleHBlY3RzIGEgc3RyaW5nIG9yIGEgalF1ZXJ5IG9iamVjdCBwYXJhbWV0ZXJcIik7cmV0dXJuIGQud2lkZ2V0UGFyZW50PWIsbyYmKGFhKCksZWEoKSksbH0sbC5rZWVwT3Blbj1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5rZWVwT3BlbjtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImtlZXBPcGVuKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmtlZXBPcGVuPWEsbH0sbC5mb2N1c09uU2hvdz1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5mb2N1c09uU2hvdztpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImZvY3VzT25TaG93KCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmZvY3VzT25TaG93PWEsbH0sbC5pbmxpbmU9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuaW5saW5lO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiaW5saW5lKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmlubGluZT1hLGx9LGwuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gYmEoKSxsfSxsLmtleUJpbmRzPWZ1bmN0aW9uKGEpe3JldHVybiBkLmtleUJpbmRzPWEsbH0sbC5nZXRNb21lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSl9LGwuZGVidWc9ZnVuY3Rpb24oYSl7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWJ1ZygpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5kZWJ1Zz1hLGx9LGwuYWxsb3dJbnB1dFRvZ2dsZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5hbGxvd0lucHV0VG9nZ2xlO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWxsb3dJbnB1dFRvZ2dsZSgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5hbGxvd0lucHV0VG9nZ2xlPWEsbH0sbC5zaG93Q2xvc2U9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuc2hvd0Nsb3NlO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwic2hvd0Nsb3NlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLnNob3dDbG9zZT1hLGx9LGwua2VlcEludmFsaWQ9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQua2VlcEludmFsaWQ7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJrZWVwSW52YWxpZCgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5rZWVwSW52YWxpZD1hLGx9LGwuZGF0ZXBpY2tlcklucHV0PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmRhdGVwaWNrZXJJbnB1dDtpZihcInN0cmluZ1wiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGF0ZXBpY2tlcklucHV0KCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuZGF0ZXBpY2tlcklucHV0PWEsbH0sbC5wYXJzZUlucHV0RGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5wYXJzZUlucHV0RGF0ZTtcclxuaWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicGFyc2VJbnB1dERhdGUoKSBzaG9sdWQgYmUgYXMgZnVuY3Rpb25cIik7cmV0dXJuIGQucGFyc2VJbnB1dERhdGU9YSxsfSxsLmRpc2FibGVkVGltZUludGVydmFscz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5kaXNhYmxlZFRpbWVJbnRlcnZhbHM/YS5leHRlbmQoe30sZC5kaXNhYmxlZFRpbWVJbnRlcnZhbHMpOmQuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzO2lmKCFiKXJldHVybiBkLmRpc2FibGVkVGltZUludGVydmFscz0hMSwkKCksbDtpZighKGIgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRpc2FibGVkVGltZUludGVydmFscygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyXCIpO3JldHVybiBkLmRpc2FibGVkVGltZUludGVydmFscz1iLCQoKSxsfSxsLmRpc2FibGVkSG91cnM9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuZGlzYWJsZWRIb3Vycz9hLmV4dGVuZCh7fSxkLmRpc2FibGVkSG91cnMpOmQuZGlzYWJsZWRIb3VycztpZighYilyZXR1cm4gZC5kaXNhYmxlZEhvdXJzPSExLCQoKSxsO2lmKCEoYiBpbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGlzYWJsZWRIb3VycygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyXCIpO2lmKGQuZGlzYWJsZWRIb3Vycz1uYShiKSxkLmVuYWJsZWRIb3Vycz0hMSxkLnVzZUN1cnJlbnQmJiFkLmtlZXBJbnZhbGlkKXtmb3IodmFyIGM9MDshUShlLFwiaFwiKTspe2lmKGUuYWRkKDEsXCJoXCIpLDI0PT09Yyl0aHJvd1wiVHJpZWQgMjQgdGltZXMgdG8gZmluZCBhIHZhbGlkIGRhdGVcIjtjKyt9XyhlKX1yZXR1cm4gJCgpLGx9LGwuZW5hYmxlZEhvdXJzPWZ1bmN0aW9uKGIpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmVuYWJsZWRIb3Vycz9hLmV4dGVuZCh7fSxkLmVuYWJsZWRIb3Vycyk6ZC5lbmFibGVkSG91cnM7aWYoIWIpcmV0dXJuIGQuZW5hYmxlZEhvdXJzPSExLCQoKSxsO2lmKCEoYiBpbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZW5hYmxlZEhvdXJzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXJcIik7aWYoZC5lbmFibGVkSG91cnM9bmEoYiksZC5kaXNhYmxlZEhvdXJzPSExLGQudXNlQ3VycmVudCYmIWQua2VlcEludmFsaWQpe2Zvcih2YXIgYz0wOyFRKGUsXCJoXCIpOyl7aWYoZS5hZGQoMSxcImhcIiksMjQ9PT1jKXRocm93XCJUcmllZCAyNCB0aW1lcyB0byBmaW5kIGEgdmFsaWQgZGF0ZVwiO2MrK31fKGUpfXJldHVybiAkKCksbH0sbC52aWV3RGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZi5jbG9uZSgpO2lmKCFhKXJldHVybiBmPWUuY2xvbmUoKSxsO2lmKCEoXCJzdHJpbmdcIj09dHlwZW9mIGF8fGIuaXNNb21lbnQoYSl8fGEgaW5zdGFuY2VvZiBEYXRlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidmlld0RhdGUoKSBwYXJhbWV0ZXIgbXVzdCBiZSBvbmUgb2YgW3N0cmluZywgbW9tZW50IG9yIERhdGVdXCIpO3JldHVybiBmPWdhKGEpLEooKSxsfSxjLmlzKFwiaW5wdXRcIikpZz1jO2Vsc2UgaWYoZz1jLmZpbmQoZC5kYXRlcGlja2VySW5wdXQpLDA9PT1nLnNpemUoKSlnPWMuZmluZChcImlucHV0XCIpO2Vsc2UgaWYoIWcuaXMoXCJpbnB1dFwiKSl0aHJvdyBuZXcgRXJyb3IoJ0NTUyBjbGFzcyBcIicrZC5kYXRlcGlja2VySW5wdXQrJ1wiIGNhbm5vdCBiZSBhcHBsaWVkIHRvIG5vbiBpbnB1dCBlbGVtZW50Jyk7aWYoYy5oYXNDbGFzcyhcImlucHV0LWdyb3VwXCIpJiYobj0wPT09Yy5maW5kKFwiLmRhdGVwaWNrZXJidXR0b25cIikuc2l6ZSgpP2MuZmluZChcIi5pbnB1dC1ncm91cC1hZGRvblwiKTpjLmZpbmQoXCIuZGF0ZXBpY2tlcmJ1dHRvblwiKSksIWQuaW5saW5lJiYhZy5pcyhcImlucHV0XCIpKXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBpbml0aWFsaXplIERhdGVUaW1lUGlja2VyIHdpdGhvdXQgYW4gaW5wdXQgZWxlbWVudFwiKTtyZXR1cm4gZT14KCksZj1lLmNsb25lKCksYS5leHRlbmQoITAsZCxHKCkpLGwub3B0aW9ucyhkKSxvYSgpLGthKCksZy5wcm9wKFwiZGlzYWJsZWRcIikmJmwuZGlzYWJsZSgpLGcuaXMoXCJpbnB1dFwiKSYmMCE9PWcudmFsKCkudHJpbSgpLmxlbmd0aD9fKGdhKGcudmFsKCkudHJpbSgpKSk6ZC5kZWZhdWx0RGF0ZSYmdm9pZCAwPT09Zy5hdHRyKFwicGxhY2Vob2xkZXJcIikmJl8oZC5kZWZhdWx0RGF0ZSksZC5pbmxpbmUmJmVhKCksbH07YS5mbi5kYXRldGltZXBpY2tlcj1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKTtkLmRhdGEoXCJEYXRlVGltZVBpY2tlclwiKXx8KGI9YS5leHRlbmQoITAse30sYS5mbi5kYXRldGltZXBpY2tlci5kZWZhdWx0cyxiKSxkLmRhdGEoXCJEYXRlVGltZVBpY2tlclwiLGMoZCxiKSkpfSl9LGEuZm4uZGF0ZXRpbWVwaWNrZXIuZGVmYXVsdHM9e3RpbWVab25lOlwiRXRjL1VUQ1wiLGZvcm1hdDohMSxkYXlWaWV3SGVhZGVyRm9ybWF0OlwiTU1NTSBZWVlZXCIsZXh0cmFGb3JtYXRzOiExLHN0ZXBwaW5nOjEsbWluRGF0ZTohMSxtYXhEYXRlOiExLHVzZUN1cnJlbnQ6ITAsY29sbGFwc2U6ITAsbG9jYWxlOmIubG9jYWxlKCksZGVmYXVsdERhdGU6ITEsZGlzYWJsZWREYXRlczohMSxlbmFibGVkRGF0ZXM6ITEsaWNvbnM6e3RpbWU6XCJnbHlwaGljb24gZ2x5cGhpY29uLXRpbWVcIixkYXRlOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1jYWxlbmRhclwiLHVwOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCIsZG93bjpcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXCIscHJldmlvdXM6XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiLG5leHQ6XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIix0b2RheTpcImdseXBoaWNvbiBnbHlwaGljb24tc2NyZWVuc2hvdFwiLGNsZWFyOlwiZ2x5cGhpY29uIGdseXBoaWNvbi10cmFzaFwiLGNsb3NlOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIn0sdG9vbHRpcHM6e3RvZGF5OlwiR28gdG8gdG9kYXlcIixjbGVhcjpcIkNsZWFyIHNlbGVjdGlvblwiLGNsb3NlOlwiQ2xvc2UgdGhlIHBpY2tlclwiLHNlbGVjdE1vbnRoOlwiU2VsZWN0IE1vbnRoXCIscHJldk1vbnRoOlwiUHJldmlvdXMgTW9udGhcIixuZXh0TW9udGg6XCJOZXh0IE1vbnRoXCIsc2VsZWN0WWVhcjpcIlNlbGVjdCBZZWFyXCIscHJldlllYXI6XCJQcmV2aW91cyBZZWFyXCIsbmV4dFllYXI6XCJOZXh0IFllYXJcIixzZWxlY3REZWNhZGU6XCJTZWxlY3QgRGVjYWRlXCIscHJldkRlY2FkZTpcIlByZXZpb3VzIERlY2FkZVwiLG5leHREZWNhZGU6XCJOZXh0IERlY2FkZVwiLHByZXZDZW50dXJ5OlwiUHJldmlvdXMgQ2VudHVyeVwiLG5leHRDZW50dXJ5OlwiTmV4dCBDZW50dXJ5XCIscGlja0hvdXI6XCJQaWNrIEhvdXJcIixpbmNyZW1lbnRIb3VyOlwiSW5jcmVtZW50IEhvdXJcIixkZWNyZW1lbnRIb3VyOlwiRGVjcmVtZW50IEhvdXJcIixwaWNrTWludXRlOlwiUGljayBNaW51dGVcIixpbmNyZW1lbnRNaW51dGU6XCJJbmNyZW1lbnQgTWludXRlXCIsZGVjcmVtZW50TWludXRlOlwiRGVjcmVtZW50IE1pbnV0ZVwiLHBpY2tTZWNvbmQ6XCJQaWNrIFNlY29uZFwiLGluY3JlbWVudFNlY29uZDpcIkluY3JlbWVudCBTZWNvbmRcIixkZWNyZW1lbnRTZWNvbmQ6XCJEZWNyZW1lbnQgU2Vjb25kXCIsdG9nZ2xlUGVyaW9kOlwiVG9nZ2xlIFBlcmlvZFwiLHNlbGVjdFRpbWU6XCJTZWxlY3QgVGltZVwifSx1c2VTdHJpY3Q6ITEsc2lkZUJ5U2lkZTohMSxkYXlzT2ZXZWVrRGlzYWJsZWQ6ITEsY2FsZW5kYXJXZWVrczohMSx2aWV3TW9kZTpcImRheXNcIix0b29sYmFyUGxhY2VtZW50OlwiZGVmYXVsdFwiLHNob3dUb2RheUJ1dHRvbjohMSxzaG93Q2xlYXI6ITEsc2hvd0Nsb3NlOiExLHdpZGdldFBvc2l0aW9uaW5nOntob3Jpem9udGFsOlwiYXV0b1wiLHZlcnRpY2FsOlwiYXV0b1wifSx3aWRnZXRQYXJlbnQ6bnVsbCxpZ25vcmVSZWFkb25seTohMSxrZWVwT3BlbjohMSxmb2N1c09uU2hvdzohMCxpbmxpbmU6ITEsa2VlcEludmFsaWQ6ITEsZGF0ZXBpY2tlcklucHV0OlwiLmRhdGVwaWNrZXJpbnB1dFwiLGtleUJpbmRzOnt1cDpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmRhdGUoKXx8dGhpcy5nZXRNb21lbnQoKTthLmZpbmQoXCIuZGF0ZXBpY2tlclwiKS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoNyxcImRcIikpOnRoaXMuZGF0ZShiLmNsb25lKCkuYWRkKHRoaXMuc3RlcHBpbmcoKSxcIm1cIikpfX0sZG93bjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdm9pZCB0aGlzLnNob3coKTt2YXIgYj10aGlzLmRhdGUoKXx8dGhpcy5nZXRNb21lbnQoKTthLmZpbmQoXCIuZGF0ZXBpY2tlclwiKS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuZGF0ZShiLmNsb25lKCkuYWRkKDcsXCJkXCIpKTp0aGlzLmRhdGUoYi5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuc3RlcHBpbmcoKSxcIm1cIikpfSxcImNvbnRyb2wgdXBcIjpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmRhdGUoKXx8dGhpcy5nZXRNb21lbnQoKTthLmZpbmQoXCIuZGF0ZXBpY2tlclwiKS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoMSxcInlcIikpOnRoaXMuZGF0ZShiLmNsb25lKCkuYWRkKDEsXCJoXCIpKX19LFwiY29udHJvbCBkb3duXCI6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5kYXRlKCl8fHRoaXMuZ2V0TW9tZW50KCk7YS5maW5kKFwiLmRhdGVwaWNrZXJcIikuaXMoXCI6dmlzaWJsZVwiKT90aGlzLmRhdGUoYi5jbG9uZSgpLmFkZCgxLFwieVwiKSk6dGhpcy5kYXRlKGIuY2xvbmUoKS5zdWJ0cmFjdCgxLFwiaFwiKSl9fSxsZWZ0OmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuZGF0ZSgpfHx0aGlzLmdldE1vbWVudCgpO2EuZmluZChcIi5kYXRlcGlja2VyXCIpLmlzKFwiOnZpc2libGVcIikmJnRoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoMSxcImRcIikpfX0scmlnaHQ6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5kYXRlKCl8fHRoaXMuZ2V0TW9tZW50KCk7YS5maW5kKFwiLmRhdGVwaWNrZXJcIikuaXMoXCI6dmlzaWJsZVwiKSYmdGhpcy5kYXRlKGIuY2xvbmUoKS5hZGQoMSxcImRcIikpfX0scGFnZVVwOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuZGF0ZSgpfHx0aGlzLmdldE1vbWVudCgpO2EuZmluZChcIi5kYXRlcGlja2VyXCIpLmlzKFwiOnZpc2libGVcIikmJnRoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoMSxcIk1cIikpfX0scGFnZURvd246ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5kYXRlKCl8fHRoaXMuZ2V0TW9tZW50KCk7YS5maW5kKFwiLmRhdGVwaWNrZXJcIikuaXMoXCI6dmlzaWJsZVwiKSYmdGhpcy5kYXRlKGIuY2xvbmUoKS5hZGQoMSxcIk1cIikpfX0sZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKX0sZXNjYXBlOmZ1bmN0aW9uKCl7dGhpcy5oaWRlKCl9LFwiY29udHJvbCBzcGFjZVwiOmZ1bmN0aW9uKGEpe2EuZmluZChcIi50aW1lcGlja2VyXCIpLmlzKFwiOnZpc2libGVcIikmJmEuZmluZCgnLmJ0bltkYXRhLWFjdGlvbj1cInRvZ2dsZVBlcmlvZFwiXScpLmNsaWNrKCl9LHQ6ZnVuY3Rpb24oKXt0aGlzLmRhdGUodGhpcy5nZXRNb21lbnQoKSl9LFwiZGVsZXRlXCI6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCl9fSxkZWJ1ZzohMSxhbGxvd0lucHV0VG9nZ2xlOiExLGRpc2FibGVkVGltZUludGVydmFsczohMSxkaXNhYmxlZEhvdXJzOiExLGVuYWJsZWRIb3VyczohMSx2aWV3RGF0ZTohMX19KTsiLCIvKlxyXG4gKiBib290c3RyYXAtdGFnc2lucHV0IHYwLjguMFxyXG4gKiBcclxuICovXHJcblxyXG4hZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiLGMpe3RoaXMuaXNJbml0PSEwLHRoaXMuaXRlbXNBcnJheT1bXSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy4kZWxlbWVudC5oaWRlKCksdGhpcy5pc1NlbGVjdD1cIlNFTEVDVFwiPT09Yi50YWdOYW1lLHRoaXMubXVsdGlwbGU9dGhpcy5pc1NlbGVjdCYmYi5oYXNBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSx0aGlzLm9iamVjdEl0ZW1zPWMmJmMuaXRlbVZhbHVlLHRoaXMucGxhY2Vob2xkZXJUZXh0PWIuaGFzQXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIik/dGhpcy4kZWxlbWVudC5hdHRyKFwicGxhY2Vob2xkZXJcIik6XCJcIix0aGlzLmlucHV0U2l6ZT1NYXRoLm1heCgxLHRoaXMucGxhY2Vob2xkZXJUZXh0Lmxlbmd0aCksdGhpcy4kY29udGFpbmVyPWEoJzxkaXYgY2xhc3M9XCJib290c3RyYXAtdGFnc2lucHV0XCI+PC9kaXY+JyksdGhpcy4kaW5wdXQ9YSgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCInK3RoaXMucGxhY2Vob2xkZXJUZXh0KydcIi8+JykuYXBwZW5kVG8odGhpcy4kY29udGFpbmVyKSx0aGlzLiRlbGVtZW50LmJlZm9yZSh0aGlzLiRjb250YWluZXIpLHRoaXMuYnVpbGQoYyksdGhpcy5pc0luaXQ9ITF9ZnVuY3Rpb24gYyhhLGIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGFbYl0pe3ZhciBjPWFbYl07YVtiXT1mdW5jdGlvbihhKXtyZXR1cm4gYVtjXX19fWZ1bmN0aW9uIGQoYSxiKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhW2JdKXt2YXIgYz1hW2JdO2FbYl09ZnVuY3Rpb24oKXtyZXR1cm4gY319fWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGE/aS50ZXh0KGEpLmh0bWwoKTpcIlwifWZ1bmN0aW9uIGYoYSl7dmFyIGI9MDtpZihkb2N1bWVudC5zZWxlY3Rpb24pe2EuZm9jdXMoKTt2YXIgYz1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtjLm1vdmVTdGFydChcImNoYXJhY3RlclwiLC1hLnZhbHVlLmxlbmd0aCksYj1jLnRleHQubGVuZ3RofWVsc2UoYS5zZWxlY3Rpb25TdGFydHx8XCIwXCI9PWEuc2VsZWN0aW9uU3RhcnQpJiYoYj1hLnNlbGVjdGlvblN0YXJ0KTtyZXR1cm4gYn1mdW5jdGlvbiBnKGIsYyl7dmFyIGQ9ITE7cmV0dXJuIGEuZWFjaChjLGZ1bmN0aW9uKGEsYyl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGMmJmIud2hpY2g9PT1jKXJldHVybiBkPSEwLCExO2lmKGIud2hpY2g9PT1jLndoaWNoKXt2YXIgZT0hYy5oYXNPd25Qcm9wZXJ0eShcImFsdEtleVwiKXx8Yi5hbHRLZXk9PT1jLmFsdEtleSxmPSFjLmhhc093blByb3BlcnR5KFwic2hpZnRLZXlcIil8fGIuc2hpZnRLZXk9PT1jLnNoaWZ0S2V5LGc9IWMuaGFzT3duUHJvcGVydHkoXCJjdHJsS2V5XCIpfHxiLmN0cmxLZXk9PT1jLmN0cmxLZXk7aWYoZSYmZiYmZylyZXR1cm4gZD0hMCwhMX19KSxkfXZhciBoPXt0YWdDbGFzczpmdW5jdGlvbihhKXtyZXR1cm5cImxhYmVsIGxhYmVsLWluZm9cIn0sZm9jdXNDbGFzczpcImZvY3VzXCIsaXRlbVZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhP2EudG9TdHJpbmcoKTphfSxpdGVtVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pdGVtVmFsdWUoYSl9LGl0ZW1UaXRsZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbH0sZnJlZUlucHV0OiEwLGFkZE9uQmx1cjohMCxtYXhUYWdzOnZvaWQgMCxtYXhDaGFyczp2b2lkIDAsY29uZmlybUtleXM6WzEzLDQ0XSxkZWxpbWl0ZXI6XCIsXCIsZGVsaW1pdGVyUmVnZXg6bnVsbCxjYW5jZWxDb25maXJtS2V5c09uRW1wdHk6ITEsb25UYWdFeGlzdHM6ZnVuY3Rpb24oYSxiKXtiLmhpZGUoKS5mYWRlSW4oKX0sdHJpbVZhbHVlOiExLGFsbG93RHVwbGljYXRlczohMSx0cmlnZ2VyQ2hhbmdlOiEwfTtiLnByb3RvdHlwZT17Y29uc3RydWN0b3I6YixhZGQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBmPXRoaXM7aWYoIShmLm9wdGlvbnMubWF4VGFncyYmZi5pdGVtc0FycmF5Lmxlbmd0aD49Zi5vcHRpb25zLm1heFRhZ3MpJiYoYj09PSExfHxiKSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGImJmYub3B0aW9ucy50cmltVmFsdWUmJihiPWEudHJpbShiKSksXCJvYmplY3RcIj09dHlwZW9mIGImJiFmLm9iamVjdEl0ZW1zKXRocm93XCJDYW4ndCBhZGQgb2JqZWN0cyB3aGVuIGl0ZW1WYWx1ZSBvcHRpb24gaXMgbm90IHNldFwiO2lmKCFiLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqJC8pKXtpZihmLmlzU2VsZWN0JiYhZi5tdWx0aXBsZSYmZi5pdGVtc0FycmF5Lmxlbmd0aD4wJiZmLnJlbW92ZShmLml0ZW1zQXJyYXlbMF0pLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZcIklOUFVUXCI9PT10aGlzLiRlbGVtZW50WzBdLnRhZ05hbWUpe3ZhciBnPWYub3B0aW9ucy5kZWxpbWl0ZXJSZWdleD9mLm9wdGlvbnMuZGVsaW1pdGVyUmVnZXg6Zi5vcHRpb25zLmRlbGltaXRlcixoPWIuc3BsaXQoZyk7aWYoaC5sZW5ndGg+MSl7Zm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKyspdGhpcy5hZGQoaFtpXSwhMCk7cmV0dXJuIHZvaWQoY3x8Zi5wdXNoVmFsKGYub3B0aW9ucy50cmlnZ2VyQ2hhbmdlKSl9fXZhciBqPWYub3B0aW9ucy5pdGVtVmFsdWUoYiksaz1mLm9wdGlvbnMuaXRlbVRleHQoYiksbD1mLm9wdGlvbnMudGFnQ2xhc3MoYiksbT1mLm9wdGlvbnMuaXRlbVRpdGxlKGIpLG49YS5ncmVwKGYuaXRlbXNBcnJheSxmdW5jdGlvbihhKXtyZXR1cm4gZi5vcHRpb25zLml0ZW1WYWx1ZShhKT09PWp9KVswXTtpZighbnx8Zi5vcHRpb25zLmFsbG93RHVwbGljYXRlcyl7aWYoIShmLml0ZW1zKCkudG9TdHJpbmcoKS5sZW5ndGgrYi5sZW5ndGgrMT5mLm9wdGlvbnMubWF4SW5wdXRMZW5ndGgpKXt2YXIgbz1hLkV2ZW50KFwiYmVmb3JlSXRlbUFkZFwiLHtpdGVtOmIsY2FuY2VsOiExLG9wdGlvbnM6ZH0pO2lmKGYuJGVsZW1lbnQudHJpZ2dlcihvKSwhby5jYW5jZWwpe2YuaXRlbXNBcnJheS5wdXNoKGIpO3ZhciBwPWEoJzxzcGFuIGNsYXNzPVwidGFnICcrZShsKSsobnVsbCE9PW0/J1wiIHRpdGxlPVwiJyttOlwiXCIpKydcIj4nK2UoaykrJzxzcGFuIGRhdGEtcm9sZT1cInJlbW92ZVwiPjwvc3Bhbj48L3NwYW4+Jyk7cC5kYXRhKFwiaXRlbVwiLGIpLGYuZmluZElucHV0V3JhcHBlcigpLmJlZm9yZShwKSxwLmFmdGVyKFwiIFwiKTt2YXIgcT1hKCdvcHRpb25bdmFsdWU9XCInK2VuY29kZVVSSUNvbXBvbmVudChqKSsnXCJdJyxmLiRlbGVtZW50KS5sZW5ndGh8fGEoJ29wdGlvblt2YWx1ZT1cIicrZShqKSsnXCJdJyxmLiRlbGVtZW50KS5sZW5ndGg7aWYoZi5pc1NlbGVjdCYmIXEpe3ZhciByPWEoXCI8b3B0aW9uIHNlbGVjdGVkPlwiK2UoaykrXCI8L29wdGlvbj5cIik7ci5kYXRhKFwiaXRlbVwiLGIpLHIuYXR0cihcInZhbHVlXCIsaiksZi4kZWxlbWVudC5hcHBlbmQocil9Y3x8Zi5wdXNoVmFsKGYub3B0aW9ucy50cmlnZ2VyQ2hhbmdlKSwoZi5vcHRpb25zLm1heFRhZ3M9PT1mLml0ZW1zQXJyYXkubGVuZ3RofHxmLml0ZW1zKCkudG9TdHJpbmcoKS5sZW5ndGg9PT1mLm9wdGlvbnMubWF4SW5wdXRMZW5ndGgpJiZmLiRjb250YWluZXIuYWRkQ2xhc3MoXCJib290c3RyYXAtdGFnc2lucHV0LW1heFwiKSxhKFwiLnR5cGVhaGVhZCwgLnR3aXR0ZXItdHlwZWFoZWFkXCIsZi4kY29udGFpbmVyKS5sZW5ndGgmJmYuJGlucHV0LnR5cGVhaGVhZChcInZhbFwiLFwiXCIpLHRoaXMuaXNJbml0P2YuJGVsZW1lbnQudHJpZ2dlcihhLkV2ZW50KFwiaXRlbUFkZGVkT25Jbml0XCIse2l0ZW06YixvcHRpb25zOmR9KSk6Zi4kZWxlbWVudC50cmlnZ2VyKGEuRXZlbnQoXCJpdGVtQWRkZWRcIix7aXRlbTpiLG9wdGlvbnM6ZH0pKX19fWVsc2UgaWYoZi5vcHRpb25zLm9uVGFnRXhpc3RzKXt2YXIgcz1hKFwiLnRhZ1wiLGYuJGNvbnRhaW5lcikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcykuZGF0YShcIml0ZW1cIik9PT1ufSk7Zi5vcHRpb25zLm9uVGFnRXhpc3RzKGIscyl9fX19LHJlbW92ZTpmdW5jdGlvbihiLGMsZCl7dmFyIGU9dGhpcztpZihlLm9iamVjdEl0ZW1zJiYoYj1cIm9iamVjdFwiPT10eXBlb2YgYj9hLmdyZXAoZS5pdGVtc0FycmF5LGZ1bmN0aW9uKGEpe3JldHVybiBlLm9wdGlvbnMuaXRlbVZhbHVlKGEpPT1lLm9wdGlvbnMuaXRlbVZhbHVlKGIpfSk6YS5ncmVwKGUuaXRlbXNBcnJheSxmdW5jdGlvbihhKXtyZXR1cm4gZS5vcHRpb25zLml0ZW1WYWx1ZShhKT09Yn0pLGI9YltiLmxlbmd0aC0xXSksYil7dmFyIGY9YS5FdmVudChcImJlZm9yZUl0ZW1SZW1vdmVcIix7aXRlbTpiLGNhbmNlbDohMSxvcHRpb25zOmR9KTtpZihlLiRlbGVtZW50LnRyaWdnZXIoZiksZi5jYW5jZWwpcmV0dXJuO2EoXCIudGFnXCIsZS4kY29udGFpbmVyKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5kYXRhKFwiaXRlbVwiKT09PWJ9KS5yZW1vdmUoKSxhKFwib3B0aW9uXCIsZS4kZWxlbWVudCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcykuZGF0YShcIml0ZW1cIik9PT1ifSkucmVtb3ZlKCksLTEhPT1hLmluQXJyYXkoYixlLml0ZW1zQXJyYXkpJiZlLml0ZW1zQXJyYXkuc3BsaWNlKGEuaW5BcnJheShiLGUuaXRlbXNBcnJheSksMSl9Y3x8ZS5wdXNoVmFsKGUub3B0aW9ucy50cmlnZ2VyQ2hhbmdlKSxlLm9wdGlvbnMubWF4VGFncz5lLml0ZW1zQXJyYXkubGVuZ3RoJiZlLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoXCJib290c3RyYXAtdGFnc2lucHV0LW1heFwiKSxlLiRlbGVtZW50LnRyaWdnZXIoYS5FdmVudChcIml0ZW1SZW1vdmVkXCIse2l0ZW06YixvcHRpb25zOmR9KSl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3ZhciBiPXRoaXM7Zm9yKGEoXCIudGFnXCIsYi4kY29udGFpbmVyKS5yZW1vdmUoKSxhKFwib3B0aW9uXCIsYi4kZWxlbWVudCkucmVtb3ZlKCk7Yi5pdGVtc0FycmF5Lmxlbmd0aD4wOyliLml0ZW1zQXJyYXkucG9wKCk7Yi5wdXNoVmFsKGIub3B0aW9ucy50cmlnZ2VyQ2hhbmdlKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBiPXRoaXM7YShcIi50YWdcIixiLiRjb250YWluZXIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5kYXRhKFwiaXRlbVwiKSxmPWIub3B0aW9ucy5pdGVtVmFsdWUoZCksZz1iLm9wdGlvbnMuaXRlbVRleHQoZCksaD1iLm9wdGlvbnMudGFnQ2xhc3MoZCk7aWYoYy5hdHRyKFwiY2xhc3NcIixudWxsKSxjLmFkZENsYXNzKFwidGFnIFwiK2UoaCkpLGMuY29udGVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMz09dGhpcy5ub2RlVHlwZX0pWzBdLm5vZGVWYWx1ZT1lKGcpLGIuaXNTZWxlY3Qpe3ZhciBpPWEoXCJvcHRpb25cIixiLiRlbGVtZW50KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5kYXRhKFwiaXRlbVwiKT09PWR9KTtpLmF0dHIoXCJ2YWx1ZVwiLGYpfX0pfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zQXJyYXl9LHB1c2hWYWw6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9YS5tYXAoYi5pdGVtcygpLGZ1bmN0aW9uKGEpe3JldHVybiBiLm9wdGlvbnMuaXRlbVZhbHVlKGEpLnRvU3RyaW5nKCl9KTtiLiRlbGVtZW50LnZhbChjLCEwKSxiLm9wdGlvbnMudHJpZ2dlckNoYW5nZSYmYi4kZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlXCIpfSxidWlsZDpmdW5jdGlvbihiKXt2YXIgZT10aGlzO2lmKGUub3B0aW9ucz1hLmV4dGVuZCh7fSxoLGIpLGUub2JqZWN0SXRlbXMmJihlLm9wdGlvbnMuZnJlZUlucHV0PSExKSxjKGUub3B0aW9ucyxcIml0ZW1WYWx1ZVwiKSxjKGUub3B0aW9ucyxcIml0ZW1UZXh0XCIpLGQoZS5vcHRpb25zLFwidGFnQ2xhc3NcIiksZS5vcHRpb25zLnR5cGVhaGVhZCl7dmFyIGk9ZS5vcHRpb25zLnR5cGVhaGVhZHx8e307ZChpLFwic291cmNlXCIpLGUuJGlucHV0LnR5cGVhaGVhZChhLmV4dGVuZCh7fSxpLHtzb3VyY2U6ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBnPWUub3B0aW9ucy5pdGVtVGV4dChhW2RdKTtmW2ddPWFbZF0sYi5wdXNoKGcpfWMoYil9dGhpcy5tYXA9e307dmFyIGY9dGhpcy5tYXAsZz1pLnNvdXJjZShiKTthLmlzRnVuY3Rpb24oZy5zdWNjZXNzKT9nLnN1Y2Nlc3MoZCk6YS5pc0Z1bmN0aW9uKGcudGhlbik/Zy50aGVuKGQpOmEud2hlbihnKS50aGVuKGQpfSx1cGRhdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBlLmFkZCh0aGlzLm1hcFthXSksdGhpcy5tYXBbYV19LG1hdGNoZXI6ZnVuY3Rpb24oYSl7cmV0dXJuLTEhPT1hLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih0aGlzLnF1ZXJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpKX0sc29ydGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnNvcnQoKX0saGlnaGxpZ2h0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFJlZ0V4cChcIihcIit0aGlzLnF1ZXJ5K1wiKVwiLFwiZ2lcIik7cmV0dXJuIGEucmVwbGFjZShiLFwiPHN0cm9uZz4kMTwvc3Ryb25nPlwiKX19KSl9aWYoZS5vcHRpb25zLnR5cGVhaGVhZGpzKXt2YXIgaj1udWxsLGs9e30sbD1lLm9wdGlvbnMudHlwZWFoZWFkanM7YS5pc0FycmF5KGwpPyhqPWxbMF0saz1sWzFdKTprPWwsZS4kaW5wdXQudHlwZWFoZWFkKGosaykub24oXCJ0eXBlYWhlYWQ6c2VsZWN0ZWRcIixhLnByb3h5KGZ1bmN0aW9uKGEsYil7ay52YWx1ZUtleT9lLmFkZChiW2sudmFsdWVLZXldKTplLmFkZChiKSxlLiRpbnB1dC50eXBlYWhlYWQoXCJ2YWxcIixcIlwiKX0sZSkpfWUuJGNvbnRhaW5lci5vbihcImNsaWNrXCIsYS5wcm94eShmdW5jdGlvbihhKXtlLiRlbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiKXx8ZS4kaW5wdXQucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpLGUuJGlucHV0LmZvY3VzKCl9LGUpKSxlLm9wdGlvbnMuYWRkT25CbHVyJiZlLm9wdGlvbnMuZnJlZUlucHV0JiZlLiRpbnB1dC5vbihcImZvY3Vzb3V0XCIsYS5wcm94eShmdW5jdGlvbihiKXswPT09YShcIi50eXBlYWhlYWQsIC50d2l0dGVyLXR5cGVhaGVhZFwiLGUuJGNvbnRhaW5lcikubGVuZ3RoJiYoZS5hZGQoZS4kaW5wdXQudmFsKCkpLGUuJGlucHV0LnZhbChcIlwiKSl9LGUpKSxlLiRjb250YWluZXIub24oe2ZvY3VzaW46ZnVuY3Rpb24oKXtlLiRjb250YWluZXIuYWRkQ2xhc3MoZS5vcHRpb25zLmZvY3VzQ2xhc3MpfSxmb2N1c291dDpmdW5jdGlvbigpe2UuJGNvbnRhaW5lci5yZW1vdmVDbGFzcyhlLm9wdGlvbnMuZm9jdXNDbGFzcyl9fSksZS4kY29udGFpbmVyLm9uKFwia2V5ZG93blwiLFwiaW5wdXRcIixhLnByb3h5KGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpLGQ9ZS5maW5kSW5wdXRXcmFwcGVyKCk7aWYoZS4kZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIikpcmV0dXJuIHZvaWQgZS4kaW5wdXQuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKTtzd2l0Y2goYi53aGljaCl7Y2FzZSA4OmlmKDA9PT1mKGNbMF0pKXt2YXIgZz1kLnByZXYoKTtnLmxlbmd0aCYmZS5yZW1vdmUoZy5kYXRhKFwiaXRlbVwiKSl9YnJlYWs7Y2FzZSA0NjppZigwPT09ZihjWzBdKSl7dmFyIGg9ZC5uZXh0KCk7aC5sZW5ndGgmJmUucmVtb3ZlKGguZGF0YShcIml0ZW1cIikpfWJyZWFrO2Nhc2UgMzc6dmFyIGk9ZC5wcmV2KCk7MD09PWMudmFsKCkubGVuZ3RoJiZpWzBdJiYoaS5iZWZvcmUoZCksYy5mb2N1cygpKTticmVhaztjYXNlIDM5OnZhciBqPWQubmV4dCgpOzA9PT1jLnZhbCgpLmxlbmd0aCYmalswXSYmKGouYWZ0ZXIoZCksYy5mb2N1cygpKX12YXIgaz1jLnZhbCgpLmxlbmd0aDtNYXRoLmNlaWwoay81KTtjLmF0dHIoXCJzaXplXCIsTWF0aC5tYXgodGhpcy5pbnB1dFNpemUsYy52YWwoKS5sZW5ndGgpKX0sZSkpLGUuJGNvbnRhaW5lci5vbihcImtleXByZXNzXCIsXCJpbnB1dFwiLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9YShiLnRhcmdldCk7aWYoZS4kZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIikpcmV0dXJuIHZvaWQgZS4kaW5wdXQuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKTt2YXIgZD1jLnZhbCgpLGY9ZS5vcHRpb25zLm1heENoYXJzJiZkLmxlbmd0aD49ZS5vcHRpb25zLm1heENoYXJzO2Uub3B0aW9ucy5mcmVlSW5wdXQmJihnKGIsZS5vcHRpb25zLmNvbmZpcm1LZXlzKXx8ZikmJigwIT09ZC5sZW5ndGgmJihlLmFkZChmP2Quc3Vic3RyKDAsZS5vcHRpb25zLm1heENoYXJzKTpkKSxjLnZhbChcIlwiKSksZS5vcHRpb25zLmNhbmNlbENvbmZpcm1LZXlzT25FbXB0eT09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3ZhciBoPWMudmFsKCkubGVuZ3RoO01hdGguY2VpbChoLzUpO2MuYXR0cihcInNpemVcIixNYXRoLm1heCh0aGlzLmlucHV0U2l6ZSxjLnZhbCgpLmxlbmd0aCkpfSxlKSksZS4kY29udGFpbmVyLm9uKFwiY2xpY2tcIixcIltkYXRhLXJvbGU9cmVtb3ZlXVwiLGEucHJveHkoZnVuY3Rpb24oYil7ZS4kZWxlbWVudC5hdHRyKFwiZGlzYWJsZWRcIil8fGUucmVtb3ZlKGEoYi50YXJnZXQpLmNsb3Nlc3QoXCIudGFnXCIpLmRhdGEoXCJpdGVtXCIpKX0sZSkpLGUub3B0aW9ucy5pdGVtVmFsdWU9PT1oLml0ZW1WYWx1ZSYmKFwiSU5QVVRcIj09PWUuJGVsZW1lbnRbMF0udGFnTmFtZT9lLmFkZChlLiRlbGVtZW50LnZhbCgpKTphKFwib3B0aW9uXCIsZS4kZWxlbWVudCkuZWFjaChmdW5jdGlvbigpe2UuYWRkKGEodGhpcykuYXR0cihcInZhbHVlXCIpLCEwKX0pKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS4kY29udGFpbmVyLm9mZihcImtleXByZXNzXCIsXCJpbnB1dFwiKSxhLiRjb250YWluZXIub2ZmKFwiY2xpY2tcIixcIltyb2xlPXJlbW92ZV1cIiksYS4kY29udGFpbmVyLnJlbW92ZSgpLGEuJGVsZW1lbnQucmVtb3ZlRGF0YShcInRhZ3NpbnB1dFwiKSxhLiRlbGVtZW50LnNob3coKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLiRpbnB1dC5mb2N1cygpfSxpbnB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRpbnB1dH0sZmluZElucHV0V3JhcHBlcjpmdW5jdGlvbigpe2Zvcih2YXIgYj10aGlzLiRpbnB1dFswXSxjPXRoaXMuJGNvbnRhaW5lclswXTtiJiZiLnBhcmVudE5vZGUhPT1jOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYShiKX19LGEuZm4udGFnc2lucHV0PWZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1bXTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGc9YSh0aGlzKS5kYXRhKFwidGFnc2lucHV0XCIpO2lmKGcpaWYoY3x8ZCl7aWYodm9pZCAwIT09Z1tjXSl7aWYoMz09PWdbY10ubGVuZ3RoJiZ2b2lkIDAhPT1lKXZhciBoPWdbY10oZCxudWxsLGUpO2Vsc2UgdmFyIGg9Z1tjXShkKTt2b2lkIDAhPT1oJiZmLnB1c2goaCl9fWVsc2UgZi5wdXNoKGcpO2Vsc2UgZz1uZXcgYih0aGlzLGMpLGEodGhpcykuZGF0YShcInRhZ3NpbnB1dFwiLGcpLGYucHVzaChnKSxcIlNFTEVDVFwiPT09dGhpcy50YWdOYW1lJiZhKFwib3B0aW9uXCIsYSh0aGlzKSkuYXR0cihcInNlbGVjdGVkXCIsXCJzZWxlY3RlZFwiKSxhKHRoaXMpLnZhbChhKHRoaXMpLnZhbCgpKX0pLFwic3RyaW5nXCI9PXR5cGVvZiBjP2YubGVuZ3RoPjE/ZjpmWzBdOmZ9LGEuZm4udGFnc2lucHV0LkNvbnN0cnVjdG9yPWI7dmFyIGk9YShcIjxkaXYgLz5cIik7YShmdW5jdGlvbigpe2EoXCJpbnB1dFtkYXRhLXJvbGU9dGFnc2lucHV0XSwgc2VsZWN0W211bHRpcGxlXVtkYXRhLXJvbGU9dGFnc2lucHV0XVwiKS50YWdzaW5wdXQoKX0pfSh3aW5kb3cualF1ZXJ5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ym9vdHN0cmFwLXRhZ3NpbnB1dC5taW4uanMubWFwIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBib290c3RyYXAtY29tYm9ib3guanMgdjEuMS43XHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ29weXJpZ2h0IDIwMTIgRGFuaWVsIEZhcnJlbGxcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG4hZnVuY3Rpb24oICQgKSB7XHJcblxyXG4gXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gLyogQ09NQk9CT1ggUFVCTElDIENMQVNTIERFRklOSVRJT05cclxuICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG4gIHZhciBDb21ib2JveCA9IGZ1bmN0aW9uICggZWxlbWVudCwgb3B0aW9ucyApIHtcclxuICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuLmNvbWJvYm94LmRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgIHRoaXMudGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMudGVtcGxhdGUgfHwgdGhpcy50ZW1wbGF0ZVxyXG4gICAgdGhpcy4kc291cmNlID0gJChlbGVtZW50KTtcclxuICAgIHRoaXMuJGNvbnRhaW5lciA9IHRoaXMuc2V0dXAoKTtcclxuICAgIHRoaXMuJGVsZW1lbnQgPSB0aGlzLiRjb250YWluZXIuZmluZCgnaW5wdXRbdHlwZT10ZXh0XScpO1xyXG4gICAgdGhpcy4kdGFyZ2V0ID0gdGhpcy4kY29udGFpbmVyLmZpbmQoJ2lucHV0W3R5cGU9aGlkZGVuXScpO1xyXG4gICAgdGhpcy4kYnV0dG9uID0gdGhpcy4kY29udGFpbmVyLmZpbmQoJy5kcm9wZG93bi10b2dnbGUnKTtcclxuICAgIHRoaXMuJG1lbnUgPSAkKHRoaXMub3B0aW9ucy5tZW51KS5hcHBlbmRUbygnYm9keScpO1xyXG4gICAgdGhpcy5tYXRjaGVyID0gdGhpcy5vcHRpb25zLm1hdGNoZXIgfHwgdGhpcy5tYXRjaGVyO1xyXG4gICAgdGhpcy5zb3J0ZXIgPSB0aGlzLm9wdGlvbnMuc29ydGVyIHx8IHRoaXMuc29ydGVyO1xyXG4gICAgdGhpcy5oaWdobGlnaHRlciA9IHRoaXMub3B0aW9ucy5oaWdobGlnaHRlciB8fCB0aGlzLmhpZ2hsaWdodGVyO1xyXG4gICAgdGhpcy5zaG93biA9IGZhbHNlO1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB0aGlzLnRyYW5zZmVyQXR0cmlidXRlcygpO1xyXG4gICAgdGhpcy5saXN0ZW4oKTtcclxuICB9O1xyXG5cclxuICBDb21ib2JveC5wcm90b3R5cGUgPSB7XHJcblxyXG4gICAgY29uc3RydWN0b3I6IENvbWJvYm94XHJcblxyXG4gICwgc2V0dXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIGNvbWJvYm94ID0gJCh0aGlzLnRlbXBsYXRlKCkpO1xyXG4gICAgICB0aGlzLiRzb3VyY2UuYmVmb3JlKGNvbWJvYm94KTtcclxuICAgICAgdGhpcy4kc291cmNlLmhpZGUoKTtcclxuICAgICAgcmV0dXJuIGNvbWJvYm94O1xyXG4gICAgfVxyXG5cclxuICAsIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLiRlbGVtZW50LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIHRoaXMuJGJ1dHRvbi5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdjb21ib2JveC1kaXNhYmxlZCcpO1xyXG4gICAgfVxyXG5cclxuICAsIGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgIHRoaXMuJGJ1dHRvbi5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NvbWJvYm94LWRpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgLCBwYXJzZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICAsIG1hcCA9IHt9XHJcbiAgICAgICAgLCBzb3VyY2UgPSBbXVxyXG4gICAgICAgICwgc2VsZWN0ZWQgPSBmYWxzZVxyXG4gICAgICAgICwgc2VsZWN0ZWRWYWx1ZSA9ICcnO1xyXG4gICAgICB0aGlzLiRzb3VyY2UuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgb3B0aW9uID0gJCh0aGlzKTtcclxuICAgICAgICBpZiAob3B0aW9uLnZhbCgpID09PSAnJykge1xyXG4gICAgICAgICAgdGhhdC5vcHRpb25zLnBsYWNlaG9sZGVyID0gb3B0aW9uLnRleHQoKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWFwW29wdGlvbi50ZXh0KCldID0gb3B0aW9uLnZhbCgpO1xyXG4gICAgICAgIHNvdXJjZS5wdXNoKG9wdGlvbi50ZXh0KCkpO1xyXG4gICAgICAgIGlmIChvcHRpb24ucHJvcCgnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgc2VsZWN0ZWQgPSBvcHRpb24udGV4dCgpO1xyXG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZSA9IG9wdGlvbi52YWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMubWFwID0gbWFwO1xyXG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLiRlbGVtZW50LnZhbChzZWxlY3RlZCk7XHJcbiAgICAgICAgdGhpcy4kdGFyZ2V0LnZhbChzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ2NvbWJvYm94LXNlbGVjdGVkJyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgLCB0cmFuc2ZlckF0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyID0gdGhpcy4kc291cmNlLmF0dHIoJ2RhdGEtcGxhY2Vob2xkZXInKSB8fCB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXJcclxuICAgIGlmKHRoaXMub3B0aW9ucy5hcHBlbmRJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgXHR0aGlzLiRlbGVtZW50LmF0dHIoJ2lkJywgdGhpcy4kc291cmNlLmF0dHIoJ2lkJykgKyB0aGlzLm9wdGlvbnMuYXBwZW5kSWQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcilcclxuICAgIHRoaXMuJHRhcmdldC5wcm9wKCduYW1lJywgdGhpcy4kc291cmNlLnByb3AoJ25hbWUnKSlcclxuICAgIHRoaXMuJHRhcmdldC52YWwodGhpcy4kc291cmNlLnZhbCgpKVxyXG4gICAgdGhpcy4kc291cmNlLnJlbW92ZUF0dHIoJ25hbWUnKSAgLy8gUmVtb3ZlIGZyb20gc291cmNlIG90aGVyd2lzZSBmb3JtIHdpbGwgcGFzcyBwYXJhbWV0ZXIgdHdpY2UuXHJcbiAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ3JlcXVpcmVkJywgdGhpcy4kc291cmNlLmF0dHIoJ3JlcXVpcmVkJykpXHJcbiAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ3JlbCcsIHRoaXMuJHNvdXJjZS5hdHRyKCdyZWwnKSlcclxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cigndGl0bGUnLCB0aGlzLiRzb3VyY2UuYXR0cigndGl0bGUnKSlcclxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cignY2xhc3MnLCB0aGlzLiRzb3VyY2UuYXR0cignY2xhc3MnKSlcclxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnLCB0aGlzLiRzb3VyY2UuYXR0cigndGFiaW5kZXgnKSlcclxuICAgIHRoaXMuJHNvdXJjZS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpXHJcbiAgICBpZiAodGhpcy4kc291cmNlLmF0dHIoJ2Rpc2FibGVkJykhPT11bmRlZmluZWQpXHJcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLCBzZWxlY3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIHZhbCA9IHRoaXMuJG1lbnUuZmluZCgnLmFjdGl2ZScpLmF0dHIoJ2RhdGEtdmFsdWUnKTtcclxuICAgICAgdGhpcy4kZWxlbWVudC52YWwodGhpcy51cGRhdGVyKHZhbCkpLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICB0aGlzLiR0YXJnZXQudmFsKHRoaXMubWFwW3ZhbF0pLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICB0aGlzLiRzb3VyY2UudmFsKHRoaXMubWFwW3ZhbF0pLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ2NvbWJvYm94LXNlbGVjdGVkJyk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICwgdXBkYXRlcjogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9XHJcblxyXG4gICwgc2hvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgcG9zID0gJC5leHRlbmQoe30sIHRoaXMuJGVsZW1lbnQucG9zaXRpb24oKSwge1xyXG4gICAgICAgIGhlaWdodDogdGhpcy4kZWxlbWVudFswXS5vZmZzZXRIZWlnaHRcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLiRtZW51XHJcbiAgICAgICAgLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpXHJcbiAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICB0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0XHJcbiAgICAgICAgLCBsZWZ0OiBwb3MubGVmdFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNob3coKTtcclxuXHJcbiAgICAgICQoJy5kcm9wZG93bi1tZW51Jykub24oJ21vdXNlZG93bicsICQucHJveHkodGhpcy5zY3JvbGxTYWZldHksIHRoaXMpKTtcclxuXHJcbiAgICAgIHRoaXMuc2hvd24gPSB0cnVlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgLCBoaWRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuJG1lbnUuaGlkZSgpO1xyXG4gICAgICAkKCcuZHJvcGRvd24tbWVudScpLm9mZignbW91c2Vkb3duJywgJC5wcm94eSh0aGlzLnNjcm9sbFNhZmV0eSwgdGhpcykpO1xyXG4gICAgICB0aGlzLiRlbGVtZW50Lm9uKCdibHVyJywgJC5wcm94eSh0aGlzLmJsdXIsIHRoaXMpKTtcclxuICAgICAgdGhpcy5zaG93biA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgLCBsb29rdXA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy4kZWxlbWVudC52YWwoKTtcclxuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzcyh0aGlzLnNvdXJjZSk7XHJcbiAgICB9XHJcblxyXG4gICwgcHJvY2VzczogZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgIGl0ZW1zID0gJC5ncmVwKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGF0Lm1hdGNoZXIoaXRlbSk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpdGVtcyA9IHRoaXMuc29ydGVyKGl0ZW1zKTtcclxuXHJcbiAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcihpdGVtcy5zbGljZSgwLCB0aGlzLm9wdGlvbnMuaXRlbXMpKS5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICwgdGVtcGxhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmJzVmVyc2lvbiA9PSAnMicpIHtcclxuICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJjb21ib2JveC1jb250YWluZXJcIj48aW5wdXQgdHlwZT1cImhpZGRlblwiIC8+IDxkaXYgY2xhc3M9XCJpbnB1dC1hcHBlbmRcIj4gPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwiZmFsc2VcIiAvPiA8c3BhbiBjbGFzcz1cImFkZC1vbiBkcm9wZG93bi10b2dnbGVcIiBkYXRhLWRyb3Bkb3duPVwiZHJvcGRvd25cIj4gPHNwYW4gY2xhc3M9XCJjYXJldFwiLz4gPGkgY2xhc3M9XCJpY29uLXJlbW92ZVwiLz4gPC9zcGFuPiA8L2Rpdj4gPC9kaXY+J1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImNvbWJvYm94LWNvbnRhaW5lclwiPiA8aW5wdXQgdHlwZT1cImhpZGRlblwiIC8+IDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPiA8aW5wdXQgdHlwZT1cInRleHRcIiBhdXRvY29tcGxldGU9XCJmYWxzZVwiIC8+IDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYWRkb24gZHJvcGRvd24tdG9nZ2xlXCIgZGF0YS1kcm9wZG93bj1cImRyb3Bkb3duXCI+IDxzcGFuIGNsYXNzPVwiY2FyZXRcIiAvPiA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXCIgLz4gPC9zcGFuPiA8L2Rpdj4gPC9kaXY+J1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICwgbWF0Y2hlcjogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIH5pdGVtLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih0aGlzLnF1ZXJ5LnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfVxyXG5cclxuICAsIHNvcnRlcjogZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgIHZhciBiZWdpbnN3aXRoID0gW11cclxuICAgICAgICAsIGNhc2VTZW5zaXRpdmUgPSBbXVxyXG4gICAgICAgICwgY2FzZUluc2Vuc2l0aXZlID0gW11cclxuICAgICAgICAsIGl0ZW07XHJcblxyXG4gICAgICB3aGlsZSAoaXRlbSA9IGl0ZW1zLnNoaWZ0KCkpIHtcclxuICAgICAgICBpZiAoIWl0ZW0udG9Mb3dlckNhc2UoKS5pbmRleE9mKHRoaXMucXVlcnkudG9Mb3dlckNhc2UoKSkpIHtiZWdpbnN3aXRoLnB1c2goaXRlbSk7fVxyXG4gICAgICAgIGVsc2UgaWYgKH5pdGVtLmluZGV4T2YodGhpcy5xdWVyeSkpIHtjYXNlU2Vuc2l0aXZlLnB1c2goaXRlbSk7fVxyXG4gICAgICAgIGVsc2Uge2Nhc2VJbnNlbnNpdGl2ZS5wdXNoKGl0ZW0pO31cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGJlZ2luc3dpdGguY29uY2F0KGNhc2VTZW5zaXRpdmUsIGNhc2VJbnNlbnNpdGl2ZSk7XHJcbiAgICB9XHJcblxyXG4gICwgaGlnaGxpZ2h0ZXI6IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcnkucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNcXHNdL2csICdcXFxcJCYnKTtcclxuICAgICAgcmV0dXJuIGl0ZW0ucmVwbGFjZShuZXcgUmVnRXhwKCcoJyArIHF1ZXJ5ICsgJyknLCAnaWcnKSwgZnVuY3Rpb24gKCQxLCBtYXRjaCkge1xyXG4gICAgICAgIHJldHVybiAnPHN0cm9uZz4nICsgbWF0Y2ggKyAnPC9zdHJvbmc+JztcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgLCByZW5kZXI6IGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICBpdGVtcyA9ICQoaXRlbXMpLm1hcChmdW5jdGlvbiAoaSwgaXRlbSkge1xyXG4gICAgICAgIGkgPSAkKHRoYXQub3B0aW9ucy5pdGVtKS5hdHRyKCdkYXRhLXZhbHVlJywgaXRlbSk7XHJcbiAgICAgICAgaS5maW5kKCdhJykuaHRtbCh0aGF0LmhpZ2hsaWdodGVyKGl0ZW0pKTtcclxuICAgICAgICByZXR1cm4gaVswXTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGl0ZW1zLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB0aGlzLiRtZW51Lmh0bWwoaXRlbXMpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgLCBuZXh0OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyIGFjdGl2ZSA9IHRoaXMuJG1lbnUuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgICwgbmV4dCA9IGFjdGl2ZS5uZXh0KCk7XHJcblxyXG4gICAgICBpZiAoIW5leHQubGVuZ3RoKSB7XHJcbiAgICAgICAgbmV4dCA9ICQodGhpcy4kbWVudS5maW5kKCdsaScpWzBdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbmV4dC5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICwgcHJldjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciBhY3RpdmUgPSB0aGlzLiRtZW51LmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAsIHByZXYgPSBhY3RpdmUucHJldigpO1xyXG5cclxuICAgICAgaWYgKCFwcmV2Lmxlbmd0aCkge1xyXG4gICAgICAgIHByZXYgPSB0aGlzLiRtZW51LmZpbmQoJ2xpJykubGFzdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmV2LmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgLCB0b2dnbGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICBpZiAodGhpcy4kY29udGFpbmVyLmhhc0NsYXNzKCdjb21ib2JveC1zZWxlY3RlZCcpKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhclRhcmdldCgpO1xyXG4gICAgICAgIHRoaXMudHJpZ2dlckNoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJFbGVtZW50KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd24pIHtcclxuICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNsZWFyRWxlbWVudCgpO1xyXG4gICAgICAgICAgdGhpcy5sb29rdXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gICwgc2Nyb2xsU2FmZXR5OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09ICdVTCcpIHtcclxuICAgICAgICAgIHRoaXMuJGVsZW1lbnQub2ZmKCdibHVyJyk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgLCBjbGVhckVsZW1lbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuJGVsZW1lbnQudmFsKCcnKS5mb2N1cygpO1xyXG4gIH1cclxuXHJcbiAgLCBjbGVhclRhcmdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy4kc291cmNlLnZhbCgnJyk7XHJcbiAgICB0aGlzLiR0YXJnZXQudmFsKCcnKTtcclxuICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnY29tYm9ib3gtc2VsZWN0ZWQnKTtcclxuICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gICwgdHJpZ2dlckNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy4kc291cmNlLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gIH1cclxuXHJcbiAgLCByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnNvdXJjZSA9IHRoaXMucGFyc2UoKTtcclxuICAgIHRoaXMub3B0aW9ucy5pdGVtcyA9IHRoaXMuc291cmNlLmxlbmd0aDtcclxuICB9XHJcblxyXG4gICwgbGlzdGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuJGVsZW1lbnRcclxuICAgICAgICAub24oJ2ZvY3VzJywgICAgJC5wcm94eSh0aGlzLmZvY3VzLCB0aGlzKSlcclxuICAgICAgICAub24oJ2JsdXInLCAgICAgJC5wcm94eSh0aGlzLmJsdXIsIHRoaXMpKVxyXG4gICAgICAgIC5vbigna2V5cHJlc3MnLCAkLnByb3h5KHRoaXMua2V5cHJlc3MsIHRoaXMpKVxyXG4gICAgICAgIC5vbigna2V5dXAnLCAgICAkLnByb3h5KHRoaXMua2V5dXAsIHRoaXMpKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmV2ZW50U3VwcG9ydGVkKCdrZXlkb3duJykpIHtcclxuICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKCdrZXlkb3duJywgJC5wcm94eSh0aGlzLmtleWRvd24sIHRoaXMpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy4kbWVudVxyXG4gICAgICAgIC5vbignY2xpY2snLCAkLnByb3h5KHRoaXMuY2xpY2ssIHRoaXMpKVxyXG4gICAgICAgIC5vbignbW91c2VlbnRlcicsICdsaScsICQucHJveHkodGhpcy5tb3VzZWVudGVyLCB0aGlzKSlcclxuICAgICAgICAub24oJ21vdXNlbGVhdmUnLCAnbGknLCAkLnByb3h5KHRoaXMubW91c2VsZWF2ZSwgdGhpcykpO1xyXG5cclxuICAgICAgdGhpcy4kYnV0dG9uXHJcbiAgICAgICAgLm9uKCdjbGljaycsICQucHJveHkodGhpcy50b2dnbGUsIHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgLCBldmVudFN1cHBvcnRlZDogZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgICAgIHZhciBpc1N1cHBvcnRlZCA9IGV2ZW50TmFtZSBpbiB0aGlzLiRlbGVtZW50O1xyXG4gICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgdGhpcy4kZWxlbWVudC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xyXG4gICAgICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIHRoaXMuJGVsZW1lbnRbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gaXNTdXBwb3J0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICwgbW92ZTogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgaWYgKCF0aGlzLnNob3duKSB7cmV0dXJuO31cclxuXHJcbiAgICAgIHN3aXRjaChlLmtleUNvZGUpIHtcclxuICAgICAgICBjYXNlIDk6IC8vIHRhYlxyXG4gICAgICAgIGNhc2UgMTM6IC8vIGVudGVyXHJcbiAgICAgICAgY2FzZSAyNzogLy8gZXNjYXBlXHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAzODogLy8gdXAgYXJyb3dcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHRoaXMucHJldigpO1xyXG4gICAgICAgICAgdGhpcy5maXhNZW51U2Nyb2xsKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSA0MDogLy8gZG93biBhcnJvd1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgdGhpcy5uZXh0KCk7XHJcbiAgICAgICAgICB0aGlzLmZpeE1lbnVTY3JvbGwoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAsIGZpeE1lbnVTY3JvbGw6IGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciBhY3RpdmUgPSB0aGlzLiRtZW51LmZpbmQoJy5hY3RpdmUnKTtcclxuICAgICAgaWYoYWN0aXZlLmxlbmd0aCl7XHJcbiAgICAgICAgICB2YXIgdG9wID0gYWN0aXZlLnBvc2l0aW9uKCkudG9wO1xyXG4gICAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGFjdGl2ZS5oZWlnaHQoKTtcclxuICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLiRtZW51LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgdmFyIG1lbnVIZWlnaHQgPSB0aGlzLiRtZW51LmhlaWdodCgpO1xyXG4gICAgICAgICAgaWYoYm90dG9tID4gbWVudUhlaWdodCl7XHJcbiAgICAgICAgICAgICAgdGhpcy4kbWVudS5zY3JvbGxUb3Aoc2Nyb2xsVG9wICsgYm90dG9tIC0gbWVudUhlaWdodCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYodG9wIDwgMCl7XHJcbiAgICAgICAgICAgICAgdGhpcy4kbWVudS5zY3JvbGxUb3Aoc2Nyb2xsVG9wICsgdG9wKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgLCBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB0aGlzLnN1cHByZXNzS2V5UHJlc3NSZXBlYXQgPSB+JC5pbkFycmF5KGUua2V5Q29kZSwgWzQwLDM4LDksMTMsMjddKTtcclxuICAgICAgdGhpcy5tb3ZlKGUpO1xyXG4gICAgfVxyXG5cclxuICAsIGtleXByZXNzOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBpZiAodGhpcy5zdXBwcmVzc0tleVByZXNzUmVwZWF0KSB7cmV0dXJuO31cclxuICAgICAgdGhpcy5tb3ZlKGUpO1xyXG4gICAgfVxyXG5cclxuICAsIGtleXVwOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgY2FzZSA0MDogLy8gZG93biBhcnJvd1xyXG4gICAgICAgICBpZiAoIXRoaXMuc2hvd24pe1xyXG4gICAgICAgICAgIHRoaXMudG9nZ2xlKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOTogLy8gcmlnaHQgYXJyb3dcclxuICAgICAgICBjYXNlIDM4OiAvLyB1cCBhcnJvd1xyXG4gICAgICAgIGNhc2UgMzc6IC8vIGxlZnQgYXJyb3dcclxuICAgICAgICBjYXNlIDM2OiAvLyBob21lXHJcbiAgICAgICAgY2FzZSAzNTogLy8gZW5kXHJcbiAgICAgICAgY2FzZSAxNjogLy8gc2hpZnRcclxuICAgICAgICBjYXNlIDE3OiAvLyBjdHJsXHJcbiAgICAgICAgY2FzZSAxODogLy8gYWx0XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSA5OiAvLyB0YWJcclxuICAgICAgICBjYXNlIDEzOiAvLyBlbnRlclxyXG4gICAgICAgICAgaWYgKCF0aGlzLnNob3duKSB7cmV0dXJuO31cclxuICAgICAgICAgIHRoaXMuc2VsZWN0KCk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAyNzogLy8gZXNjYXBlXHJcbiAgICAgICAgICBpZiAoIXRoaXMuc2hvd24pIHtyZXR1cm47fVxyXG4gICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRoaXMuY2xlYXJUYXJnZXQoKTtcclxuICAgICAgICAgIHRoaXMubG9va3VwKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gICwgZm9jdXM6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICwgYmx1cjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcclxuICAgICAgdmFyIHZhbCA9IHRoaXMuJGVsZW1lbnQudmFsKCk7XHJcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZCAmJiB2YWwgIT09ICcnICkge1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQudmFsKCcnKTtcclxuICAgICAgICB0aGlzLiRzb3VyY2UudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICB0aGlzLiR0YXJnZXQudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMubW91c2Vkb3ZlciAmJiB0aGlzLnNob3duKSB7c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRoYXQuaGlkZSgpOyB9LCAyMDApO31cclxuICAgIH1cclxuXHJcbiAgLCBjbGljazogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnNlbGVjdCgpO1xyXG4gICAgICB0aGlzLiRlbGVtZW50LmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICwgbW91c2VlbnRlcjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdGhpcy5tb3VzZWRvdmVyID0gdHJ1ZTtcclxuICAgICAgdGhpcy4kbWVudS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkKGUuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAsIG1vdXNlbGVhdmU6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHRoaXMubW91c2Vkb3ZlciA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qIENPTUJPQk9YIFBMVUdJTiBERUZJTklUSU9OXHJcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgJC5mbi5jb21ib2JveCA9IGZ1bmN0aW9uICggb3B0aW9uICkge1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcylcclxuICAgICAgICAsIGRhdGEgPSAkdGhpcy5kYXRhKCdjb21ib2JveCcpXHJcbiAgICAgICAgLCBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb247XHJcbiAgICAgIGlmKCFkYXRhKSB7JHRoaXMuZGF0YSgnY29tYm9ib3gnLCAoZGF0YSA9IG5ldyBDb21ib2JveCh0aGlzLCBvcHRpb25zKSkpO31cclxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIHtkYXRhW29wdGlvbl0oKTt9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkLmZuLmNvbWJvYm94LmRlZmF1bHRzID0ge1xyXG4gICAgYnNWZXJzaW9uOiAnMydcclxuICAsIG1lbnU6ICc8dWwgY2xhc3M9XCJ0eXBlYWhlYWQgdHlwZWFoZWFkLWxvbmcgZHJvcGRvd24tbWVudVwiPjwvdWw+J1xyXG4gICwgaXRlbTogJzxsaT48YSBocmVmPVwiI1wiPjwvYT48L2xpPidcclxuICB9O1xyXG5cclxuICAkLmZuLmNvbWJvYm94LkNvbnN0cnVjdG9yID0gQ29tYm9ib3g7XHJcblxyXG59KCB3aW5kb3cualF1ZXJ5ICk7XHJcbiIsIi8qISA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9OICA3LjEuMSAgICAgICAgICAgICAgXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfdHlwZW9mKGEpe3JldHVybiBhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZhLmNvbnN0cnVjdG9yPT09U3ltYm9sP1wic3ltYm9sXCI6dHlwZW9mIGF9LyohID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBib290c3RyYXAtc2xpZGVyLmpzXHJcbiAqXHJcbiAqIE1haW50YWluZXJzOlxyXG4gKlx0XHRLeWxlIEtlbXBcclxuICpcdFx0XHQtIFR3aXR0ZXI6IEBzZWl5cmlhXHJcbiAqXHRcdFx0LSBHaXRodWI6ICBzZWl5cmlhXHJcbiAqXHRcdFJvaGl0IEthbGt1clxyXG4gKlx0XHRcdC0gVHdpdHRlcjogQFJvdm9sdXRpb25hcnlcclxuICpcdFx0XHQtIEdpdGh1YjogIHJvdm9sdXRpb25cclxuICpcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4hZnVuY3Rpb24oYSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKXRyeXtkZWZpbmUoW1wianF1ZXJ5XCJdLGEpfWNhdGNoKGIpe2RlZmluZShbXSxhKX1lbHNlIGlmKFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIG1vZHVsZT9cInVuZGVmaW5lZFwiOl90eXBlb2YobW9kdWxlKSkmJm1vZHVsZS5leHBvcnRzKXt2YXIgYzt0cnl7Yz1yZXF1aXJlKFwianF1ZXJ5XCIpfWNhdGNoKGIpe2M9bnVsbH1tb2R1bGUuZXhwb3J0cz1hKGMpfWVsc2Ugd2luZG93JiYod2luZG93LlNsaWRlcj1hKHdpbmRvdy5qUXVlcnkpKX0oZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBjKGIpe2IucHJvdG90eXBlLm9wdGlvbnx8KGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiKXthLmlzUGxhaW5PYmplY3QoYikmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLGIpKX0pfWZ1bmN0aW9uIGUoYixjKXthLmZuW2JdPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtmb3IodmFyIGc9ZC5jYWxsKGFyZ3VtZW50cywxKSxoPTAsaT10aGlzLmxlbmd0aDtpPmg7aCsrKXt2YXIgaj10aGlzW2hdLGs9YS5kYXRhKGosYik7aWYoaylpZihhLmlzRnVuY3Rpb24oa1tlXSkmJlwiX1wiIT09ZS5jaGFyQXQoMCkpe3ZhciBsPWtbZV0uYXBwbHkoayxnKTtpZih2b2lkIDAhPT1sJiZsIT09aylyZXR1cm4gbH1lbHNlIGYoXCJubyBzdWNoIG1ldGhvZCAnXCIrZStcIicgZm9yIFwiK2IrXCIgaW5zdGFuY2VcIik7ZWxzZSBmKFwiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiBcIitiK1wiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBhdHRlbXB0ZWQgdG8gY2FsbCAnXCIrZStcIidcIil9cmV0dXJuIHRoaXN9dmFyIG09dGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZD1hLmRhdGEodGhpcyxiKTtyZXR1cm4gZD8oZC5vcHRpb24oZSksZC5faW5pdCgpKTooZD1uZXcgYyh0aGlzLGUpLGEuZGF0YSh0aGlzLGIsZCkpLGEodGhpcyl9KTtyZXR1cm4hbXx8bS5sZW5ndGg+MT9tOm1bMF19fWlmKGEpe3ZhciBmPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2I6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX07cmV0dXJuIGEuYnJpZGdldD1mdW5jdGlvbihhLGIpe2MoYiksZShhLGIpfSxhLmJyaWRnZXR9fXZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZTtjKGEpfShhKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBjKGIsYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVwiZGF0YS1zbGlkZXItXCIrYi5yZXBsYWNlKC9fL2csXCItXCIpLGQ9YS5nZXRBdHRyaWJ1dGUoYyk7dHJ5e3JldHVybiBKU09OLnBhcnNlKGQpfWNhdGNoKGUpe3JldHVybiBkfX10aGlzLl9zdGF0ZT17dmFsdWU6bnVsbCxlbmFibGVkOm51bGwsb2Zmc2V0Om51bGwsc2l6ZTpudWxsLHBlcmNlbnRhZ2U6bnVsbCxpbkRyYWc6ITEsb3ZlcjohMX0sXCJzdHJpbmdcIj09dHlwZW9mIGI/dGhpcy5lbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYik6YiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYodGhpcy5lbGVtZW50PWIpLGM9Yz9jOnt9O2Zvcih2YXIgZj1PYmplY3Qua2V5cyh0aGlzLmRlZmF1bHRPcHRpb25zKSxnPTA7ZzxmLmxlbmd0aDtnKyspe3ZhciBoPWZbZ10saT1jW2hdO2k9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGk/aTpkKHRoaXMuZWxlbWVudCxoKSxpPW51bGwhPT1pP2k6dGhpcy5kZWZhdWx0T3B0aW9uc1toXSx0aGlzLm9wdGlvbnN8fCh0aGlzLm9wdGlvbnM9e30pLHRoaXMub3B0aW9uc1toXT1pfVwidmVydGljYWxcIiE9PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbnx8XCJ0b3BcIiE9PXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uJiZcImJvdHRvbVwiIT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24/XCJob3Jpem9udGFsXCIhPT10aGlzLm9wdGlvbnMub3JpZW50YXRpb258fFwibGVmdFwiIT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24mJlwicmlnaHRcIiE9PXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9ufHwodGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb249XCJ0b3BcIik6dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb249XCJyaWdodFwiO3ZhciBqLGssbCxtLG4sbz10aGlzLmVsZW1lbnQuc3R5bGUud2lkdGgscD0hMSxxPXRoaXMuZWxlbWVudC5wYXJlbnROb2RlO2lmKHRoaXMuc2xpZGVyRWxlbSlwPSEwO2Vsc2V7dGhpcy5zbGlkZXJFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5zbGlkZXJFbGVtLmNsYXNzTmFtZT1cInNsaWRlclwiO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ci5jbGFzc05hbWU9XCJzbGlkZXItdHJhY2tcIixrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksay5jbGFzc05hbWU9XCJzbGlkZXItdHJhY2stbG93XCIsaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGouY2xhc3NOYW1lPVwic2xpZGVyLXNlbGVjdGlvblwiLGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxsLmNsYXNzTmFtZT1cInNsaWRlci10cmFjay1oaWdoXCIsbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG0uY2xhc3NOYW1lPVwic2xpZGVyLWhhbmRsZSBtaW4tc2xpZGVyLWhhbmRsZVwiLG0uc2V0QXR0cmlidXRlKFwicm9sZVwiLFwic2xpZGVyXCIpLG0uc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZW1pblwiLHRoaXMub3B0aW9ucy5taW4pLG0uc2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZW1heFwiLHRoaXMub3B0aW9ucy5tYXgpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuLmNsYXNzTmFtZT1cInNsaWRlci1oYW5kbGUgbWF4LXNsaWRlci1oYW5kbGVcIixuLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInNsaWRlclwiKSxuLnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVtaW5cIix0aGlzLm9wdGlvbnMubWluKSxuLnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVtYXhcIix0aGlzLm9wdGlvbnMubWF4KSxyLmFwcGVuZENoaWxkKGspLHIuYXBwZW5kQ2hpbGQoaiksci5hcHBlbmRDaGlsZChsKTt2YXIgcz1BcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy5sYWJlbGxlZGJ5KTtpZihzJiZ0aGlzLm9wdGlvbnMubGFiZWxsZWRieVswXSYmbS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIix0aGlzLm9wdGlvbnMubGFiZWxsZWRieVswXSkscyYmdGhpcy5vcHRpb25zLmxhYmVsbGVkYnlbMV0mJm4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsdGhpcy5vcHRpb25zLmxhYmVsbGVkYnlbMV0pLCFzJiZ0aGlzLm9wdGlvbnMubGFiZWxsZWRieSYmKG0uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsdGhpcy5vcHRpb25zLmxhYmVsbGVkYnkpLG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsdGhpcy5vcHRpb25zLmxhYmVsbGVkYnkpKSx0aGlzLnRpY2tzPVtdLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzKSYmdGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aD4wKXtmb3IoZz0wO2c8dGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aDtnKyspe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJzbGlkZXItdGlja1wiLHRoaXMudGlja3MucHVzaCh0KSxyLmFwcGVuZENoaWxkKHQpfWouY2xhc3NOYW1lKz1cIiB0aWNrLXNsaWRlci1zZWxlY3Rpb25cIn1pZihyLmFwcGVuZENoaWxkKG0pLHIuYXBwZW5kQ2hpbGQobiksdGhpcy50aWNrTGFiZWxzPVtdLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzX2xhYmVscykmJnRoaXMub3B0aW9ucy50aWNrc19sYWJlbHMubGVuZ3RoPjApZm9yKHRoaXMudGlja0xhYmVsQ29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy50aWNrTGFiZWxDb250YWluZXIuY2xhc3NOYW1lPVwic2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVyXCIsZz0wO2c8dGhpcy5vcHRpb25zLnRpY2tzX2xhYmVscy5sZW5ndGg7ZysrKXt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHY9MD09PXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoLHc9dGhpcy5vcHRpb25zLnJldmVyc2VkJiZ2P3RoaXMub3B0aW9ucy50aWNrc19sYWJlbHMubGVuZ3RoLShnKzEpOmc7dS5jbGFzc05hbWU9XCJzbGlkZXItdGljay1sYWJlbFwiLHUuaW5uZXJIVE1MPXRoaXMub3B0aW9ucy50aWNrc19sYWJlbHNbd10sdGhpcy50aWNrTGFiZWxzLnB1c2godSksdGhpcy50aWNrTGFiZWxDb250YWluZXIuYXBwZW5kQ2hpbGQodSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtiLmNsYXNzTmFtZT1cInRvb2x0aXAtYXJyb3dcIjt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPVwidG9vbHRpcC1pbm5lclwiLGEuYXBwZW5kQ2hpbGQoYiksYS5hcHBlbmRDaGlsZChjKX0seT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3kuY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1haW5cIix5LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSx4KHkpO3ZhciB6PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ei5jbGFzc05hbWU9XCJ0b29sdGlwIHRvb2x0aXAtbWluXCIsei5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIikseCh6KTt2YXIgQT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0EuY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1heFwiLEEuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLHgoQSksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKHIpLHRoaXMuc2xpZGVyRWxlbS5hcHBlbmRDaGlsZCh5KSx0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQoeiksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKEEpLHRoaXMudGlja0xhYmVsQ29udGFpbmVyJiZ0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQodGhpcy50aWNrTGFiZWxDb250YWluZXIpLHEuaW5zZXJ0QmVmb3JlKHRoaXMuc2xpZGVyRWxlbSx0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifWlmKGEmJih0aGlzLiRlbGVtZW50PWEodGhpcy5lbGVtZW50KSx0aGlzLiRzbGlkZXJFbGVtPWEodGhpcy5zbGlkZXJFbGVtKSksdGhpcy5ldmVudFRvQ2FsbGJhY2tNYXA9e30sdGhpcy5zbGlkZXJFbGVtLmlkPXRoaXMub3B0aW9ucy5pZCx0aGlzLnRvdWNoQ2FwYWJsZT1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCx0aGlzLnRvdWNoWD0wLHRoaXMudG91Y2hZPTAsdGhpcy50b29sdGlwPXRoaXMuc2xpZGVyRWxlbS5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtbWFpblwiKSx0aGlzLnRvb2x0aXBJbm5lcj10aGlzLnRvb2x0aXAucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLWlubmVyXCIpLHRoaXMudG9vbHRpcF9taW49dGhpcy5zbGlkZXJFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1taW5cIiksdGhpcy50b29sdGlwSW5uZXJfbWluPXRoaXMudG9vbHRpcF9taW4ucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLWlubmVyXCIpLHRoaXMudG9vbHRpcF9tYXg9dGhpcy5zbGlkZXJFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1tYXhcIiksdGhpcy50b29sdGlwSW5uZXJfbWF4PXRoaXMudG9vbHRpcF9tYXgucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLWlubmVyXCIpLGVbdGhpcy5vcHRpb25zLnNjYWxlXSYmKHRoaXMub3B0aW9ucy5zY2FsZT1lW3RoaXMub3B0aW9ucy5zY2FsZV0pLHA9PT0hMCYmKHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci1ob3Jpem9udGFsXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci12ZXJ0aWNhbFwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXAsXCJoaWRlXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9taW4sXCJoaWRlXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJoaWRlXCIpLFtcImxlZnRcIixcInRvcFwiLFwid2lkdGhcIixcImhlaWdodFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuX3JlbW92ZVByb3BlcnR5KHRoaXMudHJhY2tMb3csYSksdGhpcy5fcmVtb3ZlUHJvcGVydHkodGhpcy50cmFja1NlbGVjdGlvbixhKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eSh0aGlzLnRyYWNrSGlnaCxhKX0sdGhpcyksW3RoaXMuaGFuZGxlMSx0aGlzLmhhbmRsZTJdLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcImxlZnRcIiksdGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcInRvcFwiKX0sdGhpcyksW3RoaXMudG9vbHRpcCx0aGlzLnRvb2x0aXBfbWluLHRoaXMudG9vbHRpcF9tYXhdLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcImxlZnRcIiksdGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcInRvcFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibWFyZ2luLWxlZnRcIiksdGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcIm1hcmdpbi10b3BcIiksdGhpcy5fcmVtb3ZlQ2xhc3MoYSxcInJpZ2h0XCIpLHRoaXMuX3JlbW92ZUNsYXNzKGEsXCJ0b3BcIil9LHRoaXMpKSxcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/KHRoaXMuX2FkZENsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci12ZXJ0aWNhbFwiKSx0aGlzLnN0eWxlUG9zPVwidG9wXCIsdGhpcy5tb3VzZVBvcz1cInBhZ2VZXCIsdGhpcy5zaXplUG9zPVwib2Zmc2V0SGVpZ2h0XCIpOih0aGlzLl9hZGRDbGFzcyh0aGlzLnNsaWRlckVsZW0sXCJzbGlkZXItaG9yaXpvbnRhbFwiKSx0aGlzLnNsaWRlckVsZW0uc3R5bGUud2lkdGg9byx0aGlzLm9wdGlvbnMub3JpZW50YXRpb249XCJob3Jpem9udGFsXCIsdGhpcy5zdHlsZVBvcz1cImxlZnRcIix0aGlzLm1vdXNlUG9zPVwicGFnZVhcIix0aGlzLnNpemVQb3M9XCJvZmZzZXRXaWR0aFwiKSx0aGlzLl9zZXRUb29sdGlwUG9zaXRpb24oKSxBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy50aWNrcykmJnRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg+MCYmKHRoaXMub3B0aW9ucy5tYXg9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpLHRoaXMub3B0aW9ucy5taW49TWF0aC5taW4uYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpKSxBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy52YWx1ZSk/KHRoaXMub3B0aW9ucy5yYW5nZT0hMCx0aGlzLl9zdGF0ZS52YWx1ZT10aGlzLm9wdGlvbnMudmFsdWUpOnRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZT1bdGhpcy5vcHRpb25zLnZhbHVlLHRoaXMub3B0aW9ucy5tYXhdOnRoaXMuX3N0YXRlLnZhbHVlPXRoaXMub3B0aW9ucy52YWx1ZSx0aGlzLnRyYWNrTG93PWt8fHRoaXMudHJhY2tMb3csdGhpcy50cmFja1NlbGVjdGlvbj1qfHx0aGlzLnRyYWNrU2VsZWN0aW9uLHRoaXMudHJhY2tIaWdoPWx8fHRoaXMudHJhY2tIaWdoLFwibm9uZVwiPT09dGhpcy5vcHRpb25zLnNlbGVjdGlvbiYmKHRoaXMuX2FkZENsYXNzKHRoaXMudHJhY2tMb3csXCJoaWRlXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudHJhY2tTZWxlY3Rpb24sXCJoaWRlXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudHJhY2tIaWdoLFwiaGlkZVwiKSksdGhpcy5oYW5kbGUxPW18fHRoaXMuaGFuZGxlMSx0aGlzLmhhbmRsZTI9bnx8dGhpcy5oYW5kbGUyLHA9PT0hMClmb3IodGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5oYW5kbGUxLFwicm91bmQgdHJpYW5nbGVcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5oYW5kbGUyLFwicm91bmQgdHJpYW5nbGUgaGlkZVwiKSxnPTA7Zzx0aGlzLnRpY2tzLmxlbmd0aDtnKyspdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50aWNrc1tnXSxcInJvdW5kIHRyaWFuZ2xlIGhpZGVcIik7dmFyIEI9W1wicm91bmRcIixcInRyaWFuZ2xlXCIsXCJjdXN0b21cIl0sQz0tMSE9PUIuaW5kZXhPZih0aGlzLm9wdGlvbnMuaGFuZGxlKTtpZihDKWZvcih0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZTEsdGhpcy5vcHRpb25zLmhhbmRsZSksdGhpcy5fYWRkQ2xhc3ModGhpcy5oYW5kbGUyLHRoaXMub3B0aW9ucy5oYW5kbGUpLGc9MDtnPHRoaXMudGlja3MubGVuZ3RoO2crKyl0aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2ddLHRoaXMub3B0aW9ucy5oYW5kbGUpO3RoaXMuX3N0YXRlLm9mZnNldD10aGlzLl9vZmZzZXQodGhpcy5zbGlkZXJFbGVtKSx0aGlzLl9zdGF0ZS5zaXplPXRoaXMuc2xpZGVyRWxlbVt0aGlzLnNpemVQb3NdLHRoaXMuc2V0VmFsdWUodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuaGFuZGxlMUtleWRvd249dGhpcy5fa2V5ZG93bi5iaW5kKHRoaXMsMCksdGhpcy5oYW5kbGUxLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5oYW5kbGUxS2V5ZG93biwhMSksdGhpcy5oYW5kbGUyS2V5ZG93bj10aGlzLl9rZXlkb3duLmJpbmQodGhpcywxKSx0aGlzLmhhbmRsZTIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLmhhbmRsZTJLZXlkb3duLCExKSx0aGlzLm1vdXNlZG93bj10aGlzLl9tb3VzZWRvd24uYmluZCh0aGlzKSx0aGlzLnRvdWNoc3RhcnQ9dGhpcy5fdG91Y2hzdGFydC5iaW5kKHRoaXMpLHRoaXMudG91Y2htb3ZlPXRoaXMuX3RvdWNobW92ZS5iaW5kKHRoaXMpLHRoaXMudG91Y2hDYXBhYmxlJiYodGhpcy5zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy50b3VjaHN0YXJ0LCExKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMudG91Y2htb3ZlLCExKSksdGhpcy5zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm1vdXNlZG93biwhMSksdGhpcy5yZXNpemU9dGhpcy5fcmVzaXplLmJpbmQodGhpcyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlc2l6ZSwhMSksXCJoaWRlXCI9PT10aGlzLm9wdGlvbnMudG9vbHRpcD8odGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWluLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaGlkZVwiKSk6XCJhbHdheXNcIj09PXRoaXMub3B0aW9ucy50b29sdGlwPyh0aGlzLl9zaG93VG9vbHRpcCgpLHRoaXMuX2Fsd2F5c1Nob3dUb29sdGlwPSEwKToodGhpcy5zaG93VG9vbHRpcD10aGlzLl9zaG93VG9vbHRpcC5iaW5kKHRoaXMpLHRoaXMuaGlkZVRvb2x0aXA9dGhpcy5faGlkZVRvb2x0aXAuYmluZCh0aGlzKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0aGlzLnNob3dUb29sdGlwLCExKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLmhpZGVUb29sdGlwLCExKSx0aGlzLmhhbmRsZTEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5oYW5kbGUxLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuc2hvd1Rvb2x0aXAsITEpLHRoaXMuaGFuZGxlMi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuaGlkZVRvb2x0aXAsITEpKSx0aGlzLm9wdGlvbnMuZW5hYmxlZD90aGlzLmVuYWJsZSgpOnRoaXMuZGlzYWJsZSgpfXZhciBkPXtmb3JtYXRJbnZhbGlkSW5wdXRFcnJvck1zZzpmdW5jdGlvbihhKXtyZXR1cm5cIkludmFsaWQgaW5wdXQgdmFsdWUgJ1wiK2ErXCInIHBhc3NlZCBpblwifSxjYWxsaW5nQ29udGV4dE5vdFNsaWRlckluc3RhbmNlOlwiQ2FsbGluZyBjb250ZXh0IGVsZW1lbnQgZG9lcyBub3QgaGF2ZSBpbnN0YW5jZSBvZiBTbGlkZXIgYm91bmQgdG8gaXQuIENoZWNrIHlvdXIgY29kZSB0byBtYWtlIHN1cmUgdGhlIEpRdWVyeSBvYmplY3QgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbCB0byB0aGUgc2xpZGVyKCkgaW5pdGlhbGl6ZXIgaXMgY2FsbGluZyB0aGUgbWV0aG9kXCJ9LGU9e2xpbmVhcjp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1hLzEwMCoodGhpcy5vcHRpb25zLm1heC10aGlzLm9wdGlvbnMubWluKSxjPSEwO2lmKHRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoPjApe2Zvcih2YXIgZCxlLGYsZz0wLGg9MTtoPHRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoO2grKylpZihhPD10aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zW2hdKXtkPXRoaXMub3B0aW9ucy50aWNrc1toLTFdLGY9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toLTFdLGU9dGhpcy5vcHRpb25zLnRpY2tzW2hdLGc9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toXTticmVha312YXIgaT0oYS1mKS8oZy1mKTtiPWQraSooZS1kKSxjPSExfXZhciBqPWM/dGhpcy5vcHRpb25zLm1pbjowLGs9aitNYXRoLnJvdW5kKGIvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwO3JldHVybiBrPHRoaXMub3B0aW9ucy5taW4/dGhpcy5vcHRpb25zLm1pbjprPnRoaXMub3B0aW9ucy5tYXg/dGhpcy5vcHRpb25zLm1heDprfSx0b1BlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5vcHRpb25zLm1heD09PXRoaXMub3B0aW9ucy5taW4pcmV0dXJuIDA7aWYodGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9ucy5sZW5ndGg+MCl7Zm9yKHZhciBiLGMsZCxlPTAsZj0wO2Y8dGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aDtmKyspaWYoYTw9dGhpcy5vcHRpb25zLnRpY2tzW2ZdKXtiPWY+MD90aGlzLm9wdGlvbnMudGlja3NbZi0xXTowLGQ9Zj4wP3RoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZi0xXTowLGM9dGhpcy5vcHRpb25zLnRpY2tzW2ZdLGU9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tmXTticmVha31pZihmPjApe3ZhciBnPShhLWIpLyhjLWIpO3JldHVybiBkK2cqKGUtZCl9fXJldHVybiAxMDAqKGEtdGhpcy5vcHRpb25zLm1pbikvKHRoaXMub3B0aW9ucy5tYXgtdGhpcy5vcHRpb25zLm1pbil9fSxsb2dhcml0aG1pYzp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj0wPT09dGhpcy5vcHRpb25zLm1pbj8wOk1hdGgubG9nKHRoaXMub3B0aW9ucy5taW4pLGM9TWF0aC5sb2codGhpcy5vcHRpb25zLm1heCksZD1NYXRoLmV4cChiKyhjLWIpKmEvMTAwKTtyZXR1cm4gZD10aGlzLm9wdGlvbnMubWluK01hdGgucm91bmQoKGQtdGhpcy5vcHRpb25zLm1pbikvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwLGQ8dGhpcy5vcHRpb25zLm1pbj90aGlzLm9wdGlvbnMubWluOmQ+dGhpcy5vcHRpb25zLm1heD90aGlzLm9wdGlvbnMubWF4OmR9LHRvUGVyY2VudGFnZTpmdW5jdGlvbihhKXtpZih0aGlzLm9wdGlvbnMubWF4PT09dGhpcy5vcHRpb25zLm1pbilyZXR1cm4gMDt2YXIgYj1NYXRoLmxvZyh0aGlzLm9wdGlvbnMubWF4KSxjPTA9PT10aGlzLm9wdGlvbnMubWluPzA6TWF0aC5sb2codGhpcy5vcHRpb25zLm1pbiksZD0wPT09YT8wOk1hdGgubG9nKGEpO3JldHVybiAxMDAqKGQtYykvKGItYyl9fX07aWYoYj1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNhbGwodGhpcyxhLGIpLHRoaXN9LGIucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbigpe30sY29uc3RydWN0b3I6YixkZWZhdWx0T3B0aW9uczp7aWQ6XCJcIixtaW46MCxtYXg6MTAsc3RlcDoxLHByZWNpc2lvbjowLG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLHZhbHVlOjUscmFuZ2U6ITEsc2VsZWN0aW9uOlwiYmVmb3JlXCIsdG9vbHRpcDpcInNob3dcIix0b29sdGlwX3NwbGl0OiExLGhhbmRsZTpcInJvdW5kXCIscmV2ZXJzZWQ6ITEsZW5hYmxlZDohMCxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/YVswXStcIiA6IFwiK2FbMV06YX0sbmF0dXJhbF9hcnJvd19rZXlzOiExLHRpY2tzOltdLHRpY2tzX3Bvc2l0aW9uczpbXSx0aWNrc19sYWJlbHM6W10sdGlja3Nfc25hcF9ib3VuZHM6MCxzY2FsZTpcImxpbmVhclwiLGZvY3VzOiExLHRvb2x0aXBfcG9zaXRpb246bnVsbCxsYWJlbGxlZGJ5Om51bGx9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zbGlkZXJFbGVtfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMucmFuZ2U/dGhpcy5fc3RhdGUudmFsdWU6dGhpcy5fc3RhdGUudmFsdWVbMF19LHNldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXthfHwoYT0wKTt2YXIgZD10aGlzLmdldFZhbHVlKCk7dGhpcy5fc3RhdGUudmFsdWU9dGhpcy5fdmFsaWRhdGVJbnB1dFZhbHVlKGEpO3ZhciBlPXRoaXMuX2FwcGx5UHJlY2lzaW9uLmJpbmQodGhpcyk7dGhpcy5vcHRpb25zLnJhbmdlPyh0aGlzLl9zdGF0ZS52YWx1ZVswXT1lKHRoaXMuX3N0YXRlLnZhbHVlWzBdKSx0aGlzLl9zdGF0ZS52YWx1ZVsxXT1lKHRoaXMuX3N0YXRlLnZhbHVlWzFdKSx0aGlzLl9zdGF0ZS52YWx1ZVswXT1NYXRoLm1heCh0aGlzLm9wdGlvbnMubWluLE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsdGhpcy5fc3RhdGUudmFsdWVbMF0pKSx0aGlzLl9zdGF0ZS52YWx1ZVsxXT1NYXRoLm1heCh0aGlzLm9wdGlvbnMubWluLE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsdGhpcy5fc3RhdGUudmFsdWVbMV0pKSk6KHRoaXMuX3N0YXRlLnZhbHVlPWUodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuX3N0YXRlLnZhbHVlPVtNYXRoLm1heCh0aGlzLm9wdGlvbnMubWluLE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsdGhpcy5fc3RhdGUudmFsdWUpKV0sdGhpcy5fYWRkQ2xhc3ModGhpcy5oYW5kbGUyLFwiaGlkZVwiKSxcImFmdGVyXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uP3RoaXMuX3N0YXRlLnZhbHVlWzFdPXRoaXMub3B0aW9ucy5tYXg6dGhpcy5fc3RhdGUudmFsdWVbMV09dGhpcy5vcHRpb25zLm1pbiksdGhpcy5vcHRpb25zLm1heD50aGlzLm9wdGlvbnMubWluP3RoaXMuX3N0YXRlLnBlcmNlbnRhZ2U9W3RoaXMuX3RvUGVyY2VudGFnZSh0aGlzLl9zdGF0ZS52YWx1ZVswXSksdGhpcy5fdG9QZXJjZW50YWdlKHRoaXMuX3N0YXRlLnZhbHVlWzFdKSwxMDAqdGhpcy5vcHRpb25zLnN0ZXAvKHRoaXMub3B0aW9ucy5tYXgtdGhpcy5vcHRpb25zLm1pbildOnRoaXMuX3N0YXRlLnBlcmNlbnRhZ2U9WzAsMCwxMDBdLHRoaXMuX2xheW91dCgpO3ZhciBmPXRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZTp0aGlzLl9zdGF0ZS52YWx1ZVswXTtyZXR1cm4gdGhpcy5fc2V0RGF0YVZhbChmKSxiPT09ITAmJnRoaXMuX3RyaWdnZXIoXCJzbGlkZVwiLGYpLGQhPT1mJiZjPT09ITAmJnRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIix7b2xkVmFsdWU6ZCxuZXdWYWx1ZTpmfSksdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZVNsaWRlckV2ZW50SGFuZGxlcnMoKSx0aGlzLnNsaWRlckVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fY2xlYW5VcEV2ZW50Q2FsbGJhY2tzTWFwKCksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGFcIiksYSYmKHRoaXMuX3VuYmluZEpRdWVyeUV2ZW50SGFuZGxlcnMoKSx0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoXCJzbGlkZXJcIikpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITEsdGhpcy5oYW5kbGUxLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpLHRoaXMuaGFuZGxlMi5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnNsaWRlckVsZW0sXCJzbGlkZXItZGlzYWJsZWRcIiksdGhpcy5fdHJpZ2dlcihcInNsaWRlRGlzYWJsZWRcIiksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITAsdGhpcy5oYW5kbGUxLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5oYW5kbGUyLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLWRpc2FibGVkXCIpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZUVuYWJsZWRcIiksdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKSx0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZW5hYmxlZH0sb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyKGEsYiksdGhpc30sb2ZmOmZ1bmN0aW9uKGIsYyl7YT8odGhpcy4kZWxlbWVudC5vZmYoYixjKSx0aGlzLiRzbGlkZXJFbGVtLm9mZihiLGMpKTp0aGlzLl91bmJpbmROb25RdWVyeUV2ZW50SGFuZGxlcihiLGMpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5vcHRpb25zW2FdOnRoaXMub3B0aW9uc30sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub3B0aW9uc1thXT1iLHRoaXN9LHJlZnJlc2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVycygpLGMuY2FsbCh0aGlzLHRoaXMuZWxlbWVudCx0aGlzLm9wdGlvbnMpLGEmJmEuZGF0YSh0aGlzLmVsZW1lbnQsXCJzbGlkZXJcIix0aGlzKSx0aGlzfSxyZWxheW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNpemUoKSx0aGlzLl9sYXlvdXQoKSx0aGlzfSxfcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuaGFuZGxlMS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMUtleWRvd24sITEpLHRoaXMuaGFuZGxlMi5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMktleWRvd24sITEpLHRoaXMuc2hvd1Rvb2x0aXAmJih0aGlzLmhhbmRsZTEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuc2hvd1Rvb2x0aXAsITEpKSx0aGlzLmhpZGVUb29sdGlwJiYodGhpcy5oYW5kbGUxLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSkpLHRoaXMuc2hvd1Rvb2x0aXAmJnRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMuc2hvd1Rvb2x0aXAsITEpLHRoaXMuaGlkZVRvb2x0aXAmJnRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLHRoaXMuaGlkZVRvb2x0aXAsITEpLHRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMudG91Y2hzdGFydCwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLnRvdWNobW92ZSwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm1vdXNlZG93biwhMSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlc2l6ZSwhMSl9LF9iaW5kTm9uUXVlcnlFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT10aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXSYmKHRoaXMuZXZlbnRUb0NhbGxiYWNrTWFwW2FdPVtdKSx0aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXS5wdXNoKGIpfSxfdW5iaW5kTm9uUXVlcnlFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXTtpZih2b2lkIDAhPT1jKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKGNbZF09PT1iKXtjLnNwbGljZShkLDEpO2JyZWFrfX0sX2NsZWFuVXBFdmVudENhbGxiYWNrc01hcDpmdW5jdGlvbigpe2Zvcih2YXIgYT1PYmplY3Qua2V5cyh0aGlzLmV2ZW50VG9DYWxsYmFja01hcCksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO3RoaXMuZXZlbnRUb0NhbGxiYWNrTWFwW2NdPW51bGx9fSxfc2hvd1Rvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMudG9vbHRpcF9zcGxpdD09PSExPyh0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXAsXCJpblwiKSx0aGlzLnRvb2x0aXBfbWluLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy50b29sdGlwX21heC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKToodGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21pbixcImluXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJpblwiKSx0aGlzLnRvb2x0aXAuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksdGhpcy5fc3RhdGUub3Zlcj0hMH0sX2hpZGVUb29sdGlwOmZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUuaW5EcmFnPT09ITEmJnRoaXMuYWx3YXlzU2hvd1Rvb2x0aXAhPT0hMCYmKHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcCxcImluXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9taW4sXCJpblwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaW5cIikpLHRoaXMuX3N0YXRlLm92ZXI9ITF9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYTtpZihhPXRoaXMub3B0aW9ucy5yZXZlcnNlZD9bMTAwLXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0sdGhpcy5vcHRpb25zLnJhbmdlPzEwMC10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdOnRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV1dOlt0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdLHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV1dLHRoaXMuaGFuZGxlMS5zdHlsZVt0aGlzLnN0eWxlUG9zXT1hWzBdK1wiJVwiLHRoaXMuaGFuZGxlMS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbm93XCIsdGhpcy5fc3RhdGUudmFsdWVbMF0pLHRoaXMuaGFuZGxlMi5zdHlsZVt0aGlzLnN0eWxlUG9zXT1hWzFdK1wiJVwiLHRoaXMuaGFuZGxlMi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbm93XCIsdGhpcy5fc3RhdGUudmFsdWVbMV0pLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzKSYmdGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aD4wKXt2YXIgYj1cInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/XCJoZWlnaHRcIjpcIndpZHRoXCIsYz1cInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/XCJtYXJnaW5Ub3BcIjpcIm1hcmdpbkxlZnRcIixkPXRoaXMuX3N0YXRlLnNpemUvKHRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGgtMSk7aWYodGhpcy50aWNrTGFiZWxDb250YWluZXIpe3ZhciBlPTA7aWYoMD09PXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoKVwidmVydGljYWxcIiE9PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbiYmKHRoaXMudGlja0xhYmVsQ29udGFpbmVyLnN0eWxlW2NdPS1kLzIrXCJweFwiKSxlPXRoaXMudGlja0xhYmVsQ29udGFpbmVyLm9mZnNldEhlaWdodDtlbHNlIGZvcihmPTA7Zjx0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aDtmKyspdGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1tmXS5vZmZzZXRIZWlnaHQ+ZSYmKGU9dGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1tmXS5vZmZzZXRIZWlnaHQpO1wiaG9yaXpvbnRhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uJiYodGhpcy5zbGlkZXJFbGVtLnN0eWxlLm1hcmdpbkJvdHRvbT1lK1wicHhcIil9Zm9yKHZhciBmPTA7Zjx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2YrKyl7dmFyIGc9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tmXXx8dGhpcy5fdG9QZXJjZW50YWdlKHRoaXMub3B0aW9ucy50aWNrc1tmXSk7dGhpcy5vcHRpb25zLnJldmVyc2VkJiYoZz0xMDAtZyksdGhpcy50aWNrc1tmXS5zdHlsZVt0aGlzLnN0eWxlUG9zXT1nK1wiJVwiLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudGlja3NbZl0sXCJpbi1zZWxlY3Rpb25cIiksdGhpcy5vcHRpb25zLnJhbmdlP2c+PWFbMF0mJmc8PWFbMV0mJnRoaXMuX2FkZENsYXNzKHRoaXMudGlja3NbZl0sXCJpbi1zZWxlY3Rpb25cIik6XCJhZnRlclwiPT09dGhpcy5vcHRpb25zLnNlbGVjdGlvbiYmZz49YVswXT90aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2ZdLFwiaW4tc2VsZWN0aW9uXCIpOlwiYmVmb3JlXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uJiZnPD1hWzBdJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2ZdLFwiaW4tc2VsZWN0aW9uXCIpLHRoaXMudGlja0xhYmVsc1tmXSYmKHRoaXMudGlja0xhYmVsc1tmXS5zdHlsZVtiXT1kK1wicHhcIixcInZlcnRpY2FsXCIhPT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJnZvaWQgMCE9PXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZl0/KHRoaXMudGlja0xhYmVsc1tmXS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy50aWNrTGFiZWxzW2ZdLnN0eWxlW3RoaXMuc3R5bGVQb3NdPWcrXCIlXCIsdGhpcy50aWNrTGFiZWxzW2ZdLnN0eWxlW2NdPS1kLzIrXCJweFwiKTpcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJih0aGlzLnRpY2tMYWJlbHNbZl0uc3R5bGUubWFyZ2luTGVmdD10aGlzLnNsaWRlckVsZW0ub2Zmc2V0V2lkdGgrXCJweFwiLHRoaXMudGlja0xhYmVsQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcD10aGlzLnNsaWRlckVsZW0ub2Zmc2V0V2lkdGgvMiotMStcInB4XCIpKX19dmFyIGg7aWYodGhpcy5vcHRpb25zLnJhbmdlKXtoPXRoaXMub3B0aW9ucy5mb3JtYXR0ZXIodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuX3NldFRleHQodGhpcy50b29sdGlwSW5uZXIsaCksdGhpcy50b29sdGlwLnN0eWxlW3RoaXMuc3R5bGVQb3NdPShhWzFdK2FbMF0pLzIrXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tdG9wXCIsLXRoaXMudG9vbHRpcC5vZmZzZXRIZWlnaHQvMitcInB4XCIpOnRoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGgvMitcInB4XCIpLFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj90aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0SGVpZ2h0LzIrXCJweFwiKTp0aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLWxlZnRcIiwtdGhpcy50b29sdGlwLm9mZnNldFdpZHRoLzIrXCJweFwiKTt2YXIgaT10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzBdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21pbixpKTt2YXIgaj10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzFdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21heCxqKSx0aGlzLnRvb2x0aXBfbWluLnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMF0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWluLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9taW4sXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldFdpZHRoLzIrXCJweFwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMV0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWF4LFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9tYXgsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldFdpZHRoLzIrXCJweFwiKX1lbHNlIGg9dGhpcy5vcHRpb25zLmZvcm1hdHRlcih0aGlzLl9zdGF0ZS52YWx1ZVswXSksdGhpcy5fc2V0VGV4dCh0aGlzLnRvb2x0aXBJbm5lcixoKSx0aGlzLnRvb2x0aXAuc3R5bGVbdGhpcy5zdHlsZVBvc109YVswXStcIiVcIixcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi10b3BcIiwtdGhpcy50b29sdGlwLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi1sZWZ0XCIsLXRoaXMudG9vbHRpcC5vZmZzZXRXaWR0aC8yK1wicHhcIik7aWYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKXRoaXMudHJhY2tMb3cuc3R5bGUudG9wPVwiMFwiLHRoaXMudHJhY2tMb3cuc3R5bGUuaGVpZ2h0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS50b3A9TWF0aC5taW4oYVswXSxhWzFdKStcIiVcIix0aGlzLnRyYWNrU2VsZWN0aW9uLnN0eWxlLmhlaWdodD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLmJvdHRvbT1cIjBcIix0aGlzLnRyYWNrSGlnaC5zdHlsZS5oZWlnaHQ9MTAwLU1hdGgubWluKGFbMF0sYVsxXSktTWF0aC5hYnMoYVswXS1hWzFdKStcIiVcIjtlbHNle3RoaXMudHJhY2tMb3cuc3R5bGUubGVmdD1cIjBcIix0aGlzLnRyYWNrTG93LnN0eWxlLndpZHRoPU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS5sZWZ0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS53aWR0aD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLnJpZ2h0PVwiMFwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLndpZHRoPTEwMC1NYXRoLm1pbihhWzBdLGFbMV0pLU1hdGguYWJzKGFbMF0tYVsxXSkrXCIlXCI7dmFyIGs9dGhpcy50b29sdGlwX21pbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPXRoaXMudG9vbHRpcF9tYXguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XCJib3R0b21cIj09PXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uP2sucmlnaHQ+bC5sZWZ0Pyh0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiYm90dG9tXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJ0b3BcIiksdGhpcy50b29sdGlwX21heC5zdHlsZS50b3A9XCJcIix0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLmJvdHRvbT1cIjIycHhcIik6KHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJ0b3BcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21heCxcImJvdHRvbVwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLnRvcD10aGlzLnRvb2x0aXBfbWluLnN0eWxlLnRvcCx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLmJvdHRvbT1cIlwiKTprLnJpZ2h0PmwubGVmdD8odGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcInRvcFwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiYm90dG9tXCIpLHRoaXMudG9vbHRpcF9tYXguc3R5bGUudG9wPVwiMThweFwiKToodGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcImJvdHRvbVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwidG9wXCIpLHRoaXMudG9vbHRpcF9tYXguc3R5bGUudG9wPXRoaXMudG9vbHRpcF9taW4uc3R5bGUudG9wKX19LF9yZXNpemU6ZnVuY3Rpb24oYSl7dGhpcy5fc3RhdGUub2Zmc2V0PXRoaXMuX29mZnNldCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuX3N0YXRlLnNpemU9dGhpcy5zbGlkZXJFbGVtW3RoaXMuc2l6ZVBvc10sdGhpcy5fbGF5b3V0KCl9LF9yZW1vdmVQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2Euc3R5bGUucmVtb3ZlUHJvcGVydHk/YS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShiKTphLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZShiKX0sX21vdXNlZG93bjpmdW5jdGlvbihhKXtpZighdGhpcy5fc3RhdGUuZW5hYmxlZClyZXR1cm4hMTt0aGlzLl9zdGF0ZS5vZmZzZXQ9dGhpcy5fb2Zmc2V0KHRoaXMuc2xpZGVyRWxlbSksdGhpcy5fc3RhdGUuc2l6ZT10aGlzLnNsaWRlckVsZW1bdGhpcy5zaXplUG9zXTt2YXIgYj10aGlzLl9nZXRQZXJjZW50YWdlKGEpO2lmKHRoaXMub3B0aW9ucy5yYW5nZSl7dmFyIGM9TWF0aC5hYnModGhpcy5fc3RhdGUucGVyY2VudGFnZVswXS1iKSxkPU1hdGguYWJzKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0tYik7dGhpcy5fc3RhdGUuZHJhZ2dlZD1kPmM/MDoxLHRoaXMuX2FkanVzdFBlcmNlbnRhZ2VGb3JSYW5nZVNsaWRlcnMoYil9ZWxzZSB0aGlzLl9zdGF0ZS5kcmFnZ2VkPTA7dGhpcy5fc3RhdGUucGVyY2VudGFnZVt0aGlzLl9zdGF0ZS5kcmFnZ2VkXT1iLHRoaXMuX2xheW91dCgpLHRoaXMudG91Y2hDYXBhYmxlJiYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm1vdXNldXAsITEpKSx0aGlzLm1vdXNlbW92ZSYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSx0aGlzLm1vdXNldXAmJmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5tb3VzZXVwLCExKSx0aGlzLm1vdXNlbW92ZT10aGlzLl9tb3VzZW1vdmUuYmluZCh0aGlzKSx0aGlzLm1vdXNldXA9dGhpcy5fbW91c2V1cC5iaW5kKHRoaXMpLHRoaXMudG91Y2hDYXBhYmxlJiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm1vdXNldXAsITEpKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5tb3VzZXVwLCExKSx0aGlzLl9zdGF0ZS5pbkRyYWc9ITA7dmFyIGU9dGhpcy5fY2FsY3VsYXRlVmFsdWUoKTtyZXR1cm4gdGhpcy5fdHJpZ2dlcihcInNsaWRlU3RhcnRcIixlKSx0aGlzLl9zZXREYXRhVmFsKGUpLHRoaXMuc2V0VmFsdWUoZSwhMSwhMCksdGhpcy5fcGF1c2VFdmVudChhKSx0aGlzLm9wdGlvbnMuZm9jdXMmJnRoaXMuX3RyaWdnZXJGb2N1c09uSGFuZGxlKHRoaXMuX3N0YXRlLmRyYWdnZWQpLCEwfSxfdG91Y2hzdGFydDpmdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hLmNoYW5nZWRUb3VjaGVzKXJldHVybiB2b2lkIHRoaXMuX21vdXNlZG93bihhKTt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdO3RoaXMudG91Y2hYPWIucGFnZVgsdGhpcy50b3VjaFk9Yi5wYWdlWX0sX3RyaWdnZXJGb2N1c09uSGFuZGxlOmZ1bmN0aW9uKGEpezA9PT1hJiZ0aGlzLmhhbmRsZTEuZm9jdXMoKSwxPT09YSYmdGhpcy5oYW5kbGUyLmZvY3VzKCl9LF9rZXlkb3duOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dmFyIGM7c3dpdGNoKGIua2V5Q29kZSl7Y2FzZSAzNzpjYXNlIDQwOmM9LTE7YnJlYWs7Y2FzZSAzOTpjYXNlIDM4OmM9MX1pZihjKXtpZih0aGlzLm9wdGlvbnMubmF0dXJhbF9hcnJvd19rZXlzKXt2YXIgZD1cInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJiF0aGlzLm9wdGlvbnMucmV2ZXJzZWQsZT1cImhvcml6b250YWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbiYmdGhpcy5vcHRpb25zLnJldmVyc2VkOyhkfHxlKSYmKGM9LWMpfXZhciBmPXRoaXMuX3N0YXRlLnZhbHVlW2FdK2MqdGhpcy5vcHRpb25zLnN0ZXA7cmV0dXJuIHRoaXMub3B0aW9ucy5yYW5nZSYmKGY9W2E/dGhpcy5fc3RhdGUudmFsdWVbMF06ZixhP2Y6dGhpcy5fc3RhdGUudmFsdWVbMV1dKSx0aGlzLl90cmlnZ2VyKFwic2xpZGVTdGFydFwiLGYpLHRoaXMuX3NldERhdGFWYWwoZiksdGhpcy5zZXRWYWx1ZShmLCEwLCEwKSx0aGlzLl9zZXREYXRhVmFsKGYpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZVN0b3BcIixmKSx0aGlzLl9sYXlvdXQoKSx0aGlzLl9wYXVzZUV2ZW50KGIpLCExfX0sX3BhdXNlRXZlbnQ6ZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpLGEuY2FuY2VsQnViYmxlPSEwLGEucmV0dXJuVmFsdWU9ITF9LF9tb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dmFyIGI9dGhpcy5fZ2V0UGVyY2VudGFnZShhKTt0aGlzLl9hZGp1c3RQZXJjZW50YWdlRm9yUmFuZ2VTbGlkZXJzKGIpLHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbdGhpcy5fc3RhdGUuZHJhZ2dlZF09Yix0aGlzLl9sYXlvdXQoKTt2YXIgYz10aGlzLl9jYWxjdWxhdGVWYWx1ZSghMCk7cmV0dXJuIHRoaXMuc2V0VmFsdWUoYywhMCwhMCksITF9LF90b3VjaG1vdmU6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YS5jaGFuZ2VkVG91Y2hlcyl7dmFyIGI9YS5jaGFuZ2VkVG91Y2hlc1swXSxjPWIucGFnZVgtdGhpcy50b3VjaFgsZD1iLnBhZ2VZLXRoaXMudG91Y2hZO3RoaXMuX3N0YXRlLmluRHJhZ3x8KFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbiYmNT49YyYmYz49LTUmJihkPj0xNXx8LTE1Pj1kKT90aGlzLl9tb3VzZWRvd24oYSk6NT49ZCYmZD49LTUmJihjPj0xNXx8LTE1Pj1jKSYmdGhpcy5fbW91c2Vkb3duKGEpKX19LF9hZGp1c3RQZXJjZW50YWdlRm9yUmFuZ2VTbGlkZXJzOmZ1bmN0aW9uKGEpe2lmKHRoaXMub3B0aW9ucy5yYW5nZSl7dmFyIGI9dGhpcy5fZ2V0TnVtRGlnaXRzQWZ0ZXJEZWNpbWFsUGxhY2UoYSk7Yj1iP2ItMTowO3ZhciBjPXRoaXMuX2FwcGx5VG9GaXhlZEFuZFBhcnNlRmxvYXQoYSxiKTswPT09dGhpcy5fc3RhdGUuZHJhZ2dlZCYmdGhpcy5fYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdCh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdLGIpPGM/KHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF09dGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXSx0aGlzLl9zdGF0ZS5kcmFnZ2VkPTEpOjE9PT10aGlzLl9zdGF0ZS5kcmFnZ2VkJiZ0aGlzLl9hcHBseVRvRml4ZWRBbmRQYXJzZUZsb2F0KHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0sYik+YyYmKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV09dGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSx0aGlzLl9zdGF0ZS5kcmFnZ2VkPTApfX0sX21vdXNldXA6ZnVuY3Rpb24oKXtpZighdGhpcy5fc3RhdGUuZW5hYmxlZClyZXR1cm4hMTt0aGlzLnRvdWNoQ2FwYWJsZSYmKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm1vdXNlbW92ZSwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5tb3VzZXVwLCExKSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMubW91c2V1cCwhMSksdGhpcy5fc3RhdGUuaW5EcmFnPSExLHRoaXMuX3N0YXRlLm92ZXI9PT0hMSYmdGhpcy5faGlkZVRvb2x0aXAoKTt2YXIgYT10aGlzLl9jYWxjdWxhdGVWYWx1ZSghMCk7cmV0dXJuIHRoaXMuX2xheW91dCgpLHRoaXMuX3NldERhdGFWYWwoYSksdGhpcy5fdHJpZ2dlcihcInNsaWRlU3RvcFwiLGEpLCExfSxfY2FsY3VsYXRlVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYodGhpcy5vcHRpb25zLnJhbmdlPyhiPVt0aGlzLm9wdGlvbnMubWluLHRoaXMub3B0aW9ucy5tYXhdLDAhPT10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdJiYoYlswXT10aGlzLl90b1ZhbHVlKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0pLGJbMF09dGhpcy5fYXBwbHlQcmVjaXNpb24oYlswXSkpLDEwMCE9PXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0mJihiWzFdPXRoaXMuX3RvVmFsdWUodGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXSksYlsxXT10aGlzLl9hcHBseVByZWNpc2lvbihiWzFdKSkpOihiPXRoaXMuX3RvVmFsdWUodGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSksYj1wYXJzZUZsb2F0KGIpLGI9dGhpcy5fYXBwbHlQcmVjaXNpb24oYikpLGEpe2Zvcih2YXIgYz1bYiwxLzBdLGQ9MDtkPHRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg7ZCsrKXt2YXIgZT1NYXRoLmFicyh0aGlzLm9wdGlvbnMudGlja3NbZF0tYik7ZTw9Y1sxXSYmKGM9W3RoaXMub3B0aW9ucy50aWNrc1tkXSxlXSl9aWYoY1sxXTw9dGhpcy5vcHRpb25zLnRpY2tzX3NuYXBfYm91bmRzKXJldHVybiBjWzBdfXJldHVybiBifSxfYXBwbHlQcmVjaXNpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLnByZWNpc2lvbnx8dGhpcy5fZ2V0TnVtRGlnaXRzQWZ0ZXJEZWNpbWFsUGxhY2UodGhpcy5vcHRpb25zLnN0ZXApO3JldHVybiB0aGlzLl9hcHBseVRvRml4ZWRBbmRQYXJzZUZsb2F0KGEsYil9LF9nZXROdW1EaWdpdHNBZnRlckRlY2ltYWxQbGFjZTpmdW5jdGlvbihhKXt2YXIgYj0oXCJcIithKS5tYXRjaCgvKD86XFwuKFxcZCspKT8oPzpbZUVdKFsrLV0/XFxkKykpPyQvKTtyZXR1cm4gYj9NYXRoLm1heCgwLChiWzFdP2JbMV0ubGVuZ3RoOjApLShiWzJdPytiWzJdOjApKTowfSxfYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdDpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9GaXhlZChiKTtyZXR1cm4gcGFyc2VGbG9hdChjKX0sX2dldFBlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7IXRoaXMudG91Y2hDYXBhYmxlfHxcInRvdWNoc3RhcnRcIiE9PWEudHlwZSYmXCJ0b3VjaG1vdmVcIiE9PWEudHlwZXx8KGE9YS50b3VjaGVzWzBdKTt2YXIgYj1hW3RoaXMubW91c2VQb3NdLGM9dGhpcy5fc3RhdGUub2Zmc2V0W3RoaXMuc3R5bGVQb3NdLGQ9Yi1jLGU9ZC90aGlzLl9zdGF0ZS5zaXplKjEwMDtyZXR1cm4gZT1NYXRoLnJvdW5kKGUvdGhpcy5fc3RhdGUucGVyY2VudGFnZVsyXSkqdGhpcy5fc3RhdGUucGVyY2VudGFnZVsyXSx0aGlzLm9wdGlvbnMucmV2ZXJzZWQmJihlPTEwMC1lKSxNYXRoLm1heCgwLE1hdGgubWluKDEwMCxlKSl9LF92YWxpZGF0ZUlucHV0VmFsdWU6ZnVuY3Rpb24oYSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGEpcmV0dXJuIGE7aWYoQXJyYXkuaXNBcnJheShhKSlyZXR1cm4gdGhpcy5fdmFsaWRhdGVBcnJheShhKSxhO3Rocm93IG5ldyBFcnJvcihkLmZvcm1hdEludmFsaWRJbnB1dEVycm9yTXNnKGEpKX0sX3ZhbGlkYXRlQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoXCJudW1iZXJcIiE9dHlwZW9mIGMpdGhyb3cgbmV3IEVycm9yKGQuZm9ybWF0SW52YWxpZElucHV0RXJyb3JNc2coYykpfX0sX3NldERhdGFWYWw6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdmFsdWVcIixhKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixhKSx0aGlzLmVsZW1lbnQudmFsdWU9YX0sX3RyaWdnZXI6ZnVuY3Rpb24oYixjKXtjPWN8fDA9PT1jP2M6dm9pZCAwO3ZhciBkPXRoaXMuZXZlbnRUb0NhbGxiYWNrTWFwW2JdO2lmKGQmJmQubGVuZ3RoKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2YoYyl9YSYmdGhpcy5fdHJpZ2dlckpRdWVyeUV2ZW50KGIsYyl9LF90cmlnZ2VySlF1ZXJ5RXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dHlwZTphLHZhbHVlOmJ9O3RoaXMuJGVsZW1lbnQudHJpZ2dlcihjKSx0aGlzLiRzbGlkZXJFbGVtLnRyaWdnZXIoYyl9LF91bmJpbmRKUXVlcnlFdmVudEhhbmRsZXJzOmZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5vZmYoKSx0aGlzLiRzbGlkZXJFbGVtLm9mZigpfSxfc2V0VGV4dDpmdW5jdGlvbihhLGIpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBhLnRleHRDb250ZW50P2EudGV4dENvbnRlbnQ9YjpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5pbm5lclRleHQmJihhLmlubmVyVGV4dD1iKX0sX3JlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWIuc3BsaXQoXCIgXCIpLGQ9YS5jbGFzc05hbWUsZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdLGc9bmV3IFJlZ0V4cChcIig/OlxcXFxzfF4pXCIrZitcIig/OlxcXFxzfCQpXCIpO2Q9ZC5yZXBsYWNlKGcsXCIgXCIpfWEuY2xhc3NOYW1lPWQudHJpbSgpfSxfYWRkQ2xhc3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9Yi5zcGxpdChcIiBcIiksZD1hLmNsYXNzTmFtZSxlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV0sZz1uZXcgUmVnRXhwKFwiKD86XFxcXHN8XilcIitmK1wiKD86XFxcXHN8JClcIiksaD1nLnRlc3QoZCk7aHx8KGQrPVwiIFwiK2YpfWEuY2xhc3NOYW1lPWQudHJpbSgpfSxfb2Zmc2V0TGVmdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSxfb2Zmc2V0VG9wOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLm9mZnNldFRvcDsoYT1hLm9mZnNldFBhcmVudCkmJiFpc05hTihhLm9mZnNldFRvcCk7KWIrPWEub2Zmc2V0VG9wLFwiQk9EWVwiIT09YS50YWdOYW1lJiYoYi09YS5zY3JvbGxUb3ApO3JldHVybiBifSxfb2Zmc2V0OmZ1bmN0aW9uKGEpe3JldHVybntsZWZ0OnRoaXMuX29mZnNldExlZnQoYSksdG9wOnRoaXMuX29mZnNldFRvcChhKX19LF9jc3M6ZnVuY3Rpb24oYixjLGQpe2lmKGEpYS5zdHlsZShiLGMsZCk7ZWxzZXt2YXIgZT1jLnJlcGxhY2UoL14tbXMtLyxcIm1zLVwiKS5yZXBsYWNlKC8tKFtcXGRhLXpdKS9naSxmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9KTtiLnN0eWxlW2VdPWR9fSxfdG9WYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNjYWxlLnRvVmFsdWUuYXBwbHkodGhpcyxbYV0pfSxfdG9QZXJjZW50YWdlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9wdGlvbnMuc2NhbGUudG9QZXJjZW50YWdlLmFwcGx5KHRoaXMsW2FdKX0sX3NldFRvb2x0aXBQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPVt0aGlzLnRvb2x0aXAsdGhpcy50b29sdGlwX21pbix0aGlzLnRvb2x0aXBfbWF4XTtpZihcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24pe3ZhciBiPXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9ufHxcInJpZ2h0XCIsYz1cImxlZnRcIj09PWI/XCJyaWdodFwiOlwibGVmdFwiO2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9hZGRDbGFzcyhhLGIpLGEuc3R5bGVbY109XCIxMDAlXCJ9LmJpbmQodGhpcykpfWVsc2VcImJvdHRvbVwiPT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24/YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuX2FkZENsYXNzKGEsXCJib3R0b21cIiksYS5zdHlsZS50b3A9XCIyMnB4XCJ9LmJpbmQodGhpcykpOmEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9hZGRDbGFzcyhhLFwidG9wXCIpLGEuc3R5bGUudG9wPS10aGlzLnRvb2x0aXAub3V0ZXJIZWlnaHQtMTQrXCJweFwifS5iaW5kKHRoaXMpKX19LGEpe3ZhciBmPWEuZm4uc2xpZGVyP1wiYm9vdHN0cmFwU2xpZGVyXCI6XCJzbGlkZXJcIjthLmJyaWRnZXQoZixiKSxhKGZ1bmN0aW9uKCl7YShcImlucHV0W2RhdGEtcHJvdmlkZT1zbGlkZXJdXCIpW2ZdKCl9KX19KGEpLGJ9KTsiLCIvKlxyXG5Db3B5cmlnaHQgKGMpIDIwMDMtMjAxNiwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cDovL2NrZWRpdG9yLmNvbS9saWNlbnNlXHJcbiovXHJcbihmdW5jdGlvbigpe2lmKHdpbmRvdy5DS0VESVRPUiYmd2luZG93LkNLRURJVE9SLmRvbSlyZXR1cm47d2luZG93LkNLRURJVE9SfHwod2luZG93LkNLRURJVE9SPWZ1bmN0aW9uKCl7dmFyIGE9LyhefC4qW1xcXFxcXC9dKWNrZWRpdG9yXFwuanMoPzpcXD8uKnw7LiopPyQvaSxkPXt0aW1lc3RhbXA6XCJHMTRFXCIsdmVyc2lvbjpcIjQuNS43XCIscmV2aXNpb246XCJlOTgyNzdmXCIscm5kOk1hdGguZmxvb3IoOTAwKk1hdGgucmFuZG9tKCkpKzEwMCxfOntwZW5kaW5nOltdLGJhc2VQYXRoU3JjUGF0dGVybjphfSxzdGF0dXM6XCJ1bmxvYWRlZFwiLGJhc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIGI9d2luZG93LkNLRURJVE9SX0JBU0VQQVRIfHxcIlwiO2lmKCFiKWZvcih2YXIgYz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBrPWNbZF0uc3JjLm1hdGNoKGEpO2lmKGspe2I9a1sxXTticmVha319LTE9PWIuaW5kZXhPZihcIjovXCIpJiZcIi8vXCIhPWIuc2xpY2UoMCwyKSYmKGI9MD09PWIuaW5kZXhPZihcIi9cIik/bG9jYXRpb24uaHJlZi5tYXRjaCgvXi4qPzpcXC9cXC9bXlxcL10qLylbMF0rXHJcbmI6bG9jYXRpb24uaHJlZi5tYXRjaCgvXlteXFw/XSpcXC8oPzopLylbMF0rYik7aWYoIWIpdGhyb3cnVGhlIENLRWRpdG9yIGluc3RhbGxhdGlvbiBwYXRoIGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGRldGVjdGVkLiBQbGVhc2Ugc2V0IHRoZSBnbG9iYWwgdmFyaWFibGUgXCJDS0VESVRPUl9CQVNFUEFUSFwiIGJlZm9yZSBjcmVhdGluZyBlZGl0b3IgaW5zdGFuY2VzLic7cmV0dXJuIGJ9KCksZ2V0VXJsOmZ1bmN0aW9uKGEpey0xPT1hLmluZGV4T2YoXCI6L1wiKSYmMCE9PWEuaW5kZXhPZihcIi9cIikmJihhPXRoaXMuYmFzZVBhdGgrYSk7dGhpcy50aW1lc3RhbXAmJlwiL1wiIT1hLmNoYXJBdChhLmxlbmd0aC0xKSYmIS9bJj9ddD0vLnRlc3QoYSkmJihhKz0oMDw9YS5pbmRleE9mKFwiP1wiKT9cIlxceDI2XCI6XCI/XCIpK1widFxceDNkXCIrdGhpcy50aW1lc3RhbXApO3JldHVybiBhfSxkb21SZWFkeTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0cnl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj8oZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixcclxuYSwhMSksYigpKTpkb2N1bWVudC5hdHRhY2hFdmVudCYmXCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmKGRvY3VtZW50LmRldGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsYSksYigpKX1jYXRjaChjKXt9fWZ1bmN0aW9uIGIoKXtmb3IodmFyIGE7YT1jLnNoaWZ0KCk7KWEoKX12YXIgYz1bXTtyZXR1cm4gZnVuY3Rpb24oYil7ZnVuY3Rpb24gZCgpe3RyeXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGYpe3NldFRpbWVvdXQoZCwxKTtyZXR1cm59YSgpfWMucHVzaChiKTtcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZzZXRUaW1lb3V0KGEsMSk7aWYoMT09Yy5sZW5ndGgpaWYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcilkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGEsITEpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGEsITEpO2Vsc2UgaWYoZG9jdW1lbnQuYXR0YWNoRXZlbnQpe2RvY3VtZW50LmF0dGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsXHJcbmEpO3dpbmRvdy5hdHRhY2hFdmVudChcIm9ubG9hZFwiLGEpO2I9ITE7dHJ5e2I9IXdpbmRvdy5mcmFtZUVsZW1lbnR9Y2F0Y2godyl7fWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCYmYiYmZCgpfX19KCl9LGI9d2luZG93LkNLRURJVE9SX0dFVFVSTDtpZihiKXt2YXIgYz1kLmdldFVybDtkLmdldFVybD1mdW5jdGlvbihhKXtyZXR1cm4gYi5jYWxsKGQsYSl8fGMuY2FsbChkLGEpfX1yZXR1cm4gZH0oKSk7XHJcbkNLRURJVE9SLmV2ZW50fHwoQ0tFRElUT1IuZXZlbnQ9ZnVuY3Rpb24oKXt9LENLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uPWZ1bmN0aW9uKGEpe3ZhciBkPUNLRURJVE9SLmV2ZW50LnByb3RvdHlwZSxiO2ZvcihiIGluIGQpbnVsbD09YVtiXSYmKGFbYl09ZFtiXSl9LENLRURJVE9SLmV2ZW50LnByb3RvdHlwZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGU9ZCh0aGlzKTtyZXR1cm4gZVthXXx8KGVbYV09bmV3IGIoYSkpfXZhciBkPWZ1bmN0aW9uKGEpe2E9YS5nZXRQcml2YXRlJiZhLmdldFByaXZhdGUoKXx8YS5ffHwoYS5fPXt9KTtyZXR1cm4gYS5ldmVudHN8fChhLmV2ZW50cz17fSl9LGI9ZnVuY3Rpb24oYSl7dGhpcy5uYW1lPWE7dGhpcy5saXN0ZW5lcnM9W119O2IucHJvdG90eXBlPXtnZXRMaXN0ZW5lckluZGV4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGQ9dGhpcy5saXN0ZW5lcnM7YjxkLmxlbmd0aDtiKyspaWYoZFtiXS5mbj09YSlyZXR1cm4gYjtyZXR1cm4tMX19O1xyXG5yZXR1cm57ZGVmaW5lOmZ1bmN0aW9uKGIsZCl7dmFyIGc9YS5jYWxsKHRoaXMsYik7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGcsZCwhMCl9LG9uOmZ1bmN0aW9uKGIsZCxnLGwsayl7ZnVuY3Rpb24gbihhLGYseCxrKXthPXtuYW1lOmIsc2VuZGVyOnRoaXMsZWRpdG9yOmEsZGF0YTpmLGxpc3RlbmVyRGF0YTpsLHN0b3A6eCxjYW5jZWw6ayxyZW1vdmVMaXN0ZW5lcjp3fTtyZXR1cm4hMT09PWQuY2FsbChnLGEpPyExOmEuZGF0YX1mdW5jdGlvbiB3KCl7eC5yZW1vdmVMaXN0ZW5lcihiLGQpfXZhciBmPWEuY2FsbCh0aGlzLGIpO2lmKDA+Zi5nZXRMaXN0ZW5lckluZGV4KGQpKXtmPWYubGlzdGVuZXJzO2d8fChnPXRoaXMpO2lzTmFOKGspJiYoaz0xMCk7dmFyIHg9dGhpcztuLmZuPWQ7bi5wcmlvcml0eT1rO2Zvcih2YXIgQT1mLmxlbmd0aC0xOzA8PUE7QS0tKWlmKGZbQV0ucHJpb3JpdHk8PWspcmV0dXJuIGYuc3BsaWNlKEErMSwwLG4pLHtyZW1vdmVMaXN0ZW5lcjp3fTtmLnVuc2hpZnQobil9cmV0dXJue3JlbW92ZUxpc3RlbmVyOnd9fSxcclxub25jZTpmdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYj1hWzFdO2FbMV09ZnVuY3Rpb24oYSl7YS5yZW1vdmVMaXN0ZW5lcigpO3JldHVybiBiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHRoaXMub24uYXBwbHkodGhpcyxhKX0sY2FwdHVyZTpmdW5jdGlvbigpe0NLRURJVE9SLmV2ZW50LnVzZUNhcHR1cmU9MTt2YXIgYT10aGlzLm9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPTA7cmV0dXJuIGF9LGZpcmU6ZnVuY3Rpb24oKXt2YXIgYT0wLGI9ZnVuY3Rpb24oKXthPTF9LGc9MCxsPWZ1bmN0aW9uKCl7Zz0xfTtyZXR1cm4gZnVuY3Rpb24oayxuLHcpe3ZhciBmPWQodGhpcylba107az1hO3ZhciB4PWc7YT1nPTA7aWYoZil7dmFyIEE9Zi5saXN0ZW5lcnM7aWYoQS5sZW5ndGgpZm9yKHZhciBBPUEuc2xpY2UoMCksdSxCPTA7QjxBLmxlbmd0aDtCKyspe2lmKGYuZXJyb3JQcm9vZil0cnl7dT1cclxuQVtCXS5jYWxsKHRoaXMsdyxuLGIsbCl9Y2F0Y2gocSl7fWVsc2UgdT1BW0JdLmNhbGwodGhpcyx3LG4sYixsKTshMT09PXU/Zz0xOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1JiYobj11KTtpZihhfHxnKWJyZWFrfX1uPWc/ITE6XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4/ITA6bjthPWs7Zz14O3JldHVybiBufX0oKSxmaXJlT25jZTpmdW5jdGlvbihhLGIsZyl7Yj10aGlzLmZpcmUoYSxiLGcpO2RlbGV0ZSBkKHRoaXMpW2FdO3JldHVybiBifSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3ZhciBnPWQodGhpcylbYV07aWYoZyl7dmFyIGw9Zy5nZXRMaXN0ZW5lckluZGV4KGIpOzA8PWwmJmcubGlzdGVuZXJzLnNwbGljZShsLDEpfX0scmVtb3ZlQWxsTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9ZCh0aGlzKSxiO2ZvcihiIGluIGEpZGVsZXRlIGFbYl19LGhhc0xpc3RlbmVyczpmdW5jdGlvbihhKXtyZXR1cm4oYT1kKHRoaXMpW2FdKSYmMDxhLmxpc3RlbmVycy5sZW5ndGh9fX0oKSk7XHJcbkNLRURJVE9SLmVkaXRvcnx8KENLRURJVE9SLmVkaXRvcj1mdW5jdGlvbigpe0NLRURJVE9SLl8ucGVuZGluZy5wdXNoKFt0aGlzLGFyZ3VtZW50c10pO0NLRURJVE9SLmV2ZW50LmNhbGwodGhpcyl9LENLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuZmlyZT1mdW5jdGlvbihhLGQpe2EgaW57aW5zdGFuY2VSZWFkeToxLGxvYWRlZDoxfSYmKHRoaXNbYV09ITApO3JldHVybiBDS0VESVRPUi5ldmVudC5wcm90b3R5cGUuZmlyZS5jYWxsKHRoaXMsYSxkLHRoaXMpfSxDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmZpcmVPbmNlPWZ1bmN0aW9uKGEsZCl7YSBpbntpbnN0YW5jZVJlYWR5OjEsbG9hZGVkOjF9JiYodGhpc1thXT0hMCk7cmV0dXJuIENLRURJVE9SLmV2ZW50LnByb3RvdHlwZS5maXJlT25jZS5jYWxsKHRoaXMsYSxkLHRoaXMpfSxDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlKSk7XHJcbkNLRURJVE9SLmVudnx8KENLRURJVE9SLmVudj1mdW5jdGlvbigpe3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxkPWEubWF0Y2goL2VkZ2VbIFxcL10oXFxkKy4/XFxkKikvKSxiPS0xPGEuaW5kZXhPZihcInRyaWRlbnQvXCIpLGI9ISghZCYmIWIpLGI9e2llOmIsZWRnZTohIWQsd2Via2l0OiFiJiYtMTxhLmluZGV4T2YoXCIgYXBwbGV3ZWJraXQvXCIpLGFpcjotMTxhLmluZGV4T2YoXCIgYWRvYmVhaXIvXCIpLG1hYzotMTxhLmluZGV4T2YoXCJtYWNpbnRvc2hcIikscXVpcmtzOlwiQmFja0NvbXBhdFwiPT1kb2N1bWVudC5jb21wYXRNb2RlJiYoIWRvY3VtZW50LmRvY3VtZW50TW9kZXx8MTA+ZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSxtb2JpbGU6LTE8YS5pbmRleE9mKFwibW9iaWxlXCIpLGlPUzovKGlwYWR8aXBob25lfGlwb2QpLy50ZXN0KGEpLGlzQ3VzdG9tRG9tYWluOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaWUpcmV0dXJuITE7dmFyIGE9ZG9jdW1lbnQuZG9tYWluLGI9d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO1xyXG5yZXR1cm4gYSE9YiYmYSE9XCJbXCIrYitcIl1cIn0sc2VjdXJlOlwiaHR0cHM6XCI9PWxvY2F0aW9uLnByb3RvY29sfTtiLmdlY2tvPVwiR2Vja29cIj09bmF2aWdhdG9yLnByb2R1Y3QmJiFiLndlYmtpdCYmIWIuaWU7Yi53ZWJraXQmJigtMTxhLmluZGV4T2YoXCJjaHJvbWVcIik/Yi5jaHJvbWU9ITA6Yi5zYWZhcmk9ITApO3ZhciBjPTA7Yi5pZSYmKGM9ZD9wYXJzZUZsb2F0KGRbMV0pOmIucXVpcmtzfHwhZG9jdW1lbnQuZG9jdW1lbnRNb2RlP3BhcnNlRmxvYXQoYS5tYXRjaCgvbXNpZSAoXFxkKykvKVsxXSk6ZG9jdW1lbnQuZG9jdW1lbnRNb2RlLGIuaWU5Q29tcGF0PTk9PWMsYi5pZThDb21wYXQ9OD09YyxiLmllN0NvbXBhdD03PT1jLGIuaWU2Q29tcGF0PTc+Y3x8Yi5xdWlya3MpO2IuZ2Vja28mJihkPWEubWF0Y2goL3J2OihbXFxkXFwuXSspLykpJiYoZD1kWzFdLnNwbGl0KFwiLlwiKSxjPTFFNCpkWzBdKzEwMCooZFsxXXx8MCkrMSooZFsyXXx8MCkpO2IuYWlyJiYoYz1wYXJzZUZsb2F0KGEubWF0Y2goLyBhZG9iZWFpclxcLyhcXGQrKS8pWzFdKSk7XHJcbmIud2Via2l0JiYoYz1wYXJzZUZsb2F0KGEubWF0Y2goLyBhcHBsZXdlYmtpdFxcLyhcXGQrKS8pWzFdKSk7Yi52ZXJzaW9uPWM7Yi5pc0NvbXBhdGlibGU9IShiLmllJiY3PmMpJiYhKGIuZ2Vja28mJjRFND5jKSYmIShiLndlYmtpdCYmNTM0PmMpO2IuaGlkcGk9Mjw9d2luZG93LmRldmljZVBpeGVsUmF0aW87Yi5uZWVkc0JyRmlsbGVyPWIuZ2Vja298fGIud2Via2l0fHxiLmllJiYxMDxjO2IubmVlZHNOYnNwRmlsbGVyPWIuaWUmJjExPmM7Yi5jc3NDbGFzcz1cImNrZV9icm93c2VyX1wiKyhiLmllP1wiaWVcIjpiLmdlY2tvP1wiZ2Vja29cIjpiLndlYmtpdD9cIndlYmtpdFwiOlwidW5rbm93blwiKTtiLnF1aXJrcyYmKGIuY3NzQ2xhc3MrPVwiIGNrZV9icm93c2VyX3F1aXJrc1wiKTtiLmllJiYoYi5jc3NDbGFzcys9XCIgY2tlX2Jyb3dzZXJfaWVcIisoYi5xdWlya3M/XCI2IGNrZV9icm93c2VyX2llcXVpcmtzXCI6Yi52ZXJzaW9uKSk7Yi5haXImJihiLmNzc0NsYXNzKz1cIiBja2VfYnJvd3Nlcl9haXJcIik7XHJcbmIuaU9TJiYoYi5jc3NDbGFzcys9XCIgY2tlX2Jyb3dzZXJfaW9zXCIpO2IuaGlkcGkmJihiLmNzc0NsYXNzKz1cIiBja2VfaGlkcGlcIik7cmV0dXJuIGJ9KCkpO1xyXG5cInVubG9hZGVkXCI9PUNLRURJVE9SLnN0YXR1cyYmZnVuY3Rpb24oKXtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUik7Q0tFRElUT1IubG9hZEZ1bGxDb3JlPWZ1bmN0aW9uKCl7aWYoXCJiYXNpY19yZWFkeVwiIT1DS0VESVRPUi5zdGF0dXMpQ0tFRElUT1IubG9hZEZ1bGxDb3JlLl9sb2FkPTE7ZWxzZXtkZWxldGUgQ0tFRElUT1IubG9hZEZ1bGxDb3JlO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7YS50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7YS5zcmM9Q0tFRElUT1IuYmFzZVBhdGgrXCJja2VkaXRvci5qc1wiO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChhKX19O0NLRURJVE9SLmxvYWRGdWxsQ29yZVRpbWVvdXQ9MDtDS0VESVRPUi5hZGQ9ZnVuY3Rpb24oYSl7KHRoaXMuXy5wZW5kaW5nfHwodGhpcy5fLnBlbmRpbmc9W10pKS5wdXNoKGEpfTsoZnVuY3Rpb24oKXtDS0VESVRPUi5kb21SZWFkeShmdW5jdGlvbigpe3ZhciBhPVxyXG5DS0VESVRPUi5sb2FkRnVsbENvcmUsZD1DS0VESVRPUi5sb2FkRnVsbENvcmVUaW1lb3V0O2EmJihDS0VESVRPUi5zdGF0dXM9XCJiYXNpY19yZWFkeVwiLGEmJmEuX2xvYWQ/YSgpOmQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtDS0VESVRPUi5sb2FkRnVsbENvcmUmJkNLRURJVE9SLmxvYWRGdWxsQ29yZSgpfSwxRTMqZCkpfSl9KSgpO0NLRURJVE9SLnN0YXR1cz1cImJhc2ljX2xvYWRlZFwifSgpO1widXNlIHN0cmljdFwiO0NLRURJVE9SLlZFUkJPU0lUWV9XQVJOPTE7Q0tFRElUT1IuVkVSQk9TSVRZX0VSUk9SPTI7Q0tFRElUT1IudmVyYm9zaXR5PUNLRURJVE9SLlZFUkJPU0lUWV9XQVJOfENLRURJVE9SLlZFUkJPU0lUWV9FUlJPUjtDS0VESVRPUi53YXJuPWZ1bmN0aW9uKGEsZCl7Q0tFRElUT1IudmVyYm9zaXR5JkNLRURJVE9SLlZFUkJPU0lUWV9XQVJOJiZDS0VESVRPUi5maXJlKFwibG9nXCIse3R5cGU6XCJ3YXJuXCIsZXJyb3JDb2RlOmEsYWRkaXRpb25hbERhdGE6ZH0pfTtcclxuQ0tFRElUT1IuZXJyb3I9ZnVuY3Rpb24oYSxkKXtDS0VESVRPUi52ZXJib3NpdHkmQ0tFRElUT1IuVkVSQk9TSVRZX0VSUk9SJiZDS0VESVRPUi5maXJlKFwibG9nXCIse3R5cGU6XCJlcnJvclwiLGVycm9yQ29kZTphLGFkZGl0aW9uYWxEYXRhOmR9KX07XHJcbkNLRURJVE9SLm9uKFwibG9nXCIsZnVuY3Rpb24oYSl7aWYod2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLmxvZyl7dmFyIGQ9Y29uc29sZVthLmRhdGEudHlwZV0/YS5kYXRhLnR5cGU6XCJsb2dcIixiPWEuZGF0YS5lcnJvckNvZGU7aWYoYT1hLmRhdGEuYWRkaXRpb25hbERhdGEpY29uc29sZVtkXShcIltDS0VESVRPUl0gRXJyb3IgY29kZTogXCIrYitcIi5cIixhKTtlbHNlIGNvbnNvbGVbZF0oXCJbQ0tFRElUT1JdIEVycm9yIGNvZGU6IFwiK2IrXCIuXCIpO2NvbnNvbGVbZF0oXCJbQ0tFRElUT1JdIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgZXJyb3IgZ28gdG8gaHR0cDovL2RvY3MuY2tlZGl0b3IuY29tLyMhL2d1aWRlL2Rldl9lcnJvcnMtc2VjdGlvbi1cIitiKX19LG51bGwsbnVsbCw5OTkpO0NLRURJVE9SLmRvbT17fTtcclxuKGZ1bmN0aW9uKCl7dmFyIGE9W10sZD1DS0VESVRPUi5lbnYuZ2Vja28/XCItbW96LVwiOkNLRURJVE9SLmVudi53ZWJraXQ/XCItd2Via2l0LVwiOkNLRURJVE9SLmVudi5pZT9cIi1tcy1cIjpcIlwiLGI9LyYvZyxjPS8+L2csZT0vPC9nLGc9L1wiL2csbD0vJihsdHxndHxhbXB8cXVvdHxuYnNwfHNoeXwjXFxkezEsNX0pOy9nLGs9e2x0OlwiXFx4M2NcIixndDpcIlxceDNlXCIsYW1wOlwiXFx4MjZcIixxdW90OidcIicsbmJzcDpcIsKgXCIsc2h5Olwiwq1cIn0sbj1mdW5jdGlvbihhLGYpe3JldHVyblwiI1wiPT1mWzBdP1N0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZi5zbGljZSgxKSwxMCkpOmtbZl19O0NLRURJVE9SLm9uKFwicmVzZXRcIixmdW5jdGlvbigpe2E9W119KTtDS0VESVRPUi50b29scz17YXJyYXlDb21wYXJlOmZ1bmN0aW9uKGEsZil7aWYoIWEmJiFmKXJldHVybiEwO2lmKCFhfHwhZnx8YS5sZW5ndGghPWYubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWlmKGFbYl0hPWZbYl0pcmV0dXJuITE7XHJcbnJldHVybiEwfSxnZXRJbmRleDpmdW5jdGlvbihhLGYpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7KytiKWlmKGYoYVtiXSkpcmV0dXJuIGI7cmV0dXJuLTF9LGNsb25lOmZ1bmN0aW9uKGEpe3ZhciBmO2lmKGEmJmEgaW5zdGFuY2VvZiBBcnJheSl7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmW2JdPUNLRURJVE9SLnRvb2xzLmNsb25lKGFbYl0pO3JldHVybiBmfWlmKG51bGw9PT1hfHxcIm9iamVjdFwiIT10eXBlb2YgYXx8YSBpbnN0YW5jZW9mIFN0cmluZ3x8YSBpbnN0YW5jZW9mIE51bWJlcnx8YSBpbnN0YW5jZW9mIEJvb2xlYW58fGEgaW5zdGFuY2VvZiBEYXRlfHxhIGluc3RhbmNlb2YgUmVnRXhwfHxhLm5vZGVUeXBlfHxhLndpbmRvdz09PWEpcmV0dXJuIGE7Zj1uZXcgYS5jb25zdHJ1Y3Rvcjtmb3IoYiBpbiBhKWZbYl09Q0tFRElUT1IudG9vbHMuY2xvbmUoYVtiXSk7cmV0dXJuIGZ9LGNhcGl0YWxpemU6ZnVuY3Rpb24oYSxmKXtyZXR1cm4gYS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStcclxuKGY/YS5zbGljZSgxKTphLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpfSxleHRlbmQ6ZnVuY3Rpb24oYSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCxiLGM7XCJib29sZWFuXCI9PXR5cGVvZihiPWFyZ3VtZW50c1tmLTFdKT9mLS06XCJib29sZWFuXCI9PXR5cGVvZihiPWFyZ3VtZW50c1tmLTJdKSYmKGM9YXJndW1lbnRzW2YtMV0sZi09Mik7Zm9yKHZhciBrPTE7azxmO2srKyl7dmFyIGQ9YXJndW1lbnRzW2tdLHE7Zm9yKHEgaW4gZClpZighMD09PWJ8fG51bGw9PWFbcV0paWYoIWN8fHEgaW4gYylhW3FdPWRbcV19cmV0dXJuIGF9LHByb3RvdHlwZWRDb3B5OmZ1bmN0aW9uKGEpe3ZhciBmPWZ1bmN0aW9uKCl7fTtmLnByb3RvdHlwZT1hO3JldHVybiBuZXcgZn0sY29weTpmdW5jdGlvbihhKXt2YXIgZj17fSxiO2ZvcihiIGluIGEpZltiXT1hW2JdO3JldHVybiBmfSxpc0FycmF5OmZ1bmN0aW9uKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxcclxuaXNFbXB0eTpmdW5jdGlvbihhKXtmb3IodmFyIGYgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGYpKXJldHVybiExO3JldHVybiEwfSxjc3NWZW5kb3JQcmVmaXg6ZnVuY3Rpb24oYSxmLGIpe2lmKGIpcmV0dXJuIGQrYStcIjpcIitmK1wiO1wiK2ErXCI6XCIrZjtiPXt9O2JbYV09ZjtiW2QrYV09ZjtyZXR1cm4gYn0sY3NzU3R5bGVUb0RvbVN0eWxlOmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKS5zdHlsZSxmPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmNzc0Zsb2F0P1wiY3NzRmxvYXRcIjpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5zdHlsZUZsb2F0P1wic3R5bGVGbG9hdFwiOlwiZmxvYXRcIjtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuXCJmbG9hdFwiPT1hP2Y6YS5yZXBsYWNlKC8tLi9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnN1YnN0cigxKS50b1VwcGVyQ2FzZSgpfSl9fSgpLGJ1aWxkU3R5bGVIdG1sOmZ1bmN0aW9uKGEpe2E9W10uY29uY2F0KGEpO2Zvcih2YXIgZixcclxuYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspaWYoZj1hW2NdKS9AaW1wb3J0fFt7fV0vLnRlc3QoZik/Yi5wdXNoKFwiXFx4M2NzdHlsZVxceDNlXCIrZitcIlxceDNjL3N0eWxlXFx4M2VcIik6Yi5wdXNoKCdcXHgzY2xpbmsgdHlwZVxceDNkXCJ0ZXh0L2Nzc1wiIHJlbFxceDNkc3R5bGVzaGVldCBocmVmXFx4M2RcIicrZisnXCJcXHgzZScpO3JldHVybiBiLmpvaW4oXCJcIil9LGh0bWxFbmNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWF8fG51bGw9PT1hP1wiXCI6U3RyaW5nKGEpLnJlcGxhY2UoYixcIlxceDI2YW1wO1wiKS5yZXBsYWNlKGMsXCJcXHgyNmd0O1wiKS5yZXBsYWNlKGUsXCJcXHgyNmx0O1wiKX0saHRtbERlY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGwsbil9LGh0bWxFbmNvZGVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEpLnJlcGxhY2UoZyxcIlxceDI2cXVvdDtcIil9LGh0bWxEZWNvZGVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5odG1sRGVjb2RlKGEpfSxcclxudHJhbnNmb3JtUGxhaW5UZXh0VG9IdG1sOmZ1bmN0aW9uKGEsZil7dmFyIGI9Zj09Q0tFRElUT1IuRU5URVJfQlIsYz10aGlzLmh0bWxFbmNvZGUoYS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKSksYz1jLnJlcGxhY2UoL1xcdC9nLFwiXFx4MjZuYnNwO1xceDI2bmJzcDsgXFx4MjZuYnNwO1wiKSxrPWY9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIjtpZighYil7dmFyIGQ9L1xcbnsyfS9nO2lmKGQudGVzdChjKSl2YXIgcT1cIlxceDNjXCIraytcIlxceDNlXCIsbj1cIlxceDNjL1wiK2srXCJcXHgzZVwiLGM9cStjLnJlcGxhY2UoZCxmdW5jdGlvbigpe3JldHVybiBuK3F9KStufWM9Yy5yZXBsYWNlKC9cXG4vZyxcIlxceDNjYnJcXHgzZVwiKTtifHwoYz1jLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxceDNjYnJcXHgzZSg/XFx4M2RcXHgzYy9cIitrK1wiXFx4M2UpXCIpLGZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5yZXBlYXQoYSwyKX0pKTtjPWMucmVwbGFjZSgvXiB8ICQvZyxcIlxceDI2bmJzcDtcIik7cmV0dXJuIGM9Yy5yZXBsYWNlKC8oPnxcXHMpIC9nLFxyXG5mdW5jdGlvbihhLGYpe3JldHVybiBmK1wiXFx4MjZuYnNwO1wifSkucmVwbGFjZSgvICg/PTwpL2csXCJcXHgyNm5ic3A7XCIpfSxnZXROZXh0TnVtYmVyOmZ1bmN0aW9uKCl7dmFyIGE9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4rK2F9fSgpLGdldE5leHRJZDpmdW5jdGlvbigpe3JldHVyblwiY2tlX1wiK3RoaXMuZ2V0TmV4dE51bWJlcigpfSxnZXRVbmlxdWVJZDpmdW5jdGlvbigpe2Zvcih2YXIgYT1cImVcIixmPTA7OD5mO2YrKylhKz1NYXRoLmZsb29yKDY1NTM2KigxK01hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO3JldHVybiBhfSxvdmVycmlkZTpmdW5jdGlvbihhLGYpe3ZhciBiPWYoYSk7Yi5wcm90b3R5cGU9YS5wcm90b3R5cGU7cmV0dXJuIGJ9LHNldFRpbWVvdXQ6ZnVuY3Rpb24oYSxmLGIsYyxrKXtrfHwoaz13aW5kb3cpO2J8fChiPWspO3JldHVybiBrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjP2EuYXBwbHkoYixbXS5jb25jYXQoYykpOmEuYXBwbHkoYil9LFxyXG5mfHwwKX0sdHJpbTpmdW5jdGlvbigpe3ZhciBhPS8oPzpeWyBcXHRcXG5cXHJdKyl8KD86WyBcXHRcXG5cXHJdKyQpL2c7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBmLnJlcGxhY2UoYSxcIlwiKX19KCksbHRyaW06ZnVuY3Rpb24oKXt2YXIgYT0vXlsgXFx0XFxuXFxyXSsvZztyZXR1cm4gZnVuY3Rpb24oZil7cmV0dXJuIGYucmVwbGFjZShhLFwiXCIpfX0oKSxydHJpbTpmdW5jdGlvbigpe3ZhciBhPS9bIFxcdFxcblxccl0rJC9nO3JldHVybiBmdW5jdGlvbihmKXtyZXR1cm4gZi5yZXBsYWNlKGEsXCJcIil9fSgpLGluZGV4T2Y6ZnVuY3Rpb24oYSxmKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBmKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7aWYoZihhW2JdKSlyZXR1cm4gYn1lbHNle2lmKGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGYpO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKWlmKGFbYl09PT1mKXJldHVybiBifXJldHVybi0xfSxzZWFyY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1DS0VESVRPUi50b29scy5pbmRleE9mKGEsXHJcbmIpO3JldHVybiAwPD1jP2FbY106bnVsbH0sYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19LGNyZWF0ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuJCxjPWEuYmFzZSxrPWEucHJpdmF0ZXN8fGEuXyxkPWEucHJvdG87YT1hLnN0YXRpY3M7IWImJihiPWZ1bmN0aW9uKCl7YyYmdGhpcy5iYXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2lmKGspdmFyIG49YixiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ffHwodGhpcy5fPXt9KSxiO2ZvcihiIGluIGspe3ZhciBmPWtbYl07YVtiXT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBmP0NLRURJVE9SLnRvb2xzLmJpbmQoZix0aGlzKTpmfW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtjJiYoYi5wcm90b3R5cGU9dGhpcy5wcm90b3R5cGVkQ29weShjLnByb3RvdHlwZSksYi5wcm90b3R5cGUuY29uc3RydWN0b3I9YixiLmJhc2U9YyxiLmJhc2VQcm90bz1jLnByb3RvdHlwZSxiLnByb3RvdHlwZS5iYXNlPVxyXG5mdW5jdGlvbigpe3RoaXMuYmFzZT1jLnByb3RvdHlwZS5iYXNlO2MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYmFzZT1hcmd1bWVudHMuY2FsbGVlfSk7ZCYmdGhpcy5leHRlbmQoYi5wcm90b3R5cGUsZCwhMCk7YSYmdGhpcy5leHRlbmQoYixhLCEwKTtyZXR1cm4gYn0sYWRkRnVuY3Rpb246ZnVuY3Rpb24oYixmKXtyZXR1cm4gYS5wdXNoKGZ1bmN0aW9uKCl7cmV0dXJuIGIuYXBwbHkoZnx8dGhpcyxhcmd1bWVudHMpfSktMX0scmVtb3ZlRnVuY3Rpb246ZnVuY3Rpb24oYil7YVtiXT1udWxsfSxjYWxsRnVuY3Rpb246ZnVuY3Rpb24oYil7dmFyIGY9YVtiXTtyZXR1cm4gZiYmZi5hcHBseSh3aW5kb3csQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX0sY3NzTGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9L14tP1xcZCtcXC4/XFxkKnB4JC8sYjtyZXR1cm4gZnVuY3Rpb24oYyl7Yj1DS0VESVRPUi50b29scy50cmltKGMrXCJcIikrXCJweFwiO3JldHVybiBhLnRlc3QoYik/XHJcbmI6Y3x8XCJcIn19KCksY29udmVydFRvUHg6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7YXx8KGE9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IHN0eWxlXFx4M2RcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTlweDt0b3A6LTk5OTlweDttYXJnaW46MHB4O3BhZGRpbmc6MHB4O2JvcmRlcjowcHg7XCJcXHgzZVxceDNjL2RpdlxceDNlJyxDS0VESVRPUi5kb2N1bWVudCksQ0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpLmFwcGVuZChhKSk7cmV0dXJuLyUkLy50ZXN0KGIpP2I6KGEuc2V0U3R5bGUoXCJ3aWR0aFwiLGIpLGEuJC5jbGllbnRXaWR0aCl9fSgpLHJlcGVhdDpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheShiKzEpLmpvaW4oYSl9LHRyeVRoZXNlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPWFyZ3VtZW50cy5sZW5ndGg7YjxjO2IrKyl7dmFyIGs9YXJndW1lbnRzW2JdO3RyeXthPWsoKTticmVha31jYXRjaChkKXt9fXJldHVybiBhfSxcclxuZ2VuS2V5OmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbihcIi1cIil9LGRlZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cyxjPXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFwcGx5KGMsYil9LDApfX0sbm9ybWFsaXplQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGssZD1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYSwhMCxiKTtmb3IoayBpbiBkKWMucHVzaChrK1wiOlwiK2Rba10pO2Muc29ydCgpO3JldHVybiBjLmxlbmd0aD9jLmpvaW4oXCI7XCIpK1wiO1wiOlwiXCJ9LGNvbnZlcnRSZ2JUb0hleDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oPzpyZ2JcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKlxcKSkvZ2ksZnVuY3Rpb24oYSxiLGMsayl7YT1bYixjLGtdO2ZvcihiPTA7Mz5iO2IrKylhW2JdPShcIjBcIitwYXJzZUludChhW2JdLDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcclxucmV0dXJuXCIjXCIrYS5qb2luKFwiXCIpfSl9LHBhcnNlQ3NzVGV4dDpmdW5jdGlvbihhLGIsYyl7dmFyIGs9e307YyYmKGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3BhblwiKSxjLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsYSksYT1DS0VESVRPUi50b29scy5jb252ZXJ0UmdiVG9IZXgoYy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIikpO2lmKCFhfHxcIjtcIj09YSlyZXR1cm4gazthLnJlcGxhY2UoLyZxdW90Oy9nLCdcIicpLnJlcGxhY2UoL1xccyooW146O1xcc10rKVxccyo6XFxzKihbXjtdKylcXHMqKD89O3wkKS9nLGZ1bmN0aW9uKGEsYyxkKXtiJiYoYz1jLnRvTG93ZXJDYXNlKCksXCJmb250LWZhbWlseVwiPT1jJiYoZD1kLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW1wiJ10vZyxcIlwiKS5yZXBsYWNlKC9cXHMqLFxccyovZyxcIixcIikpLGQ9Q0tFRElUT1IudG9vbHMudHJpbShkKSk7a1tjXT1kfSk7cmV0dXJuIGt9LHdyaXRlQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjLGs9W107Zm9yKGMgaW4gYSlrLnB1c2goYytcclxuXCI6XCIrYVtjXSk7YiYmay5zb3J0KCk7cmV0dXJuIGsuam9pbihcIjsgXCIpfSxvYmplY3RDb21wYXJlOmZ1bmN0aW9uKGEsYixjKXt2YXIgaztpZighYSYmIWIpcmV0dXJuITA7aWYoIWF8fCFiKXJldHVybiExO2ZvcihrIGluIGEpaWYoYVtrXSE9YltrXSlyZXR1cm4hMTtpZighYylmb3IoayBpbiBiKWlmKGFba10hPWJba10pcmV0dXJuITE7cmV0dXJuITB9LG9iamVjdEtleXM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKWIucHVzaChjKTtyZXR1cm4gYn0sY29udmVydEFycmF5VG9PYmplY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTsxPT1hcmd1bWVudHMubGVuZ3RoJiYoYj0hMCk7Zm9yKHZhciBrPTAsZD1hLmxlbmd0aDtrPGQ7KytrKWNbYVtrXV09YjtyZXR1cm4gY30sZml4RG9tYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhOzspdHJ5e2E9d2luZG93LnBhcmVudC5kb2N1bWVudC5kb21haW47YnJlYWt9Y2F0Y2goYil7YT1hP2EucmVwbGFjZSgvLis/KD86XFwufCQpLyxcclxuXCJcIik6ZG9jdW1lbnQuZG9tYWluO2lmKCFhKWJyZWFrO2RvY3VtZW50LmRvbWFpbj1hfXJldHVybiEhYX0sZXZlbnRzQnVmZmVyOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBrKCl7bj0obmV3IERhdGUpLmdldFRpbWUoKTtkPSExO2M/Yi5jYWxsKGMpOmIoKX12YXIgZCxuPTA7cmV0dXJue2lucHV0OmZ1bmN0aW9uKCl7aWYoIWQpe3ZhciBiPShuZXcgRGF0ZSkuZ2V0VGltZSgpLW47YjxhP2Q9c2V0VGltZW91dChrLGEtYik6aygpfX0scmVzZXQ6ZnVuY3Rpb24oKXtkJiZjbGVhclRpbWVvdXQoZCk7ZD1uPTB9fX0sZW5hYmxlSHRtbDVFbGVtZW50czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1cImFiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiZGkgY2FudmFzIGRhdGEgZGF0YWxpc3QgZGV0YWlscyBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgaGVhZGVyIGhncm91cCBtYWluIG1hcmsgbWV0ZXIgbmF2IG91dHB1dCBwcm9ncmVzcyBzZWN0aW9uIHN1bW1hcnkgdGltZSB2aWRlb1wiLnNwbGl0KFwiIFwiKSxcclxuaz1jLmxlbmd0aCxkO2stLTspZD1hLmNyZWF0ZUVsZW1lbnQoY1trXSksYiYmYS5hcHBlbmRDaGlsZChkKX0sY2hlY2tJZkFueUFycmF5SXRlbU1hdGNoZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxrPWEubGVuZ3RoO2M8azsrK2MpaWYoYVtjXS5tYXRjaChiKSlyZXR1cm4hMDtyZXR1cm4hMX0sY2hlY2tJZkFueU9iamVjdFByb3BlcnR5TWF0Y2hlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBhKWlmKGMubWF0Y2goYikpcmV0dXJuITA7cmV0dXJuITF9LHRyYW5zcGFyZW50SW1hZ2VEYXRhOlwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFQQUJBUC8vL3dBQUFDSDVCQUVLQUFBQUxBQUFBQUFCQUFFQUFBSUNSQUVBT3dcXHgzZFxceDNkXCIsZ2V0Q29va2llOmZ1bmN0aW9uKGEpe2E9YS50b0xvd2VyQ2FzZSgpO2Zvcih2YXIgYj1kb2N1bWVudC5jb29raWUuc3BsaXQoXCI7XCIpLGMsayxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYz1iW2RdLnNwbGl0KFwiXFx4M2RcIiksXHJcbms9ZGVjb2RlVVJJQ29tcG9uZW50KENLRURJVE9SLnRvb2xzLnRyaW0oY1swXSkudG9Mb3dlckNhc2UoKSksaz09PWEpcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgxPGMubGVuZ3RoP2NbMV06XCJcIik7cmV0dXJuIG51bGx9LHNldENvb2tpZTpmdW5jdGlvbihhLGIpe2RvY3VtZW50LmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCJcXHgzZFwiK2VuY29kZVVSSUNvbXBvbmVudChiKStcIjtwYXRoXFx4M2QvXCJ9LGdldENzcmZUb2tlbjpmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmdldENvb2tpZShcImNrQ3NyZlRva2VuXCIpO2lmKCFhfHw0MCE9YS5sZW5ndGgpe3ZhciBhPVtdLGI9XCJcIjtpZih3aW5kb3cuY3J5cHRvJiZ3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcylhPW5ldyBVaW50OEFycmF5KDQwKSx3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhKTtlbHNlIGZvcih2YXIgYz0wOzQwPmM7YysrKWEucHVzaChNYXRoLmZsb29yKDI1NipNYXRoLnJhbmRvbSgpKSk7XHJcbmZvcihjPTA7YzxhLmxlbmd0aDtjKyspdmFyIGs9XCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIi5jaGFyQXQoYVtjXSUzNiksYj1iKyguNTxNYXRoLnJhbmRvbSgpP2sudG9VcHBlckNhc2UoKTprKTthPWI7Q0tFRElUT1IudG9vbHMuc2V0Q29va2llKFwiY2tDc3JmVG9rZW5cIixhKX1yZXR1cm4gYX19fSkoKTtcclxuQ0tFRElUT1IuZHRkPWZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IudG9vbHMuZXh0ZW5kLGQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9Q0tFRElUT1IudG9vbHMuY2xvbmUoYSksaz0xO2s8YXJndW1lbnRzLmxlbmd0aDtrKyspe2I9YXJndW1lbnRzW2tdO2Zvcih2YXIgZCBpbiBiKWRlbGV0ZSBjW2RdfXJldHVybiBjfSxiPXt9LGM9e30sZT17YWRkcmVzczoxLGFydGljbGU6MSxhc2lkZToxLGJsb2NrcXVvdGU6MSxkZXRhaWxzOjEsZGl2OjEsZGw6MSxmaWVsZHNldDoxLGZpZ3VyZToxLGZvb3RlcjoxLGZvcm06MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSxoZWFkZXI6MSxoZ3JvdXA6MSxocjoxLG1haW46MSxtZW51OjEsbmF2OjEsb2w6MSxwOjEscHJlOjEsc2VjdGlvbjoxLHRhYmxlOjEsdWw6MX0sZz17Y29tbWFuZDoxLGxpbms6MSxtZXRhOjEsbm9zY3JpcHQ6MSxzY3JpcHQ6MSxzdHlsZToxfSxsPXt9LGs9e1wiI1wiOjF9LG49e2NlbnRlcjoxLGRpcjoxLG5vZnJhbWVzOjF9O1xyXG5hKGIse2E6MSxhYmJyOjEsYXJlYToxLGF1ZGlvOjEsYjoxLGJkaToxLGJkbzoxLGJyOjEsYnV0dG9uOjEsY2FudmFzOjEsY2l0ZToxLGNvZGU6MSxjb21tYW5kOjEsZGF0YWxpc3Q6MSxkZWw6MSxkZm46MSxlbToxLGVtYmVkOjEsaToxLGlmcmFtZToxLGltZzoxLGlucHV0OjEsaW5zOjEsa2JkOjEsa2V5Z2VuOjEsbGFiZWw6MSxtYXA6MSxtYXJrOjEsbWV0ZXI6MSxub3NjcmlwdDoxLG9iamVjdDoxLG91dHB1dDoxLHByb2dyZXNzOjEscToxLHJ1Ynk6MSxzOjEsc2FtcDoxLHNjcmlwdDoxLHNlbGVjdDoxLHNtYWxsOjEsc3BhbjoxLHN0cm9uZzoxLHN1YjoxLHN1cDoxLHRleHRhcmVhOjEsdGltZToxLHU6MSxcInZhclwiOjEsdmlkZW86MSx3YnI6MX0sayx7YWNyb255bToxLGFwcGxldDoxLGJhc2Vmb250OjEsYmlnOjEsZm9udDoxLGlzaW5kZXg6MSxzdHJpa2U6MSxzdHlsZToxLHR0OjF9KTthKGMsZSxiLG4pO2Q9e2E6ZChiLHthOjEsYnV0dG9uOjF9KSxhYmJyOmIsYWRkcmVzczpjLFxyXG5hcmVhOmwsYXJ0aWNsZTpjLGFzaWRlOmMsYXVkaW86YSh7c291cmNlOjEsdHJhY2s6MX0sYyksYjpiLGJhc2U6bCxiZGk6YixiZG86YixibG9ja3F1b3RlOmMsYm9keTpjLGJyOmwsYnV0dG9uOmQoYix7YToxLGJ1dHRvbjoxfSksY2FudmFzOmIsY2FwdGlvbjpjLGNpdGU6Yixjb2RlOmIsY29sOmwsY29sZ3JvdXA6e2NvbDoxfSxjb21tYW5kOmwsZGF0YWxpc3Q6YSh7b3B0aW9uOjF9LGIpLGRkOmMsZGVsOmIsZGV0YWlsczphKHtzdW1tYXJ5OjF9LGMpLGRmbjpiLGRpdjpjLGRsOntkdDoxLGRkOjF9LGR0OmMsZW06YixlbWJlZDpsLGZpZWxkc2V0OmEoe2xlZ2VuZDoxfSxjKSxmaWdjYXB0aW9uOmMsZmlndXJlOmEoe2ZpZ2NhcHRpb246MX0sYyksZm9vdGVyOmMsZm9ybTpjLGgxOmIsaDI6YixoMzpiLGg0OmIsaDU6YixoNjpiLGhlYWQ6YSh7dGl0bGU6MSxiYXNlOjF9LGcpLGhlYWRlcjpjLGhncm91cDp7aDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjF9LGhyOmwsaHRtbDphKHtoZWFkOjEsXHJcbmJvZHk6MX0sYyxnKSxpOmIsaWZyYW1lOmssaW1nOmwsaW5wdXQ6bCxpbnM6YixrYmQ6YixrZXlnZW46bCxsYWJlbDpiLGxlZ2VuZDpiLGxpOmMsbGluazpsLG1haW46YyxtYXA6YyxtYXJrOmIsbWVudTphKHtsaToxfSxjKSxtZXRhOmwsbWV0ZXI6ZChiLHttZXRlcjoxfSksbmF2OmMsbm9zY3JpcHQ6YSh7bGluazoxLG1ldGE6MSxzdHlsZToxfSxiKSxvYmplY3Q6YSh7cGFyYW06MX0sYiksb2w6e2xpOjF9LG9wdGdyb3VwOntvcHRpb246MX0sb3B0aW9uOmssb3V0cHV0OmIscDpiLHBhcmFtOmwscHJlOmIscHJvZ3Jlc3M6ZChiLHtwcm9ncmVzczoxfSkscTpiLHJwOmIscnQ6YixydWJ5OmEoe3JwOjEscnQ6MX0sYiksczpiLHNhbXA6YixzY3JpcHQ6ayxzZWN0aW9uOmMsc2VsZWN0OntvcHRncm91cDoxLG9wdGlvbjoxfSxzbWFsbDpiLHNvdXJjZTpsLHNwYW46YixzdHJvbmc6YixzdHlsZTprLHN1YjpiLHN1bW1hcnk6YSh7aDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjF9LGIpLFxyXG5zdXA6Yix0YWJsZTp7Y2FwdGlvbjoxLGNvbGdyb3VwOjEsdGhlYWQ6MSx0Zm9vdDoxLHRib2R5OjEsdHI6MX0sdGJvZHk6e3RyOjF9LHRkOmMsdGV4dGFyZWE6ayx0Zm9vdDp7dHI6MX0sdGg6Yyx0aGVhZDp7dHI6MX0sdGltZTpkKGIse3RpbWU6MX0pLHRpdGxlOmssdHI6e3RoOjEsdGQ6MX0sdHJhY2s6bCx1OmIsdWw6e2xpOjF9LFwidmFyXCI6Yix2aWRlbzphKHtzb3VyY2U6MSx0cmFjazoxfSxjKSx3YnI6bCxhY3JvbnltOmIsYXBwbGV0OmEoe3BhcmFtOjF9LGMpLGJhc2Vmb250OmwsYmlnOmIsY2VudGVyOmMsZGlhbG9nOmwsZGlyOntsaToxfSxmb250OmIsaXNpbmRleDpsLG5vZnJhbWVzOmMsc3RyaWtlOmIsdHQ6Yn07YShkLHskYmxvY2s6YSh7YXVkaW86MSxkZDoxLGR0OjEsZmlnY2FwdGlvbjoxLGxpOjEsdmlkZW86MX0sZSxuKSwkYmxvY2tMaW1pdDp7YXJ0aWNsZToxLGFzaWRlOjEsYXVkaW86MSxib2R5OjEsY2FwdGlvbjoxLGRldGFpbHM6MSxkaXI6MSxkaXY6MSxkbDoxLFxyXG5maWVsZHNldDoxLGZpZ2NhcHRpb246MSxmaWd1cmU6MSxmb290ZXI6MSxmb3JtOjEsaGVhZGVyOjEsaGdyb3VwOjEsbWFpbjoxLG1lbnU6MSxuYXY6MSxvbDoxLHNlY3Rpb246MSx0YWJsZToxLHRkOjEsdGg6MSx0cjoxLHVsOjEsdmlkZW86MX0sJGNkYXRhOntzY3JpcHQ6MSxzdHlsZToxfSwkZWRpdGFibGU6e2FkZHJlc3M6MSxhcnRpY2xlOjEsYXNpZGU6MSxibG9ja3F1b3RlOjEsYm9keToxLGRldGFpbHM6MSxkaXY6MSxmaWVsZHNldDoxLGZpZ2NhcHRpb246MSxmb290ZXI6MSxmb3JtOjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsaGVhZGVyOjEsaGdyb3VwOjEsbWFpbjoxLG5hdjoxLHA6MSxwcmU6MSxzZWN0aW9uOjF9LCRlbXB0eTp7YXJlYToxLGJhc2U6MSxiYXNlZm9udDoxLGJyOjEsY29sOjEsY29tbWFuZDoxLGRpYWxvZzoxLGVtYmVkOjEsaHI6MSxpbWc6MSxpbnB1dDoxLGlzaW5kZXg6MSxrZXlnZW46MSxsaW5rOjEsbWV0YToxLHBhcmFtOjEsc291cmNlOjEsXHJcbnRyYWNrOjEsd2JyOjF9LCRpbmxpbmU6YiwkbGlzdDp7ZGw6MSxvbDoxLHVsOjF9LCRsaXN0SXRlbTp7ZGQ6MSxkdDoxLGxpOjF9LCRub25Cb2R5Q29udGVudDphKHtib2R5OjEsaGVhZDoxLGh0bWw6MX0sZC5oZWFkKSwkbm9uRWRpdGFibGU6e2FwcGxldDoxLGF1ZGlvOjEsYnV0dG9uOjEsZW1iZWQ6MSxpZnJhbWU6MSxtYXA6MSxvYmplY3Q6MSxvcHRpb246MSxwYXJhbToxLHNjcmlwdDoxLHRleHRhcmVhOjEsdmlkZW86MX0sJG9iamVjdDp7YXBwbGV0OjEsYXVkaW86MSxidXR0b246MSxocjoxLGlmcmFtZToxLGltZzoxLGlucHV0OjEsb2JqZWN0OjEsc2VsZWN0OjEsdGFibGU6MSx0ZXh0YXJlYToxLHZpZGVvOjF9LCRyZW1vdmVFbXB0eTp7YWJicjoxLGFjcm9ueW06MSxiOjEsYmRpOjEsYmRvOjEsYmlnOjEsY2l0ZToxLGNvZGU6MSxkZWw6MSxkZm46MSxlbToxLGZvbnQ6MSxpOjEsaW5zOjEsbGFiZWw6MSxrYmQ6MSxtYXJrOjEsbWV0ZXI6MSxvdXRwdXQ6MSxxOjEscnVieToxLFxyXG5zOjEsc2FtcDoxLHNtYWxsOjEsc3BhbjoxLHN0cmlrZToxLHN0cm9uZzoxLHN1YjoxLHN1cDoxLHRpbWU6MSx0dDoxLHU6MSxcInZhclwiOjF9LCR0YWJJbmRleDp7YToxLGFyZWE6MSxidXR0b246MSxpbnB1dDoxLG9iamVjdDoxLHNlbGVjdDoxLHRleHRhcmVhOjF9LCR0YWJsZUNvbnRlbnQ6e2NhcHRpb246MSxjb2w6MSxjb2xncm91cDoxLHRib2R5OjEsdGQ6MSx0Zm9vdDoxLHRoOjEsdGhlYWQ6MSx0cjoxfSwkdHJhbnNwYXJlbnQ6e2E6MSxhdWRpbzoxLGNhbnZhczoxLGRlbDoxLGluczoxLG1hcDoxLG5vc2NyaXB0OjEsb2JqZWN0OjEsdmlkZW86MX0sJGludGVybWVkaWF0ZTp7Y2FwdGlvbjoxLGNvbGdyb3VwOjEsZGQ6MSxkdDoxLGZpZ2NhcHRpb246MSxsZWdlbmQ6MSxsaToxLG9wdGdyb3VwOjEsb3B0aW9uOjEscnA6MSxydDoxLHN1bW1hcnk6MSx0Ym9keToxLHRkOjEsdGZvb3Q6MSx0aDoxLHRoZWFkOjEsdHI6MX19KTtyZXR1cm4gZH0oKTtcclxuQ0tFRElUT1IuZG9tLmV2ZW50PWZ1bmN0aW9uKGEpe3RoaXMuJD1hfTtcclxuQ0tFRElUT1IuZG9tLmV2ZW50LnByb3RvdHlwZT17Z2V0S2V5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5rZXlDb2RlfHx0aGlzLiQud2hpY2h9LGdldEtleXN0cm9rZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0S2V5KCk7aWYodGhpcy4kLmN0cmxLZXl8fHRoaXMuJC5tZXRhS2V5KWErPUNLRURJVE9SLkNUUkw7dGhpcy4kLnNoaWZ0S2V5JiYoYSs9Q0tFRElUT1IuU0hJRlQpO3RoaXMuJC5hbHRLZXkmJihhKz1DS0VESVRPUi5BTFQpO3JldHVybiBhfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQ7ZC5wcmV2ZW50RGVmYXVsdD9kLnByZXZlbnREZWZhdWx0KCk6ZC5yZXR1cm5WYWx1ZT0hMTthJiZ0aGlzLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQ7YS5zdG9wUHJvcGFnYXRpb24/YS5zdG9wUHJvcGFnYXRpb24oKTphLmNhbmNlbEJ1YmJsZT0hMH0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9XHJcbnRoaXMuJC50YXJnZXR8fHRoaXMuJC5zcmNFbGVtZW50O3JldHVybiBhP25ldyBDS0VESVRPUi5kb20ubm9kZShhKTpudWxsfSxnZXRQaGFzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQuZXZlbnRQaGFzZXx8Mn0sZ2V0UGFnZU9mZnNldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0VGFyZ2V0KCkuZ2V0RG9jdW1lbnQoKS4kO3JldHVybnt4OnRoaXMuJC5wYWdlWHx8dGhpcy4kLmNsaWVudFgrKGEuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGEuYm9keS5zY3JvbGxMZWZ0KSx5OnRoaXMuJC5wYWdlWXx8dGhpcy4kLmNsaWVudFkrKGEuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8YS5ib2R5LnNjcm9sbFRvcCl9fX07Q0tFRElUT1IuQ1RSTD0xMTE0MTEyO0NLRURJVE9SLlNISUZUPTIyMjgyMjQ7Q0tFRElUT1IuQUxUPTQ0NTY0NDg7Q0tFRElUT1IuRVZFTlRfUEhBU0VfQ0FQVFVSSU5HPTE7Q0tFRElUT1IuRVZFTlRfUEhBU0VfQVRfVEFSR0VUPTI7XHJcbkNLRURJVE9SLkVWRU5UX1BIQVNFX0JVQkJMSU5HPTM7Q0tFRElUT1IuZG9tLmRvbU9iamVjdD1mdW5jdGlvbihhKXthJiYodGhpcy4kPWEpfTtcclxuQ0tFRElUT1IuZG9tLmRvbU9iamVjdC5wcm90b3R5cGU9ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihjKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgQ0tFRElUT1ImJmEuZmlyZShiLG5ldyBDS0VESVRPUi5kb20uZXZlbnQoYykpfX07cmV0dXJue2dldFByaXZhdGU6ZnVuY3Rpb24oKXt2YXIgYTsoYT10aGlzLmdldEN1c3RvbURhdGEoXCJfXCIpKXx8dGhpcy5zZXRDdXN0b21EYXRhKFwiX1wiLGE9e30pO3JldHVybiBhfSxvbjpmdW5jdGlvbihkKXt2YXIgYj10aGlzLmdldEN1c3RvbURhdGEoXCJfY2tlX25hdGl2ZUxpc3RlbmVyc1wiKTtifHwoYj17fSx0aGlzLnNldEN1c3RvbURhdGEoXCJfY2tlX25hdGl2ZUxpc3RlbmVyc1wiLGIpKTtiW2RdfHwoYj1iW2RdPWEodGhpcyxkKSx0aGlzLiQuYWRkRXZlbnRMaXN0ZW5lcj90aGlzLiQuYWRkRXZlbnRMaXN0ZW5lcihkLGIsISFDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlKTp0aGlzLiQuYXR0YWNoRXZlbnQmJnRoaXMuJC5hdHRhY2hFdmVudChcIm9uXCIrXHJcbmQsYikpO3JldHVybiBDS0VESVRPUi5ldmVudC5wcm90b3R5cGUub24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihhKXtDS0VESVRPUi5ldmVudC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmhhc0xpc3RlbmVycyhhKSl7dmFyIGI9dGhpcy5nZXRDdXN0b21EYXRhKFwiX2NrZV9uYXRpdmVMaXN0ZW5lcnNcIiksYz1iJiZiW2FdO2MmJih0aGlzLiQucmVtb3ZlRXZlbnRMaXN0ZW5lcj90aGlzLiQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITEpOnRoaXMuJC5kZXRhY2hFdmVudCYmdGhpcy4kLmRldGFjaEV2ZW50KFwib25cIithLGMpLGRlbGV0ZSBiW2FdKX19LHJlbW92ZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VzdG9tRGF0YShcIl9ja2VfbmF0aXZlTGlzdGVuZXJzXCIpLGI7Zm9yKGIgaW4gYSl7dmFyIGM9YVtiXTt0aGlzLiQuZGV0YWNoRXZlbnQ/dGhpcy4kLmRldGFjaEV2ZW50KFwib25cIitcclxuYixjKTp0aGlzLiQucmVtb3ZlRXZlbnRMaXN0ZW5lciYmdGhpcy4kLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKTtkZWxldGUgYVtiXX1DS0VESVRPUi5ldmVudC5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzLmNhbGwodGhpcyl9fX0oKTtcclxuKGZ1bmN0aW9uKGEpe3ZhciBkPXt9O0NLRURJVE9SLm9uKFwicmVzZXRcIixmdW5jdGlvbigpe2Q9e319KTthLmVxdWFscz1mdW5jdGlvbihhKXt0cnl7cmV0dXJuIGEmJmEuJD09PXRoaXMuJH1jYXRjaChjKXtyZXR1cm4hMX19O2Euc2V0Q3VzdG9tRGF0YT1mdW5jdGlvbihhLGMpe3ZhciBlPXRoaXMuZ2V0VW5pcXVlSWQoKTsoZFtlXXx8KGRbZV09e30pKVthXT1jO3JldHVybiB0aGlzfTthLmdldEN1c3RvbURhdGE9ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXTtyZXR1cm4oYz1jJiZkW2NdKSYmYSBpbiBjP2NbYV06bnVsbH07YS5yZW1vdmVDdXN0b21EYXRhPWZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuJFtcImRhdGEtY2tlLWV4cGFuZG9cIl0sYz1jJiZkW2NdLGUsZztjJiYoZT1jW2FdLGc9YSBpbiBjLGRlbGV0ZSBjW2FdKTtyZXR1cm4gZz9lOm51bGx9O2EuY2xlYXJDdXN0b21EYXRhPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt2YXIgYT1cclxudGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXTthJiZkZWxldGUgZFthXX07YS5nZXRVbmlxdWVJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdfHwodGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXT1DS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCkpfTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihhKX0pKENLRURJVE9SLmRvbS5kb21PYmplY3QucHJvdG90eXBlKTtcclxuQ0tFRElUT1IuZG9tLm5vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bmV3IENLRURJVE9SLmRvbVthLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UP1wiZG9jdW1lbnRcIjphLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/XCJlbGVtZW50XCI6YS5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP1widGV4dFwiOmEubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfQ09NTUVOVD9cImNvbW1lbnRcIjphLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UP1wiZG9jdW1lbnRGcmFnbWVudFwiOlwiZG9tT2JqZWN0XCJdKGEpOnRoaXN9O0NLRURJVE9SLmRvbS5ub2RlLnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLmRvbU9iamVjdDtDS0VESVRPUi5OT0RFX0VMRU1FTlQ9MTtDS0VESVRPUi5OT0RFX0RPQ1VNRU5UPTk7Q0tFRElUT1IuTk9ERV9URVhUPTM7Q0tFRElUT1IuTk9ERV9DT01NRU5UPTg7Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVD0xMTtcclxuQ0tFRElUT1IuUE9TSVRJT05fSURFTlRJQ0FMPTA7Q0tFRElUT1IuUE9TSVRJT05fRElTQ09OTkVDVEVEPTE7Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HPTI7Q0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HPTQ7Q0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVEPTg7Q0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlM9MTY7XHJcbkNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20ubm9kZS5wcm90b3R5cGUse2FwcGVuZFRvOmZ1bmN0aW9uKGEsZCl7YS5hcHBlbmQodGhpcyxkKTtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oYSxkKXtmdW5jdGlvbiBiKGMpe2NbXCJkYXRhLWNrZS1leHBhbmRvXCJdJiYoY1tcImRhdGEtY2tlLWV4cGFuZG9cIl09ITEpO2lmKGMubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8Yy5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVClpZihkfHxjLm5vZGVUeXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fGMucmVtb3ZlQXR0cmlidXRlKFwiaWRcIiwhMSksYSl7Yz1jLmNoaWxkTm9kZXM7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYihjW2VdKX19ZnVuY3Rpb24gYyhiKXtpZihiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8Yi50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UKXtpZihiLnR5cGUhPUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpe3ZhciBkPVxyXG5iLmdldE5hbWUoKTtcIjpcIj09ZFswXSYmYi5yZW5hbWVOb2RlKGQuc3Vic3RyaW5nKDEpKX1pZihhKWZvcihkPTA7ZDxiLmdldENoaWxkQ291bnQoKTtkKyspYyhiLmdldENoaWxkKGQpKX19dmFyIGU9dGhpcy4kLmNsb25lTm9kZShhKTtiKGUpO2U9bmV3IENLRURJVE9SLmRvbS5ub2RlKGUpO0NLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbiYmKHRoaXMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHx0aGlzLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpJiZjKGUpO3JldHVybiBlfSxoYXNQcmV2aW91czpmdW5jdGlvbigpe3JldHVybiEhdGhpcy4kLnByZXZpb3VzU2libGluZ30saGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy4kLm5leHRTaWJsaW5nfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihhKXthLiQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy4kLGEuJC5uZXh0U2libGluZyk7cmV0dXJuIGF9LGluc2VydEJlZm9yZTpmdW5jdGlvbihhKXthLiQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy4kLFxyXG5hLiQpO3JldHVybiBhfSxpbnNlcnRCZWZvcmVNZTpmdW5jdGlvbihhKXt0aGlzLiQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYS4kLHRoaXMuJCk7cmV0dXJuIGF9LGdldEFkZHJlc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkPVtdLGI9dGhpcy5nZXREb2N1bWVudCgpLiQuZG9jdW1lbnRFbGVtZW50LGM9dGhpcy4kO2MmJmMhPWI7KXt2YXIgZT1jLnBhcmVudE5vZGU7ZSYmZC51bnNoaWZ0KHRoaXMuZ2V0SW5kZXguY2FsbCh7JDpjfSxhKSk7Yz1lfXJldHVybiBkfSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50KHRoaXMuJC5vd25lckRvY3VtZW50fHx0aGlzLiQucGFyZW50Tm9kZS5vd25lckRvY3VtZW50KX0sZ2V0SW5kZXg6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhLGMpe3ZhciBuPWM/YS5uZXh0U2libGluZzphLnByZXZpb3VzU2libGluZztyZXR1cm4gbiYmbi5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP2Iobik/ZChuLFxyXG5jKTpuOm51bGx9ZnVuY3Rpb24gYihhKXtyZXR1cm4hYS5ub2RlVmFsdWV8fGEubm9kZVZhbHVlPT1DS0VESVRPUi5kb20uc2VsZWN0aW9uLkZJTExJTkdfQ0hBUl9TRVFVRU5DRX12YXIgYz10aGlzLiQsZT0tMSxnO2lmKCF0aGlzLiQucGFyZW50Tm9kZXx8YSYmYy5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZiKGMpJiYhZChjKSYmIWQoYywhMCkpcmV0dXJuLTE7ZG8gYSYmYyE9dGhpcy4kJiZjLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihnfHxiKGMpKXx8KGUrKyxnPWMubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCk7d2hpbGUoYz1jLnByZXZpb3VzU2libGluZyk7cmV0dXJuIGV9LGdldE5leHRTb3VyY2VOb2RlOmZ1bmN0aW9uKGEsZCxiKXtpZihiJiYhYi5jYWxsKXt2YXIgYz1iO2I9ZnVuY3Rpb24oYSl7cmV0dXJuIWEuZXF1YWxzKGMpfX1hPSFhJiZ0aGlzLmdldEZpcnN0JiZ0aGlzLmdldEZpcnN0KCk7dmFyIGU7aWYoIWEpe2lmKHRoaXMudHlwZT09XHJcbkNLRURJVE9SLk5PREVfRUxFTUVOVCYmYiYmITE9PT1iKHRoaXMsITApKXJldHVybiBudWxsO2E9dGhpcy5nZXROZXh0KCl9Zm9yKDshYSYmKGU9KGV8fHRoaXMpLmdldFBhcmVudCgpKTspe2lmKGImJiExPT09YihlLCEwKSlyZXR1cm4gbnVsbDthPWUuZ2V0TmV4dCgpfXJldHVybiFhfHxiJiYhMT09PWIoYSk/bnVsbDpkJiZkIT1hLnR5cGU/YS5nZXROZXh0U291cmNlTm9kZSghMSxkLGIpOmF9LGdldFByZXZpb3VzU291cmNlTm9kZTpmdW5jdGlvbihhLGQsYil7aWYoYiYmIWIuY2FsbCl7dmFyIGM9YjtiPWZ1bmN0aW9uKGEpe3JldHVybiFhLmVxdWFscyhjKX19YT0hYSYmdGhpcy5nZXRMYXN0JiZ0aGlzLmdldExhc3QoKTt2YXIgZTtpZighYSl7aWYodGhpcy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmImJiExPT09Yih0aGlzLCEwKSlyZXR1cm4gbnVsbDthPXRoaXMuZ2V0UHJldmlvdXMoKX1mb3IoOyFhJiYoZT0oZXx8dGhpcykuZ2V0UGFyZW50KCkpOyl7aWYoYiYmITE9PT1cclxuYihlLCEwKSlyZXR1cm4gbnVsbDthPWUuZ2V0UHJldmlvdXMoKX1yZXR1cm4hYXx8YiYmITE9PT1iKGEpP251bGw6ZCYmYS50eXBlIT1kP2EuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCExLGQsYik6YX0sZ2V0UHJldmlvdXM6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy4kLGI7ZG8gYj0oZD1kLnByZXZpb3VzU2libGluZykmJjEwIT1kLm5vZGVUeXBlJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZCk7d2hpbGUoYiYmYSYmIWEoYikpO3JldHVybiBifSxnZXROZXh0OmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJCxiO2RvIGI9KGQ9ZC5uZXh0U2libGluZykmJm5ldyBDS0VESVRPUi5kb20ubm9kZShkKTt3aGlsZShiJiZhJiYhYShiKSk7cmV0dXJuIGJ9LGdldFBhcmVudDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQucGFyZW50Tm9kZTtyZXR1cm4gZCYmKGQubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8YSYmZC5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCk/XHJcbm5ldyBDS0VESVRPUi5kb20ubm9kZShkKTpudWxsfSxnZXRQYXJlbnRzOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMsYj1bXTtkbyBiW2E/XCJwdXNoXCI6XCJ1bnNoaWZ0XCJdKGQpO3doaWxlKGQ9ZC5nZXRQYXJlbnQoKSk7cmV0dXJuIGJ9LGdldENvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKGEpe2lmKGEuZXF1YWxzKHRoaXMpKXJldHVybiB0aGlzO2lmKGEuY29udGFpbnMmJmEuY29udGFpbnModGhpcykpcmV0dXJuIGE7dmFyIGQ9dGhpcy5jb250YWlucz90aGlzOnRoaXMuZ2V0UGFyZW50KCk7ZG8gaWYoZC5jb250YWlucyhhKSlyZXR1cm4gZDt3aGlsZShkPWQuZ2V0UGFyZW50KCkpO3JldHVybiBudWxsfSxnZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQsYj1hLiQ7aWYoZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbilyZXR1cm4gZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKTtpZihkPT1iKXJldHVybiBDS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUw7aWYodGhpcy50eXBlPT1cclxuQ0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7aWYoZC5jb250YWlucyl7aWYoZC5jb250YWlucyhiKSlyZXR1cm4gQ0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlMrQ0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HO2lmKGIuY29udGFpbnMoZCkpcmV0dXJuIENLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRCtDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkd9aWYoXCJzb3VyY2VJbmRleFwiaW4gZClyZXR1cm4gMD5kLnNvdXJjZUluZGV4fHwwPmIuc291cmNlSW5kZXg/Q0tFRElUT1IuUE9TSVRJT05fRElTQ09OTkVDVEVEOmQuc291cmNlSW5kZXg8Yi5zb3VyY2VJbmRleD9DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkc6Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HfWQ9dGhpcy5nZXRBZGRyZXNzKCk7YT1hLmdldEFkZHJlc3MoKTtmb3IodmFyIGI9TWF0aC5taW4oZC5sZW5ndGgsYS5sZW5ndGgpLGM9MDtjPGI7YysrKWlmKGRbY10hPVxyXG5hW2NdKXJldHVybiBkW2NdPGFbY10/Q0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HOkNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lORztyZXR1cm4gZC5sZW5ndGg8YS5sZW5ndGg/Q0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlMrQ0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HOkNLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRCtDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkd9LGdldEFzY2VuZGFudDpmdW5jdGlvbihhLGQpe3ZhciBiPXRoaXMuJCxjLGU7ZHx8KGI9Yi5wYXJlbnROb2RlKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhPyhlPSEwLGM9YSk6KGU9ITEsYz1mdW5jdGlvbihiKXtiPVwic3RyaW5nXCI9PXR5cGVvZiBiLm5vZGVOYW1lP2Iubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpcIlwiO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP2I9PWE6YiBpbiBhfSk7Zm9yKDtiOyl7aWYoYyhlP25ldyBDS0VESVRPUi5kb20ubm9kZShiKTpiKSlyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5ub2RlKGIpO1xyXG50cnl7Yj1iLnBhcmVudE5vZGV9Y2F0Y2goZyl7Yj1udWxsfX1yZXR1cm4gbnVsbH0saGFzQXNjZW5kYW50OmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcy4kO2R8fChiPWIucGFyZW50Tm9kZSk7Zm9yKDtiOyl7aWYoYi5ub2RlTmFtZSYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT1hKXJldHVybiEwO2I9Yi5wYXJlbnROb2RlfXJldHVybiExfSxtb3ZlOmZ1bmN0aW9uKGEsZCl7YS5hcHBlbmQodGhpcy5yZW1vdmUoKSxkKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJCxiPWQucGFyZW50Tm9kZTtpZihiKXtpZihhKWZvcig7YT1kLmZpcnN0Q2hpbGQ7KWIuaW5zZXJ0QmVmb3JlKGQucmVtb3ZlQ2hpbGQoYSksZCk7Yi5yZW1vdmVDaGlsZChkKX1yZXR1cm4gdGhpc30scmVwbGFjZTpmdW5jdGlvbihhKXt0aGlzLmluc2VydEJlZm9yZShhKTthLnJlbW92ZSgpfSx0cmltOmZ1bmN0aW9uKCl7dGhpcy5sdHJpbSgpO3RoaXMucnRyaW0oKX0sbHRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIGE7dGhpcy5nZXRGaXJzdCYmXHJcbihhPXRoaXMuZ2V0Rmlyc3QoKSk7KXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7dmFyIGQ9Q0tFRElUT1IudG9vbHMubHRyaW0oYS5nZXRUZXh0KCkpLGI9YS5nZXRMZW5ndGgoKTtpZihkKWQubGVuZ3RoPGImJihhLnNwbGl0KGItZC5sZW5ndGgpLHRoaXMuJC5yZW1vdmVDaGlsZCh0aGlzLiQuZmlyc3RDaGlsZCkpO2Vsc2V7YS5yZW1vdmUoKTtjb250aW51ZX19YnJlYWt9fSxydHJpbTpmdW5jdGlvbigpe2Zvcih2YXIgYTt0aGlzLmdldExhc3QmJihhPXRoaXMuZ2V0TGFzdCgpKTspe2lmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKXt2YXIgZD1DS0VESVRPUi50b29scy5ydHJpbShhLmdldFRleHQoKSksYj1hLmdldExlbmd0aCgpO2lmKGQpZC5sZW5ndGg8YiYmKGEuc3BsaXQoZC5sZW5ndGgpLHRoaXMuJC5sYXN0Q2hpbGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiQubGFzdENoaWxkKSk7ZWxzZXthLnJlbW92ZSgpO2NvbnRpbnVlfX1icmVha31DS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmXHJcbihhPXRoaXMuJC5sYXN0Q2hpbGQpJiYxPT1hLnR5cGUmJlwiYnJcIj09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGlzUmVhZE9ubHk6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpczt0aGlzLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGQ9dGhpcy5nZXRQYXJlbnQoKSk7Q0tFRElUT1IuZW52LmVkZ2UmJmQmJmQuaXMoXCJ0ZXh0YXJlYVwiLFwiaW5wdXRcIikmJihhPSEwKTtpZighYSYmZCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGQuJC5pc0NvbnRlbnRFZGl0YWJsZSlyZXR1cm4hKGQuJC5pc0NvbnRlbnRFZGl0YWJsZXx8ZC5kYXRhKFwiY2tlLWVkaXRhYmxlXCIpKTtmb3IoO2Q7KXtpZihkLmRhdGEoXCJja2UtZWRpdGFibGVcIikpcmV0dXJuITE7aWYoZC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpcmV0dXJuXCJmYWxzZVwiPT1kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKTtkPWQuZ2V0UGFyZW50KCl9cmV0dXJuITB9fSk7XHJcbkNLRURJVE9SLmRvbS53aW5kb3c9ZnVuY3Rpb24oYSl7Q0tFRElUT1IuZG9tLmRvbU9iamVjdC5jYWxsKHRoaXMsYSl9O0NLRURJVE9SLmRvbS53aW5kb3cucHJvdG90eXBlPW5ldyBDS0VESVRPUi5kb20uZG9tT2JqZWN0O1xyXG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLndpbmRvdy5wcm90b3R5cGUse2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy4kLmZvY3VzKCl9LGdldFZpZXdQYW5lU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJC5kb2N1bWVudCxkPVwiQ1NTMUNvbXBhdFwiPT1hLmNvbXBhdE1vZGU7cmV0dXJue3dpZHRoOihkP2EuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOmEuYm9keS5jbGllbnRXaWR0aCl8fDAsaGVpZ2h0OihkP2EuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDphLmJvZHkuY2xpZW50SGVpZ2h0KXx8MH19LGdldFNjcm9sbFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kO2lmKFwicGFnZVhPZmZzZXRcImluIGEpcmV0dXJue3g6YS5wYWdlWE9mZnNldHx8MCx5OmEucGFnZVlPZmZzZXR8fDB9O2E9YS5kb2N1bWVudDtyZXR1cm57eDphLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxhLmJvZHkuc2Nyb2xsTGVmdHx8MCx5OmEuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8XHJcbmEuYm9keS5zY3JvbGxUb3B8fDB9fSxnZXRGcmFtZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJC5mcmFtZUVsZW1lbnQ7cmV0dXJuIGE/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50LmdldChhKTpudWxsfX0pO0NLRURJVE9SLmRvbS5kb2N1bWVudD1mdW5jdGlvbihhKXtDS0VESVRPUi5kb20uZG9tT2JqZWN0LmNhbGwodGhpcyxhKX07Q0tFRElUT1IuZG9tLmRvY3VtZW50LnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLmRvbU9iamVjdDtcclxuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS5kb2N1bWVudC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9ET0NVTUVOVCxhcHBlbmRTdHlsZVNoZWV0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuJC5jcmVhdGVTdHlsZVNoZWV0KXRoaXMuJC5jcmVhdGVTdHlsZVNoZWV0KGEpO2Vsc2V7dmFyIGQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwibGlua1wiKTtkLnNldEF0dHJpYnV0ZXMoe3JlbDpcInN0eWxlc2hlZXRcIix0eXBlOlwidGV4dC9jc3NcIixocmVmOmF9KTt0aGlzLmdldEhlYWQoKS5hcHBlbmQoZCl9fSxhcHBlbmRTdHlsZVRleHQ6ZnVuY3Rpb24oYSl7aWYodGhpcy4kLmNyZWF0ZVN0eWxlU2hlZXQpe3ZhciBkPXRoaXMuJC5jcmVhdGVTdHlsZVNoZWV0KFwiXCIpO2QuY3NzVGV4dD1hfWVsc2V7dmFyIGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3R5bGVcIix0aGlzKTtiLmFwcGVuZChuZXcgQ0tFRElUT1IuZG9tLnRleHQoYSx0aGlzKSk7dGhpcy5nZXRIZWFkKCkuYXBwZW5kKGIpfXJldHVybiBkfHxcclxuYi4kLnNoZWV0fSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKGEsZCl7dmFyIGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEsdGhpcyk7ZCYmKGQuYXR0cmlidXRlcyYmYi5zZXRBdHRyaWJ1dGVzKGQuYXR0cmlidXRlcyksZC5zdHlsZXMmJmIuc2V0U3R5bGVzKGQuc3R5bGVzKSk7cmV0dXJuIGJ9LGNyZWF0ZVRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20udGV4dChhLHRoaXMpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZ2V0V2luZG93KCkuZm9jdXMoKX0sZ2V0QWN0aXZlOmZ1bmN0aW9uKCl7dmFyIGE7dHJ5e2E9dGhpcy4kLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZCl7cmV0dXJuIG51bGx9cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKX0sZ2V0QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4oYT10aGlzLiQuZ2V0RWxlbWVudEJ5SWQoYSkpP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKTpudWxsfSxnZXRCeUFkZHJlc3M6ZnVuY3Rpb24oYSxkKXtmb3IodmFyIGI9XHJcbnRoaXMuJC5kb2N1bWVudEVsZW1lbnQsYz0wO2ImJmM8YS5sZW5ndGg7YysrKXt2YXIgZT1hW2NdO2lmKGQpZm9yKHZhciBnPS0xLGw9MDtsPGIuY2hpbGROb2Rlcy5sZW5ndGg7bCsrKXt2YXIgaz1iLmNoaWxkTm9kZXNbbF07aWYoITAhPT1kfHwzIT1rLm5vZGVUeXBlfHwhay5wcmV2aW91c1NpYmxpbmd8fDMhPWsucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlKWlmKGcrKyxnPT1lKXtiPWs7YnJlYWt9fWVsc2UgYj1iLmNoaWxkTm9kZXNbZV19cmV0dXJuIGI/bmV3IENLRURJVE9SLmRvbS5ub2RlKGIpOm51bGx9LGdldEVsZW1lbnRzQnlUYWc6ZnVuY3Rpb24oYSxkKXtDS0VESVRPUi5lbnYuaWUmJjg+PWRvY3VtZW50LmRvY3VtZW50TW9kZXx8IWR8fChhPWQrXCI6XCIrYSk7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20ubm9kZUxpc3QodGhpcy4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKX0sZ2V0SGVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbnJldHVybiBhPWE/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEpOnRoaXMuZ2V0RG9jdW1lbnRFbGVtZW50KCkuYXBwZW5kKG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImhlYWRcIiksITApfSxnZXRCb2R5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudCh0aGlzLiQuYm9keSl9LGdldERvY3VtZW50RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQodGhpcy4kLmRvY3VtZW50RWxlbWVudCl9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLndpbmRvdyh0aGlzLiQucGFyZW50V2luZG93fHx0aGlzLiQuZGVmYXVsdFZpZXcpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLiQub3BlbihcInRleHQvaHRtbFwiLFwicmVwbGFjZVwiKTtDS0VESVRPUi5lbnYuaWUmJihhPWEucmVwbGFjZSgvKD86Xlxccyo8IURPQ1RZUEVbXj5dKj8+KXxeL2ksJyRcXHgyNlxcblxceDNjc2NyaXB0IGRhdGEtY2tlLXRlbXBcXHgzZFwiMVwiXFx4M2UoJytcclxuQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO1xceDNjL3NjcmlwdFxceDNlXCIpKTt0aGlzLiQud3JpdGUoYSk7dGhpcy4kLmNsb3NlKCl9LGZpbmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20ubm9kZUxpc3QodGhpcy4kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkpfSxmaW5kT25lOmZ1bmN0aW9uKGEpe3JldHVybihhPXRoaXMuJC5xdWVyeVNlbGVjdG9yKGEpKT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6bnVsbH0sX2dldEh0bWw1U2hpdkZyYWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1c3RvbURhdGEoXCJodG1sNVNoaXZGcmFnXCIpO2F8fChhPXRoaXMuJC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksQ0tFRElUT1IudG9vbHMuZW5hYmxlSHRtbDVFbGVtZW50cyhhLCEwKSx0aGlzLnNldEN1c3RvbURhdGEoXCJodG1sNVNoaXZGcmFnXCIsYSkpO3JldHVybiBhfX0pO0NLRURJVE9SLmRvbS5ub2RlTGlzdD1mdW5jdGlvbihhKXt0aGlzLiQ9YX07XHJcbkNLRURJVE9SLmRvbS5ub2RlTGlzdC5wcm90b3R5cGU9e2NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5sZW5ndGh9LGdldEl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YXx8YT49dGhpcy4kLmxlbmd0aD9udWxsOihhPXRoaXMuJFthXSk/bmV3IENLRURJVE9SLmRvbS5ub2RlKGEpOm51bGx9fTtDS0VESVRPUi5kb20uZWxlbWVudD1mdW5jdGlvbihhLGQpe1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT0oZD9kLiQ6ZG9jdW1lbnQpLmNyZWF0ZUVsZW1lbnQoYSkpO0NLRURJVE9SLmRvbS5kb21PYmplY3QuY2FsbCh0aGlzLGEpfTtDS0VESVRPUi5kb20uZWxlbWVudC5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuKGE9XCJzdHJpbmdcIj09dHlwZW9mIGE/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSl8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGEpWzBdOmEpJiYoYS4kP2E6bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEpKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlPW5ldyBDS0VESVRPUi5kb20ubm9kZTtcclxuQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWw9ZnVuY3Rpb24oYSxkKXt2YXIgYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJkaXZcIixkKTtiLnNldEh0bWwoYSk7cmV0dXJuIGIuZ2V0Rmlyc3QoKS5yZW1vdmUoKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyPWZ1bmN0aW9uKGEsZCxiLGMpe3ZhciBlPWQuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIpfHxkLnNldEN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9pZFwiLENLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKSkuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIpLGc9ZC5nZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfbmFtZXNcIil8fGQuc2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX25hbWVzXCIse30pLmdldEN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9uYW1lc1wiKTthW2VdPWQ7Z1tiXT0xO3JldHVybiBkLnNldEN1c3RvbURhdGEoYixjKX07XHJcbkNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2Vycz1mdW5jdGlvbihhKXtmb3IodmFyIGQgaW4gYSlDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhck1hcmtlcnMoYSxhW2RdLDEpfTtDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhck1hcmtlcnM9ZnVuY3Rpb24oYSxkLGIpe3ZhciBjPWQuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX25hbWVzXCIpLGU9ZC5nZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfaWRcIiksZztmb3IoZyBpbiBjKWQucmVtb3ZlQ3VzdG9tRGF0YShnKTtkLnJlbW92ZUN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9uYW1lc1wiKTtiJiYoZC5yZW1vdmVDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfaWRcIiksZGVsZXRlIGFbZV0pfTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3JldHVybi0xPChcIiBcIithK1wiIFwiKS5yZXBsYWNlKGcsXCIgXCIpLmluZGV4T2YoXCIgXCIrYitcIiBcIil9ZnVuY3Rpb24gZChhKXt2YXIgYj0hMDthLiQuaWR8fChhLiQuaWQ9XCJja2VfdG1wX1wiK0NLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKSxiPSExKTtyZXR1cm4gZnVuY3Rpb24oKXtifHxhLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX1mdW5jdGlvbiBiKGEsYil7cmV0dXJuXCIjXCIrYS4kLmlkK1wiIFwiK2Iuc3BsaXQoLyxcXHMqLykuam9pbihcIiwgI1wiK2EuJC5pZCtcIiBcIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MCxjPTAsZj1sW2FdLmxlbmd0aDtjPGY7YysrKWIrPXBhcnNlSW50KHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShsW2FdW2NdKXx8MCwxMCl8fDA7cmV0dXJuIGJ9dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIl9cIikuY2xhc3NMaXN0LGU9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBlJiZudWxsIT09U3RyaW5nKGUuYWRkKS5tYXRjaCgvXFxbTmF0aXZlIGNvZGVcXF0vZ2kpLFxyXG5nPS9bXFxuXFx0XFxyXS9nO0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9FTEVNRU5ULGFkZENsYXNzOmU/ZnVuY3Rpb24oYSl7dGhpcy4kLmNsYXNzTGlzdC5hZGQoYSk7cmV0dXJuIHRoaXN9OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuJC5jbGFzc05hbWU7YyYmKGEoYyxiKXx8KGMrPVwiIFwiK2IpKTt0aGlzLiQuY2xhc3NOYW1lPWN8fGI7cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmU/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kO2IuY2xhc3NMaXN0LnJlbW92ZShhKTtiLmNsYXNzTmFtZXx8Yi5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTtyZXR1cm4gdGhpc306ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtjJiZhKGMsYikmJigoYz1jLnJlcGxhY2UobmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiK2IrXCIoP1xceDNkXFxcXHN8JClcIiksXCJcIikucmVwbGFjZSgvXlxccysvLFwiXCIpKT90aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsXHJcbmMpOnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIikpO3JldHVybiB0aGlzfSxoYXNDbGFzczpmdW5jdGlvbihiKXtyZXR1cm4gYSh0aGlzLiQuY2xhc3NOYW1lLGIpfSxhcHBlbmQ6ZnVuY3Rpb24oYSxiKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9dGhpcy5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoYSkpO2I/dGhpcy4kLmluc2VydEJlZm9yZShhLiQsdGhpcy4kLmZpcnN0Q2hpbGQpOnRoaXMuJC5hcHBlbmRDaGlsZChhLiQpO3JldHVybiBhfSxhcHBlbmRIdG1sOmZ1bmN0aW9uKGEpe2lmKHRoaXMuJC5jaGlsZE5vZGVzLmxlbmd0aCl7dmFyIGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiZGl2XCIsdGhpcy5nZXREb2N1bWVudCgpKTtiLnNldEh0bWwoYSk7Yi5tb3ZlQ2hpbGRyZW4odGhpcyl9ZWxzZSB0aGlzLnNldEh0bWwoYSl9LGFwcGVuZFRleHQ6ZnVuY3Rpb24oYSl7bnVsbCE9dGhpcy4kLnRleHQmJkNLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbj9cclxudGhpcy4kLnRleHQrPWE6dGhpcy5hcHBlbmQobmV3IENLRURJVE9SLmRvbS50ZXh0KGEpKX0sYXBwZW5kQm9ndXM6ZnVuY3Rpb24oYSl7aWYoYXx8Q0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXIpe2ZvcihhPXRoaXMuZ2V0TGFzdCgpO2EmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYhQ0tFRElUT1IudG9vbHMucnRyaW0oYS5nZXRUZXh0KCkpOylhPWEuZ2V0UHJldmlvdXMoKTthJiZhLmlzJiZhLmlzKFwiYnJcIil8fChhPXRoaXMuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KFwiYnJcIiksQ0tFRElUT1IuZW52LmdlY2tvJiZhLnNldEF0dHJpYnV0ZShcInR5cGVcIixcIl9tb3pcIiksdGhpcy5hcHBlbmQoYSkpfX0sYnJlYWtQYXJlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMuZ2V0RG9jdW1lbnQoKSk7Yy5zZXRTdGFydEFmdGVyKHRoaXMpO2Muc2V0RW5kQWZ0ZXIoYSk7dmFyIGY9Yy5leHRyYWN0Q29udGVudHMoITEsYnx8ITEpO2MuaW5zZXJ0Tm9kZSh0aGlzLnJlbW92ZSgpKTtcclxuZi5pbnNlcnRBZnRlck5vZGUodGhpcyl9LGNvbnRhaW5zOmRvY3VtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGEpe3JldHVybiEhKHRoaXMuJC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhLiQpJjE2KX06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kO3JldHVybiBhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVD9iLmNvbnRhaW5zKGEuZ2V0UGFyZW50KCkuJCk6YiE9YS4kJiZiLmNvbnRhaW5zKGEuJCl9LGZvY3VzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RyeXt0aGlzLiQuZm9jdXMoKX1jYXRjaChiKXt9fXJldHVybiBmdW5jdGlvbihiKXtiP0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoYSwxMDAsdGhpcyk6YS5jYWxsKHRoaXMpfX0oKSxnZXRIdG1sOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLmlubmVySFRNTDtyZXR1cm4gQ0tFRElUT1IuZW52LmllP2EucmVwbGFjZSgvPFxcP1tePl0qPi9nLFwiXCIpOmF9LGdldE91dGVySHRtbDpmdW5jdGlvbigpe2lmKHRoaXMuJC5vdXRlckhUTUwpcmV0dXJuIHRoaXMuJC5vdXRlckhUTUwucmVwbGFjZSgvPFxcP1tePl0qPi8sXHJcblwiXCIpO3ZhciBhPXRoaXMuJC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5hcHBlbmRDaGlsZCh0aGlzLiQuY2xvbmVOb2RlKCEwKSk7cmV0dXJuIGEuaW5uZXJIVE1MfSxnZXRDbGllbnRSZWN0OmZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHRoaXMuJC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7IWEud2lkdGgmJihhLndpZHRoPWEucmlnaHQtYS5sZWZ0KTshYS5oZWlnaHQmJihhLmhlaWdodD1hLmJvdHRvbS1hLnRvcCk7cmV0dXJuIGF9LHNldEh0bWw6Q0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uP2Z1bmN0aW9uKGEpe3RyeXt2YXIgYj10aGlzLiQ7aWYodGhpcy5nZXRQYXJlbnQoKSlyZXR1cm4gYi5pbm5lckhUTUw9YTt2YXIgYz10aGlzLmdldERvY3VtZW50KCkuX2dldEh0bWw1U2hpdkZyYWcoKTtjLmFwcGVuZENoaWxkKGIpO2IuaW5uZXJIVE1MPWE7Yy5yZW1vdmVDaGlsZChiKTtyZXR1cm4gYX1jYXRjaChmKXt0aGlzLiQuaW5uZXJIVE1MPVxyXG5cIlwiO2I9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiYm9keVwiLHRoaXMuZ2V0RG9jdW1lbnQoKSk7Yi4kLmlubmVySFRNTD1hO2ZvcihiPWIuZ2V0Q2hpbGRyZW4oKTtiLmNvdW50KCk7KXRoaXMuYXBwZW5kKGIuZ2V0SXRlbSgwKSk7cmV0dXJuIGF9fTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kLmlubmVySFRNTD1hfSxzZXRUZXh0OmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7YS5pbm5lckhUTUw9XCJ4XCI7YT1hLnRleHRDb250ZW50O3JldHVybiBmdW5jdGlvbihiKXt0aGlzLiRbYT9cInRleHRDb250ZW50XCI6XCJpbm5lclRleHRcIl09Yn19KCksZ2V0QXR0cmlidXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJC5nZXRBdHRyaWJ1dGUoYSwyKX07cmV0dXJuIENLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpP2Z1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIFwiY2xhc3NcIjphPVxyXG5cImNsYXNzTmFtZVwiO2JyZWFrO2Nhc2UgXCJodHRwLWVxdWl2XCI6YT1cImh0dHBFcXVpdlwiO2JyZWFrO2Nhc2UgXCJuYW1lXCI6cmV0dXJuIHRoaXMuJC5uYW1lO2Nhc2UgXCJ0YWJpbmRleFwiOnJldHVybiBhPXRoaXMuJC5nZXRBdHRyaWJ1dGUoYSwyKSwwIT09YSYmMD09PXRoaXMuJC50YWJJbmRleCYmKGE9bnVsbCksYTtjYXNlIFwiY2hlY2tlZFwiOnJldHVybiBhPXRoaXMuJC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShhKSwoYS5zcGVjaWZpZWQ/YS5ub2RlVmFsdWU6dGhpcy4kLmNoZWNrZWQpP1wiY2hlY2tlZFwiOm51bGw7Y2FzZSBcImhzcGFjZVwiOmNhc2UgXCJ2YWx1ZVwiOnJldHVybiB0aGlzLiRbYV07Y2FzZSBcInN0eWxlXCI6cmV0dXJuIHRoaXMuJC5zdHlsZS5jc3NUZXh0O2Nhc2UgXCJjb250ZW50ZWRpdGFibGVcIjpjYXNlIFwiY29udGVudEVkaXRhYmxlXCI6cmV0dXJuIHRoaXMuJC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImNvbnRlbnRFZGl0YWJsZVwiKS5zcGVjaWZpZWQ/dGhpcy4kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKTpcclxubnVsbH1yZXR1cm4gdGhpcy4kLmdldEF0dHJpYnV0ZShhLDIpfTphfSgpLGdldENoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20ubm9kZUxpc3QodGhpcy4kLmNoaWxkTm9kZXMpfSxnZXRDb21wdXRlZFN0eWxlOmRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2Z1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0V2luZG93KCkuJC5nZXRDb21wdXRlZFN0eWxlKHRoaXMuJCxudWxsKTtyZXR1cm4gYj9iLmdldFByb3BlcnR5VmFsdWUoYSk6XCJcIn06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJC5jdXJyZW50U3R5bGVbQ0tFRElUT1IudG9vbHMuY3NzU3R5bGVUb0RvbVN0eWxlKGEpXX0sZ2V0RHRkOmZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IuZHRkW3RoaXMuZ2V0TmFtZSgpXTt0aGlzLmdldER0ZD1mdW5jdGlvbigpe3JldHVybiBhfTtyZXR1cm4gYX0sZ2V0RWxlbWVudHNCeVRhZzpDS0VESVRPUi5kb20uZG9jdW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWcsXHJcbmdldFRhYkluZGV4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLnRhYkluZGV4O3JldHVybiAwIT09YXx8Q0tFRElUT1IuZHRkLiR0YWJJbmRleFt0aGlzLmdldE5hbWUoKV18fDA9PT1wYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInRhYmluZGV4XCIpLDEwKT9hOi0xfSxnZXRUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC50ZXh0Q29udGVudHx8dGhpcy4kLmlubmVyVGV4dHx8XCJcIn0sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQoKS5nZXRXaW5kb3coKX0sZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLmlkfHxudWxsfSxnZXROYW1lQXR0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5uYW1lfHxudWxsfSxnZXROYW1lOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoQ0tFRElUT1IuZW52LmllJiY4Pj1kb2N1bWVudC5kb2N1bWVudE1vZGUpe3ZhciBiPXRoaXMuJC5zY29wZU5hbWU7XCJIVE1MXCIhPVxyXG5iJiYoYT1iLnRvTG93ZXJDYXNlKCkrXCI6XCIrYSl9dGhpcy5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O3JldHVybiB0aGlzLmdldE5hbWUoKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLnZhbHVlfSxnZXRGaXJzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQuZmlyc3RDaGlsZDsoYj1iJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoYikpJiZhJiYhYShiKSYmKGI9Yi5nZXROZXh0KGEpKTtyZXR1cm4gYn0sZ2V0TGFzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQubGFzdENoaWxkOyhiPWImJm5ldyBDS0VESVRPUi5kb20ubm9kZShiKSkmJmEmJiFhKGIpJiYoYj1iLmdldFByZXZpb3VzKGEpKTtyZXR1cm4gYn0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJC5zdHlsZVtDS0VESVRPUi50b29scy5jc3NTdHlsZVRvRG9tU3R5bGUoYSldfSxpczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TmFtZSgpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pcmV0dXJuISFhcmd1bWVudHNbMF1bYV07XHJcbmZvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspaWYoYXJndW1lbnRzW2JdPT1hKXJldHVybiEwO3JldHVybiExfSxpc0VkaXRhYmxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TmFtZSgpO3JldHVybiB0aGlzLmlzUmVhZE9ubHkoKXx8XCJub25lXCI9PXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcImRpc3BsYXlcIil8fFwiaGlkZGVuXCI9PXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcInZpc2liaWxpdHlcIil8fENLRURJVE9SLmR0ZC4kbm9uRWRpdGFibGVbYl18fENLRURJVE9SLmR0ZC4kZW1wdHlbYl18fHRoaXMuaXMoXCJhXCIpJiYodGhpcy5kYXRhKFwiY2tlLXNhdmVkLW5hbWVcIil8fHRoaXMuaGFzQXR0cmlidXRlKFwibmFtZVwiKSkmJiF0aGlzLmdldENoaWxkQ291bnQoKT8hMTohMSE9PWE/KGE9Q0tFRElUT1IuZHRkW2JdfHxDS0VESVRPUi5kdGQuc3BhbiwhKCFhfHwhYVtcIiNcIl0pKTohMH0saXNJZGVudGljYWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgwLDEpO2E9YS5jbG9uZSgwLFxyXG4xKTtiLnJlbW92ZUF0dHJpYnV0ZXMoW1wiX21vel9kaXJ0eVwiLFwiZGF0YS1ja2UtZXhwYW5kb1wiLFwiZGF0YS1ja2Utc2F2ZWQtaHJlZlwiLFwiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXSk7YS5yZW1vdmVBdHRyaWJ1dGVzKFtcIl9tb3pfZGlydHlcIixcImRhdGEtY2tlLWV4cGFuZG9cIixcImRhdGEtY2tlLXNhdmVkLWhyZWZcIixcImRhdGEtY2tlLXNhdmVkLW5hbWVcIl0pO2lmKGIuJC5pc0VxdWFsTm9kZSlyZXR1cm4gYi4kLnN0eWxlLmNzc1RleHQ9Q0tFRElUT1IudG9vbHMubm9ybWFsaXplQ3NzVGV4dChiLiQuc3R5bGUuY3NzVGV4dCksYS4kLnN0eWxlLmNzc1RleHQ9Q0tFRElUT1IudG9vbHMubm9ybWFsaXplQ3NzVGV4dChhLiQuc3R5bGUuY3NzVGV4dCksYi4kLmlzRXF1YWxOb2RlKGEuJCk7Yj1iLmdldE91dGVySHRtbCgpO2E9YS5nZXRPdXRlckh0bWwoKTtpZihDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24mJnRoaXMuaXMoXCJhXCIpKXt2YXIgYz10aGlzLmdldFBhcmVudCgpO1xyXG5jLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGM9Yy5jbG9uZSgpLGMuc2V0SHRtbChiKSxiPWMuZ2V0SHRtbCgpLGMuc2V0SHRtbChhKSxhPWMuZ2V0SHRtbCgpKX1yZXR1cm4gYj09YX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMuJC5vZmZzZXRIZWlnaHR8fHRoaXMuJC5vZmZzZXRXaWR0aCkmJlwiaGlkZGVuXCIhPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcInZpc2liaWxpdHlcIiksYixjO2EmJkNLRURJVE9SLmVudi53ZWJraXQmJihiPXRoaXMuZ2V0V2luZG93KCksIWIuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpKSYmKGM9Yi4kLmZyYW1lRWxlbWVudCkmJihhPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYykpLmlzVmlzaWJsZSgpKSk7cmV0dXJuISFhfSxpc0VtcHR5SW5saW5lUmVtb3ZlYWJsZTpmdW5jdGlvbigpe2lmKCFDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3RoaXMuZ2V0TmFtZSgpXSlyZXR1cm4hMTtmb3IodmFyIGE9dGhpcy5nZXRDaGlsZHJlbigpLFxyXG5iPTAsYz1hLmNvdW50KCk7YjxjO2IrKyl7dmFyIGY9YS5nZXRJdGVtKGIpO2lmKGYudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwhZi5kYXRhKFwiY2tlLWJvb2ttYXJrXCIpKWlmKGYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYhZi5pc0VtcHR5SW5saW5lUmVtb3ZlYWJsZSgpfHxmLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmQ0tFRElUT1IudG9vbHMudHJpbShmLmdldFRleHQoKSkpcmV0dXJuITF9cmV0dXJuITB9LGhhc0F0dHJpYnV0ZXM6Q0tFRElUT1IuZW52LmllJiYoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LnF1aXJrcyk/ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy4kLmF0dHJpYnV0ZXMsYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO3N3aXRjaChjLm5vZGVOYW1lKXtjYXNlIFwiY2xhc3NcIjppZih0aGlzLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpKXJldHVybiEwO2Nhc2UgXCJkYXRhLWNrZS1leHBhbmRvXCI6Y29udGludWU7ZGVmYXVsdDppZihjLnNwZWNpZmllZClyZXR1cm4hMH19cmV0dXJuITF9OlxyXG5mdW5jdGlvbigpe3ZhciBhPXRoaXMuJC5hdHRyaWJ1dGVzLGI9YS5sZW5ndGgsYz17XCJkYXRhLWNrZS1leHBhbmRvXCI6MSxfbW96X2RpcnR5OjF9O3JldHVybiAwPGImJigyPGJ8fCFjW2FbMF0ubm9kZU5hbWVdfHwyPT1iJiYhY1thWzFdLm5vZGVOYW1lXSl9LGhhc0F0dHJpYnV0ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7dmFyIGM9dGhpcy4kLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGIpO2lmKFwiaW5wdXRcIj09dGhpcy5nZXROYW1lKCkpc3dpdGNoKGIpe2Nhc2UgXCJjbGFzc1wiOnJldHVybiAwPHRoaXMuJC5jbGFzc05hbWUubGVuZ3RoO2Nhc2UgXCJjaGVja2VkXCI6cmV0dXJuISF0aGlzLiQuY2hlY2tlZDtjYXNlIFwidmFsdWVcIjpyZXR1cm4gYj10aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIiksXCJjaGVja2JveFwiPT1ifHxcInJhZGlvXCI9PWI/XCJvblwiIT10aGlzLiQudmFsdWU6ISF0aGlzLiQudmFsdWV9cmV0dXJuIGM/Yy5zcGVjaWZpZWQ6ITF9cmV0dXJuIENLRURJVE9SLmVudi5pZT9cclxuOD5DS0VESVRPUi5lbnYudmVyc2lvbj9mdW5jdGlvbihiKXtyZXR1cm5cIm5hbWVcIj09Yj8hIXRoaXMuJC5uYW1lOmEuY2FsbCh0aGlzLGIpfTphOmZ1bmN0aW9uKGEpe3JldHVybiEhdGhpcy4kLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfX0oKSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIil9LG1vdmVDaGlsZHJlbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJDthPWEuJDtpZihjIT1hKXt2YXIgZjtpZihiKWZvcig7Zj1jLmxhc3RDaGlsZDspYS5pbnNlcnRCZWZvcmUoYy5yZW1vdmVDaGlsZChmKSxhLmZpcnN0Q2hpbGQpO2Vsc2UgZm9yKDtmPWMuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChjLnJlbW92ZUNoaWxkKGYpKX19LG1lcmdlU2libGluZ3M6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyxmKXtpZihjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7Zm9yKHZhciBkPVtdO2MuZGF0YShcImNrZS1ib29rbWFya1wiKXx8Yy5pc0VtcHR5SW5saW5lUmVtb3ZlYWJsZSgpOylpZihkLnB1c2goYyksXHJcbmM9Zj9jLmdldE5leHQoKTpjLmdldFByZXZpb3VzKCksIWN8fGMudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UKXJldHVybjtpZihiLmlzSWRlbnRpY2FsKGMpKXtmb3IodmFyIGs9Zj9iLmdldExhc3QoKTpiLmdldEZpcnN0KCk7ZC5sZW5ndGg7KWQuc2hpZnQoKS5tb3ZlKGIsIWYpO2MubW92ZUNoaWxkcmVuKGIsIWYpO2MucmVtb3ZlKCk7ayYmay50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmsubWVyZ2VTaWJsaW5ncygpfX19cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKCExPT09Ynx8Q0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVt0aGlzLmdldE5hbWUoKV18fHRoaXMuaXMoXCJhXCIpKWEodGhpcyx0aGlzLmdldE5leHQoKSwhMCksYSh0aGlzLHRoaXMuZ2V0UHJldmlvdXMoKSl9fSgpLHNob3c6ZnVuY3Rpb24oKXt0aGlzLnNldFN0eWxlcyh7ZGlzcGxheTpcIlwiLHZpc2liaWxpdHk6XCJcIn0pfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGIpe3RoaXMuJC5zZXRBdHRyaWJ1dGUoYSxcclxuYik7cmV0dXJuIHRoaXN9O3JldHVybiBDS0VESVRPUi5lbnYuaWUmJihDS0VESVRPUi5lbnYuaWU3Q29tcGF0fHxDS0VESVRPUi5lbnYucXVpcmtzKT9mdW5jdGlvbihiLGMpe1wiY2xhc3NcIj09Yj90aGlzLiQuY2xhc3NOYW1lPWM6XCJzdHlsZVwiPT1iP3RoaXMuJC5zdHlsZS5jc3NUZXh0PWM6XCJ0YWJpbmRleFwiPT1iP3RoaXMuJC50YWJJbmRleD1jOlwiY2hlY2tlZFwiPT1iP3RoaXMuJC5jaGVja2VkPWM6XCJjb250ZW50ZWRpdGFibGVcIj09Yj9hLmNhbGwodGhpcyxcImNvbnRlbnRFZGl0YWJsZVwiLGMpOmEuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfTpDS0VESVRPUi5lbnYuaWU4Q29tcGF0JiZDS0VESVRPUi5lbnYuc2VjdXJlP2Z1bmN0aW9uKGIsYyl7aWYoXCJzcmNcIj09YiYmYy5tYXRjaCgvXmh0dHA6XFwvXFwvLykpdHJ5e2EuYXBwbHkodGhpcyxhcmd1bWVudHMpfWNhdGNoKGYpe31lbHNlIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfTphfSgpLHNldEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpdGhpcy5zZXRBdHRyaWJ1dGUoYixcclxuYVtiXSk7cmV0dXJuIHRoaXN9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuJC52YWx1ZT1hO3JldHVybiB0aGlzfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXt0aGlzLiQucmVtb3ZlQXR0cmlidXRlKGEpfTtyZXR1cm4gQ0tFRElUT1IuZW52LmllJiYoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LnF1aXJrcyk/ZnVuY3Rpb24oYSl7XCJjbGFzc1wiPT1hP2E9XCJjbGFzc05hbWVcIjpcInRhYmluZGV4XCI9PWE/YT1cInRhYkluZGV4XCI6XCJjb250ZW50ZWRpdGFibGVcIj09YSYmKGE9XCJjb250ZW50RWRpdGFibGVcIik7dGhpcy4kLnJlbW92ZUF0dHJpYnV0ZShhKX06YX0oKSxyZW1vdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpZm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYVtiXSk7ZWxzZSBmb3IoYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJnRoaXMucmVtb3ZlQXR0cmlidXRlKGIpfSxcclxucmVtb3ZlU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kLnN0eWxlO2lmKGIucmVtb3ZlUHJvcGVydHl8fFwiYm9yZGVyXCIhPWEmJlwibWFyZ2luXCIhPWEmJlwicGFkZGluZ1wiIT1hKWIucmVtb3ZlUHJvcGVydHk/Yi5yZW1vdmVQcm9wZXJ0eShhKTpiLnJlbW92ZUF0dHJpYnV0ZShDS0VESVRPUi50b29scy5jc3NTdHlsZVRvRG9tU3R5bGUoYSkpLHRoaXMuJC5zdHlsZS5jc3NUZXh0fHx0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO2Vsc2V7dmFyIGM9W1widG9wXCIsXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm90dG9tXCJdLGY7XCJib3JkZXJcIj09YSYmKGY9W1wiY29sb3JcIixcInN0eWxlXCIsXCJ3aWR0aFwiXSk7Zm9yKHZhciBiPVtdLGQ9MDtkPGMubGVuZ3RoO2QrKylpZihmKWZvcih2YXIgZT0wO2U8Zi5sZW5ndGg7ZSsrKWIucHVzaChbYSxjW2RdLGZbZV1dLmpvaW4oXCItXCIpKTtlbHNlIGIucHVzaChbYSxjW2RdXS5qb2luKFwiLVwiKSk7Zm9yKGE9MDthPGIubGVuZ3RoO2ErKyl0aGlzLnJlbW92ZVN0eWxlKGJbYV0pfX0sXHJcbnNldFN0eWxlOmZ1bmN0aW9uKGEsYil7dGhpcy4kLnN0eWxlW0NLRURJVE9SLnRvb2xzLmNzc1N0eWxlVG9Eb21TdHlsZShhKV09YjtyZXR1cm4gdGhpc30sc2V0U3R5bGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXRoaXMuc2V0U3R5bGUoYixhW2JdKTtyZXR1cm4gdGhpc30sc2V0T3BhY2l0eTpmdW5jdGlvbihhKXtDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24/KGE9TWF0aC5yb3VuZCgxMDAqYSksdGhpcy5zZXRTdHlsZShcImZpbHRlclwiLDEwMDw9YT9cIlwiOlwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKG9wYWNpdHlcXHgzZFwiK2ErXCIpXCIpKTp0aGlzLnNldFN0eWxlKFwib3BhY2l0eVwiLGEpfSx1bnNlbGVjdGFibGU6ZnVuY3Rpb24oKXt0aGlzLnNldFN0eWxlcyhDS0VESVRPUi50b29scy5jc3NWZW5kb3JQcmVmaXgoXCJ1c2VyLXNlbGVjdFwiLFwibm9uZVwiKSk7aWYoQ0tFRElUT1IuZW52LmllKXt0aGlzLnNldEF0dHJpYnV0ZShcInVuc2VsZWN0YWJsZVwiLFxyXG5cIm9uXCIpO2Zvcih2YXIgYSxiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZyhcIipcIiksYz0wLGY9Yi5jb3VudCgpO2M8ZjtjKyspYT1iLmdldEl0ZW0oYyksYS5zZXRBdHRyaWJ1dGUoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfX0sZ2V0UG9zaXRpb25lZEFuY2VzdG9yOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXM7XCJodG1sXCIhPWEuZ2V0TmFtZSgpOyl7aWYoXCJzdGF0aWNcIiE9YS5nZXRDb21wdXRlZFN0eWxlKFwicG9zaXRpb25cIikpcmV0dXJuIGE7YT1hLmdldFBhcmVudCgpfXJldHVybiBudWxsfSxnZXREb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz0wLGY9dGhpcy5nZXREb2N1bWVudCgpLGQ9Zi5nZXRCb2R5KCksZT1cIkJhY2tDb21wYXRcIj09Zi4kLmNvbXBhdE1vZGU7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7dmFyIHU9dGhpcy4kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGc9Zi4kLmRvY3VtZW50RWxlbWVudCxxPWcuY2xpZW50VG9wfHxcclxuZC4kLmNsaWVudFRvcHx8MCx5PWcuY2xpZW50TGVmdHx8ZC4kLmNsaWVudExlZnR8fDAsbD0hMDtDS0VESVRPUi5lbnYuaWUmJihsPWYuZ2V0RG9jdW1lbnRFbGVtZW50KCkuY29udGFpbnModGhpcyksZj1mLmdldEJvZHkoKS5jb250YWlucyh0aGlzKSxsPWUmJmZ8fCFlJiZsKTtsJiYoQ0tFRElUT1IuZW52LndlYmtpdHx8Q0tFRElUT1IuZW52LmllJiYxMjw9Q0tFRElUT1IuZW52LnZlcnNpb24/KGI9ZC4kLnNjcm9sbExlZnR8fGcuc2Nyb2xsTGVmdCxjPWQuJC5zY3JvbGxUb3B8fGcuc2Nyb2xsVG9wKTooYz1lP2QuJDpnLGI9Yy5zY3JvbGxMZWZ0LGM9Yy5zY3JvbGxUb3ApLGI9dS5sZWZ0K2IteSxjPXUudG9wK2MtcSl9ZWxzZSBmb3IocT10aGlzLHk9bnVsbDtxJiZcImJvZHlcIiE9cS5nZXROYW1lKCkmJlwiaHRtbFwiIT1xLmdldE5hbWUoKTspe2IrPXEuJC5vZmZzZXRMZWZ0LXEuJC5zY3JvbGxMZWZ0O2MrPXEuJC5vZmZzZXRUb3AtcS4kLnNjcm9sbFRvcDtxLmVxdWFscyh0aGlzKXx8XHJcbihiKz1xLiQuY2xpZW50TGVmdHx8MCxjKz1xLiQuY2xpZW50VG9wfHwwKTtmb3IoO3kmJiF5LmVxdWFscyhxKTspYi09eS4kLnNjcm9sbExlZnQsYy09eS4kLnNjcm9sbFRvcCx5PXkuZ2V0UGFyZW50KCk7eT1xO3E9KHU9cS4kLm9mZnNldFBhcmVudCk/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KHUpOm51bGx9YSYmKHU9dGhpcy5nZXRXaW5kb3coKSxxPWEuZ2V0V2luZG93KCksIXUuZXF1YWxzKHEpJiZ1LiQuZnJhbWVFbGVtZW50JiYoYT0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50KHUuJC5mcmFtZUVsZW1lbnQpKS5nZXREb2N1bWVudFBvc2l0aW9uKGEpLGIrPWEueCxjKz1hLnkpKTtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0fHwhQ0tFRElUT1IuZW52LmdlY2tvfHxlfHwoYis9dGhpcy4kLmNsaWVudExlZnQ/MTowLGMrPXRoaXMuJC5jbGllbnRUb3A/MTowKTtyZXR1cm57eDpiLHk6Y319LHNjcm9sbEludG9WaWV3OmZ1bmN0aW9uKGEpe3ZhciBiPVxyXG50aGlzLmdldFBhcmVudCgpO2lmKGIpe2RvIGlmKChiLiQuY2xpZW50V2lkdGgmJmIuJC5jbGllbnRXaWR0aDxiLiQuc2Nyb2xsV2lkdGh8fGIuJC5jbGllbnRIZWlnaHQmJmIuJC5jbGllbnRIZWlnaHQ8Yi4kLnNjcm9sbEhlaWdodCkmJiFiLmlzKFwiYm9keVwiKSYmdGhpcy5zY3JvbGxJbnRvUGFyZW50KGIsYSwxKSxiLmlzKFwiaHRtbFwiKSl7dmFyIGM9Yi5nZXRXaW5kb3coKTt0cnl7dmFyIGY9Yy4kLmZyYW1lRWxlbWVudDtmJiYoYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZikpfWNhdGNoKGQpe319d2hpbGUoYj1iLmdldFBhcmVudCgpKX19LHNjcm9sbEludG9QYXJlbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBmLGQsZSx1O2Z1bmN0aW9uIGcoYixjKXsvYm9keXxodG1sLy50ZXN0KGEuZ2V0TmFtZSgpKT9hLmdldFdpbmRvdygpLiQuc2Nyb2xsQnkoYixjKTooYS4kLnNjcm9sbExlZnQrPWIsYS4kLnNjcm9sbFRvcCs9Yyl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjPXt4OjAseTowfTtpZighYS5pcyhsP1xyXG5cImJvZHlcIjpcImh0bWxcIikpe3ZhciBmPWEuJC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtjLng9Zi5sZWZ0O2MueT1mLnRvcH1mPWEuZ2V0V2luZG93KCk7Zi5lcXVhbHMoYil8fChmPXEoQ0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGYuJC5mcmFtZUVsZW1lbnQpLGIpLGMueCs9Zi54LGMueSs9Zi55KTtyZXR1cm4gY31mdW5jdGlvbiB5KGEsYil7cmV0dXJuIHBhcnNlSW50KGEuZ2V0Q29tcHV0ZWRTdHlsZShcIm1hcmdpbi1cIitiKXx8MCwxMCl8fDB9IWEmJihhPXRoaXMuZ2V0V2luZG93KCkpO2U9YS5nZXREb2N1bWVudCgpO3ZhciBsPVwiQmFja0NvbXBhdFwiPT1lLiQuY29tcGF0TW9kZTthIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLndpbmRvdyYmKGE9bD9lLmdldEJvZHkoKTplLmdldERvY3VtZW50RWxlbWVudCgpKTtlPWEuZ2V0V2luZG93KCk7ZD1xKHRoaXMsZSk7dmFyIHQ9cShhLGUpLHo9dGhpcy4kLm9mZnNldEhlaWdodDtmPXRoaXMuJC5vZmZzZXRXaWR0aDt2YXIgaD1hLiQuY2xpZW50SGVpZ2h0LFxyXG5wPWEuJC5jbGllbnRXaWR0aDtlPWQueC15KHRoaXMsXCJsZWZ0XCIpLXQueHx8MDt1PWQueS15KHRoaXMsXCJ0b3BcIiktdC55fHwwO2Y9ZC54K2YreSh0aGlzLFwicmlnaHRcIiktKHQueCtwKXx8MDtkPWQueSt6K3kodGhpcyxcImJvdHRvbVwiKS0odC55K2gpfHwwOygwPnV8fDA8ZCkmJmcoMCwhMD09PWI/dTohMT09PWI/ZDowPnU/dTpkKTtjJiYoMD5lfHwwPGYpJiZnKDA+ZT9lOmYsMCl9LHNldFN0YXRlOmZ1bmN0aW9uKGEsYixjKXtiPWJ8fFwiY2tlXCI7c3dpdGNoKGEpe2Nhc2UgQ0tFRElUT1IuVFJJU1RBVEVfT046dGhpcy5hZGRDbGFzcyhiK1wiX29uXCIpO3RoaXMucmVtb3ZlQ2xhc3MoYitcIl9vZmZcIik7dGhpcy5yZW1vdmVDbGFzcyhiK1wiX2Rpc2FibGVkXCIpO2MmJnRoaXMuc2V0QXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIsITApO2MmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTticmVhaztjYXNlIENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOnRoaXMuYWRkQ2xhc3MoYitcclxuXCJfZGlzYWJsZWRcIik7dGhpcy5yZW1vdmVDbGFzcyhiK1wiX29mZlwiKTt0aGlzLnJlbW92ZUNsYXNzKGIrXCJfb25cIik7YyYmdGhpcy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsITApO2MmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIpO2JyZWFrO2RlZmF1bHQ6dGhpcy5hZGRDbGFzcyhiK1wiX29mZlwiKSx0aGlzLnJlbW92ZUNsYXNzKGIrXCJfb25cIiksdGhpcy5yZW1vdmVDbGFzcyhiK1wiX2Rpc2FibGVkXCIpLGMmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIpLGMmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKX19LGdldEZyYW1lRG9jdW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQ7dHJ5e2EuY29udGVudFdpbmRvdy5kb2N1bWVudH1jYXRjaChiKXthLnNyYz1hLnNyY31yZXR1cm4gYSYmbmV3IENLRURJVE9SLmRvbS5kb2N1bWVudChhLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpfSxjb3B5QXR0cmlidXRlczpmdW5jdGlvbihhLFxyXG5iKXt2YXIgYz10aGlzLiQuYXR0cmlidXRlcztiPWJ8fHt9O2Zvcih2YXIgZj0wO2Y8Yy5sZW5ndGg7ZisrKXt2YXIgZD1jW2ZdLGU9ZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHU7aWYoIShlIGluIGIpKWlmKFwiY2hlY2tlZFwiPT1lJiYodT10aGlzLmdldEF0dHJpYnV0ZShlKSkpYS5zZXRBdHRyaWJ1dGUoZSx1KTtlbHNlIGlmKCFDS0VESVRPUi5lbnYuaWV8fHRoaXMuaGFzQXR0cmlidXRlKGUpKXU9dGhpcy5nZXRBdHRyaWJ1dGUoZSksbnVsbD09PXUmJih1PWQubm9kZVZhbHVlKSxhLnNldEF0dHJpYnV0ZShlLHUpfVwiXCIhPT10aGlzLiQuc3R5bGUuY3NzVGV4dCYmKGEuJC5zdHlsZS5jc3NUZXh0PXRoaXMuJC5zdHlsZS5jc3NUZXh0KX0scmVuYW1lTm9kZTpmdW5jdGlvbihhKXtpZih0aGlzLmdldE5hbWUoKSE9YSl7dmFyIGI9dGhpcy5nZXREb2N1bWVudCgpO2E9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEsYik7dGhpcy5jb3B5QXR0cmlidXRlcyhhKTt0aGlzLm1vdmVDaGlsZHJlbihhKTtcclxudGhpcy5nZXRQYXJlbnQoITApJiZ0aGlzLiQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYS4kLHRoaXMuJCk7YS4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXT10aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdO3RoaXMuJD1hLiQ7ZGVsZXRlIHRoaXMuZ2V0TmFtZX19LGdldENoaWxkOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe3ZhciBmPWIuY2hpbGROb2RlcztpZigwPD1jJiZjPGYubGVuZ3RoKXJldHVybiBmW2NdfXJldHVybiBmdW5jdGlvbihiKXt2YXIgYz10aGlzLiQ7aWYoYi5zbGljZSlmb3IoYj1iLnNsaWNlKCk7MDxiLmxlbmd0aCYmYzspYz1hKGMsYi5zaGlmdCgpKTtlbHNlIGM9YShjLGIpO3JldHVybiBjP25ldyBDS0VESVRPUi5kb20ubm9kZShjKTpudWxsfX0oKSxnZXRDaGlsZENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5jaGlsZE5vZGVzLmxlbmd0aH0sZGlzYWJsZUNvbnRleHRNZW51OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtyZXR1cm4gYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJlxyXG5iLmhhc0NsYXNzKFwiY2tlX2VuYWJsZV9jb250ZXh0X21lbnVcIil9dGhpcy5vbihcImNvbnRleHRtZW51XCIsZnVuY3Rpb24oYil7Yi5kYXRhLmdldFRhcmdldCgpLmdldEFzY2VuZGFudChhLCEwKXx8Yi5kYXRhLnByZXZlbnREZWZhdWx0KCl9KX0sZ2V0RGlyZWN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcImRpcmVjdGlvblwiKXx8dGhpcy5nZXREaXJlY3Rpb24oKXx8dGhpcy5nZXRQYXJlbnQoKSYmdGhpcy5nZXRQYXJlbnQoKS5nZXREaXJlY3Rpb24oMSl8fHRoaXMuZ2V0RG9jdW1lbnQoKS4kLmRpcnx8XCJsdHJcIjp0aGlzLmdldFN0eWxlKFwiZGlyZWN0aW9uXCIpfHx0aGlzLmdldEF0dHJpYnV0ZShcImRpclwiKX0sZGF0YTpmdW5jdGlvbihhLGIpe2E9XCJkYXRhLVwiK2E7aWYodm9pZCAwPT09YilyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYSk7ITE9PT1iP3RoaXMucmVtb3ZlQXR0cmlidXRlKGEpOnRoaXMuc2V0QXR0cmlidXRlKGEsYik7cmV0dXJuIG51bGx9LFxyXG5nZXRFZGl0b3I6ZnVuY3Rpb24oKXt2YXIgYT1DS0VESVRPUi5pbnN0YW5jZXMsYixjO2ZvcihiIGluIGEpaWYoYz1hW2JdLGMuZWxlbWVudC5lcXVhbHModGhpcykmJmMuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUTylyZXR1cm4gYztyZXR1cm4gbnVsbH0sZmluZDpmdW5jdGlvbihhKXt2YXIgYz1kKHRoaXMpO2E9bmV3IENLRURJVE9SLmRvbS5ub2RlTGlzdCh0aGlzLiQucXVlcnlTZWxlY3RvckFsbChiKHRoaXMsYSkpKTtjKCk7cmV0dXJuIGF9LGZpbmRPbmU6ZnVuY3Rpb24oYSl7dmFyIGM9ZCh0aGlzKTthPXRoaXMuJC5xdWVyeVNlbGVjdG9yKGIodGhpcyxhKSk7YygpO3JldHVybiBhP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKTpudWxsfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYixjKXtpZighKGN8fGImJnRoaXMudHlwZSE9YikpdmFyIGY9YSh0aGlzKTtpZighMSE9PWYpe2M9dGhpcy5nZXRDaGlsZHJlbigpO2Zvcih2YXIgZD0wO2Q8Yy5jb3VudCgpO2QrKylmPVxyXG5jLmdldEl0ZW0oZCksZi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/Zi5mb3JFYWNoKGEsYik6YiYmZi50eXBlIT1ifHxhKGYpfX19KTt2YXIgbD17d2lkdGg6W1wiYm9yZGVyLWxlZnQtd2lkdGhcIixcImJvcmRlci1yaWdodC13aWR0aFwiLFwicGFkZGluZy1sZWZ0XCIsXCJwYWRkaW5nLXJpZ2h0XCJdLGhlaWdodDpbXCJib3JkZXItdG9wLXdpZHRoXCIsXCJib3JkZXItYm90dG9tLXdpZHRoXCIsXCJwYWRkaW5nLXRvcFwiLFwicGFkZGluZy1ib3R0b21cIl19O0NLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKGEsYixkKXtcIm51bWJlclwiPT10eXBlb2YgYiYmKCFkfHxDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3N8fChiLT1jLmNhbGwodGhpcyxhKSksdGhpcy5zZXRTdHlsZShhLGIrXCJweFwiKSl9O0NLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKGEsYil7dmFyIGQ9TWF0aC5tYXgodGhpcy4kW1wib2Zmc2V0XCIrQ0tFRElUT1IudG9vbHMuY2FwaXRhbGl6ZShhKV0sXHJcbnRoaXMuJFtcImNsaWVudFwiK0NLRURJVE9SLnRvb2xzLmNhcGl0YWxpemUoYSldKXx8MDtiJiYoZC09Yy5jYWxsKHRoaXMsYSkpO3JldHVybiBkfX0pKCk7Q0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQ9ZnVuY3Rpb24oYSl7YT1hfHxDS0VESVRPUi5kb2N1bWVudDt0aGlzLiQ9YS50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UP2EuJC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk6YX07XHJcbkNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGUsQ0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLHt0eXBlOkNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQsaW5zZXJ0QWZ0ZXJOb2RlOmZ1bmN0aW9uKGEpe2E9YS4kO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy4kLGEubmV4dFNpYmxpbmcpfSxnZXRIdG1sOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiZGl2XCIpO3RoaXMuY2xvbmUoMSwxKS5hcHBlbmRUbyhhKTtyZXR1cm4gYS5nZXRIdG1sKCkucmVwbGFjZSgvXFxzKmRhdGEtY2tlLWV4cGFuZG89XCIuKj9cIi9nLFwiXCIpfX0sITAse2FwcGVuZDoxLGFwcGVuZEJvZ3VzOjEsY2xvbmU6MSxnZXRGaXJzdDoxLGdldEh0bWw6MSxnZXRMYXN0OjEsZ2V0UGFyZW50OjEsZ2V0TmV4dDoxLGdldFByZXZpb3VzOjEsYXBwZW5kVG86MSxtb3ZlQ2hpbGRyZW46MSxpbnNlcnRCZWZvcmU6MSxcclxuaW5zZXJ0QWZ0ZXJOb2RlOjEscmVwbGFjZToxLHRyaW06MSx0eXBlOjEsbHRyaW06MSxydHJpbToxLGdldERvY3VtZW50OjEsZ2V0Q2hpbGRDb3VudDoxLGdldENoaWxkOjEsZ2V0Q2hpbGRyZW46MX0pO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7dmFyIGM9dGhpcy5yYW5nZTtpZih0aGlzLl8uZW5kKXJldHVybiBudWxsO2lmKCF0aGlzLl8uc3RhcnQpe3RoaXMuXy5zdGFydD0xO2lmKGMuY29sbGFwc2VkKXJldHVybiB0aGlzLmVuZCgpLG51bGw7Yy5vcHRpbWl6ZSgpfXZhciBmLGQ9Yy5zdGFydENvbnRhaW5lcjtmPWMuZW5kQ29udGFpbmVyO3ZhciBlPWMuc3RhcnRPZmZzZXQseD1jLmVuZE9mZnNldCx6LGg9dGhpcy5ndWFyZCxwPXRoaXMudHlwZSxtPWE/XCJnZXRQcmV2aW91c1NvdXJjZU5vZGVcIjpcImdldE5leHRTb3VyY2VOb2RlXCI7aWYoIWEmJiF0aGlzLl8uZ3VhcmRMVFIpe3ZhciBDPWYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2Y6Zi5nZXRQYXJlbnQoKSxyPWYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2YuZ2V0Q2hpbGQoeCk6Zi5nZXROZXh0KCk7dGhpcy5fLmd1YXJkTFRSPWZ1bmN0aW9uKGEsYil7cmV0dXJuKCFifHwhQy5lcXVhbHMoYSkpJiYoIXJ8fFxyXG4hYS5lcXVhbHMocikpJiYoYS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFifHwhYS5lcXVhbHMoYy5yb290KSl9fWlmKGEmJiF0aGlzLl8uZ3VhcmRSVEwpe3ZhciBHPWQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2Q6ZC5nZXRQYXJlbnQoKSxnPWQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2U/ZC5nZXRDaGlsZChlLTEpOm51bGw6ZC5nZXRQcmV2aW91cygpO3RoaXMuXy5ndWFyZFJUTD1mdW5jdGlvbihhLGIpe3JldHVybighYnx8IUcuZXF1YWxzKGEpKSYmKCFnfHwhYS5lcXVhbHMoZykpJiYoYS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFifHwhYS5lcXVhbHMoYy5yb290KSl9fXZhciBsPWE/dGhpcy5fLmd1YXJkUlRMOnRoaXMuXy5ndWFyZExUUjt6PWg/ZnVuY3Rpb24oYSxiKXtyZXR1cm4hMT09PWwoYSxiKT8hMTpoKGEsYil9Omw7dGhpcy5jdXJyZW50P2Y9dGhpcy5jdXJyZW50W21dKCExLHAseik6KGE/Zi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJlxyXG4oZj0wPHg/Zi5nZXRDaGlsZCh4LTEpOiExPT09eihmLCEwKT9udWxsOmYuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCEwLHAseikpOihmPWQsZi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJigoZj1mLmdldENoaWxkKGUpKXx8KGY9ITE9PT16KGQsITApP251bGw6ZC5nZXROZXh0U291cmNlTm9kZSghMCxwLHopKSkpLGYmJiExPT09eihmKSYmKGY9bnVsbCkpO2Zvcig7ZiYmIXRoaXMuXy5lbmQ7KXt0aGlzLmN1cnJlbnQ9ZjtpZighdGhpcy5ldmFsdWF0b3J8fCExIT09dGhpcy5ldmFsdWF0b3IoZikpe2lmKCFiKXJldHVybiBmfWVsc2UgaWYoYiYmdGhpcy5ldmFsdWF0b3IpcmV0dXJuITE7Zj1mW21dKCExLHAseil9dGhpcy5lbmQoKTtyZXR1cm4gdGhpcy5jdXJyZW50PW51bGx9ZnVuY3Rpb24gZChiKXtmb3IodmFyIGMsZj1udWxsO2M9YS5jYWxsKHRoaXMsYik7KWY9YztyZXR1cm4gZn1DS0VESVRPUi5kb20ud2Fsa2VyPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKGEpe3RoaXMucmFuZ2U9XHJcbmE7dGhpcy5fPXt9fSxwcm90bzp7ZW5kOmZ1bmN0aW9uKCl7dGhpcy5fLmVuZD0xfSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbCh0aGlzKX0scHJldmlvdXM6ZnVuY3Rpb24oKXtyZXR1cm4gYS5jYWxsKHRoaXMsMSl9LGNoZWNrRm9yd2FyZDpmdW5jdGlvbigpe3JldHVybiExIT09YS5jYWxsKHRoaXMsMCwxKX0sY2hlY2tCYWNrd2FyZDpmdW5jdGlvbigpe3JldHVybiExIT09YS5jYWxsKHRoaXMsMSwxKX0sbGFzdEZvcndhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxsYXN0QmFja3dhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMsMSl9LHJlc2V0OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuY3VycmVudDt0aGlzLl89e319fX0pO3ZhciBiPXtibG9jazoxLFwibGlzdC1pdGVtXCI6MSx0YWJsZToxLFwidGFibGUtcm93LWdyb3VwXCI6MSxcInRhYmxlLWhlYWRlci1ncm91cFwiOjEsXCJ0YWJsZS1mb290ZXItZ3JvdXBcIjoxLFwidGFibGUtcm93XCI6MSxcInRhYmxlLWNvbHVtbi1ncm91cFwiOjEsXHJcblwidGFibGUtY29sdW1uXCI6MSxcInRhYmxlLWNlbGxcIjoxLFwidGFibGUtY2FwdGlvblwiOjF9LGM9e2Fic29sdXRlOjEsZml4ZWQ6MX07Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLmlzQmxvY2tCb3VuZGFyeT1mdW5jdGlvbihhKXtyZXR1cm5cIm5vbmVcIiE9dGhpcy5nZXRDb21wdXRlZFN0eWxlKFwiZmxvYXRcIil8fHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpaW4gY3x8IWJbdGhpcy5nZXRDb21wdXRlZFN0eWxlKFwiZGlzcGxheVwiKV0/ISEodGhpcy5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKXx8YSYmdGhpcy5pcyhhKSk6ITB9O0NLRURJVE9SLmRvbS53YWxrZXIuYmxvY2tCb3VuZGFyeT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIShiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5pc0Jsb2NrQm91bmRhcnkoYSkpfX07Q0tFRElUT1IuZG9tLndhbGtlci5saXN0SXRlbUJvdW5kYXJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmxvY2tCb3VuZGFyeSh7YnI6MX0pfTtcclxuQ0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGEmJmEuZ2V0TmFtZSYmXCJzcGFuXCI9PWEuZ2V0TmFtZSgpJiZhLmRhdGEoXCJja2UtYm9va21hcmtcIil9cmV0dXJuIGZ1bmN0aW9uKGYpe3ZhciBkLGU7ZD1mJiZmLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGU9Zi5nZXRQYXJlbnQoKSkmJmMoZSk7ZD1hP2Q6ZHx8YyhmKTtyZXR1cm4hIShiXmQpfX07Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM7YiYmYi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihjPSFDS0VESVRPUi50b29scy50cmltKGIuZ2V0VGV4dCgpKXx8Q0tFRElUT1IuZW52LndlYmtpdCYmYi5nZXRUZXh0KCk9PUNLRURJVE9SLmRvbS5zZWxlY3Rpb24uRklMTElOR19DSEFSX1NFUVVFTkNFKTtyZXR1cm4hIShhXmMpfX07Q0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGU9XHJcbmZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxjPUNLRURJVE9SLmVudi53ZWJraXQ/MTowO3JldHVybiBmdW5jdGlvbihmKXtiKGYpP2Y9MTooZi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihmPWYuZ2V0UGFyZW50KCkpLGY9Zi4kLm9mZnNldFdpZHRoPD1jKTtyZXR1cm4hIShhXmYpfX07Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZT1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4hIShiXmMudHlwZT09YSl9fTtDS0VESVRPUi5kb20ud2Fsa2VyLmJvZ3VzPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIWcoYSkmJiFsKGEpfXJldHVybiBmdW5jdGlvbihjKXt2YXIgZj1DS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcj9jLmlzJiZjLmlzKFwiYnJcIik6Yy5nZXRUZXh0JiZlLnRlc3QoYy5nZXRUZXh0KCkpO2YmJihmPWMuZ2V0UGFyZW50KCksYz1jLmdldE5leHQoYiksZj1mLmlzQmxvY2tCb3VuZGFyeSgpJiZcclxuKCFjfHxjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5pc0Jsb2NrQm91bmRhcnkoKSkpO3JldHVybiEhKGFeZil9fTtDS0VESVRPUi5kb20ud2Fsa2VyLnRlbXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2IudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYj1iLmdldFBhcmVudCgpKTtiPWImJmIuaGFzQXR0cmlidXRlKFwiZGF0YS1ja2UtdGVtcFwiKTtyZXR1cm4hIShhXmIpfX07dmFyIGU9L15bXFx0XFxyXFxuIF0qKD86Jm5ic3A7fFxceGEwKSQvLGc9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLGw9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygpLGs9Q0tFRElUT1IuZG9tLndhbGtlci50ZW1wKCksbj1mdW5jdGlvbihhKXtyZXR1cm4gbChhKXx8ZyhhKXx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXMoQ0tFRElUT1IuZHRkLiRpbmxpbmUpJiYhYS5pcyhDS0VESVRPUi5kdGQuJGVtcHR5KX07Q0tFRElUT1IuZG9tLndhbGtlci5pZ25vcmVkPVxyXG5mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Yj1nKGIpfHxsKGIpfHxrKGIpO3JldHVybiEhKGFeYil9fTt2YXIgdz1DS0VESVRPUi5kb20ud2Fsa2VyLmlnbm9yZWQoKTtDS0VESVRPUi5kb20ud2Fsa2VyLmVtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxmPWIuZ2V0Q2hpbGRDb3VudCgpO2M8ZjsrK2MpaWYoIXcoYi5nZXRDaGlsZChjKSkpcmV0dXJuISFhO3JldHVybiFhfX07dmFyIGY9Q0tFRElUT1IuZG9tLndhbGtlci5lbXB0eSgpLHg9Q0tFRElUT1IuZG9tLndhbGtlci52YWxpZEVtcHR5QmxvY2tDb250YWluZXJzPUNLRURJVE9SLnRvb2xzLmV4dGVuZChmdW5jdGlvbihhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpQ0tFRElUT1IuZHRkW2NdW1wiI1wiXSYmKGJbY109MSk7cmV0dXJuIGJ9KENLRURJVE9SLmR0ZC4kYmxvY2spLHtjYXB0aW9uOjEsdGQ6MSx0aDoxfSk7Q0tFRElUT1IuZG9tLndhbGtlci5lZGl0YWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Yj1cclxudyhiKT8hMTpiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8Yi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiLmlzKENLRURJVE9SLmR0ZC4kaW5saW5lKXx8Yi5pcyhcImhyXCIpfHxcImZhbHNlXCI9PWIuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpfHwhQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJmIuaXMoeCkmJmYoYikpPyEwOiExO3JldHVybiEhKGFeYil9fTtDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUuZ2V0Qm9ndXM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2RvIGE9YS5nZXRQcmV2aW91c1NvdXJjZU5vZGUoKTt3aGlsZShuKGEpKTtyZXR1cm4gYSYmKENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyP2EuaXMmJmEuaXMoXCJiclwiKTphLmdldFRleHQmJmUudGVzdChhLmdldFRleHQoKSkpP2E6ITF9fSkoKTtcclxuQ0tFRElUT1IuZG9tLnJhbmdlPWZ1bmN0aW9uKGEpe3RoaXMuZW5kT2Zmc2V0PXRoaXMuZW5kQ29udGFpbmVyPXRoaXMuc3RhcnRPZmZzZXQ9dGhpcy5zdGFydENvbnRhaW5lcj1udWxsO3RoaXMuY29sbGFwc2VkPSEwO3ZhciBkPWEgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZG9jdW1lbnQ7dGhpcy5kb2N1bWVudD1kP2E6YS5nZXREb2N1bWVudCgpO3RoaXMucm9vdD1kP2EuZ2V0Qm9keSgpOmF9O1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuY29sbGFwc2VkPWEuc3RhcnRDb250YWluZXImJmEuZW5kQ29udGFpbmVyJiZhLnN0YXJ0Q29udGFpbmVyLmVxdWFscyhhLmVuZENvbnRhaW5lcikmJmEuc3RhcnRPZmZzZXQ9PWEuZW5kT2Zmc2V0fWZ1bmN0aW9uIGQoYSxiLGMsZCxlKXtmdW5jdGlvbiBxKGEsYixjLGYpe3ZhciBkPWM/YS5nZXRQcmV2aW91cygpOmEuZ2V0TmV4dCgpO2lmKGYmJmspcmV0dXJuIGQ7aHx8Zj9iLmFwcGVuZChhLmNsb25lKCEwLGUpLGMpOihhLnJlbW92ZSgpLHomJmIuYXBwZW5kKGEpKTtyZXR1cm4gZH1mdW5jdGlvbiBnKCl7dmFyIGEsYixjLGY9TWF0aC5taW4odi5sZW5ndGgsRC5sZW5ndGgpO2ZvcihhPTA7YTxmO2ErKylpZihiPXZbYV0sYz1EW2FdLCFiLmVxdWFscyhjKSlyZXR1cm4gYTtyZXR1cm4gYS0xfWZ1bmN0aW9uIGwoKXt2YXIgYj1JLTEsYz13JiZuJiYhcC5lcXVhbHMobSk7YjxFLTF8fGI8TC0xfHxjPyhjP2EubW92ZVRvUG9zaXRpb24obSxcclxuQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTpMPT1iKzEmJkg/YS5tb3ZlVG9Qb3NpdGlvbihEW2JdLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpOmEubW92ZVRvUG9zaXRpb24oRFtiKzFdLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksZCYmKGI9dltiKzFdKSYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihjPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY3NwYW4gZGF0YS1ja2UtYm9va21hcmtcXHgzZFwiMVwiIHN0eWxlXFx4M2RcImRpc3BsYXk6bm9uZVwiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlJyxhLmRvY3VtZW50KSxjLmluc2VydEFmdGVyKGIpLGIubWVyZ2VTaWJsaW5ncyghMSksYS5tb3ZlVG9Cb29rbWFyayh7c3RhcnROb2RlOmN9KSkpOmEuY29sbGFwc2UoITApfWEub3B0aW1pemVCb29rbWFyaygpO3ZhciBrPTA9PT1iLHo9MT09YixoPTI9PWI7Yj1ofHx6O3ZhciBwPWEuc3RhcnRDb250YWluZXIsbT1hLmVuZENvbnRhaW5lcixcclxuQz1hLnN0YXJ0T2Zmc2V0LHI9YS5lbmRPZmZzZXQsRyxILHcsbixNLFE7aWYoaCYmbS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJnAuZXF1YWxzKG0pKXA9YS5kb2N1bWVudC5jcmVhdGVUZXh0KHAuc3Vic3RyaW5nKEMscikpLGMuYXBwZW5kKHApO2Vsc2V7bS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/aD9RPSEwOm09bS5zcGxpdChyKTowPG0uZ2V0Q2hpbGRDb3VudCgpP3I+PW0uZ2V0Q2hpbGRDb3VudCgpPyhtPW0uZ2V0Q2hpbGQoci0xKSxIPSEwKTptPW0uZ2V0Q2hpbGQocik6bj1IPSEwO3AudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP2g/TT0hMDpwLnNwbGl0KEMpOjA8cC5nZXRDaGlsZENvdW50KCk/MD09PUM/KHA9cC5nZXRDaGlsZChDKSxHPSEwKTpwPXAuZ2V0Q2hpbGQoQy0xKTp3PUc9ITA7Zm9yKHZhciB2PXAuZ2V0UGFyZW50cygpLEQ9bS5nZXRQYXJlbnRzKCksST1nKCksRT12Lmxlbmd0aC0xLEw9RC5sZW5ndGgtMSxKPWMsYmEsWixWLGZhPS0xLE89STtPPD1FO08rKyl7Wj1cclxudltPXTtWPVouZ2V0TmV4dCgpO2ZvcihPIT1FfHxaLmVxdWFscyhEW09dKSYmRTxMP2ImJihiYT1KLmFwcGVuZChaLmNsb25lKDAsZSkpKTpHP3EoWixKLCExLHcpOk0mJkouYXBwZW5kKGEuZG9jdW1lbnQuY3JlYXRlVGV4dChaLnN1YnN0cmluZyhDKSkpO1Y7KXtpZihWLmVxdWFscyhEW09dKSl7ZmE9TzticmVha31WPXEoVixKKX1KPWJhfUo9Yztmb3IoTz1JO088PUw7TysrKWlmKGM9RFtPXSxWPWMuZ2V0UHJldmlvdXMoKSxjLmVxdWFscyh2W09dKSliJiYoSj1KLmdldENoaWxkKDApKTtlbHNle08hPUx8fGMuZXF1YWxzKHZbT10pJiZMPEU/YiYmKGJhPUouYXBwZW5kKGMuY2xvbmUoMCxlKSkpOkg/cShjLEosITEsbik6USYmSi5hcHBlbmQoYS5kb2N1bWVudC5jcmVhdGVUZXh0KGMuc3Vic3RyaW5nKDAscikpKTtpZihPPmZhKWZvcig7VjspVj1xKFYsSiwhMCk7Sj1iYX1ofHxsKCl9fWZ1bmN0aW9uIGIoKXt2YXIgYT0hMSxiPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxcclxuYz1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCEwKSxkPUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSl8fGIoZSk/ITA6ZChlKSYmIWE/YT0hMDplLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGUuaGFzQXNjZW5kYW50KFwicHJlXCIpfHxDS0VESVRPUi50b29scy50cmltKGUuZ2V0VGV4dCgpKS5sZW5ndGgpfHxlLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWUuaXMoZyk/ITE6ITB9fWZ1bmN0aW9uIGMoYSl7dmFyIGI9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLGM9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygxKTtyZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIGMoZCl8fGIoZCk/ITA6IWEmJmwoZCl8fGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmlzKENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHkpfX1mdW5jdGlvbiBlKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiO3JldHVybiB0aGlzW2E/XHJcblwiZ2V0UHJldmlvdXNOb2RlXCI6XCJnZXROZXh0Tm9kZVwiXShmdW5jdGlvbihhKXshYiYmdyhhKSYmKGI9YSk7cmV0dXJuIG4oYSkmJiEobChhKSYmYS5lcXVhbHMoYikpfSl9fXZhciBnPXthYmJyOjEsYWNyb255bToxLGI6MSxiZG86MSxiaWc6MSxjaXRlOjEsY29kZToxLGRlbDoxLGRmbjoxLGVtOjEsZm9udDoxLGk6MSxpbnM6MSxsYWJlbDoxLGtiZDoxLHE6MSxzYW1wOjEsc21hbGw6MSxzcGFuOjEsc3RyaWtlOjEsc3Ryb25nOjEsc3ViOjEsc3VwOjEsdHQ6MSx1OjEsXCJ2YXJcIjoxfSxsPUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKSxrPS9eW1xcdFxcclxcbiBdKig/OiZuYnNwO3xcXHhhMCkkLyxuPUNLRURJVE9SLmRvbS53YWxrZXIuZWRpdGFibGUoKSx3PUNLRURJVE9SLmRvbS53YWxrZXIuaWdub3JlZCghMCk7Q0tFRElUT1IuZG9tLnJhbmdlLnByb3RvdHlwZT17Y2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCk7YS5fc2V0U3RhcnRDb250YWluZXIodGhpcy5zdGFydENvbnRhaW5lcik7XHJcbmEuc3RhcnRPZmZzZXQ9dGhpcy5zdGFydE9mZnNldDthLl9zZXRFbmRDb250YWluZXIodGhpcy5lbmRDb250YWluZXIpO2EuZW5kT2Zmc2V0PXRoaXMuZW5kT2Zmc2V0O2EuY29sbGFwc2VkPXRoaXMuY29sbGFwc2VkO3JldHVybiBhfSxjb2xsYXBzZTpmdW5jdGlvbihhKXthPyh0aGlzLl9zZXRFbmRDb250YWluZXIodGhpcy5zdGFydENvbnRhaW5lciksdGhpcy5lbmRPZmZzZXQ9dGhpcy5zdGFydE9mZnNldCk6KHRoaXMuX3NldFN0YXJ0Q29udGFpbmVyKHRoaXMuZW5kQ29udGFpbmVyKSx0aGlzLnN0YXJ0T2Zmc2V0PXRoaXMuZW5kT2Zmc2V0KTt0aGlzLmNvbGxhcHNlZD0hMH0sY2xvbmVDb250ZW50czpmdW5jdGlvbihhKXt2YXIgYj1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQodGhpcy5kb2N1bWVudCk7dGhpcy5jb2xsYXBzZWR8fGQodGhpcywyLGIsITEsXCJ1bmRlZmluZWRcIj09dHlwZW9mIGE/ITA6YSk7cmV0dXJuIGJ9LGRlbGV0ZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuY29sbGFwc2VkfHxcclxuZCh0aGlzLDAsbnVsbCxhKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KHRoaXMuZG9jdW1lbnQpO3RoaXMuY29sbGFwc2VkfHxkKHRoaXMsMSxjLGEsXCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/ITA6Yik7cmV0dXJuIGN9LGNyZWF0ZUJvb2ttYXJrOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLHE9dGhpcy5jb2xsYXBzZWQ7Yj10aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2IuZGF0YShcImNrZS1ib29rbWFya1wiLDEpO2Iuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpO2Iuc2V0SHRtbChcIlxceDI2bmJzcDtcIik7YSYmKGQ9XCJja2VfYm1fXCIrQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpLGIuc2V0QXR0cmlidXRlKFwiaWRcIixkKyhxP1wiQ1wiOlwiU1wiKSkpO3F8fChjPWIuY2xvbmUoKSxjLnNldEh0bWwoXCJcXHgyNm5ic3A7XCIpLGEmJmMuc2V0QXR0cmlidXRlKFwiaWRcIixkK1wiRVwiKSxlPXRoaXMuY2xvbmUoKSxcclxuZS5jb2xsYXBzZSgpLGUuaW5zZXJ0Tm9kZShjKSk7ZT10aGlzLmNsb25lKCk7ZS5jb2xsYXBzZSghMCk7ZS5pbnNlcnROb2RlKGIpO2M/KHRoaXMuc2V0U3RhcnRBZnRlcihiKSx0aGlzLnNldEVuZEJlZm9yZShjKSk6dGhpcy5tb3ZlVG9Qb3NpdGlvbihiLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCk7cmV0dXJue3N0YXJ0Tm9kZTphP2QrKHE/XCJDXCI6XCJTXCIpOmIsZW5kTm9kZTphP2QrXCJFXCI6YyxzZXJpYWxpemFibGU6YSxjb2xsYXBzZWQ6cX19LGNyZWF0ZUJvb2ttYXJrMjpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7dmFyIGY9Yi5jb250YWluZXIsZD1iLm9mZnNldCxlO2U9Zjt2YXIgZz1kO2U9ZS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fDA9PT1nfHxnPT1lLmdldENoaWxkQ291bnQoKT8wOmUuZ2V0Q2hpbGQoZy0xKS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJmUuZ2V0Q2hpbGQoZykudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUO2UmJihmPWYuZ2V0Q2hpbGQoZC1cclxuMSksZD1mLmdldExlbmd0aCgpKTtpZihmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmMDxkKXthOntmb3IoZT1mO2QtLTspaWYoZz1lLmdldENoaWxkKGQpLmdldEluZGV4KCEwKSwwPD1nKXtkPWc7YnJlYWsgYX1kPS0xfWQrPTF9aWYoZi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQpe2U9Zjtmb3IoZz0wOyhlPWUuZ2V0UHJldmlvdXMoKSkmJmUudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUOylnKz1lLmdldFRleHQoKS5yZXBsYWNlKENLRURJVE9SLmRvbS5zZWxlY3Rpb24uRklMTElOR19DSEFSX1NFUVVFTkNFLFwiXCIpLmxlbmd0aDtlPWc7Zi5nZXRUZXh0KCk/ZCs9ZTooZz1mLmdldFByZXZpb3VzKGMpLGU/KGQ9ZSxmPWc/Zy5nZXROZXh0KCk6Zi5nZXRQYXJlbnQoKS5nZXRGaXJzdCgpKTooZj1mLmdldFBhcmVudCgpLGQ9Zz9nLmdldEluZGV4KCEwKSsxOjApKX1iLmNvbnRhaW5lcj1mO2Iub2Zmc2V0PWR9ZnVuY3Rpb24gYihhLGMpe3ZhciBmPWMuZ2V0Q3VzdG9tRGF0YShcImNrZS1maWxsaW5nQ2hhclwiKTtcclxuaWYoZil7dmFyIGQ9YS5jb250YWluZXI7Zi5lcXVhbHMoZCkmJihhLm9mZnNldC09Q0tFRElUT1IuZG9tLnNlbGVjdGlvbi5GSUxMSU5HX0NIQVJfU0VRVUVOQ0UubGVuZ3RoLDA+PWEub2Zmc2V0JiYoYS5vZmZzZXQ9ZC5nZXRJbmRleCgpLGEuY29udGFpbmVyPWQuZ2V0UGFyZW50KCkpKX19dmFyIGM9Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZShDS0VESVRPUi5OT0RFX1RFWFQsITApO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD10aGlzLmNvbGxhcHNlZCxlPXtjb250YWluZXI6dGhpcy5zdGFydENvbnRhaW5lcixvZmZzZXQ6dGhpcy5zdGFydE9mZnNldH0sZz17Y29udGFpbmVyOnRoaXMuZW5kQ29udGFpbmVyLG9mZnNldDp0aGlzLmVuZE9mZnNldH07YyYmKGEoZSksYihlLHRoaXMucm9vdCksZHx8KGEoZyksYihnLHRoaXMucm9vdCkpKTtyZXR1cm57c3RhcnQ6ZS5jb250YWluZXIuZ2V0QWRkcmVzcyhjKSxlbmQ6ZD9udWxsOmcuY29udGFpbmVyLmdldEFkZHJlc3MoYyksXHJcbnN0YXJ0T2Zmc2V0OmUub2Zmc2V0LGVuZE9mZnNldDpnLm9mZnNldCxub3JtYWxpemVkOmMsY29sbGFwc2VkOmQsaXMyOiEwfX19KCksbW92ZVRvQm9va21hcms6ZnVuY3Rpb24oYSl7aWYoYS5pczIpe3ZhciBiPXRoaXMuZG9jdW1lbnQuZ2V0QnlBZGRyZXNzKGEuc3RhcnQsYS5ub3JtYWxpemVkKSxjPWEuc3RhcnRPZmZzZXQsZD1hLmVuZCYmdGhpcy5kb2N1bWVudC5nZXRCeUFkZHJlc3MoYS5lbmQsYS5ub3JtYWxpemVkKTthPWEuZW5kT2Zmc2V0O3RoaXMuc2V0U3RhcnQoYixjKTtkP3RoaXMuc2V0RW5kKGQsYSk6dGhpcy5jb2xsYXBzZSghMCl9ZWxzZSBiPShjPWEuc2VyaWFsaXphYmxlKT90aGlzLmRvY3VtZW50LmdldEJ5SWQoYS5zdGFydE5vZGUpOmEuc3RhcnROb2RlLGE9Yz90aGlzLmRvY3VtZW50LmdldEJ5SWQoYS5lbmROb2RlKTphLmVuZE5vZGUsdGhpcy5zZXRTdGFydEJlZm9yZShiKSxiLnJlbW92ZSgpLGE/KHRoaXMuc2V0RW5kQmVmb3JlKGEpLGEucmVtb3ZlKCkpOlxyXG50aGlzLmNvbGxhcHNlKCEwKX0sZ2V0Qm91bmRhcnlOb2RlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXIsYj10aGlzLmVuZENvbnRhaW5lcixjPXRoaXMuc3RhcnRPZmZzZXQsZD10aGlzLmVuZE9mZnNldCxlO2lmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKWlmKGU9YS5nZXRDaGlsZENvdW50KCksZT5jKWE9YS5nZXRDaGlsZChjKTtlbHNlIGlmKDE+ZSlhPWEuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCk7ZWxzZXtmb3IoYT1hLiQ7YS5sYXN0Q2hpbGQ7KWE9YS5sYXN0Q2hpbGQ7YT1uZXcgQ0tFRElUT1IuZG9tLm5vZGUoYSk7YT1hLmdldE5leHRTb3VyY2VOb2RlKCl8fGF9aWYoYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpaWYoZT1iLmdldENoaWxkQ291bnQoKSxlPmQpYj1iLmdldENoaWxkKGQpLmdldFByZXZpb3VzU291cmNlTm9kZSghMCk7ZWxzZSBpZigxPmUpYj1iLmdldFByZXZpb3VzU291cmNlTm9kZSgpO2Vsc2V7Zm9yKGI9Yi4kO2IubGFzdENoaWxkOyliPVxyXG5iLmxhc3RDaGlsZDtiPW5ldyBDS0VESVRPUi5kb20ubm9kZShiKX1hLmdldFBvc2l0aW9uKGIpJkNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lORyYmKGE9Yik7cmV0dXJue3N0YXJ0Tm9kZTphLGVuZE5vZGU6Yn19LGdldENvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5zdGFydENvbnRhaW5lcixkPXRoaXMuZW5kQ29udGFpbmVyLGM9Yy5lcXVhbHMoZCk/YSYmYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJnRoaXMuc3RhcnRPZmZzZXQ9PXRoaXMuZW5kT2Zmc2V0LTE/Yy5nZXRDaGlsZCh0aGlzLnN0YXJ0T2Zmc2V0KTpjOmMuZ2V0Q29tbW9uQW5jZXN0b3IoZCk7cmV0dXJuIGImJiFjLmlzP2MuZ2V0UGFyZW50KCk6Y30sb3B0aW1pemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyLGI9dGhpcy5zdGFydE9mZnNldDthLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGI/Yj49YS5nZXRMZW5ndGgoKSYmdGhpcy5zZXRTdGFydEFmdGVyKGEpOlxyXG50aGlzLnNldFN0YXJ0QmVmb3JlKGEpKTthPXRoaXMuZW5kQ29udGFpbmVyO2I9dGhpcy5lbmRPZmZzZXQ7YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiP2I+PWEuZ2V0TGVuZ3RoKCkmJnRoaXMuc2V0RW5kQWZ0ZXIoYSk6dGhpcy5zZXRFbmRCZWZvcmUoYSkpfSxvcHRpbWl6ZUJvb2ttYXJrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdGFydENvbnRhaW5lcixiPXRoaXMuZW5kQ29udGFpbmVyO2EuaXMmJmEuaXMoXCJzcGFuXCIpJiZhLmRhdGEoXCJja2UtYm9va21hcmtcIikmJnRoaXMuc2V0U3RhcnRBdChhLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7YiYmYi5pcyYmYi5pcyhcInNwYW5cIikmJmIuZGF0YShcImNrZS1ib29rbWFya1wiKSYmdGhpcy5zZXRFbmRBdChiLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCl9LHRyaW06ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0YXJ0Q29udGFpbmVyLGQ9dGhpcy5zdGFydE9mZnNldCxlPXRoaXMuY29sbGFwc2VkO2lmKCghYXx8XHJcbmUpJiZjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7aWYoZClpZihkPj1jLmdldExlbmd0aCgpKWQ9Yy5nZXRJbmRleCgpKzEsYz1jLmdldFBhcmVudCgpO2Vsc2V7dmFyIHE9Yy5zcGxpdChkKSxkPWMuZ2V0SW5kZXgoKSsxLGM9Yy5nZXRQYXJlbnQoKTt0aGlzLnN0YXJ0Q29udGFpbmVyLmVxdWFscyh0aGlzLmVuZENvbnRhaW5lcik/dGhpcy5zZXRFbmQocSx0aGlzLmVuZE9mZnNldC10aGlzLnN0YXJ0T2Zmc2V0KTpjLmVxdWFscyh0aGlzLmVuZENvbnRhaW5lcikmJih0aGlzLmVuZE9mZnNldCs9MSl9ZWxzZSBkPWMuZ2V0SW5kZXgoKSxjPWMuZ2V0UGFyZW50KCk7dGhpcy5zZXRTdGFydChjLGQpO2lmKGUpe3RoaXMuY29sbGFwc2UoITApO3JldHVybn19Yz10aGlzLmVuZENvbnRhaW5lcjtkPXRoaXMuZW5kT2Zmc2V0O2J8fGV8fCFjfHxjLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVHx8KGQ/KGQ+PWMuZ2V0TGVuZ3RoKCl8fGMuc3BsaXQoZCksZD1jLmdldEluZGV4KCkrMSk6XHJcbmQ9Yy5nZXRJbmRleCgpLGM9Yy5nZXRQYXJlbnQoKSx0aGlzLnNldEVuZChjLGQpKX0sZW5sYXJnZTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGEmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKT9udWxsOmF9dmFyIGQ9bmV3IFJlZ0V4cCgvW15cXHNcXHVmZWZmXS8pO3N3aXRjaChhKXtjYXNlIENLRURJVE9SLkVOTEFSR0VfSU5MSU5FOnZhciBlPTE7Y2FzZSBDS0VESVRPUi5FTkxBUkdFX0VMRU1FTlQ6dmFyIHE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGwpO2Muc2V0U3RhcnQoYSxiKTtjLnNldEVuZEF0KGwsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7dmFyIGM9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYyksZjtmb3IoYy5ndWFyZD1mdW5jdGlvbihhKXtyZXR1cm4hKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzQmxvY2tCb3VuZGFyeSgpKX07Zj1cclxuYy5uZXh0KCk7KXtpZihmLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVClyZXR1cm4hMTtHPWYhPWE/Zi5nZXRUZXh0KCk6Zi5zdWJzdHJpbmcoYik7aWYoZC50ZXN0KEcpKXJldHVybiExfXJldHVybiEwfTtpZih0aGlzLmNvbGxhcHNlZClicmVhazt2YXIgZz10aGlzLmdldENvbW1vbkFuY2VzdG9yKCksbD10aGlzLnJvb3Qsayx6LGgscCxtLEM9ITEscixHO3I9dGhpcy5zdGFydENvbnRhaW5lcjt2YXIgSD10aGlzLnN0YXJ0T2Zmc2V0O3IudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUPyhIJiYocj0hQ0tFRElUT1IudG9vbHMudHJpbShyLnN1YnN0cmluZygwLEgpKS5sZW5ndGgmJnIsQz0hIXIpLHImJigocD1yLmdldFByZXZpb3VzKCkpfHwoaD1yLmdldFBhcmVudCgpKSkpOihIJiYocD1yLmdldENoaWxkKEgtMSl8fHIuZ2V0TGFzdCgpKSxwfHwoaD1yKSk7Zm9yKGg9YyhoKTtofHxwOyl7aWYoaCYmIXApeyFtJiZoLmVxdWFscyhnKSYmKG09ITApO2lmKGU/aC5pc0Jsb2NrQm91bmRhcnkoKTpcclxuIWwuY29udGFpbnMoaCkpYnJlYWs7QyYmXCJpbmxpbmVcIj09aC5nZXRDb21wdXRlZFN0eWxlKFwiZGlzcGxheVwiKXx8KEM9ITEsbT9rPWg6dGhpcy5zZXRTdGFydEJlZm9yZShoKSk7cD1oLmdldFByZXZpb3VzKCl9Zm9yKDtwOylpZihyPSExLHAudHlwZT09Q0tFRElUT1IuTk9ERV9DT01NRU5UKXA9cC5nZXRQcmV2aW91cygpO2Vsc2V7aWYocC50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQpRz1wLmdldFRleHQoKSxkLnRlc3QoRykmJihwPW51bGwpLHI9L1tcXHNcXHVmZWZmXSQvLnRlc3QoRyk7ZWxzZSBpZigocC4kLm9mZnNldFdpZHRoPihDS0VESVRPUi5lbnYud2Via2l0PzE6MCl8fGImJnAuaXMoXCJiclwiKSkmJiFwLmRhdGEoXCJja2UtYm9va21hcmtcIikpaWYoQyYmQ0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVtwLmdldE5hbWUoKV0pe0c9cC5nZXRUZXh0KCk7aWYoZC50ZXN0KEcpKXA9bnVsbDtlbHNlIGZvcih2YXIgSD1wLiQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLHc9MCxuO249XHJcbkhbdysrXTspaWYoIUNLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbbi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSl7cD1udWxsO2JyZWFrfXAmJihyPSEhRy5sZW5ndGgpfWVsc2UgcD1udWxsO3ImJihDP20/az1oOmgmJnRoaXMuc2V0U3RhcnRCZWZvcmUoaCk6Qz0hMCk7aWYocCl7cj1wLmdldFByZXZpb3VzKCk7aWYoIWgmJiFyKXtoPXA7cD1udWxsO2JyZWFrfXA9cn1lbHNlIGg9bnVsbH1oJiYoaD1jKGguZ2V0UGFyZW50KCkpKX1yPXRoaXMuZW5kQ29udGFpbmVyO0g9dGhpcy5lbmRPZmZzZXQ7aD1wPW51bGw7bT1DPSExO3IudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP0NLRURJVE9SLnRvb2xzLnRyaW0oci5zdWJzdHJpbmcoSCkpLmxlbmd0aD9DPSEwOihDPSFyLmdldExlbmd0aCgpLEg9PXIuZ2V0TGVuZ3RoKCk/KHA9ci5nZXROZXh0KCkpfHwoaD1yLmdldFBhcmVudCgpKTpxKHIsSCkmJihoPXIuZ2V0UGFyZW50KCkpKToocD1yLmdldENoaWxkKEgpKXx8KGg9cik7Zm9yKDtofHxcclxucDspe2lmKGgmJiFwKXshbSYmaC5lcXVhbHMoZykmJihtPSEwKTtpZihlP2guaXNCbG9ja0JvdW5kYXJ5KCk6IWwuY29udGFpbnMoaCkpYnJlYWs7QyYmXCJpbmxpbmVcIj09aC5nZXRDb21wdXRlZFN0eWxlKFwiZGlzcGxheVwiKXx8KEM9ITEsbT96PWg6aCYmdGhpcy5zZXRFbmRBZnRlcihoKSk7cD1oLmdldE5leHQoKX1mb3IoO3A7KXtyPSExO2lmKHAudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKUc9cC5nZXRUZXh0KCkscShwLDApfHwocD1udWxsKSxyPS9eW1xcc1xcdWZlZmZdLy50ZXN0KEcpO2Vsc2UgaWYocC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2lmKCgwPHAuJC5vZmZzZXRXaWR0aHx8YiYmcC5pcyhcImJyXCIpKSYmIXAuZGF0YShcImNrZS1ib29rbWFya1wiKSlpZihDJiZDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3AuZ2V0TmFtZSgpXSl7Rz1wLmdldFRleHQoKTtpZihkLnRlc3QoRykpcD1udWxsO2Vsc2UgZm9yKEg9cC4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSx3PVxyXG4wO249SFt3KytdOylpZighQ0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVtuLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKXtwPW51bGw7YnJlYWt9cCYmKHI9ISFHLmxlbmd0aCl9ZWxzZSBwPW51bGx9ZWxzZSByPTE7ciYmQyYmKG0/ej1oOnRoaXMuc2V0RW5kQWZ0ZXIoaCkpO2lmKHApe3I9cC5nZXROZXh0KCk7aWYoIWgmJiFyKXtoPXA7cD1udWxsO2JyZWFrfXA9cn1lbHNlIGg9bnVsbH1oJiYoaD1jKGguZ2V0UGFyZW50KCkpKX1rJiZ6JiYoZz1rLmNvbnRhaW5zKHopP3o6ayx0aGlzLnNldFN0YXJ0QmVmb3JlKGcpLHRoaXMuc2V0RW5kQWZ0ZXIoZykpO2JyZWFrO2Nhc2UgQ0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUzpjYXNlIENLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTOmg9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2w9dGhpcy5yb290O2guc2V0U3RhcnRBdChsLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTtoLnNldEVuZCh0aGlzLnN0YXJ0Q29udGFpbmVyLFxyXG50aGlzLnN0YXJ0T2Zmc2V0KTtoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGgpO3ZhciBNLFEsdj1DS0VESVRPUi5kb20ud2Fsa2VyLmJsb2NrQm91bmRhcnkoYT09Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM/e2JyOjF9Om51bGwpLEQ9bnVsbCxJPWZ1bmN0aW9uKGEpe2lmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImZhbHNlXCI9PWEuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKWlmKEQpe2lmKEQuZXF1YWxzKGEpKXtEPW51bGw7cmV0dXJufX1lbHNlIEQ9YTtlbHNlIGlmKEQpcmV0dXJuO3ZhciBiPXYoYSk7Ynx8KE09YSk7cmV0dXJuIGJ9LGU9ZnVuY3Rpb24oYSl7dmFyIGI9SShhKTshYiYmYS5pcyYmYS5pcyhcImJyXCIpJiYoUT1hKTtyZXR1cm4gYn07aC5ndWFyZD1JO2g9aC5sYXN0QmFja3dhcmQoKTtNPU18fGw7dGhpcy5zZXRTdGFydEF0KE0sIU0uaXMoXCJiclwiKSYmKCFoJiZ0aGlzLmNoZWNrU3RhcnRPZkJsb2NrKCl8fGgmJk0uY29udGFpbnMoaCkpP1xyXG5DS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVDpDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO2lmKGE9PUNLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTKXtoPXRoaXMuY2xvbmUoKTtoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGgpO3ZhciBFPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxMPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKTtoLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4hRShhKSYmIUwoYSl9O2lmKChoPWgucHJldmlvdXMoKSkmJmgudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZoLmlzKFwiYnJcIikpYnJlYWt9aD10aGlzLmNsb25lKCk7aC5jb2xsYXBzZSgpO2guc2V0RW5kQXQobCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGgpO2guZ3VhcmQ9YT09Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM/ZTpJO009RD1RPW51bGw7aD1oLmxhc3RGb3J3YXJkKCk7XHJcbk09TXx8bDt0aGlzLnNldEVuZEF0KE0sIWgmJnRoaXMuY2hlY2tFbmRPZkJsb2NrKCl8fGgmJk0uY29udGFpbnMoaCk/Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORDpDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpO1EmJnRoaXMuc2V0RW5kQWZ0ZXIoUSl9fSxzaHJpbms6ZnVuY3Rpb24oYSxiLGMpe2lmKCF0aGlzLmNvbGxhcHNlZCl7YT1hfHxDS0VESVRPUi5TSFJJTktfVEVYVDt2YXIgZD10aGlzLmNsb25lKCksZT10aGlzLnN0YXJ0Q29udGFpbmVyLHE9dGhpcy5lbmRDb250YWluZXIsZz10aGlzLnN0YXJ0T2Zmc2V0LGw9dGhpcy5lbmRPZmZzZXQsaz0xLHo9MTtlJiZlLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGc/Zz49ZS5nZXRMZW5ndGgoKT9kLnNldFN0YXJ0QWZ0ZXIoZSk6KGQuc2V0U3RhcnRCZWZvcmUoZSksaz0wKTpkLnNldFN0YXJ0QmVmb3JlKGUpKTtxJiZxLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGw/bD49cS5nZXRMZW5ndGgoKT9kLnNldEVuZEFmdGVyKHEpOlxyXG4oZC5zZXRFbmRBZnRlcihxKSx6PTApOmQuc2V0RW5kQmVmb3JlKHEpKTt2YXIgZD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKSxoPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKTtkLmV2YWx1YXRvcj1mdW5jdGlvbihiKXtyZXR1cm4gYi50eXBlPT0oYT09Q0tFRElUT1IuU0hSSU5LX0VMRU1FTlQ/Q0tFRElUT1IuTk9ERV9FTEVNRU5UOkNLRURJVE9SLk5PREVfVEVYVCl9O3ZhciBwO2QuZ3VhcmQ9ZnVuY3Rpb24oYixkKXtpZihoKGIpKXJldHVybiEwO2lmKGE9PUNLRURJVE9SLlNIUklOS19FTEVNRU5UJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8ZCYmYi5lcXVhbHMocCl8fCExPT09YyYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuaXNCbG9ja0JvdW5kYXJ5KCl8fGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4hMTtkfHxiLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8XHJcbihwPWIpO3JldHVybiEwfTtrJiYoZT1kW2E9PUNLRURJVE9SLlNIUklOS19FTEVNRU5UP1wibGFzdEZvcndhcmRcIjpcIm5leHRcIl0oKSkmJnRoaXMuc2V0U3RhcnRBdChlLGI/Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTt6JiYoZC5yZXNldCgpLChkPWRbYT09Q0tFRElUT1IuU0hSSU5LX0VMRU1FTlQ/XCJsYXN0QmFja3dhcmRcIjpcInByZXZpb3VzXCJdKCkpJiZ0aGlzLnNldEVuZEF0KGQsYj9DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EOkNLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkpO3JldHVybiEoIWsmJiF6KX19LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5vcHRpbWl6ZUJvb2ttYXJrKCk7dGhpcy50cmltKCExLCEwKTt2YXIgYj10aGlzLnN0YXJ0Q29udGFpbmVyLGM9Yi5nZXRDaGlsZCh0aGlzLnN0YXJ0T2Zmc2V0KTtjP2EuaW5zZXJ0QmVmb3JlKGMpOmIuYXBwZW5kKGEpO2EuZ2V0UGFyZW50KCkmJmEuZ2V0UGFyZW50KCkuZXF1YWxzKHRoaXMuZW5kQ29udGFpbmVyKSYmXHJcbnRoaXMuZW5kT2Zmc2V0Kys7dGhpcy5zZXRTdGFydEJlZm9yZShhKX0sbW92ZVRvUG9zaXRpb246ZnVuY3Rpb24oYSxiKXt0aGlzLnNldFN0YXJ0QXQoYSxiKTt0aGlzLmNvbGxhcHNlKCEwKX0sbW92ZVRvUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5zZXRTdGFydChhLnN0YXJ0Q29udGFpbmVyLGEuc3RhcnRPZmZzZXQpO3RoaXMuc2V0RW5kKGEuZW5kQ29udGFpbmVyLGEuZW5kT2Zmc2V0KX0sc2VsZWN0Tm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhcnQoYSwwKTt0aGlzLnNldEVuZChhLGEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP2EuZ2V0TGVuZ3RoKCk6YS5nZXRDaGlsZENvdW50KCkpfSxzZXRTdGFydDpmdW5jdGlvbihiLGMpe2IudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZDS0VESVRPUi5kdGQuJGVtcHR5W2IuZ2V0TmFtZSgpXSYmKGM9Yi5nZXRJbmRleCgpLGI9Yi5nZXRQYXJlbnQoKSk7dGhpcy5fc2V0U3RhcnRDb250YWluZXIoYik7dGhpcy5zdGFydE9mZnNldD1cclxuYzt0aGlzLmVuZENvbnRhaW5lcnx8KHRoaXMuX3NldEVuZENvbnRhaW5lcihiKSx0aGlzLmVuZE9mZnNldD1jKTthKHRoaXMpfSxzZXRFbmQ6ZnVuY3Rpb24oYixjKXtiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmQ0tFRElUT1IuZHRkLiRlbXB0eVtiLmdldE5hbWUoKV0mJihjPWIuZ2V0SW5kZXgoKSsxLGI9Yi5nZXRQYXJlbnQoKSk7dGhpcy5fc2V0RW5kQ29udGFpbmVyKGIpO3RoaXMuZW5kT2Zmc2V0PWM7dGhpcy5zdGFydENvbnRhaW5lcnx8KHRoaXMuX3NldFN0YXJ0Q29udGFpbmVyKGIpLHRoaXMuc3RhcnRPZmZzZXQ9Yyk7YSh0aGlzKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEuZ2V0UGFyZW50KCksYS5nZXRJbmRleCgpKzEpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEuZ2V0UGFyZW50KCksYS5nZXRJbmRleCgpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5zZXRFbmQoYS5nZXRQYXJlbnQoKSxcclxuYS5nZXRJbmRleCgpKzEpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5zZXRFbmQoYS5nZXRQYXJlbnQoKSxhLmdldEluZGV4KCkpfSxzZXRTdGFydEF0OmZ1bmN0aW9uKGIsYyl7c3dpdGNoKGMpe2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6dGhpcy5zZXRTdGFydChiLDApO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORDpiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD90aGlzLnNldFN0YXJ0KGIsYi5nZXRMZW5ndGgoKSk6dGhpcy5zZXRTdGFydChiLGIuZ2V0Q2hpbGRDb3VudCgpKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVDp0aGlzLnNldFN0YXJ0QmVmb3JlKGIpO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EOnRoaXMuc2V0U3RhcnRBZnRlcihiKX1hKHRoaXMpfSxzZXRFbmRBdDpmdW5jdGlvbihiLGMpe3N3aXRjaChjKXtjYXNlIENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOnRoaXMuc2V0RW5kKGIsXHJcbjApO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORDpiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD90aGlzLnNldEVuZChiLGIuZ2V0TGVuZ3RoKCkpOnRoaXMuc2V0RW5kKGIsYi5nZXRDaGlsZENvdW50KCkpO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUOnRoaXMuc2V0RW5kQmVmb3JlKGIpO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EOnRoaXMuc2V0RW5kQWZ0ZXIoYil9YSh0aGlzKX0sZml4QmxvY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUJvb2ttYXJrKCksZD10aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYik7dGhpcy5jb2xsYXBzZShhKTt0aGlzLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUyk7dGhpcy5leHRyYWN0Q29udGVudHMoKS5hcHBlbmRUbyhkKTtkLnRyaW0oKTt0aGlzLmluc2VydE5vZGUoZCk7dmFyIGU9ZC5nZXRCb2d1cygpO2UmJmUucmVtb3ZlKCk7XHJcbmQuYXBwZW5kQm9ndXMoKTt0aGlzLm1vdmVUb0Jvb2ttYXJrKGMpO3JldHVybiBkfSxzcGxpdEJsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCksZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHRoaXMuZW5kQ29udGFpbmVyLHRoaXMucm9vdCksZT1jLmJsb2NrLHE9ZC5ibG9jayxnPW51bGw7aWYoIWMuYmxvY2tMaW1pdC5lcXVhbHMoZC5ibG9ja0xpbWl0KSlyZXR1cm4gbnVsbDtcImJyXCIhPWEmJihlfHwoZT10aGlzLmZpeEJsb2NrKCEwLGEpLHE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5lbmRDb250YWluZXIsdGhpcy5yb290KSkuYmxvY2spLHF8fChxPXRoaXMuZml4QmxvY2soITEsYSkpKTtjPWUmJnRoaXMuY2hlY2tTdGFydE9mQmxvY2soKTtkPXEmJnRoaXMuY2hlY2tFbmRPZkJsb2NrKCk7dGhpcy5kZWxldGVDb250ZW50cygpO2UmJmUuZXF1YWxzKHEpJiZcclxuKGQ/KGc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCksdGhpcy5tb3ZlVG9Qb3NpdGlvbihxLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkscT1udWxsKTpjPyhnPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnJvb3QpLHRoaXMubW92ZVRvUG9zaXRpb24oZSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGU9bnVsbCk6KHE9dGhpcy5zcGxpdEVsZW1lbnQoZSxifHwhMSksZS5pcyhcInVsXCIsXCJvbFwiKXx8ZS5hcHBlbmRCb2d1cygpKSk7cmV0dXJue3ByZXZpb3VzQmxvY2s6ZSxuZXh0QmxvY2s6cSx3YXNTdGFydE9mQmxvY2s6Yyx3YXNFbmRPZkJsb2NrOmQsZWxlbWVudFBhdGg6Z319LHNwbGl0RWxlbWVudDpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLmNvbGxhcHNlZClyZXR1cm4gbnVsbDt0aGlzLnNldEVuZEF0KGEsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7XHJcbnZhciBjPXRoaXMuZXh0cmFjdENvbnRlbnRzKCExLGJ8fCExKSxkPWEuY2xvbmUoITEsYnx8ITEpO2MuYXBwZW5kVG8oZCk7ZC5pbnNlcnRBZnRlcihhKTt0aGlzLm1vdmVUb1Bvc2l0aW9uKGEsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKTtyZXR1cm4gZH0scmVtb3ZlRW1wdHlCbG9ja3NBdEVuZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoZCl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpfHxjKGEpfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5pc0VtcHR5SW5saW5lUmVtb3ZlYWJsZSgpfHxkLmlzKFwidGFibGVcIikmJmEuaXMoXCJjYXB0aW9uXCIpPyExOiEwfX12YXIgYj1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksYz1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExKTtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPXRoaXMuY3JlYXRlQm9va21hcmsoKSxkPXRoaXNbYj9cImVuZFBhdGhcIjpcInN0YXJ0UGF0aFwiXSgpLGU9ZC5ibG9ja3x8XHJcbmQuYmxvY2tMaW1pdCxnO2UmJiFlLmVxdWFscyhkLnJvb3QpJiYhZS5nZXRGaXJzdChhKGUpKTspZz1lLmdldFBhcmVudCgpLHRoaXNbYj9cInNldEVuZEF0XCI6XCJzZXRTdGFydEF0XCJdKGUsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSxlLnJlbW92ZSgxKSxlPWc7dGhpcy5tb3ZlVG9Cb29rbWFyayhjKX19KCksc3RhcnRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnJvb3QpfSxlbmRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5lbmRDb250YWluZXIsdGhpcy5yb290KX0sY2hlY2tCb3VuZGFyeU9mRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBkPWI9PUNLRURJVE9SLlNUQVJULGU9dGhpcy5jbG9uZSgpO2UuY29sbGFwc2UoZCk7ZVtkP1wic2V0U3RhcnRBdFwiOlwic2V0RW5kQXRcIl0oYSxkP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOlxyXG5DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtlPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpO2UuZXZhbHVhdG9yPWMoZCk7cmV0dXJuIGVbZD9cImNoZWNrQmFja3dhcmRcIjpcImNoZWNrRm9yd2FyZFwiXSgpfSxjaGVja1N0YXJ0T2ZCbG9jazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXIsYz10aGlzLnN0YXJ0T2Zmc2V0O0NLRURJVE9SLmVudi5pZSYmYyYmYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihhPUNLRURJVE9SLnRvb2xzLmx0cmltKGEuc3Vic3RyaW5nKDAsYykpLGsudGVzdChhKSYmdGhpcy50cmltKDAsMSkpO3RoaXMudHJpbSgpO2E9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCk7Yz10aGlzLmNsb25lKCk7Yy5jb2xsYXBzZSghMCk7Yy5zZXRTdGFydEF0KGEuYmxvY2t8fGEuYmxvY2tMaW1pdCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7YT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihjKTtcclxuYS5ldmFsdWF0b3I9YigpO3JldHVybiBhLmNoZWNrQmFja3dhcmQoKX0sY2hlY2tFbmRPZkJsb2NrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbmRDb250YWluZXIsYz10aGlzLmVuZE9mZnNldDtDS0VESVRPUi5lbnYuaWUmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoYT1DS0VESVRPUi50b29scy5ydHJpbShhLnN1YnN0cmluZyhjKSksay50ZXN0KGEpJiZ0aGlzLnRyaW0oMSwwKSk7dGhpcy50cmltKCk7YT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHRoaXMuZW5kQ29udGFpbmVyLHRoaXMucm9vdCk7Yz10aGlzLmNsb25lKCk7Yy5jb2xsYXBzZSghMSk7Yy5zZXRFbmRBdChhLmJsb2NrfHxhLmJsb2NrTGltaXQsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7YT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihjKTthLmV2YWx1YXRvcj1iKCk7cmV0dXJuIGEuY2hlY2tGb3J3YXJkKCl9LGdldFByZXZpb3VzTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5jbG9uZSgpO1xyXG5kLmNvbGxhcHNlKDEpO2Quc2V0U3RhcnRBdChjfHx0aGlzLnJvb3QsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2M9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZCk7Yy5ldmFsdWF0b3I9YTtjLmd1YXJkPWI7cmV0dXJuIGMucHJldmlvdXMoKX0sZ2V0TmV4dE5vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuY2xvbmUoKTtkLmNvbGxhcHNlKCk7ZC5zZXRFbmRBdChjfHx0aGlzLnJvb3QsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7Yz1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKTtjLmV2YWx1YXRvcj1hO2MuZ3VhcmQ9YjtyZXR1cm4gYy5uZXh0KCl9LGNoZWNrUmVhZE9ubHk6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyl7Zm9yKDtiOyl7aWYoYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2lmKFwiZmFsc2VcIj09Yi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJiFiLmRhdGEoXCJja2UtZWRpdGFibGVcIikpcmV0dXJuIDA7aWYoYi5pcyhcImh0bWxcIil8fFxyXG5cInRydWVcIj09Yi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJihiLmNvbnRhaW5zKGMpfHxiLmVxdWFscyhjKSkpYnJlYWt9Yj1iLmdldFBhcmVudCgpfXJldHVybiAxfXJldHVybiBmdW5jdGlvbigpe3ZhciBiPXRoaXMuc3RhcnRDb250YWluZXIsYz10aGlzLmVuZENvbnRhaW5lcjtyZXR1cm4hKGEoYixjKSYmYShjLGIpKX19KCksbW92ZVRvRWxlbWVudEVkaXRhYmxlUG9zaXRpb246ZnVuY3Rpb24oYSxiKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWEuaXNFZGl0YWJsZSghMSkpcmV0dXJuIHRoaXMubW92ZVRvUG9zaXRpb24oYSxiP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORDpDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLCEwO2Zvcih2YXIgYz0wO2E7KXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7YiYmdGhpcy5lbmRDb250YWluZXImJnRoaXMuY2hlY2tFbmRPZkJsb2NrKCkmJmsudGVzdChhLmdldFRleHQoKSk/dGhpcy5tb3ZlVG9Qb3NpdGlvbihhLFxyXG5DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpOnRoaXMubW92ZVRvUG9zaXRpb24oYSxiP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORDpDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpO2M9MTticmVha31pZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClpZihhLmlzRWRpdGFibGUoKSl0aGlzLm1vdmVUb1Bvc2l0aW9uKGEsYj9DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EOkNLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSxjPTE7ZWxzZSBpZihiJiZhLmlzKFwiYnJcIikmJnRoaXMuZW5kQ29udGFpbmVyJiZ0aGlzLmNoZWNrRW5kT2ZCbG9jaygpKXRoaXMubW92ZVRvUG9zaXRpb24oYSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpO2Vsc2UgaWYoXCJmYWxzZVwiPT1hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmYS5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKSlyZXR1cm4gdGhpcy5zZXRTdGFydEJlZm9yZShhKSx0aGlzLnNldEVuZEFmdGVyKGEpLFxyXG4hMDt2YXIgZD1hLGU9YyxxPXZvaWQgMDtkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5pc0VkaXRhYmxlKCExKSYmKHE9ZFtiP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0odykpO2V8fHF8fChxPWRbYj9cImdldFByZXZpb3VzXCI6XCJnZXROZXh0XCJdKHcpKTthPXF9cmV0dXJuISFjfSxtb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MCxlLHEsZz1bQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5ELENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVF07YT8oYz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCksYy5tb3ZlVG9Qb3NpdGlvbihhLGdbYj8wOjFdKSk6Yz10aGlzLmNsb25lKCk7aWYoYSYmIWEuaXMoQ0tFRElUT1IuZHRkLiRibG9jaykpZD0xO2Vsc2UgaWYoZT1jW2I/XCJnZXROZXh0RWRpdGFibGVOb2RlXCI6XCJnZXRQcmV2aW91c0VkaXRhYmxlTm9kZVwiXSgpKWQ9MSwocT1lLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCkmJlxyXG5lLmlzKENLRURJVE9SLmR0ZC4kYmxvY2spJiZcImZhbHNlXCI9PWUuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpPyhjLnNldFN0YXJ0QXQoZSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGMuc2V0RW5kQXQoZSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTohQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJnEmJmUuaXMoQ0tFRElUT1IuZG9tLndhbGtlci52YWxpZEVtcHR5QmxvY2tDb250YWluZXJzKT8oYy5zZXRFbmQoZSwwKSxjLmNvbGxhcHNlKCkpOmMubW92ZVRvUG9zaXRpb24oZSxnW2I/MTowXSk7ZCYmdGhpcy5tb3ZlVG9SYW5nZShjKTtyZXR1cm4hIWR9LG1vdmVUb0VsZW1lbnRFZGl0U3RhcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubW92ZVRvRWxlbWVudEVkaXRhYmxlUG9zaXRpb24oYSl9LG1vdmVUb0VsZW1lbnRFZGl0RW5kOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1vdmVUb0VsZW1lbnRFZGl0YWJsZVBvc2l0aW9uKGEsITApfSxnZXRFbmNsb3NlZE5vZGU6ZnVuY3Rpb24oKXt2YXIgYT1cclxudGhpcy5jbG9uZSgpO2Eub3B0aW1pemUoKTtpZihhLnN0YXJ0Q29udGFpbmVyLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8YS5lbmRDb250YWluZXIudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UKXJldHVybiBudWxsO3ZhciBhPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGEpLGI9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyayghMSwhMCksYz1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKTthLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4gYyhhKSYmYihhKX07dmFyIGQ9YS5uZXh0KCk7YS5yZXNldCgpO3JldHVybiBkJiZkLmVxdWFscyhhLnByZXZpb3VzKCkpP2Q6bnVsbH0sZ2V0VG91Y2hlZFN0YXJ0Tm9kZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXI7cmV0dXJuIHRoaXMuY29sbGFwc2VkfHxhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVD9hOmEuZ2V0Q2hpbGQodGhpcy5zdGFydE9mZnNldCl8fGF9LGdldFRvdWNoZWRFbmROb2RlOmZ1bmN0aW9uKCl7dmFyIGE9XHJcbnRoaXMuZW5kQ29udGFpbmVyO3JldHVybiB0aGlzLmNvbGxhcHNlZHx8YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/YTphLmdldENoaWxkKHRoaXMuZW5kT2Zmc2V0LTEpfHxhfSxnZXROZXh0RWRpdGFibGVOb2RlOmUoKSxnZXRQcmV2aW91c0VkaXRhYmxlTm9kZTplKDEpLHNjcm9sbEludG9WaWV3OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKFwiXFx4M2NzcGFuXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlXCIsdGhpcy5kb2N1bWVudCksYixjLGQsZT10aGlzLmNsb25lKCk7ZS5vcHRpbWl6ZSgpOyhkPWUuc3RhcnRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKT8oYz1lLnN0YXJ0Q29udGFpbmVyLmdldFRleHQoKSxiPWUuc3RhcnRDb250YWluZXIuc3BsaXQoZS5zdGFydE9mZnNldCksYS5pbnNlcnRBZnRlcihlLnN0YXJ0Q29udGFpbmVyKSk6ZS5pbnNlcnROb2RlKGEpO2Euc2Nyb2xsSW50b1ZpZXcoKTtcclxuZCYmKGUuc3RhcnRDb250YWluZXIuc2V0VGV4dChjKSxiLnJlbW92ZSgpKTthLnJlbW92ZSgpfSxfc2V0U3RhcnRDb250YWluZXI6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydENvbnRhaW5lcj1hfSxfc2V0RW5kQ29udGFpbmVyOmZ1bmN0aW9uKGEpe3RoaXMuZW5kQ29udGFpbmVyPWF9fX0pKCk7Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ9MTtDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EPTI7Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUPTM7Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EPTQ7Q0tFRElUT1IuRU5MQVJHRV9FTEVNRU5UPTE7Q0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUz0yO0NLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTPTM7Q0tFRElUT1IuRU5MQVJHRV9JTkxJTkU9NDtDS0VESVRPUi5TVEFSVD0xO0NLRURJVE9SLkVORD0yO0NLRURJVE9SLlNIUklOS19FTEVNRU5UPTE7Q0tFRElUT1IuU0hSSU5LX1RFWFQ9MjtcInVzZSBzdHJpY3RcIjtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXsxPmFyZ3VtZW50cy5sZW5ndGh8fCh0aGlzLnJhbmdlPWEsdGhpcy5mb3JjZUJyQnJlYWs9MCx0aGlzLmVubGFyZ2VCcj0xLHRoaXMuZW5mb3JjZVJlYWxCbG9ja3M9MCx0aGlzLl98fCh0aGlzLl89e30pKX1mdW5jdGlvbiBkKGEpe3ZhciBiPVtdO2EuZm9yRWFjaChmdW5jdGlvbihhKXtpZihcInRydWVcIj09YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpcmV0dXJuIGIucHVzaChhKSwhMX0sQ0tFRElUT1IuTk9ERV9FTEVNRU5ULCEwKTtyZXR1cm4gYn1mdW5jdGlvbiBiKGEsYyxlLGcpe2E6e251bGw9PWcmJihnPWQoZSkpO2Zvcih2YXIgbDtsPWcuc2hpZnQoKTspaWYobC5nZXREdGQoKS5wKXtnPXtlbGVtZW50OmwscmVtYWluaW5nOmd9O2JyZWFrIGF9Zz1udWxsfWlmKCFnKXJldHVybiAwO2lmKChsPUNLRURJVE9SLmZpbHRlci5pbnN0YW5jZXNbZy5lbGVtZW50LmRhdGEoXCJja2UtZmlsdGVyXCIpXSkmJiFsLmNoZWNrKGMpKXJldHVybiBiKGEsXHJcbmMsZSxnLnJlbWFpbmluZyk7Yz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGcuZWxlbWVudCk7Yy5zZWxlY3ROb2RlQ29udGVudHMoZy5lbGVtZW50KTtjPWMuY3JlYXRlSXRlcmF0b3IoKTtjLmVubGFyZ2VCcj1hLmVubGFyZ2VCcjtjLmVuZm9yY2VSZWFsQmxvY2tzPWEuZW5mb3JjZVJlYWxCbG9ja3M7Yy5hY3RpdmVGaWx0ZXI9Yy5maWx0ZXI9bDthLl8ubmVzdGVkRWRpdGFibGU9e2VsZW1lbnQ6Zy5lbGVtZW50LGNvbnRhaW5lcjplLHJlbWFpbmluZzpnLnJlbWFpbmluZyxpdGVyYXRvcjpjfTtyZXR1cm4gMX1mdW5jdGlvbiBjKGEsYixjKXtpZighYilyZXR1cm4hMTthPWEuY2xvbmUoKTthLmNvbGxhcHNlKCFjKTtyZXR1cm4gYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsYz9DS0VESVRPUi5TVEFSVDpDS0VESVRPUi5FTkQpfXZhciBlPS9eW1xcclxcblxcdCBdKyQvLGc9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyayghMSwhMCksbD1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKSxcclxuaz1mdW5jdGlvbihhKXtyZXR1cm4gZyhhKSYmbChhKX0sbj17ZGQ6MSxkdDoxLGxpOjF9O2EucHJvdG90eXBlPXtnZXROZXh0UGFyYWdyYXBoOmZ1bmN0aW9uKGEpe3ZhciBkLGwsQSx1LEI7YT1hfHxcInBcIjtpZih0aGlzLl8ubmVzdGVkRWRpdGFibGUpe2lmKGQ9dGhpcy5fLm5lc3RlZEVkaXRhYmxlLml0ZXJhdG9yLmdldE5leHRQYXJhZ3JhcGgoYSkpcmV0dXJuIHRoaXMuYWN0aXZlRmlsdGVyPXRoaXMuXy5uZXN0ZWRFZGl0YWJsZS5pdGVyYXRvci5hY3RpdmVGaWx0ZXIsZDt0aGlzLmFjdGl2ZUZpbHRlcj10aGlzLmZpbHRlcjtpZihiKHRoaXMsYSx0aGlzLl8ubmVzdGVkRWRpdGFibGUuY29udGFpbmVyLHRoaXMuXy5uZXN0ZWRFZGl0YWJsZS5yZW1haW5pbmcpKXJldHVybiB0aGlzLmFjdGl2ZUZpbHRlcj10aGlzLl8ubmVzdGVkRWRpdGFibGUuaXRlcmF0b3IuYWN0aXZlRmlsdGVyLHRoaXMuXy5uZXN0ZWRFZGl0YWJsZS5pdGVyYXRvci5nZXROZXh0UGFyYWdyYXBoKGEpO3RoaXMuXy5uZXN0ZWRFZGl0YWJsZT1cclxubnVsbH1pZighdGhpcy5yYW5nZS5yb290LmdldER0ZCgpW2FdKXJldHVybiBudWxsO2lmKCF0aGlzLl8uc3RhcnRlZCl7dmFyIHE9dGhpcy5yYW5nZS5jbG9uZSgpO2w9cS5zdGFydFBhdGgoKTt2YXIgeT1xLmVuZFBhdGgoKSxGPSFxLmNvbGxhcHNlZCYmYyhxLGwuYmxvY2spLHQ9IXEuY29sbGFwc2VkJiZjKHEseS5ibG9jaywxKTtxLnNocmluayhDS0VESVRPUi5TSFJJTktfRUxFTUVOVCwhMCk7RiYmcS5zZXRTdGFydEF0KGwuYmxvY2ssQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7dCYmcS5zZXRFbmRBdCh5LmJsb2NrLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTtsPXEuZW5kQ29udGFpbmVyLmhhc0FzY2VuZGFudChcInByZVwiLCEwKXx8cS5zdGFydENvbnRhaW5lci5oYXNBc2NlbmRhbnQoXCJwcmVcIiwhMCk7cS5lbmxhcmdlKHRoaXMuZm9yY2VCckJyZWFrJiYhbHx8IXRoaXMuZW5sYXJnZUJyP0NLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTOkNLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFMpO1xyXG5xLmNvbGxhcHNlZHx8KGw9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocS5jbG9uZSgpKSx5PUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITAsITApLGwuZXZhbHVhdG9yPXksdGhpcy5fLm5leHROb2RlPWwubmV4dCgpLGw9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocS5jbG9uZSgpKSxsLmV2YWx1YXRvcj15LGw9bC5wcmV2aW91cygpLHRoaXMuXy5sYXN0Tm9kZT1sLmdldE5leHRTb3VyY2VOb2RlKCEwLG51bGwscS5yb290KSx0aGlzLl8ubGFzdE5vZGUmJnRoaXMuXy5sYXN0Tm9kZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJiFDS0VESVRPUi50b29scy50cmltKHRoaXMuXy5sYXN0Tm9kZS5nZXRUZXh0KCkpJiZ0aGlzLl8ubGFzdE5vZGUuZ2V0UGFyZW50KCkuaXNCbG9ja0JvdW5kYXJ5KCkmJih5PXRoaXMucmFuZ2UuY2xvbmUoKSx5Lm1vdmVUb1Bvc2l0aW9uKHRoaXMuXy5sYXN0Tm9kZSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLHkuY2hlY2tFbmRPZkJsb2NrKCkmJlxyXG4oeT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHkuZW5kQ29udGFpbmVyLHkucm9vdCksdGhpcy5fLmxhc3ROb2RlPSh5LmJsb2NrfHx5LmJsb2NrTGltaXQpLmdldE5leHRTb3VyY2VOb2RlKCEwKSkpLHRoaXMuXy5sYXN0Tm9kZSYmcS5yb290LmNvbnRhaW5zKHRoaXMuXy5sYXN0Tm9kZSl8fCh0aGlzLl8ubGFzdE5vZGU9dGhpcy5fLmRvY0VuZE1hcmtlcj1xLmRvY3VtZW50LmNyZWF0ZVRleHQoXCJcIiksdGhpcy5fLmxhc3ROb2RlLmluc2VydEFmdGVyKGwpKSxxPW51bGwpO3RoaXMuXy5zdGFydGVkPTE7bD1xfXk9dGhpcy5fLm5leHROb2RlO3E9dGhpcy5fLmxhc3ROb2RlO2Zvcih0aGlzLl8ubmV4dE5vZGU9bnVsbDt5Oyl7dmFyIEY9MCx0PXkuaGFzQXNjZW5kYW50KFwicHJlXCIpLHo9eS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQsaD0wO2lmKHopeS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJmUudGVzdCh5LmdldFRleHQoKSkmJih6PTApO2Vsc2V7dmFyIHA9eS5nZXROYW1lKCk7XHJcbmlmKENLRURJVE9SLmR0ZC4kYmxvY2tbcF0mJlwiZmFsc2VcIj09eS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpe2Q9eTtiKHRoaXMsYSxkKTticmVha31lbHNlIGlmKHkuaXNCbG9ja0JvdW5kYXJ5KHRoaXMuZm9yY2VCckJyZWFrJiYhdCYme2JyOjF9KSl7aWYoXCJiclwiPT1wKXo9MTtlbHNlIGlmKCFsJiYheS5nZXRDaGlsZENvdW50KCkmJlwiaHJcIiE9cCl7ZD15O0E9eS5lcXVhbHMocSk7YnJlYWt9bCYmKGwuc2V0RW5kQXQoeSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLFwiYnJcIiE9cCYmKHRoaXMuXy5uZXh0Tm9kZT15KSk7Rj0xfWVsc2V7aWYoeS5nZXRGaXJzdCgpKXtsfHwobD10aGlzLnJhbmdlLmNsb25lKCksbC5zZXRTdGFydEF0KHksQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSk7eT15LmdldEZpcnN0KCk7Y29udGludWV9ej0xfX16JiYhbCYmKGw9dGhpcy5yYW5nZS5jbG9uZSgpLGwuc2V0U3RhcnRBdCh5LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCkpO1xyXG5BPSghRnx8eikmJnkuZXF1YWxzKHEpO2lmKGwmJiFGKWZvcig7IXkuZ2V0TmV4dChrKSYmIUE7KXtwPXkuZ2V0UGFyZW50KCk7aWYocC5pc0Jsb2NrQm91bmRhcnkodGhpcy5mb3JjZUJyQnJlYWsmJiF0JiZ7YnI6MX0pKXtGPTE7ej0wO0F8fHAuZXF1YWxzKHEpO2wuc2V0RW5kQXQocCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTticmVha315PXA7ej0xO0E9eS5lcXVhbHMocSk7aD0xfXomJmwuc2V0RW5kQXQoeSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO3k9dGhpcy5fZ2V0TmV4dFNvdXJjZU5vZGUoeSxoLHEpO2lmKChBPSF5KXx8RiYmbClicmVha31pZighZCl7aWYoIWwpcmV0dXJuIHRoaXMuXy5kb2NFbmRNYXJrZXImJnRoaXMuXy5kb2NFbmRNYXJrZXIucmVtb3ZlKCksdGhpcy5fLm5leHROb2RlPW51bGw7ZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGwuc3RhcnRDb250YWluZXIsbC5yb290KTt5PWQuYmxvY2tMaW1pdDtGPXtkaXY6MSx0aDoxLHRkOjF9O1xyXG5kPWQuYmxvY2s7IWQmJnkmJiF0aGlzLmVuZm9yY2VSZWFsQmxvY2tzJiZGW3kuZ2V0TmFtZSgpXSYmbC5jaGVja1N0YXJ0T2ZCbG9jaygpJiZsLmNoZWNrRW5kT2ZCbG9jaygpJiYheS5lcXVhbHMobC5yb290KT9kPXk6IWR8fHRoaXMuZW5mb3JjZVJlYWxCbG9ja3MmJmQuaXMobik/KGQ9dGhpcy5yYW5nZS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGwuZXh0cmFjdENvbnRlbnRzKCkuYXBwZW5kVG8oZCksZC50cmltKCksbC5pbnNlcnROb2RlKGQpLHU9Qj0hMCk6XCJsaVwiIT1kLmdldE5hbWUoKT9sLmNoZWNrU3RhcnRPZkJsb2NrKCkmJmwuY2hlY2tFbmRPZkJsb2NrKCl8fChkPWQuY2xvbmUoITEpLGwuZXh0cmFjdENvbnRlbnRzKCkuYXBwZW5kVG8oZCksZC50cmltKCksQj1sLnNwbGl0QmxvY2soKSx1PSFCLndhc1N0YXJ0T2ZCbG9jayxCPSFCLndhc0VuZE9mQmxvY2ssbC5pbnNlcnROb2RlKGQpKTpBfHwodGhpcy5fLm5leHROb2RlPWQuZXF1YWxzKHEpP251bGw6dGhpcy5fZ2V0TmV4dFNvdXJjZU5vZGUobC5nZXRCb3VuZGFyeU5vZGVzKCkuZW5kTm9kZSxcclxuMSxxKSl9dSYmKHU9ZC5nZXRQcmV2aW91cygpKSYmdS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihcImJyXCI9PXUuZ2V0TmFtZSgpP3UucmVtb3ZlKCk6dS5nZXRMYXN0KCkmJlwiYnJcIj09dS5nZXRMYXN0KCkuJC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZ1LmdldExhc3QoKS5yZW1vdmUoKSk7QiYmKHU9ZC5nZXRMYXN0KCkpJiZ1LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJiclwiPT11LmdldE5hbWUoKSYmKCFDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcnx8dS5nZXRQcmV2aW91cyhnKXx8dS5nZXROZXh0KGcpKSYmdS5yZW1vdmUoKTt0aGlzLl8ubmV4dE5vZGV8fCh0aGlzLl8ubmV4dE5vZGU9QXx8ZC5lcXVhbHMocSl8fCFxP251bGw6dGhpcy5fZ2V0TmV4dFNvdXJjZU5vZGUoZCwxLHEpKTtyZXR1cm4gZH0sX2dldE5leHRTb3VyY2VOb2RlOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiEoYS5lcXVhbHMoYyl8fGEuZXF1YWxzKGUpKX12YXIgZT1cclxudGhpcy5yYW5nZS5yb290O2ZvcihhPWEuZ2V0TmV4dFNvdXJjZU5vZGUoYixudWxsLGQpOyFnKGEpOylhPWEuZ2V0TmV4dFNvdXJjZU5vZGUoYixudWxsLGQpO3JldHVybiBhfX07Q0tFRElUT1IuZG9tLnJhbmdlLnByb3RvdHlwZS5jcmVhdGVJdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgYSh0aGlzKX19KSgpO1xyXG5DS0VESVRPUi5jb21tYW5kPWZ1bmN0aW9uKGEsZCl7dGhpcy51aUl0ZW1zPVtdO3RoaXMuZXhlYz1mdW5jdGlvbihiKXtpZih0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRHx8IXRoaXMuY2hlY2tBbGxvd2VkKCkpcmV0dXJuITE7dGhpcy5lZGl0b3JGb2N1cyYmYS5mb2N1cygpO3JldHVybiExPT09dGhpcy5maXJlKFwiZXhlY1wiKT8hMDohMSE9PWQuZXhlYy5jYWxsKHRoaXMsYSxiKX07dGhpcy5yZWZyZXNoPWZ1bmN0aW9uKGEsYil7aWYoIXRoaXMucmVhZE9ubHkmJmEucmVhZE9ubHkpcmV0dXJuITA7aWYodGhpcy5jb250ZXh0JiYhYi5pc0NvbnRleHRGb3IodGhpcy5jb250ZXh0KXx8IXRoaXMuY2hlY2tBbGxvd2VkKCEwKSlyZXR1cm4gdGhpcy5kaXNhYmxlKCksITA7dGhpcy5zdGFydERpc2FibGVkfHx0aGlzLmVuYWJsZSgpO3RoaXMubW9kZXMmJiF0aGlzLm1vZGVzW2EubW9kZV0mJnRoaXMuZGlzYWJsZSgpO3JldHVybiExPT09dGhpcy5maXJlKFwicmVmcmVzaFwiLFxyXG57ZWRpdG9yOmEscGF0aDpifSk/ITA6ZC5yZWZyZXNoJiYhMSE9PWQucmVmcmVzaC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBiO3RoaXMuY2hlY2tBbGxvd2VkPWZ1bmN0aW9uKGMpe3JldHVybiBjfHxcImJvb2xlYW5cIiE9dHlwZW9mIGI/Yj1hLmFjdGl2ZUZpbHRlci5jaGVja0ZlYXR1cmUodGhpcyk6Yn07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsZCx7bW9kZXM6e3d5c2l3eWc6MX0sZWRpdG9yRm9jdXM6MSxjb250ZXh0U2Vuc2l0aXZlOiEhZC5jb250ZXh0LHN0YXRlOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEfSk7Q0tFRElUT1IuZXZlbnQuY2FsbCh0aGlzKX07XHJcbkNLRURJVE9SLmNvbW1hbmQucHJvdG90eXBlPXtlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmdGhpcy5jaGVja0FsbG93ZWQoKSYmdGhpcy5zZXRTdGF0ZSh0aGlzLnByZXNlcnZlU3RhdGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLnByZXZpb3VzU3RhdGU/dGhpcy5wcmV2aW91c1N0YXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRil9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX0sc2V0U3RhdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGF0ZT09YXx8YSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJiF0aGlzLmNoZWNrQWxsb3dlZCgpKXJldHVybiExO3RoaXMucHJldmlvdXNTdGF0ZT10aGlzLnN0YXRlO3RoaXMuc3RhdGU9YTt0aGlzLmZpcmUoXCJzdGF0ZVwiKTtyZXR1cm4hMH0sdG9nZ2xlU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkY/XHJcbnRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pOnRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09OJiZ0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09GRil9fTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUi5jb21tYW5kLnByb3RvdHlwZSk7Q0tFRElUT1IuRU5URVJfUD0xO0NLRURJVE9SLkVOVEVSX0JSPTI7Q0tFRElUT1IuRU5URVJfRElWPTM7XHJcbkNLRURJVE9SLmNvbmZpZz17Y3VzdG9tQ29uZmlnOlwiY29uZmlnLmpzXCIsYXV0b1VwZGF0ZUVsZW1lbnQ6ITAsbGFuZ3VhZ2U6XCJcIixkZWZhdWx0TGFuZ3VhZ2U6XCJlblwiLGNvbnRlbnRzTGFuZ0RpcmVjdGlvbjpcIlwiLGVudGVyTW9kZTpDS0VESVRPUi5FTlRFUl9QLGZvcmNlRW50ZXJNb2RlOiExLHNoaWZ0RW50ZXJNb2RlOkNLRURJVE9SLkVOVEVSX0JSLGRvY1R5cGU6XCJcXHgzYyFET0NUWVBFIGh0bWxcXHgzZVwiLGJvZHlJZDpcIlwiLGJvZHlDbGFzczpcIlwiLGZ1bGxQYWdlOiExLGhlaWdodDoyMDAsY29udGVudHNDc3M6Q0tFRElUT1IuZ2V0VXJsKFwiY29udGVudHMuY3NzXCIpLGV4dHJhUGx1Z2luczpcIlwiLHJlbW92ZVBsdWdpbnM6XCJcIixwcm90ZWN0ZWRTb3VyY2U6W10sdGFiSW5kZXg6MCx3aWR0aDpcIlwiLGJhc2VGbG9hdFpJbmRleDoxRTQsYmxvY2tlZEtleXN0cm9rZXM6W0NLRURJVE9SLkNUUkwrNjYsQ0tFRElUT1IuQ1RSTCs3MyxDS0VESVRPUi5DVFJMKzg1XX07XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZCxlKXt2YXIgaCxwO2E9W107Zm9yKGggaW4gYil7cD1iW2hdO3A9XCJib29sZWFuXCI9PXR5cGVvZiBwP3t9OlwiZnVuY3Rpb25cIj09dHlwZW9mIHA/e21hdGNoOnB9OksocCk7XCIkXCIhPWguY2hhckF0KDApJiYocC5lbGVtZW50cz1oKTtjJiYocC5mZWF0dXJlTmFtZT1jLnRvTG93ZXJDYXNlKCkpO3ZhciBtPXA7bS5lbGVtZW50cz1sKG0uZWxlbWVudHMsL1xccysvKXx8bnVsbDttLnByb3BlcnRpZXNPbmx5PW0ucHJvcGVydGllc09ubHl8fCEwPT09bS5lbGVtZW50czt2YXIgcj0vXFxzKixcXHMqLyxxPXZvaWQgMDtmb3IocSBpbiBRKXttW3FdPWwobVtxXSxyKXx8bnVsbDt2YXIgZj1tLEU9dltxXSx6PWwobVt2W3FdXSxyKSxnPW1bcV0sQz1bXSxHPSEwLEw9dm9pZCAwO3o/Rz0hMTp6PXt9O2ZvcihMIGluIGcpXCIhXCI9PUwuY2hhckF0KDApJiYoTD1MLnNsaWNlKDEpLEMucHVzaChMKSx6W0xdPSEwLEc9ITEpO2Zvcig7TD1DLnBvcCgpOylnW0xdPVxyXG5nW1wiIVwiK0xdLGRlbGV0ZSBnW1wiIVwiK0xdO2ZbRV09KEc/ITE6eil8fG51bGx9bS5tYXRjaD1tLm1hdGNofHxudWxsO2QucHVzaChwKTthLnB1c2gocCl9Yj1lLmVsZW1lbnRzO2U9ZS5nZW5lcmljO3ZhciBrO2M9MDtmb3IoZD1hLmxlbmd0aDtjPGQ7KytjKXtoPUsoYVtjXSk7cD0hMD09PWguY2xhc3Nlc3x8ITA9PT1oLnN0eWxlc3x8ITA9PT1oLmF0dHJpYnV0ZXM7bT1oO3E9RT1yPXZvaWQgMDtmb3IociBpbiBRKW1bcl09RihtW3JdKTtmPSEwO2ZvcihxIGluIHYpe3I9dltxXTtFPW1bcl07ej1bXTtnPXZvaWQgMDtmb3IoZyBpbiBFKS0xPGcuaW5kZXhPZihcIipcIik/ei5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrZy5yZXBsYWNlKC9cXCovZyxcIi4qXCIpK1wiJFwiKSk6ei5wdXNoKGcpO0U9ejtFLmxlbmd0aCYmKG1bcl09RSxmPSExKX1tLm5vdGhpbmdSZXF1aXJlZD1mO20ubm9Qcm9wZXJ0aWVzPSEobS5hdHRyaWJ1dGVzfHxtLmNsYXNzZXN8fG0uc3R5bGVzKTtpZighMD09PWguZWxlbWVudHN8fFxyXG5udWxsPT09aC5lbGVtZW50cyllW3A/XCJ1bnNoaWZ0XCI6XCJwdXNoXCJdKGgpO2Vsc2UgZm9yKGsgaW4gbT1oLmVsZW1lbnRzLGRlbGV0ZSBoLmVsZW1lbnRzLG0paWYoYltrXSliW2tdW3A/XCJ1bnNoaWZ0XCI6XCJwdXNoXCJdKGgpO2Vsc2UgYltrXT1baF19fWZ1bmN0aW9uIGQoYSxjLGQsaCl7aWYoIWEubWF0Y2h8fGEubWF0Y2goYykpaWYoaHx8ayhhLGMpKWlmKGEucHJvcGVydGllc09ubHl8fChkLnZhbGlkPSEwKSxkLmFsbEF0dHJpYnV0ZXN8fChkLmFsbEF0dHJpYnV0ZXM9YihhLmF0dHJpYnV0ZXMsYy5hdHRyaWJ1dGVzLGQudmFsaWRBdHRyaWJ1dGVzKSksZC5hbGxTdHlsZXN8fChkLmFsbFN0eWxlcz1iKGEuc3R5bGVzLGMuc3R5bGVzLGQudmFsaWRTdHlsZXMpKSwhZC5hbGxDbGFzc2VzKXthPWEuY2xhc3NlcztjPWMuY2xhc3NlcztoPWQudmFsaWRDbGFzc2VzO2lmKGEpaWYoITA9PT1hKWE9ITA7ZWxzZXtmb3IodmFyIHA9MCxlPWMubGVuZ3RoLG07cDxlOysrcCltPWNbcF0saFttXXx8XHJcbihoW21dPWEobSkpO2E9ITF9ZWxzZSBhPSExO2QuYWxsQ2xhc3Nlcz1hfX1mdW5jdGlvbiBiKGEsYixjKXtpZighYSlyZXR1cm4hMTtpZighMD09PWEpcmV0dXJuITA7Zm9yKHZhciBkIGluIGIpY1tkXXx8KGNbZF09YShkKSk7cmV0dXJuITF9ZnVuY3Rpb24gYyhhLGIsYyl7aWYoIWEubWF0Y2h8fGEubWF0Y2goYikpe2lmKGEubm9Qcm9wZXJ0aWVzKXJldHVybiExO2MuaGFkSW52YWxpZEF0dHJpYnV0ZT1lKGEuYXR0cmlidXRlcyxiLmF0dHJpYnV0ZXMpfHxjLmhhZEludmFsaWRBdHRyaWJ1dGU7Yy5oYWRJbnZhbGlkU3R5bGU9ZShhLnN0eWxlcyxiLnN0eWxlcyl8fGMuaGFkSW52YWxpZFN0eWxlO2E9YS5jbGFzc2VzO2I9Yi5jbGFzc2VzO2lmKGEpe2Zvcih2YXIgZD0hMSxoPSEwPT09YSxwPWIubGVuZ3RoO3AtLTspaWYoaHx8YShiW3BdKSliLnNwbGljZShwLDEpLGQ9ITA7YT1kfWVsc2UgYT0hMTtjLmhhZEludmFsaWRDbGFzcz1hfHxjLmhhZEludmFsaWRDbGFzc319ZnVuY3Rpb24gZShhLFxyXG5iKXtpZighYSlyZXR1cm4hMTt2YXIgYz0hMSxkPSEwPT09YSxoO2ZvcihoIGluIGIpaWYoZHx8YShoKSlkZWxldGUgYltoXSxjPSEwO3JldHVybiBjfWZ1bmN0aW9uIGcoYSxiLGMpe2lmKGEuZGlzYWJsZWR8fGEuY3VzdG9tQ29uZmlnJiYhY3x8IWIpcmV0dXJuITE7YS5fLmNhY2hlZENoZWNrcz17fTtyZXR1cm4hMH1mdW5jdGlvbiBsKGEsYil7aWYoIWEpcmV0dXJuITE7aWYoITA9PT1hKXJldHVybiBhO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXJldHVybiBhPVIoYSksXCIqXCI9PWE/ITA6Q0tFRElUT1IudG9vbHMuY29udmVydEFycmF5VG9PYmplY3QoYS5zcGxpdChiKSk7aWYoQ0tFRElUT1IudG9vbHMuaXNBcnJheShhKSlyZXR1cm4gYS5sZW5ndGg/Q0tFRElUT1IudG9vbHMuY29udmVydEFycmF5VG9PYmplY3QoYSk6ITE7dmFyIGM9e30sZD0wLGg7Zm9yKGggaW4gYSljW2hdPWFbaF0sZCsrO3JldHVybiBkP2M6ITF9ZnVuY3Rpb24gayhhLGIpe2lmKGEubm90aGluZ1JlcXVpcmVkKXJldHVybiEwO1xyXG52YXIgYyxkLGgscDtpZihoPWEucmVxdWlyZWRDbGFzc2VzKWZvcihwPWIuY2xhc3NlcyxjPTA7YzxoLmxlbmd0aDsrK2MpaWYoZD1oW2NdLFwic3RyaW5nXCI9PXR5cGVvZiBkKXtpZigtMT09Q0tFRElUT1IudG9vbHMuaW5kZXhPZihwLGQpKXJldHVybiExfWVsc2UgaWYoIUNLRURJVE9SLnRvb2xzLmNoZWNrSWZBbnlBcnJheUl0ZW1NYXRjaGVzKHAsZCkpcmV0dXJuITE7cmV0dXJuIG4oYi5zdHlsZXMsYS5yZXF1aXJlZFN0eWxlcykmJm4oYi5hdHRyaWJ1dGVzLGEucmVxdWlyZWRBdHRyaWJ1dGVzKX1mdW5jdGlvbiBuKGEsYil7aWYoIWIpcmV0dXJuITA7Zm9yKHZhciBjPTAsZDtjPGIubGVuZ3RoOysrYylpZihkPWJbY10sXCJzdHJpbmdcIj09dHlwZW9mIGQpe2lmKCEoZCBpbiBhKSlyZXR1cm4hMX1lbHNlIGlmKCFDS0VESVRPUi50b29scy5jaGVja0lmQW55T2JqZWN0UHJvcGVydHlNYXRjaGVzKGEsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gdyhhKXtpZighYSlyZXR1cm57fTtcclxuYT1hLnNwbGl0KC9cXHMqLFxccyovKS5zb3J0KCk7Zm9yKHZhciBiPXt9O2EubGVuZ3RoOyliW2Euc2hpZnQoKV09XCJja2UtdGVzdFwiO3JldHVybiBifWZ1bmN0aW9uIGYoYSl7dmFyIGIsYyxkLGgscD17fSxlPTE7Zm9yKGE9UihhKTtiPWEubWF0Y2goRCk7KShjPWJbMl0pPyhkPXgoYyxcInN0eWxlc1wiKSxoPXgoYyxcImF0dHJzXCIpLGM9eChjLFwiY2xhc3Nlc1wiKSk6ZD1oPWM9bnVsbCxwW1wiJFwiK2UrK109e2VsZW1lbnRzOmJbMV0sY2xhc3NlczpjLHN0eWxlczpkLGF0dHJpYnV0ZXM6aH0sYT1hLnNsaWNlKGJbMF0ubGVuZ3RoKTtyZXR1cm4gcH1mdW5jdGlvbiB4KGEsYil7dmFyIGM9YS5tYXRjaChJW2JdKTtyZXR1cm4gYz9SKGNbMV0pOm51bGx9ZnVuY3Rpb24gQShhKXt2YXIgYj1hLnN0eWxlQmFja3VwPWEuYXR0cmlidXRlcy5zdHlsZSxjPWEuY2xhc3NCYWNrdXA9YS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl07YS5zdHlsZXN8fChhLnN0eWxlcz1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYnx8XHJcblwiXCIsMSkpO2EuY2xhc3Nlc3x8KGEuY2xhc3Nlcz1jP2Muc3BsaXQoL1xccysvKTpbXSl9ZnVuY3Rpb24gdShhLGIsaCxlKXt2YXIgbT0wLHI7ZS50b0h0bWwmJihiLm5hbWU9Yi5uYW1lLnJlcGxhY2UoRSxcIiQxXCIpKTtpZihlLmRvQ2FsbGJhY2tzJiZhLmVsZW1lbnRDYWxsYmFja3Mpe2E6e3I9YS5lbGVtZW50Q2FsbGJhY2tzO2Zvcih2YXIgZz0wLGY9ci5sZW5ndGgsejtnPGY7KytnKWlmKHo9cltnXShiKSl7cj16O2JyZWFrIGF9cj12b2lkIDB9aWYocilyZXR1cm4gcn1pZihlLmRvVHJhbnNmb3JtJiYocj1hLl8udHJhbnNmb3JtYXRpb25zW2IubmFtZV0pKXtBKGIpO2ZvcihnPTA7ZzxyLmxlbmd0aDsrK2cpcChhLGIscltnXSk7cShiKX1pZihlLmRvRmlsdGVyKXthOntnPWIubmFtZTtmPWEuXzthPWYuYWxsb3dlZFJ1bGVzLmVsZW1lbnRzW2ddO3I9Zi5hbGxvd2VkUnVsZXMuZ2VuZXJpYztnPWYuZGlzYWxsb3dlZFJ1bGVzLmVsZW1lbnRzW2ddO2Y9Zi5kaXNhbGxvd2VkUnVsZXMuZ2VuZXJpYztcclxuej1lLnNraXBSZXF1aXJlZDt2YXIgQz17dmFsaWQ6ITEsdmFsaWRBdHRyaWJ1dGVzOnt9LHZhbGlkQ2xhc3Nlczp7fSx2YWxpZFN0eWxlczp7fSxhbGxBdHRyaWJ1dGVzOiExLGFsbENsYXNzZXM6ITEsYWxsU3R5bGVzOiExLGhhZEludmFsaWRBdHRyaWJ1dGU6ITEsaGFkSW52YWxpZENsYXNzOiExLGhhZEludmFsaWRTdHlsZTohMX0sdixsO2lmKGF8fHIpe0EoYik7aWYoZylmb3Iodj0wLGw9Zy5sZW5ndGg7djxsOysrdilpZighMT09PWMoZ1t2XSxiLEMpKXthPW51bGw7YnJlYWsgYX1pZihmKWZvcih2PTAsbD1mLmxlbmd0aDt2PGw7Kyt2KWMoZlt2XSxiLEMpO2lmKGEpZm9yKHY9MCxsPWEubGVuZ3RoO3Y8bDsrK3YpZChhW3ZdLGIsQyx6KTtpZihyKWZvcih2PTAsbD1yLmxlbmd0aDt2PGw7Kyt2KWQoclt2XSxiLEMseik7YT1DfWVsc2UgYT1udWxsfWlmKCFhfHwhYS52YWxpZClyZXR1cm4gaC5wdXNoKGIpLDE7bD1hLnZhbGlkQXR0cmlidXRlczt2YXIgRz1hLnZhbGlkU3R5bGVzO1xyXG5yPWEudmFsaWRDbGFzc2VzO3ZhciBnPWIuYXR0cmlidXRlcyxrPWIuc3R5bGVzLGY9Yi5jbGFzc2VzO3o9Yi5jbGFzc0JhY2t1cDt2YXIgST1iLnN0eWxlQmFja3VwLEQsSCxKPVtdLEM9W10sbj0vXmRhdGEtY2tlLS87dj0hMTtkZWxldGUgZy5zdHlsZTtkZWxldGUgZ1tcImNsYXNzXCJdO2RlbGV0ZSBiLmNsYXNzQmFja3VwO2RlbGV0ZSBiLnN0eWxlQmFja3VwO2lmKCFhLmFsbEF0dHJpYnV0ZXMpZm9yKEQgaW4gZylsW0RdfHwobi50ZXN0KEQpP0Q9PShIPUQucmVwbGFjZSgvXmRhdGEtY2tlLXNhdmVkLS8sXCJcIikpfHxsW0hdfHwoZGVsZXRlIGdbRF0sdj0hMCk6KGRlbGV0ZSBnW0RdLHY9ITApKTtpZighYS5hbGxTdHlsZXN8fGEuaGFkSW52YWxpZFN0eWxlKXtmb3IoRCBpbiBrKWEuYWxsU3R5bGVzfHxHW0RdP0oucHVzaChEK1wiOlwiK2tbRF0pOnY9ITA7Si5sZW5ndGgmJihnLnN0eWxlPUouc29ydCgpLmpvaW4oXCI7IFwiKSl9ZWxzZSBJJiYoZy5zdHlsZT1JKTtpZighYS5hbGxDbGFzc2VzfHxcclxuYS5oYWRJbnZhbGlkQ2xhc3Mpe2ZvcihEPTA7RDxmLmxlbmd0aDsrK0QpKGEuYWxsQ2xhc3Nlc3x8cltmW0RdXSkmJkMucHVzaChmW0RdKTtDLmxlbmd0aCYmKGdbXCJjbGFzc1wiXT1DLnNvcnQoKS5qb2luKFwiIFwiKSk7eiYmQy5sZW5ndGg8ei5zcGxpdCgvXFxzKy8pLmxlbmd0aCYmKHY9ITApfWVsc2UgeiYmKGdbXCJjbGFzc1wiXT16KTt2JiYobT0xKTtpZighZS5za2lwRmluYWxWYWxpZGF0aW9uJiYheShiKSlyZXR1cm4gaC5wdXNoKGIpLDF9ZS50b0h0bWwmJihiLm5hbWU9Yi5uYW1lLnJlcGxhY2UoTCxcImNrZTokMVwiKSk7cmV0dXJuIG19ZnVuY3Rpb24gQihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpLTE8Yy5pbmRleE9mKFwiKlwiKSYmYi5wdXNoKGMucmVwbGFjZSgvXFwqL2csXCIuKlwiKSk7cmV0dXJuIGIubGVuZ3RoP25ldyBSZWdFeHAoXCJeKD86XCIrYi5qb2luKFwifFwiKStcIikkXCIpOm51bGx9ZnVuY3Rpb24gcShhKXt2YXIgYj1hLmF0dHJpYnV0ZXMsYztkZWxldGUgYi5zdHlsZTtkZWxldGUgYltcImNsYXNzXCJdO1xyXG5pZihjPUNLRURJVE9SLnRvb2xzLndyaXRlQ3NzVGV4dChhLnN0eWxlcywhMCkpYi5zdHlsZT1jO2EuY2xhc3Nlcy5sZW5ndGgmJihiW1wiY2xhc3NcIl09YS5jbGFzc2VzLnNvcnQoKS5qb2luKFwiIFwiKSl9ZnVuY3Rpb24geShhKXtzd2l0Y2goYS5uYW1lKXtjYXNlIFwiYVwiOmlmKCEoYS5jaGlsZHJlbi5sZW5ndGh8fGEuYXR0cmlidXRlcy5uYW1lfHxhLmF0dHJpYnV0ZXMuaWQpKXJldHVybiExO2JyZWFrO2Nhc2UgXCJpbWdcIjppZighYS5hdHRyaWJ1dGVzLnNyYylyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBGKGEpe2lmKCFhKXJldHVybiExO2lmKCEwPT09YSlyZXR1cm4hMDt2YXIgYj1CKGEpO3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYyBpbiBhfHxiJiZjLm1hdGNoKGIpfX1mdW5jdGlvbiB0KCl7cmV0dXJuIG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoXCJiclwiKX1mdW5jdGlvbiB6KGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKFwiYnJcIj09XHJcbmEubmFtZXx8SC4kYmxvY2tbYS5uYW1lXSl9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9YS5uYW1lO2lmKEguJGVtcHR5W2RdfHwhYS5jaGlsZHJlbi5sZW5ndGgpXCJoclwiPT1kJiZcImJyXCI9PWI/YS5yZXBsYWNlV2l0aCh0KCkpOihhLnBhcmVudCYmYy5wdXNoKHtjaGVjazpcIml0XCIsZWw6YS5wYXJlbnR9KSxhLnJlbW92ZSgpKTtlbHNlIGlmKEguJGJsb2NrW2RdfHxcInRyXCI9PWQpaWYoXCJiclwiPT1iKWEucHJldmlvdXMmJiF6KGEucHJldmlvdXMpJiYoYj10KCksYi5pbnNlcnRCZWZvcmUoYSkpLGEubmV4dCYmIXooYS5uZXh0KSYmKGI9dCgpLGIuaW5zZXJ0QWZ0ZXIoYSkpLGEucmVwbGFjZVdpdGhDaGlsZHJlbigpO2Vsc2V7dmFyIGQ9YS5jaGlsZHJlbixoO2I6e2g9SFtiXTtmb3IodmFyIHA9MCxlPWQubGVuZ3RoLG07cDxlOysrcClpZihtPWRbcF0sbS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFoW20ubmFtZV0pe2g9ITE7YnJlYWsgYn1oPSEwfWlmKGgpYS5uYW1lPWIsYS5hdHRyaWJ1dGVzPVxyXG57fSxjLnB1c2goe2NoZWNrOlwicGFyZW50LWRvd25cIixlbDphfSk7ZWxzZXtoPWEucGFyZW50O2Zvcih2YXIgcD1oLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlR8fFwiYm9keVwiPT1oLm5hbWUscixnLGU9ZC5sZW5ndGg7MDxlOyltPWRbLS1lXSxwJiYobS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFR8fG0udHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZILiRpbmxpbmVbbS5uYW1lXSk/KHJ8fChyPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoYiksci5pbnNlcnRBZnRlcihhKSxjLnB1c2goe2NoZWNrOlwicGFyZW50LWRvd25cIixlbDpyfSkpLHIuYWRkKG0sMCkpOihyPW51bGwsZz1IW2gubmFtZV18fEguc3BhbixtLmluc2VydEFmdGVyKGEpLGgudHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVHx8bS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fGdbbS5uYW1lXXx8Yy5wdXNoKHtjaGVjazpcImVsLXVwXCIsZWw6bX0pKTthLnJlbW92ZSgpfX1lbHNlIGQgaW5cclxue3N0eWxlOjEsc2NyaXB0OjF9P2EucmVtb3ZlKCk6KGEucGFyZW50JiZjLnB1c2goe2NoZWNrOlwiaXRcIixlbDphLnBhcmVudH0pLGEucmVwbGFjZVdpdGhDaGlsZHJlbigpKX1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZCxoO2ZvcihkPTA7ZDxjLmxlbmd0aDsrK2QpaWYoaD1jW2RdLCEoaC5jaGVjayYmIWEuY2hlY2soaC5jaGVjaywhMSl8fGgubGVmdCYmIWgubGVmdChiKSkpe2gucmlnaHQoYixKKTticmVha319ZnVuY3Rpb24gbShhLGIpe3ZhciBjPWIuZ2V0RGVmaW5pdGlvbigpLGQ9Yy5hdHRyaWJ1dGVzLGg9Yy5zdHlsZXMscCxlLG0scjtpZihhLm5hbWUhPWMuZWxlbWVudClyZXR1cm4hMTtmb3IocCBpbiBkKWlmKFwiY2xhc3NcIj09cClmb3IoYz1kW3BdLnNwbGl0KC9cXHMrLyksbT1hLmNsYXNzZXMuam9pbihcInxcIik7cj1jLnBvcCgpOyl7aWYoLTE9PW0uaW5kZXhPZihyKSlyZXR1cm4hMX1lbHNlIGlmKGEuYXR0cmlidXRlc1twXSE9ZFtwXSlyZXR1cm4hMTtmb3IoZSBpbiBoKWlmKGEuc3R5bGVzW2VdIT1cclxuaFtlXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBDKGEsYil7dmFyIGMsZDtcInN0cmluZ1wiPT10eXBlb2YgYT9jPWE6YSBpbnN0YW5jZW9mIENLRURJVE9SLnN0eWxlP2Q9YTooYz1hWzBdLGQ9YVsxXSk7cmV0dXJuW3tlbGVtZW50OmMsbGVmdDpkLHJpZ2h0OmZ1bmN0aW9uKGEsYyl7Yy50cmFuc2Zvcm0oYSxiKX19XX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gbShiLGEpfX1mdW5jdGlvbiBHKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2NbYV0oYil9fXZhciBIPUNLRURJVE9SLmR0ZCxLPUNLRURJVE9SLnRvb2xzLmNvcHksUj1DS0VESVRPUi50b29scy50cmltLE09W1wiXCIsXCJwXCIsXCJiclwiLFwiZGl2XCJdO0NLRURJVE9SLkZJTFRFUl9TS0lQX1RSRUU9MjtDS0VESVRPUi5maWx0ZXI9ZnVuY3Rpb24oYSl7dGhpcy5hbGxvd2VkQ29udGVudD1bXTt0aGlzLmRpc2FsbG93ZWRDb250ZW50PVtdO3RoaXMuZWxlbWVudENhbGxiYWNrcz1udWxsO3RoaXMuZGlzYWJsZWQ9XHJcbiExO3RoaXMuZWRpdG9yPW51bGw7dGhpcy5pZD1DS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCk7dGhpcy5fPXthbGxvd2VkUnVsZXM6e2VsZW1lbnRzOnt9LGdlbmVyaWM6W119LGRpc2FsbG93ZWRSdWxlczp7ZWxlbWVudHM6e30sZ2VuZXJpYzpbXX0sdHJhbnNmb3JtYXRpb25zOnt9LGNhY2hlZFRlc3RzOnt9fTtDS0VESVRPUi5maWx0ZXIuaW5zdGFuY2VzW3RoaXMuaWRdPXRoaXM7aWYoYSBpbnN0YW5jZW9mIENLRURJVE9SLmVkaXRvcil7YT10aGlzLmVkaXRvcj1hO3RoaXMuY3VzdG9tQ29uZmlnPSEwO3ZhciBiPWEuY29uZmlnLmFsbG93ZWRDb250ZW50OyEwPT09Yj90aGlzLmRpc2FibGVkPSEwOihifHwodGhpcy5jdXN0b21Db25maWc9ITEpLHRoaXMuYWxsb3coYixcImNvbmZpZ1wiLDEpLHRoaXMuYWxsb3coYS5jb25maWcuZXh0cmFBbGxvd2VkQ29udGVudCxcImV4dHJhXCIsMSksdGhpcy5hbGxvdyhNW2EuZW50ZXJNb2RlXStcIiBcIitNW2Euc2hpZnRFbnRlck1vZGVdLFwiZGVmYXVsdFwiLFxyXG4xKSx0aGlzLmRpc2FsbG93KGEuY29uZmlnLmRpc2FsbG93ZWRDb250ZW50KSl9ZWxzZSB0aGlzLmN1c3RvbUNvbmZpZz0hMSx0aGlzLmFsbG93KGEsXCJkZWZhdWx0XCIsMSl9O0NLRURJVE9SLmZpbHRlci5pbnN0YW5jZXM9e307Q0tFRElUT1IuZmlsdGVyLnByb3RvdHlwZT17YWxsb3c6ZnVuY3Rpb24oYixjLGQpe2lmKCFnKHRoaXMsYixkKSlyZXR1cm4hMTt2YXIgaCxwO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWI9ZihiKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiBDS0VESVRPUi5zdHlsZSl7aWYoYi50b0FsbG93ZWRDb250ZW50UnVsZXMpcmV0dXJuIHRoaXMuYWxsb3coYi50b0FsbG93ZWRDb250ZW50UnVsZXModGhpcy5lZGl0b3IpLGMsZCk7aD1iLmdldERlZmluaXRpb24oKTtiPXt9O2Q9aC5hdHRyaWJ1dGVzO2JbaC5lbGVtZW50XT1oPXtzdHlsZXM6aC5zdHlsZXMscmVxdWlyZWRTdHlsZXM6aC5zdHlsZXMmJkNLRURJVE9SLnRvb2xzLm9iamVjdEtleXMoaC5zdHlsZXMpfTtkJiYoZD1cclxuSyhkKSxoLmNsYXNzZXM9ZFtcImNsYXNzXCJdP2RbXCJjbGFzc1wiXS5zcGxpdCgvXFxzKy8pOm51bGwsaC5yZXF1aXJlZENsYXNzZXM9aC5jbGFzc2VzLGRlbGV0ZSBkW1wiY2xhc3NcIl0saC5hdHRyaWJ1dGVzPWQsaC5yZXF1aXJlZEF0dHJpYnV0ZXM9ZCYmQ0tFRElUT1IudG9vbHMub2JqZWN0S2V5cyhkKSl9ZWxzZSBpZihDS0VESVRPUi50b29scy5pc0FycmF5KGIpKXtmb3IoaD0wO2g8Yi5sZW5ndGg7KytoKXA9dGhpcy5hbGxvdyhiW2hdLGMsZCk7cmV0dXJuIHB9YSh0aGlzLGIsYyx0aGlzLmFsbG93ZWRDb250ZW50LHRoaXMuXy5hbGxvd2VkUnVsZXMpO3JldHVybiEwfSxhcHBseVRvOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZGlzYWJsZWQpcmV0dXJuITE7dmFyIHA9dGhpcyxlPVtdLG09dGhpcy5lZGl0b3ImJnRoaXMuZWRpdG9yLmNvbmZpZy5wcm90ZWN0ZWRTb3VyY2UscixnPSExLGY9e2RvRmlsdGVyOiFjLGRvVHJhbnNmb3JtOiEwLGRvQ2FsbGJhY2tzOiEwLHRvSHRtbDpifTtcclxuYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKXtpZihcIm9mZlwiPT1hLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1maWx0ZXJcIl0pcmV0dXJuITE7aWYoIWJ8fFwic3BhblwiIT1hLm5hbWV8fCF+Q0tFRElUT1IudG9vbHMub2JqZWN0S2V5cyhhLmF0dHJpYnV0ZXMpLmpvaW4oXCJ8XCIpLmluZGV4T2YoXCJkYXRhLWNrZS1cIikpaWYocj11KHAsYSxlLGYpLHImMSlnPSEwO2Vsc2UgaWYociYyKXJldHVybiExfWVsc2UgaWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0NPTU1FTlQmJmEudmFsdWUubWF0Y2goL15cXHtja2VfcHJvdGVjdGVkXFx9KD8hXFx7Q1xcfSkvKSl7dmFyIGM7YTp7dmFyIGQ9ZGVjb2RlVVJJQ29tcG9uZW50KGEudmFsdWUucmVwbGFjZSgvXlxce2NrZV9wcm90ZWN0ZWRcXH0vLFwiXCIpKTtjPVtdO3ZhciBoLHEsejtpZihtKWZvcihxPTA7cTxtLmxlbmd0aDsrK3EpaWYoKHo9ZC5tYXRjaChtW3FdKSkmJnpbMF0ubGVuZ3RoPT1kLmxlbmd0aCl7Yz0hMDtcclxuYnJlYWsgYX1kPUNLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWwoZCk7MT09ZC5jaGlsZHJlbi5sZW5ndGgmJihoPWQuY2hpbGRyZW5bMF0pLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmdShwLGgsYyxmKTtjPSFjLmxlbmd0aH1jfHxlLnB1c2goYSl9fSxudWxsLCEwKTtlLmxlbmd0aCYmKGc9ITApO3ZhciBxO2E9W107ZD1NW2R8fCh0aGlzLmVkaXRvcj90aGlzLmVkaXRvci5lbnRlck1vZGU6Q0tFRElUT1IuRU5URVJfUCldO2Zvcih2YXIgejtjPWUucG9wKCk7KWMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2goYyxkLGEpOmMucmVtb3ZlKCk7Zm9yKDtxPWEucG9wKCk7KWlmKGM9cS5lbCxjLnBhcmVudClzd2l0Y2goej1IW2MucGFyZW50Lm5hbWVdfHxILnNwYW4scS5jaGVjayl7Y2FzZSBcIml0XCI6SC4kcmVtb3ZlRW1wdHlbYy5uYW1lXSYmIWMuY2hpbGRyZW4ubGVuZ3RoP2goYyxkLGEpOnkoYyl8fGgoYyxkLGEpO2JyZWFrO2Nhc2UgXCJlbC11cFwiOmMucGFyZW50LnR5cGU9PVxyXG5DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UfHx6W2MubmFtZV18fGgoYyxkLGEpO2JyZWFrO2Nhc2UgXCJwYXJlbnQtZG93blwiOmMucGFyZW50LnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlR8fHpbYy5uYW1lXXx8aChjLnBhcmVudCxkLGEpfXJldHVybiBnfSxjaGVja0ZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXNhYmxlZHx8IWEpcmV0dXJuITA7YS50b0ZlYXR1cmUmJihhPWEudG9GZWF0dXJlKHRoaXMuZWRpdG9yKSk7cmV0dXJuIWEucmVxdWlyZWRDb250ZW50fHx0aGlzLmNoZWNrKGEucmVxdWlyZWRDb250ZW50KX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITB9LGRpc2FsbG93OmZ1bmN0aW9uKGIpe2lmKCFnKHRoaXMsYiwhMCkpcmV0dXJuITE7XCJzdHJpbmdcIj09dHlwZW9mIGImJihiPWYoYikpO2EodGhpcyxiLG51bGwsdGhpcy5kaXNhbGxvd2VkQ29udGVudCx0aGlzLl8uZGlzYWxsb3dlZFJ1bGVzKTtyZXR1cm4hMH0sXHJcbmFkZENvbnRlbnRGb3JtczpmdW5jdGlvbihhKXtpZighdGhpcy5kaXNhYmxlZCYmYSl7dmFyIGIsYyxkPVtdLGg7Zm9yKGI9MDtiPGEubGVuZ3RoJiYhaDsrK2IpYz1hW2JdLChcInN0cmluZ1wiPT10eXBlb2YgY3x8YyBpbnN0YW5jZW9mIENLRURJVE9SLnN0eWxlKSYmdGhpcy5jaGVjayhjKSYmKGg9Yyk7aWYoaCl7Zm9yKGI9MDtiPGEubGVuZ3RoOysrYilkLnB1c2goQyhhW2JdLGgpKTt0aGlzLmFkZFRyYW5zZm9ybWF0aW9ucyhkKX19fSxhZGRFbGVtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50Q2FsbGJhY2tzfHwodGhpcy5lbGVtZW50Q2FsbGJhY2tzPVtdKTt0aGlzLmVsZW1lbnRDYWxsYmFja3MucHVzaChhKX0sYWRkRmVhdHVyZTpmdW5jdGlvbihhKXtpZih0aGlzLmRpc2FibGVkfHwhYSlyZXR1cm4hMDthLnRvRmVhdHVyZSYmKGE9YS50b0ZlYXR1cmUodGhpcy5lZGl0b3IpKTt0aGlzLmFsbG93KGEuYWxsb3dlZENvbnRlbnQsYS5uYW1lKTt0aGlzLmFkZFRyYW5zZm9ybWF0aW9ucyhhLmNvbnRlbnRUcmFuc2Zvcm1hdGlvbnMpO1xyXG50aGlzLmFkZENvbnRlbnRGb3JtcyhhLmNvbnRlbnRGb3Jtcyk7cmV0dXJuIGEucmVxdWlyZWRDb250ZW50JiYodGhpcy5jdXN0b21Db25maWd8fHRoaXMuZGlzYWxsb3dlZENvbnRlbnQubGVuZ3RoKT90aGlzLmNoZWNrKGEucmVxdWlyZWRDb250ZW50KTohMH0sYWRkVHJhbnNmb3JtYXRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIXRoaXMuZGlzYWJsZWQmJmEpe3ZhciBkPXRoaXMuXy50cmFuc2Zvcm1hdGlvbnMsaDtmb3IoaD0wO2g8YS5sZW5ndGg7KytoKXtiPWFbaF07dmFyIHA9dm9pZCAwLGU9dm9pZCAwLG09dm9pZCAwLGc9dm9pZCAwLHE9dm9pZCAwLGY9dm9pZCAwO2M9W107Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSltPWJbZV0sXCJzdHJpbmdcIj09dHlwZW9mIG0/KG09bS5zcGxpdCgvXFxzKjpcXHMqLyksZz1tWzBdLHE9bnVsbCxmPW1bMV0pOihnPW0uY2hlY2sscT1tLmxlZnQsZj1tLnJpZ2h0KSxwfHwocD1tLHA9cC5lbGVtZW50P3AuZWxlbWVudDpnP2cubWF0Y2goL14oW2EtejAtOV0rKS9pKVswXTpcclxucC5sZWZ0LmdldERlZmluaXRpb24oKS5lbGVtZW50KSxxIGluc3RhbmNlb2YgQ0tFRElUT1Iuc3R5bGUmJihxPXIocSkpLGMucHVzaCh7Y2hlY2s6Zz09cD9udWxsOmcsbGVmdDpxLHJpZ2h0Olwic3RyaW5nXCI9PXR5cGVvZiBmP0coZik6Zn0pO2I9cDtkW2JdfHwoZFtiXT1bXSk7ZFtiXS5wdXNoKGMpfX19LGNoZWNrOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmRpc2FibGVkKXJldHVybiEwO2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aDtkLS07KWlmKHRoaXMuY2hlY2soYVtkXSxiLGMpKXJldHVybiEwO3JldHVybiExfXZhciBoLGU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2U9YStcIlxceDNjXCIrKCExPT09Yj9cIjBcIjpcIjFcIikrKGM/XCIxXCI6XCIwXCIpK1wiXFx4M2VcIjtpZihlIGluIHRoaXMuXy5jYWNoZWRDaGVja3MpcmV0dXJuIHRoaXMuXy5jYWNoZWRDaGVja3NbZV07ZD1mKGEpLiQxO2g9ZC5zdHlsZXM7dmFyIG09ZC5jbGFzc2VzO2QubmFtZT1kLmVsZW1lbnRzO1xyXG5kLmNsYXNzZXM9bT1tP20uc3BsaXQoL1xccyosXFxzKi8pOltdO2Quc3R5bGVzPXcoaCk7ZC5hdHRyaWJ1dGVzPXcoZC5hdHRyaWJ1dGVzKTtkLmNoaWxkcmVuPVtdO20ubGVuZ3RoJiYoZC5hdHRyaWJ1dGVzW1wiY2xhc3NcIl09bS5qb2luKFwiIFwiKSk7aCYmKGQuYXR0cmlidXRlcy5zdHlsZT1DS0VESVRPUi50b29scy53cml0ZUNzc1RleHQoZC5zdHlsZXMpKTtoPWR9ZWxzZSBkPWEuZ2V0RGVmaW5pdGlvbigpLGg9ZC5zdHlsZXMsbT1kLmF0dHJpYnV0ZXN8fHt9LGg/KGg9SyhoKSxtLnN0eWxlPUNLRURJVE9SLnRvb2xzLndyaXRlQ3NzVGV4dChoLCEwKSk6aD17fSxoPXtuYW1lOmQuZWxlbWVudCxhdHRyaWJ1dGVzOm0sY2xhc3NlczptW1wiY2xhc3NcIl0/bVtcImNsYXNzXCJdLnNwbGl0KC9cXHMrLyk6W10sc3R5bGVzOmgsY2hpbGRyZW46W119O3ZhciBtPUNLRURJVE9SLnRvb2xzLmNsb25lKGgpLHI9W10sZztpZighMSE9PWImJihnPXRoaXMuXy50cmFuc2Zvcm1hdGlvbnNbaC5uYW1lXSkpe2ZvcihkPVxyXG4wO2Q8Zy5sZW5ndGg7KytkKXAodGhpcyxoLGdbZF0pO3EoaCl9dSh0aGlzLG0scix7ZG9GaWx0ZXI6ITAsZG9UcmFuc2Zvcm06ITEhPT1iLHNraXBSZXF1aXJlZDohYyxza2lwRmluYWxWYWxpZGF0aW9uOiFjfSk7Yj0wPHIubGVuZ3RoPyExOkNLRURJVE9SLnRvb2xzLm9iamVjdENvbXBhcmUoaC5hdHRyaWJ1dGVzLG0uYXR0cmlidXRlcywhMCk/ITA6ITE7XCJzdHJpbmdcIj09dHlwZW9mIGEmJih0aGlzLl8uY2FjaGVkQ2hlY2tzW2VdPWIpO3JldHVybiBifSxnZXRBbGxvd2VkRW50ZXJNb2RlOmZ1bmN0aW9uKCl7dmFyIGE9W1wicFwiLFwiZGl2XCIsXCJiclwiXSxiPXtwOkNLRURJVE9SLkVOVEVSX1AsZGl2OkNLRURJVE9SLkVOVEVSX0RJVixicjpDS0VESVRPUi5FTlRFUl9CUn07cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGg9YS5zbGljZSgpLHA7aWYodGhpcy5jaGVjayhNW2NdKSlyZXR1cm4gYztmb3IoZHx8KGg9aC5yZXZlcnNlKCkpO3A9aC5wb3AoKTspaWYodGhpcy5jaGVjayhwKSlyZXR1cm4gYltwXTtcclxucmV0dXJuIENLRURJVE9SLkVOVEVSX0JSfX0oKSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIENLRURJVE9SLmZpbHRlci5pbnN0YW5jZXNbdGhpcy5pZF07ZGVsZXRlIHRoaXMuXztkZWxldGUgdGhpcy5hbGxvd2VkQ29udGVudDtkZWxldGUgdGhpcy5kaXNhbGxvd2VkQ29udGVudH19O3ZhciBRPXtzdHlsZXM6MSxhdHRyaWJ1dGVzOjEsY2xhc3NlczoxfSx2PXtzdHlsZXM6XCJyZXF1aXJlZFN0eWxlc1wiLGF0dHJpYnV0ZXM6XCJyZXF1aXJlZEF0dHJpYnV0ZXNcIixjbGFzc2VzOlwicmVxdWlyZWRDbGFzc2VzXCJ9LEQ9L14oW2EtejAtOVxcLSpcXHNdKykoKD86XFxzKlxce1shXFx3XFwtLFxcc1xcKl0rXFx9XFxzKnxcXHMqXFxbWyFcXHdcXC0sXFxzXFwqXStcXF1cXHMqfFxccypcXChbIVxcd1xcLSxcXHNcXCpdK1xcKVxccyopezAsM30pKD86O1xccyp8JCkvaSxJPXtzdHlsZXM6L3soW159XSspfS8sYXR0cnM6L1xcWyhbXlxcXV0rKVxcXS8sY2xhc3NlczovXFwoKFteXFwpXSspXFwpL30sRT0vXmNrZToob2JqZWN0fGVtYmVkfHBhcmFtKSQvLFxyXG5MPS9eKG9iamVjdHxlbWJlZHxwYXJhbSkkLyxKPUNLRURJVE9SLmZpbHRlci50cmFuc2Zvcm1hdGlvbnNUb29scz17c2l6ZVRvU3R5bGU6ZnVuY3Rpb24oYSl7dGhpcy5sZW5ndGhUb1N0eWxlKGEsXCJ3aWR0aFwiKTt0aGlzLmxlbmd0aFRvU3R5bGUoYSxcImhlaWdodFwiKX0sc2l6ZVRvQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3RoaXMubGVuZ3RoVG9BdHRyaWJ1dGUoYSxcIndpZHRoXCIpO3RoaXMubGVuZ3RoVG9BdHRyaWJ1dGUoYSxcImhlaWdodFwiKX0sbGVuZ3RoVG9TdHlsZTpmdW5jdGlvbihhLGIsYyl7Yz1jfHxiO2lmKCEoYyBpbiBhLnN0eWxlcykpe3ZhciBkPWEuYXR0cmlidXRlc1tiXTtkJiYoL15cXGQrJC8udGVzdChkKSYmKGQrPVwicHhcIiksYS5zdHlsZXNbY109ZCl9ZGVsZXRlIGEuYXR0cmlidXRlc1tiXX0sbGVuZ3RoVG9BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YjtpZighKGMgaW4gYS5hdHRyaWJ1dGVzKSl7dmFyIGQ9YS5zdHlsZXNbYl0saD1kJiZkLm1hdGNoKC9eKFxcZCspKD86XFwuXFxkKik/cHgkLyk7XHJcbmg/YS5hdHRyaWJ1dGVzW2NdPWhbMV06XCJja2UtdGVzdFwiPT1kJiYoYS5hdHRyaWJ1dGVzW2NdPVwiY2tlLXRlc3RcIil9ZGVsZXRlIGEuc3R5bGVzW2JdfSxhbGlnbm1lbnRUb1N0eWxlOmZ1bmN0aW9uKGEpe2lmKCEoXCJmbG9hdFwiaW4gYS5zdHlsZXMpKXt2YXIgYj1hLmF0dHJpYnV0ZXMuYWxpZ247aWYoXCJsZWZ0XCI9PWJ8fFwicmlnaHRcIj09YilhLnN0eWxlc1tcImZsb2F0XCJdPWJ9ZGVsZXRlIGEuYXR0cmlidXRlcy5hbGlnbn0sYWxpZ25tZW50VG9BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7aWYoIShcImFsaWduXCJpbiBhLmF0dHJpYnV0ZXMpKXt2YXIgYj1hLnN0eWxlc1tcImZsb2F0XCJdO2lmKFwibGVmdFwiPT1ifHxcInJpZ2h0XCI9PWIpYS5hdHRyaWJ1dGVzLmFsaWduPWJ9ZGVsZXRlIGEuc3R5bGVzW1wiZmxvYXRcIl19LG1hdGNoZXNTdHlsZTptLHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWEubmFtZT1iO2Vsc2V7dmFyIGM9Yi5nZXREZWZpbml0aW9uKCksZD1jLnN0eWxlcyxcclxuaD1jLmF0dHJpYnV0ZXMscCxtLGUscjthLm5hbWU9Yy5lbGVtZW50O2ZvcihwIGluIGgpaWYoXCJjbGFzc1wiPT1wKWZvcihjPWEuY2xhc3Nlcy5qb2luKFwifFwiKSxlPWhbcF0uc3BsaXQoL1xccysvKTtyPWUucG9wKCk7KS0xPT1jLmluZGV4T2YocikmJmEuY2xhc3Nlcy5wdXNoKHIpO2Vsc2UgYS5hdHRyaWJ1dGVzW3BdPWhbcF07Zm9yKG0gaW4gZClhLnN0eWxlc1ttXT1kW21dfX19fSkoKTtcclxuKGZ1bmN0aW9uKCl7Q0tFRElUT1IuZm9jdXNNYW5hZ2VyPWZ1bmN0aW9uKGEpe2lmKGEuZm9jdXNNYW5hZ2VyKXJldHVybiBhLmZvY3VzTWFuYWdlcjt0aGlzLmhhc0ZvY3VzPSExO3RoaXMuY3VycmVudEFjdGl2ZT1udWxsO3RoaXMuXz17ZWRpdG9yOmF9O3JldHVybiB0aGlzfTtDS0VESVRPUi5mb2N1c01hbmFnZXIuXz17Ymx1ckRlbGF5OjIwMH07Q0tFRElUT1IuZm9jdXNNYW5hZ2VyLnByb3RvdHlwZT17Zm9jdXM6ZnVuY3Rpb24oYSl7dGhpcy5fLnRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy5fLnRpbWVyKTthJiYodGhpcy5jdXJyZW50QWN0aXZlPWEpO3RoaXMuaGFzRm9jdXN8fHRoaXMuXy5sb2NrZWR8fCgoYT1DS0VESVRPUi5jdXJyZW50SW5zdGFuY2UpJiZhLmZvY3VzTWFuYWdlci5ibHVyKDEpLHRoaXMuaGFzRm9jdXM9ITAsKGE9dGhpcy5fLmVkaXRvci5jb250YWluZXIpJiZhLmFkZENsYXNzKFwiY2tlX2ZvY3VzXCIpLHRoaXMuXy5lZGl0b3IuZmlyZShcImZvY3VzXCIpKX0sbG9jazpmdW5jdGlvbigpe3RoaXMuXy5sb2NrZWQ9XHJcbjF9LHVubG9jazpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl8ubG9ja2VkfSxibHVyOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoKXtpZih0aGlzLmhhc0ZvY3VzKXt0aGlzLmhhc0ZvY3VzPSExO3ZhciBhPXRoaXMuXy5lZGl0b3IuY29udGFpbmVyO2EmJmEucmVtb3ZlQ2xhc3MoXCJja2VfZm9jdXNcIik7dGhpcy5fLmVkaXRvci5maXJlKFwiYmx1clwiKX19aWYoIXRoaXMuXy5sb2NrZWQpe3RoaXMuXy50aW1lciYmY2xlYXJUaW1lb3V0KHRoaXMuXy50aW1lcik7dmFyIGI9Q0tFRElUT1IuZm9jdXNNYW5hZ2VyLl8uYmx1ckRlbGF5O2F8fCFiP2QuY2FsbCh0aGlzKTp0aGlzLl8udGltZXI9Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl8udGltZXI7ZC5jYWxsKHRoaXMpfSxiLHRoaXMpfX0sYWRkOmZ1bmN0aW9uKGEsZCl7dmFyIGI9YS5nZXRDdXN0b21EYXRhKFwiZm9jdXNtYW5hZ2VyXCIpO2lmKCFifHxiIT10aGlzKXtiJiZiLnJlbW92ZShhKTt2YXIgYj1cclxuXCJmb2N1c1wiLGM9XCJibHVyXCI7ZCYmKENLRURJVE9SLmVudi5pZT8oYj1cImZvY3VzaW5cIixjPVwiZm9jdXNvdXRcIik6Q0tFRElUT1IuZXZlbnQudXNlQ2FwdHVyZT0xKTt2YXIgZT17Ymx1cjpmdW5jdGlvbigpe2EuZXF1YWxzKHRoaXMuY3VycmVudEFjdGl2ZSkmJnRoaXMuYmx1cigpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZm9jdXMoYSl9fTthLm9uKGIsZS5mb2N1cyx0aGlzKTthLm9uKGMsZS5ibHVyLHRoaXMpO2QmJihDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPTApO2Euc2V0Q3VzdG9tRGF0YShcImZvY3VzbWFuYWdlclwiLHRoaXMpO2Euc2V0Q3VzdG9tRGF0YShcImZvY3VzbWFuYWdlcl9oYW5kbGVyc1wiLGUpfX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2EucmVtb3ZlQ3VzdG9tRGF0YShcImZvY3VzbWFuYWdlclwiKTt2YXIgZD1hLnJlbW92ZUN1c3RvbURhdGEoXCJmb2N1c21hbmFnZXJfaGFuZGxlcnNcIik7YS5yZW1vdmVMaXN0ZW5lcihcImJsdXJcIixkLmJsdXIpO2EucmVtb3ZlTGlzdGVuZXIoXCJmb2N1c1wiLFxyXG5kLmZvY3VzKX19fSkoKTtDS0VESVRPUi5rZXlzdHJva2VIYW5kbGVyPWZ1bmN0aW9uKGEpe2lmKGEua2V5c3Ryb2tlSGFuZGxlcilyZXR1cm4gYS5rZXlzdHJva2VIYW5kbGVyO3RoaXMua2V5c3Ryb2tlcz17fTt0aGlzLmJsb2NrZWRLZXlzdHJva2VzPXt9O3RoaXMuXz17ZWRpdG9yOmF9O3JldHVybiB0aGlzfTtcclxuKGZ1bmN0aW9uKCl7dmFyIGEsZD1mdW5jdGlvbihiKXtiPWIuZGF0YTt2YXIgZD1iLmdldEtleXN0cm9rZSgpLGc9dGhpcy5rZXlzdHJva2VzW2RdLGw9dGhpcy5fLmVkaXRvcjthPSExPT09bC5maXJlKFwia2V5XCIse2tleUNvZGU6ZCxkb21FdmVudDpifSk7YXx8KGcmJihhPSExIT09bC5leGVjQ29tbWFuZChnLHtmcm9tOlwia2V5c3Ryb2tlSGFuZGxlclwifSkpLGF8fChhPSEhdGhpcy5ibG9ja2VkS2V5c3Ryb2tlc1tkXSkpO2EmJmIucHJldmVudERlZmF1bHQoITApO3JldHVybiFhfSxiPWZ1bmN0aW9uKGIpe2EmJihhPSExLGIuZGF0YS5wcmV2ZW50RGVmYXVsdCghMCkpfTtDS0VESVRPUi5rZXlzdHJva2VIYW5kbGVyLnByb3RvdHlwZT17YXR0YWNoOmZ1bmN0aW9uKGEpe2Eub24oXCJrZXlkb3duXCIsZCx0aGlzKTtpZihDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMpYS5vbihcImtleXByZXNzXCIsYix0aGlzKX19fSkoKTtcclxuKGZ1bmN0aW9uKCl7Q0tFRElUT1IubGFuZz17bGFuZ3VhZ2VzOnthZjoxLGFyOjEsYmc6MSxibjoxLGJzOjEsY2E6MSxjczoxLGN5OjEsZGE6MSxkZToxLFwiZGUtY2hcIjoxLGVsOjEsXCJlbi1hdVwiOjEsXCJlbi1jYVwiOjEsXCJlbi1nYlwiOjEsZW46MSxlbzoxLGVzOjEsZXQ6MSxldToxLGZhOjEsZmk6MSxmbzoxLFwiZnItY2FcIjoxLGZyOjEsZ2w6MSxndToxLGhlOjEsaGk6MSxocjoxLGh1OjEsaWQ6MSxpczoxLGl0OjEsamE6MSxrYToxLGttOjEsa286MSxrdToxLGx0OjEsbHY6MSxtazoxLG1uOjEsbXM6MSxuYjoxLG5sOjEsbm86MSxwbDoxLFwicHQtYnJcIjoxLHB0OjEscm86MSxydToxLHNpOjEsc2s6MSxzbDoxLHNxOjEsXCJzci1sYXRuXCI6MSxzcjoxLHN2OjEsdGg6MSx0cjoxLHR0OjEsdWc6MSx1azoxLHZpOjEsXCJ6aC1jblwiOjEsemg6MX0scnRsOnthcjoxLGZhOjEsaGU6MSxrdToxLHVnOjF9LGxvYWQ6ZnVuY3Rpb24oYSxkLGIpe2EmJkNLRURJVE9SLmxhbmcubGFuZ3VhZ2VzW2FdfHwoYT1cclxudGhpcy5kZXRlY3QoZCxhKSk7dmFyIGM9dGhpcztkPWZ1bmN0aW9uKCl7Y1thXS5kaXI9Yy5ydGxbYV0/XCJydGxcIjpcImx0clwiO2IoYSxjW2FdKX07dGhpc1thXT9kKCk6Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoQ0tFRElUT1IuZ2V0VXJsKFwibGFuZy9cIithK1wiLmpzXCIpLGQsdGhpcyl9LGRldGVjdDpmdW5jdGlvbihhLGQpe3ZhciBiPXRoaXMubGFuZ3VhZ2VzO2Q9ZHx8bmF2aWdhdG9yLnVzZXJMYW5ndWFnZXx8bmF2aWdhdG9yLmxhbmd1YWdlfHxhO3ZhciBjPWQudG9Mb3dlckNhc2UoKS5tYXRjaCgvKFthLXpdKykoPzotKFthLXpdKykpPy8pLGU9Y1sxXSxjPWNbMl07YltlK1wiLVwiK2NdP2U9ZStcIi1cIitjOmJbZV18fChlPW51bGwpO0NLRURJVE9SLmxhbmcuZGV0ZWN0PWU/ZnVuY3Rpb24oKXtyZXR1cm4gZX06ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O3JldHVybiBlfHxhfX19KSgpO1xyXG5DS0VESVRPUi5zY3JpcHRMb2FkZXI9ZnVuY3Rpb24oKXt2YXIgYT17fSxkPXt9O3JldHVybntsb2FkOmZ1bmN0aW9uKGIsYyxlLGcpe3ZhciBsPVwic3RyaW5nXCI9PXR5cGVvZiBiO2wmJihiPVtiXSk7ZXx8KGU9Q0tFRElUT1IpO3ZhciBrPWIubGVuZ3RoLG49W10sdz1bXSxmPWZ1bmN0aW9uKGEpe2MmJihsP2MuY2FsbChlLGEpOmMuY2FsbChlLG4sdykpfTtpZigwPT09aylmKCEwKTtlbHNle3ZhciB4PWZ1bmN0aW9uKGEsYil7KGI/bjp3KS5wdXNoKGEpOzA+PS0tayYmKGcmJkNLRURJVE9SLmRvY3VtZW50LmdldERvY3VtZW50RWxlbWVudCgpLnJlbW92ZVN0eWxlKFwiY3Vyc29yXCIpLGYoYikpfSxBPWZ1bmN0aW9uKGIsYyl7YVtiXT0xO3ZhciBlPWRbYl07ZGVsZXRlIGRbYl07Zm9yKHZhciBnPTA7ZzxlLmxlbmd0aDtnKyspZVtnXShiLGMpfSx1PWZ1bmN0aW9uKGIpe2lmKGFbYl0peChiLCEwKTtlbHNle3ZhciBlPWRbYl18fChkW2JdPVtdKTtlLnB1c2goeCk7aWYoISgxPGUubGVuZ3RoKSl7dmFyIGc9XHJcbm5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNjcmlwdFwiKTtnLnNldEF0dHJpYnV0ZXMoe3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIixzcmM6Yn0pO2MmJihDS0VESVRPUi5lbnYuaWUmJjExPkNLRURJVE9SLmVudi52ZXJzaW9uP2cuJC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihcImxvYWRlZFwiPT1nLiQucmVhZHlTdGF0ZXx8XCJjb21wbGV0ZVwiPT1nLiQucmVhZHlTdGF0ZSlnLiQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsQShiLCEwKX06KGcuJC5vbmxvYWQ9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7QShiLCEwKX0sMCl9LGcuJC5vbmVycm9yPWZ1bmN0aW9uKCl7QShiLCExKX0pKTtnLmFwcGVuZFRvKENLRURJVE9SLmRvY3VtZW50LmdldEhlYWQoKSl9fX07ZyYmQ0tFRElUT1IuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCkuc2V0U3R5bGUoXCJjdXJzb3JcIixcIndhaXRcIik7Zm9yKHZhciBCPTA7QjxrO0IrKyl1KGJbQl0pfX0scXVldWU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGI7XHJcbihiPWNbMF0pJiZ0aGlzLmxvYWQoYi5zY3JpcHRVcmwsYi5jYWxsYmFjayxDS0VESVRPUiwwKX12YXIgYz1bXTtyZXR1cm4gZnVuY3Rpb24oZCxnKXt2YXIgbD10aGlzO2MucHVzaCh7c2NyaXB0VXJsOmQsY2FsbGJhY2s6ZnVuY3Rpb24oKXtnJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjLnNoaWZ0KCk7YS5jYWxsKGwpfX0pOzE9PWMubGVuZ3RoJiZhLmNhbGwodGhpcyl9fSgpfX0oKTtDS0VESVRPUi5yZXNvdXJjZU1hbmFnZXI9ZnVuY3Rpb24oYSxkKXt0aGlzLmJhc2VQYXRoPWE7dGhpcy5maWxlTmFtZT1kO3RoaXMucmVnaXN0ZXJlZD17fTt0aGlzLmxvYWRlZD17fTt0aGlzLmV4dGVybmFscz17fTt0aGlzLl89e3dhaXRpbmdMaXN0Ont9fX07XHJcbkNLRURJVE9SLnJlc291cmNlTWFuYWdlci5wcm90b3R5cGU9e2FkZDpmdW5jdGlvbihhLGQpe2lmKHRoaXMucmVnaXN0ZXJlZFthXSl0aHJvdyBFcnJvcignW0NLRURJVE9SLnJlc291cmNlTWFuYWdlci5hZGRdIFRoZSByZXNvdXJjZSBuYW1lIFwiJythKydcIiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQuJyk7dmFyIGI9dGhpcy5yZWdpc3RlcmVkW2FdPWR8fHt9O2IubmFtZT1hO2IucGF0aD10aGlzLmdldFBhdGgoYSk7Q0tFRElUT1IuZmlyZShhK0NLRURJVE9SLnRvb2xzLmNhcGl0YWxpemUodGhpcy5maWxlTmFtZSkrXCJSZWFkeVwiLGIpO3JldHVybiB0aGlzLmdldChhKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlZ2lzdGVyZWRbYV18fG51bGx9LGdldFBhdGg6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5leHRlcm5hbHNbYV07cmV0dXJuIENLRURJVE9SLmdldFVybChkJiZkLmRpcnx8dGhpcy5iYXNlUGF0aCthK1wiL1wiKX0sZ2V0RmlsZVBhdGg6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5leHRlcm5hbHNbYV07XHJcbnJldHVybiBDS0VESVRPUi5nZXRVcmwodGhpcy5nZXRQYXRoKGEpKyhkP2QuZmlsZTp0aGlzLmZpbGVOYW1lK1wiLmpzXCIpKX0sYWRkRXh0ZXJuYWw6ZnVuY3Rpb24oYSxkLGIpe2E9YS5zcGxpdChcIixcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBlPWFbY107Ynx8KGQ9ZC5yZXBsYWNlKC9bXlxcL10rJC8sZnVuY3Rpb24oYSl7Yj1hO3JldHVyblwiXCJ9KSk7dGhpcy5leHRlcm5hbHNbZV09e2RpcjpkLGZpbGU6Ynx8dGhpcy5maWxlTmFtZStcIi5qc1wifX19LGxvYWQ6ZnVuY3Rpb24oYSxkLGIpe0NLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSl8fChhPWE/W2FdOltdKTtmb3IodmFyIGM9dGhpcy5sb2FkZWQsZT10aGlzLnJlZ2lzdGVyZWQsZz1bXSxsPXt9LGs9e30sbj0wO248YS5sZW5ndGg7bisrKXt2YXIgdz1hW25dO2lmKHcpaWYoY1t3XXx8ZVt3XSlrW3ddPXRoaXMuZ2V0KHcpO2Vsc2V7dmFyIGY9dGhpcy5nZXRGaWxlUGF0aCh3KTtnLnB1c2goZik7ZiBpbiBsfHwobFtmXT1cclxuW10pO2xbZl0ucHVzaCh3KX19Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoZyxmdW5jdGlvbihhLGUpe2lmKGUubGVuZ3RoKXRocm93IEVycm9yKCdbQ0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyLmxvYWRdIFJlc291cmNlIG5hbWUgXCInK2xbZVswXV0uam9pbihcIixcIikrJ1wiIHdhcyBub3QgZm91bmQgYXQgXCInK2VbMF0rJ1wiLicpO2Zvcih2YXIgZz0wO2c8YS5sZW5ndGg7ZysrKWZvcih2YXIgZj1sW2FbZ11dLHE9MDtxPGYubGVuZ3RoO3ErKyl7dmFyIHk9ZltxXTtrW3ldPXRoaXMuZ2V0KHkpO2NbeV09MX1kLmNhbGwoYixrKX0sdGhpcyl9fTtDS0VESVRPUi5wbHVnaW5zPW5ldyBDS0VESVRPUi5yZXNvdXJjZU1hbmFnZXIoXCJwbHVnaW5zL1wiLFwicGx1Z2luXCIpO1xyXG5DS0VESVRPUi5wbHVnaW5zLmxvYWQ9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoQ0tFRElUT1IucGx1Z2lucy5sb2FkLGZ1bmN0aW9uKGEpe3ZhciBkPXt9O3JldHVybiBmdW5jdGlvbihiLGMsZSl7dmFyIGc9e30sbD1mdW5jdGlvbihiKXthLmNhbGwodGhpcyxiLGZ1bmN0aW9uKGEpe0NLRURJVE9SLnRvb2xzLmV4dGVuZChnLGEpO3ZhciBiPVtdLGY7Zm9yKGYgaW4gYSl7dmFyIGs9YVtmXSxBPWsmJmsucmVxdWlyZXM7aWYoIWRbZl0pe2lmKGsuaWNvbnMpZm9yKHZhciB1PWsuaWNvbnMuc3BsaXQoXCIsXCIpLEI9dS5sZW5ndGg7Qi0tOylDS0VESVRPUi5za2luLmFkZEljb24odVtCXSxrLnBhdGgrXCJpY29ucy9cIisoQ0tFRElUT1IuZW52LmhpZHBpJiZrLmhpZHBpP1wiaGlkcGkvXCI6XCJcIikrdVtCXStcIi5wbmdcIik7ZFtmXT0xfWlmKEEpZm9yKEEuc3BsaXQmJihBPUEuc3BsaXQoXCIsXCIpKSxrPTA7azxBLmxlbmd0aDtrKyspZ1tBW2tdXXx8Yi5wdXNoKEFba10pfWlmKGIubGVuZ3RoKWwuY2FsbCh0aGlzLFxyXG5iKTtlbHNle2ZvcihmIGluIGcpaz1nW2ZdLGsub25Mb2FkJiYhay5vbkxvYWQuX2NhbGxlZCYmKCExPT09ay5vbkxvYWQoKSYmZGVsZXRlIGdbZl0say5vbkxvYWQuX2NhbGxlZD0xKTtjJiZjLmNhbGwoZXx8d2luZG93LGcpfX0sdGhpcyl9O2wuY2FsbCh0aGlzLGIpfX0pO0NLRURJVE9SLnBsdWdpbnMuc2V0TGFuZz1mdW5jdGlvbihhLGQsYil7dmFyIGM9dGhpcy5nZXQoYSk7YT1jLmxhbmdFbnRyaWVzfHwoYy5sYW5nRW50cmllcz17fSk7Yz1jLmxhbmd8fChjLmxhbmc9W10pO2Muc3BsaXQmJihjPWMuc3BsaXQoXCIsXCIpKTstMT09Q0tFRElUT1IudG9vbHMuaW5kZXhPZihjLGQpJiZjLnB1c2goZCk7YVtkXT1ifTtDS0VESVRPUi51aT1mdW5jdGlvbihhKXtpZihhLnVpKXJldHVybiBhLnVpO3RoaXMuaXRlbXM9e307dGhpcy5pbnN0YW5jZXM9e307dGhpcy5lZGl0b3I9YTt0aGlzLl89e2hhbmRsZXJzOnt9fTtyZXR1cm4gdGhpc307XHJcbkNLRURJVE9SLnVpLnByb3RvdHlwZT17YWRkOmZ1bmN0aW9uKGEsZCxiKXtiLm5hbWU9YS50b0xvd2VyQ2FzZSgpO3ZhciBjPXRoaXMuaXRlbXNbYV09e3R5cGU6ZCxjb21tYW5kOmIuY29tbWFuZHx8bnVsbCxhcmdzOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKX07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGMsYil9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnN0YW5jZXNbYV19LGNyZWF0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLml0ZW1zW2FdLGI9ZCYmdGhpcy5fLmhhbmRsZXJzW2QudHlwZV0sYz1kJiZkLmNvbW1hbmQmJnRoaXMuZWRpdG9yLmdldENvbW1hbmQoZC5jb21tYW5kKSxiPWImJmIuY3JlYXRlLmFwcGx5KHRoaXMsZC5hcmdzKTt0aGlzLmluc3RhbmNlc1thXT1iO2MmJmMudWlJdGVtcy5wdXNoKGIpO2ImJiFiLnR5cGUmJihiLnR5cGU9ZC50eXBlKTtyZXR1cm4gYn0sYWRkSGFuZGxlcjpmdW5jdGlvbihhLGQpe3RoaXMuXy5oYW5kbGVyc1thXT1cclxuZH0sc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5zcGFjZUlkKGEpKX0sc3BhY2VJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lZGl0b3IuaWQrXCJfXCIrYX19O0NLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKENLRURJVE9SLnVpKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGUsZil7Q0tFRElUT1IuZXZlbnQuY2FsbCh0aGlzKTthPWEmJkNLRURJVE9SLnRvb2xzLmNsb25lKGEpO2lmKHZvaWQgMCE9PWUpe2lmKCEoZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50KSl0aHJvdyBFcnJvcihcIkV4cGVjdCBlbGVtZW50IG9mIHR5cGUgQ0tFRElUT1IuZG9tLmVsZW1lbnQuXCIpO2lmKCFmKXRocm93IEVycm9yKFwiT25lIG9mIHRoZSBlbGVtZW50IG1vZGVzIG11c3QgYmUgc3BlY2lmaWVkLlwiKTtpZihDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MmJmY9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUpdGhyb3cgRXJyb3IoXCJJbmxpbmUgZWxlbWVudCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgb24gSUUgcXVpcmtzLlwiKTtpZighYihlLGYpKXRocm93IEVycm9yKCdUaGUgc3BlY2lmaWVkIGVsZW1lbnQgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIG9uIGVsZW1lbnQ6IFwiJytlLmdldE5hbWUoKSsnXCIuJyk7XHJcbnRoaXMuZWxlbWVudD1lO3RoaXMuZWxlbWVudE1vZGU9Zjt0aGlzLm5hbWU9dGhpcy5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0FQUEVORFRPJiYoZS5nZXRJZCgpfHxlLmdldE5hbWVBdHQoKSl9ZWxzZSB0aGlzLmVsZW1lbnRNb2RlPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9OT05FO3RoaXMuXz17fTt0aGlzLmNvbW1hbmRzPXt9O3RoaXMudGVtcGxhdGVzPXt9O3RoaXMubmFtZT10aGlzLm5hbWV8fGQoKTt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMuc3RhdHVzPVwidW5sb2FkZWRcIjt0aGlzLmNvbmZpZz1DS0VESVRPUi50b29scy5wcm90b3R5cGVkQ29weShDS0VESVRPUi5jb25maWcpO3RoaXMudWk9bmV3IENLRURJVE9SLnVpKHRoaXMpO3RoaXMuZm9jdXNNYW5hZ2VyPW5ldyBDS0VESVRPUi5mb2N1c01hbmFnZXIodGhpcyk7dGhpcy5rZXlzdHJva2VIYW5kbGVyPW5ldyBDS0VESVRPUi5rZXlzdHJva2VIYW5kbGVyKHRoaXMpO3RoaXMub24oXCJyZWFkT25seVwiLFxyXG5jKTt0aGlzLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYSl7Zyh0aGlzLGEuZGF0YS5wYXRoKX0pO3RoaXMub24oXCJhY3RpdmVGaWx0ZXJDaGFuZ2VcIixmdW5jdGlvbigpe2codGhpcyx0aGlzLmVsZW1lbnRQYXRoKCksITApfSk7dGhpcy5vbihcIm1vZGVcIixjKTt0aGlzLm9uKFwiaW5zdGFuY2VSZWFkeVwiLGZ1bmN0aW9uKCl7dGhpcy5jb25maWcuc3RhcnR1cEZvY3VzJiZ0aGlzLmZvY3VzKCl9KTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VDcmVhdGVkXCIsbnVsbCx0aGlzKTtDS0VESVRPUi5hZGQodGhpcyk7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe1wiZGVzdHJveWVkXCIhPT10aGlzLnN0YXR1cz9rKHRoaXMsYSk6Q0tFRElUT1Iud2FybihcImVkaXRvci1pbmNvcnJlY3QtZGVzdHJveVwiKX0sMCx0aGlzKX1mdW5jdGlvbiBkKCl7ZG8gdmFyIGE9XCJlZGl0b3JcIisgKyt1O3doaWxlKENLRURJVE9SLmluc3RhbmNlc1thXSk7cmV0dXJuIGF9ZnVuY3Rpb24gYihhLFxyXG5iKXtyZXR1cm4gYj09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT9hLmlzKENLRURJVE9SLmR0ZC4kZWRpdGFibGUpfHxhLmlzKFwidGV4dGFyZWFcIik6Yj09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U/IWEuaXMoQ0tFRElUT1IuZHRkLiRub25Cb2R5Q29udGVudCk6MX1mdW5jdGlvbiBjKCl7dmFyIGE9dGhpcy5jb21tYW5kcyxiO2ZvcihiIGluIGEpZSh0aGlzLGFbYl0pfWZ1bmN0aW9uIGUoYSxiKXtiW2Iuc3RhcnREaXNhYmxlZD9cImRpc2FibGVcIjphLnJlYWRPbmx5JiYhYi5yZWFkT25seT9cImRpc2FibGVcIjpiLm1vZGVzW2EubW9kZV0/XCJlbmFibGVcIjpcImRpc2FibGVcIl0oKX1mdW5jdGlvbiBnKGEsYixjKXtpZihiKXt2YXIgZCxlLGg9YS5jb21tYW5kcztmb3IoZSBpbiBoKWQ9aFtlXSwoY3x8ZC5jb250ZXh0U2Vuc2l0aXZlKSYmZC5yZWZyZXNoKGEsYil9fWZ1bmN0aW9uIGwoYSl7dmFyIGI9YS5jb25maWcuY3VzdG9tQ29uZmlnO2lmKCFiKXJldHVybiExO3ZhciBiPVxyXG5DS0VESVRPUi5nZXRVcmwoYiksYz1CW2JdfHwoQltiXT17fSk7Yy5mbj8oYy5mbi5jYWxsKGEsYS5jb25maWcpLENLRURJVE9SLmdldFVybChhLmNvbmZpZy5jdXN0b21Db25maWcpIT1iJiZsKGEpfHxhLmZpcmVPbmNlKFwiY3VzdG9tQ29uZmlnTG9hZGVkXCIpKTpDS0VESVRPUi5zY3JpcHRMb2FkZXIucXVldWUoYixmdW5jdGlvbigpe2MuZm49Q0tFRElUT1IuZWRpdG9yQ29uZmlnP0NLRURJVE9SLmVkaXRvckNvbmZpZzpmdW5jdGlvbigpe307bChhKX0pO3JldHVybiEwfWZ1bmN0aW9uIGsoYSxiKXthLm9uKFwiY3VzdG9tQ29uZmlnTG9hZGVkXCIsZnVuY3Rpb24oKXtpZihiKXtpZihiLm9uKWZvcih2YXIgYyBpbiBiLm9uKWEub24oYyxiLm9uW2NdKTtDS0VESVRPUi50b29scy5leHRlbmQoYS5jb25maWcsYiwhMCk7ZGVsZXRlIGEuY29uZmlnLm9ufWM9YS5jb25maWc7YS5yZWFkT25seT1jLnJlYWRPbmx5PyEwOmEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/XHJcbmEuZWxlbWVudC5pcyhcInRleHRhcmVhXCIpP2EuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKXx8YS5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcInJlYWRvbmx5XCIpOmEuZWxlbWVudC5pc1JlYWRPbmx5KCk6YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U/YS5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfHxhLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwicmVhZG9ubHlcIik6ITE7YS5ibG9ja2xlc3M9YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT8hKGEuZWxlbWVudC5pcyhcInRleHRhcmVhXCIpfHxDS0VESVRPUi5kdGRbYS5lbGVtZW50LmdldE5hbWUoKV0ucCk6ITE7YS50YWJJbmRleD1jLnRhYkluZGV4fHxhLmVsZW1lbnQmJmEuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKXx8MDthLmFjdGl2ZUVudGVyTW9kZT1hLmVudGVyTW9kZT1hLmJsb2NrbGVzcz9DS0VESVRPUi5FTlRFUl9CUjpjLmVudGVyTW9kZTtcclxuYS5hY3RpdmVTaGlmdEVudGVyTW9kZT1hLnNoaWZ0RW50ZXJNb2RlPWEuYmxvY2tsZXNzP0NLRURJVE9SLkVOVEVSX0JSOmMuc2hpZnRFbnRlck1vZGU7Yy5za2luJiYoQ0tFRElUT1Iuc2tpbk5hbWU9Yy5za2luKTthLmZpcmVPbmNlKFwiY29uZmlnTG9hZGVkXCIpO2EuZGF0YVByb2Nlc3Nvcj1uZXcgQ0tFRElUT1IuaHRtbERhdGFQcm9jZXNzb3IoYSk7YS5maWx0ZXI9YS5hY3RpdmVGaWx0ZXI9bmV3IENLRURJVE9SLmZpbHRlcihhKTtuKGEpfSk7YiYmbnVsbCE9Yi5jdXN0b21Db25maWcmJihhLmNvbmZpZy5jdXN0b21Db25maWc9Yi5jdXN0b21Db25maWcpO2woYSl8fGEuZmlyZU9uY2UoXCJjdXN0b21Db25maWdMb2FkZWRcIil9ZnVuY3Rpb24gbihhKXtDS0VESVRPUi5za2luLmxvYWRQYXJ0KFwiZWRpdG9yXCIsZnVuY3Rpb24oKXt3KGEpfSl9ZnVuY3Rpb24gdyhhKXtDS0VESVRPUi5sYW5nLmxvYWQoYS5jb25maWcubGFuZ3VhZ2UsYS5jb25maWcuZGVmYXVsdExhbmd1YWdlLGZ1bmN0aW9uKGIsXHJcbmMpe3ZhciBkPWEuY29uZmlnLnRpdGxlO2EubGFuZ0NvZGU9YjthLmxhbmc9Q0tFRElUT1IudG9vbHMucHJvdG90eXBlZENvcHkoYyk7YS50aXRsZT1cInN0cmluZ1wiPT10eXBlb2YgZHx8ITE9PT1kP2Q6W2EubGFuZy5lZGl0b3IsYS5uYW1lXS5qb2luKFwiLCBcIik7YS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9ufHwoYS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/YS5lbGVtZW50LmdldERpcmVjdGlvbigxKTphLmxhbmcuZGlyKTthLmZpcmUoXCJsYW5nTG9hZGVkXCIpO2YoYSl9KX1mdW5jdGlvbiBmKGEpe2EuZ2V0U3R5bGVzU2V0KGZ1bmN0aW9uKGIpe2Eub25jZShcImxvYWRlZFwiLGZ1bmN0aW9uKCl7YS5maXJlKFwic3R5bGVzU2V0XCIse3N0eWxlczpifSl9LG51bGwsbnVsbCwxKTt4KGEpfSl9ZnVuY3Rpb24geChhKXt2YXIgYj1hLmNvbmZpZyxjPWIucGx1Z2lucyxkPWIuZXh0cmFQbHVnaW5zLGU9XHJcbmIucmVtb3ZlUGx1Z2lucztpZihkKXZhciBoPW5ldyBSZWdFeHAoXCIoPzpefCwpKD86XCIrZC5yZXBsYWNlKC9cXHMqLFxccyovZyxcInxcIikrXCIpKD9cXHgzZCx8JClcIixcImdcIiksYz1jLnJlcGxhY2UoaCxcIlwiKSxjPWMrKFwiLFwiK2QpO2lmKGUpdmFyIHA9bmV3IFJlZ0V4cChcIig/Ol58LCkoPzpcIitlLnJlcGxhY2UoL1xccyosXFxzKi9nLFwifFwiKStcIikoP1xceDNkLHwkKVwiLFwiZ1wiKSxjPWMucmVwbGFjZShwLFwiXCIpO0NLRURJVE9SLmVudi5haXImJihjKz1cIixhZG9iZWFpclwiKTtDS0VESVRPUi5wbHVnaW5zLmxvYWQoYy5zcGxpdChcIixcIiksZnVuY3Rpb24oYyl7dmFyIGQ9W10saD1bXSxlPVtdO2EucGx1Z2lucz1jO2Zvcih2YXIgZyBpbiBjKXt2YXIgZj1jW2ddLHo9Zi5sYW5nLGw9bnVsbCxrPWYucmVxdWlyZXMsdjtDS0VESVRPUi50b29scy5pc0FycmF5KGspJiYoaz1rLmpvaW4oXCIsXCIpKTtpZihrJiYodj1rLm1hdGNoKHApKSlmb3IoO2s9di5wb3AoKTspQ0tFRElUT1IuZXJyb3IoXCJlZGl0b3ItcGx1Z2luLXJlcXVpcmVkXCIsXHJcbntwbHVnaW46ay5yZXBsYWNlKFwiLFwiLFwiXCIpLHJlcXVpcmVkQnk6Z30pO3omJiFhLmxhbmdbZ10mJih6LnNwbGl0JiYoej16LnNwbGl0KFwiLFwiKSksMDw9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih6LGEubGFuZ0NvZGUpP2w9YS5sYW5nQ29kZToobD1hLmxhbmdDb2RlLnJlcGxhY2UoLy0uKi8sXCJcIiksbD1sIT1hLmxhbmdDb2RlJiYwPD1DS0VESVRPUi50b29scy5pbmRleE9mKHosbCk/bDowPD1DS0VESVRPUi50b29scy5pbmRleE9mKHosXCJlblwiKT9cImVuXCI6elswXSksZi5sYW5nRW50cmllcyYmZi5sYW5nRW50cmllc1tsXT8oYS5sYW5nW2ddPWYubGFuZ0VudHJpZXNbbF0sbD1udWxsKTplLnB1c2goQ0tFRElUT1IuZ2V0VXJsKGYucGF0aCtcImxhbmcvXCIrbCtcIi5qc1wiKSkpO2gucHVzaChsKTtkLnB1c2goZil9Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoZSxmdW5jdGlvbigpe2Zvcih2YXIgYz1bXCJiZWZvcmVJbml0XCIsXCJpbml0XCIsXCJhZnRlckluaXRcIl0sZT0wO2U8Yy5sZW5ndGg7ZSsrKWZvcih2YXIgcD1cclxuMDtwPGQubGVuZ3RoO3ArKyl7dmFyIG09ZFtwXTswPT09ZSYmaFtwXSYmbS5sYW5nJiZtLmxhbmdFbnRyaWVzJiYoYS5sYW5nW20ubmFtZV09bS5sYW5nRW50cmllc1toW3BdXSk7aWYobVtjW2VdXSltW2NbZV1dKGEpfWEuZmlyZU9uY2UoXCJwbHVnaW5zTG9hZGVkXCIpO2Iua2V5c3Ryb2tlcyYmYS5zZXRLZXlzdHJva2UoYS5jb25maWcua2V5c3Ryb2tlcyk7Zm9yKHA9MDtwPGEuY29uZmlnLmJsb2NrZWRLZXlzdHJva2VzLmxlbmd0aDtwKyspYS5rZXlzdHJva2VIYW5kbGVyLmJsb2NrZWRLZXlzdHJva2VzW2EuY29uZmlnLmJsb2NrZWRLZXlzdHJva2VzW3BdXT0xO2Euc3RhdHVzPVwibG9hZGVkXCI7YS5maXJlT25jZShcImxvYWRlZFwiKTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VMb2FkZWRcIixudWxsLGEpfSl9KX1mdW5jdGlvbiBBKCl7dmFyIGE9dGhpcy5lbGVtZW50O2lmKGEmJnRoaXMuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUTyl7dmFyIGI9dGhpcy5nZXREYXRhKCk7XHJcbnRoaXMuY29uZmlnLmh0bWxFbmNvZGVPdXRwdXQmJihiPUNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYikpO2EuaXMoXCJ0ZXh0YXJlYVwiKT9hLnNldFZhbHVlKGIpOmEuc2V0SHRtbChiKTtyZXR1cm4hMH1yZXR1cm4hMX1hLnByb3RvdHlwZT1DS0VESVRPUi5lZGl0b3IucHJvdG90eXBlO0NLRURJVE9SLmVkaXRvcj1hO3ZhciB1PTAsQj17fTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7YWRkQ29tbWFuZDpmdW5jdGlvbihhLGIpe2IubmFtZT1hLnRvTG93ZXJDYXNlKCk7dmFyIGM9bmV3IENLRURJVE9SLmNvbW1hbmQodGhpcyxiKTt0aGlzLm1vZGUmJmUodGhpcyxjKTtyZXR1cm4gdGhpcy5jb21tYW5kc1thXT1jfSxfYXR0YWNoVG9Gb3JtOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtjLnVwZGF0ZUVsZW1lbnQoKTtjLl8ucmVxdWlyZWQmJiFkLmdldFZhbHVlKCkmJiExPT09Yy5maXJlKFwicmVxdWlyZWRcIikmJmIuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfVxyXG5mdW5jdGlvbiBiKGEpe3JldHVybiEhKGEmJmEuY2FsbCYmYS5hcHBseSl9dmFyIGM9dGhpcyxkPWMuZWxlbWVudCxlPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChkLiQuZm9ybSk7ZC5pcyhcInRleHRhcmVhXCIpJiZlJiYoZS5vbihcInN1Ym1pdFwiLGEpLGIoZS4kLnN1Ym1pdCkmJihlLiQuc3VibWl0PUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGUuJC5zdWJtaXQsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7YSgpO2IuYXBwbHk/Yi5hcHBseSh0aGlzKTpiKCl9fSkpLGMub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtlLnJlbW92ZUxpc3RlbmVyKFwic3VibWl0XCIsYSl9KSl9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy5maXJlKFwiYmVmb3JlRGVzdHJveVwiKTshYSYmQS5jYWxsKHRoaXMpO3RoaXMuZWRpdGFibGUobnVsbCk7dGhpcy5maWx0ZXImJih0aGlzLmZpbHRlci5kZXN0cm95KCksZGVsZXRlIHRoaXMuZmlsdGVyKTtkZWxldGUgdGhpcy5hY3RpdmVGaWx0ZXI7dGhpcy5zdGF0dXM9XHJcblwiZGVzdHJveWVkXCI7dGhpcy5maXJlKFwiZGVzdHJveVwiKTt0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO0NLRURJVE9SLnJlbW92ZSh0aGlzKTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VEZXN0cm95ZWRcIixudWxsLHRoaXMpfSxlbGVtZW50UGF0aDpmdW5jdGlvbihhKXtpZighYSl7YT10aGlzLmdldFNlbGVjdGlvbigpO2lmKCFhKXJldHVybiBudWxsO2E9YS5nZXRTdGFydEVsZW1lbnQoKX1yZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGEsdGhpcy5lZGl0YWJsZSgpKTpudWxsfSxjcmVhdGVSYW5nZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWRpdGFibGUoKTtyZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGEpOm51bGx9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21tYW5kKGEpLGQ9e25hbWU6YSxjb21tYW5kRGF0YTpiLGNvbW1hbmQ6Y307cmV0dXJuIGMmJmMuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZcclxuITEhPT10aGlzLmZpcmUoXCJiZWZvcmVDb21tYW5kRXhlY1wiLGQpJiYoZC5yZXR1cm5WYWx1ZT1jLmV4ZWMoZC5jb21tYW5kRGF0YSksIWMuYXN5bmMmJiExIT09dGhpcy5maXJlKFwiYWZ0ZXJDb21tYW5kRXhlY1wiLGQpKT9kLnJldHVyblZhbHVlOiExfSxnZXRDb21tYW5kOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbW1hbmRzW2FdfSxnZXREYXRhOmZ1bmN0aW9uKGEpeyFhJiZ0aGlzLmZpcmUoXCJiZWZvcmVHZXREYXRhXCIpO3ZhciBiPXRoaXMuXy5kYXRhO1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYj0oYj10aGlzLmVsZW1lbnQpJiZ0aGlzLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRT9iLmlzKFwidGV4dGFyZWFcIik/Yi5nZXRWYWx1ZSgpOmIuZ2V0SHRtbCgpOlwiXCIpO2I9e2RhdGFWYWx1ZTpifTshYSYmdGhpcy5maXJlKFwiZ2V0RGF0YVwiLGIpO3JldHVybiBiLmRhdGFWYWx1ZX0sZ2V0U25hcHNob3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZpcmUoXCJnZXRTbmFwc2hvdFwiKTtcclxuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihhPShhPXRoaXMuZWxlbWVudCkmJnRoaXMuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFP2EuaXMoXCJ0ZXh0YXJlYVwiKT9hLmdldFZhbHVlKCk6YS5nZXRIdG1sKCk6XCJcIik7cmV0dXJuIGF9LGxvYWRTbmFwc2hvdDpmdW5jdGlvbihhKXt0aGlzLmZpcmUoXCJsb2FkU25hcHNob3RcIixhKX0sc2V0RGF0YTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITAsZT1iO2ImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoYz1iLmludGVybmFsLGU9Yi5jYWxsYmFjayxkPSFiLm5vU25hcHNob3QpOyFjJiZkJiZ0aGlzLmZpcmUoXCJzYXZlU25hcHNob3RcIik7aWYoZXx8IWMpdGhpcy5vbmNlKFwiZGF0YVJlYWR5XCIsZnVuY3Rpb24oYSl7IWMmJmQmJnRoaXMuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtlJiZlLmNhbGwoYS5lZGl0b3IpfSk7YT17ZGF0YVZhbHVlOmF9OyFjJiZ0aGlzLmZpcmUoXCJzZXREYXRhXCIsYSk7dGhpcy5fLmRhdGE9YS5kYXRhVmFsdWU7XHJcbiFjJiZ0aGlzLmZpcmUoXCJhZnRlclNldERhdGFcIixhKX0sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYSl7YT1udWxsPT1hfHxhO3RoaXMucmVhZE9ubHkhPWEmJih0aGlzLnJlYWRPbmx5PWEsdGhpcy5rZXlzdHJva2VIYW5kbGVyLmJsb2NrZWRLZXlzdHJva2VzWzhdPSthLHRoaXMuZWRpdGFibGUoKS5zZXRSZWFkT25seShhKSx0aGlzLmZpcmUoXCJyZWFkT25seVwiKSl9LGluc2VydEh0bWw6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZmlyZShcImluc2VydEh0bWxcIix7ZGF0YVZhbHVlOmEsbW9kZTpiLHJhbmdlOmN9KX0saW5zZXJ0VGV4dDpmdW5jdGlvbihhKXt0aGlzLmZpcmUoXCJpbnNlcnRUZXh0XCIsYSl9LGluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5maXJlKFwiaW5zZXJ0RWxlbWVudFwiLGEpfSxnZXRTZWxlY3RlZEh0bWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lZGl0YWJsZSgpLGM9dGhpcy5nZXRTZWxlY3Rpb24oKSxjPWMmJmMuZ2V0UmFuZ2VzKCk7aWYoIWJ8fCFjfHwwPT09Yy5sZW5ndGgpcmV0dXJuIG51bGw7XHJcbmZvcih2YXIgZD1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQsZSxoLHAsbT0wO208Yy5sZW5ndGg7bSsrKXt2YXIgZz1jW21dLHI9Zy5zdGFydENvbnRhaW5lcjtyLmdldE5hbWUmJlwidHJcIj09ci5nZXROYW1lKCk/KGV8fChlPXIuZ2V0QXNjZW5kYW50KFwidGFibGVcIikuY2xvbmUoKSxlLmFwcGVuZChyLmdldEFzY2VuZGFudChcInRib2R5XCIpLmNsb25lKCkpLGQuYXBwZW5kKGUpLGU9ZS5maW5kT25lKFwidGJvZHlcIikpLGgmJmguZXF1YWxzKHIpfHwoaD1yLHA9ci5jbG9uZSgpLGUuYXBwZW5kKHApKSxwLmFwcGVuZChnLmNsb25lQ29udGVudHMoKSkpOmQuYXBwZW5kKGcuY2xvbmVDb250ZW50cygpKX1iPWU/ZDpiLmdldEh0bWxGcm9tUmFuZ2UoY1swXSk7cmV0dXJuIGE/Yi5nZXRIdG1sKCk6Yn0sZXh0cmFjdFNlbGVjdGVkSHRtbDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWRpdGFibGUoKSxkPXRoaXMuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKCk7aWYoIWN8fDA9PT1cclxuZC5sZW5ndGgpcmV0dXJuIG51bGw7ZD1kWzBdO2M9Yy5leHRyYWN0SHRtbEZyb21SYW5nZShkLGIpO2J8fHRoaXMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKFtkXSk7cmV0dXJuIGE/Yy5nZXRIdG1sKCk6Y30sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJiZWZvcmVGb2N1c1wiKX0sY2hlY2tEaXJ0eTpmdW5jdGlvbigpe3JldHVyblwicmVhZHlcIj09dGhpcy5zdGF0dXMmJnRoaXMuXy5wcmV2aW91c1ZhbHVlIT09dGhpcy5nZXRTbmFwc2hvdCgpfSxyZXNldERpcnR5OmZ1bmN0aW9uKCl7dGhpcy5fLnByZXZpb3VzVmFsdWU9dGhpcy5nZXRTbmFwc2hvdCgpfSx1cGRhdGVFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIEEuY2FsbCh0aGlzKX0sc2V0S2V5c3Ryb2tlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMua2V5c3Ryb2tlSGFuZGxlci5rZXlzdHJva2VzLGI9Q0tFRElUT1IudG9vbHMuaXNBcnJheShhcmd1bWVudHNbMF0pP2FyZ3VtZW50c1swXTpbW10uc2xpY2UuY2FsbChhcmd1bWVudHMsXHJcbjApXSxjLGQsZT1iLmxlbmd0aDtlLS07KWM9YltlXSxkPTAsQ0tFRElUT1IudG9vbHMuaXNBcnJheShjKSYmKGQ9Y1sxXSxjPWNbMF0pLGQ/YVtjXT1kOmRlbGV0ZSBhW2NdfSxhZGRGZWF0dXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpbHRlci5hZGRGZWF0dXJlKGEpfSxzZXRBY3RpdmVGaWx0ZXI6ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5maWx0ZXIpO3RoaXMuYWN0aXZlRmlsdGVyIT09YSYmKHRoaXMuYWN0aXZlRmlsdGVyPWEsdGhpcy5maXJlKFwiYWN0aXZlRmlsdGVyQ2hhbmdlXCIpLGE9PT10aGlzLmZpbHRlcj90aGlzLnNldEFjdGl2ZUVudGVyTW9kZShudWxsLG51bGwpOnRoaXMuc2V0QWN0aXZlRW50ZXJNb2RlKGEuZ2V0QWxsb3dlZEVudGVyTW9kZSh0aGlzLmVudGVyTW9kZSksYS5nZXRBbGxvd2VkRW50ZXJNb2RlKHRoaXMuc2hpZnRFbnRlck1vZGUsITApKSl9LHNldEFjdGl2ZUVudGVyTW9kZTpmdW5jdGlvbihhLGIpe2E9YT90aGlzLmJsb2NrbGVzcz9DS0VESVRPUi5FTlRFUl9CUjpcclxuYTp0aGlzLmVudGVyTW9kZTtiPWI/dGhpcy5ibG9ja2xlc3M/Q0tFRElUT1IuRU5URVJfQlI6Yjp0aGlzLnNoaWZ0RW50ZXJNb2RlO2lmKHRoaXMuYWN0aXZlRW50ZXJNb2RlIT1hfHx0aGlzLmFjdGl2ZVNoaWZ0RW50ZXJNb2RlIT1iKXRoaXMuYWN0aXZlRW50ZXJNb2RlPWEsdGhpcy5hY3RpdmVTaGlmdEVudGVyTW9kZT1iLHRoaXMuZmlyZShcImFjdGl2ZUVudGVyTW9kZUNoYW5nZVwiKX0sc2hvd05vdGlmaWNhdGlvbjpmdW5jdGlvbihhKXthbGVydChhKX19KX0pKCk7Q0tFRElUT1IuRUxFTUVOVF9NT0RFX05PTkU9MDtDS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRT0xO0NLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUTz0yO0NLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU9MztDS0VESVRPUi5odG1sUGFyc2VyPWZ1bmN0aW9uKCl7dGhpcy5fPXtodG1sUGFydHNSZWdleDovPCg/Oig/OlxcLyhbXj5dKyk+KXwoPzohLS0oW1xcU3xcXHNdKj8pLS1cXHgzZSl8KD86KFteXFwvXFxzPl0rKSgoPzpcXHMrW1xcd1xcLTouXSsoPzpcXHMqPVxccyo/KD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8W15cXHNcIidcXC8+XSspKT8pKilbXFxTXFxzXSo/KFxcLz8pPikpL2d9fTtcclxuKGZ1bmN0aW9uKCl7dmFyIGE9LyhbXFx3XFwtOi5dKykoPzooPzpcXHMqPVxccyooPzooPzpcIihbXlwiXSopXCIpfCg/OicoW14nXSopJyl8KFteXFxzPl0rKSkpfCg/PVxcc3wkKSkvZyxkPXtjaGVja2VkOjEsY29tcGFjdDoxLGRlY2xhcmU6MSxkZWZlcjoxLGRpc2FibGVkOjEsaXNtYXA6MSxtdWx0aXBsZToxLG5vaHJlZjoxLG5vcmVzaXplOjEsbm9zaGFkZToxLG5vd3JhcDoxLHJlYWRvbmx5OjEsc2VsZWN0ZWQ6MX07Q0tFRElUT1IuaHRtbFBhcnNlci5wcm90b3R5cGU9e29uVGFnT3BlbjpmdW5jdGlvbigpe30sb25UYWdDbG9zZTpmdW5jdGlvbigpe30sb25UZXh0OmZ1bmN0aW9uKCl7fSxvbkNEQVRBOmZ1bmN0aW9uKCl7fSxvbkNvbW1lbnQ6ZnVuY3Rpb24oKXt9LHBhcnNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyxlLGc9MCxsO2M9dGhpcy5fLmh0bWxQYXJ0c1JlZ2V4LmV4ZWMoYik7KXtlPWMuaW5kZXg7aWYoZT5nKWlmKGc9Yi5zdWJzdHJpbmcoZyxlKSxsKWwucHVzaChnKTtlbHNlIHRoaXMub25UZXh0KGcpO1xyXG5nPXRoaXMuXy5odG1sUGFydHNSZWdleC5sYXN0SW5kZXg7aWYoZT1jWzFdKWlmKGU9ZS50b0xvd2VyQ2FzZSgpLGwmJkNLRURJVE9SLmR0ZC4kY2RhdGFbZV0mJih0aGlzLm9uQ0RBVEEobC5qb2luKFwiXCIpKSxsPW51bGwpLCFsKXt0aGlzLm9uVGFnQ2xvc2UoZSk7Y29udGludWV9aWYobClsLnB1c2goY1swXSk7ZWxzZSBpZihlPWNbM10pe2lmKGU9ZS50b0xvd2VyQ2FzZSgpLCEvPVwiLy50ZXN0KGUpKXt2YXIgaz17fSxuLHc9Y1s0XTtjPSEhY1s1XTtpZih3KWZvcig7bj1hLmV4ZWModyk7KXt2YXIgZj1uWzFdLnRvTG93ZXJDYXNlKCk7bj1uWzJdfHxuWzNdfHxuWzRdfHxcIlwiO2tbZl09IW4mJmRbZl0/ZjpDS0VESVRPUi50b29scy5odG1sRGVjb2RlQXR0cihuKX10aGlzLm9uVGFnT3BlbihlLGssYyk7IWwmJkNLRURJVE9SLmR0ZC4kY2RhdGFbZV0mJihsPVtdKX19ZWxzZSBpZihlPWNbMl0pdGhpcy5vbkNvbW1lbnQoZSl9aWYoYi5sZW5ndGg+Zyl0aGlzLm9uVGV4dChiLnN1YnN0cmluZyhnLFxyXG5iLmxlbmd0aCkpfX19KSgpO1xyXG5DS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKCl7dGhpcy5fPXtvdXRwdXQ6W119fSxwcm90bzp7b3BlblRhZzpmdW5jdGlvbihhKXt0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzY1wiLGEpfSxvcGVuVGFnQ2xvc2U6ZnVuY3Rpb24oYSxkKXtkP3RoaXMuXy5vdXRwdXQucHVzaChcIiAvXFx4M2VcIik6dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2VcIil9LGF0dHJpYnV0ZTpmdW5jdGlvbihhLGQpe1wic3RyaW5nXCI9PXR5cGVvZiBkJiYoZD1DS0VESVRPUi50b29scy5odG1sRW5jb2RlQXR0cihkKSk7dGhpcy5fLm91dHB1dC5wdXNoKFwiIFwiLGEsJ1xceDNkXCInLGQsJ1wiJyl9LGNsb3NlVGFnOmZ1bmN0aW9uKGEpe3RoaXMuXy5vdXRwdXQucHVzaChcIlxceDNjL1wiLGEsXCJcXHgzZVwiKX0sdGV4dDpmdW5jdGlvbihhKXt0aGlzLl8ub3V0cHV0LnB1c2goYSl9LGNvbW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2MhLS1cIixhLFxyXG5cIi0tXFx4M2VcIil9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMuXy5vdXRwdXQucHVzaChhKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl8ub3V0cHV0PVtdO3RoaXMuXy5pbmRlbnQ9ITF9LGdldEh0bWw6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5fLm91dHB1dC5qb2luKFwiXCIpO2EmJnRoaXMucmVzZXQoKTtyZXR1cm4gZH19fSk7XCJ1c2Ugc3RyaWN0XCI7XHJcbihmdW5jdGlvbigpe0NLRURJVE9SLmh0bWxQYXJzZXIubm9kZT1mdW5jdGlvbigpe307Q0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLnByb3RvdHlwZT17cmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJlbnQuY2hpbGRyZW4sZD1DS0VESVRPUi50b29scy5pbmRleE9mKGEsdGhpcyksYj10aGlzLnByZXZpb3VzLGM9dGhpcy5uZXh0O2ImJihiLm5leHQ9Yyk7YyYmKGMucHJldmlvdXM9Yik7YS5zcGxpY2UoZCwxKTt0aGlzLnBhcmVudD1udWxsfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLnBhcmVudC5jaGlsZHJlbixiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZCx0aGlzKSxjPWEucHJldmlvdXM9dGhpcy5wcmV2aW91cyxlPWEubmV4dD10aGlzLm5leHQ7YyYmKGMubmV4dD1hKTtlJiYoZS5wcmV2aW91cz1hKTtkW2JdPWE7YS5wYXJlbnQ9dGhpcy5wYXJlbnQ7dGhpcy5wYXJlbnQ9bnVsbH0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7dmFyIGQ9YS5wYXJlbnQuY2hpbGRyZW4sXHJcbmI9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihkLGEpLGM9YS5uZXh0O2Quc3BsaWNlKGIrMSwwLHRoaXMpO3RoaXMubmV4dD1hLm5leHQ7dGhpcy5wcmV2aW91cz1hO2EubmV4dD10aGlzO2MmJihjLnByZXZpb3VzPXRoaXMpO3RoaXMucGFyZW50PWEucGFyZW50fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dmFyIGQ9YS5wYXJlbnQuY2hpbGRyZW4sYj1DS0VESVRPUi50b29scy5pbmRleE9mKGQsYSk7ZC5zcGxpY2UoYiwwLHRoaXMpO3RoaXMubmV4dD1hOyh0aGlzLnByZXZpb3VzPWEucHJldmlvdXMpJiYoYS5wcmV2aW91cy5uZXh0PXRoaXMpO2EucHJldmlvdXM9dGhpczt0aGlzLnBhcmVudD1hLnBhcmVudH0sZ2V0QXNjZW5kYW50OmZ1bmN0aW9uKGEpe3ZhciBkPVwiZnVuY3Rpb25cIj09dHlwZW9mIGE/YTpcInN0cmluZ1wiPT10eXBlb2YgYT9mdW5jdGlvbihiKXtyZXR1cm4gYi5uYW1lPT1hfTpmdW5jdGlvbihiKXtyZXR1cm4gYi5uYW1lIGluIGF9LGI9dGhpcy5wYXJlbnQ7Zm9yKDtiJiZcclxuYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ7KXtpZihkKGIpKXJldHVybiBiO2I9Yi5wYXJlbnR9cmV0dXJuIG51bGx9LHdyYXBXaXRoOmZ1bmN0aW9uKGEpe3RoaXMucmVwbGFjZVdpdGgoYSk7YS5hZGQodGhpcyk7cmV0dXJuIGF9LGdldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIENLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5wYXJlbnQuY2hpbGRyZW4sdGhpcyl9LGdldEZpbHRlckNvbnRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGF8fHt9fX19KSgpO1widXNlIHN0cmljdFwiO0NLRURJVE9SLmh0bWxQYXJzZXIuY29tbWVudD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWE7dGhpcy5fPXtpc0Jsb2NrTGlrZTohMX19O1xyXG5DS0VESVRPUi5odG1sUGFyc2VyLmNvbW1lbnQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfQ09NTUVOVCxmaWx0ZXI6ZnVuY3Rpb24oYSxkKXt2YXIgYj10aGlzLnZhbHVlO2lmKCEoYj1hLm9uQ29tbWVudChkLGIsdGhpcykpKXJldHVybiB0aGlzLnJlbW92ZSgpLCExO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoKGIpLCExO3RoaXMudmFsdWU9YjtyZXR1cm4hMH0sd3JpdGVIdG1sOmZ1bmN0aW9uKGEsZCl7ZCYmdGhpcy5maWx0ZXIoZCk7YS5jb21tZW50KHRoaXMudmFsdWUpfX0pO1widXNlIHN0cmljdFwiO1xyXG4oZnVuY3Rpb24oKXtDS0VESVRPUi5odG1sUGFyc2VyLnRleHQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hO3RoaXMuXz17aXNCbG9ja0xpa2U6ITF9fTtDS0VESVRPUi5odG1sUGFyc2VyLnRleHQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfVEVYVCxmaWx0ZXI6ZnVuY3Rpb24oYSxkKXtpZighKHRoaXMudmFsdWU9YS5vblRleHQoZCx0aGlzLnZhbHVlLHRoaXMpKSlyZXR1cm4gdGhpcy5yZW1vdmUoKSwhMX0sd3JpdGVIdG1sOmZ1bmN0aW9uKGEsZCl7ZCYmdGhpcy5maWx0ZXIoZCk7YS50ZXh0KHRoaXMudmFsdWUpfX0pfSkoKTtcInVzZSBzdHJpY3RcIjtcclxuKGZ1bmN0aW9uKCl7Q0tFRElUT1IuaHRtbFBhcnNlci5jZGF0YT1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWF9O0NLRURJVE9SLmh0bWxQYXJzZXIuY2RhdGEucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfVEVYVCxmaWx0ZXI6ZnVuY3Rpb24oKXt9LHdyaXRlSHRtbDpmdW5jdGlvbihhKXthLndyaXRlKHRoaXMudmFsdWUpfX0pfSkoKTtcInVzZSBzdHJpY3RcIjtDS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50PWZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnBhcmVudD1udWxsO3RoaXMuXz17aXNCbG9ja0xpa2U6ITAsaGFzSW5saW5lU3RhcnRlZDohMX19O1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1zdXJ2aXZlXCJdPyExOlwiYVwiPT1hLm5hbWUmJmEuYXR0cmlidXRlcy5ocmVmfHxDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W2EubmFtZV19dmFyIGQ9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt0YWJsZToxLHVsOjEsb2w6MSxkbDoxfSxDS0VESVRPUi5kdGQudGFibGUsQ0tFRElUT1IuZHRkLnVsLENLRURJVE9SLmR0ZC5vbCxDS0VESVRPUi5kdGQuZGwpLGI9e29sOjEsdWw6MX0sYz1DS0VESVRPUi50b29scy5leHRlbmQoe30se2h0bWw6MX0sQ0tFRElUT1IuZHRkLmh0bWwsQ0tFRElUT1IuZHRkLmJvZHksQ0tFRElUT1IuZHRkLmhlYWQse3N0eWxlOjEsc2NyaXB0OjF9KSxlPXt1bDpcImxpXCIsb2w6XCJsaVwiLGRsOlwiZGRcIix0YWJsZTpcInRib2R5XCIsdGJvZHk6XCJ0clwiLHRoZWFkOlwidHJcIix0Zm9vdDpcInRyXCIsdHI6XCJ0ZFwifTtDS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sPVxyXG5mdW5jdGlvbihnLGwsayl7ZnVuY3Rpb24gbihhKXt2YXIgYjtpZigwPHkubGVuZ3RoKWZvcih2YXIgYz0wO2M8eS5sZW5ndGg7YysrKXt2YXIgZD15W2NdLGg9ZC5uYW1lLGU9Q0tFRElUT1IuZHRkW2hdLGc9dC5uYW1lJiZDS0VESVRPUi5kdGRbdC5uYW1lXTtnJiYhZ1toXXx8YSYmZSYmIWVbYV0mJkNLRURJVE9SLmR0ZFthXT9oPT10Lm5hbWUmJih4KHQsdC5wYXJlbnQsMSksYy0tKTooYnx8KHcoKSxiPTEpLGQ9ZC5jbG9uZSgpLGQucGFyZW50PXQsdD1kLHkuc3BsaWNlKGMsMSksYy0tKX19ZnVuY3Rpb24gdygpe2Zvcig7Ri5sZW5ndGg7KXgoRi5zaGlmdCgpLHQpfWZ1bmN0aW9uIGYoYSl7aWYoYS5fLmlzQmxvY2tMaWtlJiZcInByZVwiIT1hLm5hbWUmJlwidGV4dGFyZWFcIiE9YS5uYW1lKXt2YXIgYj1hLmNoaWxkcmVuLmxlbmd0aCxjPWEuY2hpbGRyZW5bYi0xXSxkO2MmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoKGQ9Q0tFRElUT1IudG9vbHMucnRyaW0oYy52YWx1ZSkpP1xyXG5jLnZhbHVlPWQ6YS5jaGlsZHJlbi5sZW5ndGg9Yi0xKX19ZnVuY3Rpb24geChiLGMsZCl7Yz1jfHx0fHxxO3ZhciBlPXQ7dm9pZCAwPT09Yi5wcmV2aW91cyYmKEEoYyxiKSYmKHQ9YyxCLm9uVGFnT3BlbihrLHt9KSxiLnJldHVyblBvaW50PWM9dCksZihiKSxhKGIpJiYhYi5jaGlsZHJlbi5sZW5ndGh8fGMuYWRkKGIpLFwicHJlXCI9PWIubmFtZSYmKGg9ITEpLFwidGV4dGFyZWFcIj09Yi5uYW1lJiYoej0hMSkpO2IucmV0dXJuUG9pbnQ/KHQ9Yi5yZXR1cm5Qb2ludCxkZWxldGUgYi5yZXR1cm5Qb2ludCk6dD1kP2M6ZX1mdW5jdGlvbiBBKGEsYil7aWYoKGE9PXF8fFwiYm9keVwiPT1hLm5hbWUpJiZrJiYoIWEubmFtZXx8Q0tFRElUT1IuZHRkW2EubmFtZV1ba10pKXt2YXIgYyxkO3JldHVybihjPWIuYXR0cmlidXRlcyYmKGQ9Yi5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGVcIl0pP2Q6Yi5uYW1lKSYmYyBpbiBDS0VESVRPUi5kdGQuJGlubGluZSYmIShjIGluIENLRURJVE9SLmR0ZC5oZWFkKSYmXHJcbiFiLmlzT3JwaGFufHxiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVH19ZnVuY3Rpb24gdShhLGIpe3JldHVybiBhIGluIENLRURJVE9SLmR0ZC4kbGlzdEl0ZW18fGEgaW4gQ0tFRElUT1IuZHRkLiR0YWJsZUNvbnRlbnQ/YT09Ynx8XCJkdFwiPT1hJiZcImRkXCI9PWJ8fFwiZGRcIj09YSYmXCJkdFwiPT1iOiExfXZhciBCPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLHE9bCBpbnN0YW5jZW9mIENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudD9sOlwic3RyaW5nXCI9PXR5cGVvZiBsP25ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQobCk6bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQseT1bXSxGPVtdLHQ9cSx6PVwidGV4dGFyZWFcIj09cS5uYW1lLGg9XCJwcmVcIj09cS5uYW1lO0Iub25UYWdPcGVuPWZ1bmN0aW9uKGUsbSxnLGYpe209bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChlLG0pO20uaXNVbmtub3duJiZnJiYobS5pc0VtcHR5PSEwKTttLmlzT3B0aW9uYWxDbG9zZT1mO1xyXG5pZihhKG0pKXkucHVzaChtKTtlbHNle2lmKFwicHJlXCI9PWUpaD0hMDtlbHNle2lmKFwiYnJcIj09ZSYmaCl7dC5hZGQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dChcIlxcblwiKSk7cmV0dXJufVwidGV4dGFyZWFcIj09ZSYmKHo9ITApfWlmKFwiYnJcIj09ZSlGLnB1c2gobSk7ZWxzZXtmb3IoOyEoZj0oZz10Lm5hbWUpP0NLRURJVE9SLmR0ZFtnXXx8KHQuXy5pc0Jsb2NrTGlrZT9DS0VESVRPUi5kdGQuZGl2OkNLRURJVE9SLmR0ZC5zcGFuKTpjLG0uaXNVbmtub3dufHx0LmlzVW5rbm93bnx8ZltlXSk7KWlmKHQuaXNPcHRpb25hbENsb3NlKUIub25UYWdDbG9zZShnKTtlbHNlIGlmKGUgaW4gYiYmZyBpbiBiKWc9dC5jaGlsZHJlbiwoZz1nW2cubGVuZ3RoLTFdKSYmXCJsaVwiPT1nLm5hbWV8fHgoZz1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KFwibGlcIiksdCksIW0ucmV0dXJuUG9pbnQmJihtLnJldHVyblBvaW50PXQpLHQ9ZztlbHNlIGlmKGUgaW4gQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSYmXHJcbiF1KGUsZykpQi5vblRhZ09wZW4oXCJsaVwiPT1lP1widWxcIjpcImRsXCIse30sMCwxKTtlbHNlIGlmKGcgaW4gZCYmIXUoZSxnKSkhbS5yZXR1cm5Qb2ludCYmKG0ucmV0dXJuUG9pbnQ9dCksdD10LnBhcmVudDtlbHNlIGlmKGcgaW4gQ0tFRElUT1IuZHRkLiRpbmxpbmUmJnkudW5zaGlmdCh0KSx0LnBhcmVudCl4KHQsdC5wYXJlbnQsMSk7ZWxzZXttLmlzT3JwaGFuPTE7YnJlYWt9bihlKTt3KCk7bS5wYXJlbnQ9dDttLmlzRW1wdHk/eChtKTp0PW19fX07Qi5vblRhZ0Nsb3NlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj15Lmxlbmd0aC0xOzA8PWI7Yi0tKWlmKGE9PXlbYl0ubmFtZSl7eS5zcGxpY2UoYiwxKTtyZXR1cm59Zm9yKHZhciBjPVtdLGQ9W10saD10O2ghPXEmJmgubmFtZSE9YTspaC5fLmlzQmxvY2tMaWtlfHxkLnVuc2hpZnQoaCksYy5wdXNoKGgpLGg9aC5yZXR1cm5Qb2ludHx8aC5wYXJlbnQ7aWYoaCE9cSl7Zm9yKGI9MDtiPGMubGVuZ3RoO2IrKyl7dmFyIGU9Y1tiXTt4KGUsZS5wYXJlbnQpfXQ9XHJcbmg7aC5fLmlzQmxvY2tMaWtlJiZ3KCk7eChoLGgucGFyZW50KTtoPT10JiYodD10LnBhcmVudCk7eT15LmNvbmNhdChkKX1cImJvZHlcIj09YSYmKGs9ITEpfTtCLm9uVGV4dD1mdW5jdGlvbihhKXtpZighKHQuXy5oYXNJbmxpbmVTdGFydGVkJiYhRi5sZW5ndGh8fGh8fHopJiYoYT1DS0VESVRPUi50b29scy5sdHJpbShhKSwwPT09YS5sZW5ndGgpKXJldHVybjt2YXIgYj10Lm5hbWUsZz1iP0NLRURJVE9SLmR0ZFtiXXx8KHQuXy5pc0Jsb2NrTGlrZT9DS0VESVRPUi5kdGQuZGl2OkNLRURJVE9SLmR0ZC5zcGFuKTpjO2lmKCF6JiYhZ1tcIiNcIl0mJmIgaW4gZClCLm9uVGFnT3BlbihlW2JdfHxcIlwiKSxCLm9uVGV4dChhKTtlbHNle3coKTtuKCk7aHx8enx8KGE9YS5yZXBsYWNlKC9bXFx0XFxyXFxuIF17Mix9fFtcXHRcXHJcXG5dL2csXCIgXCIpKTthPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQoYSk7aWYoQSh0LGEpKXRoaXMub25UYWdPcGVuKGsse30sMCwxKTt0LmFkZChhKX19O0Iub25DREFUQT1cclxuZnVuY3Rpb24oYSl7dC5hZGQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIuY2RhdGEoYSkpfTtCLm9uQ29tbWVudD1mdW5jdGlvbihhKXt3KCk7bigpO3QuYWRkKG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmNvbW1lbnQoYSkpfTtCLnBhcnNlKGcpO2Zvcih3KCk7dCE9cTspeCh0LHQucGFyZW50LDEpO2YocSk7cmV0dXJuIHF9O0NLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQucHJvdG90eXBlPXt0eXBlOkNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQsYWRkOmZ1bmN0aW9uKGEsYil7aXNOYU4oYikmJihiPXRoaXMuY2hpbGRyZW4ubGVuZ3RoKTt2YXIgYz0wPGI/dGhpcy5jaGlsZHJlbltiLTFdOm51bGw7aWYoYyl7aWYoYS5fLmlzQmxvY2tMaWtlJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGMudmFsdWU9Q0tFRElUT1IudG9vbHMucnRyaW0oYy52YWx1ZSksMD09PWMudmFsdWUubGVuZ3RoKSl7dGhpcy5jaGlsZHJlbi5wb3AoKTt0aGlzLmFkZChhKTtyZXR1cm59Yy5uZXh0PVxyXG5hfWEucHJldmlvdXM9YzthLnBhcmVudD10aGlzO3RoaXMuY2hpbGRyZW4uc3BsaWNlKGIsMCxhKTt0aGlzLl8uaGFzSW5saW5lU3RhcnRlZHx8KHRoaXMuXy5oYXNJbmxpbmVTdGFydGVkPWEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWEuXy5pc0Jsb2NrTGlrZSl9LGZpbHRlcjpmdW5jdGlvbihhLGIpe2I9dGhpcy5nZXRGaWx0ZXJDb250ZXh0KGIpO2Eub25Sb290KGIsdGhpcyk7dGhpcy5maWx0ZXJDaGlsZHJlbihhLCExLGIpfSxmaWx0ZXJDaGlsZHJlbjpmdW5jdGlvbihhLGIsYyl7aWYodGhpcy5jaGlsZHJlbkZpbHRlcmVkQnkhPWEuaWQpe2M9dGhpcy5nZXRGaWx0ZXJDb250ZXh0KGMpO2lmKGImJiF0aGlzLnBhcmVudClhLm9uUm9vdChjLHRoaXMpO3RoaXMuY2hpbGRyZW5GaWx0ZXJlZEJ5PWEuaWQ7Zm9yKGI9MDtiPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2IrKykhMT09PXRoaXMuY2hpbGRyZW5bYl0uZmlsdGVyKGEsXHJcbmMpJiZiLS19fSx3cml0ZUh0bWw6ZnVuY3Rpb24oYSxiKXtiJiZ0aGlzLmZpbHRlcihiKTt0aGlzLndyaXRlQ2hpbGRyZW5IdG1sKGEpfSx3cml0ZUNoaWxkcmVuSHRtbDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5nZXRGaWx0ZXJDb250ZXh0KCk7aWYoYyYmIXRoaXMucGFyZW50JiZiKWIub25Sb290KGQsdGhpcyk7YiYmdGhpcy5maWx0ZXJDaGlsZHJlbihiLCExLGQpO2I9MDtjPXRoaXMuY2hpbGRyZW47Zm9yKGQ9Yy5sZW5ndGg7YjxkO2IrKyljW2JdLndyaXRlSHRtbChhKX0sZm9yRWFjaDpmdW5jdGlvbihhLGIsYyl7aWYoIShjfHxiJiZ0aGlzLnR5cGUhPWIpKXZhciBkPWEodGhpcyk7aWYoITEhPT1kKXtjPXRoaXMuY2hpbGRyZW47Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspZD1jW2VdLGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2QuZm9yRWFjaChhLGIpOmImJmQudHlwZSE9Ynx8YShkKX19LGdldEZpbHRlckNvbnRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGF8fFxyXG57fX19fSkoKTtcInVzZSBzdHJpY3RcIjtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMucnVsZXM9W119ZnVuY3Rpb24gZChiLGMsZCxnKXt2YXIgbCxrO2ZvcihsIGluIGMpKGs9YltsXSl8fChrPWJbbF09bmV3IGEpLGsuYWRkKGNbbF0sZCxnKX1DS0VESVRPUi5odG1sUGFyc2VyLmZpbHRlcj1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihiKXt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKTt0aGlzLmVsZW1lbnROYW1lUnVsZXM9bmV3IGE7dGhpcy5hdHRyaWJ1dGVOYW1lUnVsZXM9bmV3IGE7dGhpcy5lbGVtZW50c1J1bGVzPXt9O3RoaXMuYXR0cmlidXRlc1J1bGVzPXt9O3RoaXMudGV4dFJ1bGVzPW5ldyBhO3RoaXMuY29tbWVudFJ1bGVzPW5ldyBhO3RoaXMucm9vdFJ1bGVzPW5ldyBhO2ImJnRoaXMuYWRkUnVsZXMoYiwxMCl9LHByb3RvOnthZGRSdWxlczpmdW5jdGlvbihhLGMpe3ZhciBlO1wibnVtYmVyXCI9PXR5cGVvZiBjP2U9YzpjJiZcInByaW9yaXR5XCJpbiBjJiYoZT1cclxuYy5wcmlvcml0eSk7XCJudW1iZXJcIiE9dHlwZW9mIGUmJihlPTEwKTtcIm9iamVjdFwiIT10eXBlb2YgYyYmKGM9e30pO2EuZWxlbWVudE5hbWVzJiZ0aGlzLmVsZW1lbnROYW1lUnVsZXMuYWRkTWFueShhLmVsZW1lbnROYW1lcyxlLGMpO2EuYXR0cmlidXRlTmFtZXMmJnRoaXMuYXR0cmlidXRlTmFtZVJ1bGVzLmFkZE1hbnkoYS5hdHRyaWJ1dGVOYW1lcyxlLGMpO2EuZWxlbWVudHMmJmQodGhpcy5lbGVtZW50c1J1bGVzLGEuZWxlbWVudHMsZSxjKTthLmF0dHJpYnV0ZXMmJmQodGhpcy5hdHRyaWJ1dGVzUnVsZXMsYS5hdHRyaWJ1dGVzLGUsYyk7YS50ZXh0JiZ0aGlzLnRleHRSdWxlcy5hZGQoYS50ZXh0LGUsYyk7YS5jb21tZW50JiZ0aGlzLmNvbW1lbnRSdWxlcy5hZGQoYS5jb21tZW50LGUsYyk7YS5yb290JiZ0aGlzLnJvb3RSdWxlcy5hZGQoYS5yb290LGUsYyl9LGFwcGx5VG86ZnVuY3Rpb24oYSl7YS5maWx0ZXIodGhpcyl9LG9uRWxlbWVudE5hbWU6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gdGhpcy5lbGVtZW50TmFtZVJ1bGVzLmV4ZWNPbk5hbWUoYSxcclxuYyl9LG9uQXR0cmlidXRlTmFtZTpmdW5jdGlvbihhLGMpe3JldHVybiB0aGlzLmF0dHJpYnV0ZU5hbWVSdWxlcy5leGVjT25OYW1lKGEsYyl9LG9uVGV4dDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMudGV4dFJ1bGVzLmV4ZWMoYSxjLGQpfSxvbkNvbW1lbnQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmNvbW1lbnRSdWxlcy5leGVjKGEsYyxkKX0sb25Sb290OmZ1bmN0aW9uKGEsYyl7cmV0dXJuIHRoaXMucm9vdFJ1bGVzLmV4ZWMoYSxjKX0sb25FbGVtZW50OmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPVt0aGlzLmVsZW1lbnRzUnVsZXNbXCJeXCJdLHRoaXMuZWxlbWVudHNSdWxlc1tjLm5hbWVdLHRoaXMuZWxlbWVudHNSdWxlcy4kXSxnLGw9MDszPmw7bCsrKWlmKGc9ZFtsXSl7Zz1nLmV4ZWMoYSxjLHRoaXMpO2lmKCExPT09ZylyZXR1cm4gbnVsbDtpZihnJiZnIT1jKXJldHVybiB0aGlzLm9uTm9kZShhLGcpO2lmKGMucGFyZW50JiYhYy5uYW1lKWJyZWFrfXJldHVybiBjfSxcclxub25Ob2RlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy50eXBlO3JldHVybiBkPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/dGhpcy5vbkVsZW1lbnQoYSxjKTpkPT1DS0VESVRPUi5OT0RFX1RFWFQ/bmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dCh0aGlzLm9uVGV4dChhLGMudmFsdWUpKTpkPT1DS0VESVRPUi5OT0RFX0NPTU1FTlQ/bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuY29tbWVudCh0aGlzLm9uQ29tbWVudChhLGMudmFsdWUpKTpudWxsfSxvbkF0dHJpYnV0ZTpmdW5jdGlvbihhLGMsZCxnKXtyZXR1cm4oZD10aGlzLmF0dHJpYnV0ZXNSdWxlc1tkXSk/ZC5leGVjKGEsZyxjLHRoaXMpOmd9fX0pO0NLRURJVE9SLmh0bWxQYXJzZXIuZmlsdGVyUnVsZXNHcm91cD1hO2EucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oYSxjLGQpe3RoaXMucnVsZXMuc3BsaWNlKHRoaXMuZmluZEluZGV4KGMpLDAse3ZhbHVlOmEscHJpb3JpdHk6YyxvcHRpb25zOmR9KX0sYWRkTWFueTpmdW5jdGlvbihhLFxyXG5jLGQpe2Zvcih2YXIgZz1bdGhpcy5maW5kSW5kZXgoYyksMF0sbD0wLGs9YS5sZW5ndGg7bDxrO2wrKylnLnB1c2goe3ZhbHVlOmFbbF0scHJpb3JpdHk6YyxvcHRpb25zOmR9KTt0aGlzLnJ1bGVzLnNwbGljZS5hcHBseSh0aGlzLnJ1bGVzLGcpfSxmaW5kSW5kZXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPXRoaXMucnVsZXMsZD1jLmxlbmd0aC0xOzA8PWQmJmE8Y1tkXS5wcmlvcml0eTspZC0tO3JldHVybiBkKzF9LGV4ZWM6ZnVuY3Rpb24oYSxjKXt2YXIgZD1jIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlfHxjIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudCxnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxsPXRoaXMucnVsZXMsaz1sLmxlbmd0aCxuLHcsZix4O2Zvcih4PTA7eDxrO3grKylpZihkJiYobj1jLnR5cGUsdz1jLm5hbWUpLGY9bFt4XSwhKGEubm9uRWRpdGFibGUmJiFmLm9wdGlvbnMuYXBwbHlUb0FsbHx8XHJcbmEubmVzdGVkRWRpdGFibGUmJmYub3B0aW9ucy5leGNsdWRlTmVzdGVkRWRpdGFibGUpKXtmPWYudmFsdWUuYXBwbHkobnVsbCxnKTtpZighMT09PWZ8fGQmJmYmJihmLm5hbWUhPXd8fGYudHlwZSE9bikpcmV0dXJuIGY7bnVsbCE9ZiYmKGdbMF09Yz1mKX1yZXR1cm4gY30sZXhlY09uTmFtZTpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZD0wLGc9dGhpcy5ydWxlcyxsPWcubGVuZ3RoLGs7YyYmZDxsO2QrKylrPWdbZF0sYS5ub25FZGl0YWJsZSYmIWsub3B0aW9ucy5hcHBseVRvQWxsfHxhLm5lc3RlZEVkaXRhYmxlJiZrLm9wdGlvbnMuZXhjbHVkZU5lc3RlZEVkaXRhYmxlfHwoYz1jLnJlcGxhY2Uoay52YWx1ZVswXSxrLnZhbHVlWzFdKSk7cmV0dXJuIGN9fX0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkKXtmdW5jdGlvbiBtKGEpe3JldHVybiBhfHxDS0VESVRPUi5lbnYubmVlZHNOYnNwRmlsbGVyP25ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQoXCLCoFwiKTpuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KFwiYnJcIix7XCJkYXRhLWNrZS1ib2d1c1wiOjF9KX1mdW5jdGlvbiBwKGEsZCl7cmV0dXJuIGZ1bmN0aW9uKGgpe2lmKGgudHlwZSE9Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCl7dmFyIGU9W10scD1iKGgpLHIsdjtpZihwKWZvcihmKHAsMSkmJmUucHVzaChwKTtwOylnKHApJiYocj1jKHApKSYmZihyKSYmKCh2PWMocikpJiYhZyh2KT9lLnB1c2gocik6KG0oeikuaW5zZXJ0QWZ0ZXIociksci5yZW1vdmUoKSkpLHA9cC5wcmV2aW91cztmb3IocD0wO3A8ZS5sZW5ndGg7cCsrKWVbcF0ucmVtb3ZlKCk7aWYoZT0hYXx8ITEhPT0oXCJmdW5jdGlvblwiPT10eXBlb2YgZD9kKGgpOmQpKXp8fENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyfHxcclxuaC50eXBlIT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UP3p8fENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyfHwhKDc8ZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHxoLm5hbWUgaW4gQ0tFRElUT1IuZHRkLnRyfHxoLm5hbWUgaW4gQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSk/KGU9YihoKSxlPSFlfHxcImZvcm1cIj09aC5uYW1lJiZcImlucHV0XCI9PWUubmFtZSk6ZT0hMTplPSExO2UmJmguYWRkKG0oYSkpfX19ZnVuY3Rpb24gZihhLGIpe2lmKCghenx8Q0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXIpJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJiclwiPT1hLm5hbWUmJiFhLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1lb2xcIl0pcmV0dXJuITA7dmFyIGM7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoYz1hLnZhbHVlLm1hdGNoKHkpKSYmKGMuaW5kZXgmJigobmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dChhLnZhbHVlLnN1YnN0cmluZygwLGMuaW5kZXgpKSkuaW5zZXJ0QmVmb3JlKGEpLFxyXG5hLnZhbHVlPWNbMF0pLCFDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmeiYmKCFifHxhLnBhcmVudC5uYW1lIGluIHYpfHwheiYmKChjPWEucHJldmlvdXMpJiZcImJyXCI9PWMubmFtZXx8IWN8fGcoYykpKT8hMDohMX12YXIgcj17ZWxlbWVudHM6e319LHo9XCJodG1sXCI9PWQsdj1DS0VESVRPUi50b29scy5leHRlbmQoe30saCksQztmb3IoQyBpbiB2KVwiI1wiaW4gdFtDXXx8ZGVsZXRlIHZbQ107Zm9yKEMgaW4gdilyLmVsZW1lbnRzW0NdPXAoeixhLmNvbmZpZy5maWxsRW1wdHlCbG9ja3MpO3Iucm9vdD1wKHosITEpO3IuZWxlbWVudHMuYnI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKGIucGFyZW50LnR5cGUhPUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpe3ZhciBkPWIuYXR0cmlidXRlcztpZihcImRhdGEtY2tlLWJvZ3VzXCJpbiBkfHxcImRhdGEtY2tlLWVvbFwiaW4gZClkZWxldGUgZFtcImRhdGEtY2tlLWJvZ3VzXCJdO2Vsc2V7Zm9yKGQ9Yi5uZXh0O2QmJmUoZCk7KWQ9XHJcbmQubmV4dDt2YXIgaD1jKGIpOyFkJiZnKGIucGFyZW50KT9sKGIucGFyZW50LG0oYSkpOmcoZCkmJmgmJiFnKGgpJiZtKGEpLmluc2VydEJlZm9yZShkKX19fX0oeik7cmV0dXJuIHJ9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBhIT1DS0VESVRPUi5FTlRFUl9CUiYmITEhPT1iP2E9PUNLRURJVE9SLkVOVEVSX0RJVj9cImRpdlwiOlwicFwiOiExfWZ1bmN0aW9uIGIoYSl7Zm9yKGE9YS5jaGlsZHJlblthLmNoaWxkcmVuLmxlbmd0aC0xXTthJiZlKGEpOylhPWEucHJldmlvdXM7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoYT1hLnByZXZpb3VzO2EmJmUoYSk7KWE9YS5wcmV2aW91cztyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmIUNLRURJVE9SLnRvb2xzLnRyaW0oYS52YWx1ZSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1ib29rbWFya1wiXX1mdW5jdGlvbiBnKGEpe3JldHVybiBhJiZcclxuKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLm5hbWUgaW4gaHx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UKX1mdW5jdGlvbiBsKGEsYil7dmFyIGM9YS5jaGlsZHJlblthLmNoaWxkcmVuLmxlbmd0aC0xXTthLmNoaWxkcmVuLnB1c2goYik7Yi5wYXJlbnQ9YTtjJiYoYy5uZXh0PWIsYi5wcmV2aW91cz1jKX1mdW5jdGlvbiBrKGEpe2E9YS5hdHRyaWJ1dGVzO1wiZmFsc2VcIiE9YS5jb250ZW50ZWRpdGFibGUmJihhW1wiZGF0YS1ja2UtZWRpdGFibGVcIl09YS5jb250ZW50ZWRpdGFibGU/XCJ0cnVlXCI6MSk7YS5jb250ZW50ZWRpdGFibGU9XCJmYWxzZVwifWZ1bmN0aW9uIG4oYSl7YT1hLmF0dHJpYnV0ZXM7c3dpdGNoKGFbXCJkYXRhLWNrZS1lZGl0YWJsZVwiXSl7Y2FzZSBcInRydWVcIjphLmNvbnRlbnRlZGl0YWJsZT1cInRydWVcIjticmVhaztjYXNlIFwiMVwiOmRlbGV0ZSBhLmNvbnRlbnRlZGl0YWJsZX19ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5yZXBsYWNlKEcsXHJcbmZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cIlxceDNjXCIrYitjLnJlcGxhY2UoSCxmdW5jdGlvbihhLGIpe3JldHVybiBLLnRlc3QoYikmJi0xPT1jLmluZGV4T2YoXCJkYXRhLWNrZS1zYXZlZC1cIitiKT9cIiBkYXRhLWNrZS1zYXZlZC1cIithK1wiIGRhdGEtY2tlLVwiK0NLRURJVE9SLnJuZCtcIi1cIithOmF9KStcIlxceDNlXCJ9KX1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixjKXswPT09YS5pbmRleE9mKFwiXFx4M2N0ZXh0YXJlYVwiKSYmKGE9Yit1KGMpLnJlcGxhY2UoLzwvZyxcIlxceDI2bHQ7XCIpLnJlcGxhY2UoLz4vZyxcIlxceDI2Z3Q7XCIpK1wiXFx4M2MvdGV4dGFyZWFcXHgzZVwiKTtyZXR1cm5cIlxceDNjY2tlOmVuY29kZWRcXHgzZVwiK2VuY29kZVVSSUNvbXBvbmVudChhKStcIlxceDNjL2NrZTplbmNvZGVkXFx4M2VcIn0pfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGEucmVwbGFjZShRLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX0pfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS0oPyF7Y2tlX3Byb3RlY3RlZH0pW1xcc1xcU10rPy0tXFx4M2UvZyxcclxuZnVuY3Rpb24oYSl7cmV0dXJuXCJcXHgzYyEtLVwiK0YrXCJ7Q31cIitlbmNvZGVVUklDb21wb25lbnQoYSkucmVwbGFjZSgvLS0vZyxcIiUyRCUyRFwiKStcIi0tXFx4M2VcIn0pfWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS1cXHtja2VfcHJvdGVjdGVkXFx9XFx7Q1xcfShbXFxzXFxTXSs/KS0tXFx4M2UvZyxmdW5jdGlvbihhLGIpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoYil9KX1mdW5jdGlvbiBCKGEsYil7dmFyIGM9Yi5fLmRhdGFTdG9yZTtyZXR1cm4gYS5yZXBsYWNlKC9cXHgzYyEtLVxce2NrZV9wcm90ZWN0ZWRcXH0oW1xcc1xcU10rPyktLVxceDNlL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfSkucmVwbGFjZSgvXFx7Y2tlX3Byb3RlY3RlZF8oXFxkKylcXH0vZyxmdW5jdGlvbihhLGIpe3JldHVybiBjJiZjW2JdfHxcIlwifSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjPVtdLGQ9Yi5jb25maWcucHJvdGVjdGVkU291cmNlLGg9Yi5fLmRhdGFTdG9yZXx8KGIuXy5kYXRhU3RvcmU9XHJcbntpZDoxfSksZT0vPFxcIS0tXFx7Y2tlX3RlbXAoY29tbWVudCk/XFx9KFxcZCo/KS0tXFx4M2UvZyxkPVsvPHNjcmlwdFtcXHNcXFNdKj8oPFxcL3NjcmlwdD58JCkvZ2ksLzxub3NjcmlwdFtcXHNcXFNdKj88XFwvbm9zY3JpcHQ+L2dpLC88bWV0YVtcXHNcXFNdKj9cXC8/Pi9naV0uY29uY2F0KGQpO2E9YS5yZXBsYWNlKC9cXHgzYyEtLVtcXHNcXFNdKj8tLVxceDNlL2csZnVuY3Rpb24oYSl7cmV0dXJuXCJcXHgzYyEtLXtja2VfdGVtcGNvbW1lbnR9XCIrKGMucHVzaChhKS0xKStcIi0tXFx4M2VcIn0pO2Zvcih2YXIgcD0wO3A8ZC5sZW5ndGg7cCsrKWE9YS5yZXBsYWNlKGRbcF0sZnVuY3Rpb24oYSl7YT1hLnJlcGxhY2UoZSxmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGNbZF19KTtyZXR1cm4vY2tlX3RlbXAoY29tbWVudCk/Ly50ZXN0KGEpP2E6XCJcXHgzYyEtLXtja2VfdGVtcH1cIisoYy5wdXNoKGEpLTEpK1wiLS1cXHgzZVwifSk7YT1hLnJlcGxhY2UoZSxmdW5jdGlvbihhLGIsZCl7cmV0dXJuXCJcXHgzYyEtLVwiK0YrKGI/XCJ7Q31cIjpcclxuXCJcIikrZW5jb2RlVVJJQ29tcG9uZW50KGNbZF0pLnJlcGxhY2UoLy0tL2csXCIlMkQlMkRcIikrXCItLVxceDNlXCJ9KTthPWEucmVwbGFjZSgvPFxcdysoPzpcXHMrKD86KD86W15cXHM9Pl0rXFxzKj1cXHMqKD86W14nXCJcXHM+XSt8J1teJ10qJ3xcIlteXCJdKlwiKSl8W15cXHM9XFwvPl0rKSkrXFxzKlxcLz8+L2csZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS1cXHtja2VfcHJvdGVjdGVkXFx9KFtePl0qKS0tXFx4M2UvZyxmdW5jdGlvbihhLGIpe2hbaC5pZF09ZGVjb2RlVVJJQ29tcG9uZW50KGIpO3JldHVyblwie2NrZV9wcm90ZWN0ZWRfXCIraC5pZCsrICtcIn1cIn0pfSk7cmV0dXJuIGE9YS5yZXBsYWNlKC88KHRpdGxlfGlmcmFtZXx0ZXh0YXJlYSkoW14+XSopPihbXFxzXFxTXSo/KTxcXC9cXDE+L2csZnVuY3Rpb24oYSxjLGQsaCl7cmV0dXJuXCJcXHgzY1wiK2MrZCtcIlxceDNlXCIrQih1KGgpLGIpK1wiXFx4M2MvXCIrYytcIlxceDNlXCJ9KX1DS0VESVRPUi5odG1sRGF0YVByb2Nlc3Nvcj1mdW5jdGlvbihiKXt2YXIgYyxcclxuaCxlPXRoaXM7dGhpcy5lZGl0b3I9Yjt0aGlzLmRhdGFGaWx0ZXI9Yz1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5maWx0ZXI7dGhpcy5odG1sRmlsdGVyPWg9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZmlsdGVyO3RoaXMud3JpdGVyPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO2MuYWRkUnVsZXMocCk7Yy5hZGRSdWxlcyhtLHthcHBseVRvQWxsOiEwfSk7Yy5hZGRSdWxlcyhhKGIsXCJkYXRhXCIpLHthcHBseVRvQWxsOiEwfSk7aC5hZGRSdWxlcyhDKTtoLmFkZFJ1bGVzKHIse2FwcGx5VG9BbGw6ITB9KTtoLmFkZFJ1bGVzKGEoYixcImh0bWxcIikse2FwcGx5VG9BbGw6ITB9KTtiLm9uKFwidG9IdG1sXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7dmFyIGM9YS5kYXRhVmFsdWUsaCxjPXEoYyxiKSxjPWYoYyxNKSxjPXcoYyksYz1mKGMsUiksYz1jLnJlcGxhY2UodixcIiQxY2tlOiQyXCIpLGM9Yy5yZXBsYWNlKEksXCJcXHgzY2NrZTokMSQyXFx4M2VcXHgzYy9ja2U6JDFcXHgzZVwiKSxcclxuYz1jLnJlcGxhY2UoLyg8cHJlXFxiW14+XSo+KShcXHJcXG58XFxuKS9nLFwiJDEkMiQyXCIpLGM9Yy5yZXBsYWNlKC8oW15hLXowLTk8XFwtXSkob25cXHd7Myx9KSg/IT4pL2dpLFwiJDFkYXRhLWNrZS1cIitDS0VESVRPUi5ybmQrXCItJDJcIik7aD1hLmNvbnRleHR8fGIuZWRpdGFibGUoKS5nZXROYW1lKCk7dmFyIGU7Q0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uJiZcInByZVwiPT1oJiYoaD1cImRpdlwiLGM9XCJcXHgzY3ByZVxceDNlXCIrYytcIlxceDNjL3ByZVxceDNlXCIsZT0xKTtoPWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChoKTtoLnNldEh0bWwoXCJhXCIrYyk7Yz1oLmdldEh0bWwoKS5zdWJzdHIoMSk7Yz1jLnJlcGxhY2UobmV3IFJlZ0V4cChcImRhdGEtY2tlLVwiK0NLRURJVE9SLnJuZCtcIi1cIixcImlnXCIpLFwiXCIpO2UmJihjPWMucmVwbGFjZSgvXjxwcmU+fDxcXC9wcmU+JC9naSxcIlwiKSk7Yz1jLnJlcGxhY2UoRCxcIiQxJDJcIik7Yz14KGMpO2M9dShjKTtoPSExPT09YS5maXhGb3JCb2R5PyExOlxyXG5kKGEuZW50ZXJNb2RlLGIuY29uZmlnLmF1dG9QYXJhZ3JhcGgpO2M9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChjLGEuY29udGV4dCxoKTtoJiYoZT1jLCFlLmNoaWxkcmVuLmxlbmd0aCYmQ0tFRElUT1IuZHRkW2UubmFtZV1baF0mJihoPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoaCksZS5hZGQoaCkpKTthLmRhdGFWYWx1ZT1jfSxudWxsLG51bGwsNSk7Yi5vbihcInRvSHRtbFwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5maWx0ZXIuYXBwbHlUbyhhLmRhdGEuZGF0YVZhbHVlLCEwLGEuZGF0YS5kb250RmlsdGVyLGEuZGF0YS5lbnRlck1vZGUpJiZiLmZpcmUoXCJkYXRhRmlsdGVyZWRcIil9LG51bGwsbnVsbCw2KTtiLm9uKFwidG9IdG1sXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRhdGFWYWx1ZS5maWx0ZXJDaGlsZHJlbihlLmRhdGFGaWx0ZXIsITApfSxudWxsLG51bGwsMTApO2Iub24oXCJ0b0h0bWxcIixmdW5jdGlvbihhKXthPWEuZGF0YTt2YXIgYj1hLmRhdGFWYWx1ZSxcclxuYz1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5iYXNpY1dyaXRlcjtiLndyaXRlQ2hpbGRyZW5IdG1sKGMpO2I9Yy5nZXRIdG1sKCEwKTthLmRhdGFWYWx1ZT1BKGIpfSxudWxsLG51bGwsMTUpO2Iub24oXCJ0b0RhdGFGb3JtYXRcIixmdW5jdGlvbihhKXt2YXIgYz1hLmRhdGEuZGF0YVZhbHVlO2EuZGF0YS5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoYz1jLnJlcGxhY2UoL148YnIgKlxcLz8+L2ksXCJcIikpO2EuZGF0YS5kYXRhVmFsdWU9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChjLGEuZGF0YS5jb250ZXh0LGQoYS5kYXRhLmVudGVyTW9kZSxiLmNvbmZpZy5hdXRvUGFyYWdyYXBoKSl9LG51bGwsbnVsbCw1KTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRhdGFWYWx1ZS5maWx0ZXJDaGlsZHJlbihlLmh0bWxGaWx0ZXIsITApfSxudWxsLG51bGwsMTApO2Iub24oXCJ0b0RhdGFGb3JtYXRcIixmdW5jdGlvbihhKXthLmRhdGEuZmlsdGVyLmFwcGx5VG8oYS5kYXRhLmRhdGFWYWx1ZSxcclxuITEsITApfSxudWxsLG51bGwsMTEpO2Iub24oXCJ0b0RhdGFGb3JtYXRcIixmdW5jdGlvbihhKXt2YXIgYz1hLmRhdGEuZGF0YVZhbHVlLGQ9ZS53cml0ZXI7ZC5yZXNldCgpO2Mud3JpdGVDaGlsZHJlbkh0bWwoZCk7Yz1kLmdldEh0bWwoITApO2M9dShjKTtjPUIoYyxiKTthLmRhdGEuZGF0YVZhbHVlPWN9LG51bGwsbnVsbCwxNSl9O0NLRURJVE9SLmh0bWxEYXRhUHJvY2Vzc29yLnByb3RvdHlwZT17dG9IdG1sOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBoPXRoaXMuZWRpdG9yLGUscCxtLGc7YiYmXCJvYmplY3RcIj09dHlwZW9mIGI/KGU9Yi5jb250ZXh0LGM9Yi5maXhGb3JCb2R5LGQ9Yi5kb250RmlsdGVyLHA9Yi5maWx0ZXIsbT1iLmVudGVyTW9kZSxnPWIucHJvdGVjdGVkV2hpdGVzcGFjZXMpOmU9YjtlfHxudWxsPT09ZXx8KGU9aC5lZGl0YWJsZSgpLmdldE5hbWUoKSk7cmV0dXJuIGguZmlyZShcInRvSHRtbFwiLHtkYXRhVmFsdWU6YSxjb250ZXh0OmUsZml4Rm9yQm9keTpjLGRvbnRGaWx0ZXI6ZCxcclxuZmlsdGVyOnB8fGguZmlsdGVyLGVudGVyTW9kZTptfHxoLmVudGVyTW9kZSxwcm90ZWN0ZWRXaGl0ZXNwYWNlczpnfSkuZGF0YVZhbHVlfSx0b0RhdGFGb3JtYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGg7YiYmKGM9Yi5jb250ZXh0LGQ9Yi5maWx0ZXIsaD1iLmVudGVyTW9kZSk7Y3x8bnVsbD09PWN8fChjPXRoaXMuZWRpdG9yLmVkaXRhYmxlKCkuZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5lZGl0b3IuZmlyZShcInRvRGF0YUZvcm1hdFwiLHtkYXRhVmFsdWU6YSxmaWx0ZXI6ZHx8dGhpcy5lZGl0b3IuZmlsdGVyLGNvbnRleHQ6YyxlbnRlck1vZGU6aHx8dGhpcy5lZGl0b3IuZW50ZXJNb2RlfSkuZGF0YVZhbHVlfX07dmFyIHk9Lyg/OiZuYnNwO3xcXHhhMCkkLyxGPVwie2NrZV9wcm90ZWN0ZWR9XCIsdD1DS0VESVRPUi5kdGQsej1cImNhcHRpb24gY29sZ3JvdXAgY29sIHRoZWFkIHRmb290IHRib2R5XCIuc3BsaXQoXCIgXCIpLGg9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHQuJGJsb2NrTGltaXQsXHJcbnQuJGJsb2NrKSxwPXtlbGVtZW50czp7aW5wdXQ6ayx0ZXh0YXJlYTprfX0sbT17YXR0cmlidXRlTmFtZXM6W1svXm9uLyxcImRhdGEtY2tlLXBhLW9uXCJdLFsvXmRhdGEtY2tlLWV4cGFuZG8kLyxcIlwiXV19LEM9e2VsZW1lbnRzOntlbWJlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudDtpZihiJiZcIm9iamVjdFwiPT1iLm5hbWUpe3ZhciBjPWIuYXR0cmlidXRlcy53aWR0aCxiPWIuYXR0cmlidXRlcy5oZWlnaHQ7YyYmKGEuYXR0cmlidXRlcy53aWR0aD1jKTtiJiYoYS5hdHRyaWJ1dGVzLmhlaWdodD1iKX19LGE6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRyaWJ1dGVzO2lmKCEoYS5jaGlsZHJlbi5sZW5ndGh8fGIubmFtZXx8Yi5pZHx8YS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXSkpcmV0dXJuITF9fX0scj17ZWxlbWVudE5hbWVzOltbL15ja2U6LyxcIlwiXSxbL15cXD94bWw6bmFtZXNwYWNlJC8sXCJcIl1dLGF0dHJpYnV0ZU5hbWVzOltbL15kYXRhLWNrZS0oc2F2ZWR8cGEpLS8sXHJcblwiXCJdLFsvXmRhdGEtY2tlLS4qLyxcIlwiXSxbXCJoaWRlZm9jdXNcIixcIlwiXV0sZWxlbWVudHM6eyQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRyaWJ1dGVzO2lmKGIpe2lmKGJbXCJkYXRhLWNrZS10ZW1wXCJdKXJldHVybiExO2Zvcih2YXIgYz1bXCJuYW1lXCIsXCJocmVmXCIsXCJzcmNcIl0sZCxoPTA7aDxjLmxlbmd0aDtoKyspZD1cImRhdGEtY2tlLXNhdmVkLVwiK2NbaF0sZCBpbiBiJiZkZWxldGUgYltjW2hdXX1yZXR1cm4gYX0sdGFibGU6ZnVuY3Rpb24oYSl7YS5jaGlsZHJlbi5zbGljZSgwKS5zb3J0KGZ1bmN0aW9uKGEsYil7dmFyIGMsZDthLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi50eXBlPT1hLnR5cGUmJihjPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoeixhLm5hbWUpLGQ9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih6LGIubmFtZSkpOy0xPGMmJi0xPGQmJmMhPWR8fChjPWEucGFyZW50P2EuZ2V0SW5kZXgoKTotMSxkPWIucGFyZW50P2IuZ2V0SW5kZXgoKTotMSk7cmV0dXJuIGM+ZD9cclxuMTotMX0pfSxwYXJhbTpmdW5jdGlvbihhKXthLmNoaWxkcmVuPVtdO2EuaXNFbXB0eT0hMDtyZXR1cm4gYX0sc3BhbjpmdW5jdGlvbihhKXtcIkFwcGxlLXN0eWxlLXNwYW5cIj09YS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl0mJmRlbGV0ZSBhLm5hbWV9LGh0bWw6ZnVuY3Rpb24oYSl7ZGVsZXRlIGEuYXR0cmlidXRlcy5jb250ZW50ZWRpdGFibGU7ZGVsZXRlIGEuYXR0cmlidXRlc1tcImNsYXNzXCJdfSxib2R5OmZ1bmN0aW9uKGEpe2RlbGV0ZSBhLmF0dHJpYnV0ZXMuc3BlbGxjaGVjaztkZWxldGUgYS5hdHRyaWJ1dGVzLmNvbnRlbnRlZGl0YWJsZX0sc3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGlsZHJlblswXTtiJiZiLnZhbHVlJiYoYi52YWx1ZT1DS0VESVRPUi50b29scy50cmltKGIudmFsdWUpKTthLmF0dHJpYnV0ZXMudHlwZXx8KGEuYXR0cmlidXRlcy50eXBlPVwidGV4dC9jc3NcIil9LHRpdGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hpbGRyZW5bMF07IWImJmwoYSxiPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQpO1xyXG5iLnZhbHVlPWEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXRpdGxlXCJdfHxcIlwifSxpbnB1dDpuLHRleHRhcmVhOm59LGF0dHJpYnV0ZXM6e1wiY2xhc3NcIjpmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMubHRyaW0oYS5yZXBsYWNlKC8oPzpefFxccyspY2tlX1teXFxzXSovZyxcIlwiKSl8fCExfX19O0NLRURJVE9SLmVudi5pZSYmKHIuYXR0cmlidXRlcy5zdHlsZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oXnw7KShbXlxcOl0rKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCl9KX0pO3ZhciBHPS88KGF8YXJlYXxpbWd8aW5wdXR8c291cmNlKVxcYihbXj5dKik+L2dpLEg9LyhbXFx3LTpdKylcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXwoPzpbXiBcIic+XSspKS9naSxLPS9eKGhyZWZ8c3JjfG5hbWUpJC9pLFI9Lyg/OjxzdHlsZSg/PVsgPl0pW14+XSo+W1xcc1xcU10qPzxcXC9zdHlsZT4pfCg/OjwoOj9saW5rfG1ldGF8YmFzZSlbXj5dKj4pL2dpLFxyXG5NPS8oPHRleHRhcmVhKD89WyA+XSlbXj5dKj4pKFtcXHNcXFNdKj8pKD86PFxcL3RleHRhcmVhPikvZ2ksUT0vPGNrZTplbmNvZGVkPihbXjxdKik8XFwvY2tlOmVuY29kZWQ+L2dpLHY9Lyg8XFwvPykoKD86b2JqZWN0fGVtYmVkfHBhcmFtfGh0bWx8Ym9keXxoZWFkfHRpdGxlKVtePl0qPikvZ2ksRD0vKDxcXC8/KWNrZTooKD86aHRtbHxib2R5fGhlYWR8dGl0bGUpW14+XSo+KS9naSxJPS88Y2tlOihwYXJhbXxlbWJlZCkoW14+XSo/KVxcLz8+KD8hXFxzKjxcXC9ja2U6XFwxKS9naX0pKCk7XCJ1c2Ugc3RyaWN0XCI7XHJcbkNLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudD1mdW5jdGlvbihhLGQpe3RoaXMubmFtZT1hO3RoaXMuYXR0cmlidXRlcz1kfHx7fTt0aGlzLmNoaWxkcmVuPVtdO3ZhciBiPWF8fFwiXCIsYz1iLm1hdGNoKC9eY2tlOiguKikvKTtjJiYoYj1jWzFdKTtiPSEhKENLRURJVE9SLmR0ZC4kbm9uQm9keUNvbnRlbnRbYl18fENLRURJVE9SLmR0ZC4kYmxvY2tbYl18fENLRURJVE9SLmR0ZC4kbGlzdEl0ZW1bYl18fENLRURJVE9SLmR0ZC4kdGFibGVDb250ZW50W2JdfHxDS0VESVRPUi5kdGQuJG5vbkVkaXRhYmxlW2JdfHxcImJyXCI9PWIpO3RoaXMuaXNFbXB0eT0hIUNLRURJVE9SLmR0ZC4kZW1wdHlbYV07dGhpcy5pc1Vua25vd249IUNLRURJVE9SLmR0ZFthXTt0aGlzLl89e2lzQmxvY2tMaWtlOmIsaGFzSW5saW5lU3RhcnRlZDp0aGlzLmlzRW1wdHl8fCFifX07XHJcbkNLRURJVE9SLmh0bWxQYXJzZXIuY3NzU3R5bGU9ZnVuY3Rpb24oYSl7dmFyIGQ9e307KChhIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50P2EuYXR0cmlidXRlcy5zdHlsZTphKXx8XCJcIikucmVwbGFjZSgvJnF1b3Q7L2csJ1wiJykucmVwbGFjZSgvXFxzKihbXiA6O10rKVxccyo6XFxzKihbXjtdKylcXHMqKD89O3wkKS9nLGZ1bmN0aW9uKGEsYyxlKXtcImZvbnQtZmFtaWx5XCI9PWMmJihlPWUucmVwbGFjZSgvW1wiJ10vZyxcIlwiKSk7ZFtjLnRvTG93ZXJDYXNlKCldPWV9KTtyZXR1cm57cnVsZXM6ZCxwb3B1bGF0ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnRvU3RyaW5nKCk7YyYmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZWxlbWVudD9hLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsYyk6YSBpbnN0YW5jZW9mIENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudD9hLmF0dHJpYnV0ZXMuc3R5bGU9YzphLnN0eWxlPWMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBhPVtdLGM7XHJcbmZvcihjIGluIGQpZFtjXSYmYS5wdXNoKGMsXCI6XCIsZFtjXSxcIjtcIik7cmV0dXJuIGEuam9pbihcIlwiKX19fTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoXCJzdHJpbmdcIj09dHlwZW9mIGE/Yi5uYW1lPT1hOmIubmFtZSBpbiBhKX19dmFyIGQ9ZnVuY3Rpb24oYSxiKXthPWFbMF07Yj1iWzBdO3JldHVybiBhPGI/LTE6YT5iPzE6MH0sYj1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LnByb3RvdHlwZTtDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfRUxFTUVOVCxhZGQ6Yi5hZGQsY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudCh0aGlzLm5hbWUsdGhpcy5hdHRyaWJ1dGVzKX0sZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxsLGs7Yj1kLmdldEZpbHRlckNvbnRleHQoYik7aWYoYi5vZmYpcmV0dXJuITA7XHJcbmlmKCFkLnBhcmVudClhLm9uUm9vdChiLGQpO2Zvcig7Oyl7bD1kLm5hbWU7aWYoIShrPWEub25FbGVtZW50TmFtZShiLGwpKSlyZXR1cm4gdGhpcy5yZW1vdmUoKSwhMTtkLm5hbWU9aztpZighKGQ9YS5vbkVsZW1lbnQoYixkKSkpcmV0dXJuIHRoaXMucmVtb3ZlKCksITE7aWYoZCE9PXRoaXMpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgoZCksITE7aWYoZC5uYW1lPT1sKWJyZWFrO2lmKGQudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoKGQpLCExO2lmKCFkLm5hbWUpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGhDaGlsZHJlbigpLCExfWw9ZC5hdHRyaWJ1dGVzO3ZhciBuLHc7Zm9yKG4gaW4gbCl7Zm9yKGs9bFtuXTs7KWlmKHc9YS5vbkF0dHJpYnV0ZU5hbWUoYixuKSlpZih3IT1uKWRlbGV0ZSBsW25dLG49dztlbHNlIGJyZWFrO2Vsc2V7ZGVsZXRlIGxbbl07YnJlYWt9dyYmKCExPT09KGs9YS5vbkF0dHJpYnV0ZShiLGQsdyxrKSk/ZGVsZXRlIGxbd106XHJcbmxbd109ayl9ZC5pc0VtcHR5fHx0aGlzLmZpbHRlckNoaWxkcmVuKGEsITEsYik7cmV0dXJuITB9LGZpbHRlckNoaWxkcmVuOmIuZmlsdGVyQ2hpbGRyZW4sd3JpdGVIdG1sOmZ1bmN0aW9uKGEsYil7YiYmdGhpcy5maWx0ZXIoYik7dmFyIGc9dGhpcy5uYW1lLGw9W10saz10aGlzLmF0dHJpYnV0ZXMsbix3O2Eub3BlblRhZyhnLGspO2ZvcihuIGluIGspbC5wdXNoKFtuLGtbbl1dKTthLnNvcnRBdHRyaWJ1dGVzJiZsLnNvcnQoZCk7bj0wO2Zvcih3PWwubGVuZ3RoO248dztuKyspaz1sW25dLGEuYXR0cmlidXRlKGtbMF0sa1sxXSk7YS5vcGVuVGFnQ2xvc2UoZyx0aGlzLmlzRW1wdHkpO3RoaXMud3JpdGVDaGlsZHJlbkh0bWwoYSk7dGhpcy5pc0VtcHR5fHxhLmNsb3NlVGFnKGcpfSx3cml0ZUNoaWxkcmVuSHRtbDpiLndyaXRlQ2hpbGRyZW5IdG1sLHJlcGxhY2VXaXRoQ2hpbGRyZW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5jaGlsZHJlbixiPWEubGVuZ3RoO2I7KWFbLS1iXS5pbnNlcnRBZnRlcih0aGlzKTtcclxudGhpcy5yZW1vdmUoKX0sZm9yRWFjaDpiLmZvckVhY2gsZ2V0Rmlyc3Q6ZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoP3RoaXMuY2hpbGRyZW5bMF06bnVsbDtcImZ1bmN0aW9uXCIhPXR5cGVvZiBiJiYoYj1hKGIpKTtmb3IodmFyIGQ9MCxnPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2Q8ZzsrK2QpaWYoYih0aGlzLmNoaWxkcmVuW2RdKSlyZXR1cm4gdGhpcy5jaGlsZHJlbltkXTtyZXR1cm4gbnVsbH0sZ2V0SHRtbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO3RoaXMud3JpdGVDaGlsZHJlbkh0bWwoYSk7cmV0dXJuIGEuZ2V0SHRtbCgpfSxzZXRIdG1sOmZ1bmN0aW9uKGEpe2E9dGhpcy5jaGlsZHJlbj1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sKGEpLmNoaWxkcmVuO2Zvcih2YXIgYj0wLGQ9YS5sZW5ndGg7YjxkOysrYilhW2JdLnBhcmVudD10aGlzfSxnZXRPdXRlckh0bWw6ZnVuY3Rpb24oKXt2YXIgYT1cclxubmV3IENLRURJVE9SLmh0bWxQYXJzZXIuYmFzaWNXcml0ZXI7dGhpcy53cml0ZUh0bWwoYSk7cmV0dXJuIGEuZ2V0SHRtbCgpfSxzcGxpdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbi5zcGxpY2UoYSx0aGlzLmNoaWxkcmVuLmxlbmd0aC1hKSxkPXRoaXMuY2xvbmUoKSxsPTA7bDxiLmxlbmd0aDsrK2wpYltsXS5wYXJlbnQ9ZDtkLmNoaWxkcmVuPWI7YlswXSYmKGJbMF0ucHJldmlvdXM9bnVsbCk7MDxhJiYodGhpcy5jaGlsZHJlblthLTFdLm5leHQ9bnVsbCk7dGhpcy5wYXJlbnQuYWRkKGQsdGhpcy5nZXRJbmRleCgpKzEpO3JldHVybiBkfSxhZGRDbGFzczpmdW5jdGlvbihhKXtpZighdGhpcy5oYXNDbGFzcyhhKSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl18fFwiXCI7dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl09YisoYj9cIiBcIjpcIlwiKSthfX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl07YiYmKChiPVxyXG5DS0VESVRPUi50b29scy50cmltKGIucmVwbGFjZShuZXcgUmVnRXhwKFwiKD86XFxcXHMrfF4pXCIrYStcIig/OlxcXFxzK3wkKVwiKSxcIiBcIikpKT90aGlzLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXT1iOmRlbGV0ZSB0aGlzLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXR0cmlidXRlc1tcImNsYXNzXCJdO3JldHVybiBiPyhuZXcgUmVnRXhwKFwiKD86XnxcXFxccylcIithK1wiKD9cXHgzZFxcXFxzfCQpXCIpKS50ZXN0KGIpOiExfSxnZXRGaWx0ZXJDb250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2F8fChhPXtvZmY6ITEsbm9uRWRpdGFibGU6ITEsbmVzdGVkRWRpdGFibGU6ITF9KTthLm9mZnx8XCJvZmZcIiE9dGhpcy5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtcHJvY2Vzc29yXCJdfHxiLnB1c2goXCJvZmZcIiwhMCk7YS5ub25FZGl0YWJsZXx8XCJmYWxzZVwiIT10aGlzLmF0dHJpYnV0ZXMuY29udGVudGVkaXRhYmxlP2Eubm9uRWRpdGFibGUmJiFhLm5lc3RlZEVkaXRhYmxlJiZcclxuXCJ0cnVlXCI9PXRoaXMuYXR0cmlidXRlcy5jb250ZW50ZWRpdGFibGUmJmIucHVzaChcIm5lc3RlZEVkaXRhYmxlXCIsITApOmIucHVzaChcIm5vbkVkaXRhYmxlXCIsITApO2lmKGIubGVuZ3RoKXthPUNLRURJVE9SLnRvb2xzLmNvcHkoYSk7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKz0yKWFbYltkXV09YltkKzFdfXJldHVybiBhfX0sITApfSkoKTtcclxuKGZ1bmN0aW9uKCl7dmFyIGE9e30sZD0veyhbXn1dKyl9L2csYj0vKFtcXFxcJ10pL2csYz0vXFxuL2csZT0vXFxyL2c7Q0tFRElUT1IudGVtcGxhdGU9ZnVuY3Rpb24oZyl7aWYoYVtnXSl0aGlzLm91dHB1dD1hW2ddO2Vsc2V7dmFyIGw9Zy5yZXBsYWNlKGIsXCJcXFxcJDFcIikucmVwbGFjZShjLFwiXFxcXG5cIikucmVwbGFjZShlLFwiXFxcXHJcIikucmVwbGFjZShkLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCInLGRhdGFbJ1wiK2IrXCInXVxceDNkXFx4M2R1bmRlZmluZWQ/J3tcIitiK1wifSc6ZGF0YVsnXCIrYitcIiddLCdcIn0pO3RoaXMub3V0cHV0PWFbZ109RnVuY3Rpb24oXCJkYXRhXCIsXCJidWZmZXJcIixcInJldHVybiBidWZmZXI/YnVmZmVyLnB1c2goJ1wiK2wrXCInKTpbJ1wiK2wrXCInXS5qb2luKCcnKTtcIil9fX0pKCk7ZGVsZXRlIENLRURJVE9SLmxvYWRGdWxsQ29yZTtDS0VESVRPUi5pbnN0YW5jZXM9e307Q0tFRElUT1IuZG9jdW1lbnQ9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudChkb2N1bWVudCk7XHJcbkNLRURJVE9SLmFkZD1mdW5jdGlvbihhKXtDS0VESVRPUi5pbnN0YW5jZXNbYS5uYW1lXT1hO2Eub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7Q0tFRElUT1IuY3VycmVudEluc3RhbmNlIT1hJiYoQ0tFRElUT1IuY3VycmVudEluc3RhbmNlPWEsQ0tFRElUT1IuZmlyZShcImN1cnJlbnRJbnN0YW5jZVwiKSl9KTthLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IuY3VycmVudEluc3RhbmNlPT1hJiYoQ0tFRElUT1IuY3VycmVudEluc3RhbmNlPW51bGwsQ0tFRElUT1IuZmlyZShcImN1cnJlbnRJbnN0YW5jZVwiKSl9KTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VcIixudWxsLGEpfTtDS0VESVRPUi5yZW1vdmU9ZnVuY3Rpb24oYSl7ZGVsZXRlIENLRURJVE9SLmluc3RhbmNlc1thLm5hbWVdfTtcclxuKGZ1bmN0aW9uKCl7dmFyIGE9e307Q0tFRElUT1IuYWRkVGVtcGxhdGU9ZnVuY3Rpb24oZCxiKXt2YXIgYz1hW2RdO2lmKGMpcmV0dXJuIGM7Yz17bmFtZTpkLHNvdXJjZTpifTtDS0VESVRPUi5maXJlKFwidGVtcGxhdGVcIixjKTtyZXR1cm4gYVtkXT1uZXcgQ0tFRElUT1IudGVtcGxhdGUoYy5zb3VyY2UpfTtDS0VESVRPUi5nZXRUZW1wbGF0ZT1mdW5jdGlvbihkKXtyZXR1cm4gYVtkXX19KSgpOyhmdW5jdGlvbigpe3ZhciBhPVtdO0NLRURJVE9SLmFkZENzcz1mdW5jdGlvbihkKXthLnB1c2goZCl9O0NLRURJVE9SLmdldENzcz1mdW5jdGlvbigpe3JldHVybiBhLmpvaW4oXCJcXG5cIil9fSkoKTtDS0VESVRPUi5vbihcImluc3RhbmNlRGVzdHJveWVkXCIsZnVuY3Rpb24oKXtDS0VESVRPUi50b29scy5pc0VtcHR5KHRoaXMuaW5zdGFuY2VzKSYmQ0tFRElUT1IuZmlyZShcInJlc2V0XCIpfSk7Q0tFRElUT1IuVFJJU1RBVEVfT049MTtDS0VESVRPUi5UUklTVEFURV9PRkY9MjtcclxuQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ9MDtcclxuKGZ1bmN0aW9uKCl7Q0tFRElUT1IuaW5saW5lPWZ1bmN0aW9uKGEsZCl7aWYoIUNLRURJVE9SLmVudi5pc0NvbXBhdGlibGUpcmV0dXJuIG51bGw7YT1DS0VESVRPUi5kb20uZWxlbWVudC5nZXQoYSk7aWYoYS5nZXRFZGl0b3IoKSl0aHJvdydUaGUgZWRpdG9yIGluc3RhbmNlIFwiJythLmdldEVkaXRvcigpLm5hbWUrJ1wiIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIHByb3ZpZGVkIGVsZW1lbnQuJzt2YXIgYj1uZXcgQ0tFRElUT1IuZWRpdG9yKGQsYSxDS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FKSxjPWEuaXMoXCJ0ZXh0YXJlYVwiKT9hOm51bGw7Yz8oYi5zZXREYXRhKGMuZ2V0VmFsdWUoKSxudWxsLCEwKSxhPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY2RpdiBjb250ZW50ZWRpdGFibGVcXHgzZFwiJyshIWIucmVhZE9ubHkrJ1wiIGNsYXNzXFx4M2RcImNrZV90ZXh0YXJlYV9pbmxpbmVcIlxceDNlJytjLmdldFZhbHVlKCkrXCJcXHgzYy9kaXZcXHgzZVwiLENLRURJVE9SLmRvY3VtZW50KSxcclxuYS5pbnNlcnRBZnRlcihjKSxjLmhpZGUoKSxjLiQuZm9ybSYmYi5fYXR0YWNoVG9Gb3JtKCkpOmIuc2V0RGF0YShhLmdldEh0bWwoKSxudWxsLCEwKTtiLm9uKFwibG9hZGVkXCIsZnVuY3Rpb24oKXtiLmZpcmUoXCJ1aVJlYWR5XCIpO2IuZWRpdGFibGUoYSk7Yi5jb250YWluZXI9YTtiLnVpLmNvbnRlbnRzRWxlbWVudD1hO2Iuc2V0RGF0YShiLmdldERhdGEoMSkpO2IucmVzZXREaXJ0eSgpO2IuZmlyZShcImNvbnRlbnREb21cIik7Yi5tb2RlPVwid3lzaXd5Z1wiO2IuZmlyZShcIm1vZGVcIik7Yi5zdGF0dXM9XCJyZWFkeVwiO2IuZmlyZU9uY2UoXCJpbnN0YW5jZVJlYWR5XCIpO0NLRURJVE9SLmZpcmUoXCJpbnN0YW5jZVJlYWR5XCIsbnVsbCxiKX0sbnVsbCxudWxsLDFFNCk7Yi5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2MmJihiLmNvbnRhaW5lci5jbGVhckN1c3RvbURhdGEoKSxiLmNvbnRhaW5lci5yZW1vdmUoKSxjLnNob3coKSk7Yi5lbGVtZW50LmNsZWFyQ3VzdG9tRGF0YSgpO2RlbGV0ZSBiLmVsZW1lbnR9KTtcclxucmV0dXJuIGJ9O0NLRURJVE9SLmlubGluZUFsbD1mdW5jdGlvbigpe3ZhciBhLGQsYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQuJGVkaXRhYmxlKWZvcih2YXIgYz1DS0VESVRPUi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnKGIpLGU9MCxnPWMuY291bnQoKTtlPGc7ZSsrKWE9Yy5nZXRJdGVtKGUpLFwidHJ1ZVwiPT1hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGQ9e2VsZW1lbnQ6YSxjb25maWc6e319LCExIT09Q0tFRElUT1IuZmlyZShcImlubGluZVwiLGQpJiZDS0VESVRPUi5pbmxpbmUoYSxkLmNvbmZpZykpfTtDS0VESVRPUi5kb21SZWFkeShmdW5jdGlvbigpeyFDS0VESVRPUi5kaXNhYmxlQXV0b0lubGluZSYmQ0tFRElUT1IuaW5saW5lQWxsKCl9KX0pKCk7Q0tFRElUT1IucmVwbGFjZUNsYXNzPVwiY2tlZGl0b3JcIjtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGUsZyxsKXtpZighQ0tFRElUT1IuZW52LmlzQ29tcGF0aWJsZSlyZXR1cm4gbnVsbDthPUNLRURJVE9SLmRvbS5lbGVtZW50LmdldChhKTtpZihhLmdldEVkaXRvcigpKXRocm93J1RoZSBlZGl0b3IgaW5zdGFuY2UgXCInK2EuZ2V0RWRpdG9yKCkubmFtZSsnXCIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgcHJvdmlkZWQgZWxlbWVudC4nO3ZhciBrPW5ldyBDS0VESVRPUi5lZGl0b3IoZSxhLGwpO2w9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFJiYoYS5zZXRTdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSxrLl8ucmVxdWlyZWQ9YS5oYXNBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiKSxhLnJlbW92ZUF0dHJpYnV0ZShcInJlcXVpcmVkXCIpKTtnJiZrLnNldERhdGEoZyxudWxsLCEwKTtrLm9uKFwibG9hZGVkXCIsZnVuY3Rpb24oKXtiKGspO2w9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFJiZrLmNvbmZpZy5hdXRvVXBkYXRlRWxlbWVudCYmXHJcbmEuJC5mb3JtJiZrLl9hdHRhY2hUb0Zvcm0oKTtrLnNldE1vZGUoay5jb25maWcuc3RhcnR1cE1vZGUsZnVuY3Rpb24oKXtrLnJlc2V0RGlydHkoKTtrLnN0YXR1cz1cInJlYWR5XCI7ay5maXJlT25jZShcImluc3RhbmNlUmVhZHlcIik7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlUmVhZHlcIixudWxsLGspfSl9KTtrLm9uKFwiZGVzdHJveVwiLGQpO3JldHVybiBrfWZ1bmN0aW9uIGQoKXt2YXIgYT10aGlzLmNvbnRhaW5lcixiPXRoaXMuZWxlbWVudDthJiYoYS5jbGVhckN1c3RvbURhdGEoKSxhLnJlbW92ZSgpKTtiJiYoYi5jbGVhckN1c3RvbURhdGEoKSx0aGlzLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRSYmKGIuc2hvdygpLHRoaXMuXy5yZXF1aXJlZCYmYi5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLFwicmVxdWlyZWRcIikpLGRlbGV0ZSB0aGlzLmVsZW1lbnQpfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YS5uYW1lLGQ9YS5lbGVtZW50LGw9YS5lbGVtZW50TW9kZSxrPVxyXG5hLmZpcmUoXCJ1aVNwYWNlXCIse3NwYWNlOlwidG9wXCIsaHRtbDpcIlwifSkuaHRtbCxuPWEuZmlyZShcInVpU3BhY2VcIix7c3BhY2U6XCJib3R0b21cIixodG1sOlwiXCJ9KS5odG1sLHc9bmV3IENLRURJVE9SLnRlbXBsYXRlKCdcXHgzY3tvdXRlckVsfSBpZFxceDNkXCJja2Vfe25hbWV9XCIgY2xhc3NcXHgzZFwie2lkfSBja2UgY2tlX3Jlc2V0IGNrZV9jaHJvbWUgY2tlX2VkaXRvcl97bmFtZX0gY2tlX3tsYW5nRGlyfSAnK0NLRURJVE9SLmVudi5jc3NDbGFzcysnXCIgIGRpclxceDNkXCJ7bGFuZ0Rpcn1cIiBsYW5nXFx4M2RcIntsYW5nQ29kZX1cIiByb2xlXFx4M2RcImFwcGxpY2F0aW9uXCInKyhhLnRpdGxlPycgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcImNrZV97bmFtZX1fYXJpYWxibFwiJzpcIlwiKStcIlxceDNlXCIrKGEudGl0bGU/J1xceDNjc3BhbiBpZFxceDNkXCJja2Vfe25hbWV9X2FyaWFsYmxcIiBjbGFzc1xceDNkXCJja2Vfdm9pY2VfbGFiZWxcIlxceDNle3ZvaWNlTGFiZWx9XFx4M2Mvc3BhblxceDNlJzpcIlwiKSsnXFx4M2N7b3V0ZXJFbH0gY2xhc3NcXHgzZFwiY2tlX2lubmVyIGNrZV9yZXNldFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZXt0b3BIdG1sfVxceDNje291dGVyRWx9IGlkXFx4M2RcIntjb250ZW50SWR9XCIgY2xhc3NcXHgzZFwiY2tlX2NvbnRlbnRzIGNrZV9yZXNldFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjL3tvdXRlckVsfVxceDNle2JvdHRvbUh0bWx9XFx4M2Mve291dGVyRWx9XFx4M2VcXHgzYy97b3V0ZXJFbH1cXHgzZScpLFxyXG5iPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKHcub3V0cHV0KHtpZDphLmlkLG5hbWU6YixsYW5nRGlyOmEubGFuZy5kaXIsbGFuZ0NvZGU6YS5sYW5nQ29kZSx2b2ljZUxhYmVsOmEudGl0bGUsdG9wSHRtbDprPydcXHgzY3NwYW4gaWRcXHgzZFwiJythLnVpLnNwYWNlSWQoXCJ0b3BcIikrJ1wiIGNsYXNzXFx4M2RcImNrZV90b3AgY2tlX3Jlc2V0X2FsbFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgc3R5bGVcXHgzZFwiaGVpZ2h0OmF1dG9cIlxceDNlJytrK1wiXFx4M2Mvc3BhblxceDNlXCI6XCJcIixjb250ZW50SWQ6YS51aS5zcGFjZUlkKFwiY29udGVudHNcIiksYm90dG9tSHRtbDpuPydcXHgzY3NwYW4gaWRcXHgzZFwiJythLnVpLnNwYWNlSWQoXCJib3R0b21cIikrJ1wiIGNsYXNzXFx4M2RcImNrZV9ib3R0b20gY2tlX3Jlc2V0X2FsbFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZScrbitcIlxceDNjL3NwYW5cXHgzZVwiOlwiXCIsb3V0ZXJFbDpDS0VESVRPUi5lbnYuaWU/XCJzcGFuXCI6XCJkaXZcIn0pKTtsPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRT9cclxuKGQuaGlkZSgpLGIuaW5zZXJ0QWZ0ZXIoZCkpOmQuYXBwZW5kKGIpO2EuY29udGFpbmVyPWI7YS51aS5jb250ZW50c0VsZW1lbnQ9YS51aS5zcGFjZShcImNvbnRlbnRzXCIpO2smJmEudWkuc3BhY2UoXCJ0b3BcIikudW5zZWxlY3RhYmxlKCk7biYmYS51aS5zcGFjZShcImJvdHRvbVwiKS51bnNlbGVjdGFibGUoKTtkPWEuY29uZmlnLndpZHRoO2w9YS5jb25maWcuaGVpZ2h0O2QmJmIuc2V0U3R5bGUoXCJ3aWR0aFwiLENLRURJVE9SLnRvb2xzLmNzc0xlbmd0aChkKSk7bCYmYS51aS5zcGFjZShcImNvbnRlbnRzXCIpLnNldFN0eWxlKFwiaGVpZ2h0XCIsQ0tFRElUT1IudG9vbHMuY3NzTGVuZ3RoKGwpKTtiLmRpc2FibGVDb250ZXh0TWVudSgpO0NLRURJVE9SLmVudi53ZWJraXQmJmIub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7YS5mb2N1cygpfSk7YS5maXJlT25jZShcInVpUmVhZHlcIil9Q0tFRElUT1IucmVwbGFjZT1mdW5jdGlvbihiLGQpe3JldHVybiBhKGIsZCxudWxsLENLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFKX07XHJcbkNLRURJVE9SLmFwcGVuZFRvPWZ1bmN0aW9uKGIsZCxnKXtyZXR1cm4gYShiLGQsZyxDS0VESVRPUi5FTEVNRU5UX01PREVfQVBQRU5EVE8pfTtDS0VESVRPUi5yZXBsYWNlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIiksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgZD1udWxsLGw9YVtiXTtpZihsLm5hbWV8fGwuaWQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe2lmKCEobmV3IFJlZ0V4cChcIig/Ol58XFxcXHMpXCIrYXJndW1lbnRzWzBdK1wiKD86JHxcXFxccylcIikpLnRlc3QobC5jbGFzc05hbWUpKWNvbnRpbnVlfWVsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiYoZD17fSwhMT09PWFyZ3VtZW50c1swXShsLGQpKSljb250aW51ZTt0aGlzLnJlcGxhY2UobCxkKX19fTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmFkZE1vZGU9ZnVuY3Rpb24oYSxiKXsodGhpcy5fLm1vZGVzfHwodGhpcy5fLm1vZGVzPVxyXG57fSkpW2FdPWJ9O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuc2V0TW9kZT1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsbD10aGlzLl8ubW9kZXM7aWYoYSE9ZC5tb2RlJiZsJiZsW2FdKXtkLmZpcmUoXCJiZWZvcmVTZXRNb2RlXCIsYSk7aWYoZC5tb2RlKXt2YXIgaz1kLmNoZWNrRGlydHkoKSxsPWQuXy5wcmV2aW91c01vZGVEYXRhLG4sdz0wO2QuZmlyZShcImJlZm9yZU1vZGVVbmxvYWRcIik7ZC5lZGl0YWJsZSgwKTtkLl8ucHJldmlvdXNNb2RlPWQubW9kZTtkLl8ucHJldmlvdXNNb2RlRGF0YT1uPWQuZ2V0RGF0YSgxKTtcInNvdXJjZVwiPT1kLm1vZGUmJmw9PW4mJihkLmZpcmUoXCJsb2NrU25hcHNob3RcIix7Zm9yY2VVcGRhdGU6ITB9KSx3PTEpO2QudWkuc3BhY2UoXCJjb250ZW50c1wiKS5zZXRIdG1sKFwiXCIpO2QubW9kZT1cIlwifWVsc2UgZC5fLnByZXZpb3VzTW9kZURhdGE9ZC5nZXREYXRhKDEpO3RoaXMuXy5tb2Rlc1thXShmdW5jdGlvbigpe2QubW9kZT1hO3ZvaWQgMCE9PWsmJiFrJiZcclxuZC5yZXNldERpcnR5KCk7dz9kLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKTpcInd5c2l3eWdcIj09YSYmZC5maXJlKFwic2F2ZVNuYXBzaG90XCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtkLmZpcmUoXCJtb2RlXCIpO2ImJmIuY2FsbChkKX0sMCl9KX19O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGEsYixkLGwpe3ZhciBrPXRoaXMuY29udGFpbmVyLG49dGhpcy51aS5zcGFjZShcImNvbnRlbnRzXCIpLHc9Q0tFRElUT1IuZW52LndlYmtpdCYmdGhpcy5kb2N1bWVudCYmdGhpcy5kb2N1bWVudC5nZXRXaW5kb3coKS4kLmZyYW1lRWxlbWVudDtsPWw/dGhpcy5jb250YWluZXIuZ2V0Rmlyc3QoZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmhhc0NsYXNzKFwiY2tlX2lubmVyXCIpfSk6aztsLnNldFNpemUoXCJ3aWR0aFwiLGEsITApO3cmJih3LnN0eWxlLndpZHRoPVwiMSVcIik7dmFyIGY9KGwuJC5vZmZzZXRIZWlnaHR8fDApLShuLiQuY2xpZW50SGVpZ2h0fHxcclxuMCksaz1NYXRoLm1heChiLShkPzA6ZiksMCk7Yj1kP2IrZjpiO24uc2V0U3R5bGUoXCJoZWlnaHRcIixrK1wicHhcIik7dyYmKHcuc3R5bGUud2lkdGg9XCIxMDAlXCIpO3RoaXMuZmlyZShcInJlc2l6ZVwiLHtvdXRlckhlaWdodDpiLGNvbnRlbnRzSGVpZ2h0Omssb3V0ZXJXaWR0aDphfHxsLmdldFNpemUoXCJ3aWR0aFwiKX0pfTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmdldFJlc2l6YWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLnVpLnNwYWNlKFwiY29udGVudHNcIik6dGhpcy5jb250YWluZXJ9O0NLRURJVE9SLmRvbVJlYWR5KGZ1bmN0aW9uKCl7Q0tFRElUT1IucmVwbGFjZUNsYXNzJiZDS0VESVRPUi5yZXBsYWNlQWxsKENLRURJVE9SLnJlcGxhY2VDbGFzcyl9KX0pKCk7Q0tFRElUT1IuY29uZmlnLnN0YXJ0dXBNb2RlPVwid3lzaXd5Z1wiO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPWEuZWRpdG9yLGU9YS5kYXRhLnBhdGgsbT1lLmJsb2NrTGltaXQsZj1hLmRhdGEuc2VsZWN0aW9uLHI9Zi5nZXRSYW5nZXMoKVswXSxnO2lmKENLRURJVE9SLmVudi5nZWNrb3x8Q0tFRElUT1IuZW52LmllJiZDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcilpZihmPWQoZixlKSlmLmFwcGVuZEJvZ3VzKCksZz1DS0VESVRPUi5lbnYuaWU7bChiLGUuYmxvY2ssbSkmJnIuY29sbGFwc2VkJiYhci5nZXRDb21tb25BbmNlc3RvcigpLmlzUmVhZE9ubHkoKSYmKGU9ci5jbG9uZSgpLGUuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0JMT0NLX0NPTlRFTlRTKSxtPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpLG0uZ3VhcmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIWMoYSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9DT01NRU5UfHxhLmlzUmVhZE9ubHkoKX0sIW0uY2hlY2tGb3J3YXJkKCl8fGUuY2hlY2tTdGFydE9mQmxvY2soKSYmZS5jaGVja0VuZE9mQmxvY2soKSkmJlxyXG4oYj1yLmZpeEJsb2NrKCEwLGIuYWN0aXZlRW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIiksQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXJ8fChiPWIuZ2V0Rmlyc3QoYykpJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmQ0tFRElUT1IudG9vbHMudHJpbShiLmdldFRleHQoKSkubWF0Y2goL14oPzombmJzcDt8XFx4YTApJC8pJiZiLnJlbW92ZSgpLGc9MSxhLmNhbmNlbCgpKTtnJiZyLnNlbGVjdCgpfWZ1bmN0aW9uIGQoYSxiKXtpZihhLmlzRmFrZSlyZXR1cm4gMDt2YXIgZD1iLmJsb2NrfHxiLmJsb2NrTGltaXQsZT1kJiZkLmdldExhc3QoYyk7aWYoISghZHx8IWQuaXNCbG9ja0JvdW5kYXJ5KCl8fGUmJmUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZlLmlzQmxvY2tCb3VuZGFyeSgpfHxkLmlzKFwicHJlXCIpfHxkLmdldEJvZ3VzKCkpKXJldHVybiBkfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YS5kYXRhLmdldFRhcmdldCgpO2IuaXMoXCJpbnB1dFwiKSYmXHJcbihiPWIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxcInN1Ym1pdFwiIT1iJiZcInJlc2V0XCIhPWJ8fGEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpKX1mdW5jdGlvbiBjKGEpe3JldHVybiBmKGEpJiZ4KGEpfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Yy5kYXRhLiQudG9FbGVtZW50fHxjLmRhdGEuJC5mcm9tRWxlbWVudHx8Yy5kYXRhLiQucmVsYXRlZFRhcmdldDsoZD1kJiZkLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGQpOm51bGwpJiYoYi5lcXVhbHMoZCl8fGIuY29udGFpbnMoZCkpfHxhLmNhbGwodGhpcyxjKX19ZnVuY3Rpb24gZyhhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBmdW5jdGlvbihiLGgpe2gmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmlzKGYpJiYoZD1iKTtpZighKGh8fCFjKGIpfHxhJiZ1KGIpKSlyZXR1cm4hMX19dmFyIGQsZT1hLmdldFJhbmdlcygpWzBdO2E9YS5yb290O1xyXG52YXIgZj17dGFibGU6MSx1bDoxLG9sOjEsZGw6MX07aWYoZS5zdGFydFBhdGgoKS5jb250YWlucyhmKSl7dmFyIHI9ZS5jbG9uZSgpO3IuY29sbGFwc2UoMSk7ci5zZXRTdGFydEF0KGEsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2E9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocik7YS5ndWFyZD1iKCk7YS5jaGVja0JhY2t3YXJkKCk7aWYoZClyZXR1cm4gcj1lLmNsb25lKCksci5jb2xsYXBzZSgpLHIuc2V0RW5kQXQoZCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGE9bmV3IENLRURJVE9SLmRvbS53YWxrZXIociksYS5ndWFyZD1iKCEwKSxkPSExLGEuY2hlY2tGb3J3YXJkKCksZH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsKGEsYixjKXtyZXR1cm4hMSE9PWEuY29uZmlnLmF1dG9QYXJhZ3JhcGgmJmEuYWN0aXZlRW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUiYmKGEuZWRpdGFibGUoKS5lcXVhbHMoYykmJiFifHxiJiZcInRydWVcIj09Yi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpfVxyXG5mdW5jdGlvbiBrKGEpe3JldHVybiBhLmFjdGl2ZUVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfQlImJiExIT09YS5jb25maWcuYXV0b1BhcmFncmFwaD9hLmFjdGl2ZUVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCI6ITF9ZnVuY3Rpb24gbihhKXt2YXIgYj1hLmVkaXRvcjtiLmdldFNlbGVjdGlvbigpLnNjcm9sbEludG9WaWV3KCk7c2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sMCl9ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQ9YS5nZXRDb21tb25BbmNlc3RvcihiKTtmb3IoYj1hPWM/YjphOyhhPWEuZ2V0UGFyZW50KCkpJiYhZC5lcXVhbHMoYSkmJjE9PWEuZ2V0Q2hpbGRDb3VudCgpOyliPWE7Yi5yZW1vdmUoKX1DS0VESVRPUi5lZGl0YWJsZT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5kb20uZWxlbWVudCwkOmZ1bmN0aW9uKGEsYil7dGhpcy5iYXNlKGIuJHx8Yik7dGhpcy5lZGl0b3I9YTtcclxudGhpcy5zdGF0dXM9XCJ1bmxvYWRlZFwiO3RoaXMuaGFzRm9jdXM9ITE7dGhpcy5zZXR1cCgpfSxwcm90bzp7Zm9jdXM6ZnVuY3Rpb24oKXt2YXIgYTtpZihDS0VESVRPUi5lbnYud2Via2l0JiYhdGhpcy5oYXNGb2N1cyYmKGE9dGhpcy5lZGl0b3IuXy5wcmV2aW91c0FjdGl2ZXx8dGhpcy5nZXREb2N1bWVudCgpLmdldEFjdGl2ZSgpLHRoaXMuY29udGFpbnMoYSkpKXthLmZvY3VzKCk7cmV0dXJufXRyeXt0aGlzLiRbQ0tFRElUT1IuZW52LmllJiZ0aGlzLmdldERvY3VtZW50KCkuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50KT9cInNldEFjdGl2ZVwiOlwiZm9jdXNcIl0oKX1jYXRjaChiKXtpZighQ0tFRElUT1IuZW52LmllKXRocm93IGI7fUNLRURJVE9SLmVudi5zYWZhcmkmJiF0aGlzLmlzSW5saW5lKCkmJihhPUNLRURJVE9SLmRvY3VtZW50LmdldEFjdGl2ZSgpLGEuZXF1YWxzKHRoaXMuZ2V0V2luZG93KCkuZ2V0RnJhbWUoKSl8fHRoaXMuZ2V0V2luZG93KCkuZm9jdXMoKSl9LG9uOmZ1bmN0aW9uKGEsXHJcbmIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtDS0VESVRPUi5lbnYuaWUmJi9eZm9jdXN8Ymx1ciQvLmV4ZWMoYSkmJihhPVwiZm9jdXNcIj09YT9cImZvY3VzaW5cIjpcImZvY3Vzb3V0XCIsYj1lKGIsdGhpcyksY1swXT1hLGNbMV09Yik7cmV0dXJuIENLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5vbi5hcHBseSh0aGlzLGMpfSxhdHRhY2hMaXN0ZW5lcjpmdW5jdGlvbihhKXshdGhpcy5fLmxpc3RlbmVycyYmKHRoaXMuXy5saXN0ZW5lcnM9W10pO3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxiPWEub24uYXBwbHkoYSxiKTt0aGlzLl8ubGlzdGVuZXJzLnB1c2goYik7cmV0dXJuIGJ9LGNsZWFyTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmxpc3RlbmVyczt0cnl7Zm9yKDthLmxlbmd0aDspYS5wb3AoKS5yZW1vdmVMaXN0ZW5lcigpfWNhdGNoKGIpe319LHJlc3RvcmVBdHRyczpmdW5jdGlvbigpe3ZhciBhPVxyXG50aGlzLl8uYXR0ckNoYW5nZXMsYixjO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGI9YVtjXSxudWxsIT09Yj90aGlzLnNldEF0dHJpYnV0ZShjLGIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKGMpKX0sYXR0YWNoQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRDdXN0b21EYXRhKFwiY2xhc3Nlc1wiKTt0aGlzLmhhc0NsYXNzKGEpfHwoIWImJihiPVtdKSxiLnB1c2goYSksdGhpcy5zZXRDdXN0b21EYXRhKFwiY2xhc3Nlc1wiLGIpLHRoaXMuYWRkQ2xhc3MoYSkpfSxjaGFuZ2VBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7YiE9PWMmJighdGhpcy5fLmF0dHJDaGFuZ2VzJiYodGhpcy5fLmF0dHJDaGFuZ2VzPXt9KSxhIGluIHRoaXMuXy5hdHRyQ2hhbmdlc3x8KHRoaXMuXy5hdHRyQ2hhbmdlc1thXT1jKSx0aGlzLnNldEF0dHJpYnV0ZShhLGIpKX0saW5zZXJ0VGV4dDpmdW5jdGlvbihhKXt0aGlzLmVkaXRvci5mb2N1cygpO3RoaXMuaW5zZXJ0SHRtbCh0aGlzLnRyYW5zZm9ybVBsYWluVGV4dFRvSHRtbChhKSxcclxuXCJ0ZXh0XCIpfSx0cmFuc2Zvcm1QbGFpblRleHRUb0h0bWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkuZ2V0U3RhcnRFbGVtZW50KCkuaGFzQXNjZW5kYW50KFwicHJlXCIsITApP0NLRURJVE9SLkVOVEVSX0JSOnRoaXMuZWRpdG9yLmFjdGl2ZUVudGVyTW9kZTtyZXR1cm4gQ0tFRElUT1IudG9vbHMudHJhbnNmb3JtUGxhaW5UZXh0VG9IdG1sKGEsYil9LGluc2VydEh0bWw6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZWRpdG9yO2QuZm9jdXMoKTtkLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Y3x8KGM9ZC5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKVswXSk7cSh0aGlzLGJ8fFwiaHRtbFwiLGEsYyk7Yy5zZWxlY3QoKTtuKHRoaXMpO3RoaXMuZWRpdG9yLmZpcmUoXCJhZnRlckluc2VydEh0bWxcIix7fSl9LGluc2VydEh0bWxJbnRvUmFuZ2U6ZnVuY3Rpb24oYSxiLGMpe3EodGhpcyxjfHxcImh0bWxcIixhLGIpO3RoaXMuZWRpdG9yLmZpcmUoXCJhZnRlckluc2VydEh0bWxcIixcclxue2ludG9SYW5nZTpifSl9LGluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmVkaXRvcjtkLmZvY3VzKCk7ZC5maXJlKFwic2F2ZVNuYXBzaG90XCIpO3ZhciBlPWQuYWN0aXZlRW50ZXJNb2RlLGQ9ZC5nZXRTZWxlY3Rpb24oKSxmPWEuZ2V0TmFtZSgpLGY9Q0tFRElUT1IuZHRkLiRibG9ja1tmXTtifHwoYj1kLmdldFJhbmdlcygpWzBdKTt0aGlzLmluc2VydEVsZW1lbnRJbnRvUmFuZ2UoYSxiKSYmKGIubW92ZVRvUG9zaXRpb24oYSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGYmJigoZj1hLmdldE5leHQoZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSkmJiF1KGEpfSkpJiZmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZi5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKT9mLmdldER0ZCgpW1wiI1wiXT9iLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoZik6Yi5tb3ZlVG9FbGVtZW50RWRpdEVuZChhKTpmfHxlPT1DS0VESVRPUi5FTlRFUl9CUnx8KGY9Yi5maXhCbG9jayghMCxcclxuZT09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCIpLGIubW92ZVRvRWxlbWVudEVkaXRTdGFydChmKSkpKTtkLnNlbGVjdFJhbmdlcyhbYl0pO24odGhpcyl9LGluc2VydEVsZW1lbnRJbnRvU2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0RWxlbWVudChhKX0saW5zZXJ0RWxlbWVudEludG9SYW5nZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWRpdG9yLGQ9Yy5jb25maWcuZW50ZXJNb2RlLGU9YS5nZXROYW1lKCksZj1DS0VESVRPUi5kdGQuJGJsb2NrW2VdO2lmKGIuY2hlY2tSZWFkT25seSgpKXJldHVybiExO2IuZGVsZXRlQ29udGVudHMoMSk7Yi5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuc3RhcnRDb250YWluZXIuaXMoe3RyOjEsdGFibGU6MSx0Ym9keToxLHRoZWFkOjEsdGZvb3Q6MX0pJiZ5KGIpO3ZhciBnLGw7aWYoZilmb3IoOyhnPWIuZ2V0Q29tbW9uQW5jZXN0b3IoMCwxKSkmJihsPUNLRURJVE9SLmR0ZFtnLmdldE5hbWUoKV0pJiZcclxuKCFsfHwhbFtlXSk7KWcuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLnNwYW4/Yi5zcGxpdEVsZW1lbnQoZyk6Yi5jaGVja1N0YXJ0T2ZCbG9jaygpJiZiLmNoZWNrRW5kT2ZCbG9jaygpPyhiLnNldFN0YXJ0QmVmb3JlKGcpLGIuY29sbGFwc2UoITApLGcucmVtb3ZlKCkpOmIuc3BsaXRCbG9jayhkPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIixjLmVkaXRhYmxlKCkpO2IuaW5zZXJ0Tm9kZShhKTtyZXR1cm4hMH0sc2V0RGF0YTpmdW5jdGlvbihhLGIpe2J8fChhPXRoaXMuZWRpdG9yLmRhdGFQcm9jZXNzb3IudG9IdG1sKGEpKTt0aGlzLnNldEh0bWwoYSk7dGhpcy5maXhJbml0aWFsU2VsZWN0aW9uKCk7XCJ1bmxvYWRlZFwiPT10aGlzLnN0YXR1cyYmKHRoaXMuc3RhdHVzPVwicmVhZHlcIik7dGhpcy5lZGl0b3IuZmlyZShcImRhdGFSZWFkeVwiKX0sZ2V0RGF0YTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEh0bWwoKTthfHwoYj10aGlzLmVkaXRvci5kYXRhUHJvY2Vzc29yLnRvRGF0YUZvcm1hdChiKSk7XHJcbnJldHVybiBifSxzZXRSZWFkT25seTpmdW5jdGlvbihhKXt0aGlzLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCFhKX0sZGV0YWNoOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVDbGFzcyhcImNrZV9lZGl0YWJsZVwiKTt0aGlzLnN0YXR1cz1cImRldGFjaGVkXCI7dmFyIGE9dGhpcy5lZGl0b3I7dGhpcy5fLmRldGFjaCgpO2RlbGV0ZSBhLmRvY3VtZW50O2RlbGV0ZSBhLndpbmRvd30saXNJbmxpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudCl9LGZpeEluaXRpYWxTZWxlY3Rpb246ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGI9Yy5nZXREb2N1bWVudCgpLiQsZD1iLmdldFNlbGVjdGlvbigpLGg7YTppZihkLmFuY2hvck5vZGUmJmQuYW5jaG9yTm9kZT09Yy4kKWg9ITA7ZWxzZXtpZihDS0VESVRPUi5lbnYud2Via2l0JiYoaD1jLmdldERvY3VtZW50KCkuZ2V0QWN0aXZlKCkpJiZoLmVxdWFscyhjKSYmIWQuYW5jaG9yTm9kZSl7aD1cclxuITA7YnJlYWsgYX1oPXZvaWQgMH1oJiYoaD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGMpLGgubW92ZVRvRWxlbWVudEVkaXRTdGFydChjKSxiPWIuY3JlYXRlUmFuZ2UoKSxiLnNldFN0YXJ0KGguc3RhcnRDb250YWluZXIuJCxoLnN0YXJ0T2Zmc2V0KSxiLmNvbGxhcHNlKCEwKSxkLnJlbW92ZUFsbFJhbmdlcygpLGQuYWRkUmFuZ2UoYikpfWZ1bmN0aW9uIGIoKXt2YXIgYT1jLmdldERvY3VtZW50KCkuJCxkPWEuc2VsZWN0aW9uLGg9Yy5nZXREb2N1bWVudCgpLmdldEFjdGl2ZSgpO1wiTm9uZVwiPT1kLnR5cGUmJmguZXF1YWxzKGMpJiYoZD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGMpLGE9YS5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpLGQubW92ZVRvRWxlbWVudEVkaXRTdGFydChjKSxkPWQuc3RhcnRDb250YWluZXIsZC50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihkPWQuZ2V0UGFyZW50KCkpLGEubW92ZVRvRWxlbWVudFRleHQoZC4kKSxhLmNvbGxhcHNlKCEwKSxhLnNlbGVjdCgpKX1cclxudmFyIGM9dGhpcztpZihDS0VESVRPUi5lbnYuaWUmJig5PkNLRURJVE9SLmVudi52ZXJzaW9ufHxDS0VESVRPUi5lbnYucXVpcmtzKSl0aGlzLmhhc0ZvY3VzJiYodGhpcy5mb2N1cygpLGIoKSk7ZWxzZSBpZih0aGlzLmhhc0ZvY3VzKXRoaXMuZm9jdXMoKSxhKCk7ZWxzZSB0aGlzLm9uY2UoXCJmb2N1c1wiLGZ1bmN0aW9uKCl7YSgpfSxudWxsLG51bGwsLTk5OSl9LGdldEh0bWxGcm9tUmFuZ2U6ZnVuY3Rpb24oYSl7aWYoYS5jb2xsYXBzZWQpcmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChhLmRvY3VtZW50KTthPXtkb2M6dGhpcy5nZXREb2N1bWVudCgpLHJhbmdlOmEuY2xvbmUoKX07Ri5lb2wuZGV0ZWN0KGEsdGhpcyk7Ri5ib2d1cy5leGNsdWRlKGEpO0YuY2VsbC5zaHJpbmsoYSk7YS5mcmFnbWVudD1hLnJhbmdlLmNsb25lQ29udGVudHMoKTtGLnRyZWUucmVidWlsZChhLHRoaXMpO0YuZW9sLmZpeChhLHRoaXMpO3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoYS5mcmFnbWVudC4kKX0sXHJcbmV4dHJhY3RIdG1sRnJvbVJhbmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dCxkPXtyYW5nZTphLGRvYzphLmRvY3VtZW50fSxlPXRoaXMuZ2V0SHRtbEZyb21SYW5nZShhKTtpZihhLmNvbGxhcHNlZClyZXR1cm4gYS5vcHRpbWl6ZSgpLGU7YS5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfSU5MSU5FLDEpO2MudGFibGUuZGV0ZWN0UHVyZ2UoZCk7ZC5ib29rbWFyaz1hLmNyZWF0ZUJvb2ttYXJrKCk7ZGVsZXRlIGQucmFuZ2U7dmFyIGY9dGhpcy5lZGl0b3IuY3JlYXRlUmFuZ2UoKTtmLm1vdmVUb1Bvc2l0aW9uKGQuYm9va21hcmsuc3RhcnROb2RlLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7ZC50YXJnZXRCb29rbWFyaz1mLmNyZWF0ZUJvb2ttYXJrKCk7Yy5saXN0LmRldGVjdE1lcmdlKGQsdGhpcyk7Yy50YWJsZS5kZXRlY3RSYW5nZXMoZCx0aGlzKTtjLmJsb2NrLmRldGVjdE1lcmdlKGQsdGhpcyk7ZC50YWJsZUNvbnRlbnRzUmFuZ2VzPyhjLnRhYmxlLmRlbGV0ZVJhbmdlcyhkKSxcclxuYS5tb3ZlVG9Cb29rbWFyayhkLmJvb2ttYXJrKSxkLnJhbmdlPWEpOihhLm1vdmVUb0Jvb2ttYXJrKGQuYm9va21hcmspLGQucmFuZ2U9YSxhLmV4dHJhY3RDb250ZW50cyhjLmRldGVjdEV4dHJhY3RNZXJnZShkKSkpO2EubW92ZVRvQm9va21hcmsoZC50YXJnZXRCb29rbWFyayk7YS5vcHRpbWl6ZSgpO2MuZml4VW5lZGl0YWJsZVJhbmdlUG9zaXRpb24oYSk7Yy5saXN0Lm1lcmdlKGQsdGhpcyk7Yy50YWJsZS5wdXJnZShkLHRoaXMpO2MuYmxvY2subWVyZ2UoZCx0aGlzKTtpZihiKXtjPWEuc3RhcnRQYXRoKCk7aWYoZD1hLmNoZWNrU3RhcnRPZkJsb2NrKCkmJmEuY2hlY2tFbmRPZkJsb2NrKCkmJmMuYmxvY2smJiFhLnJvb3QuZXF1YWxzKGMuYmxvY2spKXthOnt2YXIgZD1jLmJsb2NrLmdldEVsZW1lbnRzQnlUYWcoXCJzcGFuXCIpLGY9MCxnO2lmKGQpZm9yKDtnPWQuZ2V0SXRlbShmKyspOylpZigheChnKSl7ZD0hMDticmVhayBhfWQ9ITF9ZD0hZH1kJiYoYS5tb3ZlVG9Qb3NpdGlvbihjLmJsb2NrLFxyXG5DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGMuYmxvY2sucmVtb3ZlKCkpfWVsc2UgYy5hdXRvUGFyYWdyYXBoKHRoaXMuZWRpdG9yLGEpLEEoYS5zdGFydENvbnRhaW5lcikmJmEuc3RhcnRDb250YWluZXIuYXBwZW5kQm9ndXMoKTthLnN0YXJ0Q29udGFpbmVyLm1lcmdlU2libGluZ3MoKTtyZXR1cm4gZX0sc2V0dXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVkaXRvcjt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVHZXREYXRhXCIsZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldERhdGEoKTt0aGlzLmlzKFwidGV4dGFyZWFcIil8fCExIT09YS5jb25maWcuaWdub3JlRW1wdHlQYXJhZ3JhcGgmJihiPWIucmVwbGFjZShCLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9KSk7YS5zZXREYXRhKGIsbnVsbCwxKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiZ2V0U25hcHNob3RcIixmdW5jdGlvbihhKXthLmRhdGE9dGhpcy5nZXREYXRhKDEpfSx0aGlzKTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXHJcblwiYWZ0ZXJTZXREYXRhXCIsZnVuY3Rpb24oKXt0aGlzLnNldERhdGEoYS5nZXREYXRhKDEpKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwibG9hZFNuYXBzaG90XCIsZnVuY3Rpb24oYSl7dGhpcy5zZXREYXRhKGEuZGF0YSwxKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiYmVmb3JlRm9jdXNcIixmdW5jdGlvbigpe3ZhciBiPWEuZ2V0U2VsZWN0aW9uKCk7KGI9YiYmYi5nZXROYXRpdmUoKSkmJlwiQ29udHJvbFwiPT1iLnR5cGV8fHRoaXMuZm9jdXMoKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiaW5zZXJ0SHRtbFwiLGZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0SHRtbChhLmRhdGEuZGF0YVZhbHVlLGEuZGF0YS5tb2RlLGEuZGF0YS5yYW5nZSl9LHRoaXMpO3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImluc2VydEVsZW1lbnRcIixmdW5jdGlvbihhKXt0aGlzLmluc2VydEVsZW1lbnQoYS5kYXRhKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiaW5zZXJ0VGV4dFwiLFxyXG5mdW5jdGlvbihhKXt0aGlzLmluc2VydFRleHQoYS5kYXRhKX0sdGhpcyk7dGhpcy5zZXRSZWFkT25seShhLnJlYWRPbmx5KTt0aGlzLmF0dGFjaENsYXNzKFwiY2tlX2VkaXRhYmxlXCIpO2EuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/dGhpcy5hdHRhY2hDbGFzcyhcImNrZV9lZGl0YWJsZV9pbmxpbmVcIik6YS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0UmJmEuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUT3x8dGhpcy5hdHRhY2hDbGFzcyhcImNrZV9lZGl0YWJsZV90aGVtZWRcIik7dGhpcy5hdHRhY2hDbGFzcyhcImNrZV9jb250ZW50c19cIithLmNvbmZpZy5jb250ZW50c0xhbmdEaXJlY3Rpb24pO2Eua2V5c3Ryb2tlSGFuZGxlci5ibG9ja2VkS2V5c3Ryb2tlc1s4XT0rYS5yZWFkT25seTthLmtleXN0cm9rZUhhbmRsZXIuYXR0YWNoKHRoaXMpO3RoaXMub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0aGlzLmhhc0ZvY3VzPVxyXG4hMX0sbnVsbCxudWxsLC0xKTt0aGlzLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe3RoaXMuaGFzRm9jdXM9ITB9LG51bGwsbnVsbCwtMSk7YS5mb2N1c01hbmFnZXIuYWRkKHRoaXMpO3RoaXMuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldEFjdGl2ZSgpKSYmKHRoaXMuaGFzRm9jdXM9ITAsYS5vbmNlKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7YS5mb2N1c01hbmFnZXIuZm9jdXModGhpcyl9LHRoaXMpKTt0aGlzLmlzSW5saW5lKCkmJnRoaXMuY2hhbmdlQXR0cihcInRhYmluZGV4XCIsYS50YWJJbmRleCk7aWYoIXRoaXMuaXMoXCJ0ZXh0YXJlYVwiKSl7YS5kb2N1bWVudD10aGlzLmdldERvY3VtZW50KCk7YS53aW5kb3c9dGhpcy5nZXRXaW5kb3coKTt2YXIgZD1hLmRvY3VtZW50O3RoaXMuY2hhbmdlQXR0cihcInNwZWxsY2hlY2tcIiwhYS5jb25maWcuZGlzYWJsZU5hdGl2ZVNwZWxsQ2hlY2tlcik7dmFyIGU9YS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uO3RoaXMuZ2V0RGlyZWN0aW9uKDEpIT1cclxuZSYmdGhpcy5jaGFuZ2VBdHRyKFwiZGlyXCIsZSk7dmFyIG09Q0tFRElUT1IuZ2V0Q3NzKCk7bSYmKGU9ZC5nZXRIZWFkKCksZS5nZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldFwiKXx8KG09ZC5hcHBlbmRTdHlsZVRleHQobSksbT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQobS5vd25lck5vZGV8fG0ub3duaW5nRWxlbWVudCksZS5zZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldFwiLG0pLG0uZGF0YShcImNrZS10ZW1wXCIsMSkpKTtlPWQuZ2V0Q3VzdG9tRGF0YShcInN0eWxlc2hlZXRfcmVmXCIpfHwwO2Quc2V0Q3VzdG9tRGF0YShcInN0eWxlc2hlZXRfcmVmXCIsZSsxKTt0aGlzLnNldEN1c3RvbURhdGEoXCJja2VfaW5jbHVkZVJlYWRvbmx5XCIsIWEuY29uZmlnLmRpc2FibGVSZWFkb25seVN0eWxpbmcpO3RoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcImNsaWNrXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7dmFyIGI9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYS5nZXRUYXJnZXQoKSx0aGlzKSkuY29udGFpbnMoXCJhXCIpO1xyXG5iJiYyIT1hLiQuYnV0dG9uJiZiLmlzUmVhZE9ubHkoKSYmYS5wcmV2ZW50RGVmYXVsdCgpfSk7dmFyIGw9ezg6MSw0NjoxfTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJrZXlcIixmdW5jdGlvbihiKXtpZihhLnJlYWRPbmx5KXJldHVybiEwO3ZhciBjPWIuZGF0YS5kb21FdmVudC5nZXRLZXkoKSxkO2lmKGMgaW4gbCl7Yj1hLmdldFNlbGVjdGlvbigpO3ZhciBoLGU9Yi5nZXRSYW5nZXMoKVswXSxtPWUuc3RhcnRQYXRoKCkscCx2LGssYz04PT1jO0NLRURJVE9SLmVudi5pZSYmMTE+Q0tFRElUT1IuZW52LnZlcnNpb24mJihoPWIuZ2V0U2VsZWN0ZWRFbGVtZW50KCkpfHwoaD1nKGIpKT8oYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLGUubW92ZVRvUG9zaXRpb24oaCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGgucmVtb3ZlKCksZS5zZWxlY3QoKSxhLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZD0xKTplLmNvbGxhcHNlZCYmKChwPW0uYmxvY2spJiYoaz1wW2M/XCJnZXRQcmV2aW91c1wiOlxyXG5cImdldE5leHRcIl0oZikpJiZrLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmay5pcyhcInRhYmxlXCIpJiZlW2M/XCJjaGVja1N0YXJ0T2ZCbG9ja1wiOlwiY2hlY2tFbmRPZkJsb2NrXCJdKCk/KGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxlW2M/XCJjaGVja0VuZE9mQmxvY2tcIjpcImNoZWNrU3RhcnRPZkJsb2NrXCJdKCkmJnAucmVtb3ZlKCksZVtcIm1vdmVUb0VsZW1lbnRFZGl0XCIrKGM/XCJFbmRcIjpcIlN0YXJ0XCIpXShrKSxlLnNlbGVjdCgpLGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxkPTEpOm0uYmxvY2tMaW1pdCYmbS5ibG9ja0xpbWl0LmlzKFwidGRcIikmJih2PW0uYmxvY2tMaW1pdC5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSkmJmUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudCh2LGM/Q0tFRElUT1IuU1RBUlQ6Q0tFRElUT1IuRU5EKSYmKGs9dltjP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oZikpPyhhLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZVtcIm1vdmVUb0VsZW1lbnRFZGl0XCIrKGM/XCJFbmRcIjpcIlN0YXJ0XCIpXShrKSxcclxuZS5jaGVja1N0YXJ0T2ZCbG9jaygpJiZlLmNoZWNrRW5kT2ZCbG9jaygpP2sucmVtb3ZlKCk6ZS5zZWxlY3QoKSxhLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZD0xKToodj1tLmNvbnRhaW5zKFtcInRkXCIsXCJ0aFwiLFwiY2FwdGlvblwiXSkpJiZlLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQodixjP0NLRURJVE9SLlNUQVJUOkNLRURJVE9SLkVORCkmJihkPTEpKX1yZXR1cm4hZH0pO2EuYmxvY2tsZXNzJiZDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyJiZ0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJrZXl1cFwiLGZ1bmN0aW9uKGIpe2IuZGF0YS5nZXRLZXlzdHJva2UoKWluIGwmJiF0aGlzLmdldEZpcnN0KGMpJiYodGhpcy5hcHBlbmRCb2d1cygpLGI9YS5jcmVhdGVSYW5nZSgpLGIubW92ZVRvUG9zaXRpb24odGhpcyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksYi5zZWxlY3QoKSl9KTt0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGIpe2lmKGEucmVhZE9ubHkpcmV0dXJuITE7XHJcbmI9e2VsZW1lbnQ6Yi5kYXRhLmdldFRhcmdldCgpfTthLmZpcmUoXCJkb3VibGVjbGlja1wiLGIpfSk7Q0tFRElUT1IuZW52LmllJiZ0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJjbGlja1wiLGIpO0NLRURJVE9SLmVudi5pZSYmIUNLRURJVE9SLmVudi5lZGdlfHx0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJtb3VzZWRvd25cIixmdW5jdGlvbihiKXt2YXIgYz1iLmRhdGEuZ2V0VGFyZ2V0KCk7Yy5pcyhcImltZ1wiLFwiaHJcIixcImlucHV0XCIsXCJ0ZXh0YXJlYVwiLFwic2VsZWN0XCIpJiYhYy5pc1JlYWRPbmx5KCkmJihhLmdldFNlbGVjdGlvbigpLnNlbGVjdEVsZW1lbnQoYyksYy5pcyhcImlucHV0XCIsXCJ0ZXh0YXJlYVwiLFwic2VsZWN0XCIpJiZiLmRhdGEucHJldmVudERlZmF1bHQoKSl9KTtDS0VESVRPUi5lbnYuZWRnZSYmdGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwibW91c2V1cFwiLGZ1bmN0aW9uKGIpeyhiPWIuZGF0YS5nZXRUYXJnZXQoKSkmJmIuaXMoXCJpbWdcIikmJmEuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudChiKX0pO1xyXG5DS0VESVRPUi5lbnYuZ2Vja28mJnRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcIm1vdXNldXBcIixmdW5jdGlvbihiKXtpZigyPT1iLmRhdGEuJC5idXR0b24mJihiPWIuZGF0YS5nZXRUYXJnZXQoKSwhYi5nZXRPdXRlckh0bWwoKS5yZXBsYWNlKEIsXCJcIikpKXt2YXIgYz1hLmNyZWF0ZVJhbmdlKCk7Yy5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGIpO2Muc2VsZWN0KCEwKX19KTtDS0VESVRPUi5lbnYud2Via2l0JiYodGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwiY2xpY2tcIixmdW5jdGlvbihhKXthLmRhdGEuZ2V0VGFyZ2V0KCkuaXMoXCJpbnB1dFwiLFwic2VsZWN0XCIpJiZhLmRhdGEucHJldmVudERlZmF1bHQoKX0pLHRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcIm1vdXNldXBcIixmdW5jdGlvbihhKXthLmRhdGEuZ2V0VGFyZ2V0KCkuaXMoXCJpbnB1dFwiLFwidGV4dGFyZWFcIikmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSkpO0NLRURJVE9SLmVudi53ZWJraXQmJnRoaXMuYXR0YWNoTGlzdGVuZXIoYSxcclxuXCJrZXlcIixmdW5jdGlvbihiKXtpZihhLnJlYWRPbmx5KXJldHVybiEwO2I9Yi5kYXRhLmRvbUV2ZW50LmdldEtleSgpO2lmKGIgaW4gbCl7dmFyIGM9OD09YixkPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKClbMF07Yj1kLnN0YXJ0UGF0aCgpO2lmKGQuY29sbGFwc2VkKWE6e3ZhciBoPWIuYmxvY2s7aWYoaCYmZFtjP1wiY2hlY2tTdGFydE9mQmxvY2tcIjpcImNoZWNrRW5kT2ZCbG9ja1wiXSgpJiZkLm1vdmVUb0Nsb3Nlc3RFZGl0YWJsZVBvc2l0aW9uKGgsIWMpJiZkLmNvbGxhcHNlZCl7aWYoZC5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe3ZhciBlPWQuc3RhcnRDb250YWluZXIuZ2V0Q2hpbGQoZC5zdGFydE9mZnNldC0oYz8xOjApKTtpZihlJiZlLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZS5pcyhcImhyXCIpKXthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7ZS5yZW1vdmUoKTtiPSEwO2JyZWFrIGF9fWQ9ZC5zdGFydFBhdGgoKS5ibG9jaztpZighZHx8XHJcbmQmJmQuY29udGFpbnMoaCkpYj12b2lkIDA7ZWxzZXthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7dmFyIG07KG09KGM/ZDpoKS5nZXRCb2d1cygpKSYmbS5yZW1vdmUoKTttPWEuZ2V0U2VsZWN0aW9uKCk7ZT1tLmNyZWF0ZUJvb2ttYXJrcygpOyhjP2g6ZCkubW92ZUNoaWxkcmVuKGM/ZDpoLCExKTtiLmxhc3RFbGVtZW50Lm1lcmdlU2libGluZ3MoKTt3KGgsZCwhYyk7bS5zZWxlY3RCb29rbWFya3MoZSk7Yj0hMH19ZWxzZSBiPSExfWVsc2UgYz1kLG09Yi5ibG9jayxkPWMuZW5kUGF0aCgpLmJsb2NrLG0mJmQmJiFtLmVxdWFscyhkKT8oYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLChoPW0uZ2V0Qm9ndXMoKSkmJmgucmVtb3ZlKCksYy5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfSU5MSU5FKSxjLmRlbGV0ZUNvbnRlbnRzKCksZC5nZXRQYXJlbnQoKSYmKGQubW92ZUNoaWxkcmVuKG0sITEpLGIubGFzdEVsZW1lbnQubWVyZ2VTaWJsaW5ncygpLHcobSxkLCEwKSksYz1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdLFxyXG5jLmNvbGxhcHNlKDEpLGMub3B0aW1pemUoKSxcIlwiPT09Yy5zdGFydENvbnRhaW5lci5nZXRIdG1sKCkmJmMuc3RhcnRDb250YWluZXIuYXBwZW5kQm9ndXMoKSxjLnNlbGVjdCgpLGI9ITApOmI9ITE7aWYoIWIpcmV0dXJuO2EuZ2V0U2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKTthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7cmV0dXJuITF9fSx0aGlzLG51bGwsMTAwKX19fSxfOntkZXRhY2g6ZnVuY3Rpb24oKXt0aGlzLmVkaXRvci5zZXREYXRhKHRoaXMuZWRpdG9yLmdldERhdGEoKSwwLDEpO3RoaXMuY2xlYXJMaXN0ZW5lcnMoKTt0aGlzLnJlc3RvcmVBdHRycygpO3ZhciBhO2lmKGE9dGhpcy5yZW1vdmVDdXN0b21EYXRhKFwiY2xhc3Nlc1wiKSlmb3IoO2EubGVuZ3RoOyl0aGlzLnJlbW92ZUNsYXNzKGEucG9wKCkpO2lmKCF0aGlzLmlzKFwidGV4dGFyZWFcIikpe2E9dGhpcy5nZXREb2N1bWVudCgpO3ZhciBiPWEuZ2V0SGVhZCgpO2lmKGIuZ2V0Q3VzdG9tRGF0YShcInN0eWxlc2hlZXRcIikpe3ZhciBjPVxyXG5hLmdldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0X3JlZlwiKTstLWM/YS5zZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldF9yZWZcIixjKTooYS5yZW1vdmVDdXN0b21EYXRhKFwic3R5bGVzaGVldF9yZWZcIiksYi5yZW1vdmVDdXN0b21EYXRhKFwic3R5bGVzaGVldFwiKS5yZW1vdmUoKSl9fXRoaXMuZWRpdG9yLmZpcmUoXCJjb250ZW50RG9tVW5sb2FkXCIpO2RlbGV0ZSB0aGlzLmVkaXRvcn19fSk7Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5lZGl0YWJsZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl8uZWRpdGFibGU7aWYoYiYmYSlyZXR1cm4gMDthcmd1bWVudHMubGVuZ3RoJiYoYj10aGlzLl8uZWRpdGFibGU9YT9hIGluc3RhbmNlb2YgQ0tFRElUT1IuZWRpdGFibGU/YTpuZXcgQ0tFRElUT1IuZWRpdGFibGUodGhpcyxhKTooYiYmYi5kZXRhY2goKSxudWxsKSk7cmV0dXJuIGJ9O0NLRURJVE9SLm9uKFwiaW5zdGFuY2VMb2FkZWRcIixmdW5jdGlvbihiKXt2YXIgYz1iLmVkaXRvcjtjLm9uKFwiaW5zZXJ0RWxlbWVudFwiLFxyXG5mdW5jdGlvbihhKXthPWEuZGF0YTthLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGEuaXMoXCJpbnB1dFwiKXx8YS5pcyhcInRleHRhcmVhXCIpKSYmKFwiZmFsc2VcIiE9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJmEuZGF0YShcImNrZS1lZGl0YWJsZVwiLGEuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP1widHJ1ZVwiOlwiMVwiKSxhLnNldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiLCExKSl9KTtjLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYil7aWYoIWMucmVhZE9ubHkpe3ZhciBkPWMuZ2V0U2VsZWN0aW9uKCk7ZCYmIWQuaXNMb2NrZWQmJihkPWMuY2hlY2tEaXJ0eSgpLGMuZmlyZShcImxvY2tTbmFwc2hvdFwiKSxhKGIpLGMuZmlyZShcInVubG9ja1NuYXBzaG90XCIpLCFkJiZjLnJlc2V0RGlydHkoKSl9fSl9KTtDS0VESVRPUi5vbihcImluc3RhbmNlQ3JlYXRlZFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZWRpdG9yO2Iub24oXCJtb2RlXCIsZnVuY3Rpb24oKXt2YXIgYT1cclxuYi5lZGl0YWJsZSgpO2lmKGEmJmEuaXNJbmxpbmUoKSl7dmFyIGM9Yi50aXRsZTthLmNoYW5nZUF0dHIoXCJyb2xlXCIsXCJ0ZXh0Ym94XCIpO2EuY2hhbmdlQXR0cihcImFyaWEtbGFiZWxcIixjKTtjJiZhLmNoYW5nZUF0dHIoXCJ0aXRsZVwiLGMpO3ZhciBkPWIuZmlyZShcImFyaWFFZGl0b3JIZWxwTGFiZWxcIix7fSkubGFiZWw7aWYoZCYmKGM9dGhpcy51aS5zcGFjZSh0aGlzLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FP1widG9wXCI6XCJjb250ZW50c1wiKSkpe3ZhciBlPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpLGQ9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjc3BhbiBpZFxceDNkXCInK2UrJ1wiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2UnK2QrXCJcXHgzYy9zcGFuXFx4M2VcIik7Yy5hcHBlbmQoZCk7YS5jaGFuZ2VBdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLGUpfX19KX0pO0NLRURJVE9SLmFkZENzcyhcIi5ja2VfZWRpdGFibGV7Y3Vyc29yOnRleHR9LmNrZV9lZGl0YWJsZSBpbWcsLmNrZV9lZGl0YWJsZSBpbnB1dCwuY2tlX2VkaXRhYmxlIHRleHRhcmVhe2N1cnNvcjpkZWZhdWx0fVwiKTtcclxudmFyIGY9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCkseD1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExLCEwKSxBPUNLRURJVE9SLmRvbS53YWxrZXIuZW1wdHkoKSx1PUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKSxCPS8oXnw8Ym9keVxcYltePl0qPilcXHMqPChwfGRpdnxhZGRyZXNzfGhcXGR8Y2VudGVyfHByZSlbXj5dKj5cXHMqKD86PGJyW14+XSo+fCZuYnNwO3xcXHUwMEEwfCYjMTYwOyk/XFxzKig6PzxcXC9cXDI+KT9cXHMqKD89JHw8XFwvYm9keT4pL2dpLHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe3JldHVybiBiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVH1mdW5jdGlvbiBiKGMsZCl7dmFyIGUsbSxmLHAsZz1bXSxsPWQucmFuZ2Uuc3RhcnRDb250YWluZXI7ZT1kLnJhbmdlLnN0YXJ0UGF0aCgpO2Zvcih2YXIgbD1xW2wuZ2V0TmFtZSgpXSxyPTAsaz1jLmdldENoaWxkcmVuKCksQz1rLmNvdW50KCksRz0tMSxuPS0xLHc9MCxLPWUuY29udGFpbnMocS4kbGlzdCk7cjxcclxuQzsrK3IpZT1rLmdldEl0ZW0ociksYShlKT8oZj1lLmdldE5hbWUoKSxLJiZmIGluIENLRURJVE9SLmR0ZC4kbGlzdD9nPWcuY29uY2F0KGIoZSxkKSk6KHA9ISFsW2ZdLFwiYnJcIiE9Znx8IWUuZGF0YShcImNrZS1lb2xcIil8fHImJnIhPUMtMXx8KHc9KG09cj9nW3ItMV0ubm9kZTprLmdldEl0ZW0ocisxKSkmJighYShtKXx8IW0uaXMoXCJiclwiKSksbT1tJiZhKG0pJiZxLiRibG9ja1ttLmdldE5hbWUoKV0pLC0xIT1HfHxwfHwoRz1yKSxwfHwobj1yKSxnLnB1c2goe2lzRWxlbWVudDoxLGlzTGluZUJyZWFrOncsaXNCbG9jazplLmlzQmxvY2tCb3VuZGFyeSgpLGhhc0Jsb2NrU2libGluZzptLG5vZGU6ZSxuYW1lOmYsYWxsb3dlZDpwfSksbT13PTApKTpnLnB1c2goe2lzRWxlbWVudDowLG5vZGU6ZSxhbGxvd2VkOjF9KTstMTxHJiYoZ1tHXS5maXJzdE5vdEFsbG93ZWQ9MSk7LTE8biYmKGdbbl0ubGFzdE5vdEFsbG93ZWQ9MSk7cmV0dXJuIGd9ZnVuY3Rpb24gZChiLGMpe3ZhciBlPVtdLFxyXG5oPWIuZ2V0Q2hpbGRyZW4oKSxtPWguY291bnQoKSxmLGc9MCxsPXFbY10scj0hYi5pcyhxLiRpbmxpbmUpfHxiLmlzKFwiYnJcIik7Zm9yKHImJmUucHVzaChcIiBcIik7ZzxtO2crKylmPWguZ2V0SXRlbShnKSxhKGYpJiYhZi5pcyhsKT9lPWUuY29uY2F0KGQoZixjKSk6ZS5wdXNoKGYpO3ImJmUucHVzaChcIiBcIik7cmV0dXJuIGV9ZnVuY3Rpb24gZShiKXtyZXR1cm4gYShiLnN0YXJ0Q29udGFpbmVyKSYmYi5zdGFydENvbnRhaW5lci5nZXRDaGlsZChiLnN0YXJ0T2Zmc2V0LTEpfWZ1bmN0aW9uIGYoYil7cmV0dXJuIGImJmEoYikmJihiLmlzKHEuJHJlbW92ZUVtcHR5KXx8Yi5pcyhcImFcIikmJiFiLmlzQmxvY2tCb3VuZGFyeSgpKX1mdW5jdGlvbiBnKGIsYyxkLGUpe3ZhciBoPWIuY2xvbmUoKSxtLGY7aC5zZXRFbmRBdChjLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpOyhtPShuZXcgQ0tFRElUT1IuZG9tLndhbGtlcihoKSkubmV4dCgpKSYmYShtKSYmblttLmdldE5hbWUoKV0mJlxyXG4oZj1tLmdldFByZXZpb3VzKCkpJiZhKGYpJiYhZi5nZXRQYXJlbnQoKS5lcXVhbHMoYi5zdGFydENvbnRhaW5lcikmJmQuY29udGFpbnMoZikmJmUuY29udGFpbnMobSkmJm0uaXNJZGVudGljYWwoZikmJihtLm1vdmVDaGlsZHJlbihmKSxtLnJlbW92ZSgpLGcoYixjLGQsZSkpfWZ1bmN0aW9uIEcoYixjKXtmdW5jdGlvbiBkKGIsYyl7aWYoYy5pc0Jsb2NrJiZjLmlzRWxlbWVudCYmIWMubm9kZS5pcyhcImJyXCIpJiZhKGIpJiZiLmlzKFwiYnJcIikpcmV0dXJuIGIucmVtb3ZlKCksMX12YXIgZT1jLmVuZENvbnRhaW5lci5nZXRDaGlsZChjLmVuZE9mZnNldCksaD1jLmVuZENvbnRhaW5lci5nZXRDaGlsZChjLmVuZE9mZnNldC0xKTtlJiZkKGUsYltiLmxlbmd0aC0xXSk7aCYmZChoLGJbMF0pJiYoYy5zZXRFbmQoYy5lbmRDb250YWluZXIsYy5lbmRPZmZzZXQtMSksYy5jb2xsYXBzZSgpKX12YXIgcT1DS0VESVRPUi5kdGQsbj17cDoxLGRpdjoxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxcclxuaDY6MSx1bDoxLG9sOjEsbGk6MSxwcmU6MSxkbDoxLGJsb2NrcXVvdGU6MX0sdz17cDoxLGRpdjoxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxfSxNPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxxLiRpbmxpbmUpO2RlbGV0ZSBNLmJyO3JldHVybiBmdW5jdGlvbihuLHYsRCxJKXt2YXIgRT1uLmVkaXRvcixMPSExO1widW5maWx0ZXJlZF9odG1sXCI9PXYmJih2PVwiaHRtbFwiLEw9ITApO2lmKCFJLmNoZWNrUmVhZE9ubHkoKSl7dmFyIEo9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoSS5zdGFydENvbnRhaW5lcixJLnJvb3QpKS5ibG9ja0xpbWl0fHxJLnJvb3Q7bj17dHlwZTp2LGRvbnRGaWx0ZXI6TCxlZGl0YWJsZTpuLGVkaXRvcjpFLHJhbmdlOkksYmxvY2tMaW1pdDpKLG1lcmdlQ2FuZGlkYXRlczpbXSx6b21iaWVzOltdfTt2PW4ucmFuZ2U7ST1uLm1lcmdlQ2FuZGlkYXRlczt2YXIgSyx1O1widGV4dFwiPT1uLnR5cGUmJnYuc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5ULFxyXG4hMCwhMSkmJihLPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKFwiXFx4M2NzcGFuXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlXCIsdi5kb2N1bWVudCksdi5pbnNlcnROb2RlKEspLHYuc2V0U3RhcnRBZnRlcihLKSk7TD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHYuc3RhcnRDb250YWluZXIpO24uZW5kUGF0aD1KPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodi5lbmRDb250YWluZXIpO2lmKCF2LmNvbGxhcHNlZCl7dmFyIEU9Si5ibG9ja3x8Si5ibG9ja0xpbWl0LHk9di5nZXRDb21tb25BbmNlc3RvcigpO0UmJiFFLmVxdWFscyh5KSYmIUUuY29udGFpbnMoeSkmJnYuY2hlY2tFbmRPZkJsb2NrKCkmJm4uem9tYmllcy5wdXNoKEUpO3YuZGVsZXRlQ29udGVudHMoKX1mb3IoOyh1PWUodikpJiZhKHUpJiZ1LmlzQmxvY2tCb3VuZGFyeSgpJiZMLmNvbnRhaW5zKHUpOyl2Lm1vdmVUb1Bvc2l0aW9uKHUsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7XHJcbmcodixuLmJsb2NrTGltaXQsTCxKKTtLJiYodi5zZXRFbmRCZWZvcmUoSyksdi5jb2xsYXBzZSgpLEsucmVtb3ZlKCkpO0s9di5zdGFydFBhdGgoKTtpZihFPUsuY29udGFpbnMoZiwhMSwxKSl2LnNwbGl0RWxlbWVudChFKSxuLmlubGluZVN0eWxlc1Jvb3Q9RSxuLmlubGluZVN0eWxlc1BlYWs9Sy5sYXN0RWxlbWVudDtLPXYuY3JlYXRlQm9va21hcmsoKTsoRT1LLnN0YXJ0Tm9kZS5nZXRQcmV2aW91cyhjKSkmJmEoRSkmJmYoRSkmJkkucHVzaChFKTsoRT1LLnN0YXJ0Tm9kZS5nZXROZXh0KGMpKSYmYShFKSYmZihFKSYmSS5wdXNoKEUpO2ZvcihFPUsuc3RhcnROb2RlOyhFPUUuZ2V0UGFyZW50KCkpJiZmKEUpOylJLnB1c2goRSk7di5tb3ZlVG9Cb29rbWFyayhLKTtpZihLPUQpe0s9bi5yYW5nZTtpZihcInRleHRcIj09bi50eXBlJiZuLmlubGluZVN0eWxlc1Jvb3Qpe3U9bi5pbmxpbmVTdHlsZXNQZWFrO3Y9dS5nZXREb2N1bWVudCgpLmNyZWF0ZVRleHQoXCJ7Y2tlLXBlYWt9XCIpO2ZvcihJPVxyXG5uLmlubGluZVN0eWxlc1Jvb3QuZ2V0UGFyZW50KCk7IXUuZXF1YWxzKEkpOyl2PXYuYXBwZW5kVG8odS5jbG9uZSgpKSx1PXUuZ2V0UGFyZW50KCk7RD12LmdldE91dGVySHRtbCgpLnNwbGl0KFwie2NrZS1wZWFrfVwiKS5qb2luKEQpfXU9bi5ibG9ja0xpbWl0LmdldE5hbWUoKTtpZigvXlxccyt8XFxzKyQvLnRlc3QoRCkmJlwic3BhblwiaW4gQ0tFRElUT1IuZHRkW3VdKXt2YXIgQT0nXFx4M2NzcGFuIGRhdGEtY2tlLW1hcmtlclxceDNkXCIxXCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2UnO0Q9QStEK0F9RD1uLmVkaXRvci5kYXRhUHJvY2Vzc29yLnRvSHRtbChELHtjb250ZXh0Om51bGwsZml4Rm9yQm9keTohMSxwcm90ZWN0ZWRXaGl0ZXNwYWNlczohIUEsZG9udEZpbHRlcjpuLmRvbnRGaWx0ZXIsZmlsdGVyOm4uZWRpdG9yLmFjdGl2ZUZpbHRlcixlbnRlck1vZGU6bi5lZGl0b3IuYWN0aXZlRW50ZXJNb2RlfSk7dT1LLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO3Uuc2V0SHRtbChEKTtcclxuQSYmKHUuZ2V0Rmlyc3QoKS5yZW1vdmUoKSx1LmdldExhc3QoKS5yZW1vdmUoKSk7aWYoKEE9Sy5zdGFydFBhdGgoKS5ibG9jaykmJigxIT1BLmdldENoaWxkQ291bnQoKXx8IUEuZ2V0Qm9ndXMoKSkpYTp7dmFyIHg7aWYoMT09dS5nZXRDaGlsZENvdW50KCkmJmEoeD11LmdldEZpcnN0KCkpJiZ4LmlzKHcpJiYheC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpe0E9eC5nZXRFbGVtZW50c0J5VGFnKFwiKlwiKTtLPTA7Zm9yKEk9QS5jb3VudCgpO0s8STtLKyspaWYodj1BLmdldEl0ZW0oSyksIXYuaXMoTSkpYnJlYWsgYTt4Lm1vdmVDaGlsZHJlbih4LmdldFBhcmVudCgxKSk7eC5yZW1vdmUoKX19bi5kYXRhV3JhcHBlcj11O0s9RH1pZihLKXt4PW4ucmFuZ2U7Sz14LmRvY3VtZW50O3ZhciB0O3U9bi5ibG9ja0xpbWl0O0k9MDt2YXIgQixBPVtdLE4sVDtEPUU9MDt2YXIgRixXO3Y9eC5zdGFydENvbnRhaW5lcjt2YXIgTD1uLmVuZFBhdGguZWxlbWVudHNbMF0sWCxKPUwuZ2V0UG9zaXRpb24odiksXHJcbnk9ISFMLmdldENvbW1vbkFuY2VzdG9yKHYpJiZKIT1DS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUwmJiEoSiZDS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUytDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUQpO3Y9YihuLmRhdGFXcmFwcGVyLG4pO2ZvcihHKHYseCk7STx2Lmxlbmd0aDtJKyspe0o9dltJXTtpZih0PUouaXNMaW5lQnJlYWspe3Q9eDtGPXU7dmFyIFM9dm9pZCAwLGFhPXZvaWQgMDtKLmhhc0Jsb2NrU2libGluZz90PTE6KFM9dC5zdGFydENvbnRhaW5lci5nZXRBc2NlbmRhbnQocS4kYmxvY2ssMSkpJiZTLmlzKHtkaXY6MSxwOjF9KT8oYWE9Uy5nZXRQb3NpdGlvbihGKSxhYT09Q0tFRElUT1IuUE9TSVRJT05fSURFTlRJQ0FMfHxhYT09Q0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlM/dD0wOihGPXQuc3BsaXRFbGVtZW50KFMpLHQubW92ZVRvUG9zaXRpb24oRixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksdD0xKSk6dD0wfWlmKHQpRD0wPEk7ZWxzZXt0PVxyXG54LnN0YXJ0UGF0aCgpOyFKLmlzQmxvY2smJmwobi5lZGl0b3IsdC5ibG9jayx0LmJsb2NrTGltaXQpJiYoVD1rKG4uZWRpdG9yKSkmJihUPUsuY3JlYXRlRWxlbWVudChUKSxULmFwcGVuZEJvZ3VzKCkseC5pbnNlcnROb2RlKFQpLENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyJiYoQj1ULmdldEJvZ3VzKCkpJiZCLnJlbW92ZSgpLHgubW92ZVRvUG9zaXRpb24oVCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSk7aWYoKHQ9eC5zdGFydFBhdGgoKS5ibG9jaykmJiF0LmVxdWFscyhOKSl7aWYoQj10LmdldEJvZ3VzKCkpQi5yZW1vdmUoKSxBLnB1c2godCk7Tj10fUouZmlyc3ROb3RBbGxvd2VkJiYoRT0xKTtpZihFJiZKLmlzRWxlbWVudCl7dD14LnN0YXJ0Q29udGFpbmVyO2ZvcihGPW51bGw7dCYmIXFbdC5nZXROYW1lKCldW0oubmFtZV07KXtpZih0LmVxdWFscyh1KSl7dD1udWxsO2JyZWFrfUY9dDt0PXQuZ2V0UGFyZW50KCl9aWYodClGJiYoVz14LnNwbGl0RWxlbWVudChGKSxcclxubi56b21iaWVzLnB1c2goVyksbi56b21iaWVzLnB1c2goRikpO2Vsc2V7Rj11LmdldE5hbWUoKTtYPSFJO3Q9ST09di5sZW5ndGgtMTtGPWQoSi5ub2RlLEYpO2Zvcih2YXIgUz1bXSxhYT1GLmxlbmd0aCxjYT0wLGVhPXZvaWQgMCxZPTAsVT0tMTtjYTxhYTtjYSsrKWVhPUZbY2FdLFwiIFwiPT1lYT8oWXx8WCYmIWNhfHwoUy5wdXNoKG5ldyBDS0VESVRPUi5kb20udGV4dChcIiBcIikpLFU9Uy5sZW5ndGgpLFk9MSk6KFMucHVzaChlYSksWT0wKTt0JiZVPT1TLmxlbmd0aCYmUy5wb3AoKTtYPVN9fWlmKFgpe2Zvcig7dD1YLnBvcCgpOyl4Lmluc2VydE5vZGUodCk7WD0wfWVsc2UgeC5pbnNlcnROb2RlKEoubm9kZSk7Si5sYXN0Tm90QWxsb3dlZCYmSTx2Lmxlbmd0aC0xJiYoKFc9eT9MOlcpJiZ4LnNldEVuZEF0KFcsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpLEU9MCk7eC5jb2xsYXBzZSgpfX0xIT12Lmxlbmd0aD9CPSExOihCPXZbMF0sQj1CLmlzRWxlbWVudCYmXCJmYWxzZVwiPT1cclxuQi5ub2RlLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSk7QiYmKEQ9ITAsdD12WzBdLm5vZGUseC5zZXRTdGFydEF0KHQsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSx4LnNldEVuZEF0KHQsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSk7bi5kb250TW92ZUNhcmV0PUQ7bi5ib2d1c05lZWRlZEJsb2Nrcz1BfUI9bi5yYW5nZTt2YXIgUDtXPW4uYm9ndXNOZWVkZWRCbG9ja3M7Zm9yKFg9Qi5jcmVhdGVCb29rbWFyaygpO049bi56b21iaWVzLnBvcCgpOylOLmdldFBhcmVudCgpJiYoVD1CLmNsb25lKCksVC5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KE4pLFQucmVtb3ZlRW1wdHlCbG9ja3NBdEVuZCgpKTtpZihXKWZvcig7Tj1XLnBvcCgpOylDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcj9OLmFwcGVuZEJvZ3VzKCk6Ti5hcHBlbmQoQi5kb2N1bWVudC5jcmVhdGVUZXh0KFwiwqBcIikpO2Zvcig7Tj1uLm1lcmdlQ2FuZGlkYXRlcy5wb3AoKTspTi5tZXJnZVNpYmxpbmdzKCk7XHJcbkIubW92ZVRvQm9va21hcmsoWCk7aWYoIW4uZG9udE1vdmVDYXJldCl7Zm9yKE49ZShCKTtOJiZhKE4pJiYhTi5pcyhxLiRlbXB0eSk7KXtpZihOLmlzQmxvY2tCb3VuZGFyeSgpKUIubW92ZVRvUG9zaXRpb24oTixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtlbHNle2lmKGYoTikmJk4uZ2V0SHRtbCgpLm1hdGNoKC8oXFxzfCZuYnNwOykkL2cpKXtQPW51bGw7YnJlYWt9UD1CLmNsb25lKCk7UC5tb3ZlVG9Qb3NpdGlvbihOLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpfU49Ti5nZXRMYXN0KGMpfVAmJkIubW92ZVRvUmFuZ2UoUCl9fX19KCkseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7Yj1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihiKTtiLmd1YXJkPWZ1bmN0aW9uKGEsYil7aWYoYilyZXR1cm4hMTtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gYS5pcyhDS0VESVRPUi5kdGQuJHRhYmxlQ29udGVudCl9O2IuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PVxyXG5DS0VESVRPUi5OT0RFX0VMRU1FTlR9O3JldHVybiBifWZ1bmN0aW9uIGIoYSxjLGQpe2M9YS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoYyk7YS5hcHBlbmQoYyxkKTtyZXR1cm4gY31mdW5jdGlvbiBjKGEpe3ZhciBiPWEuY291bnQoKSxkO2ZvcihiOzA8Yi0tOylkPWEuZ2V0SXRlbShiKSxDS0VESVRPUi50b29scy50cmltKGQuZ2V0SHRtbCgpKXx8KGQuYXBwZW5kQm9ndXMoKSxDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24mJmQuZ2V0Q2hpbGRDb3VudCgpJiZkLmdldEZpcnN0KCkucmVtb3ZlKCkpfXJldHVybiBmdW5jdGlvbihkKXt2YXIgZT1kLnN0YXJ0Q29udGFpbmVyLGY9ZS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiLDEpLGc9ITE7YyhmLmdldEVsZW1lbnRzQnlUYWcoXCJ0ZFwiKSk7YyhmLmdldEVsZW1lbnRzQnlUYWcoXCJ0aFwiKSk7Zj1kLmNsb25lKCk7Zi5zZXRTdGFydChlLDApO2Y9YShmKS5sYXN0QmFja3dhcmQoKTtmfHwoZj1kLmNsb25lKCksZi5zZXRFbmRBdChlLFxyXG5DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSxmPWEoZikubGFzdEZvcndhcmQoKSxnPSEwKTtmfHwoZj1lKTtmLmlzKFwidGFibGVcIik/KGQuc2V0U3RhcnRBdChmLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksZC5jb2xsYXBzZSghMCksZi5yZW1vdmUoKSk6KGYuaXMoe3Rib2R5OjEsdGhlYWQ6MSx0Zm9vdDoxfSkmJihmPWIoZixcInRyXCIsZykpLGYuaXMoXCJ0clwiKSYmKGY9YihmLGYuZ2V0UGFyZW50KCkuaXMoXCJ0aGVhZFwiKT9cInRoXCI6XCJ0ZFwiLGcpKSwoZT1mLmdldEJvZ3VzKCkpJiZlLnJlbW92ZSgpLGQubW92ZVRvUG9zaXRpb24oZixnP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpKX19KCksRj17ZW9sOntkZXRlY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJhbmdlLGQ9Yy5jbG9uZSgpLGU9Yy5jbG9uZSgpLGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLnN0YXJ0Q29udGFpbmVyLGIpLGc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLmVuZENvbnRhaW5lcixcclxuYik7ZC5jb2xsYXBzZSgxKTtlLmNvbGxhcHNlKCk7Zi5ibG9jayYmZC5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGYuYmxvY2ssQ0tFRElUT1IuRU5EKSYmKGMuc2V0U3RhcnRBZnRlcihmLmJsb2NrKSxhLnByZXBlbmRFb2xCcj0xKTtnLmJsb2NrJiZlLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoZy5ibG9jayxDS0VESVRPUi5TVEFSVCkmJihjLnNldEVuZEJlZm9yZShnLmJsb2NrKSxhLmFwcGVuZEVvbEJyPTEpfSxmaXg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmdldERvY3VtZW50KCksZDthLmFwcGVuZEVvbEJyJiYoZD10aGlzLmNyZWF0ZUVvbEJyKGMpLGEuZnJhZ21lbnQuYXBwZW5kKGQpKTshYS5wcmVwZW5kRW9sQnJ8fGQmJiFkLmdldFByZXZpb3VzKCl8fGEuZnJhZ21lbnQuYXBwZW5kKHRoaXMuY3JlYXRlRW9sQnIoYyksMSl9LGNyZWF0ZUVvbEJyOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNyZWF0ZUVsZW1lbnQoXCJiclwiLHthdHRyaWJ1dGVzOntcImRhdGEtY2tlLWVvbFwiOjF9fSl9fSxcclxuYm9ndXM6e2V4Y2x1ZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yYW5nZS5nZXRCb3VuZGFyeU5vZGVzKCksYz1iLnN0YXJ0Tm9kZSxiPWIuZW5kTm9kZTshYnx8IXUoYil8fGMmJmMuZXF1YWxzKGIpfHxhLnJhbmdlLnNldEVuZEJlZm9yZShiKX19LHRyZWU6e3JlYnVpbGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJhbmdlLGQ9Yy5nZXRDb21tb25BbmNlc3RvcigpLGU9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChkLGIpLGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLnN0YXJ0Q29udGFpbmVyLGIpLGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLmVuZENvbnRhaW5lcixiKSxnO2QudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZD1kLmdldFBhcmVudCgpKTtpZihlLmJsb2NrTGltaXQuaXMoe3RyOjEsdGFibGU6MX0pKXt2YXIgbD1lLmNvbnRhaW5zKFwidGFibGVcIikuZ2V0UGFyZW50KCk7Zz1mdW5jdGlvbihhKXtyZXR1cm4hYS5lcXVhbHMobCl9fWVsc2UgaWYoZS5ibG9jayYmXHJcbmUuYmxvY2suaXMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSkmJihmPWYuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0KSxjPWMuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0KSwhZi5lcXVhbHMoYykpKXt2YXIgaz1lLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCkuZ2V0UGFyZW50KCk7Zz1mdW5jdGlvbihhKXtyZXR1cm4hYS5lcXVhbHMoayl9fWd8fChnPWZ1bmN0aW9uKGEpe3JldHVybiFhLmVxdWFscyhlLmJsb2NrKSYmIWEuZXF1YWxzKGUuYmxvY2tMaW1pdCl9KTt0aGlzLnJlYnVpbGRGcmFnbWVudChhLGIsZCxnKX0scmVidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZTtjJiYhYy5lcXVhbHMoYikmJmQoYyk7KWU9Yy5jbG9uZSgwLDEpLGEuZnJhZ21lbnQuYXBwZW5kVG8oZSksYS5mcmFnbWVudD1lLGM9Yy5nZXRQYXJlbnQoKX19LGNlbGw6e3NocmluazpmdW5jdGlvbihhKXthPWEucmFuZ2U7dmFyIGI9YS5zdGFydENvbnRhaW5lcixjPWEuZW5kQ29udGFpbmVyLFxyXG5kPWEuc3RhcnRPZmZzZXQsZT1hLmVuZE9mZnNldDtiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5lcXVhbHMoYykmJmIuaXMoXCJ0clwiKSYmKytkPT1lJiZhLnNocmluayhDS0VESVRPUi5TSFJJTktfVEVYVCl9fX0sdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXt2YXIgZD1iLmdldFBhcmVudCgpO2lmKGQuaXMoQ0tFRElUT1IuZHRkLiRpbmxpbmUpKWJbYz9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oZCl9ZnVuY3Rpb24gYihjLGQsZSl7YShkKTthKGUsMSk7Zm9yKHZhciBoO2g9ZS5nZXROZXh0KCk7KWguaW5zZXJ0QWZ0ZXIoZCksZD1oO0EoYykmJmMucmVtb3ZlKCl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBkPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYSk7ZC5zZXRTdGFydEFmdGVyKGIuc3RhcnROb2RlKTtkLnNldEVuZEJlZm9yZShiLmVuZE5vZGUpO3JldHVybiBkfXJldHVybntsaXN0OntkZXRlY3RNZXJnZTpmdW5jdGlvbihhLGIpe3ZhciBkPWMoYixhLmJvb2ttYXJrKSxcclxuZT1kLnN0YXJ0UGF0aCgpLGg9ZC5lbmRQYXRoKCksZj1lLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCksZz1oLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCk7YS5tZXJnZUxpc3Q9ZiYmZyYmZi5nZXRQYXJlbnQoKS5lcXVhbHMoZy5nZXRQYXJlbnQoKSkmJiFmLmVxdWFscyhnKTthLm1lcmdlTGlzdEl0ZW1zPWUuYmxvY2smJmguYmxvY2smJmUuYmxvY2suaXMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSkmJmguYmxvY2suaXMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSk7aWYoYS5tZXJnZUxpc3R8fGEubWVyZ2VMaXN0SXRlbXMpZD1kLmNsb25lKCksZC5zZXRTdGFydEJlZm9yZShhLmJvb2ttYXJrLnN0YXJ0Tm9kZSksZC5zZXRFbmRBZnRlcihhLmJvb2ttYXJrLmVuZE5vZGUpLGEubWVyZ2VMaXN0Qm9va21hcms9ZC5jcmVhdGVCb29rbWFyaygpfSxtZXJnZTpmdW5jdGlvbihhLGMpe2lmKGEubWVyZ2VMaXN0Qm9va21hcmspe3ZhciBkPWEubWVyZ2VMaXN0Qm9va21hcmsuc3RhcnROb2RlLFxyXG5lPWEubWVyZ2VMaXN0Qm9va21hcmsuZW5kTm9kZSxmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZCxjKSxnPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZSxjKTtpZihhLm1lcmdlTGlzdCl7dmFyIHA9Zi5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpLGw9Zy5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpO3AuZXF1YWxzKGwpfHwobC5tb3ZlQ2hpbGRyZW4ocCksbC5yZW1vdmUoKSl9YS5tZXJnZUxpc3RJdGVtcyYmKGY9Zi5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSxnPWcuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSksZi5lcXVhbHMoZyl8fGIoZyxkLGUpKTtkLnJlbW92ZSgpO2UucmVtb3ZlKCl9fX0sYmxvY2s6e2RldGVjdE1lcmdlOmZ1bmN0aW9uKGEsYil7aWYoIWEudGFibGVDb250ZW50c1JhbmdlcyYmIWEubWVyZ2VMaXN0Qm9va21hcmspe3ZhciBjPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYik7Yy5zZXRTdGFydEJlZm9yZShhLmJvb2ttYXJrLnN0YXJ0Tm9kZSk7XHJcbmMuc2V0RW5kQWZ0ZXIoYS5ib29rbWFyay5lbmROb2RlKTthLm1lcmdlQmxvY2tCb29rbWFyaz1jLmNyZWF0ZUJvb2ttYXJrKCl9fSxtZXJnZTpmdW5jdGlvbihhLGMpe2lmKGEubWVyZ2VCbG9ja0Jvb2ttYXJrJiYhYS5wdXJnZVRhYmxlQm9va21hcmspe3ZhciBkPWEubWVyZ2VCbG9ja0Jvb2ttYXJrLnN0YXJ0Tm9kZSxlPWEubWVyZ2VCbG9ja0Jvb2ttYXJrLmVuZE5vZGUsZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGQsYyksZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGUsYyksZj1mLmJsb2NrLGc9Zy5ibG9jaztmJiZnJiYhZi5lcXVhbHMoZykmJmIoZyxkLGUpO2QucmVtb3ZlKCk7ZS5yZW1vdmUoKX19fSx0YWJsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYyl7dmFyIGU9W10saCxmPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGMpLGc9Yy5zdGFydFBhdGgoKS5jb250YWlucyhkKSxtPWMuZW5kUGF0aCgpLmNvbnRhaW5zKGQpLHA9e307Zi5ndWFyZD1mdW5jdGlvbihhLFxyXG5mKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7dmFyIGw9XCJ2aXNpdGVkX1wiKyhmP1wib3V0XCI6XCJpblwiKTtpZihhLmdldEN1c3RvbURhdGEobCkpcmV0dXJuO0NLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihwLGEsbCwxKX1pZihmJiZnJiZhLmVxdWFscyhnKSloPWMuY2xvbmUoKSxoLnNldEVuZEF0KGcsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCksZS5wdXNoKGgpO2Vsc2UgaWYoIWYmJm0mJmEuZXF1YWxzKG0pKWg9Yy5jbG9uZSgpLGguc2V0U3RhcnRBdChtLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSxlLnB1c2goaCk7ZWxzZXtpZihsPSFmKWw9YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXMoZCkmJighZ3x8YihhLGcpKSYmKCFtfHxiKGEsbSkpO2wmJihoPWMuY2xvbmUoKSxoLnNlbGVjdE5vZGVDb250ZW50cyhhKSxlLnB1c2goaCkpfX07Zi5sYXN0Rm9yd2FyZCgpO0NLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhwKTtcclxucmV0dXJuIGV9ZnVuY3Rpb24gYihhLGMpe3ZhciBkPUNLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TK0NLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRCxlPWEuZ2V0UG9zaXRpb24oYyk7cmV0dXJuIGU9PT1DS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUw/ITE6MD09PShlJmQpfXZhciBkPXt0ZDoxLHRoOjEsY2FwdGlvbjoxfTtyZXR1cm57ZGV0ZWN0UHVyZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yYW5nZSxjPWIuY2xvbmUoKTtjLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9FTEVNRU5UKTt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihjKSxlPTA7Yy5ldmFsdWF0b3I9ZnVuY3Rpb24oYSl7YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXMoZCkmJisrZX07Yy5jaGVja0ZvcndhcmQoKTtpZigxPGUpe3ZhciBjPWIuc3RhcnRQYXRoKCkuY29udGFpbnMoXCJ0YWJsZVwiKSxoPWIuZW5kUGF0aCgpLmNvbnRhaW5zKFwidGFibGVcIik7YyYmaCYmYi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGMsXHJcbkNLRURJVE9SLlNUQVJUKSYmYi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGgsQ0tFRElUT1IuRU5EKSYmKGI9YS5yYW5nZS5jbG9uZSgpLGIuc2V0U3RhcnRCZWZvcmUoYyksYi5zZXRFbmRBZnRlcihoKSxhLnB1cmdlVGFibGVCb29rbWFyaz1iLmNyZWF0ZUJvb2ttYXJrKCkpfX0sZGV0ZWN0UmFuZ2VzOmZ1bmN0aW9uKGUsaCl7dmFyIGY9YyhoLGUuYm9va21hcmspLGc9Zi5jbG9uZSgpLGwsayx2PWYuZ2V0Q29tbW9uQW5jZXN0b3IoKTt2LmlzKENLRURJVE9SLmR0ZC4kdGFibGVDb250ZW50KSYmIXYuaXMoZCkmJih2PXYuZ2V0QXNjZW5kYW50KFwidGFibGVcIiwhMCkpO2s9djt2PW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZi5zdGFydENvbnRhaW5lcixrKTtrPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZi5lbmRDb250YWluZXIsayk7dj12LmNvbnRhaW5zKFwidGFibGVcIik7az1rLmNvbnRhaW5zKFwidGFibGVcIik7aWYodnx8ayl2JiZrJiZiKHYsayk/KGUudGFibGVTdXJyb3VuZGluZ1JhbmdlPVxyXG5nLGcuc2V0U3RhcnRBdCh2LENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksZy5zZXRFbmRBdChrLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksZz1mLmNsb25lKCksZy5zZXRFbmRBdCh2LENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksbD1mLmNsb25lKCksbC5zZXRTdGFydEF0KGssQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxsPWEoZykuY29uY2F0KGEobCkpKTp2P2t8fChlLnRhYmxlU3Vycm91bmRpbmdSYW5nZT1nLGcuc2V0U3RhcnRBdCh2LENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksZi5zZXRFbmRBdCh2LENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkpOihlLnRhYmxlU3Vycm91bmRpbmdSYW5nZT1nLGcuc2V0RW5kQXQoayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGYuc2V0U3RhcnRBdChrLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSksZS50YWJsZUNvbnRlbnRzUmFuZ2VzPWw/bDphKGYpfSxkZWxldGVSYW5nZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2I9XHJcbmEudGFibGVDb250ZW50c1Jhbmdlcy5wb3AoKTspYi5leHRyYWN0Q29udGVudHMoKSxBKGIuc3RhcnRDb250YWluZXIpJiZiLnN0YXJ0Q29udGFpbmVyLmFwcGVuZEJvZ3VzKCk7YS50YWJsZVN1cnJvdW5kaW5nUmFuZ2UmJmEudGFibGVTdXJyb3VuZGluZ1JhbmdlLmV4dHJhY3RDb250ZW50cygpfSxwdXJnZTpmdW5jdGlvbihhKXtpZihhLnB1cmdlVGFibGVCb29rbWFyayl7dmFyIGI9YS5kb2MsYz1hLnJhbmdlLmNsb25lKCksYj1iLmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2IuaW5zZXJ0QmVmb3JlKGEucHVyZ2VUYWJsZUJvb2ttYXJrLnN0YXJ0Tm9kZSk7Yy5tb3ZlVG9Cb29rbWFyayhhLnB1cmdlVGFibGVCb29rbWFyayk7Yy5kZWxldGVDb250ZW50cygpO2EucmFuZ2UubW92ZVRvUG9zaXRpb24oYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCl9fX19KCksZGV0ZWN0RXh0cmFjdE1lcmdlOmZ1bmN0aW9uKGEpe3JldHVybiEoYS5yYW5nZS5zdGFydFBhdGgoKS5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSYmXHJcbmEucmFuZ2UuZW5kUGF0aCgpLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pKX0sZml4VW5lZGl0YWJsZVJhbmdlUG9zaXRpb246ZnVuY3Rpb24oYSl7YS5zdGFydENvbnRhaW5lci5nZXREdGQoKVtcIiNcIl18fGEubW92ZVRvQ2xvc2VzdEVkaXRhYmxlUG9zaXRpb24obnVsbCwhMCl9LGF1dG9QYXJhZ3JhcGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnN0YXJ0UGF0aCgpLGQ7bChhLGMuYmxvY2ssYy5ibG9ja0xpbWl0KSYmKGQ9ayhhKSkmJihkPWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkKSxkLmFwcGVuZEJvZ3VzKCksYi5pbnNlcnROb2RlKGQpLGIubW92ZVRvUG9zaXRpb24oZCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCkpfX19KCl9KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGE9dGhpcy5fLmZha2VTZWxlY3Rpb24sYjthJiYoYj10aGlzLmdldFNlbGVjdGlvbigxKSxiJiZiLmlzSGlkZGVuKCl8fChhLnJlc2V0KCksYT0wKSk7aWYoIWEmJihhPWJ8fHRoaXMuZ2V0U2VsZWN0aW9uKDEpLCFhfHxhLmdldFR5cGUoKT09Q0tFRElUT1IuU0VMRUNUSU9OX05PTkUpKXJldHVybjt0aGlzLmZpcmUoXCJzZWxlY3Rpb25DaGVja1wiLGEpO2I9dGhpcy5lbGVtZW50UGF0aCgpO2IuY29tcGFyZSh0aGlzLl8uc2VsZWN0aW9uUHJldmlvdXNQYXRoKXx8KENLRURJVE9SLmVudi53ZWJraXQmJih0aGlzLl8ucHJldmlvdXNBY3RpdmU9dGhpcy5kb2N1bWVudC5nZXRBY3RpdmUoKSksdGhpcy5fLnNlbGVjdGlvblByZXZpb3VzUGF0aD1iLHRoaXMuZmlyZShcInNlbGVjdGlvbkNoYW5nZVwiLHtzZWxlY3Rpb246YSxwYXRoOmJ9KSl9ZnVuY3Rpb24gZCgpe0E9ITA7eHx8KGIuY2FsbCh0aGlzKSx4PUNLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoYixcclxuMjAwLHRoaXMpKX1mdW5jdGlvbiBiKCl7eD1udWxsO0EmJihDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGEsMCx0aGlzKSxBPSExKX1mdW5jdGlvbiBjKGEpe3JldHVybiB1KGEpfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWEuaXMoQ0tFRElUT1IuZHRkLiRlbXB0eSk/ITA6ITF9ZnVuY3Rpb24gZShhKXtmdW5jdGlvbiBiKGMsZCl7cmV0dXJuIGMmJmMudHlwZSE9Q0tFRElUT1IuTk9ERV9URVhUP2EuY2xvbmUoKVtcIm1vdmVUb0VsZW1lbnRFZGl0XCIrKGQ/XCJFbmRcIjpcIlN0YXJ0XCIpXShjKTohMX1pZighKGEucm9vdCBpbnN0YW5jZW9mIENLRURJVE9SLmVkaXRhYmxlKSlyZXR1cm4hMTt2YXIgZD1hLnN0YXJ0Q29udGFpbmVyLGU9YS5nZXRQcmV2aW91c05vZGUoYyxudWxsLGQpLGY9YS5nZXROZXh0Tm9kZShjLG51bGwsZCk7cmV0dXJuIGIoZSl8fGIoZiwxKXx8IShlfHxmfHxkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5pc0Jsb2NrQm91bmRhcnkoKSYmXHJcbmQuZ2V0Qm9ndXMoKSk/ITA6ITF9ZnVuY3Rpb24gZyhhKXtsKGEsITEpO3ZhciBiPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVUZXh0KHQpO2Euc2V0Q3VzdG9tRGF0YShcImNrZS1maWxsaW5nQ2hhclwiLGIpO3JldHVybiBifWZ1bmN0aW9uIGwoYSxiKXt2YXIgYz1hJiZhLnJlbW92ZUN1c3RvbURhdGEoXCJja2UtZmlsbGluZ0NoYXJcIik7aWYoYyl7aWYoITEhPT1iKXt2YXIgZD1hLmdldERvY3VtZW50KCkuZ2V0U2VsZWN0aW9uKCkuZ2V0TmF0aXZlKCksZT1kJiZcIk5vbmVcIiE9ZC50eXBlJiZkLmdldFJhbmdlQXQoMCksZj10Lmxlbmd0aDtpZihjLmdldExlbmd0aCgpPmYmJmUmJmUuaW50ZXJzZWN0c05vZGUoYy4kKSl7dmFyIGc9W3tub2RlOmQuYW5jaG9yTm9kZSxvZmZzZXQ6ZC5hbmNob3JPZmZzZXR9LHtub2RlOmQuZm9jdXNOb2RlLG9mZnNldDpkLmZvY3VzT2Zmc2V0fV07ZC5hbmNob3JOb2RlPT1jLiQmJmQuYW5jaG9yT2Zmc2V0PmYmJihnWzBdLm9mZnNldC09Zik7ZC5mb2N1c05vZGU9PVxyXG5jLiQmJmQuZm9jdXNPZmZzZXQ+ZiYmKGdbMV0ub2Zmc2V0LT1mKX19Yy5zZXRUZXh0KGsoYy5nZXRUZXh0KCksMSkpO2cmJihjPWEuZ2V0RG9jdW1lbnQoKS4kLGQ9Yy5nZXRTZWxlY3Rpb24oKSxjPWMuY3JlYXRlUmFuZ2UoKSxjLnNldFN0YXJ0KGdbMF0ubm9kZSxnWzBdLm9mZnNldCksYy5jb2xsYXBzZSghMCksZC5yZW1vdmVBbGxSYW5nZXMoKSxkLmFkZFJhbmdlKGMpLGQuZXh0ZW5kKGdbMV0ubm9kZSxnWzFdLm9mZnNldCkpfX1mdW5jdGlvbiBrKGEsYil7cmV0dXJuIGI/YS5yZXBsYWNlKHosZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9cIsKgXCI6XCJcIn0pOmEucmVwbGFjZSh0LFwiXCIpfWZ1bmN0aW9uIG4oYSl7dmFyIGI9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IGRhdGEtY2tlLWhpZGRlbi1zZWxcXHgzZFwiMVwiIGRhdGEtY2tlLXRlbXBcXHgzZFwiMVwiIHN0eWxlXFx4M2RcIicrKENLRURJVE9SLmVudi5pZT9cImRpc3BsYXk6bm9uZVwiOlwicG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDotMTAwMHB4XCIpK1xyXG4nXCJcXHgzZVxceDI2bmJzcDtcXHgzYy9kaXZcXHgzZScsYS5kb2N1bWVudCk7YS5maXJlKFwibG9ja1NuYXBzaG90XCIpO2EuZWRpdGFibGUoKS5hcHBlbmQoYik7dmFyIGM9YS5nZXRTZWxlY3Rpb24oMSksZD1hLmNyZWF0ZVJhbmdlKCksZT1jLnJvb3Qub24oXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbihhKXthLmNhbmNlbCgpfSxudWxsLG51bGwsMCk7ZC5zZXRTdGFydEF0KGIsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2Quc2V0RW5kQXQoYixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtjLnNlbGVjdFJhbmdlcyhbZF0pO2UucmVtb3ZlTGlzdGVuZXIoKTthLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKTthLl8uaGlkZGVuU2VsZWN0aW9uQ29udGFpbmVyPWJ9ZnVuY3Rpb24gdyhhKXt2YXIgYj17Mzc6MSwzOToxLDg6MSw0NjoxfTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Yy5kYXRhLmdldEtleXN0cm9rZSgpO2lmKGJbZF0pe3ZhciBlPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKCksXHJcbmY9ZVswXTsxPT1lLmxlbmd0aCYmZi5jb2xsYXBzZWQmJihkPWZbMzg+ZD9cImdldFByZXZpb3VzRWRpdGFibGVOb2RlXCI6XCJnZXROZXh0RWRpdGFibGVOb2RlXCJdKCkpJiZkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJmYWxzZVwiPT1kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGEuZ2V0U2VsZWN0aW9uKCkuZmFrZShkKSxjLmRhdGEucHJldmVudERlZmF1bHQoKSxjLmNhbmNlbCgpKX19fWZ1bmN0aW9uIGYoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07Yy5nZXRDb21tb25BbmNlc3RvcigpLmlzUmVhZE9ubHkoKSYmYS5zcGxpY2UoYiwxKTtpZighYy5jb2xsYXBzZWQpe2lmKGMuc3RhcnRDb250YWluZXIuaXNSZWFkT25seSgpKWZvcih2YXIgZD1jLnN0YXJ0Q29udGFpbmVyLGU7ZCYmISgoZT1kLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCkmJmQuaXMoXCJib2R5XCIpfHwhZC5pc1JlYWRPbmx5KCkpOyllJiZcImZhbHNlXCI9PVxyXG5kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKSYmYy5zZXRTdGFydEFmdGVyKGQpLGQ9ZC5nZXRQYXJlbnQoKTtkPWMuc3RhcnRDb250YWluZXI7ZT1jLmVuZENvbnRhaW5lcjt2YXIgZj1jLnN0YXJ0T2Zmc2V0LGc9Yy5lbmRPZmZzZXQsbD1jLmNsb25lKCk7ZCYmZC50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihmPj1kLmdldExlbmd0aCgpP2wuc2V0U3RhcnRBZnRlcihkKTpsLnNldFN0YXJ0QmVmb3JlKGQpKTtlJiZlLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGc/bC5zZXRFbmRBZnRlcihlKTpsLnNldEVuZEJlZm9yZShlKSk7ZD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihsKTtkLmV2YWx1YXRvcj1mdW5jdGlvbihkKXtpZihkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5pc1JlYWRPbmx5KCkpe3ZhciBlPWMuY2xvbmUoKTtjLnNldEVuZEJlZm9yZShkKTtjLmNvbGxhcHNlZCYmYS5zcGxpY2UoYi0tLDEpO2QuZ2V0UG9zaXRpb24obC5lbmRDb250YWluZXIpJlxyXG5DS0VESVRPUi5QT1NJVElPTl9DT05UQUlOU3x8KGUuc2V0U3RhcnRBZnRlcihkKSxlLmNvbGxhcHNlZHx8YS5zcGxpY2UoYisxLDAsZSkpO3JldHVybiEwfXJldHVybiExfTtkLm5leHQoKX19cmV0dXJuIGF9dmFyIHgsQSx1PUNLRURJVE9SLmRvbS53YWxrZXIuaW52aXNpYmxlKDEpLEI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1hLmVkaXRvci5jcmVhdGVSYW5nZSgpO2MubW92ZVRvQ2xvc2VzdEVkaXRhYmxlUG9zaXRpb24oYS5zZWxlY3RlZCxiKSYmYS5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKFtjXSk7cmV0dXJuITF9fWZ1bmN0aW9uIGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIuZWRpdG9yLGQ9Yy5jcmVhdGVSYW5nZSgpLGU7KGU9ZC5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihiLnNlbGVjdGVkLGEpKXx8KGU9ZC5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihiLnNlbGVjdGVkLCFhKSk7XHJcbmUmJmMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKFtkXSk7Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2Iuc2VsZWN0ZWQucmVtb3ZlKCk7ZXx8KGQubW92ZVRvRWxlbWVudEVkaXRhYmxlUG9zaXRpb24oYy5lZGl0YWJsZSgpKSxjLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbZF0pKTtjLmZpcmUoXCJzYXZlU25hcHNob3RcIik7cmV0dXJuITF9fXZhciBjPWEoKSxkPWEoMSk7cmV0dXJuezM3OmMsMzg6YywzOTpkLDQwOmQsODpiKCksNDY6YigxKX19KCk7Q0tFRElUT1Iub24oXCJpbnN0YW5jZUNyZWF0ZWRcIixmdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7dmFyIGE9ZS5nZXRTZWxlY3Rpb24oKTthJiZhLnJlbW92ZUFsbFJhbmdlcygpfXZhciBlPWIuZWRpdG9yO2Uub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7RD1uZXcgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbihlLmdldFNlbGVjdGlvbigpKTtELmxvY2soKX1mdW5jdGlvbiBjKCl7aC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixcclxuYyk7ay5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTt2YXIgYT1DS0VESVRPUi5kb2N1bWVudC4kLnNlbGVjdGlvbixiPWEuY3JlYXRlUmFuZ2UoKTtcIk5vbmVcIiE9YS50eXBlJiZiLnBhcmVudEVsZW1lbnQoKS5vd25lckRvY3VtZW50PT1mLiQmJmIuc2VsZWN0KCl9dmFyIGY9ZS5kb2N1bWVudCxoPUNLRURJVE9SLmRvY3VtZW50LGc9ZS5lZGl0YWJsZSgpLHA9Zi5nZXRCb2R5KCksaz1mLmdldERvY3VtZW50RWxlbWVudCgpLG49Zy5pc0lubGluZSgpLHYsRDtDS0VESVRPUi5lbnYuZ2Vja28mJmcuYXR0YWNoTGlzdGVuZXIoZyxcImZvY3VzXCIsZnVuY3Rpb24oYSl7YS5yZW1vdmVMaXN0ZW5lcigpOzAhPT12JiYoYT1lLmdldFNlbGVjdGlvbigpLmdldE5hdGl2ZSgpKSYmYS5pc0NvbGxhcHNlZCYmYS5hbmNob3JOb2RlPT1nLiQmJihhPWUuY3JlYXRlUmFuZ2UoKSxhLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoZyksYS5zZWxlY3QoKSl9LG51bGwsbnVsbCwtMik7Zy5hdHRhY2hMaXN0ZW5lcihnLFxyXG5DS0VESVRPUi5lbnYud2Via2l0P1wiRE9NRm9jdXNJblwiOlwiZm9jdXNcIixmdW5jdGlvbigpe3YmJkNLRURJVE9SLmVudi53ZWJraXQmJih2PWUuXy5wcmV2aW91c0FjdGl2ZSYmZS5fLnByZXZpb3VzQWN0aXZlLmVxdWFscyhmLmdldEFjdGl2ZSgpKSk7ZS51bmxvY2tTZWxlY3Rpb24odik7dj0wfSxudWxsLG51bGwsLTEpO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKCl7dj0wfSk7aWYoQ0tFRElUT1IuZW52LmllfHxuKXE/Zy5hdHRhY2hMaXN0ZW5lcihnLFwiYmVmb3JlZGVhY3RpdmF0ZVwiLGIsbnVsbCxudWxsLC0xKTpnLmF0dGFjaExpc3RlbmVyKGUsXCJzZWxlY3Rpb25DaGVja1wiLGIsbnVsbCxudWxsLC0xKSxnLmF0dGFjaExpc3RlbmVyKGcsQ0tFRElUT1IuZW52LndlYmtpdD9cIkRPTUZvY3VzT3V0XCI6XCJibHVyXCIsZnVuY3Rpb24oKXtlLmxvY2tTZWxlY3Rpb24oRCk7dj0xfSxudWxsLG51bGwsLTEpLGcuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKCl7dj1cclxuMH0pO2lmKENLRURJVE9SLmVudi5pZSYmIW4pe3ZhciBJO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpezI9PWEuZGF0YS4kLmJ1dHRvbiYmKChhPWUuZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkpJiZhLmdldFR5cGUoKSE9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkV8fChJPWUud2luZG93LmdldFNjcm9sbFBvc2l0aW9uKCkpKX0pO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNldXBcIixmdW5jdGlvbihhKXsyPT1hLmRhdGEuJC5idXR0b24mJkkmJihlLmRvY3VtZW50LiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ9SS54LGUuZG9jdW1lbnQuJC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wPUkueSk7ST1udWxsfSk7aWYoXCJCYWNrQ29tcGF0XCIhPWYuJC5jb21wYXRNb2RlKXtpZihDS0VESVRPUi5lbnYuaWU3Q29tcGF0fHxDS0VESVRPUi5lbnYuaWU2Q29tcGF0KWsub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2E9YS5kYXRhLiQ7XHJcbmlmKGQpe3ZhciBjPXAuJC5jcmVhdGVUZXh0UmFuZ2UoKTt0cnl7Yy5tb3ZlVG9Qb2ludChhLmNsaWVudFgsYS5jbGllbnRZKX1jYXRjaChlKXt9ZC5zZXRFbmRQb2ludCgwPmYuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9TdGFydFwiLGMpP1wiRW5kVG9FbmRcIjpcIlN0YXJ0VG9TdGFydFwiLGMpO2Quc2VsZWN0KCl9fWZ1bmN0aW9uIGMoKXtrLnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsYik7aC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTtrLnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGMpO2Quc2VsZWN0KCl9YT1hLmRhdGE7aWYoYS5nZXRUYXJnZXQoKS5pcyhcImh0bWxcIikmJmEuJC55PGsuJC5jbGllbnRIZWlnaHQmJmEuJC54PGsuJC5jbGllbnRXaWR0aCl7dmFyIGQ9cC4kLmNyZWF0ZVRleHRSYW5nZSgpO3RyeXtkLm1vdmVUb1BvaW50KGEuJC5jbGllbnRYLGEuJC5jbGllbnRZKX1jYXRjaChlKXt9dmFyIGY9ZC5kdXBsaWNhdGUoKTtrLm9uKFwibW91c2Vtb3ZlXCIsYik7aC5vbihcIm1vdXNldXBcIixcclxuYyk7ay5vbihcIm1vdXNldXBcIixjKX19KTtpZig3PENLRURJVE9SLmVudi52ZXJzaW9uJiYxMT5DS0VESVRPUi5lbnYudmVyc2lvbilrLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldFRhcmdldCgpLmlzKFwiaHRtbFwiKSYmKGgub24oXCJtb3VzZXVwXCIsYyksay5vbihcIm1vdXNldXBcIixjKSl9KX19Zy5hdHRhY2hMaXN0ZW5lcihnLFwic2VsZWN0aW9uY2hhbmdlXCIsYSxlKTtnLmF0dGFjaExpc3RlbmVyKGcsXCJrZXl1cFwiLGQsZSk7Zy5hdHRhY2hMaXN0ZW5lcihnLENLRURJVE9SLmVudi53ZWJraXQ/XCJET01Gb2N1c0luXCI6XCJmb2N1c1wiLGZ1bmN0aW9uKCl7ZS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2Uuc2VsZWN0aW9uQ2hhbmdlKDEpfSk7aWYobiYmKENLRURJVE9SLmVudi53ZWJraXR8fENLRURJVE9SLmVudi5nZWNrbykpe3ZhciBFO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKCl7RT0xfSk7Zy5hdHRhY2hMaXN0ZW5lcihmLmdldERvY3VtZW50RWxlbWVudCgpLFxyXG5cIm1vdXNldXBcIixmdW5jdGlvbigpe0UmJmQuY2FsbChlKTtFPTB9KX1lbHNlIGcuYXR0YWNoTGlzdGVuZXIoQ0tFRElUT1IuZW52LmllP2c6Zi5nZXREb2N1bWVudEVsZW1lbnQoKSxcIm1vdXNldXBcIixkLGUpO0NLRURJVE9SLmVudi53ZWJraXQmJmcuYXR0YWNoTGlzdGVuZXIoZixcImtleWRvd25cIixmdW5jdGlvbihhKXtzd2l0Y2goYS5kYXRhLmdldEtleSgpKXtjYXNlIDEzOmNhc2UgMzM6Y2FzZSAzNDpjYXNlIDM1OmNhc2UgMzY6Y2FzZSAzNzpjYXNlIDM5OmNhc2UgODpjYXNlIDQ1OmNhc2UgNDY6bChnKX19LG51bGwsbnVsbCwtMSk7Zy5hdHRhY2hMaXN0ZW5lcihnLFwia2V5ZG93blwiLHcoZSksbnVsbCxudWxsLC0xKX0pO2Uub24oXCJzZXREYXRhXCIsZnVuY3Rpb24oKXtlLnVubG9ja1NlbGVjdGlvbigpO0NLRURJVE9SLmVudi53ZWJraXQmJmMoKX0pO2Uub24oXCJjb250ZW50RG9tVW5sb2FkXCIsZnVuY3Rpb24oKXtlLnVubG9ja1NlbGVjdGlvbigpfSk7aWYoQ0tFRElUT1IuZW52LmllOUNvbXBhdCllLm9uKFwiYmVmb3JlRGVzdHJveVwiLFxyXG5jLG51bGwsbnVsbCw5KTtlLm9uKFwiZGF0YVJlYWR5XCIsZnVuY3Rpb24oKXtkZWxldGUgZS5fLmZha2VTZWxlY3Rpb247ZGVsZXRlIGUuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXI7ZS5zZWxlY3Rpb25DaGFuZ2UoMSl9KTtlLm9uKFwibG9hZFNuYXBzaG90XCIsZnVuY3Rpb24oKXt2YXIgYT1DS0VESVRPUi5kb20ud2Fsa2VyLm5vZGVUeXBlKENLRURJVE9SLk5PREVfRUxFTUVOVCksYj1lLmVkaXRhYmxlKCkuZ2V0TGFzdChhKTtiJiZiLmhhc0F0dHJpYnV0ZShcImRhdGEtY2tlLWhpZGRlbi1zZWxcIikmJihiLnJlbW92ZSgpLENLRURJVE9SLmVudi5nZWNrbyYmKGE9ZS5lZGl0YWJsZSgpLmdldEZpcnN0KGEpKSYmYS5pcyhcImJyXCIpJiZhLmdldEF0dHJpYnV0ZShcIl9tb3pfZWRpdG9yX2JvZ3VzX25vZGVcIikmJmEucmVtb3ZlKCkpfSxudWxsLG51bGwsMTAwKTtlLm9uKFwia2V5XCIsZnVuY3Rpb24oYSl7aWYoXCJ3eXNpd3lnXCI9PWUubW9kZSl7dmFyIGI9ZS5nZXRTZWxlY3Rpb24oKTtpZihiLmlzRmFrZSl7dmFyIGM9XHJcbkJbYS5kYXRhLmtleUNvZGVdO2lmKGMpcmV0dXJuIGMoe2VkaXRvcjplLHNlbGVjdGVkOmIuZ2V0U2VsZWN0ZWRFbGVtZW50KCksc2VsZWN0aW9uOmIsa2V5RXZlbnQ6YX0pfX19KX0pO2lmKENLRURJVE9SLmVudi53ZWJraXQpQ0tFRElUT1Iub24oXCJpbnN0YW5jZVJlYWR5XCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5lZGl0b3I7Yi5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGE9Yi5lZGl0YWJsZSgpLGM9YS5nZXRDdXN0b21EYXRhKFwiY2tlLWZpbGxpbmdDaGFyXCIpO2MmJihjLmdldEN1c3RvbURhdGEoXCJyZWFkeVwiKT9sKGEpOmMuc2V0Q3VzdG9tRGF0YShcInJlYWR5XCIsMSkpfSxudWxsLG51bGwsLTEpO2Iub24oXCJiZWZvcmVTZXRNb2RlXCIsZnVuY3Rpb24oKXtsKGIuZWRpdGFibGUoKSl9LG51bGwsbnVsbCwtMSk7Yi5vbihcImdldFNuYXBzaG90XCIsZnVuY3Rpb24oYSl7YS5kYXRhJiYoYS5kYXRhPWsoYS5kYXRhKSl9LGIsbnVsbCwyMCk7Yi5vbihcInRvRGF0YUZvcm1hdFwiLFxyXG5mdW5jdGlvbihhKXthLmRhdGEuZGF0YVZhbHVlPWsoYS5kYXRhLmRhdGFWYWx1ZSl9LG51bGwsbnVsbCwwKX0pO0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuc2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKGIpeyhiP2E6ZCkuY2FsbCh0aGlzKX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuXy5zYXZlZFNlbGVjdGlvbiYmIXRoaXMuXy5mYWtlU2VsZWN0aW9ufHxhPyhhPXRoaXMuZWRpdGFibGUoKSkmJlwid3lzaXd5Z1wiPT10aGlzLm1vZGU/bmV3IENLRURJVE9SLmRvbS5zZWxlY3Rpb24oYSk6bnVsbDp0aGlzLl8uc2F2ZWRTZWxlY3Rpb258fHRoaXMuXy5mYWtlU2VsZWN0aW9ufTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmxvY2tTZWxlY3Rpb249ZnVuY3Rpb24oYSl7YT1hfHx0aGlzLmdldFNlbGVjdGlvbigxKTtyZXR1cm4gYS5nZXRUeXBlKCkhPUNLRURJVE9SLlNFTEVDVElPTl9OT05FPyghYS5pc0xvY2tlZCYmXHJcbmEubG9jaygpLHRoaXMuXy5zYXZlZFNlbGVjdGlvbj1hLCEwKTohMX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS51bmxvY2tTZWxlY3Rpb249ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLnNhdmVkU2VsZWN0aW9uO3JldHVybiBiPyhiLnVubG9jayhhKSxkZWxldGUgdGhpcy5fLnNhdmVkU2VsZWN0aW9uLCEwKTohMX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaz1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl8uc2VsZWN0aW9uUHJldmlvdXNQYXRofTtDS0VESVRPUi5kb20uZG9jdW1lbnQucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbih0aGlzKX07Q0tFRElUT1IuZG9tLnJhbmdlLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJvb3QgaW5zdGFuY2VvZiBDS0VESVRPUi5lZGl0YWJsZT90aGlzLnJvb3QuZWRpdG9yLmdldFNlbGVjdGlvbigpOlxyXG5uZXcgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbih0aGlzLnJvb3QpO2Euc2VsZWN0UmFuZ2VzKFt0aGlzXSk7cmV0dXJuIGF9O0NLRURJVE9SLlNFTEVDVElPTl9OT05FPTE7Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQ9MjtDS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVD0zO3ZhciBxPVwiZnVuY3Rpb25cIiE9dHlwZW9mIHdpbmRvdy5nZXRTZWxlY3Rpb24seT0xO0NLRURJVE9SLmRvbS5zZWxlY3Rpb249ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5zZWxlY3Rpb24pe3ZhciBiPWE7YT1hLnJvb3R9dmFyIGM9YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50O3RoaXMucmV2PWI/Yi5yZXY6eSsrO3RoaXMuZG9jdW1lbnQ9YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5kb2N1bWVudD9hOmEuZ2V0RG9jdW1lbnQoKTt0aGlzLnJvb3Q9Yz9hOnRoaXMuZG9jdW1lbnQuZ2V0Qm9keSgpO3RoaXMuaXNMb2NrZWQ9MDt0aGlzLl89e2NhY2hlOnt9fTtpZihiKXJldHVybiBDS0VESVRPUi50b29scy5leHRlbmQodGhpcy5fLmNhY2hlLFxyXG5iLl8uY2FjaGUpLHRoaXMuaXNGYWtlPWIuaXNGYWtlLHRoaXMuaXNMb2NrZWQ9Yi5pc0xvY2tlZCx0aGlzO2E9dGhpcy5nZXROYXRpdmUoKTt2YXIgZCxlO2lmKGEpaWYoYS5nZXRSYW5nZUF0KWQ9KGU9YS5yYW5nZUNvdW50JiZhLmdldFJhbmdlQXQoMCkpJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcik7ZWxzZXt0cnl7ZT1hLmNyZWF0ZVJhbmdlKCl9Y2F0Y2goZil7fWQ9ZSYmQ0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGUuaXRlbSYmZS5pdGVtKDApfHxlLnBhcmVudEVsZW1lbnQoKSl9aWYoIWR8fGQudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVHx8IXRoaXMucm9vdC5lcXVhbHMoZCkmJiF0aGlzLnJvb3QuY29udGFpbnMoZCkpdGhpcy5fLmNhY2hlLnR5cGU9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkUsdGhpcy5fLmNhY2hlLnN0YXJ0RWxlbWVudD1udWxsLHRoaXMuXy5jYWNoZS5zZWxlY3RlZEVsZW1lbnQ9XHJcbm51bGwsdGhpcy5fLmNhY2hlLnNlbGVjdGVkVGV4dD1cIlwiLHRoaXMuXy5jYWNoZS5yYW5nZXM9bmV3IENLRURJVE9SLmRvbS5yYW5nZUxpc3Q7cmV0dXJuIHRoaXN9O3ZhciBGPXtpbWc6MSxocjoxLGxpOjEsdGFibGU6MSx0cjoxLHRkOjEsdGg6MSxlbWJlZDoxLG9iamVjdDoxLG9sOjEsdWw6MSxhOjEsaW5wdXQ6MSxmb3JtOjEsc2VsZWN0OjEsdGV4dGFyZWE6MSxidXR0b246MSxmaWVsZHNldDoxLHRoZWFkOjEsdGZvb3Q6MX0sdD1DS0VESVRPUi50b29scy5yZXBlYXQoXCLigItcIiw3KSx6PW5ldyBSZWdFeHAodCtcIiggKT9cIixcImdcIik7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS5zZWxlY3Rpb24se19yZW1vdmVGaWxsaW5nQ2hhclNlcXVlbmNlU3RyaW5nOmssX2NyZWF0ZUZpbGxpbmdDaGFyU2VxdWVuY2VOb2RlOmcsRklMTElOR19DSEFSX1NFUVVFTkNFOnR9KTtDS0VESVRPUi5kb20uc2VsZWN0aW9uLnByb3RvdHlwZT17Z2V0TmF0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PVxyXG50aGlzLl8uY2FjaGUubmF0aXZlU2VsP3RoaXMuXy5jYWNoZS5uYXRpdmVTZWw6dGhpcy5fLmNhY2hlLm5hdGl2ZVNlbD1xP3RoaXMuZG9jdW1lbnQuJC5zZWxlY3Rpb246dGhpcy5kb2N1bWVudC5nZXRXaW5kb3coKS4kLmdldFNlbGVjdGlvbigpfSxnZXRUeXBlOnE/ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYoYS50eXBlKXJldHVybiBhLnR5cGU7dmFyIGI9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkU7dHJ5e3ZhciBjPXRoaXMuZ2V0TmF0aXZlKCksZD1jLnR5cGU7XCJUZXh0XCI9PWQmJihiPUNLRURJVE9SLlNFTEVDVElPTl9URVhUKTtcIkNvbnRyb2xcIj09ZCYmKGI9Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQpO2MuY3JlYXRlUmFuZ2UoKS5wYXJlbnRFbGVtZW50KCkmJihiPUNLRURJVE9SLlNFTEVDVElPTl9URVhUKX1jYXRjaChlKXt9cmV0dXJuIGEudHlwZT1ifTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5jYWNoZTtpZihhLnR5cGUpcmV0dXJuIGEudHlwZTt2YXIgYj1cclxuQ0tFRElUT1IuU0VMRUNUSU9OX1RFWFQsYz10aGlzLmdldE5hdGl2ZSgpO2lmKCFjfHwhYy5yYW5nZUNvdW50KWI9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkU7ZWxzZSBpZigxPT1jLnJhbmdlQ291bnQpe3ZhciBjPWMuZ2V0UmFuZ2VBdCgwKSxkPWMuc3RhcnRDb250YWluZXI7ZD09Yy5lbmRDb250YWluZXImJjE9PWQubm9kZVR5cGUmJjE9PWMuZW5kT2Zmc2V0LWMuc3RhcnRPZmZzZXQmJkZbZC5jaGlsZE5vZGVzW2Muc3RhcnRPZmZzZXRdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldJiYoYj1DS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVCl9cmV0dXJuIGEudHlwZT1ifSxnZXRSYW5nZXM6ZnVuY3Rpb24oKXt2YXIgYT1xP2Z1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtyZXR1cm4obmV3IENLRURJVE9SLmRvbS5ub2RlKGIpKS5nZXRJbmRleCgpfXZhciBiPWZ1bmN0aW9uKGIsYyl7Yj1iLmR1cGxpY2F0ZSgpO2IuY29sbGFwc2UoYyk7dmFyIGQ9Yi5wYXJlbnRFbGVtZW50KCk7aWYoIWQuaGFzQ2hpbGROb2RlcygpKXJldHVybntjb250YWluZXI6ZCxcclxub2Zmc2V0OjB9O2Zvcih2YXIgZT1kLmNoaWxkcmVuLGYsZyxoPWIuZHVwbGljYXRlKCksbD0wLHY9ZS5sZW5ndGgtMSxrPS0xLG0sRTtsPD12OylpZihrPU1hdGguZmxvb3IoKGwrdikvMiksZj1lW2tdLGgubW92ZVRvRWxlbWVudFRleHQoZiksbT1oLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvU3RhcnRcIixiKSwwPG0pdj1rLTE7ZWxzZSBpZigwPm0pbD1rKzE7ZWxzZSByZXR1cm57Y29udGFpbmVyOmQsb2Zmc2V0OmEoZil9O2lmKC0xPT1rfHxrPT1lLmxlbmd0aC0xJiYwPm0pe2gubW92ZVRvRWxlbWVudFRleHQoZCk7aC5zZXRFbmRQb2ludChcIlN0YXJ0VG9TdGFydFwiLGIpO2g9aC50ZXh0LnJlcGxhY2UoLyhcXHJcXG58XFxyKS9nLFwiXFxuXCIpLmxlbmd0aDtlPWQuY2hpbGROb2RlcztpZighaClyZXR1cm4gZj1lW2UubGVuZ3RoLTFdLGYubm9kZVR5cGUhPUNLRURJVE9SLk5PREVfVEVYVD97Y29udGFpbmVyOmQsb2Zmc2V0OmUubGVuZ3RofTp7Y29udGFpbmVyOmYsb2Zmc2V0OmYubm9kZVZhbHVlLmxlbmd0aH07XHJcbmZvcihkPWUubGVuZ3RoOzA8aCYmMDxkOylnPWVbLS1kXSxnLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihFPWcsaC09Zy5ub2RlVmFsdWUubGVuZ3RoKTtyZXR1cm57Y29udGFpbmVyOkUsb2Zmc2V0Oi1ofX1oLmNvbGxhcHNlKDA8bT8hMDohMSk7aC5zZXRFbmRQb2ludCgwPG0/XCJTdGFydFRvU3RhcnRcIjpcIkVuZFRvU3RhcnRcIixiKTtoPWgudGV4dC5yZXBsYWNlKC8oXFxyXFxufFxccikvZyxcIlxcblwiKS5sZW5ndGg7aWYoIWgpcmV0dXJue2NvbnRhaW5lcjpkLG9mZnNldDphKGYpKygwPG0/MDoxKX07Zm9yKDswPGg7KXRyeXtnPWZbMDxtP1wicHJldmlvdXNTaWJsaW5nXCI6XCJuZXh0U2libGluZ1wiXSxnLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihoLT1nLm5vZGVWYWx1ZS5sZW5ndGgsRT1nKSxmPWd9Y2F0Y2gobil7cmV0dXJue2NvbnRhaW5lcjpkLG9mZnNldDphKGYpfX1yZXR1cm57Y29udGFpbmVyOkUsb2Zmc2V0OjA8bT8taDpFLm5vZGVWYWx1ZS5sZW5ndGgraH19O1xyXG5yZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldE5hdGl2ZSgpLGM9YSYmYS5jcmVhdGVSYW5nZSgpLGQ9dGhpcy5nZXRUeXBlKCk7aWYoIWEpcmV0dXJuW107aWYoZD09Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQpcmV0dXJuIGE9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpLGQ9YihjLCEwKSxhLnNldFN0YXJ0KG5ldyBDS0VESVRPUi5kb20ubm9kZShkLmNvbnRhaW5lciksZC5vZmZzZXQpLGQ9YihjKSxhLnNldEVuZChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZC5jb250YWluZXIpLGQub2Zmc2V0KSxhLmVuZENvbnRhaW5lci5nZXRQb3NpdGlvbihhLnN0YXJ0Q29udGFpbmVyKSZDS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkcmJmEuZW5kT2Zmc2V0PD1hLnN0YXJ0Q29udGFpbmVyLmdldEluZGV4KCkmJmEuY29sbGFwc2UoKSxbYV07aWYoZD09Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQpe2Zvcih2YXIgZD1bXSxlPTA7ZTxjLmxlbmd0aDtlKyspe2Zvcih2YXIgZj1cclxuYy5pdGVtKGUpLGg9Zi5wYXJlbnROb2RlLGc9MCxhPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtnPGguY2hpbGROb2Rlcy5sZW5ndGgmJmguY2hpbGROb2Rlc1tnXSE9ZjtnKyspO2Euc2V0U3RhcnQobmV3IENLRURJVE9SLmRvbS5ub2RlKGgpLGcpO2Euc2V0RW5kKG5ldyBDS0VESVRPUi5kb20ubm9kZShoKSxnKzEpO2QucHVzaChhKX1yZXR1cm4gZH1yZXR1cm5bXX19KCk6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiLGM9dGhpcy5nZXROYXRpdmUoKTtpZighYylyZXR1cm4gYTtmb3IodmFyIGQ9MDtkPGMucmFuZ2VDb3VudDtkKyspe3ZhciBlPWMuZ2V0UmFuZ2VBdChkKTtiPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtiLnNldFN0YXJ0KG5ldyBDS0VESVRPUi5kb20ubm9kZShlLnN0YXJ0Q29udGFpbmVyKSxlLnN0YXJ0T2Zmc2V0KTtiLnNldEVuZChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZS5lbmRDb250YWluZXIpLGUuZW5kT2Zmc2V0KTthLnB1c2goYil9cmV0dXJuIGF9O1xyXG5yZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5fLmNhY2hlLGQ9Yy5yYW5nZXM7ZHx8KGMucmFuZ2VzPWQ9bmV3IENLRURJVE9SLmRvbS5yYW5nZUxpc3QoYS5jYWxsKHRoaXMpKSk7cmV0dXJuIGI/ZihuZXcgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdChkLnNsaWNlKCkpKTpkfX0oKSxnZXRTdGFydEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYodm9pZCAwIT09YS5zdGFydEVsZW1lbnQpcmV0dXJuIGEuc3RhcnRFbGVtZW50O3ZhciBiO3N3aXRjaCh0aGlzLmdldFR5cGUoKSl7Y2FzZSBDS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVDpyZXR1cm4gdGhpcy5nZXRTZWxlY3RlZEVsZW1lbnQoKTtjYXNlIENLRURJVE9SLlNFTEVDVElPTl9URVhUOnZhciBjPXRoaXMuZ2V0UmFuZ2VzKClbMF07aWYoYyl7aWYoYy5jb2xsYXBzZWQpYj1jLnN0YXJ0Q29udGFpbmVyLGIudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYj1iLmdldFBhcmVudCgpKTtlbHNle2ZvcihjLm9wdGltaXplKCk7Yj1cclxuYy5zdGFydENvbnRhaW5lcixjLnN0YXJ0T2Zmc2V0PT0oYi5nZXRDaGlsZENvdW50P2IuZ2V0Q2hpbGRDb3VudCgpOmIuZ2V0TGVuZ3RoKCkpJiYhYi5pc0Jsb2NrQm91bmRhcnkoKTspYy5zZXRTdGFydEFmdGVyKGIpO2I9Yy5zdGFydENvbnRhaW5lcjtpZihiLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gYi5nZXRQYXJlbnQoKTtpZigoYj1iLmdldENoaWxkKGMuc3RhcnRPZmZzZXQpKSYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpZm9yKGM9Yi5nZXRGaXJzdCgpO2MmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UOyliPWMsYz1jLmdldEZpcnN0KCk7ZWxzZSBiPWMuc3RhcnRDb250YWluZXJ9Yj1iLiR9fXJldHVybiBhLnN0YXJ0RWxlbWVudD1iP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChiKTpudWxsfSxnZXRTZWxlY3RlZEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYodm9pZCAwIT09YS5zZWxlY3RlZEVsZW1lbnQpcmV0dXJuIGEuc2VsZWN0ZWRFbGVtZW50O1xyXG52YXIgYj10aGlzLGM9Q0tFRElUT1IudG9vbHMudHJ5VGhlc2UoZnVuY3Rpb24oKXtyZXR1cm4gYi5nZXROYXRpdmUoKS5jcmVhdGVSYW5nZSgpLml0ZW0oMCl9LGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWIuZ2V0UmFuZ2VzKClbMF0uY2xvbmUoKSxjLGQsZT0yO2UmJiEoKGM9YS5nZXRFbmNsb3NlZE5vZGUoKSkmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZGW2MuZ2V0TmFtZSgpXSYmKGQ9YykpO2UtLSlhLnNocmluayhDS0VESVRPUi5TSFJJTktfRUxFTUVOVCk7cmV0dXJuIGQmJmQuJH0pO3JldHVybiBhLnNlbGVjdGVkRWxlbWVudD1jP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChjKTpudWxsfSxnZXRTZWxlY3RlZFRleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYodm9pZCAwIT09YS5zZWxlY3RlZFRleHQpcmV0dXJuIGEuc2VsZWN0ZWRUZXh0O3ZhciBiPXRoaXMuZ2V0TmF0aXZlKCksYj1xP1wiQ29udHJvbFwiPT1iLnR5cGU/XCJcIjpiLmNyZWF0ZVJhbmdlKCkudGV4dDpcclxuYi50b1N0cmluZygpO3JldHVybiBhLnNlbGVjdGVkVGV4dD1ifSxsb2NrOmZ1bmN0aW9uKCl7dGhpcy5nZXRSYW5nZXMoKTt0aGlzLmdldFN0YXJ0RWxlbWVudCgpO3RoaXMuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7dGhpcy5nZXRTZWxlY3RlZFRleHQoKTt0aGlzLl8uY2FjaGUubmF0aXZlU2VsPW51bGw7dGhpcy5pc0xvY2tlZD0xfSx1bmxvY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0xvY2tlZCl7aWYoYSl2YXIgYj10aGlzLmdldFNlbGVjdGVkRWxlbWVudCgpLGM9IWImJnRoaXMuZ2V0UmFuZ2VzKCksZD10aGlzLmlzRmFrZTt0aGlzLmlzTG9ja2VkPTA7dGhpcy5yZXNldCgpO2EmJihhPWJ8fGNbMF0mJmNbMF0uZ2V0Q29tbW9uQW5jZXN0b3IoKSkmJmEuZ2V0QXNjZW5kYW50KFwiYm9keVwiLDEpJiYoZD90aGlzLmZha2UoYik6Yj90aGlzLnNlbGVjdEVsZW1lbnQoYik6dGhpcy5zZWxlY3RSYW5nZXMoYykpfX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl8uY2FjaGU9e307dGhpcy5pc0Zha2U9XHJcbjA7dmFyIGE9dGhpcy5yb290LmVkaXRvcjtpZihhJiZhLl8uZmFrZVNlbGVjdGlvbilpZih0aGlzLnJldj09YS5fLmZha2VTZWxlY3Rpb24ucmV2KXtkZWxldGUgYS5fLmZha2VTZWxlY3Rpb247dmFyIGI9YS5fLmhpZGRlblNlbGVjdGlvbkNvbnRhaW5lcjtpZihiKXt2YXIgYz1hLmNoZWNrRGlydHkoKTthLmZpcmUoXCJsb2NrU25hcHNob3RcIik7Yi5yZW1vdmUoKTthLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKTshYyYmYS5yZXNldERpcnR5KCl9ZGVsZXRlIGEuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXJ9ZWxzZSBDS0VESVRPUi53YXJuKFwic2VsZWN0aW9uLWZha2UtcmVzZXRcIik7dGhpcy5yZXY9eSsrfSxzZWxlY3RFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtiLnNldFN0YXJ0QmVmb3JlKGEpO2Iuc2V0RW5kQWZ0ZXIoYSk7dGhpcy5zZWxlY3RSYW5nZXMoW2JdKX0sc2VsZWN0UmFuZ2VzOmZ1bmN0aW9uKGEpe3ZhciBiPVxyXG50aGlzLnJvb3QuZWRpdG9yLGI9YiYmYi5fLmhpZGRlblNlbGVjdGlvbkNvbnRhaW5lcjt0aGlzLnJlc2V0KCk7aWYoYilmb3IodmFyIGI9dGhpcy5yb290LGMsZD0wO2Q8YS5sZW5ndGg7KytkKWM9YVtkXSxjLmVuZENvbnRhaW5lci5lcXVhbHMoYikmJihjLmVuZE9mZnNldD1NYXRoLm1pbihjLmVuZE9mZnNldCxiLmdldENoaWxkQ291bnQoKSkpO2lmKGEubGVuZ3RoKWlmKHRoaXMuaXNMb2NrZWQpe3ZhciBmPUNLRURJVE9SLmRvY3VtZW50LmdldEFjdGl2ZSgpO3RoaXMudW5sb2NrKCk7dGhpcy5zZWxlY3RSYW5nZXMoYSk7dGhpcy5sb2NrKCk7ZiYmIWYuZXF1YWxzKHRoaXMucm9vdCkmJmYuZm9jdXMoKX1lbHNle3ZhciBrO2E6e3ZhciBuLHc7aWYoMT09YS5sZW5ndGgmJiEodz1hWzBdKS5jb2xsYXBzZWQmJihrPXcuZ2V0RW5jbG9zZWROb2RlKCkpJiZrLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKHc9dy5jbG9uZSgpLHcuc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5ULFxyXG4hMCksKG49dy5nZXRFbmNsb3NlZE5vZGUoKSkmJm4udHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoaz1uKSxcImZhbHNlXCI9PWsuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKSlicmVhayBhO2s9dm9pZCAwfWlmKGspdGhpcy5mYWtlKGspO2Vsc2V7aWYocSl7dz1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKTtuPS9cXHVmZWZmfFxcdTAwYTAvO2I9e3RhYmxlOjEsdGJvZHk6MSx0cjoxfTsxPGEubGVuZ3RoJiYoaz1hW2EubGVuZ3RoLTFdLGFbMF0uc2V0RW5kKGsuZW5kQ29udGFpbmVyLGsuZW5kT2Zmc2V0KSk7az1hWzBdO2E9ay5jb2xsYXBzZWQ7dmFyIHUsdCx4O2lmKChjPWsuZ2V0RW5jbG9zZWROb2RlKCkpJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5nZXROYW1lKClpbiBGJiYoIWMuaXMoXCJhXCIpfHwhYy5nZXRUZXh0KCkpKXRyeXt4PWMuJC5jcmVhdGVDb250cm9sUmFuZ2UoKTt4LmFkZEVsZW1lbnQoYy4kKTt4LnNlbGVjdCgpO1xyXG5yZXR1cm59Y2F0Y2godil7fWlmKGsuc3RhcnRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZrLnN0YXJ0Q29udGFpbmVyLmdldE5hbWUoKWluIGJ8fGsuZW5kQ29udGFpbmVyLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmay5lbmRDb250YWluZXIuZ2V0TmFtZSgpaW4gYilrLnNocmluayhDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApLGE9ay5jb2xsYXBzZWQ7eD1rLmNyZWF0ZUJvb2ttYXJrKCk7Yj14LnN0YXJ0Tm9kZTthfHwoZj14LmVuZE5vZGUpO3g9ay5kb2N1bWVudC4kLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7eC5tb3ZlVG9FbGVtZW50VGV4dChiLiQpO3gubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsMSk7Zj8obj1rLmRvY3VtZW50LiQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSxuLm1vdmVUb0VsZW1lbnRUZXh0KGYuJCkseC5zZXRFbmRQb2ludChcIkVuZFRvRW5kXCIsbikseC5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsLTEpKToodT1iLmdldE5leHQodyksdD1cclxuYi5oYXNBc2NlbmRhbnQoXCJwcmVcIiksdT0hKHUmJnUuZ2V0VGV4dCYmdS5nZXRUZXh0KCkubWF0Y2gobikpJiYodHx8IWIuaGFzUHJldmlvdXMoKXx8Yi5nZXRQcmV2aW91cygpLmlzJiZiLmdldFByZXZpb3VzKCkuaXMoXCJiclwiKSksdD1rLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHQuc2V0SHRtbChcIlxceDI2IzY1Mjc5O1wiKSx0Lmluc2VydEJlZm9yZShiKSx1JiZrLmRvY3VtZW50LmNyZWF0ZVRleHQoXCLvu79cIikuaW5zZXJ0QmVmb3JlKGIpKTtrLnNldFN0YXJ0QmVmb3JlKGIpO2IucmVtb3ZlKCk7YT8odT8oeC5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwtMSkseC5zZWxlY3QoKSxrLmRvY3VtZW50LiQuc2VsZWN0aW9uLmNsZWFyKCkpOnguc2VsZWN0KCksay5tb3ZlVG9Qb3NpdGlvbih0LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksdC5yZW1vdmUoKSk6KGsuc2V0RW5kQmVmb3JlKGYpLGYucmVtb3ZlKCkseC5zZWxlY3QoKSl9ZWxzZXtmPXRoaXMuZ2V0TmF0aXZlKCk7XHJcbmlmKCFmKXJldHVybjt0aGlzLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih4PTA7eDxhLmxlbmd0aDt4Kyspe2lmKHg8YS5sZW5ndGgtMSYmKHU9YVt4XSx0PWFbeCsxXSxuPXUuY2xvbmUoKSxuLnNldFN0YXJ0KHUuZW5kQ29udGFpbmVyLHUuZW5kT2Zmc2V0KSxuLnNldEVuZCh0LnN0YXJ0Q29udGFpbmVyLHQuc3RhcnRPZmZzZXQpLCFuLmNvbGxhcHNlZCYmKG4uc2hyaW5rKENLRURJVE9SLk5PREVfRUxFTUVOVCwhMCksaz1uLmdldENvbW1vbkFuY2VzdG9yKCksbj1uLmdldEVuY2xvc2VkTm9kZSgpLGsuaXNSZWFkT25seSgpfHxuJiZuLmlzUmVhZE9ubHkoKSkpKXt0LnNldFN0YXJ0KHUuc3RhcnRDb250YWluZXIsdS5zdGFydE9mZnNldCk7YS5zcGxpY2UoeC0tLDEpO2NvbnRpbnVlfWs9YVt4XTt0PXRoaXMuZG9jdW1lbnQuJC5jcmVhdGVSYW5nZSgpO2suY29sbGFwc2VkJiZDS0VESVRPUi5lbnYud2Via2l0JiZlKGspJiYobj1nKHRoaXMucm9vdCksay5pbnNlcnROb2RlKG4pLCh1PVxyXG5uLmdldE5leHQoKSkmJiFuLmdldFByZXZpb3VzKCkmJnUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImJyXCI9PXUuZ2V0TmFtZSgpPyhsKHRoaXMucm9vdCksay5tb3ZlVG9Qb3NpdGlvbih1LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCkpOmsubW92ZVRvUG9zaXRpb24obixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTt0LnNldFN0YXJ0KGsuc3RhcnRDb250YWluZXIuJCxrLnN0YXJ0T2Zmc2V0KTt0cnl7dC5zZXRFbmQoay5lbmRDb250YWluZXIuJCxrLmVuZE9mZnNldCl9Y2F0Y2goRCl7aWYoMDw9RC50b1N0cmluZygpLmluZGV4T2YoXCJOU19FUlJPUl9JTExFR0FMX1ZBTFVFXCIpKWsuY29sbGFwc2UoMSksdC5zZXRFbmQoay5lbmRDb250YWluZXIuJCxrLmVuZE9mZnNldCk7ZWxzZSB0aHJvdyBEO31mLmFkZFJhbmdlKHQpfX10aGlzLnJlc2V0KCk7dGhpcy5yb290LmZpcmUoXCJzZWxlY3Rpb25jaGFuZ2VcIil9fX0sZmFrZTpmdW5jdGlvbihhKXt2YXIgYj1cclxudGhpcy5yb290LmVkaXRvcjt0aGlzLnJlc2V0KCk7bihiKTt2YXIgYz10aGlzLl8uY2FjaGUsZD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCk7ZC5zZXRTdGFydEJlZm9yZShhKTtkLnNldEVuZEFmdGVyKGEpO2MucmFuZ2VzPW5ldyBDS0VESVRPUi5kb20ucmFuZ2VMaXN0KGQpO2Muc2VsZWN0ZWRFbGVtZW50PWMuc3RhcnRFbGVtZW50PWE7Yy50eXBlPUNLRURJVE9SLlNFTEVDVElPTl9FTEVNRU5UO2Muc2VsZWN0ZWRUZXh0PWMubmF0aXZlU2VsPW51bGw7dGhpcy5pc0Zha2U9MTt0aGlzLnJldj15Kys7Yi5fLmZha2VTZWxlY3Rpb249dGhpczt0aGlzLnJvb3QuZmlyZShcInNlbGVjdGlvbmNoYW5nZVwiKX0saXNIaWRkZW46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldENvbW1vbkFuY2VzdG9yKCk7YSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihhPWEuZ2V0UGFyZW50KCkpO3JldHVybiEoIWF8fCFhLmRhdGEoXCJja2UtaGlkZGVuLXNlbFwiKSl9LGNyZWF0ZUJvb2ttYXJrczpmdW5jdGlvbihhKXthPVxyXG50aGlzLmdldFJhbmdlcygpLmNyZWF0ZUJvb2ttYXJrcyhhKTt0aGlzLmlzRmFrZSYmKGEuaXNGYWtlPTEpO3JldHVybiBhfSxjcmVhdGVCb29rbWFya3MyOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRSYW5nZXMoKS5jcmVhdGVCb29rbWFya3MyKGEpO3RoaXMuaXNGYWtlJiYoYS5pc0Zha2U9MSk7cmV0dXJuIGF9LHNlbGVjdEJvb2ttYXJrczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYyxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBlPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtlLm1vdmVUb0Jvb2ttYXJrKGFbZF0pO2IucHVzaChlKX1hLmlzRmFrZSYmKGM9YlswXS5nZXRFbmNsb3NlZE5vZGUoKSxjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8KENLRURJVE9SLndhcm4oXCJzZWxlY3Rpb24tbm90LWZha2VcIiksYS5pc0Zha2U9MCkpO2EuaXNGYWtlP3RoaXMuZmFrZShjKTp0aGlzLnNlbGVjdFJhbmdlcyhiKTtyZXR1cm4gdGhpc30sZ2V0Q29tbW9uQW5jZXN0b3I6ZnVuY3Rpb24oKXt2YXIgYT1cclxudGhpcy5nZXRSYW5nZXMoKTtyZXR1cm4gYS5sZW5ndGg/YVswXS5zdGFydENvbnRhaW5lci5nZXRDb21tb25BbmNlc3RvcihhW2EubGVuZ3RoLTFdLmVuZENvbnRhaW5lcik6bnVsbH0sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oKXt0aGlzLnR5cGUhPUNLRURJVE9SLlNFTEVDVElPTl9OT05FJiZ0aGlzLmdldFJhbmdlcygpWzBdLnNjcm9sbEludG9WaWV3KCl9LHJlbW92ZUFsbFJhbmdlczpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0VHlwZSgpIT1DS0VESVRPUi5TRUxFQ1RJT05fTk9ORSl7dmFyIGE9dGhpcy5nZXROYXRpdmUoKTt0cnl7YSYmYVtxP1wiZW1wdHlcIjpcInJlbW92ZUFsbFJhbmdlc1wiXSgpfWNhdGNoKGIpe310aGlzLnJlc2V0KCl9fX19KSgpO1widXNlIHN0cmljdFwiO0NLRURJVE9SLlNUWUxFX0JMT0NLPTE7Q0tFRElUT1IuU1RZTEVfSU5MSU5FPTI7Q0tFRElUT1IuU1RZTEVfT0JKRUNUPTM7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtmb3IodmFyIGMsZDsoYT1hLmdldFBhcmVudCgpKSYmIWEuZXF1YWxzKGIpOylpZihhLmdldEF0dHJpYnV0ZShcImRhdGEtbm9zdHlsZVwiKSljPWE7ZWxzZSBpZighZCl7dmFyIGU9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIik7XCJmYWxzZVwiPT1lP2M9YTpcInRydWVcIj09ZSYmKGQ9MSl9cmV0dXJuIGN9ZnVuY3Rpb24gZChhLGIsYyxkKXtyZXR1cm4oYS5nZXRQb3NpdGlvbihiKXxkKT09ZCYmKCFjLmNoaWxkUnVsZXx8Yy5jaGlsZFJ1bGUoYSkpfWZ1bmN0aW9uIGIoYyl7dmFyIGY9Yy5kb2N1bWVudDtpZihjLmNvbGxhcHNlZClmPUYodGhpcyxmKSxjLmluc2VydE5vZGUoZiksYy5tb3ZlVG9Qb3NpdGlvbihmLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2Vsc2V7dmFyIGc9dGhpcy5lbGVtZW50LGg9dGhpcy5fLmRlZmluaXRpb24sbCxrPWguaWdub3JlUmVhZG9ubHksbT1rfHxoLmluY2x1ZGVSZWFkb25seTtudWxsPT1cclxubSYmKG09Yy5yb290LmdldEN1c3RvbURhdGEoXCJja2VfaW5jbHVkZVJlYWRvbmx5XCIpKTt2YXIgbj1DS0VESVRPUi5kdGRbZ107bnx8KGw9ITAsbj1DS0VESVRPUi5kdGQuc3Bhbik7Yy5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfSU5MSU5FLDEpO2MudHJpbSgpO3ZhciBwPWMuY3JlYXRlQm9va21hcmsoKSxxPXAuc3RhcnROb2RlLHc9cC5lbmROb2RlLHI9cSx1O2lmKCFrKXt2YXIgeD1jLmdldENvbW1vbkFuY2VzdG9yKCksaz1hKHEseCkseD1hKHcseCk7ayYmKHI9ay5nZXROZXh0U291cmNlTm9kZSghMCkpO3gmJih3PXgpfWZvcihyLmdldFBvc2l0aW9uKHcpPT1DS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkcmJihyPTApO3I7KXtrPSExO2lmKHIuZXF1YWxzKHcpKXI9bnVsbCxrPSEwO2Vsc2V7dmFyIHQ9ci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/ci5nZXROYW1lKCk6bnVsbCx4PXQmJlwiZmFsc2VcIj09ci5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikseT10JiZcclxuci5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5vc3R5bGVcIik7aWYodCYmci5kYXRhKFwiY2tlLWJvb2ttYXJrXCIpKXtyPXIuZ2V0TmV4dFNvdXJjZU5vZGUoITApO2NvbnRpbnVlfWlmKHgmJm0mJkNLRURJVE9SLmR0ZC4kYmxvY2tbdF0pZm9yKHZhciBBPXIsej1lKEEpLEM9dm9pZCAwLEc9ei5sZW5ndGgsSD0wLEE9RyYmbmV3IENLRURJVE9SLmRvbS5yYW5nZShBLmdldERvY3VtZW50KCkpO0g8RzsrK0gpe3ZhciBDPXpbSF0sUj1DS0VESVRPUi5maWx0ZXIuaW5zdGFuY2VzW0MuZGF0YShcImNrZS1maWx0ZXJcIildO2lmKFI/Ui5jaGVjayh0aGlzKToxKUEuc2VsZWN0Tm9kZUNvbnRlbnRzKEMpLGIuY2FsbCh0aGlzLEEpfXo9dD8hblt0XXx8eT8wOngmJiFtPzA6ZChyLHcsaCxNKToxO2lmKHopaWYoQz1yLmdldFBhcmVudCgpLHo9aCxHPWcsSD1sLCFDfHwhKEMuZ2V0RHRkKCl8fENLRURJVE9SLmR0ZC5zcGFuKVtHXSYmIUh8fHoucGFyZW50UnVsZSYmIXoucGFyZW50UnVsZShDKSlrPSEwO2Vsc2V7aWYodXx8XHJcbnQmJkNLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbdF0mJihyLmdldFBvc2l0aW9uKHcpfE0pIT1NfHwodT1jLmNsb25lKCksdS5zZXRTdGFydEJlZm9yZShyKSksdD1yLnR5cGUsdD09Q0tFRElUT1IuTk9ERV9URVhUfHx4fHx0PT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFyLmdldENoaWxkQ291bnQoKSl7Zm9yKHZhciB0PXIsWTsoaz0hdC5nZXROZXh0KEspKSYmKFk9dC5nZXRQYXJlbnQoKSxuW1kuZ2V0TmFtZSgpXSkmJmQoWSxxLGgsUSk7KXQ9WTt1LnNldEVuZEFmdGVyKHQpfX1lbHNlIGs9ITA7cj1yLmdldE5leHRTb3VyY2VOb2RlKHl8fHgpfWlmKGsmJnUmJiF1LmNvbGxhcHNlZCl7Zm9yKHZhciBrPUYodGhpcyxmKSx4PWsuaGFzQXR0cmlidXRlcygpLHk9dS5nZXRDb21tb25BbmNlc3RvcigpLHQ9e30sej17fSxDPXt9LEc9e30sVSxQLGRhO2smJnk7KXtpZih5LmdldE5hbWUoKT09Zyl7Zm9yKFUgaW4gaC5hdHRyaWJ1dGVzKSFHW1VdJiYoZGE9eS5nZXRBdHRyaWJ1dGUoUCkpJiZcclxuKGsuZ2V0QXR0cmlidXRlKFUpPT1kYT96W1VdPTE6R1tVXT0xKTtmb3IoUCBpbiBoLnN0eWxlcykhQ1tQXSYmKGRhPXkuZ2V0U3R5bGUoUCkpJiYoay5nZXRTdHlsZShQKT09ZGE/dFtQXT0xOkNbUF09MSl9eT15LmdldFBhcmVudCgpfWZvcihVIGluIHopay5yZW1vdmVBdHRyaWJ1dGUoVSk7Zm9yKFAgaW4gdClrLnJlbW92ZVN0eWxlKFApO3gmJiFrLmhhc0F0dHJpYnV0ZXMoKSYmKGs9bnVsbCk7az8odS5leHRyYWN0Q29udGVudHMoKS5hcHBlbmRUbyhrKSx1Lmluc2VydE5vZGUoayksQi5jYWxsKHRoaXMsayksay5tZXJnZVNpYmxpbmdzKCksQ0tFRElUT1IuZW52LmllfHxrLiQubm9ybWFsaXplKCkpOihrPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNwYW5cIiksdS5leHRyYWN0Q29udGVudHMoKS5hcHBlbmRUbyhrKSx1Lmluc2VydE5vZGUoayksQi5jYWxsKHRoaXMsayksay5yZW1vdmUoITApKTt1PW51bGx9fWMubW92ZVRvQm9va21hcmsocCk7Yy5zaHJpbmsoQ0tFRElUT1IuU0hSSU5LX1RFWFQpO1xyXG5jLnNocmluayhDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApfX1mdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGIoKXtmb3IodmFyIGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChkLmdldFBhcmVudCgpKSxjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgobS5nZXRQYXJlbnQoKSksZT1udWxsLGY9bnVsbCxnPTA7ZzxhLmVsZW1lbnRzLmxlbmd0aDtnKyspe3ZhciBoPWEuZWxlbWVudHNbZ107aWYoaD09YS5ibG9ja3x8aD09YS5ibG9ja0xpbWl0KWJyZWFrO24uY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGgsITApJiYoZT1oKX1mb3IoZz0wO2c8Yy5lbGVtZW50cy5sZW5ndGg7ZysrKXtoPWMuZWxlbWVudHNbZ107aWYoaD09Yy5ibG9ja3x8aD09Yy5ibG9ja0xpbWl0KWJyZWFrO24uY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGgsITApJiYoZj1oKX1mJiZtLmJyZWFrUGFyZW50KGYpO2UmJmQuYnJlYWtQYXJlbnQoZSl9YS5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfSU5MSU5FLDEpO3ZhciBjPVxyXG5hLmNyZWF0ZUJvb2ttYXJrKCksZD1jLnN0YXJ0Tm9kZTtpZihhLmNvbGxhcHNlZCl7Zm9yKHZhciBlPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZC5nZXRQYXJlbnQoKSxhLnJvb3QpLGYsZz0wLGs7ZzxlLmVsZW1lbnRzLmxlbmd0aCYmKGs9ZS5lbGVtZW50c1tnXSkmJmshPWUuYmxvY2smJmshPWUuYmxvY2tMaW1pdDtnKyspaWYodGhpcy5jaGVja0VsZW1lbnRSZW1vdmFibGUoaykpe3ZhciBsO2EuY29sbGFwc2VkJiYoYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssQ0tFRElUT1IuRU5EKXx8KGw9YS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssQ0tFRElUT1IuU1RBUlQpKSk/KGY9ayxmLm1hdGNoPWw/XCJzdGFydFwiOlwiZW5kXCIpOihrLm1lcmdlU2libGluZ3MoKSxrLmlzKHRoaXMuZWxlbWVudCk/dS5jYWxsKHRoaXMsayk6cShrLGgodGhpcylbay5nZXROYW1lKCldKSl9aWYoZil7az1kO2ZvcihnPTA7O2crKyl7bD1lLmVsZW1lbnRzW2ddO2lmKGwuZXF1YWxzKGYpKWJyZWFrO1xyXG5lbHNlIGlmKGwubWF0Y2gpY29udGludWU7ZWxzZSBsPWwuY2xvbmUoKTtsLmFwcGVuZChrKTtrPWx9a1tcInN0YXJ0XCI9PWYubWF0Y2g/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGYpfX1lbHNle3ZhciBtPWMuZW5kTm9kZSxuPXRoaXM7YigpO2ZvcihlPWQ7IWUuZXF1YWxzKG0pOylmPWUuZ2V0TmV4dFNvdXJjZU5vZGUoKSxlLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmdGhpcy5jaGVja0VsZW1lbnRSZW1vdmFibGUoZSkmJihlLmdldE5hbWUoKT09dGhpcy5lbGVtZW50P3UuY2FsbCh0aGlzLGUpOnEoZSxoKHRoaXMpW2UuZ2V0TmFtZSgpXSksZi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmYuY29udGFpbnMoZCkmJihiKCksZj1kLmdldE5leHQoKSkpLGU9Zn1hLm1vdmVUb0Jvb2ttYXJrKGMpO2Euc2hyaW5rKENLRURJVE9SLk5PREVfRUxFTUVOVCwhMCl9ZnVuY3Rpb24gZShhKXt2YXIgYj1bXTthLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoXCJ0cnVlXCI9PVxyXG5hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4gYi5wdXNoKGEpLCExfSxDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApO3JldHVybiBifWZ1bmN0aW9uIGcoYSl7dmFyIGI9YS5nZXRFbmNsb3NlZE5vZGUoKXx8YS5nZXRDb21tb25BbmNlc3RvcighMSwhMCk7KGE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYixhLnJvb3QpKS5jb250YWlucyh0aGlzLmVsZW1lbnQsMSkpJiYhYS5pc1JlYWRPbmx5KCkmJnQoYSx0aGlzKX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEuZ2V0Q29tbW9uQW5jZXN0b3IoITAsITApO2lmKGE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYixhLnJvb3QpKS5jb250YWlucyh0aGlzLmVsZW1lbnQsMSkpe3ZhciBiPXRoaXMuXy5kZWZpbml0aW9uLGM9Yi5hdHRyaWJ1dGVzO2lmKGMpZm9yKHZhciBkIGluIGMpYS5yZW1vdmVBdHRyaWJ1dGUoZCxjW2RdKTtpZihiLnN0eWxlcylmb3IodmFyIGUgaW4gYi5zdHlsZXMpYi5zdHlsZXMuaGFzT3duUHJvcGVydHkoZSkmJlxyXG5hLnJlbW92ZVN0eWxlKGUpfX1mdW5jdGlvbiBrKGEpe3ZhciBiPWEuY3JlYXRlQm9va21hcmsoITApLGM9YS5jcmVhdGVJdGVyYXRvcigpO2MuZW5mb3JjZVJlYWxCbG9ja3M9ITA7dGhpcy5fLmVudGVyTW9kZSYmKGMuZW5sYXJnZUJyPXRoaXMuXy5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSKTtmb3IodmFyIGQsZT1hLmRvY3VtZW50LGY7ZD1jLmdldE5leHRQYXJhZ3JhcGgoKTspIWQuaXNSZWFkT25seSgpJiYoYy5hY3RpdmVGaWx0ZXI/Yy5hY3RpdmVGaWx0ZXIuY2hlY2sodGhpcyk6MSkmJihmPUYodGhpcyxlLGQpLHcoZCxmKSk7YS5tb3ZlVG9Cb29rbWFyayhiKX1mdW5jdGlvbiBuKGEpe3ZhciBiPWEuY3JlYXRlQm9va21hcmsoMSksYz1hLmNyZWF0ZUl0ZXJhdG9yKCk7Yy5lbmZvcmNlUmVhbEJsb2Nrcz0hMDtjLmVubGFyZ2VCcj10aGlzLl8uZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUjtmb3IodmFyIGQsZTtkPWMuZ2V0TmV4dFBhcmFncmFwaCgpOyl0aGlzLmNoZWNrRWxlbWVudFJlbW92YWJsZShkKSYmXHJcbihkLmlzKFwicHJlXCIpPygoZT10aGlzLl8uZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUj9udWxsOmEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLl8uZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpKSYmZC5jb3B5QXR0cmlidXRlcyhlKSx3KGQsZSkpOnUuY2FsbCh0aGlzLGQpKTthLm1vdmVUb0Jvb2ttYXJrKGIpfWZ1bmN0aW9uIHcoYSxiKXt2YXIgYz0hYjtjJiYoYj1hLmdldERvY3VtZW50KCkuY3JlYXRlRWxlbWVudChcImRpdlwiKSxhLmNvcHlBdHRyaWJ1dGVzKGIpKTt2YXIgZD1iJiZiLmlzKFwicHJlXCIpLGU9YS5pcyhcInByZVwiKSxnPSFkJiZlO2lmKGQmJiFlKXtlPWI7KGc9YS5nZXRCb2d1cygpKSYmZy5yZW1vdmUoKTtnPWEuZ2V0SHRtbCgpO2c9eChnLC8oPzpeWyBcXHRcXG5cXHJdKyl8KD86WyBcXHRcXG5cXHJdKyQpL2csXCJcIik7Zz1nLnJlcGxhY2UoL1sgXFx0XFxyXFxuXSooPGJyW14+XSo+KVsgXFx0XFxyXFxuXSovZ2ksXCIkMVwiKTtnPWcucmVwbGFjZSgvKFsgXFx0XFxuXFxyXSt8Jm5ic3A7KS9nLFxyXG5cIiBcIik7Zz1nLnJlcGxhY2UoLzxiclxcYltePl0qPi9naSxcIlxcblwiKTtpZihDS0VESVRPUi5lbnYuaWUpe3ZhciBoPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2guYXBwZW5kKGUpO2UuJC5vdXRlckhUTUw9XCJcXHgzY3ByZVxceDNlXCIrZytcIlxceDNjL3ByZVxceDNlXCI7ZS5jb3B5QXR0cmlidXRlcyhoLmdldEZpcnN0KCkpO2U9aC5nZXRGaXJzdCgpLnJlbW92ZSgpfWVsc2UgZS5zZXRIdG1sKGcpO2I9ZX1lbHNlIGc/Yj1BKGM/W2EuZ2V0SHRtbCgpXTpmKGEpLGIpOmEubW92ZUNoaWxkcmVuKGIpO2IucmVwbGFjZShhKTtpZihkKXt2YXIgYz1iLGs7KGs9Yy5nZXRQcmV2aW91cyhSKSkmJmsudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZrLmlzKFwicHJlXCIpJiYoZD14KGsuZ2V0SHRtbCgpLC9cXG4kLyxcIlwiKStcIlxcblxcblwiK3goYy5nZXRIdG1sKCksL15cXG4vLFwiXCIpLENLRURJVE9SLmVudi5pZT9jLiQub3V0ZXJIVE1MPVwiXFx4M2NwcmVcXHgzZVwiK2QrXCJcXHgzYy9wcmVcXHgzZVwiOlxyXG5jLnNldEh0bWwoZCksay5yZW1vdmUoKSl9ZWxzZSBjJiZ5KGIpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9W107eChhLmdldE91dGVySHRtbCgpLC8oXFxTXFxzKilcXG4oPzpcXHN8KDxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFyay4qP1xcL3NwYW4+KSkqXFxuKD8hJCkvZ2ksZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiK1wiXFx4M2MvcHJlXFx4M2VcIitjK1wiXFx4M2NwcmVcXHgzZVwifSkucmVwbGFjZSgvPHByZVxcYi4qPz4oW1xcc1xcU10qPyk8XFwvcHJlPi9naSxmdW5jdGlvbihhLGMpe2IucHVzaChjKX0pO3JldHVybiBifWZ1bmN0aW9uIHgoYSxiLGMpe3ZhciBkPVwiXCIsZT1cIlwiO2E9YS5yZXBsYWNlKC8oXjxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFyay4qP1xcL3NwYW4+KXwoPHNwYW5bXj5dK2RhdGEtY2tlLWJvb2ttYXJrLio/XFwvc3Bhbj4kKS9naSxmdW5jdGlvbihhLGIsYyl7YiYmKGQ9Yik7YyYmKGU9Yyk7cmV0dXJuXCJcIn0pO3JldHVybiBkK2EucmVwbGFjZShiLGMpK2V9ZnVuY3Rpb24gQShhLGIpe3ZhciBjO1xyXG4xPGEubGVuZ3RoJiYoYz1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoYi5nZXREb2N1bWVudCgpKSk7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBlPWFbZF0sZT1lLnJlcGxhY2UoLyhcXHJcXG58XFxyKS9nLFwiXFxuXCIpLGU9eChlLC9eWyBcXHRdKlxcbi8sXCJcIiksZT14KGUsL1xcbiQvLFwiXCIpLGU9eChlLC9eWyBcXHRdK3xbIFxcdF0rJC9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIDE9PWEubGVuZ3RoP1wiXFx4MjZuYnNwO1wiOmI/XCIgXCIrQ0tFRElUT1IudG9vbHMucmVwZWF0KFwiXFx4MjZuYnNwO1wiLGEubGVuZ3RoLTEpOkNLRURJVE9SLnRvb2xzLnJlcGVhdChcIlxceDI2bmJzcDtcIixhLmxlbmd0aC0xKStcIiBcIn0pLGU9ZS5yZXBsYWNlKC9cXG4vZyxcIlxceDNjYnJcXHgzZVwiKSxlPWUucmVwbGFjZSgvWyBcXHRdezIsfS9nLGZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5yZXBlYXQoXCJcXHgyNm5ic3A7XCIsYS5sZW5ndGgtMSkrXCIgXCJ9KTtpZihjKXt2YXIgZj1iLmNsb25lKCk7Zi5zZXRIdG1sKGUpO1xyXG5jLmFwcGVuZChmKX1lbHNlIGIuc2V0SHRtbChlKX1yZXR1cm4gY3x8Yn1mdW5jdGlvbiB1KGEsYil7dmFyIGM9dGhpcy5fLmRlZmluaXRpb24sZD1jLmF0dHJpYnV0ZXMsYz1jLnN0eWxlcyxlPWgodGhpcylbYS5nZXROYW1lKCldLGY9Q0tFRElUT1IudG9vbHMuaXNFbXB0eShkKSYmQ0tFRElUT1IudG9vbHMuaXNFbXB0eShjKSxnO2ZvcihnIGluIGQpaWYoXCJjbGFzc1wiIT1nJiYhdGhpcy5fLmRlZmluaXRpb24uZnVsbE1hdGNofHxhLmdldEF0dHJpYnV0ZShnKT09cChnLGRbZ10pKWImJlwiZGF0YS1cIj09Zy5zbGljZSgwLDUpfHwoZj1hLmhhc0F0dHJpYnV0ZShnKSxhLnJlbW92ZUF0dHJpYnV0ZShnKSk7Zm9yKHZhciBrIGluIGMpdGhpcy5fLmRlZmluaXRpb24uZnVsbE1hdGNoJiZhLmdldFN0eWxlKGspIT1wKGssY1trXSwhMCl8fChmPWZ8fCEhYS5nZXRTdHlsZShrKSxhLnJlbW92ZVN0eWxlKGspKTtxKGEsZSxDW2EuZ2V0TmFtZSgpXSk7ZiYmKHRoaXMuXy5kZWZpbml0aW9uLmFsd2F5c1JlbW92ZUVsZW1lbnQ/XHJcbnkoYSwxKTohQ0tFRElUT1IuZHRkLiRibG9ja1thLmdldE5hbWUoKV18fHRoaXMuXy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSJiYhYS5oYXNBdHRyaWJ1dGVzKCk/eShhKTphLnJlbmFtZU5vZGUodGhpcy5fLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKSl9ZnVuY3Rpb24gQihhKXtmb3IodmFyIGI9aCh0aGlzKSxjPWEuZ2V0RWxlbWVudHNCeVRhZyh0aGlzLmVsZW1lbnQpLGQsZT1jLmNvdW50KCk7MDw9LS1lOylkPWMuZ2V0SXRlbShlKSxkLmlzUmVhZE9ubHkoKXx8dS5jYWxsKHRoaXMsZCwhMCk7Zm9yKHZhciBmIGluIGIpaWYoZiE9dGhpcy5lbGVtZW50KWZvcihjPWEuZ2V0RWxlbWVudHNCeVRhZyhmKSxlPWMuY291bnQoKS0xOzA8PWU7ZS0tKWQ9Yy5nZXRJdGVtKGUpLGQuaXNSZWFkT25seSgpfHxxKGQsYltmXSl9ZnVuY3Rpb24gcShhLGIsYyl7aWYoYj1iJiZiLmF0dHJpYnV0ZXMpZm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF1bMF0sXHJcbmY7aWYoZj1hLmdldEF0dHJpYnV0ZShlKSl7dmFyIGc9YltkXVsxXTsobnVsbD09PWd8fGcudGVzdCYmZy50ZXN0KGYpfHxcInN0cmluZ1wiPT10eXBlb2YgZyYmZj09ZykmJmEucmVtb3ZlQXR0cmlidXRlKGUpfX1jfHx5KGEpfWZ1bmN0aW9uIHkoYSxiKXtpZighYS5oYXNBdHRyaWJ1dGVzKCl8fGIpaWYoQ0tFRElUT1IuZHRkLiRibG9ja1thLmdldE5hbWUoKV0pe3ZhciBjPWEuZ2V0UHJldmlvdXMoUiksZD1hLmdldE5leHQoUik7IWN8fGMudHlwZSE9Q0tFRElUT1IuTk9ERV9URVhUJiZjLmlzQmxvY2tCb3VuZGFyeSh7YnI6MX0pfHxhLmFwcGVuZChcImJyXCIsMSk7IWR8fGQudHlwZSE9Q0tFRElUT1IuTk9ERV9URVhUJiZkLmlzQmxvY2tCb3VuZGFyeSh7YnI6MX0pfHxhLmFwcGVuZChcImJyXCIpO2EucmVtb3ZlKCEwKX1lbHNlIGM9YS5nZXRGaXJzdCgpLGQ9YS5nZXRMYXN0KCksYS5yZW1vdmUoITApLGMmJihjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5tZXJnZVNpYmxpbmdzKCksXHJcbmQmJiFjLmVxdWFscyhkKSYmZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQubWVyZ2VTaWJsaW5ncygpKX1mdW5jdGlvbiBGKGEsYixjKXt2YXIgZDtkPWEuZWxlbWVudDtcIipcIj09ZCYmKGQ9XCJzcGFuXCIpO2Q9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGQsYik7YyYmYy5jb3B5QXR0cmlidXRlcyhkKTtkPXQoZCxhKTtiLmdldEN1c3RvbURhdGEoXCJkb2NfcHJvY2Vzc2luZ19zdHlsZVwiKSYmZC5oYXNBdHRyaWJ1dGUoXCJpZFwiKT9kLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpOmIuc2V0Q3VzdG9tRGF0YShcImRvY19wcm9jZXNzaW5nX3N0eWxlXCIsMSk7cmV0dXJuIGR9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWIuXy5kZWZpbml0aW9uLGQ9Yy5hdHRyaWJ1dGVzLGM9Q0tFRElUT1Iuc3R5bGUuZ2V0U3R5bGVUZXh0KGMpO2lmKGQpZm9yKHZhciBlIGluIGQpYS5zZXRBdHRyaWJ1dGUoZSxkW2VdKTtjJiZhLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsYyk7cmV0dXJuIGF9ZnVuY3Rpb24geihhLFxyXG5iKXtmb3IodmFyIGMgaW4gYSlhW2NdPWFbY10ucmVwbGFjZShILGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGJbY119KX1mdW5jdGlvbiBoKGEpe2lmKGEuXy5vdmVycmlkZXMpcmV0dXJuIGEuXy5vdmVycmlkZXM7dmFyIGI9YS5fLm92ZXJyaWRlcz17fSxjPWEuXy5kZWZpbml0aW9uLm92ZXJyaWRlcztpZihjKXtDS0VESVRPUi50b29scy5pc0FycmF5KGMpfHwoYz1bY10pO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGYsZztcInN0cmluZ1wiPT10eXBlb2YgZT9mPWUudG9Mb3dlckNhc2UoKTooZj1lLmVsZW1lbnQ/ZS5lbGVtZW50LnRvTG93ZXJDYXNlKCk6YS5lbGVtZW50LGc9ZS5hdHRyaWJ1dGVzKTtlPWJbZl18fChiW2ZdPXt9KTtpZihnKXt2YXIgZT1lLmF0dHJpYnV0ZXM9ZS5hdHRyaWJ1dGVzfHxbXSxoO2ZvcihoIGluIGcpZS5wdXNoKFtoLnRvTG93ZXJDYXNlKCksZ1toXV0pfX19cmV0dXJuIGJ9ZnVuY3Rpb24gcChhLGIsYyl7dmFyIGQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3BhblwiKTtcclxuZFtjP1wic2V0U3R5bGVcIjpcInNldEF0dHJpYnV0ZVwiXShhLGIpO3JldHVybiBkW2M/XCJnZXRTdHlsZVwiOlwiZ2V0QXR0cmlidXRlXCJdKGEpfWZ1bmN0aW9uIG0oYSxiLGMpe3ZhciBkPWEuZG9jdW1lbnQsZT1hLmdldFJhbmdlcygpO2I9Yj90aGlzLnJlbW92ZUZyb21SYW5nZTp0aGlzLmFwcGx5VG9SYW5nZTtmb3IodmFyIGYsZz1lLmNyZWF0ZUl0ZXJhdG9yKCk7Zj1nLmdldE5leHRSYW5nZSgpOyliLmNhbGwodGhpcyxmLGMpO2Euc2VsZWN0UmFuZ2VzKGUpO2QucmVtb3ZlQ3VzdG9tRGF0YShcImRvY19wcm9jZXNzaW5nX3N0eWxlXCIpfXZhciBDPXthZGRyZXNzOjEsZGl2OjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEscDoxLHByZToxLHNlY3Rpb246MSxoZWFkZXI6MSxmb290ZXI6MSxuYXY6MSxhcnRpY2xlOjEsYXNpZGU6MSxmaWd1cmU6MSxkaWFsb2c6MSxoZ3JvdXA6MSx0aW1lOjEsbWV0ZXI6MSxtZW51OjEsY29tbWFuZDoxLGtleWdlbjoxLG91dHB1dDoxLHByb2dyZXNzOjEsXHJcbmRldGFpbHM6MSxkYXRhZ3JpZDoxLGRhdGFsaXN0OjF9LHI9e2E6MSxibG9ja3F1b3RlOjEsZW1iZWQ6MSxocjoxLGltZzoxLGxpOjEsb2JqZWN0OjEsb2w6MSx0YWJsZToxLHRkOjEsdHI6MSx0aDoxLHVsOjEsZGw6MSxkdDoxLGRkOjEsZm9ybToxLGF1ZGlvOjEsdmlkZW86MX0sRz0vXFxzKig/OjtcXHMqfCQpLyxIPS8jXFwoKC4rPylcXCkvZyxLPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoMCwxKSxSPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoMSk7Q0tFRElUT1Iuc3R5bGU9ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50eXBlKXJldHVybiBuZXcgQ0tFRElUT1Iuc3R5bGUuY3VzdG9tSGFuZGxlcnNbYS50eXBlXShhKTt2YXIgYz1hLmF0dHJpYnV0ZXM7YyYmYy5zdHlsZSYmKGEuc3R5bGVzPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxhLnN0eWxlcyxDS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYy5zdHlsZSkpLGRlbGV0ZSBjLnN0eWxlKTtcclxuYiYmKGE9Q0tFRElUT1IudG9vbHMuY2xvbmUoYSkseihhLmF0dHJpYnV0ZXMsYikseihhLnN0eWxlcyxiKSk7Yz10aGlzLmVsZW1lbnQ9YS5lbGVtZW50P1wic3RyaW5nXCI9PXR5cGVvZiBhLmVsZW1lbnQ/YS5lbGVtZW50LnRvTG93ZXJDYXNlKCk6YS5lbGVtZW50OlwiKlwiO3RoaXMudHlwZT1hLnR5cGV8fChDW2NdP0NLRURJVE9SLlNUWUxFX0JMT0NLOnJbY10/Q0tFRElUT1IuU1RZTEVfT0JKRUNUOkNLRURJVE9SLlNUWUxFX0lOTElORSk7XCJvYmplY3RcIj09dHlwZW9mIHRoaXMuZWxlbWVudCYmKHRoaXMudHlwZT1DS0VESVRPUi5TVFlMRV9PQkpFQ1QpO3RoaXMuXz17ZGVmaW5pdGlvbjphfX07Q0tFRElUT1Iuc3R5bGUucHJvdG90eXBlPXthcHBseTpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmRvY3VtZW50KXJldHVybiBtLmNhbGwodGhpcyxhLmdldFNlbGVjdGlvbigpKTtpZih0aGlzLmNoZWNrQXBwbGljYWJsZShhLmVsZW1lbnRQYXRoKCksYSkpe3ZhciBiPVxyXG50aGlzLl8uZW50ZXJNb2RlO2J8fCh0aGlzLl8uZW50ZXJNb2RlPWEuYWN0aXZlRW50ZXJNb2RlKTttLmNhbGwodGhpcyxhLmdldFNlbGVjdGlvbigpLDAsYSk7dGhpcy5fLmVudGVyTW9kZT1ifX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZG9jdW1lbnQpcmV0dXJuIG0uY2FsbCh0aGlzLGEuZ2V0U2VsZWN0aW9uKCksMSk7aWYodGhpcy5jaGVja0FwcGxpY2FibGUoYS5lbGVtZW50UGF0aCgpLGEpKXt2YXIgYj10aGlzLl8uZW50ZXJNb2RlO2J8fCh0aGlzLl8uZW50ZXJNb2RlPWEuYWN0aXZlRW50ZXJNb2RlKTttLmNhbGwodGhpcyxhLmdldFNlbGVjdGlvbigpLDEsYSk7dGhpcy5fLmVudGVyTW9kZT1ifX0sYXBwbHlUb1JhbmdlOmZ1bmN0aW9uKGEpe3RoaXMuYXBwbHlUb1JhbmdlPXRoaXMudHlwZT09Q0tFRElUT1IuU1RZTEVfSU5MSU5FP2I6dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9CTE9DSz9rOnRoaXMudHlwZT09Q0tFRElUT1IuU1RZTEVfT0JKRUNUP1xyXG5nOm51bGw7cmV0dXJuIHRoaXMuYXBwbHlUb1JhbmdlKGEpfSxyZW1vdmVGcm9tUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVGcm9tUmFuZ2U9dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9JTkxJTkU/Yzp0aGlzLnR5cGU9PUNLRURJVE9SLlNUWUxFX0JMT0NLP246dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/bDpudWxsO3JldHVybiB0aGlzLnJlbW92ZUZyb21SYW5nZShhKX0sYXBwbHlUb09iamVjdDpmdW5jdGlvbihhKXt0KGEsdGhpcyl9LGNoZWNrQWN0aXZlOmZ1bmN0aW9uKGEsYil7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSBDS0VESVRPUi5TVFlMRV9CTE9DSzpyZXR1cm4gdGhpcy5jaGVja0VsZW1lbnRSZW1vdmFibGUoYS5ibG9ja3x8YS5ibG9ja0xpbWl0LCEwLGIpO2Nhc2UgQ0tFRElUT1IuU1RZTEVfT0JKRUNUOmNhc2UgQ0tFRElUT1IuU1RZTEVfSU5MSU5FOmZvcih2YXIgYz1hLmVsZW1lbnRzLGQ9MCxlO2Q8Yy5sZW5ndGg7ZCsrKWlmKGU9Y1tkXSxcclxudGhpcy50eXBlIT1DS0VESVRPUi5TVFlMRV9JTkxJTkV8fGUhPWEuYmxvY2smJmUhPWEuYmxvY2tMaW1pdCl7aWYodGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Qpe3ZhciBmPWUuZ2V0TmFtZSgpO2lmKCEoXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuZWxlbWVudD9mPT10aGlzLmVsZW1lbnQ6ZiBpbiB0aGlzLmVsZW1lbnQpKWNvbnRpbnVlfWlmKHRoaXMuY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGUsITAsYikpcmV0dXJuITB9fXJldHVybiExfSxjaGVja0FwcGxpY2FibGU6ZnVuY3Rpb24oYSxiLGMpe2ImJmIgaW5zdGFuY2VvZiBDS0VESVRPUi5maWx0ZXImJihjPWIpO2lmKGMmJiFjLmNoZWNrKHRoaXMpKXJldHVybiExO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgQ0tFRElUT1IuU1RZTEVfT0JKRUNUOnJldHVybiEhYS5jb250YWlucyh0aGlzLmVsZW1lbnQpO2Nhc2UgQ0tFRElUT1IuU1RZTEVfQkxPQ0s6cmV0dXJuISFhLmJsb2NrTGltaXQuZ2V0RHRkKClbdGhpcy5lbGVtZW50XX1yZXR1cm4hMH0sXHJcbmNoZWNrRWxlbWVudE1hdGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fLmRlZmluaXRpb247aWYoIWF8fCFjLmlnbm9yZVJlYWRvbmx5JiZhLmlzUmVhZE9ubHkoKSlyZXR1cm4hMTt2YXIgZD1hLmdldE5hbWUoKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5lbGVtZW50P2Q9PXRoaXMuZWxlbWVudDpkIGluIHRoaXMuZWxlbWVudCl7aWYoIWImJiFhLmhhc0F0dHJpYnV0ZXMoKSlyZXR1cm4hMDtpZihkPWMuX0FDKWM9ZDtlbHNle3ZhciBkPXt9LGU9MCxmPWMuYXR0cmlidXRlcztpZihmKWZvcih2YXIgZyBpbiBmKWUrKyxkW2ddPWZbZ107aWYoZz1DS0VESVRPUi5zdHlsZS5nZXRTdHlsZVRleHQoYykpZC5zdHlsZXx8ZSsrLGQuc3R5bGU9ZztkLl9sZW5ndGg9ZTtjPWMuX0FDPWR9aWYoYy5fbGVuZ3RoKXtmb3IodmFyIGggaW4gYylpZihcIl9sZW5ndGhcIiE9aCl7ZT1hLmdldEF0dHJpYnV0ZShoKXx8XCJcIjtpZihcInN0eWxlXCI9PWgpYTp7ZD1jW2hdO1wic3RyaW5nXCI9PXR5cGVvZiBkJiZcclxuKGQ9Q0tFRElUT1IudG9vbHMucGFyc2VDc3NUZXh0KGQpKTtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9Q0tFRElUT1IudG9vbHMucGFyc2VDc3NUZXh0KGUsITApKTtnPXZvaWQgMDtmb3IoZyBpbiBkKWlmKCEoZyBpbiBlKXx8ZVtnXSE9ZFtnXSYmXCJpbmhlcml0XCIhPWRbZ10mJlwiaW5oZXJpdFwiIT1lW2ddKXtkPSExO2JyZWFrIGF9ZD0hMH1lbHNlIGQ9Y1toXT09ZTtpZihkKXtpZighYilyZXR1cm4hMH1lbHNlIGlmKGIpcmV0dXJuITF9aWYoYilyZXR1cm4hMH1lbHNlIHJldHVybiEwfXJldHVybiExfSxjaGVja0VsZW1lbnRSZW1vdmFibGU6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuY2hlY2tFbGVtZW50TWF0Y2goYSxiLGMpKXJldHVybiEwO2lmKGI9aCh0aGlzKVthLmdldE5hbWUoKV0pe3ZhciBkO2lmKCEoYj1iLmF0dHJpYnV0ZXMpKXJldHVybiEwO2ZvcihjPTA7YzxiLmxlbmd0aDtjKyspaWYoZD1iW2NdWzBdLGQ9YS5nZXRBdHRyaWJ1dGUoZCkpe3ZhciBlPWJbY11bMV07aWYobnVsbD09PVxyXG5lKXJldHVybiEwO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZihkPT1lKXJldHVybiEwfWVsc2UgaWYoZS50ZXN0KGQpKXJldHVybiEwfX1yZXR1cm4hMX0sYnVpbGRQcmV2aWV3OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy5kZWZpbml0aW9uLGM9W10sZD1iLmVsZW1lbnQ7XCJiZG9cIj09ZCYmKGQ9XCJzcGFuXCIpO3ZhciBjPVtcIlxceDNjXCIsZF0sZT1iLmF0dHJpYnV0ZXM7aWYoZSlmb3IodmFyIGYgaW4gZSljLnB1c2goXCIgXCIsZiwnXFx4M2RcIicsZVtmXSwnXCInKTsoZT1DS0VESVRPUi5zdHlsZS5nZXRTdHlsZVRleHQoYikpJiZjLnB1c2goJyBzdHlsZVxceDNkXCInLGUsJ1wiJyk7Yy5wdXNoKFwiXFx4M2VcIixhfHxiLm5hbWUsXCJcXHgzYy9cIixkLFwiXFx4M2VcIik7cmV0dXJuIGMuam9pbihcIlwiKX0sZ2V0RGVmaW5pdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZGVmaW5pdGlvbn19O0NLRURJVE9SLnN0eWxlLmdldFN0eWxlVGV4dD1mdW5jdGlvbihhKXt2YXIgYj1hLl9TVDtpZihiKXJldHVybiBiO1xyXG52YXIgYj1hLnN0eWxlcyxjPWEuYXR0cmlidXRlcyYmYS5hdHRyaWJ1dGVzLnN0eWxlfHxcIlwiLGQ9XCJcIjtjLmxlbmd0aCYmKGM9Yy5yZXBsYWNlKEcsXCI7XCIpKTtmb3IodmFyIGUgaW4gYil7dmFyIGY9YltlXSxnPShlK1wiOlwiK2YpLnJlcGxhY2UoRyxcIjtcIik7XCJpbmhlcml0XCI9PWY/ZCs9ZzpjKz1nfWMubGVuZ3RoJiYoYz1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGMsITApKTtyZXR1cm4gYS5fU1Q9YytkfTtDS0VESVRPUi5zdHlsZS5jdXN0b21IYW5kbGVycz17fTtDS0VESVRPUi5zdHlsZS5hZGRDdXN0b21IYW5kbGVyPWZ1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGEpe3RoaXMuXz17ZGVmaW5pdGlvbjphfTt0aGlzLnNldHVwJiZ0aGlzLnNldHVwKGEpfTtiLnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IudG9vbHMucHJvdG90eXBlZENvcHkoQ0tFRElUT1Iuc3R5bGUucHJvdG90eXBlKSx7YXNzaWduZWRUbzpDS0VESVRPUi5TVFlMRV9PQkpFQ1R9LFxyXG5hLCEwKTtyZXR1cm4gdGhpcy5jdXN0b21IYW5kbGVyc1thLnR5cGVdPWJ9O3ZhciBNPUNLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElOR3xDS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUx8Q0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVELFE9Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HfENLRURJVE9SLlBPU0lUSU9OX0lERU5USUNBTHxDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUR9KSgpO0NLRURJVE9SLnN0eWxlQ29tbWFuZD1mdW5jdGlvbihhLGQpe3RoaXMucmVxdWlyZWRDb250ZW50PXRoaXMuYWxsb3dlZENvbnRlbnQ9dGhpcy5zdHlsZT1hO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGQsITApfTtcclxuQ0tFRElUT1Iuc3R5bGVDb21tYW5kLnByb3RvdHlwZS5leGVjPWZ1bmN0aW9uKGEpe2EuZm9jdXMoKTt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkY/YS5hcHBseVN0eWxlKHRoaXMuc3R5bGUpOnRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09OJiZhLnJlbW92ZVN0eWxlKHRoaXMuc3R5bGUpfTtDS0VESVRPUi5zdHlsZXNTZXQ9bmV3IENLRURJVE9SLnJlc291cmNlTWFuYWdlcihcIlwiLFwic3R5bGVzU2V0XCIpO0NLRURJVE9SLmFkZFN0eWxlc1NldD1DS0VESVRPUi50b29scy5iaW5kKENLRURJVE9SLnN0eWxlc1NldC5hZGQsQ0tFRElUT1Iuc3R5bGVzU2V0KTtDS0VESVRPUi5sb2FkU3R5bGVzU2V0PWZ1bmN0aW9uKGEsZCxiKXtDS0VESVRPUi5zdHlsZXNTZXQuYWRkRXh0ZXJuYWwoYSxkLFwiXCIpO0NLRURJVE9SLnN0eWxlc1NldC5sb2FkKGEsYil9O1xyXG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7YXR0YWNoU3R5bGVTdGF0ZUNoYW5nZTpmdW5jdGlvbihhLGQpe3ZhciBiPXRoaXMuXy5zdHlsZVN0YXRlQ2hhbmdlQ2FsbGJhY2tzO2J8fChiPXRoaXMuXy5zdHlsZVN0YXRlQ2hhbmdlQ2FsbGJhY2tzPVtdLHRoaXMub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihhKXtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGc9YltkXSxsPWcuc3R5bGUuY2hlY2tBY3RpdmUoYS5kYXRhLnBhdGgsdGhpcyk/Q0tFRElUT1IuVFJJU1RBVEVfT046Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO2cuZm4uY2FsbCh0aGlzLGwpfX0pKTtiLnB1c2goe3N0eWxlOmEsZm46ZH0pfSxhcHBseVN0eWxlOmZ1bmN0aW9uKGEpe2EuYXBwbHkodGhpcyl9LHJlbW92ZVN0eWxlOmZ1bmN0aW9uKGEpe2EucmVtb3ZlKHRoaXMpfSxnZXRTdHlsZXNTZXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fLnN0eWxlc0RlZmluaXRpb25zKWEodGhpcy5fLnN0eWxlc0RlZmluaXRpb25zKTtcclxuZWxzZXt2YXIgZD10aGlzLGI9ZC5jb25maWcuc3R5bGVzQ29tYm9fc3R5bGVzU2V0fHxkLmNvbmZpZy5zdHlsZXNTZXQ7aWYoITE9PT1iKWEobnVsbCk7ZWxzZSBpZihiIGluc3RhbmNlb2YgQXJyYXkpZC5fLnN0eWxlc0RlZmluaXRpb25zPWIsYShiKTtlbHNle2J8fChiPVwiZGVmYXVsdFwiKTt2YXIgYj1iLnNwbGl0KFwiOlwiKSxjPWJbMF07Q0tFRElUT1Iuc3R5bGVzU2V0LmFkZEV4dGVybmFsKGMsYlsxXT9iLnNsaWNlKDEpLmpvaW4oXCI6XCIpOkNLRURJVE9SLmdldFVybChcInN0eWxlcy5qc1wiKSxcIlwiKTtDS0VESVRPUi5zdHlsZXNTZXQubG9hZChjLGZ1bmN0aW9uKGIpe2QuXy5zdHlsZXNEZWZpbml0aW9ucz1iW2NdO2EoZC5fLnN0eWxlc0RlZmluaXRpb25zKX0pfX19fSk7XHJcbkNLRURJVE9SLmRvbS5jb21tZW50PWZ1bmN0aW9uKGEsZCl7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPShkP2QuJDpkb2N1bWVudCkuY3JlYXRlQ29tbWVudChhKSk7Q0tFRElUT1IuZG9tLmRvbU9iamVjdC5jYWxsKHRoaXMsYSl9O0NLRURJVE9SLmRvbS5jb21tZW50LnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLm5vZGU7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS5jb21tZW50LnByb3RvdHlwZSx7dHlwZTpDS0VESVRPUi5OT0RFX0NPTU1FTlQsZ2V0T3V0ZXJIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuXCJcXHgzYyEtLVwiK3RoaXMuJC5ub2RlVmFsdWUrXCItLVxceDNlXCJ9fSk7XCJ1c2Ugc3RyaWN0XCI7XHJcbihmdW5jdGlvbigpe3ZhciBhPXt9LGQ9e30sYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQuJGJsb2NrTGltaXQpYiBpbiBDS0VESVRPUi5kdGQuJGxpc3R8fChhW2JdPTEpO2ZvcihiIGluIENLRURJVE9SLmR0ZC4kYmxvY2spYiBpbiBDS0VESVRPUi5kdGQuJGJsb2NrTGltaXR8fGIgaW4gQ0tFRElUT1IuZHRkLiRlbXB0eXx8KGRbYl09MSk7Q0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoPWZ1bmN0aW9uKGIsZSl7dmFyIGc9bnVsbCxsPW51bGwsaz1bXSxuPWIsdztlPWV8fGIuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCk7ZG8gaWYobi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2sucHVzaChuKTtpZighdGhpcy5sYXN0RWxlbWVudCYmKHRoaXMubGFzdEVsZW1lbnQ9bixuLmlzKENLRURJVE9SLmR0ZC4kb2JqZWN0KXx8XCJmYWxzZVwiPT1uLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSkpY29udGludWU7aWYobi5lcXVhbHMoZSkpYnJlYWs7aWYoIWwmJih3PW4uZ2V0TmFtZSgpLFxyXG5cInRydWVcIj09bi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik/bD1uOiFnJiZkW3ddJiYoZz1uKSxhW3ddKSl7aWYodz0hZyYmXCJkaXZcIj09dyl7YTp7dz1uLmdldENoaWxkcmVuKCk7Zm9yKHZhciBmPTAseD13LmNvdW50KCk7Zjx4O2YrKyl7dmFyIEE9dy5nZXRJdGVtKGYpO2lmKEEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZDS0VESVRPUi5kdGQuJGJsb2NrW0EuZ2V0TmFtZSgpXSl7dz0hMDticmVhayBhfX13PSExfXc9IXd9dz9nPW46bD1ufX13aGlsZShuPW4uZ2V0UGFyZW50KCkpO2x8fChsPWUpO3RoaXMuYmxvY2s9Zzt0aGlzLmJsb2NrTGltaXQ9bDt0aGlzLnJvb3Q9ZTt0aGlzLmVsZW1lbnRzPWt9fSkoKTtcclxuQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoLnByb3RvdHlwZT17Y29tcGFyZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmVsZW1lbnRzO2E9YSYmYS5lbGVtZW50cztpZighYXx8ZC5sZW5ndGghPWEubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYj0wO2I8ZC5sZW5ndGg7YisrKWlmKCFkW2JdLmVxdWFscyhhW2JdKSlyZXR1cm4hMTtyZXR1cm4hMH0sY29udGFpbnM6ZnVuY3Rpb24oYSxkLGIpe3ZhciBjO1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoYz1mdW5jdGlvbihiKXtyZXR1cm4gYi5nZXROYW1lKCk9PWF9KTthIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQ/Yz1mdW5jdGlvbihiKXtyZXR1cm4gYi5lcXVhbHMoYSl9OkNLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSk/Yz1mdW5jdGlvbihiKXtyZXR1cm4tMTxDS0VESVRPUi50b29scy5pbmRleE9mKGEsYi5nZXROYW1lKCkpfTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2M9YTpcIm9iamVjdFwiPT10eXBlb2YgYSYmKGM9ZnVuY3Rpb24oYil7cmV0dXJuIGIuZ2V0TmFtZSgpaW5cclxuYX0pO3ZhciBlPXRoaXMuZWxlbWVudHMsZz1lLmxlbmd0aDtkJiZnLS07YiYmKGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwwKSxlLnJldmVyc2UoKSk7Zm9yKGQ9MDtkPGc7ZCsrKWlmKGMoZVtkXSkpcmV0dXJuIGVbZF07cmV0dXJuIG51bGx9LGlzQ29udGV4dEZvcjpmdW5jdGlvbihhKXt2YXIgZDtyZXR1cm4gYSBpbiBDS0VESVRPUi5kdGQuJGJsb2NrPyhkPXRoaXMuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRpbnRlcm1lZGlhdGUpfHx0aGlzLnJvb3QuZXF1YWxzKHRoaXMuYmxvY2spJiZ0aGlzLmJsb2NrfHx0aGlzLmJsb2NrTGltaXQsISFkLmdldER0ZCgpW2FdKTohMH0sZGlyZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuYmxvY2t8fHRoaXMuYmxvY2tMaW1pdHx8dGhpcy5yb290KS5nZXREaXJlY3Rpb24oMSl9fTtcclxuQ0tFRElUT1IuZG9tLnRleHQ9ZnVuY3Rpb24oYSxkKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9KGQ/ZC4kOmRvY3VtZW50KS5jcmVhdGVUZXh0Tm9kZShhKSk7dGhpcy4kPWF9O0NLRURJVE9SLmRvbS50ZXh0LnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLm5vZGU7XHJcbkNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20udGV4dC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9URVhULGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQubm9kZVZhbHVlLmxlbmd0aH0sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQubm9kZVZhbHVlfSxzZXRUZXh0OmZ1bmN0aW9uKGEpe3RoaXMuJC5ub2RlVmFsdWU9YX0sc3BsaXQ6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy4kLnBhcmVudE5vZGUsYj1kLmNoaWxkTm9kZXMubGVuZ3RoLGM9dGhpcy5nZXRMZW5ndGgoKSxlPXRoaXMuZ2V0RG9jdW1lbnQoKSxnPW5ldyBDS0VESVRPUi5kb20udGV4dCh0aGlzLiQuc3BsaXRUZXh0KGEpLGUpO2QuY2hpbGROb2Rlcy5sZW5ndGg9PWImJihhPj1jPyhnPWUuY3JlYXRlVGV4dChcIlwiKSxnLmluc2VydEFmdGVyKHRoaXMpKTooYT1lLmNyZWF0ZVRleHQoXCJcIiksYS5pbnNlcnRBZnRlcihnKSxhLnJlbW92ZSgpKSk7cmV0dXJuIGd9LHN1YnN0cmluZzpmdW5jdGlvbihhLFxyXG5kKXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZD90aGlzLiQubm9kZVZhbHVlLnN1YnN0cihhKTp0aGlzLiQubm9kZVZhbHVlLnN1YnN0cmluZyhhLGQpfX0pO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyxkKXt2YXIgZz1hLnNlcmlhbGl6YWJsZSxsPWNbZD9cImVuZENvbnRhaW5lclwiOlwic3RhcnRDb250YWluZXJcIl0saz1kP1wiZW5kT2Zmc2V0XCI6XCJzdGFydE9mZnNldFwiLG49Zz9jLmRvY3VtZW50LmdldEJ5SWQoYS5zdGFydE5vZGUpOmEuc3RhcnROb2RlO2E9Zz9jLmRvY3VtZW50LmdldEJ5SWQoYS5lbmROb2RlKTphLmVuZE5vZGU7bC5lcXVhbHMobi5nZXRQcmV2aW91cygpKT8oYy5zdGFydE9mZnNldD1jLnN0YXJ0T2Zmc2V0LWwuZ2V0TGVuZ3RoKCktYS5nZXRQcmV2aW91cygpLmdldExlbmd0aCgpLGw9YS5nZXROZXh0KCkpOmwuZXF1YWxzKGEuZ2V0UHJldmlvdXMoKSkmJihjLnN0YXJ0T2Zmc2V0LT1sLmdldExlbmd0aCgpLGw9YS5nZXROZXh0KCkpO2wuZXF1YWxzKG4uZ2V0UGFyZW50KCkpJiZjW2tdKys7bC5lcXVhbHMoYS5nZXRQYXJlbnQoKSkmJmNba10rKztjW2Q/XCJlbmRDb250YWluZXJcIjpcInN0YXJ0Q29udGFpbmVyXCJdPWw7cmV0dXJuIGN9XHJcbkNLRURJVE9SLmRvbS5yYW5nZUxpc3Q9ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5yYW5nZUxpc3QpcmV0dXJuIGE7YT9hIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLnJhbmdlJiYoYT1bYV0pOmE9W107cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZChhLGQpfTt2YXIgZD17Y3JlYXRlSXRlcmF0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGM9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygpLGQ9W10sZztyZXR1cm57Z2V0TmV4dFJhbmdlOmZ1bmN0aW9uKGwpe2c9dm9pZCAwPT09Zz8wOmcrMTt2YXIgaz1hW2ddO2lmKGsmJjE8YS5sZW5ndGgpe2lmKCFnKWZvcih2YXIgbj1hLmxlbmd0aC0xOzA8PW47bi0tKWQudW5zaGlmdChhW25dLmNyZWF0ZUJvb2ttYXJrKCEwKSk7aWYobClmb3IodmFyIHc9MDthW2crdysxXTspe3ZhciBmPWsuZG9jdW1lbnQ7bD0wO249Zi5nZXRCeUlkKGRbd10uZW5kTm9kZSk7Zm9yKGY9Zi5nZXRCeUlkKGRbdysxXS5zdGFydE5vZGUpOzspe249XHJcbm4uZ2V0TmV4dFNvdXJjZU5vZGUoITEpO2lmKGYuZXF1YWxzKG4pKWw9MTtlbHNlIGlmKGMobil8fG4udHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZuLmlzQmxvY2tCb3VuZGFyeSgpKWNvbnRpbnVlO2JyZWFrfWlmKCFsKWJyZWFrO3crK31mb3Ioay5tb3ZlVG9Cb29rbWFyayhkLnNoaWZ0KCkpO3ctLTspbj1hWysrZ10sbi5tb3ZlVG9Cb29rbWFyayhkLnNoaWZ0KCkpLGsuc2V0RW5kKG4uZW5kQ29udGFpbmVyLG4uZW5kT2Zmc2V0KX1yZXR1cm4ga319fSxjcmVhdGVCb29rbWFya3M6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQsZz0wO2c8dGhpcy5sZW5ndGg7ZysrKXtjLnB1c2goZD10aGlzW2ddLmNyZWF0ZUJvb2ttYXJrKGIsITApKTtmb3IodmFyIGw9ZysxO2w8dGhpcy5sZW5ndGg7bCsrKXRoaXNbbF09YShkLHRoaXNbbF0pLHRoaXNbbF09YShkLHRoaXNbbF0sITApfXJldHVybiBjfSxjcmVhdGVCb29rbWFya3MyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1bXSxkPTA7ZDxcclxudGhpcy5sZW5ndGg7ZCsrKWMucHVzaCh0aGlzW2RdLmNyZWF0ZUJvb2ttYXJrMihhKSk7cmV0dXJuIGN9LG1vdmVUb0Jvb2ttYXJrczpmdW5jdGlvbihhKXtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoO2MrKyl0aGlzW2NdLm1vdmVUb0Jvb2ttYXJrKGFbY10pfX19KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIENLRURJVE9SLmdldFVybChDS0VESVRPUi5za2luTmFtZS5zcGxpdChcIixcIilbMV18fFwic2tpbnMvXCIrQ0tFRElUT1Iuc2tpbk5hbWUuc3BsaXQoXCIsXCIpWzBdK1wiL1wiKX1mdW5jdGlvbiBkKGIpe3ZhciBjPUNLRURJVE9SLnNraW5bXCJ1YV9cIitiXSxkPUNLRURJVE9SLmVudjtpZihjKWZvcih2YXIgYz1jLnNwbGl0KFwiLFwiKS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE+Yj8tMToxfSksZT0wLGc7ZTxjLmxlbmd0aDtlKyspaWYoZz1jW2VdLGQuaWUmJihnLnJlcGxhY2UoL15pZS8sXCJcIik9PWQudmVyc2lvbnx8ZC5xdWlya3MmJlwiaWVxdWlya3NcIj09ZykmJihnPVwiaWVcIiksZFtnXSl7Yis9XCJfXCIrY1tlXTticmVha31yZXR1cm4gQ0tFRElUT1IuZ2V0VXJsKGEoKStiK1wiLmNzc1wiKX1mdW5jdGlvbiBiKGEsYil7Z1thXXx8KENLRURJVE9SLmRvY3VtZW50LmFwcGVuZFN0eWxlU2hlZXQoZChhKSksZ1thXT0xKTtiJiZiKCl9ZnVuY3Rpb24gYyhhKXt2YXIgYj1cclxuYS5nZXRCeUlkKGwpO2J8fChiPWEuZ2V0SGVhZCgpLmFwcGVuZChcInN0eWxlXCIpLGIuc2V0QXR0cmlidXRlKFwiaWRcIixsKSxiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpKTtyZXR1cm4gYn1mdW5jdGlvbiBlKGEsYixjKXt2YXIgZCxlLGc7aWYoQ0tFRElUT1IuZW52LndlYmtpdClmb3IoYj1iLnNwbGl0KFwifVwiKS5zbGljZSgwLC0xKSxlPTA7ZTxiLmxlbmd0aDtlKyspYltlXT1iW2VdLnNwbGl0KFwie1wiKTtmb3IodmFyIGs9MDtrPGEubGVuZ3RoO2srKylpZihDS0VESVRPUi5lbnYud2Via2l0KWZvcihlPTA7ZTxiLmxlbmd0aDtlKyspe2c9YltlXVsxXTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWc9Zy5yZXBsYWNlKGNbZF1bMF0sY1tkXVsxXSk7YVtrXS4kLnNoZWV0LmFkZFJ1bGUoYltlXVswXSxnKX1lbHNle2c9Yjtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWc9Zy5yZXBsYWNlKGNbZF1bMF0sY1tkXVsxXSk7Q0tFRElUT1IuZW52LmllJiYxMT5DS0VESVRPUi5lbnYudmVyc2lvbj9cclxuYVtrXS4kLnN0eWxlU2hlZXQuY3NzVGV4dCs9ZzphW2tdLiQuaW5uZXJIVE1MKz1nfX12YXIgZz17fTtDS0VESVRPUi5za2luPXtwYXRoOmEsbG9hZFBhcnQ6ZnVuY3Rpb24oYyxkKXtDS0VESVRPUi5za2luLm5hbWUhPUNLRURJVE9SLnNraW5OYW1lLnNwbGl0KFwiLFwiKVswXT9DS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChDS0VESVRPUi5nZXRVcmwoYSgpK1wic2tpbi5qc1wiKSxmdW5jdGlvbigpe2IoYyxkKX0pOmIoYyxkKX0sZ2V0UGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IuZ2V0VXJsKGQoYSkpfSxpY29uczp7fSxhZGRJY29uOmZ1bmN0aW9uKGEsYixjLGQpe2E9YS50b0xvd2VyQ2FzZSgpO3RoaXMuaWNvbnNbYV18fCh0aGlzLmljb25zW2FdPXtwYXRoOmIsb2Zmc2V0OmN8fDAsYmdzaXplOmR8fFwiMTZweFwifSl9LGdldEljb25TdHlsZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBnO2EmJihhPWEudG9Mb3dlckNhc2UoKSxiJiYoZz10aGlzLmljb25zW2ErXCItcnRsXCJdKSxcclxuZ3x8KGc9dGhpcy5pY29uc1thXSkpO2E9Y3x8ZyYmZy5wYXRofHxcIlwiO2Q9ZHx8ZyYmZy5vZmZzZXQ7ZT1lfHxnJiZnLmJnc2l6ZXx8XCIxNnB4XCI7YSYmKGE9YS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKSk7cmV0dXJuIGEmJlwiYmFja2dyb3VuZC1pbWFnZTp1cmwoJ1wiK0NLRURJVE9SLmdldFVybChhKStcIicpO2JhY2tncm91bmQtcG9zaXRpb246MCBcIitkK1wicHg7YmFja2dyb3VuZC1zaXplOlwiK2UrXCI7XCJ9fTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7Z2V0VWlDb2xvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVpQ29sb3J9LHNldFVpQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9YyhDS0VESVRPUi5kb2N1bWVudCk7cmV0dXJuKHRoaXMuc2V0VWlDb2xvcj1mdW5jdGlvbihhKXt0aGlzLnVpQ29sb3I9YTt2YXIgYz1DS0VESVRPUi5za2luLmNoYW1lbGVvbixkPVwiXCIsZz1cIlwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGMmJihkPWModGhpcyxcImVkaXRvclwiKSxnPVxyXG5jKHRoaXMsXCJwYW5lbFwiKSk7YT1bW24sYV1dO2UoW2JdLGQsYSk7ZShrLGcsYSl9KS5jYWxsKHRoaXMsYSl9fSk7dmFyIGw9XCJja2VfdWlfY29sb3JcIixrPVtdLG49L1xcJGNvbG9yL2c7Q0tFRElUT1Iub24oXCJpbnN0YW5jZUxvYWRlZFwiLGZ1bmN0aW9uKGEpe2lmKCFDS0VESVRPUi5lbnYuaWV8fCFDS0VESVRPUi5lbnYucXVpcmtzKXt2YXIgYj1hLmVkaXRvcjthPWZ1bmN0aW9uKGEpe2E9KGEuZGF0YVswXXx8YS5kYXRhKS5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJpZnJhbWVcIikuZ2V0SXRlbSgwKS5nZXRGcmFtZURvY3VtZW50KCk7aWYoIWEuZ2V0QnlJZChcImNrZV91aV9jb2xvclwiKSl7YT1jKGEpO2sucHVzaChhKTt2YXIgZD1iLmdldFVpQ29sb3IoKTtkJiZlKFthXSxDS0VESVRPUi5za2luLmNoYW1lbGVvbihiLFwicGFuZWxcIiksW1tuLGRdXSl9fTtiLm9uKFwicGFuZWxTaG93XCIsYSk7Yi5vbihcIm1lbnVTaG93XCIsYSk7Yi5jb25maWcudWlDb2xvciYmYi5zZXRVaUNvbG9yKGIuY29uZmlnLnVpQ29sb3IpfX0pfSkoKTtcclxuKGZ1bmN0aW9uKCl7aWYoQ0tFRElUT1IuZW52LndlYmtpdClDS0VESVRPUi5lbnYuaGM9ITE7ZWxzZXt2YXIgYT1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgc3R5bGVcXHgzZFwid2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMDAwMHB4O2JvcmRlcjoxcHggc29saWQ7Ym9yZGVyLWNvbG9yOnJlZCBibHVlXCJcXHgzZVxceDNjL2RpdlxceDNlJyxDS0VESVRPUi5kb2N1bWVudCk7YS5hcHBlbmRUbyhDS0VESVRPUi5kb2N1bWVudC5nZXRIZWFkKCkpO3RyeXt2YXIgZD1hLmdldENvbXB1dGVkU3R5bGUoXCJib3JkZXItdG9wLWNvbG9yXCIpLGI9YS5nZXRDb21wdXRlZFN0eWxlKFwiYm9yZGVyLXJpZ2h0LWNvbG9yXCIpO0NLRURJVE9SLmVudi5oYz0hKCFkfHxkIT1iKX1jYXRjaChjKXtDS0VESVRPUi5lbnYuaGM9ITF9YS5yZW1vdmUoKX1DS0VESVRPUi5lbnYuaGMmJihDS0VESVRPUi5lbnYuY3NzQ2xhc3MrPVwiIGNrZV9oY1wiKTtDS0VESVRPUi5kb2N1bWVudC5hcHBlbmRTdHlsZVRleHQoXCIuY2tle3Zpc2liaWxpdHk6aGlkZGVuO31cIik7XHJcbkNLRURJVE9SLnN0YXR1cz1cImxvYWRlZFwiO0NLRURJVE9SLmZpcmVPbmNlKFwibG9hZGVkXCIpO2lmKGE9Q0tFRElUT1IuXy5wZW5kaW5nKWZvcihkZWxldGUgQ0tFRElUT1IuXy5wZW5kaW5nLGQ9MDtkPGEubGVuZ3RoO2QrKylDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KGFbZF1bMF0sYVtkXVsxXSksQ0tFRElUT1IuYWRkKGFbZF1bMF0pfSkoKTsvKlxyXG4gQ29weXJpZ2h0IChjKSAyMDAzLTIwMTYsIENLU291cmNlIC0gRnJlZGVyaWNvIEtuYWJiZW4uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwOi8vY2tlZGl0b3IuY29tL2xpY2Vuc2VcclxuKi9cclxuQ0tFRElUT1Iuc2tpbi5uYW1lPVwibW9vbm9cIjtDS0VESVRPUi5za2luLnVhX2VkaXRvcj1cImllLGllcXVpcmtzLGllNyxpZTgsZ2Vja29cIjtDS0VESVRPUi5za2luLnVhX2RpYWxvZz1cImllLGllcXVpcmtzLGllNyxpZThcIjtcclxuQ0tFRElUT1Iuc2tpbi5jaGFtZWxlb249ZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihiLGUpe2Zvcih2YXIgYT1iLm1hdGNoKC9bXiNdLi9nKSxjPTA7Mz5jO2MrKyl7dmFyIGY9YyxkO2Q9cGFyc2VJbnQoYVtjXSwxNik7ZD0oXCIwXCIrKDA+ZT8wfGQqKDErZSk6MHxkKygyNTUtZCkqZSkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7YVtmXT1kfXJldHVyblwiI1wiK2Euam9pbihcIlwiKX19KCksYz1mdW5jdGlvbigpe3ZhciBiPW5ldyBDS0VESVRPUi50ZW1wbGF0ZShcImJhY2tncm91bmQ6I3t0b307YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLHtmcm9tfSx7dG99KTtmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGdyYWRpZW50VHlwZVxceDNkMCxzdGFydENvbG9yc3RyXFx4M2Qne2Zyb219JyxlbmRDb2xvcnN0clxceDNkJ3t0b30nKTtcIik7cmV0dXJuIGZ1bmN0aW9uKGMsYSl7cmV0dXJuIGIub3V0cHV0KHtmcm9tOmMsXHJcbnRvOmF9KX19KCksZj17ZWRpdG9yOm5ldyBDS0VESVRPUi50ZW1wbGF0ZShcIntpZH0uY2tlX2Nocm9tZSBbYm9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV90b3AgWyB7ZGVmYXVsdEdyYWRpZW50fWJvcmRlci1ib3R0b20tY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX2JvdHRvbSBbe2RlZmF1bHRHcmFkaWVudH1ib3JkZXItdG9wLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV9yZXNpemVyIFtib3JkZXItcmlnaHQtY29sb3I6e2NrZVJlc2l6ZXJ9XSB7aWR9IC5ja2VfZGlhbG9nX3RpdGxlIFt7ZGVmYXVsdEdyYWRpZW50fWJvcmRlci1ib3R0b20tY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX2RpYWxvZ19mb290ZXIgW3tkZWZhdWx0R3JhZGllbnR9b3V0bGluZS1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07Ym9yZGVyLXRvcC1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfZGlhbG9nX3RhYiBbe2xpZ2h0R3JhZGllbnR9Ym9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV9kaWFsb2dfdGFiOmhvdmVyIFt7bWVkaXVtR3JhZGllbnR9XSB7aWR9IC5ja2VfZGlhbG9nX2NvbnRlbnRzIFtib3JkZXItdG9wLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV9kaWFsb2dfdGFiX3NlbGVjdGVkLCB7aWR9IC5ja2VfZGlhbG9nX3RhYl9zZWxlY3RlZDpob3ZlciBbYmFja2dyb3VuZDp7ZGlhbG9nVGFiU2VsZWN0ZWR9O2JvcmRlci1ib3R0b20tY29sb3I6e2RpYWxvZ1RhYlNlbGVjdGVkQm9yZGVyfTtdIHtpZH0gLmNrZV9kaWFsb2dfYm9keSBbYmFja2dyb3VuZDp7ZGlhbG9nQm9keX07Ym9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV90b29sZ3JvdXAgW3tsaWdodEdyYWRpZW50fWJvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IGEuY2tlX2J1dHRvbl9vZmY6aG92ZXIsIHtpZH0gYS5ja2VfYnV0dG9uX29mZjpmb2N1cywge2lkfSBhLmNrZV9idXR0b25fb2ZmOmFjdGl2ZSBbe21lZGl1bUdyYWRpZW50fV0ge2lkfSAuY2tlX2J1dHRvbl9vbiBbe2NrZUJ1dHRvbk9ufV0ge2lkfSAuY2tlX3Rvb2xiYXJfc2VwYXJhdG9yIFtiYWNrZ3JvdW5kLWNvbG9yOiB7Y2tlVG9vbGJhclNlcGFyYXRvcn07XSB7aWR9IC5ja2VfY29tYm9fYnV0dG9uIFtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O3tsaWdodEdyYWRpZW50fV0ge2lkfSBhLmNrZV9jb21ib19idXR0b246aG92ZXIsIHtpZH0gYS5ja2VfY29tYm9fYnV0dG9uOmZvY3VzLCB7aWR9IC5ja2VfY29tYm9fb24gYS5ja2VfY29tYm9fYnV0dG9uIFtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O3ttZWRpdW1HcmFkaWVudH1dIHtpZH0gLmNrZV9wYXRoX2l0ZW0gW2NvbG9yOntlbGVtZW50c1BhdGhDb2xvcn07XSB7aWR9IGEuY2tlX3BhdGhfaXRlbTpob3Zlciwge2lkfSBhLmNrZV9wYXRoX2l0ZW06Zm9jdXMsIHtpZH0gYS5ja2VfcGF0aF9pdGVtOmFjdGl2ZSBbYmFja2dyb3VuZC1jb2xvcjp7ZWxlbWVudHNQYXRoQmd9O10ge2lkfS5ja2VfcGFuZWwgW2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSBcIiksXHJcbnBhbmVsOm5ldyBDS0VESVRPUi50ZW1wbGF0ZShcIi5ja2VfcGFuZWxfZ3JvdXB0aXRsZSBbe2xpZ2h0R3JhZGllbnR9Ym9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIC5ja2VfbWVudWJ1dHRvbl9pY29uIFtiYWNrZ3JvdW5kLWNvbG9yOnttZW51YnV0dG9uSWNvbn07XSAuY2tlX21lbnVidXR0b246aG92ZXIgLmNrZV9tZW51YnV0dG9uX2ljb24sIC5ja2VfbWVudWJ1dHRvbjpmb2N1cyAuY2tlX21lbnVidXR0b25faWNvbiwgLmNrZV9tZW51YnV0dG9uOmFjdGl2ZSAuY2tlX21lbnVidXR0b25faWNvbiBbYmFja2dyb3VuZC1jb2xvcjp7bWVudWJ1dHRvbkljb25Ib3Zlcn07XSAuY2tlX21lbnVzZXBhcmF0b3IgW2JhY2tncm91bmQtY29sb3I6e21lbnVidXR0b25JY29ufTtdIGE6aG92ZXIuY2tlX2NvbG9yYm94LCBhOmZvY3VzLmNrZV9jb2xvcmJveCwgYTphY3RpdmUuY2tlX2NvbG9yYm94IFtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10gYTpob3Zlci5ja2VfY29sb3JhdXRvLCBhOmhvdmVyLmNrZV9jb2xvcm1vcmUsIGE6Zm9jdXMuY2tlX2NvbG9yYXV0bywgYTpmb2N1cy5ja2VfY29sb3Jtb3JlLCBhOmFjdGl2ZS5ja2VfY29sb3JhdXRvLCBhOmFjdGl2ZS5ja2VfY29sb3Jtb3JlIFtiYWNrZ3JvdW5kLWNvbG9yOntja2VDb2xvcmF1dG99O2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSBcIil9O1xyXG5yZXR1cm4gZnVuY3Rpb24oZyxlKXt2YXIgYT1nLnVpQ29sb3IsYT17aWQ6XCIuXCIrZy5pZCxkZWZhdWx0Qm9yZGVyOmIoYSwtLjEpLGRlZmF1bHRHcmFkaWVudDpjKGIoYSwuOSksYSksbGlnaHRHcmFkaWVudDpjKGIoYSwxKSxiKGEsLjcpKSxtZWRpdW1HcmFkaWVudDpjKGIoYSwuOCksYihhLC41KSksY2tlQnV0dG9uT246YyhiKGEsLjYpLGIoYSwuNykpLGNrZVJlc2l6ZXI6YihhLC0uNCksY2tlVG9vbGJhclNlcGFyYXRvcjpiKGEsLjUpLGNrZUNvbG9yYXV0bzpiKGEsLjgpLGRpYWxvZ0JvZHk6YihhLC43KSxkaWFsb2dUYWJTZWxlY3RlZDpjKFwiI0ZGRkZGRlwiLFwiI0ZGRkZGRlwiKSxkaWFsb2dUYWJTZWxlY3RlZEJvcmRlcjpcIiNGRkZcIixlbGVtZW50c1BhdGhDb2xvcjpiKGEsLS42KSxlbGVtZW50c1BhdGhCZzphLG1lbnVidXR0b25JY29uOmIoYSwuNSksbWVudWJ1dHRvbkljb25Ib3ZlcjpiKGEsLjMpfTtyZXR1cm4gZltlXS5vdXRwdXQoYSkucmVwbGFjZSgvXFxbL2csXCJ7XCIpLnJlcGxhY2UoL1xcXS9nLFxyXG5cIn1cIil9fSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZGlhbG9ndWlcIix7b25Mb2FkOmZ1bmN0aW9uKCl7dmFyIGg9ZnVuY3Rpb24oYil7dGhpcy5ffHwodGhpcy5fPXt9KTt0aGlzLl9bXCJkZWZhdWx0XCJdPXRoaXMuXy5pbml0VmFsdWU9YltcImRlZmF1bHRcIl18fFwiXCI7dGhpcy5fLnJlcXVpcmVkPWIucmVxdWlyZWR8fCExO2Zvcih2YXIgYT1bdGhpcy5fXSxkPTE7ZDxhcmd1bWVudHMubGVuZ3RoO2QrKylhLnB1c2goYXJndW1lbnRzW2RdKTthLnB1c2goITApO0NLRURJVE9SLnRvb2xzLmV4dGVuZC5hcHBseShDS0VESVRPUi50b29scyxhKTtyZXR1cm4gdGhpcy5ffSx2PXtidWlsZDpmdW5jdGlvbihiLGEsZCl7cmV0dXJuIG5ldyBDS0VESVRPUi51aS5kaWFsb2cudGV4dElucHV0KGIsYSxkKX19LG49e2J1aWxkOmZ1bmN0aW9uKGIsYSxkKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLmRpYWxvZ1thLnR5cGVdKGIsYSxkKX19LHE9e2lzQ2hhbmdlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZhbHVlKCkhPVxyXG50aGlzLmdldEluaXRWYWx1ZSgpfSxyZXNldDpmdW5jdGlvbihiKXt0aGlzLnNldFZhbHVlKHRoaXMuZ2V0SW5pdFZhbHVlKCksYil9LHNldEluaXRWYWx1ZTpmdW5jdGlvbigpe3RoaXMuXy5pbml0VmFsdWU9dGhpcy5nZXRWYWx1ZSgpfSxyZXNldEluaXRWYWx1ZTpmdW5jdGlvbigpe3RoaXMuXy5pbml0VmFsdWU9dGhpcy5fW1wiZGVmYXVsdFwiXX0sZ2V0SW5pdFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5pbml0VmFsdWV9fSxyPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZS5ldmVudFByb2Nlc3NvcnMse29uQ2hhbmdlOmZ1bmN0aW9uKGIsYSl7dGhpcy5fLmRvbU9uQ2hhbmdlUmVnaXN0ZXJlZHx8KGIub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt0aGlzLmdldElucHV0RWxlbWVudCgpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtiLnBhcnRzLmRpYWxvZy5pc1Zpc2libGUoKSYmdGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMuZ2V0VmFsdWUoKX0pfSxcclxudGhpcyl9LHRoaXMpLHRoaXMuXy5kb21PbkNoYW5nZVJlZ2lzdGVyZWQ9ITApO3RoaXMub24oXCJjaGFuZ2VcIixhKX19LCEwKSx4PS9eb24oW0EtWl1cXHcrKS8sdD1mdW5jdGlvbihiKXtmb3IodmFyIGEgaW4gYikoeC50ZXN0KGEpfHxcInRpdGxlXCI9PWF8fFwidHlwZVwiPT1hKSYmZGVsZXRlIGJbYV07cmV0dXJuIGJ9LHc9ZnVuY3Rpb24oYil7Yj1iLmRhdGEuZ2V0S2V5c3Ryb2tlKCk7Yj09Q0tFRElUT1IuU0hJRlQrQ0tFRElUT1IuQUxUKzM2P3RoaXMuc2V0RGlyZWN0aW9uTWFya2VyKFwibHRyXCIpOmI9PUNLRURJVE9SLlNISUZUK0NLRURJVE9SLkFMVCszNSYmdGhpcy5zZXREaXJlY3Rpb25NYXJrZXIoXCJydGxcIil9O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi51aS5kaWFsb2cse2xhYmVsZWRFbGVtZW50OmZ1bmN0aW9uKGIsYSxkLGYpe2lmKCEoND5hcmd1bWVudHMubGVuZ3RoKSl7dmFyIGM9aC5jYWxsKHRoaXMsYSk7Yy5sYWJlbElkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1xyXG5cIl9sYWJlbFwiO3RoaXMuXy5jaGlsZHJlbj1bXTt2YXIgZT17cm9sZTphLnJvbGV8fFwicHJlc2VudGF0aW9uXCJ9O2EuaW5jbHVkZUxhYmVsJiYoZVtcImFyaWEtbGFiZWxsZWRieVwiXT1jLmxhYmVsSWQpO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLFwiZGl2XCIsbnVsbCxlLGZ1bmN0aW9uKCl7dmFyIGU9W10sZz1hLnJlcXVpcmVkP1wiIGNrZV9yZXF1aXJlZFwiOlwiXCI7XCJob3Jpem9udGFsXCIhPWEubGFiZWxMYXlvdXQ/ZS5wdXNoKCdcXHgzY2xhYmVsIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfbGFiZWxlZF9sYWJlbCcrZysnXCIgJywnIGlkXFx4M2RcIicrYy5sYWJlbElkKydcIicsYy5pbnB1dElkPycgZm9yXFx4M2RcIicrYy5pbnB1dElkKydcIic6XCJcIiwoYS5sYWJlbFN0eWxlPycgc3R5bGVcXHgzZFwiJythLmxhYmVsU3R5bGUrJ1wiJzpcIlwiKStcIlxceDNlXCIsYS5sYWJlbCxcIlxceDNjL2xhYmVsXFx4M2VcIiwnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9sYWJlbGVkX2NvbnRlbnRcIicsXHJcbmEuY29udHJvbFN0eWxlPycgc3R5bGVcXHgzZFwiJythLmNvbnRyb2xTdHlsZSsnXCInOlwiXCIsJyByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2UnLGYuY2FsbCh0aGlzLGIsYSksXCJcXHgzYy9kaXZcXHgzZVwiKTooZz17dHlwZTpcImhib3hcIix3aWR0aHM6YS53aWR0aHMscGFkZGluZzowLGNoaWxkcmVuOlt7dHlwZTpcImh0bWxcIixodG1sOidcXHgzY2xhYmVsIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfbGFiZWxlZF9sYWJlbCcrZysnXCIgaWRcXHgzZFwiJytjLmxhYmVsSWQrJ1wiIGZvclxceDNkXCInK2MuaW5wdXRJZCsnXCInKyhhLmxhYmVsU3R5bGU/JyBzdHlsZVxceDNkXCInK2EubGFiZWxTdHlsZSsnXCInOlwiXCIpK1wiXFx4M2VcIitDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpK1wiXFx4M2MvbGFiZWxcXHgzZVwifSx7dHlwZTpcImh0bWxcIixodG1sOidcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9sYWJlbGVkX2NvbnRlbnRcIicrKGEuY29udHJvbFN0eWxlPycgc3R5bGVcXHgzZFwiJythLmNvbnRyb2xTdHlsZStcclxuJ1wiJzpcIlwiKStcIlxceDNlXCIrZi5jYWxsKHRoaXMsYixhKStcIlxceDNjL3NwYW5cXHgzZVwifV19LENLRURJVE9SLmRpYWxvZy5fLnVpRWxlbWVudEJ1aWxkZXJzLmhib3guYnVpbGQoYixnLGUpKTtyZXR1cm4gZS5qb2luKFwiXCIpfSl9fSx0ZXh0SW5wdXQ6ZnVuY3Rpb24oYixhLGQpe2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7aC5jYWxsKHRoaXMsYSk7dmFyIGY9dGhpcy5fLmlucHV0SWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfdGV4dElucHV0XCIsYz17XCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9pbnB1dF9cIithLnR5cGUsaWQ6Zix0eXBlOmEudHlwZX07YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7YS5tYXhMZW5ndGgmJihjLm1heGxlbmd0aD1hLm1heExlbmd0aCk7YS5zaXplJiYoYy5zaXplPWEuc2l6ZSk7YS5pbnB1dFN0eWxlJiYoYy5zdHlsZT1hLmlucHV0U3R5bGUpO3ZhciBlPXRoaXMsbT0hMTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7ZS5nZXRJbnB1dEVsZW1lbnQoKS5vbihcImtleWRvd25cIixcclxuZnVuY3Rpb24oYSl7MTM9PWEuZGF0YS5nZXRLZXlzdHJva2UoKSYmKG09ITApfSk7ZS5nZXRJbnB1dEVsZW1lbnQoKS5vbihcImtleXVwXCIsZnVuY3Rpb24oYSl7MTM9PWEuZGF0YS5nZXRLZXlzdHJva2UoKSYmbSYmKGIuZ2V0QnV0dG9uKFwib2tcIikmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmdldEJ1dHRvbihcIm9rXCIpLmNsaWNrKCl9LDApLG09ITEpO2UuYmlkaSYmdy5jYWxsKGUsYSl9LG51bGwsbnVsbCwxRTMpfSk7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LmNhbGwodGhpcyxiLGEsZCxmdW5jdGlvbigpe3ZhciBiPVsnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF8nLGEudHlwZSwnXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiddO2Eud2lkdGgmJmIucHVzaCgnc3R5bGVcXHgzZFwid2lkdGg6JythLndpZHRoKydcIiAnKTtiLnB1c2goXCJcXHgzZVxceDNjaW5wdXQgXCIpO2NbXCJhcmlhLWxhYmVsbGVkYnlcIl09dGhpcy5fLmxhYmVsSWQ7dGhpcy5fLnJlcXVpcmVkJiZcclxuKGNbXCJhcmlhLXJlcXVpcmVkXCJdPXRoaXMuXy5yZXF1aXJlZCk7Zm9yKHZhciBlIGluIGMpYi5wdXNoKGUrJ1xceDNkXCInK2NbZV0rJ1wiICcpO2IucHVzaChcIiAvXFx4M2VcXHgzYy9kaXZcXHgzZVwiKTtyZXR1cm4gYi5qb2luKFwiXCIpfSl9fSx0ZXh0YXJlYTpmdW5jdGlvbihiLGEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXtoLmNhbGwodGhpcyxhKTt2YXIgZj10aGlzLGM9dGhpcy5fLmlucHV0SWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfdGV4dGFyZWFcIixlPXt9O2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO2Uucm93cz1hLnJvd3N8fDU7ZS5jb2xzPWEuY29sc3x8MjA7ZVtcImNsYXNzXCJdPVwiY2tlX2RpYWxvZ191aV9pbnB1dF90ZXh0YXJlYSBcIisoYVtcImNsYXNzXCJdfHxcIlwiKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5pbnB1dFN0eWxlJiYoZS5zdHlsZT1hLmlucHV0U3R5bGUpO2EuZGlyJiYoZS5kaXI9YS5kaXIpO2lmKGYuYmlkaSliLm9uKFwibG9hZFwiLFxyXG5mdW5jdGlvbigpe2YuZ2V0SW5wdXRFbGVtZW50KCkub24oXCJrZXl1cFwiLHcpfSxmKTtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLGZ1bmN0aW9uKCl7ZVtcImFyaWEtbGFiZWxsZWRieVwiXT10aGlzLl8ubGFiZWxJZDt0aGlzLl8ucmVxdWlyZWQmJihlW1wiYXJpYS1yZXF1aXJlZFwiXT10aGlzLl8ucmVxdWlyZWQpO3ZhciBhPVsnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF90ZXh0YXJlYVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjdGV4dGFyZWEgaWRcXHgzZFwiJyxjLCdcIiAnXSxiO2ZvcihiIGluIGUpYS5wdXNoKGIrJ1xceDNkXCInK0NLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZVtiXSkrJ1wiICcpO2EucHVzaChcIlxceDNlXCIsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShmLl9bXCJkZWZhdWx0XCJdKSxcIlxceDNjL3RleHRhcmVhXFx4M2VcXHgzYy9kaXZcXHgzZVwiKTtyZXR1cm4gYS5qb2luKFwiXCIpfSl9fSxjaGVja2JveDpmdW5jdGlvbihiLFxyXG5hLGQpe2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7dmFyIGY9aC5jYWxsKHRoaXMsYSx7XCJkZWZhdWx0XCI6ISFhW1wiZGVmYXVsdFwiXX0pO2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLFwic3BhblwiLG51bGwsbnVsbCxmdW5jdGlvbigpe3ZhciBjPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxhLHtpZDphLmlkP2EuaWQrXCJfY2hlY2tib3hcIjpDS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9jaGVja2JveFwifSwhMCksZT1bXSxkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX2xhYmVsXCIsZz17XCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9jaGVja2JveF9pbnB1dFwiLHR5cGU6XCJjaGVja2JveFwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6ZH07dChjKTthW1wiZGVmYXVsdFwiXSYmKGcuY2hlY2tlZD1cImNoZWNrZWRcIik7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGMuaW5wdXRTdHlsZSYmKGMuc3R5bGU9Yy5pbnB1dFN0eWxlKTtcclxuZi5jaGVja2JveD1uZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudChiLGMsZSxcImlucHV0XCIsbnVsbCxnKTtlLnB1c2goJyBcXHgzY2xhYmVsIGlkXFx4M2RcIicsZCwnXCIgZm9yXFx4M2RcIicsZy5pZCwnXCInKyhhLmxhYmVsU3R5bGU/JyBzdHlsZVxceDNkXCInK2EubGFiZWxTdHlsZSsnXCInOlwiXCIpK1wiXFx4M2VcIixDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpLFwiXFx4M2MvbGFiZWxcXHgzZVwiKTtyZXR1cm4gZS5qb2luKFwiXCIpfSl9fSxyYWRpbzpmdW5jdGlvbihiLGEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXtoLmNhbGwodGhpcyxhKTt0aGlzLl9bXCJkZWZhdWx0XCJdfHwodGhpcy5fW1wiZGVmYXVsdFwiXT10aGlzLl8uaW5pdFZhbHVlPWEuaXRlbXNbMF1bMV0pO2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO3ZhciBmPVtdLGM9dGhpczthLnJvbGU9XCJyYWRpb2dyb3VwXCI7YS5pbmNsdWRlTGFiZWw9ITA7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LmNhbGwodGhpcyxcclxuYixhLGQsZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sZD1bXSxnPShhLmlkP2EuaWQ6Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkpK1wiX3JhZGlvXCIsaz0wO2s8YS5pdGVtcy5sZW5ndGg7aysrKXt2YXIgbD1hLml0ZW1zW2tdLGg9dm9pZCAwIT09bFsyXT9sWzJdOmxbMF0sbj12b2lkIDAhPT1sWzFdP2xbMV06bFswXSxwPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3JhZGlvX2lucHV0XCIscT1wK1wiX2xhYmVsXCIscD1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSx7aWQ6cCx0aXRsZTpudWxsLHR5cGU6bnVsbH0sITApLGg9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHAse3RpdGxlOmh9LCEwKSxyPXt0eXBlOlwicmFkaW9cIixcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX3JhZGlvX2lucHV0XCIsbmFtZTpnLHZhbHVlOm4sXCJhcmlhLWxhYmVsbGVkYnlcIjpxfSx1PVtdO2MuX1tcImRlZmF1bHRcIl09PW4mJihyLmNoZWNrZWQ9XCJjaGVja2VkXCIpO3QocCk7dChoKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgcC5pbnB1dFN0eWxlJiZcclxuKHAuc3R5bGU9cC5pbnB1dFN0eWxlKTtwLmtleWJvYXJkRm9jdXNhYmxlPSEwO2YucHVzaChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudChiLHAsdSxcImlucHV0XCIsbnVsbCxyKSk7dS5wdXNoKFwiIFwiKTtuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudChiLGgsdSxcImxhYmVsXCIsbnVsbCx7aWQ6cSxcImZvclwiOnIuaWR9LGxbMF0pO2UucHVzaCh1LmpvaW4oXCJcIikpfW5ldyBDS0VESVRPUi51aS5kaWFsb2cuaGJveChiLGYsZSxkKTtyZXR1cm4gZC5qb2luKFwiXCIpfSk7dGhpcy5fLmNoaWxkcmVuPWZ9fSxidXR0b246ZnVuY3Rpb24oYixhLGQpe2lmKGFyZ3VtZW50cy5sZW5ndGgpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGEmJihhPWEoYi5nZXRQYXJlbnRFZGl0b3IoKSkpO2guY2FsbCh0aGlzLGEse2Rpc2FibGVkOmEuZGlzYWJsZWR8fCExfSk7Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24odGhpcyk7dmFyIGY9dGhpcztiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRFbGVtZW50KCk7XHJcbihmdW5jdGlvbigpe2Eub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2YuY2xpY2soKTthLmRhdGEucHJldmVudERlZmF1bHQoKX0pO2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldEtleXN0cm9rZSgpaW57MzI6MX0mJihmLmNsaWNrKCksYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpfSl9KSgpO2EudW5zZWxlY3RhYmxlKCl9LHRoaXMpO3ZhciBjPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxhKTtkZWxldGUgYy5zdHlsZTt2YXIgZT1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9sYWJlbFwiO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGIsYyxkLFwiYVwiLG51bGwse3N0eWxlOmEuc3R5bGUsaHJlZjpcImphdmFzY3JpcHQ6dm9pZCgwKVwiLHRpdGxlOmEubGFiZWwsaGlkZWZvY3VzOlwidHJ1ZVwiLFwiY2xhc3NcIjphW1wiY2xhc3NcIl0scm9sZTpcImJ1dHRvblwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6ZX0sJ1xceDNjc3BhbiBpZFxceDNkXCInK2UrJ1wiIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfYnV0dG9uXCJcXHgzZScrXHJcbkNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYS5sYWJlbCkrXCJcXHgzYy9zcGFuXFx4M2VcIil9fSxzZWxlY3Q6ZnVuY3Rpb24oYixhLGQpe2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7dmFyIGY9aC5jYWxsKHRoaXMsYSk7YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7Zi5pbnB1dElkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3NlbGVjdFwiO0NLRURJVE9SLnVpLmRpYWxvZy5sYWJlbGVkRWxlbWVudC5jYWxsKHRoaXMsYixhLGQsZnVuY3Rpb24oKXt2YXIgYz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSx7aWQ6YS5pZD9hLmlkK1wiX3NlbGVjdFwiOkNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3NlbGVjdFwifSwhMCksZT1bXSxkPVtdLGc9e2lkOmYuaW5wdXRJZCxcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX2lucHV0X3NlbGVjdFwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6dGhpcy5fLmxhYmVsSWR9O2UucHVzaCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF8nLFxyXG5hLnR5cGUsJ1wiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCInKTthLndpZHRoJiZlLnB1c2goJ3N0eWxlXFx4M2RcIndpZHRoOicrYS53aWR0aCsnXCIgJyk7ZS5wdXNoKFwiXFx4M2VcIik7dm9pZCAwIT09YS5zaXplJiYoZy5zaXplPWEuc2l6ZSk7dm9pZCAwIT09YS5tdWx0aXBsZSYmKGcubXVsdGlwbGU9YS5tdWx0aXBsZSk7dChjKTtmb3IodmFyIGs9MCxsO2s8YS5pdGVtcy5sZW5ndGgmJihsPWEuaXRlbXNba10pO2srKylkLnB1c2goJ1xceDNjb3B0aW9uIHZhbHVlXFx4M2RcIicsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZSh2b2lkIDAhPT1sWzFdP2xbMV06bFswXSkucmVwbGFjZSgvXCIvZyxcIlxceDI2cXVvdDtcIiksJ1wiIC9cXHgzZSAnLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUobFswXSkpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBjLmlucHV0U3R5bGUmJihjLnN0eWxlPWMuaW5wdXRTdHlsZSk7Zi5zZWxlY3Q9bmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQoYixjLGUsXCJzZWxlY3RcIixudWxsLFxyXG5nLGQuam9pbihcIlwiKSk7ZS5wdXNoKFwiXFx4M2MvZGl2XFx4M2VcIik7cmV0dXJuIGUuam9pbihcIlwiKX0pfX0sZmlsZTpmdW5jdGlvbihiLGEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXt2b2lkIDA9PT1hW1wiZGVmYXVsdFwiXSYmKGFbXCJkZWZhdWx0XCJdPVwiXCIpO3ZhciBmPUNLRURJVE9SLnRvb2xzLmV4dGVuZChoLmNhbGwodGhpcyxhKSx7ZGVmaW5pdGlvbjphLGJ1dHRvbnM6W119KTthLnZhbGlkYXRlJiYodGhpcy52YWxpZGF0ZT1hLnZhbGlkYXRlKTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChmLmZyYW1lSWQpLmdldFBhcmVudCgpLmFkZENsYXNzKFwiY2tlX2RpYWxvZ191aV9pbnB1dF9maWxlXCIpfSk7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LmNhbGwodGhpcyxiLGEsZCxmdW5jdGlvbigpe2YuZnJhbWVJZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9maWxlSW5wdXRcIjt2YXIgYj1bJ1xceDNjaWZyYW1lIGZyYW1lYm9yZGVyXFx4M2RcIjBcIiBhbGxvd3RyYW5zcGFyZW5jeVxceDNkXCIwXCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF9maWxlXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBpZFxceDNkXCInLFxyXG5mLmZyYW1lSWQsJ1wiIHRpdGxlXFx4M2RcIicsYS5sYWJlbCwnXCIgc3JjXFx4M2RcImphdmFzY3JpcHQ6dm9pZCgnXTtiLnB1c2goQ0tFRElUT1IuZW52LmllP1wiKGZ1bmN0aW9uKCl7XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KSgpXCI6XCIwXCIpO2IucHVzaCgnKVwiXFx4M2VcXHgzYy9pZnJhbWVcXHgzZScpO3JldHVybiBiLmpvaW4oXCJcIil9KX19LGZpbGVCdXR0b246ZnVuY3Rpb24oYixhLGQpe3ZhciBmPXRoaXM7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXtoLmNhbGwodGhpcyxhKTthLnZhbGlkYXRlJiYodGhpcy52YWxpZGF0ZT1hLnZhbGlkYXRlKTt2YXIgYz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSksZT1jLm9uQ2xpY2s7Yy5jbGFzc05hbWU9KGMuY2xhc3NOYW1lP2MuY2xhc3NOYW1lK1wiIFwiOlwiXCIpK1wiY2tlX2RpYWxvZ191aV9idXR0b25cIjtjLm9uQ2xpY2s9ZnVuY3Rpb24oYyl7dmFyIGQ9XHJcbmFbXCJmb3JcIl07ZSYmITE9PT1lLmNhbGwodGhpcyxjKXx8KGIuZ2V0Q29udGVudEVsZW1lbnQoZFswXSxkWzFdKS5zdWJtaXQoKSx0aGlzLmRpc2FibGUoKSl9O2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXtiLmdldENvbnRlbnRFbGVtZW50KGFbXCJmb3JcIl1bMF0sYVtcImZvclwiXVsxXSkuXy5idXR0b25zLnB1c2goZil9KTtDS0VESVRPUi51aS5kaWFsb2cuYnV0dG9uLmNhbGwodGhpcyxiLGMsZCl9fSxodG1sOmZ1bmN0aW9uKCl7dmFyIGI9L15cXHMqPFtcXHc6XStcXHMrKFtePl0qKT8+LyxhPS9eKFxccyo8W1xcdzpdKyg/OlxccytbXj5dKik/KSgoPzoufFxccnxcXG4pKykkLyxkPS9cXC8kLztyZXR1cm4gZnVuY3Rpb24oZixjLGUpe2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7dmFyIG09W10sZz1jLmh0bWw7XCJcXHgzY1wiIT1nLmNoYXJBdCgwKSYmKGc9XCJcXHgzY3NwYW5cXHgzZVwiK2crXCJcXHgzYy9zcGFuXFx4M2VcIik7dmFyIGs9Yy5mb2N1cztpZihrKXt2YXIgbD10aGlzLmZvY3VzO3RoaXMuZm9jdXM9ZnVuY3Rpb24oKXsoXCJmdW5jdGlvblwiPT1cclxudHlwZW9mIGs/azpsKS5jYWxsKHRoaXMpO3RoaXMuZmlyZShcImZvY3VzXCIpfTtjLmlzRm9jdXNhYmxlJiYodGhpcy5pc0ZvY3VzYWJsZT10aGlzLmlzRm9jdXNhYmxlKTt0aGlzLmtleWJvYXJkRm9jdXNhYmxlPSEwfUNLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGYsYyxtLFwic3BhblwiLG51bGwsbnVsbCxcIlwiKTttPW0uam9pbihcIlwiKS5tYXRjaChiKTtnPWcubWF0Y2goYSl8fFtcIlwiLFwiXCIsXCJcIl07ZC50ZXN0KGdbMV0pJiYoZ1sxXT1nWzFdLnNsaWNlKDAsLTEpLGdbMl09XCIvXCIrZ1syXSk7ZS5wdXNoKFtnWzFdLFwiIFwiLG1bMV18fFwiXCIsZ1syXV0uam9pbihcIlwiKSl9fX0oKSxmaWVsZHNldDpmdW5jdGlvbihiLGEsZCxmLGMpe3ZhciBlPWMubGFiZWw7dGhpcy5fPXtjaGlsZHJlbjphfTtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LmNhbGwodGhpcyxiLGMsZixcImZpZWxkc2V0XCIsbnVsbCxudWxsLGZ1bmN0aW9uKCl7dmFyIGE9W107ZSYmYS5wdXNoKFwiXFx4M2NsZWdlbmRcIitcclxuKGMubGFiZWxTdHlsZT8nIHN0eWxlXFx4M2RcIicrYy5sYWJlbFN0eWxlKydcIic6XCJcIikrXCJcXHgzZVwiK2UrXCJcXHgzYy9sZWdlbmRcXHgzZVwiKTtmb3IodmFyIGI9MDtiPGQubGVuZ3RoO2IrKylhLnB1c2goZFtiXSk7cmV0dXJuIGEuam9pbihcIlwiKX0pfX0sITApO0NLRURJVE9SLnVpLmRpYWxvZy5odG1sLnByb3RvdHlwZT1uZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudDtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7c2V0TGFiZWw6ZnVuY3Rpb24oYil7dmFyIGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8ubGFiZWxJZCk7MT5hLmdldENoaWxkQ291bnQoKT8obmV3IENLRURJVE9SLmRvbS50ZXh0KGIsQ0tFRElUT1IuZG9jdW1lbnQpKS5hcHBlbmRUbyhhKTphLmdldENoaWxkKDApLiQubm9kZVZhbHVlPWI7cmV0dXJuIHRoaXN9LGdldExhYmVsOmZ1bmN0aW9uKCl7dmFyIGI9XHJcbkNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmxhYmVsSWQpO3JldHVybiFifHwxPmIuZ2V0Q2hpbGRDb3VudCgpP1wiXCI6Yi5nZXRDaGlsZCgwKS5nZXRUZXh0KCl9LGV2ZW50UHJvY2Vzc29yczpyfSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLmJ1dHRvbi5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LHtjbGljazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZGlzYWJsZWQ/ITE6dGhpcy5maXJlKFwiY2xpY2tcIix7ZGlhbG9nOnRoaXMuXy5kaWFsb2d9KX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5fLmRpc2FibGVkPSExO3ZhciBiPXRoaXMuZ2V0RWxlbWVudCgpO2ImJmIucmVtb3ZlQ2xhc3MoXCJja2VfZGlzYWJsZWRcIil9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLl8uZGlzYWJsZWQ9ITA7dGhpcy5nZXRFbGVtZW50KCkuYWRkQ2xhc3MoXCJja2VfZGlzYWJsZWRcIil9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVsZW1lbnQoKS5nZXRGaXJzdCgpLmlzVmlzaWJsZSgpfSxcclxuaXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuXy5kaXNhYmxlZH0sZXZlbnRQcm9jZXNzb3JzOkNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZS5ldmVudFByb2Nlc3NvcnMse29uQ2xpY2s6ZnVuY3Rpb24oYixhKXt0aGlzLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9fSwhMCksYWNjZXNzS2V5VXA6ZnVuY3Rpb24oKXt0aGlzLmNsaWNrKCl9LGFjY2Vzc0tleURvd246ZnVuY3Rpb24oKXt0aGlzLmZvY3VzKCl9LGtleWJvYXJkRm9jdXNhYmxlOiEwfSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLnRleHRJbnB1dC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQse2dldElucHV0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHRoaXMuXy5pbnB1dElkKX0sXHJcbmZvY3VzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5zZWxlY3RQYXJlbnRUYWIoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRJbnB1dEVsZW1lbnQoKTthJiZhLiQuZm9jdXMoKX0sMCl9LHNlbGVjdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMuc2VsZWN0UGFyZW50VGFiKCk7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPWIuZ2V0SW5wdXRFbGVtZW50KCk7YSYmKGEuJC5mb2N1cygpLGEuJC5zZWxlY3QoKSl9LDApfSxhY2Nlc3NLZXlVcDpmdW5jdGlvbigpe3RoaXMuc2VsZWN0KCl9LHNldFZhbHVlOmZ1bmN0aW9uKGIpe2lmKHRoaXMuYmlkaSl7dmFyIGE9YiYmYi5jaGFyQXQoMCk7KGE9XCLigKpcIj09YT9cImx0clwiOlwi4oCrXCI9PWE/XCJydGxcIjpudWxsKSYmKGI9Yi5zbGljZSgxKSk7dGhpcy5zZXREaXJlY3Rpb25NYXJrZXIoYSl9Ynx8KGI9XCJcIik7cmV0dXJuIENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQucHJvdG90eXBlLnNldFZhbHVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sXHJcbmdldFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGI9Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5wcm90b3R5cGUuZ2V0VmFsdWUuY2FsbCh0aGlzKTtpZih0aGlzLmJpZGkmJmIpe3ZhciBhPXRoaXMuZ2V0RGlyZWN0aW9uTWFya2VyKCk7YSYmKGI9KFwibHRyXCI9PWE/XCLigKpcIjpcIuKAq1wiKStiKX1yZXR1cm4gYn0sc2V0RGlyZWN0aW9uTWFya2VyOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCk7Yj9hLnNldEF0dHJpYnV0ZXMoe2RpcjpiLFwiZGF0YS1ja2UtZGlyLW1hcmtlclwiOmJ9KTp0aGlzLmdldERpcmVjdGlvbk1hcmtlcigpJiZhLnJlbW92ZUF0dHJpYnV0ZXMoW1wiZGlyXCIsXCJkYXRhLWNrZS1kaXItbWFya2VyXCJdKX0sZ2V0RGlyZWN0aW9uTWFya2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuZGF0YShcImNrZS1kaXItbWFya2VyXCIpfSxrZXlib2FyZEZvY3VzYWJsZTohMH0scSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLnRleHRhcmVhLnByb3RvdHlwZT1cclxubmV3IENLRURJVE9SLnVpLmRpYWxvZy50ZXh0SW5wdXQ7Q0tFRElUT1IudWkuZGlhbG9nLnNlbGVjdC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQse2dldElucHV0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uc2VsZWN0LmdldEVsZW1lbnQoKX0sYWRkOmZ1bmN0aW9uKGIsYSxkKXt2YXIgZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJvcHRpb25cIix0aGlzLmdldERpYWxvZygpLmdldFBhcmVudEVkaXRvcigpLmRvY3VtZW50KSxjPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJDtmLiQudGV4dD1iO2YuJC52YWx1ZT12b2lkIDA9PT1hfHxudWxsPT09YT9iOmE7dm9pZCAwPT09ZHx8bnVsbD09PWQ/Q0tFRElUT1IuZW52LmllP2MuYWRkKGYuJCk6Yy5hZGQoZi4kLG51bGwpOmMuYWRkKGYuJCxkKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGIpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJC5yZW1vdmUoYik7XHJcbnJldHVybiB0aGlzfSxjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgYj10aGlzLmdldElucHV0RWxlbWVudCgpLiQ7MDxiLmxlbmd0aDspYi5yZW1vdmUoMCk7cmV0dXJuIHRoaXN9LGtleWJvYXJkRm9jdXNhYmxlOiEwfSxxLCEwKTtDS0VESVRPUi51aS5kaWFsb2cuY2hlY2tib3gucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7Z2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5jaGVja2JveC5nZXRFbGVtZW50KCl9LHNldFZhbHVlOmZ1bmN0aW9uKGIsYSl7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kLmNoZWNrZWQ9YjshYSYmdGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOmJ9KX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kLmNoZWNrZWR9LGFjY2Vzc0tleVVwOmZ1bmN0aW9uKCl7dGhpcy5zZXRWYWx1ZSghdGhpcy5nZXRWYWx1ZSgpKX0sZXZlbnRQcm9jZXNzb3JzOntvbkNoYW5nZTpmdW5jdGlvbihiLFxyXG5hKXtpZighQ0tFRElUT1IuZW52LmllfHw4PENLRURJVE9SLmVudi52ZXJzaW9uKXJldHVybiByLm9uQ2hhbmdlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmNoZWNrYm94LmdldEVsZW1lbnQoKTthLm9uKFwicHJvcGVydHljaGFuZ2VcIixmdW5jdGlvbihiKXtiPWIuZGF0YS4kO1wiY2hlY2tlZFwiPT1iLnByb3BlcnR5TmFtZSYmdGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOmEuJC5jaGVja2VkfSl9LHRoaXMpfSx0aGlzKTt0aGlzLm9uKFwiY2hhbmdlXCIsYSk7cmV0dXJuIG51bGx9fSxrZXlib2FyZEZvY3VzYWJsZTohMH0scSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLnJhZGlvLnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQse3NldFZhbHVlOmZ1bmN0aW9uKGIsYSl7Zm9yKHZhciBkPXRoaXMuXy5jaGlsZHJlbixmLGM9MDtjPGQubGVuZ3RoJiYoZj1kW2NdKTtjKyspZi5nZXRFbGVtZW50KCkuJC5jaGVja2VkPVxyXG5mLmdldFZhbHVlKCk9PWI7IWEmJnRoaXMuZmlyZShcImNoYW5nZVwiLHt2YWx1ZTpifSl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPXRoaXMuXy5jaGlsZHJlbixhPTA7YTxiLmxlbmd0aDthKyspaWYoYlthXS5nZXRFbGVtZW50KCkuJC5jaGVja2VkKXJldHVybiBiW2FdLmdldFZhbHVlKCk7cmV0dXJuIG51bGx9LGFjY2Vzc0tleVVwOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fLmNoaWxkcmVuLGE7Zm9yKGE9MDthPGIubGVuZ3RoO2ErKylpZihiW2FdLmdldEVsZW1lbnQoKS4kLmNoZWNrZWQpe2JbYV0uZ2V0RWxlbWVudCgpLmZvY3VzKCk7cmV0dXJufWJbMF0uZ2V0RWxlbWVudCgpLmZvY3VzKCl9LGV2ZW50UHJvY2Vzc29yczp7b25DaGFuZ2U6ZnVuY3Rpb24oYixhKXtpZighQ0tFRElUT1IuZW52LmllfHw4PENLRURJVE9SLmVudi52ZXJzaW9uKXJldHVybiByLm9uQ2hhbmdlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhPVxyXG50aGlzLl8uY2hpbGRyZW4sYj10aGlzLGM9MDtjPGEubGVuZ3RoO2MrKylhW2NdLmdldEVsZW1lbnQoKS5vbihcInByb3BlcnR5Y2hhbmdlXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGEuJDtcImNoZWNrZWRcIj09YS5wcm9wZXJ0eU5hbWUmJnRoaXMuJC5jaGVja2VkJiZiLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX0pfSl9LHRoaXMpO3RoaXMub24oXCJjaGFuZ2VcIixhKTtyZXR1cm4gbnVsbH19fSxxLCEwKTtDS0VESVRPUi51aS5kaWFsb2cuZmlsZS5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQscSx7Z2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uZnJhbWVJZCkuZ2V0RnJhbWVEb2N1bWVudCgpO3JldHVybiAwPGIuJC5mb3Jtcy5sZW5ndGg/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGIuJC5mb3Jtc1swXS5lbGVtZW50c1swXSk6XHJcbnRoaXMuZ2V0RWxlbWVudCgpfSxzdWJtaXQ6ZnVuY3Rpb24oKXt0aGlzLmdldElucHV0RWxlbWVudCgpLmdldFBhcmVudCgpLiQuc3VibWl0KCk7cmV0dXJuIHRoaXN9LGdldEFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLmdldFBhcmVudCgpLiQuYWN0aW9ufSxyZWdpc3RlckV2ZW50czpmdW5jdGlvbihiKXt2YXIgYT0vXm9uKFtBLVpdXFx3KykvLGQsZj1mdW5jdGlvbihhLGIsYyxkKXthLm9uKFwiZm9ybUxvYWRlZFwiLGZ1bmN0aW9uKCl7YS5nZXRJbnB1dEVsZW1lbnQoKS5vbihjLGQsYSl9KX0sYztmb3IoYyBpbiBiKWlmKGQ9Yy5tYXRjaChhKSl0aGlzLmV2ZW50UHJvY2Vzc29yc1tjXT90aGlzLmV2ZW50UHJvY2Vzc29yc1tjXS5jYWxsKHRoaXMsdGhpcy5fLmRpYWxvZyxiW2NdKTpmKHRoaXMsdGhpcy5fLmRpYWxvZyxkWzFdLnRvTG93ZXJDYXNlKCksYltjXSk7cmV0dXJuIHRoaXN9LHJlc2V0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2QuJC5vcGVuKCk7XHJcbnZhciBiPVwiXCI7Zi5zaXplJiYoYj1mLnNpemUtKENLRURJVE9SLmVudi5pZT83OjApKTt2YXIgaD1hLmZyYW1lSWQrXCJfaW5wdXRcIjtkLiQud3JpdGUoWydcXHgzY2h0bWwgZGlyXFx4M2RcIicrZysnXCIgbGFuZ1xceDNkXCInK2srJ1wiXFx4M2VcXHgzY2hlYWRcXHgzZVxceDNjdGl0bGVcXHgzZVxceDNjL3RpdGxlXFx4M2VcXHgzYy9oZWFkXFx4M2VcXHgzY2JvZHkgc3R5bGVcXHgzZFwibWFyZ2luOiAwOyBvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcIlxceDNlJywnXFx4M2Nmb3JtIGVuY3R5cGVcXHgzZFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIG1ldGhvZFxceDNkXCJQT1NUXCIgZGlyXFx4M2RcIicrZysnXCIgbGFuZ1xceDNkXCInK2srJ1wiIGFjdGlvblxceDNkXCInLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZi5hY3Rpb24pLCdcIlxceDNlXFx4M2NsYWJlbCBpZFxceDNkXCInLGEubGFiZWxJZCwnXCIgZm9yXFx4M2RcIicsaCwnXCIgc3R5bGVcXHgzZFwiZGlzcGxheTpub25lXCJcXHgzZScsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShmLmxhYmVsKSxcclxuJ1xceDNjL2xhYmVsXFx4M2VcXHgzY2lucHV0IHN0eWxlXFx4M2RcIndpZHRoOjEwMCVcIiBpZFxceDNkXCInLGgsJ1wiIGFyaWEtbGFiZWxsZWRieVxceDNkXCInLGEubGFiZWxJZCwnXCIgdHlwZVxceDNkXCJmaWxlXCIgbmFtZVxceDNkXCInLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZi5pZHx8XCJja2VfdXBsb2FkXCIpLCdcIiBzaXplXFx4M2RcIicsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZSgwPGI/YjpcIlwiKSwnXCIgL1xceDNlXFx4M2MvZm9ybVxceDNlXFx4M2MvYm9keVxceDNlXFx4M2MvaHRtbFxceDNlXFx4M2NzY3JpcHRcXHgzZScsQ0tFRElUT1IuZW52LmllP1wiKFwiK0NLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtcIjpcIlwiLFwid2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oXCIrZStcIik7XCIsXCJ3aW5kb3cub25iZWZvcmV1bmxvYWQgXFx4M2QgZnVuY3Rpb24oKSB7d2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oXCIrbStcIil9XCIsXCJcXHgzYy9zY3JpcHRcXHgzZVwiXS5qb2luKFwiXCIpKTtcclxuZC4kLmNsb3NlKCk7Zm9yKGI9MDtiPGMubGVuZ3RoO2IrKyljW2JdLmVuYWJsZSgpfXZhciBhPXRoaXMuXyxkPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoYS5mcmFtZUlkKS5nZXRGcmFtZURvY3VtZW50KCksZj1hLmRlZmluaXRpb24sYz1hLmJ1dHRvbnMsZT10aGlzLmZvcm1Mb2FkZWROdW1iZXIsbT10aGlzLmZvcm1VbmxvYWROdW1iZXIsZz1hLmRpYWxvZy5fLmVkaXRvci5sYW5nLmRpcixrPWEuZGlhbG9nLl8uZWRpdG9yLmxhbmdDb2RlO2V8fChlPXRoaXMuZm9ybUxvYWRlZE51bWJlcj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbigpe3RoaXMuZmlyZShcImZvcm1Mb2FkZWRcIil9LHRoaXMpLG09dGhpcy5mb3JtVW5sb2FkTnVtYmVyPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5jbGVhckN1c3RvbURhdGEoKX0sdGhpcyksdGhpcy5nZXREaWFsb2coKS5fLmVkaXRvci5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKGUpO1xyXG5DS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihtKX0pKTtDS0VESVRPUi5lbnYuZ2Vja28/c2V0VGltZW91dChiLDUwMCk6YigpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLiQudmFsdWV8fFwiXCJ9LHNldEluaXRWYWx1ZTpmdW5jdGlvbigpe3RoaXMuXy5pbml0VmFsdWU9XCJcIn0sZXZlbnRQcm9jZXNzb3JzOntvbkNoYW5nZTpmdW5jdGlvbihiLGEpe3RoaXMuXy5kb21PbkNoYW5nZVJlZ2lzdGVyZWR8fCh0aGlzLm9uKFwiZm9ybUxvYWRlZFwiLGZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7dGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMuZ2V0VmFsdWUoKX0pfSx0aGlzKX0sdGhpcyksdGhpcy5fLmRvbU9uQ2hhbmdlUmVnaXN0ZXJlZD0hMCk7dGhpcy5vbihcImNoYW5nZVwiLGEpfX0sa2V5Ym9hcmRGb2N1c2FibGU6ITB9LCEwKTtDS0VESVRPUi51aS5kaWFsb2cuZmlsZUJ1dHRvbi5wcm90b3R5cGU9XHJcbm5ldyBDS0VESVRPUi51aS5kaWFsb2cuYnV0dG9uO0NLRURJVE9SLnVpLmRpYWxvZy5maWVsZHNldC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuY2xvbmUoQ0tFRElUT1IudWkuZGlhbG9nLmhib3gucHJvdG90eXBlKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwidGV4dFwiLHYpO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJwYXNzd29yZFwiLHYpO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJjaGVja2JveFwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJyYWRpb1wiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJidXR0b25cIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwic2VsZWN0XCIsbik7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcImZpbGVcIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwiZmlsZUJ1dHRvblwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJodG1sXCIsXHJcbm4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJmaWVsZHNldFwiLHtidWlsZDpmdW5jdGlvbihiLGEsZCl7Zm9yKHZhciBmPWEuY2hpbGRyZW4sYyxlPVtdLGg9W10sZz0wO2c8Zi5sZW5ndGgmJihjPWZbZ10pO2crKyl7dmFyIGs9W107ZS5wdXNoKGspO2gucHVzaChDS0VESVRPUi5kaWFsb2cuXy51aUVsZW1lbnRCdWlsZGVyc1tjLnR5cGVdLmJ1aWxkKGIsYyxrKSl9cmV0dXJuIG5ldyBDS0VESVRPUi51aS5kaWFsb2dbYS50eXBlXShiLGgsZSxkLGEpfX0pfX0pO0NLRURJVE9SLkRJQUxPR19SRVNJWkVfTk9ORT0wO0NLRURJVE9SLkRJQUxPR19SRVNJWkVfV0lEVEg9MTtDS0VESVRPUi5ESUFMT0dfUkVTSVpFX0hFSUdIVD0yO0NLRURJVE9SLkRJQUxPR19SRVNJWkVfQk9USD0zO0NLRURJVE9SLkRJQUxPR19TVEFURV9JRExFPTE7Q0tFRElUT1IuRElBTE9HX1NUQVRFX0JVU1k9MjtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24geCgpe2Zvcih2YXIgYT10aGlzLl8udGFiSWRMaXN0Lmxlbmd0aCxiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5fLnRhYklkTGlzdCx0aGlzLl8uY3VycmVudFRhYklkKSthLGM9Yi0xO2M+Yi1hO2MtLSlpZih0aGlzLl8udGFic1t0aGlzLl8udGFiSWRMaXN0W2MlYV1dWzBdLiQub2Zmc2V0SGVpZ2h0KXJldHVybiB0aGlzLl8udGFiSWRMaXN0W2MlYV07cmV0dXJuIG51bGx9ZnVuY3Rpb24gQSgpe2Zvcih2YXIgYT10aGlzLl8udGFiSWRMaXN0Lmxlbmd0aCxiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5fLnRhYklkTGlzdCx0aGlzLl8uY3VycmVudFRhYklkKSxjPWIrMTtjPGIrYTtjKyspaWYodGhpcy5fLnRhYnNbdGhpcy5fLnRhYklkTGlzdFtjJWFdXVswXS4kLm9mZnNldEhlaWdodClyZXR1cm4gdGhpcy5fLnRhYklkTGlzdFtjJWFdO3JldHVybiBudWxsfWZ1bmN0aW9uIEsoYSxiKXtmb3IodmFyIGM9YS4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksXHJcbmQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChjW2RdKTtcInRleHRcIj09Zi5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLnRvTG93ZXJDYXNlKCkmJihiPyhmLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsZi5nZXRDdXN0b21EYXRhKFwiZmFrZV92YWx1ZVwiKXx8XCJcIiksZi5yZW1vdmVDdXN0b21EYXRhKFwiZmFrZV92YWx1ZVwiKSk6KGYuc2V0Q3VzdG9tRGF0YShcImZha2VfdmFsdWVcIixmLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKSxmLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIikpKX19ZnVuY3Rpb24gVChhLGIpe3ZhciBjPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCk7YyYmKGE/Yy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWludmFsaWRcIik6Yy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWludmFsaWRcIiwhMCkpO2F8fCh0aGlzLnNlbGVjdD90aGlzLnNlbGVjdCgpOnRoaXMuZm9jdXMoKSk7YiYmYWxlcnQoYik7dGhpcy5maXJlKFwidmFsaWRhdGVkXCIse3ZhbGlkOmEsbXNnOmJ9KX1cclxuZnVuY3Rpb24gVSgpe3ZhciBhPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCk7YSYmYS5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWludmFsaWRcIil9ZnVuY3Rpb24gVihhKXt2YXIgYj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChDS0VESVRPUi5hZGRUZW1wbGF0ZShcImRpYWxvZ1wiLFcpLm91dHB1dCh7aWQ6Q0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpLGVkaXRvcklkOmEuaWQsbGFuZ0RpcjphLmxhbmcuZGlyLGxhbmdDb2RlOmEubGFuZ0NvZGUsZWRpdG9yRGlhbG9nQ2xhc3M6XCJja2VfZWRpdG9yX1wiK2EubmFtZS5yZXBsYWNlKC9cXC4vZyxcIlxcXFwuXCIpK1wiX2RpYWxvZ1wiLGNsb3NlVGl0bGU6YS5sYW5nLmNvbW1vbi5jbG9zZSxoaWRwaTpDS0VESVRPUi5lbnYuaGlkcGk/XCJja2VfaGlkcGlcIjpcIlwifSkpLGM9Yi5nZXRDaGlsZChbMCwwLDAsMCwwXSksZD1jLmdldENoaWxkKDApLGU9Yy5nZXRDaGlsZCgxKTthLnBsdWdpbnMuY2xpcGJvYXJkJiZDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5wcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQoYyk7XHJcbiFDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi5xdWlya3N8fENLRURJVE9SLmVudi5lZGdlfHwoYT1cImphdmFzY3JpcHQ6dm9pZChmdW5jdGlvbigpe1wiK2VuY29kZVVSSUNvbXBvbmVudChcImRvY3VtZW50Lm9wZW4oKTsoXCIrQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO2RvY3VtZW50LmNsb3NlKCk7XCIpK1wifSgpKVwiLENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY2lmcmFtZSBmcmFtZUJvcmRlclxceDNkXCIwXCIgY2xhc3NcXHgzZFwiY2tlX2lmcmFtZV9zaGltXCIgc3JjXFx4M2RcIicrYSsnXCIgdGFiSW5kZXhcXHgzZFwiLTFcIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKS5hcHBlbmRUbyhjLmdldFBhcmVudCgpKSk7ZC51bnNlbGVjdGFibGUoKTtlLnVuc2VsZWN0YWJsZSgpO3JldHVybntlbGVtZW50OmIscGFydHM6e2RpYWxvZzpiLmdldENoaWxkKDApLHRpdGxlOmQsY2xvc2U6ZSx0YWJzOmMuZ2V0Q2hpbGQoMiksY29udGVudHM6Yy5nZXRDaGlsZChbMywwLDAsMF0pLFxyXG5mb290ZXI6Yy5nZXRDaGlsZChbMywwLDEsMF0pfX19ZnVuY3Rpb24gTChhLGIsYyl7dGhpcy5lbGVtZW50PWI7dGhpcy5mb2N1c0luZGV4PWM7dGhpcy50YWJJbmRleD0wO3RoaXMuaXNGb2N1c2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4hYi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSYmYi5pc1Zpc2libGUoKX07dGhpcy5mb2N1cz1mdW5jdGlvbigpe2EuXy5jdXJyZW50Rm9jdXNJbmRleD10aGlzLmZvY3VzSW5kZXg7dGhpcy5lbGVtZW50LmZvY3VzKCl9O2Iub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldEtleXN0cm9rZSgpaW57MzI6MSwxMzoxfSYmdGhpcy5maXJlKFwiY2xpY2tcIil9KTtiLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe3RoaXMuZmlyZShcIm1vdXNlb3ZlclwiKX0pO2Iub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJtb3VzZW91dFwiKX0pfWZ1bmN0aW9uIFgoYSl7ZnVuY3Rpb24gYigpe2EubGF5b3V0KCl9dmFyIGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCk7XHJcbmMub24oXCJyZXNpemVcIixiKTthLm9uKFwiaGlkZVwiLGZ1bmN0aW9uKCl7Yy5yZW1vdmVMaXN0ZW5lcihcInJlc2l6ZVwiLGIpfSl9ZnVuY3Rpb24gTShhLGIpe3RoaXMuXz17ZGlhbG9nOmF9O0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGIpfWZ1bmN0aW9uIFkoYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmdldFNpemUoKSxrPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLmdldFZpZXdQYW5lU2l6ZSgpLHE9Yi5kYXRhLiQuc2NyZWVuWCxuPWIuZGF0YS4kLnNjcmVlblkscj1xLWQueCxsPW4tZC55O2Q9e3g6cSx5Om59O2UueCs9cjtlLnkrPWw7YS5tb3ZlKGUueCtoWzNdPGc/LWhbM106ZS54LWhbMV0+ay53aWR0aC1jLndpZHRoLWc/ay53aWR0aC1jLndpZHRoKyhcInJ0bFwiPT1mLmxhbmcuZGlyPzA6aFsxXSk6ZS54LGUueStoWzBdPGc/LWhbMF06ZS55LWhbMl0+ay5oZWlnaHQtYy5oZWlnaHQtZz9rLmhlaWdodC1jLmhlaWdodCtoWzJdOmUueSwxKTtiLmRhdGEucHJldmVudERlZmF1bHQoKX1cclxuZnVuY3Rpb24gYygpe0NLRURJVE9SLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsYik7Q0tFRElUT1IuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7aWYoQ0tFRElUT1IuZW52LmllNkNvbXBhdCl7dmFyIGE9dS5nZXRDaGlsZCgwKS5nZXRGcmFtZURvY3VtZW50KCk7YS5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGIpO2EucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyl9fXZhciBkPW51bGwsZT1udWxsLGY9YS5nZXRQYXJlbnRFZGl0b3IoKSxnPWYuY29uZmlnLmRpYWxvZ19tYWduZXREaXN0YW5jZSxoPUNLRURJVE9SLnNraW4ubWFyZ2luc3x8WzAsMCwwLDBdO1widW5kZWZpbmVkXCI9PXR5cGVvZiBnJiYoZz0yMCk7YS5wYXJ0cy50aXRsZS5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGcpe2Q9e3g6Zy5kYXRhLiQuc2NyZWVuWCx5OmcuZGF0YS4kLnNjcmVlbll9O0NLRURJVE9SLmRvY3VtZW50Lm9uKFwibW91c2Vtb3ZlXCIsYik7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZXVwXCIsXHJcbmMpO2U9YS5nZXRQb3NpdGlvbigpO2lmKENLRURJVE9SLmVudi5pZTZDb21wYXQpe3ZhciBmPXUuZ2V0Q2hpbGQoMCkuZ2V0RnJhbWVEb2N1bWVudCgpO2Yub24oXCJtb3VzZW1vdmVcIixiKTtmLm9uKFwibW91c2V1cFwiLGMpfWcuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSxhKX1mdW5jdGlvbiBaKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9XCJydGxcIj09Zi5sYW5nLmRpcixuPWsud2lkdGgscT1rLmhlaWdodCxHPW4rKGIuZGF0YS4kLnNjcmVlblgtbS54KSooYz8tMToxKSooYS5fLm1vdmVkPzE6MiksSD1xKyhiLmRhdGEuJC5zY3JlZW5ZLW0ueSkqKGEuXy5tb3ZlZD8xOjIpLEI9YS5fLmVsZW1lbnQuZ2V0Rmlyc3QoKSxCPWMmJkIuZ2V0Q29tcHV0ZWRTdHlsZShcInJpZ2h0XCIpLEM9YS5nZXRQb3NpdGlvbigpO0MueStIPnAuaGVpZ2h0JiYoSD1wLmhlaWdodC1DLnkpOyhjP0I6Qy54KStHPnAud2lkdGgmJihHPXAud2lkdGgtKGM/QjpDLngpKTtpZihlPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX1dJRFRIfHxcclxuZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9CT1RIKW49TWF0aC5tYXgoZC5taW5XaWR0aHx8MCxHLWcpO2lmKGU9PUNLRURJVE9SLkRJQUxPR19SRVNJWkVfSEVJR0hUfHxlPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX0JPVEgpcT1NYXRoLm1heChkLm1pbkhlaWdodHx8MCxILWgpO2EucmVzaXplKG4scSk7YS5fLm1vdmVkfHxhLmxheW91dCgpO2IuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGMoKXtDS0VESVRPUi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTtDS0VESVRPUi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGIpO3EmJihxLnJlbW92ZSgpLHE9bnVsbCk7aWYoQ0tFRElUT1IuZW52LmllNkNvbXBhdCl7dmFyIGE9dS5nZXRDaGlsZCgwKS5nZXRGcmFtZURvY3VtZW50KCk7YS5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTthLnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsYil9fXZhciBkPWEuZGVmaW5pdGlvbixlPWQucmVzaXphYmxlO1xyXG5pZihlIT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX05PTkUpe3ZhciBmPWEuZ2V0UGFyZW50RWRpdG9yKCksZyxoLHAsbSxrLHEsbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihlKXtrPWEuZ2V0U2l6ZSgpO3ZhciBkPWEucGFydHMuY29udGVudHM7ZC4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaWZyYW1lXCIpLmxlbmd0aCYmKHE9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfcmVzaXplX2NvdmVyXCIgc3R5bGVcXHgzZFwiaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlO1wiXFx4M2VcXHgzYy9kaXZcXHgzZScpLGQuYXBwZW5kKHEpKTtoPWsuaGVpZ2h0LWEucGFydHMuY29udGVudHMuZ2V0U2l6ZShcImhlaWdodFwiLCEoQ0tFRElUT1IuZW52LmdlY2tvfHxDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MpKTtnPWsud2lkdGgtYS5wYXJ0cy5jb250ZW50cy5nZXRTaXplKFwid2lkdGhcIixcclxuMSk7bT17eDplLnNjcmVlblgseTplLnNjcmVlbll9O3A9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCk7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZW1vdmVcIixiKTtDS0VESVRPUi5kb2N1bWVudC5vbihcIm1vdXNldXBcIixjKTtDS0VESVRPUi5lbnYuaWU2Q29tcGF0JiYoZD11LmdldENoaWxkKDApLmdldEZyYW1lRG9jdW1lbnQoKSxkLm9uKFwibW91c2Vtb3ZlXCIsYiksZC5vbihcIm1vdXNldXBcIixjKSk7ZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSk7YS5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBiPVwiXCI7ZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9XSURUSD9iPVwiIGNrZV9yZXNpemVyX2hvcml6b250YWxcIjplPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX0hFSUdIVCYmKGI9XCIgY2tlX3Jlc2l6ZXJfdmVydGljYWxcIik7Yj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX3Jlc2l6ZXInK1xyXG5iK1wiIGNrZV9yZXNpemVyX1wiK2YubGFuZy5kaXIrJ1wiIHRpdGxlXFx4M2RcIicrQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShmLmxhbmcuY29tbW9uLnJlc2l6ZSkrJ1wiIG9ubW91c2Vkb3duXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbignK24rJywgZXZlbnQgKVwiXFx4M2UnKyhcImx0clwiPT1mLmxhbmcuZGlyP1wi4peiXCI6XCLil6NcIikrXCJcXHgzYy9kaXZcXHgzZVwiKTthLnBhcnRzLmZvb3Rlci5hcHBlbmQoYiwxKX0pO2Yub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtDS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihuKX0pfX1mdW5jdGlvbiBJKGEpe2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgxKX1mdW5jdGlvbiBOKGEpe3ZhciBiPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLGM9YS5jb25maWcsZD1jLmRpYWxvZ19iYWNrZ3JvdW5kQ292ZXJDb2xvcnx8XCJ3aGl0ZVwiLGU9Yy5kaWFsb2dfYmFja2dyb3VuZENvdmVyT3BhY2l0eSxmPWMuYmFzZUZsb2F0WkluZGV4LGM9Q0tFRElUT1IudG9vbHMuZ2VuS2V5KGQsXHJcbmUsZiksZz16W2NdO2c/Zy5zaG93KCk6KGY9WydcXHgzY2RpdiB0YWJJbmRleFxceDNkXCItMVwiIHN0eWxlXFx4M2RcInBvc2l0aW9uOiAnLENLRURJVE9SLmVudi5pZTZDb21wYXQ/XCJhYnNvbHV0ZVwiOlwiZml4ZWRcIixcIjsgei1pbmRleDogXCIsZixcIjsgdG9wOiAwcHg7IGxlZnQ6IDBweDsgXCIsQ0tFRElUT1IuZW52LmllNkNvbXBhdD9cIlwiOlwiYmFja2dyb3VuZC1jb2xvcjogXCIrZCwnXCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19iYWNrZ3JvdW5kX2NvdmVyXCJcXHgzZSddLENLRURJVE9SLmVudi5pZTZDb21wYXQmJihkPVwiXFx4M2NodG1sXFx4M2VcXHgzY2JvZHkgc3R5bGVcXHgzZFxcXFwnYmFja2dyb3VuZC1jb2xvcjpcIitkK1wiO1xcXFwnXFx4M2VcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2VcIixmLnB1c2goJ1xceDNjaWZyYW1lIGhpZGVmb2N1c1xceDNkXCJ0cnVlXCIgZnJhbWVib3JkZXJcXHgzZFwiMFwiIGlkXFx4M2RcImNrZV9kaWFsb2dfYmFja2dyb3VuZF9pZnJhbWVcIiBzcmNcXHgzZFwiamF2YXNjcmlwdDonKSxmLnB1c2goXCJ2b2lkKChmdW5jdGlvbigpe1wiK1xyXG5lbmNvZGVVUklDb21wb25lbnQoXCJkb2N1bWVudC5vcGVuKCk7KFwiK0NLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtkb2N1bWVudC53cml0ZSggJ1wiK2QrXCInICk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KSgpKVwiKSxmLnB1c2goJ1wiIHN0eWxlXFx4M2RcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDogMTAwJTtmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5XFx4M2QwKVwiXFx4M2VcXHgzYy9pZnJhbWVcXHgzZScpKSxmLnB1c2goXCJcXHgzYy9kaXZcXHgzZVwiKSxnPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGYuam9pbihcIlwiKSksZy5zZXRPcGFjaXR5KHZvaWQgMCE9PWU/ZTouNSksZy5vbihcImtleWRvd25cIixJKSxnLm9uKFwia2V5cHJlc3NcIixJKSxnLm9uKFwia2V5dXBcIixJKSxnLmFwcGVuZFRvKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSkseltjXT1nKTthLmZvY3VzTWFuYWdlci5hZGQoZyk7XHJcbnU9ZzthPWZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRWaWV3UGFuZVNpemUoKTtnLnNldFN0eWxlcyh7d2lkdGg6YS53aWR0aCtcInB4XCIsaGVpZ2h0OmEuaGVpZ2h0K1wicHhcIn0pfTt2YXIgaD1mdW5jdGlvbigpe3ZhciBhPWIuZ2V0U2Nyb2xsUG9zaXRpb24oKSxjPUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3A7Zy5zZXRTdHlsZXMoe2xlZnQ6YS54K1wicHhcIix0b3A6YS55K1wicHhcIn0pO2lmKGMpe2RvIGE9Yy5nZXRQb3NpdGlvbigpLGMubW92ZShhLngsYS55KTt3aGlsZShjPWMuXy5wYXJlbnREaWFsb2cpfX07Sj1hO2Iub24oXCJyZXNpemVcIixhKTthKCk7Q0tFRElUT1IuZW52Lm1hYyYmQ0tFRElUT1IuZW52LndlYmtpdHx8Zy5mb2N1cygpO2lmKENLRURJVE9SLmVudi5pZTZDb21wYXQpe3ZhciBwPWZ1bmN0aW9uKCl7aCgpO2FyZ3VtZW50cy5jYWxsZWUucHJldlNjcm9sbEhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtiLiQuc2V0VGltZW91dChmdW5jdGlvbigpe3AucHJldlNjcm9sbEhhbmRsZXI9XHJcbndpbmRvdy5vbnNjcm9sbHx8ZnVuY3Rpb24oKXt9O3dpbmRvdy5vbnNjcm9sbD1wfSwwKTtoKCl9fWZ1bmN0aW9uIE8oYSl7dSYmKGEuZm9jdXNNYW5hZ2VyLnJlbW92ZSh1KSxhPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLHUuaGlkZSgpLGEucmVtb3ZlTGlzdGVuZXIoXCJyZXNpemVcIixKKSxDS0VESVRPUi5lbnYuaWU2Q29tcGF0JiZhLiQuc2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5vbnNjcm9sbD13aW5kb3cub25zY3JvbGwmJndpbmRvdy5vbnNjcm9sbC5wcmV2U2Nyb2xsSGFuZGxlcnx8bnVsbH0sMCksSj1udWxsKX12YXIgdj1DS0VESVRPUi50b29scy5jc3NMZW5ndGgsVz0nXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX3Jlc2V0X2FsbCB7ZWRpdG9ySWR9IHtlZGl0b3JEaWFsb2dDbGFzc30ge2hpZHBpfVwiIGRpclxceDNkXCJ7bGFuZ0Rpcn1cIiBsYW5nXFx4M2RcIntsYW5nQ29kZX1cIiByb2xlXFx4M2RcImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieVxceDNkXCJja2VfZGlhbG9nX3RpdGxlX3tpZH1cIlxceDNlXFx4M2N0YWJsZSBjbGFzc1xceDNkXCJja2VfZGlhbG9nICcrXHJcbkNLRURJVE9SLmVudi5jc3NDbGFzcysnIGNrZV97bGFuZ0Rpcn1cIiBzdHlsZVxceDNkXCJwb3NpdGlvbjphYnNvbHV0ZVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjdHJcXHgzZVxceDNjdGQgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19ib2R5XCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2NkaXYgaWRcXHgzZFwiY2tlX2RpYWxvZ190aXRsZV97aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ190aXRsZVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjL2RpdlxceDNlXFx4M2NhIGlkXFx4M2RcImNrZV9kaWFsb2dfY2xvc2VfYnV0dG9uX3tpZH1cIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX2Nsb3NlX2J1dHRvblwiIGhyZWZcXHgzZFwiamF2YXNjcmlwdDp2b2lkKDApXCIgdGl0bGVcXHgzZFwie2Nsb3NlVGl0bGV9XCIgcm9sZVxceDNkXCJidXR0b25cIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9sYWJlbFwiXFx4M2VYXFx4M2Mvc3BhblxceDNlXFx4M2MvYVxceDNlXFx4M2NkaXYgaWRcXHgzZFwiY2tlX2RpYWxvZ190YWJzX3tpZH1cIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3RhYnNcIiByb2xlXFx4M2RcInRhYmxpc3RcIlxceDNlXFx4M2MvZGl2XFx4M2VcXHgzY3RhYmxlIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfY29udGVudHNcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzY3RyXFx4M2VcXHgzY3RkIGlkXFx4M2RcImNrZV9kaWFsb2dfY29udGVudHNfe2lkfVwiIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfY29udGVudHNfYm9keVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXFx4M2N0clxceDNlXFx4M2N0ZCBpZFxceDNkXCJja2VfZGlhbG9nX2Zvb3Rlcl97aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19mb290ZXJcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzYy90ZFxceDNlXFx4M2MvdHJcXHgzZVxceDNjL3RhYmxlXFx4M2VcXHgzYy9kaXZcXHgzZVxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXFx4M2MvdGFibGVcXHgzZVxceDNjL2RpdlxceDNlJztcclxuQ0tFRElUT1IuZGlhbG9nPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe3ZhciBhPWwuXy5mb2N1c0xpc3Q7YS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudGFiSW5kZXghPWIudGFiSW5kZXg/Yi50YWJJbmRleC1hLnRhYkluZGV4OmEuZm9jdXNJbmRleC1iLmZvY3VzSW5kZXh9KTtmb3IodmFyIGI9YS5sZW5ndGgsYz0wO2M8YjtjKyspYVtjXS5mb2N1c0luZGV4PWN9ZnVuY3Rpb24gZChhKXt2YXIgYj1sLl8uZm9jdXNMaXN0O2E9YXx8MDtpZighKDE+Yi5sZW5ndGgpKXt2YXIgYz1sLl8uY3VycmVudEZvY3VzSW5kZXg7bC5fLnRhYkJhck1vZGUmJjA+YSYmKGM9MCk7dHJ5e2JbY10uZ2V0SW5wdXRFbGVtZW50KCkuJC5ibHVyKCl9Y2F0Y2goZSl7fXZhciBkPWMsZz0xPGwuXy5wYWdlQ291bnQ7ZG97ZCs9YTtpZihnJiYhbC5fLnRhYkJhck1vZGUmJihkPT1iLmxlbmd0aHx8LTE9PWQpKXtsLl8udGFiQmFyTW9kZT0hMDtsLl8udGFic1tsLl8uY3VycmVudFRhYklkXVswXS5mb2N1cygpO1xyXG5sLl8uY3VycmVudEZvY3VzSW5kZXg9LTE7cmV0dXJufWQ9KGQrYi5sZW5ndGgpJWIubGVuZ3RoO2lmKGQ9PWMpYnJlYWt9d2hpbGUoYSYmIWJbZF0uaXNGb2N1c2FibGUoKSk7YltkXS5mb2N1cygpO1widGV4dFwiPT1iW2RdLnR5cGUmJmJbZF0uc2VsZWN0KCl9fWZ1bmN0aW9uIGUoYil7aWYobD09Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcCl7dmFyIGM9Yi5kYXRhLmdldEtleXN0cm9rZSgpLGU9XCJydGxcIj09YS5sYW5nLmRpcixnPVszNywzOCwzOSw0MF07cT1uPTA7aWYoOT09Y3x8Yz09Q0tFRElUT1IuU0hJRlQrOSlkKGM9PUNLRURJVE9SLlNISUZUKzk/LTE6MSkscT0xO2Vsc2UgaWYoYz09Q0tFRElUT1IuQUxUKzEyMSYmIWwuXy50YWJCYXJNb2RlJiYxPGwuZ2V0UGFnZUNvdW50KCkpbC5fLnRhYkJhck1vZGU9ITAsbC5fLnRhYnNbbC5fLmN1cnJlbnRUYWJJZF1bMF0uZm9jdXMoKSxsLl8uY3VycmVudEZvY3VzSW5kZXg9LTEscT0xO2Vsc2UgaWYoLTEhPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZyxcclxuYykmJmwuXy50YWJCYXJNb2RlKWM9LTEhPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoW2U/Mzk6MzcsMzhdLGMpP3guY2FsbChsKTpBLmNhbGwobCksbC5zZWxlY3RQYWdlKGMpLGwuXy50YWJzW2NdWzBdLmZvY3VzKCkscT0xO2Vsc2UgaWYoMTMhPWMmJjMyIT1jfHwhbC5fLnRhYkJhck1vZGUpaWYoMTM9PWMpYz1iLmRhdGEuZ2V0VGFyZ2V0KCksYy5pcyhcImFcIixcImJ1dHRvblwiLFwic2VsZWN0XCIsXCJ0ZXh0YXJlYVwiKXx8Yy5pcyhcImlucHV0XCIpJiZcImJ1dHRvblwiPT1jLiQudHlwZXx8KChjPXRoaXMuZ2V0QnV0dG9uKFwib2tcIikpJiZDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGMuY2xpY2ssMCxjKSxxPTEpLG49MTtlbHNlIGlmKDI3PT1jKShjPXRoaXMuZ2V0QnV0dG9uKFwiY2FuY2VsXCIpKT9DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGMuY2xpY2ssMCxjKTohMSE9PXRoaXMuZmlyZShcImNhbmNlbFwiLHtoaWRlOiEwfSkuaGlkZSYmdGhpcy5oaWRlKCksbj0xO2Vsc2UgcmV0dXJuO2Vsc2UgdGhpcy5zZWxlY3RQYWdlKHRoaXMuXy5jdXJyZW50VGFiSWQpLFxyXG50aGlzLl8udGFiQmFyTW9kZT0hMSx0aGlzLl8uY3VycmVudEZvY3VzSW5kZXg9LTEsZCgxKSxxPTE7ZihiKX19ZnVuY3Rpb24gZihhKXtxP2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgxKTpuJiZhLmRhdGEuc3RvcFByb3BhZ2F0aW9uKCl9dmFyIGc9Q0tFRElUT1IuZGlhbG9nLl8uZGlhbG9nRGVmaW5pdGlvbnNbYl0saD1DS0VESVRPUi50b29scy5jbG9uZShhYSkscD1hLmNvbmZpZy5kaWFsb2dfYnV0dG9uc09yZGVyfHxcIk9TXCIsbT1hLmxhbmcuZGlyLGs9e30scSxuOyhcIk9TXCI9PXAmJkNLRURJVE9SLmVudi5tYWN8fFwicnRsXCI9PXAmJlwibHRyXCI9PW18fFwibHRyXCI9PXAmJlwicnRsXCI9PW0pJiZoLmJ1dHRvbnMucmV2ZXJzZSgpO2c9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGcoYSksaCk7Zz1DS0VESVRPUi50b29scy5jbG9uZShnKTtnPW5ldyBQKHRoaXMsZyk7aD1WKGEpO3RoaXMuXz17ZWRpdG9yOmEsZWxlbWVudDpoLmVsZW1lbnQsbmFtZTpiLGNvbnRlbnRTaXplOnt3aWR0aDowLGhlaWdodDowfSxcclxuc2l6ZTp7d2lkdGg6MCxoZWlnaHQ6MH0sY29udGVudHM6e30sYnV0dG9uczp7fSxhY2Nlc3NLZXlNYXA6e30sdGFiczp7fSx0YWJJZExpc3Q6W10sY3VycmVudFRhYklkOm51bGwsY3VycmVudFRhYkluZGV4Om51bGwscGFnZUNvdW50OjAsbGFzdFRhYjpudWxsLHRhYkJhck1vZGU6ITEsZm9jdXNMaXN0OltdLGN1cnJlbnRGb2N1c0luZGV4OjAsaGFzRm9jdXM6ITF9O3RoaXMucGFydHM9aC5wYXJ0cztDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5maXJlKFwiYXJpYVdpZGdldFwiLHRoaXMucGFydHMuY29udGVudHMpfSwwLHRoaXMpO2g9e3Bvc2l0aW9uOkNLRURJVE9SLmVudi5pZTZDb21wYXQ/XCJhYnNvbHV0ZVwiOlwiZml4ZWRcIix0b3A6MCx2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9O2hbXCJydGxcIj09bT9cInJpZ2h0XCI6XCJsZWZ0XCJdPTA7dGhpcy5wYXJ0cy5kaWFsb2cuc2V0U3R5bGVzKGgpO0NLRURJVE9SLmV2ZW50LmNhbGwodGhpcyk7dGhpcy5kZWZpbml0aW9uPWc9Q0tFRElUT1IuZmlyZShcImRpYWxvZ0RlZmluaXRpb25cIixcclxue25hbWU6YixkZWZpbml0aW9uOmd9LGEpLmRlZmluaXRpb247aWYoIShcInJlbW92ZURpYWxvZ1RhYnNcImluIGEuXykmJmEuY29uZmlnLnJlbW92ZURpYWxvZ1RhYnMpe2g9YS5jb25maWcucmVtb3ZlRGlhbG9nVGFicy5zcGxpdChcIjtcIik7Zm9yKG09MDttPGgubGVuZ3RoO20rKylpZihwPWhbbV0uc3BsaXQoXCI6XCIpLDI9PXAubGVuZ3RoKXt2YXIgcj1wWzBdO2tbcl18fChrW3JdPVtdKTtrW3JdLnB1c2gocFsxXSl9YS5fLnJlbW92ZURpYWxvZ1RhYnM9a31pZihhLl8ucmVtb3ZlRGlhbG9nVGFicyYmKGs9YS5fLnJlbW92ZURpYWxvZ1RhYnNbYl0pKWZvcihtPTA7bTxrLmxlbmd0aDttKyspZy5yZW1vdmVDb250ZW50cyhrW21dKTtpZihnLm9uTG9hZCl0aGlzLm9uKFwibG9hZFwiLGcub25Mb2FkKTtpZihnLm9uU2hvdyl0aGlzLm9uKFwic2hvd1wiLGcub25TaG93KTtpZihnLm9uSGlkZSl0aGlzLm9uKFwiaGlkZVwiLGcub25IaWRlKTtpZihnLm9uT2spdGhpcy5vbihcIm9rXCIsZnVuY3Rpb24oYil7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO1xyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSwwKTshMT09PWcub25Pay5jYWxsKHRoaXMsYikmJihiLmRhdGEuaGlkZT0hMSl9KTt0aGlzLnN0YXRlPUNLRURJVE9SLkRJQUxPR19TVEFURV9JRExFO2lmKGcub25DYW5jZWwpdGhpcy5vbihcImNhbmNlbFwiLGZ1bmN0aW9uKGEpeyExPT09Zy5vbkNhbmNlbC5jYWxsKHRoaXMsYSkmJihhLmRhdGEuaGlkZT0hMSl9KTt2YXIgbD10aGlzLHQ9ZnVuY3Rpb24oYSl7dmFyIGI9bC5fLmNvbnRlbnRzLGM9ITEsZDtmb3IoZCBpbiBiKWZvcih2YXIgZSBpbiBiW2RdKWlmKGM9YS5jYWxsKHRoaXMsYltkXVtlXSkpcmV0dXJufTt0aGlzLm9uKFwib2tcIixmdW5jdGlvbihhKXt0KGZ1bmN0aW9uKGIpe2lmKGIudmFsaWRhdGUpe3ZhciBjPWIudmFsaWRhdGUodGhpcyksZD1cInN0cmluZ1wiPT10eXBlb2YgY3x8ITE9PT1jO2QmJihhLmRhdGEuaGlkZT0hMSxhLnN0b3AoKSk7VC5jYWxsKGIsIWQsXCJzdHJpbmdcIj09dHlwZW9mIGM/XHJcbmM6dm9pZCAwKTtyZXR1cm4gZH19KX0sdGhpcyxudWxsLDApO3RoaXMub24oXCJjYW5jZWxcIixmdW5jdGlvbihiKXt0KGZ1bmN0aW9uKGMpe2lmKGMuaXNDaGFuZ2VkKCkpcmV0dXJuIGEuY29uZmlnLmRpYWxvZ19ub0NvbmZpcm1DYW5jZWx8fGNvbmZpcm0oYS5sYW5nLmNvbW1vbi5jb25maXJtQ2FuY2VsKXx8KGIuZGF0YS5oaWRlPSExKSwhMH0pfSx0aGlzLG51bGwsMCk7dGhpcy5wYXJ0cy5jbG9zZS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7ITEhPT10aGlzLmZpcmUoXCJjYW5jZWxcIix7aGlkZTohMH0pLmhpZGUmJnRoaXMuaGlkZSgpO2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKTt0aGlzLmNoYW5nZUZvY3VzPWQ7dmFyIHk9dGhpcy5fLmVsZW1lbnQ7YS5mb2N1c01hbmFnZXIuYWRkKHksMSk7dGhpcy5vbihcInNob3dcIixmdW5jdGlvbigpe3kub24oXCJrZXlkb3duXCIsZSx0aGlzKTtpZihDS0VESVRPUi5lbnYuZ2Vja28peS5vbihcImtleXByZXNzXCIsZix0aGlzKX0pO3RoaXMub24oXCJoaWRlXCIsXHJcbmZ1bmN0aW9uKCl7eS5yZW1vdmVMaXN0ZW5lcihcImtleWRvd25cIixlKTtDS0VESVRPUi5lbnYuZ2Vja28mJnkucmVtb3ZlTGlzdGVuZXIoXCJrZXlwcmVzc1wiLGYpO3QoZnVuY3Rpb24oYSl7VS5hcHBseShhKX0pfSk7dGhpcy5vbihcImlmcmFtZUFkZGVkXCIsZnVuY3Rpb24oYSl7KG5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQoYS5kYXRhLmlmcmFtZS4kLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpKS5vbihcImtleWRvd25cIixlLHRoaXMsbnVsbCwwKX0pO3RoaXMub24oXCJzaG93XCIsZnVuY3Rpb24oKXtjKCk7dmFyIGI9MTxsLl8ucGFnZUNvdW50O2EuY29uZmlnLmRpYWxvZ19zdGFydHVwRm9jdXNUYWImJmI/KGwuXy50YWJCYXJNb2RlPSEwLGwuXy50YWJzW2wuXy5jdXJyZW50VGFiSWRdWzBdLmZvY3VzKCksbC5fLmN1cnJlbnRGb2N1c0luZGV4PS0xKTp0aGlzLl8uaGFzRm9jdXN8fCh0aGlzLl8uY3VycmVudEZvY3VzSW5kZXg9Yj8tMTp0aGlzLl8uZm9jdXNMaXN0Lmxlbmd0aC0xLGcub25Gb2N1cz9cclxuKGI9Zy5vbkZvY3VzLmNhbGwodGhpcykpJiZiLmZvY3VzKCk6ZCgxKSl9LHRoaXMsbnVsbCw0Mjk0OTY3Mjk1KTtpZihDS0VESVRPUi5lbnYuaWU2Q29tcGF0KXRoaXMub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEVsZW1lbnQoKSxiPWEuZ2V0Rmlyc3QoKTtiLnJlbW92ZSgpO2IuYXBwZW5kVG8oYSl9LHRoaXMpO1kodGhpcyk7Wih0aGlzKTsobmV3IENLRURJVE9SLmRvbS50ZXh0KGcudGl0bGUsQ0tFRElUT1IuZG9jdW1lbnQpKS5hcHBlbmRUbyh0aGlzLnBhcnRzLnRpdGxlKTtmb3IobT0wO208Zy5jb250ZW50cy5sZW5ndGg7bSsrKShrPWcuY29udGVudHNbbV0pJiZ0aGlzLmFkZFBhZ2Uoayk7dGhpcy5wYXJ0cy50YWJzLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuZ2V0VGFyZ2V0KCk7Yi5oYXNDbGFzcyhcImNrZV9kaWFsb2dfdGFiXCIpJiYoYj1iLiQuaWQsdGhpcy5zZWxlY3RQYWdlKGIuc3Vic3RyaW5nKDQsYi5sYXN0SW5kZXhPZihcIl9cIikpKSxcclxudGhpcy5fLnRhYkJhck1vZGUmJih0aGlzLl8udGFiQmFyTW9kZT0hMSx0aGlzLl8uY3VycmVudEZvY3VzSW5kZXg9LTEsZCgxKSksYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpfSx0aGlzKTttPVtdO2s9Q0tFRElUT1IuZGlhbG9nLl8udWlFbGVtZW50QnVpbGRlcnMuaGJveC5idWlsZCh0aGlzLHt0eXBlOlwiaGJveFwiLGNsYXNzTmFtZTpcImNrZV9kaWFsb2dfZm9vdGVyX2J1dHRvbnNcIix3aWR0aHM6W10sY2hpbGRyZW46Zy5idXR0b25zfSxtKS5nZXRDaGlsZCgpO3RoaXMucGFydHMuZm9vdGVyLnNldEh0bWwobS5qb2luKFwiXCIpKTtmb3IobT0wO208ay5sZW5ndGg7bSsrKXRoaXMuXy5idXR0b25zW2tbbV0uaWRdPWtbbV19O0NLRURJVE9SLmRpYWxvZy5wcm90b3R5cGU9e2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKTt0aGlzLl8uZWxlbWVudC5yZW1vdmUoKX0scmVzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7dGhpcy5fLmNvbnRlbnRTaXplJiZ0aGlzLl8uY29udGVudFNpemUud2lkdGg9PVxyXG5hJiZ0aGlzLl8uY29udGVudFNpemUuaGVpZ2h0PT1ifHwoQ0tFRElUT1IuZGlhbG9nLmZpcmUoXCJyZXNpemVcIix7ZGlhbG9nOnRoaXMsd2lkdGg6YSxoZWlnaHQ6Yn0sdGhpcy5fLmVkaXRvciksdGhpcy5maXJlKFwicmVzaXplXCIse3dpZHRoOmEsaGVpZ2h0OmJ9LHRoaXMuXy5lZGl0b3IpLHRoaXMucGFydHMuY29udGVudHMuc2V0U3R5bGVzKHt3aWR0aDphK1wicHhcIixoZWlnaHQ6YitcInB4XCJ9KSxcInJ0bFwiPT10aGlzLl8uZWRpdG9yLmxhbmcuZGlyJiZ0aGlzLl8ucG9zaXRpb24mJih0aGlzLl8ucG9zaXRpb24ueD1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRWaWV3UGFuZVNpemUoKS53aWR0aC10aGlzLl8uY29udGVudFNpemUud2lkdGgtcGFyc2VJbnQodGhpcy5fLmVsZW1lbnQuZ2V0Rmlyc3QoKS5nZXRTdHlsZShcInJpZ2h0XCIpLDEwKSksdGhpcy5fLmNvbnRlbnRTaXplPXt3aWR0aDphLGhlaWdodDpifSl9fSgpLGdldFNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uZWxlbWVudC5nZXRGaXJzdCgpO1xyXG5yZXR1cm57d2lkdGg6YS4kLm9mZnNldFdpZHRofHwwLGhlaWdodDphLiQub2Zmc2V0SGVpZ2h0fHwwfX0sbW92ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fLmVsZW1lbnQuZ2V0Rmlyc3QoKSxlPVwicnRsXCI9PXRoaXMuXy5lZGl0b3IubGFuZy5kaXIsZj1cImZpeGVkXCI9PWQuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpO0NLRURJVE9SLmVudi5pZSYmZC5zZXRTdHlsZShcInpvb21cIixcIjEwMCVcIik7ZiYmdGhpcy5fLnBvc2l0aW9uJiZ0aGlzLl8ucG9zaXRpb24ueD09YSYmdGhpcy5fLnBvc2l0aW9uLnk9PWJ8fCh0aGlzLl8ucG9zaXRpb249e3g6YSx5OmJ9LGZ8fChmPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLmdldFNjcm9sbFBvc2l0aW9uKCksYSs9Zi54LGIrPWYueSksZSYmKGY9dGhpcy5nZXRTaXplKCksYT1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRWaWV3UGFuZVNpemUoKS53aWR0aC1mLndpZHRoLWEpLGI9e3RvcDooMDxiP2I6MCkrXCJweFwifSxcclxuYltlP1wicmlnaHRcIjpcImxlZnRcIl09KDA8YT9hOjApK1wicHhcIixkLnNldFN0eWxlcyhiKSxjJiYodGhpcy5fLm1vdmVkPTEpKX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHRoaXMuXy5wb3NpdGlvbil9LHNob3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uZWxlbWVudCxiPXRoaXMuZGVmaW5pdGlvbjthLmdldFBhcmVudCgpJiZhLmdldFBhcmVudCgpLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkpP2Euc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKTphLmFwcGVuZFRvKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSk7dGhpcy5yZXNpemUodGhpcy5fLmNvbnRlbnRTaXplJiZ0aGlzLl8uY29udGVudFNpemUud2lkdGh8fGIud2lkdGh8fGIubWluV2lkdGgsdGhpcy5fLmNvbnRlbnRTaXplJiZ0aGlzLl8uY29udGVudFNpemUuaGVpZ2h0fHxiLmhlaWdodHx8Yi5taW5IZWlnaHQpO3RoaXMucmVzZXQoKTt0aGlzLnNlbGVjdFBhZ2UodGhpcy5kZWZpbml0aW9uLmNvbnRlbnRzWzBdLmlkKTtcclxubnVsbD09PUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRaSW5kZXgmJihDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50WkluZGV4PXRoaXMuXy5lZGl0b3IuY29uZmlnLmJhc2VGbG9hdFpJbmRleCk7dGhpcy5fLmVsZW1lbnQuZ2V0Rmlyc3QoKS5zZXRTdHlsZShcInotaW5kZXhcIixDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50WkluZGV4Kz0xMCk7bnVsbD09PUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3A/KENLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3A9dGhpcyx0aGlzLl8ucGFyZW50RGlhbG9nPW51bGwsTih0aGlzLl8uZWRpdG9yKSk6KHRoaXMuXy5wYXJlbnREaWFsb2c9Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcCx0aGlzLl8ucGFyZW50RGlhbG9nLmdldEVsZW1lbnQoKS5nZXRGaXJzdCgpLiQuc3R5bGUuekluZGV4LT1NYXRoLmZsb29yKHRoaXMuXy5lZGl0b3IuY29uZmlnLmJhc2VGbG9hdFpJbmRleC8yKSxDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wPXRoaXMpO1xyXG5hLm9uKFwia2V5ZG93blwiLFEpO2Eub24oXCJrZXl1cFwiLFIpO3RoaXMuXy5oYXNGb2N1cz0hMTtmb3IodmFyIGMgaW4gYi5jb250ZW50cylpZihiLmNvbnRlbnRzW2NdKXt2YXIgYT1iLmNvbnRlbnRzW2NdLGQ9dGhpcy5fLnRhYnNbYS5pZF0sZT1hLnJlcXVpcmVkQ29udGVudCxmPTA7aWYoZCl7Zm9yKHZhciBnIGluIHRoaXMuXy5jb250ZW50c1thLmlkXSl7dmFyIGg9dGhpcy5fLmNvbnRlbnRzW2EuaWRdW2ddO1wiaGJveFwiIT1oLnR5cGUmJlwidmJveFwiIT1oLnR5cGUmJmguZ2V0SW5wdXRFbGVtZW50KCkmJihoLnJlcXVpcmVkQ29udGVudCYmIXRoaXMuXy5lZGl0b3IuYWN0aXZlRmlsdGVyLmNoZWNrKGgucmVxdWlyZWRDb250ZW50KT9oLmRpc2FibGUoKTooaC5lbmFibGUoKSxmKyspKX0hZnx8ZSYmIXRoaXMuXy5lZGl0b3IuYWN0aXZlRmlsdGVyLmNoZWNrKGUpP2RbMF0uYWRkQ2xhc3MoXCJja2VfZGlhbG9nX3RhYl9kaXNhYmxlZFwiKTpkWzBdLnJlbW92ZUNsYXNzKFwiY2tlX2RpYWxvZ190YWJfZGlzYWJsZWRcIil9fUNLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmxheW91dCgpO1xyXG5YKHRoaXMpO3RoaXMucGFydHMuZGlhbG9nLnNldFN0eWxlKFwidmlzaWJpbGl0eVwiLFwiXCIpO3RoaXMuZmlyZU9uY2UoXCJsb2FkXCIse30pO0NLRURJVE9SLnVpLmZpcmUoXCJyZWFkeVwiLHRoaXMpO3RoaXMuZmlyZShcInNob3dcIix7fSk7dGhpcy5fLmVkaXRvci5maXJlKFwiZGlhbG9nU2hvd1wiLHRoaXMpO3RoaXMuXy5wYXJlbnREaWFsb2d8fHRoaXMuXy5lZGl0b3IuZm9jdXNNYW5hZ2VyLmxvY2soKTt0aGlzLmZvcmVhY2goZnVuY3Rpb24oYSl7YS5zZXRJbml0VmFsdWUmJmEuc2V0SW5pdFZhbHVlKCl9KX0sMTAwLHRoaXMpfSxsYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcnRzLmRpYWxvZyxiPXRoaXMuZ2V0U2l6ZSgpLGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCksZD0oYy53aWR0aC1iLndpZHRoKS8yLGU9KGMuaGVpZ2h0LWIuaGVpZ2h0KS8yO0NLRURJVE9SLmVudi5pZTZDb21wYXR8fChiLmhlaWdodCsoMDxlP2U6MCk+Yy5oZWlnaHR8fFxyXG5iLndpZHRoKygwPGQ/ZDowKT5jLndpZHRoP2Euc2V0U3R5bGUoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIik6YS5zZXRTdHlsZShcInBvc2l0aW9uXCIsXCJmaXhlZFwiKSk7dGhpcy5tb3ZlKHRoaXMuXy5tb3ZlZD90aGlzLl8ucG9zaXRpb24ueDpkLHRoaXMuXy5tb3ZlZD90aGlzLl8ucG9zaXRpb24ueTplKX0sZm9yZWFjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gdGhpcy5fLmNvbnRlbnRzKWZvcih2YXIgYyBpbiB0aGlzLl8uY29udGVudHNbYl0pYS5jYWxsKHRoaXMsdGhpcy5fLmNvbnRlbnRzW2JdW2NdKTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXthLnJlc2V0JiZhLnJlc2V0KDEpfTtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmZvcmVhY2goYSk7cmV0dXJuIHRoaXN9fSgpLHNldHVwQ29udGVudDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLmZvcmVhY2goZnVuY3Rpb24oYil7Yi5zZXR1cCYmYi5zZXR1cC5hcHBseShiLGEpfSl9LFxyXG5jb21taXRDb250ZW50OmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuZm9yZWFjaChmdW5jdGlvbihiKXtDS0VESVRPUi5lbnYuaWUmJnRoaXMuXy5jdXJyZW50Rm9jdXNJbmRleD09Yi5mb2N1c0luZGV4JiZiLmdldElucHV0RWxlbWVudCgpLiQuYmx1cigpO2IuY29tbWl0JiZiLmNvbW1pdC5hcHBseShiLGEpfSl9LGhpZGU6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcnRzLmRpYWxvZy5pc1Zpc2libGUoKSl7dGhpcy5maXJlKFwiaGlkZVwiLHt9KTt0aGlzLl8uZWRpdG9yLmZpcmUoXCJkaWFsb2dIaWRlXCIsdGhpcyk7dGhpcy5zZWxlY3RQYWdlKHRoaXMuXy50YWJJZExpc3RbMF0pO3ZhciBhPXRoaXMuXy5lbGVtZW50O2Euc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpO3RoaXMucGFydHMuZGlhbG9nLnNldFN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpO2ZvcihiYSh0aGlzKTtDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wIT10aGlzOylDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wLmhpZGUoKTtcclxuaWYodGhpcy5fLnBhcmVudERpYWxvZyl7dmFyIGI9dGhpcy5fLnBhcmVudERpYWxvZy5nZXRFbGVtZW50KCkuZ2V0Rmlyc3QoKTtiLnNldFN0eWxlKFwiei1pbmRleFwiLHBhcnNlSW50KGIuJC5zdHlsZS56SW5kZXgsMTApK01hdGguZmxvb3IodGhpcy5fLmVkaXRvci5jb25maWcuYmFzZUZsb2F0WkluZGV4LzIpKX1lbHNlIE8odGhpcy5fLmVkaXRvcik7aWYoQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcD10aGlzLl8ucGFyZW50RGlhbG9nKUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRaSW5kZXgtPTEwO2Vsc2V7Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFpJbmRleD1udWxsO2EucmVtb3ZlTGlzdGVuZXIoXCJrZXlkb3duXCIsUSk7YS5yZW1vdmVMaXN0ZW5lcihcImtleXVwXCIsUik7dmFyIGM9dGhpcy5fLmVkaXRvcjtjLmZvY3VzKCk7c2V0VGltZW91dChmdW5jdGlvbigpe2MuZm9jdXNNYW5hZ2VyLnVubG9jaygpO0NLRURJVE9SLmVudi5pT1MmJmMud2luZG93LmZvY3VzKCl9LDApfWRlbGV0ZSB0aGlzLl8ucGFyZW50RGlhbG9nO1xyXG50aGlzLmZvcmVhY2goZnVuY3Rpb24oYSl7YS5yZXNldEluaXRWYWx1ZSYmYS5yZXNldEluaXRWYWx1ZSgpfSk7dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5ESUFMT0dfU1RBVEVfSURMRSl9fSxhZGRQYWdlOmZ1bmN0aW9uKGEpe2lmKCFhLnJlcXVpcmVkQ29udGVudHx8dGhpcy5fLmVkaXRvci5maWx0ZXIuY2hlY2soYS5yZXF1aXJlZENvbnRlbnQpKXtmb3IodmFyIGI9W10sYz1hLmxhYmVsPycgdGl0bGVcXHgzZFwiJytDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpKydcIic6XCJcIixkPUNLRURJVE9SLmRpYWxvZy5fLnVpRWxlbWVudEJ1aWxkZXJzLnZib3guYnVpbGQodGhpcyx7dHlwZTpcInZib3hcIixjbGFzc05hbWU6XCJja2VfZGlhbG9nX3BhZ2VfY29udGVudHNcIixjaGlsZHJlbjphLmVsZW1lbnRzLGV4cGFuZDohIWEuZXhwYW5kLHBhZGRpbmc6YS5wYWRkaW5nLHN0eWxlOmEuc3R5bGV8fFwid2lkdGg6IDEwMCU7XCJ9LGIpLGU9dGhpcy5fLmNvbnRlbnRzW2EuaWRdPXt9LGY9ZC5nZXRDaGlsZCgpLFxyXG5nPTA7ZD1mLnNoaWZ0KCk7KWQubm90QWxsb3dlZHx8XCJoYm94XCI9PWQudHlwZXx8XCJ2Ym94XCI9PWQudHlwZXx8ZysrLGVbZC5pZF09ZCxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkLmdldENoaWxkJiZmLnB1c2guYXBwbHkoZixkLmdldENoaWxkKCkpO2d8fChhLmhpZGRlbj0hMCk7Yj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChiLmpvaW4oXCJcIikpO2Iuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwidGFicGFuZWxcIik7ZD1DS0VESVRPUi5lbnY7ZT1cImNrZV9cIithLmlkK1wiX1wiK0NLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKTtjPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKFsnXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdGFiXCInLDA8dGhpcy5fLnBhZ2VDb3VudD9cIiBja2VfbGFzdFwiOlwiY2tlX2ZpcnN0XCIsYyxhLmhpZGRlbj8nIHN0eWxlXFx4M2RcImRpc3BsYXk6bm9uZVwiJzpcIlwiLCcgaWRcXHgzZFwiJyxlLCdcIicsZC5nZWNrbyYmIWQuaGM/XCJcIjonIGhyZWZcXHgzZFwiamF2YXNjcmlwdDp2b2lkKDApXCInLFxyXG4nIHRhYkluZGV4XFx4M2RcIi0xXCIgaGlkZWZvY3VzXFx4M2RcInRydWVcIiByb2xlXFx4M2RcInRhYlwiXFx4M2UnLGEubGFiZWwsXCJcXHgzYy9hXFx4M2VcIl0uam9pbihcIlwiKSk7Yi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIixlKTt0aGlzLl8udGFic1thLmlkXT1bYyxiXTt0aGlzLl8udGFiSWRMaXN0LnB1c2goYS5pZCk7IWEuaGlkZGVuJiZ0aGlzLl8ucGFnZUNvdW50Kys7dGhpcy5fLmxhc3RUYWI9Yzt0aGlzLnVwZGF0ZVN0eWxlKCk7Yi5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsYS5pZCk7Yi5hcHBlbmRUbyh0aGlzLnBhcnRzLmNvbnRlbnRzKTtjLnVuc2VsZWN0YWJsZSgpO3RoaXMucGFydHMudGFicy5hcHBlbmQoYyk7YS5hY2Nlc3NLZXkmJihTKHRoaXMsdGhpcyxcIkNUUkwrXCIrYS5hY2Nlc3NLZXksY2EsZGEpLHRoaXMuXy5hY2Nlc3NLZXlNYXBbXCJDVFJMK1wiK2EuYWNjZXNzS2V5XT1hLmlkKX19LHNlbGVjdFBhZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5fLmN1cnJlbnRUYWJJZCE9YSYmIXRoaXMuXy50YWJzW2FdWzBdLmhhc0NsYXNzKFwiY2tlX2RpYWxvZ190YWJfZGlzYWJsZWRcIikmJlxyXG4hMSE9PXRoaXMuZmlyZShcInNlbGVjdFBhZ2VcIix7cGFnZTphLGN1cnJlbnRQYWdlOnRoaXMuXy5jdXJyZW50VGFiSWR9KSl7Zm9yKHZhciBiIGluIHRoaXMuXy50YWJzKXt2YXIgYz10aGlzLl8udGFic1tiXVswXSxkPXRoaXMuXy50YWJzW2JdWzFdO2IhPWEmJihjLnJlbW92ZUNsYXNzKFwiY2tlX2RpYWxvZ190YWJfc2VsZWN0ZWRcIiksZC5oaWRlKCkpO2Quc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixiIT1hKX12YXIgZT10aGlzLl8udGFic1thXTtlWzBdLmFkZENsYXNzKFwiY2tlX2RpYWxvZ190YWJfc2VsZWN0ZWRcIik7Q0tFRElUT1IuZW52LmllNkNvbXBhdHx8Q0tFRElUT1IuZW52LmllN0NvbXBhdD8oSyhlWzFdKSxlWzFdLnNob3coKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SyhlWzFdLDEpfSwwKSk6ZVsxXS5zaG93KCk7dGhpcy5fLmN1cnJlbnRUYWJJZD1hO3RoaXMuXy5jdXJyZW50VGFiSW5kZXg9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih0aGlzLl8udGFiSWRMaXN0LGEpfX0sXHJcbnVwZGF0ZVN0eWxlOmZ1bmN0aW9uKCl7dGhpcy5wYXJ0cy5kaWFsb2dbKDE9PT10aGlzLl8ucGFnZUNvdW50P1wiYWRkXCI6XCJyZW1vdmVcIikrXCJDbGFzc1wiXShcImNrZV9zaW5nbGVfcGFnZVwiKX0saGlkZVBhZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLnRhYnNbYV0mJnRoaXMuXy50YWJzW2FdWzBdO2ImJjEhPXRoaXMuXy5wYWdlQ291bnQmJmIuaXNWaXNpYmxlKCkmJihhPT10aGlzLl8uY3VycmVudFRhYklkJiZ0aGlzLnNlbGVjdFBhZ2UoeC5jYWxsKHRoaXMpKSxiLmhpZGUoKSx0aGlzLl8ucGFnZUNvdW50LS0sdGhpcy51cGRhdGVTdHlsZSgpKX0sc2hvd1BhZ2U6ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl8udGFic1thXSYmdGhpcy5fLnRhYnNbYV1bMF0pYS5zaG93KCksdGhpcy5fLnBhZ2VDb3VudCsrLHRoaXMudXBkYXRlU3R5bGUoKX0sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZWxlbWVudH0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8ubmFtZX0sXHJcbmdldENvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fLmNvbnRlbnRzW2FdO3JldHVybiBjJiZjW2JdfSxnZXRWYWx1ZU9mOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0Q29udGVudEVsZW1lbnQoYSxiKS5nZXRWYWx1ZSgpfSxzZXRWYWx1ZU9mOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5nZXRDb250ZW50RWxlbWVudChhLGIpLnNldFZhbHVlKGMpfSxnZXRCdXR0b246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuXy5idXR0b25zW2FdfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLmJ1dHRvbnNbYV0uY2xpY2soKX0sZGlzYWJsZUJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLmJ1dHRvbnNbYV0uZGlzYWJsZSgpfSxlbmFibGVCdXR0b246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuXy5idXR0b25zW2FdLmVuYWJsZSgpfSxnZXRQYWdlQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnBhZ2VDb3VudH0sZ2V0UGFyZW50RWRpdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5lZGl0b3J9LFxyXG5nZXRTZWxlY3RlZEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXJlbnRFZGl0b3IoKS5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZEVsZW1lbnQoKX0sYWRkRm9jdXNhYmxlOmZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGIpYj10aGlzLl8uZm9jdXNMaXN0Lmxlbmd0aCx0aGlzLl8uZm9jdXNMaXN0LnB1c2gobmV3IEwodGhpcyxhLGIpKTtlbHNle3RoaXMuXy5mb2N1c0xpc3Quc3BsaWNlKGIsMCxuZXcgTCh0aGlzLGEsYikpO2Zvcih2YXIgYz1iKzE7Yzx0aGlzLl8uZm9jdXNMaXN0Lmxlbmd0aDtjKyspdGhpcy5fLmZvY3VzTGlzdFtjXS5mb2N1c0luZGV4Kyt9fSxzZXRTdGF0ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlIT1hKXt0aGlzLnN0YXRlPWE7aWYoYT09Q0tFRElUT1IuRElBTE9HX1NUQVRFX0JVU1kpe2lmKCF0aGlzLnBhcnRzLnNwaW5uZXIpe3ZhciBiPXRoaXMuZ2V0UGFyZW50RWRpdG9yKCkubGFuZy5kaXIsYz17YXR0cmlidXRlczp7XCJjbGFzc1wiOlwiY2tlX2RpYWxvZ19zcGlubmVyXCJ9LFxyXG5zdHlsZXM6e1wiZmxvYXRcIjpcInJ0bFwiPT1iP1wicmlnaHRcIjpcImxlZnRcIn19O2Muc3R5bGVzW1wibWFyZ2luLVwiKyhcInJ0bFwiPT1iP1wibGVmdFwiOlwicmlnaHRcIildPVwiOHB4XCI7dGhpcy5wYXJ0cy5zcGlubmVyPUNLRURJVE9SLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixjKTt0aGlzLnBhcnRzLnNwaW5uZXIuc2V0SHRtbChcIlxceDI2Izg5ODc7XCIpO3RoaXMucGFydHMuc3Bpbm5lci5hcHBlbmRUbyh0aGlzLnBhcnRzLnRpdGxlLDEpfXRoaXMucGFydHMuc3Bpbm5lci5zaG93KCk7dGhpcy5nZXRCdXR0b24oXCJva1wiKS5kaXNhYmxlKCl9ZWxzZSBhPT1DS0VESVRPUi5ESUFMT0dfU1RBVEVfSURMRSYmKHRoaXMucGFydHMuc3Bpbm5lciYmdGhpcy5wYXJ0cy5zcGlubmVyLmhpZGUoKSx0aGlzLmdldEJ1dHRvbihcIm9rXCIpLmVuYWJsZSgpKTt0aGlzLmZpcmUoXCJzdGF0ZVwiLGEpfX19O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kaWFsb2cse2FkZDpmdW5jdGlvbihhLGIpe3RoaXMuXy5kaWFsb2dEZWZpbml0aW9uc1thXSYmXHJcblwiZnVuY3Rpb25cIiE9dHlwZW9mIGJ8fCh0aGlzLl8uZGlhbG9nRGVmaW5pdGlvbnNbYV09Yil9LGV4aXN0czpmdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuXy5kaWFsb2dEZWZpbml0aW9uc1thXX0sZ2V0Q3VycmVudDpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wfSxpc1RhYkVuYWJsZWQ6ZnVuY3Rpb24oYSxiLGMpe2E9YS5jb25maWcucmVtb3ZlRGlhbG9nVGFicztyZXR1cm4hKGEmJmEubWF0Y2gobmV3IFJlZ0V4cChcIig/Ol58OylcIitiK1wiOlwiK2MrXCIoPzokfDspXCIsXCJpXCIpKSl9LG9rQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxjKXtjPWN8fHt9O3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoe2lkOlwib2tcIix0eXBlOlwiYnV0dG9uXCIsbGFiZWw6YS5sYW5nLmNvbW1vbi5vayxcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX2J1dHRvbl9va1wiLG9uQ2xpY2s6ZnVuY3Rpb24oYSl7YT1hLmRhdGEuZGlhbG9nOyExIT09YS5maXJlKFwib2tcIixcclxue2hpZGU6ITB9KS5oaWRlJiZhLmhpZGUoKX19LGMsITApfTthLnR5cGU9XCJidXR0b25cIjthLm92ZXJyaWRlPWZ1bmN0aW9uKGIpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoZnVuY3Rpb24oYyl7cmV0dXJuIGEoYyxiKX0se3R5cGU6XCJidXR0b25cIn0sITApfTtyZXR1cm4gYX0oKSxjYW5jZWxCdXR0b246ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGMpe2M9Y3x8e307cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZCh7aWQ6XCJjYW5jZWxcIix0eXBlOlwiYnV0dG9uXCIsbGFiZWw6YS5sYW5nLmNvbW1vbi5jYW5jZWwsXCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9idXR0b25fY2FuY2VsXCIsb25DbGljazpmdW5jdGlvbihhKXthPWEuZGF0YS5kaWFsb2c7ITEhPT1hLmZpcmUoXCJjYW5jZWxcIix7aGlkZTohMH0pLmhpZGUmJmEuaGlkZSgpfX0sYywhMCl9O2EudHlwZT1cImJ1dHRvblwiO2Eub3ZlcnJpZGU9ZnVuY3Rpb24oYil7cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZChmdW5jdGlvbihjKXtyZXR1cm4gYShjLFxyXG5iKX0se3R5cGU6XCJidXR0b25cIn0sITApfTtyZXR1cm4gYX0oKSxhZGRVSUVsZW1lbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl8udWlFbGVtZW50QnVpbGRlcnNbYV09Yn19KTtDS0VESVRPUi5kaWFsb2cuXz17dWlFbGVtZW50QnVpbGRlcnM6e30sZGlhbG9nRGVmaW5pdGlvbnM6e30sY3VycmVudFRvcDpudWxsLGN1cnJlbnRaSW5kZXg6bnVsbH07Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IuZGlhbG9nKTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUi5kaWFsb2cucHJvdG90eXBlKTt2YXIgYWE9e3Jlc2l6YWJsZTpDS0VESVRPUi5ESUFMT0dfUkVTSVpFX0JPVEgsbWluV2lkdGg6NjAwLG1pbkhlaWdodDo0MDAsYnV0dG9uczpbQ0tFRElUT1IuZGlhbG9nLm9rQnV0dG9uLENLRURJVE9SLmRpYWxvZy5jYW5jZWxCdXR0b25dfSxEPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MCxlO2U9YVtkXTtkKyspaWYoZS5pZD09Ynx8YyYmZVtjXSYmKGU9RChlW2NdLFxyXG5iLGMpKSlyZXR1cm4gZTtyZXR1cm4gbnVsbH0sRT1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKGMpe2Zvcih2YXIgZj0wLGc7Zz1hW2ZdO2YrKyl7aWYoZy5pZD09YylyZXR1cm4gYS5zcGxpY2UoZiwwLGIpLGI7aWYoZCYmZ1tkXSYmKGc9RShnW2RdLGIsYyxkLCEwKSkpcmV0dXJuIGd9aWYoZSlyZXR1cm4gbnVsbH1hLnB1c2goYik7cmV0dXJuIGJ9LEY9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7ZT1hW2RdO2QrKyl7aWYoZS5pZD09YilyZXR1cm4gYS5zcGxpY2UoZCwxKTtpZihjJiZlW2NdJiYoZT1GKGVbY10sYixjKSkpcmV0dXJuIGV9cmV0dXJuIG51bGx9LFA9ZnVuY3Rpb24oYSxiKXt0aGlzLmRpYWxvZz1hO2Zvcih2YXIgYz1iLmNvbnRlbnRzLGQ9MCxlO2U9Y1tkXTtkKyspY1tkXT1lJiZuZXcgTShhLGUpO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGIpfTtQLnByb3RvdHlwZT17Z2V0Q29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIEQodGhpcy5jb250ZW50cyxcclxuYSl9LGdldEJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gRCh0aGlzLmJ1dHRvbnMsYSl9LGFkZENvbnRlbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEUodGhpcy5jb250ZW50cyxhLGIpfSxhZGRCdXR0b246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRSh0aGlzLmJ1dHRvbnMsYSxiKX0scmVtb3ZlQ29udGVudHM6ZnVuY3Rpb24oYSl7Rih0aGlzLmNvbnRlbnRzLGEpfSxyZW1vdmVCdXR0b246ZnVuY3Rpb24oYSl7Rih0aGlzLmJ1dHRvbnMsYSl9fTtNLnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBEKHRoaXMuZWxlbWVudHMsYSxcImNoaWxkcmVuXCIpfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRSh0aGlzLmVsZW1lbnRzLGEsYixcImNoaWxkcmVuXCIpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7Rih0aGlzLmVsZW1lbnRzLGEsXCJjaGlsZHJlblwiKX19O3ZhciBKLHo9e30sdSx3PXt9LFE9ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLiQuY3RybEtleXx8YS5kYXRhLiQubWV0YUtleSxjPVxyXG5hLmRhdGEuJC5hbHRLZXksZD1hLmRhdGEuJC5zaGlmdEtleSxlPVN0cmluZy5mcm9tQ2hhckNvZGUoYS5kYXRhLiQua2V5Q29kZSk7KGI9d1soYj9cIkNUUkwrXCI6XCJcIikrKGM/XCJBTFQrXCI6XCJcIikrKGQ/XCJTSElGVCtcIjpcIlwiKStlXSkmJmIubGVuZ3RoJiYoYj1iW2IubGVuZ3RoLTFdLGIua2V5ZG93biYmYi5rZXlkb3duLmNhbGwoYi51aUVsZW1lbnQsYi5kaWFsb2csYi5rZXkpLGEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpKX0sUj1mdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuJC5jdHJsS2V5fHxhLmRhdGEuJC5tZXRhS2V5LGM9YS5kYXRhLiQuYWx0S2V5LGQ9YS5kYXRhLiQuc2hpZnRLZXksZT1TdHJpbmcuZnJvbUNoYXJDb2RlKGEuZGF0YS4kLmtleUNvZGUpOyhiPXdbKGI/XCJDVFJMK1wiOlwiXCIpKyhjP1wiQUxUK1wiOlwiXCIpKyhkP1wiU0hJRlQrXCI6XCJcIikrZV0pJiZiLmxlbmd0aCYmKGI9YltiLmxlbmd0aC0xXSxiLmtleXVwJiYoYi5rZXl1cC5jYWxsKGIudWlFbGVtZW50LGIuZGlhbG9nLGIua2V5KSxcclxuYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpKX0sUz1mdW5jdGlvbihhLGIsYyxkLGUpeyh3W2NdfHwod1tjXT1bXSkpLnB1c2goe3VpRWxlbWVudDphLGRpYWxvZzpiLGtleTpjLGtleXVwOmV8fGEuYWNjZXNzS2V5VXAsa2V5ZG93bjpkfHxhLmFjY2Vzc0tleURvd259KX0sYmE9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIHcpe2Zvcih2YXIgYz13W2JdLGQ9Yy5sZW5ndGgtMTswPD1kO2QtLSljW2RdLmRpYWxvZyE9YSYmY1tkXS51aUVsZW1lbnQhPWF8fGMuc3BsaWNlKGQsMSk7MD09PWMubGVuZ3RoJiZkZWxldGUgd1tiXX19LGRhPWZ1bmN0aW9uKGEsYil7YS5fLmFjY2Vzc0tleU1hcFtiXSYmYS5zZWxlY3RQYWdlKGEuXy5hY2Nlc3NLZXlNYXBbYl0pfSxjYT1mdW5jdGlvbigpe307KGZ1bmN0aW9uKCl7Q0tFRElUT1IudWkuZGlhbG9nPXt1aUVsZW1lbnQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7aWYoISg0PmFyZ3VtZW50cy5sZW5ndGgpKXt2YXIgaD0oZC5jYWxsP2QoYik6ZCl8fFxyXG5cImRpdlwiLHA9W1wiXFx4M2NcIixoLFwiIFwiXSxtPShlJiZlLmNhbGw/ZShiKTplKXx8e30saz0oZiYmZi5jYWxsP2YoYik6Zil8fHt9LHE9KGcmJmcuY2FsbD9nLmNhbGwodGhpcyxhLGIpOmcpfHxcIlwiLG49dGhpcy5kb21JZD1rLmlkfHxDS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl91aUVsZW1lbnRcIjtiLnJlcXVpcmVkQ29udGVudCYmIWEuZ2V0UGFyZW50RWRpdG9yKCkuZmlsdGVyLmNoZWNrKGIucmVxdWlyZWRDb250ZW50KSYmKG0uZGlzcGxheT1cIm5vbmVcIix0aGlzLm5vdEFsbG93ZWQ9ITApO2suaWQ9bjt2YXIgcj17fTtiLnR5cGUmJihyW1wiY2tlX2RpYWxvZ191aV9cIitiLnR5cGVdPTEpO2IuY2xhc3NOYW1lJiYocltiLmNsYXNzTmFtZV09MSk7Yi5kaXNhYmxlZCYmKHIuY2tlX2Rpc2FibGVkPTEpO2Zvcih2YXIgbD1rW1wiY2xhc3NcIl0mJmtbXCJjbGFzc1wiXS5zcGxpdD9rW1wiY2xhc3NcIl0uc3BsaXQoXCIgXCIpOltdLG49MDtuPGwubGVuZ3RoO24rKylsW25dJiYocltsW25dXT0xKTtsPVxyXG5bXTtmb3IobiBpbiByKWwucHVzaChuKTtrW1wiY2xhc3NcIl09bC5qb2luKFwiIFwiKTtiLnRpdGxlJiYoay50aXRsZT1iLnRpdGxlKTtyPShiLnN0eWxlfHxcIlwiKS5zcGxpdChcIjtcIik7Yi5hbGlnbiYmKGw9Yi5hbGlnbixtW1wibWFyZ2luLWxlZnRcIl09XCJsZWZ0XCI9PWw/MDpcImF1dG9cIixtW1wibWFyZ2luLXJpZ2h0XCJdPVwicmlnaHRcIj09bD8wOlwiYXV0b1wiKTtmb3IobiBpbiBtKXIucHVzaChuK1wiOlwiK21bbl0pO2IuaGlkZGVuJiZyLnB1c2goXCJkaXNwbGF5Om5vbmVcIik7Zm9yKG49ci5sZW5ndGgtMTswPD1uO24tLSlcIlwiPT09cltuXSYmci5zcGxpY2UobiwxKTswPHIubGVuZ3RoJiYoay5zdHlsZT0oay5zdHlsZT9rLnN0eWxlK1wiOyBcIjpcIlwiKStyLmpvaW4oXCI7IFwiKSk7Zm9yKG4gaW4gaylwLnB1c2gobisnXFx4M2RcIicrQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShrW25dKSsnXCIgJyk7cC5wdXNoKFwiXFx4M2VcIixxLFwiXFx4M2MvXCIsaCxcIlxceDNlXCIpO2MucHVzaChwLmpvaW4oXCJcIikpOyh0aGlzLl98fCh0aGlzLl89XHJcbnt9KSkuZGlhbG9nPWE7XCJib29sZWFuXCI9PXR5cGVvZiBiLmlzQ2hhbmdlZCYmKHRoaXMuaXNDaGFuZ2VkPWZ1bmN0aW9uKCl7cmV0dXJuIGIuaXNDaGFuZ2VkfSk7XCJmdW5jdGlvblwiPT10eXBlb2YgYi5pc0NoYW5nZWQmJih0aGlzLmlzQ2hhbmdlZD1iLmlzQ2hhbmdlZCk7XCJmdW5jdGlvblwiPT10eXBlb2YgYi5zZXRWYWx1ZSYmKHRoaXMuc2V0VmFsdWU9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUodGhpcy5zZXRWYWx1ZSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyl7YS5jYWxsKHRoaXMsYi5zZXRWYWx1ZS5jYWxsKHRoaXMsYykpfX0pKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmdldFZhbHVlJiYodGhpcy5nZXRWYWx1ZT1DS0VESVRPUi50b29scy5vdmVycmlkZSh0aGlzLmdldFZhbHVlLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBiLmdldFZhbHVlLmNhbGwodGhpcyxhLmNhbGwodGhpcykpfX0pKTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbih0aGlzKTtcclxudGhpcy5yZWdpc3RlckV2ZW50cyhiKTt0aGlzLmFjY2Vzc0tleVVwJiZ0aGlzLmFjY2Vzc0tleURvd24mJmIuYWNjZXNzS2V5JiZTKHRoaXMsYSxcIkNUUkwrXCIrYi5hY2Nlc3NLZXkpO3ZhciB0PXRoaXM7YS5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBiPXQuZ2V0SW5wdXRFbGVtZW50KCk7aWYoYil7dmFyIGM9dC50eXBlIGlue2NoZWNrYm94OjEscmF0aW86MX0mJkNLRURJVE9SLmVudi5pZSYmOD5DS0VESVRPUi5lbnYudmVyc2lvbj9cImNrZV9kaWFsb2dfdWlfZm9jdXNlZFwiOlwiXCI7Yi5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXthLl8udGFiQmFyTW9kZT0hMTthLl8uaGFzRm9jdXM9ITA7dC5maXJlKFwiZm9jdXNcIik7YyYmdGhpcy5hZGRDbGFzcyhjKX0pO2Iub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0LmZpcmUoXCJibHVyXCIpO2MmJnRoaXMucmVtb3ZlQ2xhc3MoYyl9KX19KTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxiKTt0aGlzLmtleWJvYXJkRm9jdXNhYmxlJiYodGhpcy50YWJJbmRleD1cclxuYi50YWJJbmRleHx8MCx0aGlzLmZvY3VzSW5kZXg9YS5fLmZvY3VzTGlzdC5wdXNoKHRoaXMpLTEsdGhpcy5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXthLl8uY3VycmVudEZvY3VzSW5kZXg9dC5mb2N1c0luZGV4fSkpfX0saGJveDpmdW5jdGlvbihhLGIsYyxkLGUpe2lmKCEoND5hcmd1bWVudHMubGVuZ3RoKSl7dGhpcy5ffHwodGhpcy5fPXt9KTt2YXIgZj10aGlzLl8uY2hpbGRyZW49YixnPWUmJmUud2lkdGhzfHxudWxsLGg9ZSYmZS5oZWlnaHR8fG51bGwscCxtPXtyb2xlOlwicHJlc2VudGF0aW9uXCJ9O2UmJmUuYWxpZ24mJihtLmFsaWduPWUuYWxpZ24pO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGEsZXx8e3R5cGU6XCJoYm94XCJ9LGQsXCJ0YWJsZVwiLHt9LG0sZnVuY3Rpb24oKXt2YXIgYT1bJ1xceDNjdGJvZHlcXHgzZVxceDNjdHIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9oYm94XCJcXHgzZSddO2ZvcihwPTA7cDxjLmxlbmd0aDtwKyspe3ZhciBiPVwiY2tlX2RpYWxvZ191aV9oYm94X2NoaWxkXCIsXHJcbmQ9W107MD09PXAmJihiPVwiY2tlX2RpYWxvZ191aV9oYm94X2ZpcnN0XCIpO3A9PWMubGVuZ3RoLTEmJihiPVwiY2tlX2RpYWxvZ191aV9oYm94X2xhc3RcIik7YS5wdXNoKCdcXHgzY3RkIGNsYXNzXFx4M2RcIicsYiwnXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiAnKTtnP2dbcF0mJmQucHVzaChcIndpZHRoOlwiK3YoZ1twXSkpOmQucHVzaChcIndpZHRoOlwiK01hdGguZmxvb3IoMTAwL2MubGVuZ3RoKStcIiVcIik7aCYmZC5wdXNoKFwiaGVpZ2h0OlwiK3YoaCkpO2UmJnZvaWQgMCE9PWUucGFkZGluZyYmZC5wdXNoKFwicGFkZGluZzpcIit2KGUucGFkZGluZykpO0NLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcyYmZltwXS5hbGlnbiYmZC5wdXNoKFwidGV4dC1hbGlnbjpcIitmW3BdLmFsaWduKTswPGQubGVuZ3RoJiZhLnB1c2goJ3N0eWxlXFx4M2RcIicrZC5qb2luKFwiOyBcIikrJ1wiICcpO2EucHVzaChcIlxceDNlXCIsY1twXSxcIlxceDNjL3RkXFx4M2VcIil9YS5wdXNoKFwiXFx4M2MvdHJcXHgzZVxceDNjL3Rib2R5XFx4M2VcIik7XHJcbnJldHVybiBhLmpvaW4oXCJcIil9KX19LHZib3g6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe3RoaXMuX3x8KHRoaXMuXz17fSk7dmFyIGY9dGhpcy5fLmNoaWxkcmVuPWIsZz1lJiZlLndpZHRofHxudWxsLGg9ZSYmZS5oZWlnaHRzfHxudWxsO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGEsZXx8e3R5cGU6XCJ2Ym94XCJ9LGQsXCJkaXZcIixudWxsLHtyb2xlOlwicHJlc2VudGF0aW9uXCJ9LGZ1bmN0aW9uKCl7dmFyIGI9WydcXHgzY3RhYmxlIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgY2VsbHNwYWNpbmdcXHgzZFwiMFwiIGJvcmRlclxceDNkXCIwXCIgJ107Yi5wdXNoKCdzdHlsZVxceDNkXCInKTtlJiZlLmV4cGFuZCYmYi5wdXNoKFwiaGVpZ2h0OjEwMCU7XCIpO2IucHVzaChcIndpZHRoOlwiK3YoZ3x8XCIxMDAlXCIpLFwiO1wiKTtDS0VESVRPUi5lbnYud2Via2l0JiZiLnB1c2goXCJmbG9hdDpub25lO1wiKTtiLnB1c2goJ1wiJyk7Yi5wdXNoKCdhbGlnblxceDNkXCInLFxyXG5DS0VESVRPUi50b29scy5odG1sRW5jb2RlKGUmJmUuYWxpZ258fChcImx0clwiPT1hLmdldFBhcmVudEVkaXRvcigpLmxhbmcuZGlyP1wibGVmdFwiOlwicmlnaHRcIikpLCdcIiAnKTtiLnB1c2goXCJcXHgzZVxceDNjdGJvZHlcXHgzZVwiKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGs9W107Yi5wdXNoKCdcXHgzY3RyXFx4M2VcXHgzY3RkIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgJyk7ZyYmay5wdXNoKFwid2lkdGg6XCIrdihnfHxcIjEwMCVcIikpO2g/ay5wdXNoKFwiaGVpZ2h0OlwiK3YoaFtkXSkpOmUmJmUuZXhwYW5kJiZrLnB1c2goXCJoZWlnaHQ6XCIrTWF0aC5mbG9vcigxMDAvYy5sZW5ndGgpK1wiJVwiKTtlJiZ2b2lkIDAhPT1lLnBhZGRpbmcmJmsucHVzaChcInBhZGRpbmc6XCIrdihlLnBhZGRpbmcpKTtDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MmJmZbZF0uYWxpZ24mJmsucHVzaChcInRleHQtYWxpZ246XCIrZltkXS5hbGlnbik7MDxrLmxlbmd0aCYmYi5wdXNoKCdzdHlsZVxceDNkXCInLFxyXG5rLmpvaW4oXCI7IFwiKSwnXCIgJyk7Yi5wdXNoKCcgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV92Ym94X2NoaWxkXCJcXHgzZScsY1tkXSxcIlxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXCIpfWIucHVzaChcIlxceDNjL3Rib2R5XFx4M2VcXHgzYy90YWJsZVxceDNlXCIpO3JldHVybiBiLmpvaW4oXCJcIil9KX19fX0pKCk7Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5wcm90b3R5cGU9e2dldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gQ0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLmRvbUlkKX0sZ2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudCgpfSxnZXREaWFsb2c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmRpYWxvZ30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldElucHV0RWxlbWVudCgpLnNldFZhbHVlKGEpOyFiJiZ0aGlzLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6YX0pO3JldHVybiB0aGlzfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLmdldFZhbHVlKCl9LFxyXG5pc0NoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc2VsZWN0UGFyZW50VGFiOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCk7KGE9YS5nZXRQYXJlbnQoKSkmJi0xPT1hLiQuY2xhc3NOYW1lLnNlYXJjaChcImNrZV9kaWFsb2dfcGFnZV9jb250ZW50c1wiKTspO2lmKCFhKXJldHVybiB0aGlzO2E9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO3RoaXMuXy5kaWFsb2cuXy5jdXJyZW50VGFiSWQhPWEmJnRoaXMuXy5kaWFsb2cuc2VsZWN0UGFnZShhKTtyZXR1cm4gdGhpc30sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdFBhcmVudFRhYigpLmdldElucHV0RWxlbWVudCgpLmZvY3VzKCk7cmV0dXJuIHRoaXN9LHJlZ2lzdGVyRXZlbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPS9eb24oW0EtWl1cXHcrKS8sYyxkPWZ1bmN0aW9uKGEsYixjLGQpe2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXthLmdldElucHV0RWxlbWVudCgpLm9uKGMsZCxhKX0pfSxlO2ZvcihlIGluIGEpaWYoYz1cclxuZS5tYXRjaChiKSl0aGlzLmV2ZW50UHJvY2Vzc29yc1tlXT90aGlzLmV2ZW50UHJvY2Vzc29yc1tlXS5jYWxsKHRoaXMsdGhpcy5fLmRpYWxvZyxhW2VdKTpkKHRoaXMsdGhpcy5fLmRpYWxvZyxjWzFdLnRvTG93ZXJDYXNlKCksYVtlXSk7cmV0dXJuIHRoaXN9LGV2ZW50UHJvY2Vzc29yczp7b25Mb2FkOmZ1bmN0aW9uKGEsYil7YS5vbihcImxvYWRcIixiLHRoaXMpfSxvblNob3c6ZnVuY3Rpb24oYSxiKXthLm9uKFwic2hvd1wiLGIsdGhpcyl9LG9uSGlkZTpmdW5jdGlvbihhLGIpe2Eub24oXCJoaWRlXCIsYix0aGlzKX19LGFjY2Vzc0tleURvd246ZnVuY3Rpb24oKXt0aGlzLmZvY3VzKCl9LGFjY2Vzc0tleVVwOmZ1bmN0aW9uKCl7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRFbGVtZW50KCk7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwidHJ1ZVwiKTthLmFkZENsYXNzKFwiY2tlX2Rpc2FibGVkXCIpfSxlbmFibGU6ZnVuY3Rpb24oKXt2YXIgYT1cclxudGhpcy5nZXRFbGVtZW50KCk7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTthLnJlbW92ZUNsYXNzKFwiY2tlX2Rpc2FibGVkXCIpfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5nZXRFbGVtZW50KCkuaGFzQ2xhc3MoXCJja2VfZGlzYWJsZWRcIil9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLmlzVmlzaWJsZSgpfSxpc0ZvY3VzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW5hYmxlZCgpJiZ0aGlzLmlzVmlzaWJsZSgpPyEwOiExfX07Q0tFRElUT1IudWkuZGlhbG9nLmhib3gucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7Z2V0Q2hpbGQ6ZnVuY3Rpb24oYSl7aWYoMT5hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl8uY2hpbGRyZW4uY29uY2F0KCk7YS5zcGxpY2V8fChhPVthXSk7cmV0dXJuIDI+XHJcbmEubGVuZ3RoP3RoaXMuXy5jaGlsZHJlblthWzBdXTp0aGlzLl8uY2hpbGRyZW5bYVswXV0mJnRoaXMuXy5jaGlsZHJlblthWzBdXS5nZXRDaGlsZD90aGlzLl8uY2hpbGRyZW5bYVswXV0uZ2V0Q2hpbGQoYS5zbGljZSgxLGEubGVuZ3RoKSk6bnVsbH19LCEwKTtDS0VESVRPUi51aS5kaWFsb2cudmJveC5wcm90b3R5cGU9bmV3IENLRURJVE9SLnVpLmRpYWxvZy5oYm94OyhmdW5jdGlvbigpe3ZhciBhPXtidWlsZDpmdW5jdGlvbihhLGMsZCl7Zm9yKHZhciBlPWMuY2hpbGRyZW4sZixnPVtdLGg9W10scD0wO3A8ZS5sZW5ndGgmJihmPWVbcF0pO3ArKyl7dmFyIG09W107Zy5wdXNoKG0pO2gucHVzaChDS0VESVRPUi5kaWFsb2cuXy51aUVsZW1lbnRCdWlsZGVyc1tmLnR5cGVdLmJ1aWxkKGEsZixtKSl9cmV0dXJuIG5ldyBDS0VESVRPUi51aS5kaWFsb2dbYy50eXBlXShhLGgsZyxkLGMpfX07Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcImhib3hcIixhKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwidmJveFwiLFxyXG5hKX0pKCk7Q0tFRElUT1IuZGlhbG9nQ29tbWFuZD1mdW5jdGlvbihhLGIpe3RoaXMuZGlhbG9nTmFtZT1hO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGIsITApfTtDS0VESVRPUi5kaWFsb2dDb21tYW5kLnByb3RvdHlwZT17ZXhlYzpmdW5jdGlvbihhKXthLm9wZW5EaWFsb2codGhpcy5kaWFsb2dOYW1lKX0sY2FuVW5kbzohMSxlZGl0b3JGb2N1czoxfTsoZnVuY3Rpb24oKXt2YXIgYT0vXihbYV18W15hXSkrJC8sYj0vXlxcZCokLyxjPS9eXFxkKig/OlxcLlxcZCspPyQvLGQ9L14oKChcXGQqKFxcLlxcZCspKXwoXFxkKikpKHB4fFxcJSk/KT8kLyxlPS9eKCgoXFxkKihcXC5cXGQrKSl8KFxcZCopKShweHxlbXxleHxpbnxjbXxtbXxwdHxwY3xcXCUpPyk/JC9pLGY9L14oXFxzKltcXHctXStcXHMqOlxccypbXjo7XSsoPzo7fCQpKSokLztDS0VESVRPUi5WQUxJREFURV9PUj0xO0NLRURJVE9SLlZBTElEQVRFX0FORD0yO0NLRURJVE9SLmRpYWxvZy52YWxpZGF0ZT17ZnVuY3Rpb25zOmZ1bmN0aW9uKCl7dmFyIGE9XHJcbmFyZ3VtZW50cztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj10aGlzJiZ0aGlzLmdldFZhbHVlP3RoaXMuZ2V0VmFsdWUoKTphWzBdLGMsZD1DS0VESVRPUi5WQUxJREFURV9BTkQsZT1bXSxmO2ZvcihmPTA7ZjxhLmxlbmd0aDtmKyspaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYVtmXSllLnB1c2goYVtmXSk7ZWxzZSBicmVhaztmPGEubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgYVtmXSYmKGM9YVtmXSxmKyspO2Y8YS5sZW5ndGgmJlwibnVtYmVyXCI9PXR5cGVvZiBhW2ZdJiYoZD1hW2ZdKTt2YXIgbj1kPT1DS0VESVRPUi5WQUxJREFURV9BTkQ/ITA6ITE7Zm9yKGY9MDtmPGUubGVuZ3RoO2YrKyluPWQ9PUNLRURJVE9SLlZBTElEQVRFX0FORD9uJiZlW2ZdKGIpOm58fGVbZl0oYik7cmV0dXJuIG4/ITA6Y319LHJlZ2V4OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9dGhpcyYmdGhpcy5nZXRWYWx1ZT90aGlzLmdldFZhbHVlKCk6YztyZXR1cm4gYS50ZXN0KGMpPyEwOmJ9fSxcclxubm90RW1wdHk6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucmVnZXgoYSxiKX0saW50ZWdlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZWdleChiLGEpfSxudW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVnZXgoYyxhKX0sY3NzTGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZ1bmN0aW9ucyhmdW5jdGlvbihhKXtyZXR1cm4gZS50ZXN0KENLRURJVE9SLnRvb2xzLnRyaW0oYSkpfSxhKX0saHRtbExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5mdW5jdGlvbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGQudGVzdChDS0VESVRPUi50b29scy50cmltKGEpKX0sYSl9LGlubGluZVN0eWxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZ1bmN0aW9ucyhmdW5jdGlvbihhKXtyZXR1cm4gZi50ZXN0KENLRURJVE9SLnRvb2xzLnRyaW0oYSkpfSxhKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZnVuY3Rpb25zKGZ1bmN0aW9uKGIpe3JldHVybiBiPT1hfSxiKX0sXHJcbm5vdEVxdWFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZnVuY3Rpb25zKGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hfSxiKX19O0NLRURJVE9SLm9uKFwiaW5zdGFuY2VEZXN0cm95ZWRcIixmdW5jdGlvbihhKXtpZihDS0VESVRPUi50b29scy5pc0VtcHR5KENLRURJVE9SLmluc3RhbmNlcykpe2Zvcih2YXIgYjtiPUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3A7KWIuaGlkZSgpO2Zvcih2YXIgYyBpbiB6KXpbY10ucmVtb3ZlKCk7ej17fX1hPWEuZWRpdG9yLl8uc3RvcmVkRGlhbG9ncztmb3IodmFyIGQgaW4gYSlhW2RdLmRlc3Ryb3koKX0pfSkoKTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7b3BlbkRpYWxvZzpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD1DS0VESVRPUi5kaWFsb2cuXy5kaWFsb2dEZWZpbml0aW9uc1thXTtudWxsPT09Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcCYmTih0aGlzKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkKWM9XHJcbnRoaXMuXy5zdG9yZWREaWFsb2dzfHwodGhpcy5fLnN0b3JlZERpYWxvZ3M9e30pLGM9Y1thXXx8KGNbYV09bmV3IENLRURJVE9SLmRpYWxvZyh0aGlzLGEpKSxiJiZiLmNhbGwoYyxjKSxjLnNob3coKTtlbHNle2lmKFwiZmFpbGVkXCI9PWQpdGhyb3cgTyh0aGlzKSxFcnJvcignW0NLRURJVE9SLmRpYWxvZy5vcGVuRGlhbG9nXSBEaWFsb2cgXCInK2ErJ1wiIGZhaWxlZCB3aGVuIGxvYWRpbmcgZGVmaW5pdGlvbi4nKTtcInN0cmluZ1wiPT10eXBlb2YgZCYmQ0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoQ0tFRElUT1IuZ2V0VXJsKGQpLGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiIT10eXBlb2YgQ0tFRElUT1IuZGlhbG9nLl8uZGlhbG9nRGVmaW5pdGlvbnNbYV0mJihDS0VESVRPUi5kaWFsb2cuXy5kaWFsb2dEZWZpbml0aW9uc1thXT1cImZhaWxlZFwiKTt0aGlzLm9wZW5EaWFsb2coYSxiKX0sdGhpcywwLDEpfUNLRURJVE9SLnNraW4ubG9hZFBhcnQoXCJkaWFsb2dcIik7cmV0dXJuIGN9fSl9KSgpO1xyXG5DS0VESVRPUi5wbHVnaW5zLmFkZChcImRpYWxvZ1wiLHtyZXF1aXJlczpcImRpYWxvZ3VpXCIsaW5pdDpmdW5jdGlvbih4KXt4Lm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihBKXtBLmRhdGEuZGlhbG9nJiZ4Lm9wZW5EaWFsb2coQS5kYXRhLmRpYWxvZyl9LG51bGwsbnVsbCw5OTkpfX0pO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiYWJvdXRcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuYWRkQ29tbWFuZChcImFib3V0XCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJhYm91dFwiKSk7Yi5tb2Rlcz17d3lzaXd5ZzoxLHNvdXJjZToxfTtiLmNhblVuZG89ITE7Yi5yZWFkT25seT0xO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIkFib3V0XCIse2xhYmVsOmEubGFuZy5hYm91dC50aXRsZSxjb21tYW5kOlwiYWJvdXRcIix0b29sYmFyOlwiYWJvdXRcIn0pO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJhYm91dFwiLHRoaXMucGF0aCtcImRpYWxvZ3MvYWJvdXQuanNcIil9fSk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJhMTF5aGVscFwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGF2YWlsYWJsZUxhbmdzOnthZjoxLGFyOjEsYmc6MSxjYToxLGNzOjEsY3k6MSxkYToxLGRlOjEsXCJkZS1jaFwiOjEsZWw6MSxlbjoxLFwiZW4tZ2JcIjoxLGVvOjEsZXM6MSxldDoxLGV1OjEsZmE6MSxmaToxLGZvOjEsZnI6MSxcImZyLWNhXCI6MSxnbDoxLGd1OjEsaGU6MSxoaToxLGhyOjEsaHU6MSxpZDoxLGl0OjEsamE6MSxrbToxLGtvOjEsa3U6MSxsdDoxLGx2OjEsbWs6MSxtbjoxLG5iOjEsbmw6MSxubzoxLHBsOjEscHQ6MSxcInB0LWJyXCI6MSxybzoxLHJ1OjEsc2k6MSxzazoxLHNsOjEsc3E6MSxzcjoxLFwic3ItbGF0blwiOjEsc3Y6MSx0aDoxLHRyOjEsdHQ6MSx1ZzoxLHVrOjEsdmk6MSx6aDoxLFwiemgtY25cIjoxfSxpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7Yi5hZGRDb21tYW5kKFwiYTExeUhlbHBcIix7ZXhlYzpmdW5jdGlvbigpe3ZhciBhPWIubGFuZ0NvZGUsYT1jLmF2YWlsYWJsZUxhbmdzW2FdP1xyXG5hOmMuYXZhaWxhYmxlTGFuZ3NbYS5yZXBsYWNlKC8tLiovLFwiXCIpXT9hLnJlcGxhY2UoLy0uKi8sXCJcIik6XCJlblwiO0NLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKENLRURJVE9SLmdldFVybChjLnBhdGgrXCJkaWFsb2dzL2xhbmcvXCIrYStcIi5qc1wiKSxmdW5jdGlvbigpe2IubGFuZy5hMTF5aGVscD1jLmxhbmdFbnRyaWVzW2FdO2Iub3BlbkRpYWxvZyhcImExMXlIZWxwXCIpfSl9LG1vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LHJlYWRPbmx5OjEsY2FuVW5kbzohMX0pO2Iuc2V0S2V5c3Ryb2tlKENLRURJVE9SLkFMVCs0OCxcImExMXlIZWxwXCIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJhMTF5SGVscFwiLHRoaXMucGF0aCtcImRpYWxvZ3MvYTExeWhlbHAuanNcIik7Yi5vbihcImFyaWFFZGl0b3JIZWxwTGFiZWxcIixmdW5jdGlvbihhKXthLmRhdGEubGFiZWw9Yi5sYW5nLmNvbW1vbi5lZGl0b3JIZWxwfSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGYoYyl7dmFyIGE9dGhpcy5hdHQ7Yz1jJiZjLmhhc0F0dHJpYnV0ZShhKSYmYy5nZXRBdHRyaWJ1dGUoYSl8fFwiXCI7dm9pZCAwIT09YyYmdGhpcy5zZXRWYWx1ZShjKX1mdW5jdGlvbiBnKCl7Zm9yKHZhciBjLGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWlmKGFyZ3VtZW50c1thXWluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQpe2M9YXJndW1lbnRzW2FdO2JyZWFrfWlmKGMpe3ZhciBhPXRoaXMuYXR0LGI9dGhpcy5nZXRWYWx1ZSgpO2I/Yy5zZXRBdHRyaWJ1dGUoYSxiKTpjLnJlbW92ZUF0dHJpYnV0ZShhLGIpfX12YXIgaz17aWQ6MSxkaXI6MSxjbGFzc2VzOjEsc3R5bGVzOjF9O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZGlhbG9nYWR2dGFiXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsYWxsb3dlZENvbnRlbnQ6ZnVuY3Rpb24oYyl7Y3x8KGM9ayk7dmFyIGE9W107Yy5pZCYmYS5wdXNoKFwiaWRcIik7Yy5kaXImJmEucHVzaChcImRpclwiKTt2YXIgYj1cclxuXCJcIjthLmxlbmd0aCYmKGIrPVwiW1wiK2Euam9pbihcIixcIikrXCJdXCIpO2MuY2xhc3NlcyYmKGIrPVwiKCopXCIpO2Muc3R5bGVzJiYoYis9XCJ7Kn1cIik7cmV0dXJuIGJ9LGNyZWF0ZUFkdmFuY2VkVGFiOmZ1bmN0aW9uKGMsYSxiKXthfHwoYT1rKTt2YXIgZD1jLmxhbmcuY29tbW9uLGg9e2lkOlwiYWR2YW5jZWRcIixsYWJlbDpkLmFkdmFuY2VkVGFiLHRpdGxlOmQuYWR2YW5jZWRUYWIsZWxlbWVudHM6W3t0eXBlOlwidmJveFwiLHBhZGRpbmc6MSxjaGlsZHJlbjpbXX1dfSxlPVtdO2lmKGEuaWR8fGEuZGlyKWEuaWQmJmUucHVzaCh7aWQ6XCJhZHZJZFwiLGF0dDpcImlkXCIsdHlwZTpcInRleHRcIixyZXF1aXJlZENvbnRlbnQ6Yj9iK1wiW2lkXVwiOm51bGwsbGFiZWw6ZC5pZCxzZXR1cDpmLGNvbW1pdDpnfSksYS5kaXImJmUucHVzaCh7aWQ6XCJhZHZMYW5nRGlyXCIsYXR0OlwiZGlyXCIsdHlwZTpcInNlbGVjdFwiLHJlcXVpcmVkQ29udGVudDpiP2IrXCJbZGlyXVwiOm51bGwsbGFiZWw6ZC5sYW5nRGlyLFwiZGVmYXVsdFwiOlwiXCIsXHJcbnN0eWxlOlwid2lkdGg6MTAwJVwiLGl0ZW1zOltbZC5ub3RTZXQsXCJcIl0sW2QubGFuZ0RpckxUUixcImx0clwiXSxbZC5sYW5nRGlyUlRMLFwicnRsXCJdXSxzZXR1cDpmLGNvbW1pdDpnfSksaC5lbGVtZW50c1swXS5jaGlsZHJlbi5wdXNoKHt0eXBlOlwiaGJveFwiLHdpZHRoczpbXCI1MCVcIixcIjUwJVwiXSxjaGlsZHJlbjpbXS5jb25jYXQoZSl9KTtpZihhLnN0eWxlc3x8YS5jbGFzc2VzKWU9W10sYS5zdHlsZXMmJmUucHVzaCh7aWQ6XCJhZHZTdHlsZXNcIixhdHQ6XCJzdHlsZVwiLHR5cGU6XCJ0ZXh0XCIscmVxdWlyZWRDb250ZW50OmI/YitcIntja2UteHl6fVwiOm51bGwsbGFiZWw6ZC5zdHlsZXMsXCJkZWZhdWx0XCI6XCJcIix2YWxpZGF0ZTpDS0VESVRPUi5kaWFsb2cudmFsaWRhdGUuaW5saW5lU3R5bGUoZC5pbnZhbGlkSW5saW5lU3R5bGUpLG9uQ2hhbmdlOmZ1bmN0aW9uKCl7fSxnZXRTdHlsZTpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZ2V0VmFsdWUoKS5tYXRjaChuZXcgUmVnRXhwKFwiKD86Xnw7KVxcXFxzKlwiK1xyXG5hK1wiXFxcXHMqOlxcXFxzKihbXjtdKilcIixcImlcIikpO3JldHVybiBiP2JbMV06Y30sdXBkYXRlU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmdldFZhbHVlKCksZT1jLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2Uuc2V0QXR0cmlidXRlKFwic3R5bGVcIixkKTtlLnNldFN0eWxlKGEsYik7ZD1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGUuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikpO3RoaXMuc2V0VmFsdWUoZCwxKX0sc2V0dXA6Zixjb21taXQ6Z30pLGEuY2xhc3NlcyYmZS5wdXNoKHt0eXBlOlwiaGJveFwiLHdpZHRoczpbXCI0NSVcIixcIjU1JVwiXSxjaGlsZHJlbjpbe2lkOlwiYWR2Q1NTQ2xhc3Nlc1wiLGF0dDpcImNsYXNzXCIsdHlwZTpcInRleHRcIixyZXF1aXJlZENvbnRlbnQ6Yj9iK1wiKGNrZS14eXopXCI6bnVsbCxsYWJlbDpkLmNzc0NsYXNzZXMsXCJkZWZhdWx0XCI6XCJcIixzZXR1cDpmLGNvbW1pdDpnfV19KSxoLmVsZW1lbnRzWzBdLmNoaWxkcmVuLnB1c2goe3R5cGU6XCJoYm94XCIsXHJcbndpZHRoczpbXCI1MCVcIixcIjUwJVwiXSxjaGlsZHJlbjpbXS5jb25jYXQoZSl9KTtyZXR1cm4gaH19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJiYXNpY3N0eWxlc1wiLHtpbml0OmZ1bmN0aW9uKGMpe3ZhciBlPTAsZD1mdW5jdGlvbihnLGQsYixhKXtpZihhKXthPW5ldyBDS0VESVRPUi5zdHlsZShhKTt2YXIgZj1oW2JdO2YudW5zaGlmdChhKTtjLmF0dGFjaFN0eWxlU3RhdGVDaGFuZ2UoYSxmdW5jdGlvbihhKXshYy5yZWFkT25seSYmYy5nZXRDb21tYW5kKGIpLnNldFN0YXRlKGEpfSk7Yy5hZGRDb21tYW5kKGIsbmV3IENLRURJVE9SLnN0eWxlQ29tbWFuZChhLHtjb250ZW50Rm9ybXM6Zn0pKTtjLnVpLmFkZEJ1dHRvbiYmYy51aS5hZGRCdXR0b24oZyx7bGFiZWw6ZCxjb21tYW5kOmIsdG9vbGJhcjpcImJhc2ljc3R5bGVzLFwiKyhlKz0xMCl9KX19LGg9e2JvbGQ6W1wic3Ryb25nXCIsXCJiXCIsW1wic3BhblwiLGZ1bmN0aW9uKGEpe2E9YS5zdHlsZXNbXCJmb250LXdlaWdodFwiXTtyZXR1cm5cImJvbGRcIj09YXx8NzAwPD0rYX1dXSxpdGFsaWM6W1wiZW1cIixcImlcIixbXCJzcGFuXCIsZnVuY3Rpb24oYSl7cmV0dXJuXCJpdGFsaWNcIj09XHJcbmEuc3R5bGVzW1wiZm9udC1zdHlsZVwiXX1dXSx1bmRlcmxpbmU6W1widVwiLFtcInNwYW5cIixmdW5jdGlvbihhKXtyZXR1cm5cInVuZGVybGluZVwiPT1hLnN0eWxlc1tcInRleHQtZGVjb3JhdGlvblwiXX1dXSxzdHJpa2U6W1wic1wiLFwic3RyaWtlXCIsW1wic3BhblwiLGZ1bmN0aW9uKGEpe3JldHVyblwibGluZS10aHJvdWdoXCI9PWEuc3R5bGVzW1widGV4dC1kZWNvcmF0aW9uXCJdfV1dLHN1YnNjcmlwdDpbXCJzdWJcIl0sc3VwZXJzY3JpcHQ6W1wic3VwXCJdfSxiPWMuY29uZmlnLGE9Yy5sYW5nLmJhc2ljc3R5bGVzO2QoXCJCb2xkXCIsYS5ib2xkLFwiYm9sZFwiLGIuY29yZVN0eWxlc19ib2xkKTtkKFwiSXRhbGljXCIsYS5pdGFsaWMsXCJpdGFsaWNcIixiLmNvcmVTdHlsZXNfaXRhbGljKTtkKFwiVW5kZXJsaW5lXCIsYS51bmRlcmxpbmUsXCJ1bmRlcmxpbmVcIixiLmNvcmVTdHlsZXNfdW5kZXJsaW5lKTtkKFwiU3RyaWtlXCIsYS5zdHJpa2UsXCJzdHJpa2VcIixiLmNvcmVTdHlsZXNfc3RyaWtlKTtkKFwiU3Vic2NyaXB0XCIsYS5zdWJzY3JpcHQsXHJcblwic3Vic2NyaXB0XCIsYi5jb3JlU3R5bGVzX3N1YnNjcmlwdCk7ZChcIlN1cGVyc2NyaXB0XCIsYS5zdXBlcnNjcmlwdCxcInN1cGVyc2NyaXB0XCIsYi5jb3JlU3R5bGVzX3N1cGVyc2NyaXB0KTtjLnNldEtleXN0cm9rZShbW0NLRURJVE9SLkNUUkwrNjYsXCJib2xkXCJdLFtDS0VESVRPUi5DVFJMKzczLFwiaXRhbGljXCJdLFtDS0VESVRPUi5DVFJMKzg1LFwidW5kZXJsaW5lXCJdXSl9fSk7Q0tFRElUT1IuY29uZmlnLmNvcmVTdHlsZXNfYm9sZD17ZWxlbWVudDpcInN0cm9uZ1wiLG92ZXJyaWRlczpcImJcIn07Q0tFRElUT1IuY29uZmlnLmNvcmVTdHlsZXNfaXRhbGljPXtlbGVtZW50OlwiZW1cIixvdmVycmlkZXM6XCJpXCJ9O0NLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX3VuZGVybGluZT17ZWxlbWVudDpcInVcIn07Q0tFRElUT1IuY29uZmlnLmNvcmVTdHlsZXNfc3RyaWtlPXtlbGVtZW50Olwic1wiLG92ZXJyaWRlczpcInN0cmlrZVwifTtDS0VESVRPUi5jb25maWcuY29yZVN0eWxlc19zdWJzY3JpcHQ9e2VsZW1lbnQ6XCJzdWJcIn07XHJcbkNLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX3N1cGVyc2NyaXB0PXtlbGVtZW50Olwic3VwXCJ9OyhmdW5jdGlvbigpe2Z1bmN0aW9uIHEoYSxmLGQsYil7aWYoIWEuaXNSZWFkT25seSgpJiYhYS5lcXVhbHMoZC5lZGl0YWJsZSgpKSl7Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGIsYSxcImJpZGlfcHJvY2Vzc2VkXCIsMSk7Yj1hO2Zvcih2YXIgYz1kLmVkaXRhYmxlKCk7KGI9Yi5nZXRQYXJlbnQoKSkmJiFiLmVxdWFscyhjKTspaWYoYi5nZXRDdXN0b21EYXRhKFwiYmlkaV9wcm9jZXNzZWRcIikpe2EucmVtb3ZlU3R5bGUoXCJkaXJlY3Rpb25cIik7YS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXJcIik7cmV0dXJufWI9XCJ1c2VDb21wdXRlZFN0YXRlXCJpbiBkLmNvbmZpZz9kLmNvbmZpZy51c2VDb21wdXRlZFN0YXRlOjE7KGI/YS5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpOmEuZ2V0U3R5bGUoXCJkaXJlY3Rpb25cIil8fGEuaGFzQXR0cmlidXRlKFwiZGlyXCIpKSE9ZiYmKGEucmVtb3ZlU3R5bGUoXCJkaXJlY3Rpb25cIiksYj8oYS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXJcIiksZiE9YS5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpJiZcclxuYS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixmKSk6YS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixmKSxkLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCkpfX1mdW5jdGlvbiB2KGEsZixkKXt2YXIgYj1hLmdldENvbW1vbkFuY2VzdG9yKCExLCEwKTthPWEuY2xvbmUoKTthLmVubGFyZ2UoZD09Q0tFRElUT1IuRU5URVJfQlI/Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM6Q0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUyk7aWYoYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsQ0tFRElUT1IuU1RBUlQpJiZhLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoYixDS0VESVRPUi5FTkQpKXtmb3IodmFyIGM7YiYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihjPWIuZ2V0UGFyZW50KCkpJiYxPT1jLmdldENoaWxkQ291bnQoKSYmIShiLmdldE5hbWUoKWluIGYpOyliPWM7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmdldE5hbWUoKWluIGYmJmJ9fWZ1bmN0aW9uIHAoYSl7cmV0dXJue2NvbnRleHQ6XCJwXCIsXHJcbmFsbG93ZWRDb250ZW50OntcImgxIGgyIGgzIGg0IGg1IGg2IHRhYmxlIHVsIG9sIGJsb2NrcXVvdGUgZGl2IHRyIHAgZGl2IGxpIHRkXCI6e3Byb3BlcnRpZXNPbmx5OiEwLGF0dHJpYnV0ZXM6XCJkaXJcIn19LHJlcXVpcmVkQ29udGVudDpcInBbZGlyXVwiLHJlZnJlc2g6ZnVuY3Rpb24oYSxkKXt2YXIgYj1hLmNvbmZpZy51c2VDb21wdXRlZFN0YXRlLGMsYj12b2lkIDA9PT1ifHxiO2lmKCFiKXtjPWQubGFzdEVsZW1lbnQ7Zm9yKHZhciBoPWEuZWRpdGFibGUoKTtjJiYhKGMuZ2V0TmFtZSgpaW4gdXx8Yy5lcXVhbHMoaCkpOyl7dmFyIGU9Yy5nZXRQYXJlbnQoKTtpZighZSlicmVhaztjPWV9fWM9Y3x8ZC5ibG9ja3x8ZC5ibG9ja0xpbWl0O2MuZXF1YWxzKGEuZWRpdGFibGUoKSkmJihoPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKClbMF0uZ2V0RW5jbG9zZWROb2RlKCkpJiZoLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGM9aCk7YyYmKGI9Yj9jLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIik6XHJcbmMuZ2V0U3R5bGUoXCJkaXJlY3Rpb25cIil8fGMuZ2V0QXR0cmlidXRlKFwiZGlyXCIpLGEuZ2V0Q29tbWFuZChcImJpZGlydGxcIikuc2V0U3RhdGUoXCJydGxcIj09Yj9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpLGEuZ2V0Q29tbWFuZChcImJpZGlsdHJcIikuc2V0U3RhdGUoXCJsdHJcIj09Yj9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpKTtiPShkLmJsb2NrfHxkLmJsb2NrTGltaXR8fGEuZWRpdGFibGUoKSkuZ2V0RGlyZWN0aW9uKDEpO2IhPShhLl8uc2VsRGlyfHxhLmxhbmcuZGlyKSYmKGEuXy5zZWxEaXI9YixhLmZpcmUoXCJjb250ZW50RGlyQ2hhbmdlZFwiLGIpKX0sZXhlYzpmdW5jdGlvbihmKXt2YXIgZD1mLmdldFNlbGVjdGlvbigpLGI9Zi5jb25maWcuZW50ZXJNb2RlLGM9ZC5nZXRSYW5nZXMoKTtpZihjJiZjLmxlbmd0aCl7Zm9yKHZhciBoPXt9LGU9ZC5jcmVhdGVCb29rbWFya3MoKSxjPWMuY3JlYXRlSXRlcmF0b3IoKSxnLFxyXG5sPTA7Zz1jLmdldE5leHRSYW5nZSgxKTspe3ZhciBrPWcuZ2V0RW5jbG9zZWROb2RlKCk7ayYmKCFrfHxrLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmay5nZXROYW1lKClpbiByKXx8KGs9dihnLHQsYikpO2smJnEoayxhLGYsaCk7dmFyIG09bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZyksbj1lW2xdLnN0YXJ0Tm9kZSxwPWVbbCsrXS5lbmROb2RlO20uZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3ZhciBjPWI9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIixkO2lmKGQ9KGE/YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ6ITEpJiZhLmdldE5hbWUoKWluIHQpe2lmKGM9YS5pcyhjKSljPShjPWEuZ2V0UGFyZW50KCkpP2MudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UOiExO2Q9IShjJiZhLmdldFBhcmVudCgpLmlzKFwiYmxvY2txdW90ZVwiKSl9cmV0dXJuISEoZCYmYS5nZXRQb3NpdGlvbihuKSZDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkcmJihhLmdldFBvc2l0aW9uKHApJlxyXG5DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkcrQ0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlMpPT1DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkcpfTtmb3IoO2s9bS5uZXh0KCk7KXEoayxhLGYsaCk7Zz1nLmNyZWF0ZUl0ZXJhdG9yKCk7Zm9yKGcuZW5sYXJnZUJyPWIhPUNLRURJVE9SLkVOVEVSX0JSO2s9Zy5nZXROZXh0UGFyYWdyYXBoKGI9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIik7KXEoayxhLGYsaCl9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGgpO2YuZm9yY2VOZXh0U2VsZWN0aW9uQ2hlY2soKTtkLnNlbGVjdEJvb2ttYXJrcyhlKTtmLmZvY3VzKCl9fX19ZnVuY3Rpb24gdyhhKXt2YXIgZj1hPT1sLnNldEF0dHJpYnV0ZSxkPWE9PWwucmVtb3ZlQXR0cmlidXRlLGI9L1xcYmRpcmVjdGlvblxccyo6XFxzKiguKj8pXFxzKig6PyR8OykvO3JldHVybiBmdW5jdGlvbihjLGgpe2lmKCF0aGlzLmlzUmVhZE9ubHkoKSl7dmFyIGU7aWYoZT1jPT0oZnx8ZD9cclxuXCJkaXJcIjpcImRpcmVjdGlvblwiKXx8XCJzdHlsZVwiPT1jJiYoZHx8Yi50ZXN0KGgpKSl7YTp7ZT10aGlzO2Zvcih2YXIgZz1lLmdldERvY3VtZW50KCkuZ2V0Qm9keSgpLmdldFBhcmVudCgpO2U7KXtpZihlLmVxdWFscyhnKSl7ZT0hMTticmVhayBhfWU9ZS5nZXRQYXJlbnQoKX1lPSEwfWU9IWV9aWYoZSYmKGU9dGhpcy5nZXREaXJlY3Rpb24oMSksZz1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlIT10aGlzLmdldERpcmVjdGlvbigxKSkpcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQoKS5maXJlKFwiZGlyQ2hhbmdlZFwiLHRoaXMpLGd9cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgdD17dGFibGU6MSx1bDoxLG9sOjEsYmxvY2txdW90ZToxLGRpdjoxfSxyPXt9LHU9e307Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHIsdCx7dHI6MSxwOjEsZGl2OjEsbGk6MX0pO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh1LHIse3RkOjF9KTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImJpZGlcIix7aW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBmKGIsXHJcbmMsZCxlLGYpe2EuYWRkQ29tbWFuZChkLG5ldyBDS0VESVRPUi5jb21tYW5kKGEsZSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihiLHtsYWJlbDpjLGNvbW1hbmQ6ZCx0b29sYmFyOlwiYmlkaSxcIitmfSl9aWYoIWEuYmxvY2tsZXNzKXt2YXIgZD1hLmxhbmcuYmlkaTtmKFwiQmlkaUx0clwiLGQubHRyLFwiYmlkaWx0clwiLHAoXCJsdHJcIiksMTApO2YoXCJCaWRpUnRsXCIsZC5ydGwsXCJiaWRpcnRsXCIscChcInJ0bFwiKSwyMCk7YS5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe2EuZG9jdW1lbnQub24oXCJkaXJDaGFuZ2VkXCIsZnVuY3Rpb24oYil7YS5maXJlKFwiZGlyQ2hhbmdlZFwiLHtub2RlOmIuZGF0YSxkaXI6Yi5kYXRhLmdldERpcmVjdGlvbigxKX0pfSl9KTthLm9uKFwiY29udGVudERpckNoYW5nZWRcIixmdW5jdGlvbihiKXtiPShhLmxhbmcuZGlyIT1iLmRhdGE/XCJhZGRcIjpcInJlbW92ZVwiKStcIkNsYXNzXCI7dmFyIGM9YS51aS5zcGFjZShhLmNvbmZpZy50b29sYmFyTG9jYXRpb24pO2lmKGMpY1tiXShcImNrZV9taXhlZF9kaXJfY29udGVudFwiKX0pfX19KTtcclxuZm9yKHZhciBsPUNLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZSxuPVtcInNldFN0eWxlXCIsXCJyZW1vdmVTdHlsZVwiLFwic2V0QXR0cmlidXRlXCIsXCJyZW1vdmVBdHRyaWJ1dGVcIl0sbT0wO208bi5sZW5ndGg7bSsrKWxbblttXV09Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUobFtuW21dXSx3KX0pKCk7KGZ1bmN0aW9uKCl7dmFyIG09e2V4ZWM6ZnVuY3Rpb24oZyl7dmFyIGE9Zy5nZXRDb21tYW5kKFwiYmxvY2txdW90ZVwiKS5zdGF0ZSxrPWcuZ2V0U2VsZWN0aW9uKCksYz1rJiZrLmdldFJhbmdlcygpWzBdO2lmKGMpe3ZhciBoPWsuY3JlYXRlQm9va21hcmtzKCk7aWYoQ0tFRElUT1IuZW52LmllKXt2YXIgZT1oWzBdLnN0YXJ0Tm9kZSxiPWhbMF0uZW5kTm9kZSxkO2lmKGUmJlwiYmxvY2txdW90ZVwiPT1lLmdldFBhcmVudCgpLmdldE5hbWUoKSlmb3IoZD1lO2Q9ZC5nZXROZXh0KCk7KWlmKGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmlzQmxvY2tCb3VuZGFyeSgpKXtlLm1vdmUoZCwhMCk7YnJlYWt9aWYoYiYmXCJibG9ja3F1b3RlXCI9PWIuZ2V0UGFyZW50KCkuZ2V0TmFtZSgpKWZvcihkPWI7ZD1kLmdldFByZXZpb3VzKCk7KWlmKGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmlzQmxvY2tCb3VuZGFyeSgpKXtiLm1vdmUoZCk7YnJlYWt9fXZhciBmPWMuY3JlYXRlSXRlcmF0b3IoKTtcclxuZi5lbmxhcmdlQnI9Zy5jb25maWcuZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUjtpZihhPT1DS0VESVRPUi5UUklTVEFURV9PRkYpe2ZvcihlPVtdO2E9Zi5nZXROZXh0UGFyYWdyYXBoKCk7KWUucHVzaChhKTsxPmUubGVuZ3RoJiYoYT1nLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZy5jb25maWcuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpLGI9aC5zaGlmdCgpLGMuaW5zZXJ0Tm9kZShhKSxhLmFwcGVuZChuZXcgQ0tFRElUT1IuZG9tLnRleHQoXCLvu79cIixnLmRvY3VtZW50KSksYy5tb3ZlVG9Cb29rbWFyayhiKSxjLnNlbGVjdE5vZGVDb250ZW50cyhhKSxjLmNvbGxhcHNlKCEwKSxiPWMuY3JlYXRlQm9va21hcmsoKSxlLnB1c2goYSksaC51bnNoaWZ0KGIpKTtkPWVbMF0uZ2V0UGFyZW50KCk7Yz1bXTtmb3IoYj0wO2I8ZS5sZW5ndGg7YisrKWE9ZVtiXSxkPWQuZ2V0Q29tbW9uQW5jZXN0b3IoYS5nZXRQYXJlbnQoKSk7Zm9yKGE9e3RhYmxlOjEsdGJvZHk6MSxcclxudHI6MSxvbDoxLHVsOjF9O2FbZC5nZXROYW1lKCldOylkPWQuZ2V0UGFyZW50KCk7Zm9yKGI9bnVsbDswPGUubGVuZ3RoOyl7Zm9yKGE9ZS5zaGlmdCgpOyFhLmdldFBhcmVudCgpLmVxdWFscyhkKTspYT1hLmdldFBhcmVudCgpO2EuZXF1YWxzKGIpfHxjLnB1c2goYSk7Yj1hfWZvcig7MDxjLmxlbmd0aDspaWYoYT1jLnNoaWZ0KCksXCJibG9ja3F1b3RlXCI9PWEuZ2V0TmFtZSgpKXtmb3IoYj1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoZy5kb2N1bWVudCk7YS5nZXRGaXJzdCgpOyliLmFwcGVuZChhLmdldEZpcnN0KCkucmVtb3ZlKCkpLGUucHVzaChiLmdldExhc3QoKSk7Yi5yZXBsYWNlKGEpfWVsc2UgZS5wdXNoKGEpO2M9Zy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYmxvY2txdW90ZVwiKTtmb3IoYy5pbnNlcnRCZWZvcmUoZVswXSk7MDxlLmxlbmd0aDspYT1lLnNoaWZ0KCksYy5hcHBlbmQoYSl9ZWxzZSBpZihhPT1DS0VESVRPUi5UUklTVEFURV9PTil7Yj1bXTtcclxuZm9yKGQ9e307YT1mLmdldE5leHRQYXJhZ3JhcGgoKTspe2ZvcihlPWM9bnVsbDthLmdldFBhcmVudCgpOyl7aWYoXCJibG9ja3F1b3RlXCI9PWEuZ2V0UGFyZW50KCkuZ2V0TmFtZSgpKXtjPWEuZ2V0UGFyZW50KCk7ZT1hO2JyZWFrfWE9YS5nZXRQYXJlbnQoKX1jJiZlJiYhZS5nZXRDdXN0b21EYXRhKFwiYmxvY2txdW90ZV9tb3Zlb3V0XCIpJiYoYi5wdXNoKGUpLENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihkLGUsXCJibG9ja3F1b3RlX21vdmVvdXRcIiwhMCkpfUNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhkKTthPVtdO2U9W107Zm9yKGQ9e307MDxiLmxlbmd0aDspZj1iLnNoaWZ0KCksYz1mLmdldFBhcmVudCgpLGYuZ2V0UHJldmlvdXMoKT9mLmdldE5leHQoKT8oZi5icmVha1BhcmVudChmLmdldFBhcmVudCgpKSxlLnB1c2goZi5nZXROZXh0KCkpKTpmLnJlbW92ZSgpLmluc2VydEFmdGVyKGMpOmYucmVtb3ZlKCkuaW5zZXJ0QmVmb3JlKGMpLGMuZ2V0Q3VzdG9tRGF0YShcImJsb2NrcXVvdGVfcHJvY2Vzc2VkXCIpfHxcclxuKGUucHVzaChjKSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoZCxjLFwiYmxvY2txdW90ZV9wcm9jZXNzZWRcIiwhMCkpLGEucHVzaChmKTtDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoZCk7Zm9yKGI9ZS5sZW5ndGgtMTswPD1iO2ItLSl7Yz1lW2JdO2E6e2Q9Yztmb3IodmFyIGY9MCxtPWQuZ2V0Q2hpbGRDb3VudCgpLGw9dm9pZCAwO2Y8bSYmKGw9ZC5nZXRDaGlsZChmKSk7ZisrKWlmKGwudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZsLmlzQmxvY2tCb3VuZGFyeSgpKXtkPSExO2JyZWFrIGF9ZD0hMH1kJiZjLnJlbW92ZSgpfWlmKGcuY29uZmlnLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlIpZm9yKGM9ITA7YS5sZW5ndGg7KWlmKGY9YS5zaGlmdCgpLFwiZGl2XCI9PWYuZ2V0TmFtZSgpKXtiPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChnLmRvY3VtZW50KTshY3x8IWYuZ2V0UHJldmlvdXMoKXx8Zi5nZXRQcmV2aW91cygpLnR5cGU9PVxyXG5DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmYuZ2V0UHJldmlvdXMoKS5pc0Jsb2NrQm91bmRhcnkoKXx8Yi5hcHBlbmQoZy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO2ZvcihjPWYuZ2V0TmV4dCgpJiYhKGYuZ2V0TmV4dCgpLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZi5nZXROZXh0KCkuaXNCbG9ja0JvdW5kYXJ5KCkpO2YuZ2V0Rmlyc3QoKTspZi5nZXRGaXJzdCgpLnJlbW92ZSgpLmFwcGVuZFRvKGIpO2MmJmIuYXBwZW5kKGcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtiLnJlcGxhY2UoZik7Yz0hMX19ay5zZWxlY3RCb29rbWFya3MoaCk7Zy5mb2N1cygpfX0scmVmcmVzaDpmdW5jdGlvbihnLGEpe3RoaXMuc2V0U3RhdGUoZy5lbGVtZW50UGF0aChhLmJsb2NrfHxhLmJsb2NrTGltaXQpLmNvbnRhaW5zKFwiYmxvY2txdW90ZVwiLDEpP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRil9LGNvbnRleHQ6XCJibG9ja3F1b3RlXCIsYWxsb3dlZENvbnRlbnQ6XCJibG9ja3F1b3RlXCIsXHJcbnJlcXVpcmVkQ29udGVudDpcImJsb2NrcXVvdGVcIn07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJibG9ja3F1b3RlXCIse2luaXQ6ZnVuY3Rpb24oZyl7Zy5ibG9ja2xlc3N8fChnLmFkZENvbW1hbmQoXCJibG9ja3F1b3RlXCIsbSksZy51aS5hZGRCdXR0b24mJmcudWkuYWRkQnV0dG9uKFwiQmxvY2txdW90ZVwiLHtsYWJlbDpnLmxhbmcuYmxvY2txdW90ZS50b29sYmFyLGNvbW1hbmQ6XCJibG9ja3F1b3RlXCIsdG9vbGJhcjpcImJsb2NrcywxMFwifSkpfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGIsYSxjKXthLnR5cGV8fChhLnR5cGU9XCJhdXRvXCIpO2lmKGMmJiExPT09Yi5maXJlKFwiYmVmb3JlUGFzdGVcIixhKXx8IWEuZGF0YVZhbHVlJiZhLmRhdGFUcmFuc2Zlci5pc0VtcHR5KCkpcmV0dXJuITE7YS5kYXRhVmFsdWV8fChhLmRhdGFWYWx1ZT1cIlwiKTtpZihDS0VESVRPUi5lbnYuZ2Vja28mJlwiZHJvcFwiPT1hLm1ldGhvZCYmYi50b29sYm94KWIub25jZShcImFmdGVyUGFzdGVcIixmdW5jdGlvbigpe2IudG9vbGJveC5mb2N1cygpfSk7cmV0dXJuIGIuZmlyZShcInBhc3RlXCIsYSl9ZnVuY3Rpb24geShiKXtmdW5jdGlvbiBhKCl7dmFyIGE9Yi5lZGl0YWJsZSgpO2lmKENLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmlzQ3VzdG9tQ29weUN1dFN1cHBvcnRlZCl7dmFyIGQ9ZnVuY3Rpb24oYSl7Yi5yZWFkT25seSYmXCJjdXRcIj09YS5uYW1lfHxuLmluaXRQYXN0ZURhdGFUcmFuc2ZlcihhLGIpO2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfTthLm9uKFwiY29weVwiLFxyXG5kKTthLm9uKFwiY3V0XCIsZCk7YS5vbihcImN1dFwiLGZ1bmN0aW9uKCl7Yi5yZWFkT25seXx8Yi5leHRyYWN0U2VsZWN0ZWRIdG1sKCl9LG51bGwsbnVsbCw5OTkpfWEub24obi5tYWluUGFzdGVFdmVudCxmdW5jdGlvbihiKXtcImJlZm9yZXBhc3RlXCI9PW4ubWFpblBhc3RlRXZlbnQmJnB8fGsoYil9KTtcImJlZm9yZXBhc3RlXCI9PW4ubWFpblBhc3RlRXZlbnQmJihhLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXt2fHwoZSgpLGEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpLGsoYSksZihcInBhc3RlXCIpfHxiLm9wZW5EaWFsb2coXCJwYXN0ZVwiKSl9KSxhLm9uKFwiY29udGV4dG1lbnVcIixnLG51bGwsbnVsbCwwKSxhLm9uKFwiYmVmb3JlcGFzdGVcIixmdW5jdGlvbihiKXshYi5kYXRhfHxiLmRhdGEuJC5jdHJsS2V5fHxiLmRhdGEuJC5zaGlmdEtleXx8ZygpfSxudWxsLG51bGwsMCkpO2Eub24oXCJiZWZvcmVjdXRcIixmdW5jdGlvbigpeyFwJiZoKGIpfSk7dmFyIGM7YS5hdHRhY2hMaXN0ZW5lcihDS0VESVRPUi5lbnYuaWU/XHJcbmE6Yi5kb2N1bWVudC5nZXREb2N1bWVudEVsZW1lbnQoKSxcIm1vdXNldXBcIixmdW5jdGlvbigpe2M9c2V0VGltZW91dChmdW5jdGlvbigpe3QoKX0sMCl9KTtiLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGMpfSk7YS5vbihcImtleXVwXCIsdCl9ZnVuY3Rpb24gYyhhKXtyZXR1cm57dHlwZTphLGNhblVuZG86XCJjdXRcIj09YSxzdGFydERpc2FibGVkOiEwLGV4ZWM6ZnVuY3Rpb24oKXtcImN1dFwiPT10aGlzLnR5cGUmJmgoKTt2YXIgYTt2YXIgZD10aGlzLnR5cGU7aWYoQ0tFRElUT1IuZW52LmllKWE9ZihkKTtlbHNlIHRyeXthPWIuZG9jdW1lbnQuJC5leGVjQ29tbWFuZChkLCExLG51bGwpfWNhdGNoKGMpe2E9ITF9YXx8Yi5zaG93Tm90aWZpY2F0aW9uKGIubGFuZy5jbGlwYm9hcmRbdGhpcy50eXBlK1wiRXJyb3JcIl0pO3JldHVybiBhfX19ZnVuY3Rpb24gZCgpe3JldHVybntjYW5VbmRvOiExLGFzeW5jOiEwLGV4ZWM6ZnVuY3Rpb24oYixhKXt2YXIgZD1mdW5jdGlvbihhLFxyXG5kKXthJiZyKGIsYSwhIWQpO2IuZmlyZShcImFmdGVyQ29tbWFuZEV4ZWNcIix7bmFtZTpcInBhc3RlXCIsY29tbWFuZDpjLHJldHVyblZhbHVlOiEhYX0pfSxjPXRoaXM7XCJzdHJpbmdcIj09dHlwZW9mIGE/ZCh7ZGF0YVZhbHVlOmEsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6bi5pbml0UGFzdGVEYXRhVHJhbnNmZXIoKX0sMSk6Yi5nZXRDbGlwYm9hcmREYXRhKGQpfX19ZnVuY3Rpb24gZSgpe3Y9MTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dj0wfSwxMDApfWZ1bmN0aW9uIGcoKXtwPTE7c2V0VGltZW91dChmdW5jdGlvbigpe3A9MH0sMTApfWZ1bmN0aW9uIGYoYSl7dmFyIGQ9Yi5kb2N1bWVudCxjPWQuZ2V0Qm9keSgpLGU9ITEsZj1mdW5jdGlvbigpe2U9ITB9O2Mub24oYSxmKTs3PENLRURJVE9SLmVudi52ZXJzaW9uP2QuJC5leGVjQ29tbWFuZChhKTpkLiQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkuZXhlY0NvbW1hbmQoYSk7Yy5yZW1vdmVMaXN0ZW5lcihhLGYpO3JldHVybiBlfVxyXG5mdW5jdGlvbiBoKCl7aWYoQ0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LnF1aXJrcyl7dmFyIGE9Yi5nZXRTZWxlY3Rpb24oKSxkLGMsZTthLmdldFR5cGUoKT09Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQmJihkPWEuZ2V0U2VsZWN0ZWRFbGVtZW50KCkpJiYoYz1hLmdldFJhbmdlcygpWzBdLGU9Yi5kb2N1bWVudC5jcmVhdGVUZXh0KFwiXCIpLGUuaW5zZXJ0QmVmb3JlKGQpLGMuc2V0U3RhcnRCZWZvcmUoZSksYy5zZXRFbmRBZnRlcihkKSxhLnNlbGVjdFJhbmdlcyhbY10pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkLmdldFBhcmVudCgpJiYoZS5yZW1vdmUoKSxhLnNlbGVjdEVsZW1lbnQoZCkpfSwwKSl9fWZ1bmN0aW9uIGwoYSxkKXt2YXIgYz1iLmRvY3VtZW50LGU9Yi5lZGl0YWJsZSgpLGY9ZnVuY3Rpb24oYil7Yi5jYW5jZWwoKX0scTtpZighYy5nZXRCeUlkKFwiY2tlX3Bhc3RlYmluXCIpKXt2YXIgZz1iLmdldFNlbGVjdGlvbigpLGg9Zy5jcmVhdGVCb29rbWFya3MoKTtcclxuQ0tFRElUT1IuZW52LmllJiZnLnJvb3QuZmlyZShcInNlbGVjdGlvbmNoYW5nZVwiKTt2YXIgbT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoIUNLRURJVE9SLmVudi53ZWJraXQmJiFlLmlzKFwiYm9keVwiKXx8Q0tFRElUT1IuZW52LmllP1wiZGl2XCI6XCJib2R5XCIsYyk7bS5zZXRBdHRyaWJ1dGVzKHtpZDpcImNrZV9wYXN0ZWJpblwiLFwiZGF0YS1ja2UtdGVtcFwiOlwiMVwifSk7dmFyIGs9MCxjPWMuZ2V0V2luZG93KCk7Q0tFRElUT1IuZW52LndlYmtpdD8oZS5hcHBlbmQobSksbS5hZGRDbGFzcyhcImNrZV9lZGl0YWJsZVwiKSxlLmlzKFwiYm9keVwiKXx8KGs9XCJzdGF0aWNcIiE9ZS5nZXRDb21wdXRlZFN0eWxlKFwicG9zaXRpb25cIik/ZTpDS0VESVRPUi5kb20uZWxlbWVudC5nZXQoZS4kLm9mZnNldFBhcmVudCksaz1rLmdldERvY3VtZW50UG9zaXRpb24oKS55KSk6ZS5nZXRBc2NlbmRhbnQoQ0tFRElUT1IuZW52LmllP1wiYm9keVwiOlwiaHRtbFwiLDEpLmFwcGVuZChtKTttLnNldFN0eWxlcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLFxyXG50b3A6Yy5nZXRTY3JvbGxQb3NpdGlvbigpLnktaysxMCtcInB4XCIsd2lkdGg6XCIxcHhcIixoZWlnaHQ6TWF0aC5tYXgoMSxjLmdldFZpZXdQYW5lU2l6ZSgpLmhlaWdodC0yMCkrXCJweFwiLG92ZXJmbG93OlwiaGlkZGVuXCIsbWFyZ2luOjAscGFkZGluZzowfSk7Q0tFRElUT1IuZW52LnNhZmFyaSYmbS5zZXRTdHlsZXMoQ0tFRElUT1IudG9vbHMuY3NzVmVuZG9yUHJlZml4KFwidXNlci1zZWxlY3RcIixcInRleHRcIikpOyhrPW0uZ2V0UGFyZW50KCkuaXNSZWFkT25seSgpKT8obS5zZXRPcGFjaXR5KDApLG0uc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsITApKTptLnNldFN0eWxlKFwibHRyXCI9PWIuY29uZmlnLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbj9cImxlZnRcIjpcInJpZ2h0XCIsXCItMTAwMHB4XCIpO2Iub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmLG51bGwsbnVsbCwwKTtpZihDS0VESVRPUi5lbnYud2Via2l0fHxDS0VESVRPUi5lbnYuZ2Vja28pcT1lLm9uY2UoXCJibHVyXCIsZixudWxsLG51bGwsLTEwMCk7XHJcbmsmJm0uZm9jdXMoKTtrPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UobSk7ay5zZWxlY3ROb2RlQ29udGVudHMobSk7dmFyIHQ9ay5zZWxlY3QoKTtDS0VESVRPUi5lbnYuaWUmJihxPWUub25jZShcImJsdXJcIixmdW5jdGlvbigpe2IubG9ja1NlbGVjdGlvbih0KX0pKTt2YXIgbD1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRTY3JvbGxQb3NpdGlvbigpLnk7c2V0VGltZW91dChmdW5jdGlvbigpe0NLRURJVE9SLmVudi53ZWJraXQmJihDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkuJC5zY3JvbGxUb3A9bCk7cSYmcS5yZW1vdmVMaXN0ZW5lcigpO0NLRURJVE9SLmVudi5pZSYmZS5mb2N1cygpO2cuc2VsZWN0Qm9va21hcmtzKGgpO20ucmVtb3ZlKCk7dmFyIGE7Q0tFRElUT1IuZW52LndlYmtpdCYmKGE9bS5nZXRGaXJzdCgpKSYmYS5pcyYmYS5oYXNDbGFzcyhcIkFwcGxlLXN0eWxlLXNwYW5cIikmJihtPWEpO2IucmVtb3ZlTGlzdGVuZXIoXCJzZWxlY3Rpb25DaGFuZ2VcIixmKTtcclxuZChtLmdldEh0bWwoKSl9LDApfX1mdW5jdGlvbiB6KCl7aWYoXCJwYXN0ZVwiPT1uLm1haW5QYXN0ZUV2ZW50KXJldHVybiBiLmZpcmUoXCJiZWZvcmVQYXN0ZVwiLHt0eXBlOlwiYXV0b1wiLG1ldGhvZDpcInBhc3RlXCJ9KSwhMTtiLmZvY3VzKCk7ZSgpO3ZhciBhPWIuZm9jdXNNYW5hZ2VyO2EubG9jaygpO2lmKGIuZWRpdGFibGUoKS5maXJlKG4ubWFpblBhc3RlRXZlbnQpJiYhZihcInBhc3RlXCIpKXJldHVybiBhLnVubG9jaygpLCExO2EudW5sb2NrKCk7cmV0dXJuITB9ZnVuY3Rpb24gcShhKXtpZihcInd5c2l3eWdcIj09Yi5tb2RlKXN3aXRjaChhLmRhdGEua2V5Q29kZSl7Y2FzZSBDS0VESVRPUi5DVFJMKzg2OmNhc2UgQ0tFRElUT1IuU0hJRlQrNDU6YT1iLmVkaXRhYmxlKCk7ZSgpO1wicGFzdGVcIj09bi5tYWluUGFzdGVFdmVudCYmYS5maXJlKFwiYmVmb3JlcGFzdGVcIik7YnJlYWs7Y2FzZSBDS0VESVRPUi5DVFJMKzg4OmNhc2UgQ0tFRElUT1IuU0hJRlQrNDY6Yi5maXJlKFwic2F2ZVNuYXBzaG90XCIpLFxyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSw1MCl9fWZ1bmN0aW9uIGsoYSl7dmFyIGQ9e3R5cGU6XCJhdXRvXCIsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6bi5pbml0UGFzdGVEYXRhVHJhbnNmZXIoYSl9O2QuZGF0YVRyYW5zZmVyLmNhY2hlRGF0YSgpO3ZhciBjPSExIT09Yi5maXJlKFwiYmVmb3JlUGFzdGVcIixkKTtjJiZuLmNhbkNsaXBib2FyZEFwaUJlVHJ1c3RlZChkLmRhdGFUcmFuc2ZlcixiKT8oYS5kYXRhLnByZXZlbnREZWZhdWx0KCksc2V0VGltZW91dChmdW5jdGlvbigpe3IoYixkKX0sMCkpOmwoYSxmdW5jdGlvbihhKXtkLmRhdGFWYWx1ZT1hLnJlcGxhY2UoLzxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFya1tePF0qPzxcXC9zcGFuPi9pZyxcIlwiKTtjJiZyKGIsZCl9KX1mdW5jdGlvbiB0KCl7aWYoXCJ3eXNpd3lnXCI9PWIubW9kZSl7dmFyIGE9dShcInBhc3RlXCIpO2IuZ2V0Q29tbWFuZChcImN1dFwiKS5zZXRTdGF0ZSh1KFwiY3V0XCIpKTtiLmdldENvbW1hbmQoXCJjb3B5XCIpLnNldFN0YXRlKHUoXCJjb3B5XCIpKTtcclxuYi5nZXRDb21tYW5kKFwicGFzdGVcIikuc2V0U3RhdGUoYSk7Yi5maXJlKFwicGFzdGVTdGF0ZVwiLGEpfX1mdW5jdGlvbiB1KGEpe2lmKHcmJmEgaW57cGFzdGU6MSxjdXQ6MX0pcmV0dXJuIENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEO2lmKFwicGFzdGVcIj09YSlyZXR1cm4gQ0tFRElUT1IuVFJJU1RBVEVfT0ZGO2E9Yi5nZXRTZWxlY3Rpb24oKTt2YXIgZD1hLmdldFJhbmdlcygpO3JldHVybiBhLmdldFR5cGUoKT09Q0tFRElUT1IuU0VMRUNUSU9OX05PTkV8fDE9PWQubGVuZ3RoJiZkWzBdLmNvbGxhcHNlZD9DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRDpDS0VESVRPUi5UUklTVEFURV9PRkZ9dmFyIG49Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQscD0wLHY9MCx3PTA7KGZ1bmN0aW9uKCl7Yi5vbihcImtleVwiLHEpO2Iub24oXCJjb250ZW50RG9tXCIsYSk7Yi5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKGIpe3c9Yi5kYXRhLnNlbGVjdGlvbi5nZXRSYW5nZXMoKVswXS5jaGVja1JlYWRPbmx5KCk7XHJcbnQoKX0pO2IuY29udGV4dE1lbnUmJmIuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYixhKXt3PWEuZ2V0UmFuZ2VzKClbMF0uY2hlY2tSZWFkT25seSgpO3JldHVybntjdXQ6dShcImN1dFwiKSxjb3B5OnUoXCJjb3B5XCIpLHBhc3RlOnUoXCJwYXN0ZVwiKX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShkLGMsZSxmLHEpe3ZhciBnPWIubGFuZy5jbGlwYm9hcmRbY107Yi5hZGRDb21tYW5kKGMsZSk7Yi51aS5hZGRCdXR0b24mJmIudWkuYWRkQnV0dG9uKGQse2xhYmVsOmcsY29tbWFuZDpjLHRvb2xiYXI6XCJjbGlwYm9hcmQsXCIrZn0pO2IuYWRkTWVudUl0ZW1zJiZiLmFkZE1lbnVJdGVtKGMse2xhYmVsOmcsY29tbWFuZDpjLGdyb3VwOlwiY2xpcGJvYXJkXCIsb3JkZXI6cX0pfWEoXCJDdXRcIixcImN1dFwiLGMoXCJjdXRcIiksMTAsMSk7YShcIkNvcHlcIixcImNvcHlcIixjKFwiY29weVwiKSwyMCw0KTthKFwiUGFzdGVcIixcInBhc3RlXCIsZCgpLDMwLDgpfSkoKTtiLmdldENsaXBib2FyZERhdGE9XHJcbmZ1bmN0aW9uKGEsZCl7ZnVuY3Rpb24gYyhhKXthLnJlbW92ZUxpc3RlbmVyKCk7YS5jYW5jZWwoKTtkKGEuZGF0YSl9ZnVuY3Rpb24gZShhKXthLnJlbW92ZUxpc3RlbmVyKCk7YS5jYW5jZWwoKTtrPSEwO2Qoe3R5cGU6ZyxkYXRhVmFsdWU6YS5kYXRhLmRhdGFWYWx1ZSxkYXRhVHJhbnNmZXI6YS5kYXRhLmRhdGFUcmFuc2ZlcixtZXRob2Q6XCJwYXN0ZVwifSl9ZnVuY3Rpb24gZigpe3RoaXMuY3VzdG9tVGl0bGU9YSYmYS50aXRsZX12YXIgcT0hMSxnPVwiYXV0b1wiLGs9ITE7ZHx8KGQ9YSxhPW51bGwpO2Iub24oXCJwYXN0ZVwiLGMsbnVsbCxudWxsLDApO2Iub24oXCJiZWZvcmVQYXN0ZVwiLGZ1bmN0aW9uKGEpe2EucmVtb3ZlTGlzdGVuZXIoKTtxPSEwO2c9YS5kYXRhLnR5cGV9LG51bGwsbnVsbCwxRTMpOyExPT09eigpJiYoYi5yZW1vdmVMaXN0ZW5lcihcInBhc3RlXCIsYykscSYmYi5maXJlKFwicGFzdGVEaWFsb2dcIixmKT8oYi5vbihcInBhc3RlRGlhbG9nQ29tbWl0XCIsZSksYi5vbihcImRpYWxvZ0hpZGVcIixcclxuZnVuY3Rpb24oYSl7YS5yZW1vdmVMaXN0ZW5lcigpO2EuZGF0YS5yZW1vdmVMaXN0ZW5lcihcInBhc3RlRGlhbG9nQ29tbWl0XCIsZSk7c2V0VGltZW91dChmdW5jdGlvbigpe2t8fGQobnVsbCl9LDEwKX0pKTpkKG51bGwpKX19ZnVuY3Rpb24gQShiKXtpZihDS0VESVRPUi5lbnYud2Via2l0KXtpZighYi5tYXRjaCgvXltePF0qJC9nKSYmIWIubWF0Y2goL14oPGRpdj48YnIoID9cXC8pPz48XFwvZGl2Pnw8ZGl2PltePF0qPFxcL2Rpdj4pKiQvZ2kpKXJldHVyblwiaHRtbFwifWVsc2UgaWYoQ0tFRElUT1IuZW52LmllKXtpZighYi5tYXRjaCgvXihbXjxdfDxiciggP1xcLyk/PikqJC9naSkmJiFiLm1hdGNoKC9eKDxwPihbXjxdfDxiciggP1xcLyk/PikqPFxcL3A+fChcXHJcXG4pKSokL2dpKSlyZXR1cm5cImh0bWxcIn1lbHNlIGlmKENLRURJVE9SLmVudi5nZWNrbyl7aWYoIWIubWF0Y2goL14oW148XXw8YnIoID9cXC8pPz4pKiQvZ2kpKXJldHVyblwiaHRtbFwifWVsc2UgcmV0dXJuXCJodG1sXCI7cmV0dXJuXCJodG1saWZpZWR0ZXh0XCJ9XHJcbmZ1bmN0aW9uIEIoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBDS0VESVRPUi50b29scy5yZXBlYXQoXCJcXHgzYy9wXFx4M2VcXHgzY3BcXHgzZVwiLH5+KGEvMikpKygxPT1hJTI/XCJcXHgzY2JyXFx4M2VcIjpcIlwiKX1hPWEucmVwbGFjZSgvXFxzKy9nLFwiIFwiKS5yZXBsYWNlKC8+ICs8L2csXCJcXHgzZVxceDNjXCIpLnJlcGxhY2UoLzxiciA/XFwvPi9naSxcIlxceDNjYnJcXHgzZVwiKTthPWEucmVwbGFjZSgvPFxcLz9bQS1aXSs+L2csZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKX0pO2lmKGEubWF0Y2goL15bXjxdJC8pKXJldHVybiBhO0NLRURJVE9SLmVudi53ZWJraXQmJi0xPGEuaW5kZXhPZihcIlxceDNjZGl2XFx4M2VcIikmJihhPWEucmVwbGFjZSgvXig8ZGl2Pig8YnI+fCk8XFwvZGl2PikoPyEkfCg8ZGl2Pig8YnI+fCk8XFwvZGl2PikpL2csXCJcXHgzY2JyXFx4M2VcIikucmVwbGFjZSgvXig8ZGl2Pig8YnI+fCk8XFwvZGl2Pil7Mn0oPyEkKS9nLFwiXFx4M2NkaXZcXHgzZVxceDNjL2RpdlxceDNlXCIpLGEubWF0Y2goLzxkaXY+KDxicj58KTxcXC9kaXY+LykmJlxyXG4oYT1cIlxceDNjcFxceDNlXCIrYS5yZXBsYWNlKC8oPGRpdj4oPGJyPnwpPFxcL2Rpdj4pKy9nLGZ1bmN0aW9uKGEpe3JldHVybiBjKGEuc3BsaXQoXCJcXHgzYy9kaXZcXHgzZVxceDNjZGl2XFx4M2VcIikubGVuZ3RoKzEpfSkrXCJcXHgzYy9wXFx4M2VcIiksYT1hLnJlcGxhY2UoLzxcXC9kaXY+PGRpdj4vZyxcIlxceDNjYnJcXHgzZVwiKSxhPWEucmVwbGFjZSgvPFxcLz9kaXY+L2csXCJcIikpO0NLRURJVE9SLmVudi5nZWNrbyYmYi5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoQ0tFRElUT1IuZW52LmdlY2tvJiYoYT1hLnJlcGxhY2UoL148YnI+PGJyPiQvLFwiXFx4M2NiclxceDNlXCIpKSwtMTxhLmluZGV4T2YoXCJcXHgzY2JyXFx4M2VcXHgzY2JyXFx4M2VcIikmJihhPVwiXFx4M2NwXFx4M2VcIithLnJlcGxhY2UoLyg8YnI+KXsyLH0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYyhhLmxlbmd0aC80KX0pK1wiXFx4M2MvcFxceDNlXCIpKTtyZXR1cm4gQyhiLGEpfWZ1bmN0aW9uIEQoKXtmdW5jdGlvbiBiKCl7dmFyIGE9e30sYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQpXCIkXCIhPVxyXG5iLmNoYXJBdCgwKSYmXCJkaXZcIiE9YiYmXCJzcGFuXCIhPWImJihhW2JdPTEpO3JldHVybiBhfXZhciBhPXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oYyl7cmV0dXJuXCJwbGFpbi10ZXh0XCI9PWM/YS5wbGFpblRleHR8fChhLnBsYWluVGV4dD1uZXcgQ0tFRElUT1IuZmlsdGVyKFwiYnJcIikpOlwic2VtYW50aWMtY29udGVudFwiPT1jPygoYz1hLnNlbWFudGljQ29udGVudCl8fChjPW5ldyBDS0VESVRPUi5maWx0ZXIsYy5hbGxvdyh7JDE6e2VsZW1lbnRzOmIoKSxhdHRyaWJ1dGVzOiEwLHN0eWxlczohMSxjbGFzc2VzOiExfX0pLGM9YS5zZW1hbnRpY0NvbnRlbnQ9YyksYyk6Yz9uZXcgQ0tFRElUT1IuZmlsdGVyKGMpOm51bGx9fX1mdW5jdGlvbiB4KGIsYSxjKXthPUNLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWwoYSk7dmFyIGQ9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuYmFzaWNXcml0ZXI7Yy5hcHBseVRvKGEsITAsITEsYi5hY3RpdmVFbnRlck1vZGUpO2Eud3JpdGVIdG1sKGQpO1xyXG5yZXR1cm4gZC5nZXRIdG1sKCl9ZnVuY3Rpb24gQyhiLGEpe2IuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUj9hPWEucmVwbGFjZSgvKDxcXC9wPjxwPikrL2csZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLnJlcGVhdChcIlxceDNjYnJcXHgzZVwiLGEubGVuZ3RoLzcqMil9KS5yZXBsYWNlKC88XFwvP3A+L2csXCJcIik6Yi5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0RJViYmKGE9YS5yZXBsYWNlKC88KFxcLyk/cD4vZyxcIlxceDNjJDFkaXZcXHgzZVwiKSk7cmV0dXJuIGF9ZnVuY3Rpb24gRShiKXtiLmRhdGEucHJldmVudERlZmF1bHQoKTtiLmRhdGEuJC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1cIm5vbmVcIn1mdW5jdGlvbiBGKGIpe3ZhciBhPUNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkO2Iub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBjKGEsZCxjKXtkLnNlbGVjdCgpO3IoYix7ZGF0YVRyYW5zZmVyOmMsbWV0aG9kOlwiZHJvcFwifSwxKTtjLnNvdXJjZUVkaXRvci5maXJlKFwic2F2ZVNuYXBzaG90XCIpO1xyXG5jLnNvdXJjZUVkaXRvci5lZGl0YWJsZSgpLmV4dHJhY3RIdG1sRnJvbVJhbmdlKGEpO2Muc291cmNlRWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbYV0pO2Muc291cmNlRWRpdG9yLmZpcmUoXCJzYXZlU25hcHNob3RcIil9ZnVuY3Rpb24gZChkLGMpe2Quc2VsZWN0KCk7cihiLHtkYXRhVHJhbnNmZXI6YyxtZXRob2Q6XCJkcm9wXCJ9LDEpO2EucmVzZXREcmFnRGF0YVRyYW5zZmVyKCl9ZnVuY3Rpb24gZShhLGQsYyl7dmFyIGU9eyQ6YS5kYXRhLiQsdGFyZ2V0OmEuZGF0YS5nZXRUYXJnZXQoKX07ZCYmKGUuZHJhZ1JhbmdlPWQpO2MmJihlLmRyb3BSYW5nZT1jKTshMT09PWIuZmlyZShhLm5hbWUsZSkmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGcoYSl7YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihhPWEuZ2V0UGFyZW50KCkpO3JldHVybiBhLmdldENoaWxkQ291bnQoKX12YXIgZj1iLmVkaXRhYmxlKCksaD1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5nZXREcm9wVGFyZ2V0KGIpLFxyXG5sPWIudWkuc3BhY2UoXCJ0b3BcIikscD1iLnVpLnNwYWNlKFwiYm90dG9tXCIpO2EucHJldmVudERlZmF1bHREcm9wT25FbGVtZW50KGwpO2EucHJldmVudERlZmF1bHREcm9wT25FbGVtZW50KHApO2YuYXR0YWNoTGlzdGVuZXIoaCxcImRyYWdzdGFydFwiLGUpO2YuYXR0YWNoTGlzdGVuZXIoYixcImRyYWdzdGFydFwiLGEucmVzZXREcmFnRGF0YVRyYW5zZmVyLGEsbnVsbCwxKTtmLmF0dGFjaExpc3RlbmVyKGIsXCJkcmFnc3RhcnRcIixmdW5jdGlvbihkKXthLmluaXREcmFnRGF0YVRyYW5zZmVyKGQsYil9LG51bGwsbnVsbCwyKTtmLmF0dGFjaExpc3RlbmVyKGIsXCJkcmFnc3RhcnRcIixmdW5jdGlvbigpe3ZhciBkPWEuZHJhZ1JhbmdlPWIuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKClbMF07Q0tFRElUT1IuZW52LmllJiYxMD5DS0VESVRPUi5lbnYudmVyc2lvbiYmKGEuZHJhZ1N0YXJ0Q29udGFpbmVyQ2hpbGRDb3VudD1kP2coZC5zdGFydENvbnRhaW5lcik6bnVsbCxhLmRyYWdFbmRDb250YWluZXJDaGlsZENvdW50PVxyXG5kP2coZC5lbmRDb250YWluZXIpOm51bGwpfSxudWxsLG51bGwsMTAwKTtmLmF0dGFjaExpc3RlbmVyKGgsXCJkcmFnZW5kXCIsZSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ2VuZFwiLGEuaW5pdERyYWdEYXRhVHJhbnNmZXIsYSxudWxsLDEpO2YuYXR0YWNoTGlzdGVuZXIoYixcImRyYWdlbmRcIixhLnJlc2V0RHJhZ0RhdGFUcmFuc2ZlcixhLG51bGwsMTAwKTtmLmF0dGFjaExpc3RlbmVyKGgsXCJkcmFnb3ZlclwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5nZXRUYXJnZXQoKTtiJiZiLmlzJiZiLmlzKFwiaHRtbFwiKT9hLmRhdGEucHJldmVudERlZmF1bHQoKTpDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmlzRmlsZUFwaVN1cHBvcnRlZCYmYS5kYXRhLiQuZGF0YVRyYW5zZmVyLnR5cGVzLmNvbnRhaW5zKFwiRmlsZXNcIikmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSk7Zi5hdHRhY2hMaXN0ZW5lcihoLFwiZHJvcFwiLGZ1bmN0aW9uKGQpe2lmKCFkLmRhdGEuJC5kZWZhdWx0UHJldmVudGVkKXtkLmRhdGEucHJldmVudERlZmF1bHQoKTtcclxudmFyIGM9ZC5kYXRhLmdldFRhcmdldCgpO2lmKCFjLmlzUmVhZE9ubHkoKXx8Yy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmMuaXMoXCJodG1sXCIpKXt2YXIgYz1hLmdldFJhbmdlQXREcm9wUG9zaXRpb24oZCxiKSxmPWEuZHJhZ1JhbmdlO2MmJmUoZCxmLGMpfX19LG51bGwsbnVsbCw5OTk5KTtmLmF0dGFjaExpc3RlbmVyKGIsXCJkcm9wXCIsYS5pbml0RHJhZ0RhdGFUcmFuc2ZlcixhLG51bGwsMSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJvcFwiLGZ1bmN0aW9uKGUpe2lmKGU9ZS5kYXRhKXt2YXIgZj1lLmRyb3BSYW5nZSxnPWUuZHJhZ1JhbmdlLGg9ZS5kYXRhVHJhbnNmZXI7aC5nZXRUcmFuc2ZlclR5cGUoYik9PUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfSU5URVJOQUw/c2V0VGltZW91dChmdW5jdGlvbigpe2EuaW50ZXJuYWxEcm9wKGcsZixoLGIpfSwwKTpoLmdldFRyYW5zZmVyVHlwZShiKT09Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9DUk9TU19FRElUT1JTP2MoZyxmLGgpOlxyXG5kKGYsaCl9fSxudWxsLG51bGwsOTk5OSl9KX1DS0VESVRPUi5wbHVnaW5zLmFkZChcImNsaXBib2FyZFwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYil7dmFyIGEsYz1EKCk7Yi5jb25maWcuZm9yY2VQYXN0ZUFzUGxhaW5UZXh0P2E9XCJwbGFpbi10ZXh0XCI6Yi5jb25maWcucGFzdGVGaWx0ZXI/YT1iLmNvbmZpZy5wYXN0ZUZpbHRlcjohQ0tFRElUT1IuZW52LndlYmtpdHx8XCJwYXN0ZUZpbHRlclwiaW4gYi5jb25maWd8fChhPVwic2VtYW50aWMtY29udGVudFwiKTtiLnBhc3RlRmlsdGVyPWMuZ2V0KGEpO3koYik7RihiKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwicGFzdGVcIixDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiZGlhbG9ncy9wYXN0ZS5qc1wiKSk7Yi5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRhdGFUcmFuc2Zlcnx8KGEuZGF0YS5kYXRhVHJhbnNmZXI9bmV3IENLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmRhdGFUcmFuc2Zlcik7aWYoIWEuZGF0YS5kYXRhVmFsdWUpe3ZhciBjPVxyXG5hLmRhdGEuZGF0YVRyYW5zZmVyLGc9Yy5nZXREYXRhKFwidGV4dC9odG1sXCIpO2lmKGcpYS5kYXRhLmRhdGFWYWx1ZT1nLGEuZGF0YS50eXBlPVwiaHRtbFwiO2Vsc2UgaWYoZz1jLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpKWEuZGF0YS5kYXRhVmFsdWU9Yi5lZGl0YWJsZSgpLnRyYW5zZm9ybVBsYWluVGV4dFRvSHRtbChnKSxhLmRhdGEudHlwZT1cInRleHRcIn19LG51bGwsbnVsbCwxKTtiLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuZGF0YVZhbHVlLGM9Q0tFRElUT1IuZHRkLiRibG9jazstMTxiLmluZGV4T2YoXCJBcHBsZS1cIikmJihiPWIucmVwbGFjZSgvPHNwYW4gY2xhc3M9XCJBcHBsZS1jb252ZXJ0ZWQtc3BhY2VcIj4mbmJzcDs8XFwvc3Bhbj4vZ2ksXCIgXCIpLFwiaHRtbFwiIT1hLmRhdGEudHlwZSYmKGI9Yi5yZXBsYWNlKC88c3BhbiBjbGFzcz1cIkFwcGxlLXRhYi1zcGFuXCJbXj5dKj4oW148XSopPFxcL3NwYW4+L2dpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIucmVwbGFjZSgvXFx0L2csXHJcblwiXFx4MjZuYnNwO1xceDI2bmJzcDsgXFx4MjZuYnNwO1wiKX0pKSwtMTxiLmluZGV4T2YoJ1xceDNjYnIgY2xhc3NcXHgzZFwiQXBwbGUtaW50ZXJjaGFuZ2UtbmV3bGluZVwiXFx4M2UnKSYmKGEuZGF0YS5zdGFydHNXaXRoRU9MPTEsYS5kYXRhLnByZVNuaWZmaW5nPVwiaHRtbFwiLGI9Yi5yZXBsYWNlKC88YnIgY2xhc3M9XCJBcHBsZS1pbnRlcmNoYW5nZS1uZXdsaW5lXCI+LyxcIlwiKSksYj1iLnJlcGxhY2UoLyg8W14+XSspIGNsYXNzPVwiQXBwbGUtW15cIl0qXCIvZ2ksXCIkMVwiKSk7aWYoYi5tYXRjaCgvXjxbXjxdK2NrZV8oZWRpdGFibGV8Y29udGVudHMpL2kpKXt2YXIgZixoLGw9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiZGl2XCIpO2ZvcihsLnNldEh0bWwoYik7MT09bC5nZXRDaGlsZENvdW50KCkmJihmPWwuZ2V0Rmlyc3QoKSkmJmYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZi5oYXNDbGFzcyhcImNrZV9lZGl0YWJsZVwiKXx8Zi5oYXNDbGFzcyhcImNrZV9jb250ZW50c1wiKSk7KWw9aD1mO1xyXG5oJiYoYj1oLmdldEh0bWwoKS5yZXBsYWNlKC88YnI+JC9pLFwiXCIpKX1DS0VESVRPUi5lbnYuaWU/Yj1iLnJlcGxhY2UoL14mbmJzcDsoPzogfFxcclxcbik/PChcXHcrKS9nLGZ1bmN0aW9uKGIsZil7cmV0dXJuIGYudG9Mb3dlckNhc2UoKWluIGM/KGEuZGF0YS5wcmVTbmlmZmluZz1cImh0bWxcIixcIlxceDNjXCIrZik6Yn0pOkNLRURJVE9SLmVudi53ZWJraXQ/Yj1iLnJlcGxhY2UoLzxcXC8oXFx3Kyk+PGRpdj48YnI+PFxcL2Rpdj4kLyxmdW5jdGlvbihiLGYpe3JldHVybiBmIGluIGM/KGEuZGF0YS5lbmRzV2l0aEVPTD0xLFwiXFx4M2MvXCIrZitcIlxceDNlXCIpOmJ9KTpDS0VESVRPUi5lbnYuZ2Vja28mJihiPWIucmVwbGFjZSgvKFxccyk8YnI+JC8sXCIkMVwiKSk7YS5kYXRhLmRhdGFWYWx1ZT1ifSxudWxsLG51bGwsMyk7Yi5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7dmFyIGU9YS50eXBlLGc9YS5kYXRhVmFsdWUsZixoPWIuY29uZmlnLmNsaXBib2FyZF9kZWZhdWx0Q29udGVudFR5cGV8fFwiaHRtbFwiLFxyXG5sPWEuZGF0YVRyYW5zZmVyLmdldFRyYW5zZmVyVHlwZShiKTtmPVwiaHRtbFwiPT1lfHxcImh0bWxcIj09YS5wcmVTbmlmZmluZz9cImh0bWxcIjpBKGcpO1wiaHRtbGlmaWVkdGV4dFwiPT1mJiYoZz1CKGIuY29uZmlnLGcpKTtcInRleHRcIj09ZSYmXCJodG1sXCI9PWY/Zz14KGIsZyxjLmdldChcInBsYWluLXRleHRcIikpOmw9PUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUwmJmIucGFzdGVGaWx0ZXImJiFhLmRvbnRGaWx0ZXImJihnPXgoYixnLGIucGFzdGVGaWx0ZXIpKTthLnN0YXJ0c1dpdGhFT0wmJihnPSdcXHgzY2JyIGRhdGEtY2tlLWVvbFxceDNkXCIxXCJcXHgzZScrZyk7YS5lbmRzV2l0aEVPTCYmKGcrPSdcXHgzY2JyIGRhdGEtY2tlLWVvbFxceDNkXCIxXCJcXHgzZScpO1wiYXV0b1wiPT1lJiYoZT1cImh0bWxcIj09Znx8XCJodG1sXCI9PWg/XCJodG1sXCI6XCJ0ZXh0XCIpO2EudHlwZT1lO2EuZGF0YVZhbHVlPWc7ZGVsZXRlIGEucHJlU25pZmZpbmc7ZGVsZXRlIGEuc3RhcnRzV2l0aEVPTDtkZWxldGUgYS5lbmRzV2l0aEVPTH0sXHJcbm51bGwsbnVsbCw2KTtiLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXthPWEuZGF0YTthLmRhdGFWYWx1ZSYmKGIuaW5zZXJ0SHRtbChhLmRhdGFWYWx1ZSxhLnR5cGUsYS5yYW5nZSksc2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcImFmdGVyUGFzdGVcIil9LDApKX0sbnVsbCxudWxsLDFFMyk7Yi5vbihcInBhc3RlRGlhbG9nXCIsZnVuY3Rpb24oYSl7c2V0VGltZW91dChmdW5jdGlvbigpe2Iub3BlbkRpYWxvZyhcInBhc3RlXCIsYS5kYXRhKX0sMCl9KX19KTtDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZD17aXNDdXN0b21Db3B5Q3V0U3VwcG9ydGVkOiFDS0VESVRPUi5lbnYuaWUmJiFDS0VESVRPUi5lbnYuaU9TLGlzQ3VzdG9tRGF0YVR5cGVzU3VwcG9ydGVkOiFDS0VESVRPUi5lbnYuaWUsaXNGaWxlQXBpU3VwcG9ydGVkOiFDS0VESVRPUi5lbnYuaWV8fDk8Q0tFRElUT1IuZW52LnZlcnNpb24sbWFpblBhc3RlRXZlbnQ6Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2U/XHJcblwiYmVmb3JlcGFzdGVcIjpcInBhc3RlXCIsY2FuQ2xpcGJvYXJkQXBpQmVUcnVzdGVkOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGIuZ2V0VHJhbnNmZXJUeXBlKGEpIT1DS0VESVRPUi5EQVRBX1RSQU5TRkVSX0VYVEVSTkFMfHxDS0VESVRPUi5lbnYuY2hyb21lJiYhYi5pc0VtcHR5KCl8fENLRURJVE9SLmVudi5nZWNrbyYmKGIuZ2V0RGF0YShcInRleHQvaHRtbFwiKXx8Yi5nZXRGaWxlc0NvdW50KCkpPyEwOiExfSxnZXREcm9wVGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBhPWIuZWRpdGFibGUoKTtyZXR1cm4gQ0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9ufHxhLmlzSW5saW5lKCk/YTpiLmRvY3VtZW50fSxmaXhTcGxpdE5vZGVzQWZ0ZXJEcm9wOmZ1bmN0aW9uKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYixjLGQpe3ZhciBlPWI7ZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihlPWIuZ2V0UGFyZW50KCkpO2lmKGUuZXF1YWxzKGMpJiZkIT1jLmdldENoaWxkQ291bnQoKSlyZXR1cm4gYj1cclxuYS5zdGFydENvbnRhaW5lci5nZXRDaGlsZChhLnN0YXJ0T2Zmc2V0LTEpLGM9YS5zdGFydENvbnRhaW5lci5nZXRDaGlsZChhLnN0YXJ0T2Zmc2V0KSxiJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmYyYmYy50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihkPWIuZ2V0TGVuZ3RoKCksYi5zZXRUZXh0KGIuZ2V0VGV4dCgpK2MuZ2V0VGV4dCgpKSxjLnJlbW92ZSgpLGEuc2V0U3RhcnQoYixkKSxhLmNvbGxhcHNlKCEwKSksITB9dmFyIGc9YS5zdGFydENvbnRhaW5lcjtcIm51bWJlclwiPT10eXBlb2YgZCYmXCJudW1iZXJcIj09dHlwZW9mIGMmJmcudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZShiLnN0YXJ0Q29udGFpbmVyLGcsYyl8fGUoYi5lbmRDb250YWluZXIsZyxkKSl9LGlzRHJvcFJhbmdlQWZmZWN0ZWRCeURyYWdSYW5nZTpmdW5jdGlvbihiLGEpe3ZhciBjPWEuc3RhcnRDb250YWluZXIsZD1hLmVuZE9mZnNldDtyZXR1cm4gYi5lbmRDb250YWluZXIuZXF1YWxzKGMpJiZcclxuYi5lbmRPZmZzZXQ8PWR8fGIuc3RhcnRDb250YWluZXIuZ2V0UGFyZW50KCkuZXF1YWxzKGMpJiZiLnN0YXJ0Q29udGFpbmVyLmdldEluZGV4KCk8ZHx8Yi5lbmRDb250YWluZXIuZ2V0UGFyZW50KCkuZXF1YWxzKGMpJiZiLmVuZENvbnRhaW5lci5nZXRJbmRleCgpPGQ/ITA6ITF9LGludGVybmFsRHJvcDpmdW5jdGlvbihiLGEsYyxkKXt2YXIgZT1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZCxnPWQuZWRpdGFibGUoKSxmLGg7ZC5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2QuZmlyZShcImxvY2tTbmFwc2hvdFwiLHtkb250VXBkYXRlOjF9KTtDS0VESVRPUi5lbnYuaWUmJjEwPkNLRURJVE9SLmVudi52ZXJzaW9uJiZ0aGlzLmZpeFNwbGl0Tm9kZXNBZnRlckRyb3AoYixhLGUuZHJhZ1N0YXJ0Q29udGFpbmVyQ2hpbGRDb3VudCxlLmRyYWdFbmRDb250YWluZXJDaGlsZENvdW50KTsoaD10aGlzLmlzRHJvcFJhbmdlQWZmZWN0ZWRCeURyYWdSYW5nZShiLGEpKXx8KGY9Yi5jcmVhdGVCb29rbWFyayghMSkpO1xyXG5lPWEuY2xvbmUoKS5jcmVhdGVCb29rbWFyayghMSk7aCYmKGY9Yi5jcmVhdGVCb29rbWFyayghMSkpO2I9Zi5zdGFydE5vZGU7YT1mLmVuZE5vZGU7aD1lLnN0YXJ0Tm9kZTthJiZiLmdldFBvc2l0aW9uKGgpJkNLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORyYmYS5nZXRQb3NpdGlvbihoKSZDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkcmJmguaW5zZXJ0QmVmb3JlKGIpO2I9ZC5jcmVhdGVSYW5nZSgpO2IubW92ZVRvQm9va21hcmsoZik7Zy5leHRyYWN0SHRtbEZyb21SYW5nZShiLDEpO2E9ZC5jcmVhdGVSYW5nZSgpO2EubW92ZVRvQm9va21hcmsoZSk7cihkLHtkYXRhVHJhbnNmZXI6YyxtZXRob2Q6XCJkcm9wXCIscmFuZ2U6YX0sMSk7ZC5maXJlKFwidW5sb2NrU25hcHNob3RcIil9LGdldFJhbmdlQXREcm9wUG9zaXRpb246ZnVuY3Rpb24oYixhKXt2YXIgYz1iLmRhdGEuJCxkPWMuY2xpZW50WCxlPWMuY2xpZW50WSxnPWEuZ2V0U2VsZWN0aW9uKCEwKS5nZXRSYW5nZXMoKVswXSxmPVxyXG5hLmNyZWF0ZVJhbmdlKCk7aWYoYi5kYXRhLnRlc3RSYW5nZSlyZXR1cm4gYi5kYXRhLnRlc3RSYW5nZTtpZihkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KWM9YS5kb2N1bWVudC4kLmNhcmV0UmFuZ2VGcm9tUG9pbnQoZCxlKSxmLnNldFN0YXJ0KENLRURJVE9SLmRvbS5ub2RlKGMuc3RhcnRDb250YWluZXIpLGMuc3RhcnRPZmZzZXQpLGYuY29sbGFwc2UoITApO2Vsc2UgaWYoYy5yYW5nZVBhcmVudClmLnNldFN0YXJ0KENLRURJVE9SLmRvbS5ub2RlKGMucmFuZ2VQYXJlbnQpLGMucmFuZ2VPZmZzZXQpLGYuY29sbGFwc2UoITApO2Vsc2V7aWYoQ0tFRElUT1IuZW52LmllJiY4PENLRURJVE9SLmVudi52ZXJzaW9uJiZnJiZhLmVkaXRhYmxlKCkuaGFzRm9jdXMpcmV0dXJuIGc7aWYoZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2Upe2EuZm9jdXMoKTtjPWEuZG9jdW1lbnQuZ2V0Qm9keSgpLiQuY3JlYXRlVGV4dFJhbmdlKCk7dHJ5e2Zvcih2YXIgaD0hMSxsPTA7MjA+bCYmXHJcbiFoO2wrKyl7aWYoIWgpdHJ5e2MubW92ZVRvUG9pbnQoZCxlLWwpLGg9ITB9Y2F0Y2gocCl7fWlmKCFoKXRyeXtjLm1vdmVUb1BvaW50KGQsZStsKSxoPSEwfWNhdGNoKHEpe319aWYoaCl7dmFyIGs9XCJja2UtdGVtcC1cIisobmV3IERhdGUpLmdldFRpbWUoKTtjLnBhc3RlSFRNTCgnXFx4M2NzcGFuIGlkXFx4M2RcIicraysnXCJcXHgzZeKAi1xceDNjL3NwYW5cXHgzZScpO3ZhciB0PWEuZG9jdW1lbnQuZ2V0QnlJZChrKTtmLm1vdmVUb1Bvc2l0aW9uKHQsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTt0LnJlbW92ZSgpfWVsc2V7dmFyIHU9YS5kb2N1bWVudC4kLmVsZW1lbnRGcm9tUG9pbnQoZCxlKSxuPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudCh1KSxyO2lmKG4uZXF1YWxzKGEuZWRpdGFibGUoKSl8fFwiaHRtbFwiPT1uLmdldE5hbWUoKSlyZXR1cm4gZyYmZy5zdGFydENvbnRhaW5lciYmIWcuc3RhcnRDb250YWluZXIuZXF1YWxzKGEuZWRpdGFibGUoKSk/ZzpudWxsO3I9bi5nZXRDbGllbnRSZWN0KCk7XHJcbmQ8ci5sZWZ0P2Yuc2V0U3RhcnRBdChuLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTpmLnNldFN0YXJ0QXQobixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtmLmNvbGxhcHNlKCEwKX19Y2F0Y2godil7cmV0dXJuIG51bGx9fWVsc2UgcmV0dXJuIG51bGx9cmV0dXJuIGZ9LGluaXREcmFnRGF0YVRyYW5zZmVyOmZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5kYXRhLiQ/Yi5kYXRhLiQuZGF0YVRyYW5zZmVyOm51bGwsZD1uZXcgdGhpcy5kYXRhVHJhbnNmZXIoYyxhKTtjP3RoaXMuZHJhZ0RhdGEmJmQuaWQ9PXRoaXMuZHJhZ0RhdGEuaWQ/ZD10aGlzLmRyYWdEYXRhOnRoaXMuZHJhZ0RhdGE9ZDp0aGlzLmRyYWdEYXRhP2Q9dGhpcy5kcmFnRGF0YTp0aGlzLmRyYWdEYXRhPWQ7Yi5kYXRhLmRhdGFUcmFuc2Zlcj1kfSxyZXNldERyYWdEYXRhVHJhbnNmZXI6ZnVuY3Rpb24oKXt0aGlzLmRyYWdEYXRhPW51bGx9LGluaXRQYXN0ZURhdGFUcmFuc2ZlcjpmdW5jdGlvbihiLGEpe2lmKHRoaXMuaXNDdXN0b21Db3B5Q3V0U3VwcG9ydGVkJiZcclxuYiYmYi5kYXRhJiZiLmRhdGEuJCl7dmFyIGM9bmV3IHRoaXMuZGF0YVRyYW5zZmVyKGIuZGF0YS4kLmNsaXBib2FyZERhdGEsYSk7dGhpcy5jb3B5Q3V0RGF0YSYmYy5pZD09dGhpcy5jb3B5Q3V0RGF0YS5pZD8oYz10aGlzLmNvcHlDdXREYXRhLGMuJD1iLmRhdGEuJC5jbGlwYm9hcmREYXRhKTp0aGlzLmNvcHlDdXREYXRhPWM7cmV0dXJuIGN9cmV0dXJuIG5ldyB0aGlzLmRhdGFUcmFuc2ZlcihudWxsLGEpfSxwcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQ6ZnVuY3Rpb24oYil7YiYmYi5vbihcImRyYWdvdmVyXCIsRSl9fTt2YXIgcD1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZD9cImNrZS9pZFwiOlwiVGV4dFwiO0NLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmRhdGFUcmFuc2Zlcj1mdW5jdGlvbihiLGEpe2ImJih0aGlzLiQ9Yik7dGhpcy5fPXttZXRhUmVnRXhwOi9ePG1ldGEuKj8+L2ksYm9keVJlZ0V4cDovPGJvZHkoPzpbXFxzXFxTXSo/KT4oW1xcc1xcU10qKTxcXC9ib2R5Pi9pLFxyXG5mcmFnbWVudFJlZ0V4cDovXFx4M2MhLS0oPzpTdGFydHxFbmQpRnJhZ21lbnQtLVxceDNlL2csZGF0YTp7fSxmaWxlczpbXSxub3JtYWxpemVUeXBlOmZ1bmN0aW9uKGEpe2E9YS50b0xvd2VyQ2FzZSgpO3JldHVyblwidGV4dFwiPT1hfHxcInRleHQvcGxhaW5cIj09YT9cIlRleHRcIjpcInVybFwiPT1hP1wiVVJMXCI6YX19O3RoaXMuaWQ9dGhpcy5nZXREYXRhKHApO3RoaXMuaWR8fCh0aGlzLmlkPVwiVGV4dFwiPT1wP1wiXCI6XCJja2UtXCIrQ0tFRElUT1IudG9vbHMuZ2V0VW5pcXVlSWQoKSk7aWYoXCJUZXh0XCIhPXApdHJ5e3RoaXMuJC5zZXREYXRhKHAsdGhpcy5pZCl9Y2F0Y2goYyl7fWEmJih0aGlzLnNvdXJjZUVkaXRvcj1hLHRoaXMuc2V0RGF0YShcInRleHQvaHRtbFwiLGEuZ2V0U2VsZWN0ZWRIdG1sKDEpKSxcIlRleHRcIj09cHx8dGhpcy5nZXREYXRhKFwidGV4dC9wbGFpblwiKXx8dGhpcy5zZXREYXRhKFwidGV4dC9wbGFpblwiLGEuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRUZXh0KCkpKX07Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9JTlRFUk5BTD1cclxuMTtDS0VESVRPUi5EQVRBX1RSQU5TRkVSX0NST1NTX0VESVRPUlM9MjtDS0VESVRPUi5EQVRBX1RSQU5TRkVSX0VYVEVSTkFMPTM7Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuZGF0YVRyYW5zZmVyLnByb3RvdHlwZT17Z2V0RGF0YTpmdW5jdGlvbihiKXtiPXRoaXMuXy5ub3JtYWxpemVUeXBlKGIpO3ZhciBhPXRoaXMuXy5kYXRhW2JdO2lmKHZvaWQgMD09PWF8fG51bGw9PT1hfHxcIlwiPT09YSl0cnl7YT10aGlzLiQuZ2V0RGF0YShiKX1jYXRjaChjKXt9aWYodm9pZCAwPT09YXx8bnVsbD09PWF8fFwiXCI9PT1hKWE9XCJcIjtcInRleHQvaHRtbFwiPT1iPyhhPWEucmVwbGFjZSh0aGlzLl8ubWV0YVJlZ0V4cCxcIlwiKSwoYj10aGlzLl8uYm9keVJlZ0V4cC5leGVjKGEpKSYmYi5sZW5ndGgmJihhPWJbMV0sYT1hLnJlcGxhY2UodGhpcy5fLmZyYWdtZW50UmVnRXhwLFwiXCIpKSk6XCJUZXh0XCI9PWImJkNLRURJVE9SLmVudi5nZWNrbyYmdGhpcy5nZXRGaWxlc0NvdW50KCkmJlwiZmlsZTovL1wiPT1hLnN1YnN0cmluZygwLFxyXG43KSYmKGE9XCJcIik7cmV0dXJuIGF9LHNldERhdGE6ZnVuY3Rpb24oYixhKXtiPXRoaXMuXy5ub3JtYWxpemVUeXBlKGIpO3RoaXMuXy5kYXRhW2JdPWE7aWYoQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaXNDdXN0b21EYXRhVHlwZXNTdXBwb3J0ZWR8fFwiVVJMXCI9PWJ8fFwiVGV4dFwiPT1iKXtcIlRleHRcIj09cCYmXCJUZXh0XCI9PWImJih0aGlzLmlkPWEpO3RyeXt0aGlzLiQuc2V0RGF0YShiLGEpfWNhdGNoKGMpe319fSxnZXRUcmFuc2ZlclR5cGU6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuc291cmNlRWRpdG9yP3RoaXMuc291cmNlRWRpdG9yPT1iP0NLRURJVE9SLkRBVEFfVFJBTlNGRVJfSU5URVJOQUw6Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9DUk9TU19FRElUT1JTOkNLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUx9LGNhY2hlRGF0YTpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYil7Yj1hLl8ubm9ybWFsaXplVHlwZShiKTt2YXIgYz1hLmdldERhdGEoYik7YyYmKGEuXy5kYXRhW2JdPVxyXG5jKX1pZih0aGlzLiQpe3ZhciBhPXRoaXMsYyxkO2lmKENLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmlzQ3VzdG9tRGF0YVR5cGVzU3VwcG9ydGVkKXtpZih0aGlzLiQudHlwZXMpZm9yKGM9MDtjPHRoaXMuJC50eXBlcy5sZW5ndGg7YysrKWIodGhpcy4kLnR5cGVzW2NdKX1lbHNlIGIoXCJUZXh0XCIpLGIoXCJVUkxcIik7ZD10aGlzLl9nZXRJbWFnZUZyb21DbGlwYm9hcmQoKTtpZih0aGlzLiQmJnRoaXMuJC5maWxlc3x8ZCl7dGhpcy5fLmZpbGVzPVtdO2ZvcihjPTA7Yzx0aGlzLiQuZmlsZXMubGVuZ3RoO2MrKyl0aGlzLl8uZmlsZXMucHVzaCh0aGlzLiQuZmlsZXNbY10pOzA9PT10aGlzLl8uZmlsZXMubGVuZ3RoJiZkJiZ0aGlzLl8uZmlsZXMucHVzaChkKX19fSxnZXRGaWxlc0NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5maWxlcy5sZW5ndGg/dGhpcy5fLmZpbGVzLmxlbmd0aDp0aGlzLiQmJnRoaXMuJC5maWxlcyYmdGhpcy4kLmZpbGVzLmxlbmd0aD90aGlzLiQuZmlsZXMubGVuZ3RoOlxyXG50aGlzLl9nZXRJbWFnZUZyb21DbGlwYm9hcmQoKT8xOjB9LGdldEZpbGU6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuXy5maWxlcy5sZW5ndGg/dGhpcy5fLmZpbGVzW2JdOnRoaXMuJCYmdGhpcy4kLmZpbGVzJiZ0aGlzLiQuZmlsZXMubGVuZ3RoP3RoaXMuJC5maWxlc1tiXTowPT09Yj90aGlzLl9nZXRJbWFnZUZyb21DbGlwYm9hcmQoKTp2b2lkIDB9LGlzRW1wdHk6ZnVuY3Rpb24oKXt2YXIgYj17fSxhO2lmKHRoaXMuZ2V0RmlsZXNDb3VudCgpKXJldHVybiExO2ZvcihhIGluIHRoaXMuXy5kYXRhKWJbYV09MTtpZih0aGlzLiQpaWYoQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaXNDdXN0b21EYXRhVHlwZXNTdXBwb3J0ZWQpe2lmKHRoaXMuJC50eXBlcylmb3IodmFyIGM9MDtjPHRoaXMuJC50eXBlcy5sZW5ndGg7YysrKWJbdGhpcy4kLnR5cGVzW2NdXT0xfWVsc2UgYi5UZXh0PTEsYi5VUkw9MTtcIlRleHRcIiE9cCYmKGJbcF09MCk7Zm9yKGEgaW4gYilpZihiW2FdJiZcIlwiIT09XHJcbnRoaXMuZ2V0RGF0YShhKSlyZXR1cm4hMTtyZXR1cm4hMH0sX2dldEltYWdlRnJvbUNsaXBib2FyZDpmdW5jdGlvbigpe3ZhciBiO2lmKHRoaXMuJCYmdGhpcy4kLml0ZW1zJiZ0aGlzLiQuaXRlbXNbMF0pdHJ5e2lmKChiPXRoaXMuJC5pdGVtc1swXS5nZXRBc0ZpbGUoKSkmJmIudHlwZSlyZXR1cm4gYn1jYXRjaChhKXt9fX19KSgpOyhmdW5jdGlvbigpe3ZhciBjPSdcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9idXR0b24gY2tlX2J1dHRvbl9fe25hbWV9IGNrZV9idXR0b25fe3N0YXRlfSB7Y2xzfVwiJysoQ0tFRElUT1IuZW52LmdlY2tvJiYhQ0tFRElUT1IuZW52LmhjP1wiXCI6XCIgaHJlZlxceDNkXFxcImphdmFzY3JpcHQ6dm9pZCgne3RpdGxlSnN9JylcXFwiXCIpKycgdGl0bGVcXHgzZFwie3RpdGxlfVwiIHRhYmluZGV4XFx4M2RcIi0xXCIgaGlkZWZvY3VzXFx4M2RcInRydWVcIiByb2xlXFx4M2RcImJ1dHRvblwiIGFyaWEtbGFiZWxsZWRieVxceDNkXCJ7aWR9X2xhYmVsXCIgYXJpYS1oYXNwb3B1cFxceDNkXCJ7aGFzQXJyb3d9XCIgYXJpYS1kaXNhYmxlZFxceDNkXCJ7YXJpYURpc2FibGVkfVwiJztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihjKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7Q0tFRElUT1IuZW52LmdlY2tvJiYoYys9JyBvbmJsdXJcXHgzZFwidGhpcy5zdHlsZS5jc3NUZXh0IFxceDNkIHRoaXMuc3R5bGUuY3NzVGV4dDtcIicpO1xyXG52YXIgYz1jKygnIG9ua2V5ZG93blxceDNkXCJyZXR1cm4gQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtrZXlkb3duRm59LGV2ZW50KTtcIiBvbmZvY3VzXFx4M2RcInJldHVybiBDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2ZvY3VzRm59LGV2ZW50KTtcIiAnKyhDS0VESVRPUi5lbnYuaWU/J29uY2xpY2tcXHgzZFwicmV0dXJuIGZhbHNlO1wiIG9ubW91c2V1cCc6XCJvbmNsaWNrXCIpKydcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtjbGlja0ZufSx0aGlzKTtyZXR1cm4gZmFsc2U7XCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfYnV0dG9uX2ljb24gY2tlX2J1dHRvbl9fe2ljb25OYW1lfV9pY29uXCIgc3R5bGVcXHgzZFwie3N0eWxlfVwiJyksYz1jKydcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2VcXHgzY3NwYW4gaWRcXHgzZFwie2lkfV9sYWJlbFwiIGNsYXNzXFx4M2RcImNrZV9idXR0b25fbGFiZWwgY2tlX2J1dHRvbl9fe25hbWV9X2xhYmVsXCIgYXJpYS1oaWRkZW5cXHgzZFwiZmFsc2VcIlxceDNle2xhYmVsfVxceDNjL3NwYW5cXHgzZXthcnJvd0h0bWx9XFx4M2MvYVxceDNlJyxcclxucj1DS0VESVRPUi5hZGRUZW1wbGF0ZShcImJ1dHRvbkFycm93XCIsJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfYnV0dG9uX2Fycm93XCJcXHgzZScrKENLRURJVE9SLmVudi5oYz9cIlxceDI2Izk2NjA7XCI6XCJcIikrXCJcXHgzYy9zcGFuXFx4M2VcIiksdD1DS0VESVRPUi5hZGRUZW1wbGF0ZShcImJ1dHRvblwiLGMpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiYnV0dG9uXCIse2JlZm9yZUluaXQ6ZnVuY3Rpb24oYSl7YS51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX0JVVFRPTixDS0VESVRPUi51aS5idXR0b24uaGFuZGxlcil9fSk7Q0tFRElUT1IuVUlfQlVUVE9OPVwiYnV0dG9uXCI7Q0tFRElUT1IudWkuYnV0dG9uPWZ1bmN0aW9uKGEpe0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGEse3RpdGxlOmEubGFiZWwsY2xpY2s6YS5jbGlja3x8ZnVuY3Rpb24oYil7Yi5leGVjQ29tbWFuZChhLmNvbW1hbmQpfX0pO3RoaXMuXz17fX07Q0tFRElUT1IudWkuYnV0dG9uLmhhbmRsZXI9e2NyZWF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLmJ1dHRvbihhKX19O1xyXG5DS0VESVRPUi51aS5idXR0b24ucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7dmFyIGU9YS5tb2RlO2UmJihlPXRoaXMubW9kZXNbZV0/dm9pZCAwIT09a1tlXT9rW2VdOkNLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxlPWEucmVhZE9ubHkmJiF0aGlzLnJlYWRPbmx5P0NLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOmUsdGhpcy5zZXRTdGF0ZShlKSx0aGlzLnJlZnJlc2gmJnRoaXMucmVmcmVzaCgpKX12YXIgbD1DS0VESVRPUi5lbnYsbT10aGlzLl8uaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCksZj1cIlwiLGc9dGhpcy5jb21tYW5kLG47dGhpcy5fLmVkaXRvcj1hO3ZhciBkPXtpZDptLGJ1dHRvbjp0aGlzLGVkaXRvcjphLGZvY3VzOmZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChtKS5mb2N1cygpfSxleGVjdXRlOmZ1bmN0aW9uKCl7dGhpcy5idXR0b24uY2xpY2soYSl9LGF0dGFjaDpmdW5jdGlvbihhKXt0aGlzLmJ1dHRvbi5hdHRhY2goYSl9fSxcclxudT1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhKXtpZihkLm9ua2V5KXJldHVybiBhPW5ldyBDS0VESVRPUi5kb20uZXZlbnQoYSksITEhPT1kLm9ua2V5KGQsYS5nZXRLZXlzdHJva2UoKSl9KSx2PUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGEpe3ZhciBiO2Qub25mb2N1cyYmKGI9ITEhPT1kLm9uZm9jdXMoZCxuZXcgQ0tFRElUT1IuZG9tLmV2ZW50KGEpKSk7cmV0dXJuIGJ9KSxwPTA7ZC5jbGlja0ZuPW49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oKXtwJiYoYS51bmxvY2tTZWxlY3Rpb24oMSkscD0wKTtkLmV4ZWN1dGUoKTtsLmlPUyYmYS5mb2N1cygpfSk7aWYodGhpcy5tb2Rlcyl7dmFyIGs9e307YS5vbihcImJlZm9yZU1vZGVVbmxvYWRcIixmdW5jdGlvbigpe2EubW9kZSYmdGhpcy5fLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmKGtbYS5tb2RlXT10aGlzLl8uc3RhdGUpfSx0aGlzKTthLm9uKFwiYWN0aXZlRmlsdGVyQ2hhbmdlXCIsXHJcbmMsdGhpcyk7YS5vbihcIm1vZGVcIixjLHRoaXMpOyF0aGlzLnJlYWRPbmx5JiZhLm9uKFwicmVhZE9ubHlcIixjLHRoaXMpfWVsc2UgZyYmKGc9YS5nZXRDb21tYW5kKGcpKSYmKGcub24oXCJzdGF0ZVwiLGZ1bmN0aW9uKCl7dGhpcy5zZXRTdGF0ZShnLnN0YXRlKX0sdGhpcyksZis9Zy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04/XCJvblwiOmcuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEP1wiZGlzYWJsZWRcIjpcIm9mZlwiKTtpZih0aGlzLmRpcmVjdGlvbmFsKWEub24oXCJjb250ZW50RGlyQ2hhbmdlZFwiLGZ1bmN0aW9uKGIpe3ZhciBjPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmlkKSxkPWMuZ2V0Rmlyc3QoKTtiPWIuZGF0YTtiIT1hLmxhbmcuZGlyP2MuYWRkQ2xhc3MoXCJja2VfXCIrYik6Yy5yZW1vdmVDbGFzcyhcImNrZV9sdHJcIikucmVtb3ZlQ2xhc3MoXCJja2VfcnRsXCIpO2Quc2V0QXR0cmlidXRlKFwic3R5bGVcIixDS0VESVRPUi5za2luLmdldEljb25TdHlsZShoLFxyXG5cInJ0bFwiPT1iLHRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpKX0sdGhpcyk7Z3x8KGYrPVwib2ZmXCIpO3ZhciBxPXRoaXMubmFtZXx8dGhpcy5jb21tYW5kLGg9cTt0aGlzLmljb24mJiEvXFwuLy50ZXN0KHRoaXMuaWNvbikmJihoPXRoaXMuaWNvbix0aGlzLmljb249bnVsbCk7Zj17aWQ6bSxuYW1lOnEsaWNvbk5hbWU6aCxsYWJlbDp0aGlzLmxhYmVsLGNsczp0aGlzLmNsYXNzTmFtZXx8XCJcIixzdGF0ZTpmLGFyaWFEaXNhYmxlZDpcImRpc2FibGVkXCI9PWY/XCJ0cnVlXCI6XCJmYWxzZVwiLHRpdGxlOnRoaXMudGl0bGUsdGl0bGVKczpsLmdlY2tvJiYhbC5oYz9cIlwiOih0aGlzLnRpdGxlfHxcIlwiKS5yZXBsYWNlKFwiJ1wiLFwiXCIpLGhhc0Fycm93OnRoaXMuaGFzQXJyb3c/XCJ0cnVlXCI6XCJmYWxzZVwiLGtleWRvd25Gbjp1LGZvY3VzRm46dixjbGlja0ZuOm4sc3R5bGU6Q0tFRElUT1Iuc2tpbi5nZXRJY29uU3R5bGUoaCxcInJ0bFwiPT1hLmxhbmcuZGlyLHRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpLGFycm93SHRtbDp0aGlzLmhhc0Fycm93P1xyXG5yLm91dHB1dCgpOlwiXCJ9O3Qub3V0cHV0KGYsYik7aWYodGhpcy5vblJlbmRlcil0aGlzLm9uUmVuZGVyKCk7cmV0dXJuIGR9LHNldFN0YXRlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuXy5zdGF0ZT09YSlyZXR1cm4hMTt0aGlzLl8uc3RhdGU9YTt2YXIgYj1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHRoaXMuXy5pZCk7cmV0dXJuIGI/KGIuc2V0U3RhdGUoYSxcImNrZV9idXR0b25cIiksYT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ/Yi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsITApOmIucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKSx0aGlzLmhhc0Fycm93PyhhPWE9PUNLRURJVE9SLlRSSVNUQVRFX09OP3RoaXMuXy5lZGl0b3IubGFuZy5idXR0b24uc2VsZWN0ZWRMYWJlbC5yZXBsYWNlKC8lMS9nLHRoaXMubGFiZWwpOnRoaXMubGFiZWwsQ0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uaWQrXCJfbGFiZWxcIikuc2V0VGV4dChhKSk6YT09Q0tFRElUT1IuVFJJU1RBVEVfT04/XHJcbmIuc2V0QXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIsITApOmIucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIpLCEwKTohMX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnN0YXRlfSx0b0ZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fLmZlYXR1cmUpcmV0dXJuIHRoaXMuXy5mZWF0dXJlO3ZhciBiPXRoaXM7dGhpcy5hbGxvd2VkQ29udGVudHx8dGhpcy5yZXF1aXJlZENvbnRlbnR8fCF0aGlzLmNvbW1hbmR8fChiPWEuZ2V0Q29tbWFuZCh0aGlzLmNvbW1hbmQpfHxiKTtyZXR1cm4gdGhpcy5fLmZlYXR1cmU9Yn19O0NLRURJVE9SLnVpLnByb3RvdHlwZS5hZGRCdXR0b249ZnVuY3Rpb24oYSxiKXt0aGlzLmFkZChhLENLRURJVE9SLlVJX0JVVFRPTixiKX19KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicGFuZWxidXR0b25cIix7cmVxdWlyZXM6XCJidXR0b25cIixvbkxvYWQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGMpe3ZhciBhPXRoaXMuXzthLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmKHRoaXMuY3JlYXRlUGFuZWwoYyksYS5vbj9hLnBhbmVsLmhpZGUoKTphLnBhbmVsLnNob3dCbG9jayh0aGlzLl8uaWQsdGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuXy5pZCksNCkpfUNLRURJVE9SLnVpLnBhbmVsQnV0dG9uPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHtiYXNlOkNLRURJVE9SLnVpLmJ1dHRvbiwkOmZ1bmN0aW9uKGMpe3ZhciBhPWMucGFuZWx8fHt9O2RlbGV0ZSBjLnBhbmVsO3RoaXMuYmFzZShjKTt0aGlzLmRvY3VtZW50PWEucGFyZW50JiZhLnBhcmVudC5nZXREb2N1bWVudCgpfHxDS0VESVRPUi5kb2N1bWVudDthLmJsb2NrPXthdHRyaWJ1dGVzOmEuYXR0cmlidXRlc307dGhpcy5oYXNBcnJvdz1hLnRvb2xiYXJSZWxhdGVkPVxyXG4hMDt0aGlzLmNsaWNrPWU7dGhpcy5fPXtwYW5lbERlZmluaXRpb246YX19LHN0YXRpY3M6e2hhbmRsZXI6e2NyZWF0ZTpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLnBhbmVsQnV0dG9uKGMpfX19LHByb3RvOntjcmVhdGVQYW5lbDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLl87aWYoIWEucGFuZWwpe3ZhciBmPXRoaXMuXy5wYW5lbERlZmluaXRpb24sZT10aGlzLl8ucGFuZWxEZWZpbml0aW9uLmJsb2NrLGc9Zi5wYXJlbnR8fENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSxkPXRoaXMuXy5wYW5lbD1uZXcgQ0tFRElUT1IudWkuZmxvYXRQYW5lbChjLGcsZiksZj1kLmFkZEJsb2NrKGEuaWQsZSksYj10aGlzO2Qub25TaG93PWZ1bmN0aW9uKCl7Yi5jbGFzc05hbWUmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhiLmNsYXNzTmFtZStcIl9wYW5lbFwiKTtiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTthLm9uPTE7Yi5lZGl0b3JGb2N1cyYmYy5mb2N1cygpO2lmKGIub25PcGVuKWIub25PcGVuKCl9O1xyXG5kLm9uSGlkZT1mdW5jdGlvbihkKXtiLmNsYXNzTmFtZSYmdGhpcy5lbGVtZW50LmdldEZpcnN0KCkucmVtb3ZlQ2xhc3MoYi5jbGFzc05hbWUrXCJfcGFuZWxcIik7Yi5zZXRTdGF0ZShiLm1vZGVzJiZiLm1vZGVzW2MubW9kZV0/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTthLm9uPTA7aWYoIWQmJmIub25DbG9zZSliLm9uQ2xvc2UoKX07ZC5vbkVzY2FwZT1mdW5jdGlvbigpe2QuaGlkZSgxKTtiLmRvY3VtZW50LmdldEJ5SWQoYS5pZCkuZm9jdXMoKX07aWYodGhpcy5vbkJsb2NrKXRoaXMub25CbG9jayhkLGYpO2Yub25IaWRlPWZ1bmN0aW9uKCl7YS5vbj0wO2Iuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT0ZGKX19fX19KX0sYmVmb3JlSW5pdDpmdW5jdGlvbihlKXtlLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfUEFORUxCVVRUT04sQ0tFRElUT1IudWkucGFuZWxCdXR0b24uaGFuZGxlcil9fSk7XHJcbkNLRURJVE9SLlVJX1BBTkVMQlVUVE9OPVwicGFuZWxidXR0b25cIjsoZnVuY3Rpb24oKXtDS0VESVRPUi5wbHVnaW5zLmFkZChcInBhbmVsXCIse2JlZm9yZUluaXQ6ZnVuY3Rpb24oYSl7YS51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX1BBTkVMLENLRURJVE9SLnVpLnBhbmVsLmhhbmRsZXIpfX0pO0NLRURJVE9SLlVJX1BBTkVMPVwicGFuZWxcIjtDS0VESVRPUi51aS5wYW5lbD1mdW5jdGlvbihhLGIpe2ImJkNLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGIpO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLHtjbGFzc05hbWU6XCJcIixjc3M6W119KTt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMuZG9jdW1lbnQ9YTt0aGlzLmlzRnJhbWVkPXRoaXMuZm9yY2VJRnJhbWV8fHRoaXMuY3NzLmxlbmd0aDt0aGlzLl89e2Jsb2Nrczp7fX19O0NLRURJVE9SLnVpLnBhbmVsLmhhbmRsZXI9e2NyZWF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLnBhbmVsKGEpfX07dmFyIGY9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJwYW5lbFwiLFxyXG4nXFx4M2NkaXYgbGFuZ1xceDNkXCJ7bGFuZ0NvZGV9XCIgaWRcXHgzZFwie2lkfVwiIGRpclxceDNke2Rpcn0gY2xhc3NcXHgzZFwiY2tlIGNrZV9yZXNldF9hbGwge2VkaXRvcklkfSBja2VfcGFuZWwgY2tlX3BhbmVsIHtjbHN9IGNrZV97ZGlyfVwiIHN0eWxlXFx4M2RcInotaW5kZXg6e3otaW5kZXh9XCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNle2ZyYW1lfVxceDNjL2RpdlxceDNlJyksZz1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsLWZyYW1lXCIsJ1xceDNjaWZyYW1lIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfZnJhbWVcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGZyYW1lYm9yZGVyXFx4M2RcIjBcIiBzcmNcXHgzZFwie3NyY31cIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKSxoPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtZnJhbWUtaW5uZXJcIiwnXFx4M2MhRE9DVFlQRSBodG1sXFx4M2VcXHgzY2h0bWwgY2xhc3NcXHgzZFwiY2tlX3BhbmVsX2NvbnRhaW5lciB7ZW52fVwiIGRpclxceDNkXCJ7ZGlyfVwiIGxhbmdcXHgzZFwie2xhbmdDb2RlfVwiXFx4M2VcXHgzY2hlYWRcXHgzZXtjc3N9XFx4M2MvaGVhZFxceDNlXFx4M2Nib2R5IGNsYXNzXFx4M2RcImNrZV97ZGlyfVwiIHN0eWxlXFx4M2RcIm1hcmdpbjowO3BhZGRpbmc6MFwiIG9ubG9hZFxceDNkXCJ7b25sb2FkfVwiXFx4M2VcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2UnKTtcclxuQ0tFRElUT1IudWkucGFuZWwucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldEhvbGRlckVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uaG9sZGVyO2lmKCFhKXtpZih0aGlzLmlzRnJhbWVkKXt2YXIgYT10aGlzLmRvY3VtZW50LmdldEJ5SWQodGhpcy5pZCtcIl9mcmFtZVwiKSxiPWEuZ2V0UGFyZW50KCksYT1hLmdldEZyYW1lRG9jdW1lbnQoKTtDS0VESVRPUi5lbnYuaU9TJiZiLnNldFN0eWxlcyh7b3ZlcmZsb3c6XCJzY3JvbGxcIixcIi13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nXCI6XCJ0b3VjaFwifSk7Yj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihDS0VESVRPUi50b29scy5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5pc0xvYWRlZD0hMDtpZih0aGlzLm9uTG9hZCl0aGlzLm9uTG9hZCgpfSx0aGlzKSk7YS53cml0ZShoLm91dHB1dChDS0VESVRPUi50b29scy5leHRlbmQoe2NzczpDS0VESVRPUi50b29scy5idWlsZFN0eWxlSHRtbCh0aGlzLmNzcyksb25sb2FkOlwid2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oXCIrXHJcbmIrXCIpO1wifSxkKSkpO2EuZ2V0V2luZG93KCkuJC5DS0VESVRPUj1DS0VESVRPUjthLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5nZXRLZXlzdHJva2UoKSxjPXRoaXMuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLmlkKS5nZXRBdHRyaWJ1dGUoXCJkaXJcIik7dGhpcy5fLm9uS2V5RG93biYmITE9PT10aGlzLl8ub25LZXlEb3duKGIpP2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpOigyNz09Ynx8Yj09KFwicnRsXCI9PWM/Mzk6MzcpKSYmdGhpcy5vbkVzY2FwZSYmITE9PT10aGlzLm9uRXNjYXBlKGIpJiZhLmRhdGEucHJldmVudERlZmF1bHQoKX0sdGhpcyk7YT1hLmdldEJvZHkoKTthLnVuc2VsZWN0YWJsZSgpO0NLRURJVE9SLmVudi5haXImJkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbihiKX1lbHNlIGE9dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQpO3RoaXMuXy5ob2xkZXI9YX1yZXR1cm4gYX07dmFyIGQ9e2VkaXRvcklkOmEuaWQsaWQ6dGhpcy5pZCxsYW5nQ29kZTphLmxhbmdDb2RlLFxyXG5kaXI6YS5sYW5nLmRpcixjbHM6dGhpcy5jbGFzc05hbWUsZnJhbWU6XCJcIixlbnY6Q0tFRElUT1IuZW52LmNzc0NsYXNzLFwiei1pbmRleFwiOmEuY29uZmlnLmJhc2VGbG9hdFpJbmRleCsxfTtpZih0aGlzLmlzRnJhbWVkKXt2YXIgZT1DS0VESVRPUi5lbnYuYWlyP1wiamF2YXNjcmlwdDp2b2lkKDApXCI6Q0tFRElUT1IuZW52LmllP1wiamF2YXNjcmlwdDp2b2lkKGZ1bmN0aW9uKCl7XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KCkpXCI6XCJcIjtkLmZyYW1lPWcub3V0cHV0KHtpZDp0aGlzLmlkK1wiX2ZyYW1lXCIsc3JjOmV9KX1lPWYub3V0cHV0KGQpO2ImJmIucHVzaChlKTtyZXR1cm4gZX0sYWRkQmxvY2s6ZnVuY3Rpb24oYSxiKXtiPXRoaXMuXy5ibG9ja3NbYV09YiBpbnN0YW5jZW9mIENLRURJVE9SLnVpLnBhbmVsLmJsb2NrP2I6bmV3IENLRURJVE9SLnVpLnBhbmVsLmJsb2NrKHRoaXMuZ2V0SG9sZGVyRWxlbWVudCgpLFxyXG5iKTt0aGlzLl8uY3VycmVudEJsb2NrfHx0aGlzLnNob3dCbG9jayhhKTtyZXR1cm4gYn0sZ2V0QmxvY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuXy5ibG9ja3NbYV19LHNob3dCbG9jazpmdW5jdGlvbihhKXthPXRoaXMuXy5ibG9ja3NbYV07dmFyIGI9dGhpcy5fLmN1cnJlbnRCbG9jayxkPSF0aGlzLmZvcmNlSUZyYW1lfHxDS0VESVRPUi5lbnYuaWU/dGhpcy5fLmhvbGRlcjp0aGlzLmRvY3VtZW50LmdldEJ5SWQodGhpcy5pZCtcIl9mcmFtZVwiKTtiJiZiLmhpZGUoKTt0aGlzLl8uY3VycmVudEJsb2NrPWE7Q0tFRElUT1IuZmlyZShcImFyaWFXaWRnZXRcIixkKTthLl8uZm9jdXNJbmRleD0tMTt0aGlzLl8ub25LZXlEb3duPWEub25LZXlEb3duJiZDS0VESVRPUi50b29scy5iaW5kKGEub25LZXlEb3duLGEpO2Euc2hvdygpO3JldHVybiBhfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiZ0aGlzLmVsZW1lbnQucmVtb3ZlKCl9fTtDS0VESVRPUi51aS5wYW5lbC5ibG9jaz1cclxuQ0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmVsZW1lbnQ9YS5hcHBlbmQoYS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7YXR0cmlidXRlczp7dGFiaW5kZXg6LTEsXCJjbGFzc1wiOlwiY2tlX3BhbmVsX2Jsb2NrXCJ9LHN0eWxlczp7ZGlzcGxheTpcIm5vbmVcIn19KSk7YiYmQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYik7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZXMoe3JvbGU6dGhpcy5hdHRyaWJ1dGVzLnJvbGV8fFwicHJlc2VudGF0aW9uXCIsXCJhcmlhLWxhYmVsXCI6dGhpcy5hdHRyaWJ1dGVzW1wiYXJpYS1sYWJlbFwiXSx0aXRsZTp0aGlzLmF0dHJpYnV0ZXMudGl0bGV8fHRoaXMuYXR0cmlidXRlc1tcImFyaWEtbGFiZWxcIl19KTt0aGlzLmtleXM9e307dGhpcy5fLmZvY3VzSW5kZXg9LTE7dGhpcy5lbGVtZW50LmRpc2FibGVDb250ZXh0TWVudSgpfSxfOnttYXJrSXRlbTpmdW5jdGlvbihhKXstMSE9YSYmKGE9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLmdldEl0ZW0odGhpcy5fLmZvY3VzSW5kZXg9XHJcbmEpLENLRURJVE9SLmVudi53ZWJraXQmJmEuZ2V0RG9jdW1lbnQoKS5nZXRXaW5kb3coKS5mb2N1cygpLGEuZm9jdXMoKSx0aGlzLm9uTWFyayYmdGhpcy5vbk1hcmsoYSkpfX0scHJvdG86e3Nob3c6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIil9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9uSGlkZSYmITA9PT10aGlzLm9uSGlkZS5jYWxsKHRoaXMpfHx0aGlzLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpfSxvbktleURvd246ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmtleXNbYV07c3dpdGNoKGQpe2Nhc2UgXCJuZXh0XCI6Zm9yKHZhciBlPXRoaXMuXy5mb2N1c0luZGV4LGQ9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGM7Yz1kLmdldEl0ZW0oKytlKTspaWYoYy5nZXRBdHRyaWJ1dGUoXCJfY2tlX2ZvY3VzXCIpJiZjLiQub2Zmc2V0V2lkdGgpe3RoaXMuXy5mb2N1c0luZGV4PWU7Yy5mb2N1cygpO2JyZWFrfXJldHVybiBjfHxcclxuYj8hMToodGhpcy5fLmZvY3VzSW5kZXg9LTEsdGhpcy5vbktleURvd24oYSwxKSk7Y2FzZSBcInByZXZcIjplPXRoaXMuXy5mb2N1c0luZGV4O2ZvcihkPXRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnKFwiYVwiKTswPGUmJihjPWQuZ2V0SXRlbSgtLWUpKTspe2lmKGMuZ2V0QXR0cmlidXRlKFwiX2NrZV9mb2N1c1wiKSYmYy4kLm9mZnNldFdpZHRoKXt0aGlzLl8uZm9jdXNJbmRleD1lO2MuZm9jdXMoKTticmVha31jPW51bGx9cmV0dXJuIGN8fGI/ITE6KHRoaXMuXy5mb2N1c0luZGV4PWQuY291bnQoKSx0aGlzLm9uS2V5RG93bihhLDEpKTtjYXNlIFwiY2xpY2tcIjpjYXNlIFwibW91c2V1cFwiOnJldHVybiBlPXRoaXMuXy5mb2N1c0luZGV4LChjPTA8PWUmJnRoaXMuZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnKFwiYVwiKS5nZXRJdGVtKGUpKSYmKGMuJFtkXT9jLiRbZF0oKTpjLiRbXCJvblwiK2RdKCkpLCExfXJldHVybiEwfX19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmbG9hdHBhbmVsXCIse3JlcXVpcmVzOlwicGFuZWxcIn0pO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiB2KGEsYixjLGwsaCl7aD1DS0VESVRPUi50b29scy5nZW5LZXkoYi5nZXRVbmlxdWVJZCgpLGMuZ2V0VW5pcXVlSWQoKSxhLmxhbmcuZGlyLGEudWlDb2xvcnx8XCJcIixsLmNzc3x8XCJcIixofHxcIlwiKTt2YXIgZz1mW2hdO2d8fChnPWZbaF09bmV3IENLRURJVE9SLnVpLnBhbmVsKGIsbCksZy5lbGVtZW50PWMuYXBwZW5kKENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGcucmVuZGVyKGEpLGIpKSxnLmVsZW1lbnQuc2V0U3R5bGVzKHtkaXNwbGF5Olwibm9uZVwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIn0pKTtyZXR1cm4gZ312YXIgZj17fTtDS0VESVRPUi51aS5mbG9hdFBhbmVsPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKGEsYixjLGwpe2Z1bmN0aW9uIGgoKXtlLmhpZGUoKX1jLmZvcmNlSUZyYW1lPTE7Yy50b29sYmFyUmVsYXRlZCYmYS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSYmXHJcbihiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoXCJja2VfXCIrYS5uYW1lKSk7dmFyIGc9Yi5nZXREb2N1bWVudCgpO2w9dihhLGcsYixjLGx8fDApO3ZhciBtPWwuZWxlbWVudCxwPW0uZ2V0Rmlyc3QoKSxlPXRoaXM7bS5kaXNhYmxlQ29udGV4dE1lbnUoKTt0aGlzLmVsZW1lbnQ9bTt0aGlzLl89e2VkaXRvcjphLHBhbmVsOmwscGFyZW50RWxlbWVudDpiLGRlZmluaXRpb246Yyxkb2N1bWVudDpnLGlmcmFtZTpwLGNoaWxkcmVuOltdLGRpcjphLmxhbmcuZGlyLHNob3dCbG9ja1BhcmFtczpudWxsfTthLm9uKFwibW9kZVwiLGgpO2Eub24oXCJyZXNpemVcIixoKTtnLmdldFdpbmRvdygpLm9uKFwicmVzaXplXCIsZnVuY3Rpb24oKXt0aGlzLnJlcG9zaXRpb24oKX0sdGhpcyl9LHByb3RvOnthZGRCbG9jazpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl8ucGFuZWwuYWRkQmxvY2soYSxiKX0sYWRkTGlzdEJsb2NrOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuXy5wYW5lbC5hZGRMaXN0QmxvY2soYSxcclxuYil9LGdldEJsb2NrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl8ucGFuZWwuZ2V0QmxvY2soYSl9LHNob3dCbG9jazpmdW5jdGlvbihhLGIsYyxsLGgsZyl7dmFyIG09dGhpcy5fLnBhbmVsLHA9bS5zaG93QmxvY2soYSk7dGhpcy5fLnNob3dCbG9ja1BhcmFtcz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dGhpcy5hbGxvd0JsdXIoITEpO3ZhciBlPXRoaXMuXy5lZGl0b3IuZWRpdGFibGUoKTt0aGlzLl8ucmV0dXJuRm9jdXM9ZS5oYXNGb2N1cz9lOm5ldyBDS0VESVRPUi5kb20uZWxlbWVudChDS0VESVRPUi5kb2N1bWVudC4kLmFjdGl2ZUVsZW1lbnQpO3RoaXMuXy5oaWRlVGltZW91dD0wO3ZhciBrPXRoaXMuZWxlbWVudCxlPXRoaXMuXy5pZnJhbWUsZT1DS0VESVRPUi5lbnYuaWUmJiFDS0VESVRPUi5lbnYuZWRnZT9lOm5ldyBDS0VESVRPUi5kb20ud2luZG93KGUuJC5jb250ZW50V2luZG93KSxmPWsuZ2V0RG9jdW1lbnQoKSxyPXRoaXMuXy5wYXJlbnRFbGVtZW50LmdldFBvc2l0aW9uZWRBbmNlc3RvcigpLFxyXG50PWIuZ2V0RG9jdW1lbnRQb3NpdGlvbihmKSxmPXI/ci5nZXREb2N1bWVudFBvc2l0aW9uKGYpOnt4OjAseTowfSxxPVwicnRsXCI9PXRoaXMuXy5kaXIsZD10LngrKGx8fDApLWYueCxuPXQueSsoaHx8MCktZi55OyFxfHwxIT1jJiY0IT1jP3F8fDIhPWMmJjMhPWN8fChkKz1iLiQub2Zmc2V0V2lkdGgtMSk6ZCs9Yi4kLm9mZnNldFdpZHRoO2lmKDM9PWN8fDQ9PWMpbis9Yi4kLm9mZnNldEhlaWdodC0xO3RoaXMuXy5wYW5lbC5fLm9mZnNldFBhcmVudElkPWIuZ2V0SWQoKTtrLnNldFN0eWxlcyh7dG9wOm4rXCJweFwiLGxlZnQ6MCxkaXNwbGF5OlwiXCJ9KTtrLnNldE9wYWNpdHkoMCk7ay5nZXRGaXJzdCgpLnJlbW92ZVN0eWxlKFwid2lkdGhcIik7dGhpcy5fLmVkaXRvci5mb2N1c01hbmFnZXIuYWRkKGUpO3RoaXMuXy5ibHVyU2V0fHwoQ0tFRElUT1IuZXZlbnQudXNlQ2FwdHVyZT0hMCxlLm9uKFwiYmx1clwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIHUoKXtkZWxldGUgdGhpcy5fLnJldHVybkZvY3VzO1xyXG50aGlzLmhpZGUoKX10aGlzLmFsbG93Qmx1cigpJiZhLmRhdGEuZ2V0UGhhc2UoKT09Q0tFRElUT1IuRVZFTlRfUEhBU0VfQVRfVEFSR0VUJiZ0aGlzLnZpc2libGUmJiF0aGlzLl8uYWN0aXZlQ2hpbGQmJihDS0VESVRPUi5lbnYuaU9TP3RoaXMuXy5oaWRlVGltZW91dHx8KHRoaXMuXy5oaWRlVGltZW91dD1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KHUsMCx0aGlzKSk6dS5jYWxsKHRoaXMpKX0sdGhpcyksZS5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXt0aGlzLl8uZm9jdXNlZD0hMDt0aGlzLmhpZGVDaGlsZCgpO3RoaXMuYWxsb3dCbHVyKCEwKX0sdGhpcyksQ0tFRElUT1IuZW52LmlPUyYmKGUub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fLmhpZGVUaW1lb3V0KX0sdGhpcyksZS5vbihcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXt0aGlzLl8uaGlkZVRpbWVvdXQ9MDt0aGlzLmZvY3VzKCl9LHRoaXMpKSxDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPSExLFxyXG50aGlzLl8uYmx1clNldD0xKTttLm9uRXNjYXBlPUNLRURJVE9SLnRvb2xzLmJpbmQoZnVuY3Rpb24oYSl7aWYodGhpcy5vbkVzY2FwZSYmITE9PT10aGlzLm9uRXNjYXBlKGEpKXJldHVybiExfSx0aGlzKTtDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3ZhciBhPWs7YS5yZW1vdmVTdHlsZShcIndpZHRoXCIpO2lmKHAuYXV0b1NpemUpe3ZhciBiPXAuZWxlbWVudC5nZXREb2N1bWVudCgpLGI9KENLRURJVE9SLmVudi53ZWJraXQ/cC5lbGVtZW50OmIuZ2V0Qm9keSgpKS4kLnNjcm9sbFdpZHRoO0NLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcyYmMDxiJiYoYis9KGEuJC5vZmZzZXRXaWR0aHx8MCktKGEuJC5jbGllbnRXaWR0aHx8MCkrMyk7YS5zZXRTdHlsZShcIndpZHRoXCIsYisxMCtcInB4XCIpO2I9cC5lbGVtZW50LiQuc2Nyb2xsSGVpZ2h0O0NLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcyYmXHJcbjA8YiYmKGIrPShhLiQub2Zmc2V0SGVpZ2h0fHwwKS0oYS4kLmNsaWVudEhlaWdodHx8MCkrMyk7YS5zZXRTdHlsZShcImhlaWdodFwiLGIrXCJweFwiKTttLl8uY3VycmVudEJsb2NrLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpLnJlbW92ZVN0eWxlKFwiZGlzcGxheVwiKX1lbHNlIGEucmVtb3ZlU3R5bGUoXCJoZWlnaHRcIik7cSYmKGQtPWsuJC5vZmZzZXRXaWR0aCk7ay5zZXRTdHlsZShcImxlZnRcIixkK1wicHhcIik7dmFyIGI9bS5lbGVtZW50LmdldFdpbmRvdygpLGE9ay4kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Yi5nZXRWaWV3UGFuZVNpemUoKSxjPWEud2lkdGh8fGEucmlnaHQtYS5sZWZ0LGU9YS5oZWlnaHR8fGEuYm90dG9tLWEudG9wLGw9cT9hLnJpZ2h0OmIud2lkdGgtYS5sZWZ0LGg9cT9iLndpZHRoLWEucmlnaHQ6YS5sZWZ0O3E/bDxjJiYoZD1oPmM/ZCtjOmIud2lkdGg+Yz9kLWEubGVmdDpkLWEucmlnaHQrYi53aWR0aCk6bDxjJiYoZD1oPmM/ZC1jOmIud2lkdGg+XHJcbmM/ZC1hLnJpZ2h0K2Iud2lkdGg6ZC1hLmxlZnQpO2M9YS50b3A7Yi5oZWlnaHQtYS50b3A8ZSYmKG49Yz5lP24tZTpiLmhlaWdodD5lP24tYS5ib3R0b20rYi5oZWlnaHQ6bi1hLnRvcCk7Q0tFRElUT1IuZW52LmllJiYoYj1hPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChrLiQub2Zmc2V0UGFyZW50KSxcImh0bWxcIj09Yi5nZXROYW1lKCkmJihiPWIuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCkpLFwicnRsXCI9PWIuZ2V0Q29tcHV0ZWRTdHlsZShcImRpcmVjdGlvblwiKSYmKGQ9Q0tFRElUT1IuZW52LmllOENvbXBhdD9kLTIqay5nZXREb2N1bWVudCgpLmdldERvY3VtZW50RWxlbWVudCgpLiQuc2Nyb2xsTGVmdDpkLShhLiQuc2Nyb2xsV2lkdGgtYS4kLmNsaWVudFdpZHRoKSkpO3ZhciBhPWsuZ2V0Rmlyc3QoKSxmOyhmPWEuZ2V0Q3VzdG9tRGF0YShcImFjdGl2ZVBhbmVsXCIpKSYmZi5vbkhpZGUmJmYub25IaWRlLmNhbGwodGhpcywxKTthLnNldEN1c3RvbURhdGEoXCJhY3RpdmVQYW5lbFwiLHRoaXMpO1xyXG5rLnNldFN0eWxlcyh7dG9wOm4rXCJweFwiLGxlZnQ6ZCtcInB4XCJ9KTtrLnNldE9wYWNpdHkoMSk7ZyYmZygpfSx0aGlzKTttLmlzTG9hZGVkP2EoKTptLm9uTG9hZD1hO0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT1DS0VESVRPUi5lbnYud2Via2l0JiZDS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRTY3JvbGxQb3NpdGlvbigpLnk7dGhpcy5mb2N1cygpO3AuZWxlbWVudC5mb2N1cygpO0NLRURJVE9SLmVudi53ZWJraXQmJihDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkuJC5zY3JvbGxUb3A9YSk7dGhpcy5hbGxvd0JsdXIoITApO3RoaXMuXy5lZGl0b3IuZmlyZShcInBhbmVsU2hvd1wiLHRoaXMpfSwwLHRoaXMpfSxDS0VESVRPUi5lbnYuYWlyPzIwMDowLHRoaXMpO3RoaXMudmlzaWJsZT0xO3RoaXMub25TaG93JiZ0aGlzLm9uU2hvdy5jYWxsKHRoaXMpfSxyZXBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLnNob3dCbG9ja1BhcmFtcztcclxudGhpcy52aXNpYmxlJiZ0aGlzLl8uc2hvd0Jsb2NrUGFyYW1zJiYodGhpcy5oaWRlKCksdGhpcy5zaG93QmxvY2suYXBwbHkodGhpcyxhKSl9LGZvY3VzOmZ1bmN0aW9uKCl7aWYoQ0tFRElUT1IuZW52LndlYmtpdCl7dmFyIGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QWN0aXZlKCk7YSYmIWEuZXF1YWxzKHRoaXMuXy5pZnJhbWUpJiZhLiQuYmx1cigpfSh0aGlzLl8ubGFzdEZvY3VzZWR8fHRoaXMuXy5pZnJhbWUuZ2V0RnJhbWVEb2N1bWVudCgpLmdldFdpbmRvdygpKS5mb2N1cygpfSxibHVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmlmcmFtZS5nZXRGcmFtZURvY3VtZW50KCkuZ2V0QWN0aXZlKCk7YSYmYS5pcyhcImFcIikmJih0aGlzLl8ubGFzdEZvY3VzZWQ9YSl9LGhpZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy52aXNpYmxlJiYoIXRoaXMub25IaWRlfHwhMCE9PXRoaXMub25IaWRlLmNhbGwodGhpcykpKXt0aGlzLmhpZGVDaGlsZCgpO0NLRURJVE9SLmVudi5nZWNrbyYmdGhpcy5fLmlmcmFtZS5nZXRGcmFtZURvY3VtZW50KCkuJC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcclxudGhpcy5lbGVtZW50LnNldFN0eWxlKFwiZGlzcGxheVwiLFwibm9uZVwiKTt0aGlzLnZpc2libGU9MDt0aGlzLmVsZW1lbnQuZ2V0Rmlyc3QoKS5yZW1vdmVDdXN0b21EYXRhKFwiYWN0aXZlUGFuZWxcIik7aWYoYT1hJiZ0aGlzLl8ucmV0dXJuRm9jdXMpQ0tFRElUT1IuZW52LndlYmtpdCYmYS50eXBlJiZhLmdldFdpbmRvdygpLiQuZm9jdXMoKSxhLmZvY3VzKCk7ZGVsZXRlIHRoaXMuXy5sYXN0Rm9jdXNlZDt0aGlzLl8uc2hvd0Jsb2NrUGFyYW1zPW51bGw7dGhpcy5fLmVkaXRvci5maXJlKFwicGFuZWxIaWRlXCIsdGhpcyl9fSxhbGxvd0JsdXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLnBhbmVsO3ZvaWQgMCE9PWEmJihiLmFsbG93Qmx1cj1hKTtyZXR1cm4gYi5hbGxvd0JsdXJ9LHNob3dBc0NoaWxkOmZ1bmN0aW9uKGEsYixjLGYsaCxnKXtpZih0aGlzLl8uYWN0aXZlQ2hpbGQhPWF8fGEuXy5wYW5lbC5fLm9mZnNldFBhcmVudElkIT1jLmdldElkKCkpdGhpcy5oaWRlQ2hpbGQoKSxhLm9uSGlkZT1cclxuQ0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLl8uZm9jdXNlZHx8dGhpcy5oaWRlKCl9LDAsdGhpcyl9LHRoaXMpLHRoaXMuXy5hY3RpdmVDaGlsZD1hLHRoaXMuXy5mb2N1c2VkPSExLGEuc2hvd0Jsb2NrKGIsYyxmLGgsZyksdGhpcy5ibHVyKCksKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5pZTZDb21wYXQpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5lbGVtZW50LmdldENoaWxkKDApLiQuc3R5bGUuY3NzVGV4dCs9XCJcIn0sMTAwKX0saGlkZUNoaWxkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy5hY3RpdmVDaGlsZDtiJiYoZGVsZXRlIGIub25IaWRlLGRlbGV0ZSB0aGlzLl8uYWN0aXZlQ2hpbGQsYi5oaWRlKCksYSYmdGhpcy5mb2N1cygpKX19fSk7Q0tFRElUT1Iub24oXCJpbnN0YW5jZURlc3Ryb3llZFwiLGZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IudG9vbHMuaXNFbXB0eShDS0VESVRPUi5pbnN0YW5jZXMpLFxyXG5iO2ZvcihiIGluIGYpe3ZhciBjPWZbYl07YT9jLmRlc3Ryb3koKTpjLmVsZW1lbnQuaGlkZSgpfWEmJihmPXt9KX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImNvbG9yYnV0dG9uXCIse3JlcXVpcmVzOlwicGFuZWxidXR0b24sZmxvYXRwYW5lbFwiLGluaXQ6ZnVuY3Rpb24oYyl7ZnVuY3Rpb24gcihwLGcsZSxoKXt2YXIgaz1uZXcgQ0tFRElUT1Iuc3R5bGUobFtcImNvbG9yQnV0dG9uX1wiK2crXCJTdHlsZVwiXSksbT1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9jb2xvckJveFwiO2MudWkuYWRkKHAsQ0tFRElUT1IuVUlfUEFORUxCVVRUT04se2xhYmVsOmUsdGl0bGU6ZSxtb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czowLHRvb2xiYXI6XCJjb2xvcnMsXCIraCxhbGxvd2VkQ29udGVudDprLHJlcXVpcmVkQ29udGVudDprLHBhbmVsOntjc3M6Q0tFRElUT1Iuc2tpbi5nZXRQYXRoKFwiZWRpdG9yXCIpLGF0dHJpYnV0ZXM6e3JvbGU6XCJsaXN0Ym94XCIsXCJhcmlhLWxhYmVsXCI6Zi5wYW5lbFRpdGxlfX0sb25CbG9jazpmdW5jdGlvbihhLGIpe2IuYXV0b1NpemU9ITA7Yi5lbGVtZW50LmFkZENsYXNzKFwiY2tlX2NvbG9yYmxvY2tcIik7XHJcbmIuZWxlbWVudC5zZXRIdG1sKHUoYSxnLG0pKTtiLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCkuc2V0U3R5bGUoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpO0NLRURJVE9SLnVpLmZpcmUoXCJyZWFkeVwiLHRoaXMpO3ZhciBkPWIua2V5cyxlPVwicnRsXCI9PWMubGFuZy5kaXI7ZFtlPzM3OjM5XT1cIm5leHRcIjtkWzQwXT1cIm5leHRcIjtkWzldPVwibmV4dFwiO2RbZT8zOTozN109XCJwcmV2XCI7ZFszOF09XCJwcmV2XCI7ZFtDS0VESVRPUi5TSElGVCs5XT1cInByZXZcIjtkWzMyXT1cImNsaWNrXCJ9LHJlZnJlc2g6ZnVuY3Rpb24oKXtjLmFjdGl2ZUZpbHRlci5jaGVjayhrKXx8dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9LG9uT3BlbjpmdW5jdGlvbigpe3ZhciBhPWMuZ2V0U2VsZWN0aW9uKCksYT1hJiZhLmdldFN0YXJ0RWxlbWVudCgpLGE9Yy5lbGVtZW50UGF0aChhKSxiO2lmKGEpe2E9YS5ibG9ja3x8YS5ibG9ja0xpbWl0fHxjLmRvY3VtZW50LmdldEJvZHkoKTtkbyBiPVxyXG5hJiZhLmdldENvbXB1dGVkU3R5bGUoXCJiYWNrXCI9PWc/XCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCJjb2xvclwiKXx8XCJ0cmFuc3BhcmVudFwiO3doaWxlKFwiYmFja1wiPT1nJiZcInRyYW5zcGFyZW50XCI9PWImJmEmJihhPWEuZ2V0UGFyZW50KCkpKTtiJiZcInRyYW5zcGFyZW50XCIhPWJ8fChiPVwiI2ZmZmZmZlwiKTt0aGlzLl8ucGFuZWwuXy5pZnJhbWUuZ2V0RnJhbWVEb2N1bWVudCgpLmdldEJ5SWQobSkuc2V0U3R5bGUoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsYik7cmV0dXJuIGJ9fX0pfWZ1bmN0aW9uIHUocCxnLGUpe3ZhciBoPVtdLGs9bC5jb2xvckJ1dHRvbl9jb2xvcnMuc3BsaXQoXCIsXCIpLG09Yy5wbHVnaW5zLmNvbG9yZGlhbG9nJiYhMSE9PWwuY29sb3JCdXR0b25fZW5hYmxlTW9yZSxhPWsubGVuZ3RoKyhtPzI6MSksYj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSl7dGhpcy5yZW1vdmVMaXN0ZW5lcihcIm9rXCIsZCk7dGhpcy5yZW1vdmVMaXN0ZW5lcihcImNhbmNlbFwiLFxyXG5kKTtcIm9rXCI9PWEubmFtZSYmZSh0aGlzLmdldENvbnRlbnRFbGVtZW50KFwicGlja2VyXCIsXCJzZWxlY3RlZENvbG9yXCIpLmdldFZhbHVlKCksYil9dmFyIGU9YXJndW1lbnRzLmNhbGxlZTtpZihcIj9cIj09YSljLm9wZW5EaWFsb2coXCJjb2xvcmRpYWxvZ1wiLGZ1bmN0aW9uKCl7dGhpcy5vbihcIm9rXCIsZCk7dGhpcy5vbihcImNhbmNlbFwiLGQpfSk7ZWxzZXtjLmZvY3VzKCk7cC5oaWRlKCk7Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2MucmVtb3ZlU3R5bGUobmV3IENLRURJVE9SLnN0eWxlKGxbXCJjb2xvckJ1dHRvbl9cIitiK1wiU3R5bGVcIl0se2NvbG9yOlwiaW5oZXJpdFwifSkpO2lmKGEpe3ZhciBmPWxbXCJjb2xvckJ1dHRvbl9cIitiK1wiU3R5bGVcIl07Zi5jaGlsZFJ1bGU9XCJiYWNrXCI9PWI/ZnVuY3Rpb24oYSl7cmV0dXJuIHQoYSl9OmZ1bmN0aW9uKGEpe3JldHVybiEoYS5pcyhcImFcIil8fGEuZ2V0RWxlbWVudHNCeVRhZyhcImFcIikuY291bnQoKSl8fHQoYSl9O2MuYXBwbHlTdHlsZShuZXcgQ0tFRElUT1Iuc3R5bGUoZixcclxue2NvbG9yOmF9KSl9Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpfX0pO2gucHVzaCgnXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb2xvcmF1dG9cIiBfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkdHJ1ZSB0aXRsZVxceDNkXCInLGYuYXV0bywnXCIgb25jbGlja1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJyxiLFwiLG51bGwsJ1wiLGcsXCInKTtyZXR1cm4gZmFsc2U7XFxcIiBocmVmXFx4M2RcXFwiamF2YXNjcmlwdDp2b2lkKCdcIixmLmF1dG8sJ1xcJylcIiByb2xlXFx4M2RcIm9wdGlvblwiIGFyaWEtcG9zaW5zZXRcXHgzZFwiMVwiIGFyaWEtc2V0c2l6ZVxceDNkXCInLGEsJ1wiXFx4M2VcXHgzY3RhYmxlIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgY2VsbHNwYWNpbmdcXHgzZDAgY2VsbHBhZGRpbmdcXHgzZDAgd2lkdGhcXHgzZFwiMTAwJVwiXFx4M2VcXHgzY3RyXFx4M2VcXHgzY3RkXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2NvbG9yYm94XCIgaWRcXHgzZFwiJyxlLCdcIlxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2MvdGRcXHgzZVxceDNjdGQgY29sc3BhblxceDNkNyBhbGlnblxceDNkY2VudGVyXFx4M2UnLFxyXG5mLmF1dG8sJ1xceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXFx4M2MvdGFibGVcXHgzZVxceDNjL2FcXHgzZVxceDNjdGFibGUgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBjZWxsc3BhY2luZ1xceDNkMCBjZWxscGFkZGluZ1xceDNkMCB3aWR0aFxceDNkXCIxMDAlXCJcXHgzZScpO2ZvcihlPTA7ZTxrLmxlbmd0aDtlKyspezA9PT1lJTgmJmgucHVzaChcIlxceDNjL3RyXFx4M2VcXHgzY3RyXFx4M2VcIik7dmFyIGQ9a1tlXS5zcGxpdChcIi9cIiksbj1kWzBdLHE9ZFsxXXx8bjtkWzFdfHwobj1cIiNcIituLnJlcGxhY2UoL14oLikoLikoLikkLyxcIiQxJDEkMiQyJDMkM1wiKSk7ZD1jLmxhbmcuY29sb3JidXR0b24uY29sb3JzW3FdfHxxO2gucHVzaCgnXFx4M2N0ZFxceDNlXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb2xvcmJveFwiIF9ja2VfZm9jdXNcXHgzZDEgaGlkZWZvY3VzXFx4M2R0cnVlIHRpdGxlXFx4M2RcIicsZCwnXCIgb25jbGlja1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJyxiLFwiLCdcIixuLFwiJywnXCIsZyxcIicpOyByZXR1cm4gZmFsc2U7XFxcIiBocmVmXFx4M2RcXFwiamF2YXNjcmlwdDp2b2lkKCdcIixcclxuZCwnXFwnKVwiIHJvbGVcXHgzZFwib3B0aW9uXCIgYXJpYS1wb3NpbnNldFxceDNkXCInLGUrMiwnXCIgYXJpYS1zZXRzaXplXFx4M2RcIicsYSwnXCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfY29sb3Jib3hcIiBzdHlsZVxceDNkXCJiYWNrZ3JvdW5kLWNvbG9yOiMnLHEsJ1wiXFx4M2VcXHgzYy9zcGFuXFx4M2VcXHgzYy9hXFx4M2VcXHgzYy90ZFxceDNlJyl9bSYmaC5wdXNoKCdcXHgzYy90clxceDNlXFx4M2N0clxceDNlXFx4M2N0ZCBjb2xzcGFuXFx4M2Q4IGFsaWduXFx4M2RjZW50ZXJcXHgzZVxceDNjYSBjbGFzc1xceDNkXCJja2VfY29sb3Jtb3JlXCIgX2NrZV9mb2N1c1xceDNkMSBoaWRlZm9jdXNcXHgzZHRydWUgdGl0bGVcXHgzZFwiJyxmLm1vcmUsJ1wiIG9uY2xpY2tcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKCcsYixcIiwnPycsJ1wiLGcsXCInKTtyZXR1cm4gZmFsc2U7XFxcIiBocmVmXFx4M2RcXFwiamF2YXNjcmlwdDp2b2lkKCdcIixmLm1vcmUsXCInKVxcXCJcIiwnIHJvbGVcXHgzZFwib3B0aW9uXCIgYXJpYS1wb3NpbnNldFxceDNkXCInLFxyXG5hLCdcIiBhcmlhLXNldHNpemVcXHgzZFwiJyxhLCdcIlxceDNlJyxmLm1vcmUsXCJcXHgzYy9hXFx4M2VcXHgzYy90ZFxceDNlXCIpO2gucHVzaChcIlxceDNjL3RyXFx4M2VcXHgzYy90YWJsZVxceDNlXCIpO3JldHVybiBoLmpvaW4oXCJcIil9ZnVuY3Rpb24gdChjKXtyZXR1cm5cImZhbHNlXCI9PWMuZ2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIpfHxjLmdldEF0dHJpYnV0ZShcImRhdGEtbm9zdHlsZVwiKX12YXIgbD1jLmNvbmZpZyxmPWMubGFuZy5jb2xvcmJ1dHRvbjtDS0VESVRPUi5lbnYuaGN8fChyKFwiVGV4dENvbG9yXCIsXCJmb3JlXCIsZi50ZXh0Q29sb3JUaXRsZSwxMCkscihcIkJHQ29sb3JcIixcImJhY2tcIixmLmJnQ29sb3JUaXRsZSwyMCkpfX0pO0NLRURJVE9SLmNvbmZpZy5jb2xvckJ1dHRvbl9jb2xvcnM9XCIwMDAsODAwMDAwLDhCNDUxMywyRjRGNEYsMDA4MDgwLDAwMDA4MCw0QjAwODIsNjk2OTY5LEIyMjIyMixBNTJBMkEsREFBNTIwLDAwNjQwMCw0MEUwRDAsMDAwMENELDgwMDA4MCw4MDgwODAsRjAwLEZGOEMwMCxGRkQ3MDAsMDA4MDAwLDBGRiwwMEYsRUU4MkVFLEE5QTlBOSxGRkEwN0EsRkZBNTAwLEZGRkYwMCwwMEZGMDAsQUZFRUVFLEFERDhFNixEREEwREQsRDNEM0QzLEZGRjBGNSxGQUVCRDcsRkZGRkUwLEYwRkZGMCxGMEZGRkYsRjBGOEZGLEU2RTZGQSxGRkZcIjtcclxuQ0tFRElUT1IuY29uZmlnLmNvbG9yQnV0dG9uX2ZvcmVTdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e2NvbG9yOlwiIyhjb2xvcilcIn0sb3ZlcnJpZGVzOlt7ZWxlbWVudDpcImZvbnRcIixhdHRyaWJ1dGVzOntjb2xvcjpudWxsfX1dfTtDS0VESVRPUi5jb25maWcuY29sb3JCdXR0b25fYmFja1N0eWxlPXtlbGVtZW50Olwic3BhblwiLHN0eWxlczp7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCIjKGNvbG9yKVwifX07Q0tFRElUT1IucGx1Z2lucy5jb2xvcmRpYWxvZz17cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPW5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiY29sb3JkaWFsb2dcIik7Yy5lZGl0b3JGb2N1cz0hMTtiLmFkZENvbW1hbmQoXCJjb2xvcmRpYWxvZ1wiLGMpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJjb2xvcmRpYWxvZ1wiLHRoaXMucGF0aCtcImRpYWxvZ3MvY29sb3JkaWFsb2cuanNcIik7Yi5nZXRDb2xvckZyb21EaWFsb2c9ZnVuY3Rpb24oYyxmKXt2YXIgZD1mdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyKFwib2tcIixkKTt0aGlzLnJlbW92ZUxpc3RlbmVyKFwiY2FuY2VsXCIsZCk7YT1cIm9rXCI9PWEubmFtZT90aGlzLmdldFZhbHVlT2YoXCJwaWNrZXJcIixcInNlbGVjdGVkQ29sb3JcIik6bnVsbDtjLmNhbGwoZixhKX0sZT1mdW5jdGlvbihhKXthLm9uKFwib2tcIixkKTthLm9uKFwiY2FuY2VsXCIsZCl9O2IuZXhlY0NvbW1hbmQoXCJjb2xvcmRpYWxvZ1wiKTtpZihiLl8uc3RvcmVkRGlhbG9ncyYmXHJcbmIuXy5zdG9yZWREaWFsb2dzLmNvbG9yZGlhbG9nKWUoYi5fLnN0b3JlZERpYWxvZ3MuY29sb3JkaWFsb2cpO2Vsc2UgQ0tFRElUT1Iub24oXCJkaWFsb2dEZWZpbml0aW9uXCIsZnVuY3Rpb24oYSl7aWYoXCJjb2xvcmRpYWxvZ1wiPT1hLmRhdGEubmFtZSl7dmFyIGI9YS5kYXRhLmRlZmluaXRpb247YS5yZW1vdmVMaXN0ZW5lcigpO2Iub25Mb2FkPUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGIub25Mb2FkLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2UodGhpcyk7Yi5vbkxvYWQ9YTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLmNhbGwodGhpcyl9fSl9fSl9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJjb2xvcmRpYWxvZ1wiLENLRURJVE9SLnBsdWdpbnMuY29sb3JkaWFsb2cpOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwidGVtcGxhdGVzXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXtDS0VESVRPUi5kaWFsb2cuYWRkKFwidGVtcGxhdGVzXCIsQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImRpYWxvZ3MvdGVtcGxhdGVzLmpzXCIpKTthLmFkZENvbW1hbmQoXCJ0ZW1wbGF0ZXNcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcInRlbXBsYXRlc1wiKSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiVGVtcGxhdGVzXCIse2xhYmVsOmEubGFuZy50ZW1wbGF0ZXMuYnV0dG9uLGNvbW1hbmQ6XCJ0ZW1wbGF0ZXNcIix0b29sYmFyOlwiZG9jdG9vbHMsMTBcIn0pfX0pO3ZhciBjPXt9LGY9e307Q0tFRElUT1IuYWRkVGVtcGxhdGVzPWZ1bmN0aW9uKGEsZCl7Y1thXT1kfTtDS0VESVRPUi5nZXRUZW1wbGF0ZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19O0NLRURJVE9SLmxvYWRUZW1wbGF0ZXM9ZnVuY3Rpb24oYSxkKXtmb3IodmFyIGU9XHJcbltdLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspZlthW2JdXXx8KGUucHVzaChhW2JdKSxmW2FbYl1dPTEpO2UubGVuZ3RoP0NLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKGUsZCk6c2V0VGltZW91dChkLDApfX0pKCk7Q0tFRElUT1IuY29uZmlnLnRlbXBsYXRlc19maWxlcz1bQ0tFRElUT1IuZ2V0VXJsKFwicGx1Z2lucy90ZW1wbGF0ZXMvdGVtcGxhdGVzL2RlZmF1bHQuanNcIildO0NLRURJVE9SLmNvbmZpZy50ZW1wbGF0ZXNfcmVwbGFjZUNvbnRlbnQ9ITA7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJtZW51XCIse3JlcXVpcmVzOlwiZmxvYXRwYW5lbFwiLGJlZm9yZUluaXQ6ZnVuY3Rpb24oZyl7Zm9yKHZhciBoPWcuY29uZmlnLm1lbnVfZ3JvdXBzLnNwbGl0KFwiLFwiKSxwPWcuXy5tZW51R3JvdXBzPXt9LG49Zy5fLm1lbnVJdGVtcz17fSxhPTA7YTxoLmxlbmd0aDthKyspcFtoW2FdXT1hKzE7Zy5hZGRNZW51R3JvdXA9ZnVuY3Rpb24oYixhKXtwW2JdPWF8fDEwMH07Zy5hZGRNZW51SXRlbT1mdW5jdGlvbihhLGMpe3BbYy5ncm91cF0mJihuW2FdPW5ldyBDS0VESVRPUi5tZW51SXRlbSh0aGlzLGEsYykpfTtnLmFkZE1lbnVJdGVtcz1mdW5jdGlvbihhKXtmb3IodmFyIGMgaW4gYSl0aGlzLmFkZE1lbnVJdGVtKGMsYVtjXSl9O2cuZ2V0TWVudUl0ZW09ZnVuY3Rpb24oYSl7cmV0dXJuIG5bYV19O2cucmVtb3ZlTWVudUl0ZW09ZnVuY3Rpb24oYSl7ZGVsZXRlIG5bYV19fX0pO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBnKGEpe2Euc29ydChmdW5jdGlvbihhLGMpe3JldHVybiBhLmdyb3VwPGMuZ3JvdXA/LTE6YS5ncm91cD5jLmdyb3VwPzE6YS5vcmRlcjxjLm9yZGVyPy0xOmEub3JkZXI+Yy5vcmRlcj8xOjB9KX12YXIgaD0nXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9tZW51aXRlbVwiXFx4M2VcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9tZW51YnV0dG9uIGNrZV9tZW51YnV0dG9uX197bmFtZX0gY2tlX21lbnVidXR0b25fe3N0YXRlfSB7Y2xzfVwiIGhyZWZcXHgzZFwie2hyZWZ9XCIgdGl0bGVcXHgzZFwie3RpdGxlfVwiIHRhYmluZGV4XFx4M2RcIi0xXCJfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkXCJ0cnVlXCIgcm9sZVxceDNkXCJ7cm9sZX1cIiBhcmlhLWhhc3BvcHVwXFx4M2RcIntoYXNQb3B1cH1cIiBhcmlhLWRpc2FibGVkXFx4M2RcIntkaXNhYmxlZH1cIiB7YXJpYUNoZWNrZWR9JztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihoKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7XHJcbkNLRURJVE9SLmVudi5nZWNrbyYmKGgrPScgb25ibHVyXFx4M2RcInRoaXMuc3R5bGUuY3NzVGV4dCBcXHgzZCB0aGlzLnN0eWxlLmNzc1RleHQ7XCInKTt2YXIgaD1oKygnIG9ubW91c2VvdmVyXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7aG92ZXJGbn0se2luZGV4fSk7XCIgb25tb3VzZW91dFxceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe21vdmVPdXRGbn0se2luZGV4fSk7XCIgJysoQ0tFRElUT1IuZW52LmllPydvbmNsaWNrXFx4M2RcInJldHVybiBmYWxzZTtcIiBvbm1vdXNldXAnOlwib25jbGlja1wiKSsnXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0se2luZGV4fSk7IHJldHVybiBmYWxzZTtcIlxceDNlJykscD1DS0VESVRPUi5hZGRUZW1wbGF0ZShcIm1lbnVJdGVtXCIsaCsnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9tZW51YnV0dG9uX2lubmVyXCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbWVudWJ1dHRvbl9pY29uXCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfYnV0dG9uX2ljb24gY2tlX2J1dHRvbl9fe2ljb25OYW1lfV9pY29uXCIgc3R5bGVcXHgzZFwie2ljb25TdHlsZX1cIlxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9tZW51YnV0dG9uX2xhYmVsXCJcXHgzZXtsYWJlbH1cXHgzYy9zcGFuXFx4M2V7YXJyb3dIdG1sfVxceDNjL3NwYW5cXHgzZVxceDNjL2FcXHgzZVxceDNjL3NwYW5cXHgzZScpLFxyXG5uPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwibWVudUFycm93XCIsJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbWVudWFycm93XCJcXHgzZVxceDNjc3BhblxceDNle2xhYmVsfVxceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZScpO0NLRURJVE9SLm1lbnU9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSxiKXtiPXRoaXMuXy5kZWZpbml0aW9uPWJ8fHt9O3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCk7dGhpcy5lZGl0b3I9YTt0aGlzLml0ZW1zPVtdO3RoaXMuXy5saXN0ZW5lcnM9W107dGhpcy5fLmxldmVsPWIubGV2ZWx8fDE7dmFyIGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGIucGFuZWwse2NzczpbQ0tFRElUT1Iuc2tpbi5nZXRQYXRoKFwiZWRpdG9yXCIpXSxsZXZlbDp0aGlzLl8ubGV2ZWwtMSxibG9jazp7fX0pLG09Yy5ibG9jay5hdHRyaWJ1dGVzPWMuYXR0cmlidXRlc3x8e307IW0ucm9sZSYmKG0ucm9sZT1cIm1lbnVcIik7dGhpcy5fLnBhbmVsRGVmaW5pdGlvbj1cclxuY30sXzp7b25TaG93OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCksYj1hJiZhLmdldFN0YXJ0RWxlbWVudCgpLGM9dGhpcy5lZGl0b3IuZWxlbWVudFBhdGgoKSxtPXRoaXMuXy5saXN0ZW5lcnM7dGhpcy5yZW1vdmVBbGwoKTtmb3IodmFyIGU9MDtlPG0ubGVuZ3RoO2UrKyl7dmFyIGw9bVtlXShiLGEsYyk7aWYobClmb3IodmFyIGsgaW4gbCl7dmFyIGY9dGhpcy5lZGl0b3IuZ2V0TWVudUl0ZW0oayk7IWZ8fGYuY29tbWFuZCYmIXRoaXMuZWRpdG9yLmdldENvbW1hbmQoZi5jb21tYW5kKS5zdGF0ZXx8KGYuc3RhdGU9bFtrXSx0aGlzLmFkZChmKSl9fX0sb25DbGljazpmdW5jdGlvbihhKXt0aGlzLmhpZGUoKTtpZihhLm9uQ2xpY2spYS5vbkNsaWNrKCk7ZWxzZSBhLmNvbW1hbmQmJnRoaXMuZWRpdG9yLmV4ZWNDb21tYW5kKGEuY29tbWFuZCl9LG9uRXNjYXBlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyZW50O2I/Yi5fLnBhbmVsLmhpZGVDaGlsZCgxKTpcclxuMjc9PWEmJnRoaXMuaGlkZSgxKTtyZXR1cm4hMX0sb25IaWRlOmZ1bmN0aW9uKCl7dGhpcy5vbkhpZGUmJnRoaXMub25IaWRlKCl9LHNob3dTdWJNZW51OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy5zdWJNZW51LGM9dGhpcy5pdGVtc1thXTtpZihjPWMuZ2V0SXRlbXMmJmMuZ2V0SXRlbXMoKSl7Yj9iLnJlbW92ZUFsbCgpOihiPXRoaXMuXy5zdWJNZW51PW5ldyBDS0VESVRPUi5tZW51KHRoaXMuZWRpdG9yLENLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSx0aGlzLl8uZGVmaW5pdGlvbix7bGV2ZWw6dGhpcy5fLmxldmVsKzF9LCEwKSksYi5wYXJlbnQ9dGhpcyxiLl8ub25DbGljaz1DS0VESVRPUi50b29scy5iaW5kKHRoaXMuXy5vbkNsaWNrLHRoaXMpKTtmb3IodmFyIG0gaW4gYyl7dmFyIGU9dGhpcy5lZGl0b3IuZ2V0TWVudUl0ZW0obSk7ZSYmKGUuc3RhdGU9Y1ttXSxiLmFkZChlKSl9dmFyIGw9dGhpcy5fLnBhbmVsLmdldEJsb2NrKHRoaXMuaWQpLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCeUlkKHRoaXMuaWQrXHJcblN0cmluZyhhKSk7c2V0VGltZW91dChmdW5jdGlvbigpe2Iuc2hvdyhsLDIpfSwwKX1lbHNlIHRoaXMuXy5wYW5lbC5oaWRlQ2hpbGQoMSl9fSxwcm90bzp7YWRkOmZ1bmN0aW9uKGEpe2Eub3JkZXJ8fChhLm9yZGVyPXRoaXMuaXRlbXMubGVuZ3RoKTt0aGlzLml0ZW1zLnB1c2goYSl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3RoaXMuaXRlbXM9W119LHNob3c6ZnVuY3Rpb24oYSxiLGMsbSl7aWYoIXRoaXMucGFyZW50JiYodGhpcy5fLm9uU2hvdygpLCF0aGlzLml0ZW1zLmxlbmd0aCkpcmV0dXJuO2I9Ynx8KFwicnRsXCI9PXRoaXMuZWRpdG9yLmxhbmcuZGlyPzI6MSk7dmFyIGU9dGhpcy5pdGVtcyxsPXRoaXMuZWRpdG9yLGs9dGhpcy5fLnBhbmVsLGY9dGhpcy5fLmVsZW1lbnQ7aWYoIWspe2s9dGhpcy5fLnBhbmVsPW5ldyBDS0VESVRPUi51aS5mbG9hdFBhbmVsKHRoaXMuZWRpdG9yLENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSx0aGlzLl8ucGFuZWxEZWZpbml0aW9uLHRoaXMuXy5sZXZlbCk7XHJcbmsub25Fc2NhcGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbihhKXtpZighMT09PXRoaXMuXy5vbkVzY2FwZShhKSlyZXR1cm4hMX0sdGhpcyk7ay5vblNob3c9ZnVuY3Rpb24oKXtrLl8ucGFuZWwuZ2V0SG9sZGVyRWxlbWVudCgpLmdldFBhcmVudCgpLmFkZENsYXNzKFwiY2tlXCIpLmFkZENsYXNzKFwiY2tlX3Jlc2V0X2FsbFwiKX07ay5vbkhpZGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3RoaXMuXy5vbkhpZGUmJnRoaXMuXy5vbkhpZGUoKX0sdGhpcyk7Zj1rLmFkZEJsb2NrKHRoaXMuaWQsdGhpcy5fLnBhbmVsRGVmaW5pdGlvbi5ibG9jayk7Zi5hdXRvU2l6ZT0hMDt2YXIgZD1mLmtleXM7ZFs0MF09XCJuZXh0XCI7ZFs5XT1cIm5leHRcIjtkWzM4XT1cInByZXZcIjtkW0NLRURJVE9SLlNISUZUKzldPVwicHJldlwiO2RbXCJydGxcIj09bC5sYW5nLmRpcj8zNzozOV09Q0tFRElUT1IuZW52LmllP1wibW91c2V1cFwiOlwiY2xpY2tcIjtkWzMyXT1DS0VESVRPUi5lbnYuaWU/XCJtb3VzZXVwXCI6XHJcblwiY2xpY2tcIjtDS0VESVRPUi5lbnYuaWUmJihkWzEzXT1cIm1vdXNldXBcIik7Zj10aGlzLl8uZWxlbWVudD1mLmVsZW1lbnQ7ZD1mLmdldERvY3VtZW50KCk7ZC5nZXRCb2R5KCkuc2V0U3R5bGUoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpO2QuZ2V0RWxlbWVudHNCeVRhZyhcImh0bWxcIikuZ2V0SXRlbSgwKS5zZXRTdHlsZShcIm92ZXJmbG93XCIsXCJoaWRkZW5cIik7dGhpcy5fLml0ZW1PdmVyRm49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KHRoaXMuXy5zaG93U3ViVGltZW91dCk7dGhpcy5fLnNob3dTdWJUaW1lb3V0PUNLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQodGhpcy5fLnNob3dTdWJNZW51LGwuY29uZmlnLm1lbnVfc3ViTWVudURlbGF5fHw0MDAsdGhpcyxbYV0pfSx0aGlzKTt0aGlzLl8uaXRlbU91dEZuPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuXy5zaG93U3ViVGltZW91dCl9LHRoaXMpO1xyXG50aGlzLl8uaXRlbUNsaWNrRm49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pdGVtc1thXTtpZihiLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl0aGlzLmhpZGUoMSk7ZWxzZSBpZihiLmdldEl0ZW1zKXRoaXMuXy5zaG93U3ViTWVudShhKTtlbHNlIHRoaXMuXy5vbkNsaWNrKGIpfSx0aGlzKX1nKGUpO2Zvcih2YXIgZD1sLmVsZW1lbnRQYXRoKCksZD1bJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9tZW51JysoZCYmZC5kaXJlY3Rpb24oKSE9bC5sYW5nLmRpcj9cIiBja2VfbWl4ZWRfZGlyX2NvbnRlbnRcIjpcIlwiKSsnXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlJ10saD1lLmxlbmd0aCxwPWgmJmVbMF0uZ3JvdXAsbj0wO248aDtuKyspe3ZhciBxPWVbbl07cCE9cS5ncm91cCYmKGQucHVzaCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX21lbnVzZXBhcmF0b3JcIiByb2xlXFx4M2RcInNlcGFyYXRvclwiXFx4M2VcXHgzYy9kaXZcXHgzZScpLFxyXG5wPXEuZ3JvdXApO3EucmVuZGVyKHRoaXMsbixkKX1kLnB1c2goXCJcXHgzYy9kaXZcXHgzZVwiKTtmLnNldEh0bWwoZC5qb2luKFwiXCIpKTtDS0VESVRPUi51aS5maXJlKFwicmVhZHlcIix0aGlzKTt0aGlzLnBhcmVudD90aGlzLnBhcmVudC5fLnBhbmVsLnNob3dBc0NoaWxkKGssdGhpcy5pZCxhLGIsYyxtKTprLnNob3dCbG9jayh0aGlzLmlkLGEsYixjLG0pO2wuZmlyZShcIm1lbnVTaG93XCIsW2tdKX0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24oYSl7dGhpcy5fLmxpc3RlbmVycy5wdXNoKGEpfSxoaWRlOmZ1bmN0aW9uKGEpe3RoaXMuXy5vbkhpZGUmJnRoaXMuXy5vbkhpZGUoKTt0aGlzLl8ucGFuZWwmJnRoaXMuXy5wYW5lbC5oaWRlKGEpfX19KTtDS0VESVRPUi5tZW51SXRlbT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihhLGIsYyl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYyx7b3JkZXI6MCxjbGFzc05hbWU6XCJja2VfbWVudWJ1dHRvbl9fXCIrYn0pO3RoaXMuZ3JvdXA9XHJcbmEuXy5tZW51R3JvdXBzW3RoaXMuZ3JvdXBdO3RoaXMuZWRpdG9yPWE7dGhpcy5uYW1lPWJ9LHByb3RvOntyZW5kZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBoPWEuaWQrU3RyaW5nKGIpLGU9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXMuc3RhdGU/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOnRoaXMuc3RhdGUsbD1cIlwiLGs9ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04/XCJvblwiOmU9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEP1wiZGlzYWJsZWRcIjpcIm9mZlwiO3RoaXMucm9sZSBpbnttZW51aXRlbWNoZWNrYm94OjEsbWVudWl0ZW1yYWRpbzoxfSYmKGw9JyBhcmlhLWNoZWNrZWRcXHgzZFwiJysoZT09Q0tFRElUT1IuVFJJU1RBVEVfT04/XCJ0cnVlXCI6XCJmYWxzZVwiKSsnXCInKTt2YXIgZj10aGlzLmdldEl0ZW1zLGQ9XCJcXHgyNiNcIisoXCJydGxcIj09dGhpcy5lZGl0b3IubGFuZy5kaXI/XCI5NjY4XCI6XCI5NjU4XCIpK1wiO1wiLGc9dGhpcy5uYW1lO3RoaXMuaWNvbiYmIS9cXC4vLnRlc3QodGhpcy5pY29uKSYmKGc9XHJcbnRoaXMuaWNvbik7YT17aWQ6aCxuYW1lOnRoaXMubmFtZSxpY29uTmFtZTpnLGxhYmVsOnRoaXMubGFiZWwsY2xzOnRoaXMuY2xhc3NOYW1lfHxcIlwiLHN0YXRlOmssaGFzUG9wdXA6Zj9cInRydWVcIjpcImZhbHNlXCIsZGlzYWJsZWQ6ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsdGl0bGU6dGhpcy5sYWJlbCxocmVmOlwiamF2YXNjcmlwdDp2b2lkKCdcIisodGhpcy5sYWJlbHx8XCJcIikucmVwbGFjZShcIidcIikrXCInKVwiLGhvdmVyRm46YS5fLml0ZW1PdmVyRm4sbW92ZU91dEZuOmEuXy5pdGVtT3V0Rm4sY2xpY2tGbjphLl8uaXRlbUNsaWNrRm4saW5kZXg6YixpY29uU3R5bGU6Q0tFRElUT1Iuc2tpbi5nZXRJY29uU3R5bGUoZyxcInJ0bFwiPT10aGlzLmVkaXRvci5sYW5nLmRpcixnPT10aGlzLmljb24/bnVsbDp0aGlzLmljb24sdGhpcy5pY29uT2Zmc2V0KSxhcnJvd0h0bWw6Zj9uLm91dHB1dCh7bGFiZWw6ZH0pOlwiXCIscm9sZTp0aGlzLnJvbGU/dGhpcy5yb2xlOlwibWVudWl0ZW1cIixhcmlhQ2hlY2tlZDpsfTtcclxucC5vdXRwdXQoYSxjKX19fSl9KSgpO0NLRURJVE9SLmNvbmZpZy5tZW51X2dyb3Vwcz1cImNsaXBib2FyZCxmb3JtLHRhYmxlY2VsbCx0YWJsZWNlbGxwcm9wZXJ0aWVzLHRhYmxlcm93LHRhYmxlY29sdW1uLHRhYmxlLGFuY2hvcixsaW5rLGltYWdlLGZsYXNoLGNoZWNrYm94LHJhZGlvLHRleHRmaWVsZCxoaWRkZW5maWVsZCxpbWFnZWJ1dHRvbixidXR0b24sc2VsZWN0LHRleHRhcmVhLGRpdlwiO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiY29udGV4dG1lbnVcIix7cmVxdWlyZXM6XCJtZW51XCIsb25Mb2FkOmZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5jb250ZXh0TWVudT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5tZW51LCQ6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlLmNhbGwodGhpcyxhLHtwYW5lbDp7Y2xhc3NOYW1lOlwiY2tlX21lbnVfcGFuZWxcIixhdHRyaWJ1dGVzOntcImFyaWEtbGFiZWxcIjphLmxhbmcuY29udGV4dG1lbnUub3B0aW9uc319fSl9LHByb3RvOnthZGRUYXJnZXQ6ZnVuY3Rpb24oYSxlKXthLm9uKFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihhKXthPWEuZGF0YTt2YXIgYz1DS0VESVRPUi5lbnYud2Via2l0P2Y6Q0tFRElUT1IuZW52Lm1hYz9hLiQubWV0YUtleTphLiQuY3RybEtleTtpZighZXx8IWMpe2EucHJldmVudERlZmF1bHQoKTtpZihDS0VESVRPUi5lbnYubWFjJiZDS0VESVRPUi5lbnYud2Via2l0KXt2YXIgYz10aGlzLmVkaXRvcixcclxuYj0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChhLmdldFRhcmdldCgpLGMuZWRpdGFibGUoKSkpLmNvbnRhaW5zKGZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKX0sITApO2ImJlwiZmFsc2VcIj09Yi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikmJmMuZ2V0U2VsZWN0aW9uKCkuZmFrZShiKX12YXIgYj1hLmdldFRhcmdldCgpLmdldERvY3VtZW50KCksZD1hLmdldFRhcmdldCgpLmdldERvY3VtZW50KCkuZ2V0RG9jdW1lbnRFbGVtZW50KCksYz0hYi5lcXVhbHMoQ0tFRElUT1IuZG9jdW1lbnQpLGI9Yi5nZXRXaW5kb3coKS5nZXRTY3JvbGxQb3NpdGlvbigpLGc9Yz9hLiQuY2xpZW50WDphLiQucGFnZVh8fGIueCthLiQuY2xpZW50WCxoPWM/YS4kLmNsaWVudFk6YS4kLnBhZ2VZfHxiLnkrYS4kLmNsaWVudFk7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMub3BlbihkLG51bGwsZyxoKX0sQ0tFRElUT1IuZW52LmllP1xyXG4yMDA6MCx0aGlzKX19LHRoaXMpO2lmKENLRURJVE9SLmVudi53ZWJraXQpe3ZhciBmLGQ9ZnVuY3Rpb24oKXtmPTB9O2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7Zj1DS0VESVRPUi5lbnYubWFjP2EuZGF0YS4kLm1ldGFLZXk6YS5kYXRhLiQuY3RybEtleX0pO2Eub24oXCJrZXl1cFwiLGQpO2Eub24oXCJjb250ZXh0bWVudVwiLGQpfX0sb3BlbjpmdW5jdGlvbihhLGUsZixkKXt0aGlzLmVkaXRvci5mb2N1cygpO2E9YXx8Q0tFRElUT1IuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCk7dGhpcy5lZGl0b3Iuc2VsZWN0aW9uQ2hhbmdlKDEpO3RoaXMuc2hvdyhhLGUsZixkKX19fSl9LGJlZm9yZUluaXQ6ZnVuY3Rpb24oYSl7dmFyIGU9YS5jb250ZXh0TWVudT1uZXcgQ0tFRElUT1IucGx1Z2lucy5jb250ZXh0TWVudShhKTthLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7ZS5hZGRUYXJnZXQoYS5lZGl0YWJsZSgpLCExIT09YS5jb25maWcuYnJvd3NlckNvbnRleHRNZW51T25DdHJsKX0pO1xyXG5hLmFkZENvbW1hbmQoXCJjb250ZXh0TWVudVwiLHtleGVjOmZ1bmN0aW9uKCl7YS5jb250ZXh0TWVudS5vcGVuKGEuZG9jdW1lbnQuZ2V0Qm9keSgpKX19KTthLnNldEtleXN0cm9rZShDS0VESVRPUi5TSElGVCsxMjEsXCJjb250ZXh0TWVudVwiKTthLnNldEtleXN0cm9rZShDS0VESVRPUi5DVFJMK0NLRURJVE9SLlNISUZUKzEyMSxcImNvbnRleHRNZW51XCIpfX0pOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZGl2XCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXtpZighYS5ibG9ja2xlc3Mpe3ZhciBjPWEubGFuZy5kaXYsYj1cImRpdigqKVwiO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYSxcImVkaXRkaXZcIixcImFkdmFuY2VkXCIpJiYoYis9XCI7ZGl2W2RpcixpZCxsYW5nLHRpdGxlXXsqfVwiKTthLmFkZENvbW1hbmQoXCJjcmVhdGVkaXZcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImNyZWF0ZWRpdlwiLHthbGxvd2VkQ29udGVudDpiLHJlcXVpcmVkQ29udGVudDpcImRpdlwiLGNvbnRleHRTZW5zaXRpdmU6ITAscmVmcmVzaDpmdW5jdGlvbihhLGMpe3RoaXMuc2V0U3RhdGUoXCJkaXZcImluKGEuY29uZmlnLmRpdl93cmFwVGFibGU/Yy5yb290OmMuYmxvY2tMaW1pdCkuZ2V0RHRkKCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19KSk7YS5hZGRDb21tYW5kKFwiZWRpdGRpdlwiLFxyXG5uZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImVkaXRkaXZcIix7cmVxdWlyZWRDb250ZW50OlwiZGl2XCJ9KSk7YS5hZGRDb21tYW5kKFwicmVtb3ZlZGl2XCIse3JlcXVpcmVkQ29udGVudDpcImRpdlwiLGV4ZWM6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYyhiKXsoYj1DS0VESVRPUi5wbHVnaW5zLmRpdi5nZXRTdXJyb3VuZERpdihhLGIpKSYmIWIuZGF0YShcImNrZS1kaXYtYWRkZWRcIikmJihmLnB1c2goYiksYi5kYXRhKFwiY2tlLWRpdi1hZGRlZFwiKSl9Zm9yKHZhciBiPWEuZ2V0U2VsZWN0aW9uKCksZz1iJiZiLmdldFJhbmdlcygpLGUsaD1iLmNyZWF0ZUJvb2ttYXJrcygpLGY9W10sZD0wO2Q8Zy5sZW5ndGg7ZCsrKWU9Z1tkXSxlLmNvbGxhcHNlZD9jKGIuZ2V0U3RhcnRFbGVtZW50KCkpOihlPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpLGUuZXZhbHVhdG9yPWMsZS5sYXN0Rm9yd2FyZCgpKTtmb3IoZD0wO2Q8Zi5sZW5ndGg7ZCsrKWZbZF0ucmVtb3ZlKCEwKTtiLnNlbGVjdEJvb2ttYXJrcyhoKX19KTtcclxuYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiQ3JlYXRlRGl2XCIse2xhYmVsOmMudG9vbGJhcixjb21tYW5kOlwiY3JlYXRlZGl2XCIsdG9vbGJhcjpcImJsb2Nrcyw1MFwifSk7YS5hZGRNZW51SXRlbXMmJihhLmFkZE1lbnVJdGVtcyh7ZWRpdGRpdjp7bGFiZWw6Yy5lZGl0LGNvbW1hbmQ6XCJlZGl0ZGl2XCIsZ3JvdXA6XCJkaXZcIixvcmRlcjoxfSxyZW1vdmVkaXY6e2xhYmVsOmMucmVtb3ZlLGNvbW1hbmQ6XCJyZW1vdmVkaXZcIixncm91cDpcImRpdlwiLG9yZGVyOjV9fSksYS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihiKXtyZXR1cm4hYnx8Yi5pc1JlYWRPbmx5KCk/bnVsbDpDS0VESVRPUi5wbHVnaW5zLmRpdi5nZXRTdXJyb3VuZERpdihhKT97ZWRpdGRpdjpDS0VESVRPUi5UUklTVEFURV9PRkYscmVtb3ZlZGl2OkNLRURJVE9SLlRSSVNUQVRFX09GRn06bnVsbH0pKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiY3JlYXRlZGl2XCIsdGhpcy5wYXRoK1xyXG5cImRpYWxvZ3MvZGl2LmpzXCIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJlZGl0ZGl2XCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9kaXYuanNcIil9fX0pO0NLRURJVE9SLnBsdWdpbnMuZGl2PXtnZXRTdXJyb3VuZERpdjpmdW5jdGlvbihhLGMpe3ZhciBiPWEuZWxlbWVudFBhdGgoYyk7cmV0dXJuIGEuZWxlbWVudFBhdGgoYi5ibG9ja0xpbWl0KS5jb250YWlucyhmdW5jdGlvbihhKXtyZXR1cm4gYS5pcyhcImRpdlwiKSYmIWEuaXNSZWFkT25seSgpfSwxKX19fSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInJlc2l6ZVwiLHtpbml0OmZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGYoZCl7dmFyIGU9Yy53aWR0aCxtPWMuaGVpZ2h0LGY9ZSsoZC5kYXRhLiQuc2NyZWVuWC1uLngpKihcInJ0bFwiPT1nPy0xOjEpO2Q9bSsoZC5kYXRhLiQuc2NyZWVuWS1uLnkpO2gmJihlPU1hdGgubWF4KGEucmVzaXplX21pbldpZHRoLE1hdGgubWluKGYsYS5yZXNpemVfbWF4V2lkdGgpKSk7cCYmKG09TWF0aC5tYXgoYS5yZXNpemVfbWluSGVpZ2h0LE1hdGgubWluKGQsYS5yZXNpemVfbWF4SGVpZ2h0KSkpO2IucmVzaXplKGg/ZTpudWxsLG0pfWZ1bmN0aW9uIGsoKXtDS0VESVRPUi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGYpO0NLRURJVE9SLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGspO2IuZG9jdW1lbnQmJihiLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsZiksYi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixcclxuaykpfXZhciBhPWIuY29uZmlnLHI9Yi51aS5zcGFjZUlkKFwicmVzaXplclwiKSxnPWIuZWxlbWVudD9iLmVsZW1lbnQuZ2V0RGlyZWN0aW9uKDEpOlwibHRyXCI7IWEucmVzaXplX2RpciYmKGEucmVzaXplX2Rpcj1cInZlcnRpY2FsXCIpO3ZvaWQgMD09PWEucmVzaXplX21heFdpZHRoJiYoYS5yZXNpemVfbWF4V2lkdGg9M0UzKTt2b2lkIDA9PT1hLnJlc2l6ZV9tYXhIZWlnaHQmJihhLnJlc2l6ZV9tYXhIZWlnaHQ9M0UzKTt2b2lkIDA9PT1hLnJlc2l6ZV9taW5XaWR0aCYmKGEucmVzaXplX21pbldpZHRoPTc1MCk7dm9pZCAwPT09YS5yZXNpemVfbWluSGVpZ2h0JiYoYS5yZXNpemVfbWluSGVpZ2h0PTI1MCk7aWYoITEhPT1hLnJlc2l6ZV9lbmFibGVkKXt2YXIgbD1udWxsLG4sYyxoPShcImJvdGhcIj09YS5yZXNpemVfZGlyfHxcImhvcml6b250YWxcIj09YS5yZXNpemVfZGlyKSYmYS5yZXNpemVfbWluV2lkdGghPWEucmVzaXplX21heFdpZHRoLHA9KFwiYm90aFwiPT1hLnJlc2l6ZV9kaXJ8fFwidmVydGljYWxcIj09XHJcbmEucmVzaXplX2RpcikmJmEucmVzaXplX21pbkhlaWdodCE9YS5yZXNpemVfbWF4SGVpZ2h0LHE9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oZCl7bHx8KGw9Yi5nZXRSZXNpemFibGUoKSk7Yz17d2lkdGg6bC4kLm9mZnNldFdpZHRofHwwLGhlaWdodDpsLiQub2Zmc2V0SGVpZ2h0fHwwfTtuPXt4OmQuc2NyZWVuWCx5OmQuc2NyZWVuWX07YS5yZXNpemVfbWluV2lkdGg+Yy53aWR0aCYmKGEucmVzaXplX21pbldpZHRoPWMud2lkdGgpO2EucmVzaXplX21pbkhlaWdodD5jLmhlaWdodCYmKGEucmVzaXplX21pbkhlaWdodD1jLmhlaWdodCk7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZW1vdmVcIixmKTtDS0VESVRPUi5kb2N1bWVudC5vbihcIm1vdXNldXBcIixrKTtiLmRvY3VtZW50JiYoYi5kb2N1bWVudC5vbihcIm1vdXNlbW92ZVwiLGYpLGIuZG9jdW1lbnQub24oXCJtb3VzZXVwXCIsaykpO2QucHJldmVudERlZmF1bHQmJmQucHJldmVudERlZmF1bHQoKX0pO2Iub24oXCJkZXN0cm95XCIsXHJcbmZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24ocSl9KTtiLm9uKFwidWlTcGFjZVwiLGZ1bmN0aW9uKGEpe2lmKFwiYm90dG9tXCI9PWEuZGF0YS5zcGFjZSl7dmFyIGU9XCJcIjtoJiYhcCYmKGU9XCIgY2tlX3Jlc2l6ZXJfaG9yaXpvbnRhbFwiKTshaCYmcCYmKGU9XCIgY2tlX3Jlc2l6ZXJfdmVydGljYWxcIik7dmFyIGM9J1xceDNjc3BhbiBpZFxceDNkXCInK3IrJ1wiIGNsYXNzXFx4M2RcImNrZV9yZXNpemVyJytlK1wiIGNrZV9yZXNpemVyX1wiK2crJ1wiIHRpdGxlXFx4M2RcIicrQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShiLmxhbmcuY29tbW9uLnJlc2l6ZSkrJ1wiIG9ubW91c2Vkb3duXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbignK3ErJywgZXZlbnQpXCJcXHgzZScrKFwibHRyXCI9PWc/XCLil6JcIjpcIuKXo1wiKStcIlxceDNjL3NwYW5cXHgzZVwiO1wibHRyXCI9PWcmJlwibHRyXCI9PWU/YS5kYXRhLmh0bWwrPWM6YS5kYXRhLmh0bWw9YythLmRhdGEuaHRtbH19LGIsbnVsbCwxMDApO2Iub24oXCJtYXhpbWl6ZVwiLFxyXG5mdW5jdGlvbihhKXtiLnVpLnNwYWNlKFwicmVzaXplclwiKVthLmRhdGE9PUNLRURJVE9SLlRSSVNUQVRFX09OP1wiaGlkZVwiOlwic2hvd1wiXSgpfSl9fX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIEIoYSl7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgYj1nKCksZT1DS0VESVRPUi50b29scy5jbG9uZShhLmNvbmZpZy50b29sYmFyR3JvdXBzKXx8cShhKSxmPTA7ZjxlLmxlbmd0aDtmKyspe3ZhciBsPWVbZl07aWYoXCIvXCIhPWwpe1wic3RyaW5nXCI9PXR5cGVvZiBsJiYobD1lW2ZdPXtuYW1lOmx9KTt2YXIgbSxkPWwuZ3JvdXBzO2lmKGQpZm9yKHZhciBoPTA7aDxkLmxlbmd0aDtoKyspbT1kW2hdLChtPWJbbV0pJiZjKGwsbSk7KG09YltsLm5hbWVdKSYmYyhsLG0pfX1yZXR1cm4gZX1mdW5jdGlvbiBnKCl7dmFyIGI9e30sYyxmLGU7Zm9yKGMgaW4gYS51aS5pdGVtcylmPWEudWkuaXRlbXNbY10sZT1mLnRvb2xiYXJ8fFwib3RoZXJzXCIsZT1lLnNwbGl0KFwiLFwiKSxmPWVbMF0sZT1wYXJzZUludChlWzFdfHwtMSwxMCksYltmXXx8KGJbZl09W10pLGJbZl0ucHVzaCh7bmFtZTpjLG9yZGVyOmV9KTtmb3IoZiBpbiBiKWJbZl09YltmXS5zb3J0KGZ1bmN0aW9uKGIsXHJcbmEpe3JldHVybiBiLm9yZGVyPT1hLm9yZGVyPzA6MD5hLm9yZGVyPy0xOjA+Yi5vcmRlcj8xOmIub3JkZXI8YS5vcmRlcj8tMToxfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhjLGUpe2lmKGUubGVuZ3RoKXtjLml0ZW1zP2MuaXRlbXMucHVzaChhLnVpLmNyZWF0ZShcIi1cIikpOmMuaXRlbXM9W107Zm9yKHZhciBmO2Y9ZS5zaGlmdCgpOylmPVwic3RyaW5nXCI9PXR5cGVvZiBmP2Y6Zi5uYW1lLGImJi0xIT1DS0VESVRPUi50b29scy5pbmRleE9mKGIsZil8fChmPWEudWkuY3JlYXRlKGYpKSYmYS5hZGRGZWF0dXJlKGYpJiZjLml0ZW1zLnB1c2goZil9fWZ1bmN0aW9uIGgoYil7dmFyIGE9W10sZSxkLGg7Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSlkPWJbZV0saD17fSxcIi9cIj09ZD9hLnB1c2goZCk6Q0tFRElUT1IudG9vbHMuaXNBcnJheShkKT8oYyhoLENLRURJVE9SLnRvb2xzLmNsb25lKGQpKSxhLnB1c2goaCkpOmQuaXRlbXMmJihjKGgsQ0tFRElUT1IudG9vbHMuY2xvbmUoZC5pdGVtcykpLFxyXG5oLm5hbWU9ZC5uYW1lLGEucHVzaChoKSk7cmV0dXJuIGF9dmFyIGI9YS5jb25maWcucmVtb3ZlQnV0dG9ucyxiPWImJmIuc3BsaXQoXCIsXCIpLGU9YS5jb25maWcudG9vbGJhcjtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9YS5jb25maWdbXCJ0b29sYmFyX1wiK2VdKTtyZXR1cm4gYS50b29sYmFyPWU/aChlKTpkKCl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gYS5fLnRvb2xiYXJHcm91cHN8fChhLl8udG9vbGJhckdyb3Vwcz1be25hbWU6XCJkb2N1bWVudFwiLGdyb3VwczpbXCJtb2RlXCIsXCJkb2N1bWVudFwiLFwiZG9jdG9vbHNcIl19LHtuYW1lOlwiY2xpcGJvYXJkXCIsZ3JvdXBzOltcImNsaXBib2FyZFwiLFwidW5kb1wiXX0se25hbWU6XCJlZGl0aW5nXCIsZ3JvdXBzOltcImZpbmRcIixcInNlbGVjdGlvblwiLFwic3BlbGxjaGVja2VyXCJdfSx7bmFtZTpcImZvcm1zXCJ9LFwiL1wiLHtuYW1lOlwiYmFzaWNzdHlsZXNcIixncm91cHM6W1wiYmFzaWNzdHlsZXNcIixcImNsZWFudXBcIl19LHtuYW1lOlwicGFyYWdyYXBoXCIsZ3JvdXBzOltcImxpc3RcIixcclxuXCJpbmRlbnRcIixcImJsb2Nrc1wiLFwiYWxpZ25cIixcImJpZGlcIl19LHtuYW1lOlwibGlua3NcIn0se25hbWU6XCJpbnNlcnRcIn0sXCIvXCIse25hbWU6XCJzdHlsZXNcIn0se25hbWU6XCJjb2xvcnNcIn0se25hbWU6XCJ0b29sc1wifSx7bmFtZTpcIm90aGVyc1wifSx7bmFtZTpcImFib3V0XCJ9XSl9dmFyIHk9ZnVuY3Rpb24oKXt0aGlzLnRvb2xiYXJzPVtdO3RoaXMuZm9jdXNDb21tYW5kRXhlY3V0ZWQ9ITF9O3kucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsZDtkPXRoaXMudG9vbGJhcnNbYSsrXTspZm9yKHZhciBnPTAsYztjPWQuaXRlbXNbZysrXTspaWYoYy5mb2N1cyl7Yy5mb2N1cygpO3JldHVybn19O3ZhciBDPXttb2Rlczp7d3lzaXd5ZzoxLHNvdXJjZToxfSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7YS50b29sYm94JiYoYS50b29sYm94LmZvY3VzQ29tbWFuZEV4ZWN1dGVkPSEwLENLRURJVE9SLmVudi5pZXx8Q0tFRElUT1IuZW52LmFpcj9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS50b29sYm94LmZvY3VzKCl9LFxyXG4xMDApOmEudG9vbGJveC5mb2N1cygpKX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwidG9vbGJhclwiLHtyZXF1aXJlczpcImJ1dHRvblwiLGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGQsZz1mdW5jdGlvbihjLGgpe3ZhciBiLGU9XCJydGxcIj09YS5sYW5nLmRpcixrPWEuY29uZmlnLnRvb2xiYXJHcm91cEN5Y2xpbmcscj1lPzM3OjM5LGU9ZT8zOTozNyxrPXZvaWQgMD09PWt8fGs7c3dpdGNoKGgpe2Nhc2UgOTpjYXNlIENLRURJVE9SLlNISUZUKzk6Zm9yKDshYnx8IWIuaXRlbXMubGVuZ3RoOylpZihiPTk9PWg/KGI/Yi5uZXh0OmMudG9vbGJhci5uZXh0KXx8YS50b29sYm94LnRvb2xiYXJzWzBdOihiP2IucHJldmlvdXM6Yy50b29sYmFyLnByZXZpb3VzKXx8YS50b29sYm94LnRvb2xiYXJzW2EudG9vbGJveC50b29sYmFycy5sZW5ndGgtMV0sYi5pdGVtcy5sZW5ndGgpZm9yKGM9Yi5pdGVtc1tkP2IuaXRlbXMubGVuZ3RoLTE6MF07YyYmIWMuZm9jdXM7KShjPWQ/Yy5wcmV2aW91czpjLm5leHQpfHxcclxuKGI9MCk7YyYmYy5mb2N1cygpO3JldHVybiExO2Nhc2UgcjpiPWM7ZG8gYj1iLm5leHQsIWImJmsmJihiPWMudG9vbGJhci5pdGVtc1swXSk7d2hpbGUoYiYmIWIuZm9jdXMpO2I/Yi5mb2N1cygpOmcoYyw5KTtyZXR1cm4hMTtjYXNlIDQwOnJldHVybiBjLmJ1dHRvbiYmYy5idXR0b24uaGFzQXJyb3c/KGEub25jZShcInBhbmVsU2hvd1wiLGZ1bmN0aW9uKGIpe2IuZGF0YS5fLnBhbmVsLl8uY3VycmVudEJsb2NrLm9uS2V5RG93big0MCl9KSxjLmV4ZWN1dGUoKSk6ZyhjLDQwPT1oP3I6ZSksITE7Y2FzZSBlOmNhc2UgMzg6Yj1jO2RvIGI9Yi5wcmV2aW91cywhYiYmayYmKGI9Yy50b29sYmFyLml0ZW1zW2MudG9vbGJhci5pdGVtcy5sZW5ndGgtMV0pO3doaWxlKGImJiFiLmZvY3VzKTtiP2IuZm9jdXMoKTooZD0xLGcoYyxDS0VESVRPUi5TSElGVCs5KSxkPTApO3JldHVybiExO2Nhc2UgMjc6cmV0dXJuIGEuZm9jdXMoKSwhMTtjYXNlIDEzOmNhc2UgMzI6cmV0dXJuIGMuZXhlY3V0ZSgpLFxyXG4hMX1yZXR1cm4hMH07YS5vbihcInVpU3BhY2VcIixmdW5jdGlvbihjKXtpZihjLmRhdGEuc3BhY2U9PWEuY29uZmlnLnRvb2xiYXJMb2NhdGlvbil7Yy5yZW1vdmVMaXN0ZW5lcigpO2EudG9vbGJveD1uZXcgeTt2YXIgZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKSxiPVsnXFx4M2NzcGFuIGlkXFx4M2RcIicsZCwnXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZScsYS5sYW5nLnRvb2xiYXIudG9vbGJhcnMsXCJcXHgzYy9zcGFuXFx4M2VcIiwnXFx4M2NzcGFuIGlkXFx4M2RcIicrYS51aS5zcGFjZUlkKFwidG9vbGJveFwiKSsnXCIgY2xhc3NcXHgzZFwiY2tlX3Rvb2xib3hcIiByb2xlXFx4M2RcImdyb3VwXCIgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcIicsZCwnXCIgb25tb3VzZWRvd25cXHgzZFwicmV0dXJuIGZhbHNlO1wiXFx4M2UnXSxkPSExIT09YS5jb25maWcudG9vbGJhclN0YXJ0dXBFeHBhbmRlZCxlLGs7YS5jb25maWcudG9vbGJhckNhbkNvbGxhcHNlJiZhLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiZcclxuYi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xib3hfbWFpblwiJysoZD9cIlxceDNlXCI6JyBzdHlsZVxceDNkXCJkaXNwbGF5Om5vbmVcIlxceDNlJykpO2Zvcih2YXIgcj1hLnRvb2xib3gudG9vbGJhcnMsZj1CKGEpLGw9MDtsPGYubGVuZ3RoO2wrKyl7dmFyIG0sbj0wLHYscD1mW2xdLHc7aWYocClpZihlJiYoYi5wdXNoKFwiXFx4M2Mvc3BhblxceDNlXCIpLGs9ZT0wKSxcIi9cIj09PXApYi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJfYnJlYWtcIlxceDNlXFx4M2Mvc3BhblxceDNlJyk7ZWxzZXt3PXAuaXRlbXN8fHA7Zm9yKHZhciB4PTA7eDx3Lmxlbmd0aDt4Kyspe3ZhciB0PXdbeF0scTtpZih0KXt2YXIgej1mdW5jdGlvbihjKXtjPWMucmVuZGVyKGEsYik7dT1uLml0ZW1zLnB1c2goYyktMTswPHUmJihjLnByZXZpb3VzPW4uaXRlbXNbdS0xXSxjLnByZXZpb3VzLm5leHQ9Yyk7Yy50b29sYmFyPW47Yy5vbmtleT1nO2Mub25mb2N1cz1mdW5jdGlvbigpe2EudG9vbGJveC5mb2N1c0NvbW1hbmRFeGVjdXRlZHx8XHJcbmEuZm9jdXMoKX19O2lmKHQudHlwZT09Q0tFRElUT1IuVUlfU0VQQVJBVE9SKWs9ZSYmdDtlbHNle3E9ITEhPT10LmNhbkdyb3VwO2lmKCFuKXttPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO249e2lkOm0saXRlbXM6W119O3Y9cC5uYW1lJiYoYS5sYW5nLnRvb2xiYXIudG9vbGJhckdyb3Vwc1twLm5hbWVdfHxwLm5hbWUpO2IucHVzaCgnXFx4M2NzcGFuIGlkXFx4M2RcIicsbSwnXCIgY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJcIicsdj8nIGFyaWEtbGFiZWxsZWRieVxceDNkXCInK20rJ19sYWJlbFwiJzpcIlwiLCcgcm9sZVxceDNkXCJ0b29sYmFyXCJcXHgzZScpO3YmJmIucHVzaCgnXFx4M2NzcGFuIGlkXFx4M2RcIicsbSwnX2xhYmVsXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZScsdixcIlxceDNjL3NwYW5cXHgzZVwiKTtiLnB1c2goJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfdG9vbGJhcl9zdGFydFwiXFx4M2VcXHgzYy9zcGFuXFx4M2UnKTt2YXIgdT1yLnB1c2gobiktMTswPHUmJihuLnByZXZpb3VzPXJbdS1cclxuMV0sbi5wcmV2aW91cy5uZXh0PW4pfXE/ZXx8KGIucHVzaCgnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV90b29sZ3JvdXBcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2UnKSxlPTEpOmUmJihiLnB1c2goXCJcXHgzYy9zcGFuXFx4M2VcIiksZT0wKTtrJiYoeihrKSxrPTApO3oodCl9fX1lJiYoYi5wdXNoKFwiXFx4M2Mvc3BhblxceDNlXCIpLGs9ZT0wKTtuJiZiLnB1c2goJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfdG9vbGJhcl9lbmRcIlxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2Mvc3BhblxceDNlJyl9fWEuY29uZmlnLnRvb2xiYXJDYW5Db2xsYXBzZSYmYi5wdXNoKFwiXFx4M2Mvc3BhblxceDNlXCIpO2lmKGEuY29uZmlnLnRvb2xiYXJDYW5Db2xsYXBzZSYmYS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSl7dmFyIEE9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oKXthLmV4ZWNDb21tYW5kKFwidG9vbGJhckNvbGxhcHNlXCIpfSk7YS5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKEEpfSk7XHJcbmEuYWRkQ29tbWFuZChcInRvb2xiYXJDb2xsYXBzZVwiLHtyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYil7dmFyIGE9Yi51aS5zcGFjZShcInRvb2xiYXJfY29sbGFwc2VyXCIpLGM9YS5nZXRQcmV2aW91cygpLGU9Yi51aS5zcGFjZShcImNvbnRlbnRzXCIpLGQ9Yy5nZXRQYXJlbnQoKSxmPXBhcnNlSW50KGUuJC5zdHlsZS5oZWlnaHQsMTApLGg9ZC4kLm9mZnNldEhlaWdodCxnPWEuaGFzQ2xhc3MoXCJja2VfdG9vbGJveF9jb2xsYXBzZXJfbWluXCIpO2c/KGMuc2hvdygpLGEucmVtb3ZlQ2xhc3MoXCJja2VfdG9vbGJveF9jb2xsYXBzZXJfbWluXCIpLGEuc2V0QXR0cmlidXRlKFwidGl0bGVcIixiLmxhbmcudG9vbGJhci50b29sYmFyQ29sbGFwc2UpKTooYy5oaWRlKCksYS5hZGRDbGFzcyhcImNrZV90b29sYm94X2NvbGxhcHNlcl9taW5cIiksYS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGIubGFuZy50b29sYmFyLnRvb2xiYXJFeHBhbmQpKTthLmdldEZpcnN0KCkuc2V0VGV4dChnP1wi4payXCI6XCLil4BcIik7ZS5zZXRTdHlsZShcImhlaWdodFwiLFxyXG5mLShkLiQub2Zmc2V0SGVpZ2h0LWgpK1wicHhcIik7Yi5maXJlKFwicmVzaXplXCIse291dGVySGVpZ2h0OmIuY29udGFpbmVyLiQub2Zmc2V0SGVpZ2h0LGNvbnRlbnRzSGVpZ2h0OmUuJC5vZmZzZXRIZWlnaHQsb3V0ZXJXaWR0aDpiLmNvbnRhaW5lci4kLm9mZnNldFdpZHRofSl9LG1vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9fSk7YS5zZXRLZXlzdHJva2UoQ0tFRElUT1IuQUxUKyhDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi53ZWJraXQ/MTg5OjEwOSksXCJ0b29sYmFyQ29sbGFwc2VcIik7Yi5wdXNoKCdcXHgzY2EgdGl0bGVcXHgzZFwiJysoZD9hLmxhbmcudG9vbGJhci50b29sYmFyQ29sbGFwc2U6YS5sYW5nLnRvb2xiYXIudG9vbGJhckV4cGFuZCkrJ1wiIGlkXFx4M2RcIicrYS51aS5zcGFjZUlkKFwidG9vbGJhcl9jb2xsYXBzZXJcIikrJ1wiIHRhYkluZGV4XFx4M2RcIi0xXCIgY2xhc3NcXHgzZFwiY2tlX3Rvb2xib3hfY29sbGFwc2VyJyk7ZHx8Yi5wdXNoKFwiIGNrZV90b29sYm94X2NvbGxhcHNlcl9taW5cIik7XHJcbmIucHVzaCgnXCIgb25jbGlja1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJytBKycpXCJcXHgzZScsJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfYXJyb3dcIlxceDNlXFx4MjYjOTY1MDtcXHgzYy9zcGFuXFx4M2UnLFwiXFx4M2MvYVxceDNlXCIpfWIucHVzaChcIlxceDNjL3NwYW5cXHgzZVwiKTtjLmRhdGEuaHRtbCs9Yi5qb2luKFwiXCIpfX0pO2Eub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtpZih0aGlzLnRvb2xib3gpe3ZhciBhLGQ9MCxiLGUsZztmb3IoYT10aGlzLnRvb2xib3gudG9vbGJhcnM7ZDxhLmxlbmd0aDtkKyspZm9yKGU9YVtkXS5pdGVtcyxiPTA7YjxlLmxlbmd0aDtiKyspZz1lW2JdLGcuY2xpY2tGbiYmQ0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24oZy5jbGlja0ZuKSxnLmtleURvd25GbiYmQ0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24oZy5rZXlEb3duRm4pfX0pO2Eub24oXCJ1aVJlYWR5XCIsZnVuY3Rpb24oKXt2YXIgYz1hLnVpLnNwYWNlKFwidG9vbGJveFwiKTtjJiZhLmZvY3VzTWFuYWdlci5hZGQoYyxcclxuMSl9KTthLmFkZENvbW1hbmQoXCJ0b29sYmFyRm9jdXNcIixDKTthLnNldEtleXN0cm9rZShDS0VESVRPUi5BTFQrMTIxLFwidG9vbGJhckZvY3VzXCIpO2EudWkuYWRkKFwiLVwiLENLRURJVE9SLlVJX1NFUEFSQVRPUix7fSk7YS51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX1NFUEFSQVRPUix7Y3JlYXRlOmZ1bmN0aW9uKCl7cmV0dXJue3JlbmRlcjpmdW5jdGlvbihhLGQpe2QucHVzaCgnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV90b29sYmFyX3NlcGFyYXRvclwiIHJvbGVcXHgzZFwic2VwYXJhdG9yXCJcXHgzZVxceDNjL3NwYW5cXHgzZScpO3JldHVybnt9fX19fSl9fSk7Q0tFRElUT1IudWkucHJvdG90eXBlLmFkZFRvb2xiYXJHcm91cD1mdW5jdGlvbihhLGQsZyl7dmFyIGM9cSh0aGlzLmVkaXRvciksaD0wPT09ZCxiPXtuYW1lOmF9O2lmKGcpe2lmKGc9Q0tFRElUT1IudG9vbHMuc2VhcmNoKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGEubmFtZT09Z30pKXshZy5ncm91cHMmJihnLmdyb3Vwcz1bXSk7aWYoZCYmXHJcbihkPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZy5ncm91cHMsZCksMDw9ZCkpe2cuZ3JvdXBzLnNwbGljZShkKzEsMCxhKTtyZXR1cm59aD9nLmdyb3Vwcy5zcGxpY2UoMCwwLGEpOmcuZ3JvdXBzLnB1c2goYSk7cmV0dXJufWQ9bnVsbH1kJiYoZD1DS0VESVRPUi50b29scy5pbmRleE9mKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGEubmFtZT09ZH0pKTtoP2Muc3BsaWNlKDAsMCxhKTpcIm51bWJlclwiPT10eXBlb2YgZD9jLnNwbGljZShkKzEsMCxiKTpjLnB1c2goYSl9fSkoKTtDS0VESVRPUi5VSV9TRVBBUkFUT1I9XCJzZXBhcmF0b3JcIjtDS0VESVRPUi5jb25maWcudG9vbGJhckxvY2F0aW9uPVwidG9wXCI7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcShhLGQpe2Z1bmN0aW9uIGwoYyl7Yz1rLmxpc3RbY107aWYoYy5lcXVhbHMoYS5lZGl0YWJsZSgpKXx8XCJ0cnVlXCI9PWMuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXt2YXIgZT1hLmNyZWF0ZVJhbmdlKCk7ZS5zZWxlY3ROb2RlQ29udGVudHMoYyk7ZS5zZWxlY3QoKX1lbHNlIGEuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudChjKTthLmZvY3VzKCl9ZnVuY3Rpb24gbSgpe24mJm4uc2V0SHRtbCgnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9wYXRoX2VtcHR5XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2UnKTtkZWxldGUgay5saXN0fXZhciBwPWEudWkuc3BhY2VJZChcInBhdGhcIiksbixrPWEuXy5lbGVtZW50c1BhdGgscT1rLmlkQmFzZTtkLmh0bWwrPSdcXHgzY3NwYW4gaWRcXHgzZFwiJytwKydfbGFiZWxcIiBjbGFzc1xceDNkXCJja2Vfdm9pY2VfbGFiZWxcIlxceDNlJythLmxhbmcuZWxlbWVudHNwYXRoLmVsZUxhYmVsKydcXHgzYy9zcGFuXFx4M2VcXHgzY3NwYW4gaWRcXHgzZFwiJytcclxucCsnXCIgY2xhc3NcXHgzZFwiY2tlX3BhdGhcIiByb2xlXFx4M2RcImdyb3VwXCIgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcIicrcCsnX2xhYmVsXCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfcGF0aF9lbXB0eVwiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlXFx4M2Mvc3BhblxceDNlJzthLm9uKFwidWlSZWFkeVwiLGZ1bmN0aW9uKCl7dmFyIGM9YS51aS5zcGFjZShcInBhdGhcIik7YyYmYS5mb2N1c01hbmFnZXIuYWRkKGMsMSl9KTtrLm9uQ2xpY2s9bDt2YXIgdj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihsKSx3PUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGMsZSl7dmFyIGc9ay5pZEJhc2UsYjtlPW5ldyBDS0VESVRPUi5kb20uZXZlbnQoZSk7Yj1cInJ0bFwiPT1hLmxhbmcuZGlyO3N3aXRjaChlLmdldEtleXN0cm9rZSgpKXtjYXNlIGI/Mzk6Mzc6Y2FzZSA5OnJldHVybihiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoZysoYysxKSkpfHwoYj1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGcrXHJcblwiMFwiKSksYi5mb2N1cygpLCExO2Nhc2UgYj8zNzozOTpjYXNlIENLRURJVE9SLlNISUZUKzk6cmV0dXJuKGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChnKyhjLTEpKSl8fChiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoZysoay5saXN0Lmxlbmd0aC0xKSkpLGIuZm9jdXMoKSwhMTtjYXNlIDI3OnJldHVybiBhLmZvY3VzKCksITE7Y2FzZSAxMzpjYXNlIDMyOnJldHVybiBsKGMpLCExfXJldHVybiEwfSk7YS5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPVtdLGU9ay5saXN0PVtdLGc9W10sYj1rLmZpbHRlcnMsZD0hMCxsPWEuZWxlbWVudFBhdGgoKS5lbGVtZW50cyxmLHU9bC5sZW5ndGg7dS0tOyl7dmFyIGg9bFt1XSxyPTA7Zj1oLmRhdGEoXCJja2UtZGlzcGxheS1uYW1lXCIpP2guZGF0YShcImNrZS1kaXNwbGF5LW5hbWVcIik6aC5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpP2guZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKTpoLmdldE5hbWUoKTtcclxuKGQ9aC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik/XCJ0cnVlXCI9PWguZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpOmQpfHxoLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKXx8KHI9MSk7Zm9yKHZhciB0PTA7dDxiLmxlbmd0aDt0Kyspe3ZhciBtPWJbdF0oaCxmKTtpZighMT09PW0pe3I9MTticmVha31mPW18fGZ9cnx8KGUudW5zaGlmdChoKSxnLnVuc2hpZnQoZikpfWU9ZS5sZW5ndGg7Zm9yKGI9MDtiPGU7YisrKWY9Z1tiXSxkPWEubGFuZy5lbGVtZW50c3BhdGguZWxlVGl0bGUucmVwbGFjZSgvJTEvLGYpLGY9eC5vdXRwdXQoe2lkOnErYixsYWJlbDpkLHRleHQ6Zixqc1RpdGxlOlwiamF2YXNjcmlwdDp2b2lkKCdcIitmK1wiJylcIixpbmRleDpiLGtleURvd25Gbjp3LGNsaWNrRm46dn0pLGMudW5zaGlmdChmKTtufHwobj1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHApKTtnPW47Zy5zZXRIdG1sKGMuam9pbihcIlwiKSsnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9wYXRoX2VtcHR5XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2UnKTtcclxuYS5maXJlKFwiZWxlbWVudHNQYXRoVXBkYXRlXCIse3NwYWNlOmd9KX0pO2Eub24oXCJyZWFkT25seVwiLG0pO2Eub24oXCJjb250ZW50RG9tVW5sb2FkXCIsbSk7YS5hZGRDb21tYW5kKFwiZWxlbWVudHNQYXRoRm9jdXNcIix5LnRvb2xiYXJGb2N1cyk7YS5zZXRLZXlzdHJva2UoQ0tFRElUT1IuQUxUKzEyMixcImVsZW1lbnRzUGF0aEZvY3VzXCIpfXZhciB5PXt0b29sYmFyRm9jdXM6e2VkaXRvckZvY3VzOiExLHJlYWRPbmx5OjEsZXhlYzpmdW5jdGlvbihhKXsoYT1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGEuXy5lbGVtZW50c1BhdGguaWRCYXNlK1wiMFwiKSkmJmEuZm9jdXMoQ0tFRElUT1IuZW52LmllfHxDS0VESVRPUi5lbnYuYWlyKX19fSxkPVwiXCI7Q0tFRElUT1IuZW52LmdlY2tvJiZDS0VESVRPUi5lbnYubWFjJiYoZCs9JyBvbmtleXByZXNzXFx4M2RcInJldHVybiBmYWxzZTtcIicpO0NLRURJVE9SLmVudi5nZWNrbyYmKGQrPScgb25ibHVyXFx4M2RcInRoaXMuc3R5bGUuY3NzVGV4dCBcXHgzZCB0aGlzLnN0eWxlLmNzc1RleHQ7XCInKTtcclxudmFyIHg9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJwYXRoSXRlbVwiLCdcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGhyZWZcXHgzZFwie2pzVGl0bGV9XCIgdGFiaW5kZXhcXHgzZFwiLTFcIiBjbGFzc1xceDNkXCJja2VfcGF0aF9pdGVtXCIgdGl0bGVcXHgzZFwie2xhYmVsfVwiJytkKycgaGlkZWZvY3VzXFx4M2RcInRydWVcIiAgb25rZXlkb3duXFx4M2RcInJldHVybiBDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2tleURvd25Gbn0se2luZGV4fSwgZXZlbnQgKTtcIiBvbmNsaWNrXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0se2luZGV4fSk7IHJldHVybiBmYWxzZTtcIiByb2xlXFx4M2RcImJ1dHRvblwiIGFyaWEtbGFiZWxcXHgzZFwie2xhYmVsfVwiXFx4M2V7dGV4dH1cXHgzYy9hXFx4M2UnKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImVsZW1lbnRzcGF0aFwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuXy5lbGVtZW50c1BhdGg9e2lkQmFzZTpcImNrZV9lbGVtZW50c3BhdGhfXCIrQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpK1xyXG5cIl9cIixmaWx0ZXJzOltdfTthLm9uKFwidWlTcGFjZVwiLGZ1bmN0aW9uKGQpe1wiYm90dG9tXCI9PWQuZGF0YS5zcGFjZSYmcShhLGQuZGF0YSl9KX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcShiLGQsYSl7YT1iLmNvbmZpZy5mb3JjZUVudGVyTW9kZXx8YTtcInd5c2l3eWdcIj09Yi5tb2RlJiYoZHx8KGQ9Yi5hY3RpdmVFbnRlck1vZGUpLGIuZWxlbWVudFBhdGgoKS5pc0NvbnRleHRGb3IoXCJwXCIpfHwoZD1DS0VESVRPUi5FTlRFUl9CUixhPTEpLGIuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxkPT1DS0VESVRPUi5FTlRFUl9CUj90KGIsZCxudWxsLGEpOnUoYixkLG51bGwsYSksYi5maXJlKFwic2F2ZVNuYXBzaG90XCIpKX1mdW5jdGlvbiB2KGIpe2I9Yi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoITApO2Zvcih2YXIgZD1iLmxlbmd0aC0xOzA8ZDtkLS0pYltkXS5kZWxldGVDb250ZW50cygpO3JldHVybiBiWzBdfWZ1bmN0aW9uIHkoYil7dmFyIGQ9Yi5zdGFydENvbnRhaW5lci5nZXRBc2NlbmRhbnQoZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcInRydWVcIj09YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIil9LFxyXG4hMCk7aWYoYi5yb290LmVxdWFscyhkKSlyZXR1cm4gYjtkPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoZCk7ZC5tb3ZlVG9SYW5nZShiKTtyZXR1cm4gZH1DS0VESVRPUi5wbHVnaW5zLmFkZChcImVudGVya2V5XCIse2luaXQ6ZnVuY3Rpb24oYil7Yi5hZGRDb21tYW5kKFwiZW50ZXJcIix7bW9kZXM6e3d5c2l3eWc6MX0sZWRpdG9yRm9jdXM6ITEsZXhlYzpmdW5jdGlvbihiKXtxKGIpfX0pO2IuYWRkQ29tbWFuZChcInNoaWZ0RW50ZXJcIix7bW9kZXM6e3d5c2l3eWc6MX0sZWRpdG9yRm9jdXM6ITEsZXhlYzpmdW5jdGlvbihiKXtxKGIsYi5hY3RpdmVTaGlmdEVudGVyTW9kZSwxKX19KTtiLnNldEtleXN0cm9rZShbWzEzLFwiZW50ZXJcIl0sW0NLRURJVE9SLlNISUZUKzEzLFwic2hpZnRFbnRlclwiXV0pfX0pO3ZhciB6PUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxBPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKTtDS0VESVRPUi5wbHVnaW5zLmVudGVya2V5PXtlbnRlckJsb2NrOmZ1bmN0aW9uKGIsXHJcbmQsYSxoKXtpZihhPWF8fHYoYikpe2E9eShhKTt2YXIgZj1hLmRvY3VtZW50LGs9YS5jaGVja1N0YXJ0T2ZCbG9jaygpLG09YS5jaGVja0VuZE9mQmxvY2soKSxsPWIuZWxlbWVudFBhdGgoYS5zdGFydENvbnRhaW5lciksYz1sLmJsb2NrLG49ZD09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCIsZTtpZihrJiZtKXtpZihjJiYoYy5pcyhcImxpXCIpfHxjLmdldFBhcmVudCgpLmlzKFwibGlcIikpKXtjLmlzKFwibGlcIil8fChjPWMuZ2V0UGFyZW50KCkpO2E9Yy5nZXRQYXJlbnQoKTtlPWEuZ2V0UGFyZW50KCk7aD0hYy5oYXNQcmV2aW91cygpO3ZhciBwPSFjLmhhc05leHQoKSxuPWIuZ2V0U2VsZWN0aW9uKCksZz1uLmNyZWF0ZUJvb2ttYXJrcygpLGs9Yy5nZXREaXJlY3Rpb24oMSksbT1jLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLHI9Yy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSxxPWUuZ2V0RGlyZWN0aW9uKDEpIT1rO2I9Yi5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSfHxxfHxyfHxtO1xyXG5pZihlLmlzKFwibGlcIikpaHx8cD8oaCYmcCYmYS5yZW1vdmUoKSxjW3A/XCJpbnNlcnRBZnRlclwiOlwiaW5zZXJ0QmVmb3JlXCJdKGUpKTpjLmJyZWFrUGFyZW50KGUpO2Vsc2V7aWYoYilpZihsLmJsb2NrLmlzKFwibGlcIik/KGU9Zi5jcmVhdGVFbGVtZW50KGQ9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIikscSYmZS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixrKSxyJiZlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsciksbSYmZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLG0pLGMubW92ZUNoaWxkcmVuKGUpKTplPWwuYmxvY2ssaHx8cCllW2g/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGEpO2Vsc2UgYy5icmVha1BhcmVudChhKSxlLmluc2VydEFmdGVyKGEpO2Vsc2UgaWYoYy5hcHBlbmRCb2d1cyghMCksaHx8cClmb3IoO2Y9Y1toP1wiZ2V0Rmlyc3RcIjpcImdldExhc3RcIl0oKTspZltoP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShhKTtlbHNlIGZvcihjLmJyZWFrUGFyZW50KGEpO2Y9Yy5nZXRMYXN0KCk7KWYuaW5zZXJ0QWZ0ZXIoYSk7XHJcbmMucmVtb3ZlKCl9bi5zZWxlY3RCb29rbWFya3MoZyk7cmV0dXJufWlmKGMmJmMuZ2V0UGFyZW50KCkuaXMoXCJibG9ja3F1b3RlXCIpKXtjLmJyZWFrUGFyZW50KGMuZ2V0UGFyZW50KCkpO2MuZ2V0UHJldmlvdXMoKS5nZXRGaXJzdChDS0VESVRPUi5kb20ud2Fsa2VyLmludmlzaWJsZSgxKSl8fGMuZ2V0UHJldmlvdXMoKS5yZW1vdmUoKTtjLmdldE5leHQoKS5nZXRGaXJzdChDS0VESVRPUi5kb20ud2Fsa2VyLmludmlzaWJsZSgxKSl8fGMuZ2V0TmV4dCgpLnJlbW92ZSgpO2EubW92ZVRvRWxlbWVudEVkaXRTdGFydChjKTthLnNlbGVjdCgpO3JldHVybn19ZWxzZSBpZihjJiZjLmlzKFwicHJlXCIpJiYhbSl7dChiLGQsYSxoKTtyZXR1cm59aWYoaz1hLnNwbGl0QmxvY2sobikpe2Q9ay5wcmV2aW91c0Jsb2NrO2M9ay5uZXh0QmxvY2s7bD1rLndhc1N0YXJ0T2ZCbG9jaztiPWsud2FzRW5kT2ZCbG9jaztjPyhnPWMuZ2V0UGFyZW50KCksZy5pcyhcImxpXCIpJiYoYy5icmVha1BhcmVudChnKSxcclxuYy5tb3ZlKGMuZ2V0TmV4dCgpLDEpKSk6ZCYmKGc9ZC5nZXRQYXJlbnQoKSkmJmcuaXMoXCJsaVwiKSYmKGQuYnJlYWtQYXJlbnQoZyksZz1kLmdldE5leHQoKSxhLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoZyksZC5tb3ZlKGQuZ2V0UHJldmlvdXMoKSkpO2lmKGx8fGIpe2lmKGQpe2lmKGQuaXMoXCJsaVwiKXx8IXcudGVzdChkLmdldE5hbWUoKSkmJiFkLmlzKFwicHJlXCIpKWU9ZC5jbG9uZSgpfWVsc2UgYyYmKGU9Yy5jbG9uZSgpKTtlP2gmJiFlLmlzKFwibGlcIikmJmUucmVuYW1lTm9kZShuKTpnJiZnLmlzKFwibGlcIik/ZT1nOihlPWYuY3JlYXRlRWxlbWVudChuKSxkJiYocD1kLmdldERpcmVjdGlvbigpKSYmZS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixwKSk7aWYoZj1rLmVsZW1lbnRQYXRoKWZvcihoPTAsbj1mLmVsZW1lbnRzLmxlbmd0aDtoPG47aCsrKXtnPWYuZWxlbWVudHNbaF07aWYoZy5lcXVhbHMoZi5ibG9jayl8fGcuZXF1YWxzKGYuYmxvY2tMaW1pdCkpYnJlYWs7Q0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVtnLmdldE5hbWUoKV0mJlxyXG4oZz1nLmNsb25lKCksZS5tb3ZlQ2hpbGRyZW4oZyksZS5hcHBlbmQoZykpfWUuYXBwZW5kQm9ndXMoKTtlLmdldFBhcmVudCgpfHxhLmluc2VydE5vZGUoZSk7ZS5pcyhcImxpXCIpJiZlLnJlbW92ZUF0dHJpYnV0ZShcInZhbHVlXCIpOyFDS0VESVRPUi5lbnYuaWV8fCFsfHxiJiZkLmdldENoaWxkQ291bnQoKXx8KGEubW92ZVRvRWxlbWVudEVkaXRTdGFydChiP2Q6ZSksYS5zZWxlY3QoKSk7YS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGwmJiFiP2M6ZSl9ZWxzZSBjLmlzKFwibGlcIikmJihlPWEuY2xvbmUoKSxlLnNlbGVjdE5vZGVDb250ZW50cyhjKSxlPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpLGUuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiEoQShhKXx8eihhKXx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRpbmxpbmUmJiEoYS5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGVtcHR5KSl9LChnPWUubmV4dCgpKSYmXHJcbmcudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZnLmlzKFwidWxcIixcIm9sXCIpJiYoQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXI/Zi5jcmVhdGVFbGVtZW50KFwiYnJcIik6Zi5jcmVhdGVUZXh0KFwiwqBcIikpLmluc2VydEJlZm9yZShnKSksYyYmYS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGMpO2Euc2VsZWN0KCk7YS5zY3JvbGxJbnRvVmlldygpfX19LGVudGVyQnI6ZnVuY3Rpb24oYixkLGEsaCl7aWYoYT1hfHx2KGIpKXt2YXIgZj1hLmRvY3VtZW50LGs9YS5jaGVja0VuZE9mQmxvY2soKSxtPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYi5nZXRTZWxlY3Rpb24oKS5nZXRTdGFydEVsZW1lbnQoKSksbD1tLmJsb2NrLGM9bCYmbS5ibG9jay5nZXROYW1lKCk7aHx8XCJsaVwiIT1jPyghaCYmayYmdy50ZXN0KGMpPyhrPWwuZ2V0RGlyZWN0aW9uKCkpPyhmPWYuY3JlYXRlRWxlbWVudChcImRpdlwiKSxmLnNldEF0dHJpYnV0ZShcImRpclwiLGspLGYuaW5zZXJ0QWZ0ZXIobCksYS5zZXRTdGFydChmLFxyXG4wKSk6KGYuY3JlYXRlRWxlbWVudChcImJyXCIpLmluc2VydEFmdGVyKGwpLENLRURJVE9SLmVudi5nZWNrbyYmZi5jcmVhdGVUZXh0KFwiXCIpLmluc2VydEFmdGVyKGwpLGEuc2V0U3RhcnRBdChsLmdldE5leHQoKSxDS0VESVRPUi5lbnYuaWU/Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUOkNLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSk6KGI9XCJwcmVcIj09YyYmQ0tFRElUT1IuZW52LmllJiY4PkNLRURJVE9SLmVudi52ZXJzaW9uP2YuY3JlYXRlVGV4dChcIlxcclwiKTpmLmNyZWF0ZUVsZW1lbnQoXCJiclwiKSxhLmRlbGV0ZUNvbnRlbnRzKCksYS5pbnNlcnROb2RlKGIpLENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyPyhmLmNyZWF0ZVRleHQoXCLvu79cIikuaW5zZXJ0QWZ0ZXIoYiksayYmKGx8fG0uYmxvY2tMaW1pdCkuYXBwZW5kQm9ndXMoKSxiLmdldE5leHQoKS4kLm5vZGVWYWx1ZT1cIlwiLGEuc2V0U3RhcnRBdChiLmdldE5leHQoKSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCkpOlxyXG5hLnNldFN0YXJ0QXQoYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKSxhLmNvbGxhcHNlKCEwKSxhLnNlbGVjdCgpLGEuc2Nyb2xsSW50b1ZpZXcoKSk6dShiLGQsYSxoKX19fTt2YXIgeD1DS0VESVRPUi5wbHVnaW5zLmVudGVya2V5LHQ9eC5lbnRlckJyLHU9eC5lbnRlckJsb2NrLHc9L15oWzEtNl0kL30pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gayhiLGYpe3ZhciBnPXt9LGM9W10sZT17bmJzcDpcIsKgXCIsc2h5Olwiwq1cIixndDpcIlxceDNlXCIsbHQ6XCJcXHgzY1wiLGFtcDpcIlxceDI2XCIsYXBvczpcIidcIixxdW90OidcIid9O2I9Yi5yZXBsYWNlKC9cXGIobmJzcHxzaHl8Z3R8bHR8YW1wfGFwb3N8cXVvdCkoPzosfCQpL2csZnVuY3Rpb24oYixhKXt2YXIgZD1mP1wiXFx4MjZcIithK1wiO1wiOmVbYV07Z1tkXT1mP2VbYV06XCJcXHgyNlwiK2ErXCI7XCI7Yy5wdXNoKGQpO3JldHVyblwiXCJ9KTtpZighZiYmYil7Yj1iLnNwbGl0KFwiLFwiKTt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQ7YS5pbm5lckhUTUw9XCJcXHgyNlwiK2Iuam9pbihcIjtcXHgyNlwiKStcIjtcIjtkPWEuaW5uZXJIVE1MO2E9bnVsbDtmb3IoYT0wO2E8ZC5sZW5ndGg7YSsrKXt2YXIgaD1kLmNoYXJBdChhKTtnW2hdPVwiXFx4MjZcIitiW2FdK1wiO1wiO2MucHVzaChoKX19Zy5yZWdleD1jLmpvaW4oZj9cInxcIjpcIlwiKTtyZXR1cm4gZ31DS0VESVRPUi5wbHVnaW5zLmFkZChcImVudGl0aWVzXCIsXHJcbnthZnRlckluaXQ6ZnVuY3Rpb24oYil7ZnVuY3Rpb24gZihhKXtyZXR1cm4gaFthXX1mdW5jdGlvbiBnKGIpe3JldHVyblwiZm9yY2VcIiE9Yy5lbnRpdGllc19wcm9jZXNzTnVtZXJpY2FsJiZhW2JdP2FbYl06XCJcXHgyNiNcIitiLmNoYXJDb2RlQXQoMCkrXCI7XCJ9dmFyIGM9Yi5jb25maWc7aWYoYj0oYj1iLmRhdGFQcm9jZXNzb3IpJiZiLmh0bWxGaWx0ZXIpe3ZhciBlPVtdOyExIT09Yy5iYXNpY0VudGl0aWVzJiZlLnB1c2goXCJuYnNwLGd0LGx0LGFtcFwiKTtjLmVudGl0aWVzJiYoZS5sZW5ndGgmJmUucHVzaChcInF1b3QsaWV4Y2wsY2VudCxwb3VuZCxjdXJyZW4seWVuLGJydmJhcixzZWN0LHVtbCxjb3B5LG9yZGYsbGFxdW8sbm90LHNoeSxyZWcsbWFjcixkZWcscGx1c21uLHN1cDIsc3VwMyxhY3V0ZSxtaWNybyxwYXJhLG1pZGRvdCxjZWRpbCxzdXAxLG9yZG0scmFxdW8sZnJhYzE0LGZyYWMxMixmcmFjMzQsaXF1ZXN0LHRpbWVzLGRpdmlkZSxmbm9mLGJ1bGwsaGVsbGlwLHByaW1lLFByaW1lLG9saW5lLGZyYXNsLHdlaWVycCxpbWFnZSxyZWFsLHRyYWRlLGFsZWZzeW0sbGFycix1YXJyLHJhcnIsZGFycixoYXJyLGNyYXJyLGxBcnIsdUFycixyQXJyLGRBcnIsaEFycixmb3JhbGwscGFydCxleGlzdCxlbXB0eSxuYWJsYSxpc2luLG5vdGluLG5pLHByb2Qsc3VtLG1pbnVzLGxvd2FzdCxyYWRpYyxwcm9wLGluZmluLGFuZyxhbmQsb3IsY2FwLGN1cCxpbnQsdGhlcmU0LHNpbSxjb25nLGFzeW1wLG5lLGVxdWl2LGxlLGdlLHN1YixzdXAsbnN1YixzdWJlLHN1cGUsb3BsdXMsb3RpbWVzLHBlcnAsc2RvdCxsY2VpbCxyY2VpbCxsZmxvb3IscmZsb29yLGxhbmcscmFuZyxsb3osc3BhZGVzLGNsdWJzLGhlYXJ0cyxkaWFtcyxjaXJjLHRpbGRlLGVuc3AsZW1zcCx0aGluc3Asenduaix6d2osbHJtLHJsbSxuZGFzaCxtZGFzaCxsc3F1byxyc3F1byxzYnF1byxsZHF1byxyZHF1byxiZHF1byxkYWdnZXIsRGFnZ2VyLHBlcm1pbCxsc2FxdW8scnNhcXVvLGV1cm9cIiksXHJcbmMuZW50aXRpZXNfbGF0aW4mJmUucHVzaChcIkFncmF2ZSxBYWN1dGUsQWNpcmMsQXRpbGRlLEF1bWwsQXJpbmcsQUVsaWcsQ2NlZGlsLEVncmF2ZSxFYWN1dGUsRWNpcmMsRXVtbCxJZ3JhdmUsSWFjdXRlLEljaXJjLEl1bWwsRVRILE50aWxkZSxPZ3JhdmUsT2FjdXRlLE9jaXJjLE90aWxkZSxPdW1sLE9zbGFzaCxVZ3JhdmUsVWFjdXRlLFVjaXJjLFV1bWwsWWFjdXRlLFRIT1JOLHN6bGlnLGFncmF2ZSxhYWN1dGUsYWNpcmMsYXRpbGRlLGF1bWwsYXJpbmcsYWVsaWcsY2NlZGlsLGVncmF2ZSxlYWN1dGUsZWNpcmMsZXVtbCxpZ3JhdmUsaWFjdXRlLGljaXJjLGl1bWwsZXRoLG50aWxkZSxvZ3JhdmUsb2FjdXRlLG9jaXJjLG90aWxkZSxvdW1sLG9zbGFzaCx1Z3JhdmUsdWFjdXRlLHVjaXJjLHV1bWwseWFjdXRlLHRob3JuLHl1bWwsT0VsaWcsb2VsaWcsU2Nhcm9uLHNjYXJvbixZdW1sXCIpLGMuZW50aXRpZXNfZ3JlZWsmJmUucHVzaChcIkFscGhhLEJldGEsR2FtbWEsRGVsdGEsRXBzaWxvbixaZXRhLEV0YSxUaGV0YSxJb3RhLEthcHBhLExhbWJkYSxNdSxOdSxYaSxPbWljcm9uLFBpLFJobyxTaWdtYSxUYXUsVXBzaWxvbixQaGksQ2hpLFBzaSxPbWVnYSxhbHBoYSxiZXRhLGdhbW1hLGRlbHRhLGVwc2lsb24semV0YSxldGEsdGhldGEsaW90YSxrYXBwYSxsYW1iZGEsbXUsbnUseGksb21pY3JvbixwaSxyaG8sc2lnbWFmLHNpZ21hLHRhdSx1cHNpbG9uLHBoaSxjaGkscHNpLG9tZWdhLHRoZXRhc3ltLHVwc2loLHBpdlwiKSxcclxuYy5lbnRpdGllc19hZGRpdGlvbmFsJiZlLnB1c2goYy5lbnRpdGllc19hZGRpdGlvbmFsKSk7dmFyIGE9ayhlLmpvaW4oXCIsXCIpKSxkPWEucmVnZXg/XCJbXCIrYS5yZWdleCtcIl1cIjpcImFeXCI7ZGVsZXRlIGEucmVnZXg7Yy5lbnRpdGllcyYmYy5lbnRpdGllc19wcm9jZXNzTnVtZXJpY2FsJiYoZD1cIlteIC1+XXxcIitkKTt2YXIgZD1uZXcgUmVnRXhwKGQsXCJnXCIpLGg9ayhcIm5ic3AsZ3QsbHQsYW1wLHNoeVwiLCEwKSxsPW5ldyBSZWdFeHAoaC5yZWdleCxcImdcIik7Yi5hZGRSdWxlcyh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGwsZikucmVwbGFjZShkLGcpfX0se2FwcGx5VG9BbGw6ITAsZXhjbHVkZU5lc3RlZEVkaXRhYmxlOiEwfSl9fX0pfSkoKTtDS0VESVRPUi5jb25maWcuYmFzaWNFbnRpdGllcz0hMDtDS0VESVRPUi5jb25maWcuZW50aXRpZXM9ITA7Q0tFRElUT1IuY29uZmlnLmVudGl0aWVzX2xhdGluPSEwO0NLRURJVE9SLmNvbmZpZy5lbnRpdGllc19ncmVlaz0hMDtcclxuQ0tFRElUT1IuY29uZmlnLmVudGl0aWVzX2FkZGl0aW9uYWw9XCIjMzlcIjtDS0VESVRPUi5wbHVnaW5zLmFkZChcInBvcHVwXCIpO1xyXG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7cG9wdXA6ZnVuY3Rpb24oZSxhLGIsZCl7YT1hfHxcIjgwJVwiO2I9Ynx8XCI3MCVcIjtcInN0cmluZ1wiPT10eXBlb2YgYSYmMTxhLmxlbmd0aCYmXCIlXCI9PWEuc3Vic3RyKGEubGVuZ3RoLTEsMSkmJihhPXBhcnNlSW50KHdpbmRvdy5zY3JlZW4ud2lkdGgqcGFyc2VJbnQoYSwxMCkvMTAwLDEwKSk7XCJzdHJpbmdcIj09dHlwZW9mIGImJjE8Yi5sZW5ndGgmJlwiJVwiPT1iLnN1YnN0cihiLmxlbmd0aC0xLDEpJiYoYj1wYXJzZUludCh3aW5kb3cuc2NyZWVuLmhlaWdodCpwYXJzZUludChiLDEwKS8xMDAsMTApKTs2NDA+YSYmKGE9NjQwKTs0MjA+YiYmKGI9NDIwKTt2YXIgZj1wYXJzZUludCgod2luZG93LnNjcmVlbi5oZWlnaHQtYikvMiwxMCksZz1wYXJzZUludCgod2luZG93LnNjcmVlbi53aWR0aC1hKS8yLDEwKTtkPShkfHxcImxvY2F0aW9uXFx4M2RubyxtZW51YmFyXFx4M2Rubyx0b29sYmFyXFx4M2RubyxkZXBlbmRlbnRcXHgzZHllcyxtaW5pbWl6YWJsZVxceDNkbm8sbW9kYWxcXHgzZHllcyxhbHdheXNSYWlzZWRcXHgzZHllcyxyZXNpemFibGVcXHgzZHllcyxzY3JvbGxiYXJzXFx4M2R5ZXNcIikrXCIsd2lkdGhcXHgzZFwiK1xyXG5hK1wiLGhlaWdodFxceDNkXCIrYitcIix0b3BcXHgzZFwiK2YrXCIsbGVmdFxceDNkXCIrZzt2YXIgYz13aW5kb3cub3BlbihcIlwiLG51bGwsZCwhMCk7aWYoIWMpcmV0dXJuITE7dHJ5ey0xPT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIiBjaHJvbWUvXCIpJiYoYy5tb3ZlVG8oZyxmKSxjLnJlc2l6ZVRvKGEsYikpLGMuZm9jdXMoKSxjLmxvY2F0aW9uLmhyZWY9ZX1jYXRjaChoKXt3aW5kb3cub3BlbihlLG51bGwsZCwhMCl9cmV0dXJuITB9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhhLGMpe3ZhciBkPVtdO2lmKGMpZm9yKHZhciBiIGluIGMpZC5wdXNoKGIrXCJcXHgzZFwiK2VuY29kZVVSSUNvbXBvbmVudChjW2JdKSk7ZWxzZSByZXR1cm4gYTtyZXR1cm4gYSsoLTEhPWEuaW5kZXhPZihcIj9cIik/XCJcXHgyNlwiOlwiP1wiKStkLmpvaW4oXCJcXHgyNlwiKX1mdW5jdGlvbiBrKGEpe2ErPVwiXCI7cmV0dXJuIGEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSl9ZnVuY3Rpb24gbSgpe3ZhciBhPXRoaXMuZ2V0RGlhbG9nKCksYz1hLmdldFBhcmVudEVkaXRvcigpO2MuXy5maWxlYnJvd3NlclNlPXRoaXM7dmFyIGQ9Yy5jb25maWdbXCJmaWxlYnJvd3NlclwiK2soYS5nZXROYW1lKCkpK1wiV2luZG93V2lkdGhcIl18fGMuY29uZmlnLmZpbGVicm93c2VyV2luZG93V2lkdGh8fFwiODAlXCIsYT1jLmNvbmZpZ1tcImZpbGVicm93c2VyXCIrayhhLmdldE5hbWUoKSkrXCJXaW5kb3dIZWlnaHRcIl18fGMuY29uZmlnLmZpbGVicm93c2VyV2luZG93SGVpZ2h0fHxcclxuXCI3MCVcIixiPXRoaXMuZmlsZWJyb3dzZXIucGFyYW1zfHx7fTtiLkNLRWRpdG9yPWMubmFtZTtiLkNLRWRpdG9yRnVuY051bT1jLl8uZmlsZWJyb3dzZXJGbjtiLmxhbmdDb2RlfHwoYi5sYW5nQ29kZT1jLmxhbmdDb2RlKTtiPWcodGhpcy5maWxlYnJvd3Nlci51cmwsYik7Yy5wb3B1cChiLGQsYSxjLmNvbmZpZy5maWxlYnJvd3NlcldpbmRvd0ZlYXR1cmVzfHxjLmNvbmZpZy5maWxlQnJvd3NlcldpbmRvd0ZlYXR1cmVzKX1mdW5jdGlvbiBuKCl7dmFyIGE9dGhpcy5nZXREaWFsb2coKTthLmdldFBhcmVudEVkaXRvcigpLl8uZmlsZWJyb3dzZXJTZT10aGlzO3JldHVybiBhLmdldENvbnRlbnRFbGVtZW50KHRoaXNbXCJmb3JcIl1bMF0sdGhpc1tcImZvclwiXVsxXSkuZ2V0SW5wdXRFbGVtZW50KCkuJC52YWx1ZSYmYS5nZXRDb250ZW50RWxlbWVudCh0aGlzW1wiZm9yXCJdWzBdLHRoaXNbXCJmb3JcIl1bMV0pLmdldEFjdGlvbigpPyEwOiExfWZ1bmN0aW9uIHAoYSxjLGQpe3ZhciBiPWQucGFyYW1zfHxcclxue307Yi5DS0VkaXRvcj1hLm5hbWU7Yi5DS0VkaXRvckZ1bmNOdW09YS5fLmZpbGVicm93c2VyRm47Yi5sYW5nQ29kZXx8KGIubGFuZ0NvZGU9YS5sYW5nQ29kZSk7Yy5hY3Rpb249ZyhkLnVybCxiKTtjLmZpbGVicm93c2VyPWR9ZnVuY3Rpb24gbChhLGMsZCxiKXtpZihiJiZiLmxlbmd0aClmb3IodmFyIGUsZz1iLmxlbmd0aDtnLS07KWlmKGU9YltnXSxcImhib3hcIiE9ZS50eXBlJiZcInZib3hcIiE9ZS50eXBlJiZcImZpZWxkc2V0XCIhPWUudHlwZXx8bChhLGMsZCxlLmNoaWxkcmVuKSxlLmZpbGVicm93c2VyKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlLmZpbGVicm93c2VyJiYoZS5maWxlYnJvd3Nlcj17YWN0aW9uOlwiZmlsZUJ1dHRvblwiPT1lLnR5cGU/XCJRdWlja1VwbG9hZFwiOlwiQnJvd3NlXCIsdGFyZ2V0OmUuZmlsZWJyb3dzZXJ9KSxcIkJyb3dzZVwiPT1lLmZpbGVicm93c2VyLmFjdGlvbil7dmFyIGY9ZS5maWxlYnJvd3Nlci51cmw7dm9pZCAwPT09ZiYmKGY9YS5jb25maWdbXCJmaWxlYnJvd3NlclwiK1xyXG5rKGMpK1wiQnJvd3NlVXJsXCJdLHZvaWQgMD09PWYmJihmPWEuY29uZmlnLmZpbGVicm93c2VyQnJvd3NlVXJsKSk7ZiYmKGUub25DbGljaz1tLGUuZmlsZWJyb3dzZXIudXJsPWYsZS5oaWRkZW49ITEpfWVsc2UgaWYoXCJRdWlja1VwbG9hZFwiPT1lLmZpbGVicm93c2VyLmFjdGlvbiYmZVtcImZvclwiXSYmKGY9ZS5maWxlYnJvd3Nlci51cmwsdm9pZCAwPT09ZiYmKGY9YS5jb25maWdbXCJmaWxlYnJvd3NlclwiK2soYykrXCJVcGxvYWRVcmxcIl0sdm9pZCAwPT09ZiYmKGY9YS5jb25maWcuZmlsZWJyb3dzZXJVcGxvYWRVcmwpKSxmKSl7dmFyIGg9ZS5vbkNsaWNrO2Uub25DbGljaz1mdW5jdGlvbihhKXt2YXIgYj1hLnNlbmRlcjtpZihoJiYhMT09PWguY2FsbChiLGEpKXJldHVybiExO2lmKG4uY2FsbChiLGEpKXthPWIuZ2V0RGlhbG9nKCkuZ2V0Q29udGVudEVsZW1lbnQodGhpc1tcImZvclwiXVswXSx0aGlzW1wiZm9yXCJdWzFdKS5nZXRJbnB1dEVsZW1lbnQoKTtpZihiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhLiQuZm9ybSkpKGE9XHJcbmIuJC5lbGVtZW50cy5ja0NzcmZUb2tlbik/YT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6KGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiaW5wdXRcIiksYS5zZXRBdHRyaWJ1dGVzKHtuYW1lOlwiY2tDc3JmVG9rZW5cIix0eXBlOlwiaGlkZGVuXCJ9KSxiLmFwcGVuZChhKSksYS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLENLRURJVE9SLnRvb2xzLmdldENzcmZUb2tlbigpKTtyZXR1cm4hMH1yZXR1cm4hMX07ZS5maWxlYnJvd3Nlci51cmw9ZjtlLmhpZGRlbj0hMTtwKGEsZC5nZXRDb250ZW50cyhlW1wiZm9yXCJdWzBdKS5nZXQoZVtcImZvclwiXVsxXSksZS5maWxlYnJvd3Nlcil9fWZ1bmN0aW9uIGgoYSxjLGQpe2lmKC0xIT09ZC5pbmRleE9mKFwiO1wiKSl7ZD1kLnNwbGl0KFwiO1wiKTtmb3IodmFyIGI9MDtiPGQubGVuZ3RoO2IrKylpZihoKGEsYyxkW2JdKSlyZXR1cm4hMDtyZXR1cm4hMX1yZXR1cm4oYT1hLmdldENvbnRlbnRzKGMpLmdldChkKS5maWxlYnJvd3NlcikmJmEudXJsfWZ1bmN0aW9uIHEoYSxcclxuYyl7dmFyIGQ9dGhpcy5fLmZpbGVicm93c2VyU2UuZ2V0RGlhbG9nKCksYj10aGlzLl8uZmlsZWJyb3dzZXJTZVtcImZvclwiXSxlPXRoaXMuXy5maWxlYnJvd3NlclNlLmZpbGVicm93c2VyLm9uU2VsZWN0O2ImJmQuZ2V0Q29udGVudEVsZW1lbnQoYlswXSxiWzFdKS5yZXNldCgpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGN8fCExIT09Yy5jYWxsKHRoaXMuXy5maWxlYnJvd3NlclNlKSlpZighZXx8ITEhPT1lLmNhbGwodGhpcy5fLmZpbGVicm93c2VyU2UsYSxjKSlpZihcInN0cmluZ1wiPT10eXBlb2YgYyYmYyYmYWxlcnQoYyksYSYmKGI9dGhpcy5fLmZpbGVicm93c2VyU2UsZD1iLmdldERpYWxvZygpLGI9Yi5maWxlYnJvd3Nlci50YXJnZXR8fG51bGwpKWlmKGI9Yi5zcGxpdChcIjpcIiksZT1kLmdldENvbnRlbnRFbGVtZW50KGJbMF0sYlsxXSkpZS5zZXRWYWx1ZShhKSxkLnNlbGVjdFBhZ2UoYlswXSl9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmaWxlYnJvd3NlclwiLHtyZXF1aXJlczpcInBvcHVwXCIsXHJcbmluaXQ6ZnVuY3Rpb24oYSl7YS5fLmZpbGVicm93c2VyRm49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24ocSxhKTthLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24odGhpcy5fLmZpbGVicm93c2VyRm4pfSl9fSk7Q0tFRElUT1Iub24oXCJkaWFsb2dEZWZpbml0aW9uXCIsZnVuY3Rpb24oYSl7aWYoYS5lZGl0b3IucGx1Z2lucy5maWxlYnJvd3Nlcilmb3IodmFyIGM9YS5kYXRhLmRlZmluaXRpb24sZCxiPTA7YjxjLmNvbnRlbnRzLmxlbmd0aDsrK2IpaWYoZD1jLmNvbnRlbnRzW2JdKWwoYS5lZGl0b3IsYS5kYXRhLm5hbWUsYyxkLmVsZW1lbnRzKSxkLmhpZGRlbiYmZC5maWxlYnJvd3NlciYmKGQuaGlkZGVuPSFoKGMsZC5pZCxkLmZpbGVicm93c2VyKSl9KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmaW5kXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJmaW5kXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJmaW5kXCIpKTtiLmNhblVuZG89ITE7Yi5yZWFkT25seT0xO2EuYWRkQ29tbWFuZChcInJlcGxhY2VcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcInJlcGxhY2VcIikpLmNhblVuZG89ITE7YS51aS5hZGRCdXR0b24mJihhLnVpLmFkZEJ1dHRvbihcIkZpbmRcIix7bGFiZWw6YS5sYW5nLmZpbmQuZmluZCxjb21tYW5kOlwiZmluZFwiLHRvb2xiYXI6XCJmaW5kLDEwXCJ9KSxhLnVpLmFkZEJ1dHRvbihcIlJlcGxhY2VcIix7bGFiZWw6YS5sYW5nLmZpbmQucmVwbGFjZSxjb21tYW5kOlwicmVwbGFjZVwiLHRvb2xiYXI6XCJmaW5kLDIwXCJ9KSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImZpbmRcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2ZpbmQuanNcIik7Q0tFRElUT1IuZGlhbG9nLmFkZChcInJlcGxhY2VcIix0aGlzLnBhdGgrXHJcblwiZGlhbG9ncy9maW5kLmpzXCIpfX0pO0NLRURJVE9SLmNvbmZpZy5maW5kX2hpZ2hsaWdodD17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e1wiYmFja2dyb3VuZC1jb2xvclwiOlwiIzAwNFwiLGNvbG9yOlwiI2ZmZlwifX07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWwuZXhlYyhhKSxkPWwuZXhlYyhiKTtpZihjKXtpZighY1syXSYmXCJweFwiPT1kWzJdKXJldHVybiBkWzFdO2lmKFwicHhcIj09Y1syXSYmIWRbMl0pcmV0dXJuIGRbMV0rXCJweFwifXJldHVybiBifXZhciBrPUNLRURJVE9SLmh0bWxQYXJzZXIuY3NzU3R5bGUsaD1DS0VESVRPUi50b29scy5jc3NMZW5ndGgsbD0vXigoPzpcXGQqKD86XFwuXFxkKykpfCg/OlxcZCspKSguKik/JC9pLG09e2VsZW1lbnRzOnskOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYXR0cmlidXRlcztpZigoYj0oYj0oYj1iJiZiW1wiZGF0YS1ja2UtcmVhbGVsZW1lbnRcIl0pJiZuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChkZWNvZGVVUklDb21wb25lbnQoYikpKSYmYi5jaGlsZHJlblswXSkmJmEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXJlc2l6YWJsZVwiXSl7dmFyIGM9KG5ldyBrKGEpKS5ydWxlczthPWIuYXR0cmlidXRlczt2YXIgZD1jLndpZHRoLFxyXG5jPWMuaGVpZ2h0O2QmJihhLndpZHRoPWcoYS53aWR0aCxkKSk7YyYmKGEuaGVpZ2h0PWcoYS5oZWlnaHQsYykpfXJldHVybiBifX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmFrZW9iamVjdHNcIix7aW5pdDpmdW5jdGlvbihhKXthLmZpbHRlci5hbGxvdyhcImltZ1shZGF0YS1ja2UtcmVhbGVsZW1lbnQsc3JjLGFsdCx0aXRsZV0oKil7Kn1cIixcImZha2VvYmplY3RzXCIpfSxhZnRlckluaXQ6ZnVuY3Rpb24oYSl7KGE9KGE9YS5kYXRhUHJvY2Vzc29yKSYmYS5odG1sRmlsdGVyKSYmYS5hZGRSdWxlcyhtLHthcHBseVRvQWxsOiEwfSl9fSk7Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5jcmVhdGVGYWtlRWxlbWVudD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmxhbmcuZmFrZW9iamVjdHMsZT1lW2NdfHxlLnVua25vd247Yj17XCJjbGFzc1wiOmIsXCJkYXRhLWNrZS1yZWFsZWxlbWVudFwiOmVuY29kZVVSSUNvbXBvbmVudChhLmdldE91dGVySHRtbCgpKSxcImRhdGEtY2tlLXJlYWwtbm9kZS10eXBlXCI6YS50eXBlLFxyXG5hbHQ6ZSx0aXRsZTplLGFsaWduOmEuZ2V0QXR0cmlidXRlKFwiYWxpZ25cIil8fFwiXCJ9O0NLRURJVE9SLmVudi5oY3x8KGIuc3JjPUNLRURJVE9SLnRvb2xzLnRyYW5zcGFyZW50SW1hZ2VEYXRhKTtjJiYoYltcImRhdGEtY2tlLXJlYWwtZWxlbWVudC10eXBlXCJdPWMpO2QmJihiW1wiZGF0YS1ja2UtcmVzaXphYmxlXCJdPWQsYz1uZXcgayxkPWEuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksYT1hLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSxkJiYoYy5ydWxlcy53aWR0aD1oKGQpKSxhJiYoYy5ydWxlcy5oZWlnaHQ9aChhKSksYy5wb3B1bGF0ZShiKSk7cmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiLHthdHRyaWJ1dGVzOmJ9KX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmxhbmcuZmFrZW9iamVjdHMsZT1lW2NdfHxlLnVua25vd24sZjtmPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO1xyXG5hLndyaXRlSHRtbChmKTtmPWYuZ2V0SHRtbCgpO2I9e1wiY2xhc3NcIjpiLFwiZGF0YS1ja2UtcmVhbGVsZW1lbnRcIjplbmNvZGVVUklDb21wb25lbnQoZiksXCJkYXRhLWNrZS1yZWFsLW5vZGUtdHlwZVwiOmEudHlwZSxhbHQ6ZSx0aXRsZTplLGFsaWduOmEuYXR0cmlidXRlcy5hbGlnbnx8XCJcIn07Q0tFRElUT1IuZW52LmhjfHwoYi5zcmM9Q0tFRElUT1IudG9vbHMudHJhbnNwYXJlbnRJbWFnZURhdGEpO2MmJihiW1wiZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGVcIl09Yyk7ZCYmKGJbXCJkYXRhLWNrZS1yZXNpemFibGVcIl09ZCxkPWEuYXR0cmlidXRlcyxhPW5ldyBrLGM9ZC53aWR0aCxkPWQuaGVpZ2h0LHZvaWQgMCE9PWMmJihhLnJ1bGVzLndpZHRoPWgoYykpLHZvaWQgMCE9PWQmJihhLnJ1bGVzLmhlaWdodD1oKGQpKSxhLnBvcHVsYXRlKGIpKTtyZXR1cm4gbmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChcImltZ1wiLGIpfTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLnJlc3RvcmVSZWFsRWxlbWVudD1cclxuZnVuY3Rpb24oYSl7aWYoYS5kYXRhKFwiY2tlLXJlYWwtbm9kZS10eXBlXCIpIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpcmV0dXJuIG51bGw7dmFyIGI9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoZGVjb2RlVVJJQ29tcG9uZW50KGEuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKSksdGhpcy5kb2N1bWVudCk7aWYoYS5kYXRhKFwiY2tlLXJlc2l6YWJsZVwiKSl7dmFyIGM9YS5nZXRTdHlsZShcIndpZHRoXCIpO2E9YS5nZXRTdHlsZShcImhlaWdodFwiKTtjJiZiLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsZyhiLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpLGMpKTthJiZiLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGcoYi5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiksYSkpfXJldHVybiBifX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChhKXthPWEuYXR0cmlidXRlcztyZXR1cm5cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCI9PWEudHlwZXx8Zi50ZXN0KGEuc3JjfHxcIlwiKX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGEuY3JlYXRlRmFrZVBhcnNlckVsZW1lbnQoYixcImNrZV9mbGFzaFwiLFwiZmxhc2hcIiwhMCl9dmFyIGY9L1xcLnN3Zig/OiR8XFw/KS9pO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmxhc2hcIix7cmVxdWlyZXM6XCJkaWFsb2csZmFrZW9iamVjdHNcIixvbkxvYWQ6ZnVuY3Rpb24oKXtDS0VESVRPUi5hZGRDc3MoXCJpbWcuY2tlX2ZsYXNoe2JhY2tncm91bmQtaW1hZ2U6IHVybChcIitDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiaW1hZ2VzL3BsYWNlaG9sZGVyLnBuZ1wiKStcIik7YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JvcmRlcjogMXB4IHNvbGlkICNhOWE5YTk7d2lkdGg6IDgwcHg7aGVpZ2h0OiA4MHB4O31cIil9LFxyXG5pbml0OmZ1bmN0aW9uKGEpe3ZhciBiPVwib2JqZWN0W2NsYXNzaWQsY29kZWJhc2UsaGVpZ2h0LGhzcGFjZSx2c3BhY2Usd2lkdGhdO3BhcmFtW25hbWUsdmFsdWVdO2VtYmVkW2hlaWdodCxoc3BhY2UscGx1Z2luc3BhZ2Usc3JjLHR5cGUsdnNwYWNlLHdpZHRoXVwiO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYSxcImZsYXNoXCIsXCJwcm9wZXJ0aWVzXCIpJiYoYis9XCI7b2JqZWN0W2FsaWduXTsgZW1iZWRbYWxsb3dzY3JpcHRhY2Nlc3MscXVhbGl0eSxzY2FsZSx3bW9kZV1cIik7Q0tFRElUT1IuZGlhbG9nLmlzVGFiRW5hYmxlZChhLFwiZmxhc2hcIixcImFkdmFuY2VkXCIpJiYoYis9XCI7b2JqZWN0W2lkXXsqfTsgZW1iZWRbYmdjb2xvcl17Kn0oKilcIik7YS5hZGRDb21tYW5kKFwiZmxhc2hcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImZsYXNoXCIse2FsbG93ZWRDb250ZW50OmIscmVxdWlyZWRDb250ZW50OlwiZW1iZWRcIn0pKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJGbGFzaFwiLFxyXG57bGFiZWw6YS5sYW5nLmNvbW1vbi5mbGFzaCxjb21tYW5kOlwiZmxhc2hcIix0b29sYmFyOlwiaW5zZXJ0LDIwXCJ9KTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiZmxhc2hcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2ZsYXNoLmpzXCIpO2EuYWRkTWVudUl0ZW1zJiZhLmFkZE1lbnVJdGVtcyh7Zmxhc2g6e2xhYmVsOmEubGFuZy5mbGFzaC5wcm9wZXJ0aWVzLGNvbW1hbmQ6XCJmbGFzaFwiLGdyb3VwOlwiZmxhc2hcIn19KTthLm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuZWxlbWVudDtiLmlzKFwiaW1nXCIpJiZcImZsYXNoXCI9PWIuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSYmKGEuZGF0YS5kaWFsb2c9XCJmbGFzaFwiKX0pO2EuY29udGV4dE1lbnUmJmEuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYSl7aWYoYSYmYS5pcyhcImltZ1wiKSYmIWEuaXNSZWFkT25seSgpJiZcImZsYXNoXCI9PWEuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSlyZXR1cm57Zmxhc2g6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfX0pfSxcclxuYWZ0ZXJJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YVByb2Nlc3NvcjsoYj1iJiZiLmRhdGFGaWx0ZXIpJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7XCJja2U6b2JqZWN0XCI6ZnVuY3Rpb24oYil7dmFyIGM9Yi5hdHRyaWJ1dGVzO2lmKCEoYy5jbGFzc2lkJiZTdHJpbmcoYy5jbGFzc2lkKS50b0xvd2VyQ2FzZSgpfHxkKGIpKSl7Zm9yKGM9MDtjPGIuY2hpbGRyZW4ubGVuZ3RoO2MrKylpZihcImNrZTplbWJlZFwiPT1iLmNoaWxkcmVuW2NdLm5hbWUpe2lmKCFkKGIuY2hpbGRyZW5bY10pKWJyZWFrO3JldHVybiBlKGEsYil9cmV0dXJuIG51bGx9cmV0dXJuIGUoYSxiKX0sXCJja2U6ZW1iZWRcIjpmdW5jdGlvbihiKXtyZXR1cm4gZChiKT9lKGEsYik6bnVsbH19fSw1KX19KX0pKCk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmNvbmZpZyx7Zmxhc2hFbWJlZFRhZ09ubHk6ITEsZmxhc2hBZGRFbWJlZFRhZzohMCxmbGFzaENvbnZlcnRPbkVkaXQ6ITF9KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBrKGEpe3ZhciBsPWEuY29uZmlnLHA9YS5maXJlKFwidWlTcGFjZVwiLHtzcGFjZTpcInRvcFwiLGh0bWw6XCJcIn0pLmh0bWwsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGYoYSxjLGUpe2Iuc2V0U3R5bGUoYyx3KGUpKTtiLnNldFN0eWxlKFwicG9zaXRpb25cIixhKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWsuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO3N3aXRjaChhKXtjYXNlIFwidG9wXCI6ZihcImFic29sdXRlXCIsXCJ0b3BcIixiLnktcS1yKTticmVhaztjYXNlIFwicGluXCI6ZihcImZpeGVkXCIsXCJ0b3BcIix4KTticmVhaztjYXNlIFwiYm90dG9tXCI6ZihcImFic29sdXRlXCIsXCJ0b3BcIixiLnkrKGMuaGVpZ2h0fHxjLmJvdHRvbS1jLnRvcCkrcil9bT1hfXZhciBtLGssbixjLGgscSx2LHA9bC5mbG9hdFNwYWNlRG9ja2VkT2Zmc2V0WHx8MCxyPWwuZmxvYXRTcGFjZURvY2tlZE9mZnNldFl8fDAsdT1sLmZsb2F0U3BhY2VQaW5uZWRPZmZzZXRYfHwwLHg9bC5mbG9hdFNwYWNlUGlubmVkT2Zmc2V0WXx8XHJcbjA7cmV0dXJuIGZ1bmN0aW9uKGQpe2lmKGs9YS5lZGl0YWJsZSgpKXt2YXIgZj1kJiZcImZvY3VzXCI9PWQubmFtZTtmJiZiLnNob3coKTthLmZpcmUoXCJmbG9hdGluZ1NwYWNlTGF5b3V0XCIse3Nob3c6Zn0pO2IucmVtb3ZlU3R5bGUoXCJsZWZ0XCIpO2IucmVtb3ZlU3R5bGUoXCJyaWdodFwiKTtuPWIuZ2V0Q2xpZW50UmVjdCgpO2M9ay5nZXRDbGllbnRSZWN0KCk7aD1nLmdldFZpZXdQYW5lU2l6ZSgpO3E9bi5oZWlnaHQ7dj1cInBhZ2VYT2Zmc2V0XCJpbiBnLiQ/Zy4kLnBhZ2VYT2Zmc2V0OkNLRURJVE9SLmRvY3VtZW50LiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7bT8ocStyPD1jLnRvcD9lKFwidG9wXCIpOnErcj5oLmhlaWdodC1jLmJvdHRvbT9lKFwicGluXCIpOmUoXCJib3R0b21cIiksZD1oLndpZHRoLzIsZD1sLmZsb2F0U3BhY2VQcmVmZXJSaWdodD9cInJpZ2h0XCI6MDxjLmxlZnQmJmMucmlnaHQ8aC53aWR0aCYmYy53aWR0aD5uLndpZHRoP1wicnRsXCI9PWwuY29udGVudHNMYW5nRGlyZWN0aW9uP1xyXG5cInJpZ2h0XCI6XCJsZWZ0XCI6ZC1jLmxlZnQ+Yy5yaWdodC1kP1wibGVmdFwiOlwicmlnaHRcIixuLndpZHRoPmgud2lkdGg/KGQ9XCJsZWZ0XCIsZj0wKTooZj1cImxlZnRcIj09ZD8wPGMubGVmdD9jLmxlZnQ6MDpjLnJpZ2h0PGgud2lkdGg/aC53aWR0aC1jLnJpZ2h0OjAsZituLndpZHRoPmgud2lkdGgmJihkPVwibGVmdFwiPT1kP1wicmlnaHRcIjpcImxlZnRcIixmPTApKSxiLnNldFN0eWxlKGQsdygoXCJwaW5cIj09bT91OnApK2YrKFwicGluXCI9PW0/MDpcImxlZnRcIj09ZD92Oi12KSkpKToobT1cInBpblwiLGUoXCJwaW5cIiksdChkKSl9fX0oKTtpZihwKXt2YXIgaz1uZXcgQ0tFRElUT1IudGVtcGxhdGUoJ1xceDNjZGl2IGlkXFx4M2RcImNrZV97bmFtZX1cIiBjbGFzc1xceDNkXCJja2Uge2lkfSBja2VfcmVzZXRfYWxsIGNrZV9jaHJvbWUgY2tlX2VkaXRvcl97bmFtZX0gY2tlX2Zsb2F0IGNrZV97bGFuZ0Rpcn0gJytDS0VESVRPUi5lbnYuY3NzQ2xhc3MrJ1wiIGRpclxceDNkXCJ7bGFuZ0Rpcn1cIiB0aXRsZVxceDNkXCInKyhDS0VESVRPUi5lbnYuZ2Vja28/XHJcblwiIFwiOlwiXCIpKydcIiBsYW5nXFx4M2RcIntsYW5nQ29kZX1cIiByb2xlXFx4M2RcImFwcGxpY2F0aW9uXCIgc3R5bGVcXHgzZFwie3N0eWxlfVwiJysoYS50aXRsZT8nIGFyaWEtbGFiZWxsZWRieVxceDNkXCJja2Vfe25hbWV9X2FyaWFsYmxcIic6XCIgXCIpK1wiXFx4M2VcIisoYS50aXRsZT8nXFx4M2NzcGFuIGlkXFx4M2RcImNrZV97bmFtZX1fYXJpYWxibFwiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2V7dm9pY2VMYWJlbH1cXHgzYy9zcGFuXFx4M2UnOlwiIFwiKSsnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2lubmVyXCJcXHgzZVxceDNjZGl2IGlkXFx4M2RcInt0b3BJZH1cIiBjbGFzc1xceDNkXCJja2VfdG9wXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNle2NvbnRlbnR9XFx4M2MvZGl2XFx4M2VcXHgzYy9kaXZcXHgzZVxceDNjL2RpdlxceDNlJyksYj1DS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkuYXBwZW5kKENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGsub3V0cHV0KHtjb250ZW50OnAsaWQ6YS5pZCxsYW5nRGlyOmEubGFuZy5kaXIsXHJcbmxhbmdDb2RlOmEubGFuZ0NvZGUsbmFtZTphLm5hbWUsc3R5bGU6XCJkaXNwbGF5Om5vbmU7ei1pbmRleDpcIisobC5iYXNlRmxvYXRaSW5kZXgtMSksdG9wSWQ6YS51aS5zcGFjZUlkKFwidG9wXCIpLHZvaWNlTGFiZWw6YS50aXRsZX0pKSksdT1DS0VESVRPUi50b29scy5ldmVudHNCdWZmZXIoNTAwLHQpLGU9Q0tFRElUT1IudG9vbHMuZXZlbnRzQnVmZmVyKDEwMCx0KTtiLnVuc2VsZWN0YWJsZSgpO2Iub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXthPWEuZGF0YTthLmdldFRhcmdldCgpLmhhc0FzY2VuZGFudChcImFcIiwxKXx8YS5wcmV2ZW50RGVmYXVsdCgpfSk7YS5vbihcImZvY3VzXCIsZnVuY3Rpb24oYil7dChiKTthLm9uKFwiY2hhbmdlXCIsdS5pbnB1dCk7Zy5vbihcInNjcm9sbFwiLGUuaW5wdXQpO2cub24oXCJyZXNpemVcIixlLmlucHV0KX0pO2Eub24oXCJibHVyXCIsZnVuY3Rpb24oKXtiLmhpZGUoKTthLnJlbW92ZUxpc3RlbmVyKFwiY2hhbmdlXCIsdS5pbnB1dCk7Zy5yZW1vdmVMaXN0ZW5lcihcInNjcm9sbFwiLFxyXG5lLmlucHV0KTtnLnJlbW92ZUxpc3RlbmVyKFwicmVzaXplXCIsZS5pbnB1dCl9KTthLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zy5yZW1vdmVMaXN0ZW5lcihcInNjcm9sbFwiLGUuaW5wdXQpO2cucmVtb3ZlTGlzdGVuZXIoXCJyZXNpemVcIixlLmlucHV0KTtiLmNsZWFyQ3VzdG9tRGF0YSgpO2IucmVtb3ZlKCl9KTthLmZvY3VzTWFuYWdlci5oYXNGb2N1cyYmYi5zaG93KCk7YS5mb2N1c01hbmFnZXIuYWRkKGIsMSl9fXZhciBnPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLHc9Q0tFRElUT1IudG9vbHMuY3NzTGVuZ3RoO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmxvYXRpbmdzcGFjZVwiLHtpbml0OmZ1bmN0aW9uKGEpe2Eub24oXCJsb2FkZWRcIixmdW5jdGlvbigpe2sodGhpcyl9LG51bGwsbnVsbCwyMCl9fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwibGlzdGJsb2NrXCIse3JlcXVpcmVzOlwicGFuZWxcIixvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgZj1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsLWxpc3RcIiwnXFx4M2N1bCByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGNsYXNzXFx4M2RcImNrZV9wYW5lbF9saXN0XCJcXHgzZXtpdGVtc31cXHgzYy91bFxceDNlJyksZz1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsLWxpc3QtaXRlbVwiLCdcXHgzY2xpIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfbGlzdEl0ZW1cIiByb2xlXFx4M2RwcmVzZW50YXRpb25cXHgzZVxceDNjYSBpZFxceDNkXCJ7aWR9X29wdGlvblwiIF9ja2VfZm9jdXNcXHgzZDEgaGlkZWZvY3VzXFx4M2R0cnVlIHRpdGxlXFx4M2RcInt0aXRsZX1cIiBocmVmXFx4M2RcImphdmFzY3JpcHQ6dm9pZChcXCd7dmFsfVxcJylcIiAge29uY2xpY2t9XFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0sXFwne3ZhbH1cXCcpOyByZXR1cm4gZmFsc2U7XCIgcm9sZVxceDNkXCJvcHRpb25cIlxceDNle3RleHR9XFx4M2MvYVxceDNlXFx4M2MvbGlcXHgzZScpLFxyXG5oPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtbGlzdC1ncm91cFwiLCdcXHgzY2gxIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfZ3JvdXB0aXRsZVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgXFx4M2V7bGFiZWx9XFx4M2MvaDFcXHgzZScpLGs9L1xcJy9nO0NLRURJVE9SLnVpLnBhbmVsLnByb3RvdHlwZS5hZGRMaXN0QmxvY2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hZGRCbG9jayhhLG5ldyBDS0VESVRPUi51aS5saXN0QmxvY2sodGhpcy5nZXRIb2xkZXJFbGVtZW50KCksYikpfTtDS0VESVRPUi51aS5saXN0QmxvY2s9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IudWkucGFuZWwuYmxvY2ssJDpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi5hdHRyaWJ1dGVzfHwoYi5hdHRyaWJ1dGVzPXt9KTsodGhpcy5tdWx0aVNlbGVjdD0hIWIubXVsdGlTZWxlY3QpJiYoY1tcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCJdPSEwKTshYy5yb2xlJiZcclxuKGMucm9sZT1cImxpc3Rib3hcIik7dGhpcy5iYXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLGMucm9sZSk7Yz10aGlzLmtleXM7Y1s0MF09XCJuZXh0XCI7Y1s5XT1cIm5leHRcIjtjWzM4XT1cInByZXZcIjtjW0NLRURJVE9SLlNISUZUKzldPVwicHJldlwiO2NbMzJdPUNLRURJVE9SLmVudi5pZT9cIm1vdXNldXBcIjpcImNsaWNrXCI7Q0tFRElUT1IuZW52LmllJiYoY1sxM109XCJtb3VzZXVwXCIpO3RoaXMuXy5wZW5kaW5nSHRtbD1bXTt0aGlzLl8ucGVuZGluZ0xpc3Q9W107dGhpcy5fLml0ZW1zPXt9O3RoaXMuXy5ncm91cHM9e319LF86e2Nsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fLnN0YXJ0ZWQpe3ZhciBhPWYub3V0cHV0KHtpdGVtczp0aGlzLl8ucGVuZGluZ0xpc3Quam9pbihcIlwiKX0pO3RoaXMuXy5wZW5kaW5nTGlzdD1bXTt0aGlzLl8ucGVuZGluZ0h0bWwucHVzaChhKTtkZWxldGUgdGhpcy5fLnN0YXJ0ZWR9fSxnZXRDbGljazpmdW5jdGlvbigpe3RoaXMuXy5jbGlja3x8XHJcbih0aGlzLl8uY2xpY2s9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50b2dnbGUoYSk7aWYodGhpcy5vbkNsaWNrKXRoaXMub25DbGljayhhLGIpfSx0aGlzKSk7cmV0dXJuIHRoaXMuXy5jbGlja319LHByb3RvOnthZGQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMuXy5zdGFydGVkfHwodGhpcy5fLnN0YXJ0ZWQ9MSx0aGlzLl8uc2l6ZT10aGlzLl8uc2l6ZXx8MCk7dGhpcy5fLml0ZW1zW2FdPWQ7dmFyIGU7ZT1DS0VESVRPUi50b29scy5odG1sRW5jb2RlQXR0cihhKS5yZXBsYWNlKGssXCJcXFxcJ1wiKTthPXtpZDpkLHZhbDplLG9uY2xpY2s6Q0tFRElUT1IuZW52LmllPydvbmNsaWNrXFx4M2RcInJldHVybiBmYWxzZTtcIiBvbm1vdXNldXAnOlwib25jbGlja1wiLGNsaWNrRm46dGhpcy5fLmdldENsaWNrKCksdGl0bGU6Q0tFRElUT1IudG9vbHMuaHRtbEVuY29kZUF0dHIoY3x8YSksdGV4dDpifHxhfTtcclxudGhpcy5fLnBlbmRpbmdMaXN0LnB1c2goZy5vdXRwdXQoYSkpfSxzdGFydEdyb3VwOmZ1bmN0aW9uKGEpe3RoaXMuXy5jbG9zZSgpO3ZhciBiPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMuXy5ncm91cHNbYV09Yjt0aGlzLl8ucGVuZGluZ0h0bWwucHVzaChoLm91dHB1dCh7aWQ6YixsYWJlbDphfSkpfSxjb21taXQ6ZnVuY3Rpb24oKXt0aGlzLl8uY2xvc2UoKTt0aGlzLmVsZW1lbnQuYXBwZW5kSHRtbCh0aGlzLl8ucGVuZGluZ0h0bWwuam9pbihcIlwiKSk7ZGVsZXRlIHRoaXMuXy5zaXplO3RoaXMuXy5wZW5kaW5nSHRtbD1bXX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaXNNYXJrZWQoYSk7Yj90aGlzLnVubWFyayhhKTp0aGlzLm1hcmsoYSk7cmV0dXJuIWJ9LGhpZGVHcm91cDpmdW5jdGlvbihhKXt2YXIgYj0oYT10aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCeUlkKHRoaXMuXy5ncm91cHNbYV0pKSYmYS5nZXROZXh0KCk7YSYmKGEuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXHJcblwibm9uZVwiKSxiJiZcInVsXCI9PWIuZ2V0TmFtZSgpJiZiLnNldFN0eWxlKFwiZGlzcGxheVwiLFwibm9uZVwiKSl9LGhpZGVJdGVtOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLml0ZW1zW2FdKS5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIil9LHNob3dBbGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uaXRlbXMsYj10aGlzLl8uZ3JvdXBzLGM9dGhpcy5lbGVtZW50LmdldERvY3VtZW50KCksZDtmb3IoZCBpbiBhKWMuZ2V0QnlJZChhW2RdKS5zZXRTdHlsZShcImRpc3BsYXlcIixcIlwiKTtmb3IodmFyIGUgaW4gYilhPWMuZ2V0QnlJZChiW2VdKSxkPWEuZ2V0TmV4dCgpLGEuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIiksZCYmXCJ1bFwiPT1kLmdldE5hbWUoKSYmZC5zZXRTdHlsZShcImRpc3BsYXlcIixcIlwiKX0sbWFyazpmdW5jdGlvbihhKXt0aGlzLm11bHRpU2VsZWN0fHx0aGlzLnVubWFya0FsbCgpO2E9dGhpcy5fLml0ZW1zW2FdO3ZhciBiPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQoYSk7XHJcbmIuYWRkQ2xhc3MoXCJja2Vfc2VsZWN0ZWRcIik7dGhpcy5lbGVtZW50LmdldERvY3VtZW50KCkuZ2V0QnlJZChhK1wiX29wdGlvblwiKS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsITApO3RoaXMub25NYXJrJiZ0aGlzLm9uTWFyayhiKX0sdW5tYXJrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpO2E9dGhpcy5fLml0ZW1zW2FdO3ZhciBjPWIuZ2V0QnlJZChhKTtjLnJlbW92ZUNsYXNzKFwiY2tlX3NlbGVjdGVkXCIpO2IuZ2V0QnlJZChhK1wiX29wdGlvblwiKS5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpO3RoaXMub25Vbm1hcmsmJnRoaXMub25Vbm1hcmsoYyl9LHVubWFya0FsbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5pdGVtcyxiPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLGM7Zm9yKGMgaW4gYSl7dmFyIGQ9YVtjXTtiLmdldEJ5SWQoZCkucmVtb3ZlQ2xhc3MoXCJja2Vfc2VsZWN0ZWRcIik7Yi5nZXRCeUlkKGQrXCJfb3B0aW9uXCIpLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIil9dGhpcy5vblVubWFyayYmXHJcbnRoaXMub25Vbm1hcmsoKX0saXNNYXJrZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLml0ZW1zW2FdKS5oYXNDbGFzcyhcImNrZV9zZWxlY3RlZFwiKX0sZm9jdXM6ZnVuY3Rpb24oYSl7dGhpcy5fLmZvY3VzSW5kZXg9LTE7dmFyIGI9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGMsZD0tMTtpZihhKWZvcihjPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLml0ZW1zW2FdKS5nZXRGaXJzdCgpO2E9Yi5nZXRJdGVtKCsrZCk7KXtpZihhLmVxdWFscyhjKSl7dGhpcy5fLmZvY3VzSW5kZXg9ZDticmVha319ZWxzZSB0aGlzLmVsZW1lbnQuZm9jdXMoKTtjJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5mb2N1cygpfSwwKX19fSl9fSk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJyaWNoY29tYm9cIix7cmVxdWlyZXM6XCJmbG9hdHBhbmVsLGxpc3RibG9jayxidXR0b25cIixiZWZvcmVJbml0OmZ1bmN0aW9uKGQpe2QudWkuYWRkSGFuZGxlcihDS0VESVRPUi5VSV9SSUNIQ09NQk8sQ0tFRElUT1IudWkucmljaENvbWJvLmhhbmRsZXIpfX0pO1xyXG4oZnVuY3Rpb24oKXt2YXIgZD0nXFx4M2NzcGFuIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfY29tYm8gY2tlX2NvbWJvX197bmFtZX0ge2Nsc31cIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzY3NwYW4gaWRcXHgzZFwie2lkfV9sYWJlbFwiIGNsYXNzXFx4M2RcImNrZV9jb21ib19sYWJlbFwiXFx4M2V7bGFiZWx9XFx4M2Mvc3BhblxceDNlXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb21ib19idXR0b25cIiB0aXRsZVxceDNkXCJ7dGl0bGV9XCIgdGFiaW5kZXhcXHgzZFwiLTFcIicrKENLRURJVE9SLmVudi5nZWNrbyYmIUNLRURJVE9SLmVudi5oYz9cIlwiOlwiIGhyZWZcXHgzZFxcXCJqYXZhc2NyaXB0OnZvaWQoJ3t0aXRsZUpzfScpXFxcIlwiKSsnIGhpZGVmb2N1c1xceDNkXCJ0cnVlXCIgcm9sZVxceDNkXCJidXR0b25cIiBhcmlhLWxhYmVsbGVkYnlcXHgzZFwie2lkfV9sYWJlbFwiIGFyaWEtaGFzcG9wdXBcXHgzZFwidHJ1ZVwiJztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihkKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7XHJcbkNLRURJVE9SLmVudi5nZWNrbyYmKGQrPScgb25ibHVyXFx4M2RcInRoaXMuc3R5bGUuY3NzVGV4dCBcXHgzZCB0aGlzLnN0eWxlLmNzc1RleHQ7XCInKTt2YXIgZD1kKygnIG9ua2V5ZG93blxceDNkXCJyZXR1cm4gQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtrZXlkb3duRm59LGV2ZW50LHRoaXMpO1wiIG9uZm9jdXNcXHgzZFwicmV0dXJuIENLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Zm9jdXNGbn0sZXZlbnQpO1wiICcrKENLRURJVE9SLmVudi5pZT8nb25jbGlja1xceDNkXCJyZXR1cm4gZmFsc2U7XCIgb25tb3VzZXVwJzpcIm9uY2xpY2tcIikrJ1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2NsaWNrRm59LHRoaXMpO3JldHVybiBmYWxzZTtcIlxceDNlXFx4M2NzcGFuIGlkXFx4M2RcIntpZH1fdGV4dFwiIGNsYXNzXFx4M2RcImNrZV9jb21ib190ZXh0IGNrZV9jb21ib19pbmxpbmVsYWJlbFwiXFx4M2V7bGFiZWx9XFx4M2Mvc3BhblxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9jb21ib19vcGVuXCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfY29tYm9fYXJyb3dcIlxceDNlJytcclxuKENLRURJVE9SLmVudi5oYz9cIlxceDI2Izk2NjA7XCI6Q0tFRElUT1IuZW52LmFpcj9cIlxceDI2bmJzcDtcIjpcIlwiKStcIlxceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZVxceDNjL2FcXHgzZVxceDNjL3NwYW5cXHgzZVwiKSxrPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwiY29tYm9cIixkKTtDS0VESVRPUi5VSV9SSUNIQ09NQk89XCJyaWNoY29tYm9cIjtDS0VESVRPUi51aS5yaWNoQ29tYm89Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYSx7Y2FuR3JvdXA6ITEsdGl0bGU6YS5sYWJlbCxtb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czoxfSk7YT10aGlzLnBhbmVsfHx7fTtkZWxldGUgdGhpcy5wYW5lbDt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKTt0aGlzLmRvY3VtZW50PWEucGFyZW50JiZhLnBhcmVudC5nZXREb2N1bWVudCgpfHxDS0VESVRPUi5kb2N1bWVudDthLmNsYXNzTmFtZT1cImNrZV9jb21ib3BhbmVsXCI7XHJcbmEuYmxvY2s9e211bHRpU2VsZWN0OmEubXVsdGlTZWxlY3QsYXR0cmlidXRlczphLmF0dHJpYnV0ZXN9O2EudG9vbGJhclJlbGF0ZWQ9ITA7dGhpcy5fPXtwYW5lbERlZmluaXRpb246YSxpdGVtczp7fX19LHByb3RvOntyZW5kZXJIdG1sOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3RoaXMucmVuZGVyKGEsYik7cmV0dXJuIGIuam9pbihcIlwiKX0scmVuZGVyOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZygpe2lmKHRoaXMuZ2V0U3RhdGUoKSE9Q0tFRElUT1IuVFJJU1RBVEVfT04pe3ZhciBjPXRoaXMubW9kZXNbYS5tb2RlXT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ7YS5yZWFkT25seSYmIXRoaXMucmVhZE9ubHkmJihjPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTt0aGlzLnNldFN0YXRlKGMpO3RoaXMuc2V0VmFsdWUoXCJcIik7YyE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJnRoaXMucmVmcmVzaCYmdGhpcy5yZWZyZXNoKCl9fXZhciBkPVxyXG5DS0VESVRPUi5lbnYsaD1cImNrZV9cIit0aGlzLmlkLGU9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYil7bCYmKGEudW5sb2NrU2VsZWN0aW9uKDEpLGw9MCk7Yy5leGVjdXRlKGIpfSx0aGlzKSxmPXRoaXMsYz17aWQ6aCxjb21ibzp0aGlzLGZvY3VzOmZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChoKS5nZXRDaGlsZCgxKS5mb2N1cygpfSxleGVjdXRlOmZ1bmN0aW9uKGMpe3ZhciBiPWYuXztpZihiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRClpZihmLmNyZWF0ZVBhbmVsKGEpLGIub24pYi5wYW5lbC5oaWRlKCk7ZWxzZXtmLmNvbW1pdCgpO3ZhciBkPWYuZ2V0VmFsdWUoKTtkP2IubGlzdC5tYXJrKGQpOmIubGlzdC51bm1hcmtBbGwoKTtiLnBhbmVsLnNob3dCbG9jayhmLmlkLG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChjKSw0KX19LGNsaWNrRm46ZX07YS5vbihcImFjdGl2ZUZpbHRlckNoYW5nZVwiLGcsdGhpcyk7YS5vbihcIm1vZGVcIixcclxuZyx0aGlzKTthLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZyx0aGlzKTshdGhpcy5yZWFkT25seSYmYS5vbihcInJlYWRPbmx5XCIsZyx0aGlzKTt2YXIgbT1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihiLGQpe2I9bmV3IENLRURJVE9SLmRvbS5ldmVudChiKTt2YXIgZz1iLmdldEtleXN0cm9rZSgpO2lmKDQwPT1nKWEub25jZShcInBhbmVsU2hvd1wiLGZ1bmN0aW9uKGEpe2EuZGF0YS5fLnBhbmVsLl8uY3VycmVudEJsb2NrLm9uS2V5RG93big0MCl9KTtzd2l0Y2goZyl7Y2FzZSAxMzpjYXNlIDMyOmNhc2UgNDA6Q0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKGUsZCk7YnJlYWs7ZGVmYXVsdDpjLm9ua2V5KGMsZyl9Yi5wcmV2ZW50RGVmYXVsdCgpfSksbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbigpe2Mub25mb2N1cyYmYy5vbmZvY3VzKCl9KSxsPTA7Yy5rZXlEb3duRm49bTtkPXtpZDpoLG5hbWU6dGhpcy5uYW1lfHx0aGlzLmNvbW1hbmQsbGFiZWw6dGhpcy5sYWJlbCxcclxudGl0bGU6dGhpcy50aXRsZSxjbHM6dGhpcy5jbGFzc05hbWV8fFwiXCIsdGl0bGVKczpkLmdlY2tvJiYhZC5oYz9cIlwiOih0aGlzLnRpdGxlfHxcIlwiKS5yZXBsYWNlKFwiJ1wiLFwiXCIpLGtleWRvd25GbjptLGZvY3VzRm46bixjbGlja0ZuOmV9O2sub3V0cHV0KGQsYik7aWYodGhpcy5vblJlbmRlcil0aGlzLm9uUmVuZGVyKCk7cmV0dXJuIGN9LGNyZWF0ZVBhbmVsOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl8ucGFuZWwpe3ZhciBiPXRoaXMuXy5wYW5lbERlZmluaXRpb24sZD10aGlzLl8ucGFuZWxEZWZpbml0aW9uLmJsb2NrLGs9Yi5wYXJlbnR8fENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSxoPVwiY2tlX2NvbWJvcGFuZWxfX1wiK3RoaXMubmFtZSxlPW5ldyBDS0VESVRPUi51aS5mbG9hdFBhbmVsKGEsayxiKSxmPWUuYWRkTGlzdEJsb2NrKHRoaXMuaWQsZCksYz10aGlzO2Uub25TaG93PWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmFkZENsYXNzKGgpO2Muc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pO1xyXG5jLl8ub249MTtjLmVkaXRvckZvY3VzJiYhYS5mb2N1c01hbmFnZXIuaGFzRm9jdXMmJmEuZm9jdXMoKTtpZihjLm9uT3BlbiljLm9uT3BlbigpO2Eub25jZShcInBhbmVsU2hvd1wiLGZ1bmN0aW9uKCl7Zi5mb2N1cyghZi5tdWx0aVNlbGVjdCYmYy5nZXRWYWx1ZSgpKX0pfTtlLm9uSGlkZT1mdW5jdGlvbihiKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoaCk7Yy5zZXRTdGF0ZShjLm1vZGVzJiZjLm1vZGVzW2EubW9kZV0/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTtjLl8ub249MDtpZighYiYmYy5vbkNsb3NlKWMub25DbG9zZSgpfTtlLm9uRXNjYXBlPWZ1bmN0aW9uKCl7ZS5oaWRlKDEpfTtmLm9uQ2xpY2s9ZnVuY3Rpb24oYSxiKXtjLm9uQ2xpY2smJmMub25DbGljay5jYWxsKGMsYSxiKTtlLmhpZGUoKX07dGhpcy5fLnBhbmVsPWU7dGhpcy5fLmxpc3Q9ZjtlLmdldEJsb2NrKHRoaXMuaWQpLm9uSGlkZT1mdW5jdGlvbigpe2MuXy5vbj1cclxuMDtjLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09GRil9O3RoaXMuaW5pdCYmdGhpcy5pbml0KCl9fSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuXy52YWx1ZT1hO3ZhciBkPXRoaXMuZG9jdW1lbnQuZ2V0QnlJZChcImNrZV9cIit0aGlzLmlkK1wiX3RleHRcIik7ZCYmKGF8fGI/ZC5yZW1vdmVDbGFzcyhcImNrZV9jb21ib19pbmxpbmVsYWJlbFwiKTooYj10aGlzLmxhYmVsLGQuYWRkQ2xhc3MoXCJja2VfY29tYm9faW5saW5lbGFiZWxcIikpLGQuc2V0VGV4dChcInVuZGVmaW5lZFwiIT10eXBlb2YgYj9iOmEpKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnZhbHVlfHxcIlwifSx1bm1hcmtBbGw6ZnVuY3Rpb24oKXt0aGlzLl8ubGlzdC51bm1hcmtBbGwoKX0sbWFyazpmdW5jdGlvbihhKXt0aGlzLl8ubGlzdC5tYXJrKGEpfSxoaWRlSXRlbTpmdW5jdGlvbihhKXt0aGlzLl8ubGlzdC5oaWRlSXRlbShhKX0saGlkZUdyb3VwOmZ1bmN0aW9uKGEpe3RoaXMuXy5saXN0LmhpZGVHcm91cChhKX0sXHJcbnNob3dBbGw6ZnVuY3Rpb24oKXt0aGlzLl8ubGlzdC5zaG93QWxsKCl9LGFkZDpmdW5jdGlvbihhLGIsZCl7dGhpcy5fLml0ZW1zW2FdPWR8fGE7dGhpcy5fLmxpc3QuYWRkKGEsYixkKX0sc3RhcnRHcm91cDpmdW5jdGlvbihhKXt0aGlzLl8ubGlzdC5zdGFydEdyb3VwKGEpfSxjb21taXQ6ZnVuY3Rpb24oKXt0aGlzLl8uY29tbWl0dGVkfHwodGhpcy5fLmxpc3QuY29tbWl0KCksdGhpcy5fLmNvbW1pdHRlZD0xLENLRURJVE9SLnVpLmZpcmUoXCJyZWFkeVwiLHRoaXMpKTt0aGlzLl8uY29tbWl0dGVkPTF9LHNldFN0YXRlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuXy5zdGF0ZSE9YSl7dmFyIGI9dGhpcy5kb2N1bWVudC5nZXRCeUlkKFwiY2tlX1wiK3RoaXMuaWQpO2Iuc2V0U3RhdGUoYSxcImNrZV9jb21ib1wiKTthPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRD9iLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwhMCk6Yi5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpO3RoaXMuXy5zdGF0ZT1cclxuYX19LGdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5zdGF0ZX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5fLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmdGhpcy5zZXRTdGF0ZSh0aGlzLl8ubGFzdFN0YXRlKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuXy5zdGF0ZSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJih0aGlzLl8ubGFzdFN0YXRlPXRoaXMuXy5zdGF0ZSx0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKSl9fSxzdGF0aWNzOntoYW5kbGVyOntjcmVhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBDS0VESVRPUi51aS5yaWNoQ29tYm8oYSl9fX19KTtDS0VESVRPUi51aS5wcm90b3R5cGUuYWRkUmljaENvbWJvPWZ1bmN0aW9uKGEsYil7dGhpcy5hZGQoYSxDS0VESVRPUi5VSV9SSUNIQ09NQk8sYil9fSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBsKGEsYixjLGYscCxsLHQsdil7dmFyIHc9YS5jb25maWcscT1uZXcgQ0tFRElUT1Iuc3R5bGUodCksaz1wLnNwbGl0KFwiO1wiKTtwPVtdO2Zvcih2YXIgbT17fSxkPTA7ZDxrLmxlbmd0aDtkKyspe3ZhciBoPWtbZF07aWYoaCl7dmFyIGg9aC5zcGxpdChcIi9cIiksdT17fSxuPWtbZF09aFswXTt1W2NdPXBbZF09aFsxXXx8bjttW25dPW5ldyBDS0VESVRPUi5zdHlsZSh0LHUpO21bbl0uXy5kZWZpbml0aW9uLm5hbWU9bn1lbHNlIGsuc3BsaWNlKGQtLSwxKX1hLnVpLmFkZFJpY2hDb21ibyhiLHtsYWJlbDpmLmxhYmVsLHRpdGxlOmYucGFuZWxUaXRsZSx0b29sYmFyOlwic3R5bGVzLFwiK3YsYWxsb3dlZENvbnRlbnQ6cSxyZXF1aXJlZENvbnRlbnQ6cSxwYW5lbDp7Y3NzOltDS0VESVRPUi5za2luLmdldFBhdGgoXCJlZGl0b3JcIildLmNvbmNhdCh3LmNvbnRlbnRzQ3NzKSxtdWx0aVNlbGVjdDohMSxhdHRyaWJ1dGVzOntcImFyaWEtbGFiZWxcIjpmLnBhbmVsVGl0bGV9fSxcclxuaW5pdDpmdW5jdGlvbigpe3RoaXMuc3RhcnRHcm91cChmLnBhbmVsVGl0bGUpO2Zvcih2YXIgYT0wO2E8ay5sZW5ndGg7YSsrKXt2YXIgYj1rW2FdO3RoaXMuYWRkKGIsbVtiXS5idWlsZFByZXZpZXcoKSxiKX19LG9uQ2xpY2s6ZnVuY3Rpb24oYil7YS5mb2N1cygpO2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKTt2YXIgYz10aGlzLmdldFZhbHVlKCksZj1tW2JdO2lmKGMmJmIhPWMpe3ZhciBrPW1bY10sZT1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdO2lmKGUuY29sbGFwc2VkKXt2YXIgZD1hLmVsZW1lbnRQYXRoKCksZz1kLmNvbnRhaW5zKGZ1bmN0aW9uKGEpe3JldHVybiBrLmNoZWNrRWxlbWVudFJlbW92YWJsZShhKX0pO2lmKGcpe3ZhciBoPWUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChnLENLRURJVE9SLlNUQVJUKSxsPWUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChnLENLRURJVE9SLkVORCk7aWYoaCYmbCl7Zm9yKGg9ZS5jcmVhdGVCb29rbWFyaygpO2Q9Zy5nZXRGaXJzdCgpOylkLmluc2VydEJlZm9yZShnKTtcclxuZy5yZW1vdmUoKTtlLm1vdmVUb0Jvb2ttYXJrKGgpfWVsc2UgaD9lLm1vdmVUb1Bvc2l0aW9uKGcsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTpsP2UubW92ZVRvUG9zaXRpb24oZyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpOihlLnNwbGl0RWxlbWVudChnKSxlLm1vdmVUb1Bvc2l0aW9uKGcsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSxyKGUsZC5lbGVtZW50cy5zbGljZSgpLGcpKTthLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbZV0pfX1lbHNlIGEucmVtb3ZlU3R5bGUoayl9YVtjPT1iP1wicmVtb3ZlU3R5bGVcIjpcImFwcGx5U3R5bGVcIl0oZik7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSxvblJlbmRlcjpmdW5jdGlvbigpe2Eub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihiKXt2YXIgYz10aGlzLmdldFZhbHVlKCk7Yj1iLmRhdGEucGF0aC5lbGVtZW50cztmb3IodmFyIGQ9MCxmO2Q8Yi5sZW5ndGg7ZCsrKXtmPWJbZF07Zm9yKHZhciBlIGluIG0paWYobVtlXS5jaGVja0VsZW1lbnRNYXRjaChmLFxyXG4hMCxhKSl7ZSE9YyYmdGhpcy5zZXRWYWx1ZShlKTtyZXR1cm59fXRoaXMuc2V0VmFsdWUoXCJcIixsKX0sdGhpcyl9LHJlZnJlc2g6ZnVuY3Rpb24oKXthLmFjdGl2ZUZpbHRlci5jaGVjayhxKXx8dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9fSl9ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGY9Yi5wb3AoKTtpZihmKXtpZihjKXJldHVybiByKGEsYixmLmVxdWFscyhjKT9udWxsOmMpO2M9Zi5jbG9uZSgpO2EuaW5zZXJ0Tm9kZShjKTthLm1vdmVUb1Bvc2l0aW9uKGMsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO3IoYSxiKX19Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmb250XCIse3JlcXVpcmVzOlwicmljaGNvbWJvXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmNvbmZpZztsKGEsXCJGb250XCIsXCJmYW1pbHlcIixhLmxhbmcuZm9udCxiLmZvbnRfbmFtZXMsYi5mb250X2RlZmF1bHRMYWJlbCxiLmZvbnRfc3R5bGUsMzApO2woYSxcIkZvbnRTaXplXCIsXCJzaXplXCIsXHJcbmEubGFuZy5mb250LmZvbnRTaXplLGIuZm9udFNpemVfc2l6ZXMsYi5mb250U2l6ZV9kZWZhdWx0TGFiZWwsYi5mb250U2l6ZV9zdHlsZSw0MCl9fSl9KSgpO0NLRURJVE9SLmNvbmZpZy5mb250X25hbWVzPVwiQXJpYWwvQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtDb21pYyBTYW5zIE1TL0NvbWljIFNhbnMgTVMsIGN1cnNpdmU7Q291cmllciBOZXcvQ291cmllciBOZXcsIENvdXJpZXIsIG1vbm9zcGFjZTtHZW9yZ2lhL0dlb3JnaWEsIHNlcmlmO0x1Y2lkYSBTYW5zIFVuaWNvZGUvTHVjaWRhIFNhbnMgVW5pY29kZSwgTHVjaWRhIEdyYW5kZSwgc2Fucy1zZXJpZjtUYWhvbWEvVGFob21hLCBHZW5ldmEsIHNhbnMtc2VyaWY7VGltZXMgTmV3IFJvbWFuL1RpbWVzIE5ldyBSb21hbiwgVGltZXMsIHNlcmlmO1RyZWJ1Y2hldCBNUy9UcmVidWNoZXQgTVMsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtWZXJkYW5hL1ZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZlwiO1xyXG5DS0VESVRPUi5jb25maWcuZm9udF9kZWZhdWx0TGFiZWw9XCJcIjtDS0VESVRPUi5jb25maWcuZm9udF9zdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e1wiZm9udC1mYW1pbHlcIjpcIiMoZmFtaWx5KVwifSxvdmVycmlkZXM6W3tlbGVtZW50OlwiZm9udFwiLGF0dHJpYnV0ZXM6e2ZhY2U6bnVsbH19XX07Q0tFRElUT1IuY29uZmlnLmZvbnRTaXplX3NpemVzPVwiOC84cHg7OS85cHg7MTAvMTBweDsxMS8xMXB4OzEyLzEycHg7MTQvMTRweDsxNi8xNnB4OzE4LzE4cHg7MjAvMjBweDsyMi8yMnB4OzI0LzI0cHg7MjYvMjZweDsyOC8yOHB4OzM2LzM2cHg7NDgvNDhweDs3Mi83MnB4XCI7Q0tFRElUT1IuY29uZmlnLmZvbnRTaXplX2RlZmF1bHRMYWJlbD1cIlwiO0NLRURJVE9SLmNvbmZpZy5mb250U2l6ZV9zdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e1wiZm9udC1zaXplXCI6XCIjKHNpemUpXCJ9LG92ZXJyaWRlczpbe2VsZW1lbnQ6XCJmb250XCIsYXR0cmlidXRlczp7c2l6ZTpudWxsfX1dfTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImZvcm1zXCIse3JlcXVpcmVzOlwiZGlhbG9nLGZha2VvYmplY3RzXCIsb25Mb2FkOmZ1bmN0aW9uKCl7Q0tFRElUT1IuYWRkQ3NzKFwiLmNrZV9lZGl0YWJsZSBmb3Jte2JvcmRlcjogMXB4IGRvdHRlZCAjRkYwMDAwO3BhZGRpbmc6IDJweDt9XFxuXCIpO0NLRURJVE9SLmFkZENzcyhcImltZy5ja2VfaGlkZGVue2JhY2tncm91bmQtaW1hZ2U6IHVybChcIitDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiaW1hZ2VzL2hpZGRlbmZpZWxkLmdpZlwiKStcIik7YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JvcmRlcjogMXB4IHNvbGlkICNhOWE5YTk7d2lkdGg6IDE2cHggIWltcG9ydGFudDtoZWlnaHQ6IDE2cHggIWltcG9ydGFudDt9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGFuZyxnPTAsaD17ZW1haWw6MSxwYXNzd29yZDoxLHNlYXJjaDoxLHRlbDoxLHRleHQ6MSx1cmw6MX0sbD17Y2hlY2tib3g6XCJpbnB1dFt0eXBlLG5hbWUsY2hlY2tlZCxyZXF1aXJlZF1cIixcclxucmFkaW86XCJpbnB1dFt0eXBlLG5hbWUsY2hlY2tlZCxyZXF1aXJlZF1cIix0ZXh0ZmllbGQ6XCJpbnB1dFt0eXBlLG5hbWUsdmFsdWUsc2l6ZSxtYXhsZW5ndGgscmVxdWlyZWRdXCIsdGV4dGFyZWE6XCJ0ZXh0YXJlYVtjb2xzLHJvd3MsbmFtZSxyZXF1aXJlZF1cIixzZWxlY3Q6XCJzZWxlY3RbbmFtZSxzaXplLG11bHRpcGxlLHJlcXVpcmVkXTsgb3B0aW9uW3ZhbHVlLHNlbGVjdGVkXVwiLGJ1dHRvbjpcImlucHV0W3R5cGUsbmFtZSx2YWx1ZV1cIixmb3JtOlwiZm9ybVthY3Rpb24sbmFtZSxpZCxlbmN0eXBlLHRhcmdldCxtZXRob2RdXCIsaGlkZGVuZmllbGQ6XCJpbnB1dFt0eXBlLG5hbWUsdmFsdWVdXCIsaW1hZ2VidXR0b246XCJpbnB1dFt0eXBlLGFsdCxzcmNde3dpZHRoLGhlaWdodCxib3JkZXIsYm9yZGVyLXdpZHRoLGJvcmRlci1zdHlsZSxtYXJnaW4sZmxvYXR9XCJ9LG09e2NoZWNrYm94OlwiaW5wdXRcIixyYWRpbzpcImlucHV0XCIsdGV4dGZpZWxkOlwiaW5wdXRcIix0ZXh0YXJlYTpcInRleHRhcmVhXCIsXHJcbnNlbGVjdDpcInNlbGVjdFwiLGJ1dHRvbjpcImlucHV0XCIsZm9ybTpcImZvcm1cIixoaWRkZW5maWVsZDpcImlucHV0XCIsaW1hZ2VidXR0b246XCJpbnB1dFwifSxlPWZ1bmN0aW9uKGQsYyxlKXt2YXIgaD17YWxsb3dlZENvbnRlbnQ6bFtjXSxyZXF1aXJlZENvbnRlbnQ6bVtjXX07XCJmb3JtXCI9PWMmJihoLmNvbnRleHQ9XCJmb3JtXCIpO2EuYWRkQ29tbWFuZChjLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKGMsaCkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihkLHtsYWJlbDpiLmNvbW1vbltkLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK2Quc2xpY2UoMSldLGNvbW1hbmQ6Yyx0b29sYmFyOlwiZm9ybXMsXCIrKGcrPTEwKX0pO0NLRURJVE9SLmRpYWxvZy5hZGQoYyxlKX0sZj10aGlzLnBhdGgrXCJkaWFsb2dzL1wiOyFhLmJsb2NrbGVzcyYmZShcIkZvcm1cIixcImZvcm1cIixmK1wiZm9ybS5qc1wiKTtlKFwiQ2hlY2tib3hcIixcImNoZWNrYm94XCIsZitcImNoZWNrYm94LmpzXCIpO2UoXCJSYWRpb1wiLFwicmFkaW9cIixcclxuZitcInJhZGlvLmpzXCIpO2UoXCJUZXh0RmllbGRcIixcInRleHRmaWVsZFwiLGYrXCJ0ZXh0ZmllbGQuanNcIik7ZShcIlRleHRhcmVhXCIsXCJ0ZXh0YXJlYVwiLGYrXCJ0ZXh0YXJlYS5qc1wiKTtlKFwiU2VsZWN0XCIsXCJzZWxlY3RcIixmK1wic2VsZWN0LmpzXCIpO2UoXCJCdXR0b25cIixcImJ1dHRvblwiLGYrXCJidXR0b24uanNcIik7dmFyIGs9YS5wbHVnaW5zLmltYWdlO2smJiFhLnBsdWdpbnMuaW1hZ2UyJiZlKFwiSW1hZ2VCdXR0b25cIixcImltYWdlYnV0dG9uXCIsQ0tFRElUT1IucGx1Z2lucy5nZXRQYXRoKFwiaW1hZ2VcIikrXCJkaWFsb2dzL2ltYWdlLmpzXCIpO2UoXCJIaWRkZW5GaWVsZFwiLFwiaGlkZGVuZmllbGRcIixmK1wiaGlkZGVuZmllbGQuanNcIik7YS5hZGRNZW51SXRlbXMmJihlPXtjaGVja2JveDp7bGFiZWw6Yi5mb3Jtcy5jaGVja2JveEFuZFJhZGlvLmNoZWNrYm94VGl0bGUsY29tbWFuZDpcImNoZWNrYm94XCIsZ3JvdXA6XCJjaGVja2JveFwifSxyYWRpbzp7bGFiZWw6Yi5mb3Jtcy5jaGVja2JveEFuZFJhZGlvLnJhZGlvVGl0bGUsXHJcbmNvbW1hbmQ6XCJyYWRpb1wiLGdyb3VwOlwicmFkaW9cIn0sdGV4dGZpZWxkOntsYWJlbDpiLmZvcm1zLnRleHRmaWVsZC50aXRsZSxjb21tYW5kOlwidGV4dGZpZWxkXCIsZ3JvdXA6XCJ0ZXh0ZmllbGRcIn0saGlkZGVuZmllbGQ6e2xhYmVsOmIuZm9ybXMuaGlkZGVuLnRpdGxlLGNvbW1hbmQ6XCJoaWRkZW5maWVsZFwiLGdyb3VwOlwiaGlkZGVuZmllbGRcIn0sYnV0dG9uOntsYWJlbDpiLmZvcm1zLmJ1dHRvbi50aXRsZSxjb21tYW5kOlwiYnV0dG9uXCIsZ3JvdXA6XCJidXR0b25cIn0sc2VsZWN0OntsYWJlbDpiLmZvcm1zLnNlbGVjdC50aXRsZSxjb21tYW5kOlwic2VsZWN0XCIsZ3JvdXA6XCJzZWxlY3RcIn0sdGV4dGFyZWE6e2xhYmVsOmIuZm9ybXMudGV4dGFyZWEudGl0bGUsY29tbWFuZDpcInRleHRhcmVhXCIsZ3JvdXA6XCJ0ZXh0YXJlYVwifX0sayYmKGUuaW1hZ2VidXR0b249e2xhYmVsOmIuaW1hZ2UudGl0bGVCdXR0b24sY29tbWFuZDpcImltYWdlYnV0dG9uXCIsZ3JvdXA6XCJpbWFnZWJ1dHRvblwifSksIWEuYmxvY2tsZXNzJiZcclxuKGUuZm9ybT17bGFiZWw6Yi5mb3Jtcy5mb3JtLm1lbnUsY29tbWFuZDpcImZvcm1cIixncm91cDpcImZvcm1cIn0pLGEuYWRkTWVudUl0ZW1zKGUpKTthLmNvbnRleHRNZW51JiYoIWEuYmxvY2tsZXNzJiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGQsYyxhKXtpZigoZD1hLmNvbnRhaW5zKFwiZm9ybVwiLDEpKSYmIWQuaXNSZWFkT25seSgpKXJldHVybntmb3JtOkNLRURJVE9SLlRSSVNUQVRFX09GRn19KSxhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGQpe2lmKGQmJiFkLmlzUmVhZE9ubHkoKSl7dmFyIGM9ZC5nZXROYW1lKCk7aWYoXCJzZWxlY3RcIj09YylyZXR1cm57c2VsZWN0OkNLRURJVE9SLlRSSVNUQVRFX09GRn07aWYoXCJ0ZXh0YXJlYVwiPT1jKXJldHVybnt0ZXh0YXJlYTpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2lmKFwiaW5wdXRcIj09Yyl7dmFyIGE9ZC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpfHxcInRleHRcIjtzd2l0Y2goYSl7Y2FzZSBcImJ1dHRvblwiOmNhc2UgXCJzdWJtaXRcIjpjYXNlIFwicmVzZXRcIjpyZXR1cm57YnV0dG9uOkNLRURJVE9SLlRSSVNUQVRFX09GRn07XHJcbmNhc2UgXCJjaGVja2JveFwiOnJldHVybntjaGVja2JveDpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2Nhc2UgXCJyYWRpb1wiOnJldHVybntyYWRpbzpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2Nhc2UgXCJpbWFnZVwiOnJldHVybiBrP3tpbWFnZWJ1dHRvbjpDS0VESVRPUi5UUklTVEFURV9PRkZ9Om51bGx9aWYoaFthXSlyZXR1cm57dGV4dGZpZWxkOkNLRURJVE9SLlRSSVNUQVRFX09GRn19aWYoXCJpbWdcIj09YyYmXCJoaWRkZW5maWVsZFwiPT1kLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpcmV0dXJue2hpZGRlbmZpZWxkOkNLRURJVE9SLlRSSVNUQVRFX09GRn19fSkpO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGQpe3ZhciBjPWQuZGF0YS5lbGVtZW50O2lmKCFhLmJsb2NrbGVzcyYmYy5pcyhcImZvcm1cIikpZC5kYXRhLmRpYWxvZz1cImZvcm1cIjtlbHNlIGlmKGMuaXMoXCJzZWxlY3RcIikpZC5kYXRhLmRpYWxvZz1cInNlbGVjdFwiO2Vsc2UgaWYoYy5pcyhcInRleHRhcmVhXCIpKWQuZGF0YS5kaWFsb2c9XHJcblwidGV4dGFyZWFcIjtlbHNlIGlmKGMuaXMoXCJpbWdcIikmJlwiaGlkZGVuZmllbGRcIj09Yy5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpKWQuZGF0YS5kaWFsb2c9XCJoaWRkZW5maWVsZFwiO2Vsc2UgaWYoYy5pcyhcImlucHV0XCIpKXtjPWMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKXx8XCJ0ZXh0XCI7c3dpdGNoKGMpe2Nhc2UgXCJidXR0b25cIjpjYXNlIFwic3VibWl0XCI6Y2FzZSBcInJlc2V0XCI6ZC5kYXRhLmRpYWxvZz1cImJ1dHRvblwiO2JyZWFrO2Nhc2UgXCJjaGVja2JveFwiOmQuZGF0YS5kaWFsb2c9XCJjaGVja2JveFwiO2JyZWFrO2Nhc2UgXCJyYWRpb1wiOmQuZGF0YS5kaWFsb2c9XCJyYWRpb1wiO2JyZWFrO2Nhc2UgXCJpbWFnZVwiOmQuZGF0YS5kaWFsb2c9XCJpbWFnZWJ1dHRvblwifWhbY10mJihkLmRhdGEuZGlhbG9nPVwidGV4dGZpZWxkXCIpfX0pfSxhZnRlckluaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhUHJvY2Vzc29yLGc9YiYmYi5odG1sRmlsdGVyLGI9YiYmYi5kYXRhRmlsdGVyO0NLRURJVE9SLmVudi5pZSYmXHJcbmcmJmcuYWRkUnVsZXMoe2VsZW1lbnRzOntpbnB1dDpmdW5jdGlvbihhKXthPWEuYXR0cmlidXRlczt2YXIgYj1hLnR5cGU7Ynx8KGEudHlwZT1cInRleHRcIik7XCJjaGVja2JveFwiIT1iJiZcInJhZGlvXCIhPWJ8fFwib25cIiE9YS52YWx1ZXx8ZGVsZXRlIGEudmFsdWV9fX0se2FwcGx5VG9BbGw6ITB9KTtiJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7aW5wdXQ6ZnVuY3Rpb24oYil7aWYoXCJoaWRkZW5cIj09Yi5hdHRyaWJ1dGVzLnR5cGUpcmV0dXJuIGEuY3JlYXRlRmFrZVBhcnNlckVsZW1lbnQoYixcImNrZV9oaWRkZW5cIixcImhpZGRlbmZpZWxkXCIpfX19LHthcHBseVRvQWxsOiEwfSl9fSk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmb3JtYXRcIix7cmVxdWlyZXM6XCJyaWNoY29tYm9cIixpbml0OmZ1bmN0aW9uKGEpe2lmKCFhLmJsb2NrbGVzcyl7Zm9yKHZhciBmPWEuY29uZmlnLGM9YS5sYW5nLmZvcm1hdCxsPWYuZm9ybWF0X3RhZ3Muc3BsaXQoXCI7XCIpLGQ9e30sbT0wLG49W10sZz0wO2c8bC5sZW5ndGg7ZysrKXt2YXIgaD1sW2ddLGs9bmV3IENLRURJVE9SLnN0eWxlKGZbXCJmb3JtYXRfXCIraF0pO2lmKCFhLmZpbHRlci5jdXN0b21Db25maWd8fGEuZmlsdGVyLmNoZWNrKGspKW0rKyxkW2hdPWssZFtoXS5fLmVudGVyTW9kZT1hLmNvbmZpZy5lbnRlck1vZGUsbi5wdXNoKGspfTAhPT1tJiZhLnVpLmFkZFJpY2hDb21ibyhcIkZvcm1hdFwiLHtsYWJlbDpjLmxhYmVsLHRpdGxlOmMucGFuZWxUaXRsZSx0b29sYmFyOlwic3R5bGVzLDIwXCIsYWxsb3dlZENvbnRlbnQ6bixwYW5lbDp7Y3NzOltDS0VESVRPUi5za2luLmdldFBhdGgoXCJlZGl0b3JcIildLmNvbmNhdChmLmNvbnRlbnRzQ3NzKSxcclxubXVsdGlTZWxlY3Q6ITEsYXR0cmlidXRlczp7XCJhcmlhLWxhYmVsXCI6Yy5wYW5lbFRpdGxlfX0saW5pdDpmdW5jdGlvbigpe3RoaXMuc3RhcnRHcm91cChjLnBhbmVsVGl0bGUpO2Zvcih2YXIgYSBpbiBkKXt2YXIgZT1jW1widGFnX1wiK2FdO3RoaXMuYWRkKGEsZFthXS5idWlsZFByZXZpZXcoZSksZSl9fSxvbkNsaWNrOmZ1bmN0aW9uKGIpe2EuZm9jdXMoKTthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yj1kW2JdO3ZhciBlPWEuZWxlbWVudFBhdGgoKTthW2IuY2hlY2tBY3RpdmUoZSxhKT9cInJlbW92ZVN0eWxlXCI6XCJhcHBseVN0eWxlXCJdKGIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLmZpcmUoXCJzYXZlU25hcHNob3RcIil9LDApfSxvblJlbmRlcjpmdW5jdGlvbigpe2Eub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihiKXt2YXIgZT10aGlzLmdldFZhbHVlKCk7Yj1iLmRhdGEucGF0aDt0aGlzLnJlZnJlc2goKTtmb3IodmFyIGMgaW4gZClpZihkW2NdLmNoZWNrQWN0aXZlKGIsYSkpe2MhPVxyXG5lJiZ0aGlzLnNldFZhbHVlKGMsYS5sYW5nLmZvcm1hdFtcInRhZ19cIitjXSk7cmV0dXJufXRoaXMuc2V0VmFsdWUoXCJcIil9LHRoaXMpfSxvbk9wZW46ZnVuY3Rpb24oKXt0aGlzLnNob3dBbGwoKTtmb3IodmFyIGIgaW4gZClhLmFjdGl2ZUZpbHRlci5jaGVjayhkW2JdKXx8dGhpcy5oaWRlSXRlbShiKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBiPWEuZWxlbWVudFBhdGgoKTtpZihiKXtpZihiLmlzQ29udGV4dEZvcihcInBcIikpZm9yKHZhciBjIGluIGQpaWYoYS5hY3RpdmVGaWx0ZXIuY2hlY2soZFtjXSkpcmV0dXJuO3RoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX19KX19fSk7Q0tFRElUT1IuY29uZmlnLmZvcm1hdF90YWdzPVwicDtoMTtoMjtoMztoNDtoNTtoNjtwcmU7YWRkcmVzcztkaXZcIjtDS0VESVRPUi5jb25maWcuZm9ybWF0X3A9e2VsZW1lbnQ6XCJwXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfZGl2PXtlbGVtZW50OlwiZGl2XCJ9O1xyXG5DS0VESVRPUi5jb25maWcuZm9ybWF0X3ByZT17ZWxlbWVudDpcInByZVwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2FkZHJlc3M9e2VsZW1lbnQ6XCJhZGRyZXNzXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfaDE9e2VsZW1lbnQ6XCJoMVwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2gyPXtlbGVtZW50OlwiaDJcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9oMz17ZWxlbWVudDpcImgzXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfaDQ9e2VsZW1lbnQ6XCJoNFwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2g1PXtlbGVtZW50OlwiaDVcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9oNj17ZWxlbWVudDpcImg2XCJ9OyhmdW5jdGlvbigpe3ZhciBiPXtjYW5VbmRvOiExLGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIik7YS5pbnNlcnRFbGVtZW50KGIpfSxhbGxvd2VkQ29udGVudDpcImhyXCIscmVxdWlyZWRDb250ZW50OlwiaHJcIn07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJob3Jpem9udGFscnVsZVwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuYmxvY2tsZXNzfHwoYS5hZGRDb21tYW5kKFwiaG9yaXpvbnRhbHJ1bGVcIixiKSxhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJIb3Jpem9udGFsUnVsZVwiLHtsYWJlbDphLmxhbmcuaG9yaXpvbnRhbHJ1bGUudG9vbGJhcixjb21tYW5kOlwiaG9yaXpvbnRhbHJ1bGVcIix0b29sYmFyOlwiaW5zZXJ0LDQwXCJ9KSl9fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaHRtbHdyaXRlclwiLHtpbml0OmZ1bmN0aW9uKGIpe3ZhciBhPW5ldyBDS0VESVRPUi5odG1sV3JpdGVyO2EuZm9yY2VTaW1wbGVBbXBlcnNhbmQ9Yi5jb25maWcuZm9yY2VTaW1wbGVBbXBlcnNhbmQ7YS5pbmRlbnRhdGlvbkNoYXJzPWIuY29uZmlnLmRhdGFJbmRlbnRhdGlvbkNoYXJzfHxcIlxcdFwiO2IuZGF0YVByb2Nlc3Nvci53cml0ZXI9YX19KTtcclxuQ0tFRElUT1IuaHRtbFdyaXRlcj1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyLCQ6ZnVuY3Rpb24oKXt0aGlzLmJhc2UoKTt0aGlzLmluZGVudGF0aW9uQ2hhcnM9XCJcXHRcIjt0aGlzLnNlbGZDbG9zaW5nRW5kPVwiIC9cXHgzZVwiO3RoaXMubGluZUJyZWFrQ2hhcnM9XCJcXG5cIjt0aGlzLnNvcnRBdHRyaWJ1dGVzPTE7dGhpcy5fLmluZGVudD0wO3RoaXMuXy5pbmRlbnRhdGlvbj1cIlwiO3RoaXMuXy5pblByZT0wO3RoaXMuXy5ydWxlcz17fTt2YXIgYj1DS0VESVRPUi5kdGQsYTtmb3IoYSBpbiBDS0VESVRPUi50b29scy5leHRlbmQoe30sYi4kbm9uQm9keUNvbnRlbnQsYi4kYmxvY2ssYi4kbGlzdEl0ZW0sYi4kdGFibGVDb250ZW50KSl0aGlzLnNldFJ1bGVzKGEse2luZGVudDohYlthXVtcIiNcIl0sYnJlYWtCZWZvcmVPcGVuOjEsYnJlYWtCZWZvcmVDbG9zZTohYlthXVtcIiNcIl0sYnJlYWtBZnRlckNsb3NlOjEsbmVlZHNTcGFjZTphIGluXHJcbmIuJGJsb2NrJiYhKGEgaW57bGk6MSxkdDoxLGRkOjF9KX0pO3RoaXMuc2V0UnVsZXMoXCJiclwiLHticmVha0FmdGVyT3BlbjoxfSk7dGhpcy5zZXRSdWxlcyhcInRpdGxlXCIse2luZGVudDowLGJyZWFrQWZ0ZXJPcGVuOjB9KTt0aGlzLnNldFJ1bGVzKFwic3R5bGVcIix7aW5kZW50OjAsYnJlYWtCZWZvcmVDbG9zZToxfSk7dGhpcy5zZXRSdWxlcyhcInByZVwiLHticmVha0FmdGVyT3BlbjoxLGluZGVudDowfSl9LHByb3RvOntvcGVuVGFnOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuXy5ydWxlc1tiXTt0aGlzLl8uYWZ0ZXJDbG9zZXImJmEmJmEubmVlZHNTcGFjZSYmdGhpcy5fLm5lZWRzU3BhY2UmJnRoaXMuXy5vdXRwdXQucHVzaChcIlxcblwiKTt0aGlzLl8uaW5kZW50P3RoaXMuaW5kZW50YXRpb24oKTphJiZhLmJyZWFrQmVmb3JlT3BlbiYmKHRoaXMubGluZUJyZWFrKCksdGhpcy5pbmRlbnRhdGlvbigpKTt0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzY1wiLGIpO3RoaXMuXy5hZnRlckNsb3Nlcj0wfSxcclxub3BlblRhZ0Nsb3NlOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5fLnJ1bGVzW2JdO2E/KHRoaXMuXy5vdXRwdXQucHVzaCh0aGlzLnNlbGZDbG9zaW5nRW5kKSxjJiZjLmJyZWFrQWZ0ZXJDbG9zZSYmKHRoaXMuXy5uZWVkc1NwYWNlPWMubmVlZHNTcGFjZSkpOih0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzZVwiKSxjJiZjLmluZGVudCYmKHRoaXMuXy5pbmRlbnRhdGlvbis9dGhpcy5pbmRlbnRhdGlvbkNoYXJzKSk7YyYmYy5icmVha0FmdGVyT3BlbiYmdGhpcy5saW5lQnJlYWsoKTtcInByZVwiPT1iJiYodGhpcy5fLmluUHJlPTEpfSxhdHRyaWJ1dGU6ZnVuY3Rpb24oYixhKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKHRoaXMuZm9yY2VTaW1wbGVBbXBlcnNhbmQmJihhPWEucmVwbGFjZSgvJmFtcDsvZyxcIlxceDI2XCIpKSxhPUNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGVBdHRyKGEpKTt0aGlzLl8ub3V0cHV0LnB1c2goXCIgXCIsYiwnXFx4M2RcIicsYSwnXCInKX0sY2xvc2VUYWc6ZnVuY3Rpb24oYil7dmFyIGE9XHJcbnRoaXMuXy5ydWxlc1tiXTthJiZhLmluZGVudCYmKHRoaXMuXy5pbmRlbnRhdGlvbj10aGlzLl8uaW5kZW50YXRpb24uc3Vic3RyKHRoaXMuaW5kZW50YXRpb25DaGFycy5sZW5ndGgpKTt0aGlzLl8uaW5kZW50P3RoaXMuaW5kZW50YXRpb24oKTphJiZhLmJyZWFrQmVmb3JlQ2xvc2UmJih0aGlzLmxpbmVCcmVhaygpLHRoaXMuaW5kZW50YXRpb24oKSk7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2MvXCIsYixcIlxceDNlXCIpO1wicHJlXCI9PWImJih0aGlzLl8uaW5QcmU9MCk7YSYmYS5icmVha0FmdGVyQ2xvc2UmJih0aGlzLmxpbmVCcmVhaygpLHRoaXMuXy5uZWVkc1NwYWNlPWEubmVlZHNTcGFjZSk7dGhpcy5fLmFmdGVyQ2xvc2VyPTF9LHRleHQ6ZnVuY3Rpb24oYil7dGhpcy5fLmluZGVudCYmKHRoaXMuaW5kZW50YXRpb24oKSwhdGhpcy5fLmluUHJlJiYoYj1DS0VESVRPUi50b29scy5sdHJpbShiKSkpO3RoaXMuXy5vdXRwdXQucHVzaChiKX0sY29tbWVudDpmdW5jdGlvbihiKXt0aGlzLl8uaW5kZW50JiZcclxudGhpcy5pbmRlbnRhdGlvbigpO3RoaXMuXy5vdXRwdXQucHVzaChcIlxceDNjIS0tXCIsYixcIi0tXFx4M2VcIil9LGxpbmVCcmVhazpmdW5jdGlvbigpeyF0aGlzLl8uaW5QcmUmJjA8dGhpcy5fLm91dHB1dC5sZW5ndGgmJnRoaXMuXy5vdXRwdXQucHVzaCh0aGlzLmxpbmVCcmVha0NoYXJzKTt0aGlzLl8uaW5kZW50PTF9LGluZGVudGF0aW9uOmZ1bmN0aW9uKCl7IXRoaXMuXy5pblByZSYmdGhpcy5fLmluZGVudGF0aW9uJiZ0aGlzLl8ub3V0cHV0LnB1c2godGhpcy5fLmluZGVudGF0aW9uKTt0aGlzLl8uaW5kZW50PTB9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fLm91dHB1dD1bXTt0aGlzLl8uaW5kZW50PTA7dGhpcy5fLmluZGVudGF0aW9uPVwiXCI7dGhpcy5fLmFmdGVyQ2xvc2VyPTA7dGhpcy5fLmluUHJlPTB9LHNldFJ1bGVzOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5fLnJ1bGVzW2JdO2M/Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGMsYSwhMCk6dGhpcy5fLnJ1bGVzW2JdPWF9fX0pOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaWZyYW1lXCIse3JlcXVpcmVzOlwiZGlhbG9nLGZha2VvYmplY3RzXCIsb25Mb2FkOmZ1bmN0aW9uKCl7Q0tFRElUT1IuYWRkQ3NzKFwiaW1nLmNrZV9pZnJhbWV7YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXMvcGxhY2Vob2xkZXIucG5nXCIpK1wiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7Ym9yZGVyOiAxcHggc29saWQgI2E5YTlhOTt3aWR0aDogODBweDtoZWlnaHQ6IDgwcHg7fVwiKX0saW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmxhbmcuaWZyYW1lLGM9XCJpZnJhbWVbYWxpZ24sbG9uZ2Rlc2MsZnJhbWVib3JkZXIsaGVpZ2h0LG5hbWUsc2Nyb2xsaW5nLHNyYyx0aXRsZSx3aWR0aF1cIjthLnBsdWdpbnMuZGlhbG9nYWR2dGFiJiYoYys9XCI7aWZyYW1lXCIrYS5wbHVnaW5zLmRpYWxvZ2FkdnRhYi5hbGxvd2VkQ29udGVudCh7aWQ6MSxcclxuY2xhc3NlczoxLHN0eWxlczoxfSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJpZnJhbWVcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2lmcmFtZS5qc1wiKTthLmFkZENvbW1hbmQoXCJpZnJhbWVcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImlmcmFtZVwiLHthbGxvd2VkQ29udGVudDpjLHJlcXVpcmVkQ29udGVudDpcImlmcmFtZVwifSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIklmcmFtZVwiLHtsYWJlbDpiLnRvb2xiYXIsY29tbWFuZDpcImlmcmFtZVwiLHRvb2xiYXI6XCJpbnNlcnQsODBcIn0pO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5lbGVtZW50O2IuaXMoXCJpbWdcIikmJlwiaWZyYW1lXCI9PWIuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSYmKGEuZGF0YS5kaWFsb2c9XCJpZnJhbWVcIil9KTthLmFkZE1lbnVJdGVtcyYmYS5hZGRNZW51SXRlbXMoe2lmcmFtZTp7bGFiZWw6Yi50aXRsZSxjb21tYW5kOlwiaWZyYW1lXCIsZ3JvdXA6XCJpbWFnZVwifX0pO1xyXG5hLmNvbnRleHRNZW51JiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGEpe2lmKGEmJmEuaXMoXCJpbWdcIikmJlwiaWZyYW1lXCI9PWEuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSlyZXR1cm57aWZyYW1lOkNLRURJVE9SLlRSSVNUQVRFX09GRn19KX0sYWZ0ZXJJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YVByb2Nlc3NvcjsoYj1iJiZiLmRhdGFGaWx0ZXIpJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7aWZyYW1lOmZ1bmN0aW9uKGIpe3JldHVybiBhLmNyZWF0ZUZha2VQYXJzZXJFbGVtZW50KGIsXCJja2VfaWZyYW1lXCIsXCJpZnJhbWVcIiwhMCl9fX0pfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBtKGEpe2Z1bmN0aW9uIGYoYSl7dmFyIGI9ITE7Zy5hdHRhY2hMaXN0ZW5lcihnLFwia2V5ZG93blwiLGZ1bmN0aW9uKCl7dmFyIGQ9Yy5nZXRCb2R5KCkuZ2V0RWxlbWVudHNCeVRhZyhhKTtpZighYil7Zm9yKHZhciBlPTA7ZTxkLmNvdW50KCk7ZSsrKWQuZ2V0SXRlbShlKS5zZXRDdXN0b21EYXRhKFwicmV0YWluXCIsITApO2I9ITB9fSxudWxsLG51bGwsMSk7Zy5hdHRhY2hMaXN0ZW5lcihnLFwia2V5dXBcIixmdW5jdGlvbigpe3ZhciBkPWMuZ2V0RWxlbWVudHNCeVRhZyhhKTtiJiYoMSE9ZC5jb3VudCgpfHxkLmdldEl0ZW0oMCkuZ2V0Q3VzdG9tRGF0YShcInJldGFpblwiKXx8ZC5nZXRJdGVtKDApLnJlbW92ZSgxKSxiPSExKX0pfXZhciBiPXRoaXMuZWRpdG9yLGM9YS5kb2N1bWVudCxkPWMuYm9keSxlPWMuZ2V0RWxlbWVudEJ5SWQoXCJja2VfYWN0c2NycHRcIik7ZSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpOyhlPWMuZ2V0RWxlbWVudEJ5SWQoXCJja2Vfc2hpbXNjcnB0XCIpKSYmXHJcbmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTsoZT1jLmdldEVsZW1lbnRCeUlkKFwiY2tlX2Jhc2V0YWdzY3JwdFwiKSkmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTtkLmNvbnRlbnRFZGl0YWJsZT0hMDtDS0VESVRPUi5lbnYuaWUmJihkLmhpZGVGb2N1cz0hMCxkLmRpc2FibGVkPSEwLGQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO2RlbGV0ZSB0aGlzLl8uaXNMb2FkaW5nRGF0YTt0aGlzLiQ9ZDtjPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQoYyk7dGhpcy5zZXR1cCgpO3RoaXMuZml4SW5pdGlhbFNlbGVjdGlvbigpO3ZhciBnPXRoaXM7Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2UmJmMuZ2V0RG9jdW1lbnRFbGVtZW50KCkuYWRkQ2xhc3MoYy4kLmNvbXBhdE1vZGUpO0NLRURJVE9SLmVudi5pZSYmIUNLRURJVE9SLmVudi5lZGdlJiZiLmVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfUD9mKFwicFwiKTpDS0VESVRPUi5lbnYuZWRnZSYmYi5lbnRlck1vZGUhPVxyXG5DS0VESVRPUi5FTlRFUl9ESVYmJmYoXCJkaXZcIik7aWYoQ0tFRElUT1IuZW52LndlYmtpdHx8Q0tFRElUT1IuZW52LmllJiYxMDxDS0VESVRPUi5lbnYudmVyc2lvbiljLmdldERvY3VtZW50RWxlbWVudCgpLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldFRhcmdldCgpLmlzKFwiaHRtbFwiKSYmc2V0VGltZW91dChmdW5jdGlvbigpe2IuZWRpdGFibGUoKS5mb2N1cygpfSl9KTtuKGIpO3RyeXtiLmRvY3VtZW50LiQuZXhlY0NvbW1hbmQoXCIyRC1wb3NpdGlvblwiLCExLCEwKX1jYXRjaChoKXt9KENLRURJVE9SLmVudi5nZWNrb3x8Q0tFRElUT1IuZW52LmllJiZcIkNTUzFDb21wYXRcIj09Yi5kb2N1bWVudC4kLmNvbXBhdE1vZGUpJiZ0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kYXRhLmdldEtleXN0cm9rZSgpO2lmKDMzPT1jfHwzND09YylpZihDS0VESVRPUi5lbnYuaWUpc2V0VGltZW91dChmdW5jdGlvbigpe2IuZ2V0U2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKX0sXHJcbjApO2Vsc2UgaWYoYi53aW5kb3cuJC5pbm5lckhlaWdodD50aGlzLiQub2Zmc2V0SGVpZ2h0KXt2YXIgZD1iLmNyZWF0ZVJhbmdlKCk7ZFszMz09Yz9cIm1vdmVUb0VsZW1lbnRFZGl0U3RhcnRcIjpcIm1vdmVUb0VsZW1lbnRFZGl0RW5kXCJdKHRoaXMpO2Quc2VsZWN0KCk7YS5kYXRhLnByZXZlbnREZWZhdWx0KCl9fSk7Q0tFRElUT1IuZW52LmllJiZ0aGlzLmF0dGFjaExpc3RlbmVyKGMsXCJibHVyXCIsZnVuY3Rpb24oKXt0cnl7Yy4kLnNlbGVjdGlvbi5lbXB0eSgpfWNhdGNoKGEpe319KTtDS0VESVRPUi5lbnYuaU9TJiZ0aGlzLmF0dGFjaExpc3RlbmVyKGMsXCJ0b3VjaGVuZFwiLGZ1bmN0aW9uKCl7YS5mb2N1cygpfSk7ZD1iLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJ0aXRsZVwiKS5nZXRJdGVtKDApO2QuZGF0YShcImNrZS10aXRsZVwiLGQuZ2V0VGV4dCgpKTtDS0VESVRPUi5lbnYuaWUmJihiLmRvY3VtZW50LiQudGl0bGU9dGhpcy5fLmRvY1RpdGxlKTtDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJ1bmxvYWRlZFwiPT1cclxudGhpcy5zdGF0dXMmJih0aGlzLnN0YXR1cz1cInJlYWR5XCIpO2IuZmlyZShcImNvbnRlbnREb21cIik7dGhpcy5fLmlzUGVuZGluZ0ZvY3VzJiYoYi5mb2N1cygpLHRoaXMuXy5pc1BlbmRpbmdGb2N1cz0hMSk7c2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcImRhdGFSZWFkeVwiKX0sMCl9LDAsdGhpcyl9ZnVuY3Rpb24gbihhKXtmdW5jdGlvbiBmKCl7dmFyIGM7YS5lZGl0YWJsZSgpLmF0dGFjaExpc3RlbmVyKGEsXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBkPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7ZCYmKGMmJihjLmRldGFjaEV2ZW50KFwib25yZXNpemVzdGFydFwiLGIpLGM9bnVsbCksZC4kLmF0dGFjaEV2ZW50KFwib25yZXNpemVzdGFydFwiLGIpLGM9ZC4kKX0pfWZ1bmN0aW9uIGIoYSl7YS5yZXR1cm5WYWx1ZT0hMX1pZihDS0VESVRPUi5lbnYuZ2Vja28pdHJ5e3ZhciBjPWEuZG9jdW1lbnQuJDtjLmV4ZWNDb21tYW5kKFwiZW5hYmxlT2JqZWN0UmVzaXppbmdcIixcclxuITEsIWEuY29uZmlnLmRpc2FibGVPYmplY3RSZXNpemluZyk7Yy5leGVjQ29tbWFuZChcImVuYWJsZUlubGluZVRhYmxlRWRpdGluZ1wiLCExLCFhLmNvbmZpZy5kaXNhYmxlTmF0aXZlVGFibGVIYW5kbGVzKX1jYXRjaChkKXt9ZWxzZSBDS0VESVRPUi5lbnYuaWUmJjExPkNLRURJVE9SLmVudi52ZXJzaW9uJiZhLmNvbmZpZy5kaXNhYmxlT2JqZWN0UmVzaXppbmcmJmYoYSl9ZnVuY3Rpb24gcCgpe3ZhciBhPVtdO2lmKDg8PUNLRURJVE9SLmRvY3VtZW50LiQuZG9jdW1lbnRNb2RlKXthLnB1c2goXCJodG1sLkNTUzFDb21wYXQgW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2Vde21pbi1oZWlnaHQ6MCAhaW1wb3J0YW50fVwiKTt2YXIgZj1bXSxiO2ZvcihiIGluIENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHkpZi5wdXNoKFwiaHRtbC5DU1MxQ29tcGF0IFwiK2IrXCJbY29udGVudGVkaXRhYmxlXFx4M2RmYWxzZV1cIik7YS5wdXNoKGYuam9pbihcIixcIikrXCJ7ZGlzcGxheTppbmxpbmUtYmxvY2t9XCIpfWVsc2UgQ0tFRElUT1IuZW52LmdlY2tvJiZcclxuKGEucHVzaChcImh0bWx7aGVpZ2h0OjEwMCUgIWltcG9ydGFudH1cIiksYS5wdXNoKFwiaW1nOi1tb3otYnJva2Vuey1tb3otZm9yY2UtYnJva2VuLWltYWdlLWljb246MTttaW4td2lkdGg6MjRweDttaW4taGVpZ2h0OjI0cHh9XCIpKTthLnB1c2goXCJodG1se2N1cnNvcjp0ZXh0OypjdXJzb3I6YXV0b31cIik7YS5wdXNoKFwiaW1nLGlucHV0LHRleHRhcmVhe2N1cnNvcjpkZWZhdWx0fVwiKTtyZXR1cm4gYS5qb2luKFwiXFxuXCIpfUNLRURJVE9SLnBsdWdpbnMuYWRkKFwid3lzaXd5Z2FyZWFcIix7aW5pdDpmdW5jdGlvbihhKXthLmNvbmZpZy5mdWxsUGFnZSYmYS5hZGRGZWF0dXJlKHthbGxvd2VkQ29udGVudDpcImh0bWwgaGVhZCB0aXRsZTsgc3R5bGUgW21lZGlhLHR5cGVdOyBib2R5ICgqKVtpZF07IG1ldGEgbGluayBbKl1cIixyZXF1aXJlZENvbnRlbnQ6XCJib2R5XCJ9KTthLmFkZE1vZGUoXCJ3eXNpd3lnXCIsZnVuY3Rpb24oZil7ZnVuY3Rpb24gYihiKXtiJiZiLnJlbW92ZUxpc3RlbmVyKCk7YS5lZGl0YWJsZShuZXcgbChhLFxyXG5kLiQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5KSk7YS5zZXREYXRhKGEuZ2V0RGF0YSgxKSxmKX12YXIgYz1cImRvY3VtZW50Lm9wZW4oKTtcIisoQ0tFRElUT1IuZW52LmllP1wiKFwiK0NLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtcIjpcIlwiKStcImRvY3VtZW50LmNsb3NlKCk7XCIsYz1DS0VESVRPUi5lbnYuYWlyP1wiamF2YXNjcmlwdDp2b2lkKDApXCI6Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2U/XCJqYXZhc2NyaXB0OnZvaWQoZnVuY3Rpb24oKXtcIitlbmNvZGVVUklDb21wb25lbnQoYykrXCJ9KCkpXCI6XCJcIixkPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY2lmcmFtZSBzcmNcXHgzZFwiJytjKydcIiBmcmFtZUJvcmRlclxceDNkXCIwXCJcXHgzZVxceDNjL2lmcmFtZVxceDNlJyk7ZC5zZXRTdHlsZXMoe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIn0pO2QuYWRkQ2xhc3MoXCJja2Vfd3lzaXd5Z19mcmFtZVwiKS5hZGRDbGFzcyhcImNrZV9yZXNldFwiKTtcclxuYz1hLnVpLnNwYWNlKFwiY29udGVudHNcIik7Yy5hcHBlbmQoZCk7dmFyIGU9Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2V8fENLRURJVE9SLmVudi5nZWNrbztpZihlKWQub24oXCJsb2FkXCIsYik7dmFyIGc9YS50aXRsZSxoPWEuZmlyZShcImFyaWFFZGl0b3JIZWxwTGFiZWxcIix7fSkubGFiZWw7ZyYmKENLRURJVE9SLmVudi5pZSYmaCYmKGcrPVwiLCBcIitoKSxkLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsZykpO2lmKGgpe3ZhciBnPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpLGs9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjc3BhbiBpZFxceDNkXCInK2crJ1wiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2UnK2grXCJcXHgzYy9zcGFuXFx4M2VcIik7Yy5hcHBlbmQoaywxKTtkLnNldEF0dHJpYnV0ZShcImFyaWEtZGVzY3JpYmVkYnlcIixnKX1hLm9uKFwiYmVmb3JlTW9kZVVubG9hZFwiLGZ1bmN0aW9uKGEpe2EucmVtb3ZlTGlzdGVuZXIoKTtrJiZrLnJlbW92ZSgpfSk7XHJcbmQuc2V0QXR0cmlidXRlcyh7dGFiSW5kZXg6YS50YWJJbmRleCxhbGxvd1RyYW5zcGFyZW5jeTpcInRydWVcIn0pOyFlJiZiKCk7YS5maXJlKFwiYXJpYVdpZGdldFwiLGQpfSl9fSk7Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5hZGRDb250ZW50c0Nzcz1mdW5jdGlvbihhKXt2YXIgZj10aGlzLmNvbmZpZyxiPWYuY29udGVudHNDc3M7Q0tFRElUT1IudG9vbHMuaXNBcnJheShiKXx8KGYuY29udGVudHNDc3M9Yj9bYl06W10pO2YuY29udGVudHNDc3MucHVzaChhKX07dmFyIGw9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oKXt0aGlzLmJhc2UuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuXy5mcmFtZUxvYWRlZEhhbmRsZXI9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChtLDAsdGhpcyxhKX0sdGhpcyk7dGhpcy5fLmRvY1RpdGxlPXRoaXMuZ2V0V2luZG93KCkuZ2V0RnJhbWUoKS5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKX0sXHJcbmJhc2U6Q0tFRElUT1IuZWRpdGFibGUscHJvdG86e3NldERhdGE6ZnVuY3Rpb24oYSxmKXt2YXIgYj10aGlzLmVkaXRvcjtpZihmKXRoaXMuc2V0SHRtbChhKSx0aGlzLmZpeEluaXRpYWxTZWxlY3Rpb24oKSxiLmZpcmUoXCJkYXRhUmVhZHlcIik7ZWxzZXt0aGlzLl8uaXNMb2FkaW5nRGF0YT0hMDtiLl8uZGF0YVN0b3JlPXtpZDoxfTt2YXIgYz1iLmNvbmZpZyxkPWMuZnVsbFBhZ2UsZT1jLmRvY1R5cGUsZz1DS0VESVRPUi50b29scy5idWlsZFN0eWxlSHRtbChwKCkpLnJlcGxhY2UoLzxzdHlsZT4vLCdcXHgzY3N0eWxlIGRhdGEtY2tlLXRlbXBcXHgzZFwiMVwiXFx4M2UnKTtkfHwoZys9Q0tFRElUT1IudG9vbHMuYnVpbGRTdHlsZUh0bWwoYi5jb25maWcuY29udGVudHNDc3MpKTt2YXIgaD1jLmJhc2VIcmVmPydcXHgzY2Jhc2UgaHJlZlxceDNkXCInK2MuYmFzZUhyZWYrJ1wiIGRhdGEtY2tlLXRlbXBcXHgzZFwiMVwiIC9cXHgzZSc6XCJcIjtkJiYoYT1hLnJlcGxhY2UoLzwhRE9DVFlQRVtePl0qPi9pLGZ1bmN0aW9uKGEpe2IuZG9jVHlwZT1cclxuZT1hO3JldHVyblwiXCJ9KS5yZXBsYWNlKC88XFw/eG1sXFxzW15cXD9dKlxcPz4vaSxmdW5jdGlvbihhKXtiLnhtbERlY2xhcmF0aW9uPWE7cmV0dXJuXCJcIn0pKTthPWIuZGF0YVByb2Nlc3Nvci50b0h0bWwoYSk7ZD8oLzxib2R5W1xcc3w+XS8udGVzdChhKXx8KGE9XCJcXHgzY2JvZHlcXHgzZVwiK2EpLC88aHRtbFtcXHN8Pl0vLnRlc3QoYSl8fChhPVwiXFx4M2NodG1sXFx4M2VcIithK1wiXFx4M2MvaHRtbFxceDNlXCIpLC88aGVhZFtcXHN8Pl0vLnRlc3QoYSk/Lzx0aXRsZVtcXHN8Pl0vLnRlc3QoYSl8fChhPWEucmVwbGFjZSgvPGhlYWRbXj5dKj4vLFwiJFxceDI2XFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVwiKSk6YT1hLnJlcGxhY2UoLzxodG1sW14+XSo+LyxcIiRcXHgyNlxceDNjaGVhZFxceDNlXFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVxceDNjL2hlYWRcXHgzZVwiKSxoJiYoYT1hLnJlcGxhY2UoLzxoZWFkW14+XSo/Pi8sXCIkXFx4MjZcIitoKSksYT1hLnJlcGxhY2UoLzxcXC9oZWFkXFxzKj4vLGcrXCIkXFx4MjZcIiksYT1cclxuZSthKTphPWMuZG9jVHlwZSsnXFx4M2NodG1sIGRpclxceDNkXCInK2MuY29udGVudHNMYW5nRGlyZWN0aW9uKydcIiBsYW5nXFx4M2RcIicrKGMuY29udGVudHNMYW5ndWFnZXx8Yi5sYW5nQ29kZSkrJ1wiXFx4M2VcXHgzY2hlYWRcXHgzZVxceDNjdGl0bGVcXHgzZScrdGhpcy5fLmRvY1RpdGxlK1wiXFx4M2MvdGl0bGVcXHgzZVwiK2grZytcIlxceDNjL2hlYWRcXHgzZVxceDNjYm9keVwiKyhjLmJvZHlJZD8nIGlkXFx4M2RcIicrYy5ib2R5SWQrJ1wiJzpcIlwiKSsoYy5ib2R5Q2xhc3M/JyBjbGFzc1xceDNkXCInK2MuYm9keUNsYXNzKydcIic6XCJcIikrXCJcXHgzZVwiK2ErXCJcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2VcIjtDS0VESVRPUi5lbnYuZ2Vja28mJihhPWEucmVwbGFjZSgvPGJvZHkvLCdcXHgzY2JvZHkgY29udGVudGVkaXRhYmxlXFx4M2RcInRydWVcIiAnKSwyRTQ+Q0tFRElUT1IuZW52LnZlcnNpb24mJihhPWEucmVwbGFjZSgvPGJvZHlbXj5dKj4vLFwiJFxceDI2XFx4M2MhLS0gY2tlLWNvbnRlbnQtc3RhcnQgLS1cXHgzZVwiKSkpO1xyXG5jPSdcXHgzY3NjcmlwdCBpZFxceDNkXCJja2VfYWN0c2NycHRcIiB0eXBlXFx4M2RcInRleHQvamF2YXNjcmlwdFwiJysoQ0tFRElUT1IuZW52LmllPycgZGVmZXJcXHgzZFwiZGVmZXJcIiAnOlwiXCIpK1wiXFx4M2V2YXIgd2FzTG9hZGVkXFx4M2QwO2Z1bmN0aW9uIG9ubG9hZCgpe2lmKCF3YXNMb2FkZWQpd2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oXCIrdGhpcy5fLmZyYW1lTG9hZGVkSGFuZGxlcitcIix3aW5kb3cpO3dhc0xvYWRlZFxceDNkMTt9XCIrKENLRURJVE9SLmVudi5pZT9cIm9ubG9hZCgpO1wiOidkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBvbmxvYWQsIGZhbHNlICk7JykrXCJcXHgzYy9zY3JpcHRcXHgzZVwiO0NLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbiYmKGMrPSdcXHgzY3NjcmlwdCBpZFxceDNkXCJja2Vfc2hpbXNjcnB0XCJcXHgzZXdpbmRvdy5wYXJlbnQuQ0tFRElUT1IudG9vbHMuZW5hYmxlSHRtbDVFbGVtZW50cyhkb2N1bWVudClcXHgzYy9zY3JpcHRcXHgzZScpO1xyXG5oJiZDS0VESVRPUi5lbnYuaWUmJjEwPkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYys9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9iYXNldGFnc2NycHRcIlxceDNldmFyIGJhc2VUYWcgXFx4M2QgZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXCJiYXNlXCIgKTtiYXNlVGFnLmhyZWYgXFx4M2QgYmFzZVRhZy5ocmVmO1xceDNjL3NjcmlwdFxceDNlJyk7YT1hLnJlcGxhY2UoLyg/PVxccyo8XFwvKDo/aGVhZCk+KS8sYyk7dGhpcy5jbGVhckN1c3RvbURhdGEoKTt0aGlzLmNsZWFyTGlzdGVuZXJzKCk7Yi5maXJlKFwiY29udGVudERvbVVubG9hZFwiKTt2YXIgaz10aGlzLmdldERvY3VtZW50KCk7dHJ5e2sud3JpdGUoYSl9Y2F0Y2gobCl7c2V0VGltZW91dChmdW5jdGlvbigpe2sud3JpdGUoYSl9LDApfX19LGdldERhdGE6ZnVuY3Rpb24oYSl7aWYoYSlyZXR1cm4gdGhpcy5nZXRIdG1sKCk7YT10aGlzLmVkaXRvcjt2YXIgZj1hLmNvbmZpZyxiPWYuZnVsbFBhZ2UsYz1iJiZhLmRvY1R5cGUsZD1iJiZhLnhtbERlY2xhcmF0aW9uLFxyXG5lPXRoaXMuZ2V0RG9jdW1lbnQoKSxiPWI/ZS5nZXREb2N1bWVudEVsZW1lbnQoKS5nZXRPdXRlckh0bWwoKTplLmdldEJvZHkoKS5nZXRIdG1sKCk7Q0tFRElUT1IuZW52LmdlY2tvJiZmLmVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfQlImJihiPWIucmVwbGFjZSgvPGJyPig/PVxccyooOj8kfDxcXC9ib2R5PikpLyxcIlwiKSk7Yj1hLmRhdGFQcm9jZXNzb3IudG9EYXRhRm9ybWF0KGIpO2QmJihiPWQrXCJcXG5cIitiKTtjJiYoYj1jK1wiXFxuXCIrYik7cmV0dXJuIGJ9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5fLmlzTG9hZGluZ0RhdGE/dGhpcy5fLmlzUGVuZGluZ0ZvY3VzPSEwOmwuYmFzZVByb3RvLmZvY3VzLmNhbGwodGhpcyl9LGRldGFjaDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWRpdG9yLGY9YS5kb2N1bWVudCxiO3RyeXtiPWEud2luZG93LmdldEZyYW1lKCl9Y2F0Y2goYyl7fWwuYmFzZVByb3RvLmRldGFjaC5jYWxsKHRoaXMpO3RoaXMuY2xlYXJDdXN0b21EYXRhKCk7Zi5nZXREb2N1bWVudEVsZW1lbnQoKS5jbGVhckN1c3RvbURhdGEoKTtcclxuQ0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24odGhpcy5fLmZyYW1lTG9hZGVkSGFuZGxlcik7YiYmYi5nZXRQYXJlbnQoKT8oYi5jbGVhckN1c3RvbURhdGEoKSwoYT1iLnJlbW92ZUN1c3RvbURhdGEoXCJvblJlc2l6ZVwiKSkmJmEucmVtb3ZlTGlzdGVuZXIoKSxiLnJlbW92ZSgpKTpDS0VESVRPUi53YXJuKFwiZWRpdG9yLWRlc3Ryb3ktaWZyYW1lXCIpfX19KX0pKCk7Q0tFRElUT1IuY29uZmlnLmRpc2FibGVPYmplY3RSZXNpemluZz0hMTtDS0VESVRPUi5jb25maWcuZGlzYWJsZU5hdGl2ZVRhYmxlSGFuZGxlcz0hMDtDS0VESVRPUi5jb25maWcuZGlzYWJsZU5hdGl2ZVNwZWxsQ2hlY2tlcj0hMDsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGIsYSl7YXx8KGE9Yi5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZEVsZW1lbnQoKSk7aWYoYSYmYS5pcyhcImltZ1wiKSYmIWEuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKSYmIWEuaXNSZWFkT25seSgpKXJldHVybiBhfWZ1bmN0aW9uIGYoYil7dmFyIGE9Yi5nZXRTdHlsZShcImZsb2F0XCIpO2lmKFwiaW5oZXJpdFwiPT1hfHxcIm5vbmVcIj09YSlhPTA7YXx8KGE9Yi5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSk7cmV0dXJuIGF9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJpbWFnZVwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYil7aWYoIWIucGx1Z2lucy5pbWFnZTIpe0NLRURJVE9SLmRpYWxvZy5hZGQoXCJpbWFnZVwiLHRoaXMucGF0aCtcImRpYWxvZ3MvaW1hZ2UuanNcIik7dmFyIGE9XCJpbWdbYWx0LCFzcmNde2JvcmRlci1zdHlsZSxib3JkZXItd2lkdGgsZmxvYXQsaGVpZ2h0LG1hcmdpbixtYXJnaW4tYm90dG9tLG1hcmdpbi1sZWZ0LG1hcmdpbi1yaWdodCxtYXJnaW4tdG9wLHdpZHRofVwiO1xyXG5DS0VESVRPUi5kaWFsb2cuaXNUYWJFbmFibGVkKGIsXCJpbWFnZVwiLFwiYWR2YW5jZWRcIikmJihhPVwiaW1nW2FsdCxkaXIsaWQsbGFuZyxsb25nZGVzYywhc3JjLHRpdGxlXXsqfSgqKVwiKTtiLmFkZENvbW1hbmQoXCJpbWFnZVwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiaW1hZ2VcIix7YWxsb3dlZENvbnRlbnQ6YSxyZXF1aXJlZENvbnRlbnQ6XCJpbWdbYWx0LHNyY11cIixjb250ZW50VHJhbnNmb3JtYXRpb25zOltbXCJpbWd7d2lkdGh9OiBzaXplVG9TdHlsZVwiLFwiaW1nW3dpZHRoXTogc2l6ZVRvQXR0cmlidXRlXCJdLFtcImltZ3tmbG9hdH06IGFsaWdubWVudFRvU3R5bGVcIixcImltZ1thbGlnbl06IGFsaWdubWVudFRvQXR0cmlidXRlXCJdXX0pKTtiLnVpLmFkZEJ1dHRvbiYmYi51aS5hZGRCdXR0b24oXCJJbWFnZVwiLHtsYWJlbDpiLmxhbmcuY29tbW9uLmltYWdlLGNvbW1hbmQ6XCJpbWFnZVwiLHRvb2xiYXI6XCJpbnNlcnQsMTBcIn0pO2Iub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGIpe3ZhciBhPVxyXG5iLmRhdGEuZWxlbWVudDshYS5pcyhcImltZ1wiKXx8YS5kYXRhKFwiY2tlLXJlYWxlbGVtZW50XCIpfHxhLmlzUmVhZE9ubHkoKXx8KGIuZGF0YS5kaWFsb2c9XCJpbWFnZVwiKX0pO2IuYWRkTWVudUl0ZW1zJiZiLmFkZE1lbnVJdGVtcyh7aW1hZ2U6e2xhYmVsOmIubGFuZy5pbWFnZS5tZW51LGNvbW1hbmQ6XCJpbWFnZVwiLGdyb3VwOlwiaW1hZ2VcIn19KTtiLmNvbnRleHRNZW51JiZiLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGEpe2lmKGUoYixhKSlyZXR1cm57aW1hZ2U6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfX0pfX0sYWZ0ZXJJbml0OmZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGEoYSl7dmFyIGQ9Yi5nZXRDb21tYW5kKFwianVzdGlmeVwiK2EpO2lmKGQpe2lmKFwibGVmdFwiPT1hfHxcInJpZ2h0XCI9PWEpZC5vbihcImV4ZWNcIixmdW5jdGlvbihkKXt2YXIgYz1lKGIpLGc7YyYmKGc9ZihjKSxnPT1hPyhjLnJlbW92ZVN0eWxlKFwiZmxvYXRcIiksYT09ZihjKSYmYy5yZW1vdmVBdHRyaWJ1dGUoXCJhbGlnblwiKSk6XHJcbmMuc2V0U3R5bGUoXCJmbG9hdFwiLGEpLGQuY2FuY2VsKCkpfSk7ZC5vbihcInJlZnJlc2hcIixmdW5jdGlvbihkKXt2YXIgYz1lKGIpO2MmJihjPWYoYyksdGhpcy5zZXRTdGF0ZShjPT1hP0NLRURJVE9SLlRSSVNUQVRFX09OOlwicmlnaHRcIj09YXx8XCJsZWZ0XCI9PWE/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKSxkLmNhbmNlbCgpKX0pfX1iLnBsdWdpbnMuaW1hZ2UyfHwoYShcImxlZnRcIiksYShcInJpZ2h0XCIpLGEoXCJjZW50ZXJcIiksYShcImJsb2NrXCIpKX19KX0pKCk7Q0tFRElUT1IuY29uZmlnLmltYWdlX3JlbW92ZUxpbmtCeUVtcHR5VVJMPSEwOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG0oYSxiKXt2YXIgZSxmO2Iub24oXCJyZWZyZXNoXCIsZnVuY3Rpb24oYSl7dmFyIGI9W2tdLGM7Zm9yKGMgaW4gYS5kYXRhLnN0YXRlcyliLnB1c2goYS5kYXRhLnN0YXRlc1tjXSk7dGhpcy5zZXRTdGF0ZShDS0VESVRPUi50b29scy5zZWFyY2goYixwKT9wOmspfSxiLG51bGwsMTAwKTtiLm9uKFwiZXhlY1wiLGZ1bmN0aW9uKGIpe2U9YS5nZXRTZWxlY3Rpb24oKTtmPWUuY3JlYXRlQm9va21hcmtzKDEpO2IuZGF0YXx8KGIuZGF0YT17fSk7Yi5kYXRhLmRvbmU9ITF9LGIsbnVsbCwwKTtiLm9uKFwiZXhlY1wiLGZ1bmN0aW9uKCl7YS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2Uuc2VsZWN0Qm9va21hcmtzKGYpfSxiLG51bGwsMTAwKX12YXIgaz1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxwPUNLRURJVE9SLlRSSVNUQVRFX09GRjtDS0VESVRPUi5wbHVnaW5zLmFkZChcImluZGVudFwiLHtpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLnBsdWdpbnMuaW5kZW50LmdlbmVyaWNEZWZpbml0aW9uO1xyXG5tKGEsYS5hZGRDb21tYW5kKFwiaW5kZW50XCIsbmV3IGIoITApKSk7bShhLGEuYWRkQ29tbWFuZChcIm91dGRlbnRcIixuZXcgYikpO2EudWkuYWRkQnV0dG9uJiYoYS51aS5hZGRCdXR0b24oXCJJbmRlbnRcIix7bGFiZWw6YS5sYW5nLmluZGVudC5pbmRlbnQsY29tbWFuZDpcImluZGVudFwiLGRpcmVjdGlvbmFsOiEwLHRvb2xiYXI6XCJpbmRlbnQsMjBcIn0pLGEudWkuYWRkQnV0dG9uKFwiT3V0ZGVudFwiLHtsYWJlbDphLmxhbmcuaW5kZW50Lm91dGRlbnQsY29tbWFuZDpcIm91dGRlbnRcIixkaXJlY3Rpb25hbDohMCx0b29sYmFyOlwiaW5kZW50LDEwXCJ9KSk7YS5vbihcImRpckNoYW5nZWRcIixmdW5jdGlvbihiKXt2YXIgZj1hLmNyZWF0ZVJhbmdlKCksbD1iLmRhdGEubm9kZTtmLnNldFN0YXJ0QmVmb3JlKGwpO2Yuc2V0RW5kQWZ0ZXIobCk7Zm9yKHZhciBuPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYpLGM7Yz1uLm5leHQoKTspaWYoYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpaWYoIWMuZXF1YWxzKGwpJiZcclxuYy5nZXREaXJlY3Rpb24oKSlmLnNldFN0YXJ0QWZ0ZXIoYyksbj1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihmKTtlbHNle3ZhciBkPWEuY29uZmlnLmluZGVudENsYXNzZXM7aWYoZClmb3IodmFyIGc9XCJsdHJcIj09Yi5kYXRhLmRpcj9bXCJfcnRsXCIsXCJcIl06W1wiXCIsXCJfcnRsXCJdLGg9MDtoPGQubGVuZ3RoO2grKyljLmhhc0NsYXNzKGRbaF0rZ1swXSkmJihjLnJlbW92ZUNsYXNzKGRbaF0rZ1swXSksYy5hZGRDbGFzcyhkW2hdK2dbMV0pKTtkPWMuZ2V0U3R5bGUoXCJtYXJnaW4tcmlnaHRcIik7Zz1jLmdldFN0eWxlKFwibWFyZ2luLWxlZnRcIik7ZD9jLnNldFN0eWxlKFwibWFyZ2luLWxlZnRcIixkKTpjLnJlbW92ZVN0eWxlKFwibWFyZ2luLWxlZnRcIik7Zz9jLnNldFN0eWxlKFwibWFyZ2luLXJpZ2h0XCIsZyk6Yy5yZW1vdmVTdHlsZShcIm1hcmdpbi1yaWdodFwiKX19KX19KTtDS0VESVRPUi5wbHVnaW5zLmluZGVudD17Z2VuZXJpY0RlZmluaXRpb246ZnVuY3Rpb24oYSl7dGhpcy5pc0luZGVudD0hIWE7XHJcbnRoaXMuc3RhcnREaXNhYmxlZD0hdGhpcy5pc0luZGVudH0sc3BlY2lmaWNEZWZpbml0aW9uOmZ1bmN0aW9uKGEsYixlKXt0aGlzLm5hbWU9Yjt0aGlzLmVkaXRvcj1hO3RoaXMuam9icz17fTt0aGlzLmVudGVyQnI9YS5jb25maWcuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUjt0aGlzLmlzSW5kZW50PSEhZTt0aGlzLnJlbGF0ZWRHbG9iYWw9ZT9cImluZGVudFwiOlwib3V0ZGVudFwiO3RoaXMuaW5kZW50S2V5PWU/OTpDS0VESVRPUi5TSElGVCs5O3RoaXMuZGF0YWJhc2U9e319LHJlZ2lzdGVyQ29tbWFuZHM6ZnVuY3Rpb24oYSxiKXthLm9uKFwicGx1Z2luc0xvYWRlZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGIpKGZ1bmN0aW9uKGEsYil7dmFyIGU9YS5nZXRDb21tYW5kKGIucmVsYXRlZEdsb2JhbCksYztmb3IoYyBpbiBiLmpvYnMpZS5vbihcImV4ZWNcIixmdW5jdGlvbihkKXtkLmRhdGEuZG9uZXx8KGEuZmlyZShcImxvY2tTbmFwc2hvdFwiKSxiLmV4ZWNKb2IoYSxjKSYmKGQuZGF0YS5kb25lPVxyXG4hMCksYS5maXJlKFwidW5sb2NrU25hcHNob3RcIiksQ0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGIuZGF0YWJhc2UpKX0sdGhpcyxudWxsLGMpLGUub24oXCJyZWZyZXNoXCIsZnVuY3Rpb24oZCl7ZC5kYXRhLnN0YXRlc3x8KGQuZGF0YS5zdGF0ZXM9e30pO2QuZGF0YS5zdGF0ZXNbYi5uYW1lK1wiQFwiK2NdPWIucmVmcmVzaEpvYihhLGMsZC5kYXRhLnBhdGgpfSx0aGlzLG51bGwsYyk7YS5hZGRGZWF0dXJlKGIpfSkodGhpcyxiW2FdKX0pfX07Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQuZ2VuZXJpY0RlZmluaXRpb24ucHJvdG90eXBlPXtjb250ZXh0OlwicFwiLGV4ZWM6ZnVuY3Rpb24oKXt9fTtDS0VESVRPUi5wbHVnaW5zLmluZGVudC5zcGVjaWZpY0RlZmluaXRpb24ucHJvdG90eXBlPXtleGVjSm9iOmZ1bmN0aW9uKGEsYil7dmFyIGU9dGhpcy5qb2JzW2JdO2lmKGUuc3RhdGUhPWspcmV0dXJuIGUuZXhlYy5jYWxsKHRoaXMsYSl9LHJlZnJlc2hKb2I6ZnVuY3Rpb24oYSxcclxuYixlKXtiPXRoaXMuam9ic1tiXTthLmFjdGl2ZUZpbHRlci5jaGVja0ZlYXR1cmUodGhpcyk/Yi5zdGF0ZT1iLnJlZnJlc2guY2FsbCh0aGlzLGEsZSk6Yi5zdGF0ZT1rO3JldHVybiBiLnN0YXRlfSxnZXRDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRhaW5zKHRoaXMuY29udGV4dCl9fX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZihiLGMsYSl7aWYoIWIuZ2V0Q3VzdG9tRGF0YShcImluZGVudF9wcm9jZXNzZWRcIikpe3ZhciBkPXRoaXMuZWRpdG9yLGw9dGhpcy5pc0luZGVudDtpZihjKXtkPWIuJC5jbGFzc05hbWUubWF0Y2godGhpcy5jbGFzc05hbWVSZWdleCk7YT0wO2QmJihkPWRbMV0sYT1DS0VESVRPUi50b29scy5pbmRleE9mKGMsZCkrMSk7aWYoMD4oYSs9bD8xOi0xKSlyZXR1cm47YT1NYXRoLm1pbihhLGMubGVuZ3RoKTthPU1hdGgubWF4KGEsMCk7Yi4kLmNsYXNzTmFtZT1DS0VESVRPUi50b29scy5sdHJpbShiLiQuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5jbGFzc05hbWVSZWdleCxcIlwiKSk7MDxhJiZiLmFkZENsYXNzKGNbYS0xXSl9ZWxzZXtjPW0oYixhKTthPXBhcnNlSW50KGIuZ2V0U3R5bGUoYyksMTApO3ZhciBnPWQuY29uZmlnLmluZGVudE9mZnNldHx8NDA7aXNOYU4oYSkmJihhPTApO2ErPShsPzE6LTEpKmc7aWYoMD5hKXJldHVybjthPU1hdGgubWF4KGEsXHJcbjApO2E9TWF0aC5jZWlsKGEvZykqZztiLnNldFN0eWxlKGMsYT9hKyhkLmNvbmZpZy5pbmRlbnRVbml0fHxcInB4XCIpOlwiXCIpO1wiXCI9PT1iLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpJiZiLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpfUNLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcih0aGlzLmRhdGFiYXNlLGIsXCJpbmRlbnRfcHJvY2Vzc2VkXCIsMSl9fWZ1bmN0aW9uIG0oYixjKXtyZXR1cm5cImx0clwiPT0oY3x8Yi5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpKT9cIm1hcmdpbi1sZWZ0XCI6XCJtYXJnaW4tcmlnaHRcIn12YXIgaD1DS0VESVRPUi5kdGQuJGxpc3RJdGVtLHA9Q0tFRElUT1IuZHRkLiRsaXN0LGs9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsbj1DS0VESVRPUi5UUklTVEFURV9PRkY7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJpbmRlbnRibG9ja1wiLHtyZXF1aXJlczpcImluZGVudFwiLGluaXQ6ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYygpe2Euc3BlY2lmaWNEZWZpbml0aW9uLmFwcGx5KHRoaXMsXHJcbmFyZ3VtZW50cyk7dGhpcy5hbGxvd2VkQ29udGVudD17XCJkaXYgaDEgaDIgaDMgaDQgaDUgaDYgb2wgcCBwcmUgdWxcIjp7cHJvcGVydGllc09ubHk6ITAsc3R5bGVzOmQ/bnVsbDpcIm1hcmdpbi1sZWZ0LG1hcmdpbi1yaWdodFwiLGNsYXNzZXM6ZHx8bnVsbH19O3RoaXMuZW50ZXJCciYmKHRoaXMuYWxsb3dlZENvbnRlbnQuZGl2PSEwKTt0aGlzLnJlcXVpcmVkQ29udGVudD0odGhpcy5lbnRlckJyP1wiZGl2XCI6XCJwXCIpKyhkP1wiKFwiK2Quam9pbihcIixcIikrXCIpXCI6XCJ7bWFyZ2luLWxlZnR9XCIpO3RoaXMuam9icz17MjA6e3JlZnJlc2g6ZnVuY3Rpb24oYSxiKXt2YXIgZT1iLmJsb2NrfHxiLmJsb2NrTGltaXQ7aWYoIWUuaXMoaCkpdmFyIGM9ZS5nZXRBc2NlbmRhbnQoaCksZT1jJiZiLmNvbnRhaW5zKGMpfHxlO2UuaXMoaCkmJihlPWUuZ2V0UGFyZW50KCkpO2lmKHRoaXMuZW50ZXJCcnx8dGhpcy5nZXRDb250ZXh0KGIpKXtpZihkKXt2YXIgYz1kLGU9ZS4kLmNsYXNzTmFtZS5tYXRjaCh0aGlzLmNsYXNzTmFtZVJlZ2V4KSxcclxuZj10aGlzLmlzSW5kZW50LGM9ZT9mP2VbMV0hPWMuc2xpY2UoLTEpOiEwOmY7cmV0dXJuIGM/bjprfXJldHVybiB0aGlzLmlzSW5kZW50P246ZT9DS0VESVRPUlswPj0ocGFyc2VJbnQoZS5nZXRTdHlsZShtKGUpKSwxMCl8fDApP1wiVFJJU1RBVEVfRElTQUJMRURcIjpcIlRSSVNUQVRFX09GRlwiXTprfXJldHVybiBrfSxleGVjOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0U2VsZWN0aW9uKCksYj1iJiZiLmdldFJhbmdlcygpWzBdLGM7aWYoYz1hLmVsZW1lbnRQYXRoKCkuY29udGFpbnMocCkpZi5jYWxsKHRoaXMsYyxkKTtlbHNlIGZvcihiPWIuY3JlYXRlSXRlcmF0b3IoKSxhPWEuY29uZmlnLmVudGVyTW9kZSxiLmVuZm9yY2VSZWFsQmxvY2tzPSEwLGIuZW5sYXJnZUJyPWEhPUNLRURJVE9SLkVOVEVSX0JSO2M9Yi5nZXROZXh0UGFyYWdyYXBoKGE9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIik7KWMuaXNSZWFkT25seSgpfHxmLmNhbGwodGhpcyxjLGQpO3JldHVybiEwfX19fXZhciBhPVxyXG5DS0VESVRPUi5wbHVnaW5zLmluZGVudCxkPWIuY29uZmlnLmluZGVudENsYXNzZXM7YS5yZWdpc3RlckNvbW1hbmRzKGIse2luZGVudGJsb2NrOm5ldyBjKGIsXCJpbmRlbnRibG9ja1wiLCEwKSxvdXRkZW50YmxvY2s6bmV3IGMoYixcIm91dGRlbnRibG9ja1wiKX0pO0NLRURJVE9SLnRvb2xzLmV4dGVuZChjLnByb3RvdHlwZSxhLnNwZWNpZmljRGVmaW5pdGlvbi5wcm90b3R5cGUse2NvbnRleHQ6e2RpdjoxLGRsOjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsdWw6MSxvbDoxLHA6MSxwcmU6MSx0YWJsZToxfSxjbGFzc05hbWVSZWdleDpkP25ldyBSZWdFeHAoXCIoPzpefFxcXFxzKykoXCIrZC5qb2luKFwifFwiKStcIikoP1xceDNkJHxcXFxccylcIik6bnVsbH0pfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiB3KGMpe2Z1bmN0aW9uIGYoYil7Zm9yKHZhciBlPWQuc3RhcnRDb250YWluZXIsYT1kLmVuZENvbnRhaW5lcjtlJiYhZS5nZXRQYXJlbnQoKS5lcXVhbHMoYik7KWU9ZS5nZXRQYXJlbnQoKTtmb3IoO2EmJiFhLmdldFBhcmVudCgpLmVxdWFscyhiKTspYT1hLmdldFBhcmVudCgpO2lmKCFlfHwhYSlyZXR1cm4hMTtmb3IodmFyIGc9ZSxlPVtdLGs9ITE7IWs7KWcuZXF1YWxzKGEpJiYoaz0hMCksZS5wdXNoKGcpLGc9Zy5nZXROZXh0KCk7aWYoMT5lLmxlbmd0aClyZXR1cm4hMTtnPWIuZ2V0UGFyZW50cyghMCk7Zm9yKGE9MDthPGcubGVuZ3RoO2ErKylpZihnW2FdLmdldE5hbWUmJnBbZ1thXS5nZXROYW1lKCldKXtiPWdbYV07YnJlYWt9Zm9yKHZhciBnPWwuaXNJbmRlbnQ/MTotMSxhPWVbMF0sZT1lW2UubGVuZ3RoLTFdLGs9Q0tFRElUT1IucGx1Z2lucy5saXN0Lmxpc3RUb0FycmF5KGIscSksbj1rW2UuZ2V0Q3VzdG9tRGF0YShcImxpc3RhcnJheV9pbmRleFwiKV0uaW5kZW50LFxyXG5hPWEuZ2V0Q3VzdG9tRGF0YShcImxpc3RhcnJheV9pbmRleFwiKTthPD1lLmdldEN1c3RvbURhdGEoXCJsaXN0YXJyYXlfaW5kZXhcIik7YSsrKWlmKGtbYV0uaW5kZW50Kz1nLDA8Zyl7dmFyIGg9a1thXS5wYXJlbnQ7a1thXS5wYXJlbnQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGguZ2V0TmFtZSgpLGguZ2V0RG9jdW1lbnQoKSl9Zm9yKGE9ZS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpKzE7YTxrLmxlbmd0aCYma1thXS5pbmRlbnQ+bjthKyspa1thXS5pbmRlbnQrPWc7ZT1DS0VESVRPUi5wbHVnaW5zLmxpc3QuYXJyYXlUb0xpc3QoayxxLG51bGwsYy5jb25maWcuZW50ZXJNb2RlLGIuZ2V0RGlyZWN0aW9uKCkpO2lmKCFsLmlzSW5kZW50KXt2YXIgZjtpZigoZj1iLmdldFBhcmVudCgpKSYmZi5pcyhcImxpXCIpKWZvcih2YXIgZz1lLmxpc3ROb2RlLmdldENoaWxkcmVuKCkscj1bXSxtLGE9Zy5jb3VudCgpLTE7MDw9YTthLS0pKG09Zy5nZXRJdGVtKGEpKSYmbS5pcyYmbS5pcyhcImxpXCIpJiZcclxuci5wdXNoKG0pfWUmJmUubGlzdE5vZGUucmVwbGFjZShiKTtpZihyJiZyLmxlbmd0aClmb3IoYT0wO2E8ci5sZW5ndGg7YSsrKXtmb3IobT1iPXJbYV07KG09bS5nZXROZXh0KCkpJiZtLmlzJiZtLmdldE5hbWUoKWluIHA7KUNLRURJVE9SLmVudi5uZWVkc05ic3BGaWxsZXImJiFiLmdldEZpcnN0KHgpJiZiLmFwcGVuZChkLmRvY3VtZW50LmNyZWF0ZVRleHQoXCLCoFwiKSksYi5hcHBlbmQobSk7Yi5pbnNlcnRBZnRlcihmKX1lJiZjLmZpcmUoXCJjb250ZW50RG9tSW52YWxpZGF0ZWRcIik7cmV0dXJuITB9Zm9yKHZhciBsPXRoaXMscT10aGlzLmRhdGFiYXNlLHA9dGhpcy5jb250ZXh0LG49Yy5nZXRTZWxlY3Rpb24oKSxuPShuJiZuLmdldFJhbmdlcygpKS5jcmVhdGVJdGVyYXRvcigpLGQ7ZD1uLmdldE5leHRSYW5nZSgpOyl7Zm9yKHZhciBiPWQuZ2V0Q29tbW9uQW5jZXN0b3IoKTtiJiYoYi50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFwW2IuZ2V0TmFtZSgpXSk7KXtpZihjLmVkaXRhYmxlKCkuZXF1YWxzKGIpKXtiPVxyXG4hMTticmVha31iPWIuZ2V0UGFyZW50KCl9Ynx8KGI9ZC5zdGFydFBhdGgoKS5jb250YWlucyhwKSkmJmQuc2V0RW5kQXQoYixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtpZighYil7dmFyIGg9ZC5nZXRFbmNsb3NlZE5vZGUoKTtoJiZoLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmaC5nZXROYW1lKClpbiBwJiYoZC5zZXRTdGFydEF0KGgsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpLGQuc2V0RW5kQXQoaCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSxiPWgpfWImJmQuc3RhcnRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLnN0YXJ0Q29udGFpbmVyLmdldE5hbWUoKWluIHAmJihoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGQpLGguZXZhbHVhdG9yPXQsZC5zdGFydENvbnRhaW5lcj1oLm5leHQoKSk7YiYmZC5lbmRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmVuZENvbnRhaW5lci5nZXROYW1lKClpblxyXG5wJiYoaD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKSxoLmV2YWx1YXRvcj10LGQuZW5kQ29udGFpbmVyPWgucHJldmlvdXMoKSk7aWYoYilyZXR1cm4gZihiKX1yZXR1cm4gMH1mdW5jdGlvbiB0KGMpe3JldHVybiBjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5pcyhcImxpXCIpfWZ1bmN0aW9uIHgoYyl7cmV0dXJuIHkoYykmJnooYyl9dmFyIHk9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCksej1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExLCEwKSx1PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHY9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaW5kZW50bGlzdFwiLHtyZXF1aXJlczpcImluZGVudFwiLGluaXQ6ZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZihjKXtsLnNwZWNpZmljRGVmaW5pdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZXF1aXJlZENvbnRlbnQ9W1widWxcIixcIm9sXCJdO2Mub24oXCJrZXlcIixcclxuZnVuY3Rpb24oZil7aWYoXCJ3eXNpd3lnXCI9PWMubW9kZSYmZi5kYXRhLmtleUNvZGU9PXRoaXMuaW5kZW50S2V5KXt2YXIgbj10aGlzLmdldENvbnRleHQoYy5lbGVtZW50UGF0aCgpKTshbnx8dGhpcy5pc0luZGVudCYmQ0tFRElUT1IucGx1Z2lucy5pbmRlbnRMaXN0LmZpcnN0SXRlbUluUGF0aCh0aGlzLmNvbnRleHQsYy5lbGVtZW50UGF0aCgpLG4pfHwoYy5leGVjQ29tbWFuZCh0aGlzLnJlbGF0ZWRHbG9iYWwpLGYuY2FuY2VsKCkpfX0sdGhpcyk7dGhpcy5qb2JzW3RoaXMuaXNJbmRlbnQ/MTA6MzBdPXtyZWZyZXNoOnRoaXMuaXNJbmRlbnQ/ZnVuY3Rpb24oYyxmKXt2YXIgZD10aGlzLmdldENvbnRleHQoZiksYj1DS0VESVRPUi5wbHVnaW5zLmluZGVudExpc3QuZmlyc3RJdGVtSW5QYXRoKHRoaXMuY29udGV4dCxmLGQpO3JldHVybiBkJiZ0aGlzLmlzSW5kZW50JiYhYj92OnV9OmZ1bmN0aW9uKGMsZil7cmV0dXJuIXRoaXMuZ2V0Q29udGV4dChmKXx8dGhpcy5pc0luZGVudD9cclxudTp2fSxleGVjOkNLRURJVE9SLnRvb2xzLmJpbmQodyx0aGlzKX19dmFyIGw9Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQ7bC5yZWdpc3RlckNvbW1hbmRzKGMse2luZGVudGxpc3Q6bmV3IGYoYyxcImluZGVudGxpc3RcIiwhMCksb3V0ZGVudGxpc3Q6bmV3IGYoYyxcIm91dGRlbnRsaXN0XCIpfSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGYucHJvdG90eXBlLGwuc3BlY2lmaWNEZWZpbml0aW9uLnByb3RvdHlwZSx7Y29udGV4dDp7b2w6MSx1bDoxfX0pfX0pO0NLRURJVE9SLnBsdWdpbnMuaW5kZW50TGlzdD17fTtDS0VESVRPUi5wbHVnaW5zLmluZGVudExpc3QuZmlyc3RJdGVtSW5QYXRoPWZ1bmN0aW9uKGMsZixsKXt2YXIgcT1mLmNvbnRhaW5zKHQpO2x8fChsPWYuY29udGFpbnMoYykpO3JldHVybiBsJiZxJiZxLmVxdWFscyhsLmdldEZpcnN0KHQpKX19KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwic21pbGV5XCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXthLmNvbmZpZy5zbWlsZXlfcGF0aD1hLmNvbmZpZy5zbWlsZXlfcGF0aHx8dGhpcy5wYXRoK1wiaW1hZ2VzL1wiO2EuYWRkQ29tbWFuZChcInNtaWxleVwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwic21pbGV5XCIse2FsbG93ZWRDb250ZW50OlwiaW1nW2FsdCxoZWlnaHQsIXNyYyx0aXRsZSx3aWR0aF1cIixyZXF1aXJlZENvbnRlbnQ6XCJpbWdcIn0pKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJTbWlsZXlcIix7bGFiZWw6YS5sYW5nLnNtaWxleS50b29sYmFyLGNvbW1hbmQ6XCJzbWlsZXlcIix0b29sYmFyOlwiaW5zZXJ0LDUwXCJ9KTtDS0VESVRPUi5kaWFsb2cuYWRkKFwic21pbGV5XCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9zbWlsZXkuanNcIil9fSk7Q0tFRElUT1IuY29uZmlnLnNtaWxleV9pbWFnZXM9XCJyZWd1bGFyX3NtaWxlLnBuZyBzYWRfc21pbGUucG5nIHdpbmtfc21pbGUucG5nIHRlZXRoX3NtaWxlLnBuZyBjb25mdXNlZF9zbWlsZS5wbmcgdG9uZ3VlX3NtaWxlLnBuZyBlbWJhcnJhc3NlZF9zbWlsZS5wbmcgb21nX3NtaWxlLnBuZyB3aGF0Y2h1dGFsa2luZ2Fib3V0X3NtaWxlLnBuZyBhbmdyeV9zbWlsZS5wbmcgYW5nZWxfc21pbGUucG5nIHNoYWRlc19zbWlsZS5wbmcgZGV2aWxfc21pbGUucG5nIGNyeV9zbWlsZS5wbmcgbGlnaHRidWxiLnBuZyB0aHVtYnNfZG93bi5wbmcgdGh1bWJzX3VwLnBuZyBoZWFydC5wbmcgYnJva2VuX2hlYXJ0LnBuZyBraXNzLnBuZyBlbnZlbG9wZS5wbmdcIi5zcGxpdChcIiBcIik7XHJcbkNLRURJVE9SLmNvbmZpZy5zbWlsZXlfZGVzY3JpcHRpb25zPVwic21pbGV5O3NhZDt3aW5rO2xhdWdoO2Zyb3duO2NoZWVreTtibHVzaDtzdXJwcmlzZTtpbmRlY2lzaW9uO2FuZ3J5O2FuZ2VsO2Nvb2w7ZGV2aWw7Y3J5aW5nO2VubGlnaHRlbmVkO25vO3llcztoZWFydDticm9rZW4gaGVhcnQ7a2lzczttYWlsXCIuc3BsaXQoXCI7XCIpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG4oYSxjKXtjPXZvaWQgMD09PWN8fGM7dmFyIGI7aWYoYyliPWEuZ2V0Q29tcHV0ZWRTdHlsZShcInRleHQtYWxpZ25cIik7ZWxzZXtmb3IoOyFhLmhhc0F0dHJpYnV0ZXx8IWEuaGFzQXR0cmlidXRlKFwiYWxpZ25cIikmJiFhLmdldFN0eWxlKFwidGV4dC1hbGlnblwiKTspe2I9YS5nZXRQYXJlbnQoKTtpZighYilicmVhazthPWJ9Yj1hLmdldFN0eWxlKFwidGV4dC1hbGlnblwiKXx8YS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKXx8XCJcIn1iJiYoYj1iLnJlcGxhY2UoLyg/Oi0oPzptb3p8d2Via2l0KS0pPyg/OnN0YXJ0fGF1dG8pL2ksXCJcIikpOyFiJiZjJiYoYj1cInJ0bFwiPT1hLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIik/XCJyaWdodFwiOlwibGVmdFwiKTtyZXR1cm4gYn1mdW5jdGlvbiBnKGEsYyxiKXt0aGlzLmVkaXRvcj1hO3RoaXMubmFtZT1jO3RoaXMudmFsdWU9Yjt0aGlzLmNvbnRleHQ9XCJwXCI7Yz1hLmNvbmZpZy5qdXN0aWZ5Q2xhc3Nlczt2YXIgaD1hLmNvbmZpZy5lbnRlck1vZGU9PVxyXG5DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCI7aWYoYyl7c3dpdGNoKGIpe2Nhc2UgXCJsZWZ0XCI6dGhpcy5jc3NDbGFzc05hbWU9Y1swXTticmVhaztjYXNlIFwiY2VudGVyXCI6dGhpcy5jc3NDbGFzc05hbWU9Y1sxXTticmVhaztjYXNlIFwicmlnaHRcIjp0aGlzLmNzc0NsYXNzTmFtZT1jWzJdO2JyZWFrO2Nhc2UgXCJqdXN0aWZ5XCI6dGhpcy5jc3NDbGFzc05hbWU9Y1szXX10aGlzLmNzc0NsYXNzUmVnZXg9bmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKSg/OlwiK2Muam9pbihcInxcIikrXCIpKD9cXHgzZCR8XFxcXHMpXCIpO3RoaXMucmVxdWlyZWRDb250ZW50PWgrXCIoXCIrdGhpcy5jc3NDbGFzc05hbWUrXCIpXCJ9ZWxzZSB0aGlzLnJlcXVpcmVkQ29udGVudD1oK1wie3RleHQtYWxpZ259XCI7dGhpcy5hbGxvd2VkQ29udGVudD17XCJjYXB0aW9uIGRpdiBoMSBoMiBoMyBoNCBoNSBoNiBwIHByZSB0ZCB0aCBsaVwiOntwcm9wZXJ0aWVzT25seTohMCxzdHlsZXM6dGhpcy5jc3NDbGFzc05hbWU/bnVsbDpcInRleHQtYWxpZ25cIixcclxuY2xhc3Nlczp0aGlzLmNzc0NsYXNzTmFtZXx8bnVsbH19O2EuY29uZmlnLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlImJih0aGlzLmFsbG93ZWRDb250ZW50LmRpdj0hMCl9ZnVuY3Rpb24gbChhKXt2YXIgYz1hLmVkaXRvcixiPWMuY3JlYXRlUmFuZ2UoKTtiLnNldFN0YXJ0QmVmb3JlKGEuZGF0YS5ub2RlKTtiLnNldEVuZEFmdGVyKGEuZGF0YS5ub2RlKTtmb3IodmFyIGg9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYiksZDtkPWgubmV4dCgpOylpZihkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClpZighZC5lcXVhbHMoYS5kYXRhLm5vZGUpJiZkLmdldERpcmVjdGlvbigpKWIuc2V0U3RhcnRBZnRlcihkKSxoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGIpO2Vsc2V7dmFyIGU9Yy5jb25maWcuanVzdGlmeUNsYXNzZXM7ZSYmKGQuaGFzQ2xhc3MoZVswXSk/KGQucmVtb3ZlQ2xhc3MoZVswXSksZC5hZGRDbGFzcyhlWzJdKSk6ZC5oYXNDbGFzcyhlWzJdKSYmKGQucmVtb3ZlQ2xhc3MoZVsyXSksXHJcbmQuYWRkQ2xhc3MoZVswXSkpKTtlPWQuZ2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIpO1wibGVmdFwiPT1lP2Quc2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIsXCJyaWdodFwiKTpcInJpZ2h0XCI9PWUmJmQuc2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIsXCJsZWZ0XCIpfX1nLnByb3RvdHlwZT17ZXhlYzpmdW5jdGlvbihhKXt2YXIgYz1hLmdldFNlbGVjdGlvbigpLGI9YS5jb25maWcuZW50ZXJNb2RlO2lmKGMpe2Zvcih2YXIgaD1jLmNyZWF0ZUJvb2ttYXJrcygpLGQ9Yy5nZXRSYW5nZXMoKSxlPXRoaXMuY3NzQ2xhc3NOYW1lLGcsZixrPWEuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGUsaz12b2lkIDA9PT1rfHxrLG09ZC5sZW5ndGgtMTswPD1tO20tLSlmb3IoZz1kW21dLmNyZWF0ZUl0ZXJhdG9yKCksZy5lbmxhcmdlQnI9YiE9Q0tFRElUT1IuRU5URVJfQlI7Zj1nLmdldE5leHRQYXJhZ3JhcGgoYj09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKTspaWYoIWYuaXNSZWFkT25seSgpKXtmLnJlbW92ZUF0dHJpYnV0ZShcImFsaWduXCIpO1xyXG5mLnJlbW92ZVN0eWxlKFwidGV4dC1hbGlnblwiKTt2YXIgbD1lJiYoZi4kLmNsYXNzTmFtZT1DS0VESVRPUi50b29scy5sdHJpbShmLiQuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5jc3NDbGFzc1JlZ2V4LFwiXCIpKSkscD10aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkYmJigha3x8bihmLCEwKSE9dGhpcy52YWx1ZSk7ZT9wP2YuYWRkQ2xhc3MoZSk6bHx8Zi5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTpwJiZmLnNldFN0eWxlKFwidGV4dC1hbGlnblwiLHRoaXMudmFsdWUpfWEuZm9jdXMoKTthLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7Yy5zZWxlY3RCb29rbWFya3MoaCl9fSxyZWZyZXNoOmZ1bmN0aW9uKGEsYyl7dmFyIGI9Yy5ibG9ja3x8Yy5ibG9ja0xpbWl0O3RoaXMuc2V0U3RhdGUoXCJib2R5XCIhPWIuZ2V0TmFtZSgpJiZuKGIsdGhpcy5lZGl0b3IuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGUpPT10aGlzLnZhbHVlP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRil9fTtcclxuQ0tFRElUT1IucGx1Z2lucy5hZGQoXCJqdXN0aWZ5XCIse2luaXQ6ZnVuY3Rpb24oYSl7aWYoIWEuYmxvY2tsZXNzKXt2YXIgYz1uZXcgZyhhLFwianVzdGlmeWxlZnRcIixcImxlZnRcIiksYj1uZXcgZyhhLFwianVzdGlmeWNlbnRlclwiLFwiY2VudGVyXCIpLGg9bmV3IGcoYSxcImp1c3RpZnlyaWdodFwiLFwicmlnaHRcIiksZD1uZXcgZyhhLFwianVzdGlmeWJsb2NrXCIsXCJqdXN0aWZ5XCIpO2EuYWRkQ29tbWFuZChcImp1c3RpZnlsZWZ0XCIsYyk7YS5hZGRDb21tYW5kKFwianVzdGlmeWNlbnRlclwiLGIpO2EuYWRkQ29tbWFuZChcImp1c3RpZnlyaWdodFwiLGgpO2EuYWRkQ29tbWFuZChcImp1c3RpZnlibG9ja1wiLGQpO2EudWkuYWRkQnV0dG9uJiYoYS51aS5hZGRCdXR0b24oXCJKdXN0aWZ5TGVmdFwiLHtsYWJlbDphLmxhbmcuanVzdGlmeS5sZWZ0LGNvbW1hbmQ6XCJqdXN0aWZ5bGVmdFwiLHRvb2xiYXI6XCJhbGlnbiwxMFwifSksYS51aS5hZGRCdXR0b24oXCJKdXN0aWZ5Q2VudGVyXCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LmNlbnRlcixcclxuY29tbWFuZDpcImp1c3RpZnljZW50ZXJcIix0b29sYmFyOlwiYWxpZ24sMjBcIn0pLGEudWkuYWRkQnV0dG9uKFwiSnVzdGlmeVJpZ2h0XCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LnJpZ2h0LGNvbW1hbmQ6XCJqdXN0aWZ5cmlnaHRcIix0b29sYmFyOlwiYWxpZ24sMzBcIn0pLGEudWkuYWRkQnV0dG9uKFwiSnVzdGlmeUJsb2NrXCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LmJsb2NrLGNvbW1hbmQ6XCJqdXN0aWZ5YmxvY2tcIix0b29sYmFyOlwiYWxpZ24sNDBcIn0pKTthLm9uKFwiZGlyQ2hhbmdlZFwiLGwpfX19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJtZW51YnV0dG9uXCIse3JlcXVpcmVzOlwiYnV0dG9uLG1lbnVcIixvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbihjKXt2YXIgYT10aGlzLl8sYj1hLm1lbnU7YS5zdGF0ZSE9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiYoYS5vbiYmYj9iLmhpZGUoKTooYS5wcmV2aW91c1N0YXRlPWEuc3RhdGUsYnx8KGI9YS5tZW51PW5ldyBDS0VESVRPUi5tZW51KGMse3BhbmVsOntjbGFzc05hbWU6XCJja2VfbWVudV9wYW5lbFwiLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmMubGFuZy5jb21tb24ub3B0aW9uc319fSksYi5vbkhpZGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29tbWFuZD9jLmdldENvbW1hbmQodGhpcy5jb21tYW5kKS5tb2Rlczp0aGlzLm1vZGVzO3RoaXMuc2V0U3RhdGUoIWJ8fGJbYy5tb2RlXT9hLnByZXZpb3VzU3RhdGU6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2Eub249MH0sdGhpcyksXHJcbnRoaXMub25NZW51JiZiLmFkZExpc3RlbmVyKHRoaXMub25NZW51KSksdGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PTiksYS5vbj0xLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLnNob3coQ0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChhLmlkKSw0KX0sMCkpKX07Q0tFRElUT1IudWkubWVudUJ1dHRvbj1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi51aS5idXR0b24sJDpmdW5jdGlvbihjKXtkZWxldGUgYy5wYW5lbDt0aGlzLmJhc2UoYyk7dGhpcy5oYXNBcnJvdz0hMDt0aGlzLmNsaWNrPWR9LHN0YXRpY3M6e2hhbmRsZXI6e2NyZWF0ZTpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLm1lbnVCdXR0b24oYyl9fX19KX0sYmVmb3JlSW5pdDpmdW5jdGlvbihkKXtkLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfTUVOVUJVVFRPTixDS0VESVRPUi51aS5tZW51QnV0dG9uLmhhbmRsZXIpfX0pO1xyXG5DS0VESVRPUi5VSV9NRU5VQlVUVE9OPVwibWVudWJ1dHRvblwiOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwibGFuZ3VhZ2VcIix7cmVxdWlyZXM6XCJtZW51YnV0dG9uXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmNvbmZpZy5sYW5ndWFnZV9saXN0fHxbXCJhcjpBcmFiaWM6cnRsXCIsXCJmcjpGcmVuY2hcIixcImVzOlNwYW5pc2hcIl0sYz10aGlzLGQ9YS5sYW5nLmxhbmd1YWdlLGU9e30sZyxoLGssZjthLmFkZENvbW1hbmQoXCJsYW5ndWFnZVwiLHthbGxvd2VkQ29udGVudDpcInNwYW5bIWxhbmcsIWRpcl1cIixyZXF1aXJlZENvbnRlbnQ6XCJzcGFuW2xhbmcsZGlyXVwiLGNvbnRleHRTZW5zaXRpdmU6ITAsZXhlYzpmdW5jdGlvbihhLGIpe3ZhciBjPWVbXCJsYW5ndWFnZV9cIitiXTtpZihjKWFbYy5zdHlsZS5jaGVja0FjdGl2ZShhLmVsZW1lbnRQYXRoKCksYSk/XCJyZW1vdmVTdHlsZVwiOlwiYXBwbHlTdHlsZVwiXShjLnN0eWxlKX0scmVmcmVzaDpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXRlKGMuZ2V0Q3VycmVudExhbmdFbGVtZW50KGEpP0NLRURJVE9SLlRSSVNUQVRFX09OOlxyXG5DS0VESVRPUi5UUklTVEFURV9PRkYpfX0pO2ZvcihmPTA7ZjxiLmxlbmd0aDtmKyspZz1iW2ZdLnNwbGl0KFwiOlwiKSxoPWdbMF0saz1cImxhbmd1YWdlX1wiK2gsZVtrXT17bGFiZWw6Z1sxXSxsYW5nSWQ6aCxncm91cDpcImxhbmd1YWdlXCIsb3JkZXI6ZixsdHI6XCJydGxcIiE9KFwiXCIrZ1syXSkudG9Mb3dlckNhc2UoKSxvbkNsaWNrOmZ1bmN0aW9uKCl7YS5leGVjQ29tbWFuZChcImxhbmd1YWdlXCIsdGhpcy5sYW5nSWQpfSxyb2xlOlwibWVudWl0ZW1jaGVja2JveFwifSxlW2tdLnN0eWxlPW5ldyBDS0VESVRPUi5zdHlsZSh7ZWxlbWVudDpcInNwYW5cIixhdHRyaWJ1dGVzOntsYW5nOmgsZGlyOmVba10ubHRyP1wibHRyXCI6XCJydGxcIn19KTtlLmxhbmd1YWdlX3JlbW92ZT17bGFiZWw6ZC5yZW1vdmUsZ3JvdXA6XCJsYW5ndWFnZV9yZW1vdmVcIixzdGF0ZTpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxvcmRlcjplLmxlbmd0aCxvbkNsaWNrOmZ1bmN0aW9uKCl7dmFyIGI9Yy5nZXRDdXJyZW50TGFuZ0VsZW1lbnQoYSk7XHJcbmImJmEuZXhlY0NvbW1hbmQoXCJsYW5ndWFnZVwiLGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSl9fTthLmFkZE1lbnVHcm91cChcImxhbmd1YWdlXCIsMSk7YS5hZGRNZW51R3JvdXAoXCJsYW5ndWFnZV9yZW1vdmVcIik7YS5hZGRNZW51SXRlbXMoZSk7YS51aS5hZGQoXCJMYW5ndWFnZVwiLENLRURJVE9SLlVJX01FTlVCVVRUT04se2xhYmVsOmQuYnV0dG9uLGFsbG93ZWRDb250ZW50Olwic3BhblshbGFuZywhZGlyXVwiLHJlcXVpcmVkQ29udGVudDpcInNwYW5bbGFuZyxkaXJdXCIsdG9vbGJhcjpcImJpZGksMzBcIixjb21tYW5kOlwibGFuZ3VhZ2VcIixvbk1lbnU6ZnVuY3Rpb24oKXt2YXIgYj17fSxkPWMuZ2V0Q3VycmVudExhbmdFbGVtZW50KGEpLGY7Zm9yKGYgaW4gZSliW2ZdPUNLRURJVE9SLlRSSVNUQVRFX09GRjtiLmxhbmd1YWdlX3JlbW92ZT1kP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRDtkJiYoYltcImxhbmd1YWdlX1wiK2QuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKV09XHJcbkNLRURJVE9SLlRSSVNUQVRFX09OKTtyZXR1cm4gYn19KX0sZ2V0Q3VycmVudExhbmdFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWxlbWVudFBhdGgoKTthPWImJmIuZWxlbWVudHM7dmFyIGM7aWYoYilmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyliPWFbZF0sIWMmJlwic3BhblwiPT1iLmdldE5hbWUoKSYmYi5oYXNBdHRyaWJ1dGUoXCJkaXJcIikmJmIuaGFzQXR0cmlidXRlKFwibGFuZ1wiKSYmKGM9Yik7cmV0dXJuIGN9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHAoYyl7cmV0dXJuIGMucmVwbGFjZSgvJy9nLFwiXFxcXCRcXHgyNlwiKX1mdW5jdGlvbiBxKGMpe2Zvcih2YXIgYixhPWMubGVuZ3RoLGY9W10sZT0wO2U8YTtlKyspYj1jLmNoYXJDb2RlQXQoZSksZi5wdXNoKGIpO3JldHVyblwiU3RyaW5nLmZyb21DaGFyQ29kZShcIitmLmpvaW4oXCIsXCIpK1wiKVwifWZ1bmN0aW9uIHIoYyxiKXt2YXIgYT1jLnBsdWdpbnMubGluayxmPWEuY29tcGlsZWRQcm90ZWN0aW9uRnVuY3Rpb24ucGFyYW1zLGUsZDtkPVthLmNvbXBpbGVkUHJvdGVjdGlvbkZ1bmN0aW9uLm5hbWUsXCIoXCJdO2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKWE9ZltnXS50b0xvd2VyQ2FzZSgpLGU9YlthXSwwPGcmJmQucHVzaChcIixcIiksZC5wdXNoKFwiJ1wiLGU/cChlbmNvZGVVUklDb21wb25lbnQoYlthXSkpOlwiXCIsXCInXCIpO2QucHVzaChcIilcIik7cmV0dXJuIGQuam9pbihcIlwiKX1mdW5jdGlvbiBuKGMpe2M9Yy5jb25maWcuZW1haWxQcm90ZWN0aW9ufHxcIlwiO1xyXG52YXIgYjtjJiZcImVuY29kZVwiIT1jJiYoYj17fSxjLnJlcGxhY2UoL14oW14oXSspXFwoKFteKV0rKVxcKSQvLGZ1bmN0aW9uKGEsYyxlKXtiLm5hbWU9YztiLnBhcmFtcz1bXTtlLnJlcGxhY2UoL1teLFxcc10rL2csZnVuY3Rpb24oYSl7Yi5wYXJhbXMucHVzaChhKX0pfSkpO3JldHVybiBifUNLRURJVE9SLnBsdWdpbnMuYWRkKFwibGlua1wiLHtyZXF1aXJlczpcImRpYWxvZyxmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYil7cmV0dXJuIGEucmVwbGFjZSgvJTEvZyxcInJ0bFwiPT1iP1wicmlnaHRcIjpcImxlZnRcIikucmVwbGFjZSgvJTIvZyxcImNrZV9jb250ZW50c19cIitiKX12YXIgYj1cImJhY2tncm91bmQ6dXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXNcIisoQ0tFRElUT1IuZW52LmhpZHBpP1wiL2hpZHBpXCI6XCJcIikrXCIvYW5jaG9yLnBuZ1wiKStcIikgbm8tcmVwZWF0ICUxIGNlbnRlcjtib3JkZXI6MXB4IGRvdHRlZCAjMDBmO2JhY2tncm91bmQtc2l6ZToxNnB4O1wiLFxyXG5hPVwiLiUyIGEuY2tlX2FuY2hvciwuJTIgYS5ja2VfYW5jaG9yX2VtcHR5LC5ja2VfZWRpdGFibGUuJTIgYVtuYW1lXSwuY2tlX2VkaXRhYmxlLiUyIGFbZGF0YS1ja2Utc2F2ZWQtbmFtZV17XCIrYitcInBhZGRpbmctJTE6MThweDtjdXJzb3I6YXV0bzt9LiUyIGltZy5ja2VfYW5jaG9ye1wiK2IrXCJ3aWR0aDoxNnB4O21pbi1oZWlnaHQ6MTVweDtoZWlnaHQ6MS4xNWVtO3ZlcnRpY2FsLWFsaWduOnRleHQtYm90dG9tO31cIjtDS0VESVRPUi5hZGRDc3MoYyhcImx0clwiKStjKFwicnRsXCIpKX0saW5pdDpmdW5jdGlvbihjKXt2YXIgYj1cImFbIWhyZWZdXCI7Q0tFRElUT1IuZGlhbG9nLmlzVGFiRW5hYmxlZChjLFwibGlua1wiLFwiYWR2YW5jZWRcIikmJihiPWIucmVwbGFjZShcIl1cIixcIixhY2Nlc3NrZXksY2hhcnNldCxkaXIsaWQsbGFuZyxuYW1lLHJlbCx0YWJpbmRleCx0aXRsZSx0eXBlXXsqfSgqKVwiKSk7Q0tFRElUT1IuZGlhbG9nLmlzVGFiRW5hYmxlZChjLFwibGlua1wiLFwidGFyZ2V0XCIpJiYoYj1iLnJlcGxhY2UoXCJdXCIsXHJcblwiLHRhcmdldCxvbmNsaWNrXVwiKSk7Yy5hZGRDb21tYW5kKFwibGlua1wiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwibGlua1wiLHthbGxvd2VkQ29udGVudDpiLHJlcXVpcmVkQ29udGVudDpcImFbaHJlZl1cIn0pKTtjLmFkZENvbW1hbmQoXCJhbmNob3JcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImFuY2hvclwiLHthbGxvd2VkQ29udGVudDpcImFbIW5hbWUsaWRdXCIscmVxdWlyZWRDb250ZW50OlwiYVtuYW1lXVwifSkpO2MuYWRkQ29tbWFuZChcInVubGlua1wiLG5ldyBDS0VESVRPUi51bmxpbmtDb21tYW5kKTtjLmFkZENvbW1hbmQoXCJyZW1vdmVBbmNob3JcIixuZXcgQ0tFRElUT1IucmVtb3ZlQW5jaG9yQ29tbWFuZCk7Yy5zZXRLZXlzdHJva2UoQ0tFRElUT1IuQ1RSTCs3NixcImxpbmtcIik7Yy51aS5hZGRCdXR0b24mJihjLnVpLmFkZEJ1dHRvbihcIkxpbmtcIix7bGFiZWw6Yy5sYW5nLmxpbmsudG9vbGJhcixjb21tYW5kOlwibGlua1wiLHRvb2xiYXI6XCJsaW5rcywxMFwifSksYy51aS5hZGRCdXR0b24oXCJVbmxpbmtcIixcclxue2xhYmVsOmMubGFuZy5saW5rLnVubGluayxjb21tYW5kOlwidW5saW5rXCIsdG9vbGJhcjpcImxpbmtzLDIwXCJ9KSxjLnVpLmFkZEJ1dHRvbihcIkFuY2hvclwiLHtsYWJlbDpjLmxhbmcubGluay5hbmNob3IudG9vbGJhcixjb21tYW5kOlwiYW5jaG9yXCIsdG9vbGJhcjpcImxpbmtzLDMwXCJ9KSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImxpbmtcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2xpbmsuanNcIik7Q0tFRElUT1IuZGlhbG9nLmFkZChcImFuY2hvclwiLHRoaXMucGF0aCtcImRpYWxvZ3MvYW5jaG9yLmpzXCIpO2Mub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLnBsdWdpbnMubGluay5nZXRTZWxlY3RlZExpbmsoYyl8fGEuZGF0YS5lbGVtZW50O2IuaXNSZWFkT25seSgpfHwoYi5pcyhcImFcIik/KGEuZGF0YS5kaWFsb2c9IWIuZ2V0QXR0cmlidXRlKFwibmFtZVwiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpJiZiLmdldENoaWxkQ291bnQoKT9cImxpbmtcIjpcImFuY2hvclwiLGEuZGF0YS5saW5rPVxyXG5iKTpDS0VESVRPUi5wbHVnaW5zLmxpbmsudHJ5UmVzdG9yZUZha2VBbmNob3IoYyxiKSYmKGEuZGF0YS5kaWFsb2c9XCJhbmNob3JcIikpfSxudWxsLG51bGwsMCk7Yy5vbihcImRvdWJsZWNsaWNrXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRpYWxvZyBpbntsaW5rOjEsYW5jaG9yOjF9JiZhLmRhdGEubGluayYmYy5nZXRTZWxlY3Rpb24oKS5zZWxlY3RFbGVtZW50KGEuZGF0YS5saW5rKX0sbnVsbCxudWxsLDIwKTtjLmFkZE1lbnVJdGVtcyYmYy5hZGRNZW51SXRlbXMoe2FuY2hvcjp7bGFiZWw6Yy5sYW5nLmxpbmsuYW5jaG9yLm1lbnUsY29tbWFuZDpcImFuY2hvclwiLGdyb3VwOlwiYW5jaG9yXCIsb3JkZXI6MX0scmVtb3ZlQW5jaG9yOntsYWJlbDpjLmxhbmcubGluay5hbmNob3IucmVtb3ZlLGNvbW1hbmQ6XCJyZW1vdmVBbmNob3JcIixncm91cDpcImFuY2hvclwiLG9yZGVyOjV9LGxpbms6e2xhYmVsOmMubGFuZy5saW5rLm1lbnUsY29tbWFuZDpcImxpbmtcIixncm91cDpcImxpbmtcIixvcmRlcjoxfSx1bmxpbms6e2xhYmVsOmMubGFuZy5saW5rLnVubGluayxcclxuY29tbWFuZDpcInVubGlua1wiLGdyb3VwOlwibGlua1wiLG9yZGVyOjV9fSk7Yy5jb250ZXh0TWVudSYmYy5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhKXtpZighYXx8YS5pc1JlYWRPbmx5KCkpcmV0dXJuIG51bGw7YT1DS0VESVRPUi5wbHVnaW5zLmxpbmsudHJ5UmVzdG9yZUZha2VBbmNob3IoYyxhKTtpZighYSYmIShhPUNLRURJVE9SLnBsdWdpbnMubGluay5nZXRTZWxlY3RlZExpbmsoYykpKXJldHVybiBudWxsO3ZhciBiPXt9O2EuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSYmYS5nZXRDaGlsZENvdW50KCkmJihiPXtsaW5rOkNLRURJVE9SLlRSSVNUQVRFX09GRix1bmxpbms6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfSk7YSYmYS5oYXNBdHRyaWJ1dGUoXCJuYW1lXCIpJiYoYi5hbmNob3I9Yi5yZW1vdmVBbmNob3I9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKTtyZXR1cm4gYn0pO3RoaXMuY29tcGlsZWRQcm90ZWN0aW9uRnVuY3Rpb249bihjKX0sYWZ0ZXJJbml0OmZ1bmN0aW9uKGMpe2MuZGF0YVByb2Nlc3Nvci5kYXRhRmlsdGVyLmFkZFJ1bGVzKHtlbGVtZW50czp7YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5hdHRyaWJ1dGVzLm5hbWU/XHJcbmEuY2hpbGRyZW4ubGVuZ3RoP251bGw6Yy5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChhLFwiY2tlX2FuY2hvclwiLFwiYW5jaG9yXCIpOm51bGx9fX0pO3ZhciBiPWMuXy5lbGVtZW50c1BhdGgmJmMuXy5lbGVtZW50c1BhdGguZmlsdGVycztiJiZiLnB1c2goZnVuY3Rpb24oYSxiKXtpZihcImFcIj09YiYmKENLRURJVE9SLnBsdWdpbnMubGluay50cnlSZXN0b3JlRmFrZUFuY2hvcihjLGEpfHxhLmdldEF0dHJpYnV0ZShcIm5hbWVcIikmJighYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfHwhYS5nZXRDaGlsZENvdW50KCkpKSlyZXR1cm5cImFuY2hvclwifSl9fSk7dmFyIHQ9L15qYXZhc2NyaXB0Oi8sdT0vXm1haWx0bzooW14/XSspKD86XFw/KC4rKSk/JC8sdj0vc3ViamVjdD0oW147PzpAJj0kLFxcL10qKS9pLHc9L2JvZHk9KFteOz86QCY9JCxcXC9dKikvaSx4PS9eIyguKikkLyx5PS9eKCg/Omh0dHB8aHR0cHN8ZnRwfG5ld3MpOlxcL1xcLyk/KC4qKSQvLHo9L14oXyg/OnNlbGZ8dG9wfHBhcmVudHxibGFuaykpJC8sXHJcbkE9L15qYXZhc2NyaXB0OnZvaWRcXChsb2NhdGlvblxcLmhyZWY9J21haWx0bzonXFwrU3RyaW5nXFwuZnJvbUNoYXJDb2RlXFwoKFteKV0rKVxcKSg/OlxcKycoLiopJyk/XFwpJC8sQj0vXmphdmFzY3JpcHQ6KFteKF0rKVxcKChbXildKylcXCkkLyxDPS9cXHMqd2luZG93Lm9wZW5cXChcXHMqdGhpc1xcLmhyZWZcXHMqLFxccyooPzonKFteJ10qKSd8bnVsbClcXHMqLFxccyonKFteJ10qKSdcXHMqXFwpXFxzKjtcXHMqcmV0dXJuXFxzKmZhbHNlOypcXHMqLyxEPS8oPzpefCwpKFtePV0rKT0oXFxkK3x5ZXN8bm8pL2dpLG09e2lkOlwiYWR2SWRcIixkaXI6XCJhZHZMYW5nRGlyXCIsYWNjZXNzS2V5OlwiYWR2QWNjZXNzS2V5XCIsbmFtZTpcImFkdk5hbWVcIixsYW5nOlwiYWR2TGFuZ0NvZGVcIix0YWJpbmRleDpcImFkdlRhYkluZGV4XCIsdGl0bGU6XCJhZHZUaXRsZVwiLHR5cGU6XCJhZHZDb250ZW50VHlwZVwiLFwiY2xhc3NcIjpcImFkdkNTU0NsYXNzZXNcIixjaGFyc2V0OlwiYWR2Q2hhcnNldFwiLHN0eWxlOlwiYWR2U3R5bGVzXCIscmVsOlwiYWR2UmVsXCJ9O1xyXG5DS0VESVRPUi5wbHVnaW5zLmxpbms9e2dldFNlbGVjdGVkTGluazpmdW5jdGlvbihjKXt2YXIgYj1jLmdldFNlbGVjdGlvbigpLGE9Yi5nZXRTZWxlY3RlZEVsZW1lbnQoKTtyZXR1cm4gYSYmYS5pcyhcImFcIik/YTooYj1iLmdldFJhbmdlcygpWzBdKT8oYi5zaHJpbmsoQ0tFRElUT1IuU0hSSU5LX1RFWFQpLGMuZWxlbWVudFBhdGgoYi5nZXRDb21tb25BbmNlc3RvcigpKS5jb250YWlucyhcImFcIiwxKSk6bnVsbH0sZ2V0RWRpdG9yQW5jaG9yczpmdW5jdGlvbihjKXtmb3IodmFyIGI9Yy5lZGl0YWJsZSgpLGE9Yi5pc0lubGluZSgpJiYhYy5wbHVnaW5zLmRpdmFyZWE/Yy5kb2N1bWVudDpiLGI9YS5nZXRFbGVtZW50c0J5VGFnKFwiYVwiKSxhPWEuZ2V0RWxlbWVudHNCeVRhZyhcImltZ1wiKSxmPVtdLGU9MCxkO2Q9Yi5nZXRJdGVtKGUrKyk7KShkLmRhdGEoXCJja2Utc2F2ZWQtbmFtZVwiKXx8ZC5oYXNBdHRyaWJ1dGUoXCJuYW1lXCIpKSYmZi5wdXNoKHtuYW1lOmQuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHxcclxuZC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGlkOmQuZ2V0QXR0cmlidXRlKFwiaWRcIil9KTtmb3IoZT0wO2Q9YS5nZXRJdGVtKGUrKyk7KShkPXRoaXMudHJ5UmVzdG9yZUZha2VBbmNob3IoYyxkKSkmJmYucHVzaCh7bmFtZTpkLmdldEF0dHJpYnV0ZShcIm5hbWVcIiksaWQ6ZC5nZXRBdHRyaWJ1dGUoXCJpZFwiKX0pO3JldHVybiBmfSxmYWtlQW5jaG9yOiEwLHRyeVJlc3RvcmVGYWtlQW5jaG9yOmZ1bmN0aW9uKGMsYil7aWYoYiYmYi5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpJiZcImFuY2hvclwiPT1iLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpe3ZhciBhPWMucmVzdG9yZVJlYWxFbGVtZW50KGIpO2lmKGEuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpKXJldHVybiBhfX0scGFyc2VMaW5rQXR0cmlidXRlczpmdW5jdGlvbihjLGIpe3ZhciBhPWImJihiLmRhdGEoXCJja2Utc2F2ZWQtaHJlZlwiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKXx8XCJcIixmPWMucGx1Z2lucy5saW5rLmNvbXBpbGVkUHJvdGVjdGlvbkZ1bmN0aW9uLFxyXG5lPWMuY29uZmlnLmVtYWlsUHJvdGVjdGlvbixkLGc9e307YS5tYXRjaCh0KSYmKFwiZW5jb2RlXCI9PWU/YT1hLnJlcGxhY2UoQSxmdW5jdGlvbihhLGIsYyl7Yz1jfHxcIlwiO3JldHVyblwibWFpbHRvOlwiK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGIuc3BsaXQoXCIsXCIpKStjLnJlcGxhY2UoL1xcXFwnL2csXCInXCIpfSk6ZSYmYS5yZXBsYWNlKEIsZnVuY3Rpb24oYSxiLGMpe2lmKGI9PWYubmFtZSl7Zy50eXBlPVwiZW1haWxcIjthPWcuZW1haWw9e307Yj0vKF4nKXwoJyQpL2c7Yz1jLm1hdGNoKC9bXixcXHNdKy9nKTtmb3IodmFyIGQ9Yy5sZW5ndGgsZSxoLGs9MDtrPGQ7aysrKWU9ZGVjb2RlVVJJQ29tcG9uZW50LGg9Y1trXS5yZXBsYWNlKGIsXCJcIikucmVwbGFjZSgvXFxcXCcvZyxcIidcIiksaD1lKGgpLGU9Zi5wYXJhbXNba10udG9Mb3dlckNhc2UoKSxhW2VdPWg7YS5hZGRyZXNzPVthLm5hbWUsYS5kb21haW5dLmpvaW4oXCJAXCIpfX0pKTtpZighZy50eXBlKWlmKGU9YS5tYXRjaCh4KSlnLnR5cGU9XHJcblwiYW5jaG9yXCIsZy5hbmNob3I9e30sZy5hbmNob3IubmFtZT1nLmFuY2hvci5pZD1lWzFdO2Vsc2UgaWYoZT1hLm1hdGNoKHUpKXtkPWEubWF0Y2godik7YT1hLm1hdGNoKHcpO2cudHlwZT1cImVtYWlsXCI7dmFyIGs9Zy5lbWFpbD17fTtrLmFkZHJlc3M9ZVsxXTtkJiYoay5zdWJqZWN0PWRlY29kZVVSSUNvbXBvbmVudChkWzFdKSk7YSYmKGsuYm9keT1kZWNvZGVVUklDb21wb25lbnQoYVsxXSkpfWVsc2UgYSYmKGQ9YS5tYXRjaCh5KSkmJihnLnR5cGU9XCJ1cmxcIixnLnVybD17fSxnLnVybC5wcm90b2NvbD1kWzFdLGcudXJsLnVybD1kWzJdKTtpZihiKXtpZihhPWIuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpKWcudGFyZ2V0PXt0eXBlOmEubWF0Y2goeik/YTpcImZyYW1lXCIsbmFtZTphfTtlbHNlIGlmKGE9KGE9Yi5kYXRhKFwiY2tlLXBhLW9uY2xpY2tcIil8fGIuZ2V0QXR0cmlidXRlKFwib25jbGlja1wiKSkmJmEubWF0Y2goQykpZm9yKGcudGFyZ2V0PXt0eXBlOlwicG9wdXBcIixuYW1lOmFbMV19O2U9XHJcbkQuZXhlYyhhWzJdKTspXCJ5ZXNcIiE9ZVsyXSYmXCIxXCIhPWVbMl18fGVbMV1pbntoZWlnaHQ6MSx3aWR0aDoxLHRvcDoxLGxlZnQ6MX0/aXNGaW5pdGUoZVsyXSkmJihnLnRhcmdldFtlWzFdXT1lWzJdKTpnLnRhcmdldFtlWzFdXT0hMDt2YXIgYT17fSxoO2ZvcihoIGluIG0pKGU9Yi5nZXRBdHRyaWJ1dGUoaCkpJiYoYVttW2hdXT1lKTtpZihoPWIuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHxhLmFkdk5hbWUpYS5hZHZOYW1lPWg7Q0tFRElUT1IudG9vbHMuaXNFbXB0eShhKXx8KGcuYWR2YW5jZWQ9YSl9cmV0dXJuIGd9LGdldExpbmtBdHRyaWJ1dGVzOmZ1bmN0aW9uKGMsYil7dmFyIGE9Yy5jb25maWcuZW1haWxQcm90ZWN0aW9ufHxcIlwiLGY9e307c3dpdGNoKGIudHlwZSl7Y2FzZSBcInVybFwiOnZhciBhPWIudXJsJiZ2b2lkIDAhPT1iLnVybC5wcm90b2NvbD9iLnVybC5wcm90b2NvbDpcImh0dHA6Ly9cIixlPWIudXJsJiZDS0VESVRPUi50b29scy50cmltKGIudXJsLnVybCl8fFwiXCI7ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09XHJcbjA9PT1lLmluZGV4T2YoXCIvXCIpP2U6YStlO2JyZWFrO2Nhc2UgXCJhbmNob3JcIjphPWIuYW5jaG9yJiZiLmFuY2hvci5pZDtmW1wiZGF0YS1ja2Utc2F2ZWQtaHJlZlwiXT1cIiNcIisoYi5hbmNob3ImJmIuYW5jaG9yLm5hbWV8fGF8fFwiXCIpO2JyZWFrO2Nhc2UgXCJlbWFpbFwiOnZhciBkPWIuZW1haWwsZT1kLmFkZHJlc3M7c3dpdGNoKGEpe2Nhc2UgXCJcIjpjYXNlIFwiZW5jb2RlXCI6dmFyIGc9ZW5jb2RlVVJJQ29tcG9uZW50KGQuc3ViamVjdHx8XCJcIiksaz1lbmNvZGVVUklDb21wb25lbnQoZC5ib2R5fHxcIlwiKSxkPVtdO2cmJmQucHVzaChcInN1YmplY3RcXHgzZFwiK2cpO2smJmQucHVzaChcImJvZHlcXHgzZFwiK2spO2Q9ZC5sZW5ndGg/XCI/XCIrZC5qb2luKFwiXFx4MjZcIik6XCJcIjtcImVuY29kZVwiPT1hPyhhPVtcImphdmFzY3JpcHQ6dm9pZChsb2NhdGlvbi5ocmVmXFx4M2QnbWFpbHRvOicrXCIscShlKV0sZCYmYS5wdXNoKFwiKydcIixwKGQpLFwiJ1wiKSxhLnB1c2goXCIpXCIpKTphPVtcIm1haWx0bzpcIixlLGRdO2JyZWFrO2RlZmF1bHQ6YT1cclxuZS5zcGxpdChcIkBcIiwyKSxkLm5hbWU9YVswXSxkLmRvbWFpbj1hWzFdLGE9W1wiamF2YXNjcmlwdDpcIixyKGMsZCldfWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdPWEuam9pbihcIlwiKX1pZihiLnRhcmdldClpZihcInBvcHVwXCI9PWIudGFyZ2V0LnR5cGUpe2Zvcih2YXIgYT1bXCJ3aW5kb3cub3Blbih0aGlzLmhyZWYsICdcIixiLnRhcmdldC5uYW1lfHxcIlwiLFwiJywgJ1wiXSxoPVwicmVzaXphYmxlIHN0YXR1cyBsb2NhdGlvbiB0b29sYmFyIG1lbnViYXIgZnVsbHNjcmVlbiBzY3JvbGxiYXJzIGRlcGVuZGVudFwiLnNwbGl0KFwiIFwiKSxlPWgubGVuZ3RoLGc9ZnVuY3Rpb24oYSl7Yi50YXJnZXRbYV0mJmgucHVzaChhK1wiXFx4M2RcIitiLnRhcmdldFthXSl9LGQ9MDtkPGU7ZCsrKWhbZF0rPWIudGFyZ2V0W2hbZF1dP1wiXFx4M2R5ZXNcIjpcIlxceDNkbm9cIjtnKFwid2lkdGhcIik7ZyhcImxlZnRcIik7ZyhcImhlaWdodFwiKTtnKFwidG9wXCIpO2EucHVzaChoLmpvaW4oXCIsXCIpLFwiJyk7IHJldHVybiBmYWxzZTtcIik7ZltcImRhdGEtY2tlLXBhLW9uY2xpY2tcIl09XHJcbmEuam9pbihcIlwiKX1lbHNlXCJub3RTZXRcIiE9Yi50YXJnZXQudHlwZSYmYi50YXJnZXQubmFtZSYmKGYudGFyZ2V0PWIudGFyZ2V0Lm5hbWUpO2lmKGIuYWR2YW5jZWQpe2Zvcih2YXIgbCBpbiBtKShhPWIuYWR2YW5jZWRbbVtsXV0pJiYoZltsXT1hKTtmLm5hbWUmJihmW1wiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXT1mLm5hbWUpfWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdJiYoZi5ocmVmPWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdKTtsPXt0YXJnZXQ6MSxvbmNsaWNrOjEsXCJkYXRhLWNrZS1wYS1vbmNsaWNrXCI6MSxcImRhdGEtY2tlLXNhdmVkLW5hbWVcIjoxfTtiLmFkdmFuY2VkJiZDS0VESVRPUi50b29scy5leHRlbmQobCxtKTtmb3IodmFyIG4gaW4gZilkZWxldGUgbFtuXTtyZXR1cm57c2V0OmYscmVtb3ZlZDpDS0VESVRPUi50b29scy5vYmplY3RLZXlzKGwpfX19O0NLRURJVE9SLnVubGlua0NvbW1hbmQ9ZnVuY3Rpb24oKXt9O0NLRURJVE9SLnVubGlua0NvbW1hbmQucHJvdG90eXBlPVxyXG57ZXhlYzpmdW5jdGlvbihjKXt2YXIgYj1uZXcgQ0tFRElUT1Iuc3R5bGUoe2VsZW1lbnQ6XCJhXCIsdHlwZTpDS0VESVRPUi5TVFlMRV9JTkxJTkUsYWx3YXlzUmVtb3ZlRWxlbWVudDoxfSk7Yy5yZW1vdmVTdHlsZShiKX0scmVmcmVzaDpmdW5jdGlvbihjLGIpe3ZhciBhPWIubGFzdEVsZW1lbnQmJmIubGFzdEVsZW1lbnQuZ2V0QXNjZW5kYW50KFwiYVwiLCEwKTthJiZcImFcIj09YS5nZXROYW1lKCkmJmEuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSYmYS5nZXRDaGlsZENvdW50KCk/dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PRkYpOnRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfSxjb250ZXh0U2Vuc2l0aXZlOjEsc3RhcnREaXNhYmxlZDoxLHJlcXVpcmVkQ29udGVudDpcImFbaHJlZl1cIn07Q0tFRElUT1IucmVtb3ZlQW5jaG9yQ29tbWFuZD1mdW5jdGlvbigpe307Q0tFRElUT1IucmVtb3ZlQW5jaG9yQ29tbWFuZC5wcm90b3R5cGU9e2V4ZWM6ZnVuY3Rpb24oYyl7dmFyIGI9XHJcbmMuZ2V0U2VsZWN0aW9uKCksYT1iLmNyZWF0ZUJvb2ttYXJrcygpLGY7aWYoYiYmKGY9Yi5nZXRTZWxlY3RlZEVsZW1lbnQoKSkmJihmLmdldENoaWxkQ291bnQoKT9mLmlzKFwiYVwiKTpDS0VESVRPUi5wbHVnaW5zLmxpbmsudHJ5UmVzdG9yZUZha2VBbmNob3IoYyxmKSkpZi5yZW1vdmUoMSk7ZWxzZSBpZihmPUNLRURJVE9SLnBsdWdpbnMubGluay5nZXRTZWxlY3RlZExpbmsoYykpZi5oYXNBdHRyaWJ1dGUoXCJocmVmXCIpPyhmLnJlbW92ZUF0dHJpYnV0ZXMoe25hbWU6MSxcImRhdGEtY2tlLXNhdmVkLW5hbWVcIjoxfSksZi5yZW1vdmVDbGFzcyhcImNrZV9hbmNob3JcIikpOmYucmVtb3ZlKDEpO2Iuc2VsZWN0Qm9va21hcmtzKGEpfSxyZXF1aXJlZENvbnRlbnQ6XCJhW25hbWVdXCJ9O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5jb25maWcse2xpbmtTaG93QWR2YW5jZWRUYWI6ITAsbGlua1Nob3dUYXJnZXRUYWI6ITB9KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gSShiLG0sZSl7ZnVuY3Rpb24gYyhjKXtpZighKCEoYT1kW2M/XCJnZXRGaXJzdFwiOlwiZ2V0TGFzdFwiXSgpKXx8YS5pcyYmYS5pc0Jsb2NrQm91bmRhcnkoKXx8IShwPW0ucm9vdFtjP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oQ0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGUoITApKSl8fHAuaXMmJnAuaXNCbG9ja0JvdW5kYXJ5KHticjoxfSkpKWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpW2M/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGEpfWZvcih2YXIgZj1DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkobS5yb290LGUpLGc9W10saz0wO2s8bS5jb250ZW50cy5sZW5ndGg7aysrKXt2YXIgaD1tLmNvbnRlbnRzW2tdOyhoPWguZ2V0QXNjZW5kYW50KFwibGlcIiwhMCkpJiYhaC5nZXRDdXN0b21EYXRhKFwibGlzdF9pdGVtX3Byb2Nlc3NlZFwiKSYmKGcucHVzaChoKSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoZSxcclxuaCxcImxpc3RfaXRlbV9wcm9jZXNzZWRcIiwhMCkpfWg9bnVsbDtmb3Ioaz0wO2s8Zy5sZW5ndGg7aysrKWg9Z1trXS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpLGZbaF0uaW5kZW50PS0xO2ZvcihrPWgrMTtrPGYubGVuZ3RoO2srKylpZihmW2tdLmluZGVudD5mW2stMV0uaW5kZW50KzEpe2c9ZltrLTFdLmluZGVudCsxLWZba10uaW5kZW50O2ZvcihoPWZba10uaW5kZW50O2Zba10mJmZba10uaW5kZW50Pj1oOylmW2tdLmluZGVudCs9ZyxrKys7ay0tfXZhciBkPUNLRURJVE9SLnBsdWdpbnMubGlzdC5hcnJheVRvTGlzdChmLGUsbnVsbCxiLmNvbmZpZy5lbnRlck1vZGUsbS5yb290LmdldEF0dHJpYnV0ZShcImRpclwiKSkubGlzdE5vZGUsYSxwO2MoITApO2MoKTtkLnJlcGxhY2UobS5yb290KTtiLmZpcmUoXCJjb250ZW50RG9tSW52YWxpZGF0ZWRcIil9ZnVuY3Rpb24gQihiLG0pe3RoaXMubmFtZT1iO3RoaXMuY29udGV4dD10aGlzLnR5cGU9bTt0aGlzLmFsbG93ZWRDb250ZW50PVxyXG5tK1wiIGxpXCI7dGhpcy5yZXF1aXJlZENvbnRlbnQ9bX1mdW5jdGlvbiBFKGIsbSxlLGMpe2Zvcih2YXIgZixnO2Y9YltjP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0oSik7KShnPWYuZ2V0RGlyZWN0aW9uKDEpKSE9PW0uZ2V0RGlyZWN0aW9uKDEpJiZmLnNldEF0dHJpYnV0ZShcImRpclwiLGcpLGYucmVtb3ZlKCksZT9mW2M/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGUpOm0uYXBwZW5kKGYsYyl9ZnVuY3Rpb24gRihiKXtmdW5jdGlvbiBtKGUpe3ZhciBjPWJbZT9cImdldFByZXZpb3VzXCI6XCJnZXROZXh0XCJdKHUpO2MmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZjLmlzKGIuZ2V0TmFtZSgpKSYmKEUoYixjLG51bGwsIWUpLGIucmVtb3ZlKCksYj1jKX1tKCk7bSgxKX1mdW5jdGlvbiBHKGIpe3JldHVybiBiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGIuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRibG9ja3x8Yi5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSYmXHJcbkNLRURJVE9SLmR0ZFtiLmdldE5hbWUoKV1bXCIjXCJdfWZ1bmN0aW9uIEMoYixtLGUpe2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtlLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFMpO3ZhciBjPWUuZXh0cmFjdENvbnRlbnRzKCk7bS50cmltKCExLCEwKTt2YXIgZj1tLmNyZWF0ZUJvb2ttYXJrKCksZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKG0uc3RhcnRDb250YWluZXIpLGs9Zy5ibG9jayxnPWcubGFzdEVsZW1lbnQuZ2V0QXNjZW5kYW50KFwibGlcIiwxKXx8ayxoPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZS5zdGFydENvbnRhaW5lciksZD1oLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pLGg9aC5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpO2s/KGs9ay5nZXRCb2d1cygpKSYmay5yZW1vdmUoKTpoJiYoaz1oLmdldFByZXZpb3VzKHUpKSYmeihrKSYmay5yZW1vdmUoKTsoaz1jLmdldExhc3QoKSkmJmsudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcclxuay5pcyhcImJyXCIpJiZrLnJlbW92ZSgpOyhrPW0uc3RhcnRDb250YWluZXIuZ2V0Q2hpbGQobS5zdGFydE9mZnNldCkpP2MuaW5zZXJ0QmVmb3JlKGspOm0uc3RhcnRDb250YWluZXIuYXBwZW5kKGMpO2QmJihjPUEoZCkpJiYoZy5jb250YWlucyhkKT8oRShjLGQuZ2V0UGFyZW50KCksZCksYy5yZW1vdmUoKSk6Zy5hcHBlbmQoYykpO2Zvcig7ZS5jaGVja1N0YXJ0T2ZCbG9jaygpJiZlLmNoZWNrRW5kT2ZCbG9jaygpOyl7aD1lLnN0YXJ0UGF0aCgpO2M9aC5ibG9jaztpZighYylicmVhaztjLmlzKFwibGlcIikmJihnPWMuZ2V0UGFyZW50KCksYy5lcXVhbHMoZy5nZXRMYXN0KHUpKSYmYy5lcXVhbHMoZy5nZXRGaXJzdCh1KSkmJihjPWcpKTtlLm1vdmVUb1Bvc2l0aW9uKGMsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtjLnJlbW92ZSgpfWU9ZS5jbG9uZSgpO2M9Yi5lZGl0YWJsZSgpO2Uuc2V0RW5kQXQoYyxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtlPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpO1xyXG5lLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4gdShhKSYmIXooYSl9OyhlPWUubmV4dCgpKSYmZS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmUuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRsaXN0JiZGKGUpO20ubW92ZVRvQm9va21hcmsoZik7bS5zZWxlY3QoKTtiLmZpcmUoXCJzYXZlU25hcHNob3RcIil9ZnVuY3Rpb24gQShiKXtyZXR1cm4oYj1iLmdldExhc3QodSkpJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5nZXROYW1lKClpbiB2P2I6bnVsbH12YXIgdj17b2w6MSx1bDoxfSxLPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxIPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKSx1PWZ1bmN0aW9uKGIpe3JldHVybiEoSyhiKXx8SChiKSl9LHo9Q0tFRElUT1IuZG9tLndhbGtlci5ib2d1cygpO0NLRURJVE9SLnBsdWdpbnMubGlzdD17bGlzdFRvQXJyYXk6ZnVuY3Rpb24oYixtLGUsYyxmKXtpZighdltiLmdldE5hbWUoKV0pcmV0dXJuW107XHJcbmN8fChjPTApO2V8fChlPVtdKTtmb3IodmFyIGc9MCxrPWIuZ2V0Q2hpbGRDb3VudCgpO2c8aztnKyspe3ZhciBoPWIuZ2V0Q2hpbGQoZyk7aC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmguZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRsaXN0JiZDS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkoaCxtLGUsYysxKTtpZihcImxpXCI9PWguJC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZD17cGFyZW50OmIsaW5kZW50OmMsZWxlbWVudDpoLGNvbnRlbnRzOltdfTtmP2QuZ3JhbmRwYXJlbnQ9ZjooZC5ncmFuZHBhcmVudD1iLmdldFBhcmVudCgpLGQuZ3JhbmRwYXJlbnQmJlwibGlcIj09ZC5ncmFuZHBhcmVudC4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihkLmdyYW5kcGFyZW50PWQuZ3JhbmRwYXJlbnQuZ2V0UGFyZW50KCkpKTttJiZDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIobSxoLFwibGlzdGFycmF5X2luZGV4XCIsZS5sZW5ndGgpO2UucHVzaChkKTtcclxuZm9yKHZhciBhPTAscD1oLmdldENoaWxkQ291bnQoKSxsO2E8cDthKyspbD1oLmdldENoaWxkKGEpLGwudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZ2W2wuZ2V0TmFtZSgpXT9DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkobCxtLGUsYysxLGQuZ3JhbmRwYXJlbnQpOmQuY29udGVudHMucHVzaChsKX19cmV0dXJuIGV9LGFycmF5VG9MaXN0OmZ1bmN0aW9uKGIsbSxlLGMsZil7ZXx8KGU9MCk7aWYoIWJ8fGIubGVuZ3RoPGUrMSlyZXR1cm4gbnVsbDtmb3IodmFyIGcsaz1iW2VdLnBhcmVudC5nZXREb2N1bWVudCgpLGg9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KGspLGQ9bnVsbCxhPWUscD1NYXRoLm1heChiW2VdLmluZGVudCwwKSxsPW51bGwscSxuLHQ9Yz09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiOzspe3ZhciByPWJbYV07Zz1yLmdyYW5kcGFyZW50O3E9ci5lbGVtZW50LmdldERpcmVjdGlvbigxKTtpZihyLmluZGVudD09cCl7ZCYmYlthXS5wYXJlbnQuZ2V0TmFtZSgpPT1cclxuZC5nZXROYW1lKCl8fChkPWJbYV0ucGFyZW50LmNsb25lKCExLDEpLGYmJmQuc2V0QXR0cmlidXRlKFwiZGlyXCIsZiksaC5hcHBlbmQoZCkpO2w9ZC5hcHBlbmQoci5lbGVtZW50LmNsb25lKDAsMSkpO3EhPWQuZ2V0RGlyZWN0aW9uKDEpJiZsLnNldEF0dHJpYnV0ZShcImRpclwiLHEpO2ZvcihnPTA7ZzxyLmNvbnRlbnRzLmxlbmd0aDtnKyspbC5hcHBlbmQoci5jb250ZW50c1tnXS5jbG9uZSgxLDEpKTthKyt9ZWxzZSBpZihyLmluZGVudD09TWF0aC5tYXgocCwwKSsxKXI9YlthLTFdLmVsZW1lbnQuZ2V0RGlyZWN0aW9uKDEpLGE9Q0tFRElUT1IucGx1Z2lucy5saXN0LmFycmF5VG9MaXN0KGIsbnVsbCxhLGMsciE9cT9xOm51bGwpLCFsLmdldENoaWxkQ291bnQoKSYmQ0tFRElUT1IuZW52Lm5lZWRzTmJzcEZpbGxlciYmNz49ay4kLmRvY3VtZW50TW9kZSYmbC5hcHBlbmQoay5jcmVhdGVUZXh0KFwiwqBcIikpLGwuYXBwZW5kKGEubGlzdE5vZGUpLGE9YS5uZXh0SW5kZXg7ZWxzZSBpZigtMT09XHJcbnIuaW5kZW50JiYhZSYmZyl7dltnLmdldE5hbWUoKV0/KGw9ci5lbGVtZW50LmNsb25lKCExLCEwKSxxIT1nLmdldERpcmVjdGlvbigxKSYmbC5zZXRBdHRyaWJ1dGUoXCJkaXJcIixxKSk6bD1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoayk7dmFyIGQ9Zy5nZXREaXJlY3Rpb24oMSkhPXEseT1yLmVsZW1lbnQsRD15LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLHo9eS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSxBPWwudHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCYmKGMhPUNLRURJVE9SLkVOVEVSX0JSfHxkfHx6fHxEKSx3LEI9ci5jb250ZW50cy5sZW5ndGgseDtmb3IoZz0wO2c8QjtnKyspaWYodz1yLmNvbnRlbnRzW2ddLEgodykmJjE8QilBP3g9dy5jbG9uZSgxLDEpOmwuYXBwZW5kKHcuY2xvbmUoMSwxKSk7ZWxzZSBpZih3LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmdy5pc0Jsb2NrQm91bmRhcnkoKSl7ZCYmIXcuZ2V0RGlyZWN0aW9uKCkmJlxyXG53LnNldEF0dHJpYnV0ZShcImRpclwiLHEpO249dzt2YXIgQz15LmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO0MmJm4uc2V0QXR0cmlidXRlKFwic3R5bGVcIixDLnJlcGxhY2UoLyhbXjtdKSQvLFwiJDE7XCIpKyhuLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpfHxcIlwiKSk7RCYmdy5hZGRDbGFzcyhEKTtuPW51bGw7eCYmKGwuYXBwZW5kKHgpLHg9bnVsbCk7bC5hcHBlbmQody5jbG9uZSgxLDEpKX1lbHNlIEE/KG58fChuPWsuY3JlYXRlRWxlbWVudCh0KSxsLmFwcGVuZChuKSxkJiZuLnNldEF0dHJpYnV0ZShcImRpclwiLHEpKSx6JiZuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIseiksRCYmbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLEQpLHgmJihuLmFwcGVuZCh4KSx4PW51bGwpLG4uYXBwZW5kKHcuY2xvbmUoMSwxKSkpOmwuYXBwZW5kKHcuY2xvbmUoMSwxKSk7eCYmKChufHxsKS5hcHBlbmQoeCkseD1udWxsKTtsLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQmJmEhPWIubGVuZ3RoLTEmJihDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmXHJcbihxPWwuZ2V0TGFzdCgpKSYmcS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJnEuaXMoXCJiclwiKSYmcS5yZW1vdmUoKSwocT1sLmdldExhc3QodSkpJiZxLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmcS5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKXx8bC5hcHBlbmQoay5jcmVhdGVFbGVtZW50KFwiYnJcIikpKTtxPWwuJC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1wiZGl2XCIhPXEmJlwicFwiIT1xfHxsLmFwcGVuZEJvZ3VzKCk7aC5hcHBlbmQobCk7ZD1udWxsO2ErK31lbHNlIHJldHVybiBudWxsO249bnVsbDtpZihiLmxlbmd0aDw9YXx8TWF0aC5tYXgoYlthXS5pbmRlbnQsMCk8cClicmVha31pZihtKWZvcihiPWguZ2V0Rmlyc3QoKTtiOyl7aWYoYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhck1hcmtlcnMobSxiKSxiLmdldE5hbWUoKWluIENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0mJihlPWIsaz1mPWM9dm9pZCAwLGM9ZS5nZXREaXJlY3Rpb24oKSkpKXtmb3IoZj1cclxuZS5nZXRQYXJlbnQoKTtmJiYhKGs9Zi5nZXREaXJlY3Rpb24oKSk7KWY9Zi5nZXRQYXJlbnQoKTtjPT1rJiZlLnJlbW92ZUF0dHJpYnV0ZShcImRpclwiKX1iPWIuZ2V0TmV4dFNvdXJjZU5vZGUoKX1yZXR1cm57bGlzdE5vZGU6aCxuZXh0SW5kZXg6YX19fTt2YXIgTD0vXmhbMS02XSQvLEo9Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZShDS0VESVRPUi5OT0RFX0VMRU1FTlQpO0IucHJvdG90eXBlPXtleGVjOmZ1bmN0aW9uKGIpe3RoaXMucmVmcmVzaChiLGIuZWxlbWVudFBhdGgoKSk7dmFyIG09Yi5jb25maWcsZT1iLmdldFNlbGVjdGlvbigpLGM9ZSYmZS5nZXRSYW5nZXMoKTtpZih0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkYpe3ZhciBmPWIuZWRpdGFibGUoKTtpZihmLmdldEZpcnN0KHUpKXt2YXIgZz0xPT1jLmxlbmd0aCYmY1swXTsobT1nJiZnLmdldEVuY2xvc2VkTm9kZSgpKSYmbS5pcyYmdGhpcy50eXBlPT1tLmdldE5hbWUoKSYmdGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PTil9ZWxzZSBtLmVudGVyTW9kZT09XHJcbkNLRURJVE9SLkVOVEVSX0JSP2YuYXBwZW5kQm9ndXMoKTpjWzBdLmZpeEJsb2NrKDEsbS5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIiksZS5zZWxlY3RSYW5nZXMoYyl9Zm9yKHZhciBtPWUuY3JlYXRlQm9va21hcmtzKCEwKSxmPVtdLGs9e30sYz1jLmNyZWF0ZUl0ZXJhdG9yKCksaD0wOyhnPWMuZ2V0TmV4dFJhbmdlKCkpJiYrK2g7KXt2YXIgZD1nLmdldEJvdW5kYXJ5Tm9kZXMoKSxhPWQuc3RhcnROb2RlLHA9ZC5lbmROb2RlO2EudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcInRkXCI9PWEuZ2V0TmFtZSgpJiZnLnNldFN0YXJ0QXQoZC5zdGFydE5vZGUsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO3AudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcInRkXCI9PXAuZ2V0TmFtZSgpJiZnLnNldEVuZEF0KGQuZW5kTm9kZSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtnPWcuY3JlYXRlSXRlcmF0b3IoKTtmb3IoZy5mb3JjZUJyQnJlYWs9XHJcbnRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRjtkPWcuZ2V0TmV4dFBhcmFncmFwaCgpOylpZighZC5nZXRDdXN0b21EYXRhKFwibGlzdF9ibG9ja1wiKSl7Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGssZCxcImxpc3RfYmxvY2tcIiwxKTtmb3IodmFyIGw9Yi5lbGVtZW50UGF0aChkKSxhPWwuZWxlbWVudHMscD0wLGw9bC5ibG9ja0xpbWl0LHEsbj1hLmxlbmd0aC0xOzA8PW4mJihxPWFbbl0pO24tLSlpZih2W3EuZ2V0TmFtZSgpXSYmbC5jb250YWlucyhxKSl7bC5yZW1vdmVDdXN0b21EYXRhKFwibGlzdF9ncm91cF9vYmplY3RfXCIraCk7KGE9cS5nZXRDdXN0b21EYXRhKFwibGlzdF9ncm91cF9vYmplY3RcIikpP2EuY29udGVudHMucHVzaChkKTooYT17cm9vdDpxLGNvbnRlbnRzOltkXX0sZi5wdXNoKGEpLENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihrLHEsXCJsaXN0X2dyb3VwX29iamVjdFwiLGEpKTtwPTE7YnJlYWt9cHx8KHA9bCxwLmdldEN1c3RvbURhdGEoXCJsaXN0X2dyb3VwX29iamVjdF9cIitcclxuaCk/cC5nZXRDdXN0b21EYXRhKFwibGlzdF9ncm91cF9vYmplY3RfXCIraCkuY29udGVudHMucHVzaChkKTooYT17cm9vdDpwLGNvbnRlbnRzOltkXX0sQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGsscCxcImxpc3RfZ3JvdXBfb2JqZWN0X1wiK2gsYSksZi5wdXNoKGEpKSl9fWZvcihxPVtdOzA8Zi5sZW5ndGg7KWlmKGE9Zi5zaGlmdCgpLHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRilpZih2W2Eucm9vdC5nZXROYW1lKCldKXtjPWI7aD1hO2E9aztnPXE7cD1DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkoaC5yb290LGEpO2w9W107Zm9yKGQ9MDtkPGguY29udGVudHMubGVuZ3RoO2QrKyluPWguY29udGVudHNbZF0sKG49bi5nZXRBc2NlbmRhbnQoXCJsaVwiLCEwKSkmJiFuLmdldEN1c3RvbURhdGEoXCJsaXN0X2l0ZW1fcHJvY2Vzc2VkXCIpJiYobC5wdXNoKG4pLENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihhLG4sXCJsaXN0X2l0ZW1fcHJvY2Vzc2VkXCIsXHJcbiEwKSk7Zm9yKHZhciBuPWgucm9vdC5nZXREb2N1bWVudCgpLHQ9dm9pZCAwLHI9dm9pZCAwLGQ9MDtkPGwubGVuZ3RoO2QrKyl7dmFyIHk9bFtkXS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpLHQ9cFt5XS5wYXJlbnQ7dC5pcyh0aGlzLnR5cGUpfHwocj1uLmNyZWF0ZUVsZW1lbnQodGhpcy50eXBlKSx0LmNvcHlBdHRyaWJ1dGVzKHIse3N0YXJ0OjEsdHlwZToxfSksci5yZW1vdmVTdHlsZShcImxpc3Qtc3R5bGUtdHlwZVwiKSxwW3ldLnBhcmVudD1yKX1hPUNLRURJVE9SLnBsdWdpbnMubGlzdC5hcnJheVRvTGlzdChwLGEsbnVsbCxjLmNvbmZpZy5lbnRlck1vZGUpO3A9dm9pZCAwO2w9YS5saXN0Tm9kZS5nZXRDaGlsZENvdW50KCk7Zm9yKGQ9MDtkPGwmJihwPWEubGlzdE5vZGUuZ2V0Q2hpbGQoZCkpO2QrKylwLmdldE5hbWUoKT09dGhpcy50eXBlJiZnLnB1c2gocCk7YS5saXN0Tm9kZS5yZXBsYWNlKGgucm9vdCk7Yy5maXJlKFwiY29udGVudERvbUludmFsaWRhdGVkXCIpfWVsc2V7cD1cclxuYjtnPWE7ZD1xO2w9Zy5jb250ZW50cztjPWcucm9vdC5nZXREb2N1bWVudCgpO2g9W107MT09bC5sZW5ndGgmJmxbMF0uZXF1YWxzKGcucm9vdCkmJihhPWMuY3JlYXRlRWxlbWVudChcImRpdlwiKSxsWzBdLm1vdmVDaGlsZHJlbiYmbFswXS5tb3ZlQ2hpbGRyZW4oYSksbFswXS5hcHBlbmQoYSksbFswXT1hKTtnPWcuY29udGVudHNbMF0uZ2V0UGFyZW50KCk7Zm9yKG49MDtuPGwubGVuZ3RoO24rKylnPWcuZ2V0Q29tbW9uQW5jZXN0b3IobFtuXS5nZXRQYXJlbnQoKSk7dD1wLmNvbmZpZy51c2VDb21wdXRlZFN0YXRlO3A9YT12b2lkIDA7dD12b2lkIDA9PT10fHx0O2ZvcihuPTA7bjxsLmxlbmd0aDtuKyspZm9yKHI9bFtuXTt5PXIuZ2V0UGFyZW50KCk7KXtpZih5LmVxdWFscyhnKSl7aC5wdXNoKHIpOyFwJiZyLmdldERpcmVjdGlvbigpJiYocD0xKTtyPXIuZ2V0RGlyZWN0aW9uKHQpO251bGwhPT1hJiYoYT1hJiZhIT1yP251bGw6cik7YnJlYWt9cj15fWlmKCEoMT5oLmxlbmd0aCkpe2w9XHJcbmhbaC5sZW5ndGgtMV0uZ2V0TmV4dCgpO249Yy5jcmVhdGVFbGVtZW50KHRoaXMudHlwZSk7ZC5wdXNoKG4pO2Zvcih0PWQ9dm9pZCAwO2gubGVuZ3RoOylkPWguc2hpZnQoKSx0PWMuY3JlYXRlRWxlbWVudChcImxpXCIpLHI9ZCxyLmlzKFwicHJlXCIpfHxMLnRlc3Qoci5nZXROYW1lKCkpfHxcImZhbHNlXCI9PXIuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP2QuYXBwZW5kVG8odCk6KGQuY29weUF0dHJpYnV0ZXModCksYSYmZC5nZXREaXJlY3Rpb24oKSYmKHQucmVtb3ZlU3R5bGUoXCJkaXJlY3Rpb25cIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXJcIikpLGQubW92ZUNoaWxkcmVuKHQpLGQucmVtb3ZlKCkpLHQuYXBwZW5kVG8obik7YSYmcCYmbi5zZXRBdHRyaWJ1dGUoXCJkaXJcIixhKTtsP24uaW5zZXJ0QmVmb3JlKGwpOm4uYXBwZW5kVG8oZyl9fWVsc2UgdGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04mJnZbYS5yb290LmdldE5hbWUoKV0mJkkuY2FsbCh0aGlzLGIsYSxrKTtcclxuZm9yKG49MDtuPHEubGVuZ3RoO24rKylGKHFbbl0pO0NLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhrKTtlLnNlbGVjdEJvb2ttYXJrcyhtKTtiLmZvY3VzKCl9LHJlZnJlc2g6ZnVuY3Rpb24oYixtKXt2YXIgZT1tLmNvbnRhaW5zKHYsMSksYz1tLmJsb2NrTGltaXR8fG0ucm9vdDtlJiZjLmNvbnRhaW5zKGUpP3RoaXMuc2V0U3RhdGUoZS5pcyh0aGlzLnR5cGUpP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRik6dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PRkYpfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJsaXN0XCIse3JlcXVpcmVzOlwiaW5kZW50bGlzdFwiLGluaXQ6ZnVuY3Rpb24oYil7Yi5ibG9ja2xlc3N8fChiLmFkZENvbW1hbmQoXCJudW1iZXJlZGxpc3RcIixuZXcgQihcIm51bWJlcmVkbGlzdFwiLFwib2xcIikpLGIuYWRkQ29tbWFuZChcImJ1bGxldGVkbGlzdFwiLG5ldyBCKFwiYnVsbGV0ZWRsaXN0XCIsXCJ1bFwiKSksYi51aS5hZGRCdXR0b24mJlxyXG4oYi51aS5hZGRCdXR0b24oXCJOdW1iZXJlZExpc3RcIix7bGFiZWw6Yi5sYW5nLmxpc3QubnVtYmVyZWRsaXN0LGNvbW1hbmQ6XCJudW1iZXJlZGxpc3RcIixkaXJlY3Rpb25hbDohMCx0b29sYmFyOlwibGlzdCwxMFwifSksYi51aS5hZGRCdXR0b24oXCJCdWxsZXRlZExpc3RcIix7bGFiZWw6Yi5sYW5nLmxpc3QuYnVsbGV0ZWRsaXN0LGNvbW1hbmQ6XCJidWxsZXRlZGxpc3RcIixkaXJlY3Rpb25hbDohMCx0b29sYmFyOlwibGlzdCwyMFwifSkpLGIub24oXCJrZXlcIixmdW5jdGlvbihtKXt2YXIgZT1tLmRhdGEuZG9tRXZlbnQuZ2V0S2V5KCksYztpZihcInd5c2l3eWdcIj09Yi5tb2RlJiZlIGluezg6MSw0NjoxfSl7dmFyIGY9Yi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKVswXSxnPWYmJmYuc3RhcnRQYXRoKCk7aWYoZiYmZi5jb2xsYXBzZWQpe3ZhciBrPTg9PWUsaD1iLmVkaXRhYmxlKCksZD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihmLmNsb25lKCkpO2QuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiB1KGEpJiZcclxuIXooYSl9O2QuZ3VhcmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hKGImJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKFwidGFibGVcIikpfTtlPWYuY2xvbmUoKTtpZihrKXt2YXIgYTsoYT1nLmNvbnRhaW5zKHYpKSYmZi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGEsQ0tFRElUT1IuU1RBUlQpJiYoYT1hLmdldFBhcmVudCgpKSYmYS5pcyhcImxpXCIpJiYoYT1BKGEpKT8oYz1hLGE9YS5nZXRQcmV2aW91cyh1KSxlLm1vdmVUb1Bvc2l0aW9uKGEmJnooYSk/YTpjLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCkpOihkLnJhbmdlLnNldFN0YXJ0QXQoaCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksZC5yYW5nZS5zZXRFbmQoZi5zdGFydENvbnRhaW5lcixmLnN0YXJ0T2Zmc2V0KSwoYT1kLnByZXZpb3VzKCkpJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGEuZ2V0TmFtZSgpaW4gdnx8YS5pcyhcImxpXCIpKSYmKGEuaXMoXCJsaVwiKXx8KGQucmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLFxyXG5kLnJlc2V0KCksZC5ldmFsdWF0b3I9RyxhPWQucHJldmlvdXMoKSksYz1hLGUubW92ZVRvRWxlbWVudEVkaXRFbmQoYyksZS5tb3ZlVG9Qb3NpdGlvbihlLmVuZFBhdGgoKS5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSkpO2lmKGMpQyhiLGUsZiksbS5jYW5jZWwoKTtlbHNle3ZhciBwPWcuY29udGFpbnModik7cCYmZi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KHAsQ0tFRElUT1IuU1RBUlQpJiYoYz1wLmdldEZpcnN0KHUpLGYuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChjLENLRURJVE9SLlNUQVJUKSYmKGE9cC5nZXRQcmV2aW91cyh1KSxBKGMpP2EmJihmLm1vdmVUb0VsZW1lbnRFZGl0RW5kKGEpLGYuc2VsZWN0KCkpOmIuZXhlY0NvbW1hbmQoXCJvdXRkZW50XCIpLG0uY2FuY2VsKCkpKX19ZWxzZSBpZihjPWcuY29udGFpbnMoXCJsaVwiKSl7aWYoZC5yYW5nZS5zZXRFbmRBdChoLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGs9KGg9Yy5nZXRMYXN0KHUpKSYmXHJcbkcoaCk/aDpjLGc9MCwoYT1kLm5leHQoKSkmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmdldE5hbWUoKWluIHYmJmEuZXF1YWxzKGgpPyhnPTEsYT1kLm5leHQoKSk6Zi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssQ0tFRElUT1IuRU5EKSYmKGc9MiksZyYmYSl7Zj1mLmNsb25lKCk7Zi5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGEpO2lmKDE9PWcmJihlLm9wdGltaXplKCksIWUuc3RhcnRDb250YWluZXIuZXF1YWxzKGMpKSl7Zm9yKGM9ZS5zdGFydENvbnRhaW5lcjtjLmlzKENLRURJVE9SLmR0ZC4kaW5saW5lKTspcD1jLGM9Yy5nZXRQYXJlbnQoKTtwJiZlLm1vdmVUb1Bvc2l0aW9uKHAsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKX0yPT1nJiYoZS5tb3ZlVG9Qb3NpdGlvbihlLmVuZFBhdGgoKS5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSxmLmVuZFBhdGgoKS5ibG9jayYmZi5tb3ZlVG9Qb3NpdGlvbihmLmVuZFBhdGgoKS5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCkpO1xyXG5DKGIsZSxmKTttLmNhbmNlbCgpfX1lbHNlIGQucmFuZ2Uuc2V0RW5kQXQoaCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSwoYT1kLm5leHQoKSkmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKHYpJiYoYT1hLmdldEZpcnN0KHUpLGcuYmxvY2smJmYuY2hlY2tTdGFydE9mQmxvY2soKSYmZi5jaGVja0VuZE9mQmxvY2soKT8oZy5ibG9jay5yZW1vdmUoKSxmLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSksZi5zZWxlY3QoKSk6QShhKT8oZi5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGEpLGYuc2VsZWN0KCkpOihmPWYuY2xvbmUoKSxmLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSksQyhiLGUsZikpLG0uY2FuY2VsKCkpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLnNlbGVjdGlvbkNoYW5nZSgxKX0pfX19KSl9fSl9KSgpOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMubGlzdHN0eWxlPXtyZXF1aXJlczpcImRpYWxvZyxjb250ZXh0bWVudVwiLGluaXQ6ZnVuY3Rpb24oYSl7aWYoIWEuYmxvY2tsZXNzKXt2YXIgYjtiPW5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwibnVtYmVyZWRMaXN0U3R5bGVcIix7cmVxdWlyZWRDb250ZW50Olwib2xcIixhbGxvd2VkQ29udGVudDpcIm9se2xpc3Qtc3R5bGUtdHlwZX1bc3RhcnRdXCJ9KTtiPWEuYWRkQ29tbWFuZChcIm51bWJlcmVkTGlzdFN0eWxlXCIsYik7YS5hZGRGZWF0dXJlKGIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJudW1iZXJlZExpc3RTdHlsZVwiLHRoaXMucGF0aCtcImRpYWxvZ3MvbGlzdHN0eWxlLmpzXCIpO2I9bmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJidWxsZXRlZExpc3RTdHlsZVwiLHtyZXF1aXJlZENvbnRlbnQ6XCJ1bFwiLGFsbG93ZWRDb250ZW50OlwidWx7bGlzdC1zdHlsZS10eXBlfVwifSk7Yj1hLmFkZENvbW1hbmQoXCJidWxsZXRlZExpc3RTdHlsZVwiLGIpO1xyXG5hLmFkZEZlYXR1cmUoYik7Q0tFRElUT1IuZGlhbG9nLmFkZChcImJ1bGxldGVkTGlzdFN0eWxlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9saXN0c3R5bGUuanNcIik7YS5hZGRNZW51R3JvdXAoXCJsaXN0XCIsMTA4KTthLmFkZE1lbnVJdGVtcyh7bnVtYmVyZWRsaXN0OntsYWJlbDphLmxhbmcubGlzdHN0eWxlLm51bWJlcmVkVGl0bGUsZ3JvdXA6XCJsaXN0XCIsY29tbWFuZDpcIm51bWJlcmVkTGlzdFN0eWxlXCJ9LGJ1bGxldGVkbGlzdDp7bGFiZWw6YS5sYW5nLmxpc3RzdHlsZS5idWxsZXRlZFRpdGxlLGdyb3VwOlwibGlzdFwiLGNvbW1hbmQ6XCJidWxsZXRlZExpc3RTdHlsZVwifX0pO2EuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYSl7aWYoIWF8fGEuaXNSZWFkT25seSgpKXJldHVybiBudWxsO2Zvcig7YTspe3ZhciBiPWEuZ2V0TmFtZSgpO2lmKFwib2xcIj09YilyZXR1cm57bnVtYmVyZWRsaXN0OkNLRURJVE9SLlRSSVNUQVRFX09GRn07aWYoXCJ1bFwiPT1iKXJldHVybntidWxsZXRlZGxpc3Q6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTtcclxuYT1hLmdldFBhcmVudCgpfXJldHVybiBudWxsfSl9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJsaXN0c3R5bGVcIixDS0VESVRPUi5wbHVnaW5zLmxpc3RzdHlsZSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIFYoYSxjLGQpe3JldHVybiBuKGMpJiZuKGQpJiZkLmVxdWFscyhjLmdldE5leHQoZnVuY3Rpb24oYSl7cmV0dXJuIShFKGEpfHxGKGEpfHx1KGEpKX0pKX1mdW5jdGlvbiB6KGEpe3RoaXMudXBwZXI9YVswXTt0aGlzLmxvd2VyPWFbMV07dGhpcy5zZXQuYXBwbHkodGhpcyxhLnNsaWNlKDIpKX1mdW5jdGlvbiBPKGEpe3ZhciBjPWEuZWxlbWVudDtpZihjJiZuKGMpJiYoYz1jLmdldEFzY2VuZGFudChhLnRyaWdnZXJzLCEwKSkmJmEuZWRpdGFibGUuY29udGFpbnMoYykpe3ZhciBkPVAoYyk7aWYoXCJ0cnVlXCI9PWQuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVybiBjO2lmKGQuaXMoYS50cmlnZ2VycykpcmV0dXJuIGR9cmV0dXJuIG51bGx9ZnVuY3Rpb24ga2EoYSxjLGQpe3IoYSxjKTtyKGEsZCk7YT1jLnNpemUuYm90dG9tO2Q9ZC5zaXplLnRvcDtyZXR1cm4gYSYmZD8wfChhK2QpLzI6YXx8ZH1mdW5jdGlvbiB3KGEsYyxkKXtyZXR1cm4gYz1cclxuY1tkP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oZnVuY3Rpb24oYil7cmV0dXJuIGImJmIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYhRShiKXx8bihiKSYmIXUoYikmJiFBKGEsYil9KX1mdW5jdGlvbiBxKGEsYyxkKXtyZXR1cm4gYT5jJiZhPGR9ZnVuY3Rpb24gUChhLGMpe2lmKGEuZGF0YShcImNrZS1lZGl0YWJsZVwiKSlyZXR1cm4gbnVsbDtmb3IoY3x8KGE9YS5nZXRQYXJlbnQoKSk7YSYmIWEuZGF0YShcImNrZS1lZGl0YWJsZVwiKTspe2lmKGEuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVybiBhO2E9YS5nZXRQYXJlbnQoKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsYShhKXt2YXIgYz1hLmRvYyxkPUcoJ1xceDNjc3BhbiBjb250ZW50ZWRpdGFibGVcXHgzZFwiZmFsc2VcIiBzdHlsZVxceDNkXCInK1ErXCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXItdG9wOjFweCBkYXNoZWQgXCIrYS5ib3hDb2xvcisnXCJcXHgzZVxceDNjL3NwYW5cXHgzZScsYyksYj1DS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1xyXG5cImltYWdlcy9cIisodC5oaWRwaT9cImhpZHBpL1wiOlwiXCIpK1wiaWNvblwiKyhhLnJ0bD9cIi1ydGxcIjpcIlwiKStcIi5wbmdcIik7dihkLHthdHRhY2g6ZnVuY3Rpb24oKXt0aGlzLndyYXAuZ2V0UGFyZW50KCl8fHRoaXMud3JhcC5hcHBlbmRUbyhhLmVkaXRhYmxlLCEwKTtyZXR1cm4gdGhpc30sbGluZUNoaWxkcmVuOlt2KEcoJ1xceDNjc3BhbiB0aXRsZVxceDNkXCInK2EuZWRpdG9yLmxhbmcubWFnaWNsaW5lLnRpdGxlKydcIiBjb250ZW50ZWRpdGFibGVcXHgzZFwiZmFsc2VcIlxceDNlXFx4MjYjODYyOTtcXHgzYy9zcGFuXFx4M2UnLGMpLHtiYXNlOlErXCJoZWlnaHQ6MTdweDt3aWR0aDoxN3B4O1wiKyhhLnJ0bD9cImxlZnRcIjpcInJpZ2h0XCIpK1wiOjE3cHg7YmFja2dyb3VuZDp1cmwoXCIrYitcIikgY2VudGVyIG5vLXJlcGVhdCBcIithLmJveENvbG9yK1wiO2N1cnNvcjpwb2ludGVyO1wiKyh0LmhjP1wiZm9udC1zaXplOiAxNXB4O2xpbmUtaGVpZ2h0OjE0cHg7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO3RleHQtYWxpZ246Y2VudGVyO1wiOlxyXG5cIlwiKSsodC5oaWRwaT9cImJhY2tncm91bmQtc2l6ZTogOXB4IDEwcHg7XCI6XCJcIiksbG9va3M6W1widG9wOi04cHg7IGJvcmRlci1yYWRpdXM6IDJweDtcIixcInRvcDotMTdweDsgYm9yZGVyLXJhZGl1czogMnB4IDJweCAwcHggMHB4O1wiLFwidG9wOi0xcHg7IGJvcmRlci1yYWRpdXM6IDBweCAwcHggMnB4IDJweDtcIl19KSx2KEcoVyxjKSx7YmFzZTpYK1wibGVmdDowcHg7Ym9yZGVyLWxlZnQtY29sb3I6XCIrYS5ib3hDb2xvcitcIjtcIixsb29rczpbXCJib3JkZXItd2lkdGg6OHB4IDAgOHB4IDhweDt0b3A6LThweFwiLFwiYm9yZGVyLXdpZHRoOjhweCAwIDAgOHB4O3RvcDotOHB4XCIsXCJib3JkZXItd2lkdGg6MCAwIDhweCA4cHg7dG9wOjBweFwiXX0pLHYoRyhXLGMpLHtiYXNlOlgrXCJyaWdodDowcHg7Ym9yZGVyLXJpZ2h0LWNvbG9yOlwiK2EuYm94Q29sb3IrXCI7XCIsbG9va3M6W1wiYm9yZGVyLXdpZHRoOjhweCA4cHggOHB4IDA7dG9wOi04cHhcIixcImJvcmRlci13aWR0aDo4cHggOHB4IDAgMDt0b3A6LThweFwiLFxyXG5cImJvcmRlci13aWR0aDowIDhweCA4cHggMDt0b3A6MHB4XCJdfSldLGRldGFjaDpmdW5jdGlvbigpe3RoaXMud3JhcC5nZXRQYXJlbnQoKSYmdGhpcy53cmFwLnJlbW92ZSgpO3JldHVybiB0aGlzfSxtb3VzZU5lYXI6ZnVuY3Rpb24oKXtyKGEsdGhpcyk7dmFyIGI9YS5ob2xkRGlzdGFuY2UsYz10aGlzLnNpemU7cmV0dXJuIGMmJnEoYS5tb3VzZS55LGMudG9wLWIsYy5ib3R0b20rYikmJnEoYS5tb3VzZS54LGMubGVmdC1iLGMucmlnaHQrYik/ITA6ITF9LHBsYWNlOmZ1bmN0aW9uKCl7dmFyIGI9YS52aWV3LGM9YS5lZGl0YWJsZSxkPWEudHJpZ2dlcixoPWQudXBwZXIsZz1kLmxvd2VyLGw9aHx8ZyxwPWwuZ2V0UGFyZW50KCksbT17fTt0aGlzLnRyaWdnZXI9ZDtoJiZyKGEsaCwhMCk7ZyYmcihhLGcsITApO3IoYSxwLCEwKTthLmluSW5saW5lTW9kZSYmSChhLCEwKTtwLmVxdWFscyhjKT8obS5sZWZ0PWIuc2Nyb2xsLngsbS5yaWdodD0tYi5zY3JvbGwueCxtLndpZHRoPVwiXCIpOihtLmxlZnQ9XHJcbmwuc2l6ZS5sZWZ0LWwuc2l6ZS5tYXJnaW4ubGVmdCtiLnNjcm9sbC54LShhLmluSW5saW5lTW9kZT9iLmVkaXRhYmxlLmxlZnQrYi5lZGl0YWJsZS5ib3JkZXIubGVmdDowKSxtLndpZHRoPWwuc2l6ZS5vdXRlcldpZHRoK2wuc2l6ZS5tYXJnaW4ubGVmdCtsLnNpemUubWFyZ2luLnJpZ2h0K2Iuc2Nyb2xsLngsbS5yaWdodD1cIlwiKTtoJiZnP20udG9wPWguc2l6ZS5tYXJnaW4uYm90dG9tPT09Zy5zaXplLm1hcmdpbi50b3A/MHxoLnNpemUuYm90dG9tK2guc2l6ZS5tYXJnaW4uYm90dG9tLzI6aC5zaXplLm1hcmdpbi5ib3R0b208Zy5zaXplLm1hcmdpbi50b3A/aC5zaXplLmJvdHRvbStoLnNpemUubWFyZ2luLmJvdHRvbTpoLnNpemUuYm90dG9tK2guc2l6ZS5tYXJnaW4uYm90dG9tLWcuc2l6ZS5tYXJnaW4udG9wOmg/Z3x8KG0udG9wPWguc2l6ZS5ib3R0b20raC5zaXplLm1hcmdpbi5ib3R0b20pOm0udG9wPWcuc2l6ZS50b3AtZy5zaXplLm1hcmdpbi50b3A7ZC5pcyhDKXx8cShtLnRvcCxcclxuYi5zY3JvbGwueS0xNSxiLnNjcm9sbC55KzUpPyhtLnRvcD1hLmluSW5saW5lTW9kZT8wOmIuc2Nyb2xsLnksdGhpcy5sb29rKEMpKTpkLmlzKEQpfHxxKG0udG9wLGIucGFuZS5ib3R0b20tNSxiLnBhbmUuYm90dG9tKzE1KT8obS50b3A9YS5pbklubGluZU1vZGU/Yi5lZGl0YWJsZS5oZWlnaHQrYi5lZGl0YWJsZS5wYWRkaW5nLnRvcCtiLmVkaXRhYmxlLnBhZGRpbmcuYm90dG9tOmIucGFuZS5ib3R0b20tMSx0aGlzLmxvb2soRCkpOihhLmluSW5saW5lTW9kZSYmKG0udG9wLT1iLmVkaXRhYmxlLnRvcCtiLmVkaXRhYmxlLmJvcmRlci50b3ApLHRoaXMubG9vayh4KSk7YS5pbklubGluZU1vZGUmJihtLnRvcC0tLG0udG9wKz1iLmVkaXRhYmxlLnNjcm9sbC50b3AsbS5sZWZ0Kz1iLmVkaXRhYmxlLnNjcm9sbC5sZWZ0KTtmb3IodmFyIG4gaW4gbSltW25dPUNLRURJVE9SLnRvb2xzLmNzc0xlbmd0aChtW25dKTt0aGlzLnNldFN0eWxlcyhtKX0sbG9vazpmdW5jdGlvbihhKXtpZih0aGlzLm9sZExvb2shPVxyXG5hKXtmb3IodmFyIGI9dGhpcy5saW5lQ2hpbGRyZW4ubGVuZ3RoLGM7Yi0tOykoYz10aGlzLmxpbmVDaGlsZHJlbltiXSkuc2V0QXR0cmlidXRlKFwic3R5bGVcIixjLmJhc2UrYy5sb29rc1swfGEvMl0pO3RoaXMub2xkTG9vaz1hfX0sd3JhcDpuZXcgUihcInNwYW5cIixhLmRvYyl9KTtmb3IoYz1kLmxpbmVDaGlsZHJlbi5sZW5ndGg7Yy0tOylkLmxpbmVDaGlsZHJlbltjXS5hcHBlbmRUbyhkKTtkLmxvb2soeCk7ZC5hcHBlbmRUbyhkLndyYXApO2QudW5zZWxlY3RhYmxlKCk7ZC5saW5lQ2hpbGRyZW5bMF0ub24oXCJtb3VzZXVwXCIsZnVuY3Rpb24oYil7ZC5kZXRhY2goKTtTKGEsZnVuY3Rpb24oYil7dmFyIGM9YS5saW5lLnRyaWdnZXI7YltjLmlzKEkpP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShjLmlzKEkpP2MubG93ZXI6Yy51cHBlcil9LCEwKTthLmVkaXRvci5mb2N1cygpO3QuaWV8fGEuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUnx8YS5ob3ROb2RlLnNjcm9sbEludG9WaWV3KCk7XHJcbmIuZGF0YS5wcmV2ZW50RGVmYXVsdCghMCl9KTtkLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLnByZXZlbnREZWZhdWx0KCEwKX0pO2EubGluZT1kfWZ1bmN0aW9uIFMoYSxjLGQpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYS5kb2MpLGU9YS5lZGl0b3IsZjt0LmllJiZhLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlI/Zj1hLmRvYy5jcmVhdGVUZXh0KEopOihmPShmPVAoYS5lbGVtZW50LCEwKSkmJmYuZGF0YShcImNrZS1lbnRlci1tb2RlXCIpfHxhLmVudGVyTW9kZSxmPW5ldyBSKEtbZl0sYS5kb2MpLGYuaXMoXCJiclwiKXx8YS5kb2MuY3JlYXRlVGV4dChKKS5hcHBlbmRUbyhmKSk7ZCYmZS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2MoZik7Yi5tb3ZlVG9Qb3NpdGlvbihmLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTtlLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbYl0pO2EuaG90Tm9kZT1mO2QmJmUuZmlyZShcInNhdmVTbmFwc2hvdFwiKX1cclxuZnVuY3Rpb24gWShhLGMpe3JldHVybntjYW5VbmRvOiEwLG1vZGVzOnt3eXNpd3lnOjF9LGV4ZWM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBkKGIpe3ZhciBkPXQuaWUmJjk+dC52ZXJzaW9uP1wiIFwiOkosZj1hLmhvdE5vZGUmJmEuaG90Tm9kZS5nZXRUZXh0KCk9PWQmJmEuZWxlbWVudC5lcXVhbHMoYS5ob3ROb2RlKSYmYS5sYXN0Q21kRGlyZWN0aW9uPT09ISFjO1MoYSxmdW5jdGlvbihkKXtmJiZhLmhvdE5vZGUmJmEuaG90Tm9kZS5yZW1vdmUoKTtkW2M/XCJpbnNlcnRBZnRlclwiOlwiaW5zZXJ0QmVmb3JlXCJdKGIpO2Quc2V0QXR0cmlidXRlcyh7XCJkYXRhLWNrZS1tYWdpY2xpbmUtaG90XCI6MSxcImRhdGEtY2tlLW1hZ2ljbGluZS1kaXJcIjohIWN9KTthLmxhc3RDbWREaXJlY3Rpb249ISFjfSk7dC5pZXx8YS5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSfHxhLmhvdE5vZGUuc2Nyb2xsSW50b1ZpZXcoKTthLmxpbmUuZGV0YWNoKCl9cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Yi5nZXRTZWxlY3Rpb24oKS5nZXRTdGFydEVsZW1lbnQoKTtcclxudmFyIGU7Yj1iLmdldEFzY2VuZGFudChaLDEpO2lmKCFhYShhLGIpJiZiJiYhYi5lcXVhbHMoYS5lZGl0YWJsZSkmJiFiLmNvbnRhaW5zKGEuZWRpdGFibGUpKXsoZT1QKGIpKSYmXCJmYWxzZVwiPT1lLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGI9ZSk7YS5lbGVtZW50PWI7ZT13KGEsYiwhYyk7dmFyIGY7bihlKSYmZS5pcyhhLnRyaWdnZXJzKSYmZS5pcyhtYSkmJighdyhhLGUsIWMpfHwoZj13KGEsZSwhYykpJiZuKGYpJiZmLmlzKGEudHJpZ2dlcnMpKT9kKGUpOihmPU8oYSxiKSxuKGYpJiYodyhhLGYsIWMpPyhiPXcoYSxmLCFjKSkmJm4oYikmJmIuaXMoYS50cmlnZ2VycykmJmQoZik6ZChmKSkpfX19KCl9fWZ1bmN0aW9uIEEoYSxjKXtpZighY3x8Yy50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFjLiQpcmV0dXJuITE7dmFyIGQ9YS5saW5lO3JldHVybiBkLndyYXAuZXF1YWxzKGMpfHxkLndyYXAuY29udGFpbnMoYyl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gYSYmXHJcbmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLiR9ZnVuY3Rpb24gdShhKXtpZighbihhKSlyZXR1cm4hMTt2YXIgYzsoYz1iYShhKSl8fChuKGEpPyhjPXtsZWZ0OjEscmlnaHQ6MSxjZW50ZXI6MX0sYz0hKCFjW2EuZ2V0Q29tcHV0ZWRTdHlsZShcImZsb2F0XCIpXSYmIWNbYS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKV0pKTpjPSExKTtyZXR1cm4gY31mdW5jdGlvbiBiYShhKXtyZXR1cm4hIXthYnNvbHV0ZToxLGZpeGVkOjF9W2EuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpXX1mdW5jdGlvbiBMKGEsYyl7cmV0dXJuIG4oYyk/Yy5pcyhhLnRyaWdnZXJzKTpudWxsfWZ1bmN0aW9uIGFhKGEsYyl7aWYoIWMpcmV0dXJuITE7Zm9yKHZhciBkPWMuZ2V0UGFyZW50cygxKSxiPWQubGVuZ3RoO2ItLTspZm9yKHZhciBlPWEudGFidUxpc3QubGVuZ3RoO2UtLTspaWYoZFtiXS5oYXNBdHRyaWJ1dGUoYS50YWJ1TGlzdFtlXSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gbmEoYSxcclxuYyxkKXtjPWNbZD9cImdldExhc3RcIjpcImdldEZpcnN0XCJdKGZ1bmN0aW9uKGIpe3JldHVybiBhLmlzUmVsZXZhbnQoYikmJiFiLmlzKG9hKX0pO2lmKCFjKXJldHVybiExO3IoYSxjKTtyZXR1cm4gZD9jLnNpemUudG9wPmEubW91c2UueTpjLnNpemUuYm90dG9tPGEubW91c2UueX1mdW5jdGlvbiBjYShhKXt2YXIgYz1hLmVkaXRhYmxlLGQ9YS5tb3VzZSxiPWEudmlldyxlPWEudHJpZ2dlck9mZnNldDtIKGEpO3ZhciBmPWQueT4oYS5pbklubGluZU1vZGU/Yi5lZGl0YWJsZS50b3ArYi5lZGl0YWJsZS5oZWlnaHQvMjpNYXRoLm1pbihiLmVkaXRhYmxlLmhlaWdodCxiLnBhbmUuaGVpZ2h0KS8yKSxjPWNbZj9cImdldExhc3RcIjpcImdldEZpcnN0XCJdKGZ1bmN0aW9uKGEpe3JldHVybiEoRShhKXx8RihhKSl9KTtpZighYylyZXR1cm4gbnVsbDtBKGEsYykmJihjPWEubGluZS53cmFwW2Y/XCJnZXRQcmV2aW91c1wiOlwiZ2V0TmV4dFwiXShmdW5jdGlvbihhKXtyZXR1cm4hKEUoYSl8fEYoYSkpfSkpO1xyXG5pZighbihjKXx8dShjKXx8IUwoYSxjKSlyZXR1cm4gbnVsbDtyKGEsYyk7cmV0dXJuIWYmJjA8PWMuc2l6ZS50b3AmJnEoZC55LDAsYy5zaXplLnRvcCtlKT8oYT1hLmluSW5saW5lTW9kZXx8MD09PWIuc2Nyb2xsLnk/Qzp4LG5ldyB6KFtudWxsLGMsSSxNLGFdKSk6ZiYmYy5zaXplLmJvdHRvbTw9Yi5wYW5lLmhlaWdodCYmcShkLnksYy5zaXplLmJvdHRvbS1lLGIucGFuZS5oZWlnaHQpPyhhPWEuaW5JbmxpbmVNb2RlfHxxKGMuc2l6ZS5ib3R0b20sYi5wYW5lLmhlaWdodC1lLGIucGFuZS5oZWlnaHQpP0Q6eCxuZXcgeihbYyxudWxsLGRhLE0sYV0pKTpudWxsfWZ1bmN0aW9uIGVhKGEpe3ZhciBjPWEubW91c2UsZD1hLnZpZXcsYj1hLnRyaWdnZXJPZmZzZXQsZT1PKGEpO2lmKCFlKXJldHVybiBudWxsO3IoYSxlKTt2YXIgYj1NYXRoLm1pbihiLDB8ZS5zaXplLm91dGVySGVpZ2h0LzIpLGY9W10sayxoO2lmKHEoYy55LGUuc2l6ZS50b3AtMSxlLnNpemUudG9wK2IpKWg9ITE7ZWxzZSBpZihxKGMueSxcclxuZS5zaXplLmJvdHRvbS1iLGUuc2l6ZS5ib3R0b20rMSkpaD0hMDtlbHNlIHJldHVybiBudWxsO2lmKHUoZSl8fG5hKGEsZSxoKXx8ZS5nZXRQYXJlbnQoKS5pcyhmYSkpcmV0dXJuIG51bGw7dmFyIGc9dyhhLGUsIWgpO2lmKGcpe2lmKGcmJmcudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKXJldHVybiBudWxsO2lmKG4oZykpe2lmKHUoZyl8fCFMKGEsZyl8fGcuZ2V0UGFyZW50KCkuaXMoZmEpKXJldHVybiBudWxsO2Y9W2csZV1baD9cInJldmVyc2VcIjpcImNvbmNhdFwiXSgpLmNvbmNhdChbVCxNXSl9fWVsc2UgZS5lcXVhbHMoYS5lZGl0YWJsZVtoP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0oYS5pc1JlbGV2YW50KSk/KEgoYSksaCYmcShjLnksZS5zaXplLmJvdHRvbS1iLGQucGFuZS5oZWlnaHQpJiZxKGUuc2l6ZS5ib3R0b20sZC5wYW5lLmhlaWdodC1iLGQucGFuZS5oZWlnaHQpP2s9RDpxKGMueSwwLGUuc2l6ZS50b3ArYikmJihrPUMpKTprPXgsZj1bbnVsbCxlXVtoP1wicmV2ZXJzZVwiOlxyXG5cImNvbmNhdFwiXSgpLmNvbmNhdChbaD9kYTpJLE0sayxlLmVxdWFscyhhLmVkaXRhYmxlW2g/XCJnZXRMYXN0XCI6XCJnZXRGaXJzdFwiXShhLmlzUmVsZXZhbnQpKT9oP0Q6Qzp4XSk7cmV0dXJuIDAgaW4gZj9uZXcgeihmKTpudWxsfWZ1bmN0aW9uIFUoYSxjLGQsYil7Zm9yKHZhciBlPWMuZ2V0RG9jdW1lbnRQb3NpdGlvbigpLGY9e30saz17fSxoPXt9LGc9e30sbD15Lmxlbmd0aDtsLS07KWZbeVtsXV09cGFyc2VJbnQoYy5nZXRDb21wdXRlZFN0eWxlLmNhbGwoYyxcImJvcmRlci1cIit5W2xdK1wiLXdpZHRoXCIpLDEwKXx8MCxoW3lbbF1dPXBhcnNlSW50KGMuZ2V0Q29tcHV0ZWRTdHlsZS5jYWxsKGMsXCJwYWRkaW5nLVwiK3lbbF0pLDEwKXx8MCxrW3lbbF1dPXBhcnNlSW50KGMuZ2V0Q29tcHV0ZWRTdHlsZS5jYWxsKGMsXCJtYXJnaW4tXCIreVtsXSksMTApfHwwO2QmJiFifHxOKGEsYik7Zy50b3A9ZS55LShkPzA6YS52aWV3LnNjcm9sbC55KTtnLmxlZnQ9ZS54LShkPzA6YS52aWV3LnNjcm9sbC54KTtcclxuZy5vdXRlcldpZHRoPWMuJC5vZmZzZXRXaWR0aDtnLm91dGVySGVpZ2h0PWMuJC5vZmZzZXRIZWlnaHQ7Zy5oZWlnaHQ9Zy5vdXRlckhlaWdodC0oaC50b3AraC5ib3R0b20rZi50b3ArZi5ib3R0b20pO2cud2lkdGg9Zy5vdXRlcldpZHRoLShoLmxlZnQraC5yaWdodCtmLmxlZnQrZi5yaWdodCk7Zy5ib3R0b209Zy50b3ArZy5vdXRlckhlaWdodDtnLnJpZ2h0PWcubGVmdCtnLm91dGVyV2lkdGg7YS5pbklubGluZU1vZGUmJihnLnNjcm9sbD17dG9wOmMuJC5zY3JvbGxUb3AsbGVmdDpjLiQuc2Nyb2xsTGVmdH0pO3JldHVybiB2KHtib3JkZXI6ZixwYWRkaW5nOmgsbWFyZ2luOmssaWdub3JlU2Nyb2xsOmR9LGcsITApfWZ1bmN0aW9uIHIoYSxjLGQpe2lmKCFuKGMpKXJldHVybiBjLnNpemU9bnVsbDtpZighYy5zaXplKWMuc2l6ZT17fTtlbHNlIGlmKGMuc2l6ZS5pZ25vcmVTY3JvbGw9PWQmJmMuc2l6ZS5kYXRlPm5ldyBEYXRlLWdhKXJldHVybiBudWxsO3JldHVybiB2KGMuc2l6ZSxcclxuVShhLGMsZCkse2RhdGU6K25ldyBEYXRlfSwhMCl9ZnVuY3Rpb24gSChhLGMpe2Eudmlldy5lZGl0YWJsZT1VKGEsYS5lZGl0YWJsZSxjLCEwKX1mdW5jdGlvbiBOKGEsYyl7YS52aWV3fHwoYS52aWV3PXt9KTt2YXIgZD1hLnZpZXc7aWYoISghYyYmZCYmZC5kYXRlPm5ldyBEYXRlLWdhKSl7dmFyIGI9YS53aW4sZD1iLmdldFNjcm9sbFBvc2l0aW9uKCksYj1iLmdldFZpZXdQYW5lU2l6ZSgpO3YoYS52aWV3LHtzY3JvbGw6e3g6ZC54LHk6ZC55LHdpZHRoOmEuZG9jLiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoLWIud2lkdGgsaGVpZ2h0OmEuZG9jLiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodC1iLmhlaWdodH0scGFuZTp7d2lkdGg6Yi53aWR0aCxoZWlnaHQ6Yi5oZWlnaHQsYm90dG9tOmIuaGVpZ2h0K2QueX0sZGF0ZTorbmV3IERhdGV9LCEwKX19ZnVuY3Rpb24gcGEoYSxjLGQsYil7Zm9yKHZhciBlPWIsZj1iLGs9MCxoPSExLGc9ITEsbD1hLnZpZXcucGFuZS5oZWlnaHQsXHJcbnA9YS5tb3VzZTtwLnkrazxsJiYwPHAueS1rOyl7aHx8KGg9YyhlLGIpKTtnfHwoZz1jKGYsYikpOyFoJiYwPHAueS1rJiYoZT1kKGEse3g6cC54LHk6cC55LWt9KSk7IWcmJnAueStrPGwmJihmPWQoYSx7eDpwLngseTpwLnkra30pKTtpZihoJiZnKWJyZWFrO2srPTJ9cmV0dXJuIG5ldyB6KFtlLGYsbnVsbCxudWxsXSl9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJtYWdpY2xpbmVcIix7aW5pdDpmdW5jdGlvbihhKXt2YXIgYz1hLmNvbmZpZyxkPWMubWFnaWNsaW5lX3RyaWdnZXJPZmZzZXR8fDMwLGI9e2VkaXRvcjphLGVudGVyTW9kZTpjLmVudGVyTW9kZSx0cmlnZ2VyT2Zmc2V0OmQsaG9sZERpc3RhbmNlOjB8ZCooYy5tYWdpY2xpbmVfaG9sZERpc3RhbmNlfHwuNSksYm94Q29sb3I6Yy5tYWdpY2xpbmVfY29sb3J8fFwiI2ZmMDAwMFwiLHJ0bDpcInJ0bFwiPT1jLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbix0YWJ1TGlzdDpbXCJkYXRhLWNrZS1oaWRkZW4tc2VsXCJdLmNvbmNhdChjLm1hZ2ljbGluZV90YWJ1TGlzdHx8XHJcbltdKSx0cmlnZ2VyczpjLm1hZ2ljbGluZV9ldmVyeXdoZXJlP1o6e3RhYmxlOjEsaHI6MSxkaXY6MSx1bDoxLG9sOjEsZGw6MSxmb3JtOjEsYmxvY2txdW90ZToxfX0sZSxmLGs7Yi5pc1JlbGV2YW50PWZ1bmN0aW9uKGEpe3JldHVybiBuKGEpJiYhQShiLGEpJiYhdShhKX07YS5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe3ZhciBkPWEuZWRpdGFibGUoKSxnPWEuZG9jdW1lbnQsbD1hLndpbmRvdzt2KGIse2VkaXRhYmxlOmQsaW5JbmxpbmVNb2RlOmQuaXNJbmxpbmUoKSxkb2M6Zyx3aW46bCxob3ROb2RlOm51bGx9LCEwKTtiLmJvdW5kYXJ5PWIuaW5JbmxpbmVNb2RlP2IuZWRpdGFibGU6Yi5kb2MuZ2V0RG9jdW1lbnRFbGVtZW50KCk7ZC5pcyhCLiRpbmxpbmUpfHwoYi5pbklubGluZU1vZGUmJiFiYShkKSYmZC5zZXRTdHlsZXMoe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6bnVsbCxsZWZ0Om51bGx9KSxsYS5jYWxsKHRoaXMsYiksTihiKSxkLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVVbmRvSW1hZ2VcIixcclxuZnVuY3Rpb24oKXtiLmxpbmUuZGV0YWNoKCl9KSxkLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVHZXREYXRhXCIsZnVuY3Rpb24oKXtiLmxpbmUud3JhcC5nZXRQYXJlbnQoKSYmKGIubGluZS5kZXRhY2goKSxhLm9uY2UoXCJnZXREYXRhXCIsZnVuY3Rpb24oKXtiLmxpbmUuYXR0YWNoKCl9LG51bGwsbnVsbCwxRTMpKX0sbnVsbCxudWxsLDApLGQuYXR0YWNoTGlzdGVuZXIoYi5pbklubGluZU1vZGU/ZzpnLmdldFdpbmRvdygpLmdldEZyYW1lKCksXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGMpe2lmKFwid3lzaXd5Z1wiPT1hLm1vZGUpaWYoYi5pbklubGluZU1vZGUpe3ZhciBkPWMuZGF0YS4kLmNsaWVudFg7Yz1jLmRhdGEuJC5jbGllbnRZO04oYik7SChiLCEwKTt2YXIgZT1iLnZpZXcuZWRpdGFibGUsZj1iLnZpZXcuc2Nyb2xsO2Q+ZS5sZWZ0LWYueCYmZDxlLnJpZ2h0LWYueCYmYz5lLnRvcC1mLnkmJmM8ZS5ib3R0b20tZi55fHwoY2xlYXJUaW1lb3V0KGspLGs9bnVsbCxiLmxpbmUuZGV0YWNoKCkpfWVsc2UgY2xlYXJUaW1lb3V0KGspLFxyXG5rPW51bGwsYi5saW5lLmRldGFjaCgpfSksZC5hdHRhY2hMaXN0ZW5lcihkLFwia2V5dXBcIixmdW5jdGlvbigpe2IuaGlkZGVuTW9kZT0wfSksZC5hdHRhY2hMaXN0ZW5lcihkLFwia2V5ZG93blwiLGZ1bmN0aW9uKGMpe2lmKFwid3lzaXd5Z1wiPT1hLm1vZGUpc3dpdGNoKGMuZGF0YS5nZXRLZXlzdHJva2UoKSl7Y2FzZSAyMjI4MjQwOmNhc2UgMTY6Yi5oaWRkZW5Nb2RlPTEsYi5saW5lLmRldGFjaCgpfX0pLGQuYXR0YWNoTGlzdGVuZXIoYi5pbklubGluZU1vZGU/ZDpnLFwibW91c2Vtb3ZlXCIsZnVuY3Rpb24oYyl7Zj0hMDtpZihcInd5c2l3eWdcIj09YS5tb2RlJiYhYS5yZWFkT25seSYmIWspe3ZhciBkPXt4OmMuZGF0YS4kLmNsaWVudFgseTpjLmRhdGEuJC5jbGllbnRZfTtrPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLm1vdXNlPWQ7az1iLnRyaWdnZXI9bnVsbDtOKGIpO2YmJiFiLmhpZGRlbk1vZGUmJmEuZm9jdXNNYW5hZ2VyLmhhc0ZvY3VzJiYhYi5saW5lLm1vdXNlTmVhcigpJiYoYi5lbGVtZW50PVxyXG5oYShiLCEwKSkmJigoYi50cmlnZ2VyPWNhKGIpfHxlYShiKXx8aWEoYikpJiYhYWEoYixiLnRyaWdnZXIudXBwZXJ8fGIudHJpZ2dlci5sb3dlcik/Yi5saW5lLmF0dGFjaCgpLnBsYWNlKCk6KGIudHJpZ2dlcj1udWxsLGIubGluZS5kZXRhY2goKSksZj0hMSl9LDMwKX19KSxkLmF0dGFjaExpc3RlbmVyKGwsXCJzY3JvbGxcIixmdW5jdGlvbigpe1wid3lzaXd5Z1wiPT1hLm1vZGUmJihiLmxpbmUuZGV0YWNoKCksdC53ZWJraXQmJihiLmhpZGRlbk1vZGU9MSxjbGVhclRpbWVvdXQoZSksZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5tb3VzZURvd258fChiLmhpZGRlbk1vZGU9MCl9LDUwKSkpfSksZC5hdHRhY2hMaXN0ZW5lcihqYT9nOmwsXCJtb3VzZWRvd25cIixmdW5jdGlvbigpe1wid3lzaXd5Z1wiPT1hLm1vZGUmJihiLmxpbmUuZGV0YWNoKCksYi5oaWRkZW5Nb2RlPTEsYi5tb3VzZURvd249MSl9KSxkLmF0dGFjaExpc3RlbmVyKGphP2c6bCxcIm1vdXNldXBcIixmdW5jdGlvbigpe2IuaGlkZGVuTW9kZT1cclxuMDtiLm1vdXNlRG93bj0wfSksYS5hZGRDb21tYW5kKFwiYWNjZXNzUHJldmlvdXNTcGFjZVwiLFkoYikpLGEuYWRkQ29tbWFuZChcImFjY2Vzc05leHRTcGFjZVwiLFkoYiwhMCkpLGEuc2V0S2V5c3Ryb2tlKFtbYy5tYWdpY2xpbmVfa2V5c3Ryb2tlUHJldmlvdXMsXCJhY2Nlc3NQcmV2aW91c1NwYWNlXCJdLFtjLm1hZ2ljbGluZV9rZXlzdHJva2VOZXh0LFwiYWNjZXNzTmV4dFNwYWNlXCJdXSksYS5vbihcImxvYWRTbmFwc2hvdFwiLGZ1bmN0aW9uKCl7dmFyIGMsZCxlLGY7Zm9yKGYgaW57cDoxLGJyOjEsZGl2OjF9KWZvcihjPWEuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhmKSxlPWMuY291bnQoKTtlLS07KWlmKChkPWMuZ2V0SXRlbShlKSkuZGF0YShcImNrZS1tYWdpY2xpbmUtaG90XCIpKXtiLmhvdE5vZGU9ZDtiLmxhc3RDbWREaXJlY3Rpb249XCJ0cnVlXCI9PT1kLmRhdGEoXCJja2UtbWFnaWNsaW5lLWRpclwiKT8hMDohMTtyZXR1cm59fSksdGhpcy5iYWNrZG9vcj17YWNjZXNzRm9jdXNTcGFjZTpTLFxyXG5ib3hUcmlnZ2VyOnosaXNMaW5lOkEsZ2V0QXNjZW5kYW50VHJpZ2dlcjpPLGdldE5vbkVtcHR5TmVpZ2hib3VyOncsZ2V0U2l6ZTpVLHRoYXQ6Yix0cmlnZ2VyRWRnZTplYSx0cmlnZ2VyRWRpdGFibGU6Y2EsdHJpZ2dlckV4cGFuZDppYX0pfSx0aGlzKX19KTt2YXIgdj1DS0VESVRPUi50b29scy5leHRlbmQsUj1DS0VESVRPUi5kb20uZWxlbWVudCxHPVIuY3JlYXRlRnJvbUh0bWwsdD1DS0VESVRPUi5lbnYsamE9Q0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uLEI9Q0tFRElUT1IuZHRkLEs9e30sST0xMjgsZGE9NjQsVD0zMixNPTE2LEM9NCxEPTIseD0xLEo9XCLCoFwiLGZhPUIuJGxpc3RJdGVtLG9hPUIuJHRhYmxlQ29udGVudCxtYT12KHt9LEIuJG5vbkVkaXRhYmxlLEIuJGVtcHR5KSxaPUIuJGJsb2NrLGdhPTEwMCxRPVwid2lkdGg6MHB4O2hlaWdodDowcHg7cGFkZGluZzowcHg7bWFyZ2luOjBweDtkaXNwbGF5OmJsb2NrO3otaW5kZXg6OTk5OTtjb2xvcjojZmZmO3Bvc2l0aW9uOmFic29sdXRlO2ZvbnQtc2l6ZTogMHB4O2xpbmUtaGVpZ2h0OjBweDtcIixcclxuWD1RK1wiYm9yZGVyLWNvbG9yOnRyYW5zcGFyZW50O2Rpc3BsYXk6YmxvY2s7Ym9yZGVyLXN0eWxlOnNvbGlkO1wiLFc9XCJcXHgzY3NwYW5cXHgzZVwiK0orXCJcXHgzYy9zcGFuXFx4M2VcIjtLW0NLRURJVE9SLkVOVEVSX0JSXT1cImJyXCI7S1tDS0VESVRPUi5FTlRFUl9QXT1cInBcIjtLW0NLRURJVE9SLkVOVEVSX0RJVl09XCJkaXZcIjt6LnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYyxkKXt0aGlzLnByb3BlcnRpZXM9YStjKyhkfHx4KTtyZXR1cm4gdGhpc30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMucHJvcGVydGllcyZhKT09YX19O3ZhciBoYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkKXt2YXIgYj1hLiQuZWxlbWVudEZyb21Qb2ludChkLngsZC55KTtyZXR1cm4gYiYmYi5ub2RlVHlwZT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYik6bnVsbH1yZXR1cm4gZnVuY3Rpb24oYyxkLGIpe2lmKCFjLm1vdXNlKXJldHVybiBudWxsO3ZhciBlPWMuZG9jLGY9Yy5saW5lLndyYXA7Yj1ifHxjLm1vdXNlO1xyXG52YXIgaz1hKGUsYik7ZCYmQShjLGspJiYoZi5oaWRlKCksaz1hKGUsYiksZi5zaG93KCkpO3JldHVybiFrfHxrLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWsuJHx8dC5pZSYmOT50LnZlcnNpb24mJiFjLmJvdW5kYXJ5LmVxdWFscyhrKSYmIWMuYm91bmRhcnkuY29udGFpbnMoayk/bnVsbDprfX0oKSxFPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxGPUNLRURJVE9SLmRvbS53YWxrZXIubm9kZVR5cGUoQ0tFRElUT1IuTk9ERV9DT01NRU5UKSxpYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9YS5lbGVtZW50LGUsZixrO2lmKCFuKGIpfHxiLmNvbnRhaW5zKGEuZWRpdGFibGUpfHxiLmlzUmVhZE9ubHkoKSlyZXR1cm4gbnVsbDtrPXBhKGEsZnVuY3Rpb24oYSxiKXtyZXR1cm4hYi5lcXVhbHMoYSl9LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGhhKGEsITAsYil9LGIpO2U9ay51cHBlcjtmPWsubG93ZXI7aWYoVihhLGUsZikpcmV0dXJuIGsuc2V0KFQsXHJcbjgpO2lmKGUmJmIuY29udGFpbnMoZSkpZm9yKDshZS5nZXRQYXJlbnQoKS5lcXVhbHMoYik7KWU9ZS5nZXRQYXJlbnQoKTtlbHNlIGU9Yi5nZXRGaXJzdChmdW5jdGlvbihiKXtyZXR1cm4gYyhhLGIpfSk7aWYoZiYmYi5jb250YWlucyhmKSlmb3IoOyFmLmdldFBhcmVudCgpLmVxdWFscyhiKTspZj1mLmdldFBhcmVudCgpO2Vsc2UgZj1iLmdldExhc3QoZnVuY3Rpb24oYil7cmV0dXJuIGMoYSxiKX0pO2lmKCFlfHwhZilyZXR1cm4gbnVsbDtyKGEsZSk7cihhLGYpO2lmKCFxKGEubW91c2UueSxlLnNpemUudG9wLGYuc2l6ZS5ib3R0b20pKXJldHVybiBudWxsO2Zvcih2YXIgYj1OdW1iZXIuTUFYX1ZBTFVFLGgsZyxsLHA7ZiYmIWYuZXF1YWxzKGUpJiYoZz1lLmdldE5leHQoYS5pc1JlbGV2YW50KSk7KWg9TWF0aC5hYnMoa2EoYSxlLGcpLWEubW91c2UueSksaDxiJiYoYj1oLGw9ZSxwPWcpLGU9ZyxyKGEsZSk7aWYoIWx8fCFwfHwhcShhLm1vdXNlLnksbC5zaXplLnRvcCxwLnNpemUuYm90dG9tKSlyZXR1cm4gbnVsbDtcclxuay51cHBlcj1sO2subG93ZXI9cDtyZXR1cm4gay5zZXQoVCw4KX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIShiJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8RihiKXx8dShiKXx8QShhLGIpfHxiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi4kJiZiLmlzKFwiYnJcIikpfXJldHVybiBmdW5jdGlvbihjKXt2YXIgYj1hKGMpLGU7aWYoZT1iKXtlPWIudXBwZXI7dmFyIGY9Yi5sb3dlcjtlPSFlfHwhZnx8dShmKXx8dShlKXx8Zi5lcXVhbHMoZSl8fGUuZXF1YWxzKGYpfHxmLmNvbnRhaW5zKGUpfHxlLmNvbnRhaW5zKGYpPyExOkwoYyxlKSYmTChjLGYpJiZWKGMsZSxmKT8hMDohMX1yZXR1cm4gZT9iOm51bGx9fSgpLHk9W1widG9wXCIsXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm90dG9tXCJdfSkoKTtDS0VESVRPUi5jb25maWcubWFnaWNsaW5lX2tleXN0cm9rZVByZXZpb3VzPUNLRURJVE9SLkNUUkwrQ0tFRElUT1IuU0hJRlQrNTE7XHJcbkNLRURJVE9SLmNvbmZpZy5tYWdpY2xpbmVfa2V5c3Ryb2tlTmV4dD1DS0VESVRPUi5DVFJMK0NLRURJVE9SLlNISUZUKzUyOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG4oYSl7aWYoIWF8fGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxcImZvcm1cIiE9YS5nZXROYW1lKCkpcmV0dXJuW107Zm9yKHZhciBlPVtdLGY9W1wic3R5bGVcIixcImNsYXNzTmFtZVwiXSxiPTA7YjxmLmxlbmd0aDtiKyspe3ZhciBjPWEuJC5lbGVtZW50cy5uYW1lZEl0ZW0oZltiXSk7YyYmKGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGMpLGUucHVzaChbYyxjLm5leHRTaWJsaW5nXSksYy5yZW1vdmUoKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdChhLGUpe2lmKGEmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImZvcm1cIj09YS5nZXROYW1lKCkmJjA8ZS5sZW5ndGgpZm9yKHZhciBmPWUubGVuZ3RoLTE7MDw9ZjtmLS0pe3ZhciBiPWVbZl1bMF0sYz1lW2ZdWzFdO2M/Yi5pbnNlcnRCZWZvcmUoYyk6Yi5hcHBlbmRUbyhhKX19ZnVuY3Rpb24gcihhLGUpe3ZhciBmPW4oYSksYj17fSxjPWEuJDtlfHwoYltcImNsYXNzXCJdPWMuY2xhc3NOYW1lfHxcclxuXCJcIixjLmNsYXNzTmFtZT1cIlwiKTtiLmlubGluZT1jLnN0eWxlLmNzc1RleHR8fFwiXCI7ZXx8KGMuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOiBzdGF0aWM7IG92ZXJmbG93OiB2aXNpYmxlXCIpO3QoZik7cmV0dXJuIGJ9ZnVuY3Rpb24gdShhLGUpe3ZhciBmPW4oYSksYj1hLiQ7XCJjbGFzc1wiaW4gZSYmKGIuY2xhc3NOYW1lPWVbXCJjbGFzc1wiXSk7XCJpbmxpbmVcImluIGUmJihiLnN0eWxlLmNzc1RleHQ9ZS5pbmxpbmUpO3QoZil9ZnVuY3Rpb24gdihhKXtpZighYS5lZGl0YWJsZSgpLmlzSW5saW5lKCkpe3ZhciBlPUNLRURJVE9SLmluc3RhbmNlcyxmO2ZvcihmIGluIGUpe3ZhciBiPWVbZl07XCJ3eXNpd3lnXCIhPWIubW9kZXx8Yi5yZWFkT25seXx8KGI9Yi5kb2N1bWVudC5nZXRCb2R5KCksYi5zZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIiwhMSksYi5zZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIiwhMCkpfWEuZWRpdGFibGUoKS5oYXNGb2N1cyYmKGEudG9vbGJveC5mb2N1cygpLFxyXG5hLmZvY3VzKCkpfX1DS0VESVRPUi5wbHVnaW5zLmFkZChcIm1heGltaXplXCIse2luaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZSgpe3ZhciBiPWMuZ2V0Vmlld1BhbmVTaXplKCk7YS5yZXNpemUoYi53aWR0aCxiLmhlaWdodCxudWxsLCEwKX1pZihhLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FKXt2YXIgZj1hLmxhbmcsYj1DS0VESVRPUi5kb2N1bWVudCxjPWIuZ2V0V2luZG93KCksbCxtLHAsbj1DS0VESVRPUi5UUklTVEFURV9PRkY7YS5hZGRDb21tYW5kKFwibWF4aW1pemVcIix7bW9kZXM6e3d5c2l3eWc6IUNLRURJVE9SLmVudi5pT1Msc291cmNlOiFDS0VESVRPUi5lbnYuaU9TfSxyZWFkT25seToxLGVkaXRvckZvY3VzOiExLGV4ZWM6ZnVuY3Rpb24oKXt2YXIgaD1hLmNvbnRhaW5lci5nZXRGaXJzdChmdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaGFzQ2xhc3MoXCJja2VfaW5uZXJcIil9KSxnPWEudWkuc3BhY2UoXCJjb250ZW50c1wiKTtcclxuaWYoXCJ3eXNpd3lnXCI9PWEubW9kZSl7dmFyIGQ9YS5nZXRTZWxlY3Rpb24oKTtsPWQmJmQuZ2V0UmFuZ2VzKCk7bT1jLmdldFNjcm9sbFBvc2l0aW9uKCl9ZWxzZXt2YXIgaz1hLmVkaXRhYmxlKCkuJDtsPSFDS0VESVRPUi5lbnYuaWUmJltrLnNlbGVjdGlvblN0YXJ0LGsuc2VsZWN0aW9uRW5kXTttPVtrLnNjcm9sbExlZnQsay5zY3JvbGxUb3BdfWlmKHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRil7Yy5vbihcInJlc2l6ZVwiLGUpO3A9Yy5nZXRTY3JvbGxQb3NpdGlvbigpO2ZvcihkPWEuY29udGFpbmVyO2Q9ZC5nZXRQYXJlbnQoKTspZC5zZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIscihkKSksZC5zZXRTdHlsZShcInotaW5kZXhcIixhLmNvbmZpZy5iYXNlRmxvYXRaSW5kZXgtNSk7Zy5zZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIscihnLCEwKSk7aC5zZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIscihoLCEwKSk7XHJcbmc9e292ZXJmbG93OkNLRURJVE9SLmVudi53ZWJraXQ/XCJcIjpcImhpZGRlblwiLHdpZHRoOjAsaGVpZ2h0OjB9O2IuZ2V0RG9jdW1lbnRFbGVtZW50KCkuc2V0U3R5bGVzKGcpOyFDS0VESVRPUi5lbnYuZ2Vja28mJmIuZ2V0RG9jdW1lbnRFbGVtZW50KCkuc2V0U3R5bGUoXCJwb3NpdGlvblwiLFwiZml4ZWRcIik7Q0tFRElUT1IuZW52LmdlY2tvJiZDS0VESVRPUi5lbnYucXVpcmtzfHxiLmdldEJvZHkoKS5zZXRTdHlsZXMoZyk7Q0tFRElUT1IuZW52LmllP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLiQuc2Nyb2xsVG8oMCwwKX0sMCk6Yy4kLnNjcm9sbFRvKDAsMCk7aC5zZXRTdHlsZShcInBvc2l0aW9uXCIsQ0tFRElUT1IuZW52LmdlY2tvJiZDS0VESVRPUi5lbnYucXVpcmtzP1wiZml4ZWRcIjpcImFic29sdXRlXCIpO2guJC5vZmZzZXRMZWZ0O2guc2V0U3R5bGVzKHtcInotaW5kZXhcIjphLmNvbmZpZy5iYXNlRmxvYXRaSW5kZXgtNSxsZWZ0OlwiMHB4XCIsdG9wOlwiMHB4XCJ9KTtoLmFkZENsYXNzKFwiY2tlX21heGltaXplZFwiKTtcclxuZSgpO2c9aC5nZXREb2N1bWVudFBvc2l0aW9uKCk7aC5zZXRTdHlsZXMoe2xlZnQ6LTEqZy54K1wicHhcIix0b3A6LTEqZy55K1wicHhcIn0pO0NLRURJVE9SLmVudi5nZWNrbyYmdihhKX1lbHNlIGlmKHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09OKXtjLnJlbW92ZUxpc3RlbmVyKFwicmVzaXplXCIsZSk7Zm9yKHZhciBkPVtnLGhdLHE9MDtxPGQubGVuZ3RoO3ErKyl1KGRbcV0sZFtxXS5nZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIpKSxkW3FdLnJlbW92ZUN1c3RvbURhdGEoXCJtYXhpbWl6ZV9zYXZlZF9zdHlsZXNcIik7Zm9yKGQ9YS5jb250YWluZXI7ZD1kLmdldFBhcmVudCgpOyl1KGQsZC5nZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIpKSxkLnJlbW92ZUN1c3RvbURhdGEoXCJtYXhpbWl6ZV9zYXZlZF9zdHlsZXNcIik7Q0tFRElUT1IuZW52LmllP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLiQuc2Nyb2xsVG8ocC54LHAueSl9LDApOmMuJC5zY3JvbGxUbyhwLngsXHJcbnAueSk7aC5yZW1vdmVDbGFzcyhcImNrZV9tYXhpbWl6ZWRcIik7Q0tFRElUT1IuZW52LndlYmtpdCYmKGguc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJpbmxpbmVcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2guc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKX0sMCkpO2EuZmlyZShcInJlc2l6ZVwiLHtvdXRlckhlaWdodDphLmNvbnRhaW5lci4kLm9mZnNldEhlaWdodCxjb250ZW50c0hlaWdodDpnLiQub2Zmc2V0SGVpZ2h0LG91dGVyV2lkdGg6YS5jb250YWluZXIuJC5vZmZzZXRXaWR0aH0pfXRoaXMudG9nZ2xlU3RhdGUoKTtpZihkPXRoaXMudWlJdGVtc1swXSlnPXRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRj9mLm1heGltaXplLm1heGltaXplOmYubWF4aW1pemUubWluaW1pemUsZD1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGQuXy5pZCksZC5nZXRDaGlsZCgxKS5zZXRIdG1sKGcpLGQuc2V0QXR0cmlidXRlKFwidGl0bGVcIixnKSxkLnNldEF0dHJpYnV0ZShcImhyZWZcIiwnamF2YXNjcmlwdDp2b2lkKFwiJytcclxuZysnXCIpOycpO1wid3lzaXd5Z1wiPT1hLm1vZGU/bD8oQ0tFRElUT1IuZW52LmdlY2tvJiZ2KGEpLGEuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKGwpLChrPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0U3RhcnRFbGVtZW50KCkpJiZrLnNjcm9sbEludG9WaWV3KCEwKSk6Yy4kLnNjcm9sbFRvKG0ueCxtLnkpOihsJiYoay5zZWxlY3Rpb25TdGFydD1sWzBdLGsuc2VsZWN0aW9uRW5kPWxbMV0pLGsuc2Nyb2xsTGVmdD1tWzBdLGsuc2Nyb2xsVG9wPW1bMV0pO2w9bT1udWxsO249dGhpcy5zdGF0ZTthLmZpcmUoXCJtYXhpbWl6ZVwiLHRoaXMuc3RhdGUpfSxjYW5VbmRvOiExfSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiTWF4aW1pemVcIix7bGFiZWw6Zi5tYXhpbWl6ZS5tYXhpbWl6ZSxjb21tYW5kOlwibWF4aW1pemVcIix0b29sYmFyOlwidG9vbHMsMTBcIn0pO2Eub24oXCJtb2RlXCIsZnVuY3Rpb24oKXt2YXIgYj1hLmdldENvbW1hbmQoXCJtYXhpbWl6ZVwiKTtiLnNldFN0YXRlKGIuc3RhdGU9PVxyXG5DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRD9DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRDpuKX0sbnVsbCxudWxsLDEwMCl9fX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcIm5ld3BhZ2VcIix7aW5pdDpmdW5jdGlvbihhKXthLmFkZENvbW1hbmQoXCJuZXdwYWdlXCIse21vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LGV4ZWM6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztiLnNldERhdGEoYi5jb25maWcubmV3cGFnZV9odG1sfHxcIlwiLGZ1bmN0aW9uKCl7Yi5mb2N1cygpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJuZXdwYWdlXCIsY29tbWFuZDphfSk7Yi5zZWxlY3Rpb25DaGFuZ2UoKX0sMjAwKX0pfSxhc3luYzohMH0pO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIk5ld1BhZ2VcIix7bGFiZWw6YS5sYW5nLm5ld3BhZ2UudG9vbGJhcixjb21tYW5kOlwibmV3cGFnZVwiLHRvb2xiYXI6XCJkb2N1bWVudCwyMFwifSl9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShhKXtyZXR1cm57XCJhcmlhLWxhYmVsXCI6YSxcImNsYXNzXCI6XCJja2VfcGFnZWJyZWFrXCIsY29udGVudGVkaXRhYmxlOlwiZmFsc2VcIixcImRhdGEtY2tlLWRpc3BsYXktbmFtZVwiOlwicGFnZWJyZWFrXCIsXCJkYXRhLWNrZS1wYWdlYnJlYWtcIjoxLHN0eWxlOlwicGFnZS1icmVhay1hZnRlcjogYWx3YXlzXCIsdGl0bGU6YX19Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJwYWdlYnJlYWtcIix7cmVxdWlyZXM6XCJmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe3ZhciBhPShcImJhY2tncm91bmQ6dXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXMvcGFnZWJyZWFrLmdpZlwiKStcIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXI7Y2xlYXI6Ym90aDt3aWR0aDoxMDAlO2JvcmRlci10b3A6Izk5OSAxcHggZG90dGVkO2JvcmRlci1ib3R0b206Izk5OSAxcHggZG90dGVkO3BhZGRpbmc6MDtoZWlnaHQ6N3B4O2N1cnNvcjpkZWZhdWx0O1wiKS5yZXBsYWNlKC87L2csXHJcblwiICFpbXBvcnRhbnQ7XCIpO0NLRURJVE9SLmFkZENzcyhcImRpdi5ja2VfcGFnZWJyZWFre1wiK2ErXCJ9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe2EuYmxvY2tsZXNzfHwoYS5hZGRDb21tYW5kKFwicGFnZWJyZWFrXCIsQ0tFRElUT1IucGx1Z2lucy5wYWdlYnJlYWtDbWQpLGEudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlBhZ2VCcmVha1wiLHtsYWJlbDphLmxhbmcucGFnZWJyZWFrLnRvb2xiYXIsY29tbWFuZDpcInBhZ2VicmVha1wiLHRvb2xiYXI6XCJpbnNlcnQsNzBcIn0pLENLRURJVE9SLmVudi53ZWJraXQmJmEub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXthLmRvY3VtZW50Lm9uKFwiY2xpY2tcIixmdW5jdGlvbihiKXtiPWIuZGF0YS5nZXRUYXJnZXQoKTtiLmlzKFwiZGl2XCIpJiZiLmhhc0NsYXNzKFwiY2tlX3BhZ2VicmVha1wiKSYmYS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RFbGVtZW50KGIpfSl9KSl9LGFmdGVySW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGYpe0NLRURJVE9SLnRvb2xzLmV4dGVuZChmLmF0dHJpYnV0ZXMsXHJcbmUoYS5sYW5nLnBhZ2VicmVhay5hbHQpLCEwKTtmLmNoaWxkcmVuLmxlbmd0aD0wfXZhciBjPWEuZGF0YVByb2Nlc3NvcixnPWMmJmMuZGF0YUZpbHRlcixjPWMmJmMuaHRtbEZpbHRlcixoPS9wYWdlLWJyZWFrLWFmdGVyXFxzKjpcXHMqYWx3YXlzL2ksaz0vZGlzcGxheVxccyo6XFxzKm5vbmUvaTtjJiZjLmFkZFJ1bGVzKHthdHRyaWJ1dGVzOntcImNsYXNzXCI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJlcGxhY2UoXCJja2VfcGFnZWJyZWFrXCIsXCJcIik7aWYoYyE9YSl7dmFyIGQ9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbCgnXFx4M2NzcGFuIHN0eWxlXFx4M2RcImRpc3BsYXk6IG5vbmU7XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2UnKS5jaGlsZHJlblswXTtiLmNoaWxkcmVuLmxlbmd0aD0wO2IuYWRkKGQpO2Q9Yi5hdHRyaWJ1dGVzO2RlbGV0ZSBkW1wiYXJpYS1sYWJlbFwiXTtkZWxldGUgZC5jb250ZW50ZWRpdGFibGU7ZGVsZXRlIGQudGl0bGV9cmV0dXJuIGN9fX0se2FwcGx5VG9BbGw6ITAsXHJcbnByaW9yaXR5OjV9KTtnJiZnLmFkZFJ1bGVzKHtlbGVtZW50czp7ZGl2OmZ1bmN0aW9uKGEpe2lmKGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXBhZ2VicmVha1wiXSliKGEpO2Vsc2UgaWYoaC50ZXN0KGEuYXR0cmlidXRlcy5zdHlsZSkpe3ZhciBjPWEuY2hpbGRyZW5bMF07YyYmXCJzcGFuXCI9PWMubmFtZSYmay50ZXN0KGMuYXR0cmlidXRlcy5zdHlsZSkmJmIoYSl9fX19KX19KTtDS0VESVRPUi5wbHVnaW5zLnBhZ2VicmVha0NtZD17ZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7YXR0cmlidXRlczplKGEubGFuZy5wYWdlYnJlYWsuYWx0KX0pO2EuaW5zZXJ0RWxlbWVudChiKX0sY29udGV4dDpcImRpdlwiLGFsbG93ZWRDb250ZW50OntkaXY6e3N0eWxlczpcIiFwYWdlLWJyZWFrLWFmdGVyXCJ9LHNwYW46e21hdGNoOmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50KSYmXCJkaXZcIj09YS5uYW1lJiZhLnN0eWxlcyYmYS5zdHlsZXNbXCJwYWdlLWJyZWFrLWFmdGVyXCJdfSxcclxuc3R5bGVzOlwiZGlzcGxheVwifX0scmVxdWlyZWRDb250ZW50OlwiZGl2e3BhZ2UtYnJlYWstYWZ0ZXJ9XCJ9fSkoKTsoZnVuY3Rpb24oKXt2YXIgYz17Y2FuVW5kbzohMSxhc3luYzohMCxleGVjOmZ1bmN0aW9uKGEpe2EuZ2V0Q2xpcGJvYXJkRGF0YSh7dGl0bGU6YS5sYW5nLnBhc3RldGV4dC50aXRsZX0sZnVuY3Rpb24oYil7YiYmYS5maXJlKFwicGFzdGVcIix7dHlwZTpcInRleHRcIixkYXRhVmFsdWU6Yi5kYXRhVmFsdWUsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaW5pdFBhc3RlRGF0YVRyYW5zZmVyKCl9KTthLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJwYXN0ZXRleHRcIixjb21tYW5kOmMscmV0dXJuVmFsdWU6ISFifSl9KX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicGFzdGV0ZXh0XCIse3JlcXVpcmVzOlwiY2xpcGJvYXJkXCIsaW5pdDpmdW5jdGlvbihhKXthLmFkZENvbW1hbmQoXCJwYXN0ZXRleHRcIixjKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJQYXN0ZVRleHRcIix7bGFiZWw6YS5sYW5nLnBhc3RldGV4dC5idXR0b24sXHJcbmNvbW1hbmQ6XCJwYXN0ZXRleHRcIix0b29sYmFyOlwiY2xpcGJvYXJkLDQwXCJ9KTtpZihhLmNvbmZpZy5mb3JjZVBhc3RlQXNQbGFpblRleHQpYS5vbihcImJlZm9yZVBhc3RlXCIsZnVuY3Rpb24oYSl7XCJodG1sXCIhPWEuZGF0YS50eXBlJiYoYS5kYXRhLnR5cGU9XCJ0ZXh0XCIpfSk7YS5vbihcInBhc3RlU3RhdGVcIixmdW5jdGlvbihiKXthLmdldENvbW1hbmQoXCJwYXN0ZXRleHRcIikuc2V0U3RhdGUoYi5kYXRhKX0pfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBoKGEsZCxmKXt2YXIgYj1DS0VESVRPUi5jbGVhbldvcmQ7Yj9mKCk6KGE9Q0tFRElUT1IuZ2V0VXJsKGEuY29uZmlnLnBhc3RlRnJvbVdvcmRDbGVhbnVwRmlsZXx8ZCtcImZpbHRlci9kZWZhdWx0LmpzXCIpLENLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKGEsZixudWxsLCEwKSk7cmV0dXJuIWJ9ZnVuY3Rpb24gayhhKXthLmRhdGEudHlwZT1cImh0bWxcIn1DS0VESVRPUi5wbHVnaW5zLmFkZChcInBhc3RlZnJvbXdvcmRcIix7cmVxdWlyZXM6XCJjbGlwYm9hcmRcIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBkPTAsZj10aGlzLnBhdGg7YS5hZGRDb21tYW5kKFwicGFzdGVmcm9td29yZFwiLHtjYW5VbmRvOiExLGFzeW5jOiEwLGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpcztkPTE7YS5vbmNlKFwiYmVmb3JlUGFzdGVcIixrKTthLmdldENsaXBib2FyZERhdGEoe3RpdGxlOmEubGFuZy5wYXN0ZWZyb213b3JkLnRpdGxlfSxmdW5jdGlvbihjKXtjJiZhLmZpcmUoXCJwYXN0ZVwiLFxyXG57dHlwZTpcImh0bWxcIixkYXRhVmFsdWU6Yy5kYXRhVmFsdWUsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaW5pdFBhc3RlRGF0YVRyYW5zZmVyKCl9KTthLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJwYXN0ZWZyb213b3JkXCIsY29tbWFuZDplLHJldHVyblZhbHVlOiEhY30pfSl9fSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiUGFzdGVGcm9tV29yZFwiLHtsYWJlbDphLmxhbmcucGFzdGVmcm9td29yZC50b29sYmFyLGNvbW1hbmQ6XCJwYXN0ZWZyb213b3JkXCIsdG9vbGJhcjpcImNsaXBib2FyZCw1MFwifSk7YS5vbihcInBhc3RlU3RhdGVcIixmdW5jdGlvbihiKXthLmdldENvbW1hbmQoXCJwYXN0ZWZyb213b3JkXCIpLnNldFN0YXRlKGIuZGF0YSl9KTthLm9uKFwicGFzdGVcIixmdW5jdGlvbihiKXt2YXIgZT1iLmRhdGEsYz1lLmRhdGFWYWx1ZTtpZihjJiYoZHx8LyhjbGFzcz1cXFwiP01zb3xzdHlsZT1cXFwiW15cXFwiXSpcXGJtc29cXC18dzpXb3JkRG9jdW1lbnQpLy50ZXN0KGMpKSl7ZS5kb250RmlsdGVyPVxyXG4hMDt2YXIgZz1oKGEsZixmdW5jdGlvbigpe2lmKGcpYS5maXJlKFwicGFzdGVcIixlKTtlbHNlIGlmKCFhLmNvbmZpZy5wYXN0ZUZyb21Xb3JkUHJvbXB0Q2xlYW51cHx8ZHx8Y29uZmlybShhLmxhbmcucGFzdGVmcm9td29yZC5jb25maXJtQ2xlYW51cCkpZS5kYXRhVmFsdWU9Q0tFRElUT1IuY2xlYW5Xb3JkKGMsYSk7ZD0wfSk7ZyYmYi5jYW5jZWwoKX19LG51bGwsbnVsbCwzKX19KX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGgsaz17bW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0sY2FuVW5kbzohMSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGcsYj1hLmNvbmZpZyxmPWIuYmFzZUhyZWY/J1xceDNjYmFzZSBocmVmXFx4M2RcIicrYi5iYXNlSHJlZisnXCIvXFx4M2UnOlwiXCI7aWYoYi5mdWxsUGFnZSlnPWEuZ2V0RGF0YSgpLnJlcGxhY2UoLzxoZWFkPi8sXCIkXFx4MjZcIitmKS5yZXBsYWNlKC9bXj5dKig/PTxcXC90aXRsZT4pLyxcIiRcXHgyNiBcXHgyNm1kYXNoOyBcIithLmxhbmcucHJldmlldy5wcmV2aWV3KTtlbHNle3ZhciBiPVwiXFx4M2Nib2R5IFwiLGQ9YS5kb2N1bWVudCYmYS5kb2N1bWVudC5nZXRCb2R5KCk7ZCYmKGQuZ2V0QXR0cmlidXRlKFwiaWRcIikmJihiKz0naWRcXHgzZFwiJytkLmdldEF0dHJpYnV0ZShcImlkXCIpKydcIiAnKSxkLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpJiYoYis9J2NsYXNzXFx4M2RcIicrZC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSsnXCIgJykpO2IrPVwiXFx4M2VcIjtnPWEuY29uZmlnLmRvY1R5cGUrXHJcbidcXHgzY2h0bWwgZGlyXFx4M2RcIicrYS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uKydcIlxceDNlXFx4M2NoZWFkXFx4M2UnK2YrXCJcXHgzY3RpdGxlXFx4M2VcIithLmxhbmcucHJldmlldy5wcmV2aWV3K1wiXFx4M2MvdGl0bGVcXHgzZVwiK0NLRURJVE9SLnRvb2xzLmJ1aWxkU3R5bGVIdG1sKGEuY29uZmlnLmNvbnRlbnRzQ3NzKStcIlxceDNjL2hlYWRcXHgzZVwiK2IrYS5nZXREYXRhKCkrXCJcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2VcIn1mPTY0MDtiPTQyMDtkPTgwO3RyeXt2YXIgYz13aW5kb3cuc2NyZWVuLGY9TWF0aC5yb3VuZCguOCpjLndpZHRoKSxiPU1hdGgucm91bmQoLjcqYy5oZWlnaHQpLGQ9TWF0aC5yb3VuZCguMSpjLndpZHRoKX1jYXRjaChrKXt9aWYoITE9PT1hLmZpcmUoXCJjb250ZW50UHJldmlld1wiLGE9e2RhdGFWYWx1ZTpnfSkpcmV0dXJuITE7dmFyIGM9XCJcIixlO0NLRURJVE9SLmVudi5pZSYmKHdpbmRvdy5fY2tlX2h0bWxUb0xvYWQ9YS5kYXRhVmFsdWUsZT1cImphdmFzY3JpcHQ6dm9pZCggKGZ1bmN0aW9uKCl7ZG9jdW1lbnQub3BlbigpO1wiK1xyXG4oXCIoXCIrQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO1wiKS5yZXBsYWNlKC9cXC9cXC8uKj9cXG4vZyxcIlwiKS5yZXBsYWNlKC9wYXJlbnRcXC4vZyxcIndpbmRvdy5vcGVuZXIuXCIpK1wiZG9jdW1lbnQud3JpdGUoIHdpbmRvdy5vcGVuZXIuX2NrZV9odG1sVG9Mb2FkICk7ZG9jdW1lbnQuY2xvc2UoKTt3aW5kb3cub3BlbmVyLl9ja2VfaHRtbFRvTG9hZCBcXHgzZCBudWxsO30pKCkgKVwiLGM9XCJcIik7Q0tFRElUT1IuZW52LmdlY2tvJiYod2luZG93Ll9ja2VfaHRtbFRvTG9hZD1hLmRhdGFWYWx1ZSxjPUNLRURJVE9SLmdldFVybChoK1wicHJldmlldy5odG1sXCIpKTtjPXdpbmRvdy5vcGVuKGMsbnVsbCxcInRvb2xiYXJcXHgzZHllcyxsb2NhdGlvblxceDNkbm8sc3RhdHVzXFx4M2R5ZXMsbWVudWJhclxceDNkeWVzLHNjcm9sbGJhcnNcXHgzZHllcyxyZXNpemFibGVcXHgzZHllcyx3aWR0aFxceDNkXCIrZitcIixoZWlnaHRcXHgzZFwiK2IrXCIsbGVmdFxceDNkXCIrZCk7Q0tFRElUT1IuZW52LmllJiZjJiYoYy5sb2NhdGlvbj1cclxuZSk7Q0tFRElUT1IuZW52LmllfHxDS0VESVRPUi5lbnYuZ2Vja298fChlPWMuZG9jdW1lbnQsZS5vcGVuKCksZS53cml0ZShhLmRhdGFWYWx1ZSksZS5jbG9zZSgpKTtyZXR1cm4hMH19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicHJldmlld1wiLHtpbml0OmZ1bmN0aW9uKGEpe2EuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUmJihoPXRoaXMucGF0aCxhLmFkZENvbW1hbmQoXCJwcmV2aWV3XCIsayksYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiUHJldmlld1wiLHtsYWJlbDphLmxhbmcucHJldmlldy5wcmV2aWV3LGNvbW1hbmQ6XCJwcmV2aWV3XCIsdG9vbGJhcjpcImRvY3VtZW50LDQwXCJ9KSl9fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicHJpbnRcIix7aW5pdDpmdW5jdGlvbihhKXthLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiYoYS5hZGRDb21tYW5kKFwicHJpbnRcIixDS0VESVRPUi5wbHVnaW5zLnByaW50KSxhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJQcmludFwiLHtsYWJlbDphLmxhbmcucHJpbnQudG9vbGJhcixjb21tYW5kOlwicHJpbnRcIix0b29sYmFyOlwiZG9jdW1lbnQsNTBcIn0pKX19KTtDS0VESVRPUi5wbHVnaW5zLnByaW50PXtleGVjOmZ1bmN0aW9uKGEpe0NLRURJVE9SLmVudi5nZWNrbz9hLndpbmRvdy4kLnByaW50KCk6YS5kb2N1bWVudC4kLmV4ZWNDb21tYW5kKFwiUHJpbnRcIil9LGNhblVuZG86ITEscmVhZE9ubHk6MSxtb2Rlczp7d3lzaXd5ZzoxfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJyZW1vdmVmb3JtYXRcIix7aW5pdDpmdW5jdGlvbihhKXthLmFkZENvbW1hbmQoXCJyZW1vdmVGb3JtYXRcIixDS0VESVRPUi5wbHVnaW5zLnJlbW92ZWZvcm1hdC5jb21tYW5kcy5yZW1vdmVmb3JtYXQpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlJlbW92ZUZvcm1hdFwiLHtsYWJlbDphLmxhbmcucmVtb3ZlZm9ybWF0LnRvb2xiYXIsY29tbWFuZDpcInJlbW92ZUZvcm1hdFwiLHRvb2xiYXI6XCJjbGVhbnVwLDEwXCJ9KX19KTtcclxuQ0tFRElUT1IucGx1Z2lucy5yZW1vdmVmb3JtYXQ9e2NvbW1hbmRzOntyZW1vdmVmb3JtYXQ6e2V4ZWM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBoPWEuXy5yZW1vdmVGb3JtYXRSZWdleHx8KGEuXy5yZW1vdmVGb3JtYXRSZWdleD1uZXcgUmVnRXhwKFwiXig/OlwiK2EuY29uZmlnLnJlbW92ZUZvcm1hdFRhZ3MucmVwbGFjZSgvLC9nLFwifFwiKStcIikkXCIsXCJpXCIpKSxlPWEuXy5yZW1vdmVBdHRyaWJ1dGVzfHwoYS5fLnJlbW92ZUF0dHJpYnV0ZXM9YS5jb25maWcucmVtb3ZlRm9ybWF0QXR0cmlidXRlcy5zcGxpdChcIixcIikpLGY9Q0tFRElUT1IucGx1Z2lucy5yZW1vdmVmb3JtYXQuZmlsdGVyLG09YS5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKSxuPW0uY3JlYXRlSXRlcmF0b3IoKSxwPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVH0sYztjPW4uZ2V0TmV4dFJhbmdlKCk7KXtjLmNvbGxhcHNlZHx8Yy5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfRUxFTUVOVCk7XHJcbnZhciBsPWMuY3JlYXRlQm9va21hcmsoKSxiPWwuc3RhcnROb2RlLGQ9bC5lbmROb2RlLGs9ZnVuY3Rpb24oYil7Zm9yKHZhciBjPWEuZWxlbWVudFBhdGgoYiksZT1jLmVsZW1lbnRzLGQ9MSxnOyhnPWVbZF0pJiYhZy5lcXVhbHMoYy5ibG9jaykmJiFnLmVxdWFscyhjLmJsb2NrTGltaXQpO2QrKyloLnRlc3QoZy5nZXROYW1lKCkpJiZmKGEsZykmJmIuYnJlYWtQYXJlbnQoZyl9O2soYik7aWYoZClmb3IoayhkKSxiPWIuZ2V0TmV4dFNvdXJjZU5vZGUoITAsQ0tFRElUT1IuTk9ERV9FTEVNRU5UKTtiJiYhYi5lcXVhbHMoZCk7KWlmKGIuaXNSZWFkT25seSgpKXtpZihiLmdldFBvc2l0aW9uKGQpJkNLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TKWJyZWFrO2I9Yi5nZXROZXh0KHApfWVsc2Ugaz1iLmdldE5leHRTb3VyY2VOb2RlKCExLENLRURJVE9SLk5PREVfRUxFTUVOVCksXCJpbWdcIj09Yi5nZXROYW1lKCkmJmIuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKXx8IWYoYSxiKXx8KGgudGVzdChiLmdldE5hbWUoKSk/XHJcbmIucmVtb3ZlKDEpOihiLnJlbW92ZUF0dHJpYnV0ZXMoZSksYS5maXJlKFwicmVtb3ZlRm9ybWF0Q2xlYW51cFwiLGIpKSksYj1rO2MubW92ZVRvQm9va21hcmsobCl9YS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2EuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKG0pfX19LGZpbHRlcjpmdW5jdGlvbihhLGgpe2Zvcih2YXIgZT1hLl8ucmVtb3ZlRm9ybWF0RmlsdGVyc3x8W10sZj0wO2Y8ZS5sZW5ndGg7ZisrKWlmKCExPT09ZVtmXShoKSlyZXR1cm4hMTtyZXR1cm4hMH19O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuYWRkUmVtb3ZlRm9ybWF0RmlsdGVyPWZ1bmN0aW9uKGEpe3RoaXMuXy5yZW1vdmVGb3JtYXRGaWx0ZXJzfHwodGhpcy5fLnJlbW92ZUZvcm1hdEZpbHRlcnM9W10pO3RoaXMuXy5yZW1vdmVGb3JtYXRGaWx0ZXJzLnB1c2goYSl9O0NLRURJVE9SLmNvbmZpZy5yZW1vdmVGb3JtYXRUYWdzPVwiYixiaWcsY2l0ZSxjb2RlLGRlbCxkZm4sZW0sZm9udCxpLGlucyxrYmQscSxzLHNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdHQsdSx2YXJcIjtcclxuQ0tFRElUT1IuY29uZmlnLnJlbW92ZUZvcm1hdEF0dHJpYnV0ZXM9XCJjbGFzcyxzdHlsZSxsYW5nLHdpZHRoLGhlaWdodCxhbGlnbixoc3BhY2UsdmFsaWduXCI7KGZ1bmN0aW9uKCl7dmFyIGI9e3JlYWRPbmx5OjEsZXhlYzpmdW5jdGlvbihhKXtpZihhLmZpcmUoXCJzYXZlXCIpJiYoYT1hLmVsZW1lbnQuJC5mb3JtKSl0cnl7YS5zdWJtaXQoKX1jYXRjaChiKXthLnN1Ym1pdC5jbGljayYmYS5zdWJtaXQuY2xpY2soKX19fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInNhdmVcIix7aW5pdDpmdW5jdGlvbihhKXthLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRSYmKGEuYWRkQ29tbWFuZChcInNhdmVcIixiKS5tb2Rlcz17d3lzaXd5ZzohIWEuZWxlbWVudC4kLmZvcm19LGEudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNhdmVcIix7bGFiZWw6YS5sYW5nLnNhdmUudG9vbGJhcixjb21tYW5kOlwic2F2ZVwiLHRvb2xiYXI6XCJkb2N1bWVudCwxMFwifSkpfX0pfSkoKTsoZnVuY3Rpb24oKXtDS0VESVRPUi5wbHVnaW5zLmFkZChcInNlbGVjdGFsbFwiLHtpbml0OmZ1bmN0aW9uKGIpe2IuYWRkQ29tbWFuZChcInNlbGVjdEFsbFwiLHttb2Rlczp7d3lzaXd5ZzoxLHNvdXJjZToxfSxleGVjOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWRpdGFibGUoKTtpZihiLmlzKFwidGV4dGFyZWFcIikpYT1iLiQsQ0tFRElUT1IuZW52LmllP2EuY3JlYXRlVGV4dFJhbmdlKCkuZXhlY0NvbW1hbmQoXCJTZWxlY3RBbGxcIik6KGEuc2VsZWN0aW9uU3RhcnQ9MCxhLnNlbGVjdGlvbkVuZD1hLnZhbHVlLmxlbmd0aCksYS5mb2N1cygpO2Vsc2V7aWYoYi5pcyhcImJvZHlcIikpYS5kb2N1bWVudC4kLmV4ZWNDb21tYW5kKFwiU2VsZWN0QWxsXCIsITEsbnVsbCk7ZWxzZXt2YXIgYz1hLmNyZWF0ZVJhbmdlKCk7Yy5zZWxlY3ROb2RlQ29udGVudHMoYik7Yy5zZWxlY3QoKX1hLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7YS5zZWxlY3Rpb25DaGFuZ2UoKX19LGNhblVuZG86ITF9KTtiLnVpLmFkZEJ1dHRvbiYmXHJcbmIudWkuYWRkQnV0dG9uKFwiU2VsZWN0QWxsXCIse2xhYmVsOmIubGFuZy5zZWxlY3RhbGwudG9vbGJhcixjb21tYW5kOlwic2VsZWN0QWxsXCIsdG9vbGJhcjpcInNlbGVjdGlvbiwxMFwifSl9fSl9KSgpOyhmdW5jdGlvbigpe3ZhciBrPXtyZWFkT25seToxLHByZXNlcnZlU3RhdGU6ITAsZWRpdG9yRm9jdXM6ITEsZXhlYzpmdW5jdGlvbihhKXt0aGlzLnRvZ2dsZVN0YXRlKCk7dGhpcy5yZWZyZXNoKGEpfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe2lmKGEuZG9jdW1lbnQpe3ZhciBjPXRoaXMuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX09OfHxhLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiYhYS5mb2N1c01hbmFnZXIuaGFzRm9jdXM/XCJyZW1vdmVDbGFzc1wiOlwiYXR0YWNoQ2xhc3NcIjthLmVkaXRhYmxlKClbY10oXCJja2Vfc2hvd19ibG9ja3NcIil9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzaG93YmxvY2tzXCIse29uTG9hZDpmdW5jdGlvbigpe3ZhciBhPVwicCBkaXYgcHJlIGFkZHJlc3MgYmxvY2txdW90ZSBoMSBoMiBoMyBoNCBoNSBoNlwiLnNwbGl0KFwiIFwiKSxjLGIsZSxmLGs9Q0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCksbD0hKENLRURJVE9SLmVudi5pZSYmXHJcbjk+Q0tFRElUT1IuZW52LnZlcnNpb24pLGc9bD9cIjpub3QoW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2VdKTpub3QoLmNrZV9zaG93X2Jsb2Nrc19vZmYpXCI6XCJcIixkLGg7Zm9yKGM9Yj1lPWY9XCJcIjtkPWEucG9wKCk7KWg9YS5sZW5ndGg/XCIsXCI6XCJcIixjKz1cIi5ja2Vfc2hvd19ibG9ja3MgXCIrZCtnK2gsZSs9XCIuY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19sdHIgXCIrZCtnK2gsZis9XCIuY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19ydGwgXCIrZCtnK2gsYis9XCIuY2tlX3Nob3dfYmxvY2tzIFwiK2QrZytcIntiYWNrZ3JvdW5kLWltYWdlOnVybChcIitDS0VESVRPUi5nZXRVcmwoaytcImltYWdlcy9ibG9ja19cIitkK1wiLnBuZ1wiKStcIil9XCI7Q0tFRElUT1IuYWRkQ3NzKChjK1wie2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3JkZXI6MXB4IGRvdHRlZCBncmF5O3BhZGRpbmctdG9wOjhweH1cIikuY29uY2F0KGIsZStcIntiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCBsZWZ0O3BhZGRpbmctbGVmdDo4cHh9XCIsXHJcbmYrXCJ7YmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgcmlnaHQ7cGFkZGluZy1yaWdodDo4cHh9XCIpKTtsfHxDS0VESVRPUi5hZGRDc3MoXCIuY2tlX3Nob3dfYmxvY2tzIFtjb250ZW50ZWRpdGFibGVcXHgzZGZhbHNlXSwuY2tlX3Nob3dfYmxvY2tzIC5ja2Vfc2hvd19ibG9ja3Nfb2Zme2JvcmRlcjpub25lO3BhZGRpbmctdG9wOjA7YmFja2dyb3VuZC1pbWFnZTpub25lfS5ja2Vfc2hvd19ibG9ja3MuY2tlX2NvbnRlbnRzX3J0bCBbY29udGVudGVkaXRhYmxlXFx4M2RmYWxzZV0sLmNrZV9zaG93X2Jsb2Nrcy5ja2VfY29udGVudHNfcnRsIC5ja2Vfc2hvd19ibG9ja3Nfb2Zme3BhZGRpbmctcmlnaHQ6MH0uY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19sdHIgW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2VdLC5ja2Vfc2hvd19ibG9ja3MuY2tlX2NvbnRlbnRzX2x0ciAuY2tlX3Nob3dfYmxvY2tzX29mZntwYWRkaW5nLWxlZnQ6MH1cIil9LGluaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYygpe2IucmVmcmVzaChhKX1cclxuaWYoIWEuYmxvY2tsZXNzKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJzaG93YmxvY2tzXCIsayk7Yi5jYW5VbmRvPSExO2EuY29uZmlnLnN0YXJ0dXBPdXRsaW5lQmxvY2tzJiZiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJTaG93QmxvY2tzXCIse2xhYmVsOmEubGFuZy5zaG93YmxvY2tzLnRvb2xiYXIsY29tbWFuZDpcInNob3dibG9ja3NcIix0b29sYmFyOlwidG9vbHMsMjBcIn0pO2Eub24oXCJtb2RlXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSk7YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSYmKGEub24oXCJmb2N1c1wiLGMpLGEub24oXCJibHVyXCIsYykpO2Eub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSl9fX0pfSkoKTsoZnVuY3Rpb24oKXt2YXIgZj17cHJlc2VydmVTdGF0ZTohMCxlZGl0b3JGb2N1czohMSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7dGhpcy50b2dnbGVTdGF0ZSgpO3RoaXMucmVmcmVzaChhKX0scmVmcmVzaDpmdW5jdGlvbihhKXtpZihhLmRvY3VtZW50KXt2YXIgYj10aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTj9cImF0dGFjaENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiO2EuZWRpdGFibGUoKVtiXShcImNrZV9zaG93X2JvcmRlcnNcIil9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzaG93Ym9yZGVyc1wiLHttb2Rlczp7d3lzaXd5ZzoxfSxvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgYTthPShDS0VESVRPUi5lbnYuaWU2Q29tcGF0P1tcIi4lMSB0YWJsZS4lMixcIixcIi4lMSB0YWJsZS4lMiB0ZCwgLiUxIHRhYmxlLiUyIHRoXCIsXCJ7XCIsXCJib3JkZXIgOiAjZDNkM2QzIDFweCBkb3R0ZWRcIixcIn1cIl06XCIuJTEgdGFibGUuJTIsOy4lMSB0YWJsZS4lMiBcXHgzZSB0ciBcXHgzZSB0ZCwgLiUxIHRhYmxlLiUyIFxceDNlIHRyIFxceDNlIHRoLDsuJTEgdGFibGUuJTIgXFx4M2UgdGJvZHkgXFx4M2UgdHIgXFx4M2UgdGQsIC4lMSB0YWJsZS4lMiBcXHgzZSB0Ym9keSBcXHgzZSB0ciBcXHgzZSB0aCw7LiUxIHRhYmxlLiUyIFxceDNlIHRoZWFkIFxceDNlIHRyIFxceDNlIHRkLCAuJTEgdGFibGUuJTIgXFx4M2UgdGhlYWQgXFx4M2UgdHIgXFx4M2UgdGgsOy4lMSB0YWJsZS4lMiBcXHgzZSB0Zm9vdCBcXHgzZSB0ciBcXHgzZSB0ZCwgLiUxIHRhYmxlLiUyIFxceDNlIHRmb290IFxceDNlIHRyIFxceDNlIHRoO3s7Ym9yZGVyIDogI2QzZDNkMyAxcHggZG90dGVkO31cIi5zcGxpdChcIjtcIikpLmpvaW4oXCJcIikucmVwbGFjZSgvJTIvZyxcclxuXCJja2Vfc2hvd19ib3JkZXJcIikucmVwbGFjZSgvJTEvZyxcImNrZV9zaG93X2JvcmRlcnMgXCIpO0NLRURJVE9SLmFkZENzcyhhKX0saW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJzaG93Ym9yZGVyc1wiLGYpO2IuY2FuVW5kbz0hMTshMSE9PWEuY29uZmlnLnN0YXJ0dXBTaG93Qm9yZGVycyYmYi5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PTik7YS5vbihcIm1vZGVcIixmdW5jdGlvbigpe2Iuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZiLnJlZnJlc2goYSl9LG51bGwsbnVsbCwxMDApO2Eub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSk7YS5vbihcInJlbW92ZUZvcm1hdENsZWFudXBcIixmdW5jdGlvbihkKXtkPWQuZGF0YTthLmdldENvbW1hbmQoXCJzaG93Ym9yZGVyc1wiKS5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04mJmQuaXMoXCJ0YWJsZVwiKSYmKCFkLmhhc0F0dHJpYnV0ZShcImJvcmRlclwiKXx8XHJcbjA+PXBhcnNlSW50KGQuZ2V0QXR0cmlidXRlKFwiYm9yZGVyXCIpLDEwKSkmJmQuYWRkQ2xhc3MoXCJja2Vfc2hvd19ib3JkZXJcIil9KX0sYWZ0ZXJJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YVByb2Nlc3NvcjthPWImJmIuZGF0YUZpbHRlcjtiPWImJmIuaHRtbEZpbHRlcjthJiZhLmFkZFJ1bGVzKHtlbGVtZW50czp7dGFibGU6ZnVuY3Rpb24oYSl7YT1hLmF0dHJpYnV0ZXM7dmFyIGI9YVtcImNsYXNzXCJdLGM9cGFyc2VJbnQoYS5ib3JkZXIsMTApO2MmJiEoMD49Yyl8fGImJi0xIT1iLmluZGV4T2YoXCJja2Vfc2hvd19ib3JkZXJcIil8fChhW1wiY2xhc3NcIl09KGJ8fFwiXCIpK1wiIGNrZV9zaG93X2JvcmRlclwiKX19fSk7YiYmYi5hZGRSdWxlcyh7ZWxlbWVudHM6e3RhYmxlOmZ1bmN0aW9uKGEpe2E9YS5hdHRyaWJ1dGVzO3ZhciBiPWFbXCJjbGFzc1wiXTtiJiYoYVtcImNsYXNzXCJdPWIucmVwbGFjZShcImNrZV9zaG93X2JvcmRlclwiLFwiXCIpLnJlcGxhY2UoL1xcc3syfS8sXCIgXCIpLnJlcGxhY2UoL15cXHMrfFxccyskLyxcclxuXCJcIikpfX19KX19KTtDS0VESVRPUi5vbihcImRpYWxvZ0RlZmluaXRpb25cIixmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEubmFtZTtpZihcInRhYmxlXCI9PWJ8fFwidGFibGVQcm9wZXJ0aWVzXCI9PWIpaWYoYT1hLmRhdGEuZGVmaW5pdGlvbixiPWEuZ2V0Q29udGVudHMoXCJpbmZvXCIpLmdldChcInR4dEJvcmRlclwiKSxiLmNvbW1pdD1DS0VESVRPUi50b29scy5vdmVycmlkZShiLmNvbW1pdCxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT1wYXJzZUludCh0aGlzLmdldFZhbHVlKCksMTApO2NbIWV8fDA+PWU/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJja2Vfc2hvd19ib3JkZXJcIil9fSksYT0oYT1hLmdldENvbnRlbnRzKFwiYWR2YW5jZWRcIikpJiZhLmdldChcImFkdkNTU0NsYXNzZXNcIikpYS5zZXR1cD1DS0VESVRPUi50b29scy5vdmVycmlkZShhLnNldHVwLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxcclxuYXJndW1lbnRzKTt0aGlzLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWUoKS5yZXBsYWNlKC9ja2Vfc2hvd19ib3JkZXIvLFwiXCIpKX19KSxhLmNvbW1pdD1DS0VESVRPUi50b29scy5vdmVycmlkZShhLmNvbW1pdCxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtwYXJzZUludChjLmdldEF0dHJpYnV0ZShcImJvcmRlclwiKSwxMCl8fGMuYWRkQ2xhc3MoXCJja2Vfc2hvd19ib3JkZXJcIil9fSl9KX0pKCk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzb3VyY2VhcmVhXCIse2luaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe3ZhciBhPWUmJnRoaXMuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldEFjdGl2ZSgpKTt0aGlzLmhpZGUoKTt0aGlzLnNldFN0eWxlKFwiaGVpZ2h0XCIsdGhpcy5nZXRQYXJlbnQoKS4kLmNsaWVudEhlaWdodCtcInB4XCIpO3RoaXMuc2V0U3R5bGUoXCJ3aWR0aFwiLHRoaXMuZ2V0UGFyZW50KCkuJC5jbGllbnRXaWR0aCtcInB4XCIpO3RoaXMuc2hvdygpO2EmJnRoaXMuZm9jdXMoKX1pZihhLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FKXt2YXIgZj1DS0VESVRPUi5wbHVnaW5zLnNvdXJjZWFyZWE7YS5hZGRNb2RlKFwic291cmNlXCIsZnVuY3Rpb24oZSl7dmFyIGI9YS51aS5zcGFjZShcImNvbnRlbnRzXCIpLmdldERvY3VtZW50KCkuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO2Iuc2V0U3R5bGVzKENLRURJVE9SLnRvb2xzLmV4dGVuZCh7d2lkdGg6Q0tFRElUT1IuZW52LmllN0NvbXBhdD9cclxuXCI5OSVcIjpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIscmVzaXplOlwibm9uZVwiLG91dGxpbmU6XCJub25lXCIsXCJ0ZXh0LWFsaWduXCI6XCJsZWZ0XCJ9LENLRURJVE9SLnRvb2xzLmNzc1ZlbmRvclByZWZpeChcInRhYi1zaXplXCIsYS5jb25maWcuc291cmNlQXJlYVRhYlNpemV8fDQpKSk7Yi5zZXRBdHRyaWJ1dGUoXCJkaXJcIixcImx0clwiKTtiLmFkZENsYXNzKFwiY2tlX3NvdXJjZVwiKS5hZGRDbGFzcyhcImNrZV9yZXNldFwiKS5hZGRDbGFzcyhcImNrZV9lbmFibGVfY29udGV4dF9tZW51XCIpO2EudWkuc3BhY2UoXCJjb250ZW50c1wiKS5hcHBlbmQoYik7Yj1hLmVkaXRhYmxlKG5ldyBjKGEsYikpO2Iuc2V0RGF0YShhLmdldERhdGEoMSkpO0NLRURJVE9SLmVudi5pZSYmKGIuYXR0YWNoTGlzdGVuZXIoYSxcInJlc2l6ZVwiLGQsYiksYi5hdHRhY2hMaXN0ZW5lcihDS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKSxcInJlc2l6ZVwiLGQsYiksQ0tFRElUT1IudG9vbHMuc2V0VGltZW91dChkLDAsYikpO2EuZmlyZShcImFyaWFXaWRnZXRcIixcclxudGhpcyk7ZSgpfSk7YS5hZGRDb21tYW5kKFwic291cmNlXCIsZi5jb21tYW5kcy5zb3VyY2UpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNvdXJjZVwiLHtsYWJlbDphLmxhbmcuc291cmNlYXJlYS50b29sYmFyLGNvbW1hbmQ6XCJzb3VyY2VcIix0b29sYmFyOlwibW9kZSwxMFwifSk7YS5vbihcIm1vZGVcIixmdW5jdGlvbigpe2EuZ2V0Q29tbWFuZChcInNvdXJjZVwiKS5zZXRTdGF0ZShcInNvdXJjZVwiPT1hLm1vZGU/Q0tFRElUT1IuVFJJU1RBVEVfT046Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKX0pO3ZhciBlPUNLRURJVE9SLmVudi5pZSYmOT09Q0tFRElUT1IuZW52LnZlcnNpb259fX0pO3ZhciBjPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHtiYXNlOkNLRURJVE9SLmVkaXRhYmxlLHByb3RvOntzZXREYXRhOmZ1bmN0aW9uKGEpe3RoaXMuc2V0VmFsdWUoYSk7dGhpcy5zdGF0dXM9XCJyZWFkeVwiO3RoaXMuZWRpdG9yLmZpcmUoXCJkYXRhUmVhZHlcIil9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpfSxcclxuaW5zZXJ0SHRtbDpmdW5jdGlvbigpe30saW5zZXJ0RWxlbWVudDpmdW5jdGlvbigpe30saW5zZXJ0VGV4dDpmdW5jdGlvbigpe30sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYSl7dGhpc1soYT9cInNldFwiOlwicmVtb3ZlXCIpK1wiQXR0cmlidXRlXCJdKFwicmVhZE9ubHlcIixcInJlYWRvbmx5XCIpfSxkZXRhY2g6ZnVuY3Rpb24oKXtjLmJhc2VQcm90by5kZXRhY2guY2FsbCh0aGlzKTt0aGlzLmNsZWFyQ3VzdG9tRGF0YSgpO3RoaXMucmVtb3ZlKCl9fX0pfSkoKTtcclxuQ0tFRElUT1IucGx1Z2lucy5zb3VyY2VhcmVhPXtjb21tYW5kczp7c291cmNlOnttb2Rlczp7d3lzaXd5ZzoxLHNvdXJjZToxfSxlZGl0b3JGb2N1czohMSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYyl7XCJ3eXNpd3lnXCI9PWMubW9kZSYmYy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2MuZ2V0Q29tbWFuZChcInNvdXJjZVwiKS5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCk7Yy5zZXRNb2RlKFwic291cmNlXCI9PWMubW9kZT9cInd5c2l3eWdcIjpcInNvdXJjZVwiKX0sY2FuVW5kbzohMX19fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInNwZWNpYWxjaGFyXCIse2F2YWlsYWJsZUxhbmdzOnthZjoxLGFyOjEsYmc6MSxjYToxLGNzOjEsY3k6MSxkYToxLGRlOjEsXCJkZS1jaFwiOjEsZWw6MSxlbjoxLFwiZW4tZ2JcIjoxLGVvOjEsZXM6MSxldDoxLGV1OjEsZmE6MSxmaToxLGZyOjEsXCJmci1jYVwiOjEsZ2w6MSxoZToxLGhyOjEsaHU6MSxpZDoxLGl0OjEsamE6MSxrbToxLGtvOjEsa3U6MSxsdDoxLGx2OjEsbmI6MSxubDoxLG5vOjEscGw6MSxwdDoxLFwicHQtYnJcIjoxLHJ1OjEsc2k6MSxzazoxLHNsOjEsc3E6MSxzdjoxLHRoOjEsdHI6MSx0dDoxLHVnOjEsdWs6MSx2aToxLHpoOjEsXCJ6aC1jblwiOjF9LHJlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJzcGVjaWFsY2hhclwiLHRoaXMucGF0aCtcImRpYWxvZ3Mvc3BlY2lhbGNoYXIuanNcIik7YS5hZGRDb21tYW5kKFwic3BlY2lhbGNoYXJcIix7ZXhlYzpmdW5jdGlvbigpe3ZhciBiPVxyXG5hLmxhbmdDb2RlLGI9Yy5hdmFpbGFibGVMYW5nc1tiXT9iOmMuYXZhaWxhYmxlTGFuZ3NbYi5yZXBsYWNlKC8tLiovLFwiXCIpXT9iLnJlcGxhY2UoLy0uKi8sXCJcIik6XCJlblwiO0NLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKENLRURJVE9SLmdldFVybChjLnBhdGgrXCJkaWFsb2dzL2xhbmcvXCIrYitcIi5qc1wiKSxmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLmV4dGVuZChhLmxhbmcuc3BlY2lhbGNoYXIsYy5sYW5nRW50cmllc1tiXSk7YS5vcGVuRGlhbG9nKFwic3BlY2lhbGNoYXJcIil9KX0sbW9kZXM6e3d5c2l3eWc6MX0sY2FuVW5kbzohMX0pO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNwZWNpYWxDaGFyXCIse2xhYmVsOmEubGFuZy5zcGVjaWFsY2hhci50b29sYmFyLGNvbW1hbmQ6XCJzcGVjaWFsY2hhclwiLHRvb2xiYXI6XCJpbnNlcnQsNTBcIn0pfX0pO0NLRURJVE9SLmNvbmZpZy5zcGVjaWFsQ2hhcnM9XCIhIFxceDI2cXVvdDsgIyAkICUgXFx4MjZhbXA7ICcgKCApICogKyAtIC4gLyAwIDEgMiAzIDQgNSA2IDcgOCA5IDogOyBcXHgyNmx0OyBcXHgzZCBcXHgyNmd0OyA/IEAgQSBCIEMgRCBFIEYgRyBIIEkgSiBLIEwgTSBOIE8gUCBRIFIgUyBUIFUgViBXIFggWSBaIFsgXSBeIF8gYCBhIGIgYyBkIGUgZiBnIGggaSBqIGsgbCBtIG4gbyBwIHEgciBzIHQgdSB2IHcgeCB5IHogeyB8IH0gfiBcXHgyNmV1cm87IFxceDI2bHNxdW87IFxceDI2cnNxdW87IFxceDI2bGRxdW87IFxceDI2cmRxdW87IFxceDI2bmRhc2g7IFxceDI2bWRhc2g7IFxceDI2aWV4Y2w7IFxceDI2Y2VudDsgXFx4MjZwb3VuZDsgXFx4MjZjdXJyZW47IFxceDI2eWVuOyBcXHgyNmJydmJhcjsgXFx4MjZzZWN0OyBcXHgyNnVtbDsgXFx4MjZjb3B5OyBcXHgyNm9yZGY7IFxceDI2bGFxdW87IFxceDI2bm90OyBcXHgyNnJlZzsgXFx4MjZtYWNyOyBcXHgyNmRlZzsgXFx4MjZzdXAyOyBcXHgyNnN1cDM7IFxceDI2YWN1dGU7IFxceDI2bWljcm87IFxceDI2cGFyYTsgXFx4MjZtaWRkb3Q7IFxceDI2Y2VkaWw7IFxceDI2c3VwMTsgXFx4MjZvcmRtOyBcXHgyNnJhcXVvOyBcXHgyNmZyYWMxNDsgXFx4MjZmcmFjMTI7IFxceDI2ZnJhYzM0OyBcXHgyNmlxdWVzdDsgXFx4MjZBZ3JhdmU7IFxceDI2QWFjdXRlOyBcXHgyNkFjaXJjOyBcXHgyNkF0aWxkZTsgXFx4MjZBdW1sOyBcXHgyNkFyaW5nOyBcXHgyNkFFbGlnOyBcXHgyNkNjZWRpbDsgXFx4MjZFZ3JhdmU7IFxceDI2RWFjdXRlOyBcXHgyNkVjaXJjOyBcXHgyNkV1bWw7IFxceDI2SWdyYXZlOyBcXHgyNklhY3V0ZTsgXFx4MjZJY2lyYzsgXFx4MjZJdW1sOyBcXHgyNkVUSDsgXFx4MjZOdGlsZGU7IFxceDI2T2dyYXZlOyBcXHgyNk9hY3V0ZTsgXFx4MjZPY2lyYzsgXFx4MjZPdGlsZGU7IFxceDI2T3VtbDsgXFx4MjZ0aW1lczsgXFx4MjZPc2xhc2g7IFxceDI2VWdyYXZlOyBcXHgyNlVhY3V0ZTsgXFx4MjZVY2lyYzsgXFx4MjZVdW1sOyBcXHgyNllhY3V0ZTsgXFx4MjZUSE9STjsgXFx4MjZzemxpZzsgXFx4MjZhZ3JhdmU7IFxceDI2YWFjdXRlOyBcXHgyNmFjaXJjOyBcXHgyNmF0aWxkZTsgXFx4MjZhdW1sOyBcXHgyNmFyaW5nOyBcXHgyNmFlbGlnOyBcXHgyNmNjZWRpbDsgXFx4MjZlZ3JhdmU7IFxceDI2ZWFjdXRlOyBcXHgyNmVjaXJjOyBcXHgyNmV1bWw7IFxceDI2aWdyYXZlOyBcXHgyNmlhY3V0ZTsgXFx4MjZpY2lyYzsgXFx4MjZpdW1sOyBcXHgyNmV0aDsgXFx4MjZudGlsZGU7IFxceDI2b2dyYXZlOyBcXHgyNm9hY3V0ZTsgXFx4MjZvY2lyYzsgXFx4MjZvdGlsZGU7IFxceDI2b3VtbDsgXFx4MjZkaXZpZGU7IFxceDI2b3NsYXNoOyBcXHgyNnVncmF2ZTsgXFx4MjZ1YWN1dGU7IFxceDI2dWNpcmM7IFxceDI2dXVtbDsgXFx4MjZ5YWN1dGU7IFxceDI2dGhvcm47IFxceDI2eXVtbDsgXFx4MjZPRWxpZzsgXFx4MjZvZWxpZzsgXFx4MjYjMzcyOyBcXHgyNiMzNzQgXFx4MjYjMzczIFxceDI2IzM3NTsgXFx4MjZzYnF1bzsgXFx4MjYjODIxOTsgXFx4MjZiZHF1bzsgXFx4MjZoZWxsaXA7IFxceDI2dHJhZGU7IFxceDI2Izk2NTg7IFxceDI2YnVsbDsgXFx4MjZyYXJyOyBcXHgyNnJBcnI7IFxceDI2aEFycjsgXFx4MjZkaWFtczsgXFx4MjZhc3ltcDtcIi5zcGxpdChcIiBcIik7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzY2F5dFwiLHtyZXF1aXJlczpcIm1lbnVidXR0b24sZGlhbG9nXCIsdGFiVG9PcGVuOm51bGwsZGlhbG9nTmFtZTpcInNjYXl0RGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGQ9Q0tFRElUT1IucGx1Z2lucy5zY2F5dDt0aGlzLmJpbmRFdmVudHMoYSk7dGhpcy5wYXJzZUNvbmZpZyhhKTt0aGlzLmFkZFJ1bGUoYSk7Q0tFRElUT1IuZGlhbG9nLmFkZCh0aGlzLmRpYWxvZ05hbWUsQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImRpYWxvZ3Mvb3B0aW9ucy5qc1wiKSk7dGhpcy5hZGRNZW51SXRlbXMoYSk7dmFyIGI9YS5sYW5nLnNjYXl0LGU9Q0tFRElUT1IuZW52O2EudWkuYWRkKFwiU2NheXRcIixDS0VESVRPUi5VSV9NRU5VQlVUVE9OLHtsYWJlbDpiLnRleHRfdGl0bGUsdGl0bGU6YS5wbHVnaW5zLndzYz9hLmxhbmcud3NjLnRpdGxlOmIudGV4dF90aXRsZSxtb2Rlczp7d3lzaXd5ZzohKGUuaWUmJig4PmUudmVyc2lvbnx8ZS5xdWlya3MpKX0sXHJcbnRvb2xiYXI6XCJzcGVsbGNoZWNrZXIsMjBcIixyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9YS51aS5pbnN0YW5jZXMuU2NheXQuZ2V0U3RhdGUoKTthLnNjYXl0JiYoYj1kLnN0YXRlLnNjYXl0W2EubmFtZV0/Q0tFRElUT1IuVFJJU1RBVEVfT046Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKTthLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsYil9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpczthLm9uKFwic2NheXRCdXR0b25TdGF0ZVwiLGZ1bmN0aW9uKGEpe3ZvaWQgMCE9PXR5cGVvZiBhLmRhdGEmJmIuc2V0U3RhdGUoYS5kYXRhKX0pfSxvbk1lbnU6ZnVuY3Rpb24oKXt2YXIgYj1hLnNjYXl0O2EuZ2V0TWVudUl0ZW0oXCJzY2F5dFRvZ2dsZVwiKS5sYWJlbD1hLmxhbmcuc2NheXRbYiYmZC5zdGF0ZS5zY2F5dFthLm5hbWVdP1wiYnRuX2Rpc2FibGVcIjpcImJ0bl9lbmFibGVcIl07Yj17c2NheXRUb2dnbGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHNjYXl0T3B0aW9uczpiP0NLRURJVE9SLlRSSVNUQVRFX09GRjpcclxuQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsc2NheXRMYW5nczpiP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxzY2F5dERpY3Q6Yj9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsc2NheXRBYm91dDpiP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxXU0M6YS5wbHVnaW5zLndzYz9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUR9O2EuY29uZmlnLnNjYXl0X3VpVGFic1swXXx8ZGVsZXRlIGIuc2NheXRPcHRpb25zO2EuY29uZmlnLnNjYXl0X3VpVGFic1sxXXx8ZGVsZXRlIGIuc2NheXRMYW5nczthLmNvbmZpZy5zY2F5dF91aVRhYnNbMl18fGRlbGV0ZSBiLnNjYXl0RGljdDtyZXR1cm4gYn19KTthLmNvbnRleHRNZW51JiZhLmFkZE1lbnVJdGVtcyYmKGEuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYixkKXt2YXIgZT1cclxuYS5zY2F5dCxrLGw7ZSYmKGw9ZS5nZXRTZWxlY3Rpb25Ob2RlKCkpJiYoaz1jLm1lbnVHZW5lcmF0b3IoYSxsKSxlLnNob3dCYW5uZXIoXCIuXCIrYS5jb250ZXh0TWVudS5fLmRlZmluaXRpb24ucGFuZWwuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKS5qb2luKFwiIC5cIikpKTtyZXR1cm4ga30pLGEuY29udGV4dE1lbnUuXy5vbkhpZGU9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoYS5jb250ZXh0TWVudS5fLm9uSGlkZSxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1hLnNjYXl0O2QmJmQuaGlkZUJhbm5lcigpO3JldHVybiBiLmFwcGx5KHRoaXMpfX0pKX0sYWRkTWVudUl0ZW1zOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1DS0VESVRPUi5wbHVnaW5zLnNjYXl0O2EuYWRkTWVudUdyb3VwKFwic2NheXRCdXR0b25cIik7Zm9yKHZhciBiPWEuY29uZmlnLnNjYXl0X2NvbnRleHRNZW51SXRlbXNPcmRlci5zcGxpdChcInxcIiksZT0wO2U8Yi5sZW5ndGg7ZSsrKWJbZV09XCJzY2F5dF9cIitiW2VdO1xyXG5pZigoYj1bXCJncmF5dF9kZXNjcmlwdGlvblwiLFwiZ3JheXRfc3VnZ2VzdFwiLFwiZ3JheXRfY29udHJvbFwiXS5jb25jYXQoYikpJiZiLmxlbmd0aClmb3IoZT0wO2U8Yi5sZW5ndGg7ZSsrKWEuYWRkTWVudUdyb3VwKGJbZV0sZS0xMCk7YS5hZGRDb21tYW5kKFwic2NheXRUb2dnbGVcIix7ZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLnNjYXl0O2Quc3RhdGUuc2NheXRbYS5uYW1lXT0hZC5zdGF0ZS5zY2F5dFthLm5hbWVdOyEwPT09ZC5zdGF0ZS5zY2F5dFthLm5hbWVdP2J8fGQuY3JlYXRlU2NheXQoYSk6YiYmZC5kZXN0cm95KGEpfX0pO2EuYWRkQ29tbWFuZChcInNjYXl0QWJvdXRcIix7ZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cImFib3V0XCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9fSk7YS5hZGRDb21tYW5kKFwic2NheXRPcHRpb25zXCIse2V4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJvcHRpb25zXCI7YS5sb2NrU2VsZWN0aW9uKCk7XHJcbmEub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfX0pO2EuYWRkQ29tbWFuZChcInNjYXl0TGFuZ3NcIix7ZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cImxhbmdzXCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9fSk7YS5hZGRDb21tYW5kKFwic2NheXREaWN0XCIse2V4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJkaWN0aW9uYXJpZXNcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX19KTtiPXtzY2F5dFRvZ2dsZTp7bGFiZWw6YS5sYW5nLnNjYXl0LmJ0bl9lbmFibGUsZ3JvdXA6XCJzY2F5dEJ1dHRvblwiLGNvbW1hbmQ6XCJzY2F5dFRvZ2dsZVwifSxzY2F5dEFib3V0OntsYWJlbDphLmxhbmcuc2NheXQuYnRuX2Fib3V0LGdyb3VwOlwic2NheXRCdXR0b25cIixjb21tYW5kOlwic2NheXRBYm91dFwifSxzY2F5dE9wdGlvbnM6e2xhYmVsOmEubGFuZy5zY2F5dC5idG5fb3B0aW9ucyxncm91cDpcInNjYXl0QnV0dG9uXCIsXHJcbmNvbW1hbmQ6XCJzY2F5dE9wdGlvbnNcIn0sc2NheXRMYW5nczp7bGFiZWw6YS5sYW5nLnNjYXl0LmJ0bl9sYW5ncyxncm91cDpcInNjYXl0QnV0dG9uXCIsY29tbWFuZDpcInNjYXl0TGFuZ3NcIn0sc2NheXREaWN0OntsYWJlbDphLmxhbmcuc2NheXQuYnRuX2RpY3Rpb25hcmllcyxncm91cDpcInNjYXl0QnV0dG9uXCIsY29tbWFuZDpcInNjYXl0RGljdFwifX07YS5wbHVnaW5zLndzYyYmKGIuV1NDPXtsYWJlbDphLmxhbmcud3NjLnRvb2xiYXIsZ3JvdXA6XCJzY2F5dEJ1dHRvblwiLG9uQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgYj1DS0VESVRPUi5wbHVnaW5zLnNjYXl0LGQ9YS5zY2F5dCxjPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/YS5jb250YWluZXIuZ2V0VGV4dCgpOmEuZG9jdW1lbnQuZ2V0Qm9keSgpLmdldFRleHQoKTsoYz1jLnJlcGxhY2UoL1xccy9nLFwiXCIpKT8oZCYmYi5zdGF0ZS5zY2F5dFthLm5hbWVdJiZkLnNldE1hcmt1cFBhdXNlZCYmZC5zZXRNYXJrdXBQYXVzZWQoITApLFxyXG5hLmxvY2tTZWxlY3Rpb24oKSxhLmV4ZWNDb21tYW5kKFwiY2hlY2tzcGVsbFwiKSk6YWxlcnQoXCJOb3RoaW5nIHRvIGNoZWNrIVwiKX19KTthLmFkZE1lbnVJdGVtcyhiKX0sYmluZEV2ZW50czpmdW5jdGlvbihhKXt2YXIgYz1DS0VESVRPUi5wbHVnaW5zLnNjYXl0LGQ9YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSxiPWZ1bmN0aW9uKCl7Yy5kZXN0cm95KGEpfSxlPWZ1bmN0aW9uKCl7IWMuc3RhdGUuc2NheXRbYS5uYW1lXXx8YS5yZWFkT25seXx8YS5zY2F5dHx8Yy5jcmVhdGVTY2F5dChhKX0sZj1mdW5jdGlvbigpe3ZhciBiPWEuZWRpdGFibGUoKTtiLmF0dGFjaExpc3RlbmVyKGIsXCJmb2N1c1wiLGZ1bmN0aW9uKGIpe0NLRURJVE9SLnBsdWdpbnMuc2NheXQmJiFhLnNjYXl0JiZzZXRUaW1lb3V0KGUsMCk7Yj1DS0VESVRPUi5wbHVnaW5zLnNjYXl0JiZDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN0YXRlLnNjYXl0W2EubmFtZV0mJmEuc2NheXQ7dmFyIGMsXHJcbmg7aWYoKGR8fGIpJiZhLl8uc2F2ZWRTZWxlY3Rpb24pe2I9YS5fLnNhdmVkU2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpO2I9IWImJmEuXy5zYXZlZFNlbGVjdGlvbi5nZXRSYW5nZXMoKTtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyloPWJbZl0sXCJzdHJpbmdcIj09PXR5cGVvZiBoLnN0YXJ0Q29udGFpbmVyLiQubm9kZVZhbHVlJiYoYz1oLnN0YXJ0Q29udGFpbmVyLmdldFRleHQoKS5sZW5ndGgsKGM8aC5zdGFydE9mZnNldHx8YzxoLmVuZE9mZnNldCkmJmEudW5sb2NrU2VsZWN0aW9uKCExKSl9fSx0aGlzLG51bGwsLTEwKX0sZz1mdW5jdGlvbigpe2Q/YS5jb25maWcuc2NheXRfaW5saW5lTW9kZUltbWVkaWF0ZU1hcmt1cD9lKCk6KGEub24oXCJibHVyXCIsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGIsMCl9KSxhLm9uKFwiZm9jdXNcIixlKSxhLmZvY3VzTWFuYWdlci5oYXNGb2N1cyYmZSgpKTplKCk7ZigpO3ZhciBjPWEuZWRpdGFibGUoKTtjLmF0dGFjaExpc3RlbmVyKGMsXCJtb3VzZWRvd25cIixcclxuZnVuY3Rpb24oYil7Yj1iLmRhdGEuZ2V0VGFyZ2V0KCk7dmFyIGQ9YS53aWRnZXRzJiZhLndpZGdldHMuZ2V0QnlFbGVtZW50KGIpO2QmJihkLndyYXBwZXI9Yi5nZXRBc2NlbmRhbnQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKFwiZGF0YS1ja2Utd2lkZ2V0LXdyYXBwZXJcIil9LCEwKSl9LHRoaXMsbnVsbCwtMTApfTthLm9uKFwiY29udGVudERvbVwiLGcpO2Eub24oXCJiZWZvcmVDb21tYW5kRXhlY1wiLGZ1bmN0aW9uKGIpe3ZhciBkPWEuc2NheXQsZT1udWxsLGY9ITEsZz0hMDtiLmRhdGEubmFtZSBpbiBjLm9wdGlvbnMuZGlzYWJsaW5nQ29tbWFuZEV4ZWMmJlwid3lzaXd5Z1wiPT1hLm1vZGU/ZCYmKGMuZGVzdHJveShhKSxhLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpKTpcImJvbGRcIiE9PWIuZGF0YS5uYW1lJiZcIml0YWxpY1wiIT09Yi5kYXRhLm5hbWUmJlwidW5kZXJsaW5lXCIhPT1iLmRhdGEubmFtZSYmXCJzdHJpa2VcIiE9PWIuZGF0YS5uYW1lJiZcclxuXCJzdWJzY3JpcHRcIiE9PWIuZGF0YS5uYW1lJiZcInN1cGVyc2NyaXB0XCIhPT1iLmRhdGEubmFtZSYmXCJlbnRlclwiIT09Yi5kYXRhLm5hbWUmJlwiY3V0XCIhPT1iLmRhdGEubmFtZSYmXCJsYW5ndWFnZVwiIT09Yi5kYXRhLm5hbWV8fCFkfHwoXCJjdXRcIj09PWIuZGF0YS5uYW1lJiYoZz0hMSxmPSEwKSxcImxhbmd1YWdlXCI9PT1iLmRhdGEubmFtZSYmKGU9KGU9YS5wbHVnaW5zLmxhbmd1YWdlLmdldEN1cnJlbnRMYW5nRWxlbWVudChhKSkmJmUuJCxmPSEwKSxhLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiLHtyZW1vdmVPcHRpb25zOntyZW1vdmVJbnNpZGU6Zyxmb3JjZUJvb2ttYXJrOmYsc2VsZWN0aW9uTm9kZTplfSx0aW1lb3V0OjB9KSl9KTthLm9uKFwiYmVmb3JlU2V0TW9kZVwiLGZ1bmN0aW9uKGIpe2lmKFwic291cmNlXCI9PWIuZGF0YSl7aWYoYj1hLnNjYXl0KWMuZGVzdHJveShhKSxhLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2EuZG9jdW1lbnQmJlxyXG5hLmRvY3VtZW50LmdldEJvZHkoKS5yZW1vdmVBdHRyaWJ1dGUoXCJfanF1aWRcIil9fSk7YS5vbihcImFmdGVyQ29tbWFuZEV4ZWNcIixmdW5jdGlvbihiKXtcInd5c2l3eWdcIiE9YS5tb2RlfHxcInVuZG9cIiE9Yi5kYXRhLm5hbWUmJlwicmVkb1wiIT1iLmRhdGEubmFtZXx8c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBiPWEuc2NheXQsZD1iJiZiLmdldFNjYXl0TGFuZ0xpc3QoKTtkJiZkLmx0ciYmZC5ydGwmJmIuZmlyZShcInN0YXJ0U3BlbGxDaGVjaywgc3RhcnRHcmFtbWFyQ2hlY2tcIil9LDI1MCl9KTthLm9uKFwicmVhZE9ubHlcIixmdW5jdGlvbihiKXt2YXIgZDtiJiYoZD1hLnNjYXl0LCEwPT09Yi5lZGl0b3IucmVhZE9ubHk/ZCYmZC5maXJlKFwicmVtb3ZlTWFya3VwSW5Eb2N1bWVudFwiLHt9KTpkP2QuZmlyZShcInN0YXJ0U3BlbGxDaGVjaywgc3RhcnRHcmFtbWFyQ2hlY2tcIik6XCJ3eXNpd3lnXCI9PWIuZWRpdG9yLm1vZGUmJiEwPT09Yy5zdGF0ZS5zY2F5dFtiLmVkaXRvci5uYW1lXSYmKGMuY3JlYXRlU2NheXQoYSksXHJcbmIuZWRpdG9yLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsQ0tFRElUT1IuVFJJU1RBVEVfT04pKSl9KTthLm9uKFwiYmVmb3JlRGVzdHJveVwiLGIpO2Eub24oXCJzZXREYXRhXCIsZnVuY3Rpb24oKXtiKCk7KGEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkV8fGEucGx1Z2lucy5kaXZhcmVhKSYmZygpfSx0aGlzLG51bGwsNTApO2Eub24oXCJyZWxvYWRNYXJrdXBTY2F5dFwiLGZ1bmN0aW9uKGIpe3ZhciBkPWIuZGF0YSYmYi5kYXRhLnJlbW92ZU9wdGlvbnM7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBiPWEuc2NheXQsYz1iJiZiLmdldFNjYXl0TGFuZ0xpc3QoKTtjJiZjLmx0ciYmYy5ydGwmJihhLmRvY3VtZW50LmZpcmUoXCJrZXlkb3duXCIsbmV3IENLRURJVE9SLmRvbS5ldmVudCh7a2V5Q29kZTozN30pKSxiLnJlbW92ZU1hcmt1cEluU2VsZWN0aW9uTm9kZShkKSxiLmZpcmUoXCJzdGFydFNwZWxsQ2hlY2ssIHN0YXJ0R3JhbW1hckNoZWNrXCIpKX0sYi5kYXRhJiZcclxuYi5kYXRhLnRpbWVvdXR8fDApfSk7YS5vbihcImluc2VydEVsZW1lbnRcIixmdW5jdGlvbigpe2EuZmlyZShcInJlbG9hZE1hcmt1cFNjYXl0XCIse3JlbW92ZU9wdGlvbnM6e2ZvcmNlQm9va21hcms6ITB9fSl9LHRoaXMsbnVsbCw1MCk7YS5vbihcImluc2VydEh0bWxcIixmdW5jdGlvbigpe2EuZmlyZShcInJlbG9hZE1hcmt1cFNjYXl0XCIpfSx0aGlzLG51bGwsNTApO2Eub24oXCJpbnNlcnRUZXh0XCIsZnVuY3Rpb24oKXthLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiKX0sdGhpcyxudWxsLDUwKTthLm9uKFwic2NheXREaWFsb2dTaG93blwiLGZ1bmN0aW9uKGIpe2IuZGF0YS5zZWxlY3RQYWdlKGEuc2NheXQudGFiVG9PcGVuKX0pfSxwYXJzZUNvbmZpZzpmdW5jdGlvbihhKXt2YXIgYz1DS0VESVRPUi5wbHVnaW5zLnNjYXl0O2MucmVwbGFjZU9sZE9wdGlvbnNOYW1lcyhhLmNvbmZpZyk7XCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfYXV0b1N0YXJ0dXAmJihhLmNvbmZpZy5zY2F5dF9hdXRvU3RhcnR1cD1cclxuITEpO2Muc3RhdGUuc2NheXRbYS5uYW1lXT1hLmNvbmZpZy5zY2F5dF9hdXRvU3RhcnR1cDtcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5ncmF5dF9hdXRvU3RhcnR1cCYmKGEuY29uZmlnLmdyYXl0X2F1dG9TdGFydHVwPSExKTtcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pbmxpbmVNb2RlSW1tZWRpYXRlTWFya3VwJiYoYS5jb25maWcuc2NheXRfaW5saW5lTW9kZUltbWVkaWF0ZU1hcmt1cD0hMSk7Yy5zdGF0ZS5ncmF5dFthLm5hbWVdPWEuY29uZmlnLmdyYXl0X2F1dG9TdGFydHVwO2EuY29uZmlnLnNjYXl0X2NvbnRleHRDb21tYW5kc3x8KGEuY29uZmlnLnNjYXl0X2NvbnRleHRDb21tYW5kcz1cImlnbm9yZXxpZ25vcmVhbGx8YWRkXCIpO2EuY29uZmlnLnNjYXl0X2NvbnRleHRNZW51SXRlbXNPcmRlcnx8KGEuY29uZmlnLnNjYXl0X2NvbnRleHRNZW51SXRlbXNPcmRlcj1cInN1Z2dlc3R8bW9yZXN1Z2dlc3R8Y29udHJvbFwiKTthLmNvbmZpZy5zY2F5dF9zTGFuZ3x8XHJcbihhLmNvbmZpZy5zY2F5dF9zTGFuZz1cImVuX1VTXCIpO2lmKHZvaWQgMD09PWEuY29uZmlnLnNjYXl0X21heFN1Z2dlc3Rpb25zfHxcIm51bWJlclwiIT10eXBlb2YgYS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnN8fDA+YS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnMpYS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnM9NTtpZih2b2lkIDA9PT1hLmNvbmZpZy5zY2F5dF9taW5Xb3JkTGVuZ3RofHxcIm51bWJlclwiIT10eXBlb2YgYS5jb25maWcuc2NheXRfbWluV29yZExlbmd0aHx8MT5hLmNvbmZpZy5zY2F5dF9taW5Xb3JkTGVuZ3RoKWEuY29uZmlnLnNjYXl0X21pbldvcmRMZW5ndGg9NDtpZih2b2lkIDA9PT1hLmNvbmZpZy5zY2F5dF9jdXN0b21EaWN0aW9uYXJ5SWRzfHxcInN0cmluZ1wiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2N1c3RvbURpY3Rpb25hcnlJZHMpYS5jb25maWcuc2NheXRfY3VzdG9tRGljdGlvbmFyeUlkcz1cIlwiO2lmKHZvaWQgMD09PWEuY29uZmlnLnNjYXl0X3VzZXJEaWN0aW9uYXJ5TmFtZXx8XHJcblwic3RyaW5nXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfdXNlckRpY3Rpb25hcnlOYW1lKWEuY29uZmlnLnNjYXl0X3VzZXJEaWN0aW9uYXJ5TmFtZT1udWxsO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfdWlUYWJzJiYzPT09YS5jb25maWcuc2NheXRfdWlUYWJzLnNwbGl0KFwiLFwiKS5sZW5ndGgpe3ZhciBkPVtdLGI9W107YS5jb25maWcuc2NheXRfdWlUYWJzPWEuY29uZmlnLnNjYXl0X3VpVGFicy5zcGxpdChcIixcIik7Q0tFRElUT1IudG9vbHMuc2VhcmNoKGEuY29uZmlnLnNjYXl0X3VpVGFicyxmdW5jdGlvbihhKXsxPT09TnVtYmVyKGEpfHwwPT09TnVtYmVyKGEpPyhiLnB1c2goITApLGQucHVzaChOdW1iZXIoYSkpKTpiLnB1c2goITEpfSk7bnVsbD09PUNLRURJVE9SLnRvb2xzLnNlYXJjaChiLCExKT9hLmNvbmZpZy5zY2F5dF91aVRhYnM9ZDphLmNvbmZpZy5zY2F5dF91aVRhYnM9WzEsMSwxXX1lbHNlIGEuY29uZmlnLnNjYXl0X3VpVGFicz1bMSwxLDFdO1xyXG5cInN0cmluZ1wiIT10eXBlb2YgYS5jb25maWcuc2NheXRfc2VydmljZVByb3RvY29sJiYoYS5jb25maWcuc2NheXRfc2VydmljZVByb3RvY29sPW51bGwpO1wic3RyaW5nXCIhPXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlSG9zdCYmKGEuY29uZmlnLnNjYXl0X3NlcnZpY2VIb3N0PW51bGwpO1wic3RyaW5nXCIhPXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUG9ydCYmKGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQb3J0PW51bGwpO1wic3RyaW5nXCIhPXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUGF0aCYmKGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQYXRoPW51bGwpO2EuY29uZmlnLnNjYXl0X21vcmVTdWdnZXN0aW9uc3x8KGEuY29uZmlnLnNjYXl0X21vcmVTdWdnZXN0aW9ucz1cIm9uXCIpO1wic3RyaW5nXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfY3VzdG9tZXJJZCYmKGEuY29uZmlnLnNjYXl0X2N1c3RvbWVySWQ9XCIxOld2RjBENC1VdFBxTjEtNDNua0Q0LU5LdlVtMi1kYVFxazMtTG1OaUktejdZc2I0LW13cnkyNC1UOFlyUzMtUTJ0cHEyXCIpO1xyXG5cInN0cmluZ1wiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X3NyY1VybCYmKGM9ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wsYz0tMSE9Yy5zZWFyY2goL2h0dHBzPzovKT9jOlwiaHR0cDpcIixhLmNvbmZpZy5zY2F5dF9zcmNVcmw9YytcIi8vc3ZjLndlYnNwZWxsY2hlY2tlci5uZXQvc3BlbGxjaGVjazMxL2xmL3NjYXl0My9ja3NjYXl0L2Nrc2NheXQuanNcIik7XCJib29sZWFuXCIhPT10eXBlb2YgQ0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZUNoZWNrRGlydHkmJihDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlQ2hlY2tEaXJ0eT0hMCk7XCJib29sZWFuXCIhPT10eXBlb2YgQ0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZVVuZG9SZWRvJiYoQ0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZVVuZG9SZWRvPSEwKTtDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlVW5kb1JlZG89Q0tFRElUT1IucGx1Z2lucy51bmRvP0NLRURJVE9SLmNvbmZpZy5zY2F5dF9oYW5kbGVVbmRvUmVkbzohMTtcclxuXCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZU1vZGUmJihhLmNvbmZpZy5zY2F5dF9tdWx0aUxhbmd1YWdlTW9kZT0hMSk7XCJvYmplY3RcIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9tdWx0aUxhbmd1YWdlU3R5bGVzJiYoYS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZVN0eWxlcz17fSk7YS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVBbGxDYXBzV29yZHMmJihhLmNvbmZpZy5zY2F5dF9pZ25vcmVBbGxDYXBzV29yZHM9ITEpO2EuY29uZmlnLnNjYXl0X2lnbm9yZURvbWFpbk5hbWVzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyYmKGEuY29uZmlnLnNjYXl0X2lnbm9yZURvbWFpbk5hbWVzPSExKTthLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzJiZcclxuKGEuY29uZmlnLnNjYXl0X2lnbm9yZVdvcmRzV2l0aE1peGVkQ2FzZXM9ITEpO2EuY29uZmlnLnNjYXl0X2lnbm9yZVdvcmRzV2l0aE51bWJlcnMmJlwiYm9vbGVhblwiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2lnbm9yZVdvcmRzV2l0aE51bWJlcnMmJihhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhOdW1iZXJzPSExKTtpZihhLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2Upe3ZhciBjPUNLRURJVE9SLnRvb2xzLmlzQXJyYXkoYS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlKT9hLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2U6XCJzdHJpbmdcIj09PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2U/W2EuY29uZmlnLnNjYXl0X2Rpc2FibGVPcHRpb25zU3RvcmFnZV06dm9pZCAwLGU9XCJhbGwgb3B0aW9ucyBsYW5nIGlnbm9yZS1hbGwtY2Fwcy13b3JkcyBpZ25vcmUtZG9tYWluLW5hbWVzIGlnbm9yZS13b3Jkcy13aXRoLW1peGVkLWNhc2VzIGlnbm9yZS13b3Jkcy13aXRoLW51bWJlcnNcIi5zcGxpdChcIiBcIiksXHJcbmY9W1wibGFuZ1wiLFwiaWdub3JlLWFsbC1jYXBzLXdvcmRzXCIsXCJpZ25vcmUtZG9tYWluLW5hbWVzXCIsXCJpZ25vcmUtd29yZHMtd2l0aC1taXhlZC1jYXNlc1wiLFwiaWdub3JlLXdvcmRzLXdpdGgtbnVtYmVyc1wiXSxnPUNLRURJVE9SLnRvb2xzLnNlYXJjaCxoPUNLRURJVE9SLnRvb2xzLmluZGV4T2Y7YS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBjPWFbZF0sbT0hIWcoYSxcIm9wdGlvbnNcIik7aWYoIWcoZSxjKXx8bSYmZyhmLGZ1bmN0aW9uKGEpe2lmKFwibGFuZ1wiPT09YSlyZXR1cm4hMX0pKXJldHVybjtnKGYsYykmJmYuc3BsaWNlKGgoZixjKSwxKTtpZihcImFsbFwiPT09Y3x8bSYmZyhhLFwibGFuZ1wiKSlyZXR1cm5bXTtcIm9wdGlvbnNcIj09PWMmJihmPVtcImxhbmdcIl0pfXJldHVybiBiPWIuY29uY2F0KGYpfShjKX19LGFkZFJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGM9Q0tFRElUT1IucGx1Z2lucy5zY2F5dCxcclxuZD1hLmRhdGFQcm9jZXNzb3IsYj1kJiZkLmh0bWxGaWx0ZXIsZT1hLl8uZWxlbWVudHNQYXRoJiZhLl8uZWxlbWVudHNQYXRoLmZpbHRlcnMsZD1kJiZkLmRhdGFGaWx0ZXIsZj1hLmFkZFJlbW92ZUZvcm1hdEZpbHRlcixnPWZ1bmN0aW9uKGIpe2lmKGEuc2NheXQmJihiLmhhc0F0dHJpYnV0ZShjLm9wdGlvbnMuZGF0YV9hdHRyaWJ1dGVfbmFtZSl8fGIuaGFzQXR0cmlidXRlKGMub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGUpKSlyZXR1cm4hMX0saD1mdW5jdGlvbihiKXt2YXIgZD0hMDthLnNjYXl0JiYoYi5oYXNBdHRyaWJ1dGUoYy5vcHRpb25zLmRhdGFfYXR0cmlidXRlX25hbWUpfHxiLmhhc0F0dHJpYnV0ZShjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlKSkmJihkPSExKTtyZXR1cm4gZH07ZSYmZS5wdXNoKGcpO2QmJmQuYWRkUnVsZXMoe2VsZW1lbnRzOntzcGFuOmZ1bmN0aW9uKGEpe3ZhciBiPWEuaGFzQ2xhc3MoYy5vcHRpb25zLm1pc3NwZWxsZWRfd29yZF9jbGFzcykmJlxyXG5hLmF0dHJpYnV0ZXNbYy5vcHRpb25zLmRhdGFfYXR0cmlidXRlX25hbWVdLGQ9YS5oYXNDbGFzcyhjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2NsYXNzKSYmYS5hdHRyaWJ1dGVzW2Mub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGVdO2MmJihifHxkKSYmZGVsZXRlIGEubmFtZTtyZXR1cm4gYX19fSk7YiYmYi5hZGRSdWxlcyh7ZWxlbWVudHM6e3NwYW46ZnVuY3Rpb24oYSl7dmFyIGI9YS5oYXNDbGFzcyhjLm9wdGlvbnMubWlzc3BlbGxlZF93b3JkX2NsYXNzKSYmYS5hdHRyaWJ1dGVzW2Mub3B0aW9ucy5kYXRhX2F0dHJpYnV0ZV9uYW1lXSxkPWEuaGFzQ2xhc3MoYy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9jbGFzcykmJmEuYXR0cmlidXRlc1tjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlXTtjJiYoYnx8ZCkmJmRlbGV0ZSBhLm5hbWU7cmV0dXJuIGF9fX0pO2YmJmYuY2FsbChhLGgpfSxzY2F5dE1lbnVEZWZpbml0aW9uOmZ1bmN0aW9uKGEpe3ZhciBjPVxyXG50aGlzO2E9YS5zY2F5dDtyZXR1cm57c2NheXQ6e3NjYXl0X2lnbm9yZTp7bGFiZWw6YS5nZXRMb2NhbChcImJ0bl9pZ25vcmVcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6MSxleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQuaWdub3JlV29yZCgpfX0sc2NheXRfaWdub3JlYWxsOntsYWJlbDphLmdldExvY2FsKFwiYnRuX2lnbm9yZUFsbFwiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjoyLGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC5pZ25vcmVBbGxXb3JkcygpfX0sc2NheXRfYWRkOntsYWJlbDphLmdldExvY2FsKFwiYnRuX2FkZFdvcmRcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6MyxleGVjOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc2NheXQ7c2V0VGltZW91dChmdW5jdGlvbigpe2IuYWRkV29yZFRvVXNlckRpY3Rpb25hcnkoKX0sMTApfX0sc2NheXRfb3B0aW9uOntsYWJlbDphLmdldExvY2FsKFwiYnRuX29wdGlvbnNcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6NCxcclxuZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cIm9wdGlvbnNcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX0sdmVyaWZpY2F0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLmNvbmZpZy5zY2F5dF91aVRhYnNbMF0/ITA6ITF9fSxzY2F5dF9sYW5ndWFnZTp7bGFiZWw6YS5nZXRMb2NhbChcImJ0bl9sYW5nc1wiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjo1LGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJsYW5nc1wiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfSx2ZXJpZmljYXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEuY29uZmlnLnNjYXl0X3VpVGFic1sxXT8hMDohMX19LHNjYXl0X2RpY3Rpb25hcnk6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5fZGljdGlvbmFyaWVzXCIpLGdyb3VwOlwic2NheXRfY29udHJvbFwiLG9yZGVyOjYsZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cclxuXCJkaWN0aW9uYXJpZXNcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX0sdmVyaWZpY2F0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLmNvbmZpZy5zY2F5dF91aVRhYnNbMl0/ITA6ITF9fSxzY2F5dF9hYm91dDp7bGFiZWw6YS5nZXRMb2NhbChcImJ0bl9hYm91dFwiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjo3LGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJhYm91dFwiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfX19LGdyYXl0OntncmF5dF9wcm9ibGVtZGVzY3JpcHRpb246e2xhYmVsOlwiR3JhbW1hciBwcm9ibGVtIGRlc2NyaXB0aW9uXCIsZ3JvdXA6XCJncmF5dF9kZXNjcmlwdGlvblwiLG9yZGVyOjEsc3RhdGU6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsZXhlYzpmdW5jdGlvbihhKXt9fSxncmF5dF9pZ25vcmU6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5faWdub3JlXCIpLGdyb3VwOlwiZ3JheXRfY29udHJvbFwiLFxyXG5vcmRlcjoyLGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC5pZ25vcmVQaHJhc2UoKX19fX19LGJ1aWxkU3VnZ2VzdGlvbk1lbnVJdGVtczpmdW5jdGlvbihhLGMsZCl7dmFyIGI9e30sZT17fSxmPWQ/XCJ3b3JkXCI6XCJwaHJhc2VcIixnPWQ/XCJzdGFydEdyYW1tYXJDaGVja1wiOlwic3RhcnRTcGVsbENoZWNrXCIsaD1hLnNjYXl0O2lmKDA8Yy5sZW5ndGgmJlwibm9fYW55X3N1Z2dlc3Rpb25zXCIhPT1jWzBdKWlmKGQpZm9yKGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGs9XCJzY2F5dF9zdWdnZXN0X1wiK0NLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnNbZF0ucmVwbGFjZShcIiBcIixcIl9cIik7YS5hZGRDb21tYW5kKGssdGhpcy5jcmVhdGVDb21tYW5kKENLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnNbZF0sZixnKSk7ZDxhLmNvbmZpZy5zY2F5dF9tYXhTdWdnZXN0aW9ucz8oYS5hZGRNZW51SXRlbShrLHtsYWJlbDpjW2RdLGNvbW1hbmQ6ayxncm91cDpcInNjYXl0X3N1Z2dlc3RcIixcclxub3JkZXI6ZCsxfSksYltrXT1DS0VESVRPUi5UUklTVEFURV9PRkYpOihhLmFkZE1lbnVJdGVtKGsse2xhYmVsOmNbZF0sY29tbWFuZDprLGdyb3VwOlwic2NheXRfbW9yZXN1Z2dlc3RcIixvcmRlcjpkKzF9KSxlW2tdPUNLRURJVE9SLlRSSVNUQVRFX09GRixcIm9uXCI9PT1hLmNvbmZpZy5zY2F5dF9tb3JlU3VnZ2VzdGlvbnMmJihhLmFkZE1lbnVJdGVtKFwic2NheXRfbW9yZXN1Z2dlc3RcIix7bGFiZWw6aC5nZXRMb2NhbChcImJ0bl9tb3JlU3VnZ2VzdGlvbnNcIiksZ3JvdXA6XCJzY2F5dF9tb3Jlc3VnZ2VzdFwiLG9yZGVyOjEwLGdldEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSksYi5zY2F5dF9tb3Jlc3VnZ2VzdD1DS0VESVRPUi5UUklTVEFURV9PRkYpKX1lbHNlIGZvcihkPTA7ZDxjLmxlbmd0aDtkKyspaz1cImdyYXl0X3N1Z2dlc3RfXCIrQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9uc1tkXS5yZXBsYWNlKFwiIFwiLFwiX1wiKSxhLmFkZENvbW1hbmQoayx0aGlzLmNyZWF0ZUNvbW1hbmQoQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9uc1tkXSxcclxuZixnKSksYS5hZGRNZW51SXRlbShrLHtsYWJlbDpjW2RdLGNvbW1hbmQ6ayxncm91cDpcImdyYXl0X3N1Z2dlc3RcIixvcmRlcjpkKzF9KSxiW2tdPUNLRURJVE9SLlRSSVNUQVRFX09GRjtlbHNlIGIubm9fc2NheXRfc3VnZ2VzdD1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxhLmFkZENvbW1hbmQoXCJub19zY2F5dF9zdWdnZXN0XCIse2V4ZWM6ZnVuY3Rpb24oKXt9fSksYS5hZGRNZW51SXRlbShcIm5vX3NjYXl0X3N1Z2dlc3RcIix7bGFiZWw6aC5nZXRMb2NhbChcImJ0bl9ub1N1Z2dlc3Rpb25zXCIpfHxcIm5vX3NjYXl0X3N1Z2dlc3RcIixjb21tYW5kOlwibm9fc2NheXRfc3VnZ2VzdFwiLGdyb3VwOlwic2NheXRfc3VnZ2VzdFwiLG9yZGVyOjB9KTtyZXR1cm4gYn0sbWVudUdlbmVyYXRvcjpmdW5jdGlvbihhLGMpe3ZhciBkPWEuc2NheXQsYj10aGlzLnNjYXl0TWVudURlZmluaXRpb24oYSksZT17fSxmPWEuY29uZmlnLnNjYXl0X2NvbnRleHRDb21tYW5kcy5zcGxpdChcInxcIiksZz1jLmdldEF0dHJpYnV0ZShkLmdldExhbmdBdHRyaWJ1dGUoKSl8fFxyXG5kLmdldExhbmcoKSxoLGs7aD1kLmlzU2NheXROb2RlKGMpO2s9ZC5pc0dyYXl0Tm9kZShjKTtoPyhiPWIuc2NheXQsZT1jLmdldEF0dHJpYnV0ZShkLmdldFNjYXl0Tm9kZUF0dHJpYnV0ZU5hbWUoKSksZC5maXJlKFwiZ2V0U3VnZ2VzdGlvbnNMaXN0XCIse2xhbmc6Zyx3b3JkOmV9KSxlPXRoaXMuYnVpbGRTdWdnZXN0aW9uTWVudUl0ZW1zKGEsQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9ucyxoKSk6ayYmKGI9Yi5ncmF5dCxlPWMuZ2V0QXR0cmlidXRlKGQuZ2V0R3JheXROb2RlQXR0cmlidXRlTmFtZSgpKSxrPWQuZ2V0UHJvYmxlbURlc2NyaXB0aW9uVGV4dChlLGcpLGIuZ3JheXRfcHJvYmxlbWRlc2NyaXB0aW9uJiZrJiYoYi5ncmF5dF9wcm9ibGVtZGVzY3JpcHRpb24ubGFiZWw9ayksZC5maXJlKFwiZ2V0R3JhbW1hclN1Z2dlc3Rpb25zTGlzdFwiLHtsYW5nOmcscGhyYXNlOmV9KSxlPXRoaXMuYnVpbGRTdWdnZXN0aW9uTWVudUl0ZW1zKGEsQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9ucyxcclxuaCkpO2lmKGgmJlwib2ZmXCI9PWEuY29uZmlnLnNjYXl0X2NvbnRleHRDb21tYW5kcylyZXR1cm4gZTtmb3IodmFyIGwgaW4gYiloJiYtMT09Q0tFRElUT1IudG9vbHMuaW5kZXhPZihmLGwucmVwbGFjZShcInNjYXl0X1wiLFwiXCIpKSYmXCJhbGxcIiE9YS5jb25maWcuc2NheXRfY29udGV4dENvbW1hbmRzfHwoZVtsXT1cInVuZGVmaW5lZFwiIT10eXBlb2YgYltsXS5zdGF0ZT9iW2xdLnN0YXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRixcImZ1bmN0aW9uXCIhPT10eXBlb2YgYltsXS52ZXJpZmljYXRpb258fGJbbF0udmVyaWZpY2F0aW9uKGEpfHxkZWxldGUgZVtsXSxhLmFkZENvbW1hbmQobCx7ZXhlYzpiW2xdLmV4ZWN9KSxhLmFkZE1lbnVJdGVtKGwse2xhYmVsOmEubGFuZy5zY2F5dFtiW2xdLmxhYmVsXXx8YltsXS5sYWJlbCxjb21tYW5kOmwsZ3JvdXA6YltsXS5ncm91cCxvcmRlcjpiW2xdLm9yZGVyfSkpO3JldHVybiBlfSxjcmVhdGVDb21tYW5kOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm57ZXhlYzpmdW5jdGlvbihiKXtiPVxyXG5iLnNjYXl0O3ZhciBlPXt9O2VbY109YTtiLnJlcGxhY2VTZWxlY3Rpb25Ob2RlKGUpO1wic3RhcnRHcmFtbWFyQ2hlY2tcIj09PWQmJmIucmVtb3ZlTWFya3VwSW5TZWxlY3Rpb25Ob2RlKHtncmFtbWFyT25seTohMH0pO2IuZmlyZShkKX19fX0pO1xyXG5DS0VESVRPUi5wbHVnaW5zLnNjYXl0PXtzdGF0ZTp7c2NheXQ6e30sZ3JheXQ6e319LHN1Z2dlc3Rpb25zOltdLGxvYWRpbmdIZWxwZXI6e2xvYWRPcmRlcjpbXX0saXNMb2FkaW5nOiExLG9wdGlvbnM6e2Rpc2FibGluZ0NvbW1hbmRFeGVjOntzb3VyY2U6ITAsbmV3cGFnZTohMCx0ZW1wbGF0ZXM6ITB9LGRhdGFfYXR0cmlidXRlX25hbWU6XCJkYXRhLXNjYXl0LXdvcmRcIixtaXNzcGVsbGVkX3dvcmRfY2xhc3M6XCJzY2F5dC1taXNzcGVsbC13b3JkXCIscHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlOlwiZGF0YS1ncmF5dC1waHJhc2VcIixwcm9ibGVtX2dyYW1tYXJfY2xhc3M6XCJncmFtbS1wcm9ibGVtXCJ9LGJhY2tDb21wYXRpYmlsaXR5TWFwOntzY2F5dF9zZXJ2aWNlX3Byb3RvY29sOlwic2NheXRfc2VydmljZVByb3RvY29sXCIsc2NheXRfc2VydmljZV9ob3N0Olwic2NheXRfc2VydmljZUhvc3RcIixzY2F5dF9zZXJ2aWNlX3BvcnQ6XCJzY2F5dF9zZXJ2aWNlUG9ydFwiLHNjYXl0X3NlcnZpY2VfcGF0aDpcInNjYXl0X3NlcnZpY2VQYXRoXCIsXHJcbnNjYXl0X2N1c3RvbWVyaWQ6XCJzY2F5dF9jdXN0b21lcklkXCJ9LHJlcGxhY2VPbGRPcHRpb25zTmFtZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjIGluIGEpYyBpbiB0aGlzLmJhY2tDb21wYXRpYmlsaXR5TWFwJiYoYVt0aGlzLmJhY2tDb21wYXRpYmlsaXR5TWFwW2NdXT1hW2NdLGRlbGV0ZSBhW2NdKX0sY3JlYXRlU2NheXQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPUNLRURJVE9SLnBsdWdpbnMuc2NheXQ7dGhpcy5sb2FkU2NheXRMaWJyYXJ5KGEsZnVuY3Rpb24oYSl7dmFyIGU9YS53aW5kb3cmJmEud2luZG93LmdldEZyYW1lKCl8fGEuZWRpdGFibGUoKTtlPyhlPXtsYW5nOmEuY29uZmlnLnNjYXl0X3NMYW5nLGNvbnRhaW5lcjplLiQsY3VzdG9tRGljdGlvbmFyeTphLmNvbmZpZy5zY2F5dF9jdXN0b21EaWN0aW9uYXJ5SWRzLHVzZXJEaWN0aW9uYXJ5TmFtZTphLmNvbmZpZy5zY2F5dF91c2VyRGljdGlvbmFyeU5hbWUsbG9jYWxpemF0aW9uOmEubGFuZ0NvZGUsY3VzdG9tZXJfaWQ6YS5jb25maWcuc2NheXRfY3VzdG9tZXJJZCxcclxuZGVidWc6YS5jb25maWcuc2NheXRfZGVidWcsZGF0YV9hdHRyaWJ1dGVfbmFtZTpjLm9wdGlvbnMuZGF0YV9hdHRyaWJ1dGVfbmFtZSxtaXNzcGVsbGVkX3dvcmRfY2xhc3M6Yy5vcHRpb25zLm1pc3NwZWxsZWRfd29yZF9jbGFzcyxwcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGU6Yy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9kYXRhX2F0dHJpYnV0ZSxwcm9ibGVtX2dyYW1tYXJfY2xhc3M6Yy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9jbGFzcyxcIm9wdGlvbnMtdG8tcmVzdG9yZVwiOmEuY29uZmlnLnNjYXl0X2Rpc2FibGVPcHRpb25zU3RvcmFnZSxmb2N1c2VkOmEuZWRpdGFibGUoKS5oYXNGb2N1cyxpZ25vcmVFbGVtZW50c1JlZ2V4OmEuY29uZmlnLnNjYXl0X2VsZW1lbnRzVG9JZ25vcmUsbWluV29yZExlbmd0aDphLmNvbmZpZy5zY2F5dF9taW5Xb3JkTGVuZ3RoLG11bHRpTGFuZ3VhZ2VNb2RlOmEuY29uZmlnLnNjYXl0X211bHRpTGFuZ3VhZ2VNb2RlLG11bHRpTGFuZ3VhZ2VTdHlsZXM6YS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZVN0eWxlcyxcclxuZ3JheXRBdXRvU3RhcnR1cDpkLnN0YXRlLmdyYXl0W2EubmFtZV19LGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQcm90b2NvbCYmKGUuc2VydmljZV9wcm90b2NvbD1hLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUHJvdG9jb2wpLGEuY29uZmlnLnNjYXl0X3NlcnZpY2VIb3N0JiYoZS5zZXJ2aWNlX2hvc3Q9YS5jb25maWcuc2NheXRfc2VydmljZUhvc3QpLGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQb3J0JiYoZS5zZXJ2aWNlX3BvcnQ9YS5jb25maWcuc2NheXRfc2VydmljZVBvcnQpLGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQYXRoJiYoZS5zZXJ2aWNlX3BhdGg9YS5jb25maWcuc2NheXRfc2VydmljZVBhdGgpLFwiYm9vbGVhblwiPT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2lnbm9yZUFsbENhcHNXb3JkcyYmKGVbXCJpZ25vcmUtYWxsLWNhcHMtd29yZHNcIl09YS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzKSxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyYmXHJcbihlW1wiaWdub3JlLWRvbWFpbi1uYW1lc1wiXT1hLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyksXCJib29sZWFuXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTWl4ZWRDYXNlcyYmKGVbXCJpZ25vcmUtd29yZHMtd2l0aC1taXhlZC1jYXNlc1wiXT1hLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzKSxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhOdW1iZXJzJiYoZVtcImlnbm9yZS13b3Jkcy13aXRoLW51bWJlcnNcIl09YS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTnVtYmVycyksZT1uZXcgU0NBWVQuQ0tTQ0FZVChlLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30pLGUuc3Vic2NyaWJlKFwic3VnZ2VzdGlvbkxpc3RTZW5kXCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXt9LGQ9W10sYz0wO2M8YS5zdWdnZXN0aW9uTGlzdC5sZW5ndGg7YysrKWJbXCJ3b3JkX1wiK2Euc3VnZ2VzdGlvbkxpc3RbY11dfHxcclxuKGJbXCJ3b3JkX1wiK2Euc3VnZ2VzdGlvbkxpc3RbY11dPWEuc3VnZ2VzdGlvbkxpc3RbY10sZC5wdXNoKGEuc3VnZ2VzdGlvbkxpc3RbY10pKTtDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN1Z2dlc3Rpb25zPWR9KSxlLnN1YnNjcmliZShcInNlbGVjdGlvbklzQ2hhbmdlZFwiLGZ1bmN0aW9uKGQpe2EuZ2V0U2VsZWN0aW9uKCkuaXNMb2NrZWQmJmEubG9ja1NlbGVjdGlvbigpfSksZS5zdWJzY3JpYmUoXCJncmF5dFN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uKGMpe2Quc3RhdGUuZ3JheXRbYS5uYW1lXT1jLnN0YXRlfSksYS5zY2F5dD1lLGEuZmlyZShcInNjYXl0QnV0dG9uU3RhdGVcIixhLnJlYWRPbmx5P0NLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOkNLRURJVE9SLlRSSVNUQVRFX09OKSk6ZC5zdGF0ZS5zY2F5dFthLm5hbWVdPSExfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7YS5zY2F5dCYmYS5zY2F5dC5kZXN0cm95KCk7ZGVsZXRlIGEuc2NheXQ7YS5maXJlKFwic2NheXRCdXR0b25TdGF0ZVwiLFxyXG5DS0VESVRPUi5UUklTVEFURV9PRkYpfSxsb2FkU2NheXRMaWJyYXJ5OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcyxiLGU7dGhpcy5sb2FkaW5nSGVscGVyW2EubmFtZV18fChcInVuZGVmaW5lZFwiPT09dHlwZW9mIHdpbmRvdy5TQ0FZVHx8XCJmdW5jdGlvblwiIT09dHlwZW9mIHdpbmRvdy5TQ0FZVC5DS1NDQVlUPyh0aGlzLmxvYWRpbmdIZWxwZXJbYS5uYW1lXT1jLHRoaXMubG9hZGluZ0hlbHBlci5sb2FkT3JkZXIucHVzaChhLm5hbWUpLGI9bmV3IERhdGUsYj1iLmdldFRpbWUoKSxlPWEuY29uZmlnLnNjYXl0X3NyY1VybCxlKz0wPD1lLmluZGV4T2YoXCI/XCIpP1wiXCI6XCI/XCIrYix0aGlzLmxvYWRpbmdIZWxwZXIuY2tzY2F5dExvYWRpbmd8fChDS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChlLGZ1bmN0aW9uKGEpe2lmKGEpe0NLRURJVE9SLmZpcmVPbmNlKFwic2NheXRSZWFkeVwiKTtmb3IodmFyIGI9MDtiPGQubG9hZGluZ0hlbHBlci5sb2FkT3JkZXIubGVuZ3RoO2IrKyl7YT1kLmxvYWRpbmdIZWxwZXIubG9hZE9yZGVyW2JdO1xyXG5pZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5sb2FkaW5nSGVscGVyW2FdKWQubG9hZGluZ0hlbHBlclthXShDS0VESVRPUi5pbnN0YW5jZXNbYV0pO2RlbGV0ZSBkLmxvYWRpbmdIZWxwZXJbYV19ZC5sb2FkaW5nSGVscGVyLmxvYWRPcmRlcj1bXX19KSx0aGlzLmxvYWRpbmdIZWxwZXIuY2tzY2F5dExvYWRpbmc9ITApKTp3aW5kb3cuU0NBWVQmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiB3aW5kb3cuU0NBWVQuQ0tTQ0FZVCYmKENLRURJVE9SLmZpcmVPbmNlKFwic2NheXRSZWFkeVwiKSxhLnNjYXl0fHxcImZ1bmN0aW9uXCI9PT10eXBlb2YgYyYmYyhhKSkpfX07XHJcbkNLRURJVE9SLm9uKFwiZGlhbG9nRGVmaW5pdGlvblwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZGF0YS5uYW1lO2E9YS5kYXRhLmRlZmluaXRpb24uZGlhbG9nO2lmKFwic2NheXREaWFsb2dcIj09PWMpYS5vbihcImNhbmNlbFwiLGZ1bmN0aW9uKGEpe3JldHVybiExfSx0aGlzLG51bGwsLTEpO2lmKFwiY2hlY2tzcGVsbFwiPT09YylhLm9uKFwiY2FuY2VsXCIsZnVuY3Rpb24oYSl7YT1hLnNlbmRlciYmYS5zZW5kZXIuZ2V0UGFyZW50RWRpdG9yKCk7dmFyIGI9Q0tFRElUT1IucGx1Z2lucy5zY2F5dCxjPWEuc2NheXQ7YyYmYi5zdGF0ZS5zY2F5dFthLm5hbWVdJiZjLnNldE1hcmt1cFBhdXNlZCYmYy5zZXRNYXJrdXBQYXVzZWQoITEpO2EudW5sb2NrU2VsZWN0aW9uKCl9LHRoaXMsbnVsbCwtMik7aWYoXCJsaW5rXCI9PT1jKWEub24oXCJva1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuc2VuZGVyJiZhLnNlbmRlci5nZXRQYXJlbnRFZGl0b3IoKTtiJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5maXJlKFwicmVsb2FkTWFya3VwU2NheXRcIixcclxue3JlbW92ZU9wdGlvbnM6e3JlbW92ZUluc2lkZTohMCxmb3JjZUJvb2ttYXJrOiEwfSx0aW1lb3V0OjB9KX0sMCl9KX0pO1xyXG5DS0VESVRPUi5vbihcInNjYXl0UmVhZHlcIixmdW5jdGlvbigpe2lmKCEwPT09Q0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZUNoZWNrRGlydHkpe3ZhciBhPUNLRURJVE9SLmVkaXRvci5wcm90b3R5cGU7YS5jaGVja0RpcnR5PUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGEuY2hlY2tEaXJ0eSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1udWxsLGM9dGhpcy5zY2F5dDtpZihDS0VESVRPUi5wbHVnaW5zLnNjYXl0JiZDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN0YXRlLnNjYXl0W3RoaXMubmFtZV0mJnRoaXMuc2NheXQpe2lmKGI9XCJyZWFkeVwiPT10aGlzLnN0YXR1cyl2YXIgZj1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcodGhpcy5nZXRTbmFwc2hvdCgpKSxjPWMucmVtb3ZlTWFya3VwRnJvbVN0cmluZyh0aGlzLl8ucHJldmlvdXNWYWx1ZSksYj1iJiZjIT09Zn1lbHNlIGI9YS5jYWxsKHRoaXMpO3JldHVybiBifX0pO2EucmVzZXREaXJ0eT1DS0VESVRPUi50b29scy5vdmVycmlkZShhLnJlc2V0RGlydHksXHJcbmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPXRoaXMuc2NheXQ7Q0tFRElUT1IucGx1Z2lucy5zY2F5dCYmQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdGF0ZS5zY2F5dFt0aGlzLm5hbWVdJiZ0aGlzLnNjYXl0P3RoaXMuXy5wcmV2aW91c1ZhbHVlPWIucmVtb3ZlTWFya3VwRnJvbVN0cmluZyh0aGlzLmdldFNuYXBzaG90KCkpOmEuY2FsbCh0aGlzKX19KX1pZighMD09PUNLRURJVE9SLmNvbmZpZy5zY2F5dF9oYW5kbGVVbmRvUmVkbyl7dmFyIGE9Q0tFRElUT1IucGx1Z2lucy51bmRvLkltYWdlLnByb3RvdHlwZSxjPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZXF1YWxzQ29udGVudD9cImVxdWFsc0NvbnRlbnRcIjpcImVxdWFsc1wiO2FbY109Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoYVtjXSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5lZGl0b3Iuc2NheXQsZj10aGlzLmNvbnRlbnRzLGc9Yi5jb250ZW50cyxoPW51bGw7Q0tFRElUT1IucGx1Z2lucy5zY2F5dCYmXHJcbkNLRURJVE9SLnBsdWdpbnMuc2NheXQuc3RhdGUuc2NheXRbYi5lZGl0b3IubmFtZV0mJmIuZWRpdG9yLnNjYXl0JiYodGhpcy5jb250ZW50cz1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcoZil8fFwiXCIsYi5jb250ZW50cz1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcoZyl8fFwiXCIpO2g9YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb250ZW50cz1mO2IuY29udGVudHM9ZztyZXR1cm4gaH19KX19KTsoZnVuY3Rpb24oKXtDS0VESVRPUi5wbHVnaW5zLmFkZChcInN0eWxlc2NvbWJvXCIse3JlcXVpcmVzOlwicmljaGNvbWJvXCIsaW5pdDpmdW5jdGlvbihjKXt2YXIgbD1jLmNvbmZpZyxnPWMubGFuZy5zdHlsZXNjb21ibyxmPXt9LGs9W10sbT1bXTtjLm9uKFwic3R5bGVzU2V0XCIsZnVuY3Rpb24oYil7aWYoYj1iLmRhdGEuc3R5bGVzKXtmb3IodmFyIGEsaCxkLGU9MCxuPWIubGVuZ3RoO2U8bjtlKyspKGE9YltlXSxjLmJsb2NrbGVzcyYmYS5lbGVtZW50IGluIENLRURJVE9SLmR0ZC4kYmxvY2t8fChoPWEubmFtZSxhPW5ldyBDS0VESVRPUi5zdHlsZShhKSxjLmZpbHRlci5jdXN0b21Db25maWcmJiFjLmZpbHRlci5jaGVjayhhKSkpfHwoYS5fbmFtZT1oLGEuXy5lbnRlck1vZGU9bC5lbnRlck1vZGUsYS5fLnR5cGU9ZD1hLmFzc2lnbmVkVG98fGEudHlwZSxhLl8ud2VpZ2h0PWUrMUUzKihkPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/MTpkPT1DS0VESVRPUi5TVFlMRV9CTE9DSz8yOjMpLGZbaF09XHJcbmEsay5wdXNoKGEpLG0ucHVzaChhKSk7ay5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuXy53ZWlnaHQtYi5fLndlaWdodH0pfX0pO2MudWkuYWRkUmljaENvbWJvKFwiU3R5bGVzXCIse2xhYmVsOmcubGFiZWwsdGl0bGU6Zy5wYW5lbFRpdGxlLHRvb2xiYXI6XCJzdHlsZXMsMTBcIixhbGxvd2VkQ29udGVudDptLHBhbmVsOntjc3M6W0NLRURJVE9SLnNraW4uZ2V0UGF0aChcImVkaXRvclwiKV0uY29uY2F0KGwuY29udGVudHNDc3MpLG11bHRpU2VsZWN0OiEwLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmcucGFuZWxUaXRsZX19LGluaXQ6ZnVuY3Rpb24oKXt2YXIgYixhLGMsZCxlLGY7ZT0wO2ZvcihmPWsubGVuZ3RoO2U8ZjtlKyspYj1rW2VdLGE9Yi5fbmFtZSxkPWIuXy50eXBlLGQhPWMmJih0aGlzLnN0YXJ0R3JvdXAoZ1tcInBhbmVsVGl0bGVcIitTdHJpbmcoZCldKSxjPWQpLHRoaXMuYWRkKGEsYi50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/YTpiLmJ1aWxkUHJldmlldygpLGEpO1xyXG50aGlzLmNvbW1pdCgpfSxvbkNsaWNrOmZ1bmN0aW9uKGIpe2MuZm9jdXMoKTtjLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yj1mW2JdO3ZhciBhPWMuZWxlbWVudFBhdGgoKTtjW2IuY2hlY2tBY3RpdmUoYSxjKT9cInJlbW92ZVN0eWxlXCI6XCJhcHBseVN0eWxlXCJdKGIpO2MuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXtjLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRWYWx1ZSgpO2I9Yi5kYXRhLnBhdGguZWxlbWVudHM7Zm9yKHZhciBoPTAsZD1iLmxlbmd0aCxlO2g8ZDtoKyspe2U9YltoXTtmb3IodmFyIGcgaW4gZilpZihmW2ddLmNoZWNrRWxlbWVudFJlbW92YWJsZShlLCEwLGMpKXtnIT1hJiZ0aGlzLnNldFZhbHVlKGcpO3JldHVybn19dGhpcy5zZXRWYWx1ZShcIlwiKX0sdGhpcyl9LG9uT3BlbjpmdW5jdGlvbigpe3ZhciBiPWMuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRFbGVtZW50KCksYj1jLmVsZW1lbnRQYXRoKGIpLFxyXG5hPVswLDAsMCwwXTt0aGlzLnNob3dBbGwoKTt0aGlzLnVubWFya0FsbCgpO2Zvcih2YXIgaCBpbiBmKXt2YXIgZD1mW2hdLGU9ZC5fLnR5cGU7ZC5jaGVja0FwcGxpY2FibGUoYixjLGMuYWN0aXZlRmlsdGVyKT9hW2VdKys6dGhpcy5oaWRlSXRlbShoKTtkLmNoZWNrQWN0aXZlKGIsYykmJnRoaXMubWFyayhoKX1hW0NLRURJVE9SLlNUWUxFX0JMT0NLXXx8dGhpcy5oaWRlR3JvdXAoZ1tcInBhbmVsVGl0bGVcIitTdHJpbmcoQ0tFRElUT1IuU1RZTEVfQkxPQ0spXSk7YVtDS0VESVRPUi5TVFlMRV9JTkxJTkVdfHx0aGlzLmhpZGVHcm91cChnW1wicGFuZWxUaXRsZVwiK1N0cmluZyhDS0VESVRPUi5TVFlMRV9JTkxJTkUpXSk7YVtDS0VESVRPUi5TVFlMRV9PQkpFQ1RdfHx0aGlzLmhpZGVHcm91cChnW1wicGFuZWxUaXRsZVwiK1N0cmluZyhDS0VESVRPUi5TVFlMRV9PQkpFQ1QpXSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgYj1jLmVsZW1lbnRQYXRoKCk7aWYoYil7Zm9yKHZhciBhIGluIGYpaWYoZlthXS5jaGVja0FwcGxpY2FibGUoYixcclxuYyxjLmFjdGl2ZUZpbHRlcikpcmV0dXJuO3RoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX0scmVzZXQ6ZnVuY3Rpb24oKXtmPXt9O2s9W119fSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGsoYyl7cmV0dXJue2VkaXRvckZvY3VzOiExLGNhblVuZG86ITEsbW9kZXM6e3d5c2l3eWc6MX0sZXhlYzpmdW5jdGlvbihkKXtpZihkLmVkaXRhYmxlKCkuaGFzRm9jdXMpe3ZhciBlPWQuZ2V0U2VsZWN0aW9uKCksYjtpZihiPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGUuZ2V0Q29tbW9uQW5jZXN0b3IoKSxlLnJvb3QpKS5jb250YWlucyh7dGQ6MSx0aDoxfSwxKSl7dmFyIGU9ZC5jcmVhdGVSYW5nZSgpLGE9Q0tFRElUT1IudG9vbHMudHJ5VGhlc2UoZnVuY3Rpb24oKXt2YXIgYT1iLmdldFBhcmVudCgpLiQuY2VsbHNbYi4kLmNlbGxJbmRleCsoYz8tMToxKV07YS5wYXJlbnROb2RlLnBhcmVudE5vZGU7cmV0dXJuIGF9LGZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRQYXJlbnQoKSxhPWEuZ2V0QXNjZW5kYW50KFwidGFibGVcIikuJC5yb3dzW2EuJC5yb3dJbmRleCsoYz8tMToxKV07cmV0dXJuIGEuY2VsbHNbYz9hLmNlbGxzLmxlbmd0aC0xOlxyXG4wXX0pO2lmKGF8fGMpaWYoYSlhPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKSxlLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSksZS5jaGVja1N0YXJ0T2ZCbG9jaygpJiZlLmNoZWNrRW5kT2ZCbG9jaygpfHxlLnNlbGVjdE5vZGVDb250ZW50cyhhKTtlbHNlIHJldHVybiEwO2Vsc2V7Zm9yKHZhciBmPWIuZ2V0QXNjZW5kYW50KFwidGFibGVcIikuJCxhPWIuZ2V0UGFyZW50KCkuJC5jZWxscyxmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChmLmluc2VydFJvdygtMSksZC5kb2N1bWVudCksZz0wLGg9YS5sZW5ndGg7ZzxoO2crKylmLmFwcGVuZCgobmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGFbZ10sZC5kb2N1bWVudCkpLmNsb25lKCExLCExKSkuYXBwZW5kQm9ndXMoKTtlLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoZil9ZS5zZWxlY3QoITApO3JldHVybiEwfX1yZXR1cm4hMX19fXZhciBoPXtlZGl0b3JGb2N1czohMSxtb2Rlczp7d3lzaXd5ZzoxLHNvdXJjZToxfX0sZz17ZXhlYzpmdW5jdGlvbihjKXtjLmNvbnRhaW5lci5mb2N1c05leHQoITAsXHJcbmMudGFiSW5kZXgpfX0sZj17ZXhlYzpmdW5jdGlvbihjKXtjLmNvbnRhaW5lci5mb2N1c1ByZXZpb3VzKCEwLGMudGFiSW5kZXgpfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ0YWJcIix7aW5pdDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9ITEhPT1jLmNvbmZpZy5lbmFibGVUYWJLZXlUb29scyxlPWMuY29uZmlnLnRhYlNwYWNlc3x8MCxiPVwiXCI7ZS0tOyliKz1cIsKgXCI7aWYoYiljLm9uKFwia2V5XCIsZnVuY3Rpb24oYSl7OT09YS5kYXRhLmtleUNvZGUmJihjLmluc2VydFRleHQoYiksYS5jYW5jZWwoKSl9KTtpZihkKWMub24oXCJrZXlcIixmdW5jdGlvbihhKXsoOT09YS5kYXRhLmtleUNvZGUmJmMuZXhlY0NvbW1hbmQoXCJzZWxlY3ROZXh0Q2VsbFwiKXx8YS5kYXRhLmtleUNvZGU9PUNLRURJVE9SLlNISUZUKzkmJmMuZXhlY0NvbW1hbmQoXCJzZWxlY3RQcmV2aW91c0NlbGxcIikpJiZhLmNhbmNlbCgpfSk7Yy5hZGRDb21tYW5kKFwiYmx1clwiLENLRURJVE9SLnRvb2xzLmV4dGVuZChnLGgpKTtjLmFkZENvbW1hbmQoXCJibHVyQmFja1wiLFxyXG5DS0VESVRPUi50b29scy5leHRlbmQoZixoKSk7Yy5hZGRDb21tYW5kKFwic2VsZWN0TmV4dENlbGxcIixrKCkpO2MuYWRkQ29tbWFuZChcInNlbGVjdFByZXZpb3VzQ2VsbFwiLGsoITApKX19KX0pKCk7XHJcbkNLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5mb2N1c05leHQ9ZnVuY3Rpb24oayxoKXt2YXIgZz12b2lkIDA9PT1oP3RoaXMuZ2V0VGFiSW5kZXgoKTpoLGYsYyxkLGUsYixhO2lmKDA+PWcpZm9yKGI9dGhpcy5nZXROZXh0U291cmNlTm9kZShrLENLRURJVE9SLk5PREVfRUxFTUVOVCk7Yjspe2lmKGIuaXNWaXNpYmxlKCkmJjA9PT1iLmdldFRhYkluZGV4KCkpe2Q9YjticmVha31iPWIuZ2V0TmV4dFNvdXJjZU5vZGUoITEsQ0tFRElUT1IuTk9ERV9FTEVNRU5UKX1lbHNlIGZvcihiPXRoaXMuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCkuZ2V0Rmlyc3QoKTtiPWIuZ2V0TmV4dFNvdXJjZU5vZGUoITEsQ0tFRElUT1IuTk9ERV9FTEVNRU5UKTspe2lmKCFmKWlmKCFjJiZiLmVxdWFscyh0aGlzKSl7aWYoYz0hMCxrKXtpZighKGI9Yi5nZXROZXh0U291cmNlTm9kZSghMCxDS0VESVRPUi5OT0RFX0VMRU1FTlQpKSlicmVhaztmPTF9fWVsc2UgYyYmIXRoaXMuY29udGFpbnMoYikmJlxyXG4oZj0xKTtpZihiLmlzVmlzaWJsZSgpJiYhKDA+KGE9Yi5nZXRUYWJJbmRleCgpKSkpe2lmKGYmJmE9PWcpe2Q9YjticmVha31hPmcmJighZHx8IWV8fGE8ZSk/KGQ9YixlPWEpOmR8fDAhPT1hfHwoZD1iLGU9YSl9fWQmJmQuZm9jdXMoKX07XHJcbkNLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5mb2N1c1ByZXZpb3VzPWZ1bmN0aW9uKGssaCl7Zm9yKHZhciBnPXZvaWQgMD09PWg/dGhpcy5nZXRUYWJJbmRleCgpOmgsZixjLGQsZT0wLGIsYT10aGlzLmdldERvY3VtZW50KCkuZ2V0Qm9keSgpLmdldExhc3QoKTthPWEuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCExLENLRURJVE9SLk5PREVfRUxFTUVOVCk7KXtpZighZilpZighYyYmYS5lcXVhbHModGhpcykpe2lmKGM9ITAsayl7aWYoIShhPWEuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCEwLENLRURJVE9SLk5PREVfRUxFTUVOVCkpKWJyZWFrO2Y9MX19ZWxzZSBjJiYhdGhpcy5jb250YWlucyhhKSYmKGY9MSk7aWYoYS5pc1Zpc2libGUoKSYmISgwPihiPWEuZ2V0VGFiSW5kZXgoKSkpKWlmKDA+PWcpe2lmKGYmJjA9PT1iKXtkPWE7YnJlYWt9Yj5lJiYoZD1hLGU9Yil9ZWxzZXtpZihmJiZiPT1nKXtkPWE7YnJlYWt9YjxnJiYoIWR8fGI+ZSkmJihkPWEsZT1iKX19ZCYmZC5mb2N1cygpfTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInRhYmxlXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBlKGEpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoYXx8e30se2NvbnRleHRTZW5zaXRpdmU6MSxyZWZyZXNoOmZ1bmN0aW9uKGEsZil7dGhpcy5zZXRTdGF0ZShmLmNvbnRhaW5zKFwidGFibGVcIiwxKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX0pfWlmKCFhLmJsb2NrbGVzcyl7dmFyIGM9YS5sYW5nLnRhYmxlO2EuYWRkQ29tbWFuZChcInRhYmxlXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJ0YWJsZVwiLHtjb250ZXh0OlwidGFibGVcIixhbGxvd2VkQ29udGVudDpcInRhYmxle3dpZHRoLGhlaWdodH1bYWxpZ24sYm9yZGVyLGNlbGxwYWRkaW5nLGNlbGxzcGFjaW5nLHN1bW1hcnldO2NhcHRpb24gdGJvZHkgdGhlYWQgdGZvb3Q7dGggdGQgdHJbc2NvcGVdO1wiKyhhLnBsdWdpbnMuZGlhbG9nYWR2dGFiP1xyXG5cInRhYmxlXCIrYS5wbHVnaW5zLmRpYWxvZ2FkdnRhYi5hbGxvd2VkQ29udGVudCgpOlwiXCIpLHJlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsY29udGVudFRyYW5zZm9ybWF0aW9uczpbW1widGFibGV7d2lkdGh9OiBzaXplVG9TdHlsZVwiLFwidGFibGVbd2lkdGhdOiBzaXplVG9BdHRyaWJ1dGVcIl1dfSkpO2EuYWRkQ29tbWFuZChcInRhYmxlUHJvcGVydGllc1wiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwidGFibGVQcm9wZXJ0aWVzXCIsZSgpKSk7YS5hZGRDb21tYW5kKFwidGFibGVEZWxldGVcIixlKHtleGVjOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWxlbWVudFBhdGgoKS5jb250YWlucyhcInRhYmxlXCIsMSk7aWYoYil7dmFyIGQ9Yi5nZXRQYXJlbnQoKSxjPWEuZWRpdGFibGUoKTsxIT1kLmdldENoaWxkQ291bnQoKXx8ZC5pcyhcInRkXCIsXCJ0aFwiKXx8ZC5lcXVhbHMoYyl8fChiPWQpO2E9YS5jcmVhdGVSYW5nZSgpO2EubW92ZVRvUG9zaXRpb24oYixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpO1xyXG5iLnJlbW92ZSgpO2Euc2VsZWN0KCl9fX0pKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJUYWJsZVwiLHtsYWJlbDpjLnRvb2xiYXIsY29tbWFuZDpcInRhYmxlXCIsdG9vbGJhcjpcImluc2VydCwzMFwifSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcInRhYmxlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy90YWJsZS5qc1wiKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwidGFibGVQcm9wZXJ0aWVzXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy90YWJsZS5qc1wiKTthLmFkZE1lbnVJdGVtcyYmYS5hZGRNZW51SXRlbXMoe3RhYmxlOntsYWJlbDpjLm1lbnUsY29tbWFuZDpcInRhYmxlUHJvcGVydGllc1wiLGdyb3VwOlwidGFibGVcIixvcmRlcjo1fSx0YWJsZWRlbGV0ZTp7bGFiZWw6Yy5kZWxldGVUYWJsZSxjb21tYW5kOlwidGFibGVEZWxldGVcIixncm91cDpcInRhYmxlXCIsb3JkZXI6MX19KTthLm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihhKXthLmRhdGEuZWxlbWVudC5pcyhcInRhYmxlXCIpJiYoYS5kYXRhLmRpYWxvZz1cclxuXCJ0YWJsZVByb3BlcnRpZXNcIil9KTthLmNvbnRleHRNZW51JiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKCl7cmV0dXJue3RhYmxlZGVsZXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fSl9fX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7ZnVuY3Rpb24gZChhKXswPGIubGVuZ3RofHxhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IUMudGVzdChhLmdldE5hbWUoKSl8fGEuZ2V0Q3VzdG9tRGF0YShcInNlbGVjdGVkX2NlbGxcIil8fChDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoYyxhLFwic2VsZWN0ZWRfY2VsbFwiLCEwKSxiLnB1c2goYSkpfWU9ZS5nZXRSYW5nZXMoKTtmb3IodmFyIGI9W10sYz17fSxhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBmPWVbYV07aWYoZi5jb2xsYXBzZWQpZj1mLmdldENvbW1vbkFuY2VzdG9yKCksKGY9Zi5nZXRBc2NlbmRhbnQoXCJ0ZFwiLCEwKXx8Zi5nZXRBc2NlbmRhbnQoXCJ0aFwiLCEwKSkmJmIucHVzaChmKTtlbHNle3ZhciBmPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYpLGc7Zm9yKGYuZ3VhcmQ9ZDtnPWYubmV4dCgpOylnLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZy5pcyhDS0VESVRPUi5kdGQudGFibGUpfHwoZz1nLmdldEFzY2VuZGFudChcInRkXCIsXHJcbiEwKXx8Zy5nZXRBc2NlbmRhbnQoXCJ0aFwiLCEwKSkmJiFnLmdldEN1c3RvbURhdGEoXCJzZWxlY3RlZF9jZWxsXCIpJiYoQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGMsZyxcInNlbGVjdGVkX2NlbGxcIiwhMCksYi5wdXNoKGcpKX19Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGMpO3JldHVybiBifWZ1bmN0aW9uIHAoZSxkKXtmb3IodmFyIGI9dChlKSxjPWJbMF0sYT1jLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGM9Yy5nZXREb2N1bWVudCgpLGY9YlswXS5nZXRQYXJlbnQoKSxnPWYuJC5yb3dJbmRleCxiPWJbYi5sZW5ndGgtMV0saD1iLmdldFBhcmVudCgpLiQucm93SW5kZXgrYi4kLnJvd1NwYW4tMSxiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhLiQucm93c1toXSksZz1kP2c6aCxmPWQ/ZjpiLGI9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChhKSxhPWJbZ10sZz1kP2JbZy0xXTpiW2crMV0sYj1iWzBdLmxlbmd0aCxjPWMuY3JlYXRlRWxlbWVudChcInRyXCIpLFxyXG5oPTA7YVtoXSYmaDxiO2grKyl7dmFyIGs7MTxhW2hdLnJvd1NwYW4mJmcmJmFbaF09PWdbaF0/KGs9YVtoXSxrLnJvd1NwYW4rPTEpOihrPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYVtoXSkpLmNsb25lKCksay5yZW1vdmVBdHRyaWJ1dGUoXCJyb3dTcGFuXCIpLGsuYXBwZW5kQm9ndXMoKSxjLmFwcGVuZChrKSxrPWsuJCk7aCs9ay5jb2xTcGFuLTF9ZD9jLmluc2VydEJlZm9yZShmKTpjLmluc2VydEFmdGVyKGYpfWZ1bmN0aW9uIHUoZSl7aWYoZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5zZWxlY3Rpb24pe3ZhciBkPXQoZSksYj1kWzBdLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGM9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChiKTtlPWRbMF0uZ2V0UGFyZW50KCkuJC5yb3dJbmRleDtmb3IodmFyIGQ9ZFtkLmxlbmd0aC0xXSxhPWQuZ2V0UGFyZW50KCkuJC5yb3dJbmRleCtkLiQucm93U3Bhbi0xLGQ9W10sZj1lO2Y8PWE7ZisrKXtmb3IodmFyIGc9Y1tmXSxoPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChiLiQucm93c1tmXSksXHJcbms9MDtrPGcubGVuZ3RoO2srKyl7dmFyIGw9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGdba10pLG49bC5nZXRQYXJlbnQoKS4kLnJvd0luZGV4OzE9PWwuJC5yb3dTcGFuP2wucmVtb3ZlKCk6KC0tbC4kLnJvd1NwYW4sbj09ZiYmKG49Y1tmKzFdLG5bay0xXT9sLmluc2VydEFmdGVyKG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChuW2stMV0pKToobmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGIuJC5yb3dzW2YrMV0pKS5hcHBlbmQobCwxKSkpO2srPWwuJC5jb2xTcGFuLTF9ZC5wdXNoKGgpfWM9Yi4kLnJvd3M7Yj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoY1thKzFdfHwoMDxlP2NbZS0xXTpudWxsKXx8Yi4kLnBhcmVudE5vZGUpO2ZvcihmPWQubGVuZ3RoOzA8PWY7Zi0tKXUoZFtmXSk7cmV0dXJuIGJ9ZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50JiYoYj1lLmdldEFzY2VuZGFudChcInRhYmxlXCIpLDE9PWIuJC5yb3dzLmxlbmd0aD9iLnJlbW92ZSgpOmUucmVtb3ZlKCkpO1xyXG5yZXR1cm4gbnVsbH1mdW5jdGlvbiB2KGUsZCl7Zm9yKHZhciBiPWQ/SW5maW5pdHk6MCxjPTA7YzxlLmxlbmd0aDtjKyspe3ZhciBhO2E9ZVtjXTtmb3IodmFyIGY9ZCxnPWEuZ2V0UGFyZW50KCkuJC5jZWxscyxoPTAsaz0wO2s8Zy5sZW5ndGg7aysrKXt2YXIgbD1nW2tdLGg9aCsoZj8xOmwuY29sU3Bhbik7aWYobD09YS4kKWJyZWFrfWE9aC0xO2lmKGQ/YTxiOmE+YiliPWF9cmV0dXJuIGJ9ZnVuY3Rpb24gbShlLGQpe2Zvcih2YXIgYj10KGUpLGM9YlswXS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSxhPXYoYiwxKSxiPXYoYiksYT1kP2E6YixmPUNLRURJVE9SLnRvb2xzLmJ1aWxkVGFibGVNYXAoYyksYz1bXSxiPVtdLGc9Zi5sZW5ndGgsaD0wO2g8ZztoKyspYy5wdXNoKGZbaF1bYV0pLGIucHVzaChkP2ZbaF1bYS0xXTpmW2hdW2ErMV0pO2ZvcihoPTA7aDxnO2grKyljW2hdJiYoMTxjW2hdLmNvbFNwYW4mJmJbaF09PWNbaF0/KGE9Y1toXSxhLmNvbFNwYW4rPTEpOihhPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoY1toXSkpLmNsb25lKCksXHJcbmEucmVtb3ZlQXR0cmlidXRlKFwiY29sU3BhblwiKSxhLmFwcGVuZEJvZ3VzKCksYVtkP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXS5jYWxsKGEsbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGNbaF0pKSxhPWEuJCksaCs9YS5yb3dTcGFuLTEpfWZ1bmN0aW9uIHkoZSxkKXt2YXIgYj1lLmdldFN0YXJ0RWxlbWVudCgpO2lmKGI9Yi5nZXRBc2NlbmRhbnQoXCJ0ZFwiLDEpfHxiLmdldEFzY2VuZGFudChcInRoXCIsMSkpe3ZhciBjPWIuY2xvbmUoKTtjLmFwcGVuZEJvZ3VzKCk7ZD9jLmluc2VydEJlZm9yZShiKTpjLmluc2VydEFmdGVyKGIpfX1mdW5jdGlvbiB4KGUpe2lmKGUgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uc2VsZWN0aW9uKXtlPXQoZSk7dmFyIGQ9ZVswXSYmZVswXS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSxiO2E6e3ZhciBjPTA7Yj1lLmxlbmd0aC0xO2Zvcih2YXIgYT17fSxmLGc7Zj1lW2MrK107KUNLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihhLGYsXCJkZWxldGVfY2VsbFwiLFxyXG4hMCk7Zm9yKGM9MDtmPWVbYysrXTspaWYoKGc9Zi5nZXRQcmV2aW91cygpKSYmIWcuZ2V0Q3VzdG9tRGF0YShcImRlbGV0ZV9jZWxsXCIpfHwoZz1mLmdldE5leHQoKSkmJiFnLmdldEN1c3RvbURhdGEoXCJkZWxldGVfY2VsbFwiKSl7Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGEpO2I9ZzticmVhayBhfUNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhhKTtnPWVbMF0uZ2V0UGFyZW50KCk7KGc9Zy5nZXRQcmV2aW91cygpKT9iPWcuZ2V0TGFzdCgpOihnPWVbYl0uZ2V0UGFyZW50KCksYj0oZz1nLmdldE5leHQoKSk/Zy5nZXRDaGlsZCgwKTpudWxsKX1mb3IoZz1lLmxlbmd0aC0xOzA8PWc7Zy0tKXgoZVtnXSk7Yj9xKGIsITApOmQmJmQucmVtb3ZlKCl9ZWxzZSBlIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQmJihkPWUuZ2V0UGFyZW50KCksMT09ZC5nZXRDaGlsZENvdW50KCk/ZC5yZW1vdmUoKTplLnJlbW92ZSgpKX1mdW5jdGlvbiBxKGUsXHJcbmQpe3ZhciBiPWUuZ2V0RG9jdW1lbnQoKSxjPUNLRURJVE9SLmRvY3VtZW50O0NLRURJVE9SLmVudi5pZSYmMTA9PUNLRURJVE9SLmVudi52ZXJzaW9uJiYoYy5mb2N1cygpLGIuZm9jdXMoKSk7Yj1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGIpO2JbXCJtb3ZlVG9FbGVtZW50RWRpdFwiKyhkP1wiRW5kXCI6XCJTdGFydFwiKV0oZSl8fChiLnNlbGVjdE5vZGVDb250ZW50cyhlKSxiLmNvbGxhcHNlKGQ/ITE6ITApKTtiLnNlbGVjdCghMCl9ZnVuY3Rpb24geihlLGQsYil7ZT1lW2RdO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBiKXJldHVybiBlO2ZvcihkPTA7ZSYmZDxlLmxlbmd0aDtkKyspe2lmKGIuaXMmJmVbZF09PWIuJClyZXR1cm4gZDtpZihkPT1iKXJldHVybiBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZVtkXSl9cmV0dXJuIGIuaXM/LTE6bnVsbH1mdW5jdGlvbiB3KGUsZCxiKXt2YXIgYz10KGUpLGE7aWYoKGQ/MSE9Yy5sZW5ndGg6Mj5jLmxlbmd0aCl8fChhPWUuZ2V0Q29tbW9uQW5jZXN0b3IoKSkmJlxyXG5hLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5pcyhcInRhYmxlXCIpKXJldHVybiExO3ZhciBmO2U9Y1swXTthPWUuZ2V0QXNjZW5kYW50KFwidGFibGVcIik7dmFyIGc9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChhKSxoPWcubGVuZ3RoLGs9Z1swXS5sZW5ndGgsbD1lLmdldFBhcmVudCgpLiQucm93SW5kZXgsbj16KGcsbCxlKTtpZihkKXt2YXIgcjt0cnl7dmFyIHE9cGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJyb3dzcGFuXCIpLDEwKXx8MTtmPXBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKSwxMCl8fDE7cj1nW1widXBcIj09ZD9sLXE6XCJkb3duXCI9PWQ/bCtxOmxdW1wibGVmdFwiPT1kP24tZjpcInJpZ2h0XCI9PWQ/bitmOm5dfWNhdGNoKEQpe3JldHVybiExfWlmKCFyfHxlLiQ9PXIpcmV0dXJuITE7Y1tcInVwXCI9PWR8fFwibGVmdFwiPT1kP1widW5zaGlmdFwiOlwicHVzaFwiXShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQocikpfWQ9ZS5nZXREb2N1bWVudCgpO3ZhciBwPWwsXHJcbnE9cj0wLHU9IWImJm5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChkKSx3PTA7Zm9yKGQ9MDtkPGMubGVuZ3RoO2QrKyl7Zj1jW2RdO3ZhciBtPWYuZ2V0UGFyZW50KCkseD1mLmdldEZpcnN0KCksdj1mLiQuY29sU3Bhbix5PWYuJC5yb3dTcGFuLG09bS4kLnJvd0luZGV4LEE9eihnLG0sZiksdz13K3YqeSxxPU1hdGgubWF4KHEsQS1uK3YpO3I9TWF0aC5tYXgocixtLWwreSk7Ynx8KHY9ZiwoeT12LmdldEJvZ3VzKCkpJiZ5LnJlbW92ZSgpLHYudHJpbSgpLGYuZ2V0Q2hpbGRyZW4oKS5jb3VudCgpJiYobT09cHx8IXh8fHguaXNCbG9ja0JvdW5kYXJ5JiZ4LmlzQmxvY2tCb3VuZGFyeSh7YnI6MX0pfHwocD11LmdldExhc3QoQ0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCkpLCFwfHxwLmlzJiZwLmlzKFwiYnJcIil8fHUuYXBwZW5kKFwiYnJcIikpLGYubW92ZUNoaWxkcmVuKHUpKSxkP2YucmVtb3ZlKCk6Zi5zZXRIdG1sKFwiXCIpKTtwPW19aWYoYilyZXR1cm4gcipcclxucT09dzt1Lm1vdmVDaGlsZHJlbihlKTtlLmFwcGVuZEJvZ3VzKCk7cT49az9lLnJlbW92ZUF0dHJpYnV0ZShcInJvd1NwYW5cIik6ZS4kLnJvd1NwYW49cjtyPj1oP2UucmVtb3ZlQXR0cmlidXRlKFwiY29sU3BhblwiKTplLiQuY29sU3Bhbj1xO2I9bmV3IENLRURJVE9SLmRvbS5ub2RlTGlzdChhLiQucm93cyk7Yz1iLmNvdW50KCk7Zm9yKGQ9Yy0xOzA8PWQ7ZC0tKWE9Yi5nZXRJdGVtKGQpLGEuJC5jZWxscy5sZW5ndGh8fChhLnJlbW92ZSgpLGMrKyk7cmV0dXJuIGV9ZnVuY3Rpb24gQShlLGQpe3ZhciBiPXQoZSk7aWYoMTxiLmxlbmd0aClyZXR1cm4hMTtpZihkKXJldHVybiEwO3ZhciBiPWJbMF0sYz1iLmdldFBhcmVudCgpLGE9Yy5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSxmPUNLRURJVE9SLnRvb2xzLmJ1aWxkVGFibGVNYXAoYSksZz1jLiQucm93SW5kZXgsaD16KGYsZyxiKSxrPWIuJC5yb3dTcGFuLGw7aWYoMTxrKXtsPU1hdGguY2VpbChrLzIpO2Zvcih2YXIgaz1NYXRoLmZsb29yKGsvXHJcbjIpLGM9ZytsLGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEuJC5yb3dzW2NdKSxmPXooZixjKSxuLGM9Yi5jbG9uZSgpLGc9MDtnPGYubGVuZ3RoO2crKylpZihuPWZbZ10sbi5wYXJlbnROb2RlPT1hLiQmJmc+aCl7Yy5pbnNlcnRCZWZvcmUobmV3IENLRURJVE9SLmRvbS5lbGVtZW50KG4pKTticmVha31lbHNlIG49bnVsbDtufHxhLmFwcGVuZChjKX1lbHNlIGZvcihrPWw9MSxhPWMuY2xvbmUoKSxhLmluc2VydEFmdGVyKGMpLGEuYXBwZW5kKGM9Yi5jbG9uZSgpKSxuPXooZixnKSxoPTA7aDxuLmxlbmd0aDtoKyspbltoXS5yb3dTcGFuKys7Yy5hcHBlbmRCb2d1cygpO2IuJC5yb3dTcGFuPWw7Yy4kLnJvd1NwYW49azsxPT1sJiZiLnJlbW92ZUF0dHJpYnV0ZShcInJvd1NwYW5cIik7MT09ayYmYy5yZW1vdmVBdHRyaWJ1dGUoXCJyb3dTcGFuXCIpO3JldHVybiBjfWZ1bmN0aW9uIEIoZSxkKXt2YXIgYj10KGUpO2lmKDE8Yi5sZW5ndGgpcmV0dXJuITE7aWYoZClyZXR1cm4hMDt2YXIgYj1cclxuYlswXSxjPWIuZ2V0UGFyZW50KCksYT1jLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGE9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChhKSxmPXooYSxjLiQucm93SW5kZXgsYiksZz1iLiQuY29sU3BhbjtpZigxPGcpYz1NYXRoLmNlaWwoZy8yKSxnPU1hdGguZmxvb3IoZy8yKTtlbHNle2Zvcih2YXIgZz1jPTEsaD1bXSxrPTA7azxhLmxlbmd0aDtrKyspe3ZhciBsPWFba107aC5wdXNoKGxbZl0pOzE8bFtmXS5yb3dTcGFuJiYoays9bFtmXS5yb3dTcGFuLTEpfWZvcihhPTA7YTxoLmxlbmd0aDthKyspaFthXS5jb2xTcGFuKyt9YT1iLmNsb25lKCk7YS5pbnNlcnRBZnRlcihiKTthLmFwcGVuZEJvZ3VzKCk7Yi4kLmNvbFNwYW49YzthLiQuY29sU3Bhbj1nOzE9PWMmJmIucmVtb3ZlQXR0cmlidXRlKFwiY29sU3BhblwiKTsxPT1nJiZhLnJlbW92ZUF0dHJpYnV0ZShcImNvbFNwYW5cIik7cmV0dXJuIGF9dmFyIEM9L14oPzp0ZHx0aCkkLztDS0VESVRPUi5wbHVnaW5zLnRhYmxldG9vbHM9XHJcbntyZXF1aXJlczpcInRhYmxlLGRpYWxvZyxjb250ZXh0bWVudVwiLGluaXQ6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKGF8fHt9LHtjb250ZXh0U2Vuc2l0aXZlOjEscmVmcmVzaDpmdW5jdGlvbihhLGIpe3RoaXMuc2V0U3RhdGUoYi5jb250YWlucyh7dGQ6MSx0aDoxfSwxKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX0pfWZ1bmN0aW9uIGIoYSxiKXt2YXIgYz1lLmFkZENvbW1hbmQoYSxiKTtlLmFkZEZlYXR1cmUoYyl9dmFyIGM9ZS5sYW5nLnRhYmxlO2IoXCJjZWxsUHJvcGVydGllc1wiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiY2VsbFByb3BlcnRpZXNcIixkKHthbGxvd2VkQ29udGVudDpcInRkIHRoe3dpZHRoLGhlaWdodCxib3JkZXItY29sb3IsYmFja2dyb3VuZC1jb2xvcix3aGl0ZS1zcGFjZSx2ZXJ0aWNhbC1hbGlnbix0ZXh0LWFsaWdufVtjb2xzcGFuLHJvd3NwYW5dXCIsXHJcbnJlcXVpcmVkQ29udGVudDpcInRhYmxlXCJ9KSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJjZWxsUHJvcGVydGllc1wiLHRoaXMucGF0aCtcImRpYWxvZ3MvdGFibGVDZWxsLmpzXCIpO2IoXCJyb3dEZWxldGVcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3EodShhKSl9fSkpO2IoXCJyb3dJbnNlcnRCZWZvcmVcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3AoYSwhMCl9fSkpO2IoXCJyb3dJbnNlcnRBZnRlclwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7cChhKX19KSk7YihcImNvbHVtbkRlbGV0ZVwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7YT10KGEpO3ZhciBiPWFbMF0sYz1hW2EubGVuZ3RoLTFdO2E9Yi5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKTtcclxuZm9yKHZhciBkPUNLRURJVE9SLnRvb2xzLmJ1aWxkVGFibGVNYXAoYSksZSxsLG49W10scj0wLHA9ZC5sZW5ndGg7cjxwO3IrKylmb3IodmFyIG09MCx1PWRbcl0ubGVuZ3RoO208dTttKyspZFtyXVttXT09Yi4kJiYoZT1tKSxkW3JdW21dPT1jLiQmJihsPW0pO2ZvcihyPWU7cjw9bDtyKyspZm9yKG09MDttPGQubGVuZ3RoO20rKyljPWRbbV0sYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYS4kLnJvd3NbbV0pLGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGNbcl0pLGMuJCYmKDE9PWMuJC5jb2xTcGFuP2MucmVtb3ZlKCk6LS1jLiQuY29sU3BhbixtKz1jLiQucm93U3Bhbi0xLGIuJC5jZWxscy5sZW5ndGh8fG4ucHVzaChiKSk7bD1hLiQucm93c1swXSYmYS4kLnJvd3NbMF0uY2VsbHM7ZT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQobFtlXXx8KGU/bFtlLTFdOmEuJC5wYXJlbnROb2RlKSk7bi5sZW5ndGg9PXAmJmEucmVtb3ZlKCk7ZSYmcShlLCEwKX19KSk7YihcImNvbHVtbkluc2VydEJlZm9yZVwiLFxyXG5kKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO20oYSwhMCl9fSkpO2IoXCJjb2x1bW5JbnNlcnRBZnRlclwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7bShhKX19KSk7YihcImNlbGxEZWxldGVcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3goYSl9fSkpO2IoXCJjZWxsTWVyZ2VcIixkKHthbGxvd2VkQ29udGVudDpcInRkW2NvbHNwYW4scm93c3Bhbl1cIixyZXF1aXJlZENvbnRlbnQ6XCJ0ZFtjb2xzcGFuLHJvd3NwYW5dXCIsZXhlYzpmdW5jdGlvbihhKXtxKHcoYS5nZXRTZWxlY3Rpb24oKSksITApfX0pKTtiKFwiY2VsbE1lcmdlUmlnaHRcIixkKHthbGxvd2VkQ29udGVudDpcInRkW2NvbHNwYW5dXCIscmVxdWlyZWRDb250ZW50OlwidGRbY29sc3Bhbl1cIixleGVjOmZ1bmN0aW9uKGEpe3EodyhhLmdldFNlbGVjdGlvbigpLFxyXG5cInJpZ2h0XCIpLCEwKX19KSk7YihcImNlbGxNZXJnZURvd25cIixkKHthbGxvd2VkQ29udGVudDpcInRkW3Jvd3NwYW5dXCIscmVxdWlyZWRDb250ZW50OlwidGRbcm93c3Bhbl1cIixleGVjOmZ1bmN0aW9uKGEpe3EodyhhLmdldFNlbGVjdGlvbigpLFwiZG93blwiKSwhMCl9fSkpO2IoXCJjZWxsVmVydGljYWxTcGxpdFwiLGQoe2FsbG93ZWRDb250ZW50OlwidGRbcm93c3Bhbl1cIixyZXF1aXJlZENvbnRlbnQ6XCJ0ZFtyb3dzcGFuXVwiLGV4ZWM6ZnVuY3Rpb24oYSl7cShCKGEuZ2V0U2VsZWN0aW9uKCkpKX19KSk7YihcImNlbGxIb3Jpem9udGFsU3BsaXRcIixkKHthbGxvd2VkQ29udGVudDpcInRkW2NvbHNwYW5dXCIscmVxdWlyZWRDb250ZW50OlwidGRbY29sc3Bhbl1cIixleGVjOmZ1bmN0aW9uKGEpe3EoQShhLmdldFNlbGVjdGlvbigpKSl9fSkpO2IoXCJjZWxsSW5zZXJ0QmVmb3JlXCIsZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTt5KGEsITApfX0pKTtcclxuYihcImNlbGxJbnNlcnRBZnRlclwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7eShhKX19KSk7ZS5hZGRNZW51SXRlbXMmJmUuYWRkTWVudUl0ZW1zKHt0YWJsZWNlbGw6e2xhYmVsOmMuY2VsbC5tZW51LGdyb3VwOlwidGFibGVjZWxsXCIsb3JkZXI6MSxnZXRJdGVtczpmdW5jdGlvbigpe3ZhciBhPWUuZ2V0U2VsZWN0aW9uKCksYj10KGEpO3JldHVybnt0YWJsZWNlbGxfaW5zZXJ0QmVmb3JlOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZWNlbGxfaW5zZXJ0QWZ0ZXI6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY2VsbF9kZWxldGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY2VsbF9tZXJnZTp3KGEsbnVsbCwhMCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHRhYmxlY2VsbF9tZXJnZV9yaWdodDp3KGEsXCJyaWdodFwiLCEwKT9DS0VESVRPUi5UUklTVEFURV9PRkY6XHJcbkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHRhYmxlY2VsbF9tZXJnZV9kb3duOncoYSxcImRvd25cIiwhMCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHRhYmxlY2VsbF9zcGxpdF92ZXJ0aWNhbDpCKGEsITApP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCx0YWJsZWNlbGxfc3BsaXRfaG9yaXpvbnRhbDpBKGEsITApP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCx0YWJsZWNlbGxfcHJvcGVydGllczowPGIubGVuZ3RoP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRH19fSx0YWJsZWNlbGxfaW5zZXJ0QmVmb3JlOntsYWJlbDpjLmNlbGwuaW5zZXJ0QmVmb3JlLGdyb3VwOlwidGFibGVjZWxsXCIsY29tbWFuZDpcImNlbGxJbnNlcnRCZWZvcmVcIixvcmRlcjo1fSx0YWJsZWNlbGxfaW5zZXJ0QWZ0ZXI6e2xhYmVsOmMuY2VsbC5pbnNlcnRBZnRlcixcclxuZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbEluc2VydEFmdGVyXCIsb3JkZXI6MTB9LHRhYmxlY2VsbF9kZWxldGU6e2xhYmVsOmMuY2VsbC5kZWxldGVDZWxsLGdyb3VwOlwidGFibGVjZWxsXCIsY29tbWFuZDpcImNlbGxEZWxldGVcIixvcmRlcjoxNX0sdGFibGVjZWxsX21lcmdlOntsYWJlbDpjLmNlbGwubWVyZ2UsZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbE1lcmdlXCIsb3JkZXI6MTZ9LHRhYmxlY2VsbF9tZXJnZV9yaWdodDp7bGFiZWw6Yy5jZWxsLm1lcmdlUmlnaHQsZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbE1lcmdlUmlnaHRcIixvcmRlcjoxN30sdGFibGVjZWxsX21lcmdlX2Rvd246e2xhYmVsOmMuY2VsbC5tZXJnZURvd24sZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbE1lcmdlRG93blwiLG9yZGVyOjE4fSx0YWJsZWNlbGxfc3BsaXRfaG9yaXpvbnRhbDp7bGFiZWw6Yy5jZWxsLnNwbGl0SG9yaXpvbnRhbCxncm91cDpcInRhYmxlY2VsbFwiLFxyXG5jb21tYW5kOlwiY2VsbEhvcml6b250YWxTcGxpdFwiLG9yZGVyOjE5fSx0YWJsZWNlbGxfc3BsaXRfdmVydGljYWw6e2xhYmVsOmMuY2VsbC5zcGxpdFZlcnRpY2FsLGdyb3VwOlwidGFibGVjZWxsXCIsY29tbWFuZDpcImNlbGxWZXJ0aWNhbFNwbGl0XCIsb3JkZXI6MjB9LHRhYmxlY2VsbF9wcm9wZXJ0aWVzOntsYWJlbDpjLmNlbGwudGl0bGUsZ3JvdXA6XCJ0YWJsZWNlbGxwcm9wZXJ0aWVzXCIsY29tbWFuZDpcImNlbGxQcm9wZXJ0aWVzXCIsb3JkZXI6MjF9LHRhYmxlcm93OntsYWJlbDpjLnJvdy5tZW51LGdyb3VwOlwidGFibGVyb3dcIixvcmRlcjoxLGdldEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJue3RhYmxlcm93X2luc2VydEJlZm9yZTpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVyb3dfaW5zZXJ0QWZ0ZXI6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlcm93X2RlbGV0ZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fX0sdGFibGVyb3dfaW5zZXJ0QmVmb3JlOntsYWJlbDpjLnJvdy5pbnNlcnRCZWZvcmUsXHJcbmdyb3VwOlwidGFibGVyb3dcIixjb21tYW5kOlwicm93SW5zZXJ0QmVmb3JlXCIsb3JkZXI6NX0sdGFibGVyb3dfaW5zZXJ0QWZ0ZXI6e2xhYmVsOmMucm93Lmluc2VydEFmdGVyLGdyb3VwOlwidGFibGVyb3dcIixjb21tYW5kOlwicm93SW5zZXJ0QWZ0ZXJcIixvcmRlcjoxMH0sdGFibGVyb3dfZGVsZXRlOntsYWJlbDpjLnJvdy5kZWxldGVSb3csZ3JvdXA6XCJ0YWJsZXJvd1wiLGNvbW1hbmQ6XCJyb3dEZWxldGVcIixvcmRlcjoxNX0sdGFibGVjb2x1bW46e2xhYmVsOmMuY29sdW1uLm1lbnUsZ3JvdXA6XCJ0YWJsZWNvbHVtblwiLG9yZGVyOjEsZ2V0SXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm57dGFibGVjb2x1bW5faW5zZXJ0QmVmb3JlOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZWNvbHVtbl9pbnNlcnRBZnRlcjpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVjb2x1bW5fZGVsZXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRn19fSx0YWJsZWNvbHVtbl9pbnNlcnRCZWZvcmU6e2xhYmVsOmMuY29sdW1uLmluc2VydEJlZm9yZSxcclxuZ3JvdXA6XCJ0YWJsZWNvbHVtblwiLGNvbW1hbmQ6XCJjb2x1bW5JbnNlcnRCZWZvcmVcIixvcmRlcjo1fSx0YWJsZWNvbHVtbl9pbnNlcnRBZnRlcjp7bGFiZWw6Yy5jb2x1bW4uaW5zZXJ0QWZ0ZXIsZ3JvdXA6XCJ0YWJsZWNvbHVtblwiLGNvbW1hbmQ6XCJjb2x1bW5JbnNlcnRBZnRlclwiLG9yZGVyOjEwfSx0YWJsZWNvbHVtbl9kZWxldGU6e2xhYmVsOmMuY29sdW1uLmRlbGV0ZUNvbHVtbixncm91cDpcInRhYmxlY29sdW1uXCIsY29tbWFuZDpcImNvbHVtbkRlbGV0ZVwiLG9yZGVyOjE1fX0pO2UuY29udGV4dE1lbnUmJmUuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYSxiLGMpe3JldHVybihhPWMuY29udGFpbnMoe3RkOjEsdGg6MX0sMSkpJiYhYS5pc1JlYWRPbmx5KCk/e3RhYmxlY2VsbDpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVyb3c6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY29sdW1uOkNLRURJVE9SLlRSSVNUQVRFX09GRn06bnVsbH0pfSxnZXRTZWxlY3RlZENlbGxzOnR9O1xyXG5DS0VESVRPUi5wbHVnaW5zLmFkZChcInRhYmxldG9vbHNcIixDS0VESVRPUi5wbHVnaW5zLnRhYmxldG9vbHMpfSkoKTtDS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwPWZ1bmN0aW9uKHQpe3Q9dC4kLnJvd3M7Zm9yKHZhciBwPS0xLHU9W10sdj0wO3Y8dC5sZW5ndGg7disrKXtwKys7IXVbcF0mJih1W3BdPVtdKTtmb3IodmFyIG09LTEseT0wO3k8dFt2XS5jZWxscy5sZW5ndGg7eSsrKXt2YXIgeD10W3ZdLmNlbGxzW3ldO2ZvcihtKys7dVtwXVttXTspbSsrO2Zvcih2YXIgcT1pc05hTih4LmNvbFNwYW4pPzE6eC5jb2xTcGFuLHg9aXNOYU4oeC5yb3dTcGFuKT8xOngucm93U3Bhbix6PTA7ejx4O3orKyl7dVtwK3pdfHwodVtwK3pdPVtdKTtmb3IodmFyIHc9MDt3PHE7dysrKXVbcCt6XVttK3ddPXRbdl0uY2VsbHNbeV19bSs9cS0xfX1yZXR1cm4gdX07KGZ1bmN0aW9uKCl7dmFyIGc9W0NLRURJVE9SLkNUUkwrOTAsQ0tFRElUT1IuQ1RSTCs4OSxDS0VESVRPUi5DVFJMK0NLRURJVE9SLlNISUZUKzkwXSxuPXs4OjEsNDY6MX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ1bmRvXCIse2luaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtkLmVuYWJsZWQmJiExIT09YS5kYXRhLmNvbW1hbmQuY2FuVW5kbyYmZC5zYXZlKCl9ZnVuY3Rpb24gYygpe2QuZW5hYmxlZD1hLnJlYWRPbmx5PyExOlwid3lzaXd5Z1wiPT1hLm1vZGU7ZC5vbkNoYW5nZSgpfXZhciBkPWEudW5kb01hbmFnZXI9bmV3IGUoYSksbD1kLmVkaXRpbmdIYW5kbGVyPW5ldyBrKGQpLGY9YS5hZGRDb21tYW5kKFwidW5kb1wiLHtleGVjOmZ1bmN0aW9uKCl7ZC51bmRvKCkmJihhLnNlbGVjdGlvbkNoYW5nZSgpLHRoaXMuZmlyZShcImFmdGVyVW5kb1wiKSl9LHN0YXJ0RGlzYWJsZWQ6ITAsY2FuVW5kbzohMX0pLGg9YS5hZGRDb21tYW5kKFwicmVkb1wiLHtleGVjOmZ1bmN0aW9uKCl7ZC5yZWRvKCkmJlxyXG4oYS5zZWxlY3Rpb25DaGFuZ2UoKSx0aGlzLmZpcmUoXCJhZnRlclJlZG9cIikpfSxzdGFydERpc2FibGVkOiEwLGNhblVuZG86ITF9KTthLnNldEtleXN0cm9rZShbW2dbMF0sXCJ1bmRvXCJdLFtnWzFdLFwicmVkb1wiXSxbZ1syXSxcInJlZG9cIl1dKTtkLm9uQ2hhbmdlPWZ1bmN0aW9uKCl7Zi5zZXRTdGF0ZShkLnVuZG9hYmxlKCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTtoLnNldFN0YXRlKGQucmVkb2FibGUoKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfTthLm9uKFwiYmVmb3JlQ29tbWFuZEV4ZWNcIixiKTthLm9uKFwiYWZ0ZXJDb21tYW5kRXhlY1wiLGIpO2Eub24oXCJzYXZlU25hcHNob3RcIixmdW5jdGlvbihhKXtkLnNhdmUoYS5kYXRhJiZhLmRhdGEuY29udGVudE9ubHkpfSk7YS5vbihcImNvbnRlbnREb21cIixsLmF0dGFjaExpc3RlbmVycyxsKTthLm9uKFwiaW5zdGFuY2VSZWFkeVwiLGZ1bmN0aW9uKCl7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSk7XHJcbmEub24oXCJiZWZvcmVNb2RlVW5sb2FkXCIsZnVuY3Rpb24oKXtcInd5c2l3eWdcIj09YS5tb2RlJiZkLnNhdmUoITApfSk7YS5vbihcIm1vZGVcIixjKTthLm9uKFwicmVhZE9ubHlcIixjKTthLnVpLmFkZEJ1dHRvbiYmKGEudWkuYWRkQnV0dG9uKFwiVW5kb1wiLHtsYWJlbDphLmxhbmcudW5kby51bmRvLGNvbW1hbmQ6XCJ1bmRvXCIsdG9vbGJhcjpcInVuZG8sMTBcIn0pLGEudWkuYWRkQnV0dG9uKFwiUmVkb1wiLHtsYWJlbDphLmxhbmcudW5kby5yZWRvLGNvbW1hbmQ6XCJyZWRvXCIsdG9vbGJhcjpcInVuZG8sMjBcIn0pKTthLnJlc2V0VW5kbz1mdW5jdGlvbigpe2QucmVzZXQoKTthLmZpcmUoXCJzYXZlU25hcHNob3RcIil9O2Eub24oXCJ1cGRhdGVTbmFwc2hvdFwiLGZ1bmN0aW9uKCl7ZC5jdXJyZW50SW1hZ2UmJmQudXBkYXRlKCl9KTthLm9uKFwibG9ja1NuYXBzaG90XCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7ZC5sb2NrKGEmJmEuZG9udFVwZGF0ZSxhJiZhLmZvcmNlVXBkYXRlKX0pO2Eub24oXCJ1bmxvY2tTbmFwc2hvdFwiLFxyXG5kLnVubG9jayxkKX19KTtDS0VESVRPUi5wbHVnaW5zLnVuZG89e307dmFyIGU9Q0tFRElUT1IucGx1Z2lucy51bmRvLlVuZG9NYW5hZ2VyPWZ1bmN0aW9uKGEpe3RoaXMuc3Ryb2tlc1JlY29yZGVkPVswLDBdO3RoaXMubG9ja2VkPW51bGw7dGhpcy5wcmV2aW91c0tleUdyb3VwPS0xO3RoaXMubGltaXQ9YS5jb25maWcudW5kb1N0YWNrU2l6ZXx8MjA7dGhpcy5zdHJva2VzTGltaXQ9MjU7dGhpcy5lZGl0b3I9YTt0aGlzLnJlc2V0KCl9O2UucHJvdG90eXBlPXt0eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5nZXRLZXlHcm91cChhKSxkPXRoaXMuc3Ryb2tlc1JlY29yZGVkW2NdKzE7Yj1ifHxkPj10aGlzLnN0cm9rZXNMaW1pdDt0aGlzLnR5cGluZ3x8KHRoaXMuaGFzVW5kbz10aGlzLnR5cGluZz0hMCx0aGlzLmhhc1JlZG89ITEsdGhpcy5vbkNoYW5nZSgpKTtiPyhkPTAsdGhpcy5lZGl0b3IuZmlyZShcInNhdmVTbmFwc2hvdFwiKSk6dGhpcy5lZGl0b3IuZmlyZShcImNoYW5nZVwiKTt0aGlzLnN0cm9rZXNSZWNvcmRlZFtjXT1cclxuZDt0aGlzLnByZXZpb3VzS2V5R3JvdXA9Y30sa2V5R3JvdXBDaGFuZ2VkOmZ1bmN0aW9uKGEpe3JldHVybiBlLmdldEtleUdyb3VwKGEpIT10aGlzLnByZXZpb3VzS2V5R3JvdXB9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5zbmFwc2hvdHM9W107dGhpcy5pbmRleD0tMTt0aGlzLmN1cnJlbnRJbWFnZT1udWxsO3RoaXMuaGFzUmVkbz10aGlzLmhhc1VuZG89ITE7dGhpcy5sb2NrZWQ9bnVsbDt0aGlzLnJlc2V0VHlwZSgpfSxyZXNldFR5cGU6ZnVuY3Rpb24oKXt0aGlzLnN0cm9rZXNSZWNvcmRlZD1bMCwwXTt0aGlzLnR5cGluZz0hMTt0aGlzLnByZXZpb3VzS2V5R3JvdXA9LTF9LHJlZnJlc2hTdGF0ZTpmdW5jdGlvbigpe3RoaXMuaGFzVW5kbz0hIXRoaXMuZ2V0TmV4dEltYWdlKCEwKTt0aGlzLmhhc1JlZG89ISF0aGlzLmdldE5leHRJbWFnZSghMSk7dGhpcy5yZXNldFR5cGUoKTt0aGlzLm9uQ2hhbmdlKCl9LHNhdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZWRpdG9yO2lmKHRoaXMubG9ja2VkfHxcclxuXCJyZWFkeVwiIT1kLnN0YXR1c3x8XCJ3eXNpd3lnXCIhPWQubW9kZSlyZXR1cm4hMTt2YXIgZT1kLmVkaXRhYmxlKCk7aWYoIWV8fFwicmVhZHlcIiE9ZS5zdGF0dXMpcmV0dXJuITE7ZT10aGlzLnNuYXBzaG90cztifHwoYj1uZXcgZihkKSk7aWYoITE9PT1iLmNvbnRlbnRzKXJldHVybiExO2lmKHRoaXMuY3VycmVudEltYWdlKWlmKGIuZXF1YWxzQ29udGVudCh0aGlzLmN1cnJlbnRJbWFnZSkpe2lmKGF8fGIuZXF1YWxzU2VsZWN0aW9uKHRoaXMuY3VycmVudEltYWdlKSlyZXR1cm4hMX1lbHNlITEhPT1jJiZkLmZpcmUoXCJjaGFuZ2VcIik7ZS5zcGxpY2UodGhpcy5pbmRleCsxLGUubGVuZ3RoLXRoaXMuaW5kZXgtMSk7ZS5sZW5ndGg9PXRoaXMubGltaXQmJmUuc2hpZnQoKTt0aGlzLmluZGV4PWUucHVzaChiKS0xO3RoaXMuY3VycmVudEltYWdlPWI7ITEhPT1jJiZ0aGlzLnJlZnJlc2hTdGF0ZSgpO3JldHVybiEwfSxyZXN0b3JlSW1hZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lZGl0b3IsXHJcbmM7YS5ib29rbWFya3MmJihiLmZvY3VzKCksYz1iLmdldFNlbGVjdGlvbigpKTt0aGlzLmxvY2tlZD17bGV2ZWw6OTk5fTt0aGlzLmVkaXRvci5sb2FkU25hcHNob3QoYS5jb250ZW50cyk7YS5ib29rbWFya3M/Yy5zZWxlY3RCb29rbWFya3MoYS5ib29rbWFya3MpOkNLRURJVE9SLmVudi5pZSYmKGM9dGhpcy5lZGl0b3IuZG9jdW1lbnQuZ2V0Qm9keSgpLiQuY3JlYXRlVGV4dFJhbmdlKCksYy5jb2xsYXBzZSghMCksYy5zZWxlY3QoKSk7dGhpcy5sb2NrZWQ9bnVsbDt0aGlzLmluZGV4PWEuaW5kZXg7dGhpcy5jdXJyZW50SW1hZ2U9dGhpcy5zbmFwc2hvdHNbdGhpcy5pbmRleF07dGhpcy51cGRhdGUoKTt0aGlzLnJlZnJlc2hTdGF0ZSgpO2IuZmlyZShcImNoYW5nZVwiKX0sZ2V0TmV4dEltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc25hcHNob3RzLGM9dGhpcy5jdXJyZW50SW1hZ2UsZDtpZihjKWlmKGEpZm9yKGQ9dGhpcy5pbmRleC0xOzA8PWQ7ZC0tKXtpZihhPWJbZF0sIWMuZXF1YWxzQ29udGVudChhKSlyZXR1cm4gYS5pbmRleD1cclxuZCxhfWVsc2UgZm9yKGQ9dGhpcy5pbmRleCsxO2Q8Yi5sZW5ndGg7ZCsrKWlmKGE9YltkXSwhYy5lcXVhbHNDb250ZW50KGEpKXJldHVybiBhLmluZGV4PWQsYTtyZXR1cm4gbnVsbH0scmVkb2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkJiZ0aGlzLmhhc1JlZG99LHVuZG9hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmdGhpcy5oYXNVbmRvfSx1bmRvOmZ1bmN0aW9uKCl7aWYodGhpcy51bmRvYWJsZSgpKXt0aGlzLnNhdmUoITApO3ZhciBhPXRoaXMuZ2V0TmV4dEltYWdlKCEwKTtpZihhKXJldHVybiB0aGlzLnJlc3RvcmVJbWFnZShhKSwhMH1yZXR1cm4hMX0scmVkbzpmdW5jdGlvbigpe2lmKHRoaXMucmVkb2FibGUoKSYmKHRoaXMuc2F2ZSghMCksdGhpcy5yZWRvYWJsZSgpKSl7dmFyIGE9dGhpcy5nZXROZXh0SW1hZ2UoITEpO2lmKGEpcmV0dXJuIHRoaXMucmVzdG9yZUltYWdlKGEpLCEwfXJldHVybiExfSx1cGRhdGU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMubG9ja2VkKXthfHxcclxuKGE9bmV3IGYodGhpcy5lZGl0b3IpKTtmb3IodmFyIGI9dGhpcy5pbmRleCxjPXRoaXMuc25hcHNob3RzOzA8YiYmdGhpcy5jdXJyZW50SW1hZ2UuZXF1YWxzQ29udGVudChjW2ItMV0pOyktLWI7Yy5zcGxpY2UoYix0aGlzLmluZGV4LWIrMSxhKTt0aGlzLmluZGV4PWI7dGhpcy5jdXJyZW50SW1hZ2U9YX19LHVwZGF0ZVNlbGVjdGlvbjpmdW5jdGlvbihhKXtpZighdGhpcy5zbmFwc2hvdHMubGVuZ3RoKXJldHVybiExO3ZhciBiPXRoaXMuc25hcHNob3RzLGM9YltiLmxlbmd0aC0xXTtyZXR1cm4gYy5lcXVhbHNDb250ZW50KGEpJiYhYy5lcXVhbHNTZWxlY3Rpb24oYSk/KHRoaXMuY3VycmVudEltYWdlPWJbYi5sZW5ndGgtMV09YSwhMCk6ITF9LGxvY2s6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmxvY2tlZCl0aGlzLmxvY2tlZC5sZXZlbCsrO2Vsc2UgaWYoYSl0aGlzLmxvY2tlZD17bGV2ZWw6MX07ZWxzZXt2YXIgYz1udWxsO2lmKGIpYz0hMDtlbHNle3ZhciBkPW5ldyBmKHRoaXMuZWRpdG9yLFxyXG4hMCk7dGhpcy5jdXJyZW50SW1hZ2UmJnRoaXMuY3VycmVudEltYWdlLmVxdWFsc0NvbnRlbnQoZCkmJihjPWQpfXRoaXMubG9ja2VkPXt1cGRhdGU6YyxsZXZlbDoxfX19LHVubG9jazpmdW5jdGlvbigpe2lmKHRoaXMubG9ja2VkJiYhLS10aGlzLmxvY2tlZC5sZXZlbCl7dmFyIGE9dGhpcy5sb2NrZWQudXBkYXRlO3RoaXMubG9ja2VkPW51bGw7aWYoITA9PT1hKXRoaXMudXBkYXRlKCk7ZWxzZSBpZihhKXt2YXIgYj1uZXcgZih0aGlzLmVkaXRvciwhMCk7YS5lcXVhbHNDb250ZW50KGIpfHx0aGlzLnVwZGF0ZSgpfX19fTtlLm5hdmlnYXRpb25LZXlDb2Rlcz17Mzc6MSwzODoxLDM5OjEsNDA6MSwzNjoxLDM1OjEsMzM6MSwzNDoxfTtlLmtleUdyb3Vwcz17UFJJTlRBQkxFOjAsRlVOQ1RJT05BTDoxfTtlLmlzTmF2aWdhdGlvbktleT1mdW5jdGlvbihhKXtyZXR1cm4hIWUubmF2aWdhdGlvbktleUNvZGVzW2FdfTtlLmdldEtleUdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPWUua2V5R3JvdXBzO1xyXG5yZXR1cm4gblthXT9iLkZVTkNUSU9OQUw6Yi5QUklOVEFCTEV9O2UuZ2V0T3Bwb3NpdGVLZXlHcm91cD1mdW5jdGlvbihhKXt2YXIgYj1lLmtleUdyb3VwcztyZXR1cm4gYT09Yi5GVU5DVElPTkFMP2IuUFJJTlRBQkxFOmIuRlVOQ1RJT05BTH07ZS5pZUZ1bmN0aW9uYWxLZXlzQnVnPWZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi5lbnYuaWUmJmUuZ2V0S2V5R3JvdXAoYSk9PWUua2V5R3JvdXBzLkZVTkNUSU9OQUx9O3ZhciBmPUNLRURJVE9SLnBsdWdpbnMudW5kby5JbWFnZT1mdW5jdGlvbihhLGIpe3RoaXMuZWRpdG9yPWE7YS5maXJlKFwiYmVmb3JlVW5kb0ltYWdlXCIpO3ZhciBjPWEuZ2V0U25hcHNob3QoKTtDS0VESVRPUi5lbnYuaWUmJmMmJihjPWMucmVwbGFjZSgvXFxzK2RhdGEtY2tlLWV4cGFuZG89XCIuKj9cIi9nLFwiXCIpKTt0aGlzLmNvbnRlbnRzPWM7Ynx8KHRoaXMuYm9va21hcmtzPShjPWMmJmEuZ2V0U2VsZWN0aW9uKCkpJiZjLmNyZWF0ZUJvb2ttYXJrczIoITApKTthLmZpcmUoXCJhZnRlclVuZG9JbWFnZVwiKX0sXHJcbmg9L1xcYig/OmhyZWZ8c3JjfG5hbWUpPVwiW15cIl0qP1wiL2dpO2YucHJvdG90eXBlPXtlcXVhbHNDb250ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGVudHM7YT1hLmNvbnRlbnRzO0NLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpJiYoYj1iLnJlcGxhY2UoaCxcIlwiKSxhPWEucmVwbGFjZShoLFwiXCIpKTtyZXR1cm4gYiE9YT8hMTohMH0sZXF1YWxzU2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYm9va21hcmtzO2E9YS5ib29rbWFya3M7aWYoYnx8YSl7aWYoIWJ8fCFhfHxiLmxlbmd0aCE9YS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY10sZT1hW2NdO2lmKGQuc3RhcnRPZmZzZXQhPWUuc3RhcnRPZmZzZXR8fGQuZW5kT2Zmc2V0IT1lLmVuZE9mZnNldHx8IUNLRURJVE9SLnRvb2xzLmFycmF5Q29tcGFyZShkLnN0YXJ0LGUuc3RhcnQpfHwhQ0tFRElUT1IudG9vbHMuYXJyYXlDb21wYXJlKGQuZW5kLFxyXG5lLmVuZCkpcmV0dXJuITF9fXJldHVybiEwfX07dmFyIGs9Q0tFRElUT1IucGx1Z2lucy51bmRvLk5hdGl2ZUVkaXRpbmdIYW5kbGVyPWZ1bmN0aW9uKGEpe3RoaXMudW5kb01hbmFnZXI9YTt0aGlzLmlnbm9yZUlucHV0RXZlbnQ9ITE7dGhpcy5rZXlFdmVudHNTdGFjaz1uZXcgbTt0aGlzLmxhc3RLZXlkb3duSW1hZ2U9bnVsbH07ay5wcm90b3R5cGU9e29uS2V5ZG93bjpmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuZ2V0S2V5KCk7aWYoMjI5IT09YilpZigtMTxDS0VESVRPUi50b29scy5pbmRleE9mKGcsYS5kYXRhLmdldEtleXN0cm9rZSgpKSlhLmRhdGEucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKHRoaXMua2V5RXZlbnRzU3RhY2suY2xlYW5VcChhKSxhPXRoaXMudW5kb01hbmFnZXIsdGhpcy5rZXlFdmVudHNTdGFjay5nZXRMYXN0KGIpfHx0aGlzLmtleUV2ZW50c1N0YWNrLnB1c2goYiksdGhpcy5sYXN0S2V5ZG93bkltYWdlPW5ldyBmKGEuZWRpdG9yKSxlLmlzTmF2aWdhdGlvbktleShiKXx8XHJcbnRoaXMudW5kb01hbmFnZXIua2V5R3JvdXBDaGFuZ2VkKGIpKWlmKGEuc3Ryb2tlc1JlY29yZGVkWzBdfHxhLnN0cm9rZXNSZWNvcmRlZFsxXSlhLnNhdmUoITEsdGhpcy5sYXN0S2V5ZG93bkltYWdlLCExKSxhLnJlc2V0VHlwZSgpfSxvbklucHV0OmZ1bmN0aW9uKCl7aWYodGhpcy5pZ25vcmVJbnB1dEV2ZW50KXRoaXMuaWdub3JlSW5wdXRFdmVudD0hMTtlbHNle3ZhciBhPXRoaXMua2V5RXZlbnRzU3RhY2suZ2V0TGFzdCgpO2F8fChhPXRoaXMua2V5RXZlbnRzU3RhY2sucHVzaCgwKSk7dGhpcy5rZXlFdmVudHNTdGFjay5pbmNyZW1lbnQoYS5rZXlDb2RlKTt0aGlzLmtleUV2ZW50c1N0YWNrLmdldFRvdGFsSW5wdXRzKCk+PXRoaXMudW5kb01hbmFnZXIuc3Ryb2tlc0xpbWl0JiYodGhpcy51bmRvTWFuYWdlci50eXBlKGEua2V5Q29kZSwhMCksdGhpcy5rZXlFdmVudHNTdGFjay5yZXNldElucHV0cygpKX19LG9uS2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy51bmRvTWFuYWdlcjtcclxuYT1hLmRhdGEuZ2V0S2V5KCk7dmFyIGM9dGhpcy5rZXlFdmVudHNTdGFjay5nZXRUb3RhbElucHV0cygpO3RoaXMua2V5RXZlbnRzU3RhY2sucmVtb3ZlKGEpO2lmKCEoZS5pZUZ1bmN0aW9uYWxLZXlzQnVnKGEpJiZ0aGlzLmxhc3RLZXlkb3duSW1hZ2UmJnRoaXMubGFzdEtleWRvd25JbWFnZS5lcXVhbHNDb250ZW50KG5ldyBmKGIuZWRpdG9yLCEwKSkpKWlmKDA8YyliLnR5cGUoYSk7ZWxzZSBpZihlLmlzTmF2aWdhdGlvbktleShhKSl0aGlzLm9uTmF2aWdhdGlvbktleSghMCl9LG9uTmF2aWdhdGlvbktleTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnVuZG9NYW5hZ2VyOyFhJiZiLnNhdmUoITAsbnVsbCwhMSl8fGIudXBkYXRlU2VsZWN0aW9uKG5ldyBmKGIuZWRpdG9yKSk7Yi5yZXNldFR5cGUoKX0saWdub3JlSW5wdXRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7dGhpcy5pZ25vcmVJbnB1dEV2ZW50PSEwfSxhdHRhY2hMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnVuZG9NYW5hZ2VyLmVkaXRvcixcclxuYj1hLmVkaXRhYmxlKCksYz10aGlzO2IuYXR0YWNoTGlzdGVuZXIoYixcImtleWRvd25cIixmdW5jdGlvbihhKXtjLm9uS2V5ZG93bihhKTtpZihlLmllRnVuY3Rpb25hbEtleXNCdWcoYS5kYXRhLmdldEtleSgpKSljLm9uSW5wdXQoKX0sbnVsbCxudWxsLDk5OSk7Yi5hdHRhY2hMaXN0ZW5lcihiLENLRURJVE9SLmVudi5pZT9cImtleXByZXNzXCI6XCJpbnB1dFwiLGMub25JbnB1dCxjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIsXCJrZXl1cFwiLGMub25LZXl1cCxjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIsXCJwYXN0ZVwiLGMuaWdub3JlSW5wdXRFdmVudExpc3RlbmVyLGMsbnVsbCw5OTkpO2IuYXR0YWNoTGlzdGVuZXIoYixcImRyb3BcIixjLmlnbm9yZUlucHV0RXZlbnRMaXN0ZW5lcixjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIuaXNJbmxpbmUoKT9iOmEuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCksXCJjbGlja1wiLGZ1bmN0aW9uKCl7Yy5vbk5hdmlnYXRpb25LZXkoKX0sXHJcbm51bGwsbnVsbCw5OTkpO2IuYXR0YWNoTGlzdGVuZXIodGhpcy51bmRvTWFuYWdlci5lZGl0b3IsXCJibHVyXCIsZnVuY3Rpb24oKXtjLmtleUV2ZW50c1N0YWNrLnJlbW92ZSg5KX0sbnVsbCxudWxsLDk5OSl9fTt2YXIgbT1DS0VESVRPUi5wbHVnaW5zLnVuZG8uS2V5RXZlbnRzU3RhY2s9ZnVuY3Rpb24oKXt0aGlzLnN0YWNrPVtdfTttLnByb3RvdHlwZT17cHVzaDpmdW5jdGlvbihhKXthPXRoaXMuc3RhY2sucHVzaCh7a2V5Q29kZTphLGlucHV0czowfSk7cmV0dXJuIHRoaXMuc3RhY2tbYS0xXX0sZ2V0TGFzdEluZGV4OmZ1bmN0aW9uKGEpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnN0YWNrLmxlbmd0aC0xO2Zvcih2YXIgYj10aGlzLnN0YWNrLmxlbmd0aDtiLS07KWlmKHRoaXMuc3RhY2tbYl0ua2V5Q29kZT09YSlyZXR1cm4gYjtyZXR1cm4tMX0sZ2V0TGFzdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TGFzdEluZGV4KGEpO3JldHVybi0xIT1hP3RoaXMuc3RhY2tbYV06XHJcbm51bGx9LGluY3JlbWVudDpmdW5jdGlvbihhKXt0aGlzLmdldExhc3QoYSkuaW5wdXRzKyt9LHJlbW92ZTpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TGFzdEluZGV4KGEpOy0xIT1hJiZ0aGlzLnN0YWNrLnNwbGljZShhLDEpfSxyZXNldElucHV0czpmdW5jdGlvbihhKXtpZihcIm51bWJlclwiPT10eXBlb2YgYSl0aGlzLmdldExhc3QoYSkuaW5wdXRzPTA7ZWxzZSBmb3IoYT10aGlzLnN0YWNrLmxlbmd0aDthLS07KXRoaXMuc3RhY2tbYV0uaW5wdXRzPTB9LGdldFRvdGFsSW5wdXRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuc3RhY2subGVuZ3RoLGI9MDthLS07KWIrPXRoaXMuc3RhY2tbYV0uaW5wdXRzO3JldHVybiBifSxjbGVhblVwOmZ1bmN0aW9uKGEpe2E9YS5kYXRhLiQ7YS5jdHJsS2V5fHxhLm1ldGFLZXl8fHRoaXMucmVtb3ZlKDE3KTthLnNoaWZ0S2V5fHx0aGlzLnJlbW92ZSgxNik7YS5hbHRLZXl8fHRoaXMucmVtb3ZlKDE4KX19fSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcIndzY1wiLHtyZXF1aXJlczpcImRpYWxvZ1wiLHBhcnNlQXBpOmZ1bmN0aW9uKGEpe2EuY29uZmlnLndzY19vbkZpbmlzaD1cImZ1bmN0aW9uXCI9PT10eXBlb2YgYS5jb25maWcud3NjX29uRmluaXNoP2EuY29uZmlnLndzY19vbkZpbmlzaDpmdW5jdGlvbigpe307YS5jb25maWcud3NjX29uQ2xvc2U9XCJmdW5jdGlvblwiPT09dHlwZW9mIGEuY29uZmlnLndzY19vbkNsb3NlP2EuY29uZmlnLndzY19vbkNsb3NlOmZ1bmN0aW9uKCl7fX0scGFyc2VDb25maWc6ZnVuY3Rpb24oYSl7YS5jb25maWcud3NjX2N1c3RvbWVySWQ9YS5jb25maWcud3NjX2N1c3RvbWVySWR8fENLRURJVE9SLmNvbmZpZy53c2NfY3VzdG9tZXJJZHx8XCIxOnVhM3h3MS0yWHlHSjMtR1dydUQzLTZPRk5UMS1vWGN1QjEtblI2QnA0LWhnUUhjLUVjWW5nMy1zZFJYRzMtTk9mRmtcIjthLmNvbmZpZy53c2NfY3VzdG9tRGljdGlvbmFyeUlkcz1hLmNvbmZpZy53c2NfY3VzdG9tRGljdGlvbmFyeUlkc3x8XHJcbkNLRURJVE9SLmNvbmZpZy53c2NfY3VzdG9tRGljdGlvbmFyeUlkc3x8XCJcIjthLmNvbmZpZy53c2NfdXNlckRpY3Rpb25hcnlOYW1lPWEuY29uZmlnLndzY191c2VyRGljdGlvbmFyeU5hbWV8fENLRURJVE9SLmNvbmZpZy53c2NfdXNlckRpY3Rpb25hcnlOYW1lfHxcIlwiO2EuY29uZmlnLndzY19jdXN0b21Mb2FkZXJTY3JpcHQ9YS5jb25maWcud3NjX2N1c3RvbUxvYWRlclNjcmlwdHx8Q0tFRElUT1IuY29uZmlnLndzY19jdXN0b21Mb2FkZXJTY3JpcHQ7Q0tFRElUT1IuY29uZmlnLndzY19jbWQ9YS5jb25maWcud3NjX2NtZHx8Q0tFRElUT1IuY29uZmlnLndzY19jbWR8fFwic3BlbGxcIjtDS0VESVRPUi5jb25maWcud3NjX3ZlcnNpb249XCJ2NC4zLjAtbWFzdGVyLWQ3NjkyMzNcIjtDS0VESVRPUi5jb25maWcud3NjX3JlbW92ZUdsb2JhbFZhcmlhYmxlPSEwfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLmVudjt0aGlzLnBhcnNlQ29uZmlnKGEpO3RoaXMucGFyc2VBcGkoYSk7XHJcbmEuYWRkQ29tbWFuZChcImNoZWNrc3BlbGxcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImNoZWNrc3BlbGxcIikpLm1vZGVzPXt3eXNpd3lnOiFDS0VESVRPUi5lbnYub3BlcmEmJiFDS0VESVRPUi5lbnYuYWlyJiZkb2N1bWVudC5kb21haW49PXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSYmIShiLmllJiYoOD5iLnZlcnNpb258fGIucXVpcmtzKSl9O1widW5kZWZpbmVkXCI9PXR5cGVvZiBhLnBsdWdpbnMuc2NheXQmJmEudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNwZWxsQ2hlY2tlclwiLHtsYWJlbDphLmxhbmcud3NjLnRvb2xiYXIsY2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT9hLmNvbnRhaW5lci5nZXRUZXh0KCk6YS5kb2N1bWVudC5nZXRCb2R5KCkuZ2V0VGV4dCgpOyhiPWIucmVwbGFjZSgvXFxzL2csXCJcIikpP2EuZXhlY0NvbW1hbmQoXCJjaGVja3NwZWxsXCIpOmFsZXJ0KFwiTm90aGluZyB0byBjaGVjayFcIil9LFxyXG50b29sYmFyOlwic3BlbGxjaGVja2VyLDEwXCJ9KTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiY2hlY2tzcGVsbFwiLHRoaXMucGF0aCsoQ0tFRElUT1IuZW52LmllJiY3Pj1DS0VESVRPUi5lbnYudmVyc2lvbj9cImRpYWxvZ3Mvd3NjX2llLmpzXCI6d2luZG93LnBvc3RNZXNzYWdlP1wiZGlhbG9ncy93c2MuanNcIjpcImRpYWxvZ3Mvd3NjX2llLmpzXCIpKX19KTtDS0VESVRPUi5jb25maWcucGx1Z2lucz0nZGlhbG9ndWksZGlhbG9nLGFib3V0LGExMXloZWxwLGRpYWxvZ2FkdnRhYixiYXNpY3N0eWxlcyxiaWRpLGJsb2NrcXVvdGUsY2xpcGJvYXJkLGJ1dHRvbixwYW5lbGJ1dHRvbixwYW5lbCxmbG9hdHBhbmVsLGNvbG9yYnV0dG9uLGNvbG9yZGlhbG9nLHRlbXBsYXRlcyxtZW51LGNvbnRleHRtZW51LGRpdixyZXNpemUsdG9vbGJhcixlbGVtZW50c3BhdGgsZW50ZXJrZXksZW50aXRpZXMscG9wdXAsZmlsZWJyb3dzZXIsZmluZCxmYWtlb2JqZWN0cyxmbGFzaCxmbG9hdGluZ3NwYWNlLGxpc3RibG9jayxyaWNoY29tYm8sZm9udCxmb3Jtcyxmb3JtYXQsaG9yaXpvbnRhbHJ1bGUsaHRtbHdyaXRlcixpZnJhbWUsd3lzaXd5Z2FyZWEsaW1hZ2UsaW5kZW50LGluZGVudGJsb2NrLGluZGVudGxpc3Qsc21pbGV5LGp1c3RpZnksbWVudWJ1dHRvbixsYW5ndWFnZSxsaW5rLGxpc3QsbGlzdHN0eWxlLG1hZ2ljbGluZSxtYXhpbWl6ZSxuZXdwYWdlLHBhZ2VicmVhayxwYXN0ZXRleHQscGFzdGVmcm9td29yZCxwcmV2aWV3LHByaW50LHJlbW92ZWZvcm1hdCxzYXZlLHNlbGVjdGFsbCxzaG93YmxvY2tzLHNob3dib3JkZXJzLHNvdXJjZWFyZWEsc3BlY2lhbGNoYXIsc2NheXQsc3R5bGVzY29tYm8sdGFiLHRhYmxlLHRhYmxldG9vbHMsdW5kbyx3c2MnO0NLRURJVE9SLmNvbmZpZy5za2luPSdtb29ubyc7KGZ1bmN0aW9uKCkge3ZhciBzZXRJY29ucyA9IGZ1bmN0aW9uKGljb25zLCBzdHJpcCkge3ZhciBwYXRoID0gQ0tFRElUT1IuZ2V0VXJsKCAncGx1Z2lucy8nICsgc3RyaXAgKTtpY29ucyA9IGljb25zLnNwbGl0KCAnLCcgKTtmb3IgKCB2YXIgaSA9IDA7IGkgPCBpY29ucy5sZW5ndGg7IGkrKyApQ0tFRElUT1Iuc2tpbi5pY29uc1sgaWNvbnNbIGkgXSBdID0geyBwYXRoOiBwYXRoLCBvZmZzZXQ6IC1pY29uc1sgKytpIF0sIGJnc2l6ZSA6IGljb25zWyArK2kgXSB9O307aWYgKENLRURJVE9SLmVudi5oaWRwaSkgc2V0SWNvbnMoJ2Fib3V0LDAsLGJvbGQsMjQsLGl0YWxpYyw0OCwsc3RyaWtlLDcyLCxzdWJzY3JpcHQsOTYsLHN1cGVyc2NyaXB0LDEyMCwsdW5kZXJsaW5lLDE0NCwsYmlkaWx0ciwxNjgsLGJpZGlydGwsMTkyLCxibG9ja3F1b3RlLDIxNiwsY29weS1ydGwsMjQwLCxjb3B5LDI2NCwsY3V0LXJ0bCwyODgsLGN1dCwzMTIsLHBhc3RlLXJ0bCwzMzYsLHBhc3RlLDM2MCwsYmdjb2xvciwzODQsLHRleHRjb2xvciw0MDgsLHRlbXBsYXRlcy1ydGwsNDMyLCx0ZW1wbGF0ZXMsNDU2LCxjcmVhdGVkaXYsNDgwLCxmaW5kLXJ0bCw1MDQsLGZpbmQsNTI4LCxyZXBsYWNlLDU1MiwsZmxhc2gsNTc2LCxidXR0b24sNjAwLCxjaGVja2JveCw2MjQsLGZvcm0sNjQ4LCxoaWRkZW5maWVsZCw2NzIsLGltYWdlYnV0dG9uLDY5NiwscmFkaW8sNzIwLCxzZWxlY3QtcnRsLDc0NCwsc2VsZWN0LDc2OCwsdGV4dGFyZWEtcnRsLDc5MiwsdGV4dGFyZWEsODE2LCx0ZXh0ZmllbGQtcnRsLDg0MCwsdGV4dGZpZWxkLDg2NCwsaG9yaXpvbnRhbHJ1bGUsODg4LCxpZnJhbWUsOTEyLCxpbWFnZSw5MzYsLGluZGVudC1ydGwsOTYwLCxpbmRlbnQsOTg0LCxvdXRkZW50LXJ0bCwxMDA4LCxvdXRkZW50LDEwMzIsLHNtaWxleSwxMDU2LCxqdXN0aWZ5YmxvY2ssMTA4MCwsanVzdGlmeWNlbnRlciwxMTA0LCxqdXN0aWZ5bGVmdCwxMTI4LCxqdXN0aWZ5cmlnaHQsMTE1MiwsbGFuZ3VhZ2UsMTE3NiwsYW5jaG9yLXJ0bCwxMjAwLCxhbmNob3IsMTIyNCwsbGluaywxMjQ4LCx1bmxpbmssMTI3MiwsYnVsbGV0ZWRsaXN0LXJ0bCwxMjk2LCxidWxsZXRlZGxpc3QsMTMyMCwsbnVtYmVyZWRsaXN0LXJ0bCwxMzQ0LCxudW1iZXJlZGxpc3QsMTM2OCwsbWF4aW1pemUsMTM5MiwsbmV3cGFnZS1ydGwsMTQxNiwsbmV3cGFnZSwxNDQwLCxwYWdlYnJlYWstcnRsLDE0NjQsLHBhZ2VicmVhaywxNDg4LCxwYXN0ZXRleHQtcnRsLDE1MTIsLHBhc3RldGV4dCwxNTM2LCxwYXN0ZWZyb213b3JkLXJ0bCwxNTYwLCxwYXN0ZWZyb213b3JkLDE1ODQsLHByZXZpZXctcnRsLDE2MDgsLHByZXZpZXcsMTYzMiwscHJpbnQsMTY1NiwscmVtb3ZlZm9ybWF0LDE2ODAsLHNhdmUsMTcwNCwsc2VsZWN0YWxsLDE3MjgsLHNob3dibG9ja3MtcnRsLDE3NTIsLHNob3dibG9ja3MsMTc3Niwsc291cmNlLXJ0bCwxODAwLCxzb3VyY2UsMTgyNCwsc3BlY2lhbGNoYXIsMTg0OCwsc2NheXQsMTg3MiwsdGFibGUsMTg5NiwscmVkby1ydGwsMTkyMCwscmVkbywxOTQ0LCx1bmRvLXJ0bCwxOTY4LCx1bmRvLDE5OTIsLHNwZWxsY2hlY2tlciwyMDE2LCcsJ2ljb25zX2hpZHBpLnBuZycpO2Vsc2Ugc2V0SWNvbnMoJ2Fib3V0LDAsYXV0byxib2xkLDI0LGF1dG8saXRhbGljLDQ4LGF1dG8sc3RyaWtlLDcyLGF1dG8sc3Vic2NyaXB0LDk2LGF1dG8sc3VwZXJzY3JpcHQsMTIwLGF1dG8sdW5kZXJsaW5lLDE0NCxhdXRvLGJpZGlsdHIsMTY4LGF1dG8sYmlkaXJ0bCwxOTIsYXV0byxibG9ja3F1b3RlLDIxNixhdXRvLGNvcHktcnRsLDI0MCxhdXRvLGNvcHksMjY0LGF1dG8sY3V0LXJ0bCwyODgsYXV0byxjdXQsMzEyLGF1dG8scGFzdGUtcnRsLDMzNixhdXRvLHBhc3RlLDM2MCxhdXRvLGJnY29sb3IsMzg0LGF1dG8sdGV4dGNvbG9yLDQwOCxhdXRvLHRlbXBsYXRlcy1ydGwsNDMyLGF1dG8sdGVtcGxhdGVzLDQ1NixhdXRvLGNyZWF0ZWRpdiw0ODAsYXV0byxmaW5kLXJ0bCw1MDQsYXV0byxmaW5kLDUyOCxhdXRvLHJlcGxhY2UsNTUyLGF1dG8sZmxhc2gsNTc2LGF1dG8sYnV0dG9uLDYwMCxhdXRvLGNoZWNrYm94LDYyNCxhdXRvLGZvcm0sNjQ4LGF1dG8saGlkZGVuZmllbGQsNjcyLGF1dG8saW1hZ2VidXR0b24sNjk2LGF1dG8scmFkaW8sNzIwLGF1dG8sc2VsZWN0LXJ0bCw3NDQsYXV0byxzZWxlY3QsNzY4LGF1dG8sdGV4dGFyZWEtcnRsLDc5MixhdXRvLHRleHRhcmVhLDgxNixhdXRvLHRleHRmaWVsZC1ydGwsODQwLGF1dG8sdGV4dGZpZWxkLDg2NCxhdXRvLGhvcml6b250YWxydWxlLDg4OCxhdXRvLGlmcmFtZSw5MTIsYXV0byxpbWFnZSw5MzYsYXV0byxpbmRlbnQtcnRsLDk2MCxhdXRvLGluZGVudCw5ODQsYXV0byxvdXRkZW50LXJ0bCwxMDA4LGF1dG8sb3V0ZGVudCwxMDMyLGF1dG8sc21pbGV5LDEwNTYsYXV0byxqdXN0aWZ5YmxvY2ssMTA4MCxhdXRvLGp1c3RpZnljZW50ZXIsMTEwNCxhdXRvLGp1c3RpZnlsZWZ0LDExMjgsYXV0byxqdXN0aWZ5cmlnaHQsMTE1MixhdXRvLGxhbmd1YWdlLDExNzYsYXV0byxhbmNob3ItcnRsLDEyMDAsYXV0byxhbmNob3IsMTIyNCxhdXRvLGxpbmssMTI0OCxhdXRvLHVubGluaywxMjcyLGF1dG8sYnVsbGV0ZWRsaXN0LXJ0bCwxMjk2LGF1dG8sYnVsbGV0ZWRsaXN0LDEzMjAsYXV0byxudW1iZXJlZGxpc3QtcnRsLDEzNDQsYXV0byxudW1iZXJlZGxpc3QsMTM2OCxhdXRvLG1heGltaXplLDEzOTIsYXV0byxuZXdwYWdlLXJ0bCwxNDE2LGF1dG8sbmV3cGFnZSwxNDQwLGF1dG8scGFnZWJyZWFrLXJ0bCwxNDY0LGF1dG8scGFnZWJyZWFrLDE0ODgsYXV0byxwYXN0ZXRleHQtcnRsLDE1MTIsYXV0byxwYXN0ZXRleHQsMTUzNixhdXRvLHBhc3RlZnJvbXdvcmQtcnRsLDE1NjAsYXV0byxwYXN0ZWZyb213b3JkLDE1ODQsYXV0byxwcmV2aWV3LXJ0bCwxNjA4LGF1dG8scHJldmlldywxNjMyLGF1dG8scHJpbnQsMTY1NixhdXRvLHJlbW92ZWZvcm1hdCwxNjgwLGF1dG8sc2F2ZSwxNzA0LGF1dG8sc2VsZWN0YWxsLDE3MjgsYXV0byxzaG93YmxvY2tzLXJ0bCwxNzUyLGF1dG8sc2hvd2Jsb2NrcywxNzc2LGF1dG8sc291cmNlLXJ0bCwxODAwLGF1dG8sc291cmNlLDE4MjQsYXV0byxzcGVjaWFsY2hhciwxODQ4LGF1dG8sc2NheXQsMTg3MixhdXRvLHRhYmxlLDE4OTYsYXV0byxyZWRvLXJ0bCwxOTIwLGF1dG8scmVkbywxOTQ0LGF1dG8sdW5kby1ydGwsMTk2OCxhdXRvLHVuZG8sMTk5MixhdXRvLHNwZWxsY2hlY2tlciwyMDE2LGF1dG8nLCdpY29ucy5wbmcnKTt9KSgpO0NLRURJVE9SLmxhbmcubGFuZ3VhZ2VzPXtcImFmXCI6MSxcInNxXCI6MSxcImFyXCI6MSxcImV1XCI6MSxcImJuXCI6MSxcImJzXCI6MSxcImJnXCI6MSxcImNhXCI6MSxcInpoLWNuXCI6MSxcInpoXCI6MSxcImhyXCI6MSxcImNzXCI6MSxcImRhXCI6MSxcIm5sXCI6MSxcImVuXCI6MSxcImVuLWF1XCI6MSxcImVuLWNhXCI6MSxcImVuLWdiXCI6MSxcImVvXCI6MSxcImV0XCI6MSxcImZvXCI6MSxcImZpXCI6MSxcImZyXCI6MSxcImZyLWNhXCI6MSxcImdsXCI6MSxcImthXCI6MSxcImRlXCI6MSxcImRlLWNoXCI6MSxcImVsXCI6MSxcImd1XCI6MSxcImhlXCI6MSxcImhpXCI6MSxcImh1XCI6MSxcImlzXCI6MSxcImlkXCI6MSxcIml0XCI6MSxcImphXCI6MSxcImttXCI6MSxcImtvXCI6MSxcImt1XCI6MSxcImx2XCI6MSxcImx0XCI6MSxcIm1rXCI6MSxcIm1zXCI6MSxcIm1uXCI6MSxcIm5vXCI6MSxcIm5iXCI6MSxcImZhXCI6MSxcInBsXCI6MSxcInB0LWJyXCI6MSxcInB0XCI6MSxcInJvXCI6MSxcInJ1XCI6MSxcInNyXCI6MSxcInNyLWxhdG5cIjoxLFwic2lcIjoxLFwic2tcIjoxLFwic2xcIjoxLFwiZXNcIjoxLFwic3ZcIjoxLFwidHRcIjoxLFwidGhcIjoxLFwidHJcIjoxLFwidWdcIjoxLFwidWtcIjoxLFwidmlcIjoxLFwiY3lcIjoxfTt9KCkpOyIsIi8qZ2xvYmFsIGV4cG9ydHMsIHJlcXVpcmUqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1ldmFsICovXHJcbi8qIEpTT05QYXRoIDAuOC4wIC0gWFBhdGggZm9yIEpTT05cclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDA3IFN0ZWZhbiBHb2Vzc25lciAoZ29lc3NuZXIubmV0KVxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpIGxpY2VuY2UuXHJcbiAqL1xyXG5cclxudmFyIG1vZHVsZTtcclxuKGZ1bmN0aW9uIChyZXF1aXJlKSB7J3VzZSBzdHJpY3QnO1xyXG5cclxuLy8gTWFrZSBzdXJlIHRvIGtub3cgaWYgd2UgYXJlIGluIHJlYWwgbm9kZSBvciBub3QgKHRoZSBgcmVxdWlyZWAgdmFyaWFibGVcclxuLy8gY291bGQgYWN0dWFsbHkgYmUgcmVxdWlyZS5qcywgZm9yIGV4YW1wbGUuXHJcbnZhciBpc05vZGUgPSBtb2R1bGUgJiYgISFtb2R1bGUuZXhwb3J0cztcclxuXHJcbnZhciBhbGxvd2VkUmVzdWx0VHlwZXMgPSBbJ3ZhbHVlJywgJ3BhdGgnLCAncG9pbnRlcicsICdwYXJlbnQnLCAncGFyZW50UHJvcGVydHknLCAnYWxsJ107XHJcblxyXG52YXIgdm0gPSBpc05vZGVcclxuICAgID8gcmVxdWlyZSgndm0nKSA6IHtcclxuICAgICAgICBydW5Jbk5ld0NvbnRleHQ6IGZ1bmN0aW9uIChleHByLCBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBldmFsKE9iamVjdC5rZXlzKGNvbnRleHQpLnJlZHVjZShmdW5jdGlvbiAocywgdnIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAndmFyICcgKyB2ciArICc9JyArIEpTT04uc3RyaW5naWZ5KGNvbnRleHRbdnJdKS5yZXBsYWNlKC9cXHUyMDI4fFxcdTIwMjkvZywgZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vd3d3LnRoZXNwYW5uZXIuY28udWsvMjAxMS8wNy8yNS90aGUtanNvbi1zcGVjaWZpY2F0aW9uLWlzLW5vdy13cm9uZy9cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1xcXFx1MjAyJyArIChtID09PSAnXFx1MjAyOCcgPyAnOCcgOiAnOScpO1xyXG4gICAgICAgICAgICAgICAgfSkgKyAnOycgKyBzO1xyXG4gICAgICAgICAgICB9LCBleHByKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbmZ1bmN0aW9uIHB1c2ggKGFyciwgZWxlbSkge2FyciA9IGFyci5zbGljZSgpOyBhcnIucHVzaChlbGVtKTsgcmV0dXJuIGFycjt9XHJcbmZ1bmN0aW9uIHVuc2hpZnQgKGVsZW0sIGFycikge2FyciA9IGFyci5zbGljZSgpOyBhcnIudW5zaGlmdChlbGVtKTsgcmV0dXJuIGFycjt9XHJcbmZ1bmN0aW9uIE5ld0Vycm9yICh2YWx1ZSkge1xyXG4gIHRoaXMuYXZvaWROZXcgPSB0cnVlO1xyXG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICB0aGlzLm1lc3NhZ2UgPSAnSlNPTlBhdGggc2hvdWxkIG5vdCBiZSBjYWxsZWQgd2l0aCBcIm5ld1wiIChpdCBwcmV2ZW50cyByZXR1cm4gb2YgKHVud3JhcHBlZCkgc2NhbGFyIHZhbHVlcyknO1xyXG59XHJcblxyXG5mdW5jdGlvbiBKU09OUGF0aCAob3B0cywgZXhwciwgb2JqLCBjYWxsYmFjaywgb3RoZXJUeXBlQ2FsbGJhY2spIHtcclxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBKU09OUGF0aCkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05QYXRoKG9wdHMsIGV4cHIsIG9iaiwgY2FsbGJhY2ssIG90aGVyVHlwZUNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFlLmF2b2lkTmV3KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgb3RoZXJUeXBlQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgICAgICBjYWxsYmFjayA9IG9iajtcclxuICAgICAgICBvYmogPSBleHByO1xyXG4gICAgICAgIGV4cHIgPSBvcHRzO1xyXG4gICAgICAgIG9wdHMgPSB7fTtcclxuICAgIH1cclxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgdmFyIG9iakFyZ3MgPSBvcHRzLmhhc093blByb3BlcnR5KCdqc29uJykgJiYgb3B0cy5oYXNPd25Qcm9wZXJ0eSgncGF0aCcpO1xyXG4gICAgdGhpcy5qc29uID0gb3B0cy5qc29uIHx8IG9iajtcclxuICAgIHRoaXMucGF0aCA9IG9wdHMucGF0aCB8fCBleHByO1xyXG4gICAgdGhpcy5yZXN1bHRUeXBlID0gKG9wdHMucmVzdWx0VHlwZSAmJiBvcHRzLnJlc3VsdFR5cGUudG9Mb3dlckNhc2UoKSkgfHwgJ3ZhbHVlJztcclxuICAgIHRoaXMuZmxhdHRlbiA9IG9wdHMuZmxhdHRlbiB8fCBmYWxzZTtcclxuICAgIHRoaXMud3JhcCA9IG9wdHMuaGFzT3duUHJvcGVydHkoJ3dyYXAnKSA/IG9wdHMud3JhcCA6IHRydWU7XHJcbiAgICB0aGlzLnNhbmRib3ggPSBvcHRzLnNhbmRib3ggfHwge307XHJcbiAgICB0aGlzLnByZXZlbnRFdmFsID0gb3B0cy5wcmV2ZW50RXZhbCB8fCBmYWxzZTtcclxuICAgIHRoaXMucGFyZW50ID0gb3B0cy5wYXJlbnQgfHwgbnVsbDtcclxuICAgIHRoaXMucGFyZW50UHJvcGVydHkgPSBvcHRzLnBhcmVudFByb3BlcnR5IHx8IG51bGw7XHJcbiAgICB0aGlzLmNhbGxiYWNrID0gb3B0cy5jYWxsYmFjayB8fCBjYWxsYmFjayB8fCBudWxsO1xyXG4gICAgdGhpcy5vdGhlclR5cGVDYWxsYmFjayA9IG9wdHMub3RoZXJUeXBlQ2FsbGJhY2sgfHwgb3RoZXJUeXBlQ2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3Qgc3VwcGx5IGFuIG90aGVyVHlwZUNhbGxiYWNrIGNhbGxiYWNrIG9wdGlvbiB3aXRoIHRoZSBAb3RoZXIoKSBvcGVyYXRvci4nKTtcclxuICAgIH07XHJcblxyXG4gICAgaWYgKG9wdHMuYXV0b3N0YXJ0ICE9PSBmYWxzZSkge1xyXG4gICAgICAgIHZhciByZXQgPSB0aGlzLmV2YWx1YXRlKHtcclxuICAgICAgICAgICAgcGF0aDogKG9iakFyZ3MgPyBvcHRzLnBhdGggOiBleHByKSxcclxuICAgICAgICAgICAganNvbjogKG9iakFyZ3MgPyBvcHRzLmpzb24gOiBvYmopXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCFyZXQgfHwgdHlwZW9mIHJldCAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE5ld0Vycm9yKHJldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFBVQkxJQyBNRVRIT0RTXHJcblxyXG5KU09OUGF0aC5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoZXhwciwganNvbiwgY2FsbGJhY2ssIG90aGVyVHlwZUNhbGxiYWNrKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgZmxhdHRlbiA9IHRoaXMuZmxhdHRlbixcclxuICAgICAgICB3cmFwID0gdGhpcy53cmFwLFxyXG4gICAgICAgIGN1cnJQYXJlbnQgPSB0aGlzLnBhcmVudCxcclxuICAgICAgICBjdXJyUGFyZW50UHJvcGVydHkgPSB0aGlzLnBhcmVudFByb3BlcnR5O1xyXG5cclxuICAgIHRoaXMuY3VyclJlc3VsdFR5cGUgPSB0aGlzLnJlc3VsdFR5cGU7XHJcbiAgICB0aGlzLmN1cnJQcmV2ZW50RXZhbCA9IHRoaXMucHJldmVudEV2YWw7XHJcbiAgICB0aGlzLmN1cnJTYW5kYm94ID0gdGhpcy5zYW5kYm94O1xyXG4gICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCB0aGlzLmNhbGxiYWNrO1xyXG4gICAgdGhpcy5jdXJyT3RoZXJUeXBlQ2FsbGJhY2sgPSBvdGhlclR5cGVDYWxsYmFjayB8fCB0aGlzLm90aGVyVHlwZUNhbGxiYWNrO1xyXG5cclxuICAgIGpzb24gPSBqc29uIHx8IHRoaXMuanNvbjtcclxuICAgIGV4cHIgPSBleHByIHx8IHRoaXMucGF0aDtcclxuICAgIGlmIChleHByICYmIHR5cGVvZiBleHByID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmICghZXhwci5wYXRoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3Qgc3VwcGx5IGEgXCJwYXRoXCIgcHJvcGVydHkgd2hlbiBwcm92aWRpbmcgYW4gb2JqZWN0IGFyZ3VtZW50IHRvIEpTT05QYXRoLmV2YWx1YXRlKCkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGpzb24gPSBleHByLmhhc093blByb3BlcnR5KCdqc29uJykgPyBleHByLmpzb24gOiBqc29uO1xyXG4gICAgICAgIGZsYXR0ZW4gPSBleHByLmhhc093blByb3BlcnR5KCdmbGF0dGVuJykgPyBleHByLmZsYXR0ZW4gOiBmbGF0dGVuO1xyXG4gICAgICAgIHRoaXMuY3VyclJlc3VsdFR5cGUgPSBleHByLmhhc093blByb3BlcnR5KCdyZXN1bHRUeXBlJykgPyBleHByLnJlc3VsdFR5cGUgOiB0aGlzLmN1cnJSZXN1bHRUeXBlO1xyXG4gICAgICAgIHRoaXMuY3VyclNhbmRib3ggPSBleHByLmhhc093blByb3BlcnR5KCdzYW5kYm94JykgPyBleHByLnNhbmRib3ggOiB0aGlzLmN1cnJTYW5kYm94O1xyXG4gICAgICAgIHdyYXAgPSBleHByLmhhc093blByb3BlcnR5KCd3cmFwJykgPyBleHByLndyYXAgOiB3cmFwO1xyXG4gICAgICAgIHRoaXMuY3VyclByZXZlbnRFdmFsID0gZXhwci5oYXNPd25Qcm9wZXJ0eSgncHJldmVudEV2YWwnKSA/IGV4cHIucHJldmVudEV2YWwgOiB0aGlzLmN1cnJQcmV2ZW50RXZhbDtcclxuICAgICAgICBjYWxsYmFjayA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ2NhbGxiYWNrJykgPyBleHByLmNhbGxiYWNrIDogY2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5jdXJyT3RoZXJUeXBlQ2FsbGJhY2sgPSBleHByLmhhc093blByb3BlcnR5KCdvdGhlclR5cGVDYWxsYmFjaycpID8gZXhwci5vdGhlclR5cGVDYWxsYmFjayA6IHRoaXMuY3Vyck90aGVyVHlwZUNhbGxiYWNrO1xyXG4gICAgICAgIGN1cnJQYXJlbnQgPSBleHByLmhhc093blByb3BlcnR5KCdwYXJlbnQnKSA/IGV4cHIucGFyZW50IDogY3VyclBhcmVudDtcclxuICAgICAgICBjdXJyUGFyZW50UHJvcGVydHkgPSBleHByLmhhc093blByb3BlcnR5KCdwYXJlbnRQcm9wZXJ0eScpID8gZXhwci5wYXJlbnRQcm9wZXJ0eSA6IGN1cnJQYXJlbnRQcm9wZXJ0eTtcclxuICAgICAgICBleHByID0gZXhwci5wYXRoO1xyXG4gICAgfVxyXG4gICAgY3VyclBhcmVudCA9IGN1cnJQYXJlbnQgfHwgbnVsbDtcclxuICAgIGN1cnJQYXJlbnRQcm9wZXJ0eSA9IGN1cnJQYXJlbnRQcm9wZXJ0eSB8fCBudWxsO1xyXG5cclxuICAgIGlmIChBcnJheS5pc0FycmF5KGV4cHIpKSB7XHJcbiAgICAgICAgZXhwciA9IEpTT05QYXRoLnRvUGF0aFN0cmluZyhleHByKTtcclxuICAgIH1cclxuICAgIGlmICghZXhwciB8fCAhanNvbiB8fCBhbGxvd2VkUmVzdWx0VHlwZXMuaW5kZXhPZih0aGlzLmN1cnJSZXN1bHRUeXBlKSA9PT0gLTEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9vYmogPSBqc29uO1xyXG5cclxuICAgIHZhciBleHByTGlzdCA9IEpTT05QYXRoLnRvUGF0aEFycmF5KGV4cHIpO1xyXG4gICAgaWYgKGV4cHJMaXN0WzBdID09PSAnJCcgJiYgZXhwckxpc3QubGVuZ3RoID4gMSkge2V4cHJMaXN0LnNoaWZ0KCk7fVxyXG4gICAgdmFyIHJlc3VsdCA9IHRoaXMuX3RyYWNlKGV4cHJMaXN0LCBqc29uLCBbJyQnXSwgY3VyclBhcmVudCwgY3VyclBhcmVudFByb3BlcnR5LCBjYWxsYmFjayk7XHJcbiAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uIChlYSkge3JldHVybiBlYSAmJiAhZWEuaXNQYXJlbnRTZWxlY3Rvcjt9KTtcclxuXHJcbiAgICBpZiAoIXJlc3VsdC5sZW5ndGgpIHtyZXR1cm4gd3JhcCA/IFtdIDogdW5kZWZpbmVkO31cclxuICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAxICYmICF3cmFwICYmICFBcnJheS5pc0FycmF5KHJlc3VsdFswXS52YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UHJlZmVycmVkT3V0cHV0KHJlc3VsdFswXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0LnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBlYSkge1xyXG4gICAgICAgIHZhciB2YWxPclBhdGggPSBzZWxmLl9nZXRQcmVmZXJyZWRPdXRwdXQoZWEpO1xyXG4gICAgICAgIGlmIChmbGF0dGVuICYmIEFycmF5LmlzQXJyYXkodmFsT3JQYXRoKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHZhbE9yUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaCh2YWxPclBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSwgW10pO1xyXG59O1xyXG5cclxuLy8gUFJJVkFURSBNRVRIT0RTXHJcblxyXG5KU09OUGF0aC5wcm90b3R5cGUuX2dldFByZWZlcnJlZE91dHB1dCA9IGZ1bmN0aW9uIChlYSkge1xyXG4gICAgdmFyIHJlc3VsdFR5cGUgPSB0aGlzLmN1cnJSZXN1bHRUeXBlO1xyXG4gICAgc3dpdGNoIChyZXN1bHRUeXBlKSB7XHJcbiAgICBjYXNlICdhbGwnOlxyXG4gICAgICAgIGVhLnBhdGggPSB0eXBlb2YgZWEucGF0aCA9PT0gJ3N0cmluZycgPyBlYS5wYXRoIDogSlNPTlBhdGgudG9QYXRoU3RyaW5nKGVhLnBhdGgpO1xyXG4gICAgICAgIHJldHVybiBlYTtcclxuICAgIGNhc2UgJ3ZhbHVlJzogY2FzZSAncGFyZW50JzogY2FzZSAncGFyZW50UHJvcGVydHknOlxyXG4gICAgICAgIHJldHVybiBlYVtyZXN1bHRUeXBlXTtcclxuICAgIGNhc2UgJ3BhdGgnOlxyXG4gICAgICAgIHJldHVybiBKU09OUGF0aC50b1BhdGhTdHJpbmcoZWFbcmVzdWx0VHlwZV0pO1xyXG4gICAgY2FzZSAncG9pbnRlcic6XHJcbiAgICAgICAgcmV0dXJuIEpTT05QYXRoLnRvUG9pbnRlcihlYS5wYXRoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkpTT05QYXRoLnByb3RvdHlwZS5faGFuZGxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZnVsbFJldE9iaiwgY2FsbGJhY2ssIHR5cGUpIHtcclxuICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBwcmVmZXJyZWRPdXRwdXQgPSB0aGlzLl9nZXRQcmVmZXJyZWRPdXRwdXQoZnVsbFJldE9iaik7XHJcbiAgICAgICAgZnVsbFJldE9iai5wYXRoID0gdHlwZW9mIGZ1bGxSZXRPYmoucGF0aCA9PT0gJ3N0cmluZycgPyBmdWxsUmV0T2JqLnBhdGggOiBKU09OUGF0aC50b1BhdGhTdHJpbmcoZnVsbFJldE9iai5wYXRoKTtcclxuICAgICAgICBjYWxsYmFjayhwcmVmZXJyZWRPdXRwdXQsIHR5cGUsIGZ1bGxSZXRPYmopO1xyXG4gICAgfVxyXG59O1xyXG5cclxuSlNPTlBhdGgucHJvdG90eXBlLl90cmFjZSA9IGZ1bmN0aW9uIChleHByLCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBObyBleHByIHRvIGZvbGxvdz8gcmV0dXJuIHBhdGggYW5kIHZhbHVlIGFzIHRoZSByZXN1bHQgb2YgdGhpcyB0cmFjZSBicmFuY2hcclxuICAgIHZhciByZXRPYmosIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKCFleHByLmxlbmd0aCkge1xyXG4gICAgICAgIHJldE9iaiA9IHtwYXRoOiBwYXRoLCB2YWx1ZTogdmFsLCBwYXJlbnQ6IHBhcmVudCwgcGFyZW50UHJvcGVydHk6IHBhcmVudFByb3BOYW1lfTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYWxsYmFjayhyZXRPYmosIGNhbGxiYWNrLCAndmFsdWUnKTtcclxuICAgICAgICByZXR1cm4gcmV0T2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBsb2MgPSBleHByWzBdLCB4ID0gZXhwci5zbGljZSgxKTtcclxuXHJcbiAgICAvLyBXZSBuZWVkIHRvIGdhdGhlciB0aGUgcmV0dXJuIHZhbHVlIG9mIHJlY3Vyc2l2ZSB0cmFjZSBjYWxscyBpbiBvcmRlciB0b1xyXG4gICAgLy8gZG8gdGhlIHBhcmVudCBzZWwgY29tcHV0YXRpb24uXHJcbiAgICB2YXIgcmV0ID0gW107XHJcbiAgICBmdW5jdGlvbiBhZGRSZXQgKGVsZW1zKSB7cmV0ID0gcmV0LmNvbmNhdChlbGVtcyk7fVxyXG5cclxuICAgIGlmICh2YWwgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbCwgbG9jKSkgeyAvLyBzaW1wbGUgY2FzZS0tZGlyZWN0bHkgZm9sbG93IHByb3BlcnR5XHJcbiAgICAgICAgYWRkUmV0KHRoaXMuX3RyYWNlKHgsIHZhbFtsb2NdLCBwdXNoKHBhdGgsIGxvYyksIHZhbCwgbG9jLCBjYWxsYmFjaykpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9jID09PSAnKicpIHsgLy8gYWxsIGNoaWxkIHByb3BlcnRpZXNcclxuICAgICAgICB0aGlzLl93YWxrKGxvYywgeCwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaywgZnVuY3Rpb24gKG0sIGwsIHgsIHYsIHAsIHBhciwgcHIsIGNiKSB7XHJcbiAgICAgICAgICAgIGFkZFJldChzZWxmLl90cmFjZSh1bnNoaWZ0KG0sIHgpLCB2LCBwLCBwYXIsIHByLCBjYikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9jID09PSAnLi4nKSB7IC8vIGFsbCBkZXNjZW5kZW50IHBhcmVudCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgYWRkUmV0KHRoaXMuX3RyYWNlKHgsIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spKTsgLy8gQ2hlY2sgcmVtYWluaW5nIGV4cHJlc3Npb24gd2l0aCB2YWwncyBpbW1lZGlhdGUgY2hpbGRyZW5cclxuICAgICAgICB0aGlzLl93YWxrKGxvYywgeCwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaywgZnVuY3Rpb24gKG0sIGwsIHgsIHYsIHAsIHBhciwgcHIsIGNiKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IGpvaW4gbSBhbmQgeCBoZXJlIGJlY2F1c2Ugd2Ugb25seSB3YW50IHBhcmVudHMsIG5vdCBzY2FsYXIgdmFsdWVzXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdlttXSA9PT0gJ29iamVjdCcpIHsgLy8gS2VlcCBnb2luZyB3aXRoIHJlY3Vyc2l2ZSBkZXNjZW50IG9uIHZhbCdzIG9iamVjdCBjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgYWRkUmV0KHNlbGYuX3RyYWNlKHVuc2hpZnQobCwgeCksIHZbbV0sIHB1c2gocCwgbSksIHYsIG0sIGNiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxvY1swXSA9PT0gJygnKSB7IC8vIFsoZXhwcildIChkeW5hbWljIHByb3BlcnR5L2luZGV4KVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJQcmV2ZW50RXZhbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2YWwgWyhleHByKV0gcHJldmVudGVkIGluIEpTT05QYXRoIGV4cHJlc3Npb24uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzIHRoaXMgd2lsbCByZXNvbHZlIHRvIGEgcHJvcGVydHkgbmFtZSAoYnV0IHdlIGRvbid0IGtub3cgaXQgeWV0KSwgcHJvcGVydHkgYW5kIHBhcmVudCBpbmZvcm1hdGlvbiBpcyByZWxhdGl2ZSB0byB0aGUgcGFyZW50IG9mIHRoZSBwcm9wZXJ0eSB0byB3aGljaCB0aGlzIGV4cHJlc3Npb24gd2lsbCByZXNvbHZlXHJcbiAgICAgICAgYWRkUmV0KHRoaXMuX3RyYWNlKHVuc2hpZnQodGhpcy5fZXZhbChsb2MsIHZhbCwgcGF0aFtwYXRoLmxlbmd0aCAtIDFdLCBwYXRoLnNsaWNlKDAsIC0xKSwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSksIHgpLCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKSk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGUgcGFyZW50IHNlbCBjb21wdXRhdGlvbiBpcyBoYW5kbGVkIGluIHRoZSBmcmFtZSBhYm92ZSB1c2luZyB0aGVcclxuICAgIC8vIGFuY2VzdG9yIG9iamVjdCBvZiB2YWxcclxuICAgIGVsc2UgaWYgKGxvYyA9PT0gJ14nKSB7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBub3QgYSBmaW5hbCBlbmRwb2ludCwgc28gd2UgZG8gbm90IGludm9rZSB0aGUgY2FsbGJhY2sgaGVyZVxyXG4gICAgICAgIHJldHVybiBwYXRoLmxlbmd0aCA/IHtcclxuICAgICAgICAgICAgcGF0aDogcGF0aC5zbGljZSgwLCAtMSksXHJcbiAgICAgICAgICAgIGV4cHI6IHgsXHJcbiAgICAgICAgICAgIGlzUGFyZW50U2VsZWN0b3I6IHRydWVcclxuICAgICAgICB9IDogW107XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2MgPT09ICd+JykgeyAvLyBwcm9wZXJ0eSBuYW1lXHJcbiAgICAgICAgcmV0T2JqID0ge3BhdGg6IHB1c2gocGF0aCwgbG9jKSwgdmFsdWU6IHBhcmVudFByb3BOYW1lLCBwYXJlbnQ6IHBhcmVudCwgcGFyZW50UHJvcGVydHk6IG51bGx9O1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhbGxiYWNrKHJldE9iaiwgY2FsbGJhY2ssICdwcm9wZXJ0eScpO1xyXG4gICAgICAgIHJldHVybiByZXRPYmo7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2MgPT09ICckJykgeyAvLyByb290IG9ubHlcclxuICAgICAgICBhZGRSZXQodGhpcy5fdHJhY2UoeCwgdmFsLCBwYXRoLCBudWxsLCBudWxsLCBjYWxsYmFjaykpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9jLmluZGV4T2YoJz8oJykgPT09IDApIHsgLy8gWz8oZXhwcildIChmaWx0ZXJpbmcpXHJcbiAgICAgICAgaWYgKHRoaXMuY3VyclByZXZlbnRFdmFsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXZhbCBbPyhleHByKV0gcHJldmVudGVkIGluIEpTT05QYXRoIGV4cHJlc3Npb24uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3dhbGsobG9jLCB4LCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrLCBmdW5jdGlvbiAobSwgbCwgeCwgdiwgcCwgcGFyLCBwciwgY2IpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuX2V2YWwobC5yZXBsYWNlKC9eXFw/XFwoKC4qPylcXCkkLywgJyQxJyksIHZbbV0sIG0sIHAsIHBhciwgcHIpKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRSZXQoc2VsZi5fdHJhY2UodW5zaGlmdChtLCB4KSwgdiwgcCwgcGFyLCBwciwgY2IpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9jLmluZGV4T2YoJywnKSA+IC0xKSB7IC8vIFtuYW1lMSxuYW1lMiwuLi5dXHJcbiAgICAgICAgdmFyIHBhcnRzLCBpO1xyXG4gICAgICAgIGZvciAocGFydHMgPSBsb2Muc3BsaXQoJywnKSwgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhZGRSZXQodGhpcy5fdHJhY2UodW5zaGlmdChwYXJ0c1tpXSwgeCksIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2NbMF0gPT09ICdAJykgeyAvLyB2YWx1ZSB0eXBlOiBAYm9vbGVhbigpLCBldGMuXHJcbiAgICAgICAgdmFyIGFkZFR5cGUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdmFsdWVUeXBlID0gbG9jLnNsaWNlKDEsIC0yKTtcclxuICAgICAgICBzd2l0Y2ggKHZhbHVlVHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ3NjYWxhcic6XHJcbiAgICAgICAgICAgIGlmICghdmFsIHx8IChbJ29iamVjdCcsICdmdW5jdGlvbiddLmluZGV4T2YodHlwZW9mIHZhbCkgPT09IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgYWRkVHlwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnYm9vbGVhbic6IGNhc2UgJ3N0cmluZyc6IGNhc2UgJ3VuZGVmaW5lZCc6IGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IHZhbHVlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgYWRkVHlwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbnVtYmVyJzpcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IHZhbHVlVHlwZSAmJiBpc0Zpbml0ZSh2YWwpKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUeXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdub25GaW5pdGUnOlxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicgJiYgIWlzRmluaXRlKHZhbCkpIHtcclxuICAgICAgICAgICAgICAgIGFkZFR5cGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ29iamVjdCc6XHJcbiAgICAgICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gdmFsdWVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUeXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdhcnJheSc6XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcclxuICAgICAgICAgICAgICAgIGFkZFR5cGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ290aGVyJzpcclxuICAgICAgICAgICAgYWRkVHlwZSA9IHRoaXMuY3Vyck90aGVyVHlwZUNhbGxiYWNrKHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2ludGVnZXInOlxyXG4gICAgICAgICAgICBpZiAodmFsID09PSArdmFsICYmIGlzRmluaXRlKHZhbCkgJiYgISh2YWwgJSAxKSkge1xyXG4gICAgICAgICAgICAgICAgYWRkVHlwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnbnVsbCc6XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFkZFR5cGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWRkVHlwZSkge1xyXG4gICAgICAgICAgICByZXRPYmogPSB7cGF0aDogcGF0aCwgdmFsdWU6IHZhbCwgcGFyZW50OiBwYXJlbnQsIHBhcmVudFByb3BlcnR5OiBwYXJlbnRQcm9wTmFtZX07XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhbGxiYWNrKHJldE9iaiwgY2FsbGJhY2ssICd2YWx1ZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0T2JqO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKC9eKC0/WzAtOV0qKTooLT9bMC05XSopOj8oWzAtOV0qKSQvLnRlc3QobG9jKSkgeyAvLyBbc3RhcnQ6ZW5kOnN0ZXBdICBQeXRob24gc2xpY2Ugc3ludGF4XHJcbiAgICAgICAgYWRkUmV0KHRoaXMuX3NsaWNlKGxvYywgeCwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFdlIGNoZWNrIHRoZSByZXN1bHRpbmcgdmFsdWVzIGZvciBwYXJlbnQgc2VsZWN0aW9ucy4gRm9yIHBhcmVudFxyXG4gICAgLy8gc2VsZWN0aW9ucyB3ZSBkaXNjYXJkIHRoZSB2YWx1ZSBvYmplY3QgYW5kIGNvbnRpbnVlIHRoZSB0cmFjZSB3aXRoIHRoZVxyXG4gICAgLy8gY3VycmVudCB2YWwgb2JqZWN0XHJcbiAgICByZXR1cm4gcmV0LnJlZHVjZShmdW5jdGlvbiAoYWxsLCBlYSkge1xyXG4gICAgICAgIHJldHVybiBhbGwuY29uY2F0KGVhLmlzUGFyZW50U2VsZWN0b3IgPyBzZWxmLl90cmFjZShlYS5leHByLCB2YWwsIGVhLnBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKSA6IGVhKTtcclxuICAgIH0sIFtdKTtcclxufTtcclxuXHJcbkpTT05QYXRoLnByb3RvdHlwZS5fd2FsayA9IGZ1bmN0aW9uIChsb2MsIGV4cHIsIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2ssIGYpIHtcclxuICAgIHZhciBpLCBuLCBtO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG4gICAgICAgIGZvciAoaSA9IDAsIG4gPSB2YWwubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGYoaSwgbG9jLCBleHByLCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGZvciAobSBpbiB2YWwpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIG0pKSB7XHJcbiAgICAgICAgICAgICAgICBmKG0sIGxvYywgZXhwciwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU09OUGF0aC5wcm90b3R5cGUuX3NsaWNlID0gZnVuY3Rpb24gKGxvYywgZXhwciwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaykge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkpIHtyZXR1cm47fVxyXG4gICAgdmFyIGksXHJcbiAgICAgICAgbGVuID0gdmFsLmxlbmd0aCwgcGFydHMgPSBsb2Muc3BsaXQoJzonKSxcclxuICAgICAgICBzdGFydCA9IChwYXJ0c1swXSAmJiBwYXJzZUludChwYXJ0c1swXSwgMTApKSB8fCAwLFxyXG4gICAgICAgIGVuZCA9IChwYXJ0c1sxXSAmJiBwYXJzZUludChwYXJ0c1sxXSwgMTApKSB8fCBsZW4sXHJcbiAgICAgICAgc3RlcCA9IChwYXJ0c1syXSAmJiBwYXJzZUludChwYXJ0c1syXSwgMTApKSB8fCAxO1xyXG4gICAgc3RhcnQgPSAoc3RhcnQgPCAwKSA/IE1hdGgubWF4KDAsIHN0YXJ0ICsgbGVuKSA6IE1hdGgubWluKGxlbiwgc3RhcnQpO1xyXG4gICAgZW5kID0gKGVuZCA8IDApID8gTWF0aC5tYXgoMCwgZW5kICsgbGVuKSA6IE1hdGgubWluKGxlbiwgZW5kKTtcclxuICAgIHZhciByZXQgPSBbXTtcclxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IHN0ZXApIHtcclxuICAgICAgICByZXQgPSByZXQuY29uY2F0KHRoaXMuX3RyYWNlKHVuc2hpZnQoaSwgZXhwciksIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn07XHJcblxyXG5KU09OUGF0aC5wcm90b3R5cGUuX2V2YWwgPSBmdW5jdGlvbiAoY29kZSwgX3YsIF92bmFtZSwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSkge1xyXG4gICAgaWYgKCF0aGlzLl9vYmogfHwgIV92KSB7cmV0dXJuIGZhbHNlO31cclxuICAgIGlmIChjb2RlLmluZGV4T2YoJ0BwYXJlbnRQcm9wZXJ0eScpID4gLTEpIHtcclxuICAgICAgICB0aGlzLmN1cnJTYW5kYm94Ll8kX3BhcmVudFByb3BlcnR5ID0gcGFyZW50UHJvcE5hbWU7XHJcbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvQHBhcmVudFByb3BlcnR5L2csICdfJF9wYXJlbnRQcm9wZXJ0eScpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvZGUuaW5kZXhPZignQHBhcmVudCcpID4gLTEpIHtcclxuICAgICAgICB0aGlzLmN1cnJTYW5kYm94Ll8kX3BhcmVudCA9IHBhcmVudDtcclxuICAgICAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9AcGFyZW50L2csICdfJF9wYXJlbnQnKTtcclxuICAgIH1cclxuICAgIGlmIChjb2RlLmluZGV4T2YoJ0Bwcm9wZXJ0eScpID4gLTEpIHtcclxuICAgICAgICB0aGlzLmN1cnJTYW5kYm94Ll8kX3Byb3BlcnR5ID0gX3ZuYW1lO1xyXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL0Bwcm9wZXJ0eS9nLCAnXyRfcHJvcGVydHknKTtcclxuICAgIH1cclxuICAgIGlmIChjb2RlLmluZGV4T2YoJ0BwYXRoJykgPiAtMSkge1xyXG4gICAgICAgIHRoaXMuY3VyclNhbmRib3guXyRfcGF0aCA9IEpTT05QYXRoLnRvUGF0aFN0cmluZyhwYXRoLmNvbmNhdChbX3ZuYW1lXSkpO1xyXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL0BwYXRoL2csICdfJF9wYXRoJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29kZS5tYXRjaCgvQChbXFwuXFxzXFwpXFxbXSkvKSkge1xyXG4gICAgICAgIHRoaXMuY3VyclNhbmRib3guXyRfdiA9IF92O1xyXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL0AoW1xcLlxcc1xcKVxcW10pL2csICdfJF92JDEnKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHZtLnJ1bkluTmV3Q29udGV4dChjb2RlLCB0aGlzLmN1cnJTYW5kYm94KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdqc29uUGF0aDogJyArIGUubWVzc2FnZSArICc6ICcgKyBjb2RlKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFBVQkxJQyBDTEFTUyBQUk9QRVJUSUVTIEFORCBNRVRIT0RTXHJcblxyXG4vLyBDb3VsZCBzdG9yZSB0aGUgY2FjaGUgb2JqZWN0IGl0c2VsZlxyXG5KU09OUGF0aC5jYWNoZSA9IHt9O1xyXG5cclxuSlNPTlBhdGgudG9QYXRoU3RyaW5nID0gZnVuY3Rpb24gKHBhdGhBcnIpIHtcclxuICAgIHZhciBpLCBuLCB4ID0gcGF0aEFyciwgcCA9ICckJztcclxuICAgIGZvciAoaSA9IDEsIG4gPSB4Lmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgIGlmICghKC9eKH58XFxefEAuKj9cXChcXCkpJC8pLnRlc3QoeFtpXSkpIHtcclxuICAgICAgICAgICAgcCArPSAoL15bMC05Kl0rJC8pLnRlc3QoeFtpXSkgPyAoJ1snICsgeFtpXSArICddJykgOiAoXCJbJ1wiICsgeFtpXSArIFwiJ11cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XHJcblxyXG5KU09OUGF0aC50b1BvaW50ZXIgPSBmdW5jdGlvbiAocG9pbnRlcikge1xyXG4gICAgdmFyIGksIG4sIHggPSBwb2ludGVyLCBwID0gJyc7XHJcbiAgICBmb3IgKGkgPSAxLCBuID0geC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBpZiAoISgvXih+fFxcXnxALio/XFwoXFwpKSQvKS50ZXN0KHhbaV0pKSB7XHJcbiAgICAgICAgICAgIHAgKz0gJy8nICsgeFtpXS50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXH4vZywgJ34wJylcclxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCAnfjEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcclxuXHJcbkpTT05QYXRoLnRvUGF0aEFycmF5ID0gZnVuY3Rpb24gKGV4cHIpIHtcclxuICAgIHZhciBjYWNoZSA9IEpTT05QYXRoLmNhY2hlO1xyXG4gICAgaWYgKGNhY2hlW2V4cHJdKSB7cmV0dXJuIGNhY2hlW2V4cHJdO31cclxuICAgIHZhciBzdWJ4ID0gW107XHJcbiAgICB2YXIgbm9ybWFsaXplZCA9IGV4cHJcclxuICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL0AoPzpudWxsfGJvb2xlYW58bnVtYmVyfHN0cmluZ3xpbnRlZ2VyfHVuZGVmaW5lZHxub25GaW5pdGV8c2NhbGFyfGFycmF5fG9iamVjdHxmdW5jdGlvbnxvdGhlcilcXChcXCkvZywgJzskJjsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcmVudGhldGljYWwgZXZhbHVhdGlvbnMgKGZpbHRlcmluZyBhbmQgb3RoZXJ3aXNlKSwgZGlyZWN0bHkgd2l0aGluIGJyYWNrZXRzIG9yIHNpbmdsZSBxdW90ZXNcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcWyddKFxcPz9cXCguKj9cXCkpW1xcXSddL2csIGZ1bmN0aW9uICgkMCwgJDEpIHtyZXR1cm4gJ1sjJyArIChzdWJ4LnB1c2goJDEpIC0gMSkgKyAnXSc7fSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBFc2NhcGUgcGVyaW9kcyBhbmQgdGlsZGVzIHdpdGhpbiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcWycoW14nXFxdXSopJ1xcXS9nLCBmdW5jdGlvbiAoJDAsIHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWydcIiArIHByb3AucmVwbGFjZSgvXFwuL2csICclQCUnKS5yZXBsYWNlKC9+L2csICclJUBAJSUnKSArIFwiJ11cIjtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb3BlcnRpZXMgb3BlcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvfi9nLCAnO347JylcclxuICAgICAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSBwcm9wZXJ0eSBib3VuZGFyaWVzXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyc/XFwuJz8oPyFbXlxcW10qXFxdKXxcXFsnPy9nLCAnOycpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVpbnNlcnQgcGVyaW9kcyB3aXRoaW4gcHJvcGVydGllc1xyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8lQCUvZywgJy4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlaW5zZXJ0IHRpbGRlcyB3aXRoaW4gcHJvcGVydGllc1xyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8lJUBAJSUvZywgJ34nKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oPzo7KT8oXFxeKykoPzo7KT8vZywgZnVuY3Rpb24gKCQwLCB1cHMpIHtyZXR1cm4gJzsnICsgdXBzLnNwbGl0KCcnKS5qb2luKCc7JykgKyAnOyc7fSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBEZXNjZW5kZW50c1xyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC87Ozt8OzsvZywgJzsuLjsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0cmFpbGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC87JHwnP1xcXXwnJC9nLCAnJyk7XHJcblxyXG4gICAgdmFyIGV4cHJMaXN0ID0gbm9ybWFsaXplZC5zcGxpdCgnOycpLm1hcChmdW5jdGlvbiAoZXhwcikge1xyXG4gICAgICAgIHZhciBtYXRjaCA9IGV4cHIubWF0Y2goLyMoWzAtOV0rKS8pO1xyXG4gICAgICAgIHJldHVybiAhbWF0Y2ggfHwgIW1hdGNoWzFdID8gZXhwciA6IHN1YnhbbWF0Y2hbMV1dO1xyXG4gICAgfSk7XHJcbiAgICBjYWNoZVtleHByXSA9IGV4cHJMaXN0O1xyXG4gICAgcmV0dXJuIGNhY2hlW2V4cHJdO1xyXG59O1xyXG5cclxuLy8gRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgKGRlcHJlY2F0ZWQpXHJcbkpTT05QYXRoLmV2YWwgPSBmdW5jdGlvbiAob2JqLCBleHByLCBvcHRzKSB7XHJcbiAgICByZXR1cm4gSlNPTlBhdGgob3B0cywgZXhwciwgb2JqKTtcclxufTtcclxuXHJcbmlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgIGRlZmluZShmdW5jdGlvbiAoKSB7cmV0dXJuIEpTT05QYXRoO30pO1xyXG59XHJcbmVsc2UgaWYgKGlzTm9kZSkge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBKU09OUGF0aDtcclxufVxyXG5lbHNlIHtcclxuICAgIHNlbGYuanNvblBhdGggPSB7IC8vIERlcHJlY2F0ZWRcclxuICAgICAgICBldmFsOiBKU09OUGF0aC5ldmFsXHJcbiAgICB9O1xyXG4gICAgc2VsZi5KU09OUGF0aCA9IEpTT05QYXRoO1xyXG59XHJcbn0odHlwZW9mIHJlcXVpcmUgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVpcmUpKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
