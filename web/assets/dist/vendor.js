/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.6",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.6",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.6",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.6",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.6",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.6",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");
d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.6",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.6",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
/* perfect-scrollbar v0.6.12 */
!function t(e,n,r){function o(l,a){if(!n[l]){if(!e[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};e[l][0].call(u.exports,function(t){var n=e[l][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,e,n){"use strict";function r(t){t.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||"undefined"==typeof t){var e=t;i.get(this)||o.initialize(this,e)}else{var n=t;"update"===n?o.update(this):"destroy"===n&&o.destroy(this)}})}}var o=t("../main"),i=t("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],r);else{var l=window.jQuery?window.jQuery:window.$;"undefined"!=typeof l&&r(l)}e.exports=r},{"../main":7,"../plugin/instances":18}],2:[function(t,e,n){"use strict";function r(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function o(t,e){var n=t.className.split(" "),r=n.indexOf(e);r>=0&&n.splice(r,1),t.className=n.join(" ")}n.add=function(t,e){t.classList?t.classList.add(e):r(t,e)},n.remove=function(t,e){t.classList?t.classList.remove(e):o(t,e)},n.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";function r(t,e){return window.getComputedStyle(t)[e]}function o(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function i(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r=r.toString()+"px"),t.style[n]=r}return t}var l={};l.e=function(t,e){var n=document.createElement(t);return n.className=e,n},l.appendTo=function(t,e){return e.appendChild(t),t},l.css=function(t,e,n){return"object"==typeof e?i(t,e):"undefined"==typeof n?r(t,e):o(t,e,n)},l.matches=function(t,e){return"undefined"!=typeof t.matches?t.matches(e):"undefined"!=typeof t.matchesSelector?t.matchesSelector(e):"undefined"!=typeof t.webkitMatchesSelector?t.webkitMatchesSelector(e):"undefined"!=typeof t.mozMatchesSelector?t.mozMatchesSelector(e):"undefined"!=typeof t.msMatchesSelector?t.msMatchesSelector(e):void 0},l.remove=function(t){"undefined"!=typeof t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},l.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return l.matches(t,e)})},e.exports=l},{}],4:[function(t,e,n){"use strict";var r=function(t){this.element=t,this.events={}};r.prototype.bind=function(t,e){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},r.prototype.unbind=function(t,e){var n="undefined"!=typeof e;this.events[t]=this.events[t].filter(function(r){return n&&r!==e?!0:(this.element.removeEventListener(t,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return"undefined"==typeof e&&(e=new r(t),this.eventElements.push(e)),e},o.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},o.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},o.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},o.prototype.once=function(t,e,n){var r=this.eventElement(t),o=function(t){r.unbind(e,o),n(t)};r.bind(e,o)},e.exports=o},{}],5:[function(t,e,n){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var r=t("./class"),o=t("./dom"),i=n.toInt=function(t){return parseInt(t,10)||0},l=n.clone=function(t){if(null===t)return null;if(t.constructor===Array)return t.map(l);if("object"==typeof t){var e={};for(var n in t)e[n]=l(t[n]);return e}return t};n.extend=function(t,e){var n=l(t);for(var r in e)n[r]=l(e[r]);return n},n.isEditable=function(t){return o.matches(t,"input,[contenteditable]")||o.matches(t,"select,[contenteditable]")||o.matches(t,"textarea,[contenteditable]")||o.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=r.list(t),n=0;n<e.length;n++){var o=e[n];0===o.indexOf("ps-")&&r.remove(t,o)}},n.outerWidth=function(t){return i(o.css(t,"width"))+i(o.css(t,"paddingLeft"))+i(o.css(t,"paddingRight"))+i(o.css(t,"borderLeftWidth"))+i(o.css(t,"borderRightWidth"))},n.startScrolling=function(t,e){r.add(t,"ps-in-scrolling"),"undefined"!=typeof e?r.add(t,"ps-"+e):(r.add(t,"ps-x"),r.add(t,"ps-y"))},n.stopScrolling=function(t,e){r.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?r.remove(t,"ps-"+e):(r.remove(t,"ps-x"),r.remove(t,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e,n){"use strict";var r=t("./plugin/destroy"),o=t("./plugin/initialize"),i=t("./plugin/update");e.exports={initialize:o,update:i,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),i=t("./instances");e.exports=function(t){var e=i.get(t);e&&(e.event.unbindAll(),o.remove(e.scrollbarX),o.remove(e.scrollbarY),o.remove(e.scrollbarXRail),o.remove(e.scrollbarYRail),r.removePsClasses(t),i.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e,n){"use strict";function r(t,e){function n(t){return t.getBoundingClientRect()}var r=function(t){t.stopPropagation()};e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarY,"click",r),e.event.bind(e.scrollbarYRail,"click",function(r){var i=o.toInt(e.scrollbarYHeight/2),s=e.railYRatio*(r.pageY-window.pageYOffset-n(e.scrollbarYRail).top-i),c=e.railYRatio*(e.railYHeight-e.scrollbarYHeight),u=s/c;0>u?u=0:u>1&&(u=1),a(t,"top",(e.contentHeight-e.containerHeight)*u),l(t),r.stopPropagation()}),e.settings.stopPropagationOnClick&&e.event.bind(e.scrollbarX,"click",r),e.event.bind(e.scrollbarXRail,"click",function(r){var i=o.toInt(e.scrollbarXWidth/2),s=e.railXRatio*(r.pageX-window.pageXOffset-n(e.scrollbarXRail).left-i),c=e.railXRatio*(e.railXWidth-e.scrollbarXWidth),u=s/c;0>u?u=0:u>1&&(u=1),a(t,"left",(e.contentWidth-e.containerWidth)*u-e.negativeScrollAdjustment),l(t),r.stopPropagation()})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e,n){"use strict";function r(t,e){function n(n){var o=r+n*e.railXRatio,l=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);0>o?e.scrollbarXLeft=0:o>l?e.scrollbarXLeft=l:e.scrollbarXLeft=o;var a=i.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;c(t,"left",a)}var r=null,o=null,a=function(e){n(e.pageX-o),s(t),e.stopPropagation(),e.preventDefault()},u=function(){i.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",a)};e.event.bind(e.scrollbarX,"mousedown",function(n){o=n.pageX,r=i.toInt(l.css(e.scrollbarX,"left"))*e.railXRatio,i.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",a),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(t,e){function n(n){var o=r+n*e.railYRatio,l=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);0>o?e.scrollbarYTop=0:o>l?e.scrollbarYTop=l:e.scrollbarYTop=o;var a=i.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));c(t,"top",a)}var r=null,o=null,a=function(e){n(e.pageY-o),s(t),e.stopPropagation(),e.preventDefault()},u=function(){i.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",a)};e.event.bind(e.scrollbarY,"mousedown",function(n){o=n.pageY,r=i.toInt(l.css(e.scrollbarY,"top"))*e.railYRatio,i.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",a),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var i=t("../../lib/helper"),l=t("../../lib/dom"),a=t("../instances"),s=t("../update-geometry"),c=t("../update-scroll");e.exports=function(t){var e=a.get(t);r(t,e),o(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var r=!1;e.event.bind(t,"mouseenter",function(){r=!0}),e.event.bind(t,"mouseleave",function(){r=!1});var l=!1;e.event.bind(e.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=i.matches(e.scrollbarX,":focus")||i.matches(e.scrollbarY,":focus");if(r||u){var d=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(o.isEditable(d))return}var p=0,f=0;switch(c.which){case 37:p=-30;break;case 38:f=30;break;case 39:p=30;break;case 40:f=-30;break;case 33:f=90;break;case 32:f=c.shiftKey?90:-90;break;case 34:f=-90;break;case 35:f=c.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:f=c.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}s(t,"top",t.scrollTop-f),s(t,"left",t.scrollLeft+p),a(t),l=n(p,f),l&&c.preventDefault()}}})}var o=t("../../lib/helper"),i=t("../../lib/dom"),l=t("../instances"),a=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=l.get(t);r(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function r(t){var e=t.deltaX,n=-1*t.deltaY;return"undefined"!=typeof e&&"undefined"!=typeof n||(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),[e,n]}function o(e,n){var r=t.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){if("TEXTAREA"!==r.tagName&&!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&0>n))return!0;var i=r.scrollLeft-r.clientWidth;if(i>0&&!(0===r.scrollLeft&&0>e||r.scrollLeft===i&&e>0))return!0}return!1}function a(a){var c=r(a),u=c[0],d=c[1];o(u,d)||(s=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(d?l(t,"top",t.scrollTop-d*e.settings.wheelSpeed):l(t,"top",t.scrollTop+u*e.settings.wheelSpeed),s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(u?l(t,"left",t.scrollLeft+u*e.settings.wheelSpeed):l(t,"left",t.scrollLeft-d*e.settings.wheelSpeed),s=!0):(l(t,"top",t.scrollTop-d*e.settings.wheelSpeed),l(t,"left",t.scrollLeft+u*e.settings.wheelSpeed)),i(t),s=s||n(u,d),s&&(a.stopPropagation(),a.preventDefault()))}var s=!1;"undefined"!=typeof window.onwheel?e.event.bind(t,"wheel",a):"undefined"!=typeof window.onmousewheel&&e.event.bind(t,"mousewheel",a)}var o=t("../instances"),i=t("../update-geometry"),l=t("../update-scroll");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e,n){"use strict";function r(t,e){e.event.bind(t,"scroll",function(){i(t)})}var o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19}],15:[function(t,e,n){"use strict";function r(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function r(){c||(c=setInterval(function(){return i.get(t)?(a(t,"top",t.scrollTop+u.top),a(t,"left",t.scrollLeft+u.left),void l(t)):void clearInterval(c)},50))}function s(){c&&(clearInterval(c),c=null),o.stopScrolling(t)}var c=null,u={top:0,left:0},d=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?d=!0:(d=!1,s())}),e.event.bind(window,"mouseup",function(){d&&(d=!1,s())}),e.event.bind(window,"mousemove",function(e){if(d){var n={x:e.pageX,y:e.pageY},i={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<i.left+3?(u.left=-5,o.startScrolling(t,"x")):n.x>i.right-3?(u.left=5,o.startScrolling(t,"x")):u.left=0,n.y<i.top+3?(i.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(t,"y")):n.y>i.bottom-3?(n.y-i.bottom+3<5?u.top=5:u.top=20,o.startScrolling(t,"y")):u.top=0,0===u.top&&0===u.left?s():r()}})}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e,n){"use strict";function r(t,e,n,r){function o(n,r){var o=t.scrollTop,i=t.scrollLeft,l=Math.abs(n),a=Math.abs(r);if(a>l){if(0>r&&o===e.contentHeight-e.containerHeight||r>0&&0===o)return!e.settings.swipePropagation}else if(l>a&&(0>n&&i===e.contentWidth-e.containerWidth||n>0&&0===i))return!e.settings.swipePropagation;return!0}function s(e,n){a(t,"top",t.scrollTop-n),a(t,"left",t.scrollLeft-e),l(t)}function c(){Y=!0}function u(){Y=!1}function d(t){return t.targetTouches?t.targetTouches[0]:t}function p(t){return t.targetTouches&&1===t.targetTouches.length?!0:!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function f(t){if(p(t)){w=!0;var e=d(t);v.pageX=e.pageX,v.pageY=e.pageY,g=(new Date).getTime(),null!==y&&clearInterval(y),t.stopPropagation()}}function h(t){if(!w&&e.settings.swipePropagation&&f(t),!Y&&w&&p(t)){var n=d(t),r={pageX:n.pageX,pageY:n.pageY},i=r.pageX-v.pageX,l=r.pageY-v.pageY;s(i,l),v=r;var a=(new Date).getTime(),c=a-g;c>0&&(m.x=i/c,m.y=l/c,g=a),o(i,l)&&(t.stopPropagation(),t.preventDefault())}}function b(){!Y&&w&&(w=!1,clearInterval(y),y=setInterval(function(){return i.get(t)?Math.abs(m.x)<.01&&Math.abs(m.y)<.01?void clearInterval(y):(s(30*m.x,30*m.y),m.x*=.8,void(m.y*=.8)):void clearInterval(y)},10))}var v={},g=0,m={},y=null,Y=!1,w=!1;n&&(e.event.bind(window,"touchstart",c),e.event.bind(window,"touchend",u),e.event.bind(t,"touchstart",f),e.event.bind(t,"touchmove",h),e.event.bind(t,"touchend",b)),r&&(window.PointerEvent?(e.event.bind(window,"pointerdown",c),e.event.bind(window,"pointerup",u),e.event.bind(t,"pointerdown",f),e.event.bind(t,"pointermove",h),e.event.bind(t,"pointerup",b)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",c),e.event.bind(window,"MSPointerUp",u),e.event.bind(t,"MSPointerDown",f),e.event.bind(t,"MSPointerMove",h),e.event.bind(t,"MSPointerUp",b)))}var o=t("../../lib/helper"),i=t("../instances"),l=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){if(o.env.supportsTouch||o.env.supportsIePointer){var e=i.get(t);r(t,e,o.env.supportsTouch,o.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/class"),i=t("./instances"),l=t("./update-geometry"),a={"click-rail":t("./handler/click-rail"),"drag-scrollbar":t("./handler/drag-scrollbar"),keyboard:t("./handler/keyboard"),wheel:t("./handler/mouse-wheel"),touch:t("./handler/touch"),selection:t("./handler/selection")},s=t("./handler/native-scroll");e.exports=function(t,e){e="object"==typeof e?e:{},o.add(t,"ps-container");var n=i.add(t);n.settings=r.extend(n.settings,e),o.add(t,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(e){a[e](t)}),s(t),l(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";function r(t){function e(){s.add(t,"ps-focus")}function n(){s.remove(t,"ps-focus")}var r=this;r.settings=a.clone(c),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===u.css(t,"direction"),r.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),r.negativeScrollAdjustment=r.isNegativeScroll?t.scrollWidth-t.clientWidth:0,r.event=new d,r.ownerDocument=t.ownerDocument||document,r.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),t),r.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",e),r.event.bind(r.scrollbarX,"blur",n),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=a.toInt(u.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom===r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:a.toInt(u.css(r.scrollbarXRail,"top")),r.railBorderXWidth=a.toInt(u.css(r.scrollbarXRail,"borderLeftWidth"))+a.toInt(u.css(r.scrollbarXRail,"borderRightWidth")),u.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=a.toInt(u.css(r.scrollbarXRail,"marginLeft"))+a.toInt(u.css(r.scrollbarXRail,"marginRight")),u.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),t),r.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",e),r.event.bind(r.scrollbarY,"blur",n),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=a.toInt(u.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight===r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:a.toInt(u.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?a.outerWidth(r.scrollbarY):null,r.railBorderYWidth=a.toInt(u.css(r.scrollbarYRail,"borderTopWidth"))+a.toInt(u.css(r.scrollbarYRail,"borderBottomWidth")),u.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=a.toInt(u.css(r.scrollbarYRail,"marginTop"))+a.toInt(u.css(r.scrollbarYRail,"marginBottom")),u.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function o(t){return t.getAttribute("data-ps-id")}function i(t,e){t.setAttribute("data-ps-id",e)}function l(t){t.removeAttribute("data-ps-id")}var a=t("../lib/helper"),s=t("../lib/class"),c=t("./default-setting"),u=t("../lib/dom"),d=t("../lib/event-manager"),p=t("../lib/guid"),f={};n.add=function(t){var e=p();return i(t,e),f[e]=new r(t),f[e]},n.remove=function(t){delete f[o(t)],l(t)},n.get=function(t){return f[o(t)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e,n){"use strict";function r(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function o(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,a.css(e.scrollbarXRail,n);var r={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?r.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:r.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:r.left=e.scrollbarYLeft+t.scrollLeft,a.css(e.scrollbarYRail,r),a.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),a.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var i=t("../lib/helper"),l=t("../lib/class"),a=t("../lib/dom"),s=t("./instances"),c=t("./update-scroll");e.exports=function(t){var e=s.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var n;t.contains(e.scrollbarXRail)||(n=a.queryChildren(t,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(t){a.remove(t)}),a.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(n=a.queryChildren(t,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(t){a.remove(t)}),a.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=r(e,i.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=i.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=r(e,i.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=i.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),o(t,e),e.scrollbarXActive?l.add(t,"ps-active-x"):(l.remove(t,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,c(t,"left",0)),e.scrollbarYActive?l.add(t,"ps-active-y"):(l.remove(t,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,c(t,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e,n){"use strict";var r,o,i=t("./instances"),l=document.createEvent("Event"),a=document.createEvent("Event"),s=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),f=document.createEvent("Event"),h=document.createEvent("Event"),b=document.createEvent("Event");l.initEvent("ps-scroll-up",!0,!0),a.initEvent("ps-scroll-down",!0,!0),s.initEvent("ps-scroll-left",!0,!0),c.initEvent("ps-scroll-right",!0,!0),u.initEvent("ps-scroll-y",!0,!0),d.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),f.initEvent("ps-x-reach-end",!0,!0),h.initEvent("ps-y-reach-start",!0,!0),b.initEvent("ps-y-reach-end",!0,!0),e.exports=function(t,e,n){if("undefined"==typeof t)throw"You must provide an element to the update-scroll function";if("undefined"==typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===e&&0>=n&&(t.scrollTop=n=0,t.dispatchEvent(h)),"left"===e&&0>=n&&(t.scrollLeft=n=0,t.dispatchEvent(p));var v=i.get(t);"top"===e&&n>=v.contentHeight-v.containerHeight&&(n=v.contentHeight-v.containerHeight,n-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(b)),"left"===e&&n>=v.contentWidth-v.containerWidth&&(n=v.contentWidth-v.containerWidth,n-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(f)),r||(r=t.scrollTop),o||(o=t.scrollLeft),"top"===e&&r>n&&t.dispatchEvent(l),"top"===e&&n>r&&t.dispatchEvent(a),"left"===e&&o>n&&t.dispatchEvent(s),"left"===e&&n>o&&t.dispatchEvent(c),"top"===e&&(t.scrollTop=r=n,t.dispatchEvent(u)),"left"===e&&(t.scrollLeft=o=n,t.dispatchEvent(d))}},{"./instances":18}],21:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),i=t("./instances"),l=t("./update-geometry"),a=t("./update-scroll");e.exports=function(t){var e=i.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,o.css(e.scrollbarXRail,"display","block"),o.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=r.toInt(o.css(e.scrollbarXRail,"marginLeft"))+r.toInt(o.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=r.toInt(o.css(e.scrollbarYRail,"marginTop"))+r.toInt(o.css(e.scrollbarYRail,"marginBottom")),o.css(e.scrollbarXRail,"display","none"),o.css(e.scrollbarYRail,"display","none"),l(t),a(t,"top",t.scrollTop),a(t,"left",t.scrollLeft),o.css(e.scrollbarXRail,"display",""),o.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);
/*!
 * Vue.js v1.0.26
 * (c) 2016 Evan You
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.Vue = factory());
}(this, function () { 'use strict';

  function set(obj, key, val) {
    if (hasOwn(obj, key)) {
      obj[key] = val;
      return;
    }
    if (obj._isVue) {
      set(obj._data, key, val);
      return;
    }
    var ob = obj.__ob__;
    if (!ob) {
      obj[key] = val;
      return;
    }
    ob.convert(key, val);
    ob.dep.notify();
    if (ob.vms) {
      var i = ob.vms.length;
      while (i--) {
        var vm = ob.vms[i];
        vm._proxy(key);
        vm._digest();
      }
    }
    return val;
  }

  /**
   * Delete a property and trigger change if necessary.
   *
   * @param {Object} obj
   * @param {String} key
   */

  function del(obj, key) {
    if (!hasOwn(obj, key)) {
      return;
    }
    delete obj[key];
    var ob = obj.__ob__;
    if (!ob) {
      if (obj._isVue) {
        delete obj._data[key];
        obj._digest();
      }
      return;
    }
    ob.dep.notify();
    if (ob.vms) {
      var i = ob.vms.length;
      while (i--) {
        var vm = ob.vms[i];
        vm._unproxy(key);
        vm._digest();
      }
    }
  }

  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * Check whether the object has the property.
   *
   * @param {Object} obj
   * @param {String} key
   * @return {Boolean}
   */

  function hasOwn(obj, key) {
    return hasOwnProperty.call(obj, key);
  }

  /**
   * Check if an expression is a literal value.
   *
   * @param {String} exp
   * @return {Boolean}
   */

  var literalValueRE = /^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/;

  function isLiteral(exp) {
    return literalValueRE.test(exp);
  }

  /**
   * Check if a string starts with $ or _
   *
   * @param {String} str
   * @return {Boolean}
   */

  function isReserved(str) {
    var c = (str + '').charCodeAt(0);
    return c === 0x24 || c === 0x5F;
  }

  /**
   * Guard text output, make sure undefined outputs
   * empty string
   *
   * @param {*} value
   * @return {String}
   */

  function _toString(value) {
    return value == null ? '' : value.toString();
  }

  /**
   * Check and convert possible numeric strings to numbers
   * before setting back to data
   *
   * @param {*} value
   * @return {*|Number}
   */

  function toNumber(value) {
    if (typeof value !== 'string') {
      return value;
    } else {
      var parsed = Number(value);
      return isNaN(parsed) ? value : parsed;
    }
  }

  /**
   * Convert string boolean literals into real booleans.
   *
   * @param {*} value
   * @return {*|Boolean}
   */

  function toBoolean(value) {
    return value === 'true' ? true : value === 'false' ? false : value;
  }

  /**
   * Strip quotes from a string
   *
   * @param {String} str
   * @return {String | false}
   */

  function stripQuotes(str) {
    var a = str.charCodeAt(0);
    var b = str.charCodeAt(str.length - 1);
    return a === b && (a === 0x22 || a === 0x27) ? str.slice(1, -1) : str;
  }

  /**
   * Camelize a hyphen-delmited string.
   *
   * @param {String} str
   * @return {String}
   */

  var camelizeRE = /-(\w)/g;

  function camelize(str) {
    return str.replace(camelizeRE, toUpper);
  }

  function toUpper(_, c) {
    return c ? c.toUpperCase() : '';
  }

  /**
   * Hyphenate a camelCase string.
   *
   * @param {String} str
   * @return {String}
   */

  var hyphenateRE = /([a-z\d])([A-Z])/g;

  function hyphenate(str) {
    return str.replace(hyphenateRE, '$1-$2').toLowerCase();
  }

  /**
   * Converts hyphen/underscore/slash delimitered names into
   * camelized classNames.
   *
   * e.g. my-component => MyComponent
   *      some_else    => SomeElse
   *      some/comp    => SomeComp
   *
   * @param {String} str
   * @return {String}
   */

  var classifyRE = /(?:^|[-_\/])(\w)/g;

  function classify(str) {
    return str.replace(classifyRE, toUpper);
  }

  /**
   * Simple bind, faster than native
   *
   * @param {Function} fn
   * @param {Object} ctx
   * @return {Function}
   */

  function bind(fn, ctx) {
    return function (a) {
      var l = arguments.length;
      return l ? l > 1 ? fn.apply(ctx, arguments) : fn.call(ctx, a) : fn.call(ctx);
    };
  }

  /**
   * Convert an Array-like object to a real Array.
   *
   * @param {Array-like} list
   * @param {Number} [start] - start index
   * @return {Array}
   */

  function toArray(list, start) {
    start = start || 0;
    var i = list.length - start;
    var ret = new Array(i);
    while (i--) {
      ret[i] = list[i + start];
    }
    return ret;
  }

  /**
   * Mix properties into target object.
   *
   * @param {Object} to
   * @param {Object} from
   */

  function extend(to, from) {
    var keys = Object.keys(from);
    var i = keys.length;
    while (i--) {
      to[keys[i]] = from[keys[i]];
    }
    return to;
  }

  /**
   * Quick object check - this is primarily used to tell
   * Objects from primitive values when we know the value
   * is a JSON-compliant type.
   *
   * @param {*} obj
   * @return {Boolean}
   */

  function isObject(obj) {
    return obj !== null && typeof obj === 'object';
  }

  /**
   * Strict object type check. Only returns true
   * for plain JavaScript objects.
   *
   * @param {*} obj
   * @return {Boolean}
   */

  var toString = Object.prototype.toString;
  var OBJECT_STRING = '[object Object]';

  function isPlainObject(obj) {
    return toString.call(obj) === OBJECT_STRING;
  }

  /**
   * Array type check.
   *
   * @param {*} obj
   * @return {Boolean}
   */

  var isArray = Array.isArray;

  /**
   * Define a property.
   *
   * @param {Object} obj
   * @param {String} key
   * @param {*} val
   * @param {Boolean} [enumerable]
   */

  function def(obj, key, val, enumerable) {
    Object.defineProperty(obj, key, {
      value: val,
      enumerable: !!enumerable,
      writable: true,
      configurable: true
    });
  }

  /**
   * Debounce a function so it only gets called after the
   * input stops arriving after the given wait period.
   *
   * @param {Function} func
   * @param {Number} wait
   * @return {Function} - the debounced function
   */

  function _debounce(func, wait) {
    var timeout, args, context, timestamp, result;
    var later = function later() {
      var last = Date.now() - timestamp;
      if (last < wait && last >= 0) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      }
    };
    return function () {
      context = this;
      args = arguments;
      timestamp = Date.now();
      if (!timeout) {
        timeout = setTimeout(later, wait);
      }
      return result;
    };
  }

  /**
   * Manual indexOf because it's slightly faster than
   * native.
   *
   * @param {Array} arr
   * @param {*} obj
   */

  function indexOf(arr, obj) {
    var i = arr.length;
    while (i--) {
      if (arr[i] === obj) return i;
    }
    return -1;
  }

  /**
   * Make a cancellable version of an async callback.
   *
   * @param {Function} fn
   * @return {Function}
   */

  function cancellable(fn) {
    var cb = function cb() {
      if (!cb.cancelled) {
        return fn.apply(this, arguments);
      }
    };
    cb.cancel = function () {
      cb.cancelled = true;
    };
    return cb;
  }

  /**
   * Check if two values are loosely equal - that is,
   * if they are plain objects, do they have the same shape?
   *
   * @param {*} a
   * @param {*} b
   * @return {Boolean}
   */

  function looseEqual(a, b) {
    /* eslint-disable eqeqeq */
    return a == b || (isObject(a) && isObject(b) ? JSON.stringify(a) === JSON.stringify(b) : false);
    /* eslint-enable eqeqeq */
  }

  var hasProto = ('__proto__' in {});

  // Browser environment sniffing
  var inBrowser = typeof window !== 'undefined' && Object.prototype.toString.call(window) !== '[object Object]';

  // detect devtools
  var devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;

  // UA sniffing for working around browser-specific quirks
  var UA = inBrowser && window.navigator.userAgent.toLowerCase();
  var isIE = UA && UA.indexOf('trident') > 0;
  var isIE9 = UA && UA.indexOf('msie 9.0') > 0;
  var isAndroid = UA && UA.indexOf('android') > 0;
  var isIos = UA && /(iphone|ipad|ipod|ios)/i.test(UA);
  var iosVersionMatch = isIos && UA.match(/os ([\d_]+)/);
  var iosVersion = iosVersionMatch && iosVersionMatch[1].split('_');

  // detecting iOS UIWebView by indexedDB
  var hasMutationObserverBug = iosVersion && Number(iosVersion[0]) >= 9 && Number(iosVersion[1]) >= 3 && !window.indexedDB;

  var transitionProp = undefined;
  var transitionEndEvent = undefined;
  var animationProp = undefined;
  var animationEndEvent = undefined;

  // Transition property/event sniffing
  if (inBrowser && !isIE9) {
    var isWebkitTrans = window.ontransitionend === undefined && window.onwebkittransitionend !== undefined;
    var isWebkitAnim = window.onanimationend === undefined && window.onwebkitanimationend !== undefined;
    transitionProp = isWebkitTrans ? 'WebkitTransition' : 'transition';
    transitionEndEvent = isWebkitTrans ? 'webkitTransitionEnd' : 'transitionend';
    animationProp = isWebkitAnim ? 'WebkitAnimation' : 'animation';
    animationEndEvent = isWebkitAnim ? 'webkitAnimationEnd' : 'animationend';
  }

  /**
   * Defer a task to execute it asynchronously. Ideally this
   * should be executed as a microtask, so we leverage
   * MutationObserver if it's available, and fallback to
   * setTimeout(0).
   *
   * @param {Function} cb
   * @param {Object} ctx
   */

  var nextTick = (function () {
    var callbacks = [];
    var pending = false;
    var timerFunc;
    function nextTickHandler() {
      pending = false;
      var copies = callbacks.slice(0);
      callbacks = [];
      for (var i = 0; i < copies.length; i++) {
        copies[i]();
      }
    }

    /* istanbul ignore if */
    if (typeof MutationObserver !== 'undefined' && !hasMutationObserverBug) {
      var counter = 1;
      var observer = new MutationObserver(nextTickHandler);
      var textNode = document.createTextNode(counter);
      observer.observe(textNode, {
        characterData: true
      });
      timerFunc = function () {
        counter = (counter + 1) % 2;
        textNode.data = counter;
      };
    } else {
      // webpack attempts to inject a shim for setImmediate
      // if it is used as a global, so we have to work around that to
      // avoid bundling unnecessary code.
      var context = inBrowser ? window : typeof global !== 'undefined' ? global : {};
      timerFunc = context.setImmediate || setTimeout;
    }
    return function (cb, ctx) {
      var func = ctx ? function () {
        cb.call(ctx);
      } : cb;
      callbacks.push(func);
      if (pending) return;
      pending = true;
      timerFunc(nextTickHandler, 0);
    };
  })();

  var _Set = undefined;
  /* istanbul ignore if */
  if (typeof Set !== 'undefined' && Set.toString().match(/native code/)) {
    // use native Set when available.
    _Set = Set;
  } else {
    // a non-standard Set polyfill that only works with primitive keys.
    _Set = function () {
      this.set = Object.create(null);
    };
    _Set.prototype.has = function (key) {
      return this.set[key] !== undefined;
    };
    _Set.prototype.add = function (key) {
      this.set[key] = 1;
    };
    _Set.prototype.clear = function () {
      this.set = Object.create(null);
    };
  }

  function Cache(limit) {
    this.size = 0;
    this.limit = limit;
    this.head = this.tail = undefined;
    this._keymap = Object.create(null);
  }

  var p = Cache.prototype;

  /**
   * Put <value> into the cache associated with <key>.
   * Returns the entry which was removed to make room for
   * the new entry. Otherwise undefined is returned.
   * (i.e. if there was enough room already).
   *
   * @param {String} key
   * @param {*} value
   * @return {Entry|undefined}
   */

  p.put = function (key, value) {
    var removed;

    var entry = this.get(key, true);
    if (!entry) {
      if (this.size === this.limit) {
        removed = this.shift();
      }
      entry = {
        key: key
      };
      this._keymap[key] = entry;
      if (this.tail) {
        this.tail.newer = entry;
        entry.older = this.tail;
      } else {
        this.head = entry;
      }
      this.tail = entry;
      this.size++;
    }
    entry.value = value;

    return removed;
  };

  /**
   * Purge the least recently used (oldest) entry from the
   * cache. Returns the removed entry or undefined if the
   * cache was empty.
   */

  p.shift = function () {
    var entry = this.head;
    if (entry) {
      this.head = this.head.newer;
      this.head.older = undefined;
      entry.newer = entry.older = undefined;
      this._keymap[entry.key] = undefined;
      this.size--;
    }
    return entry;
  };

  /**
   * Get and register recent use of <key>. Returns the value
   * associated with <key> or undefined if not in cache.
   *
   * @param {String} key
   * @param {Boolean} returnEntry
   * @return {Entry|*}
   */

  p.get = function (key, returnEntry) {
    var entry = this._keymap[key];
    if (entry === undefined) return;
    if (entry === this.tail) {
      return returnEntry ? entry : entry.value;
    }
    // HEAD--------------TAIL
    //   <.older   .newer>
    //  <--- add direction --
    //   A  B  C  <D>  E
    if (entry.newer) {
      if (entry === this.head) {
        this.head = entry.newer;
      }
      entry.newer.older = entry.older; // C <-- E.
    }
    if (entry.older) {
      entry.older.newer = entry.newer; // C. --> E
    }
    entry.newer = undefined; // D --x
    entry.older = this.tail; // D. --> E
    if (this.tail) {
      this.tail.newer = entry; // E. <-- D
    }
    this.tail = entry;
    return returnEntry ? entry : entry.value;
  };

  var cache$1 = new Cache(1000);
  var filterTokenRE = /[^\s'"]+|'[^']*'|"[^"]*"/g;
  var reservedArgRE = /^in$|^-?\d+/;

  /**
   * Parser state
   */

  var str;
  var dir;
  var c;
  var prev;
  var i;
  var l;
  var lastFilterIndex;
  var inSingle;
  var inDouble;
  var curly;
  var square;
  var paren;
  /**
   * Push a filter to the current directive object
   */

  function pushFilter() {
    var exp = str.slice(lastFilterIndex, i).trim();
    var filter;
    if (exp) {
      filter = {};
      var tokens = exp.match(filterTokenRE);
      filter.name = tokens[0];
      if (tokens.length > 1) {
        filter.args = tokens.slice(1).map(processFilterArg);
      }
    }
    if (filter) {
      (dir.filters = dir.filters || []).push(filter);
    }
    lastFilterIndex = i + 1;
  }

  /**
   * Check if an argument is dynamic and strip quotes.
   *
   * @param {String} arg
   * @return {Object}
   */

  function processFilterArg(arg) {
    if (reservedArgRE.test(arg)) {
      return {
        value: toNumber(arg),
        dynamic: false
      };
    } else {
      var stripped = stripQuotes(arg);
      var dynamic = stripped === arg;
      return {
        value: dynamic ? arg : stripped,
        dynamic: dynamic
      };
    }
  }

  /**
   * Parse a directive value and extract the expression
   * and its filters into a descriptor.
   *
   * Example:
   *
   * "a + 1 | uppercase" will yield:
   * {
   *   expression: 'a + 1',
   *   filters: [
   *     { name: 'uppercase', args: null }
   *   ]
   * }
   *
   * @param {String} s
   * @return {Object}
   */

  function parseDirective(s) {
    var hit = cache$1.get(s);
    if (hit) {
      return hit;
    }

    // reset parser state
    str = s;
    inSingle = inDouble = false;
    curly = square = paren = 0;
    lastFilterIndex = 0;
    dir = {};

    for (i = 0, l = str.length; i < l; i++) {
      prev = c;
      c = str.charCodeAt(i);
      if (inSingle) {
        // check single quote
        if (c === 0x27 && prev !== 0x5C) inSingle = !inSingle;
      } else if (inDouble) {
        // check double quote
        if (c === 0x22 && prev !== 0x5C) inDouble = !inDouble;
      } else if (c === 0x7C && // pipe
      str.charCodeAt(i + 1) !== 0x7C && str.charCodeAt(i - 1) !== 0x7C) {
        if (dir.expression == null) {
          // first filter, end of expression
          lastFilterIndex = i + 1;
          dir.expression = str.slice(0, i).trim();
        } else {
          // already has filter
          pushFilter();
        }
      } else {
        switch (c) {
          case 0x22:
            inDouble = true;break; // "
          case 0x27:
            inSingle = true;break; // '
          case 0x28:
            paren++;break; // (
          case 0x29:
            paren--;break; // )
          case 0x5B:
            square++;break; // [
          case 0x5D:
            square--;break; // ]
          case 0x7B:
            curly++;break; // {
          case 0x7D:
            curly--;break; // }
        }
      }
    }

    if (dir.expression == null) {
      dir.expression = str.slice(0, i).trim();
    } else if (lastFilterIndex !== 0) {
      pushFilter();
    }

    cache$1.put(s, dir);
    return dir;
  }

var directive = Object.freeze({
    parseDirective: parseDirective
  });

  var regexEscapeRE = /[-.*+?^${}()|[\]\/\\]/g;
  var cache = undefined;
  var tagRE = undefined;
  var htmlRE = undefined;
  /**
   * Escape a string so it can be used in a RegExp
   * constructor.
   *
   * @param {String} str
   */

  function escapeRegex(str) {
    return str.replace(regexEscapeRE, '\\$&');
  }

  function compileRegex() {
    var open = escapeRegex(config.delimiters[0]);
    var close = escapeRegex(config.delimiters[1]);
    var unsafeOpen = escapeRegex(config.unsafeDelimiters[0]);
    var unsafeClose = escapeRegex(config.unsafeDelimiters[1]);
    tagRE = new RegExp(unsafeOpen + '((?:.|\\n)+?)' + unsafeClose + '|' + open + '((?:.|\\n)+?)' + close, 'g');
    htmlRE = new RegExp('^' + unsafeOpen + '((?:.|\\n)+?)' + unsafeClose + '$');
    // reset cache
    cache = new Cache(1000);
  }

  /**
   * Parse a template text string into an array of tokens.
   *
   * @param {String} text
   * @return {Array<Object> | null}
   *               - {String} type
   *               - {String} value
   *               - {Boolean} [html]
   *               - {Boolean} [oneTime]
   */

  function parseText(text) {
    if (!cache) {
      compileRegex();
    }
    var hit = cache.get(text);
    if (hit) {
      return hit;
    }
    if (!tagRE.test(text)) {
      return null;
    }
    var tokens = [];
    var lastIndex = tagRE.lastIndex = 0;
    var match, index, html, value, first, oneTime;
    /* eslint-disable no-cond-assign */
    while (match = tagRE.exec(text)) {
      /* eslint-enable no-cond-assign */
      index = match.index;
      // push text token
      if (index > lastIndex) {
        tokens.push({
          value: text.slice(lastIndex, index)
        });
      }
      // tag token
      html = htmlRE.test(match[0]);
      value = html ? match[1] : match[2];
      first = value.charCodeAt(0);
      oneTime = first === 42; // *
      value = oneTime ? value.slice(1) : value;
      tokens.push({
        tag: true,
        value: value.trim(),
        html: html,
        oneTime: oneTime
      });
      lastIndex = index + match[0].length;
    }
    if (lastIndex < text.length) {
      tokens.push({
        value: text.slice(lastIndex)
      });
    }
    cache.put(text, tokens);
    return tokens;
  }

  /**
   * Format a list of tokens into an expression.
   * e.g. tokens parsed from 'a {{b}} c' can be serialized
   * into one single expression as '"a " + b + " c"'.
   *
   * @param {Array} tokens
   * @param {Vue} [vm]
   * @return {String}
   */

  function tokensToExp(tokens, vm) {
    if (tokens.length > 1) {
      return tokens.map(function (token) {
        return formatToken(token, vm);
      }).join('+');
    } else {
      return formatToken(tokens[0], vm, true);
    }
  }

  /**
   * Format a single token.
   *
   * @param {Object} token
   * @param {Vue} [vm]
   * @param {Boolean} [single]
   * @return {String}
   */

  function formatToken(token, vm, single) {
    return token.tag ? token.oneTime && vm ? '"' + vm.$eval(token.value) + '"' : inlineFilters(token.value, single) : '"' + token.value + '"';
  }

  /**
   * For an attribute with multiple interpolation tags,
   * e.g. attr="some-{{thing | filter}}", in order to combine
   * the whole thing into a single watchable expression, we
   * have to inline those filters. This function does exactly
   * that. This is a bit hacky but it avoids heavy changes
   * to directive parser and watcher mechanism.
   *
   * @param {String} exp
   * @param {Boolean} single
   * @return {String}
   */

  var filterRE = /[^|]\|[^|]/;
  function inlineFilters(exp, single) {
    if (!filterRE.test(exp)) {
      return single ? exp : '(' + exp + ')';
    } else {
      var dir = parseDirective(exp);
      if (!dir.filters) {
        return '(' + exp + ')';
      } else {
        return 'this._applyFilters(' + dir.expression + // value
        ',null,' + // oldValue (null for read)
        JSON.stringify(dir.filters) + // filter descriptors
        ',false)'; // write?
      }
    }
  }

var text = Object.freeze({
    compileRegex: compileRegex,
    parseText: parseText,
    tokensToExp: tokensToExp
  });

  var delimiters = ['{{', '}}'];
  var unsafeDelimiters = ['{{{', '}}}'];

  var config = Object.defineProperties({

    /**
     * Whether to print debug messages.
     * Also enables stack trace for warnings.
     *
     * @type {Boolean}
     */

    debug: false,

    /**
     * Whether to suppress warnings.
     *
     * @type {Boolean}
     */

    silent: false,

    /**
     * Whether to use async rendering.
     */

    async: true,

    /**
     * Whether to warn against errors caught when evaluating
     * expressions.
     */

    warnExpressionErrors: true,

    /**
     * Whether to allow devtools inspection.
     * Disabled by default in production builds.
     */

    devtools: 'development' !== 'production',

    /**
     * Internal flag to indicate the delimiters have been
     * changed.
     *
     * @type {Boolean}
     */

    _delimitersChanged: true,

    /**
     * List of asset types that a component can own.
     *
     * @type {Array}
     */

    _assetTypes: ['component', 'directive', 'elementDirective', 'filter', 'transition', 'partial'],

    /**
     * prop binding modes
     */

    _propBindingModes: {
      ONE_WAY: 0,
      TWO_WAY: 1,
      ONE_TIME: 2
    },

    /**
     * Max circular updates allowed in a batcher flush cycle.
     */

    _maxUpdateCount: 100

  }, {
    delimiters: { /**
                   * Interpolation delimiters. Changing these would trigger
                   * the text parser to re-compile the regular expressions.
                   *
                   * @type {Array<String>}
                   */

      get: function get() {
        return delimiters;
      },
      set: function set(val) {
        delimiters = val;
        compileRegex();
      },
      configurable: true,
      enumerable: true
    },
    unsafeDelimiters: {
      get: function get() {
        return unsafeDelimiters;
      },
      set: function set(val) {
        unsafeDelimiters = val;
        compileRegex();
      },
      configurable: true,
      enumerable: true
    }
  });

  var warn = undefined;
  var formatComponentName = undefined;

  if ('development' !== 'production') {
    (function () {
      var hasConsole = typeof console !== 'undefined';

      warn = function (msg, vm) {
        if (hasConsole && !config.silent) {
          console.error('[Vue warn]: ' + msg + (vm ? formatComponentName(vm) : ''));
        }
      };

      formatComponentName = function (vm) {
        var name = vm._isVue ? vm.$options.name : vm.name;
        return name ? ' (found in component: <' + hyphenate(name) + '>)' : '';
      };
    })();
  }

  /**
   * Append with transition.
   *
   * @param {Element} el
   * @param {Element} target
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function appendWithTransition(el, target, vm, cb) {
    applyTransition(el, 1, function () {
      target.appendChild(el);
    }, vm, cb);
  }

  /**
   * InsertBefore with transition.
   *
   * @param {Element} el
   * @param {Element} target
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function beforeWithTransition(el, target, vm, cb) {
    applyTransition(el, 1, function () {
      before(el, target);
    }, vm, cb);
  }

  /**
   * Remove with transition.
   *
   * @param {Element} el
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function removeWithTransition(el, vm, cb) {
    applyTransition(el, -1, function () {
      remove(el);
    }, vm, cb);
  }

  /**
   * Apply transitions with an operation callback.
   *
   * @param {Element} el
   * @param {Number} direction
   *                  1: enter
   *                 -1: leave
   * @param {Function} op - the actual DOM operation
   * @param {Vue} vm
   * @param {Function} [cb]
   */

  function applyTransition(el, direction, op, vm, cb) {
    var transition = el.__v_trans;
    if (!transition ||
    // skip if there are no js hooks and CSS transition is
    // not supported
    !transition.hooks && !transitionEndEvent ||
    // skip transitions for initial compile
    !vm._isCompiled ||
    // if the vm is being manipulated by a parent directive
    // during the parent's compilation phase, skip the
    // animation.
    vm.$parent && !vm.$parent._isCompiled) {
      op();
      if (cb) cb();
      return;
    }
    var action = direction > 0 ? 'enter' : 'leave';
    transition[action](op, cb);
  }

var transition = Object.freeze({
    appendWithTransition: appendWithTransition,
    beforeWithTransition: beforeWithTransition,
    removeWithTransition: removeWithTransition,
    applyTransition: applyTransition
  });

  /**
   * Query an element selector if it's not an element already.
   *
   * @param {String|Element} el
   * @return {Element}
   */

  function query(el) {
    if (typeof el === 'string') {
      var selector = el;
      el = document.querySelector(el);
      if (!el) {
        'development' !== 'production' && warn('Cannot find element: ' + selector);
      }
    }
    return el;
  }

  /**
   * Check if a node is in the document.
   * Note: document.documentElement.contains should work here
   * but always returns false for comment nodes in phantomjs,
   * making unit tests difficult. This is fixed by doing the
   * contains() check on the node's parentNode instead of
   * the node itself.
   *
   * @param {Node} node
   * @return {Boolean}
   */

  function inDoc(node) {
    if (!node) return false;
    var doc = node.ownerDocument.documentElement;
    var parent = node.parentNode;
    return doc === node || doc === parent || !!(parent && parent.nodeType === 1 && doc.contains(parent));
  }

  /**
   * Get and remove an attribute from a node.
   *
   * @param {Node} node
   * @param {String} _attr
   */

  function getAttr(node, _attr) {
    var val = node.getAttribute(_attr);
    if (val !== null) {
      node.removeAttribute(_attr);
    }
    return val;
  }

  /**
   * Get an attribute with colon or v-bind: prefix.
   *
   * @param {Node} node
   * @param {String} name
   * @return {String|null}
   */

  function getBindAttr(node, name) {
    var val = getAttr(node, ':' + name);
    if (val === null) {
      val = getAttr(node, 'v-bind:' + name);
    }
    return val;
  }

  /**
   * Check the presence of a bind attribute.
   *
   * @param {Node} node
   * @param {String} name
   * @return {Boolean}
   */

  function hasBindAttr(node, name) {
    return node.hasAttribute(name) || node.hasAttribute(':' + name) || node.hasAttribute('v-bind:' + name);
  }

  /**
   * Insert el before target
   *
   * @param {Element} el
   * @param {Element} target
   */

  function before(el, target) {
    target.parentNode.insertBefore(el, target);
  }

  /**
   * Insert el after target
   *
   * @param {Element} el
   * @param {Element} target
   */

  function after(el, target) {
    if (target.nextSibling) {
      before(el, target.nextSibling);
    } else {
      target.parentNode.appendChild(el);
    }
  }

  /**
   * Remove el from DOM
   *
   * @param {Element} el
   */

  function remove(el) {
    el.parentNode.removeChild(el);
  }

  /**
   * Prepend el to target
   *
   * @param {Element} el
   * @param {Element} target
   */

  function prepend(el, target) {
    if (target.firstChild) {
      before(el, target.firstChild);
    } else {
      target.appendChild(el);
    }
  }

  /**
   * Replace target with el
   *
   * @param {Element} target
   * @param {Element} el
   */

  function replace(target, el) {
    var parent = target.parentNode;
    if (parent) {
      parent.replaceChild(el, target);
    }
  }

  /**
   * Add event listener shorthand.
   *
   * @param {Element} el
   * @param {String} event
   * @param {Function} cb
   * @param {Boolean} [useCapture]
   */

  function on(el, event, cb, useCapture) {
    el.addEventListener(event, cb, useCapture);
  }

  /**
   * Remove event listener shorthand.
   *
   * @param {Element} el
   * @param {String} event
   * @param {Function} cb
   */

  function off(el, event, cb) {
    el.removeEventListener(event, cb);
  }

  /**
   * For IE9 compat: when both class and :class are present
   * getAttribute('class') returns wrong value...
   *
   * @param {Element} el
   * @return {String}
   */

  function getClass(el) {
    var classname = el.className;
    if (typeof classname === 'object') {
      classname = classname.baseVal || '';
    }
    return classname;
  }

  /**
   * In IE9, setAttribute('class') will result in empty class
   * if the element also has the :class attribute; However in
   * PhantomJS, setting `className` does not work on SVG elements...
   * So we have to do a conditional check here.
   *
   * @param {Element} el
   * @param {String} cls
   */

  function setClass(el, cls) {
    /* istanbul ignore if */
    if (isIE9 && !/svg$/.test(el.namespaceURI)) {
      el.className = cls;
    } else {
      el.setAttribute('class', cls);
    }
  }

  /**
   * Add class with compatibility for IE & SVG
   *
   * @param {Element} el
   * @param {String} cls
   */

  function addClass(el, cls) {
    if (el.classList) {
      el.classList.add(cls);
    } else {
      var cur = ' ' + getClass(el) + ' ';
      if (cur.indexOf(' ' + cls + ' ') < 0) {
        setClass(el, (cur + cls).trim());
      }
    }
  }

  /**
   * Remove class with compatibility for IE & SVG
   *
   * @param {Element} el
   * @param {String} cls
   */

  function removeClass(el, cls) {
    if (el.classList) {
      el.classList.remove(cls);
    } else {
      var cur = ' ' + getClass(el) + ' ';
      var tar = ' ' + cls + ' ';
      while (cur.indexOf(tar) >= 0) {
        cur = cur.replace(tar, ' ');
      }
      setClass(el, cur.trim());
    }
    if (!el.className) {
      el.removeAttribute('class');
    }
  }

  /**
   * Extract raw content inside an element into a temporary
   * container div
   *
   * @param {Element} el
   * @param {Boolean} asFragment
   * @return {Element|DocumentFragment}
   */

  function extractContent(el, asFragment) {
    var child;
    var rawContent;
    /* istanbul ignore if */
    if (isTemplate(el) && isFragment(el.content)) {
      el = el.content;
    }
    if (el.hasChildNodes()) {
      trimNode(el);
      rawContent = asFragment ? document.createDocumentFragment() : document.createElement('div');
      /* eslint-disable no-cond-assign */
      while (child = el.firstChild) {
        /* eslint-enable no-cond-assign */
        rawContent.appendChild(child);
      }
    }
    return rawContent;
  }

  /**
   * Trim possible empty head/tail text and comment
   * nodes inside a parent.
   *
   * @param {Node} node
   */

  function trimNode(node) {
    var child;
    /* eslint-disable no-sequences */
    while ((child = node.firstChild, isTrimmable(child))) {
      node.removeChild(child);
    }
    while ((child = node.lastChild, isTrimmable(child))) {
      node.removeChild(child);
    }
    /* eslint-enable no-sequences */
  }

  function isTrimmable(node) {
    return node && (node.nodeType === 3 && !node.data.trim() || node.nodeType === 8);
  }

  /**
   * Check if an element is a template tag.
   * Note if the template appears inside an SVG its tagName
   * will be in lowercase.
   *
   * @param {Element} el
   */

  function isTemplate(el) {
    return el.tagName && el.tagName.toLowerCase() === 'template';
  }

  /**
   * Create an "anchor" for performing dom insertion/removals.
   * This is used in a number of scenarios:
   * - fragment instance
   * - v-html
   * - v-if
   * - v-for
   * - component
   *
   * @param {String} content
   * @param {Boolean} persist - IE trashes empty textNodes on
   *                            cloneNode(true), so in certain
   *                            cases the anchor needs to be
   *                            non-empty to be persisted in
   *                            templates.
   * @return {Comment|Text}
   */

  function createAnchor(content, persist) {
    var anchor = config.debug ? document.createComment(content) : document.createTextNode(persist ? ' ' : '');
    anchor.__v_anchor = true;
    return anchor;
  }

  /**
   * Find a component ref attribute that starts with $.
   *
   * @param {Element} node
   * @return {String|undefined}
   */

  var refRE = /^v-ref:/;

  function findRef(node) {
    if (node.hasAttributes()) {
      var attrs = node.attributes;
      for (var i = 0, l = attrs.length; i < l; i++) {
        var name = attrs[i].name;
        if (refRE.test(name)) {
          return camelize(name.replace(refRE, ''));
        }
      }
    }
  }

  /**
   * Map a function to a range of nodes .
   *
   * @param {Node} node
   * @param {Node} end
   * @param {Function} op
   */

  function mapNodeRange(node, end, op) {
    var next;
    while (node !== end) {
      next = node.nextSibling;
      op(node);
      node = next;
    }
    op(end);
  }

  /**
   * Remove a range of nodes with transition, store
   * the nodes in a fragment with correct ordering,
   * and call callback when done.
   *
   * @param {Node} start
   * @param {Node} end
   * @param {Vue} vm
   * @param {DocumentFragment} frag
   * @param {Function} cb
   */

  function removeNodeRange(start, end, vm, frag, cb) {
    var done = false;
    var removed = 0;
    var nodes = [];
    mapNodeRange(start, end, function (node) {
      if (node === end) done = true;
      nodes.push(node);
      removeWithTransition(node, vm, onRemoved);
    });
    function onRemoved() {
      removed++;
      if (done && removed >= nodes.length) {
        for (var i = 0; i < nodes.length; i++) {
          frag.appendChild(nodes[i]);
        }
        cb && cb();
      }
    }
  }

  /**
   * Check if a node is a DocumentFragment.
   *
   * @param {Node} node
   * @return {Boolean}
   */

  function isFragment(node) {
    return node && node.nodeType === 11;
  }

  /**
   * Get outerHTML of elements, taking care
   * of SVG elements in IE as well.
   *
   * @param {Element} el
   * @return {String}
   */

  function getOuterHTML(el) {
    if (el.outerHTML) {
      return el.outerHTML;
    } else {
      var container = document.createElement('div');
      container.appendChild(el.cloneNode(true));
      return container.innerHTML;
    }
  }

  var commonTagRE = /^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i;
  var reservedTagRE = /^(slot|partial|component)$/i;

  var isUnknownElement = undefined;
  if ('development' !== 'production') {
    isUnknownElement = function (el, tag) {
      if (tag.indexOf('-') > -1) {
        // http://stackoverflow.com/a/28210364/1070244
        return el.constructor === window.HTMLUnknownElement || el.constructor === window.HTMLElement;
      } else {
        return (/HTMLUnknownElement/.test(el.toString()) &&
          // Chrome returns unknown for several HTML5 elements.
          // https://code.google.com/p/chromium/issues/detail?id=540526
          // Firefox returns unknown for some "Interactive elements."
          !/^(data|time|rtc|rb|details|dialog|summary)$/.test(tag)
        );
      }
    };
  }

  /**
   * Check if an element is a component, if yes return its
   * component id.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Object|undefined}
   */

  function checkComponentAttr(el, options) {
    var tag = el.tagName.toLowerCase();
    var hasAttrs = el.hasAttributes();
    if (!commonTagRE.test(tag) && !reservedTagRE.test(tag)) {
      if (resolveAsset(options, 'components', tag)) {
        return { id: tag };
      } else {
        var is = hasAttrs && getIsBinding(el, options);
        if (is) {
          return is;
        } else if ('development' !== 'production') {
          var expectedTag = options._componentNameMap && options._componentNameMap[tag];
          if (expectedTag) {
            warn('Unknown custom element: <' + tag + '> - ' + 'did you mean <' + expectedTag + '>? ' + 'HTML is case-insensitive, remember to use kebab-case in templates.');
          } else if (isUnknownElement(el, tag)) {
            warn('Unknown custom element: <' + tag + '> - did you ' + 'register the component correctly? For recursive components, ' + 'make sure to provide the "name" option.');
          }
        }
      }
    } else if (hasAttrs) {
      return getIsBinding(el, options);
    }
  }

  /**
   * Get "is" binding from an element.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Object|undefined}
   */

  function getIsBinding(el, options) {
    // dynamic syntax
    var exp = el.getAttribute('is');
    if (exp != null) {
      if (resolveAsset(options, 'components', exp)) {
        el.removeAttribute('is');
        return { id: exp };
      }
    } else {
      exp = getBindAttr(el, 'is');
      if (exp != null) {
        return { id: exp, dynamic: true };
      }
    }
  }

  /**
   * Option overwriting strategies are functions that handle
   * how to merge a parent option value and a child option
   * value into the final value.
   *
   * All strategy functions follow the same signature:
   *
   * @param {*} parentVal
   * @param {*} childVal
   * @param {Vue} [vm]
   */

  var strats = config.optionMergeStrategies = Object.create(null);

  /**
   * Helper that recursively merges two data objects together.
   */

  function mergeData(to, from) {
    var key, toVal, fromVal;
    for (key in from) {
      toVal = to[key];
      fromVal = from[key];
      if (!hasOwn(to, key)) {
        set(to, key, fromVal);
      } else if (isObject(toVal) && isObject(fromVal)) {
        mergeData(toVal, fromVal);
      }
    }
    return to;
  }

  /**
   * Data
   */

  strats.data = function (parentVal, childVal, vm) {
    if (!vm) {
      // in a Vue.extend merge, both should be functions
      if (!childVal) {
        return parentVal;
      }
      if (typeof childVal !== 'function') {
        'development' !== 'production' && warn('The "data" option should be a function ' + 'that returns a per-instance value in component ' + 'definitions.', vm);
        return parentVal;
      }
      if (!parentVal) {
        return childVal;
      }
      // when parentVal & childVal are both present,
      // we need to return a function that returns the
      // merged result of both functions... no need to
      // check if parentVal is a function here because
      // it has to be a function to pass previous merges.
      return function mergedDataFn() {
        return mergeData(childVal.call(this), parentVal.call(this));
      };
    } else if (parentVal || childVal) {
      return function mergedInstanceDataFn() {
        // instance merge
        var instanceData = typeof childVal === 'function' ? childVal.call(vm) : childVal;
        var defaultData = typeof parentVal === 'function' ? parentVal.call(vm) : undefined;
        if (instanceData) {
          return mergeData(instanceData, defaultData);
        } else {
          return defaultData;
        }
      };
    }
  };

  /**
   * El
   */

  strats.el = function (parentVal, childVal, vm) {
    if (!vm && childVal && typeof childVal !== 'function') {
      'development' !== 'production' && warn('The "el" option should be a function ' + 'that returns a per-instance value in component ' + 'definitions.', vm);
      return;
    }
    var ret = childVal || parentVal;
    // invoke the element factory if this is instance merge
    return vm && typeof ret === 'function' ? ret.call(vm) : ret;
  };

  /**
   * Hooks and param attributes are merged as arrays.
   */

  strats.init = strats.created = strats.ready = strats.attached = strats.detached = strats.beforeCompile = strats.compiled = strats.beforeDestroy = strats.destroyed = strats.activate = function (parentVal, childVal) {
    return childVal ? parentVal ? parentVal.concat(childVal) : isArray(childVal) ? childVal : [childVal] : parentVal;
  };

  /**
   * Assets
   *
   * When a vm is present (instance creation), we need to do
   * a three-way merge between constructor options, instance
   * options and parent options.
   */

  function mergeAssets(parentVal, childVal) {
    var res = Object.create(parentVal || null);
    return childVal ? extend(res, guardArrayAssets(childVal)) : res;
  }

  config._assetTypes.forEach(function (type) {
    strats[type + 's'] = mergeAssets;
  });

  /**
   * Events & Watchers.
   *
   * Events & watchers hashes should not overwrite one
   * another, so we merge them as arrays.
   */

  strats.watch = strats.events = function (parentVal, childVal) {
    if (!childVal) return parentVal;
    if (!parentVal) return childVal;
    var ret = {};
    extend(ret, parentVal);
    for (var key in childVal) {
      var parent = ret[key];
      var child = childVal[key];
      if (parent && !isArray(parent)) {
        parent = [parent];
      }
      ret[key] = parent ? parent.concat(child) : [child];
    }
    return ret;
  };

  /**
   * Other object hashes.
   */

  strats.props = strats.methods = strats.computed = function (parentVal, childVal) {
    if (!childVal) return parentVal;
    if (!parentVal) return childVal;
    var ret = Object.create(null);
    extend(ret, parentVal);
    extend(ret, childVal);
    return ret;
  };

  /**
   * Default strategy.
   */

  var defaultStrat = function defaultStrat(parentVal, childVal) {
    return childVal === undefined ? parentVal : childVal;
  };

  /**
   * Make sure component options get converted to actual
   * constructors.
   *
   * @param {Object} options
   */

  function guardComponents(options) {
    if (options.components) {
      var components = options.components = guardArrayAssets(options.components);
      var ids = Object.keys(components);
      var def;
      if ('development' !== 'production') {
        var map = options._componentNameMap = {};
      }
      for (var i = 0, l = ids.length; i < l; i++) {
        var key = ids[i];
        if (commonTagRE.test(key) || reservedTagRE.test(key)) {
          'development' !== 'production' && warn('Do not use built-in or reserved HTML elements as component ' + 'id: ' + key);
          continue;
        }
        // record a all lowercase <-> kebab-case mapping for
        // possible custom element case error warning
        if ('development' !== 'production') {
          map[key.replace(/-/g, '').toLowerCase()] = hyphenate(key);
        }
        def = components[key];
        if (isPlainObject(def)) {
          components[key] = Vue.extend(def);
        }
      }
    }
  }

  /**
   * Ensure all props option syntax are normalized into the
   * Object-based format.
   *
   * @param {Object} options
   */

  function guardProps(options) {
    var props = options.props;
    var i, val;
    if (isArray(props)) {
      options.props = {};
      i = props.length;
      while (i--) {
        val = props[i];
        if (typeof val === 'string') {
          options.props[val] = null;
        } else if (val.name) {
          options.props[val.name] = val;
        }
      }
    } else if (isPlainObject(props)) {
      var keys = Object.keys(props);
      i = keys.length;
      while (i--) {
        val = props[keys[i]];
        if (typeof val === 'function') {
          props[keys[i]] = { type: val };
        }
      }
    }
  }

  /**
   * Guard an Array-format assets option and converted it
   * into the key-value Object format.
   *
   * @param {Object|Array} assets
   * @return {Object}
   */

  function guardArrayAssets(assets) {
    if (isArray(assets)) {
      var res = {};
      var i = assets.length;
      var asset;
      while (i--) {
        asset = assets[i];
        var id = typeof asset === 'function' ? asset.options && asset.options.name || asset.id : asset.name || asset.id;
        if (!id) {
          'development' !== 'production' && warn('Array-syntax assets must provide a "name" or "id" field.');
        } else {
          res[id] = asset;
        }
      }
      return res;
    }
    return assets;
  }

  /**
   * Merge two option objects into a new one.
   * Core utility used in both instantiation and inheritance.
   *
   * @param {Object} parent
   * @param {Object} child
   * @param {Vue} [vm] - if vm is present, indicates this is
   *                     an instantiation merge.
   */

  function mergeOptions(parent, child, vm) {
    guardComponents(child);
    guardProps(child);
    if ('development' !== 'production') {
      if (child.propsData && !vm) {
        warn('propsData can only be used as an instantiation option.');
      }
    }
    var options = {};
    var key;
    if (child['extends']) {
      parent = typeof child['extends'] === 'function' ? mergeOptions(parent, child['extends'].options, vm) : mergeOptions(parent, child['extends'], vm);
    }
    if (child.mixins) {
      for (var i = 0, l = child.mixins.length; i < l; i++) {
        var mixin = child.mixins[i];
        var mixinOptions = mixin.prototype instanceof Vue ? mixin.options : mixin;
        parent = mergeOptions(parent, mixinOptions, vm);
      }
    }
    for (key in parent) {
      mergeField(key);
    }
    for (key in child) {
      if (!hasOwn(parent, key)) {
        mergeField(key);
      }
    }
    function mergeField(key) {
      var strat = strats[key] || defaultStrat;
      options[key] = strat(parent[key], child[key], vm, key);
    }
    return options;
  }

  /**
   * Resolve an asset.
   * This function is used because child instances need access
   * to assets defined in its ancestor chain.
   *
   * @param {Object} options
   * @param {String} type
   * @param {String} id
   * @param {Boolean} warnMissing
   * @return {Object|Function}
   */

  function resolveAsset(options, type, id, warnMissing) {
    /* istanbul ignore if */
    if (typeof id !== 'string') {
      return;
    }
    var assets = options[type];
    var camelizedId;
    var res = assets[id] ||
    // camelCase ID
    assets[camelizedId = camelize(id)] ||
    // Pascal Case ID
    assets[camelizedId.charAt(0).toUpperCase() + camelizedId.slice(1)];
    if ('development' !== 'production' && warnMissing && !res) {
      warn('Failed to resolve ' + type.slice(0, -1) + ': ' + id, options);
    }
    return res;
  }

  var uid$1 = 0;

  /**
   * A dep is an observable that can have multiple
   * directives subscribing to it.
   *
   * @constructor
   */
  function Dep() {
    this.id = uid$1++;
    this.subs = [];
  }

  // the current target watcher being evaluated.
  // this is globally unique because there could be only one
  // watcher being evaluated at any time.
  Dep.target = null;

  /**
   * Add a directive subscriber.
   *
   * @param {Directive} sub
   */

  Dep.prototype.addSub = function (sub) {
    this.subs.push(sub);
  };

  /**
   * Remove a directive subscriber.
   *
   * @param {Directive} sub
   */

  Dep.prototype.removeSub = function (sub) {
    this.subs.$remove(sub);
  };

  /**
   * Add self as a dependency to the target watcher.
   */

  Dep.prototype.depend = function () {
    Dep.target.addDep(this);
  };

  /**
   * Notify all subscribers of a new value.
   */

  Dep.prototype.notify = function () {
    // stablize the subscriber list first
    var subs = toArray(this.subs);
    for (var i = 0, l = subs.length; i < l; i++) {
      subs[i].update();
    }
  };

  var arrayProto = Array.prototype;
  var arrayMethods = Object.create(arrayProto)

  /**
   * Intercept mutating methods and emit events
   */

  ;['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'].forEach(function (method) {
    // cache original method
    var original = arrayProto[method];
    def(arrayMethods, method, function mutator() {
      // avoid leaking arguments:
      // http://jsperf.com/closure-with-arguments
      var i = arguments.length;
      var args = new Array(i);
      while (i--) {
        args[i] = arguments[i];
      }
      var result = original.apply(this, args);
      var ob = this.__ob__;
      var inserted;
      switch (method) {
        case 'push':
          inserted = args;
          break;
        case 'unshift':
          inserted = args;
          break;
        case 'splice':
          inserted = args.slice(2);
          break;
      }
      if (inserted) ob.observeArray(inserted);
      // notify change
      ob.dep.notify();
      return result;
    });
  });

  /**
   * Swap the element at the given index with a new value
   * and emits corresponding event.
   *
   * @param {Number} index
   * @param {*} val
   * @return {*} - replaced element
   */

  def(arrayProto, '$set', function $set(index, val) {
    if (index >= this.length) {
      this.length = Number(index) + 1;
    }
    return this.splice(index, 1, val)[0];
  });

  /**
   * Convenience method to remove the element at given index or target element reference.
   *
   * @param {*} item
   */

  def(arrayProto, '$remove', function $remove(item) {
    /* istanbul ignore if */
    if (!this.length) return;
    var index = indexOf(this, item);
    if (index > -1) {
      return this.splice(index, 1);
    }
  });

  var arrayKeys = Object.getOwnPropertyNames(arrayMethods);

  /**
   * By default, when a reactive property is set, the new value is
   * also converted to become reactive. However in certain cases, e.g.
   * v-for scope alias and props, we don't want to force conversion
   * because the value may be a nested value under a frozen data structure.
   *
   * So whenever we want to set a reactive property without forcing
   * conversion on the new value, we wrap that call inside this function.
   */

  var shouldConvert = true;

  function withoutConversion(fn) {
    shouldConvert = false;
    fn();
    shouldConvert = true;
  }

  /**
   * Observer class that are attached to each observed
   * object. Once attached, the observer converts target
   * object's property keys into getter/setters that
   * collect dependencies and dispatches updates.
   *
   * @param {Array|Object} value
   * @constructor
   */

  function Observer(value) {
    this.value = value;
    this.dep = new Dep();
    def(value, '__ob__', this);
    if (isArray(value)) {
      var augment = hasProto ? protoAugment : copyAugment;
      augment(value, arrayMethods, arrayKeys);
      this.observeArray(value);
    } else {
      this.walk(value);
    }
  }

  // Instance methods

  /**
   * Walk through each property and convert them into
   * getter/setters. This method should only be called when
   * value type is Object.
   *
   * @param {Object} obj
   */

  Observer.prototype.walk = function (obj) {
    var keys = Object.keys(obj);
    for (var i = 0, l = keys.length; i < l; i++) {
      this.convert(keys[i], obj[keys[i]]);
    }
  };

  /**
   * Observe a list of Array items.
   *
   * @param {Array} items
   */

  Observer.prototype.observeArray = function (items) {
    for (var i = 0, l = items.length; i < l; i++) {
      observe(items[i]);
    }
  };

  /**
   * Convert a property into getter/setter so we can emit
   * the events when the property is accessed/changed.
   *
   * @param {String} key
   * @param {*} val
   */

  Observer.prototype.convert = function (key, val) {
    defineReactive(this.value, key, val);
  };

  /**
   * Add an owner vm, so that when $set/$delete mutations
   * happen we can notify owner vms to proxy the keys and
   * digest the watchers. This is only called when the object
   * is observed as an instance's root $data.
   *
   * @param {Vue} vm
   */

  Observer.prototype.addVm = function (vm) {
    (this.vms || (this.vms = [])).push(vm);
  };

  /**
   * Remove an owner vm. This is called when the object is
   * swapped out as an instance's $data object.
   *
   * @param {Vue} vm
   */

  Observer.prototype.removeVm = function (vm) {
    this.vms.$remove(vm);
  };

  // helpers

  /**
   * Augment an target Object or Array by intercepting
   * the prototype chain using __proto__
   *
   * @param {Object|Array} target
   * @param {Object} src
   */

  function protoAugment(target, src) {
    /* eslint-disable no-proto */
    target.__proto__ = src;
    /* eslint-enable no-proto */
  }

  /**
   * Augment an target Object or Array by defining
   * hidden properties.
   *
   * @param {Object|Array} target
   * @param {Object} proto
   */

  function copyAugment(target, src, keys) {
    for (var i = 0, l = keys.length; i < l; i++) {
      var key = keys[i];
      def(target, key, src[key]);
    }
  }

  /**
   * Attempt to create an observer instance for a value,
   * returns the new observer if successfully observed,
   * or the existing observer if the value already has one.
   *
   * @param {*} value
   * @param {Vue} [vm]
   * @return {Observer|undefined}
   * @static
   */

  function observe(value, vm) {
    if (!value || typeof value !== 'object') {
      return;
    }
    var ob;
    if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {
      ob = value.__ob__;
    } else if (shouldConvert && (isArray(value) || isPlainObject(value)) && Object.isExtensible(value) && !value._isVue) {
      ob = new Observer(value);
    }
    if (ob && vm) {
      ob.addVm(vm);
    }
    return ob;
  }

  /**
   * Define a reactive property on an Object.
   *
   * @param {Object} obj
   * @param {String} key
   * @param {*} val
   */

  function defineReactive(obj, key, val) {
    var dep = new Dep();

    var property = Object.getOwnPropertyDescriptor(obj, key);
    if (property && property.configurable === false) {
      return;
    }

    // cater for pre-defined getter/setters
    var getter = property && property.get;
    var setter = property && property.set;

    var childOb = observe(val);
    Object.defineProperty(obj, key, {
      enumerable: true,
      configurable: true,
      get: function reactiveGetter() {
        var value = getter ? getter.call(obj) : val;
        if (Dep.target) {
          dep.depend();
          if (childOb) {
            childOb.dep.depend();
          }
          if (isArray(value)) {
            for (var e, i = 0, l = value.length; i < l; i++) {
              e = value[i];
              e && e.__ob__ && e.__ob__.dep.depend();
            }
          }
        }
        return value;
      },
      set: function reactiveSetter(newVal) {
        var value = getter ? getter.call(obj) : val;
        if (newVal === value) {
          return;
        }
        if (setter) {
          setter.call(obj, newVal);
        } else {
          val = newVal;
        }
        childOb = observe(newVal);
        dep.notify();
      }
    });
  }



  var util = Object.freeze({
  	defineReactive: defineReactive,
  	set: set,
  	del: del,
  	hasOwn: hasOwn,
  	isLiteral: isLiteral,
  	isReserved: isReserved,
  	_toString: _toString,
  	toNumber: toNumber,
  	toBoolean: toBoolean,
  	stripQuotes: stripQuotes,
  	camelize: camelize,
  	hyphenate: hyphenate,
  	classify: classify,
  	bind: bind,
  	toArray: toArray,
  	extend: extend,
  	isObject: isObject,
  	isPlainObject: isPlainObject,
  	def: def,
  	debounce: _debounce,
  	indexOf: indexOf,
  	cancellable: cancellable,
  	looseEqual: looseEqual,
  	isArray: isArray,
  	hasProto: hasProto,
  	inBrowser: inBrowser,
  	devtools: devtools,
  	isIE: isIE,
  	isIE9: isIE9,
  	isAndroid: isAndroid,
  	isIos: isIos,
  	iosVersionMatch: iosVersionMatch,
  	iosVersion: iosVersion,
  	hasMutationObserverBug: hasMutationObserverBug,
  	get transitionProp () { return transitionProp; },
  	get transitionEndEvent () { return transitionEndEvent; },
  	get animationProp () { return animationProp; },
  	get animationEndEvent () { return animationEndEvent; },
  	nextTick: nextTick,
  	get _Set () { return _Set; },
  	query: query,
  	inDoc: inDoc,
  	getAttr: getAttr,
  	getBindAttr: getBindAttr,
  	hasBindAttr: hasBindAttr,
  	before: before,
  	after: after,
  	remove: remove,
  	prepend: prepend,
  	replace: replace,
  	on: on,
  	off: off,
  	setClass: setClass,
  	addClass: addClass,
  	removeClass: removeClass,
  	extractContent: extractContent,
  	trimNode: trimNode,
  	isTemplate: isTemplate,
  	createAnchor: createAnchor,
  	findRef: findRef,
  	mapNodeRange: mapNodeRange,
  	removeNodeRange: removeNodeRange,
  	isFragment: isFragment,
  	getOuterHTML: getOuterHTML,
  	mergeOptions: mergeOptions,
  	resolveAsset: resolveAsset,
  	checkComponentAttr: checkComponentAttr,
  	commonTagRE: commonTagRE,
  	reservedTagRE: reservedTagRE,
  	get warn () { return warn; }
  });

  var uid = 0;

  function initMixin (Vue) {
    /**
     * The main init sequence. This is called for every
     * instance, including ones that are created from extended
     * constructors.
     *
     * @param {Object} options - this options object should be
     *                           the result of merging class
     *                           options and the options passed
     *                           in to the constructor.
     */

    Vue.prototype._init = function (options) {
      options = options || {};

      this.$el = null;
      this.$parent = options.parent;
      this.$root = this.$parent ? this.$parent.$root : this;
      this.$children = [];
      this.$refs = {}; // child vm references
      this.$els = {}; // element references
      this._watchers = []; // all watchers as an array
      this._directives = []; // all directives

      // a uid
      this._uid = uid++;

      // a flag to avoid this being observed
      this._isVue = true;

      // events bookkeeping
      this._events = {}; // registered callbacks
      this._eventsCount = {}; // for $broadcast optimization

      // fragment instance properties
      this._isFragment = false;
      this._fragment = // @type {DocumentFragment}
      this._fragmentStart = // @type {Text|Comment}
      this._fragmentEnd = null; // @type {Text|Comment}

      // lifecycle state
      this._isCompiled = this._isDestroyed = this._isReady = this._isAttached = this._isBeingDestroyed = this._vForRemoving = false;
      this._unlinkFn = null;

      // context:
      // if this is a transcluded component, context
      // will be the common parent vm of this instance
      // and its host.
      this._context = options._context || this.$parent;

      // scope:
      // if this is inside an inline v-for, the scope
      // will be the intermediate scope created for this
      // repeat fragment. this is used for linking props
      // and container directives.
      this._scope = options._scope;

      // fragment:
      // if this instance is compiled inside a Fragment, it
      // needs to reigster itself as a child of that fragment
      // for attach/detach to work properly.
      this._frag = options._frag;
      if (this._frag) {
        this._frag.children.push(this);
      }

      // push self into parent / transclusion host
      if (this.$parent) {
        this.$parent.$children.push(this);
      }

      // merge options.
      options = this.$options = mergeOptions(this.constructor.options, options, this);

      // set ref
      this._updateRef();

      // initialize data as empty object.
      // it will be filled up in _initData().
      this._data = {};

      // call init hook
      this._callHook('init');

      // initialize data observation and scope inheritance.
      this._initState();

      // setup event system and option events.
      this._initEvents();

      // call created hook
      this._callHook('created');

      // if `el` option is passed, start compilation.
      if (options.el) {
        this.$mount(options.el);
      }
    };
  }

  var pathCache = new Cache(1000);

  // actions
  var APPEND = 0;
  var PUSH = 1;
  var INC_SUB_PATH_DEPTH = 2;
  var PUSH_SUB_PATH = 3;

  // states
  var BEFORE_PATH = 0;
  var IN_PATH = 1;
  var BEFORE_IDENT = 2;
  var IN_IDENT = 3;
  var IN_SUB_PATH = 4;
  var IN_SINGLE_QUOTE = 5;
  var IN_DOUBLE_QUOTE = 6;
  var AFTER_PATH = 7;
  var ERROR = 8;

  var pathStateMachine = [];

  pathStateMachine[BEFORE_PATH] = {
    'ws': [BEFORE_PATH],
    'ident': [IN_IDENT, APPEND],
    '[': [IN_SUB_PATH],
    'eof': [AFTER_PATH]
  };

  pathStateMachine[IN_PATH] = {
    'ws': [IN_PATH],
    '.': [BEFORE_IDENT],
    '[': [IN_SUB_PATH],
    'eof': [AFTER_PATH]
  };

  pathStateMachine[BEFORE_IDENT] = {
    'ws': [BEFORE_IDENT],
    'ident': [IN_IDENT, APPEND]
  };

  pathStateMachine[IN_IDENT] = {
    'ident': [IN_IDENT, APPEND],
    '0': [IN_IDENT, APPEND],
    'number': [IN_IDENT, APPEND],
    'ws': [IN_PATH, PUSH],
    '.': [BEFORE_IDENT, PUSH],
    '[': [IN_SUB_PATH, PUSH],
    'eof': [AFTER_PATH, PUSH]
  };

  pathStateMachine[IN_SUB_PATH] = {
    "'": [IN_SINGLE_QUOTE, APPEND],
    '"': [IN_DOUBLE_QUOTE, APPEND],
    '[': [IN_SUB_PATH, INC_SUB_PATH_DEPTH],
    ']': [IN_PATH, PUSH_SUB_PATH],
    'eof': ERROR,
    'else': [IN_SUB_PATH, APPEND]
  };

  pathStateMachine[IN_SINGLE_QUOTE] = {
    "'": [IN_SUB_PATH, APPEND],
    'eof': ERROR,
    'else': [IN_SINGLE_QUOTE, APPEND]
  };

  pathStateMachine[IN_DOUBLE_QUOTE] = {
    '"': [IN_SUB_PATH, APPEND],
    'eof': ERROR,
    'else': [IN_DOUBLE_QUOTE, APPEND]
  };

  /**
   * Determine the type of a character in a keypath.
   *
   * @param {Char} ch
   * @return {String} type
   */

  function getPathCharType(ch) {
    if (ch === undefined) {
      return 'eof';
    }

    var code = ch.charCodeAt(0);

    switch (code) {
      case 0x5B: // [
      case 0x5D: // ]
      case 0x2E: // .
      case 0x22: // "
      case 0x27: // '
      case 0x30:
        // 0
        return ch;

      case 0x5F: // _
      case 0x24:
        // $
        return 'ident';

      case 0x20: // Space
      case 0x09: // Tab
      case 0x0A: // Newline
      case 0x0D: // Return
      case 0xA0: // No-break space
      case 0xFEFF: // Byte Order Mark
      case 0x2028: // Line Separator
      case 0x2029:
        // Paragraph Separator
        return 'ws';
    }

    // a-z, A-Z
    if (code >= 0x61 && code <= 0x7A || code >= 0x41 && code <= 0x5A) {
      return 'ident';
    }

    // 1-9
    if (code >= 0x31 && code <= 0x39) {
      return 'number';
    }

    return 'else';
  }

  /**
   * Format a subPath, return its plain form if it is
   * a literal string or number. Otherwise prepend the
   * dynamic indicator (*).
   *
   * @param {String} path
   * @return {String}
   */

  function formatSubPath(path) {
    var trimmed = path.trim();
    // invalid leading 0
    if (path.charAt(0) === '0' && isNaN(path)) {
      return false;
    }
    return isLiteral(trimmed) ? stripQuotes(trimmed) : '*' + trimmed;
  }

  /**
   * Parse a string path into an array of segments
   *
   * @param {String} path
   * @return {Array|undefined}
   */

  function parse(path) {
    var keys = [];
    var index = -1;
    var mode = BEFORE_PATH;
    var subPathDepth = 0;
    var c, newChar, key, type, transition, action, typeMap;

    var actions = [];

    actions[PUSH] = function () {
      if (key !== undefined) {
        keys.push(key);
        key = undefined;
      }
    };

    actions[APPEND] = function () {
      if (key === undefined) {
        key = newChar;
      } else {
        key += newChar;
      }
    };

    actions[INC_SUB_PATH_DEPTH] = function () {
      actions[APPEND]();
      subPathDepth++;
    };

    actions[PUSH_SUB_PATH] = function () {
      if (subPathDepth > 0) {
        subPathDepth--;
        mode = IN_SUB_PATH;
        actions[APPEND]();
      } else {
        subPathDepth = 0;
        key = formatSubPath(key);
        if (key === false) {
          return false;
        } else {
          actions[PUSH]();
        }
      }
    };

    function maybeUnescapeQuote() {
      var nextChar = path[index + 1];
      if (mode === IN_SINGLE_QUOTE && nextChar === "'" || mode === IN_DOUBLE_QUOTE && nextChar === '"') {
        index++;
        newChar = '\\' + nextChar;
        actions[APPEND]();
        return true;
      }
    }

    while (mode != null) {
      index++;
      c = path[index];

      if (c === '\\' && maybeUnescapeQuote()) {
        continue;
      }

      type = getPathCharType(c);
      typeMap = pathStateMachine[mode];
      transition = typeMap[type] || typeMap['else'] || ERROR;

      if (transition === ERROR) {
        return; // parse error
      }

      mode = transition[0];
      action = actions[transition[1]];
      if (action) {
        newChar = transition[2];
        newChar = newChar === undefined ? c : newChar;
        if (action() === false) {
          return;
        }
      }

      if (mode === AFTER_PATH) {
        keys.raw = path;
        return keys;
      }
    }
  }

  /**
   * External parse that check for a cache hit first
   *
   * @param {String} path
   * @return {Array|undefined}
   */

  function parsePath(path) {
    var hit = pathCache.get(path);
    if (!hit) {
      hit = parse(path);
      if (hit) {
        pathCache.put(path, hit);
      }
    }
    return hit;
  }

  /**
   * Get from an object from a path string
   *
   * @param {Object} obj
   * @param {String} path
   */

  function getPath(obj, path) {
    return parseExpression(path).get(obj);
  }

  /**
   * Warn against setting non-existent root path on a vm.
   */

  var warnNonExistent;
  if ('development' !== 'production') {
    warnNonExistent = function (path, vm) {
      warn('You are setting a non-existent path "' + path.raw + '" ' + 'on a vm instance. Consider pre-initializing the property ' + 'with the "data" option for more reliable reactivity ' + 'and better performance.', vm);
    };
  }

  /**
   * Set on an object from a path
   *
   * @param {Object} obj
   * @param {String | Array} path
   * @param {*} val
   */

  function setPath(obj, path, val) {
    var original = obj;
    if (typeof path === 'string') {
      path = parse(path);
    }
    if (!path || !isObject(obj)) {
      return false;
    }
    var last, key;
    for (var i = 0, l = path.length; i < l; i++) {
      last = obj;
      key = path[i];
      if (key.charAt(0) === '*') {
        key = parseExpression(key.slice(1)).get.call(original, original);
      }
      if (i < l - 1) {
        obj = obj[key];
        if (!isObject(obj)) {
          obj = {};
          if ('development' !== 'production' && last._isVue) {
            warnNonExistent(path, last);
          }
          set(last, key, obj);
        }
      } else {
        if (isArray(obj)) {
          obj.$set(key, val);
        } else if (key in obj) {
          obj[key] = val;
        } else {
          if ('development' !== 'production' && obj._isVue) {
            warnNonExistent(path, obj);
          }
          set(obj, key, val);
        }
      }
    }
    return true;
  }

var path = Object.freeze({
    parsePath: parsePath,
    getPath: getPath,
    setPath: setPath
  });

  var expressionCache = new Cache(1000);

  var allowedKeywords = 'Math,Date,this,true,false,null,undefined,Infinity,NaN,' + 'isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,' + 'encodeURIComponent,parseInt,parseFloat';
  var allowedKeywordsRE = new RegExp('^(' + allowedKeywords.replace(/,/g, '\\b|') + '\\b)');

  // keywords that don't make sense inside expressions
  var improperKeywords = 'break,case,class,catch,const,continue,debugger,default,' + 'delete,do,else,export,extends,finally,for,function,if,' + 'import,in,instanceof,let,return,super,switch,throw,try,' + 'var,while,with,yield,enum,await,implements,package,' + 'protected,static,interface,private,public';
  var improperKeywordsRE = new RegExp('^(' + improperKeywords.replace(/,/g, '\\b|') + '\\b)');

  var wsRE = /\s/g;
  var newlineRE = /\n/g;
  var saveRE = /[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g;
  var restoreRE = /"(\d+)"/g;
  var pathTestRE = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/;
  var identRE = /[^\w$\.](?:[A-Za-z_$][\w$]*)/g;
  var literalValueRE$1 = /^(?:true|false|null|undefined|Infinity|NaN)$/;

  function noop() {}

  /**
   * Save / Rewrite / Restore
   *
   * When rewriting paths found in an expression, it is
   * possible for the same letter sequences to be found in
   * strings and Object literal property keys. Therefore we
   * remove and store these parts in a temporary array, and
   * restore them after the path rewrite.
   */

  var saved = [];

  /**
   * Save replacer
   *
   * The save regex can match two possible cases:
   * 1. An opening object literal
   * 2. A string
   * If matched as a plain string, we need to escape its
   * newlines, since the string needs to be preserved when
   * generating the function body.
   *
   * @param {String} str
   * @param {String} isString - str if matched as a string
   * @return {String} - placeholder with index
   */

  function save(str, isString) {
    var i = saved.length;
    saved[i] = isString ? str.replace(newlineRE, '\\n') : str;
    return '"' + i + '"';
  }

  /**
   * Path rewrite replacer
   *
   * @param {String} raw
   * @return {String}
   */

  function rewrite(raw) {
    var c = raw.charAt(0);
    var path = raw.slice(1);
    if (allowedKeywordsRE.test(path)) {
      return raw;
    } else {
      path = path.indexOf('"') > -1 ? path.replace(restoreRE, restore) : path;
      return c + 'scope.' + path;
    }
  }

  /**
   * Restore replacer
   *
   * @param {String} str
   * @param {String} i - matched save index
   * @return {String}
   */

  function restore(str, i) {
    return saved[i];
  }

  /**
   * Rewrite an expression, prefixing all path accessors with
   * `scope.` and generate getter/setter functions.
   *
   * @param {String} exp
   * @return {Function}
   */

  function compileGetter(exp) {
    if (improperKeywordsRE.test(exp)) {
      'development' !== 'production' && warn('Avoid using reserved keywords in expression: ' + exp);
    }
    // reset state
    saved.length = 0;
    // save strings and object literal keys
    var body = exp.replace(saveRE, save).replace(wsRE, '');
    // rewrite all paths
    // pad 1 space here because the regex matches 1 extra char
    body = (' ' + body).replace(identRE, rewrite).replace(restoreRE, restore);
    return makeGetterFn(body);
  }

  /**
   * Build a getter function. Requires eval.
   *
   * We isolate the try/catch so it doesn't affect the
   * optimization of the parse function when it is not called.
   *
   * @param {String} body
   * @return {Function|undefined}
   */

  function makeGetterFn(body) {
    try {
      /* eslint-disable no-new-func */
      return new Function('scope', 'return ' + body + ';');
      /* eslint-enable no-new-func */
    } catch (e) {
      if ('development' !== 'production') {
        /* istanbul ignore if */
        if (e.toString().match(/unsafe-eval|CSP/)) {
          warn('It seems you are using the default build of Vue.js in an environment ' + 'with Content Security Policy that prohibits unsafe-eval. ' + 'Use the CSP-compliant build instead: ' + 'http://vuejs.org/guide/installation.html#CSP-compliant-build');
        } else {
          warn('Invalid expression. ' + 'Generated function body: ' + body);
        }
      }
      return noop;
    }
  }

  /**
   * Compile a setter function for the expression.
   *
   * @param {String} exp
   * @return {Function|undefined}
   */

  function compileSetter(exp) {
    var path = parsePath(exp);
    if (path) {
      return function (scope, val) {
        setPath(scope, path, val);
      };
    } else {
      'development' !== 'production' && warn('Invalid setter expression: ' + exp);
    }
  }

  /**
   * Parse an expression into re-written getter/setters.
   *
   * @param {String} exp
   * @param {Boolean} needSet
   * @return {Function}
   */

  function parseExpression(exp, needSet) {
    exp = exp.trim();
    // try cache
    var hit = expressionCache.get(exp);
    if (hit) {
      if (needSet && !hit.set) {
        hit.set = compileSetter(hit.exp);
      }
      return hit;
    }
    var res = { exp: exp };
    res.get = isSimplePath(exp) && exp.indexOf('[') < 0
    // optimized super simple getter
    ? makeGetterFn('scope.' + exp)
    // dynamic getter
    : compileGetter(exp);
    if (needSet) {
      res.set = compileSetter(exp);
    }
    expressionCache.put(exp, res);
    return res;
  }

  /**
   * Check if an expression is a simple path.
   *
   * @param {String} exp
   * @return {Boolean}
   */

  function isSimplePath(exp) {
    return pathTestRE.test(exp) &&
    // don't treat literal values as paths
    !literalValueRE$1.test(exp) &&
    // Math constants e.g. Math.PI, Math.E etc.
    exp.slice(0, 5) !== 'Math.';
  }

var expression = Object.freeze({
    parseExpression: parseExpression,
    isSimplePath: isSimplePath
  });

  // we have two separate queues: one for directive updates
  // and one for user watcher registered via $watch().
  // we want to guarantee directive updates to be called
  // before user watchers so that when user watchers are
  // triggered, the DOM would have already been in updated
  // state.

  var queue = [];
  var userQueue = [];
  var has = {};
  var circular = {};
  var waiting = false;

  /**
   * Reset the batcher's state.
   */

  function resetBatcherState() {
    queue.length = 0;
    userQueue.length = 0;
    has = {};
    circular = {};
    waiting = false;
  }

  /**
   * Flush both queues and run the watchers.
   */

  function flushBatcherQueue() {
    var _again = true;

    _function: while (_again) {
      _again = false;

      runBatcherQueue(queue);
      runBatcherQueue(userQueue);
      // user watchers triggered more watchers,
      // keep flushing until it depletes
      if (queue.length) {
        _again = true;
        continue _function;
      }
      // dev tool hook
      /* istanbul ignore if */
      if (devtools && config.devtools) {
        devtools.emit('flush');
      }
      resetBatcherState();
    }
  }

  /**
   * Run the watchers in a single queue.
   *
   * @param {Array} queue
   */

  function runBatcherQueue(queue) {
    // do not cache length because more watchers might be pushed
    // as we run existing watchers
    for (var i = 0; i < queue.length; i++) {
      var watcher = queue[i];
      var id = watcher.id;
      has[id] = null;
      watcher.run();
      // in dev build, check and stop circular updates.
      if ('development' !== 'production' && has[id] != null) {
        circular[id] = (circular[id] || 0) + 1;
        if (circular[id] > config._maxUpdateCount) {
          warn('You may have an infinite update loop for watcher ' + 'with expression "' + watcher.expression + '"', watcher.vm);
          break;
        }
      }
    }
    queue.length = 0;
  }

  /**
   * Push a watcher into the watcher queue.
   * Jobs with duplicate IDs will be skipped unless it's
   * pushed when the queue is being flushed.
   *
   * @param {Watcher} watcher
   *   properties:
   *   - {Number} id
   *   - {Function} run
   */

  function pushWatcher(watcher) {
    var id = watcher.id;
    if (has[id] == null) {
      // push watcher into appropriate queue
      var q = watcher.user ? userQueue : queue;
      has[id] = q.length;
      q.push(watcher);
      // queue the flush
      if (!waiting) {
        waiting = true;
        nextTick(flushBatcherQueue);
      }
    }
  }

  var uid$2 = 0;

  /**
   * A watcher parses an expression, collects dependencies,
   * and fires callback when the expression value changes.
   * This is used for both the $watch() api and directives.
   *
   * @param {Vue} vm
   * @param {String|Function} expOrFn
   * @param {Function} cb
   * @param {Object} options
   *                 - {Array} filters
   *                 - {Boolean} twoWay
   *                 - {Boolean} deep
   *                 - {Boolean} user
   *                 - {Boolean} sync
   *                 - {Boolean} lazy
   *                 - {Function} [preProcess]
   *                 - {Function} [postProcess]
   * @constructor
   */
  function Watcher(vm, expOrFn, cb, options) {
    // mix in options
    if (options) {
      extend(this, options);
    }
    var isFn = typeof expOrFn === 'function';
    this.vm = vm;
    vm._watchers.push(this);
    this.expression = expOrFn;
    this.cb = cb;
    this.id = ++uid$2; // uid for batching
    this.active = true;
    this.dirty = this.lazy; // for lazy watchers
    this.deps = [];
    this.newDeps = [];
    this.depIds = new _Set();
    this.newDepIds = new _Set();
    this.prevError = null; // for async error stacks
    // parse expression for getter/setter
    if (isFn) {
      this.getter = expOrFn;
      this.setter = undefined;
    } else {
      var res = parseExpression(expOrFn, this.twoWay);
      this.getter = res.get;
      this.setter = res.set;
    }
    this.value = this.lazy ? undefined : this.get();
    // state for avoiding false triggers for deep and Array
    // watchers during vm._digest()
    this.queued = this.shallow = false;
  }

  /**
   * Evaluate the getter, and re-collect dependencies.
   */

  Watcher.prototype.get = function () {
    this.beforeGet();
    var scope = this.scope || this.vm;
    var value;
    try {
      value = this.getter.call(scope, scope);
    } catch (e) {
      if ('development' !== 'production' && config.warnExpressionErrors) {
        warn('Error when evaluating expression ' + '"' + this.expression + '": ' + e.toString(), this.vm);
      }
    }
    // "touch" every property so they are all tracked as
    // dependencies for deep watching
    if (this.deep) {
      traverse(value);
    }
    if (this.preProcess) {
      value = this.preProcess(value);
    }
    if (this.filters) {
      value = scope._applyFilters(value, null, this.filters, false);
    }
    if (this.postProcess) {
      value = this.postProcess(value);
    }
    this.afterGet();
    return value;
  };

  /**
   * Set the corresponding value with the setter.
   *
   * @param {*} value
   */

  Watcher.prototype.set = function (value) {
    var scope = this.scope || this.vm;
    if (this.filters) {
      value = scope._applyFilters(value, this.value, this.filters, true);
    }
    try {
      this.setter.call(scope, scope, value);
    } catch (e) {
      if ('development' !== 'production' && config.warnExpressionErrors) {
        warn('Error when evaluating setter ' + '"' + this.expression + '": ' + e.toString(), this.vm);
      }
    }
    // two-way sync for v-for alias
    var forContext = scope.$forContext;
    if (forContext && forContext.alias === this.expression) {
      if (forContext.filters) {
        'development' !== 'production' && warn('It seems you are using two-way binding on ' + 'a v-for alias (' + this.expression + '), and the ' + 'v-for has filters. This will not work properly. ' + 'Either remove the filters or use an array of ' + 'objects and bind to object properties instead.', this.vm);
        return;
      }
      forContext._withLock(function () {
        if (scope.$key) {
          // original is an object
          forContext.rawValue[scope.$key] = value;
        } else {
          forContext.rawValue.$set(scope.$index, value);
        }
      });
    }
  };

  /**
   * Prepare for dependency collection.
   */

  Watcher.prototype.beforeGet = function () {
    Dep.target = this;
  };

  /**
   * Add a dependency to this directive.
   *
   * @param {Dep} dep
   */

  Watcher.prototype.addDep = function (dep) {
    var id = dep.id;
    if (!this.newDepIds.has(id)) {
      this.newDepIds.add(id);
      this.newDeps.push(dep);
      if (!this.depIds.has(id)) {
        dep.addSub(this);
      }
    }
  };

  /**
   * Clean up for dependency collection.
   */

  Watcher.prototype.afterGet = function () {
    Dep.target = null;
    var i = this.deps.length;
    while (i--) {
      var dep = this.deps[i];
      if (!this.newDepIds.has(dep.id)) {
        dep.removeSub(this);
      }
    }
    var tmp = this.depIds;
    this.depIds = this.newDepIds;
    this.newDepIds = tmp;
    this.newDepIds.clear();
    tmp = this.deps;
    this.deps = this.newDeps;
    this.newDeps = tmp;
    this.newDeps.length = 0;
  };

  /**
   * Subscriber interface.
   * Will be called when a dependency changes.
   *
   * @param {Boolean} shallow
   */

  Watcher.prototype.update = function (shallow) {
    if (this.lazy) {
      this.dirty = true;
    } else if (this.sync || !config.async) {
      this.run();
    } else {
      // if queued, only overwrite shallow with non-shallow,
      // but not the other way around.
      this.shallow = this.queued ? shallow ? this.shallow : false : !!shallow;
      this.queued = true;
      // record before-push error stack in debug mode
      /* istanbul ignore if */
      if ('development' !== 'production' && config.debug) {
        this.prevError = new Error('[vue] async stack trace');
      }
      pushWatcher(this);
    }
  };

  /**
   * Batcher job interface.
   * Will be called by the batcher.
   */

  Watcher.prototype.run = function () {
    if (this.active) {
      var value = this.get();
      if (value !== this.value ||
      // Deep watchers and watchers on Object/Arrays should fire even
      // when the value is the same, because the value may
      // have mutated; but only do so if this is a
      // non-shallow update (caused by a vm digest).
      (isObject(value) || this.deep) && !this.shallow) {
        // set new value
        var oldValue = this.value;
        this.value = value;
        // in debug + async mode, when a watcher callbacks
        // throws, we also throw the saved before-push error
        // so the full cross-tick stack trace is available.
        var prevError = this.prevError;
        /* istanbul ignore if */
        if ('development' !== 'production' && config.debug && prevError) {
          this.prevError = null;
          try {
            this.cb.call(this.vm, value, oldValue);
          } catch (e) {
            nextTick(function () {
              throw prevError;
            }, 0);
            throw e;
          }
        } else {
          this.cb.call(this.vm, value, oldValue);
        }
      }
      this.queued = this.shallow = false;
    }
  };

  /**
   * Evaluate the value of the watcher.
   * This only gets called for lazy watchers.
   */

  Watcher.prototype.evaluate = function () {
    // avoid overwriting another watcher that is being
    // collected.
    var current = Dep.target;
    this.value = this.get();
    this.dirty = false;
    Dep.target = current;
  };

  /**
   * Depend on all deps collected by this watcher.
   */

  Watcher.prototype.depend = function () {
    var i = this.deps.length;
    while (i--) {
      this.deps[i].depend();
    }
  };

  /**
   * Remove self from all dependencies' subcriber list.
   */

  Watcher.prototype.teardown = function () {
    if (this.active) {
      // remove self from vm's watcher list
      // this is a somewhat expensive operation so we skip it
      // if the vm is being destroyed or is performing a v-for
      // re-render (the watcher list is then filtered by v-for).
      if (!this.vm._isBeingDestroyed && !this.vm._vForRemoving) {
        this.vm._watchers.$remove(this);
      }
      var i = this.deps.length;
      while (i--) {
        this.deps[i].removeSub(this);
      }
      this.active = false;
      this.vm = this.cb = this.value = null;
    }
  };

  /**
   * Recrusively traverse an object to evoke all converted
   * getters, so that every nested property inside the object
   * is collected as a "deep" dependency.
   *
   * @param {*} val
   */

  var seenObjects = new _Set();
  function traverse(val, seen) {
    var i = undefined,
        keys = undefined;
    if (!seen) {
      seen = seenObjects;
      seen.clear();
    }
    var isA = isArray(val);
    var isO = isObject(val);
    if ((isA || isO) && Object.isExtensible(val)) {
      if (val.__ob__) {
        var depId = val.__ob__.dep.id;
        if (seen.has(depId)) {
          return;
        } else {
          seen.add(depId);
        }
      }
      if (isA) {
        i = val.length;
        while (i--) traverse(val[i], seen);
      } else if (isO) {
        keys = Object.keys(val);
        i = keys.length;
        while (i--) traverse(val[keys[i]], seen);
      }
    }
  }

  var text$1 = {

    bind: function bind() {
      this.attr = this.el.nodeType === 3 ? 'data' : 'textContent';
    },

    update: function update(value) {
      this.el[this.attr] = _toString(value);
    }
  };

  var templateCache = new Cache(1000);
  var idSelectorCache = new Cache(1000);

  var map = {
    efault: [0, '', ''],
    legend: [1, '<fieldset>', '</fieldset>'],
    tr: [2, '<table><tbody>', '</tbody></table>'],
    col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>']
  };

  map.td = map.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];

  map.option = map.optgroup = [1, '<select multiple="multiple">', '</select>'];

  map.thead = map.tbody = map.colgroup = map.caption = map.tfoot = [1, '<table>', '</table>'];

  map.g = map.defs = map.symbol = map.use = map.image = map.text = map.circle = map.ellipse = map.line = map.path = map.polygon = map.polyline = map.rect = [1, '<svg ' + 'xmlns="http://www.w3.org/2000/svg" ' + 'xmlns:xlink="http://www.w3.org/1999/xlink" ' + 'xmlns:ev="http://www.w3.org/2001/xml-events"' + 'version="1.1">', '</svg>'];

  /**
   * Check if a node is a supported template node with a
   * DocumentFragment content.
   *
   * @param {Node} node
   * @return {Boolean}
   */

  function isRealTemplate(node) {
    return isTemplate(node) && isFragment(node.content);
  }

  var tagRE$1 = /<([\w:-]+)/;
  var entityRE = /&#?\w+?;/;
  var commentRE = /<!--/;

  /**
   * Convert a string template to a DocumentFragment.
   * Determines correct wrapping by tag types. Wrapping
   * strategy found in jQuery & component/domify.
   *
   * @param {String} templateString
   * @param {Boolean} raw
   * @return {DocumentFragment}
   */

  function stringToFragment(templateString, raw) {
    // try a cache hit first
    var cacheKey = raw ? templateString : templateString.trim();
    var hit = templateCache.get(cacheKey);
    if (hit) {
      return hit;
    }

    var frag = document.createDocumentFragment();
    var tagMatch = templateString.match(tagRE$1);
    var entityMatch = entityRE.test(templateString);
    var commentMatch = commentRE.test(templateString);

    if (!tagMatch && !entityMatch && !commentMatch) {
      // text only, return a single text node.
      frag.appendChild(document.createTextNode(templateString));
    } else {
      var tag = tagMatch && tagMatch[1];
      var wrap = map[tag] || map.efault;
      var depth = wrap[0];
      var prefix = wrap[1];
      var suffix = wrap[2];
      var node = document.createElement('div');

      node.innerHTML = prefix + templateString + suffix;
      while (depth--) {
        node = node.lastChild;
      }

      var child;
      /* eslint-disable no-cond-assign */
      while (child = node.firstChild) {
        /* eslint-enable no-cond-assign */
        frag.appendChild(child);
      }
    }
    if (!raw) {
      trimNode(frag);
    }
    templateCache.put(cacheKey, frag);
    return frag;
  }

  /**
   * Convert a template node to a DocumentFragment.
   *
   * @param {Node} node
   * @return {DocumentFragment}
   */

  function nodeToFragment(node) {
    // if its a template tag and the browser supports it,
    // its content is already a document fragment. However, iOS Safari has
    // bug when using directly cloned template content with touch
    // events and can cause crashes when the nodes are removed from DOM, so we
    // have to treat template elements as string templates. (#2805)
    /* istanbul ignore if */
    if (isRealTemplate(node)) {
      return stringToFragment(node.innerHTML);
    }
    // script template
    if (node.tagName === 'SCRIPT') {
      return stringToFragment(node.textContent);
    }
    // normal node, clone it to avoid mutating the original
    var clonedNode = cloneNode(node);
    var frag = document.createDocumentFragment();
    var child;
    /* eslint-disable no-cond-assign */
    while (child = clonedNode.firstChild) {
      /* eslint-enable no-cond-assign */
      frag.appendChild(child);
    }
    trimNode(frag);
    return frag;
  }

  // Test for the presence of the Safari template cloning bug
  // https://bugs.webkit.org/showug.cgi?id=137755
  var hasBrokenTemplate = (function () {
    /* istanbul ignore else */
    if (inBrowser) {
      var a = document.createElement('div');
      a.innerHTML = '<template>1</template>';
      return !a.cloneNode(true).firstChild.innerHTML;
    } else {
      return false;
    }
  })();

  // Test for IE10/11 textarea placeholder clone bug
  var hasTextareaCloneBug = (function () {
    /* istanbul ignore else */
    if (inBrowser) {
      var t = document.createElement('textarea');
      t.placeholder = 't';
      return t.cloneNode(true).value === 't';
    } else {
      return false;
    }
  })();

  /**
   * 1. Deal with Safari cloning nested <template> bug by
   *    manually cloning all template instances.
   * 2. Deal with IE10/11 textarea placeholder bug by setting
   *    the correct value after cloning.
   *
   * @param {Element|DocumentFragment} node
   * @return {Element|DocumentFragment}
   */

  function cloneNode(node) {
    /* istanbul ignore if */
    if (!node.querySelectorAll) {
      return node.cloneNode();
    }
    var res = node.cloneNode(true);
    var i, original, cloned;
    /* istanbul ignore if */
    if (hasBrokenTemplate) {
      var tempClone = res;
      if (isRealTemplate(node)) {
        node = node.content;
        tempClone = res.content;
      }
      original = node.querySelectorAll('template');
      if (original.length) {
        cloned = tempClone.querySelectorAll('template');
        i = cloned.length;
        while (i--) {
          cloned[i].parentNode.replaceChild(cloneNode(original[i]), cloned[i]);
        }
      }
    }
    /* istanbul ignore if */
    if (hasTextareaCloneBug) {
      if (node.tagName === 'TEXTAREA') {
        res.value = node.value;
      } else {
        original = node.querySelectorAll('textarea');
        if (original.length) {
          cloned = res.querySelectorAll('textarea');
          i = cloned.length;
          while (i--) {
            cloned[i].value = original[i].value;
          }
        }
      }
    }
    return res;
  }

  /**
   * Process the template option and normalizes it into a
   * a DocumentFragment that can be used as a partial or a
   * instance template.
   *
   * @param {*} template
   *        Possible values include:
   *        - DocumentFragment object
   *        - Node object of type Template
   *        - id selector: '#some-template-id'
   *        - template string: '<div><span>{{msg}}</span></div>'
   * @param {Boolean} shouldClone
   * @param {Boolean} raw
   *        inline HTML interpolation. Do not check for id
   *        selector and keep whitespace in the string.
   * @return {DocumentFragment|undefined}
   */

  function parseTemplate(template, shouldClone, raw) {
    var node, frag;

    // if the template is already a document fragment,
    // do nothing
    if (isFragment(template)) {
      trimNode(template);
      return shouldClone ? cloneNode(template) : template;
    }

    if (typeof template === 'string') {
      // id selector
      if (!raw && template.charAt(0) === '#') {
        // id selector can be cached too
        frag = idSelectorCache.get(template);
        if (!frag) {
          node = document.getElementById(template.slice(1));
          if (node) {
            frag = nodeToFragment(node);
            // save selector to cache
            idSelectorCache.put(template, frag);
          }
        }
      } else {
        // normal string template
        frag = stringToFragment(template, raw);
      }
    } else if (template.nodeType) {
      // a direct node
      frag = nodeToFragment(template);
    }

    return frag && shouldClone ? cloneNode(frag) : frag;
  }

var template = Object.freeze({
    cloneNode: cloneNode,
    parseTemplate: parseTemplate
  });

  var html = {

    bind: function bind() {
      // a comment node means this is a binding for
      // {{{ inline unescaped html }}}
      if (this.el.nodeType === 8) {
        // hold nodes
        this.nodes = [];
        // replace the placeholder with proper anchor
        this.anchor = createAnchor('v-html');
        replace(this.el, this.anchor);
      }
    },

    update: function update(value) {
      value = _toString(value);
      if (this.nodes) {
        this.swap(value);
      } else {
        this.el.innerHTML = value;
      }
    },

    swap: function swap(value) {
      // remove old nodes
      var i = this.nodes.length;
      while (i--) {
        remove(this.nodes[i]);
      }
      // convert new value to a fragment
      // do not attempt to retrieve from id selector
      var frag = parseTemplate(value, true, true);
      // save a reference to these nodes so we can remove later
      this.nodes = toArray(frag.childNodes);
      before(frag, this.anchor);
    }
  };

  /**
   * Abstraction for a partially-compiled fragment.
   * Can optionally compile content with a child scope.
   *
   * @param {Function} linker
   * @param {Vue} vm
   * @param {DocumentFragment} frag
   * @param {Vue} [host]
   * @param {Object} [scope]
   * @param {Fragment} [parentFrag]
   */
  function Fragment(linker, vm, frag, host, scope, parentFrag) {
    this.children = [];
    this.childFrags = [];
    this.vm = vm;
    this.scope = scope;
    this.inserted = false;
    this.parentFrag = parentFrag;
    if (parentFrag) {
      parentFrag.childFrags.push(this);
    }
    this.unlink = linker(vm, frag, host, scope, this);
    var single = this.single = frag.childNodes.length === 1 &&
    // do not go single mode if the only node is an anchor
    !frag.childNodes[0].__v_anchor;
    if (single) {
      this.node = frag.childNodes[0];
      this.before = singleBefore;
      this.remove = singleRemove;
    } else {
      this.node = createAnchor('fragment-start');
      this.end = createAnchor('fragment-end');
      this.frag = frag;
      prepend(this.node, frag);
      frag.appendChild(this.end);
      this.before = multiBefore;
      this.remove = multiRemove;
    }
    this.node.__v_frag = this;
  }

  /**
   * Call attach/detach for all components contained within
   * this fragment. Also do so recursively for all child
   * fragments.
   *
   * @param {Function} hook
   */

  Fragment.prototype.callHook = function (hook) {
    var i, l;
    for (i = 0, l = this.childFrags.length; i < l; i++) {
      this.childFrags[i].callHook(hook);
    }
    for (i = 0, l = this.children.length; i < l; i++) {
      hook(this.children[i]);
    }
  };

  /**
   * Insert fragment before target, single node version
   *
   * @param {Node} target
   * @param {Boolean} withTransition
   */

  function singleBefore(target, withTransition) {
    this.inserted = true;
    var method = withTransition !== false ? beforeWithTransition : before;
    method(this.node, target, this.vm);
    if (inDoc(this.node)) {
      this.callHook(attach);
    }
  }

  /**
   * Remove fragment, single node version
   */

  function singleRemove() {
    this.inserted = false;
    var shouldCallRemove = inDoc(this.node);
    var self = this;
    this.beforeRemove();
    removeWithTransition(this.node, this.vm, function () {
      if (shouldCallRemove) {
        self.callHook(detach);
      }
      self.destroy();
    });
  }

  /**
   * Insert fragment before target, multi-nodes version
   *
   * @param {Node} target
   * @param {Boolean} withTransition
   */

  function multiBefore(target, withTransition) {
    this.inserted = true;
    var vm = this.vm;
    var method = withTransition !== false ? beforeWithTransition : before;
    mapNodeRange(this.node, this.end, function (node) {
      method(node, target, vm);
    });
    if (inDoc(this.node)) {
      this.callHook(attach);
    }
  }

  /**
   * Remove fragment, multi-nodes version
   */

  function multiRemove() {
    this.inserted = false;
    var self = this;
    var shouldCallRemove = inDoc(this.node);
    this.beforeRemove();
    removeNodeRange(this.node, this.end, this.vm, this.frag, function () {
      if (shouldCallRemove) {
        self.callHook(detach);
      }
      self.destroy();
    });
  }

  /**
   * Prepare the fragment for removal.
   */

  Fragment.prototype.beforeRemove = function () {
    var i, l;
    for (i = 0, l = this.childFrags.length; i < l; i++) {
      // call the same method recursively on child
      // fragments, depth-first
      this.childFrags[i].beforeRemove(false);
    }
    for (i = 0, l = this.children.length; i < l; i++) {
      // Call destroy for all contained instances,
      // with remove:false and defer:true.
      // Defer is necessary because we need to
      // keep the children to call detach hooks
      // on them.
      this.children[i].$destroy(false, true);
    }
    var dirs = this.unlink.dirs;
    for (i = 0, l = dirs.length; i < l; i++) {
      // disable the watchers on all the directives
      // so that the rendered content stays the same
      // during removal.
      dirs[i]._watcher && dirs[i]._watcher.teardown();
    }
  };

  /**
   * Destroy the fragment.
   */

  Fragment.prototype.destroy = function () {
    if (this.parentFrag) {
      this.parentFrag.childFrags.$remove(this);
    }
    this.node.__v_frag = null;
    this.unlink();
  };

  /**
   * Call attach hook for a Vue instance.
   *
   * @param {Vue} child
   */

  function attach(child) {
    if (!child._isAttached && inDoc(child.$el)) {
      child._callHook('attached');
    }
  }

  /**
   * Call detach hook for a Vue instance.
   *
   * @param {Vue} child
   */

  function detach(child) {
    if (child._isAttached && !inDoc(child.$el)) {
      child._callHook('detached');
    }
  }

  var linkerCache = new Cache(5000);

  /**
   * A factory that can be used to create instances of a
   * fragment. Caches the compiled linker if possible.
   *
   * @param {Vue} vm
   * @param {Element|String} el
   */
  function FragmentFactory(vm, el) {
    this.vm = vm;
    var template;
    var isString = typeof el === 'string';
    if (isString || isTemplate(el) && !el.hasAttribute('v-if')) {
      template = parseTemplate(el, true);
    } else {
      template = document.createDocumentFragment();
      template.appendChild(el);
    }
    this.template = template;
    // linker can be cached, but only for components
    var linker;
    var cid = vm.constructor.cid;
    if (cid > 0) {
      var cacheId = cid + (isString ? el : getOuterHTML(el));
      linker = linkerCache.get(cacheId);
      if (!linker) {
        linker = compile(template, vm.$options, true);
        linkerCache.put(cacheId, linker);
      }
    } else {
      linker = compile(template, vm.$options, true);
    }
    this.linker = linker;
  }

  /**
   * Create a fragment instance with given host and scope.
   *
   * @param {Vue} host
   * @param {Object} scope
   * @param {Fragment} parentFrag
   */

  FragmentFactory.prototype.create = function (host, scope, parentFrag) {
    var frag = cloneNode(this.template);
    return new Fragment(this.linker, this.vm, frag, host, scope, parentFrag);
  };

  var ON = 700;
  var MODEL = 800;
  var BIND = 850;
  var TRANSITION = 1100;
  var EL = 1500;
  var COMPONENT = 1500;
  var PARTIAL = 1750;
  var IF = 2100;
  var FOR = 2200;
  var SLOT = 2300;

  var uid$3 = 0;

  var vFor = {

    priority: FOR,
    terminal: true,

    params: ['track-by', 'stagger', 'enter-stagger', 'leave-stagger'],

    bind: function bind() {
      // support "item in/of items" syntax
      var inMatch = this.expression.match(/(.*) (?:in|of) (.*)/);
      if (inMatch) {
        var itMatch = inMatch[1].match(/\((.*),(.*)\)/);
        if (itMatch) {
          this.iterator = itMatch[1].trim();
          this.alias = itMatch[2].trim();
        } else {
          this.alias = inMatch[1].trim();
        }
        this.expression = inMatch[2];
      }

      if (!this.alias) {
        'development' !== 'production' && warn('Invalid v-for expression "' + this.descriptor.raw + '": ' + 'alias is required.', this.vm);
        return;
      }

      // uid as a cache identifier
      this.id = '__v-for__' + ++uid$3;

      // check if this is an option list,
      // so that we know if we need to update the <select>'s
      // v-model when the option list has changed.
      // because v-model has a lower priority than v-for,
      // the v-model is not bound here yet, so we have to
      // retrive it in the actual updateModel() function.
      var tag = this.el.tagName;
      this.isOption = (tag === 'OPTION' || tag === 'OPTGROUP') && this.el.parentNode.tagName === 'SELECT';

      // setup anchor nodes
      this.start = createAnchor('v-for-start');
      this.end = createAnchor('v-for-end');
      replace(this.el, this.end);
      before(this.start, this.end);

      // cache
      this.cache = Object.create(null);

      // fragment factory
      this.factory = new FragmentFactory(this.vm, this.el);
    },

    update: function update(data) {
      this.diff(data);
      this.updateRef();
      this.updateModel();
    },

    /**
     * Diff, based on new data and old data, determine the
     * minimum amount of DOM manipulations needed to make the
     * DOM reflect the new data Array.
     *
     * The algorithm diffs the new data Array by storing a
     * hidden reference to an owner vm instance on previously
     * seen data. This allows us to achieve O(n) which is
     * better than a levenshtein distance based algorithm,
     * which is O(m * n).
     *
     * @param {Array} data
     */

    diff: function diff(data) {
      // check if the Array was converted from an Object
      var item = data[0];
      var convertedFromObject = this.fromObject = isObject(item) && hasOwn(item, '$key') && hasOwn(item, '$value');

      var trackByKey = this.params.trackBy;
      var oldFrags = this.frags;
      var frags = this.frags = new Array(data.length);
      var alias = this.alias;
      var iterator = this.iterator;
      var start = this.start;
      var end = this.end;
      var inDocument = inDoc(start);
      var init = !oldFrags;
      var i, l, frag, key, value, primitive;

      // First pass, go through the new Array and fill up
      // the new frags array. If a piece of data has a cached
      // instance for it, we reuse it. Otherwise build a new
      // instance.
      for (i = 0, l = data.length; i < l; i++) {
        item = data[i];
        key = convertedFromObject ? item.$key : null;
        value = convertedFromObject ? item.$value : item;
        primitive = !isObject(value);
        frag = !init && this.getCachedFrag(value, i, key);
        if (frag) {
          // reusable fragment
          frag.reused = true;
          // update $index
          frag.scope.$index = i;
          // update $key
          if (key) {
            frag.scope.$key = key;
          }
          // update iterator
          if (iterator) {
            frag.scope[iterator] = key !== null ? key : i;
          }
          // update data for track-by, object repeat &
          // primitive values.
          if (trackByKey || convertedFromObject || primitive) {
            withoutConversion(function () {
              frag.scope[alias] = value;
            });
          }
        } else {
          // new isntance
          frag = this.create(value, alias, i, key);
          frag.fresh = !init;
        }
        frags[i] = frag;
        if (init) {
          frag.before(end);
        }
      }

      // we're done for the initial render.
      if (init) {
        return;
      }

      // Second pass, go through the old fragments and
      // destroy those who are not reused (and remove them
      // from cache)
      var removalIndex = 0;
      var totalRemoved = oldFrags.length - frags.length;
      // when removing a large number of fragments, watcher removal
      // turns out to be a perf bottleneck, so we batch the watcher
      // removals into a single filter call!
      this.vm._vForRemoving = true;
      for (i = 0, l = oldFrags.length; i < l; i++) {
        frag = oldFrags[i];
        if (!frag.reused) {
          this.deleteCachedFrag(frag);
          this.remove(frag, removalIndex++, totalRemoved, inDocument);
        }
      }
      this.vm._vForRemoving = false;
      if (removalIndex) {
        this.vm._watchers = this.vm._watchers.filter(function (w) {
          return w.active;
        });
      }

      // Final pass, move/insert new fragments into the
      // right place.
      var targetPrev, prevEl, currentPrev;
      var insertionIndex = 0;
      for (i = 0, l = frags.length; i < l; i++) {
        frag = frags[i];
        // this is the frag that we should be after
        targetPrev = frags[i - 1];
        prevEl = targetPrev ? targetPrev.staggerCb ? targetPrev.staggerAnchor : targetPrev.end || targetPrev.node : start;
        if (frag.reused && !frag.staggerCb) {
          currentPrev = findPrevFrag(frag, start, this.id);
          if (currentPrev !== targetPrev && (!currentPrev ||
          // optimization for moving a single item.
          // thanks to suggestions by @livoras in #1807
          findPrevFrag(currentPrev, start, this.id) !== targetPrev)) {
            this.move(frag, prevEl);
          }
        } else {
          // new instance, or still in stagger.
          // insert with updated stagger index.
          this.insert(frag, insertionIndex++, prevEl, inDocument);
        }
        frag.reused = frag.fresh = false;
      }
    },

    /**
     * Create a new fragment instance.
     *
     * @param {*} value
     * @param {String} alias
     * @param {Number} index
     * @param {String} [key]
     * @return {Fragment}
     */

    create: function create(value, alias, index, key) {
      var host = this._host;
      // create iteration scope
      var parentScope = this._scope || this.vm;
      var scope = Object.create(parentScope);
      // ref holder for the scope
      scope.$refs = Object.create(parentScope.$refs);
      scope.$els = Object.create(parentScope.$els);
      // make sure point $parent to parent scope
      scope.$parent = parentScope;
      // for two-way binding on alias
      scope.$forContext = this;
      // define scope properties
      // important: define the scope alias without forced conversion
      // so that frozen data structures remain non-reactive.
      withoutConversion(function () {
        defineReactive(scope, alias, value);
      });
      defineReactive(scope, '$index', index);
      if (key) {
        defineReactive(scope, '$key', key);
      } else if (scope.$key) {
        // avoid accidental fallback
        def(scope, '$key', null);
      }
      if (this.iterator) {
        defineReactive(scope, this.iterator, key !== null ? key : index);
      }
      var frag = this.factory.create(host, scope, this._frag);
      frag.forId = this.id;
      this.cacheFrag(value, frag, index, key);
      return frag;
    },

    /**
     * Update the v-ref on owner vm.
     */

    updateRef: function updateRef() {
      var ref = this.descriptor.ref;
      if (!ref) return;
      var hash = (this._scope || this.vm).$refs;
      var refs;
      if (!this.fromObject) {
        refs = this.frags.map(findVmFromFrag);
      } else {
        refs = {};
        this.frags.forEach(function (frag) {
          refs[frag.scope.$key] = findVmFromFrag(frag);
        });
      }
      hash[ref] = refs;
    },

    /**
     * For option lists, update the containing v-model on
     * parent <select>.
     */

    updateModel: function updateModel() {
      if (this.isOption) {
        var parent = this.start.parentNode;
        var model = parent && parent.__v_model;
        if (model) {
          model.forceUpdate();
        }
      }
    },

    /**
     * Insert a fragment. Handles staggering.
     *
     * @param {Fragment} frag
     * @param {Number} index
     * @param {Node} prevEl
     * @param {Boolean} inDocument
     */

    insert: function insert(frag, index, prevEl, inDocument) {
      if (frag.staggerCb) {
        frag.staggerCb.cancel();
        frag.staggerCb = null;
      }
      var staggerAmount = this.getStagger(frag, index, null, 'enter');
      if (inDocument && staggerAmount) {
        // create an anchor and insert it synchronously,
        // so that we can resolve the correct order without
        // worrying about some elements not inserted yet
        var anchor = frag.staggerAnchor;
        if (!anchor) {
          anchor = frag.staggerAnchor = createAnchor('stagger-anchor');
          anchor.__v_frag = frag;
        }
        after(anchor, prevEl);
        var op = frag.staggerCb = cancellable(function () {
          frag.staggerCb = null;
          frag.before(anchor);
          remove(anchor);
        });
        setTimeout(op, staggerAmount);
      } else {
        var target = prevEl.nextSibling;
        /* istanbul ignore if */
        if (!target) {
          // reset end anchor position in case the position was messed up
          // by an external drag-n-drop library.
          after(this.end, prevEl);
          target = this.end;
        }
        frag.before(target);
      }
    },

    /**
     * Remove a fragment. Handles staggering.
     *
     * @param {Fragment} frag
     * @param {Number} index
     * @param {Number} total
     * @param {Boolean} inDocument
     */

    remove: function remove(frag, index, total, inDocument) {
      if (frag.staggerCb) {
        frag.staggerCb.cancel();
        frag.staggerCb = null;
        // it's not possible for the same frag to be removed
        // twice, so if we have a pending stagger callback,
        // it means this frag is queued for enter but removed
        // before its transition started. Since it is already
        // destroyed, we can just leave it in detached state.
        return;
      }
      var staggerAmount = this.getStagger(frag, index, total, 'leave');
      if (inDocument && staggerAmount) {
        var op = frag.staggerCb = cancellable(function () {
          frag.staggerCb = null;
          frag.remove();
        });
        setTimeout(op, staggerAmount);
      } else {
        frag.remove();
      }
    },

    /**
     * Move a fragment to a new position.
     * Force no transition.
     *
     * @param {Fragment} frag
     * @param {Node} prevEl
     */

    move: function move(frag, prevEl) {
      // fix a common issue with Sortable:
      // if prevEl doesn't have nextSibling, this means it's
      // been dragged after the end anchor. Just re-position
      // the end anchor to the end of the container.
      /* istanbul ignore if */
      if (!prevEl.nextSibling) {
        this.end.parentNode.appendChild(this.end);
      }
      frag.before(prevEl.nextSibling, false);
    },

    /**
     * Cache a fragment using track-by or the object key.
     *
     * @param {*} value
     * @param {Fragment} frag
     * @param {Number} index
     * @param {String} [key]
     */

    cacheFrag: function cacheFrag(value, frag, index, key) {
      var trackByKey = this.params.trackBy;
      var cache = this.cache;
      var primitive = !isObject(value);
      var id;
      if (key || trackByKey || primitive) {
        id = getTrackByKey(index, key, value, trackByKey);
        if (!cache[id]) {
          cache[id] = frag;
        } else if (trackByKey !== '$index') {
          'development' !== 'production' && this.warnDuplicate(value);
        }
      } else {
        id = this.id;
        if (hasOwn(value, id)) {
          if (value[id] === null) {
            value[id] = frag;
          } else {
            'development' !== 'production' && this.warnDuplicate(value);
          }
        } else if (Object.isExtensible(value)) {
          def(value, id, frag);
        } else if ('development' !== 'production') {
          warn('Frozen v-for objects cannot be automatically tracked, make sure to ' + 'provide a track-by key.');
        }
      }
      frag.raw = value;
    },

    /**
     * Get a cached fragment from the value/index/key
     *
     * @param {*} value
     * @param {Number} index
     * @param {String} key
     * @return {Fragment}
     */

    getCachedFrag: function getCachedFrag(value, index, key) {
      var trackByKey = this.params.trackBy;
      var primitive = !isObject(value);
      var frag;
      if (key || trackByKey || primitive) {
        var id = getTrackByKey(index, key, value, trackByKey);
        frag = this.cache[id];
      } else {
        frag = value[this.id];
      }
      if (frag && (frag.reused || frag.fresh)) {
        'development' !== 'production' && this.warnDuplicate(value);
      }
      return frag;
    },

    /**
     * Delete a fragment from cache.
     *
     * @param {Fragment} frag
     */

    deleteCachedFrag: function deleteCachedFrag(frag) {
      var value = frag.raw;
      var trackByKey = this.params.trackBy;
      var scope = frag.scope;
      var index = scope.$index;
      // fix #948: avoid accidentally fall through to
      // a parent repeater which happens to have $key.
      var key = hasOwn(scope, '$key') && scope.$key;
      var primitive = !isObject(value);
      if (trackByKey || key || primitive) {
        var id = getTrackByKey(index, key, value, trackByKey);
        this.cache[id] = null;
      } else {
        value[this.id] = null;
        frag.raw = null;
      }
    },

    /**
     * Get the stagger amount for an insertion/removal.
     *
     * @param {Fragment} frag
     * @param {Number} index
     * @param {Number} total
     * @param {String} type
     */

    getStagger: function getStagger(frag, index, total, type) {
      type = type + 'Stagger';
      var trans = frag.node.__v_trans;
      var hooks = trans && trans.hooks;
      var hook = hooks && (hooks[type] || hooks.stagger);
      return hook ? hook.call(frag, index, total) : index * parseInt(this.params[type] || this.params.stagger, 10);
    },

    /**
     * Pre-process the value before piping it through the
     * filters. This is passed to and called by the watcher.
     */

    _preProcess: function _preProcess(value) {
      // regardless of type, store the un-filtered raw value.
      this.rawValue = value;
      return value;
    },

    /**
     * Post-process the value after it has been piped through
     * the filters. This is passed to and called by the watcher.
     *
     * It is necessary for this to be called during the
     * watcher's dependency collection phase because we want
     * the v-for to update when the source Object is mutated.
     */

    _postProcess: function _postProcess(value) {
      if (isArray(value)) {
        return value;
      } else if (isPlainObject(value)) {
        // convert plain object to array.
        var keys = Object.keys(value);
        var i = keys.length;
        var res = new Array(i);
        var key;
        while (i--) {
          key = keys[i];
          res[i] = {
            $key: key,
            $value: value[key]
          };
        }
        return res;
      } else {
        if (typeof value === 'number' && !isNaN(value)) {
          value = range(value);
        }
        return value || [];
      }
    },

    unbind: function unbind() {
      if (this.descriptor.ref) {
        (this._scope || this.vm).$refs[this.descriptor.ref] = null;
      }
      if (this.frags) {
        var i = this.frags.length;
        var frag;
        while (i--) {
          frag = this.frags[i];
          this.deleteCachedFrag(frag);
          frag.destroy();
        }
      }
    }
  };

  /**
   * Helper to find the previous element that is a fragment
   * anchor. This is necessary because a destroyed frag's
   * element could still be lingering in the DOM before its
   * leaving transition finishes, but its inserted flag
   * should have been set to false so we can skip them.
   *
   * If this is a block repeat, we want to make sure we only
   * return frag that is bound to this v-for. (see #929)
   *
   * @param {Fragment} frag
   * @param {Comment|Text} anchor
   * @param {String} id
   * @return {Fragment}
   */

  function findPrevFrag(frag, anchor, id) {
    var el = frag.node.previousSibling;
    /* istanbul ignore if */
    if (!el) return;
    frag = el.__v_frag;
    while ((!frag || frag.forId !== id || !frag.inserted) && el !== anchor) {
      el = el.previousSibling;
      /* istanbul ignore if */
      if (!el) return;
      frag = el.__v_frag;
    }
    return frag;
  }

  /**
   * Find a vm from a fragment.
   *
   * @param {Fragment} frag
   * @return {Vue|undefined}
   */

  function findVmFromFrag(frag) {
    var node = frag.node;
    // handle multi-node frag
    if (frag.end) {
      while (!node.__vue__ && node !== frag.end && node.nextSibling) {
        node = node.nextSibling;
      }
    }
    return node.__vue__;
  }

  /**
   * Create a range array from given number.
   *
   * @param {Number} n
   * @return {Array}
   */

  function range(n) {
    var i = -1;
    var ret = new Array(Math.floor(n));
    while (++i < n) {
      ret[i] = i;
    }
    return ret;
  }

  /**
   * Get the track by key for an item.
   *
   * @param {Number} index
   * @param {String} key
   * @param {*} value
   * @param {String} [trackByKey]
   */

  function getTrackByKey(index, key, value, trackByKey) {
    return trackByKey ? trackByKey === '$index' ? index : trackByKey.charAt(0).match(/\w/) ? getPath(value, trackByKey) : value[trackByKey] : key || value;
  }

  if ('development' !== 'production') {
    vFor.warnDuplicate = function (value) {
      warn('Duplicate value found in v-for="' + this.descriptor.raw + '": ' + JSON.stringify(value) + '. Use track-by="$index" if ' + 'you are expecting duplicate values.', this.vm);
    };
  }

  var vIf = {

    priority: IF,
    terminal: true,

    bind: function bind() {
      var el = this.el;
      if (!el.__vue__) {
        // check else block
        var next = el.nextElementSibling;
        if (next && getAttr(next, 'v-else') !== null) {
          remove(next);
          this.elseEl = next;
        }
        // check main block
        this.anchor = createAnchor('v-if');
        replace(el, this.anchor);
      } else {
        'development' !== 'production' && warn('v-if="' + this.expression + '" cannot be ' + 'used on an instance root element.', this.vm);
        this.invalid = true;
      }
    },

    update: function update(value) {
      if (this.invalid) return;
      if (value) {
        if (!this.frag) {
          this.insert();
        }
      } else {
        this.remove();
      }
    },

    insert: function insert() {
      if (this.elseFrag) {
        this.elseFrag.remove();
        this.elseFrag = null;
      }
      // lazy init factory
      if (!this.factory) {
        this.factory = new FragmentFactory(this.vm, this.el);
      }
      this.frag = this.factory.create(this._host, this._scope, this._frag);
      this.frag.before(this.anchor);
    },

    remove: function remove() {
      if (this.frag) {
        this.frag.remove();
        this.frag = null;
      }
      if (this.elseEl && !this.elseFrag) {
        if (!this.elseFactory) {
          this.elseFactory = new FragmentFactory(this.elseEl._context || this.vm, this.elseEl);
        }
        this.elseFrag = this.elseFactory.create(this._host, this._scope, this._frag);
        this.elseFrag.before(this.anchor);
      }
    },

    unbind: function unbind() {
      if (this.frag) {
        this.frag.destroy();
      }
      if (this.elseFrag) {
        this.elseFrag.destroy();
      }
    }
  };

  var show = {

    bind: function bind() {
      // check else block
      var next = this.el.nextElementSibling;
      if (next && getAttr(next, 'v-else') !== null) {
        this.elseEl = next;
      }
    },

    update: function update(value) {
      this.apply(this.el, value);
      if (this.elseEl) {
        this.apply(this.elseEl, !value);
      }
    },

    apply: function apply(el, value) {
      if (inDoc(el)) {
        applyTransition(el, value ? 1 : -1, toggle, this.vm);
      } else {
        toggle();
      }
      function toggle() {
        el.style.display = value ? '' : 'none';
      }
    }
  };

  var text$2 = {

    bind: function bind() {
      var self = this;
      var el = this.el;
      var isRange = el.type === 'range';
      var lazy = this.params.lazy;
      var number = this.params.number;
      var debounce = this.params.debounce;

      // handle composition events.
      //   http://blog.evanyou.me/2014/01/03/composition-event/
      // skip this for Android because it handles composition
      // events quite differently. Android doesn't trigger
      // composition events for language input methods e.g.
      // Chinese, but instead triggers them for spelling
      // suggestions... (see Discussion/#162)
      var composing = false;
      if (!isAndroid && !isRange) {
        this.on('compositionstart', function () {
          composing = true;
        });
        this.on('compositionend', function () {
          composing = false;
          // in IE11 the "compositionend" event fires AFTER
          // the "input" event, so the input handler is blocked
          // at the end... have to call it here.
          //
          // #1327: in lazy mode this is unecessary.
          if (!lazy) {
            self.listener();
          }
        });
      }

      // prevent messing with the input when user is typing,
      // and force update on blur.
      this.focused = false;
      if (!isRange && !lazy) {
        this.on('focus', function () {
          self.focused = true;
        });
        this.on('blur', function () {
          self.focused = false;
          // do not sync value after fragment removal (#2017)
          if (!self._frag || self._frag.inserted) {
            self.rawListener();
          }
        });
      }

      // Now attach the main listener
      this.listener = this.rawListener = function () {
        if (composing || !self._bound) {
          return;
        }
        var val = number || isRange ? toNumber(el.value) : el.value;
        self.set(val);
        // force update on next tick to avoid lock & same value
        // also only update when user is not typing
        nextTick(function () {
          if (self._bound && !self.focused) {
            self.update(self._watcher.value);
          }
        });
      };

      // apply debounce
      if (debounce) {
        this.listener = _debounce(this.listener, debounce);
      }

      // Support jQuery events, since jQuery.trigger() doesn't
      // trigger native events in some cases and some plugins
      // rely on $.trigger()
      //
      // We want to make sure if a listener is attached using
      // jQuery, it is also removed with jQuery, that's why
      // we do the check for each directive instance and
      // store that check result on itself. This also allows
      // easier test coverage control by unsetting the global
      // jQuery variable in tests.
      this.hasjQuery = typeof jQuery === 'function';
      if (this.hasjQuery) {
        var method = jQuery.fn.on ? 'on' : 'bind';
        jQuery(el)[method]('change', this.rawListener);
        if (!lazy) {
          jQuery(el)[method]('input', this.listener);
        }
      } else {
        this.on('change', this.rawListener);
        if (!lazy) {
          this.on('input', this.listener);
        }
      }

      // IE9 doesn't fire input event on backspace/del/cut
      if (!lazy && isIE9) {
        this.on('cut', function () {
          nextTick(self.listener);
        });
        this.on('keyup', function (e) {
          if (e.keyCode === 46 || e.keyCode === 8) {
            self.listener();
          }
        });
      }

      // set initial value if present
      if (el.hasAttribute('value') || el.tagName === 'TEXTAREA' && el.value.trim()) {
        this.afterBind = this.listener;
      }
    },

    update: function update(value) {
      // #3029 only update when the value changes. This prevent
      // browsers from overwriting values like selectionStart
      value = _toString(value);
      if (value !== this.el.value) this.el.value = value;
    },

    unbind: function unbind() {
      var el = this.el;
      if (this.hasjQuery) {
        var method = jQuery.fn.off ? 'off' : 'unbind';
        jQuery(el)[method]('change', this.listener);
        jQuery(el)[method]('input', this.listener);
      }
    }
  };

  var radio = {

    bind: function bind() {
      var self = this;
      var el = this.el;

      this.getValue = function () {
        // value overwrite via v-bind:value
        if (el.hasOwnProperty('_value')) {
          return el._value;
        }
        var val = el.value;
        if (self.params.number) {
          val = toNumber(val);
        }
        return val;
      };

      this.listener = function () {
        self.set(self.getValue());
      };
      this.on('change', this.listener);

      if (el.hasAttribute('checked')) {
        this.afterBind = this.listener;
      }
    },

    update: function update(value) {
      this.el.checked = looseEqual(value, this.getValue());
    }
  };

  var select = {

    bind: function bind() {
      var _this = this;

      var self = this;
      var el = this.el;

      // method to force update DOM using latest value.
      this.forceUpdate = function () {
        if (self._watcher) {
          self.update(self._watcher.get());
        }
      };

      // check if this is a multiple select
      var multiple = this.multiple = el.hasAttribute('multiple');

      // attach listener
      this.listener = function () {
        var value = getValue(el, multiple);
        value = self.params.number ? isArray(value) ? value.map(toNumber) : toNumber(value) : value;
        self.set(value);
      };
      this.on('change', this.listener);

      // if has initial value, set afterBind
      var initValue = getValue(el, multiple, true);
      if (multiple && initValue.length || !multiple && initValue !== null) {
        this.afterBind = this.listener;
      }

      // All major browsers except Firefox resets
      // selectedIndex with value -1 to 0 when the element
      // is appended to a new parent, therefore we have to
      // force a DOM update whenever that happens...
      this.vm.$on('hook:attached', function () {
        nextTick(_this.forceUpdate);
      });
      if (!inDoc(el)) {
        nextTick(this.forceUpdate);
      }
    },

    update: function update(value) {
      var el = this.el;
      el.selectedIndex = -1;
      var multi = this.multiple && isArray(value);
      var options = el.options;
      var i = options.length;
      var op, val;
      while (i--) {
        op = options[i];
        val = op.hasOwnProperty('_value') ? op._value : op.value;
        /* eslint-disable eqeqeq */
        op.selected = multi ? indexOf$1(value, val) > -1 : looseEqual(value, val);
        /* eslint-enable eqeqeq */
      }
    },

    unbind: function unbind() {
      /* istanbul ignore next */
      this.vm.$off('hook:attached', this.forceUpdate);
    }
  };

  /**
   * Get select value
   *
   * @param {SelectElement} el
   * @param {Boolean} multi
   * @param {Boolean} init
   * @return {Array|*}
   */

  function getValue(el, multi, init) {
    var res = multi ? [] : null;
    var op, val, selected;
    for (var i = 0, l = el.options.length; i < l; i++) {
      op = el.options[i];
      selected = init ? op.hasAttribute('selected') : op.selected;
      if (selected) {
        val = op.hasOwnProperty('_value') ? op._value : op.value;
        if (multi) {
          res.push(val);
        } else {
          return val;
        }
      }
    }
    return res;
  }

  /**
   * Native Array.indexOf uses strict equal, but in this
   * case we need to match string/numbers with custom equal.
   *
   * @param {Array} arr
   * @param {*} val
   */

  function indexOf$1(arr, val) {
    var i = arr.length;
    while (i--) {
      if (looseEqual(arr[i], val)) {
        return i;
      }
    }
    return -1;
  }

  var checkbox = {

    bind: function bind() {
      var self = this;
      var el = this.el;

      this.getValue = function () {
        return el.hasOwnProperty('_value') ? el._value : self.params.number ? toNumber(el.value) : el.value;
      };

      function getBooleanValue() {
        var val = el.checked;
        if (val && el.hasOwnProperty('_trueValue')) {
          return el._trueValue;
        }
        if (!val && el.hasOwnProperty('_falseValue')) {
          return el._falseValue;
        }
        return val;
      }

      this.listener = function () {
        var model = self._watcher.value;
        if (isArray(model)) {
          var val = self.getValue();
          if (el.checked) {
            if (indexOf(model, val) < 0) {
              model.push(val);
            }
          } else {
            model.$remove(val);
          }
        } else {
          self.set(getBooleanValue());
        }
      };

      this.on('change', this.listener);
      if (el.hasAttribute('checked')) {
        this.afterBind = this.listener;
      }
    },

    update: function update(value) {
      var el = this.el;
      if (isArray(value)) {
        el.checked = indexOf(value, this.getValue()) > -1;
      } else {
        if (el.hasOwnProperty('_trueValue')) {
          el.checked = looseEqual(value, el._trueValue);
        } else {
          el.checked = !!value;
        }
      }
    }
  };

  var handlers = {
    text: text$2,
    radio: radio,
    select: select,
    checkbox: checkbox
  };

  var model = {

    priority: MODEL,
    twoWay: true,
    handlers: handlers,
    params: ['lazy', 'number', 'debounce'],

    /**
     * Possible elements:
     *   <select>
     *   <textarea>
     *   <input type="*">
     *     - text
     *     - checkbox
     *     - radio
     *     - number
     */

    bind: function bind() {
      // friendly warning...
      this.checkFilters();
      if (this.hasRead && !this.hasWrite) {
        'development' !== 'production' && warn('It seems you are using a read-only filter with ' + 'v-model="' + this.descriptor.raw + '". ' + 'You might want to use a two-way filter to ensure correct behavior.', this.vm);
      }
      var el = this.el;
      var tag = el.tagName;
      var handler;
      if (tag === 'INPUT') {
        handler = handlers[el.type] || handlers.text;
      } else if (tag === 'SELECT') {
        handler = handlers.select;
      } else if (tag === 'TEXTAREA') {
        handler = handlers.text;
      } else {
        'development' !== 'production' && warn('v-model does not support element type: ' + tag, this.vm);
        return;
      }
      el.__v_model = this;
      handler.bind.call(this);
      this.update = handler.update;
      this._unbind = handler.unbind;
    },

    /**
     * Check read/write filter stats.
     */

    checkFilters: function checkFilters() {
      var filters = this.filters;
      if (!filters) return;
      var i = filters.length;
      while (i--) {
        var filter = resolveAsset(this.vm.$options, 'filters', filters[i].name);
        if (typeof filter === 'function' || filter.read) {
          this.hasRead = true;
        }
        if (filter.write) {
          this.hasWrite = true;
        }
      }
    },

    unbind: function unbind() {
      this.el.__v_model = null;
      this._unbind && this._unbind();
    }
  };

  // keyCode aliases
  var keyCodes = {
    esc: 27,
    tab: 9,
    enter: 13,
    space: 32,
    'delete': [8, 46],
    up: 38,
    left: 37,
    right: 39,
    down: 40
  };

  function keyFilter(handler, keys) {
    var codes = keys.map(function (key) {
      var charCode = key.charCodeAt(0);
      if (charCode > 47 && charCode < 58) {
        return parseInt(key, 10);
      }
      if (key.length === 1) {
        charCode = key.toUpperCase().charCodeAt(0);
        if (charCode > 64 && charCode < 91) {
          return charCode;
        }
      }
      return keyCodes[key];
    });
    codes = [].concat.apply([], codes);
    return function keyHandler(e) {
      if (codes.indexOf(e.keyCode) > -1) {
        return handler.call(this, e);
      }
    };
  }

  function stopFilter(handler) {
    return function stopHandler(e) {
      e.stopPropagation();
      return handler.call(this, e);
    };
  }

  function preventFilter(handler) {
    return function preventHandler(e) {
      e.preventDefault();
      return handler.call(this, e);
    };
  }

  function selfFilter(handler) {
    return function selfHandler(e) {
      if (e.target === e.currentTarget) {
        return handler.call(this, e);
      }
    };
  }

  var on$1 = {

    priority: ON,
    acceptStatement: true,
    keyCodes: keyCodes,

    bind: function bind() {
      // deal with iframes
      if (this.el.tagName === 'IFRAME' && this.arg !== 'load') {
        var self = this;
        this.iframeBind = function () {
          on(self.el.contentWindow, self.arg, self.handler, self.modifiers.capture);
        };
        this.on('load', this.iframeBind);
      }
    },

    update: function update(handler) {
      // stub a noop for v-on with no value,
      // e.g. @mousedown.prevent
      if (!this.descriptor.raw) {
        handler = function () {};
      }

      if (typeof handler !== 'function') {
        'development' !== 'production' && warn('v-on:' + this.arg + '="' + this.expression + '" expects a function value, ' + 'got ' + handler, this.vm);
        return;
      }

      // apply modifiers
      if (this.modifiers.stop) {
        handler = stopFilter(handler);
      }
      if (this.modifiers.prevent) {
        handler = preventFilter(handler);
      }
      if (this.modifiers.self) {
        handler = selfFilter(handler);
      }
      // key filter
      var keys = Object.keys(this.modifiers).filter(function (key) {
        return key !== 'stop' && key !== 'prevent' && key !== 'self' && key !== 'capture';
      });
      if (keys.length) {
        handler = keyFilter(handler, keys);
      }

      this.reset();
      this.handler = handler;

      if (this.iframeBind) {
        this.iframeBind();
      } else {
        on(this.el, this.arg, this.handler, this.modifiers.capture);
      }
    },

    reset: function reset() {
      var el = this.iframeBind ? this.el.contentWindow : this.el;
      if (this.handler) {
        off(el, this.arg, this.handler);
      }
    },

    unbind: function unbind() {
      this.reset();
    }
  };

  var prefixes = ['-webkit-', '-moz-', '-ms-'];
  var camelPrefixes = ['Webkit', 'Moz', 'ms'];
  var importantRE = /!important;?$/;
  var propCache = Object.create(null);

  var testEl = null;

  var style = {

    deep: true,

    update: function update(value) {
      if (typeof value === 'string') {
        this.el.style.cssText = value;
      } else if (isArray(value)) {
        this.handleObject(value.reduce(extend, {}));
      } else {
        this.handleObject(value || {});
      }
    },

    handleObject: function handleObject(value) {
      // cache object styles so that only changed props
      // are actually updated.
      var cache = this.cache || (this.cache = {});
      var name, val;
      for (name in cache) {
        if (!(name in value)) {
          this.handleSingle(name, null);
          delete cache[name];
        }
      }
      for (name in value) {
        val = value[name];
        if (val !== cache[name]) {
          cache[name] = val;
          this.handleSingle(name, val);
        }
      }
    },

    handleSingle: function handleSingle(prop, value) {
      prop = normalize(prop);
      if (!prop) return; // unsupported prop
      // cast possible numbers/booleans into strings
      if (value != null) value += '';
      if (value) {
        var isImportant = importantRE.test(value) ? 'important' : '';
        if (isImportant) {
          /* istanbul ignore if */
          if ('development' !== 'production') {
            warn('It\'s probably a bad idea to use !important with inline rules. ' + 'This feature will be deprecated in a future version of Vue.');
          }
          value = value.replace(importantRE, '').trim();
          this.el.style.setProperty(prop.kebab, value, isImportant);
        } else {
          this.el.style[prop.camel] = value;
        }
      } else {
        this.el.style[prop.camel] = '';
      }
    }

  };

  /**
   * Normalize a CSS property name.
   * - cache result
   * - auto prefix
   * - camelCase -> dash-case
   *
   * @param {String} prop
   * @return {String}
   */

  function normalize(prop) {
    if (propCache[prop]) {
      return propCache[prop];
    }
    var res = prefix(prop);
    propCache[prop] = propCache[res] = res;
    return res;
  }

  /**
   * Auto detect the appropriate prefix for a CSS property.
   * https://gist.github.com/paulirish/523692
   *
   * @param {String} prop
   * @return {String}
   */

  function prefix(prop) {
    prop = hyphenate(prop);
    var camel = camelize(prop);
    var upper = camel.charAt(0).toUpperCase() + camel.slice(1);
    if (!testEl) {
      testEl = document.createElement('div');
    }
    var i = prefixes.length;
    var prefixed;
    if (camel !== 'filter' && camel in testEl.style) {
      return {
        kebab: prop,
        camel: camel
      };
    }
    while (i--) {
      prefixed = camelPrefixes[i] + upper;
      if (prefixed in testEl.style) {
        return {
          kebab: prefixes[i] + prop,
          camel: prefixed
        };
      }
    }
  }

  // xlink
  var xlinkNS = 'http://www.w3.org/1999/xlink';
  var xlinkRE = /^xlink:/;

  // check for attributes that prohibit interpolations
  var disallowedInterpAttrRE = /^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/;
  // these attributes should also set their corresponding properties
  // because they only affect the initial state of the element
  var attrWithPropsRE = /^(?:value|checked|selected|muted)$/;
  // these attributes expect enumrated values of "true" or "false"
  // but are not boolean attributes
  var enumeratedAttrRE = /^(?:draggable|contenteditable|spellcheck)$/;

  // these attributes should set a hidden property for
  // binding v-model to object values
  var modelProps = {
    value: '_value',
    'true-value': '_trueValue',
    'false-value': '_falseValue'
  };

  var bind$1 = {

    priority: BIND,

    bind: function bind() {
      var attr = this.arg;
      var tag = this.el.tagName;
      // should be deep watch on object mode
      if (!attr) {
        this.deep = true;
      }
      // handle interpolation bindings
      var descriptor = this.descriptor;
      var tokens = descriptor.interp;
      if (tokens) {
        // handle interpolations with one-time tokens
        if (descriptor.hasOneTime) {
          this.expression = tokensToExp(tokens, this._scope || this.vm);
        }

        // only allow binding on native attributes
        if (disallowedInterpAttrRE.test(attr) || attr === 'name' && (tag === 'PARTIAL' || tag === 'SLOT')) {
          'development' !== 'production' && warn(attr + '="' + descriptor.raw + '": ' + 'attribute interpolation is not allowed in Vue.js ' + 'directives and special attributes.', this.vm);
          this.el.removeAttribute(attr);
          this.invalid = true;
        }

        /* istanbul ignore if */
        if ('development' !== 'production') {
          var raw = attr + '="' + descriptor.raw + '": ';
          // warn src
          if (attr === 'src') {
            warn(raw + 'interpolation in "src" attribute will cause ' + 'a 404 request. Use v-bind:src instead.', this.vm);
          }

          // warn style
          if (attr === 'style') {
            warn(raw + 'interpolation in "style" attribute will cause ' + 'the attribute to be discarded in Internet Explorer. ' + 'Use v-bind:style instead.', this.vm);
          }
        }
      }
    },

    update: function update(value) {
      if (this.invalid) {
        return;
      }
      var attr = this.arg;
      if (this.arg) {
        this.handleSingle(attr, value);
      } else {
        this.handleObject(value || {});
      }
    },

    // share object handler with v-bind:class
    handleObject: style.handleObject,

    handleSingle: function handleSingle(attr, value) {
      var el = this.el;
      var interp = this.descriptor.interp;
      if (this.modifiers.camel) {
        attr = camelize(attr);
      }
      if (!interp && attrWithPropsRE.test(attr) && attr in el) {
        var attrValue = attr === 'value' ? value == null // IE9 will set input.value to "null" for null...
        ? '' : value : value;

        if (el[attr] !== attrValue) {
          el[attr] = attrValue;
        }
      }
      // set model props
      var modelProp = modelProps[attr];
      if (!interp && modelProp) {
        el[modelProp] = value;
        // update v-model if present
        var model = el.__v_model;
        if (model) {
          model.listener();
        }
      }
      // do not set value attribute for textarea
      if (attr === 'value' && el.tagName === 'TEXTAREA') {
        el.removeAttribute(attr);
        return;
      }
      // update attribute
      if (enumeratedAttrRE.test(attr)) {
        el.setAttribute(attr, value ? 'true' : 'false');
      } else if (value != null && value !== false) {
        if (attr === 'class') {
          // handle edge case #1960:
          // class interpolation should not overwrite Vue transition class
          if (el.__v_trans) {
            value += ' ' + el.__v_trans.id + '-transition';
          }
          setClass(el, value);
        } else if (xlinkRE.test(attr)) {
          el.setAttributeNS(xlinkNS, attr, value === true ? '' : value);
        } else {
          el.setAttribute(attr, value === true ? '' : value);
        }
      } else {
        el.removeAttribute(attr);
      }
    }
  };

  var el = {

    priority: EL,

    bind: function bind() {
      /* istanbul ignore if */
      if (!this.arg) {
        return;
      }
      var id = this.id = camelize(this.arg);
      var refs = (this._scope || this.vm).$els;
      if (hasOwn(refs, id)) {
        refs[id] = this.el;
      } else {
        defineReactive(refs, id, this.el);
      }
    },

    unbind: function unbind() {
      var refs = (this._scope || this.vm).$els;
      if (refs[this.id] === this.el) {
        refs[this.id] = null;
      }
    }
  };

  var ref = {
    bind: function bind() {
      'development' !== 'production' && warn('v-ref:' + this.arg + ' must be used on a child ' + 'component. Found on <' + this.el.tagName.toLowerCase() + '>.', this.vm);
    }
  };

  var cloak = {
    bind: function bind() {
      var el = this.el;
      this.vm.$once('pre-hook:compiled', function () {
        el.removeAttribute('v-cloak');
      });
    }
  };

  // must export plain object
  var directives = {
    text: text$1,
    html: html,
    'for': vFor,
    'if': vIf,
    show: show,
    model: model,
    on: on$1,
    bind: bind$1,
    el: el,
    ref: ref,
    cloak: cloak
  };

  var vClass = {

    deep: true,

    update: function update(value) {
      if (!value) {
        this.cleanup();
      } else if (typeof value === 'string') {
        this.setClass(value.trim().split(/\s+/));
      } else {
        this.setClass(normalize$1(value));
      }
    },

    setClass: function setClass(value) {
      this.cleanup(value);
      for (var i = 0, l = value.length; i < l; i++) {
        var val = value[i];
        if (val) {
          apply(this.el, val, addClass);
        }
      }
      this.prevKeys = value;
    },

    cleanup: function cleanup(value) {
      var prevKeys = this.prevKeys;
      if (!prevKeys) return;
      var i = prevKeys.length;
      while (i--) {
        var key = prevKeys[i];
        if (!value || value.indexOf(key) < 0) {
          apply(this.el, key, removeClass);
        }
      }
    }
  };

  /**
   * Normalize objects and arrays (potentially containing objects)
   * into array of strings.
   *
   * @param {Object|Array<String|Object>} value
   * @return {Array<String>}
   */

  function normalize$1(value) {
    var res = [];
    if (isArray(value)) {
      for (var i = 0, l = value.length; i < l; i++) {
        var _key = value[i];
        if (_key) {
          if (typeof _key === 'string') {
            res.push(_key);
          } else {
            for (var k in _key) {
              if (_key[k]) res.push(k);
            }
          }
        }
      }
    } else if (isObject(value)) {
      for (var key in value) {
        if (value[key]) res.push(key);
      }
    }
    return res;
  }

  /**
   * Add or remove a class/classes on an element
   *
   * @param {Element} el
   * @param {String} key The class name. This may or may not
   *                     contain a space character, in such a
   *                     case we'll deal with multiple class
   *                     names at once.
   * @param {Function} fn
   */

  function apply(el, key, fn) {
    key = key.trim();
    if (key.indexOf(' ') === -1) {
      fn(el, key);
      return;
    }
    // The key contains one or more space characters.
    // Since a class name doesn't accept such characters, we
    // treat it as multiple classes.
    var keys = key.split(/\s+/);
    for (var i = 0, l = keys.length; i < l; i++) {
      fn(el, keys[i]);
    }
  }

  var component = {

    priority: COMPONENT,

    params: ['keep-alive', 'transition-mode', 'inline-template'],

    /**
     * Setup. Two possible usages:
     *
     * - static:
     *   <comp> or <div v-component="comp">
     *
     * - dynamic:
     *   <component :is="view">
     */

    bind: function bind() {
      if (!this.el.__vue__) {
        // keep-alive cache
        this.keepAlive = this.params.keepAlive;
        if (this.keepAlive) {
          this.cache = {};
        }
        // check inline-template
        if (this.params.inlineTemplate) {
          // extract inline template as a DocumentFragment
          this.inlineTemplate = extractContent(this.el, true);
        }
        // component resolution related state
        this.pendingComponentCb = this.Component = null;
        // transition related state
        this.pendingRemovals = 0;
        this.pendingRemovalCb = null;
        // create a ref anchor
        this.anchor = createAnchor('v-component');
        replace(this.el, this.anchor);
        // remove is attribute.
        // this is removed during compilation, but because compilation is
        // cached, when the component is used elsewhere this attribute
        // will remain at link time.
        this.el.removeAttribute('is');
        this.el.removeAttribute(':is');
        // remove ref, same as above
        if (this.descriptor.ref) {
          this.el.removeAttribute('v-ref:' + hyphenate(this.descriptor.ref));
        }
        // if static, build right now.
        if (this.literal) {
          this.setComponent(this.expression);
        }
      } else {
        'development' !== 'production' && warn('cannot mount component "' + this.expression + '" ' + 'on already mounted element: ' + this.el);
      }
    },

    /**
     * Public update, called by the watcher in the dynamic
     * literal scenario, e.g. <component :is="view">
     */

    update: function update(value) {
      if (!this.literal) {
        this.setComponent(value);
      }
    },

    /**
     * Switch dynamic components. May resolve the component
     * asynchronously, and perform transition based on
     * specified transition mode. Accepts a few additional
     * arguments specifically for vue-router.
     *
     * The callback is called when the full transition is
     * finished.
     *
     * @param {String} value
     * @param {Function} [cb]
     */

    setComponent: function setComponent(value, cb) {
      this.invalidatePending();
      if (!value) {
        // just remove current
        this.unbuild(true);
        this.remove(this.childVM, cb);
        this.childVM = null;
      } else {
        var self = this;
        this.resolveComponent(value, function () {
          self.mountComponent(cb);
        });
      }
    },

    /**
     * Resolve the component constructor to use when creating
     * the child vm.
     *
     * @param {String|Function} value
     * @param {Function} cb
     */

    resolveComponent: function resolveComponent(value, cb) {
      var self = this;
      this.pendingComponentCb = cancellable(function (Component) {
        self.ComponentName = Component.options.name || (typeof value === 'string' ? value : null);
        self.Component = Component;
        cb();
      });
      this.vm._resolveComponent(value, this.pendingComponentCb);
    },

    /**
     * Create a new instance using the current constructor and
     * replace the existing instance. This method doesn't care
     * whether the new component and the old one are actually
     * the same.
     *
     * @param {Function} [cb]
     */

    mountComponent: function mountComponent(cb) {
      // actual mount
      this.unbuild(true);
      var self = this;
      var activateHooks = this.Component.options.activate;
      var cached = this.getCached();
      var newComponent = this.build();
      if (activateHooks && !cached) {
        this.waitingFor = newComponent;
        callActivateHooks(activateHooks, newComponent, function () {
          if (self.waitingFor !== newComponent) {
            return;
          }
          self.waitingFor = null;
          self.transition(newComponent, cb);
        });
      } else {
        // update ref for kept-alive component
        if (cached) {
          newComponent._updateRef();
        }
        this.transition(newComponent, cb);
      }
    },

    /**
     * When the component changes or unbinds before an async
     * constructor is resolved, we need to invalidate its
     * pending callback.
     */

    invalidatePending: function invalidatePending() {
      if (this.pendingComponentCb) {
        this.pendingComponentCb.cancel();
        this.pendingComponentCb = null;
      }
    },

    /**
     * Instantiate/insert a new child vm.
     * If keep alive and has cached instance, insert that
     * instance; otherwise build a new one and cache it.
     *
     * @param {Object} [extraOptions]
     * @return {Vue} - the created instance
     */

    build: function build(extraOptions) {
      var cached = this.getCached();
      if (cached) {
        return cached;
      }
      if (this.Component) {
        // default options
        var options = {
          name: this.ComponentName,
          el: cloneNode(this.el),
          template: this.inlineTemplate,
          // make sure to add the child with correct parent
          // if this is a transcluded component, its parent
          // should be the transclusion host.
          parent: this._host || this.vm,
          // if no inline-template, then the compiled
          // linker can be cached for better performance.
          _linkerCachable: !this.inlineTemplate,
          _ref: this.descriptor.ref,
          _asComponent: true,
          _isRouterView: this._isRouterView,
          // if this is a transcluded component, context
          // will be the common parent vm of this instance
          // and its host.
          _context: this.vm,
          // if this is inside an inline v-for, the scope
          // will be the intermediate scope created for this
          // repeat fragment. this is used for linking props
          // and container directives.
          _scope: this._scope,
          // pass in the owner fragment of this component.
          // this is necessary so that the fragment can keep
          // track of its contained components in order to
          // call attach/detach hooks for them.
          _frag: this._frag
        };
        // extra options
        // in 1.0.0 this is used by vue-router only
        /* istanbul ignore if */
        if (extraOptions) {
          extend(options, extraOptions);
        }
        var child = new this.Component(options);
        if (this.keepAlive) {
          this.cache[this.Component.cid] = child;
        }
        /* istanbul ignore if */
        if ('development' !== 'production' && this.el.hasAttribute('transition') && child._isFragment) {
          warn('Transitions will not work on a fragment instance. ' + 'Template: ' + child.$options.template, child);
        }
        return child;
      }
    },

    /**
     * Try to get a cached instance of the current component.
     *
     * @return {Vue|undefined}
     */

    getCached: function getCached() {
      return this.keepAlive && this.cache[this.Component.cid];
    },

    /**
     * Teardown the current child, but defers cleanup so
     * that we can separate the destroy and removal steps.
     *
     * @param {Boolean} defer
     */

    unbuild: function unbuild(defer) {
      if (this.waitingFor) {
        if (!this.keepAlive) {
          this.waitingFor.$destroy();
        }
        this.waitingFor = null;
      }
      var child = this.childVM;
      if (!child || this.keepAlive) {
        if (child) {
          // remove ref
          child._inactive = true;
          child._updateRef(true);
        }
        return;
      }
      // the sole purpose of `deferCleanup` is so that we can
      // "deactivate" the vm right now and perform DOM removal
      // later.
      child.$destroy(false, defer);
    },

    /**
     * Remove current destroyed child and manually do
     * the cleanup after removal.
     *
     * @param {Function} cb
     */

    remove: function remove(child, cb) {
      var keepAlive = this.keepAlive;
      if (child) {
        // we may have a component switch when a previous
        // component is still being transitioned out.
        // we want to trigger only one lastest insertion cb
        // when the existing transition finishes. (#1119)
        this.pendingRemovals++;
        this.pendingRemovalCb = cb;
        var self = this;
        child.$remove(function () {
          self.pendingRemovals--;
          if (!keepAlive) child._cleanup();
          if (!self.pendingRemovals && self.pendingRemovalCb) {
            self.pendingRemovalCb();
            self.pendingRemovalCb = null;
          }
        });
      } else if (cb) {
        cb();
      }
    },

    /**
     * Actually swap the components, depending on the
     * transition mode. Defaults to simultaneous.
     *
     * @param {Vue} target
     * @param {Function} [cb]
     */

    transition: function transition(target, cb) {
      var self = this;
      var current = this.childVM;
      // for devtool inspection
      if (current) current._inactive = true;
      target._inactive = false;
      this.childVM = target;
      switch (self.params.transitionMode) {
        case 'in-out':
          target.$before(self.anchor, function () {
            self.remove(current, cb);
          });
          break;
        case 'out-in':
          self.remove(current, function () {
            target.$before(self.anchor, cb);
          });
          break;
        default:
          self.remove(current);
          target.$before(self.anchor, cb);
      }
    },

    /**
     * Unbind.
     */

    unbind: function unbind() {
      this.invalidatePending();
      // Do not defer cleanup when unbinding
      this.unbuild();
      // destroy all keep-alive cached instances
      if (this.cache) {
        for (var key in this.cache) {
          this.cache[key].$destroy();
        }
        this.cache = null;
      }
    }
  };

  /**
   * Call activate hooks in order (asynchronous)
   *
   * @param {Array} hooks
   * @param {Vue} vm
   * @param {Function} cb
   */

  function callActivateHooks(hooks, vm, cb) {
    var total = hooks.length;
    var called = 0;
    hooks[0].call(vm, next);
    function next() {
      if (++called >= total) {
        cb();
      } else {
        hooks[called].call(vm, next);
      }
    }
  }

  var propBindingModes = config._propBindingModes;
  var empty = {};

  // regexes
  var identRE$1 = /^[$_a-zA-Z]+[\w$]*$/;
  var settablePathRE = /^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/;

  /**
   * Compile props on a root element and return
   * a props link function.
   *
   * @param {Element|DocumentFragment} el
   * @param {Array} propOptions
   * @param {Vue} vm
   * @return {Function} propsLinkFn
   */

  function compileProps(el, propOptions, vm) {
    var props = [];
    var names = Object.keys(propOptions);
    var i = names.length;
    var options, name, attr, value, path, parsed, prop;
    while (i--) {
      name = names[i];
      options = propOptions[name] || empty;

      if ('development' !== 'production' && name === '$data') {
        warn('Do not use $data as prop.', vm);
        continue;
      }

      // props could contain dashes, which will be
      // interpreted as minus calculations by the parser
      // so we need to camelize the path here
      path = camelize(name);
      if (!identRE$1.test(path)) {
        'development' !== 'production' && warn('Invalid prop key: "' + name + '". Prop keys ' + 'must be valid identifiers.', vm);
        continue;
      }

      prop = {
        name: name,
        path: path,
        options: options,
        mode: propBindingModes.ONE_WAY,
        raw: null
      };

      attr = hyphenate(name);
      // first check dynamic version
      if ((value = getBindAttr(el, attr)) === null) {
        if ((value = getBindAttr(el, attr + '.sync')) !== null) {
          prop.mode = propBindingModes.TWO_WAY;
        } else if ((value = getBindAttr(el, attr + '.once')) !== null) {
          prop.mode = propBindingModes.ONE_TIME;
        }
      }
      if (value !== null) {
        // has dynamic binding!
        prop.raw = value;
        parsed = parseDirective(value);
        value = parsed.expression;
        prop.filters = parsed.filters;
        // check binding type
        if (isLiteral(value) && !parsed.filters) {
          // for expressions containing literal numbers and
          // booleans, there's no need to setup a prop binding,
          // so we can optimize them as a one-time set.
          prop.optimizedLiteral = true;
        } else {
          prop.dynamic = true;
          // check non-settable path for two-way bindings
          if ('development' !== 'production' && prop.mode === propBindingModes.TWO_WAY && !settablePathRE.test(value)) {
            prop.mode = propBindingModes.ONE_WAY;
            warn('Cannot bind two-way prop with non-settable ' + 'parent path: ' + value, vm);
          }
        }
        prop.parentPath = value;

        // warn required two-way
        if ('development' !== 'production' && options.twoWay && prop.mode !== propBindingModes.TWO_WAY) {
          warn('Prop "' + name + '" expects a two-way binding type.', vm);
        }
      } else if ((value = getAttr(el, attr)) !== null) {
        // has literal binding!
        prop.raw = value;
      } else if ('development' !== 'production') {
        // check possible camelCase prop usage
        var lowerCaseName = path.toLowerCase();
        value = /[A-Z\-]/.test(name) && (el.getAttribute(lowerCaseName) || el.getAttribute(':' + lowerCaseName) || el.getAttribute('v-bind:' + lowerCaseName) || el.getAttribute(':' + lowerCaseName + '.once') || el.getAttribute('v-bind:' + lowerCaseName + '.once') || el.getAttribute(':' + lowerCaseName + '.sync') || el.getAttribute('v-bind:' + lowerCaseName + '.sync'));
        if (value) {
          warn('Possible usage error for prop `' + lowerCaseName + '` - ' + 'did you mean `' + attr + '`? HTML is case-insensitive, remember to use ' + 'kebab-case for props in templates.', vm);
        } else if (options.required) {
          // warn missing required
          warn('Missing required prop: ' + name, vm);
        }
      }
      // push prop
      props.push(prop);
    }
    return makePropsLinkFn(props);
  }

  /**
   * Build a function that applies props to a vm.
   *
   * @param {Array} props
   * @return {Function} propsLinkFn
   */

  function makePropsLinkFn(props) {
    return function propsLinkFn(vm, scope) {
      // store resolved props info
      vm._props = {};
      var inlineProps = vm.$options.propsData;
      var i = props.length;
      var prop, path, options, value, raw;
      while (i--) {
        prop = props[i];
        raw = prop.raw;
        path = prop.path;
        options = prop.options;
        vm._props[path] = prop;
        if (inlineProps && hasOwn(inlineProps, path)) {
          initProp(vm, prop, inlineProps[path]);
        }if (raw === null) {
          // initialize absent prop
          initProp(vm, prop, undefined);
        } else if (prop.dynamic) {
          // dynamic prop
          if (prop.mode === propBindingModes.ONE_TIME) {
            // one time binding
            value = (scope || vm._context || vm).$get(prop.parentPath);
            initProp(vm, prop, value);
          } else {
            if (vm._context) {
              // dynamic binding
              vm._bindDir({
                name: 'prop',
                def: propDef,
                prop: prop
              }, null, null, scope); // el, host, scope
            } else {
                // root instance
                initProp(vm, prop, vm.$get(prop.parentPath));
              }
          }
        } else if (prop.optimizedLiteral) {
          // optimized literal, cast it and just set once
          var stripped = stripQuotes(raw);
          value = stripped === raw ? toBoolean(toNumber(raw)) : stripped;
          initProp(vm, prop, value);
        } else {
          // string literal, but we need to cater for
          // Boolean props with no value, or with same
          // literal value (e.g. disabled="disabled")
          // see https://github.com/vuejs/vue-loader/issues/182
          value = options.type === Boolean && (raw === '' || raw === hyphenate(prop.name)) ? true : raw;
          initProp(vm, prop, value);
        }
      }
    };
  }

  /**
   * Process a prop with a rawValue, applying necessary coersions,
   * default values & assertions and call the given callback with
   * processed value.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @param {*} rawValue
   * @param {Function} fn
   */

  function processPropValue(vm, prop, rawValue, fn) {
    var isSimple = prop.dynamic && isSimplePath(prop.parentPath);
    var value = rawValue;
    if (value === undefined) {
      value = getPropDefaultValue(vm, prop);
    }
    value = coerceProp(prop, value, vm);
    var coerced = value !== rawValue;
    if (!assertProp(prop, value, vm)) {
      value = undefined;
    }
    if (isSimple && !coerced) {
      withoutConversion(function () {
        fn(value);
      });
    } else {
      fn(value);
    }
  }

  /**
   * Set a prop's initial value on a vm and its data object.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @param {*} value
   */

  function initProp(vm, prop, value) {
    processPropValue(vm, prop, value, function (value) {
      defineReactive(vm, prop.path, value);
    });
  }

  /**
   * Update a prop's value on a vm.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @param {*} value
   */

  function updateProp(vm, prop, value) {
    processPropValue(vm, prop, value, function (value) {
      vm[prop.path] = value;
    });
  }

  /**
   * Get the default value of a prop.
   *
   * @param {Vue} vm
   * @param {Object} prop
   * @return {*}
   */

  function getPropDefaultValue(vm, prop) {
    // no default, return undefined
    var options = prop.options;
    if (!hasOwn(options, 'default')) {
      // absent boolean value defaults to false
      return options.type === Boolean ? false : undefined;
    }
    var def = options['default'];
    // warn against non-factory defaults for Object & Array
    if (isObject(def)) {
      'development' !== 'production' && warn('Invalid default value for prop "' + prop.name + '": ' + 'Props with type Object/Array must use a factory function ' + 'to return the default value.', vm);
    }
    // call factory function for non-Function types
    return typeof def === 'function' && options.type !== Function ? def.call(vm) : def;
  }

  /**
   * Assert whether a prop is valid.
   *
   * @param {Object} prop
   * @param {*} value
   * @param {Vue} vm
   */

  function assertProp(prop, value, vm) {
    if (!prop.options.required && ( // non-required
    prop.raw === null || // abscent
    value == null) // null or undefined
    ) {
        return true;
      }
    var options = prop.options;
    var type = options.type;
    var valid = !type;
    var expectedTypes = [];
    if (type) {
      if (!isArray(type)) {
        type = [type];
      }
      for (var i = 0; i < type.length && !valid; i++) {
        var assertedType = assertType(value, type[i]);
        expectedTypes.push(assertedType.expectedType);
        valid = assertedType.valid;
      }
    }
    if (!valid) {
      if ('development' !== 'production') {
        warn('Invalid prop: type check failed for prop "' + prop.name + '".' + ' Expected ' + expectedTypes.map(formatType).join(', ') + ', got ' + formatValue(value) + '.', vm);
      }
      return false;
    }
    var validator = options.validator;
    if (validator) {
      if (!validator(value)) {
        'development' !== 'production' && warn('Invalid prop: custom validator check failed for prop "' + prop.name + '".', vm);
        return false;
      }
    }
    return true;
  }

  /**
   * Force parsing value with coerce option.
   *
   * @param {*} value
   * @param {Object} options
   * @return {*}
   */

  function coerceProp(prop, value, vm) {
    var coerce = prop.options.coerce;
    if (!coerce) {
      return value;
    }
    if (typeof coerce === 'function') {
      return coerce(value);
    } else {
      'development' !== 'production' && warn('Invalid coerce for prop "' + prop.name + '": expected function, got ' + typeof coerce + '.', vm);
      return value;
    }
  }

  /**
   * Assert the type of a value
   *
   * @param {*} value
   * @param {Function} type
   * @return {Object}
   */

  function assertType(value, type) {
    var valid;
    var expectedType;
    if (type === String) {
      expectedType = 'string';
      valid = typeof value === expectedType;
    } else if (type === Number) {
      expectedType = 'number';
      valid = typeof value === expectedType;
    } else if (type === Boolean) {
      expectedType = 'boolean';
      valid = typeof value === expectedType;
    } else if (type === Function) {
      expectedType = 'function';
      valid = typeof value === expectedType;
    } else if (type === Object) {
      expectedType = 'object';
      valid = isPlainObject(value);
    } else if (type === Array) {
      expectedType = 'array';
      valid = isArray(value);
    } else {
      valid = value instanceof type;
    }
    return {
      valid: valid,
      expectedType: expectedType
    };
  }

  /**
   * Format type for output
   *
   * @param {String} type
   * @return {String}
   */

  function formatType(type) {
    return type ? type.charAt(0).toUpperCase() + type.slice(1) : 'custom type';
  }

  /**
   * Format value
   *
   * @param {*} value
   * @return {String}
   */

  function formatValue(val) {
    return Object.prototype.toString.call(val).slice(8, -1);
  }

  var bindingModes = config._propBindingModes;

  var propDef = {

    bind: function bind() {
      var child = this.vm;
      var parent = child._context;
      // passed in from compiler directly
      var prop = this.descriptor.prop;
      var childKey = prop.path;
      var parentKey = prop.parentPath;
      var twoWay = prop.mode === bindingModes.TWO_WAY;

      var parentWatcher = this.parentWatcher = new Watcher(parent, parentKey, function (val) {
        updateProp(child, prop, val);
      }, {
        twoWay: twoWay,
        filters: prop.filters,
        // important: props need to be observed on the
        // v-for scope if present
        scope: this._scope
      });

      // set the child initial value.
      initProp(child, prop, parentWatcher.value);

      // setup two-way binding
      if (twoWay) {
        // important: defer the child watcher creation until
        // the created hook (after data observation)
        var self = this;
        child.$once('pre-hook:created', function () {
          self.childWatcher = new Watcher(child, childKey, function (val) {
            parentWatcher.set(val);
          }, {
            // ensure sync upward before parent sync down.
            // this is necessary in cases e.g. the child
            // mutates a prop array, then replaces it. (#1683)
            sync: true
          });
        });
      }
    },

    unbind: function unbind() {
      this.parentWatcher.teardown();
      if (this.childWatcher) {
        this.childWatcher.teardown();
      }
    }
  };

  var queue$1 = [];
  var queued = false;

  /**
   * Push a job into the queue.
   *
   * @param {Function} job
   */

  function pushJob(job) {
    queue$1.push(job);
    if (!queued) {
      queued = true;
      nextTick(flush);
    }
  }

  /**
   * Flush the queue, and do one forced reflow before
   * triggering transitions.
   */

  function flush() {
    // Force layout
    var f = document.documentElement.offsetHeight;
    for (var i = 0; i < queue$1.length; i++) {
      queue$1[i]();
    }
    queue$1 = [];
    queued = false;
    // dummy return, so js linters don't complain about
    // unused variable f
    return f;
  }

  var TYPE_TRANSITION = 'transition';
  var TYPE_ANIMATION = 'animation';
  var transDurationProp = transitionProp + 'Duration';
  var animDurationProp = animationProp + 'Duration';

  /**
   * If a just-entered element is applied the
   * leave class while its enter transition hasn't started yet,
   * and the transitioned property has the same value for both
   * enter/leave, then the leave transition will be skipped and
   * the transitionend event never fires. This function ensures
   * its callback to be called after a transition has started
   * by waiting for double raf.
   *
   * It falls back to setTimeout on devices that support CSS
   * transitions but not raf (e.g. Android 4.2 browser) - since
   * these environments are usually slow, we are giving it a
   * relatively large timeout.
   */

  var raf = inBrowser && window.requestAnimationFrame;
  var waitForTransitionStart = raf
  /* istanbul ignore next */
  ? function (fn) {
    raf(function () {
      raf(fn);
    });
  } : function (fn) {
    setTimeout(fn, 50);
  };

  /**
   * A Transition object that encapsulates the state and logic
   * of the transition.
   *
   * @param {Element} el
   * @param {String} id
   * @param {Object} hooks
   * @param {Vue} vm
   */
  function Transition(el, id, hooks, vm) {
    this.id = id;
    this.el = el;
    this.enterClass = hooks && hooks.enterClass || id + '-enter';
    this.leaveClass = hooks && hooks.leaveClass || id + '-leave';
    this.hooks = hooks;
    this.vm = vm;
    // async state
    this.pendingCssEvent = this.pendingCssCb = this.cancel = this.pendingJsCb = this.op = this.cb = null;
    this.justEntered = false;
    this.entered = this.left = false;
    this.typeCache = {};
    // check css transition type
    this.type = hooks && hooks.type;
    /* istanbul ignore if */
    if ('development' !== 'production') {
      if (this.type && this.type !== TYPE_TRANSITION && this.type !== TYPE_ANIMATION) {
        warn('invalid CSS transition type for transition="' + this.id + '": ' + this.type, vm);
      }
    }
    // bind
    var self = this;['enterNextTick', 'enterDone', 'leaveNextTick', 'leaveDone'].forEach(function (m) {
      self[m] = bind(self[m], self);
    });
  }

  var p$1 = Transition.prototype;

  /**
   * Start an entering transition.
   *
   * 1. enter transition triggered
   * 2. call beforeEnter hook
   * 3. add enter class
   * 4. insert/show element
   * 5. call enter hook (with possible explicit js callback)
   * 6. reflow
   * 7. based on transition type:
   *    - transition:
   *        remove class now, wait for transitionend,
   *        then done if there's no explicit js callback.
   *    - animation:
   *        wait for animationend, remove class,
   *        then done if there's no explicit js callback.
   *    - no css transition:
   *        done now if there's no explicit js callback.
   * 8. wait for either done or js callback, then call
   *    afterEnter hook.
   *
   * @param {Function} op - insert/show the element
   * @param {Function} [cb]
   */

  p$1.enter = function (op, cb) {
    this.cancelPending();
    this.callHook('beforeEnter');
    this.cb = cb;
    addClass(this.el, this.enterClass);
    op();
    this.entered = false;
    this.callHookWithCb('enter');
    if (this.entered) {
      return; // user called done synchronously.
    }
    this.cancel = this.hooks && this.hooks.enterCancelled;
    pushJob(this.enterNextTick);
  };

  /**
   * The "nextTick" phase of an entering transition, which is
   * to be pushed into a queue and executed after a reflow so
   * that removing the class can trigger a CSS transition.
   */

  p$1.enterNextTick = function () {
    var _this = this;

    // prevent transition skipping
    this.justEntered = true;
    waitForTransitionStart(function () {
      _this.justEntered = false;
    });
    var enterDone = this.enterDone;
    var type = this.getCssTransitionType(this.enterClass);
    if (!this.pendingJsCb) {
      if (type === TYPE_TRANSITION) {
        // trigger transition by removing enter class now
        removeClass(this.el, this.enterClass);
        this.setupCssCb(transitionEndEvent, enterDone);
      } else if (type === TYPE_ANIMATION) {
        this.setupCssCb(animationEndEvent, enterDone);
      } else {
        enterDone();
      }
    } else if (type === TYPE_TRANSITION) {
      removeClass(this.el, this.enterClass);
    }
  };

  /**
   * The "cleanup" phase of an entering transition.
   */

  p$1.enterDone = function () {
    this.entered = true;
    this.cancel = this.pendingJsCb = null;
    removeClass(this.el, this.enterClass);
    this.callHook('afterEnter');
    if (this.cb) this.cb();
  };

  /**
   * Start a leaving transition.
   *
   * 1. leave transition triggered.
   * 2. call beforeLeave hook
   * 3. add leave class (trigger css transition)
   * 4. call leave hook (with possible explicit js callback)
   * 5. reflow if no explicit js callback is provided
   * 6. based on transition type:
   *    - transition or animation:
   *        wait for end event, remove class, then done if
   *        there's no explicit js callback.
   *    - no css transition:
   *        done if there's no explicit js callback.
   * 7. wait for either done or js callback, then call
   *    afterLeave hook.
   *
   * @param {Function} op - remove/hide the element
   * @param {Function} [cb]
   */

  p$1.leave = function (op, cb) {
    this.cancelPending();
    this.callHook('beforeLeave');
    this.op = op;
    this.cb = cb;
    addClass(this.el, this.leaveClass);
    this.left = false;
    this.callHookWithCb('leave');
    if (this.left) {
      return; // user called done synchronously.
    }
    this.cancel = this.hooks && this.hooks.leaveCancelled;
    // only need to handle leaveDone if
    // 1. the transition is already done (synchronously called
    //    by the user, which causes this.op set to null)
    // 2. there's no explicit js callback
    if (this.op && !this.pendingJsCb) {
      // if a CSS transition leaves immediately after enter,
      // the transitionend event never fires. therefore we
      // detect such cases and end the leave immediately.
      if (this.justEntered) {
        this.leaveDone();
      } else {
        pushJob(this.leaveNextTick);
      }
    }
  };

  /**
   * The "nextTick" phase of a leaving transition.
   */

  p$1.leaveNextTick = function () {
    var type = this.getCssTransitionType(this.leaveClass);
    if (type) {
      var event = type === TYPE_TRANSITION ? transitionEndEvent : animationEndEvent;
      this.setupCssCb(event, this.leaveDone);
    } else {
      this.leaveDone();
    }
  };

  /**
   * The "cleanup" phase of a leaving transition.
   */

  p$1.leaveDone = function () {
    this.left = true;
    this.cancel = this.pendingJsCb = null;
    this.op();
    removeClass(this.el, this.leaveClass);
    this.callHook('afterLeave');
    if (this.cb) this.cb();
    this.op = null;
  };

  /**
   * Cancel any pending callbacks from a previously running
   * but not finished transition.
   */

  p$1.cancelPending = function () {
    this.op = this.cb = null;
    var hasPending = false;
    if (this.pendingCssCb) {
      hasPending = true;
      off(this.el, this.pendingCssEvent, this.pendingCssCb);
      this.pendingCssEvent = this.pendingCssCb = null;
    }
    if (this.pendingJsCb) {
      hasPending = true;
      this.pendingJsCb.cancel();
      this.pendingJsCb = null;
    }
    if (hasPending) {
      removeClass(this.el, this.enterClass);
      removeClass(this.el, this.leaveClass);
    }
    if (this.cancel) {
      this.cancel.call(this.vm, this.el);
      this.cancel = null;
    }
  };

  /**
   * Call a user-provided synchronous hook function.
   *
   * @param {String} type
   */

  p$1.callHook = function (type) {
    if (this.hooks && this.hooks[type]) {
      this.hooks[type].call(this.vm, this.el);
    }
  };

  /**
   * Call a user-provided, potentially-async hook function.
   * We check for the length of arguments to see if the hook
   * expects a `done` callback. If true, the transition's end
   * will be determined by when the user calls that callback;
   * otherwise, the end is determined by the CSS transition or
   * animation.
   *
   * @param {String} type
   */

  p$1.callHookWithCb = function (type) {
    var hook = this.hooks && this.hooks[type];
    if (hook) {
      if (hook.length > 1) {
        this.pendingJsCb = cancellable(this[type + 'Done']);
      }
      hook.call(this.vm, this.el, this.pendingJsCb);
    }
  };

  /**
   * Get an element's transition type based on the
   * calculated styles.
   *
   * @param {String} className
   * @return {Number}
   */

  p$1.getCssTransitionType = function (className) {
    /* istanbul ignore if */
    if (!transitionEndEvent ||
    // skip CSS transitions if page is not visible -
    // this solves the issue of transitionend events not
    // firing until the page is visible again.
    // pageVisibility API is supported in IE10+, same as
    // CSS transitions.
    document.hidden ||
    // explicit js-only transition
    this.hooks && this.hooks.css === false ||
    // element is hidden
    isHidden(this.el)) {
      return;
    }
    var type = this.type || this.typeCache[className];
    if (type) return type;
    var inlineStyles = this.el.style;
    var computedStyles = window.getComputedStyle(this.el);
    var transDuration = inlineStyles[transDurationProp] || computedStyles[transDurationProp];
    if (transDuration && transDuration !== '0s') {
      type = TYPE_TRANSITION;
    } else {
      var animDuration = inlineStyles[animDurationProp] || computedStyles[animDurationProp];
      if (animDuration && animDuration !== '0s') {
        type = TYPE_ANIMATION;
      }
    }
    if (type) {
      this.typeCache[className] = type;
    }
    return type;
  };

  /**
   * Setup a CSS transitionend/animationend callback.
   *
   * @param {String} event
   * @param {Function} cb
   */

  p$1.setupCssCb = function (event, cb) {
    this.pendingCssEvent = event;
    var self = this;
    var el = this.el;
    var onEnd = this.pendingCssCb = function (e) {
      if (e.target === el) {
        off(el, event, onEnd);
        self.pendingCssEvent = self.pendingCssCb = null;
        if (!self.pendingJsCb && cb) {
          cb();
        }
      }
    };
    on(el, event, onEnd);
  };

  /**
   * Check if an element is hidden - in that case we can just
   * skip the transition alltogether.
   *
   * @param {Element} el
   * @return {Boolean}
   */

  function isHidden(el) {
    if (/svg$/.test(el.namespaceURI)) {
      // SVG elements do not have offset(Width|Height)
      // so we need to check the client rect
      var rect = el.getBoundingClientRect();
      return !(rect.width || rect.height);
    } else {
      return !(el.offsetWidth || el.offsetHeight || el.getClientRects().length);
    }
  }

  var transition$1 = {

    priority: TRANSITION,

    update: function update(id, oldId) {
      var el = this.el;
      // resolve on owner vm
      var hooks = resolveAsset(this.vm.$options, 'transitions', id);
      id = id || 'v';
      oldId = oldId || 'v';
      el.__v_trans = new Transition(el, id, hooks, this.vm);
      removeClass(el, oldId + '-transition');
      addClass(el, id + '-transition');
    }
  };

  var internalDirectives = {
    style: style,
    'class': vClass,
    component: component,
    prop: propDef,
    transition: transition$1
  };

  // special binding prefixes
  var bindRE = /^v-bind:|^:/;
  var onRE = /^v-on:|^@/;
  var dirAttrRE = /^v-([^:]+)(?:$|:(.*)$)/;
  var modifierRE = /\.[^\.]+/g;
  var transitionRE = /^(v-bind:|:)?transition$/;

  // default directive priority
  var DEFAULT_PRIORITY = 1000;
  var DEFAULT_TERMINAL_PRIORITY = 2000;

  /**
   * Compile a template and return a reusable composite link
   * function, which recursively contains more link functions
   * inside. This top level compile function would normally
   * be called on instance root nodes, but can also be used
   * for partial compilation if the partial argument is true.
   *
   * The returned composite link function, when called, will
   * return an unlink function that tearsdown all directives
   * created during the linking phase.
   *
   * @param {Element|DocumentFragment} el
   * @param {Object} options
   * @param {Boolean} partial
   * @return {Function}
   */

  function compile(el, options, partial) {
    // link function for the node itself.
    var nodeLinkFn = partial || !options._asComponent ? compileNode(el, options) : null;
    // link function for the childNodes
    var childLinkFn = !(nodeLinkFn && nodeLinkFn.terminal) && !isScript(el) && el.hasChildNodes() ? compileNodeList(el.childNodes, options) : null;

    /**
     * A composite linker function to be called on a already
     * compiled piece of DOM, which instantiates all directive
     * instances.
     *
     * @param {Vue} vm
     * @param {Element|DocumentFragment} el
     * @param {Vue} [host] - host vm of transcluded content
     * @param {Object} [scope] - v-for scope
     * @param {Fragment} [frag] - link context fragment
     * @return {Function|undefined}
     */

    return function compositeLinkFn(vm, el, host, scope, frag) {
      // cache childNodes before linking parent, fix #657
      var childNodes = toArray(el.childNodes);
      // link
      var dirs = linkAndCapture(function compositeLinkCapturer() {
        if (nodeLinkFn) nodeLinkFn(vm, el, host, scope, frag);
        if (childLinkFn) childLinkFn(vm, childNodes, host, scope, frag);
      }, vm);
      return makeUnlinkFn(vm, dirs);
    };
  }

  /**
   * Apply a linker to a vm/element pair and capture the
   * directives created during the process.
   *
   * @param {Function} linker
   * @param {Vue} vm
   */

  function linkAndCapture(linker, vm) {
    /* istanbul ignore if */
    if ('development' === 'production') {}
    var originalDirCount = vm._directives.length;
    linker();
    var dirs = vm._directives.slice(originalDirCount);
    dirs.sort(directiveComparator);
    for (var i = 0, l = dirs.length; i < l; i++) {
      dirs[i]._bind();
    }
    return dirs;
  }

  /**
   * Directive priority sort comparator
   *
   * @param {Object} a
   * @param {Object} b
   */

  function directiveComparator(a, b) {
    a = a.descriptor.def.priority || DEFAULT_PRIORITY;
    b = b.descriptor.def.priority || DEFAULT_PRIORITY;
    return a > b ? -1 : a === b ? 0 : 1;
  }

  /**
   * Linker functions return an unlink function that
   * tearsdown all directives instances generated during
   * the process.
   *
   * We create unlink functions with only the necessary
   * information to avoid retaining additional closures.
   *
   * @param {Vue} vm
   * @param {Array} dirs
   * @param {Vue} [context]
   * @param {Array} [contextDirs]
   * @return {Function}
   */

  function makeUnlinkFn(vm, dirs, context, contextDirs) {
    function unlink(destroying) {
      teardownDirs(vm, dirs, destroying);
      if (context && contextDirs) {
        teardownDirs(context, contextDirs);
      }
    }
    // expose linked directives
    unlink.dirs = dirs;
    return unlink;
  }

  /**
   * Teardown partial linked directives.
   *
   * @param {Vue} vm
   * @param {Array} dirs
   * @param {Boolean} destroying
   */

  function teardownDirs(vm, dirs, destroying) {
    var i = dirs.length;
    while (i--) {
      dirs[i]._teardown();
      if ('development' !== 'production' && !destroying) {
        vm._directives.$remove(dirs[i]);
      }
    }
  }

  /**
   * Compile link props on an instance.
   *
   * @param {Vue} vm
   * @param {Element} el
   * @param {Object} props
   * @param {Object} [scope]
   * @return {Function}
   */

  function compileAndLinkProps(vm, el, props, scope) {
    var propsLinkFn = compileProps(el, props, vm);
    var propDirs = linkAndCapture(function () {
      propsLinkFn(vm, scope);
    }, vm);
    return makeUnlinkFn(vm, propDirs);
  }

  /**
   * Compile the root element of an instance.
   *
   * 1. attrs on context container (context scope)
   * 2. attrs on the component template root node, if
   *    replace:true (child scope)
   *
   * If this is a fragment instance, we only need to compile 1.
   *
   * @param {Element} el
   * @param {Object} options
   * @param {Object} contextOptions
   * @return {Function}
   */

  function compileRoot(el, options, contextOptions) {
    var containerAttrs = options._containerAttrs;
    var replacerAttrs = options._replacerAttrs;
    var contextLinkFn, replacerLinkFn;

    // only need to compile other attributes for
    // non-fragment instances
    if (el.nodeType !== 11) {
      // for components, container and replacer need to be
      // compiled separately and linked in different scopes.
      if (options._asComponent) {
        // 2. container attributes
        if (containerAttrs && contextOptions) {
          contextLinkFn = compileDirectives(containerAttrs, contextOptions);
        }
        if (replacerAttrs) {
          // 3. replacer attributes
          replacerLinkFn = compileDirectives(replacerAttrs, options);
        }
      } else {
        // non-component, just compile as a normal element.
        replacerLinkFn = compileDirectives(el.attributes, options);
      }
    } else if ('development' !== 'production' && containerAttrs) {
      // warn container directives for fragment instances
      var names = containerAttrs.filter(function (attr) {
        // allow vue-loader/vueify scoped css attributes
        return attr.name.indexOf('_v-') < 0 &&
        // allow event listeners
        !onRE.test(attr.name) &&
        // allow slots
        attr.name !== 'slot';
      }).map(function (attr) {
        return '"' + attr.name + '"';
      });
      if (names.length) {
        var plural = names.length > 1;
        warn('Attribute' + (plural ? 's ' : ' ') + names.join(', ') + (plural ? ' are' : ' is') + ' ignored on component ' + '<' + options.el.tagName.toLowerCase() + '> because ' + 'the component is a fragment instance: ' + 'http://vuejs.org/guide/components.html#Fragment-Instance');
      }
    }

    options._containerAttrs = options._replacerAttrs = null;
    return function rootLinkFn(vm, el, scope) {
      // link context scope dirs
      var context = vm._context;
      var contextDirs;
      if (context && contextLinkFn) {
        contextDirs = linkAndCapture(function () {
          contextLinkFn(context, el, null, scope);
        }, context);
      }

      // link self
      var selfDirs = linkAndCapture(function () {
        if (replacerLinkFn) replacerLinkFn(vm, el);
      }, vm);

      // return the unlink function that tearsdown context
      // container directives.
      return makeUnlinkFn(vm, selfDirs, context, contextDirs);
    };
  }

  /**
   * Compile a node and return a nodeLinkFn based on the
   * node type.
   *
   * @param {Node} node
   * @param {Object} options
   * @return {Function|null}
   */

  function compileNode(node, options) {
    var type = node.nodeType;
    if (type === 1 && !isScript(node)) {
      return compileElement(node, options);
    } else if (type === 3 && node.data.trim()) {
      return compileTextNode(node, options);
    } else {
      return null;
    }
  }

  /**
   * Compile an element and return a nodeLinkFn.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Function|null}
   */

  function compileElement(el, options) {
    // preprocess textareas.
    // textarea treats its text content as the initial value.
    // just bind it as an attr directive for value.
    if (el.tagName === 'TEXTAREA') {
      var tokens = parseText(el.value);
      if (tokens) {
        el.setAttribute(':value', tokensToExp(tokens));
        el.value = '';
      }
    }
    var linkFn;
    var hasAttrs = el.hasAttributes();
    var attrs = hasAttrs && toArray(el.attributes);
    // check terminal directives (for & if)
    if (hasAttrs) {
      linkFn = checkTerminalDirectives(el, attrs, options);
    }
    // check element directives
    if (!linkFn) {
      linkFn = checkElementDirectives(el, options);
    }
    // check component
    if (!linkFn) {
      linkFn = checkComponent(el, options);
    }
    // normal directives
    if (!linkFn && hasAttrs) {
      linkFn = compileDirectives(attrs, options);
    }
    return linkFn;
  }

  /**
   * Compile a textNode and return a nodeLinkFn.
   *
   * @param {TextNode} node
   * @param {Object} options
   * @return {Function|null} textNodeLinkFn
   */

  function compileTextNode(node, options) {
    // skip marked text nodes
    if (node._skip) {
      return removeText;
    }

    var tokens = parseText(node.wholeText);
    if (!tokens) {
      return null;
    }

    // mark adjacent text nodes as skipped,
    // because we are using node.wholeText to compile
    // all adjacent text nodes together. This fixes
    // issues in IE where sometimes it splits up a single
    // text node into multiple ones.
    var next = node.nextSibling;
    while (next && next.nodeType === 3) {
      next._skip = true;
      next = next.nextSibling;
    }

    var frag = document.createDocumentFragment();
    var el, token;
    for (var i = 0, l = tokens.length; i < l; i++) {
      token = tokens[i];
      el = token.tag ? processTextToken(token, options) : document.createTextNode(token.value);
      frag.appendChild(el);
    }
    return makeTextNodeLinkFn(tokens, frag, options);
  }

  /**
   * Linker for an skipped text node.
   *
   * @param {Vue} vm
   * @param {Text} node
   */

  function removeText(vm, node) {
    remove(node);
  }

  /**
   * Process a single text token.
   *
   * @param {Object} token
   * @param {Object} options
   * @return {Node}
   */

  function processTextToken(token, options) {
    var el;
    if (token.oneTime) {
      el = document.createTextNode(token.value);
    } else {
      if (token.html) {
        el = document.createComment('v-html');
        setTokenType('html');
      } else {
        // IE will clean up empty textNodes during
        // frag.cloneNode(true), so we have to give it
        // something here...
        el = document.createTextNode(' ');
        setTokenType('text');
      }
    }
    function setTokenType(type) {
      if (token.descriptor) return;
      var parsed = parseDirective(token.value);
      token.descriptor = {
        name: type,
        def: directives[type],
        expression: parsed.expression,
        filters: parsed.filters
      };
    }
    return el;
  }

  /**
   * Build a function that processes a textNode.
   *
   * @param {Array<Object>} tokens
   * @param {DocumentFragment} frag
   */

  function makeTextNodeLinkFn(tokens, frag) {
    return function textNodeLinkFn(vm, el, host, scope) {
      var fragClone = frag.cloneNode(true);
      var childNodes = toArray(fragClone.childNodes);
      var token, value, node;
      for (var i = 0, l = tokens.length; i < l; i++) {
        token = tokens[i];
        value = token.value;
        if (token.tag) {
          node = childNodes[i];
          if (token.oneTime) {
            value = (scope || vm).$eval(value);
            if (token.html) {
              replace(node, parseTemplate(value, true));
            } else {
              node.data = _toString(value);
            }
          } else {
            vm._bindDir(token.descriptor, node, host, scope);
          }
        }
      }
      replace(el, fragClone);
    };
  }

  /**
   * Compile a node list and return a childLinkFn.
   *
   * @param {NodeList} nodeList
   * @param {Object} options
   * @return {Function|undefined}
   */

  function compileNodeList(nodeList, options) {
    var linkFns = [];
    var nodeLinkFn, childLinkFn, node;
    for (var i = 0, l = nodeList.length; i < l; i++) {
      node = nodeList[i];
      nodeLinkFn = compileNode(node, options);
      childLinkFn = !(nodeLinkFn && nodeLinkFn.terminal) && node.tagName !== 'SCRIPT' && node.hasChildNodes() ? compileNodeList(node.childNodes, options) : null;
      linkFns.push(nodeLinkFn, childLinkFn);
    }
    return linkFns.length ? makeChildLinkFn(linkFns) : null;
  }

  /**
   * Make a child link function for a node's childNodes.
   *
   * @param {Array<Function>} linkFns
   * @return {Function} childLinkFn
   */

  function makeChildLinkFn(linkFns) {
    return function childLinkFn(vm, nodes, host, scope, frag) {
      var node, nodeLinkFn, childrenLinkFn;
      for (var i = 0, n = 0, l = linkFns.length; i < l; n++) {
        node = nodes[n];
        nodeLinkFn = linkFns[i++];
        childrenLinkFn = linkFns[i++];
        // cache childNodes before linking parent, fix #657
        var childNodes = toArray(node.childNodes);
        if (nodeLinkFn) {
          nodeLinkFn(vm, node, host, scope, frag);
        }
        if (childrenLinkFn) {
          childrenLinkFn(vm, childNodes, host, scope, frag);
        }
      }
    };
  }

  /**
   * Check for element directives (custom elements that should
   * be resovled as terminal directives).
   *
   * @param {Element} el
   * @param {Object} options
   */

  function checkElementDirectives(el, options) {
    var tag = el.tagName.toLowerCase();
    if (commonTagRE.test(tag)) {
      return;
    }
    var def = resolveAsset(options, 'elementDirectives', tag);
    if (def) {
      return makeTerminalNodeLinkFn(el, tag, '', options, def);
    }
  }

  /**
   * Check if an element is a component. If yes, return
   * a component link function.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Function|undefined}
   */

  function checkComponent(el, options) {
    var component = checkComponentAttr(el, options);
    if (component) {
      var ref = findRef(el);
      var descriptor = {
        name: 'component',
        ref: ref,
        expression: component.id,
        def: internalDirectives.component,
        modifiers: {
          literal: !component.dynamic
        }
      };
      var componentLinkFn = function componentLinkFn(vm, el, host, scope, frag) {
        if (ref) {
          defineReactive((scope || vm).$refs, ref, null);
        }
        vm._bindDir(descriptor, el, host, scope, frag);
      };
      componentLinkFn.terminal = true;
      return componentLinkFn;
    }
  }

  /**
   * Check an element for terminal directives in fixed order.
   * If it finds one, return a terminal link function.
   *
   * @param {Element} el
   * @param {Array} attrs
   * @param {Object} options
   * @return {Function} terminalLinkFn
   */

  function checkTerminalDirectives(el, attrs, options) {
    // skip v-pre
    if (getAttr(el, 'v-pre') !== null) {
      return skip;
    }
    // skip v-else block, but only if following v-if
    if (el.hasAttribute('v-else')) {
      var prev = el.previousElementSibling;
      if (prev && prev.hasAttribute('v-if')) {
        return skip;
      }
    }

    var attr, name, value, modifiers, matched, dirName, rawName, arg, def, termDef;
    for (var i = 0, j = attrs.length; i < j; i++) {
      attr = attrs[i];
      name = attr.name.replace(modifierRE, '');
      if (matched = name.match(dirAttrRE)) {
        def = resolveAsset(options, 'directives', matched[1]);
        if (def && def.terminal) {
          if (!termDef || (def.priority || DEFAULT_TERMINAL_PRIORITY) > termDef.priority) {
            termDef = def;
            rawName = attr.name;
            modifiers = parseModifiers(attr.name);
            value = attr.value;
            dirName = matched[1];
            arg = matched[2];
          }
        }
      }
    }

    if (termDef) {
      return makeTerminalNodeLinkFn(el, dirName, value, options, termDef, rawName, arg, modifiers);
    }
  }

  function skip() {}
  skip.terminal = true;

  /**
   * Build a node link function for a terminal directive.
   * A terminal link function terminates the current
   * compilation recursion and handles compilation of the
   * subtree in the directive.
   *
   * @param {Element} el
   * @param {String} dirName
   * @param {String} value
   * @param {Object} options
   * @param {Object} def
   * @param {String} [rawName]
   * @param {String} [arg]
   * @param {Object} [modifiers]
   * @return {Function} terminalLinkFn
   */

  function makeTerminalNodeLinkFn(el, dirName, value, options, def, rawName, arg, modifiers) {
    var parsed = parseDirective(value);
    var descriptor = {
      name: dirName,
      arg: arg,
      expression: parsed.expression,
      filters: parsed.filters,
      raw: value,
      attr: rawName,
      modifiers: modifiers,
      def: def
    };
    // check ref for v-for and router-view
    if (dirName === 'for' || dirName === 'router-view') {
      descriptor.ref = findRef(el);
    }
    var fn = function terminalNodeLinkFn(vm, el, host, scope, frag) {
      if (descriptor.ref) {
        defineReactive((scope || vm).$refs, descriptor.ref, null);
      }
      vm._bindDir(descriptor, el, host, scope, frag);
    };
    fn.terminal = true;
    return fn;
  }

  /**
   * Compile the directives on an element and return a linker.
   *
   * @param {Array|NamedNodeMap} attrs
   * @param {Object} options
   * @return {Function}
   */

  function compileDirectives(attrs, options) {
    var i = attrs.length;
    var dirs = [];
    var attr, name, value, rawName, rawValue, dirName, arg, modifiers, dirDef, tokens, matched;
    while (i--) {
      attr = attrs[i];
      name = rawName = attr.name;
      value = rawValue = attr.value;
      tokens = parseText(value);
      // reset arg
      arg = null;
      // check modifiers
      modifiers = parseModifiers(name);
      name = name.replace(modifierRE, '');

      // attribute interpolations
      if (tokens) {
        value = tokensToExp(tokens);
        arg = name;
        pushDir('bind', directives.bind, tokens);
        // warn against mixing mustaches with v-bind
        if ('development' !== 'production') {
          if (name === 'class' && Array.prototype.some.call(attrs, function (attr) {
            return attr.name === ':class' || attr.name === 'v-bind:class';
          })) {
            warn('class="' + rawValue + '": Do not mix mustache interpolation ' + 'and v-bind for "class" on the same element. Use one or the other.', options);
          }
        }
      } else

        // special attribute: transition
        if (transitionRE.test(name)) {
          modifiers.literal = !bindRE.test(name);
          pushDir('transition', internalDirectives.transition);
        } else

          // event handlers
          if (onRE.test(name)) {
            arg = name.replace(onRE, '');
            pushDir('on', directives.on);
          } else

            // attribute bindings
            if (bindRE.test(name)) {
              dirName = name.replace(bindRE, '');
              if (dirName === 'style' || dirName === 'class') {
                pushDir(dirName, internalDirectives[dirName]);
              } else {
                arg = dirName;
                pushDir('bind', directives.bind);
              }
            } else

              // normal directives
              if (matched = name.match(dirAttrRE)) {
                dirName = matched[1];
                arg = matched[2];

                // skip v-else (when used with v-show)
                if (dirName === 'else') {
                  continue;
                }

                dirDef = resolveAsset(options, 'directives', dirName, true);
                if (dirDef) {
                  pushDir(dirName, dirDef);
                }
              }
    }

    /**
     * Push a directive.
     *
     * @param {String} dirName
     * @param {Object|Function} def
     * @param {Array} [interpTokens]
     */

    function pushDir(dirName, def, interpTokens) {
      var hasOneTimeToken = interpTokens && hasOneTime(interpTokens);
      var parsed = !hasOneTimeToken && parseDirective(value);
      dirs.push({
        name: dirName,
        attr: rawName,
        raw: rawValue,
        def: def,
        arg: arg,
        modifiers: modifiers,
        // conversion from interpolation strings with one-time token
        // to expression is differed until directive bind time so that we
        // have access to the actual vm context for one-time bindings.
        expression: parsed && parsed.expression,
        filters: parsed && parsed.filters,
        interp: interpTokens,
        hasOneTime: hasOneTimeToken
      });
    }

    if (dirs.length) {
      return makeNodeLinkFn(dirs);
    }
  }

  /**
   * Parse modifiers from directive attribute name.
   *
   * @param {String} name
   * @return {Object}
   */

  function parseModifiers(name) {
    var res = Object.create(null);
    var match = name.match(modifierRE);
    if (match) {
      var i = match.length;
      while (i--) {
        res[match[i].slice(1)] = true;
      }
    }
    return res;
  }

  /**
   * Build a link function for all directives on a single node.
   *
   * @param {Array} directives
   * @return {Function} directivesLinkFn
   */

  function makeNodeLinkFn(directives) {
    return function nodeLinkFn(vm, el, host, scope, frag) {
      // reverse apply because it's sorted low to high
      var i = directives.length;
      while (i--) {
        vm._bindDir(directives[i], el, host, scope, frag);
      }
    };
  }

  /**
   * Check if an interpolation string contains one-time tokens.
   *
   * @param {Array} tokens
   * @return {Boolean}
   */

  function hasOneTime(tokens) {
    var i = tokens.length;
    while (i--) {
      if (tokens[i].oneTime) return true;
    }
  }

  function isScript(el) {
    return el.tagName === 'SCRIPT' && (!el.hasAttribute('type') || el.getAttribute('type') === 'text/javascript');
  }

  var specialCharRE = /[^\w\-:\.]/;

  /**
   * Process an element or a DocumentFragment based on a
   * instance option object. This allows us to transclude
   * a template node/fragment before the instance is created,
   * so the processed fragment can then be cloned and reused
   * in v-for.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Element|DocumentFragment}
   */

  function transclude(el, options) {
    // extract container attributes to pass them down
    // to compiler, because they need to be compiled in
    // parent scope. we are mutating the options object here
    // assuming the same object will be used for compile
    // right after this.
    if (options) {
      options._containerAttrs = extractAttrs(el);
    }
    // for template tags, what we want is its content as
    // a documentFragment (for fragment instances)
    if (isTemplate(el)) {
      el = parseTemplate(el);
    }
    if (options) {
      if (options._asComponent && !options.template) {
        options.template = '<slot></slot>';
      }
      if (options.template) {
        options._content = extractContent(el);
        el = transcludeTemplate(el, options);
      }
    }
    if (isFragment(el)) {
      // anchors for fragment instance
      // passing in `persist: true` to avoid them being
      // discarded by IE during template cloning
      prepend(createAnchor('v-start', true), el);
      el.appendChild(createAnchor('v-end', true));
    }
    return el;
  }

  /**
   * Process the template option.
   * If the replace option is true this will swap the $el.
   *
   * @param {Element} el
   * @param {Object} options
   * @return {Element|DocumentFragment}
   */

  function transcludeTemplate(el, options) {
    var template = options.template;
    var frag = parseTemplate(template, true);
    if (frag) {
      var replacer = frag.firstChild;
      var tag = replacer.tagName && replacer.tagName.toLowerCase();
      if (options.replace) {
        /* istanbul ignore if */
        if (el === document.body) {
          'development' !== 'production' && warn('You are mounting an instance with a template to ' + '<body>. This will replace <body> entirely. You ' + 'should probably use `replace: false` here.');
        }
        // there are many cases where the instance must
        // become a fragment instance: basically anything that
        // can create more than 1 root nodes.
        if (
        // multi-children template
        frag.childNodes.length > 1 ||
        // non-element template
        replacer.nodeType !== 1 ||
        // single nested component
        tag === 'component' || resolveAsset(options, 'components', tag) || hasBindAttr(replacer, 'is') ||
        // element directive
        resolveAsset(options, 'elementDirectives', tag) ||
        // for block
        replacer.hasAttribute('v-for') ||
        // if block
        replacer.hasAttribute('v-if')) {
          return frag;
        } else {
          options._replacerAttrs = extractAttrs(replacer);
          mergeAttrs(el, replacer);
          return replacer;
        }
      } else {
        el.appendChild(frag);
        return el;
      }
    } else {
      'development' !== 'production' && warn('Invalid template option: ' + template);
    }
  }

  /**
   * Helper to extract a component container's attributes
   * into a plain object array.
   *
   * @param {Element} el
   * @return {Array}
   */

  function extractAttrs(el) {
    if (el.nodeType === 1 && el.hasAttributes()) {
      return toArray(el.attributes);
    }
  }

  /**
   * Merge the attributes of two elements, and make sure
   * the class names are merged properly.
   *
   * @param {Element} from
   * @param {Element} to
   */

  function mergeAttrs(from, to) {
    var attrs = from.attributes;
    var i = attrs.length;
    var name, value;
    while (i--) {
      name = attrs[i].name;
      value = attrs[i].value;
      if (!to.hasAttribute(name) && !specialCharRE.test(name)) {
        to.setAttribute(name, value);
      } else if (name === 'class' && !parseText(value) && (value = value.trim())) {
        value.split(/\s+/).forEach(function (cls) {
          addClass(to, cls);
        });
      }
    }
  }

  /**
   * Scan and determine slot content distribution.
   * We do this during transclusion instead at compile time so that
   * the distribution is decoupled from the compilation order of
   * the slots.
   *
   * @param {Element|DocumentFragment} template
   * @param {Element} content
   * @param {Vue} vm
   */

  function resolveSlots(vm, content) {
    if (!content) {
      return;
    }
    var contents = vm._slotContents = Object.create(null);
    var el, name;
    for (var i = 0, l = content.children.length; i < l; i++) {
      el = content.children[i];
      /* eslint-disable no-cond-assign */
      if (name = el.getAttribute('slot')) {
        (contents[name] || (contents[name] = [])).push(el);
      }
      /* eslint-enable no-cond-assign */
      if ('development' !== 'production' && getBindAttr(el, 'slot')) {
        warn('The "slot" attribute must be static.', vm.$parent);
      }
    }
    for (name in contents) {
      contents[name] = extractFragment(contents[name], content);
    }
    if (content.hasChildNodes()) {
      var nodes = content.childNodes;
      if (nodes.length === 1 && nodes[0].nodeType === 3 && !nodes[0].data.trim()) {
        return;
      }
      contents['default'] = extractFragment(content.childNodes, content);
    }
  }

  /**
   * Extract qualified content nodes from a node list.
   *
   * @param {NodeList} nodes
   * @return {DocumentFragment}
   */

  function extractFragment(nodes, parent) {
    var frag = document.createDocumentFragment();
    nodes = toArray(nodes);
    for (var i = 0, l = nodes.length; i < l; i++) {
      var node = nodes[i];
      if (isTemplate(node) && !node.hasAttribute('v-if') && !node.hasAttribute('v-for')) {
        parent.removeChild(node);
        node = parseTemplate(node, true);
      }
      frag.appendChild(node);
    }
    return frag;
  }



  var compiler = Object.freeze({
  	compile: compile,
  	compileAndLinkProps: compileAndLinkProps,
  	compileRoot: compileRoot,
  	transclude: transclude,
  	resolveSlots: resolveSlots
  });

  function stateMixin (Vue) {
    /**
     * Accessor for `$data` property, since setting $data
     * requires observing the new object and updating
     * proxied properties.
     */

    Object.defineProperty(Vue.prototype, '$data', {
      get: function get() {
        return this._data;
      },
      set: function set(newData) {
        if (newData !== this._data) {
          this._setData(newData);
        }
      }
    });

    /**
     * Setup the scope of an instance, which contains:
     * - observed data
     * - computed properties
     * - user methods
     * - meta properties
     */

    Vue.prototype._initState = function () {
      this._initProps();
      this._initMeta();
      this._initMethods();
      this._initData();
      this._initComputed();
    };

    /**
     * Initialize props.
     */

    Vue.prototype._initProps = function () {
      var options = this.$options;
      var el = options.el;
      var props = options.props;
      if (props && !el) {
        'development' !== 'production' && warn('Props will not be compiled if no `el` option is ' + 'provided at instantiation.', this);
      }
      // make sure to convert string selectors into element now
      el = options.el = query(el);
      this._propsUnlinkFn = el && el.nodeType === 1 && props
      // props must be linked in proper scope if inside v-for
      ? compileAndLinkProps(this, el, props, this._scope) : null;
    };

    /**
     * Initialize the data.
     */

    Vue.prototype._initData = function () {
      var dataFn = this.$options.data;
      var data = this._data = dataFn ? dataFn() : {};
      if (!isPlainObject(data)) {
        data = {};
        'development' !== 'production' && warn('data functions should return an object.', this);
      }
      var props = this._props;
      // proxy data on instance
      var keys = Object.keys(data);
      var i, key;
      i = keys.length;
      while (i--) {
        key = keys[i];
        // there are two scenarios where we can proxy a data key:
        // 1. it's not already defined as a prop
        // 2. it's provided via a instantiation option AND there are no
        //    template prop present
        if (!props || !hasOwn(props, key)) {
          this._proxy(key);
        } else if ('development' !== 'production') {
          warn('Data field "' + key + '" is already defined ' + 'as a prop. To provide default value for a prop, use the "default" ' + 'prop option; if you want to pass prop values to an instantiation ' + 'call, use the "propsData" option.', this);
        }
      }
      // observe data
      observe(data, this);
    };

    /**
     * Swap the instance's $data. Called in $data's setter.
     *
     * @param {Object} newData
     */

    Vue.prototype._setData = function (newData) {
      newData = newData || {};
      var oldData = this._data;
      this._data = newData;
      var keys, key, i;
      // unproxy keys not present in new data
      keys = Object.keys(oldData);
      i = keys.length;
      while (i--) {
        key = keys[i];
        if (!(key in newData)) {
          this._unproxy(key);
        }
      }
      // proxy keys not already proxied,
      // and trigger change for changed values
      keys = Object.keys(newData);
      i = keys.length;
      while (i--) {
        key = keys[i];
        if (!hasOwn(this, key)) {
          // new property
          this._proxy(key);
        }
      }
      oldData.__ob__.removeVm(this);
      observe(newData, this);
      this._digest();
    };

    /**
     * Proxy a property, so that
     * vm.prop === vm._data.prop
     *
     * @param {String} key
     */

    Vue.prototype._proxy = function (key) {
      if (!isReserved(key)) {
        // need to store ref to self here
        // because these getter/setters might
        // be called by child scopes via
        // prototype inheritance.
        var self = this;
        Object.defineProperty(self, key, {
          configurable: true,
          enumerable: true,
          get: function proxyGetter() {
            return self._data[key];
          },
          set: function proxySetter(val) {
            self._data[key] = val;
          }
        });
      }
    };

    /**
     * Unproxy a property.
     *
     * @param {String} key
     */

    Vue.prototype._unproxy = function (key) {
      if (!isReserved(key)) {
        delete this[key];
      }
    };

    /**
     * Force update on every watcher in scope.
     */

    Vue.prototype._digest = function () {
      for (var i = 0, l = this._watchers.length; i < l; i++) {
        this._watchers[i].update(true); // shallow updates
      }
    };

    /**
     * Setup computed properties. They are essentially
     * special getter/setters
     */

    function noop() {}
    Vue.prototype._initComputed = function () {
      var computed = this.$options.computed;
      if (computed) {
        for (var key in computed) {
          var userDef = computed[key];
          var def = {
            enumerable: true,
            configurable: true
          };
          if (typeof userDef === 'function') {
            def.get = makeComputedGetter(userDef, this);
            def.set = noop;
          } else {
            def.get = userDef.get ? userDef.cache !== false ? makeComputedGetter(userDef.get, this) : bind(userDef.get, this) : noop;
            def.set = userDef.set ? bind(userDef.set, this) : noop;
          }
          Object.defineProperty(this, key, def);
        }
      }
    };

    function makeComputedGetter(getter, owner) {
      var watcher = new Watcher(owner, getter, null, {
        lazy: true
      });
      return function computedGetter() {
        if (watcher.dirty) {
          watcher.evaluate();
        }
        if (Dep.target) {
          watcher.depend();
        }
        return watcher.value;
      };
    }

    /**
     * Setup instance methods. Methods must be bound to the
     * instance since they might be passed down as a prop to
     * child components.
     */

    Vue.prototype._initMethods = function () {
      var methods = this.$options.methods;
      if (methods) {
        for (var key in methods) {
          this[key] = bind(methods[key], this);
        }
      }
    };

    /**
     * Initialize meta information like $index, $key & $value.
     */

    Vue.prototype._initMeta = function () {
      var metas = this.$options._meta;
      if (metas) {
        for (var key in metas) {
          defineReactive(this, key, metas[key]);
        }
      }
    };
  }

  var eventRE = /^v-on:|^@/;

  function eventsMixin (Vue) {
    /**
     * Setup the instance's option events & watchers.
     * If the value is a string, we pull it from the
     * instance's methods by name.
     */

    Vue.prototype._initEvents = function () {
      var options = this.$options;
      if (options._asComponent) {
        registerComponentEvents(this, options.el);
      }
      registerCallbacks(this, '$on', options.events);
      registerCallbacks(this, '$watch', options.watch);
    };

    /**
     * Register v-on events on a child component
     *
     * @param {Vue} vm
     * @param {Element} el
     */

    function registerComponentEvents(vm, el) {
      var attrs = el.attributes;
      var name, value, handler;
      for (var i = 0, l = attrs.length; i < l; i++) {
        name = attrs[i].name;
        if (eventRE.test(name)) {
          name = name.replace(eventRE, '');
          // force the expression into a statement so that
          // it always dynamically resolves the method to call (#2670)
          // kinda ugly hack, but does the job.
          value = attrs[i].value;
          if (isSimplePath(value)) {
            value += '.apply(this, $arguments)';
          }
          handler = (vm._scope || vm._context).$eval(value, true);
          handler._fromParent = true;
          vm.$on(name.replace(eventRE), handler);
        }
      }
    }

    /**
     * Register callbacks for option events and watchers.
     *
     * @param {Vue} vm
     * @param {String} action
     * @param {Object} hash
     */

    function registerCallbacks(vm, action, hash) {
      if (!hash) return;
      var handlers, key, i, j;
      for (key in hash) {
        handlers = hash[key];
        if (isArray(handlers)) {
          for (i = 0, j = handlers.length; i < j; i++) {
            register(vm, action, key, handlers[i]);
          }
        } else {
          register(vm, action, key, handlers);
        }
      }
    }

    /**
     * Helper to register an event/watch callback.
     *
     * @param {Vue} vm
     * @param {String} action
     * @param {String} key
     * @param {Function|String|Object} handler
     * @param {Object} [options]
     */

    function register(vm, action, key, handler, options) {
      var type = typeof handler;
      if (type === 'function') {
        vm[action](key, handler, options);
      } else if (type === 'string') {
        var methods = vm.$options.methods;
        var method = methods && methods[handler];
        if (method) {
          vm[action](key, method, options);
        } else {
          'development' !== 'production' && warn('Unknown method: "' + handler + '" when ' + 'registering callback for ' + action + ': "' + key + '".', vm);
        }
      } else if (handler && type === 'object') {
        register(vm, action, key, handler.handler, handler);
      }
    }

    /**
     * Setup recursive attached/detached calls
     */

    Vue.prototype._initDOMHooks = function () {
      this.$on('hook:attached', onAttached);
      this.$on('hook:detached', onDetached);
    };

    /**
     * Callback to recursively call attached hook on children
     */

    function onAttached() {
      if (!this._isAttached) {
        this._isAttached = true;
        this.$children.forEach(callAttach);
      }
    }

    /**
     * Iterator to call attached hook
     *
     * @param {Vue} child
     */

    function callAttach(child) {
      if (!child._isAttached && inDoc(child.$el)) {
        child._callHook('attached');
      }
    }

    /**
     * Callback to recursively call detached hook on children
     */

    function onDetached() {
      if (this._isAttached) {
        this._isAttached = false;
        this.$children.forEach(callDetach);
      }
    }

    /**
     * Iterator to call detached hook
     *
     * @param {Vue} child
     */

    function callDetach(child) {
      if (child._isAttached && !inDoc(child.$el)) {
        child._callHook('detached');
      }
    }

    /**
     * Trigger all handlers for a hook
     *
     * @param {String} hook
     */

    Vue.prototype._callHook = function (hook) {
      this.$emit('pre-hook:' + hook);
      var handlers = this.$options[hook];
      if (handlers) {
        for (var i = 0, j = handlers.length; i < j; i++) {
          handlers[i].call(this);
        }
      }
      this.$emit('hook:' + hook);
    };
  }

  function noop$1() {}

  /**
   * A directive links a DOM element with a piece of data,
   * which is the result of evaluating an expression.
   * It registers a watcher with the expression and calls
   * the DOM update function when a change is triggered.
   *
   * @param {Object} descriptor
   *                 - {String} name
   *                 - {Object} def
   *                 - {String} expression
   *                 - {Array<Object>} [filters]
   *                 - {Object} [modifiers]
   *                 - {Boolean} literal
   *                 - {String} attr
   *                 - {String} arg
   *                 - {String} raw
   *                 - {String} [ref]
   *                 - {Array<Object>} [interp]
   *                 - {Boolean} [hasOneTime]
   * @param {Vue} vm
   * @param {Node} el
   * @param {Vue} [host] - transclusion host component
   * @param {Object} [scope] - v-for scope
   * @param {Fragment} [frag] - owner fragment
   * @constructor
   */
  function Directive(descriptor, vm, el, host, scope, frag) {
    this.vm = vm;
    this.el = el;
    // copy descriptor properties
    this.descriptor = descriptor;
    this.name = descriptor.name;
    this.expression = descriptor.expression;
    this.arg = descriptor.arg;
    this.modifiers = descriptor.modifiers;
    this.filters = descriptor.filters;
    this.literal = this.modifiers && this.modifiers.literal;
    // private
    this._locked = false;
    this._bound = false;
    this._listeners = null;
    // link context
    this._host = host;
    this._scope = scope;
    this._frag = frag;
    // store directives on node in dev mode
    if ('development' !== 'production' && this.el) {
      this.el._vue_directives = this.el._vue_directives || [];
      this.el._vue_directives.push(this);
    }
  }

  /**
   * Initialize the directive, mixin definition properties,
   * setup the watcher, call definition bind() and update()
   * if present.
   */

  Directive.prototype._bind = function () {
    var name = this.name;
    var descriptor = this.descriptor;

    // remove attribute
    if ((name !== 'cloak' || this.vm._isCompiled) && this.el && this.el.removeAttribute) {
      var attr = descriptor.attr || 'v-' + name;
      this.el.removeAttribute(attr);
    }

    // copy def properties
    var def = descriptor.def;
    if (typeof def === 'function') {
      this.update = def;
    } else {
      extend(this, def);
    }

    // setup directive params
    this._setupParams();

    // initial bind
    if (this.bind) {
      this.bind();
    }
    this._bound = true;

    if (this.literal) {
      this.update && this.update(descriptor.raw);
    } else if ((this.expression || this.modifiers) && (this.update || this.twoWay) && !this._checkStatement()) {
      // wrapped updater for context
      var dir = this;
      if (this.update) {
        this._update = function (val, oldVal) {
          if (!dir._locked) {
            dir.update(val, oldVal);
          }
        };
      } else {
        this._update = noop$1;
      }
      var preProcess = this._preProcess ? bind(this._preProcess, this) : null;
      var postProcess = this._postProcess ? bind(this._postProcess, this) : null;
      var watcher = this._watcher = new Watcher(this.vm, this.expression, this._update, // callback
      {
        filters: this.filters,
        twoWay: this.twoWay,
        deep: this.deep,
        preProcess: preProcess,
        postProcess: postProcess,
        scope: this._scope
      });
      // v-model with inital inline value need to sync back to
      // model instead of update to DOM on init. They would
      // set the afterBind hook to indicate that.
      if (this.afterBind) {
        this.afterBind();
      } else if (this.update) {
        this.update(watcher.value);
      }
    }
  };

  /**
   * Setup all param attributes, e.g. track-by,
   * transition-mode, etc...
   */

  Directive.prototype._setupParams = function () {
    if (!this.params) {
      return;
    }
    var params = this.params;
    // swap the params array with a fresh object.
    this.params = Object.create(null);
    var i = params.length;
    var key, val, mappedKey;
    while (i--) {
      key = hyphenate(params[i]);
      mappedKey = camelize(key);
      val = getBindAttr(this.el, key);
      if (val != null) {
        // dynamic
        this._setupParamWatcher(mappedKey, val);
      } else {
        // static
        val = getAttr(this.el, key);
        if (val != null) {
          this.params[mappedKey] = val === '' ? true : val;
        }
      }
    }
  };

  /**
   * Setup a watcher for a dynamic param.
   *
   * @param {String} key
   * @param {String} expression
   */

  Directive.prototype._setupParamWatcher = function (key, expression) {
    var self = this;
    var called = false;
    var unwatch = (this._scope || this.vm).$watch(expression, function (val, oldVal) {
      self.params[key] = val;
      // since we are in immediate mode,
      // only call the param change callbacks if this is not the first update.
      if (called) {
        var cb = self.paramWatchers && self.paramWatchers[key];
        if (cb) {
          cb.call(self, val, oldVal);
        }
      } else {
        called = true;
      }
    }, {
      immediate: true,
      user: false
    });(this._paramUnwatchFns || (this._paramUnwatchFns = [])).push(unwatch);
  };

  /**
   * Check if the directive is a function caller
   * and if the expression is a callable one. If both true,
   * we wrap up the expression and use it as the event
   * handler.
   *
   * e.g. on-click="a++"
   *
   * @return {Boolean}
   */

  Directive.prototype._checkStatement = function () {
    var expression = this.expression;
    if (expression && this.acceptStatement && !isSimplePath(expression)) {
      var fn = parseExpression(expression).get;
      var scope = this._scope || this.vm;
      var handler = function handler(e) {
        scope.$event = e;
        fn.call(scope, scope);
        scope.$event = null;
      };
      if (this.filters) {
        handler = scope._applyFilters(handler, null, this.filters);
      }
      this.update(handler);
      return true;
    }
  };

  /**
   * Set the corresponding value with the setter.
   * This should only be used in two-way directives
   * e.g. v-model.
   *
   * @param {*} value
   * @public
   */

  Directive.prototype.set = function (value) {
    /* istanbul ignore else */
    if (this.twoWay) {
      this._withLock(function () {
        this._watcher.set(value);
      });
    } else if ('development' !== 'production') {
      warn('Directive.set() can only be used inside twoWay' + 'directives.');
    }
  };

  /**
   * Execute a function while preventing that function from
   * triggering updates on this directive instance.
   *
   * @param {Function} fn
   */

  Directive.prototype._withLock = function (fn) {
    var self = this;
    self._locked = true;
    fn.call(self);
    nextTick(function () {
      self._locked = false;
    });
  };

  /**
   * Convenience method that attaches a DOM event listener
   * to the directive element and autometically tears it down
   * during unbind.
   *
   * @param {String} event
   * @param {Function} handler
   * @param {Boolean} [useCapture]
   */

  Directive.prototype.on = function (event, handler, useCapture) {
    on(this.el, event, handler, useCapture);(this._listeners || (this._listeners = [])).push([event, handler]);
  };

  /**
   * Teardown the watcher and call unbind.
   */

  Directive.prototype._teardown = function () {
    if (this._bound) {
      this._bound = false;
      if (this.unbind) {
        this.unbind();
      }
      if (this._watcher) {
        this._watcher.teardown();
      }
      var listeners = this._listeners;
      var i;
      if (listeners) {
        i = listeners.length;
        while (i--) {
          off(this.el, listeners[i][0], listeners[i][1]);
        }
      }
      var unwatchFns = this._paramUnwatchFns;
      if (unwatchFns) {
        i = unwatchFns.length;
        while (i--) {
          unwatchFns[i]();
        }
      }
      if ('development' !== 'production' && this.el) {
        this.el._vue_directives.$remove(this);
      }
      this.vm = this.el = this._watcher = this._listeners = null;
    }
  };

  function lifecycleMixin (Vue) {
    /**
     * Update v-ref for component.
     *
     * @param {Boolean} remove
     */

    Vue.prototype._updateRef = function (remove) {
      var ref = this.$options._ref;
      if (ref) {
        var refs = (this._scope || this._context).$refs;
        if (remove) {
          if (refs[ref] === this) {
            refs[ref] = null;
          }
        } else {
          refs[ref] = this;
        }
      }
    };

    /**
     * Transclude, compile and link element.
     *
     * If a pre-compiled linker is available, that means the
     * passed in element will be pre-transcluded and compiled
     * as well - all we need to do is to call the linker.
     *
     * Otherwise we need to call transclude/compile/link here.
     *
     * @param {Element} el
     */

    Vue.prototype._compile = function (el) {
      var options = this.$options;

      // transclude and init element
      // transclude can potentially replace original
      // so we need to keep reference; this step also injects
      // the template and caches the original attributes
      // on the container node and replacer node.
      var original = el;
      el = transclude(el, options);
      this._initElement(el);

      // handle v-pre on root node (#2026)
      if (el.nodeType === 1 && getAttr(el, 'v-pre') !== null) {
        return;
      }

      // root is always compiled per-instance, because
      // container attrs and props can be different every time.
      var contextOptions = this._context && this._context.$options;
      var rootLinker = compileRoot(el, options, contextOptions);

      // resolve slot distribution
      resolveSlots(this, options._content);

      // compile and link the rest
      var contentLinkFn;
      var ctor = this.constructor;
      // component compilation can be cached
      // as long as it's not using inline-template
      if (options._linkerCachable) {
        contentLinkFn = ctor.linker;
        if (!contentLinkFn) {
          contentLinkFn = ctor.linker = compile(el, options);
        }
      }

      // link phase
      // make sure to link root with prop scope!
      var rootUnlinkFn = rootLinker(this, el, this._scope);
      var contentUnlinkFn = contentLinkFn ? contentLinkFn(this, el) : compile(el, options)(this, el);

      // register composite unlink function
      // to be called during instance destruction
      this._unlinkFn = function () {
        rootUnlinkFn();
        // passing destroying: true to avoid searching and
        // splicing the directives
        contentUnlinkFn(true);
      };

      // finally replace original
      if (options.replace) {
        replace(original, el);
      }

      this._isCompiled = true;
      this._callHook('compiled');
    };

    /**
     * Initialize instance element. Called in the public
     * $mount() method.
     *
     * @param {Element} el
     */

    Vue.prototype._initElement = function (el) {
      if (isFragment(el)) {
        this._isFragment = true;
        this.$el = this._fragmentStart = el.firstChild;
        this._fragmentEnd = el.lastChild;
        // set persisted text anchors to empty
        if (this._fragmentStart.nodeType === 3) {
          this._fragmentStart.data = this._fragmentEnd.data = '';
        }
        this._fragment = el;
      } else {
        this.$el = el;
      }
      this.$el.__vue__ = this;
      this._callHook('beforeCompile');
    };

    /**
     * Create and bind a directive to an element.
     *
     * @param {Object} descriptor - parsed directive descriptor
     * @param {Node} node   - target node
     * @param {Vue} [host] - transclusion host component
     * @param {Object} [scope] - v-for scope
     * @param {Fragment} [frag] - owner fragment
     */

    Vue.prototype._bindDir = function (descriptor, node, host, scope, frag) {
      this._directives.push(new Directive(descriptor, this, node, host, scope, frag));
    };

    /**
     * Teardown an instance, unobserves the data, unbind all the
     * directives, turn off all the event listeners, etc.
     *
     * @param {Boolean} remove - whether to remove the DOM node.
     * @param {Boolean} deferCleanup - if true, defer cleanup to
     *                                 be called later
     */

    Vue.prototype._destroy = function (remove, deferCleanup) {
      if (this._isBeingDestroyed) {
        if (!deferCleanup) {
          this._cleanup();
        }
        return;
      }

      var destroyReady;
      var pendingRemoval;

      var self = this;
      // Cleanup should be called either synchronously or asynchronoysly as
      // callback of this.$remove(), or if remove and deferCleanup are false.
      // In any case it should be called after all other removing, unbinding and
      // turning of is done
      var cleanupIfPossible = function cleanupIfPossible() {
        if (destroyReady && !pendingRemoval && !deferCleanup) {
          self._cleanup();
        }
      };

      // remove DOM element
      if (remove && this.$el) {
        pendingRemoval = true;
        this.$remove(function () {
          pendingRemoval = false;
          cleanupIfPossible();
        });
      }

      this._callHook('beforeDestroy');
      this._isBeingDestroyed = true;
      var i;
      // remove self from parent. only necessary
      // if parent is not being destroyed as well.
      var parent = this.$parent;
      if (parent && !parent._isBeingDestroyed) {
        parent.$children.$remove(this);
        // unregister ref (remove: true)
        this._updateRef(true);
      }
      // destroy all children.
      i = this.$children.length;
      while (i--) {
        this.$children[i].$destroy();
      }
      // teardown props
      if (this._propsUnlinkFn) {
        this._propsUnlinkFn();
      }
      // teardown all directives. this also tearsdown all
      // directive-owned watchers.
      if (this._unlinkFn) {
        this._unlinkFn();
      }
      i = this._watchers.length;
      while (i--) {
        this._watchers[i].teardown();
      }
      // remove reference to self on $el
      if (this.$el) {
        this.$el.__vue__ = null;
      }

      destroyReady = true;
      cleanupIfPossible();
    };

    /**
     * Clean up to ensure garbage collection.
     * This is called after the leave transition if there
     * is any.
     */

    Vue.prototype._cleanup = function () {
      if (this._isDestroyed) {
        return;
      }
      // remove self from owner fragment
      // do it in cleanup so that we can call $destroy with
      // defer right when a fragment is about to be removed.
      if (this._frag) {
        this._frag.children.$remove(this);
      }
      // remove reference from data ob
      // frozen object may not have observer.
      if (this._data && this._data.__ob__) {
        this._data.__ob__.removeVm(this);
      }
      // Clean up references to private properties and other
      // instances. preserve reference to _data so that proxy
      // accessors still work. The only potential side effect
      // here is that mutating the instance after it's destroyed
      // may affect the state of other components that are still
      // observing the same object, but that seems to be a
      // reasonable responsibility for the user rather than
      // always throwing an error on them.
      this.$el = this.$parent = this.$root = this.$children = this._watchers = this._context = this._scope = this._directives = null;
      // call the last hook...
      this._isDestroyed = true;
      this._callHook('destroyed');
      // turn off all instance listeners.
      this.$off();
    };
  }

  function miscMixin (Vue) {
    /**
     * Apply a list of filter (descriptors) to a value.
     * Using plain for loops here because this will be called in
     * the getter of any watcher with filters so it is very
     * performance sensitive.
     *
     * @param {*} value
     * @param {*} [oldValue]
     * @param {Array} filters
     * @param {Boolean} write
     * @return {*}
     */

    Vue.prototype._applyFilters = function (value, oldValue, filters, write) {
      var filter, fn, args, arg, offset, i, l, j, k;
      for (i = 0, l = filters.length; i < l; i++) {
        filter = filters[write ? l - i - 1 : i];
        fn = resolveAsset(this.$options, 'filters', filter.name, true);
        if (!fn) continue;
        fn = write ? fn.write : fn.read || fn;
        if (typeof fn !== 'function') continue;
        args = write ? [value, oldValue] : [value];
        offset = write ? 2 : 1;
        if (filter.args) {
          for (j = 0, k = filter.args.length; j < k; j++) {
            arg = filter.args[j];
            args[j + offset] = arg.dynamic ? this.$get(arg.value) : arg.value;
          }
        }
        value = fn.apply(this, args);
      }
      return value;
    };

    /**
     * Resolve a component, depending on whether the component
     * is defined normally or using an async factory function.
     * Resolves synchronously if already resolved, otherwise
     * resolves asynchronously and caches the resolved
     * constructor on the factory.
     *
     * @param {String|Function} value
     * @param {Function} cb
     */

    Vue.prototype._resolveComponent = function (value, cb) {
      var factory;
      if (typeof value === 'function') {
        factory = value;
      } else {
        factory = resolveAsset(this.$options, 'components', value, true);
      }
      /* istanbul ignore if */
      if (!factory) {
        return;
      }
      // async component factory
      if (!factory.options) {
        if (factory.resolved) {
          // cached
          cb(factory.resolved);
        } else if (factory.requested) {
          // pool callbacks
          factory.pendingCallbacks.push(cb);
        } else {
          factory.requested = true;
          var cbs = factory.pendingCallbacks = [cb];
          factory.call(this, function resolve(res) {
            if (isPlainObject(res)) {
              res = Vue.extend(res);
            }
            // cache resolved
            factory.resolved = res;
            // invoke callbacks
            for (var i = 0, l = cbs.length; i < l; i++) {
              cbs[i](res);
            }
          }, function reject(reason) {
            'development' !== 'production' && warn('Failed to resolve async component' + (typeof value === 'string' ? ': ' + value : '') + '. ' + (reason ? '\nReason: ' + reason : ''));
          });
        }
      } else {
        // normal component
        cb(factory);
      }
    };
  }

  var filterRE$1 = /[^|]\|[^|]/;

  function dataAPI (Vue) {
    /**
     * Get the value from an expression on this vm.
     *
     * @param {String} exp
     * @param {Boolean} [asStatement]
     * @return {*}
     */

    Vue.prototype.$get = function (exp, asStatement) {
      var res = parseExpression(exp);
      if (res) {
        if (asStatement) {
          var self = this;
          return function statementHandler() {
            self.$arguments = toArray(arguments);
            var result = res.get.call(self, self);
            self.$arguments = null;
            return result;
          };
        } else {
          try {
            return res.get.call(this, this);
          } catch (e) {}
        }
      }
    };

    /**
     * Set the value from an expression on this vm.
     * The expression must be a valid left-hand
     * expression in an assignment.
     *
     * @param {String} exp
     * @param {*} val
     */

    Vue.prototype.$set = function (exp, val) {
      var res = parseExpression(exp, true);
      if (res && res.set) {
        res.set.call(this, this, val);
      }
    };

    /**
     * Delete a property on the VM
     *
     * @param {String} key
     */

    Vue.prototype.$delete = function (key) {
      del(this._data, key);
    };

    /**
     * Watch an expression, trigger callback when its
     * value changes.
     *
     * @param {String|Function} expOrFn
     * @param {Function} cb
     * @param {Object} [options]
     *                 - {Boolean} deep
     *                 - {Boolean} immediate
     * @return {Function} - unwatchFn
     */

    Vue.prototype.$watch = function (expOrFn, cb, options) {
      var vm = this;
      var parsed;
      if (typeof expOrFn === 'string') {
        parsed = parseDirective(expOrFn);
        expOrFn = parsed.expression;
      }
      var watcher = new Watcher(vm, expOrFn, cb, {
        deep: options && options.deep,
        sync: options && options.sync,
        filters: parsed && parsed.filters,
        user: !options || options.user !== false
      });
      if (options && options.immediate) {
        cb.call(vm, watcher.value);
      }
      return function unwatchFn() {
        watcher.teardown();
      };
    };

    /**
     * Evaluate a text directive, including filters.
     *
     * @param {String} text
     * @param {Boolean} [asStatement]
     * @return {String}
     */

    Vue.prototype.$eval = function (text, asStatement) {
      // check for filters.
      if (filterRE$1.test(text)) {
        var dir = parseDirective(text);
        // the filter regex check might give false positive
        // for pipes inside strings, so it's possible that
        // we don't get any filters here
        var val = this.$get(dir.expression, asStatement);
        return dir.filters ? this._applyFilters(val, null, dir.filters) : val;
      } else {
        // no filter
        return this.$get(text, asStatement);
      }
    };

    /**
     * Interpolate a piece of template text.
     *
     * @param {String} text
     * @return {String}
     */

    Vue.prototype.$interpolate = function (text) {
      var tokens = parseText(text);
      var vm = this;
      if (tokens) {
        if (tokens.length === 1) {
          return vm.$eval(tokens[0].value) + '';
        } else {
          return tokens.map(function (token) {
            return token.tag ? vm.$eval(token.value) : token.value;
          }).join('');
        }
      } else {
        return text;
      }
    };

    /**
     * Log instance data as a plain JS object
     * so that it is easier to inspect in console.
     * This method assumes console is available.
     *
     * @param {String} [path]
     */

    Vue.prototype.$log = function (path) {
      var data = path ? getPath(this._data, path) : this._data;
      if (data) {
        data = clean(data);
      }
      // include computed fields
      if (!path) {
        var key;
        for (key in this.$options.computed) {
          data[key] = clean(this[key]);
        }
        if (this._props) {
          for (key in this._props) {
            data[key] = clean(this[key]);
          }
        }
      }
      console.log(data);
    };

    /**
     * "clean" a getter/setter converted object into a plain
     * object copy.
     *
     * @param {Object} - obj
     * @return {Object}
     */

    function clean(obj) {
      return JSON.parse(JSON.stringify(obj));
    }
  }

  function domAPI (Vue) {
    /**
     * Convenience on-instance nextTick. The callback is
     * auto-bound to the instance, and this avoids component
     * modules having to rely on the global Vue.
     *
     * @param {Function} fn
     */

    Vue.prototype.$nextTick = function (fn) {
      nextTick(fn, this);
    };

    /**
     * Append instance to target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$appendTo = function (target, cb, withTransition) {
      return insert(this, target, cb, withTransition, append, appendWithTransition);
    };

    /**
     * Prepend instance to target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$prependTo = function (target, cb, withTransition) {
      target = query(target);
      if (target.hasChildNodes()) {
        this.$before(target.firstChild, cb, withTransition);
      } else {
        this.$appendTo(target, cb, withTransition);
      }
      return this;
    };

    /**
     * Insert instance before target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$before = function (target, cb, withTransition) {
      return insert(this, target, cb, withTransition, beforeWithCb, beforeWithTransition);
    };

    /**
     * Insert instance after target
     *
     * @param {Node} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$after = function (target, cb, withTransition) {
      target = query(target);
      if (target.nextSibling) {
        this.$before(target.nextSibling, cb, withTransition);
      } else {
        this.$appendTo(target.parentNode, cb, withTransition);
      }
      return this;
    };

    /**
     * Remove instance from DOM
     *
     * @param {Function} [cb]
     * @param {Boolean} [withTransition] - defaults to true
     */

    Vue.prototype.$remove = function (cb, withTransition) {
      if (!this.$el.parentNode) {
        return cb && cb();
      }
      var inDocument = this._isAttached && inDoc(this.$el);
      // if we are not in document, no need to check
      // for transitions
      if (!inDocument) withTransition = false;
      var self = this;
      var realCb = function realCb() {
        if (inDocument) self._callHook('detached');
        if (cb) cb();
      };
      if (this._isFragment) {
        removeNodeRange(this._fragmentStart, this._fragmentEnd, this, this._fragment, realCb);
      } else {
        var op = withTransition === false ? removeWithCb : removeWithTransition;
        op(this.$el, this, realCb);
      }
      return this;
    };

    /**
     * Shared DOM insertion function.
     *
     * @param {Vue} vm
     * @param {Element} target
     * @param {Function} [cb]
     * @param {Boolean} [withTransition]
     * @param {Function} op1 - op for non-transition insert
     * @param {Function} op2 - op for transition insert
     * @return vm
     */

    function insert(vm, target, cb, withTransition, op1, op2) {
      target = query(target);
      var targetIsDetached = !inDoc(target);
      var op = withTransition === false || targetIsDetached ? op1 : op2;
      var shouldCallHook = !targetIsDetached && !vm._isAttached && !inDoc(vm.$el);
      if (vm._isFragment) {
        mapNodeRange(vm._fragmentStart, vm._fragmentEnd, function (node) {
          op(node, target, vm);
        });
        cb && cb();
      } else {
        op(vm.$el, target, vm, cb);
      }
      if (shouldCallHook) {
        vm._callHook('attached');
      }
      return vm;
    }

    /**
     * Check for selectors
     *
     * @param {String|Element} el
     */

    function query(el) {
      return typeof el === 'string' ? document.querySelector(el) : el;
    }

    /**
     * Append operation that takes a callback.
     *
     * @param {Node} el
     * @param {Node} target
     * @param {Vue} vm - unused
     * @param {Function} [cb]
     */

    function append(el, target, vm, cb) {
      target.appendChild(el);
      if (cb) cb();
    }

    /**
     * InsertBefore operation that takes a callback.
     *
     * @param {Node} el
     * @param {Node} target
     * @param {Vue} vm - unused
     * @param {Function} [cb]
     */

    function beforeWithCb(el, target, vm, cb) {
      before(el, target);
      if (cb) cb();
    }

    /**
     * Remove operation that takes a callback.
     *
     * @param {Node} el
     * @param {Vue} vm - unused
     * @param {Function} [cb]
     */

    function removeWithCb(el, vm, cb) {
      remove(el);
      if (cb) cb();
    }
  }

  function eventsAPI (Vue) {
    /**
     * Listen on the given `event` with `fn`.
     *
     * @param {String} event
     * @param {Function} fn
     */

    Vue.prototype.$on = function (event, fn) {
      (this._events[event] || (this._events[event] = [])).push(fn);
      modifyListenerCount(this, event, 1);
      return this;
    };

    /**
     * Adds an `event` listener that will be invoked a single
     * time then automatically removed.
     *
     * @param {String} event
     * @param {Function} fn
     */

    Vue.prototype.$once = function (event, fn) {
      var self = this;
      function on() {
        self.$off(event, on);
        fn.apply(this, arguments);
      }
      on.fn = fn;
      this.$on(event, on);
      return this;
    };

    /**
     * Remove the given callback for `event` or all
     * registered callbacks.
     *
     * @param {String} event
     * @param {Function} fn
     */

    Vue.prototype.$off = function (event, fn) {
      var cbs;
      // all
      if (!arguments.length) {
        if (this.$parent) {
          for (event in this._events) {
            cbs = this._events[event];
            if (cbs) {
              modifyListenerCount(this, event, -cbs.length);
            }
          }
        }
        this._events = {};
        return this;
      }
      // specific event
      cbs = this._events[event];
      if (!cbs) {
        return this;
      }
      if (arguments.length === 1) {
        modifyListenerCount(this, event, -cbs.length);
        this._events[event] = null;
        return this;
      }
      // specific handler
      var cb;
      var i = cbs.length;
      while (i--) {
        cb = cbs[i];
        if (cb === fn || cb.fn === fn) {
          modifyListenerCount(this, event, -1);
          cbs.splice(i, 1);
          break;
        }
      }
      return this;
    };

    /**
     * Trigger an event on self.
     *
     * @param {String|Object} event
     * @return {Boolean} shouldPropagate
     */

    Vue.prototype.$emit = function (event) {
      var isSource = typeof event === 'string';
      event = isSource ? event : event.name;
      var cbs = this._events[event];
      var shouldPropagate = isSource || !cbs;
      if (cbs) {
        cbs = cbs.length > 1 ? toArray(cbs) : cbs;
        // this is a somewhat hacky solution to the question raised
        // in #2102: for an inline component listener like <comp @test="doThis">,
        // the propagation handling is somewhat broken. Therefore we
        // need to treat these inline callbacks differently.
        var hasParentCbs = isSource && cbs.some(function (cb) {
          return cb._fromParent;
        });
        if (hasParentCbs) {
          shouldPropagate = false;
        }
        var args = toArray(arguments, 1);
        for (var i = 0, l = cbs.length; i < l; i++) {
          var cb = cbs[i];
          var res = cb.apply(this, args);
          if (res === true && (!hasParentCbs || cb._fromParent)) {
            shouldPropagate = true;
          }
        }
      }
      return shouldPropagate;
    };

    /**
     * Recursively broadcast an event to all children instances.
     *
     * @param {String|Object} event
     * @param {...*} additional arguments
     */

    Vue.prototype.$broadcast = function (event) {
      var isSource = typeof event === 'string';
      event = isSource ? event : event.name;
      // if no child has registered for this event,
      // then there's no need to broadcast.
      if (!this._eventsCount[event]) return;
      var children = this.$children;
      var args = toArray(arguments);
      if (isSource) {
        // use object event to indicate non-source emit
        // on children
        args[0] = { name: event, source: this };
      }
      for (var i = 0, l = children.length; i < l; i++) {
        var child = children[i];
        var shouldPropagate = child.$emit.apply(child, args);
        if (shouldPropagate) {
          child.$broadcast.apply(child, args);
        }
      }
      return this;
    };

    /**
     * Recursively propagate an event up the parent chain.
     *
     * @param {String} event
     * @param {...*} additional arguments
     */

    Vue.prototype.$dispatch = function (event) {
      var shouldPropagate = this.$emit.apply(this, arguments);
      if (!shouldPropagate) return;
      var parent = this.$parent;
      var args = toArray(arguments);
      // use object event to indicate non-source emit
      // on parents
      args[0] = { name: event, source: this };
      while (parent) {
        shouldPropagate = parent.$emit.apply(parent, args);
        parent = shouldPropagate ? parent.$parent : null;
      }
      return this;
    };

    /**
     * Modify the listener counts on all parents.
     * This bookkeeping allows $broadcast to return early when
     * no child has listened to a certain event.
     *
     * @param {Vue} vm
     * @param {String} event
     * @param {Number} count
     */

    var hookRE = /^hook:/;
    function modifyListenerCount(vm, event, count) {
      var parent = vm.$parent;
      // hooks do not get broadcasted so no need
      // to do bookkeeping for them
      if (!parent || !count || hookRE.test(event)) return;
      while (parent) {
        parent._eventsCount[event] = (parent._eventsCount[event] || 0) + count;
        parent = parent.$parent;
      }
    }
  }

  function lifecycleAPI (Vue) {
    /**
     * Set instance target element and kick off the compilation
     * process. The passed in `el` can be a selector string, an
     * existing Element, or a DocumentFragment (for block
     * instances).
     *
     * @param {Element|DocumentFragment|string} el
     * @public
     */

    Vue.prototype.$mount = function (el) {
      if (this._isCompiled) {
        'development' !== 'production' && warn('$mount() should be called only once.', this);
        return;
      }
      el = query(el);
      if (!el) {
        el = document.createElement('div');
      }
      this._compile(el);
      this._initDOMHooks();
      if (inDoc(this.$el)) {
        this._callHook('attached');
        ready.call(this);
      } else {
        this.$once('hook:attached', ready);
      }
      return this;
    };

    /**
     * Mark an instance as ready.
     */

    function ready() {
      this._isAttached = true;
      this._isReady = true;
      this._callHook('ready');
    }

    /**
     * Teardown the instance, simply delegate to the internal
     * _destroy.
     *
     * @param {Boolean} remove
     * @param {Boolean} deferCleanup
     */

    Vue.prototype.$destroy = function (remove, deferCleanup) {
      this._destroy(remove, deferCleanup);
    };

    /**
     * Partially compile a piece of DOM and return a
     * decompile function.
     *
     * @param {Element|DocumentFragment} el
     * @param {Vue} [host]
     * @param {Object} [scope]
     * @param {Fragment} [frag]
     * @return {Function}
     */

    Vue.prototype.$compile = function (el, host, scope, frag) {
      return compile(el, this.$options, true)(this, el, host, scope, frag);
    };
  }

  /**
   * The exposed Vue constructor.
   *
   * API conventions:
   * - public API methods/properties are prefixed with `$`
   * - internal methods/properties are prefixed with `_`
   * - non-prefixed properties are assumed to be proxied user
   *   data.
   *
   * @constructor
   * @param {Object} [options]
   * @public
   */

  function Vue(options) {
    this._init(options);
  }

  // install internals
  initMixin(Vue);
  stateMixin(Vue);
  eventsMixin(Vue);
  lifecycleMixin(Vue);
  miscMixin(Vue);

  // install instance APIs
  dataAPI(Vue);
  domAPI(Vue);
  eventsAPI(Vue);
  lifecycleAPI(Vue);

  var slot = {

    priority: SLOT,
    params: ['name'],

    bind: function bind() {
      // this was resolved during component transclusion
      var name = this.params.name || 'default';
      var content = this.vm._slotContents && this.vm._slotContents[name];
      if (!content || !content.hasChildNodes()) {
        this.fallback();
      } else {
        this.compile(content.cloneNode(true), this.vm._context, this.vm);
      }
    },

    compile: function compile(content, context, host) {
      if (content && context) {
        if (this.el.hasChildNodes() && content.childNodes.length === 1 && content.childNodes[0].nodeType === 1 && content.childNodes[0].hasAttribute('v-if')) {
          // if the inserted slot has v-if
          // inject fallback content as the v-else
          var elseBlock = document.createElement('template');
          elseBlock.setAttribute('v-else', '');
          elseBlock.innerHTML = this.el.innerHTML;
          // the else block should be compiled in child scope
          elseBlock._context = this.vm;
          content.appendChild(elseBlock);
        }
        var scope = host ? host._scope : this._scope;
        this.unlink = context.$compile(content, host, scope, this._frag);
      }
      if (content) {
        replace(this.el, content);
      } else {
        remove(this.el);
      }
    },

    fallback: function fallback() {
      this.compile(extractContent(this.el, true), this.vm);
    },

    unbind: function unbind() {
      if (this.unlink) {
        this.unlink();
      }
    }
  };

  var partial = {

    priority: PARTIAL,

    params: ['name'],

    // watch changes to name for dynamic partials
    paramWatchers: {
      name: function name(value) {
        vIf.remove.call(this);
        if (value) {
          this.insert(value);
        }
      }
    },

    bind: function bind() {
      this.anchor = createAnchor('v-partial');
      replace(this.el, this.anchor);
      this.insert(this.params.name);
    },

    insert: function insert(id) {
      var partial = resolveAsset(this.vm.$options, 'partials', id, true);
      if (partial) {
        this.factory = new FragmentFactory(this.vm, partial);
        vIf.insert.call(this);
      }
    },

    unbind: function unbind() {
      if (this.frag) {
        this.frag.destroy();
      }
    }
  };

  var elementDirectives = {
    slot: slot,
    partial: partial
  };

  var convertArray = vFor._postProcess;

  /**
   * Limit filter for arrays
   *
   * @param {Number} n
   * @param {Number} offset (Decimal expected)
   */

  function limitBy(arr, n, offset) {
    offset = offset ? parseInt(offset, 10) : 0;
    n = toNumber(n);
    return typeof n === 'number' ? arr.slice(offset, offset + n) : arr;
  }

  /**
   * Filter filter for arrays
   *
   * @param {String} search
   * @param {String} [delimiter]
   * @param {String} ...dataKeys
   */

  function filterBy(arr, search, delimiter) {
    arr = convertArray(arr);
    if (search == null) {
      return arr;
    }
    if (typeof search === 'function') {
      return arr.filter(search);
    }
    // cast to lowercase string
    search = ('' + search).toLowerCase();
    // allow optional `in` delimiter
    // because why not
    var n = delimiter === 'in' ? 3 : 2;
    // extract and flatten keys
    var keys = Array.prototype.concat.apply([], toArray(arguments, n));
    var res = [];
    var item, key, val, j;
    for (var i = 0, l = arr.length; i < l; i++) {
      item = arr[i];
      val = item && item.$value || item;
      j = keys.length;
      if (j) {
        while (j--) {
          key = keys[j];
          if (key === '$key' && contains(item.$key, search) || contains(getPath(val, key), search)) {
            res.push(item);
            break;
          }
        }
      } else if (contains(item, search)) {
        res.push(item);
      }
    }
    return res;
  }

  /**
   * Filter filter for arrays
   *
   * @param {String|Array<String>|Function} ...sortKeys
   * @param {Number} [order]
   */

  function orderBy(arr) {
    var comparator = null;
    var sortKeys = undefined;
    arr = convertArray(arr);

    // determine order (last argument)
    var args = toArray(arguments, 1);
    var order = args[args.length - 1];
    if (typeof order === 'number') {
      order = order < 0 ? -1 : 1;
      args = args.length > 1 ? args.slice(0, -1) : args;
    } else {
      order = 1;
    }

    // determine sortKeys & comparator
    var firstArg = args[0];
    if (!firstArg) {
      return arr;
    } else if (typeof firstArg === 'function') {
      // custom comparator
      comparator = function (a, b) {
        return firstArg(a, b) * order;
      };
    } else {
      // string keys. flatten first
      sortKeys = Array.prototype.concat.apply([], args);
      comparator = function (a, b, i) {
        i = i || 0;
        return i >= sortKeys.length - 1 ? baseCompare(a, b, i) : baseCompare(a, b, i) || comparator(a, b, i + 1);
      };
    }

    function baseCompare(a, b, sortKeyIndex) {
      var sortKey = sortKeys[sortKeyIndex];
      if (sortKey) {
        if (sortKey !== '$key') {
          if (isObject(a) && '$value' in a) a = a.$value;
          if (isObject(b) && '$value' in b) b = b.$value;
        }
        a = isObject(a) ? getPath(a, sortKey) : a;
        b = isObject(b) ? getPath(b, sortKey) : b;
      }
      return a === b ? 0 : a > b ? order : -order;
    }

    // sort on a copy to avoid mutating original array
    return arr.slice().sort(comparator);
  }

  /**
   * String contain helper
   *
   * @param {*} val
   * @param {String} search
   */

  function contains(val, search) {
    var i;
    if (isPlainObject(val)) {
      var keys = Object.keys(val);
      i = keys.length;
      while (i--) {
        if (contains(val[keys[i]], search)) {
          return true;
        }
      }
    } else if (isArray(val)) {
      i = val.length;
      while (i--) {
        if (contains(val[i], search)) {
          return true;
        }
      }
    } else if (val != null) {
      return val.toString().toLowerCase().indexOf(search) > -1;
    }
  }

  var digitsRE = /(\d{3})(?=\d)/g;

  // asset collections must be a plain object.
  var filters = {

    orderBy: orderBy,
    filterBy: filterBy,
    limitBy: limitBy,

    /**
     * Stringify value.
     *
     * @param {Number} indent
     */

    json: {
      read: function read(value, indent) {
        return typeof value === 'string' ? value : JSON.stringify(value, null, arguments.length > 1 ? indent : 2);
      },
      write: function write(value) {
        try {
          return JSON.parse(value);
        } catch (e) {
          return value;
        }
      }
    },

    /**
     * 'abc' => 'Abc'
     */

    capitalize: function capitalize(value) {
      if (!value && value !== 0) return '';
      value = value.toString();
      return value.charAt(0).toUpperCase() + value.slice(1);
    },

    /**
     * 'abc' => 'ABC'
     */

    uppercase: function uppercase(value) {
      return value || value === 0 ? value.toString().toUpperCase() : '';
    },

    /**
     * 'AbC' => 'abc'
     */

    lowercase: function lowercase(value) {
      return value || value === 0 ? value.toString().toLowerCase() : '';
    },

    /**
     * 12345 => $12,345.00
     *
     * @param {String} sign
     * @param {Number} decimals Decimal places
     */

    currency: function currency(value, _currency, decimals) {
      value = parseFloat(value);
      if (!isFinite(value) || !value && value !== 0) return '';
      _currency = _currency != null ? _currency : '$';
      decimals = decimals != null ? decimals : 2;
      var stringified = Math.abs(value).toFixed(decimals);
      var _int = decimals ? stringified.slice(0, -1 - decimals) : stringified;
      var i = _int.length % 3;
      var head = i > 0 ? _int.slice(0, i) + (_int.length > 3 ? ',' : '') : '';
      var _float = decimals ? stringified.slice(-1 - decimals) : '';
      var sign = value < 0 ? '-' : '';
      return sign + _currency + head + _int.slice(i).replace(digitsRE, '$1,') + _float;
    },

    /**
     * 'item' => 'items'
     *
     * @params
     *  an array of strings corresponding to
     *  the single, double, triple ... forms of the word to
     *  be pluralized. When the number to be pluralized
     *  exceeds the length of the args, it will use the last
     *  entry in the array.
     *
     *  e.g. ['single', 'double', 'triple', 'multiple']
     */

    pluralize: function pluralize(value) {
      var args = toArray(arguments, 1);
      var length = args.length;
      if (length > 1) {
        var index = value % 10 - 1;
        return index in args ? args[index] : args[length - 1];
      } else {
        return args[0] + (value === 1 ? '' : 's');
      }
    },

    /**
     * Debounce a handler function.
     *
     * @param {Function} handler
     * @param {Number} delay = 300
     * @return {Function}
     */

    debounce: function debounce(handler, delay) {
      if (!handler) return;
      if (!delay) {
        delay = 300;
      }
      return _debounce(handler, delay);
    }
  };

  function installGlobalAPI (Vue) {
    /**
     * Vue and every constructor that extends Vue has an
     * associated options object, which can be accessed during
     * compilation steps as `this.constructor.options`.
     *
     * These can be seen as the default options of every
     * Vue instance.
     */

    Vue.options = {
      directives: directives,
      elementDirectives: elementDirectives,
      filters: filters,
      transitions: {},
      components: {},
      partials: {},
      replace: true
    };

    /**
     * Expose useful internals
     */

    Vue.util = util;
    Vue.config = config;
    Vue.set = set;
    Vue['delete'] = del;
    Vue.nextTick = nextTick;

    /**
     * The following are exposed for advanced usage / plugins
     */

    Vue.compiler = compiler;
    Vue.FragmentFactory = FragmentFactory;
    Vue.internalDirectives = internalDirectives;
    Vue.parsers = {
      path: path,
      text: text,
      template: template,
      directive: directive,
      expression: expression
    };

    /**
     * Each instance constructor, including Vue, has a unique
     * cid. This enables us to create wrapped "child
     * constructors" for prototypal inheritance and cache them.
     */

    Vue.cid = 0;
    var cid = 1;

    /**
     * Class inheritance
     *
     * @param {Object} extendOptions
     */

    Vue.extend = function (extendOptions) {
      extendOptions = extendOptions || {};
      var Super = this;
      var isFirstExtend = Super.cid === 0;
      if (isFirstExtend && extendOptions._Ctor) {
        return extendOptions._Ctor;
      }
      var name = extendOptions.name || Super.options.name;
      if ('development' !== 'production') {
        if (!/^[a-zA-Z][\w-]*$/.test(name)) {
          warn('Invalid component name: "' + name + '". Component names ' + 'can only contain alphanumeric characaters and the hyphen.');
          name = null;
        }
      }
      var Sub = createClass(name || 'VueComponent');
      Sub.prototype = Object.create(Super.prototype);
      Sub.prototype.constructor = Sub;
      Sub.cid = cid++;
      Sub.options = mergeOptions(Super.options, extendOptions);
      Sub['super'] = Super;
      // allow further extension
      Sub.extend = Super.extend;
      // create asset registers, so extended classes
      // can have their private assets too.
      config._assetTypes.forEach(function (type) {
        Sub[type] = Super[type];
      });
      // enable recursive self-lookup
      if (name) {
        Sub.options.components[name] = Sub;
      }
      // cache constructor
      if (isFirstExtend) {
        extendOptions._Ctor = Sub;
      }
      return Sub;
    };

    /**
     * A function that returns a sub-class constructor with the
     * given name. This gives us much nicer output when
     * logging instances in the console.
     *
     * @param {String} name
     * @return {Function}
     */

    function createClass(name) {
      /* eslint-disable no-new-func */
      return new Function('return function ' + classify(name) + ' (options) { this._init(options) }')();
      /* eslint-enable no-new-func */
    }

    /**
     * Plugin system
     *
     * @param {Object} plugin
     */

    Vue.use = function (plugin) {
      /* istanbul ignore if */
      if (plugin.installed) {
        return;
      }
      // additional parameters
      var args = toArray(arguments, 1);
      args.unshift(this);
      if (typeof plugin.install === 'function') {
        plugin.install.apply(plugin, args);
      } else {
        plugin.apply(null, args);
      }
      plugin.installed = true;
      return this;
    };

    /**
     * Apply a global mixin by merging it into the default
     * options.
     */

    Vue.mixin = function (mixin) {
      Vue.options = mergeOptions(Vue.options, mixin);
    };

    /**
     * Create asset registration methods with the following
     * signature:
     *
     * @param {String} id
     * @param {*} definition
     */

    config._assetTypes.forEach(function (type) {
      Vue[type] = function (id, definition) {
        if (!definition) {
          return this.options[type + 's'][id];
        } else {
          /* istanbul ignore if */
          if ('development' !== 'production') {
            if (type === 'component' && (commonTagRE.test(id) || reservedTagRE.test(id))) {
              warn('Do not use built-in or reserved HTML elements as component ' + 'id: ' + id);
            }
          }
          if (type === 'component' && isPlainObject(definition)) {
            if (!definition.name) {
              definition.name = id;
            }
            definition = Vue.extend(definition);
          }
          this.options[type + 's'][id] = definition;
          return definition;
        }
      };
    });

    // expose internal transition API
    extend(Vue.transition, transition);
  }

  installGlobalAPI(Vue);

  Vue.version = '1.0.26';

  // devtools global hook
  /* istanbul ignore next */
  setTimeout(function () {
    if (config.devtools) {
      if (devtools) {
        devtools.emit('init', Vue);
      } else if ('development' !== 'production' && inBrowser && /Chrome\/\d+/.test(window.navigator.userAgent)) {
        console.log('Download the Vue Devtools for a better development experience:\n' + 'https://github.com/vuejs/vue-devtools');
      }
    }
  }, 0);

  return Vue;

}));
/*!
 * vue-router v0.7.13
 * (c) 2016 Evan You
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  global.VueRouter = factory();
}(this, function () { 'use strict';

  var babelHelpers = {};

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };
  function Target(path, matcher, delegate) {
    this.path = path;
    this.matcher = matcher;
    this.delegate = delegate;
  }

  Target.prototype = {
    to: function to(target, callback) {
      var delegate = this.delegate;

      if (delegate && delegate.willAddRoute) {
        target = delegate.willAddRoute(this.matcher.target, target);
      }

      this.matcher.add(this.path, target);

      if (callback) {
        if (callback.length === 0) {
          throw new Error("You must have an argument in the function passed to `to`");
        }
        this.matcher.addChild(this.path, target, callback, this.delegate);
      }
      return this;
    }
  };

  function Matcher(target) {
    this.routes = {};
    this.children = {};
    this.target = target;
  }

  Matcher.prototype = {
    add: function add(path, handler) {
      this.routes[path] = handler;
    },

    addChild: function addChild(path, target, callback, delegate) {
      var matcher = new Matcher(target);
      this.children[path] = matcher;

      var match = generateMatch(path, matcher, delegate);

      if (delegate && delegate.contextEntered) {
        delegate.contextEntered(target, match);
      }

      callback(match);
    }
  };

  function generateMatch(startingPath, matcher, delegate) {
    return function (path, nestedCallback) {
      var fullPath = startingPath + path;

      if (nestedCallback) {
        nestedCallback(generateMatch(fullPath, matcher, delegate));
      } else {
        return new Target(startingPath + path, matcher, delegate);
      }
    };
  }

  function addRoute(routeArray, path, handler) {
    var len = 0;
    for (var i = 0, l = routeArray.length; i < l; i++) {
      len += routeArray[i].path.length;
    }

    path = path.substr(len);
    var route = { path: path, handler: handler };
    routeArray.push(route);
  }

  function eachRoute(baseRoute, matcher, callback, binding) {
    var routes = matcher.routes;

    for (var path in routes) {
      if (routes.hasOwnProperty(path)) {
        var routeArray = baseRoute.slice();
        addRoute(routeArray, path, routes[path]);

        if (matcher.children[path]) {
          eachRoute(routeArray, matcher.children[path], callback, binding);
        } else {
          callback.call(binding, routeArray);
        }
      }
    }
  }

  function map (callback, addRouteCallback) {
    var matcher = new Matcher();

    callback(generateMatch("", matcher, this.delegate));

    eachRoute([], matcher, function (route) {
      if (addRouteCallback) {
        addRouteCallback(this, route);
      } else {
        this.add(route);
      }
    }, this);
  }

  var specials = ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'];

  var escapeRegex = new RegExp('(\\' + specials.join('|\\') + ')', 'g');

  var noWarning = false;
  function warn(msg) {
    if (!noWarning && typeof console !== 'undefined') {
      console.error('[vue-router] ' + msg);
    }
  }

  function tryDecode(uri, asComponent) {
    try {
      return asComponent ? decodeURIComponent(uri) : decodeURI(uri);
    } catch (e) {
      warn('malformed URI' + (asComponent ? ' component: ' : ': ') + uri);
    }
  }

  function isArray(test) {
    return Object.prototype.toString.call(test) === "[object Array]";
  }

  // A Segment represents a segment in the original route description.
  // Each Segment type provides an `eachChar` and `regex` method.
  //
  // The `eachChar` method invokes the callback with one or more character
  // specifications. A character specification consumes one or more input
  // characters.
  //
  // The `regex` method returns a regex fragment for the segment. If the
  // segment is a dynamic of star segment, the regex fragment also includes
  // a capture.
  //
  // A character specification contains:
  //
  // * `validChars`: a String with a list of all valid characters, or
  // * `invalidChars`: a String with a list of all invalid characters
  // * `repeat`: true if the character specification can repeat

  function StaticSegment(string) {
    this.string = string;
  }
  StaticSegment.prototype = {
    eachChar: function eachChar(callback) {
      var string = this.string,
          ch;

      for (var i = 0, l = string.length; i < l; i++) {
        ch = string.charAt(i);
        callback({ validChars: ch });
      }
    },

    regex: function regex() {
      return this.string.replace(escapeRegex, '\\$1');
    },

    generate: function generate() {
      return this.string;
    }
  };

  function DynamicSegment(name) {
    this.name = name;
  }
  DynamicSegment.prototype = {
    eachChar: function eachChar(callback) {
      callback({ invalidChars: "/", repeat: true });
    },

    regex: function regex() {
      return "([^/]+)";
    },

    generate: function generate(params) {
      var val = params[this.name];
      return val == null ? ":" + this.name : val;
    }
  };

  function StarSegment(name) {
    this.name = name;
  }
  StarSegment.prototype = {
    eachChar: function eachChar(callback) {
      callback({ invalidChars: "", repeat: true });
    },

    regex: function regex() {
      return "(.+)";
    },

    generate: function generate(params) {
      var val = params[this.name];
      return val == null ? ":" + this.name : val;
    }
  };

  function EpsilonSegment() {}
  EpsilonSegment.prototype = {
    eachChar: function eachChar() {},
    regex: function regex() {
      return "";
    },
    generate: function generate() {
      return "";
    }
  };

  function parse(route, names, specificity) {
    // normalize route as not starting with a "/". Recognition will
    // also normalize.
    if (route.charAt(0) === "/") {
      route = route.substr(1);
    }

    var segments = route.split("/"),
        results = [];

    // A routes has specificity determined by the order that its different segments
    // appear in. This system mirrors how the magnitude of numbers written as strings
    // works.
    // Consider a number written as: "abc". An example would be "200". Any other number written
    // "xyz" will be smaller than "abc" so long as `a > z`. For instance, "199" is smaller
    // then "200", even though "y" and "z" (which are both 9) are larger than "0" (the value
    // of (`b` and `c`). This is because the leading symbol, "2", is larger than the other
    // leading symbol, "1".
    // The rule is that symbols to the left carry more weight than symbols to the right
    // when a number is written out as a string. In the above strings, the leading digit
    // represents how many 100's are in the number, and it carries more weight than the middle
    // number which represents how many 10's are in the number.
    // This system of number magnitude works well for route specificity, too. A route written as
    // `a/b/c` will be more specific than `x/y/z` as long as `a` is more specific than
    // `x`, irrespective of the other parts.
    // Because of this similarity, we assign each type of segment a number value written as a
    // string. We can find the specificity of compound routes by concatenating these strings
    // together, from left to right. After we have looped through all of the segments,
    // we convert the string to a number.
    specificity.val = '';

    for (var i = 0, l = segments.length; i < l; i++) {
      var segment = segments[i],
          match;

      if (match = segment.match(/^:([^\/]+)$/)) {
        results.push(new DynamicSegment(match[1]));
        names.push(match[1]);
        specificity.val += '3';
      } else if (match = segment.match(/^\*([^\/]+)$/)) {
        results.push(new StarSegment(match[1]));
        specificity.val += '2';
        names.push(match[1]);
      } else if (segment === "") {
        results.push(new EpsilonSegment());
        specificity.val += '1';
      } else {
        results.push(new StaticSegment(segment));
        specificity.val += '4';
      }
    }

    specificity.val = +specificity.val;

    return results;
  }

  // A State has a character specification and (`charSpec`) and a list of possible
  // subsequent states (`nextStates`).
  //
  // If a State is an accepting state, it will also have several additional
  // properties:
  //
  // * `regex`: A regular expression that is used to extract parameters from paths
  //   that reached this accepting state.
  // * `handlers`: Information on how to convert the list of captures into calls
  //   to registered handlers with the specified parameters
  // * `types`: How many static, dynamic or star segments in this route. Used to
  //   decide which route to use if multiple registered routes match a path.
  //
  // Currently, State is implemented naively by looping over `nextStates` and
  // comparing a character specification against a character. A more efficient
  // implementation would use a hash of keys pointing at one or more next states.

  function State(charSpec) {
    this.charSpec = charSpec;
    this.nextStates = [];
  }

  State.prototype = {
    get: function get(charSpec) {
      var nextStates = this.nextStates;

      for (var i = 0, l = nextStates.length; i < l; i++) {
        var child = nextStates[i];

        var isEqual = child.charSpec.validChars === charSpec.validChars;
        isEqual = isEqual && child.charSpec.invalidChars === charSpec.invalidChars;

        if (isEqual) {
          return child;
        }
      }
    },

    put: function put(charSpec) {
      var state;

      // If the character specification already exists in a child of the current
      // state, just return that state.
      if (state = this.get(charSpec)) {
        return state;
      }

      // Make a new state for the character spec
      state = new State(charSpec);

      // Insert the new state as a child of the current state
      this.nextStates.push(state);

      // If this character specification repeats, insert the new state as a child
      // of itself. Note that this will not trigger an infinite loop because each
      // transition during recognition consumes a character.
      if (charSpec.repeat) {
        state.nextStates.push(state);
      }

      // Return the new state
      return state;
    },

    // Find a list of child states matching the next character
    match: function match(ch) {
      // DEBUG "Processing `" + ch + "`:"
      var nextStates = this.nextStates,
          child,
          charSpec,
          chars;

      // DEBUG "  " + debugState(this)
      var returned = [];

      for (var i = 0, l = nextStates.length; i < l; i++) {
        child = nextStates[i];

        charSpec = child.charSpec;

        if (typeof (chars = charSpec.validChars) !== 'undefined') {
          if (chars.indexOf(ch) !== -1) {
            returned.push(child);
          }
        } else if (typeof (chars = charSpec.invalidChars) !== 'undefined') {
          if (chars.indexOf(ch) === -1) {
            returned.push(child);
          }
        }
      }

      return returned;
    }

    /** IF DEBUG
    , debug: function() {
      var charSpec = this.charSpec,
          debug = "[",
          chars = charSpec.validChars || charSpec.invalidChars;
       if (charSpec.invalidChars) { debug += "^"; }
      debug += chars;
      debug += "]";
       if (charSpec.repeat) { debug += "+"; }
       return debug;
    }
    END IF **/
  };

  /** IF DEBUG
  function debug(log) {
    console.log(log);
  }

  function debugState(state) {
    return state.nextStates.map(function(n) {
      if (n.nextStates.length === 0) { return "( " + n.debug() + " [accepting] )"; }
      return "( " + n.debug() + " <then> " + n.nextStates.map(function(s) { return s.debug() }).join(" or ") + " )";
    }).join(", ")
  }
  END IF **/

  // Sort the routes by specificity
  function sortSolutions(states) {
    return states.sort(function (a, b) {
      return b.specificity.val - a.specificity.val;
    });
  }

  function recognizeChar(states, ch) {
    var nextStates = [];

    for (var i = 0, l = states.length; i < l; i++) {
      var state = states[i];

      nextStates = nextStates.concat(state.match(ch));
    }

    return nextStates;
  }

  var oCreate = Object.create || function (proto) {
    function F() {}
    F.prototype = proto;
    return new F();
  };

  function RecognizeResults(queryParams) {
    this.queryParams = queryParams || {};
  }
  RecognizeResults.prototype = oCreate({
    splice: Array.prototype.splice,
    slice: Array.prototype.slice,
    push: Array.prototype.push,
    length: 0,
    queryParams: null
  });

  function findHandler(state, path, queryParams) {
    var handlers = state.handlers,
        regex = state.regex;
    var captures = path.match(regex),
        currentCapture = 1;
    var result = new RecognizeResults(queryParams);

    for (var i = 0, l = handlers.length; i < l; i++) {
      var handler = handlers[i],
          names = handler.names,
          params = {};

      for (var j = 0, m = names.length; j < m; j++) {
        params[names[j]] = captures[currentCapture++];
      }

      result.push({ handler: handler.handler, params: params, isDynamic: !!names.length });
    }

    return result;
  }

  function addSegment(currentState, segment) {
    segment.eachChar(function (ch) {
      var state;

      currentState = currentState.put(ch);
    });

    return currentState;
  }

  function decodeQueryParamPart(part) {
    // http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1
    part = part.replace(/\+/gm, '%20');
    return tryDecode(part, true);
  }

  // The main interface

  var RouteRecognizer = function RouteRecognizer() {
    this.rootState = new State();
    this.names = {};
  };

  RouteRecognizer.prototype = {
    add: function add(routes, options) {
      var currentState = this.rootState,
          regex = "^",
          specificity = {},
          handlers = [],
          allSegments = [],
          name;

      var isEmpty = true;

      for (var i = 0, l = routes.length; i < l; i++) {
        var route = routes[i],
            names = [];

        var segments = parse(route.path, names, specificity);

        allSegments = allSegments.concat(segments);

        for (var j = 0, m = segments.length; j < m; j++) {
          var segment = segments[j];

          if (segment instanceof EpsilonSegment) {
            continue;
          }

          isEmpty = false;

          // Add a "/" for the new segment
          currentState = currentState.put({ validChars: "/" });
          regex += "/";

          // Add a representation of the segment to the NFA and regex
          currentState = addSegment(currentState, segment);
          regex += segment.regex();
        }

        var handler = { handler: route.handler, names: names };
        handlers.push(handler);
      }

      if (isEmpty) {
        currentState = currentState.put({ validChars: "/" });
        regex += "/";
      }

      currentState.handlers = handlers;
      currentState.regex = new RegExp(regex + "$");
      currentState.specificity = specificity;

      if (name = options && options.as) {
        this.names[name] = {
          segments: allSegments,
          handlers: handlers
        };
      }
    },

    handlersFor: function handlersFor(name) {
      var route = this.names[name],
          result = [];
      if (!route) {
        throw new Error("There is no route named " + name);
      }

      for (var i = 0, l = route.handlers.length; i < l; i++) {
        result.push(route.handlers[i]);
      }

      return result;
    },

    hasRoute: function hasRoute(name) {
      return !!this.names[name];
    },

    generate: function generate(name, params) {
      var route = this.names[name],
          output = "";
      if (!route) {
        throw new Error("There is no route named " + name);
      }

      var segments = route.segments;

      for (var i = 0, l = segments.length; i < l; i++) {
        var segment = segments[i];

        if (segment instanceof EpsilonSegment) {
          continue;
        }

        output += "/";
        output += segment.generate(params);
      }

      if (output.charAt(0) !== '/') {
        output = '/' + output;
      }

      if (params && params.queryParams) {
        output += this.generateQueryString(params.queryParams);
      }

      return output;
    },

    generateQueryString: function generateQueryString(params) {
      var pairs = [];
      var keys = [];
      for (var key in params) {
        if (params.hasOwnProperty(key)) {
          keys.push(key);
        }
      }
      keys.sort();
      for (var i = 0, len = keys.length; i < len; i++) {
        key = keys[i];
        var value = params[key];
        if (value == null) {
          continue;
        }
        var pair = encodeURIComponent(key);
        if (isArray(value)) {
          for (var j = 0, l = value.length; j < l; j++) {
            var arrayPair = key + '[]' + '=' + encodeURIComponent(value[j]);
            pairs.push(arrayPair);
          }
        } else {
          pair += "=" + encodeURIComponent(value);
          pairs.push(pair);
        }
      }

      if (pairs.length === 0) {
        return '';
      }

      return "?" + pairs.join("&");
    },

    parseQueryString: function parseQueryString(queryString) {
      var pairs = queryString.split("&"),
          queryParams = {};
      for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i].split('='),
            key = decodeQueryParamPart(pair[0]),
            keyLength = key.length,
            isArray = false,
            value;
        if (pair.length === 1) {
          value = 'true';
        } else {
          //Handle arrays
          if (keyLength > 2 && key.slice(keyLength - 2) === '[]') {
            isArray = true;
            key = key.slice(0, keyLength - 2);
            if (!queryParams[key]) {
              queryParams[key] = [];
            }
          }
          value = pair[1] ? decodeQueryParamPart(pair[1]) : '';
        }
        if (isArray) {
          queryParams[key].push(value);
        } else {
          queryParams[key] = value;
        }
      }
      return queryParams;
    },

    recognize: function recognize(path, silent) {
      noWarning = silent;
      var states = [this.rootState],
          pathLen,
          i,
          l,
          queryStart,
          queryParams = {},
          isSlashDropped = false;

      queryStart = path.indexOf('?');
      if (queryStart !== -1) {
        var queryString = path.substr(queryStart + 1, path.length);
        path = path.substr(0, queryStart);
        if (queryString) {
          queryParams = this.parseQueryString(queryString);
        }
      }

      path = tryDecode(path);
      if (!path) return;

      // DEBUG GROUP path

      if (path.charAt(0) !== "/") {
        path = "/" + path;
      }

      pathLen = path.length;
      if (pathLen > 1 && path.charAt(pathLen - 1) === "/") {
        path = path.substr(0, pathLen - 1);
        isSlashDropped = true;
      }

      for (i = 0, l = path.length; i < l; i++) {
        states = recognizeChar(states, path.charAt(i));
        if (!states.length) {
          break;
        }
      }

      // END DEBUG GROUP

      var solutions = [];
      for (i = 0, l = states.length; i < l; i++) {
        if (states[i].handlers) {
          solutions.push(states[i]);
        }
      }

      states = sortSolutions(solutions);

      var state = solutions[0];

      if (state && state.handlers) {
        // if a trailing slash was dropped and a star segment is the last segment
        // specified, put the trailing slash back
        if (isSlashDropped && state.regex.source.slice(-5) === "(.+)$") {
          path = path + "/";
        }
        return findHandler(state, path, queryParams);
      }
    }
  };

  RouteRecognizer.prototype.map = map;

  var genQuery = RouteRecognizer.prototype.generateQueryString;

  // export default for holding the Vue reference
  var exports$1 = {};
  /**
   * Warn stuff.
   *
   * @param {String} msg
   */

  function warn$1(msg) {
    /* istanbul ignore next */
    if (typeof console !== 'undefined') {
      console.error('[vue-router] ' + msg);
    }
  }

  /**
   * Resolve a relative path.
   *
   * @param {String} base
   * @param {String} relative
   * @param {Boolean} append
   * @return {String}
   */

  function resolvePath(base, relative, append) {
    var query = base.match(/(\?.*)$/);
    if (query) {
      query = query[1];
      base = base.slice(0, -query.length);
    }
    // a query!
    if (relative.charAt(0) === '?') {
      return base + relative;
    }
    var stack = base.split('/');
    // remove trailing segment if:
    // - not appending
    // - appending to trailing slash (last segment is empty)
    if (!append || !stack[stack.length - 1]) {
      stack.pop();
    }
    // resolve relative path
    var segments = relative.replace(/^\//, '').split('/');
    for (var i = 0; i < segments.length; i++) {
      var segment = segments[i];
      if (segment === '.') {
        continue;
      } else if (segment === '..') {
        stack.pop();
      } else {
        stack.push(segment);
      }
    }
    // ensure leading slash
    if (stack[0] !== '') {
      stack.unshift('');
    }
    return stack.join('/');
  }

  /**
   * Forgiving check for a promise
   *
   * @param {Object} p
   * @return {Boolean}
   */

  function isPromise(p) {
    return p && typeof p.then === 'function';
  }

  /**
   * Retrive a route config field from a component instance
   * OR a component contructor.
   *
   * @param {Function|Vue} component
   * @param {String} name
   * @return {*}
   */

  function getRouteConfig(component, name) {
    var options = component && (component.$options || component.options);
    return options && options.route && options.route[name];
  }

  /**
   * Resolve an async component factory. Have to do a dirty
   * mock here because of Vue core's internal API depends on
   * an ID check.
   *
   * @param {Object} handler
   * @param {Function} cb
   */

  var resolver = undefined;

  function resolveAsyncComponent(handler, cb) {
    if (!resolver) {
      resolver = {
        resolve: exports$1.Vue.prototype._resolveComponent,
        $options: {
          components: {
            _: handler.component
          }
        }
      };
    } else {
      resolver.$options.components._ = handler.component;
    }
    resolver.resolve('_', function (Component) {
      handler.component = Component;
      cb(Component);
    });
  }

  /**
   * Map the dynamic segments in a path to params.
   *
   * @param {String} path
   * @param {Object} params
   * @param {Object} query
   */

  function mapParams(path, params, query) {
    if (params === undefined) params = {};

    path = path.replace(/:([^\/]+)/g, function (_, key) {
      var val = params[key];
      /* istanbul ignore if */
      if (!val) {
        warn$1('param "' + key + '" not found when generating ' + 'path for "' + path + '" with params ' + JSON.stringify(params));
      }
      return val || '';
    });
    if (query) {
      path += genQuery(query);
    }
    return path;
  }

  var hashRE = /#.*$/;

  var HTML5History = (function () {
    function HTML5History(_ref) {
      var root = _ref.root;
      var onChange = _ref.onChange;
      babelHelpers.classCallCheck(this, HTML5History);

      if (root && root !== '/') {
        // make sure there's the starting slash
        if (root.charAt(0) !== '/') {
          root = '/' + root;
        }
        // remove trailing slash
        this.root = root.replace(/\/$/, '');
        this.rootRE = new RegExp('^\\' + this.root);
      } else {
        this.root = null;
      }
      this.onChange = onChange;
      // check base tag
      var baseEl = document.querySelector('base');
      this.base = baseEl && baseEl.getAttribute('href');
    }

    HTML5History.prototype.start = function start() {
      var _this = this;

      this.listener = function (e) {
        var url = location.pathname + location.search;
        if (_this.root) {
          url = url.replace(_this.rootRE, '');
        }
        _this.onChange(url, e && e.state, location.hash);
      };
      window.addEventListener('popstate', this.listener);
      this.listener();
    };

    HTML5History.prototype.stop = function stop() {
      window.removeEventListener('popstate', this.listener);
    };

    HTML5History.prototype.go = function go(path, replace, append) {
      var url = this.formatPath(path, append);
      if (replace) {
        history.replaceState({}, '', url);
      } else {
        // record scroll position by replacing current state
        history.replaceState({
          pos: {
            x: window.pageXOffset,
            y: window.pageYOffset
          }
        }, '', location.href);
        // then push new state
        history.pushState({}, '', url);
      }
      var hashMatch = path.match(hashRE);
      var hash = hashMatch && hashMatch[0];
      path = url
      // strip hash so it doesn't mess up params
      .replace(hashRE, '')
      // remove root before matching
      .replace(this.rootRE, '');
      this.onChange(path, null, hash);
    };

    HTML5History.prototype.formatPath = function formatPath(path, append) {
      return path.charAt(0) === '/'
      // absolute path
      ? this.root ? this.root + '/' + path.replace(/^\//, '') : path : resolvePath(this.base || location.pathname, path, append);
    };

    return HTML5History;
  })();

  var HashHistory = (function () {
    function HashHistory(_ref) {
      var hashbang = _ref.hashbang;
      var onChange = _ref.onChange;
      babelHelpers.classCallCheck(this, HashHistory);

      this.hashbang = hashbang;
      this.onChange = onChange;
    }

    HashHistory.prototype.start = function start() {
      var self = this;
      this.listener = function () {
        var path = location.hash;
        var raw = path.replace(/^#!?/, '');
        // always
        if (raw.charAt(0) !== '/') {
          raw = '/' + raw;
        }
        var formattedPath = self.formatPath(raw);
        if (formattedPath !== path) {
          location.replace(formattedPath);
          return;
        }
        // determine query
        // note it's possible to have queries in both the actual URL
        // and the hash fragment itself.
        var query = location.search && path.indexOf('?') > -1 ? '&' + location.search.slice(1) : location.search;
        self.onChange(path.replace(/^#!?/, '') + query);
      };
      window.addEventListener('hashchange', this.listener);
      this.listener();
    };

    HashHistory.prototype.stop = function stop() {
      window.removeEventListener('hashchange', this.listener);
    };

    HashHistory.prototype.go = function go(path, replace, append) {
      path = this.formatPath(path, append);
      if (replace) {
        location.replace(path);
      } else {
        location.hash = path;
      }
    };

    HashHistory.prototype.formatPath = function formatPath(path, append) {
      var isAbsoloute = path.charAt(0) === '/';
      var prefix = '#' + (this.hashbang ? '!' : '');
      return isAbsoloute ? prefix + path : prefix + resolvePath(location.hash.replace(/^#!?/, ''), path, append);
    };

    return HashHistory;
  })();

  var AbstractHistory = (function () {
    function AbstractHistory(_ref) {
      var onChange = _ref.onChange;
      babelHelpers.classCallCheck(this, AbstractHistory);

      this.onChange = onChange;
      this.currentPath = '/';
    }

    AbstractHistory.prototype.start = function start() {
      this.onChange('/');
    };

    AbstractHistory.prototype.stop = function stop() {
      // noop
    };

    AbstractHistory.prototype.go = function go(path, replace, append) {
      path = this.currentPath = this.formatPath(path, append);
      this.onChange(path);
    };

    AbstractHistory.prototype.formatPath = function formatPath(path, append) {
      return path.charAt(0) === '/' ? path : resolvePath(this.currentPath, path, append);
    };

    return AbstractHistory;
  })();

  /**
   * Determine the reusability of an existing router view.
   *
   * @param {Directive} view
   * @param {Object} handler
   * @param {Transition} transition
   */

  function canReuse(view, handler, transition) {
    var component = view.childVM;
    if (!component || !handler) {
      return false;
    }
    // important: check view.Component here because it may
    // have been changed in activate hook
    if (view.Component !== handler.component) {
      return false;
    }
    var canReuseFn = getRouteConfig(component, 'canReuse');
    return typeof canReuseFn === 'boolean' ? canReuseFn : canReuseFn ? canReuseFn.call(component, {
      to: transition.to,
      from: transition.from
    }) : true; // defaults to true
  }

  /**
   * Check if a component can deactivate.
   *
   * @param {Directive} view
   * @param {Transition} transition
   * @param {Function} next
   */

  function canDeactivate(view, transition, next) {
    var fromComponent = view.childVM;
    var hook = getRouteConfig(fromComponent, 'canDeactivate');
    if (!hook) {
      next();
    } else {
      transition.callHook(hook, fromComponent, next, {
        expectBoolean: true
      });
    }
  }

  /**
   * Check if a component can activate.
   *
   * @param {Object} handler
   * @param {Transition} transition
   * @param {Function} next
   */

  function canActivate(handler, transition, next) {
    resolveAsyncComponent(handler, function (Component) {
      // have to check due to async-ness
      if (transition.aborted) {
        return;
      }
      // determine if this component can be activated
      var hook = getRouteConfig(Component, 'canActivate');
      if (!hook) {
        next();
      } else {
        transition.callHook(hook, null, next, {
          expectBoolean: true
        });
      }
    });
  }

  /**
   * Call deactivate hooks for existing router-views.
   *
   * @param {Directive} view
   * @param {Transition} transition
   * @param {Function} next
   */

  function deactivate(view, transition, next) {
    var component = view.childVM;
    var hook = getRouteConfig(component, 'deactivate');
    if (!hook) {
      next();
    } else {
      transition.callHooks(hook, component, next);
    }
  }

  /**
   * Activate / switch component for a router-view.
   *
   * @param {Directive} view
   * @param {Transition} transition
   * @param {Number} depth
   * @param {Function} [cb]
   */

  function activate(view, transition, depth, cb, reuse) {
    var handler = transition.activateQueue[depth];
    if (!handler) {
      saveChildView(view);
      if (view._bound) {
        view.setComponent(null);
      }
      cb && cb();
      return;
    }

    var Component = view.Component = handler.component;
    var activateHook = getRouteConfig(Component, 'activate');
    var dataHook = getRouteConfig(Component, 'data');
    var waitForData = getRouteConfig(Component, 'waitForData');

    view.depth = depth;
    view.activated = false;

    var component = undefined;
    var loading = !!(dataHook && !waitForData);

    // "reuse" is a flag passed down when the parent view is
    // either reused via keep-alive or as a child of a kept-alive view.
    // of course we can only reuse if the current kept-alive instance
    // is of the correct type.
    reuse = reuse && view.childVM && view.childVM.constructor === Component;

    if (reuse) {
      // just reuse
      component = view.childVM;
      component.$loadingRouteData = loading;
    } else {
      saveChildView(view);

      // unbuild current component. this step also destroys
      // and removes all nested child views.
      view.unbuild(true);

      // build the new component. this will also create the
      // direct child view of the current one. it will register
      // itself as view.childView.
      component = view.build({
        _meta: {
          $loadingRouteData: loading
        },
        created: function created() {
          this._routerView = view;
        }
      });

      // handle keep-alive.
      // when a kept-alive child vm is restored, we need to
      // add its cached child views into the router's view list,
      // and also properly update current view's child view.
      if (view.keepAlive) {
        component.$loadingRouteData = loading;
        var cachedChildView = component._keepAliveRouterView;
        if (cachedChildView) {
          view.childView = cachedChildView;
          component._keepAliveRouterView = null;
        }
      }
    }

    // cleanup the component in case the transition is aborted
    // before the component is ever inserted.
    var cleanup = function cleanup() {
      component.$destroy();
    };

    // actually insert the component and trigger transition
    var insert = function insert() {
      if (reuse) {
        cb && cb();
        return;
      }
      var router = transition.router;
      if (router._rendered || router._transitionOnLoad) {
        view.transition(component);
      } else {
        // no transition on first render, manual transition
        /* istanbul ignore if */
        if (view.setCurrent) {
          // 0.12 compat
          view.setCurrent(component);
        } else {
          // 1.0
          view.childVM = component;
        }
        component.$before(view.anchor, null, false);
      }
      cb && cb();
    };

    var afterData = function afterData() {
      // activate the child view
      if (view.childView) {
        activate(view.childView, transition, depth + 1, null, reuse || view.keepAlive);
      }
      insert();
    };

    // called after activation hook is resolved
    var afterActivate = function afterActivate() {
      view.activated = true;
      if (dataHook && waitForData) {
        // wait until data loaded to insert
        loadData(component, transition, dataHook, afterData, cleanup);
      } else {
        // load data and insert at the same time
        if (dataHook) {
          loadData(component, transition, dataHook);
        }
        afterData();
      }
    };

    if (activateHook) {
      transition.callHooks(activateHook, component, afterActivate, {
        cleanup: cleanup,
        postActivate: true
      });
    } else {
      afterActivate();
    }
  }

  /**
   * Reuse a view, just reload data if necessary.
   *
   * @param {Directive} view
   * @param {Transition} transition
   */

  function reuse(view, transition) {
    var component = view.childVM;
    var dataHook = getRouteConfig(component, 'data');
    if (dataHook) {
      loadData(component, transition, dataHook);
    }
  }

  /**
   * Asynchronously load and apply data to component.
   *
   * @param {Vue} component
   * @param {Transition} transition
   * @param {Function} hook
   * @param {Function} cb
   * @param {Function} cleanup
   */

  function loadData(component, transition, hook, cb, cleanup) {
    component.$loadingRouteData = true;
    transition.callHooks(hook, component, function () {
      component.$loadingRouteData = false;
      component.$emit('route-data-loaded', component);
      cb && cb();
    }, {
      cleanup: cleanup,
      postActivate: true,
      processData: function processData(data) {
        // handle promise sugar syntax
        var promises = [];
        if (isPlainObject(data)) {
          Object.keys(data).forEach(function (key) {
            var val = data[key];
            if (isPromise(val)) {
              promises.push(val.then(function (resolvedVal) {
                component.$set(key, resolvedVal);
              }));
            } else {
              component.$set(key, val);
            }
          });
        }
        if (promises.length) {
          return promises[0].constructor.all(promises);
        }
      }
    });
  }

  /**
   * Save the child view for a kept-alive view so that
   * we can restore it when it is switched back to.
   *
   * @param {Directive} view
   */

  function saveChildView(view) {
    if (view.keepAlive && view.childVM && view.childView) {
      view.childVM._keepAliveRouterView = view.childView;
    }
    view.childView = null;
  }

  /**
   * Check plain object.
   *
   * @param {*} val
   */

  function isPlainObject(val) {
    return Object.prototype.toString.call(val) === '[object Object]';
  }

  /**
   * A RouteTransition object manages the pipeline of a
   * router-view switching process. This is also the object
   * passed into user route hooks.
   *
   * @param {Router} router
   * @param {Route} to
   * @param {Route} from
   */

  var RouteTransition = (function () {
    function RouteTransition(router, to, from) {
      babelHelpers.classCallCheck(this, RouteTransition);

      this.router = router;
      this.to = to;
      this.from = from;
      this.next = null;
      this.aborted = false;
      this.done = false;
    }

    /**
     * Abort current transition and return to previous location.
     */

    RouteTransition.prototype.abort = function abort() {
      if (!this.aborted) {
        this.aborted = true;
        // if the root path throws an error during validation
        // on initial load, it gets caught in an infinite loop.
        var abortingOnLoad = !this.from.path && this.to.path === '/';
        if (!abortingOnLoad) {
          this.router.replace(this.from.path || '/');
        }
      }
    };

    /**
     * Abort current transition and redirect to a new location.
     *
     * @param {String} path
     */

    RouteTransition.prototype.redirect = function redirect(path) {
      if (!this.aborted) {
        this.aborted = true;
        if (typeof path === 'string') {
          path = mapParams(path, this.to.params, this.to.query);
        } else {
          path.params = path.params || this.to.params;
          path.query = path.query || this.to.query;
        }
        this.router.replace(path);
      }
    };

    /**
     * A router view transition's pipeline can be described as
     * follows, assuming we are transitioning from an existing
     * <router-view> chain [Component A, Component B] to a new
     * chain [Component A, Component C]:
     *
     *  A    A
     *  | => |
     *  B    C
     *
     * 1. Reusablity phase:
     *   -> canReuse(A, A)
     *   -> canReuse(B, C)
     *   -> determine new queues:
     *      - deactivation: [B]
     *      - activation: [C]
     *
     * 2. Validation phase:
     *   -> canDeactivate(B)
     *   -> canActivate(C)
     *
     * 3. Activation phase:
     *   -> deactivate(B)
     *   -> activate(C)
     *
     * Each of these steps can be asynchronous, and any
     * step can potentially abort the transition.
     *
     * @param {Function} cb
     */

    RouteTransition.prototype.start = function start(cb) {
      var transition = this;

      // determine the queue of views to deactivate
      var deactivateQueue = [];
      var view = this.router._rootView;
      while (view) {
        deactivateQueue.unshift(view);
        view = view.childView;
      }
      var reverseDeactivateQueue = deactivateQueue.slice().reverse();

      // determine the queue of route handlers to activate
      var activateQueue = this.activateQueue = toArray(this.to.matched).map(function (match) {
        return match.handler;
      });

      // 1. Reusability phase
      var i = undefined,
          reuseQueue = undefined;
      for (i = 0; i < reverseDeactivateQueue.length; i++) {
        if (!canReuse(reverseDeactivateQueue[i], activateQueue[i], transition)) {
          break;
        }
      }
      if (i > 0) {
        reuseQueue = reverseDeactivateQueue.slice(0, i);
        deactivateQueue = reverseDeactivateQueue.slice(i).reverse();
        activateQueue = activateQueue.slice(i);
      }

      // 2. Validation phase
      transition.runQueue(deactivateQueue, canDeactivate, function () {
        transition.runQueue(activateQueue, canActivate, function () {
          transition.runQueue(deactivateQueue, deactivate, function () {
            // 3. Activation phase

            // Update router current route
            transition.router._onTransitionValidated(transition);

            // trigger reuse for all reused views
            reuseQueue && reuseQueue.forEach(function (view) {
              return reuse(view, transition);
            });

            // the root of the chain that needs to be replaced
            // is the top-most non-reusable view.
            if (deactivateQueue.length) {
              var _view = deactivateQueue[deactivateQueue.length - 1];
              var depth = reuseQueue ? reuseQueue.length : 0;
              activate(_view, transition, depth, cb);
            } else {
              cb();
            }
          });
        });
      });
    };

    /**
     * Asynchronously and sequentially apply a function to a
     * queue.
     *
     * @param {Array} queue
     * @param {Function} fn
     * @param {Function} cb
     */

    RouteTransition.prototype.runQueue = function runQueue(queue, fn, cb) {
      var transition = this;
      step(0);
      function step(index) {
        if (index >= queue.length) {
          cb();
        } else {
          fn(queue[index], transition, function () {
            step(index + 1);
          });
        }
      }
    };

    /**
     * Call a user provided route transition hook and handle
     * the response (e.g. if the user returns a promise).
     *
     * If the user neither expects an argument nor returns a
     * promise, the hook is assumed to be synchronous.
     *
     * @param {Function} hook
     * @param {*} [context]
     * @param {Function} [cb]
     * @param {Object} [options]
     *                 - {Boolean} expectBoolean
     *                 - {Boolean} postActive
     *                 - {Function} processData
     *                 - {Function} cleanup
     */

    RouteTransition.prototype.callHook = function callHook(hook, context, cb) {
      var _ref = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];

      var _ref$expectBoolean = _ref.expectBoolean;
      var expectBoolean = _ref$expectBoolean === undefined ? false : _ref$expectBoolean;
      var _ref$postActivate = _ref.postActivate;
      var postActivate = _ref$postActivate === undefined ? false : _ref$postActivate;
      var processData = _ref.processData;
      var cleanup = _ref.cleanup;

      var transition = this;
      var nextCalled = false;

      // abort the transition
      var abort = function abort() {
        cleanup && cleanup();
        transition.abort();
      };

      // handle errors
      var onError = function onError(err) {
        postActivate ? next() : abort();
        if (err && !transition.router._suppress) {
          warn$1('Uncaught error during transition: ');
          throw err instanceof Error ? err : new Error(err);
        }
      };

      // since promise swallows errors, we have to
      // throw it in the next tick...
      var onPromiseError = function onPromiseError(err) {
        try {
          onError(err);
        } catch (e) {
          setTimeout(function () {
            throw e;
          }, 0);
        }
      };

      // advance the transition to the next step
      var next = function next() {
        if (nextCalled) {
          warn$1('transition.next() should be called only once.');
          return;
        }
        nextCalled = true;
        if (transition.aborted) {
          cleanup && cleanup();
          return;
        }
        cb && cb();
      };

      var nextWithBoolean = function nextWithBoolean(res) {
        if (typeof res === 'boolean') {
          res ? next() : abort();
        } else if (isPromise(res)) {
          res.then(function (ok) {
            ok ? next() : abort();
          }, onPromiseError);
        } else if (!hook.length) {
          next();
        }
      };

      var nextWithData = function nextWithData(data) {
        var res = undefined;
        try {
          res = processData(data);
        } catch (err) {
          return onError(err);
        }
        if (isPromise(res)) {
          res.then(next, onPromiseError);
        } else {
          next();
        }
      };

      // expose a clone of the transition object, so that each
      // hook gets a clean copy and prevent the user from
      // messing with the internals.
      var exposed = {
        to: transition.to,
        from: transition.from,
        abort: abort,
        next: processData ? nextWithData : next,
        redirect: function redirect() {
          transition.redirect.apply(transition, arguments);
        }
      };

      // actually call the hook
      var res = undefined;
      try {
        res = hook.call(context, exposed);
      } catch (err) {
        return onError(err);
      }

      if (expectBoolean) {
        // boolean hooks
        nextWithBoolean(res);
      } else if (isPromise(res)) {
        // promise
        if (processData) {
          res.then(nextWithData, onPromiseError);
        } else {
          res.then(next, onPromiseError);
        }
      } else if (processData && isPlainOjbect(res)) {
        // data promise sugar
        nextWithData(res);
      } else if (!hook.length) {
        next();
      }
    };

    /**
     * Call a single hook or an array of async hooks in series.
     *
     * @param {Array} hooks
     * @param {*} context
     * @param {Function} cb
     * @param {Object} [options]
     */

    RouteTransition.prototype.callHooks = function callHooks(hooks, context, cb, options) {
      var _this = this;

      if (Array.isArray(hooks)) {
        this.runQueue(hooks, function (hook, _, next) {
          if (!_this.aborted) {
            _this.callHook(hook, context, next, options);
          }
        }, cb);
      } else {
        this.callHook(hooks, context, cb, options);
      }
    };

    return RouteTransition;
  })();

  function isPlainOjbect(val) {
    return Object.prototype.toString.call(val) === '[object Object]';
  }

  function toArray(val) {
    return val ? Array.prototype.slice.call(val) : [];
  }

  var internalKeysRE = /^(component|subRoutes|fullPath)$/;

  /**
   * Route Context Object
   *
   * @param {String} path
   * @param {Router} router
   */

  var Route = function Route(path, router) {
    var _this = this;

    babelHelpers.classCallCheck(this, Route);

    var matched = router._recognizer.recognize(path);
    if (matched) {
      // copy all custom fields from route configs
      [].forEach.call(matched, function (match) {
        for (var key in match.handler) {
          if (!internalKeysRE.test(key)) {
            _this[key] = match.handler[key];
          }
        }
      });
      // set query and params
      this.query = matched.queryParams;
      this.params = [].reduce.call(matched, function (prev, cur) {
        if (cur.params) {
          for (var key in cur.params) {
            prev[key] = cur.params[key];
          }
        }
        return prev;
      }, {});
    }
    // expose path and router
    this.path = path;
    // for internal use
    this.matched = matched || router._notFoundHandler;
    // internal reference to router
    Object.defineProperty(this, 'router', {
      enumerable: false,
      value: router
    });
    // Important: freeze self to prevent observation
    Object.freeze(this);
  };

  function applyOverride (Vue) {
    var _Vue$util = Vue.util;
    var extend = _Vue$util.extend;
    var isArray = _Vue$util.isArray;
    var defineReactive = _Vue$util.defineReactive;

    // override Vue's init and destroy process to keep track of router instances
    var init = Vue.prototype._init;
    Vue.prototype._init = function (options) {
      options = options || {};
      var root = options._parent || options.parent || this;
      var router = root.$router;
      var route = root.$route;
      if (router) {
        // expose router
        this.$router = router;
        router._children.push(this);
        /* istanbul ignore if */
        if (this._defineMeta) {
          // 0.12
          this._defineMeta('$route', route);
        } else {
          // 1.0
          defineReactive(this, '$route', route);
        }
      }
      init.call(this, options);
    };

    var destroy = Vue.prototype._destroy;
    Vue.prototype._destroy = function () {
      if (!this._isBeingDestroyed && this.$router) {
        this.$router._children.$remove(this);
      }
      destroy.apply(this, arguments);
    };

    // 1.0 only: enable route mixins
    var strats = Vue.config.optionMergeStrategies;
    var hooksToMergeRE = /^(data|activate|deactivate)$/;

    if (strats) {
      strats.route = function (parentVal, childVal) {
        if (!childVal) return parentVal;
        if (!parentVal) return childVal;
        var ret = {};
        extend(ret, parentVal);
        for (var key in childVal) {
          var a = ret[key];
          var b = childVal[key];
          // for data, activate and deactivate, we need to merge them into
          // arrays similar to lifecycle hooks.
          if (a && hooksToMergeRE.test(key)) {
            ret[key] = (isArray(a) ? a : [a]).concat(b);
          } else {
            ret[key] = b;
          }
        }
        return ret;
      };
    }
  }

  function View (Vue) {

    var _ = Vue.util;
    var componentDef =
    // 0.12
    Vue.directive('_component') ||
    // 1.0
    Vue.internalDirectives.component;
    // <router-view> extends the internal component directive
    var viewDef = _.extend({}, componentDef);

    // with some overrides
    _.extend(viewDef, {

      _isRouterView: true,

      bind: function bind() {
        var route = this.vm.$route;
        /* istanbul ignore if */
        if (!route) {
          warn$1('<router-view> can only be used inside a ' + 'router-enabled app.');
          return;
        }
        // force dynamic directive so v-component doesn't
        // attempt to build right now
        this._isDynamicLiteral = true;
        // finally, init by delegating to v-component
        componentDef.bind.call(this);

        // locate the parent view
        var parentView = undefined;
        var parent = this.vm;
        while (parent) {
          if (parent._routerView) {
            parentView = parent._routerView;
            break;
          }
          parent = parent.$parent;
        }
        if (parentView) {
          // register self as a child of the parent view,
          // instead of activating now. This is so that the
          // child's activate hook is called after the
          // parent's has resolved.
          this.parentView = parentView;
          parentView.childView = this;
        } else {
          // this is the root view!
          var router = route.router;
          router._rootView = this;
        }

        // handle late-rendered view
        // two possibilities:
        // 1. root view rendered after transition has been
        //    validated;
        // 2. child view rendered after parent view has been
        //    activated.
        var transition = route.router._currentTransition;
        if (!parentView && transition.done || parentView && parentView.activated) {
          var depth = parentView ? parentView.depth + 1 : 0;
          activate(this, transition, depth);
        }
      },

      unbind: function unbind() {
        if (this.parentView) {
          this.parentView.childView = null;
        }
        componentDef.unbind.call(this);
      }
    });

    Vue.elementDirective('router-view', viewDef);
  }

  var trailingSlashRE = /\/$/;
  var regexEscapeRE = /[-.*+?^${}()|[\]\/\\]/g;
  var queryStringRE = /\?.*$/;

  // install v-link, which provides navigation support for
  // HTML5 history mode
  function Link (Vue) {
    var _Vue$util = Vue.util;
    var _bind = _Vue$util.bind;
    var isObject = _Vue$util.isObject;
    var addClass = _Vue$util.addClass;
    var removeClass = _Vue$util.removeClass;

    var onPriority = Vue.directive('on').priority;
    var LINK_UPDATE = '__vue-router-link-update__';

    var activeId = 0;

    Vue.directive('link-active', {
      priority: 9999,
      bind: function bind() {
        var _this = this;

        var id = String(activeId++);
        // collect v-links contained within this element.
        // we need do this here before the parent-child relationship
        // gets messed up by terminal directives (if, for, components)
        var childLinks = this.el.querySelectorAll('[v-link]');
        for (var i = 0, l = childLinks.length; i < l; i++) {
          var link = childLinks[i];
          var existingId = link.getAttribute(LINK_UPDATE);
          var value = existingId ? existingId + ',' + id : id;
          // leave a mark on the link element which can be persisted
          // through fragment clones.
          link.setAttribute(LINK_UPDATE, value);
        }
        this.vm.$on(LINK_UPDATE, this.cb = function (link, path) {
          if (link.activeIds.indexOf(id) > -1) {
            link.updateClasses(path, _this.el);
          }
        });
      },
      unbind: function unbind() {
        this.vm.$off(LINK_UPDATE, this.cb);
      }
    });

    Vue.directive('link', {
      priority: onPriority - 2,

      bind: function bind() {
        var vm = this.vm;
        /* istanbul ignore if */
        if (!vm.$route) {
          warn$1('v-link can only be used inside a router-enabled app.');
          return;
        }
        this.router = vm.$route.router;
        // update things when the route changes
        this.unwatch = vm.$watch('$route', _bind(this.onRouteUpdate, this));
        // check v-link-active ids
        var activeIds = this.el.getAttribute(LINK_UPDATE);
        if (activeIds) {
          this.el.removeAttribute(LINK_UPDATE);
          this.activeIds = activeIds.split(',');
        }
        // no need to handle click if link expects to be opened
        // in a new window/tab.
        /* istanbul ignore if */
        if (this.el.tagName === 'A' && this.el.getAttribute('target') === '_blank') {
          return;
        }
        // handle click
        this.handler = _bind(this.onClick, this);
        this.el.addEventListener('click', this.handler);
      },

      update: function update(target) {
        this.target = target;
        if (isObject(target)) {
          this.append = target.append;
          this.exact = target.exact;
          this.prevActiveClass = this.activeClass;
          this.activeClass = target.activeClass;
        }
        this.onRouteUpdate(this.vm.$route);
      },

      onClick: function onClick(e) {
        // don't redirect with control keys
        /* istanbul ignore if */
        if (e.metaKey || e.ctrlKey || e.shiftKey) return;
        // don't redirect when preventDefault called
        /* istanbul ignore if */
        if (e.defaultPrevented) return;
        // don't redirect on right click
        /* istanbul ignore if */
        if (e.button !== 0) return;

        var target = this.target;
        if (target) {
          // v-link with expression, just go
          e.preventDefault();
          this.router.go(target);
        } else {
          // no expression, delegate for an <a> inside
          var el = e.target;
          while (el.tagName !== 'A' && el !== this.el) {
            el = el.parentNode;
          }
          if (el.tagName === 'A' && sameOrigin(el)) {
            e.preventDefault();
            var path = el.pathname;
            if (this.router.history.root) {
              path = path.replace(this.router.history.rootRE, '');
            }
            this.router.go({
              path: path,
              replace: target && target.replace,
              append: target && target.append
            });
          }
        }
      },

      onRouteUpdate: function onRouteUpdate(route) {
        // router.stringifyPath is dependent on current route
        // and needs to be called again whenver route changes.
        var newPath = this.router.stringifyPath(this.target);
        if (this.path !== newPath) {
          this.path = newPath;
          this.updateActiveMatch();
          this.updateHref();
        }
        if (this.activeIds) {
          this.vm.$emit(LINK_UPDATE, this, route.path);
        } else {
          this.updateClasses(route.path, this.el);
        }
      },

      updateActiveMatch: function updateActiveMatch() {
        this.activeRE = this.path && !this.exact ? new RegExp('^' + this.path.replace(/\/$/, '').replace(queryStringRE, '').replace(regexEscapeRE, '\\$&') + '(\\/|$)') : null;
      },

      updateHref: function updateHref() {
        if (this.el.tagName !== 'A') {
          return;
        }
        var path = this.path;
        var router = this.router;
        var isAbsolute = path.charAt(0) === '/';
        // do not format non-hash relative paths
        var href = path && (router.mode === 'hash' || isAbsolute) ? router.history.formatPath(path, this.append) : path;
        if (href) {
          this.el.href = href;
        } else {
          this.el.removeAttribute('href');
        }
      },

      updateClasses: function updateClasses(path, el) {
        var activeClass = this.activeClass || this.router._linkActiveClass;
        // clear old class
        if (this.prevActiveClass && this.prevActiveClass !== activeClass) {
          toggleClasses(el, this.prevActiveClass, removeClass);
        }
        // remove query string before matching
        var dest = this.path.replace(queryStringRE, '');
        path = path.replace(queryStringRE, '');
        // add new class
        if (this.exact) {
          if (dest === path ||
          // also allow additional trailing slash
          dest.charAt(dest.length - 1) !== '/' && dest === path.replace(trailingSlashRE, '')) {
            toggleClasses(el, activeClass, addClass);
          } else {
            toggleClasses(el, activeClass, removeClass);
          }
        } else {
          if (this.activeRE && this.activeRE.test(path)) {
            toggleClasses(el, activeClass, addClass);
          } else {
            toggleClasses(el, activeClass, removeClass);
          }
        }
      },

      unbind: function unbind() {
        this.el.removeEventListener('click', this.handler);
        this.unwatch && this.unwatch();
      }
    });

    function sameOrigin(link) {
      return link.protocol === location.protocol && link.hostname === location.hostname && link.port === location.port;
    }

    // this function is copied from v-bind:class implementation until
    // we properly expose it...
    function toggleClasses(el, key, fn) {
      key = key.trim();
      if (key.indexOf(' ') === -1) {
        fn(el, key);
        return;
      }
      var keys = key.split(/\s+/);
      for (var i = 0, l = keys.length; i < l; i++) {
        fn(el, keys[i]);
      }
    }
  }

  var historyBackends = {
    abstract: AbstractHistory,
    hash: HashHistory,
    html5: HTML5History
  };

  // late bind during install
  var Vue = undefined;

  /**
   * Router constructor
   *
   * @param {Object} [options]
   */

  var Router = (function () {
    function Router() {
      var _this = this;

      var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

      var _ref$hashbang = _ref.hashbang;
      var hashbang = _ref$hashbang === undefined ? true : _ref$hashbang;
      var _ref$abstract = _ref.abstract;
      var abstract = _ref$abstract === undefined ? false : _ref$abstract;
      var _ref$history = _ref.history;
      var history = _ref$history === undefined ? false : _ref$history;
      var _ref$saveScrollPosition = _ref.saveScrollPosition;
      var saveScrollPosition = _ref$saveScrollPosition === undefined ? false : _ref$saveScrollPosition;
      var _ref$transitionOnLoad = _ref.transitionOnLoad;
      var transitionOnLoad = _ref$transitionOnLoad === undefined ? false : _ref$transitionOnLoad;
      var _ref$suppressTransitionError = _ref.suppressTransitionError;
      var suppressTransitionError = _ref$suppressTransitionError === undefined ? false : _ref$suppressTransitionError;
      var _ref$root = _ref.root;
      var root = _ref$root === undefined ? null : _ref$root;
      var _ref$linkActiveClass = _ref.linkActiveClass;
      var linkActiveClass = _ref$linkActiveClass === undefined ? 'v-link-active' : _ref$linkActiveClass;
      babelHelpers.classCallCheck(this, Router);

      /* istanbul ignore if */
      if (!Router.installed) {
        throw new Error('Please install the Router with Vue.use() before ' + 'creating an instance.');
      }

      // Vue instances
      this.app = null;
      this._children = [];

      // route recognizer
      this._recognizer = new RouteRecognizer();
      this._guardRecognizer = new RouteRecognizer();

      // state
      this._started = false;
      this._startCb = null;
      this._currentRoute = {};
      this._currentTransition = null;
      this._previousTransition = null;
      this._notFoundHandler = null;
      this._notFoundRedirect = null;
      this._beforeEachHooks = [];
      this._afterEachHooks = [];

      // trigger transition on initial render?
      this._rendered = false;
      this._transitionOnLoad = transitionOnLoad;

      // history mode
      this._root = root;
      this._abstract = abstract;
      this._hashbang = hashbang;

      // check if HTML5 history is available
      var hasPushState = typeof window !== 'undefined' && window.history && window.history.pushState;
      this._history = history && hasPushState;
      this._historyFallback = history && !hasPushState;

      // create history object
      var inBrowser = Vue.util.inBrowser;
      this.mode = !inBrowser || this._abstract ? 'abstract' : this._history ? 'html5' : 'hash';

      var History = historyBackends[this.mode];
      this.history = new History({
        root: root,
        hashbang: this._hashbang,
        onChange: function onChange(path, state, anchor) {
          _this._match(path, state, anchor);
        }
      });

      // other options
      this._saveScrollPosition = saveScrollPosition;
      this._linkActiveClass = linkActiveClass;
      this._suppress = suppressTransitionError;
    }

    /**
     * Allow directly passing components to a route
     * definition.
     *
     * @param {String} path
     * @param {Object} handler
     */

    // API ===================================================

    /**
    * Register a map of top-level paths.
    *
    * @param {Object} map
    */

    Router.prototype.map = function map(_map) {
      for (var route in _map) {
        this.on(route, _map[route]);
      }
      return this;
    };

    /**
     * Register a single root-level path
     *
     * @param {String} rootPath
     * @param {Object} handler
     *                 - {String} component
     *                 - {Object} [subRoutes]
     *                 - {Boolean} [forceRefresh]
     *                 - {Function} [before]
     *                 - {Function} [after]
     */

    Router.prototype.on = function on(rootPath, handler) {
      if (rootPath === '*') {
        this._notFound(handler);
      } else {
        this._addRoute(rootPath, handler, []);
      }
      return this;
    };

    /**
     * Set redirects.
     *
     * @param {Object} map
     */

    Router.prototype.redirect = function redirect(map) {
      for (var path in map) {
        this._addRedirect(path, map[path]);
      }
      return this;
    };

    /**
     * Set aliases.
     *
     * @param {Object} map
     */

    Router.prototype.alias = function alias(map) {
      for (var path in map) {
        this._addAlias(path, map[path]);
      }
      return this;
    };

    /**
     * Set global before hook.
     *
     * @param {Function} fn
     */

    Router.prototype.beforeEach = function beforeEach(fn) {
      this._beforeEachHooks.push(fn);
      return this;
    };

    /**
     * Set global after hook.
     *
     * @param {Function} fn
     */

    Router.prototype.afterEach = function afterEach(fn) {
      this._afterEachHooks.push(fn);
      return this;
    };

    /**
     * Navigate to a given path.
     * The path can be an object describing a named path in
     * the format of { name: '...', params: {}, query: {}}
     * The path is assumed to be already decoded, and will
     * be resolved against root (if provided)
     *
     * @param {String|Object} path
     * @param {Boolean} [replace]
     */

    Router.prototype.go = function go(path) {
      var replace = false;
      var append = false;
      if (Vue.util.isObject(path)) {
        replace = path.replace;
        append = path.append;
      }
      path = this.stringifyPath(path);
      if (path) {
        this.history.go(path, replace, append);
      }
    };

    /**
     * Short hand for replacing current path
     *
     * @param {String} path
     */

    Router.prototype.replace = function replace(path) {
      if (typeof path === 'string') {
        path = { path: path };
      }
      path.replace = true;
      this.go(path);
    };

    /**
     * Start the router.
     *
     * @param {VueConstructor} App
     * @param {String|Element} container
     * @param {Function} [cb]
     */

    Router.prototype.start = function start(App, container, cb) {
      /* istanbul ignore if */
      if (this._started) {
        warn$1('already started.');
        return;
      }
      this._started = true;
      this._startCb = cb;
      if (!this.app) {
        /* istanbul ignore if */
        if (!App || !container) {
          throw new Error('Must start vue-router with a component and a ' + 'root container.');
        }
        /* istanbul ignore if */
        if (App instanceof Vue) {
          throw new Error('Must start vue-router with a component, not a ' + 'Vue instance.');
        }
        this._appContainer = container;
        var Ctor = this._appConstructor = typeof App === 'function' ? App : Vue.extend(App);
        // give it a name for better debugging
        Ctor.options.name = Ctor.options.name || 'RouterApp';
      }

      // handle history fallback in browsers that do not
      // support HTML5 history API
      if (this._historyFallback) {
        var _location = window.location;
        var _history = new HTML5History({ root: this._root });
        var path = _history.root ? _location.pathname.replace(_history.rootRE, '') : _location.pathname;
        if (path && path !== '/') {
          _location.assign((_history.root || '') + '/' + this.history.formatPath(path) + _location.search);
          return;
        }
      }

      this.history.start();
    };

    /**
     * Stop listening to route changes.
     */

    Router.prototype.stop = function stop() {
      this.history.stop();
      this._started = false;
    };

    /**
     * Normalize named route object / string paths into
     * a string.
     *
     * @param {Object|String|Number} path
     * @return {String}
     */

    Router.prototype.stringifyPath = function stringifyPath(path) {
      var generatedPath = '';
      if (path && typeof path === 'object') {
        if (path.name) {
          var extend = Vue.util.extend;
          var currentParams = this._currentTransition && this._currentTransition.to.params;
          var targetParams = path.params || {};
          var params = currentParams ? extend(extend({}, currentParams), targetParams) : targetParams;
          generatedPath = encodeURI(this._recognizer.generate(path.name, params));
        } else if (path.path) {
          generatedPath = encodeURI(path.path);
        }
        if (path.query) {
          // note: the generated query string is pre-URL-encoded by the recognizer
          var query = this._recognizer.generateQueryString(path.query);
          if (generatedPath.indexOf('?') > -1) {
            generatedPath += '&' + query.slice(1);
          } else {
            generatedPath += query;
          }
        }
      } else {
        generatedPath = encodeURI(path ? path + '' : '');
      }
      return generatedPath;
    };

    // Internal methods ======================================

    /**
    * Add a route containing a list of segments to the internal
    * route recognizer. Will be called recursively to add all
    * possible sub-routes.
    *
    * @param {String} path
    * @param {Object} handler
    * @param {Array} segments
    */

    Router.prototype._addRoute = function _addRoute(path, handler, segments) {
      guardComponent(path, handler);
      handler.path = path;
      handler.fullPath = (segments.reduce(function (path, segment) {
        return path + segment.path;
      }, '') + path).replace('//', '/');
      segments.push({
        path: path,
        handler: handler
      });
      this._recognizer.add(segments, {
        as: handler.name
      });
      // add sub routes
      if (handler.subRoutes) {
        for (var subPath in handler.subRoutes) {
          // recursively walk all sub routes
          this._addRoute(subPath, handler.subRoutes[subPath],
          // pass a copy in recursion to avoid mutating
          // across branches
          segments.slice());
        }
      }
    };

    /**
     * Set the notFound route handler.
     *
     * @param {Object} handler
     */

    Router.prototype._notFound = function _notFound(handler) {
      guardComponent('*', handler);
      this._notFoundHandler = [{ handler: handler }];
    };

    /**
     * Add a redirect record.
     *
     * @param {String} path
     * @param {String} redirectPath
     */

    Router.prototype._addRedirect = function _addRedirect(path, redirectPath) {
      if (path === '*') {
        this._notFoundRedirect = redirectPath;
      } else {
        this._addGuard(path, redirectPath, this.replace);
      }
    };

    /**
     * Add an alias record.
     *
     * @param {String} path
     * @param {String} aliasPath
     */

    Router.prototype._addAlias = function _addAlias(path, aliasPath) {
      this._addGuard(path, aliasPath, this._match);
    };

    /**
     * Add a path guard.
     *
     * @param {String} path
     * @param {String} mappedPath
     * @param {Function} handler
     */

    Router.prototype._addGuard = function _addGuard(path, mappedPath, _handler) {
      var _this2 = this;

      this._guardRecognizer.add([{
        path: path,
        handler: function handler(match, query) {
          var realPath = mapParams(mappedPath, match.params, query);
          _handler.call(_this2, realPath);
        }
      }]);
    };

    /**
     * Check if a path matches any redirect records.
     *
     * @param {String} path
     * @return {Boolean} - if true, will skip normal match.
     */

    Router.prototype._checkGuard = function _checkGuard(path) {
      var matched = this._guardRecognizer.recognize(path, true);
      if (matched) {
        matched[0].handler(matched[0], matched.queryParams);
        return true;
      } else if (this._notFoundRedirect) {
        matched = this._recognizer.recognize(path);
        if (!matched) {
          this.replace(this._notFoundRedirect);
          return true;
        }
      }
    };

    /**
     * Match a URL path and set the route context on vm,
     * triggering view updates.
     *
     * @param {String} path
     * @param {Object} [state]
     * @param {String} [anchor]
     */

    Router.prototype._match = function _match(path, state, anchor) {
      var _this3 = this;

      if (this._checkGuard(path)) {
        return;
      }

      var currentRoute = this._currentRoute;
      var currentTransition = this._currentTransition;

      if (currentTransition) {
        if (currentTransition.to.path === path) {
          // do nothing if we have an active transition going to the same path
          return;
        } else if (currentRoute.path === path) {
          // We are going to the same path, but we also have an ongoing but
          // not-yet-validated transition. Abort that transition and reset to
          // prev transition.
          currentTransition.aborted = true;
          this._currentTransition = this._prevTransition;
          return;
        } else {
          // going to a totally different path. abort ongoing transition.
          currentTransition.aborted = true;
        }
      }

      // construct new route and transition context
      var route = new Route(path, this);
      var transition = new RouteTransition(this, route, currentRoute);

      // current transition is updated right now.
      // however, current route will only be updated after the transition has
      // been validated.
      this._prevTransition = currentTransition;
      this._currentTransition = transition;

      if (!this.app) {
        (function () {
          // initial render
          var router = _this3;
          _this3.app = new _this3._appConstructor({
            el: _this3._appContainer,
            created: function created() {
              this.$router = router;
            },
            _meta: {
              $route: route
            }
          });
        })();
      }

      // check global before hook
      var beforeHooks = this._beforeEachHooks;
      var startTransition = function startTransition() {
        transition.start(function () {
          _this3._postTransition(route, state, anchor);
        });
      };

      if (beforeHooks.length) {
        transition.runQueue(beforeHooks, function (hook, _, next) {
          if (transition === _this3._currentTransition) {
            transition.callHook(hook, null, next, {
              expectBoolean: true
            });
          }
        }, startTransition);
      } else {
        startTransition();
      }

      if (!this._rendered && this._startCb) {
        this._startCb.call(null);
      }

      // HACK:
      // set rendered to true after the transition start, so
      // that components that are acitvated synchronously know
      // whether it is the initial render.
      this._rendered = true;
    };

    /**
     * Set current to the new transition.
     * This is called by the transition object when the
     * validation of a route has succeeded.
     *
     * @param {Transition} transition
     */

    Router.prototype._onTransitionValidated = function _onTransitionValidated(transition) {
      // set current route
      var route = this._currentRoute = transition.to;
      // update route context for all children
      if (this.app.$route !== route) {
        this.app.$route = route;
        this._children.forEach(function (child) {
          child.$route = route;
        });
      }
      // call global after hook
      if (this._afterEachHooks.length) {
        this._afterEachHooks.forEach(function (hook) {
          return hook.call(null, {
            to: transition.to,
            from: transition.from
          });
        });
      }
      this._currentTransition.done = true;
    };

    /**
     * Handle stuff after the transition.
     *
     * @param {Route} route
     * @param {Object} [state]
     * @param {String} [anchor]
     */

    Router.prototype._postTransition = function _postTransition(route, state, anchor) {
      // handle scroll positions
      // saved scroll positions take priority
      // then we check if the path has an anchor
      var pos = state && state.pos;
      if (pos && this._saveScrollPosition) {
        Vue.nextTick(function () {
          window.scrollTo(pos.x, pos.y);
        });
      } else if (anchor) {
        Vue.nextTick(function () {
          var el = document.getElementById(anchor.slice(1));
          if (el) {
            window.scrollTo(window.scrollX, el.offsetTop);
          }
        });
      }
    };

    return Router;
  })();

  function guardComponent(path, handler) {
    var comp = handler.component;
    if (Vue.util.isPlainObject(comp)) {
      comp = handler.component = Vue.extend(comp);
    }
    /* istanbul ignore if */
    if (typeof comp !== 'function') {
      handler.component = null;
      warn$1('invalid component for route "' + path + '".');
    }
  }

  /* Installation */

  Router.installed = false;

  /**
   * Installation interface.
   * Install the necessary directives.
   */

  Router.install = function (externalVue) {
    /* istanbul ignore if */
    if (Router.installed) {
      warn$1('already installed.');
      return;
    }
    Vue = externalVue;
    applyOverride(Vue);
    View(Vue);
    Link(Vue);
    exports$1.Vue = Vue;
    Router.installed = true;
  };

  // auto install
  /* istanbul ignore if */
  if (typeof window !== 'undefined' && window.Vue) {
    window.Vue.use(Router);
  }

  return Router;

}));
/*!
 * vue-resource v0.7.4
 * https://github.com/vuejs/vue-resource
 * Released under the MIT License.
 */

(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.VueResource = factory());
}(this, function () { 'use strict';

  var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
  };

  /**
   * Utility functions.
   */

  var util = {};
  var config = {};
  var array = [];
  var console = window.console;
  function Util (Vue) {
      util = Vue.util;
      config = Vue.config;
  }

  var isArray = Array.isArray;

  function warn(msg) {
      if (console && util.warn && (!config.silent || config.debug)) {
          console.warn('[VueResource warn]: ' + msg);
      }
  }

  function error(msg) {
      if (console) {
          console.error(msg);
      }
  }

  function nextTick(cb, ctx) {
      return util.nextTick(cb, ctx);
  }

  function trim(str) {
      return str.replace(/^\s*|\s*$/g, '');
  }

  function toLower(str) {
      return str ? str.toLowerCase() : '';
  }

  function isString(val) {
      return typeof val === 'string';
  }

  function isFunction(val) {
      return typeof val === 'function';
  }

  function isObject(obj) {
      return obj !== null && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object';
  }

  function isPlainObject(obj) {
      return isObject(obj) && Object.getPrototypeOf(obj) == Object.prototype;
  }

  function options(fn, obj, opts) {

      opts = opts || {};

      if (isFunction(opts)) {
          opts = opts.call(obj);
      }

      return merge(fn.bind({ $vm: obj, $options: opts }), fn, { $options: opts });
  }

  function each(obj, iterator) {

      var i, key;

      if (typeof obj.length == 'number') {
          for (i = 0; i < obj.length; i++) {
              iterator.call(obj[i], obj[i], i);
          }
      } else if (isObject(obj)) {
          for (key in obj) {
              if (obj.hasOwnProperty(key)) {
                  iterator.call(obj[key], obj[key], key);
              }
          }
      }

      return obj;
  }

  function extend(target) {

      var args = array.slice.call(arguments, 1);

      args.forEach(function (arg) {
          _merge(target, arg);
      });

      return target;
  }

  function merge(target) {

      var args = array.slice.call(arguments, 1);

      args.forEach(function (arg) {
          _merge(target, arg, true);
      });

      return target;
  }

  function _merge(target, source, deep) {
      for (var key in source) {
          if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {
              if (isPlainObject(source[key]) && !isPlainObject(target[key])) {
                  target[key] = {};
              }
              if (isArray(source[key]) && !isArray(target[key])) {
                  target[key] = [];
              }
              _merge(target[key], source[key], deep);
          } else if (source[key] !== undefined) {
              target[key] = source[key];
          }
      }
  }

  function root (options, next) {

      var url = next(options);

      if (isString(options.root) && !url.match(/^(https?:)?\//)) {
          url = options.root + '/' + url;
      }

      return url;
  }

  function query (options, next) {

      var urlParams = Object.keys(Url.options.params),
          query = {},
          url = next(options);

      each(options.params, function (value, key) {
          if (urlParams.indexOf(key) === -1) {
              query[key] = value;
          }
      });

      query = Url.params(query);

      if (query) {
          url += (url.indexOf('?') == -1 ? '?' : '&') + query;
      }

      return url;
  }

  function legacy (options, next) {

      var variables = [],
          url = next(options);

      url = url.replace(/(\/?):([a-z]\w*)/gi, function (match, slash, name) {

          warn('The `:' + name + '` parameter syntax has been deprecated. Use the `{' + name + '}` syntax instead.');

          if (options.params[name]) {
              variables.push(name);
              return slash + encodeUriSegment(options.params[name]);
          }

          return '';
      });

      variables.forEach(function (key) {
          delete options.params[key];
      });

      return url;
  }

  function encodeUriSegment(value) {

      return encodeUriQuery(value, true).replace(/%26/gi, '&').replace(/%3D/gi, '=').replace(/%2B/gi, '+');
  }

  function encodeUriQuery(value, spaces) {

      return encodeURIComponent(value).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, spaces ? '%20' : '+');
  }

  /**
   * URL Template v2.0.6 (https://github.com/bramstein/url-template)
   */

  function expand(url, params, variables) {

      var tmpl = parse(url),
          expanded = tmpl.expand(params);

      if (variables) {
          variables.push.apply(variables, tmpl.vars);
      }

      return expanded;
  }

  function parse(template) {

      var operators = ['+', '#', '.', '/', ';', '?', '&'],
          variables = [];

      return {
          vars: variables,
          expand: function expand(context) {
              return template.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g, function (_, expression, literal) {
                  if (expression) {

                      var operator = null,
                          values = [];

                      if (operators.indexOf(expression.charAt(0)) !== -1) {
                          operator = expression.charAt(0);
                          expression = expression.substr(1);
                      }

                      expression.split(/,/g).forEach(function (variable) {
                          var tmp = /([^:\*]*)(?::(\d+)|(\*))?/.exec(variable);
                          values.push.apply(values, getValues(context, operator, tmp[1], tmp[2] || tmp[3]));
                          variables.push(tmp[1]);
                      });

                      if (operator && operator !== '+') {

                          var separator = ',';

                          if (operator === '?') {
                              separator = '&';
                          } else if (operator !== '#') {
                              separator = operator;
                          }

                          return (values.length !== 0 ? operator : '') + values.join(separator);
                      } else {
                          return values.join(',');
                      }
                  } else {
                      return encodeReserved(literal);
                  }
              });
          }
      };
  }

  function getValues(context, operator, key, modifier) {

      var value = context[key],
          result = [];

      if (isDefined(value) && value !== '') {
          if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {
              value = value.toString();

              if (modifier && modifier !== '*') {
                  value = value.substring(0, parseInt(modifier, 10));
              }

              result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : null));
          } else {
              if (modifier === '*') {
                  if (Array.isArray(value)) {
                      value.filter(isDefined).forEach(function (value) {
                          result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : null));
                      });
                  } else {
                      Object.keys(value).forEach(function (k) {
                          if (isDefined(value[k])) {
                              result.push(encodeValue(operator, value[k], k));
                          }
                      });
                  }
              } else {
                  var tmp = [];

                  if (Array.isArray(value)) {
                      value.filter(isDefined).forEach(function (value) {
                          tmp.push(encodeValue(operator, value));
                      });
                  } else {
                      Object.keys(value).forEach(function (k) {
                          if (isDefined(value[k])) {
                              tmp.push(encodeURIComponent(k));
                              tmp.push(encodeValue(operator, value[k].toString()));
                          }
                      });
                  }

                  if (isKeyOperator(operator)) {
                      result.push(encodeURIComponent(key) + '=' + tmp.join(','));
                  } else if (tmp.length !== 0) {
                      result.push(tmp.join(','));
                  }
              }
          }
      } else {
          if (operator === ';') {
              result.push(encodeURIComponent(key));
          } else if (value === '' && (operator === '&' || operator === '?')) {
              result.push(encodeURIComponent(key) + '=');
          } else if (value === '') {
              result.push('');
          }
      }

      return result;
  }

  function isDefined(value) {
      return value !== undefined && value !== null;
  }

  function isKeyOperator(operator) {
      return operator === ';' || operator === '&' || operator === '?';
  }

  function encodeValue(operator, value, key) {

      value = operator === '+' || operator === '#' ? encodeReserved(value) : encodeURIComponent(value);

      if (key) {
          return encodeURIComponent(key) + '=' + value;
      } else {
          return value;
      }
  }

  function encodeReserved(str) {
      return str.split(/(%[0-9A-Fa-f]{2})/g).map(function (part) {
          if (!/%[0-9A-Fa-f]/.test(part)) {
              part = encodeURI(part);
          }
          return part;
      }).join('');
  }

  function template (options) {

      var variables = [],
          url = expand(options.url, options.params, variables);

      variables.forEach(function (key) {
          delete options.params[key];
      });

      return url;
  }

  /**
   * Service for URL templating.
   */

  var ie = document.documentMode;
  var el = document.createElement('a');

  function Url(url, params) {

      var self = this || {},
          options = url,
          transform;

      if (isString(url)) {
          options = { url: url, params: params };
      }

      options = merge({}, Url.options, self.$options, options);

      Url.transforms.forEach(function (handler) {
          transform = factory(handler, transform, self.$vm);
      });

      return transform(options);
  }

  /**
   * Url options.
   */

  Url.options = {
      url: '',
      root: null,
      params: {}
  };

  /**
   * Url transforms.
   */

  Url.transforms = [template, legacy, query, root];

  /**
   * Encodes a Url parameter string.
   *
   * @param {Object} obj
   */

  Url.params = function (obj) {

      var params = [],
          escape = encodeURIComponent;

      params.add = function (key, value) {

          if (isFunction(value)) {
              value = value();
          }

          if (value === null) {
              value = '';
          }

          this.push(escape(key) + '=' + escape(value));
      };

      serialize(params, obj);

      return params.join('&').replace(/%20/g, '+');
  };

  /**
   * Parse a URL and return its components.
   *
   * @param {String} url
   */

  Url.parse = function (url) {

      if (ie) {
          el.href = url;
          url = el.href;
      }

      el.href = url;

      return {
          href: el.href,
          protocol: el.protocol ? el.protocol.replace(/:$/, '') : '',
          port: el.port,
          host: el.host,
          hostname: el.hostname,
          pathname: el.pathname.charAt(0) === '/' ? el.pathname : '/' + el.pathname,
          search: el.search ? el.search.replace(/^\?/, '') : '',
          hash: el.hash ? el.hash.replace(/^#/, '') : ''
      };
  };

  function factory(handler, next, vm) {
      return function (options) {
          return handler.call(vm, options, next);
      };
  }

  function serialize(params, obj, scope) {

      var array = isArray(obj),
          plain = isPlainObject(obj),
          hash;

      each(obj, function (value, key) {

          hash = isObject(value) || isArray(value);

          if (scope) {
              key = scope + '[' + (plain || hash ? key : '') + ']';
          }

          if (!scope && array) {
              params.add(value.name, value.value);
          } else if (hash) {
              serialize(params, value, key);
          } else {
              params.add(key, value);
          }
      });
  }

  /**
   * Promises/A+ polyfill v1.1.4 (https://github.com/bramstein/promis)
   */

  var RESOLVED = 0;
  var REJECTED = 1;
  var PENDING = 2;

  function Promise$2(executor) {

      this.state = PENDING;
      this.value = undefined;
      this.deferred = [];

      var promise = this;

      try {
          executor(function (x) {
              promise.resolve(x);
          }, function (r) {
              promise.reject(r);
          });
      } catch (e) {
          promise.reject(e);
      }
  }

  Promise$2.reject = function (r) {
      return new Promise$2(function (resolve, reject) {
          reject(r);
      });
  };

  Promise$2.resolve = function (x) {
      return new Promise$2(function (resolve, reject) {
          resolve(x);
      });
  };

  Promise$2.all = function all(iterable) {
      return new Promise$2(function (resolve, reject) {
          var count = 0,
              result = [];

          if (iterable.length === 0) {
              resolve(result);
          }

          function resolver(i) {
              return function (x) {
                  result[i] = x;
                  count += 1;

                  if (count === iterable.length) {
                      resolve(result);
                  }
              };
          }

          for (var i = 0; i < iterable.length; i += 1) {
              Promise$2.resolve(iterable[i]).then(resolver(i), reject);
          }
      });
  };

  Promise$2.race = function race(iterable) {
      return new Promise$2(function (resolve, reject) {
          for (var i = 0; i < iterable.length; i += 1) {
              Promise$2.resolve(iterable[i]).then(resolve, reject);
          }
      });
  };

  var p$1 = Promise$2.prototype;

  p$1.resolve = function resolve(x) {
      var promise = this;

      if (promise.state === PENDING) {
          if (x === promise) {
              throw new TypeError('Promise settled with itself.');
          }

          var called = false;

          try {
              var then = x && x['then'];

              if (x !== null && (typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && typeof then === 'function') {
                  then.call(x, function (x) {
                      if (!called) {
                          promise.resolve(x);
                      }
                      called = true;
                  }, function (r) {
                      if (!called) {
                          promise.reject(r);
                      }
                      called = true;
                  });
                  return;
              }
          } catch (e) {
              if (!called) {
                  promise.reject(e);
              }
              return;
          }

          promise.state = RESOLVED;
          promise.value = x;
          promise.notify();
      }
  };

  p$1.reject = function reject(reason) {
      var promise = this;

      if (promise.state === PENDING) {
          if (reason === promise) {
              throw new TypeError('Promise settled with itself.');
          }

          promise.state = REJECTED;
          promise.value = reason;
          promise.notify();
      }
  };

  p$1.notify = function notify() {
      var promise = this;

      nextTick(function () {
          if (promise.state !== PENDING) {
              while (promise.deferred.length) {
                  var deferred = promise.deferred.shift(),
                      onResolved = deferred[0],
                      onRejected = deferred[1],
                      resolve = deferred[2],
                      reject = deferred[3];

                  try {
                      if (promise.state === RESOLVED) {
                          if (typeof onResolved === 'function') {
                              resolve(onResolved.call(undefined, promise.value));
                          } else {
                              resolve(promise.value);
                          }
                      } else if (promise.state === REJECTED) {
                          if (typeof onRejected === 'function') {
                              resolve(onRejected.call(undefined, promise.value));
                          } else {
                              reject(promise.value);
                          }
                      }
                  } catch (e) {
                      reject(e);
                  }
              }
          }
      });
  };

  p$1.then = function then(onResolved, onRejected) {
      var promise = this;

      return new Promise$2(function (resolve, reject) {
          promise.deferred.push([onResolved, onRejected, resolve, reject]);
          promise.notify();
      });
  };

  p$1.catch = function (onRejected) {
      return this.then(undefined, onRejected);
  };

  var PromiseObj = window.Promise || Promise$2;

  function Promise$1(executor, context) {

      if (executor instanceof PromiseObj) {
          this.promise = executor;
      } else {
          this.promise = new PromiseObj(executor.bind(context));
      }

      this.context = context;
  }

  Promise$1.all = function (iterable, context) {
      return new Promise$1(PromiseObj.all(iterable), context);
  };

  Promise$1.resolve = function (value, context) {
      return new Promise$1(PromiseObj.resolve(value), context);
  };

  Promise$1.reject = function (reason, context) {
      return new Promise$1(PromiseObj.reject(reason), context);
  };

  Promise$1.race = function (iterable, context) {
      return new Promise$1(PromiseObj.race(iterable), context);
  };

  var p = Promise$1.prototype;

  p.bind = function (context) {
      this.context = context;
      return this;
  };

  p.then = function (fulfilled, rejected) {

      if (fulfilled && fulfilled.bind && this.context) {
          fulfilled = fulfilled.bind(this.context);
      }

      if (rejected && rejected.bind && this.context) {
          rejected = rejected.bind(this.context);
      }

      this.promise = this.promise.then(fulfilled, rejected);

      return this;
  };

  p.catch = function (rejected) {

      if (rejected && rejected.bind && this.context) {
          rejected = rejected.bind(this.context);
      }

      this.promise = this.promise.catch(rejected);

      return this;
  };

  p.finally = function (callback) {

      return this.then(function (value) {
          callback.call(this);
          return value;
      }, function (reason) {
          callback.call(this);
          return PromiseObj.reject(reason);
      });
  };

  p.success = function (callback) {

      warn('The `success` method has been deprecated. Use the `then` method instead.');

      return this.then(function (response) {
          return callback.call(this, response.data, response.status, response) || response;
      });
  };

  p.error = function (callback) {

      warn('The `error` method has been deprecated. Use the `catch` method instead.');

      return this.catch(function (response) {
          return callback.call(this, response.data, response.status, response) || response;
      });
  };

  p.always = function (callback) {

      warn('The `always` method has been deprecated. Use the `finally` method instead.');

      var cb = function cb(response) {
          return callback.call(this, response.data, response.status, response) || response;
      };

      return this.then(cb, cb);
  };

  function xdrClient (request) {
      return new Promise$1(function (resolve) {

          var xdr = new XDomainRequest(),
              response = { request: request },
              handler;

          request.cancel = function () {
              xdr.abort();
          };

          xdr.open(request.method, Url(request), true);

          handler = function handler(event) {

              response.data = xdr.responseText;
              response.status = xdr.status;
              response.statusText = xdr.statusText || '';

              resolve(response);
          };

          xdr.timeout = 0;
          xdr.onload = handler;
          xdr.onabort = handler;
          xdr.onerror = handler;
          xdr.ontimeout = function () {};
          xdr.onprogress = function () {};

          xdr.send(request.data);
      });
  }

  var originUrl = Url.parse(location.href);
  var supportCors = 'withCredentials' in new XMLHttpRequest();

  var exports$1 = {
      request: function request(_request) {

          if (_request.crossOrigin === null) {
              _request.crossOrigin = crossOrigin(_request);
          }

          if (_request.crossOrigin) {

              if (!supportCors) {
                  _request.client = xdrClient;
              }

              _request.emulateHTTP = false;
          }

          return _request;
      }
  };

  function crossOrigin(request) {

      var requestUrl = Url.parse(Url(request));

      return requestUrl.protocol !== originUrl.protocol || requestUrl.host !== originUrl.host;
  }

  var exports$2 = {
      request: function request(_request) {

          if (_request.emulateJSON && isPlainObject(_request.data)) {
              _request.headers['Content-Type'] = 'application/x-www-form-urlencoded';
              _request.data = Url.params(_request.data);
          }

          if (isObject(_request.data) && /FormData/i.test(_request.data.toString())) {
              delete _request.headers['Content-Type'];
          }

          if (isPlainObject(_request.data)) {
              _request.data = JSON.stringify(_request.data);
          }

          return _request;
      },
      response: function response(_response) {

          try {
              _response.data = JSON.parse(_response.data);
          } catch (e) {}

          return _response;
      }
  };

  function jsonpClient (request) {
      return new Promise$1(function (resolve) {

          var callback = '_jsonp' + Math.random().toString(36).substr(2),
              response = { request: request, data: null },
              handler,
              script;

          request.params[request.jsonp] = callback;
          request.cancel = function () {
              handler({ type: 'cancel' });
          };

          script = document.createElement('script');
          script.src = Url(request);
          script.type = 'text/javascript';
          script.async = true;

          window[callback] = function (data) {
              response.data = data;
          };

          handler = function handler(event) {

              if (event.type === 'load' && response.data !== null) {
                  response.status = 200;
              } else if (event.type === 'error') {
                  response.status = 404;
              } else {
                  response.status = 0;
              }

              resolve(response);

              delete window[callback];
              document.body.removeChild(script);
          };

          script.onload = handler;
          script.onerror = handler;

          document.body.appendChild(script);
      });
  }

  var exports$3 = {
      request: function request(_request) {

          if (_request.method == 'JSONP') {
              _request.client = jsonpClient;
          }

          return _request;
      }
  };

  var exports$4 = {
      request: function request(_request) {

          if (isFunction(_request.beforeSend)) {
              _request.beforeSend.call(this, _request);
          }

          return _request;
      }
  };

  /**
   * HTTP method override Interceptor.
   */

  var exports$5 = {
      request: function request(_request) {

          if (_request.emulateHTTP && /^(PUT|PATCH|DELETE)$/i.test(_request.method)) {
              _request.headers['X-HTTP-Method-Override'] = _request.method;
              _request.method = 'POST';
          }

          return _request;
      }
  };

  var exports$6 = {
      request: function request(_request) {

          _request.method = _request.method.toUpperCase();
          _request.headers = extend({}, Http.headers.common, !_request.crossOrigin ? Http.headers.custom : {}, Http.headers[_request.method.toLowerCase()], _request.headers);

          if (isPlainObject(_request.data) && /^(GET|JSONP)$/i.test(_request.method)) {
              extend(_request.params, _request.data);
              delete _request.data;
          }

          return _request;
      }
  };

  /**
   * Timeout Interceptor.
   */

  var exports$7 = function exports() {

      var timeout;

      return {
          request: function request(_request) {

              if (_request.timeout) {
                  timeout = setTimeout(function () {
                      _request.cancel();
                  }, _request.timeout);
              }

              return _request;
          },
          response: function response(_response) {

              clearTimeout(timeout);

              return _response;
          }
      };
  };

  function interceptor (handler, vm) {

      return function (client) {

          if (isFunction(handler)) {
              handler = handler.call(vm, Promise$1);
          }

          return function (request) {

              if (isFunction(handler.request)) {
                  request = handler.request.call(vm, request);
              }

              return when(request, function (request) {
                  return when(client(request), function (response) {

                      if (isFunction(handler.response)) {
                          response = handler.response.call(vm, response);
                      }

                      return response;
                  });
              });
          };
      };
  }

  function when(value, fulfilled, rejected) {

      var promise = Promise$1.resolve(value);

      if (arguments.length < 2) {
          return promise;
      }

      return promise.then(fulfilled, rejected);
  }

  function xhrClient (request) {
      return new Promise$1(function (resolve) {

          var xhr = new XMLHttpRequest(),
              response = { request: request },
              handler;

          request.cancel = function () {
              xhr.abort();
          };

          xhr.open(request.method, Url(request), true);

          handler = function handler(event) {

              response.data = 'response' in xhr ? xhr.response : xhr.responseText;
              response.status = xhr.status === 1223 ? 204 : xhr.status; // IE9 status bug
              response.statusText = trim(xhr.statusText || '');
              response.headers = xhr.getAllResponseHeaders();

              resolve(response);
          };

          xhr.timeout = 0;
          xhr.onload = handler;
          xhr.onabort = handler;
          xhr.onerror = handler;
          xhr.ontimeout = function () {};
          xhr.onprogress = function () {};

          if (isPlainObject(request.xhr)) {
              extend(xhr, request.xhr);
          }

          if (isPlainObject(request.upload)) {
              extend(xhr.upload, request.upload);
          }

          each(request.headers || {}, function (value, header) {
              xhr.setRequestHeader(header, value);
          });

          xhr.send(request.data);
      });
  }

  function Client (request) {

      var response = (request.client || xhrClient)(request);

      return Promise$1.resolve(response).then(function (response) {

          if (response.headers) {

              var headers = parseHeaders(response.headers);

              response.headers = function (name) {

                  if (name) {
                      return headers[toLower(name)];
                  }

                  return headers;
              };
          }

          response.ok = response.status >= 200 && response.status < 300;

          return response;
      });
  }

  function parseHeaders(str) {

      var headers = {},
          value,
          name,
          i;

      if (isString(str)) {
          each(str.split('\n'), function (row) {

              i = row.indexOf(':');
              name = trim(toLower(row.slice(0, i)));
              value = trim(row.slice(i + 1));

              if (headers[name]) {

                  if (isArray(headers[name])) {
                      headers[name].push(value);
                  } else {
                      headers[name] = [headers[name], value];
                  }
              } else {

                  headers[name] = value;
              }
          });
      }

      return headers;
  }

  /**
   * Service for sending network requests.
   */

  var jsonType = { 'Content-Type': 'application/json' };

  function Http(url, options) {

      var self = this || {},
          client = Client,
          request,
          promise;

      Http.interceptors.forEach(function (handler) {
          client = interceptor(handler, self.$vm)(client);
      });

      options = isObject(url) ? url : extend({ url: url }, options);
      request = merge({}, Http.options, self.$options, options);
      promise = client(request).bind(self.$vm).then(function (response) {

          return response.ok ? response : Promise$1.reject(response);
      }, function (response) {

          if (response instanceof Error) {
              error(response);
          }

          return Promise$1.reject(response);
      });

      if (request.success) {
          promise.success(request.success);
      }

      if (request.error) {
          promise.error(request.error);
      }

      return promise;
  }

  Http.options = {
      method: 'get',
      data: '',
      params: {},
      headers: {},
      xhr: null,
      upload: null,
      jsonp: 'callback',
      beforeSend: null,
      crossOrigin: null,
      emulateHTTP: false,
      emulateJSON: false,
      timeout: 0
  };

  Http.headers = {
      put: jsonType,
      post: jsonType,
      patch: jsonType,
      delete: jsonType,
      common: { 'Accept': 'application/json, text/plain, */*' },
      custom: { 'X-Requested-With': 'XMLHttpRequest' }
  };

  Http.interceptors = [exports$4, exports$7, exports$3, exports$5, exports$2, exports$6, exports$1];

  ['get', 'put', 'post', 'patch', 'delete', 'jsonp'].forEach(function (method) {

      Http[method] = function (url, data, success, options) {

          if (isFunction(data)) {
              options = success;
              success = data;
              data = undefined;
          }

          if (isObject(success)) {
              options = success;
              success = undefined;
          }

          return this(url, extend({ method: method, data: data, success: success }, options));
      };
  });

  function Resource(url, params, actions, options) {

      var self = this || {},
          resource = {};

      actions = extend({}, Resource.actions, actions);

      each(actions, function (action, name) {

          action = merge({ url: url, params: params || {} }, options, action);

          resource[name] = function () {
              return (self.$http || Http)(opts(action, arguments));
          };
      });

      return resource;
  }

  function opts(action, args) {

      var options = extend({}, action),
          params = {},
          data,
          success,
          error;

      switch (args.length) {

          case 4:

              error = args[3];
              success = args[2];

          case 3:
          case 2:

              if (isFunction(args[1])) {

                  if (isFunction(args[0])) {

                      success = args[0];
                      error = args[1];

                      break;
                  }

                  success = args[1];
                  error = args[2];
              } else {

                  params = args[0];
                  data = args[1];
                  success = args[2];

                  break;
              }

          case 1:

              if (isFunction(args[0])) {
                  success = args[0];
              } else if (/^(POST|PUT|PATCH)$/i.test(options.method)) {
                  data = args[0];
              } else {
                  params = args[0];
              }

              break;

          case 0:

              break;

          default:

              throw 'Expected up to 4 arguments [params, data, success, error], got ' + args.length + ' arguments';
      }

      options.data = data;
      options.params = extend({}, options.params, params);

      if (success) {
          options.success = success;
      }

      if (error) {
          options.error = error;
      }

      return options;
  }

  Resource.actions = {

      get: { method: 'GET' },
      save: { method: 'POST' },
      query: { method: 'GET' },
      update: { method: 'PUT' },
      remove: { method: 'DELETE' },
      delete: { method: 'DELETE' }

  };

  function plugin(Vue) {

      if (plugin.installed) {
          return;
      }

      Util(Vue);

      Vue.url = Url;
      Vue.http = Http;
      Vue.resource = Resource;
      Vue.Promise = Promise$1;

      Object.defineProperties(Vue.prototype, {

          $url: {
              get: function get() {
                  return options(Vue.url, this, this.$options.url);
              }
          },

          $http: {
              get: function get() {
                  return options(Vue.http, this, this.$options.http);
              }
          },

          $resource: {
              get: function get() {
                  return Vue.resource.bind(this);
              }
          },

          $promise: {
              get: function get() {
                  var _this = this;

                  return function (executor) {
                      return new Vue.Promise(executor, _this);
                  };
              }
          }

      });
  }

  if (typeof window !== 'undefined' && window.Vue) {
      window.Vue.use(plugin);
  }

  return plugin;

}));
/*!
 * vue-validator v2.1.3
 * (c) 2016 kazuya kawaguchi
 * Released under the MIT License.
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.VueValidator = factory());
}(this, function () { 'use strict';

  var babelHelpers = {};
  babelHelpers.typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
  };

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  babelHelpers.createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  babelHelpers.inherits = function (subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
    }

    subClass.prototype = Object.create(superClass && superClass.prototype, {
      constructor: {
        value: subClass,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  };

  babelHelpers.possibleConstructorReturn = function (self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return call && (typeof call === "object" || typeof call === "function") ? call : self;
  };

  babelHelpers;

  /**
   * Utilties
   */

  // export default for holding the Vue reference
  var exports$1 = {};
  /**
   * warn
   *
   * @param {String} msg
   * @param {Error} [err]
   *
   */

  function warn(msg, err) {
    if (window.console) {
      console.warn('[vue-validator] ' + msg);
      if (err) {
        console.warn(err.stack);
      }
    }
  }

  /**
   * empty
   *
   * @param {Array|Object} target
   * @return {Boolean}
   */

  function empty(target) {
    if (target === null || target === undefined) {
      return true;
    }

    if (Array.isArray(target)) {
      if (target.length > 0) {
        return false;
      }
      if (target.length === 0) {
        return true;
      }
    } else if (exports$1.Vue.util.isPlainObject(target)) {
      for (var key in target) {
        if (exports$1.Vue.util.hasOwn(target, key)) {
          return false;
        }
      }
    }

    return true;
  }

  /**
   * each
   *
   * @param {Array|Object} target
   * @param {Function} iterator
   * @param {Object} [context]
   */

  function each(target, iterator, context) {
    if (Array.isArray(target)) {
      for (var i = 0; i < target.length; i++) {
        iterator.call(context || target[i], target[i], i);
      }
    } else if (exports$1.Vue.util.isPlainObject(target)) {
      var hasOwn = exports$1.Vue.util.hasOwn;
      for (var key in target) {
        if (hasOwn(target, key)) {
          iterator.call(context || target[key], target[key], key);
        }
      }
    }
  }

  /**
   * pull
   *
   * @param {Array} arr
   * @param {Object} item
   * @return {Object|null}
   */

  function pull(arr, item) {
    var index = exports$1.Vue.util.indexOf(arr, item);
    return ~index ? arr.splice(index, 1) : null;
  }

  /**
   * trigger
   *
   * @param {Element} el
   * @param {String} event
   * @param {Object} [args]
   */

  function trigger(el, event, args) {
    var e = document.createEvent('HTMLEvents');
    e.initEvent(event, true, false);

    if (args) {
      for (var prop in args) {
        e[prop] = args[prop];
      }
    }

    // Due to Firefox bug, events fired on disabled
    // non-attached form controls can throw errors
    try {
      el.dispatchEvent(e);
    } catch (e) {}
  }

  /**
   * Forgiving check for a promise
   *
   * @param {Object} p
   * @return {Boolean}
   */

  function isPromise(p) {
    return p && typeof p.then === 'function';
  }

  /**
   * Togging classes
   *
   * @param {Element} el
   * @param {String} key
   * @param {Function} fn
   */

  function toggleClasses(el, key, fn) {
    key = key.trim();
    if (key.indexOf(' ') === -1) {
      fn(el, key);
      return;
    }

    var keys = key.split(/\s+/);
    for (var i = 0, l = keys.length; i < l; i++) {
      fn(el, keys[i]);
    }
  }

  /**
   * Fundamental validate functions
   */

  /**
   * required
   *
   * This function validate whether the value has been filled out.
   *
   * @param {*} val
   * @return {Boolean}
   */

  function required(val) {
    if (Array.isArray(val)) {
      if (val.length !== 0) {
        var valid = true;
        for (var i = 0, l = val.length; i < l; i++) {
          valid = required(val[i]);
          if (!valid) {
            break;
          }
        }
        return valid;
      } else {
        return false;
      }
    } else if (typeof val === 'number' || typeof val === 'function') {
      return true;
    } else if (typeof val === 'boolean') {
      return val;
    } else if (typeof val === 'string') {
      return val.length > 0;
    } else if (val !== null && (typeof val === 'undefined' ? 'undefined' : babelHelpers.typeof(val)) === 'object') {
      return Object.keys(val).length > 0;
    } else if (val === null || val === undefined) {
      return false;
    }
  }

  /**
   * pattern
   *
   * This function validate whether the value matches the regex pattern
   *
   * @param val
   * @param {String} pat
   * @return {Boolean}
   */

  function pattern(val, pat) {
    if (typeof pat !== 'string') {
      return false;
    }

    var match = pat.match(new RegExp('^/(.*?)/([gimy]*)$'));
    if (!match) {
      return false;
    }

    return new RegExp(match[1], match[2]).test(val);
  }

  /**
   * minlength
   *
   * This function validate whether the minimum length.
   *
   * @param {String|Array} val
   * @param {String|Number} min
   * @return {Boolean}
   */

  function minlength(val, min) {
    if (typeof val === 'string') {
      return isInteger(min, 10) && val.length >= parseInt(min, 10);
    } else if (Array.isArray(val)) {
      return val.length >= parseInt(min, 10);
    } else {
      return false;
    }
  }

  /**
   * maxlength
   *
   * This function validate whether the maximum length.
   *
   * @param {String|Array} val
   * @param {String|Number} max
   * @return {Boolean}
   */

  function maxlength(val, max) {
    if (typeof val === 'string') {
      return isInteger(max, 10) && val.length <= parseInt(max, 10);
    } else if (Array.isArray(val)) {
      return val.length <= parseInt(max, 10);
    } else {
      return false;
    }
  }

  /**
   * min
   *
   * This function validate whether the minimum value of the numberable value.
   *
   * @param {*} val
   * @param {*} arg minimum
   * @return {Boolean}
   */

  function min(val, arg) {
    return !isNaN(+val) && !isNaN(+arg) && +val >= +arg;
  }

  /**
   * max
   *
   * This function validate whether the maximum value of the numberable value.
   *
   * @param {*} val
   * @param {*} arg maximum
   * @return {Boolean}
   */

  function max(val, arg) {
    return !isNaN(+val) && !isNaN(+arg) && +val <= +arg;
  }

  /**
   * isInteger
   *
   * This function check whether the value of the string is integer.
   *
   * @param {String} val
   * @return {Boolean}
   * @private
   */

  function isInteger(val) {
    return (/^(-?[1-9]\d*|0)$/.test(val)
    );
  }

var validators = Object.freeze({
    required: required,
    pattern: pattern,
    minlength: minlength,
    maxlength: maxlength,
    min: min,
    max: max
  });

  function Asset (Vue) {
    var extend = Vue.util.extend;

    // set global validators asset
    var assets = Object.create(null);
    extend(assets, validators);
    Vue.options.validators = assets;

    // set option merge strategy
    var strats = Vue.config.optionMergeStrategies;
    if (strats) {
      strats.validators = function (parent, child) {
        if (!child) {
          return parent;
        }
        if (!parent) {
          return child;
        }
        var ret = Object.create(null);
        extend(ret, parent);
        for (var key in child) {
          ret[key] = child[key];
        }
        return ret;
      };
    }

    /**
     * Register or retrieve a global validator definition.
     *
     * @param {String} id
     * @param {Function} definition
     */

    Vue.validator = function (id, definition) {
      if (!definition) {
        return Vue.options['validators'][id];
      } else {
        Vue.options['validators'][id] = definition;
      }
    };
  }

  function Override (Vue) {
    // override _init
    var init = Vue.prototype._init;
    Vue.prototype._init = function (options) {
      if (!this._validatorMaps) {
        this._validatorMaps = Object.create(null);
      }
      init.call(this, options);
    };

    // override _destroy
    var destroy = Vue.prototype._destroy;
    Vue.prototype._destroy = function () {
      destroy.apply(this, arguments);
      this._validatorMaps = null;
    };
  }

  var VALIDATE_UPDATE = '__vue-validator-validate-update__';
  var PRIORITY_VALIDATE = 16;
  var PRIORITY_VALIDATE_CLASS = 32;
  var REGEX_FILTER = /[^|]\|[^|]/;
  var REGEX_VALIDATE_DIRECTIVE = /^v-validate(?:$|:(.*)$)/;
  var REGEX_EVENT = /^v-on:|^@/;

  var classId = 0; // ID for validation class

  function ValidateClass (Vue) {
    var vIf = Vue.directive('if');
    var FragmentFactory = Vue.FragmentFactory;
    var _Vue$util = Vue.util;
    var toArray = _Vue$util.toArray;
    var replace = _Vue$util.replace;
    var createAnchor = _Vue$util.createAnchor;

    /**
     * `v-validate-class` directive
     */

    Vue.directive('validate-class', {
      terminal: true,
      priority: vIf.priority + PRIORITY_VALIDATE_CLASS,

      bind: function bind() {
        var _this = this;

        var id = String(classId++);
        this.setClassIds(this.el, id);

        this.vm.$on(VALIDATE_UPDATE, this.cb = function (classIds, validation, results) {
          if (classIds.indexOf(id) > -1) {
            validation.updateClasses(results, _this.frag.node);
          }
        });

        this.setupFragment();
      },
      unbind: function unbind() {
        this.vm.$off(VALIDATE_UPDATE, this.cb);
        this.teardownFragment();
      },
      setClassIds: function setClassIds(el, id) {
        var childNodes = toArray(el.childNodes);
        for (var i = 0, l = childNodes.length; i < l; i++) {
          var element = childNodes[i];
          if (element.nodeType === 1) {
            var hasAttrs = element.hasAttributes();
            var attrs = hasAttrs && toArray(element.attributes);
            for (var k = 0, _l = attrs.length; k < _l; k++) {
              var attr = attrs[k];
              if (attr.name.match(REGEX_VALIDATE_DIRECTIVE)) {
                var existingId = element.getAttribute(VALIDATE_UPDATE);
                var value = existingId ? existingId + ',' + id : id;
                element.setAttribute(VALIDATE_UPDATE, value);
              }
            }
          }

          if (element.hasChildNodes()) {
            this.setClassIds(element, id);
          }
        }
      },
      setupFragment: function setupFragment() {
        this.anchor = createAnchor('v-validate-class');
        replace(this.el, this.anchor);

        this.factory = new FragmentFactory(this.vm, this.el);
        this.frag = this.factory.create(this._host, this._scope, this._frag);
        this.frag.before(this.anchor);
      },
      teardownFragment: function teardownFragment() {
        if (this.frag) {
          this.frag.remove();
          this.frag = null;
          this.factory = null;
        }

        replace(this.anchor, this.el);
        this.anchor = null;
      }
    });
  }

  function Validate (Vue) {
    var vIf = Vue.directive('if');
    var FragmentFactory = Vue.FragmentFactory;
    var parseDirective = Vue.parsers.directive.parseDirective;
    var _Vue$util = Vue.util;
    var inBrowser = _Vue$util.inBrowser;
    var bind = _Vue$util.bind;
    var on = _Vue$util.on;
    var off = _Vue$util.off;
    var createAnchor = _Vue$util.createAnchor;
    var replace = _Vue$util.replace;
    var camelize = _Vue$util.camelize;
    var isPlainObject = _Vue$util.isPlainObject;

    // Test for IE10/11 textarea placeholder clone bug

    function checkTextareaCloneBug() {
      if (inBrowser) {
        var t = document.createElement('textarea');
        t.placeholder = 't';
        return t.cloneNode(true).value === 't';
      } else {
        return false;
      }
    }
    var hasTextareaCloneBug = checkTextareaCloneBug();

    /**
     * `v-validate` directive
     */

    Vue.directive('validate', {
      terminal: true,
      priority: vIf.priority + PRIORITY_VALIDATE,
      params: ['group', 'field', 'detect-blur', 'detect-change', 'initial', 'classes'],

      paramWatchers: {
        detectBlur: function detectBlur(val, old) {
          if (this._invalid) {
            return;
          }
          this.validation.detectBlur = this.isDetectBlur(val);
          this.validator.validate(this.field);
        },
        detectChange: function detectChange(val, old) {
          if (this._invalid) {
            return;
          }
          this.validation.detectChange = this.isDetectChange(val);
          this.validator.validate(this.field);
        }
      },

      bind: function bind() {
        var el = this.el;

        if ('development' !== 'production' && el.__vue__) {
          warn('v-validate="' + this.expression + '" cannot be used on an instance root element.');
          this._invalid = true;
          return;
        }

        if ('development' !== 'production' && (el.hasAttribute('v-if') || el.hasAttribute('v-for'))) {
          warn('v-validate cannot be used `v-if` or `v-for` build-in terminal directive ' + 'on an element. these is wrapped with `<template>` or other tags: ' + '(e.g. <validator name="validator">' + '<template v-if="hidden">' + '<input type="text" v-validate:field1="[\'required\']">' + '</template>' + '</validator>).');
          this._invalid = true;
          return;
        }

        if ('development' !== 'production' && !(this.arg || this.params.field)) {
          warn('you need specify field name for v-validate directive.');
          this._invalid = true;
          return;
        }

        var validatorName = this.vm.$options._validator;
        if ('development' !== 'production' && !validatorName) {
          warn('you need to wrap the elements to be validated in a <validator> element: ' + '(e.g. <validator name="validator">' + '<input type="text" v-validate:field1="[\'required\']">' + '</validator>).');
          this._invalid = true;
          return;
        }

        var raw = el.getAttribute('v-model');

        var _parseModelRaw = this.parseModelRaw(raw);

        var model = _parseModelRaw.model;
        var filters = _parseModelRaw.filters;

        this.model = model;

        this.setupFragment();
        this.setupValidate(validatorName, model, filters);
        this.listen();
      },
      update: function update(value, old) {
        if (!value || this._invalid) {
          return;
        }

        if (isPlainObject(value)) {
          this.handleObject(value);
        } else if (Array.isArray(value)) {
          this.handleArray(value);
        }

        var options = { field: this.field, noopable: this._initialNoopValidation };
        if (this.frag) {
          options.el = this.frag.node;
        }
        this.validator.validate(options);

        if (this._initialNoopValidation) {
          this._initialNoopValidation = null;
        }
      },
      unbind: function unbind() {
        if (this._invalid) {
          return;
        }

        this.unlisten();
        this.teardownValidate();
        this.teardownFragment();

        this.model = null;
      },
      parseModelRaw: function parseModelRaw(raw) {
        if (REGEX_FILTER.test(raw)) {
          var parsed = parseDirective(raw);
          return { model: parsed.expression, filters: parsed.filters };
        } else {
          return { model: raw };
        }
      },
      setupValidate: function setupValidate(name, model, filters) {
        var params = this.params;
        var validator = this.validator = this.vm._validatorMaps[name];

        this.field = camelize(this.arg ? this.arg : params.field);

        this.validation = validator.manageValidation(this.field, model, this.vm, this.getElementFrom(this.frag), this._scope, filters, params.initial, this.isDetectBlur(params.detectBlur), this.isDetectChange(params.detectChange));

        isPlainObject(params.classes) && this.validation.setValidationClasses(params.classes);

        params.group && validator.addGroupValidation(params.group, this.field);

        this._initialNoopValidation = this.isInitialNoopValidation(params.initial);
      },
      listen: function listen() {
        var model = this.model;
        var validation = this.validation;
        var el = this.getElementFrom(this.frag);

        this.onBlur = bind(validation.listener, validation);
        on(el, 'blur', this.onBlur);
        if ((el.type === 'radio' || el.tagName === 'SELECT') && !model) {
          this.onChange = bind(validation.listener, validation);
          on(el, 'change', this.onChange);
        } else if (el.type === 'checkbox') {
          if (!model) {
            this.onChange = bind(validation.listener, validation);
            on(el, 'change', this.onChange);
          } else {
            this.onClick = bind(validation.listener, validation);
            on(el, 'click', this.onClick);
          }
        } else {
          if (!model) {
            this.onInput = bind(validation.listener, validation);
            on(el, 'input', this.onInput);
          }
        }
      },
      unlisten: function unlisten() {
        var el = this.getElementFrom(this.frag);

        if (this.onInput) {
          off(el, 'input', this.onInput);
          this.onInput = null;
        }

        if (this.onClick) {
          off(el, 'click', this.onClick);
          this.onClick = null;
        }

        if (this.onChange) {
          off(el, 'change', this.onChange);
          this.onChange = null;
        }

        if (this.onBlur) {
          off(el, 'blur', this.onBlur);
          this.onBlur = null;
        }
      },
      teardownValidate: function teardownValidate() {
        if (this.validator && this.validation) {
          var el = this.getElementFrom(this.frag);

          this.params.group && this.validator.removeGroupValidation(this.params.group, this.field);

          this.validator.unmanageValidation(this.field, el);

          this.validator = null;
          this.validation = null;
          this.field = null;
        }
      },
      setupFragment: function setupFragment() {
        this.anchor = createAnchor('v-validate');
        replace(this.el, this.anchor);

        this.factory = new FragmentFactory(this.vm, this.shimNode(this.el));
        this.frag = this.factory.create(this._host, this._scope, this._frag);
        this.frag.before(this.anchor);
      },
      teardownFragment: function teardownFragment() {
        if (this.frag) {
          this.frag.remove();
          this.frag = null;
          this.factory = null;
        }

        replace(this.anchor, this.el);
        this.anchor = null;
      },
      handleArray: function handleArray(value) {
        var _this = this;

        each(value, function (val) {
          _this.validation.setValidation(val);
        });
      },
      handleObject: function handleObject(value) {
        var _this2 = this;

        each(value, function (val, key) {
          if (isPlainObject(val)) {
            if ('rule' in val) {
              var msg = 'message' in val ? val.message : null;
              var initial = 'initial' in val ? val.initial : null;
              _this2.validation.setValidation(key, val.rule, msg, initial);
            }
          } else {
            _this2.validation.setValidation(key, val);
          }
        });
      },
      isDetectBlur: function isDetectBlur(detectBlur) {
        return detectBlur === undefined || detectBlur === 'on' || detectBlur === true;
      },
      isDetectChange: function isDetectChange(detectChange) {
        return detectChange === undefined || detectChange === 'on' || detectChange === true;
      },
      isInitialNoopValidation: function isInitialNoopValidation(initial) {
        return initial === 'off' || initial === false;
      },
      shimNode: function shimNode(node) {
        var ret = node;
        if (hasTextareaCloneBug) {
          if (node.tagName === 'TEXTAREA') {
            ret = node.cloneNode(true);
            ret.value = node.value;
            var i = ret.childNodes.length;
            while (i--) {
              ret.removeChild(ret.childNodes[i]);
            }
          }
        }
        return ret;
      },
      getElementFrom: function getElementFrom(frag) {
        return frag.single ? frag.node : frag.node.nextSibling;
      }
    });
  }

  /**
   * BaseValidation class
   */

  var BaseValidation = function () {
    function BaseValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, BaseValidation);

      this.field = field;
      this.touched = false;
      this.dirty = false;
      this.modified = false;

      this._modified = false;
      this._model = model;
      this._filters = filters;
      this._validator = validator;
      this._vm = vm;
      this._el = el;
      this._forScope = scope;
      this._init = this._getValue(el);
      this._validators = {};
      this._detectBlur = detectBlur;
      this._detectChange = detectChange;
      this._classes = {};
    }

    BaseValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this = this;

      var scope = this._getScope();
      var model = this._model;

      this._initial = initial;

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        this._classIds = classIds.split(',');
      }

      if (model) {
        el.value = this._evalModel(model, this._filters);
        this._unwatch = scope.$watch(model, function (val, old) {
          if (val !== old) {
            if (_this.guardValidate(el, 'input')) {
              return;
            }

            _this.handleValidate(el, { noopable: _this._initial });
            if (_this._initial) {
              _this._initial = null;
            }
          }
        }, { deep: true });
      }
    };

    BaseValidation.prototype.unmanageElement = function unmanageElement(el) {
      this._unwatch && this._unwatch();
    };

    BaseValidation.prototype.setValidation = function setValidation(name, arg, msg, initial) {
      var validator = this._validators[name];
      if (!validator) {
        validator = this._validators[name] = {};
        validator.name = name;
      }

      validator.arg = arg;
      if (msg) {
        validator.msg = msg;
      }

      if (initial) {
        validator.initial = initial;
        validator._isNoopable = true;
      }
    };

    BaseValidation.prototype.setValidationClasses = function setValidationClasses(classes) {
      var _this2 = this;

      each(classes, function (value, key) {
        _this2._classes[key] = value;
      });
    };

    BaseValidation.prototype.willUpdateFlags = function willUpdateFlags() {
      var touched = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];

      touched && this.willUpdateTouched(this._el, 'blur');
      this.willUpdateDirty(this._el);
      this.willUpdateModified(this._el);
    };

    BaseValidation.prototype.willUpdateTouched = function willUpdateTouched(el, type) {
      if (type && type === 'blur') {
        this.touched = true;
        this._fireEvent(el, 'touched');
      }
    };

    BaseValidation.prototype.willUpdateDirty = function willUpdateDirty(el) {
      if (!this.dirty && this._checkModified(el)) {
        this.dirty = true;
        this._fireEvent(el, 'dirty');
      }
    };

    BaseValidation.prototype.willUpdateModified = function willUpdateModified(el) {
      this.modified = this._checkModified(el);
      if (this._modified !== this.modified) {
        this._fireEvent(el, 'modified', { modified: this.modified });
        this._modified = this.modified;
      }
    };

    BaseValidation.prototype.listener = function listener(e) {
      if (this.guardValidate(e.target, e.type)) {
        return;
      }

      this.handleValidate(e.target, { type: e.type });
    };

    BaseValidation.prototype.handleValidate = function handleValidate(el) {
      var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

      var _ref$type = _ref.type;
      var type = _ref$type === undefined ? null : _ref$type;
      var _ref$noopable = _ref.noopable;
      var noopable = _ref$noopable === undefined ? false : _ref$noopable;

      this.willUpdateTouched(el, type);
      this.willUpdateDirty(el);
      this.willUpdateModified(el);

      this._validator.validate({ field: this.field, el: el, noopable: noopable });
    };

    BaseValidation.prototype.validate = function validate(cb) {
      var _this3 = this;

      var noopable = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];
      var el = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

      var _ = exports$1.Vue.util;

      var results = {};
      var errors = [];
      var valid = true;

      this._runValidators(function (descriptor, name, done) {
        var asset = _this3._resolveValidator(name);
        var validator = null;
        var msg = null;

        if (_.isPlainObject(asset)) {
          if (asset.check && typeof asset.check === 'function') {
            validator = asset.check;
          }
          if (asset.message) {
            msg = asset.message;
          }
        } else if (typeof asset === 'function') {
          validator = asset;
        }

        if (descriptor.msg) {
          msg = descriptor.msg;
        }

        if (noopable) {
          results[name] = false;
          return done();
        }

        if (descriptor._isNoopable) {
          results[name] = false;
          descriptor._isNoopable = null;
          return done();
        }

        if (validator) {
          var value = _this3._getValue(_this3._el);
          _this3._invokeValidator(_this3._vm, validator, value, descriptor.arg, function (ret, err) {
            if (!ret) {
              valid = false;
              if (err) {
                // async error message
                errors.push({ validator: name, message: err });
                results[name] = err;
              } else if (msg) {
                var error = { validator: name };
                error.message = typeof msg === 'function' ? msg.call(_this3._vm, _this3.field, descriptor.arg) : msg;
                errors.push(error);
                results[name] = error.message;
              } else {
                results[name] = !ret;
              }
            } else {
              results[name] = !ret;
            }

            done();
          });
        } else {
          done();
        }
      }, function () {
        // finished
        _this3._fireEvent(_this3._el, valid ? 'valid' : 'invalid');

        var props = {
          valid: valid,
          invalid: !valid,
          touched: _this3.touched,
          untouched: !_this3.touched,
          dirty: _this3.dirty,
          pristine: !_this3.dirty,
          modified: _this3.modified
        };
        if (!empty(errors)) {
          props.errors = errors;
        }
        _.extend(results, props);

        _this3.willUpdateClasses(results, el);

        cb(results);
      });
    };

    BaseValidation.prototype.resetFlags = function resetFlags() {
      this.touched = false;
      this.dirty = false;
      this.modified = false;
      this._modified = false;
    };

    BaseValidation.prototype.reset = function reset() {
      each(this._validators, function (descriptor, key) {
        if (descriptor.initial && !descriptor._isNoopable) {
          descriptor._isNoopable = true;
        }
      });
      this.resetFlags();
      this._init = this._getValue(this._el);
    };

    BaseValidation.prototype.willUpdateClasses = function willUpdateClasses(results) {
      var _this4 = this;

      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      if (this._checkClassIds(el)) {
        (function () {
          var classIds = _this4._getClassIds(el);
          _this4.vm.$nextTick(function () {
            _this4.vm.$emit(VALIDATE_UPDATE, classIds, _this4, results);
          });
        })();
      } else {
        this.updateClasses(results);
      }
    };

    BaseValidation.prototype.updateClasses = function updateClasses(results) {
      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      this._updateClasses(el || this._el, results);
    };

    BaseValidation.prototype.guardValidate = function guardValidate(el, type) {
      if (type && type === 'blur' && !this.detectBlur) {
        return true;
      }

      if (type && type === 'input' && !this.detectChange) {
        return true;
      }

      if (type && type === 'change' && !this.detectChange) {
        return true;
      }

      if (type && type === 'click' && !this.detectChange) {
        return true;
      }

      return false;
    };

    BaseValidation.prototype._getValue = function _getValue(el) {
      return el.value;
    };

    BaseValidation.prototype._getScope = function _getScope() {
      return this._forScope || this._vm;
    };

    BaseValidation.prototype._getClassIds = function _getClassIds(el) {
      return this._classIds;
    };

    BaseValidation.prototype._checkModified = function _checkModified(target) {
      return this._init !== this._getValue(target);
    };

    BaseValidation.prototype._checkClassIds = function _checkClassIds(el) {
      return this._getClassIds(el);
    };

    BaseValidation.prototype._fireEvent = function _fireEvent(el, type, args) {
      trigger(el, type, args);
    };

    BaseValidation.prototype._evalModel = function _evalModel(model, filters) {
      var scope = this._getScope();

      var val = null;
      if (filters) {
        val = scope.$get(model);
        return filters ? this._applyFilters(val, null, filters) : val;
      } else {
        val = scope.$get(model);
        return val === undefined || val === null ? '' : val;
      }
    };

    BaseValidation.prototype._updateClasses = function _updateClasses(el, results) {
      this._toggleValid(el, results.valid);
      this._toggleTouched(el, results.touched);
      this._togglePristine(el, results.pristine);
      this._toggleModfied(el, results.modified);
    };

    BaseValidation.prototype._toggleValid = function _toggleValid(el, valid) {
      var _util$Vue$util = exports$1.Vue.util;
      var addClass = _util$Vue$util.addClass;
      var removeClass = _util$Vue$util.removeClass;

      var validClass = this._classes.valid || 'valid';
      var invalidClass = this._classes.invalid || 'invalid';

      if (valid) {
        toggleClasses(el, validClass, addClass);
        toggleClasses(el, invalidClass, removeClass);
      } else {
        toggleClasses(el, validClass, removeClass);
        toggleClasses(el, invalidClass, addClass);
      }
    };

    BaseValidation.prototype._toggleTouched = function _toggleTouched(el, touched) {
      var _util$Vue$util2 = exports$1.Vue.util;
      var addClass = _util$Vue$util2.addClass;
      var removeClass = _util$Vue$util2.removeClass;

      var touchedClass = this._classes.touched || 'touched';
      var untouchedClass = this._classes.untouched || 'untouched';

      if (touched) {
        toggleClasses(el, touchedClass, addClass);
        toggleClasses(el, untouchedClass, removeClass);
      } else {
        toggleClasses(el, touchedClass, removeClass);
        toggleClasses(el, untouchedClass, addClass);
      }
    };

    BaseValidation.prototype._togglePristine = function _togglePristine(el, pristine) {
      var _util$Vue$util3 = exports$1.Vue.util;
      var addClass = _util$Vue$util3.addClass;
      var removeClass = _util$Vue$util3.removeClass;

      var pristineClass = this._classes.pristine || 'pristine';
      var dirtyClass = this._classes.dirty || 'dirty';

      if (pristine) {
        toggleClasses(el, pristineClass, addClass);
        toggleClasses(el, dirtyClass, removeClass);
      } else {
        toggleClasses(el, pristineClass, removeClass);
        toggleClasses(el, dirtyClass, addClass);
      }
    };

    BaseValidation.prototype._toggleModfied = function _toggleModfied(el, modified) {
      var _util$Vue$util4 = exports$1.Vue.util;
      var addClass = _util$Vue$util4.addClass;
      var removeClass = _util$Vue$util4.removeClass;

      var modifiedClass = this._classes.modified || 'modified';

      if (modified) {
        toggleClasses(el, modifiedClass, addClass);
      } else {
        toggleClasses(el, modifiedClass, removeClass);
      }
    };

    BaseValidation.prototype._applyFilters = function _applyFilters(value, oldValue, filters, write) {
      var resolveAsset = exports$1.Vue.util.resolveAsset;
      var scope = this._getScope();

      var filter = void 0,
          fn = void 0,
          args = void 0,
          arg = void 0,
          offset = void 0,
          i = void 0,
          l = void 0,
          j = void 0,
          k = void 0;
      for (i = 0, l = filters.length; i < l; i++) {
        filter = filters[i];
        fn = resolveAsset(this._vm.$options, 'filters', filter.name);
        if (!fn) {
          continue;
        }

        fn = write ? fn.write : fn.read || fn;
        if (typeof fn !== 'function') {
          continue;
        }

        args = write ? [value, oldValue] : [value];
        offset = write ? 2 : 1;
        if (filter.args) {
          for (j = 0, k = filter.args.length; j < k; j++) {
            arg = filter.args[j];
            args[j + offset] = arg.dynamic ? scope.$get(arg.value) : arg.value;
          }
        }

        value = fn.apply(this._vm, args);
      }

      return value;
    };

    BaseValidation.prototype._runValidators = function _runValidators(fn, cb) {
      var validators = this._validators;
      var length = Object.keys(validators).length;

      var count = 0;
      each(validators, function (descriptor, name) {
        fn(descriptor, name, function () {
          ++count;
          count >= length && cb();
        });
      });
    };

    BaseValidation.prototype._invokeValidator = function _invokeValidator(vm, validator, val, arg, cb) {
      var future = validator.call(this, val, arg);
      if (typeof future === 'function') {
        // function
        future(function () {
          // resolve
          cb(true);
        }, function (msg) {
          // reject
          cb(false, msg);
        });
      } else if (isPromise(future)) {
        // promise
        future.then(function () {
          // resolve
          cb(true);
        }, function (msg) {
          // reject
          cb(false, msg);
        }).catch(function (err) {
          cb(false, err.message);
        });
      } else {
        // sync
        cb(future);
      }
    };

    BaseValidation.prototype._resolveValidator = function _resolveValidator(name) {
      var resolveAsset = exports$1.Vue.util.resolveAsset;
      return resolveAsset(this._vm.$options, 'validators', name);
    };

    babelHelpers.createClass(BaseValidation, [{
      key: 'vm',
      get: function get() {
        return this._vm;
      }
    }, {
      key: 'el',
      get: function get() {
        return this._el;
      }
    }, {
      key: 'detectChange',
      get: function get() {
        return this._detectChange;
      },
      set: function set(val) {
        this._detectChange = val;
      }
    }, {
      key: 'detectBlur',
      get: function get() {
        return this._detectBlur;
      },
      set: function set(val) {
        this._detectBlur = val;
      }
    }]);
    return BaseValidation;
  }();

  /**
   * CheckboxValidation class
   */

  var CheckboxValidation = function (_BaseValidation) {
    babelHelpers.inherits(CheckboxValidation, _BaseValidation);

    function CheckboxValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, CheckboxValidation);

      var _this = babelHelpers.possibleConstructorReturn(this, _BaseValidation.call(this, field, model, vm, el, scope, validator, filters, detectBlur, detectChange));

      _this._inits = [];
      return _this;
    }

    CheckboxValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this2 = this;

      var scope = this._getScope();
      var item = this._addItem(el, initial);

      var model = item.model = this._model;
      if (model) {
        var value = this._evalModel(model, this._filters);
        if (Array.isArray(value)) {
          this._setChecked(value, item.el);
          item.unwatch = scope.$watch(model, function (val, old) {
            if (val !== old) {
              if (_this2.guardValidate(item.el, 'change')) {
                return;
              }

              _this2.handleValidate(item.el, { noopable: item.initial });
              if (item.initial) {
                item.initial = null;
              }
            }
          });
        } else {
          el.checked = value || false;
          this._init = el.checked;
          item.init = el.checked;
          item.value = el.value;
          item.unwatch = scope.$watch(model, function (val, old) {
            if (val !== old) {
              if (_this2.guardValidate(el, 'change')) {
                return;
              }

              _this2.handleValidate(el, { noopable: item.initial });
              if (item.initial) {
                item.initial = null;
              }
            }
          });
        }
      } else {
        var options = { field: this.field, noopable: initial };
        if (this._checkClassIds(el)) {
          options.el = el;
        }
        this._validator.validate(options);
      }
    };

    CheckboxValidation.prototype.unmanageElement = function unmanageElement(el) {
      var found = -1;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          found = index;
          if (item.unwatch && item.model) {
            item.unwatch();
            item.unwatch = null;
            item.model = null;
          }
        }
      });
      if (found === -1) {
        return;
      }

      this._inits.splice(found, 1);
      this._validator.validate({ field: this.field });
    };

    CheckboxValidation.prototype.willUpdateFlags = function willUpdateFlags() {
      var _this3 = this;

      var touched = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];

      each(this._inits, function (item, index) {
        touched && _this3.willUpdateTouched(item.el, 'blur');
        _this3.willUpdateDirty(item.el);
        _this3.willUpdateModified(item.el);
      });
    };

    CheckboxValidation.prototype.reset = function reset() {
      this.resetFlags();
      each(this._inits, function (item, index) {
        item.init = item.el.checked;
        item.value = item.el.value;
      });
    };

    CheckboxValidation.prototype.updateClasses = function updateClasses(results) {
      var _this4 = this;

      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      if (el) {
        // for another element
        this._updateClasses(el, results);
      } else {
        each(this._inits, function (item, index) {
          _this4._updateClasses(item.el, results);
        });
      }
    };

    CheckboxValidation.prototype._addItem = function _addItem(el, initial) {
      var item = {
        el: el,
        init: el.checked,
        value: el.value,
        initial: initial
      };

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        item.classIds = classIds.split(',');
      }

      this._inits.push(item);
      return item;
    };

    CheckboxValidation.prototype._setChecked = function _setChecked(values, el) {
      for (var i = 0, l = values.length; i < l; i++) {
        var value = values[i];
        if (!el.disabled && el.value === value && !el.checked) {
          el.checked = true;
        }
      }
    };

    CheckboxValidation.prototype._getValue = function _getValue(el) {
      var _this5 = this;

      if (!this._inits || this._inits.length === 0) {
        return el.checked;
      } else {
        var _ret = function () {
          var vals = [];
          each(_this5._inits, function (item, index) {
            item.el.checked && vals.push(item.el.value);
          });
          return {
            v: vals
          };
        }();

        if ((typeof _ret === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret)) === "object") return _ret.v;
      }
    };

    CheckboxValidation.prototype._getClassIds = function _getClassIds(el) {
      var classIds = void 0;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          classIds = item.classIds;
        }
      });
      return classIds;
    };

    CheckboxValidation.prototype._checkModified = function _checkModified(target) {
      var _this6 = this;

      if (this._inits.length === 0) {
        return this._init !== target.checked;
      } else {
        var _ret2 = function () {
          var modified = false;
          each(_this6._inits, function (item, index) {
            if (!modified) {
              modified = item.init !== item.el.checked;
            }
          });
          return {
            v: modified
          };
        }();

        if ((typeof _ret2 === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret2)) === "object") return _ret2.v;
      }
    };

    return CheckboxValidation;
  }(BaseValidation);

  /**
   * RadioValidation class
   */

  var RadioValidation = function (_BaseValidation) {
    babelHelpers.inherits(RadioValidation, _BaseValidation);

    function RadioValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, RadioValidation);

      var _this = babelHelpers.possibleConstructorReturn(this, _BaseValidation.call(this, field, model, vm, el, scope, validator, filters, detectBlur, detectChange));

      _this._inits = [];
      return _this;
    }

    RadioValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this2 = this;

      var scope = this._getScope();
      var item = this._addItem(el, initial);

      var model = item.model = this._model;
      if (model) {
        var value = this._evalModel(model, this._filters);
        this._setChecked(value, el, item);
        item.unwatch = scope.$watch(model, function (val, old) {
          if (val !== old) {
            if (_this2.guardValidate(item.el, 'change')) {
              return;
            }

            _this2.handleValidate(el, { noopable: item.initial });
            if (item.initial) {
              item.initial = null;
            }
          }
        });
      } else {
        var options = { field: this.field, noopable: initial };
        if (this._checkClassIds(el)) {
          options.el = el;
        }
        this._validator.validate(options);
      }
    };

    RadioValidation.prototype.unmanageElement = function unmanageElement(el) {
      var found = -1;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          found = index;
        }
      });
      if (found === -1) {
        return;
      }

      this._inits.splice(found, 1);
      this._validator.validate({ field: this.field });
    };

    RadioValidation.prototype.willUpdateFlags = function willUpdateFlags() {
      var _this3 = this;

      var touched = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];

      each(this._inits, function (item, index) {
        touched && _this3.willUpdateTouched(item.el, 'blur');
        _this3.willUpdateDirty(item.el);
        _this3.willUpdateModified(item.el);
      });
    };

    RadioValidation.prototype.reset = function reset() {
      this.resetFlags();
      each(this._inits, function (item, index) {
        item.init = item.el.checked;
        item.value = item.el.value;
      });
    };

    RadioValidation.prototype.updateClasses = function updateClasses(results) {
      var _this4 = this;

      var el = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

      if (el) {
        // for another element
        this._updateClasses(el, results);
      } else {
        each(this._inits, function (item, index) {
          _this4._updateClasses(item.el, results);
        });
      }
    };

    RadioValidation.prototype._addItem = function _addItem(el, initial) {
      var item = {
        el: el,
        init: el.checked,
        value: el.value,
        initial: initial
      };

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        item.classIds = classIds.split(',');
      }

      this._inits.push(item);
      return item;
    };

    RadioValidation.prototype._setChecked = function _setChecked(value, el, item) {
      if (el.value === value) {
        el.checked = true;
        this._init = el.checked;
        item.init = el.checked;
        item.value = value;
      }
    };

    RadioValidation.prototype._getValue = function _getValue(el) {
      var _this5 = this;

      if (!this._inits || this._inits.length === 0) {
        return el.checked;
      } else {
        var _ret = function () {
          var vals = [];
          each(_this5._inits, function (item, index) {
            item.el.checked && vals.push(item.el.value);
          });
          return {
            v: vals
          };
        }();

        if ((typeof _ret === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret)) === "object") return _ret.v;
      }
    };

    RadioValidation.prototype._getClassIds = function _getClassIds(el) {
      var classIds = void 0;
      each(this._inits, function (item, index) {
        if (item.el === el) {
          classIds = item.classIds;
        }
      });
      return classIds;
    };

    RadioValidation.prototype._checkModified = function _checkModified(target) {
      var _this6 = this;

      if (this._inits.length === 0) {
        return this._init !== target.checked;
      } else {
        var _ret2 = function () {
          var modified = false;
          each(_this6._inits, function (item, index) {
            if (!modified) {
              modified = item.init !== item.el.checked;
            }
          });
          return {
            v: modified
          };
        }();

        if ((typeof _ret2 === 'undefined' ? 'undefined' : babelHelpers.typeof(_ret2)) === "object") return _ret2.v;
      }
    };

    return RadioValidation;
  }(BaseValidation);

  /**
   * SelectValidation class
   */

  var SelectValidation = function (_BaseValidation) {
    babelHelpers.inherits(SelectValidation, _BaseValidation);

    function SelectValidation(field, model, vm, el, scope, validator, filters, detectBlur, detectChange) {
      babelHelpers.classCallCheck(this, SelectValidation);

      var _this = babelHelpers.possibleConstructorReturn(this, _BaseValidation.call(this, field, model, vm, el, scope, validator, filters, detectBlur, detectChange));

      _this._multiple = _this._el.hasAttribute('multiple');
      return _this;
    }

    SelectValidation.prototype.manageElement = function manageElement(el, initial) {
      var _this2 = this;

      var scope = this._getScope();
      var model = this._model;

      this._initial = initial;

      var classIds = el.getAttribute(VALIDATE_UPDATE);
      if (classIds) {
        el.removeAttribute(VALIDATE_UPDATE);
        this._classIds = classIds.split(',');
      }

      if (model) {
        var value = this._evalModel(model, this._filters);
        var values = !Array.isArray(value) ? [value] : value;
        this._setOption(values, el);
        this._unwatch = scope.$watch(model, function (val, old) {
          var values1 = !Array.isArray(val) ? [val] : val;
          var values2 = !Array.isArray(old) ? [old] : old;
          if (values1.slice().sort().toString() !== values2.slice().sort().toString()) {
            if (_this2.guardValidate(el, 'change')) {
              return;
            }

            _this2.handleValidate(el, { noopable: _this2._initial });
            if (_this2._initial) {
              _this2._initial = null;
            }
          }
        });
      }
    };

    SelectValidation.prototype.unmanageElement = function unmanageElement(el) {
      this._unwatch && this._unwatch();
    };

    SelectValidation.prototype.reset = function reset() {
      this.resetFlags();
    };

    SelectValidation.prototype._getValue = function _getValue(el) {
      var ret = [];

      for (var i = 0, l = el.options.length; i < l; i++) {
        var option = el.options[i];
        if (!option.disabled && option.selected) {
          ret.push(option.value);
        }
      }

      return ret;
    };

    SelectValidation.prototype._setOption = function _setOption(values, el) {
      for (var i = 0, l = values.length; i < l; i++) {
        var value = values[i];
        for (var j = 0, m = el.options.length; j < m; j++) {
          var option = el.options[j];
          if (!option.disabled && option.value === value && (!option.hasAttribute('selected') || !option.selected)) {
            option.selected = true;
          }
        }
      }
    };

    SelectValidation.prototype._checkModified = function _checkModified(target) {
      var values = this._getValue(target).slice().sort();
      if (this._init.length !== values.length) {
        return true;
      } else {
        var inits = this._init.slice().sort();
        return inits.toString() !== values.toString();
      }
    };

    return SelectValidation;
  }(BaseValidation);

  /**
   * Validator class
   */

  var Validator$1 = function () {
    function Validator(name, dir, groups, classes) {
      var _this = this;

      babelHelpers.classCallCheck(this, Validator);

      this.name = name;

      this._scope = {};
      this._dir = dir;
      this._validations = {};
      this._checkboxValidations = {};
      this._radioValidations = {};
      this._groups = groups;
      this._groupValidations = {};
      this._events = {};
      this._modified = false;
      this._classes = classes;

      each(groups, function (group) {
        _this._groupValidations[group] = [];
      });
    }

    Validator.prototype.enableReactive = function enableReactive() {
      var vm = this._dir.vm;

      // define the validation scope
      exports$1.Vue.util.defineReactive(vm, this.name, this._scope);
      vm._validatorMaps[this.name] = this;

      // define the validation resetting meta method to vue instance
      this._defineResetValidation();

      // define the validate manually meta method to vue instance
      this._defineValidate();

      // define manually the validation errors
      this._defineSetValidationErrors();
    };

    Validator.prototype.disableReactive = function disableReactive() {
      var vm = this._dir.vm;
      vm.$setValidationErrors = null;
      delete vm['$setValidationErrors'];
      vm.$validate = null;
      delete vm['$validate'];
      vm.$validatorReset = null;
      delete vm['$validatorReset'];
      vm._validatorMaps[this.name] = null;
      delete vm._validatorMaps[this.name];
      vm[this.name] = null;
      delete vm[this.name];
    };

    Validator.prototype.registerEvents = function registerEvents() {
      var isSimplePath = exports$1.Vue.parsers.expression.isSimplePath;

      var attrs = this._dir.el.attributes;
      for (var i = 0, l = attrs.length; i < l; i++) {
        var event = attrs[i].name;
        if (REGEX_EVENT.test(event)) {
          var value = attrs[i].value;
          if (isSimplePath(value)) {
            value += '.apply(this, $arguments)';
          }
          event = event.replace(REGEX_EVENT, '');
          this._events[this._getEventName(event)] = this._dir.vm.$eval(value, true);
        }
      }
    };

    Validator.prototype.unregisterEvents = function unregisterEvents() {
      var _this2 = this;

      each(this._events, function (handler, event) {
        _this2._events[event] = null;
        delete _this2._events[event];
      });
    };

    Validator.prototype.manageValidation = function manageValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validation = null;

      if (el.tagName === 'SELECT') {
        validation = this._manageSelectValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      } else if (el.type === 'checkbox') {
        validation = this._manageCheckboxValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      } else if (el.type === 'radio') {
        validation = this._manageRadioValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      } else {
        validation = this._manageBaseValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange);
      }

      validation.setValidationClasses(this._classes);

      return validation;
    };

    Validator.prototype.unmanageValidation = function unmanageValidation(field, el) {
      if (el.type === 'checkbox') {
        this._unmanageCheckboxValidation(field, el);
      } else if (el.type === 'radio') {
        this._unmanageRadioValidation(field, el);
      } else if (el.tagName === 'SELECT') {
        this._unmanageSelectValidation(field, el);
      } else {
        this._unmanageBaseValidation(field, el);
      }
    };

    Validator.prototype.addGroupValidation = function addGroupValidation(group, field) {
      var indexOf = exports$1.Vue.util.indexOf;

      var validation = this._getValidationFrom(field);
      var validations = this._groupValidations[group];

      validations && ! ~indexOf(validations, validation) && validations.push(validation);
    };

    Validator.prototype.removeGroupValidation = function removeGroupValidation(group, field) {
      var validation = this._getValidationFrom(field);
      var validations = this._groupValidations[group];

      validations && pull(validations, validation);
    };

    Validator.prototype.validate = function validate() {
      var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

      var _ref$el = _ref.el;
      var el = _ref$el === undefined ? null : _ref$el;
      var _ref$field = _ref.field;
      var field = _ref$field === undefined ? null : _ref$field;
      var _ref$touched = _ref.touched;
      var touched = _ref$touched === undefined ? false : _ref$touched;
      var _ref$noopable = _ref.noopable;
      var noopable = _ref$noopable === undefined ? false : _ref$noopable;
      var _ref$cb = _ref.cb;
      var cb = _ref$cb === undefined ? null : _ref$cb;

      if (!field) {
        // all
        each(this.validations, function (validation, key) {
          validation.willUpdateFlags(touched);
        });
        this._validates(cb);
      } else {
        // each field
        this._validate(field, touched, noopable, el, cb);
      }
    };

    Validator.prototype.setupScope = function setupScope() {
      var _this3 = this;

      this._defineProperties(function () {
        return _this3.validations;
      }, function () {
        return _this3._scope;
      });

      each(this._groups, function (name) {
        var validations = _this3._groupValidations[name];
        var group = {};
        exports$1.Vue.set(_this3._scope, name, group);
        _this3._defineProperties(function () {
          return validations;
        }, function () {
          return group;
        });
      });
    };

    Validator.prototype.waitFor = function waitFor(cb) {
      var method = '$activateValidator';
      var vm = this._dir.vm;

      vm[method] = function () {
        cb();
        vm[method] = null;
      };
    };

    Validator.prototype._defineResetValidation = function _defineResetValidation() {
      var _this4 = this;

      this._dir.vm.$resetValidation = function (cb) {
        _this4._resetValidation(cb);
      };
    };

    Validator.prototype._defineValidate = function _defineValidate() {
      var _this5 = this;

      this._dir.vm.$validate = function () {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        var field = null;
        var touched = false;
        var cb = null;

        each(args, function (arg, index) {
          if (typeof arg === 'string') {
            field = arg;
          } else if (typeof arg === 'boolean') {
            touched = arg;
          } else if (typeof arg === 'function') {
            cb = arg;
          }
        });

        _this5.validate({ field: field, touched: touched, cb: cb });
      };
    };

    Validator.prototype._defineSetValidationErrors = function _defineSetValidationErrors() {
      var _this6 = this;

      this._dir.vm.$setValidationErrors = function (errors) {
        _this6._setValidationErrors(errors);
      };
    };

    Validator.prototype._validate = function _validate(field) {
      var touched = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];
      var noopable = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];

      var _this7 = this;

      var el = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];
      var cb = arguments.length <= 4 || arguments[4] === undefined ? null : arguments[4];

      var scope = this._scope;

      var validation = this._getValidationFrom(field);
      if (validation) {
        validation.willUpdateFlags(touched);
        validation.validate(function (results) {
          exports$1.Vue.set(scope, field, results);
          _this7._fireEvents();
          cb && cb();
        }, noopable, el);
      }
    };

    Validator.prototype._validates = function _validates(cb) {
      var _this8 = this;

      var scope = this._scope;

      this._runValidates(function (validation, key, done) {
        validation.validate(function (results) {
          exports$1.Vue.set(scope, key, results);
          done();
        });
      }, function () {
        // finished
        _this8._fireEvents();
        cb && cb();
      });
    };

    Validator.prototype._getValidationFrom = function _getValidationFrom(field) {
      return this._validations[field] || this._checkboxValidations[field] && this._checkboxValidations[field].validation || this._radioValidations[field] && this._radioValidations[field].validation;
    };

    Validator.prototype._resetValidation = function _resetValidation(cb) {
      each(this.validations, function (validation, key) {
        validation.reset();
      });
      this._validates(cb);
    };

    Validator.prototype._setValidationErrors = function _setValidationErrors(errors) {
      var _this9 = this;

      var extend = exports$1.Vue.util.extend;

      // make tempolaly errors

      var temp = {};
      each(errors, function (error, index) {
        if (!temp[error.field]) {
          temp[error.field] = [];
        }
        temp[error.field].push(error);
      });

      // set errors
      each(temp, function (values, field) {
        var results = _this9._scope[field];
        var newResults = {};

        each(values, function (error) {
          if (error.validator) {
            results[error.validator] = error.message;
          }
        });

        results.valid = false;
        results.invalid = true;
        results.errors = values;
        extend(newResults, results);

        var validation = _this9._getValidationFrom(field);
        validation.willUpdateClasses(newResults, validation.el);

        exports$1.Vue.set(_this9._scope, field, newResults);
      });
    };

    Validator.prototype._manageBaseValidation = function _manageBaseValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validation = this._validations[field] = new BaseValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
      validation.manageElement(el, initial);
      return validation;
    };

    Validator.prototype._unmanageBaseValidation = function _unmanageBaseValidation(field, el) {
      var validation = this._validations[field];
      if (validation) {
        validation.unmanageElement(el);
        exports$1.Vue.delete(this._scope, field);
        this._validations[field] = null;
        delete this._validations[field];
      }
    };

    Validator.prototype._manageCheckboxValidation = function _manageCheckboxValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validationSet = this._checkboxValidations[field];
      if (!validationSet) {
        var validation = new CheckboxValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
        validationSet = { validation: validation, elements: 0 };
        this._checkboxValidations[field] = validationSet;
      }

      validationSet.elements++;
      validationSet.validation.manageElement(el, initial);
      return validationSet.validation;
    };

    Validator.prototype._unmanageCheckboxValidation = function _unmanageCheckboxValidation(field, el) {
      var validationSet = this._checkboxValidations[field];
      if (validationSet) {
        validationSet.elements--;
        validationSet.validation.unmanageElement(el);
        if (validationSet.elements === 0) {
          exports$1.Vue.delete(this._scope, field);
          this._checkboxValidations[field] = null;
          delete this._checkboxValidations[field];
        }
      }
    };

    Validator.prototype._manageRadioValidation = function _manageRadioValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validationSet = this._radioValidations[field];
      if (!validationSet) {
        var validation = new RadioValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
        validationSet = { validation: validation, elements: 0 };
        this._radioValidations[field] = validationSet;
      }

      validationSet.elements++;
      validationSet.validation.manageElement(el, initial);
      return validationSet.validation;
    };

    Validator.prototype._unmanageRadioValidation = function _unmanageRadioValidation(field, el) {
      var validationSet = this._radioValidations[field];
      if (validationSet) {
        validationSet.elements--;
        validationSet.validation.unmanageElement(el);
        if (validationSet.elements === 0) {
          exports$1.Vue.delete(this._scope, field);
          this._radioValidations[field] = null;
          delete this._radioValidations[field];
        }
      }
    };

    Validator.prototype._manageSelectValidation = function _manageSelectValidation(field, model, vm, el, scope, filters, initial, detectBlur, detectChange) {
      var validation = this._validations[field] = new SelectValidation(field, model, vm, el, scope, this, filters, detectBlur, detectChange);
      validation.manageElement(el, initial);
      return validation;
    };

    Validator.prototype._unmanageSelectValidation = function _unmanageSelectValidation(field, el) {
      var validation = this._validations[field];
      if (validation) {
        validation.unmanageElement(el);
        exports$1.Vue.delete(this._scope, field);
        this._validations[field] = null;
        delete this._validations[field];
      }
    };

    Validator.prototype._fireEvent = function _fireEvent(type) {
      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      var handler = this._events[this._getEventName(type)];
      handler && this._dir.vm.$nextTick(function () {
        handler.apply(null, args);
      });
    };

    Validator.prototype._fireEvents = function _fireEvents() {
      var scope = this._scope;

      scope.touched && this._fireEvent('touched');
      scope.dirty && this._fireEvent('dirty');

      if (this._modified !== scope.modified) {
        this._fireEvent('modified', scope.modified);
        this._modified = scope.modified;
      }

      var valid = scope.valid;
      this._fireEvent(valid ? 'valid' : 'invalid');
    };

    Validator.prototype._getEventName = function _getEventName(type) {
      return this.name + ':' + type;
    };

    Validator.prototype._defineProperties = function _defineProperties(validationsGetter, targetGetter) {
      var _this10 = this;

      var bind = exports$1.Vue.util.bind;

      each({
        valid: { fn: this._defineValid, arg: validationsGetter },
        invalid: { fn: this._defineInvalid, arg: targetGetter },
        touched: { fn: this._defineTouched, arg: validationsGetter },
        untouched: { fn: this._defineUntouched, arg: targetGetter },
        modified: { fn: this._defineModified, arg: validationsGetter },
        dirty: { fn: this._defineDirty, arg: validationsGetter },
        pristine: { fn: this._definePristine, arg: targetGetter },
        errors: { fn: this._defineErrors, arg: validationsGetter }
      }, function (descriptor, name) {
        Object.defineProperty(targetGetter(), name, {
          enumerable: true,
          configurable: true,
          get: function get() {
            return bind(descriptor.fn, _this10)(descriptor.arg);
          }
        });
      });
    };

    Validator.prototype._runValidates = function _runValidates(fn, cb) {
      var length = Object.keys(this.validations).length;

      var count = 0;
      each(this.validations, function (validation, key) {
        fn(validation, key, function () {
          ++count;
          count >= length && cb();
        });
      });
    };

    Validator.prototype._walkValidations = function _walkValidations(validations, property, condition) {
      var _this11 = this;

      var hasOwn = exports$1.Vue.util.hasOwn;
      var ret = condition;

      each(validations, function (validation, key) {
        if (ret === !condition) {
          return;
        }
        if (hasOwn(_this11._scope, validation.field)) {
          var target = _this11._scope[validation.field];
          if (target && target[property] === !condition) {
            ret = !condition;
          }
        }
      });

      return ret;
    };

    Validator.prototype._defineValid = function _defineValid(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'valid', true);
    };

    Validator.prototype._defineInvalid = function _defineInvalid(scopeGetter) {
      return !scopeGetter().valid;
    };

    Validator.prototype._defineTouched = function _defineTouched(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'touched', false);
    };

    Validator.prototype._defineUntouched = function _defineUntouched(scopeGetter) {
      return !scopeGetter().touched;
    };

    Validator.prototype._defineModified = function _defineModified(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'modified', false);
    };

    Validator.prototype._defineDirty = function _defineDirty(validationsGetter) {
      return this._walkValidations(validationsGetter(), 'dirty', false);
    };

    Validator.prototype._definePristine = function _definePristine(scopeGetter) {
      return !scopeGetter().dirty;
    };

    Validator.prototype._defineErrors = function _defineErrors(validationsGetter) {
      var _this12 = this;

      var hasOwn = exports$1.Vue.util.hasOwn;
      var isPlainObject = exports$1.Vue.util.isPlainObject;
      var errors = [];

      each(validationsGetter(), function (validation, key) {
        if (hasOwn(_this12._scope, validation.field)) {
          var target = _this12._scope[validation.field];
          if (target && !empty(target.errors)) {
            each(target.errors, function (err, index) {
              var error = { field: validation.field };
              if (isPlainObject(err)) {
                if (err.validator) {
                  error.validator = err.validator;
                }
                error.message = err.message;
              } else if (typeof err === 'string') {
                error.message = err;
              }
              errors.push(error);
            });
          }
        }
      });

      return empty(errors) ? undefined : errors.sort(function (a, b) {
        return a.field < b.field ? -1 : 1;
      });
    };

    babelHelpers.createClass(Validator, [{
      key: 'validations',
      get: function get() {
        var extend = exports$1.Vue.util.extend;

        var ret = {};
        extend(ret, this._validations);

        each(this._checkboxValidations, function (dataset, key) {
          ret[key] = dataset.validation;
        });

        each(this._radioValidations, function (dataset, key) {
          ret[key] = dataset.validation;
        });

        return ret;
      }
    }]);
    return Validator;
  }();

  function Validator (Vue) {
    var FragmentFactory = Vue.FragmentFactory;
    var vIf = Vue.directive('if');
    var _Vue$util = Vue.util;
    var isArray = _Vue$util.isArray;
    var isPlainObject = _Vue$util.isPlainObject;
    var createAnchor = _Vue$util.createAnchor;
    var replace = _Vue$util.replace;
    var extend = _Vue$util.extend;
    var camelize = _Vue$util.camelize;

    /**
     * `validator` element directive
     */

    Vue.elementDirective('validator', {
      params: ['name', 'groups', 'lazy', 'classes'],

      bind: function bind() {
        var params = this.params;

        if ('development' !== 'production' && !params.name) {
          warn('validator element requires a \'name\' attribute: ' + '(e.g. <validator name="validator1">...</validator>)');
          return;
        }

        this.validatorName = '$' + camelize(params.name);
        if (!this.vm._validatorMaps) {
          throw new Error('Invalid validator management error');
        }

        var classes = {};
        if (isPlainObject(this.params.classes)) {
          classes = this.params.classes;
        }

        this.setupValidator(classes);
        this.setupFragment(params.lazy);
      },
      unbind: function unbind() {
        this.teardownFragment();
        this.teardownValidator();
      },
      getGroups: function getGroups() {
        var params = this.params;
        var groups = [];

        if (params.groups) {
          if (isArray(params.groups)) {
            groups = params.groups;
          } else if (!isPlainObject(params.groups) && typeof params.groups === 'string') {
            groups.push(params.groups);
          }
        }

        return groups;
      },
      setupValidator: function setupValidator(classes) {
        var validator = this.validator = new Validator$1(this.validatorName, this, this.getGroups(), classes);
        validator.enableReactive();
        validator.setupScope();
        validator.registerEvents();
      },
      teardownValidator: function teardownValidator() {
        this.validator.unregisterEvents();
        this.validator.disableReactive();

        if (this.validatorName) {
          this.validatorName = null;
          this.validator = null;
        }
      },
      setupFragment: function setupFragment(lazy) {
        var _this = this;

        var vm = this.vm;

        this.validator.waitFor(function () {
          _this.anchor = createAnchor('vue-validator');
          replace(_this.el, _this.anchor);
          extend(vm.$options, { _validator: _this.validatorName });
          _this.factory = new FragmentFactory(vm, _this.el.innerHTML);
          vIf.insert.call(_this);
        });

        !lazy && vm.$activateValidator();
      },
      teardownFragment: function teardownFragment() {
        vIf.unbind.call(this);
      }
    });
  }

  function ValidatorError (Vue) {
    /**
     * ValidatorError component
     */

    var error = {
      name: 'validator-error',

      props: {
        field: {
          type: String,
          required: true
        },
        validator: {
          type: String
        },
        message: {
          type: String,
          required: true
        },
        partial: {
          type: String,
          default: 'validator-error-default'
        }
      },

      template: '<div><partial :name="partial"></partial></div>',

      partials: {}
    };

    // only use ValidatorError component
    error.partials['validator-error-default'] = '<p>{{field}}: {{message}}</p>';

    return error;
  }

  function Errors (Vue) {
    var _ = Vue.util;
    var error = ValidatorError(Vue); // import ValidatorError component

    /**
     * ValidatorErrors component
     */

    var errors = {
      name: 'validator-errors',

      props: {
        validation: {
          type: Object,
          required: true
        },
        group: {
          type: String,
          default: null
        },
        field: {
          type: String,
          default: null
        },
        component: {
          type: String,
          default: 'validator-error'
        }
      },

      computed: {
        errors: function errors() {
          var _this = this;

          if (this.group !== null) {
            return this.validation[this.group].errors;
          } else if (this.field !== null) {
            var target = this.validation[this.field];
            if (!target.errors) {
              return;
            }

            return target.errors.map(function (error) {
              var err = { field: _this.field };
              if (_.isPlainObject(error)) {
                if (error.validator) {
                  err.validator = error.validator;
                }
                err.message = error.message;
              } else if (typeof error === 'string') {
                err.message = error;
              }
              return err;
            });
          } else {
            return this.validation.errors;
          }
        }
      },

      template: '<template v-for="error in errors">' + '<component :is="component" :partial="partial" :field="error.field" :validator="error.validator" :message="error.message">' + '</component>' + '</template>',

      components: {}
    };

    // define 'partial' prop
    errors.props['partial'] = error.props['partial'];

    // only use ValidatorErrors component
    errors.components[error.name] = error;

    // install ValidatorErrors component
    Vue.component(errors.name, errors);

    return errors;
  }

  /**
   * plugin
   *
   * @param {Function} Vue
   * @param {Object} options
   */

  function plugin(Vue) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    if (plugin.installed) {
      warn('already installed.');
      return;
    }

    exports$1.Vue = Vue;
    Asset(Vue);
    Errors(Vue);

    Override(Vue);
    Validator(Vue);
    ValidateClass(Vue);
    Validate(Vue);
  }

  plugin.version = '2.1.3';

  if (typeof window !== 'undefined' && window.Vue) {
    window.Vue.use(plugin);
  }

  return plugin;

}));
//! moment.js
//! version : 2.14.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return md.apply(null,arguments)}
// This is done to register the method called with moment()
// without creating circular dependencies.
function b(a){md=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)
// even if its not own property I'd still call it non-empty
return!1;return!0}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return qb(a,b,c,d,!0).utc()}function k(){
// We need to deep clone this object.
return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a),c=nd.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a){return void 0===a}function p(a,b){var c,d,e;if(o(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),o(b._i)||(a._i=b._i),o(b._f)||(a._f=b._f),o(b._l)||(a._l=b._l),o(b._strict)||(a._strict=b._strict),o(b._tzm)||(a._tzm=b._tzm),o(b._isUTC)||(a._isUTC=b._isUTC),o(b._offset)||(a._offset=b._offset),o(b._pf)||(a._pf=l(b)),o(b._locale)||(a._locale=b._locale),od.length>0)for(c in od)d=od[c],e=b[d],o(e)||(a[d]=e);return a}
// Moment prototype object
function q(b){p(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),pd===!1&&(pd=!0,a.updateOffset(this),pd=!1)}function r(a){return a instanceof q||null!=a&&null!=a._isAMomentObject}function s(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=s(b)),c}
// compare two arrays, return the number of differences
function u(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function v(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function w(b,c){var d=!0;return i(function(){return null!=a.deprecationHandler&&a.deprecationHandler(null,b),d&&(v(b+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),d=!1),c.apply(this,arguments)},c)}function x(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),qd[b]||(v(c),qd[b]=!0)}function y(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function z(a){var b,c;for(c in a)b=a[c],y(b)?this[c]=b:this["_"+c]=b;this._config=a,
// Lenient ordinal parsing accepts just a number in addition to
// number + (possibly) stuff coming from _ordinalParseLenient.
this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function A(a,b){var c,e=i({},a);for(c in b)h(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},i(e[c],a[c]),i(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)h(a,c)&&!h(b,c)&&d(a[c])&&(
// make sure changes to properties don't modify parent config
e[c]=i({},e[c]));return e}function B(a){null!=a&&this.set(a)}function C(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return y(d)?d.call(b,c):d}function D(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function E(){return this._invalidDate}function F(a){return this._ordinal.replace("%d",a)}function G(a,b,c,d){var e=this._relativeTime[c];return y(e)?e(a,b,c,d):e.replace(/%d/i,a)}function H(a,b){var c=this._relativeTime[a>0?"future":"past"];return y(c)?c(b):c.replace(/%s/i,b)}function I(a,b){var c=a.toLowerCase();zd[c]=zd[c+"s"]=zd[b]=a}function J(a){return"string"==typeof a?zd[a]||zd[a.toLowerCase()]:void 0}function K(a){var b,c,d={};for(c in a)h(a,c)&&(b=J(c),b&&(d[b]=a[c]));return d}function L(a,b){Ad[a]=b}function M(a){var b=[];for(var c in a)b.push({unit:c,priority:Ad[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function N(b,c){return function(d){return null!=d?(P(this,b,d),a.updateOffset(this,c),this):O(this,b)}}function O(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function P(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}
// MOMENTS
function Q(a){return a=J(a),y(this[a])?this[a]():this}function R(a,b){if("object"==typeof a){a=K(a);for(var c=M(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=J(a),y(this[a]))return this[a](b);return this}function S(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}
// token:    'M'
// padded:   ['MM', 2]
// ordinal:  'Mo'
// callback: function () { this.month() + 1 }
function T(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Ed[a]=e),b&&(Ed[b[0]]=function(){return S(e.apply(this,arguments),b[1],b[2])}),c&&(Ed[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function U(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function V(a){var b,c,d=a.match(Bd);for(b=0,c=d.length;c>b;b++)Ed[d[b]]?d[b]=Ed[d[b]]:d[b]=U(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}
// format date using native date object
function W(a,b){return a.isValid()?(b=X(b,a.localeData()),Dd[b]=Dd[b]||V(b),Dd[b](a)):a.localeData().invalidDate()}function X(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cd.lastIndex=0;d>=0&&Cd.test(a);)a=a.replace(Cd,c),Cd.lastIndex=0,d-=1;return a}function Y(a,b,c){Wd[a]=y(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return h(Wd,a)?Wd[a](b._strict,b._locale):new RegExp($(a))}
// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
function $(a){return _(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function _(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aa(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=t(a)}),c=0;c<a.length;c++)Xd[a[c]]=d}function ba(a,b){aa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ca(a,b,c){null!=b&&h(Xd,a)&&Xd[a](b,c._a,c,a)}function da(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ea(a,b){return c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||fe).test(b)?"format":"standalone"][a.month()]}function fa(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[fe.test(b)?"format":"standalone"][a.month()]}function ga(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(
// this is not used
this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=j([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null):(e=sd.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:(e=sd.call(this._longMonthsParse,g),-1!==e?e:null)):(e=sd.call(this._longMonthsParse,g),-1!==e?e:(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null))}function ha(a,b,c){var d,e,f;if(this._monthsParseExact)return ga.call(this,a,b,c);
// TODO: add sorting
// Sorting makes sure if one month (or abbr) is a prefix of another
// see sorting in computeMonthsParse
for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){
// test the regex
if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}
// MOMENTS
function ia(a,b){var c;if(!a.isValid())
// No op
return a;if("string"==typeof b)if(/^\d+$/.test(b))b=t(b);else
// TODO: Another silent failure?
if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),da(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ja(b){return null!=b?(ia(this,b),a.updateOffset(this,!0),this):O(this,"Month")}function ka(){return da(this.year(),this.month())}function la(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=ie),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function ma(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=je),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function na(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=j([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(
// Sorting makes sure if one month (or abbr) is a prefix of another it
// will match the longer piece.
d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=_(d[b]),e[b]=_(e[b]);for(b=0;24>b;b++)f[b]=_(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}
// HELPERS
function oa(a){return pa(a)?366:365}function pa(a){return a%4===0&&a%100!==0||a%400===0}function qa(){return pa(this.year())}function ra(a,b,c,d,e,f,g){
//can't just apply() to create a date:
//http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
var h=new Date(a,b,c,d,e,f,g);
//the date constructor remaps years 0-99 to 1900-1999
return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));
//the Date.UTC function remaps years 0-99 to 1900-1999
return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}
// start-of-first-week - start-of-year
function ta(a,b,c){var// first-week day -- which january is always in the first week (4 for iso, 1 for other)
d=7+b-c,
// first-week day local weekday -- which local weekday is fwd
e=(7+sa(a,0,d).getUTCDay()-b)%7;return-e+d-1}
//http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
function ua(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ta(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=oa(f)+j):j>oa(a)?(f=a+1,g=j-oa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function va(a,b,c){var d,e,f=ta(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+wa(e,b,c)):g>wa(a.year(),b,c)?(d=g-wa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function wa(a,b,c){var d=ta(a,b,c),e=ta(a+1,b,c);return(oa(a)-d+e)/7}
// HELPERS
// LOCALES
function xa(a){return va(a,this._week.dow,this._week.doy).week}function ya(){return this._week.dow}function za(){return this._week.doy}
// MOMENTS
function Aa(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ba(a){var b=va(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}
// HELPERS
function Ca(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Da(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ea(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Fa(a){return this._weekdaysShort[a.day()]}function Ga(a){return this._weekdaysMin[a.day()]}function Ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=j([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ia(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ha.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){
// test the regex
if(e=j([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}
// MOMENTS
function Ja(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ca(a,this.localeData()),this.add(a-b,"d")):b}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function La(a){if(!this.isValid())return null!=a?this:NaN;
// behaves the same as moment#day except
// as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
// as a setter, sunday should belong to the previous week.
if(null!=a){var b=Da(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Ma(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=pe),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Na(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oa(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=re),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],k=[];for(b=0;7>b;b++)c=j([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),k.push(d),k.push(e),k.push(f);for(
// Sorting makes sure if one weekday (or abbr) is a prefix of another it
// will match the longer piece.
g.sort(a),h.sort(a),i.sort(a),k.sort(a),b=0;7>b;b++)h[b]=_(h[b]),i[b]=_(i[b]),k[b]=_(k[b]);this._weekdaysRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}
// FORMATTING
function Qa(){return this.hours()%12||12}function Ra(){return this.hours()||24}function Sa(a,b){T(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}
// PARSING
function Ta(a,b){return b._meridiemParse}
// LOCALES
function Ua(a){
// IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
// Using charAt should be more compatible.
return"p"===(a+"").toLowerCase().charAt(0)}function Va(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wa(a){return a?a.toLowerCase().replace("_","-"):a}
// pick the locale from the array
// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
function Xa(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Wa(a[f]).split("-"),b=e.length,c=Wa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Ya(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&u(e,c,!0)>=b-1)
//the next array item is better than a shallower substring of this one
break;b--}f++}return null}function Ya(a){var b=null;
// TODO: Find a better way to register and load all the locales in Node
if(!we[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=se._abbr,require("./locale/"+a),
// because defineLocale currently also sets the global locale, we
// want to undo that for lazy loaded locales
Za(b)}catch(c){}return we[a]}
// This function will load locale and then set the global locale.  If
// no arguments are passed in, it will simply return the current global
// locale key.
function Za(a,b){var c;
// moment.duration._locale = moment._locale = data;
return a&&(c=o(b)?ab(a):$a(a,b),c&&(se=c)),se._abbr}function $a(a,b){if(null!==b){var c=ve;
// treat as if there is no base config
// backwards compat for now: also set the locale
return b.abbr=a,null!=we[a]?(x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=we[a]._config):null!=b.parentLocale&&(null!=we[b.parentLocale]?c=we[b.parentLocale]._config:x("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),we[a]=new B(A(c,b)),Za(a),we[a]}
// useful for testing
return delete we[a],null}function _a(a,b){if(null!=b){var c,d=ve;
// MERGE
null!=we[a]&&(d=we[a]._config),b=A(d,b),c=new B(b),c.parentLocale=we[a],we[a]=c,
// backwards compat for now: also set the locale
Za(a)}else
// pass null for config to unupdate, useful for tests
null!=we[a]&&(null!=we[a].parentLocale?we[a]=we[a].parentLocale:null!=we[a]&&delete we[a]);return we[a]}
// returns locale data
function ab(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return se;if(!c(a)){if(b=Ya(a))return b;a=[a]}return Xa(a)}function bb(){return rd(we)}function cb(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[Zd]<0||c[Zd]>11?Zd:c[$d]<1||c[$d]>da(c[Yd],c[Zd])?$d:c[_d]<0||c[_d]>24||24===c[_d]&&(0!==c[ae]||0!==c[be]||0!==c[ce])?_d:c[ae]<0||c[ae]>59?ae:c[be]<0||c[be]>59?be:c[ce]<0||c[ce]>999?ce:-1,l(a)._overflowDayOfYear&&(Yd>b||b>$d)&&(b=$d),l(a)._overflowWeeks&&-1===b&&(b=de),l(a)._overflowWeekday&&-1===b&&(b=ee),l(a).overflow=b),a}
// date from iso format
function db(a){var b,c,d,e,f,g,h=a._i,i=xe.exec(h)||ye.exec(h);if(i){for(l(a).iso=!0,b=0,c=Ae.length;c>b;b++)if(Ae[b][1].exec(i[1])){e=Ae[b][0],d=Ae[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Be.length;c>b;b++)if(Be[b][1].exec(i[3])){
// match[2] should be 'T' or space
f=(i[2]||" ")+Be[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!ze.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),jb(a)}else a._isValid=!1}
// date from iso format or fallback
function eb(b){var c=Ce.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(db(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}
// Pick the first defined of two or three arguments.
function fb(a,b,c){return null!=a?a:null!=b?b:c}function gb(b){
// hooks is actually the exported moment object
var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}
// convert an array to a date.
// the array should mirror the parameters below
// note: all values past the year are optional and will default to the lowest possible value.
// [year, month, day , hour, minute, second, millisecond]
function hb(a){var b,c,d,e,f=[];if(!a._d){
// Default to current date.
// * if no year, month, day of month are given, default to today
// * if day of month is given, default month and year
// * if month is given, default only year
// * if year is given, don't default anything
for(d=gb(a),a._w&&null==a._a[$d]&&null==a._a[Zd]&&ib(a),a._dayOfYear&&(e=fb(a._a[Yd],d[Yd]),a._dayOfYear>oa(e)&&(l(a)._overflowDayOfYear=!0),c=sa(e,0,a._dayOfYear),a._a[Zd]=c.getUTCMonth(),a._a[$d]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];
// Zero out whatever was not defaulted, including time
for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];
// Check for 24:00:00.000
24===a._a[_d]&&0===a._a[ae]&&0===a._a[be]&&0===a._a[ce]&&(a._nextDay=!0,a._a[_d]=0),a._d=(a._useUTC?sa:ra).apply(null,f),
// Apply timezone offset from input. The actual utcOffset can be changed
// with parseZone.
null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[_d]=24)}}function ib(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=fb(b.GG,a._a[Yd],va(rb(),1,4).year),d=fb(b.W,1),e=fb(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=fb(b.gg,a._a[Yd],va(rb(),f,g).year),d=fb(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>wa(c,f,g)?l(a)._overflowWeeks=!0:null!=i?l(a)._overflowWeekday=!0:(h=ua(c,d,e,f,g),a._a[Yd]=h.year,a._dayOfYear=h.dayOfYear)}
// date from string and format string
function jb(b){
// TODO: Move this to another part of the creation flow to prevent circular deps
if(b._f===a.ISO_8601)return void db(b);b._a=[],l(b).empty=!0;
// This array is used to make a Date, either with `new Date` or `Date.UTC`
var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=X(b._f,b._locale).match(Bd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(Z(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Ed[f]?(d?l(b).empty=!1:l(b).unusedTokens.push(f),ca(f,d,b)):b._strict&&!d&&l(b).unusedTokens.push(f);
// add remaining unparsed input length to the string
l(b).charsLeftOver=i-j,h.length>0&&l(b).unusedInput.push(h),
// clear _12h flag if hour is <= 12
b._a[_d]<=12&&l(b).bigHour===!0&&b._a[_d]>0&&(l(b).bigHour=void 0),l(b).parsedDateParts=b._a.slice(0),l(b).meridiem=b._meridiem,
// handle meridiem
b._a[_d]=kb(b._locale,b._a[_d],b._meridiem),hb(b),cb(b)}function kb(a,b,c){var d;
// Fallback
return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}
// date from string and array of format strings
function lb(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],jb(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function mb(a){if(!a._d){var b=K(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),hb(a)}}function nb(a){var b=new q(cb(ob(a)));
// Adding is smart enough around DST
return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function ob(a){var b=a._i,d=a._f;return a._locale=a._locale||ab(a._l),null===b||void 0===d&&""===b?n({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),r(b)?new q(cb(b)):(c(d)?lb(a):f(b)?a._d=b:d?jb(a):pb(a),m(a)||(a._d=null),a))}function pb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):f(d)?b._d=new Date(d.valueOf()):"string"==typeof d?eb(b):c(d)?(b._a=g(d.slice(0),function(a){return parseInt(a,10)}),hb(b)):"object"==typeof d?mb(b):"number"==typeof d?
// from milliseconds
b._d=new Date(d):a.createFromInputFallback(b)}function qb(a,b,f,g,h){var i={};
// object construction must be done this way.
// https://github.com/moment/moment/issues/1423
return"boolean"==typeof f&&(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,nb(i)}function rb(a,b,c,d){return qb(a,b,c,d,!1)}
// Pick a moment m from moments so that m[fn](other) is true for all
// other. This relies on the function fn to be transitive.
//
// moments should either be an array of moment objects or an array, whose
// first element is an array of moment objects.
function sb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return rb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}
// TODO: Use [].sort instead?
function tb(){var a=[].slice.call(arguments,0);return sb("isBefore",a)}function ub(){var a=[].slice.call(arguments,0);return sb("isAfter",a)}function vb(a){var b=K(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;
// representation for dateAddRemove
this._milliseconds=+k+1e3*j+// 1000
6e4*i+// 1000 * 60
1e3*h*60*60,//using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978
// Because of dateAddRemove treats 24 hours as different from a
// day when working around DST, we need to store them separately
this._days=+g+7*f,
// It is impossible translate months into days without knowing
// which months you are are talking about, so we have to store
// it separately.
this._months=+e+3*d+12*c,this._data={},this._locale=ab(),this._bubble()}function wb(a){return a instanceof vb}
// FORMATTING
function xb(a,b){T(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+S(~~(a/60),2)+b+S(~~a%60,2)})}function yb(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ge)||["-",0,0],f=+(60*e[1])+t(e[2]);return"+"===e[0]?f:-f}
// Return a moment from input, that is local/utc/zone equivalent to model.
function zb(b,c){var d,e;
// Use low-level api, because this fn is low-level api.
return c._isUTC?(d=c.clone(),e=(r(b)||f(b)?b.valueOf():rb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):rb(b).local()}function Ab(a){
// On Firefox.24 Date#getTimezoneOffset returns a floating point.
// https://github.com/moment/moment/pull/1871
return 15*-Math.round(a._d.getTimezoneOffset()/15)}
// MOMENTS
// keepLocalTime = true means only change the timezone, without
// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
// +0200, so we adjust the time as needed, to be valid.
//
// Keeping the time actually adds/subtracts (one hour)
// from the actual represented time. That is why we call updateOffset
// a second time. In case it wants us to change the offset again
// _changeInProgress == true case, then we have to adjust, because
// there is no such time in the given timezone.
function Bb(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=yb(Td,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ab(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Sb(this,Mb(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ab(this):null!=b?this:NaN}function Cb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Db(a){return this.utcOffset(0,a)}function Eb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ab(this),"m")),this}function Fb(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(yb(Sd,this._i)),this}function Gb(a){return this.isValid()?(a=a?rb(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Hb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ib(){if(!o(this._isDSTShifted))return this._isDSTShifted;var a={};if(p(a,this),a=ob(a),a._a){var b=a._isUTC?j(a._a):rb(a._a);this._isDSTShifted=this.isValid()&&u(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jb(){return this.isValid()?!this._isUTC:!1}function Kb(){return this.isValid()?this._isUTC:!1}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Mb(a,b){var c,d,e,f=a,
// matching against regexp is expensive, do it on demand
g=null;// checks for null or undefined
return wb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=He.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[$d])*c,h:t(g[_d])*c,m:t(g[ae])*c,s:t(g[be])*c,ms:t(g[ce])*c}):(g=Ie.exec(a))?(c="-"===g[1]?-1:1,f={y:Nb(g[2],c),M:Nb(g[3],c),w:Nb(g[4],c),d:Nb(g[5],c),h:Nb(g[6],c),m:Nb(g[7],c),s:Nb(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=Pb(rb(f.from),rb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new vb(f),wb(a)&&h(a,"_locale")&&(d._locale=a._locale),d}function Nb(a,b){
// We'd normally use ~~inp for this, but unfortunately it also
// converts floats to ints.
// inp may be undefined, so careful calling replace on it.
var c=a&&parseFloat(a.replace(",","."));
// apply sign while we're at it
return(isNaN(c)?0:c)*b}function Ob(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Pb(a,b){var c;return a.isValid()&&b.isValid()?(b=zb(b,a),a.isBefore(b)?c=Ob(a,b):(c=Ob(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Qb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}
// TODO: remove 'name' arg after deprecation is removed
function Rb(a,b){return function(c,d){var e,f;
//invert the arguments, but complain about it
return null===d||isNaN(+d)||(x(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Mb(c,d),Sb(this,e,a),this}}function Sb(b,c,d,e){var f=c._milliseconds,g=Qb(c._days),h=Qb(c._months);b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&P(b,"Date",O(b,"Date")+g*d),h&&ia(b,O(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Tb(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"}function Ub(b,c){
// We want to compare the start of today, vs this.
// Getting start-of-today depends on whether we're local/utc/offset or not.
var d=b||rb(),e=zb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(y(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,rb(d)))}function Vb(){return new q(this)}function Wb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function Xb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function Yb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function Zb(a,b){var c,d=r(a)?a:rb(a);return this.isValid()&&d.isValid()?(b=J(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function $b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function _b(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function ac(a,b,c){var d,e,f,g;// 1000
// 1000 * 60
// 1000 * 60 * 60
// 1000 * 60 * 60 * 24, negate dst
// 1000 * 60 * 60 * 24 * 7, negate dst
return this.isValid()?(d=zb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=J(b),"year"===b||"month"===b||"quarter"===b?(g=bc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:s(g)):NaN):NaN}function bc(a,b){
// difference in months
var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),
// b is in (anchor - 1 month, anchor + 1 month)
f=a.clone().add(e,"months");
//check for negative zero, return zero if negative zero
// linear across the month
// linear across the month
return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function cc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?y(Date.prototype.toISOString)?this.toDate().toISOString():W(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ec(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=W(this,b);return this.localeData().postformat(c)}function fc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Mb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function gc(a){return this.from(rb(),a)}function hc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Mb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.to(rb(),a)}
// If passed a locale key, it will set the locale for this
// instance.  Otherwise, it will return the locale configuration
// variables for this instance.
function jc(a){var b;return void 0===a?this._locale._abbr:(b=ab(a),null!=b&&(this._locale=b),this)}function kc(){return this._locale}function lc(a){
// the following switch intentionally omits break keywords
// to utilize falling through the cases.
switch(a=J(a)){case"year":this.month(0);/* falls through */
case"quarter":case"month":this.date(1);/* falls through */
case"week":case"isoWeek":case"day":case"date":this.hours(0);/* falls through */
case"hour":this.minutes(0);/* falls through */
case"minute":this.seconds(0);/* falls through */
case"second":this.milliseconds(0)}
// weeks are a special case
// quarters are also special
return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function mc(a){
// 'date' is an alias for 'day', so it should be considered as such.
return a=J(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function nc(){return this._d.valueOf()-6e4*(this._offset||0)}function oc(){return Math.floor(this.valueOf()/1e3)}function pc(){return new Date(this.valueOf())}function qc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function rc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function sc(){
// new Date(NaN).toJSON() === null
return this.isValid()?this.toISOString():null}function tc(){return m(this)}function uc(){return i({},l(this))}function vc(){return l(this).overflow}function wc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xc(a,b){T(0,[a,a.length],0,b)}
// MOMENTS
function yc(a){return Cc.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zc(a){return Cc.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Ac(){return wa(this.year(),1,4)}function Bc(){var a=this.localeData()._week;return wa(this.year(),a.dow,a.doy)}function Cc(a,b,c,d,e){var f;return null==a?va(this,d,e).year:(f=wa(a,d,e),b>f&&(b=f),Dc.call(this,a,b,c,d,e))}function Dc(a,b,c,d,e){var f=ua(a,b,c,d,e),g=sa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}
// MOMENTS
function Ec(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}
// HELPERS
// MOMENTS
function Fc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Gc(a,b){b[ce]=t(1e3*("0."+a))}
// MOMENTS
function Hc(){return this._isUTC?"UTC":""}function Ic(){return this._isUTC?"Coordinated Universal Time":""}function Jc(a){return rb(1e3*a)}function Kc(){return rb.apply(null,arguments).parseZone()}function Lc(a){return a}function Mc(a,b,c,d){var e=ab(),f=j().set(d,b);return e[c](f,a)}function Nc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Mc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Mc(a,d,c,"month");return e}
// ()
// (5)
// (fmt, 5)
// (fmt)
// (true)
// (true, 5)
// (true, fmt, 5)
// (true, fmt)
function Oc(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=ab(),f=a?e._week.dow:0;if(null!=c)return Mc(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Mc(b,(g+f)%7,d,"day");return h}function Pc(a,b){return Nc(a,b,"months")}function Qc(a,b){return Nc(a,b,"monthsShort")}function Rc(a,b,c){return Oc(a,b,c,"weekdays")}function Sc(a,b,c){return Oc(a,b,c,"weekdaysShort")}function Tc(a,b,c){return Oc(a,b,c,"weekdaysMin")}function Uc(){var a=this._data;return this._milliseconds=Ue(this._milliseconds),this._days=Ue(this._days),this._months=Ue(this._months),a.milliseconds=Ue(a.milliseconds),a.seconds=Ue(a.seconds),a.minutes=Ue(a.minutes),a.hours=Ue(a.hours),a.months=Ue(a.months),a.years=Ue(a.years),this}function Vc(a,b,c,d){var e=Mb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}
// supports only 2.0-style add(1, 's') or add(duration)
function Wc(a,b){return Vc(this,a,b,1)}
// supports only 2.0-style subtract(1, 's') or subtract(duration)
function Xc(a,b){return Vc(this,a,b,-1)}function Yc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Zc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;
// if we have a mix of positive and negative values, bubble down first
// check: https://github.com/moment/moment/issues/2166
// The following code bubbles up values, see the tests for
// examples of what that means.
// convert days to months
// 12 months -> 1 year
return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Yc(_c(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=s(f/1e3),i.seconds=a%60,b=s(a/60),i.minutes=b%60,c=s(b/60),i.hours=c%24,g+=s(c/24),e=s($c(g)),h+=e,g-=Yc(_c(e)),d=s(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function $c(a){
// 400 years have 146097 days (taking into account leap year rules)
// 400 years have 12 months === 4800
return 4800*a/146097}function _c(a){
// the reverse of daysToMonths
return 146097*a/4800}function ad(a){var b,c,d=this._milliseconds;if(a=J(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+$c(b),"month"===a?c:c/12;switch(b=this._days+Math.round(_c(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;
// Math.floor prevents floating point math errors here
case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}
// TODO: Use this.as('ms')?
function bd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)}function cd(a){return function(){return this.as(a)}}function dd(a){return a=J(a),this[a+"s"]()}function ed(a){return function(){return this._data[a]}}function fd(){return s(this.days()/7)}
// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
function gd(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function hd(a,b,c){var d=Mb(a).abs(),e=jf(d.as("s")),f=jf(d.as("m")),g=jf(d.as("h")),h=jf(d.as("d")),i=jf(d.as("M")),j=jf(d.as("y")),k=e<kf.s&&["s",e]||1>=f&&["m"]||f<kf.m&&["mm",f]||1>=g&&["h"]||g<kf.h&&["hh",g]||1>=h&&["d"]||h<kf.d&&["dd",h]||1>=i&&["M"]||i<kf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,gd.apply(null,k)}
// This function allows you to set the rounding function for relative time strings
function id(a){return void 0===a?jf:"function"==typeof a?(jf=a,!0):!1}
// This function allows you to set a threshold for relative time strings
function jd(a,b){return void 0===kf[a]?!1:void 0===b?kf[a]:(kf[a]=b,!0)}function kd(a){var b=this.localeData(),c=hd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function ld(){
// for ISO strings we do not use the normal bubbling rules:
//  * milliseconds bubble up until they become hours
//  * days do not bubble at all
//  * months bubble up until they become years
// This is because there is no context-free conversion between hours and days
// (think of clock changes)
// and also not between days and months (28-31 days per month)
var a,b,c,d=lf(this._milliseconds)/1e3,e=lf(this._days),f=lf(this._months);a=s(d/60),b=s(a/60),d%=60,a%=60,c=s(f/12),f%=12;
// inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var md,nd;nd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};
// Plugins that add properties should also add the key here (null value),
// so we can properly clone ourselves.
var od=a.momentProperties=[],pd=!1,qd={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var rd;rd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var sd,td={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ud={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},vd="Invalid date",wd="%d",xd=/\d{1,2}/,yd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zd={},Ad={},Bd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dd={},Ed={},Fd=/\d/,Gd=/\d\d/,Hd=/\d{3}/,Id=/\d{4}/,Jd=/[+-]?\d{6}/,Kd=/\d\d?/,Ld=/\d\d\d\d?/,Md=/\d\d\d\d\d\d?/,Nd=/\d{1,3}/,Od=/\d{1,4}/,Pd=/[+-]?\d{1,6}/,Qd=/\d+/,Rd=/[+-]?\d+/,Sd=/Z|[+-]\d\d:?\d\d/gi,Td=/Z|[+-]\d\d(?::?\d\d)?/gi,Ud=/[+-]?\d+(\.\d{1,3})?/,Vd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Wd={},Xd={},Yd=0,Zd=1,$d=2,_d=3,ae=4,be=5,ce=6,de=7,ee=8;sd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){
// I know
var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),T("MMMM",0,0,function(a){return this.localeData().months(this,a)}),I("month","M"),L("month",8),Y("M",Kd),Y("MM",Kd,Gd),Y("MMM",function(a,b){return b.monthsShortRegex(a)}),Y("MMMM",function(a,b){return b.monthsRegex(a)}),aa(["M","MM"],function(a,b){b[Zd]=t(a)-1}),aa(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Zd]=e:l(c).invalidMonth=a});
// LOCALES
var fe=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,ge="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),he="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ie=Vd,je=Vd;
// FORMATTING
T("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),
// ALIASES
I("year","y"),
// PRIORITIES
L("year",1),
// PARSING
Y("Y",Rd),Y("YY",Kd,Gd),Y("YYYY",Od,Id),Y("YYYYY",Pd,Jd),Y("YYYYYY",Pd,Jd),aa(["YYYYY","YYYYYY"],Yd),aa("YYYY",function(b,c){c[Yd]=2===b.length?a.parseTwoDigitYear(b):t(b)}),aa("YY",function(b,c){c[Yd]=a.parseTwoDigitYear(b)}),aa("Y",function(a,b){b[Yd]=parseInt(a,10)}),
// HOOKS
a.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)};
// MOMENTS
var ke=N("FullYear",!0);
// FORMATTING
T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),
// ALIASES
I("week","w"),I("isoWeek","W"),
// PRIORITIES
L("week",5),L("isoWeek",5),
// PARSING
Y("w",Kd),Y("ww",Kd,Gd),Y("W",Kd),Y("WW",Kd,Gd),ba(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=t(a)});var le={dow:0,// Sunday is the first day of the week.
doy:6};
// FORMATTING
T("d",0,"do","day"),T("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),T("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),T("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),
// ALIASES
I("day","d"),I("weekday","e"),I("isoWeekday","E"),
// PRIORITY
L("day",11),L("weekday",11),L("isoWeekday",11),
// PARSING
Y("d",Kd),Y("e",Kd),Y("E",Kd),Y("dd",function(a,b){return b.weekdaysMinRegex(a)}),Y("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Y("dddd",function(a,b){return b.weekdaysRegex(a)}),ba(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);
// if we didn't get a weekday name, mark the date as invalid
null!=e?b.d=e:l(c).invalidWeekday=a}),ba(["d","e","E"],function(a,b,c,d){b[d]=t(a)});
// LOCALES
var me="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),oe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),pe=Vd,qe=Vd,re=Vd;T("H",["HH",2],0,"hour"),T("h",["hh",2],0,Qa),T("k",["kk",2],0,Ra),T("hmm",0,0,function(){return""+Qa.apply(this)+S(this.minutes(),2)}),T("hmmss",0,0,function(){return""+Qa.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),Sa("a",!0),Sa("A",!1),
// ALIASES
I("hour","h"),
// PRIORITY
L("hour",13),Y("a",Ta),Y("A",Ta),Y("H",Kd),Y("h",Kd),Y("HH",Kd,Gd),Y("hh",Kd,Gd),Y("hmm",Ld),Y("hmmss",Md),Y("Hmm",Ld),Y("Hmmss",Md),aa(["H","HH"],_d),aa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),aa(["h","hh"],function(a,b,c){b[_d]=t(a),l(c).bigHour=!0}),aa("hmm",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d)),l(c).bigHour=!0}),aa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e)),l(c).bigHour=!0}),aa("Hmm",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d))}),aa("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e))});var se,te=/[ap]\.?m?\.?/i,ue=N("Hours",!0),ve={calendar:td,longDateFormat:ud,invalidDate:vd,ordinal:wd,ordinalParse:xd,relativeTime:yd,months:ge,monthsShort:he,week:le,weekdays:me,weekdaysMin:oe,weekdaysShort:ne,meridiemParse:te},we={},xe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ye=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ze=/Z|[+-]\d\d(?::?\d\d)?/,Ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],
// YYYYMM is NOT allowed by the standard
["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ce=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),
// constant that refers to the ISO standard
a.ISO_8601=function(){};var De=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:n()}),Ee=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:n()}),Fe=function(){return Date.now?Date.now():+new Date};xb("Z",":"),xb("ZZ",""),
// PARSING
Y("Z",Td),Y("ZZ",Td),aa(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=yb(Td,a)});
// HELPERS
// timezone chunker
// '+10:00' > ['10',  '00']
// '-1530'  > ['-15', '30']
var Ge=/([\+\-]|\d\d)/gi;
// HOOKS
// This function will be called whenever a moment is mutated.
// It is intended to keep the offset in sync with the timezone.
a.updateOffset=function(){};
// ASP.NET json date format regex
var He=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ie=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Mb.fn=vb.prototype;var Je=Rb(1,"add"),Ke=Rb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Le=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});
// FORMATTING
T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),xc("gggg","weekYear"),xc("ggggg","weekYear"),xc("GGGG","isoWeekYear"),xc("GGGGG","isoWeekYear"),
// ALIASES
I("weekYear","gg"),I("isoWeekYear","GG"),
// PRIORITY
L("weekYear",1),L("isoWeekYear",1),
// PARSING
Y("G",Rd),Y("g",Rd),Y("GG",Kd,Gd),Y("gg",Kd,Gd),Y("GGGG",Od,Id),Y("gggg",Od,Id),Y("GGGGG",Pd,Jd),Y("ggggg",Pd,Jd),ba(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=t(a)}),ba(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),
// FORMATTING
T("Q",0,"Qo","quarter"),
// ALIASES
I("quarter","Q"),
// PRIORITY
L("quarter",7),
// PARSING
Y("Q",Fd),aa("Q",function(a,b){b[Zd]=3*(t(a)-1)}),
// FORMATTING
T("D",["DD",2],"Do","date"),
// ALIASES
I("date","D"),
// PRIOROITY
L("date",9),
// PARSING
Y("D",Kd),Y("DD",Kd,Gd),Y("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),aa(["D","DD"],$d),aa("Do",function(a,b){b[$d]=t(a.match(Kd)[0],10)});
// MOMENTS
var Me=N("Date",!0);
// FORMATTING
T("DDD",["DDDD",3],"DDDo","dayOfYear"),
// ALIASES
I("dayOfYear","DDD"),
// PRIORITY
L("dayOfYear",4),
// PARSING
Y("DDD",Nd),Y("DDDD",Hd),aa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=t(a)}),
// FORMATTING
T("m",["mm",2],0,"minute"),
// ALIASES
I("minute","m"),
// PRIORITY
L("minute",14),
// PARSING
Y("m",Kd),Y("mm",Kd,Gd),aa(["m","mm"],ae);
// MOMENTS
var Ne=N("Minutes",!1);
// FORMATTING
T("s",["ss",2],0,"second"),
// ALIASES
I("second","s"),
// PRIORITY
L("second",15),
// PARSING
Y("s",Kd),Y("ss",Kd,Gd),aa(["s","ss"],be);
// MOMENTS
var Oe=N("Seconds",!1);
// FORMATTING
T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return 10*this.millisecond()}),T(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),T(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),T(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),T(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),T(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),
// ALIASES
I("millisecond","ms"),
// PRIORITY
L("millisecond",16),
// PARSING
Y("S",Nd,Fd),Y("SS",Nd,Gd),Y("SSS",Nd,Hd);var Pe;for(Pe="SSSS";Pe.length<=9;Pe+="S")Y(Pe,Qd);for(Pe="S";Pe.length<=9;Pe+="S")aa(Pe,Gc);
// MOMENTS
var Qe=N("Milliseconds",!1);
// FORMATTING
T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var Re=q.prototype;Re.add=Je,Re.calendar=Ub,Re.clone=Vb,Re.diff=ac,Re.endOf=mc,Re.format=ec,Re.from=fc,Re.fromNow=gc,Re.to=hc,Re.toNow=ic,Re.get=Q,Re.invalidAt=vc,Re.isAfter=Wb,Re.isBefore=Xb,Re.isBetween=Yb,Re.isSame=Zb,Re.isSameOrAfter=$b,Re.isSameOrBefore=_b,Re.isValid=tc,Re.lang=Le,Re.locale=jc,Re.localeData=kc,Re.max=Ee,Re.min=De,Re.parsingFlags=uc,Re.set=R,Re.startOf=lc,Re.subtract=Ke,Re.toArray=qc,Re.toObject=rc,Re.toDate=pc,Re.toISOString=dc,Re.toJSON=sc,Re.toString=cc,Re.unix=oc,Re.valueOf=nc,Re.creationData=wc,
// Year
Re.year=ke,Re.isLeapYear=qa,
// Week Year
Re.weekYear=yc,Re.isoWeekYear=zc,
// Quarter
Re.quarter=Re.quarters=Ec,
// Month
Re.month=ja,Re.daysInMonth=ka,
// Week
Re.week=Re.weeks=Aa,Re.isoWeek=Re.isoWeeks=Ba,Re.weeksInYear=Bc,Re.isoWeeksInYear=Ac,
// Day
Re.date=Me,Re.day=Re.days=Ja,Re.weekday=Ka,Re.isoWeekday=La,Re.dayOfYear=Fc,
// Hour
Re.hour=Re.hours=ue,
// Minute
Re.minute=Re.minutes=Ne,
// Second
Re.second=Re.seconds=Oe,
// Millisecond
Re.millisecond=Re.milliseconds=Qe,
// Offset
Re.utcOffset=Bb,Re.utc=Db,Re.local=Eb,Re.parseZone=Fb,Re.hasAlignedHourOffset=Gb,Re.isDST=Hb,Re.isLocal=Jb,Re.isUtcOffset=Kb,Re.isUtc=Lb,Re.isUTC=Lb,
// Timezone
Re.zoneAbbr=Hc,Re.zoneName=Ic,
// Deprecations
Re.dates=w("dates accessor is deprecated. Use date instead.",Me),Re.months=w("months accessor is deprecated. Use month instead",ja),Re.years=w("years accessor is deprecated. Use year instead",ke),Re.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Cb),Re.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ib);var Se=Re,Te=B.prototype;Te.calendar=C,Te.longDateFormat=D,Te.invalidDate=E,Te.ordinal=F,Te.preparse=Lc,Te.postformat=Lc,Te.relativeTime=G,Te.pastFuture=H,Te.set=z,
// Month
Te.months=ea,Te.monthsShort=fa,Te.monthsParse=ha,Te.monthsRegex=ma,Te.monthsShortRegex=la,
// Week
Te.week=xa,Te.firstDayOfYear=za,Te.firstDayOfWeek=ya,
// Day of Week
Te.weekdays=Ea,Te.weekdaysMin=Ga,Te.weekdaysShort=Fa,Te.weekdaysParse=Ia,Te.weekdaysRegex=Ma,Te.weekdaysShortRegex=Na,Te.weekdaysMinRegex=Oa,
// Hours
Te.isPM=Ua,Te.meridiem=Va,Za("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),
// Side effect imports
a.lang=w("moment.lang is deprecated. Use moment.locale instead.",Za),a.langData=w("moment.langData is deprecated. Use moment.localeData instead.",ab);var Ue=Math.abs,Ve=cd("ms"),We=cd("s"),Xe=cd("m"),Ye=cd("h"),Ze=cd("d"),$e=cd("w"),_e=cd("M"),af=cd("y"),bf=ed("milliseconds"),cf=ed("seconds"),df=ed("minutes"),ef=ed("hours"),ff=ed("days"),gf=ed("months"),hf=ed("years"),jf=Math.round,kf={s:45,// seconds to minute
m:45,// minutes to hour
h:22,// hours to day
d:26,// days to month
M:11},lf=Math.abs,mf=vb.prototype;mf.abs=Uc,mf.add=Wc,mf.subtract=Xc,mf.as=ad,mf.asMilliseconds=Ve,mf.asSeconds=We,mf.asMinutes=Xe,mf.asHours=Ye,mf.asDays=Ze,mf.asWeeks=$e,mf.asMonths=_e,mf.asYears=af,mf.valueOf=bd,mf._bubble=Zc,mf.get=dd,mf.milliseconds=bf,mf.seconds=cf,mf.minutes=df,mf.hours=ef,mf.days=ff,mf.weeks=fd,mf.months=gf,mf.years=hf,mf.humanize=kd,mf.toISOString=ld,mf.toString=ld,mf.toJSON=ld,mf.locale=jc,mf.localeData=kc,
// Deprecations
mf.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ld),mf.lang=Le,
// Side effect imports
// FORMATTING
T("X",0,0,"unix"),T("x",0,0,"valueOf"),
// PARSING
Y("x",Rd),Y("X",Ud),aa("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),aa("x",function(a,b,c){c._d=new Date(t(a))}),
// Side effect imports
a.version="2.14.1",b(rb),a.fn=Se,a.min=tb,a.max=ub,a.now=Fe,a.utc=j,a.unix=Jc,a.months=Pc,a.isDate=f,a.locale=Za,a.invalid=n,a.duration=Mb,a.isMoment=r,a.weekdays=Rc,a.parseZone=Kc,a.localeData=ab,a.isDuration=wb,a.monthsShort=Qc,a.weekdaysMin=Tc,a.defineLocale=$a,a.updateLocale=_a,a.locales=bb,a.weekdaysShort=Sc,a.normalizeUnits=J,a.relativeTimeRounding=id,a.relativeTimeThreshold=jd,a.calendarFormat=Tb,a.prototype=Se;var nf=a;return nf});
/*! version : 4.17.37
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
!function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],a);else if("object"==typeof exports)a(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";a(jQuery,moment)}}(function(a,b){"use strict";if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c=function(c,d){var e,f,g,h,i,j,k,l={},m=!0,n=!1,o=!1,p=0,q=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],r=["days","months","years","decades"],s=["top","bottom","auto"],t=["left","right","auto"],u=["default","top","bottom"],v={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},w={},x=function(a){var c,e,f,g,h,i=!1;return void 0!==b.tz&&void 0!==d.timeZone&&null!==d.timeZone&&""!==d.timeZone&&(i=!0),void 0===a||null===a?c=i?b().tz(d.timeZone).startOf("d"):b().startOf("d"):i?(e=b().tz(d.timeZone).utcOffset(),f=b(a,j,d.useStrict).utcOffset(),f!==e?(g=b().tz(d.timeZone).format("Z"),h=b(a,j,d.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+g,c=b(h,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict),c},y=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return-1!==i.indexOf("Y");case"M":return-1!==i.indexOf("M");case"d":return-1!==i.toLowerCase().indexOf("d");case"h":case"H":return-1!==i.toLowerCase().indexOf("h");case"m":return-1!==i.indexOf("m");case"s":return-1!==i.indexOf("s");default:return!1}},z=function(){return y("h")||y("m")||y("s")},A=function(){return y("y")||y("M")||y("d")},B=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",d.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(d.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",d.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},C=function(){var b=a("<tr>"),c=a("<tr>"),e=a("<tr>");return y("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:d.tooltips.pickHour}).attr("data-action","showHours"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(d.icons.down))))),y("m")&&(y("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:d.tooltips.pickMinute}).attr("data-action","showMinutes"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(d.icons.down))))),y("s")&&(y("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:d.tooltips.pickSecond}).attr("data-action","showSeconds"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(d.icons.down))))),h||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:d.tooltips.togglePeriod}))),e.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,e]))},D=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[C()];return y("h")&&e.push(b),y("m")&&e.push(c),y("s")&&e.push(d),e},E=function(){var b=[];return d.showTodayButton&&b.push(a("<td>").append(a("<a>").attr({"data-action":"today",title:d.tooltips.today}).append(a("<span>").addClass(d.icons.today)))),!d.sideBySide&&A()&&z()&&b.push(a("<td>").append(a("<a>").attr({"data-action":"togglePicker",title:d.tooltips.selectTime}).append(a("<span>").addClass(d.icons.time)))),d.showClear&&b.push(a("<td>").append(a("<a>").attr({"data-action":"clear",title:d.tooltips.clear}).append(a("<span>").addClass(d.icons.clear)))),d.showClose&&b.push(a("<td>").append(a("<a>").attr({"data-action":"close",title:d.tooltips.close}).append(a("<span>").addClass(d.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},F=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(B()),e=a("<div>").addClass("timepicker").append(D()),f=a("<ul>").addClass("list-unstyled"),g=a("<li>").addClass("picker-switch"+(d.collapse?" accordion-toggle":"")).append(E());return d.inline&&b.removeClass("dropdown-menu"),h&&b.addClass("usetwentyfour"),y("s")&&!h&&b.addClass("wider"),d.sideBySide&&A()&&z()?(b.addClass("timepicker-sbs"),"top"===d.toolbarPlacement&&b.append(g),b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))),"bottom"===d.toolbarPlacement&&b.append(g),b):("top"===d.toolbarPlacement&&f.append(g),A()&&f.append(a("<li>").addClass(d.collapse&&z()?"collapse in":"").append(c)),"default"===d.toolbarPlacement&&f.append(g),z()&&f.append(a("<li>").addClass(d.collapse&&A()?"collapse":"").append(e)),"bottom"===d.toolbarPlacement&&f.append(g),b.append(f))},G=function(){var b,e={};return b=c.is("input")||d.inline?c.data():c.find("input").data(),b.dateOptions&&b.dateOptions instanceof Object&&(e=a.extend(!0,e,b.dateOptions)),a.each(d,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(e[a]=b[c])}),e},H=function(){var b,e=(n||c).position(),f=(n||c).offset(),g=d.widgetPositioning.vertical,h=d.widgetPositioning.horizontal;if(d.widgetParent)b=d.widgetParent.append(o);else if(c.is("input"))b=c.after(o).parent();else{if(d.inline)return void(b=c.append(o));b=c,c.children().first().after(o)}if("auto"===g&&(g=f.top+1.5*o.height()>=a(window).height()+a(window).scrollTop()&&o.height()+c.outerHeight()<f.top?"top":"bottom"),"auto"===h&&(h=b.width()<f.left+o.outerWidth()/2&&f.left+o.outerWidth()>a(window).width()?"right":"left"),"top"===g?o.addClass("top").removeClass("bottom"):o.addClass("bottom").removeClass("top"),"right"===h?o.addClass("pull-right"):o.removeClass("pull-right"),"relative"!==b.css("position")&&(b=b.parents().filter(function(){return"relative"===a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a relative positioned container");o.css({top:"top"===g?"auto":e.top+c.outerHeight(),bottom:"top"===g?e.top+c.outerHeight():"auto",left:"left"===h?b===c?0:e.left:"auto",right:"left"===h?"auto":b.outerWidth()-c.outerWidth()-(b===c?0:e.left)})},I=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||c.trigger(a)},J=function(a){"y"===a&&(a="YYYY"),I({type:"dp.update",change:a,viewDate:f.clone()})},K=function(a){o&&(a&&(k=Math.max(p,Math.min(3,k+a))),o.find(".datepicker > div").hide().filter(".datepicker-"+q[k].clsName).show())},L=function(){var b=a("<tr>"),c=f.clone().startOf("w").startOf("d");for(d.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(f.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");o.find(".datepicker-days thead").append(b)},M=function(a){return d.disabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a){return d.enabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){return d.disabledHours[a.format("H")]===!0},P=function(a){return d.enabledHours[a.format("H")]===!0},Q=function(b,c){if(!b.isValid())return!1;if(d.disabledDates&&"d"===c&&M(b))return!1;if(d.enabledDates&&"d"===c&&!N(b))return!1;if(d.minDate&&b.isBefore(d.minDate,c))return!1;if(d.maxDate&&b.isAfter(d.maxDate,c))return!1;if(d.daysOfWeekDisabled&&"d"===c&&-1!==d.daysOfWeekDisabled.indexOf(b.day()))return!1;if(d.disabledHours&&("h"===c||"m"===c||"s"===c)&&O(b))return!1;if(d.enabledHours&&("h"===c||"m"===c||"s"===c)&&!P(b))return!1;if(d.disabledTimeIntervals&&("h"===c||"m"===c||"s"===c)){var e=!1;if(a.each(d.disabledTimeIntervals,function(){return b.isBetween(this[0],this[1])?(e=!0,!1):void 0}),e)return!1}return!0},R=function(){for(var b=[],c=f.clone().startOf("y").startOf("d");c.isSame(f,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");o.find(".datepicker-months td").empty().append(b)},S=function(){var b=o.find(".datepicker-months"),c=b.find("th"),g=b.find("tbody").find("span");c.eq(0).find("span").attr("title",d.tooltips.prevYear),c.eq(1).attr("title",d.tooltips.selectYear),c.eq(2).find("span").attr("title",d.tooltips.nextYear),b.find(".disabled").removeClass("disabled"),Q(f.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(f.year()),Q(f.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),g.removeClass("active"),e.isSame(f,"y")&&!m&&g.eq(e.month()).addClass("active"),g.each(function(b){Q(f.clone().month(b),"M")||a(this).addClass("disabled")})},T=function(){var a=o.find(".datepicker-years"),b=a.find("th"),c=f.clone().subtract(5,"y"),g=f.clone().add(6,"y"),h="";for(b.eq(0).find("span").attr("title",d.tooltips.prevDecade),b.eq(1).attr("title",d.tooltips.selectDecade),b.eq(2).find("span").attr("title",d.tooltips.nextDecade),a.find(".disabled").removeClass("disabled"),d.minDate&&d.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+g.year()),d.maxDate&&d.maxDate.isBefore(g,"y")&&b.eq(2).addClass("disabled");!c.isAfter(g,"y");)h+='<span data-action="selectYear" class="year'+(c.isSame(e,"y")&&!m?" active":"")+(Q(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(h)},U=function(){var a=o.find(".datepicker-decades"),c=a.find("th"),g=b({y:f.year()-f.year()%100-1}),h=g.clone().add(100,"y"),i=g.clone(),j="";for(c.eq(0).find("span").attr("title",d.tooltips.prevCentury),c.eq(2).find("span").attr("title",d.tooltips.nextCentury),a.find(".disabled").removeClass("disabled"),(g.isSame(b({y:1900}))||d.minDate&&d.minDate.isAfter(g,"y"))&&c.eq(0).addClass("disabled"),c.eq(1).text(g.year()+"-"+h.year()),(g.isSame(b({y:2e3}))||d.maxDate&&d.maxDate.isBefore(h,"y"))&&c.eq(2).addClass("disabled");!g.isAfter(h,"y");)j+='<span data-action="selectDecade" class="decade'+(g.isSame(e,"y")?" active":"")+(Q(g,"y")?"":" disabled")+'" data-selection="'+(g.year()+6)+'">'+(g.year()+1)+" - "+(g.year()+12)+"</span>",g.add(12,"y");j+="<span></span><span></span><span></span>",a.find("td").html(j),c.eq(1).text(i.year()+1+"-"+g.year())},V=function(){var b,c,g,h,i=o.find(".datepicker-days"),j=i.find("th"),k=[];if(A()){for(j.eq(0).find("span").attr("title",d.tooltips.prevMonth),j.eq(1).attr("title",d.tooltips.selectMonth),j.eq(2).find("span").attr("title",d.tooltips.nextMonth),i.find(".disabled").removeClass("disabled"),j.eq(1).text(f.format(d.dayViewHeaderFormat)),Q(f.clone().subtract(1,"M"),"M")||j.eq(0).addClass("disabled"),Q(f.clone().add(1,"M"),"M")||j.eq(2).addClass("disabled"),b=f.clone().startOf("M").startOf("w").startOf("d"),h=0;42>h;h++)0===b.weekday()&&(c=a("<tr>"),d.calendarWeeks&&c.append('<td class="cw">'+b.week()+"</td>"),k.push(c)),g="",b.isBefore(f,"M")&&(g+=" old"),b.isAfter(f,"M")&&(g+=" new"),b.isSame(e,"d")&&!m&&(g+=" active"),Q(b,"d")||(g+=" disabled"),b.isSame(x(),"d")&&(g+=" today"),(0===b.day()||6===b.day())&&(g+=" weekend"),c.append('<td data-action="selectDay" data-day="'+b.format("L")+'" class="day'+g+'">'+b.date()+"</td>"),b.add(1,"d");i.find("tbody").empty().append(k),S(),T(),U()}},W=function(){var b=o.find(".timepicker-hours table"),c=f.clone().startOf("d"),d=[],e=a("<tr>");for(f.hour()>11&&!h&&c.hour(12);c.isSame(f,"d")&&(h||f.hour()<12&&c.hour()<12||f.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(Q(c,"h")?"":" disabled")+'">'+c.format(h?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},X=function(){for(var b=o.find(".timepicker-minutes table"),c=f.clone().startOf("h"),e=[],g=a("<tr>"),h=1===d.stepping?5:d.stepping;f.isSame(c,"h");)c.minute()%(4*h)===0&&(g=a("<tr>"),e.push(g)),g.append('<td data-action="selectMinute" class="minute'+(Q(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(h,"m");b.empty().append(e)},Y=function(){for(var b=o.find(".timepicker-seconds table"),c=f.clone().startOf("m"),d=[],e=a("<tr>");f.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(Q(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},Z=function(){var a,b,c=o.find(".timepicker span[data-time-component]");h||(a=o.find(".timepicker [data-action=togglePeriod]"),b=e.clone().add(e.hours()>=12?-12:12,"h"),a.text(e.format("A")),Q(b,"h")?a.removeClass("disabled"):a.addClass("disabled")),c.filter("[data-time-component=hours]").text(e.format(h?"HH":"hh")),c.filter("[data-time-component=minutes]").text(e.format("mm")),c.filter("[data-time-component=seconds]").text(e.format("ss")),W(),X(),Y()},$=function(){o&&(V(),Z())},_=function(a){var b=m?null:e;return a?(a=a.clone().locale(d.locale),1!==d.stepping&&a.minutes(Math.round(a.minutes()/d.stepping)*d.stepping%60).seconds(0),void(Q(a)?(e=a,f=e.clone(),g.val(e.format(i)),c.data("date",e.format(i)),m=!1,$(),I({type:"dp.change",date:e.clone(),oldDate:b})):(d.keepInvalid||g.val(m?"":e.format(i)),I({type:"dp.error",date:a})))):(m=!0,g.val(""),c.data("date",""),I({type:"dp.change",date:!1,oldDate:b}),void $())},aa=function(){var b=!1;return o?(o.find(".collapse").each(function(){var c=a(this).data("collapse");return c&&c.transitioning?(b=!0,!1):!0}),b?l:(n&&n.hasClass("btn")&&n.toggleClass("active"),o.hide(),a(window).off("resize",H),o.off("click","[data-action]"),o.off("mousedown",!1),o.remove(),o=!1,I({type:"dp.hide",date:e.clone()}),g.blur(),l)):l},ba=function(){_(null)},ca={next:function(){var a=q[k].navFnc;f.add(q[k].navStep,a),V(),J(a)},previous:function(){var a=q[k].navFnc;f.subtract(q[k].navStep,a),V(),J(a)},pickerSwitch:function(){K(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));f.month(c),k===p?(_(e.clone().year(f.year()).month(f.month())),d.inline||aa()):(K(-1),V()),J("M")},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDecade:function(b){var c=parseInt(a(b.target).data("selection"),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDay:function(b){var c=f.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),_(c.date(parseInt(a(b.target).text(),10))),z()||d.keepOpen||d.inline||aa()},incrementHours:function(){var a=e.clone().add(1,"h");Q(a,"h")&&_(a)},incrementMinutes:function(){var a=e.clone().add(d.stepping,"m");Q(a,"m")&&_(a)},incrementSeconds:function(){var a=e.clone().add(1,"s");Q(a,"s")&&_(a)},decrementHours:function(){var a=e.clone().subtract(1,"h");Q(a,"h")&&_(a)},decrementMinutes:function(){var a=e.clone().subtract(d.stepping,"m");Q(a,"m")&&_(a)},decrementSeconds:function(){var a=e.clone().subtract(1,"s");Q(a,"s")&&_(a)},togglePeriod:function(){_(e.clone().add(e.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,e=a(b.target),f=e.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),e.is("span")?e.toggleClass(d.icons.time+" "+d.icons.date):e.find("span").toggleClass(d.icons.time+" "+d.icons.date)}},showPicker:function(){o.find(".timepicker > div:not(.timepicker-picker)").hide(),o.find(".timepicker .timepicker-picker").show()},showHours:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-hours").show()},showMinutes:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);h||(e.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),_(e.clone().hours(c)),ca.showPicker.call(l)},selectMinute:function(b){_(e.clone().minutes(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},selectSecond:function(b){_(e.clone().seconds(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},clear:ba,today:function(){var a=x();Q(a,"d")&&_(a)},close:aa},da=function(b){return a(b.currentTarget).is(".disabled")?!1:(ca[a(b.currentTarget).data("action")].apply(l,arguments),!1)},ea=function(){var b,c={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return g.prop("disabled")||!d.ignoreReadonly&&g.prop("readonly")||o?l:(void 0!==g.val()&&0!==g.val().trim().length?_(ga(g.val().trim())):d.useCurrent&&m&&(g.is("input")&&0===g.val().trim().length||d.inline)&&(b=x(),"string"==typeof d.useCurrent&&(b=c[d.useCurrent](b)),_(b)),o=F(),L(),R(),o.find(".timepicker-hours").hide(),o.find(".timepicker-minutes").hide(),o.find(".timepicker-seconds").hide(),$(),K(),a(window).on("resize",H),o.on("click","[data-action]",da),o.on("mousedown",!1),n&&n.hasClass("btn")&&n.toggleClass("active"),o.show(),H(),d.focusOnShow&&!g.is(":focus")&&g.focus(),I({type:"dp.show"}),l)},fa=function(){return o?aa():ea()},ga=function(a){return a=void 0===d.parseInputDate?b.isMoment(a)||a instanceof Date?b(a):x(a):d.parseInputDate(a),a.locale(d.locale),a},ha=function(a){var b,c,e,f,g=null,h=[],i={},j=a.which,k="p";w[j]=k;for(b in w)w.hasOwnProperty(b)&&w[b]===k&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in d.keyBinds)if(d.keyBinds.hasOwnProperty(b)&&"function"==typeof d.keyBinds[b]&&(e=b.split(" "),e.length===h.length&&v[j]===e[e.length-1])){for(f=!0,c=e.length-2;c>=0;c--)if(!(v[e[c]]in i)){f=!1;break}if(f){g=d.keyBinds[b];break}}g&&(g.call(l,o),a.stopPropagation(),a.preventDefault())},ia=function(a){w[a.which]="r",a.stopPropagation(),a.preventDefault()},ja=function(b){var c=a(b.target).val().trim(),d=c?ga(c):null;return _(d),b.stopImmediatePropagation(),!1},ka=function(){g.on({change:ja,blur:d.debug?"":aa,keydown:ha,keyup:ia,focus:d.allowInputToggle?ea:""}),c.is("input")?g.on({focus:ea}):n&&(n.on("click",fa),n.on("mousedown",!1))},la=function(){g.off({change:ja,blur:blur,keydown:ha,keyup:ia,focus:d.allowInputToggle?aa:""}),c.is("input")?g.off({focus:ea}):n&&(n.off("click",fa),n.off("mousedown",!1))},ma=function(b){var c={};return a.each(b,function(){var a=ga(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),Object.keys(c).length?c:!1},na=function(b){var c={};return a.each(b,function(){c[this]=!0}),Object.keys(c).length?c:!1},oa=function(){var a=d.format||"L LT";i=a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){var b=e.localeData().longDateFormat(a)||a;return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){return e.localeData().longDateFormat(a)||a})}),j=d.extraFormats?d.extraFormats.slice():[],j.indexOf(a)<0&&j.indexOf(i)<0&&j.push(i),h=i.toLowerCase().indexOf("a")<1&&i.replace(/\[.*?\]/g,"").indexOf("h")<1,y("y")&&(p=2),y("M")&&(p=1),y("d")&&(p=0),k=Math.max(p,k),m||_(e)};if(l.destroy=function(){aa(),la(),c.removeData("DateTimePicker"),c.removeData("date")},l.toggle=fa,l.show=ea,l.hide=aa,l.disable=function(){return aa(),n&&n.hasClass("btn")&&n.addClass("disabled"),g.prop("disabled",!0),l},l.enable=function(){return n&&n.hasClass("btn")&&n.removeClass("disabled"),g.prop("disabled",!1),l},l.ignoreReadonly=function(a){if(0===arguments.length)return d.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return d.ignoreReadonly=a,l},l.options=function(b){if(0===arguments.length)return a.extend(!0,{},d);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,d,b),a.each(d,function(a,b){if(void 0===l[a])throw new TypeError("option "+a+" is not recognized!");l[a](b)}),l},l.date=function(a){if(0===arguments.length)return m?null:e.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return _(null===a?null:ga(a)),l},l.format=function(a){if(0===arguments.length)return d.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+a);return d.format=a,i&&oa(),l},l.timeZone=function(a){return 0===arguments.length?d.timeZone:(d.timeZone=a,l)},l.dayViewHeaderFormat=function(a){if(0===arguments.length)return d.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return d.dayViewHeaderFormat=a,l},l.extraFormats=function(a){if(0===arguments.length)return d.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return d.extraFormats=a,j&&oa(),l},l.disabledDates=function(b){if(0===arguments.length)return d.disabledDates?a.extend({},d.disabledDates):d.disabledDates;if(!b)return d.disabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return d.disabledDates=ma(b),d.enabledDates=!1,$(),l},l.enabledDates=function(b){if(0===arguments.length)return d.enabledDates?a.extend({},d.enabledDates):d.enabledDates;if(!b)return d.enabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return d.enabledDates=ma(b),d.disabledDates=!1,$(),l},l.daysOfWeekDisabled=function(a){if(0===arguments.length)return d.daysOfWeekDisabled.splice(0);if("boolean"==typeof a&&!a)return d.daysOfWeekDisabled=!1,$(),l;if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(d.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||0>b||isNaN(b)?a:(-1===a.indexOf(b)&&a.push(b),a)},[]).sort(),d.useCurrent&&!d.keepInvalid){for(var b=0;!Q(e,"d");){if(e.add(1,"d"),7===b)throw"Tried 7 times to find a valid date";b++}_(e)}return $(),l},l.maxDate=function(a){if(0===arguments.length)return d.maxDate?d.maxDate.clone():d.maxDate;if("boolean"==typeof a&&a===!1)return d.maxDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(d.minDate&&b.isBefore(d.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+b.format(i));return d.maxDate=b,d.useCurrent&&!d.keepInvalid&&e.isAfter(a)&&_(d.maxDate),f.isAfter(b)&&(f=b.clone().subtract(d.stepping,"m")),$(),l},l.minDate=function(a){if(0===arguments.length)return d.minDate?d.minDate.clone():d.minDate;if("boolean"==typeof a&&a===!1)return d.minDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(d.maxDate&&b.isAfter(d.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+b.format(i));return d.minDate=b,d.useCurrent&&!d.keepInvalid&&e.isBefore(a)&&_(d.minDate),f.isBefore(b)&&(f=b.clone().add(d.stepping,"m")),$(),l},l.defaultDate=function(a){if(0===arguments.length)return d.defaultDate?d.defaultDate.clone():d.defaultDate;if(!a)return d.defaultDate=!1,l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!Q(b))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return d.defaultDate=b,(d.defaultDate&&d.inline||""===g.val().trim())&&_(d.defaultDate),l},l.locale=function(a){if(0===arguments.length)return d.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return d.locale=a,e.locale(d.locale),f.locale(d.locale),i&&oa(),o&&(aa(),ea()),l},l.stepping=function(a){return 0===arguments.length?d.stepping:(a=parseInt(a,10),(isNaN(a)||1>a)&&(a=1),d.stepping=a,l)},l.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return d.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&-1===b.indexOf(a.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return d.useCurrent=a,l},l.collapse=function(a){if(0===arguments.length)return d.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return d.collapse===a?l:(d.collapse=a,o&&(aa(),ea()),l)},l.icons=function(b){if(0===arguments.length)return a.extend({},d.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(d.icons,b),o&&(aa(),ea()),l},l.tooltips=function(b){if(0===arguments.length)return a.extend({},d.tooltips);if(!(b instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return a.extend(d.tooltips,b),o&&(aa(),ea()),l},l.useStrict=function(a){if(0===arguments.length)return d.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return d.useStrict=a,l},l.sideBySide=function(a){if(0===arguments.length)return d.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return d.sideBySide=a,o&&(aa(),ea()),l},l.viewMode=function(a){if(0===arguments.length)return d.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(-1===r.indexOf(a))throw new TypeError("viewMode() parameter must be one of ("+r.join(", ")+") value");return d.viewMode=a,k=Math.max(r.indexOf(a),p),K(),l},l.toolbarPlacement=function(a){if(0===arguments.length)return d.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===u.indexOf(a))throw new TypeError("toolbarPlacement() parameter must be one of ("+u.join(", ")+") value");return d.toolbarPlacement=a,o&&(aa(),ea()),l},l.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},d.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),-1===t.indexOf(b.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+t.join(", ")+")");d.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),-1===s.indexOf(b.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+s.join(", ")+")");d.widgetPositioning.vertical=b.vertical}return $(),l},l.calendarWeeks=function(a){if(0===arguments.length)return d.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return d.calendarWeeks=a,$(),l},l.showTodayButton=function(a){if(0===arguments.length)return d.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return d.showTodayButton=a,o&&(aa(),ea()),l},l.showClear=function(a){if(0===arguments.length)return d.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return d.showClear=a,o&&(aa(),ea()),l},l.widgetParent=function(b){if(0===arguments.length)return d.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return d.widgetParent=b,o&&(aa(),ea()),l},l.keepOpen=function(a){if(0===arguments.length)return d.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return d.keepOpen=a,l},l.focusOnShow=function(a){if(0===arguments.length)return d.focusOnShow;if("boolean"!=typeof a)throw new TypeError("focusOnShow() expects a boolean parameter");return d.focusOnShow=a,l},l.inline=function(a){if(0===arguments.length)return d.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return d.inline=a,l},l.clear=function(){return ba(),l},l.keyBinds=function(a){return d.keyBinds=a,l},l.getMoment=function(a){return x(a)},l.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return d.debug=a,l},l.allowInputToggle=function(a){if(0===arguments.length)return d.allowInputToggle;if("boolean"!=typeof a)throw new TypeError("allowInputToggle() expects a boolean parameter");return d.allowInputToggle=a,l},l.showClose=function(a){if(0===arguments.length)return d.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return d.showClose=a,l},l.keepInvalid=function(a){if(0===arguments.length)return d.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");return d.keepInvalid=a,l},l.datepickerInput=function(a){if(0===arguments.length)return d.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return d.datepickerInput=a,l},l.parseInputDate=function(a){if(0===arguments.length)return d.parseInputDate;
if("function"!=typeof a)throw new TypeError("parseInputDate() sholud be as function");return d.parseInputDate=a,l},l.disabledTimeIntervals=function(b){if(0===arguments.length)return d.disabledTimeIntervals?a.extend({},d.disabledTimeIntervals):d.disabledTimeIntervals;if(!b)return d.disabledTimeIntervals=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return d.disabledTimeIntervals=b,$(),l},l.disabledHours=function(b){if(0===arguments.length)return d.disabledHours?a.extend({},d.disabledHours):d.disabledHours;if(!b)return d.disabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(d.disabledHours=na(b),d.enabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.enabledHours=function(b){if(0===arguments.length)return d.enabledHours?a.extend({},d.enabledHours):d.enabledHours;if(!b)return d.enabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(d.enabledHours=na(b),d.disabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.viewDate=function(a){if(0===arguments.length)return f.clone();if(!a)return f=e.clone(),l;if(!("string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return f=ga(a),J(),l},c.is("input"))g=c;else if(g=c.find(d.datepickerInput),0===g.size())g=c.find("input");else if(!g.is("input"))throw new Error('CSS class "'+d.datepickerInput+'" cannot be applied to non input element');if(c.hasClass("input-group")&&(n=0===c.find(".datepickerbutton").size()?c.find(".input-group-addon"):c.find(".datepickerbutton")),!d.inline&&!g.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e=x(),f=e.clone(),a.extend(!0,d,G()),l.options(d),oa(),ka(),g.prop("disabled")&&l.disable(),g.is("input")&&0!==g.val().trim().length?_(ga(g.val().trim())):d.defaultDate&&void 0===g.attr("placeholder")&&_(d.defaultDate),d.inline&&ea(),l};a.fn.datetimepicker=function(b){return this.each(function(){var d=a(this);d.data("DateTimePicker")||(b=a.extend(!0,{},a.fn.datetimepicker.defaults,b),d.data("DateTimePicker",c(d,b)))})},a.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(7,"d")):this.date(b.clone().add(this.stepping(),"m"))}},down:function(a){if(!a)return void this.show();var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(7,"d")):this.date(b.clone().subtract(this.stepping(),"m"))},"control up":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(1,"y")):this.date(b.clone().add(1,"h"))}},"control down":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(1,"y")):this.date(b.clone().subtract(1,"h"))}},left:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"d"))}},right:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"d"))}},pageUp:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}});
/*
 * bootstrap-tagsinput v0.8.0
 * 
 */

!function(a){"use strict";function b(b,c){this.isInit=!0,this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(c),this.isInit=!1}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?i.text(a).html():""}function f(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function g(b,c){var d=!1;return a.each(c,function(a,c){if("number"==typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}}),d}var h={tagClass:function(a){return"label label-info"},focusClass:"focus",itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};b.prototype={constructor:b,add:function(b,c,d){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags)&&(b===!1||b)){if("string"==typeof b&&f.options.trimValue&&(b=a.trim(b)),"object"==typeof b&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){if(f.isSelect&&!f.multiple&&f.itemsArray.length>0&&f.remove(f.itemsArray[0]),"string"==typeof b&&"INPUT"===this.$element[0].tagName){var g=f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter,h=b.split(g);if(h.length>1){for(var i=0;i<h.length;i++)this.add(h[i],!0);return void(c||f.pushVal(f.options.triggerChange))}}var j=f.options.itemValue(b),k=f.options.itemText(b),l=f.options.tagClass(b),m=f.options.itemTitle(b),n=a.grep(f.itemsArray,function(a){return f.options.itemValue(a)===j})[0];if(!n||f.options.allowDuplicates){if(!(f.items().toString().length+b.length+1>f.options.maxInputLength)){var o=a.Event("beforeItemAdd",{item:b,cancel:!1,options:d});if(f.$element.trigger(o),!o.cancel){f.itemsArray.push(b);var p=a('<span class="tag '+e(l)+(null!==m?'" title="'+m:"")+'">'+e(k)+'<span data-role="remove"></span></span>');p.data("item",b),f.findInputWrapper().before(p),p.after(" ");var q=a('option[value="'+encodeURIComponent(j)+'"]',f.$element).length||a('option[value="'+e(j)+'"]',f.$element).length;if(f.isSelect&&!q){var r=a("<option selected>"+e(k)+"</option>");r.data("item",b),r.attr("value",j),f.$element.append(r)}c||f.pushVal(f.options.triggerChange),(f.options.maxTags===f.itemsArray.length||f.items().toString().length===f.options.maxInputLength)&&f.$container.addClass("bootstrap-tagsinput-max"),a(".typeahead, .twitter-typeahead",f.$container).length&&f.$input.typeahead("val",""),this.isInit?f.$element.trigger(a.Event("itemAddedOnInit",{item:b,options:d})):f.$element.trigger(a.Event("itemAdded",{item:b,options:d}))}}}else if(f.options.onTagExists){var s=a(".tag",f.$container).filter(function(){return a(this).data("item")===n});f.options.onTagExists(b,s)}}}},remove:function(b,c,d){var e=this;if(e.objectItems&&(b="object"==typeof b?a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==e.options.itemValue(b)}):a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==b}),b=b[b.length-1]),b){var f=a.Event("beforeItemRemove",{item:b,cancel:!1,options:d});if(e.$element.trigger(f),f.cancel)return;a(".tag",e.$container).filter(function(){return a(this).data("item")===b}).remove(),a("option",e.$element).filter(function(){return a(this).data("item")===b}).remove(),-1!==a.inArray(b,e.itemsArray)&&e.itemsArray.splice(a.inArray(b,e.itemsArray),1)}c||e.pushVal(e.options.triggerChange),e.options.maxTags>e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max"),e.$element.trigger(a.Event("itemRemoved",{item:b,options:d}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal(b.options.triggerChange)},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),d=c.data("item"),f=b.options.itemValue(d),g=b.options.itemText(d),h=b.options.tagClass(d);if(c.attr("class",null),c.addClass("tag "+e(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===d});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0),b.options.triggerChange&&b.$element.trigger("change")},build:function(b){var e=this;if(e.options=a.extend({},h,b),e.objectItems&&(e.options.freeInput=!1),c(e.options,"itemValue"),c(e.options,"itemText"),d(e.options,"tagClass"),e.options.typeahead){var i=e.options.typeahead||{};d(i,"source"),e.$input.typeahead(a.extend({},i,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d],b.push(g)}c(b)}this.map={};var f=this.map,g=i.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){return e.add(this.map[a]),this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){var b=new RegExp("("+this.query+")","gi");return a.replace(b,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var j=null,k={},l=e.options.typeaheadjs;a.isArray(l)?(j=l[0],k=l[1]):k=l,e.$input.typeahead(j,k).on("typeahead:selected",a.proxy(function(a,b){k.valueKey?e.add(b[k.valueKey]):e.add(b),e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",a.proxy(function(b){0===a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on({focusin:function(){e.$container.addClass(e.options.focusClass)},focusout:function(){e.$container.removeClass(e.options.focusClass)}}),e.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),d=e.findInputWrapper();if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");switch(b.which){case 8:if(0===f(c[0])){var g=d.prev();g.length&&e.remove(g.data("item"))}break;case 46:if(0===f(c[0])){var h=d.next();h.length&&e.remove(h.data("item"))}break;case 37:var i=d.prev();0===c.val().length&&i[0]&&(i.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus())}var k=c.val().length;Math.ceil(k/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("keypress","input",a.proxy(function(b){var c=a(b.target);if(e.$element.attr("disabled"))return void e.$input.attr("disabled","disabled");var d=c.val(),f=e.options.maxChars&&d.length>=e.options.maxChars;e.options.freeInput&&(g(b,e.options.confirmKeys)||f)&&(0!==d.length&&(e.add(f?d.substr(0,e.options.maxChars):d),c.val("")),e.options.cancelConfirmKeysOnEmpty===!1&&b.preventDefault());var h=c.val().length;Math.ceil(h/5);c.attr("size",Math.max(this.inputSize,c.val().length))},e)),e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d,e){var f=[];return this.each(function(){var g=a(this).data("tagsinput");if(g)if(c||d){if(void 0!==g[c]){if(3===g[c].length&&void 0!==e)var h=g[c](d,null,e);else var h=g[c](d);void 0!==h&&f.push(h)}}else f.push(g);else g=new b(this,c),a(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?f.length>1?f:f[0]:f},a.fn.tagsinput.Constructor=b;var i=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map
/* =============================================================
 * bootstrap-combobox.js v1.1.7
 * =============================================================
 * Copyright 2012 Daniel Farrell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

!function( $ ) {

 "use strict";

 /* COMBOBOX PUBLIC CLASS DEFINITION
  * ================================ */

  var Combobox = function ( element, options ) {
    this.options = $.extend({}, $.fn.combobox.defaults, options);
    this.template = this.options.template || this.template
    this.$source = $(element);
    this.$container = this.setup();
    this.$element = this.$container.find('input[type=text]');
    this.$target = this.$container.find('input[type=hidden]');
    this.$button = this.$container.find('.dropdown-toggle');
    this.$menu = $(this.options.menu).appendTo('body');
    this.matcher = this.options.matcher || this.matcher;
    this.sorter = this.options.sorter || this.sorter;
    this.highlighter = this.options.highlighter || this.highlighter;
    this.shown = false;
    this.selected = false;
    this.refresh();
    this.transferAttributes();
    this.listen();
  };

  Combobox.prototype = {

    constructor: Combobox

  , setup: function () {
      var combobox = $(this.template());
      this.$source.before(combobox);
      this.$source.hide();
      return combobox;
    }

  , disable: function() {
      this.$element.prop('disabled', true);
      this.$button.attr('disabled', true);
      this.disabled = true;
      this.$container.addClass('combobox-disabled');
    }

  , enable: function() {
      this.$element.prop('disabled', false);
      this.$button.attr('disabled', false);
      this.disabled = false;
      this.$container.removeClass('combobox-disabled');
    }
  , parse: function () {
      var that = this
        , map = {}
        , source = []
        , selected = false
        , selectedValue = '';
      this.$source.find('option').each(function() {
        var option = $(this);
        if (option.val() === '') {
          that.options.placeholder = option.text();
          return;
        }
        map[option.text()] = option.val();
        source.push(option.text());
        if (option.prop('selected')) {
          selected = option.text();
          selectedValue = option.val();
        }
      })
      this.map = map;
      if (selected) {
        this.$element.val(selected);
        this.$target.val(selectedValue);
        this.$container.addClass('combobox-selected');
        this.selected = true;
      }
      return source;
    }

  , transferAttributes: function() {
    this.options.placeholder = this.$source.attr('data-placeholder') || this.options.placeholder
    if(this.options.appendId !== "undefined") {
    	this.$element.attr('id', this.$source.attr('id') + this.options.appendId);
    }
    this.$element.attr('placeholder', this.options.placeholder)
    this.$target.prop('name', this.$source.prop('name'))
    this.$target.val(this.$source.val())
    this.$source.removeAttr('name')  // Remove from source otherwise form will pass parameter twice.
    this.$element.attr('required', this.$source.attr('required'))
    this.$element.attr('rel', this.$source.attr('rel'))
    this.$element.attr('title', this.$source.attr('title'))
    this.$element.attr('class', this.$source.attr('class'))
    this.$element.attr('tabindex', this.$source.attr('tabindex'))
    this.$source.removeAttr('tabindex')
    if (this.$source.attr('disabled')!==undefined)
      this.disable();
  }

  , select: function () {
      var val = this.$menu.find('.active').attr('data-value');
      this.$element.val(this.updater(val)).trigger('change');
      this.$target.val(this.map[val]).trigger('change');
      this.$source.val(this.map[val]).trigger('change');
      this.$container.addClass('combobox-selected');
      this.selected = true;
      return this.hide();
    }

  , updater: function (item) {
      return item;
    }

  , show: function () {
      var pos = $.extend({}, this.$element.position(), {
        height: this.$element[0].offsetHeight
      });

      this.$menu
        .insertAfter(this.$element)
        .css({
          top: pos.top + pos.height
        , left: pos.left
        })
        .show();

      $('.dropdown-menu').on('mousedown', $.proxy(this.scrollSafety, this));

      this.shown = true;
      return this;
    }

  , hide: function () {
      this.$menu.hide();
      $('.dropdown-menu').off('mousedown', $.proxy(this.scrollSafety, this));
      this.$element.on('blur', $.proxy(this.blur, this));
      this.shown = false;
      return this;
    }

  , lookup: function (event) {
      this.query = this.$element.val();
      return this.process(this.source);
    }

  , process: function (items) {
      var that = this;

      items = $.grep(items, function (item) {
        return that.matcher(item);
      })

      items = this.sorter(items);

      if (!items.length) {
        return this.shown ? this.hide() : this;
      }

      return this.render(items.slice(0, this.options.items)).show();
    }

  , template: function() {
      if (this.options.bsVersion == '2') {
        return '<div class="combobox-container"><input type="hidden" /> <div class="input-append"> <input type="text" autocomplete="false" /> <span class="add-on dropdown-toggle" data-dropdown="dropdown"> <span class="caret"/> <i class="icon-remove"/> </span> </div> </div>'
      } else {
        return '<div class="combobox-container"> <input type="hidden" /> <div class="input-group"> <input type="text" autocomplete="false" /> <span class="input-group-addon dropdown-toggle" data-dropdown="dropdown"> <span class="caret" /> <span class="glyphicon glyphicon-remove" /> </span> </div> </div>'
      }
    }

  , matcher: function (item) {
      return ~item.toLowerCase().indexOf(this.query.toLowerCase());
    }

  , sorter: function (items) {
      var beginswith = []
        , caseSensitive = []
        , caseInsensitive = []
        , item;

      while (item = items.shift()) {
        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) {beginswith.push(item);}
        else if (~item.indexOf(this.query)) {caseSensitive.push(item);}
        else {caseInsensitive.push(item);}
      }

      return beginswith.concat(caseSensitive, caseInsensitive);
    }

  , highlighter: function (item) {
      var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&');
      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
        return '<strong>' + match + '</strong>';
      })
    }

  , render: function (items) {
      var that = this;

      items = $(items).map(function (i, item) {
        i = $(that.options.item).attr('data-value', item);
        i.find('a').html(that.highlighter(item));
        return i[0];
      })

      items.first().addClass('active');
      this.$menu.html(items);
      return this;
    }

  , next: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , next = active.next();

      if (!next.length) {
        next = $(this.$menu.find('li')[0]);
      }

      next.addClass('active');
    }

  , prev: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , prev = active.prev();

      if (!prev.length) {
        prev = this.$menu.find('li').last();
      }

      prev.addClass('active');
    }

  , toggle: function () {
    if (!this.disabled) {
      if (this.$container.hasClass('combobox-selected')) {
        this.clearTarget();
        this.triggerChange();
        this.clearElement();
      } else {
        if (this.shown) {
          this.hide();
        } else {
          this.clearElement();
          this.lookup();
        }
      }
    }
  }

  , scrollSafety: function(e) {
      if (e.target.tagName == 'UL') {
          this.$element.off('blur');
      }
  }
  , clearElement: function () {
    this.$element.val('').focus();
  }

  , clearTarget: function () {
    this.$source.val('');
    this.$target.val('');
    this.$container.removeClass('combobox-selected');
    this.selected = false;
  }

  , triggerChange: function () {
    this.$source.trigger('change');
  }

  , refresh: function () {
    this.source = this.parse();
    this.options.items = this.source.length;
  }

  , listen: function () {
      this.$element
        .on('focus',    $.proxy(this.focus, this))
        .on('blur',     $.proxy(this.blur, this))
        .on('keypress', $.proxy(this.keypress, this))
        .on('keyup',    $.proxy(this.keyup, this));

      if (this.eventSupported('keydown')) {
        this.$element.on('keydown', $.proxy(this.keydown, this));
      }

      this.$menu
        .on('click', $.proxy(this.click, this))
        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))
        .on('mouseleave', 'li', $.proxy(this.mouseleave, this));

      this.$button
        .on('click', $.proxy(this.toggle, this));
    }

  , eventSupported: function(eventName) {
      var isSupported = eventName in this.$element;
      if (!isSupported) {
        this.$element.setAttribute(eventName, 'return;');
        isSupported = typeof this.$element[eventName] === 'function';
      }
      return isSupported;
    }

  , move: function (e) {
      if (!this.shown) {return;}

      switch(e.keyCode) {
        case 9: // tab
        case 13: // enter
        case 27: // escape
          e.preventDefault();
          break;

        case 38: // up arrow
          e.preventDefault();
          this.prev();
          this.fixMenuScroll();
          break;

        case 40: // down arrow
          e.preventDefault();
          this.next();
          this.fixMenuScroll();
          break;
      }

      e.stopPropagation();
    }

  , fixMenuScroll: function(){
      var active = this.$menu.find('.active');
      if(active.length){
          var top = active.position().top;
          var bottom = top + active.height();
          var scrollTop = this.$menu.scrollTop();
          var menuHeight = this.$menu.height();
          if(bottom > menuHeight){
              this.$menu.scrollTop(scrollTop + bottom - menuHeight);
          } else if(top < 0){
              this.$menu.scrollTop(scrollTop + top);
          }
      }
  }

  , keydown: function (e) {
      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27]);
      this.move(e);
    }

  , keypress: function (e) {
      if (this.suppressKeyPressRepeat) {return;}
      this.move(e);
    }

  , keyup: function (e) {
      switch(e.keyCode) {
        case 40: // down arrow
         if (!this.shown){
           this.toggle();
         }
         break;
        case 39: // right arrow
        case 38: // up arrow
        case 37: // left arrow
        case 36: // home
        case 35: // end
        case 16: // shift
        case 17: // ctrl
        case 18: // alt
          break;

        case 9: // tab
        case 13: // enter
          if (!this.shown) {return;}
          this.select();
          break;

        case 27: // escape
          if (!this.shown) {return;}
          this.hide();
          break;

        default:
          this.clearTarget();
          this.lookup();
      }

      e.stopPropagation();
      e.preventDefault();
  }

  , focus: function (e) {
      this.focused = true;
    }

  , blur: function (e) {
      var that = this;
      this.focused = false;
      var val = this.$element.val();
      if (!this.selected && val !== '' ) {
        this.$element.val('');
        this.$source.val('').trigger('change');
        this.$target.val('').trigger('change');
      }
      if (!this.mousedover && this.shown) {setTimeout(function () { that.hide(); }, 200);}
    }

  , click: function (e) {
      e.stopPropagation();
      e.preventDefault();
      this.select();
      this.$element.focus();
    }

  , mouseenter: function (e) {
      this.mousedover = true;
      this.$menu.find('.active').removeClass('active');
      $(e.currentTarget).addClass('active');
    }

  , mouseleave: function (e) {
      this.mousedover = false;
    }
  };

  /* COMBOBOX PLUGIN DEFINITION
   * =========================== */
  $.fn.combobox = function ( option ) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('combobox')
        , options = typeof option == 'object' && option;
      if(!data) {$this.data('combobox', (data = new Combobox(this, options)));}
      if (typeof option == 'string') {data[option]();}
    });
  };

  $.fn.combobox.defaults = {
    bsVersion: '3'
  , menu: '<ul class="typeahead typeahead-long dropdown-menu"></ul>'
  , item: '<li><a href="#"></a></li>'
  };

  $.fn.combobox.Constructor = Combobox;

}( window.jQuery );

/*! =======================================================
                      VERSION  9.1.1              
========================================================= */
"use strict";function _typeof(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}/*! =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(a){if("function"==typeof define&&define.amd)define(["jquery"],a);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var b;try{b=require("jquery")}catch(c){b=null}module.exports=a(b)}else window&&(window.Slider=a(window.jQuery))}(function(a){var b="slider",c="bootstrapSlider";window.console||(window.console={}),window.console.log||(window.console.log=function(){}),window.console.warn||(window.console.warn=function(){});var d;return function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l&&l!==k)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}var m=this.map(function(){var d=a.data(this,b);return d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d)),a(this)});return!m||m.length>1?m:m[0]}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;c(a)}(a),function(a){function e(b,c){function d(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(e){return d}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{};for(var e=Object.keys(this.defaultOptions),f=0;f<e.length;f++){var h=e[f],i=c[h];i="undefined"!=typeof i?i:d(this.element,h),i=null!==i?i:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=i}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var j,k,l,m,n,o=this.element.style.width,p=!1,q=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var r=document.createElement("div");r.className="slider-track",k=document.createElement("div"),k.className="slider-track-low",j=document.createElement("div"),j.className="slider-selection",l=document.createElement("div"),l.className="slider-track-high",m=document.createElement("div"),m.className="slider-handle min-slider-handle",m.setAttribute("role","slider"),m.setAttribute("aria-valuemin",this.options.min),m.setAttribute("aria-valuemax",this.options.max),n=document.createElement("div"),n.className="slider-handle max-slider-handle",n.setAttribute("role","slider"),n.setAttribute("aria-valuemin",this.options.min),n.setAttribute("aria-valuemax",this.options.max),r.appendChild(k),r.appendChild(j),r.appendChild(l);var s=Array.isArray(this.options.labelledby);if(s&&this.options.labelledby[0]&&m.setAttribute("aria-labelledby",this.options.labelledby[0]),s&&this.options.labelledby[1]&&n.setAttribute("aria-labelledby",this.options.labelledby[1]),!s&&this.options.labelledby&&(m.setAttribute("aria-labelledby",this.options.labelledby),n.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",f=0;f<this.options.ticks.length;f++){var t=document.createElement("div");t.className="slider-tick",this.ticks.push(t),this.ticksContainer.appendChild(t)}j.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",f=0;f<this.options.ticks_labels.length;f++){var u=document.createElement("div"),v=0===this.options.ticks_positions.length,w=this.options.reversed&&v?this.options.ticks_labels.length-(f+1):f;u.className="slider-tick-label",u.innerHTML=this.options.ticks_labels[w],this.tickLabels.push(u),this.tickLabelContainer.appendChild(u)}var x=function(a){var b=document.createElement("div");b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},y=document.createElement("div");y.className="tooltip tooltip-main",y.setAttribute("role","presentation"),x(y);var z=document.createElement("div");z.className="tooltip tooltip-min",z.setAttribute("role","presentation"),x(z);var A=document.createElement("div");A.className="tooltip tooltip-max",A.setAttribute("role","presentation"),x(A),this.sliderElem.appendChild(r),this.sliderElem.appendChild(y),this.sliderElem.appendChild(z),this.sliderElem.appendChild(A),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(m),this.sliderElem.appendChild(n),q.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),g[this.options.scale]&&(this.options.scale=g[this.options.scale]),p===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=o,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=k||this.trackLow,this.trackSelection=j||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=m||this.handle1,this.handle2=n||this.handle2,p===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),f=0;f<this.ticks.length;f++)this._removeClass(this.ticks[f],"round triangle hide");var B=["round","triangle","custom"],C=-1!==B.indexOf(this.options.handle);if(C)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),f=0;f<this.ticks.length;f++)this._addClass(this.ticks[f],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var f={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},g={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min),c=!0;if(this.options.ticks_positions.length>0){for(var d,e,f,g=0,h=1;h<this.options.ticks_positions.length;h++)if(a<=this.options.ticks_positions[h]){d=this.options.ticks[h-1],f=this.options.ticks_positions[h-1],e=this.options.ticks[h],g=this.options.ticks_positions[h];break}var i=(a-f)/(g-f);b=d+i*(e-d),c=!1}var j=c?this.options.min:0,k=j+Math.round(b/this.options.step)*this.options.step;return k<this.options.min?this.options.min:k>this.options.max?this.options.max:k},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0){var g=(a-b)/(c-b);return d+g*(e-d)}}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a);return 100*(d-c)/(b-c)}}};d=function(a,b){return e.call(this,a,b),this},d.prototype={_init:function(){},constructor:d,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this._state.value=this._validateInputValue(a);var e=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var f=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(f),b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),e.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){var c=this.eventToCallbackMap[a];if(void 0!==c)for(var d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++){var c=a[b];this.eventToCallbackMap[c]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var a;if(a=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=a[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var b="vertical"===this.options.orientation?"height":"width",c="vertical"===this.options.orientation?"marginTop":"marginLeft",d=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var e=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[c]=-d/2+"px"),e=this.tickLabelContainer.offsetHeight;else for(f=0;f<this.tickLabelContainer.childNodes.length;f++)this.tickLabelContainer.childNodes[f].offsetHeight>e&&(e=this.tickLabelContainer.childNodes[f].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=e+"px")}for(var f=0;f<this.options.ticks.length;f++){var g=this.options.ticks_positions[f]||this._toPercentage(this.options.ticks[f]);this.options.reversed&&(g=100-g),this.ticks[f].style[this.stylePos]=g+"%",this._removeClass(this.ticks[f],"in-selection"),this.options.range?g>=a[0]&&g<=a[1]&&this._addClass(this.ticks[f],"in-selection"):"after"===this.options.selection&&g>=a[0]?this._addClass(this.ticks[f],"in-selection"):"before"===this.options.selection&&g<=a[0]&&this._addClass(this.ticks[f],"in-selection"),this.tickLabels[f]&&(this.tickLabels[f].style[b]=d+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[f]?(this.tickLabels[f].style.position="absolute",this.tickLabels[f].style[this.stylePos]=g+"%",this.tickLabels[f].style[c]=-d/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[f].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var h;if(this.options.range){h=this.options.formatter(this._state.value),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var i=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,i);var j=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,j),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else h=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";var k=this.tooltip_min.getBoundingClientRect(),l=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?k.right>l.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):k.right>l.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_resize:function(a){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);if(this.options.range){var c=Math.abs(this._state.percentage[0]-b),d=Math.abs(this._state.percentage[1]-b);this._state.dragged=d>c?0:1,this._adjustPercentageForRangeSliders(b)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var e=this._calculateValue();return this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(a){if(void 0===a.changedTouches)return void this._mousedown(a);var b=a.changedTouches[0];this.touchX=b.pageX,this.touchY=b.pageY},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed;(d||e)&&(c=-c)}var f=this._state.value[a]+c*this.options.step;return this.options.range&&(f=[a?this._state.value[0]:f,a?f:this._state.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._setDataVal(f),this._trigger("slideStop",f),this._layout(),this._pauseEvent(b),!1}},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;var b=this._getPercentage(a);this._adjustPercentageForRangeSliders(b),this._state.percentage[this._state.dragged]=b,this._layout();var c=this._calculateValue(!0);return this.setValue(c,!0,!0),!1},_touchmove:function(a){if(void 0!==a.changedTouches){var b=a.changedTouches[0],c=b.pageX-this.touchX,d=b.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&5>=c&&c>=-5&&(d>=15||-15>=d)?this._mousedown(a):5>=d&&d>=-5&&(c>=15||-15>=c)&&this._mousedown(a))}},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a);b=b?b-1:0;var c=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],b)>c&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._setDataVal(a),this._trigger("slideStop",a),!1},_calculateValue:function(a){var b;if(this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(var c=[b,1/0],d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=c[1]&&(c=[this.options.ticks[d],e])}if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=a[this.mousePos],c=this._state.offset[this.stylePos],d=b-c,e=d/this._state.size*100;return e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(f.formatInvalidInputErrorMsg(a))},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!=typeof c)throw new Error(f.formatInvalidInputErrorMsg(c))}},_setDataVal:function(a){this.element.setAttribute("data-value",a),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];f(c)}a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.textContent?a.textContent=b:"undefined"!=typeof a.innerText&&(a.innerText=b)},_removeClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)");d=d.replace(g," ")}a.className=d.trim()},_addClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d);h||(d+=" "+f)}a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop,"BODY"!==a.tagName&&(b-=a.scrollTop);return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b=this.options.tooltip_position||"right",c="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b),a.style[c]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?a.forEach(function(a){this._addClass(a,"bottom"),a.style.top="22px"}.bind(this)):a.forEach(function(a){this._addClass(a,"top"),a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},a&&!function(){var e=void 0;a.fn.slider?(window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),e=c):(a.bridget(b,d),e=b),a.bridget(c,d),a(function(){a("input[data-provide=slider]")[e]()})}()}(a),d});
/*
Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,d={timestamp:"G14E",version:"4.5.7",revision:"e98277f",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var k=c[d].src.match(a);if(k){b=k[1];break}}-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+
b:location.href.match(/^[^\?]*\/(?:)/)[0]+b);if(!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a);this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",
a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(c){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(b){function d(){try{document.documentElement.doScroll("left")}catch(f){setTimeout(d,1);return}a()}c.push(b);"complete"===document.readyState&&setTimeout(a,1);if(1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",
a);window.attachEvent("onload",a);b=!1;try{b=!window.frameElement}catch(w){}document.documentElement.doScroll&&b&&d()}}}()},b=window.CKEDITOR_GETURL;if(b){var c=d.getUrl;d.getUrl=function(a){return b.call(d,a)||c.call(d,a)}}return d}());
CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var d=CKEDITOR.event.prototype,b;for(b in d)null==a[b]&&(a[b]=d[b])},CKEDITOR.event.prototype=function(){function a(a){var e=d(this);return e[a]||(e[a]=new b(a))}var d=function(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={})},b=function(a){this.name=a;this.listeners=[]};b.prototype={getListenerIndex:function(a){for(var b=0,d=this.listeners;b<d.length;b++)if(d[b].fn==a)return b;return-1}};
return{define:function(b,d){var g=a.call(this,b);CKEDITOR.tools.extend(g,d,!0)},on:function(b,d,g,l,k){function n(a,f,x,k){a={name:b,sender:this,editor:a,data:f,listenerData:l,stop:x,cancel:k,removeListener:w};return!1===d.call(g,a)?!1:a.data}function w(){x.removeListener(b,d)}var f=a.call(this,b);if(0>f.getListenerIndex(d)){f=f.listeners;g||(g=this);isNaN(k)&&(k=10);var x=this;n.fn=d;n.priority=k;for(var A=f.length-1;0<=A;A--)if(f[A].priority<=k)return f.splice(A+1,0,n),{removeListener:w};f.unshift(n)}return{removeListener:w}},
once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[1]=function(a){a.removeListener();return b.apply(this,arguments)};return this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a},fire:function(){var a=0,b=function(){a=1},g=0,l=function(){g=1};return function(k,n,w){var f=d(this)[k];k=a;var x=g;a=g=0;if(f){var A=f.listeners;if(A.length)for(var A=A.slice(0),u,B=0;B<A.length;B++){if(f.errorProof)try{u=
A[B].call(this,w,n,b,l)}catch(q){}else u=A[B].call(this,w,n,b,l);!1===u?g=1:"undefined"!=typeof u&&(n=u);if(a||g)break}}n=g?!1:"undefined"==typeof n?!0:n;a=k;g=x;return n}}(),fireOnce:function(a,b,g){b=this.fire(a,b,g);delete d(this)[a];return b},removeListener:function(a,b){var g=d(this)[a];if(g){var l=g.getListenerIndex(b);0<=l&&g.listeners.splice(l,1)}},removeAllListeners:function(){var a=d(this),b;for(b in a)delete a[b]},hasListeners:function(a){return(a=d(this)[a])&&0<a.listeners.length}}}());
CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fire.call(this,a,d,this)},CKEDITOR.editor.prototype.fireOnce=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,a,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));
CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),d=a.match(/edge[ \/](\d+.?\d*)/),b=-1<a.indexOf("trident/"),b=!(!d&&!b),b={ie:b,edge:!!d,webkit:!b&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;
return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie;b.webkit&&(-1<a.indexOf("chrome")?b.chrome=!0:b.safari=!0);var c=0;b.ie&&(c=d?parseFloat(d[1]):b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==c,b.ie8Compat=8==c,b.ie7Compat=7==c,b.ie6Compat=7>c||b.quirks);b.gecko&&(d=a.match(/rv:([\d\.]+)/))&&(d=d[1].split("."),c=1E4*d[0]+100*(d[1]||0)+1*(d[2]||0));b.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));
b.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));b.version=c;b.isCompatible=!(b.ie&&7>c)&&!(b.gecko&&4E4>c)&&!(b.webkit&&534>c);b.hidpi=2<=window.devicePixelRatio;b.needsBrFiller=b.gecko||b.webkit||b.ie&&10<c;b.needsNbspFiller=b.ie&&11>c;b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown");b.quirks&&(b.cssClass+=" cke_browser_quirks");b.ie&&(b.cssClass+=" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version));b.air&&(b.cssClass+=" cke_browser_air");
b.iOS&&(b.cssClass+=" cke_browser_ios");b.hidpi&&(b.cssClass+=" cke_hidpi");return b}());
"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)};(function(){CKEDITOR.domReady(function(){var a=
CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*d))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:d})};
CKEDITOR.error=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:d})};
CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var d=console[a.data.type]?a.data.type:"log",b=a.data.errorCode;if(a=a.data.additionalData)console[d]("[CKEDITOR] Error code: "+b+".",a);else console[d]("[CKEDITOR] Error code: "+b+".");console[d]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+b)}},null,null,999);CKEDITOR.dom={};
(function(){var a=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,e=/</g,g=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,k={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:" ",shy:"­"},n=function(a,f){return"#"==f[0]?String.fromCharCode(parseInt(f.slice(1),10)):k[f]};CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(a,f){if(!a&&!f)return!0;if(!a||!f||a.length!=f.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=f[b])return!1;
return!0},getIndex:function(a,f){for(var b=0;b<a.length;++b)if(f(a[b]))return b;return-1},clone:function(a){var f;if(a&&a instanceof Array){f=[];for(var b=0;b<a.length;b++)f[b]=CKEDITOR.tools.clone(a[b]);return f}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;f=new a.constructor;for(b in a)f[b]=CKEDITOR.tools.clone(a[b]);return f},capitalize:function(a,f){return a.charAt(0).toUpperCase()+
(f?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var f=arguments.length,b,c;"boolean"==typeof(b=arguments[f-1])?f--:"boolean"==typeof(b=arguments[f-2])&&(c=arguments[f-1],f-=2);for(var k=1;k<f;k++){var d=arguments[k],q;for(q in d)if(!0===b||null==a[q])if(!c||q in c)a[q]=d[q]}return a},prototypedCopy:function(a){var f=function(){};f.prototype=a;return new f},copy:function(a){var f={},b;for(b in a)f[b]=a[b];return f},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},
isEmpty:function(a){for(var f in a)if(a.hasOwnProperty(f))return!1;return!0},cssVendorPrefix:function(a,f,b){if(b)return d+a+":"+f+";"+a+":"+f;b={};b[a]=f;b[d+a]=f;return b},cssStyleToDomStyle:function(){var a=document.createElement("div").style,f="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?f:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var f,
b=[],c=0;c<a.length;c++)if(f=a[c])/@import|[{}]/.test(f)?b.push("\x3cstyle\x3e"+f+"\x3c/style\x3e"):b.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+f+'"\x3e');return b.join("")},htmlEncode:function(a){return void 0===a||null===a?"":String(a).replace(b,"\x26amp;").replace(c,"\x26gt;").replace(e,"\x26lt;")},htmlDecode:function(a){return a.replace(l,n)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(g,"\x26quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},
transformPlainTextToHtml:function(a,f){var b=f==CKEDITOR.ENTER_BR,c=this.htmlEncode(a.replace(/\r\n/g,"\n")),c=c.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),k=f==CKEDITOR.ENTER_P?"p":"div";if(!b){var d=/\n{2}/g;if(d.test(c))var q="\x3c"+k+"\x3e",n="\x3c/"+k+"\x3e",c=q+c.replace(d,function(){return n+q})+n}c=c.replace(/\n/g,"\x3cbr\x3e");b||(c=c.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+k+"\x3e)"),function(a){return CKEDITOR.tools.repeat(a,2)}));c=c.replace(/^ | $/g,"\x26nbsp;");return c=c.replace(/(>|\s) /g,
function(a,f){return f+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",f=0;8>f;f++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,f){var b=f(a);b.prototype=a.prototype;return b},setTimeout:function(a,f,b,c,k){k||(k=window);b||(b=k);return k.setTimeout(function(){c?a.apply(b,[].concat(c)):a.apply(b)},
f||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(f){return f.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(f){return f.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(f){return f.replace(a,"")}}(),indexOf:function(a,f){if("function"==typeof f)for(var b=0,c=a.length;b<c;b++){if(f(a[b]))return b}else{if(a.indexOf)return a.indexOf(f);b=0;for(c=a.length;b<c;b++)if(a[b]===f)return b}return-1},search:function(a,b){var c=CKEDITOR.tools.indexOf(a,
b);return 0<=c?a[c]:null},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(a){var b=a.$,c=a.base,k=a.privates||a._,d=a.proto;a=a.statics;!b&&(b=function(){c&&this.base.apply(this,arguments)});if(k)var n=b,b=function(){var a=this._||(this._={}),b;for(b in k){var f=k[b];a[b]="function"==typeof f?CKEDITOR.tools.bind(f,this):f}n.apply(this,arguments)};c&&(b.prototype=this.prototypedCopy(c.prototype),b.prototype.constructor=b,b.base=c,b.baseProto=c.prototype,b.prototype.base=
function(){this.base=c.prototype.base;c.apply(this,arguments);this.base=arguments.callee});d&&this.extend(b.prototype,d,!0);a&&this.extend(b,a,!0);return b},addFunction:function(b,f){return a.push(function(){return b.apply(f||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var f=a[b];return f&&f.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^-?\d+\.?\d*px$/,b;return function(c){b=CKEDITOR.tools.trim(c+"")+"px";return a.test(b)?
b:c||""}}(),convertToPx:function(){var a;return function(b){a||(a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(a));return/%$/.test(b)?b:(a.setStyle("width",b),a.$.clientWidth)}}(),repeat:function(a,b){return Array(b+1).join(a)},tryThese:function(){for(var a,b=0,c=arguments.length;b<c;b++){var k=arguments[b];try{a=k();break}catch(d){}}return a},
genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var b=arguments,c=this;window.setTimeout(function(){a.apply(c,b)},0)}},normalizeCssText:function(a,b){var c=[],k,d=CKEDITOR.tools.parseCssText(a,!0,b);for(k in d)c.push(k+":"+d[k]);c.sort();return c.length?c.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,k){a=[b,c,k];for(b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);
return"#"+a.join("")})},parseCssText:function(a,b,c){var k={};c&&(c=new CKEDITOR.dom.element("span"),c.setAttribute("style",a),a=CKEDITOR.tools.convertRgbToHex(c.getAttribute("style")||""));if(!a||";"==a)return k;a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){b&&(c=c.toLowerCase(),"font-family"==c&&(d=d.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),d=CKEDITOR.tools.trim(d));k[c]=d});return k},writeCssText:function(a,b){var c,k=[];for(c in a)k.push(c+
":"+a[c]);b&&k.sort();return k.join("; ")},objectCompare:function(a,b,c){var k;if(!a&&!b)return!0;if(!a||!b)return!1;for(k in a)if(a[k]!=b[k])return!1;if(!c)for(k in b)if(a[k]!=b[k])return!1;return!0},objectKeys:function(a){var b=[],c;for(c in a)b.push(c);return b},convertArrayToObject:function(a,b){var c={};1==arguments.length&&(b=!0);for(var k=0,d=a.length;k<d;++k)c[a[k]]=b;return c},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){a=a?a.replace(/.+?(?:\.|$)/,
""):document.domain;if(!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b,c){function k(){n=(new Date).getTime();d=!1;c?b.call(c):b()}var d,n=0;return{input:function(){if(!d){var b=(new Date).getTime()-n;b<a?d=setTimeout(k,a-b):k()}},reset:function(){d&&clearTimeout(d);d=n=0}}},enableHtml5Elements:function(a,b){for(var c="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),
k=c.length,d;k--;)d=a.createElement(c[k]),b&&a.appendChild(d)},checkIfAnyArrayItemMatches:function(a,b){for(var c=0,k=a.length;c<k;++c)if(a[c].match(b))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,b){for(var c in a)if(c.match(b))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",getCookie:function(a){a=a.toLowerCase();for(var b=document.cookie.split(";"),c,k,d=0;d<b.length;d++)if(c=b[d].split("\x3d"),
k=decodeURIComponent(CKEDITOR.tools.trim(c[0]).toLowerCase()),k===a)return decodeURIComponent(1<c.length?c[1]:"");return null},setCookie:function(a,b){document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+";path\x3d/"},getCsrfToken:function(){var a=CKEDITOR.tools.getCookie("ckCsrfToken");if(!a||40!=a.length){var a=[],b="";if(window.crypto&&window.crypto.getRandomValues)a=new Uint8Array(40),window.crypto.getRandomValues(a);else for(var c=0;40>c;c++)a.push(Math.floor(256*Math.random()));
for(c=0;c<a.length;c++)var k="abcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%36),b=b+(.5<Math.random()?k.toUpperCase():k);a=b;CKEDITOR.tools.setCookie("ckCsrfToken",a)}return a}}})();
CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,d=function(a,b){for(var c=CKEDITOR.tools.clone(a),k=1;k<arguments.length;k++){b=arguments[k];for(var d in b)delete c[d]}return c},b={},c={},e={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},k={"#":1},n={center:1,dir:1,noframes:1};
a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},k,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(c,e,b,n);d={a:d(b,{a:1,button:1}),abbr:b,address:c,
area:l,article:c,aside:c,audio:a({source:1,track:1},c),b:b,base:l,bdi:b,bdo:b,blockquote:c,body:c,br:l,button:d(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:l,colgroup:{col:1},command:l,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:c,dl:{dt:1,dd:1},dt:c,em:b,embed:l,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},g),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:a({head:1,
body:1},c,g),i:b,iframe:k,img:l,input:l,ins:b,kbd:b,keygen:l,label:b,legend:b,li:c,link:l,main:c,map:c,mark:b,menu:a({li:1},c),meta:l,meter:d(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:k,output:b,p:b,param:l,pre:b,progress:d(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:k,section:c,select:{optgroup:1,option:1},small:b,source:l,span:b,strong:b,style:k,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),
sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:k,tfoot:{tr:1},th:c,thead:{tr:1},time:d(b,{time:1}),title:k,tr:{th:1,td:1},track:l,u:b,ul:{li:1},"var":b,video:a({source:1,track:1},c),wbr:l,acronym:b,applet:a({param:1},c),basefont:l,big:b,center:c,dialog:l,dir:{li:1},font:b,isindex:l,noframes:c,strike:b,tt:b};a(d,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},e,n),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,
fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,
track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},d.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,
s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return d}();
CKEDITOR.dom.event=function(a){this.$=a};
CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;this.$.shiftKey&&(a+=CKEDITOR.SHIFT);this.$.altKey&&(a+=CKEDITOR.ALT);return a},preventDefault:function(a){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=
this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;
CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(a){a&&(this.$=a)};
CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;(a=this.getCustomData("_"))||this.setCustomData("_",a={});return a},on:function(d){var b=this.getCustomData("_cke_nativeListeners");b||(b={},this.setCustomData("_cke_nativeListeners",b));b[d]||(b=b[d]=a(this,d),this.$.addEventListener?this.$.addEventListener(d,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+
d,b));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){var a=this.getCustomData("_cke_nativeListeners"),b;for(b in a){var c=a[b];this.$.detachEvent?this.$.detachEvent("on"+
b,c):this.$.removeEventListener&&this.$.removeEventListener(b,c,!1);delete a[b]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();
(function(a){var d={};CKEDITOR.on("reset",function(){d={}});a.equals=function(a){try{return a&&a.$===this.$}catch(c){return!1}};a.setCustomData=function(a,c){var e=this.getUniqueId();(d[e]||(d[e]={}))[a]=c;return this};a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&d[c])&&a in c?c[a]:null};a.removeCustomData=function(a){var c=this.$["data-cke-expando"],c=c&&d[c],e,g;c&&(e=c[a],g=a in c,delete c[a]);return g?e:null};a.clearCustomData=function(){this.removeAllListeners();var a=
this.$["data-cke-expando"];a&&delete d[a]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);
CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;
CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,d){a.append(this,d);return a},clone:function(a,d){function b(c){c["data-cke-expando"]&&(c["data-cke-expando"]=!1);if(c.nodeType==CKEDITOR.NODE_ELEMENT||c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(d||c.nodeType!=CKEDITOR.NODE_ELEMENT||c.removeAttribute("id",!1),a){c=c.childNodes;for(var e=0;e<c.length;e++)b(c[e])}}function c(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=
b.getName();":"==d[0]&&b.renameNode(d.substring(1))}if(a)for(d=0;d<b.getChildCount();d++)c(b.getChild(d))}}var e=this.$.cloneNode(a);b(e);e=new CKEDITOR.dom.node(e);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&c(e);return e},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,
a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var d=[],b=this.getDocument().$.documentElement,c=this.$;c&&c!=b;){var e=c.parentNode;e&&d.unshift(this.getIndex.call({$:c},a));c=e}return d},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function d(a,c){var n=c?a.nextSibling:a.previousSibling;return n&&n.nodeType==CKEDITOR.NODE_TEXT?b(n)?d(n,
c):n:null}function b(a){return!a.nodeValue||a.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var c=this.$,e=-1,g;if(!this.$.parentNode||a&&c.nodeType==CKEDITOR.NODE_TEXT&&b(c)&&!d(c)&&!d(c,!0))return-1;do a&&c!=this.$&&c.nodeType==CKEDITOR.NODE_TEXT&&(g||b(c))||(e++,g=c.nodeType==CKEDITOR.NODE_TEXT);while(c=c.previousSibling);return e},getNextSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getFirst&&this.getFirst();var e;if(!a){if(this.type==
CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getNext()}for(;!a&&(e=(e||this).getParent());){if(b&&!1===b(e,!0))return null;a=e.getNext()}return!a||b&&!1===b(a)?null:d&&d!=a.type?a.getNextSourceNode(!1,d,b):a},getPreviousSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getLast&&this.getLast();var e;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getPrevious()}for(;!a&&(e=(e||this).getParent());){if(b&&!1===
b(e,!0))return null;a=e.getPrevious()}return!a||b&&!1===b(a)?null:d&&a.type!=d?a.getPreviousSourceNode(!1,d,b):a},getPrevious:function(a){var d=this.$,b;do b=(d=d.previousSibling)&&10!=d.nodeType&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getNext:function(a){var d=this.$,b;do b=(d=d.nextSibling)&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getParent:function(a){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||a&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?
new CKEDITOR.dom.node(d):null},getParents:function(a){var d=this,b=[];do b[a?"push":"unshift"](d);while(d=d.getParent());return b},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var d=this.contains?this:this.getParent();do if(d.contains(a))return d;while(d=d.getParent());return null},getPosition:function(a){var d=this.$,b=a.$;if(d.compareDocumentPosition)return d.compareDocumentPosition(b);if(d==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==
CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(d.contains){if(d.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(d))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in d)return 0>d.sourceIndex||0>b.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:d.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}d=this.getAddress();a=a.getAddress();for(var b=Math.min(d.length,a.length),c=0;c<b;c++)if(d[c]!=
a[c])return d[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return d.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,d){var b=this.$,c,e;d||(b=b.parentNode);"function"==typeof a?(e=!0,c=a):(e=!1,c=function(b){b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"";return"string"==typeof a?b==a:b in a});for(;b;){if(c(e?new CKEDITOR.dom.node(b):b))return new CKEDITOR.dom.node(b);
try{b=b.parentNode}catch(g){b=null}}return null},hasAscendant:function(a,d){var b=this.$;d||(b=b.parentNode);for(;b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return!0;b=b.parentNode}return!1},move:function(a,d){a.append(this.remove(),d)},remove:function(a){var d=this.$,b=d.parentNode;if(b){if(a)for(;a=d.firstChild;)b.insertBefore(d.removeChild(a),d);b.removeChild(d)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&
(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(b-d.length),this.$.removeChild(this.$.firstChild));else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(d.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{a.remove();continue}}break}CKEDITOR.env.needsBrFiller&&
(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var d=this;this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent());CKEDITOR.env.edge&&d&&d.is("textarea","input")&&(a=!0);if(!a&&d&&"undefined"!=typeof d.$.isContentEditable)return!(d.$.isContentEditable||d.data("cke-editable"));for(;d;){if(d.data("cke-editable"))return!1;if(d.hasAttribute("contenteditable"))return"false"==d.getAttribute("contenteditable");d=d.getParent()}return!0}});
CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,d="CSS1Compat"==a.compatMode;return{width:(d?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(d?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||
a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(d)}},appendStyleText:function(a){if(this.$.createStyleSheet){var d=this.$.createStyleSheet("");d.cssText=a}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b)}return d||
b.$.sheet},createElement:function(a,d){var b=new CKEDITOR.dom.element(a,this);d&&(d.attributes&&b.setAttributes(d.attributes),d.styles&&b.setStyles(d.styles));return b},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(d){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,d){for(var b=
this.$.documentElement,c=0;b&&c<a.length;c++){var e=a[c];if(d)for(var g=-1,l=0;l<b.childNodes.length;l++){var k=b.childNodes[l];if(!0!==d||3!=k.nodeType||!k.previousSibling||3!=k.previousSibling.nodeType)if(g++,g==e){b=k;break}}else b=b.childNodes[e]}return b?new CKEDITOR.dom.node(b):null},getElementsByTag:function(a,d){CKEDITOR.env.ie&&8>=document.documentMode||!d||(a=d+":"+a);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];
return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+
CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(a);this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a));return a}});CKEDITOR.dom.nodeList=function(a){this.$=a};
CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;
CKEDITOR.dom.element.createFromHtml=function(a,d){var b=new CKEDITOR.dom.element("div",d);b.setHtml(a);return b.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(a,d,b,c){var e=d.getCustomData("list_marker_id")||d.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),g=d.getCustomData("list_marker_names")||d.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[e]=d;g[b]=1;return d.setCustomData(b,c)};
CKEDITOR.dom.element.clearAllMarkers=function(a){for(var d in a)CKEDITOR.dom.element.clearMarkers(a,a[d],1)};CKEDITOR.dom.element.clearMarkers=function(a,d,b){var c=d.getCustomData("list_marker_names"),e=d.getCustomData("list_marker_id"),g;for(g in c)d.removeCustomData(g);d.removeCustomData("list_marker_names");b&&(d.removeCustomData("list_marker_id"),delete a[e])};
(function(){function a(a,b){return-1<(" "+a+" ").replace(g," ").indexOf(" "+b+" ")}function d(a){var b=!0;a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1);return function(){b||a.removeAttribute("id")}}function b(a,b){return"#"+a.$.id+" "+b.split(/,\s*/).join(", #"+a.$.id+" ")}function c(a){for(var b=0,c=0,f=l[a].length;c<f;c++)b+=parseInt(this.getComputedStyle(l[a][c])||0,10)||0;return b}var e=document.createElement("_").classList,e="undefined"!==typeof e&&null!==String(e.add).match(/\[Native code\]/gi),
g=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:e?function(a){this.$.classList.add(a);return this}:function(b){var c=this.$.className;c&&(a(c,b)||(c+=" "+b));this.$.className=c||b;return this},removeClass:e?function(a){var b=this.$;b.classList.remove(a);b.className||b.removeAttribute("class");return this}:function(b){var c=this.getAttribute("class");c&&a(c,b)&&((c=c.replace(new RegExp("(?:^|\\s+)"+b+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",
c):this.removeAttribute("class"));return this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){"string"==typeof a&&(a=this.getDocument().createElement(a));b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?
this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this);c.setEndAfter(a);var f=c.extractContents(!1,b||!1);c.insertNode(this.remove());
f.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(this.$.compareDocumentPosition(a.$)&16)}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,
"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!a.width&&(a.width=a.right-a.left);!a.height&&(a.height=a.bottom-a.top);return a},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();c.appendChild(b);b.innerHTML=a;c.removeChild(b);return a}catch(f){this.$.innerHTML=
"";b=new CKEDITOR.dom.element("body",this.getDocument());b.$.innerHTML=a;for(b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");a.innerHTML="x";a=a.textContent;return function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case "class":a=
"className";break;case "http-equiv":a="httpEquiv";break;case "name":return this.$.name;case "tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case "checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[a];case "style":return this.$.style.cssText;case "contenteditable":case "contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):
null}return this.$.getAttribute(a,2)}:a}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,
getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=
b&&(a=b.toLowerCase()+":"+a)}this.getName=function(){return a};return this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a));return b},getLast:function(a){var b=this.$.lastChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a));return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];
for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==a?(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1);a=a.clone(0,
1);b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);b=b.getOuterHtml();a=a.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var c=this.getParent();
c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),b,c;a&&CKEDITOR.env.webkit&&(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement)&&(a=(new CKEDITOR.dom.element(c)).isVisible()));return!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),
b=0,c=a.count();b<c;b++){var f=a.getItem(b);if(f.type!=CKEDITOR.NODE_ELEMENT||!f.data("cke-bookmark"))if(f.type==CKEDITOR.NODE_ELEMENT&&!f.isEmptyInlineRemoveable()||f.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(f.getText()))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return!0;case "data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:
function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(b){var c=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case "class":return 0<this.$.className.length;case "checked":return!!this.$.checked;case "value":return b=this.getAttribute("type"),"checkbox"==b||"radio"==b?"on"!=this.$.value:!!this.$.value}return c?c.specified:!1}return CKEDITOR.env.ie?
8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c!=a){var f;if(b)for(;f=c.lastChild;)a.insertBefore(c.removeChild(f),a.firstChild);else for(;f=c.firstChild;)a.appendChild(c.removeChild(f))}},mergeSiblings:function(){function a(b,c,f){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var d=[];c.data("cke-bookmark")||c.isEmptyInlineRemoveable();)if(d.push(c),
c=f?c.getNext():c.getPrevious(),!c||c.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(c)){for(var k=f?b.getLast():b.getFirst();d.length;)d.shift().move(b,!f);c.moveChildren(b,!f);c.remove();k&&k.type==CKEDITOR.NODE_ELEMENT&&k.mergeSiblings()}}}return function(b){if(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))a(this,this.getNext(),!0),a(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){this.$.setAttribute(a,
b);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(f){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,
a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable");this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},
removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var c=["top","left","right","bottom"],f;"border"==a&&(f=["color","style","width"]);for(var b=[],d=0;d<c.length;d++)if(f)for(var e=0;e<f.length;e++)b.push([a,c[d],f[e]].join("-"));else b.push([a,c[d]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},
setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+a+")")):this.setStyle("opacity",a)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable",
"on");for(var a,b=this.getElementsByTag("*"),c=0,f=b.count();c<f;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,f=this.getDocument(),d=f.getBody(),e="BackCompat"==f.$.compatMode;if(document.documentElement.getBoundingClientRect){var u=this.$.getBoundingClientRect(),g=f.$.documentElement,q=g.clientTop||
d.$.clientTop||0,y=g.clientLeft||d.$.clientLeft||0,l=!0;CKEDITOR.env.ie&&(l=f.getDocumentElement().contains(this),f=f.getBody().contains(this),l=e&&f||!e&&l);l&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=d.$.scrollLeft||g.scrollLeft,c=d.$.scrollTop||g.scrollTop):(c=e?d.$:g,b=c.scrollLeft,c=c.scrollTop),b=u.left+b-y,c=u.top+c-q)}else for(q=this,y=null;q&&"body"!=q.getName()&&"html"!=q.getName();){b+=q.$.offsetLeft-q.$.scrollLeft;c+=q.$.offsetTop-q.$.scrollTop;q.equals(this)||
(b+=q.$.clientLeft||0,c+=q.$.clientTop||0);for(;y&&!y.equals(q);)b-=y.$.scrollLeft,c-=y.$.scrollTop,y=y.getParent();y=q;q=(u=q.$.offsetParent)?new CKEDITOR.dom.element(u):null}a&&(u=this.getWindow(),q=a.getWindow(),!u.equals(q)&&u.$.frameElement&&(a=(new CKEDITOR.dom.element(u.$.frameElement)).getDocumentPosition(a),b+=a.x,c+=a.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||e||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0);return{x:b,y:c}},scrollIntoView:function(a){var b=
this.getParent();if(b){do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var f=c.$.frameElement;f&&(b=new CKEDITOR.dom.element(f))}catch(d){}}while(b=b.getParent())}},scrollIntoParent:function(a,b,c){var f,d,e,u;function g(b,c){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function q(a,b){var c={x:0,y:0};if(!a.is(l?
"body":"html")){var f=a.$.getBoundingClientRect();c.x=f.left;c.y=f.top}f=a.getWindow();f.equals(b)||(f=q(CKEDITOR.dom.element.get(f.$.frameElement),b),c.x+=f.x,c.y+=f.y);return c}function y(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());e=a.getDocument();var l="BackCompat"==e.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=l?e.getBody():e.getDocumentElement());e=a.getWindow();d=q(this,e);var t=q(a,e),z=this.$.offsetHeight;f=this.$.offsetWidth;var h=a.$.clientHeight,
p=a.$.clientWidth;e=d.x-y(this,"left")-t.x||0;u=d.y-y(this,"top")-t.y||0;f=d.x+f+y(this,"right")-(t.x+p)||0;d=d.y+z+y(this,"bottom")-(t.y+h)||0;(0>u||0<d)&&g(0,!0===b?u:!1===b?d:0>u?u:d);c&&(0>e||0<f)&&g(0>e?e:f,0)},setState:function(a,b,c){b=b||"cke";switch(a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on");this.removeClass(b+"_off");this.removeClass(b+"_disabled");c&&this.setAttribute("aria-pressed",!0);c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+
"_disabled");this.removeClass(b+"_off");this.removeClass(b+"_on");c&&this.setAttribute("aria-disabled",!0);c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,
b){var c=this.$.attributes;b=b||{};for(var f=0;f<c.length;f++){var d=c[f],e=d.nodeName.toLowerCase(),u;if(!(e in b))if("checked"==e&&(u=this.getAttribute(e)))a.setAttribute(e,u);else if(!CKEDITOR.env.ie||this.hasAttribute(e))u=this.getAttribute(e),null===u&&(u=d.nodeValue),a.setAttribute(e,u)}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);
this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$;delete this.getName}},getChild:function(){function a(b,c){var f=b.childNodes;if(0<=c&&c<f.length)return f[c]}return function(b){var c=this.$;if(b.slice)for(b=b.slice();0<b.length&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT&&
b.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){a="data-"+a;if(void 0===b)return this.getAttribute(a);!1===b?this.removeAttribute(a):this.setAttribute(a,b);return null},
getEditor:function(){var a=CKEDITOR.instances,b,c;for(b in a)if(c=a[b],c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return c;return null},find:function(a){var c=d(this);a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,a)));c();return a},findOne:function(a){var c=d(this);a=this.$.querySelector(b(this,a));c();return a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var f=a(this);if(!1!==f){c=this.getChildren();for(var d=0;d<c.count();d++)f=
c.getItem(d),f.type==CKEDITOR.NODE_ELEMENT?f.forEach(a,b):b&&f.type!=b||a(f)}}});var l={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,d){"number"==typeof b&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=c.call(this,a)),this.setStyle(a,b+"px"))};CKEDITOR.dom.element.prototype.getSize=function(a,b){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],
this.$["client"+CKEDITOR.tools.capitalize(a)])||0;b&&(d-=c.call(this,a));return d}})();CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a};
CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(a);return a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,
insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});
(function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(c.collapsed)return this.end(),null;c.optimize()}var f,d=c.startContainer;f=c.endContainer;var e=c.startOffset,x=c.endOffset,z,h=this.guard,p=this.type,m=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var C=f.type==CKEDITOR.NODE_ELEMENT?f:f.getParent(),r=f.type==CKEDITOR.NODE_ELEMENT?f.getChild(x):f.getNext();this._.guardLTR=function(a,b){return(!b||!C.equals(a))&&(!r||
!a.equals(r))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}if(a&&!this._.guardRTL){var G=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),g=d.type==CKEDITOR.NODE_ELEMENT?e?d.getChild(e-1):null:d.getPrevious();this._.guardRTL=function(a,b){return(!b||!G.equals(a))&&(!g||!a.equals(g))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}var l=a?this._.guardRTL:this._.guardLTR;z=h?function(a,b){return!1===l(a,b)?!1:h(a,b)}:l;this.current?f=this.current[m](!1,p,z):(a?f.type==CKEDITOR.NODE_ELEMENT&&
(f=0<x?f.getChild(x-1):!1===z(f,!0)?null:f.getPreviousSourceNode(!0,p,z)):(f=d,f.type==CKEDITOR.NODE_ELEMENT&&((f=f.getChild(e))||(f=!1===z(d,!0)?null:d.getNextSourceNode(!0,p,z)))),f&&!1===z(f)&&(f=null));for(;f&&!this._.end;){this.current=f;if(!this.evaluator||!1!==this.evaluator(f)){if(!b)return f}else if(b&&this.evaluator)return!1;f=f[m](!1,p,z)}this.end();return this.current=null}function d(b){for(var c,f=null;c=a.call(this,b);)f=c;return f}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=
a;this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return d.call(this)},lastBackward:function(){return d.call(this,1)},reset:function(){delete this.current;this._={}}}});var b={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1},c={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in c||!b[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0};CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};
CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(f){var d,e;d=f&&f.type!=CKEDITOR.NODE_ELEMENT&&(e=f.getParent())&&c(e);d=a?d:d||c(f);return!!(b^d)}};CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(a^c)}};CKEDITOR.dom.walker.invisible=
function(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.env.webkit?1:0;return function(f){b(f)?f=1:(f.type==CKEDITOR.NODE_TEXT&&(f=f.getParent()),f=f.$.offsetWidth<=c);return!!(a^f)}};CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}};CKEDITOR.dom.walker.bogus=function(a){function b(a){return!g(a)&&!l(a)}return function(c){var f=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&e.test(c.getText());f&&(f=c.getParent(),c=c.getNext(b),f=f.isBlockBoundary()&&
(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()));return!!(a^f)}};CKEDITOR.dom.walker.temp=function(a){return function(b){b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());b=b&&b.hasAttribute("data-cke-temp");return!!(a^b)}};var e=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark(),k=CKEDITOR.dom.walker.temp(),n=function(a){return l(a)||g(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=
function(a){return function(b){b=g(b)||l(b)||k(b);return!!(a^b)}};var w=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var c=0,f=b.getChildCount();c<f;++c)if(!w(b.getChild(c)))return!!a;return!a}};var f=CKEDITOR.dom.walker.empty(),x=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var b={},c;for(c in a)CKEDITOR.dtd[c]["#"]&&(b[c]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){b=
w(b)?!1:b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(x)&&f(b))?!0:!1;return!!(a^b)}};CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(n(a));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&e.test(a.getText()))?a:!1}})();
CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var d=a instanceof CKEDITOR.dom.document;this.document=d?a:a.getDocument();this.root=d?a.getBody():a};
(function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function d(a,b,c,d,e){function q(a,b,c,f){var d=c?a.getPrevious():a.getNext();if(f&&k)return d;h||f?b.append(a.clone(!0,e),c):(a.remove(),z&&b.append(a));return d}function g(){var a,b,c,f=Math.min(v.length,D.length);for(a=0;a<f;a++)if(b=v[a],c=D[a],!b.equals(c))return a;return a-1}function l(){var b=I-1,c=w&&n&&!p.equals(m);b<E-1||b<L-1||c?(c?a.moveToPosition(m,
CKEDITOR.POSITION_BEFORE_START):L==b+1&&H?a.moveToPosition(D[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(D[b+1],CKEDITOR.POSITION_BEFORE_START),d&&(b=v[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(c=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',a.document),c.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:c}))):a.collapse(!0)}a.optimizeBookmark();var k=0===b,z=1==b,h=2==b;b=h||z;var p=a.startContainer,m=a.endContainer,
C=a.startOffset,r=a.endOffset,G,H,w,n,M,Q;if(h&&m.type==CKEDITOR.NODE_TEXT&&p.equals(m))p=a.document.createText(p.substring(C,r)),c.append(p);else{m.type==CKEDITOR.NODE_TEXT?h?Q=!0:m=m.split(r):0<m.getChildCount()?r>=m.getChildCount()?(m=m.getChild(r-1),H=!0):m=m.getChild(r):n=H=!0;p.type==CKEDITOR.NODE_TEXT?h?M=!0:p.split(C):0<p.getChildCount()?0===C?(p=p.getChild(C),G=!0):p=p.getChild(C-1):w=G=!0;for(var v=p.getParents(),D=m.getParents(),I=g(),E=v.length-1,L=D.length-1,J=c,ba,Z,V,fa=-1,O=I;O<=E;O++){Z=
v[O];V=Z.getNext();for(O!=E||Z.equals(D[O])&&E<L?b&&(ba=J.append(Z.clone(0,e))):G?q(Z,J,!1,w):M&&J.append(a.document.createText(Z.substring(C)));V;){if(V.equals(D[O])){fa=O;break}V=q(V,J)}J=ba}J=c;for(O=I;O<=L;O++)if(c=D[O],V=c.getPrevious(),c.equals(v[O]))b&&(J=J.getChild(0));else{O!=L||c.equals(v[O])&&L<E?b&&(ba=J.append(c.clone(0,e))):H?q(c,J,!1,n):Q&&J.append(a.document.createText(c.substring(0,r)));if(O>fa)for(;V;)V=q(V,J,!0);J=ba}h||l()}}function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),
c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(e){return c(e)||b(e)?!0:d(e)&&!a?a=!0:e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(g)?!1:!0}}function c(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&l(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function e(a){return function(){var b;return this[a?
"getPreviousNode":"getNextNode"](function(a){!b&&w(a)&&(b=a);return n(a)&&!(l(a)&&a.equals(b))})}}var g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},l=CKEDITOR.dom.walker.bogus(),k=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,n=CKEDITOR.dom.walker.editable(),w=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);a._setStartContainer(this.startContainer);
a.startOffset=this.startOffset;a._setEndContainer(this.endContainer);a.endOffset=this.endOffset;a.collapsed=this.collapsed;return a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,2,b,!1,"undefined"==typeof a?!0:a);return b},deleteContents:function(a){this.collapsed||
d(this,0,null,a)},extractContents:function(a,b){var c=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,1,c,a,"undefined"==typeof b?!0:b);return c},createBookmark:function(a){var b,c,d,e,q=this.collapsed;b=this.document.createElement("span");b.data("cke-bookmark",1);b.setStyle("display","none");b.setHtml("\x26nbsp;");a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(q?"C":"S")));q||(c=b.clone(),c.setHtml("\x26nbsp;"),a&&c.setAttribute("id",d+"E"),e=this.clone(),
e.collapse(),e.insertNode(c));e=this.clone();e.collapse(!0);e.insertNode(b);c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END);return{startNode:a?d+(q?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:q}},createBookmark2:function(){function a(b){var f=b.container,d=b.offset,e;e=f;var g=d;e=e.type!=CKEDITOR.NODE_ELEMENT||0===g||g==e.getChildCount()?0:e.getChild(g-1).type==CKEDITOR.NODE_TEXT&&e.getChild(g).type==CKEDITOR.NODE_TEXT;e&&(f=f.getChild(d-
1),d=f.getLength());if(f.type==CKEDITOR.NODE_ELEMENT&&0<d){a:{for(e=f;d--;)if(g=e.getChild(d).getIndex(!0),0<=g){d=g;break a}d=-1}d+=1}if(f.type==CKEDITOR.NODE_TEXT){e=f;for(g=0;(e=e.getPrevious())&&e.type==CKEDITOR.NODE_TEXT;)g+=e.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;e=g;f.getText()?d+=e:(g=f.getPrevious(c),e?(d=e,f=g?g.getNext():f.getParent().getFirst()):(f=f.getParent(),d=g?g.getIndex(!0)+1:0))}b.container=f;b.offset=d}function b(a,c){var f=c.getCustomData("cke-fillingChar");
if(f){var d=a.container;f.equals(d)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=d.getIndex(),a.container=d.getParent()))}}var c=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(c){var d=this.collapsed,e={container:this.startContainer,offset:this.startOffset},g={container:this.endContainer,offset:this.endOffset};c&&(a(e),b(e,this.root),d||(a(g),b(g,this.root)));return{start:e.container.getAddress(c),end:d?null:g.container.getAddress(c),
startOffset:e.offset,endOffset:g.offset,normalized:c,collapsed:d,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset;this.setStart(b,c);d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):
this.collapse(!0)},getBoundaryNodes:function(){var a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset,e;if(a.type==CKEDITOR.NODE_ELEMENT)if(e=a.getChildCount(),e>c)a=a.getChild(c);else if(1>e)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a);a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(e=b.getChildCount(),e>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>e)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=
b.lastChild;b=new CKEDITOR.dom.node(b)}a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b);return{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):
this.setStartBefore(a));a=this.endContainer;b=this.endOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START);b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,e=this.collapsed;if((!a||
e)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var q=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(q,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else d=c.getIndex(),c=c.getParent();this.setStart(c,d);if(e){this.collapse(!0);return}}c=this.endContainer;d=this.endOffset;b||e||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):
d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:var q=function(a,b){var c=new CKEDITOR.dom.range(l);c.setStart(a,b);c.setEndAt(l,CKEDITOR.POSITION_BEFORE_END);var c=new CKEDITOR.dom.walker(c),f;for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};f=
c.next();){if(f.type!=CKEDITOR.NODE_TEXT)return!1;G=f!=a?f.getText():f.substring(b);if(d.test(G))return!1}return!0};if(this.collapsed)break;var g=this.getCommonAncestor(),l=this.root,k,z,h,p,m,C=!1,r,G;r=this.startContainer;var H=this.startOffset;r.type==CKEDITOR.NODE_TEXT?(H&&(r=!CKEDITOR.tools.trim(r.substring(0,H)).length&&r,C=!!r),r&&((p=r.getPrevious())||(h=r.getParent()))):(H&&(p=r.getChild(H-1)||r.getLast()),p||(h=r));for(h=c(h);h||p;){if(h&&!p){!m&&h.equals(g)&&(m=!0);if(e?h.isBlockBoundary():
!l.contains(h))break;C&&"inline"==h.getComputedStyle("display")||(C=!1,m?k=h:this.setStartBefore(h));p=h.getPrevious()}for(;p;)if(r=!1,p.type==CKEDITOR.NODE_COMMENT)p=p.getPrevious();else{if(p.type==CKEDITOR.NODE_TEXT)G=p.getText(),d.test(G)&&(p=null),r=/[\s\ufeff]$/.test(G);else if((p.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&p.is("br"))&&!p.data("cke-bookmark"))if(C&&CKEDITOR.dtd.$removeEmpty[p.getName()]){G=p.getText();if(d.test(G))p=null;else for(var H=p.$.getElementsByTagName("*"),w=0,n;n=
H[w++];)if(!CKEDITOR.dtd.$removeEmpty[n.nodeName.toLowerCase()]){p=null;break}p&&(r=!!G.length)}else p=null;r&&(C?m?k=h:h&&this.setStartBefore(h):C=!0);if(p){r=p.getPrevious();if(!h&&!r){h=p;p=null;break}p=r}else h=null}h&&(h=c(h.getParent()))}r=this.endContainer;H=this.endOffset;h=p=null;m=C=!1;r.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(r.substring(H)).length?C=!0:(C=!r.getLength(),H==r.getLength()?(p=r.getNext())||(h=r.getParent()):q(r,H)&&(h=r.getParent())):(p=r.getChild(H))||(h=r);for(;h||
p;){if(h&&!p){!m&&h.equals(g)&&(m=!0);if(e?h.isBlockBoundary():!l.contains(h))break;C&&"inline"==h.getComputedStyle("display")||(C=!1,m?z=h:h&&this.setEndAfter(h));p=h.getNext()}for(;p;){r=!1;if(p.type==CKEDITOR.NODE_TEXT)G=p.getText(),q(p,0)||(p=null),r=/^[\s\ufeff]/.test(G);else if(p.type==CKEDITOR.NODE_ELEMENT){if((0<p.$.offsetWidth||b&&p.is("br"))&&!p.data("cke-bookmark"))if(C&&CKEDITOR.dtd.$removeEmpty[p.getName()]){G=p.getText();if(d.test(G))p=null;else for(H=p.$.getElementsByTagName("*"),w=
0;n=H[w++];)if(!CKEDITOR.dtd.$removeEmpty[n.nodeName.toLowerCase()]){p=null;break}p&&(r=!!G.length)}else p=null}else r=1;r&&C&&(m?z=h:this.setEndAfter(h));if(p){r=p.getNext();if(!h&&!r){h=p;p=null;break}p=r}else h=null}h&&(h=c(h.getParent()))}k&&z&&(g=k.contains(z)?z:k,this.setStartBefore(g),this.setEndAfter(g));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:h=new CKEDITOR.dom.range(this.root);l=this.root;h.setStartAt(l,CKEDITOR.POSITION_AFTER_START);h.setEnd(this.startContainer,
this.startOffset);h=new CKEDITOR.dom.walker(h);var M,Q,v=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),D=null,I=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(D){if(D.equals(a)){D=null;return}}else D=a;else if(D)return;var b=v(a);b||(M=a);return b},e=function(a){var b=I(a);!b&&a.is&&a.is("br")&&(Q=a);return b};h.guard=I;h=h.lastBackward();M=M||l;this.setStartAt(M,!M.is("br")&&(!h&&this.checkStartOfBlock()||h&&M.contains(h))?
CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){h=this.clone();h=new CKEDITOR.dom.walker(h);var E=CKEDITOR.dom.walker.whitespaces(),L=CKEDITOR.dom.walker.bookmark();h.evaluator=function(a){return!E(a)&&!L(a)};if((h=h.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br"))break}h=this.clone();h.collapse();h.setEndAt(l,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:I;M=D=Q=null;h=h.lastForward();
M=M||l;this.setEndAt(M,!h&&this.checkEndOfBlock()||h&&M.contains(h)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);Q&&this.setEndAfter(Q)}},shrink:function(a,b,c){if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var d=this.clone(),e=this.startContainer,q=this.endContainer,g=this.startOffset,l=this.endOffset,k=1,z=1;e&&e.type==CKEDITOR.NODE_TEXT&&(g?g>=e.getLength()?d.setStartAfter(e):(d.setStartBefore(e),k=0):d.setStartBefore(e));q&&q.type==CKEDITOR.NODE_TEXT&&(l?l>=q.getLength()?d.setEndAfter(q):
(d.setEndAfter(q),z=0):d.setEndBefore(q));var d=new CKEDITOR.dom.walker(d),h=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var p;d.guard=function(b,d){if(h(b))return!0;if(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(p)||!1===c&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))return!1;d||b.type!=CKEDITOR.NODE_ELEMENT||
(p=b);return!0};k&&(e=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(e,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);z&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!k&&!z)}},insertNode:function(a){this.optimizeBookmark();this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a);a.getParent()&&a.getParent().equals(this.endContainer)&&
this.endOffset++;this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b);this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset);this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent());this._setStartContainer(b);this.startOffset=
c;this.endContainer||(this._setEndContainer(b),this.endOffset=c);a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent());this._setEndContainer(b);this.endOffset=c;this.startContainer||(this._setStartContainer(b),this.startOffset=c);a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),
a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,
0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(d);d.trim();this.insertNode(d);var e=d.getBogus();e&&e.remove();
d.appendBogus();this.moveToBookmark(c);return d},splitBlock:function(a,b){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),e=c.block,q=d.block,g=null;if(!c.blockLimit.equals(d.blockLimit))return null;"br"!=a&&(e||(e=this.fixBlock(!0,a),q=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),q||(q=this.fixBlock(!1,a)));c=e&&this.checkStartOfBlock();d=q&&this.checkEndOfBlock();this.deleteContents();e&&e.equals(q)&&
(d?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(q,CKEDITOR.POSITION_AFTER_END),q=null):c?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e=null):(q=this.splitElement(e,b||!1),e.is("ul","ol")||e.appendBogus()));return{previousBlock:e,nextBlock:q,wasStartOfBlock:c,wasEndOfBlock:d,elementPath:g}},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);
var c=this.extractContents(!1,b||!1),d=a.clone(!1,b||!1);c.appendTo(d);d.insertAfter(a);this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);return d},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var c=this.createBookmark(),d=this[b?"endPath":"startPath"](),e=d.block||
d.blockLimit,g;e&&!e.equals(d.root)&&!e.getFirst(a(e));)g=e.getParent(),this[b?"setEndAt":"setStartAt"](e,CKEDITOR.POSITION_AFTER_END),e.remove(1),e=g;this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,e=this.clone();e.collapse(d);e[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:
CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);e.evaluator=c(d);return e[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,c)),k.test(a)&&this.trim(0,1));this.trim();a=new CKEDITOR.dom.elementPath(this.startContainer,this.root);c=this.clone();c.collapse(!0);c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(c);
a.evaluator=b();return a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(c)),k.test(a)&&this.trim(1,0));this.trim();a=new CKEDITOR.dom.elementPath(this.endContainer,this.root);c=this.clone();c.collapse(!1);c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(c);a.evaluator=b();return a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();
d.collapse(1);d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.previous()},getNextNode:function(a,b,c){var d=this.clone();d.collapse();d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||
"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&k.test(a.getText())?this.moveToPosition(a,
CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),
!0;var d=a,e=c,q=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(q=d[b?"getLast":"getFirst"](w));e||q||(q=d[b?"getPrevious":"getNext"](w));a=q}return!!c},moveToClosestEditablePosition:function(a,b){var c,d=0,e,q,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];a?(c=new CKEDITOR.dom.range(this.root),c.moveToPosition(a,g[b?0:1])):c=this.clone();if(a&&!a.is(CKEDITOR.dtd.$block))d=1;else if(e=c[b?"getNextEditableNode":"getPreviousEditableNode"]())d=1,(q=e.type==CKEDITOR.NODE_ELEMENT)&&
e.is(CKEDITOR.dtd.$block)&&"false"==e.getAttribute("contenteditable")?(c.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(e,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&q&&e.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(e,0),c.collapse()):c.moveToPosition(e,g[b?1:0]);d&&this.moveToRange(c);return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=
this.clone();a.optimize();if(a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();a.reset();return d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=
this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:e(),getPreviousEditableNode:e(1),scrollIntoView:function(){var a=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),b,c,d,e=this.clone();e.optimize();(d=e.startContainer.type==CKEDITOR.NODE_TEXT)?(c=e.startContainer.getText(),b=e.startContainer.split(e.startOffset),a.insertAfter(e.startContainer)):e.insertNode(a);a.scrollIntoView();
d&&(e.startContainer.setText(c),b.remove());a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";
(function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function d(a){var b=[];a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function b(a,c,e,g){a:{null==g&&(g=d(e));for(var l;l=g.shift();)if(l.getDtd().p){g={element:l,remaining:g};break a}g=null}if(!g)return 0;if((l=CKEDITOR.filter.instances[g.element.data("cke-filter")])&&!l.check(c))return b(a,
c,e,g.remaining);c=new CKEDITOR.dom.range(g.element);c.selectNodeContents(g.element);c=c.createIterator();c.enlargeBr=a.enlargeBr;c.enforceRealBlocks=a.enforceRealBlocks;c.activeFilter=c.filter=l;a._.nestedEditable={element:g.element,container:e,remaining:g.remaining,iterator:c};return 1}function c(a,b,c){if(!b)return!1;a=a.clone();a.collapse(!c);return a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END)}var e=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),l=CKEDITOR.dom.walker.whitespaces(!0),
k=function(a){return g(a)&&l(a)},n={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var d,l,A,u,B;a=a||"p";if(this._.nestedEditable){if(d=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,d;this.activeFilter=this.filter;if(b(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=
null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var q=this.range.clone();l=q.startPath();var y=q.endPath(),F=!q.collapsed&&c(q,l.block),t=!q.collapsed&&c(q,y.block,1);q.shrink(CKEDITOR.SHRINK_ELEMENT,!0);F&&q.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END);t&&q.setEndAt(y.block,CKEDITOR.POSITION_AFTER_START);l=q.endContainer.hasAscendant("pre",!0)||q.startContainer.hasAscendant("pre",!0);q.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);
q.collapsed||(l=new CKEDITOR.dom.walker(q.clone()),y=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=y,this._.nextNode=l.next(),l=new CKEDITOR.dom.walker(q.clone()),l.evaluator=y,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,q.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(y=this.range.clone(),y.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),y.checkEndOfBlock()&&
(y=new CKEDITOR.dom.elementPath(y.endContainer,y.root),this._.lastNode=(y.block||y.blockLimit).getNextSourceNode(!0))),this._.lastNode&&q.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=q.document.createText(""),this._.lastNode.insertAfter(l)),q=null);this._.started=1;l=q}y=this._.nextNode;q=this._.lastNode;for(this._.nextNode=null;y;){var F=0,t=y.hasAscendant("pre"),z=y.type!=CKEDITOR.NODE_ELEMENT,h=0;if(z)y.type==CKEDITOR.NODE_TEXT&&e.test(y.getText())&&(z=0);else{var p=y.getName();
if(CKEDITOR.dtd.$block[p]&&"false"==y.getAttribute("contenteditable")){d=y;b(this,a,d);break}else if(y.isBlockBoundary(this.forceBrBreak&&!t&&{br:1})){if("br"==p)z=1;else if(!l&&!y.getChildCount()&&"hr"!=p){d=y;A=y.equals(q);break}l&&(l.setEndAt(y,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=y));F=1}else{if(y.getFirst()){l||(l=this.range.clone(),l.setStartAt(y,CKEDITOR.POSITION_BEFORE_START));y=y.getFirst();continue}z=1}}z&&!l&&(l=this.range.clone(),l.setStartAt(y,CKEDITOR.POSITION_BEFORE_START));
A=(!F||z)&&y.equals(q);if(l&&!F)for(;!y.getNext(k)&&!A;){p=y.getParent();if(p.isBlockBoundary(this.forceBrBreak&&!t&&{br:1})){F=1;z=0;A||p.equals(q);l.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}y=p;z=1;A=y.equals(q);h=1}z&&l.setEndAt(y,CKEDITOR.POSITION_AFTER_END);y=this._getNextSourceNode(y,h,q);if((A=!y)||F&&l)break}if(!d){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(l.startContainer,l.root);y=d.blockLimit;F={div:1,th:1,td:1};
d=d.block;!d&&y&&!this.enforceRealBlocks&&F[y.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!y.equals(l.root)?d=y:!d||this.enforceRealBlocks&&d.is(n)?(d=this.range.document.createElement(a),l.extractContents().appendTo(d),d.trim(),l.insertNode(d),u=B=!0):"li"!=d.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(d=d.clone(!1),l.extractContents().appendTo(d),d.trim(),B=l.splitBlock(),u=!B.wasStartOfBlock,B=!B.wasEndOfBlock,l.insertNode(d)):A||(this._.nextNode=d.equals(q)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,
1,q))}u&&(u=d.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&("br"==u.getName()?u.remove():u.getLast()&&"br"==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove());B&&(u=d.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(g)||u.getNext(g))&&u.remove();this._.nextNode||(this._.nextNode=A||d.equals(q)||!q?null:this._getNextSourceNode(d,1,q));return d},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(e))}var e=
this.range.root;for(a=a.getNextSourceNode(b,null,d);!g(a);)a=a.getNextSourceNode(b,null,d);return a}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();
CKEDITOR.command=function(a,d){this.uiItems=[];this.exec=function(b){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&a.focus();return!1===this.fire("exec")?!0:!1!==d.exec.call(this,a,b)};this.refresh=function(a,b){if(!this.readOnly&&a.readOnly)return!0;if(this.context&&!b.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[a.mode]&&this.disable();return!1===this.fire("refresh",
{editor:a,path:b})?!0:d.refresh&&!1!==d.refresh.apply(this,arguments)};var b;this.checkAllowed=function(c){return c||"boolean"!=typeof b?b=a.activeFilter.checkFeature(this):b};CKEDITOR.tools.extend(this,d,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!d.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};
CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=a;this.fire("state");return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?
this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;
CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};
(function(){function a(a,b,c,d,e){var h,p;a=[];for(h in b){p=b[h];p="boolean"==typeof p?{}:"function"==typeof p?{match:p}:K(p);"$"!=h.charAt(0)&&(p.elements=h);c&&(p.featureName=c.toLowerCase());var m=p;m.elements=l(m.elements,/\s+/)||null;m.propertiesOnly=m.propertiesOnly||!0===m.elements;var r=/\s*,\s*/,q=void 0;for(q in Q){m[q]=l(m[q],r)||null;var f=m,E=v[q],z=l(m[v[q]],r),g=m[q],C=[],G=!0,L=void 0;z?G=!1:z={};for(L in g)"!"==L.charAt(0)&&(L=L.slice(1),C.push(L),z[L]=!0,G=!1);for(;L=C.pop();)g[L]=
g["!"+L],delete g["!"+L];f[E]=(G?!1:z)||null}m.match=m.match||null;d.push(p);a.push(p)}b=e.elements;e=e.generic;var k;c=0;for(d=a.length;c<d;++c){h=K(a[c]);p=!0===h.classes||!0===h.styles||!0===h.attributes;m=h;q=E=r=void 0;for(r in Q)m[r]=F(m[r]);f=!0;for(q in v){r=v[q];E=m[r];z=[];g=void 0;for(g in E)-1<g.indexOf("*")?z.push(new RegExp("^"+g.replace(/\*/g,".*")+"$")):z.push(g);E=z;E.length&&(m[r]=E,f=!1)}m.nothingRequired=f;m.noProperties=!(m.attributes||m.classes||m.styles);if(!0===h.elements||
null===h.elements)e[p?"unshift":"push"](h);else for(k in m=h.elements,delete h.elements,m)if(b[k])b[k][p?"unshift":"push"](h);else b[k]=[h]}}function d(a,c,d,h){if(!a.match||a.match(c))if(h||k(a,c))if(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=b(a.attributes,c.attributes,d.validAttributes)),d.allStyles||(d.allStyles=b(a.styles,c.styles,d.validStyles)),!d.allClasses){a=a.classes;c=c.classes;h=d.validClasses;if(a)if(!0===a)a=!0;else{for(var p=0,e=c.length,m;p<e;++p)m=c[p],h[m]||
(h[m]=a(m));a=!1}else a=!1;d.allClasses=a}}function b(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function c(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;c.hadInvalidAttribute=e(a.attributes,b.attributes)||c.hadInvalidAttribute;c.hadInvalidStyle=e(a.styles,b.styles)||c.hadInvalidStyle;a=a.classes;b=b.classes;if(a){for(var d=!1,h=!0===a,p=b.length;p--;)if(h||a(b[p]))b.splice(p,1),d=!0;a=d}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function e(a,
b){if(!a)return!1;var c=!1,d=!0===a,h;for(h in b)if(d||a(h))delete b[h],c=!0;return c}function g(a,b,c){if(a.disabled||a.customConfig&&!c||!b)return!1;a._.cachedChecks={};return!0}function l(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=R(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var c={},d=0,h;for(h in a)c[h]=a[h],d++;return d?c:!1}function k(a,b){if(a.nothingRequired)return!0;
var c,d,h,p;if(h=a.requiredClasses)for(p=b.classes,c=0;c<h.length;++c)if(d=h[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(p,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(p,d))return!1;return n(b.styles,a.requiredStyles)&&n(b.attributes,a.requiredAttributes)}function n(a,b){if(!b)return!0;for(var c=0,d;c<b.length;++c)if(d=b[c],"string"==typeof d){if(!(d in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return!1;return!0}function w(a){if(!a)return{};
a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function f(a){var b,c,d,h,p={},e=1;for(a=R(a);b=a.match(D);)(c=b[2])?(d=x(c,"styles"),h=x(c,"attrs"),c=x(c,"classes")):d=h=c=null,p["$"+e++]={elements:b[1],classes:c,styles:d,attributes:h},a=a.slice(b[0].length);return p}function x(a,b){var c=a.match(I[b]);return c?R(c[1]):null}function A(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||
"",1));a.classes||(a.classes=c?c.split(/\s+/):[])}function u(a,b,h,e){var m=0,r;e.toHtml&&(b.name=b.name.replace(E,"$1"));if(e.doCallbacks&&a.elementCallbacks){a:{r=a.elementCallbacks;for(var g=0,f=r.length,z;g<f;++g)if(z=r[g](b)){r=z;break a}r=void 0}if(r)return r}if(e.doTransform&&(r=a._.transformations[b.name])){A(b);for(g=0;g<r.length;++g)p(a,b,r[g]);q(b)}if(e.doFilter){a:{g=b.name;f=a._;a=f.allowedRules.elements[g];r=f.allowedRules.generic;g=f.disallowedRules.elements[g];f=f.disallowedRules.generic;
z=e.skipRequired;var C={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},v,l;if(a||r){A(b);if(g)for(v=0,l=g.length;v<l;++v)if(!1===c(g[v],b,C)){a=null;break a}if(f)for(v=0,l=f.length;v<l;++v)c(f[v],b,C);if(a)for(v=0,l=a.length;v<l;++v)d(a[v],b,C,z);if(r)for(v=0,l=r.length;v<l;++v)d(r[v],b,C,z);a=C}else a=null}if(!a||!a.valid)return h.push(b),1;l=a.validAttributes;var G=a.validStyles;
r=a.validClasses;var g=b.attributes,k=b.styles,f=b.classes;z=b.classBackup;var I=b.styleBackup,D,H,J=[],C=[],n=/^data-cke-/;v=!1;delete g.style;delete g["class"];delete b.classBackup;delete b.styleBackup;if(!a.allAttributes)for(D in g)l[D]||(n.test(D)?D==(H=D.replace(/^data-cke-saved-/,""))||l[H]||(delete g[D],v=!0):(delete g[D],v=!0));if(!a.allStyles||a.hadInvalidStyle){for(D in k)a.allStyles||G[D]?J.push(D+":"+k[D]):v=!0;J.length&&(g.style=J.sort().join("; "))}else I&&(g.style=I);if(!a.allClasses||
a.hadInvalidClass){for(D=0;D<f.length;++D)(a.allClasses||r[f[D]])&&C.push(f[D]);C.length&&(g["class"]=C.sort().join(" "));z&&C.length<z.split(/\s+/).length&&(v=!0)}else z&&(g["class"]=z);v&&(m=1);if(!e.skipFinalValidation&&!y(b))return h.push(b),1}e.toHtml&&(b.name=b.name.replace(L,"cke:$1"));return m}function B(a){var b=[],c;for(c in a)-1<c.indexOf("*")&&b.push(c.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function q(a){var b=a.attributes,c;delete b.style;delete b["class"];
if(c=CKEDITOR.tools.writeCssText(a.styles,!0))b.style=c;a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function y(a){switch(a.name){case "a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case "img":if(!a.attributes.src)return!1}return!0}function F(a){if(!a)return!1;if(!0===a)return!0;var b=B(a);return function(c){return c in a||b&&c.match(b)}}function t(){return new CKEDITOR.htmlParser.element("br")}function z(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==
a.name||H.$block[a.name])}function h(a,b,c){var d=a.name;if(H.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(t()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(H.$block[d]||"tr"==d)if("br"==b)a.previous&&!z(a.previous)&&(b=t(),b.insertBefore(a)),a.next&&!z(a.next)&&(b=t(),b.insertAfter(a)),a.replaceWithChildren();else{var d=a.children,h;b:{h=H[b];for(var p=0,e=d.length,m;p<e;++p)if(m=d[p],m.type==CKEDITOR.NODE_ELEMENT&&!h[m.name]){h=!1;break b}h=!0}if(h)a.name=b,a.attributes=
{},c.push({check:"parent-down",el:a});else{h=a.parent;for(var p=h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==h.name,r,g,e=d.length;0<e;)m=d[--e],p&&(m.type==CKEDITOR.NODE_TEXT||m.type==CKEDITOR.NODE_ELEMENT&&H.$inline[m.name])?(r||(r=new CKEDITOR.htmlParser.element(b),r.insertAfter(a),c.push({check:"parent-down",el:r})),r.add(m,0)):(r=null,g=H[h.name]||H.span,m.insertAfter(a),h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||m.type!=CKEDITOR.NODE_ELEMENT||g[m.name]||c.push({check:"el-up",el:m}));a.remove()}}else d in
{style:1,script:1}?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function p(a,b,c){var d,h;for(d=0;d<c.length;++d)if(h=c[d],!(h.check&&!a.check(h.check,!1)||h.left&&!h.left(b))){h.right(b,J);break}}function m(a,b){var c=b.getDefinition(),d=c.attributes,h=c.styles,p,e,m,r;if(a.name!=c.element)return!1;for(p in d)if("class"==p)for(c=d[p].split(/\s+/),m=a.classes.join("|");r=c.pop();){if(-1==m.indexOf(r))return!1}else if(a.attributes[p]!=d[p])return!1;for(e in h)if(a.styles[e]!=
h[e])return!1;return!0}function C(a,b){var c,d;"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]);return[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function r(a){return function(b){return m(b,a)}}function G(a){return function(b,c){c[a](b)}}var H=CKEDITOR.dtd,K=CKEDITOR.tools.copy,R=CKEDITOR.tools.trim,M=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(a){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=
!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(a instanceof CKEDITOR.editor){a=this.editor=a;this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(M[a.enterMode]+" "+M[a.shiftEnterMode],"default",
1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(b,c,d){if(!g(this,b,d))return!1;var h,p;if("string"==typeof b)b=f(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);h=b.getDefinition();b={};d=h.attributes;b[h.element]=h={styles:h.styles,requiredStyles:h.styles&&CKEDITOR.tools.objectKeys(h.styles)};d&&(d=
K(d),h.classes=d["class"]?d["class"].split(/\s+/):null,h.requiredClasses=h.classes,delete d["class"],h.attributes=d,h.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(h=0;h<b.length;++h)p=this.allow(b[h],c,d);return p}a(this,b,c,this.allowedContent,this._.allowedRules);return!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var p=this,e=[],m=this.editor&&this.editor.config.protectedSource,r,g=!1,f={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};
a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(r=u(p,a,e,f),r&1)g=!0;else if(r&2)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var h,q,z;if(m)for(q=0;q<m.length;++q)if((z=d.match(m[q]))&&z[0].length==d.length){c=!0;
break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d);1==d.children.length&&(h=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&u(p,h,c,f);c=!c.length}c||e.push(a)}},null,!0);e.length&&(g=!0);var q;a=[];d=M[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var z;c=e.pop();)c.type==CKEDITOR.NODE_ELEMENT?h(c,d,a):c.remove();for(;q=a.pop();)if(c=q.el,c.parent)switch(z=H[c.parent.name]||H.span,q.check){case "it":H.$removeEmpty[c.name]&&!c.children.length?h(c,d,a):y(c)||h(c,d,a);break;case "el-up":c.parent.type==
CKEDITOR.NODE_DOCUMENT_FRAGMENT||z[c.name]||h(c,d,a);break;case "parent-down":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||z[c.name]||h(c.parent,d,a)}return g},checkFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));return!a.requiredContent||this.check(a.requiredContent)},disable:function(){this.disabled=!0},disallow:function(b){if(!g(this,b,!0))return!1;"string"==typeof b&&(b=f(b));a(this,b,null,this.disallowedContent,this._.disallowedRules);return!0},
addContentForms:function(a){if(!this.disabled&&a){var b,c,d=[],h;for(b=0;b<a.length&&!h;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(h=c);if(h){for(b=0;b<a.length;++b)d.push(C(a[b],h));this.addTransformations(d)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(a)},addFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));this.allow(a.allowedContent,a.name);this.addTransformations(a.contentTransformations);
this.addContentForms(a.contentForms);return a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d=this._.transformations,h;for(h=0;h<a.length;++h){b=a[h];var p=void 0,e=void 0,m=void 0,g=void 0,q=void 0,f=void 0;c=[];for(e=0;e<b.length;++e)m=b[e],"string"==typeof m?(m=m.split(/\s*:\s*/),g=m[0],q=null,f=m[1]):(g=m.check,q=m.left,f=m.right),p||(p=m,p=p.element?p.element:g?g.match(/^([a-z0-9]+)/i)[0]:
p.left.getDefinition().element),q instanceof CKEDITOR.style&&(q=r(q)),c.push({check:g==p?null:g,left:q,right:"string"==typeof f?G(f):f});b=p;d[b]||(d[b]=[]);d[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var h,e;if("string"==typeof a){e=a+"\x3c"+(!1===b?"0":"1")+(c?"1":"0")+"\x3e";if(e in this._.cachedChecks)return this._.cachedChecks[e];d=f(a).$1;h=d.styles;var m=d.classes;d.name=d.elements;
d.classes=m=m?m.split(/\s*,\s*/):[];d.styles=w(h);d.attributes=w(d.attributes);d.children=[];m.length&&(d.attributes["class"]=m.join(" "));h&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles));h=d}else d=a.getDefinition(),h=d.styles,m=d.attributes||{},h?(h=K(h),m.style=CKEDITOR.tools.writeCssText(h,!0)):h={},h={name:d.element,attributes:m,classes:m["class"]?m["class"].split(/\s+/):[],styles:h,children:[]};var m=CKEDITOR.tools.clone(h),r=[],g;if(!1!==b&&(g=this._.transformations[h.name])){for(d=
0;d<g.length;++d)p(this,h,g[d]);q(h)}u(this,m,r,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c});b=0<r.length?!1:CKEDITOR.tools.objectCompare(h.attributes,m.attributes,!0)?!0:!1;"string"==typeof a&&(this._.cachedChecks[e]=b);return b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var h=a.slice(),p;if(this.check(M[c]))return c;for(d||(h=h.reverse());p=h.pop();)if(this.check(p))return b[p];
return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var Q={styles:1,attributes:1,classes:1},v={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},D=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,I={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},E=/^cke:(object|embed|param)$/,
L=/^(object|embed|param)$/,J=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width");this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width");this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){c=c||b;if(!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){c=c||b;if(!(c in a.attributes)){var d=a.styles[b],h=d&&d.match(/^(\d+)(?:\.\d*)?px$/);
h?a.attributes[c]=h[1]:"cke-test"==d&&(a.attributes[c]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;if("left"==b||"right"==b)a.styles["float"]=b}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];if("left"==b||"right"==b)a.attributes.align=b}delete a.styles["float"]},matchesStyle:m,transform:function(a,b){if("string"==typeof b)a.name=b;else{var c=b.getDefinition(),d=c.styles,
h=c.attributes,p,m,e,r;a.name=c.element;for(p in h)if("class"==p)for(c=a.classes.join("|"),e=h[p].split(/\s+/);r=e.pop();)-1==c.indexOf(r)&&a.classes.push(r);else a.attributes[p]=h[p];for(m in d)a.styles[m]=d[m]}}}})();
(function(){CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:a};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer);a&&(this.currentActive=a);this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=
1},unlock:function(){delete this._.locked},blur:function(a){function d(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?d.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;d.call(this)},b,this)}},add:function(a,d){var b=a.getCustomData("focusmanager");if(!b||b!=this){b&&b.remove(a);var b=
"focus",c="blur";d&&(CKEDITOR.env.ie?(b="focusin",c="focusout"):CKEDITOR.event.useCapture=1);var e={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(b,e.focus,this);a.on(c,e.blur,this);d&&(CKEDITOR.event.useCapture=0);a.setCustomData("focusmanager",this);a.setCustomData("focusmanager_handlers",e)}},remove:function(a){a.removeCustomData("focusmanager");var d=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",d.blur);a.removeListener("focus",
d.focus)}}})();CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};
(function(){var a,d=function(b){b=b.data;var d=b.getKeystroke(),g=this.keystrokes[d],l=this._.editor;a=!1===l.fire("key",{keyCode:d,domEvent:b});a||(g&&(a=!1!==l.execCommand(g,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[d]));a&&b.preventDefault(!0);return!a},b=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)a.on("keypress",b,this)}}})();
(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,d,b){a&&CKEDITOR.lang.languages[a]||(a=
this.detect(d,a));var c=this;d=function(){c[a].dir=c.rtl[a]?"rtl":"ltr";b(a,c[a])};this[a]?d():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),d,this)},detect:function(a,d){var b=this.languages;d=d||navigator.userLanguage||navigator.language||a;var c=d.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),e=c[1],c=c[2];b[e+"-"+c]?e=e+"-"+c:b[e]||(e=null);CKEDITOR.lang.detect=e?function(){return e}:function(a){return a};return e||a}}})();
CKEDITOR.scriptLoader=function(){var a={},d={};return{load:function(b,c,e,g){var l="string"==typeof b;l&&(b=[b]);e||(e=CKEDITOR);var k=b.length,n=[],w=[],f=function(a){c&&(l?c.call(e,a):c.call(e,n,w))};if(0===k)f(!0);else{var x=function(a,b){(b?n:w).push(a);0>=--k&&(g&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),f(b))},A=function(b,c){a[b]=1;var e=d[b];delete d[b];for(var g=0;g<e.length;g++)e[g](b,c)},u=function(b){if(a[b])x(b,!0);else{var e=d[b]||(d[b]=[]);e.push(x);if(!(1<e.length)){var g=
new CKEDITOR.dom.element("script");g.setAttributes({type:"text/javascript",src:b});c&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?g.$.onreadystatechange=function(){if("loaded"==g.$.readyState||"complete"==g.$.readyState)g.$.onreadystatechange=null,A(b,!0)}:(g.$.onload=function(){setTimeout(function(){A(b,!0)},0)},g.$.onerror=function(){A(b,!1)}));g.appendTo(CKEDITOR.document.getHead())}}};g&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var B=0;B<k;B++)u(b[B])}},queue:function(){function a(){var b;
(b=c[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)}var c=[];return function(d,g){var l=this;c.push({scriptUrl:d,callback:function(){g&&g.apply(this,arguments);c.shift();a.call(l)}});1==c.length&&a.call(this)}}()}}();CKEDITOR.resourceManager=function(a,d){this.basePath=a;this.fileName=d;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};
CKEDITOR.resourceManager.prototype={add:function(a,d){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var b=this.registered[a]=d||{};b.name=a;b.path=this.getPath(a);CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b);return this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var d=this.externals[a];return CKEDITOR.getUrl(d&&d.dir||this.basePath+a+"/")},getFilePath:function(a){var d=this.externals[a];
return CKEDITOR.getUrl(this.getPath(a)+(d?d.file:this.fileName+".js"))},addExternal:function(a,d,b){a=a.split(",");for(var c=0;c<a.length;c++){var e=a[c];b||(d=d.replace(/[^\/]+$/,function(a){b=a;return""}));this.externals[e]={dir:d,file:b||this.fileName+".js"}}},load:function(a,d,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var c=this.loaded,e=this.registered,g=[],l={},k={},n=0;n<a.length;n++){var w=a[n];if(w)if(c[w]||e[w])k[w]=this.get(w);else{var f=this.getFilePath(w);g.push(f);f in l||(l[f]=
[]);l[f].push(w)}}CKEDITOR.scriptLoader.load(g,function(a,e){if(e.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+l[e[0]].join(",")+'" was not found at "'+e[0]+'".');for(var g=0;g<a.length;g++)for(var f=l[a[g]],q=0;q<f.length;q++){var y=f[q];k[y]=this.get(y);c[y]=1}d.call(b,k)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var d={};return function(b,c,e){var g={},l=function(b){a.call(this,b,function(a){CKEDITOR.tools.extend(g,a);var b=[],f;for(f in a){var k=a[f],A=k&&k.requires;if(!d[f]){if(k.icons)for(var u=k.icons.split(","),B=u.length;B--;)CKEDITOR.skin.addIcon(u[B],k.path+"icons/"+(CKEDITOR.env.hidpi&&k.hidpi?"hidpi/":"")+u[B]+".png");d[f]=1}if(A)for(A.split&&(A=A.split(",")),k=0;k<A.length;k++)g[A[k]]||b.push(A[k])}if(b.length)l.call(this,
b);else{for(f in g)k=g[f],k.onLoad&&!k.onLoad._called&&(!1===k.onLoad()&&delete g[f],k.onLoad._called=1);c&&c.call(e||window,g)}},this)};l.call(this,b)}});CKEDITOR.plugins.setLang=function(a,d,b){var c=this.get(a);a=c.langEntries||(c.langEntries={});c=c.lang||(c.lang=[]);c.split&&(c=c.split(","));-1==CKEDITOR.tools.indexOf(c,d)&&c.push(d);a[d]=b};CKEDITOR.ui=function(a){if(a.ui)return a.ui;this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this};
CKEDITOR.ui.prototype={add:function(a,d,b){b.name=a.toLowerCase();var c=this.items[a]={type:d,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(c,b)},get:function(a){return this.instances[a]},create:function(a){var d=this.items[a],b=d&&this._.handlers[d.type],c=d&&d.command&&this.editor.getCommand(d.command),b=b&&b.create.apply(this,d.args);this.instances[a]=b;c&&c.uiItems.push(b);b&&!b.type&&(b.type=d.type);return b},addHandler:function(a,d){this._.handlers[a]=
d},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}};CKEDITOR.event.implementOn(CKEDITOR.ui);
(function(){function a(a,e,f){CKEDITOR.event.call(this);a=a&&CKEDITOR.tools.clone(a);if(void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!f)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!b(e,f))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');
this.element=e;this.elementMode=f;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||d();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",
c);this.on("selectionChange",function(a){g(this,a.data.path)});this.on("activeFilterChange",function(){g(this,this.elementPath(),!0)});this.on("mode",c);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?k(this,a):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function d(){do var a="editor"+ ++u;while(CKEDITOR.instances[a]);return a}function b(a,
b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function c(){var a=this.commands,b;for(b in a)e(this,a[b])}function e(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function g(a,b,c){if(b){var d,e,h=a.commands;for(e in h)d=h[e],(c||d.contextSensitive)&&d.refresh(a,b)}}function l(a){var b=a.config.customConfig;if(!b)return!1;var b=
CKEDITOR.getUrl(b),c=B[b]||(B[b]={});c.fn?(c.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&l(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};l(a)});return!0}function k(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0);delete a.config.on}c=a.config;a.readOnly=c.readOnly?!0:a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?
a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):!1;a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1;a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0;a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode;
a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode;c.skin&&(CKEDITOR.skinName=c.skin);a.fireOnce("configLoaded");a.dataProcessor=new CKEDITOR.htmlDataProcessor(a);a.filter=a.activeFilter=new CKEDITOR.filter(a);n(a)});b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig);l(a)||a.fireOnce("customConfigLoaded")}function n(a){CKEDITOR.skin.loadPart("editor",function(){w(a)})}function w(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,
c){var d=a.config.title;a.langCode=b;a.lang=CKEDITOR.tools.prototypedCopy(c);a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", ");a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir);a.fire("langLoaded");f(a)})}function f(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1);x(a)})}function x(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=
b.removePlugins;if(d)var h=new RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(h,""),c=c+(","+d);if(e)var p=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(p,"");CKEDITOR.env.air&&(c+=",adobeair");CKEDITOR.plugins.load(c.split(","),function(c){var d=[],h=[],e=[];a.plugins=c;for(var g in c){var f=c[g],z=f.lang,l=null,k=f.requires,v;CKEDITOR.tools.isArray(k)&&(k=k.join(","));if(k&&(v=k.match(p)))for(;k=v.pop();)CKEDITOR.error("editor-plugin-required",
{plugin:k.replace(",",""),requiredBy:g});z&&!a.lang[g]&&(z.split&&(z=z.split(",")),0<=CKEDITOR.tools.indexOf(z,a.langCode)?l=a.langCode:(l=a.langCode.replace(/-.*/,""),l=l!=a.langCode&&0<=CKEDITOR.tools.indexOf(z,l)?l:0<=CKEDITOR.tools.indexOf(z,"en")?"en":z[0]),f.langEntries&&f.langEntries[l]?(a.lang[g]=f.langEntries[l],l=null):e.push(CKEDITOR.getUrl(f.path+"lang/"+l+".js")));h.push(l);d.push(f)}CKEDITOR.scriptLoader.load(e,function(){for(var c=["beforeInit","init","afterInit"],e=0;e<c.length;e++)for(var p=
0;p<d.length;p++){var m=d[p];0===e&&h[p]&&m.lang&&m.langEntries&&(a.lang[m.name]=m.langEntries[h[p]]);if(m[c[e]])m[c[e]](a)}a.fireOnce("pluginsLoaded");b.keystrokes&&a.setKeystroke(a.config.keystrokes);for(p=0;p<a.config.blockedKeystrokes.length;p++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[p]]=1;a.status="loaded";a.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,a)})})}function A(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();
this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b));a.is("textarea")?a.setValue(b):a.setHtml(b);return!0}return!1}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var u=0,B={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);this.mode&&e(this,c);return this.commands[a]=c},_attachToForm:function(){function a(b){c.updateElement();c._.required&&!d.getValue()&&!1===c.fire("required")&&b.data.preventDefault()}
function b(a){return!!(a&&a.call&&a.apply)}var c=this,d=c.element,e=new CKEDITOR.dom.element(d.$.form);d.is("textarea")&&e&&(e.on("submit",a),b(e.$.submit)&&(e.$.submit=CKEDITOR.tools.override(e.$.submit,function(b){return function(){a();b.apply?b.apply(this):b()}})),c.on("destroy",function(){e.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy");!a&&A.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status=
"destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){a=this.getSelection();if(!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&
!1!==this.fire("beforeCommandExec",d)&&(d.returnValue=c.exec(d.commandData),!c.async&&!1!==this.fire("afterCommandExec",d))?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"");b={dataValue:b};!a&&this.fire("getData",b);return b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");
"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"");return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,e=b;b&&"object"==typeof b&&(c=b.internal,e=b.callback,d=!b.noSnapshot);!c&&d&&this.fire("saveSnapshot");if(e||!c)this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot");e&&e.call(a.editor)});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;
!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a;this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,c){this.fire("insertHtml",{dataValue:a,mode:b,range:c})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),c=this.getSelection(),c=c&&c.getRanges();if(!b||!c||0===c.length)return null;
for(var d=new CKEDITOR.dom.documentFragment,e,h,p,m=0;m<c.length;m++){var g=c[m],r=g.startContainer;r.getName&&"tr"==r.getName()?(e||(e=r.getAscendant("table").clone(),e.append(r.getAscendant("tbody").clone()),d.append(e),e=e.findOne("tbody")),h&&h.equals(r)||(h=r,p=r.clone(),e.append(p)),p.append(g.cloneContents())):d.append(g.cloneContents())}b=e?d:b.getHtmlFromRange(c[0]);return a?b.getHtml():b},extractSelectedHtml:function(a,b){var c=this.editable(),d=this.getSelection().getRanges();if(!c||0===
d.length)return null;d=d[0];c=c.extractHtmlFromRange(d,b);b||this.getSelection().selectRanges([d]);return a?c.getHtml():c},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return A.call(this)},setKeystroke:function(){for(var a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,
0)],c,d,e=b.length;e--;)c=b[e],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter);this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:
a:this.enterMode;b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode;if(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange")},showNotification:function(a){alert(a)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};
(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(b){for(var c,e,g=0,l;c=this._.htmlPartsRegex.exec(b);){e=c.index;if(e>g)if(g=b.substring(g,e),l)l.push(g);else this.onText(g);
g=this._.htmlPartsRegex.lastIndex;if(e=c[1])if(e=e.toLowerCase(),l&&CKEDITOR.dtd.$cdata[e]&&(this.onCDATA(l.join("")),l=null),!l){this.onTagClose(e);continue}if(l)l.push(c[0]);else if(e=c[3]){if(e=e.toLowerCase(),!/="/.test(e)){var k={},n,w=c[4];c=!!c[5];if(w)for(;n=a.exec(w);){var f=n[1].toLowerCase();n=n[2]||n[3]||n[4]||"";k[f]=!n&&d[f]?f:CKEDITOR.tools.htmlDecodeAttr(n)}this.onTagOpen(e,k,c);!l&&CKEDITOR.dtd.$cdata[e]&&(l=[])}}else if(e=c[2])this.onComment(e)}if(b.length>g)this.onText(b.substring(g,
b.length))}}})();
CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("\x3c",a)},openTagClose:function(a,d){d?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(a,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d));this._.output.push(" ",a,'\x3d"',d,'"')},closeTag:function(a){this._.output.push("\x3c/",a,"\x3e")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,
"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(a){var d=this._.output.join("");a&&this.reset();return d}}});"use strict";
(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,d=CKEDITOR.tools.indexOf(a,this),b=this.previous,c=this.next;b&&(b.next=c);c&&(c.previous=b);a.splice(d,1);this.parent=null},replaceWith:function(a){var d=this.parent.children,b=CKEDITOR.tools.indexOf(d,this),c=a.previous=this.previous,e=a.next=this.next;c&&(c.next=a);e&&(e.previous=a);d[b]=a;a.parent=this.parent;this.parent=null},insertAfter:function(a){var d=a.parent.children,
b=CKEDITOR.tools.indexOf(d,a),c=a.next;d.splice(b+1,0,this);this.next=a.next;this.previous=a;a.next=this;c&&(c.previous=this);this.parent=a.parent},insertBefore:function(a){var d=a.parent.children,b=CKEDITOR.tools.indexOf(d,a);d.splice(b,0,this);this.next=a;(this.previous=a.previous)&&(a.previous.next=this);a.previous=this;this.parent=a.parent},getAscendant:function(a){var d="function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a},b=this.parent;for(;b&&
b.type==CKEDITOR.NODE_ELEMENT;){if(d(b))return b;b=b.parent}return null},wrapWith:function(a){this.replaceWith(a);a.add(this);return a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:!1}};
CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,d){var b=this.value;if(!(b=a.onComment(d,b,this)))return this.remove(),!1;if("string"!=typeof b)return this.replaceWith(b),!1;this.value=b;return!0},writeHtml:function(a,d){d&&this.filter(d);a.comment(this.value)}});"use strict";
(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,d){if(!(this.value=a.onText(d,this.value,this)))return this.remove(),!1},writeHtml:function(a,d){d&&this.filter(d);a.text(this.value)}})})();"use strict";
(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};
(function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var d=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},c=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),e={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=
function(g,l,k){function n(a){var b;if(0<y.length)for(var c=0;c<y.length;c++){var d=y[c],h=d.name,e=CKEDITOR.dtd[h],g=t.name&&CKEDITOR.dtd[t.name];g&&!g[h]||a&&e&&!e[a]&&CKEDITOR.dtd[a]?h==t.name&&(x(t,t.parent,1),c--):(b||(w(),b=1),d=d.clone(),d.parent=t,t=d,y.splice(c,1),c--)}}function w(){for(;F.length;)x(F.shift(),t)}function f(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b=a.children.length,c=a.children[b-1],d;c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?
c.value=d:a.children.length=b-1)}}function x(b,c,d){c=c||t||q;var e=t;void 0===b.previous&&(A(c,b)&&(t=c,B.onTagOpen(k,{}),b.returnPoint=c=t),f(b),a(b)&&!b.children.length||c.add(b),"pre"==b.name&&(h=!1),"textarea"==b.name&&(z=!1));b.returnPoint?(t=b.returnPoint,delete b.returnPoint):t=d?c:e}function A(a,b){if((a==q||"body"==a.name)&&k&&(!a.name||CKEDITOR.dtd[a.name][k])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&
!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function u(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var B=new CKEDITOR.htmlParser,q=l instanceof CKEDITOR.htmlParser.element?l:"string"==typeof l?new CKEDITOR.htmlParser.element(l):new CKEDITOR.htmlParser.fragment,y=[],F=[],t=q,z="textarea"==q.name,h="pre"==q.name;B.onTagOpen=function(e,m,g,f){m=new CKEDITOR.htmlParser.element(e,m);m.isUnknown&&g&&(m.isEmpty=!0);m.isOptionalClose=f;
if(a(m))y.push(m);else{if("pre"==e)h=!0;else{if("br"==e&&h){t.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==e&&(z=!0)}if("br"==e)F.push(m);else{for(;!(f=(g=t.name)?CKEDITOR.dtd[g]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c,m.isUnknown||t.isUnknown||f[e]);)if(t.isOptionalClose)B.onTagClose(g);else if(e in b&&g in b)g=t.children,(g=g[g.length-1])&&"li"==g.name||x(g=new CKEDITOR.htmlParser.element("li"),t),!m.returnPoint&&(m.returnPoint=t),t=g;else if(e in CKEDITOR.dtd.$listItem&&
!u(e,g))B.onTagOpen("li"==e?"ul":"dl",{},0,1);else if(g in d&&!u(e,g))!m.returnPoint&&(m.returnPoint=t),t=t.parent;else if(g in CKEDITOR.dtd.$inline&&y.unshift(t),t.parent)x(t,t.parent,1);else{m.isOrphan=1;break}n(e);w();m.parent=t;m.isEmpty?x(m):t=m}}};B.onTagClose=function(a){for(var b=y.length-1;0<=b;b--)if(a==y[b].name){y.splice(b,1);return}for(var c=[],d=[],h=t;h!=q&&h.name!=a;)h._.isBlockLike||d.unshift(h),c.push(h),h=h.returnPoint||h.parent;if(h!=q){for(b=0;b<c.length;b++){var e=c[b];x(e,e.parent)}t=
h;h._.isBlockLike&&w();x(h,h.parent);h==t&&(t=t.parent);y=y.concat(d)}"body"==a&&(k=!1)};B.onText=function(a){if(!(t._.hasInlineStarted&&!F.length||h||z)&&(a=CKEDITOR.tools.ltrim(a),0===a.length))return;var b=t.name,g=b?CKEDITOR.dtd[b]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;if(!z&&!g["#"]&&b in d)B.onTagOpen(e[b]||""),B.onText(a);else{w();n();h||z||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));a=new CKEDITOR.htmlParser.text(a);if(A(t,a))this.onTagOpen(k,{},0,1);t.add(a)}};B.onCDATA=
function(a){t.add(new CKEDITOR.htmlParser.cdata(a))};B.onComment=function(a){w();n();t.add(new CKEDITOR.htmlParser.comment(a))};B.parse(g);for(w();t!=q;)x(t,t.parent,1);f(q);return q};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=0<b?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length)){this.children.pop();this.add(a);return}c.next=
a}a.previous=c;a.parent=this;this.children.splice(b,0,a);this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b);a.onRoot(b,this);this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id){c=this.getFilterContext(c);if(b&&!this.parent)a.onRoot(c,this);this.childrenFilteredBy=a.id;for(b=0;b<this.children.length;b++)!1===this.children[b].filter(a,
c)&&b--}},writeHtml:function(a,b){b&&this.filter(b);this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();if(c&&!this.parent&&b)b.onRoot(d,this);b&&this.filterChildren(b,!1,d);b=0;c=this.children;for(d=c.length;b<d;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.children;for(var e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},getFilterContext:function(a){return a||
{}}}})();"use strict";
(function(){function a(){this.rules=[]}function d(b,c,d,g){var l,k;for(l in c)(k=b[l])||(k=b[l]=new a),k.add(c[l],d,g)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;b&&this.addRules(b,10)},proto:{addRules:function(a,c){var e;"number"==typeof c?e=c:c&&"priority"in c&&(e=
c.priority);"number"!=typeof e&&(e=10);"object"!=typeof c&&(c={});a.elementNames&&this.elementNameRules.addMany(a.elementNames,e,c);a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,e,c);a.elements&&d(this.elementsRules,a.elements,e,c);a.attributes&&d(this.attributesRules,a.attributes,e,c);a.text&&this.textRules.add(a.text,e,c);a.comment&&this.commentRules.add(a.comment,e,c);a.root&&this.rootRules.add(a.root,e,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,c){return this.elementNameRules.execOnName(a,
c)},onAttributeName:function(a,c){return this.attributeNameRules.execOnName(a,c)},onText:function(a,c,d){return this.textRules.exec(a,c,d)},onComment:function(a,c,d){return this.commentRules.exec(a,c,d)},onRoot:function(a,c){return this.rootRules.exec(a,c)},onElement:function(a,c){for(var d=[this.elementsRules["^"],this.elementsRules[c.name],this.elementsRules.$],g,l=0;3>l;l++)if(g=d[l]){g=g.exec(a,c,this);if(!1===g)return null;if(g&&g!=c)return this.onNode(a,g);if(c.parent&&!c.name)break}return c},
onNode:function(a,c){var d=c.type;return d==CKEDITOR.NODE_ELEMENT?this.onElement(a,c):d==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,c.value)):d==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,c.value)):null},onAttribute:function(a,c,d,g){return(d=this.attributesRules[d])?d.exec(a,g,c,this):g}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(a,c,d){this.rules.splice(this.findIndex(c),0,{value:a,priority:c,options:d})},addMany:function(a,
c,d){for(var g=[this.findIndex(c),0],l=0,k=a.length;l<k;l++)g.push({value:a[l],priority:c,options:d});this.rules.splice.apply(this.rules,g)},findIndex:function(a){for(var c=this.rules,d=c.length-1;0<=d&&a<c[d].priority;)d--;return d+1},exec:function(a,c){var d=c instanceof CKEDITOR.htmlParser.node||c instanceof CKEDITOR.htmlParser.fragment,g=Array.prototype.slice.call(arguments,1),l=this.rules,k=l.length,n,w,f,x;for(x=0;x<k;x++)if(d&&(n=c.type,w=c.name),f=l[x],!(a.nonEditable&&!f.options.applyToAll||
a.nestedEditable&&f.options.excludeNestedEditable)){f=f.value.apply(null,g);if(!1===f||d&&f&&(f.name!=w||f.type!=n))return f;null!=f&&(g[0]=c=f)}return c},execOnName:function(a,c){for(var d=0,g=this.rules,l=g.length,k;c&&d<l;d++)k=g[d],a.nonEditable&&!k.options.applyToAll||a.nestedEditable&&k.options.excludeNestedEditable||(c=c.replace(k.value[0],k.value[1]));return c}}})();
(function(){function a(a,d){function m(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function p(a,d){return function(h){if(h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=[],p=b(h),r,v;if(p)for(f(p,1)&&e.push(p);p;)g(p)&&(r=c(p))&&f(r)&&((v=c(r))&&!g(v)?e.push(r):(m(z).insertAfter(r),r.remove())),p=p.previous;for(p=0;p<e.length;p++)e[p].remove();if(e=!a||!1!==("function"==typeof d?d(h):d))z||CKEDITOR.env.needsBrFiller||
h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?z||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||h.name in CKEDITOR.dtd.tr||h.name in CKEDITOR.dtd.$listItem)?(e=b(h),e=!e||"form"==h.name&&"input"==e.name):e=!1:e=!1;e&&h.add(m(a))}}}function f(a,b){if((!z||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;return a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(y))&&(c.index&&((new CKEDITOR.htmlParser.text(a.value.substring(0,c.index))).insertBefore(a),
a.value=c[0]),!CKEDITOR.env.needsBrFiller&&z&&(!b||a.parent.name in v)||!z&&((c=a.previous)&&"br"==c.name||!c||g(c)))?!0:!1}var r={elements:{}},z="html"==d,v=CKEDITOR.tools.extend({},h),C;for(C in v)"#"in t[C]||delete v[C];for(C in v)r.elements[C]=p(z,a.config.fillEmptyBlocks);r.root=p(z,!1);r.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=b.attributes;if("data-cke-bogus"in d||"data-cke-eol"in d)delete d["data-cke-bogus"];else{for(d=b.next;d&&e(d);)d=
d.next;var h=c(b);!d&&g(b.parent)?l(b.parent,m(a)):g(d)&&h&&!g(h)&&m(a).insertBefore(d)}}}}(z);return r}function d(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function b(a){for(a=a.children[a.children.length-1];a&&e(a);)a=a.previous;return a}function c(a){for(a=a.previous;a&&e(a);)a=a.previous;return a}function e(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function g(a){return a&&
(a.type==CKEDITOR.NODE_ELEMENT&&a.name in h||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function l(a,b){var c=a.children[a.children.length-1];a.children.push(b);b.parent=a;c&&(c.next=b,b.previous=c)}function k(a){a=a.attributes;"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1);a.contenteditable="false"}function n(a){a=a.attributes;switch(a["data-cke-editable"]){case "true":a.contenteditable="true";break;case "1":delete a.contenteditable}}function w(a){return a.replace(G,
function(a,b,c){return"\x3c"+b+c.replace(H,function(a,b){return K.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+"\x3e"})}function f(a,b){return a.replace(b,function(a,b,c){0===a.indexOf("\x3ctextarea")&&(a=b+u(c).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(a)+"\x3c/cke:encoded\x3e"})}function x(a){return a.replace(Q,function(a,b){return decodeURIComponent(b)})}function A(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,
function(a){return"\x3c!--"+F+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"})}function u(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function B(a,b){var c=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function q(a,b){var c=[],d=b.config.protectedSource,h=b._.dataStore||(b._.dataStore=
{id:1}),e=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,d=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"\x3c!--{cke_tempcomment}"+(c.push(a)-1)+"--\x3e"});for(var p=0;p<d.length;p++)a=a.replace(d[p],function(a){a=a.replace(e,function(a,b,d){return c[d]});return/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(c.push(a)-1)+"--\x3e"});a=a.replace(e,function(a,b,d){return"\x3c!--"+F+(b?"{C}":
"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"--\x3e"});a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){h[h.id]=decodeURIComponent(b);return"{cke_protected_"+h.id++ +"}"})});return a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,h){return"\x3c"+c+d+"\x3e"+B(u(h),b)+"\x3c/"+c+"\x3e"})}CKEDITOR.htmlDataProcessor=function(b){var c,
h,e=this;this.editor=b;this.dataFilter=c=new CKEDITOR.htmlParser.filter;this.htmlFilter=h=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;c.addRules(p);c.addRules(m,{applyToAll:!0});c.addRules(a(b,"data"),{applyToAll:!0});h.addRules(C);h.addRules(r,{applyToAll:!0});h.addRules(a(b,"html"),{applyToAll:!0});b.on("toHtml",function(a){a=a.data;var c=a.dataValue,h,c=q(c,b),c=f(c,M),c=w(c),c=f(c,R),c=c.replace(v,"$1cke:$2"),c=c.replace(I,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),
c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");h=a.context||b.editable().getName();var e;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==h&&(h="div",c="\x3cpre\x3e"+c+"\x3c/pre\x3e",e=1);h=b.document.createElement(h);h.setHtml("a"+c);c=h.getHtml().substr(1);c=c.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");e&&(c=c.replace(/^<pre>|<\/pre>$/gi,""));c=c.replace(D,"$1$2");c=x(c);c=u(c);h=!1===a.fixForBody?!1:
d(a.enterMode,b.config.autoParagraph);c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,h);h&&(e=c,!e.children.length&&CKEDITOR.dtd[e.name][h]&&(h=new CKEDITOR.htmlParser.element(h),e.add(h)));a.dataValue=c},null,null,5);b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")},null,null,6);b.on("toHtml",function(a){a.data.dataValue.filterChildren(e.dataFilter,!0)},null,null,10);b.on("toHtml",function(a){a=a.data;var b=a.dataValue,
c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c);b=c.getHtml(!0);a.dataValue=A(b)},null,null,15);b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,""));a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,d(a.data.enterMode,b.config.autoParagraph))},null,null,5);b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(e.htmlFilter,!0)},null,null,10);b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,
!1,!0)},null,null,11);b.on("toDataFormat",function(a){var c=a.data.dataValue,d=e.writer;d.reset();c.writeChildrenHtml(d);c=d.getHtml(!0);c=u(c);c=B(c,b);a.data.dataValue=c},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var h=this.editor,e,p,m,g;b&&"object"==typeof b?(e=b.context,c=b.fixForBody,d=b.dontFilter,p=b.filter,m=b.enterMode,g=b.protectedWhitespaces):e=b;e||null===e||(e=h.editable().getName());return h.fire("toHtml",{dataValue:a,context:e,fixForBody:c,dontFilter:d,
filter:p||h.filter,enterMode:m||h.enterMode,protectedWhitespaces:g}).dataValue},toDataFormat:function(a,b){var c,d,h;b&&(c=b.context,d=b.filter,h=b.enterMode);c||null===c||(c=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:h||this.editor.enterMode}).dataValue}};var y=/(?:&nbsp;|\xa0)$/,F="{cke_protected}",t=CKEDITOR.dtd,z="caption colgroup col thead tfoot tbody".split(" "),h=CKEDITOR.tools.extend({},t.$blockLimit,
t.$block),p={elements:{input:k,textarea:k}},m={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},C={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c);b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},r={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,
""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c=["name","href","src"],d,h=0;h<c.length;h++)d="data-cke-saved-"+c[h],d in b&&delete b[c[h]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(z,a.name),d=CKEDITOR.tools.indexOf(z,b.name));-1<c&&-1<d&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1);return c>d?
1:-1})},param:function(a){a.children=[];a.isEmpty=!0;return a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable;delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck;delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value));a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&l(a,b=new CKEDITOR.htmlParser.text);
b.value=a.attributes["data-cke-title"]||""},input:n,textarea:n},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(r.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var G=/<(a|area|img|input|source)\b([^>]*)>/gi,H=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/^(href|src|name)$/i,R=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,
M=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,Q=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,v=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,D=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,I=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";
CKEDITOR.htmlParser.element=function(a,d){this.name=a;this.attributes=d||{};this.children=[];var b=a||"",c=b.match(/^cke:(.*)/);c&&(b=c[1]);b=!!(CKEDITOR.dtd.$nonBodyContent[b]||CKEDITOR.dtd.$block[b]||CKEDITOR.dtd.$listItem[b]||CKEDITOR.dtd.$tableContent[b]||CKEDITOR.dtd.$nonEditable[b]||"br"==b);this.isEmpty=!!CKEDITOR.dtd.$empty[a];this.isUnknown=!CKEDITOR.dtd[a];this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b}};
CKEDITOR.htmlParser.cssStyle=function(a){var d={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,e){"font-family"==c&&(e=e.replace(/["']/g,""));d[c.toLowerCase()]=e});return{rules:d,populate:function(a){var c=this.toString();c&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",c):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=c:a.style=c)},toString:function(){var a=[],c;
for(c in d)d[c]&&a.push(c,":",d[c],";");return a.join("")}}};
(function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var d=function(a,b){a=a[0];b=b[0];return a<b?-1:a>b?1:0},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var d=this,l,k;b=d.getFilterContext(b);if(b.off)return!0;
if(!d.parent)a.onRoot(b,d);for(;;){l=d.name;if(!(k=a.onElementName(b,l)))return this.remove(),!1;d.name=k;if(!(d=a.onElement(b,d)))return this.remove(),!1;if(d!==this)return this.replaceWith(d),!1;if(d.name==l)break;if(d.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(d),!1;if(!d.name)return this.replaceWithChildren(),!1}l=d.attributes;var n,w;for(n in l){for(k=l[n];;)if(w=a.onAttributeName(b,n))if(w!=n)delete l[n],n=w;else break;else{delete l[n];break}w&&(!1===(k=a.onAttribute(b,d,w,k))?delete l[w]:
l[w]=k)}d.isEmpty||this.filterChildren(a,!1,b);return!0},filterChildren:b.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var g=this.name,l=[],k=this.attributes,n,w;a.openTag(g,k);for(n in k)l.push([n,k[n]]);a.sortAttributes&&l.sort(d);n=0;for(w=l.length;n<w;n++)k=l[n],a.attribute(k[0],k[1]);a.openTagClose(g,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(g)},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);
this.remove()},forEach:b.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var d=0,g=this.children.length;d<g;++d)if(b(this.children[d]))return this.children[d];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(a);return a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,d=a.length;b<d;++b)a[b].parent=this},getOuterHtml:function(){var a=
new CKEDITOR.htmlParser.basicWriter;this.writeHtml(a);return a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),d=this.clone(),l=0;l<b.length;++l)b[l].parent=d;d.children=b;b[0]&&(b[0].previous=null);0<a&&(this.children[a-1].next=null);this.parent.add(d,this.getIndex()+1);return d},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=
CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?(new RegExp("(?:^|\\s)"+a+"(?\x3d\\s|$)")).test(b):!1},getFilterContext:function(a){var b=[];a||(a={off:!1,nonEditable:!1,nestedEditable:!1});a.off||"off"!=this.attributes["data-cke-processor"]||b.push("off",!0);a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&
"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0);if(b.length){a=CKEDITOR.tools.copy(a);for(var d=0;d<b.length;d+=2)a[b[d]]=b[d+1]}return a}},!0)})();
(function(){var a={},d=/{([^}]+)}/g,b=/([\\'])/g,c=/\n/g,e=/\r/g;CKEDITOR.template=function(g){if(a[g])this.output=a[g];else{var l=g.replace(b,"\\$1").replace(c,"\\n").replace(e,"\\r").replace(d,function(a,b){return"',data['"+b+"']\x3d\x3dundefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[g]=Function("data","buffer","return buffer?buffer.push('"+l+"'):['"+l+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);
CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))});a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,a)};CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};
(function(){var a={};CKEDITOR.addTemplate=function(d,b){var c=a[d];if(c)return c;c={name:d,source:b};CKEDITOR.fire("template",c);return a[d]=new CKEDITOR.template(c.source)};CKEDITOR.getTemplate=function(d){return a[d]}})();(function(){var a=[];CKEDITOR.addCss=function(d){a.push(d)};CKEDITOR.getCss=function(){return a.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;
CKEDITOR.TRISTATE_DISABLED=0;
(function(){CKEDITOR.inline=function(a,d){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var b=new CKEDITOR.editor(d,a,CKEDITOR.ELEMENT_MODE_INLINE),c=a.is("textarea")?a:null;c?(b.setData(c.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!b.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+c.getValue()+"\x3c/div\x3e",CKEDITOR.document),
a.insertAfter(c),c.hide(),c.$.form&&b._attachToForm()):b.setData(a.getHtml(),null,!0);b.on("loaded",function(){b.fire("uiReady");b.editable(a);b.container=a;b.ui.contentsElement=a;b.setData(b.getData(1));b.resetDirty();b.fire("contentDom");b.mode="wysiwyg";b.fire("mode");b.status="ready";b.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,b)},null,null,1E4);b.on("destroy",function(){c&&(b.container.clearCustomData(),b.container.remove(),c.show());b.element.clearCustomData();delete b.element});
return b};CKEDITOR.inlineAll=function(){var a,d,b;for(b in CKEDITOR.dtd.$editable)for(var c=CKEDITOR.document.getElementsByTag(b),e=0,g=c.count();e<g;e++)a=c.getItem(e),"true"==a.getAttribute("contenteditable")&&(d={element:a,config:{}},!1!==CKEDITOR.fire("inline",d)&&CKEDITOR.inline(a,d.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";
(function(){function a(a,e,g,l){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var k=new CKEDITOR.editor(e,a,l);l==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),k._.required=a.hasAttribute("required"),a.removeAttribute("required"));g&&k.setData(g,null,!0);k.on("loaded",function(){b(k);l==CKEDITOR.ELEMENT_MODE_REPLACE&&k.config.autoUpdateElement&&
a.$.form&&k._attachToForm();k.setMode(k.config.startupMode,function(){k.resetDirty();k.status="ready";k.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,k)})});k.on("destroy",d);return k}function d(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove());b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function b(a){var b=a.name,d=a.element,l=a.elementMode,k=
a.fire("uiSpace",{space:"top",html:""}).html,n=a.fire("uiSpace",{space:"bottom",html:""}).html,w=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),
b=CKEDITOR.dom.element.createFromHtml(w.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:k?'\x3cspan id\x3d"'+a.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+k+"\x3c/span\x3e":"",contentId:a.ui.spaceId("contents"),bottomHtml:n?'\x3cspan id\x3d"'+a.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+n+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));l==CKEDITOR.ELEMENT_MODE_REPLACE?
(d.hide(),b.insertAfter(d)):d.append(b);a.container=b;a.ui.contentsElement=a.ui.space("contents");k&&a.ui.space("top").unselectable();n&&a.ui.space("bottom").unselectable();d=a.config.width;l=a.config.height;d&&b.setStyle("width",CKEDITOR.tools.cssLength(d));l&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(l));b.disableContextMenu();CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()});a.fireOnce("uiReady")}CKEDITOR.replace=function(b,d){return a(b,d,null,CKEDITOR.ELEMENT_MODE_REPLACE)};
CKEDITOR.appendTo=function(b,d,g){return a(b,d,g,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var d=null,l=a[b];if(l.name||l.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(l.className))continue}else if("function"==typeof arguments[0]&&(d={},!1===arguments[0](l,d)))continue;this.replace(l,d)}}};CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes=
{}))[a]=b};CKEDITOR.editor.prototype.setMode=function(a,b){var d=this,l=this._.modes;if(a!=d.mode&&l&&l[a]){d.fire("beforeSetMode",a);if(d.mode){var k=d.checkDirty(),l=d._.previousModeData,n,w=0;d.fire("beforeModeUnload");d.editable(0);d._.previousMode=d.mode;d._.previousModeData=n=d.getData(1);"source"==d.mode&&l==n&&(d.fire("lockSnapshot",{forceUpdate:!0}),w=1);d.ui.space("contents").setHtml("");d.mode=""}else d._.previousModeData=d.getData(1);this._.modes[a](function(){d.mode=a;void 0!==k&&!k&&
d.resetDirty();w?d.fire("unlockSnapshot"):"wysiwyg"==a&&d.fire("saveSnapshot");setTimeout(function(){d.fire("mode");b&&b.call(d)},0)})}};CKEDITOR.editor.prototype.resize=function(a,b,d,l){var k=this.container,n=this.ui.space("contents"),w=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;l=l?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):k;l.setSize("width",a,!0);w&&(w.style.width="1%");var f=(l.$.offsetHeight||0)-(n.$.clientHeight||
0),k=Math.max(b-(d?0:f),0);b=d?b+f:b;n.setStyle("height",k+"px");w&&(w.style.width="100%");this.fire("resize",{outerHeight:b,contentsHeight:k,outerWidth:a||l.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";
(function(){function a(a){var b=a.editor,e=a.data.path,m=e.blockLimit,f=a.data.selection,r=f.getRanges()[0],g;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(f=d(f,e))f.appendBogus(),g=CKEDITOR.env.ie;l(b,e.block,m)&&r.collapsed&&!r.getCommonAncestor().isReadOnly()&&(e=r.clone(),e.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),m=new CKEDITOR.dom.walker(e),m.guard=function(a){return!c(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!m.checkForward()||e.checkStartOfBlock()&&e.checkEndOfBlock())&&
(b=r.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(c))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),g=1,a.cancel());g&&r.select()}function d(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,e=d&&d.getLast(c);if(!(!d||!d.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||d.is("pre")||d.getBogus()))return d}function b(a){var b=a.data.getTarget();b.is("input")&&
(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function c(a){return f(a)&&x(a)}function e(a,b){return function(c){var d=c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget;(d=d&&d.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(d):null)&&(b.equals(d)||b.contains(d))||a.call(this,c)}}function g(a){function b(a){return function(b,h){h&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(f)&&(d=b);if(!(h||!c(b)||a&&u(b)))return!1}}var d,e=a.getRanges()[0];a=a.root;
var f={table:1,ul:1,ol:1,dl:1};if(e.startPath().contains(f)){var r=e.clone();r.collapse(1);r.setStartAt(a,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(r);a.guard=b();a.checkBackward();if(d)return r=e.clone(),r.collapse(),r.setEndAt(d,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(r),a.guard=b(!0),d=!1,a.checkForward(),d}return null}function l(a,b,c){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable"))}
function k(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function n(a){var b=a.editor;b.getSelection().scrollIntoView();setTimeout(function(){b.fire("saveSnapshot")},0)}function w(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b);this.editor=a;
this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a))){a.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b;}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,
b){var c=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=e(b,this),c[0]=a,c[1]=b);return CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);this._.listeners.push(b);return b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a=
this._.attrChanges,b,c;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertText:function(a){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(a),
"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var d=this.editor;d.focus();d.fire("saveSnapshot");c||(c=d.getSelection().getRanges()[0]);q(this,b||"html",a,c);c.select();n(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,c){q(this,c||"html",a,b);this.editor.fire("afterInsertHtml",
{intoRange:b})},insertElement:function(a,b){var d=this.editor;d.focus();d.fire("saveSnapshot");var e=d.activeEnterMode,d=d.getSelection(),f=a.getName(),f=CKEDITOR.dtd.$block[f];b||(b=d.getRanges()[0]);this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return c(a)&&!u(a)}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?b.moveToElementEditStart(f):b.moveToElementEditEnd(a):f||e==CKEDITOR.ENTER_BR||(f=b.fixBlock(!0,
e==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(f))));d.selectRanges([b]);n(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;b.deleteContents(1);b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&y(b);var g,l;if(f)for(;(g=b.getCommonAncestor(0,1))&&(l=CKEDITOR.dtd[g.getName()])&&
(!l||!l[e]);)g.getName()in CKEDITOR.dtd.span?b.splitElement(g):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());b.insertNode(a);return!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a));this.setHtml(a);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();a||(b=this.editor.dataProcessor.toDataFormat(b));
return b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");this.status="detached";var a=this.editor;this._.detach();delete a.document;delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var b=c.getDocument().$,d=b.getSelection(),h;a:if(d.anchorNode&&d.anchorNode==c.$)h=!0;else{if(CKEDITOR.env.webkit&&(h=c.getDocument().getActive())&&h.equals(c)&&!d.anchorNode){h=
!0;break a}h=void 0}h&&(h=new CKEDITOR.dom.range(c),h.moveToElementEditStart(c),b=b.createRange(),b.setStart(h.startContainer.$,h.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}function b(){var a=c.getDocument().$,d=a.selection,h=c.getDocument().getActive();"None"==d.type&&h.equals(c)&&(d=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),d.moveToElementEditStart(c),d=d.startContainer,d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),a.moveToElementText(d.$),a.collapse(!0),a.select())}
var c=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),b());else if(this.hasFocus)this.focus(),a();else this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){if(a.collapsed)return new CKEDITOR.dom.documentFragment(a.document);a={doc:this.getDocument(),range:a.clone()};F.eol.detect(a,this);F.bogus.exclude(a);F.cell.shrink(a);a.fragment=a.range.cloneContents();F.tree.rebuild(a,this);F.eol.fix(a,this);return new CKEDITOR.dom.documentFragment(a.fragment.$)},
extractHtmlFromRange:function(a,b){var c=t,d={range:a,doc:a.document},e=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),e;a.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.table.detectPurge(d);d.bookmark=a.createBookmark();delete d.range;var f=this.editor.createRange();f.moveToPosition(d.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);d.targetBookmark=f.createBookmark();c.list.detectMerge(d,this);c.table.detectRanges(d,this);c.block.detectMerge(d,this);d.tableContentsRanges?(c.table.deleteRanges(d),
a.moveToBookmark(d.bookmark),d.range=a):(a.moveToBookmark(d.bookmark),d.range=a,a.extractContents(c.detectExtractMerge(d)));a.moveToBookmark(d.targetBookmark);a.optimize();c.fixUneditableRangePosition(a);c.list.merge(d,this);c.table.purge(d,this);c.block.merge(d,this);if(b){c=a.startPath();if(d=a.checkStartOfBlock()&&a.checkEndOfBlock()&&c.block&&!a.root.equals(c.block)){a:{var d=c.block.getElementsByTag("span"),f=0,g;if(d)for(;g=d.getItem(f++);)if(!x(g)){d=!0;break a}d=!1}d=!d}d&&(a.moveToPosition(c.block,
CKEDITOR.POSITION_BEFORE_START),c.block.remove())}else c.autoParagraph(this.editor,a),A(a.startContainer)&&a.startContainer.appendBogus();a.startContainer.mergeSiblings();return e},setup:function(){var a=this.editor;this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(B,function(a,b){return b}));a.setData(b,null,1)},this);this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this);this.attachListener(a,
"afterSetData",function(){this.setData(a.getData(1))},this);this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this);this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this);this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this);this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this);this.attachListener(a,"insertText",
function(a){this.insertText(a.data)},this);this.setReadOnly(a.readOnly);this.attachClass("cke_editable");a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+a.config.contentsLangDirection);a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly;a.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=
!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);a.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",a.tabIndex);if(!this.is("textarea")){a.document=this.getDocument();a.window=this.getWindow();var d=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var e=a.config.contentsLangDirection;this.getDirection(1)!=
e&&this.changeAttr("dir",e);var m=CKEDITOR.getCss();m&&(e=d.getHead(),e.getCustomData("stylesheet")||(m=d.appendStyleText(m),m=new CKEDITOR.dom.element(m.ownerNode||m.owningElement),e.setCustomData("stylesheet",m),m.data("cke-temp",1)));e=d.getCustomData("stylesheet_ref")||0;d.setCustomData("stylesheet_ref",e+1);this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling);this.attachListener(this,"click",function(a){a=a.data;var b=(new CKEDITOR.dom.elementPath(a.getTarget(),this)).contains("a");
b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var l={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c=b.data.domEvent.getKey(),d;if(c in l){b=a.getSelection();var h,e=b.getRanges()[0],m=e.startPath(),p,v,k,c=8==c;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(h=b.getSelectedElement())||(h=g(b))?(a.fire("saveSnapshot"),e.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START),h.remove(),e.select(),a.fire("saveSnapshot"),d=1):e.collapsed&&((p=m.block)&&(k=p[c?"getPrevious":
"getNext"](f))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("table")&&e[c?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),e[c?"checkEndOfBlock":"checkStartOfBlock"]()&&p.remove(),e["moveToElementEdit"+(c?"End":"Start")](k),e.select(),a.fire("saveSnapshot"),d=1):m.blockLimit&&m.blockLimit.is("td")&&(v=m.blockLimit.getAscendant("table"))&&e.checkBoundaryOfElement(v,c?CKEDITOR.START:CKEDITOR.END)&&(k=v[c?"getPrevious":"getNext"](f))?(a.fire("saveSnapshot"),e["moveToElementEdit"+(c?"End":"Start")](k),
e.checkStartOfBlock()&&e.checkEndOfBlock()?k.remove():e.select(),a.fire("saveSnapshot"),d=1):(v=m.contains(["td","th","caption"]))&&e.checkBoundaryOfElement(v,c?CKEDITOR.START:CKEDITOR.END)&&(d=1))}return!d});a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in l&&!this.getFirst(c)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())});this.attachListener(this,"dblclick",function(b){if(a.readOnly)return!1;
b={element:b.data.getTarget()};a.fire("doubleclick",b)});CKEDITOR.env.ie&&this.attachListener(this,"click",b);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&a.getSelection().selectElement(b)});
CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(B,""))){var c=a.createRange();c.moveToElementEditStart(b);c.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(a,
"key",function(b){if(a.readOnly)return!0;b=b.data.domEvent.getKey();if(b in l){var c=8==b,d=a.getSelection().getRanges()[0];b=d.startPath();if(d.collapsed)a:{var h=b.block;if(h&&d[c?"checkStartOfBlock":"checkEndOfBlock"]()&&d.moveToClosestEditablePosition(h,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var e=d.startContainer.getChild(d.startOffset-(c?1:0));if(e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("hr")){a.fire("saveSnapshot");e.remove();b=!0;break a}}d=d.startPath().block;if(!d||
d&&d.contains(h))b=void 0;else{a.fire("saveSnapshot");var m;(m=(c?d:h).getBogus())&&m.remove();m=a.getSelection();e=m.createBookmarks();(c?h:d).moveChildren(c?d:h,!1);b.lastElement.mergeSiblings();w(h,d,!c);m.selectBookmarks(e);b=!0}}else b=!1}else c=d,m=b.block,d=c.endPath().block,m&&d&&!m.equals(d)?(a.fire("saveSnapshot"),(h=m.getBogus())&&h.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),c.deleteContents(),d.getParent()&&(d.moveChildren(m,!1),b.lastElement.mergeSiblings(),w(m,d,!0)),c=a.getSelection().getRanges()[0],
c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),b=!0):b=!1;if(!b)return;a.getSelection().scrollIntoView();a.fire("saveSnapshot");return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=
a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;if(b&&a)return 0;arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null));return b};CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",
function(a){a=a.data;a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))});c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})});CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=
b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox");a.changeAttr("aria-label",c);c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+e+'" class\x3d"cke_voice_label"\x3e'+d+"\x3c/span\x3e");c.append(d);a.changeAttr("aria-describedby",e)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");
var f=CKEDITOR.dom.walker.whitespaces(!0),x=CKEDITOR.dom.walker.bookmark(!1,!0),A=CKEDITOR.dom.walker.empty(),u=CKEDITOR.dom.walker.bogus(),B=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,q=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function b(c,d){var e,m,f,p,g=[],l=d.range.startContainer;e=d.range.startPath();for(var l=q[l.getName()],r=0,k=c.getChildren(),C=k.count(),G=-1,n=-1,w=0,K=e.contains(q.$list);r<
C;++r)e=k.getItem(r),a(e)?(f=e.getName(),K&&f in CKEDITOR.dtd.$list?g=g.concat(b(e,d)):(p=!!l[f],"br"!=f||!e.data("cke-eol")||r&&r!=C-1||(w=(m=r?g[r-1].node:k.getItem(r+1))&&(!a(m)||!m.is("br")),m=m&&a(m)&&q.$block[m.getName()]),-1!=G||p||(G=r),p||(n=r),g.push({isElement:1,isLineBreak:w,isBlock:e.isBlockBoundary(),hasBlockSibling:m,node:e,name:f,allowed:p}),m=w=0)):g.push({isElement:0,node:e,allowed:1});-1<G&&(g[G].firstNotAllowed=1);-1<n&&(g[n].lastNotAllowed=1);return g}function d(b,c){var e=[],
h=b.getChildren(),m=h.count(),f,g=0,l=q[c],r=!b.is(q.$inline)||b.is("br");for(r&&e.push(" ");g<m;g++)f=h.getItem(g),a(f)&&!f.is(l)?e=e.concat(d(f,c)):e.push(f);r&&e.push(" ");return e}function e(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function f(b){return b&&a(b)&&(b.is(q.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function g(b,c,d,e){var h=b.clone(),m,f;h.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);(m=(new CKEDITOR.dom.walker(h)).next())&&a(m)&&n[m.getName()]&&
(f=m.getPrevious())&&a(f)&&!f.getParent().equals(b.startContainer)&&d.contains(f)&&e.contains(m)&&m.isIdentical(f)&&(m.moveChildren(f),m.remove(),g(b,c,d,e))}function G(b,c){function d(b,c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var e=c.endContainer.getChild(c.endOffset),h=c.endContainer.getChild(c.endOffset-1);e&&d(e,b[b.length-1]);h&&d(h,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var q=CKEDITOR.dtd,n={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,
h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},w={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},M=CKEDITOR.tools.extend({},q.$inline);delete M.br;return function(n,v,D,I){var E=n.editor,L=!1;"unfiltered_html"==v&&(v="html",L=!0);if(!I.checkReadOnly()){var J=(new CKEDITOR.dom.elementPath(I.startContainer,I.root)).blockLimit||I.root;n={type:v,dontFilter:L,editable:n,editor:E,range:I,blockLimit:J,mergeCandidates:[],zombies:[]};v=n.range;I=n.mergeCandidates;var K,u;"text"==n.type&&v.shrink(CKEDITOR.SHRINK_ELEMENT,
!0,!1)&&(K=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",v.document),v.insertNode(K),v.setStartAfter(K));L=new CKEDITOR.dom.elementPath(v.startContainer);n.endPath=J=new CKEDITOR.dom.elementPath(v.endContainer);if(!v.collapsed){var E=J.block||J.blockLimit,y=v.getCommonAncestor();E&&!E.equals(y)&&!E.contains(y)&&v.checkEndOfBlock()&&n.zombies.push(E);v.deleteContents()}for(;(u=e(v))&&a(u)&&u.isBlockBoundary()&&L.contains(u);)v.moveToPosition(u,CKEDITOR.POSITION_BEFORE_END);
g(v,n.blockLimit,L,J);K&&(v.setEndBefore(K),v.collapse(),K.remove());K=v.startPath();if(E=K.contains(f,!1,1))v.splitElement(E),n.inlineStylesRoot=E,n.inlineStylesPeak=K.lastElement;K=v.createBookmark();(E=K.startNode.getPrevious(c))&&a(E)&&f(E)&&I.push(E);(E=K.startNode.getNext(c))&&a(E)&&f(E)&&I.push(E);for(E=K.startNode;(E=E.getParent())&&f(E);)I.push(E);v.moveToBookmark(K);if(K=D){K=n.range;if("text"==n.type&&n.inlineStylesRoot){u=n.inlineStylesPeak;v=u.getDocument().createText("{cke-peak}");for(I=
n.inlineStylesRoot.getParent();!u.equals(I);)v=v.appendTo(u.clone()),u=u.getParent();D=v.getOuterHtml().split("{cke-peak}").join(D)}u=n.blockLimit.getName();if(/^\s+|\s+$/.test(D)&&"span"in CKEDITOR.dtd[u]){var A='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';D=A+D+A}D=n.editor.dataProcessor.toHtml(D,{context:null,fixForBody:!1,protectedWhitespaces:!!A,dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode});u=K.document.createElement("body");u.setHtml(D);
A&&(u.getFirst().remove(),u.getLast().remove());if((A=K.startPath().block)&&(1!=A.getChildCount()||!A.getBogus()))a:{var x;if(1==u.getChildCount()&&a(x=u.getFirst())&&x.is(w)&&!x.hasAttribute("contenteditable")){A=x.getElementsByTag("*");K=0;for(I=A.count();K<I;K++)if(v=A.getItem(K),!v.is(M))break a;x.moveChildren(x.getParent(1));x.remove()}}n.dataWrapper=u;K=D}if(K){x=n.range;K=x.document;var t;u=n.blockLimit;I=0;var B,A=[],N,T;D=E=0;var F,W;v=x.startContainer;var L=n.endPath.elements[0],X,J=L.getPosition(v),
y=!!L.getCommonAncestor(v)&&J!=CKEDITOR.POSITION_IDENTICAL&&!(J&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);v=b(n.dataWrapper,n);for(G(v,x);I<v.length;I++){J=v[I];if(t=J.isLineBreak){t=x;F=u;var S=void 0,aa=void 0;J.hasBlockSibling?t=1:(S=t.startContainer.getAscendant(q.$block,1))&&S.is({div:1,p:1})?(aa=S.getPosition(F),aa==CKEDITOR.POSITION_IDENTICAL||aa==CKEDITOR.POSITION_CONTAINS?t=0:(F=t.splitElement(S),t.moveToPosition(F,CKEDITOR.POSITION_AFTER_START),t=1)):t=0}if(t)D=0<I;else{t=
x.startPath();!J.isBlock&&l(n.editor,t.block,t.blockLimit)&&(T=k(n.editor))&&(T=K.createElement(T),T.appendBogus(),x.insertNode(T),CKEDITOR.env.needsBrFiller&&(B=T.getBogus())&&B.remove(),x.moveToPosition(T,CKEDITOR.POSITION_BEFORE_END));if((t=x.startPath().block)&&!t.equals(N)){if(B=t.getBogus())B.remove(),A.push(t);N=t}J.firstNotAllowed&&(E=1);if(E&&J.isElement){t=x.startContainer;for(F=null;t&&!q[t.getName()][J.name];){if(t.equals(u)){t=null;break}F=t;t=t.getParent()}if(t)F&&(W=x.splitElement(F),
n.zombies.push(W),n.zombies.push(F));else{F=u.getName();X=!I;t=I==v.length-1;F=d(J.node,F);for(var S=[],aa=F.length,ca=0,ea=void 0,Y=0,U=-1;ca<aa;ca++)ea=F[ca]," "==ea?(Y||X&&!ca||(S.push(new CKEDITOR.dom.text(" ")),U=S.length),Y=1):(S.push(ea),Y=0);t&&U==S.length&&S.pop();X=S}}if(X){for(;t=X.pop();)x.insertNode(t);X=0}else x.insertNode(J.node);J.lastNotAllowed&&I<v.length-1&&((W=y?L:W)&&x.setEndAt(W,CKEDITOR.POSITION_AFTER_START),E=0);x.collapse()}}1!=v.length?B=!1:(B=v[0],B=B.isElement&&"false"==
B.node.getAttribute("contenteditable"));B&&(D=!0,t=v[0].node,x.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),x.setEndAt(t,CKEDITOR.POSITION_AFTER_END));n.dontMoveCaret=D;n.bogusNeededBlocks=A}B=n.range;var P;W=n.bogusNeededBlocks;for(X=B.createBookmark();N=n.zombies.pop();)N.getParent()&&(T=B.clone(),T.moveToElementEditStart(N),T.removeEmptyBlocksAtEnd());if(W)for(;N=W.pop();)CKEDITOR.env.needsBrFiller?N.appendBogus():N.append(B.document.createText(" "));for(;N=n.mergeCandidates.pop();)N.mergeSiblings();
B.moveToBookmark(X);if(!n.dontMoveCaret){for(N=e(B);N&&a(N)&&!N.is(q.$empty);){if(N.isBlockBoundary())B.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END);else{if(f(N)&&N.getHtml().match(/(\s|&nbsp;)$/g)){P=null;break}P=B.clone();P.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END)}N=N.getLast(c)}P&&B.moveToRange(P)}}}}(),y=function(){function a(b){b=new CKEDITOR.dom.walker(b);b.guard=function(a,b){if(b)return!1;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$tableContent)};b.evaluator=function(a){return a.type==
CKEDITOR.NODE_ELEMENT};return b}function b(a,c,d){c=a.getDocument().createElement(c);a.append(c,d);return c}function c(a){var b=a.count(),d;for(b;0<b--;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&d.getChildCount()&&d.getFirst().remove())}return function(d){var e=d.startContainer,f=e.getAscendant("table",1),g=!1;c(f.getElementsByTag("td"));c(f.getElementsByTag("th"));f=d.clone();f.setStart(e,0);f=a(f).lastBackward();f||(f=d.clone(),f.setEndAt(e,
CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),g=!0);f||(f=e);f.is("table")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",g)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",g)),(e=f.getBogus())&&e.remove(),d.moveToPosition(f,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),F={eol:{detect:function(a,b){var c=a.range,d=c.clone(),e=c.clone(),f=new CKEDITOR.dom.elementPath(c.startContainer,b),g=new CKEDITOR.dom.elementPath(c.endContainer,
b);d.collapse(1);e.collapse();f.block&&d.checkBoundaryOfElement(f.block,CKEDITOR.END)&&(c.setStartAfter(f.block),a.prependEolBr=1);g.block&&e.checkBoundaryOfElement(g.block,CKEDITOR.START)&&(c.setEndBefore(g.block),a.appendEolBr=1)},fix:function(a,b){var c=b.getDocument(),d;a.appendEolBr&&(d=this.createEolBr(c),a.fragment.append(d));!a.prependEolBr||d&&!d.getPrevious()||a.fragment.append(this.createEolBr(c),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},
bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),c=b.startNode,b=b.endNode;!b||!u(b)||c&&c.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var c=a.range,d=c.getCommonAncestor(),e=new CKEDITOR.dom.elementPath(d,b),f=new CKEDITOR.dom.elementPath(c.startContainer,b),c=new CKEDITOR.dom.elementPath(c.endContainer,b),g;d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent());if(e.blockLimit.is({tr:1,table:1})){var l=e.contains("table").getParent();g=function(a){return!a.equals(l)}}else if(e.block&&
e.block.is(CKEDITOR.dtd.$listItem)&&(f=f.contains(CKEDITOR.dtd.$list),c=c.contains(CKEDITOR.dtd.$list),!f.equals(c))){var k=e.contains(CKEDITOR.dtd.$list).getParent();g=function(a){return!a.equals(k)}}g||(g=function(a){return!a.equals(e.block)&&!a.equals(e.blockLimit)});this.rebuildFragment(a,b,d,g)},rebuildFragment:function(a,b,c,d){for(var e;c&&!c.equals(b)&&d(c);)e=c.clone(0,1),a.fragment.appendTo(e),a.fragment=e,c=c.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,c=a.endContainer,
d=a.startOffset,e=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(c)&&b.is("tr")&&++d==e&&a.shrink(CKEDITOR.SHRINK_TEXT)}}},t=function(){function a(b,c){var d=b.getParent();if(d.is(CKEDITOR.dtd.$inline))b[c?"insertBefore":"insertAfter"](d)}function b(c,d,e){a(d);a(e,1);for(var h;h=e.getNext();)h.insertAfter(d),d=h;A(c)&&c.remove()}function c(a,b){var d=new CKEDITOR.dom.range(a);d.setStartAfter(b.startNode);d.setEndBefore(b.endNode);return d}return{list:{detectMerge:function(a,b){var d=c(b,a.bookmark),
e=d.startPath(),h=d.endPath(),f=e.contains(CKEDITOR.dtd.$list),g=h.contains(CKEDITOR.dtd.$list);a.mergeList=f&&g&&f.getParent().equals(g.getParent())&&!f.equals(g);a.mergeListItems=e.block&&h.block&&e.block.is(CKEDITOR.dtd.$listItem)&&h.block.is(CKEDITOR.dtd.$listItem);if(a.mergeList||a.mergeListItems)d=d.clone(),d.setStartBefore(a.bookmark.startNode),d.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=d.createBookmark()},merge:function(a,c){if(a.mergeListBookmark){var d=a.mergeListBookmark.startNode,
e=a.mergeListBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c);if(a.mergeList){var p=f.contains(CKEDITOR.dtd.$list),l=g.contains(CKEDITOR.dtd.$list);p.equals(l)||(l.moveChildren(p),l.remove())}a.mergeListItems&&(f=f.contains(CKEDITOR.dtd.$listItem),g=g.contains(CKEDITOR.dtd.$listItem),f.equals(g)||b(g,d,e));d.remove();e.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var c=new CKEDITOR.dom.range(b);c.setStartBefore(a.bookmark.startNode);
c.setEndAfter(a.bookmark.endNode);a.mergeBlockBookmark=c.createBookmark()}},merge:function(a,c){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var d=a.mergeBlockBookmark.startNode,e=a.mergeBlockBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c),f=f.block,g=g.block;f&&g&&!f.equals(g)&&b(g,d,e);d.remove();e.remove()}}},table:function(){function a(c){var e=[],h,f=new CKEDITOR.dom.walker(c),g=c.startPath().contains(d),m=c.endPath().contains(d),p={};f.guard=function(a,
f){if(a.type==CKEDITOR.NODE_ELEMENT){var l="visited_"+(f?"out":"in");if(a.getCustomData(l))return;CKEDITOR.dom.element.setMarker(p,a,l,1)}if(f&&g&&a.equals(g))h=c.clone(),h.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e.push(h);else if(!f&&m&&a.equals(m))h=c.clone(),h.setStartAt(m,CKEDITOR.POSITION_AFTER_START),e.push(h);else{if(l=!f)l=a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&(!g||b(a,g))&&(!m||b(a,m));l&&(h=c.clone(),h.selectNodeContents(a),e.push(h))}};f.lastForward();CKEDITOR.dom.element.clearAllMarkers(p);
return e}function b(a,c){var d=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,e=a.getPosition(c);return e===CKEDITOR.POSITION_IDENTICAL?!1:0===(e&d)}var d={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,c=b.clone();c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=new CKEDITOR.dom.walker(c),e=0;c.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&++e};c.checkForward();if(1<e){var c=b.startPath().contains("table"),h=b.endPath().contains("table");c&&h&&b.checkBoundaryOfElement(c,
CKEDITOR.START)&&b.checkBoundaryOfElement(h,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(c),b.setEndAfter(h),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(e,h){var f=c(h,e.bookmark),g=f.clone(),l,k,v=f.getCommonAncestor();v.is(CKEDITOR.dtd.$tableContent)&&!v.is(d)&&(v=v.getAscendant("table",!0));k=v;v=new CKEDITOR.dom.elementPath(f.startContainer,k);k=new CKEDITOR.dom.elementPath(f.endContainer,k);v=v.contains("table");k=k.contains("table");if(v||k)v&&k&&b(v,k)?(e.tableSurroundingRange=
g,g.setStartAt(v,CKEDITOR.POSITION_AFTER_END),g.setEndAt(k,CKEDITOR.POSITION_BEFORE_START),g=f.clone(),g.setEndAt(v,CKEDITOR.POSITION_AFTER_END),l=f.clone(),l.setStartAt(k,CKEDITOR.POSITION_BEFORE_START),l=a(g).concat(a(l))):v?k||(e.tableSurroundingRange=g,g.setStartAt(v,CKEDITOR.POSITION_AFTER_END),f.setEndAt(v,CKEDITOR.POSITION_AFTER_END)):(e.tableSurroundingRange=g,g.setEndAt(k,CKEDITOR.POSITION_BEFORE_START),f.setStartAt(k,CKEDITOR.POSITION_AFTER_START)),e.tableContentsRanges=l?l:a(f)},deleteRanges:function(a){for(var b;b=
a.tableContentsRanges.pop();)b.extractContents(),A(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,c=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode);c.moveToBookmark(a.purgeTableBookmark);c.deleteContents();a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&
a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var c=b.startPath(),d;l(a,c.block,c.blockLimit)&&(d=k(a))&&(d=b.document.createElement(d),d.appendBogus(),b.insertNode(d),b.moveToPosition(d,CKEDITOR.POSITION_AFTER_START))}}}()})();
(function(){function a(){var a=this._.fakeSelection,b;a&&(b=this.getSelection(1),b&&b.isHidden()||(a.reset(),a=0));if(!a&&(a=b||this.getSelection(1),!a||a.getType()==CKEDITOR.SELECTION_NONE))return;this.fire("selectionCheck",a);b=this.elementPath();b.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b}))}function d(){A=!0;x||(b.call(this),x=CKEDITOR.tools.setTimeout(b,
200,this))}function b(){x=null;A&&(CKEDITOR.tools.setTimeout(a,0,this),A=!1)}function c(a){return u(a)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(CKEDITOR.dtd.$empty)?!0:!1}function e(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var d=a.startContainer,e=a.getPreviousNode(c,null,d),f=a.getNextNode(c,null,d);return b(e)||b(f,1)||!(e||f||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()&&
d.getBogus())?!0:!1}function g(a){l(a,!1);var b=a.getDocument().createText(t);a.setCustomData("cke-fillingChar",b);return b}function l(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(!1!==b){var d=a.getDocument().getSelection().getNative(),e=d&&"None"!=d.type&&d.getRangeAt(0),f=t.length;if(c.getLength()>f&&e&&e.intersectsNode(c.$)){var g=[{node:d.anchorNode,offset:d.anchorOffset},{node:d.focusNode,offset:d.focusOffset}];d.anchorNode==c.$&&d.anchorOffset>f&&(g[0].offset-=f);d.focusNode==
c.$&&d.focusOffset>f&&(g[1].offset-=f)}}c.setText(k(c.getText(),1));g&&(c=a.getDocument().$,d=c.getSelection(),c=c.createRange(),c.setStart(g[0].node,g[0].offset),c.collapse(!0),d.removeAllRanges(),d.addRange(c),d.extend(g[1].node,g[1].offset))}}function k(a,b){return b?a.replace(z,function(a,b){return b?" ":""}):a.replace(t,"")}function n(a){var b=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+
'"\x3e\x26nbsp;\x3c/div\x3e',a.document);a.fire("lockSnapshot");a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),e=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START);d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);c.selectRanges([d]);e.removeListener();a.fire("unlockSnapshot");a._.hiddenSelectionContainer=b}function w(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),
f=e[0];1==e.length&&f.collapsed&&(d=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}function f(a){for(var b=0;b<a.length;b++){var c=a[b];c.getCommonAncestor().isReadOnly()&&a.splice(b,1);if(!c.collapsed){if(c.startContainer.isReadOnly())for(var d=c.startContainer,e;d&&!((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)e&&"false"==
d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer;e=c.endContainer;var f=c.startOffset,g=c.endOffset,l=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(f>=d.getLength()?l.setStartAfter(d):l.setStartBefore(d));e&&e.type==CKEDITOR.NODE_TEXT&&(g?l.setEndAfter(e):l.setEndBefore(e));d=new CKEDITOR.dom.walker(l);d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();c.setEndBefore(d);c.collapsed&&a.splice(b--,1);d.getPosition(l.endContainer)&
CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e));return!0}return!1};d.next()}}return a}var x,A,u=CKEDITOR.dom.walker.invisible(1),B=function(){function a(b){return function(a){var c=a.editor.createRange();c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]);return!1}}function b(a){return function(b){var c=b.editor,d=c.createRange(),e;(e=d.moveToClosestEditablePosition(b.selected,a))||(e=d.moveToClosestEditablePosition(b.selected,!a));
e&&c.getSelection().selectRanges([d]);c.fire("saveSnapshot");b.selected.remove();e||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d]));c.fire("saveSnapshot");return!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(b){function c(){var a=e.getSelection();a&&a.removeAllRanges()}var e=b.editor;e.on("contentDom",function(){function b(){D=new CKEDITOR.dom.selection(e.getSelection());D.lock()}function c(){h.removeListener("mouseup",
c);k.removeListener("mouseup",c);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==f.$&&b.select()}var f=e.document,h=CKEDITOR.document,g=e.editable(),p=f.getBody(),k=f.getDocumentElement(),n=g.isInline(),v,D;CKEDITOR.env.gecko&&g.attachListener(g,"focus",function(a){a.removeListener();0!==v&&(a=e.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==g.$&&(a=e.createRange(),a.moveToElementEditStart(g),a.select())},null,null,-2);g.attachListener(g,
CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){v&&CKEDITOR.env.webkit&&(v=e._.previousActive&&e._.previousActive.equals(f.getActive()));e.unlockSelection(v);v=0},null,null,-1);g.attachListener(g,"mousedown",function(){v=0});if(CKEDITOR.env.ie||n)q?g.attachListener(g,"beforedeactivate",b,null,null,-1):g.attachListener(e,"selectionCheck",b,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){e.lockSelection(D);v=1},null,null,-1),g.attachListener(g,"mousedown",function(){v=
0});if(CKEDITOR.env.ie&&!n){var I;g.attachListener(g,"mousedown",function(a){2==a.data.$.button&&((a=e.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(I=e.window.getScrollPosition()))});g.attachListener(g,"mouseup",function(a){2==a.data.$.button&&I&&(e.document.$.documentElement.scrollLeft=I.x,e.document.$.documentElement.scrollTop=I.y);I=null});if("BackCompat"!=f.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)k.on("mousedown",function(a){function b(a){a=a.data.$;
if(d){var c=p.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY)}catch(e){}d.setEndPoint(0>f.compareEndPoints("StartToStart",c)?"EndToEnd":"StartToStart",c);d.select()}}function c(){k.removeListener("mousemove",b);h.removeListener("mouseup",c);k.removeListener("mouseup",c);d.select()}a=a.data;if(a.getTarget().is("html")&&a.$.y<k.$.clientHeight&&a.$.x<k.$.clientWidth){var d=p.$.createTextRange();try{d.moveToPoint(a.$.clientX,a.$.clientY)}catch(e){}var f=d.duplicate();k.on("mousemove",b);h.on("mouseup",
c);k.on("mouseup",c)}});if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)k.on("mousedown",function(a){a.data.getTarget().is("html")&&(h.on("mouseup",c),k.on("mouseup",c))})}}g.attachListener(g,"selectionchange",a,e);g.attachListener(g,"keyup",d,e);g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e.forceNextSelectionCheck();e.selectionChange(1)});if(n&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var E;g.attachListener(g,"mousedown",function(){E=1});g.attachListener(f.getDocumentElement(),
"mouseup",function(){E&&d.call(e);E=0})}else g.attachListener(CKEDITOR.env.ie?g:f.getDocumentElement(),"mouseup",d,e);CKEDITOR.env.webkit&&g.attachListener(f,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:l(g)}},null,null,-1);g.attachListener(g,"keydown",w(e),null,null,-1)});e.on("setData",function(){e.unlockSelection();CKEDITOR.env.webkit&&c()});e.on("contentDomUnload",function(){e.unlockSelection()});if(CKEDITOR.env.ie9Compat)e.on("beforeDestroy",
c,null,null,9);e.on("dataReady",function(){delete e._.fakeSelection;delete e._.hiddenSelectionContainer;e.selectionChange(1)});e.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=e.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=e.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100);e.on("key",function(a){if("wysiwyg"==e.mode){var b=e.getSelection();if(b.isFake){var c=
B[a.data.keyCode];if(c)return c({editor:e,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on("instanceReady",function(a){var b=a.editor;b.on("selectionChange",function(){var a=b.editable(),c=a.getCustomData("cke-fillingChar");c&&(c.getCustomData("ready")?l(a):c.setCustomData("ready",1))},null,null,-1);b.on("beforeSetMode",function(){l(b.editable())},null,null,-1);b.on("getSnapshot",function(a){a.data&&(a.data=k(a.data))},b,null,20);b.on("toDataFormat",
function(a){a.data.dataValue=k(a.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:d).call(this)};CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(a){a=a||this.getSelection(1);return a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&
a.lock(),this._.savedSelection=a,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():
new CKEDITOR.dom.selection(this.root);a.selectRanges([this]);return a};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var q="function"!=typeof window.getSelection,y=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var c=a instanceof CKEDITOR.dom.element;this.rev=b?b.rev:y++;this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument();this.root=c?a:this.document.getBody();this.isLocked=0;this._={cache:{}};if(b)return CKEDITOR.tools.extend(this._.cache,
b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var d,e;if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}if(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=
null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var F={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1},t=CKEDITOR.tools.repeat("​",7),z=new RegExp(t+"( )?","g");CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:k,_createFillingCharSequenceNode:g,FILLING_CHAR_SEQUENCE:t});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==
this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=q?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:q?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT);"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT);c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=
CKEDITOR.SELECTION_TEXT,c=this.getNative();if(!c||!c.rangeCount)b=CKEDITOR.SELECTION_NONE;else if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&1==c.endOffset-c.startOffset&&F[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}return a.type=b},getRanges:function(){var a=q?function(){function a(b){return(new CKEDITOR.dom.node(b)).getIndex()}var b=function(b,c){b=b.duplicate();b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,
offset:0};for(var e=d.children,f,g,h=b.duplicate(),l=0,v=e.length-1,k=-1,m,E;l<=v;)if(k=Math.floor((l+v)/2),f=e[k],h.moveToElementText(f),m=h.compareEndPoints("StartToStart",b),0<m)v=k-1;else if(0>m)l=k+1;else return{container:d,offset:a(f)};if(-1==k||k==e.length-1&&0>m){h.moveToElementText(d);h.setEndPoint("StartToStart",b);h=h.text.replace(/(\r\n|\r)/g,"\n").length;e=d.childNodes;if(!h)return f=e[e.length-1],f.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};
for(d=e.length;0<h&&0<d;)g=e[--d],g.nodeType==CKEDITOR.NODE_TEXT&&(E=g,h-=g.nodeValue.length);return{container:E,offset:-h}}h.collapse(0<m?!0:!1);h.setEndPoint(0<m?"StartToStart":"EndToStart",b);h=h.text.replace(/(\r\n|\r)/g,"\n").length;if(!h)return{container:d,offset:a(f)+(0<m?0:1)};for(;0<h;)try{g=f[0<m?"previousSibling":"nextSibling"],g.nodeType==CKEDITOR.NODE_TEXT&&(h-=g.nodeValue.length,E=g),f=g}catch(n){return{container:d,offset:a(f)}}return{container:E,offset:0<m?-h:E.nodeValue.length+h}};
return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=
c.item(e),h=f.parentNode,g=0,a=new CKEDITOR.dom.range(this.root);g<h.childNodes.length&&h.childNodes[g]!=f;g++);a.setStart(new CKEDITOR.dom.node(h),g);a.setEnd(new CKEDITOR.dom.node(h),g+1);d.push(a)}return d}return[]}}():function(){var a=[],b,c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root);b.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset);b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset);a.push(b)}return a};
return function(b){var c=this._.cache,d=c.ranges;d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this)));return b?f(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=
c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);b=c.startContainer;if(b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;
var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a=b.getRanges()[0].clone(),c,d,e=2;e&&!((c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&F[c.getName()]&&(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=q?"Control"==b.type?"":b.createRange().text:
b.toString();return a.selectedText=b},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0;this.reset();a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={};this.isFake=
0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot");b.remove();a.fire("unlockSnapshot");!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=y++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a);b.setEndAfter(a);this.selectRanges([b])},selectRanges:function(a){var b=
this.root.editor,b=b&&b._.hiddenSelectionContainer;this.reset();if(b)for(var b=this.root,c,d=0;d<a.length;++d)c=a[d],c.endContainer.equals(b)&&(c.endOffset=Math.min(c.endOffset,b.getChildCount()));if(a.length)if(this.isLocked){var f=CKEDITOR.document.getActive();this.unlock();this.selectRanges(a);this.lock();f&&!f.equals(this.root)&&f.focus()}else{var k;a:{var n,w;if(1==a.length&&!(w=a[0]).collapsed&&(k=w.getEnclosedNode())&&k.type==CKEDITOR.NODE_ELEMENT&&(w=w.clone(),w.shrink(CKEDITOR.SHRINK_ELEMENT,
!0),(n=w.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&(k=n),"false"==k.getAttribute("contenteditable")))break a;k=void 0}if(k)this.fake(k);else{if(q){w=CKEDITOR.dom.walker.whitespaces(!0);n=/\ufeff|\u00a0/;b={table:1,tbody:1,tr:1};1<a.length&&(k=a[a.length-1],a[0].setEnd(k.endContainer,k.endOffset));k=a[0];a=k.collapsed;var u,t,x;if((c=k.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in F&&(!c.is("a")||!c.getText()))try{x=c.$.createControlRange();x.addElement(c.$);x.select();
return}catch(v){}if(k.startContainer.type==CKEDITOR.NODE_ELEMENT&&k.startContainer.getName()in b||k.endContainer.type==CKEDITOR.NODE_ELEMENT&&k.endContainer.getName()in b)k.shrink(CKEDITOR.NODE_ELEMENT,!0),a=k.collapsed;x=k.createBookmark();b=x.startNode;a||(f=x.endNode);x=k.document.$.body.createTextRange();x.moveToElementText(b.$);x.moveStart("character",1);f?(n=k.document.$.body.createTextRange(),n.moveToElementText(f.$),x.setEndPoint("EndToEnd",n),x.moveEnd("character",-1)):(u=b.getNext(w),t=
b.hasAscendant("pre"),u=!(u&&u.getText&&u.getText().match(n))&&(t||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br")),t=k.document.createElement("span"),t.setHtml("\x26#65279;"),t.insertBefore(b),u&&k.document.createText("﻿").insertBefore(b));k.setStartBefore(b);b.remove();a?(u?(x.moveStart("character",-1),x.select(),k.document.$.selection.clear()):x.select(),k.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove()):(k.setEndBefore(f),f.remove(),x.select())}else{f=this.getNative();
if(!f)return;this.removeAllRanges();for(x=0;x<a.length;x++){if(x<a.length-1&&(u=a[x],t=a[x+1],n=u.clone(),n.setStart(u.endContainer,u.endOffset),n.setEnd(t.startContainer,t.startOffset),!n.collapsed&&(n.shrink(CKEDITOR.NODE_ELEMENT,!0),k=n.getCommonAncestor(),n=n.getEnclosedNode(),k.isReadOnly()||n&&n.isReadOnly()))){t.setStart(u.startContainer,u.startOffset);a.splice(x--,1);continue}k=a[x];t=this.document.$.createRange();k.collapsed&&CKEDITOR.env.webkit&&e(k)&&(n=g(this.root),k.insertNode(n),(u=
n.getNext())&&!n.getPrevious()&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()?(l(this.root),k.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START)):k.moveToPosition(n,CKEDITOR.POSITION_AFTER_END));t.setStart(k.startContainer.$,k.startOffset);try{t.setEnd(k.endContainer.$,k.endOffset)}catch(D){if(0<=D.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))k.collapse(1),t.setEnd(k.endContainer.$,k.endOffset);else throw D;}f.addRange(t)}}this.reset();this.root.fire("selectionchange")}}},fake:function(a){var b=
this.root.editor;this.reset();n(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a);d.setEndAfter(a);c.ranges=new CKEDITOR.dom.rangeList(d);c.selectedElement=c.startElement=a;c.type=CKEDITOR.SELECTION_ELEMENT;c.selectedText=c.nativeSel=null;this.isFake=1;this.rev=y++;b._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent());return!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){a=
this.getRanges().createBookmarks(a);this.isFake&&(a.isFake=1);return a},createBookmarks2:function(a){a=this.getRanges().createBookmarks2(a);this.isFake&&(a.isFake=1);return a},selectBookmarks:function(a){for(var b=[],c,d=0;d<a.length;d++){var e=new CKEDITOR.dom.range(this.root);e.moveToBookmark(a[d]);b.push(e)}a.isFake&&(c=b[0].getEnclosedNode(),c&&c.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),a.isFake=0));a.isFake?this.fake(c):this.selectRanges(b);return this},getCommonAncestor:function(){var a=
this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[q?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;
(function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function d(a,b,c,d){return(a.getPosition(b)|d)==d&&(!c.childRule||c.childRule(a))}function b(c){var f=c.document;if(c.collapsed)f=F(this,f),c.insertNode(f),c.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END);else{var g=this.element,h=this._.definition,l,k=h.ignoreReadonly,m=k||h.includeReadonly;null==
m&&(m=c.root.getCustomData("cke_includeReadonly"));var n=CKEDITOR.dtd[g];n||(l=!0,n=CKEDITOR.dtd.span);c.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.trim();var p=c.createBookmark(),q=p.startNode,w=p.endNode,r=q,u;if(!k){var x=c.getCommonAncestor(),k=a(q,x),x=a(w,x);k&&(r=k.getNextSourceNode(!0));x&&(w=x)}for(r.getPosition(w)==CKEDITOR.POSITION_FOLLOWING&&(r=0);r;){k=!1;if(r.equals(w))r=null,k=!0;else{var t=r.type==CKEDITOR.NODE_ELEMENT?r.getName():null,x=t&&"false"==r.getAttribute("contentEditable"),y=t&&
r.getAttribute("data-nostyle");if(t&&r.data("cke-bookmark")){r=r.getNextSourceNode(!0);continue}if(x&&m&&CKEDITOR.dtd.$block[t])for(var A=r,z=e(A),C=void 0,G=z.length,H=0,A=G&&new CKEDITOR.dom.range(A.getDocument());H<G;++H){var C=z[H],R=CKEDITOR.filter.instances[C.data("cke-filter")];if(R?R.check(this):1)A.selectNodeContents(C),b.call(this,A)}z=t?!n[t]||y?0:x&&!m?0:d(r,w,h,M):1;if(z)if(C=r.getParent(),z=h,G=g,H=l,!C||!(C.getDtd()||CKEDITOR.dtd.span)[G]&&!H||z.parentRule&&!z.parentRule(C))k=!0;else{if(u||
t&&CKEDITOR.dtd.$removeEmpty[t]&&(r.getPosition(w)|M)!=M||(u=c.clone(),u.setStartBefore(r)),t=r.type,t==CKEDITOR.NODE_TEXT||x||t==CKEDITOR.NODE_ELEMENT&&!r.getChildCount()){for(var t=r,Y;(k=!t.getNext(K))&&(Y=t.getParent(),n[Y.getName()])&&d(Y,q,h,Q);)t=Y;u.setEndAfter(t)}}else k=!0;r=r.getNextSourceNode(y||x)}if(k&&u&&!u.collapsed){for(var k=F(this,f),x=k.hasAttributes(),y=u.getCommonAncestor(),t={},z={},C={},G={},U,P,da;k&&y;){if(y.getName()==g){for(U in h.attributes)!G[U]&&(da=y.getAttribute(P))&&
(k.getAttribute(U)==da?z[U]=1:G[U]=1);for(P in h.styles)!C[P]&&(da=y.getStyle(P))&&(k.getStyle(P)==da?t[P]=1:C[P]=1)}y=y.getParent()}for(U in z)k.removeAttribute(U);for(P in t)k.removeStyle(P);x&&!k.hasAttributes()&&(k=null);k?(u.extractContents().appendTo(k),u.insertNode(k),B.call(this,k),k.mergeSiblings(),CKEDITOR.env.ie||k.$.normalize()):(k=new CKEDITOR.dom.element("span"),u.extractContents().appendTo(k),u.insertNode(k),B.call(this,k),k.remove(!0));u=null}}c.moveToBookmark(p);c.shrink(CKEDITOR.SHRINK_TEXT);
c.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(m.getParent()),e=null,f=null,g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;n.checkElementRemovable(h,!0)&&(e=h)}for(g=0;g<c.elements.length;g++){h=c.elements[g];if(h==c.block||h==c.blockLimit)break;n.checkElementRemovable(h,!0)&&(f=h)}f&&m.breakParent(f);e&&d.breakParent(e)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=
a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f,g=0,k;g<e.elements.length&&(k=e.elements[g])&&k!=e.block&&k!=e.blockLimit;g++)if(this.checkElementRemovable(k)){var l;a.collapsed&&(a.checkBoundaryOfElement(k,CKEDITOR.END)||(l=a.checkBoundaryOfElement(k,CKEDITOR.START)))?(f=k,f.match=l?"start":"end"):(k.mergeSiblings(),k.is(this.element)?u.call(this,k):q(k,h(this)[k.getName()]))}if(f){k=d;for(g=0;;g++){l=e.elements[g];if(l.equals(f))break;
else if(l.match)continue;else l=l.clone();l.append(k);k=l}k["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var m=c.endNode,n=this;b();for(e=d;!e.equals(m);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?u.call(this,e):q(e,h(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)&&(b(),f=d.getNext())),e=f}a.moveToBookmark(c);a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function e(a){var b=[];a.forEach(function(a){if("true"==
a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function g(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1))&&!a.isReadOnly()&&t(a,this)}function l(a){var b=a.getCommonAncestor(!0,!0);if(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&
a.removeStyle(e)}}function k(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0;this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e=a.document,f;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(f=F(this,e,d),w(d,f));a.moveToBookmark(b)}function n(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&
(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),w(d,e)):u.call(this,d));a.moveToBookmark(b)}function w(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),g=!d&&e;if(d&&!e){e=b;(g=a.getBogus())&&g.remove();g=a.getHtml();g=x(g,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");g=g.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");g=g.replace(/([ \t\n\r]+|&nbsp;)/g,
" ");g=g.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var h=a.getDocument().createElement("div");h.append(e);e.$.outerHTML="\x3cpre\x3e"+g+"\x3c/pre\x3e";e.copyAttributes(h.getFirst());e=h.getFirst().remove()}else e.setHtml(g);b=e}else g?b=A(c?[a.getHtml()]:f(a),b):a.moveChildren(b);b.replace(a);if(d){var c=b,k;(k=c.getPrevious(R))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("pre")&&(d=x(k.getHtml(),/\n$/,"")+"\n\n"+x(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="\x3cpre\x3e"+d+"\x3c/pre\x3e":
c.setHtml(d),k.remove())}else c&&y(b)}function f(a){var b=[];x(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"\x3c/pre\x3e"+c+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)});return b}function x(a,b,c){var d="",e="";a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){b&&(d=b);c&&(e=c);return""});return d+a.replace(b,c)+e}function A(a,b){var c;
1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=x(e,/^[ \t]*\n/,""),e=x(e,/\n$/,""),e=x(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"\x26nbsp;":b?" "+CKEDITOR.tools.repeat("\x26nbsp;",a.length-1):CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"\x3cbr\x3e"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e);
c.append(f)}else b.setHtml(e)}return c||b}function u(a,b){var c=this._.definition,d=c.attributes,c=c.styles,e=h(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c),g;for(g in d)if("class"!=g&&!this._.definition.fullMatch||a.getAttribute(g)==p(g,d[g]))b&&"data-"==g.slice(0,5)||(f=a.hasAttribute(g),a.removeAttribute(g));for(var k in c)this._.definition.fullMatch&&a.getStyle(k)!=p(k,c[k],!0)||(f=f||!!a.getStyle(k),a.removeStyle(k));q(a,e,C[a.getName()]);f&&(this._.definition.alwaysRemoveElement?
y(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?y(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function B(a){for(var b=h(this),c=a.getElementsByTag(this.element),d,e=c.count();0<=--e;)d=c.getItem(e),d.isReadOnly()||u.call(this,d,!0);for(var f in b)if(f!=this.element)for(c=a.getElementsByTag(f),e=c.count()-1;0<=e;e--)d=c.getItem(e),d.isReadOnly()||q(d,b[f])}function q(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e=b[d][0],
f;if(f=a.getAttribute(e)){var g=b[d][1];(null===g||g.test&&g.test(f)||"string"==typeof g&&f==g)&&a.removeAttribute(e)}}c||y(a)}function y(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(R),d=a.getNext(R);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br",1);!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br");a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),
d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function F(a,b,c){var d;d=a.element;"*"==d&&(d="span");d=new CKEDITOR.dom.element(d,b);c&&c.copyAttributes(d);d=t(d,a);b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1);return d}function t(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);c&&a.setAttribute("style",c);return a}function z(a,
b){for(var c in a)a[c]=a[c].replace(H,function(a,c){return b[c]})}function h(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e=c[d],f,g;"string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes);e=b[f]||(b[f]={});if(g){var e=e.attributes=e.attributes||[],h;for(h in g)e.push([h.toLowerCase(),g[h]])}}}return b}function p(a,b,c){var d=new CKEDITOR.dom.element("span");
d[c?"setStyle":"setAttribute"](a,b);return d[c?"getStyle":"getAttribute"](a)}function m(a,b,c){var d=a.document,e=a.getRanges();b=b?this.removeFromRange:this.applyToRange;for(var f,g=e.createIterator();f=g.getNextRange();)b.call(this,f,c);a.selectRanges(e);d.removeCustomData("doc_processing_style")}var C={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,
details:1,datagrid:1,datalist:1},r={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},G=/\s*(?:;\s*|$)/,H=/#\((.+?)\)/g,K=CKEDITOR.dom.walker.bookmark(0,1),R=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style);
b&&(a=CKEDITOR.tools.clone(a),z(a.attributes,b),z(a.styles,b));c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";this.type=a.type||(C[c]?CKEDITOR.STYLE_BLOCK:r[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:a}};CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return m.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=
this._.enterMode;b||(this._.enterMode=a.activeEnterMode);m.call(this,a.getSelection(),0,a);this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return m.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);m.call(this,a.getSelection(),1,a);this._.enterMode=b}},applyToRange:function(a){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?k:this.type==CKEDITOR.STYLE_OBJECT?
g:null;return this.applyToRange(a)},removeFromRange:function(a){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?n:this.type==CKEDITOR.STYLE_OBJECT?l:null;return this.removeFromRange(a)},applyToObject:function(a){t(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c=a.elements,d=0,e;d<c.length;d++)if(e=c[d],
this.type!=CKEDITOR.STYLE_INLINE||e!=a.block&&e!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=e.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(e,!0,b))return!0}}return!1},checkApplicable:function(a,b,c){b&&b instanceof CKEDITOR.filter&&(c=b);if(c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},
checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var g in f)e++,d[g]=f[g];if(g=CKEDITOR.style.getStyleText(c))d.style||e++,d.style=g;d._length=e;c=c._AC=d}if(c._length){for(var h in c)if("_length"!=h){e=a.getAttribute(h)||"";if("style"==h)a:{d=c[h];"string"==typeof d&&
(d=CKEDITOR.tools.parseCssText(d));"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0));g=void 0;for(g in d)if(!(g in e)||e[g]!=d[g]&&"inherit"!=d[g]&&"inherit"!=e[g]){d=!1;break a}d=!0}else d=c[h]==e;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}else return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=h(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];if(null===
e)return!0;if("string"==typeof e){if(d==e)return!0}else if(e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["\x3c",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'\x3d"',e[f],'"');(e=CKEDITOR.style.getStyleText(b))&&c.push(' style\x3d"',e,'"');c.push("\x3e",a||b.name,"\x3c/",d,"\x3e");return c.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;
var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(G,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(G,";");"inherit"==f?d+=g:c+=g}c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0));return a._ST=c+d};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a};this.setup&&this.setup(a)};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},
a,!0);return this.customHandlers[a.type]=b};var M=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,Q=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(a,d){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,d,!0)};
CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,d,b){CKEDITOR.stylesSet.addExternal(a,d,"");CKEDITOR.stylesSet.load(a,b)};
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,d){var b=this._.styleStateChangeCallbacks;b||(b=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var d=0;d<b.length;d++){var g=b[d],l=g.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;g.fn.call(this,l)}}));b.push({style:a,fn:d})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);
else{var d=this,b=d.config.stylesCombo_stylesSet||d.config.stylesSet;if(!1===b)a(null);else if(b instanceof Array)d._.stylesDefinitions=b,a(b);else{b||(b="default");var b=b.split(":"),c=b[0];CKEDITOR.stylesSet.addExternal(c,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(c,function(b){d._.stylesDefinitions=b[c];a(d._.stylesDefinitions)})}}}});
CKEDITOR.dom.comment=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";
(function(){var a={},d={},b;for(b in CKEDITOR.dtd.$blockLimit)b in CKEDITOR.dtd.$list||(a[b]=1);for(b in CKEDITOR.dtd.$block)b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(d[b]=1);CKEDITOR.dom.elementPath=function(b,e){var g=null,l=null,k=[],n=b,w;e=e||b.getDocument().getBody();do if(n.type==CKEDITOR.NODE_ELEMENT){k.push(n);if(!this.lastElement&&(this.lastElement=n,n.is(CKEDITOR.dtd.$object)||"false"==n.getAttribute("contenteditable")))continue;if(n.equals(e))break;if(!l&&(w=n.getName(),
"true"==n.getAttribute("contenteditable")?l=n:!g&&d[w]&&(g=n),a[w])){if(w=!g&&"div"==w){a:{w=n.getChildren();for(var f=0,x=w.count();f<x;f++){var A=w.getItem(f);if(A.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[A.getName()]){w=!0;break a}}w=!1}w=!w}w?g=n:l=n}}while(n=n.getParent());l||(l=e);this.block=g;this.blockLimit=l;this.root=e;this.elements=k}})();
CKEDITOR.dom.elementPath.prototype={compare:function(a){var d=this.elements;a=a&&a.elements;if(!a||d.length!=a.length)return!1;for(var b=0;b<d.length;b++)if(!d[b].equals(a[b]))return!1;return!0},contains:function(a,d,b){var c;"string"==typeof a&&(c=function(b){return b.getName()==a});a instanceof CKEDITOR.dom.element?c=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?c=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?c=a:"object"==typeof a&&(c=function(b){return b.getName()in
a});var e=this.elements,g=e.length;d&&g--;b&&(e=Array.prototype.slice.call(e,0),e.reverse());for(d=0;d<g;d++)if(c(e[d]))return e[d];return null},isContextFor:function(a){var d;return a in CKEDITOR.dtd.$block?(d=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!d.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};
CKEDITOR.dom.text=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createTextNode(a));this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;
CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var d=this.$.parentNode,b=d.childNodes.length,c=this.getLength(),e=this.getDocument(),g=new CKEDITOR.dom.text(this.$.splitText(a),e);d.childNodes.length==b&&(a>=c?(g=e.createText(""),g.insertAfter(this)):(a=e.createText(""),a.insertAfter(g),a.remove()));return g},substring:function(a,
d){return"number"!=typeof d?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,d)}});
(function(){function a(a,c,d){var g=a.serializable,l=c[d?"endContainer":"startContainer"],k=d?"endOffset":"startOffset",n=g?c.document.getById(a.startNode):a.startNode;a=g?c.document.getById(a.endNode):a.endNode;l.equals(n.getPrevious())?(c.startOffset=c.startOffset-l.getLength()-a.getPrevious().getLength(),l=a.getNext()):l.equals(a.getPrevious())&&(c.startOffset-=l.getLength(),l=a.getNext());l.equals(n.getParent())&&c[k]++;l.equals(a.getParent())&&c[k]++;c[d?"endContainer":"startContainer"]=l;return c}
CKEDITOR.dom.rangeList=function(a){if(a instanceof CKEDITOR.dom.rangeList)return a;a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[];return CKEDITOR.tools.extend(a,d)};var d={createIterator:function(){var a=this,c=CKEDITOR.dom.walker.bookmark(),d=[],g;return{getNextRange:function(l){g=void 0===g?0:g+1;var k=a[g];if(k&&1<a.length){if(!g)for(var n=a.length-1;0<=n;n--)d.unshift(a[n].createBookmark(!0));if(l)for(var w=0;a[g+w+1];){var f=k.document;l=0;n=f.getById(d[w].endNode);for(f=f.getById(d[w+1].startNode);;){n=
n.getNextSourceNode(!1);if(f.equals(n))l=1;else if(c(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())continue;break}if(!l)break;w++}for(k.moveToBookmark(d.shift());w--;)n=a[++g],n.moveToBookmark(d.shift()),k.setEnd(n.endContainer,n.endOffset)}return k}}},createBookmarks:function(b){for(var c=[],d,g=0;g<this.length;g++){c.push(d=this[g].createBookmark(b,!0));for(var l=g+1;l<this.length;l++)this[l]=a(d,this[l]),this[l]=a(d,this[l],!0)}return c},createBookmarks2:function(a){for(var c=[],d=0;d<
this.length;d++)c.push(this[d].createBookmark2(a));return c},moveToBookmarks:function(a){for(var c=0;c<this.length;c++)this[c].moveToBookmark(a[c])}}})();
(function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function d(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var c=c.split(",").sort(function(a,b){return a>b?-1:1}),e=0,g;e<c.length;e++)if(g=c[e],d.ie&&(g.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==g)&&(g="ie"),d[g]){b+="_"+c[e];break}return CKEDITOR.getUrl(a()+b+".css")}function b(a,b){g[a]||(CKEDITOR.document.appendStyleSheet(d(a)),g[a]=1);b&&b()}function c(a){var b=
a.getById(l);b||(b=a.getHead().append("style"),b.setAttribute("id",l),b.setAttribute("type","text/css"));return b}function e(a,b,c){var d,e,g;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var k=0;k<a.length;k++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){g=b[e][1];for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);a[k].$.sheet.addRule(b[e][0],g)}else{g=b;for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?
a[k].$.styleSheet.cssText+=g:a[k].$.innerHTML+=g}}var g={};CKEDITOR.skin={path:a,loadPart:function(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(c,d)}):b(c,d)},getPath:function(a){return CKEDITOR.getUrl(d(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase();this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var g;a&&(a=a.toLowerCase(),b&&(g=this.icons[a+"-rtl"]),
g||(g=this.icons[a]));a=c||g&&g.path||"";d=d||g&&g.offset;e=e||g&&g.bgsize||"16px";a&&(a=a.replace(/'/g,"\\'"));return a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+d+"px;background-size:"+e+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=c(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var c=CKEDITOR.skin.chameleon,d="",g="";"function"==typeof c&&(d=c(this,"editor"),g=
c(this,"panel"));a=[[n,a]];e([b],d,a);e(k,g,a)}).call(this,a)}});var l="cke_ui_color",k=[],n=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!a.getById("cke_ui_color")){a=c(a);k.push(a);var d=b.getUiColor();d&&e([a],CKEDITOR.skin.chameleon(b,"panel"),[[n,d]])}};b.on("panelShow",a);b.on("menuShow",a);b.config.uiColor&&b.setUiColor(b.config.uiColor)}})})();
(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var d=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!d||d!=b)}catch(c){CKEDITOR.env.hc=!1}a.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");
CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,d=0;d<a.length;d++)CKEDITOR.editor.prototype.constructor.apply(a[d][0],a[d][1]),CKEDITOR.add(a[d][0])})();/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";
CKEDITOR.skin.chameleon=function(){var b=function(){return function(b,e){for(var a=b.match(/[^#]./g),c=0;3>c;c++){var f=c,d;d=parseInt(a[c],16);d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2);a[f]=d}return"#"+a.join("")}}(),c=function(){var b=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d'{from}',endColorstr\x3d'{to}');");return function(c,a){return b.output({from:c,
to:a})}}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),
panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};
return function(g,e){var a=g.uiColor,a={id:"."+g.id,defaultBorder:b(a,-.1),defaultGradient:c(b(a,.9),a),lightGradient:c(b(a,1),b(a,.7)),mediumGradient:c(b(a,.8),b(a,.5)),ckeButtonOn:c(b(a,.6),b(a,.7)),ckeResizer:b(a,-.4),ckeToolbarSeparator:b(a,.5),ckeColorauto:b(a,.8),dialogBody:b(a,.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-.6),elementsPathBg:a,menubuttonIcon:b(a,.5),menubuttonIconHover:b(a,.3)};return f[e].output(a).replace(/\[/g,"{").replace(/\]/g,
"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var h=function(b){this._||(this._={});this._["default"]=this._.initValue=b["default"]||"";this._.required=b.required||!1;for(var a=[this._],d=1;d<arguments.length;d++)a.push(arguments[d]);a.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,a);return this._},v={build:function(b,a,d){return new CKEDITOR.ui.dialog.textInput(b,a,d)}},n={build:function(b,a,d){return new CKEDITOR.ui.dialog[a.type](b,a,d)}},q={isChanged:function(){return this.getValue()!=
this.getInitValue()},reset:function(b){this.setValue(this.getInitValue(),b)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},r=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},
this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},!0),x=/^on([A-Z]\w+)/,t=function(b){for(var a in b)(x.test(a)||"title"==a||"type"==a)&&delete b[a];return b},w=function(b){b=b.data.getKeystroke();b==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):b==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,a,d,f){if(!(4>arguments.length)){var c=h.call(this,a);c.labelId=CKEDITOR.tools.getNextId()+
"_label";this._.children=[];var e={role:a.role||"presentation"};a.includeLabel&&(e["aria-labelledby"]=c.labelId);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"div",null,e,function(){var e=[],g=a.required?" cke_required":"";"horizontal"!=a.labelLayout?e.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" ',' id\x3d"'+c.labelId+'"',c.inputId?' for\x3d"'+c.inputId+'"':"",(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",a.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',
a.controlStyle?' style\x3d"'+a.controlStyle+'"':"",' role\x3d"presentation"\x3e',f.call(this,b,a),"\x3c/div\x3e"):(g={type:"hbox",widths:a.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" id\x3d"'+c.labelId+'" for\x3d"'+c.inputId+'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(a.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(a.controlStyle?' style\x3d"'+a.controlStyle+
'"':"")+"\x3e"+f.call(this,b,a)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,g,e));return e.join("")})}},textInput:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={"class":"cke_dialog_ui_input_"+a.type,id:f,type:a.type};a.validate&&(this.validate=a.validate);a.maxLength&&(c.maxlength=a.maxLength);a.size&&(c.size=a.size);a.inputStyle&&(c.style=a.inputStyle);var e=this,m=!1;b.on("load",function(){e.getInputElement().on("keydown",
function(a){13==a.data.getKeystroke()&&(m=!0)});e.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&m&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),m=!1);e.bidi&&w.call(e,a)},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var b=['\x3cdiv class\x3d"cke_dialog_ui_input_',a.type,'" role\x3d"presentation"'];a.width&&b.push('style\x3d"width:'+a.width+'" ');b.push("\x3e\x3cinput ");c["aria-labelledby"]=this._.labelId;this._.required&&
(c["aria-required"]=this._.required);for(var e in c)b.push(e+'\x3d"'+c[e]+'" ');b.push(" /\x3e\x3c/div\x3e");return b.join("")})}},textarea:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",e={};a.validate&&(this.validate=a.validate);e.rows=a.rows||5;e.cols=a.cols||20;e["class"]="cke_dialog_ui_input_textarea "+(a["class"]||"");"undefined"!=typeof a.inputStyle&&(e.style=a.inputStyle);a.dir&&(e.dir=a.dir);if(f.bidi)b.on("load",
function(){f.getInputElement().on("keyup",w)},f);CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);var a=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',c,'" '],b;for(b in e)a.push(b+'\x3d"'+CKEDITOR.tools.htmlEncode(e[b])+'" ');a.push("\x3e",CKEDITOR.tools.htmlEncode(f._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return a.join("")})}},checkbox:function(b,
a,d){if(!(3>arguments.length)){var f=h.call(this,a,{"default":!!a["default"]});a.validate&&(this.validate=a.validate);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"span",null,null,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],d=CKEDITOR.tools.getNextId()+"_label",g={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":d};t(c);a["default"]&&(g.checked="checked");"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);
f.checkbox=new CKEDITOR.ui.dialog.uiElement(b,c,e,"input",null,g);e.push(' \x3clabel id\x3d"',d,'" for\x3d"',g.id,'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(a.label),"\x3c/label\x3e");return e.join("")})}},radio:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);this._["default"]||(this._["default"]=this._.initValue=a.items[0][1]);a.validate&&(this.validate=a.validate);var f=[],c=this;a.role="radiogroup";a.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,
b,a,d,function(){for(var e=[],d=[],g=(a.id?a.id:CKEDITOR.tools.getNextId())+"_radio",k=0;k<a.items.length;k++){var l=a.items[k],h=void 0!==l[2]?l[2]:l[0],n=void 0!==l[1]?l[1]:l[0],p=CKEDITOR.tools.getNextId()+"_radio_input",q=p+"_label",p=CKEDITOR.tools.extend({},a,{id:p,title:null,type:null},!0),h=CKEDITOR.tools.extend({},p,{title:h},!0),r={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:n,"aria-labelledby":q},u=[];c._["default"]==n&&(r.checked="checked");t(p);t(h);"undefined"!=typeof p.inputStyle&&
(p.style=p.inputStyle);p.keyboardFocusable=!0;f.push(new CKEDITOR.ui.dialog.uiElement(b,p,u,"input",null,r));u.push(" ");new CKEDITOR.ui.dialog.uiElement(b,h,u,"label",null,{id:q,"for":r.id},l[0]);e.push(u.join(""))}new CKEDITOR.ui.dialog.hbox(b,f,e,d);return d.join("")});this._.children=f}},button:function(b,a,d){if(arguments.length){"function"==typeof a&&(a=a(b.getParentEditor()));h.call(this,a,{disabled:a.disabled||!1});CKEDITOR.event.implementOn(this);var f=this;b.on("load",function(){var a=this.getElement();
(function(){a.on("click",function(a){f.click();a.data.preventDefault()});a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(f.click(),a.data.preventDefault())})})();a.unselectable()},this);var c=CKEDITOR.tools.extend({},a);delete c.style;var e=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"a",null,{style:a.style,href:"javascript:void(0)",title:a.label,hidefocus:"true","class":a["class"],role:"button","aria-labelledby":e},'\x3cspan id\x3d"'+e+'" class\x3d"cke_dialog_ui_button"\x3e'+
CKEDITOR.tools.htmlEncode(a.label)+"\x3c/span\x3e")}},select:function(b,a,d){if(!(3>arguments.length)){var f=h.call(this,a);a.validate&&(this.validate=a.validate);f.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],d=[],g={id:f.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('\x3cdiv class\x3d"cke_dialog_ui_input_',
a.type,'" role\x3d"presentation"');a.width&&e.push('style\x3d"width:'+a.width+'" ');e.push("\x3e");void 0!==a.size&&(g.size=a.size);void 0!==a.multiple&&(g.multiple=a.multiple);t(c);for(var k=0,l;k<a.items.length&&(l=a.items[k]);k++)d.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(l[0]));"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);f.select=new CKEDITOR.ui.dialog.uiElement(b,c,e,"select",null,
g,d.join(""));e.push("\x3c/div\x3e");return e.join("")})}},file:function(b,a,d){if(!(3>arguments.length)){void 0===a["default"]&&(a["default"]="");var f=CKEDITOR.tools.extend(h.call(this,a),{definition:a,buttons:[]});a.validate&&(this.validate=a.validate);b.on("load",function(){CKEDITOR.document.getById(f.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){f.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var b=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',
f.frameId,'" title\x3d"',a.label,'" src\x3d"javascript:void('];b.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");b.push(')"\x3e\x3c/iframe\x3e');return b.join("")})}},fileButton:function(b,a,d){var f=this;if(!(3>arguments.length)){h.call(this,a);a.validate&&(this.validate=a.validate);var c=CKEDITOR.tools.extend({},a),e=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button";c.onClick=function(c){var d=
a["for"];e&&!1===e.call(this,c)||(b.getContentElement(d[0],d[1]).submit(),this.disable())};b.on("load",function(){b.getContentElement(a["for"][0],a["for"][1])._.buttons.push(f)});CKEDITOR.ui.dialog.button.call(this,b,c,d)}},html:function(){var b=/^\s*<[\w:]+\s+([^>]*)?>/,a=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/;return function(f,c,e){if(!(3>arguments.length)){var m=[],g=c.html;"\x3c"!=g.charAt(0)&&(g="\x3cspan\x3e"+g+"\x3c/span\x3e");var k=c.focus;if(k){var l=this.focus;this.focus=function(){("function"==
typeof k?k:l).call(this);this.fire("focus")};c.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,f,c,m,"span",null,null,"");m=m.join("").match(b);g=g.match(a)||["","",""];d.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]);e.push([g[1]," ",m[1]||"",g[2]].join(""))}}}(),fieldset:function(b,a,d,f,c){var e=c.label;this._={children:a};CKEDITOR.ui.dialog.uiElement.call(this,b,c,f,"fieldset",null,null,function(){var a=[];e&&a.push("\x3clegend"+
(c.labelStyle?' style\x3d"'+c.labelStyle+'"':"")+"\x3e"+e+"\x3c/legend\x3e");for(var b=0;b<d.length;b++)a.push(d[b]);return a.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(b){var a=CKEDITOR.document.getById(this._.labelId);1>a.getChildCount()?(new CKEDITOR.dom.text(b,CKEDITOR.document)).appendTo(a):a.getChild(0).$.nodeValue=b;return this},getLabel:function(){var b=
CKEDITOR.document.getById(this._.labelId);return!b||1>b.getChildCount()?"":b.getChild(0).getText()},eventProcessors:r},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var b=this.getElement();b&&b.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},
isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(b,a){this.on("click",function(){a.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},
focus:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&a.$.focus()},0)},select:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&(a.$.focus(),a.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(b){if(this.bidi){var a=b&&b.charAt(0);(a="‪"==a?"ltr":"‫"==a?"rtl":null)&&(b=b.slice(1));this.setDirectionMarker(a)}b||(b="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},
getValue:function(){var b=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&b){var a=this.getDirectionMarker();a&&(b=("ltr"==a?"‪":"‫")+b)}return b},setDirectionMarker:function(b){var a=this.getInputElement();b?a.setAttributes({dir:b,"data-cke-dir-marker":b}):this.getDirectionMarker()&&a.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.textarea.prototype=
new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(b,a,d){var f=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;f.$.text=b;f.$.value=void 0===a||null===a?b:a;void 0===d||null===d?CKEDITOR.env.ie?c.add(f.$):c.add(f.$,null):c.add(f.$,d);return this},remove:function(b){this.getInputElement().$.remove(b);
return this},clear:function(){for(var b=this.getInputElement().$;0<b.length;)b.remove(0);return this},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(b,a){this.getInputElement().$.checked=b;!a&&this.fire("change",{value:b})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(b,
a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this);this.on("change",a);return null}},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(b,a){for(var d=this._.children,f,c=0;c<d.length&&(f=d[c]);c++)f.getElement().$.checked=
f.getValue()==b;!a&&this.fire("change",{value:b})},getValue:function(){for(var b=this._.children,a=0;a<b.length;a++)if(b[a].getElement().$.checked)return b[a].getValue();return null},accessKeyUp:function(){var b=this._.children,a;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked){b[a].getElement().focus();return}b[0].getElement().focus()},eventProcessors:{onChange:function(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){for(var a=
this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",a);return null}}},q,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,q,{getInputElement:function(){var b=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<b.$.forms.length?new CKEDITOR.dom.element(b.$.forms[0].elements[0]):
this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(b){var a=/^on([A-Z]\w+)/,d,f=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})},c;for(c in b)if(d=c.match(a))this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,b[c]):f(this,this._.dialog,d[1].toLowerCase(),b[c]);return this},reset:function(){function b(){d.$.open();
var b="";f.size&&(b=f.size-(CKEDITOR.env.ie?7:0));var h=a.frameId+"_input";d.$.write(['\x3chtml dir\x3d"'+g+'" lang\x3d"'+k+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+g+'" lang\x3d"'+k+'" action\x3d"',CKEDITOR.tools.htmlEncode(f.action),'"\x3e\x3clabel id\x3d"',a.labelId,'" for\x3d"',h,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(f.label),
'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',h,'" aria-labelledby\x3d"',a.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(f.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<b?b:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+e+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+m+")}","\x3c/script\x3e"].join(""));
d.$.close();for(b=0;b<c.length;b++)c[b].enable()}var a=this._,d=CKEDITOR.document.getById(a.frameId).getFrameDocument(),f=a.definition,c=a.buttons,e=this.formLoadedNumber,m=this.formUnloadNumber,g=a.dialog._.editor.lang.dir,k=a.dialog._.editor.langCode;e||(e=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),m=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(e);
CKEDITOR.tools.removeFunction(m)}));CKEDITOR.env.gecko?setTimeout(b,500):b()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=
new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",v);CKEDITOR.dialog.addUIElement("password",v);CKEDITOR.dialog.addUIElement("textarea",n);CKEDITOR.dialog.addUIElement("checkbox",n);CKEDITOR.dialog.addUIElement("radio",n);CKEDITOR.dialog.addUIElement("button",n);CKEDITOR.dialog.addUIElement("select",n);CKEDITOR.dialog.addUIElement("file",n);CKEDITOR.dialog.addUIElement("fileButton",n);CKEDITOR.dialog.addUIElement("html",
n);CKEDITOR.dialog.addUIElement("fieldset",{build:function(b,a,d){for(var f=a.children,c,e=[],h=[],g=0;g<f.length&&(c=f[g]);g++){var k=[];e.push(k);h.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(b,c,k))}return new CKEDITOR.ui.dialog[a.type](b,h,e,d,a)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;
(function(){function x(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function A(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function K(a,b){for(var c=a.$.getElementsByTagName("input"),
d=0,e=c.length;d<e;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function T(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0));a||(this.select?this.select():this.focus());b&&alert(b);this.fire("validated",{valid:a,msg:b})}
function U(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function V(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",W).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),c=b.getChild([0,0,0,0,0]),d=c.getChild(0),e=c.getChild(1);a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(c);
!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+a+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(c.getParent()));d.unselectable();e.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:d,close:e,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),
footer:c.getChild([3,0,1,0])}}}function L(a,b,c){this.element=b;this.focusIndex=c;this.tabIndex=0;this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.currentFocusIndex=this.focusIndex;this.element.focus()};b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});b.on("focus",function(){this.fire("mouseover")});b.on("blur",function(){this.fire("mouseout")})}function X(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();
c.on("resize",b);a.on("hide",function(){c.removeListener("resize",b)})}function M(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b)}function Y(a){function b(b){var c=a.getSize(),k=CKEDITOR.document.getWindow().getViewPaneSize(),q=b.data.$.screenX,n=b.data.$.screenY,r=q-d.x,l=n-d.y;d={x:q,y:n};e.x+=r;e.y+=l;a.move(e.x+h[3]<g?-h[3]:e.x-h[1]>k.width-c.width-g?k.width-c.width+("rtl"==f.lang.dir?0:h[1]):e.x,e.y+h[0]<g?-h[0]:e.y-h[2]>k.height-c.height-g?k.height-c.height+h[2]:e.y,1);b.data.preventDefault()}
function c(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",c);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mousemove",b);a.removeListener("mouseup",c)}}var d=null,e=null,f=a.getParentEditor(),g=f.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20);a.parts.title.on("mousedown",function(g){d={x:g.data.$.screenX,y:g.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",
c);e=a.getPosition();if(CKEDITOR.env.ie6Compat){var f=u.getChild(0).getFrameDocument();f.on("mousemove",b);f.on("mouseup",c)}g.data.preventDefault()},a)}function Z(a){function b(b){var c="rtl"==f.lang.dir,n=k.width,q=k.height,G=n+(b.data.$.screenX-m.x)*(c?-1:1)*(a._.moved?1:2),H=q+(b.data.$.screenY-m.y)*(a._.moved?1:2),B=a._.element.getFirst(),B=c&&B.getComputedStyle("right"),C=a.getPosition();C.y+H>p.height&&(H=p.height-C.y);(c?B:C.x)+G>p.width&&(G=p.width-(c?B:C.x));if(e==CKEDITOR.DIALOG_RESIZE_WIDTH||
e==CKEDITOR.DIALOG_RESIZE_BOTH)n=Math.max(d.minWidth||0,G-g);if(e==CKEDITOR.DIALOG_RESIZE_HEIGHT||e==CKEDITOR.DIALOG_RESIZE_BOTH)q=Math.max(d.minHeight||0,H-h);a.resize(n,q);a._.moved||a.layout();b.data.preventDefault()}function c(){CKEDITOR.document.removeListener("mouseup",c);CKEDITOR.document.removeListener("mousemove",b);q&&(q.remove(),q=null);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mouseup",c);a.removeListener("mousemove",b)}}var d=a.definition,e=d.resizable;
if(e!=CKEDITOR.DIALOG_RESIZE_NONE){var f=a.getParentEditor(),g,h,p,m,k,q,n=CKEDITOR.tools.addFunction(function(e){k=a.getSize();var d=a.parts.contents;d.$.getElementsByTagName("iframe").length&&(q=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),d.append(q));h=k.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));g=k.width-a.parts.contents.getSize("width",
1);m={x:e.screenX,y:e.screenY};p=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);CKEDITOR.env.ie6Compat&&(d=u.getChild(0).getFrameDocument(),d.on("mousemove",b),d.on("mouseup",c));e.preventDefault&&e.preventDefault()});a.on("load",function(){var b="";e==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":e==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+
b+" cke_resizer_"+f.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(f.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+n+', event )"\x3e'+("ltr"==f.lang.dir?"◢":"◣")+"\x3c/div\x3e");a.parts.footer.append(b,1)});f.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function I(a){a.data.preventDefault(1)}function N(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,f=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,
e,f),g=z[c];g?g.show():(f=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",f,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(d="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+d+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",f.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),f.push("void((function(){"+
encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),f.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),f.push("\x3c/div\x3e"),g=CKEDITOR.dom.element.createFromHtml(f.join("")),g.setOpacity(void 0!==e?e:.5),g.on("keydown",I),g.on("keypress",I),g.on("keyup",I),g.appendTo(CKEDITOR.document.getBody()),z[c]=g);a.focusManager.add(g);
u=g;a=function(){var a=b.getViewPaneSize();g.setStyles({width:a.width+"px",height:a.height+"px"})};var h=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;g.setStyles({left:a.x+"px",top:a.y+"px"});if(c){do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)}};J=a;b.on("resize",a);a();CKEDITOR.env.mac&&CKEDITOR.env.webkit||g.focus();if(CKEDITOR.env.ie6Compat){var p=function(){h();arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){p.prevScrollHandler=
window.onscroll||function(){};window.onscroll=p},0);h()}}function O(a){u&&(a.focusManager.remove(u),a=CKEDITOR.document.getWindow(),u.hide(),a.removeListener("resize",J),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),J=null)}var v=CKEDITOR.tools.cssLength,W='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+
CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';
CKEDITOR.dialog=function(a,b){function c(){var a=l._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;c<b;c++)a[c].focusIndex=c}function d(a){var b=l._.focusList;a=a||0;if(!(1>b.length)){var c=l._.currentFocusIndex;l._.tabBarMode&&0>a&&(c=0);try{b[c].getInputElement().$.blur()}catch(e){}var d=c,g=1<l._.pageCount;do{d+=a;if(g&&!l._.tabBarMode&&(d==b.length||-1==d)){l._.tabBarMode=!0;l._.tabs[l._.currentTabId][0].focus();
l._.currentFocusIndex=-1;return}d=(d+b.length)%b.length;if(d==c)break}while(a&&!b[d].isFocusable());b[d].focus();"text"==b[d].type&&b[d].select()}}function e(b){if(l==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),e="rtl"==a.lang.dir,g=[37,38,39,40];q=n=0;if(9==c||c==CKEDITOR.SHIFT+9)d(c==CKEDITOR.SHIFT+9?-1:1),q=1;else if(c==CKEDITOR.ALT+121&&!l._.tabBarMode&&1<l.getPageCount())l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1,q=1;else if(-1!=CKEDITOR.tools.indexOf(g,
c)&&l._.tabBarMode)c=-1!=CKEDITOR.tools.indexOf([e?39:37,38],c)?x.call(l):A.call(l),l.selectPage(c),l._.tabs[c][0].focus(),q=1;else if(13!=c&&32!=c||!l._.tabBarMode)if(13==c)c=b.data.getTarget(),c.is("a","button","select","textarea")||c.is("input")&&"button"==c.$.type||((c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),q=1),n=1;else if(27==c)(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),n=1;else return;else this.selectPage(this._.currentTabId),
this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1),q=1;f(b)}}function f(a){q?a.data.preventDefault(1):n&&a.data.stopPropagation()}var g=CKEDITOR.dialog._.dialogDefinitions[b],h=CKEDITOR.tools.clone(aa),p=a.config.dialog_buttonsOrder||"OS",m=a.lang.dir,k={},q,n;("OS"==p&&CKEDITOR.env.mac||"rtl"==p&&"ltr"==m||"ltr"==p&&"rtl"==m)&&h.buttons.reverse();g=CKEDITOR.tools.extend(g(a),h);g=CKEDITOR.tools.clone(g);g=new P(this,g);h=V(a);this._={editor:a,element:h.element,name:b,contentSize:{width:0,height:0},
size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=h.parts;CKEDITOR.tools.setTimeout(function(){a.fire("ariaWidget",this.parts.contents)},0,this);h={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};h["rtl"==m?"right":"left"]=0;this.parts.dialog.setStyles(h);CKEDITOR.event.call(this);this.definition=g=CKEDITOR.fire("dialogDefinition",
{name:b,definition:g},a).definition;if(!("removeDialogTabs"in a._)&&a.config.removeDialogTabs){h=a.config.removeDialogTabs.split(";");for(m=0;m<h.length;m++)if(p=h[m].split(":"),2==p.length){var r=p[0];k[r]||(k[r]=[]);k[r].push(p[1])}a._.removeDialogTabs=k}if(a._.removeDialogTabs&&(k=a._.removeDialogTabs[b]))for(m=0;m<k.length;m++)g.removeContents(k[m]);if(g.onLoad)this.on("load",g.onLoad);if(g.onShow)this.on("show",g.onShow);if(g.onHide)this.on("hide",g.onHide);if(g.onOk)this.on("ok",function(b){a.fire("saveSnapshot");
setTimeout(function(){a.fire("saveSnapshot")},0);!1===g.onOk.call(this,b)&&(b.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(g.onCancel)this.on("cancel",function(a){!1===g.onCancel.call(this,a)&&(a.data.hide=!1)});var l=this,t=function(a){var b=l._.contents,c=!1,d;for(d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(a){t(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;d&&(a.data.hide=!1,a.stop());T.call(b,!d,"string"==typeof c?
c:void 0);return d}})},this,null,0);this.on("cancel",function(b){t(function(c){if(c.isChanged())return a.config.dialog_noConfirmCancel||confirm(a.lang.common.confirmCancel)||(b.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();a.data.preventDefault()},this);this.changeFocus=d;var y=this._.element;a.focusManager.add(y,1);this.on("show",function(){y.on("keydown",e,this);if(CKEDITOR.env.gecko)y.on("keypress",f,this)});this.on("hide",
function(){y.removeListener("keydown",e);CKEDITOR.env.gecko&&y.removeListener("keypress",f);t(function(a){U.apply(a)})});this.on("iframeAdded",function(a){(new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document)).on("keydown",e,this,null,0)});this.on("show",function(){c();var b=1<l._.pageCount;a.config.dialog_startupFocusTab&&b?(l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=b?-1:this._.focusList.length-1,g.onFocus?
(b=g.onFocus.call(this))&&b.focus():d(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove();b.appendTo(a)},this);Y(this);Z(this);(new CKEDITOR.dom.text(g.title,CKEDITOR.document)).appendTo(this.parts.title);for(m=0;m<g.contents.length;m++)(k=g.contents[m])&&this.addPage(k);this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),
this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1)),a.data.preventDefault())},this);m=[];k=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},m).getChild();this.parts.footer.setHtml(m.join(""));for(m=0;m<k.length;m++)this._.buttons[k[m].id]=k[m]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==
a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();
return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,f="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%");f&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},f||(f=CKEDITOR.document.getWindow().getScrollPosition(),a+=f.x,b+=f.y),e&&(f=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-f.width-a),b={top:(0<b?b:0)+"px"},
b[e?"right":"left"]=(0<a?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,N(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);
a.on("keydown",Q);a.on("keyup",R);this._.hasFocus=!1;for(var c in b.contents)if(b.contents[c]){var a=b.contents[c],d=this._.tabs[a.id],e=a.requiredContent,f=0;if(d){for(var g in this._.contents[a.id]){var h=this._.contents[a.id][g];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),f++))}!f||e&&!this._.editor.activeFilter.check(e)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout();
X(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<e?e:0)>c.height||
b.width+(0<d?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){this.foreach(a);return this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},
commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var a=this._.element;a.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(ba(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();
if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else O(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;a.removeListener("keydown",Q);a.removeListener("keyup",R);var c=this._.editor;c.focus();setTimeout(function(){c.focusManager.unlock();CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog;
this.foreach(function(a){a.resetInitValue&&a.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),
g=0;d=f.shift();)d.notAllowed||"hbox"==d.type||"vbox"==d.type||g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());g||(a.hidden=!0);b=CKEDITOR.dom.element.createFromHtml(b.join(""));b.setAttribute("role","tabpanel");d=CKEDITOR.env;e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber();c=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style\x3d"display:none"':"",' id\x3d"',e,'"',d.gecko&&!d.hc?"":' href\x3d"javascript:void(0)"',
' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',a.label,"\x3c/a\x3e"].join(""));b.setAttribute("aria-labelledby",e);this._.tabs[a.id]=[c,b];this._.tabIdList.push(a.id);!a.hidden&&this._.pageCount++;this._.lastTab=c;this.updateStyle();b.setAttribute("name",a.id);b.appendTo(this.parts.contents);c.unselectable();this.parts.tabs.append(c);a.accessKey&&(S(this,this,"CTRL+"+a.accessKey,ca,da),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&
!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],d=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),d.hide());d.setAttribute("aria-hidden",b!=a)}var e=this._.tabs[a];e[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(K(e[1]),e[1].show(),setTimeout(function(){K(e[1],1)},0)):e[1].show();this._.currentTabId=a;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},
updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(x.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){if(a=this._.tabs[a]&&this._.tabs[a][0])a.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},
getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},
getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new L(this,a,b));else{this._.focusList.splice(b,0,new L(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}},setState:function(a){if(this.state!=a){this.state=a;if(a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,c={attributes:{"class":"cke_dialog_spinner"},
styles:{"float":"rtl"==b?"right":"left"}};c.styles["margin-"+("rtl"==b?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",c);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&
"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){a=a.config.removeDialogTabs;return!(a&&a.match(new RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog;!1!==a.fire("ok",
{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog;!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,
b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var aa={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},D=function(a,b,c){for(var d=0,e;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=D(e[c],
b,c)))return e;return null},E=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]&&(g=E(g[d],b,c,d,!0)))return g}if(e)return null}a.push(b);return b},F=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=F(e[c],b,c)))return e}return null},P=function(a,b){this.dialog=a;for(var c=b.contents,d=0,e;e=c[d];d++)c[d]=e&&new M(a,e);CKEDITOR.tools.extend(this,b)};P.prototype={getContents:function(a){return D(this.contents,
a)},getButton:function(a){return D(this.buttons,a)},addContents:function(a,b){return E(this.contents,a,b)},addButton:function(a,b){return E(this.buttons,a,b)},removeContents:function(a){F(this.contents,a)},removeButton:function(a){F(this.buttons,a)}};M.prototype={get:function(a){return D(this.elements,a,"children")},add:function(a,b){return E(this.elements,a,b,"children")},remove:function(a){F(this.elements,a,"children")}};var J,z={},u,w={},Q=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=
a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},R=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),
a.data.preventDefault()))},S=function(a,b,c,d,e){(w[c]||(w[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},ba=function(a){for(var b in w){for(var c=w[b],d=c.length-1;0<=d;d--)c[d].dialog!=a&&c[d].uiElement!=a||c.splice(d,1);0===c.length&&delete w[b]}},da=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},ca=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(4>arguments.length)){var h=(d.call?d(b):d)||
"div",p=["\x3c",h," "],m=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},q=(g&&g.call?g.call(this,a,b):g)||"",n=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(m.display="none",this.notAllowed=!0);k.id=n;var r={};b.type&&(r["cke_dialog_ui_"+b.type]=1);b.className&&(r[b.className]=1);b.disabled&&(r.cke_disabled=1);for(var l=k["class"]&&k["class"].split?k["class"].split(" "):[],n=0;n<l.length;n++)l[n]&&(r[l[n]]=1);l=
[];for(n in r)l.push(n);k["class"]=l.join(" ");b.title&&(k.title=b.title);r=(b.style||"").split(";");b.align&&(l=b.align,m["margin-left"]="left"==l?0:"auto",m["margin-right"]="right"==l?0:"auto");for(n in m)r.push(n+":"+m[n]);b.hidden&&r.push("display:none");for(n=r.length-1;0<=n;n--)""===r[n]&&r.splice(n,1);0<r.length&&(k.style=(k.style?k.style+"; ":"")+r.join("; "));for(n in k)p.push(n+'\x3d"'+CKEDITOR.tools.htmlEncode(k[n])+'" ');p.push("\x3e",q,"\x3c/",h,"\x3e");c.push(p.join(""));(this._||(this._=
{})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}}));"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}}));CKEDITOR.event.implementOn(this);
this.registerEvents(b);this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&S(this,a,"CTRL+"+b.accessKey);var t=this;a.on("load",function(){var b=t.getInputElement();if(b){var c=t.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1;a._.hasFocus=!0;t.fire("focus");c&&this.addClass(c)});b.on("blur",function(){t.fire("blur");c&&this.removeClass(c)})}});CKEDITOR.tools.extend(this,b);this.keyboardFocusable&&(this.tabIndex=
b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=t.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.widths||null,h=e&&e.height||null,p,m={role:"presentation"};e&&e.align&&(m.align=e.align);CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},m,function(){var a=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(p=0;p<c.length;p++){var b="cke_dialog_ui_hbox_child",
d=[];0===p&&(b="cke_dialog_ui_hbox_first");p==c.length-1&&(b="cke_dialog_ui_hbox_last");a.push('\x3ctd class\x3d"',b,'" role\x3d"presentation" ');g?g[p]&&d.push("width:"+v(g[p])):d.push("width:"+Math.floor(100/c.length)+"%");h&&d.push("height:"+v(h));e&&void 0!==e.padding&&d.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[p].align&&d.push("text-align:"+f[p].align);0<d.length&&a.push('style\x3d"'+d.join("; ")+'" ');a.push("\x3e",c[p],"\x3c/td\x3e")}a.push("\x3c/tr\x3e\x3c/tbody\x3e");
return a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];b.push('style\x3d"');e&&e.expand&&b.push("height:100%;");b.push("width:"+v(g||"100%"),";");CKEDITOR.env.webkit&&b.push("float:none;");b.push('"');b.push('align\x3d"',
CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" ');b.push("\x3e\x3ctbody\x3e");for(var d=0;d<c.length;d++){var k=[];b.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');g&&k.push("width:"+v(g||"100%"));h?k.push("height:"+v(h[d])):e&&e.expand&&k.push("height:"+Math.floor(100/c.length)+"%");e&&void 0!==e.padding&&k.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&k.push("text-align:"+f[d].align);0<k.length&&b.push('style\x3d"',
k.join("; "),'" ');b.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',c[d],"\x3c/td\x3e\x3c/tr\x3e")}b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},
isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););if(!a)return this;a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})},e;for(e in a)if(c=
e.match(b))this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]);return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=
this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>
a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var a={build:function(a,c,d){for(var e=c.children,f,g=[],h=[],p=0;p<e.length&&(f=e[p]);p++){var m=[];g.push(m);h.push(CKEDITOR.dialog._.uiElementBuilders[f.type].build(a,f,m))}return new CKEDITOR.ui.dialog[c.type](a,h,g,d,c)}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",
a)})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0)};CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var a=
arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],c,d=CKEDITOR.VALIDATE_AND,e=[],f;for(f=0;f<a.length;f++)if("function"==typeof a[f])e.push(a[f]);else break;f<a.length&&"string"==typeof a[f]&&(c=a[f],f++);f<a.length&&"number"==typeof a[f]&&(d=a[f]);var n=d==CKEDITOR.VALIDATE_AND?!0:!1;for(f=0;f<e.length;f++)n=d==CKEDITOR.VALIDATE_AND?n&&e[f](b):n||e[f](b);return n?!0:c}},regex:function(a,b){return function(c){c=this&&this.getValue?this.getValue():c;return a.test(c)?!0:b}},
notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return f.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},
notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}};CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in z)z[c].remove();z={}}a=a.editor._.storedDialogs;for(var d in a)a[d].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];null===CKEDITOR.dialog._.currentTop&&N(this);if("function"==typeof d)c=
this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw O(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed");this.openDialog(a,b)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return c}})})();
CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(x){x.on("doubleclick",function(A){A.data.dialog&&x.openDialog(A.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1};b.canUndo=!1;b.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(b){var c=this;b.addCommand("a11yHelp",{exec:function(){var a=b.langCode,a=c.availableLangs[a]?
a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a];b.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");b.on("ariaEditorHelpLabel",function(a){a.data.label=b.lang.common.editorHelp})}})})();(function(){function f(c){var a=this.att;c=c&&c.hasAttribute(a)&&c.getAttribute(a)||"";void 0!==c&&this.setValue(c)}function g(){for(var c,a=0;a<arguments.length;a++)if(arguments[a]instanceof CKEDITOR.dom.element){c=arguments[a];break}if(c){var a=this.att,b=this.getValue();b?c.setAttribute(a,b):c.removeAttribute(a,b)}}var k={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(c){c||(c=k);var a=[];c.id&&a.push("id");c.dir&&a.push("dir");var b=
"";a.length&&(b+="["+a.join(",")+"]");c.classes&&(b+="(*)");c.styles&&(b+="{*}");return b},createAdvancedTab:function(c,a,b){a||(a=k);var d=c.lang.common,h={id:"advanced",label:d.advancedTab,title:d.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},e=[];if(a.id||a.dir)a.id&&e.push({id:"advId",att:"id",type:"text",requiredContent:b?b+"[id]":null,label:d.id,setup:f,commit:g}),a.dir&&e.push({id:"advLangDir",att:"dir",type:"select",requiredContent:b?b+"[dir]":null,label:d.langDir,"default":"",
style:"width:100%",items:[[d.notSet,""],[d.langDirLTR,"ltr"],[d.langDirRTL,"rtl"]],setup:f,commit:g}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(e)});if(a.styles||a.classes)e=[],a.styles&&e.push({id:"advStyles",att:"style",type:"text",requiredContent:b?b+"{cke-xyz}":null,label:d.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(d.invalidInlineStyle),onChange:function(){},getStyle:function(a,c){var b=this.getValue().match(new RegExp("(?:^|;)\\s*"+
a+"\\s*:\\s*([^;]*)","i"));return b?b[1]:c},updateStyle:function(a,b){var d=this.getValue(),e=c.document.createElement("span");e.setAttribute("style",d);e.setStyle(a,b);d=CKEDITOR.tools.normalizeCssText(e.getAttribute("style"));this.setValue(d,1)},setup:f,commit:g}),a.classes&&e.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:b?b+"(cke-xyz)":null,label:d.cssClasses,"default":"",setup:f,commit:g}]}),h.elements[0].children.push({type:"hbox",
widths:["50%","50%"],children:[].concat(e)});return h}})})();CKEDITOR.plugins.add("basicstyles",{init:function(c){var e=0,d=function(g,d,b,a){if(a){a=new CKEDITOR.style(a);var f=h[b];f.unshift(a);c.attachStyleStateChange(a,function(a){!c.readOnly&&c.getCommand(b).setState(a)});c.addCommand(b,new CKEDITOR.styleCommand(a,{contentForms:f}));c.ui.addButton&&c.ui.addButton(g,{label:d,command:b,toolbar:"basicstyles,"+(e+=10)})}},h={bold:["strong","b",["span",function(a){a=a.styles["font-weight"];return"bold"==a||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==
a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=c.config,a=c.lang.basicstyles;d("Bold",a.bold,"bold",b.coreStyles_bold);d("Italic",a.italic,"italic",b.coreStyles_italic);d("Underline",a.underline,"underline",b.coreStyles_underline);d("Strike",a.strike,"strike",b.coreStyles_strike);d("Subscript",a.subscript,
"subscript",b.coreStyles_subscript);d("Superscript",a.superscript,"superscript",b.coreStyles_superscript);c.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};
CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function q(a,f,d,b){if(!a.isReadOnly()&&!a.equals(d.editable())){CKEDITOR.dom.element.setMarker(b,a,"bidi_processed",1);b=a;for(var c=d.editable();(b=b.getParent())&&!b.equals(c);)if(b.getCustomData("bidi_processed")){a.removeStyle("direction");a.removeAttribute("dir");return}b="useComputedState"in d.config?d.config.useComputedState:1;(b?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=f&&(a.removeStyle("direction"),b?(a.removeAttribute("dir"),f!=a.getComputedStyle("direction")&&
a.setAttribute("dir",f)):a.setAttribute("dir",f),d.forceNextSelectionCheck())}}function v(a,f,d){var b=a.getCommonAncestor(!1,!0);a=a.clone();a.enlarge(d==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(a.checkBoundaryOfElement(b,CKEDITOR.START)&&a.checkBoundaryOfElement(b,CKEDITOR.END)){for(var c;b&&b.type==CKEDITOR.NODE_ELEMENT&&(c=b.getParent())&&1==c.getChildCount()&&!(b.getName()in f);)b=c;return b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in f&&b}}function p(a){return{context:"p",
allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(a,d){var b=a.config.useComputedState,c,b=void 0===b||b;if(!b){c=d.lastElement;for(var h=a.editable();c&&!(c.getName()in u||c.equals(h));){var e=c.getParent();if(!e)break;c=e}}c=c||d.block||d.blockLimit;c.equals(a.editable())&&(h=a.getSelection().getRanges()[0].getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&(c=h);c&&(b=b?c.getComputedStyle("direction"):
c.getStyle("direction")||c.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));b=(d.block||d.blockLimit||a.editable()).getDirection(1);b!=(a._.selDir||a.lang.dir)&&(a._.selDir=b,a.fire("contentDirChanged",b))},exec:function(f){var d=f.getSelection(),b=f.config.enterMode,c=d.getRanges();if(c&&c.length){for(var h={},e=d.createBookmarks(),c=c.createIterator(),g,
l=0;g=c.getNextRange(1);){var k=g.getEnclosedNode();k&&(!k||k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in r)||(k=v(g,t,b));k&&q(k,a,f,h);var m=new CKEDITOR.dom.walker(g),n=e[l].startNode,p=e[l++].endNode;m.evaluator=function(a){var c=b==CKEDITOR.ENTER_P?"p":"div",d;if(d=(a?a.type==CKEDITOR.NODE_ELEMENT:!1)&&a.getName()in t){if(c=a.is(c))c=(c=a.getParent())?c.type==CKEDITOR.NODE_ELEMENT:!1;d=!(c&&a.getParent().is("blockquote"))}return!!(d&&a.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(p)&
CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;k=m.next();)q(k,a,f,h);g=g.createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;k=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)q(k,a,f,h)}CKEDITOR.dom.element.clearAllMarkers(h);f.forceNextSelectionCheck();d.selectBookmarks(e);f.focus()}}}}function w(a){var f=a==l.setAttribute,d=a==l.removeAttribute,b=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(c,h){if(!this.isReadOnly()){var e;if(e=c==(f||d?
"dir":"direction")||"style"==c&&(d||b.test(h))){a:{e=this;for(var g=e.getDocument().getBody().getParent();e;){if(e.equals(g)){e=!1;break a}e=e.getParent()}e=!0}e=!e}if(e&&(e=this.getDirection(1),g=a.apply(this,arguments),e!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),g}return a.apply(this,arguments)}}var t={table:1,ul:1,ol:1,blockquote:1,div:1},r={},u={};CKEDITOR.tools.extend(r,t,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(u,r,{td:1});CKEDITOR.plugins.add("bidi",{init:function(a){function f(b,
c,d,e,f){a.addCommand(d,new CKEDITOR.command(a,e));a.ui.addButton&&a.ui.addButton(b,{label:c,command:d,toolbar:"bidi,"+f})}if(!a.blockless){var d=a.lang.bidi;f("BidiLtr",d.ltr,"bidiltr",p("ltr"),10);f("BidiRtl",d.rtl,"bidirtl",p("rtl"),20);a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})});a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var c=a.ui.space(a.config.toolbarLocation);if(c)c[b]("cke_mixed_dir_content")})}}});
for(var l=CKEDITOR.dom.element.prototype,n=["setStyle","removeStyle","setAttribute","removeAttribute"],m=0;m<n.length;m++)l[n[m]]=CKEDITOR.tools.override(l[n[m]],w)})();(function(){var m={exec:function(g){var a=g.getCommand("blockquote").state,k=g.getSelection(),c=k&&k.getRanges()[0];if(c){var h=k.createBookmarks();if(CKEDITOR.env.ie){var e=h[0].startNode,b=h[0].endNode,d;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break}if(b&&"blockquote"==b.getParent().getName())for(d=b;d=d.getPrevious();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){b.move(d);break}}var f=c.createIterator();
f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR;if(a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();)e.push(a);1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),b=h.shift(),c.insertNode(a),a.append(new CKEDITOR.dom.text("﻿",g.document)),c.moveToBookmark(b),c.selectNodeContents(a),c.collapse(!0),b=c.createBookmark(),e.push(a),h.unshift(b));d=e[0].getParent();c=[];for(b=0;b<e.length;b++)a=e[b],d=d.getCommonAncestor(a.getParent());for(a={table:1,tbody:1,
tr:1,ol:1,ul:1};a[d.getName()];)d=d.getParent();for(b=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);)a=a.getParent();a.equals(b)||c.push(a);b=a}for(;0<c.length;)if(a=c.shift(),"blockquote"==a.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();)b.append(a.getFirst().remove()),e.push(b.getLast());b.replace(a)}else e.push(a);c=g.document.createElement("blockquote");for(c.insertBefore(e[0]);0<e.length;)a=e.shift(),c.append(a)}else if(a==CKEDITOR.TRISTATE_ON){b=[];
for(d={};a=f.getNextParagraph();){for(e=c=null;a.getParent();){if("blockquote"==a.getParent().getName()){c=a.getParent();e=a;break}a=a.getParent()}c&&e&&!e.getCustomData("blockquote_moveout")&&(b.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(d);a=[];e=[];for(d={};0<b.length;)f=b.shift(),c=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):f.remove().insertAfter(c):f.remove().insertBefore(c),c.getCustomData("blockquote_processed")||
(e.push(c),CKEDITOR.dom.element.setMarker(d,c,"blockquote_processed",!0)),a.push(f);CKEDITOR.dom.element.clearAllMarkers(d);for(b=e.length-1;0<=b;b--){c=e[b];a:{d=c;for(var f=0,m=d.getChildCount(),l=void 0;f<m&&(l=d.getChild(f));f++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){d=!1;break a}d=!0}d&&c.remove()}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(c=!0;a.length;)if(f=a.shift(),"div"==f.getName()){b=new CKEDITOR.dom.documentFragment(g.document);!c||!f.getPrevious()||f.getPrevious().type==
CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary()||b.append(g.document.createElement("br"));for(c=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(b);c&&b.append(g.document.createElement("br"));b.replace(f);c=!1}}k.selectBookmarks(h);g.focus()}},refresh:function(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",
requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(g){g.blockless||(g.addCommand("blockquote",m),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function r(b,a,c){a.type||(a.type="auto");if(c&&!1===b.fire("beforePaste",a)||!a.dataValue&&a.dataTransfer.isEmpty())return!1;a.dataValue||(a.dataValue="");if(CKEDITOR.env.gecko&&"drop"==a.method&&b.toolbox)b.once("afterPaste",function(){b.toolbox.focus()});return b.fire("paste",a)}function y(b){function a(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var d=function(a){b.readOnly&&"cut"==a.name||n.initPasteDataTransfer(a,b);a.data.preventDefault()};a.on("copy",
d);a.on("cut",d);a.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}a.on(n.mainPasteEvent,function(b){"beforepaste"==n.mainPasteEvent&&p||k(b)});"beforepaste"==n.mainPasteEvent&&(a.on("paste",function(a){v||(e(),a.data.preventDefault(),k(a),f("paste")||b.openDialog("paste"))}),a.on("contextmenu",g,null,null,0),a.on("beforepaste",function(b){!b.data||b.data.$.ctrlKey||b.data.$.shiftKey||g()},null,null,0));a.on("beforecut",function(){!p&&h(b)});var c;a.attachListener(CKEDITOR.env.ie?
a:b.document.getDocumentElement(),"mouseup",function(){c=setTimeout(function(){t()},0)});b.on("destroy",function(){clearTimeout(c)});a.on("keyup",t)}function c(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,exec:function(){"cut"==this.type&&h();var a;var d=this.type;if(CKEDITOR.env.ie)a=f(d);else try{a=b.document.$.execCommand(d,!1,null)}catch(c){a=!1}a||b.showNotification(b.lang.clipboard[this.type+"Error"]);return a}}}function d(){return{canUndo:!1,async:!0,exec:function(b,a){var d=function(a,
d){a&&r(b,a,!!d);b.fire("afterCommandExec",{name:"paste",command:c,returnValue:!!a})},c=this;"string"==typeof a?d({dataValue:a,method:"paste",dataTransfer:n.initPasteDataTransfer()},1):b.getClipboardData(d)}}}function e(){v=1;setTimeout(function(){v=0},100)}function g(){p=1;setTimeout(function(){p=0},10)}function f(a){var d=b.document,c=d.getBody(),e=!1,f=function(){e=!0};c.on(a,f);7<CKEDITOR.env.version?d.$.execCommand(a):d.$.selection.createRange().execCommand(a);c.removeListener(a,f);return e}
function h(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var a=b.getSelection(),d,c,e;a.getType()==CKEDITOR.SELECTION_ELEMENT&&(d=a.getSelectedElement())&&(c=a.getRanges()[0],e=b.document.createText(""),e.insertBefore(d),c.setStartBefore(e),c.setEndAfter(d),a.selectRanges([c]),setTimeout(function(){d.getParent()&&(e.remove(),a.selectElement(d))},0))}}function l(a,d){var c=b.document,e=b.editable(),f=function(b){b.cancel()},q;if(!c.getById("cke_pastebin")){var g=b.getSelection(),h=g.createBookmarks();
CKEDITOR.env.ie&&g.root.fire("selectionchange");var m=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",c);m.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var k=0,c=c.getWindow();CKEDITOR.env.webkit?(e.append(m),m.addClass("cke_editable"),e.is("body")||(k="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),k=k.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(m);m.setStyles({position:"absolute",
top:c.getScrollPosition().y-k+10+"px",width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&m.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(k=m.getParent().isReadOnly())?(m.setOpacity(0),m.setAttribute("contenteditable",!0)):m.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-1000px");b.on("selectionChange",f,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)q=e.once("blur",f,null,null,-100);
k&&m.focus();k=new CKEDITOR.dom.range(m);k.selectNodeContents(m);var t=k.select();CKEDITOR.env.ie&&(q=e.once("blur",function(){b.lockSelection(t)}));var l=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=l);q&&q.removeListener();CKEDITOR.env.ie&&e.focus();g.selectBookmarks(h);m.remove();var a;CKEDITOR.env.webkit&&(a=m.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(m=a);b.removeListener("selectionChange",f);
d(m.getHtml())},0)}}function z(){if("paste"==n.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus();e();var a=b.focusManager;a.lock();if(b.editable().fire(n.mainPasteEvent)&&!f("paste"))return a.unlock(),!1;a.unlock();return!0}function q(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable();e();"paste"==n.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),
setTimeout(function(){b.fire("saveSnapshot")},50)}}function k(a){var d={type:"auto",method:"paste",dataTransfer:n.initPasteDataTransfer(a)};d.dataTransfer.cacheData();var c=!1!==b.fire("beforePaste",d);c&&n.canClipboardApiBeTrusted(d.dataTransfer,b)?(a.data.preventDefault(),setTimeout(function(){r(b,d)},0)):l(a,function(a){d.dataValue=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");c&&r(b,d)})}function t(){if("wysiwyg"==b.mode){var a=u("paste");b.getCommand("cut").setState(u("cut"));b.getCommand("copy").setState(u("copy"));
b.getCommand("paste").setState(a);b.fire("pasteState",a)}}function u(a){if(w&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;a=b.getSelection();var d=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==d.length&&d[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var n=CKEDITOR.plugins.clipboard,p=0,v=0,w=0;(function(){b.on("key",q);b.on("contentDom",a);b.on("selectionChange",function(b){w=b.data.selection.getRanges()[0].checkReadOnly();
t()});b.contextMenu&&b.contextMenu.addListener(function(b,a){w=a.getRanges()[0].checkReadOnly();return{cut:u("cut"),copy:u("copy"),paste:u("paste")}})})();(function(){function a(d,c,e,f,q){var g=b.lang.clipboard[c];b.addCommand(c,e);b.ui.addButton&&b.ui.addButton(d,{label:g,command:c,toolbar:"clipboard,"+f});b.addMenuItems&&b.addMenuItem(c,{label:g,command:c,group:"clipboard",order:q})}a("Cut","cut",c("cut"),10,1);a("Copy","copy",c("copy"),20,4);a("Paste","paste",d(),30,8)})();b.getClipboardData=
function(a,d){function c(a){a.removeListener();a.cancel();d(a.data)}function e(a){a.removeListener();a.cancel();k=!0;d({type:g,dataValue:a.data.dataValue,dataTransfer:a.data.dataTransfer,method:"paste"})}function f(){this.customTitle=a&&a.title}var q=!1,g="auto",k=!1;d||(d=a,a=null);b.on("paste",c,null,null,0);b.on("beforePaste",function(a){a.removeListener();q=!0;g=a.data.type},null,null,1E3);!1===z()&&(b.removeListener("paste",c),q&&b.fire("pasteDialog",f)?(b.on("pasteDialogCommit",e),b.on("dialogHide",
function(a){a.removeListener();a.data.removeListener("pasteDialogCommit",e);setTimeout(function(){k||d(null)},10)})):d(null))}}function A(b){if(CKEDITOR.env.webkit){if(!b.match(/^[^<]*$/g)&&!b.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!b.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}
function B(b,a){function c(a){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",~~(a/2))+(1==a%2?"\x3cbr\x3e":"")}a=a.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");a=a.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()});if(a.match(/^[^<]$/))return a;CKEDITOR.env.webkit&&-1<a.indexOf("\x3cdiv\x3e")&&(a=a.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),a.match(/<div>(<br>|)<\/div>/)&&
(a="\x3cp\x3e"+a.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("\x3c/div\x3e\x3cdiv\x3e").length+1)})+"\x3c/p\x3e"),a=a.replace(/<\/div><div>/g,"\x3cbr\x3e"),a=a.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(a=a.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<a.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(a="\x3cp\x3e"+a.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"\x3c/p\x3e"));return C(b,a)}function D(){function b(){var a={},b;for(b in CKEDITOR.dtd)"$"!=
b.charAt(0)&&"div"!=b&&"span"!=b&&(a[b]=1);return a}var a={};return{get:function(c){return"plain-text"==c?a.plainText||(a.plainText=new CKEDITOR.filter("br")):"semantic-content"==c?((c=a.semanticContent)||(c=new CKEDITOR.filter,c.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),c=a.semanticContent=c),c):c?new CKEDITOR.filter(c):null}}}function x(b,a,c){a=CKEDITOR.htmlParser.fragment.fromHtml(a);var d=new CKEDITOR.htmlParser.basicWriter;c.applyTo(a,!0,!1,b.activeEnterMode);a.writeHtml(d);
return d.getHtml()}function C(b,a){b.enterMode==CKEDITOR.ENTER_BR?a=a.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("\x3cbr\x3e",a.length/7*2)}).replace(/<\/?p>/g,""):b.enterMode==CKEDITOR.ENTER_DIV&&(a=a.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return a}function E(b){b.data.preventDefault();b.data.$.dataTransfer.dropEffect="none"}function F(b){var a=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function c(a,d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);c.sourceEditor.fire("saveSnapshot");
c.sourceEditor.editable().extractHtmlFromRange(a);c.sourceEditor.getSelection().selectRanges([a]);c.sourceEditor.fire("saveSnapshot")}function d(d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);a.resetDragDataTransfer()}function e(a,d,c){var e={$:a.data.$,target:a.data.getTarget()};d&&(e.dragRange=d);c&&(e.dropRange=c);!1===b.fire(a.name,e)&&a.data.preventDefault()}function g(a){a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent());return a.getChildCount()}var f=b.editable(),h=CKEDITOR.plugins.clipboard.getDropTarget(b),
l=b.ui.space("top"),p=b.ui.space("bottom");a.preventDefaultDropOnElement(l);a.preventDefaultDropOnElement(p);f.attachListener(h,"dragstart",e);f.attachListener(b,"dragstart",a.resetDragDataTransfer,a,null,1);f.attachListener(b,"dragstart",function(d){a.initDragDataTransfer(d,b)},null,null,2);f.attachListener(b,"dragstart",function(){var d=a.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(a.dragStartContainerChildCount=d?g(d.startContainer):null,a.dragEndContainerChildCount=
d?g(d.endContainer):null)},null,null,100);f.attachListener(h,"dragend",e);f.attachListener(b,"dragend",a.initDragDataTransfer,a,null,1);f.attachListener(b,"dragend",a.resetDragDataTransfer,a,null,100);f.attachListener(h,"dragover",function(a){var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()});f.attachListener(h,"drop",function(d){if(!d.data.$.defaultPrevented){d.data.preventDefault();
var c=d.data.getTarget();if(!c.isReadOnly()||c.type==CKEDITOR.NODE_ELEMENT&&c.is("html")){var c=a.getRangeAtDropPosition(d,b),f=a.dragRange;c&&e(d,f,c)}}},null,null,9999);f.attachListener(b,"drop",a.initDragDataTransfer,a,null,1);f.attachListener(b,"drop",function(e){if(e=e.data){var f=e.dropRange,g=e.dragRange,h=e.dataTransfer;h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(g,f,h,b)},0):h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c(g,f,h):
d(f,h)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(b){var a,c=D();b.config.forcePasteAsPlainText?a="plain-text":b.config.pasteFilter?a=b.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in b.config||(a="semantic-content");b.pasteFilter=c.get(a);y(b);F(b);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));b.on("paste",function(a){a.data.dataTransfer||(a.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!a.data.dataValue){var c=
a.data.dataTransfer,g=c.getData("text/html");if(g)a.data.dataValue=g,a.data.type="html";else if(g=c.getData("text/plain"))a.data.dataValue=b.editable().transformPlainTextToHtml(g),a.data.type="text"}},null,null,1);b.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,
"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<b.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(b.match(/^<[^<]+cke_(editable|contents)/i)){var f,h,l=new CKEDITOR.dom.element("div");for(l.setHtml(b);1==l.getChildCount()&&(f=l.getFirst())&&f.type==CKEDITOR.NODE_ELEMENT&&(f.hasClass("cke_editable")||f.hasClass("cke_contents"));)l=h=f;
h&&(b=h.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,f){return f.toLowerCase()in c?(a.data.preSniffing="html","\x3c"+f):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,f){return f in c?(a.data.endsWithEOL=1,"\x3c/"+f+"\x3e"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1"));a.data.dataValue=b},null,null,3);b.on("paste",function(a){a=a.data;var e=a.type,g=a.dataValue,f,h=b.config.clipboard_defaultContentType||"html",
l=a.dataTransfer.getTransferType(b);f="html"==e||"html"==a.preSniffing?"html":A(g);"htmlifiedtext"==f&&(g=B(b.config,g));"text"==e&&"html"==f?g=x(b,g,c.get("plain-text")):l==CKEDITOR.DATA_TRANSFER_EXTERNAL&&b.pasteFilter&&!a.dontFilter&&(g=x(b,g,b.pasteFilter));a.startsWithEOL&&(g='\x3cbr data-cke-eol\x3d"1"\x3e'+g);a.endsWithEOL&&(g+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==e&&(e="html"==f||"html"==h?"html":"text");a.type=e;a.dataValue=g;delete a.preSniffing;delete a.startsWithEOL;delete a.endsWithEOL},
null,null,6);b.on("paste",function(a){a=a.data;a.dataValue&&(b.insertHtml(a.dataValue,a.type,a.range),setTimeout(function(){b.fire("afterPaste")},0))},null,null,1E3);b.on("pasteDialog",function(a){setTimeout(function(){b.openDialog("paste",a.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?
"beforepaste":"paste",canClipboardApiBeTrusted:function(b,a){return b.getTransferType(a)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!b.isEmpty()||CKEDITOR.env.gecko&&(b.getData("text/html")||b.getFilesCount())?!0:!1},getDropTarget:function(b){var a=b.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||a.isInline()?a:b.document},fixSplitNodesAfterDrop:function(b,a,c,d){function e(b,c,d){var e=b;e.type==CKEDITOR.NODE_TEXT&&(e=b.getParent());if(e.equals(c)&&d!=c.getChildCount())return b=
a.startContainer.getChild(a.startOffset-1),c=a.startContainer.getChild(a.startOffset),b&&b.type==CKEDITOR.NODE_TEXT&&c&&c.type==CKEDITOR.NODE_TEXT&&(d=b.getLength(),b.setText(b.getText()+c.getText()),c.remove(),a.setStart(b,d),a.collapse(!0)),!0}var g=a.startContainer;"number"==typeof d&&"number"==typeof c&&g.type==CKEDITOR.NODE_ELEMENT&&(e(b.startContainer,g,c)||e(b.endContainer,g,d))},isDropRangeAffectedByDragRange:function(b,a){var c=a.startContainer,d=a.endOffset;return b.endContainer.equals(c)&&
b.endOffset<=d||b.startContainer.getParent().equals(c)&&b.startContainer.getIndex()<d||b.endContainer.getParent().equals(c)&&b.endContainer.getIndex()<d?!0:!1},internalDrop:function(b,a,c,d){var e=CKEDITOR.plugins.clipboard,g=d.editable(),f,h;d.fire("saveSnapshot");d.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,a,e.dragStartContainerChildCount,e.dragEndContainerChildCount);(h=this.isDropRangeAffectedByDragRange(b,a))||(f=b.createBookmark(!1));
e=a.clone().createBookmark(!1);h&&(f=b.createBookmark(!1));b=f.startNode;a=f.endNode;h=e.startNode;a&&b.getPosition(h)&CKEDITOR.POSITION_PRECEDING&&a.getPosition(h)&CKEDITOR.POSITION_FOLLOWING&&h.insertBefore(b);b=d.createRange();b.moveToBookmark(f);g.extractHtmlFromRange(b,1);a=d.createRange();a.moveToBookmark(e);r(d,{dataTransfer:c,method:"drop",range:a},1);d.fire("unlockSnapshot")},getRangeAtDropPosition:function(b,a){var c=b.data.$,d=c.clientX,e=c.clientY,g=a.getSelection(!0).getRanges()[0],f=
a.createRange();if(b.data.testRange)return b.data.testRange;if(document.caretRangeFromPoint)c=a.document.$.caretRangeFromPoint(d,e),f.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),f.collapse(!0);else if(c.rangeParent)f.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),f.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&g&&a.editable().hasFocus)return g;if(document.body.createTextRange){a.focus();c=a.document.getBody().$.createTextRange();try{for(var h=!1,l=0;20>l&&
!h;l++){if(!h)try{c.moveToPoint(d,e-l),h=!0}catch(p){}if(!h)try{c.moveToPoint(d,e+l),h=!0}catch(q){}}if(h){var k="cke-temp-"+(new Date).getTime();c.pasteHTML('\x3cspan id\x3d"'+k+'"\x3e​\x3c/span\x3e');var t=a.document.getById(k);f.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);t.remove()}else{var u=a.document.$.elementFromPoint(d,e),n=new CKEDITOR.dom.element(u),r;if(n.equals(a.editable())||"html"==n.getName())return g&&g.startContainer&&!g.startContainer.equals(a.editable())?g:null;r=n.getClientRect();
d<r.left?f.setStartAt(n,CKEDITOR.POSITION_AFTER_START):f.setStartAt(n,CKEDITOR.POSITION_BEFORE_END);f.collapse(!0)}}catch(v){return null}}else return null}return f},initDragDataTransfer:function(b,a){var c=b.data.$?b.data.$.dataTransfer:null,d=new this.dataTransfer(c,a);c?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d;b.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(b,a){if(this.isCustomCopyCutSupported&&
b&&b.data&&b.data.$){var c=new this.dataTransfer(b.data.$.clipboardData,a);this.copyCutData&&c.id==this.copyCutData.id?(c=this.copyCutData,c.$=b.data.$.clipboardData):this.copyCutData=c;return c}return new this.dataTransfer(null,a)},preventDefaultDropOnElement:function(b){b&&b.on("dragover",E)}};var p=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(b,a){b&&(this.$=b);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,
fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(a){a=a.toLowerCase();return"text"==a||"text/plain"==a?"Text":"url"==a?"URL":a}};this.id=this.getData(p);this.id||(this.id="Text"==p?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=p)try{this.$.setData(p,this.id)}catch(c){}a&&(this.sourceEditor=a,this.setData("text/html",a.getSelectedHtml(1)),"Text"==p||this.getData("text/plain")||this.setData("text/plain",a.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=
1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(b){b=this._.normalizeType(b);var a=this._.data[b];if(void 0===a||null===a||""===a)try{a=this.$.getData(b)}catch(c){}if(void 0===a||null===a||""===a)a="";"text/html"==b?(a=a.replace(this._.metaRegExp,""),(b=this._.bodyRegExp.exec(a))&&b.length&&(a=b[1],a=a.replace(this._.fragmentRegExp,""))):"Text"==b&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==a.substring(0,
7)&&(a="");return a},setData:function(b,a){b=this._.normalizeType(b);this._.data[b]=a;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==b||"Text"==b){"Text"==p&&"Text"==b&&(this.id=a);try{this.$.setData(b,a)}catch(c){}}},getTransferType:function(b){return this.sourceEditor?this.sourceEditor==b?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function b(b){b=a._.normalizeType(b);var c=a.getData(b);c&&(a._.data[b]=
c)}if(this.$){var a=this,c,d;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(c=0;c<this.$.types.length;c++)b(this.$.types[c])}else b("Text"),b("URL");d=this._getImageFromClipboard();if(this.$&&this.$.files||d){this._.files=[];for(c=0;c<this.$.files.length;c++)this._.files.push(this.$.files[c]);0===this._.files.length&&d&&this._.files.push(d)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:
this._getImageFromClipboard()?1:0},getFile:function(b){return this._.files.length?this._.files[b]:this.$&&this.$.files&&this.$.files.length?this.$.files[b]:0===b?this._getImageFromClipboard():void 0},isEmpty:function(){var b={},a;if(this.getFilesCount())return!1;for(a in this._.data)b[a]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)b[this.$.types[c]]=1}else b.Text=1,b.URL=1;"Text"!=p&&(b[p]=0);for(a in b)if(b[a]&&""!==
this.getData(a))return!1;return!0},_getImageFromClipboard:function(){var b;if(this.$&&this.$.items&&this.$.items[0])try{if((b=this.$.items[0].getAsFile())&&b.type)return b}catch(a){}}}})();(function(){var c='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(c+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var c=c+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),c=c+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',
r=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),t=CKEDITOR.addTemplate("button",c);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};
CKEDITOR.ui.button.prototype={render:function(a,b){function c(){var e=a.mode;e&&(e=this.modes[e]?void 0!==k[e]?k[e]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:e,this.setState(e),this.refresh&&this.refresh())}var l=CKEDITOR.env,m=this._.id=CKEDITOR.tools.getNextId(),f="",g=this.command,n;this._.editor=a;var d={id:m,button:this,editor:a,focus:function(){CKEDITOR.document.getById(m).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},
u=CKEDITOR.tools.addFunction(function(a){if(d.onkey)return a=new CKEDITOR.dom.event(a),!1!==d.onkey(d,a.getKeystroke())}),v=CKEDITOR.tools.addFunction(function(a){var b;d.onfocus&&(b=!1!==d.onfocus(d,new CKEDITOR.dom.event(a)));return b}),p=0;d.clickFn=n=CKEDITOR.tools.addFunction(function(){p&&(a.unlockSelection(1),p=0);d.execute();l.iOS&&a.focus()});if(this.modes){var k={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(k[a.mode]=this._.state)},this);a.on("activeFilterChange",
c,this);a.on("mode",c,this);!this.readOnly&&a.on("readOnly",c,this)}else g&&(g=a.getCommand(g))&&(g.on("state",function(){this.setState(g.state)},this),f+=g.state==CKEDITOR.TRISTATE_ON?"on":g.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");if(this.directional)a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst();b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl");d.setAttribute("style",CKEDITOR.skin.getIconStyle(h,
"rtl"==b,this.icon,this.iconOffset))},this);g||(f+="off");var q=this.name||this.command,h=q;this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null);f={id:m,name:q,iconName:h,label:this.label,cls:this.className||"",state:f,ariaDisabled:"disabled"==f?"true":"false",title:this.title,titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:u,focusFn:v,clickFn:n,style:CKEDITOR.skin.getIconStyle(h,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?
r.output():""};t.output(f,b);if(this.onRender)this.onRender();return d},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?
b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b);return this._.feature=b}};CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(c){var a=this._;a.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(c),a.on?a.panel.hide():a.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){var a=c.panel||{};delete c.panel;this.base(c);this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.block={attributes:a.attributes};this.hasArrow=a.toolbarRelated=
!0;this.click=e;this._={panelDefinition:a}},statics:{handler:{create:function(c){return new CKEDITOR.ui.panelButton(c)}}},proto:{createPanel:function(c){var a=this._;if(!a.panel){var f=this._.panelDefinition,e=this._.panelDefinition.block,g=f.parent||CKEDITOR.document.getBody(),d=this._.panel=new CKEDITOR.ui.floatPanel(c,g,f),f=d.addBlock(a.id,e),b=this;d.onShow=function(){b.className&&this.element.addClass(b.className+"_panel");b.setState(CKEDITOR.TRISTATE_ON);a.on=1;b.editorFocus&&c.focus();if(b.onOpen)b.onOpen()};
d.onHide=function(d){b.className&&this.element.getFirst().removeClass(b.className+"_panel");b.setState(b.modes&&b.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.on=0;if(!d&&b.onClose)b.onClose()};d.onEscape=function(){d.hide(1);b.document.getById(a.id).focus()};if(this.onBlock)this.onBlock(d,f);f.onHide=function(){a.on=0;b.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});
CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var f=CKEDITOR.addTemplate("panel",
'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),g=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),h=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');
CKEDITOR.ui.panel.prototype={render:function(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));a.write(h.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+
b+");"},d)));a.getWindow().$.CKEDITOR=CKEDITOR;a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this);a=a.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var d={editorId:a.id,id:this.id,langCode:a.langCode,
dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";d.frame=g.output({id:this.id+"_frame",src:e})}e=f.output(d);b&&b.push(e);return e},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),
b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,d=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");b&&b.hide();this._.currentBlock=a;CKEDITOR.fire("ariaWidget",d);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.show();return a},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=
CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=
a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){var d=this.keys[a];switch(d){case "next":for(var e=this._.focusIndex,d=this.element.getElementsByTag("a"),c;c=d.getItem(++e);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}return c||
b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case "prev":e=this._.focusIndex;for(d=this.element.getElementsByTag("a");0<e&&(c=d.getItem(--e));){if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}c=null}return c||b?!1:(this._.focusIndex=d.count(),this.onKeyDown(a,1));case "click":case "mouseup":return e=this._.focusIndex,(c=0<=e&&this.element.getElementsByTag("a").getItem(e))&&(c.$[d]?c.$[d]():c.$["on"+d]()),!1}return!0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});
(function(){function v(a,b,c,l,h){h=CKEDITOR.tools.genKey(b.getUniqueId(),c.getUniqueId(),a.lang.dir,a.uiColor||"",l.css||"",h||"");var g=f[h];g||(g=f[h]=new CKEDITOR.ui.panel(b,l),g.element=c.append(CKEDITOR.dom.element.createFromHtml(g.render(a),b)),g.element.setStyles({display:"none",position:"absolute"}));return g}var f={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(a,b,c,l){function h(){e.hide()}c.forceIFrame=1;c.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&
(b=CKEDITOR.document.getById("cke_"+a.name));var g=b.getDocument();l=v(a,g,b,c,l||0);var m=l.element,p=m.getFirst(),e=this;m.disableContextMenu();this.element=m;this._={editor:a,panel:l,parentElement:b,definition:c,document:g,iframe:p,children:[],dir:a.lang.dir,showBlockParams:null};a.on("mode",h);a.on("resize",h);g.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,
b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,l,h,g){var m=this._.panel,p=m.showBlock(a);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var e=this._.editor.editable();this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var k=this.element,e=this._.iframe,e=CKEDITOR.env.ie&&!CKEDITOR.env.edge?e:new CKEDITOR.dom.window(e.$.contentWindow),f=k.getDocument(),r=this._.parentElement.getPositionedAncestor(),
t=b.getDocumentPosition(f),f=r?r.getDocumentPosition(f):{x:0,y:0},q="rtl"==this._.dir,d=t.x+(l||0)-f.x,n=t.y+(h||0)-f.y;!q||1!=c&&4!=c?q||2!=c&&3!=c||(d+=b.$.offsetWidth-1):d+=b.$.offsetWidth;if(3==c||4==c)n+=b.$.offsetHeight-1;this._.panel._.offsetParentId=b.getId();k.setStyles({top:n+"px",left:0,display:""});k.setOpacity(0);k.getFirst().removeStyle("width");this._.editor.focusManager.add(e);this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(a){function u(){delete this._.returnFocus;
this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(u,0,this)):u.call(this))},this),e.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(e.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),e.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,
this._.blurSet=1);m.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this);CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=k;a.removeStyle("width");if(p.autoSize){var b=p.element.getDocument(),b=(CKEDITOR.env.webkit?p.element:b.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3);a.setStyle("width",b+10+"px");b=p.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&
0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3);a.setStyle("height",b+"px");m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");q&&(d-=k.$.offsetWidth);k.setStyle("left",d+"px");var b=m.element.getWindow(),a=k.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,e=a.height||a.bottom-a.top,l=q?a.right:b.width-a.left,h=q?b.width-a.right:a.left;q?l<c&&(d=h>c?d+c:b.width>c?d-a.left:d-a.right+b.width):l<c&&(d=h>c?d-c:b.width>
c?d-a.right+b.width:d-a.left);c=a.top;b.height-a.top<e&&(n=c>e?n-e:b.height>e?n-a.bottom+b.height:n-a.top);CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(k.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(d=CKEDITOR.env.ie8Compat?d-2*k.getDocument().getDocumentElement().$.scrollLeft:d-(a.$.scrollWidth-a.$.clientWidth)));var a=k.getFirst(),f;(f=a.getCustomData("activePanel"))&&f.onHide&&f.onHide.call(this,1);a.setCustomData("activePanel",this);
k.setStyles({top:n+"px",left:d+"px"});k.setOpacity(1);g&&g()},this);m.isLoaded?a():m.onLoad=a;CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();p.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;
this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();
this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus)CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(a){var b=this._.panel;void 0!==a&&(b.allowBlur=a);return b.allowBlur},showAsChild:function(a,b,c,f,h,g){if(this._.activeChild!=a||a._.panel._.offsetParentId!=c.getId())this.hideChild(),a.onHide=
CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,f,h,g),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var a=CKEDITOR.tools.isEmpty(CKEDITOR.instances),
b;for(b in f){var c=f[b];a?c.destroy():c.element.hide()}a&&(f={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(c){function r(p,g,e,h){var k=new CKEDITOR.style(l["colorButton_"+g+"Style"]),m=CKEDITOR.tools.getNextId()+"_colorBox";c.ui.add(p,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+h,allowedContent:k,requiredContent:k,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":f.panelTitle}},onBlock:function(a,b){b.autoSize=!0;b.element.addClass("cke_colorblock");
b.element.setHtml(u(a,g,m));b.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var d=b.keys,e="rtl"==c.lang.dir;d[e?37:39]="next";d[40]="next";d[9]="next";d[e?39:37]="prev";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d[32]="click"},refresh:function(){c.activeFilter.check(k)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var a=c.getSelection(),a=a&&a.getStartElement(),a=c.elementPath(a),b;if(a){a=a.block||a.blockLimit||c.document.getBody();do b=
a&&a.getComputedStyle("back"==g?"background-color":"color")||"transparent";while("back"==g&&"transparent"==b&&a&&(a=a.getParent()));b&&"transparent"!=b||(b="#ffffff");this._.panel._.iframe.getFrameDocument().getById(m).setStyle("background-color",b);return b}}})}function u(p,g,e){var h=[],k=l.colorButton_colors.split(","),m=c.plugins.colordialog&&!1!==l.colorButton_enableMore,a=k.length+(m?2:1),b=CKEDITOR.tools.addFunction(function(a,b){function d(a){this.removeListener("ok",d);this.removeListener("cancel",
d);"ok"==a.name&&e(this.getContentElement("picker","selectedColor").getValue(),b)}var e=arguments.callee;if("?"==a)c.openDialog("colordialog",function(){this.on("ok",d);this.on("cancel",d)});else{c.focus();p.hide();c.fire("saveSnapshot");c.removeStyle(new CKEDITOR.style(l["colorButton_"+b+"Style"],{color:"inherit"}));if(a){var f=l["colorButton_"+b+"Style"];f.childRule="back"==b?function(a){return t(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||t(a)};c.applyStyle(new CKEDITOR.style(f,
{color:a}))}c.fire("saveSnapshot")}});h.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',f.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",null,'",g,"');return false;\" href\x3d\"javascript:void('",f.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',a,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',e,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',
f.auto,'\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(e=0;e<k.length;e++){0===e%8&&h.push("\x3c/tr\x3e\x3ctr\x3e");var d=k[e].split("/"),n=d[0],q=d[1]||n;d[1]||(n="#"+n.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));d=c.lang.colorbutton.colors[q]||q;h.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',d,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",'",n,"','",g,"'); return false;\" href\x3d\"javascript:void('",
d,'\')" role\x3d"option" aria-posinset\x3d"',e+2,'" aria-setsize\x3d"',a,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',q,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}m&&h.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',f.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",'?','",g,"');return false;\" href\x3d\"javascript:void('",f.more,"')\"",' role\x3d"option" aria-posinset\x3d"',
a,'" aria-setsize\x3d"',a,'"\x3e',f.more,"\x3c/a\x3e\x3c/td\x3e");h.push("\x3c/tr\x3e\x3c/table\x3e");return h.join("")}function t(c){return"false"==c.getAttribute("contentEditable")||c.getAttribute("data-nostyle")}var l=c.config,f=c.lang.colorbutton;CKEDITOR.env.hc||(r("TextColor","fore",f.textColorTitle,10),r("BGColor","back",f.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";
CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(b){var c=new CKEDITOR.dialogCommand("colordialog");c.editorFocus=!1;b.addCommand("colordialog",c);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");b.getColorFromDialog=function(c,f){var d=function(a){this.removeListener("ok",d);this.removeListener("cancel",d);a="ok"==a.name?this.getValueOf("picker","selectedColor"):null;c.call(f,a)},e=function(a){a.on("ok",d);a.on("cancel",d)};b.execCommand("colordialog");if(b._.storedDialogs&&
b._.storedDialogs.colordialog)e(b._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener();b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){e(this);b.onLoad=a;"function"==typeof a&&a.call(this)}})}})}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));a.addCommand("templates",new CKEDITOR.dialogCommand("templates"));a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var c={},f={};CKEDITOR.addTemplates=function(a,d){c[a]=d};CKEDITOR.getTemplates=function(a){return c[a]};CKEDITOR.loadTemplates=function(a,d){for(var e=
[],b=0,c=a.length;b<c;b++)f[a[b]]||(e.push(a[b]),f[a[b]]=1);e.length?CKEDITOR.scriptLoader.load(e,d):setTimeout(d,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(g){for(var h=g.config.menu_groups.split(","),p=g._.menuGroups={},n=g._.menuItems={},a=0;a<h.length;a++)p[h[a]]=a+1;g.addMenuGroup=function(b,a){p[b]=a||100};g.addMenuItem=function(a,c){p[c.group]&&(n[a]=new CKEDITOR.menuItem(this,a,c))};g.addMenuItems=function(a){for(var c in a)this.addMenuItem(c,a[c])};g.getMenuItem=function(a){return n[a]};g.removeMenuItem=function(a){delete n[a]}}});
(function(){function g(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}var h='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(h+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(h+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var h=h+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),p=CKEDITOR.addTemplate("menuItem",h+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),
n=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),m=c.block.attributes=c.attributes||{};!m.role&&(m.role="menu");this._.panelDefinition=
c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),m=this._.listeners;this.removeAll();for(var e=0;e<m.length;e++){var l=m[e](b,a,c);if(l)for(var k in l){var f=this.editor.getMenuItem(k);!f||f.command&&!this.editor.getCommand(f.command).state||(f.state=l[k],this.add(f))}}},onClick:function(a){this.hide();if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;b?b._.panel.hideChild(1):
27==a&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var m in c){var e=this.editor.getMenuItem(m);e&&(e.state=c[m],b.add(e))}var l=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+
String(a));setTimeout(function(){b.show(l,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length);this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,b,c,m){if(!this.parent&&(this._.onShow(),!this.items.length))return;b=b||("rtl"==this.editor.lang.dir?2:1);var e=this.items,l=this.editor,k=this._.panel,f=this._.element;if(!k){k=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);
k.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this);k.onShow=function(){k._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};k.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);f=k.addBlock(this.id,this._.panelDefinition.block);f.autoSize=!0;var d=f.keys;d[40]="next";d[9]="next";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d["rtl"==l.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";d[32]=CKEDITOR.env.ie?"mouseup":
"click";CKEDITOR.env.ie&&(d[13]="mouseup");f=this._.element=f.element;d=f.getDocument();d.getBody().setStyle("overflow","hidden");d.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,l.config.menu_subMenuDelay||400,this,[a])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);
this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b)},this)}g(e);for(var d=l.elementPath(),d=['\x3cdiv class\x3d"cke_menu'+(d&&d.direction()!=l.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],h=e.length,p=h&&e[0].group,n=0;n<h;n++){var q=e[n];p!=q.group&&(d.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),
p=q.group);q.render(this,n,d)}d.push("\x3c/div\x3e");f.setHtml(d.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(k,this.id,a,b,c,m):k.showBlock(this.id,a,b,c,m);l.fire("menuShow",[k])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b});this.group=
a._.menuGroups[this.group];this.editor=a;this.name=b},proto:{render:function(a,b,c){var h=a.id+String(b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,l="",k=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(l=' aria-checked\x3d"'+(e==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,d="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=
this.icon);a={id:h,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:k,hasPopup:f?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?n.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:l};
p.output(a,c)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){a.on("contextmenu",function(a){a=a.data;var c=CKEDITOR.env.webkit?f:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!c){a.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,
b=(new CKEDITOR.dom.elementPath(a.getTarget(),c.editable())).contains(function(a){return a.hasAttribute("contenteditable")},!0);b&&"false"==b.getAttribute("contenteditable")&&c.getSelection().fake(b)}var b=a.getTarget().getDocument(),d=a.getTarget().getDocument().getDocumentElement(),c=!b.equals(CKEDITOR.document),b=b.getWindow().getScrollPosition(),g=c?a.$.clientX:a.$.pageX||b.x+a.$.clientX,h=c?a.$.clientY:a.$.pageY||b.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(d,null,g,h)},CKEDITOR.env.ie?
200:0,this)}},this);if(CKEDITOR.env.webkit){var f,d=function(){f=0};a.on("keydown",function(a){f=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey});a.on("keyup",d);a.on("contextmenu",d)}},open:function(a,e,f,d){this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(a,e,f,d)}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)});
a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(a){if(!a.blockless){var c=a.lang.div,b="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(b+=";div[dir,id,lang,title]{*}");a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:b,requiredContent:"div",contextSensitive:!0,refresh:function(a,c){this.setState("div"in(a.config.div_wrapTable?c.root:c.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));a.addCommand("editdiv",
new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));a.addCommand("removediv",{requiredContent:"div",exec:function(a){function c(b){(b=CKEDITOR.plugins.div.getSurroundDiv(a,b))&&!b.data("cke-div-added")&&(f.push(b),b.data("cke-div-added"))}for(var b=a.getSelection(),g=b&&b.getRanges(),e,h=b.createBookmarks(),f=[],d=0;d<g.length;d++)e=g[d],e.collapsed?c(b.getStartElement()):(e=new CKEDITOR.dom.walker(e),e.evaluator=c,e.lastForward());for(d=0;d<f.length;d++)f[d].remove(!0);b.selectBookmarks(h)}});
a.ui.addButton&&a.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv",toolbar:"blocks,50"});a.addMenuItems&&(a.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){return!b||b.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+
"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(a,c){var b=a.elementPath(c);return a.elementPath(b.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(b){function f(d){var e=c.width,m=c.height,f=e+(d.data.$.screenX-n.x)*("rtl"==g?-1:1);d=m+(d.data.$.screenY-n.y);h&&(e=Math.max(a.resize_minWidth,Math.min(f,a.resize_maxWidth)));p&&(m=Math.max(a.resize_minHeight,Math.min(d,a.resize_maxHeight)));b.resize(h?e:null,m)}function k(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",k);b.document&&(b.document.removeListener("mousemove",f),b.document.removeListener("mouseup",
k))}var a=b.config,r=b.ui.spaceId("resizer"),g=b.element?b.element.getDirection(1):"ltr";!a.resize_dir&&(a.resize_dir="vertical");void 0===a.resize_maxWidth&&(a.resize_maxWidth=3E3);void 0===a.resize_maxHeight&&(a.resize_maxHeight=3E3);void 0===a.resize_minWidth&&(a.resize_minWidth=750);void 0===a.resize_minHeight&&(a.resize_minHeight=250);if(!1!==a.resize_enabled){var l=null,n,c,h=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,p=("both"==a.resize_dir||"vertical"==
a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,q=CKEDITOR.tools.addFunction(function(d){l||(l=b.getResizable());c={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0};n={x:d.screenX,y:d.screenY};a.resize_minWidth>c.width&&(a.resize_minWidth=c.width);a.resize_minHeight>c.height&&(a.resize_minHeight=c.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",k);b.document&&(b.document.on("mousemove",f),b.document.on("mouseup",k));d.preventDefault&&d.preventDefault()});b.on("destroy",
function(){CKEDITOR.tools.removeFunction(q)});b.on("uiSpace",function(a){if("bottom"==a.data.space){var e="";h&&!p&&(e=" cke_resizer_horizontal");!h&&p&&(e=" cke_resizer_vertical");var c='\x3cspan id\x3d"'+r+'" class\x3d"cke_resizer'+e+" cke_resizer_"+g+'" title\x3d"'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+q+', event)"\x3e'+("ltr"==g?"◢":"◣")+"\x3c/span\x3e";"ltr"==g&&"ltr"==e?a.data.html+=c:a.data.html=c+a.data.html}},b,null,100);b.on("maximize",
function(a){b.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function B(a){function d(){for(var b=g(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||q(a),f=0;f<e.length;f++){var l=e[f];if("/"!=l){"string"==typeof l&&(l=e[f]={name:l});var m,d=l.groups;if(d)for(var h=0;h<d.length;h++)m=d[h],(m=b[m])&&c(l,m);(m=b[l.name])&&c(l,m)}}return e}function g(){var b={},c,f,e;for(c in a.ui.items)f=a.ui.items[c],e=f.toolbar||"others",e=e.split(","),f=e[0],e=parseInt(e[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:c,order:e});for(f in b)b[f]=b[f].sort(function(b,
a){return b.order==a.order?0:0>a.order?-1:0>b.order?1:b.order<a.order?-1:1});return b}function c(c,e){if(e.length){c.items?c.items.push(a.ui.create("-")):c.items=[];for(var f;f=e.shift();)f="string"==typeof f?f:f.name,b&&-1!=CKEDITOR.tools.indexOf(b,f)||(f=a.ui.create(f))&&a.addFeature(f)&&c.items.push(f)}}function h(b){var a=[],e,d,h;for(e=0;e<b.length;++e)d=b[e],h={},"/"==d?a.push(d):CKEDITOR.tools.isArray(d)?(c(h,CKEDITOR.tools.clone(d)),a.push(h)):d.items&&(c(h,CKEDITOR.tools.clone(d.items)),
h.name=d.name,a.push(h));return a}var b=a.config.removeButtons,b=b&&b.split(","),e=a.config.toolbar;"string"==typeof e&&(e=a.config["toolbar_"+e]);return a.toolbar=e?h(e):d()}function q(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list",
"indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var y=function(){this.toolbars=[];this.focusCommandExecuted=!1};y.prototype.focus=function(){for(var a=0,d;d=this.toolbars[a++];)for(var g=0,c;c=d.items[g++];)if(c.focus){c.focus();return}};var C={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},
100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var d,g=function(c,h){var b,e="rtl"==a.lang.dir,k=a.config.toolbarGroupCycling,r=e?37:39,e=e?39:37,k=void 0===k||k;switch(h){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;)if(b=9==h?(b?b.next:c.toolbar.next)||a.toolbox.toolbars[0]:(b?b.previous:c.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],b.items.length)for(c=b.items[d?b.items.length-1:0];c&&!c.focus;)(c=d?c.previous:c.next)||
(b=0);c&&c.focus();return!1;case r:b=c;do b=b.next,!b&&k&&(b=c.toolbar.items[0]);while(b&&!b.focus);b?b.focus():g(c,9);return!1;case 40:return c.button&&c.button.hasArrow?(a.once("panelShow",function(b){b.data._.panel._.currentBlock.onKeyDown(40)}),c.execute()):g(c,40==h?r:e),!1;case e:case 38:b=c;do b=b.previous,!b&&k&&(b=c.toolbar.items[c.toolbar.items.length-1]);while(b&&!b.focus);b?b.focus():(d=1,g(c,CKEDITOR.SHIFT+9),d=0);return!1;case 27:return a.focus(),!1;case 13:case 32:return c.execute(),
!1}return!0};a.on("uiSpace",function(c){if(c.data.space==a.config.toolbarLocation){c.removeListener();a.toolbox=new y;var d=CKEDITOR.tools.getNextId(),b=['\x3cspan id\x3d"',d,'" class\x3d"cke_voice_label"\x3e',a.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+a.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',d,'" onmousedown\x3d"return false;"\x3e'],d=!1!==a.config.toolbarStartupExpanded,e,k;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&
b.push('\x3cspan class\x3d"cke_toolbox_main"'+(d?"\x3e":' style\x3d"display:none"\x3e'));for(var r=a.toolbox.toolbars,f=B(a),l=0;l<f.length;l++){var m,n=0,v,p=f[l],w;if(p)if(e&&(b.push("\x3c/span\x3e"),k=e=0),"/"===p)b.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e');else{w=p.items||p;for(var x=0;x<w.length;x++){var t=w[x],q;if(t){var z=function(c){c=c.render(a,b);u=n.items.push(c)-1;0<u&&(c.previous=n.items[u-1],c.previous.next=c);c.toolbar=n;c.onkey=g;c.onfocus=function(){a.toolbox.focusCommandExecuted||
a.focus()}};if(t.type==CKEDITOR.UI_SEPARATOR)k=e&&t;else{q=!1!==t.canGroup;if(!n){m=CKEDITOR.tools.getNextId();n={id:m,items:[]};v=p.name&&(a.lang.toolbar.toolbarGroups[p.name]||p.name);b.push('\x3cspan id\x3d"',m,'" class\x3d"cke_toolbar"',v?' aria-labelledby\x3d"'+m+'_label"':"",' role\x3d"toolbar"\x3e');v&&b.push('\x3cspan id\x3d"',m,'_label" class\x3d"cke_voice_label"\x3e',v,"\x3c/span\x3e");b.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var u=r.push(n)-1;0<u&&(n.previous=r[u-
1],n.previous.next=n)}q?e||(b.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),e=1):e&&(b.push("\x3c/span\x3e"),e=0);k&&(z(k),k=0);z(t)}}}e&&(b.push("\x3c/span\x3e"),k=e=0);n&&b.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}a.config.toolbarCanCollapse&&b.push("\x3c/span\x3e");if(a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var A=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(A)});
a.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var a=b.ui.space("toolbar_collapser"),c=a.getPrevious(),e=b.ui.space("contents"),d=c.getParent(),f=parseInt(e.$.style.height,10),h=d.$.offsetHeight,g=a.hasClass("cke_toolbox_collapser_min");g?(c.show(),a.removeClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarCollapse)):(c.hide(),a.addClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarExpand));a.getFirst().setText(g?"▲":"◀");e.setStyle("height",
f-(d.$.offsetHeight-h)+"px");b.fire("resize",{outerHeight:b.container.$.offsetHeight,contentsHeight:e.$.offsetHeight,outerWidth:b.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");b.push('\x3ca title\x3d"'+(d?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id\x3d"'+a.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');d||b.push(" cke_toolbox_collapser_min");
b.push('" onclick\x3d"CKEDITOR.tools.callFunction('+A+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}b.push("\x3c/span\x3e");c.data.html+=b.join("")}});a.on("destroy",function(){if(this.toolbox){var a,d=0,b,e,g;for(a=this.toolbox.toolbars;d<a.length;d++)for(e=a[d].items,b=0;b<e.length;b++)g=e[b],g.clickFn&&CKEDITOR.tools.removeFunction(g.clickFn),g.keyDownFn&&CKEDITOR.tools.removeFunction(g.keyDownFn)}});a.on("uiReady",function(){var c=a.ui.space("toolbox");c&&a.focusManager.add(c,
1)});a.addCommand("toolbarFocus",C);a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");a.ui.add("-",CKEDITOR.UI_SEPARATOR,{});a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,d){d.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(a,d,g){var c=q(this.editor),h=0===d,b={name:a};if(g){if(g=CKEDITOR.tools.search(c,function(a){return a.name==g})){!g.groups&&(g.groups=[]);if(d&&
(d=CKEDITOR.tools.indexOf(g.groups,d),0<=d)){g.groups.splice(d+1,0,a);return}h?g.groups.splice(0,0,a):g.groups.push(a);return}d=null}d&&(d=CKEDITOR.tools.indexOf(c,function(a){return a.name==d}));h?c.splice(0,0,a):"number"==typeof d?c.splice(d+1,0,b):c.push(a)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function q(a,d){function l(c){c=k.list[c];if(c.equals(a.editable())||"true"==c.getAttribute("contenteditable")){var e=a.createRange();e.selectNodeContents(c);e.select()}else a.getSelection().selectElement(c);a.focus()}function m(){n&&n.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete k.list}var p=a.ui.spaceId("path"),n,k=a._.elementsPath,q=k.idBase;d.html+='\x3cspan id\x3d"'+p+'_label" class\x3d"cke_voice_label"\x3e'+a.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+
p+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+p+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';a.on("uiReady",function(){var c=a.ui.space("path");c&&a.focusManager.add(c,1)});k.onClick=l;var v=CKEDITOR.tools.addFunction(l),w=CKEDITOR.tools.addFunction(function(c,e){var g=k.idBase,b;e=new CKEDITOR.dom.event(e);b="rtl"==a.lang.dir;switch(e.getKeystroke()){case b?39:37:case 9:return(b=CKEDITOR.document.getById(g+(c+1)))||(b=CKEDITOR.document.getById(g+
"0")),b.focus(),!1;case b?37:39:case CKEDITOR.SHIFT+9:return(b=CKEDITOR.document.getById(g+(c-1)))||(b=CKEDITOR.document.getById(g+(k.list.length-1))),b.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return l(c),!1}return!0});a.on("selectionChange",function(){for(var c=[],e=k.list=[],g=[],b=k.filters,d=!0,l=a.elementPath().elements,f,u=l.length;u--;){var h=l[u],r=0;f=h.data("cke-display-name")?h.data("cke-display-name"):h.data("cke-real-element-type")?h.data("cke-real-element-type"):h.getName();
(d=h.hasAttribute("contenteditable")?"true"==h.getAttribute("contenteditable"):d)||h.hasAttribute("contenteditable")||(r=1);for(var t=0;t<b.length;t++){var m=b[t](h,f);if(!1===m){r=1;break}f=m||f}r||(e.unshift(h),g.unshift(f))}e=e.length;for(b=0;b<e;b++)f=g[b],d=a.lang.elementspath.eleTitle.replace(/%1/,f),f=x.output({id:q+b,label:d,text:f,jsTitle:"javascript:void('"+f+"')",index:b,keyDownFn:w,clickFn:v}),c.unshift(f);n||(n=CKEDITOR.document.getById(p));g=n;g.setHtml(c.join("")+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');
a.fire("elementsPathUpdate",{space:g})});a.on("readOnly",m);a.on("contentDomUnload",m);a.addCommand("elementsPathFocus",y.toolbarFocus);a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var y={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},d="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var x=CKEDITOR.addTemplate("pathItem",'\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+d+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+
"_",filters:[]};a.on("uiSpace",function(d){"bottom"==d.data.space&&q(a,d.data)})}})})();(function(){function q(b,d,a){a=b.config.forceEnterMode||a;"wysiwyg"==b.mode&&(d||(d=b.activeEnterMode),b.elementPath().isContextFor("p")||(d=CKEDITOR.ENTER_BR,a=1),b.fire("saveSnapshot"),d==CKEDITOR.ENTER_BR?t(b,d,null,a):u(b,d,null,a),b.fire("saveSnapshot"))}function v(b){b=b.getSelection().getRanges(!0);for(var d=b.length-1;0<d;d--)b[d].deleteContents();return b[0]}function y(b){var d=b.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},
!0);if(b.root.equals(d))return b;d=new CKEDITOR.dom.range(d);d.moveToRange(b);return d}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b)}});b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b,b.activeShiftEnterMode,1)}});b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var z=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(b,
d,a,h){if(a=a||v(b)){a=y(a);var f=a.document,k=a.checkStartOfBlock(),m=a.checkEndOfBlock(),l=b.elementPath(a.startContainer),c=l.block,n=d==CKEDITOR.ENTER_DIV?"div":"p",e;if(k&&m){if(c&&(c.is("li")||c.getParent().is("li"))){c.is("li")||(c=c.getParent());a=c.getParent();e=a.getParent();h=!c.hasPrevious();var p=!c.hasNext(),n=b.getSelection(),g=n.createBookmarks(),k=c.getDirection(1),m=c.getAttribute("class"),r=c.getAttribute("style"),q=e.getDirection(1)!=k;b=b.enterMode!=CKEDITOR.ENTER_BR||q||r||m;
if(e.is("li"))h||p?(h&&p&&a.remove(),c[p?"insertAfter":"insertBefore"](e)):c.breakParent(e);else{if(b)if(l.block.is("li")?(e=f.createElement(d==CKEDITOR.ENTER_P?"p":"div"),q&&e.setAttribute("dir",k),r&&e.setAttribute("style",r),m&&e.setAttribute("class",m),c.moveChildren(e)):e=l.block,h||p)e[h?"insertBefore":"insertAfter"](a);else c.breakParent(a),e.insertAfter(a);else if(c.appendBogus(!0),h||p)for(;f=c[h?"getFirst":"getLast"]();)f[h?"insertBefore":"insertAfter"](a);else for(c.breakParent(a);f=c.getLast();)f.insertAfter(a);
c.remove()}n.selectBookmarks(g);return}if(c&&c.getParent().is("blockquote")){c.breakParent(c.getParent());c.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getPrevious().remove();c.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getNext().remove();a.moveToElementEditStart(c);a.select();return}}else if(c&&c.is("pre")&&!m){t(b,d,a,h);return}if(k=a.splitBlock(n)){d=k.previousBlock;c=k.nextBlock;l=k.wasStartOfBlock;b=k.wasEndOfBlock;c?(g=c.getParent(),g.is("li")&&(c.breakParent(g),
c.move(c.getNext(),1))):d&&(g=d.getParent())&&g.is("li")&&(d.breakParent(g),g=d.getNext(),a.moveToElementEditStart(g),d.move(d.getPrevious()));if(l||b){if(d){if(d.is("li")||!w.test(d.getName())&&!d.is("pre"))e=d.clone()}else c&&(e=c.clone());e?h&&!e.is("li")&&e.renameNode(n):g&&g.is("li")?e=g:(e=f.createElement(n),d&&(p=d.getDirection())&&e.setAttribute("dir",p));if(f=k.elementPath)for(h=0,n=f.elements.length;h<n;h++){g=f.elements[h];if(g.equals(f.block)||g.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[g.getName()]&&
(g=g.clone(),e.moveChildren(g),e.append(g))}e.appendBogus();e.getParent()||a.insertNode(e);e.is("li")&&e.removeAttribute("value");!CKEDITOR.env.ie||!l||b&&d.getChildCount()||(a.moveToElementEditStart(b?d:e),a.select());a.moveToElementEditStart(l&&!b?c:e)}else c.is("li")&&(e=a.clone(),e.selectNodeContents(c),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return!(A(a)||z(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(g=e.next())&&
g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?f.createElement("br"):f.createText(" ")).insertBefore(g)),c&&a.moveToElementEditStart(c);a.select();a.scrollIntoView()}}},enterBr:function(b,d,a,h){if(a=a||v(b)){var f=a.document,k=a.checkEndOfBlock(),m=new CKEDITOR.dom.elementPath(b.getSelection().getStartElement()),l=m.block,c=l&&m.block.getName();h||"li"!=c?(!h&&k&&w.test(c)?(k=l.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",k),f.insertAfter(l),a.setStart(f,
0)):(f.createElement("br").insertAfter(l),CKEDITOR.env.gecko&&f.createText("").insertAfter(l),a.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(b="pre"==c&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?f.createText("\r"):f.createElement("br"),a.deleteContents(),a.insertNode(b),CKEDITOR.env.needsBrFiller?(f.createText("﻿").insertAfter(b),k&&(l||m.blockLimit).appendBogus(),b.getNext().$.nodeValue="",a.setStartAt(b.getNext(),CKEDITOR.POSITION_AFTER_START)):
a.setStartAt(b,CKEDITOR.POSITION_AFTER_END)),a.collapse(!0),a.select(),a.scrollIntoView()):u(b,d,a,h)}}};var x=CKEDITOR.plugins.enterkey,t=x.enterBr,u=x.enterBlock,w=/^h[1-6]$/})();(function(){function k(b,f){var g={},c=[],e={nbsp:" ",shy:"­",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};b=b.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(b,a){var d=f?"\x26"+a+";":e[a];g[d]=f?e[a]:"\x26"+a+";";c.push(d);return""});if(!f&&b){b=b.split(",");var a=document.createElement("div"),d;a.innerHTML="\x26"+b.join(";\x26")+";";d=a.innerHTML;a=null;for(a=0;a<d.length;a++){var h=d.charAt(a);g[h]="\x26"+b[a]+";";c.push(h)}}g.regex=c.join(f?"|":"");return g}CKEDITOR.plugins.add("entities",
{afterInit:function(b){function f(a){return h[a]}function g(b){return"force"!=c.entities_processNumerical&&a[b]?a[b]:"\x26#"+b.charCodeAt(0)+";"}var c=b.config;if(b=(b=b.dataProcessor)&&b.htmlFilter){var e=[];!1!==c.basicEntities&&e.push("nbsp,gt,lt,amp");c.entities&&(e.length&&e.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),
c.entities_latin&&e.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),c.entities_greek&&e.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),
c.entities_additional&&e.push(c.entities_additional));var a=k(e.join(",")),d=a.regex?"["+a.regex+"]":"a^";delete a.regex;c.entities&&c.entities_processNumerical&&(d="[^ -~]|"+d);var d=new RegExp(d,"g"),h=k("nbsp,gt,lt,amp,shy",!0),l=new RegExp(h.regex,"g");b.addRules({text:function(a){return a.replace(l,f).replace(d,g)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;
CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,a,b,d){a=a||"80%";b=b||"70%";"string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10));"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10));640>a&&(a=640);420>b&&(b=420);var f=parseInt((window.screen.height-b)/2,10),g=parseInt((window.screen.width-a)/2,10);d=(d||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+
a+",height\x3d"+b+",top\x3d"+f+",left\x3d"+g;var c=window.open("",null,d,!0);if(!c)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(c.moveTo(g,f),c.resizeTo(a,b)),c.focus(),c.location.href=e}catch(h){window.open(e,null,d,!0)}return!0}});(function(){function g(a,c){var d=[];if(c)for(var b in c)d.push(b+"\x3d"+encodeURIComponent(c[b]));else return a;return a+(-1!=a.indexOf("?")?"\x26":"?")+d.join("\x26")}function k(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1)}function m(){var a=this.getDialog(),c=a.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+k(a.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",a=c.config["filebrowser"+k(a.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||
"70%",b=this.filebrowser.params||{};b.CKEditor=c.name;b.CKEditorFuncNum=c._.filebrowserFn;b.langCode||(b.langCode=c.langCode);b=g(this.filebrowser.url,b);c.popup(b,d,a,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function n(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function p(a,c,d){var b=d.params||
{};b.CKEditor=a.name;b.CKEditorFuncNum=a._.filebrowserFn;b.langCode||(b.langCode=a.langCode);c.action=g(d.url,b);c.filebrowser=d}function l(a,c,d,b){if(b&&b.length)for(var e,g=b.length;g--;)if(e=b[g],"hbox"!=e.type&&"vbox"!=e.type&&"fieldset"!=e.type||l(a,c,d,e.children),e.filebrowser)if("string"==typeof e.filebrowser&&(e.filebrowser={action:"fileButton"==e.type?"QuickUpload":"Browse",target:e.filebrowser}),"Browse"==e.filebrowser.action){var f=e.filebrowser.url;void 0===f&&(f=a.config["filebrowser"+
k(c)+"BrowseUrl"],void 0===f&&(f=a.config.filebrowserBrowseUrl));f&&(e.onClick=m,e.filebrowser.url=f,e.hidden=!1)}else if("QuickUpload"==e.filebrowser.action&&e["for"]&&(f=e.filebrowser.url,void 0===f&&(f=a.config["filebrowser"+k(c)+"UploadUrl"],void 0===f&&(f=a.config.filebrowserUploadUrl)),f)){var h=e.onClick;e.onClick=function(a){var b=a.sender;if(h&&!1===h.call(b,a))return!1;if(n.call(b,a)){a=b.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(b=new CKEDITOR.dom.element(a.$.form))(a=
b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):(a=new CKEDITOR.dom.element("input"),a.setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken());return!0}return!1};e.filebrowser.url=f;e.hidden=!1;p(a,d.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser)}}function h(a,c,d){if(-1!==d.indexOf(";")){d=d.split(";");for(var b=0;b<d.length;b++)if(h(a,c,d[b]))return!0;return!1}return(a=a.getContents(c).get(d).filebrowser)&&a.url}function q(a,
c){var d=this._.filebrowserSe.getDialog(),b=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;b&&d.getContentElement(b[0],b[1]).reset();if("function"!=typeof c||!1!==c.call(this._.filebrowserSe))if(!e||!1!==e.call(this._.filebrowserSe,a,c))if("string"==typeof c&&c&&alert(c),a&&(b=this._.filebrowserSe,d=b.getDialog(),b=b.filebrowser.target||null))if(b=b.split(":"),e=d.getContentElement(b[0],b[1]))e.setValue(a),d.selectPage(b[0])}CKEDITOR.plugins.add("filebrowser",{requires:"popup",
init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(q,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var c=a.data.definition,d,b=0;b<c.contents.length;++b)if(d=c.contents[b])l(a.editor,a.data.name,c,d.elements),d.hidden&&d.filebrowser&&(d.hidden=!h(c,d.id,d.filebrowser))})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(a){var b=a.addCommand("find",new CKEDITOR.dialogCommand("find"));b.canUndo=!1;b.readOnly=1;a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+
"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function g(a,b){var c=l.exec(a),d=l.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px"}return b}var k=CKEDITOR.htmlParser.cssStyle,h=CKEDITOR.tools.cssLength,l=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,m={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=(new k(a)).rules;a=b.attributes;var d=c.width,
c=c.height;d&&(a.width=g(a.width,d));c&&(a.height=g(a.height,c))}return b}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(m,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown;b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,
alt:e,title:e,align:a.getAttribute("align")||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,c=new k,d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(c.rules.width=h(d)),a&&(c.rules.height=h(a)),c.populate(b));return this.document.createElement("img",{attributes:b})};CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,f;f=new CKEDITOR.htmlParser.basicWriter;
a.writeHtml(f);f=f.getHtml();b={"class":b,"data-cke-realelement":encodeURIComponent(f),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.attributes.align||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,d=a.attributes,a=new k,c=d.width,d=d.height,void 0!==c&&(a.rules.width=h(c)),void 0!==d&&(a.rules.height=h(d)),a.populate(b));return new CKEDITOR.htmlParser.element("img",b)};CKEDITOR.editor.prototype.restoreRealElement=
function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width");a=a.getStyle("height");c&&b.setAttribute("width",g(b.getAttribute("width"),c));a&&b.setAttribute("height",g(b.getAttribute("height"),a))}return b}})();(function(){function d(a){a=a.attributes;return"application/x-shockwave-flash"==a.type||f.test(a.src||"")}function e(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var f=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},
init:function(a){var b="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(b+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(b+=";object[id]{*}; embed[bgcolor]{*}(*)");a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:b,requiredContent:"embed"}));a.ui.addButton&&a.ui.addButton("Flash",
{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash")});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},
afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{"cke:object":function(b){var c=b.attributes;if(!(c.classid&&String(c.classid).toLowerCase()||d(b))){for(c=0;c<b.children.length;c++)if("cke:embed"==b.children[c].name){if(!d(b.children[c]))break;return e(a,b)}return null}return e(a,b)},"cke:embed":function(b){return d(b)?e(a,b):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function k(a){var l=a.config,p=a.fire("uiSpace",{space:"top",html:""}).html,t=function(){function f(a,c,e){b.setStyle(c,w(e));b.setStyle("position",a)}function e(a){var b=k.getDocumentPosition();switch(a){case "top":f("absolute","top",b.y-q-r);break;case "pin":f("fixed","top",x);break;case "bottom":f("absolute","top",b.y+(c.height||c.bottom-c.top)+r)}m=a}var m,k,n,c,h,q,v,p=l.floatSpaceDockedOffsetX||0,r=l.floatSpaceDockedOffsetY||0,u=l.floatSpacePinnedOffsetX||0,x=l.floatSpacePinnedOffsetY||
0;return function(d){if(k=a.editable()){var f=d&&"focus"==d.name;f&&b.show();a.fire("floatingSpaceLayout",{show:f});b.removeStyle("left");b.removeStyle("right");n=b.getClientRect();c=k.getClientRect();h=g.getViewPaneSize();q=n.height;v="pageXOffset"in g.$?g.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;m?(q+r<=c.top?e("top"):q+r>h.height-c.bottom?e("pin"):e("bottom"),d=h.width/2,d=l.floatSpacePreferRight?"right":0<c.left&&c.right<h.width&&c.width>n.width?"rtl"==l.contentsLangDirection?
"right":"left":d-c.left>c.right-d?"left":"right",n.width>h.width?(d="left",f=0):(f="left"==d?0<c.left?c.left:0:c.right<h.width?h.width-c.right:0,f+n.width>h.width&&(d="left"==d?"right":"left",f=0)),b.setStyle(d,w(("pin"==m?u:p)+f+("pin"==m?0:"left"==d?v:-v)))):(m="pin",e("pin"),t(d))}}}();if(p){var k=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?
" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),b=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:p,id:a.id,langDir:a.lang.dir,
langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(l.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),u=CKEDITOR.tools.eventsBuffer(500,t),e=CKEDITOR.tools.eventsBuffer(100,t);b.unselectable();b.on("mousedown",function(a){a=a.data;a.getTarget().hasAscendant("a",1)||a.preventDefault()});a.on("focus",function(b){t(b);a.on("change",u.input);g.on("scroll",e.input);g.on("resize",e.input)});a.on("blur",function(){b.hide();a.removeListener("change",u.input);g.removeListener("scroll",
e.input);g.removeListener("resize",e.input)});a.on("destroy",function(){g.removeListener("scroll",e.input);g.removeListener("resize",e.input);b.clearCustomData();b.remove()});a.focusManager.hasFocus&&b.show();a.focusManager.add(b,1)}}var g=CKEDITOR.document.getWindow(),w=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){k(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var f=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),g=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),
h=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),k=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0);!c.role&&
(c.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",c.role);c=this.keys;c[40]="next";c[9]="next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(c[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var a=f.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(a);delete this._.started}},getClick:function(){this._.click||
(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);if(this.onClick)this.onClick(a,b)},this));return this._.click}},proto:{add:function(a,b,c){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[a]=d;var e;e=CKEDITOR.tools.htmlEncodeAttr(a).replace(k,"\\'");a={id:d,val:e,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(c||a),text:b||a};
this._.pendingList.push(g.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push(h.output({id:b,label:a}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display",
"none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),d;for(d in a)c.getById(a[d]).setStyle("display","");for(var e in b)a=c.getById(b[e]),d=a.getNext(),a.setStyle("display",""),d&&"ul"==d.getName()&&d.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);
b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var c=b.getById(a);c.removeClass("cke_selected");b.getById(a+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var a=this._.items,b=this.element.getDocument(),c;for(c in a){var d=a[c];b.getById(d).removeClass("cke_selected");b.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&
this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var b=this.element.getElementsByTag("a"),c,d=-1;if(a)for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++d);){if(a.equals(c)){this._.focusIndex=d;break}}else this.element.focus();c&&setTimeout(function(){c.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});
(function(){var d='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var d=d+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+
(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),k=CKEDITOR.addTemplate("combo",d);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";
a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){function g(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var c=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(c=CKEDITOR.TRISTATE_DISABLED);this.setState(c);this.setValue("");c!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var d=
CKEDITOR.env,h="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(b){l&&(a.unlockSelection(1),l=0);c.execute(b)},this),f=this,c={id:h,combo:this,focus:function(){CKEDITOR.document.getById(h).getChild(1).focus()},execute:function(c){var b=f._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(f.createPanel(a),b.on)b.panel.hide();else{f.commit();var d=f.getValue();d?b.list.mark(d):b.list.unmarkAll();b.panel.showBlock(f.id,new CKEDITOR.dom.element(c),4)}},clickFn:e};a.on("activeFilterChange",g,this);a.on("mode",
g,this);a.on("selectionChange",g,this);!this.readOnly&&a.on("readOnly",g,this);var m=CKEDITOR.tools.addFunction(function(b,d){b=new CKEDITOR.dom.event(b);var g=b.getKeystroke();if(40==g)a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)});switch(g){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,d);break;default:c.onkey(c,g)}b.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){c.onfocus&&c.onfocus()}),l=0;c.keyDownFn=m;d={id:h,name:this.name||this.command,label:this.label,
title:this.title,cls:this.className||"",titleJs:d.gecko&&!d.hc?"":(this.title||"").replace("'",""),keydownFn:m,focusFn:n,clickFn:e};k.output(d,b);if(this.onRender)this.onRender();return c},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,d=this._.panelDefinition.block,k=b.parent||CKEDITOR.document.getBody(),h="cke_combopanel__"+this.name,e=new CKEDITOR.ui.floatPanel(a,k,b),f=e.addListBlock(this.id,d),c=this;e.onShow=function(){this.element.addClass(h);c.setState(CKEDITOR.TRISTATE_ON);
c._.on=1;c.editorFocus&&!a.focusManager.hasFocus&&a.focus();if(c.onOpen)c.onOpen();a.once("panelShow",function(){f.focus(!f.multiSelect&&c.getValue())})};e.onHide=function(b){this.element.removeClass(h);c.setState(c.modes&&c.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c._.on=0;if(!b&&c.onClose)c.onClose()};e.onEscape=function(){e.hide(1)};f.onClick=function(a,b){c.onClick&&c.onClick.call(c,a,b);e.hide()};this._.panel=e;this._.list=f;e.getBlock(this.id).onHide=function(){c._.on=
0;c.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(a,b){this._.value=a;var d=this.document.getById("cke_"+this.id+"_text");d&&(a||b?d.removeClass("cke_combo_inlinelabel"):(b=this.label,d.addClass("cke_combo_inlinelabel")),d.setText("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},
showAll:function(){this._.list.showAll()},add:function(a,b,d){this._.items[a]=d||a;this._.list.add(a,b,d)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");this._.state=
a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}})();(function(){function l(a,b,c,f,p,l,t,v){var w=a.config,q=new CKEDITOR.style(t),k=p.split(";");p=[];for(var m={},d=0;d<k.length;d++){var h=k[d];if(h){var h=h.split("/"),u={},n=k[d]=h[0];u[c]=p[d]=h[1]||n;m[n]=new CKEDITOR.style(t,u);m[n]._.definition.name=n}else k.splice(d--,1)}a.ui.addRichCombo(b,{label:f.label,title:f.panelTitle,toolbar:"styles,"+v,allowedContent:q,requiredContent:q,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(w.contentsCss),multiSelect:!1,attributes:{"aria-label":f.panelTitle}},
init:function(){this.startGroup(f.panelTitle);for(var a=0;a<k.length;a++){var b=k[a];this.add(b,m[b].buildPreview(),b)}},onClick:function(b){a.focus();a.fire("saveSnapshot");var c=this.getValue(),f=m[b];if(c&&b!=c){var k=m[c],e=a.getSelection().getRanges()[0];if(e.collapsed){var d=a.elementPath(),g=d.contains(function(a){return k.checkElementRemovable(a)});if(g){var h=e.checkBoundaryOfElement(g,CKEDITOR.START),l=e.checkBoundaryOfElement(g,CKEDITOR.END);if(h&&l){for(h=e.createBookmark();d=g.getFirst();)d.insertBefore(g);
g.remove();e.moveToBookmark(h)}else h?e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START):l?e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END):(e.splitElement(g),e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END),r(e,d.elements.slice(),g));a.getSelection().selectRanges([e])}}else a.removeStyle(k)}a[c==b?"removeStyle":"applyStyle"](f);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path.elements;for(var d=0,f;d<b.length;d++){f=b[d];for(var e in m)if(m[e].checkElementMatch(f,
!0,a)){e!=c&&this.setValue(e);return}}this.setValue("",l)},this)},refresh:function(){a.activeFilter.check(q)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function r(a,b,c){var f=b.pop();if(f){if(c)return r(a,b,f.equals(c)?null:c);c=f.clone();a.insertNode(c);a.moveToPosition(c,CKEDITOR.POSITION_AFTER_START);r(a,b)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(a){var b=a.config;l(a,"Font","family",a.lang.font,b.font_names,b.font_defaultLabel,b.font_style,30);l(a,"FontSize","size",
a.lang.font.fontSize,b.fontSize_sizes,b.fontSize_defaultLabel,b.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";
CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(a){var b=a.lang,g=0,h={email:1,password:1,search:1,tel:1,text:1,url:1},l={checkbox:"input[type,name,checked,required]",
radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},m={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",
select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},e=function(d,c,e){var h={allowedContent:l[c],requiredContent:m[c]};"form"==c&&(h.context="form");a.addCommand(c,new CKEDITOR.dialogCommand(c,h));a.ui.addButton&&a.ui.addButton(d,{label:b.common[d.charAt(0).toLowerCase()+d.slice(1)],command:c,toolbar:"forms,"+(g+=10)});CKEDITOR.dialog.add(c,e)},f=this.path+"dialogs/";!a.blockless&&e("Form","form",f+"form.js");e("Checkbox","checkbox",f+"checkbox.js");e("Radio","radio",
f+"radio.js");e("TextField","textfield",f+"textfield.js");e("Textarea","textarea",f+"textarea.js");e("Select","select",f+"select.js");e("Button","button",f+"button.js");var k=a.plugins.image;k&&!a.plugins.image2&&e("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");e("HiddenField","hiddenfield",f+"hiddenfield.js");a.addMenuItems&&(e={checkbox:{label:b.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:b.forms.checkboxAndRadio.radioTitle,
command:"radio",group:"radio"},textfield:{label:b.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:b.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:b.forms.button.title,command:"button",group:"button"},select:{label:b.forms.select.title,command:"select",group:"select"},textarea:{label:b.forms.textarea.title,command:"textarea",group:"textarea"}},k&&(e.imagebutton={label:b.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&
(e.form={label:b.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(e));a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(d,c,a){if((d=a.contains("form",1))&&!d.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),a.contextMenu.addListener(function(d){if(d&&!d.isReadOnly()){var c=d.getName();if("select"==c)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==c)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==c){var a=d.getAttribute("type")||"text";switch(a){case "button":case "submit":case "reset":return{button:CKEDITOR.TRISTATE_OFF};
case "checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case "radio":return{radio:CKEDITOR.TRISTATE_OFF};case "image":return k?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(h[a])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==c&&"hiddenfield"==d.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));a.on("doubleclick",function(d){var c=d.data.element;if(!a.blockless&&c.is("form"))d.data.dialog="form";else if(c.is("select"))d.data.dialog="select";else if(c.is("textarea"))d.data.dialog=
"textarea";else if(c.is("img")&&"hiddenfield"==c.data("cke-real-element-type"))d.data.dialog="hiddenfield";else if(c.is("input")){c=c.getAttribute("type")||"text";switch(c){case "button":case "submit":case "reset":d.data.dialog="button";break;case "checkbox":d.data.dialog="checkbox";break;case "radio":d.data.dialog="radio";break;case "image":d.data.dialog="imagebutton"}h[c]&&(d.data.dialog="textfield")}})},afterInit:function(a){var b=a.dataProcessor,g=b&&b.htmlFilter,b=b&&b.dataFilter;CKEDITOR.env.ie&&
g&&g.addRules({elements:{input:function(a){a=a.attributes;var b=a.type;b||(a.type="text");"checkbox"!=b&&"radio"!=b||"on"!=a.value||delete a.value}}},{applyToAll:!0});b&&b.addRules({elements:{input:function(b){if("hidden"==b.attributes.type)return a.createFakeParserElement(b,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var f=a.config,c=a.lang.format,l=f.format_tags.split(";"),d={},m=0,n=[],g=0;g<l.length;g++){var h=l[g],k=new CKEDITOR.style(f["format_"+h]);if(!a.filter.customConfig||a.filter.check(k))m++,d[h]=k,d[h]._.enterMode=a.config.enterMode,n.push(k)}0!==m&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:n,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),
multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in d){var e=c["tag_"+a];this.add(a,d[a].buildPreview(e),e)}},onClick:function(b){a.focus();a.fire("saveSnapshot");b=d[b];var e=a.elementPath();a[b.checkActive(e,a)?"removeStyle":"applyStyle"](b);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var e=this.getValue();b=b.data.path;this.refresh();for(var c in d)if(d[c].checkActive(b,a)){c!=
e&&this.setValue(c,a.lang.format["tag_"+c]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in d)a.activeFilter.check(d[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in d)if(a.activeFilter.check(d[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};
CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var b={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(b){var a=new CKEDITOR.htmlWriter;a.forceSimpleAmpersand=b.config.forceSimpleAmpersand;a.indentationChars=b.config.dataIndentationChars||"\t";b.dataProcessor.writer=a}});
CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var b=CKEDITOR.dtd,a;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in
b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",b);this._.afterCloser=0},
openTagClose:function(b,a){var c=this._.rules[b];a?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push("\x3e"),c&&c.indent&&(this._.indentation+=this.indentationChars));c&&c.breakAfterOpen&&this.lineBreak();"pre"==b&&(this._.inPre=1)},attribute:function(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"\x26")),a=CKEDITOR.tools.htmlEncodeAttr(a));this._.output.push(" ",b,'\x3d"',a,'"')},closeTag:function(b){var a=
this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",b,"\x3e");"pre"==b&&(this._.inPre=0);a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace);this._.afterCloser=1},text:function(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b)));this._.output.push(b)},comment:function(b){this._.indent&&
this.indentation();this._.output.push("\x3c!--",b,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0},setRules:function(b,a){var c=this._.rules[b];c?CKEDITOR.tools.extend(c,a,!0):this._.rules[b]=a}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var b=a.lang.iframe,c="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(c+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,
classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:c,requiredContent:"iframe"}));a.ui.addButton&&a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe",toolbar:"insert,80"});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe")});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});
a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&"iframe"==a.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})})();(function(){function m(a){function f(a){var b=!1;g.attachListener(g,"keydown",function(){var d=c.getBody().getElementsByTag(a);if(!b){for(var e=0;e<d.count();e++)d.getItem(e).setCustomData("retain",!0);b=!0}},null,null,1);g.attachListener(g,"keyup",function(){var d=c.getElementsByTag(a);b&&(1!=d.count()||d.getItem(0).getCustomData("retain")||d.getItem(0).remove(1),b=!1)})}var b=this.editor,c=a.document,d=c.body,e=c.getElementById("cke_actscrpt");e&&e.parentNode.removeChild(e);(e=c.getElementById("cke_shimscrpt"))&&
e.parentNode.removeChild(e);(e=c.getElementById("cke_basetagscrpt"))&&e.parentNode.removeChild(e);d.contentEditable=!0;CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled"));delete this._.isLoadingData;this.$=d;c=new CKEDITOR.dom.document(c);this.setup();this.fixInitialSelection();var g=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&c.getDocumentElement().addClass(c.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&b.enterMode!=CKEDITOR.ENTER_P?f("p"):CKEDITOR.env.edge&&b.enterMode!=
CKEDITOR.ENTER_DIV&&f("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)c.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){b.editable().focus()})});n(b);try{b.document.$.execCommand("2D-position",!1,!0)}catch(h){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==b.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var c=a.data.getKeystroke();if(33==c||34==c)if(CKEDITOR.env.ie)setTimeout(function(){b.getSelection().scrollIntoView()},
0);else if(b.window.$.innerHeight>this.$.offsetHeight){var d=b.createRange();d[33==c?"moveToElementEditStart":"moveToElementEditEnd"](this);d.select();a.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(c,"blur",function(){try{c.$.selection.empty()}catch(a){}});CKEDITOR.env.iOS&&this.attachListener(c,"touchend",function(){a.focus()});d=b.document.getElementsByTag("title").getItem(0);d.data("cke-title",d.getText());CKEDITOR.env.ie&&(b.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==
this.status&&(this.status="ready");b.fire("contentDom");this._.isPendingFocus&&(b.focus(),this._.isPendingFocus=!1);setTimeout(function(){b.fire("dataReady")},0)},0,this)}function n(a){function f(){var c;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(c&&(c.detachEvent("onresizestart",b),c=null),d.$.attachEvent("onresizestart",b),c=d.$)})}function b(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var c=a.document.$;c.execCommand("enableObjectResizing",
!1,!a.config.disableObjectResizing);c.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(d){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&f(a)}function p(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var f=[],b;for(b in CKEDITOR.dtd.$removeEmpty)f.push("html.CSS1Compat "+b+"[contenteditable\x3dfalse]");a.push(f.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&
(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));a.push("html{cursor:text;*cursor:auto}");a.push("img,input,textarea{cursor:default}");return a.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(f){function b(b){b&&b.removeListener();a.editable(new l(a,
d.$.contentWindow.document.body));a.setData(a.getData(1),f)}var c="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",c=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(c)+"}())":"",d=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+c+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');d.setStyles({width:"100%",height:"100%"});d.addClass("cke_wysiwyg_frame").addClass("cke_reset");
c=a.ui.space("contents");c.append(d);var e=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(e)d.on("load",b);var g=a.title,h=a.fire("ariaEditorHelpLabel",{}).label;g&&(CKEDITOR.env.ie&&h&&(g+=", "+h),d.setAttribute("title",g));if(h){var g=CKEDITOR.tools.getNextId(),k=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+g+'" class\x3d"cke_voice_label"\x3e'+h+"\x3c/span\x3e");c.append(k,1);d.setAttribute("aria-describedby",g)}a.on("beforeModeUnload",function(a){a.removeListener();k&&k.remove()});
d.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!e&&b();a.fire("ariaWidget",d)})}});CKEDITOR.editor.prototype.addContentsCss=function(a){var f=this.config,b=f.contentsCss;CKEDITOR.tools.isArray(b)||(f.contentsCss=b?[b]:[]);f.contentsCss.push(a)};var l=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(m,0,this,a)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},
base:CKEDITOR.editable,proto:{setData:function(a,f){var b=this.editor;if(f)this.setHtml(a),this.fixInitialSelection(),b.fire("dataReady");else{this._.isLoadingData=!0;b._.dataStore={id:1};var c=b.config,d=c.fullPage,e=c.docType,g=CKEDITOR.tools.buildStyleHtml(p()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');d||(g+=CKEDITOR.tools.buildStyleHtml(b.config.contentsCss));var h=c.baseHref?'\x3cbase href\x3d"'+c.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){b.docType=
e=a;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){b.xmlDeclaration=a;return""}));a=b.dataProcessor.toHtml(a);d?(/<body[\s|>]/.test(a)||(a="\x3cbody\x3e"+a),/<html[\s|>]/.test(a)||(a="\x3chtml\x3e"+a+"\x3c/html\x3e"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):a=a.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),h&&(a=a.replace(/<head[^>]*?>/,"$\x26"+h)),a=a.replace(/<\/head\s*>/,g+"$\x26"),a=
e+a):a=c.docType+'\x3chtml dir\x3d"'+c.contentsLangDirection+'" lang\x3d"'+(c.contentsLanguage||b.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+h+g+"\x3c/head\x3e\x3cbody"+(c.bodyId?' id\x3d"'+c.bodyId+'"':"")+(c.bodyClass?' class\x3d"'+c.bodyClass+'"':"")+"\x3e"+a+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(a=a.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),2E4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));
c='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');
h&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');a=a.replace(/(?=\s*<\/(:?head)>)/,c);this.clearCustomData();this.clearListeners();b.fire("contentDomUnload");var k=this.getDocument();try{k.write(a)}catch(l){setTimeout(function(){k.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var f=a.config,b=f.fullPage,c=b&&a.docType,d=b&&a.xmlDeclaration,
e=this.getDocument(),b=b?e.getDocumentElement().getOuterHtml():e.getBody().getHtml();CKEDITOR.env.gecko&&f.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,""));b=a.dataProcessor.toDataFormat(b);d&&(b=d+"\n"+b);c&&(b=c+"\n"+b);return b},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:l.baseProto.focus.call(this)},detach:function(){var a=this.editor,f=a.document,b;try{b=a.window.getFrame()}catch(c){}l.baseProto.detach.call(this);this.clearCustomData();f.getDocumentElement().clearCustomData();
CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);b&&b.getParent()?(b.clearCustomData(),(a=b.removeCustomData("onResize"))&&a.removeListener(),b.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function e(b,a){a||(a=b.getSelection().getSelectedElement());if(a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())return a}function f(b){var a=b.getStyle("float");if("inherit"==a||"none"==a)a=0;a||(a=b.getAttribute("align"));return a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";
CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.on("doubleclick",function(b){var a=
b.data.element;!a.is("img")||a.data("cke-realelement")||a.isReadOnly()||(b.data.dialog="image")});b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}});b.contextMenu&&b.contextMenu.addListener(function(a){if(e(b,a))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(b){function a(a){var d=b.getCommand("justify"+a);if(d){if("left"==a||"right"==a)d.on("exec",function(d){var c=e(b),g;c&&(g=f(c),g==a?(c.removeStyle("float"),a==f(c)&&c.removeAttribute("align")):
c.setStyle("float",a),d.cancel())});d.on("refresh",function(d){var c=e(b);c&&(c=f(c),this.setState(c==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel())})}}b.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function m(a,b){var e,f;b.on("refresh",function(a){var b=[k],c;for(c in a.data.states)b.push(a.data.states[c]);this.setState(CKEDITOR.tools.search(b,p)?p:k)},b,null,100);b.on("exec",function(b){e=a.getSelection();f=e.createBookmarks(1);b.data||(b.data={});b.data.done=!1},b,null,0);b.on("exec",function(){a.forceNextSelectionCheck();e.selectBookmarks(f)},b,null,100)}var k=CKEDITOR.TRISTATE_DISABLED,p=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;
m(a,a.addCommand("indent",new b(!0)));m(a,a.addCommand("outdent",new b));a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));a.on("dirChanged",function(b){var f=a.createRange(),l=b.data.node;f.setStartBefore(l);f.setEndAfter(l);for(var n=new CKEDITOR.dom.walker(f),c;c=n.next();)if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(l)&&
c.getDirection())f.setStartAfter(c),n=new CKEDITOR.dom.walker(f);else{var d=a.config.indentClasses;if(d)for(var g="ltr"==b.data.dir?["_rtl",""]:["","_rtl"],h=0;h<d.length;h++)c.hasClass(d[h]+g[0])&&(c.removeClass(d[h]+g[0]),c.addClass(d[h]+g[1]));d=c.getStyle("margin-right");g=c.getStyle("margin-left");d?c.setStyle("margin-left",d):c.removeStyle("margin-left");g?c.setStyle("margin-right",g):c.removeStyle("margin-right")}})}});CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a;
this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b;this.editor=a;this.jobs={};this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!e;this.relatedGlobal=e?"indent":"outdent";this.indentKey=e?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var e=a.getCommand(b.relatedGlobal),c;for(c in b.jobs)e.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=
!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),e.on("refresh",function(d){d.data.states||(d.data.states={});d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var e=this.jobs[b];if(e.state!=k)return e.exec.call(this,a)},refreshJob:function(a,
b,e){b=this.jobs[b];a.activeFilter.checkFeature(this)?b.state=b.refresh.call(this,a,e):b.state=k;return b.state},getContext:function(a){return a.contains(this.context)}}})();(function(){function f(b,c,a){if(!b.getCustomData("indent_processed")){var d=this.editor,l=this.isIndent;if(c){d=b.$.className.match(this.classNameRegex);a=0;d&&(d=d[1],a=CKEDITOR.tools.indexOf(c,d)+1);if(0>(a+=l?1:-1))return;a=Math.min(a,c.length);a=Math.max(a,0);b.$.className=CKEDITOR.tools.ltrim(b.$.className.replace(this.classNameRegex,""));0<a&&b.addClass(c[a-1])}else{c=m(b,a);a=parseInt(b.getStyle(c),10);var g=d.config.indentOffset||40;isNaN(a)&&(a=0);a+=(l?1:-1)*g;if(0>a)return;a=Math.max(a,
0);a=Math.ceil(a/g)*g;b.setStyle(c,a?a+(d.config.indentUnit||"px"):"");""===b.getAttribute("style")&&b.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,b,"indent_processed",1)}}function m(b,c){return"ltr"==(c||b.getComputedStyle("direction"))?"margin-left":"margin-right"}var h=CKEDITOR.dtd.$listItem,p=CKEDITOR.dtd.$list,k=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(b){function c(){a.specificDefinition.apply(this,
arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:d?null:"margin-left,margin-right",classes:d||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(d?"("+d.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(a,b){var e=b.block||b.blockLimit;if(!e.is(h))var c=e.getAscendant(h),e=c&&b.contains(c)||e;e.is(h)&&(e=e.getParent());if(this.enterBr||this.getContext(b)){if(d){var c=d,e=e.$.className.match(this.classNameRegex),
f=this.isIndent,c=e?f?e[1]!=c.slice(-1):!0:f;return c?n:k}return this.isIndent?n:e?CKEDITOR[0>=(parseInt(e.getStyle(m(e)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:k}return k},exec:function(a){var b=a.getSelection(),b=b&&b.getRanges()[0],c;if(c=a.elementPath().contains(p))f.call(this,c,d);else for(b=b.createIterator(),a=a.config.enterMode,b.enforceRealBlocks=!0,b.enlargeBr=a!=CKEDITOR.ENTER_BR;c=b.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");)c.isReadOnly()||f.call(this,c,d);return!0}}}}var a=
CKEDITOR.plugins.indent,d=b.config.indentClasses;a.registerCommands(b,{indentblock:new c(b,"indentblock",!0),outdentblock:new c(b,"outdentblock")});CKEDITOR.tools.extend(c.prototype,a.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:d?new RegExp("(?:^|\\s+)("+d.join("|")+")(?\x3d$|\\s)"):null})}})})();(function(){function w(c){function f(b){for(var e=d.startContainer,a=d.endContainer;e&&!e.getParent().equals(b);)e=e.getParent();for(;a&&!a.getParent().equals(b);)a=a.getParent();if(!e||!a)return!1;for(var g=e,e=[],k=!1;!k;)g.equals(a)&&(k=!0),e.push(g),g=g.getNext();if(1>e.length)return!1;g=b.getParents(!0);for(a=0;a<g.length;a++)if(g[a].getName&&p[g[a].getName()]){b=g[a];break}for(var g=l.isIndent?1:-1,a=e[0],e=e[e.length-1],k=CKEDITOR.plugins.list.listToArray(b,q),n=k[e.getCustomData("listarray_index")].indent,
a=a.getCustomData("listarray_index");a<=e.getCustomData("listarray_index");a++)if(k[a].indent+=g,0<g){var h=k[a].parent;k[a].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(a=e.getCustomData("listarray_index")+1;a<k.length&&k[a].indent>n;a++)k[a].indent+=g;e=CKEDITOR.plugins.list.arrayToList(k,q,null,c.config.enterMode,b.getDirection());if(!l.isIndent){var f;if((f=b.getParent())&&f.is("li"))for(var g=e.listNode.getChildren(),r=[],m,a=g.count()-1;0<=a;a--)(m=g.getItem(a))&&m.is&&m.is("li")&&
r.push(m)}e&&e.listNode.replace(b);if(r&&r.length)for(a=0;a<r.length;a++){for(m=b=r[a];(m=m.getNext())&&m.is&&m.getName()in p;)CKEDITOR.env.needsNbspFiller&&!b.getFirst(x)&&b.append(d.document.createText(" ")),b.append(m);b.insertAfter(f)}e&&c.fire("contentDomInvalidated");return!0}for(var l=this,q=this.database,p=this.context,n=c.getSelection(),n=(n&&n.getRanges()).createIterator(),d;d=n.getNextRange();){for(var b=d.getCommonAncestor();b&&(b.type!=CKEDITOR.NODE_ELEMENT||!p[b.getName()]);){if(c.editable().equals(b)){b=
!1;break}b=b.getParent()}b||(b=d.startPath().contains(p))&&d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);if(!b){var h=d.getEnclosedNode();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in p&&(d.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),b=h)}b&&d.startContainer.type==CKEDITOR.NODE_ELEMENT&&d.startContainer.getName()in p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.startContainer=h.next());b&&d.endContainer.type==CKEDITOR.NODE_ELEMENT&&d.endContainer.getName()in
p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.endContainer=h.previous());if(b)return f(b)}return 0}function t(c){return c.type==CKEDITOR.NODE_ELEMENT&&c.is("li")}function x(c){return y(c)&&z(c)}var y=CKEDITOR.dom.walker.whitespaces(!0),z=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.TRISTATE_DISABLED,v=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(c){function f(c){l.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];c.on("key",
function(f){if("wysiwyg"==c.mode&&f.data.keyCode==this.indentKey){var n=this.getContext(c.elementPath());!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,c.elementPath(),n)||(c.execCommand(this.relatedGlobal),f.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(c,f){var d=this.getContext(f),b=CKEDITOR.plugins.indentList.firstItemInPath(this.context,f,d);return d&&this.isIndent&&!b?v:u}:function(c,f){return!this.getContext(f)||this.isIndent?
u:v},exec:CKEDITOR.tools.bind(w,this)}}var l=CKEDITOR.plugins.indent;l.registerCommands(c,{indentlist:new f(c,"indentlist",!0),outdentlist:new f(c,"outdentlist")});CKEDITOR.tools.extend(f.prototype,l.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(c,f,l){var q=f.contains(t);l||(l=f.contains(c));return l&&q&&q.equals(l.getFirst(t))}})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");
CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function n(a,c){c=void 0===c||c;var b;if(c)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b}b=a.getStyle("text-align")||a.getAttribute("align")||""}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&c&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b}function g(a,c,b){this.editor=a;this.name=c;this.value=b;this.context="p";c=a.config.justifyClasses;var h=a.config.enterMode==
CKEDITOR.ENTER_P?"p":"div";if(c){switch(b){case "left":this.cssClassName=c[0];break;case "center":this.cssClassName=c[1];break;case "right":this.cssClassName=c[2];break;case "justify":this.cssClassName=c[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?\x3d$|\\s)");this.requiredContent=h+"("+this.cssClassName+")"}else this.requiredContent=h+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",
classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function l(a){var c=a.editor,b=c.createRange();b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);for(var h=new CKEDITOR.dom.walker(b),d;d=h.next();)if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())b.setStartAfter(d),h=new CKEDITOR.dom.walker(b);else{var e=c.config.justifyClasses;e&&(d.hasClass(e[0])?(d.removeClass(e[0]),d.addClass(e[2])):d.hasClass(e[2])&&(d.removeClass(e[2]),
d.addClass(e[0])));e=d.getStyle("text-align");"left"==e?d.setStyle("text-align","right"):"right"==e&&d.setStyle("text-align","left")}}g.prototype={exec:function(a){var c=a.getSelection(),b=a.config.enterMode;if(c){for(var h=c.createBookmarks(),d=c.getRanges(),e=this.cssClassName,g,f,k=a.config.useComputedState,k=void 0===k||k,m=d.length-1;0<=m;m--)for(g=d[m].createIterator(),g.enlargeBr=b!=CKEDITOR.ENTER_BR;f=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)if(!f.isReadOnly()){f.removeAttribute("align");
f.removeStyle("text-align");var l=e&&(f.$.className=CKEDITOR.tools.ltrim(f.$.className.replace(this.cssClassRegex,""))),p=this.state==CKEDITOR.TRISTATE_OFF&&(!k||n(f,!0)!=this.value);e?p?f.addClass(e):l||f.removeAttribute("class"):p&&f.setStyle("text-align",this.value)}a.focus();a.forceNextSelectionCheck();c.selectBookmarks(h)}},refresh:function(a,c){var b=c.block||c.blockLimit;this.setState("body"!=b.getName()&&n(b,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};
CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var c=new g(a,"justifyleft","left"),b=new g(a,"justifycenter","center"),h=new g(a,"justifyright","right"),d=new g(a,"justifyblock","justify");a.addCommand("justifyleft",c);a.addCommand("justifycenter",b);a.addCommand("justifyright",h);a.addCommand("justifyblock",d);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,
command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));a.on("dirChanged",l)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var d=function(c){var a=this._,b=a.menu;a.state!==CKEDITOR.TRISTATE_DISABLED&&(a.on&&b?b.hide():(a.previousState=a.state,b||(b=a.menu=new CKEDITOR.menu(c,{panel:{className:"cke_menu_panel",attributes:{"aria-label":c.lang.common.options}}}),b.onHide=CKEDITOR.tools.bind(function(){var b=this.command?c.getCommand(this.command).modes:this.modes;this.setState(!b||b[c.mode]?a.previousState:CKEDITOR.TRISTATE_DISABLED);a.on=0},this),
this.onMenu&&b.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),a.on=1,setTimeout(function(){b.show(CKEDITOR.document.getById(a.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){delete c.panel;this.base(c);this.hasArrow=!0;this.click=d},statics:{handler:{create:function(c){return new CKEDITOR.ui.menuButton(c)}}}})},beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});
CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(a){var b=a.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],c=this,d=a.lang.language,e={},g,h,k,f;a.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(a,b){var c=e["language_"+b];if(c)a[c.style.checkActive(a.elementPath(),a)?"removeStyle":"applyStyle"](c.style)},refresh:function(a){this.setState(c.getCurrentLangElement(a)?CKEDITOR.TRISTATE_ON:
CKEDITOR.TRISTATE_OFF)}});for(f=0;f<b.length;f++)g=b[f].split(":"),h=g[0],k="language_"+h,e[k]={label:g[1],langId:h,group:"language",order:f,ltr:"rtl"!=(""+g[2]).toLowerCase(),onClick:function(){a.execCommand("language",this.langId)},role:"menuitemcheckbox"},e[k].style=new CKEDITOR.style({element:"span",attributes:{lang:h,dir:e[k].ltr?"ltr":"rtl"}});e.language_remove={label:d.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:e.length,onClick:function(){var b=c.getCurrentLangElement(a);
b&&a.execCommand("language",b.getAttribute("lang"))}};a.addMenuGroup("language",1);a.addMenuGroup("language_remove");a.addMenuItems(e);a.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:d.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var b={},d=c.getCurrentLangElement(a),f;for(f in e)b[f]=CKEDITOR.TRISTATE_OFF;b.language_remove=d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;d&&(b["language_"+d.getAttribute("lang")]=
CKEDITOR.TRISTATE_ON);return b}})},getCurrentLangElement:function(a){var b=a.elementPath();a=b&&b.elements;var c;if(b)for(var d=0;d<a.length;d++)b=a[d],!c&&"span"==b.getName()&&b.hasAttribute("dir")&&b.hasAttribute("lang")&&(c=b);return c}})})();(function(){function p(c){return c.replace(/'/g,"\\$\x26")}function q(c){for(var b,a=c.length,f=[],e=0;e<a;e++)b=c.charCodeAt(e),f.push(b);return"String.fromCharCode("+f.join(",")+")"}function r(c,b){var a=c.plugins.link,f=a.compiledProtectionFunction.params,e,d;d=[a.compiledProtectionFunction.name,"("];for(var g=0;g<f.length;g++)a=f[g].toLowerCase(),e=b[a],0<g&&d.push(","),d.push("'",e?p(encodeURIComponent(b[a])):"","'");d.push(")");return d.join("")}function n(c){c=c.config.emailProtection||"";
var b;c&&"encode"!=c&&(b={},c.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,e){b.name=c;b.params=[];e.replace(/[^,\s]+/g,function(a){b.params.push(a)})}));return b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function c(b){return a.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",
a=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(c("ltr")+c("rtl"))},init:function(c){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(c,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(c,"link","target")&&(b=b.replace("]",
",target,onclick]"));c.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"}));c.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));c.addCommand("unlink",new CKEDITOR.unlinkCommand);c.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);c.setKeystroke(CKEDITOR.CTRL+76,"link");c.ui.addButton&&(c.ui.addButton("Link",{label:c.lang.link.toolbar,command:"link",toolbar:"links,10"}),c.ui.addButton("Unlink",
{label:c.lang.link.unlink,command:"unlink",toolbar:"links,20"}),c.ui.addButton("Anchor",{label:c.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");c.on("doubleclick",function(a){var b=CKEDITOR.plugins.link.getSelectedLink(c)||a.data.element;b.isReadOnly()||(b.is("a")?(a.data.dialog=!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount()?"link":"anchor",a.data.link=
b):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,b)&&(a.data.dialog="anchor"))},null,null,0);c.on("doubleclick",function(a){a.data.dialog in{link:1,anchor:1}&&a.data.link&&c.getSelection().selectElement(a.data.link)},null,null,20);c.addMenuItems&&c.addMenuItems({anchor:{label:c.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:c.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:c.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:c.lang.link.unlink,
command:"unlink",group:"link",order:5}});c.contextMenu&&c.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;a=CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a);if(!a&&!(a=CKEDITOR.plugins.link.getSelectedLink(c)))return null;var b={};a.getAttribute("href")&&a.getChildCount()&&(b={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});a&&a.hasAttribute("name")&&(b.anchor=b.removeAnchor=CKEDITOR.TRISTATE_OFF);return b});this.compiledProtectionFunction=n(c)},afterInit:function(c){c.dataProcessor.dataFilter.addRules({elements:{a:function(a){return a.attributes.name?
a.children.length?null:c.createFakeParserElement(a,"cke_anchor","anchor"):null}}});var b=c._.elementsPath&&c._.elementsPath.filters;b&&b.push(function(a,b){if("a"==b&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a)||a.getAttribute("name")&&(!a.getAttribute("href")||!a.getChildCount())))return"anchor"})}});var t=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,v=/subject=([^;?:@&=$,\/]*)/i,w=/body=([^;?:@&=$,\/]*)/i,x=/^#(.*)$/,y=/^((?:http|https|ftp|news):\/\/)?(.*)$/,z=/^(_(?:self|top|parent|blank))$/,
A=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,B=/^javascript:([^(]+)\(([^)]+)\)$/,C=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,D=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};
CKEDITOR.plugins.link={getSelectedLink:function(c){var b=c.getSelection(),a=b.getSelectedElement();return a&&a.is("a")?a:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),c.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(c){for(var b=c.editable(),a=b.isInline()&&!c.plugins.divarea?c.document:b,b=a.getElementsByTag("a"),a=a.getElementsByTag("img"),f=[],e=0,d;d=b.getItem(e++);)(d.data("cke-saved-name")||d.hasAttribute("name"))&&f.push({name:d.data("cke-saved-name")||
d.getAttribute("name"),id:d.getAttribute("id")});for(e=0;d=a.getItem(e++);)(d=this.tryRestoreFakeAnchor(c,d))&&f.push({name:d.getAttribute("name"),id:d.getAttribute("id")});return f},fakeAnchor:!0,tryRestoreFakeAnchor:function(c,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var a=c.restoreRealElement(b);if(a.data("cke-saved-name"))return a}},parseLinkAttributes:function(c,b){var a=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",f=c.plugins.link.compiledProtectionFunction,
e=c.config.emailProtection,d,g={};a.match(t)&&("encode"==e?a=a.replace(A,function(a,b,c){c=c||"";return"mailto:"+String.fromCharCode.apply(String,b.split(","))+c.replace(/\\'/g,"'")}):e&&a.replace(B,function(a,b,c){if(b==f.name){g.type="email";a=g.email={};b=/(^')|('$)/g;c=c.match(/[^,\s]+/g);for(var d=c.length,e,h,k=0;k<d;k++)e=decodeURIComponent,h=c[k].replace(b,"").replace(/\\'/g,"'"),h=e(h),e=f.params[k].toLowerCase(),a[e]=h;a.address=[a.name,a.domain].join("@")}}));if(!g.type)if(e=a.match(x))g.type=
"anchor",g.anchor={},g.anchor.name=g.anchor.id=e[1];else if(e=a.match(u)){d=a.match(v);a=a.match(w);g.type="email";var k=g.email={};k.address=e[1];d&&(k.subject=decodeURIComponent(d[1]));a&&(k.body=decodeURIComponent(a[1]))}else a&&(d=a.match(y))&&(g.type="url",g.url={},g.url.protocol=d[1],g.url.url=d[2]);if(b){if(a=b.getAttribute("target"))g.target={type:a.match(z)?a:"frame",name:a};else if(a=(a=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&a.match(C))for(g.target={type:"popup",name:a[1]};e=
D.exec(a[2]);)"yes"!=e[2]&&"1"!=e[2]||e[1]in{height:1,width:1,top:1,left:1}?isFinite(e[2])&&(g.target[e[1]]=e[2]):g.target[e[1]]=!0;var a={},h;for(h in m)(e=b.getAttribute(h))&&(a[m[h]]=e);if(h=b.data("cke-saved-name")||a.advName)a.advName=h;CKEDITOR.tools.isEmpty(a)||(g.advanced=a)}return g},getLinkAttributes:function(c,b){var a=c.config.emailProtection||"",f={};switch(b.type){case "url":var a=b.url&&void 0!==b.url.protocol?b.url.protocol:"http://",e=b.url&&CKEDITOR.tools.trim(b.url.url)||"";f["data-cke-saved-href"]=
0===e.indexOf("/")?e:a+e;break;case "anchor":a=b.anchor&&b.anchor.id;f["data-cke-saved-href"]="#"+(b.anchor&&b.anchor.name||a||"");break;case "email":var d=b.email,e=d.address;switch(a){case "":case "encode":var g=encodeURIComponent(d.subject||""),k=encodeURIComponent(d.body||""),d=[];g&&d.push("subject\x3d"+g);k&&d.push("body\x3d"+k);d=d.length?"?"+d.join("\x26"):"";"encode"==a?(a=["javascript:void(location.href\x3d'mailto:'+",q(e)],d&&a.push("+'",p(d),"'"),a.push(")")):a=["mailto:",e,d];break;default:a=
e.split("@",2),d.name=a[0],d.domain=a[1],a=["javascript:",r(c,d)]}f["data-cke-saved-href"]=a.join("")}if(b.target)if("popup"==b.target.type){for(var a=["window.open(this.href, '",b.target.name||"","', '"],h="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),e=h.length,g=function(a){b.target[a]&&h.push(a+"\x3d"+b.target[a])},d=0;d<e;d++)h[d]+=b.target[h[d]]?"\x3dyes":"\x3dno";g("width");g("left");g("height");g("top");a.push(h.join(","),"'); return false;");f["data-cke-pa-onclick"]=
a.join("")}else"notSet"!=b.target.type&&b.target.name&&(f.target=b.target.name);if(b.advanced){for(var l in m)(a=b.advanced[m[l]])&&(f[l]=a);f.name&&(f["data-cke-saved-name"]=f.name)}f["data-cke-saved-href"]&&(f.href=f["data-cke-saved-href"]);l={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};b.advanced&&CKEDITOR.tools.extend(l,m);for(var n in f)delete l[n];return{set:f,removed:CKEDITOR.tools.objectKeys(l)}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype=
{exec:function(c){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});c.removeStyle(b)},refresh:function(c,b){var a=b.lastElement&&b.lastElement.getAscendant("a",!0);a&&"a"==a.getName()&&a.getAttribute("href")&&a.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(c){var b=
c.getSelection(),a=b.createBookmarks(),f;if(b&&(f=b.getSelectedElement())&&(f.getChildCount()?f.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,f)))f.remove(1);else if(f=CKEDITOR.plugins.link.getSelectedLink(c))f.hasAttribute("href")?(f.removeAttributes({name:1,"data-cke-saved-name":1}),f.removeClass("cke_anchor")):f.remove(1);b.selectBookmarks(a)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function I(b,m,e){function c(c){if(!(!(a=d[c?"getFirst":"getLast"]())||a.is&&a.isBlockBoundary()||!(p=m.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||p.is&&p.isBlockBoundary({br:1})))b.document.createElement("br")[c?"insertBefore":"insertAfter"](a)}for(var f=CKEDITOR.plugins.list.listToArray(m.root,e),g=[],k=0;k<m.contents.length;k++){var h=m.contents[k];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(g.push(h),CKEDITOR.dom.element.setMarker(e,
h,"list_item_processed",!0))}h=null;for(k=0;k<g.length;k++)h=g[k].getCustomData("listarray_index"),f[h].indent=-1;for(k=h+1;k<f.length;k++)if(f[k].indent>f[k-1].indent+1){g=f[k-1].indent+1-f[k].indent;for(h=f[k].indent;f[k]&&f[k].indent>=h;)f[k].indent+=g,k++;k--}var d=CKEDITOR.plugins.list.arrayToList(f,e,null,b.config.enterMode,m.root.getAttribute("dir")).listNode,a,p;c(!0);c();d.replace(m.root);b.fire("contentDomInvalidated")}function B(b,m){this.name=b;this.context=this.type=m;this.allowedContent=
m+" li";this.requiredContent=m}function E(b,m,e,c){for(var f,g;f=b[c?"getLast":"getFirst"](J);)(g=f.getDirection(1))!==m.getDirection(1)&&f.setAttribute("dir",g),f.remove(),e?f[c?"insertBefore":"insertAfter"](e):m.append(f,c)}function F(b){function m(e){var c=b[e?"getPrevious":"getNext"](u);c&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(b.getName())&&(E(b,c,null,!e),b.remove(),b=c)}m();m(1)}function G(b){return b.type==CKEDITOR.NODE_ELEMENT&&(b.getName()in CKEDITOR.dtd.$block||b.getName()in CKEDITOR.dtd.$listItem)&&
CKEDITOR.dtd[b.getName()]["#"]}function C(b,m,e){b.fire("saveSnapshot");e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var c=e.extractContents();m.trim(!1,!0);var f=m.createBookmark(),g=new CKEDITOR.dom.elementPath(m.startContainer),k=g.block,g=g.lastElement.getAscendant("li",1)||k,h=new CKEDITOR.dom.elementPath(e.startContainer),d=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);k?(k=k.getBogus())&&k.remove():h&&(k=h.getPrevious(u))&&z(k)&&k.remove();(k=c.getLast())&&k.type==CKEDITOR.NODE_ELEMENT&&
k.is("br")&&k.remove();(k=m.startContainer.getChild(m.startOffset))?c.insertBefore(k):m.startContainer.append(c);d&&(c=A(d))&&(g.contains(d)?(E(c,d.getParent(),d),c.remove()):g.append(c));for(;e.checkStartOfBlock()&&e.checkEndOfBlock();){h=e.startPath();c=h.block;if(!c)break;c.is("li")&&(g=c.getParent(),c.equals(g.getLast(u))&&c.equals(g.getFirst(u))&&(c=g));e.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START);c.remove()}e=e.clone();c=b.editable();e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);
e.evaluator=function(a){return u(a)&&!z(a)};(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&F(e);m.moveToBookmark(f);m.select();b.fire("saveSnapshot")}function A(b){return(b=b.getLast(u))&&b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in v?b:null}var v={ol:1,ul:1},K=CKEDITOR.dom.walker.whitespaces(),H=CKEDITOR.dom.walker.bookmark(),u=function(b){return!(K(b)||H(b))},z=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(b,m,e,c,f){if(!v[b.getName()])return[];
c||(c=0);e||(e=[]);for(var g=0,k=b.getChildCount();g<k;g++){var h=b.getChild(g);h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,m,e,c+1);if("li"==h.$.nodeName.toLowerCase()){var d={parent:b,indent:c,element:h,contents:[]};f?d.grandparent=f:(d.grandparent=b.getParent(),d.grandparent&&"li"==d.grandparent.$.nodeName.toLowerCase()&&(d.grandparent=d.grandparent.getParent()));m&&CKEDITOR.dom.element.setMarker(m,h,"listarray_index",e.length);e.push(d);
for(var a=0,p=h.getChildCount(),l;a<p;a++)l=h.getChild(a),l.type==CKEDITOR.NODE_ELEMENT&&v[l.getName()]?CKEDITOR.plugins.list.listToArray(l,m,e,c+1,d.grandparent):d.contents.push(l)}}return e},arrayToList:function(b,m,e,c,f){e||(e=0);if(!b||b.length<e+1)return null;for(var g,k=b[e].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(k),d=null,a=e,p=Math.max(b[e].indent,0),l=null,q,n,t=c==CKEDITOR.ENTER_P?"p":"div";;){var r=b[a];g=r.grandparent;q=r.element.getDirection(1);if(r.indent==p){d&&b[a].parent.getName()==
d.getName()||(d=b[a].parent.clone(!1,1),f&&d.setAttribute("dir",f),h.append(d));l=d.append(r.element.clone(0,1));q!=d.getDirection(1)&&l.setAttribute("dir",q);for(g=0;g<r.contents.length;g++)l.append(r.contents[g].clone(1,1));a++}else if(r.indent==Math.max(p,0)+1)r=b[a-1].element.getDirection(1),a=CKEDITOR.plugins.list.arrayToList(b,null,a,c,r!=q?q:null),!l.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=k.$.documentMode&&l.append(k.createText(" ")),l.append(a.listNode),a=a.nextIndex;else if(-1==
r.indent&&!e&&g){v[g.getName()]?(l=r.element.clone(!1,!0),q!=g.getDirection(1)&&l.setAttribute("dir",q)):l=new CKEDITOR.dom.documentFragment(k);var d=g.getDirection(1)!=q,y=r.element,D=y.getAttribute("class"),z=y.getAttribute("style"),A=l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(c!=CKEDITOR.ENTER_BR||d||z||D),w,B=r.contents.length,x;for(g=0;g<B;g++)if(w=r.contents[g],H(w)&&1<B)A?x=w.clone(1,1):l.append(w.clone(1,1));else if(w.type==CKEDITOR.NODE_ELEMENT&&w.isBlockBoundary()){d&&!w.getDirection()&&
w.setAttribute("dir",q);n=w;var C=y.getAttribute("style");C&&n.setAttribute("style",C.replace(/([^;])$/,"$1;")+(n.getAttribute("style")||""));D&&w.addClass(D);n=null;x&&(l.append(x),x=null);l.append(w.clone(1,1))}else A?(n||(n=k.createElement(t),l.append(n),d&&n.setAttribute("dir",q)),z&&n.setAttribute("style",z),D&&n.setAttribute("class",D),x&&(n.append(x),x=null),n.append(w.clone(1,1))):l.append(w.clone(1,1));x&&((n||l).append(x),x=null);l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&a!=b.length-1&&(CKEDITOR.env.needsBrFiller&&
(q=l.getLast())&&q.type==CKEDITOR.NODE_ELEMENT&&q.is("br")&&q.remove(),(q=l.getLast(u))&&q.type==CKEDITOR.NODE_ELEMENT&&q.is(CKEDITOR.dtd.$block)||l.append(k.createElement("br")));q=l.$.nodeName.toLowerCase();"div"!=q&&"p"!=q||l.appendBogus();h.append(l);d=null;a++}else return null;n=null;if(b.length<=a||Math.max(b[a].indent,0)<p)break}if(m)for(b=h.getFirst();b;){if(b.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(m,b),b.getName()in CKEDITOR.dtd.$listItem&&(e=b,k=f=c=void 0,c=e.getDirection()))){for(f=
e.getParent();f&&!(k=f.getDirection());)f=f.getParent();c==k&&e.removeAttribute("dir")}b=b.getNextSourceNode()}return{listNode:h,nextIndex:a}}};var L=/^h[1-6]$/,J=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);B.prototype={exec:function(b){this.refresh(b,b.elementPath());var m=b.config,e=b.getSelection(),c=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var f=b.editable();if(f.getFirst(u)){var g=1==c.length&&c[0];(m=g&&g.getEnclosedNode())&&m.is&&this.type==m.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else m.enterMode==
CKEDITOR.ENTER_BR?f.appendBogus():c[0].fixBlock(1,m.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(c)}for(var m=e.createBookmarks(!0),f=[],k={},c=c.createIterator(),h=0;(g=c.getNextRange())&&++h;){var d=g.getBoundaryNodes(),a=d.startNode,p=d.endNode;a.type==CKEDITOR.NODE_ELEMENT&&"td"==a.getName()&&g.setStartAt(d.startNode,CKEDITOR.POSITION_AFTER_START);p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&g.setEndAt(d.endNode,CKEDITOR.POSITION_BEFORE_END);g=g.createIterator();for(g.forceBrBreak=
this.state==CKEDITOR.TRISTATE_OFF;d=g.getNextParagraph();)if(!d.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(k,d,"list_block",1);for(var l=b.elementPath(d),a=l.elements,p=0,l=l.blockLimit,q,n=a.length-1;0<=n&&(q=a[n]);n--)if(v[q.getName()]&&l.contains(q)){l.removeCustomData("list_group_object_"+h);(a=q.getCustomData("list_group_object"))?a.contents.push(d):(a={root:q,contents:[d]},f.push(a),CKEDITOR.dom.element.setMarker(k,q,"list_group_object",a));p=1;break}p||(p=l,p.getCustomData("list_group_object_"+
h)?p.getCustomData("list_group_object_"+h).contents.push(d):(a={root:p,contents:[d]},CKEDITOR.dom.element.setMarker(k,p,"list_group_object_"+h,a),f.push(a)))}}for(q=[];0<f.length;)if(a=f.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(v[a.root.getName()]){c=b;h=a;a=k;g=q;p=CKEDITOR.plugins.list.listToArray(h.root,a);l=[];for(d=0;d<h.contents.length;d++)n=h.contents[d],(n=n.getAscendant("li",!0))&&!n.getCustomData("list_item_processed")&&(l.push(n),CKEDITOR.dom.element.setMarker(a,n,"list_item_processed",
!0));for(var n=h.root.getDocument(),t=void 0,r=void 0,d=0;d<l.length;d++){var y=l[d].getCustomData("listarray_index"),t=p[y].parent;t.is(this.type)||(r=n.createElement(this.type),t.copyAttributes(r,{start:1,type:1}),r.removeStyle("list-style-type"),p[y].parent=r)}a=CKEDITOR.plugins.list.arrayToList(p,a,null,c.config.enterMode);p=void 0;l=a.listNode.getChildCount();for(d=0;d<l&&(p=a.listNode.getChild(d));d++)p.getName()==this.type&&g.push(p);a.listNode.replace(h.root);c.fire("contentDomInvalidated")}else{p=
b;g=a;d=q;l=g.contents;c=g.root.getDocument();h=[];1==l.length&&l[0].equals(g.root)&&(a=c.createElement("div"),l[0].moveChildren&&l[0].moveChildren(a),l[0].append(a),l[0]=a);g=g.contents[0].getParent();for(n=0;n<l.length;n++)g=g.getCommonAncestor(l[n].getParent());t=p.config.useComputedState;p=a=void 0;t=void 0===t||t;for(n=0;n<l.length;n++)for(r=l[n];y=r.getParent();){if(y.equals(g)){h.push(r);!p&&r.getDirection()&&(p=1);r=r.getDirection(t);null!==a&&(a=a&&a!=r?null:r);break}r=y}if(!(1>h.length)){l=
h[h.length-1].getNext();n=c.createElement(this.type);d.push(n);for(t=d=void 0;h.length;)d=h.shift(),t=c.createElement("li"),r=d,r.is("pre")||L.test(r.getName())||"false"==r.getAttribute("contenteditable")?d.appendTo(t):(d.copyAttributes(t),a&&d.getDirection()&&(t.removeStyle("direction"),t.removeAttribute("dir")),d.moveChildren(t),d.remove()),t.appendTo(n);a&&p&&n.setAttribute("dir",a);l?n.insertBefore(l):n.appendTo(g)}}else this.state==CKEDITOR.TRISTATE_ON&&v[a.root.getName()]&&I.call(this,b,a,k);
for(n=0;n<q.length;n++)F(q[n]);CKEDITOR.dom.element.clearAllMarkers(k);e.selectBookmarks(m);b.focus()},refresh:function(b,m){var e=m.contains(v,1),c=m.blockLimit||m.root;e&&c.contains(e)?this.setState(e.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(b){b.blockless||(b.addCommand("numberedlist",new B("numberedlist","ol")),b.addCommand("bulletedlist",new B("bulletedlist","ul")),b.ui.addButton&&
(b.ui.addButton("NumberedList",{label:b.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),b.ui.addButton("BulletedList",{label:b.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),b.on("key",function(m){var e=m.data.domEvent.getKey(),c;if("wysiwyg"==b.mode&&e in{8:1,46:1}){var f=b.getSelection().getRanges()[0],g=f&&f.startPath();if(f&&f.collapsed){var k=8==e,h=b.editable(),d=new CKEDITOR.dom.walker(f.clone());d.evaluator=function(a){return u(a)&&
!z(a)};d.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))};e=f.clone();if(k){var a;(a=g.contains(v))&&f.checkBoundaryOfElement(a,CKEDITOR.START)&&(a=a.getParent())&&a.is("li")&&(a=A(a))?(c=a,a=a.getPrevious(u),e.moveToPosition(a&&z(a)?a:c,CKEDITOR.POSITION_BEFORE_START)):(d.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.range.setEnd(f.startContainer,f.startOffset),(a=d.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in v||a.is("li"))&&(a.is("li")||(d.range.selectNodeContents(a),
d.reset(),d.evaluator=G,a=d.previous()),c=a,e.moveToElementEditEnd(c),e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(c)C(b,e,f),m.cancel();else{var p=g.contains(v);p&&f.checkBoundaryOfElement(p,CKEDITOR.START)&&(c=p.getFirst(u),f.checkBoundaryOfElement(c,CKEDITOR.START)&&(a=p.getPrevious(u),A(c)?a&&(f.moveToElementEditEnd(a),f.select()):b.execCommand("outdent"),m.cancel()))}}else if(c=g.contains("li")){if(d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),k=(h=c.getLast(u))&&
G(h)?h:c,g=0,(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in v&&a.equals(h)?(g=1,a=d.next()):f.checkBoundaryOfElement(k,CKEDITOR.END)&&(g=2),g&&a){f=f.clone();f.moveToElementEditStart(a);if(1==g&&(e.optimize(),!e.startContainer.equals(c))){for(c=e.startContainer;c.is(CKEDITOR.dtd.$inline);)p=c,c=c.getParent();p&&e.moveToPosition(p,CKEDITOR.POSITION_AFTER_END)}2==g&&(e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END),f.endPath().block&&f.moveToPosition(f.endPath().block,CKEDITOR.POSITION_AFTER_START));
C(b,e,f);m.cancel()}}else d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(v)&&(a=a.getFirst(u),g.block&&f.checkStartOfBlock()&&f.checkEndOfBlock()?(g.block.remove(),f.moveToElementEditStart(a),f.select()):A(a)?(f.moveToElementEditStart(a),f.select()):(f=f.clone(),f.moveToElementEditStart(a),C(b,e,f)),m.cancel());setTimeout(function(){b.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){if(!a.blockless){var b;b=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});b=a.addCommand("numberedListStyle",b);a.addFeature(b);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");b=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});b=a.addCommand("bulletedListStyle",b);
a.addFeature(b);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");a.addMenuGroup("list",108);a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var b=a.getName();if("ol"==b)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==b)return{bulletedlist:CKEDITOR.TRISTATE_OFF};
a=a.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function V(a,c,d){return n(c)&&n(d)&&d.equals(c.getNext(function(a){return!(E(a)||F(a)||u(a))}))}function z(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2))}function O(a){var c=a.element;if(c&&n(c)&&(c=c.getAscendant(a.triggers,!0))&&a.editable.contains(c)){var d=P(c);if("true"==d.getAttribute("contenteditable"))return c;if(d.is(a.triggers))return d}return null}function ka(a,c,d){r(a,c);r(a,d);a=c.size.bottom;d=d.size.top;return a&&d?0|(a+d)/2:a||d}function w(a,c,d){return c=
c[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!E(b)||n(b)&&!u(b)&&!A(a,b)})}function q(a,c,d){return a>c&&a<d}function P(a,c){if(a.data("cke-editable"))return null;for(c||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function la(a){var c=a.doc,d=G('\x3cspan contenteditable\x3d"false" style\x3d"'+Q+"position:absolute;border-top:1px dashed "+a.boxColor+'"\x3e\x3c/span\x3e',c),b=CKEDITOR.getUrl(this.path+
"images/"+(t.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");v(d,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(a.editable,!0);return this},lineChildren:[v(G('\x3cspan title\x3d"'+a.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',c),{base:Q+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+b+") center no-repeat "+a.boxColor+";cursor:pointer;"+(t.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":
"")+(t.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),v(G(W,c),{base:X+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),v(G(W,c),{base:X+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px",
"border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){r(a,this);var b=a.holdDistance,c=this.size;return c&&q(a.mouse.y,c.top-b,c.bottom+b)&&q(a.mouse.x,c.left-b,c.right+b)?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,h=d.upper,g=d.lower,l=h||g,p=l.getParent(),m={};this.trigger=d;h&&r(a,h,!0);g&&r(a,g,!0);r(a,p,!0);a.inInlineMode&&H(a,!0);p.equals(c)?(m.left=b.scroll.x,m.right=-b.scroll.x,m.width=""):(m.left=
l.size.left-l.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),m.width=l.size.outerWidth+l.size.margin.left+l.size.margin.right+b.scroll.x,m.right="");h&&g?m.top=h.size.margin.bottom===g.size.margin.top?0|h.size.bottom+h.size.margin.bottom/2:h.size.margin.bottom<g.size.margin.top?h.size.bottom+h.size.margin.bottom:h.size.bottom+h.size.margin.bottom-g.size.margin.top:h?g||(m.top=h.size.bottom+h.size.margin.bottom):m.top=g.size.top-g.size.margin.top;d.is(C)||q(m.top,
b.scroll.y-15,b.scroll.y+5)?(m.top=a.inInlineMode?0:b.scroll.y,this.look(C)):d.is(D)||q(m.top,b.pane.bottom-5,b.pane.bottom+15)?(m.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(D)):(a.inInlineMode&&(m.top-=b.editable.top+b.editable.border.top),this.look(x));a.inInlineMode&&(m.top--,m.top+=b.editable.scroll.top,m.left+=b.editable.scroll.left);for(var n in m)m[n]=CKEDITOR.tools.cssLength(m[n]);this.setStyles(m)},look:function(a){if(this.oldLook!=
a){for(var b=this.lineChildren.length,c;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new R("span",a.doc)});for(c=d.lineChildren.length;c--;)d.lineChildren[c].appendTo(d);d.look(x);d.appendTo(d.wrap);d.unselectable();d.lineChildren[0].on("mouseup",function(b){d.detach();S(a,function(b){var c=a.line.trigger;b[c.is(I)?"insertBefore":"insertAfter"](c.is(I)?c.lower:c.upper)},!0);a.editor.focus();t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();
b.data.preventDefault(!0)});d.on("mousedown",function(a){a.data.preventDefault(!0)});a.line=d}function S(a,c,d){var b=new CKEDITOR.dom.range(a.doc),e=a.editor,f;t.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(J):(f=(f=P(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new R(K[f],a.doc),f.is("br")||a.doc.createText(J).appendTo(f));d&&e.fire("saveSnapshot");c(f);b.moveToPosition(f,CKEDITOR.POSITION_AFTER_START);e.getSelection().selectRanges([b]);a.hotNode=f;d&&e.fire("saveSnapshot")}
function Y(a,c){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(b){var d=t.ie&&9>t.version?" ":J,f=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!c;S(a,function(d){f&&a.hotNode&&a.hotNode.remove();d[c?"insertAfter":"insertBefore"](b);d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!c});a.lastCmdDirection=!!c});t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();a.line.detach()}return function(b){b=b.getSelection().getStartElement();
var e;b=b.getAscendant(Z,1);if(!aa(a,b)&&b&&!b.equals(a.editable)&&!b.contains(a.editable)){(e=P(b))&&"false"==e.getAttribute("contenteditable")&&(b=e);a.element=b;e=w(a,b,!c);var f;n(e)&&e.is(a.triggers)&&e.is(ma)&&(!w(a,e,!c)||(f=w(a,e,!c))&&n(f)&&f.is(a.triggers))?d(e):(f=O(a,b),n(f)&&(w(a,f,!c)?(b=w(a,f,!c))&&n(b)&&b.is(a.triggers)&&d(f):d(f)))}}}()}}function A(a,c){if(!c||c.type!=CKEDITOR.NODE_ELEMENT||!c.$)return!1;var d=a.line;return d.wrap.equals(c)||d.wrap.contains(c)}function n(a){return a&&
a.type==CKEDITOR.NODE_ELEMENT&&a.$}function u(a){if(!n(a))return!1;var c;(c=ba(a))||(n(a)?(c={left:1,right:1,center:1},c=!(!c[a.getComputedStyle("float")]&&!c[a.getAttribute("align")])):c=!1);return c}function ba(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function L(a,c){return n(c)?c.is(a.triggers):null}function aa(a,c){if(!c)return!1;for(var d=c.getParents(1),b=d.length;b--;)for(var e=a.tabuList.length;e--;)if(d[b].hasAttribute(a.tabuList[e]))return!0;return!1}function na(a,
c,d){c=c[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(oa)});if(!c)return!1;r(a,c);return d?c.size.top>a.mouse.y:c.size.bottom<a.mouse.y}function ca(a){var c=a.editable,d=a.mouse,b=a.view,e=a.triggerOffset;H(a);var f=d.y>(a.inInlineMode?b.editable.top+b.editable.height/2:Math.min(b.editable.height,b.pane.height)/2),c=c[f?"getLast":"getFirst"](function(a){return!(E(a)||F(a))});if(!c)return null;A(a,c)&&(c=a.line.wrap[f?"getPrevious":"getNext"](function(a){return!(E(a)||F(a))}));
if(!n(c)||u(c)||!L(a,c))return null;r(a,c);return!f&&0<=c.size.top&&q(d.y,0,c.size.top+e)?(a=a.inInlineMode||0===b.scroll.y?C:x,new z([null,c,I,M,a])):f&&c.size.bottom<=b.pane.height&&q(d.y,c.size.bottom-e,b.pane.height)?(a=a.inInlineMode||q(c.size.bottom,b.pane.height-e,b.pane.height)?D:x,new z([c,null,da,M,a])):null}function ea(a){var c=a.mouse,d=a.view,b=a.triggerOffset,e=O(a);if(!e)return null;r(a,e);var b=Math.min(b,0|e.size.outerHeight/2),f=[],k,h;if(q(c.y,e.size.top-1,e.size.top+b))h=!1;else if(q(c.y,
e.size.bottom-b,e.size.bottom+1))h=!0;else return null;if(u(e)||na(a,e,h)||e.getParent().is(fa))return null;var g=w(a,e,!h);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(n(g)){if(u(g)||!L(a,g)||g.getParent().is(fa))return null;f=[g,e][h?"reverse":"concat"]().concat([T,M])}}else e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?(H(a),h&&q(c.y,e.size.bottom-b,d.pane.height)&&q(e.size.bottom,d.pane.height-b,d.pane.height)?k=D:q(c.y,0,e.size.top+b)&&(k=C)):k=x,f=[null,e][h?"reverse":
"concat"]().concat([h?da:I,M,k,e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?h?D:C:x]);return 0 in f?new z(f):null}function U(a,c,d,b){for(var e=c.getDocumentPosition(),f={},k={},h={},g={},l=y.length;l--;)f[y[l]]=parseInt(c.getComputedStyle.call(c,"border-"+y[l]+"-width"),10)||0,h[y[l]]=parseInt(c.getComputedStyle.call(c,"padding-"+y[l]),10)||0,k[y[l]]=parseInt(c.getComputedStyle.call(c,"margin-"+y[l]),10)||0;d&&!b||N(a,b);g.top=e.y-(d?0:a.view.scroll.y);g.left=e.x-(d?0:a.view.scroll.x);
g.outerWidth=c.$.offsetWidth;g.outerHeight=c.$.offsetHeight;g.height=g.outerHeight-(h.top+h.bottom+f.top+f.bottom);g.width=g.outerWidth-(h.left+h.right+f.left+f.right);g.bottom=g.top+g.outerHeight;g.right=g.left+g.outerWidth;a.inInlineMode&&(g.scroll={top:c.$.scrollTop,left:c.$.scrollLeft});return v({border:f,padding:h,margin:k,ignoreScroll:d},g,!0)}function r(a,c,d){if(!n(c))return c.size=null;if(!c.size)c.size={};else if(c.size.ignoreScroll==d&&c.size.date>new Date-ga)return null;return v(c.size,
U(a,c,d),{date:+new Date},!0)}function H(a,c){a.view.editable=U(a,a.editable,c,!0)}function N(a,c){a.view||(a.view={});var d=a.view;if(!(!c&&d&&d.date>new Date-ga)){var b=a.win,d=b.getScrollPosition(),b=b.getViewPaneSize();v(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-b.width,height:a.doc.$.documentElement.scrollHeight-b.height},pane:{width:b.width,height:b.height,bottom:b.height+d.y},date:+new Date},!0)}}function pa(a,c,d,b){for(var e=b,f=b,k=0,h=!1,g=!1,l=a.view.pane.height,
p=a.mouse;p.y+k<l&&0<p.y-k;){h||(h=c(e,b));g||(g=c(f,b));!h&&0<p.y-k&&(e=d(a,{x:p.x,y:p.y-k}));!g&&p.y+k<l&&(f=d(a,{x:p.x,y:p.y+k}));if(h&&g)break;k+=2}return new z([e,f,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var c=a.config,d=c.magicline_triggerOffset||30,b={editor:a,enterMode:c.enterMode,triggerOffset:d,holdDistance:0|d*(c.magicline_holdDistance||.5),boxColor:c.magicline_color||"#ff0000",rtl:"rtl"==c.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(c.magicline_tabuList||
[]),triggers:c.magicline_everywhere?Z:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},e,f,k;b.isRelevant=function(a){return n(a)&&!A(b,a)&&!u(a)};a.on("contentDom",function(){var d=a.editable(),g=a.document,l=a.window;v(b,{editable:d,inInlineMode:d.isInline(),doc:g,win:l,hotNode:null},!0);b.boundary=b.inInlineMode?b.editable:b.doc.getDocumentElement();d.is(B.$inline)||(b.inInlineMode&&!ba(d)&&d.setStyles({position:"relative",top:null,left:null}),la.call(this,b),N(b),d.attachListener(a,"beforeUndoImage",
function(){b.line.detach()}),d.attachListener(a,"beforeGetData",function(){b.line.wrap.getParent()&&(b.line.detach(),a.once("getData",function(){b.line.attach()},null,null,1E3))},null,null,0),d.attachListener(b.inInlineMode?g:g.getWindow().getFrame(),"mouseout",function(c){if("wysiwyg"==a.mode)if(b.inInlineMode){var d=c.data.$.clientX;c=c.data.$.clientY;N(b);H(b,!0);var e=b.view.editable,f=b.view.scroll;d>e.left-f.x&&d<e.right-f.x&&c>e.top-f.y&&c<e.bottom-f.y||(clearTimeout(k),k=null,b.line.detach())}else clearTimeout(k),
k=null,b.line.detach()}),d.attachListener(d,"keyup",function(){b.hiddenMode=0}),d.attachListener(d,"keydown",function(c){if("wysiwyg"==a.mode)switch(c.data.getKeystroke()){case 2228240:case 16:b.hiddenMode=1,b.line.detach()}}),d.attachListener(b.inInlineMode?d:g,"mousemove",function(c){f=!0;if("wysiwyg"==a.mode&&!a.readOnly&&!k){var d={x:c.data.$.clientX,y:c.data.$.clientY};k=setTimeout(function(){b.mouse=d;k=b.trigger=null;N(b);f&&!b.hiddenMode&&a.focusManager.hasFocus&&!b.line.mouseNear()&&(b.element=
ha(b,!0))&&((b.trigger=ca(b)||ea(b)||ia(b))&&!aa(b,b.trigger.upper||b.trigger.lower)?b.line.attach().place():(b.trigger=null,b.line.detach()),f=!1)},30)}}),d.attachListener(l,"scroll",function(){"wysiwyg"==a.mode&&(b.line.detach(),t.webkit&&(b.hiddenMode=1,clearTimeout(e),e=setTimeout(function(){b.mouseDown||(b.hiddenMode=0)},50)))}),d.attachListener(ja?g:l,"mousedown",function(){"wysiwyg"==a.mode&&(b.line.detach(),b.hiddenMode=1,b.mouseDown=1)}),d.attachListener(ja?g:l,"mouseup",function(){b.hiddenMode=
0;b.mouseDown=0}),a.addCommand("accessPreviousSpace",Y(b)),a.addCommand("accessNextSpace",Y(b,!0)),a.setKeystroke([[c.magicline_keystrokePrevious,"accessPreviousSpace"],[c.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var c,d,e,f;for(f in{p:1,br:1,div:1})for(c=a.document.getElementsByTag(f),e=c.count();e--;)if((d=c.getItem(e)).data("cke-magicline-hot")){b.hotNode=d;b.lastCmdDirection="true"===d.data("cke-magicline-dir")?!0:!1;return}}),this.backdoor={accessFocusSpace:S,
boxTrigger:z,isLine:A,getAscendantTrigger:O,getNonEmptyNeighbour:w,getSize:U,that:b,triggerEdge:ea,triggerEditable:ca,triggerExpand:ia})},this)}});var v=CKEDITOR.tools.extend,R=CKEDITOR.dom.element,G=R.createFromHtml,t=CKEDITOR.env,ja=CKEDITOR.env.ie&&9>CKEDITOR.env.version,B=CKEDITOR.dtd,K={},I=128,da=64,T=32,M=16,C=4,D=2,x=1,J=" ",fa=B.$listItem,oa=B.$tableContent,ma=v({},B.$nonEditable,B.$empty),Z=B.$block,ga=100,Q="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",
X=Q+"border-color:transparent;display:block;border-style:solid;",W="\x3cspan\x3e"+J+"\x3c/span\x3e";K[CKEDITOR.ENTER_BR]="br";K[CKEDITOR.ENTER_P]="p";K[CKEDITOR.ENTER_DIV]="div";z.prototype={set:function(a,c,d){this.properties=a+c+(d||x);return this},is:function(a){return(this.properties&a)==a}};var ha=function(){function a(a,d){var b=a.$.elementFromPoint(d.x,d.y);return b&&b.nodeType?new CKEDITOR.dom.element(b):null}return function(c,d,b){if(!c.mouse)return null;var e=c.doc,f=c.line.wrap;b=b||c.mouse;
var k=a(e,b);d&&A(c,k)&&(f.hide(),k=a(e,b),f.show());return!k||k.type!=CKEDITOR.NODE_ELEMENT||!k.$||t.ie&&9>t.version&&!c.boundary.equals(k)&&!c.boundary.contains(k)?null:k}}(),E=CKEDITOR.dom.walker.whitespaces(),F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),ia=function(){function a(a){var b=a.element,e,f,k;if(!n(b)||b.contains(a.editable)||b.isReadOnly())return null;k=pa(a,function(a,b){return!b.equals(a)},function(a,b){return ha(a,!0,b)},b);e=k.upper;f=k.lower;if(V(a,e,f))return k.set(T,
8);if(e&&b.contains(e))for(;!e.getParent().equals(b);)e=e.getParent();else e=b.getFirst(function(b){return c(a,b)});if(f&&b.contains(f))for(;!f.getParent().equals(b);)f=f.getParent();else f=b.getLast(function(b){return c(a,b)});if(!e||!f)return null;r(a,e);r(a,f);if(!q(a.mouse.y,e.size.top,f.size.bottom))return null;for(var b=Number.MAX_VALUE,h,g,l,p;f&&!f.equals(e)&&(g=e.getNext(a.isRelevant));)h=Math.abs(ka(a,e,g)-a.mouse.y),h<b&&(b=h,l=e,p=g),e=g,r(a,e);if(!l||!p||!q(a.mouse.y,l.size.top,p.size.bottom))return null;
k.upper=l;k.lower=p;return k.set(T,8)}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||F(b)||u(b)||A(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var b=a(c),e;if(e=b){e=b.upper;var f=b.lower;e=!e||!f||u(f)||u(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:L(c,e)&&L(c,f)&&V(c,e,f)?!0:!1}return e?b:null}}(),y=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;
CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function n(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var c=a.$.elements.namedItem(f[b]);c&&(c=new CKEDITOR.dom.element(c),e.push([c,c.nextSibling]),c.remove())}return e}function t(a,e){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<e.length)for(var f=e.length-1;0<=f;f--){var b=e[f][0],c=e[f][1];c?b.insertBefore(c):b.appendTo(a)}}function r(a,e){var f=n(a),b={},c=a.$;e||(b["class"]=c.className||
"",c.className="");b.inline=c.style.cssText||"";e||(c.style.cssText="position: static; overflow: visible");t(f);return b}function u(a,e){var f=n(a),b=a.$;"class"in e&&(b.className=e["class"]);"inline"in e&&(b.style.cssText=e.inline);t(f)}function v(a){if(!a.editable().isInline()){var e=CKEDITOR.instances,f;for(f in e){var b=e[f];"wysiwyg"!=b.mode||b.readOnly||(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),
a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=c.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=a.lang,b=CKEDITOR.document,c=b.getWindow(),l,m,p,n=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),g=a.ui.space("contents");
if("wysiwyg"==a.mode){var d=a.getSelection();l=d&&d.getRanges();m=c.getScrollPosition()}else{var k=a.editable().$;l=!CKEDITOR.env.ie&&[k.selectionStart,k.selectionEnd];m=[k.scrollLeft,k.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){c.on("resize",e);p=c.getScrollPosition();for(d=a.container;d=d.getParent();)d.setCustomData("maximize_saved_styles",r(d)),d.setStyle("z-index",a.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",r(g,!0));h.setCustomData("maximize_saved_styles",r(h,!0));
g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};b.getDocumentElement().setStyles(g);!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||b.getBody().setStyles(g);CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(0,0)},0):c.$.scrollTo(0,0);h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");h.$.offsetLeft;h.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"});h.addClass("cke_maximized");
e();g=h.getDocumentPosition();h.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"});CKEDITOR.env.gecko&&v(a)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",e);for(var d=[g,h],q=0;q<d.length;q++)u(d[q],d[q].getCustomData("maximize_saved_styles")),d[q].removeCustomData("maximize_saved_styles");for(d=a.container;d=d.getParent();)u(d,d.getCustomData("maximize_saved_styles")),d.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(p.x,p.y)},0):c.$.scrollTo(p.x,
p.y);h.removeClass("cke_maximized");CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0));a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:g.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState();if(d=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,d=CKEDITOR.document.getById(d._.id),d.getChild(1).setHtml(g),d.setAttribute("title",g),d.setAttribute("href",'javascript:void("'+
g+'");');"wysiwyg"==a.mode?l?(CKEDITOR.env.gecko&&v(a),a.getSelection().selectRanges(l),(k=a.getSelection().getStartElement())&&k.scrollIntoView(!0)):c.$.scrollTo(m.x,m.y):(l&&(k.selectionStart=l[0],k.selectionEnd=l[1]),k.scrollLeft=m[0],k.scrollTop=m[1]);l=m=null;n=this.state;a.fire("maximize",this.state)},canUndo:!1});a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==
CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:n)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(b){var a=this;b.setData(b.config.newpage_html||"",function(){b.focus();setTimeout(function(){b.fire("afterCommandExec",{name:"newpage",command:a});b.selectionChange()},200)})},async:!0});a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function e(a){return{"aria-label":a,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var a=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g,
" !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}")},init:function(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(b){b=b.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&a.getSelection().selectElement(b)})}))},afterInit:function(a){function b(f){CKEDITOR.tools.extend(f.attributes,
e(a.lang.pagebreak.alt),!0);f.children.length=0}var c=a.dataProcessor,g=c&&c.dataFilter,c=c&&c.htmlFilter,h=/page-break-after\s*:\s*always/i,k=/display\s*:\s*none/i;c&&c.addRules({attributes:{"class":function(a,b){var c=a.replace("cke_pagebreak","");if(c!=a){var d=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];b.children.length=0;b.add(d);d=b.attributes;delete d["aria-label"];delete d.contenteditable;delete d.title}return c}}},{applyToAll:!0,
priority:5});g&&g.addRules({elements:{div:function(a){if(a.attributes["data-cke-pagebreak"])b(a);else if(h.test(a.attributes.style)){var c=a.children[0];c&&"span"==c.name&&k.test(c.attributes.style)&&b(a)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(a){var b=a.document.createElement("div",{attributes:e(a.lang.pagebreak.alt)});a.insertElement(b)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(a){return(a=a.parent)&&"div"==a.name&&a.styles&&a.styles["page-break-after"]},
styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var c={canUndo:!1,async:!0,exec:function(a){a.getClipboardData({title:a.lang.pastetext.title},function(b){b&&a.fire("paste",{type:"text",dataValue:b.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastetext",command:c,returnValue:!!b})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(a){a.addCommand("pastetext",c);a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,
command:"pastetext",toolbar:"clipboard,40"});if(a.config.forcePasteAsPlainText)a.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")});a.on("pasteState",function(b){a.getCommand("pastetext").setState(b.data)})}})})();(function(){function h(a,d,f){var b=CKEDITOR.cleanWord;b?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||d+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0));return!b}function k(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(a){var d=0,f=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var e=this;d=1;a.once("beforePaste",k);a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",
{type:"html",dataValue:c.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!c})})}});a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});a.on("pasteState",function(b){a.getCommand("pastefromword").setState(b.data)});a.on("paste",function(b){var e=b.data,c=e.dataValue;if(c&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(c))){e.dontFilter=
!0;var g=h(a,f,function(){if(g)a.fire("paste",e);else if(!a.config.pasteFromWordPromptCleanup||d||confirm(a.lang.pastefromword.confirmCleanup))e.dataValue=CKEDITOR.cleanWord(c,a);d=0});g&&b.cancel()}},null,null,3)}})})();(function(){var h,k={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(a){var g,b=a.config,f=b.baseHref?'\x3cbase href\x3d"'+b.baseHref+'"/\x3e':"";if(b.fullPage)g=a.getData().replace(/<head>/,"$\x26"+f).replace(/[^>]*(?=<\/title>)/,"$\x26 \x26mdash; "+a.lang.preview.preview);else{var b="\x3cbody ",d=a.document&&a.document.getBody();d&&(d.getAttribute("id")&&(b+='id\x3d"'+d.getAttribute("id")+'" '),d.getAttribute("class")&&(b+='class\x3d"'+d.getAttribute("class")+'" '));b+="\x3e";g=a.config.docType+
'\x3chtml dir\x3d"'+a.config.contentsLangDirection+'"\x3e\x3chead\x3e'+f+"\x3ctitle\x3e"+a.lang.preview.preview+"\x3c/title\x3e"+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+"\x3c/head\x3e"+b+a.getData()+"\x3c/body\x3e\x3c/html\x3e"}f=640;b=420;d=80;try{var c=window.screen,f=Math.round(.8*c.width),b=Math.round(.7*c.height),d=Math.round(.1*c.width)}catch(k){}if(!1===a.fire("contentPreview",a={dataValue:g}))return!1;var c="",e;CKEDITOR.env.ie&&(window._cke_htmlToLoad=a.dataValue,e="javascript:void( (function(){document.open();"+
("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )",c="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=a.dataValue,c=CKEDITOR.getUrl(h+"preview.html"));c=window.open(c,null,"toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d"+f+",height\x3d"+b+",left\x3d"+d);CKEDITOR.env.ie&&c&&(c.location=
e);CKEDITOR.env.ie||CKEDITOR.env.gecko||(e=c.document,e.open(),e.write(a.dataValue),e.close());return!0}};CKEDITOR.plugins.add("preview",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(h=this.path,a.addCommand("preview",k),a.ui.addButton&&a.ui.addButton("Preview",{label:a.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var h=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,m=a.getSelection().getRanges(),n=m.createIterator(),p=function(a){return a.type==CKEDITOR.NODE_ELEMENT},c;c=n.getNextRange();){c.collapsed||c.enlarge(CKEDITOR.ENLARGE_ELEMENT);
var l=c.createBookmark(),b=l.startNode,d=l.endNode,k=function(b){for(var c=a.elementPath(b),e=c.elements,d=1,g;(g=e[d])&&!g.equals(c.block)&&!g.equals(c.blockLimit);d++)h.test(g.getName())&&f(a,g)&&b.breakParent(g)};k(b);if(d)for(k(d),b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(d);)if(b.isReadOnly()){if(b.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;b=b.getNext(p)}else k=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==b.getName()&&b.data("cke-realelement")||!f(a,b)||(h.test(b.getName())?
b.remove(1):(b.removeAttributes(e),a.fire("removeFormatCleanup",b))),b=k;c.moveToBookmark(l)}a.forceNextSelectionCheck();a.getSelection().selectRanges(m)}}},filter:function(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++)if(!1===e[f](h))return!1;return!0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";
CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var b={readOnly:1,exec:function(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit()}catch(b){a.submit.click&&a.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(a){a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.addCommand("save",b).modes={wysiwyg:!!a.element.$.form},a.ui.addButton&&a.ui.addButton("Save",{label:a.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(b){b.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var b=a.editable();if(b.is("textarea"))a=b.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(b.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var c=a.createRange();c.selectNodeContents(b);c.select()}a.forceNextSelectionCheck();a.selectionChange()}},canUndo:!1});b.ui.addButton&&
b.ui.addButton("SelectAll",{label:b.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var k={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var c=this.state!=CKEDITOR.TRISTATE_ON||a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!a.focusManager.hasFocus?"removeClass":"attachClass";a.editable()[c]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),c,b,e,f,k=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&
9>CKEDITOR.env.version),g=l?":not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)":"",d,h;for(c=b=e=f="";d=a.pop();)h=a.length?",":"",c+=".cke_show_blocks "+d+g+h,e+=".cke_show_blocks.cke_contents_ltr "+d+g+h,f+=".cke_show_blocks.cke_contents_rtl "+d+g+h,b+=".cke_show_blocks "+d+g+"{background-image:url("+CKEDITOR.getUrl(k+"images/block_"+d+".png")+")}";CKEDITOR.addCss((c+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(b,e+"{background-position:top left;padding-left:8px}",
f+"{background-position:top right;padding-right:8px}"));l||CKEDITOR.addCss(".cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(a){function c(){b.refresh(a)}
if(!a.blockless){var b=a.addCommand("showblocks",k);b.canUndo=!1;a.config.startupOutlineBlocks&&b.setState(CKEDITOR.TRISTATE_ON);a.ui.addButton&&a.ui.addButton("ShowBlocks",{label:a.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a.on("focus",c),a.on("blur",c));a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)})}}})})();(function(){var f={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,
"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a)},init:function(a){var b=a.addCommand("showborders",f);b.canUndo=!1;!1!==a.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON);a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)},null,null,100);a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.on("removeFormatCleanup",function(d){d=d.data;a.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&d.is("table")&&(!d.hasAttribute("border")||
0>=parseInt(d.getAttribute("border"),10))&&d.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter;b=b&&b.htmlFilter;a&&a.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"],c=parseInt(a.border,10);c&&!(0>=c)||b&&-1!=b.indexOf("cke_show_border")||(a["class"]=(b||"")+" cke_show_border")}}});b&&b.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,
""))}}})}});CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;if("table"==b||"tableProperties"==b)if(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var e=parseInt(this.getValue(),10);c[!e||0>=e?"addClass":"removeClass"]("cke_show_border")}}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,
arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments);parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}})})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(a){function d(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();a&&this.focus()}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;a.addMode("source",function(e){var b=a.ui.space("contents").getDocument().createElement("textarea");b.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?
"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));b.setAttribute("dir","ltr");b.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");a.ui.space("contents").append(b);b=a.editable(new c(a,b));b.setData(a.getData(1));CKEDITOR.env.ie&&(b.attachListener(a,"resize",d,b),b.attachListener(CKEDITOR.document.getWindow(),"resize",d,b),CKEDITOR.tools.setTimeout(d,0,b));a.fire("ariaWidget",
this);e()});a.addCommand("source",f.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var c=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},
insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){c.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(c){"wysiwyg"==c.mode&&c.fire("saveSnapshot");c.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);c.setMode("source"==c.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var b=
a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.bindEvents(a);this.parseConfig(a);this.addRule(a);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(a);var b=a.lang.scayt,e=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:b.text_title,title:a.plugins.wsc?a.lang.wsc.title:b.text_title,modes:{wysiwyg:!(e.ie&&(8>e.version||e.quirks))},
toolbar:"spellchecker,20",refresh:function(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=d.state.scayt[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);a.fire("scaytButtonState",b)},onRender:function(){var b=this;a.on("scaytButtonState",function(a){void 0!==typeof a.data&&b.setState(a.data)})},onMenu:function(){var b=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&d.state.scayt[a.name]?"btn_disable":"btn_enable"];b={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};a.config.scayt_uiTabs[0]||delete b.scaytOptions;a.config.scayt_uiTabs[1]||delete b.scaytLangs;a.config.scayt_uiTabs[2]||delete b.scaytDict;return b}});a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(b,d){var e=
a.scayt,k,l;e&&(l=e.getSelectionNode())&&(k=c.menuGenerator(a,l),e.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" .")));return k}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(b){return function(){var d=a.scayt;d&&d.hideBanner();return b.apply(this)}}))},addMenuItems:function(a){var c=this,d=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");for(var b=a.config.scayt_contextMenuItemsOrder.split("|"),e=0;e<b.length;e++)b[e]="scayt_"+b[e];
if((b=["grayt_description","grayt_suggest","grayt_control"].concat(b))&&b.length)for(e=0;e<b.length;e++)a.addMenuGroup(b[e],e-10);a.addCommand("scaytToggle",{exec:function(a){var b=a.scayt;d.state.scayt[a.name]=!d.state.scayt[a.name];!0===d.state.scayt[a.name]?b||d.createScayt(a):b&&d.destroy(a)}});a.addCommand("scaytAbout",{exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytOptions",{exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();
a.openDialog(c.dialogName)}});a.addCommand("scaytLangs",{exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytDict",{exec:function(a){a.scayt.tabToOpen="dictionaries";a.lockSelection();a.openDialog(c.dialogName)}});b={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",
command:"scaytOptions"},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};a.plugins.wsc&&(b.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,d=a.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(c=c.replace(/\s/g,""))?(d&&b.state.scayt[a.name]&&d.setMarkupPaused&&d.setMarkupPaused(!0),
a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}});a.addMenuItems(b)},bindEvents:function(a){var c=CKEDITOR.plugins.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,b=function(){c.destroy(a)},e=function(){!c.state.scayt[a.name]||a.readOnly||a.scayt||c.createScayt(a)},f=function(){var b=a.editable();b.attachListener(b,"focus",function(b){CKEDITOR.plugins.scayt&&!a.scayt&&setTimeout(e,0);b=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[a.name]&&a.scayt;var c,
h;if((d||b)&&a._.savedSelection){b=a._.savedSelection.getSelectedElement();b=!b&&a._.savedSelection.getRanges();for(var f=0;f<b.length;f++)h=b[f],"string"===typeof h.startContainer.$.nodeValue&&(c=h.startContainer.getText().length,(c<h.startOffset||c<h.endOffset)&&a.unlockSelection(!1))}},this,null,-10)},g=function(){d?a.config.scayt_inlineModeImmediateMarkup?e():(a.on("blur",function(){setTimeout(b,0)}),a.on("focus",e),a.focusManager.hasFocus&&e()):e();f();var c=a.editable();c.attachListener(c,"mousedown",
function(b){b=b.data.getTarget();var d=a.widgets&&a.widgets.getByElement(b);d&&(d.wrapper=b.getAscendant(function(a){return a.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};a.on("contentDom",g);a.on("beforeCommandExec",function(b){var d=a.scayt,e=null,f=!1,g=!0;b.data.name in c.options.disablingCommandExec&&"wysiwyg"==a.mode?d&&(c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==b.data.name&&"italic"!==b.data.name&&"underline"!==b.data.name&&"strike"!==b.data.name&&
"subscript"!==b.data.name&&"superscript"!==b.data.name&&"enter"!==b.data.name&&"cut"!==b.data.name&&"language"!==b.data.name||!d||("cut"===b.data.name&&(g=!1,f=!0),"language"===b.data.name&&(e=(e=a.plugins.language.getCurrentLangElement(a))&&e.$,f=!0),a.fire("reloadMarkupScayt",{removeOptions:{removeInside:g,forceBookmark:f,selectionNode:e},timeout:0}))});a.on("beforeSetMode",function(b){if("source"==b.data){if(b=a.scayt)c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);a.document&&
a.document.getBody().removeAttribute("_jquid")}});a.on("afterCommandExec",function(b){"wysiwyg"!=a.mode||"undo"!=b.data.name&&"redo"!=b.data.name||setTimeout(function(){var b=a.scayt,d=b&&b.getScaytLangList();d&&d.ltr&&d.rtl&&b.fire("startSpellCheck, startGrammarCheck")},250)});a.on("readOnly",function(b){var d;b&&(d=a.scayt,!0===b.editor.readOnly?d&&d.fire("removeMarkupInDocument",{}):d?d.fire("startSpellCheck, startGrammarCheck"):"wysiwyg"==b.editor.mode&&!0===c.state.scayt[b.editor.name]&&(c.createScayt(a),
b.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});a.on("beforeDestroy",b);a.on("setData",function(){b();(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||a.plugins.divarea)&&g()},this,null,50);a.on("reloadMarkupScayt",function(b){var d=b.data&&b.data.removeOptions;setTimeout(function(){var b=a.scayt,c=b&&b.getScaytLangList();c&&c.ltr&&c.rtl&&(a.document.fire("keydown",new CKEDITOR.dom.event({keyCode:37})),b.removeMarkupInSelectionNode(d),b.fire("startSpellCheck, startGrammarCheck"))},b.data&&
b.data.timeout||0)});a.on("insertElement",function(){a.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);a.on("insertHtml",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("insertText",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("scaytDialogShown",function(b){b.data.selectPage(a.scayt.tabToOpen)})},parseConfig:function(a){var c=CKEDITOR.plugins.scayt;c.replaceOldOptionsNames(a.config);"boolean"!==typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=
!1);c.state.scayt[a.name]=a.config.scayt_autoStartup;"boolean"!==typeof a.config.grayt_autoStartup&&(a.config.grayt_autoStartup=!1);"boolean"!==typeof a.config.scayt_inlineModeImmediateMarkup&&(a.config.scayt_inlineModeImmediateMarkup=!1);c.state.grayt[a.name]=a.config.grayt_autoStartup;a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignore|ignoreall|add");a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");a.config.scayt_sLang||
(a.config.scayt_sLang="en_US");if(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)a.config.scayt_maxSuggestions=5;if(void 0===a.config.scayt_minWordLength||"number"!=typeof a.config.scayt_minWordLength||1>a.config.scayt_minWordLength)a.config.scayt_minWordLength=4;if(void 0===a.config.scayt_customDictionaryIds||"string"!==typeof a.config.scayt_customDictionaryIds)a.config.scayt_customDictionaryIds="";if(void 0===a.config.scayt_userDictionaryName||
"string"!==typeof a.config.scayt_userDictionaryName)a.config.scayt_userDictionaryName=null;if("string"===typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var d=[],b=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){1===Number(a)||0===Number(a)?(b.push(!0),d.push(Number(a))):b.push(!1)});null===CKEDITOR.tools.search(b,!1)?a.config.scayt_uiTabs=d:a.config.scayt_uiTabs=[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];
"string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null);"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null);"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null);"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null);a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on");"string"!==typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");
"string"!==typeof a.config.scayt_srcUrl&&(c=document.location.protocol,c=-1!=c.search(/https?:/)?c:"http:",a.config.scayt_srcUrl=c+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;
"boolean"!==typeof a.config.scayt_multiLanguageMode&&(a.config.scayt_multiLanguageMode=!1);"object"!==typeof a.config.scayt_multiLanguageStyles&&(a.config.scayt_multiLanguageStyles={});a.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof a.config.scayt_ignoreAllCapsWords&&(a.config.scayt_ignoreAllCapsWords=!1);a.config.scayt_ignoreDomainNames&&"boolean"!==typeof a.config.scayt_ignoreDomainNames&&(a.config.scayt_ignoreDomainNames=!1);a.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof a.config.scayt_ignoreWordsWithMixedCases&&
(a.config.scayt_ignoreWordsWithMixedCases=!1);a.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof a.config.scayt_ignoreWordsWithNumbers&&(a.config.scayt_ignoreWordsWithNumbers=!1);if(a.config.scayt_disableOptionsStorage){var c=CKEDITOR.tools.isArray(a.config.scayt_disableOptionsStorage)?a.config.scayt_disableOptionsStorage:"string"===typeof a.config.scayt_disableOptionsStorage?[a.config.scayt_disableOptionsStorage]:void 0,e="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),
f=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],g=CKEDITOR.tools.search,h=CKEDITOR.tools.indexOf;a.config.scayt_disableOptionsStorage=function(a){for(var b=[],d=0;d<a.length;d++){var c=a[d],m=!!g(a,"options");if(!g(e,c)||m&&g(f,function(a){if("lang"===a)return!1}))return;g(f,c)&&f.splice(h(f,c),1);if("all"===c||m&&g(a,"lang"))return[];"options"===c&&(f=["lang"])}return b=b.concat(f)}(c)}},addRule:function(a){var c=CKEDITOR.plugins.scayt,
d=a.dataProcessor,b=d&&d.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters,d=d&&d.dataFilter,f=a.addRemoveFormatFilter,g=function(b){if(a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute)))return!1},h=function(b){var d=!0;a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute))&&(d=!1);return d};e&&e.push(g);d&&d.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&
a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});b&&b.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});f&&f.call(a,h)},scaytMenuDefinition:function(a){var c=
this;a=a.scayt;return{scayt:{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary()},10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,
exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen=
"dictionaries";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",
order:2,exec:function(a){a.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(a,c,d){var b={},e={},f=d?"word":"phrase",g=d?"startGrammarCheck":"startSpellCheck",h=a.scayt;if(0<c.length&&"no_any_suggestions"!==c[0])if(d)for(d=0;d<c.length;d++){var k="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_");a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],f,g));d<a.config.scayt_maxSuggestions?(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_suggest",
order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_moresuggest",order:d+1}),e[k]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:h.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return e}}),b.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(d=0;d<c.length;d++)k="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_"),a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],
f,g)),a.addMenuItem(k,{label:c[d],command:k,group:"grayt_suggest",order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF;else b.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:h.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return b},menuGenerator:function(a,c){var d=a.scayt,b=this.scaytMenuDefinition(a),e={},f=a.config.scayt_contextCommands.split("|"),g=c.getAttribute(d.getLangAttribute())||
d.getLang(),h,k;h=d.isScaytNode(c);k=d.isGraytNode(c);h?(b=b.scayt,e=c.getAttribute(d.getScaytNodeAttributeName()),d.fire("getSuggestionsList",{lang:g,word:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,h)):k&&(b=b.grayt,e=c.getAttribute(d.getGraytNodeAttributeName()),k=d.getProblemDescriptionText(e,g),b.grayt_problemdescription&&k&&(b.grayt_problemdescription.label=k),d.fire("getGrammarSuggestionsList",{lang:g,phrase:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,
h));if(h&&"off"==a.config.scayt_contextCommands)return e;for(var l in b)h&&-1==CKEDITOR.tools.indexOf(f,l.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||(e[l]="undefined"!=typeof b[l].state?b[l].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof b[l].verification||b[l].verification(a)||delete e[l],a.addCommand(l,{exec:b[l].exec}),a.addMenuItem(l,{label:a.lang.scayt[b[l].label]||b[l].label,command:l,group:b[l].group,order:b[l].order}));return e},createCommand:function(a,c,d){return{exec:function(b){b=
b.scayt;var e={};e[c]=a;b.replaceSelectionNode(e);"startGrammarCheck"===d&&b.removeMarkupInSelectionNode({grammarOnly:!0});b.fire(d)}}}});
CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",
scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(a){for(var c in a)c in this.backCompatibilityMap&&(a[this.backCompatibilityMap[c]]=a[c],delete a[c])},createScayt:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,function(a){var e=a.window&&a.window.getFrame()||a.editable();e?(e={lang:a.config.scayt_sLang,container:e.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,
debug:a.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,problem_grammar_data_attribute:c.options.problem_grammar_data_attribute,problem_grammar_class:c.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,multiLanguageMode:a.config.scayt_multiLanguageMode,multiLanguageStyles:a.config.scayt_multiLanguageStyles,
graytAutoStartup:d.state.grayt[a.name]},a.config.scayt_serviceProtocol&&(e.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(e.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(e.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(e.service_path=a.config.scayt_servicePath),"boolean"===typeof a.config.scayt_ignoreAllCapsWords&&(e["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"===typeof a.config.scayt_ignoreDomainNames&&
(e["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"===typeof a.config.scayt_ignoreWordsWithMixedCases&&(e["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"===typeof a.config.scayt_ignoreWordsWithNumbers&&(e["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers),e=new SCAYT.CKSCAYT(e,function(){},function(){}),e.subscribe("suggestionListSend",function(a){for(var b={},d=[],c=0;c<a.suggestionList.length;c++)b["word_"+a.suggestionList[c]]||
(b["word_"+a.suggestionList[c]]=a.suggestionList[c],d.push(a.suggestionList[c]));CKEDITOR.plugins.scayt.suggestions=d}),e.subscribe("selectionIsChanged",function(d){a.getSelection().isLocked&&a.lockSelection()}),e.subscribe("graytStateChanged",function(c){d.state.grayt[a.name]=c.state}),a.scayt=e,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):d.state.scayt[a.name]=!1})},destroy:function(a){a.scayt&&a.scayt.destroy();delete a.scayt;a.fire("scaytButtonState",
CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,c){var d=this,b,e;this.loadingHelper[a.name]||("undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[a.name]=c,this.loadingHelper.loadOrder.push(a.name),b=new Date,b=b.getTime(),e=a.config.scayt_srcUrl,e+=0<=e.indexOf("?")?"":"?"+b,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(e,function(a){if(a){CKEDITOR.fireOnce("scaytReady");for(var b=0;b<d.loadingHelper.loadOrder.length;b++){a=d.loadingHelper.loadOrder[b];
if("function"===typeof d.loadingHelper[a])d.loadingHelper[a](CKEDITOR.instances[a]);delete d.loadingHelper[a]}d.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"===typeof c&&c(a)))}};
CKEDITOR.on("dialogDefinition",function(a){var c=a.data.name;a=a.data.definition.dialog;if("scaytDialog"===c)a.on("cancel",function(a){return!1},this,null,-1);if("checkspell"===c)a.on("cancel",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!1);a.unlockSelection()},this,null,-2);if("link"===c)a.on("ok",function(a){var b=a.sender&&a.sender.getParentEditor();b&&setTimeout(function(){b.fire("reloadMarkupScayt",
{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})});
CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,c=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(b="ready"==this.status)var f=c.removeMarkupFromString(this.getSnapshot()),c=c.removeMarkupFromString(this._.previousValue),b=b&&c!==f}else b=a.call(this);return b}});a.resetDirty=CKEDITOR.tools.override(a.resetDirty,
function(a){return function(){var b=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=b.removeMarkupFromString(this.getSnapshot()):a.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,c="function"==typeof a.equalsContent?"equalsContent":"equals";a[c]=CKEDITOR.tools.override(a[c],function(a){return function(b){var c=b.editor.scayt,f=this.contents,g=b.contents,h=null;CKEDITOR.plugins.scayt&&
CKEDITOR.plugins.scayt.state.scayt[b.editor.name]&&b.editor.scayt&&(this.contents=c.removeMarkupFromString(f)||"",b.contents=c.removeMarkupFromString(g)||"");h=a.apply(this,arguments);this.contents=f;b.contents=g;return h}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(c){var l=c.config,g=c.lang.stylescombo,f={},k=[],m=[];c.on("stylesSet",function(b){if(b=b.data.styles){for(var a,h,d,e=0,n=b.length;e<n;e++)(a=b[e],c.blockless&&a.element in CKEDITOR.dtd.$block||(h=a.name,a=new CKEDITOR.style(a),c.filter.customConfig&&!c.filter.check(a)))||(a._name=h,a._.enterMode=l.enterMode,a._.type=d=a.assignedTo||a.type,a._.weight=e+1E3*(d==CKEDITOR.STYLE_OBJECT?1:d==CKEDITOR.STYLE_BLOCK?2:3),f[h]=
a,k.push(a),m.push(a));k.sort(function(a,b){return a._.weight-b._.weight})}});c.ui.addRichCombo("Styles",{label:g.label,title:g.panelTitle,toolbar:"styles,10",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!0,attributes:{"aria-label":g.panelTitle}},init:function(){var b,a,c,d,e,f;e=0;for(f=k.length;e<f;e++)b=k[e],a=b._name,d=b._.type,d!=c&&(this.startGroup(g["panelTitle"+String(d)]),c=d),this.add(a,b.type==CKEDITOR.STYLE_OBJECT?a:b.buildPreview(),a);
this.commit()},onClick:function(b){c.focus();c.fire("saveSnapshot");b=f[b];var a=c.elementPath();c[b.checkActive(a,c)?"removeStyle":"applyStyle"](b);c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(b){var a=this.getValue();b=b.data.path.elements;for(var h=0,d=b.length,e;h<d;h++){e=b[h];for(var g in f)if(f[g].checkElementRemovable(e,!0,c)){g!=a&&this.setValue(g);return}}this.setValue("")},this)},onOpen:function(){var b=c.getSelection().getSelectedElement(),b=c.elementPath(b),
a=[0,0,0,0];this.showAll();this.unmarkAll();for(var h in f){var d=f[h],e=d._.type;d.checkApplicable(b,c,c.activeFilter)?a[e]++:this.hideItem(h);d.checkActive(b,c)&&this.mark(h)}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);a[CKEDITOR.STYLE_INLINE]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=c.elementPath();if(b){for(var a in f)if(f[a].checkApplicable(b,
c,c.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){f={};k=[]}})}})})();(function(){function k(c){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(d){if(d.editable().hasFocus){var e=d.getSelection(),b;if(b=(new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root)).contains({td:1,th:1},1)){var e=d.createRange(),a=CKEDITOR.tools.tryThese(function(){var a=b.getParent().$.cells[b.$.cellIndex+(c?-1:1)];a.parentNode.parentNode;return a},function(){var a=b.getParent(),a=a.getAscendant("table").$.rows[a.$.rowIndex+(c?-1:1)];return a.cells[c?a.cells.length-1:
0]});if(a||c)if(a)a=new CKEDITOR.dom.element(a),e.moveToElementEditStart(a),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(a);else return!0;else{for(var f=b.getAscendant("table").$,a=b.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),d.document),g=0,h=a.length;g<h;g++)f.append((new CKEDITOR.dom.element(a[g],d.document)).clone(!1,!1)).appendBogus();e.moveToElementEditStart(f)}e.select(!0);return!0}}return!1}}}var h={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function(c){c.container.focusNext(!0,
c.tabIndex)}},f={exec:function(c){c.container.focusPrevious(!0,c.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(c){for(var d=!1!==c.config.enableTabKeyTools,e=c.config.tabSpaces||0,b="";e--;)b+=" ";if(b)c.on("key",function(a){9==a.data.keyCode&&(c.insertText(b),a.cancel())});if(d)c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&c.execCommand("selectPreviousCell"))&&a.cancel()});c.addCommand("blur",CKEDITOR.tools.extend(g,h));c.addCommand("blurBack",
CKEDITOR.tools.extend(f,h));c.addCommand("selectNextCell",k());c.addCommand("selectPreviousCell",k(!0))}})})();
CKEDITOR.dom.element.prototype.focusNext=function(k,h){var g=void 0===h?this.getTabIndex():h,f,c,d,e,b,a;if(0>=g)for(b=this.getNextSourceNode(k,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&b.equals(this)){if(c=!0,k){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(b)&&
(f=1);if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break}a>g&&(!d||!e||a<e)?(d=b,e=a):d||0!==a||(d=b,e=a)}}d&&d.focus()};
CKEDITOR.dom.element.prototype.focusPrevious=function(k,h){for(var g=void 0===h?this.getTabIndex():h,f,c,d,e=0,b,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&a.equals(this)){if(c=!0,k){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(a)&&(f=1);if(a.isVisible()&&!(0>(b=a.getTabIndex())))if(0>=g){if(f&&0===b){d=a;break}b>e&&(d=a,e=b)}else{if(f&&b==g){d=a;break}b<g&&(!d||b>e)&&(d=a,e=b)}}d&&d.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,f){this.setState(f.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?
"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var d=b.getParent(),c=a.editable();1!=d.getChildCount()||d.is("td","th")||d.equals(c)||(b=d);a=a.createRange();a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START);
b.remove();a.select()}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog=
"tableProperties")});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function t(e){function d(a){0<b.length||a.type!=CKEDITOR.NODE_ELEMENT||!C.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(c,a,"selected_cell",!0),b.push(a))}e=e.getRanges();for(var b=[],c={},a=0;a<e.length;a++){var f=e[a];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&b.push(f);else{var f=new CKEDITOR.dom.walker(f),g;for(f.guard=d;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",
!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,g,"selected_cell",!0),b.push(g))}}CKEDITOR.dom.element.clearAllMarkers(c);return b}function p(e,d){for(var b=t(e),c=b[0],a=c.getAscendant("table"),c=c.getDocument(),f=b[0].getParent(),g=f.$.rowIndex,b=b[b.length-1],h=b.getParent().$.rowIndex+b.$.rowSpan-1,b=new CKEDITOR.dom.element(a.$.rows[h]),g=d?g:h,f=d?f:b,b=CKEDITOR.tools.buildTableMap(a),a=b[g],g=d?b[g-1]:b[g+1],b=b[0].length,c=c.createElement("tr"),
h=0;a[h]&&h<b;h++){var k;1<a[h].rowSpan&&g&&a[h]==g[h]?(k=a[h],k.rowSpan+=1):(k=(new CKEDITOR.dom.element(a[h])).clone(),k.removeAttribute("rowSpan"),k.appendBogus(),c.append(k),k=k.$);h+=k.colSpan-1}d?c.insertBefore(f):c.insertAfter(f)}function u(e){if(e instanceof CKEDITOR.dom.selection){var d=t(e),b=d[0].getAscendant("table"),c=CKEDITOR.tools.buildTableMap(b);e=d[0].getParent().$.rowIndex;for(var d=d[d.length-1],a=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],f=e;f<=a;f++){for(var g=c[f],h=new CKEDITOR.dom.element(b.$.rows[f]),
k=0;k<g.length;k++){var l=new CKEDITOR.dom.element(g[k]),n=l.getParent().$.rowIndex;1==l.$.rowSpan?l.remove():(--l.$.rowSpan,n==f&&(n=c[f+1],n[k-1]?l.insertAfter(new CKEDITOR.dom.element(n[k-1])):(new CKEDITOR.dom.element(b.$.rows[f+1])).append(l,1)));k+=l.$.colSpan-1}d.push(h)}c=b.$.rows;b=new CKEDITOR.dom.element(c[a+1]||(0<e?c[e-1]:null)||b.$.parentNode);for(f=d.length;0<=f;f--)u(d[f]);return b}e instanceof CKEDITOR.dom.element&&(b=e.getAscendant("table"),1==b.$.rows.length?b.remove():e.remove());
return null}function v(e,d){for(var b=d?Infinity:0,c=0;c<e.length;c++){var a;a=e[c];for(var f=d,g=a.getParent().$.cells,h=0,k=0;k<g.length;k++){var l=g[k],h=h+(f?1:l.colSpan);if(l==a.$)break}a=h-1;if(d?a<b:a>b)b=a}return b}function m(e,d){for(var b=t(e),c=b[0].getAscendant("table"),a=v(b,1),b=v(b),a=d?a:b,f=CKEDITOR.tools.buildTableMap(c),c=[],b=[],g=f.length,h=0;h<g;h++)c.push(f[h][a]),b.push(d?f[h][a-1]:f[h][a+1]);for(h=0;h<g;h++)c[h]&&(1<c[h].colSpan&&b[h]==c[h]?(a=c[h],a.colSpan+=1):(a=(new CKEDITOR.dom.element(c[h])).clone(),
a.removeAttribute("colSpan"),a.appendBogus(),a[d?"insertBefore":"insertAfter"].call(a,new CKEDITOR.dom.element(c[h])),a=a.$),h+=a.rowSpan-1)}function y(e,d){var b=e.getStartElement();if(b=b.getAscendant("td",1)||b.getAscendant("th",1)){var c=b.clone();c.appendBogus();d?c.insertBefore(b):c.insertAfter(b)}}function x(e){if(e instanceof CKEDITOR.dom.selection){e=t(e);var d=e[0]&&e[0].getAscendant("table"),b;a:{var c=0;b=e.length-1;for(var a={},f,g;f=e[c++];)CKEDITOR.dom.element.setMarker(a,f,"delete_cell",
!0);for(c=0;f=e[c++];)if((g=f.getPrevious())&&!g.getCustomData("delete_cell")||(g=f.getNext())&&!g.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(a);b=g;break a}CKEDITOR.dom.element.clearAllMarkers(a);g=e[0].getParent();(g=g.getPrevious())?b=g.getLast():(g=e[b].getParent(),b=(g=g.getNext())?g.getChild(0):null)}for(g=e.length-1;0<=g;g--)x(e[g]);b?q(b,!0):d&&d.remove()}else e instanceof CKEDITOR.dom.element&&(d=e.getParent(),1==d.getChildCount()?d.remove():e.remove())}function q(e,
d){var b=e.getDocument(),c=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(c.focus(),b.focus());b=new CKEDITOR.dom.range(b);b["moveToElementEdit"+(d?"End":"Start")](e)||(b.selectNodeContents(e),b.collapse(d?!1:!0));b.select(!0)}function z(e,d,b){e=e[d];if("undefined"==typeof b)return e;for(d=0;e&&d<e.length;d++){if(b.is&&e[d]==b.$)return d;if(d==b)return new CKEDITOR.dom.element(e[d])}return b.is?-1:null}function w(e,d,b){var c=t(e),a;if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&
a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))return!1;var f;e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,k=g[0].length,l=e.getParent().$.rowIndex,n=z(g,l,e);if(d){var r;try{var q=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1;r=g["up"==d?l-q:"down"==d?l+q:l]["left"==d?n-f:"right"==d?n+f:n]}catch(D){return!1}if(!r||e.$==r)return!1;c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(r))}d=e.getDocument();var p=l,
q=r=0,u=!b&&new CKEDITOR.dom.documentFragment(d),w=0;for(d=0;d<c.length;d++){f=c[d];var m=f.getParent(),x=f.getFirst(),v=f.$.colSpan,y=f.$.rowSpan,m=m.$.rowIndex,A=z(g,m,f),w=w+v*y,q=Math.max(q,A-n+v);r=Math.max(r,m-l+y);b||(v=f,(y=v.getBogus())&&y.remove(),v.trim(),f.getChildren().count()&&(m==p||!x||x.isBlockBoundary&&x.isBlockBoundary({br:1})||(p=u.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!p||p.is&&p.is("br")||u.append("br")),f.moveChildren(u)),d?f.remove():f.setHtml(""));p=m}if(b)return r*
q==w;u.moveChildren(e);e.appendBogus();q>=k?e.removeAttribute("rowSpan"):e.$.rowSpan=r;r>=h?e.removeAttribute("colSpan"):e.$.colSpan=q;b=new CKEDITOR.dom.nodeList(a.$.rows);c=b.count();for(d=c-1;0<=d;d--)a=b.getItem(d),a.$.cells.length||(a.remove(),c++);return e}function A(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(a),g=c.$.rowIndex,h=z(f,g,b),k=b.$.rowSpan,l;if(1<k){l=Math.ceil(k/2);for(var k=Math.floor(k/
2),c=g+l,a=new CKEDITOR.dom.element(a.$.rows[c]),f=z(f,c),n,c=b.clone(),g=0;g<f.length;g++)if(n=f[g],n.parentNode==a.$&&g>h){c.insertBefore(new CKEDITOR.dom.element(n));break}else n=null;n||a.append(c)}else for(k=l=1,a=c.clone(),a.insertAfter(c),a.append(c=b.clone()),n=z(f,g),h=0;h<n.length;h++)n[h].rowSpan++;c.appendBogus();b.$.rowSpan=l;c.$.rowSpan=k;1==l&&b.removeAttribute("rowSpan");1==k&&c.removeAttribute("rowSpan");return c}function B(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=
b[0],c=b.getParent(),a=c.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),f=z(a,c.$.rowIndex,b),g=b.$.colSpan;if(1<g)c=Math.ceil(g/2),g=Math.floor(g/2);else{for(var g=c=1,h=[],k=0;k<a.length;k++){var l=a[k];h.push(l[f]);1<l[f].rowSpan&&(k+=l[f].rowSpan-1)}for(a=0;a<h.length;a++)h[a].colSpan++}a=b.clone();a.insertAfter(b);a.appendBogus();b.$.colSpan=c;a.$.colSpan=g;1==c&&b.removeAttribute("colSpan");1==g&&a.removeAttribute("colSpan");return a}var C=/^(?:td|th)$/;CKEDITOR.plugins.tabletools=
{requires:"table,dialog,contextmenu",init:function(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function b(a,b){var c=e.addCommand(a,b);e.addFeature(c)}var c=e.lang.table;b("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",
requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");b("rowDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();q(u(a))}}));b("rowInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a,!0)}}));b("rowInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a)}}));b("columnDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();a=t(a);var b=a[0],c=a[a.length-1];a=b.getAscendant("table");
for(var d=CKEDITOR.tools.buildTableMap(a),e,l,n=[],r=0,p=d.length;r<p;r++)for(var m=0,u=d[r].length;m<u;m++)d[r][m]==b.$&&(e=m),d[r][m]==c.$&&(l=m);for(r=e;r<=l;r++)for(m=0;m<d.length;m++)c=d[m],b=new CKEDITOR.dom.element(a.$.rows[m]),c=new CKEDITOR.dom.element(c[r]),c.$&&(1==c.$.colSpan?c.remove():--c.$.colSpan,m+=c.$.rowSpan-1,b.$.cells.length||n.push(b));l=a.$.rows[0]&&a.$.rows[0].cells;e=new CKEDITOR.dom.element(l[e]||(e?l[e-1]:a.$.parentNode));n.length==p&&a.remove();e&&q(e,!0)}}));b("columnInsertBefore",
d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a,!0)}}));b("columnInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a)}}));b("cellDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();x(a)}}));b("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){q(w(a.getSelection()),!0)}}));b("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(w(a.getSelection(),
"right"),!0)}}));b("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(w(a.getSelection(),"down"),!0)}}));b("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(B(a.getSelection()))}}));b("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(A(a.getSelection()))}}));b("cellInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a,!0)}}));
b("cellInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a)}}));e.addMenuItems&&e.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=e.getSelection(),b=t(a);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:w(a,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:w(a,"right",!0)?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:w(a,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:B(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:A(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<b.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,
group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",
command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:c.row.insertBefore,
group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:c.column.insertBefore,
group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:t};
CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(t){t=t.$.rows;for(var p=-1,u=[],v=0;v<t.length;v++){p++;!u[p]&&(u[p]=[]);for(var m=-1,y=0;y<t[v].cells.length;y++){var x=t[v].cells[y];for(m++;u[p][m];)m++;for(var q=isNaN(x.colSpan)?1:x.colSpan,x=isNaN(x.rowSpan)?1:x.rowSpan,z=0;z<x;z++){u[p+z]||(u[p+z]=[]);for(var w=0;w<q;w++)u[p+z][m+w]=t[v].cells[y]}m+=q-1}}return u};(function(){var g=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],n={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(a){function b(a){d.enabled&&!1!==a.data.command.canUndo&&d.save()}function c(){d.enabled=a.readOnly?!1:"wysiwyg"==a.mode;d.onChange()}var d=a.undoManager=new e(a),l=d.editingHandler=new k(d),f=a.addCommand("undo",{exec:function(){d.undo()&&(a.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),h=a.addCommand("redo",{exec:function(){d.redo()&&
(a.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});a.setKeystroke([[g[0],"undo"],[g[1],"redo"],[g[2],"redo"]]);d.onChange=function(){f.setState(d.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);h.setState(d.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};a.on("beforeCommandExec",b);a.on("afterCommandExec",b);a.on("saveSnapshot",function(a){d.save(a.data&&a.data.contentOnly)});a.on("contentDom",l.attachListeners,l);a.on("instanceReady",function(){a.fire("saveSnapshot")});
a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&d.save(!0)});a.on("mode",c);a.on("readOnly",c);a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"}));a.resetUndo=function(){d.reset();a.fire("saveSnapshot")};a.on("updateSnapshot",function(){d.currentImage&&d.update()});a.on("lockSnapshot",function(a){a=a.data;d.lock(a&&a.dontUpdate,a&&a.forceUpdate)});a.on("unlockSnapshot",
d.unlock,d)}});CKEDITOR.plugins.undo={};var e=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=a.config.undoStackSize||20;this.strokesLimit=25;this.editor=a;this.reset()};e.prototype={type:function(a,b){var c=e.getKeyGroup(a),d=this.strokesRecorded[c]+1;b=b||d>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());b?(d=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[c]=
d;this.previousKeyGroup=c},keyGroupChanged:function(a){return e.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(a,b,c){var d=this.editor;if(this.locked||
"ready"!=d.status||"wysiwyg"!=d.mode)return!1;var e=d.editable();if(!e||"ready"!=e.status)return!1;e=this.snapshots;b||(b=new f(d));if(!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==c&&d.fire("change");e.splice(this.index+1,e.length-this.index-1);e.length==this.limit&&e.shift();this.index=e.push(b)-1;this.currentImage=b;!1!==c&&this.refreshState();return!0},restoreImage:function(a){var b=this.editor,
c;a.bookmarks&&(b.focus(),c=b.getSelection());this.locked={level:999};this.editor.loadSnapshot(a.contents);a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(c=this.editor.document.getBody().$.createTextRange(),c.collapse(!0),c.select());this.locked=null;this.index=a.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();b.fire("change")},getNextImage:function(a){var b=this.snapshots,c=this.currentImage,d;if(c)if(a)for(d=this.index-1;0<=d;d--){if(a=b[d],!c.equalsContent(a))return a.index=
d,a}else for(d=this.index+1;d<b.length;d++)if(a=b[d],!c.equalsContent(a))return a.index=d,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||
(a=new f(this.editor));for(var b=this.index,c=this.snapshots;0<b&&this.currentImage.equalsContent(c[b-1]);)--b;c.splice(b,this.index-b+1,a);this.index=b;this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return c.equalsContent(a)&&!c.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var d=new f(this.editor,
!0);this.currentImage&&this.currentImage.equalsContent(d)&&(c=d)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a)this.update();else if(a){var b=new f(this.editor,!0);a.equalsContent(b)||this.update()}}}};e.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};e.keyGroups={PRINTABLE:0,FUNCTIONAL:1};e.isNavigationKey=function(a){return!!e.navigationKeyCodes[a]};e.getKeyGroup=function(a){var b=e.keyGroups;
return n[a]?b.FUNCTIONAL:b.PRINTABLE};e.getOppositeKeyGroup=function(a){var b=e.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL};e.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&e.getKeyGroup(a)==e.keyGroups.FUNCTIONAL};var f=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a;a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=c;b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0));a.fire("afterUndoImage")},
h=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={equalsContent:function(a){var b=this.contents;a=a.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(h,""),a=a.replace(h,""));return b!=a?!1:!0},equalsSelection:function(a){var b=this.bookmarks;a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,
e.end))return!1}}return!0}};var k=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;this.ignoreInputEvent=!1;this.keyEventsStack=new m;this.lastKeydownImage=null};k.prototype={onKeydown:function(a){var b=a.data.getKey();if(229!==b)if(-1<CKEDITOR.tools.indexOf(g,a.data.getKeystroke()))a.data.preventDefault();else if(this.keyEventsStack.cleanUp(a),a=this.undoManager,this.keyEventsStack.getLast(b)||this.keyEventsStack.push(b),this.lastKeydownImage=new f(a.editor),e.isNavigationKey(b)||
this.undoManager.keyGroupChanged(b))if(a.strokesRecorded[0]||a.strokesRecorded[1])a.save(!1,this.lastKeydownImage,!1),a.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0));this.keyEventsStack.increment(a.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager;
a=a.data.getKey();var c=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a);if(!(e.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new f(b.editor,!0))))if(0<c)b.type(a);else if(e.isNavigationKey(a))this.onNavigationKey(!0)},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new f(b.editor));b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,
b=a.editable(),c=this;b.attachListener(b,"keydown",function(a){c.onKeydown(a);if(e.ieFunctionalKeysBug(a.data.getKey()))c.onInput()},null,null,999);b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",c.onInput,c,null,999);b.attachListener(b,"keyup",c.onKeyup,c,null,999);b.attachListener(b,"paste",c.ignoreInputEventListener,c,null,999);b.attachListener(b,"drop",c.ignoreInputEventListener,c,null,999);b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){c.onNavigationKey()},
null,null,999);b.attachListener(this.undoManager.editor,"blur",function(){c.keyEventsStack.remove(9)},null,null,999)}};var m=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};m.prototype={push:function(a){a=this.stack.push({keyCode:a,inputs:0});return this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){a=this.getLastIndex(a);return-1!=a?this.stack[a]:
null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a);-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$;a.ctrlKey||a.metaKey||this.remove(17);a.shiftKey||this.remove(16);a.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"===typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){};a.config.wsc_onClose="function"===typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||
CKEDITOR.config.wsc_customDictionaryIds||"";a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(a){var b=CKEDITOR.env;this.parseConfig(a);this.parseApi(a);
a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(b.ie&&(8>b.version||b.quirks))};"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(b=b.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},
toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins='dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc';CKEDITOR.config.skin='moono';(function() {var setIcons = function(icons, strip) {var path = CKEDITOR.getUrl( 'plugins/' + strip );icons = icons.split( ',' );for ( var i = 0; i < icons.length; i++ )CKEDITOR.skin.icons[ icons[ i ] ] = { path: path, offset: -icons[ ++i ], bgsize : icons[ ++i ] };};if (CKEDITOR.env.hidpi) setIcons('about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,','icons_hidpi.png');else setIcons('about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto','icons.png');})();CKEDITOR.lang.languages={"af":1,"sq":1,"ar":1,"eu":1,"bn":1,"bs":1,"bg":1,"ca":1,"zh-cn":1,"zh":1,"hr":1,"cs":1,"da":1,"nl":1,"en":1,"en-au":1,"en-ca":1,"en-gb":1,"eo":1,"et":1,"fo":1,"fi":1,"fr":1,"fr-ca":1,"gl":1,"ka":1,"de":1,"de-ch":1,"el":1,"gu":1,"he":1,"hi":1,"hu":1,"is":1,"id":1,"it":1,"ja":1,"km":1,"ko":1,"ku":1,"lv":1,"lt":1,"mk":1,"ms":1,"mn":1,"no":1,"nb":1,"fa":1,"pl":1,"pt-br":1,"pt":1,"ro":1,"ru":1,"sr":1,"sr-latn":1,"si":1,"sk":1,"sl":1,"es":1,"sv":1,"tt":1,"th":1,"tr":1,"ug":1,"uk":1,"vi":1,"cy":1};}());
/*global exports, require*/
/* eslint-disable no-eval */
/* JSONPath 0.8.0 - XPath for JSON
 *
 * Copyright (c) 2007 Stefan Goessner (goessner.net)
 * Licensed under the MIT (MIT-LICENSE.txt) licence.
 */

var module;
(function (require) {'use strict';

// Make sure to know if we are in real node or not (the `require` variable
// could actually be require.js, for example.
var isNode = module && !!module.exports;

var allowedResultTypes = ['value', 'path', 'pointer', 'parent', 'parentProperty', 'all'];

var vm = isNode
    ? require('vm') : {
        runInNewContext: function (expr, context) {
            return eval(Object.keys(context).reduce(function (s, vr) {
                return 'var ' + vr + '=' + JSON.stringify(context[vr]).replace(/\u2028|\u2029/g, function (m) {
                    // http://www.thespanner.co.uk/2011/07/25/the-json-specification-is-now-wrong/
                    return '\\u202' + (m === '\u2028' ? '8' : '9');
                }) + ';' + s;
            }, expr));
        }
    };

function push (arr, elem) {arr = arr.slice(); arr.push(elem); return arr;}
function unshift (elem, arr) {arr = arr.slice(); arr.unshift(elem); return arr;}
function NewError (value) {
  this.avoidNew = true;
  this.value = value;
  this.message = 'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)';
}

function JSONPath (opts, expr, obj, callback, otherTypeCallback) {
    if (!(this instanceof JSONPath)) {
        try {
            return new JSONPath(opts, expr, obj, callback, otherTypeCallback);
        }
        catch (e) {
            if (!e.avoidNew) {
                throw e;
            }
            return e.value;
        }
    }

    if (typeof opts === 'string') {
        otherTypeCallback = callback;
        callback = obj;
        obj = expr;
        expr = opts;
        opts = {};
    }
    opts = opts || {};
    var objArgs = opts.hasOwnProperty('json') && opts.hasOwnProperty('path');
    this.json = opts.json || obj;
    this.path = opts.path || expr;
    this.resultType = (opts.resultType && opts.resultType.toLowerCase()) || 'value';
    this.flatten = opts.flatten || false;
    this.wrap = opts.hasOwnProperty('wrap') ? opts.wrap : true;
    this.sandbox = opts.sandbox || {};
    this.preventEval = opts.preventEval || false;
    this.parent = opts.parent || null;
    this.parentProperty = opts.parentProperty || null;
    this.callback = opts.callback || callback || null;
    this.otherTypeCallback = opts.otherTypeCallback || otherTypeCallback || function () {
        throw new Error('You must supply an otherTypeCallback callback option with the @other() operator.');
    };

    if (opts.autostart !== false) {
        var ret = this.evaluate({
            path: (objArgs ? opts.path : expr),
            json: (objArgs ? opts.json : obj)
        });
        if (!ret || typeof ret !== 'object') {
            throw new NewError(ret);
        }
        return ret;
    }
}

// PUBLIC METHODS

JSONPath.prototype.evaluate = function (expr, json, callback, otherTypeCallback) {
    var self = this,
        flatten = this.flatten,
        wrap = this.wrap,
        currParent = this.parent,
        currParentProperty = this.parentProperty;

    this.currResultType = this.resultType;
    this.currPreventEval = this.preventEval;
    this.currSandbox = this.sandbox;
    callback = callback || this.callback;
    this.currOtherTypeCallback = otherTypeCallback || this.otherTypeCallback;

    json = json || this.json;
    expr = expr || this.path;
    if (expr && typeof expr === 'object') {
        if (!expr.path) {
            throw new Error('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');
        }
        json = expr.hasOwnProperty('json') ? expr.json : json;
        flatten = expr.hasOwnProperty('flatten') ? expr.flatten : flatten;
        this.currResultType = expr.hasOwnProperty('resultType') ? expr.resultType : this.currResultType;
        this.currSandbox = expr.hasOwnProperty('sandbox') ? expr.sandbox : this.currSandbox;
        wrap = expr.hasOwnProperty('wrap') ? expr.wrap : wrap;
        this.currPreventEval = expr.hasOwnProperty('preventEval') ? expr.preventEval : this.currPreventEval;
        callback = expr.hasOwnProperty('callback') ? expr.callback : callback;
        this.currOtherTypeCallback = expr.hasOwnProperty('otherTypeCallback') ? expr.otherTypeCallback : this.currOtherTypeCallback;
        currParent = expr.hasOwnProperty('parent') ? expr.parent : currParent;
        currParentProperty = expr.hasOwnProperty('parentProperty') ? expr.parentProperty : currParentProperty;
        expr = expr.path;
    }
    currParent = currParent || null;
    currParentProperty = currParentProperty || null;

    if (Array.isArray(expr)) {
        expr = JSONPath.toPathString(expr);
    }
    if (!expr || !json || allowedResultTypes.indexOf(this.currResultType) === -1) {
        return;
    }
    this._obj = json;

    var exprList = JSONPath.toPathArray(expr);
    if (exprList[0] === '$' && exprList.length > 1) {exprList.shift();}
    var result = this._trace(exprList, json, ['$'], currParent, currParentProperty, callback);
    result = result.filter(function (ea) {return ea && !ea.isParentSelector;});

    if (!result.length) {return wrap ? [] : undefined;}
    if (result.length === 1 && !wrap && !Array.isArray(result[0].value)) {
        return this._getPreferredOutput(result[0]);
    }
    return result.reduce(function (result, ea) {
        var valOrPath = self._getPreferredOutput(ea);
        if (flatten && Array.isArray(valOrPath)) {
            result = result.concat(valOrPath);
        }
        else {
            result.push(valOrPath);
        }
        return result;
    }, []);
};

// PRIVATE METHODS

JSONPath.prototype._getPreferredOutput = function (ea) {
    var resultType = this.currResultType;
    switch (resultType) {
    case 'all':
        ea.path = typeof ea.path === 'string' ? ea.path : JSONPath.toPathString(ea.path);
        return ea;
    case 'value': case 'parent': case 'parentProperty':
        return ea[resultType];
    case 'path':
        return JSONPath.toPathString(ea[resultType]);
    case 'pointer':
        return JSONPath.toPointer(ea.path);
    }
};

JSONPath.prototype._handleCallback = function (fullRetObj, callback, type) {
    if (callback) {
        var preferredOutput = this._getPreferredOutput(fullRetObj);
        fullRetObj.path = typeof fullRetObj.path === 'string' ? fullRetObj.path : JSONPath.toPathString(fullRetObj.path);
        callback(preferredOutput, type, fullRetObj);
    }
};

JSONPath.prototype._trace = function (expr, val, path, parent, parentPropName, callback) {
    // No expr to follow? return path and value as the result of this trace branch
    var retObj, self = this;
    if (!expr.length) {
        retObj = {path: path, value: val, parent: parent, parentProperty: parentPropName};
        this._handleCallback(retObj, callback, 'value');
        return retObj;
    }

    var loc = expr[0], x = expr.slice(1);

    // We need to gather the return value of recursive trace calls in order to
    // do the parent sel computation.
    var ret = [];
    function addRet (elems) {ret = ret.concat(elems);}

    if (val && Object.prototype.hasOwnProperty.call(val, loc)) { // simple case--directly follow property
        addRet(this._trace(x, val[loc], push(path, loc), val, loc, callback));
    }
    else if (loc === '*') { // all child properties
        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {
            addRet(self._trace(unshift(m, x), v, p, par, pr, cb));
        });
    }
    else if (loc === '..') { // all descendent parent properties
        addRet(this._trace(x, val, path, parent, parentPropName, callback)); // Check remaining expression with val's immediate children
        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {
            // We don't join m and x here because we only want parents, not scalar values
            if (typeof v[m] === 'object') { // Keep going with recursive descent on val's object children
                addRet(self._trace(unshift(l, x), v[m], push(p, m), v, m, cb));
            }
        });
    }
    else if (loc[0] === '(') { // [(expr)] (dynamic property/index)
        if (this.currPreventEval) {
            throw new Error('Eval [(expr)] prevented in JSONPath expression.');
        }
        // As this will resolve to a property name (but we don't know it yet), property and parent information is relative to the parent of the property to which this expression will resolve
        addRet(this._trace(unshift(this._eval(loc, val, path[path.length - 1], path.slice(0, -1), parent, parentPropName), x), val, path, parent, parentPropName, callback));
    }
    // The parent sel computation is handled in the frame above using the
    // ancestor object of val
    else if (loc === '^') {
        // This is not a final endpoint, so we do not invoke the callback here
        return path.length ? {
            path: path.slice(0, -1),
            expr: x,
            isParentSelector: true
        } : [];
    }
    else if (loc === '~') { // property name
        retObj = {path: push(path, loc), value: parentPropName, parent: parent, parentProperty: null};
        this._handleCallback(retObj, callback, 'property');
        return retObj;
    }
    else if (loc === '$') { // root only
        addRet(this._trace(x, val, path, null, null, callback));
    }
    else if (loc.indexOf('?(') === 0) { // [?(expr)] (filtering)
        if (this.currPreventEval) {
            throw new Error('Eval [?(expr)] prevented in JSONPath expression.');
        }
        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {
            if (self._eval(l.replace(/^\?\((.*?)\)$/, '$1'), v[m], m, p, par, pr)) {
                addRet(self._trace(unshift(m, x), v, p, par, pr, cb));
            }
        });
    }
    else if (loc.indexOf(',') > -1) { // [name1,name2,...]
        var parts, i;
        for (parts = loc.split(','), i = 0; i < parts.length; i++) {
            addRet(this._trace(unshift(parts[i], x), val, path, parent, parentPropName, callback));
        }
    }
    else if (loc[0] === '@') { // value type: @boolean(), etc.
        var addType = false;
        var valueType = loc.slice(1, -2);
        switch (valueType) {
        case 'scalar':
            if (!val || (['object', 'function'].indexOf(typeof val) === -1)) {
                addType = true;
            }
            break;
        case 'boolean': case 'string': case 'undefined': case 'function':
            if (typeof val === valueType) {
                addType = true;
            }
            break;
        case 'number':
            if (typeof val === valueType && isFinite(val)) {
                addType = true;
            }
            break;
        case 'nonFinite':
            if (typeof val === 'number' && !isFinite(val)) {
                addType = true;
            }
            break;
        case 'object':
            if (val && typeof val === valueType) {
                addType = true;
            }
            break;
        case 'array':
            if (Array.isArray(val)) {
                addType = true;
            }
            break;
        case 'other':
            addType = this.currOtherTypeCallback(val, path, parent, parentPropName);
            break;
        case 'integer':
            if (val === +val && isFinite(val) && !(val % 1)) {
                addType = true;
            }
            break;
        case 'null':
            if (val === null) {
                addType = true;
            }
            break;
        }
        if (addType) {
            retObj = {path: path, value: val, parent: parent, parentProperty: parentPropName};
            this._handleCallback(retObj, callback, 'value');
            return retObj;
        }
    }
    else if (/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(loc)) { // [start:end:step]  Python slice syntax
        addRet(this._slice(loc, x, val, path, parent, parentPropName, callback));
    }

    // We check the resulting values for parent selections. For parent
    // selections we discard the value object and continue the trace with the
    // current val object
    return ret.reduce(function (all, ea) {
        return all.concat(ea.isParentSelector ? self._trace(ea.expr, val, ea.path, parent, parentPropName, callback) : ea);
    }, []);
};

JSONPath.prototype._walk = function (loc, expr, val, path, parent, parentPropName, callback, f) {
    var i, n, m;
    if (Array.isArray(val)) {
        for (i = 0, n = val.length; i < n; i++) {
            f(i, loc, expr, val, path, parent, parentPropName, callback);
        }
    }
    else if (typeof val === 'object') {
        for (m in val) {
            if (Object.prototype.hasOwnProperty.call(val, m)) {
                f(m, loc, expr, val, path, parent, parentPropName, callback);
            }
        }
    }
};

JSONPath.prototype._slice = function (loc, expr, val, path, parent, parentPropName, callback) {
    if (!Array.isArray(val)) {return;}
    var i,
        len = val.length, parts = loc.split(':'),
        start = (parts[0] && parseInt(parts[0], 10)) || 0,
        end = (parts[1] && parseInt(parts[1], 10)) || len,
        step = (parts[2] && parseInt(parts[2], 10)) || 1;
    start = (start < 0) ? Math.max(0, start + len) : Math.min(len, start);
    end = (end < 0) ? Math.max(0, end + len) : Math.min(len, end);
    var ret = [];
    for (i = start; i < end; i += step) {
        ret = ret.concat(this._trace(unshift(i, expr), val, path, parent, parentPropName, callback));
    }
    return ret;
};

JSONPath.prototype._eval = function (code, _v, _vname, path, parent, parentPropName) {
    if (!this._obj || !_v) {return false;}
    if (code.indexOf('@parentProperty') > -1) {
        this.currSandbox._$_parentProperty = parentPropName;
        code = code.replace(/@parentProperty/g, '_$_parentProperty');
    }
    if (code.indexOf('@parent') > -1) {
        this.currSandbox._$_parent = parent;
        code = code.replace(/@parent/g, '_$_parent');
    }
    if (code.indexOf('@property') > -1) {
        this.currSandbox._$_property = _vname;
        code = code.replace(/@property/g, '_$_property');
    }
    if (code.indexOf('@path') > -1) {
        this.currSandbox._$_path = JSONPath.toPathString(path.concat([_vname]));
        code = code.replace(/@path/g, '_$_path');
    }
    if (code.match(/@([\.\s\)\[])/)) {
        this.currSandbox._$_v = _v;
        code = code.replace(/@([\.\s\)\[])/g, '_$_v$1');
    }
    try {
        return vm.runInNewContext(code, this.currSandbox);
    }
    catch (e) {
        console.log(e);
        throw new Error('jsonPath: ' + e.message + ': ' + code);
    }
};

// PUBLIC CLASS PROPERTIES AND METHODS

// Could store the cache object itself
JSONPath.cache = {};

JSONPath.toPathString = function (pathArr) {
    var i, n, x = pathArr, p = '$';
    for (i = 1, n = x.length; i < n; i++) {
        if (!(/^(~|\^|@.*?\(\))$/).test(x[i])) {
            p += (/^[0-9*]+$/).test(x[i]) ? ('[' + x[i] + ']') : ("['" + x[i] + "']");
        }
    }
    return p;
};

JSONPath.toPointer = function (pointer) {
    var i, n, x = pointer, p = '';
    for (i = 1, n = x.length; i < n; i++) {
        if (!(/^(~|\^|@.*?\(\))$/).test(x[i])) {
            p += '/' + x[i].toString()
                  .replace(/\~/g, '~0')
                  .replace(/\//g, '~1');
        }
    }
    return p;
};

JSONPath.toPathArray = function (expr) {
    var cache = JSONPath.cache;
    if (cache[expr]) {return cache[expr];}
    var subx = [];
    var normalized = expr
                    // Properties
                    .replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g, ';$&;')
                    // Parenthetical evaluations (filtering and otherwise), directly within brackets or single quotes
                    .replace(/[\['](\??\(.*?\))[\]']/g, function ($0, $1) {return '[#' + (subx.push($1) - 1) + ']';})
                    // Escape periods and tildes within properties
                    .replace(/\['([^'\]]*)'\]/g, function ($0, prop) {
                        return "['" + prop.replace(/\./g, '%@%').replace(/~/g, '%%@@%%') + "']";
                    })
                    // Properties operator
                    .replace(/~/g, ';~;')
                    // Split by property boundaries
                    .replace(/'?\.'?(?![^\[]*\])|\['?/g, ';')
                    // Reinsert periods within properties
                    .replace(/%@%/g, '.')
                    // Reinsert tildes within properties
                    .replace(/%%@@%%/g, '~')
                    // Parent
                    .replace(/(?:;)?(\^+)(?:;)?/g, function ($0, ups) {return ';' + ups.split('').join(';') + ';';})
                    // Descendents
                    .replace(/;;;|;;/g, ';..;')
                    // Remove trailing
                    .replace(/;$|'?\]|'$/g, '');

    var exprList = normalized.split(';').map(function (expr) {
        var match = expr.match(/#([0-9]+)/);
        return !match || !match[1] ? expr : subx[match[1]];
    });
    cache[expr] = exprList;
    return cache[expr];
};

// For backward compatibility (deprecated)
JSONPath.eval = function (obj, expr, opts) {
    return JSONPath(opts, expr, obj);
};

if (typeof define === 'function' && define.amd) {
    define(function () {return JSONPath;});
}
else if (isNode) {
    module.exports = JSONPath;
}
else {
    self.jsonPath = { // Deprecated
        eval: JSONPath.eval
    };
    self.JSONPath = JSONPath;
}
}(typeof require === 'undefined' ? null : require));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJib290c3RyYXAubWluLmpzIiwicGVyZmVjdC1zY3JvbGxiYXIuanF1ZXJ5Lm1pbi5qcyIsInZ1ZS5qcyIsInZ1ZS1yb3V0ZXIuanMiLCJ2dWUtcmVzb3VyY2UuanMiLCJ2dWUtdmFsaWRhdG9yLmpzIiwibW9tZW50Lm1pbi5qcyIsImJvb3RzdHJhcC1kYXRldGltZXBpY2tlci5taW4uanMiLCJib290c3RyYXAtdGFnc2lucHV0Lm1pbi5qcyIsImJvb3RzdHJhcC1jb21ib2JveC5qcyIsImJvb3RzdHJhcC1zbGlkZXIubWluLmpzIiwiY2tlZGl0b3IuanMiLCJqc29ucGF0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNOQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3gxVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcHBGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcjJDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVpRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM2VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5Y0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoidmVuZG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIGpRdWVyeSB2Mi4xLjQgfCAoYykgMjAwNSwgMjAxNSBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1jLnNsaWNlLGU9Yy5jb25jYXQsZj1jLnB1c2gsZz1jLmluZGV4T2YsaD17fSxpPWgudG9TdHJpbmcsaj1oLmhhc093blByb3BlcnR5LGs9e30sbD1hLmRvY3VtZW50LG09XCIyLjEuNFwiLG49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IG4uZm4uaW5pdChhLGIpfSxvPS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxwPS9eLW1zLS8scT0vLShbXFxkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6XCJcIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPzA+YT90aGlzW2ErdGhpcy5sZW5ndGhdOnRoaXNbYV06ZC5jYWxsKHRoaXMpfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9bi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksYSk7cmV0dXJuIGIucHJldk9iamVjdD10aGlzLGIuY29udGV4dD10aGlzLmNvbnRleHQsYn0sZWFjaDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmVhY2godGhpcyxhLGIpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6Zixzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LG4uZXh0ZW5kPW4uZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSxcIm9iamVjdFwiPT10eXBlb2YgZ3x8bi5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtpPmg7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKG4uaXNQbGFpbk9iamVjdChkKXx8KGU9bi5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZuLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZuLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPW4uZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxuLmV4dGVuZCh7ZXhwYW5kbzpcImpRdWVyeVwiKyhtK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLFwiXCIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZnVuY3Rpb25cIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSkrMT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm5cIm9iamVjdFwiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpPyExOmEuY29uc3RydWN0b3ImJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpPyExOiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoXCJ1c2Ugc3RyaWN0XCIpPyhiPWwuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxiLnRleHQ9YSxsLmhlYWQuYXBwZW5kQ2hpbGQoYikucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk6YyhhKSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHAsXCJtcy1cIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MCxmPWEubGVuZ3RoLGc9cyhhKTtpZihjKXtpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOihhK1wiXCIpLnJlcGxhY2UobyxcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpmLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6Zy5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDtkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztnPmY7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGY9MCxnPWEubGVuZ3RoLGg9cyhhKSxpPVtdO2lmKGgpZm9yKDtnPmY7ZisrKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO2Vsc2UgZm9yKGYgaW4gYSlkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtyZXR1cm4gZS5hcHBseShbXSxpKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLG4uaXNGdW5jdGlvbihhKT8oZT1kLmNhbGwoYXJndW1lbnRzLDIpLGY9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGUuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGYuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxuLmd1aWQrKyxmKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Omt9KSxuLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aFtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj1cImxlbmd0aFwiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09Y3x8bi5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDpcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1oYSgpLHo9aGEoKSxBPWhhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLEw9XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLE09XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixOPU0ucmVwbGFjZShcIndcIixcIncjXCIpLE89XCJcXFxcW1wiK0wrXCIqKFwiK00rXCIpKD86XCIrTCtcIiooWypeJHwhfl0/PSlcIitMK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrTitcIikpfClcIitMK1wiKlxcXFxdXCIsUD1cIjooXCIrTStcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrTytcIikqKXwuKilcXFxcKXwpXCIsUT1uZXcgUmVnRXhwKEwrXCIrXCIsXCJnXCIpLFI9bmV3IFJlZ0V4cChcIl5cIitMK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitMK1wiKyRcIixcImdcIiksUz1uZXcgUmVnRXhwKFwiXlwiK0wrXCIqLFwiK0wrXCIqXCIpLFQ9bmV3IFJlZ0V4cChcIl5cIitMK1wiKihbPit+XXxcIitMK1wiKVwiK0wrXCIqXCIpLFU9bmV3IFJlZ0V4cChcIj1cIitMK1wiKihbXlxcXFxdJ1xcXCJdKj8pXCIrTCtcIipcXFxcXVwiLFwiZ1wiKSxWPW5ldyBSZWdFeHAoUCksVz1uZXcgUmVnRXhwKFwiXlwiK04rXCIkXCIpLFg9e0lEOm5ldyBSZWdFeHAoXCJeIyhcIitNK1wiKVwiKSxDTEFTUzpuZXcgUmVnRXhwKFwiXlxcXFwuKFwiK00rXCIpXCIpLFRBRzpuZXcgUmVnRXhwKFwiXihcIitNLnJlcGxhY2UoXCJ3XCIsXCJ3KlwiKStcIilcIiksQVRUUjpuZXcgUmVnRXhwKFwiXlwiK08pLFBTRVVETzpuZXcgUmVnRXhwKFwiXlwiK1ApLENISUxEOm5ldyBSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK0wrXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitMK1wiKig/OihbKy1dfClcIitMK1wiKihcXFxcZCspfCkpXCIrTCtcIipcXFxcKXwpXCIsXCJpXCIpLGJvb2w6bmV3IFJlZ0V4cChcIl4oPzpcIitLK1wiKSRcIixcImlcIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoXCJeXCIrTCtcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrTCtcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrTCtcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFo9L15oXFxkJC9pLCQ9L15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxfPS9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLGFhPS9bK35dLyxiYT0vJ3xcXFxcL2csY2E9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK0wrXCI/fChcIitMK1wiKXwuKVwiLFwiaWdcIiksZGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZWE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGZhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBnYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLGs9Yi5ub2RlVHlwZSxcInN0cmluZ1wiIT10eXBlb2YgYXx8IWF8fDEhPT1rJiY5IT09ayYmMTEhPT1rKXJldHVybiBkO2lmKCFlJiZwKXtpZigxMSE9PWsmJihmPV8uZXhlYyhhKSkpaWYoaj1mWzFdKXtpZig5PT09ayl7aWYoaD1iLmdldEVsZW1lbnRCeUlkKGopLCFofHwhaC5wYXJlbnROb2RlKXJldHVybiBkO2lmKGguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNlIGlmKGIub3duZXJEb2N1bWVudCYmKGg9Yi5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGopKSYmdChiLGgpJiZoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZXtpZihmWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoaj1mWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGopKSxkfWlmKGMucXNhJiYoIXF8fCFxLnRlc3QoYSkpKXtpZihzPXI9dSx3PWIseD0xIT09ayYmYSwxPT09ayYmXCJvYmplY3RcIiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bz1nKGEpLChyPWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpP3M9ci5yZXBsYWNlKGJhLFwiXFxcXCQmXCIpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixzKSxzPVwiW2lkPSdcIitzK1wiJ10gXCIsbD1vLmxlbmd0aDt3aGlsZShsLS0pb1tsXT1zK3JhKG9bbF0pO3c9YWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8Yix4PW8uam9pbihcIixcIil9aWYoeCl0cnl7cmV0dXJuIEguYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwoeCkpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7cnx8Yi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19fXJldHVybiBpKGEucmVwbGFjZShSLFwiJDFcIiksYixkLGUpfWZ1bmN0aW9uIGhhKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYytcIiBcIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrXCIgXCJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KFwifFwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBsYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihcImlucHV0XCI9PT1jfHxcImJ1dHRvblwiPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG9hKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHBhKGEpe3JldHVybiBhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmYX1jPWdhLnN1cHBvcnQ9e30sZj1nYS5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/XCJIVE1MXCIhPT1iLm5vZGVOYW1lOiExfSxtPWdhLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGUsZz1hP2Eub3duZXJEb2N1bWVudHx8YTp2O3JldHVybiBnIT09biYmOT09PWcubm9kZVR5cGUmJmcuZG9jdW1lbnRFbGVtZW50PyhuPWcsbz1nLmRvY3VtZW50RWxlbWVudCxlPWcuZGVmYXVsdFZpZXcsZSYmZSE9PWUudG9wJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGVhLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixlYSkpLHA9IWYoZyksYy5hdHRyaWJ1dGVzPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT1cImlcIiwhYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGcuY3JlYXRlQ29tbWVudChcIlwiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT0kLnRlc3QoZy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxjLmdldEJ5SWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoYSkuaWQ9dSwhZy5nZXRFbGVtZW50c0J5TmFtZXx8IWcuZ2V0RWxlbWVudHNCeU5hbWUodSkubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTpjLnFzYT9iLnF1ZXJ5U2VsZWN0b3JBbGwoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuIHA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT0kLnRlc3QoZy5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD1cIjxhIGlkPSdcIit1K1wiJz48L2E+PHNlbGVjdCBpZD0nXCIrdStcIi1cXGZdJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGEucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCYmcS5wdXNoKFwiWypeJF09XCIrTCtcIiooPzonJ3xcXFwiXFxcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fHEucHVzaChcIlxcXFxbXCIrTCtcIiooPzp2YWx1ZXxcIitLK1wiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWR+PVwiK3UrXCItXVwiKS5sZW5ndGh8fHEucHVzaChcIn49XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmNoZWNrZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiYSNcIit1K1wiKypcIikubGVuZ3RofHxxLnB1c2goXCIuIy4rWyt+XVwiKX0pLGphKGZ1bmN0aW9uKGEpe3ZhciBiPWcuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Iuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiaGlkZGVuXCIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiRFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGgmJnEucHVzaChcIm5hbWVcIitMK1wiKlsqXiR8IX5dPz1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RofHxxLnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIikscS5wdXNoKFwiLC4qOlwiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9JC50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZqYShmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLFwiZGl2XCIpLHMuY2FsbChhLFwiW3MhPScnXTp4XCIpLHIucHVzaChcIiE9XCIsUCl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbihcInxcIikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKFwifFwiKSksYj0kLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHwkLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1nfHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PWd8fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxoPVthXSxpPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1nPy0xOmI9PT1nPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGxhKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaS51bnNoaWZ0KGMpO3doaWxlKGhbZF09PT1pW2RdKWQrKztyZXR1cm4gZD9sYShoW2RdLGlbZF0pOmhbZF09PT12Py0xOmlbZF09PT12PzE6MH0sZyk6bn0sZ2EubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBnYShhLG51bGwsbnVsbCxiKX0sZ2EubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFUsXCI9JyQxJ11cIiksISghYy5tYXRjaGVzU2VsZWN0b3J8fCFwfHxyJiZyLnRlc3QoYil8fHEmJnEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGdhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGdhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZ2EuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGdhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2EpfSxnYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9Z2EuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPVwiXCIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1nYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzppYSxtYXRjaDpYLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKGNhLGRhKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHxcIlwiKS5yZXBsYWNlKGNhLGRhKSxcIn49XCI9PT1hWzJdJiYoYVszXT1cIiBcIithWzNdK1wiIFwiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSxcIm50aFwiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKihcImV2ZW5cIj09PWFbM118fFwib2RkXCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8XCJvZGRcIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gWC5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHxcIlwiOmMmJlYudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrTCtcIilcIithK1wiKFwiK0wrXCJ8JClcIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1nYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjpiPyhlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZS5yZXBsYWNlKFEsXCIgXCIpK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPVwib25seVwiPT09YSYmIW8mJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7az1xW3VdfHwocVt1XT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLG09alswXT09PXcmJmpbMl0sbD1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoMT09PWwubm9kZVR5cGUmJisrbSYmbD09PWIpe2tbYV09W3csbixtXTticmVha319ZWxzZSBpZihzJiYoaj0oYlt1XXx8KGJbdV09e30pKVthXSkmJmpbMF09PT13KW09alsxXTtlbHNlIHdoaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKChoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpJiYrK20mJihzJiYoKGxbdV18fChsW3VdPXt9KSlbYV09W3csbV0pLGw9PT1iKSlicmVhaztyZXR1cm4gbS09ZSxtPT09ZHx8bSVkPT09MCYmbS9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLFwiXCIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aWEoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUooYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aWEoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFIsXCIkMVwiKSk7cmV0dXJuIGRbdV0/aWEoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksYlswXT1udWxsLCFjLnBvcCgpfX0pLGhhczppYShmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGdhKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKGNhLGRhKSxmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzppYShmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGF8fFwiXCIpfHxnYS5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2EpLGE9YS5yZXBsYWNlKGNhLGRhKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhK1wiLVwiKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJiEhYS5jaGVja2VkfHxcIm9wdGlvblwiPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiZcImJ1dHRvblwiPT09YS50eXBlfHxcImJ1dHRvblwiPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm5cImlucHV0XCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpvYShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6b2EoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm9hKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46b2EoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6b2EoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om9hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1tYShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1uYShiKTtmdW5jdGlvbiBxYSgpe31xYS5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHFhLGc9Z2EudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYStcIiBcIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVMuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1ULmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFIsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9nYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHJhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiBzYShhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiZcInBhcmVudE5vZGVcIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGo9W3csZl07aWYoZyl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZSkmJmEoYixjLGcpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXtpZihpPWJbdV18fChiW3VdPXt9KSwoaD1pW2RdKSYmaFswXT09PXcmJmhbMV09PT1mKXJldHVybiBqWzJdPWhbMl07aWYoaVtkXT1qLGpbMl09YShiLGMsZykpcmV0dXJuITB9fX1mdW5jdGlvbiB0YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB1YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB2YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtpPmg7aCsrKShmPWFbaF0pJiYoIWN8fGMoZixkLGUpKSYmKGcucHVzaChmKSxqJiZiLnB1c2goaCkpO3JldHVybiBnfWZ1bmN0aW9uIHdhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXdhKGQpKSxlJiYhZVt1XSYmKGU9d2EoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dWEoYnx8XCIqXCIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp2YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dmEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXZhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB4YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlW1wiIFwiXSxpPWc/MTowLGs9c2EoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBKKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXt2YXIgZT0hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKTtyZXR1cm4gYj1udWxsLGV9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3NhKHRhKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB3YShpPjEmJnRhKG0pLGk+MSYmcmEoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTpcIiBcIj09PWFbaS0yXS50eXBlP1wiKlwiOlwiXCJ9KSkucmVwbGFjZShSLFwiJDFcIiksYyxlPmkmJnhhKGEuc2xpY2UoaSxlKSksZj5lJiZ4YShhPWEuc2xpY2UoZSkpLGY+ZSYmcmEoYSkpfW0ucHVzaChjKX1yZXR1cm4gdGEobSl9ZnVuY3Rpb24geWEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbSxvLHA9MCxxPVwiMFwiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKFwiKlwiLGspLHY9dys9bnVsbD09dD8xOk1hdGgucmFuZG9tKCl8fC4xLHg9dS5sZW5ndGg7Zm9yKGsmJihqPWchPT1uJiZnKTtxIT09eCYmbnVsbCE9KGw9dVtxXSk7cSsrKXtpZihlJiZsKXttPTA7d2hpbGUobz1hW20rK10paWYobyhsLGcsaCkpe2kucHVzaChsKTticmVha31rJiYodz12KX1jJiYoKGw9IW8mJmwpJiZwLS0sZiYmci5wdXNoKGwpKX1pZihwKz1xLGMmJnEhPT1wKXttPTA7d2hpbGUobz1iW20rK10pbyhyLHMsZyxoKTtpZihmKXtpZihwPjApd2hpbGUocS0tKXJbcV18fHNbcV18fChzW3FdPUYuY2FsbChpKSk7cz12YShzKX1ILmFwcGx5KGkscyksayYmIWYmJnMubGVuZ3RoPjAmJnArYi5sZW5ndGg+MSYmZ2EudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9dixqPXQpLHJ9O3JldHVybiBjP2lhKGYpOmZ9cmV0dXJuIGg9Z2EuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYStcIiBcIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eGEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHlhKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGksaixrLGwsbSxuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiZcIklEXCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVgubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNhLGRhKSxhYS50ZXN0KGpbMF0udHlwZSkmJnBhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZyYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSxhYS50ZXN0KGEpJiZwYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdChcIlwiKS5zb3J0KEIpLmpvaW4oXCJcIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWphKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKX0pLGphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGthKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYixcInR5cGVcIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8a2EoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8XCJpbnB1dFwiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGphKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGthKEssZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTtuLmZpbmQ9dCxuLmV4cHI9dC5zZWxlY3RvcnMsbi5leHByW1wiOlwiXT1uLmV4cHIucHNldWRvcyxuLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdj0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sdz0vXi5bXjojXFxbXFwuLF0qJC87ZnVuY3Rpb24geChhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2lmKHcudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGcuY2FsbChiLGEpPj0wIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT1cIjpub3QoXCIrYStcIilcIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMubGVuZ3RoLGQ9W10sZT10aGlzO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yK1wiIFwiK2E6YSxkfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXgodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmdS50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgeSx6PS9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEE9bi5mbi5pbml0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtpZighYSlyZXR1cm4gdGhpcztpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoYz1cIjxcIj09PWFbMF0mJlwiPlwiPT09YVthLmxlbmd0aC0xXSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTp6LmV4ZWMoYSksIWN8fCFjWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8eSkuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoY1sxXSl7aWYoYj1iIGluc3RhbmNlb2Ygbj9iWzBdOmIsbi5tZXJnZSh0aGlzLG4ucGFyc2VIVE1MKGNbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6bCwhMCkpLHYudGVzdChjWzFdKSYmbi5pc1BsYWluT2JqZWN0KGIpKWZvcihjIGluIGIpbi5pc0Z1bmN0aW9uKHRoaXNbY10pP3RoaXNbY10oYltjXSk6dGhpcy5hdHRyKGMsYltjXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGQ9bC5nZXRFbGVtZW50QnlJZChjWzJdKSxkJiZkLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZCksdGhpcy5jb250ZXh0PWwsdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTpuLmlzRnVuY3Rpb24oYSk/XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHkucmVhZHk/eS5yZWFkeShhKTphKG4pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG4ubWFrZUFycmF5KGEsdGhpcykpfTtBLnByb3RvdHlwZT1uLmZuLHk9bihsKTt2YXIgQj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxDPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O24uZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSxzaWJsaW5nOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfX0pLG4uZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9bihhLHRoaXMpLGM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7Yz5hO2ErKylpZihuLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dS50ZXN0KGEpfHxcInN0cmluZ1wiIT10eXBlb2YgYT9uKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZuLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bi51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP2cuY2FsbChuKGEpLHRoaXNbMF0pOmcuY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWUobi5tZXJnZSh0aGlzLmdldCgpLG4oYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gRChhLGIpe3doaWxlKChhPWFbYl0pJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9bi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLFwibmV4dFNpYmxpbmdcIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVyblwiVW50aWxcIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiZcInN0cmluZ1wiPT10eXBlb2YgZCYmKGU9bi5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKENbYV18fG4udW5pcXVlKGUpLEIudGVzdChhKSYmZS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBFPS9cXFMrL2csRj17fTtmdW5jdGlvbiBHKGEpe3ZhciBiPUZbYV09e307cmV0dXJuIG4uZWFjaChhLm1hdGNoKEUpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW4uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9XCJzdHJpbmdcIj09dHlwZW9mIGE/RlthXXx8RyhhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmLGcsaD1bXSxpPSFhLm9uY2UmJltdLGo9ZnVuY3Rpb24obCl7Zm9yKGI9YS5tZW1vcnkmJmwsYz0hMCxnPWV8fDAsZT0wLGY9aC5sZW5ndGgsZD0hMDtoJiZmPmc7ZysrKWlmKGhbZ10uYXBwbHkobFswXSxsWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlKXtiPSExO2JyZWFrfWQ9ITEsaCYmKGk/aS5sZW5ndGgmJmooaS5zaGlmdCgpKTpiP2g9W106ay5kaXNhYmxlKCkpfSxrPXthZGQ6ZnVuY3Rpb24oKXtpZihoKXt2YXIgYz1oLmxlbmd0aDshZnVuY3Rpb24gZyhiKXtuLmVhY2goYixmdW5jdGlvbihiLGMpe3ZhciBkPW4udHlwZShjKTtcImZ1bmN0aW9uXCI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiZcInN0cmluZ1wiIT09ZCYmZyhjKX0pfShhcmd1bWVudHMpLGQ/Zj1oLmxlbmd0aDpiJiYoZT1jLGooYikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gaCYmbi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihhLGIpe3ZhciBjO3doaWxlKChjPW4uaW5BcnJheShiLGgsYykpPi0xKWguc3BsaWNlKGMsMSksZCYmKGY+PWMmJmYtLSxnPj1jJiZnLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGEpe3JldHVybiBhP24uaW5BcnJheShhLGgpPi0xOiEoIWh8fCFoLmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGg9W10sZj0wLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gaD1pPWI9dm9pZCAwLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWh9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gaT12b2lkIDAsYnx8ay5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWl9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIWh8fGMmJiFpfHwoYj1ifHxbXSxiPVthLGIuc2xpY2U/Yi5zbGljZSgpOmJdLGQ/aS5wdXNoKGIpOmooYikpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gay5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWN9fTtyZXR1cm4ga30sbi5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciBiPVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsbi5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxjPVwicGVuZGluZ1wiLGQ9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBlLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gbi5EZWZlcnJlZChmdW5jdGlvbihjKXtuLmVhY2goYixmdW5jdGlvbihiLGYpe3ZhciBnPW4uaXNGdW5jdGlvbihhW2JdKSYmYVtiXTtlW2ZbMV1dKGZ1bmN0aW9uKCl7dmFyIGE9ZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/YS5wcm9taXNlKCkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpLnByb2dyZXNzKGMubm90aWZ5KTpjW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rXCJXaXRoXCJdPWcuZmlyZVdpdGh9KSxkLnByb21pc2UoZSksYSYmYS5jYWxsKGUsZSksZX0sd2hlbjpmdW5jdGlvbihhKXt2YXIgYj0wLGM9ZC5jYWxsKGFyZ3VtZW50cyksZT1jLmxlbmd0aCxmPTEhPT1lfHxhJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9lOjAsZz0xPT09Zj9hOm4uRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZSl7YlthXT10aGlzLGNbYV09YXJndW1lbnRzLmxlbmd0aD4xP2QuY2FsbChhcmd1bWVudHMpOmUsYz09PWk/Zy5ub3RpZnlXaXRoKGIsYyk6LS1mfHxnLnJlc29sdmVXaXRoKGIsYyl9fSxpLGosaztpZihlPjEpZm9yKGk9bmV3IEFycmF5KGUpLGo9bmV3IEFycmF5KGUpLGs9bmV3IEFycmF5KGUpO2U+YjtiKyspY1tiXSYmbi5pc0Z1bmN0aW9uKGNbYl0ucHJvbWlzZSk/Y1tiXS5wcm9taXNlKCkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCkucHJvZ3Jlc3MoaChiLGosaSkpOi0tZjtyZXR1cm4gZnx8Zy5yZXNvbHZlV2l0aChrLGMpLGcucHJvbWlzZSgpfX0pO3ZhciBIO24uZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucmVhZHkucHJvbWlzZSgpLmRvbmUoYSksdGhpc30sbi5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGEpe2E/bi5yZWFkeVdhaXQrKzpuLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oYSl7KGE9PT0hMD8tLW4ucmVhZHlXYWl0Om4uaXNSZWFkeSl8fChuLmlzUmVhZHk9ITAsYSE9PSEwJiYtLW4ucmVhZHlXYWl0PjB8fChILnJlc29sdmVXaXRoKGwsW25dKSxuLmZuLnRyaWdnZXJIYW5kbGVyJiYobihsKS50cmlnZ2VySGFuZGxlcihcInJlYWR5XCIpLG4obCkub2ZmKFwicmVhZHlcIikpKSl9fSk7ZnVuY3Rpb24gSSgpe2wucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixJLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSSwhMSksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSHx8KEg9bi5EZWZlcnJlZCgpLFwiY29tcGxldGVcIj09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KG4ucmVhZHkpOihsLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpKSksSC5wcm9taXNlKGIpfSxuLnJlYWR5LnByb21pc2UoKTt2YXIgSj1uLmFjY2Vzcz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKFwib2JqZWN0XCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyluLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfTtuLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBLKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPW4uZXhwYW5kbytLLnVpZCsrfUsudWlkPTEsSy5hY2NlcHRzPW4uYWNjZXB0RGF0YSxLLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGEpe2lmKCFLLmFjY2VwdHMoYSkpcmV0dXJuIDA7dmFyIGI9e30sYz1hW3RoaXMuZXhwYW5kb107aWYoIWMpe2M9Sy51aWQrKzt0cnl7Ylt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLGIpfWNhdGNoKGQpe2JbdGhpcy5leHBhbmRvXT1jLG4uZXh0ZW5kKGEsYil9fXJldHVybiB0aGlzLmNhY2hlW2NdfHwodGhpcy5jYWNoZVtjXT17fSksY30sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMua2V5KGEpLGY9dGhpcy5jYWNoZVtlXTtpZihcInN0cmluZ1wiPT10eXBlb2YgYilmW2JdPWM7ZWxzZSBpZihuLmlzRW1wdHlPYmplY3QoZikpbi5leHRlbmQodGhpcy5jYWNoZVtlXSxiKTtlbHNlIGZvcihkIGluIGIpZltkXT1iW2RdO3JldHVybiBmfSxnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNhY2hlW3RoaXMua2V5KGEpXTtyZXR1cm4gdm9pZCAwPT09Yj9jOmNbYl19LGFjY2VzczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIHZvaWQgMD09PWJ8fGImJlwic3RyaW5nXCI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jPyhkPXRoaXMuZ2V0KGEsYiksdm9pZCAwIT09ZD9kOnRoaXMuZ2V0KGEsbi5jYW1lbENhc2UoYikpKToodGhpcy5zZXQoYSxiLGMpLHZvaWQgMCE9PWM/YzpiKX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpcy5rZXkoYSksZz10aGlzLmNhY2hlW2ZdO2lmKHZvaWQgMD09PWIpdGhpcy5jYWNoZVtmXT17fTtlbHNle24uaXNBcnJheShiKT9kPWIuY29uY2F0KGIubWFwKG4uY2FtZWxDYXNlKSk6KGU9bi5jYW1lbENhc2UoYiksYiBpbiBnP2Q9W2IsZV06KGQ9ZSxkPWQgaW4gZz9bZF06ZC5tYXRjaChFKXx8W10pKSxjPWQubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZ1tkW2NdXX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNFbXB0eU9iamVjdCh0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV18fHt9KX0sZGlzY2FyZDpmdW5jdGlvbihhKXthW3RoaXMuZXhwYW5kb10mJmRlbGV0ZSB0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV19fTt2YXIgTD1uZXcgSyxNPW5ldyBLLE49L14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLE89LyhbQS1aXSkvZztmdW5jdGlvbiBQKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPVwiZGF0YS1cIitiLnJlcGxhY2UoTyxcIi0kMVwiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVwidHJ1ZVwiPT09Yz8hMDpcImZhbHNlXCI9PT1jPyExOlwibnVsbFwiPT09Yz9udWxsOitjK1wiXCI9PT1jPytjOk4udGVzdChjKT9uLnBhcnNlSlNPTihjKTpjfWNhdGNoKGUpe31NLnNldChhLGIsYyl9ZWxzZSBjPXZvaWQgMDtyZXR1cm4gY31uLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gTS5oYXNEYXRhKGEpfHxMLmhhc0RhdGEoYSl9LGRhdGE6ZnVuY3Rpb24oYSxiLGMpe1xucmV0dXJuIE0uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe00ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1uLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxQKGYsZCxlW2RdKSkpO0wuc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5zZXQodGhpcyxhKX0pOkoodGhpcyxmdW5jdGlvbihiKXt2YXIgYyxkPW4uY2FtZWxDYXNlKGEpO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9TS5nZXQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9TS5nZXQoZixkKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9UChmLGQsdm9pZCAwKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9TS5nZXQodGhpcyxkKTtNLnNldCh0aGlzLGQsYiksLTEhPT1hLmluZGV4T2YoXCItXCIpJiZ2b2lkIDAhPT1jJiZNLnNldCh0aGlzLGEsYil9KX0sbnVsbCxiLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5yZW1vdmUodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9TC5nZXQoYSxiKSxjJiYoIWR8fG4uaXNBcnJheShjKT9kPUwuYWNjZXNzKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHxcImZ4XCI7dmFyIGM9bi5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1uLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe24uZGVxdWV1ZShhLGIpfTtcImlucHJvZ3Jlc3NcIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJihcImZ4XCI9PT1iJiZjLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKXtMLnJlbW92ZShhLFtiK1wicXVldWVcIixjXSl9KX0pfX0pLG4uZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT1cImZ4XCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksXCJmeFwiPT09YSYmXCJpbnByb2dyZXNzXCIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9O1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiZnhcIjt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErXCJxdWV1ZUhvb2tzXCIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBRPS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSxSPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxTPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PW4uY3NzKGEsXCJkaXNwbGF5XCIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSksYz1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSxjLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksYi5hcHBlbmRDaGlsZChjKSxrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9XCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPVwidW5kZWZpbmVkXCI7ay5mb2N1c2luQnViYmxlcz1cIm9uZm9jdXNpblwiaW4gYTt2YXIgVj0vXmtleS8sVz0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxYPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxZPS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIFooKXtyZXR1cm4hMH1mdW5jdGlvbiAkKCl7cmV0dXJuITF9ZnVuY3Rpb24gXygpe3RyeXtyZXR1cm4gbC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319bi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bi5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuIHR5cGVvZiBuIT09VSYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvJiYobD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LGs9bi5leHRlbmQoe3R5cGU6byxvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmbi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvKXtsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxtPWlbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLG0sbyxwPVtkfHxsXSxxPWouY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWouY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihnPWg9ZD1kfHxsLDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmIVgudGVzdChxK24uZXZlbnQudHJpZ2dlcmVkKSYmKHEuaW5kZXhPZihcIi5cIik+PTAmJihyPXEuc3BsaXQoXCIuXCIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oXCIuXCIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIityLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWQpLGM9bnVsbD09Yz9bYl06bi5tYWtlQXJyYXkoYyxbYl0pLG89bi5ldmVudC5zcGVjaWFsW3FdfHx7fSxlfHwhby50cmlnZ2VyfHxvLnRyaWdnZXIuYXBwbHkoZCxjKSE9PSExKSl7aWYoIWUmJiFvLm5vQnViYmxlJiYhbi5pc1dpbmRvdyhkKSl7Zm9yKGk9by5kZWxlZ2F0ZVR5cGV8fHEsWC50ZXN0KGkrcSl8fChnPWcucGFyZW50Tm9kZSk7ZztnPWcucGFyZW50Tm9kZSlwLnB1c2goZyksaD1nO2g9PT0oZC5vd25lckRvY3VtZW50fHxsKSYmcC5wdXNoKGguZGVmYXVsdFZpZXd8fGgucGFyZW50V2luZG93fHxhKX1mPTA7d2hpbGUoKGc9cFtmKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zj4xP2k6by5iaW5kVHlwZXx8cSxtPShMLmdldChnLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZyxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGcsYyksbT1rJiZnW2tdLG0mJm0uYXBwbHkmJm4uYWNjZXB0RGF0YShnKSYmKGIucmVzdWx0PW0uYXBwbHkoZyxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cSxlfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxvLl9kZWZhdWx0JiZvLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYykhPT0hMXx8IW4uYWNjZXB0RGF0YShkKXx8ayYmbi5pc0Z1bmN0aW9uKGRbcV0pJiYhbi5pc1dpbmRvdyhkKSYmKGg9ZFtrXSxoJiYoZFtrXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGRbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaCYmKGRba109aCkpLGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShMLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZy5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxlPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1lJiYoYS5yZXN1bHQ9ZSk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxcImNsaWNrXCIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZFtlXSYmKGRbZV09Zi5uZWVkc0NvbnRleHQ/bihlLHRoaXMpLmluZGV4KGkpPj0wOm4uZmluZChlLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZFtlXSYmZC5wdXNoKGYpO2QubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczpkfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b247cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGM9YS50YXJnZXQub3duZXJEb2N1bWVudHx8bCxkPWMuZG9jdW1lbnRFbGVtZW50LGU9Yy5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhkJiZkLnNjcm9sbExlZnR8fGUmJmUuc2Nyb2xsTGVmdHx8MCktKGQmJmQuY2xpZW50TGVmdHx8ZSYmZS5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZCYmZC5zY3JvbGxUb3B8fGUmJmUuc2Nyb2xsVG9wfHwwKS0oZCYmZC5jbGllbnRUb3B8fGUmJmUuY2xpZW50VG9wfHwwKSksYS53aGljaHx8dm9pZCAwPT09Znx8KGEud2hpY2g9MSZmPzE6MiZmPzM6NCZmPzI6MCksYX19LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1XLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlYudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBuLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9bCksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PV8oKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7ZD9uLmV2ZW50LnRyaWdnZXIoZSxudWxsLGIpOm4uZXZlbnQuZGlzcGF0Y2guY2FsbChiLGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCkmJmMucHJldmVudERlZmF1bHQoKX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP1o6JCk6dGhpcy50eXBlPWEsYiYmbi5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bi5ub3coKSx2b2lkKHRoaXNbbi5leHBhbmRvXT0hMCkpOm5ldyBuLkV2ZW50KGEsYil9LG4uRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6JCxpc1Byb3BhZ2F0aW9uU3RvcHBlZDokLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9WixhJiZhLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuKCFlfHxlIT09ZCYmIW4uY29udGFpbnMoZCxlKSkmJihhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGsuZm9jdXNpbkJ1YmJsZXN8fG4uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpLCEwKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTC5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpLTE7ZT9MLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLEwucmVtb3ZlKGQsYikpfX19KSxuLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJihcInN0cmluZ1wiPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPSQ7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihmPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWYuZ3VpZHx8KGYuZ3VpZD1uLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPSQpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIGFhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxiYT0vPChbXFx3Ol0rKS8sY2E9Lzx8JiM/XFx3KzsvLGRhPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWE9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxmYT0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdhPS9edHJ1ZVxcLyguKikvLGhhPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxpYT17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2lhLm9wdGdyb3VwPWlhLm9wdGlvbixpYS50Ym9keT1pYS50Zm9vdD1pYS5jb2xncm91cD1pYS5jYXB0aW9uPWlhLnRoZWFkLGlhLnRoPWlhLnRkO2Z1bmN0aW9uIGphKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIGthKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIGxhKGEpe3ZhciBiPWdhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBtYShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxMLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gbmEoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihMLmhhc0RhdGEoYSkmJihmPUwuYWNjZXNzKGEpLGc9TC5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2Q+YztjKyspbi5ldmVudC5hZGQoYixlLGpbZV1bY10pfU0uaGFzRGF0YShhKSYmKGg9TS5hY2Nlc3MoYSksaT1uLmV4dGVuZCh7fSxoKSxNLnNldChiLGkpKX19ZnVuY3Rpb24gb2EoYSxiKXt2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBwYShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZULnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOihcImlucHV0XCI9PT1jfHxcInRleHRhcmVhXCI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1uLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1vYShoKSxmPW9hKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspcGEoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8b2EoYSksZz1nfHxvYShoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKW5hKGZbZF0sZ1tkXSk7ZWxzZSBuYShhLGgpO3JldHVybiBnPW9hKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmbWEoZywhaSYmb2EoYSxcInNjcmlwdFwiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZihcIm9iamVjdFwiPT09bi50eXBlKGUpKW4ubWVyZ2UobCxlLm5vZGVUeXBlP1tlXTplKTtlbHNlIGlmKGNhLnRlc3QoZSkpe2Y9Znx8ay5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGc9KGJhLmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGg9aWFbZ118fGlhLl9kZWZhdWx0LGYuaW5uZXJIVE1MPWhbMV0rZS5yZXBsYWNlKGFhLFwiPCQxPjwvJDI+XCIpK2hbMl0saj1oWzBdO3doaWxlKGotLSlmPWYubGFzdENoaWxkO24ubWVyZ2UobCxmLmNoaWxkTm9kZXMpLGY9ay5maXJzdENoaWxkLGYudGV4dENvbnRlbnQ9XCJcIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PVwiXCIsbT0wO3doaWxlKGU9bFttKytdKWlmKCghZHx8LTE9PT1uLmluQXJyYXkoZSxkKSkmJihpPW4uY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpLGY9b2Eoay5hcHBlbmRDaGlsZChlKSxcInNjcmlwdFwiKSxpJiZtYShmKSxjKSl7aj0wO3doaWxlKGU9ZltqKytdKWZhLnRlc3QoZS50eXBlfHxcIlwiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGY9bi5ldmVudC5zcGVjaWFsLGc9MDt2b2lkIDAhPT0oYz1hW2ddKTtnKyspe2lmKG4uYWNjZXB0RGF0YShjKSYmKGU9Y1tMLmV4cGFuZG9dLGUmJihiPUwuY2FjaGVbZV0pKSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZltkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtMLmNhY2hlW2VdJiZkZWxldGUgTC5jYWNoZVtlXX1kZWxldGUgTS5jYWNoZVtjW00uZXhwYW5kb11dfX19KSxuLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWphKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9uLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bi5jbGVhbkRhdGEob2EoYykpLGMucGFyZW50Tm9kZSYmKGImJm4uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZtYShvYShjLFwic2NyaXB0XCIpKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2EoYSwhMSkpLGEudGV4dENvbnRlbnQ9XCJcIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEmJjE9PT1iLm5vZGVUeXBlKXJldHVybiBiLmlubmVySFRNTDtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmIWRhLnRlc3QoYSkmJiFpYVsoYmEuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPWEucmVwbGFjZShhYSxcIjwkMT48LyQyPlwiKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYShiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbi5jbGVhbkRhdGEob2EodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG09dGhpcyxvPWwtMSxwPWFbMF0scT1uLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiZcInN0cmluZ1wiPT10eXBlb2YgcCYmIWsuY2hlY2tDbG9uZSYmZWEudGVzdChwKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPW0uZXEoYyk7cSYmKGFbMF09cC5jYWxsKHRoaXMsYyxkLmh0bWwoKSkpLGQuZG9tTWFuaXAoYSxiKX0pO2lmKGwmJihjPW4uYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxkPWMuZmlyc3RDaGlsZCwxPT09Yy5jaGlsZE5vZGVzLmxlbmd0aCYmKGM9ZCksZCkpe2ZvcihmPW4ubWFwKG9hKGMsXCJzY3JpcHRcIiksa2EpLGc9Zi5sZW5ndGg7bD5qO2orKyloPWMsaiE9PW8mJihoPW4uY2xvbmUoaCwhMCwhMCksZyYmbi5tZXJnZShmLG9hKGgsXCJzY3JpcHRcIikpKSxiLmNhbGwodGhpc1tqXSxoLGopO2lmKGcpZm9yKGk9ZltmLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGYsbGEpLGo9MDtnPmo7aisrKWg9ZltqXSxmYS50ZXN0KGgudHlwZXx8XCJcIikmJiFMLmFjY2VzcyhoLFwiZ2xvYmFsRXZhbFwiKSYmbi5jb250YWlucyhpLGgpJiYoaC5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChoLnNyYyk6bi5nbG9iYWxFdmFsKGgudGV4dENvbnRlbnQucmVwbGFjZShoYSxcIlwiKSkpfXJldHVybiB0aGlzfX0pLG4uZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1uKGEpLGc9ZS5sZW5ndGgtMSxoPTA7Zz49aDtoKyspYz1oPT09Zz90aGlzOnRoaXMuY2xvbmUoITApLG4oZVtoXSlbYl0oYyksZi5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgcWEscmE9e307ZnVuY3Rpb24gc2EoYixjKXt2YXIgZCxlPW4oYy5jcmVhdGVFbGVtZW50KGIpKS5hcHBlbmRUbyhjLmJvZHkpLGY9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSYmKGQ9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShlWzBdKSk/ZC5kaXNwbGF5Om4uY3NzKGVbMF0sXCJkaXNwbGF5XCIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gdGEoYSl7dmFyIGI9bCxjPXJhW2FdO3JldHVybiBjfHwoYz1zYShhLGIpLFwibm9uZVwiIT09YyYmY3x8KHFhPShxYXx8bihcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPXFhWzBdLmNvbnRlbnREb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9c2EoYSxiKSxxYS5kZXRhY2goKSkscmFbYV09YyksY312YXIgdWE9L15tYXJnaW4vLHZhPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksd2E9ZnVuY3Rpb24oYil7cmV0dXJuIGIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXI/Yi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYixudWxsKTphLmdldENvbXB1dGVkU3R5bGUoYixudWxsKX07ZnVuY3Rpb24geGEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHx3YShhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0pLGMmJihcIlwiIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksdmEudGVzdChnKSYmdWEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiB5YShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0hZnVuY3Rpb24oKXt2YXIgYixjLGQ9bC5kb2N1bWVudEVsZW1lbnQsZT1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZj1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoZi5zdHlsZSl7Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsZi5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsay5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxlLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGUuYXBwZW5kQ2hpbGQoZik7ZnVuY3Rpb24gZygpe2Yuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZi5pbm5lckhUTUw9XCJcIixkLmFwcGVuZENoaWxkKGUpO3ZhciBnPWEuZ2V0Q29tcHV0ZWRTdHlsZShmLG51bGwpO2I9XCIxJVwiIT09Zy50b3AsYz1cIjRweFwiPT09Zy53aWR0aCxkLnJlbW92ZUNoaWxkKGUpfWEuZ2V0Q29tcHV0ZWRTdHlsZSYmbi5leHRlbmQoayx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksYn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmZygpLGN9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWYuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWYuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiLGMuc3R5bGUubWFyZ2luUmlnaHQ9Yy5zdHlsZS53aWR0aD1cIjBcIixmLnN0eWxlLndpZHRoPVwiMXB4XCIsZC5hcHBlbmRDaGlsZChlKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjLG51bGwpLm1hcmdpblJpZ2h0KSxkLnJlbW92ZUNoaWxkKGUpLGYucmVtb3ZlQ2hpbGQoYyksYn19KX19KCksbi5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgemE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEFhPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKC4qKSRcIixcImlcIiksQmE9bmV3IFJlZ0V4cChcIl4oWystXSk9KFwiK1ErXCIpXCIsXCJpXCIpLENhPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxEYT17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LEVhPVtcIldlYmtpdFwiLFwiT1wiLFwiTW96XCIsXCJtc1wiXTtmdW5jdGlvbiBGYShhLGIpe2lmKGIgaW4gYSlyZXR1cm4gYjt2YXIgYz1iWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1FYS5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9RWFbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gR2EoYSxiLGMpe3ZhciBkPUFhLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fFwicHhcIik6Yn1mdW5jdGlvbiBIYShhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpXCJtYXJnaW5cIj09PWMmJihnKz1uLmNzcyhhLGMrUltmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpOihnKz1uLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9bi5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gSWEoYSxiLGMpe3ZhciBkPSEwLGU9XCJ3aWR0aFwiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9d2EoYSksZz1cImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPXhhKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksdmEudGVzdChlKSlyZXR1cm4gZTtkPWcmJihrLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrSGEoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGQsZikrXCJweFwifWZ1bmN0aW9uIEphKGEsYil7Zm9yKHZhciBjLGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihmW2ddPUwuZ2V0KGQsXCJvbGRkaXNwbGF5XCIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fFwibm9uZVwiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZTKGQpJiYoZltnXT1MLmFjY2VzcyhkLFwib2xkZGlzcGxheVwiLHRhKGQubm9kZU5hbWUpKSkpOihlPVMoZCksXCJub25lXCI9PT1jJiZlfHxMLnNldChkLFwib2xkZGlzcGxheVwiLGU/YzpuLmNzcyhkLFwiZGlzcGxheVwiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiZcIm5vbmVcIiE9PWQuc3R5bGUuZGlzcGxheSYmXCJcIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fFwiXCI6XCJub25lXCIpKTtyZXR1cm4gYX1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPXhhKGEsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1jP1wiMVwiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpcImNzc0Zsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZhKGksaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPUJhLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobi5jc3MoYSxiKSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCIhPT1mfHxuLmNzc051bWJlcltoXXx8KGMrPVwicHhcIiksay5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYShhLnN0eWxlLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPXhhKGEsYixkKSksXCJub3JtYWxcIj09PWUmJmIgaW4gRGEmJihlPURhW2JdKSxcIlwiPT09Y3x8Yz8oZj1wYXJzZUZsb2F0KGUpLGM9PT0hMHx8bi5pc051bWVyaWMoZik/Znx8MDplKTplfX0pLG4uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz96YS50ZXN0KG4uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bi5zd2FwKGEsQ2EsZnVuY3Rpb24oKXtyZXR1cm4gSWEoYSxiLGQpfSk6SWEoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZ3YShhKTtyZXR1cm4gR2EoYSxjLGQ/SGEoYSxiLGQsXCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZSksZSk6MCl9fX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9eWEoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bi5zd2FwKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0seGEsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1JbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sdWEudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9R2EpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD13YShhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gS2EoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IEthLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1LYSxLYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkthLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9S2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOkthLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPUthLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9Yj1uLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz1iPWEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6S2EucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sS2EucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUthLnByb3RvdHlwZSxLYS5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW4uY3NzKGEuZWxlbSxhLnByb3AsXCJcIiksYiYmXCJhdXRvXCIhPT1iP2I6MCk6YS5lbGVtW2EucHJvcF19LHNldDpmdW5jdGlvbihhKXtuLmZ4LnN0ZXBbYS5wcm9wXT9uLmZ4LnN0ZXBbYS5wcm9wXShhKTphLmVsZW0uc3R5bGUmJihudWxsIT1hLmVsZW0uc3R5bGVbbi5jc3NQcm9wc1thLnByb3BdXXx8bi5jc3NIb29rc1thLnByb3BdKT9uLnN0eWxlKGEuZWxlbSxhLnByb3AsYS5ub3crYS51bml0KTphLmVsZW1bYS5wcm9wXT1hLm5vd319fSxLYS5wcm9wSG9va3Muc2Nyb2xsVG9wPUthLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oYSl7YS5lbGVtLm5vZGVUeXBlJiZhLmVsZW0ucGFyZW50Tm9kZSYmKGEuZWxlbVthLnByb3BdPWEubm93KX19LG4uZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN3aW5nOmZ1bmN0aW9uKGEpe3JldHVybi41LU1hdGguY29zKGEqTWF0aC5QSSkvMn19LG4uZng9S2EucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBMYSxNYSxOYT0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sT2E9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrUStcIikoW2EteiVdKikkXCIsXCJpXCIpLFBhPS9xdWV1ZUhvb2tzJC8sUWE9W1ZhXSxSYT17XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPU9hLmV4ZWMoYiksZj1lJiZlWzNdfHwobi5jc3NOdW1iZXJbYV0/XCJcIjpcInB4XCIpLGc9KG4uY3NzTnVtYmVyW2FdfHxcInB4XCIhPT1mJiYrZCkmJk9hLmV4ZWMobi5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fFwiLjVcIixnLz1oLG4uc3R5bGUoYy5lbGVtLGEsZytmKTt3aGlsZShoIT09KGg9Yy5jdXIoKS9kKSYmMSE9PWgmJi0taSl9cmV0dXJuIGUmJihnPWMuc3RhcnQ9K2d8fCtkfHwwLGMudW5pdD1mLGMuZW5kPWVbMV0/ZysoZVsxXSsxKSplWzJdOitlWzJdKSxjfV19O2Z1bmN0aW9uIFNhKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtMYT12b2lkIDB9KSxMYT1uLm5vdygpfWZ1bmN0aW9uIFRhKGEsYil7dmFyIGMsZD0wLGU9e2hlaWdodDphfTtmb3IoYj1iPzE6MDs0PmQ7ZCs9Mi1iKWM9UltkXSxlW1wibWFyZ2luXCIrY109ZVtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBVYShhLGIsYyl7Zm9yKHZhciBkLGU9KFJhW2JdfHxbXSkuY29uY2F0KFJhW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gVmEoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD10aGlzLG09e30sbz1hLnN0eWxlLHA9YS5ub2RlVHlwZSYmUyhhKSxxPUwuZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsXCJkaXNwbGF5XCIpLGs9XCJub25lXCI9PT1qP0wuZ2V0KGEsXCJvbGRkaXNwbGF5XCIpfHx0YShhLm5vZGVOYW1lKTpqLFwiaW5saW5lXCI9PT1rJiZcIm5vbmVcIj09PW4uY3NzKGEsXCJmbG9hdFwiKSYmKG8uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9XCJoaWRkZW5cIixsLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sTmEuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHA/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpXCJpbmxpbmVcIj09PShcIm5vbmVcIj09PWo/dGEoYS5ub2RlTmFtZSk6aikmJihvLmRpc3BsYXk9aik7ZWxzZXtxP1wiaGlkZGVuXCJpbiBxJiYocD1xLmhpZGRlbik6cT1MLmFjY2VzcyhhLFwiZnhzaG93XCIse30pLGYmJihxLmhpZGRlbj0hcCkscD9uKGEpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXtuKGEpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciBiO0wucmVtb3ZlKGEsXCJmeHNob3dcIik7Zm9yKGIgaW4gbSluLnN0eWxlKGEsYixtW2JdKX0pO2ZvcihkIGluIG0pZz1VYShwP3FbZF06MCxkLGwpLGQgaW4gcXx8KHFbZF09Zy5zdGFydCxwJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PVwid2lkdGhcIj09PWR8fFwiaGVpZ2h0XCI9PT1kPzE6MCkpfX1mdW5jdGlvbiBXYShhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW4uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbi5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1uLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gWGEoYSxiLGMpe3ZhciBkLGUsZj0wLGc9UWEubGVuZ3RoLGg9bi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9TGF8fFNhKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm4uZXh0ZW5kKHt9LGIpLG9wdHM6bi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpMYXx8U2EoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW4uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKFdhKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1RYVtmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG4ubWFwKGssVWEsaiksbi5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbi5meC50aW1lcihuLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1uLkFuaW1hdGlvbj1uLmV4dGVuZChYYSx7dHdlZW5lcjpmdW5jdGlvbihhLGIpe24uaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLnNwbGl0KFwiIFwiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sUmFbY109UmFbY118fFtdLFJhW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/UWEudW5zaGlmdChhKTpRYS5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJlwib2JqZWN0XCI9PXR5cGVvZiBhP24uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bi5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFuLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW4uZngub2ZmPzA6XCJudW1iZXJcIj09dHlwZW9mIGQuZHVyYXRpb24/ZC5kdXJhdGlvbjpkLmR1cmF0aW9uIGluIG4uZnguc3BlZWRzP24uZnguc3BlZWRzW2QuZHVyYXRpb25dOm4uZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1kLnF1ZXVlfHxkLnF1ZXVlPT09ITApJiYoZC5xdWV1ZT1cImZ4XCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe24uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG4uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFMpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5pc0VtcHR5T2JqZWN0KGEpLGY9bi5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPVhhKHRoaXMsbi5leHRlbmQoe30sYSksZik7KGV8fEwuZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1uLnRpbWVycyxnPUwuZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlBhLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7KGJ8fCFjKSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZmluaXNoOmZ1bmN0aW9uKGEpe3JldHVybiBhIT09ITEmJihhPWF8fFwiZnhcIiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1MLmdldCh0aGlzKSxkPWNbYStcInF1ZXVlXCJdLGU9Y1thK1wicXVldWVIb29rc1wiXSxmPW4udGltZXJzLGc9ZD9kLmxlbmd0aDowO2ZvcihjLmZpbmlzaD0hMCxuLnF1ZXVlKHRoaXMsYSxbXSksZSYmZS5zdG9wJiZlLnN0b3AuY2FsbCh0aGlzLCEwKSxiPWYubGVuZ3RoO2ItLTspZltiXS5lbGVtPT09dGhpcyYmZltiXS5xdWV1ZT09PWEmJihmW2JdLmFuaW0uc3RvcCghMCksZi5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtnPmI7YisrKWRbYl0mJmRbYl0uZmluaXNoJiZkW2JdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBjLmZpbmlzaH0pfX0pLG4uZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmZuW2JdO24uZm5bYl09ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBudWxsPT1hfHxcImJvb2xlYW5cIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFRhKGIsITApLGEsZCxlKX19KSxuLmVhY2goe3NsaWRlRG93bjpUYShcInNob3dcIiksc2xpZGVVcDpUYShcImhpZGVcIiksc2xpZGVUb2dnbGU6VGEoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbi50aW1lcnM9W10sbi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9bi50aW1lcnM7Zm9yKExhPW4ubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8bi5meC5zdG9wKCksTGE9dm9pZCAwfSxuLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe24udGltZXJzLnB1c2goYSksYSgpP24uZnguc3RhcnQoKTpuLnRpbWVycy5wb3AoKX0sbi5meC5pbnRlcnZhbD0xMyxuLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7TWF8fChNYT1zZXRJbnRlcnZhbChuLmZ4LnRpY2ssbi5meC5pbnRlcnZhbCkpfSxuLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKE1hKSxNYT1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bi5meD9uLmZ4LnNwZWVkc1thXXx8YTphLGI9Ynx8XCJmeFwiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1sLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixrLmNoZWNrT249XCJcIiE9PWEudmFsdWUsay5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGIuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hYy5kaXNhYmxlZCxhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGEudmFsdWU9XCJ0XCIsYS50eXBlPVwicmFkaW9cIixrLnJhZGlvVmFsdWU9XCJ0XCI9PT1hLnZhbHVlfSgpO3ZhciBZYSxaYSwkYT1uLmV4cHIuYXR0ckhhbmRsZTtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZihhJiYzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiB0eXBlb2YgYS5nZXRBdHRyaWJ1dGU9PT1VP24ucHJvcChhLGIsYyk6KDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1iLnRvTG93ZXJDYXNlKCksZD1uLmF0dHJIb29rc1tiXXx8KG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYik/WmE6WWEpKSxcbnZvaWQgMD09PWM/ZCYmXCJnZXRcImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmXCJzZXRcImluIGQmJnZvaWQgMCE9PShlPWQuc2V0KGEsYyxiKSk/ZTooYS5zZXRBdHRyaWJ1dGUoYixjK1wiXCIpLGMpOnZvaWQgbi5yZW1vdmVBdHRyKGEsYikpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT1iJiZuLm5vZGVOYW1lKGEsXCJpbnB1dFwiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxaYT17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz0kYVtiXXx8bi5maW5kLmF0dHI7JGFbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPSRhW2JdLCRhW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCwkYVtiXT1mKSxlfX0pO3ZhciBfYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbi5pc1hNTERvYyhhKSxmJiYoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc0F0dHJpYnV0ZShcInRhYmluZGV4XCIpfHxfYS50ZXN0KGEubm9kZU5hbWUpfHxhLmhyZWY/YS50YWJJbmRleDotMX19fX0pLGsub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLG4uZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXtuLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7dmFyIGFiPS9bXFx0XFxyXFxuXFxmXS9nO24uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD1cInN0cmluZ1wiPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFiLFwiIFwiKTpcIiBcIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoXCIgXCIrZStcIiBcIik8MCYmKGQrPWUrXCIgXCIpO2c9bi50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIik6XCJcIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoXCIgXCIrZStcIiBcIik+PTApZD1kLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIik7Zz1hP24udHJpbShkKTpcIlwiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09PWMpe3ZhciBiLGQ9MCxlPW4odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1VfHxcImJvb2xlYW5cIj09PWMpJiYodGhpcy5jbGFzc05hbWUmJkwuc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxhPT09ITE/XCJcIjpMLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVwiIFwiK2ErXCIgXCIsYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jO2MrKylpZigxPT09dGhpc1tjXS5ub2RlVHlwZSYmKFwiIFwiK3RoaXNbY10uY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFiLFwiIFwiKS5pbmRleE9mKGIpPj0wKXJldHVybiEwO3JldHVybiExfX0pO3ZhciBiYj0vXFxyL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT1cIlwiOlwibnVtYmVyXCI9PXR5cGVvZiBlP2UrPVwiXCI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6YStcIlwifSkpLGI9bi52YWxIb29rc1t0aGlzLnR5cGVdfHxuLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJzZXRcImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSxcInZhbHVlXCIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW4udmFsSG9va3NbZS50eXBlXXx8bi52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwiZ2V0XCJpbiBiJiZ2b2lkIDAhPT0oYz1iLmdldChlLFwidmFsdWVcIikpP2M6KGM9ZS52YWx1ZSxcInN0cmluZ1wiPT10eXBlb2YgYz9jLnJlcGxhY2UoYmIsXCJcIik6bnVsbD09Yz9cIlwiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsXCJ2YWx1ZVwiKTtyZXR1cm4gbnVsbCE9Yj9iOm4udHJpbShuLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZD1hLm9wdGlvbnMsZT1hLnNlbGVjdGVkSW5kZXgsZj1cInNlbGVjdC1vbmVcIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwhKCFjLnNlbGVjdGVkJiZpIT09ZXx8KGsub3B0RGlzYWJsZWQ/Yy5kaXNhYmxlZDpudWxsIT09Yy5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl8fGMucGFyZW50Tm9kZS5kaXNhYmxlZCYmbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKGI9bihjKS52YWwoKSxmKXJldHVybiBiO2cucHVzaChiKX1yZXR1cm4gZ30sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPW4ubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1uLmluQXJyYXkoZC52YWx1ZSxmKT49MCkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pLG4uZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX19KTt2YXIgY2I9bi5ub3coKSxkYj0vXFw/LztuLnBhcnNlSlNPTj1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5wYXJzZShhK1wiXCIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO3RyeXtjPW5ldyBET01QYXJzZXIsYj1jLnBhcnNlRnJvbVN0cmluZyhhLFwidGV4dC94bWxcIil9Y2F0Y2goZCl7Yj12b2lkIDB9cmV0dXJuKCFifHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RoKSYmbi5lcnJvcihcIkludmFsaWQgWE1MOiBcIithKSxifTt2YXIgZWI9LyMuKiQvLGZiPS8oWz8mXSlfPVteJl0qLyxnYj0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLGhiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLGliPS9eKD86R0VUfEhFQUQpJC8samI9L15cXC9cXC8vLGtiPS9eKFtcXHcuKy1dKzopKD86XFwvXFwvKD86W15cXC8/I10qQHwpKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLGxiPXt9LG1iPXt9LG5iPVwiKi9cIi5jb25jYXQoXCIqXCIpLG9iPWEubG9jYXRpb24uaHJlZixwYj1rYi5leGVjKG9iLnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiBxYihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9YixiPVwiKlwiKTt2YXIgZCxlPTAsZj1iLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtdO2lmKG4uaXNGdW5jdGlvbihjKSl3aGlsZShkPWZbZSsrXSlcIitcIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8XCIqXCIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiByYihhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1tYjtmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLG4uZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBqfHxmfHxlW2pdP2Y/IShpPWopOnZvaWQgMDooYi5kYXRhVHlwZXMudW5zaGlmdChqKSxnKGopLCExKX0pLGl9cmV0dXJuIGcoYi5kYXRhVHlwZXNbMF0pfHwhZVtcIipcIl0mJmcoXCIqXCIpfWZ1bmN0aW9uIHNiKGEsYil7dmFyIGMsZCxlPW4uYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10mJigoZVtjXT9hOmR8fChkPXt9KSlbY109YltjXSk7cmV0dXJuIGQmJm4uZXh0ZW5kKCEwLGEsZCksYX1mdW5jdGlvbiB0YihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT1pWzBdKWkuc2hpZnQoKSx2b2lkIDA9PT1kJiYoZD1hLm1pbWVUeXBlfHxiLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlK1wiIFwiK2lbMF1dKXtmPWU7YnJlYWt9Z3x8KGc9ZSl9Zj1mfHxnfXJldHVybiBmPyhmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl0pOnZvaWQgMH1mdW5jdGlvbiB1YihhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKFwiKlwiPT09ZilmPWk7ZWxzZSBpZihcIipcIiE9PWkmJmkhPT1mKXtpZihnPWpbaStcIiBcIitmXXx8altcIiogXCIrZl0sIWcpZm9yKGUgaW4gailpZihoPWUuc3BsaXQoXCIgXCIpLGhbMV09PT1mJiYoZz1qW2krXCIgXCIraFswXV18fGpbXCIqIFwiK2hbMF1dKSl7Zz09PSEwP2c9altlXTpqW2VdIT09ITAmJihmPWhbMF0say51bnNoaWZ0KGhbMV0pKTticmVha31pZihnIT09ITApaWYoZyYmYVtcInRocm93c1wiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6Zz9sOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK2krXCIgdG8gXCIrZn19fXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOmJ9fW4uZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpvYix0eXBlOlwiR0VUXCIsaXNMb2NhbDpoYi50ZXN0KHBiWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjpuYix0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCIsanNvbjpcInJlc3BvbnNlSlNPTlwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6bi5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3NiKHNiKGEsbi5hamF4U2V0dGluZ3MpLGIpOnNiKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOnFiKGxiKSxhamF4VHJhbnNwb3J0OnFiKG1iKSxhamF4OmZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGI9Ynx8e307dmFyIGMsZCxlLGYsZyxoLGksaixrPW4uYWpheFNldHVwKHt9LGIpLGw9ay5jb250ZXh0fHxrLG09ay5jb250ZXh0JiYobC5ub2RlVHlwZXx8bC5qcXVlcnkpP24obCk6bi5ldmVudCxvPW4uRGVmZXJyZWQoKSxwPW4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikscT1rLnN0YXR1c0NvZGV8fHt9LHI9e30scz17fSx0PTAsdT1cImNhbmNlbGVkXCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighZil7Zj17fTt3aGlsZShiPWdiLmV4ZWMoZSkpZltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1mW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gYyYmYy5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fG9iKStcIlwiKS5yZXBsYWNlKGViLFwiXCIpLnJlcGxhY2UoamIscGJbMV0rXCIvL1wiKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1uLnRyaW0oay5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtcIlwiXSxudWxsPT1rLmNyb3NzRG9tYWluJiYoaD1rYi5leGVjKGsudXJsLnRvTG93ZXJDYXNlKCkpLGsuY3Jvc3NEb21haW49ISghaHx8aFsxXT09PXBiWzFdJiZoWzJdPT09cGJbMl0mJihoWzNdfHwoXCJodHRwOlwiPT09aFsxXT9cIjgwXCI6XCI0NDNcIikpPT09KHBiWzNdfHwoXCJodHRwOlwiPT09cGJbMV0/XCI4MFwiOlwiNDQzXCIpKSkpLGsuZGF0YSYmay5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1uLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSkscmIobGIsayxiLHYpLDI9PT10KXJldHVybiB2O2k9bi5ldmVudCYmay5nbG9iYWwsaSYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxrLnR5cGU9ay50eXBlLnRvVXBwZXJDYXNlKCksay5oYXNDb250ZW50PSFpYi50ZXN0KGsudHlwZSksZD1rLnVybCxrLmhhc0NvbnRlbnR8fChrLmRhdGEmJihkPWsudXJsKz0oZGIudGVzdChkKT9cIiZcIjpcIj9cIikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPWZiLnRlc3QoZCk/ZC5yZXBsYWNlKGZiLFwiJDFfPVwiK2NiKyspOmQrKGRiLnRlc3QoZCk/XCImXCI6XCI/XCIpK1wiXz1cIitjYisrKSksay5pZk1vZGlmaWVkJiYobi5sYXN0TW9kaWZpZWRbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsbi5sYXN0TW9kaWZpZWRbZF0pLG4uZXRhZ1tkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLG4uZXRhZ1tkXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsay5jb250ZW50VHlwZSksdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsay5kYXRhVHlwZXNbMF0mJmsuYWNjZXB0c1trLmRhdGFUeXBlc1swXV0/ay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1rLmRhdGFUeXBlc1swXT9cIiwgXCIrbmIrXCI7IHE9MC4wMVwiOlwiXCIpOmsuYWNjZXB0c1tcIipcIl0pO2ZvcihqIGluIGsuaGVhZGVycyl2LnNldFJlcXVlc3RIZWFkZXIoaixrLmhlYWRlcnNbal0pO2lmKGsuYmVmb3JlU2VuZCYmKGsuYmVmb3JlU2VuZC5jYWxsKGwsdixrKT09PSExfHwyPT09dCkpcmV0dXJuIHYuYWJvcnQoKTt1PVwiYWJvcnRcIjtmb3IoaiBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl2W2pdKGtbal0pO2lmKGM9cmIobWIsayxiLHYpKXt2LnJlYWR5U3RhdGU9MSxpJiZtLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoXCJ0aW1lb3V0XCIpfSxrLnRpbWVvdXQpKTt0cnl7dD0xLGMuc2VuZChyLHgpfWNhdGNoKHcpe2lmKCEoMj50KSl0aHJvdyB3O3goLTEsdyl9fWVsc2UgeCgtMSxcIk5vIFRyYW5zcG9ydFwiKTtmdW5jdGlvbiB4KGEsYixmLGgpe3ZhciBqLHIscyx1LHcseD1iOzIhPT10JiYodD0yLGcmJmNsZWFyVGltZW91dChnKSxjPXZvaWQgMCxlPWh8fFwiXCIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGYmJih1PXRiKGssdixmKSksdT11YihrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLHcmJihuLmxhc3RNb2RpZmllZFtkXT13KSx3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLHcmJihuLmV0YWdbZF09dykpLDIwND09PWF8fFwiSEVBRFwiPT09ay50eXBlP3g9XCJub2NvbnRlbnRcIjozMDQ9PT1hP3g9XCJub3Rtb2RpZmllZFwiOih4PXUuc3RhdGUscj11LmRhdGEscz11LmVycm9yLGo9IXMpKToocz14LChhfHwheCkmJih4PVwiZXJyb3JcIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpK1wiXCIsaj9vLnJlc29sdmVXaXRoKGwsW3IseCx2XSk6by5yZWplY3RXaXRoKGwsW3YseCxzXSksdi5zdGF0dXNDb2RlKHEpLHE9dm9pZCAwLGkmJm0udHJpZ2dlcihqP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGkmJihtLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbdixrXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4gdn0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZ2V0KGEsYixjLFwianNvblwiKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsXCJzY3JpcHRcIil9fSksbi5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG4uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uYWpheCh7dXJsOmEsdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwic2NyaXB0XCIsYXN5bmM6ITEsZ2xvYmFsOiExLFwidGhyb3dzXCI6ITB9KX0sbi5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG4uaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pOih0aGlzWzBdJiYoYj1uKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZiLmluc2VydEJlZm9yZSh0aGlzWzBdKSxiLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXM7d2hpbGUoYS5maXJzdEVsZW1lbnRDaGlsZClhPWEuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcykpLHRoaXMpfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYil7bih0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfTpmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcyxcImJvZHlcIil8fG4odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG4uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLmhpZGRlbihhKX07dmFyIHZiPS8lMjAvZyx3Yj0vXFxbXFxdJC8seGI9L1xccj9cXG4vZyx5Yj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEFiKGEsYixjLGQpe3ZhciBlO2lmKG4uaXNBcnJheShiKSluLmVhY2goYixmdW5jdGlvbihiLGUpe2N8fHdiLnRlc3QoYSk/ZChhLGUpOkFiKGErXCJbXCIrKFwib2JqZWN0XCI9PXR5cGVvZiBlP2I6XCJcIikrXCJdXCIsZSxjLGQpfSk7ZWxzZSBpZihjfHxcIm9iamVjdFwiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQWIoYStcIltcIitlK1wiXVwiLGJbZV0sYyxkKX1uLnBhcmFtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPWZ1bmN0aW9uKGEsYil7Yj1uLmlzRnVuY3Rpb24oYik/YigpOm51bGw9PWI/XCJcIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoYil9O2lmKHZvaWQgMD09PWImJihiPW4uYWpheFNldHRpbmdzJiZuLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksbi5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIW4uaXNQbGFpbk9iamVjdChhKSluLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKUFiKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oXCImXCIpLnJlcGxhY2UodmIsXCIrXCIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcyxcImVsZW1lbnRzXCIpO3JldHVybiBhP24ubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIW4odGhpcykuaXMoXCI6ZGlzYWJsZWRcIikmJnpiLnRlc3QodGhpcy5ub2RlTmFtZSkmJiF5Yi50ZXN0KGEpJiYodGhpcy5jaGVja2VkfHwhVC50ZXN0KGEpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBjPW4odGhpcykudmFsKCk7cmV0dXJuIG51bGw9PWM/bnVsbDpuLmlzQXJyYXkoYyk/bi5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHhiLFwiXFxyXFxuXCIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoeGIsXCJcXHJcXG5cIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYSl7fX07dmFyIEJiPTAsQ2I9e30sRGI9ezA6MjAwLDEyMjM6MjA0fSxFYj1uLmFqYXhTZXR0aW5ncy54aHIoKTthLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBDYilDYlthXSgpfSksay5jb3JzPSEhRWImJlwid2l0aENyZWRlbnRpYWxzXCJpbiBFYixrLmFqYXg9RWI9ISFFYixuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGsuY29yc3x8RWImJiFhLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytCYjtpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoY1tcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTtmb3IoZSBpbiBjKWYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0pO2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmKGRlbGV0ZSBDYltnXSxiPWYub25sb2FkPWYub25lcnJvcj1udWxsLFwiYWJvcnRcIj09PWE/Zi5hYm9ydCgpOlwiZXJyb3JcIj09PWE/ZChmLnN0YXR1cyxmLnN0YXR1c1RleHQpOmQoRGJbZi5zdGF0dXNdfHxmLnN0YXR1cyxmLnN0YXR1c1RleHQsXCJzdHJpbmdcIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0P3t0ZXh0OmYucmVzcG9uc2VUZXh0fTp2b2lkIDAsZi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sZi5vbmxvYWQ9YigpLGYub25lcnJvcj1iKFwiZXJyb3JcIiksYj1DYltnXT1iKFwiYWJvcnRcIik7dHJ5e2Yuc2VuZChhLmhhc0NvbnRlbnQmJmEuZGF0YXx8bnVsbCl9Y2F0Y2goaCl7aWYoYil0aHJvdyBofX0sYWJvcnQ6ZnVuY3Rpb24oKXtiJiZiKCl9fTp2b2lkIDB9KSxuLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihhKXtyZXR1cm4gbi5nbG9iYWxFdmFsKGEpLGF9fX0pLG4uYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPVwiR0VUXCIpfSksbi5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7aWYoYS5jcm9zc0RvbWFpbil7dmFyIGIsYztyZXR1cm57c2VuZDpmdW5jdGlvbihkLGUpe2I9bihcIjxzY3JpcHQ+XCIpLnByb3Aoe2FzeW5jOiEwLGNoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKFwibG9hZCBlcnJvclwiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZShcImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCxhLnR5cGUpfSksbC5oZWFkLmFwcGVuZENoaWxkKGJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fX0pO3ZhciBGYj1bXSxHYj0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO24uYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPUZiLnBvcCgpfHxuLmV4cGFuZG8rXCJfXCIrY2IrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoR2IudGVzdChiLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJkdiLnRlc3QoYi5kYXRhKSYmXCJkYXRhXCIpO3JldHVybiBofHxcImpzb25wXCI9PT1iLmRhdGFUeXBlc1swXT8oZT1iLmpzb25wQ2FsbGJhY2s9bi5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoR2IsXCIkMVwiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0oZGIudGVzdChiLnVybCk/XCImXCI6XCI/XCIpK2IuanNvbnArXCI9XCIrZSksYi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlK1wiIHdhcyBub3QgY2FsbGVkXCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPVwianNvblwiLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLEZiLnB1c2goZSkpLGcmJm4uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksXCJzY3JpcHRcIik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDtcImJvb2xlYW5cIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHxsO3ZhciBkPXYuZXhlYyhhKSxlPSFjJiZbXTtyZXR1cm4gZD9bYi5jcmVhdGVFbGVtZW50KGRbMV0pXTooZD1uLmJ1aWxkRnJhZ21lbnQoW2FdLGIsZSksZSYmZS5sZW5ndGgmJm4oZSkucmVtb3ZlKCksbi5tZXJnZShbXSxkLmNoaWxkTm9kZXMpKX07dmFyIEhiPW4uZm4ubG9hZDtuLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhJiZIYilyZXR1cm4gSGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoXCIgXCIpO3JldHVybiBoPj0wJiYoZD1uLnRyaW0oYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiZcIm9iamVjdFwiPT10eXBlb2YgYiYmKGU9XCJQT1NUXCIpLGcubGVuZ3RoPjAmJm4uYWpheCh7dXJsOmEsdHlwZTplLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6Yn0pLmRvbmUoZnVuY3Rpb24oYSl7Zj1hcmd1bWVudHMsZy5odG1sKGQ/bihcIjxkaXY+XCIpLmFwcGVuZChuLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmNvbXBsZXRlKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGMsZnx8W2EucmVzcG9uc2VUZXh0LGIsYV0pfSksdGhpc30sbi5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07dmFyIEliPWEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2Z1bmN0aW9uIEpiKGEpe3JldHVybiBuLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9bi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1uLmNzcyhhLFwicG9zaXRpb25cIiksbD1uKGEpLG09e307XCJzdGF0aWNcIj09PWsmJihhLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksaD1sLm9mZnNldCgpLGY9bi5jc3MoYSxcInRvcFwiKSxpPW4uY3NzKGEsXCJsZWZ0XCIpLGo9KFwiYWJzb2x1dGVcIj09PWt8fFwiZml4ZWRcIj09PWspJiYoZitpKS5pbmRleE9mKFwiYXV0b1wiKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLFwidXNpbmdcImluIGI/Yi51c2luZy5jYWxsKGEsbSk6bC5jc3MobSl9fSxuLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7bi5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZD10aGlzWzBdLGU9e3RvcDowLGxlZnQ6MH0sZj1kJiZkLm93bmVyRG9jdW1lbnQ7aWYoZilyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxuLmNvbnRhaW5zKGIsZCk/KHR5cGVvZiBkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PVUmJihlPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGM9SmIoZikse3RvcDplLnRvcCtjLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZS5sZWZ0K2MucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fSk6ZX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9dGhpc1swXSxkPXt0b3A6MCxsZWZ0OjB9O3JldHVyblwiZml4ZWRcIj09PW4uY3NzKGMsXCJwb3NpdGlvblwiKT9iPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLFwiaHRtbFwiKXx8KGQ9YS5vZmZzZXQoKSksZC50b3ArPW4uY3NzKGFbMF0sXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpLHt0b3A6Yi50b3AtZC50b3Atbi5jc3MoYyxcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OmIubGVmdC1kLmxlZnQtbi5jc3MoYyxcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fEliO3doaWxlKGEmJiFuLm5vZGVOYW1lKGEsXCJodG1sXCIpJiZcInN0YXRpY1wiPT09bi5jc3MoYSxcInBvc2l0aW9uXCIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fElifSl9fSksbi5lYWNoKHtzY3JvbGxMZWZ0OlwicGFnZVhPZmZzZXRcIixzY3JvbGxUb3A6XCJwYWdlWU9mZnNldFwifSxmdW5jdGlvbihiLGMpe3ZhciBkPVwicGFnZVlPZmZzZXRcIj09PWM7bi5mbltiXT1mdW5jdGlvbihlKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsZSxmKXt2YXIgZz1KYihiKTtyZXR1cm4gdm9pZCAwPT09Zj9nP2dbY106YltlXTp2b2lkKGc/Zy5zY3JvbGxUbyhkP2EucGFnZVhPZmZzZXQ6ZixkP2Y6YS5wYWdlWU9mZnNldCk6YltlXT1mKX0sYixlLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFtcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09eWEoay5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGM/KGM9eGEoYSxiKSx2YS50ZXN0KGMpP24oYSkucG9zaXRpb24oKVtiXStcInB4XCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2EsY29udGVudDpiLFwiXCI6XCJvdXRlclwiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHxcImJvb2xlYW5cIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwP1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbXCJjbGllbnRcIithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbXCJzY3JvbGxcIithXSxlW1wic2Nyb2xsXCIrYV0sYi5ib2R5W1wib2Zmc2V0XCIrYV0sZVtcIm9mZnNldFwiK2FdLGVbXCJjbGllbnRcIithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSxuLmZuLmFuZFNlbGY9bi5mbi5hZGRCYWNrLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwianF1ZXJ5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBLYj1hLmpRdWVyeSxMYj1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1MYiksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9S2IpLG59LHR5cGVvZiBiPT09VSYmKGEualF1ZXJ5PWEuJD1uKSxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qcXVlcnkubWluLm1hcCIsIi8qIVxuICogQm9vdHN0cmFwIHYzLjMuNiAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20pXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG5pZihcInVuZGVmaW5lZFwiPT10eXBlb2YgalF1ZXJ5KXRocm93IG5ldyBFcnJvcihcIkJvb3RzdHJhcCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5XCIpOytmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYj1hLmZuLmpxdWVyeS5zcGxpdChcIiBcIilbMF0uc3BsaXQoXCIuXCIpO2lmKGJbMF08MiYmYlsxXTw5fHwxPT1iWzBdJiY5PT1iWzFdJiZiWzJdPDF8fGJbMF0+Mil0aHJvdyBuZXcgRXJyb3IoXCJCb290c3RyYXAncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeSB2ZXJzaW9uIDEuOS4xIG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gdmVyc2lvbiAzXCIpfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJvb3RzdHJhcFwiKSxiPXtXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZFwiLHRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCJ9O2Zvcih2YXIgYyBpbiBiKWlmKHZvaWQgMCE9PWEuc3R5bGVbY10pcmV0dXJue2VuZDpiW2NdfTtyZXR1cm4hMX1hLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKGIpe3ZhciBjPSExLGQ9dGhpczthKHRoaXMpLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7Yz0hMH0pO3ZhciBlPWZ1bmN0aW9uKCl7Y3x8YShkKS50cmlnZ2VyKGEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCl9O3JldHVybiBzZXRUaW1lb3V0KGUsYiksdGhpc30sYShmdW5jdGlvbigpe2Euc3VwcG9ydC50cmFuc2l0aW9uPWIoKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmKGEuZXZlbnQuc3BlY2lhbC5ic1RyYW5zaXRpb25FbmQ9e2JpbmRUeXBlOmEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxkZWxlZ2F0ZVR5cGU6YS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLGhhbmRsZTpmdW5jdGlvbihiKXtyZXR1cm4gYShiLnRhcmdldCkuaXModGhpcyk/Yi5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZT1jLmRhdGEoXCJicy5hbGVydFwiKTtlfHxjLmRhdGEoXCJicy5hbGVydFwiLGU9bmV3IGQodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdLmNhbGwoYyl9KX12YXIgYz0nW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJyxkPWZ1bmN0aW9uKGIpe2EoYikub24oXCJjbGlja1wiLGMsdGhpcy5jbG9zZSl9O2QuVkVSU0lPTj1cIjMuMy42XCIsZC5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxkLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7Zy5kZXRhY2goKS50cmlnZ2VyKFwiY2xvc2VkLmJzLmFsZXJ0XCIpLnJlbW92ZSgpfXZhciBlPWEodGhpcyksZj1lLmF0dHIoXCJkYXRhLXRhcmdldFwiKTtmfHwoZj1lLmF0dHIoXCJocmVmXCIpLGY9ZiYmZi5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKTt2YXIgZz1hKGYpO2ImJmIucHJldmVudERlZmF1bHQoKSxnLmxlbmd0aHx8KGc9ZS5jbG9zZXN0KFwiLmFsZXJ0XCIpKSxnLnRyaWdnZXIoYj1hLkV2ZW50KFwiY2xvc2UuYnMuYWxlcnRcIikpLGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fChnLnJlbW92ZUNsYXNzKFwiaW5cIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJmcuaGFzQ2xhc3MoXCJmYWRlXCIpP2cub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYykuZW11bGF0ZVRyYW5zaXRpb25FbmQoZC5UUkFOU0lUSU9OX0RVUkFUSU9OKTpjKCkpfTt2YXIgZT1hLmZuLmFsZXJ0O2EuZm4uYWxlcnQ9YixhLmZuLmFsZXJ0LkNvbnN0cnVjdG9yPWQsYS5mbi5hbGVydC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uYWxlcnQ9ZSx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmFsZXJ0LmRhdGEtYXBpXCIsYyxkLnByb3RvdHlwZS5jbG9zZSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5idXR0b25cIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoXCJicy5idXR0b25cIixlPW5ldyBjKHRoaXMsZikpLFwidG9nZ2xlXCI9PWI/ZS50b2dnbGUoKTpiJiZlLnNldFN0YXRlKGIpfSl9dmFyIGM9ZnVuY3Rpb24oYixkKXt0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy5pc0xvYWRpbmc9ITF9O2MuVkVSU0lPTj1cIjMuMy42XCIsYy5ERUZBVUxUUz17bG9hZGluZ1RleHQ6XCJsb2FkaW5nLi4uXCJ9LGMucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKGIpe3ZhciBjPVwiZGlzYWJsZWRcIixkPXRoaXMuJGVsZW1lbnQsZT1kLmlzKFwiaW5wdXRcIik/XCJ2YWxcIjpcImh0bWxcIixmPWQuZGF0YSgpO2IrPVwiVGV4dFwiLG51bGw9PWYucmVzZXRUZXh0JiZkLmRhdGEoXCJyZXNldFRleHRcIixkW2VdKCkpLHNldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe2RbZV0obnVsbD09ZltiXT90aGlzLm9wdGlvbnNbYl06ZltiXSksXCJsb2FkaW5nVGV4dFwiPT1iPyh0aGlzLmlzTG9hZGluZz0hMCxkLmFkZENsYXNzKGMpLmF0dHIoYyxjKSk6dGhpcy5pc0xvYWRpbmcmJih0aGlzLmlzTG9hZGluZz0hMSxkLnJlbW92ZUNsYXNzKGMpLnJlbW92ZUF0dHIoYykpfSx0aGlzKSwwKX0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dmFyIGE9ITAsYj10aGlzLiRlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIl0nKTtpZihiLmxlbmd0aCl7dmFyIGM9dGhpcy4kZWxlbWVudC5maW5kKFwiaW5wdXRcIik7XCJyYWRpb1wiPT1jLnByb3AoXCJ0eXBlXCIpPyhjLnByb3AoXCJjaGVja2VkXCIpJiYoYT0hMSksYi5maW5kKFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSx0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwiYWN0aXZlXCIpKTpcImNoZWNrYm94XCI9PWMucHJvcChcInR5cGVcIikmJihjLnByb3AoXCJjaGVja2VkXCIpIT09dGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImFjdGl2ZVwiKSYmKGE9ITEpLHRoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIikpLGMucHJvcChcImNoZWNrZWRcIix0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpKSxhJiZjLnRyaWdnZXIoXCJjaGFuZ2VcIil9ZWxzZSB0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLXByZXNzZWRcIiwhdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImFjdGl2ZVwiKSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKX07dmFyIGQ9YS5mbi5idXR0b247YS5mbi5idXR0b249YixhLmZuLmJ1dHRvbi5Db25zdHJ1Y3Rvcj1jLGEuZm4uYnV0dG9uLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5idXR0b249ZCx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxmdW5jdGlvbihjKXt2YXIgZD1hKGMudGFyZ2V0KTtkLmhhc0NsYXNzKFwiYnRuXCIpfHwoZD1kLmNsb3Nlc3QoXCIuYnRuXCIpKSxiLmNhbGwoZCxcInRvZ2dsZVwiKSxhKGMudGFyZ2V0KS5pcygnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyl8fGEoYy50YXJnZXQpLmlzKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKXx8Yy5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJmb2N1cy5icy5idXR0b24uZGF0YS1hcGkgYmx1ci5icy5idXR0b24uZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlXj1cImJ1dHRvblwiXScsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuY2xvc2VzdChcIi5idG5cIikudG9nZ2xlQ2xhc3MoXCJmb2N1c1wiLC9eZm9jdXMoaW4pPyQvLnRlc3QoYi50eXBlKSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmNhcm91c2VsXCIpLGY9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksZz1cInN0cmluZ1wiPT10eXBlb2YgYj9iOmYuc2xpZGU7ZXx8ZC5kYXRhKFwiYnMuY2Fyb3VzZWxcIixlPW5ldyBjKHRoaXMsZikpLFwibnVtYmVyXCI9PXR5cGVvZiBiP2UudG8oYik6Zz9lW2ddKCk6Zi5pbnRlcnZhbCYmZS5wYXVzZSgpLmN5Y2xlKCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRpbmRpY2F0b3JzPXRoaXMuJGVsZW1lbnQuZmluZChcIi5jYXJvdXNlbC1pbmRpY2F0b3JzXCIpLHRoaXMub3B0aW9ucz1jLHRoaXMucGF1c2VkPW51bGwsdGhpcy5zbGlkaW5nPW51bGwsdGhpcy5pbnRlcnZhbD1udWxsLHRoaXMuJGFjdGl2ZT1udWxsLHRoaXMuJGl0ZW1zPW51bGwsdGhpcy5vcHRpb25zLmtleWJvYXJkJiZ0aGlzLiRlbGVtZW50Lm9uKFwia2V5ZG93bi5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5rZXlkb3duLHRoaXMpKSxcImhvdmVyXCI9PXRoaXMub3B0aW9ucy5wYXVzZSYmIShcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSYmdGhpcy4kZWxlbWVudC5vbihcIm1vdXNlZW50ZXIuYnMuY2Fyb3VzZWxcIixhLnByb3h5KHRoaXMucGF1c2UsdGhpcykpLm9uKFwibW91c2VsZWF2ZS5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5jeWNsZSx0aGlzKSl9O2MuVkVSU0lPTj1cIjMuMy42XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTYwMCxjLkRFRkFVTFRTPXtpbnRlcnZhbDo1ZTMscGF1c2U6XCJob3ZlclwiLHdyYXA6ITAsa2V5Ym9hcmQ6ITB9LGMucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oYSl7aWYoIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYS50YXJnZXQudGFnTmFtZSkpe3N3aXRjaChhLndoaWNoKXtjYXNlIDM3OnRoaXMucHJldigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5uZXh0KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59YS5wcmV2ZW50RGVmYXVsdCgpfX0sYy5wcm90b3R5cGUuY3ljbGU9ZnVuY3Rpb24oYil7cmV0dXJuIGJ8fCh0aGlzLnBhdXNlZD0hMSksdGhpcy5pbnRlcnZhbCYmY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwmJiF0aGlzLnBhdXNlZCYmKHRoaXMuaW50ZXJ2YWw9c2V0SW50ZXJ2YWwoYS5wcm94eSh0aGlzLm5leHQsdGhpcyksdGhpcy5vcHRpb25zLmludGVydmFsKSksdGhpc30sYy5wcm90b3R5cGUuZ2V0SXRlbUluZGV4PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLiRpdGVtcz1hLnBhcmVudCgpLmNoaWxkcmVuKFwiLml0ZW1cIiksdGhpcy4kaXRlbXMuaW5kZXgoYXx8dGhpcy4kYWN0aXZlKX0sYy5wcm90b3R5cGUuZ2V0SXRlbUZvckRpcmVjdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0SXRlbUluZGV4KGIpLGQ9XCJwcmV2XCI9PWEmJjA9PT1jfHxcIm5leHRcIj09YSYmYz09dGhpcy4kaXRlbXMubGVuZ3RoLTE7aWYoZCYmIXRoaXMub3B0aW9ucy53cmFwKXJldHVybiBiO3ZhciBlPVwicHJldlwiPT1hPy0xOjEsZj0oYytlKSV0aGlzLiRpdGVtcy5sZW5ndGg7cmV0dXJuIHRoaXMuJGl0ZW1zLmVxKGYpfSxjLnByb3RvdHlwZS50bz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9dGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlPXRoaXMuJGVsZW1lbnQuZmluZChcIi5pdGVtLmFjdGl2ZVwiKSk7cmV0dXJuIGE+dGhpcy4kaXRlbXMubGVuZ3RoLTF8fDA+YT92b2lkIDA6dGhpcy5zbGlkaW5nP3RoaXMuJGVsZW1lbnQub25lKFwic2xpZC5icy5jYXJvdXNlbFwiLGZ1bmN0aW9uKCl7Yi50byhhKX0pOmM9PWE/dGhpcy5wYXVzZSgpLmN5Y2xlKCk6dGhpcy5zbGlkZShhPmM/XCJuZXh0XCI6XCJwcmV2XCIsdGhpcy4kaXRlbXMuZXEoYSkpfSxjLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSEwKSx0aGlzLiRlbGVtZW50LmZpbmQoXCIubmV4dCwgLnByZXZcIikubGVuZ3RoJiZhLnN1cHBvcnQudHJhbnNpdGlvbiYmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLHRoaXMuY3ljbGUoITApKSx0aGlzLmludGVydmFsPWNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpc30sYy5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRpbmc/dm9pZCAwOnRoaXMuc2xpZGUoXCJuZXh0XCIpfSxjLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcInByZXZcIil9LGMucHJvdG90eXBlLnNsaWRlPWZ1bmN0aW9uKGIsZCl7dmFyIGU9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpLGY9ZHx8dGhpcy5nZXRJdGVtRm9yRGlyZWN0aW9uKGIsZSksZz10aGlzLmludGVydmFsLGg9XCJuZXh0XCI9PWI/XCJsZWZ0XCI6XCJyaWdodFwiLGk9dGhpcztpZihmLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXJldHVybiB0aGlzLnNsaWRpbmc9ITE7dmFyIGo9ZlswXSxrPWEuRXZlbnQoXCJzbGlkZS5icy5jYXJvdXNlbFwiLHtyZWxhdGVkVGFyZ2V0OmosZGlyZWN0aW9uOmh9KTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoayksIWsuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKHRoaXMuc2xpZGluZz0hMCxnJiZ0aGlzLnBhdXNlKCksdGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpe3RoaXMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGw9YSh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgoZildKTtsJiZsLmFkZENsYXNzKFwiYWN0aXZlXCIpfXZhciBtPWEuRXZlbnQoXCJzbGlkLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246aH0pO3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcInNsaWRlXCIpPyhmLmFkZENsYXNzKGIpLGZbMF0ub2Zmc2V0V2lkdGgsZS5hZGRDbGFzcyhoKSxmLmFkZENsYXNzKGgpLGUub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtmLnJlbW92ZUNsYXNzKFtiLGhdLmpvaW4oXCIgXCIpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxlLnJlbW92ZUNsYXNzKFtcImFjdGl2ZVwiLGhdLmpvaW4oXCIgXCIpKSxpLnNsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2kuJGVsZW1lbnQudHJpZ2dlcihtKX0sMCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pKTooZS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxmLmFkZENsYXNzKFwiYWN0aXZlXCIpLHRoaXMuc2xpZGluZz0hMSx0aGlzLiRlbGVtZW50LnRyaWdnZXIobSkpLGcmJnRoaXMuY3ljbGUoKSx0aGlzfX07dmFyIGQ9YS5mbi5jYXJvdXNlbDthLmZuLmNhcm91c2VsPWIsYS5mbi5jYXJvdXNlbC5Db25zdHJ1Y3Rvcj1jLGEuZm4uY2Fyb3VzZWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmNhcm91c2VsPWQsdGhpc307dmFyIGU9ZnVuY3Rpb24oYyl7dmFyIGQsZT1hKHRoaXMpLGY9YShlLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8KGQ9ZS5hdHRyKFwiaHJlZlwiKSkmJmQucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSk7aWYoZi5oYXNDbGFzcyhcImNhcm91c2VsXCIpKXt2YXIgZz1hLmV4dGVuZCh7fSxmLmRhdGEoKSxlLmRhdGEoKSksaD1lLmF0dHIoXCJkYXRhLXNsaWRlLXRvXCIpO2gmJihnLmludGVydmFsPSExKSxiLmNhbGwoZixnKSxoJiZmLmRhdGEoXCJicy5jYXJvdXNlbFwiKS50byhoKSxjLnByZXZlbnREZWZhdWx0KCl9fTthKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpXCIsXCJbZGF0YS1zbGlkZV1cIixlKS5vbihcImNsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpXCIsXCJbZGF0YS1zbGlkZS10b11cIixlKSxhKHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXthKCdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtiLmNhbGwoYyxjLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3ZhciBjLGQ9Yi5hdHRyKFwiZGF0YS10YXJnZXRcIil8fChjPWIuYXR0cihcImhyZWZcIikpJiZjLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIik7cmV0dXJuIGEoZCl9ZnVuY3Rpb24gYyhiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxlPWMuZGF0YShcImJzLmNvbGxhcHNlXCIpLGY9YS5leHRlbmQoe30sZC5ERUZBVUxUUyxjLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYik7IWUmJmYudG9nZ2xlJiYvc2hvd3xoaWRlLy50ZXN0KGIpJiYoZi50b2dnbGU9ITEpLGV8fGMuZGF0YShcImJzLmNvbGxhcHNlXCIsZT1uZXcgZCh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGQ9ZnVuY3Rpb24oYixjKXt0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGQuREVGQVVMVFMsYyksdGhpcy4kdHJpZ2dlcj1hKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIycrYi5pZCsnXCJdLFtkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtdGFyZ2V0PVwiIycrYi5pZCsnXCJdJyksdGhpcy50cmFuc2l0aW9uaW5nPW51bGwsdGhpcy5vcHRpb25zLnBhcmVudD90aGlzLiRwYXJlbnQ9dGhpcy5nZXRQYXJlbnQoKTp0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0aGlzLiRlbGVtZW50LHRoaXMuJHRyaWdnZXIpLHRoaXMub3B0aW9ucy50b2dnbGUmJnRoaXMudG9nZ2xlKCl9O2QuVkVSU0lPTj1cIjMuMy42XCIsZC5UUkFOU0lUSU9OX0RVUkFUSU9OPTM1MCxkLkRFRkFVTFRTPXt0b2dnbGU6ITB9LGQucHJvdG90eXBlLmRpbWVuc2lvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJ3aWR0aFwiKTtyZXR1cm4gYT9cIndpZHRoXCI6XCJoZWlnaHRcIn0sZC5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zaXRpb25pbmcmJiF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIikpe3ZhciBiLGU9dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQuY2hpbGRyZW4oXCIucGFuZWxcIikuY2hpbGRyZW4oXCIuaW4sIC5jb2xsYXBzaW5nXCIpO2lmKCEoZSYmZS5sZW5ndGgmJihiPWUuZGF0YShcImJzLmNvbGxhcHNlXCIpLGImJmIudHJhbnNpdGlvbmluZykpKXt2YXIgZj1hLkV2ZW50KFwic2hvdy5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoZiksIWYuaXNEZWZhdWx0UHJldmVudGVkKCkpe2UmJmUubGVuZ3RoJiYoYy5jYWxsKGUsXCJoaWRlXCIpLGJ8fGUuZGF0YShcImJzLmNvbGxhcHNlXCIsbnVsbCkpO3ZhciBnPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKVtnXSgwKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLiR0cmlnZ2VyLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBoPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZSBpblwiKVtnXShcIlwiKSx0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5jb2xsYXBzZVwiKX07aWYoIWEuc3VwcG9ydC50cmFuc2l0aW9uKXJldHVybiBoLmNhbGwodGhpcyk7dmFyIGk9YS5jYW1lbENhc2UoW1wic2Nyb2xsXCIsZ10uam9pbihcIi1cIikpO3RoaXMuJGVsZW1lbnQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eShoLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pW2ddKHRoaXMuJGVsZW1lbnRbMF1baV0pfX19fSxkLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpKXt2YXIgYj1hLkV2ZW50KFwiaGlkZS5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoYiksIWIuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBjPXRoaXMuZGltZW5zaW9uKCk7dGhpcy4kZWxlbWVudFtjXSh0aGlzLiRlbGVtZW50W2NdKCkpWzBdLm9mZnNldEhlaWdodCx0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlIGluXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMuJHRyaWdnZXIuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIGU9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpLnRyaWdnZXIoXCJoaWRkZW4uYnMuY29sbGFwc2VcIil9O3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbj92b2lkIHRoaXMuJGVsZW1lbnRbY10oMCkub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eShlLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChkLlRSQU5TSVRJT05fRFVSQVRJT04pOmUuY2FsbCh0aGlzKX19fSxkLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt0aGlzW3RoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKT9cImhpZGVcIjpcInNob3dcIl0oKX0sZC5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcy5vcHRpb25zLnBhcmVudCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS1wYXJlbnQ9XCInK3RoaXMub3B0aW9ucy5wYXJlbnQrJ1wiXScpLmVhY2goYS5wcm94eShmdW5jdGlvbihjLGQpe3ZhciBlPWEoZCk7dGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoYihlKSxlKX0sdGhpcykpLmVuZCgpfSxkLnByb3RvdHlwZS5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmhhc0NsYXNzKFwiaW5cIik7YS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLGMpLGIudG9nZ2xlQ2xhc3MoXCJjb2xsYXBzZWRcIiwhYykuYXR0cihcImFyaWEtZXhwYW5kZWRcIixjKX07dmFyIGU9YS5mbi5jb2xsYXBzZTthLmZuLmNvbGxhcHNlPWMsYS5mbi5jb2xsYXBzZS5Db25zdHJ1Y3Rvcj1kLGEuZm4uY29sbGFwc2Uubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmNvbGxhcHNlPWUsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5jb2xsYXBzZS5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXScsZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtlLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8ZC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBmPWIoZSksZz1mLmRhdGEoXCJicy5jb2xsYXBzZVwiKSxoPWc/XCJ0b2dnbGVcIjplLmRhdGEoKTtjLmNhbGwoZixoKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3ZhciBjPWIuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2N8fChjPWIuYXR0cihcImhyZWZcIiksYz1jJiYvI1tBLVphLXpdLy50ZXN0KGMpJiZjLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBkPWMmJmEoYyk7cmV0dXJuIGQmJmQubGVuZ3RoP2Q6Yi5wYXJlbnQoKX1mdW5jdGlvbiBjKGMpe2MmJjM9PT1jLndoaWNofHwoYShlKS5yZW1vdmUoKSxhKGYpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9YihkKSxmPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2UuaGFzQ2xhc3MoXCJvcGVuXCIpJiYoYyYmXCJjbGlja1wiPT1jLnR5cGUmJi9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYy50YXJnZXQudGFnTmFtZSkmJmEuY29udGFpbnMoZVswXSxjLnRhcmdldCl8fChlLnRyaWdnZXIoYz1hLkV2ZW50KFwiaGlkZS5icy5kcm9wZG93blwiLGYpKSxjLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoZC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIiksZS5yZW1vdmVDbGFzcyhcIm9wZW5cIikudHJpZ2dlcihhLkV2ZW50KFwiaGlkZGVuLmJzLmRyb3Bkb3duXCIsZikpKSkpfSkpfWZ1bmN0aW9uIGQoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoXCJicy5kcm9wZG93blwiKTtkfHxjLmRhdGEoXCJicy5kcm9wZG93blwiLGQ9bmV3IGcodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZkW2JdLmNhbGwoYyl9KX12YXIgZT1cIi5kcm9wZG93bi1iYWNrZHJvcFwiLGY9J1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxnPWZ1bmN0aW9uKGIpe2EoYikub24oXCJjbGljay5icy5kcm9wZG93blwiLHRoaXMudG9nZ2xlKX07Zy5WRVJTSU9OPVwiMy4zLjZcIixnLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtpZighZS5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgZj1iKGUpLGc9Zi5oYXNDbGFzcyhcIm9wZW5cIik7aWYoYygpLCFnKXtcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiYhZi5jbG9zZXN0KFwiLm5hdmJhci1uYXZcIikubGVuZ3RoJiZhKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLmFkZENsYXNzKFwiZHJvcGRvd24tYmFja2Ryb3BcIikuaW5zZXJ0QWZ0ZXIoYSh0aGlzKSkub24oXCJjbGlja1wiLGMpO3ZhciBoPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2lmKGYudHJpZ2dlcihkPWEuRXZlbnQoXCJzaG93LmJzLmRyb3Bkb3duXCIsaCkpLGQuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO2UudHJpZ2dlcihcImZvY3VzXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpLGYudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpLnRyaWdnZXIoYS5FdmVudChcInNob3duLmJzLmRyb3Bkb3duXCIsaCkpfXJldHVybiExfX0sZy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihjKXtpZigvKDM4fDQwfDI3fDMyKS8udGVzdChjLndoaWNoKSYmIS9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoYy50YXJnZXQudGFnTmFtZSkpe3ZhciBkPWEodGhpcyk7aWYoYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCksIWQuaXMoXCIuZGlzYWJsZWQsIDpkaXNhYmxlZFwiKSl7dmFyIGU9YihkKSxnPWUuaGFzQ2xhc3MoXCJvcGVuXCIpO2lmKCFnJiYyNyE9Yy53aGljaHx8ZyYmMjc9PWMud2hpY2gpcmV0dXJuIDI3PT1jLndoaWNoJiZlLmZpbmQoZikudHJpZ2dlcihcImZvY3VzXCIpLGQudHJpZ2dlcihcImNsaWNrXCIpO3ZhciBoPVwiIGxpOm5vdCguZGlzYWJsZWQpOnZpc2libGUgYVwiLGk9ZS5maW5kKFwiLmRyb3Bkb3duLW1lbnVcIitoKTtpZihpLmxlbmd0aCl7dmFyIGo9aS5pbmRleChjLnRhcmdldCk7Mzg9PWMud2hpY2gmJmo+MCYmai0tLDQwPT1jLndoaWNoJiZqPGkubGVuZ3RoLTEmJmorKyx+anx8KGo9MCksaS5lcShqKS50cmlnZ2VyKFwiZm9jdXNcIil9fX19O3ZhciBoPWEuZm4uZHJvcGRvd247YS5mbi5kcm9wZG93bj1kLGEuZm4uZHJvcGRvd24uQ29uc3RydWN0b3I9ZyxhLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5kcm9wZG93bj1oLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixjKS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24gZm9ybVwiLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsZixnLnByb3RvdHlwZS50b2dnbGUpLm9uKFwia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaVwiLGYsZy5wcm90b3R5cGUua2V5ZG93bikub24oXCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24tbWVudVwiLGcucHJvdG90eXBlLmtleWRvd24pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIsZCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1lLmRhdGEoXCJicy5tb2RhbFwiKSxnPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZS5kYXRhKCksXCJvYmplY3RcIj09dHlwZW9mIGImJmIpO2Z8fGUuZGF0YShcImJzLm1vZGFsXCIsZj1uZXcgYyh0aGlzLGcpKSxcInN0cmluZ1wiPT10eXBlb2YgYj9mW2JdKGQpOmcuc2hvdyYmZi5zaG93KGQpfSl9dmFyIGM9ZnVuY3Rpb24oYixjKXt0aGlzLm9wdGlvbnM9Yyx0aGlzLiRib2R5PWEoZG9jdW1lbnQuYm9keSksdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuJGRpYWxvZz10aGlzLiRlbGVtZW50LmZpbmQoXCIubW9kYWwtZGlhbG9nXCIpLHRoaXMuJGJhY2tkcm9wPW51bGwsdGhpcy5pc1Nob3duPW51bGwsdGhpcy5vcmlnaW5hbEJvZHlQYWQ9bnVsbCx0aGlzLnNjcm9sbGJhcldpZHRoPTAsdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrPSExLHRoaXMub3B0aW9ucy5yZW1vdGUmJnRoaXMuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1jb250ZW50XCIpLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSxhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKFwibG9hZGVkLmJzLm1vZGFsXCIpfSx0aGlzKSl9O2MuVkVSU0lPTj1cIjMuMy42XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTMwMCxjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT049MTUwLGMuREVGQVVMVFM9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLHNob3c6ITB9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyhhKX0sYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbihiKXt2YXIgZD10aGlzLGU9YS5FdmVudChcInNob3cuYnMubW9kYWxcIix7cmVsYXRlZFRhcmdldDpifSk7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpLHRoaXMuaXNTaG93bnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KHRoaXMuaXNTaG93bj0hMCx0aGlzLmNoZWNrU2Nyb2xsYmFyKCksdGhpcy5zZXRTY3JvbGxiYXIoKSx0aGlzLiRib2R5LmFkZENsYXNzKFwibW9kYWwtb3BlblwiKSx0aGlzLmVzY2FwZSgpLHRoaXMucmVzaXplKCksdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIiwnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJyxhLnByb3h5KHRoaXMuaGlkZSx0aGlzKSksdGhpcy4kZGlhbG9nLm9uKFwibW91c2Vkb3duLmRpc21pc3MuYnMubW9kYWxcIixmdW5jdGlvbigpe2QuJGVsZW1lbnQub25lKFwibW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsXCIsZnVuY3Rpb24oYil7YShiLnRhcmdldCkuaXMoZC4kZWxlbWVudCkmJihkLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITApfSl9KSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7dmFyIGU9YS5zdXBwb3J0LnRyYW5zaXRpb24mJmQuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpO2QuJGVsZW1lbnQucGFyZW50KCkubGVuZ3RofHxkLiRlbGVtZW50LmFwcGVuZFRvKGQuJGJvZHkpLGQuJGVsZW1lbnQuc2hvdygpLnNjcm9sbFRvcCgwKSxkLmFkanVzdERpYWxvZygpLGUmJmQuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsZC4kZWxlbWVudC5hZGRDbGFzcyhcImluXCIpLGQuZW5mb3JjZUZvY3VzKCk7dmFyIGY9YS5FdmVudChcInNob3duLmJzLm1vZGFsXCIse3JlbGF0ZWRUYXJnZXQ6Yn0pO2U/ZC4kZGlhbG9nLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7ZC4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihmKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZC4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIikudHJpZ2dlcihmKX0pKX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihiKXtiJiZiLnByZXZlbnREZWZhdWx0KCksYj1hLkV2ZW50KFwiaGlkZS5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnRyaWdnZXIoYiksdGhpcy5pc1Nob3duJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKHRoaXMuaXNTaG93bj0hMSx0aGlzLmVzY2FwZSgpLHRoaXMucmVzaXplKCksYShkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiaW5cIikub2ZmKFwiY2xpY2suZGlzbWlzcy5icy5tb2RhbFwiKS5vZmYoXCJtb3VzZXVwLmRpc21pc3MuYnMubW9kYWxcIiksdGhpcy4kZGlhbG9nLm9mZihcIm1vdXNlZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLiRlbGVtZW50Lm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGEucHJveHkodGhpcy5oaWRlTW9kYWwsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6dGhpcy5oaWRlTW9kYWwoKSl9LGMucHJvdG90eXBlLmVuZm9yY2VGb2N1cz1mdW5jdGlvbigpe2EoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIikub24oXCJmb2N1c2luLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLiRlbGVtZW50WzBdPT09YS50YXJnZXR8fHRoaXMuJGVsZW1lbnQuaGFzKGEudGFyZ2V0KS5sZW5ndGh8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpfSx0aGlzKSl9LGMucHJvdG90eXBlLmVzY2FwZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmtleWJvYXJkP3RoaXMuJGVsZW1lbnQub24oXCJrZXlkb3duLmRpc21pc3MuYnMubW9kYWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpezI3PT1hLndoaWNoJiZ0aGlzLmhpZGUoKX0sdGhpcykpOnRoaXMuaXNTaG93bnx8dGhpcy4kZWxlbWVudC5vZmYoXCJrZXlkb3duLmRpc21pc3MuYnMubW9kYWxcIil9LGMucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93bj9hKHdpbmRvdykub24oXCJyZXNpemUuYnMubW9kYWxcIixhLnByb3h5KHRoaXMuaGFuZGxlVXBkYXRlLHRoaXMpKTphKHdpbmRvdykub2ZmKFwicmVzaXplLmJzLm1vZGFsXCIpfSxjLnByb3RvdHlwZS5oaWRlTW9kYWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJGVsZW1lbnQuaGlkZSgpLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXthLiRib2R5LnJlbW92ZUNsYXNzKFwibW9kYWwtb3BlblwiKSxhLnJlc2V0QWRqdXN0bWVudHMoKSxhLnJlc2V0U2Nyb2xsYmFyKCksYS4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLm1vZGFsXCIpfSl9LGMucHJvdG90eXBlLnJlbW92ZUJhY2tkcm9wPWZ1bmN0aW9uKCl7dGhpcy4kYmFja2Ryb3AmJnRoaXMuJGJhY2tkcm9wLnJlbW92ZSgpLHRoaXMuJGJhY2tkcm9wPW51bGx9LGMucHJvdG90eXBlLmJhY2tkcm9wPWZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsZT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT9cImZhZGVcIjpcIlwiO2lmKHRoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmJhY2tkcm9wKXt2YXIgZj1hLnN1cHBvcnQudHJhbnNpdGlvbiYmZTtpZih0aGlzLiRiYWNrZHJvcD1hKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLmFkZENsYXNzKFwibW9kYWwtYmFja2Ryb3AgXCIrZSkuYXBwZW5kVG8odGhpcy4kYm9keSksdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s/dm9pZCh0aGlzLmlnbm9yZUJhY2tkcm9wQ2xpY2s9ITEpOnZvaWQoYS50YXJnZXQ9PT1hLmN1cnJlbnRUYXJnZXQmJihcInN0YXRpY1wiPT10aGlzLm9wdGlvbnMuYmFja2Ryb3A/dGhpcy4kZWxlbWVudFswXS5mb2N1cygpOnRoaXMuaGlkZSgpKSl9LHRoaXMpKSxmJiZ0aGlzLiRiYWNrZHJvcFswXS5vZmZzZXRXaWR0aCx0aGlzLiRiYWNrZHJvcC5hZGRDbGFzcyhcImluXCIpLCFiKXJldHVybjtmP3RoaXMuJGJhY2tkcm9wLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGIpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik6YigpfWVsc2UgaWYoIXRoaXMuaXNTaG93biYmdGhpcy4kYmFja2Ryb3Ape3RoaXMuJGJhY2tkcm9wLnJlbW92ZUNsYXNzKFwiaW5cIik7dmFyIGc9ZnVuY3Rpb24oKXtkLnJlbW92ZUJhY2tkcm9wKCksYiYmYigpfTthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/dGhpcy4kYmFja2Ryb3Aub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZykuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKTpnKCl9ZWxzZSBiJiZiKCl9LGMucHJvdG90eXBlLmhhbmRsZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuYWRqdXN0RGlhbG9nKCl9LGMucHJvdG90eXBlLmFkanVzdERpYWxvZz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7dGhpcy4kZWxlbWVudC5jc3Moe3BhZGRpbmdMZWZ0OiF0aGlzLmJvZHlJc092ZXJmbG93aW5nJiZhP3RoaXMuc2Nyb2xsYmFyV2lkdGg6XCJcIixwYWRkaW5nUmlnaHQ6dGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmIWE/dGhpcy5zY3JvbGxiYXJXaWR0aDpcIlwifSl9LGMucHJvdG90eXBlLnJlc2V0QWRqdXN0bWVudHM9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LmNzcyh7cGFkZGluZ0xlZnQ6XCJcIixwYWRkaW5nUmlnaHQ6XCJcIn0pfSxjLnByb3RvdHlwZS5jaGVja1Njcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy5pbm5lcldpZHRoO2lmKCFhKXt2YXIgYj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7YT1iLnJpZ2h0LU1hdGguYWJzKGIubGVmdCl9dGhpcy5ib2R5SXNPdmVyZmxvd2luZz1kb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoPGEsdGhpcy5zY3JvbGxiYXJXaWR0aD10aGlzLm1lYXN1cmVTY3JvbGxiYXIoKX0sYy5wcm90b3R5cGUuc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9cGFyc2VJbnQodGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpfHwwLDEwKTt0aGlzLm9yaWdpbmFsQm9keVBhZD1kb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodHx8XCJcIix0aGlzLmJvZHlJc092ZXJmbG93aW5nJiZ0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIixhK3RoaXMuc2Nyb2xsYmFyV2lkdGgpfSxjLnByb3RvdHlwZS5yZXNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3RoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiLHRoaXMub3JpZ2luYWxCb2R5UGFkKX0sYy5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5jbGFzc05hbWU9XCJtb2RhbC1zY3JvbGxiYXItbWVhc3VyZVwiLHRoaXMuJGJvZHkuYXBwZW5kKGEpO3ZhciBiPWEub2Zmc2V0V2lkdGgtYS5jbGllbnRXaWR0aDtyZXR1cm4gdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZChhKSxifTt2YXIgZD1hLmZuLm1vZGFsO2EuZm4ubW9kYWw9YixhLmZuLm1vZGFsLkNvbnN0cnVjdG9yPWMsYS5mbi5tb2RhbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4ubW9kYWw9ZCx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLm1vZGFsLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxmdW5jdGlvbihjKXt2YXIgZD1hKHRoaXMpLGU9ZC5hdHRyKFwiaHJlZlwiKSxmPWEoZC5hdHRyKFwiZGF0YS10YXJnZXRcIil8fGUmJmUucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSksZz1mLmRhdGEoXCJicy5tb2RhbFwiKT9cInRvZ2dsZVwiOmEuZXh0ZW5kKHtyZW1vdGU6IS8jLy50ZXN0KGUpJiZlfSxmLmRhdGEoKSxkLmRhdGEoKSk7ZC5pcyhcImFcIikmJmMucHJldmVudERlZmF1bHQoKSxmLm9uZShcInNob3cuYnMubW9kYWxcIixmdW5jdGlvbihhKXthLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxmLm9uZShcImhpZGRlbi5icy5tb2RhbFwiLGZ1bmN0aW9uKCl7ZC5pcyhcIjp2aXNpYmxlXCIpJiZkLnRyaWdnZXIoXCJmb2N1c1wiKX0pfSksYi5jYWxsKGYsZyx0aGlzKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMudG9vbHRpcFwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiOyhlfHwhL2Rlc3Ryb3l8aGlkZS8udGVzdChiKSkmJihlfHxkLmRhdGEoXCJicy50b29sdGlwXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpKX0pfXZhciBjPWZ1bmN0aW9uKGEsYil7dGhpcy50eXBlPW51bGwsdGhpcy5vcHRpb25zPW51bGwsdGhpcy5lbmFibGVkPW51bGwsdGhpcy50aW1lb3V0PW51bGwsdGhpcy5ob3ZlclN0YXRlPW51bGwsdGhpcy4kZWxlbWVudD1udWxsLHRoaXMuaW5TdGF0ZT1udWxsLHRoaXMuaW5pdChcInRvb2x0aXBcIixhLGIpfTtjLlZFUlNJT049XCIzLjMuNlwiLGMuVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5ERUZBVUxUUz17YW5pbWF0aW9uOiEwLHBsYWNlbWVudDpcInRvcFwiLHNlbGVjdG9yOiExLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsdHJpZ2dlcjpcImhvdmVyIGZvY3VzXCIsdGl0bGU6XCJcIixkZWxheTowLGh0bWw6ITEsY29udGFpbmVyOiExLHZpZXdwb3J0OntzZWxlY3RvcjpcImJvZHlcIixwYWRkaW5nOjB9fSxjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGIsYyxkKXtpZih0aGlzLmVuYWJsZWQ9ITAsdGhpcy50eXBlPWIsdGhpcy4kZWxlbWVudD1hKGMpLHRoaXMub3B0aW9ucz10aGlzLmdldE9wdGlvbnMoZCksdGhpcy4kdmlld3BvcnQ9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZhKGEuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMudmlld3BvcnQpP3RoaXMub3B0aW9ucy52aWV3cG9ydC5jYWxsKHRoaXMsdGhpcy4kZWxlbWVudCk6dGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yfHx0aGlzLm9wdGlvbnMudmlld3BvcnQpLHRoaXMuaW5TdGF0ZT17Y2xpY2s6ITEsaG92ZXI6ITEsZm9jdXM6ITF9LHRoaXMuJGVsZW1lbnRbMF1pbnN0YW5jZW9mIGRvY3VtZW50LmNvbnN0cnVjdG9yJiYhdGhpcy5vcHRpb25zLnNlbGVjdG9yKXRocm93IG5ldyBFcnJvcihcImBzZWxlY3RvcmAgb3B0aW9uIG11c3QgYmUgc3BlY2lmaWVkIHdoZW4gaW5pdGlhbGl6aW5nIFwiK3RoaXMudHlwZStcIiBvbiB0aGUgd2luZG93LmRvY3VtZW50IG9iamVjdCFcIik7Zm9yKHZhciBlPXRoaXMub3B0aW9ucy50cmlnZ2VyLnNwbGl0KFwiIFwiKSxmPWUubGVuZ3RoO2YtLTspe3ZhciBnPWVbZl07aWYoXCJjbGlja1wiPT1nKXRoaXMuJGVsZW1lbnQub24oXCJjbGljay5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy50b2dnbGUsdGhpcykpO2Vsc2UgaWYoXCJtYW51YWxcIiE9Zyl7dmFyIGg9XCJob3ZlclwiPT1nP1wibW91c2VlbnRlclwiOlwiZm9jdXNpblwiLGk9XCJob3ZlclwiPT1nP1wibW91c2VsZWF2ZVwiOlwiZm9jdXNvdXRcIjt0aGlzLiRlbGVtZW50Lm9uKGgrXCIuXCIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMuZW50ZXIsdGhpcykpLHRoaXMuJGVsZW1lbnQub24oaStcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy5sZWF2ZSx0aGlzKSl9fXRoaXMub3B0aW9ucy5zZWxlY3Rvcj90aGlzLl9vcHRpb25zPWEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyx7dHJpZ2dlcjpcIm1hbnVhbFwiLHNlbGVjdG9yOlwiXCJ9KTp0aGlzLmZpeFRpdGxlKCl9LGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLmdldE9wdGlvbnM9ZnVuY3Rpb24oYil7cmV0dXJuIGI9YS5leHRlbmQoe30sdGhpcy5nZXREZWZhdWx0cygpLHRoaXMuJGVsZW1lbnQuZGF0YSgpLGIpLGIuZGVsYXkmJlwibnVtYmVyXCI9PXR5cGVvZiBiLmRlbGF5JiYoYi5kZWxheT17c2hvdzpiLmRlbGF5LGhpZGU6Yi5kZWxheX0pLGJ9LGMucHJvdG90eXBlLmdldERlbGVnYXRlT3B0aW9ucz1mdW5jdGlvbigpe3ZhciBiPXt9LGM9dGhpcy5nZXREZWZhdWx0cygpO3JldHVybiB0aGlzLl9vcHRpb25zJiZhLmVhY2godGhpcy5fb3B0aW9ucyxmdW5jdGlvbihhLGQpe2NbYV0hPWQmJihiW2FdPWQpfSksYn0sYy5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24oYil7dmFyIGM9YiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/YjphKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxjKSksYiBpbnN0YW5jZW9mIGEuRXZlbnQmJihjLmluU3RhdGVbXCJmb2N1c2luXCI9PWIudHlwZT9cImZvY3VzXCI6XCJob3ZlclwiXT0hMCksYy50aXAoKS5oYXNDbGFzcyhcImluXCIpfHxcImluXCI9PWMuaG92ZXJTdGF0ZT92b2lkKGMuaG92ZXJTdGF0ZT1cImluXCIpOihjbGVhclRpbWVvdXQoYy50aW1lb3V0KSxjLmhvdmVyU3RhdGU9XCJpblwiLGMub3B0aW9ucy5kZWxheSYmYy5vcHRpb25zLmRlbGF5LnNob3c/dm9pZChjLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wiaW5cIj09Yy5ob3ZlclN0YXRlJiZjLnNob3coKX0sYy5vcHRpb25zLmRlbGF5LnNob3cpKTpjLnNob3coKSl9LGMucHJvdG90eXBlLmlzSW5TdGF0ZVRydWU9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5pblN0YXRlKWlmKHRoaXMuaW5TdGF0ZVthXSlyZXR1cm4hMDtyZXR1cm4hMX0sYy5wcm90b3R5cGUubGVhdmU9ZnVuY3Rpb24oYil7dmFyIGM9YiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/YjphKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxjKSksYiBpbnN0YW5jZW9mIGEuRXZlbnQmJihjLmluU3RhdGVbXCJmb2N1c291dFwiPT1iLnR5cGU/XCJmb2N1c1wiOlwiaG92ZXJcIl09ITEpLGMuaXNJblN0YXRlVHJ1ZSgpP3ZvaWQgMDooY2xlYXJUaW1lb3V0KGMudGltZW91dCksYy5ob3ZlclN0YXRlPVwib3V0XCIsYy5vcHRpb25zLmRlbGF5JiZjLm9wdGlvbnMuZGVsYXkuaGlkZT92b2lkKGMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJvdXRcIj09Yy5ob3ZlclN0YXRlJiZjLmhpZGUoKX0sYy5vcHRpb25zLmRlbGF5LmhpZGUpKTpjLmhpZGUoKSl9LGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgYj1hLkV2ZW50KFwic2hvdy5icy5cIit0aGlzLnR5cGUpO2lmKHRoaXMuaGFzQ29udGVudCgpJiZ0aGlzLmVuYWJsZWQpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihiKTt2YXIgZD1hLmNvbnRhaW5zKHRoaXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy4kZWxlbWVudFswXSk7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IWQpcmV0dXJuO3ZhciBlPXRoaXMsZj10aGlzLnRpcCgpLGc9dGhpcy5nZXRVSUQodGhpcy50eXBlKTt0aGlzLnNldENvbnRlbnQoKSxmLmF0dHIoXCJpZFwiLGcpLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixnKSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uJiZmLmFkZENsYXNzKFwiZmFkZVwiKTt2YXIgaD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50P3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLGZbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudCxpPS9cXHM/YXV0bz9cXHM/L2ksaj1pLnRlc3QoaCk7aiYmKGg9aC5yZXBsYWNlKGksXCJcIil8fFwidG9wXCIpLGYuZGV0YWNoKCkuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheTpcImJsb2NrXCJ9KS5hZGRDbGFzcyhoKS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLHRoaXMpLHRoaXMub3B0aW9ucy5jb250YWluZXI/Zi5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTpmLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImluc2VydGVkLmJzLlwiK3RoaXMudHlwZSk7dmFyIGs9dGhpcy5nZXRQb3NpdGlvbigpLGw9ZlswXS5vZmZzZXRXaWR0aCxtPWZbMF0ub2Zmc2V0SGVpZ2h0O2lmKGope3ZhciBuPWgsbz10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtoPVwiYm90dG9tXCI9PWgmJmsuYm90dG9tK20+by5ib3R0b20/XCJ0b3BcIjpcInRvcFwiPT1oJiZrLnRvcC1tPG8udG9wP1wiYm90dG9tXCI6XCJyaWdodFwiPT1oJiZrLnJpZ2h0K2w+by53aWR0aD9cImxlZnRcIjpcImxlZnRcIj09aCYmay5sZWZ0LWw8by5sZWZ0P1wicmlnaHRcIjpoLGYucmVtb3ZlQ2xhc3MobikuYWRkQ2xhc3MoaCl9dmFyIHA9dGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KGgsayxsLG0pO3RoaXMuYXBwbHlQbGFjZW1lbnQocCxoKTt2YXIgcT1mdW5jdGlvbigpe3ZhciBhPWUuaG92ZXJTdGF0ZTtlLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5cIitlLnR5cGUpLGUuaG92ZXJTdGF0ZT1udWxsLFwib3V0XCI9PWEmJmUubGVhdmUoZSl9O2Euc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiR0aXAuaGFzQ2xhc3MoXCJmYWRlXCIpP2Yub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIscSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpxKCl9fSxjLnByb3RvdHlwZS5hcHBseVBsYWNlbWVudD1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMudGlwKCksZT1kWzBdLm9mZnNldFdpZHRoLGY9ZFswXS5vZmZzZXRIZWlnaHQsZz1wYXJzZUludChkLmNzcyhcIm1hcmdpbi10b3BcIiksMTApLGg9cGFyc2VJbnQoZC5jc3MoXCJtYXJnaW4tbGVmdFwiKSwxMCk7aXNOYU4oZykmJihnPTApLGlzTmFOKGgpJiYoaD0wKSxiLnRvcCs9ZyxiLmxlZnQrPWgsYS5vZmZzZXQuc2V0T2Zmc2V0KGRbMF0sYS5leHRlbmQoe3VzaW5nOmZ1bmN0aW9uKGEpe2QuY3NzKHt0b3A6TWF0aC5yb3VuZChhLnRvcCksbGVmdDpNYXRoLnJvdW5kKGEubGVmdCl9KX19LGIpLDApLGQuYWRkQ2xhc3MoXCJpblwiKTt2YXIgaT1kWzBdLm9mZnNldFdpZHRoLGo9ZFswXS5vZmZzZXRIZWlnaHQ7XCJ0b3BcIj09YyYmaiE9ZiYmKGIudG9wPWIudG9wK2Ytaik7dmFyIGs9dGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEoYyxiLGksaik7ay5sZWZ0P2IubGVmdCs9ay5sZWZ0OmIudG9wKz1rLnRvcDt2YXIgbD0vdG9wfGJvdHRvbS8udGVzdChjKSxtPWw/MiprLmxlZnQtZStpOjIqay50b3AtZitqLG49bD9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIjtkLm9mZnNldChiKSx0aGlzLnJlcGxhY2VBcnJvdyhtLGRbMF1bbl0sbCl9LGMucHJvdG90eXBlLnJlcGxhY2VBcnJvdz1mdW5jdGlvbihhLGIsYyl7dGhpcy5hcnJvdygpLmNzcyhjP1wibGVmdFwiOlwidG9wXCIsNTAqKDEtYS9iKStcIiVcIikuY3NzKGM/XCJ0b3BcIjpcImxlZnRcIixcIlwiKX0sYy5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGlwKCksYj10aGlzLmdldFRpdGxlKCk7YS5maW5kKFwiLnRvb2x0aXAtaW5uZXJcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEucmVtb3ZlQ2xhc3MoXCJmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodFwiKX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBkKCl7XCJpblwiIT1lLmhvdmVyU3RhdGUmJmYuZGV0YWNoKCksZS4kZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiKS50cmlnZ2VyKFwiaGlkZGVuLmJzLlwiK2UudHlwZSksYiYmYigpfXZhciBlPXRoaXMsZj1hKHRoaXMuJHRpcCksZz1hLkV2ZW50KFwiaGlkZS5icy5cIit0aGlzLnR5cGUpO3JldHVybiB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZyksZy5pc0RlZmF1bHRQcmV2ZW50ZWQoKT92b2lkIDA6KGYucmVtb3ZlQ2xhc3MoXCJpblwiKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmZi5oYXNDbGFzcyhcImZhZGVcIik/Zi5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixkKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOmQoKSx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzKX0sYy5wcm90b3R5cGUuZml4VGl0bGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50OyhhLmF0dHIoXCJ0aXRsZVwiKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIikpJiZhLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIsYS5hdHRyKFwidGl0bGVcIil8fFwiXCIpLmF0dHIoXCJ0aXRsZVwiLFwiXCIpfSxjLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKX0sYy5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oYil7Yj1ifHx0aGlzLiRlbGVtZW50O3ZhciBjPWJbMF0sZD1cIkJPRFlcIj09Yy50YWdOYW1lLGU9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtudWxsPT1lLndpZHRoJiYoZT1hLmV4dGVuZCh7fSxlLHt3aWR0aDplLnJpZ2h0LWUubGVmdCxoZWlnaHQ6ZS5ib3R0b20tZS50b3B9KSk7dmFyIGY9ZD97dG9wOjAsbGVmdDowfTpiLm9mZnNldCgpLGc9e3Njcm9sbDpkP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOmIuc2Nyb2xsVG9wKCl9LGg9ZD97d2lkdGg6YSh3aW5kb3cpLndpZHRoKCksaGVpZ2h0OmEod2luZG93KS5oZWlnaHQoKX06bnVsbDtyZXR1cm4gYS5leHRlbmQoe30sZSxnLGgsZil9LGMucHJvdG90eXBlLmdldENhbGN1bGF0ZWRPZmZzZXQ9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuXCJib3R0b21cIj09YT97dG9wOmIudG9wK2IuaGVpZ2h0LGxlZnQ6Yi5sZWZ0K2Iud2lkdGgvMi1jLzJ9OlwidG9wXCI9PWE/e3RvcDpiLnRvcC1kLGxlZnQ6Yi5sZWZ0K2Iud2lkdGgvMi1jLzJ9OlwibGVmdFwiPT1hP3t0b3A6Yi50b3ArYi5oZWlnaHQvMi1kLzIsbGVmdDpiLmxlZnQtY306e3RvcDpiLnRvcCtiLmhlaWdodC8yLWQvMixsZWZ0OmIubGVmdCtiLndpZHRofX0sYy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXt0b3A6MCxsZWZ0OjB9O2lmKCF0aGlzLiR2aWV3cG9ydClyZXR1cm4gZTt2YXIgZj10aGlzLm9wdGlvbnMudmlld3BvcnQmJnRoaXMub3B0aW9ucy52aWV3cG9ydC5wYWRkaW5nfHwwLGc9dGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydCk7aWYoL3JpZ2h0fGxlZnQvLnRlc3QoYSkpe3ZhciBoPWIudG9wLWYtZy5zY3JvbGwsaT1iLnRvcCtmLWcuc2Nyb2xsK2Q7aDxnLnRvcD9lLnRvcD1nLnRvcC1oOmk+Zy50b3ArZy5oZWlnaHQmJihlLnRvcD1nLnRvcCtnLmhlaWdodC1pKX1lbHNle3ZhciBqPWIubGVmdC1mLGs9Yi5sZWZ0K2YrYztqPGcubGVmdD9lLmxlZnQ9Zy5sZWZ0LWo6az5nLnJpZ2h0JiYoZS5sZWZ0PWcubGVmdCtnLndpZHRoLWspfXJldHVybiBlfSxjLnByb3RvdHlwZS5nZXRUaXRsZT1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kZWxlbWVudCxjPXRoaXMub3B0aW9ucztyZXR1cm4gYT1iLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpfHwoXCJmdW5jdGlvblwiPT10eXBlb2YgYy50aXRsZT9jLnRpdGxlLmNhbGwoYlswXSk6Yy50aXRsZSl9LGMucHJvdG90eXBlLmdldFVJRD1mdW5jdGlvbihhKXtkbyBhKz1+figxZTYqTWF0aC5yYW5kb20oKSk7d2hpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkpO3JldHVybiBhfSxjLnByb3RvdHlwZS50aXA9ZnVuY3Rpb24oKXtpZighdGhpcy4kdGlwJiYodGhpcy4kdGlwPWEodGhpcy5vcHRpb25zLnRlbXBsYXRlKSwxIT10aGlzLiR0aXAubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IodGhpcy50eXBlK1wiIGB0ZW1wbGF0ZWAgb3B0aW9uIG11c3QgY29uc2lzdCBvZiBleGFjdGx5IDEgdG9wLWxldmVsIGVsZW1lbnQhXCIpO3JldHVybiB0aGlzLiR0aXB9LGMucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoXCIudG9vbHRpcC1hcnJvd1wiKX0sYy5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwfSxjLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSExfSxjLnByb3RvdHlwZS50b2dnbGVFbmFibGVkPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSF0aGlzLmVuYWJsZWR9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzO2ImJihjPWEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKSxjfHwoYz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihiLmN1cnJlbnRUYXJnZXQsdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSksYShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsYykpKSxiPyhjLmluU3RhdGUuY2xpY2s9IWMuaW5TdGF0ZS5jbGljayxjLmlzSW5TdGF0ZVRydWUoKT9jLmVudGVyKGMpOmMubGVhdmUoYykpOmMudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9jLmxlYXZlKGMpOmMuZW50ZXIoYyl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMuaGlkZShmdW5jdGlvbigpe2EuJGVsZW1lbnQub2ZmKFwiLlwiK2EudHlwZSkucmVtb3ZlRGF0YShcImJzLlwiK2EudHlwZSksYS4kdGlwJiZhLiR0aXAuZGV0YWNoKCksYS4kdGlwPW51bGwsYS4kYXJyb3c9bnVsbCxhLiR2aWV3cG9ydD1udWxsfSl9O3ZhciBkPWEuZm4udG9vbHRpcDthLmZuLnRvb2x0aXA9YixhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3I9YyxhLmZuLnRvb2x0aXAubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnRvb2x0aXA9ZCx0aGlzfX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnBvcG92ZXJcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjsoZXx8IS9kZXN0cm95fGhpZGUvLnRlc3QoYikpJiYoZXx8ZC5kYXRhKFwiYnMucG9wb3ZlclwiLGU9bmV3IGModGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKSl9KX12YXIgYz1mdW5jdGlvbihhLGIpe3RoaXMuaW5pdChcInBvcG92ZXJcIixhLGIpfTtpZighYS5mbi50b29sdGlwKXRocm93IG5ldyBFcnJvcihcIlBvcG92ZXIgcmVxdWlyZXMgdG9vbHRpcC5qc1wiKTtjLlZFUlNJT049XCIzLjMuNlwiLGMuREVGQVVMVFM9YS5leHRlbmQoe30sYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yLkRFRkFVTFRTLHtwbGFjZW1lbnQ6XCJyaWdodFwiLHRyaWdnZXI6XCJjbGlja1wiLGNvbnRlbnQ6XCJcIix0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIj48L2gzPjxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nfSksYy5wcm90b3R5cGU9YS5leHRlbmQoe30sYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSksYy5wcm90b3R5cGUuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZS5nZXREZWZhdWx0cz1mdW5jdGlvbigpe3JldHVybiBjLkRFRkFVTFRTfSxjLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aXAoKSxiPXRoaXMuZ2V0VGl0bGUoKSxjPXRoaXMuZ2V0Q29udGVudCgpO2EuZmluZChcIi5wb3BvdmVyLXRpdGxlXCIpW3RoaXMub3B0aW9ucy5odG1sP1wiaHRtbFwiOlwidGV4dFwiXShiKSxhLmZpbmQoXCIucG9wb3Zlci1jb250ZW50XCIpLmNoaWxkcmVuKCkuZGV0YWNoKCkuZW5kKClbdGhpcy5vcHRpb25zLmh0bWw/XCJzdHJpbmdcIj09dHlwZW9mIGM/XCJodG1sXCI6XCJhcHBlbmRcIjpcInRleHRcIl0oYyksYS5yZW1vdmVDbGFzcyhcImZhZGUgdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0IGluXCIpLGEuZmluZChcIi5wb3BvdmVyLXRpdGxlXCIpLmh0bWwoKXx8YS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaGlkZSgpfSxjLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKXx8dGhpcy5nZXRDb250ZW50KCl9LGMucHJvdG90eXBlLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50LGI9dGhpcy5vcHRpb25zO3JldHVybiBhLmF0dHIoXCJkYXRhLWNvbnRlbnRcIil8fChcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmNvbnRlbnQ/Yi5jb250ZW50LmNhbGwoYVswXSk6Yi5jb250ZW50KX0sYy5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZChcIi5hcnJvd1wiKX07dmFyIGQ9YS5mbi5wb3BvdmVyO2EuZm4ucG9wb3Zlcj1iLGEuZm4ucG9wb3Zlci5Db25zdHJ1Y3Rvcj1jLGEuZm4ucG9wb3Zlci5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4ucG9wb3Zlcj1kLHRoaXN9fShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGMsZCl7dGhpcy4kYm9keT1hKGRvY3VtZW50LmJvZHkpLHRoaXMuJHNjcm9sbEVsZW1lbnQ9YShhKGMpLmlzKGRvY3VtZW50LmJvZHkpP3dpbmRvdzpjKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYi5ERUZBVUxUUyxkKSx0aGlzLnNlbGVjdG9yPSh0aGlzLm9wdGlvbnMudGFyZ2V0fHxcIlwiKStcIiAubmF2IGxpID4gYVwiLHRoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5hY3RpdmVUYXJnZXQ9bnVsbCx0aGlzLnNjcm9sbEhlaWdodD0wLHRoaXMuJHNjcm9sbEVsZW1lbnQub24oXCJzY3JvbGwuYnMuc2Nyb2xsc3B5XCIsYS5wcm94eSh0aGlzLnByb2Nlc3MsdGhpcykpLHRoaXMucmVmcmVzaCgpLHRoaXMucHJvY2VzcygpfWZ1bmN0aW9uIGMoYyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5zY3JvbGxzcHlcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYyYmYztlfHxkLmRhdGEoXCJicy5zY3JvbGxzcHlcIixlPW5ldyBiKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBjJiZlW2NdKCl9KX1iLlZFUlNJT049XCIzLjMuNlwiLGIuREVGQVVMVFM9e29mZnNldDoxMH0sYi5wcm90b3R5cGUuZ2V0U2Nyb2xsSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0fHxNYXRoLm1heCh0aGlzLiRib2R5WzBdLnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KX0sYi5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1cIm9mZnNldFwiLGQ9MDt0aGlzLm9mZnNldHM9W10sdGhpcy50YXJnZXRzPVtdLHRoaXMuc2Nyb2xsSGVpZ2h0PXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksYS5pc1dpbmRvdyh0aGlzLiRzY3JvbGxFbGVtZW50WzBdKXx8KGM9XCJwb3NpdGlvblwiLGQ9dGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSksdGhpcy4kYm9keS5maW5kKHRoaXMuc2VsZWN0b3IpLm1hcChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyksZT1iLmRhdGEoXCJ0YXJnZXRcIil8fGIuYXR0cihcImhyZWZcIiksZj0vXiMuLy50ZXN0KGUpJiZhKGUpO3JldHVybiBmJiZmLmxlbmd0aCYmZi5pcyhcIjp2aXNpYmxlXCIpJiZbW2ZbY10oKS50b3ArZCxlXV18fG51bGx9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGFbMF0tYlswXX0pLmVhY2goZnVuY3Rpb24oKXtiLm9mZnNldHMucHVzaCh0aGlzWzBdKSxiLnRhcmdldHMucHVzaCh0aGlzWzFdKX0pfSxiLnByb3RvdHlwZS5wcm9jZXNzPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpK3RoaXMub3B0aW9ucy5vZmZzZXQsYz10aGlzLmdldFNjcm9sbEhlaWdodCgpLGQ9dGhpcy5vcHRpb25zLm9mZnNldCtjLXRoaXMuJHNjcm9sbEVsZW1lbnQuaGVpZ2h0KCksZT10aGlzLm9mZnNldHMsZj10aGlzLnRhcmdldHMsZz10aGlzLmFjdGl2ZVRhcmdldDtpZih0aGlzLnNjcm9sbEhlaWdodCE9YyYmdGhpcy5yZWZyZXNoKCksYj49ZClyZXR1cm4gZyE9KGE9ZltmLmxlbmd0aC0xXSkmJnRoaXMuYWN0aXZhdGUoYSk7aWYoZyYmYjxlWzBdKXJldHVybiB0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuY2xlYXIoKTtmb3IoYT1lLmxlbmd0aDthLS07KWchPWZbYV0mJmI+PWVbYV0mJih2b2lkIDA9PT1lW2ErMV18fGI8ZVthKzFdKSYmdGhpcy5hY3RpdmF0ZShmW2FdKX0sYi5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYil7dGhpcy5hY3RpdmVUYXJnZXQ9Yix0aGlzLmNsZWFyKCk7dmFyIGM9dGhpcy5zZWxlY3RvcisnW2RhdGEtdGFyZ2V0PVwiJytiKydcIl0sJyt0aGlzLnNlbGVjdG9yKydbaHJlZj1cIicrYisnXCJdJyxkPWEoYykucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuZC5wYXJlbnQoXCIuZHJvcGRvd24tbWVudVwiKS5sZW5ndGgmJihkPWQuY2xvc2VzdChcImxpLmRyb3Bkb3duXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpKSxkLnRyaWdnZXIoXCJhY3RpdmF0ZS5icy5zY3JvbGxzcHlcIil9LGIucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7YSh0aGlzLnNlbGVjdG9yKS5wYXJlbnRzVW50aWwodGhpcy5vcHRpb25zLnRhcmdldCxcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9O3ZhciBkPWEuZm4uc2Nyb2xsc3B5O2EuZm4uc2Nyb2xsc3B5PWMsYS5mbi5zY3JvbGxzcHkuQ29uc3RydWN0b3I9YixhLmZuLnNjcm9sbHNweS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uc2Nyb2xsc3B5PWQsdGhpc30sYSh3aW5kb3cpLm9uKFwibG9hZC5icy5zY3JvbGxzcHkuZGF0YS1hcGlcIixmdW5jdGlvbigpe2EoJ1tkYXRhLXNweT1cInNjcm9sbFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpO2MuY2FsbChiLGIuZGF0YSgpKX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy50YWJcIik7ZXx8ZC5kYXRhKFwiYnMudGFiXCIsZT1uZXcgYyh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIpe3RoaXMuZWxlbWVudD1hKGIpfTtjLlZFUlNJT049XCIzLjMuNlwiLGMuVFJBTlNJVElPTl9EVVJBVElPTj0xNTAsYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciBiPXRoaXMuZWxlbWVudCxjPWIuY2xvc2VzdChcInVsOm5vdCguZHJvcGRvd24tbWVudSlcIiksZD1iLmRhdGEoXCJ0YXJnZXRcIik7aWYoZHx8KGQ9Yi5hdHRyKFwiaHJlZlwiKSxkPWQmJmQucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLyxcIlwiKSksIWIucGFyZW50KFwibGlcIikuaGFzQ2xhc3MoXCJhY3RpdmVcIikpe3ZhciBlPWMuZmluZChcIi5hY3RpdmU6bGFzdCBhXCIpLGY9YS5FdmVudChcImhpZGUuYnMudGFiXCIse3JlbGF0ZWRUYXJnZXQ6YlswXX0pLGc9YS5FdmVudChcInNob3cuYnMudGFiXCIse3JlbGF0ZWRUYXJnZXQ6ZVswXX0pO2lmKGUudHJpZ2dlcihmKSxiLnRyaWdnZXIoZyksIWcuaXNEZWZhdWx0UHJldmVudGVkKCkmJiFmLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgaD1hKGQpO3RoaXMuYWN0aXZhdGUoYi5jbG9zZXN0KFwibGlcIiksYyksdGhpcy5hY3RpdmF0ZShoLGgucGFyZW50KCksZnVuY3Rpb24oKXtlLnRyaWdnZXIoe3R5cGU6XCJoaWRkZW4uYnMudGFiXCIscmVsYXRlZFRhcmdldDpiWzBdfSksYi50cmlnZ2VyKHt0eXBlOlwic2hvd24uYnMudGFiXCIscmVsYXRlZFRhcmdldDplWzBdfSl9KX19fSxjLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihiLGQsZSl7ZnVuY3Rpb24gZigpe2cucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikuZmluZChcIj4gLmRyb3Bkb3duLW1lbnUgPiAuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmVuZCgpLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLGIuYWRkQ2xhc3MoXCJhY3RpdmVcIikuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJykuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCksaD8oYlswXS5vZmZzZXRXaWR0aCxiLmFkZENsYXNzKFwiaW5cIikpOmIucmVtb3ZlQ2xhc3MoXCJmYWRlXCIpLGIucGFyZW50KFwiLmRyb3Bkb3duLW1lbnVcIikubGVuZ3RoJiZiLmNsb3Nlc3QoXCJsaS5kcm9wZG93blwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5lbmQoKS5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSxlJiZlKCl9dmFyIGc9ZC5maW5kKFwiPiAuYWN0aXZlXCIpLGg9ZSYmYS5zdXBwb3J0LnRyYW5zaXRpb24mJihnLmxlbmd0aCYmZy5oYXNDbGFzcyhcImZhZGVcIil8fCEhZC5maW5kKFwiPiAuZmFkZVwiKS5sZW5ndGgpO2cubGVuZ3RoJiZoP2cub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZikuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpmKCksZy5yZW1vdmVDbGFzcyhcImluXCIpfTt2YXIgZD1hLmZuLnRhYjthLmZuLnRhYj1iLGEuZm4udGFiLkNvbnN0cnVjdG9yPWMsYS5mbi50YWIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnRhYj1kLHRoaXN9O3ZhciBlPWZ1bmN0aW9uKGMpe2MucHJldmVudERlZmF1bHQoKSxiLmNhbGwoYSh0aGlzKSxcInNob3dcIil9O2EoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMudGFiLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScsZSkub24oXCJjbGljay5icy50YWIuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwicGlsbFwiXScsZSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5hZmZpeFwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiO2V8fGQuZGF0YShcImJzLmFmZml4XCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGM9ZnVuY3Rpb24oYixkKXt0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLiR0YXJnZXQ9YSh0aGlzLm9wdGlvbnMudGFyZ2V0KS5vbihcInNjcm9sbC5icy5hZmZpeC5kYXRhLWFwaVwiLGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpKS5vbihcImNsaWNrLmJzLmFmZml4LmRhdGEtYXBpXCIsYS5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLHRoaXMpKSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5hZmZpeGVkPW51bGwsdGhpcy51bnBpbj1udWxsLHRoaXMucGlubmVkT2Zmc2V0PW51bGwsdGhpcy5jaGVja1Bvc2l0aW9uKCl9O2MuVkVSU0lPTj1cIjMuMy42XCIsYy5SRVNFVD1cImFmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b21cIixjLkRFRkFVTFRTPXtvZmZzZXQ6MCx0YXJnZXQ6d2luZG93fSxjLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLiR0YXJnZXQuc2Nyb2xsVG9wKCksZj10aGlzLiRlbGVtZW50Lm9mZnNldCgpLGc9dGhpcy4kdGFyZ2V0LmhlaWdodCgpO2lmKG51bGwhPWMmJlwidG9wXCI9PXRoaXMuYWZmaXhlZClyZXR1cm4gYz5lP1widG9wXCI6ITE7aWYoXCJib3R0b21cIj09dGhpcy5hZmZpeGVkKXJldHVybiBudWxsIT1jP2UrdGhpcy51bnBpbjw9Zi50b3A/ITE6XCJib3R0b21cIjphLWQ+PWUrZz8hMTpcImJvdHRvbVwiO3ZhciBoPW51bGw9PXRoaXMuYWZmaXhlZCxpPWg/ZTpmLnRvcCxqPWg/ZzpiO3JldHVybiBudWxsIT1jJiZjPj1lP1widG9wXCI6bnVsbCE9ZCYmaStqPj1hLWQ/XCJib3R0b21cIjohMX0sYy5wcm90b3R5cGUuZ2V0UGlubmVkT2Zmc2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5waW5uZWRPZmZzZXQpcmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0O3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoYy5SRVNFVCkuYWRkQ2xhc3MoXCJhZmZpeFwiKTt2YXIgYT10aGlzLiR0YXJnZXQuc2Nyb2xsVG9wKCksYj10aGlzLiRlbGVtZW50Lm9mZnNldCgpO3JldHVybiB0aGlzLnBpbm5lZE9mZnNldD1iLnRvcC1hfSxjLnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcD1mdW5jdGlvbigpe3NldFRpbWVvdXQoYS5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sdGhpcyksMSl9LGMucHJvdG90eXBlLmNoZWNrUG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLiRlbGVtZW50LmlzKFwiOnZpc2libGVcIikpe3ZhciBiPXRoaXMuJGVsZW1lbnQuaGVpZ2h0KCksZD10aGlzLm9wdGlvbnMub2Zmc2V0LGU9ZC50b3AsZj1kLmJvdHRvbSxnPU1hdGgubWF4KGEoZG9jdW1lbnQpLmhlaWdodCgpLGEoZG9jdW1lbnQuYm9keSkuaGVpZ2h0KCkpO1wib2JqZWN0XCIhPXR5cGVvZiBkJiYoZj1lPWQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihlPWQudG9wKHRoaXMuJGVsZW1lbnQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmJiYoZj1kLmJvdHRvbSh0aGlzLiRlbGVtZW50KSk7dmFyIGg9dGhpcy5nZXRTdGF0ZShnLGIsZSxmKTtpZih0aGlzLmFmZml4ZWQhPWgpe251bGwhPXRoaXMudW5waW4mJnRoaXMuJGVsZW1lbnQuY3NzKFwidG9wXCIsXCJcIik7dmFyIGk9XCJhZmZpeFwiKyhoP1wiLVwiK2g6XCJcIiksaj1hLkV2ZW50KGkrXCIuYnMuYWZmaXhcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGopLGouaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO3RoaXMuYWZmaXhlZD1oLHRoaXMudW5waW49XCJib3R0b21cIj09aD90aGlzLmdldFBpbm5lZE9mZnNldCgpOm51bGwsdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhjLlJFU0VUKS5hZGRDbGFzcyhpKS50cmlnZ2VyKGkucmVwbGFjZShcImFmZml4XCIsXCJhZmZpeGVkXCIpK1wiLmJzLmFmZml4XCIpfVwiYm90dG9tXCI9PWgmJnRoaXMuJGVsZW1lbnQub2Zmc2V0KHt0b3A6Zy1iLWZ9KX19O3ZhciBkPWEuZm4uYWZmaXg7YS5mbi5hZmZpeD1iLGEuZm4uYWZmaXguQ29uc3RydWN0b3I9YyxhLmZuLmFmZml4Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5hZmZpeD1kLHRoaXN9LGEod2luZG93KS5vbihcImxvYWRcIixmdW5jdGlvbigpe2EoJ1tkYXRhLXNweT1cImFmZml4XCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoKTtkLm9mZnNldD1kLm9mZnNldHx8e30sbnVsbCE9ZC5vZmZzZXRCb3R0b20mJihkLm9mZnNldC5ib3R0b209ZC5vZmZzZXRCb3R0b20pLG51bGwhPWQub2Zmc2V0VG9wJiYoZC5vZmZzZXQudG9wPWQub2Zmc2V0VG9wKSxiLmNhbGwoYyxkKX0pfSl9KGpRdWVyeSk7IiwiLyogcGVyZmVjdC1zY3JvbGxiYXIgdjAuNi4xMiAqL1xuIWZ1bmN0aW9uIHQoZSxuLHIpe2Z1bmN0aW9uIG8obCxhKXtpZighbltsXSl7aWYoIWVbbF0pe3ZhciBzPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJnMpcmV0dXJuIHMobCwhMCk7aWYoaSlyZXR1cm4gaShsLCEwKTt2YXIgYz1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2wrXCInXCIpO3Rocm93IGMuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixjfXZhciB1PW5bbF09e2V4cG9ydHM6e319O2VbbF1bMF0uY2FsbCh1LmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIG49ZVtsXVsxXVt0XTtyZXR1cm4gbyhuP246dCl9LHUsdS5leHBvcnRzLHQsZSxuLHIpfXJldHVybiBuW2xdLmV4cG9ydHN9Zm9yKHZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsbD0wO2w8ci5sZW5ndGg7bCsrKW8ocltsXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0KXt0LmZuLnBlcmZlY3RTY3JvbGxiYXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0fHxcInVuZGVmaW5lZFwiPT10eXBlb2YgdCl7dmFyIGU9dDtpLmdldCh0aGlzKXx8by5pbml0aWFsaXplKHRoaXMsZSl9ZWxzZXt2YXIgbj10O1widXBkYXRlXCI9PT1uP28udXBkYXRlKHRoaXMpOlwiZGVzdHJveVwiPT09biYmby5kZXN0cm95KHRoaXMpfX0pfX12YXIgbz10KFwiLi4vbWFpblwiKSxpPXQoXCIuLi9wbHVnaW4vaW5zdGFuY2VzXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW1wianF1ZXJ5XCJdLHIpO2Vsc2V7dmFyIGw9d2luZG93LmpRdWVyeT93aW5kb3cualF1ZXJ5OndpbmRvdy4kO1widW5kZWZpbmVkXCIhPXR5cGVvZiBsJiZyKGwpfWUuZXhwb3J0cz1yfSx7XCIuLi9tYWluXCI6NyxcIi4uL3BsdWdpbi9pbnN0YW5jZXNcIjoxOH1dLDI6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7dmFyIG49dC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO24uaW5kZXhPZihlKTwwJiZuLnB1c2goZSksdC5jbGFzc05hbWU9bi5qb2luKFwiIFwiKX1mdW5jdGlvbiBvKHQsZSl7dmFyIG49dC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLHI9bi5pbmRleE9mKGUpO3I+PTAmJm4uc3BsaWNlKHIsMSksdC5jbGFzc05hbWU9bi5qb2luKFwiIFwiKX1uLmFkZD1mdW5jdGlvbih0LGUpe3QuY2xhc3NMaXN0P3QuY2xhc3NMaXN0LmFkZChlKTpyKHQsZSl9LG4ucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dC5jbGFzc0xpc3Q/dC5jbGFzc0xpc3QucmVtb3ZlKGUpOm8odCxlKX0sbi5saXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNsYXNzTGlzdD9BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkodC5jbGFzc0xpc3QpOnQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKX19LHt9XSwzOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe3JldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KVtlXX1mdW5jdGlvbiBvKHQsZSxuKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgbiYmKG49bi50b1N0cmluZygpK1wicHhcIiksdC5zdHlsZVtlXT1uLHR9ZnVuY3Rpb24gaSh0LGUpe2Zvcih2YXIgbiBpbiBlKXt2YXIgcj1lW25dO1wibnVtYmVyXCI9PXR5cGVvZiByJiYocj1yLnRvU3RyaW5nKCkrXCJweFwiKSx0LnN0eWxlW25dPXJ9cmV0dXJuIHR9dmFyIGw9e307bC5lPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtyZXR1cm4gbi5jbGFzc05hbWU9ZSxufSxsLmFwcGVuZFRvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuYXBwZW5kQ2hpbGQodCksdH0sbC5jc3M9ZnVuY3Rpb24odCxlLG4pe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlP2kodCxlKTpcInVuZGVmaW5lZFwiPT10eXBlb2Ygbj9yKHQsZSk6byh0LGUsbil9LGwubWF0Y2hlcz1mdW5jdGlvbih0LGUpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB0Lm1hdGNoZXM/dC5tYXRjaGVzKGUpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0Lm1hdGNoZXNTZWxlY3Rvcj90Lm1hdGNoZXNTZWxlY3RvcihlKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdC53ZWJraXRNYXRjaGVzU2VsZWN0b3I/dC53ZWJraXRNYXRjaGVzU2VsZWN0b3IoZSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQubW96TWF0Y2hlc1NlbGVjdG9yP3QubW96TWF0Y2hlc1NlbGVjdG9yKGUpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0Lm1zTWF0Y2hlc1NlbGVjdG9yP3QubXNNYXRjaGVzU2VsZWN0b3IoZSk6dm9pZCAwfSxsLnJlbW92ZT1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5yZW1vdmU/dC5yZW1vdmUoKTp0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX0sbC5xdWVyeUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0LmNoaWxkTm9kZXMsZnVuY3Rpb24odCl7cmV0dXJuIGwubWF0Y2hlcyh0LGUpfSl9LGUuZXhwb3J0cz1sfSx7fV0sNDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPWZ1bmN0aW9uKHQpe3RoaXMuZWxlbWVudD10LHRoaXMuZXZlbnRzPXt9fTtyLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHQsZSl7XCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXMuZXZlbnRzW3RdJiYodGhpcy5ldmVudHNbdF09W10pLHRoaXMuZXZlbnRzW3RdLnB1c2goZSksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodCxlLCExKX0sci5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKHQsZSl7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGU7dGhpcy5ldmVudHNbdF09dGhpcy5ldmVudHNbdF0uZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBuJiZyIT09ZT8hMDoodGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodCxyLCExKSwhMSl9LHRoaXMpfSxyLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5ldmVudHMpdGhpcy51bmJpbmQodCl9O3ZhciBvPWZ1bmN0aW9uKCl7dGhpcy5ldmVudEVsZW1lbnRzPVtdfTtvLnByb3RvdHlwZS5ldmVudEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ldmVudEVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5lbGVtZW50PT09dH0pWzBdO3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBlJiYoZT1uZXcgcih0KSx0aGlzLmV2ZW50RWxlbWVudHMucHVzaChlKSksZX0sby5wcm90b3R5cGUuYmluZD1mdW5jdGlvbih0LGUsbil7dGhpcy5ldmVudEVsZW1lbnQodCkuYmluZChlLG4pfSxvLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuZXZlbnRFbGVtZW50KHQpLnVuYmluZChlLG4pfSxvLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuZXZlbnRFbGVtZW50cy5sZW5ndGg7dCsrKXRoaXMuZXZlbnRFbGVtZW50c1t0XS51bmJpbmRBbGwoKX0sby5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5ldmVudEVsZW1lbnQodCksbz1mdW5jdGlvbih0KXtyLnVuYmluZChlLG8pLG4odCl9O3IuYmluZChlLG8pfSxlLmV4cG9ydHM9b30se31dLDU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cmV0dXJuIE1hdGguZmxvb3IoNjU1MzYqKDErTWF0aC5yYW5kb20oKSkpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQoKSt0KCkrXCItXCIrdCgpK1wiLVwiK3QoKStcIi1cIit0KCkrXCItXCIrdCgpK3QoKSt0KCl9fSgpfSx7fV0sNjpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuL2NsYXNzXCIpLG89dChcIi4vZG9tXCIpLGk9bi50b0ludD1mdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCwxMCl8fDB9LGw9bi5jbG9uZT1mdW5jdGlvbih0KXtpZihudWxsPT09dClyZXR1cm4gbnVsbDtpZih0LmNvbnN0cnVjdG9yPT09QXJyYXkpcmV0dXJuIHQubWFwKGwpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW25dPWwodFtuXSk7cmV0dXJuIGV9cmV0dXJuIHR9O24uZXh0ZW5kPWZ1bmN0aW9uKHQsZSl7dmFyIG49bCh0KTtmb3IodmFyIHIgaW4gZSluW3JdPWwoZVtyXSk7cmV0dXJuIG59LG4uaXNFZGl0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gby5tYXRjaGVzKHQsXCJpbnB1dCxbY29udGVudGVkaXRhYmxlXVwiKXx8by5tYXRjaGVzKHQsXCJzZWxlY3QsW2NvbnRlbnRlZGl0YWJsZV1cIil8fG8ubWF0Y2hlcyh0LFwidGV4dGFyZWEsW2NvbnRlbnRlZGl0YWJsZV1cIil8fG8ubWF0Y2hlcyh0LFwiYnV0dG9uLFtjb250ZW50ZWRpdGFibGVdXCIpfSxuLnJlbW92ZVBzQ2xhc3Nlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9ci5saXN0KHQpLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTswPT09by5pbmRleE9mKFwicHMtXCIpJiZyLnJlbW92ZSh0LG8pfX0sbi5vdXRlcldpZHRoPWZ1bmN0aW9uKHQpe3JldHVybiBpKG8uY3NzKHQsXCJ3aWR0aFwiKSkraShvLmNzcyh0LFwicGFkZGluZ0xlZnRcIikpK2koby5jc3ModCxcInBhZGRpbmdSaWdodFwiKSkraShvLmNzcyh0LFwiYm9yZGVyTGVmdFdpZHRoXCIpKStpKG8uY3NzKHQsXCJib3JkZXJSaWdodFdpZHRoXCIpKX0sbi5zdGFydFNjcm9sbGluZz1mdW5jdGlvbih0LGUpe3IuYWRkKHQsXCJwcy1pbi1zY3JvbGxpbmdcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGU/ci5hZGQodCxcInBzLVwiK2UpOihyLmFkZCh0LFwicHMteFwiKSxyLmFkZCh0LFwicHMteVwiKSl9LG4uc3RvcFNjcm9sbGluZz1mdW5jdGlvbih0LGUpe3IucmVtb3ZlKHQsXCJwcy1pbi1zY3JvbGxpbmdcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGU/ci5yZW1vdmUodCxcInBzLVwiK2UpOihyLnJlbW92ZSh0LFwicHMteFwiKSxyLnJlbW92ZSh0LFwicHMteVwiKSl9LG4uZW52PXtpc1dlYktpdDpcIldlYmtpdEFwcGVhcmFuY2VcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxzdXBwb3J0c1RvdWNoOlwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3d8fHdpbmRvdy5Eb2N1bWVudFRvdWNoJiZkb2N1bWVudCBpbnN0YW5jZW9mIHdpbmRvdy5Eb2N1bWVudFRvdWNoLHN1cHBvcnRzSWVQb2ludGVyOm51bGwhPT13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHN9fSx7XCIuL2NsYXNzXCI6MixcIi4vZG9tXCI6M31dLDc6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi9wbHVnaW4vZGVzdHJveVwiKSxvPXQoXCIuL3BsdWdpbi9pbml0aWFsaXplXCIpLGk9dChcIi4vcGx1Z2luL3VwZGF0ZVwiKTtlLmV4cG9ydHM9e2luaXRpYWxpemU6byx1cGRhdGU6aSxkZXN0cm95OnJ9fSx7XCIuL3BsdWdpbi9kZXN0cm95XCI6OSxcIi4vcGx1Z2luL2luaXRpYWxpemVcIjoxNyxcIi4vcGx1Z2luL3VwZGF0ZVwiOjIxfV0sODpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuZXhwb3J0cz17aGFuZGxlcnM6W1wiY2xpY2stcmFpbFwiLFwiZHJhZy1zY3JvbGxiYXJcIixcImtleWJvYXJkXCIsXCJ3aGVlbFwiLFwidG91Y2hcIl0sbWF4U2Nyb2xsYmFyTGVuZ3RoOm51bGwsbWluU2Nyb2xsYmFyTGVuZ3RoOm51bGwsc2Nyb2xsWE1hcmdpbk9mZnNldDowLHNjcm9sbFlNYXJnaW5PZmZzZXQ6MCxzdG9wUHJvcGFnYXRpb25PbkNsaWNrOiEwLHN1cHByZXNzU2Nyb2xsWDohMSxzdXBwcmVzc1Njcm9sbFk6ITEsc3dpcGVQcm9wYWdhdGlvbjohMCx1c2VCb3RoV2hlZWxBeGVzOiExLHdoZWVsUHJvcGFnYXRpb246ITEsd2hlZWxTcGVlZDoxLHRoZW1lOlwiZGVmYXVsdFwifX0se31dLDk6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KFwiLi4vbGliL2hlbHBlclwiKSxvPXQoXCIuLi9saWIvZG9tXCIpLGk9dChcIi4vaW5zdGFuY2VzXCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1pLmdldCh0KTtlJiYoZS5ldmVudC51bmJpbmRBbGwoKSxvLnJlbW92ZShlLnNjcm9sbGJhclgpLG8ucmVtb3ZlKGUuc2Nyb2xsYmFyWSksby5yZW1vdmUoZS5zY3JvbGxiYXJYUmFpbCksby5yZW1vdmUoZS5zY3JvbGxiYXJZUmFpbCksci5yZW1vdmVQc0NsYXNzZXModCksaS5yZW1vdmUodCkpfX0se1wiLi4vbGliL2RvbVwiOjMsXCIuLi9saWIvaGVscGVyXCI6NixcIi4vaW5zdGFuY2VzXCI6MTh9XSwxMDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfXZhciByPWZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9O2Uuc2V0dGluZ3Muc3RvcFByb3BhZ2F0aW9uT25DbGljayYmZS5ldmVudC5iaW5kKGUuc2Nyb2xsYmFyWSxcImNsaWNrXCIsciksZS5ldmVudC5iaW5kKGUuc2Nyb2xsYmFyWVJhaWwsXCJjbGlja1wiLGZ1bmN0aW9uKHIpe3ZhciBpPW8udG9JbnQoZS5zY3JvbGxiYXJZSGVpZ2h0LzIpLHM9ZS5yYWlsWVJhdGlvKihyLnBhZ2VZLXdpbmRvdy5wYWdlWU9mZnNldC1uKGUuc2Nyb2xsYmFyWVJhaWwpLnRvcC1pKSxjPWUucmFpbFlSYXRpbyooZS5yYWlsWUhlaWdodC1lLnNjcm9sbGJhcllIZWlnaHQpLHU9cy9jOzA+dT91PTA6dT4xJiYodT0xKSxhKHQsXCJ0b3BcIiwoZS5jb250ZW50SGVpZ2h0LWUuY29udGFpbmVySGVpZ2h0KSp1KSxsKHQpLHIuc3RvcFByb3BhZ2F0aW9uKCl9KSxlLnNldHRpbmdzLnN0b3BQcm9wYWdhdGlvbk9uQ2xpY2smJmUuZXZlbnQuYmluZChlLnNjcm9sbGJhclgsXCJjbGlja1wiLHIpLGUuZXZlbnQuYmluZChlLnNjcm9sbGJhclhSYWlsLFwiY2xpY2tcIixmdW5jdGlvbihyKXt2YXIgaT1vLnRvSW50KGUuc2Nyb2xsYmFyWFdpZHRoLzIpLHM9ZS5yYWlsWFJhdGlvKihyLnBhZ2VYLXdpbmRvdy5wYWdlWE9mZnNldC1uKGUuc2Nyb2xsYmFyWFJhaWwpLmxlZnQtaSksYz1lLnJhaWxYUmF0aW8qKGUucmFpbFhXaWR0aC1lLnNjcm9sbGJhclhXaWR0aCksdT1zL2M7MD51P3U9MDp1PjEmJih1PTEpLGEodCxcImxlZnRcIiwoZS5jb250ZW50V2lkdGgtZS5jb250YWluZXJXaWR0aCkqdS1lLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCksbCh0KSxyLnN0b3BQcm9wYWdhdGlvbigpfSl9dmFyIG89dChcIi4uLy4uL2xpYi9oZWxwZXJcIiksaT10KFwiLi4vaW5zdGFuY2VzXCIpLGw9dChcIi4uL3VwZGF0ZS1nZW9tZXRyeVwiKSxhPXQoXCIuLi91cGRhdGUtc2Nyb2xsXCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1pLmdldCh0KTtyKHQsZSl9fSx7XCIuLi8uLi9saWIvaGVscGVyXCI6NixcIi4uL2luc3RhbmNlc1wiOjE4LFwiLi4vdXBkYXRlLWdlb21ldHJ5XCI6MTksXCIuLi91cGRhdGUtc2Nyb2xsXCI6MjB9XSwxMTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtmdW5jdGlvbiBuKG4pe3ZhciBvPXIrbiplLnJhaWxYUmF0aW8sbD1NYXRoLm1heCgwLGUuc2Nyb2xsYmFyWFJhaWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkrZS5yYWlsWFJhdGlvKihlLnJhaWxYV2lkdGgtZS5zY3JvbGxiYXJYV2lkdGgpOzA+bz9lLnNjcm9sbGJhclhMZWZ0PTA6bz5sP2Uuc2Nyb2xsYmFyWExlZnQ9bDplLnNjcm9sbGJhclhMZWZ0PW87dmFyIGE9aS50b0ludChlLnNjcm9sbGJhclhMZWZ0KihlLmNvbnRlbnRXaWR0aC1lLmNvbnRhaW5lcldpZHRoKS8oZS5jb250YWluZXJXaWR0aC1lLnJhaWxYUmF0aW8qZS5zY3JvbGxiYXJYV2lkdGgpKS1lLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudDtjKHQsXCJsZWZ0XCIsYSl9dmFyIHI9bnVsbCxvPW51bGwsYT1mdW5jdGlvbihlKXtuKGUucGFnZVgtbykscyh0KSxlLnN0b3BQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKX0sdT1mdW5jdGlvbigpe2kuc3RvcFNjcm9sbGluZyh0LFwieFwiKSxlLmV2ZW50LnVuYmluZChlLm93bmVyRG9jdW1lbnQsXCJtb3VzZW1vdmVcIixhKX07ZS5ldmVudC5iaW5kKGUuc2Nyb2xsYmFyWCxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKG4pe289bi5wYWdlWCxyPWkudG9JbnQobC5jc3MoZS5zY3JvbGxiYXJYLFwibGVmdFwiKSkqZS5yYWlsWFJhdGlvLGkuc3RhcnRTY3JvbGxpbmcodCxcInhcIiksZS5ldmVudC5iaW5kKGUub3duZXJEb2N1bWVudCxcIm1vdXNlbW92ZVwiLGEpLGUuZXZlbnQub25jZShlLm93bmVyRG9jdW1lbnQsXCJtb3VzZXVwXCIsdSksbi5zdG9wUHJvcGFnYXRpb24oKSxuLnByZXZlbnREZWZhdWx0KCl9KX1mdW5jdGlvbiBvKHQsZSl7ZnVuY3Rpb24gbihuKXt2YXIgbz1yK24qZS5yYWlsWVJhdGlvLGw9TWF0aC5tYXgoMCxlLnNjcm9sbGJhcllSYWlsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkrZS5yYWlsWVJhdGlvKihlLnJhaWxZSGVpZ2h0LWUuc2Nyb2xsYmFyWUhlaWdodCk7MD5vP2Uuc2Nyb2xsYmFyWVRvcD0wOm8+bD9lLnNjcm9sbGJhcllUb3A9bDplLnNjcm9sbGJhcllUb3A9bzt2YXIgYT1pLnRvSW50KGUuc2Nyb2xsYmFyWVRvcCooZS5jb250ZW50SGVpZ2h0LWUuY29udGFpbmVySGVpZ2h0KS8oZS5jb250YWluZXJIZWlnaHQtZS5yYWlsWVJhdGlvKmUuc2Nyb2xsYmFyWUhlaWdodCkpO2ModCxcInRvcFwiLGEpfXZhciByPW51bGwsbz1udWxsLGE9ZnVuY3Rpb24oZSl7bihlLnBhZ2VZLW8pLHModCksZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCl9LHU9ZnVuY3Rpb24oKXtpLnN0b3BTY3JvbGxpbmcodCxcInlcIiksZS5ldmVudC51bmJpbmQoZS5vd25lckRvY3VtZW50LFwibW91c2Vtb3ZlXCIsYSl9O2UuZXZlbnQuYmluZChlLnNjcm9sbGJhclksXCJtb3VzZWRvd25cIixmdW5jdGlvbihuKXtvPW4ucGFnZVkscj1pLnRvSW50KGwuY3NzKGUuc2Nyb2xsYmFyWSxcInRvcFwiKSkqZS5yYWlsWVJhdGlvLGkuc3RhcnRTY3JvbGxpbmcodCxcInlcIiksZS5ldmVudC5iaW5kKGUub3duZXJEb2N1bWVudCxcIm1vdXNlbW92ZVwiLGEpLGUuZXZlbnQub25jZShlLm93bmVyRG9jdW1lbnQsXCJtb3VzZXVwXCIsdSksbi5zdG9wUHJvcGFnYXRpb24oKSxuLnByZXZlbnREZWZhdWx0KCl9KX12YXIgaT10KFwiLi4vLi4vbGliL2hlbHBlclwiKSxsPXQoXCIuLi8uLi9saWIvZG9tXCIpLGE9dChcIi4uL2luc3RhbmNlc1wiKSxzPXQoXCIuLi91cGRhdGUtZ2VvbWV0cnlcIiksYz10KFwiLi4vdXBkYXRlLXNjcm9sbFwiKTtlLmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9YS5nZXQodCk7cih0LGUpLG8odCxlKX19LHtcIi4uLy4uL2xpYi9kb21cIjozLFwiLi4vLi4vbGliL2hlbHBlclwiOjYsXCIuLi9pbnN0YW5jZXNcIjoxOCxcIi4uL3VwZGF0ZS1nZW9tZXRyeVwiOjE5LFwiLi4vdXBkYXRlLXNjcm9sbFwiOjIwfV0sMTI6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7ZnVuY3Rpb24gbihuLHIpe3ZhciBvPXQuc2Nyb2xsVG9wO2lmKDA9PT1uKXtpZighZS5zY3JvbGxiYXJZQWN0aXZlKXJldHVybiExO2lmKDA9PT1vJiZyPjB8fG8+PWUuY29udGVudEhlaWdodC1lLmNvbnRhaW5lckhlaWdodCYmMD5yKXJldHVybiFlLnNldHRpbmdzLndoZWVsUHJvcGFnYXRpb259dmFyIGk9dC5zY3JvbGxMZWZ0O2lmKDA9PT1yKXtpZighZS5zY3JvbGxiYXJYQWN0aXZlKXJldHVybiExO2lmKDA9PT1pJiYwPm58fGk+PWUuY29udGVudFdpZHRoLWUuY29udGFpbmVyV2lkdGgmJm4+MClyZXR1cm4hZS5zZXR0aW5ncy53aGVlbFByb3BhZ2F0aW9ufXJldHVybiEwfXZhciByPSExO2UuZXZlbnQuYmluZCh0LFwibW91c2VlbnRlclwiLGZ1bmN0aW9uKCl7cj0hMH0pLGUuZXZlbnQuYmluZCh0LFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKCl7cj0hMX0pO3ZhciBsPSExO2UuZXZlbnQuYmluZChlLm93bmVyRG9jdW1lbnQsXCJrZXlkb3duXCIsZnVuY3Rpb24oYyl7aWYoIShjLmlzRGVmYXVsdFByZXZlbnRlZCYmYy5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yy5kZWZhdWx0UHJldmVudGVkKSl7dmFyIHU9aS5tYXRjaGVzKGUuc2Nyb2xsYmFyWCxcIjpmb2N1c1wiKXx8aS5tYXRjaGVzKGUuc2Nyb2xsYmFyWSxcIjpmb2N1c1wiKTtpZihyfHx1KXt2YXIgZD1kb2N1bWVudC5hY3RpdmVFbGVtZW50P2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ6ZS5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7aWYoZCl7aWYoXCJJRlJBTUVcIj09PWQudGFnTmFtZSlkPWQuY29udGVudERvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7ZWxzZSBmb3IoO2Quc2hhZG93Um9vdDspZD1kLnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudDtpZihvLmlzRWRpdGFibGUoZCkpcmV0dXJufXZhciBwPTAsZj0wO3N3aXRjaChjLndoaWNoKXtjYXNlIDM3OnA9LTMwO2JyZWFrO2Nhc2UgMzg6Zj0zMDticmVhaztjYXNlIDM5OnA9MzA7YnJlYWs7Y2FzZSA0MDpmPS0zMDticmVhaztjYXNlIDMzOmY9OTA7YnJlYWs7Y2FzZSAzMjpmPWMuc2hpZnRLZXk/OTA6LTkwO2JyZWFrO2Nhc2UgMzQ6Zj0tOTA7YnJlYWs7Y2FzZSAzNTpmPWMuY3RybEtleT8tZS5jb250ZW50SGVpZ2h0Oi1lLmNvbnRhaW5lckhlaWdodDticmVhaztjYXNlIDM2OmY9Yy5jdHJsS2V5P3Quc2Nyb2xsVG9wOmUuY29udGFpbmVySGVpZ2h0O2JyZWFrO2RlZmF1bHQ6cmV0dXJufXModCxcInRvcFwiLHQuc2Nyb2xsVG9wLWYpLHModCxcImxlZnRcIix0LnNjcm9sbExlZnQrcCksYSh0KSxsPW4ocCxmKSxsJiZjLnByZXZlbnREZWZhdWx0KCl9fX0pfXZhciBvPXQoXCIuLi8uLi9saWIvaGVscGVyXCIpLGk9dChcIi4uLy4uL2xpYi9kb21cIiksbD10KFwiLi4vaW5zdGFuY2VzXCIpLGE9dChcIi4uL3VwZGF0ZS1nZW9tZXRyeVwiKSxzPXQoXCIuLi91cGRhdGUtc2Nyb2xsXCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1sLmdldCh0KTtyKHQsZSl9fSx7XCIuLi8uLi9saWIvZG9tXCI6MyxcIi4uLy4uL2xpYi9oZWxwZXJcIjo2LFwiLi4vaW5zdGFuY2VzXCI6MTgsXCIuLi91cGRhdGUtZ2VvbWV0cnlcIjoxOSxcIi4uL3VwZGF0ZS1zY3JvbGxcIjoyMH1dLDEzOltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe2Z1bmN0aW9uIG4obixyKXt2YXIgbz10LnNjcm9sbFRvcDtpZigwPT09bil7aWYoIWUuc2Nyb2xsYmFyWUFjdGl2ZSlyZXR1cm4hMTtpZigwPT09byYmcj4wfHxvPj1lLmNvbnRlbnRIZWlnaHQtZS5jb250YWluZXJIZWlnaHQmJjA+cilyZXR1cm4hZS5zZXR0aW5ncy53aGVlbFByb3BhZ2F0aW9ufXZhciBpPXQuc2Nyb2xsTGVmdDtpZigwPT09cil7aWYoIWUuc2Nyb2xsYmFyWEFjdGl2ZSlyZXR1cm4hMTtpZigwPT09aSYmMD5ufHxpPj1lLmNvbnRlbnRXaWR0aC1lLmNvbnRhaW5lcldpZHRoJiZuPjApcmV0dXJuIWUuc2V0dGluZ3Mud2hlZWxQcm9wYWdhdGlvbn1yZXR1cm4hMH1mdW5jdGlvbiByKHQpe3ZhciBlPXQuZGVsdGFYLG49LTEqdC5kZWx0YVk7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBufHwoZT0tMSp0LndoZWVsRGVsdGFYLzYsbj10LndoZWVsRGVsdGFZLzYpLHQuZGVsdGFNb2RlJiYxPT09dC5kZWx0YU1vZGUmJihlKj0xMCxuKj0xMCksZSE9PWUmJm4hPT1uJiYoZT0wLG49dC53aGVlbERlbHRhKSxbZSxuXX1mdW5jdGlvbiBvKGUsbil7dmFyIHI9dC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWE6aG92ZXIsIHNlbGVjdFttdWx0aXBsZV06aG92ZXIsIC5wcy1jaGlsZDpob3ZlclwiKTtpZihyKXtpZihcIlRFWFRBUkVBXCIhPT1yLnRhZ05hbWUmJiF3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyKS5vdmVyZmxvdy5tYXRjaCgvKHNjcm9sbHxhdXRvKS8pKXJldHVybiExO3ZhciBvPXIuc2Nyb2xsSGVpZ2h0LXIuY2xpZW50SGVpZ2h0O2lmKG8+MCYmISgwPT09ci5zY3JvbGxUb3AmJm4+MHx8ci5zY3JvbGxUb3A9PT1vJiYwPm4pKXJldHVybiEwO3ZhciBpPXIuc2Nyb2xsTGVmdC1yLmNsaWVudFdpZHRoO2lmKGk+MCYmISgwPT09ci5zY3JvbGxMZWZ0JiYwPmV8fHIuc2Nyb2xsTGVmdD09PWkmJmU+MCkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gYShhKXt2YXIgYz1yKGEpLHU9Y1swXSxkPWNbMV07byh1LGQpfHwocz0hMSxlLnNldHRpbmdzLnVzZUJvdGhXaGVlbEF4ZXM/ZS5zY3JvbGxiYXJZQWN0aXZlJiYhZS5zY3JvbGxiYXJYQWN0aXZlPyhkP2wodCxcInRvcFwiLHQuc2Nyb2xsVG9wLWQqZS5zZXR0aW5ncy53aGVlbFNwZWVkKTpsKHQsXCJ0b3BcIix0LnNjcm9sbFRvcCt1KmUuc2V0dGluZ3Mud2hlZWxTcGVlZCkscz0hMCk6ZS5zY3JvbGxiYXJYQWN0aXZlJiYhZS5zY3JvbGxiYXJZQWN0aXZlJiYodT9sKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0K3UqZS5zZXR0aW5ncy53aGVlbFNwZWVkKTpsKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0LWQqZS5zZXR0aW5ncy53aGVlbFNwZWVkKSxzPSEwKToobCh0LFwidG9wXCIsdC5zY3JvbGxUb3AtZCplLnNldHRpbmdzLndoZWVsU3BlZWQpLGwodCxcImxlZnRcIix0LnNjcm9sbExlZnQrdSplLnNldHRpbmdzLndoZWVsU3BlZWQpKSxpKHQpLHM9c3x8bih1LGQpLHMmJihhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSkpfXZhciBzPSExO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cub253aGVlbD9lLmV2ZW50LmJpbmQodCxcIndoZWVsXCIsYSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdy5vbm1vdXNld2hlZWwmJmUuZXZlbnQuYmluZCh0LFwibW91c2V3aGVlbFwiLGEpfXZhciBvPXQoXCIuLi9pbnN0YW5jZXNcIiksaT10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpLGw9dChcIi4uL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPW8uZ2V0KHQpO3IodCxlKX19LHtcIi4uL2luc3RhbmNlc1wiOjE4LFwiLi4vdXBkYXRlLWdlb21ldHJ5XCI6MTksXCIuLi91cGRhdGUtc2Nyb2xsXCI6MjB9XSwxNDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlKXtlLmV2ZW50LmJpbmQodCxcInNjcm9sbFwiLGZ1bmN0aW9uKCl7aSh0KX0pfXZhciBvPXQoXCIuLi9pbnN0YW5jZXNcIiksaT10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1vLmdldCh0KTtyKHQsZSl9fSx7XCIuLi9pbnN0YW5jZXNcIjoxOCxcIi4uL3VwZGF0ZS1nZW9tZXRyeVwiOjE5fV0sMTU6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7ZnVuY3Rpb24gbigpe3ZhciB0PXdpbmRvdy5nZXRTZWxlY3Rpb24/d2luZG93LmdldFNlbGVjdGlvbigpOmRvY3VtZW50LmdldFNlbGVjdGlvbj9kb2N1bWVudC5nZXRTZWxlY3Rpb24oKTpcIlwiO3JldHVybiAwPT09dC50b1N0cmluZygpLmxlbmd0aD9udWxsOnQuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcn1mdW5jdGlvbiByKCl7Y3x8KGM9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXQodCk/KGEodCxcInRvcFwiLHQuc2Nyb2xsVG9wK3UudG9wKSxhKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0K3UubGVmdCksdm9pZCBsKHQpKTp2b2lkIGNsZWFySW50ZXJ2YWwoYyl9LDUwKSl9ZnVuY3Rpb24gcygpe2MmJihjbGVhckludGVydmFsKGMpLGM9bnVsbCksby5zdG9wU2Nyb2xsaW5nKHQpfXZhciBjPW51bGwsdT17dG9wOjAsbGVmdDowfSxkPSExO2UuZXZlbnQuYmluZChlLm93bmVyRG9jdW1lbnQsXCJzZWxlY3Rpb25jaGFuZ2VcIixmdW5jdGlvbigpe3QuY29udGFpbnMobigpKT9kPSEwOihkPSExLHMoKSl9KSxlLmV2ZW50LmJpbmQod2luZG93LFwibW91c2V1cFwiLGZ1bmN0aW9uKCl7ZCYmKGQ9ITEscygpKX0pLGUuZXZlbnQuYmluZCh3aW5kb3csXCJtb3VzZW1vdmVcIixmdW5jdGlvbihlKXtpZihkKXt2YXIgbj17eDplLnBhZ2VYLHk6ZS5wYWdlWX0saT17bGVmdDp0Lm9mZnNldExlZnQscmlnaHQ6dC5vZmZzZXRMZWZ0K3Qub2Zmc2V0V2lkdGgsdG9wOnQub2Zmc2V0VG9wLGJvdHRvbTp0Lm9mZnNldFRvcCt0Lm9mZnNldEhlaWdodH07bi54PGkubGVmdCszPyh1LmxlZnQ9LTUsby5zdGFydFNjcm9sbGluZyh0LFwieFwiKSk6bi54PmkucmlnaHQtMz8odS5sZWZ0PTUsby5zdGFydFNjcm9sbGluZyh0LFwieFwiKSk6dS5sZWZ0PTAsbi55PGkudG9wKzM/KGkudG9wKzMtbi55PDU/dS50b3A9LTU6dS50b3A9LTIwLG8uc3RhcnRTY3JvbGxpbmcodCxcInlcIikpOm4ueT5pLmJvdHRvbS0zPyhuLnktaS5ib3R0b20rMzw1P3UudG9wPTU6dS50b3A9MjAsby5zdGFydFNjcm9sbGluZyh0LFwieVwiKSk6dS50b3A9MCwwPT09dS50b3AmJjA9PT11LmxlZnQ/cygpOnIoKX19KX12YXIgbz10KFwiLi4vLi4vbGliL2hlbHBlclwiKSxpPXQoXCIuLi9pbnN0YW5jZXNcIiksbD10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpLGE9dChcIi4uL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0KHQpO3IodCxlKX19LHtcIi4uLy4uL2xpYi9oZWxwZXJcIjo2LFwiLi4vaW5zdGFuY2VzXCI6MTgsXCIuLi91cGRhdGUtZ2VvbWV0cnlcIjoxOSxcIi4uL3VwZGF0ZS1zY3JvbGxcIjoyMH1dLDE2OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUsbixyKXtmdW5jdGlvbiBvKG4scil7dmFyIG89dC5zY3JvbGxUb3AsaT10LnNjcm9sbExlZnQsbD1NYXRoLmFicyhuKSxhPU1hdGguYWJzKHIpO2lmKGE+bCl7aWYoMD5yJiZvPT09ZS5jb250ZW50SGVpZ2h0LWUuY29udGFpbmVySGVpZ2h0fHxyPjAmJjA9PT1vKXJldHVybiFlLnNldHRpbmdzLnN3aXBlUHJvcGFnYXRpb259ZWxzZSBpZihsPmEmJigwPm4mJmk9PT1lLmNvbnRlbnRXaWR0aC1lLmNvbnRhaW5lcldpZHRofHxuPjAmJjA9PT1pKSlyZXR1cm4hZS5zZXR0aW5ncy5zd2lwZVByb3BhZ2F0aW9uO3JldHVybiEwfWZ1bmN0aW9uIHMoZSxuKXthKHQsXCJ0b3BcIix0LnNjcm9sbFRvcC1uKSxhKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0LWUpLGwodCl9ZnVuY3Rpb24gYygpe1k9ITB9ZnVuY3Rpb24gdSgpe1k9ITF9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gdC50YXJnZXRUb3VjaGVzP3QudGFyZ2V0VG91Y2hlc1swXTp0fWZ1bmN0aW9uIHAodCl7cmV0dXJuIHQudGFyZ2V0VG91Y2hlcyYmMT09PXQudGFyZ2V0VG91Y2hlcy5sZW5ndGg/ITA6ISghdC5wb2ludGVyVHlwZXx8XCJtb3VzZVwiPT09dC5wb2ludGVyVHlwZXx8dC5wb2ludGVyVHlwZT09PXQuTVNQT0lOVEVSX1RZUEVfTU9VU0UpfWZ1bmN0aW9uIGYodCl7aWYocCh0KSl7dz0hMDt2YXIgZT1kKHQpO3YucGFnZVg9ZS5wYWdlWCx2LnBhZ2VZPWUucGFnZVksZz0obmV3IERhdGUpLmdldFRpbWUoKSxudWxsIT09eSYmY2xlYXJJbnRlcnZhbCh5KSx0LnN0b3BQcm9wYWdhdGlvbigpfX1mdW5jdGlvbiBoKHQpe2lmKCF3JiZlLnNldHRpbmdzLnN3aXBlUHJvcGFnYXRpb24mJmYodCksIVkmJncmJnAodCkpe3ZhciBuPWQodCkscj17cGFnZVg6bi5wYWdlWCxwYWdlWTpuLnBhZ2VZfSxpPXIucGFnZVgtdi5wYWdlWCxsPXIucGFnZVktdi5wYWdlWTtzKGksbCksdj1yO3ZhciBhPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGM9YS1nO2M+MCYmKG0ueD1pL2MsbS55PWwvYyxnPWEpLG8oaSxsKSYmKHQuc3RvcFByb3BhZ2F0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCgpKX19ZnVuY3Rpb24gYigpeyFZJiZ3JiYodz0hMSxjbGVhckludGVydmFsKHkpLHk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXQodCk/TWF0aC5hYnMobS54KTwuMDEmJk1hdGguYWJzKG0ueSk8LjAxP3ZvaWQgY2xlYXJJbnRlcnZhbCh5KToocygzMCptLngsMzAqbS55KSxtLngqPS44LHZvaWQobS55Kj0uOCkpOnZvaWQgY2xlYXJJbnRlcnZhbCh5KX0sMTApKX12YXIgdj17fSxnPTAsbT17fSx5PW51bGwsWT0hMSx3PSExO24mJihlLmV2ZW50LmJpbmQod2luZG93LFwidG91Y2hzdGFydFwiLGMpLGUuZXZlbnQuYmluZCh3aW5kb3csXCJ0b3VjaGVuZFwiLHUpLGUuZXZlbnQuYmluZCh0LFwidG91Y2hzdGFydFwiLGYpLGUuZXZlbnQuYmluZCh0LFwidG91Y2htb3ZlXCIsaCksZS5ldmVudC5iaW5kKHQsXCJ0b3VjaGVuZFwiLGIpKSxyJiYod2luZG93LlBvaW50ZXJFdmVudD8oZS5ldmVudC5iaW5kKHdpbmRvdyxcInBvaW50ZXJkb3duXCIsYyksZS5ldmVudC5iaW5kKHdpbmRvdyxcInBvaW50ZXJ1cFwiLHUpLGUuZXZlbnQuYmluZCh0LFwicG9pbnRlcmRvd25cIixmKSxlLmV2ZW50LmJpbmQodCxcInBvaW50ZXJtb3ZlXCIsaCksZS5ldmVudC5iaW5kKHQsXCJwb2ludGVydXBcIixiKSk6d2luZG93Lk1TUG9pbnRlckV2ZW50JiYoZS5ldmVudC5iaW5kKHdpbmRvdyxcIk1TUG9pbnRlckRvd25cIixjKSxlLmV2ZW50LmJpbmQod2luZG93LFwiTVNQb2ludGVyVXBcIix1KSxlLmV2ZW50LmJpbmQodCxcIk1TUG9pbnRlckRvd25cIixmKSxlLmV2ZW50LmJpbmQodCxcIk1TUG9pbnRlck1vdmVcIixoKSxlLmV2ZW50LmJpbmQodCxcIk1TUG9pbnRlclVwXCIsYikpKX12YXIgbz10KFwiLi4vLi4vbGliL2hlbHBlclwiKSxpPXQoXCIuLi9pbnN0YW5jZXNcIiksbD10KFwiLi4vdXBkYXRlLWdlb21ldHJ5XCIpLGE9dChcIi4uL3VwZGF0ZS1zY3JvbGxcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKG8uZW52LnN1cHBvcnRzVG91Y2h8fG8uZW52LnN1cHBvcnRzSWVQb2ludGVyKXt2YXIgZT1pLmdldCh0KTtyKHQsZSxvLmVudi5zdXBwb3J0c1RvdWNoLG8uZW52LnN1cHBvcnRzSWVQb2ludGVyKX19fSx7XCIuLi8uLi9saWIvaGVscGVyXCI6NixcIi4uL2luc3RhbmNlc1wiOjE4LFwiLi4vdXBkYXRlLWdlb21ldHJ5XCI6MTksXCIuLi91cGRhdGUtc2Nyb2xsXCI6MjB9XSwxNzpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuLi9saWIvaGVscGVyXCIpLG89dChcIi4uL2xpYi9jbGFzc1wiKSxpPXQoXCIuL2luc3RhbmNlc1wiKSxsPXQoXCIuL3VwZGF0ZS1nZW9tZXRyeVwiKSxhPXtcImNsaWNrLXJhaWxcIjp0KFwiLi9oYW5kbGVyL2NsaWNrLXJhaWxcIiksXCJkcmFnLXNjcm9sbGJhclwiOnQoXCIuL2hhbmRsZXIvZHJhZy1zY3JvbGxiYXJcIiksa2V5Ym9hcmQ6dChcIi4vaGFuZGxlci9rZXlib2FyZFwiKSx3aGVlbDp0KFwiLi9oYW5kbGVyL21vdXNlLXdoZWVsXCIpLHRvdWNoOnQoXCIuL2hhbmRsZXIvdG91Y2hcIiksc2VsZWN0aW9uOnQoXCIuL2hhbmRsZXIvc2VsZWN0aW9uXCIpfSxzPXQoXCIuL2hhbmRsZXIvbmF0aXZlLXNjcm9sbFwiKTtlLmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtlPVwib2JqZWN0XCI9PXR5cGVvZiBlP2U6e30sby5hZGQodCxcInBzLWNvbnRhaW5lclwiKTt2YXIgbj1pLmFkZCh0KTtuLnNldHRpbmdzPXIuZXh0ZW5kKG4uc2V0dGluZ3MsZSksby5hZGQodCxcInBzLXRoZW1lLVwiK24uc2V0dGluZ3MudGhlbWUpLG4uc2V0dGluZ3MuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihlKXthW2VdKHQpfSkscyh0KSxsKHQpfX0se1wiLi4vbGliL2NsYXNzXCI6MixcIi4uL2xpYi9oZWxwZXJcIjo2LFwiLi9oYW5kbGVyL2NsaWNrLXJhaWxcIjoxMCxcIi4vaGFuZGxlci9kcmFnLXNjcm9sbGJhclwiOjExLFwiLi9oYW5kbGVyL2tleWJvYXJkXCI6MTIsXCIuL2hhbmRsZXIvbW91c2Utd2hlZWxcIjoxMyxcIi4vaGFuZGxlci9uYXRpdmUtc2Nyb2xsXCI6MTQsXCIuL2hhbmRsZXIvc2VsZWN0aW9uXCI6MTUsXCIuL2hhbmRsZXIvdG91Y2hcIjoxNixcIi4vaW5zdGFuY2VzXCI6MTgsXCIuL3VwZGF0ZS1nZW9tZXRyeVwiOjE5fV0sMTg6W2Z1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe2Z1bmN0aW9uIGUoKXtzLmFkZCh0LFwicHMtZm9jdXNcIil9ZnVuY3Rpb24gbigpe3MucmVtb3ZlKHQsXCJwcy1mb2N1c1wiKX12YXIgcj10aGlzO3Iuc2V0dGluZ3M9YS5jbG9uZShjKSxyLmNvbnRhaW5lcldpZHRoPW51bGwsci5jb250YWluZXJIZWlnaHQ9bnVsbCxyLmNvbnRlbnRXaWR0aD1udWxsLHIuY29udGVudEhlaWdodD1udWxsLHIuaXNSdGw9XCJydGxcIj09PXUuY3NzKHQsXCJkaXJlY3Rpb25cIiksci5pc05lZ2F0aXZlU2Nyb2xsPWZ1bmN0aW9uKCl7dmFyIGU9dC5zY3JvbGxMZWZ0LG49bnVsbDtyZXR1cm4gdC5zY3JvbGxMZWZ0PS0xLG49dC5zY3JvbGxMZWZ0PDAsdC5zY3JvbGxMZWZ0PWUsbn0oKSxyLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudD1yLmlzTmVnYXRpdmVTY3JvbGw/dC5zY3JvbGxXaWR0aC10LmNsaWVudFdpZHRoOjAsci5ldmVudD1uZXcgZCxyLm93bmVyRG9jdW1lbnQ9dC5vd25lckRvY3VtZW50fHxkb2N1bWVudCxyLnNjcm9sbGJhclhSYWlsPXUuYXBwZW5kVG8odS5lKFwiZGl2XCIsXCJwcy1zY3JvbGxiYXIteC1yYWlsXCIpLHQpLHIuc2Nyb2xsYmFyWD11LmFwcGVuZFRvKHUuZShcImRpdlwiLFwicHMtc2Nyb2xsYmFyLXhcIiksci5zY3JvbGxiYXJYUmFpbCksci5zY3JvbGxiYXJYLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksci5ldmVudC5iaW5kKHIuc2Nyb2xsYmFyWCxcImZvY3VzXCIsZSksci5ldmVudC5iaW5kKHIuc2Nyb2xsYmFyWCxcImJsdXJcIixuKSxyLnNjcm9sbGJhclhBY3RpdmU9bnVsbCxyLnNjcm9sbGJhclhXaWR0aD1udWxsLHIuc2Nyb2xsYmFyWExlZnQ9bnVsbCxyLnNjcm9sbGJhclhCb3R0b209YS50b0ludCh1LmNzcyhyLnNjcm9sbGJhclhSYWlsLFwiYm90dG9tXCIpKSxyLmlzU2Nyb2xsYmFyWFVzaW5nQm90dG9tPXIuc2Nyb2xsYmFyWEJvdHRvbT09PXIuc2Nyb2xsYmFyWEJvdHRvbSxyLnNjcm9sbGJhclhUb3A9ci5pc1Njcm9sbGJhclhVc2luZ0JvdHRvbT9udWxsOmEudG9JbnQodS5jc3Moci5zY3JvbGxiYXJYUmFpbCxcInRvcFwiKSksci5yYWlsQm9yZGVyWFdpZHRoPWEudG9JbnQodS5jc3Moci5zY3JvbGxiYXJYUmFpbCxcImJvcmRlckxlZnRXaWR0aFwiKSkrYS50b0ludCh1LmNzcyhyLnNjcm9sbGJhclhSYWlsLFwiYm9yZGVyUmlnaHRXaWR0aFwiKSksdS5jc3Moci5zY3JvbGxiYXJYUmFpbCxcImRpc3BsYXlcIixcImJsb2NrXCIpLHIucmFpbFhNYXJnaW5XaWR0aD1hLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWFJhaWwsXCJtYXJnaW5MZWZ0XCIpKSthLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWFJhaWwsXCJtYXJnaW5SaWdodFwiKSksdS5jc3Moci5zY3JvbGxiYXJYUmFpbCxcImRpc3BsYXlcIixcIlwiKSxyLnJhaWxYV2lkdGg9bnVsbCxyLnJhaWxYUmF0aW89bnVsbCxyLnNjcm9sbGJhcllSYWlsPXUuYXBwZW5kVG8odS5lKFwiZGl2XCIsXCJwcy1zY3JvbGxiYXIteS1yYWlsXCIpLHQpLHIuc2Nyb2xsYmFyWT11LmFwcGVuZFRvKHUuZShcImRpdlwiLFwicHMtc2Nyb2xsYmFyLXlcIiksci5zY3JvbGxiYXJZUmFpbCksci5zY3JvbGxiYXJZLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksci5ldmVudC5iaW5kKHIuc2Nyb2xsYmFyWSxcImZvY3VzXCIsZSksci5ldmVudC5iaW5kKHIuc2Nyb2xsYmFyWSxcImJsdXJcIixuKSxyLnNjcm9sbGJhcllBY3RpdmU9bnVsbCxyLnNjcm9sbGJhcllIZWlnaHQ9bnVsbCxyLnNjcm9sbGJhcllUb3A9bnVsbCxyLnNjcm9sbGJhcllSaWdodD1hLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWVJhaWwsXCJyaWdodFwiKSksci5pc1Njcm9sbGJhcllVc2luZ1JpZ2h0PXIuc2Nyb2xsYmFyWVJpZ2h0PT09ci5zY3JvbGxiYXJZUmlnaHQsci5zY3JvbGxiYXJZTGVmdD1yLmlzU2Nyb2xsYmFyWVVzaW5nUmlnaHQ/bnVsbDphLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWVJhaWwsXCJsZWZ0XCIpKSxyLnNjcm9sbGJhcllPdXRlcldpZHRoPXIuaXNSdGw/YS5vdXRlcldpZHRoKHIuc2Nyb2xsYmFyWSk6bnVsbCxyLnJhaWxCb3JkZXJZV2lkdGg9YS50b0ludCh1LmNzcyhyLnNjcm9sbGJhcllSYWlsLFwiYm9yZGVyVG9wV2lkdGhcIikpK2EudG9JbnQodS5jc3Moci5zY3JvbGxiYXJZUmFpbCxcImJvcmRlckJvdHRvbVdpZHRoXCIpKSx1LmNzcyhyLnNjcm9sbGJhcllSYWlsLFwiZGlzcGxheVwiLFwiYmxvY2tcIiksci5yYWlsWU1hcmdpbkhlaWdodD1hLnRvSW50KHUuY3NzKHIuc2Nyb2xsYmFyWVJhaWwsXCJtYXJnaW5Ub3BcIikpK2EudG9JbnQodS5jc3Moci5zY3JvbGxiYXJZUmFpbCxcIm1hcmdpbkJvdHRvbVwiKSksdS5jc3Moci5zY3JvbGxiYXJZUmFpbCxcImRpc3BsYXlcIixcIlwiKSxyLnJhaWxZSGVpZ2h0PW51bGwsci5yYWlsWVJhdGlvPW51bGx9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBzLWlkXCIpfWZ1bmN0aW9uIGkodCxlKXt0LnNldEF0dHJpYnV0ZShcImRhdGEtcHMtaWRcIixlKX1mdW5jdGlvbiBsKHQpe3QucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wcy1pZFwiKX12YXIgYT10KFwiLi4vbGliL2hlbHBlclwiKSxzPXQoXCIuLi9saWIvY2xhc3NcIiksYz10KFwiLi9kZWZhdWx0LXNldHRpbmdcIiksdT10KFwiLi4vbGliL2RvbVwiKSxkPXQoXCIuLi9saWIvZXZlbnQtbWFuYWdlclwiKSxwPXQoXCIuLi9saWIvZ3VpZFwiKSxmPXt9O24uYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXAoKTtyZXR1cm4gaSh0LGUpLGZbZV09bmV3IHIodCksZltlXX0sbi5yZW1vdmU9ZnVuY3Rpb24odCl7ZGVsZXRlIGZbbyh0KV0sbCh0KX0sbi5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZbbyh0KV19fSx7XCIuLi9saWIvY2xhc3NcIjoyLFwiLi4vbGliL2RvbVwiOjMsXCIuLi9saWIvZXZlbnQtbWFuYWdlclwiOjQsXCIuLi9saWIvZ3VpZFwiOjUsXCIuLi9saWIvaGVscGVyXCI6NixcIi4vZGVmYXVsdC1zZXR0aW5nXCI6OH1dLDE5OltmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LGUpe3JldHVybiB0LnNldHRpbmdzLm1pblNjcm9sbGJhckxlbmd0aCYmKGU9TWF0aC5tYXgoZSx0LnNldHRpbmdzLm1pblNjcm9sbGJhckxlbmd0aCkpLHQuc2V0dGluZ3MubWF4U2Nyb2xsYmFyTGVuZ3RoJiYoZT1NYXRoLm1pbihlLHQuc2V0dGluZ3MubWF4U2Nyb2xsYmFyTGVuZ3RoKSksZX1mdW5jdGlvbiBvKHQsZSl7dmFyIG49e3dpZHRoOmUucmFpbFhXaWR0aH07ZS5pc1J0bD9uLmxlZnQ9ZS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQrdC5zY3JvbGxMZWZ0K2UuY29udGFpbmVyV2lkdGgtZS5jb250ZW50V2lkdGg6bi5sZWZ0PXQuc2Nyb2xsTGVmdCxlLmlzU2Nyb2xsYmFyWFVzaW5nQm90dG9tP24uYm90dG9tPWUuc2Nyb2xsYmFyWEJvdHRvbS10LnNjcm9sbFRvcDpuLnRvcD1lLnNjcm9sbGJhclhUb3ArdC5zY3JvbGxUb3AsYS5jc3MoZS5zY3JvbGxiYXJYUmFpbCxuKTt2YXIgcj17dG9wOnQuc2Nyb2xsVG9wLGhlaWdodDplLnJhaWxZSGVpZ2h0fTtlLmlzU2Nyb2xsYmFyWVVzaW5nUmlnaHQ/ZS5pc1J0bD9yLnJpZ2h0PWUuY29udGVudFdpZHRoLShlLm5lZ2F0aXZlU2Nyb2xsQWRqdXN0bWVudCt0LnNjcm9sbExlZnQpLWUuc2Nyb2xsYmFyWVJpZ2h0LWUuc2Nyb2xsYmFyWU91dGVyV2lkdGg6ci5yaWdodD1lLnNjcm9sbGJhcllSaWdodC10LnNjcm9sbExlZnQ6ZS5pc1J0bD9yLmxlZnQ9ZS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQrdC5zY3JvbGxMZWZ0KzIqZS5jb250YWluZXJXaWR0aC1lLmNvbnRlbnRXaWR0aC1lLnNjcm9sbGJhcllMZWZ0LWUuc2Nyb2xsYmFyWU91dGVyV2lkdGg6ci5sZWZ0PWUuc2Nyb2xsYmFyWUxlZnQrdC5zY3JvbGxMZWZ0LGEuY3NzKGUuc2Nyb2xsYmFyWVJhaWwsciksYS5jc3MoZS5zY3JvbGxiYXJYLHtsZWZ0OmUuc2Nyb2xsYmFyWExlZnQsd2lkdGg6ZS5zY3JvbGxiYXJYV2lkdGgtZS5yYWlsQm9yZGVyWFdpZHRofSksYS5jc3MoZS5zY3JvbGxiYXJZLHt0b3A6ZS5zY3JvbGxiYXJZVG9wLGhlaWdodDplLnNjcm9sbGJhcllIZWlnaHQtZS5yYWlsQm9yZGVyWVdpZHRofSl9dmFyIGk9dChcIi4uL2xpYi9oZWxwZXJcIiksbD10KFwiLi4vbGliL2NsYXNzXCIpLGE9dChcIi4uL2xpYi9kb21cIikscz10KFwiLi9pbnN0YW5jZXNcIiksYz10KFwiLi91cGRhdGUtc2Nyb2xsXCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1zLmdldCh0KTtlLmNvbnRhaW5lcldpZHRoPXQuY2xpZW50V2lkdGgsZS5jb250YWluZXJIZWlnaHQ9dC5jbGllbnRIZWlnaHQsZS5jb250ZW50V2lkdGg9dC5zY3JvbGxXaWR0aCxlLmNvbnRlbnRIZWlnaHQ9dC5zY3JvbGxIZWlnaHQ7dmFyIG47dC5jb250YWlucyhlLnNjcm9sbGJhclhSYWlsKXx8KG49YS5xdWVyeUNoaWxkcmVuKHQsXCIucHMtc2Nyb2xsYmFyLXgtcmFpbFwiKSxuLmxlbmd0aD4wJiZuLmZvckVhY2goZnVuY3Rpb24odCl7YS5yZW1vdmUodCl9KSxhLmFwcGVuZFRvKGUuc2Nyb2xsYmFyWFJhaWwsdCkpLHQuY29udGFpbnMoZS5zY3JvbGxiYXJZUmFpbCl8fChuPWEucXVlcnlDaGlsZHJlbih0LFwiLnBzLXNjcm9sbGJhci15LXJhaWxcIiksbi5sZW5ndGg+MCYmbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe2EucmVtb3ZlKHQpfSksYS5hcHBlbmRUbyhlLnNjcm9sbGJhcllSYWlsLHQpKSwhZS5zZXR0aW5ncy5zdXBwcmVzc1Njcm9sbFgmJmUuY29udGFpbmVyV2lkdGgrZS5zZXR0aW5ncy5zY3JvbGxYTWFyZ2luT2Zmc2V0PGUuY29udGVudFdpZHRoPyhlLnNjcm9sbGJhclhBY3RpdmU9ITAsZS5yYWlsWFdpZHRoPWUuY29udGFpbmVyV2lkdGgtZS5yYWlsWE1hcmdpbldpZHRoLGUucmFpbFhSYXRpbz1lLmNvbnRhaW5lcldpZHRoL2UucmFpbFhXaWR0aCxlLnNjcm9sbGJhclhXaWR0aD1yKGUsaS50b0ludChlLnJhaWxYV2lkdGgqZS5jb250YWluZXJXaWR0aC9lLmNvbnRlbnRXaWR0aCkpLGUuc2Nyb2xsYmFyWExlZnQ9aS50b0ludCgoZS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQrdC5zY3JvbGxMZWZ0KSooZS5yYWlsWFdpZHRoLWUuc2Nyb2xsYmFyWFdpZHRoKS8oZS5jb250ZW50V2lkdGgtZS5jb250YWluZXJXaWR0aCkpKTplLnNjcm9sbGJhclhBY3RpdmU9ITEsIWUuc2V0dGluZ3Muc3VwcHJlc3NTY3JvbGxZJiZlLmNvbnRhaW5lckhlaWdodCtlLnNldHRpbmdzLnNjcm9sbFlNYXJnaW5PZmZzZXQ8ZS5jb250ZW50SGVpZ2h0PyhlLnNjcm9sbGJhcllBY3RpdmU9ITAsZS5yYWlsWUhlaWdodD1lLmNvbnRhaW5lckhlaWdodC1lLnJhaWxZTWFyZ2luSGVpZ2h0LGUucmFpbFlSYXRpbz1lLmNvbnRhaW5lckhlaWdodC9lLnJhaWxZSGVpZ2h0LGUuc2Nyb2xsYmFyWUhlaWdodD1yKGUsaS50b0ludChlLnJhaWxZSGVpZ2h0KmUuY29udGFpbmVySGVpZ2h0L2UuY29udGVudEhlaWdodCkpLGUuc2Nyb2xsYmFyWVRvcD1pLnRvSW50KHQuc2Nyb2xsVG9wKihlLnJhaWxZSGVpZ2h0LWUuc2Nyb2xsYmFyWUhlaWdodCkvKGUuY29udGVudEhlaWdodC1lLmNvbnRhaW5lckhlaWdodCkpKTplLnNjcm9sbGJhcllBY3RpdmU9ITEsZS5zY3JvbGxiYXJYTGVmdD49ZS5yYWlsWFdpZHRoLWUuc2Nyb2xsYmFyWFdpZHRoJiYoZS5zY3JvbGxiYXJYTGVmdD1lLnJhaWxYV2lkdGgtZS5zY3JvbGxiYXJYV2lkdGgpLGUuc2Nyb2xsYmFyWVRvcD49ZS5yYWlsWUhlaWdodC1lLnNjcm9sbGJhcllIZWlnaHQmJihlLnNjcm9sbGJhcllUb3A9ZS5yYWlsWUhlaWdodC1lLnNjcm9sbGJhcllIZWlnaHQpLG8odCxlKSxlLnNjcm9sbGJhclhBY3RpdmU/bC5hZGQodCxcInBzLWFjdGl2ZS14XCIpOihsLnJlbW92ZSh0LFwicHMtYWN0aXZlLXhcIiksZS5zY3JvbGxiYXJYV2lkdGg9MCxlLnNjcm9sbGJhclhMZWZ0PTAsYyh0LFwibGVmdFwiLDApKSxlLnNjcm9sbGJhcllBY3RpdmU/bC5hZGQodCxcInBzLWFjdGl2ZS15XCIpOihsLnJlbW92ZSh0LFwicHMtYWN0aXZlLXlcIiksZS5zY3JvbGxiYXJZSGVpZ2h0PTAsZS5zY3JvbGxiYXJZVG9wPTAsYyh0LFwidG9wXCIsMCkpfX0se1wiLi4vbGliL2NsYXNzXCI6MixcIi4uL2xpYi9kb21cIjozLFwiLi4vbGliL2hlbHBlclwiOjYsXCIuL2luc3RhbmNlc1wiOjE4LFwiLi91cGRhdGUtc2Nyb2xsXCI6MjB9XSwyMDpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLG8saT10KFwiLi9pbnN0YW5jZXNcIiksbD1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGE9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxzPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIiksYz1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLHU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikscD1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpLGY9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSxoPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIiksYj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO2wuaW5pdEV2ZW50KFwicHMtc2Nyb2xsLXVwXCIsITAsITApLGEuaW5pdEV2ZW50KFwicHMtc2Nyb2xsLWRvd25cIiwhMCwhMCkscy5pbml0RXZlbnQoXCJwcy1zY3JvbGwtbGVmdFwiLCEwLCEwKSxjLmluaXRFdmVudChcInBzLXNjcm9sbC1yaWdodFwiLCEwLCEwKSx1LmluaXRFdmVudChcInBzLXNjcm9sbC15XCIsITAsITApLGQuaW5pdEV2ZW50KFwicHMtc2Nyb2xsLXhcIiwhMCwhMCkscC5pbml0RXZlbnQoXCJwcy14LXJlYWNoLXN0YXJ0XCIsITAsITApLGYuaW5pdEV2ZW50KFwicHMteC1yZWFjaC1lbmRcIiwhMCwhMCksaC5pbml0RXZlbnQoXCJwcy15LXJlYWNoLXN0YXJ0XCIsITAsITApLGIuaW5pdEV2ZW50KFwicHMteS1yZWFjaC1lbmRcIiwhMCwhMCksZS5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgdCl0aHJvd1wiWW91IG11c3QgcHJvdmlkZSBhbiBlbGVtZW50IHRvIHRoZSB1cGRhdGUtc2Nyb2xsIGZ1bmN0aW9uXCI7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGUpdGhyb3dcIllvdSBtdXN0IHByb3ZpZGUgYW4gYXhpcyB0byB0aGUgdXBkYXRlLXNjcm9sbCBmdW5jdGlvblwiO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuKXRocm93XCJZb3UgbXVzdCBwcm92aWRlIGEgdmFsdWUgdG8gdGhlIHVwZGF0ZS1zY3JvbGwgZnVuY3Rpb25cIjtcInRvcFwiPT09ZSYmMD49biYmKHQuc2Nyb2xsVG9wPW49MCx0LmRpc3BhdGNoRXZlbnQoaCkpLFwibGVmdFwiPT09ZSYmMD49biYmKHQuc2Nyb2xsTGVmdD1uPTAsdC5kaXNwYXRjaEV2ZW50KHApKTt2YXIgdj1pLmdldCh0KTtcInRvcFwiPT09ZSYmbj49di5jb250ZW50SGVpZ2h0LXYuY29udGFpbmVySGVpZ2h0JiYobj12LmNvbnRlbnRIZWlnaHQtdi5jb250YWluZXJIZWlnaHQsbi10LnNjcm9sbFRvcDw9MT9uPXQuc2Nyb2xsVG9wOnQuc2Nyb2xsVG9wPW4sdC5kaXNwYXRjaEV2ZW50KGIpKSxcImxlZnRcIj09PWUmJm4+PXYuY29udGVudFdpZHRoLXYuY29udGFpbmVyV2lkdGgmJihuPXYuY29udGVudFdpZHRoLXYuY29udGFpbmVyV2lkdGgsbi10LnNjcm9sbExlZnQ8PTE/bj10LnNjcm9sbExlZnQ6dC5zY3JvbGxMZWZ0PW4sdC5kaXNwYXRjaEV2ZW50KGYpKSxyfHwocj10LnNjcm9sbFRvcCksb3x8KG89dC5zY3JvbGxMZWZ0KSxcInRvcFwiPT09ZSYmcj5uJiZ0LmRpc3BhdGNoRXZlbnQobCksXCJ0b3BcIj09PWUmJm4+ciYmdC5kaXNwYXRjaEV2ZW50KGEpLFwibGVmdFwiPT09ZSYmbz5uJiZ0LmRpc3BhdGNoRXZlbnQocyksXCJsZWZ0XCI9PT1lJiZuPm8mJnQuZGlzcGF0Y2hFdmVudChjKSxcInRvcFwiPT09ZSYmKHQuc2Nyb2xsVG9wPXI9bix0LmRpc3BhdGNoRXZlbnQodSkpLFwibGVmdFwiPT09ZSYmKHQuc2Nyb2xsTGVmdD1vPW4sdC5kaXNwYXRjaEV2ZW50KGQpKX19LHtcIi4vaW5zdGFuY2VzXCI6MTh9XSwyMTpbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPXQoXCIuLi9saWIvaGVscGVyXCIpLG89dChcIi4uL2xpYi9kb21cIiksaT10KFwiLi9pbnN0YW5jZXNcIiksbD10KFwiLi91cGRhdGUtZ2VvbWV0cnlcIiksYT10KFwiLi91cGRhdGUtc2Nyb2xsXCIpO2UuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1pLmdldCh0KTtlJiYoZS5uZWdhdGl2ZVNjcm9sbEFkanVzdG1lbnQ9ZS5pc05lZ2F0aXZlU2Nyb2xsP3Quc2Nyb2xsV2lkdGgtdC5jbGllbnRXaWR0aDowLG8uY3NzKGUuc2Nyb2xsYmFyWFJhaWwsXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxvLmNzcyhlLnNjcm9sbGJhcllSYWlsLFwiZGlzcGxheVwiLFwiYmxvY2tcIiksZS5yYWlsWE1hcmdpbldpZHRoPXIudG9JbnQoby5jc3MoZS5zY3JvbGxiYXJYUmFpbCxcIm1hcmdpbkxlZnRcIikpK3IudG9JbnQoby5jc3MoZS5zY3JvbGxiYXJYUmFpbCxcIm1hcmdpblJpZ2h0XCIpKSxlLnJhaWxZTWFyZ2luSGVpZ2h0PXIudG9JbnQoby5jc3MoZS5zY3JvbGxiYXJZUmFpbCxcIm1hcmdpblRvcFwiKSkrci50b0ludChvLmNzcyhlLnNjcm9sbGJhcllSYWlsLFwibWFyZ2luQm90dG9tXCIpKSxvLmNzcyhlLnNjcm9sbGJhclhSYWlsLFwiZGlzcGxheVwiLFwibm9uZVwiKSxvLmNzcyhlLnNjcm9sbGJhcllSYWlsLFwiZGlzcGxheVwiLFwibm9uZVwiKSxsKHQpLGEodCxcInRvcFwiLHQuc2Nyb2xsVG9wKSxhKHQsXCJsZWZ0XCIsdC5zY3JvbGxMZWZ0KSxvLmNzcyhlLnNjcm9sbGJhclhSYWlsLFwiZGlzcGxheVwiLFwiXCIpLG8uY3NzKGUuc2Nyb2xsYmFyWVJhaWwsXCJkaXNwbGF5XCIsXCJcIikpfX0se1wiLi4vbGliL2RvbVwiOjMsXCIuLi9saWIvaGVscGVyXCI6NixcIi4vaW5zdGFuY2VzXCI6MTgsXCIuL3VwZGF0ZS1nZW9tZXRyeVwiOjE5LFwiLi91cGRhdGUtc2Nyb2xsXCI6MjB9XX0se30sWzFdKTsiLCIvKiFcbiAqIFZ1ZS5qcyB2MS4wLjI2XG4gKiAoYykgMjAxNiBFdmFuIFlvdVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gIChnbG9iYWwuVnVlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcbiAgICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvYmouX2lzVnVlKSB7XG4gICAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvYiA9IG9iai5fX29iX187XG4gICAgaWYgKCFvYikge1xuICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuICAgIG9iLmRlcC5ub3RpZnkoKTtcbiAgICBpZiAob2Iudm1zKSB7XG4gICAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgICAgdm0uX3Byb3h5KGtleSk7XG4gICAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG4gICAgaWYgKCFoYXNPd24ob2JqLCBrZXkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICAgIGlmICghb2IpIHtcbiAgICAgIGlmIChvYmouX2lzVnVlKSB7XG4gICAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcbiAgICAgICAgb2JqLl9kaWdlc3QoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb2IuZGVwLm5vdGlmeSgpO1xuICAgIGlmIChvYi52bXMpIHtcbiAgICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgICB2bS5fdW5wcm94eShrZXkpO1xuICAgICAgICB2bS5fZGlnZXN0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbiAgLyoqXG4gICAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cbiAgZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuICAgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcbiAgICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcbiAgICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xuICB9XG5cbiAgLyoqXG4gICAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcbiAgICogZW1wdHkgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiBfdG9TdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuICAgKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHsqfE51bWJlcn1cbiAgICovXG5cbiAgZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHN0cmlwUXVvdGVzKHN0cikge1xuICAgIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNykgPyBzdHIuc2xpY2UoMSwgLTEpIDogc3RyO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXG4gIGZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xuICAgIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG4gIH1cblxuICAvKipcbiAgICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIHZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nO1xuXG4gIGZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuICAgKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cbiAgICpcbiAgICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcbiAgICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2VcbiAgICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIHZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXFwvXSkoXFx3KS9nO1xuXG4gIGZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG5cbiAgZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuICAgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvKipcbiAgICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gdG9cbiAgICogQHBhcmFtIHtPYmplY3R9IGZyb21cbiAgICovXG5cbiAgZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHRvO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuICAgKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gICAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JztcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG4gICAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gIHZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbiAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xuICB9XG5cbiAgLyoqXG4gICAqIEFycmF5IHR5cGUgY2hlY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuICAvKipcbiAgICogRGVmaW5lIGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuICAgKi9cblxuICBmdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbCxcbiAgICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICAgKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcbiAgICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuICAgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcbiAgICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cbiAgICogbmF0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAgICogQHBhcmFtIHsqfSBvYmpcbiAgICovXG5cbiAgZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuICAgIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuICAgIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuICAgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIGNiO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICAgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYVxuICAgKiBAcGFyYW0geyp9IGJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgfVxuXG4gIHZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cbiAgLy8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xuICB2YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4gIC8vIGRldGVjdCBkZXZ0b29sc1xuICB2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cbiAgLy8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG4gIHZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICB2YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XG4gIHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xuICB2YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcbiAgdmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcbiAgdmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcbiAgdmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cbiAgLy8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG4gIHZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblxuICB2YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG4gIHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG4gIHZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuICB2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cbiAgLy8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xuICBpZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuICAgIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gICAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuICAgIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG4gICAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XG4gICAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAgICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuICAgKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cbiAgICogc2V0VGltZW91dCgwKS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICAgKi9cblxuICB2YXIgbmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuICAgIHZhciB0aW1lckZ1bmM7XG4gICAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuICAgICAgcGVuZGluZyA9IGZhbHNlO1xuICAgICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcbiAgICAgIGNhbGxiYWNrcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29waWVzW2ldKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuICAgICAgdmFyIGNvdW50ZXIgPSAxO1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcbiAgICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xuICAgICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG4gICAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cbiAgICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXG4gICAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG4gICAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcbiAgICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuICAgICAgICBjYi5jYWxsKGN0eCk7XG4gICAgICB9IDogY2I7XG4gICAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcbiAgICAgIGlmIChwZW5kaW5nKSByZXR1cm47XG4gICAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuICAgIH07XG4gIH0pKCk7XG5cbiAgdmFyIF9TZXQgPSB1bmRlZmluZWQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcbiAgICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cbiAgICBfU2V0ID0gU2V0O1xuICB9IGVsc2Uge1xuICAgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cbiAgICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gICAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuICAgIH07XG4gICAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG4gICAgdGhpcy5zaXplID0gMDtcbiAgICB0aGlzLmxpbWl0ID0gbGltaXQ7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICB2YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuICAgKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gICAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gICAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAgICovXG5cbiAgcC5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHZhciByZW1vdmVkO1xuXG4gICAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgICBlbnRyeSA9IHtcbiAgICAgICAga2V5OiBrZXlcbiAgICAgIH07XG4gICAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgICAgaWYgKHRoaXMudGFpbCkge1xuICAgICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcbiAgICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgICAgdGhpcy5zaXplKys7XG4gICAgfVxuICAgIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cbiAgICByZXR1cm4gcmVtb3ZlZDtcbiAgfTtcblxuICAvKipcbiAgICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGVcbiAgICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICAgKiBjYWNoZSB3YXMgZW1wdHkuXG4gICAqL1xuXG4gIHAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuICAgICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zaXplLS07XG4gICAgfVxuICAgIHJldHVybiBlbnRyeTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuICAgKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG4gICAqIEByZXR1cm4ge0VudHJ5fCp9XG4gICAqL1xuXG4gIHAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XTtcbiAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG4gICAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuICAgIH1cbiAgICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG4gICAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuICAgIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG4gICAgICB9XG4gICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICAgIH1cbiAgICBpZiAoZW50cnkub2xkZXIpIHtcbiAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gICAgfVxuICAgIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuICAgIH1cbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuICB9O1xuXG4gIHZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xuICB2YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xuICB2YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXG4gIC8qKlxuICAgKiBQYXJzZXIgc3RhdGVcbiAgICovXG5cbiAgdmFyIHN0cjtcbiAgdmFyIGRpcjtcbiAgdmFyIGM7XG4gIHZhciBwcmV2O1xuICB2YXIgaTtcbiAgdmFyIGw7XG4gIHZhciBsYXN0RmlsdGVySW5kZXg7XG4gIHZhciBpblNpbmdsZTtcbiAgdmFyIGluRG91YmxlO1xuICB2YXIgY3VybHk7XG4gIHZhciBzcXVhcmU7XG4gIHZhciBwYXJlbjtcbiAgLyoqXG4gICAqIFB1c2ggYSBmaWx0ZXIgdG8gdGhlIGN1cnJlbnQgZGlyZWN0aXZlIG9iamVjdFxuICAgKi9cblxuICBmdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuICAgIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XG4gICAgdmFyIGZpbHRlcjtcbiAgICBpZiAoZXhwKSB7XG4gICAgICBmaWx0ZXIgPSB7fTtcbiAgICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG4gICAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcbiAgICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG4gICAgfVxuICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcoYXJnKSB7XG4gICAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdG9OdW1iZXIoYXJnKSxcbiAgICAgICAgZHluYW1pYzogZmFsc2VcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG4gICAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgICBkeW5hbWljOiBkeW5hbWljXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICAgKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxuICAgKiB7XG4gICAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcbiAgICogICBmaWx0ZXJzOiBbXG4gICAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAgICogICBdXG4gICAqIH1cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cblxuICBmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG4gICAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuICAgIGlmIChoaXQpIHtcbiAgICAgIHJldHVybiBoaXQ7XG4gICAgfVxuXG4gICAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG4gICAgc3RyID0gcztcbiAgICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2U7XG4gICAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG4gICAgbGFzdEZpbHRlckluZGV4ID0gMDtcbiAgICBkaXIgPSB7fTtcblxuICAgIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBwcmV2ID0gYztcbiAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgIGlmIChpblNpbmdsZSkge1xuICAgICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcbiAgICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XG4gICAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuICAgICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG4gICAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICAgICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcbiAgICAgICAgICBwdXNoRmlsdGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoYykge1xuICAgICAgICAgIGNhc2UgMHgyMjpcbiAgICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcbiAgICAgICAgICBjYXNlIDB4Mjc6XG4gICAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcbiAgICAgICAgICBjYXNlIDB4Mjg6XG4gICAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXG4gICAgICAgICAgY2FzZSAweDI5OlxuICAgICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuICAgICAgICAgIGNhc2UgMHg1QjpcbiAgICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG4gICAgICAgICAgY2FzZSAweDVEOlxuICAgICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cbiAgICAgICAgICBjYXNlIDB4N0I6XG4gICAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG4gICAgICAgICAgY2FzZSAweDdEOlxuICAgICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcbiAgICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgICAgcHVzaEZpbHRlcigpO1xuICAgIH1cblxuICAgIGNhY2hlJDEucHV0KHMsIGRpcik7XG4gICAgcmV0dXJuIGRpcjtcbiAgfVxuXG52YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG4gIH0pO1xuXG4gIHZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcbiAgdmFyIGNhY2hlID0gdW5kZWZpbmVkO1xuICB2YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG4gIHZhciBodG1sUkUgPSB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcbiAgICogY29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICovXG5cbiAgZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcbiAgICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcbiAgICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG4gICAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG4gICAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuICAgIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuICAgIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuICAgIC8vIHJlc2V0IGNhY2hlXG4gICAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgYSB0ZW1wbGF0ZSB0ZXh0IHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRva2Vucy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHJldHVybiB7QXJyYXk8T2JqZWN0PiB8IG51bGx9XG4gICAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG4gICAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuICAgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtodG1sXVxuICAgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuICAgKi9cblxuICBmdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xuICAgIGlmICghY2FjaGUpIHtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH1cbiAgICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuICAgIGlmIChoaXQpIHtcbiAgICAgIHJldHVybiBoaXQ7XG4gICAgfVxuICAgIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciB0b2tlbnMgPSBbXTtcbiAgICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcbiAgICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgICAgLy8gcHVzaCB0ZXh0IHRva2VuXG4gICAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gdGFnIHRva2VuXG4gICAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuICAgICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcbiAgICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcbiAgICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcbiAgICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHRhZzogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcbiAgICAgICAgaHRtbDogaHRtbCxcbiAgICAgICAgb25lVGltZTogb25lVGltZVxuICAgICAgfSk7XG4gICAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICB9XG4gICAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cbiAgICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcbiAgICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAgICogQHBhcmFtIHtWdWV9IFt2bV1cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG4gICAgICB9KS5qb2luKCcrJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAgICogQHBhcmFtIHtWdWV9IFt2bV1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG4gICAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG4gICAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcbiAgICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG4gICAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG4gICAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG4gICAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgdmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcbiAgZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuICAgIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG4gICAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcbiAgICAgIGlmICghZGlyLmZpbHRlcnMpIHtcbiAgICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG4gICAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuICAgICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG52YXIgdGV4dCA9IE9iamVjdC5mcmVlemUoe1xuICAgIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuICAgIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuICAgIHRva2Vuc1RvRXhwOiB0b2tlbnNUb0V4cFxuICB9KTtcblxuICB2YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcbiAgdmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcblxuICB2YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cbiAgICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgICAqXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICovXG5cbiAgICBkZWJ1ZzogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgICAqXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICovXG5cbiAgICBzaWxlbnQ6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgICAqL1xuXG4gICAgYXN5bmM6IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuICAgICAqIGV4cHJlc3Npb25zLlxuICAgICAqL1xuXG4gICAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG4gICAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAgICAgKi9cblxuICAgIGRldnRvb2xzOiAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicsXG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuICAgICAqIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKi9cblxuICAgIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuICAgICAqXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuXG4gICAgX2Fzc2V0VHlwZXM6IFsnY29tcG9uZW50JywgJ2RpcmVjdGl2ZScsICdlbGVtZW50RGlyZWN0aXZlJywgJ2ZpbHRlcicsICd0cmFuc2l0aW9uJywgJ3BhcnRpYWwnXSxcblxuICAgIC8qKlxuICAgICAqIHByb3AgYmluZGluZyBtb2Rlc1xuICAgICAqL1xuXG4gICAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICAgIE9ORV9XQVk6IDAsXG4gICAgICBUV09fV0FZOiAxLFxuICAgICAgT05FX1RJTUU6IDJcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAgICovXG5cbiAgICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXG4gIH0sIHtcbiAgICBkZWxpbWl0ZXJzOiB7IC8qKlxuICAgICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cbiAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIGRlbGltaXRlcnM7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICAgIGRlbGltaXRlcnMgPSB2YWw7XG4gICAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICB9LFxuICAgIHVuc2FmZURlbGltaXRlcnM6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcbiAgICAgICAgY29tcGlsZVJlZ2V4KCk7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHdhcm4gPSB1bmRlZmluZWQ7XG4gIHZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXG4gIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuICAgICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcbiAgICAgICAgdmFyIG5hbWUgPSB2bS5faXNWdWUgPyB2bS4kb3B0aW9ucy5uYW1lIDogdm0ubmFtZTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuICAgICAgfTtcbiAgICB9KSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH0sIHZtLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgICB9LCB2bSwgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgLTEsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZShlbCk7XG4gICAgfSwgdm0sIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG4gICAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcbiAgICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuICAgIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuICAgIGlmICghdHJhbnNpdGlvbiB8fFxuICAgIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuICAgIC8vIG5vdCBzdXBwb3J0ZWRcbiAgICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gICAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG4gICAgIXZtLl9pc0NvbXBpbGVkIHx8XG4gICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuICAgIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG4gICAgLy8gYW5pbWF0aW9uLlxuICAgIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcbiAgICAgIG9wKCk7XG4gICAgICBpZiAoY2IpIGNiKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG4gICAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG4gIH1cblxudmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG4gICAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcbiAgICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxuICB9KTtcblxuICAvKipcbiAgICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBzZWxlY3RvciA9IGVsO1xuICAgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcbiAgICAgIGlmICghZWwpIHtcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuICAgKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICAgKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuICAgKiBtYWtpbmcgdW5pdCB0ZXN0cyBkaWZmaWN1bHQuIFRoaXMgaXMgZml4ZWQgYnkgZG9pbmcgdGhlXG4gICAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAgICogdGhlIG5vZGUgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuICAgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuICAgIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG4gICAgaWYgKHZhbCAhPT0gbnVsbCkge1xuICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gICAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG4gICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKi9cblxuICBmdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuICAgIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAgICovXG5cbiAgZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZWwgZnJvbSBET01cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZW1vdmUoZWwpIHtcbiAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuICAgICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcbiAgICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAgICovXG5cbiAgZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICBmdW5jdGlvbiBvZmYoZWwsIGV2ZW50LCBjYikge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcbiAgICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG4gICAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcbiAgICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuICAgIH1cbiAgICByZXR1cm4gY2xhc3NuYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIEluIElFOSwgc2V0QXR0cmlidXRlKCdjbGFzcycpIHdpbGwgcmVzdWx0IGluIGVtcHR5IGNsYXNzXG4gICAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG4gICAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuICAgKiBTbyB3ZSBoYXZlIHRvIGRvIGEgY29uZGl0aW9uYWwgY2hlY2sgaGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSA9IGNscztcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICAgKi9cblxuICBmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG4gICAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG4gICAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG4gICAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcbiAgICAgIH1cbiAgICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcbiAgICB9XG4gICAgaWYgKCFlbC5jbGFzc05hbWUpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG4gICAqIGNvbnRhaW5lciBkaXZcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAgICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICAgKi9cblxuICBmdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuICAgIHZhciBjaGlsZDtcbiAgICB2YXIgcmF3Q29udGVudDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuICAgICAgZWwgPSBlbC5jb250ZW50O1xuICAgIH1cbiAgICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICB0cmltTm9kZShlbCk7XG4gICAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhd0NvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuICAgKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgKi9cblxuICBmdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG4gICAgdmFyIGNoaWxkO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlcXVlbmNlcyAqL1xuICAgIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gICAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuICAgKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG4gICAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG4gICAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG4gICAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAgICogLSB2LWh0bWxcbiAgICogLSB2LWlmXG4gICAqIC0gdi1mb3JcbiAgICogLSBjb21wb25lbnRcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAgICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG4gICAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcbiAgICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG4gICAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuICAgIHJldHVybiBhbmNob3I7XG4gIH1cblxuICAvKipcbiAgICogRmluZCBhIGNvbXBvbmVudCByZWYgYXR0cmlidXRlIHRoYXQgc3RhcnRzIHdpdGggJC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gICAqIEByZXR1cm4ge1N0cmluZ3x1bmRlZmluZWR9XG4gICAqL1xuXG4gIHZhciByZWZSRSA9IC9edi1yZWY6LztcblxuICBmdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcbiAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICogQHBhcmFtIHtOb2RlfSBlbmRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAgICovXG5cbiAgZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcbiAgICB2YXIgbmV4dDtcbiAgICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG4gICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIG9wKG5vZGUpO1xuICAgICAgbm9kZSA9IG5leHQ7XG4gICAgfVxuICAgIG9wKGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICAgKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG4gICAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBzdGFydFxuICAgKiBAcGFyYW0ge05vZGV9IGVuZFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcbiAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgIHZhciByZW1vdmVkID0gMDtcbiAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICBtYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKG5vZGUsIHZtLCBvblJlbW92ZWQpO1xuICAgIH0pO1xuICAgIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcbiAgICAgIHJlbW92ZWQrKztcbiAgICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAgICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcbiAgICBpZiAoZWwub3V0ZXJIVE1MKSB7XG4gICAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xuICB2YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXG4gIHZhciBpc1Vua25vd25FbGVtZW50ID0gdW5kZWZpbmVkO1xuICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG4gICAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcbiAgICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuICAgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcbiAgICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG4gICAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQsIGlmIHllcyByZXR1cm4gaXRzXG4gICAqIGNvbXBvbmVudCBpZC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICAgKi9cblxuICBmdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcbiAgICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcbiAgICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG4gICAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChpcykge1xuICAgICAgICAgIHJldHVybiBpcztcbiAgICAgICAgfSBlbHNlIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcbiAgICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcbiAgICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSAnICsgJ2RpZCB5b3UgbWVhbiA8JyArIGV4cGVjdGVkVGFnICsgJz4/ICcgKyAnSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2Uga2ViYWItY2FzZSBpbiB0ZW1wbGF0ZXMuJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG4gICAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG4gICAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcbiAgICAvLyBkeW5hbWljIHN5bnRheFxuICAgIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuICAgICAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuICAgKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICAgKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cbiAgICpcbiAgICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuICAgKiBAcGFyYW0geyp9IGNoaWxkVmFsXG4gICAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gICAqL1xuXG4gIHZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvKipcbiAgICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuICAgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuICAgIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICAgIHRvVmFsID0gdG9ba2V5XTtcbiAgICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG4gICAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRvVmFsKSAmJiBpc09iamVjdChmcm9tVmFsKSkge1xuICAgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG87XG4gIH1cblxuICAvKipcbiAgICogRGF0YVxuICAgKi9cblxuICBzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuICAgIGlmICghdm0pIHtcbiAgICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgICBpZiAoIWNoaWxkVmFsKSB7XG4gICAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICAgICAgcmV0dXJuIHBhcmVudFZhbDtcbiAgICAgIH1cbiAgICAgIGlmICghcGFyZW50VmFsKSB7XG4gICAgICAgIHJldHVybiBjaGlsZFZhbDtcbiAgICAgIH1cbiAgICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcbiAgICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAgICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2VcbiAgICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG4gICAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG4gICAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuICAgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBFbFxuICAgKi9cblxuICBzdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgICBpZiAoIXZtICYmIGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcbiAgICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG4gICAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICAgKi9cblxuICBzdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICAgIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFzc2V0c1xuICAgKlxuICAgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG4gICAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAgICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG4gICAgcmV0dXJuIGNoaWxkVmFsID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpIDogcmVzO1xuICB9XG5cbiAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuICAgKlxuICAgKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG4gICAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuICAgKi9cblxuICBzdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICAgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gICAgdmFyIHJldCA9IHt9O1xuICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gICAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXldO1xuICAgICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuICAgICAgfVxuICAgICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG4gICAqL1xuXG4gIHN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICAgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gICAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICAvKipcbiAgICogRGVmYXVsdCBzdHJhdGVneS5cbiAgICovXG5cbiAgdmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gICAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG4gICAqIGNvbnN0cnVjdG9ycy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICovXG5cbiAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgICB2YXIgY29tcG9uZW50cyA9IG9wdGlvbnMuY29tcG9uZW50cyA9IGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKTtcbiAgICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcbiAgICAgIHZhciBkZWY7XG4gICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGlkc1tpXTtcbiAgICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3JcbiAgICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBtYXBba2V5LnJlcGxhY2UoLy0vZywgJycpLnRvTG93ZXJDYXNlKCldID0gaHlwaGVuYXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChkZWYpKSB7XG4gICAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICAgKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cblxuICBmdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICAgIHZhciBpLCB2YWw7XG4gICAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG4gICAgICBvcHRpb25zLnByb3BzID0ge307XG4gICAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG4gICAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG5cbiAgZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcbiAgICBpZiAoaXNBcnJheShhc3NldHMpKSB7XG4gICAgICB2YXIgcmVzID0ge307XG4gICAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG4gICAgICB2YXIgYXNzZXQ7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuICAgICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICByZXR1cm4gYXNzZXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAgICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcbiAgICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuICAgKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuICAgIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG4gICAgZ3VhcmRQcm9wcyhjaGlsZCk7XG4gICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcbiAgICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgdmFyIGtleTtcbiAgICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuICAgICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLm1peGlucykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcbiAgICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcbiAgICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoa2V5IGluIHBhcmVudCkge1xuICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuICAgIH1cbiAgICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcbiAgICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcbiAgICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZSBhbiBhc3NldC5cbiAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gICAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3NpbmdcbiAgICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG4gICAgdmFyIGNhbWVsaXplZElkO1xuICAgIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG4gICAgLy8gY2FtZWxDYXNlIElEXG4gICAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuICAgIC8vIFBhc2NhbCBDYXNlIElEXG4gICAgYXNzZXRzW2NhbWVsaXplZElkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkSWQuc2xpY2UoMSldO1xuICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuICAgICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHZhciB1aWQkMSA9IDA7XG5cbiAgLyoqXG4gICAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICAgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGZ1bmN0aW9uIERlcCgpIHtcbiAgICB0aGlzLmlkID0gdWlkJDErKztcbiAgICB0aGlzLnN1YnMgPSBbXTtcbiAgfVxuXG4gIC8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cbiAgLy8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuICAvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cbiAgRGVwLnRhcmdldCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gICAqL1xuXG4gIERlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICAgIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gICAqL1xuXG4gIERlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICAgIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXG4gICAqL1xuXG4gIERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuICAgKi9cblxuICBEZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG4gICAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgc3Vic1tpXS51cGRhdGUoKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG4gIHZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbiAgLyoqXG4gICAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuICAgKi9cblxuICA7WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2RcbiAgICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gICAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuICAgICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG4gICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuICAgICAgdmFyIGluc2VydGVkO1xuICAgICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xuICAgICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgICAgb2IuZGVwLm5vdGlmeSgpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcbiAgICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcbiAgICovXG5cbiAgZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG4gICAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF07XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBpdGVtXG4gICAqL1xuXG4gIGRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcbiAgICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcbiAgICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cbiAgICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cbiAgICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuICAgKlxuICAgKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuICAgKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuICAgKi9cblxuICB2YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cbiAgZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcbiAgICBzaG91bGRDb252ZXJ0ID0gZmFsc2U7XG4gICAgZm4oKTtcbiAgICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG4gICAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxuICAgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICAgKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuXG4gIGZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICAgIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuICAgICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLndhbGsodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluc3RhbmNlIG1ldGhvZHNcblxuICAvKipcbiAgICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG4gICAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICAgKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKi9cblxuICBPYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gaXRlbXNcbiAgICovXG5cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcbiAgICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIE9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXG4gICAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcbiAgICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3RcbiAgICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICovXG5cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG4gICAqIHN3YXBwZWQgb3V0IGFzIGFuIGluc3RhbmNlJ3MgJGRhdGEgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICovXG5cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG4gIH07XG5cbiAgLy8gaGVscGVyc1xuXG4gIC8qKlxuICAgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG4gICAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAgICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICAgKi9cblxuICBmdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICAgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xuICB9XG5cbiAgLyoqXG4gICAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuICAgKiBoaWRkZW4gcHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cbiAgICovXG5cbiAgZnVuY3Rpb24gY29weUF1Z21lbnQodGFyZ2V0LCBzcmMsIGtleXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAgICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcbiAgICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtWdWV9IFt2bV1cbiAgICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICAgKiBAc3RhdGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvYjtcbiAgICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcbiAgICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICAgIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcbiAgICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG9iICYmIHZtKSB7XG4gICAgICBvYi5hZGRWbSh2bSk7XG4gICAgfVxuICAgIHJldHVybiBvYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cblxuICBmdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG4gICAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblxuICAgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICAgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG4gICAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcbiAgICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gICAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgICBkZXAuZGVwZW5kKCk7XG4gICAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0dGVyKSB7XG4gICAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbCA9IG5ld1ZhbDtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuICAgICAgICBkZXAubm90aWZ5KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgdmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcbiAgXHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG4gIFx0c2V0OiBzZXQsXG4gIFx0ZGVsOiBkZWwsXG4gIFx0aGFzT3duOiBoYXNPd24sXG4gIFx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXG4gIFx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcbiAgXHRfdG9TdHJpbmc6IF90b1N0cmluZyxcbiAgXHR0b051bWJlcjogdG9OdW1iZXIsXG4gIFx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG4gIFx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuICBcdGNhbWVsaXplOiBjYW1lbGl6ZSxcbiAgXHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcbiAgXHRjbGFzc2lmeTogY2xhc3NpZnksXG4gIFx0YmluZDogYmluZCxcbiAgXHR0b0FycmF5OiB0b0FycmF5LFxuICBcdGV4dGVuZDogZXh0ZW5kLFxuICBcdGlzT2JqZWN0OiBpc09iamVjdCxcbiAgXHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuICBcdGRlZjogZGVmLFxuICBcdGRlYm91bmNlOiBfZGVib3VuY2UsXG4gIFx0aW5kZXhPZjogaW5kZXhPZixcbiAgXHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG4gIFx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcbiAgXHRpc0FycmF5OiBpc0FycmF5LFxuICBcdGhhc1Byb3RvOiBoYXNQcm90byxcbiAgXHRpbkJyb3dzZXI6IGluQnJvd3NlcixcbiAgXHRkZXZ0b29sczogZGV2dG9vbHMsXG4gIFx0aXNJRTogaXNJRSxcbiAgXHRpc0lFOTogaXNJRTksXG4gIFx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG4gIFx0aXNJb3M6IGlzSW9zLFxuICBcdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxuICBcdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG4gIFx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyxcbiAgXHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXG4gIFx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG4gIFx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcbiAgXHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXG4gIFx0bmV4dFRpY2s6IG5leHRUaWNrLFxuICBcdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG4gIFx0cXVlcnk6IHF1ZXJ5LFxuICBcdGluRG9jOiBpbkRvYyxcbiAgXHRnZXRBdHRyOiBnZXRBdHRyLFxuICBcdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcbiAgXHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG4gIFx0YmVmb3JlOiBiZWZvcmUsXG4gIFx0YWZ0ZXI6IGFmdGVyLFxuICBcdHJlbW92ZTogcmVtb3ZlLFxuICBcdHByZXBlbmQ6IHByZXBlbmQsXG4gIFx0cmVwbGFjZTogcmVwbGFjZSxcbiAgXHRvbjogb24sXG4gIFx0b2ZmOiBvZmYsXG4gIFx0c2V0Q2xhc3M6IHNldENsYXNzLFxuICBcdGFkZENsYXNzOiBhZGRDbGFzcyxcbiAgXHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG4gIFx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxuICBcdHRyaW1Ob2RlOiB0cmltTm9kZSxcbiAgXHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuICBcdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxuICBcdGZpbmRSZWY6IGZpbmRSZWYsXG4gIFx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG4gIFx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXG4gIFx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcbiAgXHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcbiAgXHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcbiAgXHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcbiAgXHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcbiAgXHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXG4gIFx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcbiAgXHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG4gIH0pO1xuXG4gIHZhciB1aWQgPSAwO1xuXG4gIGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG4gICAgLyoqXG4gICAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuICAgICAqIGNvbnN0cnVjdG9ycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByZXN1bHQgb2YgbWVyZ2luZyBjbGFzc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICB0aGlzLiRlbCA9IG51bGw7XG4gICAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuICAgICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcbiAgICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICAgICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuICAgICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG4gICAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgICAgIC8vIGEgdWlkXG4gICAgICB0aGlzLl91aWQgPSB1aWQrKztcblxuICAgICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblxuICAgICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXG4gICAgICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG4gICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG4gICAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydCA9IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG4gICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuICAgICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cbiAgICAgIC8vIGNvbnRleHQ6XG4gICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblxuICAgICAgLy8gc2NvcGU6XG4gICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcbiAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlO1xuXG4gICAgICAvLyBmcmFnbWVudDpcbiAgICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG4gICAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG4gICAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuICAgICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG4gICAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG4gICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgLy8gbWVyZ2Ugb3B0aW9ucy5cbiAgICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cbiAgICAgIC8vIHNldCByZWZcbiAgICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXG4gICAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuICAgICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG4gICAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAgIC8vIGNhbGwgaW5pdCBob29rXG4gICAgICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpO1xuXG4gICAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICAgICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cbiAgICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cbiAgICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblxuICAgICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJyk7XG5cbiAgICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gICAgICBpZiAob3B0aW9ucy5lbCkge1xuICAgICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxuICAvLyBhY3Rpb25zXG4gIHZhciBBUFBFTkQgPSAwO1xuICB2YXIgUFVTSCA9IDE7XG4gIHZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xuICB2YXIgUFVTSF9TVUJfUEFUSCA9IDM7XG5cbiAgLy8gc3RhdGVzXG4gIHZhciBCRUZPUkVfUEFUSCA9IDA7XG4gIHZhciBJTl9QQVRIID0gMTtcbiAgdmFyIEJFRk9SRV9JREVOVCA9IDI7XG4gIHZhciBJTl9JREVOVCA9IDM7XG4gIHZhciBJTl9TVUJfUEFUSCA9IDQ7XG4gIHZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xuICB2YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcbiAgdmFyIEFGVEVSX1BBVEggPSA3O1xuICB2YXIgRVJST1IgPSA4O1xuXG4gIHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cbiAgcGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG4gICAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAgICdlb2YnOiBbQUZURVJfUEFUSF1cbiAgfTtcblxuICBwYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xuICAgICd3cyc6IFtJTl9QQVRIXSxcbiAgICAnLic6IFtCRUZPUkVfSURFTlRdLFxuICAgICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgICAnZW9mJzogW0FGVEVSX1BBVEhdXG4gIH07XG5cbiAgcGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuICAgICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuICAgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxuICB9O1xuXG4gIHBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAgICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcbiAgICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuICAgICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG4gIH07XG5cbiAgcGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gICAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG4gICAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcbiAgICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcbiAgICAnZW9mJzogRVJST1IsXG4gICAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbiAgfTtcblxuICBwYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG4gICAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgICAnZW9mJzogRVJST1IsXG4gICAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG4gIH07XG5cbiAgcGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuICAgICdcIic6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgICAnZW9mJzogRVJST1IsXG4gICAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG4gIH07XG5cbiAgLyoqXG4gICAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAgICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuICAgIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gJ2VvZic7XG4gICAgfVxuXG4gICAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXG4gICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICAgIGNhc2UgMHg1RDogLy8gXVxuICAgICAgY2FzZSAweDJFOiAvLyAuXG4gICAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgICBjYXNlIDB4Mjc6IC8vICdcbiAgICAgIGNhc2UgMHgzMDpcbiAgICAgICAgLy8gMFxuICAgICAgICByZXR1cm4gY2g7XG5cbiAgICAgIGNhc2UgMHg1RjogLy8gX1xuICAgICAgY2FzZSAweDI0OlxuICAgICAgICAvLyAkXG4gICAgICAgIHJldHVybiAnaWRlbnQnO1xuXG4gICAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgICBjYXNlIDB4MDk6IC8vIFRhYlxuICAgICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG4gICAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuICAgICAgY2FzZSAweEZFRkY6IC8vIEJ5dGUgT3JkZXIgTWFya1xuICAgICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG4gICAgICBjYXNlIDB4MjAyOTpcbiAgICAgICAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuICAgICAgICByZXR1cm4gJ3dzJztcbiAgICB9XG5cbiAgICAvLyBhLXosIEEtWlxuICAgIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcbiAgICAgIHJldHVybiAnaWRlbnQnO1xuICAgIH1cblxuICAgIC8vIDEtOVxuICAgIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG4gICAgICByZXR1cm4gJ251bWJlcic7XG4gICAgfVxuXG4gICAgcmV0dXJuICdlbHNlJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcbiAgICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuICAgKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG4gICAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcbiAgICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuICAgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgdmFyIGluZGV4ID0gLTE7XG4gICAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcbiAgICB2YXIgc3ViUGF0aERlcHRoID0gMDtcbiAgICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgICB2YXIgYWN0aW9ucyA9IFtdO1xuXG4gICAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAga2V5ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5ID0gbmV3Q2hhcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgIHN1YlBhdGhEZXB0aCsrO1xuICAgIH07XG5cbiAgICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHtcbiAgICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcbiAgICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJQYXRoRGVwdGggPSAwO1xuICAgICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7XG4gICAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG4gICAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XG4gICAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xuICAgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuICAgICAgaW5kZXgrKztcbiAgICAgIGMgPSBwYXRoW2luZGV4XTtcblxuICAgICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcbiAgICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuICAgICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcbiAgICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuICAgICAgfVxuXG4gICAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcbiAgICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG4gICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuICAgICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7XG4gICAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcbiAgICAgICAga2V5cy5yYXcgPSBwYXRoO1xuICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3RcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICAgKi9cblxuICBmdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICAgIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpO1xuICAgIGlmICghaGl0KSB7XG4gICAgICBoaXQgPSBwYXJzZShwYXRoKTtcbiAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuICAgIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG4gIH1cblxuICAvKipcbiAgICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuICAgKi9cblxuICB2YXIgd2Fybk5vbkV4aXN0ZW50O1xuICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZtKSB7XG4gICAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcbiAgICB2YXIgb3JpZ2luYWwgPSBvYmo7XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuICAgIH1cbiAgICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGxhc3QsIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBsYXN0ID0gb2JqO1xuICAgICAga2V5ID0gcGF0aFtpXTtcbiAgICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcbiAgICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcbiAgICAgIH1cbiAgICAgIGlmIChpIDwgbCAtIDEpIHtcbiAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICAgIG9iaiA9IHt9O1xuICAgICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcbiAgICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG4gICAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbnZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG4gICAgZ2V0UGF0aDogZ2V0UGF0aCxcbiAgICBzZXRQYXRoOiBzZXRQYXRoXG4gIH0pO1xuXG4gIHZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbiAgdmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xuICB2YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbiAgLy8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xuICB2YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xuICB2YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxuICB2YXIgd3NSRSA9IC9cXHMvZztcbiAgdmFyIG5ld2xpbmVSRSA9IC9cXG4vZztcbiAgdmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG4gIHZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xuICB2YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvO1xuICB2YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG4gIHZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblxuICBmdW5jdGlvbiBub29wKCkge31cblxuICAvKipcbiAgICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG4gICAqXG4gICAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gICAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG4gICAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuICAgKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAgICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG4gICAqL1xuXG4gIHZhciBzYXZlZCA9IFtdO1xuXG4gIC8qKlxuICAgKiBTYXZlIHJlcGxhY2VyXG4gICAqXG4gICAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG4gICAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcbiAgICogMi4gQSBzdHJpbmdcbiAgICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG4gICAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG4gICAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcbiAgICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcbiAgICovXG5cbiAgZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG4gICAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG4gICAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG4gICAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XG4gICAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuICAgIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuICAgIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XG4gICAgICByZXR1cm4gcmF3O1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XG4gICAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzdG9yZSByZXBsYWNlclxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcbiAgICByZXR1cm4gc2F2ZWRbaV07XG4gIH1cblxuICAvKipcbiAgICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcbiAgICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuICAgIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG4gICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XG4gICAgfVxuICAgIC8vIHJlc2V0IHN0YXRlXG4gICAgc2F2ZWQubGVuZ3RoID0gMDtcbiAgICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG4gICAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcbiAgICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG4gICAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcbiAgICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuICAgKlxuICAgKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG4gICAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG4gICAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGlsZSBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIGV4cHJlc3Npb24uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgKi9cblxuICBmdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuICAgIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuICAgICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcbiAgICBleHAgPSBleHAudHJpbSgpO1xuICAgIC8vIHRyeSBjYWNoZVxuICAgIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcbiAgICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGl0O1xuICAgIH1cbiAgICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuICAgIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuICAgIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG4gICAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG4gICAgLy8gZHluYW1pYyBnZXR0ZXJcbiAgICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcbiAgICBpZiAobmVlZFNldCkge1xuICAgICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcbiAgICB9XG4gICAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xuICAgIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAgIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG4gICAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXG4gICAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICAgIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcbiAgfVxuXG52YXIgZXhwcmVzc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuICAgIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuICAgIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG4gIH0pO1xuXG4gIC8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuICAvLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG4gIC8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxuICAvLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbiAgLy8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcbiAgLy8gc3RhdGUuXG5cbiAgdmFyIHF1ZXVlID0gW107XG4gIHZhciB1c2VyUXVldWUgPSBbXTtcbiAgdmFyIGhhcyA9IHt9O1xuICB2YXIgY2lyY3VsYXIgPSB7fTtcbiAgdmFyIHdhaXRpbmcgPSBmYWxzZTtcblxuICAvKipcbiAgICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XG4gICAgcXVldWUubGVuZ3RoID0gMDtcbiAgICB1c2VyUXVldWUubGVuZ3RoID0gMDtcbiAgICBoYXMgPSB7fTtcbiAgICBjaXJjdWxhciA9IHt9O1xuICAgIHdhaXRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cbiAgICovXG5cbiAgZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG4gICAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cbiAgICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcbiAgICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuICAgICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG4gICAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuICAgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuICAgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgICB9XG4gICAgICAvLyBkZXYgdG9vbCBob29rXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcbiAgICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcbiAgICAgIH1cbiAgICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuICAgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuICAgIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG4gICAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgICAgaGFzW2lkXSA9IG51bGw7XG4gICAgICB3YXRjaGVyLnJ1bigpO1xuICAgICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcbiAgICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG4gICAgICAgICAgd2FybignWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wIGZvciB3YXRjaGVyICcgKyAnd2l0aCBleHByZXNzaW9uIFwiJyArIHdhdGNoZXIuZXhwcmVzc2lvbiArICdcIicsIHdhdGNoZXIudm0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cbiAgICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG4gICAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcbiAgICogICBwcm9wZXJ0aWVzOlxuICAgKiAgIC0ge051bWJlcn0gaWRcbiAgICogICAtIHtGdW5jdGlvbn0gcnVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG4gICAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuICAgICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuICAgICAgcS5wdXNoKHdhdGNoZXIpO1xuICAgICAgLy8gcXVldWUgdGhlIGZsdXNoXG4gICAgICBpZiAoIXdhaXRpbmcpIHtcbiAgICAgICAgd2FpdGluZyA9IHRydWU7XG4gICAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgdWlkJDIgPSAwO1xuXG4gIC8qKlxuICAgKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcbiAgICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAgICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBmdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAgIC8vIG1peCBpbiBvcHRpb25zXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcbiAgICB0aGlzLnZtID0gdm07XG4gICAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gICAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcbiAgICB0aGlzLmNiID0gY2I7XG4gICAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcbiAgICB0aGlzLmRlcHMgPSBbXTtcbiAgICB0aGlzLm5ld0RlcHMgPSBbXTtcbiAgICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG4gICAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuICAgIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuICAgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcbiAgICBpZiAoaXNGbikge1xuICAgICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuICAgICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuICAgICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xuICAgICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuICAgIH1cbiAgICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcbiAgICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gICAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuICAgKi9cblxuICBXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5iZWZvcmVHZXQoKTtcbiAgICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIHZhbHVlO1xuICAgIHRyeSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuICAgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuICAgIGlmICh0aGlzLmRlZXApIHtcbiAgICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuICAgICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcbiAgICB9XG4gICAgdGhpcy5hZnRlckdldCgpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKi9cblxuICBXYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICAgIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG4gICAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG4gICAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3RcbiAgICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAgICovXG5cbiAgV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIERlcC50YXJnZXQgPSB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RlcH0gZGVwXG4gICAqL1xuXG4gIFdhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcbiAgICB2YXIgaWQgPSBkZXAuaWQ7XG4gICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG4gICAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuICAgICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcbiAgICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuICAgICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAgICovXG5cbiAgV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgRGVwLnRhcmdldCA9IG51bGw7XG4gICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG4gICAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG4gICAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuICAgIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuICAgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gICAgdG1wID0gdGhpcy5kZXBzO1xuICAgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcbiAgICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gICAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuICAgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcbiAgICovXG5cbiAgV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgICBpZiAodGhpcy5sYXp5KSB7XG4gICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG4gICAgICB0aGlzLnJ1bigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG4gICAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcbiAgICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG4gICAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpO1xuICAgICAgfVxuICAgICAgcHVzaFdhdGNoZXIodGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG4gICAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuICAgKi9cblxuICBXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG4gICAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcbiAgICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG4gICAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuICAgICAgICAvLyBzZXQgbmV3IHZhbHVlXG4gICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3NcbiAgICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG4gICAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG4gICAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAgICovXG5cbiAgV2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgICAvLyBjb2xsZWN0ZWQuXG4gICAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0O1xuICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICBEZXAudGFyZ2V0ID0gY3VycmVudDtcbiAgfTtcblxuICAvKipcbiAgICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG4gICAqL1xuXG4gIFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cbiAgICovXG5cbiAgV2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG4gICAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxuICAgICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuICAgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcbiAgICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAgICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3RcbiAgICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWxcbiAgICovXG5cbiAgdmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcbiAgZnVuY3Rpb24gdHJhdmVyc2UodmFsLCBzZWVuKSB7XG4gICAgdmFyIGkgPSB1bmRlZmluZWQsXG4gICAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG4gICAgaWYgKCFzZWVuKSB7XG4gICAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG4gICAgICBzZWVuLmNsZWFyKCk7XG4gICAgfVxuICAgIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG4gICAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG4gICAgaWYgKChpc0EgfHwgaXNPKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbCkpIHtcbiAgICAgIGlmICh2YWwuX19vYl9fKSB7XG4gICAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuICAgICAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlZW4uYWRkKGRlcElkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlzQSkge1xuICAgICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPKSB7XG4gICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIHRleHQkMSA9IHtcblxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50JztcbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIHRoaXMuZWxbdGhpcy5hdHRyXSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuICB2YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG4gIHZhciBtYXAgPSB7XG4gICAgZWZhdWx0OiBbMCwgJycsICcnXSxcbiAgICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICAgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG4gIH07XG5cbiAgbWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbiAgbWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXG4gIG1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbiAgbWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gICAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcbiAgICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG4gIH1cblxuICB2YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG4gIHZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xuICB2YXIgY29tbWVudFJFID0gLzwhLS0vO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAgICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcbiAgICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuICAgIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuICAgIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuICAgIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcmV0dXJuIGhpdDtcbiAgICB9XG5cbiAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB2YXIgdGFnTWF0Y2ggPSB0ZW1wbGF0ZVN0cmluZy5tYXRjaCh0YWdSRSQxKTtcbiAgICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcbiAgICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXG4gICAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xuICAgICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG4gICAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG4gICAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuICAgICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gICAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcbiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG4gICAgICB3aGlsZSAoZGVwdGgtLSkge1xuICAgICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFyYXcpIHtcbiAgICAgIHRyaW1Ob2RlKGZyYWcpO1xuICAgIH1cbiAgICB0ZW1wbGF0ZUNhY2hlLnB1dChjYWNoZUtleSwgZnJhZyk7XG4gICAgcmV0dXJuIGZyYWc7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICovXG5cbiAgZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuICAgIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG4gICAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuICAgIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcbiAgICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuICAgIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuICAgIH1cbiAgICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuICAgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG4gICAgfVxuICAgIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcbiAgICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcbiAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB2YXIgY2hpbGQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgICB0cmltTm9kZShmcmFnKTtcbiAgICByZXR1cm4gZnJhZztcbiAgfVxuXG4gIC8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG4gIC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3d1Zy5jZ2k/aWQ9MTM3NzU1XG4gIHZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG4gICAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KSgpO1xuXG4gIC8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG4gIHZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChpbkJyb3dzZXIpIHtcbiAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSkoKTtcblxuICAvKipcbiAgICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuICAgKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG4gICAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG4gICAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG4gICAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAgICovXG5cbiAgZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG4gICAgfVxuICAgIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcbiAgICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG4gICAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICAgICAgbm9kZSA9IG5vZGUuY29udGVudDtcbiAgICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG4gICAgICB9XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcbiAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG4gICAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuICAgKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuICAgKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuICAgKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG4gICAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XG4gICAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcbiAgICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcbiAgICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2PidcbiAgICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuICAgKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxuICAgKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuICAgIHZhciBub2RlLCBmcmFnO1xuXG4gICAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcbiAgICAvLyBkbyBub3RoaW5nXG4gICAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG4gICAgICB0cmltTm9kZSh0ZW1wbGF0ZSk7XG4gICAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuICAgICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG4gICAgICAgIGlmICghZnJhZykge1xuICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XG4gICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcbiAgICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcbiAgICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuICAgICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG4gICAgICAvLyBhIGRpcmVjdCBub2RlXG4gICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuICAgIH1cblxuICAgIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcbiAgfVxuXG52YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXG4gIH0pO1xuXG4gIHZhciBodG1sID0ge1xuXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cbiAgICAgIGlmICh0aGlzLmVsLm5vZGVUeXBlID09PSA4KSB7XG4gICAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3JcbiAgICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuICAgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG4gICAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG4gICAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG4gICAgICB9XG4gICAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG4gICAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuICAgICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuICAgICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cbiAgICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbcGFyZW50RnJhZ11cbiAgICovXG4gIGZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuICAgIHRoaXMudm0gPSB2bTtcbiAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICAgIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG4gICAgaWYgKHBhcmVudEZyYWcpIHtcbiAgICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnVubGluayA9IGxpbmtlcih2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHRoaXMpO1xuICAgIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3JcbiAgICAhZnJhZy5jaGlsZE5vZGVzWzBdLl9fdl9hbmNob3I7XG4gICAgaWYgKHNpbmdsZSkge1xuICAgICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuICAgICAgdGhpcy5iZWZvcmUgPSBzaW5nbGVCZWZvcmU7XG4gICAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2RlID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1zdGFydCcpO1xuICAgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuICAgICAgdGhpcy5mcmFnID0gZnJhZztcbiAgICAgIHByZXBlbmQodGhpcy5ub2RlLCBmcmFnKTtcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcbiAgICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmU7XG4gICAgfVxuICAgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG4gICAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxuICAgKiBmcmFnbWVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICovXG5cbiAgRnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgICB2YXIgaSwgbDtcbiAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gICAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICAgIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG4gICAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcbiAgICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gICAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKHRoaXMubm9kZSwgdGhpcy52bSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgICAgfVxuICAgICAgc2VsZi5kZXN0cm95KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gICAgdmFyIHZtID0gdGhpcy52bTtcbiAgICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gICAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG4gICAgfSk7XG4gICAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xuICAgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuICAgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgICAgfVxuICAgICAgc2VsZi5kZXN0cm95KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG4gICAqL1xuXG4gIEZyYWdtZW50LnByb3RvdHlwZS5iZWZvcmVSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGksIGw7XG4gICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIC8vIGNhbGwgdGhlIHNhbWUgbWV0aG9kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxkXG4gICAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG4gICAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcbiAgICB9XG4gICAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuICAgICAgLy8gd2l0aCByZW1vdmU6ZmFsc2UgYW5kIGRlZmVyOnRydWUuXG4gICAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuICAgICAgLy8gb24gdGhlbS5cbiAgICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICB2YXIgZGlycyA9IHRoaXMudW5saW5rLmRpcnM7XG4gICAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcbiAgICAgIC8vIHNvIHRoYXQgdGhlIHJlbmRlcmVkIGNvbnRlbnQgc3RheXMgdGhlIHNhbWVcbiAgICAgIC8vIGR1cmluZyByZW1vdmFsLlxuICAgICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cbiAgICovXG5cbiAgRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuICAgICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcbiAgICB0aGlzLnVubGluaygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGRldGFjaChjaGlsZCkge1xuICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblxuICAvKipcbiAgICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gICAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG4gICAqL1xuICBmdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG4gICAgdGhpcy52bSA9IHZtO1xuICAgIHZhciB0ZW1wbGF0ZTtcbiAgICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuICAgIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH1cbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG4gICAgdmFyIGxpbmtlcjtcbiAgICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuICAgIGlmIChjaWQgPiAwKSB7XG4gICAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG4gICAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG4gICAgICBpZiAoIWxpbmtlcikge1xuICAgICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMubGlua2VyID0gbGlua2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBob3N0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG4gICAqL1xuXG4gIEZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gICAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG4gICAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xuICB9O1xuXG4gIHZhciBPTiA9IDcwMDtcbiAgdmFyIE1PREVMID0gODAwO1xuICB2YXIgQklORCA9IDg1MDtcbiAgdmFyIFRSQU5TSVRJT04gPSAxMTAwO1xuICB2YXIgRUwgPSAxNTAwO1xuICB2YXIgQ09NUE9ORU5UID0gMTUwMDtcbiAgdmFyIFBBUlRJQUwgPSAxNzUwO1xuICB2YXIgSUYgPSAyMTAwO1xuICB2YXIgRk9SID0gMjIwMDtcbiAgdmFyIFNMT1QgPSAyMzAwO1xuXG4gIHZhciB1aWQkMyA9IDA7XG5cbiAgdmFyIHZGb3IgPSB7XG5cbiAgICBwcmlvcml0eTogRk9SLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuXG4gICAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcbiAgICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG4gICAgICBpZiAoaW5NYXRjaCkge1xuICAgICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xuICAgICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5hbGlhcykge1xuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuICAgICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblxuICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuICAgICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cbiAgICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG4gICAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cbiAgICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cbiAgICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuICAgICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcbiAgICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xuICAgICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblxuICAgICAgLy8gY2FjaGVcbiAgICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuICAgIH0sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG4gICAgICB0aGlzLmRpZmYoZGF0YSk7XG4gICAgICB0aGlzLnVwZGF0ZVJlZigpO1xuICAgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcbiAgICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcbiAgICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcbiAgICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuICAgICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuICAgICAqL1xuXG4gICAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG4gICAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuICAgICAgdmFyIGl0ZW0gPSBkYXRhWzBdO1xuICAgICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXG4gICAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xuICAgICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG4gICAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcbiAgICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuICAgICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblxuICAgICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG4gICAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcbiAgICAgIC8vIGluc3RhbmNlLlxuICAgICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuICAgICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcbiAgICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuICAgICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuICAgICAgICBpZiAoZnJhZykge1xuICAgICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG4gICAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuICAgICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG4gICAgICAgICAgLy8gdXBkYXRlICRrZXlcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuICAgICAgICAgIGlmIChpdGVyYXRvcikge1xuICAgICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuICAgICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG4gICAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuICAgICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcbiAgICAgICAgfVxuICAgICAgICBmcmFnc1tpXSA9IGZyYWc7XG4gICAgICAgIGlmIChpbml0KSB7XG4gICAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgICBpZiAoaW5pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuICAgICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuICAgICAgLy8gZnJvbSBjYWNoZSlcbiAgICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuICAgICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcbiAgICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcbiAgICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcbiAgICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXG4gICAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuICAgICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XG4gICAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuICAgICAgaWYgKHJlbW92YWxJbmRleCkge1xuICAgICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuICAgICAgICAgIHJldHVybiB3LmFjdGl2ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcbiAgICAgIC8vIHJpZ2h0IHBsYWNlLlxuICAgICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG4gICAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuICAgICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBmcmFnID0gZnJhZ3NbaV07XG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcbiAgICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcbiAgICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG4gICAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG4gICAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcbiAgICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuICAgICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuICAgICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cbiAgICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgICAqL1xuXG4gICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG4gICAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG4gICAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG4gICAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcbiAgICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG4gICAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcbiAgICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuICAgICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuICAgICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuICAgICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xuICAgICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcbiAgICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG4gICAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cbiAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuICAgICAgaWYgKGtleSkge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xuICAgICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcbiAgICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcbiAgICAgIH1cbiAgICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcbiAgICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcbiAgICAgIHJldHVybiBmcmFnO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuICAgICAqL1xuXG4gICAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG4gICAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcbiAgICAgIGlmICghcmVmKSByZXR1cm47XG4gICAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcbiAgICAgIHZhciByZWZzO1xuICAgICAgaWYgKCF0aGlzLmZyb21PYmplY3QpIHtcbiAgICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZnMgPSB7fTtcbiAgICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaGFzaFtyZWZdID0gcmVmcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cbiAgICAgKiBwYXJlbnQgPHNlbGVjdD4uXG4gICAgICovXG5cbiAgICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG4gICAgICBpZiAodGhpcy5pc09wdGlvbikge1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcbiAgICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAgICovXG5cbiAgICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG4gICAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcbiAgICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG4gICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuICAgICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcbiAgICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG4gICAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcbiAgICAgICAgfVxuICAgICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG4gICAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuICAgICAgICAgIHJlbW92ZShhbmNob3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcbiAgICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuICAgICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuICAgICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xuICAgICAgICB9XG4gICAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAgICovXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcbiAgICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG4gICAgICAgIC8vIHR3aWNlLCBzbyBpZiB3ZSBoYXZlIGEgcGVuZGluZyBzdGFnZ2VyIGNhbGxiYWNrLFxuICAgICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuICAgICAgICAvLyBkZXN0cm95ZWQsIHdlIGNhbiBqdXN0IGxlYXZlIGl0IGluIGRldGFjaGVkIHN0YXRlLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpO1xuICAgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuICAgICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICAgKi9cblxuICAgIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG4gICAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcbiAgICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuICAgICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG4gICAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgICAgfVxuICAgICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhY2hlIGEgZnJhZ21lbnQgdXNpbmcgdHJhY2stYnkgb3IgdGhlIG9iamVjdCBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgICAqL1xuXG4gICAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG4gICAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIHZhciBpZDtcbiAgICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xuICAgICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG4gICAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkID0gdGhpcy5pZDtcbiAgICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG4gICAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsdWVbaWRdID0gZnJhZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG4gICAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnJhZy5yYXcgPSB2YWx1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICAgKi9cblxuICAgIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcbiAgICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgICAgdmFyIGZyYWc7XG4gICAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF07XG4gICAgICB9XG4gICAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnJhZztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgZnJhZ21lbnQgZnJvbSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICAgKi9cblxuICAgIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuICAgICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG4gICAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuICAgICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuICAgICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cbiAgICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuICAgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG4gICAgICAgIGZyYWcucmF3ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICAgKi9cblxuICAgIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG4gICAgICB0eXBlID0gdHlwZSArICdTdGFnZ2VyJztcbiAgICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG4gICAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcbiAgICAgIHZhciBob29rID0gaG9va3MgJiYgKGhvb2tzW3R5cGVdIHx8IGhvb2tzLnN0YWdnZXIpO1xuICAgICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAgICovXG5cbiAgICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcbiAgICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cbiAgICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG4gICAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAgICpcbiAgICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcbiAgICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuICAgICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuICAgICAqL1xuXG4gICAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICAgJGtleToga2V5LFxuICAgICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnJhZ3MpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcbiAgICAgICAgdmFyIGZyYWc7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcbiAgICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgICAgZnJhZy5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuICAgKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG4gICAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuICAgKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuICAgKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuICAgKlxuICAgKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG4gICAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBmdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuICAgIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnKGZyYWcpIHtcbiAgICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcbiAgICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG4gICAgaWYgKGZyYWcuZW5kKSB7XG4gICAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmFuZ2Uobikge1xuICAgIHZhciBpID0gLTE7XG4gICAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgcmV0W2ldID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3RyYWNrQnlLZXldXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcbiAgICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xuICB9XG5cbiAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG4gICAgfTtcbiAgfVxuXG4gIHZhciB2SWYgPSB7XG5cbiAgICBwcmlvcml0eTogSUYsXG4gICAgdGVybWluYWw6IHRydWUsXG5cbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIGlmICghZWwuX192dWVfXykge1xuICAgICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHJlbW92ZShuZXh0KTtcbiAgICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuICAgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xuICAgICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcbiAgICAgICAgICB0aGlzLmluc2VydCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcbiAgICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuICAgICAgfVxuICAgICAgLy8gbGF6eSBpbml0IGZhY3RvcnlcbiAgICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgICB9XG4gICAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcbiAgICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmZyYWcgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG4gICAgICAgIGlmICghdGhpcy5lbHNlRmFjdG9yeSkge1xuICAgICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsc2VGcmFnID0gdGhpcy5lbHNlRmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBzaG93ID0ge1xuXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcbiAgICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcbiAgICAgIGlmICh0aGlzLmVsc2VFbCkge1xuICAgICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG4gICAgICBpZiAoaW5Eb2MoZWwpKSB7XG4gICAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2dnbGUoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciB0ZXh0JDIgPSB7XG5cbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcbiAgICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcbiAgICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG4gICAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcblxuICAgICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuICAgICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuICAgICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cbiAgICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG4gICAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG4gICAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuICAgICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG4gICAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG4gICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuICAgICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcbiAgICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuICAgICAgICAgICAgc2VsZi5yYXdMaXN0ZW5lcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcbiAgICAgICAgc2VsZi5zZXQodmFsKTtcbiAgICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuICAgICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG4gICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuICAgICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgICBpZiAoZGVib3VuY2UpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG4gICAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG4gICAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgICAvL1xuICAgICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuICAgICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG4gICAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3NcbiAgICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cbiAgICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG4gICAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcbiAgICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcbiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcbiAgICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgICAgLy8gIzMwMjkgb25seSB1cGRhdGUgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gVGhpcyBwcmV2ZW50XG4gICAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG4gICAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAodmFsdWUgIT09IHRoaXMuZWwudmFsdWUpIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcbiAgICB9LFxuXG4gICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcmFkaW8gPSB7XG5cbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuICAgICAgICAgIHJldHVybiBlbC5fdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuICAgICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG4gICAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcbiAgICAgIH07XG4gICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG4gICAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZWxlY3QgPSB7XG5cbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuICAgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblxuICAgICAgLy8gYXR0YWNoIGxpc3RlbmVyXG4gICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuICAgICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICBzZWxmLnNldCh2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG4gICAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcbiAgICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgICAgfVxuXG4gICAgICAvLyBBbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IEZpcmVmb3ggcmVzZXRzXG4gICAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG4gICAgICAvLyBmb3JjZSBhIERPTSB1cGRhdGUgd2hlbmV2ZXIgdGhhdCBoYXBwZW5zLi4uXG4gICAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWluRG9jKGVsKSkge1xuICAgICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuICAgICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuICAgICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcbiAgICAgIHZhciBvcCwgdmFsO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBvcCA9IG9wdGlvbnNbaV07XG4gICAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgc2VsZWN0IHZhbHVlXG4gICAqXG4gICAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluaXRcbiAgICogQHJldHVybiB7QXJyYXl8Kn1cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XG4gICAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuICAgIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG4gICAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgICAgaWYgKG11bHRpKSB7XG4gICAgICAgICAgcmVzLnB1c2godmFsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvKipcbiAgICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG4gICAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluZGV4T2YkMShhcnIsIHZhbCkge1xuICAgIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHZhciBjaGVja2JveCA9IHtcblxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG4gICAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuICAgICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuICAgICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuICAgICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuICAgICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcbiAgICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGhhbmRsZXJzID0ge1xuICAgIHRleHQ6IHRleHQkMixcbiAgICByYWRpbzogcmFkaW8sXG4gICAgc2VsZWN0OiBzZWxlY3QsXG4gICAgY2hlY2tib3g6IGNoZWNrYm94XG4gIH07XG5cbiAgdmFyIG1vZGVsID0ge1xuXG4gICAgcHJpb3JpdHk6IE1PREVMLFxuICAgIHR3b1dheTogdHJ1ZSxcbiAgICBoYW5kbGVyczogaGFuZGxlcnMsXG4gICAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXG5cbiAgICAvKipcbiAgICAgKiBQb3NzaWJsZSBlbGVtZW50czpcbiAgICAgKiAgIDxzZWxlY3Q+XG4gICAgICogICA8dGV4dGFyZWE+XG4gICAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cbiAgICAgKiAgICAgLSB0ZXh0XG4gICAgICogICAgIC0gY2hlY2tib3hcbiAgICAgKiAgICAgLSByYWRpb1xuICAgICAqICAgICAtIG51bWJlclxuICAgICAqL1xuXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cbiAgICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG4gICAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuICAgICAgfVxuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuICAgICAgdmFyIGhhbmRsZXI7XG4gICAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG4gICAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG4gICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWwuX192X21vZGVsID0gdGhpcztcbiAgICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcbiAgICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cbiAgICAgKi9cblxuICAgIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuICAgICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG4gICAgICBpZiAoIWZpbHRlcnMpIHJldHVybjtcbiAgICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHZhciBmaWx0ZXIgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXJzW2ldLm5hbWUpO1xuICAgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuICAgICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuICAgICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuICAgICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBrZXlDb2RlIGFsaWFzZXNcbiAgdmFyIGtleUNvZGVzID0ge1xuICAgIGVzYzogMjcsXG4gICAgdGFiOiA5LFxuICAgIGVudGVyOiAxMyxcbiAgICBzcGFjZTogMzIsXG4gICAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG4gICAgdXA6IDM4LFxuICAgIGxlZnQ6IDM3LFxuICAgIHJpZ2h0OiAzOSxcbiAgICBkb3duOiA0MFxuICB9O1xuXG4gIGZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG4gICAgdmFyIGNvZGVzID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNoYXJDb2RlID0ga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuICAgICAgICAgIHJldHVybiBjaGFyQ29kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG4gICAgfSk7XG4gICAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG4gICAgICBpZiAoY29kZXMuaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHNlbGZIYW5kbGVyKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHZhciBvbiQxID0ge1xuXG4gICAgcHJpb3JpdHk6IE9OLFxuICAgIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcbiAgICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcbiAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdJRlJBTUUnICYmIHRoaXMuYXJnICE9PSAnbG9hZCcpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgb24oc2VsZi5lbC5jb250ZW50V2luZG93LCBzZWxmLmFyZywgc2VsZi5oYW5kbGVyLCBzZWxmLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcbiAgICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXG4gICAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuICAgICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG4gICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuICAgICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcbiAgICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuICAgICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG4gICAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuICAgICAgfVxuICAgICAgLy8ga2V5IGZpbHRlclxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuICAgICAgfSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblxuICAgICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuICAgICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuICAgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XG4gIHZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG4gIHZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcbiAgdmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgdmFyIHRlc3RFbCA9IG51bGw7XG5cbiAgdmFyIHN0eWxlID0ge1xuXG4gICAgZGVlcDogdHJ1ZSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcbiAgICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcbiAgICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcbiAgICAgIHZhciBuYW1lLCB2YWw7XG4gICAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcbiAgICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcbiAgICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobmFtZSBpbiB2YWx1ZSkge1xuICAgICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcbiAgICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcbiAgICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbDtcbiAgICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG4gICAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xuICAgICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3NcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG4gICAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLnRyaW0oKTtcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gIH07XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuICAgKiAtIGNhY2hlIHJlc3VsdFxuICAgKiAtIGF1dG8gcHJlZml4XG4gICAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG4gICAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuICAgICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcbiAgICB9XG4gICAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcbiAgICBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wQ2FjaGVbcmVzXSA9IHJlcztcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICAgKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcbiAgICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuICAgIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuICAgIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG4gICAgaWYgKCF0ZXN0RWwpIHtcbiAgICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIH1cbiAgICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcbiAgICB2YXIgcHJlZml4ZWQ7XG4gICAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtlYmFiOiBwcm9wLFxuICAgICAgICBjYW1lbDogY2FtZWxcbiAgICAgIH07XG4gICAgfVxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuICAgICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG4gICAgICAgICAgY2FtZWw6IHByZWZpeGVkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8geGxpbmtcbiAgdmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG4gIHZhciB4bGlua1JFID0gL154bGluazovO1xuXG4gIC8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcbiAgdmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcbiAgLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4gIC8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuICB2YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xuICAvLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuICAvLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcbiAgdmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcblxuICAvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4gIC8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG4gIHZhciBtb2RlbFByb3BzID0ge1xuICAgIHZhbHVlOiAnX3ZhbHVlJyxcbiAgICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcbiAgICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG4gIH07XG5cbiAgdmFyIGJpbmQkMSA9IHtcblxuICAgIHByaW9yaXR5OiBCSU5ELFxuXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuICAgICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICAgIGlmICghYXR0cikge1xuICAgICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3NcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuICAgICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuICAgICAgaWYgKHRva2Vucykge1xuICAgICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuICAgICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG4gICAgICAgICAgLy8gd2FybiBzcmNcbiAgICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gd2FybiBzdHlsZVxuICAgICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICsgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLmludmFsaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcbiAgICAgIGlmICh0aGlzLmFyZykge1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gICAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cbiAgICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSkge1xuICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuICAgICAgaWYgKHRoaXMubW9kaWZpZXJzLmNhbWVsKSB7XG4gICAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcbiAgICAgIH1cbiAgICAgIGlmICghaW50ZXJwICYmIGF0dHJXaXRoUHJvcHNSRS50ZXN0KGF0dHIpICYmIGF0dHIgaW4gZWwpIHtcbiAgICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblxuICAgICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xuICAgICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuICAgICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XG4gICAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuICAgICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XG4gICAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuICAgICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcbiAgICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG4gICAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuICAgICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcbiAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBlbCA9IHtcblxuICAgIHByaW9yaXR5OiBFTCxcblxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdGhpcy5hcmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcbiAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuICAgICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG4gICAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcmVmID0ge1xuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY2xvYWsgPSB7XG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLy8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG4gIHZhciBkaXJlY3RpdmVzID0ge1xuICAgIHRleHQ6IHRleHQkMSxcbiAgICBodG1sOiBodG1sLFxuICAgICdmb3InOiB2Rm9yLFxuICAgICdpZic6IHZJZixcbiAgICBzaG93OiBzaG93LFxuICAgIG1vZGVsOiBtb2RlbCxcbiAgICBvbjogb24kMSxcbiAgICBiaW5kOiBiaW5kJDEsXG4gICAgZWw6IGVsLFxuICAgIHJlZjogcmVmLFxuICAgIGNsb2FrOiBjbG9ha1xuICB9O1xuXG4gIHZhciB2Q2xhc3MgPSB7XG5cbiAgICBkZWVwOiB0cnVlLFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuICAgICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcbiAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG4gICAgfSxcblxuICAgIGNsZWFudXA6IGZ1bmN0aW9uIGNsZWFudXAodmFsdWUpIHtcbiAgICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG4gICAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG4gICAgICB2YXIgaSA9IHByZXZLZXlzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmluZGV4T2Yoa2V5KSA8IDApIHtcbiAgICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuICAgKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuICAgKi9cblxuICBmdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG4gICAgICAgIGlmIChfa2V5KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzLnB1c2goX2tleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuICAgICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgb3IgcmVtb3ZlIGEgY2xhc3MvY2xhc3NlcyBvbiBhbiBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgY2xhc3MgbmFtZS4gVGhpcyBtYXkgb3IgbWF5IG5vdFxuICAgKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG4gICAqICAgICAgICAgICAgICAgICAgICAgbmFtZXMgYXQgb25jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcbiAgICBrZXkgPSBrZXkudHJpbSgpO1xuICAgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgICAgZm4oZWwsIGtleSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cbiAgICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuICAgIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG4gICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbihlbCwga2V5c1tpXSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbXBvbmVudCA9IHtcblxuICAgIHByaW9yaXR5OiBDT01QT05FTlQsXG5cbiAgICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcbiAgICAgKlxuICAgICAqIC0gc3RhdGljOlxuICAgICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG4gICAgICpcbiAgICAgKiAtIGR5bmFtaWM6XG4gICAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICAgKi9cblxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICBpZiAoIXRoaXMuZWwuX192dWVfXykge1xuICAgICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuICAgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuICAgICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuICAgICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gdGhpcy5Db21wb25lbnQgPSBudWxsO1xuICAgICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuICAgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuICAgICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuICAgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cbiAgICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcbiAgICAgICAgLy8gY2FjaGVkLCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXNlZCBlbHNld2hlcmUgdGhpcyBhdHRyaWJ1dGVcbiAgICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJzppcycpO1xuICAgICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG4gICAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBoeXBoZW5hdGUodGhpcy5kZXNjcmlwdG9yLnJlZikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuICAgICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHVibGljIHVwZGF0ZSwgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyIGluIHRoZSBkeW5hbWljXG4gICAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICAgKi9cblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcbiAgICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuICAgICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuICAgICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG4gICAgICpcbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuICAgICAqIGZpbmlzaGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuXG4gICAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcbiAgICAgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcbiAgICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5tb3VudENvbXBvbmVudChjYik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcbiAgICAgKiB0aGUgY2hpbGQgdm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcbiAgICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgICAgIGNiKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHVzaW5nIHRoZSBjdXJyZW50IGNvbnN0cnVjdG9yIGFuZFxuICAgICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcbiAgICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcbiAgICAgKiB0aGUgc2FtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cblxuICAgIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuICAgICAgLy8gYWN0dWFsIG1vdW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG4gICAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcbiAgICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG4gICAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG4gICAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcbiAgICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcbiAgICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuICAgICAqIHBlbmRpbmcgY2FsbGJhY2suXG4gICAgICovXG5cbiAgICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gaW52YWxpZGF0ZVBlbmRpbmcoKSB7XG4gICAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG4gICAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG4gICAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXG4gICAgICovXG5cbiAgICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG4gICAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuICAgICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuICAgICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG4gICAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcbiAgICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuICAgICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuICAgICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcbiAgICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcbiAgICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG4gICAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG4gICAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG4gICAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG4gICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcbiAgICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cbiAgICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG4gICAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuICAgICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG4gICAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG4gICAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAgICAgKi9cblxuICAgIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuICAgICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuICAgICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuICAgICAqL1xuXG4gICAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuICAgICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuICAgICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcbiAgICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgLy8gcmVtb3ZlIHJlZlxuICAgICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG4gICAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG4gICAgICAvLyBsYXRlci5cbiAgICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cbiAgICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuICAgICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG4gICAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxuICAgICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XG4gICAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG4gICAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcbiAgICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xuICAgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG4gICAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuXG4gICAgdHJhbnNpdGlvbjogZnVuY3Rpb24gdHJhbnNpdGlvbih0YXJnZXQsIGNiKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcbiAgICAgIC8vIGZvciBkZXZ0b29sIGluc3BlY3Rpb25cbiAgICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG4gICAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG4gICAgICB0aGlzLmNoaWxkVk0gPSB0YXJnZXQ7XG4gICAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG4gICAgICAgIGNhc2UgJ2luLW91dCc6XG4gICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb3V0LWluJzpcbiAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVuYmluZC5cbiAgICAgKi9cblxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuICAgICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcbiAgICAgIHRoaXMudW5idWlsZCgpO1xuICAgICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG4gICAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuICAgICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuICAgIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcbiAgICB2YXIgY2FsbGVkID0gMDtcbiAgICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuICB2YXIgZW1wdHkgPSB7fTtcblxuICAvLyByZWdleGVzXG4gIHZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xuICB2YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXG4gIC8qKlxuICAgKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAgICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICAgKi9cblxuICBmdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuICAgIHZhciBwcm9wcyA9IFtdO1xuICAgIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcbiAgICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcbiAgICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuICAgICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG4gICAgICAvLyBzbyB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBwYXRoIGhlcmVcbiAgICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcbiAgICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgcHJvcCA9IHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuICAgICAgICByYXc6IG51bGxcbiAgICAgIH07XG5cbiAgICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG4gICAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cbiAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcbiAgICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuICAgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gICAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuICAgICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcbiAgICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XG4gICAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG4gICAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXG4gICAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xuICAgICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJiAhc2V0dGFibGVQYXRoUkUudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcbiAgICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cbiAgICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcbiAgICAgICAgICB3YXJuKCdQcm9wIFwiJyArIG5hbWUgKyAnXCIgZXhwZWN0cyBhIHR3by13YXkgYmluZGluZyB0eXBlLicsIHZtKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcbiAgICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcbiAgICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG4gICAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG4gICAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBwdXNoIHByb3BcbiAgICAgIHByb3BzLnB1c2gocHJvcCk7XG4gICAgfVxuICAgIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICAgKi9cblxuICBmdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG4gICAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG4gICAgICB2bS5fcHJvcHMgPSB7fTtcbiAgICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcbiAgICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuICAgICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgICAgcmF3ID0gcHJvcC5yYXc7XG4gICAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG4gICAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gICAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG4gICAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcbiAgICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcbiAgICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG4gICAgICAgICAgLy8gZHluYW1pYyBwcm9wXG4gICAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuICAgICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcbiAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuICAgICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcbiAgICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcbiAgICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG4gICAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG4gICAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG4gICAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2VcbiAgICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuICAgICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuICAgICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXG4gICAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG4gICAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcbiAgICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuICAgKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcbiAgICogcHJvY2Vzc2VkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAgICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBmdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcbiAgICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG4gICAgdmFyIHZhbHVlID0gcmF3VmFsdWU7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG4gICAgfVxuICAgIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuICAgIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuICAgIGlmICghYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pKSB7XG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGlzU2ltcGxlICYmICFjb2VyY2VkKSB7XG4gICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZuKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmbih2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG5cbiAgZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gICAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIHByb3AncyB2YWx1ZSBvbiBhIHZtLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKi9cblxuICBmdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuICAgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCkge1xuICAgIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgICBpZiAoIWhhc093bihvcHRpb25zLCAnZGVmYXVsdCcpKSB7XG4gICAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuICAgIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcbiAgICBpZiAoaXNPYmplY3QoZGVmKSkge1xuICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuICAgIH1cbiAgICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICAgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKi9cblxuICBmdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuICAgIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXG4gICAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuICAgIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICAgIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuICAgIHZhciB2YWxpZCA9ICF0eXBlO1xuICAgIHZhciBleHBlY3RlZFR5cGVzID0gW107XG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuICAgICAgICB0eXBlID0gW3R5cGVdO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuICAgICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG4gICAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcbiAgICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3I7XG4gICAgaWYgKHZhbGlkYXRvcikge1xuICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcbiAgICBpZiAoIWNvZXJjZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG5cbiAgZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICAgIHZhciB2YWxpZDtcbiAgICB2YXIgZXhwZWN0ZWRUeXBlO1xuICAgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuICAgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuICAgICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG4gICAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuICAgICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuICAgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG4gICAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuICAgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuICAgICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG4gICAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcbiAgICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG4gICAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiB2YWxpZCxcbiAgICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHZhbHVlXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWwpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xuICB9XG5cbiAgdmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2RlcztcblxuICB2YXIgcHJvcERlZiA9IHtcblxuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICB2YXIgY2hpbGQgPSB0aGlzLnZtO1xuICAgICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuICAgICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcbiAgICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3A7XG4gICAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG4gICAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuICAgICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVk7XG5cbiAgICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcbiAgICAgIH0sIHtcbiAgICAgICAgdHdvV2F5OiB0d29XYXksXG4gICAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcbiAgICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxuICAgICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG4gICAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cbiAgICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblxuICAgICAgLy8gc2V0dXAgdHdvLXdheSBiaW5kaW5nXG4gICAgICBpZiAodHdvV2F5KSB7XG4gICAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcbiAgICAgICAgLy8gdGhlIGNyZWF0ZWQgaG9vayAoYWZ0ZXIgZGF0YSBvYnNlcnZhdGlvbilcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKGNoaWxkLCBjaGlsZEtleSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG4gICAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4MylcbiAgICAgICAgICAgIHN5bmM6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHF1ZXVlJDEgPSBbXTtcbiAgdmFyIHF1ZXVlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBQdXNoIGEgam9iIGludG8gdGhlIHF1ZXVlLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2JcbiAgICovXG5cbiAgZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcbiAgICBxdWV1ZSQxLnB1c2goam9iKTtcbiAgICBpZiAoIXF1ZXVlZCkge1xuICAgICAgcXVldWVkID0gdHJ1ZTtcbiAgICAgIG5leHRUaWNrKGZsdXNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG4gICAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIC8vIEZvcmNlIGxheW91dFxuICAgIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlJDEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHF1ZXVlJDFbaV0oKTtcbiAgICB9XG4gICAgcXVldWUkMSA9IFtdO1xuICAgIHF1ZXVlZCA9IGZhbHNlO1xuICAgIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuICAgIC8vIHVudXNlZCB2YXJpYWJsZSBmXG4gICAgcmV0dXJuIGY7XG4gIH1cblxuICB2YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuICB2YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbiAgdmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xuICB2YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXG4gIC8qKlxuICAgKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG4gICAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcbiAgICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG4gICAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcbiAgICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuICAgKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuICAgKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuICAgKlxuICAgKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG4gICAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2VcbiAgICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuICAgKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG4gICAqL1xuXG4gIHZhciByYWYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgdmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgPyBmdW5jdGlvbiAoZm4pIHtcbiAgICByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgcmFmKGZuKTtcbiAgICB9KTtcbiAgfSA6IGZ1bmN0aW9uIChmbikge1xuICAgIHNldFRpbWVvdXQoZm4sIDUwKTtcbiAgfTtcblxuICAvKipcbiAgICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG4gICAqIG9mIHRoZSB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqL1xuICBmdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG4gICAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuICAgIHRoaXMuaG9va3MgPSBob29rcztcbiAgICB0aGlzLnZtID0gdm07XG4gICAgLy8gYXN5bmMgc3RhdGVcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICAgIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xuICAgIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcbiAgICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlICE9PSBUWVBFX1RSQU5TSVRJT04gJiYgdGhpcy50eXBlICE9PSBUWVBFX0FOSU1BVElPTikge1xuICAgICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBiaW5kXG4gICAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICBzZWxmW21dID0gYmluZChzZWxmW21dLCBzZWxmKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcbiAgICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG4gICAqIDMuIGFkZCBlbnRlciBjbGFzc1xuICAgKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG4gICAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAgICogNi4gcmVmbG93XG4gICAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAgICogICAgLSB0cmFuc2l0aW9uOlxuICAgKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcbiAgICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICAgKiAgICAtIGFuaW1hdGlvbjpcbiAgICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuICAgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gICAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gICAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICAgKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gICAqICAgIGFmdGVyRW50ZXIgaG9vay5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcbiAgICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpO1xuICAgIHRoaXMuY2IgPSBjYjtcbiAgICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIG9wKCk7XG4gICAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gICAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcbiAgICBpZiAodGhpcy5lbnRlcmVkKSB7XG4gICAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgICB9XG4gICAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWQ7XG4gICAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gICAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG4gICAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG4gICAqL1xuXG4gIHAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcbiAgICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcbiAgICB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gICAgfSk7XG4gICAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lO1xuICAgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuICAgIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuICAgICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG4gICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudGVyRG9uZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gICAqL1xuXG4gIHAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcbiAgICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuICAgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cbiAgICogMi4gY2FsbCBiZWZvcmVMZWF2ZSBob29rXG4gICAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAgICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICAgKiA1LiByZWZsb3cgaWYgbm8gZXhwbGljaXQganMgY2FsbGJhY2sgaXMgcHJvdmlkZWRcbiAgICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICAgKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuICAgKiAgICAgICAgd2FpdCBmb3IgZW5kIGV2ZW50LCByZW1vdmUgY2xhc3MsIHRoZW4gZG9uZSBpZlxuICAgKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAgICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAgICogICAgICAgIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAgICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICAgKiAgICBhZnRlckxlYXZlIGhvb2suXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBwJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gICAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gICAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcbiAgICB0aGlzLm9wID0gb3A7XG4gICAgdGhpcy5jYiA9IGNiO1xuICAgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gICAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gICAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcbiAgICBpZiAodGhpcy5sZWZ0KSB7XG4gICAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgICB9XG4gICAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XG4gICAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG4gICAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuICAgIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuICAgICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG4gICAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cbiAgICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG4gICAgICAgIHRoaXMubGVhdmVEb25lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICAgKi9cblxuICBwJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcbiAgICBpZiAodHlwZSkge1xuICAgICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAgICovXG5cbiAgcCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmxlZnQgPSB0cnVlO1xuICAgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gICAgdGhpcy5vcCgpO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gICAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuICAgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gICAgdGhpcy5vcCA9IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuICAgKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG4gICAqL1xuXG4gIHAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcbiAgICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuICAgICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcbiAgICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuICAgICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xuICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gICAgfVxuICAgIGlmIChoYXNQZW5kaW5nKSB7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuICAgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAgICovXG5cbiAgcCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG4gICAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cbiAgICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuICAgKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuICAgKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuICAgKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3JcbiAgICogYW5pbWF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBwJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuICAgIGlmIChob29rKSB7XG4gICAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcbiAgICAgIH1cbiAgICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuICAgKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAqL1xuXG4gIHAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAgIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuICAgIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cbiAgICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG4gICAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICAgIGRvY3VtZW50LmhpZGRlbiB8fFxuICAgIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuICAgIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG4gICAgLy8gZWxlbWVudCBpcyBoaWRkZW5cbiAgICBpc0hpZGRlbih0aGlzLmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xuICAgIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcbiAgICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcbiAgICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcbiAgICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuICAgIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG4gICAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuICAgICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlKSB7XG4gICAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcCQxLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG4gICAgICAgIG9mZihlbCwgZXZlbnQsIG9uRW5kKTtcbiAgICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gICAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIG9uKGVsLCBldmVudCwgb25FbmQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuICAgKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gICAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuICAgICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3RcbiAgICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICB2YXIgdHJhbnNpdGlvbiQxID0ge1xuXG4gICAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG4gICAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuICAgICAgaWQgPSBpZCB8fCAndic7XG4gICAgICBvbGRJZCA9IG9sZElkIHx8ICd2JztcbiAgICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuICAgICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG4gICAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGludGVybmFsRGlyZWN0aXZlcyA9IHtcbiAgICBzdHlsZTogc3R5bGUsXG4gICAgJ2NsYXNzJzogdkNsYXNzLFxuICAgIGNvbXBvbmVudDogY29tcG9uZW50LFxuICAgIHByb3A6IHByb3BEZWYsXG4gICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG4gIH07XG5cbiAgLy8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG4gIHZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xuICB2YXIgb25SRSA9IC9edi1vbjp8XkAvO1xuICB2YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xuICB2YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG4gIHZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcblxuICAvLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxuICB2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG4gIHZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblxuICAvKipcbiAgICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuICAgKiBmdW5jdGlvbiwgd2hpY2ggcmVjdXJzaXZlbHkgY29udGFpbnMgbW9yZSBsaW5rIGZ1bmN0aW9uc1xuICAgKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAgICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG4gICAqIGZvciBwYXJ0aWFsIGNvbXBpbGF0aW9uIGlmIHRoZSBwYXJ0aWFsIGFyZ3VtZW50IGlzIHRydWUuXG4gICAqXG4gICAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcbiAgICogcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBhbGwgZGlyZWN0aXZlc1xuICAgKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuICAgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cbiAgICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcbiAgICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuICAgIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuICAgICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcbiAgICAgKiBpbnN0YW5jZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAgKi9cblxuICAgIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZWwuY2hpbGROb2Rlcyk7XG4gICAgICAvLyBsaW5rXG4gICAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcbiAgICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH0sIHZtKTtcbiAgICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG4gICAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICovXG5cbiAgZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICgnZGV2ZWxvcG1lbnQnID09PSAncHJvZHVjdGlvbicpIHt9XG4gICAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgbGlua2VyKCk7XG4gICAgdmFyIGRpcnMgPSB2bS5fZGlyZWN0aXZlcy5zbGljZShvcmlnaW5hbERpckNvdW50KTtcbiAgICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZGlyc1tpXS5fYmluZCgpO1xuICAgIH1cbiAgICByZXR1cm4gZGlycztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuICAgIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gICAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcbiAgICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICAgKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcbiAgICogdGhlIHByb2Nlc3MuXG4gICAqXG4gICAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG4gICAqIGluZm9ybWF0aW9uIHRvIGF2b2lkIHJldGFpbmluZyBhZGRpdGlvbmFsIGNsb3N1cmVzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICAgKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gICAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcbiAgICBmdW5jdGlvbiB1bmxpbmsoZGVzdHJveWluZykge1xuICAgICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcbiAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG4gICAgICAgIHRlYXJkb3duRGlycyhjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGV4cG9zZSBsaW5rZWQgZGlyZWN0aXZlc1xuICAgIHVubGluay5kaXJzID0gZGlycztcbiAgICByZXR1cm4gdW5saW5rO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuICAgKi9cblxuICBmdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcbiAgICB2YXIgaSA9IGRpcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG4gICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG4gICAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjb21waWxlQW5kTGlua1Byb3BzKHZtLCBlbCwgcHJvcHMsIHNjb3BlKSB7XG4gICAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuICAgIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHByb3BzTGlua0ZuKHZtLCBzY29wZSk7XG4gICAgfSwgdm0pO1xuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG4gICAqXG4gICAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICAgKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcbiAgICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcbiAgICpcbiAgICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG4gICAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG4gICAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuICAgIHZhciBjb250ZXh0TGlua0ZuLCByZXBsYWNlckxpbmtGbjtcblxuICAgIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG4gICAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuICAgIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcbiAgICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcbiAgICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuICAgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG4gICAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuICAgICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG4gICAgICAgICAgLy8gMy4gcmVwbGFjZXIgYXR0cmlidXRlc1xuICAgICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG4gICAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcbiAgICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcbiAgICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcbiAgICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuICAgICAgICAvLyBhbGxvdyBzbG90c1xuICAgICAgICBhdHRyLm5hbWUgIT09ICdzbG90JztcbiAgICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIic7XG4gICAgICB9KTtcbiAgICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDE7XG4gICAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuICAgICAgLy8gbGluayBjb250ZXh0IHNjb3BlIGRpcnNcbiAgICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG4gICAgICB2YXIgY29udGV4dERpcnM7XG4gICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0TGlua0ZuKSB7XG4gICAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcbiAgICAgICAgfSwgY29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGxpbmsgc2VsZlxuICAgICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG4gICAgICB9LCB2bSk7XG5cbiAgICAgIC8vIHJldHVybiB0aGUgdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGNvbnRleHRcbiAgICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBpbGUgYSBub2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuIGJhc2VkIG9uIHRoZVxuICAgKiBub2RlIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICAgKi9cblxuICBmdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICAgIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuICAgICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG4gICAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50KGVsLCBvcHRpb25zKSB7XG4gICAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG4gICAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAgLy8ganVzdCBiaW5kIGl0IGFzIGFuIGF0dHIgZGlyZWN0aXZlIGZvciB2YWx1ZS5cbiAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG4gICAgICBpZiAodG9rZW5zKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG4gICAgICAgIGVsLnZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBsaW5rRm47XG4gICAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICAgIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gICAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG4gICAgaWYgKGhhc0F0dHJzKSB7XG4gICAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcbiAgICBpZiAoIWxpbmtGbikge1xuICAgICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8vIGNoZWNrIGNvbXBvbmVudFxuICAgIGlmICghbGlua0ZuKSB7XG4gICAgICBsaW5rRm4gPSBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgaWYgKCFsaW5rRm4gJiYgaGFzQXR0cnMpIHtcbiAgICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmtGbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gICAqXG4gICAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cbiAgICovXG5cbiAgZnVuY3Rpb24gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gICAgaWYgKG5vZGUuX3NraXApIHtcbiAgICAgIHJldHVybiByZW1vdmVUZXh0O1xuICAgIH1cblxuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuICAgIGlmICghdG9rZW5zKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcbiAgICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG4gICAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcbiAgICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuICAgIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG4gICAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIG5leHQuX3NraXAgPSB0cnVlO1xuICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgfVxuXG4gICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdmFyIGVsLCB0b2tlbjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuICAgKi9cblxuICBmdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG4gICAgcmVtb3ZlKG5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcbiAgICB2YXIgZWw7XG4gICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuICAgICAgICBzZXRUb2tlblR5cGUoJ2h0bWwnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuICAgICAgICAvLyBmcmFnLmNsb25lTm9kZSh0cnVlKSwgc28gd2UgaGF2ZSB0byBnaXZlIGl0XG4gICAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG4gICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcbiAgICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFRva2VuVHlwZSh0eXBlKSB7XG4gICAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcbiAgICAgIHRva2VuLmRlc2NyaXB0b3IgPSB7XG4gICAgICAgIG5hbWU6IHR5cGUsXG4gICAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcbiAgICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZWw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuICAgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAgICovXG5cbiAgZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZykge1xuICAgIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpO1xuICAgICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgICAgaWYgKHRva2VuLnRhZykge1xuICAgICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcbiAgICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBub2RlLmRhdGEgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS5fYmluZERpcih0b2tlbi5kZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG4gICAgdmFyIGxpbmtGbnMgPSBbXTtcbiAgICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcbiAgICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcbiAgICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG4gICAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuICAgIH1cbiAgICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cbiAgICovXG5cbiAgZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgICAgdmFyIG5vZGUsIG5vZGVMaW5rRm4sIGNoaWxkcmVuTGlua0ZuO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcbiAgICAgICAgbm9kZSA9IG5vZGVzW25dO1xuICAgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShub2RlLmNoaWxkTm9kZXMpO1xuICAgICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcbiAgICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcbiAgICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICovXG5cbiAgZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuICAgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG4gICAgaWYgKGRlZikge1xuICAgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIHRhZywgJycsIG9wdGlvbnMsIGRlZik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG4gICAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICAgKi9cblxuICBmdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuICAgIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0ge1xuICAgICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgICAgcmVmOiByZWYsXG4gICAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcbiAgICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgICAgICBpZiAocmVmKSB7XG4gICAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgfTtcbiAgICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG4gICAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuICAgKiBJZiBpdCBmaW5kcyBvbmUsIHJldHVybiBhIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtBcnJheX0gYXR0cnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuICAgIC8vIHNraXAgdi1wcmVcbiAgICBpZiAoZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBza2lwO1xuICAgIH1cbiAgICAvLyBza2lwIHYtZWxzZSBibG9jaywgYnV0IG9ubHkgaWYgZm9sbG93aW5nIHYtaWZcbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuICAgICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICByZXR1cm4gc2tpcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGF0dHIgPSBhdHRyc1tpXTtcbiAgICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG4gICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcbiAgICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcbiAgICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG4gICAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcbiAgICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGVybURlZikge1xuICAgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tpcCgpIHt9XG4gIHNraXAudGVybWluYWwgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG4gICAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG4gICAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAgICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge09iamVjdH0gZGVmXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cbiAgICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cbiAgICovXG5cbiAgZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgIHZhciBkZXNjcmlwdG9yID0ge1xuICAgICAgbmFtZTogZGlyTmFtZSxcbiAgICAgIGFyZzogYXJnLFxuICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIHJhdzogdmFsdWUsXG4gICAgICBhdHRyOiByYXdOYW1lLFxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgICBkZWY6IGRlZlxuICAgIH07XG4gICAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcbiAgICBpZiAoZGlyTmFtZSA9PT0gJ2ZvcicgfHwgZGlyTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuICAgICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcbiAgICB9XG4gICAgdmFyIGZuID0gZnVuY3Rpb24gdGVybWluYWxOb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH07XG4gICAgZm4udGVybWluYWwgPSB0cnVlO1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuICAgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuICAgIHZhciBkaXJzID0gW107XG4gICAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGF0dHIgPSBhdHRyc1tpXTtcbiAgICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuICAgICAgLy8gcmVzZXQgYXJnXG4gICAgICBhcmcgPSBudWxsO1xuICAgICAgLy8gY2hlY2sgbW9kaWZpZXJzXG4gICAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXG4gICAgICAvLyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbnNcbiAgICAgIGlmICh0b2tlbnMpIHtcbiAgICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuICAgICAgICBhcmcgPSBuYW1lO1xuICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuICAgICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2VcblxuICAgICAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZTogdHJhbnNpdGlvblxuICAgICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcbiAgICAgICAgICBwdXNoRGlyKCd0cmFuc2l0aW9uJywgaW50ZXJuYWxEaXJlY3RpdmVzLnRyYW5zaXRpb24pO1xuICAgICAgICB9IGVsc2VcblxuICAgICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuICAgICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG4gICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcbiAgICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXG4gICAgICAgICAgICAgICAgLy8gc2tpcCB2LWVsc2UgKHdoZW4gdXNlZCB3aXRoIHYtc2hvdylcbiAgICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG4gICAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVzaCBhIGRpcmVjdGl2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtpbnRlcnBUb2tlbnNdXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG4gICAgICB2YXIgaGFzT25lVGltZVRva2VuID0gaW50ZXJwVG9rZW5zICYmIGhhc09uZVRpbWUoaW50ZXJwVG9rZW5zKTtcbiAgICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICAgIGRpcnMucHVzaCh7XG4gICAgICAgIG5hbWU6IGRpck5hbWUsXG4gICAgICAgIGF0dHI6IHJhd05hbWUsXG4gICAgICAgIHJhdzogcmF3VmFsdWUsXG4gICAgICAgIGRlZjogZGVmLFxuICAgICAgICBhcmc6IGFyZyxcbiAgICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgICAgIC8vIGNvbnZlcnNpb24gZnJvbSBpbnRlcnBvbGF0aW9uIHN0cmluZ3Mgd2l0aCBvbmUtdGltZSB0b2tlblxuICAgICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuICAgICAgICBleHByZXNzaW9uOiBwYXJzZWQgJiYgcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG4gICAgICAgIGhhc09uZVRpbWU6IGhhc09uZVRpbWVUb2tlblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGRpcnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cblxuICBmdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG4gICAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcbiAgICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cbiAgICovXG5cbiAgZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4oZGlyZWN0aXZlcykge1xuICAgIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuICAgICAgdmFyIGkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG4gICAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNTY3JpcHQoZWwpIHtcbiAgICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xuICB9XG5cbiAgdmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS87XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuICAgKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG4gICAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gICAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcbiAgICogaW4gdi1mb3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICAgKi9cblxuICBmdW5jdGlvbiB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKSB7XG4gICAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAgIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuICAgIC8vIHBhcmVudCBzY29wZS4gd2UgYXJlIG11dGF0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBoZXJlXG4gICAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAgIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcbiAgICB9XG4gICAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuICAgIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcbiAgICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcbiAgICAgIGVsID0gcGFyc2VUZW1wbGF0ZShlbCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+JztcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG4gICAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuICAgICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG4gICAgICBwcmVwZW5kKGNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbCk7XG4gICAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gZWw7XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuICAgKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAgICovXG5cbiAgZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcbiAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuICAgIGlmIChmcmFnKSB7XG4gICAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcbiAgICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG4gICAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuICAgICAgICBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMSB8fFxuICAgICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuICAgICAgICAvLyBzaW5nbGUgbmVzdGVkIGNvbXBvbmVudFxuICAgICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG4gICAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG4gICAgICAgIHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG4gICAgICAgIC8vIGZvciBibG9ja1xuICAgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcbiAgICAgICAgLy8gaWYgYmxvY2tcbiAgICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgICByZXR1cm4gZnJhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcbiAgICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG4gICAgICAgICAgcmV0dXJuIHJlcGxhY2VyO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBleHRyYWN0IGEgY29tcG9uZW50IGNvbnRhaW5lcidzIGF0dHJpYnV0ZXNcbiAgICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG5cbiAgZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuICAgKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdG9cbiAgICovXG5cbiAgZnVuY3Rpb24gbWVyZ2VBdHRycyhmcm9tLCB0bykge1xuICAgIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcbiAgICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgICB2YXIgbmFtZSwgdmFsdWU7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xhc3MnICYmICFwYXJzZVRleHQodmFsdWUpICYmICh2YWx1ZSA9IHZhbHVlLnRyaW0oKSkpIHtcbiAgICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuICAgKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuICAgKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuICAgKiB0aGUgc2xvdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuICAgIGlmICghY29udGVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY29udGVudHMgPSB2bS5fc2xvdENvbnRlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIgZWwsIG5hbWU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZWwgPSBjb250ZW50LmNoaWxkcmVuW2ldO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcbiAgICAgICAgKGNvbnRlbnRzW25hbWVdIHx8IChjb250ZW50c1tuYW1lXSA9IFtdKSkucHVzaChlbCk7XG4gICAgICB9XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG4gICAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuICAgICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuICAgIH1cbiAgICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2RlcztcbiAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICAgKi9cblxuICBmdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIG5vZGVzID0gdG9BcnJheShub2Rlcyk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBub2RlID0gbm9kZXNbaV07XG4gICAgICBpZiAoaXNUZW1wbGF0ZShub2RlKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9XG5cblxuXG4gIHZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuICBcdGNvbXBpbGU6IGNvbXBpbGUsXG4gIFx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcbiAgXHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG4gIFx0dHJhbnNjbHVkZTogdHJhbnNjbHVkZSxcbiAgXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xuICB9KTtcblxuICBmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcbiAgICAvKipcbiAgICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuICAgICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcbiAgICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG4gICAgICovXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcbiAgICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcbiAgICAgICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuICAgICAqIC0gb2JzZXJ2ZWQgZGF0YVxuICAgICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgICAqIC0gdXNlciBtZXRob2RzXG4gICAgICogLSBtZXRhIHByb3BlcnRpZXNcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2luaXRQcm9wcygpO1xuICAgICAgdGhpcy5faW5pdE1ldGEoKTtcbiAgICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG4gICAgICB0aGlzLl9pbml0RGF0YSgpO1xuICAgICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgcHJvcHMuXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuICAgICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcbiAgICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgKyAncHJvdmlkZWQgYXQgaW5zdGFudGlhdGlvbi4nLCB0aGlzKTtcbiAgICAgIH1cbiAgICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuICAgICAgZWwgPSBvcHRpb25zLmVsID0gcXVlcnkoZWwpO1xuICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG4gICAgICA/IGNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSkgOiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcbiAgICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgICBkYXRhID0ge307XG4gICAgICAgICdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcbiAgICAgIH1cbiAgICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuICAgICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICAgIHZhciBpLCBrZXk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuICAgICAgICAvLyAxLiBpdCdzIG5vdCBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wXG4gICAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuICAgICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcbiAgICAgICAgaWYgKCFwcm9wcyB8fCAhaGFzT3duKHByb3BzLCBrZXkpKSB7XG4gICAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgICAgfSBlbHNlIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIG9ic2VydmUgZGF0YVxuICAgICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuICAgICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG4gICAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcbiAgICAgIHZhciBrZXlzLCBrZXksIGk7XG4gICAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcbiAgICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG4gICAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG4gICAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG4gICAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcbiAgICAgICAgICAvLyBuZXcgcHJvcGVydHlcbiAgICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG4gICAgICB0aGlzLl9kaWdlc3QoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuICAgICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3BcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcbiAgICAgICAgLy8gYmUgY2FsbGVkIGJ5IGNoaWxkIHNjb3BlcyB2aWFcbiAgICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIodmFsKSB7XG4gICAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcbiAgICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBub29wKCkge31cbiAgICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkO1xuICAgICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgICAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcbiAgICAgICAgICB2YXIgZGVmID0ge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpO1xuICAgICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlZi5nZXQgPSB1c2VyRGVmLmdldCA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlID8gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IGJpbmQodXNlckRlZi5nZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuICAgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG4gICAgICAgIGxhenk6IHRydWVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuICAgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuICAgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoRGVwLnRhcmdldCkge1xuICAgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcbiAgICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuICAgICAqIGNoaWxkIGNvbXBvbmVudHMuXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzO1xuICAgICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgICB0aGlzW2tleV0gPSBiaW5kKG1ldGhvZHNba2V5XSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuICAgICAgaWYgKG1ldGFzKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblxuICBmdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG4gICAgLyoqXG4gICAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICAgICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuICAgICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcbiAgICAgIH1cbiAgICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG4gICAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcbiAgICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG4gICAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuICAgICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuICAgICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuICAgICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cbiAgICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG4gICAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgICAgIGlmICghaGFzaCkgcmV0dXJuO1xuICAgICAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGo7XG4gICAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuICAgICAgICBpZiAoaXNBcnJheShoYW5kbGVycykpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuICAgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kcyAmJiBtZXRob2RzW2hhbmRsZXJdO1xuICAgICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpO1xuICAgICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBvbkF0dGFjaGVkKCkge1xuICAgICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuICAgICAqXG4gICAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG4gICAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcbiAgICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gY2FsbERldGFjaChjaGlsZCkge1xuICAgICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyIGFsbCBoYW5kbGVycyBmb3IgYSBob29rXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcbiAgICAgIGlmIChoYW5kbGVycykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBub29wJDEoKSB7fVxuXG4gIC8qKlxuICAgKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuICAgKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cbiAgICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICAgKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcbiAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICAgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG4gICAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFttb2RpZmllcnNdXG4gICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcbiAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXJnXG4gICAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICAgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuICAgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ludGVycF1cbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBmdW5jdGlvbiBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHRoaXMudm0gPSB2bTtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgLy8gY29weSBkZXNjcmlwdG9yIHByb3BlcnRpZXNcbiAgICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuICAgIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcbiAgICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb247XG4gICAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcbiAgICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuICAgIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVycztcbiAgICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuICAgIC8vIHByaXZhdGVcbiAgICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gICAgLy8gbGluayBjb250ZXh0XG4gICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgdGhpcy5fc2NvcGUgPSBzY29wZTtcbiAgICB0aGlzLl9mcmFnID0gZnJhZztcbiAgICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcbiAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBkaXJlY3RpdmUsIG1peGluIGRlZmluaXRpb24gcHJvcGVydGllcyxcbiAgICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gICAqIGlmIHByZXNlbnQuXG4gICAqL1xuXG4gIERpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cbiAgICAvLyByZW1vdmUgYXR0cmlidXRlXG4gICAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICd2LScgKyBuYW1lO1xuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfVxuXG4gICAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuICAgIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcbiAgICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy51cGRhdGUgPSBkZWY7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuICAgIH1cblxuICAgIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXG4gICAgLy8gaW5pdGlhbCBiaW5kXG4gICAgaWYgKHRoaXMuYmluZCkge1xuICAgICAgdGhpcy5iaW5kKCk7XG4gICAgfVxuICAgIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICAgIHRoaXMudXBkYXRlICYmIHRoaXMudXBkYXRlKGRlc2NyaXB0b3IucmF3KTtcbiAgICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcbiAgICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuICAgICAgdmFyIGRpciA9IHRoaXM7XG4gICAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgaWYgKCFkaXIuX2xvY2tlZCkge1xuICAgICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuICAgICAgfVxuICAgICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHRoaXMudm0sIHRoaXMuZXhwcmVzc2lvbiwgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuICAgICAge1xuICAgICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG4gICAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG4gICAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2VzcyxcbiAgICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuICAgICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICAgIH0pO1xuICAgICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cbiAgICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG4gICAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG4gICAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcbiAgICAgICAgdGhpcy5hZnRlckJpbmQoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcbiAgICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cbiAgICovXG5cbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmFtcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG4gICAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gICAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBpID0gcGFyYW1zLmxlbmd0aDtcbiAgICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBoeXBoZW5hdGUocGFyYW1zW2ldKTtcbiAgICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgIC8vIGR5bmFtaWNcbiAgICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3RhdGljXG4gICAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICAgKi9cblxuICBEaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICAgIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcbiAgICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG4gICAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG4gICAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cbiAgICAgIGlmIChjYWxsZWQpIHtcbiAgICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgICB1c2VyOiBmYWxzZVxuICAgIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGRpcmVjdGl2ZSBpcyBhIGZ1bmN0aW9uIGNhbGxlclxuICAgKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAgICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuICAgKiBoYW5kbGVyLlxuICAgKlxuICAgKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcbiAgICpcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG4gICAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuICAgICAgdmFyIGZuID0gcGFyc2VFeHByZXNzaW9uKGV4cHJlc3Npb24pLmdldDtcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuICAgICAgICBzY29wZS4kZXZlbnQgPSBlO1xuICAgICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG4gICAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAgICogZS5nLiB2LW1vZGVsLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICh0aGlzLnR3b1dheSkge1xuICAgICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuICAgKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIERpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuX2xvY2tlZCA9IHRydWU7XG4gICAgZm4uY2FsbChzZWxmKTtcbiAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcbiAgICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAgICogZHVyaW5nIHVuYmluZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cbiAgICovXG5cbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuICAgIG9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsodGhpcy5fbGlzdGVuZXJzIHx8ICh0aGlzLl9saXN0ZW5lcnMgPSBbXSkpLnB1c2goW2V2ZW50LCBoYW5kbGVyXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cbiAgICovXG5cbiAgRGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2JvdW5kKSB7XG4gICAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMudW5iaW5kKSB7XG4gICAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuICAgICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgICB9XG4gICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgICAgdmFyIGk7XG4gICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG4gICAgICBpZiAodW53YXRjaEZucykge1xuICAgICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuICAgICAgfVxuICAgICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZVJlZiA9IGZ1bmN0aW9uIChyZW1vdmUpIHtcbiAgICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzO1xuICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuICAgICAgICAgICAgcmVmc1tyZWZdID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVmc1tyZWZdID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuICAgICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuICAgICAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG4gICAgICpcbiAgICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuICAgICAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuICAgICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcbiAgICAgIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cbiAgICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuICAgICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuX2luaXRFbGVtZW50KGVsKTtcblxuICAgICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG4gICAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2VcbiAgICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuICAgICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuICAgICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXG4gICAgICAvLyByZXNvbHZlIHNsb3QgZGlzdHJpYnV0aW9uXG4gICAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cbiAgICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3RcbiAgICAgIHZhciBjb250ZW50TGlua0ZuO1xuICAgICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcbiAgICAgIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG4gICAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuICAgICAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcbiAgICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBsaW5rIHBoYXNlXG4gICAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcbiAgICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG4gICAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXG4gICAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG4gICAgICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG4gICAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcm9vdFVubGlua0ZuKCk7XG4gICAgICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG4gICAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG4gICAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgICByZXBsYWNlKG9yaWdpbmFsLCBlbCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcbiAgICAgKiAkbW91bnQoKSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IGVsLmxhc3RDaGlsZDtcbiAgICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJGVsID0gZWw7XG4gICAgICB9XG4gICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpcztcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3JcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG4gICAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS5fYmluZERpciA9IGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gICAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkZXN0cm95UmVhZHk7XG4gICAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIC8vIENsZWFudXAgc2hvdWxkIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25veXNseSBhc1xuICAgICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cbiAgICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG4gICAgICAvLyB0dXJuaW5nIG9mIGlzIGRvbmVcbiAgICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuICAgICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgICAgc2VsZi5fY2xlYW51cCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcbiAgICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuICAgICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG4gICAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG4gICAgICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIHZhciBpO1xuICAgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG4gICAgICAvLyBpZiBwYXJlbnQgaXMgbm90IGJlaW5nIGRlc3Ryb3llZCBhcyB3ZWxsLlxuICAgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG4gICAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgIH1cbiAgICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICAgICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIC8vIHRlYXJkb3duIHByb3BzXG4gICAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuICAgICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG4gICAgICB9XG4gICAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cbiAgICAgIGlmICh0aGlzLl91bmxpbmtGbikge1xuICAgICAgICB0aGlzLl91bmxpbmtGbigpO1xuICAgICAgfVxuICAgICAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgICAgIGlmICh0aGlzLiRlbCkge1xuICAgICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcbiAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gICAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAgICAgKiBpcyBhbnkuXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcbiAgICAgIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG4gICAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gICAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cbiAgICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG4gICAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG4gICAgICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG4gICAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG4gICAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG4gICAgICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG4gICAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuICAgICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG4gICAgICB0aGlzLiRlbCA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJHJvb3QgPSB0aGlzLiRjaGlsZHJlbiA9IHRoaXMuX3dhdGNoZXJzID0gdGhpcy5fY29udGV4dCA9IHRoaXMuX3Njb3BlID0gdGhpcy5fZGlyZWN0aXZlcyA9IG51bGw7XG4gICAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKTtcbiAgICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgICB0aGlzLiRvZmYoKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cbiAgICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cbiAgICAgKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG4gICAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG4gICAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuICAgICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcbiAgICAgICAgaWYgKCFmbikgY29udGludWU7XG4gICAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuICAgICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG4gICAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG4gICAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuICAgICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuICAgICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlc29sdmUgYSBjb21wb25lbnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjb21wb25lbnRcbiAgICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2VcbiAgICAgKiByZXNvbHZlcyBhc3luY2hyb25vdXNseSBhbmQgY2FjaGVzIHRoZSByZXNvbHZlZFxuICAgICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGNiKSB7XG4gICAgICB2YXIgZmFjdG9yeTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZmFjdG9yeSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCFmYWN0b3J5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG4gICAgICBpZiAoIWZhY3Rvcnkub3B0aW9ucykge1xuICAgICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgICAgIC8vIGNhY2hlZFxuICAgICAgICAgIGNiKGZhY3RvcnkucmVzb2x2ZWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAgICAgLy8gcG9vbCBjYWxsYmFja3NcbiAgICAgICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICAgIHZhciBjYnMgPSBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuICAgICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuICAgICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuICAgICAgICAgICAgICByZXMgPSBWdWUuZXh0ZW5kKHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuICAgICAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlcztcbiAgICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICBjYnNbaV0ocmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuICAgICAgICBjYihmYWN0b3J5KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXG4gIGZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG4gICAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlcigpIHtcbiAgICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG4gICAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICAgKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG4gICAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcbiAgICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcbiAgICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuICAgICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBkZWwodGhpcy5fZGF0YSwga2V5KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuICAgICAqIHZhbHVlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2YXIgcGFyc2VkO1xuICAgICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcbiAgICAgICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uO1xuICAgICAgfVxuICAgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcbiAgICAgICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG4gICAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuICAgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG4gICAgICAgIHVzZXI6ICFvcHRpb25zIHx8IG9wdGlvbnMudXNlciAhPT0gZmFsc2VcbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcbiAgICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuICAgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuICAgICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG4gICAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG4gICAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcbiAgICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG4gICAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG4gICAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gZmlsdGVyXG4gICAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJGludGVycG9sYXRlID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgaWYgKHRva2Vucykge1xuICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG4gICAgICAgICAgfSkuam9pbignJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuICAgICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cbiAgICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuICAgICAgfVxuICAgICAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcbiAgICAgIGlmICghcGF0aCkge1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7XG4gICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcHJvcHMpIHtcbiAgICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG4gICAgICogb2JqZWN0IGNvcHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBjbGVhbihvYmopIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuICAgICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG4gICAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG4gICAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0IGluc3RhbmNlIGJlZm9yZSB0YXJnZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJGJlZm9yZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG4gICAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuICAgICAgfVxuICAgICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcbiAgICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcbiAgICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuICAgICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcbiAgICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgICAgICBpZiAoY2IpIGNiKCk7XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcbiAgICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuICAgICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDIgLSBvcCBmb3IgdHJhbnNpdGlvbiBpbnNlcnRcbiAgICAgKiBAcmV0dXJuIHZtXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBpbnNlcnQodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuICAgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG4gICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZCA/IG9wMSA6IG9wMjtcbiAgICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcbiAgICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuICAgICAgICBtYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcbiAgICAgIH1cbiAgICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuICAgICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVdpdGhDYihlbCwgdm0sIGNiKSB7XG4gICAgICByZW1vdmUoZWwpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG4gICAgLyoqXG4gICAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuICAgICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIG9uKCkge1xuICAgICAgICBzZWxmLiRvZmYoZXZlbnQsIG9uKTtcbiAgICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIG9uLmZuID0gZm47XG4gICAgICB0aGlzLiRvbihldmVudCwgb24pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gICAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICAgdmFyIGNicztcbiAgICAgIC8vIGFsbFxuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICAgICAgICAgIGlmIChjYnMpIHtcbiAgICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICAvLyBzcGVjaWZpYyBldmVudFxuICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICAgIGlmICghY2JzKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG4gICAgICB2YXIgY2I7XG4gICAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKTtcbiAgICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuICAgICAqL1xuXG4gICAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG4gICAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuICAgICAgaWYgKGNicykge1xuICAgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcbiAgICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG4gICAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuICAgICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG4gICAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG4gICAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHZhciBjYiA9IGNic1tpXTtcbiAgICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcbiAgICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG4gICAgICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG4gICAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG4gICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgICAgICAvLyBvbiBjaGlsZHJlblxuICAgICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcbiAgICAgICAgaWYgKHNob3VsZFByb3BhZ2F0ZSkge1xuICAgICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAgICovXG5cbiAgICBWdWUucHJvdG90eXBlLiRkaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgICAgLy8gb24gcGFyZW50c1xuICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBwYXJlbnQuJGVtaXQuYXBwbHkocGFyZW50LCBhcmdzKTtcbiAgICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuICAgICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAgICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG4gICAgICovXG5cbiAgICB2YXIgaG9va1JFID0gL15ob29rOi87XG4gICAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG4gICAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcbiAgICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuICAgICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cbiAgICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcbiAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcbiAgICAvKipcbiAgICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuICAgICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG4gICAgICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcbiAgICAgKiBpbnN0YW5jZXMpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG4gICAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuICAgICAgICAnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJywgdGhpcyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsID0gcXVlcnkoZWwpO1xuICAgICAgaWYgKCFlbCkge1xuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgfVxuICAgICAgdGhpcy5fY29tcGlsZShlbCk7XG4gICAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcbiAgICAgIGlmIChpbkRvYyh0aGlzLiRlbCkpIHtcbiAgICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1hcmsgYW4gaW5zdGFuY2UgYXMgcmVhZHkuXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG4gICAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcbiAgICAgKiBfZGVzdHJveS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXBcbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgICAgIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcbiAgICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAgICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKi9cblxuICAgIFZ1ZS5wcm90b3R5cGUuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cbiAgICpcbiAgICogQVBJIGNvbnZlbnRpb25zOlxuICAgKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuICAgKiAtIGludGVybmFsIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgX2BcbiAgICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcbiAgICogICBkYXRhLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiBAcHVibGljXG4gICAqL1xuXG4gIGZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG4gICAgdGhpcy5faW5pdChvcHRpb25zKTtcbiAgfVxuXG4gIC8vIGluc3RhbGwgaW50ZXJuYWxzXG4gIGluaXRNaXhpbihWdWUpO1xuICBzdGF0ZU1peGluKFZ1ZSk7XG4gIGV2ZW50c01peGluKFZ1ZSk7XG4gIGxpZmVjeWNsZU1peGluKFZ1ZSk7XG4gIG1pc2NNaXhpbihWdWUpO1xuXG4gIC8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuICBkYXRhQVBJKFZ1ZSk7XG4gIGRvbUFQSShWdWUpO1xuICBldmVudHNBUEkoVnVlKTtcbiAgbGlmZWN5Y2xlQVBJKFZ1ZSk7XG5cbiAgdmFyIHNsb3QgPSB7XG5cbiAgICBwcmlvcml0eTogU0xPVCxcbiAgICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG4gICAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLm5hbWUgfHwgJ2RlZmF1bHQnO1xuICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuICAgICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICB0aGlzLmZhbGxiYWNrKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcbiAgICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG4gICAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuICAgICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcbiAgICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG4gICAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG4gICAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcbiAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG4gICAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY29udGVudCkge1xuICAgICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgICB0aGlzLmNvbXBpbGUoZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pO1xuICAgIH0sXG5cbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgIGlmICh0aGlzLnVubGluaykge1xuICAgICAgICB0aGlzLnVubGluaygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcGFydGlhbCA9IHtcblxuICAgIHByaW9yaXR5OiBQQVJUSUFMLFxuXG4gICAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICAgIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuICAgIHBhcmFtV2F0Y2hlcnM6IHtcbiAgICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcbiAgICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXBhcnRpYWwnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG4gICAgfSxcblxuICAgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG4gICAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG4gICAgICBpZiAocGFydGlhbCkge1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuICAgICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG4gICAgc2xvdDogc2xvdCxcbiAgICBwYXJ0aWFsOiBwYXJ0aWFsXG4gIH07XG5cbiAgdmFyIGNvbnZlcnRBcnJheSA9IHZGb3IuX3Bvc3RQcm9jZXNzO1xuXG4gIC8qKlxuICAgKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuICAgKi9cblxuICBmdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuICAgIG4gPSB0b051bWJlcihuKTtcbiAgICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuICAgKi9cblxuICBmdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG4gICAgYXJyID0gY29udmVydEFycmF5KGFycik7XG4gICAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcbiAgICB9XG4gICAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG4gICAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG4gICAgLy8gYmVjYXVzZSB3aHkgbm90XG4gICAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcbiAgICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcbiAgICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIHZhciBpdGVtLCBrZXksIHZhbCwgajtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGl0ZW0gPSBhcnJbaV07XG4gICAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG4gICAgICBqID0ga2V5cy5sZW5ndGg7XG4gICAgICBpZiAoaikge1xuICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgICByZXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG4gICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEZ1bmN0aW9ufSAuLi5zb3J0S2V5c1xuICAgKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuICAgKi9cblxuICBmdW5jdGlvbiBvcmRlckJ5KGFycikge1xuICAgIHZhciBjb21wYXJhdG9yID0gbnVsbDtcbiAgICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG4gICAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cbiAgICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG4gICAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcbiAgICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yZGVyID0gMTtcbiAgICB9XG5cbiAgICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG4gICAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcbiAgICBpZiAoIWZpcnN0QXJnKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBjdXN0b20gY29tcGFyYXRvclxuICAgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3RcbiAgICAgIHNvcnRLZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJncyk7XG4gICAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcbiAgICAgICAgaSA9IGkgfHwgMDtcbiAgICAgICAgcmV0dXJuIGkgPj0gc29ydEtleXMubGVuZ3RoIC0gMSA/IGJhc2VDb21wYXJlKGEsIGIsIGkpIDogYmFzZUNvbXBhcmUoYSwgYiwgaSkgfHwgY29tcGFyYXRvcihhLCBiLCBpICsgMSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJhc2VDb21wYXJlKGEsIGIsIHNvcnRLZXlJbmRleCkge1xuICAgICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuICAgICAgaWYgKHNvcnRLZXkpIHtcbiAgICAgICAgaWYgKHNvcnRLZXkgIT09ICcka2V5Jykge1xuICAgICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG4gICAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcbiAgICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG4gICAgICB9XG4gICAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuICAgIH1cblxuICAgIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG4gICAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG4gIH1cblxuICAvKipcbiAgICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAgICovXG5cbiAgZnVuY3Rpb24gY29udGFpbnModmFsLCBzZWFyY2gpIHtcbiAgICB2YXIgaTtcbiAgICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpID4gLTE7XG4gICAgfVxuICB9XG5cbiAgdmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXG4gIC8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG4gIHZhciBmaWx0ZXJzID0ge1xuXG4gICAgb3JkZXJCeTogb3JkZXJCeSxcbiAgICBmaWx0ZXJCeTogZmlsdGVyQnksXG4gICAgbGltaXRCeTogbGltaXRCeSxcblxuICAgIC8qKlxuICAgICAqIFN0cmluZ2lmeSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcbiAgICAgKi9cblxuICAgIGpzb246IHtcbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQodmFsdWUsIGluZGVudCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG4gICAgICB9LFxuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqICdhYmMnID0+ICdBYmMnXG4gICAgICovXG5cbiAgICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogJ2FiYycgPT4gJ0FCQydcbiAgICAgKi9cblxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogJ0FiQycgPT4gJ2FiYydcbiAgICAgKi9cblxuICAgIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcbiAgICAgKi9cblxuICAgIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuICAgICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG4gICAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG4gICAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG4gICAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcbiAgICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuICAgICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG4gICAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuICAgICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcbiAgICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiAnaXRlbScgPT4gJ2l0ZW1zJ1xuICAgICAqXG4gICAgICogQHBhcmFtc1xuICAgICAqICBhbiBhcnJheSBvZiBzdHJpbmdzIGNvcnJlc3BvbmRpbmcgdG9cbiAgICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gICAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG4gICAgICogIGV4Y2VlZHMgdGhlIGxlbmd0aCBvZiB0aGUgYXJncywgaXQgd2lsbCB1c2UgdGhlIGxhc3RcbiAgICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogIGUuZy4gWydzaW5nbGUnLCAnZG91YmxlJywgJ3RyaXBsZScsICdtdWx0aXBsZSddXG4gICAgICovXG5cbiAgICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgICB2YXIgaW5kZXggPSB2YWx1ZSAlIDEwIC0gMTtcbiAgICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnc1swXSArICh2YWx1ZSA9PT0gMSA/ICcnIDogJ3MnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqL1xuXG4gICAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG4gICAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcbiAgICAgIGlmICghZGVsYXkpIHtcbiAgICAgICAgZGVsYXkgPSAzMDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gX2RlYm91bmNlKGhhbmRsZXIsIGRlbGF5KTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gaW5zdGFsbEdsb2JhbEFQSSAoVnVlKSB7XG4gICAgLyoqXG4gICAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuICAgICAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcbiAgICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cbiAgICAgKlxuICAgICAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcbiAgICAgKiBWdWUgaW5zdGFuY2UuXG4gICAgICovXG5cbiAgICBWdWUub3B0aW9ucyA9IHtcbiAgICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG4gICAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuICAgICAgdHJhbnNpdGlvbnM6IHt9LFxuICAgICAgY29tcG9uZW50czoge30sXG4gICAgICBwYXJ0aWFsczoge30sXG4gICAgICByZXBsYWNlOiB0cnVlXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG4gICAgICovXG5cbiAgICBWdWUudXRpbCA9IHV0aWw7XG4gICAgVnVlLmNvbmZpZyA9IGNvbmZpZztcbiAgICBWdWUuc2V0ID0gc2V0O1xuICAgIFZ1ZVsnZGVsZXRlJ10gPSBkZWw7XG4gICAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcbiAgICAgKi9cblxuICAgIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuICAgIFZ1ZS5GcmFnbWVudEZhY3RvcnkgPSBGcmFnbWVudEZhY3Rvcnk7XG4gICAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcbiAgICBWdWUucGFyc2VycyA9IHtcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgICAgZGlyZWN0aXZlOiBkaXJlY3RpdmUsXG4gICAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcbiAgICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cbiAgICAgKi9cblxuICAgIFZ1ZS5jaWQgPSAwO1xuICAgIHZhciBjaWQgPSAxO1xuXG4gICAgLyoqXG4gICAgICogQ2xhc3MgaW5oZXJpdGFuY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG4gICAgICovXG5cbiAgICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgICAgdmFyIFN1cGVyID0gdGhpcztcbiAgICAgIHZhciBpc0ZpcnN0RXh0ZW5kID0gU3VwZXIuY2lkID09PSAwO1xuICAgICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3RvcjtcbiAgICAgIH1cbiAgICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcbiAgICAgICAgICBuYW1lID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpO1xuICAgICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG4gICAgICBTdWIuY2lkID0gY2lkKys7XG4gICAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcbiAgICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuICAgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cbiAgICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG4gICAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG4gICAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcbiAgICAgIH0pO1xuICAgICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1YjtcbiAgICAgIH1cbiAgICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG4gICAgICBpZiAoaXNGaXJzdEV4dGVuZCkge1xuICAgICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFN1YjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWItY2xhc3MgY29uc3RydWN0b3Igd2l0aCB0aGVcbiAgICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAgICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbHVnaW4gc3lzdGVtXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGx1Z2luXG4gICAgICovXG5cbiAgICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG4gICAgICogb3B0aW9ucy5cbiAgICAgKi9cblxuICAgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgICAqIHNpZ25hdHVyZTpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgICAqIEBwYXJhbSB7Kn0gZGVmaW5pdGlvblxuICAgICAqL1xuXG4gICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuICAgICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG4gICAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7XG4gICAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmaW5pdGlvbiA9IFZ1ZS5leHRlbmQoZGVmaW5pdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG4gICAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcbiAgfVxuXG4gIGluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblxuICBWdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXG4gIC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcbiAgICAgIGlmIChkZXZ0b29scykge1xuICAgICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG4gICAgICB9XG4gICAgfVxuICB9LCAwKTtcblxuICByZXR1cm4gVnVlO1xuXG59KSk7IiwiLyohXG4gKiB2dWUtcm91dGVyIHYwLjcuMTNcbiAqIChjKSAyMDE2IEV2YW4gWW91XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgZ2xvYmFsLlZ1ZVJvdXRlciA9IGZhY3RvcnkoKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGJhYmVsSGVscGVycyA9IHt9O1xuXG4gIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBUYXJnZXQucHJvdG90eXBlID0ge1xuICAgIHRvOiBmdW5jdGlvbiB0byh0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgZGVsZWdhdGUgPSB0aGlzLmRlbGVnYXRlO1xuXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUud2lsbEFkZFJvdXRlKSB7XG4gICAgICAgIHRhcmdldCA9IGRlbGVnYXRlLndpbGxBZGRSb3V0ZSh0aGlzLm1hdGNoZXIudGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFyZ2V0KTtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYHRvYFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hdGNoZXIuYWRkQ2hpbGQodGhpcy5wYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCB0aGlzLmRlbGVnYXRlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBNYXRjaGVyKHRhcmdldCkge1xuICAgIHRoaXMucm91dGVzID0ge307XG4gICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICB9XG5cbiAgTWF0Y2hlci5wcm90b3R5cGUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocGF0aCwgaGFuZGxlcikge1xuICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSBoYW5kbGVyO1xuICAgIH0sXG5cbiAgICBhZGRDaGlsZDogZnVuY3Rpb24gYWRkQ2hpbGQocGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgZGVsZWdhdGUpIHtcbiAgICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIodGFyZ2V0KTtcbiAgICAgIHRoaXMuY2hpbGRyZW5bcGF0aF0gPSBtYXRjaGVyO1xuXG4gICAgICB2YXIgbWF0Y2ggPSBnZW5lcmF0ZU1hdGNoKHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKTtcblxuICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKSB7XG4gICAgICAgIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKHRhcmdldCwgbWF0Y2gpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhtYXRjaCk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2goc3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocGF0aCwgbmVzdGVkQ2FsbGJhY2spIHtcbiAgICAgIHZhciBmdWxsUGF0aCA9IHN0YXJ0aW5nUGF0aCArIHBhdGg7XG5cbiAgICAgIGlmIChuZXN0ZWRDYWxsYmFjaykge1xuICAgICAgICBuZXN0ZWRDYWxsYmFjayhnZW5lcmF0ZU1hdGNoKGZ1bGxQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsgcGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBoYW5kbGVyKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZUFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcGF0aCA9IHBhdGguc3Vic3RyKGxlbik7XG4gICAgdmFyIHJvdXRlID0geyBwYXRoOiBwYXRoLCBoYW5kbGVyOiBoYW5kbGVyIH07XG4gICAgcm91dGVBcnJheS5wdXNoKHJvdXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVhY2hSb3V0ZShiYXNlUm91dGUsIG1hdGNoZXIsIGNhbGxiYWNrLCBiaW5kaW5nKSB7XG4gICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzO1xuXG4gICAgZm9yICh2YXIgcGF0aCBpbiByb3V0ZXMpIHtcbiAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHtcbiAgICAgICAgdmFyIHJvdXRlQXJyYXkgPSBiYXNlUm91dGUuc2xpY2UoKTtcbiAgICAgICAgYWRkUm91dGUocm91dGVBcnJheSwgcGF0aCwgcm91dGVzW3BhdGhdKTtcblxuICAgICAgICBpZiAobWF0Y2hlci5jaGlsZHJlbltwYXRoXSkge1xuICAgICAgICAgIGVhY2hSb3V0ZShyb3V0ZUFycmF5LCBtYXRjaGVyLmNoaWxkcmVuW3BhdGhdLCBjYWxsYmFjaywgYmluZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCByb3V0ZUFycmF5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcCAoY2FsbGJhY2ssIGFkZFJvdXRlQ2FsbGJhY2spIHtcbiAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKCk7XG5cbiAgICBjYWxsYmFjayhnZW5lcmF0ZU1hdGNoKFwiXCIsIG1hdGNoZXIsIHRoaXMuZGVsZWdhdGUpKTtcblxuICAgIGVhY2hSb3V0ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICBpZiAoYWRkUm91dGVDYWxsYmFjaykge1xuICAgICAgICBhZGRSb3V0ZUNhbGxiYWNrKHRoaXMsIHJvdXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkKHJvdXRlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfVxuXG4gIHZhciBzcGVjaWFscyA9IFsnLycsICcuJywgJyonLCAnKycsICc/JywgJ3wnLCAnKCcsICcpJywgJ1snLCAnXScsICd7JywgJ30nLCAnXFxcXCddO1xuXG4gIHZhciBlc2NhcGVSZWdleCA9IG5ldyBSZWdFeHAoJyhcXFxcJyArIHNwZWNpYWxzLmpvaW4oJ3xcXFxcJykgKyAnKScsICdnJyk7XG5cbiAgdmFyIG5vV2FybmluZyA9IGZhbHNlO1xuICBmdW5jdGlvbiB3YXJuKG1zZykge1xuICAgIGlmICghbm9XYXJuaW5nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeURlY29kZSh1cmksIGFzQ29tcG9uZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhc0NvbXBvbmVudCA/IGRlY29kZVVSSUNvbXBvbmVudCh1cmkpIDogZGVjb2RlVVJJKHVyaSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgd2FybignbWFsZm9ybWVkIFVSSScgKyAoYXNDb21wb25lbnQgPyAnIGNvbXBvbmVudDogJyA6ICc6ICcpICsgdXJpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0FycmF5KHRlc3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRlc3QpID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gIH1cblxuICAvLyBBIFNlZ21lbnQgcmVwcmVzZW50cyBhIHNlZ21lbnQgaW4gdGhlIG9yaWdpbmFsIHJvdXRlIGRlc2NyaXB0aW9uLlxuICAvLyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFuZCBgcmVnZXhgIG1ldGhvZC5cbiAgLy9cbiAgLy8gVGhlIGBlYWNoQ2hhcmAgbWV0aG9kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggb25lIG9yIG1vcmUgY2hhcmFjdGVyXG4gIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0XG4gIC8vIGNoYXJhY3RlcnMuXG4gIC8vXG4gIC8vIFRoZSBgcmVnZXhgIG1ldGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50LiBJZiB0aGVcbiAgLy8gc2VnbWVudCBpcyBhIGR5bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0aGUgcmVnZXggZnJhZ21lbnQgYWxzbyBpbmNsdWRlc1xuICAvLyBhIGNhcHR1cmUuXG4gIC8vXG4gIC8vIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29udGFpbnM6XG4gIC8vXG4gIC8vICogYHZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFjdGVycywgb3JcbiAgLy8gKiBgaW52YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIGludmFsaWQgY2hhcmFjdGVyc1xuICAvLyAqIGByZXBlYXRgOiB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjYW4gcmVwZWF0XG5cbiAgZnVuY3Rpb24gU3RhdGljU2VnbWVudChzdHJpbmcpIHtcbiAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgfVxuICBTdGF0aWNTZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZyxcbiAgICAgICAgICBjaDtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNoID0gc3RyaW5nLmNoYXJBdChpKTtcbiAgICAgICAgY2FsbGJhY2soeyB2YWxpZENoYXJzOiBjaCB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoZXNjYXBlUmVnZXgsICdcXFxcJDEnKTtcbiAgICB9LFxuXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCIvXCIsIHJlcGVhdDogdHJ1ZSB9KTtcbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiKFteL10rKVwiO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG4gICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gU3RhclNlZ21lbnQobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cbiAgU3RhclNlZ21lbnQucHJvdG90eXBlID0ge1xuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiXCIsIHJlcGVhdDogdHJ1ZSB9KTtcbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiKC4rKVwiO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG4gICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fVxuICBFcHNpbG9uU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKCkge30sXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSxcbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcGFyc2Uocm91dGUsIG5hbWVzLCBzcGVjaWZpY2l0eSkge1xuICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBhIFwiL1wiLiBSZWNvZ25pdGlvbiB3aWxsXG4gICAgLy8gYWxzbyBub3JtYWxpemUuXG4gICAgaWYgKHJvdXRlLmNoYXJBdCgwKSA9PT0gXCIvXCIpIHtcbiAgICAgIHJvdXRlID0gcm91dGUuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0KFwiL1wiKSxcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuXG4gICAgLy8gQSByb3V0ZXMgaGFzIHNwZWNpZmljaXR5IGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoYXQgaXRzIGRpZmZlcmVudCBzZWdtZW50c1xuICAgIC8vIGFwcGVhciBpbi4gVGhpcyBzeXN0ZW0gbWlycm9ycyBob3cgdGhlIG1hZ25pdHVkZSBvZiBudW1iZXJzIHdyaXR0ZW4gYXMgc3RyaW5nc1xuICAgIC8vIHdvcmtzLlxuICAgIC8vIENvbnNpZGVyIGEgbnVtYmVyIHdyaXR0ZW4gYXM6IFwiYWJjXCIuIEFuIGV4YW1wbGUgd291bGQgYmUgXCIyMDBcIi4gQW55IG90aGVyIG51bWJlciB3cml0dGVuXG4gICAgLy8gXCJ4eXpcIiB3aWxsIGJlIHNtYWxsZXIgdGhhbiBcImFiY1wiIHNvIGxvbmcgYXMgYGEgPiB6YC4gRm9yIGluc3RhbmNlLCBcIjE5OVwiIGlzIHNtYWxsZXJcbiAgICAvLyB0aGVuIFwiMjAwXCIsIGV2ZW4gdGhvdWdoIFwieVwiIGFuZCBcInpcIiAod2hpY2ggYXJlIGJvdGggOSkgYXJlIGxhcmdlciB0aGFuIFwiMFwiICh0aGUgdmFsdWVcbiAgICAvLyBvZiAoYGJgIGFuZCBgY2ApLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxlYWRpbmcgc3ltYm9sLCBcIjJcIiwgaXMgbGFyZ2VyIHRoYW4gdGhlIG90aGVyXG4gICAgLy8gbGVhZGluZyBzeW1ib2wsIFwiMVwiLlxuICAgIC8vIFRoZSBydWxlIGlzIHRoYXQgc3ltYm9scyB0byB0aGUgbGVmdCBjYXJyeSBtb3JlIHdlaWdodCB0aGFuIHN5bWJvbHMgdG8gdGhlIHJpZ2h0XG4gICAgLy8gd2hlbiBhIG51bWJlciBpcyB3cml0dGVuIG91dCBhcyBhIHN0cmluZy4gSW4gdGhlIGFib3ZlIHN0cmluZ3MsIHRoZSBsZWFkaW5nIGRpZ2l0XG4gICAgLy8gcmVwcmVzZW50cyBob3cgbWFueSAxMDAncyBhcmUgaW4gdGhlIG51bWJlciwgYW5kIGl0IGNhcnJpZXMgbW9yZSB3ZWlnaHQgdGhhbiB0aGUgbWlkZGxlXG4gICAgLy8gbnVtYmVyIHdoaWNoIHJlcHJlc2VudHMgaG93IG1hbnkgMTAncyBhcmUgaW4gdGhlIG51bWJlci5cbiAgICAvLyBUaGlzIHN5c3RlbSBvZiBudW1iZXIgbWFnbml0dWRlIHdvcmtzIHdlbGwgZm9yIHJvdXRlIHNwZWNpZmljaXR5LCB0b28uIEEgcm91dGUgd3JpdHRlbiBhc1xuICAgIC8vIGBhL2IvY2Agd2lsbCBiZSBtb3JlIHNwZWNpZmljIHRoYW4gYHgveS96YCBhcyBsb25nIGFzIGBhYCBpcyBtb3JlIHNwZWNpZmljIHRoYW5cbiAgICAvLyBgeGAsIGlycmVzcGVjdGl2ZSBvZiB0aGUgb3RoZXIgcGFydHMuXG4gICAgLy8gQmVjYXVzZSBvZiB0aGlzIHNpbWlsYXJpdHksIHdlIGFzc2lnbiBlYWNoIHR5cGUgb2Ygc2VnbWVudCBhIG51bWJlciB2YWx1ZSB3cml0dGVuIGFzIGFcbiAgICAvLyBzdHJpbmcuIFdlIGNhbiBmaW5kIHRoZSBzcGVjaWZpY2l0eSBvZiBjb21wb3VuZCByb3V0ZXMgYnkgY29uY2F0ZW5hdGluZyB0aGVzZSBzdHJpbmdzXG4gICAgLy8gdG9nZXRoZXIsIGZyb20gbGVmdCB0byByaWdodC4gQWZ0ZXIgd2UgaGF2ZSBsb29wZWQgdGhyb3VnaCBhbGwgb2YgdGhlIHNlZ21lbnRzLFxuICAgIC8vIHdlIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhIG51bWJlci5cbiAgICBzcGVjaWZpY2l0eS52YWwgPSAnJztcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldLFxuICAgICAgICAgIG1hdGNoO1xuXG4gICAgICBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXlxcL10rKSQvKSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IER5bmFtaWNTZWdtZW50KG1hdGNoWzFdKSk7XG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzMnO1xuICAgICAgfSBlbHNlIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL15cXCooW15cXC9dKykkLykpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRjaFsxXSkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzInO1xuICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gXCJcIikge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IEVwc2lsb25TZWdtZW50KCkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzEnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHNlZ21lbnQpKTtcbiAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICc0JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzcGVjaWZpY2l0eS52YWwgPSArc3BlY2lmaWNpdHkudmFsO1xuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvLyBBIFN0YXRlIGhhcyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFuZCAoYGNoYXJTcGVjYCkgYW5kIGEgbGlzdCBvZiBwb3NzaWJsZVxuICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5leHRTdGF0ZXNgKS5cbiAgLy9cbiAgLy8gSWYgYSBTdGF0ZSBpcyBhbiBhY2NlcHRpbmcgc3RhdGUsIGl0IHdpbGwgYWxzbyBoYXZlIHNldmVyYWwgYWRkaXRpb25hbFxuICAvLyBwcm9wZXJ0aWVzOlxuICAvL1xuICAvLyAqIGByZWdleGA6IEEgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCB0byBleHRyYWN0IHBhcmFtZXRlcnMgZnJvbSBwYXRoc1xuICAvLyAgIHRoYXQgcmVhY2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS5cbiAgLy8gKiBgaGFuZGxlcnNgOiBJbmZvcm1hdGlvbiBvbiBob3cgdG8gY29udmVydCB0aGUgbGlzdCBvZiBjYXB0dXJlcyBpbnRvIGNhbGxzXG4gIC8vICAgdG8gcmVnaXN0ZXJlZCBoYW5kbGVycyB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVyc1xuICAvLyAqIGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNlZ21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG9cbiAgLy8gICBkZWNpZGUgd2hpY2ggcm91dGUgdG8gdXNlIGlmIG11bHRpcGxlIHJlZ2lzdGVyZWQgcm91dGVzIG1hdGNoIGEgcGF0aC5cbiAgLy9cbiAgLy8gQ3VycmVudGx5LCBTdGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBgbmV4dFN0YXRlc2AgYW5kXG4gIC8vIGNvbXBhcmluZyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFnYWluc3QgYSBjaGFyYWN0ZXIuIEEgbW9yZSBlZmZpY2llbnRcbiAgLy8gaW1wbGVtZW50YXRpb24gd291bGQgdXNlIGEgaGFzaCBvZiBrZXlzIHBvaW50aW5nIGF0IG9uZSBvciBtb3JlIG5leHQgc3RhdGVzLlxuXG4gIGZ1bmN0aW9uIFN0YXRlKGNoYXJTcGVjKSB7XG4gICAgdGhpcy5jaGFyU3BlYyA9IGNoYXJTcGVjO1xuICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuICB9XG5cbiAgU3RhdGUucHJvdG90eXBlID0ge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KGNoYXJTcGVjKSB7XG4gICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xuXG4gICAgICAgIHZhciBpc0VxdWFsID0gY2hpbGQuY2hhclNwZWMudmFsaWRDaGFycyA9PT0gY2hhclNwZWMudmFsaWRDaGFycztcbiAgICAgICAgaXNFcXVhbCA9IGlzRXF1YWwgJiYgY2hpbGQuY2hhclNwZWMuaW52YWxpZENoYXJzID09PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG5cbiAgICAgICAgaWYgKGlzRXF1YWwpIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcHV0OiBmdW5jdGlvbiBwdXQoY2hhclNwZWMpIHtcbiAgICAgIHZhciBzdGF0ZTtcblxuICAgICAgLy8gSWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnRcbiAgICAgIC8vIHN0YXRlLCBqdXN0IHJldHVybiB0aGF0IHN0YXRlLlxuICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMpKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBhIG5ldyBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciBzcGVjXG4gICAgICBzdGF0ZSA9IG5ldyBTdGF0ZShjaGFyU3BlYyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgIHRoaXMubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblxuICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRzLCBpbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkXG4gICAgICAvLyBvZiBpdHNlbGYuIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHRyaWdnZXIgYW4gaW5maW5pdGUgbG9vcCBiZWNhdXNlIGVhY2hcbiAgICAgIC8vIHRyYW5zaXRpb24gZHVyaW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLlxuICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkge1xuICAgICAgICBzdGF0ZS5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIG5ldyBzdGF0ZVxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0sXG5cbiAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBzdGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyXG4gICAgbWF0Y2g6IGZ1bmN0aW9uIG1hdGNoKGNoKSB7XG4gICAgICAvLyBERUJVRyBcIlByb2Nlc3NpbmcgYFwiICsgY2ggKyBcImA6XCJcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzLFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIGNoYXJTcGVjLFxuICAgICAgICAgIGNoYXJzO1xuXG4gICAgICAvLyBERUJVRyBcIiAgXCIgKyBkZWJ1Z1N0YXRlKHRoaXMpXG4gICAgICB2YXIgcmV0dXJuZWQgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cbiAgICAgICAgY2hhclNwZWMgPSBjaGlsZC5jaGFyU3BlYztcblxuICAgICAgICBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMuaW52YWxpZENoYXJzKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJldHVybmVkO1xuICAgIH1cblxuICAgIC8qKiBJRiBERUJVR1xuICAgICwgZGVidWc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoYXJTcGVjID0gdGhpcy5jaGFyU3BlYyxcbiAgICAgICAgICBkZWJ1ZyA9IFwiW1wiLFxuICAgICAgICAgIGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycyB8fCBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG4gICAgICAgaWYgKGNoYXJTcGVjLmludmFsaWRDaGFycykgeyBkZWJ1ZyArPSBcIl5cIjsgfVxuICAgICAgZGVidWcgKz0gY2hhcnM7XG4gICAgICBkZWJ1ZyArPSBcIl1cIjtcbiAgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7IGRlYnVnICs9IFwiK1wiOyB9XG4gICAgICAgcmV0dXJuIGRlYnVnO1xuICAgIH1cbiAgICBFTkQgSUYgKiovXG4gIH07XG5cbiAgLyoqIElGIERFQlVHXG4gIGZ1bmN0aW9uIGRlYnVnKGxvZykge1xuICAgIGNvbnNvbGUubG9nKGxvZyk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKG4pIHtcbiAgICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiBbYWNjZXB0aW5nXSApXCI7IH1cbiAgICAgIHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiA8dGhlbj4gXCIgKyBuLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuZGVidWcoKSB9KS5qb2luKFwiIG9yIFwiKSArIFwiIClcIjtcbiAgICB9KS5qb2luKFwiLCBcIilcbiAgfVxuICBFTkQgSUYgKiovXG5cbiAgLy8gU29ydCB0aGUgcm91dGVzIGJ5IHNwZWNpZmljaXR5XG4gIGZ1bmN0aW9uIHNvcnRTb2x1dGlvbnMoc3RhdGVzKSB7XG4gICAgcmV0dXJuIHN0YXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYi5zcGVjaWZpY2l0eS52YWwgLSBhLnNwZWNpZmljaXR5LnZhbDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY29nbml6ZUNoYXIoc3RhdGVzLCBjaCkge1xuICAgIHZhciBuZXh0U3RhdGVzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tpXTtcblxuICAgICAgbmV4dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0YXRlLm1hdGNoKGNoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTdGF0ZXM7XG4gIH1cblxuICB2YXIgb0NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvKSB7XG4gICAgZnVuY3Rpb24gRigpIHt9XG4gICAgRi5wcm90b3R5cGUgPSBwcm90bztcbiAgICByZXR1cm4gbmV3IEYoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKSB7XG4gICAgdGhpcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zIHx8IHt9O1xuICB9XG4gIFJlY29nbml6ZVJlc3VsdHMucHJvdG90eXBlID0gb0NyZWF0ZSh7XG4gICAgc3BsaWNlOiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLFxuICAgIHNsaWNlOiBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG4gICAgcHVzaDogQXJyYXkucHJvdG90eXBlLnB1c2gsXG4gICAgbGVuZ3RoOiAwLFxuICAgIHF1ZXJ5UGFyYW1zOiBudWxsXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcykge1xuICAgIHZhciBoYW5kbGVycyA9IHN0YXRlLmhhbmRsZXJzLFxuICAgICAgICByZWdleCA9IHN0YXRlLnJlZ2V4O1xuICAgIHZhciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLFxuICAgICAgICBjdXJyZW50Q2FwdHVyZSA9IDE7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2ldLFxuICAgICAgICAgIG5hbWVzID0gaGFuZGxlci5uYW1lcyxcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcblxuICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBuYW1lcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgcGFyYW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIuaGFuZGxlciwgcGFyYW1zOiBwYXJhbXMsIGlzRHluYW1pYzogISFuYW1lcy5sZW5ndGggfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7XG4gICAgc2VnbWVudC5lYWNoQ2hhcihmdW5jdGlvbiAoY2gpIHtcbiAgICAgIHZhciBzdGF0ZTtcblxuICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dChjaCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFydCkge1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjEzLjQuMVxuICAgIHBhcnQgPSBwYXJ0LnJlcGxhY2UoL1xcKy9nbSwgJyUyMCcpO1xuICAgIHJldHVybiB0cnlEZWNvZGUocGFydCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBUaGUgbWFpbiBpbnRlcmZhY2VcblxuICB2YXIgUm91dGVSZWNvZ25pemVyID0gZnVuY3Rpb24gUm91dGVSZWNvZ25pemVyKCkge1xuICAgIHRoaXMucm9vdFN0YXRlID0gbmV3IFN0YXRlKCk7XG4gICAgdGhpcy5uYW1lcyA9IHt9O1xuICB9O1xuXG4gIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocm91dGVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY3VycmVudFN0YXRlID0gdGhpcy5yb290U3RhdGUsXG4gICAgICAgICAgcmVnZXggPSBcIl5cIixcbiAgICAgICAgICBzcGVjaWZpY2l0eSA9IHt9LFxuICAgICAgICAgIGhhbmRsZXJzID0gW10sXG4gICAgICAgICAgYWxsU2VnbWVudHMgPSBbXSxcbiAgICAgICAgICBuYW1lO1xuXG4gICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sXG4gICAgICAgICAgICBuYW1lcyA9IFtdO1xuXG4gICAgICAgIHZhciBzZWdtZW50cyA9IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCBzcGVjaWZpY2l0eSk7XG5cbiAgICAgICAgYWxsU2VnbWVudHMgPSBhbGxTZWdtZW50cy5jb25jYXQoc2VnbWVudHMpO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gc2VnbWVudHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tqXTtcblxuICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIEFkZCBhIFwiL1wiIGZvciB0aGUgbmV3IHNlZ21lbnRcbiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogXCIvXCIgfSk7XG4gICAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cbiAgICAgICAgICAvLyBBZGQgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc2VnbWVudCB0byB0aGUgTkZBIGFuZCByZWdleFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KTtcbiAgICAgICAgICByZWdleCArPSBzZWdtZW50LnJlZ2V4KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlciA9IHsgaGFuZGxlcjogcm91dGUuaGFuZGxlciwgbmFtZXM6IG5hbWVzIH07XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcbiAgICAgICAgcmVnZXggKz0gXCIvXCI7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRTdGF0ZS5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICAgICAgY3VycmVudFN0YXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCArIFwiJFwiKTtcbiAgICAgIGN1cnJlbnRTdGF0ZS5zcGVjaWZpY2l0eSA9IHNwZWNpZmljaXR5O1xuXG4gICAgICBpZiAobmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hcykge1xuICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0ge1xuICAgICAgICAgIHNlZ21lbnRzOiBhbGxTZWdtZW50cyxcbiAgICAgICAgICBoYW5kbGVyczogaGFuZGxlcnNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaGFuZGxlcnNGb3I6IGZ1bmN0aW9uIGhhbmRsZXJzRm9yKG5hbWUpIHtcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG4gICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICBpZiAoIXJvdXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGUuaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgaGFzUm91dGU6IGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShuYW1lLCBwYXJhbXMpIHtcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG4gICAgICAgICAgb3V0cHV0ID0gXCJcIjtcbiAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc2VnbWVudHM7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cbiAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0cHV0ICs9IFwiL1wiO1xuICAgICAgICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgIG91dHB1dCA9ICcvJyArIG91dHB1dDtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucXVlcnlQYXJhbXMpIHtcbiAgICAgICAgb3V0cHV0ICs9IHRoaXMuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMucXVlcnlQYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcykge1xuICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAga2V5cy5zb3J0KCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbXNba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaiA8IGw7IGorKykge1xuICAgICAgICAgICAgdmFyIGFycmF5UGFpciA9IGtleSArICdbXScgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWVbal0pO1xuICAgICAgICAgICAgcGFpcnMucHVzaChhcnJheVBhaXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWlyICs9IFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgICAgICBwYWlycy5wdXNoKHBhaXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCI/XCIgKyBwYWlycy5qb2luKFwiJlwiKTtcbiAgICB9LFxuXG4gICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICAgICAgdmFyIHBhaXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpLFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKSxcbiAgICAgICAgICAgIGtleSA9IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMF0pLFxuICAgICAgICAgICAga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aCxcbiAgICAgICAgICAgIGlzQXJyYXkgPSBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlO1xuICAgICAgICBpZiAocGFpci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB2YWx1ZSA9ICd0cnVlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL0hhbmRsZSBhcnJheXNcbiAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMiAmJiBrZXkuc2xpY2Uoa2V5TGVuZ3RoIC0gMikgPT09ICdbXScpIHtcbiAgICAgICAgICAgIGlzQXJyYXkgPSB0cnVlO1xuICAgICAgICAgICAga2V5ID0ga2V5LnNsaWNlKDAsIGtleUxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgaWYgKCFxdWVyeVBhcmFtc1trZXldKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBwYWlyWzFdID8gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclsxXSkgOiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcXVlcnlQYXJhbXM7XG4gICAgfSxcblxuICAgIHJlY29nbml6ZTogZnVuY3Rpb24gcmVjb2duaXplKHBhdGgsIHNpbGVudCkge1xuICAgICAgbm9XYXJuaW5nID0gc2lsZW50O1xuICAgICAgdmFyIHN0YXRlcyA9IFt0aGlzLnJvb3RTdGF0ZV0sXG4gICAgICAgICAgcGF0aExlbixcbiAgICAgICAgICBpLFxuICAgICAgICAgIGwsXG4gICAgICAgICAgcXVlcnlTdGFydCxcbiAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9LFxuICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gZmFsc2U7XG5cbiAgICAgIHF1ZXJ5U3RhcnQgPSBwYXRoLmluZGV4T2YoJz8nKTtcbiAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0cihxdWVyeVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpO1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcXVlcnlTdGFydCk7XG4gICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXRoID0gdHJ5RGVjb2RlKHBhdGgpO1xuICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cbiAgICAgIC8vIERFQlVHIEdST1VQIHBhdGhcblxuICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgICAgfVxuXG4gICAgICBwYXRoTGVuID0gcGF0aC5sZW5ndGg7XG4gICAgICBpZiAocGF0aExlbiA+IDEgJiYgcGF0aC5jaGFyQXQocGF0aExlbiAtIDEpID09PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aExlbiAtIDEpO1xuICAgICAgICBpc1NsYXNoRHJvcHBlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpO1xuICAgICAgICBpZiAoIXN0YXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFTkQgREVCVUcgR1JPVVBcblxuICAgICAgdmFyIHNvbHV0aW9ucyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKHN0YXRlc1tpXS5oYW5kbGVycykge1xuICAgICAgICAgIHNvbHV0aW9ucy5wdXNoKHN0YXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3RhdGVzID0gc29ydFNvbHV0aW9ucyhzb2x1dGlvbnMpO1xuXG4gICAgICB2YXIgc3RhdGUgPSBzb2x1dGlvbnNbMF07XG5cbiAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5oYW5kbGVycykge1xuICAgICAgICAvLyBpZiBhIHRyYWlsaW5nIHNsYXNoIHdhcyBkcm9wcGVkIGFuZCBhIHN0YXIgc2VnbWVudCBpcyB0aGUgbGFzdCBzZWdtZW50XG4gICAgICAgIC8vIHNwZWNpZmllZCwgcHV0IHRoZSB0cmFpbGluZyBzbGFzaCBiYWNrXG4gICAgICAgIGlmIChpc1NsYXNoRHJvcHBlZCAmJiBzdGF0ZS5yZWdleC5zb3VyY2Uuc2xpY2UoLTUpID09PSBcIiguKykkXCIpIHtcbiAgICAgICAgICBwYXRoID0gcGF0aCArIFwiL1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IG1hcDtcblxuICB2YXIgZ2VuUXVlcnkgPSBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLmdlbmVyYXRlUXVlcnlTdHJpbmc7XG5cbiAgLy8gZXhwb3J0IGRlZmF1bHQgZm9yIGhvbGRpbmcgdGhlIFZ1ZSByZWZlcmVuY2VcbiAgdmFyIGV4cG9ydHMkMSA9IHt9O1xuICAvKipcbiAgICogV2FybiBzdHVmZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuICAgKi9cblxuICBmdW5jdGlvbiB3YXJuJDEobXNnKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSByZWxhdGl2ZSBwYXRoLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcmVsYXRpdmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiByZXNvbHZlUGF0aChiYXNlLCByZWxhdGl2ZSwgYXBwZW5kKSB7XG4gICAgdmFyIHF1ZXJ5ID0gYmFzZS5tYXRjaCgvKFxcPy4qKSQvKTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnlbMV07XG4gICAgICBiYXNlID0gYmFzZS5zbGljZSgwLCAtcXVlcnkubGVuZ3RoKTtcbiAgICB9XG4gICAgLy8gYSBxdWVyeSFcbiAgICBpZiAocmVsYXRpdmUuY2hhckF0KDApID09PSAnPycpIHtcbiAgICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmU7XG4gICAgfVxuICAgIHZhciBzdGFjayA9IGJhc2Uuc3BsaXQoJy8nKTtcbiAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcbiAgICAvLyAtIG5vdCBhcHBlbmRpbmdcbiAgICAvLyAtIGFwcGVuZGluZyB0byB0cmFpbGluZyBzbGFzaCAobGFzdCBzZWdtZW50IGlzIGVtcHR5KVxuICAgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuICAgICAgc3RhY2sucG9wKCk7XG4gICAgfVxuICAgIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuICAgIHZhciBzZWdtZW50cyA9IHJlbGF0aXZlLnJlcGxhY2UoL15cXC8vLCAnJykuc3BsaXQoJy8nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICcuJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG4gICAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xuICAgICAgc3RhY2sudW5zaGlmdCgnJyk7XG4gICAgfVxuICAgIHJldHVybiBzdGFjay5qb2luKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9yZ2l2aW5nIGNoZWNrIGZvciBhIHByb21pc2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNQcm9taXNlKHApIHtcbiAgICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpdmUgYSByb3V0ZSBjb25maWcgZmllbGQgZnJvbSBhIGNvbXBvbmVudCBpbnN0YW5jZVxuICAgKiBPUiBhIGNvbXBvbmVudCBjb250cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFZ1ZX0gY29tcG9uZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgbmFtZSkge1xuICAgIHZhciBvcHRpb25zID0gY29tcG9uZW50ICYmIChjb21wb25lbnQuJG9wdGlvbnMgfHwgY29tcG9uZW50Lm9wdGlvbnMpO1xuICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMucm91dGUgJiYgb3B0aW9ucy5yb3V0ZVtuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LiBIYXZlIHRvIGRvIGEgZGlydHlcbiAgICogbW9jayBoZXJlIGJlY2F1c2Ugb2YgVnVlIGNvcmUncyBpbnRlcm5hbCBBUEkgZGVwZW5kcyBvblxuICAgKiBhbiBJRCBjaGVjay5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgdmFyIHJlc29sdmVyID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBjYikge1xuICAgIGlmICghcmVzb2x2ZXIpIHtcbiAgICAgIHJlc29sdmVyID0ge1xuICAgICAgICByZXNvbHZlOiBleHBvcnRzJDEuVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCxcbiAgICAgICAgJG9wdGlvbnM6IHtcbiAgICAgICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgICAgICBfOiBoYW5kbGVyLmNvbXBvbmVudFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZXIuJG9wdGlvbnMuY29tcG9uZW50cy5fID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgfVxuICAgIHJlc29sdmVyLnJlc29sdmUoJ18nLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKENvbXBvbmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFwIHRoZSBkeW5hbWljIHNlZ21lbnRzIGluIGEgcGF0aCB0byBwYXJhbXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1hcFBhcmFtcyhwYXRoLCBwYXJhbXMsIHF1ZXJ5KSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdW5kZWZpbmVkKSBwYXJhbXMgPSB7fTtcblxuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLzooW15cXC9dKykvZywgZnVuY3Rpb24gKF8sIGtleSkge1xuICAgICAgdmFyIHZhbCA9IHBhcmFtc1trZXldO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIXZhbCkge1xuICAgICAgICB3YXJuJDEoJ3BhcmFtIFwiJyArIGtleSArICdcIiBub3QgZm91bmQgd2hlbiBnZW5lcmF0aW5nICcgKyAncGF0aCBmb3IgXCInICsgcGF0aCArICdcIiB3aXRoIHBhcmFtcyAnICsgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsIHx8ICcnO1xuICAgIH0pO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcGF0aCArPSBnZW5RdWVyeShxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG5cbiAgdmFyIGhhc2hSRSA9IC8jLiokLztcblxuICB2YXIgSFRNTDVIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7XG4gICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUw1SGlzdG9yeSk7XG5cbiAgICAgIGlmIChyb290ICYmIHJvb3QgIT09ICcvJykge1xuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcbiAgICAgICAgaWYgKHJvb3QuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICByb290ID0gJy8nICsgcm9vdDtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgICB0aGlzLnJvb3RSRSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIHRoaXMucm9vdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvb3QgPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgLy8gY2hlY2sgYmFzZSB0YWdcbiAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG4gICAgICB0aGlzLmJhc2UgPSBiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIH1cblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIGlmIChfdGhpcy5yb290KSB7XG4gICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoX3RoaXMucm9vdFJFLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMub25DaGFuZ2UodXJsLCBlICYmIGUuc3RhdGUsIGxvY2F0aW9uLmhhc2gpO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgdGhpcy5saXN0ZW5lcigpO1xuICAgIH07XG5cbiAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHZhciB1cmwgPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgdXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlY29yZCBzY3JvbGwgcG9zaXRpb24gYnkgcmVwbGFjaW5nIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xuICAgICAgICAgIHBvczoge1xuICAgICAgICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgICAgICAgfVxuICAgICAgICB9LCAnJywgbG9jYXRpb24uaHJlZik7XG4gICAgICAgIC8vIHRoZW4gcHVzaCBuZXcgc3RhdGVcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpO1xuICAgICAgfVxuICAgICAgdmFyIGhhc2hNYXRjaCA9IHBhdGgubWF0Y2goaGFzaFJFKTtcbiAgICAgIHZhciBoYXNoID0gaGFzaE1hdGNoICYmIGhhc2hNYXRjaFswXTtcbiAgICAgIHBhdGggPSB1cmxcbiAgICAgIC8vIHN0cmlwIGhhc2ggc28gaXQgZG9lc24ndCBtZXNzIHVwIHBhcmFtc1xuICAgICAgLnJlcGxhY2UoaGFzaFJFLCAnJylcbiAgICAgIC8vIHJlbW92ZSByb290IGJlZm9yZSBtYXRjaGluZ1xuICAgICAgLnJlcGxhY2UodGhpcy5yb290UkUsICcnKTtcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCwgbnVsbCwgaGFzaCk7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuICAgICAgLy8gYWJzb2x1dGUgcGF0aFxuICAgICAgPyB0aGlzLnJvb3QgPyB0aGlzLnJvb3QgKyAnLycgKyBwYXRoLnJlcGxhY2UoL15cXC8vLCAnJykgOiBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5iYXNlIHx8IGxvY2F0aW9uLnBhdGhuYW1lLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSFRNTDVIaXN0b3J5O1xuICB9KSgpO1xuXG4gIHZhciBIYXNoSGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGFzaEhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaEhpc3RvcnkpO1xuXG4gICAgICB0aGlzLmhhc2hiYW5nID0gaGFzaGJhbmc7XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgfVxuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCA9IGxvY2F0aW9uLmhhc2g7XG4gICAgICAgIHZhciByYXcgPSBwYXRoLnJlcGxhY2UoL14jIT8vLCAnJyk7XG4gICAgICAgIC8vIGFsd2F5c1xuICAgICAgICBpZiAocmF3LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgICAgcmF3ID0gJy8nICsgcmF3O1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb3JtYXR0ZWRQYXRoID0gc2VsZi5mb3JtYXRQYXRoKHJhdyk7XG4gICAgICAgIGlmIChmb3JtYXR0ZWRQYXRoICE9PSBwYXRoKSB7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShmb3JtYXR0ZWRQYXRoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGV0ZXJtaW5lIHF1ZXJ5XG4gICAgICAgIC8vIG5vdGUgaXQncyBwb3NzaWJsZSB0byBoYXZlIHF1ZXJpZXMgaW4gYm90aCB0aGUgYWN0dWFsIFVSTFxuICAgICAgICAvLyBhbmQgdGhlIGhhc2ggZnJhZ21lbnQgaXRzZWxmLlxuICAgICAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2ggJiYgcGF0aC5pbmRleE9mKCc/JykgPiAtMSA/ICcmJyArIGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKSA6IGxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgc2VsZi5vbkNoYW5nZShwYXRoLnJlcGxhY2UoL14jIT8vLCAnJykgKyBxdWVyeSk7XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIHRoaXMubGlzdGVuZXIoKTtcbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XG4gICAgICBwYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24uaGFzaCA9IHBhdGg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcbiAgICAgIHZhciBpc0Fic29sb3V0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gICAgICB2YXIgcHJlZml4ID0gJyMnICsgKHRoaXMuaGFzaGJhbmcgPyAnIScgOiAnJyk7XG4gICAgICByZXR1cm4gaXNBYnNvbG91dGUgPyBwcmVmaXggKyBwYXRoIDogcHJlZml4ICsgcmVzb2x2ZVBhdGgobG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIyE/LywgJycpLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSGFzaEhpc3Rvcnk7XG4gIH0pKCk7XG5cbiAgdmFyIEFic3RyYWN0SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWJzdHJhY3RIaXN0b3J5KF9yZWYpIHtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJzdHJhY3RIaXN0b3J5KTtcblxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgdGhpcy5jdXJyZW50UGF0aCA9ICcvJztcbiAgICB9XG5cbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB0aGlzLm9uQ2hhbmdlKCcvJyk7XG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAvLyBub29wXG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHBhdGggPSB0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG4gICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgpO1xuICAgIH07XG5cbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5jdXJyZW50UGF0aCwgcGF0aCwgYXBwZW5kKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHRoZSByZXVzYWJpbGl0eSBvZiBhbiBleGlzdGluZyByb3V0ZXIgdmlldy5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhblJldXNlKHZpZXcsIGhhbmRsZXIsIHRyYW5zaXRpb24pIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuICAgIGlmICghY29tcG9uZW50IHx8ICFoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGltcG9ydGFudDogY2hlY2sgdmlldy5Db21wb25lbnQgaGVyZSBiZWNhdXNlIGl0IG1heVxuICAgIC8vIGhhdmUgYmVlbiBjaGFuZ2VkIGluIGFjdGl2YXRlIGhvb2tcbiAgICBpZiAodmlldy5Db21wb25lbnQgIT09IGhhbmRsZXIuY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBjYW5SZXVzZUZuID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnY2FuUmV1c2UnKTtcbiAgICByZXR1cm4gdHlwZW9mIGNhblJldXNlRm4gPT09ICdib29sZWFuJyA/IGNhblJldXNlRm4gOiBjYW5SZXVzZUZuID8gY2FuUmV1c2VGbi5jYWxsKGNvbXBvbmVudCwge1xuICAgICAgdG86IHRyYW5zaXRpb24udG8sXG4gICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cbiAgICB9KSA6IHRydWU7IC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCBjYW4gZGVhY3RpdmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuRGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgdmFyIGZyb21Db21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhmcm9tQ29tcG9uZW50LCAnY2FuRGVhY3RpdmF0ZScpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIGZyb21Db21wb25lbnQsIG5leHQsIHtcbiAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBhY3RpdmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuQWN0aXZhdGUoaGFuZGxlciwgdHJhbnNpdGlvbiwgbmV4dCkge1xuICAgIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICAvLyBoYXZlIHRvIGNoZWNrIGR1ZSB0byBhc3luYy1uZXNzXG4gICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIGNvbXBvbmVudCBjYW4gYmUgYWN0aXZhdGVkXG4gICAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2NhbkFjdGl2YXRlJyk7XG4gICAgICBpZiAoIWhvb2spIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG4gICAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGRlYWN0aXZhdGUgaG9va3MgZm9yIGV4aXN0aW5nIHJvdXRlci12aWV3cy5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gZGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RlYWN0aXZhdGUnKTtcbiAgICBpZiAoIWhvb2spIHtcbiAgICAgIG5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBuZXh0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgLyBzd2l0Y2ggY29tcG9uZW50IGZvciBhIHJvdXRlci12aWV3LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlcHRoXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiLCByZXVzZSkge1xuICAgIHZhciBoYW5kbGVyID0gdHJhbnNpdGlvbi5hY3RpdmF0ZVF1ZXVlW2RlcHRoXTtcbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG4gICAgICBpZiAodmlldy5fYm91bmQpIHtcbiAgICAgICAgdmlldy5zZXRDb21wb25lbnQobnVsbCk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBDb21wb25lbnQgPSB2aWV3LkNvbXBvbmVudCA9IGhhbmRsZXIuY29tcG9uZW50O1xuICAgIHZhciBhY3RpdmF0ZUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdhY3RpdmF0ZScpO1xuICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2RhdGEnKTtcbiAgICB2YXIgd2FpdEZvckRhdGEgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICd3YWl0Rm9yRGF0YScpO1xuXG4gICAgdmlldy5kZXB0aCA9IGRlcHRoO1xuICAgIHZpZXcuYWN0aXZhdGVkID0gZmFsc2U7XG5cbiAgICB2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgIHZhciBsb2FkaW5nID0gISEoZGF0YUhvb2sgJiYgIXdhaXRGb3JEYXRhKTtcblxuICAgIC8vIFwicmV1c2VcIiBpcyBhIGZsYWcgcGFzc2VkIGRvd24gd2hlbiB0aGUgcGFyZW50IHZpZXcgaXNcbiAgICAvLyBlaXRoZXIgcmV1c2VkIHZpYSBrZWVwLWFsaXZlIG9yIGFzIGEgY2hpbGQgb2YgYSBrZXB0LWFsaXZlIHZpZXcuXG4gICAgLy8gb2YgY291cnNlIHdlIGNhbiBvbmx5IHJldXNlIGlmIHRoZSBjdXJyZW50IGtlcHQtYWxpdmUgaW5zdGFuY2VcbiAgICAvLyBpcyBvZiB0aGUgY29ycmVjdCB0eXBlLlxuICAgIHJldXNlID0gcmV1c2UgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWTS5jb25zdHJ1Y3RvciA9PT0gQ29tcG9uZW50O1xuXG4gICAgaWYgKHJldXNlKSB7XG4gICAgICAvLyBqdXN0IHJldXNlXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXG4gICAgICAvLyB1bmJ1aWxkIGN1cnJlbnQgY29tcG9uZW50LiB0aGlzIHN0ZXAgYWxzbyBkZXN0cm95c1xuICAgICAgLy8gYW5kIHJlbW92ZXMgYWxsIG5lc3RlZCBjaGlsZCB2aWV3cy5cbiAgICAgIHZpZXcudW5idWlsZCh0cnVlKTtcblxuICAgICAgLy8gYnVpbGQgdGhlIG5ldyBjb21wb25lbnQuIHRoaXMgd2lsbCBhbHNvIGNyZWF0ZSB0aGVcbiAgICAgIC8vIGRpcmVjdCBjaGlsZCB2aWV3IG9mIHRoZSBjdXJyZW50IG9uZS4gaXQgd2lsbCByZWdpc3RlclxuICAgICAgLy8gaXRzZWxmIGFzIHZpZXcuY2hpbGRWaWV3LlxuICAgICAgY29tcG9uZW50ID0gdmlldy5idWlsZCh7XG4gICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgJGxvYWRpbmdSb3V0ZURhdGE6IGxvYWRpbmdcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICAgICAgICB0aGlzLl9yb3V0ZXJWaWV3ID0gdmlldztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGhhbmRsZSBrZWVwLWFsaXZlLlxuICAgICAgLy8gd2hlbiBhIGtlcHQtYWxpdmUgY2hpbGQgdm0gaXMgcmVzdG9yZWQsIHdlIG5lZWQgdG9cbiAgICAgIC8vIGFkZCBpdHMgY2FjaGVkIGNoaWxkIHZpZXdzIGludG8gdGhlIHJvdXRlcidzIHZpZXcgbGlzdCxcbiAgICAgIC8vIGFuZCBhbHNvIHByb3Blcmx5IHVwZGF0ZSBjdXJyZW50IHZpZXcncyBjaGlsZCB2aWV3LlxuICAgICAgaWYgKHZpZXcua2VlcEFsaXZlKSB7XG4gICAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG4gICAgICAgIHZhciBjYWNoZWRDaGlsZFZpZXcgPSBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXc7XG4gICAgICAgIGlmIChjYWNoZWRDaGlsZFZpZXcpIHtcbiAgICAgICAgICB2aWV3LmNoaWxkVmlldyA9IGNhY2hlZENoaWxkVmlldztcbiAgICAgICAgICBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2xlYW51cCB0aGUgY29tcG9uZW50IGluIGNhc2UgdGhlIHRyYW5zaXRpb24gaXMgYWJvcnRlZFxuICAgIC8vIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGV2ZXIgaW5zZXJ0ZWQuXG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgY29tcG9uZW50LiRkZXN0cm95KCk7XG4gICAgfTtcblxuICAgIC8vIGFjdHVhbGx5IGluc2VydCB0aGUgY29tcG9uZW50IGFuZCB0cmlnZ2VyIHRyYW5zaXRpb25cbiAgICB2YXIgaW5zZXJ0ID0gZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgICAgaWYgKHJldXNlKSB7XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlcjtcbiAgICAgIGlmIChyb3V0ZXIuX3JlbmRlcmVkIHx8IHJvdXRlci5fdHJhbnNpdGlvbk9uTG9hZCkge1xuICAgICAgICB2aWV3LnRyYW5zaXRpb24oY29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vIHRyYW5zaXRpb24gb24gZmlyc3QgcmVuZGVyLCBtYW51YWwgdHJhbnNpdGlvblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHZpZXcuc2V0Q3VycmVudCkge1xuICAgICAgICAgIC8vIDAuMTIgY29tcGF0XG4gICAgICAgICAgdmlldy5zZXRDdXJyZW50KGNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gMS4wXG4gICAgICAgICAgdmlldy5jaGlsZFZNID0gY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudC4kYmVmb3JlKHZpZXcuYW5jaG9yLCBudWxsLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH07XG5cbiAgICB2YXIgYWZ0ZXJEYXRhID0gZnVuY3Rpb24gYWZ0ZXJEYXRhKCkge1xuICAgICAgLy8gYWN0aXZhdGUgdGhlIGNoaWxkIHZpZXdcbiAgICAgIGlmICh2aWV3LmNoaWxkVmlldykge1xuICAgICAgICBhY3RpdmF0ZSh2aWV3LmNoaWxkVmlldywgdHJhbnNpdGlvbiwgZGVwdGggKyAxLCBudWxsLCByZXVzZSB8fCB2aWV3LmtlZXBBbGl2ZSk7XG4gICAgICB9XG4gICAgICBpbnNlcnQoKTtcbiAgICB9O1xuXG4gICAgLy8gY2FsbGVkIGFmdGVyIGFjdGl2YXRpb24gaG9vayBpcyByZXNvbHZlZFxuICAgIHZhciBhZnRlckFjdGl2YXRlID0gZnVuY3Rpb24gYWZ0ZXJBY3RpdmF0ZSgpIHtcbiAgICAgIHZpZXcuYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChkYXRhSG9vayAmJiB3YWl0Rm9yRGF0YSkge1xuICAgICAgICAvLyB3YWl0IHVudGlsIGRhdGEgbG9hZGVkIHRvIGluc2VydFxuICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rLCBhZnRlckRhdGEsIGNsZWFudXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbG9hZCBkYXRhIGFuZCBpbnNlcnQgYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICBpZiAoZGF0YUhvb2spIHtcbiAgICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcbiAgICAgICAgfVxuICAgICAgICBhZnRlckRhdGEoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGFjdGl2YXRlSG9vaykge1xuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoYWN0aXZhdGVIb29rLCBjb21wb25lbnQsIGFmdGVyQWN0aXZhdGUsIHtcbiAgICAgICAgY2xlYW51cDogY2xlYW51cCxcbiAgICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJBY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXVzZSBhIHZpZXcsIGp1c3QgcmVsb2FkIGRhdGEgaWYgbmVjZXNzYXJ5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gcmV1c2UodmlldywgdHJhbnNpdGlvbikge1xuICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGF0YScpO1xuICAgIGlmIChkYXRhSG9vaykge1xuICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jaHJvbm91c2x5IGxvYWQgYW5kIGFwcGx5IGRhdGEgdG8gY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY29tcG9uZW50XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsZWFudXBcbiAgICovXG5cbiAgZnVuY3Rpb24gbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBob29rLCBjYiwgY2xlYW51cCkge1xuICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IHRydWU7XG4gICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBmYWxzZTtcbiAgICAgIGNvbXBvbmVudC4kZW1pdCgncm91dGUtZGF0YS1sb2FkZWQnLCBjb21wb25lbnQpO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9LCB7XG4gICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHtcbiAgICAgICAgLy8gaGFuZGxlIHByb21pc2Ugc3VnYXIgc3ludGF4XG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFba2V5XTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UodmFsKSkge1xuICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHZhbC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFZhbCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgcmVzb2x2ZWRWYWwpO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb21wb25lbnQuJHNldChrZXksIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21pc2VzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBwcm9taXNlc1swXS5jb25zdHJ1Y3Rvci5hbGwocHJvbWlzZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSB0aGUgY2hpbGQgdmlldyBmb3IgYSBrZXB0LWFsaXZlIHZpZXcgc28gdGhhdFxuICAgKiB3ZSBjYW4gcmVzdG9yZSBpdCB3aGVuIGl0IGlzIHN3aXRjaGVkIGJhY2sgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNhdmVDaGlsZFZpZXcodmlldykge1xuICAgIGlmICh2aWV3LmtlZXBBbGl2ZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZpZXcpIHtcbiAgICAgIHZpZXcuY2hpbGRWTS5fa2VlcEFsaXZlUm91dGVyVmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuICAgIH1cbiAgICB2aWV3LmNoaWxkVmlldyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgcGxhaW4gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cblxuICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuICAvKipcbiAgICogQSBSb3V0ZVRyYW5zaXRpb24gb2JqZWN0IG1hbmFnZXMgdGhlIHBpcGVsaW5lIG9mIGFcbiAgICogcm91dGVyLXZpZXcgc3dpdGNoaW5nIHByb2Nlc3MuIFRoaXMgaXMgYWxzbyB0aGUgb2JqZWN0XG4gICAqIHBhc3NlZCBpbnRvIHVzZXIgcm91dGUgaG9va3MuXG4gICAqXG4gICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcbiAgICogQHBhcmFtIHtSb3V0ZX0gdG9cbiAgICogQHBhcmFtIHtSb3V0ZX0gZnJvbVxuICAgKi9cblxuICB2YXIgUm91dGVUcmFuc2l0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3V0ZVRyYW5zaXRpb24ocm91dGVyLCB0bywgZnJvbSkge1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlVHJhbnNpdGlvbik7XG5cbiAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFib3J0IGN1cnJlbnQgdHJhbnNpdGlvbiBhbmQgcmV0dXJuIHRvIHByZXZpb3VzIGxvY2F0aW9uLlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gaWYgdGhlIHJvb3QgcGF0aCB0aHJvd3MgYW4gZXJyb3IgZHVyaW5nIHZhbGlkYXRpb25cbiAgICAgICAgLy8gb24gaW5pdGlhbCBsb2FkLCBpdCBnZXRzIGNhdWdodCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICB2YXIgYWJvcnRpbmdPbkxvYWQgPSAhdGhpcy5mcm9tLnBhdGggJiYgdGhpcy50by5wYXRoID09PSAnLyc7XG4gICAgICAgIGlmICghYWJvcnRpbmdPbkxvYWQpIHtcbiAgICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHRoaXMuZnJvbS5wYXRoIHx8ICcvJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZWRpcmVjdCB0byBhIG5ldyBsb2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QocGF0aCkge1xuICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHBhdGggPSBtYXBQYXJhbXMocGF0aCwgdGhpcy50by5wYXJhbXMsIHRoaXMudG8ucXVlcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucGFyYW1zID0gcGF0aC5wYXJhbXMgfHwgdGhpcy50by5wYXJhbXM7XG4gICAgICAgICAgcGF0aC5xdWVyeSA9IHBhdGgucXVlcnkgfHwgdGhpcy50by5xdWVyeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHBhdGgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBIHJvdXRlciB2aWV3IHRyYW5zaXRpb24ncyBwaXBlbGluZSBjYW4gYmUgZGVzY3JpYmVkIGFzXG4gICAgICogZm9sbG93cywgYXNzdW1pbmcgd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBhbiBleGlzdGluZ1xuICAgICAqIDxyb3V0ZXItdmlldz4gY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQl0gdG8gYSBuZXdcbiAgICAgKiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBDXTpcbiAgICAgKlxuICAgICAqICBBICAgIEFcbiAgICAgKiAgfCA9PiB8XG4gICAgICogIEIgICAgQ1xuICAgICAqXG4gICAgICogMS4gUmV1c2FibGl0eSBwaGFzZTpcbiAgICAgKiAgIC0+IGNhblJldXNlKEEsIEEpXG4gICAgICogICAtPiBjYW5SZXVzZShCLCBDKVxuICAgICAqICAgLT4gZGV0ZXJtaW5lIG5ldyBxdWV1ZXM6XG4gICAgICogICAgICAtIGRlYWN0aXZhdGlvbjogW0JdXG4gICAgICogICAgICAtIGFjdGl2YXRpb246IFtDXVxuICAgICAqXG4gICAgICogMi4gVmFsaWRhdGlvbiBwaGFzZTpcbiAgICAgKiAgIC0+IGNhbkRlYWN0aXZhdGUoQilcbiAgICAgKiAgIC0+IGNhbkFjdGl2YXRlKEMpXG4gICAgICpcbiAgICAgKiAzLiBBY3RpdmF0aW9uIHBoYXNlOlxuICAgICAqICAgLT4gZGVhY3RpdmF0ZShCKVxuICAgICAqICAgLT4gYWN0aXZhdGUoQylcbiAgICAgKlxuICAgICAqIEVhY2ggb2YgdGhlc2Ugc3RlcHMgY2FuIGJlIGFzeW5jaHJvbm91cywgYW5kIGFueVxuICAgICAqIHN0ZXAgY2FuIHBvdGVudGlhbGx5IGFib3J0IHRoZSB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChjYikge1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHZpZXdzIHRvIGRlYWN0aXZhdGVcbiAgICAgIHZhciBkZWFjdGl2YXRlUXVldWUgPSBbXTtcbiAgICAgIHZhciB2aWV3ID0gdGhpcy5yb3V0ZXIuX3Jvb3RWaWV3O1xuICAgICAgd2hpbGUgKHZpZXcpIHtcbiAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlLnVuc2hpZnQodmlldyk7XG4gICAgICAgIHZpZXcgPSB2aWV3LmNoaWxkVmlldztcbiAgICAgIH1cbiAgICAgIHZhciByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlID0gZGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKCkucmV2ZXJzZSgpO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHJvdXRlIGhhbmRsZXJzIHRvIGFjdGl2YXRlXG4gICAgICB2YXIgYWN0aXZhdGVRdWV1ZSA9IHRoaXMuYWN0aXZhdGVRdWV1ZSA9IHRvQXJyYXkodGhpcy50by5tYXRjaGVkKS5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaC5oYW5kbGVyO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIDEuIFJldXNhYmlsaXR5IHBoYXNlXG4gICAgICB2YXIgaSA9IHVuZGVmaW5lZCxcbiAgICAgICAgICByZXVzZVF1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHJldmVyc2VEZWFjdGl2YXRlUXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFjYW5SZXVzZShyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlW2ldLCBhY3RpdmF0ZVF1ZXVlW2ldLCB0cmFuc2l0aW9uKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgcmV1c2VRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoMCwgaSk7XG4gICAgICAgIGRlYWN0aXZhdGVRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoaSkucmV2ZXJzZSgpO1xuICAgICAgICBhY3RpdmF0ZVF1ZXVlID0gYWN0aXZhdGVRdWV1ZS5zbGljZShpKTtcbiAgICAgIH1cblxuICAgICAgLy8gMi4gVmFsaWRhdGlvbiBwaGFzZVxuICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGNhbkRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShhY3RpdmF0ZVF1ZXVlLCBjYW5BY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoZGVhY3RpdmF0ZVF1ZXVlLCBkZWFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAzLiBBY3RpdmF0aW9uIHBoYXNlXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSByb3V0ZXIgY3VycmVudCByb3V0ZVxuICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIuX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKTtcblxuICAgICAgICAgICAgLy8gdHJpZ2dlciByZXVzZSBmb3IgYWxsIHJldXNlZCB2aWV3c1xuICAgICAgICAgICAgcmV1c2VRdWV1ZSAmJiByZXVzZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHRoZSByb290IG9mIHRoZSBjaGFpbiB0aGF0IG5lZWRzIHRvIGJlIHJlcGxhY2VkXG4gICAgICAgICAgICAvLyBpcyB0aGUgdG9wLW1vc3Qgbm9uLXJldXNhYmxlIHZpZXcuXG4gICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICB2YXIgX3ZpZXcgPSBkZWFjdGl2YXRlUXVldWVbZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICB2YXIgZGVwdGggPSByZXVzZVF1ZXVlID8gcmV1c2VRdWV1ZS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICBhY3RpdmF0ZShfdmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IGFuZCBzZXF1ZW50aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiB0byBhXG4gICAgICogcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuUXVldWUgPSBmdW5jdGlvbiBydW5RdWV1ZShxdWV1ZSwgZm4sIGNiKSB7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG4gICAgICBzdGVwKDApO1xuICAgICAgZnVuY3Rpb24gc3RlcChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbihxdWV1ZVtpbmRleF0sIHRyYW5zaXRpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgdXNlciBwcm92aWRlZCByb3V0ZSB0cmFuc2l0aW9uIGhvb2sgYW5kIGhhbmRsZVxuICAgICAqIHRoZSByZXNwb25zZSAoZS5nLiBpZiB0aGUgdXNlciByZXR1cm5zIGEgcHJvbWlzZSkuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdXNlciBuZWl0aGVyIGV4cGVjdHMgYW4gYXJndW1lbnQgbm9yIHJldHVybnMgYVxuICAgICAqIHByb21pc2UsIHRoZSBob29rIGlzIGFzc3VtZWQgdG8gYmUgc3luY2hyb25vdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gICAgICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBleHBlY3RCb29sZWFuXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHBvc3RBY3RpdmVcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IHByb2Nlc3NEYXRhXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBjbGVhbnVwXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgY29udGV4dCwgY2IpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbM107XG5cbiAgICAgIHZhciBfcmVmJGV4cGVjdEJvb2xlYW4gPSBfcmVmLmV4cGVjdEJvb2xlYW47XG4gICAgICB2YXIgZXhwZWN0Qm9vbGVhbiA9IF9yZWYkZXhwZWN0Qm9vbGVhbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGV4cGVjdEJvb2xlYW47XG4gICAgICB2YXIgX3JlZiRwb3N0QWN0aXZhdGUgPSBfcmVmLnBvc3RBY3RpdmF0ZTtcbiAgICAgIHZhciBwb3N0QWN0aXZhdGUgPSBfcmVmJHBvc3RBY3RpdmF0ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHBvc3RBY3RpdmF0ZTtcbiAgICAgIHZhciBwcm9jZXNzRGF0YSA9IF9yZWYucHJvY2Vzc0RhdGE7XG4gICAgICB2YXIgY2xlYW51cCA9IF9yZWYuY2xlYW51cDtcblxuICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuICAgICAgdmFyIG5leHRDYWxsZWQgPSBmYWxzZTtcblxuICAgICAgLy8gYWJvcnQgdGhlIHRyYW5zaXRpb25cbiAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgICBjbGVhbnVwICYmIGNsZWFudXAoKTtcbiAgICAgICAgdHJhbnNpdGlvbi5hYm9ydCgpO1xuICAgICAgfTtcblxuICAgICAgLy8gaGFuZGxlIGVycm9yc1xuICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICBwb3N0QWN0aXZhdGUgPyBuZXh0KCkgOiBhYm9ydCgpO1xuICAgICAgICBpZiAoZXJyICYmICF0cmFuc2l0aW9uLnJvdXRlci5fc3VwcHJlc3MpIHtcbiAgICAgICAgICB3YXJuJDEoJ1VuY2F1Z2h0IGVycm9yIGR1cmluZyB0cmFuc2l0aW9uOiAnKTtcbiAgICAgICAgICB0aHJvdyBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBzaW5jZSBwcm9taXNlIHN3YWxsb3dzIGVycm9ycywgd2UgaGF2ZSB0b1xuICAgICAgLy8gdGhyb3cgaXQgaW4gdGhlIG5leHQgdGljay4uLlxuICAgICAgdmFyIG9uUHJvbWlzZUVycm9yID0gZnVuY3Rpb24gb25Qcm9taXNlRXJyb3IoZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBhZHZhbmNlIHRoZSB0cmFuc2l0aW9uIHRvIHRoZSBuZXh0IHN0ZXBcbiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgaWYgKG5leHRDYWxsZWQpIHtcbiAgICAgICAgICB3YXJuJDEoJ3RyYW5zaXRpb24ubmV4dCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuICAgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgfTtcblxuICAgICAgdmFyIG5leHRXaXRoQm9vbGVhbiA9IGZ1bmN0aW9uIG5leHRXaXRoQm9vbGVhbihyZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHJlcyA/IG5leHQoKSA6IGFib3J0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICByZXMudGhlbihmdW5jdGlvbiAob2spIHtcbiAgICAgICAgICAgIG9rID8gbmV4dCgpIDogYWJvcnQoKTtcbiAgICAgICAgICB9LCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWhvb2subGVuZ3RoKSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbmV4dFdpdGhEYXRhID0gZnVuY3Rpb24gbmV4dFdpdGhEYXRhKGRhdGEpIHtcbiAgICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXMgPSBwcm9jZXNzRGF0YShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBleHBvc2UgYSBjbG9uZSBvZiB0aGUgdHJhbnNpdGlvbiBvYmplY3QsIHNvIHRoYXQgZWFjaFxuICAgICAgLy8gaG9vayBnZXRzIGEgY2xlYW4gY29weSBhbmQgcHJldmVudCB0aGUgdXNlciBmcm9tXG4gICAgICAvLyBtZXNzaW5nIHdpdGggdGhlIGludGVybmFscy5cbiAgICAgIHZhciBleHBvc2VkID0ge1xuICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcbiAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tLFxuICAgICAgICBhYm9ydDogYWJvcnQsXG4gICAgICAgIG5leHQ6IHByb2Nlc3NEYXRhID8gbmV4dFdpdGhEYXRhIDogbmV4dCxcbiAgICAgICAgcmVkaXJlY3Q6IGZ1bmN0aW9uIHJlZGlyZWN0KCkge1xuICAgICAgICAgIHRyYW5zaXRpb24ucmVkaXJlY3QuYXBwbHkodHJhbnNpdGlvbiwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gYWN0dWFsbHkgY2FsbCB0aGUgaG9va1xuICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcyA9IGhvb2suY2FsbChjb250ZXh0LCBleHBvc2VkKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXhwZWN0Qm9vbGVhbikge1xuICAgICAgICAvLyBib29sZWFuIGhvb2tzXG4gICAgICAgIG5leHRXaXRoQm9vbGVhbihyZXMpO1xuICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAvLyBwcm9taXNlXG4gICAgICAgIGlmIChwcm9jZXNzRGF0YSkge1xuICAgICAgICAgIHJlcy50aGVuKG5leHRXaXRoRGF0YSwgb25Qcm9taXNlRXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzRGF0YSAmJiBpc1BsYWluT2piZWN0KHJlcykpIHtcbiAgICAgICAgLy8gZGF0YSBwcm9taXNlIHN1Z2FyXG4gICAgICAgIG5leHRXaXRoRGF0YShyZXMpO1xuICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgc2luZ2xlIGhvb2sgb3IgYW4gYXJyYXkgb2YgYXN5bmMgaG9va3MgaW4gc2VyaWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gaG9va3NcbiAgICAgKiBAcGFyYW0geyp9IGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2tzID0gZnVuY3Rpb24gY2FsbEhvb2tzKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaG9va3MpKSB7XG4gICAgICAgIHRoaXMucnVuUXVldWUoaG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG4gICAgICAgICAgaWYgKCFfdGhpcy5hYm9ydGVkKSB7XG4gICAgICAgICAgICBfdGhpcy5jYWxsSG9vayhob29rLCBjb250ZXh0LCBuZXh0LCBvcHRpb25zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2FsbEhvb2soaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFJvdXRlVHJhbnNpdGlvbjtcbiAgfSkoKTtcblxuICBmdW5jdGlvbiBpc1BsYWluT2piZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuICBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuICAgIHJldHVybiB2YWwgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh2YWwpIDogW107XG4gIH1cblxuICB2YXIgaW50ZXJuYWxLZXlzUkUgPSAvXihjb21wb25lbnR8c3ViUm91dGVzfGZ1bGxQYXRoKSQvO1xuXG4gIC8qKlxuICAgKiBSb3V0ZSBDb250ZXh0IE9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG4gICAqL1xuXG4gIHZhciBSb3V0ZSA9IGZ1bmN0aW9uIFJvdXRlKHBhdGgsIHJvdXRlcikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGUpO1xuXG4gICAgdmFyIG1hdGNoZWQgPSByb3V0ZXIuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAvLyBjb3B5IGFsbCBjdXN0b20gZmllbGRzIGZyb20gcm91dGUgY29uZmlnc1xuICAgICAgW10uZm9yRWFjaC5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWF0Y2guaGFuZGxlcikge1xuICAgICAgICAgIGlmICghaW50ZXJuYWxLZXlzUkUudGVzdChrZXkpKSB7XG4gICAgICAgICAgICBfdGhpc1trZXldID0gbWF0Y2guaGFuZGxlcltrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBzZXQgcXVlcnkgYW5kIHBhcmFtc1xuICAgICAgdGhpcy5xdWVyeSA9IG1hdGNoZWQucXVlcnlQYXJhbXM7XG4gICAgICB0aGlzLnBhcmFtcyA9IFtdLnJlZHVjZS5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICAgICAgaWYgKGN1ci5wYXJhbXMpIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY3VyLnBhcmFtcykge1xuICAgICAgICAgICAgcHJldltrZXldID0gY3VyLnBhcmFtc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgLy8gZXhwb3NlIHBhdGggYW5kIHJvdXRlclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgLy8gZm9yIGludGVybmFsIHVzZVxuICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQgfHwgcm91dGVyLl9ub3RGb3VuZEhhbmRsZXI7XG4gICAgLy8gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIHJvdXRlclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm91dGVyJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB2YWx1ZTogcm91dGVyXG4gICAgfSk7XG4gICAgLy8gSW1wb3J0YW50OiBmcmVlemUgc2VsZiB0byBwcmV2ZW50IG9ic2VydmF0aW9uXG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhcHBseU92ZXJyaWRlIChWdWUpIHtcbiAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG4gICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XG4gICAgdmFyIGlzQXJyYXkgPSBfVnVlJHV0aWwuaXNBcnJheTtcbiAgICB2YXIgZGVmaW5lUmVhY3RpdmUgPSBfVnVlJHV0aWwuZGVmaW5lUmVhY3RpdmU7XG5cbiAgICAvLyBvdmVycmlkZSBWdWUncyBpbml0IGFuZCBkZXN0cm95IHByb2Nlc3MgdG8ga2VlcCB0cmFjayBvZiByb3V0ZXIgaW5zdGFuY2VzXG4gICAgdmFyIGluaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcm9vdCA9IG9wdGlvbnMuX3BhcmVudCB8fCBvcHRpb25zLnBhcmVudCB8fCB0aGlzO1xuICAgICAgdmFyIHJvdXRlciA9IHJvb3QuJHJvdXRlcjtcbiAgICAgIHZhciByb3V0ZSA9IHJvb3QuJHJvdXRlO1xuICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICAvLyBleHBvc2Ugcm91dGVyXG4gICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgcm91dGVyLl9jaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuX2RlZmluZU1ldGEpIHtcbiAgICAgICAgICAvLyAwLjEyXG4gICAgICAgICAgdGhpcy5fZGVmaW5lTWV0YSgnJHJvdXRlJywgcm91dGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIDEuMFxuICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsICckcm91dGUnLCByb3V0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgJiYgdGhpcy4kcm91dGVyKSB7XG4gICAgICAgIHRoaXMuJHJvdXRlci5fY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIGRlc3Ryb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgLy8gMS4wIG9ubHk6IGVuYWJsZSByb3V0ZSBtaXhpbnNcbiAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG4gICAgdmFyIGhvb2tzVG9NZXJnZVJFID0gL14oZGF0YXxhY3RpdmF0ZXxkZWFjdGl2YXRlKSQvO1xuXG4gICAgaWYgKHN0cmF0cykge1xuICAgICAgc3RyYXRzLnJvdXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgICAgICAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgICAgICAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcbiAgICAgICAgICB2YXIgYSA9IHJldFtrZXldO1xuICAgICAgICAgIHZhciBiID0gY2hpbGRWYWxba2V5XTtcbiAgICAgICAgICAvLyBmb3IgZGF0YSwgYWN0aXZhdGUgYW5kIGRlYWN0aXZhdGUsIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvXG4gICAgICAgICAgLy8gYXJyYXlzIHNpbWlsYXIgdG8gbGlmZWN5Y2xlIGhvb2tzLlxuICAgICAgICAgIGlmIChhICYmIGhvb2tzVG9NZXJnZVJFLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgcmV0W2tleV0gPSAoaXNBcnJheShhKSA/IGEgOiBbYV0pLmNvbmNhdChiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2tleV0gPSBiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBWaWV3IChWdWUpIHtcblxuICAgIHZhciBfID0gVnVlLnV0aWw7XG4gICAgdmFyIGNvbXBvbmVudERlZiA9XG4gICAgLy8gMC4xMlxuICAgIFZ1ZS5kaXJlY3RpdmUoJ19jb21wb25lbnQnKSB8fFxuICAgIC8vIDEuMFxuICAgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50O1xuICAgIC8vIDxyb3V0ZXItdmlldz4gZXh0ZW5kcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IGRpcmVjdGl2ZVxuICAgIHZhciB2aWV3RGVmID0gXy5leHRlbmQoe30sIGNvbXBvbmVudERlZik7XG5cbiAgICAvLyB3aXRoIHNvbWUgb3ZlcnJpZGVzXG4gICAgXy5leHRlbmQodmlld0RlZiwge1xuXG4gICAgICBfaXNSb3V0ZXJWaWV3OiB0cnVlLFxuXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgcm91dGUgPSB0aGlzLnZtLiRyb3V0ZTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgICB3YXJuJDEoJzxyb3V0ZXItdmlldz4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSAnICsgJ3JvdXRlci1lbmFibGVkIGFwcC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZm9yY2UgZHluYW1pYyBkaXJlY3RpdmUgc28gdi1jb21wb25lbnQgZG9lc24ndFxuICAgICAgICAvLyBhdHRlbXB0IHRvIGJ1aWxkIHJpZ2h0IG5vd1xuICAgICAgICB0aGlzLl9pc0R5bmFtaWNMaXRlcmFsID0gdHJ1ZTtcbiAgICAgICAgLy8gZmluYWxseSwgaW5pdCBieSBkZWxlZ2F0aW5nIHRvIHYtY29tcG9uZW50XG4gICAgICAgIGNvbXBvbmVudERlZi5iaW5kLmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy8gbG9jYXRlIHRoZSBwYXJlbnQgdmlld1xuICAgICAgICB2YXIgcGFyZW50VmlldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMudm07XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICBpZiAocGFyZW50Ll9yb3V0ZXJWaWV3KSB7XG4gICAgICAgICAgICBwYXJlbnRWaWV3ID0gcGFyZW50Ll9yb3V0ZXJWaWV3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRWaWV3KSB7XG4gICAgICAgICAgLy8gcmVnaXN0ZXIgc2VsZiBhcyBhIGNoaWxkIG9mIHRoZSBwYXJlbnQgdmlldyxcbiAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGFjdGl2YXRpbmcgbm93LiBUaGlzIGlzIHNvIHRoYXQgdGhlXG4gICAgICAgICAgLy8gY2hpbGQncyBhY3RpdmF0ZSBob29rIGlzIGNhbGxlZCBhZnRlciB0aGVcbiAgICAgICAgICAvLyBwYXJlbnQncyBoYXMgcmVzb2x2ZWQuXG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gcGFyZW50VmlldztcbiAgICAgICAgICBwYXJlbnRWaWV3LmNoaWxkVmlldyA9IHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdGhpcyBpcyB0aGUgcm9vdCB2aWV3IVxuICAgICAgICAgIHZhciByb3V0ZXIgPSByb3V0ZS5yb3V0ZXI7XG4gICAgICAgICAgcm91dGVyLl9yb290VmlldyA9IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGUgbGF0ZS1yZW5kZXJlZCB2aWV3XG4gICAgICAgIC8vIHR3byBwb3NzaWJpbGl0aWVzOlxuICAgICAgICAvLyAxLiByb290IHZpZXcgcmVuZGVyZWQgYWZ0ZXIgdHJhbnNpdGlvbiBoYXMgYmVlblxuICAgICAgICAvLyAgICB2YWxpZGF0ZWQ7XG4gICAgICAgIC8vIDIuIGNoaWxkIHZpZXcgcmVuZGVyZWQgYWZ0ZXIgcGFyZW50IHZpZXcgaGFzIGJlZW5cbiAgICAgICAgLy8gICAgYWN0aXZhdGVkLlxuICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHJvdXRlLnJvdXRlci5fY3VycmVudFRyYW5zaXRpb247XG4gICAgICAgIGlmICghcGFyZW50VmlldyAmJiB0cmFuc2l0aW9uLmRvbmUgfHwgcGFyZW50VmlldyAmJiBwYXJlbnRWaWV3LmFjdGl2YXRlZCkge1xuICAgICAgICAgIHZhciBkZXB0aCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LmRlcHRoICsgMSA6IDA7XG4gICAgICAgICAgYWN0aXZhdGUodGhpcywgdHJhbnNpdGlvbiwgZGVwdGgpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Vmlldykge1xuICAgICAgICAgIHRoaXMucGFyZW50Vmlldy5jaGlsZFZpZXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudERlZi51bmJpbmQuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFZ1ZS5lbGVtZW50RGlyZWN0aXZlKCdyb3V0ZXItdmlldycsIHZpZXdEZWYpO1xuICB9XG5cbiAgdmFyIHRyYWlsaW5nU2xhc2hSRSA9IC9cXC8kLztcbiAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuICB2YXIgcXVlcnlTdHJpbmdSRSA9IC9cXD8uKiQvO1xuXG4gIC8vIGluc3RhbGwgdi1saW5rLCB3aGljaCBwcm92aWRlcyBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yXG4gIC8vIEhUTUw1IGhpc3RvcnkgbW9kZVxuICBmdW5jdGlvbiBMaW5rIChWdWUpIHtcbiAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG4gICAgdmFyIF9iaW5kID0gX1Z1ZSR1dGlsLmJpbmQ7XG4gICAgdmFyIGlzT2JqZWN0ID0gX1Z1ZSR1dGlsLmlzT2JqZWN0O1xuICAgIHZhciBhZGRDbGFzcyA9IF9WdWUkdXRpbC5hZGRDbGFzcztcbiAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XG5cbiAgICB2YXIgb25Qcmlvcml0eSA9IFZ1ZS5kaXJlY3RpdmUoJ29uJykucHJpb3JpdHk7XG4gICAgdmFyIExJTktfVVBEQVRFID0gJ19fdnVlLXJvdXRlci1saW5rLXVwZGF0ZV9fJztcblxuICAgIHZhciBhY3RpdmVJZCA9IDA7XG5cbiAgICBWdWUuZGlyZWN0aXZlKCdsaW5rLWFjdGl2ZScsIHtcbiAgICAgIHByaW9yaXR5OiA5OTk5LFxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgaWQgPSBTdHJpbmcoYWN0aXZlSWQrKyk7XG4gICAgICAgIC8vIGNvbGxlY3Qgdi1saW5rcyBjb250YWluZWQgd2l0aGluIHRoaXMgZWxlbWVudC5cbiAgICAgICAgLy8gd2UgbmVlZCBkbyB0aGlzIGhlcmUgYmVmb3JlIHRoZSBwYXJlbnQtY2hpbGQgcmVsYXRpb25zaGlwXG4gICAgICAgIC8vIGdldHMgbWVzc2VkIHVwIGJ5IHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGlmLCBmb3IsIGNvbXBvbmVudHMpXG4gICAgICAgIHZhciBjaGlsZExpbmtzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbdi1saW5rXScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGxpbmsgPSBjaGlsZExpbmtzW2ldO1xuICAgICAgICAgIHZhciBleGlzdGluZ0lkID0gbGluay5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcbiAgICAgICAgICAvLyBsZWF2ZSBhIG1hcmsgb24gdGhlIGxpbmsgZWxlbWVudCB3aGljaCBjYW4gYmUgcGVyc2lzdGVkXG4gICAgICAgICAgLy8gdGhyb3VnaCBmcmFnbWVudCBjbG9uZXMuXG4gICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoTElOS19VUERBVEUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZtLiRvbihMSU5LX1VQREFURSwgdGhpcy5jYiA9IGZ1bmN0aW9uIChsaW5rLCBwYXRoKSB7XG4gICAgICAgICAgaWYgKGxpbmsuYWN0aXZlSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcbiAgICAgICAgICAgIGxpbmsudXBkYXRlQ2xhc3NlcyhwYXRoLCBfdGhpcy5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy52bS4kb2ZmKExJTktfVVBEQVRFLCB0aGlzLmNiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmsnLCB7XG4gICAgICBwcmlvcml0eTogb25Qcmlvcml0eSAtIDIsXG5cbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXMudm07XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoIXZtLiRyb3V0ZSkge1xuICAgICAgICAgIHdhcm4kMSgndi1saW5rIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGEgcm91dGVyLWVuYWJsZWQgYXBwLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdXRlciA9IHZtLiRyb3V0ZS5yb3V0ZXI7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGluZ3Mgd2hlbiB0aGUgcm91dGUgY2hhbmdlc1xuICAgICAgICB0aGlzLnVud2F0Y2ggPSB2bS4kd2F0Y2goJyRyb3V0ZScsIF9iaW5kKHRoaXMub25Sb3V0ZVVwZGF0ZSwgdGhpcykpO1xuICAgICAgICAvLyBjaGVjayB2LWxpbmstYWN0aXZlIGlkc1xuICAgICAgICB2YXIgYWN0aXZlSWRzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICBpZiAoYWN0aXZlSWRzKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlSWRzID0gYWN0aXZlSWRzLnNwbGl0KCcsJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gbmVlZCB0byBoYW5kbGUgY2xpY2sgaWYgbGluayBleHBlY3RzIHRvIGJlIG9wZW5lZFxuICAgICAgICAvLyBpbiBhIG5ldyB3aW5kb3cvdGFiLlxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0EnICYmIHRoaXMuZWwuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIGNsaWNrXG4gICAgICAgIHRoaXMuaGFuZGxlciA9IF9iaW5kKHRoaXMub25DbGljaywgdGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICAgIHRoaXMuYXBwZW5kID0gdGFyZ2V0LmFwcGVuZDtcbiAgICAgICAgICB0aGlzLmV4YWN0ID0gdGFyZ2V0LmV4YWN0O1xuICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcztcbiAgICAgICAgICB0aGlzLmFjdGl2ZUNsYXNzID0gdGFyZ2V0LmFjdGl2ZUNsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Sb3V0ZVVwZGF0ZSh0aGlzLnZtLiRyb3V0ZSk7XG4gICAgICB9LFxuXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybjtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgIC8vIHYtbGluayB3aXRoIGV4cHJlc3Npb24sIGp1c3QgZ29cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5yb3V0ZXIuZ28odGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBubyBleHByZXNzaW9uLCBkZWxlZ2F0ZSBmb3IgYW4gPGE+IGluc2lkZVxuICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgICAgICAgIHdoaWxlIChlbC50YWdOYW1lICE9PSAnQScgJiYgZWwgIT09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdBJyAmJiBzYW1lT3JpZ2luKGVsKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHBhdGggPSBlbC5wYXRobmFtZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3QpIHtcbiAgICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3RSRSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28oe1xuICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgICByZXBsYWNlOiB0YXJnZXQgJiYgdGFyZ2V0LnJlcGxhY2UsXG4gICAgICAgICAgICAgIGFwcGVuZDogdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgb25Sb3V0ZVVwZGF0ZTogZnVuY3Rpb24gb25Sb3V0ZVVwZGF0ZShyb3V0ZSkge1xuICAgICAgICAvLyByb3V0ZXIuc3RyaW5naWZ5UGF0aCBpcyBkZXBlbmRlbnQgb24gY3VycmVudCByb3V0ZVxuICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgY2FsbGVkIGFnYWluIHdoZW52ZXIgcm91dGUgY2hhbmdlcy5cbiAgICAgICAgdmFyIG5ld1BhdGggPSB0aGlzLnJvdXRlci5zdHJpbmdpZnlQYXRoKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgaWYgKHRoaXMucGF0aCAhPT0gbmV3UGF0aCkge1xuICAgICAgICAgIHRoaXMucGF0aCA9IG5ld1BhdGg7XG4gICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVNYXRjaCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlSHJlZigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkcykge1xuICAgICAgICAgIHRoaXMudm0uJGVtaXQoTElOS19VUERBVEUsIHRoaXMsIHJvdXRlLnBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ2xhc3Nlcyhyb3V0ZS5wYXRoLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlQWN0aXZlTWF0Y2g6IGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZU1hdGNoKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVJFID0gdGhpcy5wYXRoICYmICF0aGlzLmV4YWN0ID8gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLnBhdGgucmVwbGFjZSgvXFwvJC8sICcnKS5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKSArICcoXFxcXC98JCknKSA6IG51bGw7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVIcmVmOiBmdW5jdGlvbiB1cGRhdGVIcmVmKCkge1xuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lICE9PSAnQScpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcbiAgICAgICAgdmFyIGlzQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICAgICAgICAvLyBkbyBub3QgZm9ybWF0IG5vbi1oYXNoIHJlbGF0aXZlIHBhdGhzXG4gICAgICAgIHZhciBocmVmID0gcGF0aCAmJiAocm91dGVyLm1vZGUgPT09ICdoYXNoJyB8fCBpc0Fic29sdXRlKSA/IHJvdXRlci5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCwgdGhpcy5hcHBlbmQpIDogcGF0aDtcbiAgICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgICB0aGlzLmVsLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZUNsYXNzZXM6IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocGF0aCwgZWwpIHtcbiAgICAgICAgdmFyIGFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcyB8fCB0aGlzLnJvdXRlci5fbGlua0FjdGl2ZUNsYXNzO1xuICAgICAgICAvLyBjbGVhciBvbGQgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMucHJldkFjdGl2ZUNsYXNzICYmIHRoaXMucHJldkFjdGl2ZUNsYXNzICE9PSBhY3RpdmVDbGFzcykge1xuICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHRoaXMucHJldkFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIHF1ZXJ5IHN0cmluZyBiZWZvcmUgbWF0Y2hpbmdcbiAgICAgICAgdmFyIGRlc3QgPSB0aGlzLnBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuICAgICAgICAvLyBhZGQgbmV3IGNsYXNzXG4gICAgICAgIGlmICh0aGlzLmV4YWN0KSB7XG4gICAgICAgICAgaWYgKGRlc3QgPT09IHBhdGggfHxcbiAgICAgICAgICAvLyBhbHNvIGFsbG93IGFkZGl0aW9uYWwgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgICBkZXN0LmNoYXJBdChkZXN0Lmxlbmd0aCAtIDEpICE9PSAnLycgJiYgZGVzdCA9PT0gcGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpKSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5hY3RpdmVSRSAmJiB0aGlzLmFjdGl2ZVJFLnRlc3QocGF0aCkpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG4gICAgICAgIHRoaXMudW53YXRjaCAmJiB0aGlzLnVud2F0Y2goKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNhbWVPcmlnaW4obGluaykge1xuICAgICAgcmV0dXJuIGxpbmsucHJvdG9jb2wgPT09IGxvY2F0aW9uLnByb3RvY29sICYmIGxpbmsuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmIGxpbmsucG9ydCA9PT0gbG9jYXRpb24ucG9ydDtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNvcGllZCBmcm9tIHYtYmluZDpjbGFzcyBpbXBsZW1lbnRhdGlvbiB1bnRpbFxuICAgIC8vIHdlIHByb3Blcmx5IGV4cG9zZSBpdC4uLlxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoZWwsIGtleSwgZm4pIHtcbiAgICAgIGtleSA9IGtleS50cmltKCk7XG4gICAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICAgICAgZm4oZWwsIGtleSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGZuKGVsLCBrZXlzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgaGlzdG9yeUJhY2tlbmRzID0ge1xuICAgIGFic3RyYWN0OiBBYnN0cmFjdEhpc3RvcnksXG4gICAgaGFzaDogSGFzaEhpc3RvcnksXG4gICAgaHRtbDU6IEhUTUw1SGlzdG9yeVxuICB9O1xuXG4gIC8vIGxhdGUgYmluZCBkdXJpbmcgaW5zdGFsbFxuICB2YXIgVnVlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBSb3V0ZXIgY29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cblxuICB2YXIgUm91dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXG4gICAgICB2YXIgX3JlZiRoYXNoYmFuZyA9IF9yZWYuaGFzaGJhbmc7XG4gICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmJGhhc2hiYW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogX3JlZiRoYXNoYmFuZztcbiAgICAgIHZhciBfcmVmJGFic3RyYWN0ID0gX3JlZi5hYnN0cmFjdDtcbiAgICAgIHZhciBhYnN0cmFjdCA9IF9yZWYkYWJzdHJhY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRhYnN0cmFjdDtcbiAgICAgIHZhciBfcmVmJGhpc3RvcnkgPSBfcmVmLmhpc3Rvcnk7XG4gICAgICB2YXIgaGlzdG9yeSA9IF9yZWYkaGlzdG9yeSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGhpc3Rvcnk7XG4gICAgICB2YXIgX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmLnNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHZhciBzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHZhciBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmLnRyYW5zaXRpb25PbkxvYWQ7XG4gICAgICB2YXIgdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHRyYW5zaXRpb25PbkxvYWQ7XG4gICAgICB2YXIgX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYuc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgICB2YXIgc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgICB2YXIgX3JlZiRyb290ID0gX3JlZi5yb290O1xuICAgICAgdmFyIHJvb3QgPSBfcmVmJHJvb3QgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHJvb3Q7XG4gICAgICB2YXIgX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmLmxpbmtBY3RpdmVDbGFzcztcbiAgICAgIHZhciBsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9PT0gdW5kZWZpbmVkID8gJ3YtbGluay1hY3RpdmUnIDogX3JlZiRsaW5rQWN0aXZlQ2xhc3M7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIVJvdXRlci5pbnN0YWxsZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgaW5zdGFsbCB0aGUgUm91dGVyIHdpdGggVnVlLnVzZSgpIGJlZm9yZSAnICsgJ2NyZWF0aW5nIGFuIGluc3RhbmNlLicpO1xuICAgICAgfVxuXG4gICAgICAvLyBWdWUgaW5zdGFuY2VzXG4gICAgICB0aGlzLmFwcCA9IG51bGw7XG4gICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXG4gICAgICAvLyByb3V0ZSByZWNvZ25pemVyXG4gICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXG4gICAgICAvLyBzdGF0ZVxuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhcnRDYiA9IG51bGw7XG4gICAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB7fTtcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3ByZXZpb3VzVHJhbnNpdGlvbiA9IG51bGw7XG4gICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBudWxsO1xuICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IG51bGw7XG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MgPSBbXTtcbiAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzID0gW107XG5cbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBvbiBpbml0aWFsIHJlbmRlcj9cbiAgICAgIHRoaXMuX3JlbmRlcmVkID0gZmFsc2U7XG4gICAgICB0aGlzLl90cmFuc2l0aW9uT25Mb2FkID0gdHJhbnNpdGlvbk9uTG9hZDtcblxuICAgICAgLy8gaGlzdG9yeSBtb2RlXG4gICAgICB0aGlzLl9yb290ID0gcm9vdDtcbiAgICAgIHRoaXMuX2Fic3RyYWN0ID0gYWJzdHJhY3Q7XG4gICAgICB0aGlzLl9oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXG4gICAgICAvLyBjaGVjayBpZiBIVE1MNSBoaXN0b3J5IGlzIGF2YWlsYWJsZVxuICAgICAgdmFyIGhhc1B1c2hTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hpc3RvcnkgPSBoaXN0b3J5ICYmIGhhc1B1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hpc3RvcnlGYWxsYmFjayA9IGhpc3RvcnkgJiYgIWhhc1B1c2hTdGF0ZTtcblxuICAgICAgLy8gY3JlYXRlIGhpc3Rvcnkgb2JqZWN0XG4gICAgICB2YXIgaW5Ccm93c2VyID0gVnVlLnV0aWwuaW5Ccm93c2VyO1xuICAgICAgdGhpcy5tb2RlID0gIWluQnJvd3NlciB8fCB0aGlzLl9hYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiB0aGlzLl9oaXN0b3J5ID8gJ2h0bWw1JyA6ICdoYXNoJztcblxuICAgICAgdmFyIEhpc3RvcnkgPSBoaXN0b3J5QmFja2VuZHNbdGhpcy5tb2RlXTtcbiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHtcbiAgICAgICAgcm9vdDogcm9vdCxcbiAgICAgICAgaGFzaGJhbmc6IHRoaXMuX2hhc2hiYW5nLFxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuICAgICAgICAgIF90aGlzLl9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIG90aGVyIG9wdGlvbnNcbiAgICAgIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbiA9IHNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHRoaXMuX2xpbmtBY3RpdmVDbGFzcyA9IGxpbmtBY3RpdmVDbGFzcztcbiAgICAgIHRoaXMuX3N1cHByZXNzID0gc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxsb3cgZGlyZWN0bHkgcGFzc2luZyBjb21wb25lbnRzIHRvIGEgcm91dGVcbiAgICAgKiBkZWZpbml0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgICAqL1xuXG4gICAgLy8gQVBJID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLyoqXG4gICAgKiBSZWdpc3RlciBhIG1hcCBvZiB0b3AtbGV2ZWwgcGF0aHMuXG4gICAgKlxuICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChfbWFwKSB7XG4gICAgICBmb3IgKHZhciByb3V0ZSBpbiBfbWFwKSB7XG4gICAgICAgIHRoaXMub24ocm91dGUsIF9tYXBbcm91dGVdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNpbmdsZSByb290LWxldmVsIHBhdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByb290UGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gY29tcG9uZW50XG4gICAgICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW3N1YlJvdXRlc11cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2ZvcmNlUmVmcmVzaF1cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtiZWZvcmVdXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYWZ0ZXJdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24ocm9vdFBhdGgsIGhhbmRsZXIpIHtcbiAgICAgIGlmIChyb290UGF0aCA9PT0gJyonKSB7XG4gICAgICAgIHRoaXMuX25vdEZvdW5kKGhhbmRsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkUm91dGUocm9vdFBhdGgsIGhhbmRsZXIsIFtdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgcmVkaXJlY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KG1hcCkge1xuICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcbiAgICAgICAgdGhpcy5fYWRkUmVkaXJlY3QocGF0aCwgbWFwW3BhdGhdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYWxpYXNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbiBhbGlhcyhtYXApIHtcbiAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG4gICAgICAgIHRoaXMuX2FkZEFsaWFzKHBhdGgsIG1hcFtwYXRoXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBiZWZvcmUgaG9vay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuKSB7XG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MucHVzaChmbik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBhZnRlciBob29rLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYWZ0ZXJFYWNoID0gZnVuY3Rpb24gYWZ0ZXJFYWNoKGZuKSB7XG4gICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5wdXNoKGZuKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOYXZpZ2F0ZSB0byBhIGdpdmVuIHBhdGguXG4gICAgICogVGhlIHBhdGggY2FuIGJlIGFuIG9iamVjdCBkZXNjcmliaW5nIGEgbmFtZWQgcGF0aCBpblxuICAgICAqIHRoZSBmb3JtYXQgb2YgeyBuYW1lOiAnLi4uJywgcGFyYW1zOiB7fSwgcXVlcnk6IHt9fVxuICAgICAqIFRoZSBwYXRoIGlzIGFzc3VtZWQgdG8gYmUgYWxyZWFkeSBkZWNvZGVkLCBhbmQgd2lsbFxuICAgICAqIGJlIHJlc29sdmVkIGFnYWluc3Qgcm9vdCAoaWYgcHJvdmlkZWQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHBhdGhcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXBsYWNlXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgpIHtcbiAgICAgIHZhciByZXBsYWNlID0gZmFsc2U7XG4gICAgICB2YXIgYXBwZW5kID0gZmFsc2U7XG4gICAgICBpZiAoVnVlLnV0aWwuaXNPYmplY3QocGF0aCkpIHtcbiAgICAgICAgcmVwbGFjZSA9IHBhdGgucmVwbGFjZTtcbiAgICAgICAgYXBwZW5kID0gcGF0aC5hcHBlbmQ7XG4gICAgICB9XG4gICAgICBwYXRoID0gdGhpcy5zdHJpbmdpZnlQYXRoKHBhdGgpO1xuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LmdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNob3J0IGhhbmQgZm9yIHJlcGxhY2luZyBjdXJyZW50IHBhdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgpIHtcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGF0aCA9IHsgcGF0aDogcGF0aCB9O1xuICAgICAgfVxuICAgICAgcGF0aC5yZXBsYWNlID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ28ocGF0aCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRoZSByb3V0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZUNvbnN0cnVjdG9yfSBBcHBcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoQXBwLCBjb250YWluZXIsIGNiKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICh0aGlzLl9zdGFydGVkKSB7XG4gICAgICAgIHdhcm4kMSgnYWxyZWFkeSBzdGFydGVkLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBjYjtcbiAgICAgIGlmICghdGhpcy5hcHApIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghQXBwIHx8ICFjb250YWluZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50IGFuZCBhICcgKyAncm9vdCBjb250YWluZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChBcHAgaW5zdGFuY2VvZiBWdWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50LCBub3QgYSAnICsgJ1Z1ZSBpbnN0YW5jZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHBDb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHZhciBDdG9yID0gdGhpcy5fYXBwQ29uc3RydWN0b3IgPSB0eXBlb2YgQXBwID09PSAnZnVuY3Rpb24nID8gQXBwIDogVnVlLmV4dGVuZChBcHApO1xuICAgICAgICAvLyBnaXZlIGl0IGEgbmFtZSBmb3IgYmV0dGVyIGRlYnVnZ2luZ1xuICAgICAgICBDdG9yLm9wdGlvbnMubmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8ICdSb3V0ZXJBcHAnO1xuICAgICAgfVxuXG4gICAgICAvLyBoYW5kbGUgaGlzdG9yeSBmYWxsYmFjayBpbiBicm93c2VycyB0aGF0IGRvIG5vdFxuICAgICAgLy8gc3VwcG9ydCBIVE1MNSBoaXN0b3J5IEFQSVxuICAgICAgaWYgKHRoaXMuX2hpc3RvcnlGYWxsYmFjaykge1xuICAgICAgICB2YXIgX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgICB2YXIgX2hpc3RvcnkgPSBuZXcgSFRNTDVIaXN0b3J5KHsgcm9vdDogdGhpcy5fcm9vdCB9KTtcbiAgICAgICAgdmFyIHBhdGggPSBfaGlzdG9yeS5yb290ID8gX2xvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoX2hpc3Rvcnkucm9vdFJFLCAnJykgOiBfbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgIGlmIChwYXRoICYmIHBhdGggIT09ICcvJykge1xuICAgICAgICAgIF9sb2NhdGlvbi5hc3NpZ24oKF9oaXN0b3J5LnJvb3QgfHwgJycpICsgJy8nICsgdGhpcy5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCkgKyBfbG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0b3AgbGlzdGVuaW5nIHRvIHJvdXRlIGNoYW5nZXMuXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIG5hbWVkIHJvdXRlIG9iamVjdCAvIHN0cmluZyBwYXRocyBpbnRvXG4gICAgICogYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd8TnVtYmVyfSBwYXRoXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5zdHJpbmdpZnlQYXRoID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0aChwYXRoKSB7XG4gICAgICB2YXIgZ2VuZXJhdGVkUGF0aCA9ICcnO1xuICAgICAgaWYgKHBhdGggJiYgdHlwZW9mIHBhdGggPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChwYXRoLm5hbWUpIHtcbiAgICAgICAgICB2YXIgZXh0ZW5kID0gVnVlLnV0aWwuZXh0ZW5kO1xuICAgICAgICAgIHZhciBjdXJyZW50UGFyYW1zID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb24gJiYgdGhpcy5fY3VycmVudFRyYW5zaXRpb24udG8ucGFyYW1zO1xuICAgICAgICAgIHZhciB0YXJnZXRQYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB7fTtcbiAgICAgICAgICB2YXIgcGFyYW1zID0gY3VycmVudFBhcmFtcyA/IGV4dGVuZChleHRlbmQoe30sIGN1cnJlbnRQYXJhbXMpLCB0YXJnZXRQYXJhbXMpIDogdGFyZ2V0UGFyYW1zO1xuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkodGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZShwYXRoLm5hbWUsIHBhcmFtcykpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhdGgucGF0aCkge1xuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aC5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0aC5xdWVyeSkge1xuICAgICAgICAgIC8vIG5vdGU6IHRoZSBnZW5lcmF0ZWQgcXVlcnkgc3RyaW5nIGlzIHByZS1VUkwtZW5jb2RlZCBieSB0aGUgcmVjb2duaXplclxuICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXRoLnF1ZXJ5KTtcbiAgICAgICAgICBpZiAoZ2VuZXJhdGVkUGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSAnJicgKyBxdWVyeS5zbGljZSgxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSBxdWVyeTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aCA/IHBhdGggKyAnJyA6ICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZW5lcmF0ZWRQYXRoO1xuICAgIH07XG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2RzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAqIEFkZCBhIHJvdXRlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHNlZ21lbnRzIHRvIHRoZSBpbnRlcm5hbFxuICAgICogcm91dGUgcmVjb2duaXplci4gV2lsbCBiZSBjYWxsZWQgcmVjdXJzaXZlbHkgdG8gYWRkIGFsbFxuICAgICogcG9zc2libGUgc3ViLXJvdXRlcy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAqIEBwYXJhbSB7QXJyYXl9IHNlZ21lbnRzXG4gICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJvdXRlID0gZnVuY3Rpb24gX2FkZFJvdXRlKHBhdGgsIGhhbmRsZXIsIHNlZ21lbnRzKSB7XG4gICAgICBndWFyZENvbXBvbmVudChwYXRoLCBoYW5kbGVyKTtcbiAgICAgIGhhbmRsZXIucGF0aCA9IHBhdGg7XG4gICAgICBoYW5kbGVyLmZ1bGxQYXRoID0gKHNlZ21lbnRzLnJlZHVjZShmdW5jdGlvbiAocGF0aCwgc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gcGF0aCArIHNlZ21lbnQucGF0aDtcbiAgICAgIH0sICcnKSArIHBhdGgpLnJlcGxhY2UoJy8vJywgJy8nKTtcbiAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIuYWRkKHNlZ21lbnRzLCB7XG4gICAgICAgIGFzOiBoYW5kbGVyLm5hbWVcbiAgICAgIH0pO1xuICAgICAgLy8gYWRkIHN1YiByb3V0ZXNcbiAgICAgIGlmIChoYW5kbGVyLnN1YlJvdXRlcykge1xuICAgICAgICBmb3IgKHZhciBzdWJQYXRoIGluIGhhbmRsZXIuc3ViUm91dGVzKSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgd2FsayBhbGwgc3ViIHJvdXRlc1xuICAgICAgICAgIHRoaXMuX2FkZFJvdXRlKHN1YlBhdGgsIGhhbmRsZXIuc3ViUm91dGVzW3N1YlBhdGhdLFxuICAgICAgICAgIC8vIHBhc3MgYSBjb3B5IGluIHJlY3Vyc2lvbiB0byBhdm9pZCBtdXRhdGluZ1xuICAgICAgICAgIC8vIGFjcm9zcyBicmFuY2hlc1xuICAgICAgICAgIHNlZ21lbnRzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbm90Rm91bmQgcm91dGUgaGFuZGxlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9ub3RGb3VuZCA9IGZ1bmN0aW9uIF9ub3RGb3VuZChoYW5kbGVyKSB7XG4gICAgICBndWFyZENvbXBvbmVudCgnKicsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gW3sgaGFuZGxlcjogaGFuZGxlciB9XTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcmVkaXJlY3QgcmVjb3JkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVkaXJlY3RQYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSZWRpcmVjdCA9IGZ1bmN0aW9uIF9hZGRSZWRpcmVjdChwYXRoLCByZWRpcmVjdFBhdGgpIHtcbiAgICAgIGlmIChwYXRoID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IHJlZGlyZWN0UGF0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIHJlZGlyZWN0UGF0aCwgdGhpcy5yZXBsYWNlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFsaWFzIHJlY29yZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzUGF0aFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkQWxpYXMgPSBmdW5jdGlvbiBfYWRkQWxpYXMocGF0aCwgYWxpYXNQYXRoKSB7XG4gICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCBhbGlhc1BhdGgsIHRoaXMuX21hdGNoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcGF0aCBndWFyZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcHBlZFBhdGhcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRHdWFyZCA9IGZ1bmN0aW9uIF9hZGRHdWFyZChwYXRoLCBtYXBwZWRQYXRoLCBfaGFuZGxlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2d1YXJkUmVjb2duaXplci5hZGQoW3tcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihtYXRjaCwgcXVlcnkpIHtcbiAgICAgICAgICB2YXIgcmVhbFBhdGggPSBtYXBQYXJhbXMobWFwcGVkUGF0aCwgbWF0Y2gucGFyYW1zLCBxdWVyeSk7XG4gICAgICAgICAgX2hhbmRsZXIuY2FsbChfdGhpczIsIHJlYWxQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfV0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHBhdGggbWF0Y2hlcyBhbnkgcmVkaXJlY3QgcmVjb3Jkcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gLSBpZiB0cnVlLCB3aWxsIHNraXAgbm9ybWFsIG1hdGNoLlxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fY2hlY2tHdWFyZCA9IGZ1bmN0aW9uIF9jaGVja0d1YXJkKHBhdGgpIHtcbiAgICAgIHZhciBtYXRjaGVkID0gdGhpcy5fZ3VhcmRSZWNvZ25pemVyLnJlY29nbml6ZShwYXRoLCB0cnVlKTtcbiAgICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAgIG1hdGNoZWRbMF0uaGFuZGxlcihtYXRjaGVkWzBdLCBtYXRjaGVkLnF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX25vdEZvdW5kUmVkaXJlY3QpIHtcbiAgICAgICAgbWF0Y2hlZCA9IHRoaXMuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuICAgICAgICBpZiAoIW1hdGNoZWQpIHtcbiAgICAgICAgICB0aGlzLnJlcGxhY2UodGhpcy5fbm90Rm91bmRSZWRpcmVjdCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWF0Y2ggYSBVUkwgcGF0aCBhbmQgc2V0IHRoZSByb3V0ZSBjb250ZXh0IG9uIHZtLFxuICAgICAqIHRyaWdnZXJpbmcgdmlldyB1cGRhdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fbWF0Y2ggPSBmdW5jdGlvbiBfbWF0Y2gocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9jaGVja0d1YXJkKHBhdGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1cnJlbnRSb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZTtcbiAgICAgIHZhciBjdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXG4gICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uLnRvLnBhdGggPT09IHBhdGgpIHtcbiAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHdlIGhhdmUgYW4gYWN0aXZlIHRyYW5zaXRpb24gZ29pbmcgdG8gdGhlIHNhbWUgcGF0aFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGUucGF0aCA9PT0gcGF0aCkge1xuICAgICAgICAgIC8vIFdlIGFyZSBnb2luZyB0byB0aGUgc2FtZSBwYXRoLCBidXQgd2UgYWxzbyBoYXZlIGFuIG9uZ29pbmcgYnV0XG4gICAgICAgICAgLy8gbm90LXlldC12YWxpZGF0ZWQgdHJhbnNpdGlvbi4gQWJvcnQgdGhhdCB0cmFuc2l0aW9uIGFuZCByZXNldCB0b1xuICAgICAgICAgIC8vIHByZXYgdHJhbnNpdGlvbi5cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX3ByZXZUcmFuc2l0aW9uO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBnb2luZyB0byBhIHRvdGFsbHkgZGlmZmVyZW50IHBhdGguIGFib3J0IG9uZ29pbmcgdHJhbnNpdGlvbi5cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdHJ1Y3QgbmV3IHJvdXRlIGFuZCB0cmFuc2l0aW9uIGNvbnRleHRcbiAgICAgIHZhciByb3V0ZSA9IG5ldyBSb3V0ZShwYXRoLCB0aGlzKTtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gbmV3IFJvdXRlVHJhbnNpdGlvbih0aGlzLCByb3V0ZSwgY3VycmVudFJvdXRlKTtcblxuICAgICAgLy8gY3VycmVudCB0cmFuc2l0aW9uIGlzIHVwZGF0ZWQgcmlnaHQgbm93LlxuICAgICAgLy8gaG93ZXZlciwgY3VycmVudCByb3V0ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBoYXNcbiAgICAgIC8vIGJlZW4gdmFsaWRhdGVkLlxuICAgICAgdGhpcy5fcHJldlRyYW5zaXRpb24gPSBjdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblxuICAgICAgaWYgKCF0aGlzLmFwcCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgdmFyIHJvdXRlciA9IF90aGlzMztcbiAgICAgICAgICBfdGhpczMuYXBwID0gbmV3IF90aGlzMy5fYXBwQ29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgZWw6IF90aGlzMy5fYXBwQ29udGFpbmVyLFxuICAgICAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgICAgICRyb3V0ZTogcm91dGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgZ2xvYmFsIGJlZm9yZSBob29rXG4gICAgICB2YXIgYmVmb3JlSG9va3MgPSB0aGlzLl9iZWZvcmVFYWNoSG9va3M7XG4gICAgICB2YXIgc3RhcnRUcmFuc2l0aW9uID0gZnVuY3Rpb24gc3RhcnRUcmFuc2l0aW9uKCkge1xuICAgICAgICB0cmFuc2l0aW9uLnN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoYmVmb3JlSG9va3MubGVuZ3RoKSB7XG4gICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYmVmb3JlSG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG4gICAgICAgICAgaWYgKHRyYW5zaXRpb24gPT09IF90aGlzMy5fY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgbnVsbCwgbmV4dCwge1xuICAgICAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHN0YXJ0VHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydFRyYW5zaXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZCAmJiB0aGlzLl9zdGFydENiKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0Q2IuY2FsbChudWxsKTtcbiAgICAgIH1cblxuICAgICAgLy8gSEFDSzpcbiAgICAgIC8vIHNldCByZW5kZXJlZCB0byB0cnVlIGFmdGVyIHRoZSB0cmFuc2l0aW9uIHN0YXJ0LCBzb1xuICAgICAgLy8gdGhhdCBjb21wb25lbnRzIHRoYXQgYXJlIGFjaXR2YXRlZCBzeW5jaHJvbm91c2x5IGtub3dcbiAgICAgIC8vIHdoZXRoZXIgaXQgaXMgdGhlIGluaXRpYWwgcmVuZGVyLlxuICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY3VycmVudCB0byB0aGUgbmV3IHRyYW5zaXRpb24uXG4gICAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHRyYW5zaXRpb24gb2JqZWN0IHdoZW4gdGhlXG4gICAgICogdmFsaWRhdGlvbiBvZiBhIHJvdXRlIGhhcyBzdWNjZWVkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX29uVHJhbnNpdGlvblZhbGlkYXRlZCA9IGZ1bmN0aW9uIF9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbikge1xuICAgICAgLy8gc2V0IGN1cnJlbnQgcm91dGVcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHRyYW5zaXRpb24udG87XG4gICAgICAvLyB1cGRhdGUgcm91dGUgY29udGV4dCBmb3IgYWxsIGNoaWxkcmVuXG4gICAgICBpZiAodGhpcy5hcHAuJHJvdXRlICE9PSByb3V0ZSkge1xuICAgICAgICB0aGlzLmFwcC4kcm91dGUgPSByb3V0ZTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICBjaGlsZC4kcm91dGUgPSByb3V0ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBjYWxsIGdsb2JhbCBhZnRlciBob29rXG4gICAgICBpZiAodGhpcy5fYWZ0ZXJFYWNoSG9va3MubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICByZXR1cm4gaG9vay5jYWxsKG51bGwsIHtcbiAgICAgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuICAgICAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24uZG9uZSA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBzdHVmZiBhZnRlciB0aGUgdHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Um91dGV9IHJvdXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGF0ZV1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX3Bvc3RUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAvLyBoYW5kbGUgc2Nyb2xsIHBvc2l0aW9uc1xuICAgICAgLy8gc2F2ZWQgc2Nyb2xsIHBvc2l0aW9ucyB0YWtlIHByaW9yaXR5XG4gICAgICAvLyB0aGVuIHdlIGNoZWNrIGlmIHRoZSBwYXRoIGhhcyBhbiBhbmNob3JcbiAgICAgIHZhciBwb3MgPSBzdGF0ZSAmJiBzdGF0ZS5wb3M7XG4gICAgICBpZiAocG9zICYmIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbikge1xuICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhwb3MueCwgcG9zLnkpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoYW5jaG9yKSB7XG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5jaG9yLnNsaWNlKDEpKTtcbiAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh3aW5kb3cuc2Nyb2xsWCwgZWwub2Zmc2V0VG9wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGVyO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpIHtcbiAgICB2YXIgY29tcCA9IGhhbmRsZXIuY29tcG9uZW50O1xuICAgIGlmIChWdWUudXRpbC5pc1BsYWluT2JqZWN0KGNvbXApKSB7XG4gICAgICBjb21wID0gaGFuZGxlci5jb21wb25lbnQgPSBWdWUuZXh0ZW5kKGNvbXApO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodHlwZW9mIGNvbXAgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gbnVsbDtcbiAgICAgIHdhcm4kMSgnaW52YWxpZCBjb21wb25lbnQgZm9yIHJvdXRlIFwiJyArIHBhdGggKyAnXCIuJyk7XG4gICAgfVxuICB9XG5cbiAgLyogSW5zdGFsbGF0aW9uICovXG5cbiAgUm91dGVyLmluc3RhbGxlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJbnN0YWxsYXRpb24gaW50ZXJmYWNlLlxuICAgKiBJbnN0YWxsIHRoZSBuZWNlc3NhcnkgZGlyZWN0aXZlcy5cbiAgICovXG5cbiAgUm91dGVyLmluc3RhbGwgPSBmdW5jdGlvbiAoZXh0ZXJuYWxWdWUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoUm91dGVyLmluc3RhbGxlZCkge1xuICAgICAgd2FybiQxKCdhbHJlYWR5IGluc3RhbGxlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgVnVlID0gZXh0ZXJuYWxWdWU7XG4gICAgYXBwbHlPdmVycmlkZShWdWUpO1xuICAgIFZpZXcoVnVlKTtcbiAgICBMaW5rKFZ1ZSk7XG4gICAgZXhwb3J0cyQxLlZ1ZSA9IFZ1ZTtcbiAgICBSb3V0ZXIuaW5zdGFsbGVkID0gdHJ1ZTtcbiAgfTtcblxuICAvLyBhdXRvIGluc3RhbGxcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG4gICAgd2luZG93LlZ1ZS51c2UoUm91dGVyKTtcbiAgfVxuXG4gIHJldHVybiBSb3V0ZXI7XG5cbn0pKTsiLCIvKiFcbiAqIHZ1ZS1yZXNvdXJjZSB2MC43LjRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtcmVzb3VyY2VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gIChnbG9iYWwuVnVlUmVzb3VyY2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH07XG5cbiAgLyoqXG4gICAqIFV0aWxpdHkgZnVuY3Rpb25zLlxuICAgKi9cblxuICB2YXIgdXRpbCA9IHt9O1xuICB2YXIgY29uZmlnID0ge307XG4gIHZhciBhcnJheSA9IFtdO1xuICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuICBmdW5jdGlvbiBVdGlsIChWdWUpIHtcbiAgICAgIHV0aWwgPSBWdWUudXRpbDtcbiAgICAgIGNvbmZpZyA9IFZ1ZS5jb25maWc7XG4gIH1cblxuICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbiAgZnVuY3Rpb24gd2Fybihtc2cpIHtcbiAgICAgIGlmIChjb25zb2xlICYmIHV0aWwud2FybiAmJiAoIWNvbmZpZy5zaWxlbnQgfHwgY29uZmlnLmRlYnVnKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignW1Z1ZVJlc291cmNlIHdhcm5dOiAnICsgbXNnKTtcbiAgICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yKG1zZykge1xuICAgICAgaWYgKGNvbnNvbGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBuZXh0VGljayhjYiwgY3R4KSB7XG4gICAgICByZXR1cm4gdXRpbC5uZXh0VGljayhjYiwgY3R4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqfFxccyokL2csICcnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvTG93ZXIoc3RyKSB7XG4gICAgICByZXR1cm4gc3RyID8gc3RyLnRvTG93ZXJDYXNlKCkgOiAnJztcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICE9PSBudWxsICYmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmopKSA9PT0gJ29iamVjdCc7XG4gIH1cblxuICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT0gT2JqZWN0LnByb3RvdHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wdGlvbnMoZm4sIG9iaiwgb3B0cykge1xuXG4gICAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0cykpIHtcbiAgICAgICAgICBvcHRzID0gb3B0cy5jYWxsKG9iaik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtZXJnZShmbi5iaW5kKHsgJHZtOiBvYmosICRvcHRpb25zOiBvcHRzIH0pLCBmbiwgeyAkb3B0aW9uczogb3B0cyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyYXRvcikge1xuXG4gICAgICB2YXIgaSwga2V5O1xuXG4gICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwob2JqW2ldLCBvYmpbaV0sIGkpO1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwob2JqW2tleV0sIG9ialtrZXldLCBrZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCkge1xuXG4gICAgICB2YXIgYXJncyA9IGFycmF5LnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICBfbWVyZ2UodGFyZ2V0LCBhcmcpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICBmdW5jdGlvbiBtZXJnZSh0YXJnZXQpIHtcblxuICAgICAgdmFyIGFyZ3MgPSBhcnJheS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgX21lcmdlKHRhcmdldCwgYXJnLCB0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgZnVuY3Rpb24gX21lcmdlKHRhcmdldCwgc291cmNlLCBkZWVwKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgaWYgKGRlZXAgJiYgKGlzUGxhaW5PYmplY3Qoc291cmNlW2tleV0pIHx8IGlzQXJyYXkoc291cmNlW2tleV0pKSkge1xuICAgICAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChzb3VyY2Vba2V5XSkgJiYgIWlzUGxhaW5PYmplY3QodGFyZ2V0W2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHt9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChpc0FycmF5KHNvdXJjZVtrZXldKSAmJiAhaXNBcnJheSh0YXJnZXRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gW107XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgX21lcmdlKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgZGVlcCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Vba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgfVxuICAgICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcm9vdCAob3B0aW9ucywgbmV4dCkge1xuXG4gICAgICB2YXIgdXJsID0gbmV4dChvcHRpb25zKTtcblxuICAgICAgaWYgKGlzU3RyaW5nKG9wdGlvbnMucm9vdCkgJiYgIXVybC5tYXRjaCgvXihodHRwcz86KT9cXC8vKSkge1xuICAgICAgICAgIHVybCA9IG9wdGlvbnMucm9vdCArICcvJyArIHVybDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHF1ZXJ5IChvcHRpb25zLCBuZXh0KSB7XG5cbiAgICAgIHZhciB1cmxQYXJhbXMgPSBPYmplY3Qua2V5cyhVcmwub3B0aW9ucy5wYXJhbXMpLFxuICAgICAgICAgIHF1ZXJ5ID0ge30sXG4gICAgICAgICAgdXJsID0gbmV4dChvcHRpb25zKTtcblxuICAgICAgZWFjaChvcHRpb25zLnBhcmFtcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICBpZiAodXJsUGFyYW1zLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgcXVlcnlba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBxdWVyeSA9IFVybC5wYXJhbXMocXVlcnkpO1xuXG4gICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT0gLTEgPyAnPycgOiAnJicpICsgcXVlcnk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1cmw7XG4gIH1cblxuICBmdW5jdGlvbiBsZWdhY3kgKG9wdGlvbnMsIG5leHQpIHtcblxuICAgICAgdmFyIHZhcmlhYmxlcyA9IFtdLFxuICAgICAgICAgIHVybCA9IG5leHQob3B0aW9ucyk7XG5cbiAgICAgIHVybCA9IHVybC5yZXBsYWNlKC8oXFwvPyk6KFthLXpdXFx3KikvZ2ksIGZ1bmN0aW9uIChtYXRjaCwgc2xhc2gsIG5hbWUpIHtcblxuICAgICAgICAgIHdhcm4oJ1RoZSBgOicgKyBuYW1lICsgJ2AgcGFyYW1ldGVyIHN5bnRheCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgdGhlIGB7JyArIG5hbWUgKyAnfWAgc3ludGF4IGluc3RlYWQuJyk7XG5cbiAgICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgdmFyaWFibGVzLnB1c2gobmFtZSk7XG4gICAgICAgICAgICAgIHJldHVybiBzbGFzaCArIGVuY29kZVVyaVNlZ21lbnQob3B0aW9ucy5wYXJhbXNbbmFtZV0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuXG4gICAgICB2YXJpYWJsZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgZGVsZXRlIG9wdGlvbnMucGFyYW1zW2tleV07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsdWUpIHtcblxuICAgICAgcmV0dXJuIGVuY29kZVVyaVF1ZXJ5KHZhbHVlLCB0cnVlKS5yZXBsYWNlKC8lMjYvZ2ksICcmJykucmVwbGFjZSgvJTNEL2dpLCAnPScpLnJlcGxhY2UoLyUyQi9naSwgJysnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbHVlLCBzcGFjZXMpIHtcblxuICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkucmVwbGFjZSgvJTQwL2dpLCAnQCcpLnJlcGxhY2UoLyUzQS9naSwgJzonKS5yZXBsYWNlKC8lMjQvZywgJyQnKS5yZXBsYWNlKC8lMkMvZ2ksICcsJykucmVwbGFjZSgvJTIwL2csIHNwYWNlcyA/ICclMjAnIDogJysnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVUkwgVGVtcGxhdGUgdjIuMC42IChodHRwczovL2dpdGh1Yi5jb20vYnJhbXN0ZWluL3VybC10ZW1wbGF0ZSlcbiAgICovXG5cbiAgZnVuY3Rpb24gZXhwYW5kKHVybCwgcGFyYW1zLCB2YXJpYWJsZXMpIHtcblxuICAgICAgdmFyIHRtcGwgPSBwYXJzZSh1cmwpLFxuICAgICAgICAgIGV4cGFuZGVkID0gdG1wbC5leHBhbmQocGFyYW1zKTtcblxuICAgICAgaWYgKHZhcmlhYmxlcykge1xuICAgICAgICAgIHZhcmlhYmxlcy5wdXNoLmFwcGx5KHZhcmlhYmxlcywgdG1wbC52YXJzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGV4cGFuZGVkO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2UodGVtcGxhdGUpIHtcblxuICAgICAgdmFyIG9wZXJhdG9ycyA9IFsnKycsICcjJywgJy4nLCAnLycsICc7JywgJz8nLCAnJiddLFxuICAgICAgICAgIHZhcmlhYmxlcyA9IFtdO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhcnM6IHZhcmlhYmxlcyxcbiAgICAgICAgICBleHBhbmQ6IGZ1bmN0aW9uIGV4cGFuZChjb250ZXh0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHsoW15cXHtcXH1dKylcXH18KFteXFx7XFx9XSspL2csIGZ1bmN0aW9uIChfLCBleHByZXNzaW9uLCBsaXRlcmFsKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZXhwcmVzc2lvbikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdG9yID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3JzLmluZGV4T2YoZXhwcmVzc2lvbi5jaGFyQXQoMCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9IGV4cHJlc3Npb24uY2hhckF0KDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5zdWJzdHIoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbi5zcGxpdCgvLC9nKS5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gLyhbXjpcXCpdKikoPzo6KFxcZCspfChcXCopKT8vLmV4ZWModmFyaWFibGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaC5hcHBseSh2YWx1ZXMsIGdldFZhbHVlcyhjb250ZXh0LCBvcGVyYXRvciwgdG1wWzFdLCB0bXBbMl0gfHwgdG1wWzNdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5wdXNoKHRtcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgJiYgb3BlcmF0b3IgIT09ICcrJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSAnLCc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnPycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvciA9ICcmJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciAhPT0gJyMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodmFsdWVzLmxlbmd0aCAhPT0gMCA/IG9wZXJhdG9yIDogJycpICsgdmFsdWVzLmpvaW4oc2VwYXJhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLmpvaW4oJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVSZXNlcnZlZChsaXRlcmFsKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFZhbHVlcyhjb250ZXh0LCBvcGVyYXRvciwga2V5LCBtb2RpZmllcikge1xuXG4gICAgICB2YXIgdmFsdWUgPSBjb250ZXh0W2tleV0sXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXG4gICAgICAgICAgICAgIGlmIChtb2RpZmllciAmJiBtb2RpZmllciAhPT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCBwYXJzZUludChtb2RpZmllciwgMTApKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVZhbHVlKG9wZXJhdG9yLCB2YWx1ZSwgaXNLZXlPcGVyYXRvcihvcGVyYXRvcikgPyBrZXkgOiBudWxsKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKG1vZGlmaWVyID09PSAnKicpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmZpbHRlcihpc0RlZmluZWQpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVZhbHVlKG9wZXJhdG9yLCB2YWx1ZSwgaXNLZXlPcGVyYXRvcihvcGVyYXRvcikgPyBrZXkgOiBudWxsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWVba10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWVba10sIGspKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5maWx0ZXIoaXNEZWZpbmVkKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZVtrXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChlbmNvZGVWYWx1ZShvcGVyYXRvciwgdmFsdWVba10udG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChpc0tleU9wZXJhdG9yKG9wZXJhdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgdG1wLmpvaW4oJywnKSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRtcC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0bXAuam9pbignLCcpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnOycpIHtcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICcnICYmIChvcGVyYXRvciA9PT0gJyYnIHx8IG9wZXJhdG9yID09PSAnPycpKSB7XG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzS2V5T3BlcmF0b3Iob3BlcmF0b3IpIHtcbiAgICAgIHJldHVybiBvcGVyYXRvciA9PT0gJzsnIHx8IG9wZXJhdG9yID09PSAnJicgfHwgb3BlcmF0b3IgPT09ICc/JztcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuY29kZVZhbHVlKG9wZXJhdG9yLCB2YWx1ZSwga2V5KSB7XG5cbiAgICAgIHZhbHVlID0gb3BlcmF0b3IgPT09ICcrJyB8fCBvcGVyYXRvciA9PT0gJyMnID8gZW5jb2RlUmVzZXJ2ZWQodmFsdWUpIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblxuICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlbmNvZGVSZXNlcnZlZChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIuc3BsaXQoLyglWzAtOUEtRmEtZl17Mn0pL2cpLm1hcChmdW5jdGlvbiAocGFydCkge1xuICAgICAgICAgIGlmICghLyVbMC05QS1GYS1mXS8udGVzdChwYXJ0KSkge1xuICAgICAgICAgICAgICBwYXJ0ID0gZW5jb2RlVVJJKHBhcnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcGFydDtcbiAgICAgIH0pLmpvaW4oJycpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGVtcGxhdGUgKG9wdGlvbnMpIHtcblxuICAgICAgdmFyIHZhcmlhYmxlcyA9IFtdLFxuICAgICAgICAgIHVybCA9IGV4cGFuZChvcHRpb25zLnVybCwgb3B0aW9ucy5wYXJhbXMsIHZhcmlhYmxlcyk7XG5cbiAgICAgIHZhcmlhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBkZWxldGUgb3B0aW9ucy5wYXJhbXNba2V5XTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlcnZpY2UgZm9yIFVSTCB0ZW1wbGF0aW5nLlxuICAgKi9cblxuICB2YXIgaWUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuICBmdW5jdGlvbiBVcmwodXJsLCBwYXJhbXMpIHtcblxuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IHt9LFxuICAgICAgICAgIG9wdGlvbnMgPSB1cmwsXG4gICAgICAgICAgdHJhbnNmb3JtO1xuXG4gICAgICBpZiAoaXNTdHJpbmcodXJsKSkge1xuICAgICAgICAgIG9wdGlvbnMgPSB7IHVybDogdXJsLCBwYXJhbXM6IHBhcmFtcyB9O1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gbWVyZ2Uoe30sIFVybC5vcHRpb25zLCBzZWxmLiRvcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgVXJsLnRyYW5zZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICAgIHRyYW5zZm9ybSA9IGZhY3RvcnkoaGFuZGxlciwgdHJhbnNmb3JtLCBzZWxmLiR2bSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRyYW5zZm9ybShvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcmwgb3B0aW9ucy5cbiAgICovXG5cbiAgVXJsLm9wdGlvbnMgPSB7XG4gICAgICB1cmw6ICcnLFxuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIHBhcmFtczoge31cbiAgfTtcblxuICAvKipcbiAgICogVXJsIHRyYW5zZm9ybXMuXG4gICAqL1xuXG4gIFVybC50cmFuc2Zvcm1zID0gW3RlbXBsYXRlLCBsZWdhY3ksIHF1ZXJ5LCByb290XTtcblxuICAvKipcbiAgICogRW5jb2RlcyBhIFVybCBwYXJhbWV0ZXIgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAqL1xuXG4gIFVybC5wYXJhbXMgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgIHZhciBwYXJhbXMgPSBbXSxcbiAgICAgICAgICBlc2NhcGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG5cbiAgICAgIHBhcmFtcy5hZGQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnB1c2goZXNjYXBlKGtleSkgKyAnPScgKyBlc2NhcGUodmFsdWUpKTtcbiAgICAgIH07XG5cbiAgICAgIHNlcmlhbGl6ZShwYXJhbXMsIG9iaik7XG5cbiAgICAgIHJldHVybiBwYXJhbXMuam9pbignJicpLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQYXJzZSBhIFVSTCBhbmQgcmV0dXJuIGl0cyBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gICAqL1xuXG4gIFVybC5wYXJzZSA9IGZ1bmN0aW9uICh1cmwpIHtcblxuICAgICAgaWYgKGllKSB7XG4gICAgICAgICAgZWwuaHJlZiA9IHVybDtcbiAgICAgICAgICB1cmwgPSBlbC5ocmVmO1xuICAgICAgfVxuXG4gICAgICBlbC5ocmVmID0gdXJsO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIGhyZWY6IGVsLmhyZWYsXG4gICAgICAgICAgcHJvdG9jb2w6IGVsLnByb3RvY29sID8gZWwucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgICBwb3J0OiBlbC5wb3J0LFxuICAgICAgICAgIGhvc3Q6IGVsLmhvc3QsXG4gICAgICAgICAgaG9zdG5hbWU6IGVsLmhvc3RuYW1lLFxuICAgICAgICAgIHBhdGhuYW1lOiBlbC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/IGVsLnBhdGhuYW1lIDogJy8nICsgZWwucGF0aG5hbWUsXG4gICAgICAgICAgc2VhcmNoOiBlbC5zZWFyY2ggPyBlbC5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICAgIGhhc2g6IGVsLmhhc2ggPyBlbC5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJydcbiAgICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFjdG9yeShoYW5kbGVyLCBuZXh0LCB2bSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh2bSwgb3B0aW9ucywgbmV4dCk7XG4gICAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gc2VyaWFsaXplKHBhcmFtcywgb2JqLCBzY29wZSkge1xuXG4gICAgICB2YXIgYXJyYXkgPSBpc0FycmF5KG9iaiksXG4gICAgICAgICAgcGxhaW4gPSBpc1BsYWluT2JqZWN0KG9iaiksXG4gICAgICAgICAgaGFzaDtcblxuICAgICAgZWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cbiAgICAgICAgICBoYXNoID0gaXNPYmplY3QodmFsdWUpIHx8IGlzQXJyYXkodmFsdWUpO1xuXG4gICAgICAgICAgaWYgKHNjb3BlKSB7XG4gICAgICAgICAgICAgIGtleSA9IHNjb3BlICsgJ1snICsgKHBsYWluIHx8IGhhc2ggPyBrZXkgOiAnJykgKyAnXSc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFzY29wZSAmJiBhcnJheSkge1xuICAgICAgICAgICAgICBwYXJhbXMuYWRkKHZhbHVlLm5hbWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc2gpIHtcbiAgICAgICAgICAgICAgc2VyaWFsaXplKHBhcmFtcywgdmFsdWUsIGtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyYW1zLmFkZChrZXksIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9taXNlcy9BKyBwb2x5ZmlsbCB2MS4xLjQgKGh0dHBzOi8vZ2l0aHViLmNvbS9icmFtc3RlaW4vcHJvbWlzKVxuICAgKi9cblxuICB2YXIgUkVTT0xWRUQgPSAwO1xuICB2YXIgUkVKRUNURUQgPSAxO1xuICB2YXIgUEVORElORyA9IDI7XG5cbiAgZnVuY3Rpb24gUHJvbWlzZSQyKGV4ZWN1dG9yKSB7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBQRU5ESU5HO1xuICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZGVmZXJyZWQgPSBbXTtcblxuICAgICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgICB0cnkge1xuICAgICAgICAgIGV4ZWN1dG9yKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSh4KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICBwcm9taXNlLnJlamVjdChyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBwcm9taXNlLnJlamVjdChlKTtcbiAgICAgIH1cbiAgfVxuXG4gIFByb21pc2UkMi5yZWplY3QgPSBmdW5jdGlvbiAocikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDIoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChyKTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIFByb21pc2UkMi5yZXNvbHZlID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQyKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZXNvbHZlKHgpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgUHJvbWlzZSQyLmFsbCA9IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDIoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHZhciBjb3VudCA9IDAsXG4gICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICAgICAgaWYgKGl0ZXJhYmxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZXIoaSkge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IHg7XG4gICAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhYmxlLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgIFByb21pc2UkMi5yZXNvbHZlKGl0ZXJhYmxlW2ldKS50aGVuKHJlc29sdmVyKGkpLCByZWplY3QpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIFByb21pc2UkMi5yYWNlID0gZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDIoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlcmFibGUubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgUHJvbWlzZSQyLnJlc29sdmUoaXRlcmFibGVbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICB2YXIgcCQxID0gUHJvbWlzZSQyLnByb3RvdHlwZTtcblxuICBwJDEucmVzb2x2ZSA9IGZ1bmN0aW9uIHJlc29sdmUoeCkge1xuICAgICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgICBpZiAocHJvbWlzZS5zdGF0ZSA9PT0gUEVORElORykge1xuICAgICAgICAgIGlmICh4ID09PSBwcm9taXNlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2Ugc2V0dGxlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB2YXIgdGhlbiA9IHggJiYgeFsndGhlbiddO1xuXG4gICAgICAgICAgICAgIGlmICh4ICE9PSBudWxsICYmICh0eXBlb2YgeCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoeCkpID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHgsIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHgpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnJlamVjdChyKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb21pc2Uuc3RhdGUgPSBSRVNPTFZFRDtcbiAgICAgICAgICBwcm9taXNlLnZhbHVlID0geDtcbiAgICAgICAgICBwcm9taXNlLm5vdGlmeSgpO1xuICAgICAgfVxuICB9O1xuXG4gIHAkMS5yZWplY3QgPSBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cbiAgICAgIGlmIChwcm9taXNlLnN0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgaWYgKHJlYXNvbiA9PT0gcHJvbWlzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlIHNldHRsZWQgd2l0aCBpdHNlbGYuJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvbWlzZS5zdGF0ZSA9IFJFSkVDVEVEO1xuICAgICAgICAgIHByb21pc2UudmFsdWUgPSByZWFzb247XG4gICAgICAgICAgcHJvbWlzZS5ub3RpZnkoKTtcbiAgICAgIH1cbiAgfTtcblxuICBwJDEubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5KCkge1xuICAgICAgdmFyIHByb21pc2UgPSB0aGlzO1xuXG4gICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHByb21pc2Uuc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgICAgICAgICAgd2hpbGUgKHByb21pc2UuZGVmZXJyZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBwcm9taXNlLmRlZmVycmVkLnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgb25SZXNvbHZlZCA9IGRlZmVycmVkWzBdLFxuICAgICAgICAgICAgICAgICAgICAgIG9uUmVqZWN0ZWQgPSBkZWZlcnJlZFsxXSxcbiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gZGVmZXJyZWRbMl0sXG4gICAgICAgICAgICAgICAgICAgICAgcmVqZWN0ID0gZGVmZXJyZWRbM107XG5cbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2Uuc3RhdGUgPT09IFJFU09MVkVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25SZXNvbHZlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvblJlc29sdmVkLmNhbGwodW5kZWZpbmVkLCBwcm9taXNlLnZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHByb21pc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9taXNlLnN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob25SZWplY3RlZC5jYWxsKHVuZGVmaW5lZCwgcHJvbWlzZS52YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHByb21pc2UudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIHAkMS50aGVuID0gZnVuY3Rpb24gdGhlbihvblJlc29sdmVkLCBvblJlamVjdGVkKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQyKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBwcm9taXNlLmRlZmVycmVkLnB1c2goW29uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdF0pO1xuICAgICAgICAgIHByb21pc2Uubm90aWZ5KCk7XG4gICAgICB9KTtcbiAgfTtcblxuICBwJDEuY2F0Y2ggPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpO1xuICB9O1xuXG4gIHZhciBQcm9taXNlT2JqID0gd2luZG93LlByb21pc2UgfHwgUHJvbWlzZSQyO1xuXG4gIGZ1bmN0aW9uIFByb21pc2UkMShleGVjdXRvciwgY29udGV4dCkge1xuXG4gICAgICBpZiAoZXhlY3V0b3IgaW5zdGFuY2VvZiBQcm9taXNlT2JqKSB7XG4gICAgICAgICAgdGhpcy5wcm9taXNlID0gZXhlY3V0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlT2JqKGV4ZWN1dG9yLmJpbmQoY29udGV4dCkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB9XG5cbiAgUHJvbWlzZSQxLmFsbCA9IGZ1bmN0aW9uIChpdGVyYWJsZSwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoUHJvbWlzZU9iai5hbGwoaXRlcmFibGUpLCBjb250ZXh0KTtcbiAgfTtcblxuICBQcm9taXNlJDEucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoUHJvbWlzZU9iai5yZXNvbHZlKHZhbHVlKSwgY29udGV4dCk7XG4gIH07XG5cbiAgUHJvbWlzZSQxLnJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24sIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKFByb21pc2VPYmoucmVqZWN0KHJlYXNvbiksIGNvbnRleHQpO1xuICB9O1xuXG4gIFByb21pc2UkMS5yYWNlID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMShQcm9taXNlT2JqLnJhY2UoaXRlcmFibGUpLCBjb250ZXh0KTtcbiAgfTtcblxuICB2YXIgcCA9IFByb21pc2UkMS5wcm90b3R5cGU7XG5cbiAgcC5iaW5kID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLnRoZW4gPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuXG4gICAgICBpZiAoZnVsZmlsbGVkICYmIGZ1bGZpbGxlZC5iaW5kICYmIHRoaXMuY29udGV4dCkge1xuICAgICAgICAgIGZ1bGZpbGxlZCA9IGZ1bGZpbGxlZC5iaW5kKHRoaXMuY29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWplY3RlZCAmJiByZWplY3RlZC5iaW5kICYmIHRoaXMuY29udGV4dCkge1xuICAgICAgICAgIHJlamVjdGVkID0gcmVqZWN0ZWQuYmluZCh0aGlzLmNvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5jYXRjaCA9IGZ1bmN0aW9uIChyZWplY3RlZCkge1xuXG4gICAgICBpZiAocmVqZWN0ZWQgJiYgcmVqZWN0ZWQuYmluZCAmJiB0aGlzLmNvbnRleHQpIHtcbiAgICAgICAgICByZWplY3RlZCA9IHJlamVjdGVkLmJpbmQodGhpcy5jb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmNhdGNoKHJlamVjdGVkKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5maW5hbGx5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cbiAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZU9iai5yZWplY3QocmVhc29uKTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIHAuc3VjY2VzcyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXG4gICAgICB3YXJuKCdUaGUgYHN1Y2Nlc3NgIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgdGhlIGB0aGVuYCBtZXRob2QgaW5zdGVhZC4nKTtcblxuICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzLCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlKSB8fCByZXNwb25zZTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIHAuZXJyb3IgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblxuICAgICAgd2FybignVGhlIGBlcnJvcmAgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYGNhdGNoYCBtZXRob2QgaW5zdGVhZC4nKTtcblxuICAgICAgcmV0dXJuIHRoaXMuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpcywgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZSkgfHwgcmVzcG9uc2U7XG4gICAgICB9KTtcbiAgfTtcblxuICBwLmFsd2F5cyA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXG4gICAgICB3YXJuKCdUaGUgYGFsd2F5c2AgbWV0aG9kIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYGZpbmFsbHlgIG1ldGhvZCBpbnN0ZWFkLicpO1xuXG4gICAgICB2YXIgY2IgPSBmdW5jdGlvbiBjYihyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXMsIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UpIHx8IHJlc3BvbnNlO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMudGhlbihjYiwgY2IpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHhkckNsaWVudCAocmVxdWVzdCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUpIHtcblxuICAgICAgICAgIHZhciB4ZHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKSxcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7IHJlcXVlc3Q6IHJlcXVlc3QgfSxcbiAgICAgICAgICAgICAgaGFuZGxlcjtcblxuICAgICAgICAgIHJlcXVlc3QuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB4ZHIuYWJvcnQoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgeGRyLm9wZW4ocmVxdWVzdC5tZXRob2QsIFVybChyZXF1ZXN0KSwgdHJ1ZSk7XG5cbiAgICAgICAgICBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xuXG4gICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSB4ZHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSB4ZHIuc3RhdHVzO1xuICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXNUZXh0ID0geGRyLnN0YXR1c1RleHQgfHwgJyc7XG5cbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHhkci50aW1lb3V0ID0gMDtcbiAgICAgICAgICB4ZHIub25sb2FkID0gaGFuZGxlcjtcbiAgICAgICAgICB4ZHIub25hYm9ydCA9IGhhbmRsZXI7XG4gICAgICAgICAgeGRyLm9uZXJyb3IgPSBoYW5kbGVyO1xuICAgICAgICAgIHhkci5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgICB4ZHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgICAgeGRyLnNlbmQocmVxdWVzdC5kYXRhKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdmFyIG9yaWdpblVybCA9IFVybC5wYXJzZShsb2NhdGlvbi5ocmVmKTtcbiAgdmFyIHN1cHBvcnRDb3JzID0gJ3dpdGhDcmVkZW50aWFscycgaW4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgdmFyIGV4cG9ydHMkMSA9IHtcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3QoX3JlcXVlc3QpIHtcblxuICAgICAgICAgIGlmIChfcmVxdWVzdC5jcm9zc09yaWdpbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBfcmVxdWVzdC5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luKF9yZXF1ZXN0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3JlcXVlc3QuY3Jvc3NPcmlnaW4pIHtcblxuICAgICAgICAgICAgICBpZiAoIXN1cHBvcnRDb3JzKSB7XG4gICAgICAgICAgICAgICAgICBfcmVxdWVzdC5jbGllbnQgPSB4ZHJDbGllbnQ7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfcmVxdWVzdC5lbXVsYXRlSFRUUCA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfcmVxdWVzdDtcbiAgICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBjcm9zc09yaWdpbihyZXF1ZXN0KSB7XG5cbiAgICAgIHZhciByZXF1ZXN0VXJsID0gVXJsLnBhcnNlKFVybChyZXF1ZXN0KSk7XG5cbiAgICAgIHJldHVybiByZXF1ZXN0VXJsLnByb3RvY29sICE9PSBvcmlnaW5VcmwucHJvdG9jb2wgfHwgcmVxdWVzdFVybC5ob3N0ICE9PSBvcmlnaW5VcmwuaG9zdDtcbiAgfVxuXG4gIHZhciBleHBvcnRzJDIgPSB7XG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiByZXF1ZXN0KF9yZXF1ZXN0KSB7XG5cbiAgICAgICAgICBpZiAoX3JlcXVlc3QuZW11bGF0ZUpTT04gJiYgaXNQbGFpbk9iamVjdChfcmVxdWVzdC5kYXRhKSkge1xuICAgICAgICAgICAgICBfcmVxdWVzdC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICAgICAgICAgICAgICBfcmVxdWVzdC5kYXRhID0gVXJsLnBhcmFtcyhfcmVxdWVzdC5kYXRhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNPYmplY3QoX3JlcXVlc3QuZGF0YSkgJiYgL0Zvcm1EYXRhL2kudGVzdChfcmVxdWVzdC5kYXRhLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSBfcmVxdWVzdC5oZWFkZXJzWydDb250ZW50LVR5cGUnXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChfcmVxdWVzdC5kYXRhKSkge1xuICAgICAgICAgICAgICBfcmVxdWVzdC5kYXRhID0gSlNPTi5zdHJpbmdpZnkoX3JlcXVlc3QuZGF0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIF9yZXF1ZXN0O1xuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiByZXNwb25zZShfcmVzcG9uc2UpIHtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIF9yZXNwb25zZS5kYXRhID0gSlNPTi5wYXJzZShfcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICAgIHJldHVybiBfcmVzcG9uc2U7XG4gICAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24ganNvbnBDbGllbnQgKHJlcXVlc3QpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cbiAgICAgICAgICB2YXIgY2FsbGJhY2sgPSAnX2pzb25wJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKSxcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7IHJlcXVlc3Q6IHJlcXVlc3QsIGRhdGE6IG51bGwgfSxcbiAgICAgICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICAgICAgc2NyaXB0O1xuXG4gICAgICAgICAgcmVxdWVzdC5wYXJhbXNbcmVxdWVzdC5qc29ucF0gPSBjYWxsYmFjaztcbiAgICAgICAgICByZXF1ZXN0LmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaGFuZGxlcih7IHR5cGU6ICdjYW5jZWwnIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgICBzY3JpcHQuc3JjID0gVXJsKHJlcXVlc3QpO1xuICAgICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcblxuICAgICAgICAgIHdpbmRvd1tjYWxsYmFja10gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gZGF0YTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZXZlbnQpIHtcblxuICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnICYmIHJlc3BvbnNlLmRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IDIwMDtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSA0MDQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSAwO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1tjYWxsYmFja107XG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGhhbmRsZXI7XG4gICAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBoYW5kbGVyO1xuXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgfSk7XG4gIH1cblxuICB2YXIgZXhwb3J0cyQzID0ge1xuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xuXG4gICAgICAgICAgaWYgKF9yZXF1ZXN0Lm1ldGhvZCA9PSAnSlNPTlAnKSB7XG4gICAgICAgICAgICAgIF9yZXF1ZXN0LmNsaWVudCA9IGpzb25wQ2xpZW50O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfcmVxdWVzdDtcbiAgICAgIH1cbiAgfTtcblxuICB2YXIgZXhwb3J0cyQ0ID0ge1xuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xuXG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oX3JlcXVlc3QuYmVmb3JlU2VuZCkpIHtcbiAgICAgICAgICAgICAgX3JlcXVlc3QuYmVmb3JlU2VuZC5jYWxsKHRoaXMsIF9yZXF1ZXN0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX3JlcXVlc3Q7XG4gICAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEhUVFAgbWV0aG9kIG92ZXJyaWRlIEludGVyY2VwdG9yLlxuICAgKi9cblxuICB2YXIgZXhwb3J0cyQ1ID0ge1xuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xuXG4gICAgICAgICAgaWYgKF9yZXF1ZXN0LmVtdWxhdGVIVFRQICYmIC9eKFBVVHxQQVRDSHxERUxFVEUpJC9pLnRlc3QoX3JlcXVlc3QubWV0aG9kKSkge1xuICAgICAgICAgICAgICBfcmVxdWVzdC5oZWFkZXJzWydYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJ10gPSBfcmVxdWVzdC5tZXRob2Q7XG4gICAgICAgICAgICAgIF9yZXF1ZXN0Lm1ldGhvZCA9ICdQT1NUJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX3JlcXVlc3Q7XG4gICAgICB9XG4gIH07XG5cbiAgdmFyIGV4cG9ydHMkNiA9IHtcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3QoX3JlcXVlc3QpIHtcblxuICAgICAgICAgIF9yZXF1ZXN0Lm1ldGhvZCA9IF9yZXF1ZXN0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIF9yZXF1ZXN0LmhlYWRlcnMgPSBleHRlbmQoe30sIEh0dHAuaGVhZGVycy5jb21tb24sICFfcmVxdWVzdC5jcm9zc09yaWdpbiA/IEh0dHAuaGVhZGVycy5jdXN0b20gOiB7fSwgSHR0cC5oZWFkZXJzW19yZXF1ZXN0Lm1ldGhvZC50b0xvd2VyQ2FzZSgpXSwgX3JlcXVlc3QuaGVhZGVycyk7XG5cbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChfcmVxdWVzdC5kYXRhKSAmJiAvXihHRVR8SlNPTlApJC9pLnRlc3QoX3JlcXVlc3QubWV0aG9kKSkge1xuICAgICAgICAgICAgICBleHRlbmQoX3JlcXVlc3QucGFyYW1zLCBfcmVxdWVzdC5kYXRhKTtcbiAgICAgICAgICAgICAgZGVsZXRlIF9yZXF1ZXN0LmRhdGE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIF9yZXF1ZXN0O1xuICAgICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUaW1lb3V0IEludGVyY2VwdG9yLlxuICAgKi9cblxuICB2YXIgZXhwb3J0cyQ3ID0gZnVuY3Rpb24gZXhwb3J0cygpIHtcblxuICAgICAgdmFyIHRpbWVvdXQ7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gcmVxdWVzdChfcmVxdWVzdCkge1xuXG4gICAgICAgICAgICAgIGlmIChfcmVxdWVzdC50aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgX3JlcXVlc3QuY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgICB9LCBfcmVxdWVzdC50aW1lb3V0KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfcmVxdWVzdDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiByZXNwb25zZShfcmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIF9yZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGludGVyY2VwdG9yIChoYW5kbGVyLCB2bSkge1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGNsaWVudCkge1xuXG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgICAgaGFuZGxlciA9IGhhbmRsZXIuY2FsbCh2bSwgUHJvbWlzZSQxKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlcXVlc3QpIHtcblxuICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyLnJlcXVlc3QpKSB7XG4gICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gaGFuZGxlci5yZXF1ZXN0LmNhbGwodm0sIHJlcXVlc3QpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHdoZW4ocmVxdWVzdCwgZnVuY3Rpb24gKHJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB3aGVuKGNsaWVudChyZXF1ZXN0KSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyLnJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGhhbmRsZXIucmVzcG9uc2UuY2FsbCh2bSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdoZW4odmFsdWUsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcblxuICAgICAgdmFyIHByb21pc2UgPSBQcm9taXNlJDEucmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24geGhyQ2xpZW50IChyZXF1ZXN0KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXG4gICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgICByZXNwb25zZSA9IHsgcmVxdWVzdDogcmVxdWVzdCB9LFxuICAgICAgICAgICAgICBoYW5kbGVyO1xuXG4gICAgICAgICAgcmVxdWVzdC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgVXJsKHJlcXVlc3QpLCB0cnVlKTtcblxuICAgICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0geGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXM7IC8vIElFOSBzdGF0dXMgYnVnXG4gICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1c1RleHQgPSB0cmltKHhoci5zdGF0dXNUZXh0IHx8ICcnKTtcbiAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKTtcblxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgeGhyLnRpbWVvdXQgPSAwO1xuICAgICAgICAgIHhoci5vbmxvYWQgPSBoYW5kbGVyO1xuICAgICAgICAgIHhoci5vbmFib3J0ID0gaGFuZGxlcjtcbiAgICAgICAgICB4aHIub25lcnJvciA9IGhhbmRsZXI7XG4gICAgICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICAgIHhoci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXF1ZXN0LnhocikpIHtcbiAgICAgICAgICAgICAgZXh0ZW5kKHhociwgcmVxdWVzdC54aHIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcXVlc3QudXBsb2FkKSkge1xuICAgICAgICAgICAgICBleHRlbmQoeGhyLnVwbG9hZCwgcmVxdWVzdC51cGxvYWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVhY2gocmVxdWVzdC5oZWFkZXJzIHx8IHt9LCBmdW5jdGlvbiAodmFsdWUsIGhlYWRlcikge1xuICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIHZhbHVlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3QuZGF0YSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIENsaWVudCAocmVxdWVzdCkge1xuXG4gICAgICB2YXIgcmVzcG9uc2UgPSAocmVxdWVzdC5jbGllbnQgfHwgeGhyQ2xpZW50KShyZXF1ZXN0KTtcblxuICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKHJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmhlYWRlcnMpIHtcblxuICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHBhcnNlSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcblxuICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzID0gZnVuY3Rpb24gKG5hbWUpIHtcblxuICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVyc1t0b0xvd2VyKG5hbWUpXTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVzcG9uc2Uub2sgPSByZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDMwMDtcblxuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHN0cikge1xuXG4gICAgICB2YXIgaGVhZGVycyA9IHt9LFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgaTtcblxuICAgICAgaWYgKGlzU3RyaW5nKHN0cikpIHtcbiAgICAgICAgICBlYWNoKHN0ci5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIChyb3cpIHtcblxuICAgICAgICAgICAgICBpID0gcm93LmluZGV4T2YoJzonKTtcbiAgICAgICAgICAgICAgbmFtZSA9IHRyaW0odG9Mb3dlcihyb3cuc2xpY2UoMCwgaSkpKTtcbiAgICAgICAgICAgICAgdmFsdWUgPSB0cmltKHJvdy5zbGljZShpICsgMSkpO1xuXG4gICAgICAgICAgICAgIGlmIChoZWFkZXJzW25hbWVdKSB7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KGhlYWRlcnNbbmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tuYW1lXS5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tuYW1lXSA9IFtoZWFkZXJzW25hbWVdLCB2YWx1ZV07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgIGhlYWRlcnNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaGVhZGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXJ2aWNlIGZvciBzZW5kaW5nIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAqL1xuXG4gIHZhciBqc29uVHlwZSA9IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9O1xuXG4gIGZ1bmN0aW9uIEh0dHAodXJsLCBvcHRpb25zKSB7XG5cbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCB7fSxcbiAgICAgICAgICBjbGllbnQgPSBDbGllbnQsXG4gICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICBwcm9taXNlO1xuXG4gICAgICBIdHRwLmludGVyY2VwdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgICAgY2xpZW50ID0gaW50ZXJjZXB0b3IoaGFuZGxlciwgc2VsZi4kdm0pKGNsaWVudCk7XG4gICAgICB9KTtcblxuICAgICAgb3B0aW9ucyA9IGlzT2JqZWN0KHVybCkgPyB1cmwgOiBleHRlbmQoeyB1cmw6IHVybCB9LCBvcHRpb25zKTtcbiAgICAgIHJlcXVlc3QgPSBtZXJnZSh7fSwgSHR0cC5vcHRpb25zLCBzZWxmLiRvcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIHByb21pc2UgPSBjbGllbnQocmVxdWVzdCkuYmluZChzZWxmLiR2bSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5vayA/IHJlc3BvbnNlIDogUHJvbWlzZSQxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgIGVycm9yKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gUHJvbWlzZSQxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlcXVlc3Quc3VjY2Vzcykge1xuICAgICAgICAgIHByb21pc2Uuc3VjY2VzcyhyZXF1ZXN0LnN1Y2Nlc3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVxdWVzdC5lcnJvcikge1xuICAgICAgICAgIHByb21pc2UuZXJyb3IocmVxdWVzdC5lcnJvcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgSHR0cC5vcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgIGRhdGE6ICcnLFxuICAgICAgcGFyYW1zOiB7fSxcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgeGhyOiBudWxsLFxuICAgICAgdXBsb2FkOiBudWxsLFxuICAgICAganNvbnA6ICdjYWxsYmFjaycsXG4gICAgICBiZWZvcmVTZW5kOiBudWxsLFxuICAgICAgY3Jvc3NPcmlnaW46IG51bGwsXG4gICAgICBlbXVsYXRlSFRUUDogZmFsc2UsXG4gICAgICBlbXVsYXRlSlNPTjogZmFsc2UsXG4gICAgICB0aW1lb3V0OiAwXG4gIH07XG5cbiAgSHR0cC5oZWFkZXJzID0ge1xuICAgICAgcHV0OiBqc29uVHlwZSxcbiAgICAgIHBvc3Q6IGpzb25UeXBlLFxuICAgICAgcGF0Y2g6IGpzb25UeXBlLFxuICAgICAgZGVsZXRlOiBqc29uVHlwZSxcbiAgICAgIGNvbW1vbjogeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicgfSxcbiAgICAgIGN1c3RvbTogeyAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCcgfVxuICB9O1xuXG4gIEh0dHAuaW50ZXJjZXB0b3JzID0gW2V4cG9ydHMkNCwgZXhwb3J0cyQ3LCBleHBvcnRzJDMsIGV4cG9ydHMkNSwgZXhwb3J0cyQyLCBleHBvcnRzJDYsIGV4cG9ydHMkMV07XG5cbiAgWydnZXQnLCAncHV0JywgJ3Bvc3QnLCAncGF0Y2gnLCAnZGVsZXRlJywgJ2pzb25wJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG5cbiAgICAgIEh0dHBbbWV0aG9kXSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIHN1Y2Nlc3MsIG9wdGlvbnMpIHtcblxuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGRhdGEpKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMgPSBzdWNjZXNzO1xuICAgICAgICAgICAgICBzdWNjZXNzID0gZGF0YTtcbiAgICAgICAgICAgICAgZGF0YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNPYmplY3Qoc3VjY2VzcykpIHtcbiAgICAgICAgICAgICAgb3B0aW9ucyA9IHN1Y2Nlc3M7XG4gICAgICAgICAgICAgIHN1Y2Nlc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRoaXModXJsLCBleHRlbmQoeyBtZXRob2Q6IG1ldGhvZCwgZGF0YTogZGF0YSwgc3VjY2Vzczogc3VjY2VzcyB9LCBvcHRpb25zKSk7XG4gICAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBSZXNvdXJjZSh1cmwsIHBhcmFtcywgYWN0aW9ucywgb3B0aW9ucykge1xuXG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwge30sXG4gICAgICAgICAgcmVzb3VyY2UgPSB7fTtcblxuICAgICAgYWN0aW9ucyA9IGV4dGVuZCh7fSwgUmVzb3VyY2UuYWN0aW9ucywgYWN0aW9ucyk7XG5cbiAgICAgIGVhY2goYWN0aW9ucywgZnVuY3Rpb24gKGFjdGlvbiwgbmFtZSkge1xuXG4gICAgICAgICAgYWN0aW9uID0gbWVyZ2UoeyB1cmw6IHVybCwgcGFyYW1zOiBwYXJhbXMgfHwge30gfSwgb3B0aW9ucywgYWN0aW9uKTtcblxuICAgICAgICAgIHJlc291cmNlW25hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gKHNlbGYuJGh0dHAgfHwgSHR0cCkob3B0cyhhY3Rpb24sIGFyZ3VtZW50cykpO1xuICAgICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc291cmNlO1xuICB9XG5cbiAgZnVuY3Rpb24gb3B0cyhhY3Rpb24sIGFyZ3MpIHtcblxuICAgICAgdmFyIG9wdGlvbnMgPSBleHRlbmQoe30sIGFjdGlvbiksXG4gICAgICAgICAgcGFyYW1zID0ge30sXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgIGVycm9yO1xuXG4gICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cbiAgICAgICAgICBjYXNlIDQ6XG5cbiAgICAgICAgICAgICAgZXJyb3IgPSBhcmdzWzNdO1xuICAgICAgICAgICAgICBzdWNjZXNzID0gYXJnc1syXTtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIDI6XG5cbiAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYXJnc1sxXSkpIHtcblxuICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYXJnc1swXSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gYXJnc1sxXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBzdWNjZXNzID0gYXJnc1sxXTtcbiAgICAgICAgICAgICAgICAgIGVycm9yID0gYXJnc1syXTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgcGFyYW1zID0gYXJnc1swXTtcbiAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmdzWzFdO1xuICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IGFyZ3NbMl07XG5cbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDE6XG5cbiAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYXJnc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eKFBPU1R8UFVUfFBBVENIKSQvaS50ZXN0KG9wdGlvbnMubWV0aG9kKSkge1xuICAgICAgICAgICAgICAgICAgZGF0YSA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBwYXJhbXMgPSBhcmdzWzBdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDA6XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICAgIHRocm93ICdFeHBlY3RlZCB1cCB0byA0IGFyZ3VtZW50cyBbcGFyYW1zLCBkYXRhLCBzdWNjZXNzLCBlcnJvcl0sIGdvdCAnICsgYXJncy5sZW5ndGggKyAnIGFyZ3VtZW50cyc7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7XG4gICAgICBvcHRpb25zLnBhcmFtcyA9IGV4dGVuZCh7fSwgb3B0aW9ucy5wYXJhbXMsIHBhcmFtcyk7XG5cbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgb3B0aW9ucy5zdWNjZXNzID0gc3VjY2VzcztcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgb3B0aW9ucy5lcnJvciA9IGVycm9yO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIFJlc291cmNlLmFjdGlvbnMgPSB7XG5cbiAgICAgIGdldDogeyBtZXRob2Q6ICdHRVQnIH0sXG4gICAgICBzYXZlOiB7IG1ldGhvZDogJ1BPU1QnIH0sXG4gICAgICBxdWVyeTogeyBtZXRob2Q6ICdHRVQnIH0sXG4gICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUFVUJyB9LFxuICAgICAgcmVtb3ZlOiB7IG1ldGhvZDogJ0RFTEVURScgfSxcbiAgICAgIGRlbGV0ZTogeyBtZXRob2Q6ICdERUxFVEUnIH1cblxuICB9O1xuXG4gIGZ1bmN0aW9uIHBsdWdpbihWdWUpIHtcblxuICAgICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIFV0aWwoVnVlKTtcblxuICAgICAgVnVlLnVybCA9IFVybDtcbiAgICAgIFZ1ZS5odHRwID0gSHR0cDtcbiAgICAgIFZ1ZS5yZXNvdXJjZSA9IFJlc291cmNlO1xuICAgICAgVnVlLlByb21pc2UgPSBQcm9taXNlJDE7XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZ1ZS5wcm90b3R5cGUsIHtcblxuICAgICAgICAgICR1cmw6IHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucyhWdWUudXJsLCB0aGlzLCB0aGlzLiRvcHRpb25zLnVybCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgJGh0dHA6IHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucyhWdWUuaHR0cCwgdGhpcywgdGhpcy4kb3B0aW9ucy5odHRwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAkcmVzb3VyY2U6IHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gVnVlLnJlc291cmNlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgJHByb21pc2U6IHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV4ZWN1dG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWdWUuUHJvbWlzZShleGVjdXRvciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgfSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZ1ZSkge1xuICAgICAgd2luZG93LlZ1ZS51c2UocGx1Z2luKTtcbiAgfVxuXG4gIHJldHVybiBwbHVnaW47XG5cbn0pKTsiLCIvKiFcbiAqIHZ1ZS12YWxpZGF0b3IgdjIuMS4zXG4gKiAoYykgMjAxNiBrYXp1eWEga2F3YWd1Y2hpXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbC5WdWVWYWxpZGF0b3IgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG4gIGJhYmVsSGVscGVycy50eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICB9O1xuXG4gIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9XG4gIH07XG5cbiAgYmFiZWxIZWxwZXJzLmNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gICAgfTtcbiAgfSgpO1xuXG4gIGJhYmVsSGVscGVycy5pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICAgIH1cblxuICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbiAgfTtcblxuICBiYWJlbEhlbHBlcnMucG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XG4gICAgaWYgKCFzZWxmKSB7XG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG4gIH07XG5cbiAgYmFiZWxIZWxwZXJzO1xuXG4gIC8qKlxuICAgKiBVdGlsdGllc1xuICAgKi9cblxuICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuICB2YXIgZXhwb3J0cyQxID0ge307XG4gIC8qKlxuICAgKiB3YXJuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtc2dcbiAgICogQHBhcmFtIHtFcnJvcn0gW2Vycl1cbiAgICpcbiAgICovXG5cbiAgZnVuY3Rpb24gd2Fybihtc2csIGVycikge1xuICAgIGlmICh3aW5kb3cuY29uc29sZSkge1xuICAgICAgY29uc29sZS53YXJuKCdbdnVlLXZhbGlkYXRvcl0gJyArIG1zZyk7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2spO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBlbXB0eVxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdGFyZ2V0XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGVtcHR5KHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQgPT09IG51bGwgfHwgdGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICAgIGlmICh0YXJnZXQubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV4cG9ydHMkMS5WdWUudXRpbC5pc1BsYWluT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0YXJnZXQpIHtcbiAgICAgICAgaWYgKGV4cG9ydHMkMS5WdWUudXRpbC5oYXNPd24odGFyZ2V0LCBrZXkpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogZWFjaFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF1cbiAgICovXG5cbiAgZnVuY3Rpb24gZWFjaCh0YXJnZXQsIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0IHx8IHRhcmdldFtpXSwgdGFyZ2V0W2ldLCBpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV4cG9ydHMkMS5WdWUudXRpbC5pc1BsYWluT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgIHZhciBoYXNPd24gPSBleHBvcnRzJDEuVnVlLnV0aWwuaGFzT3duO1xuICAgICAgZm9yICh2YXIga2V5IGluIHRhcmdldCkge1xuICAgICAgICBpZiAoaGFzT3duKHRhcmdldCwga2V5KSkge1xuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCB8fCB0YXJnZXRba2V5XSwgdGFyZ2V0W2tleV0sIGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHVsbFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cbiAgICogQHJldHVybiB7T2JqZWN0fG51bGx9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHB1bGwoYXJyLCBpdGVtKSB7XG4gICAgdmFyIGluZGV4ID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmluZGV4T2YoYXJyLCBpdGVtKTtcbiAgICByZXR1cm4gfmluZGV4ID8gYXJyLnNwbGljZShpbmRleCwgMSkgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIHRyaWdnZXJcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFthcmdzXVxuICAgKi9cblxuICBmdW5jdGlvbiB0cmlnZ2VyKGVsLCBldmVudCwgYXJncykge1xuICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcbiAgICBlLmluaXRFdmVudChldmVudCwgdHJ1ZSwgZmFsc2UpO1xuXG4gICAgaWYgKGFyZ3MpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gYXJncykge1xuICAgICAgICBlW3Byb3BdID0gYXJnc1twcm9wXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEdWUgdG8gRmlyZWZveCBidWcsIGV2ZW50cyBmaXJlZCBvbiBkaXNhYmxlZFxuICAgIC8vIG5vbi1hdHRhY2hlZCBmb3JtIGNvbnRyb2xzIGNhbiB0aHJvdyBlcnJvcnNcbiAgICB0cnkge1xuICAgICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcmdpdmluZyBjaGVjayBmb3IgYSBwcm9taXNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzUHJvbWlzZShwKSB7XG4gICAgcmV0dXJuIHAgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnaW5nIGNsYXNzZXNcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoZWwsIGtleSwgZm4pIHtcbiAgICBrZXkgPSBrZXkudHJpbSgpO1xuICAgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgICAgZm4oZWwsIGtleSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbihlbCwga2V5c1tpXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmRhbWVudGFsIHZhbGlkYXRlIGZ1bmN0aW9uc1xuICAgKi9cblxuICAvKipcbiAgICogcmVxdWlyZWRcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiB2YWxpZGF0ZSB3aGV0aGVyIHRoZSB2YWx1ZSBoYXMgYmVlbiBmaWxsZWQgb3V0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiByZXF1aXJlZCh2YWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICBpZiAodmFsLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YWxpZCA9IHJlcXVpcmVkKHZhbFtpXSk7XG4gICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2YWwubGVuZ3RoID4gMDtcbiAgICB9IGVsc2UgaWYgKHZhbCAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IGJhYmVsSGVscGVycy50eXBlb2YodmFsKSkgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5sZW5ndGggPiAwO1xuICAgIH0gZWxzZSBpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHBhdHRlcm5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiB2YWxpZGF0ZSB3aGV0aGVyIHRoZSB2YWx1ZSBtYXRjaGVzIHRoZSByZWdleCBwYXR0ZXJuXG4gICAqXG4gICAqIEBwYXJhbSB2YWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBwYXR0ZXJuKHZhbCwgcGF0KSB7XG4gICAgaWYgKHR5cGVvZiBwYXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG1hdGNoID0gcGF0Lm1hdGNoKG5ldyBSZWdFeHAoJ14vKC4qPykvKFtnaW15XSopJCcpKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAobWF0Y2hbMV0sIG1hdGNoWzJdKS50ZXN0KHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogbWlubGVuZ3RoXG4gICAqXG4gICAqIFRoaXMgZnVuY3Rpb24gdmFsaWRhdGUgd2hldGhlciB0aGUgbWluaW11bSBsZW5ndGguXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSB2YWxcbiAgICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBtaW5cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gbWlubGVuZ3RoKHZhbCwgbWluKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gaXNJbnRlZ2VyKG1pbiwgMTApICYmIHZhbC5sZW5ndGggPj0gcGFyc2VJbnQobWluLCAxMCk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIHJldHVybiB2YWwubGVuZ3RoID49IHBhcnNlSW50KG1pbiwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIG1heGxlbmd0aFxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHZhbGlkYXRlIHdoZXRoZXIgdGhlIG1heGltdW0gbGVuZ3RoLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gdmFsXG4gICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gbWF4XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1heGxlbmd0aCh2YWwsIG1heCkge1xuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIGlzSW50ZWdlcihtYXgsIDEwKSAmJiB2YWwubGVuZ3RoIDw9IHBhcnNlSW50KG1heCwgMTApO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsLmxlbmd0aCA8PSBwYXJzZUludChtYXgsIDEwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBtaW5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiB2YWxpZGF0ZSB3aGV0aGVyIHRoZSBtaW5pbXVtIHZhbHVlIG9mIHRoZSBudW1iZXJhYmxlIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKiBAcGFyYW0geyp9IGFyZyBtaW5pbXVtXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1pbih2YWwsIGFyZykge1xuICAgIHJldHVybiAhaXNOYU4oK3ZhbCkgJiYgIWlzTmFOKCthcmcpICYmICt2YWwgPj0gK2FyZztcbiAgfVxuXG4gIC8qKlxuICAgKiBtYXhcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiB2YWxpZGF0ZSB3aGV0aGVyIHRoZSBtYXhpbXVtIHZhbHVlIG9mIHRoZSBudW1iZXJhYmxlIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKiBAcGFyYW0geyp9IGFyZyBtYXhpbXVtXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1heCh2YWwsIGFyZykge1xuICAgIHJldHVybiAhaXNOYU4oK3ZhbCkgJiYgIWlzTmFOKCthcmcpICYmICt2YWwgPD0gK2FyZztcbiAgfVxuXG4gIC8qKlxuICAgKiBpc0ludGVnZXJcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiBjaGVjayB3aGV0aGVyIHRoZSB2YWx1ZSBvZiB0aGUgc3RyaW5nIGlzIGludGVnZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbCkge1xuICAgIHJldHVybiAoL14oLT9bMS05XVxcZCp8MCkkLy50ZXN0KHZhbClcbiAgICApO1xuICB9XG5cbnZhciB2YWxpZGF0b3JzID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgcmVxdWlyZWQ6IHJlcXVpcmVkLFxuICAgIHBhdHRlcm46IHBhdHRlcm4sXG4gICAgbWlubGVuZ3RoOiBtaW5sZW5ndGgsXG4gICAgbWF4bGVuZ3RoOiBtYXhsZW5ndGgsXG4gICAgbWluOiBtaW4sXG4gICAgbWF4OiBtYXhcbiAgfSk7XG5cbiAgZnVuY3Rpb24gQXNzZXQgKFZ1ZSkge1xuICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG5cbiAgICAvLyBzZXQgZ2xvYmFsIHZhbGlkYXRvcnMgYXNzZXRcbiAgICB2YXIgYXNzZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBleHRlbmQoYXNzZXRzLCB2YWxpZGF0b3JzKTtcbiAgICBWdWUub3B0aW9ucy52YWxpZGF0b3JzID0gYXNzZXRzO1xuXG4gICAgLy8gc2V0IG9wdGlvbiBtZXJnZSBzdHJhdGVneVxuICAgIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcbiAgICBpZiAoc3RyYXRzKSB7XG4gICAgICBzdHJhdHMudmFsaWRhdG9ycyA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XG4gICAgICAgIGlmICghY2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBleHRlbmQocmV0LCBwYXJlbnQpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGQpIHtcbiAgICAgICAgICByZXRba2V5XSA9IGNoaWxkW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgb3IgcmV0cmlldmUgYSBnbG9iYWwgdmFsaWRhdG9yIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkZWZpbml0aW9uXG4gICAgICovXG5cbiAgICBWdWUudmFsaWRhdG9yID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIFZ1ZS5vcHRpb25zWyd2YWxpZGF0b3JzJ11baWRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVnVlLm9wdGlvbnNbJ3ZhbGlkYXRvcnMnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBPdmVycmlkZSAoVnVlKSB7XG4gICAgLy8gb3ZlcnJpZGUgX2luaXRcbiAgICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG4gICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRvck1hcHMpIHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdG9yTWFwcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB9XG4gICAgICBpbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIC8vIG92ZXJyaWRlIF9kZXN0cm95XG4gICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBkZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB0aGlzLl92YWxpZGF0b3JNYXBzID0gbnVsbDtcbiAgICB9O1xuICB9XG5cbiAgdmFyIFZBTElEQVRFX1VQREFURSA9ICdfX3Z1ZS12YWxpZGF0b3ItdmFsaWRhdGUtdXBkYXRlX18nO1xuICB2YXIgUFJJT1JJVFlfVkFMSURBVEUgPSAxNjtcbiAgdmFyIFBSSU9SSVRZX1ZBTElEQVRFX0NMQVNTID0gMzI7XG4gIHZhciBSRUdFWF9GSUxURVIgPSAvW158XVxcfFtefF0vO1xuICB2YXIgUkVHRVhfVkFMSURBVEVfRElSRUNUSVZFID0gL152LXZhbGlkYXRlKD86JHw6KC4qKSQpLztcbiAgdmFyIFJFR0VYX0VWRU5UID0gL152LW9uOnxeQC87XG5cbiAgdmFyIGNsYXNzSWQgPSAwOyAvLyBJRCBmb3IgdmFsaWRhdGlvbiBjbGFzc1xuXG4gIGZ1bmN0aW9uIFZhbGlkYXRlQ2xhc3MgKFZ1ZSkge1xuICAgIHZhciB2SWYgPSBWdWUuZGlyZWN0aXZlKCdpZicpO1xuICAgIHZhciBGcmFnbWVudEZhY3RvcnkgPSBWdWUuRnJhZ21lbnRGYWN0b3J5O1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgdG9BcnJheSA9IF9WdWUkdXRpbC50b0FycmF5O1xuICAgIHZhciByZXBsYWNlID0gX1Z1ZSR1dGlsLnJlcGxhY2U7XG4gICAgdmFyIGNyZWF0ZUFuY2hvciA9IF9WdWUkdXRpbC5jcmVhdGVBbmNob3I7XG5cbiAgICAvKipcbiAgICAgKiBgdi12YWxpZGF0ZS1jbGFzc2AgZGlyZWN0aXZlXG4gICAgICovXG5cbiAgICBWdWUuZGlyZWN0aXZlKCd2YWxpZGF0ZS1jbGFzcycsIHtcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJpb3JpdHk6IHZJZi5wcmlvcml0eSArIFBSSU9SSVRZX1ZBTElEQVRFX0NMQVNTLFxuXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBpZCA9IFN0cmluZyhjbGFzc0lkKyspO1xuICAgICAgICB0aGlzLnNldENsYXNzSWRzKHRoaXMuZWwsIGlkKTtcblxuICAgICAgICB0aGlzLnZtLiRvbihWQUxJREFURV9VUERBVEUsIHRoaXMuY2IgPSBmdW5jdGlvbiAoY2xhc3NJZHMsIHZhbGlkYXRpb24sIHJlc3VsdHMpIHtcbiAgICAgICAgICBpZiAoY2xhc3NJZHMuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbi51cGRhdGVDbGFzc2VzKHJlc3VsdHMsIF90aGlzLmZyYWcubm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldHVwRnJhZ21lbnQoKTtcbiAgICAgIH0sXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy52bS4kb2ZmKFZBTElEQVRFX1VQREFURSwgdGhpcy5jYik7XG4gICAgICAgIHRoaXMudGVhcmRvd25GcmFnbWVudCgpO1xuICAgICAgfSxcbiAgICAgIHNldENsYXNzSWRzOiBmdW5jdGlvbiBzZXRDbGFzc0lkcyhlbCwgaWQpIHtcbiAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnQgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXR0cnMgPSBlbGVtZW50Lmhhc0F0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWxlbWVudC5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBfbCA9IGF0dHJzLmxlbmd0aDsgayA8IF9sOyBrKyspIHtcbiAgICAgICAgICAgICAgdmFyIGF0dHIgPSBhdHRyc1trXTtcbiAgICAgICAgICAgICAgaWYgKGF0dHIubmFtZS5tYXRjaChSRUdFWF9WQUxJREFURV9ESVJFQ1RJVkUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShWQUxJREFURV9VUERBVEUpO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShWQUxJREFURV9VUERBVEUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChlbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDbGFzc0lkcyhlbGVtZW50LCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0dXBGcmFnbWVudDogZnVuY3Rpb24gc2V0dXBGcmFnbWVudCgpIHtcbiAgICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtdmFsaWRhdGUtY2xhc3MnKTtcbiAgICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICAgICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICAgICAgfSxcbiAgICAgIHRlYXJkb3duRnJhZ21lbnQ6IGZ1bmN0aW9uIHRlYXJkb3duRnJhZ21lbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG4gICAgICAgICAgdGhpcy5mcmFnID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmZhY3RvcnkgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwbGFjZSh0aGlzLmFuY2hvciwgdGhpcy5lbCk7XG4gICAgICAgIHRoaXMuYW5jaG9yID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFZhbGlkYXRlIChWdWUpIHtcbiAgICB2YXIgdklmID0gVnVlLmRpcmVjdGl2ZSgnaWYnKTtcbiAgICB2YXIgRnJhZ21lbnRGYWN0b3J5ID0gVnVlLkZyYWdtZW50RmFjdG9yeTtcbiAgICB2YXIgcGFyc2VEaXJlY3RpdmUgPSBWdWUucGFyc2Vycy5kaXJlY3RpdmUucGFyc2VEaXJlY3RpdmU7XG4gICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xuICAgIHZhciBpbkJyb3dzZXIgPSBfVnVlJHV0aWwuaW5Ccm93c2VyO1xuICAgIHZhciBiaW5kID0gX1Z1ZSR1dGlsLmJpbmQ7XG4gICAgdmFyIG9uID0gX1Z1ZSR1dGlsLm9uO1xuICAgIHZhciBvZmYgPSBfVnVlJHV0aWwub2ZmO1xuICAgIHZhciBjcmVhdGVBbmNob3IgPSBfVnVlJHV0aWwuY3JlYXRlQW5jaG9yO1xuICAgIHZhciByZXBsYWNlID0gX1Z1ZSR1dGlsLnJlcGxhY2U7XG4gICAgdmFyIGNhbWVsaXplID0gX1Z1ZSR1dGlsLmNhbWVsaXplO1xuICAgIHZhciBpc1BsYWluT2JqZWN0ID0gX1Z1ZSR1dGlsLmlzUGxhaW5PYmplY3Q7XG5cbiAgICAvLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xuXG4gICAgZnVuY3Rpb24gY2hlY2tUZXh0YXJlYUNsb25lQnVnKCkge1xuICAgICAgaWYgKGluQnJvd3Nlcikge1xuICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IGNoZWNrVGV4dGFyZWFDbG9uZUJ1ZygpO1xuXG4gICAgLyoqXG4gICAgICogYHYtdmFsaWRhdGVgIGRpcmVjdGl2ZVxuICAgICAqL1xuXG4gICAgVnVlLmRpcmVjdGl2ZSgndmFsaWRhdGUnLCB7XG4gICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgIHByaW9yaXR5OiB2SWYucHJpb3JpdHkgKyBQUklPUklUWV9WQUxJREFURSxcbiAgICAgIHBhcmFtczogWydncm91cCcsICdmaWVsZCcsICdkZXRlY3QtYmx1cicsICdkZXRlY3QtY2hhbmdlJywgJ2luaXRpYWwnLCAnY2xhc3NlcyddLFxuXG4gICAgICBwYXJhbVdhdGNoZXJzOiB7XG4gICAgICAgIGRldGVjdEJsdXI6IGZ1bmN0aW9uIGRldGVjdEJsdXIodmFsLCBvbGQpIHtcbiAgICAgICAgICBpZiAodGhpcy5faW52YWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnZhbGlkYXRpb24uZGV0ZWN0Qmx1ciA9IHRoaXMuaXNEZXRlY3RCbHVyKHZhbCk7XG4gICAgICAgICAgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUodGhpcy5maWVsZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRldGVjdENoYW5nZTogZnVuY3Rpb24gZGV0ZWN0Q2hhbmdlKHZhbCwgb2xkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2ludmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy52YWxpZGF0aW9uLmRldGVjdENoYW5nZSA9IHRoaXMuaXNEZXRlY3RDaGFuZ2UodmFsKTtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZSh0aGlzLmZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgICAgICBpZiAoJ2RldmVsb3BtZW50JyAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVsLl9fdnVlX18pIHtcbiAgICAgICAgICB3YXJuKCd2LXZhbGlkYXRlPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgdXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJyk7XG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiAoZWwuaGFzQXR0cmlidXRlKCd2LWlmJykgfHwgZWwuaGFzQXR0cmlidXRlKCd2LWZvcicpKSkge1xuICAgICAgICAgIHdhcm4oJ3YtdmFsaWRhdGUgY2Fubm90IGJlIHVzZWQgYHYtaWZgIG9yIGB2LWZvcmAgYnVpbGQtaW4gdGVybWluYWwgZGlyZWN0aXZlICcgKyAnb24gYW4gZWxlbWVudC4gdGhlc2UgaXMgd3JhcHBlZCB3aXRoIGA8dGVtcGxhdGU+YCBvciBvdGhlciB0YWdzOiAnICsgJyhlLmcuIDx2YWxpZGF0b3IgbmFtZT1cInZhbGlkYXRvclwiPicgKyAnPHRlbXBsYXRlIHYtaWY9XCJoaWRkZW5cIj4nICsgJzxpbnB1dCB0eXBlPVwidGV4dFwiIHYtdmFsaWRhdGU6ZmllbGQxPVwiW1xcJ3JlcXVpcmVkXFwnXVwiPicgKyAnPC90ZW1wbGF0ZT4nICsgJzwvdmFsaWRhdG9yPikuJyk7XG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiAhKHRoaXMuYXJnIHx8IHRoaXMucGFyYW1zLmZpZWxkKSkge1xuICAgICAgICAgIHdhcm4oJ3lvdSBuZWVkIHNwZWNpZnkgZmllbGQgbmFtZSBmb3Igdi12YWxpZGF0ZSBkaXJlY3RpdmUuJyk7XG4gICAgICAgICAgdGhpcy5faW52YWxpZCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZhbGlkYXRvck5hbWUgPSB0aGlzLnZtLiRvcHRpb25zLl92YWxpZGF0b3I7XG4gICAgICAgIGlmICgnZGV2ZWxvcG1lbnQnICE9PSAncHJvZHVjdGlvbicgJiYgIXZhbGlkYXRvck5hbWUpIHtcbiAgICAgICAgICB3YXJuKCd5b3UgbmVlZCB0byB3cmFwIHRoZSBlbGVtZW50cyB0byBiZSB2YWxpZGF0ZWQgaW4gYSA8dmFsaWRhdG9yPiBlbGVtZW50OiAnICsgJyhlLmcuIDx2YWxpZGF0b3IgbmFtZT1cInZhbGlkYXRvclwiPicgKyAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdi12YWxpZGF0ZTpmaWVsZDE9XCJbXFwncmVxdWlyZWRcXCddXCI+JyArICc8L3ZhbGlkYXRvcj4pLicpO1xuICAgICAgICAgIHRoaXMuX2ludmFsaWQgPSB0cnVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByYXcgPSBlbC5nZXRBdHRyaWJ1dGUoJ3YtbW9kZWwnKTtcblxuICAgICAgICB2YXIgX3BhcnNlTW9kZWxSYXcgPSB0aGlzLnBhcnNlTW9kZWxSYXcocmF3KTtcblxuICAgICAgICB2YXIgbW9kZWwgPSBfcGFyc2VNb2RlbFJhdy5tb2RlbDtcbiAgICAgICAgdmFyIGZpbHRlcnMgPSBfcGFyc2VNb2RlbFJhdy5maWx0ZXJzO1xuXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcblxuICAgICAgICB0aGlzLnNldHVwRnJhZ21lbnQoKTtcbiAgICAgICAgdGhpcy5zZXR1cFZhbGlkYXRlKHZhbGlkYXRvck5hbWUsIG1vZGVsLCBmaWx0ZXJzKTtcbiAgICAgICAgdGhpcy5saXN0ZW4oKTtcbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgb2xkKSB7XG4gICAgICAgIGlmICghdmFsdWUgfHwgdGhpcy5faW52YWxpZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuaGFuZGxlQXJyYXkodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7IGZpZWxkOiB0aGlzLmZpZWxkLCBub29wYWJsZTogdGhpcy5faW5pdGlhbE5vb3BWYWxpZGF0aW9uIH07XG4gICAgICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgICAgICBvcHRpb25zLmVsID0gdGhpcy5mcmFnLm5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUob3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxOb29wVmFsaWRhdGlvbikge1xuICAgICAgICAgIHRoaXMuX2luaXRpYWxOb29wVmFsaWRhdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ludmFsaWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVubGlzdGVuKCk7XG4gICAgICAgIHRoaXMudGVhcmRvd25WYWxpZGF0ZSgpO1xuICAgICAgICB0aGlzLnRlYXJkb3duRnJhZ21lbnQoKTtcblxuICAgICAgICB0aGlzLm1vZGVsID0gbnVsbDtcbiAgICAgIH0sXG4gICAgICBwYXJzZU1vZGVsUmF3OiBmdW5jdGlvbiBwYXJzZU1vZGVsUmF3KHJhdykge1xuICAgICAgICBpZiAoUkVHRVhfRklMVEVSLnRlc3QocmF3KSkge1xuICAgICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShyYXcpO1xuICAgICAgICAgIHJldHVybiB7IG1vZGVsOiBwYXJzZWQuZXhwcmVzc2lvbiwgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyBtb2RlbDogcmF3IH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzZXR1cFZhbGlkYXRlOiBmdW5jdGlvbiBzZXR1cFZhbGlkYXRlKG5hbWUsIG1vZGVsLCBmaWx0ZXJzKSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgICAgICAgdmFyIHZhbGlkYXRvciA9IHRoaXMudmFsaWRhdG9yID0gdGhpcy52bS5fdmFsaWRhdG9yTWFwc1tuYW1lXTtcblxuICAgICAgICB0aGlzLmZpZWxkID0gY2FtZWxpemUodGhpcy5hcmcgPyB0aGlzLmFyZyA6IHBhcmFtcy5maWVsZCk7XG5cbiAgICAgICAgdGhpcy52YWxpZGF0aW9uID0gdmFsaWRhdG9yLm1hbmFnZVZhbGlkYXRpb24odGhpcy5maWVsZCwgbW9kZWwsIHRoaXMudm0sIHRoaXMuZ2V0RWxlbWVudEZyb20odGhpcy5mcmFnKSwgdGhpcy5fc2NvcGUsIGZpbHRlcnMsIHBhcmFtcy5pbml0aWFsLCB0aGlzLmlzRGV0ZWN0Qmx1cihwYXJhbXMuZGV0ZWN0Qmx1ciksIHRoaXMuaXNEZXRlY3RDaGFuZ2UocGFyYW1zLmRldGVjdENoYW5nZSkpO1xuXG4gICAgICAgIGlzUGxhaW5PYmplY3QocGFyYW1zLmNsYXNzZXMpICYmIHRoaXMudmFsaWRhdGlvbi5zZXRWYWxpZGF0aW9uQ2xhc3NlcyhwYXJhbXMuY2xhc3Nlcyk7XG5cbiAgICAgICAgcGFyYW1zLmdyb3VwICYmIHZhbGlkYXRvci5hZGRHcm91cFZhbGlkYXRpb24ocGFyYW1zLmdyb3VwLCB0aGlzLmZpZWxkKTtcblxuICAgICAgICB0aGlzLl9pbml0aWFsTm9vcFZhbGlkYXRpb24gPSB0aGlzLmlzSW5pdGlhbE5vb3BWYWxpZGF0aW9uKHBhcmFtcy5pbml0aWFsKTtcbiAgICAgIH0sXG4gICAgICBsaXN0ZW46IGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICAgICAgdmFyIG1vZGVsID0gdGhpcy5tb2RlbDtcbiAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRpb247XG4gICAgICAgIHZhciBlbCA9IHRoaXMuZ2V0RWxlbWVudEZyb20odGhpcy5mcmFnKTtcblxuICAgICAgICB0aGlzLm9uQmx1ciA9IGJpbmQodmFsaWRhdGlvbi5saXN0ZW5lciwgdmFsaWRhdGlvbik7XG4gICAgICAgIG9uKGVsLCAnYmx1cicsIHRoaXMub25CbHVyKTtcbiAgICAgICAgaWYgKChlbC50eXBlID09PSAncmFkaW8nIHx8IGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnKSAmJiAhbW9kZWwpIHtcbiAgICAgICAgICB0aGlzLm9uQ2hhbmdlID0gYmluZCh2YWxpZGF0aW9uLmxpc3RlbmVyLCB2YWxpZGF0aW9uKTtcbiAgICAgICAgICBvbihlbCwgJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsLnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICBpZiAoIW1vZGVsKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlID0gYmluZCh2YWxpZGF0aW9uLmxpc3RlbmVyLCB2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIG9uKGVsLCAnY2hhbmdlJywgdGhpcy5vbkNoYW5nZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25DbGljayA9IGJpbmQodmFsaWRhdGlvbi5saXN0ZW5lciwgdmFsaWRhdGlvbik7XG4gICAgICAgICAgICBvbihlbCwgJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFtb2RlbCkge1xuICAgICAgICAgICAgdGhpcy5vbklucHV0ID0gYmluZCh2YWxpZGF0aW9uLmxpc3RlbmVyLCB2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIG9uKGVsLCAnaW5wdXQnLCB0aGlzLm9uSW5wdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVubGlzdGVuOiBmdW5jdGlvbiB1bmxpc3RlbigpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5nZXRFbGVtZW50RnJvbSh0aGlzLmZyYWcpO1xuXG4gICAgICAgIGlmICh0aGlzLm9uSW5wdXQpIHtcbiAgICAgICAgICBvZmYoZWwsICdpbnB1dCcsIHRoaXMub25JbnB1dCk7XG4gICAgICAgICAgdGhpcy5vbklucHV0ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9uQ2xpY2spIHtcbiAgICAgICAgICBvZmYoZWwsICdjbGljaycsIHRoaXMub25DbGljayk7XG4gICAgICAgICAgdGhpcy5vbkNsaWNrID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgb2ZmKGVsLCAnY2hhbmdlJywgdGhpcy5vbkNoYW5nZSk7XG4gICAgICAgICAgdGhpcy5vbkNoYW5nZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vbkJsdXIpIHtcbiAgICAgICAgICBvZmYoZWwsICdibHVyJywgdGhpcy5vbkJsdXIpO1xuICAgICAgICAgIHRoaXMub25CbHVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRlYXJkb3duVmFsaWRhdGU6IGZ1bmN0aW9uIHRlYXJkb3duVmFsaWRhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRvciAmJiB0aGlzLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICB2YXIgZWwgPSB0aGlzLmdldEVsZW1lbnRGcm9tKHRoaXMuZnJhZyk7XG5cbiAgICAgICAgICB0aGlzLnBhcmFtcy5ncm91cCAmJiB0aGlzLnZhbGlkYXRvci5yZW1vdmVHcm91cFZhbGlkYXRpb24odGhpcy5wYXJhbXMuZ3JvdXAsIHRoaXMuZmllbGQpO1xuXG4gICAgICAgICAgdGhpcy52YWxpZGF0b3IudW5tYW5hZ2VWYWxpZGF0aW9uKHRoaXMuZmllbGQsIGVsKTtcblxuICAgICAgICAgIHRoaXMudmFsaWRhdG9yID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRpb24gPSBudWxsO1xuICAgICAgICAgIHRoaXMuZmllbGQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0dXBGcmFnbWVudDogZnVuY3Rpb24gc2V0dXBGcmFnbWVudCgpIHtcbiAgICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtdmFsaWRhdGUnKTtcbiAgICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLnNoaW1Ob2RlKHRoaXMuZWwpKTtcbiAgICAgICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICAgICAgfSxcbiAgICAgIHRlYXJkb3duRnJhZ21lbnQ6IGZ1bmN0aW9uIHRlYXJkb3duRnJhZ21lbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG4gICAgICAgICAgdGhpcy5mcmFnID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmZhY3RvcnkgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwbGFjZSh0aGlzLmFuY2hvciwgdGhpcy5lbCk7XG4gICAgICAgIHRoaXMuYW5jaG9yID0gbnVsbDtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVBcnJheTogZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBlYWNoKHZhbHVlLCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgX3RoaXMudmFsaWRhdGlvbi5zZXRWYWxpZGF0aW9uKHZhbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gaGFuZGxlT2JqZWN0KHZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIGVhY2godmFsdWUsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgICAgICAgIGlmICgncnVsZScgaW4gdmFsKSB7XG4gICAgICAgICAgICAgIHZhciBtc2cgPSAnbWVzc2FnZScgaW4gdmFsID8gdmFsLm1lc3NhZ2UgOiBudWxsO1xuICAgICAgICAgICAgICB2YXIgaW5pdGlhbCA9ICdpbml0aWFsJyBpbiB2YWwgPyB2YWwuaW5pdGlhbCA6IG51bGw7XG4gICAgICAgICAgICAgIF90aGlzMi52YWxpZGF0aW9uLnNldFZhbGlkYXRpb24oa2V5LCB2YWwucnVsZSwgbXNnLCBpbml0aWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMyLnZhbGlkYXRpb24uc2V0VmFsaWRhdGlvbihrZXksIHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBpc0RldGVjdEJsdXI6IGZ1bmN0aW9uIGlzRGV0ZWN0Qmx1cihkZXRlY3RCbHVyKSB7XG4gICAgICAgIHJldHVybiBkZXRlY3RCbHVyID09PSB1bmRlZmluZWQgfHwgZGV0ZWN0Qmx1ciA9PT0gJ29uJyB8fCBkZXRlY3RCbHVyID09PSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGlzRGV0ZWN0Q2hhbmdlOiBmdW5jdGlvbiBpc0RldGVjdENoYW5nZShkZXRlY3RDaGFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGRldGVjdENoYW5nZSA9PT0gdW5kZWZpbmVkIHx8IGRldGVjdENoYW5nZSA9PT0gJ29uJyB8fCBkZXRlY3RDaGFuZ2UgPT09IHRydWU7XG4gICAgICB9LFxuICAgICAgaXNJbml0aWFsTm9vcFZhbGlkYXRpb246IGZ1bmN0aW9uIGlzSW5pdGlhbE5vb3BWYWxpZGF0aW9uKGluaXRpYWwpIHtcbiAgICAgICAgcmV0dXJuIGluaXRpYWwgPT09ICdvZmYnIHx8IGluaXRpYWwgPT09IGZhbHNlO1xuICAgICAgfSxcbiAgICAgIHNoaW1Ob2RlOiBmdW5jdGlvbiBzaGltTm9kZShub2RlKSB7XG4gICAgICAgIHZhciByZXQgPSBub2RlO1xuICAgICAgICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgICAgIHJldCA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgcmV0LnZhbHVlID0gbm9kZS52YWx1ZTtcbiAgICAgICAgICAgIHZhciBpID0gcmV0LmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICByZXQucmVtb3ZlQ2hpbGQocmV0LmNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfSxcbiAgICAgIGdldEVsZW1lbnRGcm9tOiBmdW5jdGlvbiBnZXRFbGVtZW50RnJvbShmcmFnKSB7XG4gICAgICAgIHJldHVybiBmcmFnLnNpbmdsZSA/IGZyYWcubm9kZSA6IGZyYWcubm9kZS5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCYXNlVmFsaWRhdGlvbiBjbGFzc1xuICAgKi9cblxuICB2YXIgQmFzZVZhbGlkYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmFzZVZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCB2YWxpZGF0b3IsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VWYWxpZGF0aW9uKTtcblxuICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgdGhpcy50b3VjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgICB0aGlzLm1vZGlmaWVkID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX21vZGlmaWVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9tb2RlbCA9IG1vZGVsO1xuICAgICAgdGhpcy5fZmlsdGVycyA9IGZpbHRlcnM7XG4gICAgICB0aGlzLl92YWxpZGF0b3IgPSB2YWxpZGF0b3I7XG4gICAgICB0aGlzLl92bSA9IHZtO1xuICAgICAgdGhpcy5fZWwgPSBlbDtcbiAgICAgIHRoaXMuX2ZvclNjb3BlID0gc2NvcGU7XG4gICAgICB0aGlzLl9pbml0ID0gdGhpcy5fZ2V0VmFsdWUoZWwpO1xuICAgICAgdGhpcy5fdmFsaWRhdG9ycyA9IHt9O1xuICAgICAgdGhpcy5fZGV0ZWN0Qmx1ciA9IGRldGVjdEJsdXI7XG4gICAgICB0aGlzLl9kZXRlY3RDaGFuZ2UgPSBkZXRlY3RDaGFuZ2U7XG4gICAgICB0aGlzLl9jbGFzc2VzID0ge307XG4gICAgfVxuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLm1hbmFnZUVsZW1lbnQgPSBmdW5jdGlvbiBtYW5hZ2VFbGVtZW50KGVsLCBpbml0aWFsKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgc2NvcGUgPSB0aGlzLl9nZXRTY29wZSgpO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5fbW9kZWw7XG5cbiAgICAgIHRoaXMuX2luaXRpYWwgPSBpbml0aWFsO1xuXG4gICAgICB2YXIgY2xhc3NJZHMgPSBlbC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcbiAgICAgIGlmIChjbGFzc0lkcykge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcbiAgICAgICAgdGhpcy5fY2xhc3NJZHMgPSBjbGFzc0lkcy5zcGxpdCgnLCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgZWwudmFsdWUgPSB0aGlzLl9ldmFsTW9kZWwobW9kZWwsIHRoaXMuX2ZpbHRlcnMpO1xuICAgICAgICB0aGlzLl91bndhdGNoID0gc2NvcGUuJHdhdGNoKG1vZGVsLCBmdW5jdGlvbiAodmFsLCBvbGQpIHtcbiAgICAgICAgICBpZiAodmFsICE9PSBvbGQpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5ndWFyZFZhbGlkYXRlKGVsLCAnaW5wdXQnKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVZhbGlkYXRlKGVsLCB7IG5vb3BhYmxlOiBfdGhpcy5faW5pdGlhbCB9KTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5faW5pdGlhbCkge1xuICAgICAgICAgICAgICBfdGhpcy5faW5pdGlhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCB7IGRlZXA6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS51bm1hbmFnZUVsZW1lbnQgPSBmdW5jdGlvbiB1bm1hbmFnZUVsZW1lbnQoZWwpIHtcbiAgICAgIHRoaXMuX3Vud2F0Y2ggJiYgdGhpcy5fdW53YXRjaCgpO1xuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuc2V0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIHNldFZhbGlkYXRpb24obmFtZSwgYXJnLCBtc2csIGluaXRpYWwpIHtcbiAgICAgIHZhciB2YWxpZGF0b3IgPSB0aGlzLl92YWxpZGF0b3JzW25hbWVdO1xuICAgICAgaWYgKCF2YWxpZGF0b3IpIHtcbiAgICAgICAgdmFsaWRhdG9yID0gdGhpcy5fdmFsaWRhdG9yc1tuYW1lXSA9IHt9O1xuICAgICAgICB2YWxpZGF0b3IubmFtZSA9IG5hbWU7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRvci5hcmcgPSBhcmc7XG4gICAgICBpZiAobXNnKSB7XG4gICAgICAgIHZhbGlkYXRvci5tc2cgPSBtc2c7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHZhbGlkYXRvci5pbml0aWFsID0gaW5pdGlhbDtcbiAgICAgICAgdmFsaWRhdG9yLl9pc05vb3BhYmxlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLnNldFZhbGlkYXRpb25DbGFzc2VzID0gZnVuY3Rpb24gc2V0VmFsaWRhdGlvbkNsYXNzZXMoY2xhc3Nlcykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGVhY2goY2xhc3NlcywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgX3RoaXMyLl9jbGFzc2VzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZUZsYWdzID0gZnVuY3Rpb24gd2lsbFVwZGF0ZUZsYWdzKCkge1xuICAgICAgdmFyIHRvdWNoZWQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgdG91Y2hlZCAmJiB0aGlzLndpbGxVcGRhdGVUb3VjaGVkKHRoaXMuX2VsLCAnYmx1cicpO1xuICAgICAgdGhpcy53aWxsVXBkYXRlRGlydHkodGhpcy5fZWwpO1xuICAgICAgdGhpcy53aWxsVXBkYXRlTW9kaWZpZWQodGhpcy5fZWwpO1xuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZVRvdWNoZWQgPSBmdW5jdGlvbiB3aWxsVXBkYXRlVG91Y2hlZChlbCwgdHlwZSkge1xuICAgICAgaWYgKHR5cGUgJiYgdHlwZSA9PT0gJ2JsdXInKSB7XG4gICAgICAgIHRoaXMudG91Y2hlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudChlbCwgJ3RvdWNoZWQnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLndpbGxVcGRhdGVEaXJ0eSA9IGZ1bmN0aW9uIHdpbGxVcGRhdGVEaXJ0eShlbCkge1xuICAgICAgaWYgKCF0aGlzLmRpcnR5ICYmIHRoaXMuX2NoZWNrTW9kaWZpZWQoZWwpKSB7XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9maXJlRXZlbnQoZWwsICdkaXJ0eScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZU1vZGlmaWVkID0gZnVuY3Rpb24gd2lsbFVwZGF0ZU1vZGlmaWVkKGVsKSB7XG4gICAgICB0aGlzLm1vZGlmaWVkID0gdGhpcy5fY2hlY2tNb2RpZmllZChlbCk7XG4gICAgICBpZiAodGhpcy5fbW9kaWZpZWQgIT09IHRoaXMubW9kaWZpZWQpIHtcbiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KGVsLCAnbW9kaWZpZWQnLCB7IG1vZGlmaWVkOiB0aGlzLm1vZGlmaWVkIH0pO1xuICAgICAgICB0aGlzLl9tb2RpZmllZCA9IHRoaXMubW9kaWZpZWQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5saXN0ZW5lciA9IGZ1bmN0aW9uIGxpc3RlbmVyKGUpIHtcbiAgICAgIGlmICh0aGlzLmd1YXJkVmFsaWRhdGUoZS50YXJnZXQsIGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmhhbmRsZVZhbGlkYXRlKGUudGFyZ2V0LCB7IHR5cGU6IGUudHlwZSB9KTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLmhhbmRsZVZhbGlkYXRlID0gZnVuY3Rpb24gaGFuZGxlVmFsaWRhdGUoZWwpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cbiAgICAgIHZhciBfcmVmJHR5cGUgPSBfcmVmLnR5cGU7XG4gICAgICB2YXIgdHlwZSA9IF9yZWYkdHlwZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkdHlwZTtcbiAgICAgIHZhciBfcmVmJG5vb3BhYmxlID0gX3JlZi5ub29wYWJsZTtcbiAgICAgIHZhciBub29wYWJsZSA9IF9yZWYkbm9vcGFibGUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRub29wYWJsZTtcblxuICAgICAgdGhpcy53aWxsVXBkYXRlVG91Y2hlZChlbCwgdHlwZSk7XG4gICAgICB0aGlzLndpbGxVcGRhdGVEaXJ0eShlbCk7XG4gICAgICB0aGlzLndpbGxVcGRhdGVNb2RpZmllZChlbCk7XG5cbiAgICAgIHRoaXMuX3ZhbGlkYXRvci52YWxpZGF0ZSh7IGZpZWxkOiB0aGlzLmZpZWxkLCBlbDogZWwsIG5vb3BhYmxlOiBub29wYWJsZSB9KTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoY2IpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgbm9vcGFibGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1sxXTtcbiAgICAgIHZhciBlbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMl07XG5cbiAgICAgIHZhciBfID0gZXhwb3J0cyQxLlZ1ZS51dGlsO1xuXG4gICAgICB2YXIgcmVzdWx0cyA9IHt9O1xuICAgICAgdmFyIGVycm9ycyA9IFtdO1xuICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcblxuICAgICAgdGhpcy5fcnVuVmFsaWRhdG9ycyhmdW5jdGlvbiAoZGVzY3JpcHRvciwgbmFtZSwgZG9uZSkge1xuICAgICAgICB2YXIgYXNzZXQgPSBfdGhpczMuX3Jlc29sdmVWYWxpZGF0b3IobmFtZSk7XG4gICAgICAgIHZhciB2YWxpZGF0b3IgPSBudWxsO1xuICAgICAgICB2YXIgbXNnID0gbnVsbDtcblxuICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGFzc2V0KSkge1xuICAgICAgICAgIGlmIChhc3NldC5jaGVjayAmJiB0eXBlb2YgYXNzZXQuY2hlY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZhbGlkYXRvciA9IGFzc2V0LmNoZWNrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXNzZXQubWVzc2FnZSkge1xuICAgICAgICAgICAgbXNnID0gYXNzZXQubWVzc2FnZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFsaWRhdG9yID0gYXNzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVzY3JpcHRvci5tc2cpIHtcbiAgICAgICAgICBtc2cgPSBkZXNjcmlwdG9yLm1zZztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub29wYWJsZSkge1xuICAgICAgICAgIHJlc3VsdHNbbmFtZV0gPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gZG9uZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlc2NyaXB0b3IuX2lzTm9vcGFibGUpIHtcbiAgICAgICAgICByZXN1bHRzW25hbWVdID0gZmFsc2U7XG4gICAgICAgICAgZGVzY3JpcHRvci5faXNOb29wYWJsZSA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpczMuX2dldFZhbHVlKF90aGlzMy5fZWwpO1xuICAgICAgICAgIF90aGlzMy5faW52b2tlVmFsaWRhdG9yKF90aGlzMy5fdm0sIHZhbGlkYXRvciwgdmFsdWUsIGRlc2NyaXB0b3IuYXJnLCBmdW5jdGlvbiAocmV0LCBlcnIpIHtcbiAgICAgICAgICAgIGlmICghcmV0KSB7XG4gICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBhc3luYyBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goeyB2YWxpZGF0b3I6IG5hbWUsIG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICByZXN1bHRzW25hbWVdID0gZXJyO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1zZykge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IHsgdmFsaWRhdG9yOiBuYW1lIH07XG4gICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IHR5cGVvZiBtc2cgPT09ICdmdW5jdGlvbicgPyBtc2cuY2FsbChfdGhpczMuX3ZtLCBfdGhpczMuZmllbGQsIGRlc2NyaXB0b3IuYXJnKSA6IG1zZztcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1tuYW1lXSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1tuYW1lXSA9ICFyZXQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlc3VsdHNbbmFtZV0gPSAhcmV0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGZpbmlzaGVkXG4gICAgICAgIF90aGlzMy5fZmlyZUV2ZW50KF90aGlzMy5fZWwsIHZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJyk7XG5cbiAgICAgICAgdmFyIHByb3BzID0ge1xuICAgICAgICAgIHZhbGlkOiB2YWxpZCxcbiAgICAgICAgICBpbnZhbGlkOiAhdmFsaWQsXG4gICAgICAgICAgdG91Y2hlZDogX3RoaXMzLnRvdWNoZWQsXG4gICAgICAgICAgdW50b3VjaGVkOiAhX3RoaXMzLnRvdWNoZWQsXG4gICAgICAgICAgZGlydHk6IF90aGlzMy5kaXJ0eSxcbiAgICAgICAgICBwcmlzdGluZTogIV90aGlzMy5kaXJ0eSxcbiAgICAgICAgICBtb2RpZmllZDogX3RoaXMzLm1vZGlmaWVkXG4gICAgICAgIH07XG4gICAgICAgIGlmICghZW1wdHkoZXJyb3JzKSkge1xuICAgICAgICAgIHByb3BzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgfVxuICAgICAgICBfLmV4dGVuZChyZXN1bHRzLCBwcm9wcyk7XG5cbiAgICAgICAgX3RoaXMzLndpbGxVcGRhdGVDbGFzc2VzKHJlc3VsdHMsIGVsKTtcblxuICAgICAgICBjYihyZXN1bHRzKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUucmVzZXRGbGFncyA9IGZ1bmN0aW9uIHJlc2V0RmxhZ3MoKSB7XG4gICAgICB0aGlzLnRvdWNoZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgIHRoaXMubW9kaWZpZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX21vZGlmaWVkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgZWFjaCh0aGlzLl92YWxpZGF0b3JzLCBmdW5jdGlvbiAoZGVzY3JpcHRvciwga2V5KSB7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yLmluaXRpYWwgJiYgIWRlc2NyaXB0b3IuX2lzTm9vcGFibGUpIHtcbiAgICAgICAgICBkZXNjcmlwdG9yLl9pc05vb3BhYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLnJlc2V0RmxhZ3MoKTtcbiAgICAgIHRoaXMuX2luaXQgPSB0aGlzLl9nZXRWYWx1ZSh0aGlzLl9lbCk7XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS53aWxsVXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIHdpbGxVcGRhdGVDbGFzc2VzKHJlc3VsdHMpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgZWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICBpZiAodGhpcy5fY2hlY2tDbGFzc0lkcyhlbCkpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgY2xhc3NJZHMgPSBfdGhpczQuX2dldENsYXNzSWRzKGVsKTtcbiAgICAgICAgICBfdGhpczQudm0uJG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzNC52bS4kZW1pdChWQUxJREFURV9VUERBVEUsIGNsYXNzSWRzLCBfdGhpczQsIHJlc3VsdHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUudXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocmVzdWx0cykge1xuICAgICAgdmFyIGVsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NlcyhlbCB8fCB0aGlzLl9lbCwgcmVzdWx0cyk7XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5ndWFyZFZhbGlkYXRlID0gZnVuY3Rpb24gZ3VhcmRWYWxpZGF0ZShlbCwgdHlwZSkge1xuICAgICAgaWYgKHR5cGUgJiYgdHlwZSA9PT0gJ2JsdXInICYmICF0aGlzLmRldGVjdEJsdXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlICYmIHR5cGUgPT09ICdpbnB1dCcgJiYgIXRoaXMuZGV0ZWN0Q2hhbmdlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZSAmJiB0eXBlID09PSAnY2hhbmdlJyAmJiAhdGhpcy5kZXRlY3RDaGFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlICYmIHR5cGUgPT09ICdjbGljaycgJiYgIXRoaXMuZGV0ZWN0Q2hhbmdlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fZ2V0VmFsdWUgPSBmdW5jdGlvbiBfZ2V0VmFsdWUoZWwpIHtcbiAgICAgIHJldHVybiBlbC52YWx1ZTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRTY29wZSA9IGZ1bmN0aW9uIF9nZXRTY29wZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9mb3JTY29wZSB8fCB0aGlzLl92bTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRDbGFzc0lkcyA9IGZ1bmN0aW9uIF9nZXRDbGFzc0lkcyhlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NsYXNzSWRzO1xuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuX2NoZWNrTW9kaWZpZWQgPSBmdW5jdGlvbiBfY2hlY2tNb2RpZmllZCh0YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbml0ICE9PSB0aGlzLl9nZXRWYWx1ZSh0YXJnZXQpO1xuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuX2NoZWNrQ2xhc3NJZHMgPSBmdW5jdGlvbiBfY2hlY2tDbGFzc0lkcyhlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldENsYXNzSWRzKGVsKTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9maXJlRXZlbnQgPSBmdW5jdGlvbiBfZmlyZUV2ZW50KGVsLCB0eXBlLCBhcmdzKSB7XG4gICAgICB0cmlnZ2VyKGVsLCB0eXBlLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9ldmFsTW9kZWwgPSBmdW5jdGlvbiBfZXZhbE1vZGVsKG1vZGVsLCBmaWx0ZXJzKSB7XG4gICAgICB2YXIgc2NvcGUgPSB0aGlzLl9nZXRTY29wZSgpO1xuXG4gICAgICB2YXIgdmFsID0gbnVsbDtcbiAgICAgIGlmIChmaWx0ZXJzKSB7XG4gICAgICAgIHZhbCA9IHNjb3BlLiRnZXQobW9kZWwpO1xuICAgICAgICByZXR1cm4gZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGZpbHRlcnMpIDogdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gc2NvcGUuJGdldChtb2RlbCk7XG4gICAgICAgIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwgPyAnJyA6IHZhbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl91cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gX3VwZGF0ZUNsYXNzZXMoZWwsIHJlc3VsdHMpIHtcbiAgICAgIHRoaXMuX3RvZ2dsZVZhbGlkKGVsLCByZXN1bHRzLnZhbGlkKTtcbiAgICAgIHRoaXMuX3RvZ2dsZVRvdWNoZWQoZWwsIHJlc3VsdHMudG91Y2hlZCk7XG4gICAgICB0aGlzLl90b2dnbGVQcmlzdGluZShlbCwgcmVzdWx0cy5wcmlzdGluZSk7XG4gICAgICB0aGlzLl90b2dnbGVNb2RmaWVkKGVsLCByZXN1bHRzLm1vZGlmaWVkKTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl90b2dnbGVWYWxpZCA9IGZ1bmN0aW9uIF90b2dnbGVWYWxpZChlbCwgdmFsaWQpIHtcbiAgICAgIHZhciBfdXRpbCRWdWUkdXRpbCA9IGV4cG9ydHMkMS5WdWUudXRpbDtcbiAgICAgIHZhciBhZGRDbGFzcyA9IF91dGlsJFZ1ZSR1dGlsLmFkZENsYXNzO1xuICAgICAgdmFyIHJlbW92ZUNsYXNzID0gX3V0aWwkVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XG5cbiAgICAgIHZhciB2YWxpZENsYXNzID0gdGhpcy5fY2xhc3Nlcy52YWxpZCB8fCAndmFsaWQnO1xuICAgICAgdmFyIGludmFsaWRDbGFzcyA9IHRoaXMuX2NsYXNzZXMuaW52YWxpZCB8fCAnaW52YWxpZCc7XG5cbiAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB2YWxpZENsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGludmFsaWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdmFsaWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBpbnZhbGlkQ2xhc3MsIGFkZENsYXNzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl90b2dnbGVUb3VjaGVkID0gZnVuY3Rpb24gX3RvZ2dsZVRvdWNoZWQoZWwsIHRvdWNoZWQpIHtcbiAgICAgIHZhciBfdXRpbCRWdWUkdXRpbDIgPSBleHBvcnRzJDEuVnVlLnV0aWw7XG4gICAgICB2YXIgYWRkQ2xhc3MgPSBfdXRpbCRWdWUkdXRpbDIuYWRkQ2xhc3M7XG4gICAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfdXRpbCRWdWUkdXRpbDIucmVtb3ZlQ2xhc3M7XG5cbiAgICAgIHZhciB0b3VjaGVkQ2xhc3MgPSB0aGlzLl9jbGFzc2VzLnRvdWNoZWQgfHwgJ3RvdWNoZWQnO1xuICAgICAgdmFyIHVudG91Y2hlZENsYXNzID0gdGhpcy5fY2xhc3Nlcy51bnRvdWNoZWQgfHwgJ3VudG91Y2hlZCc7XG5cbiAgICAgIGlmICh0b3VjaGVkKSB7XG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHRvdWNoZWRDbGFzcywgYWRkQ2xhc3MpO1xuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB1bnRvdWNoZWRDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdG91Y2hlZENsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHVudG91Y2hlZENsYXNzLCBhZGRDbGFzcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2VWYWxpZGF0aW9uLnByb3RvdHlwZS5fdG9nZ2xlUHJpc3RpbmUgPSBmdW5jdGlvbiBfdG9nZ2xlUHJpc3RpbmUoZWwsIHByaXN0aW5lKSB7XG4gICAgICB2YXIgX3V0aWwkVnVlJHV0aWwzID0gZXhwb3J0cyQxLlZ1ZS51dGlsO1xuICAgICAgdmFyIGFkZENsYXNzID0gX3V0aWwkVnVlJHV0aWwzLmFkZENsYXNzO1xuICAgICAgdmFyIHJlbW92ZUNsYXNzID0gX3V0aWwkVnVlJHV0aWwzLnJlbW92ZUNsYXNzO1xuXG4gICAgICB2YXIgcHJpc3RpbmVDbGFzcyA9IHRoaXMuX2NsYXNzZXMucHJpc3RpbmUgfHwgJ3ByaXN0aW5lJztcbiAgICAgIHZhciBkaXJ0eUNsYXNzID0gdGhpcy5fY2xhc3Nlcy5kaXJ0eSB8fCAnZGlydHknO1xuXG4gICAgICBpZiAocHJpc3RpbmUpIHtcbiAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgcHJpc3RpbmVDbGFzcywgYWRkQ2xhc3MpO1xuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBkaXJ0eUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBwcmlzdGluZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGRpcnR5Q2xhc3MsIGFkZENsYXNzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl90b2dnbGVNb2RmaWVkID0gZnVuY3Rpb24gX3RvZ2dsZU1vZGZpZWQoZWwsIG1vZGlmaWVkKSB7XG4gICAgICB2YXIgX3V0aWwkVnVlJHV0aWw0ID0gZXhwb3J0cyQxLlZ1ZS51dGlsO1xuICAgICAgdmFyIGFkZENsYXNzID0gX3V0aWwkVnVlJHV0aWw0LmFkZENsYXNzO1xuICAgICAgdmFyIHJlbW92ZUNsYXNzID0gX3V0aWwkVnVlJHV0aWw0LnJlbW92ZUNsYXNzO1xuXG4gICAgICB2YXIgbW9kaWZpZWRDbGFzcyA9IHRoaXMuX2NsYXNzZXMubW9kaWZpZWQgfHwgJ21vZGlmaWVkJztcblxuICAgICAgaWYgKG1vZGlmaWVkKSB7XG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIG1vZGlmaWVkQ2xhc3MsIGFkZENsYXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIG1vZGlmaWVkQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiBfYXBwbHlGaWx0ZXJzKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgICAgIHZhciByZXNvbHZlQXNzZXQgPSBleHBvcnRzJDEuVnVlLnV0aWwucmVzb2x2ZUFzc2V0O1xuICAgICAgdmFyIHNjb3BlID0gdGhpcy5fZ2V0U2NvcGUoKTtcblxuICAgICAgdmFyIGZpbHRlciA9IHZvaWQgMCxcbiAgICAgICAgICBmbiA9IHZvaWQgMCxcbiAgICAgICAgICBhcmdzID0gdm9pZCAwLFxuICAgICAgICAgIGFyZyA9IHZvaWQgMCxcbiAgICAgICAgICBvZmZzZXQgPSB2b2lkIDAsXG4gICAgICAgICAgaSA9IHZvaWQgMCxcbiAgICAgICAgICBsID0gdm9pZCAwLFxuICAgICAgICAgIGogPSB2b2lkIDAsXG4gICAgICAgICAgayA9IHZvaWQgMDtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBmaWx0ZXIgPSBmaWx0ZXJzW2ldO1xuICAgICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLl92bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXIubmFtZSk7XG4gICAgICAgIGlmICghZm4pIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcbiAgICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcbiAgICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG4gICAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG4gICAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyBzY29wZS4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLl92bSwgYXJncyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9ydW5WYWxpZGF0b3JzID0gZnVuY3Rpb24gX3J1blZhbGlkYXRvcnMoZm4sIGNiKSB7XG4gICAgICB2YXIgdmFsaWRhdG9ycyA9IHRoaXMuX3ZhbGlkYXRvcnM7XG4gICAgICB2YXIgbGVuZ3RoID0gT2JqZWN0LmtleXModmFsaWRhdG9ycykubGVuZ3RoO1xuXG4gICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgZWFjaCh2YWxpZGF0b3JzLCBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbmFtZSkge1xuICAgICAgICBmbihkZXNjcmlwdG9yLCBuYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgKytjb3VudDtcbiAgICAgICAgICBjb3VudCA+PSBsZW5ndGggJiYgY2IoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgQmFzZVZhbGlkYXRpb24ucHJvdG90eXBlLl9pbnZva2VWYWxpZGF0b3IgPSBmdW5jdGlvbiBfaW52b2tlVmFsaWRhdG9yKHZtLCB2YWxpZGF0b3IsIHZhbCwgYXJnLCBjYikge1xuICAgICAgdmFyIGZ1dHVyZSA9IHZhbGlkYXRvci5jYWxsKHRoaXMsIHZhbCwgYXJnKTtcbiAgICAgIGlmICh0eXBlb2YgZnV0dXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIGZ1bmN0aW9uXG4gICAgICAgIGZ1dHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gcmVzb2x2ZVxuICAgICAgICAgIGNiKHRydWUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgLy8gcmVqZWN0XG4gICAgICAgICAgY2IoZmFsc2UsIG1zZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UoZnV0dXJlKSkge1xuICAgICAgICAvLyBwcm9taXNlXG4gICAgICAgIGZ1dHVyZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyByZXNvbHZlXG4gICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAvLyByZWplY3RcbiAgICAgICAgICBjYihmYWxzZSwgbXNnKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKGZhbHNlLCBlcnIubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3luY1xuICAgICAgICBjYihmdXR1cmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlVmFsaWRhdGlvbi5wcm90b3R5cGUuX3Jlc29sdmVWYWxpZGF0b3IgPSBmdW5jdGlvbiBfcmVzb2x2ZVZhbGlkYXRvcihuYW1lKSB7XG4gICAgICB2YXIgcmVzb2x2ZUFzc2V0ID0gZXhwb3J0cyQxLlZ1ZS51dGlsLnJlc29sdmVBc3NldDtcbiAgICAgIHJldHVybiByZXNvbHZlQXNzZXQodGhpcy5fdm0uJG9wdGlvbnMsICd2YWxpZGF0b3JzJywgbmFtZSk7XG4gICAgfTtcblxuICAgIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyhCYXNlVmFsaWRhdGlvbiwgW3tcbiAgICAgIGtleTogJ3ZtJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdm07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZWwnLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdkZXRlY3RDaGFuZ2UnLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXRlY3RDaGFuZ2U7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICAgIHRoaXMuX2RldGVjdENoYW5nZSA9IHZhbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdkZXRlY3RCbHVyJyxcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGV0ZWN0Qmx1cjtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgICAgdGhpcy5fZGV0ZWN0Qmx1ciA9IHZhbDtcbiAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIEJhc2VWYWxpZGF0aW9uO1xuICB9KCk7XG5cbiAgLyoqXG4gICAqIENoZWNrYm94VmFsaWRhdGlvbiBjbGFzc1xuICAgKi9cblxuICB2YXIgQ2hlY2tib3hWYWxpZGF0aW9uID0gZnVuY3Rpb24gKF9CYXNlVmFsaWRhdGlvbikge1xuICAgIGJhYmVsSGVscGVycy5pbmhlcml0cyhDaGVja2JveFZhbGlkYXRpb24sIF9CYXNlVmFsaWRhdGlvbik7XG5cbiAgICBmdW5jdGlvbiBDaGVja2JveFZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCB2YWxpZGF0b3IsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIENoZWNrYm94VmFsaWRhdGlvbik7XG5cbiAgICAgIHZhciBfdGhpcyA9IGJhYmVsSGVscGVycy5wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlVmFsaWRhdGlvbi5jYWxsKHRoaXMsIGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdmFsaWRhdG9yLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpKTtcblxuICAgICAgX3RoaXMuX2luaXRzID0gW107XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgQ2hlY2tib3hWYWxpZGF0aW9uLnByb3RvdHlwZS5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gbWFuYWdlRWxlbWVudChlbCwgaW5pdGlhbCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX2dldFNjb3BlKCk7XG4gICAgICB2YXIgaXRlbSA9IHRoaXMuX2FkZEl0ZW0oZWwsIGluaXRpYWwpO1xuXG4gICAgICB2YXIgbW9kZWwgPSBpdGVtLm1vZGVsID0gdGhpcy5fbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fZXZhbE1vZGVsKG1vZGVsLCB0aGlzLl9maWx0ZXJzKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy5fc2V0Q2hlY2tlZCh2YWx1ZSwgaXRlbS5lbCk7XG4gICAgICAgICAgaXRlbS51bndhdGNoID0gc2NvcGUuJHdhdGNoKG1vZGVsLCBmdW5jdGlvbiAodmFsLCBvbGQpIHtcbiAgICAgICAgICAgIGlmICh2YWwgIT09IG9sZCkge1xuICAgICAgICAgICAgICBpZiAoX3RoaXMyLmd1YXJkVmFsaWRhdGUoaXRlbS5lbCwgJ2NoYW5nZScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3RoaXMyLmhhbmRsZVZhbGlkYXRlKGl0ZW0uZWwsIHsgbm9vcGFibGU6IGl0ZW0uaW5pdGlhbCB9KTtcbiAgICAgICAgICAgICAgaWYgKGl0ZW0uaW5pdGlhbCkge1xuICAgICAgICAgICAgICAgIGl0ZW0uaW5pdGlhbCA9IG51bGw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5jaGVja2VkID0gdmFsdWUgfHwgZmFsc2U7XG4gICAgICAgICAgdGhpcy5faW5pdCA9IGVsLmNoZWNrZWQ7XG4gICAgICAgICAgaXRlbS5pbml0ID0gZWwuY2hlY2tlZDtcbiAgICAgICAgICBpdGVtLnZhbHVlID0gZWwudmFsdWU7XG4gICAgICAgICAgaXRlbS51bndhdGNoID0gc2NvcGUuJHdhdGNoKG1vZGVsLCBmdW5jdGlvbiAodmFsLCBvbGQpIHtcbiAgICAgICAgICAgIGlmICh2YWwgIT09IG9sZCkge1xuICAgICAgICAgICAgICBpZiAoX3RoaXMyLmd1YXJkVmFsaWRhdGUoZWwsICdjaGFuZ2UnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIF90aGlzMi5oYW5kbGVWYWxpZGF0ZShlbCwgeyBub29wYWJsZTogaXRlbS5pbml0aWFsIH0pO1xuICAgICAgICAgICAgICBpZiAoaXRlbS5pbml0aWFsKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5pbml0aWFsID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHsgZmllbGQ6IHRoaXMuZmllbGQsIG5vb3BhYmxlOiBpbml0aWFsIH07XG4gICAgICAgIGlmICh0aGlzLl9jaGVja0NsYXNzSWRzKGVsKSkge1xuICAgICAgICAgIG9wdGlvbnMuZWwgPSBlbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92YWxpZGF0b3IudmFsaWRhdGUob3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUudW5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gdW5tYW5hZ2VFbGVtZW50KGVsKSB7XG4gICAgICB2YXIgZm91bmQgPSAtMTtcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICBpZiAoaXRlbS5lbCA9PT0gZWwpIHtcbiAgICAgICAgICBmb3VuZCA9IGluZGV4O1xuICAgICAgICAgIGlmIChpdGVtLnVud2F0Y2ggJiYgaXRlbS5tb2RlbCkge1xuICAgICAgICAgICAgaXRlbS51bndhdGNoKCk7XG4gICAgICAgICAgICBpdGVtLnVud2F0Y2ggPSBudWxsO1xuICAgICAgICAgICAgaXRlbS5tb2RlbCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChmb3VuZCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pbml0cy5zcGxpY2UoZm91bmQsIDEpO1xuICAgICAgdGhpcy5fdmFsaWRhdG9yLnZhbGlkYXRlKHsgZmllbGQ6IHRoaXMuZmllbGQgfSk7XG4gICAgfTtcblxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUud2lsbFVwZGF0ZUZsYWdzID0gZnVuY3Rpb24gd2lsbFVwZGF0ZUZsYWdzKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciB0b3VjaGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICB0b3VjaGVkICYmIF90aGlzMy53aWxsVXBkYXRlVG91Y2hlZChpdGVtLmVsLCAnYmx1cicpO1xuICAgICAgICBfdGhpczMud2lsbFVwZGF0ZURpcnR5KGl0ZW0uZWwpO1xuICAgICAgICBfdGhpczMud2lsbFVwZGF0ZU1vZGlmaWVkKGl0ZW0uZWwpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHRoaXMucmVzZXRGbGFncygpO1xuICAgICAgZWFjaCh0aGlzLl9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGl0ZW0uaW5pdCA9IGl0ZW0uZWwuY2hlY2tlZDtcbiAgICAgICAgaXRlbS52YWx1ZSA9IGl0ZW0uZWwudmFsdWU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2hlY2tib3hWYWxpZGF0aW9uLnByb3RvdHlwZS51cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhyZXN1bHRzKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdmFyIGVsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIC8vIGZvciBhbm90aGVyIGVsZW1lbnRcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2xhc3NlcyhlbCwgcmVzdWx0cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlYWNoKHRoaXMuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICBfdGhpczQuX3VwZGF0ZUNsYXNzZXMoaXRlbS5lbCwgcmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDaGVja2JveFZhbGlkYXRpb24ucHJvdG90eXBlLl9hZGRJdGVtID0gZnVuY3Rpb24gX2FkZEl0ZW0oZWwsIGluaXRpYWwpIHtcbiAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICBlbDogZWwsXG4gICAgICAgIGluaXQ6IGVsLmNoZWNrZWQsXG4gICAgICAgIHZhbHVlOiBlbC52YWx1ZSxcbiAgICAgICAgaW5pdGlhbDogaW5pdGlhbFxuICAgICAgfTtcblxuICAgICAgdmFyIGNsYXNzSWRzID0gZWwuZ2V0QXR0cmlidXRlKFZBTElEQVRFX1VQREFURSk7XG4gICAgICBpZiAoY2xhc3NJZHMpIHtcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFZBTElEQVRFX1VQREFURSk7XG4gICAgICAgIGl0ZW0uY2xhc3NJZHMgPSBjbGFzc0lkcy5zcGxpdCgnLCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9pbml0cy5wdXNoKGl0ZW0pO1xuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfTtcblxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUuX3NldENoZWNrZWQgPSBmdW5jdGlvbiBfc2V0Q2hlY2tlZCh2YWx1ZXMsIGVsKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgICBpZiAoIWVsLmRpc2FibGVkICYmIGVsLnZhbHVlID09PSB2YWx1ZSAmJiAhZWwuY2hlY2tlZCkge1xuICAgICAgICAgIGVsLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIENoZWNrYm94VmFsaWRhdGlvbi5wcm90b3R5cGUuX2dldFZhbHVlID0gZnVuY3Rpb24gX2dldFZhbHVlKGVsKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzLl9pbml0cyB8fCB0aGlzLl9pbml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGVsLmNoZWNrZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgdmFscyA9IFtdO1xuICAgICAgICAgIGVhY2goX3RoaXM1Ll9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICBpdGVtLmVsLmNoZWNrZWQgJiYgdmFscy5wdXNoKGl0ZW0uZWwudmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2OiB2YWxzXG4gICAgICAgICAgfTtcbiAgICAgICAgfSgpO1xuXG4gICAgICAgIGlmICgodHlwZW9mIF9yZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBiYWJlbEhlbHBlcnMudHlwZW9mKF9yZXQpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQudjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2hlY2tib3hWYWxpZGF0aW9uLnByb3RvdHlwZS5fZ2V0Q2xhc3NJZHMgPSBmdW5jdGlvbiBfZ2V0Q2xhc3NJZHMoZWwpIHtcbiAgICAgIHZhciBjbGFzc0lkcyA9IHZvaWQgMDtcbiAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICBpZiAoaXRlbS5lbCA9PT0gZWwpIHtcbiAgICAgICAgICBjbGFzc0lkcyA9IGl0ZW0uY2xhc3NJZHM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsYXNzSWRzO1xuICAgIH07XG5cbiAgICBDaGVja2JveFZhbGlkYXRpb24ucHJvdG90eXBlLl9jaGVja01vZGlmaWVkID0gZnVuY3Rpb24gX2NoZWNrTW9kaWZpZWQodGFyZ2V0KSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2luaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5pdCAhPT0gdGFyZ2V0LmNoZWNrZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgX3JldDIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgZWFjaChfdGhpczYuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghbW9kaWZpZWQpIHtcbiAgICAgICAgICAgICAgbW9kaWZpZWQgPSBpdGVtLmluaXQgIT09IGl0ZW0uZWwuY2hlY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdjogbW9kaWZpZWRcbiAgICAgICAgICB9O1xuICAgICAgICB9KCk7XG5cbiAgICAgICAgaWYgKCh0eXBlb2YgX3JldDIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBiYWJlbEhlbHBlcnMudHlwZW9mKF9yZXQyKSkgPT09IFwib2JqZWN0XCIpIHJldHVybiBfcmV0Mi52O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQ2hlY2tib3hWYWxpZGF0aW9uO1xuICB9KEJhc2VWYWxpZGF0aW9uKTtcblxuICAvKipcbiAgICogUmFkaW9WYWxpZGF0aW9uIGNsYXNzXG4gICAqL1xuXG4gIHZhciBSYWRpb1ZhbGlkYXRpb24gPSBmdW5jdGlvbiAoX0Jhc2VWYWxpZGF0aW9uKSB7XG4gICAgYmFiZWxIZWxwZXJzLmluaGVyaXRzKFJhZGlvVmFsaWRhdGlvbiwgX0Jhc2VWYWxpZGF0aW9uKTtcblxuICAgIGZ1bmN0aW9uIFJhZGlvVmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHZhbGlkYXRvciwgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSB7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFkaW9WYWxpZGF0aW9uKTtcblxuICAgICAgdmFyIF90aGlzID0gYmFiZWxIZWxwZXJzLnBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0Jhc2VWYWxpZGF0aW9uLmNhbGwodGhpcywgZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCB2YWxpZGF0b3IsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkpO1xuXG4gICAgICBfdGhpcy5faW5pdHMgPSBbXTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBSYWRpb1ZhbGlkYXRpb24ucHJvdG90eXBlLm1hbmFnZUVsZW1lbnQgPSBmdW5jdGlvbiBtYW5hZ2VFbGVtZW50KGVsLCBpbml0aWFsKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHNjb3BlID0gdGhpcy5fZ2V0U2NvcGUoKTtcbiAgICAgIHZhciBpdGVtID0gdGhpcy5fYWRkSXRlbShlbCwgaW5pdGlhbCk7XG5cbiAgICAgIHZhciBtb2RlbCA9IGl0ZW0ubW9kZWwgPSB0aGlzLl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9ldmFsTW9kZWwobW9kZWwsIHRoaXMuX2ZpbHRlcnMpO1xuICAgICAgICB0aGlzLl9zZXRDaGVja2VkKHZhbHVlLCBlbCwgaXRlbSk7XG4gICAgICAgIGl0ZW0udW53YXRjaCA9IHNjb3BlLiR3YXRjaChtb2RlbCwgZnVuY3Rpb24gKHZhbCwgb2xkKSB7XG4gICAgICAgICAgaWYgKHZhbCAhPT0gb2xkKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMyLmd1YXJkVmFsaWRhdGUoaXRlbS5lbCwgJ2NoYW5nZScpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3RoaXMyLmhhbmRsZVZhbGlkYXRlKGVsLCB7IG5vb3BhYmxlOiBpdGVtLmluaXRpYWwgfSk7XG4gICAgICAgICAgICBpZiAoaXRlbS5pbml0aWFsKSB7XG4gICAgICAgICAgICAgIGl0ZW0uaW5pdGlhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvcHRpb25zID0geyBmaWVsZDogdGhpcy5maWVsZCwgbm9vcGFibGU6IGluaXRpYWwgfTtcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrQ2xhc3NJZHMoZWwpKSB7XG4gICAgICAgICAgb3B0aW9ucy5lbCA9IGVsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRvci52YWxpZGF0ZShvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS51bm1hbmFnZUVsZW1lbnQgPSBmdW5jdGlvbiB1bm1hbmFnZUVsZW1lbnQoZWwpIHtcbiAgICAgIHZhciBmb3VuZCA9IC0xO1xuICAgICAgZWFjaCh0aGlzLl9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmIChpdGVtLmVsID09PSBlbCkge1xuICAgICAgICAgIGZvdW5kID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGZvdW5kID09PSAtMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2luaXRzLnNwbGljZShmb3VuZCwgMSk7XG4gICAgICB0aGlzLl92YWxpZGF0b3IudmFsaWRhdGUoeyBmaWVsZDogdGhpcy5maWVsZCB9KTtcbiAgICB9O1xuXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS53aWxsVXBkYXRlRmxhZ3MgPSBmdW5jdGlvbiB3aWxsVXBkYXRlRmxhZ3MoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHRvdWNoZWQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgZWFjaCh0aGlzLl9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIHRvdWNoZWQgJiYgX3RoaXMzLndpbGxVcGRhdGVUb3VjaGVkKGl0ZW0uZWwsICdibHVyJyk7XG4gICAgICAgIF90aGlzMy53aWxsVXBkYXRlRGlydHkoaXRlbS5lbCk7XG4gICAgICAgIF90aGlzMy53aWxsVXBkYXRlTW9kaWZpZWQoaXRlbS5lbCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgdGhpcy5yZXNldEZsYWdzKCk7XG4gICAgICBlYWNoKHRoaXMuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaXRlbS5pbml0ID0gaXRlbS5lbC5jaGVja2VkO1xuICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS5lbC52YWx1ZTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSYWRpb1ZhbGlkYXRpb24ucHJvdG90eXBlLnVwZGF0ZUNsYXNzZXMgPSBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzKHJlc3VsdHMpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgZWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICBpZiAoZWwpIHtcbiAgICAgICAgLy8gZm9yIGFub3RoZXIgZWxlbWVudFxuICAgICAgICB0aGlzLl91cGRhdGVDbGFzc2VzKGVsLCByZXN1bHRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVhY2godGhpcy5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgIF90aGlzNC5fdXBkYXRlQ2xhc3NlcyhpdGVtLmVsLCByZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUuX2FkZEl0ZW0gPSBmdW5jdGlvbiBfYWRkSXRlbShlbCwgaW5pdGlhbCkge1xuICAgICAgdmFyIGl0ZW0gPSB7XG4gICAgICAgIGVsOiBlbCxcbiAgICAgICAgaW5pdDogZWwuY2hlY2tlZCxcbiAgICAgICAgdmFsdWU6IGVsLnZhbHVlLFxuICAgICAgICBpbml0aWFsOiBpbml0aWFsXG4gICAgICB9O1xuXG4gICAgICB2YXIgY2xhc3NJZHMgPSBlbC5nZXRBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcbiAgICAgIGlmIChjbGFzc0lkcykge1xuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoVkFMSURBVEVfVVBEQVRFKTtcbiAgICAgICAgaXRlbS5jbGFzc0lkcyA9IGNsYXNzSWRzLnNwbGl0KCcsJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2luaXRzLnB1c2goaXRlbSk7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS5fc2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIF9zZXRDaGVja2VkKHZhbHVlLCBlbCwgaXRlbSkge1xuICAgICAgaWYgKGVsLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICBlbC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5faW5pdCA9IGVsLmNoZWNrZWQ7XG4gICAgICAgIGl0ZW0uaW5pdCA9IGVsLmNoZWNrZWQ7XG4gICAgICAgIGl0ZW0udmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmFkaW9WYWxpZGF0aW9uLnByb3RvdHlwZS5fZ2V0VmFsdWUgPSBmdW5jdGlvbiBfZ2V0VmFsdWUoZWwpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMuX2luaXRzIHx8IHRoaXMuX2luaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZWwuY2hlY2tlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfcmV0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciB2YWxzID0gW107XG4gICAgICAgICAgZWFjaChfdGhpczUuX2luaXRzLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGl0ZW0uZWwuY2hlY2tlZCAmJiB2YWxzLnB1c2goaXRlbS5lbC52YWx1ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHY6IHZhbHNcbiAgICAgICAgICB9O1xuICAgICAgICB9KCk7XG5cbiAgICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IGJhYmVsSGVscGVycy50eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSYWRpb1ZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRDbGFzc0lkcyA9IGZ1bmN0aW9uIF9nZXRDbGFzc0lkcyhlbCkge1xuICAgICAgdmFyIGNsYXNzSWRzID0gdm9pZCAwO1xuICAgICAgZWFjaCh0aGlzLl9pbml0cywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmIChpdGVtLmVsID09PSBlbCkge1xuICAgICAgICAgIGNsYXNzSWRzID0gaXRlbS5jbGFzc0lkcztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY2xhc3NJZHM7XG4gICAgfTtcblxuICAgIFJhZGlvVmFsaWRhdGlvbi5wcm90b3R5cGUuX2NoZWNrTW9kaWZpZWQgPSBmdW5jdGlvbiBfY2hlY2tNb2RpZmllZCh0YXJnZXQpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbml0ICE9PSB0YXJnZXQuY2hlY2tlZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfcmV0MiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgbW9kaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICBlYWNoKF90aGlzNi5faW5pdHMsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKCFtb2RpZmllZCkge1xuICAgICAgICAgICAgICBtb2RpZmllZCA9IGl0ZW0uaW5pdCAhPT0gaXRlbS5lbC5jaGVja2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2OiBtb2RpZmllZFxuICAgICAgICAgIH07XG4gICAgICAgIH0oKTtcblxuICAgICAgICBpZiAoKHR5cGVvZiBfcmV0MiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IGJhYmVsSGVscGVycy50eXBlb2YoX3JldDIpKSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIF9yZXQyLnY7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSYWRpb1ZhbGlkYXRpb247XG4gIH0oQmFzZVZhbGlkYXRpb24pO1xuXG4gIC8qKlxuICAgKiBTZWxlY3RWYWxpZGF0aW9uIGNsYXNzXG4gICAqL1xuXG4gIHZhciBTZWxlY3RWYWxpZGF0aW9uID0gZnVuY3Rpb24gKF9CYXNlVmFsaWRhdGlvbikge1xuICAgIGJhYmVsSGVscGVycy5pbmhlcml0cyhTZWxlY3RWYWxpZGF0aW9uLCBfQmFzZVZhbGlkYXRpb24pO1xuXG4gICAgZnVuY3Rpb24gU2VsZWN0VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHZhbGlkYXRvciwgZmlsdGVycywgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSB7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VsZWN0VmFsaWRhdGlvbik7XG5cbiAgICAgIHZhciBfdGhpcyA9IGJhYmVsSGVscGVycy5wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CYXNlVmFsaWRhdGlvbi5jYWxsKHRoaXMsIGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgdmFsaWRhdG9yLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpKTtcblxuICAgICAgX3RoaXMuX211bHRpcGxlID0gX3RoaXMuX2VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBTZWxlY3RWYWxpZGF0aW9uLnByb3RvdHlwZS5tYW5hZ2VFbGVtZW50ID0gZnVuY3Rpb24gbWFuYWdlRWxlbWVudChlbCwgaW5pdGlhbCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX2dldFNjb3BlKCk7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzLl9tb2RlbDtcblxuICAgICAgdGhpcy5faW5pdGlhbCA9IGluaXRpYWw7XG5cbiAgICAgIHZhciBjbGFzc0lkcyA9IGVsLmdldEF0dHJpYnV0ZShWQUxJREFURV9VUERBVEUpO1xuICAgICAgaWYgKGNsYXNzSWRzKSB7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShWQUxJREFURV9VUERBVEUpO1xuICAgICAgICB0aGlzLl9jbGFzc0lkcyA9IGNsYXNzSWRzLnNwbGl0KCcsJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9ldmFsTW9kZWwobW9kZWwsIHRoaXMuX2ZpbHRlcnMpO1xuICAgICAgICB2YXIgdmFsdWVzID0gIUFycmF5LmlzQXJyYXkodmFsdWUpID8gW3ZhbHVlXSA6IHZhbHVlO1xuICAgICAgICB0aGlzLl9zZXRPcHRpb24odmFsdWVzLCBlbCk7XG4gICAgICAgIHRoaXMuX3Vud2F0Y2ggPSBzY29wZS4kd2F0Y2gobW9kZWwsIGZ1bmN0aW9uICh2YWwsIG9sZCkge1xuICAgICAgICAgIHZhciB2YWx1ZXMxID0gIUFycmF5LmlzQXJyYXkodmFsKSA/IFt2YWxdIDogdmFsO1xuICAgICAgICAgIHZhciB2YWx1ZXMyID0gIUFycmF5LmlzQXJyYXkob2xkKSA/IFtvbGRdIDogb2xkO1xuICAgICAgICAgIGlmICh2YWx1ZXMxLnNsaWNlKCkuc29ydCgpLnRvU3RyaW5nKCkgIT09IHZhbHVlczIuc2xpY2UoKS5zb3J0KCkudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgaWYgKF90aGlzMi5ndWFyZFZhbGlkYXRlKGVsLCAnY2hhbmdlJykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfdGhpczIuaGFuZGxlVmFsaWRhdGUoZWwsIHsgbm9vcGFibGU6IF90aGlzMi5faW5pdGlhbCB9KTtcbiAgICAgICAgICAgIGlmIChfdGhpczIuX2luaXRpYWwpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLl9pbml0aWFsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBTZWxlY3RWYWxpZGF0aW9uLnByb3RvdHlwZS51bm1hbmFnZUVsZW1lbnQgPSBmdW5jdGlvbiB1bm1hbmFnZUVsZW1lbnQoZWwpIHtcbiAgICAgIHRoaXMuX3Vud2F0Y2ggJiYgdGhpcy5fdW53YXRjaCgpO1xuICAgIH07XG5cbiAgICBTZWxlY3RWYWxpZGF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgdGhpcy5yZXNldEZsYWdzKCk7XG4gICAgfTtcblxuICAgIFNlbGVjdFZhbGlkYXRpb24ucHJvdG90eXBlLl9nZXRWYWx1ZSA9IGZ1bmN0aW9uIF9nZXRWYWx1ZShlbCkge1xuICAgICAgdmFyIHJldCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xuICAgICAgICBpZiAoIW9wdGlvbi5kaXNhYmxlZCAmJiBvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICByZXQucHVzaChvcHRpb24udmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIFNlbGVjdFZhbGlkYXRpb24ucHJvdG90eXBlLl9zZXRPcHRpb24gPSBmdW5jdGlvbiBfc2V0T3B0aW9uKHZhbHVlcywgZWwpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gZWwub3B0aW9ucy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICB2YXIgb3B0aW9uID0gZWwub3B0aW9uc1tqXTtcbiAgICAgICAgICBpZiAoIW9wdGlvbi5kaXNhYmxlZCAmJiBvcHRpb24udmFsdWUgPT09IHZhbHVlICYmICghb3B0aW9uLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSB8fCAhb3B0aW9uLnNlbGVjdGVkKSkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgU2VsZWN0VmFsaWRhdGlvbi5wcm90b3R5cGUuX2NoZWNrTW9kaWZpZWQgPSBmdW5jdGlvbiBfY2hlY2tNb2RpZmllZCh0YXJnZXQpIHtcbiAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLl9nZXRWYWx1ZSh0YXJnZXQpLnNsaWNlKCkuc29ydCgpO1xuICAgICAgaWYgKHRoaXMuX2luaXQubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGluaXRzID0gdGhpcy5faW5pdC5zbGljZSgpLnNvcnQoKTtcbiAgICAgICAgcmV0dXJuIGluaXRzLnRvU3RyaW5nKCkgIT09IHZhbHVlcy50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gU2VsZWN0VmFsaWRhdGlvbjtcbiAgfShCYXNlVmFsaWRhdGlvbik7XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRvciBjbGFzc1xuICAgKi9cblxuICB2YXIgVmFsaWRhdG9yJDEgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmFsaWRhdG9yKG5hbWUsIGRpciwgZ3JvdXBzLCBjbGFzc2VzKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgVmFsaWRhdG9yKTtcblxuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgICAgdGhpcy5fc2NvcGUgPSB7fTtcbiAgICAgIHRoaXMuX2RpciA9IGRpcjtcbiAgICAgIHRoaXMuX3ZhbGlkYXRpb25zID0ge307XG4gICAgICB0aGlzLl9jaGVja2JveFZhbGlkYXRpb25zID0ge307XG4gICAgICB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zID0ge307XG4gICAgICB0aGlzLl9ncm91cHMgPSBncm91cHM7XG4gICAgICB0aGlzLl9ncm91cFZhbGlkYXRpb25zID0ge307XG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICAgIHRoaXMuX21vZGlmaWVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9jbGFzc2VzID0gY2xhc3NlcztcblxuICAgICAgZWFjaChncm91cHMsIGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICBfdGhpcy5fZ3JvdXBWYWxpZGF0aW9uc1tncm91cF0gPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuZW5hYmxlUmVhY3RpdmUgPSBmdW5jdGlvbiBlbmFibGVSZWFjdGl2ZSgpIHtcbiAgICAgIHZhciB2bSA9IHRoaXMuX2Rpci52bTtcblxuICAgICAgLy8gZGVmaW5lIHRoZSB2YWxpZGF0aW9uIHNjb3BlXG4gICAgICBleHBvcnRzJDEuVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmUodm0sIHRoaXMubmFtZSwgdGhpcy5fc2NvcGUpO1xuICAgICAgdm0uX3ZhbGlkYXRvck1hcHNbdGhpcy5uYW1lXSA9IHRoaXM7XG5cbiAgICAgIC8vIGRlZmluZSB0aGUgdmFsaWRhdGlvbiByZXNldHRpbmcgbWV0YSBtZXRob2QgdG8gdnVlIGluc3RhbmNlXG4gICAgICB0aGlzLl9kZWZpbmVSZXNldFZhbGlkYXRpb24oKTtcblxuICAgICAgLy8gZGVmaW5lIHRoZSB2YWxpZGF0ZSBtYW51YWxseSBtZXRhIG1ldGhvZCB0byB2dWUgaW5zdGFuY2VcbiAgICAgIHRoaXMuX2RlZmluZVZhbGlkYXRlKCk7XG5cbiAgICAgIC8vIGRlZmluZSBtYW51YWxseSB0aGUgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICAgIHRoaXMuX2RlZmluZVNldFZhbGlkYXRpb25FcnJvcnMoKTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5kaXNhYmxlUmVhY3RpdmUgPSBmdW5jdGlvbiBkaXNhYmxlUmVhY3RpdmUoKSB7XG4gICAgICB2YXIgdm0gPSB0aGlzLl9kaXIudm07XG4gICAgICB2bS4kc2V0VmFsaWRhdGlvbkVycm9ycyA9IG51bGw7XG4gICAgICBkZWxldGUgdm1bJyRzZXRWYWxpZGF0aW9uRXJyb3JzJ107XG4gICAgICB2bS4kdmFsaWRhdGUgPSBudWxsO1xuICAgICAgZGVsZXRlIHZtWyckdmFsaWRhdGUnXTtcbiAgICAgIHZtLiR2YWxpZGF0b3JSZXNldCA9IG51bGw7XG4gICAgICBkZWxldGUgdm1bJyR2YWxpZGF0b3JSZXNldCddO1xuICAgICAgdm0uX3ZhbGlkYXRvck1hcHNbdGhpcy5uYW1lXSA9IG51bGw7XG4gICAgICBkZWxldGUgdm0uX3ZhbGlkYXRvck1hcHNbdGhpcy5uYW1lXTtcbiAgICAgIHZtW3RoaXMubmFtZV0gPSBudWxsO1xuICAgICAgZGVsZXRlIHZtW3RoaXMubmFtZV07XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUucmVnaXN0ZXJFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlckV2ZW50cygpIHtcbiAgICAgIHZhciBpc1NpbXBsZVBhdGggPSBleHBvcnRzJDEuVnVlLnBhcnNlcnMuZXhwcmVzc2lvbi5pc1NpbXBsZVBhdGg7XG5cbiAgICAgIHZhciBhdHRycyA9IHRoaXMuX2Rpci5lbC5hdHRyaWJ1dGVzO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgICAgaWYgKFJFR0VYX0VWRU5ULnRlc3QoZXZlbnQpKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuICAgICAgICAgIH1cbiAgICAgICAgICBldmVudCA9IGV2ZW50LnJlcGxhY2UoUkVHRVhfRVZFTlQsICcnKTtcbiAgICAgICAgICB0aGlzLl9ldmVudHNbdGhpcy5fZ2V0RXZlbnROYW1lKGV2ZW50KV0gPSB0aGlzLl9kaXIudm0uJGV2YWwodmFsdWUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUudW5yZWdpc3RlckV2ZW50cyA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJFdmVudHMoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgZWFjaCh0aGlzLl9ldmVudHMsIGZ1bmN0aW9uIChoYW5kbGVyLCBldmVudCkge1xuICAgICAgICBfdGhpczIuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgICBkZWxldGUgX3RoaXMyLl9ldmVudHNbZXZlbnRdO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUubWFuYWdlVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIG1hbmFnZVZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCBmaWx0ZXJzLCBpbml0aWFsLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpIHtcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gbnVsbDtcblxuICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgIHZhbGlkYXRpb24gPSB0aGlzLl9tYW5hZ2VTZWxlY3RWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICB2YWxpZGF0aW9uID0gdGhpcy5fbWFuYWdlQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICB2YWxpZGF0aW9uID0gdGhpcy5fbWFuYWdlUmFkaW9WYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkYXRpb24gPSB0aGlzLl9tYW5hZ2VCYXNlVmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIGZpbHRlcnMsIGluaXRpYWwsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRpb24uc2V0VmFsaWRhdGlvbkNsYXNzZXModGhpcy5fY2xhc3Nlcyk7XG5cbiAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLnVubWFuYWdlVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIHVubWFuYWdlVmFsaWRhdGlvbihmaWVsZCwgZWwpIHtcbiAgICAgIGlmIChlbC50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIHRoaXMuX3VubWFuYWdlQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBlbCk7XG4gICAgICB9IGVsc2UgaWYgKGVsLnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgICAgdGhpcy5fdW5tYW5hZ2VSYWRpb1ZhbGlkYXRpb24oZmllbGQsIGVsKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgdGhpcy5fdW5tYW5hZ2VTZWxlY3RWYWxpZGF0aW9uKGZpZWxkLCBlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl91bm1hbmFnZUJhc2VWYWxpZGF0aW9uKGZpZWxkLCBlbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuYWRkR3JvdXBWYWxpZGF0aW9uID0gZnVuY3Rpb24gYWRkR3JvdXBWYWxpZGF0aW9uKGdyb3VwLCBmaWVsZCkge1xuICAgICAgdmFyIGluZGV4T2YgPSBleHBvcnRzJDEuVnVlLnV0aWwuaW5kZXhPZjtcblxuICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLl9nZXRWYWxpZGF0aW9uRnJvbShmaWVsZCk7XG4gICAgICB2YXIgdmFsaWRhdGlvbnMgPSB0aGlzLl9ncm91cFZhbGlkYXRpb25zW2dyb3VwXTtcblxuICAgICAgdmFsaWRhdGlvbnMgJiYgISB+aW5kZXhPZih2YWxpZGF0aW9ucywgdmFsaWRhdGlvbikgJiYgdmFsaWRhdGlvbnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5yZW1vdmVHcm91cFZhbGlkYXRpb24gPSBmdW5jdGlvbiByZW1vdmVHcm91cFZhbGlkYXRpb24oZ3JvdXAsIGZpZWxkKSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuX2dldFZhbGlkYXRpb25Gcm9tKGZpZWxkKTtcbiAgICAgIHZhciB2YWxpZGF0aW9ucyA9IHRoaXMuX2dyb3VwVmFsaWRhdGlvbnNbZ3JvdXBdO1xuXG4gICAgICB2YWxpZGF0aW9ucyAmJiBwdWxsKHZhbGlkYXRpb25zLCB2YWxpZGF0aW9uKTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgdmFyIF9yZWYkZWwgPSBfcmVmLmVsO1xuICAgICAgdmFyIGVsID0gX3JlZiRlbCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkZWw7XG4gICAgICB2YXIgX3JlZiRmaWVsZCA9IF9yZWYuZmllbGQ7XG4gICAgICB2YXIgZmllbGQgPSBfcmVmJGZpZWxkID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlZiRmaWVsZDtcbiAgICAgIHZhciBfcmVmJHRvdWNoZWQgPSBfcmVmLnRvdWNoZWQ7XG4gICAgICB2YXIgdG91Y2hlZCA9IF9yZWYkdG91Y2hlZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHRvdWNoZWQ7XG4gICAgICB2YXIgX3JlZiRub29wYWJsZSA9IF9yZWYubm9vcGFibGU7XG4gICAgICB2YXIgbm9vcGFibGUgPSBfcmVmJG5vb3BhYmxlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkbm9vcGFibGU7XG4gICAgICB2YXIgX3JlZiRjYiA9IF9yZWYuY2I7XG4gICAgICB2YXIgY2IgPSBfcmVmJGNiID09PSB1bmRlZmluZWQgPyBudWxsIDogX3JlZiRjYjtcblxuICAgICAgaWYgKCFmaWVsZCkge1xuICAgICAgICAvLyBhbGxcbiAgICAgICAgZWFjaCh0aGlzLnZhbGlkYXRpb25zLCBmdW5jdGlvbiAodmFsaWRhdGlvbiwga2V5KSB7XG4gICAgICAgICAgdmFsaWRhdGlvbi53aWxsVXBkYXRlRmxhZ3ModG91Y2hlZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl92YWxpZGF0ZXMoY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZWFjaCBmaWVsZFxuICAgICAgICB0aGlzLl92YWxpZGF0ZShmaWVsZCwgdG91Y2hlZCwgbm9vcGFibGUsIGVsLCBjYik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuc2V0dXBTY29wZSA9IGZ1bmN0aW9uIHNldHVwU2NvcGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdGhpcy5fZGVmaW5lUHJvcGVydGllcyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczMudmFsaWRhdGlvbnM7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczMuX3Njb3BlO1xuICAgICAgfSk7XG5cbiAgICAgIGVhY2godGhpcy5fZ3JvdXBzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgdmFsaWRhdGlvbnMgPSBfdGhpczMuX2dyb3VwVmFsaWRhdGlvbnNbbmFtZV07XG4gICAgICAgIHZhciBncm91cCA9IHt9O1xuICAgICAgICBleHBvcnRzJDEuVnVlLnNldChfdGhpczMuX3Njb3BlLCBuYW1lLCBncm91cCk7XG4gICAgICAgIF90aGlzMy5fZGVmaW5lUHJvcGVydGllcyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25zO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLndhaXRGb3IgPSBmdW5jdGlvbiB3YWl0Rm9yKGNiKSB7XG4gICAgICB2YXIgbWV0aG9kID0gJyRhY3RpdmF0ZVZhbGlkYXRvcic7XG4gICAgICB2YXIgdm0gPSB0aGlzLl9kaXIudm07XG5cbiAgICAgIHZtW21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICAgIHZtW21ldGhvZF0gPSBudWxsO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZGVmaW5lUmVzZXRWYWxpZGF0aW9uID0gZnVuY3Rpb24gX2RlZmluZVJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9kaXIudm0uJHJlc2V0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICBfdGhpczQuX3Jlc2V0VmFsaWRhdGlvbihjYik7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVWYWxpZGF0ZSA9IGZ1bmN0aW9uIF9kZWZpbmVWYWxpZGF0ZSgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9kaXIudm0uJHZhbGlkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmllbGQgPSBudWxsO1xuICAgICAgICB2YXIgdG91Y2hlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgY2IgPSBudWxsO1xuXG4gICAgICAgIGVhY2goYXJncywgZnVuY3Rpb24gKGFyZywgaW5kZXgpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGZpZWxkID0gYXJnO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0b3VjaGVkID0gYXJnO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2IgPSBhcmc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpczUudmFsaWRhdGUoeyBmaWVsZDogZmllbGQsIHRvdWNoZWQ6IHRvdWNoZWQsIGNiOiBjYiB9KTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVNldFZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiBfZGVmaW5lU2V0VmFsaWRhdGlvbkVycm9ycygpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9kaXIudm0uJHNldFZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiAoZXJyb3JzKSB7XG4gICAgICAgIF90aGlzNi5fc2V0VmFsaWRhdGlvbkVycm9ycyhlcnJvcnMpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fdmFsaWRhdGUgPSBmdW5jdGlvbiBfdmFsaWRhdGUoZmllbGQpIHtcbiAgICAgIHZhciB0b3VjaGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMV07XG4gICAgICB2YXIgbm9vcGFibGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciBlbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbM107XG4gICAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzRdO1xuXG4gICAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZTtcblxuICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLl9nZXRWYWxpZGF0aW9uRnJvbShmaWVsZCk7XG4gICAgICBpZiAodmFsaWRhdGlvbikge1xuICAgICAgICB2YWxpZGF0aW9uLndpbGxVcGRhdGVGbGFncyh0b3VjaGVkKTtcbiAgICAgICAgdmFsaWRhdGlvbi52YWxpZGF0ZShmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgIGV4cG9ydHMkMS5WdWUuc2V0KHNjb3BlLCBmaWVsZCwgcmVzdWx0cyk7XG4gICAgICAgICAgX3RoaXM3Ll9maXJlRXZlbnRzKCk7XG4gICAgICAgICAgY2IgJiYgY2IoKTtcbiAgICAgICAgfSwgbm9vcGFibGUsIGVsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fdmFsaWRhdGVzID0gZnVuY3Rpb24gX3ZhbGlkYXRlcyhjYikge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlO1xuXG4gICAgICB0aGlzLl9ydW5WYWxpZGF0ZXMoZnVuY3Rpb24gKHZhbGlkYXRpb24sIGtleSwgZG9uZSkge1xuICAgICAgICB2YWxpZGF0aW9uLnZhbGlkYXRlKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgZXhwb3J0cyQxLlZ1ZS5zZXQoc2NvcGUsIGtleSwgcmVzdWx0cyk7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZmluaXNoZWRcbiAgICAgICAgX3RoaXM4Ll9maXJlRXZlbnRzKCk7XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZ2V0VmFsaWRhdGlvbkZyb20gPSBmdW5jdGlvbiBfZ2V0VmFsaWRhdGlvbkZyb20oZmllbGQpIHtcbiAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF0gfHwgdGhpcy5fY2hlY2tib3hWYWxpZGF0aW9uc1tmaWVsZF0gJiYgdGhpcy5fY2hlY2tib3hWYWxpZGF0aW9uc1tmaWVsZF0udmFsaWRhdGlvbiB8fCB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXSAmJiB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXS52YWxpZGF0aW9uO1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9yZXNldFZhbGlkYXRpb24gPSBmdW5jdGlvbiBfcmVzZXRWYWxpZGF0aW9uKGNiKSB7XG4gICAgICBlYWNoKHRoaXMudmFsaWRhdGlvbnMsIGZ1bmN0aW9uICh2YWxpZGF0aW9uLCBrZXkpIHtcbiAgICAgICAgdmFsaWRhdGlvbi5yZXNldCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl92YWxpZGF0ZXMoY2IpO1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9zZXRWYWxpZGF0aW9uRXJyb3JzID0gZnVuY3Rpb24gX3NldFZhbGlkYXRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgdmFyIGV4dGVuZCA9IGV4cG9ydHMkMS5WdWUudXRpbC5leHRlbmQ7XG5cbiAgICAgIC8vIG1ha2UgdGVtcG9sYWx5IGVycm9yc1xuXG4gICAgICB2YXIgdGVtcCA9IHt9O1xuICAgICAgZWFjaChlcnJvcnMsIGZ1bmN0aW9uIChlcnJvciwgaW5kZXgpIHtcbiAgICAgICAgaWYgKCF0ZW1wW2Vycm9yLmZpZWxkXSkge1xuICAgICAgICAgIHRlbXBbZXJyb3IuZmllbGRdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGVtcFtlcnJvci5maWVsZF0ucHVzaChlcnJvcik7XG4gICAgICB9KTtcblxuICAgICAgLy8gc2V0IGVycm9yc1xuICAgICAgZWFjaCh0ZW1wLCBmdW5jdGlvbiAodmFsdWVzLCBmaWVsZCkge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IF90aGlzOS5fc2NvcGVbZmllbGRdO1xuICAgICAgICB2YXIgbmV3UmVzdWx0cyA9IHt9O1xuXG4gICAgICAgIGVhY2godmFsdWVzLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICBpZiAoZXJyb3IudmFsaWRhdG9yKSB7XG4gICAgICAgICAgICByZXN1bHRzW2Vycm9yLnZhbGlkYXRvcl0gPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzdWx0cy52YWxpZCA9IGZhbHNlO1xuICAgICAgICByZXN1bHRzLmludmFsaWQgPSB0cnVlO1xuICAgICAgICByZXN1bHRzLmVycm9ycyA9IHZhbHVlcztcbiAgICAgICAgZXh0ZW5kKG5ld1Jlc3VsdHMsIHJlc3VsdHMpO1xuXG4gICAgICAgIHZhciB2YWxpZGF0aW9uID0gX3RoaXM5Ll9nZXRWYWxpZGF0aW9uRnJvbShmaWVsZCk7XG4gICAgICAgIHZhbGlkYXRpb24ud2lsbFVwZGF0ZUNsYXNzZXMobmV3UmVzdWx0cywgdmFsaWRhdGlvbi5lbCk7XG5cbiAgICAgICAgZXhwb3J0cyQxLlZ1ZS5zZXQoX3RoaXM5Ll9zY29wZSwgZmllbGQsIG5ld1Jlc3VsdHMpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX21hbmFnZUJhc2VWYWxpZGF0aW9uID0gZnVuY3Rpb24gX21hbmFnZUJhc2VWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuX3ZhbGlkYXRpb25zW2ZpZWxkXSA9IG5ldyBCYXNlVmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHRoaXMsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSk7XG4gICAgICB2YWxpZGF0aW9uLm1hbmFnZUVsZW1lbnQoZWwsIGluaXRpYWwpO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb247XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3VubWFuYWdlQmFzZVZhbGlkYXRpb24gPSBmdW5jdGlvbiBfdW5tYW5hZ2VCYXNlVmFsaWRhdGlvbihmaWVsZCwgZWwpIHtcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy5fdmFsaWRhdGlvbnNbZmllbGRdO1xuICAgICAgaWYgKHZhbGlkYXRpb24pIHtcbiAgICAgICAgdmFsaWRhdGlvbi51bm1hbmFnZUVsZW1lbnQoZWwpO1xuICAgICAgICBleHBvcnRzJDEuVnVlLmRlbGV0ZSh0aGlzLl9zY29wZSwgZmllbGQpO1xuICAgICAgICB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF0gPSBudWxsO1xuICAgICAgICBkZWxldGUgdGhpcy5fdmFsaWRhdGlvbnNbZmllbGRdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9tYW5hZ2VDaGVja2JveFZhbGlkYXRpb24gPSBmdW5jdGlvbiBfbWFuYWdlQ2hlY2tib3hWYWxpZGF0aW9uKGZpZWxkLCBtb2RlbCwgdm0sIGVsLCBzY29wZSwgZmlsdGVycywgaW5pdGlhbCwgZGV0ZWN0Qmx1ciwgZGV0ZWN0Q2hhbmdlKSB7XG4gICAgICB2YXIgdmFsaWRhdGlvblNldCA9IHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uU2V0KSB7XG4gICAgICAgIHZhciB2YWxpZGF0aW9uID0gbmV3IENoZWNrYm94VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHRoaXMsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSk7XG4gICAgICAgIHZhbGlkYXRpb25TZXQgPSB7IHZhbGlkYXRpb246IHZhbGlkYXRpb24sIGVsZW1lbnRzOiAwIH07XG4gICAgICAgIHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdID0gdmFsaWRhdGlvblNldDtcbiAgICAgIH1cblxuICAgICAgdmFsaWRhdGlvblNldC5lbGVtZW50cysrO1xuICAgICAgdmFsaWRhdGlvblNldC52YWxpZGF0aW9uLm1hbmFnZUVsZW1lbnQoZWwsIGluaXRpYWwpO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25TZXQudmFsaWRhdGlvbjtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fdW5tYW5hZ2VDaGVja2JveFZhbGlkYXRpb24gPSBmdW5jdGlvbiBfdW5tYW5hZ2VDaGVja2JveFZhbGlkYXRpb24oZmllbGQsIGVsKSB7XG4gICAgICB2YXIgdmFsaWRhdGlvblNldCA9IHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdO1xuICAgICAgaWYgKHZhbGlkYXRpb25TZXQpIHtcbiAgICAgICAgdmFsaWRhdGlvblNldC5lbGVtZW50cy0tO1xuICAgICAgICB2YWxpZGF0aW9uU2V0LnZhbGlkYXRpb24udW5tYW5hZ2VFbGVtZW50KGVsKTtcbiAgICAgICAgaWYgKHZhbGlkYXRpb25TZXQuZWxlbWVudHMgPT09IDApIHtcbiAgICAgICAgICBleHBvcnRzJDEuVnVlLmRlbGV0ZSh0aGlzLl9zY29wZSwgZmllbGQpO1xuICAgICAgICAgIHRoaXMuX2NoZWNrYm94VmFsaWRhdGlvbnNbZmllbGRdID0gbnVsbDtcbiAgICAgICAgICBkZWxldGUgdGhpcy5fY2hlY2tib3hWYWxpZGF0aW9uc1tmaWVsZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fbWFuYWdlUmFkaW9WYWxpZGF0aW9uID0gZnVuY3Rpb24gX21hbmFnZVJhZGlvVmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIGZpbHRlcnMsIGluaXRpYWwsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xuICAgICAgdmFyIHZhbGlkYXRpb25TZXQgPSB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXTtcbiAgICAgIGlmICghdmFsaWRhdGlvblNldCkge1xuICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IG5ldyBSYWRpb1ZhbGlkYXRpb24oZmllbGQsIG1vZGVsLCB2bSwgZWwsIHNjb3BlLCB0aGlzLCBmaWx0ZXJzLCBkZXRlY3RCbHVyLCBkZXRlY3RDaGFuZ2UpO1xuICAgICAgICB2YWxpZGF0aW9uU2V0ID0geyB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLCBlbGVtZW50czogMCB9O1xuICAgICAgICB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXSA9IHZhbGlkYXRpb25TZXQ7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRpb25TZXQuZWxlbWVudHMrKztcbiAgICAgIHZhbGlkYXRpb25TZXQudmFsaWRhdGlvbi5tYW5hZ2VFbGVtZW50KGVsLCBpbml0aWFsKTtcbiAgICAgIHJldHVybiB2YWxpZGF0aW9uU2V0LnZhbGlkYXRpb247XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3VubWFuYWdlUmFkaW9WYWxpZGF0aW9uID0gZnVuY3Rpb24gX3VubWFuYWdlUmFkaW9WYWxpZGF0aW9uKGZpZWxkLCBlbCkge1xuICAgICAgdmFyIHZhbGlkYXRpb25TZXQgPSB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXTtcbiAgICAgIGlmICh2YWxpZGF0aW9uU2V0KSB7XG4gICAgICAgIHZhbGlkYXRpb25TZXQuZWxlbWVudHMtLTtcbiAgICAgICAgdmFsaWRhdGlvblNldC52YWxpZGF0aW9uLnVubWFuYWdlRWxlbWVudChlbCk7XG4gICAgICAgIGlmICh2YWxpZGF0aW9uU2V0LmVsZW1lbnRzID09PSAwKSB7XG4gICAgICAgICAgZXhwb3J0cyQxLlZ1ZS5kZWxldGUodGhpcy5fc2NvcGUsIGZpZWxkKTtcbiAgICAgICAgICB0aGlzLl9yYWRpb1ZhbGlkYXRpb25zW2ZpZWxkXSA9IG51bGw7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX3JhZGlvVmFsaWRhdGlvbnNbZmllbGRdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX21hbmFnZVNlbGVjdFZhbGlkYXRpb24gPSBmdW5jdGlvbiBfbWFuYWdlU2VsZWN0VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIGZpbHRlcnMsIGluaXRpYWwsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSkge1xuICAgICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLl92YWxpZGF0aW9uc1tmaWVsZF0gPSBuZXcgU2VsZWN0VmFsaWRhdGlvbihmaWVsZCwgbW9kZWwsIHZtLCBlbCwgc2NvcGUsIHRoaXMsIGZpbHRlcnMsIGRldGVjdEJsdXIsIGRldGVjdENoYW5nZSk7XG4gICAgICB2YWxpZGF0aW9uLm1hbmFnZUVsZW1lbnQoZWwsIGluaXRpYWwpO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb247XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX3VubWFuYWdlU2VsZWN0VmFsaWRhdGlvbiA9IGZ1bmN0aW9uIF91bm1hbmFnZVNlbGVjdFZhbGlkYXRpb24oZmllbGQsIGVsKSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMuX3ZhbGlkYXRpb25zW2ZpZWxkXTtcbiAgICAgIGlmICh2YWxpZGF0aW9uKSB7XG4gICAgICAgIHZhbGlkYXRpb24udW5tYW5hZ2VFbGVtZW50KGVsKTtcbiAgICAgICAgZXhwb3J0cyQxLlZ1ZS5kZWxldGUodGhpcy5fc2NvcGUsIGZpZWxkKTtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbnNbZmllbGRdID0gbnVsbDtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3ZhbGlkYXRpb25zW2ZpZWxkXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZmlyZUV2ZW50ID0gZnVuY3Rpb24gX2ZpcmVFdmVudCh0eXBlKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3RoaXMuX2dldEV2ZW50TmFtZSh0eXBlKV07XG4gICAgICBoYW5kbGVyICYmIHRoaXMuX2Rpci52bS4kbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBoYW5kbGVyLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2ZpcmVFdmVudHMgPSBmdW5jdGlvbiBfZmlyZUV2ZW50cygpIHtcbiAgICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlO1xuXG4gICAgICBzY29wZS50b3VjaGVkICYmIHRoaXMuX2ZpcmVFdmVudCgndG91Y2hlZCcpO1xuICAgICAgc2NvcGUuZGlydHkgJiYgdGhpcy5fZmlyZUV2ZW50KCdkaXJ0eScpO1xuXG4gICAgICBpZiAodGhpcy5fbW9kaWZpZWQgIT09IHNjb3BlLm1vZGlmaWVkKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudCgnbW9kaWZpZWQnLCBzY29wZS5tb2RpZmllZCk7XG4gICAgICAgIHRoaXMuX21vZGlmaWVkID0gc2NvcGUubW9kaWZpZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhciB2YWxpZCA9IHNjb3BlLnZhbGlkO1xuICAgICAgdGhpcy5fZmlyZUV2ZW50KHZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJyk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2dldEV2ZW50TmFtZSA9IGZ1bmN0aW9uIF9nZXRFdmVudE5hbWUodHlwZSkge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZSArICc6JyArIHR5cGU7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh2YWxpZGF0aW9uc0dldHRlciwgdGFyZ2V0R2V0dGVyKSB7XG4gICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgIHZhciBiaW5kID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmJpbmQ7XG5cbiAgICAgIGVhY2goe1xuICAgICAgICB2YWxpZDogeyBmbjogdGhpcy5fZGVmaW5lVmFsaWQsIGFyZzogdmFsaWRhdGlvbnNHZXR0ZXIgfSxcbiAgICAgICAgaW52YWxpZDogeyBmbjogdGhpcy5fZGVmaW5lSW52YWxpZCwgYXJnOiB0YXJnZXRHZXR0ZXIgfSxcbiAgICAgICAgdG91Y2hlZDogeyBmbjogdGhpcy5fZGVmaW5lVG91Y2hlZCwgYXJnOiB2YWxpZGF0aW9uc0dldHRlciB9LFxuICAgICAgICB1bnRvdWNoZWQ6IHsgZm46IHRoaXMuX2RlZmluZVVudG91Y2hlZCwgYXJnOiB0YXJnZXRHZXR0ZXIgfSxcbiAgICAgICAgbW9kaWZpZWQ6IHsgZm46IHRoaXMuX2RlZmluZU1vZGlmaWVkLCBhcmc6IHZhbGlkYXRpb25zR2V0dGVyIH0sXG4gICAgICAgIGRpcnR5OiB7IGZuOiB0aGlzLl9kZWZpbmVEaXJ0eSwgYXJnOiB2YWxpZGF0aW9uc0dldHRlciB9LFxuICAgICAgICBwcmlzdGluZTogeyBmbjogdGhpcy5fZGVmaW5lUHJpc3RpbmUsIGFyZzogdGFyZ2V0R2V0dGVyIH0sXG4gICAgICAgIGVycm9yczogeyBmbjogdGhpcy5fZGVmaW5lRXJyb3JzLCBhcmc6IHZhbGlkYXRpb25zR2V0dGVyIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBuYW1lKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXRHZXR0ZXIoKSwgbmFtZSwge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIGJpbmQoZGVzY3JpcHRvci5mbiwgX3RoaXMxMCkoZGVzY3JpcHRvci5hcmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fcnVuVmFsaWRhdGVzID0gZnVuY3Rpb24gX3J1blZhbGlkYXRlcyhmbiwgY2IpIHtcbiAgICAgIHZhciBsZW5ndGggPSBPYmplY3Qua2V5cyh0aGlzLnZhbGlkYXRpb25zKS5sZW5ndGg7XG5cbiAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICBlYWNoKHRoaXMudmFsaWRhdGlvbnMsIGZ1bmN0aW9uICh2YWxpZGF0aW9uLCBrZXkpIHtcbiAgICAgICAgZm4odmFsaWRhdGlvbiwga2V5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgKytjb3VudDtcbiAgICAgICAgICBjb3VudCA+PSBsZW5ndGggJiYgY2IoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fd2Fsa1ZhbGlkYXRpb25zID0gZnVuY3Rpb24gX3dhbGtWYWxpZGF0aW9ucyh2YWxpZGF0aW9ucywgcHJvcGVydHksIGNvbmRpdGlvbikge1xuICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgICB2YXIgaGFzT3duID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmhhc093bjtcbiAgICAgIHZhciByZXQgPSBjb25kaXRpb247XG5cbiAgICAgIGVhY2godmFsaWRhdGlvbnMsIGZ1bmN0aW9uICh2YWxpZGF0aW9uLCBrZXkpIHtcbiAgICAgICAgaWYgKHJldCA9PT0gIWNvbmRpdGlvbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzT3duKF90aGlzMTEuX3Njb3BlLCB2YWxpZGF0aW9uLmZpZWxkKSkge1xuICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpczExLl9zY29wZVt2YWxpZGF0aW9uLmZpZWxkXTtcbiAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldFtwcm9wZXJ0eV0gPT09ICFjb25kaXRpb24pIHtcbiAgICAgICAgICAgIHJldCA9ICFjb25kaXRpb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZGVmaW5lVmFsaWQgPSBmdW5jdGlvbiBfZGVmaW5lVmFsaWQodmFsaWRhdGlvbnNHZXR0ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl93YWxrVmFsaWRhdGlvbnModmFsaWRhdGlvbnNHZXR0ZXIoKSwgJ3ZhbGlkJywgdHJ1ZSk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZUludmFsaWQgPSBmdW5jdGlvbiBfZGVmaW5lSW52YWxpZChzY29wZUdldHRlcikge1xuICAgICAgcmV0dXJuICFzY29wZUdldHRlcigpLnZhbGlkO1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVUb3VjaGVkID0gZnVuY3Rpb24gX2RlZmluZVRvdWNoZWQodmFsaWRhdGlvbnNHZXR0ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl93YWxrVmFsaWRhdGlvbnModmFsaWRhdGlvbnNHZXR0ZXIoKSwgJ3RvdWNoZWQnLCBmYWxzZSk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZVVudG91Y2hlZCA9IGZ1bmN0aW9uIF9kZWZpbmVVbnRvdWNoZWQoc2NvcGVHZXR0ZXIpIHtcbiAgICAgIHJldHVybiAhc2NvcGVHZXR0ZXIoKS50b3VjaGVkO1xuICAgIH07XG5cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLl9kZWZpbmVNb2RpZmllZCA9IGZ1bmN0aW9uIF9kZWZpbmVNb2RpZmllZCh2YWxpZGF0aW9uc0dldHRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX3dhbGtWYWxpZGF0aW9ucyh2YWxpZGF0aW9uc0dldHRlcigpLCAnbW9kaWZpZWQnLCBmYWxzZSk7XG4gICAgfTtcblxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuX2RlZmluZURpcnR5ID0gZnVuY3Rpb24gX2RlZmluZURpcnR5KHZhbGlkYXRpb25zR2V0dGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Fsa1ZhbGlkYXRpb25zKHZhbGlkYXRpb25zR2V0dGVyKCksICdkaXJ0eScsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZGVmaW5lUHJpc3RpbmUgPSBmdW5jdGlvbiBfZGVmaW5lUHJpc3RpbmUoc2NvcGVHZXR0ZXIpIHtcbiAgICAgIHJldHVybiAhc2NvcGVHZXR0ZXIoKS5kaXJ0eTtcbiAgICB9O1xuXG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5fZGVmaW5lRXJyb3JzID0gZnVuY3Rpb24gX2RlZmluZUVycm9ycyh2YWxpZGF0aW9uc0dldHRlcikge1xuICAgICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgICB2YXIgaGFzT3duID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmhhc093bjtcbiAgICAgIHZhciBpc1BsYWluT2JqZWN0ID0gZXhwb3J0cyQxLlZ1ZS51dGlsLmlzUGxhaW5PYmplY3Q7XG4gICAgICB2YXIgZXJyb3JzID0gW107XG5cbiAgICAgIGVhY2godmFsaWRhdGlvbnNHZXR0ZXIoKSwgZnVuY3Rpb24gKHZhbGlkYXRpb24sIGtleSkge1xuICAgICAgICBpZiAoaGFzT3duKF90aGlzMTIuX3Njb3BlLCB2YWxpZGF0aW9uLmZpZWxkKSkge1xuICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpczEyLl9zY29wZVt2YWxpZGF0aW9uLmZpZWxkXTtcbiAgICAgICAgICBpZiAodGFyZ2V0ICYmICFlbXB0eSh0YXJnZXQuZXJyb3JzKSkge1xuICAgICAgICAgICAgZWFjaCh0YXJnZXQuZXJyb3JzLCBmdW5jdGlvbiAoZXJyLCBpbmRleCkge1xuICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB7IGZpZWxkOiB2YWxpZGF0aW9uLmZpZWxkIH07XG4gICAgICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGVycikpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLnZhbGlkYXRvcikge1xuICAgICAgICAgICAgICAgICAgZXJyb3IudmFsaWRhdG9yID0gZXJyLnZhbGlkYXRvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlcnIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSA9IGVycjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZW1wdHkoZXJyb3JzKSA/IHVuZGVmaW5lZCA6IGVycm9ycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLmZpZWxkIDwgYi5maWVsZCA/IC0xIDogMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBiYWJlbEhlbHBlcnMuY3JlYXRlQ2xhc3MoVmFsaWRhdG9yLCBbe1xuICAgICAga2V5OiAndmFsaWRhdGlvbnMnLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHZhciBleHRlbmQgPSBleHBvcnRzJDEuVnVlLnV0aWwuZXh0ZW5kO1xuXG4gICAgICAgIHZhciByZXQgPSB7fTtcbiAgICAgICAgZXh0ZW5kKHJldCwgdGhpcy5fdmFsaWRhdGlvbnMpO1xuXG4gICAgICAgIGVhY2godGhpcy5fY2hlY2tib3hWYWxpZGF0aW9ucywgZnVuY3Rpb24gKGRhdGFzZXQsIGtleSkge1xuICAgICAgICAgIHJldFtrZXldID0gZGF0YXNldC52YWxpZGF0aW9uO1xuICAgICAgICB9KTtcblxuICAgICAgICBlYWNoKHRoaXMuX3JhZGlvVmFsaWRhdGlvbnMsIGZ1bmN0aW9uIChkYXRhc2V0LCBrZXkpIHtcbiAgICAgICAgICByZXRba2V5XSA9IGRhdGFzZXQudmFsaWRhdGlvbjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIFZhbGlkYXRvcjtcbiAgfSgpO1xuXG4gIGZ1bmN0aW9uIFZhbGlkYXRvciAoVnVlKSB7XG4gICAgdmFyIEZyYWdtZW50RmFjdG9yeSA9IFZ1ZS5GcmFnbWVudEZhY3Rvcnk7XG4gICAgdmFyIHZJZiA9IFZ1ZS5kaXJlY3RpdmUoJ2lmJyk7XG4gICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xuICAgIHZhciBpc0FycmF5ID0gX1Z1ZSR1dGlsLmlzQXJyYXk7XG4gICAgdmFyIGlzUGxhaW5PYmplY3QgPSBfVnVlJHV0aWwuaXNQbGFpbk9iamVjdDtcbiAgICB2YXIgY3JlYXRlQW5jaG9yID0gX1Z1ZSR1dGlsLmNyZWF0ZUFuY2hvcjtcbiAgICB2YXIgcmVwbGFjZSA9IF9WdWUkdXRpbC5yZXBsYWNlO1xuICAgIHZhciBleHRlbmQgPSBfVnVlJHV0aWwuZXh0ZW5kO1xuICAgIHZhciBjYW1lbGl6ZSA9IF9WdWUkdXRpbC5jYW1lbGl6ZTtcblxuICAgIC8qKlxuICAgICAqIGB2YWxpZGF0b3JgIGVsZW1lbnQgZGlyZWN0aXZlXG4gICAgICovXG5cbiAgICBWdWUuZWxlbWVudERpcmVjdGl2ZSgndmFsaWRhdG9yJywge1xuICAgICAgcGFyYW1zOiBbJ25hbWUnLCAnZ3JvdXBzJywgJ2xhenknLCAnY2xhc3NlcyddLFxuXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG5cbiAgICAgICAgaWYgKCdkZXZlbG9wbWVudCcgIT09ICdwcm9kdWN0aW9uJyAmJiAhcGFyYW1zLm5hbWUpIHtcbiAgICAgICAgICB3YXJuKCd2YWxpZGF0b3IgZWxlbWVudCByZXF1aXJlcyBhIFxcJ25hbWVcXCcgYXR0cmlidXRlOiAnICsgJyhlLmcuIDx2YWxpZGF0b3IgbmFtZT1cInZhbGlkYXRvcjFcIj4uLi48L3ZhbGlkYXRvcj4pJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52YWxpZGF0b3JOYW1lID0gJyQnICsgY2FtZWxpemUocGFyYW1zLm5hbWUpO1xuICAgICAgICBpZiAoIXRoaXMudm0uX3ZhbGlkYXRvck1hcHMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsaWRhdG9yIG1hbmFnZW1lbnQgZXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjbGFzc2VzID0ge307XG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHRoaXMucGFyYW1zLmNsYXNzZXMpKSB7XG4gICAgICAgICAgY2xhc3NlcyA9IHRoaXMucGFyYW1zLmNsYXNzZXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldHVwVmFsaWRhdG9yKGNsYXNzZXMpO1xuICAgICAgICB0aGlzLnNldHVwRnJhZ21lbnQocGFyYW1zLmxhenkpO1xuICAgICAgfSxcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLnRlYXJkb3duRnJhZ21lbnQoKTtcbiAgICAgICAgdGhpcy50ZWFyZG93blZhbGlkYXRvcigpO1xuICAgICAgfSxcbiAgICAgIGdldEdyb3VwczogZnVuY3Rpb24gZ2V0R3JvdXBzKCkge1xuICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG4gICAgICAgIHZhciBncm91cHMgPSBbXTtcblxuICAgICAgICBpZiAocGFyYW1zLmdyb3Vwcykge1xuICAgICAgICAgIGlmIChpc0FycmF5KHBhcmFtcy5ncm91cHMpKSB7XG4gICAgICAgICAgICBncm91cHMgPSBwYXJhbXMuZ3JvdXBzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWlzUGxhaW5PYmplY3QocGFyYW1zLmdyb3VwcykgJiYgdHlwZW9mIHBhcmFtcy5ncm91cHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBncm91cHMucHVzaChwYXJhbXMuZ3JvdXBzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3JvdXBzO1xuICAgICAgfSxcbiAgICAgIHNldHVwVmFsaWRhdG9yOiBmdW5jdGlvbiBzZXR1cFZhbGlkYXRvcihjbGFzc2VzKSB7XG4gICAgICAgIHZhciB2YWxpZGF0b3IgPSB0aGlzLnZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3IkMSh0aGlzLnZhbGlkYXRvck5hbWUsIHRoaXMsIHRoaXMuZ2V0R3JvdXBzKCksIGNsYXNzZXMpO1xuICAgICAgICB2YWxpZGF0b3IuZW5hYmxlUmVhY3RpdmUoKTtcbiAgICAgICAgdmFsaWRhdG9yLnNldHVwU2NvcGUoKTtcbiAgICAgICAgdmFsaWRhdG9yLnJlZ2lzdGVyRXZlbnRzKCk7XG4gICAgICB9LFxuICAgICAgdGVhcmRvd25WYWxpZGF0b3I6IGZ1bmN0aW9uIHRlYXJkb3duVmFsaWRhdG9yKCkge1xuICAgICAgICB0aGlzLnZhbGlkYXRvci51bnJlZ2lzdGVyRXZlbnRzKCk7XG4gICAgICAgIHRoaXMudmFsaWRhdG9yLmRpc2FibGVSZWFjdGl2ZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRvck5hbWUpIHtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRvck5hbWUgPSBudWxsO1xuICAgICAgICAgIHRoaXMudmFsaWRhdG9yID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldHVwRnJhZ21lbnQ6IGZ1bmN0aW9uIHNldHVwRnJhZ21lbnQobGF6eSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXMudm07XG5cbiAgICAgICAgdGhpcy52YWxpZGF0b3Iud2FpdEZvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2dWUtdmFsaWRhdG9yJyk7XG4gICAgICAgICAgcmVwbGFjZShfdGhpcy5lbCwgX3RoaXMuYW5jaG9yKTtcbiAgICAgICAgICBleHRlbmQodm0uJG9wdGlvbnMsIHsgX3ZhbGlkYXRvcjogX3RoaXMudmFsaWRhdG9yTmFtZSB9KTtcbiAgICAgICAgICBfdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh2bSwgX3RoaXMuZWwuaW5uZXJIVE1MKTtcbiAgICAgICAgICB2SWYuaW5zZXJ0LmNhbGwoX3RoaXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICAhbGF6eSAmJiB2bS4kYWN0aXZhdGVWYWxpZGF0b3IoKTtcbiAgICAgIH0sXG4gICAgICB0ZWFyZG93bkZyYWdtZW50OiBmdW5jdGlvbiB0ZWFyZG93bkZyYWdtZW50KCkge1xuICAgICAgICB2SWYudW5iaW5kLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBWYWxpZGF0b3JFcnJvciAoVnVlKSB7XG4gICAgLyoqXG4gICAgICogVmFsaWRhdG9yRXJyb3IgY29tcG9uZW50XG4gICAgICovXG5cbiAgICB2YXIgZXJyb3IgPSB7XG4gICAgICBuYW1lOiAndmFsaWRhdG9yLWVycm9yJyxcblxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgdmFsaWRhdG9yOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcGFydGlhbDoge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICBkZWZhdWx0OiAndmFsaWRhdG9yLWVycm9yLWRlZmF1bHQnXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHRlbXBsYXRlOiAnPGRpdj48cGFydGlhbCA6bmFtZT1cInBhcnRpYWxcIj48L3BhcnRpYWw+PC9kaXY+JyxcblxuICAgICAgcGFydGlhbHM6IHt9XG4gICAgfTtcblxuICAgIC8vIG9ubHkgdXNlIFZhbGlkYXRvckVycm9yIGNvbXBvbmVudFxuICAgIGVycm9yLnBhcnRpYWxzWyd2YWxpZGF0b3ItZXJyb3ItZGVmYXVsdCddID0gJzxwPnt7ZmllbGR9fToge3ttZXNzYWdlfX08L3A+JztcblxuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIEVycm9ycyAoVnVlKSB7XG4gICAgdmFyIF8gPSBWdWUudXRpbDtcbiAgICB2YXIgZXJyb3IgPSBWYWxpZGF0b3JFcnJvcihWdWUpOyAvLyBpbXBvcnQgVmFsaWRhdG9yRXJyb3IgY29tcG9uZW50XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0b3JFcnJvcnMgY29tcG9uZW50XG4gICAgICovXG5cbiAgICB2YXIgZXJyb3JzID0ge1xuICAgICAgbmFtZTogJ3ZhbGlkYXRvci1lcnJvcnMnLFxuXG4gICAgICBwcm9wczoge1xuICAgICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGdyb3VwOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGRlZmF1bHQ6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgZGVmYXVsdDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBjb21wb25lbnQ6IHtcbiAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRvci1lcnJvcidcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgZXJyb3JzOiBmdW5jdGlvbiBlcnJvcnMoKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgIGlmICh0aGlzLmdyb3VwICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0aW9uW3RoaXMuZ3JvdXBdLmVycm9ycztcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnZhbGlkYXRpb25bdGhpcy5maWVsZF07XG4gICAgICAgICAgICBpZiAoIXRhcmdldC5lcnJvcnMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmVycm9ycy5tYXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgIHZhciBlcnIgPSB7IGZpZWxkOiBfdGhpcy5maWVsZCB9O1xuICAgICAgICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci52YWxpZGF0b3IpIHtcbiAgICAgICAgICAgICAgICAgIGVyci52YWxpZGF0b3IgPSBlcnJvci52YWxpZGF0b3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVyci5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZXJyLm1lc3NhZ2UgPSBlcnJvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb24uZXJyb3JzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdGVtcGxhdGU6ICc8dGVtcGxhdGUgdi1mb3I9XCJlcnJvciBpbiBlcnJvcnNcIj4nICsgJzxjb21wb25lbnQgOmlzPVwiY29tcG9uZW50XCIgOnBhcnRpYWw9XCJwYXJ0aWFsXCIgOmZpZWxkPVwiZXJyb3IuZmllbGRcIiA6dmFsaWRhdG9yPVwiZXJyb3IudmFsaWRhdG9yXCIgOm1lc3NhZ2U9XCJlcnJvci5tZXNzYWdlXCI+JyArICc8L2NvbXBvbmVudD4nICsgJzwvdGVtcGxhdGU+JyxcblxuICAgICAgY29tcG9uZW50czoge31cbiAgICB9O1xuXG4gICAgLy8gZGVmaW5lICdwYXJ0aWFsJyBwcm9wXG4gICAgZXJyb3JzLnByb3BzWydwYXJ0aWFsJ10gPSBlcnJvci5wcm9wc1sncGFydGlhbCddO1xuXG4gICAgLy8gb25seSB1c2UgVmFsaWRhdG9yRXJyb3JzIGNvbXBvbmVudFxuICAgIGVycm9ycy5jb21wb25lbnRzW2Vycm9yLm5hbWVdID0gZXJyb3I7XG5cbiAgICAvLyBpbnN0YWxsIFZhbGlkYXRvckVycm9ycyBjb21wb25lbnRcbiAgICBWdWUuY29tcG9uZW50KGVycm9ycy5uYW1lLCBlcnJvcnMpO1xuXG4gICAgcmV0dXJuIGVycm9ycztcbiAgfVxuXG4gIC8qKlxuICAgKiBwbHVnaW5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gVnVlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHBsdWdpbihWdWUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuXG4gICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcbiAgICAgIHdhcm4oJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV4cG9ydHMkMS5WdWUgPSBWdWU7XG4gICAgQXNzZXQoVnVlKTtcbiAgICBFcnJvcnMoVnVlKTtcblxuICAgIE92ZXJyaWRlKFZ1ZSk7XG4gICAgVmFsaWRhdG9yKFZ1ZSk7XG4gICAgVmFsaWRhdGVDbGFzcyhWdWUpO1xuICAgIFZhbGlkYXRlKFZ1ZSk7XG4gIH1cblxuICBwbHVnaW4udmVyc2lvbiA9ICcyLjEuMyc7XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcbiAgICB3aW5kb3cuVnVlLnVzZShwbHVnaW4pO1xuICB9XG5cbiAgcmV0dXJuIHBsdWdpbjtcblxufSkpOyIsIi8vISBtb21lbnQuanNcbi8vISB2ZXJzaW9uIDogMi4xNC4xXG4vLyEgYXV0aG9ycyA6IFRpbSBXb29kLCBJc2tyZW4gQ2hlcm5ldiwgTW9tZW50LmpzIGNvbnRyaWJ1dG9yc1xuLy8hIGxpY2Vuc2UgOiBNSVRcbi8vISBtb21lbnRqcy5jb21cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWIoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGIpOmEubW9tZW50PWIoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGEoKXtyZXR1cm4gbWQuYXBwbHkobnVsbCxhcmd1bWVudHMpfVxuLy8gVGhpcyBpcyBkb25lIHRvIHJlZ2lzdGVyIHRoZSBtZXRob2QgY2FsbGVkIHdpdGggbW9tZW50KClcbi8vIHdpdGhvdXQgY3JlYXRpbmcgY2lyY3VsYXIgZGVwZW5kZW5jaWVzLlxuZnVuY3Rpb24gYihhKXttZD1hfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBBcnJheXx8XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX1mdW5jdGlvbiBlKGEpe3ZhciBiO2ZvcihiIGluIGEpXG4vLyBldmVuIGlmIGl0cyBub3Qgb3duIHByb3BlcnR5IEknZCBzdGlsbCBjYWxsIGl0IG5vbi1lbXB0eVxucmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIERhdGV8fFwiW29iamVjdCBEYXRlXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYyxkPVtdO2ZvcihjPTA7YzxhLmxlbmd0aDsrK2MpZC5wdXNoKGIoYVtjXSxjKSk7cmV0dXJuIGR9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX1mdW5jdGlvbiBpKGEsYil7Zm9yKHZhciBjIGluIGIpaChiLGMpJiYoYVtjXT1iW2NdKTtyZXR1cm4gaChiLFwidG9TdHJpbmdcIikmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpLGgoYixcInZhbHVlT2ZcIikmJihhLnZhbHVlT2Y9Yi52YWx1ZU9mKSxhfWZ1bmN0aW9uIGooYSxiLGMsZCl7cmV0dXJuIHFiKGEsYixjLGQsITApLnV0YygpfWZ1bmN0aW9uIGsoKXtcbi8vIFdlIG5lZWQgdG8gZGVlcCBjbG9uZSB0aGlzIG9iamVjdC5cbnJldHVybntlbXB0eTohMSx1bnVzZWRUb2tlbnM6W10sdW51c2VkSW5wdXQ6W10sb3ZlcmZsb3c6LTIsY2hhcnNMZWZ0T3ZlcjowLG51bGxJbnB1dDohMSxpbnZhbGlkTW9udGg6bnVsbCxpbnZhbGlkRm9ybWF0OiExLHVzZXJJbnZhbGlkYXRlZDohMSxpc286ITEscGFyc2VkRGF0ZVBhcnRzOltdLG1lcmlkaWVtOm51bGx9fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIG51bGw9PWEuX3BmJiYoYS5fcGY9aygpKSxhLl9wZn1mdW5jdGlvbiBtKGEpe2lmKG51bGw9PWEuX2lzVmFsaWQpe3ZhciBiPWwoYSksYz1uZC5jYWxsKGIucGFyc2VkRGF0ZVBhcnRzLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hfSk7YS5faXNWYWxpZD0haXNOYU4oYS5fZC5nZXRUaW1lKCkpJiZiLm92ZXJmbG93PDAmJiFiLmVtcHR5JiYhYi5pbnZhbGlkTW9udGgmJiFiLmludmFsaWRXZWVrZGF5JiYhYi5udWxsSW5wdXQmJiFiLmludmFsaWRGb3JtYXQmJiFiLnVzZXJJbnZhbGlkYXRlZCYmKCFiLm1lcmlkaWVtfHxiLm1lcmlkaWVtJiZjKSxhLl9zdHJpY3QmJihhLl9pc1ZhbGlkPWEuX2lzVmFsaWQmJjA9PT1iLmNoYXJzTGVmdE92ZXImJjA9PT1iLnVudXNlZFRva2Vucy5sZW5ndGgmJnZvaWQgMD09PWIuYmlnSG91cil9cmV0dXJuIGEuX2lzVmFsaWR9ZnVuY3Rpb24gbihhKXt2YXIgYj1qKE5hTik7cmV0dXJuIG51bGwhPWE/aShsKGIpLGEpOmwoYikudXNlckludmFsaWRhdGVkPSEwLGJ9ZnVuY3Rpb24gbyhhKXtyZXR1cm4gdm9pZCAwPT09YX1mdW5jdGlvbiBwKGEsYil7dmFyIGMsZCxlO2lmKG8oYi5faXNBTW9tZW50T2JqZWN0KXx8KGEuX2lzQU1vbWVudE9iamVjdD1iLl9pc0FNb21lbnRPYmplY3QpLG8oYi5faSl8fChhLl9pPWIuX2kpLG8oYi5fZil8fChhLl9mPWIuX2YpLG8oYi5fbCl8fChhLl9sPWIuX2wpLG8oYi5fc3RyaWN0KXx8KGEuX3N0cmljdD1iLl9zdHJpY3QpLG8oYi5fdHptKXx8KGEuX3R6bT1iLl90em0pLG8oYi5faXNVVEMpfHwoYS5faXNVVEM9Yi5faXNVVEMpLG8oYi5fb2Zmc2V0KXx8KGEuX29mZnNldD1iLl9vZmZzZXQpLG8oYi5fcGYpfHwoYS5fcGY9bChiKSksbyhiLl9sb2NhbGUpfHwoYS5fbG9jYWxlPWIuX2xvY2FsZSksb2QubGVuZ3RoPjApZm9yKGMgaW4gb2QpZD1vZFtjXSxlPWJbZF0sbyhlKXx8KGFbZF09ZSk7cmV0dXJuIGF9XG4vLyBNb21lbnQgcHJvdG90eXBlIG9iamVjdFxuZnVuY3Rpb24gcShiKXtwKHRoaXMsYiksdGhpcy5fZD1uZXcgRGF0ZShudWxsIT1iLl9kP2IuX2QuZ2V0VGltZSgpOk5hTikscGQ9PT0hMSYmKHBkPSEwLGEudXBkYXRlT2Zmc2V0KHRoaXMpLHBkPSExKX1mdW5jdGlvbiByKGEpe3JldHVybiBhIGluc3RhbmNlb2YgcXx8bnVsbCE9YSYmbnVsbCE9YS5faXNBTW9tZW50T2JqZWN0fWZ1bmN0aW9uIHMoYSl7cmV0dXJuIDA+YT9NYXRoLmNlaWwoYSl8fDA6TWF0aC5mbG9vcihhKX1mdW5jdGlvbiB0KGEpe3ZhciBiPSthLGM9MDtyZXR1cm4gMCE9PWImJmlzRmluaXRlKGIpJiYoYz1zKGIpKSxjfVxuLy8gY29tcGFyZSB0d28gYXJyYXlzLCByZXR1cm4gdGhlIG51bWJlciBvZiBkaWZmZXJlbmNlc1xuZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQsZT1NYXRoLm1pbihhLmxlbmd0aCxiLmxlbmd0aCksZj1NYXRoLmFicyhhLmxlbmd0aC1iLmxlbmd0aCksZz0wO2ZvcihkPTA7ZT5kO2QrKykoYyYmYVtkXSE9PWJbZF18fCFjJiZ0KGFbZF0pIT09dChiW2RdKSkmJmcrKztyZXR1cm4gZytmfWZ1bmN0aW9uIHYoYil7YS5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9PT0hMSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKFwiRGVwcmVjYXRpb24gd2FybmluZzogXCIrYil9ZnVuY3Rpb24gdyhiLGMpe3ZhciBkPSEwO3JldHVybiBpKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPWEuZGVwcmVjYXRpb25IYW5kbGVyJiZhLmRlcHJlY2F0aW9uSGFuZGxlcihudWxsLGIpLGQmJih2KGIrXCJcXG5Bcmd1bWVudHM6IFwiK0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbihcIiwgXCIpK1wiXFxuXCIrKG5ldyBFcnJvcikuc3RhY2spLGQ9ITEpLGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjKX1mdW5jdGlvbiB4KGIsYyl7bnVsbCE9YS5kZXByZWNhdGlvbkhhbmRsZXImJmEuZGVwcmVjYXRpb25IYW5kbGVyKGIsYykscWRbYl18fCh2KGMpLHFkW2JdPSEwKX1mdW5jdGlvbiB5KGEpe3JldHVybiBhIGluc3RhbmNlb2YgRnVuY3Rpb258fFwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX1mdW5jdGlvbiB6KGEpe3ZhciBiLGM7Zm9yKGMgaW4gYSliPWFbY10seShiKT90aGlzW2NdPWI6dGhpc1tcIl9cIitjXT1iO3RoaXMuX2NvbmZpZz1hLFxuLy8gTGVuaWVudCBvcmRpbmFsIHBhcnNpbmcgYWNjZXB0cyBqdXN0IGEgbnVtYmVyIGluIGFkZGl0aW9uIHRvXG4vLyBudW1iZXIgKyAocG9zc2libHkpIHN0dWZmIGNvbWluZyBmcm9tIF9vcmRpbmFsUGFyc2VMZW5pZW50LlxudGhpcy5fb3JkaW5hbFBhcnNlTGVuaWVudD1uZXcgUmVnRXhwKHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UrXCJ8XCIrL1xcZHsxLDJ9Ly5zb3VyY2UpfWZ1bmN0aW9uIEEoYSxiKXt2YXIgYyxlPWkoe30sYSk7Zm9yKGMgaW4gYiloKGIsYykmJihkKGFbY10pJiZkKGJbY10pPyhlW2NdPXt9LGkoZVtjXSxhW2NdKSxpKGVbY10sYltjXSkpOm51bGwhPWJbY10/ZVtjXT1iW2NdOmRlbGV0ZSBlW2NdKTtmb3IoYyBpbiBhKWgoYSxjKSYmIWgoYixjKSYmZChhW2NdKSYmKFxuLy8gbWFrZSBzdXJlIGNoYW5nZXMgdG8gcHJvcGVydGllcyBkb24ndCBtb2RpZnkgcGFyZW50IGNvbmZpZ1xuZVtjXT1pKHt9LGVbY10pKTtyZXR1cm4gZX1mdW5jdGlvbiBCKGEpe251bGwhPWEmJnRoaXMuc2V0KGEpfWZ1bmN0aW9uIEMoYSxiLGMpe3ZhciBkPXRoaXMuX2NhbGVuZGFyW2FdfHx0aGlzLl9jYWxlbmRhci5zYW1lRWxzZTtyZXR1cm4geShkKT9kLmNhbGwoYixjKTpkfWZ1bmN0aW9uIEQoYSl7dmFyIGI9dGhpcy5fbG9uZ0RhdGVGb3JtYXRbYV0sYz10aGlzLl9sb25nRGF0ZUZvcm1hdFthLnRvVXBwZXJDYXNlKCldO3JldHVybiBifHwhYz9iOih0aGlzLl9sb25nRGF0ZUZvcm1hdFthXT1jLnJlcGxhY2UoL01NTU18TU18RER8ZGRkZC9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKDEpfSksdGhpcy5fbG9uZ0RhdGVGb3JtYXRbYV0pfWZ1bmN0aW9uIEUoKXtyZXR1cm4gdGhpcy5faW52YWxpZERhdGV9ZnVuY3Rpb24gRihhKXtyZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKFwiJWRcIixhKX1mdW5jdGlvbiBHKGEsYixjLGQpe3ZhciBlPXRoaXMuX3JlbGF0aXZlVGltZVtjXTtyZXR1cm4geShlKT9lKGEsYixjLGQpOmUucmVwbGFjZSgvJWQvaSxhKX1mdW5jdGlvbiBIKGEsYil7dmFyIGM9dGhpcy5fcmVsYXRpdmVUaW1lW2E+MD9cImZ1dHVyZVwiOlwicGFzdFwiXTtyZXR1cm4geShjKT9jKGIpOmMucmVwbGFjZSgvJXMvaSxiKX1mdW5jdGlvbiBJKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3pkW2NdPXpkW2MrXCJzXCJdPXpkW2JdPWF9ZnVuY3Rpb24gSihhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT96ZFthXXx8emRbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gSyhhKXt2YXIgYixjLGQ9e307Zm9yKGMgaW4gYSloKGEsYykmJihiPUooYyksYiYmKGRbYl09YVtjXSkpO3JldHVybiBkfWZ1bmN0aW9uIEwoYSxiKXtBZFthXT1ifWZ1bmN0aW9uIE0oYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYi5wdXNoKHt1bml0OmMscHJpb3JpdHk6QWRbY119KTtyZXR1cm4gYi5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucHJpb3JpdHktYi5wcmlvcml0eX0pLGJ9ZnVuY3Rpb24gTihiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gbnVsbCE9ZD8oUCh0aGlzLGIsZCksYS51cGRhdGVPZmZzZXQodGhpcyxjKSx0aGlzKTpPKHRoaXMsYil9fWZ1bmN0aW9uIE8oYSxiKXtyZXR1cm4gYS5pc1ZhbGlkKCk/YS5fZFtcImdldFwiKyhhLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK2JdKCk6TmFOfWZ1bmN0aW9uIFAoYSxiLGMpe2EuaXNWYWxpZCgpJiZhLl9kW1wic2V0XCIrKGEuX2lzVVRDP1wiVVRDXCI6XCJcIikrYl0oYyl9XG4vLyBNT01FTlRTXG5mdW5jdGlvbiBRKGEpe3JldHVybiBhPUooYSkseSh0aGlzW2FdKT90aGlzW2FdKCk6dGhpc31mdW5jdGlvbiBSKGEsYil7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2E9SyhhKTtmb3IodmFyIGM9TShhKSxkPTA7ZDxjLmxlbmd0aDtkKyspdGhpc1tjW2RdLnVuaXRdKGFbY1tkXS51bml0XSl9ZWxzZSBpZihhPUooYSkseSh0aGlzW2FdKSlyZXR1cm4gdGhpc1thXShiKTtyZXR1cm4gdGhpc31mdW5jdGlvbiBTKGEsYixjKXt2YXIgZD1cIlwiK01hdGguYWJzKGEpLGU9Yi1kLmxlbmd0aCxmPWE+PTA7cmV0dXJuKGY/Yz9cIitcIjpcIlwiOlwiLVwiKStNYXRoLnBvdygxMCxNYXRoLm1heCgwLGUpKS50b1N0cmluZygpLnN1YnN0cigxKStkfVxuLy8gdG9rZW46ICAgICdNJ1xuLy8gcGFkZGVkOiAgIFsnTU0nLCAyXVxuLy8gb3JkaW5hbDogICdNbydcbi8vIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7IHRoaXMubW9udGgoKSArIDEgfVxuZnVuY3Rpb24gVChhLGIsYyxkKXt2YXIgZT1kO1wic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1mdW5jdGlvbigpe3JldHVybiB0aGlzW2RdKCl9KSxhJiYoRWRbYV09ZSksYiYmKEVkW2JbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIFMoZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksYlsxXSxiWzJdKX0pLGMmJihFZFtjXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEpfSl9ZnVuY3Rpb24gVShhKXtyZXR1cm4gYS5tYXRjaCgvXFxbW1xcc1xcU10vKT9hLnJlcGxhY2UoL15cXFt8XFxdJC9nLFwiXCIpOmEucmVwbGFjZSgvXFxcXC9nLFwiXCIpfWZ1bmN0aW9uIFYoYSl7dmFyIGIsYyxkPWEubWF0Y2goQmQpO2ZvcihiPTAsYz1kLmxlbmd0aDtjPmI7YisrKUVkW2RbYl1dP2RbYl09RWRbZFtiXV06ZFtiXT1VKGRbYl0pO3JldHVybiBmdW5jdGlvbihiKXt2YXIgZSxmPVwiXCI7Zm9yKGU9MDtjPmU7ZSsrKWYrPWRbZV1pbnN0YW5jZW9mIEZ1bmN0aW9uP2RbZV0uY2FsbChiLGEpOmRbZV07cmV0dXJuIGZ9fVxuLy8gZm9ybWF0IGRhdGUgdXNpbmcgbmF0aXZlIGRhdGUgb2JqZWN0XG5mdW5jdGlvbiBXKGEsYil7cmV0dXJuIGEuaXNWYWxpZCgpPyhiPVgoYixhLmxvY2FsZURhdGEoKSksRGRbYl09RGRbYl18fFYoYiksRGRbYl0oYSkpOmEubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9ZnVuY3Rpb24gWChhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGIubG9uZ0RhdGVGb3JtYXQoYSl8fGF9dmFyIGQ9NTtmb3IoQ2QubGFzdEluZGV4PTA7ZD49MCYmQ2QudGVzdChhKTspYT1hLnJlcGxhY2UoQ2QsYyksQ2QubGFzdEluZGV4PTAsZC09MTtyZXR1cm4gYX1mdW5jdGlvbiBZKGEsYixjKXtXZFthXT15KGIpP2I6ZnVuY3Rpb24oYSxkKXtyZXR1cm4gYSYmYz9jOmJ9fWZ1bmN0aW9uIFooYSxiKXtyZXR1cm4gaChXZCxhKT9XZFthXShiLl9zdHJpY3QsYi5fbG9jYWxlKTpuZXcgUmVnRXhwKCQoYSkpfVxuLy8gQ29kZSBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU2MTQ5My9pcy10aGVyZS1hLXJlZ2V4cC1lc2NhcGUtZnVuY3Rpb24taW4tamF2YXNjcmlwdFxuZnVuY3Rpb24gJChhKXtyZXR1cm4gXyhhLnJlcGxhY2UoXCJcXFxcXCIsXCJcIikucmVwbGFjZSgvXFxcXChcXFspfFxcXFwoXFxdKXxcXFsoW15cXF1cXFtdKilcXF18XFxcXCguKS9nLGZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGJ8fGN8fGR8fGV9KSl9ZnVuY3Rpb24gXyhhKXtyZXR1cm4gYS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csXCJcXFxcJCZcIil9ZnVuY3Rpb24gYWEoYSxiKXt2YXIgYyxkPWI7Zm9yKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1bYV0pLFwibnVtYmVyXCI9PXR5cGVvZiBiJiYoZD1mdW5jdGlvbihhLGMpe2NbYl09dChhKX0pLGM9MDtjPGEubGVuZ3RoO2MrKylYZFthW2NdXT1kfWZ1bmN0aW9uIGJhKGEsYil7YWEoYSxmdW5jdGlvbihhLGMsZCxlKXtkLl93PWQuX3d8fHt9LGIoYSxkLl93LGQsZSl9KX1mdW5jdGlvbiBjYShhLGIsYyl7bnVsbCE9YiYmaChYZCxhKSYmWGRbYV0oYixjLl9hLGMsYSl9ZnVuY3Rpb24gZGEoYSxiKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoYSxiKzEsMCkpLmdldFVUQ0RhdGUoKX1mdW5jdGlvbiBlYShhLGIpe3JldHVybiBjKHRoaXMuX21vbnRocyk/dGhpcy5fbW9udGhzW2EubW9udGgoKV06dGhpcy5fbW9udGhzWyh0aGlzLl9tb250aHMuaXNGb3JtYXR8fGZlKS50ZXN0KGIpP1wiZm9ybWF0XCI6XCJzdGFuZGFsb25lXCJdW2EubW9udGgoKV19ZnVuY3Rpb24gZmEoYSxiKXtyZXR1cm4gYyh0aGlzLl9tb250aHNTaG9ydCk/dGhpcy5fbW9udGhzU2hvcnRbYS5tb250aCgpXTp0aGlzLl9tb250aHNTaG9ydFtmZS50ZXN0KGIpP1wiZm9ybWF0XCI6XCJzdGFuZGFsb25lXCJdW2EubW9udGgoKV19ZnVuY3Rpb24gZ2EoYSxiLGMpe3ZhciBkLGUsZixnPWEudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fbW9udGhzUGFyc2UpZm9yKFxuLy8gdGhpcyBpcyBub3QgdXNlZFxudGhpcy5fbW9udGhzUGFyc2U9W10sdGhpcy5fbG9uZ01vbnRoc1BhcnNlPVtdLHRoaXMuX3Nob3J0TW9udGhzUGFyc2U9W10sZD0wOzEyPmQ7KytkKWY9aihbMmUzLGRdKSx0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2RdPXRoaXMubW9udGhzU2hvcnQoZixcIlwiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLHRoaXMuX2xvbmdNb250aHNQYXJzZVtkXT10aGlzLm1vbnRocyhmLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCk7cmV0dXJuIGM/XCJNTU1cIj09PWI/KGU9c2QuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpOihlPXNkLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpOlwiTU1NXCI9PT1iPyhlPXNkLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKSk6KGU9c2QuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsZyksLTEhPT1lP2U6KGU9c2QuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpKX1mdW5jdGlvbiBoYShhLGIsYyl7dmFyIGQsZSxmO2lmKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpcmV0dXJuIGdhLmNhbGwodGhpcyxhLGIsYyk7XG4vLyBUT0RPOiBhZGQgc29ydGluZ1xuLy8gU29ydGluZyBtYWtlcyBzdXJlIGlmIG9uZSBtb250aCAob3IgYWJicikgaXMgYSBwcmVmaXggb2YgYW5vdGhlclxuLy8gc2VlIHNvcnRpbmcgaW4gY29tcHV0ZU1vbnRoc1BhcnNlXG5mb3IodGhpcy5fbW9udGhzUGFyc2V8fCh0aGlzLl9tb250aHNQYXJzZT1bXSx0aGlzLl9sb25nTW9udGhzUGFyc2U9W10sdGhpcy5fc2hvcnRNb250aHNQYXJzZT1bXSksZD0wOzEyPmQ7ZCsrKXtcbi8vIHRlc3QgdGhlIHJlZ2V4XG5pZihlPWooWzJlMyxkXSksYyYmIXRoaXMuX2xvbmdNb250aHNQYXJzZVtkXSYmKHRoaXMuX2xvbmdNb250aHNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMubW9udGhzKGUsXCJcIikucmVwbGFjZShcIi5cIixcIlwiKStcIiRcIixcImlcIiksdGhpcy5fc2hvcnRNb250aHNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMubW9udGhzU2hvcnQoZSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiXCIpK1wiJFwiLFwiaVwiKSksY3x8dGhpcy5fbW9udGhzUGFyc2VbZF18fChmPVwiXlwiK3RoaXMubW9udGhzKGUsXCJcIikrXCJ8XlwiK3RoaXMubW9udGhzU2hvcnQoZSxcIlwiKSx0aGlzLl9tb250aHNQYXJzZVtkXT1uZXcgUmVnRXhwKGYucmVwbGFjZShcIi5cIixcIlwiKSxcImlcIikpLGMmJlwiTU1NTVwiPT09YiYmdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2RdLnRlc3QoYSkpcmV0dXJuIGQ7aWYoYyYmXCJNTU1cIj09PWImJnRoaXMuX3Nob3J0TW9udGhzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZDtpZighYyYmdGhpcy5fbW9udGhzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZH19XG4vLyBNT01FTlRTXG5mdW5jdGlvbiBpYShhLGIpe3ZhciBjO2lmKCFhLmlzVmFsaWQoKSlcbi8vIE5vIG9wXG5yZXR1cm4gYTtpZihcInN0cmluZ1wiPT10eXBlb2YgYilpZigvXlxcZCskLy50ZXN0KGIpKWI9dChiKTtlbHNlXG4vLyBUT0RPOiBBbm90aGVyIHNpbGVudCBmYWlsdXJlP1xuaWYoYj1hLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZShiKSxcIm51bWJlclwiIT10eXBlb2YgYilyZXR1cm4gYTtyZXR1cm4gYz1NYXRoLm1pbihhLmRhdGUoKSxkYShhLnllYXIoKSxiKSksYS5fZFtcInNldFwiKyhhLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK1wiTW9udGhcIl0oYixjKSxhfWZ1bmN0aW9uIGphKGIpe3JldHVybiBudWxsIT1iPyhpYSh0aGlzLGIpLGEudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMpOk8odGhpcyxcIk1vbnRoXCIpfWZ1bmN0aW9uIGthKCl7cmV0dXJuIGRhKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSl9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3Q/KGgodGhpcyxcIl9tb250aHNSZWdleFwiKXx8bmEuY2FsbCh0aGlzKSxhP3RoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzU2hvcnRSZWdleCk6KGgodGhpcyxcIl9tb250aHNTaG9ydFJlZ2V4XCIpfHwodGhpcy5fbW9udGhzU2hvcnRSZWdleD1pZSksdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCYmYT90aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1Nob3J0UmVnZXgpfWZ1bmN0aW9uIG1hKGEpe3JldHVybiB0aGlzLl9tb250aHNQYXJzZUV4YWN0PyhoKHRoaXMsXCJfbW9udGhzUmVnZXhcIil8fG5hLmNhbGwodGhpcyksYT90aGlzLl9tb250aHNTdHJpY3RSZWdleDp0aGlzLl9tb250aHNSZWdleCk6KGgodGhpcyxcIl9tb250aHNSZWdleFwiKXx8KHRoaXMuX21vbnRoc1JlZ2V4PWplKSx0aGlzLl9tb250aHNTdHJpY3RSZWdleCYmYT90aGlzLl9tb250aHNTdHJpY3RSZWdleDp0aGlzLl9tb250aHNSZWdleCl9ZnVuY3Rpb24gbmEoKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJuIGIubGVuZ3RoLWEubGVuZ3RofXZhciBiLGMsZD1bXSxlPVtdLGY9W107Zm9yKGI9MDsxMj5iO2IrKyljPWooWzJlMyxiXSksZC5wdXNoKHRoaXMubW9udGhzU2hvcnQoYyxcIlwiKSksZS5wdXNoKHRoaXMubW9udGhzKGMsXCJcIikpLGYucHVzaCh0aGlzLm1vbnRocyhjLFwiXCIpKSxmLnB1c2godGhpcy5tb250aHNTaG9ydChjLFwiXCIpKTtmb3IoXG4vLyBTb3J0aW5nIG1ha2VzIHN1cmUgaWYgb25lIG1vbnRoIChvciBhYmJyKSBpcyBhIHByZWZpeCBvZiBhbm90aGVyIGl0XG4vLyB3aWxsIG1hdGNoIHRoZSBsb25nZXIgcGllY2UuXG5kLnNvcnQoYSksZS5zb3J0KGEpLGYuc29ydChhKSxiPTA7MTI+YjtiKyspZFtiXT1fKGRbYl0pLGVbYl09XyhlW2JdKTtmb3IoYj0wOzI0PmI7YisrKWZbYl09XyhmW2JdKTt0aGlzLl9tb250aHNSZWdleD1uZXcgUmVnRXhwKFwiXihcIitmLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKSx0aGlzLl9tb250aHNTaG9ydFJlZ2V4PXRoaXMuX21vbnRoc1JlZ2V4LHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4PW5ldyBSZWdFeHAoXCJeKFwiK2Uuam9pbihcInxcIikrXCIpXCIsXCJpXCIpLHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrZC5qb2luKFwifFwiKStcIilcIixcImlcIil9XG4vLyBIRUxQRVJTXG5mdW5jdGlvbiBvYShhKXtyZXR1cm4gcGEoYSk/MzY2OjM2NX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gYSU0PT09MCYmYSUxMDAhPT0wfHxhJTQwMD09PTB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4gcGEodGhpcy55ZWFyKCkpfWZ1bmN0aW9uIHJhKGEsYixjLGQsZSxmLGcpe1xuLy9jYW4ndCBqdXN0IGFwcGx5KCkgdG8gY3JlYXRlIGEgZGF0ZTpcbi8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODEzNDgvaW5zdGFudGlhdGluZy1hLWphdmFzY3JpcHQtb2JqZWN0LWJ5LWNhbGxpbmctcHJvdG90eXBlLWNvbnN0cnVjdG9yLWFwcGx5XG52YXIgaD1uZXcgRGF0ZShhLGIsYyxkLGUsZixnKTtcbi8vdGhlIGRhdGUgY29uc3RydWN0b3IgcmVtYXBzIHllYXJzIDAtOTkgdG8gMTkwMC0xOTk5XG5yZXR1cm4gMTAwPmEmJmE+PTAmJmlzRmluaXRlKGguZ2V0RnVsbFllYXIoKSkmJmguc2V0RnVsbFllYXIoYSksaH1mdW5jdGlvbiBzYShhKXt2YXIgYj1uZXcgRGF0ZShEYXRlLlVUQy5hcHBseShudWxsLGFyZ3VtZW50cykpO1xuLy90aGUgRGF0ZS5VVEMgZnVuY3Rpb24gcmVtYXBzIHllYXJzIDAtOTkgdG8gMTkwMC0xOTk5XG5yZXR1cm4gMTAwPmEmJmE+PTAmJmlzRmluaXRlKGIuZ2V0VVRDRnVsbFllYXIoKSkmJmIuc2V0VVRDRnVsbFllYXIoYSksYn1cbi8vIHN0YXJ0LW9mLWZpcnN0LXdlZWsgLSBzdGFydC1vZi15ZWFyXG5mdW5jdGlvbiB0YShhLGIsYyl7dmFyLy8gZmlyc3Qtd2VlayBkYXkgLS0gd2hpY2ggamFudWFyeSBpcyBhbHdheXMgaW4gdGhlIGZpcnN0IHdlZWsgKDQgZm9yIGlzbywgMSBmb3Igb3RoZXIpXG5kPTcrYi1jLFxuLy8gZmlyc3Qtd2VlayBkYXkgbG9jYWwgd2Vla2RheSAtLSB3aGljaCBsb2NhbCB3ZWVrZGF5IGlzIGZ3ZFxuZT0oNytzYShhLDAsZCkuZ2V0VVRDRGF5KCktYiklNztyZXR1cm4tZStkLTF9XG4vL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZSNDYWxjdWxhdGluZ19hX2RhdGVfZ2l2ZW5fdGhlX3llYXIuMkNfd2Vla19udW1iZXJfYW5kX3dlZWtkYXlcbmZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7dmFyIGYsZyxoPSg3K2MtZCklNyxpPXRhKGEsZCxlKSxqPTErNyooYi0xKStoK2k7cmV0dXJuIDA+PWo/KGY9YS0xLGc9b2EoZikraik6aj5vYShhKT8oZj1hKzEsZz1qLW9hKGEpKTooZj1hLGc9aikse3llYXI6ZixkYXlPZlllYXI6Z319ZnVuY3Rpb24gdmEoYSxiLGMpe3ZhciBkLGUsZj10YShhLnllYXIoKSxiLGMpLGc9TWF0aC5mbG9vcigoYS5kYXlPZlllYXIoKS1mLTEpLzcpKzE7cmV0dXJuIDE+Zz8oZT1hLnllYXIoKS0xLGQ9Zyt3YShlLGIsYykpOmc+d2EoYS55ZWFyKCksYixjKT8oZD1nLXdhKGEueWVhcigpLGIsYyksZT1hLnllYXIoKSsxKTooZT1hLnllYXIoKSxkPWcpLHt3ZWVrOmQseWVhcjplfX1mdW5jdGlvbiB3YShhLGIsYyl7dmFyIGQ9dGEoYSxiLGMpLGU9dGEoYSsxLGIsYyk7cmV0dXJuKG9hKGEpLWQrZSkvN31cbi8vIEhFTFBFUlNcbi8vIExPQ0FMRVNcbmZ1bmN0aW9uIHhhKGEpe3JldHVybiB2YShhLHRoaXMuX3dlZWsuZG93LHRoaXMuX3dlZWsuZG95KS53ZWVrfWZ1bmN0aW9uIHlhKCl7cmV0dXJuIHRoaXMuX3dlZWsuZG93fWZ1bmN0aW9uIHphKCl7cmV0dXJuIHRoaXMuX3dlZWsuZG95fVxuLy8gTU9NRU5UU1xuZnVuY3Rpb24gQWEoYSl7dmFyIGI9dGhpcy5sb2NhbGVEYXRhKCkud2Vlayh0aGlzKTtyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKDcqKGEtYiksXCJkXCIpfWZ1bmN0aW9uIEJhKGEpe3ZhciBiPXZhKHRoaXMsMSw0KS53ZWVrO3JldHVybiBudWxsPT1hP2I6dGhpcy5hZGQoNyooYS1iKSxcImRcIil9XG4vLyBIRUxQRVJTXG5mdW5jdGlvbiBDYShhLGIpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhP2E6aXNOYU4oYSk/KGE9Yi53ZWVrZGF5c1BhcnNlKGEpLFwibnVtYmVyXCI9PXR5cGVvZiBhP2E6bnVsbCk6cGFyc2VJbnQoYSwxMCl9ZnVuY3Rpb24gRGEoYSxiKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT9iLndlZWtkYXlzUGFyc2UoYSklN3x8Nzppc05hTihhKT9udWxsOmF9ZnVuY3Rpb24gRWEoYSxiKXtyZXR1cm4gYyh0aGlzLl93ZWVrZGF5cyk/dGhpcy5fd2Vla2RheXNbYS5kYXkoKV06dGhpcy5fd2Vla2RheXNbdGhpcy5fd2Vla2RheXMuaXNGb3JtYXQudGVzdChiKT9cImZvcm1hdFwiOlwic3RhbmRhbG9uZVwiXVthLmRheSgpXX1mdW5jdGlvbiBGYShhKXtyZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFthLmRheSgpXX1mdW5jdGlvbiBHYShhKXtyZXR1cm4gdGhpcy5fd2Vla2RheXNNaW5bYS5kYXkoKV19ZnVuY3Rpb24gSGEoYSxiLGMpe3ZhciBkLGUsZixnPWEudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fd2Vla2RheXNQYXJzZSlmb3IodGhpcy5fd2Vla2RheXNQYXJzZT1bXSx0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2U9W10sdGhpcy5fbWluV2Vla2RheXNQYXJzZT1bXSxkPTA7Nz5kOysrZClmPWooWzJlMywxXSkuZGF5KGQpLHRoaXMuX21pbldlZWtkYXlzUGFyc2VbZF09dGhpcy53ZWVrZGF5c01pbihmLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCksdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2RdPXRoaXMud2Vla2RheXNTaG9ydChmLFwiXCIpLnRvTG9jYWxlTG93ZXJDYXNlKCksdGhpcy5fd2Vla2RheXNQYXJzZVtkXT10aGlzLndlZWtkYXlzKGYsXCJcIikudG9Mb2NhbGVMb3dlckNhc2UoKTtyZXR1cm4gYz9cImRkZGRcIj09PWI/KGU9c2QuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpOlwiZGRkXCI9PT1iPyhlPXNkLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpOihlPXNkLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKTpcImRkZGRcIj09PWI/KGU9c2QuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOihlPXNkLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOihlPXNkLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTpudWxsKSkpOlwiZGRkXCI9PT1iPyhlPXNkLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOihlPXNkLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxnKSwtMSE9PWU/ZTooZT1zZC5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsZyksLTEhPT1lP2U6bnVsbCkpKTooZT1zZC5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsZyksLTEhPT1lP2U6KGU9c2QuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOihlPXNkLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGcpLC0xIT09ZT9lOm51bGwpKSl9ZnVuY3Rpb24gSWEoYSxiLGMpe3ZhciBkLGUsZjtpZih0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpcmV0dXJuIEhhLmNhbGwodGhpcyxhLGIsYyk7Zm9yKHRoaXMuX3dlZWtkYXlzUGFyc2V8fCh0aGlzLl93ZWVrZGF5c1BhcnNlPVtdLHRoaXMuX21pbldlZWtkYXlzUGFyc2U9W10sdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlPVtdLHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlPVtdKSxkPTA7Nz5kO2QrKyl7XG4vLyB0ZXN0IHRoZSByZWdleFxuaWYoZT1qKFsyZTMsMV0pLmRheShkKSxjJiYhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbZF0mJih0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMud2Vla2RheXMoZSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiLj9cIikrXCIkXCIsXCJpXCIpLHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMud2Vla2RheXNTaG9ydChlLFwiXCIpLnJlcGxhY2UoXCIuXCIsXCIuP1wiKStcIiRcIixcImlcIiksdGhpcy5fbWluV2Vla2RheXNQYXJzZVtkXT1uZXcgUmVnRXhwKFwiXlwiK3RoaXMud2Vla2RheXNNaW4oZSxcIlwiKS5yZXBsYWNlKFwiLlwiLFwiLj9cIikrXCIkXCIsXCJpXCIpKSx0aGlzLl93ZWVrZGF5c1BhcnNlW2RdfHwoZj1cIl5cIit0aGlzLndlZWtkYXlzKGUsXCJcIikrXCJ8XlwiK3RoaXMud2Vla2RheXNTaG9ydChlLFwiXCIpK1wifF5cIit0aGlzLndlZWtkYXlzTWluKGUsXCJcIiksdGhpcy5fd2Vla2RheXNQYXJzZVtkXT1uZXcgUmVnRXhwKGYucmVwbGFjZShcIi5cIixcIlwiKSxcImlcIikpLGMmJlwiZGRkZFwiPT09YiYmdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbZF0udGVzdChhKSlyZXR1cm4gZDtpZihjJiZcImRkZFwiPT09YiYmdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2RdLnRlc3QoYSkpcmV0dXJuIGQ7aWYoYyYmXCJkZFwiPT09YiYmdGhpcy5fbWluV2Vla2RheXNQYXJzZVtkXS50ZXN0KGEpKXJldHVybiBkO2lmKCFjJiZ0aGlzLl93ZWVrZGF5c1BhcnNlW2RdLnRlc3QoYSkpcmV0dXJuIGR9fVxuLy8gTU9NRU5UU1xuZnVuY3Rpb24gSmEoYSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1hP3RoaXM6TmFOO3ZhciBiPXRoaXMuX2lzVVRDP3RoaXMuX2QuZ2V0VVRDRGF5KCk6dGhpcy5fZC5nZXREYXkoKTtyZXR1cm4gbnVsbCE9YT8oYT1DYShhLHRoaXMubG9jYWxlRGF0YSgpKSx0aGlzLmFkZChhLWIsXCJkXCIpKTpifWZ1bmN0aW9uIEthKGEpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbnVsbCE9YT90aGlzOk5hTjt2YXIgYj0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcImRcIil9ZnVuY3Rpb24gTGEoYSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1hP3RoaXM6TmFOO1xuLy8gYmVoYXZlcyB0aGUgc2FtZSBhcyBtb21lbnQjZGF5IGV4Y2VwdFxuLy8gYXMgYSBnZXR0ZXIsIHJldHVybnMgNyBpbnN0ZWFkIG9mIDAgKDEtNyByYW5nZSBpbnN0ZWFkIG9mIDAtNilcbi8vIGFzIGEgc2V0dGVyLCBzdW5kYXkgc2hvdWxkIGJlbG9uZyB0byB0aGUgcHJldmlvdXMgd2Vlay5cbmlmKG51bGwhPWEpe3ZhciBiPURhKGEsdGhpcy5sb2NhbGVEYXRhKCkpO3JldHVybiB0aGlzLmRheSh0aGlzLmRheSgpJTc/YjpiLTcpfXJldHVybiB0aGlzLmRheSgpfHw3fWZ1bmN0aW9uIE1hKGEpe3JldHVybiB0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3Q/KGgodGhpcyxcIl93ZWVrZGF5c1JlZ2V4XCIpfHxQYS5jYWxsKHRoaXMpLGE/dGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1JlZ2V4KTooaCh0aGlzLFwiX3dlZWtkYXlzUmVnZXhcIil8fCh0aGlzLl93ZWVrZGF5c1JlZ2V4PXBlKSx0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4JiZhP3RoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNSZWdleCl9ZnVuY3Rpb24gTmEoYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdD8oaCh0aGlzLFwiX3dlZWtkYXlzUmVnZXhcIil8fFBhLmNhbGwodGhpcyksYT90aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4KTooaCh0aGlzLFwiX3dlZWtkYXlzU2hvcnRSZWdleFwiKXx8KHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleD1xZSksdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4JiZhP3RoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXgpfWZ1bmN0aW9uIE9hKGEpe3JldHVybiB0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3Q/KGgodGhpcyxcIl93ZWVrZGF5c1JlZ2V4XCIpfHxQYS5jYWxsKHRoaXMpLGE/dGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleDp0aGlzLl93ZWVrZGF5c01pblJlZ2V4KTooaCh0aGlzLFwiX3dlZWtkYXlzTWluUmVnZXhcIil8fCh0aGlzLl93ZWVrZGF5c01pblJlZ2V4PXJlKSx0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4JiZhP3RoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNNaW5SZWdleCl9ZnVuY3Rpb24gUGEoKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJuIGIubGVuZ3RoLWEubGVuZ3RofXZhciBiLGMsZCxlLGYsZz1bXSxoPVtdLGk9W10saz1bXTtmb3IoYj0wOzc+YjtiKyspYz1qKFsyZTMsMV0pLmRheShiKSxkPXRoaXMud2Vla2RheXNNaW4oYyxcIlwiKSxlPXRoaXMud2Vla2RheXNTaG9ydChjLFwiXCIpLGY9dGhpcy53ZWVrZGF5cyhjLFwiXCIpLGcucHVzaChkKSxoLnB1c2goZSksaS5wdXNoKGYpLGsucHVzaChkKSxrLnB1c2goZSksay5wdXNoKGYpO2Zvcihcbi8vIFNvcnRpbmcgbWFrZXMgc3VyZSBpZiBvbmUgd2Vla2RheSAob3IgYWJicikgaXMgYSBwcmVmaXggb2YgYW5vdGhlciBpdFxuLy8gd2lsbCBtYXRjaCB0aGUgbG9uZ2VyIHBpZWNlLlxuZy5zb3J0KGEpLGguc29ydChhKSxpLnNvcnQoYSksay5zb3J0KGEpLGI9MDs3PmI7YisrKWhbYl09XyhoW2JdKSxpW2JdPV8oaVtiXSksa1tiXT1fKGtbYl0pO3RoaXMuX3dlZWtkYXlzUmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIray5qb2luKFwifFwiKStcIilcIixcImlcIiksdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PXRoaXMuX3dlZWtkYXlzUmVnZXgsdGhpcy5fd2Vla2RheXNNaW5SZWdleD10aGlzLl93ZWVrZGF5c1JlZ2V4LHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIraS5qb2luKFwifFwiKStcIilcIixcImlcIiksdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4PW5ldyBSZWdFeHAoXCJeKFwiK2guam9pbihcInxcIikrXCIpXCIsXCJpXCIpLHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cChcIl4oXCIrZy5qb2luKFwifFwiKStcIilcIixcImlcIil9XG4vLyBGT1JNQVRUSU5HXG5mdW5jdGlvbiBRYSgpe3JldHVybiB0aGlzLmhvdXJzKCklMTJ8fDEyfWZ1bmN0aW9uIFJhKCl7cmV0dXJuIHRoaXMuaG91cnMoKXx8MjR9ZnVuY3Rpb24gU2EoYSxiKXtUKGEsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSx0aGlzLm1pbnV0ZXMoKSxiKX0pfVxuLy8gUEFSU0lOR1xuZnVuY3Rpb24gVGEoYSxiKXtyZXR1cm4gYi5fbWVyaWRpZW1QYXJzZX1cbi8vIExPQ0FMRVNcbmZ1bmN0aW9uIFVhKGEpe1xuLy8gSUU4IFF1aXJrcyBNb2RlICYgSUU3IFN0YW5kYXJkcyBNb2RlIGRvIG5vdCBhbGxvdyBhY2Nlc3Npbmcgc3RyaW5ncyBsaWtlIGFycmF5c1xuLy8gVXNpbmcgY2hhckF0IHNob3VsZCBiZSBtb3JlIGNvbXBhdGlibGUuXG5yZXR1cm5cInBcIj09PShhK1wiXCIpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApfWZ1bmN0aW9uIFZhKGEsYixjKXtyZXR1cm4gYT4xMT9jP1wicG1cIjpcIlBNXCI6Yz9cImFtXCI6XCJBTVwifWZ1bmN0aW9uIFdhKGEpe3JldHVybiBhP2EudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwiX1wiLFwiLVwiKTphfVxuLy8gcGljayB0aGUgbG9jYWxlIGZyb20gdGhlIGFycmF5XG4vLyB0cnkgWydlbi1hdScsICdlbi1nYiddIGFzICdlbi1hdScsICdlbi1nYicsICdlbicsIGFzIGluIG1vdmUgdGhyb3VnaCB0aGUgbGlzdCB0cnlpbmcgZWFjaFxuLy8gc3Vic3RyaW5nIGZyb20gbW9zdCBzcGVjaWZpYyB0byBsZWFzdCwgYnV0IG1vdmUgdG8gdGhlIG5leHQgYXJyYXkgaXRlbSBpZiBpdCdzIGEgbW9yZSBzcGVjaWZpYyB2YXJpYW50IHRoYW4gdGhlIGN1cnJlbnQgcm9vdFxuZnVuY3Rpb24gWGEoYSl7Zm9yKHZhciBiLGMsZCxlLGY9MDtmPGEubGVuZ3RoOyl7Zm9yKGU9V2EoYVtmXSkuc3BsaXQoXCItXCIpLGI9ZS5sZW5ndGgsYz1XYShhW2YrMV0pLGM9Yz9jLnNwbGl0KFwiLVwiKTpudWxsO2I+MDspe2lmKGQ9WWEoZS5zbGljZSgwLGIpLmpvaW4oXCItXCIpKSlyZXR1cm4gZDtpZihjJiZjLmxlbmd0aD49YiYmdShlLGMsITApPj1iLTEpXG4vL3RoZSBuZXh0IGFycmF5IGl0ZW0gaXMgYmV0dGVyIHRoYW4gYSBzaGFsbG93ZXIgc3Vic3RyaW5nIG9mIHRoaXMgb25lXG5icmVhaztiLS19ZisrfXJldHVybiBudWxsfWZ1bmN0aW9uIFlhKGEpe3ZhciBiPW51bGw7XG4vLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byByZWdpc3RlciBhbmQgbG9hZCBhbGwgdGhlIGxvY2FsZXMgaW4gTm9kZVxuaWYoIXdlW2FdJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUmJm1vZHVsZS5leHBvcnRzKXRyeXtiPXNlLl9hYmJyLHJlcXVpcmUoXCIuL2xvY2FsZS9cIithKSxcbi8vIGJlY2F1c2UgZGVmaW5lTG9jYWxlIGN1cnJlbnRseSBhbHNvIHNldHMgdGhlIGdsb2JhbCBsb2NhbGUsIHdlXG4vLyB3YW50IHRvIHVuZG8gdGhhdCBmb3IgbGF6eSBsb2FkZWQgbG9jYWxlc1xuWmEoYil9Y2F0Y2goYyl7fXJldHVybiB3ZVthXX1cbi8vIFRoaXMgZnVuY3Rpb24gd2lsbCBsb2FkIGxvY2FsZSBhbmQgdGhlbiBzZXQgdGhlIGdsb2JhbCBsb2NhbGUuICBJZlxuLy8gbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgaW4sIGl0IHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBnbG9iYWxcbi8vIGxvY2FsZSBrZXkuXG5mdW5jdGlvbiBaYShhLGIpe3ZhciBjO1xuLy8gbW9tZW50LmR1cmF0aW9uLl9sb2NhbGUgPSBtb21lbnQuX2xvY2FsZSA9IGRhdGE7XG5yZXR1cm4gYSYmKGM9byhiKT9hYihhKTokYShhLGIpLGMmJihzZT1jKSksc2UuX2FiYnJ9ZnVuY3Rpb24gJGEoYSxiKXtpZihudWxsIT09Yil7dmFyIGM9dmU7XG4vLyB0cmVhdCBhcyBpZiB0aGVyZSBpcyBubyBiYXNlIGNvbmZpZ1xuLy8gYmFja3dhcmRzIGNvbXBhdCBmb3Igbm93OiBhbHNvIHNldCB0aGUgbG9jYWxlXG5yZXR1cm4gYi5hYmJyPWEsbnVsbCE9d2VbYV0/KHgoXCJkZWZpbmVMb2NhbGVPdmVycmlkZVwiLFwidXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgYW4gZXhpc3RpbmcgbG9jYWxlLiBtb21lbnQuZGVmaW5lTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uXCIpLGM9d2VbYV0uX2NvbmZpZyk6bnVsbCE9Yi5wYXJlbnRMb2NhbGUmJihudWxsIT13ZVtiLnBhcmVudExvY2FsZV0/Yz13ZVtiLnBhcmVudExvY2FsZV0uX2NvbmZpZzp4KFwicGFyZW50TG9jYWxlVW5kZWZpbmVkXCIsXCJzcGVjaWZpZWQgcGFyZW50TG9jYWxlIGlzIG5vdCBkZWZpbmVkIHlldC4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvcGFyZW50LWxvY2FsZS9cIikpLHdlW2FdPW5ldyBCKEEoYyxiKSksWmEoYSksd2VbYV19XG4vLyB1c2VmdWwgZm9yIHRlc3RpbmdcbnJldHVybiBkZWxldGUgd2VbYV0sbnVsbH1mdW5jdGlvbiBfYShhLGIpe2lmKG51bGwhPWIpe3ZhciBjLGQ9dmU7XG4vLyBNRVJHRVxubnVsbCE9d2VbYV0mJihkPXdlW2FdLl9jb25maWcpLGI9QShkLGIpLGM9bmV3IEIoYiksYy5wYXJlbnRMb2NhbGU9d2VbYV0sd2VbYV09Yyxcbi8vIGJhY2t3YXJkcyBjb21wYXQgZm9yIG5vdzogYWxzbyBzZXQgdGhlIGxvY2FsZVxuWmEoYSl9ZWxzZVxuLy8gcGFzcyBudWxsIGZvciBjb25maWcgdG8gdW51cGRhdGUsIHVzZWZ1bCBmb3IgdGVzdHNcbm51bGwhPXdlW2FdJiYobnVsbCE9d2VbYV0ucGFyZW50TG9jYWxlP3dlW2FdPXdlW2FdLnBhcmVudExvY2FsZTpudWxsIT13ZVthXSYmZGVsZXRlIHdlW2FdKTtyZXR1cm4gd2VbYV19XG4vLyByZXR1cm5zIGxvY2FsZSBkYXRhXG5mdW5jdGlvbiBhYihhKXt2YXIgYjtpZihhJiZhLl9sb2NhbGUmJmEuX2xvY2FsZS5fYWJiciYmKGE9YS5fbG9jYWxlLl9hYmJyKSwhYSlyZXR1cm4gc2U7aWYoIWMoYSkpe2lmKGI9WWEoYSkpcmV0dXJuIGI7YT1bYV19cmV0dXJuIFhhKGEpfWZ1bmN0aW9uIGJiKCl7cmV0dXJuIHJkKHdlKX1mdW5jdGlvbiBjYihhKXt2YXIgYixjPWEuX2E7cmV0dXJuIGMmJi0yPT09bChhKS5vdmVyZmxvdyYmKGI9Y1taZF08MHx8Y1taZF0+MTE/WmQ6Y1skZF08MXx8Y1skZF0+ZGEoY1tZZF0sY1taZF0pPyRkOmNbX2RdPDB8fGNbX2RdPjI0fHwyND09PWNbX2RdJiYoMCE9PWNbYWVdfHwwIT09Y1tiZV18fDAhPT1jW2NlXSk/X2Q6Y1thZV08MHx8Y1thZV0+NTk/YWU6Y1tiZV08MHx8Y1tiZV0+NTk/YmU6Y1tjZV08MHx8Y1tjZV0+OTk5P2NlOi0xLGwoYSkuX292ZXJmbG93RGF5T2ZZZWFyJiYoWWQ+Ynx8Yj4kZCkmJihiPSRkKSxsKGEpLl9vdmVyZmxvd1dlZWtzJiYtMT09PWImJihiPWRlKSxsKGEpLl9vdmVyZmxvd1dlZWtkYXkmJi0xPT09YiYmKGI9ZWUpLGwoYSkub3ZlcmZsb3c9YiksYX1cbi8vIGRhdGUgZnJvbSBpc28gZm9ybWF0XG5mdW5jdGlvbiBkYihhKXt2YXIgYixjLGQsZSxmLGcsaD1hLl9pLGk9eGUuZXhlYyhoKXx8eWUuZXhlYyhoKTtpZihpKXtmb3IobChhKS5pc289ITAsYj0wLGM9QWUubGVuZ3RoO2M+YjtiKyspaWYoQWVbYl1bMV0uZXhlYyhpWzFdKSl7ZT1BZVtiXVswXSxkPUFlW2JdWzJdIT09ITE7YnJlYWt9aWYobnVsbD09ZSlyZXR1cm4gdm9pZChhLl9pc1ZhbGlkPSExKTtpZihpWzNdKXtmb3IoYj0wLGM9QmUubGVuZ3RoO2M+YjtiKyspaWYoQmVbYl1bMV0uZXhlYyhpWzNdKSl7XG4vLyBtYXRjaFsyXSBzaG91bGQgYmUgJ1QnIG9yIHNwYWNlXG5mPShpWzJdfHxcIiBcIikrQmVbYl1bMF07YnJlYWt9aWYobnVsbD09ZilyZXR1cm4gdm9pZChhLl9pc1ZhbGlkPSExKX1pZighZCYmbnVsbCE9ZilyZXR1cm4gdm9pZChhLl9pc1ZhbGlkPSExKTtpZihpWzRdKXtpZighemUuZXhlYyhpWzRdKSlyZXR1cm4gdm9pZChhLl9pc1ZhbGlkPSExKTtnPVwiWlwifWEuX2Y9ZSsoZnx8XCJcIikrKGd8fFwiXCIpLGpiKGEpfWVsc2UgYS5faXNWYWxpZD0hMX1cbi8vIGRhdGUgZnJvbSBpc28gZm9ybWF0IG9yIGZhbGxiYWNrXG5mdW5jdGlvbiBlYihiKXt2YXIgYz1DZS5leGVjKGIuX2kpO3JldHVybiBudWxsIT09Yz92b2lkKGIuX2Q9bmV3IERhdGUoK2NbMV0pKTooZGIoYiksdm9pZChiLl9pc1ZhbGlkPT09ITEmJihkZWxldGUgYi5faXNWYWxpZCxhLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGIpKSkpfVxuLy8gUGljayB0aGUgZmlyc3QgZGVmaW5lZCBvZiB0d28gb3IgdGhyZWUgYXJndW1lbnRzLlxuZnVuY3Rpb24gZmIoYSxiLGMpe3JldHVybiBudWxsIT1hP2E6bnVsbCE9Yj9iOmN9ZnVuY3Rpb24gZ2IoYil7XG4vLyBob29rcyBpcyBhY3R1YWxseSB0aGUgZXhwb3J0ZWQgbW9tZW50IG9iamVjdFxudmFyIGM9bmV3IERhdGUoYS5ub3coKSk7cmV0dXJuIGIuX3VzZVVUQz9bYy5nZXRVVENGdWxsWWVhcigpLGMuZ2V0VVRDTW9udGgoKSxjLmdldFVUQ0RhdGUoKV06W2MuZ2V0RnVsbFllYXIoKSxjLmdldE1vbnRoKCksYy5nZXREYXRlKCldfVxuLy8gY29udmVydCBhbiBhcnJheSB0byBhIGRhdGUuXG4vLyB0aGUgYXJyYXkgc2hvdWxkIG1pcnJvciB0aGUgcGFyYW1ldGVycyBiZWxvd1xuLy8gbm90ZTogYWxsIHZhbHVlcyBwYXN0IHRoZSB5ZWFyIGFyZSBvcHRpb25hbCBhbmQgd2lsbCBkZWZhdWx0IHRvIHRoZSBsb3dlc3QgcG9zc2libGUgdmFsdWUuXG4vLyBbeWVhciwgbW9udGgsIGRheSAsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF1cbmZ1bmN0aW9uIGhiKGEpe3ZhciBiLGMsZCxlLGY9W107aWYoIWEuX2Qpe1xuLy8gRGVmYXVsdCB0byBjdXJyZW50IGRhdGUuXG4vLyAqIGlmIG5vIHllYXIsIG1vbnRoLCBkYXkgb2YgbW9udGggYXJlIGdpdmVuLCBkZWZhdWx0IHRvIHRvZGF5XG4vLyAqIGlmIGRheSBvZiBtb250aCBpcyBnaXZlbiwgZGVmYXVsdCBtb250aCBhbmQgeWVhclxuLy8gKiBpZiBtb250aCBpcyBnaXZlbiwgZGVmYXVsdCBvbmx5IHllYXJcbi8vICogaWYgeWVhciBpcyBnaXZlbiwgZG9uJ3QgZGVmYXVsdCBhbnl0aGluZ1xuZm9yKGQ9Z2IoYSksYS5fdyYmbnVsbD09YS5fYVskZF0mJm51bGw9PWEuX2FbWmRdJiZpYihhKSxhLl9kYXlPZlllYXImJihlPWZiKGEuX2FbWWRdLGRbWWRdKSxhLl9kYXlPZlllYXI+b2EoZSkmJihsKGEpLl9vdmVyZmxvd0RheU9mWWVhcj0hMCksYz1zYShlLDAsYS5fZGF5T2ZZZWFyKSxhLl9hW1pkXT1jLmdldFVUQ01vbnRoKCksYS5fYVskZF09Yy5nZXRVVENEYXRlKCkpLGI9MDszPmImJm51bGw9PWEuX2FbYl07KytiKWEuX2FbYl09ZltiXT1kW2JdO1xuLy8gWmVybyBvdXQgd2hhdGV2ZXIgd2FzIG5vdCBkZWZhdWx0ZWQsIGluY2x1ZGluZyB0aW1lXG5mb3IoOzc+YjtiKyspYS5fYVtiXT1mW2JdPW51bGw9PWEuX2FbYl0/Mj09PWI/MTowOmEuX2FbYl07XG4vLyBDaGVjayBmb3IgMjQ6MDA6MDAuMDAwXG4yND09PWEuX2FbX2RdJiYwPT09YS5fYVthZV0mJjA9PT1hLl9hW2JlXSYmMD09PWEuX2FbY2VdJiYoYS5fbmV4dERheT0hMCxhLl9hW19kXT0wKSxhLl9kPShhLl91c2VVVEM/c2E6cmEpLmFwcGx5KG51bGwsZiksXG4vLyBBcHBseSB0aW1lem9uZSBvZmZzZXQgZnJvbSBpbnB1dC4gVGhlIGFjdHVhbCB1dGNPZmZzZXQgY2FuIGJlIGNoYW5nZWRcbi8vIHdpdGggcGFyc2Vab25lLlxubnVsbCE9YS5fdHptJiZhLl9kLnNldFVUQ01pbnV0ZXMoYS5fZC5nZXRVVENNaW51dGVzKCktYS5fdHptKSxhLl9uZXh0RGF5JiYoYS5fYVtfZF09MjQpfX1mdW5jdGlvbiBpYihhKXt2YXIgYixjLGQsZSxmLGcsaCxpO2I9YS5fdyxudWxsIT1iLkdHfHxudWxsIT1iLld8fG51bGwhPWIuRT8oZj0xLGc9NCxjPWZiKGIuR0csYS5fYVtZZF0sdmEocmIoKSwxLDQpLnllYXIpLGQ9ZmIoYi5XLDEpLGU9ZmIoYi5FLDEpLCgxPmV8fGU+NykmJihpPSEwKSk6KGY9YS5fbG9jYWxlLl93ZWVrLmRvdyxnPWEuX2xvY2FsZS5fd2Vlay5kb3ksYz1mYihiLmdnLGEuX2FbWWRdLHZhKHJiKCksZixnKS55ZWFyKSxkPWZiKGIudywxKSxudWxsIT1iLmQ/KGU9Yi5kLCgwPmV8fGU+NikmJihpPSEwKSk6bnVsbCE9Yi5lPyhlPWIuZStmLChiLmU8MHx8Yi5lPjYpJiYoaT0hMCkpOmU9ZiksMT5kfHxkPndhKGMsZixnKT9sKGEpLl9vdmVyZmxvd1dlZWtzPSEwOm51bGwhPWk/bChhKS5fb3ZlcmZsb3dXZWVrZGF5PSEwOihoPXVhKGMsZCxlLGYsZyksYS5fYVtZZF09aC55ZWFyLGEuX2RheU9mWWVhcj1oLmRheU9mWWVhcil9XG4vLyBkYXRlIGZyb20gc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nXG5mdW5jdGlvbiBqYihiKXtcbi8vIFRPRE86IE1vdmUgdGhpcyB0byBhbm90aGVyIHBhcnQgb2YgdGhlIGNyZWF0aW9uIGZsb3cgdG8gcHJldmVudCBjaXJjdWxhciBkZXBzXG5pZihiLl9mPT09YS5JU09fODYwMSlyZXR1cm4gdm9pZCBkYihiKTtiLl9hPVtdLGwoYikuZW1wdHk9ITA7XG4vLyBUaGlzIGFycmF5IGlzIHVzZWQgdG8gbWFrZSBhIERhdGUsIGVpdGhlciB3aXRoIGBuZXcgRGF0ZWAgb3IgYERhdGUuVVRDYFxudmFyIGMsZCxlLGYsZyxoPVwiXCIrYi5faSxpPWgubGVuZ3RoLGo9MDtmb3IoZT1YKGIuX2YsYi5fbG9jYWxlKS5tYXRjaChCZCl8fFtdLGM9MDtjPGUubGVuZ3RoO2MrKylmPWVbY10sZD0oaC5tYXRjaChaKGYsYikpfHxbXSlbMF0sZCYmKGc9aC5zdWJzdHIoMCxoLmluZGV4T2YoZCkpLGcubGVuZ3RoPjAmJmwoYikudW51c2VkSW5wdXQucHVzaChnKSxoPWguc2xpY2UoaC5pbmRleE9mKGQpK2QubGVuZ3RoKSxqKz1kLmxlbmd0aCksRWRbZl0/KGQ/bChiKS5lbXB0eT0hMTpsKGIpLnVudXNlZFRva2Vucy5wdXNoKGYpLGNhKGYsZCxiKSk6Yi5fc3RyaWN0JiYhZCYmbChiKS51bnVzZWRUb2tlbnMucHVzaChmKTtcbi8vIGFkZCByZW1haW5pbmcgdW5wYXJzZWQgaW5wdXQgbGVuZ3RoIHRvIHRoZSBzdHJpbmdcbmwoYikuY2hhcnNMZWZ0T3Zlcj1pLWosaC5sZW5ndGg+MCYmbChiKS51bnVzZWRJbnB1dC5wdXNoKGgpLFxuLy8gY2xlYXIgXzEyaCBmbGFnIGlmIGhvdXIgaXMgPD0gMTJcbmIuX2FbX2RdPD0xMiYmbChiKS5iaWdIb3VyPT09ITAmJmIuX2FbX2RdPjAmJihsKGIpLmJpZ0hvdXI9dm9pZCAwKSxsKGIpLnBhcnNlZERhdGVQYXJ0cz1iLl9hLnNsaWNlKDApLGwoYikubWVyaWRpZW09Yi5fbWVyaWRpZW0sXG4vLyBoYW5kbGUgbWVyaWRpZW1cbmIuX2FbX2RdPWtiKGIuX2xvY2FsZSxiLl9hW19kXSxiLl9tZXJpZGllbSksaGIoYiksY2IoYil9ZnVuY3Rpb24ga2IoYSxiLGMpe3ZhciBkO1xuLy8gRmFsbGJhY2tcbnJldHVybiBudWxsPT1jP2I6bnVsbCE9YS5tZXJpZGllbUhvdXI/YS5tZXJpZGllbUhvdXIoYixjKTpudWxsIT1hLmlzUE0/KGQ9YS5pc1BNKGMpLGQmJjEyPmImJihiKz0xMiksZHx8MTIhPT1ifHwoYj0wKSxiKTpifVxuLy8gZGF0ZSBmcm9tIHN0cmluZyBhbmQgYXJyYXkgb2YgZm9ybWF0IHN0cmluZ3NcbmZ1bmN0aW9uIGxiKGEpe3ZhciBiLGMsZCxlLGY7aWYoMD09PWEuX2YubGVuZ3RoKXJldHVybiBsKGEpLmludmFsaWRGb3JtYXQ9ITAsdm9pZChhLl9kPW5ldyBEYXRlKE5hTikpO2ZvcihlPTA7ZTxhLl9mLmxlbmd0aDtlKyspZj0wLGI9cCh7fSxhKSxudWxsIT1hLl91c2VVVEMmJihiLl91c2VVVEM9YS5fdXNlVVRDKSxiLl9mPWEuX2ZbZV0samIoYiksbShiKSYmKGYrPWwoYikuY2hhcnNMZWZ0T3ZlcixmKz0xMCpsKGIpLnVudXNlZFRva2Vucy5sZW5ndGgsbChiKS5zY29yZT1mLChudWxsPT1kfHxkPmYpJiYoZD1mLGM9YikpO2koYSxjfHxiKX1mdW5jdGlvbiBtYihhKXtpZighYS5fZCl7dmFyIGI9SyhhLl9pKTthLl9hPWcoW2IueWVhcixiLm1vbnRoLGIuZGF5fHxiLmRhdGUsYi5ob3VyLGIubWludXRlLGIuc2Vjb25kLGIubWlsbGlzZWNvbmRdLGZ1bmN0aW9uKGEpe3JldHVybiBhJiZwYXJzZUludChhLDEwKX0pLGhiKGEpfX1mdW5jdGlvbiBuYihhKXt2YXIgYj1uZXcgcShjYihvYihhKSkpO1xuLy8gQWRkaW5nIGlzIHNtYXJ0IGVub3VnaCBhcm91bmQgRFNUXG5yZXR1cm4gYi5fbmV4dERheSYmKGIuYWRkKDEsXCJkXCIpLGIuX25leHREYXk9dm9pZCAwKSxifWZ1bmN0aW9uIG9iKGEpe3ZhciBiPWEuX2ksZD1hLl9mO3JldHVybiBhLl9sb2NhbGU9YS5fbG9jYWxlfHxhYihhLl9sKSxudWxsPT09Ynx8dm9pZCAwPT09ZCYmXCJcIj09PWI/bih7bnVsbElucHV0OiEwfSk6KFwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYS5faT1iPWEuX2xvY2FsZS5wcmVwYXJzZShiKSkscihiKT9uZXcgcShjYihiKSk6KGMoZCk/bGIoYSk6ZihiKT9hLl9kPWI6ZD9qYihhKTpwYihhKSxtKGEpfHwoYS5fZD1udWxsKSxhKSl9ZnVuY3Rpb24gcGIoYil7dmFyIGQ9Yi5faTt2b2lkIDA9PT1kP2IuX2Q9bmV3IERhdGUoYS5ub3coKSk6ZihkKT9iLl9kPW5ldyBEYXRlKGQudmFsdWVPZigpKTpcInN0cmluZ1wiPT10eXBlb2YgZD9lYihiKTpjKGQpPyhiLl9hPWcoZC5zbGljZSgwKSxmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQoYSwxMCl9KSxoYihiKSk6XCJvYmplY3RcIj09dHlwZW9mIGQ/bWIoYik6XCJudW1iZXJcIj09dHlwZW9mIGQ/XG4vLyBmcm9tIG1pbGxpc2Vjb25kc1xuYi5fZD1uZXcgRGF0ZShkKTphLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGIpfWZ1bmN0aW9uIHFiKGEsYixmLGcsaCl7dmFyIGk9e307XG4vLyBvYmplY3QgY29uc3RydWN0aW9uIG11c3QgYmUgZG9uZSB0aGlzIHdheS5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNDIzXG5yZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGYmJihnPWYsZj12b2lkIDApLChkKGEpJiZlKGEpfHxjKGEpJiYwPT09YS5sZW5ndGgpJiYoYT12b2lkIDApLGkuX2lzQU1vbWVudE9iamVjdD0hMCxpLl91c2VVVEM9aS5faXNVVEM9aCxpLl9sPWYsaS5faT1hLGkuX2Y9YixpLl9zdHJpY3Q9ZyxuYihpKX1mdW5jdGlvbiByYihhLGIsYyxkKXtyZXR1cm4gcWIoYSxiLGMsZCwhMSl9XG4vLyBQaWNrIGEgbW9tZW50IG0gZnJvbSBtb21lbnRzIHNvIHRoYXQgbVtmbl0ob3RoZXIpIGlzIHRydWUgZm9yIGFsbFxuLy8gb3RoZXIuIFRoaXMgcmVsaWVzIG9uIHRoZSBmdW5jdGlvbiBmbiB0byBiZSB0cmFuc2l0aXZlLlxuLy9cbi8vIG1vbWVudHMgc2hvdWxkIGVpdGhlciBiZSBhbiBhcnJheSBvZiBtb21lbnQgb2JqZWN0cyBvciBhbiBhcnJheSwgd2hvc2Vcbi8vIGZpcnN0IGVsZW1lbnQgaXMgYW4gYXJyYXkgb2YgbW9tZW50IG9iamVjdHMuXG5mdW5jdGlvbiBzYihhLGIpe3ZhciBkLGU7aWYoMT09PWIubGVuZ3RoJiZjKGJbMF0pJiYoYj1iWzBdKSwhYi5sZW5ndGgpcmV0dXJuIHJiKCk7Zm9yKGQ9YlswXSxlPTE7ZTxiLmxlbmd0aDsrK2UpYltlXS5pc1ZhbGlkKCkmJiFiW2VdW2FdKGQpfHwoZD1iW2VdKTtyZXR1cm4gZH1cbi8vIFRPRE86IFVzZSBbXS5zb3J0IGluc3RlYWQ/XG5mdW5jdGlvbiB0Yigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBzYihcImlzQmVmb3JlXCIsYSl9ZnVuY3Rpb24gdWIoKXt2YXIgYT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gc2IoXCJpc0FmdGVyXCIsYSl9ZnVuY3Rpb24gdmIoYSl7dmFyIGI9SyhhKSxjPWIueWVhcnx8MCxkPWIucXVhcnRlcnx8MCxlPWIubW9udGh8fDAsZj1iLndlZWt8fDAsZz1iLmRheXx8MCxoPWIuaG91cnx8MCxpPWIubWludXRlfHwwLGo9Yi5zZWNvbmR8fDAsaz1iLm1pbGxpc2Vjb25kfHwwO1xuLy8gcmVwcmVzZW50YXRpb24gZm9yIGRhdGVBZGRSZW1vdmVcbnRoaXMuX21pbGxpc2Vjb25kcz0raysxZTMqaisvLyAxMDAwXG42ZTQqaSsvLyAxMDAwICogNjBcbjFlMypoKjYwKjYwLC8vdXNpbmcgMTAwMCAqIDYwICogNjAgaW5zdGVhZCBvZiAzNmU1IHRvIGF2b2lkIGZsb2F0aW5nIHBvaW50IHJvdW5kaW5nIGVycm9ycyBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMjk3OFxuLy8gQmVjYXVzZSBvZiBkYXRlQWRkUmVtb3ZlIHRyZWF0cyAyNCBob3VycyBhcyBkaWZmZXJlbnQgZnJvbSBhXG4vLyBkYXkgd2hlbiB3b3JraW5nIGFyb3VuZCBEU1QsIHdlIG5lZWQgdG8gc3RvcmUgdGhlbSBzZXBhcmF0ZWx5XG50aGlzLl9kYXlzPStnKzcqZixcbi8vIEl0IGlzIGltcG9zc2libGUgdHJhbnNsYXRlIG1vbnRocyBpbnRvIGRheXMgd2l0aG91dCBrbm93aW5nXG4vLyB3aGljaCBtb250aHMgeW91IGFyZSBhcmUgdGFsa2luZyBhYm91dCwgc28gd2UgaGF2ZSB0byBzdG9yZVxuLy8gaXQgc2VwYXJhdGVseS5cbnRoaXMuX21vbnRocz0rZSszKmQrMTIqYyx0aGlzLl9kYXRhPXt9LHRoaXMuX2xvY2FsZT1hYigpLHRoaXMuX2J1YmJsZSgpfWZ1bmN0aW9uIHdiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgdmJ9XG4vLyBGT1JNQVRUSU5HXG5mdW5jdGlvbiB4YihhLGIpe1QoYSwwLDAsZnVuY3Rpb24oKXt2YXIgYT10aGlzLnV0Y09mZnNldCgpLGM9XCIrXCI7cmV0dXJuIDA+YSYmKGE9LWEsYz1cIi1cIiksYytTKH5+KGEvNjApLDIpK2IrUyh+fmElNjAsMil9KX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjPShifHxcIlwiKS5tYXRjaChhKXx8W10sZD1jW2MubGVuZ3RoLTFdfHxbXSxlPShkK1wiXCIpLm1hdGNoKEdlKXx8W1wiLVwiLDAsMF0sZj0rKDYwKmVbMV0pK3QoZVsyXSk7cmV0dXJuXCIrXCI9PT1lWzBdP2Y6LWZ9XG4vLyBSZXR1cm4gYSBtb21lbnQgZnJvbSBpbnB1dCwgdGhhdCBpcyBsb2NhbC91dGMvem9uZSBlcXVpdmFsZW50IHRvIG1vZGVsLlxuZnVuY3Rpb24gemIoYixjKXt2YXIgZCxlO1xuLy8gVXNlIGxvdy1sZXZlbCBhcGksIGJlY2F1c2UgdGhpcyBmbiBpcyBsb3ctbGV2ZWwgYXBpLlxucmV0dXJuIGMuX2lzVVRDPyhkPWMuY2xvbmUoKSxlPShyKGIpfHxmKGIpP2IudmFsdWVPZigpOnJiKGIpLnZhbHVlT2YoKSktZC52YWx1ZU9mKCksZC5fZC5zZXRUaW1lKGQuX2QudmFsdWVPZigpK2UpLGEudXBkYXRlT2Zmc2V0KGQsITEpLGQpOnJiKGIpLmxvY2FsKCl9ZnVuY3Rpb24gQWIoYSl7XG4vLyBPbiBGaXJlZm94LjI0IERhdGUjZ2V0VGltZXpvbmVPZmZzZXQgcmV0dXJucyBhIGZsb2F0aW5nIHBvaW50LlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvcHVsbC8xODcxXG5yZXR1cm4gMTUqLU1hdGgucm91bmQoYS5fZC5nZXRUaW1lem9uZU9mZnNldCgpLzE1KX1cbi8vIE1PTUVOVFNcbi8vIGtlZXBMb2NhbFRpbWUgPSB0cnVlIG1lYW5zIG9ubHkgY2hhbmdlIHRoZSB0aW1lem9uZSwgd2l0aG91dFxuLy8gYWZmZWN0aW5nIHRoZSBsb2NhbCBob3VyLiBTbyA1OjMxOjI2ICswMzAwIC0tW3V0Y09mZnNldCgyLCB0cnVlKV0tLT5cbi8vIDU6MzE6MjYgKzAyMDAgSXQgaXMgcG9zc2libGUgdGhhdCA1OjMxOjI2IGRvZXNuJ3QgZXhpc3Qgd2l0aCBvZmZzZXRcbi8vICswMjAwLCBzbyB3ZSBhZGp1c3QgdGhlIHRpbWUgYXMgbmVlZGVkLCB0byBiZSB2YWxpZC5cbi8vXG4vLyBLZWVwaW5nIHRoZSB0aW1lIGFjdHVhbGx5IGFkZHMvc3VidHJhY3RzIChvbmUgaG91cilcbi8vIGZyb20gdGhlIGFjdHVhbCByZXByZXNlbnRlZCB0aW1lLiBUaGF0IGlzIHdoeSB3ZSBjYWxsIHVwZGF0ZU9mZnNldFxuLy8gYSBzZWNvbmQgdGltZS4gSW4gY2FzZSBpdCB3YW50cyB1cyB0byBjaGFuZ2UgdGhlIG9mZnNldCBhZ2FpblxuLy8gX2NoYW5nZUluUHJvZ3Jlc3MgPT0gdHJ1ZSBjYXNlLCB0aGVuIHdlIGhhdmUgdG8gYWRqdXN0LCBiZWNhdXNlXG4vLyB0aGVyZSBpcyBubyBzdWNoIHRpbWUgaW4gdGhlIGdpdmVuIHRpbWV6b25lLlxuZnVuY3Rpb24gQmIoYixjKXt2YXIgZCxlPXRoaXMuX29mZnNldHx8MDtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/bnVsbCE9Yj8oXCJzdHJpbmdcIj09dHlwZW9mIGI/Yj15YihUZCxiKTpNYXRoLmFicyhiKTwxNiYmKGI9NjAqYiksIXRoaXMuX2lzVVRDJiZjJiYoZD1BYih0aGlzKSksdGhpcy5fb2Zmc2V0PWIsdGhpcy5faXNVVEM9ITAsbnVsbCE9ZCYmdGhpcy5hZGQoZCxcIm1cIiksZSE9PWImJighY3x8dGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz9TYih0aGlzLE1iKGItZSxcIm1cIiksMSwhMSk6dGhpcy5fY2hhbmdlSW5Qcm9ncmVzc3x8KHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9ITAsYS51cGRhdGVPZmZzZXQodGhpcywhMCksdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz1udWxsKSksdGhpcyk6dGhpcy5faXNVVEM/ZTpBYih0aGlzKTpudWxsIT1iP3RoaXM6TmFOfWZ1bmN0aW9uIENiKGEsYil7cmV0dXJuIG51bGwhPWE/KFwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYT0tYSksdGhpcy51dGNPZmZzZXQoYSxiKSx0aGlzKTotdGhpcy51dGNPZmZzZXQoKX1mdW5jdGlvbiBEYihhKXtyZXR1cm4gdGhpcy51dGNPZmZzZXQoMCxhKX1mdW5jdGlvbiBFYihhKXtyZXR1cm4gdGhpcy5faXNVVEMmJih0aGlzLnV0Y09mZnNldCgwLGEpLHRoaXMuX2lzVVRDPSExLGEmJnRoaXMuc3VidHJhY3QoQWIodGhpcyksXCJtXCIpKSx0aGlzfWZ1bmN0aW9uIEZiKCl7cmV0dXJuIHRoaXMuX3R6bT90aGlzLnV0Y09mZnNldCh0aGlzLl90em0pOlwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLl9pJiZ0aGlzLnV0Y09mZnNldCh5YihTZCx0aGlzLl9pKSksdGhpc31mdW5jdGlvbiBHYihhKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/KGE9YT9yYihhKS51dGNPZmZzZXQoKTowLCh0aGlzLnV0Y09mZnNldCgpLWEpJTYwPT09MCk6ITF9ZnVuY3Rpb24gSGIoKXtyZXR1cm4gdGhpcy51dGNPZmZzZXQoKT50aGlzLmNsb25lKCkubW9udGgoMCkudXRjT2Zmc2V0KCl8fHRoaXMudXRjT2Zmc2V0KCk+dGhpcy5jbG9uZSgpLm1vbnRoKDUpLnV0Y09mZnNldCgpfWZ1bmN0aW9uIEliKCl7aWYoIW8odGhpcy5faXNEU1RTaGlmdGVkKSlyZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkO3ZhciBhPXt9O2lmKHAoYSx0aGlzKSxhPW9iKGEpLGEuX2Epe3ZhciBiPWEuX2lzVVRDP2ooYS5fYSk6cmIoYS5fYSk7dGhpcy5faXNEU1RTaGlmdGVkPXRoaXMuaXNWYWxpZCgpJiZ1KGEuX2EsYi50b0FycmF5KCkpPjB9ZWxzZSB0aGlzLl9pc0RTVFNoaWZ0ZWQ9ITE7cmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZH1mdW5jdGlvbiBKYigpe3JldHVybiB0aGlzLmlzVmFsaWQoKT8hdGhpcy5faXNVVEM6ITF9ZnVuY3Rpb24gS2IoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy5faXNVVEM6ITF9ZnVuY3Rpb24gTGIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy5faXNVVEMmJjA9PT10aGlzLl9vZmZzZXQ6ITF9ZnVuY3Rpb24gTWIoYSxiKXt2YXIgYyxkLGUsZj1hLFxuLy8gbWF0Y2hpbmcgYWdhaW5zdCByZWdleHAgaXMgZXhwZW5zaXZlLCBkbyBpdCBvbiBkZW1hbmRcbmc9bnVsbDsvLyBjaGVja3MgZm9yIG51bGwgb3IgdW5kZWZpbmVkXG5yZXR1cm4gd2IoYSk/Zj17bXM6YS5fbWlsbGlzZWNvbmRzLGQ6YS5fZGF5cyxNOmEuX21vbnRoc306XCJudW1iZXJcIj09dHlwZW9mIGE/KGY9e30sYj9mW2JdPWE6Zi5taWxsaXNlY29uZHM9YSk6KGc9SGUuZXhlYyhhKSk/KGM9XCItXCI9PT1nWzFdPy0xOjEsZj17eTowLGQ6dChnWyRkXSkqYyxoOnQoZ1tfZF0pKmMsbTp0KGdbYWVdKSpjLHM6dChnW2JlXSkqYyxtczp0KGdbY2VdKSpjfSk6KGc9SWUuZXhlYyhhKSk/KGM9XCItXCI9PT1nWzFdPy0xOjEsZj17eTpOYihnWzJdLGMpLE06TmIoZ1szXSxjKSx3Ok5iKGdbNF0sYyksZDpOYihnWzVdLGMpLGg6TmIoZ1s2XSxjKSxtOk5iKGdbN10sYyksczpOYihnWzhdLGMpfSk6bnVsbD09Zj9mPXt9Olwib2JqZWN0XCI9PXR5cGVvZiBmJiYoXCJmcm9tXCJpbiBmfHxcInRvXCJpbiBmKSYmKGU9UGIocmIoZi5mcm9tKSxyYihmLnRvKSksZj17fSxmLm1zPWUubWlsbGlzZWNvbmRzLGYuTT1lLm1vbnRocyksZD1uZXcgdmIoZiksd2IoYSkmJmgoYSxcIl9sb2NhbGVcIikmJihkLl9sb2NhbGU9YS5fbG9jYWxlKSxkfWZ1bmN0aW9uIE5iKGEsYil7XG4vLyBXZSdkIG5vcm1hbGx5IHVzZSB+fmlucCBmb3IgdGhpcywgYnV0IHVuZm9ydHVuYXRlbHkgaXQgYWxzb1xuLy8gY29udmVydHMgZmxvYXRzIHRvIGludHMuXG4vLyBpbnAgbWF5IGJlIHVuZGVmaW5lZCwgc28gY2FyZWZ1bCBjYWxsaW5nIHJlcGxhY2Ugb24gaXQuXG52YXIgYz1hJiZwYXJzZUZsb2F0KGEucmVwbGFjZShcIixcIixcIi5cIikpO1xuLy8gYXBwbHkgc2lnbiB3aGlsZSB3ZSdyZSBhdCBpdFxucmV0dXJuKGlzTmFOKGMpPzA6YykqYn1mdW5jdGlvbiBPYihhLGIpe3ZhciBjPXttaWxsaXNlY29uZHM6MCxtb250aHM6MH07cmV0dXJuIGMubW9udGhzPWIubW9udGgoKS1hLm1vbnRoKCkrMTIqKGIueWVhcigpLWEueWVhcigpKSxhLmNsb25lKCkuYWRkKGMubW9udGhzLFwiTVwiKS5pc0FmdGVyKGIpJiYtLWMubW9udGhzLGMubWlsbGlzZWNvbmRzPStiLSthLmNsb25lKCkuYWRkKGMubW9udGhzLFwiTVwiKSxjfWZ1bmN0aW9uIFBiKGEsYil7dmFyIGM7cmV0dXJuIGEuaXNWYWxpZCgpJiZiLmlzVmFsaWQoKT8oYj16YihiLGEpLGEuaXNCZWZvcmUoYik/Yz1PYihhLGIpOihjPU9iKGIsYSksYy5taWxsaXNlY29uZHM9LWMubWlsbGlzZWNvbmRzLGMubW9udGhzPS1jLm1vbnRocyksYyk6e21pbGxpc2Vjb25kczowLG1vbnRoczowfX1mdW5jdGlvbiBRYihhKXtyZXR1cm4gMD5hPy0xKk1hdGgucm91bmQoLTEqYSk6TWF0aC5yb3VuZChhKX1cbi8vIFRPRE86IHJlbW92ZSAnbmFtZScgYXJnIGFmdGVyIGRlcHJlY2F0aW9uIGlzIHJlbW92ZWRcbmZ1bmN0aW9uIFJiKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGUsZjtcbi8vaW52ZXJ0IHRoZSBhcmd1bWVudHMsIGJ1dCBjb21wbGFpbiBhYm91dCBpdFxucmV0dXJuIG51bGw9PT1kfHxpc05hTigrZCl8fCh4KGIsXCJtb21lbnQoKS5cIitiK1wiKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLlwiK2IrXCIobnVtYmVyLCBwZXJpb2QpLiBTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9hZGQtaW52ZXJ0ZWQtcGFyYW0vIGZvciBtb3JlIGluZm8uXCIpLGY9YyxjPWQsZD1mKSxjPVwic3RyaW5nXCI9PXR5cGVvZiBjPytjOmMsZT1NYihjLGQpLFNiKHRoaXMsZSxhKSx0aGlzfX1mdW5jdGlvbiBTYihiLGMsZCxlKXt2YXIgZj1jLl9taWxsaXNlY29uZHMsZz1RYihjLl9kYXlzKSxoPVFiKGMuX21vbnRocyk7Yi5pc1ZhbGlkKCkmJihlPW51bGw9PWU/ITA6ZSxmJiZiLl9kLnNldFRpbWUoYi5fZC52YWx1ZU9mKCkrZipkKSxnJiZQKGIsXCJEYXRlXCIsTyhiLFwiRGF0ZVwiKStnKmQpLGgmJmlhKGIsTyhiLFwiTW9udGhcIikraCpkKSxlJiZhLnVwZGF0ZU9mZnNldChiLGd8fGgpKX1mdW5jdGlvbiBUYihhLGIpe3ZhciBjPWEuZGlmZihiLFwiZGF5c1wiLCEwKTtyZXR1cm4tNj5jP1wic2FtZUVsc2VcIjotMT5jP1wibGFzdFdlZWtcIjowPmM/XCJsYXN0RGF5XCI6MT5jP1wic2FtZURheVwiOjI+Yz9cIm5leHREYXlcIjo3PmM/XCJuZXh0V2Vla1wiOlwic2FtZUVsc2VcIn1mdW5jdGlvbiBVYihiLGMpe1xuLy8gV2Ugd2FudCB0byBjb21wYXJlIHRoZSBzdGFydCBvZiB0b2RheSwgdnMgdGhpcy5cbi8vIEdldHRpbmcgc3RhcnQtb2YtdG9kYXkgZGVwZW5kcyBvbiB3aGV0aGVyIHdlJ3JlIGxvY2FsL3V0Yy9vZmZzZXQgb3Igbm90LlxudmFyIGQ9Ynx8cmIoKSxlPXpiKGQsdGhpcykuc3RhcnRPZihcImRheVwiKSxmPWEuY2FsZW5kYXJGb3JtYXQodGhpcyxlKXx8XCJzYW1lRWxzZVwiLGc9YyYmKHkoY1tmXSk/Y1tmXS5jYWxsKHRoaXMsZCk6Y1tmXSk7cmV0dXJuIHRoaXMuZm9ybWF0KGd8fHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGYsdGhpcyxyYihkKSkpfWZ1bmN0aW9uIFZiKCl7cmV0dXJuIG5ldyBxKHRoaXMpfWZ1bmN0aW9uIFdiKGEsYil7dmFyIGM9cihhKT9hOnJiKGEpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmYy5pc1ZhbGlkKCk/KGI9SihvKGIpP1wibWlsbGlzZWNvbmRcIjpiKSxcIm1pbGxpc2Vjb25kXCI9PT1iP3RoaXMudmFsdWVPZigpPmMudmFsdWVPZigpOmMudmFsdWVPZigpPHRoaXMuY2xvbmUoKS5zdGFydE9mKGIpLnZhbHVlT2YoKSk6ITF9ZnVuY3Rpb24gWGIoYSxiKXt2YXIgYz1yKGEpP2E6cmIoYSk7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiZjLmlzVmFsaWQoKT8oYj1KKG8oYik/XCJtaWxsaXNlY29uZFwiOmIpLFwibWlsbGlzZWNvbmRcIj09PWI/dGhpcy52YWx1ZU9mKCk8Yy52YWx1ZU9mKCk6dGhpcy5jbG9uZSgpLmVuZE9mKGIpLnZhbHVlT2YoKTxjLnZhbHVlT2YoKSk6ITF9ZnVuY3Rpb24gWWIoYSxiLGMsZCl7cmV0dXJuIGQ9ZHx8XCIoKVwiLChcIihcIj09PWRbMF0/dGhpcy5pc0FmdGVyKGEsYyk6IXRoaXMuaXNCZWZvcmUoYSxjKSkmJihcIilcIj09PWRbMV0/dGhpcy5pc0JlZm9yZShiLGMpOiF0aGlzLmlzQWZ0ZXIoYixjKSl9ZnVuY3Rpb24gWmIoYSxiKXt2YXIgYyxkPXIoYSk/YTpyYihhKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJmQuaXNWYWxpZCgpPyhiPUooYnx8XCJtaWxsaXNlY29uZFwiKSxcIm1pbGxpc2Vjb25kXCI9PT1iP3RoaXMudmFsdWVPZigpPT09ZC52YWx1ZU9mKCk6KGM9ZC52YWx1ZU9mKCksdGhpcy5jbG9uZSgpLnN0YXJ0T2YoYikudmFsdWVPZigpPD1jJiZjPD10aGlzLmNsb25lKCkuZW5kT2YoYikudmFsdWVPZigpKSk6ITF9ZnVuY3Rpb24gJGIoYSxiKXtyZXR1cm4gdGhpcy5pc1NhbWUoYSxiKXx8dGhpcy5pc0FmdGVyKGEsYil9ZnVuY3Rpb24gX2IoYSxiKXtyZXR1cm4gdGhpcy5pc1NhbWUoYSxiKXx8dGhpcy5pc0JlZm9yZShhLGIpfWZ1bmN0aW9uIGFjKGEsYixjKXt2YXIgZCxlLGYsZzsvLyAxMDAwXG4vLyAxMDAwICogNjBcbi8vIDEwMDAgKiA2MCAqIDYwXG4vLyAxMDAwICogNjAgKiA2MCAqIDI0LCBuZWdhdGUgZHN0XG4vLyAxMDAwICogNjAgKiA2MCAqIDI0ICogNywgbmVnYXRlIGRzdFxucmV0dXJuIHRoaXMuaXNWYWxpZCgpPyhkPXpiKGEsdGhpcyksZC5pc1ZhbGlkKCk/KGU9NmU0KihkLnV0Y09mZnNldCgpLXRoaXMudXRjT2Zmc2V0KCkpLGI9SihiKSxcInllYXJcIj09PWJ8fFwibW9udGhcIj09PWJ8fFwicXVhcnRlclwiPT09Yj8oZz1iYyh0aGlzLGQpLFwicXVhcnRlclwiPT09Yj9nLz0zOlwieWVhclwiPT09YiYmKGcvPTEyKSk6KGY9dGhpcy1kLGc9XCJzZWNvbmRcIj09PWI/Zi8xZTM6XCJtaW51dGVcIj09PWI/Zi82ZTQ6XCJob3VyXCI9PT1iP2YvMzZlNTpcImRheVwiPT09Yj8oZi1lKS84NjRlNTpcIndlZWtcIj09PWI/KGYtZSkvNjA0OGU1OmYpLGM/ZzpzKGcpKTpOYU4pOk5hTn1mdW5jdGlvbiBiYyhhLGIpe1xuLy8gZGlmZmVyZW5jZSBpbiBtb250aHNcbnZhciBjLGQsZT0xMiooYi55ZWFyKCktYS55ZWFyKCkpKyhiLm1vbnRoKCktYS5tb250aCgpKSxcbi8vIGIgaXMgaW4gKGFuY2hvciAtIDEgbW9udGgsIGFuY2hvciArIDEgbW9udGgpXG5mPWEuY2xvbmUoKS5hZGQoZSxcIm1vbnRoc1wiKTtcbi8vY2hlY2sgZm9yIG5lZ2F0aXZlIHplcm8sIHJldHVybiB6ZXJvIGlmIG5lZ2F0aXZlIHplcm9cbi8vIGxpbmVhciBhY3Jvc3MgdGhlIG1vbnRoXG4vLyBsaW5lYXIgYWNyb3NzIHRoZSBtb250aFxucmV0dXJuIDA+Yi1mPyhjPWEuY2xvbmUoKS5hZGQoZS0xLFwibW9udGhzXCIpLGQ9KGItZikvKGYtYykpOihjPWEuY2xvbmUoKS5hZGQoZSsxLFwibW9udGhzXCIpLGQ9KGItZikvKGMtZikpLC0oZStkKXx8MH1mdW5jdGlvbiBjYygpe3JldHVybiB0aGlzLmNsb25lKCkubG9jYWxlKFwiZW5cIikuZm9ybWF0KFwiZGRkIE1NTSBERCBZWVlZIEhIOm1tOnNzIFtHTVRdWlpcIil9ZnVuY3Rpb24gZGMoKXt2YXIgYT10aGlzLmNsb25lKCkudXRjKCk7cmV0dXJuIDA8YS55ZWFyKCkmJmEueWVhcigpPD05OTk5P3koRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpP3RoaXMudG9EYXRlKCkudG9JU09TdHJpbmcoKTpXKGEsXCJZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdXCIpOlcoYSxcIllZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXVwiKX1mdW5jdGlvbiBlYyhiKXtifHwoYj10aGlzLmlzVXRjKCk/YS5kZWZhdWx0Rm9ybWF0VXRjOmEuZGVmYXVsdEZvcm1hdCk7dmFyIGM9Vyh0aGlzLGIpO3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KGMpfWZ1bmN0aW9uIGZjKGEsYil7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiYocihhKSYmYS5pc1ZhbGlkKCl8fHJiKGEpLmlzVmFsaWQoKSk/TWIoe3RvOnRoaXMsZnJvbTphfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCFiKTp0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfWZ1bmN0aW9uIGdjKGEpe3JldHVybiB0aGlzLmZyb20ocmIoKSxhKX1mdW5jdGlvbiBoYyhhLGIpe3JldHVybiB0aGlzLmlzVmFsaWQoKSYmKHIoYSkmJmEuaXNWYWxpZCgpfHxyYihhKS5pc1ZhbGlkKCkpP01iKHtmcm9tOnRoaXMsdG86YX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghYik6dGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKX1mdW5jdGlvbiBpYyhhKXtyZXR1cm4gdGhpcy50byhyYigpLGEpfVxuLy8gSWYgcGFzc2VkIGEgbG9jYWxlIGtleSwgaXQgd2lsbCBzZXQgdGhlIGxvY2FsZSBmb3IgdGhpc1xuLy8gaW5zdGFuY2UuICBPdGhlcndpc2UsIGl0IHdpbGwgcmV0dXJuIHRoZSBsb2NhbGUgY29uZmlndXJhdGlvblxuLy8gdmFyaWFibGVzIGZvciB0aGlzIGluc3RhbmNlLlxuZnVuY3Rpb24gamMoYSl7dmFyIGI7cmV0dXJuIHZvaWQgMD09PWE/dGhpcy5fbG9jYWxlLl9hYmJyOihiPWFiKGEpLG51bGwhPWImJih0aGlzLl9sb2NhbGU9YiksdGhpcyl9ZnVuY3Rpb24ga2MoKXtyZXR1cm4gdGhpcy5fbG9jYWxlfWZ1bmN0aW9uIGxjKGEpe1xuLy8gdGhlIGZvbGxvd2luZyBzd2l0Y2ggaW50ZW50aW9uYWxseSBvbWl0cyBicmVhayBrZXl3b3Jkc1xuLy8gdG8gdXRpbGl6ZSBmYWxsaW5nIHRocm91Z2ggdGhlIGNhc2VzLlxuc3dpdGNoKGE9SihhKSl7Y2FzZVwieWVhclwiOnRoaXMubW9udGgoMCk7LyogZmFsbHMgdGhyb3VnaCAqL1xuY2FzZVwicXVhcnRlclwiOmNhc2VcIm1vbnRoXCI6dGhpcy5kYXRlKDEpOy8qIGZhbGxzIHRocm91Z2ggKi9cbmNhc2VcIndlZWtcIjpjYXNlXCJpc29XZWVrXCI6Y2FzZVwiZGF5XCI6Y2FzZVwiZGF0ZVwiOnRoaXMuaG91cnMoMCk7LyogZmFsbHMgdGhyb3VnaCAqL1xuY2FzZVwiaG91clwiOnRoaXMubWludXRlcygwKTsvKiBmYWxscyB0aHJvdWdoICovXG5jYXNlXCJtaW51dGVcIjp0aGlzLnNlY29uZHMoMCk7LyogZmFsbHMgdGhyb3VnaCAqL1xuY2FzZVwic2Vjb25kXCI6dGhpcy5taWxsaXNlY29uZHMoMCl9XG4vLyB3ZWVrcyBhcmUgYSBzcGVjaWFsIGNhc2Vcbi8vIHF1YXJ0ZXJzIGFyZSBhbHNvIHNwZWNpYWxcbnJldHVyblwid2Vla1wiPT09YSYmdGhpcy53ZWVrZGF5KDApLFwiaXNvV2Vla1wiPT09YSYmdGhpcy5pc29XZWVrZGF5KDEpLFwicXVhcnRlclwiPT09YSYmdGhpcy5tb250aCgzKk1hdGguZmxvb3IodGhpcy5tb250aCgpLzMpKSx0aGlzfWZ1bmN0aW9uIG1jKGEpe1xuLy8gJ2RhdGUnIGlzIGFuIGFsaWFzIGZvciAnZGF5Jywgc28gaXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYXMgc3VjaC5cbnJldHVybiBhPUooYSksdm9pZCAwPT09YXx8XCJtaWxsaXNlY29uZFwiPT09YT90aGlzOihcImRhdGVcIj09PWEmJihhPVwiZGF5XCIpLHRoaXMuc3RhcnRPZihhKS5hZGQoMSxcImlzb1dlZWtcIj09PWE/XCJ3ZWVrXCI6YSkuc3VidHJhY3QoMSxcIm1zXCIpKX1mdW5jdGlvbiBuYygpe3JldHVybiB0aGlzLl9kLnZhbHVlT2YoKS02ZTQqKHRoaXMuX29mZnNldHx8MCl9ZnVuY3Rpb24gb2MoKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKS8xZTMpfWZ1bmN0aW9uIHBjKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKX1mdW5jdGlvbiBxYygpe3ZhciBhPXRoaXM7cmV0dXJuW2EueWVhcigpLGEubW9udGgoKSxhLmRhdGUoKSxhLmhvdXIoKSxhLm1pbnV0ZSgpLGEuc2Vjb25kKCksYS5taWxsaXNlY29uZCgpXX1mdW5jdGlvbiByYygpe3ZhciBhPXRoaXM7cmV0dXJue3llYXJzOmEueWVhcigpLG1vbnRoczphLm1vbnRoKCksZGF0ZTphLmRhdGUoKSxob3VyczphLmhvdXJzKCksbWludXRlczphLm1pbnV0ZXMoKSxzZWNvbmRzOmEuc2Vjb25kcygpLG1pbGxpc2Vjb25kczphLm1pbGxpc2Vjb25kcygpfX1mdW5jdGlvbiBzYygpe1xuLy8gbmV3IERhdGUoTmFOKS50b0pTT04oKSA9PT0gbnVsbFxucmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMudG9JU09TdHJpbmcoKTpudWxsfWZ1bmN0aW9uIHRjKCl7cmV0dXJuIG0odGhpcyl9ZnVuY3Rpb24gdWMoKXtyZXR1cm4gaSh7fSxsKHRoaXMpKX1mdW5jdGlvbiB2Yygpe3JldHVybiBsKHRoaXMpLm92ZXJmbG93fWZ1bmN0aW9uIHdjKCl7cmV0dXJue2lucHV0OnRoaXMuX2ksZm9ybWF0OnRoaXMuX2YsbG9jYWxlOnRoaXMuX2xvY2FsZSxpc1VUQzp0aGlzLl9pc1VUQyxzdHJpY3Q6dGhpcy5fc3RyaWN0fX1mdW5jdGlvbiB4YyhhLGIpe1QoMCxbYSxhLmxlbmd0aF0sMCxiKX1cbi8vIE1PTUVOVFNcbmZ1bmN0aW9uIHljKGEpe3JldHVybiBDYy5jYWxsKHRoaXMsYSx0aGlzLndlZWsoKSx0aGlzLndlZWtkYXkoKSx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3csdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG95KX1mdW5jdGlvbiB6YyhhKXtyZXR1cm4gQ2MuY2FsbCh0aGlzLGEsdGhpcy5pc29XZWVrKCksdGhpcy5pc29XZWVrZGF5KCksMSw0KX1mdW5jdGlvbiBBYygpe3JldHVybiB3YSh0aGlzLnllYXIoKSwxLDQpfWZ1bmN0aW9uIEJjKCl7dmFyIGE9dGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7cmV0dXJuIHdhKHRoaXMueWVhcigpLGEuZG93LGEuZG95KX1mdW5jdGlvbiBDYyhhLGIsYyxkLGUpe3ZhciBmO3JldHVybiBudWxsPT1hP3ZhKHRoaXMsZCxlKS55ZWFyOihmPXdhKGEsZCxlKSxiPmYmJihiPWYpLERjLmNhbGwodGhpcyxhLGIsYyxkLGUpKX1mdW5jdGlvbiBEYyhhLGIsYyxkLGUpe3ZhciBmPXVhKGEsYixjLGQsZSksZz1zYShmLnllYXIsMCxmLmRheU9mWWVhcik7cmV0dXJuIHRoaXMueWVhcihnLmdldFVUQ0Z1bGxZZWFyKCkpLHRoaXMubW9udGgoZy5nZXRVVENNb250aCgpKSx0aGlzLmRhdGUoZy5nZXRVVENEYXRlKCkpLHRoaXN9XG4vLyBNT01FTlRTXG5mdW5jdGlvbiBFYyhhKXtyZXR1cm4gbnVsbD09YT9NYXRoLmNlaWwoKHRoaXMubW9udGgoKSsxKS8zKTp0aGlzLm1vbnRoKDMqKGEtMSkrdGhpcy5tb250aCgpJTMpfVxuLy8gSEVMUEVSU1xuLy8gTU9NRU5UU1xuZnVuY3Rpb24gRmMoYSl7dmFyIGI9TWF0aC5yb3VuZCgodGhpcy5jbG9uZSgpLnN0YXJ0T2YoXCJkYXlcIiktdGhpcy5jbG9uZSgpLnN0YXJ0T2YoXCJ5ZWFyXCIpKS84NjRlNSkrMTtyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcImRcIil9ZnVuY3Rpb24gR2MoYSxiKXtiW2NlXT10KDFlMyooXCIwLlwiK2EpKX1cbi8vIE1PTUVOVFNcbmZ1bmN0aW9uIEhjKCl7cmV0dXJuIHRoaXMuX2lzVVRDP1wiVVRDXCI6XCJcIn1mdW5jdGlvbiBJYygpe3JldHVybiB0aGlzLl9pc1VUQz9cIkNvb3JkaW5hdGVkIFVuaXZlcnNhbCBUaW1lXCI6XCJcIn1mdW5jdGlvbiBKYyhhKXtyZXR1cm4gcmIoMWUzKmEpfWZ1bmN0aW9uIEtjKCl7cmV0dXJuIHJiLmFwcGx5KG51bGwsYXJndW1lbnRzKS5wYXJzZVpvbmUoKX1mdW5jdGlvbiBMYyhhKXtyZXR1cm4gYX1mdW5jdGlvbiBNYyhhLGIsYyxkKXt2YXIgZT1hYigpLGY9aigpLnNldChkLGIpO3JldHVybiBlW2NdKGYsYSl9ZnVuY3Rpb24gTmMoYSxiLGMpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiXCIsbnVsbCE9YilyZXR1cm4gTWMoYSxiLGMsXCJtb250aFwiKTt2YXIgZCxlPVtdO2ZvcihkPTA7MTI+ZDtkKyspZVtkXT1NYyhhLGQsYyxcIm1vbnRoXCIpO3JldHVybiBlfVxuLy8gKClcbi8vICg1KVxuLy8gKGZtdCwgNSlcbi8vIChmbXQpXG4vLyAodHJ1ZSlcbi8vICh0cnVlLCA1KVxuLy8gKHRydWUsIGZtdCwgNSlcbi8vICh0cnVlLCBmbXQpXG5mdW5jdGlvbiBPYyhhLGIsYyxkKXtcImJvb2xlYW5cIj09dHlwZW9mIGE/KFwibnVtYmVyXCI9PXR5cGVvZiBiJiYoYz1iLGI9dm9pZCAwKSxiPWJ8fFwiXCIpOihiPWEsYz1iLGE9ITEsXCJudW1iZXJcIj09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGI9Ynx8XCJcIik7dmFyIGU9YWIoKSxmPWE/ZS5fd2Vlay5kb3c6MDtpZihudWxsIT1jKXJldHVybiBNYyhiLChjK2YpJTcsZCxcImRheVwiKTt2YXIgZyxoPVtdO2ZvcihnPTA7Nz5nO2crKyloW2ddPU1jKGIsKGcrZiklNyxkLFwiZGF5XCIpO3JldHVybiBofWZ1bmN0aW9uIFBjKGEsYil7cmV0dXJuIE5jKGEsYixcIm1vbnRoc1wiKX1mdW5jdGlvbiBRYyhhLGIpe3JldHVybiBOYyhhLGIsXCJtb250aHNTaG9ydFwiKX1mdW5jdGlvbiBSYyhhLGIsYyl7cmV0dXJuIE9jKGEsYixjLFwid2Vla2RheXNcIil9ZnVuY3Rpb24gU2MoYSxiLGMpe3JldHVybiBPYyhhLGIsYyxcIndlZWtkYXlzU2hvcnRcIil9ZnVuY3Rpb24gVGMoYSxiLGMpe3JldHVybiBPYyhhLGIsYyxcIndlZWtkYXlzTWluXCIpfWZ1bmN0aW9uIFVjKCl7dmFyIGE9dGhpcy5fZGF0YTtyZXR1cm4gdGhpcy5fbWlsbGlzZWNvbmRzPVVlKHRoaXMuX21pbGxpc2Vjb25kcyksdGhpcy5fZGF5cz1VZSh0aGlzLl9kYXlzKSx0aGlzLl9tb250aHM9VWUodGhpcy5fbW9udGhzKSxhLm1pbGxpc2Vjb25kcz1VZShhLm1pbGxpc2Vjb25kcyksYS5zZWNvbmRzPVVlKGEuc2Vjb25kcyksYS5taW51dGVzPVVlKGEubWludXRlcyksYS5ob3Vycz1VZShhLmhvdXJzKSxhLm1vbnRocz1VZShhLm1vbnRocyksYS55ZWFycz1VZShhLnllYXJzKSx0aGlzfWZ1bmN0aW9uIFZjKGEsYixjLGQpe3ZhciBlPU1iKGIsYyk7cmV0dXJuIGEuX21pbGxpc2Vjb25kcys9ZCplLl9taWxsaXNlY29uZHMsYS5fZGF5cys9ZCplLl9kYXlzLGEuX21vbnRocys9ZCplLl9tb250aHMsYS5fYnViYmxlKCl9XG4vLyBzdXBwb3J0cyBvbmx5IDIuMC1zdHlsZSBhZGQoMSwgJ3MnKSBvciBhZGQoZHVyYXRpb24pXG5mdW5jdGlvbiBXYyhhLGIpe3JldHVybiBWYyh0aGlzLGEsYiwxKX1cbi8vIHN1cHBvcnRzIG9ubHkgMi4wLXN0eWxlIHN1YnRyYWN0KDEsICdzJykgb3Igc3VidHJhY3QoZHVyYXRpb24pXG5mdW5jdGlvbiBYYyhhLGIpe3JldHVybiBWYyh0aGlzLGEsYiwtMSl9ZnVuY3Rpb24gWWMoYSl7cmV0dXJuIDA+YT9NYXRoLmZsb29yKGEpOk1hdGguY2VpbChhKX1mdW5jdGlvbiBaYygpe3ZhciBhLGIsYyxkLGUsZj10aGlzLl9taWxsaXNlY29uZHMsZz10aGlzLl9kYXlzLGg9dGhpcy5fbW9udGhzLGk9dGhpcy5fZGF0YTtcbi8vIGlmIHdlIGhhdmUgYSBtaXggb2YgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHZhbHVlcywgYnViYmxlIGRvd24gZmlyc3Rcbi8vIGNoZWNrOiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMjE2NlxuLy8gVGhlIGZvbGxvd2luZyBjb2RlIGJ1YmJsZXMgdXAgdmFsdWVzLCBzZWUgdGhlIHRlc3RzIGZvclxuLy8gZXhhbXBsZXMgb2Ygd2hhdCB0aGF0IG1lYW5zLlxuLy8gY29udmVydCBkYXlzIHRvIG1vbnRoc1xuLy8gMTIgbW9udGhzIC0+IDEgeWVhclxucmV0dXJuIGY+PTAmJmc+PTAmJmg+PTB8fDA+PWYmJjA+PWcmJjA+PWh8fChmKz04NjRlNSpZYyhfYyhoKStnKSxnPTAsaD0wKSxpLm1pbGxpc2Vjb25kcz1mJTFlMyxhPXMoZi8xZTMpLGkuc2Vjb25kcz1hJTYwLGI9cyhhLzYwKSxpLm1pbnV0ZXM9YiU2MCxjPXMoYi82MCksaS5ob3Vycz1jJTI0LGcrPXMoYy8yNCksZT1zKCRjKGcpKSxoKz1lLGctPVljKF9jKGUpKSxkPXMoaC8xMiksaCU9MTIsaS5kYXlzPWcsaS5tb250aHM9aCxpLnllYXJzPWQsdGhpc31mdW5jdGlvbiAkYyhhKXtcbi8vIDQwMCB5ZWFycyBoYXZlIDE0NjA5NyBkYXlzICh0YWtpbmcgaW50byBhY2NvdW50IGxlYXAgeWVhciBydWxlcylcbi8vIDQwMCB5ZWFycyBoYXZlIDEyIG1vbnRocyA9PT0gNDgwMFxucmV0dXJuIDQ4MDAqYS8xNDYwOTd9ZnVuY3Rpb24gX2MoYSl7XG4vLyB0aGUgcmV2ZXJzZSBvZiBkYXlzVG9Nb250aHNcbnJldHVybiAxNDYwOTcqYS80ODAwfWZ1bmN0aW9uIGFkKGEpe3ZhciBiLGMsZD10aGlzLl9taWxsaXNlY29uZHM7aWYoYT1KKGEpLFwibW9udGhcIj09PWF8fFwieWVhclwiPT09YSlyZXR1cm4gYj10aGlzLl9kYXlzK2QvODY0ZTUsYz10aGlzLl9tb250aHMrJGMoYiksXCJtb250aFwiPT09YT9jOmMvMTI7c3dpdGNoKGI9dGhpcy5fZGF5cytNYXRoLnJvdW5kKF9jKHRoaXMuX21vbnRocykpLGEpe2Nhc2VcIndlZWtcIjpyZXR1cm4gYi83K2QvNjA0OGU1O2Nhc2VcImRheVwiOnJldHVybiBiK2QvODY0ZTU7Y2FzZVwiaG91clwiOnJldHVybiAyNCpiK2QvMzZlNTtjYXNlXCJtaW51dGVcIjpyZXR1cm4gMTQ0MCpiK2QvNmU0O2Nhc2VcInNlY29uZFwiOnJldHVybiA4NjQwMCpiK2QvMWUzO1xuLy8gTWF0aC5mbG9vciBwcmV2ZW50cyBmbG9hdGluZyBwb2ludCBtYXRoIGVycm9ycyBoZXJlXG5jYXNlXCJtaWxsaXNlY29uZFwiOnJldHVybiBNYXRoLmZsb29yKDg2NGU1KmIpK2Q7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHVuaXQgXCIrYSl9fVxuLy8gVE9ETzogVXNlIHRoaXMuYXMoJ21zJyk/XG5mdW5jdGlvbiBiZCgpe3JldHVybiB0aGlzLl9taWxsaXNlY29uZHMrODY0ZTUqdGhpcy5fZGF5cyt0aGlzLl9tb250aHMlMTIqMjU5MmU2KzMxNTM2ZTYqdCh0aGlzLl9tb250aHMvMTIpfWZ1bmN0aW9uIGNkKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKGEpfX1mdW5jdGlvbiBkZChhKXtyZXR1cm4gYT1KKGEpLHRoaXNbYStcInNcIl0oKX1mdW5jdGlvbiBlZChhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVthXX19ZnVuY3Rpb24gZmQoKXtyZXR1cm4gcyh0aGlzLmRheXMoKS83KX1cbi8vIGhlbHBlciBmdW5jdGlvbiBmb3IgbW9tZW50LmZuLmZyb20sIG1vbWVudC5mbi5mcm9tTm93LCBhbmQgbW9tZW50LmR1cmF0aW9uLmZuLmh1bWFuaXplXG5mdW5jdGlvbiBnZChhLGIsYyxkLGUpe3JldHVybiBlLnJlbGF0aXZlVGltZShifHwxLCEhYyxhLGQpfWZ1bmN0aW9uIGhkKGEsYixjKXt2YXIgZD1NYihhKS5hYnMoKSxlPWpmKGQuYXMoXCJzXCIpKSxmPWpmKGQuYXMoXCJtXCIpKSxnPWpmKGQuYXMoXCJoXCIpKSxoPWpmKGQuYXMoXCJkXCIpKSxpPWpmKGQuYXMoXCJNXCIpKSxqPWpmKGQuYXMoXCJ5XCIpKSxrPWU8a2YucyYmW1wic1wiLGVdfHwxPj1mJiZbXCJtXCJdfHxmPGtmLm0mJltcIm1tXCIsZl18fDE+PWcmJltcImhcIl18fGc8a2YuaCYmW1wiaGhcIixnXXx8MT49aCYmW1wiZFwiXXx8aDxrZi5kJiZbXCJkZFwiLGhdfHwxPj1pJiZbXCJNXCJdfHxpPGtmLk0mJltcIk1NXCIsaV18fDE+PWomJltcInlcIl18fFtcInl5XCIsal07cmV0dXJuIGtbMl09YixrWzNdPSthPjAsa1s0XT1jLGdkLmFwcGx5KG51bGwsayl9XG4vLyBUaGlzIGZ1bmN0aW9uIGFsbG93cyB5b3UgdG8gc2V0IHRoZSByb3VuZGluZyBmdW5jdGlvbiBmb3IgcmVsYXRpdmUgdGltZSBzdHJpbmdzXG5mdW5jdGlvbiBpZChhKXtyZXR1cm4gdm9pZCAwPT09YT9qZjpcImZ1bmN0aW9uXCI9PXR5cGVvZiBhPyhqZj1hLCEwKTohMX1cbi8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXQgYSB0aHJlc2hvbGQgZm9yIHJlbGF0aXZlIHRpbWUgc3RyaW5nc1xuZnVuY3Rpb24gamQoYSxiKXtyZXR1cm4gdm9pZCAwPT09a2ZbYV0/ITE6dm9pZCAwPT09Yj9rZlthXTooa2ZbYV09YiwhMCl9ZnVuY3Rpb24ga2QoYSl7dmFyIGI9dGhpcy5sb2NhbGVEYXRhKCksYz1oZCh0aGlzLCFhLGIpO3JldHVybiBhJiYoYz1iLnBhc3RGdXR1cmUoK3RoaXMsYykpLGIucG9zdGZvcm1hdChjKX1mdW5jdGlvbiBsZCgpe1xuLy8gZm9yIElTTyBzdHJpbmdzIHdlIGRvIG5vdCB1c2UgdGhlIG5vcm1hbCBidWJibGluZyBydWxlczpcbi8vICAqIG1pbGxpc2Vjb25kcyBidWJibGUgdXAgdW50aWwgdGhleSBiZWNvbWUgaG91cnNcbi8vICAqIGRheXMgZG8gbm90IGJ1YmJsZSBhdCBhbGxcbi8vICAqIG1vbnRocyBidWJibGUgdXAgdW50aWwgdGhleSBiZWNvbWUgeWVhcnNcbi8vIFRoaXMgaXMgYmVjYXVzZSB0aGVyZSBpcyBubyBjb250ZXh0LWZyZWUgY29udmVyc2lvbiBiZXR3ZWVuIGhvdXJzIGFuZCBkYXlzXG4vLyAodGhpbmsgb2YgY2xvY2sgY2hhbmdlcylcbi8vIGFuZCBhbHNvIG5vdCBiZXR3ZWVuIGRheXMgYW5kIG1vbnRocyAoMjgtMzEgZGF5cyBwZXIgbW9udGgpXG52YXIgYSxiLGMsZD1sZih0aGlzLl9taWxsaXNlY29uZHMpLzFlMyxlPWxmKHRoaXMuX2RheXMpLGY9bGYodGhpcy5fbW9udGhzKTthPXMoZC82MCksYj1zKGEvNjApLGQlPTYwLGElPTYwLGM9cyhmLzEyKSxmJT0xMjtcbi8vIGluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9kb3JkaWxsZS9tb21lbnQtaXNvZHVyYXRpb24vYmxvYi9tYXN0ZXIvbW9tZW50Lmlzb2R1cmF0aW9uLmpzXG52YXIgZz1jLGg9ZixpPWUsaj1iLGs9YSxsPWQsbT10aGlzLmFzU2Vjb25kcygpO3JldHVybiBtPygwPm0/XCItXCI6XCJcIikrXCJQXCIrKGc/ZytcIllcIjpcIlwiKSsoaD9oK1wiTVwiOlwiXCIpKyhpP2krXCJEXCI6XCJcIikrKGp8fGt8fGw/XCJUXCI6XCJcIikrKGo/aitcIkhcIjpcIlwiKSsoaz9rK1wiTVwiOlwiXCIpKyhsP2wrXCJTXCI6XCJcIik6XCJQMERcIn12YXIgbWQsbmQ7bmQ9QXJyYXkucHJvdG90eXBlLnNvbWU/QXJyYXkucHJvdG90eXBlLnNvbWU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9iamVjdCh0aGlzKSxjPWIubGVuZ3RoPj4+MCxkPTA7Yz5kO2QrKylpZihkIGluIGImJmEuY2FsbCh0aGlzLGJbZF0sZCxiKSlyZXR1cm4hMDtyZXR1cm4hMX07XG4vLyBQbHVnaW5zIHRoYXQgYWRkIHByb3BlcnRpZXMgc2hvdWxkIGFsc28gYWRkIHRoZSBrZXkgaGVyZSAobnVsbCB2YWx1ZSksXG4vLyBzbyB3ZSBjYW4gcHJvcGVybHkgY2xvbmUgb3Vyc2VsdmVzLlxudmFyIG9kPWEubW9tZW50UHJvcGVydGllcz1bXSxwZD0hMSxxZD17fTthLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz0hMSxhLmRlcHJlY2F0aW9uSGFuZGxlcj1udWxsO3ZhciByZDtyZD1PYmplY3Qua2V5cz9PYmplY3Qua2V5czpmdW5jdGlvbihhKXt2YXIgYixjPVtdO2ZvcihiIGluIGEpaChhLGIpJiZjLnB1c2goYik7cmV0dXJuIGN9O3ZhciBzZCx0ZD17c2FtZURheTpcIltUb2RheSBhdF0gTFRcIixuZXh0RGF5OlwiW1RvbW9ycm93IGF0XSBMVFwiLG5leHRXZWVrOlwiZGRkZCBbYXRdIExUXCIsbGFzdERheTpcIltZZXN0ZXJkYXkgYXRdIExUXCIsbGFzdFdlZWs6XCJbTGFzdF0gZGRkZCBbYXRdIExUXCIsc2FtZUVsc2U6XCJMXCJ9LHVkPXtMVFM6XCJoOm1tOnNzIEFcIixMVDpcImg6bW0gQVwiLEw6XCJNTS9ERC9ZWVlZXCIsTEw6XCJNTU1NIEQsIFlZWVlcIixMTEw6XCJNTU1NIEQsIFlZWVkgaDptbSBBXCIsTExMTDpcImRkZGQsIE1NTU0gRCwgWVlZWSBoOm1tIEFcIn0sdmQ9XCJJbnZhbGlkIGRhdGVcIix3ZD1cIiVkXCIseGQ9L1xcZHsxLDJ9Lyx5ZD17ZnV0dXJlOlwiaW4gJXNcIixwYXN0OlwiJXMgYWdvXCIsczpcImEgZmV3IHNlY29uZHNcIixtOlwiYSBtaW51dGVcIixtbTpcIiVkIG1pbnV0ZXNcIixoOlwiYW4gaG91clwiLGhoOlwiJWQgaG91cnNcIixkOlwiYSBkYXlcIixkZDpcIiVkIGRheXNcIixNOlwiYSBtb250aFwiLE1NOlwiJWQgbW9udGhzXCIseTpcImEgeWVhclwiLHl5OlwiJWQgeWVhcnNcIn0semQ9e30sQWQ9e30sQmQ9LyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xZWVlZWVl8WVlZWVl8WVlZWXxZWXxnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xraz98bW0/fHNzP3xTezEsOX18eHxYfHp6P3xaWj98LikvZyxDZD0vKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nLERkPXt9LEVkPXt9LEZkPS9cXGQvLEdkPS9cXGRcXGQvLEhkPS9cXGR7M30vLElkPS9cXGR7NH0vLEpkPS9bKy1dP1xcZHs2fS8sS2Q9L1xcZFxcZD8vLExkPS9cXGRcXGRcXGRcXGQ/LyxNZD0vXFxkXFxkXFxkXFxkXFxkXFxkPy8sTmQ9L1xcZHsxLDN9LyxPZD0vXFxkezEsNH0vLFBkPS9bKy1dP1xcZHsxLDZ9LyxRZD0vXFxkKy8sUmQ9L1srLV0/XFxkKy8sU2Q9L1p8WystXVxcZFxcZDo/XFxkXFxkL2dpLFRkPS9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/L2dpLFVkPS9bKy1dP1xcZCsoXFwuXFxkezEsM30pPy8sVmQ9L1swLTldKlsnYS16XFx1MDBBMC1cXHUwNUZGXFx1MDcwMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSt8W1xcdTA2MDAtXFx1MDZGRlxcL10rKFxccyo/W1xcdTA2MDAtXFx1MDZGRl0rKXsxLDJ9L2ksV2Q9e30sWGQ9e30sWWQ9MCxaZD0xLCRkPTIsX2Q9MyxhZT00LGJlPTUsY2U9NixkZT03LGVlPTg7c2Q9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/QXJyYXkucHJvdG90eXBlLmluZGV4T2Y6ZnVuY3Rpb24oYSl7XG4vLyBJIGtub3dcbnZhciBiO2ZvcihiPTA7Yjx0aGlzLmxlbmd0aDsrK2IpaWYodGhpc1tiXT09PWEpcmV0dXJuIGI7cmV0dXJuLTF9LFQoXCJNXCIsW1wiTU1cIiwyXSxcIk1vXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb250aCgpKzF9KSxUKFwiTU1NXCIsMCwwLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHNTaG9ydCh0aGlzLGEpfSksVChcIk1NTU1cIiwwLDAsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRocyh0aGlzLGEpfSksSShcIm1vbnRoXCIsXCJNXCIpLEwoXCJtb250aFwiLDgpLFkoXCJNXCIsS2QpLFkoXCJNTVwiLEtkLEdkKSxZKFwiTU1NXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5tb250aHNTaG9ydFJlZ2V4KGEpfSksWShcIk1NTU1cIixmdW5jdGlvbihhLGIpe3JldHVybiBiLm1vbnRoc1JlZ2V4KGEpfSksYWEoW1wiTVwiLFwiTU1cIl0sZnVuY3Rpb24oYSxiKXtiW1pkXT10KGEpLTF9KSxhYShbXCJNTU1cIixcIk1NTU1cIl0sZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5fbG9jYWxlLm1vbnRoc1BhcnNlKGEsZCxjLl9zdHJpY3QpO251bGwhPWU/YltaZF09ZTpsKGMpLmludmFsaWRNb250aD1hfSk7XG4vLyBMT0NBTEVTXG52YXIgZmU9L0Rbb0RdPyhcXFtbXlxcW1xcXV0qXFxdfFxccyspK01NTU0/LyxnZT1cIkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXJcIi5zcGxpdChcIl9cIiksaGU9XCJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlY1wiLnNwbGl0KFwiX1wiKSxpZT1WZCxqZT1WZDtcbi8vIEZPUk1BVFRJTkdcblQoXCJZXCIsMCwwLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy55ZWFyKCk7cmV0dXJuIDk5OTk+PWE/XCJcIithOlwiK1wiK2F9KSxUKDAsW1wiWVlcIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueWVhcigpJTEwMH0pLFQoMCxbXCJZWVlZXCIsNF0sMCxcInllYXJcIiksVCgwLFtcIllZWVlZXCIsNV0sMCxcInllYXJcIiksVCgwLFtcIllZWVlZWVwiLDYsITBdLDAsXCJ5ZWFyXCIpLFxuLy8gQUxJQVNFU1xuSShcInllYXJcIixcInlcIiksXG4vLyBQUklPUklUSUVTXG5MKFwieWVhclwiLDEpLFxuLy8gUEFSU0lOR1xuWShcIllcIixSZCksWShcIllZXCIsS2QsR2QpLFkoXCJZWVlZXCIsT2QsSWQpLFkoXCJZWVlZWVwiLFBkLEpkKSxZKFwiWVlZWVlZXCIsUGQsSmQpLGFhKFtcIllZWVlZXCIsXCJZWVlZWVlcIl0sWWQpLGFhKFwiWVlZWVwiLGZ1bmN0aW9uKGIsYyl7Y1tZZF09Mj09PWIubGVuZ3RoP2EucGFyc2VUd29EaWdpdFllYXIoYik6dChiKX0pLGFhKFwiWVlcIixmdW5jdGlvbihiLGMpe2NbWWRdPWEucGFyc2VUd29EaWdpdFllYXIoYil9KSxhYShcIllcIixmdW5jdGlvbihhLGIpe2JbWWRdPXBhcnNlSW50KGEsMTApfSksXG4vLyBIT09LU1xuYS5wYXJzZVR3b0RpZ2l0WWVhcj1mdW5jdGlvbihhKXtyZXR1cm4gdChhKSsodChhKT42OD8xOTAwOjJlMyl9O1xuLy8gTU9NRU5UU1xudmFyIGtlPU4oXCJGdWxsWWVhclwiLCEwKTtcbi8vIEZPUk1BVFRJTkdcblQoXCJ3XCIsW1wid3dcIiwyXSxcIndvXCIsXCJ3ZWVrXCIpLFQoXCJXXCIsW1wiV1dcIiwyXSxcIldvXCIsXCJpc29XZWVrXCIpLFxuLy8gQUxJQVNFU1xuSShcIndlZWtcIixcIndcIiksSShcImlzb1dlZWtcIixcIldcIiksXG4vLyBQUklPUklUSUVTXG5MKFwid2Vla1wiLDUpLEwoXCJpc29XZWVrXCIsNSksXG4vLyBQQVJTSU5HXG5ZKFwid1wiLEtkKSxZKFwid3dcIixLZCxHZCksWShcIldcIixLZCksWShcIldXXCIsS2QsR2QpLGJhKFtcIndcIixcInd3XCIsXCJXXCIsXCJXV1wiXSxmdW5jdGlvbihhLGIsYyxkKXtiW2Quc3Vic3RyKDAsMSldPXQoYSl9KTt2YXIgbGU9e2RvdzowLC8vIFN1bmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLlxuZG95OjZ9O1xuLy8gRk9STUFUVElOR1xuVChcImRcIiwwLFwiZG9cIixcImRheVwiKSxUKFwiZGRcIiwwLDAsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKHRoaXMsYSl9KSxUKFwiZGRkXCIsMCwwLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c1Nob3J0KHRoaXMsYSl9KSxUKFwiZGRkZFwiLDAsMCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcyxhKX0pLFQoXCJlXCIsMCwwLFwid2Vla2RheVwiKSxUKFwiRVwiLDAsMCxcImlzb1dlZWtkYXlcIiksXG4vLyBBTElBU0VTXG5JKFwiZGF5XCIsXCJkXCIpLEkoXCJ3ZWVrZGF5XCIsXCJlXCIpLEkoXCJpc29XZWVrZGF5XCIsXCJFXCIpLFxuLy8gUFJJT1JJVFlcbkwoXCJkYXlcIiwxMSksTChcIndlZWtkYXlcIiwxMSksTChcImlzb1dlZWtkYXlcIiwxMSksXG4vLyBQQVJTSU5HXG5ZKFwiZFwiLEtkKSxZKFwiZVwiLEtkKSxZKFwiRVwiLEtkKSxZKFwiZGRcIixmdW5jdGlvbihhLGIpe3JldHVybiBiLndlZWtkYXlzTWluUmVnZXgoYSl9KSxZKFwiZGRkXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi53ZWVrZGF5c1Nob3J0UmVnZXgoYSl9KSxZKFwiZGRkZFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIud2Vla2RheXNSZWdleChhKX0pLGJhKFtcImRkXCIsXCJkZGRcIixcImRkZGRcIl0sZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5fbG9jYWxlLndlZWtkYXlzUGFyc2UoYSxkLGMuX3N0cmljdCk7XG4vLyBpZiB3ZSBkaWRuJ3QgZ2V0IGEgd2Vla2RheSBuYW1lLCBtYXJrIHRoZSBkYXRlIGFzIGludmFsaWRcbm51bGwhPWU/Yi5kPWU6bChjKS5pbnZhbGlkV2Vla2RheT1hfSksYmEoW1wiZFwiLFwiZVwiLFwiRVwiXSxmdW5jdGlvbihhLGIsYyxkKXtiW2RdPXQoYSl9KTtcbi8vIExPQ0FMRVNcbnZhciBtZT1cIlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5XCIuc3BsaXQoXCJfXCIpLG5lPVwiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0XCIuc3BsaXQoXCJfXCIpLG9lPVwiU3VfTW9fVHVfV2VfVGhfRnJfU2FcIi5zcGxpdChcIl9cIikscGU9VmQscWU9VmQscmU9VmQ7VChcIkhcIixbXCJISFwiLDJdLDAsXCJob3VyXCIpLFQoXCJoXCIsW1wiaGhcIiwyXSwwLFFhKSxUKFwia1wiLFtcImtrXCIsMl0sMCxSYSksVChcImhtbVwiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrUWEuYXBwbHkodGhpcykrUyh0aGlzLm1pbnV0ZXMoKSwyKX0pLFQoXCJobW1zc1wiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrUWEuYXBwbHkodGhpcykrUyh0aGlzLm1pbnV0ZXMoKSwyKStTKHRoaXMuc2Vjb25kcygpLDIpfSksVChcIkhtbVwiLDAsMCxmdW5jdGlvbigpe3JldHVyblwiXCIrdGhpcy5ob3VycygpK1ModGhpcy5taW51dGVzKCksMil9KSxUKFwiSG1tc3NcIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm5cIlwiK3RoaXMuaG91cnMoKStTKHRoaXMubWludXRlcygpLDIpK1ModGhpcy5zZWNvbmRzKCksMil9KSxTYShcImFcIiwhMCksU2EoXCJBXCIsITEpLFxuLy8gQUxJQVNFU1xuSShcImhvdXJcIixcImhcIiksXG4vLyBQUklPUklUWVxuTChcImhvdXJcIiwxMyksWShcImFcIixUYSksWShcIkFcIixUYSksWShcIkhcIixLZCksWShcImhcIixLZCksWShcIkhIXCIsS2QsR2QpLFkoXCJoaFwiLEtkLEdkKSxZKFwiaG1tXCIsTGQpLFkoXCJobW1zc1wiLE1kKSxZKFwiSG1tXCIsTGQpLFkoXCJIbW1zc1wiLE1kKSxhYShbXCJIXCIsXCJISFwiXSxfZCksYWEoW1wiYVwiLFwiQVwiXSxmdW5jdGlvbihhLGIsYyl7Yy5faXNQbT1jLl9sb2NhbGUuaXNQTShhKSxjLl9tZXJpZGllbT1hfSksYWEoW1wiaFwiLFwiaGhcIl0sZnVuY3Rpb24oYSxiLGMpe2JbX2RdPXQoYSksbChjKS5iaWdIb3VyPSEwfSksYWEoXCJobW1cIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5sZW5ndGgtMjtiW19kXT10KGEuc3Vic3RyKDAsZCkpLGJbYWVdPXQoYS5zdWJzdHIoZCkpLGwoYykuYmlnSG91cj0hMH0pLGFhKFwiaG1tc3NcIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5sZW5ndGgtNCxlPWEubGVuZ3RoLTI7YltfZF09dChhLnN1YnN0cigwLGQpKSxiW2FlXT10KGEuc3Vic3RyKGQsMikpLGJbYmVdPXQoYS5zdWJzdHIoZSkpLGwoYykuYmlnSG91cj0hMH0pLGFhKFwiSG1tXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEubGVuZ3RoLTI7YltfZF09dChhLnN1YnN0cigwLGQpKSxiW2FlXT10KGEuc3Vic3RyKGQpKX0pLGFhKFwiSG1tc3NcIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5sZW5ndGgtNCxlPWEubGVuZ3RoLTI7YltfZF09dChhLnN1YnN0cigwLGQpKSxiW2FlXT10KGEuc3Vic3RyKGQsMikpLGJbYmVdPXQoYS5zdWJzdHIoZSkpfSk7dmFyIHNlLHRlPS9bYXBdXFwuP20/XFwuPy9pLHVlPU4oXCJIb3Vyc1wiLCEwKSx2ZT17Y2FsZW5kYXI6dGQsbG9uZ0RhdGVGb3JtYXQ6dWQsaW52YWxpZERhdGU6dmQsb3JkaW5hbDp3ZCxvcmRpbmFsUGFyc2U6eGQscmVsYXRpdmVUaW1lOnlkLG1vbnRoczpnZSxtb250aHNTaG9ydDpoZSx3ZWVrOmxlLHdlZWtkYXlzOm1lLHdlZWtkYXlzTWluOm9lLHdlZWtkYXlzU2hvcnQ6bmUsbWVyaWRpZW1QYXJzZTp0ZX0sd2U9e30seGU9L15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KS0oPzpcXGRcXGQtXFxkXFxkfFdcXGRcXGQtXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZCkpKD86KFR8ICkoXFxkXFxkKD86OlxcZFxcZCg/OjpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPy8seWU9L15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KSg/OlxcZFxcZFxcZFxcZHxXXFxkXFxkXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZCkpKD86KFR8ICkoXFxkXFxkKD86XFxkXFxkKD86XFxkXFxkKD86Wy4sXVxcZCspPyk/KT8pKFtcXCtcXC1dXFxkXFxkKD86Oj9cXGRcXGQpP3xcXHMqWik/KT8vLHplPS9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/LyxBZT1bW1wiWVlZWVlZLU1NLUREXCIsL1srLV1cXGR7Nn0tXFxkXFxkLVxcZFxcZC9dLFtcIllZWVktTU0tRERcIiwvXFxkezR9LVxcZFxcZC1cXGRcXGQvXSxbXCJHR0dHLVtXXVdXLUVcIiwvXFxkezR9LVdcXGRcXGQtXFxkL10sW1wiR0dHRy1bV11XV1wiLC9cXGR7NH0tV1xcZFxcZC8sITFdLFtcIllZWVktREREXCIsL1xcZHs0fS1cXGR7M30vXSxbXCJZWVlZLU1NXCIsL1xcZHs0fS1cXGRcXGQvLCExXSxbXCJZWVlZWVlNTUREXCIsL1srLV1cXGR7MTB9L10sW1wiWVlZWU1NRERcIiwvXFxkezh9L10sXG4vLyBZWVlZTU0gaXMgTk9UIGFsbG93ZWQgYnkgdGhlIHN0YW5kYXJkXG5bXCJHR0dHW1ddV1dFXCIsL1xcZHs0fVdcXGR7M30vXSxbXCJHR0dHW1ddV1dcIiwvXFxkezR9V1xcZHsyfS8sITFdLFtcIllZWVlERERcIiwvXFxkezd9L11dLEJlPVtbXCJISDptbTpzcy5TU1NTXCIsL1xcZFxcZDpcXGRcXGQ6XFxkXFxkXFwuXFxkKy9dLFtcIkhIOm1tOnNzLFNTU1NcIiwvXFxkXFxkOlxcZFxcZDpcXGRcXGQsXFxkKy9dLFtcIkhIOm1tOnNzXCIsL1xcZFxcZDpcXGRcXGQ6XFxkXFxkL10sW1wiSEg6bW1cIiwvXFxkXFxkOlxcZFxcZC9dLFtcIkhIbW1zcy5TU1NTXCIsL1xcZFxcZFxcZFxcZFxcZFxcZFxcLlxcZCsvXSxbXCJISG1tc3MsU1NTU1wiLC9cXGRcXGRcXGRcXGRcXGRcXGQsXFxkKy9dLFtcIkhIbW1zc1wiLC9cXGRcXGRcXGRcXGRcXGRcXGQvXSxbXCJISG1tXCIsL1xcZFxcZFxcZFxcZC9dLFtcIkhIXCIsL1xcZFxcZC9dXSxDZT0vXlxcLz9EYXRlXFwoKFxcLT9cXGQrKS9pO2EuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2s9dyhcIm1vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlLiBUaGlzIGlzIGRpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvanMtZGF0ZS8gZm9yIG1vcmUgaW5mby5cIixmdW5jdGlvbihhKXthLl9kPW5ldyBEYXRlKGEuX2krKGEuX3VzZVVUQz9cIiBVVENcIjpcIlwiKSl9KSxcbi8vIGNvbnN0YW50IHRoYXQgcmVmZXJzIHRvIHRoZSBJU08gc3RhbmRhcmRcbmEuSVNPXzg2MDE9ZnVuY3Rpb24oKXt9O3ZhciBEZT13KFwibW9tZW50KCkubWluIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWF4IGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC9cIixmdW5jdGlvbigpe3ZhciBhPXJiLmFwcGx5KG51bGwsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJmEuaXNWYWxpZCgpP3RoaXM+YT90aGlzOmE6bigpfSksRWU9dyhcIm1vbWVudCgpLm1heCBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1pbiBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvXCIsZnVuY3Rpb24oKXt2YXIgYT1yYi5hcHBseShudWxsLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiZhLmlzVmFsaWQoKT9hPnRoaXM/dGhpczphOm4oKX0pLEZlPWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93P0RhdGUubm93KCk6K25ldyBEYXRlfTt4YihcIlpcIixcIjpcIikseGIoXCJaWlwiLFwiXCIpLFxuLy8gUEFSU0lOR1xuWShcIlpcIixUZCksWShcIlpaXCIsVGQpLGFhKFtcIlpcIixcIlpaXCJdLGZ1bmN0aW9uKGEsYixjKXtjLl91c2VVVEM9ITAsYy5fdHptPXliKFRkLGEpfSk7XG4vLyBIRUxQRVJTXG4vLyB0aW1lem9uZSBjaHVua2VyXG4vLyAnKzEwOjAwJyA+IFsnMTAnLCAgJzAwJ11cbi8vICctMTUzMCcgID4gWyctMTUnLCAnMzAnXVxudmFyIEdlPS8oW1xcK1xcLV18XFxkXFxkKS9naTtcbi8vIEhPT0tTXG4vLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyIGEgbW9tZW50IGlzIG11dGF0ZWQuXG4vLyBJdCBpcyBpbnRlbmRlZCB0byBrZWVwIHRoZSBvZmZzZXQgaW4gc3luYyB3aXRoIHRoZSB0aW1lem9uZS5cbmEudXBkYXRlT2Zmc2V0PWZ1bmN0aW9uKCl7fTtcbi8vIEFTUC5ORVQganNvbiBkYXRlIGZvcm1hdCByZWdleFxudmFyIEhlPS9eKFxcLSk/KD86KFxcZCopWy4gXSk/KFxcZCspXFw6KFxcZCspKD86XFw6KFxcZCspXFwuPyhcXGR7M30pP1xcZCopPyQvLEllPS9eKC0pP1AoPzooLT9bMC05LC5dKilZKT8oPzooLT9bMC05LC5dKilNKT8oPzooLT9bMC05LC5dKilXKT8oPzooLT9bMC05LC5dKilEKT8oPzpUKD86KC0/WzAtOSwuXSopSCk/KD86KC0/WzAtOSwuXSopTSk/KD86KC0/WzAtOSwuXSopUyk/KT8kLztNYi5mbj12Yi5wcm90b3R5cGU7dmFyIEplPVJiKDEsXCJhZGRcIiksS2U9UmIoLTEsXCJzdWJ0cmFjdFwiKTthLmRlZmF1bHRGb3JtYXQ9XCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiLGEuZGVmYXVsdEZvcm1hdFV0Yz1cIllZWVktTU0tRERUSEg6bW06c3NbWl1cIjt2YXIgTGU9dyhcIm1vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCB1c2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIHRvIGdldCB0aGUgbGFuZ3VhZ2UgY29uZmlndXJhdGlvbi4gVXNlIG1vbWVudCgpLmxvY2FsZSgpIHRvIGNoYW5nZSBsYW5ndWFnZXMuXCIsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/dGhpcy5sb2NhbGVEYXRhKCk6dGhpcy5sb2NhbGUoYSl9KTtcbi8vIEZPUk1BVFRJTkdcblQoMCxbXCJnZ1wiLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWVrWWVhcigpJTEwMH0pLFQoMCxbXCJHR1wiLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc29XZWVrWWVhcigpJTEwMH0pLHhjKFwiZ2dnZ1wiLFwid2Vla1llYXJcIikseGMoXCJnZ2dnZ1wiLFwid2Vla1llYXJcIikseGMoXCJHR0dHXCIsXCJpc29XZWVrWWVhclwiKSx4YyhcIkdHR0dHXCIsXCJpc29XZWVrWWVhclwiKSxcbi8vIEFMSUFTRVNcbkkoXCJ3ZWVrWWVhclwiLFwiZ2dcIiksSShcImlzb1dlZWtZZWFyXCIsXCJHR1wiKSxcbi8vIFBSSU9SSVRZXG5MKFwid2Vla1llYXJcIiwxKSxMKFwiaXNvV2Vla1llYXJcIiwxKSxcbi8vIFBBUlNJTkdcblkoXCJHXCIsUmQpLFkoXCJnXCIsUmQpLFkoXCJHR1wiLEtkLEdkKSxZKFwiZ2dcIixLZCxHZCksWShcIkdHR0dcIixPZCxJZCksWShcImdnZ2dcIixPZCxJZCksWShcIkdHR0dHXCIsUGQsSmQpLFkoXCJnZ2dnZ1wiLFBkLEpkKSxiYShbXCJnZ2dnXCIsXCJnZ2dnZ1wiLFwiR0dHR1wiLFwiR0dHR0dcIl0sZnVuY3Rpb24oYSxiLGMsZCl7YltkLnN1YnN0cigwLDIpXT10KGEpfSksYmEoW1wiZ2dcIixcIkdHXCJdLGZ1bmN0aW9uKGIsYyxkLGUpe2NbZV09YS5wYXJzZVR3b0RpZ2l0WWVhcihiKX0pLFxuLy8gRk9STUFUVElOR1xuVChcIlFcIiwwLFwiUW9cIixcInF1YXJ0ZXJcIiksXG4vLyBBTElBU0VTXG5JKFwicXVhcnRlclwiLFwiUVwiKSxcbi8vIFBSSU9SSVRZXG5MKFwicXVhcnRlclwiLDcpLFxuLy8gUEFSU0lOR1xuWShcIlFcIixGZCksYWEoXCJRXCIsZnVuY3Rpb24oYSxiKXtiW1pkXT0zKih0KGEpLTEpfSksXG4vLyBGT1JNQVRUSU5HXG5UKFwiRFwiLFtcIkREXCIsMl0sXCJEb1wiLFwiZGF0ZVwiKSxcbi8vIEFMSUFTRVNcbkkoXCJkYXRlXCIsXCJEXCIpLFxuLy8gUFJJT1JPSVRZXG5MKFwiZGF0ZVwiLDkpLFxuLy8gUEFSU0lOR1xuWShcIkRcIixLZCksWShcIkREXCIsS2QsR2QpLFkoXCJEb1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/Yi5fb3JkaW5hbFBhcnNlOmIuX29yZGluYWxQYXJzZUxlbmllbnR9KSxhYShbXCJEXCIsXCJERFwiXSwkZCksYWEoXCJEb1wiLGZ1bmN0aW9uKGEsYil7YlskZF09dChhLm1hdGNoKEtkKVswXSwxMCl9KTtcbi8vIE1PTUVOVFNcbnZhciBNZT1OKFwiRGF0ZVwiLCEwKTtcbi8vIEZPUk1BVFRJTkdcblQoXCJERERcIixbXCJEREREXCIsM10sXCJERERvXCIsXCJkYXlPZlllYXJcIiksXG4vLyBBTElBU0VTXG5JKFwiZGF5T2ZZZWFyXCIsXCJERERcIiksXG4vLyBQUklPUklUWVxuTChcImRheU9mWWVhclwiLDQpLFxuLy8gUEFSU0lOR1xuWShcIkRERFwiLE5kKSxZKFwiRERERFwiLEhkKSxhYShbXCJERERcIixcIkRERERcIl0sZnVuY3Rpb24oYSxiLGMpe2MuX2RheU9mWWVhcj10KGEpfSksXG4vLyBGT1JNQVRUSU5HXG5UKFwibVwiLFtcIm1tXCIsMl0sMCxcIm1pbnV0ZVwiKSxcbi8vIEFMSUFTRVNcbkkoXCJtaW51dGVcIixcIm1cIiksXG4vLyBQUklPUklUWVxuTChcIm1pbnV0ZVwiLDE0KSxcbi8vIFBBUlNJTkdcblkoXCJtXCIsS2QpLFkoXCJtbVwiLEtkLEdkKSxhYShbXCJtXCIsXCJtbVwiXSxhZSk7XG4vLyBNT01FTlRTXG52YXIgTmU9TihcIk1pbnV0ZXNcIiwhMSk7XG4vLyBGT1JNQVRUSU5HXG5UKFwic1wiLFtcInNzXCIsMl0sMCxcInNlY29uZFwiKSxcbi8vIEFMSUFTRVNcbkkoXCJzZWNvbmRcIixcInNcIiksXG4vLyBQUklPUklUWVxuTChcInNlY29uZFwiLDE1KSxcbi8vIFBBUlNJTkdcblkoXCJzXCIsS2QpLFkoXCJzc1wiLEtkLEdkKSxhYShbXCJzXCIsXCJzc1wiXSxiZSk7XG4vLyBNT01FTlRTXG52YXIgT2U9TihcIlNlY29uZHNcIiwhMSk7XG4vLyBGT1JNQVRUSU5HXG5UKFwiU1wiLDAsMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMDApfSksVCgwLFtcIlNTXCIsMl0sMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMCl9KSxUKDAsW1wiU1NTXCIsM10sMCxcIm1pbGxpc2Vjb25kXCIpLFQoMCxbXCJTU1NTXCIsNF0sMCxmdW5jdGlvbigpe3JldHVybiAxMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxUKDAsW1wiU1NTU1NcIiw1XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDEwMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxUKDAsW1wiU1NTU1NTXCIsNl0sMCxmdW5jdGlvbigpe3JldHVybiAxZTMqdGhpcy5taWxsaXNlY29uZCgpfSksVCgwLFtcIlNTU1NTU1NcIiw3XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxUKDAsW1wiU1NTU1NTU1NcIiw4XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNSp0aGlzLm1pbGxpc2Vjb25kKCl9KSxUKDAsW1wiU1NTU1NTU1NTXCIsOV0sMCxmdW5jdGlvbigpe3JldHVybiAxZTYqdGhpcy5taWxsaXNlY29uZCgpfSksXG4vLyBBTElBU0VTXG5JKFwibWlsbGlzZWNvbmRcIixcIm1zXCIpLFxuLy8gUFJJT1JJVFlcbkwoXCJtaWxsaXNlY29uZFwiLDE2KSxcbi8vIFBBUlNJTkdcblkoXCJTXCIsTmQsRmQpLFkoXCJTU1wiLE5kLEdkKSxZKFwiU1NTXCIsTmQsSGQpO3ZhciBQZTtmb3IoUGU9XCJTU1NTXCI7UGUubGVuZ3RoPD05O1BlKz1cIlNcIilZKFBlLFFkKTtmb3IoUGU9XCJTXCI7UGUubGVuZ3RoPD05O1BlKz1cIlNcIilhYShQZSxHYyk7XG4vLyBNT01FTlRTXG52YXIgUWU9TihcIk1pbGxpc2Vjb25kc1wiLCExKTtcbi8vIEZPUk1BVFRJTkdcblQoXCJ6XCIsMCwwLFwiem9uZUFiYnJcIiksVChcInp6XCIsMCwwLFwiem9uZU5hbWVcIik7dmFyIFJlPXEucHJvdG90eXBlO1JlLmFkZD1KZSxSZS5jYWxlbmRhcj1VYixSZS5jbG9uZT1WYixSZS5kaWZmPWFjLFJlLmVuZE9mPW1jLFJlLmZvcm1hdD1lYyxSZS5mcm9tPWZjLFJlLmZyb21Ob3c9Z2MsUmUudG89aGMsUmUudG9Ob3c9aWMsUmUuZ2V0PVEsUmUuaW52YWxpZEF0PXZjLFJlLmlzQWZ0ZXI9V2IsUmUuaXNCZWZvcmU9WGIsUmUuaXNCZXR3ZWVuPVliLFJlLmlzU2FtZT1aYixSZS5pc1NhbWVPckFmdGVyPSRiLFJlLmlzU2FtZU9yQmVmb3JlPV9iLFJlLmlzVmFsaWQ9dGMsUmUubGFuZz1MZSxSZS5sb2NhbGU9amMsUmUubG9jYWxlRGF0YT1rYyxSZS5tYXg9RWUsUmUubWluPURlLFJlLnBhcnNpbmdGbGFncz11YyxSZS5zZXQ9UixSZS5zdGFydE9mPWxjLFJlLnN1YnRyYWN0PUtlLFJlLnRvQXJyYXk9cWMsUmUudG9PYmplY3Q9cmMsUmUudG9EYXRlPXBjLFJlLnRvSVNPU3RyaW5nPWRjLFJlLnRvSlNPTj1zYyxSZS50b1N0cmluZz1jYyxSZS51bml4PW9jLFJlLnZhbHVlT2Y9bmMsUmUuY3JlYXRpb25EYXRhPXdjLFxuLy8gWWVhclxuUmUueWVhcj1rZSxSZS5pc0xlYXBZZWFyPXFhLFxuLy8gV2VlayBZZWFyXG5SZS53ZWVrWWVhcj15YyxSZS5pc29XZWVrWWVhcj16Yyxcbi8vIFF1YXJ0ZXJcblJlLnF1YXJ0ZXI9UmUucXVhcnRlcnM9RWMsXG4vLyBNb250aFxuUmUubW9udGg9amEsUmUuZGF5c0luTW9udGg9a2EsXG4vLyBXZWVrXG5SZS53ZWVrPVJlLndlZWtzPUFhLFJlLmlzb1dlZWs9UmUuaXNvV2Vla3M9QmEsUmUud2Vla3NJblllYXI9QmMsUmUuaXNvV2Vla3NJblllYXI9QWMsXG4vLyBEYXlcblJlLmRhdGU9TWUsUmUuZGF5PVJlLmRheXM9SmEsUmUud2Vla2RheT1LYSxSZS5pc29XZWVrZGF5PUxhLFJlLmRheU9mWWVhcj1GYyxcbi8vIEhvdXJcblJlLmhvdXI9UmUuaG91cnM9dWUsXG4vLyBNaW51dGVcblJlLm1pbnV0ZT1SZS5taW51dGVzPU5lLFxuLy8gU2Vjb25kXG5SZS5zZWNvbmQ9UmUuc2Vjb25kcz1PZSxcbi8vIE1pbGxpc2Vjb25kXG5SZS5taWxsaXNlY29uZD1SZS5taWxsaXNlY29uZHM9UWUsXG4vLyBPZmZzZXRcblJlLnV0Y09mZnNldD1CYixSZS51dGM9RGIsUmUubG9jYWw9RWIsUmUucGFyc2Vab25lPUZiLFJlLmhhc0FsaWduZWRIb3VyT2Zmc2V0PUdiLFJlLmlzRFNUPUhiLFJlLmlzTG9jYWw9SmIsUmUuaXNVdGNPZmZzZXQ9S2IsUmUuaXNVdGM9TGIsUmUuaXNVVEM9TGIsXG4vLyBUaW1lem9uZVxuUmUuem9uZUFiYnI9SGMsUmUuem9uZU5hbWU9SWMsXG4vLyBEZXByZWNhdGlvbnNcblJlLmRhdGVzPXcoXCJkYXRlcyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgZGF0ZSBpbnN0ZWFkLlwiLE1lKSxSZS5tb250aHM9dyhcIm1vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZFwiLGphKSxSZS55ZWFycz13KFwieWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZFwiLGtlKSxSZS56b25lPXcoXCJtb21lbnQoKS56b25lIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQoKS51dGNPZmZzZXQgaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy96b25lL1wiLENiKSxSZS5pc0RTVFNoaWZ0ZWQ9dyhcImlzRFNUU2hpZnRlZCBpcyBkZXByZWNhdGVkLiBTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9kc3Qtc2hpZnRlZC8gZm9yIG1vcmUgaW5mb3JtYXRpb25cIixJYik7dmFyIFNlPVJlLFRlPUIucHJvdG90eXBlO1RlLmNhbGVuZGFyPUMsVGUubG9uZ0RhdGVGb3JtYXQ9RCxUZS5pbnZhbGlkRGF0ZT1FLFRlLm9yZGluYWw9RixUZS5wcmVwYXJzZT1MYyxUZS5wb3N0Zm9ybWF0PUxjLFRlLnJlbGF0aXZlVGltZT1HLFRlLnBhc3RGdXR1cmU9SCxUZS5zZXQ9eixcbi8vIE1vbnRoXG5UZS5tb250aHM9ZWEsVGUubW9udGhzU2hvcnQ9ZmEsVGUubW9udGhzUGFyc2U9aGEsVGUubW9udGhzUmVnZXg9bWEsVGUubW9udGhzU2hvcnRSZWdleD1sYSxcbi8vIFdlZWtcblRlLndlZWs9eGEsVGUuZmlyc3REYXlPZlllYXI9emEsVGUuZmlyc3REYXlPZldlZWs9eWEsXG4vLyBEYXkgb2YgV2Vla1xuVGUud2Vla2RheXM9RWEsVGUud2Vla2RheXNNaW49R2EsVGUud2Vla2RheXNTaG9ydD1GYSxUZS53ZWVrZGF5c1BhcnNlPUlhLFRlLndlZWtkYXlzUmVnZXg9TWEsVGUud2Vla2RheXNTaG9ydFJlZ2V4PU5hLFRlLndlZWtkYXlzTWluUmVnZXg9T2EsXG4vLyBIb3Vyc1xuVGUuaXNQTT1VYSxUZS5tZXJpZGllbT1WYSxaYShcImVuXCIse29yZGluYWxQYXJzZTovXFxkezEsMn0odGh8c3R8bmR8cmQpLyxvcmRpbmFsOmZ1bmN0aW9uKGEpe3ZhciBiPWElMTAsYz0xPT09dChhJTEwMC8xMCk/XCJ0aFwiOjE9PT1iP1wic3RcIjoyPT09Yj9cIm5kXCI6Mz09PWI/XCJyZFwiOlwidGhcIjtyZXR1cm4gYStjfX0pLFxuLy8gU2lkZSBlZmZlY3QgaW1wb3J0c1xuYS5sYW5nPXcoXCJtb21lbnQubGFuZyBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZSBpbnN0ZWFkLlwiLFphKSxhLmxhbmdEYXRhPXcoXCJtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuXCIsYWIpO3ZhciBVZT1NYXRoLmFicyxWZT1jZChcIm1zXCIpLFdlPWNkKFwic1wiKSxYZT1jZChcIm1cIiksWWU9Y2QoXCJoXCIpLFplPWNkKFwiZFwiKSwkZT1jZChcIndcIiksX2U9Y2QoXCJNXCIpLGFmPWNkKFwieVwiKSxiZj1lZChcIm1pbGxpc2Vjb25kc1wiKSxjZj1lZChcInNlY29uZHNcIiksZGY9ZWQoXCJtaW51dGVzXCIpLGVmPWVkKFwiaG91cnNcIiksZmY9ZWQoXCJkYXlzXCIpLGdmPWVkKFwibW9udGhzXCIpLGhmPWVkKFwieWVhcnNcIiksamY9TWF0aC5yb3VuZCxrZj17czo0NSwvLyBzZWNvbmRzIHRvIG1pbnV0ZVxubTo0NSwvLyBtaW51dGVzIHRvIGhvdXJcbmg6MjIsLy8gaG91cnMgdG8gZGF5XG5kOjI2LC8vIGRheXMgdG8gbW9udGhcbk06MTF9LGxmPU1hdGguYWJzLG1mPXZiLnByb3RvdHlwZTttZi5hYnM9VWMsbWYuYWRkPVdjLG1mLnN1YnRyYWN0PVhjLG1mLmFzPWFkLG1mLmFzTWlsbGlzZWNvbmRzPVZlLG1mLmFzU2Vjb25kcz1XZSxtZi5hc01pbnV0ZXM9WGUsbWYuYXNIb3Vycz1ZZSxtZi5hc0RheXM9WmUsbWYuYXNXZWVrcz0kZSxtZi5hc01vbnRocz1fZSxtZi5hc1llYXJzPWFmLG1mLnZhbHVlT2Y9YmQsbWYuX2J1YmJsZT1aYyxtZi5nZXQ9ZGQsbWYubWlsbGlzZWNvbmRzPWJmLG1mLnNlY29uZHM9Y2YsbWYubWludXRlcz1kZixtZi5ob3Vycz1lZixtZi5kYXlzPWZmLG1mLndlZWtzPWZkLG1mLm1vbnRocz1nZixtZi55ZWFycz1oZixtZi5odW1hbml6ZT1rZCxtZi50b0lTT1N0cmluZz1sZCxtZi50b1N0cmluZz1sZCxtZi50b0pTT049bGQsbWYubG9jYWxlPWpjLG1mLmxvY2FsZURhdGE9a2MsXG4vLyBEZXByZWNhdGlvbnNcbm1mLnRvSXNvU3RyaW5nPXcoXCJ0b0lzb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdG9JU09TdHJpbmcoKSBpbnN0ZWFkIChub3RpY2UgdGhlIGNhcGl0YWxzKVwiLGxkKSxtZi5sYW5nPUxlLFxuLy8gU2lkZSBlZmZlY3QgaW1wb3J0c1xuLy8gRk9STUFUVElOR1xuVChcIlhcIiwwLDAsXCJ1bml4XCIpLFQoXCJ4XCIsMCwwLFwidmFsdWVPZlwiKSxcbi8vIFBBUlNJTkdcblkoXCJ4XCIsUmQpLFkoXCJYXCIsVWQpLGFhKFwiWFwiLGZ1bmN0aW9uKGEsYixjKXtjLl9kPW5ldyBEYXRlKDFlMypwYXJzZUZsb2F0KGEsMTApKX0pLGFhKFwieFwiLGZ1bmN0aW9uKGEsYixjKXtjLl9kPW5ldyBEYXRlKHQoYSkpfSksXG4vLyBTaWRlIGVmZmVjdCBpbXBvcnRzXG5hLnZlcnNpb249XCIyLjE0LjFcIixiKHJiKSxhLmZuPVNlLGEubWluPXRiLGEubWF4PXViLGEubm93PUZlLGEudXRjPWosYS51bml4PUpjLGEubW9udGhzPVBjLGEuaXNEYXRlPWYsYS5sb2NhbGU9WmEsYS5pbnZhbGlkPW4sYS5kdXJhdGlvbj1NYixhLmlzTW9tZW50PXIsYS53ZWVrZGF5cz1SYyxhLnBhcnNlWm9uZT1LYyxhLmxvY2FsZURhdGE9YWIsYS5pc0R1cmF0aW9uPXdiLGEubW9udGhzU2hvcnQ9UWMsYS53ZWVrZGF5c01pbj1UYyxhLmRlZmluZUxvY2FsZT0kYSxhLnVwZGF0ZUxvY2FsZT1fYSxhLmxvY2FsZXM9YmIsYS53ZWVrZGF5c1Nob3J0PVNjLGEubm9ybWFsaXplVW5pdHM9SixhLnJlbGF0aXZlVGltZVJvdW5kaW5nPWlkLGEucmVsYXRpdmVUaW1lVGhyZXNob2xkPWpkLGEuY2FsZW5kYXJGb3JtYXQ9VGIsYS5wcm90b3R5cGU9U2U7dmFyIG5mPWE7cmV0dXJuIG5mfSk7IiwiLyohIHZlcnNpb24gOiA0LjE3LjM3XG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gYm9vdHN0cmFwLWRhdGV0aW1lanNcbiBodHRwczovL2dpdGh1Yi5jb20vRW9uYXNkYW4vYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyXG4gQ29weXJpZ2h0IChjKSAyMDE1IEpvbmF0aGFuIFBldGVyc29uXG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cbiFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtcImpxdWVyeVwiLFwibW9tZW50XCJdLGEpO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMpYShyZXF1aXJlKFwianF1ZXJ5XCIpLHJlcXVpcmUoXCJtb21lbnRcIikpO2Vsc2V7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGpRdWVyeSl0aHJvd1wiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyIHJlcXVpcmVzIGpRdWVyeSB0byBiZSBsb2FkZWQgZmlyc3RcIjtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgbW9tZW50KXRocm93XCJib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIgcmVxdWlyZXMgTW9tZW50LmpzIHRvIGJlIGxvYWRlZCBmaXJzdFwiO2EoalF1ZXJ5LG1vbWVudCl9fShmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2lmKCFiKXRocm93IG5ldyBFcnJvcihcImJvb3RzdHJhcC1kYXRldGltZXBpY2tlciByZXF1aXJlcyBNb21lbnQuanMgdG8gYmUgbG9hZGVkIGZpcnN0XCIpO3ZhciBjPWZ1bmN0aW9uKGMsZCl7dmFyIGUsZixnLGgsaSxqLGssbD17fSxtPSEwLG49ITEsbz0hMSxwPTAscT1be2Nsc05hbWU6XCJkYXlzXCIsbmF2Rm5jOlwiTVwiLG5hdlN0ZXA6MX0se2Nsc05hbWU6XCJtb250aHNcIixuYXZGbmM6XCJ5XCIsbmF2U3RlcDoxfSx7Y2xzTmFtZTpcInllYXJzXCIsbmF2Rm5jOlwieVwiLG5hdlN0ZXA6MTB9LHtjbHNOYW1lOlwiZGVjYWRlc1wiLG5hdkZuYzpcInlcIixuYXZTdGVwOjEwMH1dLHI9W1wiZGF5c1wiLFwibW9udGhzXCIsXCJ5ZWFyc1wiLFwiZGVjYWRlc1wiXSxzPVtcInRvcFwiLFwiYm90dG9tXCIsXCJhdXRvXCJdLHQ9W1wibGVmdFwiLFwicmlnaHRcIixcImF1dG9cIl0sdT1bXCJkZWZhdWx0XCIsXCJ0b3BcIixcImJvdHRvbVwiXSx2PXt1cDozOCwzODpcInVwXCIsZG93bjo0MCw0MDpcImRvd25cIixsZWZ0OjM3LDM3OlwibGVmdFwiLHJpZ2h0OjM5LDM5OlwicmlnaHRcIix0YWI6OSw5OlwidGFiXCIsZXNjYXBlOjI3LDI3OlwiZXNjYXBlXCIsZW50ZXI6MTMsMTM6XCJlbnRlclwiLHBhZ2VVcDozMywzMzpcInBhZ2VVcFwiLHBhZ2VEb3duOjM0LDM0OlwicGFnZURvd25cIixzaGlmdDoxNiwxNjpcInNoaWZ0XCIsY29udHJvbDoxNywxNzpcImNvbnRyb2xcIixzcGFjZTozMiwzMjpcInNwYWNlXCIsdDo4NCw4NDpcInRcIixcImRlbGV0ZVwiOjQ2LDQ2OlwiZGVsZXRlXCJ9LHc9e30seD1mdW5jdGlvbihhKXt2YXIgYyxlLGYsZyxoLGk9ITE7cmV0dXJuIHZvaWQgMCE9PWIudHomJnZvaWQgMCE9PWQudGltZVpvbmUmJm51bGwhPT1kLnRpbWVab25lJiZcIlwiIT09ZC50aW1lWm9uZSYmKGk9ITApLHZvaWQgMD09PWF8fG51bGw9PT1hP2M9aT9iKCkudHooZC50aW1lWm9uZSkuc3RhcnRPZihcImRcIik6YigpLnN0YXJ0T2YoXCJkXCIpOmk/KGU9YigpLnR6KGQudGltZVpvbmUpLnV0Y09mZnNldCgpLGY9YihhLGosZC51c2VTdHJpY3QpLnV0Y09mZnNldCgpLGYhPT1lPyhnPWIoKS50eihkLnRpbWVab25lKS5mb3JtYXQoXCJaXCIpLGg9YihhLGosZC51c2VTdHJpY3QpLmZvcm1hdChcIllZWVktTU0tRERbVF1ISDptbTpzc1wiKStnLGM9YihoLGosZC51c2VTdHJpY3QpLnR6KGQudGltZVpvbmUpKTpjPWIoYSxqLGQudXNlU3RyaWN0KS50eihkLnRpbWVab25lKSk6Yz1iKGEsaixkLnVzZVN0cmljdCksY30seT1mdW5jdGlvbihhKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYXx8YS5sZW5ndGg+MSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiaXNFbmFibGVkIGV4cGVjdHMgYSBzaW5nbGUgY2hhcmFjdGVyIHN0cmluZyBwYXJhbWV0ZXJcIik7c3dpdGNoKGEpe2Nhc2VcInlcIjpyZXR1cm4tMSE9PWkuaW5kZXhPZihcIllcIik7Y2FzZVwiTVwiOnJldHVybi0xIT09aS5pbmRleE9mKFwiTVwiKTtjYXNlXCJkXCI6cmV0dXJuLTEhPT1pLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImRcIik7Y2FzZVwiaFwiOmNhc2VcIkhcIjpyZXR1cm4tMSE9PWkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiaFwiKTtjYXNlXCJtXCI6cmV0dXJuLTEhPT1pLmluZGV4T2YoXCJtXCIpO2Nhc2VcInNcIjpyZXR1cm4tMSE9PWkuaW5kZXhPZihcInNcIik7ZGVmYXVsdDpyZXR1cm4hMX19LHo9ZnVuY3Rpb24oKXtyZXR1cm4geShcImhcIil8fHkoXCJtXCIpfHx5KFwic1wiKX0sQT1mdW5jdGlvbigpe3JldHVybiB5KFwieVwiKXx8eShcIk1cIil8fHkoXCJkXCIpfSxCPWZ1bmN0aW9uKCl7dmFyIGI9YShcIjx0aGVhZD5cIikuYXBwZW5kKGEoXCI8dHI+XCIpLmFwcGVuZChhKFwiPHRoPlwiKS5hZGRDbGFzcyhcInByZXZcIikuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJwcmV2aW91c1wiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLnByZXZpb3VzKSkpLmFwcGVuZChhKFwiPHRoPlwiKS5hZGRDbGFzcyhcInBpY2tlci1zd2l0Y2hcIikuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJwaWNrZXJTd2l0Y2hcIikuYXR0cihcImNvbHNwYW5cIixkLmNhbGVuZGFyV2Vla3M/XCI2XCI6XCI1XCIpKS5hcHBlbmQoYShcIjx0aD5cIikuYWRkQ2xhc3MoXCJuZXh0XCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwibmV4dFwiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLm5leHQpKSkpLGM9YShcIjx0Ym9keT5cIikuYXBwZW5kKGEoXCI8dHI+XCIpLmFwcGVuZChhKFwiPHRkPlwiKS5hdHRyKFwiY29sc3BhblwiLGQuY2FsZW5kYXJXZWVrcz9cIjhcIjpcIjdcIikpKTtyZXR1cm5bYShcIjxkaXY+XCIpLmFkZENsYXNzKFwiZGF0ZXBpY2tlci1kYXlzXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKS5hcHBlbmQoYikuYXBwZW5kKGEoXCI8dGJvZHk+XCIpKSksYShcIjxkaXY+XCIpLmFkZENsYXNzKFwiZGF0ZXBpY2tlci1tb250aHNcIikuYXBwZW5kKGEoXCI8dGFibGU+XCIpLmFkZENsYXNzKFwidGFibGUtY29uZGVuc2VkXCIpLmFwcGVuZChiLmNsb25lKCkpLmFwcGVuZChjLmNsb25lKCkpKSxhKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJkYXRlcGlja2VyLXllYXJzXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKS5hcHBlbmQoYi5jbG9uZSgpKS5hcHBlbmQoYy5jbG9uZSgpKSksYShcIjxkaXY+XCIpLmFkZENsYXNzKFwiZGF0ZXBpY2tlci1kZWNhZGVzXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKS5hcHBlbmQoYi5jbG9uZSgpKS5hcHBlbmQoYy5jbG9uZSgpKSldfSxDPWZ1bmN0aW9uKCl7dmFyIGI9YShcIjx0cj5cIiksYz1hKFwiPHRyPlwiKSxlPWEoXCI8dHI+XCIpO3JldHVybiB5KFwiaFwiKSYmKGIuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGE+XCIpLmF0dHIoe2hyZWY6XCIjXCIsdGFiaW5kZXg6XCItMVwiLHRpdGxlOmQudG9vbHRpcHMuaW5jcmVtZW50SG91cn0pLmFkZENsYXNzKFwiYnRuXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiaW5jcmVtZW50SG91cnNcIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy51cCkpKSksYy5hcHBlbmQoYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJ0aW1lcGlja2VyLWhvdXJcIikuYXR0cih7XCJkYXRhLXRpbWUtY29tcG9uZW50XCI6XCJob3Vyc1wiLHRpdGxlOmQudG9vbHRpcHMucGlja0hvdXJ9KS5hdHRyKFwiZGF0YS1hY3Rpb25cIixcInNob3dIb3Vyc1wiKSkpLGUuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGE+XCIpLmF0dHIoe2hyZWY6XCIjXCIsdGFiaW5kZXg6XCItMVwiLHRpdGxlOmQudG9vbHRpcHMuZGVjcmVtZW50SG91cn0pLmFkZENsYXNzKFwiYnRuXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiZGVjcmVtZW50SG91cnNcIikuYXBwZW5kKGEoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoZC5pY29ucy5kb3duKSkpKSkseShcIm1cIikmJih5KFwiaFwiKSYmKGIuYXBwZW5kKGEoXCI8dGQ+XCIpLmFkZENsYXNzKFwic2VwYXJhdG9yXCIpKSxjLmFwcGVuZChhKFwiPHRkPlwiKS5hZGRDbGFzcyhcInNlcGFyYXRvclwiKS5odG1sKFwiOlwiKSksZS5hcHBlbmQoYShcIjx0ZD5cIikuYWRkQ2xhc3MoXCJzZXBhcmF0b3JcIikpKSxiLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtocmVmOlwiI1wiLHRhYmluZGV4OlwiLTFcIix0aXRsZTpkLnRvb2x0aXBzLmluY3JlbWVudE1pbnV0ZX0pLmFkZENsYXNzKFwiYnRuXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiaW5jcmVtZW50TWludXRlc1wiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLnVwKSkpKSxjLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhcInRpbWVwaWNrZXItbWludXRlXCIpLmF0dHIoe1wiZGF0YS10aW1lLWNvbXBvbmVudFwiOlwibWludXRlc1wiLHRpdGxlOmQudG9vbHRpcHMucGlja01pbnV0ZX0pLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwic2hvd01pbnV0ZXNcIikpKSxlLmFwcGVuZChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtocmVmOlwiI1wiLHRhYmluZGV4OlwiLTFcIix0aXRsZTpkLnRvb2x0aXBzLmRlY3JlbWVudE1pbnV0ZX0pLmFkZENsYXNzKFwiYnRuXCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwiZGVjcmVtZW50TWludXRlc1wiKS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLmRvd24pKSkpKSx5KFwic1wiKSYmKHkoXCJtXCIpJiYoYi5hcHBlbmQoYShcIjx0ZD5cIikuYWRkQ2xhc3MoXCJzZXBhcmF0b3JcIikpLGMuYXBwZW5kKGEoXCI8dGQ+XCIpLmFkZENsYXNzKFwic2VwYXJhdG9yXCIpLmh0bWwoXCI6XCIpKSxlLmFwcGVuZChhKFwiPHRkPlwiKS5hZGRDbGFzcyhcInNlcGFyYXRvclwiKSkpLGIuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGE+XCIpLmF0dHIoe2hyZWY6XCIjXCIsdGFiaW5kZXg6XCItMVwiLHRpdGxlOmQudG9vbHRpcHMuaW5jcmVtZW50U2Vjb25kfSkuYWRkQ2xhc3MoXCJidG5cIikuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJpbmNyZW1lbnRTZWNvbmRzXCIpLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKGQuaWNvbnMudXApKSkpLGMuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwidGltZXBpY2tlci1zZWNvbmRcIikuYXR0cih7XCJkYXRhLXRpbWUtY29tcG9uZW50XCI6XCJzZWNvbmRzXCIsdGl0bGU6ZC50b29sdGlwcy5waWNrU2Vjb25kfSkuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJzaG93U2Vjb25kc1wiKSkpLGUuYXBwZW5kKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGE+XCIpLmF0dHIoe2hyZWY6XCIjXCIsdGFiaW5kZXg6XCItMVwiLHRpdGxlOmQudG9vbHRpcHMuZGVjcmVtZW50U2Vjb25kfSkuYWRkQ2xhc3MoXCJidG5cIikuYXR0cihcImRhdGEtYWN0aW9uXCIsXCJkZWNyZW1lbnRTZWNvbmRzXCIpLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKGQuaWNvbnMuZG93bikpKSkpLGh8fChiLmFwcGVuZChhKFwiPHRkPlwiKS5hZGRDbGFzcyhcInNlcGFyYXRvclwiKSksYy5hcHBlbmQoYShcIjx0ZD5cIikuYXBwZW5kKGEoXCI8YnV0dG9uPlwiKS5hZGRDbGFzcyhcImJ0biBidG4tcHJpbWFyeVwiKS5hdHRyKHtcImRhdGEtYWN0aW9uXCI6XCJ0b2dnbGVQZXJpb2RcIix0YWJpbmRleDpcIi0xXCIsdGl0bGU6ZC50b29sdGlwcy50b2dnbGVQZXJpb2R9KSkpLGUuYXBwZW5kKGEoXCI8dGQ+XCIpLmFkZENsYXNzKFwic2VwYXJhdG9yXCIpKSksYShcIjxkaXY+XCIpLmFkZENsYXNzKFwidGltZXBpY2tlci1waWNrZXJcIikuYXBwZW5kKGEoXCI8dGFibGU+XCIpLmFkZENsYXNzKFwidGFibGUtY29uZGVuc2VkXCIpLmFwcGVuZChbYixjLGVdKSl9LEQ9ZnVuY3Rpb24oKXt2YXIgYj1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ0aW1lcGlja2VyLWhvdXJzXCIpLmFwcGVuZChhKFwiPHRhYmxlPlwiKS5hZGRDbGFzcyhcInRhYmxlLWNvbmRlbnNlZFwiKSksYz1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ0aW1lcGlja2VyLW1pbnV0ZXNcIikuYXBwZW5kKGEoXCI8dGFibGU+XCIpLmFkZENsYXNzKFwidGFibGUtY29uZGVuc2VkXCIpKSxkPWEoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInRpbWVwaWNrZXItc2Vjb25kc1wiKS5hcHBlbmQoYShcIjx0YWJsZT5cIikuYWRkQ2xhc3MoXCJ0YWJsZS1jb25kZW5zZWRcIikpLGU9W0MoKV07cmV0dXJuIHkoXCJoXCIpJiZlLnB1c2goYikseShcIm1cIikmJmUucHVzaChjKSx5KFwic1wiKSYmZS5wdXNoKGQpLGV9LEU9ZnVuY3Rpb24oKXt2YXIgYj1bXTtyZXR1cm4gZC5zaG93VG9kYXlCdXR0b24mJmIucHVzaChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtcImRhdGEtYWN0aW9uXCI6XCJ0b2RheVwiLHRpdGxlOmQudG9vbHRpcHMudG9kYXl9KS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLnRvZGF5KSkpKSwhZC5zaWRlQnlTaWRlJiZBKCkmJnooKSYmYi5wdXNoKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGE+XCIpLmF0dHIoe1wiZGF0YS1hY3Rpb25cIjpcInRvZ2dsZVBpY2tlclwiLHRpdGxlOmQudG9vbHRpcHMuc2VsZWN0VGltZX0pLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKGQuaWNvbnMudGltZSkpKSksZC5zaG93Q2xlYXImJmIucHVzaChhKFwiPHRkPlwiKS5hcHBlbmQoYShcIjxhPlwiKS5hdHRyKHtcImRhdGEtYWN0aW9uXCI6XCJjbGVhclwiLHRpdGxlOmQudG9vbHRpcHMuY2xlYXJ9KS5hcHBlbmQoYShcIjxzcGFuPlwiKS5hZGRDbGFzcyhkLmljb25zLmNsZWFyKSkpKSxkLnNob3dDbG9zZSYmYi5wdXNoKGEoXCI8dGQ+XCIpLmFwcGVuZChhKFwiPGE+XCIpLmF0dHIoe1wiZGF0YS1hY3Rpb25cIjpcImNsb3NlXCIsdGl0bGU6ZC50b29sdGlwcy5jbG9zZX0pLmFwcGVuZChhKFwiPHNwYW4+XCIpLmFkZENsYXNzKGQuaWNvbnMuY2xvc2UpKSkpLGEoXCI8dGFibGU+XCIpLmFkZENsYXNzKFwidGFibGUtY29uZGVuc2VkXCIpLmFwcGVuZChhKFwiPHRib2R5PlwiKS5hcHBlbmQoYShcIjx0cj5cIikuYXBwZW5kKGIpKSl9LEY9ZnVuY3Rpb24oKXt2YXIgYj1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IGRyb3Bkb3duLW1lbnVcIiksYz1hKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJkYXRlcGlja2VyXCIpLmFwcGVuZChCKCkpLGU9YShcIjxkaXY+XCIpLmFkZENsYXNzKFwidGltZXBpY2tlclwiKS5hcHBlbmQoRCgpKSxmPWEoXCI8dWw+XCIpLmFkZENsYXNzKFwibGlzdC11bnN0eWxlZFwiKSxnPWEoXCI8bGk+XCIpLmFkZENsYXNzKFwicGlja2VyLXN3aXRjaFwiKyhkLmNvbGxhcHNlP1wiIGFjY29yZGlvbi10b2dnbGVcIjpcIlwiKSkuYXBwZW5kKEUoKSk7cmV0dXJuIGQuaW5saW5lJiZiLnJlbW92ZUNsYXNzKFwiZHJvcGRvd24tbWVudVwiKSxoJiZiLmFkZENsYXNzKFwidXNldHdlbnR5Zm91clwiKSx5KFwic1wiKSYmIWgmJmIuYWRkQ2xhc3MoXCJ3aWRlclwiKSxkLnNpZGVCeVNpZGUmJkEoKSYmeigpPyhiLmFkZENsYXNzKFwidGltZXBpY2tlci1zYnNcIiksXCJ0b3BcIj09PWQudG9vbGJhclBsYWNlbWVudCYmYi5hcHBlbmQoZyksYi5hcHBlbmQoYShcIjxkaXY+XCIpLmFkZENsYXNzKFwicm93XCIpLmFwcGVuZChjLmFkZENsYXNzKFwiY29sLW1kLTZcIikpLmFwcGVuZChlLmFkZENsYXNzKFwiY29sLW1kLTZcIikpKSxcImJvdHRvbVwiPT09ZC50b29sYmFyUGxhY2VtZW50JiZiLmFwcGVuZChnKSxiKTooXCJ0b3BcIj09PWQudG9vbGJhclBsYWNlbWVudCYmZi5hcHBlbmQoZyksQSgpJiZmLmFwcGVuZChhKFwiPGxpPlwiKS5hZGRDbGFzcyhkLmNvbGxhcHNlJiZ6KCk/XCJjb2xsYXBzZSBpblwiOlwiXCIpLmFwcGVuZChjKSksXCJkZWZhdWx0XCI9PT1kLnRvb2xiYXJQbGFjZW1lbnQmJmYuYXBwZW5kKGcpLHooKSYmZi5hcHBlbmQoYShcIjxsaT5cIikuYWRkQ2xhc3MoZC5jb2xsYXBzZSYmQSgpP1wiY29sbGFwc2VcIjpcIlwiKS5hcHBlbmQoZSkpLFwiYm90dG9tXCI9PT1kLnRvb2xiYXJQbGFjZW1lbnQmJmYuYXBwZW5kKGcpLGIuYXBwZW5kKGYpKX0sRz1mdW5jdGlvbigpe3ZhciBiLGU9e307cmV0dXJuIGI9Yy5pcyhcImlucHV0XCIpfHxkLmlubGluZT9jLmRhdGEoKTpjLmZpbmQoXCJpbnB1dFwiKS5kYXRhKCksYi5kYXRlT3B0aW9ucyYmYi5kYXRlT3B0aW9ucyBpbnN0YW5jZW9mIE9iamVjdCYmKGU9YS5leHRlbmQoITAsZSxiLmRhdGVPcHRpb25zKSksYS5lYWNoKGQsZnVuY3Rpb24oYSl7dmFyIGM9XCJkYXRlXCIrYS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpO3ZvaWQgMCE9PWJbY10mJihlW2FdPWJbY10pfSksZX0sSD1mdW5jdGlvbigpe3ZhciBiLGU9KG58fGMpLnBvc2l0aW9uKCksZj0obnx8Yykub2Zmc2V0KCksZz1kLndpZGdldFBvc2l0aW9uaW5nLnZlcnRpY2FsLGg9ZC53aWRnZXRQb3NpdGlvbmluZy5ob3Jpem9udGFsO2lmKGQud2lkZ2V0UGFyZW50KWI9ZC53aWRnZXRQYXJlbnQuYXBwZW5kKG8pO2Vsc2UgaWYoYy5pcyhcImlucHV0XCIpKWI9Yy5hZnRlcihvKS5wYXJlbnQoKTtlbHNle2lmKGQuaW5saW5lKXJldHVybiB2b2lkKGI9Yy5hcHBlbmQobykpO2I9YyxjLmNoaWxkcmVuKCkuZmlyc3QoKS5hZnRlcihvKX1pZihcImF1dG9cIj09PWcmJihnPWYudG9wKzEuNSpvLmhlaWdodCgpPj1hKHdpbmRvdykuaGVpZ2h0KCkrYSh3aW5kb3cpLnNjcm9sbFRvcCgpJiZvLmhlaWdodCgpK2Mub3V0ZXJIZWlnaHQoKTxmLnRvcD9cInRvcFwiOlwiYm90dG9tXCIpLFwiYXV0b1wiPT09aCYmKGg9Yi53aWR0aCgpPGYubGVmdCtvLm91dGVyV2lkdGgoKS8yJiZmLmxlZnQrby5vdXRlcldpZHRoKCk+YSh3aW5kb3cpLndpZHRoKCk/XCJyaWdodFwiOlwibGVmdFwiKSxcInRvcFwiPT09Zz9vLmFkZENsYXNzKFwidG9wXCIpLnJlbW92ZUNsYXNzKFwiYm90dG9tXCIpOm8uYWRkQ2xhc3MoXCJib3R0b21cIikucmVtb3ZlQ2xhc3MoXCJ0b3BcIiksXCJyaWdodFwiPT09aD9vLmFkZENsYXNzKFwicHVsbC1yaWdodFwiKTpvLnJlbW92ZUNsYXNzKFwicHVsbC1yaWdodFwiKSxcInJlbGF0aXZlXCIhPT1iLmNzcyhcInBvc2l0aW9uXCIpJiYoYj1iLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cInJlbGF0aXZlXCI9PT1hKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIpfSkuZmlyc3QoKSksMD09PWIubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcImRhdGV0aW1lcGlja2VyIGNvbXBvbmVudCBzaG91bGQgYmUgcGxhY2VkIHdpdGhpbiBhIHJlbGF0aXZlIHBvc2l0aW9uZWQgY29udGFpbmVyXCIpO28uY3NzKHt0b3A6XCJ0b3BcIj09PWc/XCJhdXRvXCI6ZS50b3ArYy5vdXRlckhlaWdodCgpLGJvdHRvbTpcInRvcFwiPT09Zz9lLnRvcCtjLm91dGVySGVpZ2h0KCk6XCJhdXRvXCIsbGVmdDpcImxlZnRcIj09PWg/Yj09PWM/MDplLmxlZnQ6XCJhdXRvXCIscmlnaHQ6XCJsZWZ0XCI9PT1oP1wiYXV0b1wiOmIub3V0ZXJXaWR0aCgpLWMub3V0ZXJXaWR0aCgpLShiPT09Yz8wOmUubGVmdCl9KX0sST1mdW5jdGlvbihhKXtcImRwLmNoYW5nZVwiPT09YS50eXBlJiYoYS5kYXRlJiZhLmRhdGUuaXNTYW1lKGEub2xkRGF0ZSl8fCFhLmRhdGUmJiFhLm9sZERhdGUpfHxjLnRyaWdnZXIoYSl9LEo9ZnVuY3Rpb24oYSl7XCJ5XCI9PT1hJiYoYT1cIllZWVlcIiksSSh7dHlwZTpcImRwLnVwZGF0ZVwiLGNoYW5nZTphLHZpZXdEYXRlOmYuY2xvbmUoKX0pfSxLPWZ1bmN0aW9uKGEpe28mJihhJiYoaz1NYXRoLm1heChwLE1hdGgubWluKDMsaythKSkpLG8uZmluZChcIi5kYXRlcGlja2VyID4gZGl2XCIpLmhpZGUoKS5maWx0ZXIoXCIuZGF0ZXBpY2tlci1cIitxW2tdLmNsc05hbWUpLnNob3coKSl9LEw9ZnVuY3Rpb24oKXt2YXIgYj1hKFwiPHRyPlwiKSxjPWYuY2xvbmUoKS5zdGFydE9mKFwid1wiKS5zdGFydE9mKFwiZFwiKTtmb3IoZC5jYWxlbmRhcldlZWtzPT09ITAmJmIuYXBwZW5kKGEoXCI8dGg+XCIpLmFkZENsYXNzKFwiY3dcIikudGV4dChcIiNcIikpO2MuaXNCZWZvcmUoZi5jbG9uZSgpLmVuZE9mKFwid1wiKSk7KWIuYXBwZW5kKGEoXCI8dGg+XCIpLmFkZENsYXNzKFwiZG93XCIpLnRleHQoYy5mb3JtYXQoXCJkZFwiKSkpLGMuYWRkKDEsXCJkXCIpO28uZmluZChcIi5kYXRlcGlja2VyLWRheXMgdGhlYWRcIikuYXBwZW5kKGIpfSxNPWZ1bmN0aW9uKGEpe3JldHVybiBkLmRpc2FibGVkRGF0ZXNbYS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpXT09PSEwfSxOPWZ1bmN0aW9uKGEpe3JldHVybiBkLmVuYWJsZWREYXRlc1thLmZvcm1hdChcIllZWVktTU0tRERcIildPT09ITB9LE89ZnVuY3Rpb24oYSl7cmV0dXJuIGQuZGlzYWJsZWRIb3Vyc1thLmZvcm1hdChcIkhcIildPT09ITB9LFA9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuZW5hYmxlZEhvdXJzW2EuZm9ybWF0KFwiSFwiKV09PT0hMH0sUT1mdW5jdGlvbihiLGMpe2lmKCFiLmlzVmFsaWQoKSlyZXR1cm4hMTtpZihkLmRpc2FibGVkRGF0ZXMmJlwiZFwiPT09YyYmTShiKSlyZXR1cm4hMTtpZihkLmVuYWJsZWREYXRlcyYmXCJkXCI9PT1jJiYhTihiKSlyZXR1cm4hMTtpZihkLm1pbkRhdGUmJmIuaXNCZWZvcmUoZC5taW5EYXRlLGMpKXJldHVybiExO2lmKGQubWF4RGF0ZSYmYi5pc0FmdGVyKGQubWF4RGF0ZSxjKSlyZXR1cm4hMTtpZihkLmRheXNPZldlZWtEaXNhYmxlZCYmXCJkXCI9PT1jJiYtMSE9PWQuZGF5c09mV2Vla0Rpc2FibGVkLmluZGV4T2YoYi5kYXkoKSkpcmV0dXJuITE7aWYoZC5kaXNhYmxlZEhvdXJzJiYoXCJoXCI9PT1jfHxcIm1cIj09PWN8fFwic1wiPT09YykmJk8oYikpcmV0dXJuITE7aWYoZC5lbmFibGVkSG91cnMmJihcImhcIj09PWN8fFwibVwiPT09Y3x8XCJzXCI9PT1jKSYmIVAoYikpcmV0dXJuITE7aWYoZC5kaXNhYmxlZFRpbWVJbnRlcnZhbHMmJihcImhcIj09PWN8fFwibVwiPT09Y3x8XCJzXCI9PT1jKSl7dmFyIGU9ITE7aWYoYS5lYWNoKGQuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzLGZ1bmN0aW9uKCl7cmV0dXJuIGIuaXNCZXR3ZWVuKHRoaXNbMF0sdGhpc1sxXSk/KGU9ITAsITEpOnZvaWQgMH0pLGUpcmV0dXJuITF9cmV0dXJuITB9LFI9ZnVuY3Rpb24oKXtmb3IodmFyIGI9W10sYz1mLmNsb25lKCkuc3RhcnRPZihcInlcIikuc3RhcnRPZihcImRcIik7Yy5pc1NhbWUoZixcInlcIik7KWIucHVzaChhKFwiPHNwYW4+XCIpLmF0dHIoXCJkYXRhLWFjdGlvblwiLFwic2VsZWN0TW9udGhcIikuYWRkQ2xhc3MoXCJtb250aFwiKS50ZXh0KGMuZm9ybWF0KFwiTU1NXCIpKSksYy5hZGQoMSxcIk1cIik7by5maW5kKFwiLmRhdGVwaWNrZXItbW9udGhzIHRkXCIpLmVtcHR5KCkuYXBwZW5kKGIpfSxTPWZ1bmN0aW9uKCl7dmFyIGI9by5maW5kKFwiLmRhdGVwaWNrZXItbW9udGhzXCIpLGM9Yi5maW5kKFwidGhcIiksZz1iLmZpbmQoXCJ0Ym9keVwiKS5maW5kKFwic3BhblwiKTtjLmVxKDApLmZpbmQoXCJzcGFuXCIpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMucHJldlllYXIpLGMuZXEoMSkuYXR0cihcInRpdGxlXCIsZC50b29sdGlwcy5zZWxlY3RZZWFyKSxjLmVxKDIpLmZpbmQoXCJzcGFuXCIpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMubmV4dFllYXIpLGIuZmluZChcIi5kaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpLFEoZi5jbG9uZSgpLnN1YnRyYWN0KDEsXCJ5XCIpLFwieVwiKXx8Yy5lcSgwKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLGMuZXEoMSkudGV4dChmLnllYXIoKSksUShmLmNsb25lKCkuYWRkKDEsXCJ5XCIpLFwieVwiKXx8Yy5lcSgyKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLGcucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksZS5pc1NhbWUoZixcInlcIikmJiFtJiZnLmVxKGUubW9udGgoKSkuYWRkQ2xhc3MoXCJhY3RpdmVcIiksZy5lYWNoKGZ1bmN0aW9uKGIpe1EoZi5jbG9uZSgpLm1vbnRoKGIpLFwiTVwiKXx8YSh0aGlzKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpfSl9LFQ9ZnVuY3Rpb24oKXt2YXIgYT1vLmZpbmQoXCIuZGF0ZXBpY2tlci15ZWFyc1wiKSxiPWEuZmluZChcInRoXCIpLGM9Zi5jbG9uZSgpLnN1YnRyYWN0KDUsXCJ5XCIpLGc9Zi5jbG9uZSgpLmFkZCg2LFwieVwiKSxoPVwiXCI7Zm9yKGIuZXEoMCkuZmluZChcInNwYW5cIikuYXR0cihcInRpdGxlXCIsZC50b29sdGlwcy5wcmV2RGVjYWRlKSxiLmVxKDEpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMuc2VsZWN0RGVjYWRlKSxiLmVxKDIpLmZpbmQoXCJzcGFuXCIpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMubmV4dERlY2FkZSksYS5maW5kKFwiLmRpc2FibGVkXCIpLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksZC5taW5EYXRlJiZkLm1pbkRhdGUuaXNBZnRlcihjLFwieVwiKSYmYi5lcSgwKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLGIuZXEoMSkudGV4dChjLnllYXIoKStcIi1cIitnLnllYXIoKSksZC5tYXhEYXRlJiZkLm1heERhdGUuaXNCZWZvcmUoZyxcInlcIikmJmIuZXEoMikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTshYy5pc0FmdGVyKGcsXCJ5XCIpOyloKz0nPHNwYW4gZGF0YS1hY3Rpb249XCJzZWxlY3RZZWFyXCIgY2xhc3M9XCJ5ZWFyJysoYy5pc1NhbWUoZSxcInlcIikmJiFtP1wiIGFjdGl2ZVwiOlwiXCIpKyhRKGMsXCJ5XCIpP1wiXCI6XCIgZGlzYWJsZWRcIikrJ1wiPicrYy55ZWFyKCkrXCI8L3NwYW4+XCIsYy5hZGQoMSxcInlcIik7YS5maW5kKFwidGRcIikuaHRtbChoKX0sVT1mdW5jdGlvbigpe3ZhciBhPW8uZmluZChcIi5kYXRlcGlja2VyLWRlY2FkZXNcIiksYz1hLmZpbmQoXCJ0aFwiKSxnPWIoe3k6Zi55ZWFyKCktZi55ZWFyKCklMTAwLTF9KSxoPWcuY2xvbmUoKS5hZGQoMTAwLFwieVwiKSxpPWcuY2xvbmUoKSxqPVwiXCI7Zm9yKGMuZXEoMCkuZmluZChcInNwYW5cIikuYXR0cihcInRpdGxlXCIsZC50b29sdGlwcy5wcmV2Q2VudHVyeSksYy5lcSgyKS5maW5kKFwic3BhblwiKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLm5leHRDZW50dXJ5KSxhLmZpbmQoXCIuZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSwoZy5pc1NhbWUoYih7eToxOTAwfSkpfHxkLm1pbkRhdGUmJmQubWluRGF0ZS5pc0FmdGVyKGcsXCJ5XCIpKSYmYy5lcSgwKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLGMuZXEoMSkudGV4dChnLnllYXIoKStcIi1cIitoLnllYXIoKSksKGcuaXNTYW1lKGIoe3k6MmUzfSkpfHxkLm1heERhdGUmJmQubWF4RGF0ZS5pc0JlZm9yZShoLFwieVwiKSkmJmMuZXEoMikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTshZy5pc0FmdGVyKGgsXCJ5XCIpOylqKz0nPHNwYW4gZGF0YS1hY3Rpb249XCJzZWxlY3REZWNhZGVcIiBjbGFzcz1cImRlY2FkZScrKGcuaXNTYW1lKGUsXCJ5XCIpP1wiIGFjdGl2ZVwiOlwiXCIpKyhRKGcsXCJ5XCIpP1wiXCI6XCIgZGlzYWJsZWRcIikrJ1wiIGRhdGEtc2VsZWN0aW9uPVwiJysoZy55ZWFyKCkrNikrJ1wiPicrKGcueWVhcigpKzEpK1wiIC0gXCIrKGcueWVhcigpKzEyKStcIjwvc3Bhbj5cIixnLmFkZCgxMixcInlcIik7ais9XCI8c3Bhbj48L3NwYW4+PHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj5cIixhLmZpbmQoXCJ0ZFwiKS5odG1sKGopLGMuZXEoMSkudGV4dChpLnllYXIoKSsxK1wiLVwiK2cueWVhcigpKX0sVj1mdW5jdGlvbigpe3ZhciBiLGMsZyxoLGk9by5maW5kKFwiLmRhdGVwaWNrZXItZGF5c1wiKSxqPWkuZmluZChcInRoXCIpLGs9W107aWYoQSgpKXtmb3Ioai5lcSgwKS5maW5kKFwic3BhblwiKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLnByZXZNb250aCksai5lcSgxKS5hdHRyKFwidGl0bGVcIixkLnRvb2x0aXBzLnNlbGVjdE1vbnRoKSxqLmVxKDIpLmZpbmQoXCJzcGFuXCIpLmF0dHIoXCJ0aXRsZVwiLGQudG9vbHRpcHMubmV4dE1vbnRoKSxpLmZpbmQoXCIuZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSxqLmVxKDEpLnRleHQoZi5mb3JtYXQoZC5kYXlWaWV3SGVhZGVyRm9ybWF0KSksUShmLmNsb25lKCkuc3VidHJhY3QoMSxcIk1cIiksXCJNXCIpfHxqLmVxKDApLmFkZENsYXNzKFwiZGlzYWJsZWRcIiksUShmLmNsb25lKCkuYWRkKDEsXCJNXCIpLFwiTVwiKXx8ai5lcSgyKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpLGI9Zi5jbG9uZSgpLnN0YXJ0T2YoXCJNXCIpLnN0YXJ0T2YoXCJ3XCIpLnN0YXJ0T2YoXCJkXCIpLGg9MDs0Mj5oO2grKykwPT09Yi53ZWVrZGF5KCkmJihjPWEoXCI8dHI+XCIpLGQuY2FsZW5kYXJXZWVrcyYmYy5hcHBlbmQoJzx0ZCBjbGFzcz1cImN3XCI+JytiLndlZWsoKStcIjwvdGQ+XCIpLGsucHVzaChjKSksZz1cIlwiLGIuaXNCZWZvcmUoZixcIk1cIikmJihnKz1cIiBvbGRcIiksYi5pc0FmdGVyKGYsXCJNXCIpJiYoZys9XCIgbmV3XCIpLGIuaXNTYW1lKGUsXCJkXCIpJiYhbSYmKGcrPVwiIGFjdGl2ZVwiKSxRKGIsXCJkXCIpfHwoZys9XCIgZGlzYWJsZWRcIiksYi5pc1NhbWUoeCgpLFwiZFwiKSYmKGcrPVwiIHRvZGF5XCIpLCgwPT09Yi5kYXkoKXx8Nj09PWIuZGF5KCkpJiYoZys9XCIgd2Vla2VuZFwiKSxjLmFwcGVuZCgnPHRkIGRhdGEtYWN0aW9uPVwic2VsZWN0RGF5XCIgZGF0YS1kYXk9XCInK2IuZm9ybWF0KFwiTFwiKSsnXCIgY2xhc3M9XCJkYXknK2crJ1wiPicrYi5kYXRlKCkrXCI8L3RkPlwiKSxiLmFkZCgxLFwiZFwiKTtpLmZpbmQoXCJ0Ym9keVwiKS5lbXB0eSgpLmFwcGVuZChrKSxTKCksVCgpLFUoKX19LFc9ZnVuY3Rpb24oKXt2YXIgYj1vLmZpbmQoXCIudGltZXBpY2tlci1ob3VycyB0YWJsZVwiKSxjPWYuY2xvbmUoKS5zdGFydE9mKFwiZFwiKSxkPVtdLGU9YShcIjx0cj5cIik7Zm9yKGYuaG91cigpPjExJiYhaCYmYy5ob3VyKDEyKTtjLmlzU2FtZShmLFwiZFwiKSYmKGh8fGYuaG91cigpPDEyJiZjLmhvdXIoKTwxMnx8Zi5ob3VyKCk+MTEpOyljLmhvdXIoKSU0PT09MCYmKGU9YShcIjx0cj5cIiksZC5wdXNoKGUpKSxlLmFwcGVuZCgnPHRkIGRhdGEtYWN0aW9uPVwic2VsZWN0SG91clwiIGNsYXNzPVwiaG91cicrKFEoYyxcImhcIik/XCJcIjpcIiBkaXNhYmxlZFwiKSsnXCI+JytjLmZvcm1hdChoP1wiSEhcIjpcImhoXCIpK1wiPC90ZD5cIiksYy5hZGQoMSxcImhcIik7Yi5lbXB0eSgpLmFwcGVuZChkKX0sWD1mdW5jdGlvbigpe2Zvcih2YXIgYj1vLmZpbmQoXCIudGltZXBpY2tlci1taW51dGVzIHRhYmxlXCIpLGM9Zi5jbG9uZSgpLnN0YXJ0T2YoXCJoXCIpLGU9W10sZz1hKFwiPHRyPlwiKSxoPTE9PT1kLnN0ZXBwaW5nPzU6ZC5zdGVwcGluZztmLmlzU2FtZShjLFwiaFwiKTspYy5taW51dGUoKSUoNCpoKT09PTAmJihnPWEoXCI8dHI+XCIpLGUucHVzaChnKSksZy5hcHBlbmQoJzx0ZCBkYXRhLWFjdGlvbj1cInNlbGVjdE1pbnV0ZVwiIGNsYXNzPVwibWludXRlJysoUShjLFwibVwiKT9cIlwiOlwiIGRpc2FibGVkXCIpKydcIj4nK2MuZm9ybWF0KFwibW1cIikrXCI8L3RkPlwiKSxjLmFkZChoLFwibVwiKTtiLmVtcHR5KCkuYXBwZW5kKGUpfSxZPWZ1bmN0aW9uKCl7Zm9yKHZhciBiPW8uZmluZChcIi50aW1lcGlja2VyLXNlY29uZHMgdGFibGVcIiksYz1mLmNsb25lKCkuc3RhcnRPZihcIm1cIiksZD1bXSxlPWEoXCI8dHI+XCIpO2YuaXNTYW1lKGMsXCJtXCIpOyljLnNlY29uZCgpJTIwPT09MCYmKGU9YShcIjx0cj5cIiksZC5wdXNoKGUpKSxlLmFwcGVuZCgnPHRkIGRhdGEtYWN0aW9uPVwic2VsZWN0U2Vjb25kXCIgY2xhc3M9XCJzZWNvbmQnKyhRKGMsXCJzXCIpP1wiXCI6XCIgZGlzYWJsZWRcIikrJ1wiPicrYy5mb3JtYXQoXCJzc1wiKStcIjwvdGQ+XCIpLGMuYWRkKDUsXCJzXCIpO2IuZW1wdHkoKS5hcHBlbmQoZCl9LFo9ZnVuY3Rpb24oKXt2YXIgYSxiLGM9by5maW5kKFwiLnRpbWVwaWNrZXIgc3BhbltkYXRhLXRpbWUtY29tcG9uZW50XVwiKTtofHwoYT1vLmZpbmQoXCIudGltZXBpY2tlciBbZGF0YS1hY3Rpb249dG9nZ2xlUGVyaW9kXVwiKSxiPWUuY2xvbmUoKS5hZGQoZS5ob3VycygpPj0xMj8tMTI6MTIsXCJoXCIpLGEudGV4dChlLmZvcm1hdChcIkFcIikpLFEoYixcImhcIik/YS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpOmEuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSksYy5maWx0ZXIoXCJbZGF0YS10aW1lLWNvbXBvbmVudD1ob3Vyc11cIikudGV4dChlLmZvcm1hdChoP1wiSEhcIjpcImhoXCIpKSxjLmZpbHRlcihcIltkYXRhLXRpbWUtY29tcG9uZW50PW1pbnV0ZXNdXCIpLnRleHQoZS5mb3JtYXQoXCJtbVwiKSksYy5maWx0ZXIoXCJbZGF0YS10aW1lLWNvbXBvbmVudD1zZWNvbmRzXVwiKS50ZXh0KGUuZm9ybWF0KFwic3NcIikpLFcoKSxYKCksWSgpfSwkPWZ1bmN0aW9uKCl7byYmKFYoKSxaKCkpfSxfPWZ1bmN0aW9uKGEpe3ZhciBiPW0/bnVsbDplO3JldHVybiBhPyhhPWEuY2xvbmUoKS5sb2NhbGUoZC5sb2NhbGUpLDEhPT1kLnN0ZXBwaW5nJiZhLm1pbnV0ZXMoTWF0aC5yb3VuZChhLm1pbnV0ZXMoKS9kLnN0ZXBwaW5nKSpkLnN0ZXBwaW5nJTYwKS5zZWNvbmRzKDApLHZvaWQoUShhKT8oZT1hLGY9ZS5jbG9uZSgpLGcudmFsKGUuZm9ybWF0KGkpKSxjLmRhdGEoXCJkYXRlXCIsZS5mb3JtYXQoaSkpLG09ITEsJCgpLEkoe3R5cGU6XCJkcC5jaGFuZ2VcIixkYXRlOmUuY2xvbmUoKSxvbGREYXRlOmJ9KSk6KGQua2VlcEludmFsaWR8fGcudmFsKG0/XCJcIjplLmZvcm1hdChpKSksSSh7dHlwZTpcImRwLmVycm9yXCIsZGF0ZTphfSkpKSk6KG09ITAsZy52YWwoXCJcIiksYy5kYXRhKFwiZGF0ZVwiLFwiXCIpLEkoe3R5cGU6XCJkcC5jaGFuZ2VcIixkYXRlOiExLG9sZERhdGU6Yn0pLHZvaWQgJCgpKX0sYWE9ZnVuY3Rpb24oKXt2YXIgYj0hMTtyZXR1cm4gbz8oby5maW5kKFwiLmNvbGxhcHNlXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLmRhdGEoXCJjb2xsYXBzZVwiKTtyZXR1cm4gYyYmYy50cmFuc2l0aW9uaW5nPyhiPSEwLCExKTohMH0pLGI/bDoobiYmbi5oYXNDbGFzcyhcImJ0blwiKSYmbi50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSxvLmhpZGUoKSxhKHdpbmRvdykub2ZmKFwicmVzaXplXCIsSCksby5vZmYoXCJjbGlja1wiLFwiW2RhdGEtYWN0aW9uXVwiKSxvLm9mZihcIm1vdXNlZG93blwiLCExKSxvLnJlbW92ZSgpLG89ITEsSSh7dHlwZTpcImRwLmhpZGVcIixkYXRlOmUuY2xvbmUoKX0pLGcuYmx1cigpLGwpKTpsfSxiYT1mdW5jdGlvbigpe18obnVsbCl9LGNhPXtuZXh0OmZ1bmN0aW9uKCl7dmFyIGE9cVtrXS5uYXZGbmM7Zi5hZGQocVtrXS5uYXZTdGVwLGEpLFYoKSxKKGEpfSxwcmV2aW91czpmdW5jdGlvbigpe3ZhciBhPXFba10ubmF2Rm5jO2Yuc3VidHJhY3QocVtrXS5uYXZTdGVwLGEpLFYoKSxKKGEpfSxwaWNrZXJTd2l0Y2g6ZnVuY3Rpb24oKXtLKDEpfSxzZWxlY3RNb250aDpmdW5jdGlvbihiKXt2YXIgYz1hKGIudGFyZ2V0KS5jbG9zZXN0KFwidGJvZHlcIikuZmluZChcInNwYW5cIikuaW5kZXgoYShiLnRhcmdldCkpO2YubW9udGgoYyksaz09PXA/KF8oZS5jbG9uZSgpLnllYXIoZi55ZWFyKCkpLm1vbnRoKGYubW9udGgoKSkpLGQuaW5saW5lfHxhYSgpKTooSygtMSksVigpKSxKKFwiTVwiKX0sc2VsZWN0WWVhcjpmdW5jdGlvbihiKXt2YXIgYz1wYXJzZUludChhKGIudGFyZ2V0KS50ZXh0KCksMTApfHwwO2YueWVhcihjKSxrPT09cD8oXyhlLmNsb25lKCkueWVhcihmLnllYXIoKSkpLGQuaW5saW5lfHxhYSgpKTooSygtMSksVigpKSxKKFwiWVlZWVwiKX0sc2VsZWN0RGVjYWRlOmZ1bmN0aW9uKGIpe3ZhciBjPXBhcnNlSW50KGEoYi50YXJnZXQpLmRhdGEoXCJzZWxlY3Rpb25cIiksMTApfHwwO2YueWVhcihjKSxrPT09cD8oXyhlLmNsb25lKCkueWVhcihmLnllYXIoKSkpLGQuaW5saW5lfHxhYSgpKTooSygtMSksVigpKSxKKFwiWVlZWVwiKX0sc2VsZWN0RGF5OmZ1bmN0aW9uKGIpe3ZhciBjPWYuY2xvbmUoKTthKGIudGFyZ2V0KS5pcyhcIi5vbGRcIikmJmMuc3VidHJhY3QoMSxcIk1cIiksYShiLnRhcmdldCkuaXMoXCIubmV3XCIpJiZjLmFkZCgxLFwiTVwiKSxfKGMuZGF0ZShwYXJzZUludChhKGIudGFyZ2V0KS50ZXh0KCksMTApKSkseigpfHxkLmtlZXBPcGVufHxkLmlubGluZXx8YWEoKX0saW5jcmVtZW50SG91cnM6ZnVuY3Rpb24oKXt2YXIgYT1lLmNsb25lKCkuYWRkKDEsXCJoXCIpO1EoYSxcImhcIikmJl8oYSl9LGluY3JlbWVudE1pbnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT1lLmNsb25lKCkuYWRkKGQuc3RlcHBpbmcsXCJtXCIpO1EoYSxcIm1cIikmJl8oYSl9LGluY3JlbWVudFNlY29uZHM6ZnVuY3Rpb24oKXt2YXIgYT1lLmNsb25lKCkuYWRkKDEsXCJzXCIpO1EoYSxcInNcIikmJl8oYSl9LGRlY3JlbWVudEhvdXJzOmZ1bmN0aW9uKCl7dmFyIGE9ZS5jbG9uZSgpLnN1YnRyYWN0KDEsXCJoXCIpO1EoYSxcImhcIikmJl8oYSl9LGRlY3JlbWVudE1pbnV0ZXM6ZnVuY3Rpb24oKXt2YXIgYT1lLmNsb25lKCkuc3VidHJhY3QoZC5zdGVwcGluZyxcIm1cIik7UShhLFwibVwiKSYmXyhhKX0sZGVjcmVtZW50U2Vjb25kczpmdW5jdGlvbigpe3ZhciBhPWUuY2xvbmUoKS5zdWJ0cmFjdCgxLFwic1wiKTtRKGEsXCJzXCIpJiZfKGEpfSx0b2dnbGVQZXJpb2Q6ZnVuY3Rpb24oKXtfKGUuY2xvbmUoKS5hZGQoZS5ob3VycygpPj0xMj8tMTI6MTIsXCJoXCIpKX0sdG9nZ2xlUGlja2VyOmZ1bmN0aW9uKGIpe3ZhciBjLGU9YShiLnRhcmdldCksZj1lLmNsb3Nlc3QoXCJ1bFwiKSxnPWYuZmluZChcIi5pblwiKSxoPWYuZmluZChcIi5jb2xsYXBzZTpub3QoLmluKVwiKTtpZihnJiZnLmxlbmd0aCl7aWYoYz1nLmRhdGEoXCJjb2xsYXBzZVwiKSxjJiZjLnRyYW5zaXRpb25pbmcpcmV0dXJuO2cuY29sbGFwc2U/KGcuY29sbGFwc2UoXCJoaWRlXCIpLGguY29sbGFwc2UoXCJzaG93XCIpKTooZy5yZW1vdmVDbGFzcyhcImluXCIpLGguYWRkQ2xhc3MoXCJpblwiKSksZS5pcyhcInNwYW5cIik/ZS50b2dnbGVDbGFzcyhkLmljb25zLnRpbWUrXCIgXCIrZC5pY29ucy5kYXRlKTplLmZpbmQoXCJzcGFuXCIpLnRvZ2dsZUNsYXNzKGQuaWNvbnMudGltZStcIiBcIitkLmljb25zLmRhdGUpfX0sc2hvd1BpY2tlcjpmdW5jdGlvbigpe28uZmluZChcIi50aW1lcGlja2VyID4gZGl2Om5vdCgudGltZXBpY2tlci1waWNrZXIpXCIpLmhpZGUoKSxvLmZpbmQoXCIudGltZXBpY2tlciAudGltZXBpY2tlci1waWNrZXJcIikuc2hvdygpfSxzaG93SG91cnM6ZnVuY3Rpb24oKXtvLmZpbmQoXCIudGltZXBpY2tlciAudGltZXBpY2tlci1waWNrZXJcIikuaGlkZSgpLG8uZmluZChcIi50aW1lcGlja2VyIC50aW1lcGlja2VyLWhvdXJzXCIpLnNob3coKX0sc2hvd01pbnV0ZXM6ZnVuY3Rpb24oKXtvLmZpbmQoXCIudGltZXBpY2tlciAudGltZXBpY2tlci1waWNrZXJcIikuaGlkZSgpLG8uZmluZChcIi50aW1lcGlja2VyIC50aW1lcGlja2VyLW1pbnV0ZXNcIikuc2hvdygpfSxzaG93U2Vjb25kczpmdW5jdGlvbigpe28uZmluZChcIi50aW1lcGlja2VyIC50aW1lcGlja2VyLXBpY2tlclwiKS5oaWRlKCksby5maW5kKFwiLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItc2Vjb25kc1wiKS5zaG93KCl9LHNlbGVjdEhvdXI6ZnVuY3Rpb24oYil7dmFyIGM9cGFyc2VJbnQoYShiLnRhcmdldCkudGV4dCgpLDEwKTtofHwoZS5ob3VycygpPj0xMj8xMiE9PWMmJihjKz0xMik6MTI9PT1jJiYoYz0wKSksXyhlLmNsb25lKCkuaG91cnMoYykpLGNhLnNob3dQaWNrZXIuY2FsbChsKX0sc2VsZWN0TWludXRlOmZ1bmN0aW9uKGIpe18oZS5jbG9uZSgpLm1pbnV0ZXMocGFyc2VJbnQoYShiLnRhcmdldCkudGV4dCgpLDEwKSkpLGNhLnNob3dQaWNrZXIuY2FsbChsKX0sc2VsZWN0U2Vjb25kOmZ1bmN0aW9uKGIpe18oZS5jbG9uZSgpLnNlY29uZHMocGFyc2VJbnQoYShiLnRhcmdldCkudGV4dCgpLDEwKSkpLGNhLnNob3dQaWNrZXIuY2FsbChsKX0sY2xlYXI6YmEsdG9kYXk6ZnVuY3Rpb24oKXt2YXIgYT14KCk7UShhLFwiZFwiKSYmXyhhKX0sY2xvc2U6YWF9LGRhPWZ1bmN0aW9uKGIpe3JldHVybiBhKGIuY3VycmVudFRhcmdldCkuaXMoXCIuZGlzYWJsZWRcIik/ITE6KGNhW2EoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYWN0aW9uXCIpXS5hcHBseShsLGFyZ3VtZW50cyksITEpfSxlYT1mdW5jdGlvbigpe3ZhciBiLGM9e3llYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubW9udGgoMCkuZGF0ZSgxKS5ob3VycygwKS5zZWNvbmRzKDApLm1pbnV0ZXMoMCl9LG1vbnRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRhdGUoMSkuaG91cnMoMCkuc2Vjb25kcygwKS5taW51dGVzKDApfSxkYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaG91cnMoMCkuc2Vjb25kcygwKS5taW51dGVzKDApfSxob3VyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnNlY29uZHMoMCkubWludXRlcygwKX0sbWludXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnNlY29uZHMoMCl9fTtyZXR1cm4gZy5wcm9wKFwiZGlzYWJsZWRcIil8fCFkLmlnbm9yZVJlYWRvbmx5JiZnLnByb3AoXCJyZWFkb25seVwiKXx8bz9sOih2b2lkIDAhPT1nLnZhbCgpJiYwIT09Zy52YWwoKS50cmltKCkubGVuZ3RoP18oZ2EoZy52YWwoKS50cmltKCkpKTpkLnVzZUN1cnJlbnQmJm0mJihnLmlzKFwiaW5wdXRcIikmJjA9PT1nLnZhbCgpLnRyaW0oKS5sZW5ndGh8fGQuaW5saW5lKSYmKGI9eCgpLFwic3RyaW5nXCI9PXR5cGVvZiBkLnVzZUN1cnJlbnQmJihiPWNbZC51c2VDdXJyZW50XShiKSksXyhiKSksbz1GKCksTCgpLFIoKSxvLmZpbmQoXCIudGltZXBpY2tlci1ob3Vyc1wiKS5oaWRlKCksby5maW5kKFwiLnRpbWVwaWNrZXItbWludXRlc1wiKS5oaWRlKCksby5maW5kKFwiLnRpbWVwaWNrZXItc2Vjb25kc1wiKS5oaWRlKCksJCgpLEsoKSxhKHdpbmRvdykub24oXCJyZXNpemVcIixIKSxvLm9uKFwiY2xpY2tcIixcIltkYXRhLWFjdGlvbl1cIixkYSksby5vbihcIm1vdXNlZG93blwiLCExKSxuJiZuLmhhc0NsYXNzKFwiYnRuXCIpJiZuLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLG8uc2hvdygpLEgoKSxkLmZvY3VzT25TaG93JiYhZy5pcyhcIjpmb2N1c1wiKSYmZy5mb2N1cygpLEkoe3R5cGU6XCJkcC5zaG93XCJ9KSxsKX0sZmE9ZnVuY3Rpb24oKXtyZXR1cm4gbz9hYSgpOmVhKCl9LGdhPWZ1bmN0aW9uKGEpe3JldHVybiBhPXZvaWQgMD09PWQucGFyc2VJbnB1dERhdGU/Yi5pc01vbWVudChhKXx8YSBpbnN0YW5jZW9mIERhdGU/YihhKTp4KGEpOmQucGFyc2VJbnB1dERhdGUoYSksYS5sb2NhbGUoZC5sb2NhbGUpLGF9LGhhPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmLGc9bnVsbCxoPVtdLGk9e30saj1hLndoaWNoLGs9XCJwXCI7d1tqXT1rO2ZvcihiIGluIHcpdy5oYXNPd25Qcm9wZXJ0eShiKSYmd1tiXT09PWsmJihoLnB1c2goYikscGFyc2VJbnQoYiwxMCkhPT1qJiYoaVtiXT0hMCkpO2ZvcihiIGluIGQua2V5QmluZHMpaWYoZC5rZXlCaW5kcy5oYXNPd25Qcm9wZXJ0eShiKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZC5rZXlCaW5kc1tiXSYmKGU9Yi5zcGxpdChcIiBcIiksZS5sZW5ndGg9PT1oLmxlbmd0aCYmdltqXT09PWVbZS5sZW5ndGgtMV0pKXtmb3IoZj0hMCxjPWUubGVuZ3RoLTI7Yz49MDtjLS0paWYoISh2W2VbY11daW4gaSkpe2Y9ITE7YnJlYWt9aWYoZil7Zz1kLmtleUJpbmRzW2JdO2JyZWFrfX1nJiYoZy5jYWxsKGwsbyksYS5zdG9wUHJvcGFnYXRpb24oKSxhLnByZXZlbnREZWZhdWx0KCkpfSxpYT1mdW5jdGlvbihhKXt3W2Eud2hpY2hdPVwiclwiLGEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpfSxqYT1mdW5jdGlvbihiKXt2YXIgYz1hKGIudGFyZ2V0KS52YWwoKS50cmltKCksZD1jP2dhKGMpOm51bGw7cmV0dXJuIF8oZCksYi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwhMX0sa2E9ZnVuY3Rpb24oKXtnLm9uKHtjaGFuZ2U6amEsYmx1cjpkLmRlYnVnP1wiXCI6YWEsa2V5ZG93bjpoYSxrZXl1cDppYSxmb2N1czpkLmFsbG93SW5wdXRUb2dnbGU/ZWE6XCJcIn0pLGMuaXMoXCJpbnB1dFwiKT9nLm9uKHtmb2N1czplYX0pOm4mJihuLm9uKFwiY2xpY2tcIixmYSksbi5vbihcIm1vdXNlZG93blwiLCExKSl9LGxhPWZ1bmN0aW9uKCl7Zy5vZmYoe2NoYW5nZTpqYSxibHVyOmJsdXIsa2V5ZG93bjpoYSxrZXl1cDppYSxmb2N1czpkLmFsbG93SW5wdXRUb2dnbGU/YWE6XCJcIn0pLGMuaXMoXCJpbnB1dFwiKT9nLm9mZih7Zm9jdXM6ZWF9KTpuJiYobi5vZmYoXCJjbGlja1wiLGZhKSxuLm9mZihcIm1vdXNlZG93blwiLCExKSl9LG1hPWZ1bmN0aW9uKGIpe3ZhciBjPXt9O3JldHVybiBhLmVhY2goYixmdW5jdGlvbigpe3ZhciBhPWdhKHRoaXMpO2EuaXNWYWxpZCgpJiYoY1thLmZvcm1hdChcIllZWVktTU0tRERcIildPSEwKX0pLE9iamVjdC5rZXlzKGMpLmxlbmd0aD9jOiExfSxuYT1mdW5jdGlvbihiKXt2YXIgYz17fTtyZXR1cm4gYS5lYWNoKGIsZnVuY3Rpb24oKXtjW3RoaXNdPSEwfSksT2JqZWN0LmtleXMoYykubGVuZ3RoP2M6ITF9LG9hPWZ1bmN0aW9uKCl7dmFyIGE9ZC5mb3JtYXR8fFwiTCBMVFwiO2k9YS5yZXBsYWNlKC8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhMVFN8TFR8TEw/TD9MP3xsezEsNH0pL2csZnVuY3Rpb24oYSl7dmFyIGI9ZS5sb2NhbGVEYXRhKCkubG9uZ0RhdGVGb3JtYXQoYSl8fGE7cmV0dXJuIGIucmVwbGFjZSgvKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nLGZ1bmN0aW9uKGEpe3JldHVybiBlLmxvY2FsZURhdGEoKS5sb25nRGF0ZUZvcm1hdChhKXx8YX0pfSksaj1kLmV4dHJhRm9ybWF0cz9kLmV4dHJhRm9ybWF0cy5zbGljZSgpOltdLGouaW5kZXhPZihhKTwwJiZqLmluZGV4T2YoaSk8MCYmai5wdXNoKGkpLGg9aS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJhXCIpPDEmJmkucmVwbGFjZSgvXFxbLio/XFxdL2csXCJcIikuaW5kZXhPZihcImhcIik8MSx5KFwieVwiKSYmKHA9MikseShcIk1cIikmJihwPTEpLHkoXCJkXCIpJiYocD0wKSxrPU1hdGgubWF4KHAsayksbXx8XyhlKX07aWYobC5kZXN0cm95PWZ1bmN0aW9uKCl7YWEoKSxsYSgpLGMucmVtb3ZlRGF0YShcIkRhdGVUaW1lUGlja2VyXCIpLGMucmVtb3ZlRGF0YShcImRhdGVcIil9LGwudG9nZ2xlPWZhLGwuc2hvdz1lYSxsLmhpZGU9YWEsbC5kaXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIGFhKCksbiYmbi5oYXNDbGFzcyhcImJ0blwiKSYmbi5hZGRDbGFzcyhcImRpc2FibGVkXCIpLGcucHJvcChcImRpc2FibGVkXCIsITApLGx9LGwuZW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIG4mJm4uaGFzQ2xhc3MoXCJidG5cIikmJm4ucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSxnLnByb3AoXCJkaXNhYmxlZFwiLCExKSxsfSxsLmlnbm9yZVJlYWRvbmx5PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmlnbm9yZVJlYWRvbmx5O2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiaWdub3JlUmVhZG9ubHkgKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmlnbm9yZVJlYWRvbmx5PWEsbH0sbC5vcHRpb25zPWZ1bmN0aW9uKGIpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBhLmV4dGVuZCghMCx7fSxkKTtpZighKGIgaW5zdGFuY2VvZiBPYmplY3QpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJvcHRpb25zKCkgb3B0aW9ucyBwYXJhbWV0ZXIgc2hvdWxkIGJlIGFuIG9iamVjdFwiKTtyZXR1cm4gYS5leHRlbmQoITAsZCxiKSxhLmVhY2goZCxmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PWxbYV0pdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9wdGlvbiBcIithK1wiIGlzIG5vdCByZWNvZ25pemVkIVwiKTtsW2FdKGIpfSksbH0sbC5kYXRlPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBtP251bGw6ZS5jbG9uZSgpO2lmKCEobnVsbD09PWF8fFwic3RyaW5nXCI9PXR5cGVvZiBhfHxiLmlzTW9tZW50KGEpfHxhIGluc3RhbmNlb2YgRGF0ZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRhdGUoKSBwYXJhbWV0ZXIgbXVzdCBiZSBvbmUgb2YgW251bGwsIHN0cmluZywgbW9tZW50IG9yIERhdGVdXCIpO3JldHVybiBfKG51bGw9PT1hP251bGw6Z2EoYSkpLGx9LGwuZm9ybWF0PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmZvcm1hdDtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmKFwiYm9vbGVhblwiIT10eXBlb2YgYXx8YSE9PSExKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm9ybWF0KCkgZXhwZWN0cyBhIHN0aW5nIG9yIGJvb2xlYW46ZmFsc2UgcGFyYW1ldGVyIFwiK2EpO3JldHVybiBkLmZvcm1hdD1hLGkmJm9hKCksbH0sbC50aW1lWm9uZT1mdW5jdGlvbihhKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/ZC50aW1lWm9uZTooZC50aW1lWm9uZT1hLGwpfSxsLmRheVZpZXdIZWFkZXJGb3JtYXQ9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuZGF5Vmlld0hlYWRlckZvcm1hdDtpZihcInN0cmluZ1wiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGF5Vmlld0hlYWRlckZvcm1hdCgpIGV4cGVjdHMgYSBzdHJpbmcgcGFyYW1ldGVyXCIpO3JldHVybiBkLmRheVZpZXdIZWFkZXJGb3JtYXQ9YSxsfSxsLmV4dHJhRm9ybWF0cz1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5leHRyYUZvcm1hdHM7aWYoYSE9PSExJiYhKGEgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4dHJhRm9ybWF0cygpIGV4cGVjdHMgYW4gYXJyYXkgb3IgZmFsc2UgcGFyYW1ldGVyXCIpO3JldHVybiBkLmV4dHJhRm9ybWF0cz1hLGomJm9hKCksbH0sbC5kaXNhYmxlZERhdGVzPWZ1bmN0aW9uKGIpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmRpc2FibGVkRGF0ZXM/YS5leHRlbmQoe30sZC5kaXNhYmxlZERhdGVzKTpkLmRpc2FibGVkRGF0ZXM7aWYoIWIpcmV0dXJuIGQuZGlzYWJsZWREYXRlcz0hMSwkKCksbDtpZighKGIgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRpc2FibGVkRGF0ZXMoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlclwiKTtyZXR1cm4gZC5kaXNhYmxlZERhdGVzPW1hKGIpLGQuZW5hYmxlZERhdGVzPSExLCQoKSxsfSxsLmVuYWJsZWREYXRlcz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5lbmFibGVkRGF0ZXM/YS5leHRlbmQoe30sZC5lbmFibGVkRGF0ZXMpOmQuZW5hYmxlZERhdGVzO2lmKCFiKXJldHVybiBkLmVuYWJsZWREYXRlcz0hMSwkKCksbDtpZighKGIgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImVuYWJsZWREYXRlcygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyXCIpO3JldHVybiBkLmVuYWJsZWREYXRlcz1tYShiKSxkLmRpc2FibGVkRGF0ZXM9ITEsJCgpLGx9LGwuZGF5c09mV2Vla0Rpc2FibGVkPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmRheXNPZldlZWtEaXNhYmxlZC5zcGxpY2UoMCk7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhJiYhYSlyZXR1cm4gZC5kYXlzT2ZXZWVrRGlzYWJsZWQ9ITEsJCgpLGw7aWYoIShhIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkYXlzT2ZXZWVrRGlzYWJsZWQoKSBleHBlY3RzIGFuIGFycmF5IHBhcmFtZXRlclwiKTtpZihkLmRheXNPZldlZWtEaXNhYmxlZD1hLnJlZHVjZShmdW5jdGlvbihhLGIpe3JldHVybiBiPXBhcnNlSW50KGIsMTApLGI+Nnx8MD5ifHxpc05hTihiKT9hOigtMT09PWEuaW5kZXhPZihiKSYmYS5wdXNoKGIpLGEpfSxbXSkuc29ydCgpLGQudXNlQ3VycmVudCYmIWQua2VlcEludmFsaWQpe2Zvcih2YXIgYj0wOyFRKGUsXCJkXCIpOyl7aWYoZS5hZGQoMSxcImRcIiksNz09PWIpdGhyb3dcIlRyaWVkIDcgdGltZXMgdG8gZmluZCBhIHZhbGlkIGRhdGVcIjtiKyt9XyhlKX1yZXR1cm4gJCgpLGx9LGwubWF4RGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5tYXhEYXRlP2QubWF4RGF0ZS5jbG9uZSgpOmQubWF4RGF0ZTtpZihcImJvb2xlYW5cIj09dHlwZW9mIGEmJmE9PT0hMSlyZXR1cm4gZC5tYXhEYXRlPSExLCQoKSxsO1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoXCJub3dcIj09PWF8fFwibW9tZW50XCI9PT1hKSYmKGE9eCgpKTt2YXIgYj1nYShhKTtpZighYi5pc1ZhbGlkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm1heERhdGUoKSBDb3VsZCBub3QgcGFyc2UgZGF0ZSBwYXJhbWV0ZXI6IFwiK2EpO2lmKGQubWluRGF0ZSYmYi5pc0JlZm9yZShkLm1pbkRhdGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtYXhEYXRlKCkgZGF0ZSBwYXJhbWV0ZXIgaXMgYmVmb3JlIG9wdGlvbnMubWluRGF0ZTogXCIrYi5mb3JtYXQoaSkpO3JldHVybiBkLm1heERhdGU9YixkLnVzZUN1cnJlbnQmJiFkLmtlZXBJbnZhbGlkJiZlLmlzQWZ0ZXIoYSkmJl8oZC5tYXhEYXRlKSxmLmlzQWZ0ZXIoYikmJihmPWIuY2xvbmUoKS5zdWJ0cmFjdChkLnN0ZXBwaW5nLFwibVwiKSksJCgpLGx9LGwubWluRGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5taW5EYXRlP2QubWluRGF0ZS5jbG9uZSgpOmQubWluRGF0ZTtpZihcImJvb2xlYW5cIj09dHlwZW9mIGEmJmE9PT0hMSlyZXR1cm4gZC5taW5EYXRlPSExLCQoKSxsO1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoXCJub3dcIj09PWF8fFwibW9tZW50XCI9PT1hKSYmKGE9eCgpKTt2YXIgYj1nYShhKTtpZighYi5pc1ZhbGlkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm1pbkRhdGUoKSBDb3VsZCBub3QgcGFyc2UgZGF0ZSBwYXJhbWV0ZXI6IFwiK2EpO2lmKGQubWF4RGF0ZSYmYi5pc0FmdGVyKGQubWF4RGF0ZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm1pbkRhdGUoKSBkYXRlIHBhcmFtZXRlciBpcyBhZnRlciBvcHRpb25zLm1heERhdGU6IFwiK2IuZm9ybWF0KGkpKTtyZXR1cm4gZC5taW5EYXRlPWIsZC51c2VDdXJyZW50JiYhZC5rZWVwSW52YWxpZCYmZS5pc0JlZm9yZShhKSYmXyhkLm1pbkRhdGUpLGYuaXNCZWZvcmUoYikmJihmPWIuY2xvbmUoKS5hZGQoZC5zdGVwcGluZyxcIm1cIikpLCQoKSxsfSxsLmRlZmF1bHREYXRlPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmRlZmF1bHREYXRlP2QuZGVmYXVsdERhdGUuY2xvbmUoKTpkLmRlZmF1bHREYXRlO2lmKCFhKXJldHVybiBkLmRlZmF1bHREYXRlPSExLGw7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihcIm5vd1wiPT09YXx8XCJtb21lbnRcIj09PWEpJiYoYT14KCkpO3ZhciBiPWdhKGEpO2lmKCFiLmlzVmFsaWQoKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGVmYXVsdERhdGUoKSBDb3VsZCBub3QgcGFyc2UgZGF0ZSBwYXJhbWV0ZXI6IFwiK2EpO2lmKCFRKGIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWZhdWx0RGF0ZSgpIGRhdGUgcGFzc2VkIGlzIGludmFsaWQgYWNjb3JkaW5nIHRvIGNvbXBvbmVudCBzZXR1cCB2YWxpZGF0aW9uc1wiKTtyZXR1cm4gZC5kZWZhdWx0RGF0ZT1iLChkLmRlZmF1bHREYXRlJiZkLmlubGluZXx8XCJcIj09PWcudmFsKCkudHJpbSgpKSYmXyhkLmRlZmF1bHREYXRlKSxsfSxsLmxvY2FsZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5sb2NhbGU7aWYoIWIubG9jYWxlRGF0YShhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwibG9jYWxlKCkgbG9jYWxlIFwiK2ErXCIgaXMgbm90IGxvYWRlZCBmcm9tIG1vbWVudCBsb2NhbGVzIVwiKTtyZXR1cm4gZC5sb2NhbGU9YSxlLmxvY2FsZShkLmxvY2FsZSksZi5sb2NhbGUoZC5sb2NhbGUpLGkmJm9hKCksbyYmKGFhKCksZWEoKSksbH0sbC5zdGVwcGluZz1mdW5jdGlvbihhKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/ZC5zdGVwcGluZzooYT1wYXJzZUludChhLDEwKSwoaXNOYU4oYSl8fDE+YSkmJihhPTEpLGQuc3RlcHBpbmc9YSxsKX0sbC51c2VDdXJyZW50PWZ1bmN0aW9uKGEpe3ZhciBiPVtcInllYXJcIixcIm1vbnRoXCIsXCJkYXlcIixcImhvdXJcIixcIm1pbnV0ZVwiXTtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC51c2VDdXJyZW50O2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSYmXCJzdHJpbmdcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInVzZUN1cnJlbnQoKSBleHBlY3RzIGEgYm9vbGVhbiBvciBzdHJpbmcgcGFyYW1ldGVyXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYtMT09PWIuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ1c2VDdXJyZW50KCkgZXhwZWN0cyBhIHN0cmluZyBwYXJhbWV0ZXIgb2YgXCIrYi5qb2luKFwiLCBcIikpO3JldHVybiBkLnVzZUN1cnJlbnQ9YSxsfSxsLmNvbGxhcHNlPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmNvbGxhcHNlO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiY29sbGFwc2UoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuY29sbGFwc2U9PT1hP2w6KGQuY29sbGFwc2U9YSxvJiYoYWEoKSxlYSgpKSxsKX0sbC5pY29ucz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYS5leHRlbmQoe30sZC5pY29ucyk7aWYoIShiIGluc3RhbmNlb2YgT2JqZWN0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiaWNvbnMoKSBleHBlY3RzIHBhcmFtZXRlciB0byBiZSBhbiBPYmplY3RcIik7cmV0dXJuIGEuZXh0ZW5kKGQuaWNvbnMsYiksbyYmKGFhKCksZWEoKSksbH0sbC50b29sdGlwcz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYS5leHRlbmQoe30sZC50b29sdGlwcyk7aWYoIShiIGluc3RhbmNlb2YgT2JqZWN0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidG9vbHRpcHMoKSBleHBlY3RzIHBhcmFtZXRlciB0byBiZSBhbiBPYmplY3RcIik7cmV0dXJuIGEuZXh0ZW5kKGQudG9vbHRpcHMsYiksbyYmKGFhKCksZWEoKSksbH0sbC51c2VTdHJpY3Q9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQudXNlU3RyaWN0O2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidXNlU3RyaWN0KCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLnVzZVN0cmljdD1hLGx9LGwuc2lkZUJ5U2lkZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5zaWRlQnlTaWRlO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwic2lkZUJ5U2lkZSgpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5zaWRlQnlTaWRlPWEsbyYmKGFhKCksZWEoKSksbH0sbC52aWV3TW9kZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC52aWV3TW9kZTtpZihcInN0cmluZ1wiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidmlld01vZGUoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlclwiKTtpZigtMT09PXIuaW5kZXhPZihhKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidmlld01vZGUoKSBwYXJhbWV0ZXIgbXVzdCBiZSBvbmUgb2YgKFwiK3Iuam9pbihcIiwgXCIpK1wiKSB2YWx1ZVwiKTtyZXR1cm4gZC52aWV3TW9kZT1hLGs9TWF0aC5tYXgoci5pbmRleE9mKGEpLHApLEsoKSxsfSxsLnRvb2xiYXJQbGFjZW1lbnQ9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQudG9vbGJhclBsYWNlbWVudDtpZihcInN0cmluZ1wiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidG9vbGJhclBsYWNlbWVudCgpIGV4cGVjdHMgYSBzdHJpbmcgcGFyYW1ldGVyXCIpO2lmKC0xPT09dS5pbmRleE9mKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ0b29sYmFyUGxhY2VtZW50KCkgcGFyYW1ldGVyIG11c3QgYmUgb25lIG9mIChcIit1LmpvaW4oXCIsIFwiKStcIikgdmFsdWVcIik7cmV0dXJuIGQudG9vbGJhclBsYWNlbWVudD1hLG8mJihhYSgpLGVhKCkpLGx9LGwud2lkZ2V0UG9zaXRpb25pbmc9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGEuZXh0ZW5kKHt9LGQud2lkZ2V0UG9zaXRpb25pbmcpO2lmKFwiW29iamVjdCBPYmplY3RdXCIhPT17fS50b1N0cmluZy5jYWxsKGIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ3aWRnZXRQb3NpdGlvbmluZygpIGV4cGVjdHMgYW4gb2JqZWN0IHZhcmlhYmxlXCIpO2lmKGIuaG9yaXpvbnRhbCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGIuaG9yaXpvbnRhbCl0aHJvdyBuZXcgVHlwZUVycm9yKFwid2lkZ2V0UG9zaXRpb25pbmcoKSBob3Jpem9udGFsIHZhcmlhYmxlIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoYi5ob3Jpem9udGFsPWIuaG9yaXpvbnRhbC50b0xvd2VyQ2FzZSgpLC0xPT09dC5pbmRleE9mKGIuaG9yaXpvbnRhbCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIndpZGdldFBvc2l0aW9uaW5nKCkgZXhwZWN0cyBob3Jpem9udGFsIHBhcmFtZXRlciB0byBiZSBvbmUgb2YgKFwiK3Quam9pbihcIiwgXCIpK1wiKVwiKTtkLndpZGdldFBvc2l0aW9uaW5nLmhvcml6b250YWw9Yi5ob3Jpem9udGFsfWlmKGIudmVydGljYWwpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiLnZlcnRpY2FsKXRocm93IG5ldyBUeXBlRXJyb3IoXCJ3aWRnZXRQb3NpdGlvbmluZygpIHZlcnRpY2FsIHZhcmlhYmxlIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoYi52ZXJ0aWNhbD1iLnZlcnRpY2FsLnRvTG93ZXJDYXNlKCksLTE9PT1zLmluZGV4T2YoYi52ZXJ0aWNhbCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIndpZGdldFBvc2l0aW9uaW5nKCkgZXhwZWN0cyB2ZXJ0aWNhbCBwYXJhbWV0ZXIgdG8gYmUgb25lIG9mIChcIitzLmpvaW4oXCIsIFwiKStcIilcIik7ZC53aWRnZXRQb3NpdGlvbmluZy52ZXJ0aWNhbD1iLnZlcnRpY2FsfXJldHVybiAkKCksbH0sbC5jYWxlbmRhcldlZWtzPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmNhbGVuZGFyV2Vla3M7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJjYWxlbmRhcldlZWtzKCkgZXhwZWN0cyBwYXJhbWV0ZXIgdG8gYmUgYSBib29sZWFuIHZhbHVlXCIpO3JldHVybiBkLmNhbGVuZGFyV2Vla3M9YSwkKCksbH0sbC5zaG93VG9kYXlCdXR0b249ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuc2hvd1RvZGF5QnV0dG9uO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwic2hvd1RvZGF5QnV0dG9uKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLnNob3dUb2RheUJ1dHRvbj1hLG8mJihhYSgpLGVhKCkpLGx9LGwuc2hvd0NsZWFyPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLnNob3dDbGVhcjtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcInNob3dDbGVhcigpIGV4cGVjdHMgYSBib29sZWFuIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5zaG93Q2xlYXI9YSxvJiYoYWEoKSxlYSgpKSxsfSxsLndpZGdldFBhcmVudD1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC53aWRnZXRQYXJlbnQ7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGImJihiPWEoYikpLG51bGwhPT1iJiZcInN0cmluZ1wiIT10eXBlb2YgYiYmIShiIGluc3RhbmNlb2YgYSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIndpZGdldFBhcmVudCgpIGV4cGVjdHMgYSBzdHJpbmcgb3IgYSBqUXVlcnkgb2JqZWN0IHBhcmFtZXRlclwiKTtyZXR1cm4gZC53aWRnZXRQYXJlbnQ9YixvJiYoYWEoKSxlYSgpKSxsfSxsLmtlZXBPcGVuPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmtlZXBPcGVuO2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwia2VlcE9wZW4oKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQua2VlcE9wZW49YSxsfSxsLmZvY3VzT25TaG93PWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmZvY3VzT25TaG93O2lmKFwiYm9vbGVhblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm9jdXNPblNob3coKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuZm9jdXNPblNob3c9YSxsfSxsLmlubGluZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5pbmxpbmU7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJpbmxpbmUoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuaW5saW5lPWEsbH0sbC5jbGVhcj1mdW5jdGlvbigpe3JldHVybiBiYSgpLGx9LGwua2V5QmluZHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGQua2V5QmluZHM9YSxsfSxsLmdldE1vbWVudD1mdW5jdGlvbihhKXtyZXR1cm4geChhKX0sbC5kZWJ1Zz1mdW5jdGlvbihhKXtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRlYnVnKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmRlYnVnPWEsbH0sbC5hbGxvd0lucHV0VG9nZ2xlPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmFsbG93SW5wdXRUb2dnbGU7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhbGxvd0lucHV0VG9nZ2xlKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmFsbG93SW5wdXRUb2dnbGU9YSxsfSxsLnNob3dDbG9zZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5zaG93Q2xvc2U7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJzaG93Q2xvc2UoKSBleHBlY3RzIGEgYm9vbGVhbiBwYXJhbWV0ZXJcIik7cmV0dXJuIGQuc2hvd0Nsb3NlPWEsbH0sbC5rZWVwSW52YWxpZD1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5rZWVwSW52YWxpZDtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcImtlZXBJbnZhbGlkKCkgZXhwZWN0cyBhIGJvb2xlYW4gcGFyYW1ldGVyXCIpO3JldHVybiBkLmtlZXBJbnZhbGlkPWEsbH0sbC5kYXRlcGlja2VySW5wdXQ9ZnVuY3Rpb24oYSl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuZGF0ZXBpY2tlcklucHV0O2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJkYXRlcGlja2VySW5wdXQoKSBleHBlY3RzIGEgc3RyaW5nIHBhcmFtZXRlclwiKTtyZXR1cm4gZC5kYXRlcGlja2VySW5wdXQ9YSxsfSxsLnBhcnNlSW5wdXREYXRlPWZ1bmN0aW9uKGEpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLnBhcnNlSW5wdXREYXRlO1xuaWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicGFyc2VJbnB1dERhdGUoKSBzaG9sdWQgYmUgYXMgZnVuY3Rpb25cIik7cmV0dXJuIGQucGFyc2VJbnB1dERhdGU9YSxsfSxsLmRpc2FibGVkVGltZUludGVydmFscz1mdW5jdGlvbihiKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZC5kaXNhYmxlZFRpbWVJbnRlcnZhbHM/YS5leHRlbmQoe30sZC5kaXNhYmxlZFRpbWVJbnRlcnZhbHMpOmQuZGlzYWJsZWRUaW1lSW50ZXJ2YWxzO2lmKCFiKXJldHVybiBkLmRpc2FibGVkVGltZUludGVydmFscz0hMSwkKCksbDtpZighKGIgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImRpc2FibGVkVGltZUludGVydmFscygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyXCIpO3JldHVybiBkLmRpc2FibGVkVGltZUludGVydmFscz1iLCQoKSxsfSxsLmRpc2FibGVkSG91cnM9ZnVuY3Rpb24oYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQuZGlzYWJsZWRIb3Vycz9hLmV4dGVuZCh7fSxkLmRpc2FibGVkSG91cnMpOmQuZGlzYWJsZWRIb3VycztpZighYilyZXR1cm4gZC5kaXNhYmxlZEhvdXJzPSExLCQoKSxsO2lmKCEoYiBpbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGlzYWJsZWRIb3VycygpIGV4cGVjdHMgYW4gYXJyYXkgcGFyYW1ldGVyXCIpO2lmKGQuZGlzYWJsZWRIb3Vycz1uYShiKSxkLmVuYWJsZWRIb3Vycz0hMSxkLnVzZUN1cnJlbnQmJiFkLmtlZXBJbnZhbGlkKXtmb3IodmFyIGM9MDshUShlLFwiaFwiKTspe2lmKGUuYWRkKDEsXCJoXCIpLDI0PT09Yyl0aHJvd1wiVHJpZWQgMjQgdGltZXMgdG8gZmluZCBhIHZhbGlkIGRhdGVcIjtjKyt9XyhlKX1yZXR1cm4gJCgpLGx9LGwuZW5hYmxlZEhvdXJzPWZ1bmN0aW9uKGIpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkLmVuYWJsZWRIb3Vycz9hLmV4dGVuZCh7fSxkLmVuYWJsZWRIb3Vycyk6ZC5lbmFibGVkSG91cnM7aWYoIWIpcmV0dXJuIGQuZW5hYmxlZEhvdXJzPSExLCQoKSxsO2lmKCEoYiBpbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiZW5hYmxlZEhvdXJzKCkgZXhwZWN0cyBhbiBhcnJheSBwYXJhbWV0ZXJcIik7aWYoZC5lbmFibGVkSG91cnM9bmEoYiksZC5kaXNhYmxlZEhvdXJzPSExLGQudXNlQ3VycmVudCYmIWQua2VlcEludmFsaWQpe2Zvcih2YXIgYz0wOyFRKGUsXCJoXCIpOyl7aWYoZS5hZGQoMSxcImhcIiksMjQ9PT1jKXRocm93XCJUcmllZCAyNCB0aW1lcyB0byBmaW5kIGEgdmFsaWQgZGF0ZVwiO2MrK31fKGUpfXJldHVybiAkKCksbH0sbC52aWV3RGF0ZT1mdW5jdGlvbihhKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZi5jbG9uZSgpO2lmKCFhKXJldHVybiBmPWUuY2xvbmUoKSxsO2lmKCEoXCJzdHJpbmdcIj09dHlwZW9mIGF8fGIuaXNNb21lbnQoYSl8fGEgaW5zdGFuY2VvZiBEYXRlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwidmlld0RhdGUoKSBwYXJhbWV0ZXIgbXVzdCBiZSBvbmUgb2YgW3N0cmluZywgbW9tZW50IG9yIERhdGVdXCIpO3JldHVybiBmPWdhKGEpLEooKSxsfSxjLmlzKFwiaW5wdXRcIikpZz1jO2Vsc2UgaWYoZz1jLmZpbmQoZC5kYXRlcGlja2VySW5wdXQpLDA9PT1nLnNpemUoKSlnPWMuZmluZChcImlucHV0XCIpO2Vsc2UgaWYoIWcuaXMoXCJpbnB1dFwiKSl0aHJvdyBuZXcgRXJyb3IoJ0NTUyBjbGFzcyBcIicrZC5kYXRlcGlja2VySW5wdXQrJ1wiIGNhbm5vdCBiZSBhcHBsaWVkIHRvIG5vbiBpbnB1dCBlbGVtZW50Jyk7aWYoYy5oYXNDbGFzcyhcImlucHV0LWdyb3VwXCIpJiYobj0wPT09Yy5maW5kKFwiLmRhdGVwaWNrZXJidXR0b25cIikuc2l6ZSgpP2MuZmluZChcIi5pbnB1dC1ncm91cC1hZGRvblwiKTpjLmZpbmQoXCIuZGF0ZXBpY2tlcmJ1dHRvblwiKSksIWQuaW5saW5lJiYhZy5pcyhcImlucHV0XCIpKXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBpbml0aWFsaXplIERhdGVUaW1lUGlja2VyIHdpdGhvdXQgYW4gaW5wdXQgZWxlbWVudFwiKTtyZXR1cm4gZT14KCksZj1lLmNsb25lKCksYS5leHRlbmQoITAsZCxHKCkpLGwub3B0aW9ucyhkKSxvYSgpLGthKCksZy5wcm9wKFwiZGlzYWJsZWRcIikmJmwuZGlzYWJsZSgpLGcuaXMoXCJpbnB1dFwiKSYmMCE9PWcudmFsKCkudHJpbSgpLmxlbmd0aD9fKGdhKGcudmFsKCkudHJpbSgpKSk6ZC5kZWZhdWx0RGF0ZSYmdm9pZCAwPT09Zy5hdHRyKFwicGxhY2Vob2xkZXJcIikmJl8oZC5kZWZhdWx0RGF0ZSksZC5pbmxpbmUmJmVhKCksbH07YS5mbi5kYXRldGltZXBpY2tlcj1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKTtkLmRhdGEoXCJEYXRlVGltZVBpY2tlclwiKXx8KGI9YS5leHRlbmQoITAse30sYS5mbi5kYXRldGltZXBpY2tlci5kZWZhdWx0cyxiKSxkLmRhdGEoXCJEYXRlVGltZVBpY2tlclwiLGMoZCxiKSkpfSl9LGEuZm4uZGF0ZXRpbWVwaWNrZXIuZGVmYXVsdHM9e3RpbWVab25lOlwiRXRjL1VUQ1wiLGZvcm1hdDohMSxkYXlWaWV3SGVhZGVyRm9ybWF0OlwiTU1NTSBZWVlZXCIsZXh0cmFGb3JtYXRzOiExLHN0ZXBwaW5nOjEsbWluRGF0ZTohMSxtYXhEYXRlOiExLHVzZUN1cnJlbnQ6ITAsY29sbGFwc2U6ITAsbG9jYWxlOmIubG9jYWxlKCksZGVmYXVsdERhdGU6ITEsZGlzYWJsZWREYXRlczohMSxlbmFibGVkRGF0ZXM6ITEsaWNvbnM6e3RpbWU6XCJnbHlwaGljb24gZ2x5cGhpY29uLXRpbWVcIixkYXRlOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1jYWxlbmRhclwiLHVwOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCIsZG93bjpcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXCIscHJldmlvdXM6XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiLG5leHQ6XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIix0b2RheTpcImdseXBoaWNvbiBnbHlwaGljb24tc2NyZWVuc2hvdFwiLGNsZWFyOlwiZ2x5cGhpY29uIGdseXBoaWNvbi10cmFzaFwiLGNsb3NlOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIn0sdG9vbHRpcHM6e3RvZGF5OlwiR28gdG8gdG9kYXlcIixjbGVhcjpcIkNsZWFyIHNlbGVjdGlvblwiLGNsb3NlOlwiQ2xvc2UgdGhlIHBpY2tlclwiLHNlbGVjdE1vbnRoOlwiU2VsZWN0IE1vbnRoXCIscHJldk1vbnRoOlwiUHJldmlvdXMgTW9udGhcIixuZXh0TW9udGg6XCJOZXh0IE1vbnRoXCIsc2VsZWN0WWVhcjpcIlNlbGVjdCBZZWFyXCIscHJldlllYXI6XCJQcmV2aW91cyBZZWFyXCIsbmV4dFllYXI6XCJOZXh0IFllYXJcIixzZWxlY3REZWNhZGU6XCJTZWxlY3QgRGVjYWRlXCIscHJldkRlY2FkZTpcIlByZXZpb3VzIERlY2FkZVwiLG5leHREZWNhZGU6XCJOZXh0IERlY2FkZVwiLHByZXZDZW50dXJ5OlwiUHJldmlvdXMgQ2VudHVyeVwiLG5leHRDZW50dXJ5OlwiTmV4dCBDZW50dXJ5XCIscGlja0hvdXI6XCJQaWNrIEhvdXJcIixpbmNyZW1lbnRIb3VyOlwiSW5jcmVtZW50IEhvdXJcIixkZWNyZW1lbnRIb3VyOlwiRGVjcmVtZW50IEhvdXJcIixwaWNrTWludXRlOlwiUGljayBNaW51dGVcIixpbmNyZW1lbnRNaW51dGU6XCJJbmNyZW1lbnQgTWludXRlXCIsZGVjcmVtZW50TWludXRlOlwiRGVjcmVtZW50IE1pbnV0ZVwiLHBpY2tTZWNvbmQ6XCJQaWNrIFNlY29uZFwiLGluY3JlbWVudFNlY29uZDpcIkluY3JlbWVudCBTZWNvbmRcIixkZWNyZW1lbnRTZWNvbmQ6XCJEZWNyZW1lbnQgU2Vjb25kXCIsdG9nZ2xlUGVyaW9kOlwiVG9nZ2xlIFBlcmlvZFwiLHNlbGVjdFRpbWU6XCJTZWxlY3QgVGltZVwifSx1c2VTdHJpY3Q6ITEsc2lkZUJ5U2lkZTohMSxkYXlzT2ZXZWVrRGlzYWJsZWQ6ITEsY2FsZW5kYXJXZWVrczohMSx2aWV3TW9kZTpcImRheXNcIix0b29sYmFyUGxhY2VtZW50OlwiZGVmYXVsdFwiLHNob3dUb2RheUJ1dHRvbjohMSxzaG93Q2xlYXI6ITEsc2hvd0Nsb3NlOiExLHdpZGdldFBvc2l0aW9uaW5nOntob3Jpem9udGFsOlwiYXV0b1wiLHZlcnRpY2FsOlwiYXV0b1wifSx3aWRnZXRQYXJlbnQ6bnVsbCxpZ25vcmVSZWFkb25seTohMSxrZWVwT3BlbjohMSxmb2N1c09uU2hvdzohMCxpbmxpbmU6ITEsa2VlcEludmFsaWQ6ITEsZGF0ZXBpY2tlcklucHV0OlwiLmRhdGVwaWNrZXJpbnB1dFwiLGtleUJpbmRzOnt1cDpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmRhdGUoKXx8dGhpcy5nZXRNb21lbnQoKTthLmZpbmQoXCIuZGF0ZXBpY2tlclwiKS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoNyxcImRcIikpOnRoaXMuZGF0ZShiLmNsb25lKCkuYWRkKHRoaXMuc3RlcHBpbmcoKSxcIm1cIikpfX0sZG93bjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdm9pZCB0aGlzLnNob3coKTt2YXIgYj10aGlzLmRhdGUoKXx8dGhpcy5nZXRNb21lbnQoKTthLmZpbmQoXCIuZGF0ZXBpY2tlclwiKS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuZGF0ZShiLmNsb25lKCkuYWRkKDcsXCJkXCIpKTp0aGlzLmRhdGUoYi5jbG9uZSgpLnN1YnRyYWN0KHRoaXMuc3RlcHBpbmcoKSxcIm1cIikpfSxcImNvbnRyb2wgdXBcIjpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmRhdGUoKXx8dGhpcy5nZXRNb21lbnQoKTthLmZpbmQoXCIuZGF0ZXBpY2tlclwiKS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoMSxcInlcIikpOnRoaXMuZGF0ZShiLmNsb25lKCkuYWRkKDEsXCJoXCIpKX19LFwiY29udHJvbCBkb3duXCI6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5kYXRlKCl8fHRoaXMuZ2V0TW9tZW50KCk7YS5maW5kKFwiLmRhdGVwaWNrZXJcIikuaXMoXCI6dmlzaWJsZVwiKT90aGlzLmRhdGUoYi5jbG9uZSgpLmFkZCgxLFwieVwiKSk6dGhpcy5kYXRlKGIuY2xvbmUoKS5zdWJ0cmFjdCgxLFwiaFwiKSl9fSxsZWZ0OmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuZGF0ZSgpfHx0aGlzLmdldE1vbWVudCgpO2EuZmluZChcIi5kYXRlcGlja2VyXCIpLmlzKFwiOnZpc2libGVcIikmJnRoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoMSxcImRcIikpfX0scmlnaHQ6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5kYXRlKCl8fHRoaXMuZ2V0TW9tZW50KCk7YS5maW5kKFwiLmRhdGVwaWNrZXJcIikuaXMoXCI6dmlzaWJsZVwiKSYmdGhpcy5kYXRlKGIuY2xvbmUoKS5hZGQoMSxcImRcIikpfX0scGFnZVVwOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuZGF0ZSgpfHx0aGlzLmdldE1vbWVudCgpO2EuZmluZChcIi5kYXRlcGlja2VyXCIpLmlzKFwiOnZpc2libGVcIikmJnRoaXMuZGF0ZShiLmNsb25lKCkuc3VidHJhY3QoMSxcIk1cIikpfX0scGFnZURvd246ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5kYXRlKCl8fHRoaXMuZ2V0TW9tZW50KCk7YS5maW5kKFwiLmRhdGVwaWNrZXJcIikuaXMoXCI6dmlzaWJsZVwiKSYmdGhpcy5kYXRlKGIuY2xvbmUoKS5hZGQoMSxcIk1cIikpfX0sZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKX0sZXNjYXBlOmZ1bmN0aW9uKCl7dGhpcy5oaWRlKCl9LFwiY29udHJvbCBzcGFjZVwiOmZ1bmN0aW9uKGEpe2EuZmluZChcIi50aW1lcGlja2VyXCIpLmlzKFwiOnZpc2libGVcIikmJmEuZmluZCgnLmJ0bltkYXRhLWFjdGlvbj1cInRvZ2dsZVBlcmlvZFwiXScpLmNsaWNrKCl9LHQ6ZnVuY3Rpb24oKXt0aGlzLmRhdGUodGhpcy5nZXRNb21lbnQoKSl9LFwiZGVsZXRlXCI6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCl9fSxkZWJ1ZzohMSxhbGxvd0lucHV0VG9nZ2xlOiExLGRpc2FibGVkVGltZUludGVydmFsczohMSxkaXNhYmxlZEhvdXJzOiExLGVuYWJsZWRIb3VyczohMSx2aWV3RGF0ZTohMX19KTsiLCIvKlxuICogYm9vdHN0cmFwLXRhZ3NpbnB1dCB2MC44LjBcbiAqIFxuICovXG5cbiFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIsYyl7dGhpcy5pc0luaXQ9ITAsdGhpcy5pdGVtc0FycmF5PVtdLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRlbGVtZW50LmhpZGUoKSx0aGlzLmlzU2VsZWN0PVwiU0VMRUNUXCI9PT1iLnRhZ05hbWUsdGhpcy5tdWx0aXBsZT10aGlzLmlzU2VsZWN0JiZiLmhhc0F0dHJpYnV0ZShcIm11bHRpcGxlXCIpLHRoaXMub2JqZWN0SXRlbXM9YyYmYy5pdGVtVmFsdWUsdGhpcy5wbGFjZWhvbGRlclRleHQ9Yi5oYXNBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKT90aGlzLiRlbGVtZW50LmF0dHIoXCJwbGFjZWhvbGRlclwiKTpcIlwiLHRoaXMuaW5wdXRTaXplPU1hdGgubWF4KDEsdGhpcy5wbGFjZWhvbGRlclRleHQubGVuZ3RoKSx0aGlzLiRjb250YWluZXI9YSgnPGRpdiBjbGFzcz1cImJvb3RzdHJhcC10YWdzaW5wdXRcIj48L2Rpdj4nKSx0aGlzLiRpbnB1dD1hKCc8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIicrdGhpcy5wbGFjZWhvbGRlclRleHQrJ1wiLz4nKS5hcHBlbmRUbyh0aGlzLiRjb250YWluZXIpLHRoaXMuJGVsZW1lbnQuYmVmb3JlKHRoaXMuJGNvbnRhaW5lciksdGhpcy5idWlsZChjKSx0aGlzLmlzSW5pdD0hMX1mdW5jdGlvbiBjKGEsYil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYVtiXSl7dmFyIGM9YVtiXTthW2JdPWZ1bmN0aW9uKGEpe3JldHVybiBhW2NdfX19ZnVuY3Rpb24gZChhLGIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGFbYl0pe3ZhciBjPWFbYl07YVtiXT1mdW5jdGlvbigpe3JldHVybiBjfX19ZnVuY3Rpb24gZShhKXtyZXR1cm4gYT9pLnRleHQoYSkuaHRtbCgpOlwiXCJ9ZnVuY3Rpb24gZihhKXt2YXIgYj0wO2lmKGRvY3VtZW50LnNlbGVjdGlvbil7YS5mb2N1cygpO3ZhciBjPWRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO2MubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsLWEudmFsdWUubGVuZ3RoKSxiPWMudGV4dC5sZW5ndGh9ZWxzZShhLnNlbGVjdGlvblN0YXJ0fHxcIjBcIj09YS5zZWxlY3Rpb25TdGFydCkmJihiPWEuc2VsZWN0aW9uU3RhcnQpO3JldHVybiBifWZ1bmN0aW9uIGcoYixjKXt2YXIgZD0hMTtyZXR1cm4gYS5lYWNoKGMsZnVuY3Rpb24oYSxjKXtpZihcIm51bWJlclwiPT10eXBlb2YgYyYmYi53aGljaD09PWMpcmV0dXJuIGQ9ITAsITE7aWYoYi53aGljaD09PWMud2hpY2gpe3ZhciBlPSFjLmhhc093blByb3BlcnR5KFwiYWx0S2V5XCIpfHxiLmFsdEtleT09PWMuYWx0S2V5LGY9IWMuaGFzT3duUHJvcGVydHkoXCJzaGlmdEtleVwiKXx8Yi5zaGlmdEtleT09PWMuc2hpZnRLZXksZz0hYy5oYXNPd25Qcm9wZXJ0eShcImN0cmxLZXlcIil8fGIuY3RybEtleT09PWMuY3RybEtleTtpZihlJiZmJiZnKXJldHVybiBkPSEwLCExfX0pLGR9dmFyIGg9e3RhZ0NsYXNzOmZ1bmN0aW9uKGEpe3JldHVyblwibGFiZWwgbGFiZWwtaW5mb1wifSxmb2N1c0NsYXNzOlwiZm9jdXNcIixpdGVtVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS50b1N0cmluZygpOmF9LGl0ZW1UZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZW1WYWx1ZShhKX0saXRlbVRpdGxlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsfSxmcmVlSW5wdXQ6ITAsYWRkT25CbHVyOiEwLG1heFRhZ3M6dm9pZCAwLG1heENoYXJzOnZvaWQgMCxjb25maXJtS2V5czpbMTMsNDRdLGRlbGltaXRlcjpcIixcIixkZWxpbWl0ZXJSZWdleDpudWxsLGNhbmNlbENvbmZpcm1LZXlzT25FbXB0eTohMSxvblRhZ0V4aXN0czpmdW5jdGlvbihhLGIpe2IuaGlkZSgpLmZhZGVJbigpfSx0cmltVmFsdWU6ITEsYWxsb3dEdXBsaWNhdGVzOiExLHRyaWdnZXJDaGFuZ2U6ITB9O2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpiLGFkZDpmdW5jdGlvbihiLGMsZCl7dmFyIGY9dGhpcztpZighKGYub3B0aW9ucy5tYXhUYWdzJiZmLml0ZW1zQXJyYXkubGVuZ3RoPj1mLm9wdGlvbnMubWF4VGFncykmJihiPT09ITF8fGIpKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYiYmZi5vcHRpb25zLnRyaW1WYWx1ZSYmKGI9YS50cmltKGIpKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmIWYub2JqZWN0SXRlbXMpdGhyb3dcIkNhbid0IGFkZCBvYmplY3RzIHdoZW4gaXRlbVZhbHVlIG9wdGlvbiBpcyBub3Qgc2V0XCI7aWYoIWIudG9TdHJpbmcoKS5tYXRjaCgvXlxccyokLykpe2lmKGYuaXNTZWxlY3QmJiFmLm11bHRpcGxlJiZmLml0ZW1zQXJyYXkubGVuZ3RoPjAmJmYucmVtb3ZlKGYuaXRlbXNBcnJheVswXSksXCJzdHJpbmdcIj09dHlwZW9mIGImJlwiSU5QVVRcIj09PXRoaXMuJGVsZW1lbnRbMF0udGFnTmFtZSl7dmFyIGc9Zi5vcHRpb25zLmRlbGltaXRlclJlZ2V4P2Yub3B0aW9ucy5kZWxpbWl0ZXJSZWdleDpmLm9wdGlvbnMuZGVsaW1pdGVyLGg9Yi5zcGxpdChnKTtpZihoLmxlbmd0aD4xKXtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl0aGlzLmFkZChoW2ldLCEwKTtyZXR1cm4gdm9pZChjfHxmLnB1c2hWYWwoZi5vcHRpb25zLnRyaWdnZXJDaGFuZ2UpKX19dmFyIGo9Zi5vcHRpb25zLml0ZW1WYWx1ZShiKSxrPWYub3B0aW9ucy5pdGVtVGV4dChiKSxsPWYub3B0aW9ucy50YWdDbGFzcyhiKSxtPWYub3B0aW9ucy5pdGVtVGl0bGUoYiksbj1hLmdyZXAoZi5pdGVtc0FycmF5LGZ1bmN0aW9uKGEpe3JldHVybiBmLm9wdGlvbnMuaXRlbVZhbHVlKGEpPT09an0pWzBdO2lmKCFufHxmLm9wdGlvbnMuYWxsb3dEdXBsaWNhdGVzKXtpZighKGYuaXRlbXMoKS50b1N0cmluZygpLmxlbmd0aCtiLmxlbmd0aCsxPmYub3B0aW9ucy5tYXhJbnB1dExlbmd0aCkpe3ZhciBvPWEuRXZlbnQoXCJiZWZvcmVJdGVtQWRkXCIse2l0ZW06YixjYW5jZWw6ITEsb3B0aW9uczpkfSk7aWYoZi4kZWxlbWVudC50cmlnZ2VyKG8pLCFvLmNhbmNlbCl7Zi5pdGVtc0FycmF5LnB1c2goYik7dmFyIHA9YSgnPHNwYW4gY2xhc3M9XCJ0YWcgJytlKGwpKyhudWxsIT09bT8nXCIgdGl0bGU9XCInK206XCJcIikrJ1wiPicrZShrKSsnPHNwYW4gZGF0YS1yb2xlPVwicmVtb3ZlXCI+PC9zcGFuPjwvc3Bhbj4nKTtwLmRhdGEoXCJpdGVtXCIsYiksZi5maW5kSW5wdXRXcmFwcGVyKCkuYmVmb3JlKHApLHAuYWZ0ZXIoXCIgXCIpO3ZhciBxPWEoJ29wdGlvblt2YWx1ZT1cIicrZW5jb2RlVVJJQ29tcG9uZW50KGopKydcIl0nLGYuJGVsZW1lbnQpLmxlbmd0aHx8YSgnb3B0aW9uW3ZhbHVlPVwiJytlKGopKydcIl0nLGYuJGVsZW1lbnQpLmxlbmd0aDtpZihmLmlzU2VsZWN0JiYhcSl7dmFyIHI9YShcIjxvcHRpb24gc2VsZWN0ZWQ+XCIrZShrKStcIjwvb3B0aW9uPlwiKTtyLmRhdGEoXCJpdGVtXCIsYiksci5hdHRyKFwidmFsdWVcIixqKSxmLiRlbGVtZW50LmFwcGVuZChyKX1jfHxmLnB1c2hWYWwoZi5vcHRpb25zLnRyaWdnZXJDaGFuZ2UpLChmLm9wdGlvbnMubWF4VGFncz09PWYuaXRlbXNBcnJheS5sZW5ndGh8fGYuaXRlbXMoKS50b1N0cmluZygpLmxlbmd0aD09PWYub3B0aW9ucy5tYXhJbnB1dExlbmd0aCkmJmYuJGNvbnRhaW5lci5hZGRDbGFzcyhcImJvb3RzdHJhcC10YWdzaW5wdXQtbWF4XCIpLGEoXCIudHlwZWFoZWFkLCAudHdpdHRlci10eXBlYWhlYWRcIixmLiRjb250YWluZXIpLmxlbmd0aCYmZi4kaW5wdXQudHlwZWFoZWFkKFwidmFsXCIsXCJcIiksdGhpcy5pc0luaXQ/Zi4kZWxlbWVudC50cmlnZ2VyKGEuRXZlbnQoXCJpdGVtQWRkZWRPbkluaXRcIix7aXRlbTpiLG9wdGlvbnM6ZH0pKTpmLiRlbGVtZW50LnRyaWdnZXIoYS5FdmVudChcIml0ZW1BZGRlZFwiLHtpdGVtOmIsb3B0aW9uczpkfSkpfX19ZWxzZSBpZihmLm9wdGlvbnMub25UYWdFeGlzdHMpe3ZhciBzPWEoXCIudGFnXCIsZi4kY29udGFpbmVyKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5kYXRhKFwiaXRlbVwiKT09PW59KTtmLm9wdGlvbnMub25UYWdFeGlzdHMoYixzKX19fX0scmVtb3ZlOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT10aGlzO2lmKGUub2JqZWN0SXRlbXMmJihiPVwib2JqZWN0XCI9PXR5cGVvZiBiP2EuZ3JlcChlLml0ZW1zQXJyYXksZnVuY3Rpb24oYSl7cmV0dXJuIGUub3B0aW9ucy5pdGVtVmFsdWUoYSk9PWUub3B0aW9ucy5pdGVtVmFsdWUoYil9KTphLmdyZXAoZS5pdGVtc0FycmF5LGZ1bmN0aW9uKGEpe3JldHVybiBlLm9wdGlvbnMuaXRlbVZhbHVlKGEpPT1ifSksYj1iW2IubGVuZ3RoLTFdKSxiKXt2YXIgZj1hLkV2ZW50KFwiYmVmb3JlSXRlbVJlbW92ZVwiLHtpdGVtOmIsY2FuY2VsOiExLG9wdGlvbnM6ZH0pO2lmKGUuJGVsZW1lbnQudHJpZ2dlcihmKSxmLmNhbmNlbClyZXR1cm47YShcIi50YWdcIixlLiRjb250YWluZXIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBhKHRoaXMpLmRhdGEoXCJpdGVtXCIpPT09Yn0pLnJlbW92ZSgpLGEoXCJvcHRpb25cIixlLiRlbGVtZW50KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5kYXRhKFwiaXRlbVwiKT09PWJ9KS5yZW1vdmUoKSwtMSE9PWEuaW5BcnJheShiLGUuaXRlbXNBcnJheSkmJmUuaXRlbXNBcnJheS5zcGxpY2UoYS5pbkFycmF5KGIsZS5pdGVtc0FycmF5KSwxKX1jfHxlLnB1c2hWYWwoZS5vcHRpb25zLnRyaWdnZXJDaGFuZ2UpLGUub3B0aW9ucy5tYXhUYWdzPmUuaXRlbXNBcnJheS5sZW5ndGgmJmUuJGNvbnRhaW5lci5yZW1vdmVDbGFzcyhcImJvb3RzdHJhcC10YWdzaW5wdXQtbWF4XCIpLGUuJGVsZW1lbnQudHJpZ2dlcihhLkV2ZW50KFwiaXRlbVJlbW92ZWRcIix7aXRlbTpiLG9wdGlvbnM6ZH0pKX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcztmb3IoYShcIi50YWdcIixiLiRjb250YWluZXIpLnJlbW92ZSgpLGEoXCJvcHRpb25cIixiLiRlbGVtZW50KS5yZW1vdmUoKTtiLml0ZW1zQXJyYXkubGVuZ3RoPjA7KWIuaXRlbXNBcnJheS5wb3AoKTtiLnB1c2hWYWwoYi5vcHRpb25zLnRyaWdnZXJDaGFuZ2UpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpczthKFwiLnRhZ1wiLGIuJGNvbnRhaW5lcikuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoXCJpdGVtXCIpLGY9Yi5vcHRpb25zLml0ZW1WYWx1ZShkKSxnPWIub3B0aW9ucy5pdGVtVGV4dChkKSxoPWIub3B0aW9ucy50YWdDbGFzcyhkKTtpZihjLmF0dHIoXCJjbGFzc1wiLG51bGwpLGMuYWRkQ2xhc3MoXCJ0YWcgXCIrZShoKSksYy5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAzPT10aGlzLm5vZGVUeXBlfSlbMF0ubm9kZVZhbHVlPWUoZyksYi5pc1NlbGVjdCl7dmFyIGk9YShcIm9wdGlvblwiLGIuJGVsZW1lbnQpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBhKHRoaXMpLmRhdGEoXCJpdGVtXCIpPT09ZH0pO2kuYXR0cihcInZhbHVlXCIsZil9fSl9LGl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXNBcnJheX0scHVzaFZhbDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1hLm1hcChiLml0ZW1zKCksZnVuY3Rpb24oYSl7cmV0dXJuIGIub3B0aW9ucy5pdGVtVmFsdWUoYSkudG9TdHJpbmcoKX0pO2IuJGVsZW1lbnQudmFsKGMsITApLGIub3B0aW9ucy50cmlnZ2VyQ2hhbmdlJiZiLiRlbGVtZW50LnRyaWdnZXIoXCJjaGFuZ2VcIil9LGJ1aWxkOmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXM7aWYoZS5vcHRpb25zPWEuZXh0ZW5kKHt9LGgsYiksZS5vYmplY3RJdGVtcyYmKGUub3B0aW9ucy5mcmVlSW5wdXQ9ITEpLGMoZS5vcHRpb25zLFwiaXRlbVZhbHVlXCIpLGMoZS5vcHRpb25zLFwiaXRlbVRleHRcIiksZChlLm9wdGlvbnMsXCJ0YWdDbGFzc1wiKSxlLm9wdGlvbnMudHlwZWFoZWFkKXt2YXIgaT1lLm9wdGlvbnMudHlwZWFoZWFkfHx7fTtkKGksXCJzb3VyY2VcIiksZS4kaW5wdXQudHlwZWFoZWFkKGEuZXh0ZW5kKHt9LGkse3NvdXJjZTpmdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBiPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGc9ZS5vcHRpb25zLml0ZW1UZXh0KGFbZF0pO2ZbZ109YVtkXSxiLnB1c2goZyl9YyhiKX10aGlzLm1hcD17fTt2YXIgZj10aGlzLm1hcCxnPWkuc291cmNlKGIpO2EuaXNGdW5jdGlvbihnLnN1Y2Nlc3MpP2cuc3VjY2VzcyhkKTphLmlzRnVuY3Rpb24oZy50aGVuKT9nLnRoZW4oZCk6YS53aGVuKGcpLnRoZW4oZCl9LHVwZGF0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUuYWRkKHRoaXMubWFwW2FdKSx0aGlzLm1hcFthXX0sbWF0Y2hlcjpmdW5jdGlvbihhKXtyZXR1cm4tMSE9PWEudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRoaXMucXVlcnkudHJpbSgpLnRvTG93ZXJDYXNlKCkpfSxzb3J0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc29ydCgpfSxoaWdobGlnaHRlcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgUmVnRXhwKFwiKFwiK3RoaXMucXVlcnkrXCIpXCIsXCJnaVwiKTtyZXR1cm4gYS5yZXBsYWNlKGIsXCI8c3Ryb25nPiQxPC9zdHJvbmc+XCIpfX0pKX1pZihlLm9wdGlvbnMudHlwZWFoZWFkanMpe3ZhciBqPW51bGwsaz17fSxsPWUub3B0aW9ucy50eXBlYWhlYWRqczthLmlzQXJyYXkobCk/KGo9bFswXSxrPWxbMV0pOms9bCxlLiRpbnB1dC50eXBlYWhlYWQoaixrKS5vbihcInR5cGVhaGVhZDpzZWxlY3RlZFwiLGEucHJveHkoZnVuY3Rpb24oYSxiKXtrLnZhbHVlS2V5P2UuYWRkKGJbay52YWx1ZUtleV0pOmUuYWRkKGIpLGUuJGlucHV0LnR5cGVhaGVhZChcInZhbFwiLFwiXCIpfSxlKSl9ZS4kY29udGFpbmVyLm9uKFwiY2xpY2tcIixhLnByb3h5KGZ1bmN0aW9uKGEpe2UuJGVsZW1lbnQuYXR0cihcImRpc2FibGVkXCIpfHxlLiRpbnB1dC5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIiksZS4kaW5wdXQuZm9jdXMoKX0sZSkpLGUub3B0aW9ucy5hZGRPbkJsdXImJmUub3B0aW9ucy5mcmVlSW5wdXQmJmUuJGlucHV0Lm9uKFwiZm9jdXNvdXRcIixhLnByb3h5KGZ1bmN0aW9uKGIpezA9PT1hKFwiLnR5cGVhaGVhZCwgLnR3aXR0ZXItdHlwZWFoZWFkXCIsZS4kY29udGFpbmVyKS5sZW5ndGgmJihlLmFkZChlLiRpbnB1dC52YWwoKSksZS4kaW5wdXQudmFsKFwiXCIpKX0sZSkpLGUuJGNvbnRhaW5lci5vbih7Zm9jdXNpbjpmdW5jdGlvbigpe2UuJGNvbnRhaW5lci5hZGRDbGFzcyhlLm9wdGlvbnMuZm9jdXNDbGFzcyl9LGZvY3Vzb3V0OmZ1bmN0aW9uKCl7ZS4kY29udGFpbmVyLnJlbW92ZUNsYXNzKGUub3B0aW9ucy5mb2N1c0NsYXNzKX19KSxlLiRjb250YWluZXIub24oXCJrZXlkb3duXCIsXCJpbnB1dFwiLGEucHJveHkoZnVuY3Rpb24oYil7dmFyIGM9YShiLnRhcmdldCksZD1lLmZpbmRJbnB1dFdyYXBwZXIoKTtpZihlLiRlbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiKSlyZXR1cm4gdm9pZCBlLiRpbnB1dC5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpO3N3aXRjaChiLndoaWNoKXtjYXNlIDg6aWYoMD09PWYoY1swXSkpe3ZhciBnPWQucHJldigpO2cubGVuZ3RoJiZlLnJlbW92ZShnLmRhdGEoXCJpdGVtXCIpKX1icmVhaztjYXNlIDQ2OmlmKDA9PT1mKGNbMF0pKXt2YXIgaD1kLm5leHQoKTtoLmxlbmd0aCYmZS5yZW1vdmUoaC5kYXRhKFwiaXRlbVwiKSl9YnJlYWs7Y2FzZSAzNzp2YXIgaT1kLnByZXYoKTswPT09Yy52YWwoKS5sZW5ndGgmJmlbMF0mJihpLmJlZm9yZShkKSxjLmZvY3VzKCkpO2JyZWFrO2Nhc2UgMzk6dmFyIGo9ZC5uZXh0KCk7MD09PWMudmFsKCkubGVuZ3RoJiZqWzBdJiYoai5hZnRlcihkKSxjLmZvY3VzKCkpfXZhciBrPWMudmFsKCkubGVuZ3RoO01hdGguY2VpbChrLzUpO2MuYXR0cihcInNpemVcIixNYXRoLm1heCh0aGlzLmlucHV0U2l6ZSxjLnZhbCgpLmxlbmd0aCkpfSxlKSksZS4kY29udGFpbmVyLm9uKFwia2V5cHJlc3NcIixcImlucHV0XCIsYS5wcm94eShmdW5jdGlvbihiKXt2YXIgYz1hKGIudGFyZ2V0KTtpZihlLiRlbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiKSlyZXR1cm4gdm9pZCBlLiRpbnB1dC5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpO3ZhciBkPWMudmFsKCksZj1lLm9wdGlvbnMubWF4Q2hhcnMmJmQubGVuZ3RoPj1lLm9wdGlvbnMubWF4Q2hhcnM7ZS5vcHRpb25zLmZyZWVJbnB1dCYmKGcoYixlLm9wdGlvbnMuY29uZmlybUtleXMpfHxmKSYmKDAhPT1kLmxlbmd0aCYmKGUuYWRkKGY/ZC5zdWJzdHIoMCxlLm9wdGlvbnMubWF4Q2hhcnMpOmQpLGMudmFsKFwiXCIpKSxlLm9wdGlvbnMuY2FuY2VsQ29uZmlybUtleXNPbkVtcHR5PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7dmFyIGg9Yy52YWwoKS5sZW5ndGg7TWF0aC5jZWlsKGgvNSk7Yy5hdHRyKFwic2l6ZVwiLE1hdGgubWF4KHRoaXMuaW5wdXRTaXplLGMudmFsKCkubGVuZ3RoKSl9LGUpKSxlLiRjb250YWluZXIub24oXCJjbGlja1wiLFwiW2RhdGEtcm9sZT1yZW1vdmVdXCIsYS5wcm94eShmdW5jdGlvbihiKXtlLiRlbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiKXx8ZS5yZW1vdmUoYShiLnRhcmdldCkuY2xvc2VzdChcIi50YWdcIikuZGF0YShcIml0ZW1cIikpfSxlKSksZS5vcHRpb25zLml0ZW1WYWx1ZT09PWguaXRlbVZhbHVlJiYoXCJJTlBVVFwiPT09ZS4kZWxlbWVudFswXS50YWdOYW1lP2UuYWRkKGUuJGVsZW1lbnQudmFsKCkpOmEoXCJvcHRpb25cIixlLiRlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKCl7ZS5hZGQoYSh0aGlzKS5hdHRyKFwidmFsdWVcIiksITApfSkpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLiRjb250YWluZXIub2ZmKFwia2V5cHJlc3NcIixcImlucHV0XCIpLGEuJGNvbnRhaW5lci5vZmYoXCJjbGlja1wiLFwiW3JvbGU9cmVtb3ZlXVwiKSxhLiRjb250YWluZXIucmVtb3ZlKCksYS4kZWxlbWVudC5yZW1vdmVEYXRhKFwidGFnc2lucHV0XCIpLGEuJGVsZW1lbnQuc2hvdygpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuJGlucHV0LmZvY3VzKCl9LGlucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGlucHV0fSxmaW5kSW5wdXRXcmFwcGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPXRoaXMuJGlucHV0WzBdLGM9dGhpcy4kY29udGFpbmVyWzBdO2ImJmIucGFyZW50Tm9kZSE9PWM7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBhKGIpfX0sYS5mbi50YWdzaW5wdXQ9ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPVtdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZz1hKHRoaXMpLmRhdGEoXCJ0YWdzaW5wdXRcIik7aWYoZylpZihjfHxkKXtpZih2b2lkIDAhPT1nW2NdKXtpZigzPT09Z1tjXS5sZW5ndGgmJnZvaWQgMCE9PWUpdmFyIGg9Z1tjXShkLG51bGwsZSk7ZWxzZSB2YXIgaD1nW2NdKGQpO3ZvaWQgMCE9PWgmJmYucHVzaChoKX19ZWxzZSBmLnB1c2goZyk7ZWxzZSBnPW5ldyBiKHRoaXMsYyksYSh0aGlzKS5kYXRhKFwidGFnc2lucHV0XCIsZyksZi5wdXNoKGcpLFwiU0VMRUNUXCI9PT10aGlzLnRhZ05hbWUmJmEoXCJvcHRpb25cIixhKHRoaXMpKS5hdHRyKFwic2VsZWN0ZWRcIixcInNlbGVjdGVkXCIpLGEodGhpcykudmFsKGEodGhpcykudmFsKCkpfSksXCJzdHJpbmdcIj09dHlwZW9mIGM/Zi5sZW5ndGg+MT9mOmZbMF06Zn0sYS5mbi50YWdzaW5wdXQuQ29uc3RydWN0b3I9Yjt2YXIgaT1hKFwiPGRpdiAvPlwiKTthKGZ1bmN0aW9uKCl7YShcImlucHV0W2RhdGEtcm9sZT10YWdzaW5wdXRdLCBzZWxlY3RbbXVsdGlwbGVdW2RhdGEtcm9sZT10YWdzaW5wdXRdXCIpLnRhZ3NpbnB1dCgpfSl9KHdpbmRvdy5qUXVlcnkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ym9vdHN0cmFwLXRhZ3NpbnB1dC5taW4uanMubWFwIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogYm9vdHN0cmFwLWNvbWJvYm94LmpzIHYxLjEuN1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTIgRGFuaWVsIEZhcnJlbGxcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4hZnVuY3Rpb24oICQgKSB7XG5cbiBcInVzZSBzdHJpY3RcIjtcblxuIC8qIENPTUJPQk9YIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OXG4gICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuICB2YXIgQ29tYm9ib3ggPSBmdW5jdGlvbiAoIGVsZW1lbnQsIG9wdGlvbnMgKSB7XG4gICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4uY29tYm9ib3guZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgIHRoaXMudGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMudGVtcGxhdGUgfHwgdGhpcy50ZW1wbGF0ZVxuICAgIHRoaXMuJHNvdXJjZSA9ICQoZWxlbWVudCk7XG4gICAgdGhpcy4kY29udGFpbmVyID0gdGhpcy5zZXR1cCgpO1xuICAgIHRoaXMuJGVsZW1lbnQgPSB0aGlzLiRjb250YWluZXIuZmluZCgnaW5wdXRbdHlwZT10ZXh0XScpO1xuICAgIHRoaXMuJHRhcmdldCA9IHRoaXMuJGNvbnRhaW5lci5maW5kKCdpbnB1dFt0eXBlPWhpZGRlbl0nKTtcbiAgICB0aGlzLiRidXR0b24gPSB0aGlzLiRjb250YWluZXIuZmluZCgnLmRyb3Bkb3duLXRvZ2dsZScpO1xuICAgIHRoaXMuJG1lbnUgPSAkKHRoaXMub3B0aW9ucy5tZW51KS5hcHBlbmRUbygnYm9keScpO1xuICAgIHRoaXMubWF0Y2hlciA9IHRoaXMub3B0aW9ucy5tYXRjaGVyIHx8IHRoaXMubWF0Y2hlcjtcbiAgICB0aGlzLnNvcnRlciA9IHRoaXMub3B0aW9ucy5zb3J0ZXIgfHwgdGhpcy5zb3J0ZXI7XG4gICAgdGhpcy5oaWdobGlnaHRlciA9IHRoaXMub3B0aW9ucy5oaWdobGlnaHRlciB8fCB0aGlzLmhpZ2hsaWdodGVyO1xuICAgIHRoaXMuc2hvd24gPSBmYWxzZTtcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgdGhpcy50cmFuc2ZlckF0dHJpYnV0ZXMoKTtcbiAgICB0aGlzLmxpc3RlbigpO1xuICB9O1xuXG4gIENvbWJvYm94LnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBDb21ib2JveFxuXG4gICwgc2V0dXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb21ib2JveCA9ICQodGhpcy50ZW1wbGF0ZSgpKTtcbiAgICAgIHRoaXMuJHNvdXJjZS5iZWZvcmUoY29tYm9ib3gpO1xuICAgICAgdGhpcy4kc291cmNlLmhpZGUoKTtcbiAgICAgIHJldHVybiBjb21ib2JveDtcbiAgICB9XG5cbiAgLCBkaXNhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIHRoaXMuJGJ1dHRvbi5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ2NvbWJvYm94LWRpc2FibGVkJyk7XG4gICAgfVxuXG4gICwgZW5hYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLiRidXR0b24uYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NvbWJvYm94LWRpc2FibGVkJyk7XG4gICAgfVxuICAsIHBhcnNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICAgICAgLCBtYXAgPSB7fVxuICAgICAgICAsIHNvdXJjZSA9IFtdXG4gICAgICAgICwgc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICAsIHNlbGVjdGVkVmFsdWUgPSAnJztcbiAgICAgIHRoaXMuJHNvdXJjZS5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9uID0gJCh0aGlzKTtcbiAgICAgICAgaWYgKG9wdGlvbi52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICB0aGF0Lm9wdGlvbnMucGxhY2Vob2xkZXIgPSBvcHRpb24udGV4dCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBtYXBbb3B0aW9uLnRleHQoKV0gPSBvcHRpb24udmFsKCk7XG4gICAgICAgIHNvdXJjZS5wdXNoKG9wdGlvbi50ZXh0KCkpO1xuICAgICAgICBpZiAob3B0aW9uLnByb3AoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IG9wdGlvbi50ZXh0KCk7XG4gICAgICAgICAgc2VsZWN0ZWRWYWx1ZSA9IG9wdGlvbi52YWwoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQudmFsKHNlbGVjdGVkKTtcbiAgICAgICAgdGhpcy4kdGFyZ2V0LnZhbChzZWxlY3RlZFZhbHVlKTtcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdjb21ib2JveC1zZWxlY3RlZCcpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuXG4gICwgdHJhbnNmZXJBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIgPSB0aGlzLiRzb3VyY2UuYXR0cignZGF0YS1wbGFjZWhvbGRlcicpIHx8IHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlclxuICAgIGlmKHRoaXMub3B0aW9ucy5hcHBlbmRJZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIFx0dGhpcy4kZWxlbWVudC5hdHRyKCdpZCcsIHRoaXMuJHNvdXJjZS5hdHRyKCdpZCcpICsgdGhpcy5vcHRpb25zLmFwcGVuZElkKTtcbiAgICB9XG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcilcbiAgICB0aGlzLiR0YXJnZXQucHJvcCgnbmFtZScsIHRoaXMuJHNvdXJjZS5wcm9wKCduYW1lJykpXG4gICAgdGhpcy4kdGFyZ2V0LnZhbCh0aGlzLiRzb3VyY2UudmFsKCkpXG4gICAgdGhpcy4kc291cmNlLnJlbW92ZUF0dHIoJ25hbWUnKSAgLy8gUmVtb3ZlIGZyb20gc291cmNlIG90aGVyd2lzZSBmb3JtIHdpbGwgcGFzcyBwYXJhbWV0ZXIgdHdpY2UuXG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCdyZXF1aXJlZCcsIHRoaXMuJHNvdXJjZS5hdHRyKCdyZXF1aXJlZCcpKVxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cigncmVsJywgdGhpcy4kc291cmNlLmF0dHIoJ3JlbCcpKVxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cigndGl0bGUnLCB0aGlzLiRzb3VyY2UuYXR0cigndGl0bGUnKSlcbiAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ2NsYXNzJywgdGhpcy4kc291cmNlLmF0dHIoJ2NsYXNzJykpXG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsIHRoaXMuJHNvdXJjZS5hdHRyKCd0YWJpbmRleCcpKVxuICAgIHRoaXMuJHNvdXJjZS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpXG4gICAgaWYgKHRoaXMuJHNvdXJjZS5hdHRyKCdkaXNhYmxlZCcpIT09dW5kZWZpbmVkKVxuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gIH1cblxuICAsIHNlbGVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbCA9IHRoaXMuJG1lbnUuZmluZCgnLmFjdGl2ZScpLmF0dHIoJ2RhdGEtdmFsdWUnKTtcbiAgICAgIHRoaXMuJGVsZW1lbnQudmFsKHRoaXMudXBkYXRlcih2YWwpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgIHRoaXMuJHRhcmdldC52YWwodGhpcy5tYXBbdmFsXSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICB0aGlzLiRzb3VyY2UudmFsKHRoaXMubWFwW3ZhbF0pLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdjb21ib2JveC1zZWxlY3RlZCcpO1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcy5oaWRlKCk7XG4gICAgfVxuXG4gICwgdXBkYXRlcjogZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAsIHNob3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwb3MgPSAkLmV4dGVuZCh7fSwgdGhpcy4kZWxlbWVudC5wb3NpdGlvbigpLCB7XG4gICAgICAgIGhlaWdodDogdGhpcy4kZWxlbWVudFswXS5vZmZzZXRIZWlnaHRcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLiRtZW51XG4gICAgICAgIC5pbnNlcnRBZnRlcih0aGlzLiRlbGVtZW50KVxuICAgICAgICAuY3NzKHtcbiAgICAgICAgICB0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0XG4gICAgICAgICwgbGVmdDogcG9zLmxlZnRcbiAgICAgICAgfSlcbiAgICAgICAgLnNob3coKTtcblxuICAgICAgJCgnLmRyb3Bkb3duLW1lbnUnKS5vbignbW91c2Vkb3duJywgJC5wcm94eSh0aGlzLnNjcm9sbFNhZmV0eSwgdGhpcykpO1xuXG4gICAgICB0aGlzLnNob3duID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAsIGhpZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJG1lbnUuaGlkZSgpO1xuICAgICAgJCgnLmRyb3Bkb3duLW1lbnUnKS5vZmYoJ21vdXNlZG93bicsICQucHJveHkodGhpcy5zY3JvbGxTYWZldHksIHRoaXMpKTtcbiAgICAgIHRoaXMuJGVsZW1lbnQub24oJ2JsdXInLCAkLnByb3h5KHRoaXMuYmx1ciwgdGhpcykpO1xuICAgICAgdGhpcy5zaG93biA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICwgbG9va3VwOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRoaXMucXVlcnkgPSB0aGlzLiRlbGVtZW50LnZhbCgpO1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzcyh0aGlzLnNvdXJjZSk7XG4gICAgfVxuXG4gICwgcHJvY2VzczogZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgIGl0ZW1zID0gJC5ncmVwKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gdGhhdC5tYXRjaGVyKGl0ZW0pO1xuICAgICAgfSlcblxuICAgICAgaXRlbXMgPSB0aGlzLnNvcnRlcihpdGVtcyk7XG5cbiAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3duID8gdGhpcy5oaWRlKCkgOiB0aGlzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXIoaXRlbXMuc2xpY2UoMCwgdGhpcy5vcHRpb25zLml0ZW1zKSkuc2hvdygpO1xuICAgIH1cblxuICAsIHRlbXBsYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYnNWZXJzaW9uID09ICcyJykge1xuICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJjb21ib2JveC1jb250YWluZXJcIj48aW5wdXQgdHlwZT1cImhpZGRlblwiIC8+IDxkaXYgY2xhc3M9XCJpbnB1dC1hcHBlbmRcIj4gPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwiZmFsc2VcIiAvPiA8c3BhbiBjbGFzcz1cImFkZC1vbiBkcm9wZG93bi10b2dnbGVcIiBkYXRhLWRyb3Bkb3duPVwiZHJvcGRvd25cIj4gPHNwYW4gY2xhc3M9XCJjYXJldFwiLz4gPGkgY2xhc3M9XCJpY29uLXJlbW92ZVwiLz4gPC9zcGFuPiA8L2Rpdj4gPC9kaXY+J1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiY29tYm9ib3gtY29udGFpbmVyXCI+IDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgLz4gPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+IDxpbnB1dCB0eXBlPVwidGV4dFwiIGF1dG9jb21wbGV0ZT1cImZhbHNlXCIgLz4gPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1hZGRvbiBkcm9wZG93bi10b2dnbGVcIiBkYXRhLWRyb3Bkb3duPVwiZHJvcGRvd25cIj4gPHNwYW4gY2xhc3M9XCJjYXJldFwiIC8+IDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIiAvPiA8L3NwYW4+IDwvZGl2PiA8L2Rpdj4nXG4gICAgICB9XG4gICAgfVxuXG4gICwgbWF0Y2hlcjogZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiB+aXRlbS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5xdWVyeS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG5cbiAgLCBzb3J0ZXI6IGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgdmFyIGJlZ2luc3dpdGggPSBbXVxuICAgICAgICAsIGNhc2VTZW5zaXRpdmUgPSBbXVxuICAgICAgICAsIGNhc2VJbnNlbnNpdGl2ZSA9IFtdXG4gICAgICAgICwgaXRlbTtcblxuICAgICAgd2hpbGUgKGl0ZW0gPSBpdGVtcy5zaGlmdCgpKSB7XG4gICAgICAgIGlmICghaXRlbS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5xdWVyeS50b0xvd2VyQ2FzZSgpKSkge2JlZ2luc3dpdGgucHVzaChpdGVtKTt9XG4gICAgICAgIGVsc2UgaWYgKH5pdGVtLmluZGV4T2YodGhpcy5xdWVyeSkpIHtjYXNlU2Vuc2l0aXZlLnB1c2goaXRlbSk7fVxuICAgICAgICBlbHNlIHtjYXNlSW5zZW5zaXRpdmUucHVzaChpdGVtKTt9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBiZWdpbnN3aXRoLmNvbmNhdChjYXNlU2Vuc2l0aXZlLCBjYXNlSW5zZW5zaXRpdmUpO1xuICAgIH1cblxuICAsIGhpZ2hsaWdodGVyOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyeS5yZXBsYWNlKC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZywgJ1xcXFwkJicpO1xuICAgICAgcmV0dXJuIGl0ZW0ucmVwbGFjZShuZXcgUmVnRXhwKCcoJyArIHF1ZXJ5ICsgJyknLCAnaWcnKSwgZnVuY3Rpb24gKCQxLCBtYXRjaCkge1xuICAgICAgICByZXR1cm4gJzxzdHJvbmc+JyArIG1hdGNoICsgJzwvc3Ryb25nPic7XG4gICAgICB9KVxuICAgIH1cblxuICAsIHJlbmRlcjogZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgIGl0ZW1zID0gJChpdGVtcykubWFwKGZ1bmN0aW9uIChpLCBpdGVtKSB7XG4gICAgICAgIGkgPSAkKHRoYXQub3B0aW9ucy5pdGVtKS5hdHRyKCdkYXRhLXZhbHVlJywgaXRlbSk7XG4gICAgICAgIGkuZmluZCgnYScpLmh0bWwodGhhdC5oaWdobGlnaHRlcihpdGVtKSk7XG4gICAgICAgIHJldHVybiBpWzBdO1xuICAgICAgfSlcblxuICAgICAgaXRlbXMuZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB0aGlzLiRtZW51Lmh0bWwoaXRlbXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICwgbmV4dDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgYWN0aXZlID0gdGhpcy4kbWVudS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgICwgbmV4dCA9IGFjdGl2ZS5uZXh0KCk7XG5cbiAgICAgIGlmICghbmV4dC5sZW5ndGgpIHtcbiAgICAgICAgbmV4dCA9ICQodGhpcy4kbWVudS5maW5kKCdsaScpWzBdKTtcbiAgICAgIH1cblxuICAgICAgbmV4dC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuXG4gICwgcHJldjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgYWN0aXZlID0gdGhpcy4kbWVudS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgICwgcHJldiA9IGFjdGl2ZS5wcmV2KCk7XG5cbiAgICAgIGlmICghcHJldi5sZW5ndGgpIHtcbiAgICAgICAgcHJldiA9IHRoaXMuJG1lbnUuZmluZCgnbGknKS5sYXN0KCk7XG4gICAgICB9XG5cbiAgICAgIHByZXYuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAsIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgaWYgKHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnY29tYm9ib3gtc2VsZWN0ZWQnKSkge1xuICAgICAgICB0aGlzLmNsZWFyVGFyZ2V0KCk7XG4gICAgICAgIHRoaXMudHJpZ2dlckNoYW5nZSgpO1xuICAgICAgICB0aGlzLmNsZWFyRWxlbWVudCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvd24pIHtcbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmNsZWFyRWxlbWVudCgpO1xuICAgICAgICAgIHRoaXMubG9va3VwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAsIHNjcm9sbFNhZmV0eTogZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT0gJ1VMJykge1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnQub2ZmKCdibHVyJyk7XG4gICAgICB9XG4gIH1cbiAgLCBjbGVhckVsZW1lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRlbGVtZW50LnZhbCgnJykuZm9jdXMoKTtcbiAgfVxuXG4gICwgY2xlYXJUYXJnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRzb3VyY2UudmFsKCcnKTtcbiAgICB0aGlzLiR0YXJnZXQudmFsKCcnKTtcbiAgICB0aGlzLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NvbWJvYm94LXNlbGVjdGVkJyk7XG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgLCB0cmlnZ2VyQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kc291cmNlLnRyaWdnZXIoJ2NoYW5nZScpO1xuICB9XG5cbiAgLCByZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zb3VyY2UgPSB0aGlzLnBhcnNlKCk7XG4gICAgdGhpcy5vcHRpb25zLml0ZW1zID0gdGhpcy5zb3VyY2UubGVuZ3RoO1xuICB9XG5cbiAgLCBsaXN0ZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLm9uKCdmb2N1cycsICAgICQucHJveHkodGhpcy5mb2N1cywgdGhpcykpXG4gICAgICAgIC5vbignYmx1cicsICAgICAkLnByb3h5KHRoaXMuYmx1ciwgdGhpcykpXG4gICAgICAgIC5vbigna2V5cHJlc3MnLCAkLnByb3h5KHRoaXMua2V5cHJlc3MsIHRoaXMpKVxuICAgICAgICAub24oJ2tleXVwJywgICAgJC5wcm94eSh0aGlzLmtleXVwLCB0aGlzKSk7XG5cbiAgICAgIGlmICh0aGlzLmV2ZW50U3VwcG9ydGVkKCdrZXlkb3duJykpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudC5vbigna2V5ZG93bicsICQucHJveHkodGhpcy5rZXlkb3duLCB0aGlzKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuJG1lbnVcbiAgICAgICAgLm9uKCdjbGljaycsICQucHJveHkodGhpcy5jbGljaywgdGhpcykpXG4gICAgICAgIC5vbignbW91c2VlbnRlcicsICdsaScsICQucHJveHkodGhpcy5tb3VzZWVudGVyLCB0aGlzKSlcbiAgICAgICAgLm9uKCdtb3VzZWxlYXZlJywgJ2xpJywgJC5wcm94eSh0aGlzLm1vdXNlbGVhdmUsIHRoaXMpKTtcblxuICAgICAgdGhpcy4kYnV0dG9uXG4gICAgICAgIC5vbignY2xpY2snLCAkLnByb3h5KHRoaXMudG9nZ2xlLCB0aGlzKSk7XG4gICAgfVxuXG4gICwgZXZlbnRTdXBwb3J0ZWQ6IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xuICAgICAgdmFyIGlzU3VwcG9ydGVkID0gZXZlbnROYW1lIGluIHRoaXMuJGVsZW1lbnQ7XG4gICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQuc2V0QXR0cmlidXRlKGV2ZW50TmFtZSwgJ3JldHVybjsnKTtcbiAgICAgICAgaXNTdXBwb3J0ZWQgPSB0eXBlb2YgdGhpcy4kZWxlbWVudFtldmVudE5hbWVdID09PSAnZnVuY3Rpb24nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzU3VwcG9ydGVkO1xuICAgIH1cblxuICAsIG1vdmU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIXRoaXMuc2hvd24pIHtyZXR1cm47fVxuXG4gICAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgOTogLy8gdGFiXG4gICAgICAgIGNhc2UgMTM6IC8vIGVudGVyXG4gICAgICAgIGNhc2UgMjc6IC8vIGVzY2FwZVxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDM4OiAvLyB1cCBhcnJvd1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnByZXYoKTtcbiAgICAgICAgICB0aGlzLmZpeE1lbnVTY3JvbGwoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDQwOiAvLyBkb3duIGFycm93XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgIHRoaXMuZml4TWVudVNjcm9sbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAsIGZpeE1lbnVTY3JvbGw6IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgYWN0aXZlID0gdGhpcy4kbWVudS5maW5kKCcuYWN0aXZlJyk7XG4gICAgICBpZihhY3RpdmUubGVuZ3RoKXtcbiAgICAgICAgICB2YXIgdG9wID0gYWN0aXZlLnBvc2l0aW9uKCkudG9wO1xuICAgICAgICAgIHZhciBib3R0b20gPSB0b3AgKyBhY3RpdmUuaGVpZ2h0KCk7XG4gICAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuJG1lbnUuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgdmFyIG1lbnVIZWlnaHQgPSB0aGlzLiRtZW51LmhlaWdodCgpO1xuICAgICAgICAgIGlmKGJvdHRvbSA+IG1lbnVIZWlnaHQpe1xuICAgICAgICAgICAgICB0aGlzLiRtZW51LnNjcm9sbFRvcChzY3JvbGxUb3AgKyBib3R0b20gLSBtZW51SGVpZ2h0KTtcbiAgICAgICAgICB9IGVsc2UgaWYodG9wIDwgMCl7XG4gICAgICAgICAgICAgIHRoaXMuJG1lbnUuc2Nyb2xsVG9wKHNjcm9sbFRvcCArIHRvcCk7XG4gICAgICAgICAgfVxuICAgICAgfVxuICB9XG5cbiAgLCBrZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5zdXBwcmVzc0tleVByZXNzUmVwZWF0ID0gfiQuaW5BcnJheShlLmtleUNvZGUsIFs0MCwzOCw5LDEzLDI3XSk7XG4gICAgICB0aGlzLm1vdmUoZSk7XG4gICAgfVxuXG4gICwga2V5cHJlc3M6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAodGhpcy5zdXBwcmVzc0tleVByZXNzUmVwZWF0KSB7cmV0dXJuO31cbiAgICAgIHRoaXMubW92ZShlKTtcbiAgICB9XG5cbiAgLCBrZXl1cDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHN3aXRjaChlLmtleUNvZGUpIHtcbiAgICAgICAgY2FzZSA0MDogLy8gZG93biBhcnJvd1xuICAgICAgICAgaWYgKCF0aGlzLnNob3duKXtcbiAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICAgICAgIH1cbiAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM5OiAvLyByaWdodCBhcnJvd1xuICAgICAgICBjYXNlIDM4OiAvLyB1cCBhcnJvd1xuICAgICAgICBjYXNlIDM3OiAvLyBsZWZ0IGFycm93XG4gICAgICAgIGNhc2UgMzY6IC8vIGhvbWVcbiAgICAgICAgY2FzZSAzNTogLy8gZW5kXG4gICAgICAgIGNhc2UgMTY6IC8vIHNoaWZ0XG4gICAgICAgIGNhc2UgMTc6IC8vIGN0cmxcbiAgICAgICAgY2FzZSAxODogLy8gYWx0XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA5OiAvLyB0YWJcbiAgICAgICAgY2FzZSAxMzogLy8gZW50ZXJcbiAgICAgICAgICBpZiAoIXRoaXMuc2hvd24pIHtyZXR1cm47fVxuICAgICAgICAgIHRoaXMuc2VsZWN0KCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAyNzogLy8gZXNjYXBlXG4gICAgICAgICAgaWYgKCF0aGlzLnNob3duKSB7cmV0dXJuO31cbiAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuY2xlYXJUYXJnZXQoKTtcbiAgICAgICAgICB0aGlzLmxvb2t1cCgpO1xuICAgICAgfVxuXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgLCBmb2N1czogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7XG4gICAgfVxuXG4gICwgYmx1cjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgdmFyIHZhbCA9IHRoaXMuJGVsZW1lbnQudmFsKCk7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWQgJiYgdmFsICE9PSAnJyApIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudC52YWwoJycpO1xuICAgICAgICB0aGlzLiRzb3VyY2UudmFsKCcnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgdGhpcy4kdGFyZ2V0LnZhbCgnJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMubW91c2Vkb3ZlciAmJiB0aGlzLnNob3duKSB7c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRoYXQuaGlkZSgpOyB9LCAyMDApO31cbiAgICB9XG5cbiAgLCBjbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNlbGVjdCgpO1xuICAgICAgdGhpcy4kZWxlbWVudC5mb2N1cygpO1xuICAgIH1cblxuICAsIG1vdXNlZW50ZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLm1vdXNlZG92ZXIgPSB0cnVlO1xuICAgICAgdGhpcy4kbWVudS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgLCBtb3VzZWxlYXZlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5tb3VzZWRvdmVyID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIC8qIENPTUJPQk9YIFBMVUdJTiBERUZJTklUSU9OXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuICAkLmZuLmNvbWJvYm94ID0gZnVuY3Rpb24gKCBvcHRpb24gKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXG4gICAgICAgICwgZGF0YSA9ICR0aGlzLmRhdGEoJ2NvbWJvYm94JylcbiAgICAgICAgLCBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb247XG4gICAgICBpZighZGF0YSkgeyR0aGlzLmRhdGEoJ2NvbWJvYm94JywgKGRhdGEgPSBuZXcgQ29tYm9ib3godGhpcywgb3B0aW9ucykpKTt9XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykge2RhdGFbb3B0aW9uXSgpO31cbiAgICB9KTtcbiAgfTtcblxuICAkLmZuLmNvbWJvYm94LmRlZmF1bHRzID0ge1xuICAgIGJzVmVyc2lvbjogJzMnXG4gICwgbWVudTogJzx1bCBjbGFzcz1cInR5cGVhaGVhZCB0eXBlYWhlYWQtbG9uZyBkcm9wZG93bi1tZW51XCI+PC91bD4nXG4gICwgaXRlbTogJzxsaT48YSBocmVmPVwiI1wiPjwvYT48L2xpPidcbiAgfTtcblxuICAkLmZuLmNvbWJvYm94LkNvbnN0cnVjdG9yID0gQ29tYm9ib3g7XG5cbn0oIHdpbmRvdy5qUXVlcnkgKTtcbiIsIi8qISA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgICAgICAgICAgICAgVkVSU0lPTiAgOS4xLjEgICAgICAgICAgICAgIFxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfdHlwZW9mKGEpe3JldHVybiBhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZhLmNvbnN0cnVjdG9yPT09U3ltYm9sP1wic3ltYm9sXCI6dHlwZW9mIGF9LyohID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogYm9vdHN0cmFwLXNsaWRlci5qc1xuICpcbiAqIE1haW50YWluZXJzOlxuICpcdFx0S3lsZSBLZW1wXG4gKlx0XHRcdC0gVHdpdHRlcjogQHNlaXlyaWFcbiAqXHRcdFx0LSBHaXRodWI6ICBzZWl5cmlhXG4gKlx0XHRSb2hpdCBLYWxrdXJcbiAqXHRcdFx0LSBUd2l0dGVyOiBAUm92b2x1dGlvbmFyeVxuICpcdFx0XHQtIEdpdGh1YjogIHJvdm9sdXRpb25cbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuIWZ1bmN0aW9uKGEpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW1wianF1ZXJ5XCJdLGEpO2Vsc2UgaWYoXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgbW9kdWxlP1widW5kZWZpbmVkXCI6X3R5cGVvZihtb2R1bGUpKSYmbW9kdWxlLmV4cG9ydHMpe3ZhciBiO3RyeXtiPXJlcXVpcmUoXCJqcXVlcnlcIil9Y2F0Y2goYyl7Yj1udWxsfW1vZHVsZS5leHBvcnRzPWEoYil9ZWxzZSB3aW5kb3cmJih3aW5kb3cuU2xpZGVyPWEod2luZG93LmpRdWVyeSkpfShmdW5jdGlvbihhKXt2YXIgYj1cInNsaWRlclwiLGM9XCJib290c3RyYXBTbGlkZXJcIjt3aW5kb3cuY29uc29sZXx8KHdpbmRvdy5jb25zb2xlPXt9KSx3aW5kb3cuY29uc29sZS5sb2d8fCh3aW5kb3cuY29uc29sZS5sb2c9ZnVuY3Rpb24oKXt9KSx3aW5kb3cuY29uc29sZS53YXJufHwod2luZG93LmNvbnNvbGUud2Fybj1mdW5jdGlvbigpe30pO3ZhciBkO3JldHVybiBmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7fWZ1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYyhiKXtiLnByb3RvdHlwZS5vcHRpb258fChiLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24oYil7YS5pc1BsYWluT2JqZWN0KGIpJiYodGhpcy5vcHRpb25zPWEuZXh0ZW5kKCEwLHRoaXMub3B0aW9ucyxiKSl9KX1mdW5jdGlvbiBlKGIsYyl7YS5mbltiXT1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7Zm9yKHZhciBnPWQuY2FsbChhcmd1bWVudHMsMSksaD0wLGk9dGhpcy5sZW5ndGg7aT5oO2grKyl7dmFyIGo9dGhpc1toXSxrPWEuZGF0YShqLGIpO2lmKGspaWYoYS5pc0Z1bmN0aW9uKGtbZV0pJiZcIl9cIiE9PWUuY2hhckF0KDApKXt2YXIgbD1rW2VdLmFwcGx5KGssZyk7aWYodm9pZCAwIT09bCYmbCE9PWspcmV0dXJuIGx9ZWxzZSBmKFwibm8gc3VjaCBtZXRob2QgJ1wiK2UrXCInIGZvciBcIitiK1wiIGluc3RhbmNlXCIpO2Vsc2UgZihcImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gXCIrYitcIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgYXR0ZW1wdGVkIHRvIGNhbGwgJ1wiK2UrXCInXCIpfXJldHVybiB0aGlzfXZhciBtPXRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGQ9YS5kYXRhKHRoaXMsYik7cmV0dXJuIGQ/KGQub3B0aW9uKGUpLGQuX2luaXQoKSk6KGQ9bmV3IGModGhpcyxlKSxhLmRhdGEodGhpcyxiLGQpKSxhKHRoaXMpfSk7cmV0dXJuIW18fG0ubGVuZ3RoPjE/bTptWzBdfX1pZihhKXt2YXIgZj1cInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZT9iOmZ1bmN0aW9uKGEpe2NvbnNvbGUuZXJyb3IoYSl9O3JldHVybiBhLmJyaWRnZXQ9ZnVuY3Rpb24oYSxiKXtjKGIpLGUoYSxiKX0sYS5icmlkZ2V0fX12YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2U7YyhhKX0oYSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZShiLGMpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgYz1cImRhdGEtc2xpZGVyLVwiK2IucmVwbGFjZSgvXy9nLFwiLVwiKSxkPWEuZ2V0QXR0cmlidXRlKGMpO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShkKX1jYXRjaChlKXtyZXR1cm4gZH19dGhpcy5fc3RhdGU9e3ZhbHVlOm51bGwsZW5hYmxlZDpudWxsLG9mZnNldDpudWxsLHNpemU6bnVsbCxwZXJjZW50YWdlOm51bGwsaW5EcmFnOiExLG92ZXI6ITF9LFwic3RyaW5nXCI9PXR5cGVvZiBiP3RoaXMuZWxlbWVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIpOmIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKHRoaXMuZWxlbWVudD1iKSxjPWM/Yzp7fTtmb3IodmFyIGU9T2JqZWN0LmtleXModGhpcy5kZWZhdWx0T3B0aW9ucyksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgaD1lW2ZdLGk9Y1toXTtpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBpP2k6ZCh0aGlzLmVsZW1lbnQsaCksaT1udWxsIT09aT9pOnRoaXMuZGVmYXVsdE9wdGlvbnNbaF0sdGhpcy5vcHRpb25zfHwodGhpcy5vcHRpb25zPXt9KSx0aGlzLm9wdGlvbnNbaF09aX1cInZlcnRpY2FsXCIhPT10aGlzLm9wdGlvbnMub3JpZW50YXRpb258fFwidG9wXCIhPT10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbiYmXCJib3R0b21cIiE9PXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uP1wiaG9yaXpvbnRhbFwiIT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9ufHxcImxlZnRcIiE9PXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uJiZcInJpZ2h0XCIhPT10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbnx8KHRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uPVwidG9wXCIpOnRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uPVwicmlnaHRcIjt2YXIgaixrLGwsbSxuLG89dGhpcy5lbGVtZW50LnN0eWxlLndpZHRoLHA9ITEscT10aGlzLmVsZW1lbnQucGFyZW50Tm9kZTtpZih0aGlzLnNsaWRlckVsZW0pcD0hMDtlbHNle3RoaXMuc2xpZGVyRWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuc2xpZGVyRWxlbS5jbGFzc05hbWU9XCJzbGlkZXJcIjt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3IuY2xhc3NOYW1lPVwic2xpZGVyLXRyYWNrXCIsaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGsuY2xhc3NOYW1lPVwic2xpZGVyLXRyYWNrLWxvd1wiLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxqLmNsYXNzTmFtZT1cInNsaWRlci1zZWxlY3Rpb25cIixsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbC5jbGFzc05hbWU9XCJzbGlkZXItdHJhY2staGlnaFwiLG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxtLmNsYXNzTmFtZT1cInNsaWRlci1oYW5kbGUgbWluLXNsaWRlci1oYW5kbGVcIixtLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInNsaWRlclwiKSxtLnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVtaW5cIix0aGlzLm9wdGlvbnMubWluKSxtLnNldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVtYXhcIix0aGlzLm9wdGlvbnMubWF4KSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbi5jbGFzc05hbWU9XCJzbGlkZXItaGFuZGxlIG1heC1zbGlkZXItaGFuZGxlXCIsbi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJzbGlkZXJcIiksbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbWluXCIsdGhpcy5vcHRpb25zLm1pbiksbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbWF4XCIsdGhpcy5vcHRpb25zLm1heCksci5hcHBlbmRDaGlsZChrKSxyLmFwcGVuZENoaWxkKGopLHIuYXBwZW5kQ2hpbGQobCk7dmFyIHM9QXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMubGFiZWxsZWRieSk7aWYocyYmdGhpcy5vcHRpb25zLmxhYmVsbGVkYnlbMF0mJm0uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsdGhpcy5vcHRpb25zLmxhYmVsbGVkYnlbMF0pLHMmJnRoaXMub3B0aW9ucy5sYWJlbGxlZGJ5WzFdJiZuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiLHRoaXMub3B0aW9ucy5sYWJlbGxlZGJ5WzFdKSwhcyYmdGhpcy5vcHRpb25zLmxhYmVsbGVkYnkmJihtLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiLHRoaXMub3B0aW9ucy5sYWJlbGxlZGJ5KSxuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiLHRoaXMub3B0aW9ucy5sYWJlbGxlZGJ5KSksdGhpcy50aWNrcz1bXSxBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy50aWNrcykmJnRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg+MCl7Zm9yKHRoaXMudGlja3NDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnRpY2tzQ29udGFpbmVyLmNsYXNzTmFtZT1cInNsaWRlci10aWNrLWNvbnRhaW5lclwiLGY9MDtmPHRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg7ZisrKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NOYW1lPVwic2xpZGVyLXRpY2tcIix0aGlzLnRpY2tzLnB1c2godCksdGhpcy50aWNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0KX1qLmNsYXNzTmFtZSs9XCIgdGljay1zbGlkZXItc2VsZWN0aW9uXCJ9aWYodGhpcy50aWNrTGFiZWxzPVtdLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzX2xhYmVscykmJnRoaXMub3B0aW9ucy50aWNrc19sYWJlbHMubGVuZ3RoPjApZm9yKHRoaXMudGlja0xhYmVsQ29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy50aWNrTGFiZWxDb250YWluZXIuY2xhc3NOYW1lPVwic2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVyXCIsZj0wO2Y8dGhpcy5vcHRpb25zLnRpY2tzX2xhYmVscy5sZW5ndGg7ZisrKXt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHY9MD09PXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoLHc9dGhpcy5vcHRpb25zLnJldmVyc2VkJiZ2P3RoaXMub3B0aW9ucy50aWNrc19sYWJlbHMubGVuZ3RoLShmKzEpOmY7dS5jbGFzc05hbWU9XCJzbGlkZXItdGljay1sYWJlbFwiLHUuaW5uZXJIVE1MPXRoaXMub3B0aW9ucy50aWNrc19sYWJlbHNbd10sdGhpcy50aWNrTGFiZWxzLnB1c2godSksdGhpcy50aWNrTGFiZWxDb250YWluZXIuYXBwZW5kQ2hpbGQodSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtiLmNsYXNzTmFtZT1cInRvb2x0aXAtYXJyb3dcIjt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPVwidG9vbHRpcC1pbm5lclwiLGEuYXBwZW5kQ2hpbGQoYiksYS5hcHBlbmRDaGlsZChjKX0seT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3kuY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1haW5cIix5LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSx4KHkpO3ZhciB6PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ei5jbGFzc05hbWU9XCJ0b29sdGlwIHRvb2x0aXAtbWluXCIsei5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIikseCh6KTt2YXIgQT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO0EuY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1heFwiLEEuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLHgoQSksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKHIpLHRoaXMuc2xpZGVyRWxlbS5hcHBlbmRDaGlsZCh5KSx0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQoeiksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKEEpLHRoaXMudGlja0xhYmVsQ29udGFpbmVyJiZ0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQodGhpcy50aWNrTGFiZWxDb250YWluZXIpLHRoaXMudGlja3NDb250YWluZXImJnRoaXMuc2xpZGVyRWxlbS5hcHBlbmRDaGlsZCh0aGlzLnRpY2tzQ29udGFpbmVyKSx0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQobSksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKG4pLHEuaW5zZXJ0QmVmb3JlKHRoaXMuc2xpZGVyRWxlbSx0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifWlmKGEmJih0aGlzLiRlbGVtZW50PWEodGhpcy5lbGVtZW50KSx0aGlzLiRzbGlkZXJFbGVtPWEodGhpcy5zbGlkZXJFbGVtKSksdGhpcy5ldmVudFRvQ2FsbGJhY2tNYXA9e30sdGhpcy5zbGlkZXJFbGVtLmlkPXRoaXMub3B0aW9ucy5pZCx0aGlzLnRvdWNoQ2FwYWJsZT1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCx0aGlzLnRvdWNoWD0wLHRoaXMudG91Y2hZPTAsdGhpcy50b29sdGlwPXRoaXMuc2xpZGVyRWxlbS5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtbWFpblwiKSx0aGlzLnRvb2x0aXBJbm5lcj10aGlzLnRvb2x0aXAucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLWlubmVyXCIpLHRoaXMudG9vbHRpcF9taW49dGhpcy5zbGlkZXJFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1taW5cIiksdGhpcy50b29sdGlwSW5uZXJfbWluPXRoaXMudG9vbHRpcF9taW4ucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLWlubmVyXCIpLHRoaXMudG9vbHRpcF9tYXg9dGhpcy5zbGlkZXJFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1tYXhcIiksdGhpcy50b29sdGlwSW5uZXJfbWF4PXRoaXMudG9vbHRpcF9tYXgucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLWlubmVyXCIpLGdbdGhpcy5vcHRpb25zLnNjYWxlXSYmKHRoaXMub3B0aW9ucy5zY2FsZT1nW3RoaXMub3B0aW9ucy5zY2FsZV0pLHA9PT0hMCYmKHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci1ob3Jpem9udGFsXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci12ZXJ0aWNhbFwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXAsXCJoaWRlXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9taW4sXCJoaWRlXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJoaWRlXCIpLFtcImxlZnRcIixcInRvcFwiLFwid2lkdGhcIixcImhlaWdodFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuX3JlbW92ZVByb3BlcnR5KHRoaXMudHJhY2tMb3csYSksdGhpcy5fcmVtb3ZlUHJvcGVydHkodGhpcy50cmFja1NlbGVjdGlvbixhKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eSh0aGlzLnRyYWNrSGlnaCxhKX0sdGhpcyksW3RoaXMuaGFuZGxlMSx0aGlzLmhhbmRsZTJdLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcImxlZnRcIiksdGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcInRvcFwiKX0sdGhpcyksW3RoaXMudG9vbHRpcCx0aGlzLnRvb2x0aXBfbWluLHRoaXMudG9vbHRpcF9tYXhdLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcImxlZnRcIiksdGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcInRvcFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibWFyZ2luLWxlZnRcIiksdGhpcy5fcmVtb3ZlUHJvcGVydHkoYSxcIm1hcmdpbi10b3BcIiksdGhpcy5fcmVtb3ZlQ2xhc3MoYSxcInJpZ2h0XCIpLHRoaXMuX3JlbW92ZUNsYXNzKGEsXCJ0b3BcIil9LHRoaXMpKSxcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/KHRoaXMuX2FkZENsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci12ZXJ0aWNhbFwiKSx0aGlzLnN0eWxlUG9zPVwidG9wXCIsdGhpcy5tb3VzZVBvcz1cInBhZ2VZXCIsdGhpcy5zaXplUG9zPVwib2Zmc2V0SGVpZ2h0XCIpOih0aGlzLl9hZGRDbGFzcyh0aGlzLnNsaWRlckVsZW0sXCJzbGlkZXItaG9yaXpvbnRhbFwiKSx0aGlzLnNsaWRlckVsZW0uc3R5bGUud2lkdGg9byx0aGlzLm9wdGlvbnMub3JpZW50YXRpb249XCJob3Jpem9udGFsXCIsdGhpcy5zdHlsZVBvcz1cImxlZnRcIix0aGlzLm1vdXNlUG9zPVwicGFnZVhcIix0aGlzLnNpemVQb3M9XCJvZmZzZXRXaWR0aFwiKSx0aGlzLl9zZXRUb29sdGlwUG9zaXRpb24oKSxBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy50aWNrcykmJnRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg+MCYmKHRoaXMub3B0aW9ucy5tYXg9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpLHRoaXMub3B0aW9ucy5taW49TWF0aC5taW4uYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpKSxBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy52YWx1ZSk/KHRoaXMub3B0aW9ucy5yYW5nZT0hMCx0aGlzLl9zdGF0ZS52YWx1ZT10aGlzLm9wdGlvbnMudmFsdWUpOnRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZT1bdGhpcy5vcHRpb25zLnZhbHVlLHRoaXMub3B0aW9ucy5tYXhdOnRoaXMuX3N0YXRlLnZhbHVlPXRoaXMub3B0aW9ucy52YWx1ZSx0aGlzLnRyYWNrTG93PWt8fHRoaXMudHJhY2tMb3csdGhpcy50cmFja1NlbGVjdGlvbj1qfHx0aGlzLnRyYWNrU2VsZWN0aW9uLHRoaXMudHJhY2tIaWdoPWx8fHRoaXMudHJhY2tIaWdoLFwibm9uZVwiPT09dGhpcy5vcHRpb25zLnNlbGVjdGlvbiYmKHRoaXMuX2FkZENsYXNzKHRoaXMudHJhY2tMb3csXCJoaWRlXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudHJhY2tTZWxlY3Rpb24sXCJoaWRlXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudHJhY2tIaWdoLFwiaGlkZVwiKSksdGhpcy5oYW5kbGUxPW18fHRoaXMuaGFuZGxlMSx0aGlzLmhhbmRsZTI9bnx8dGhpcy5oYW5kbGUyLHA9PT0hMClmb3IodGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5oYW5kbGUxLFwicm91bmQgdHJpYW5nbGVcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5oYW5kbGUyLFwicm91bmQgdHJpYW5nbGUgaGlkZVwiKSxmPTA7Zjx0aGlzLnRpY2tzLmxlbmd0aDtmKyspdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50aWNrc1tmXSxcInJvdW5kIHRyaWFuZ2xlIGhpZGVcIik7dmFyIEI9W1wicm91bmRcIixcInRyaWFuZ2xlXCIsXCJjdXN0b21cIl0sQz0tMSE9PUIuaW5kZXhPZih0aGlzLm9wdGlvbnMuaGFuZGxlKTtpZihDKWZvcih0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZTEsdGhpcy5vcHRpb25zLmhhbmRsZSksdGhpcy5fYWRkQ2xhc3ModGhpcy5oYW5kbGUyLHRoaXMub3B0aW9ucy5oYW5kbGUpLGY9MDtmPHRoaXMudGlja3MubGVuZ3RoO2YrKyl0aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2ZdLHRoaXMub3B0aW9ucy5oYW5kbGUpO3RoaXMuX3N0YXRlLm9mZnNldD10aGlzLl9vZmZzZXQodGhpcy5zbGlkZXJFbGVtKSx0aGlzLl9zdGF0ZS5zaXplPXRoaXMuc2xpZGVyRWxlbVt0aGlzLnNpemVQb3NdLHRoaXMuc2V0VmFsdWUodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuaGFuZGxlMUtleWRvd249dGhpcy5fa2V5ZG93bi5iaW5kKHRoaXMsMCksdGhpcy5oYW5kbGUxLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5oYW5kbGUxS2V5ZG93biwhMSksdGhpcy5oYW5kbGUyS2V5ZG93bj10aGlzLl9rZXlkb3duLmJpbmQodGhpcywxKSx0aGlzLmhhbmRsZTIuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLmhhbmRsZTJLZXlkb3duLCExKSx0aGlzLm1vdXNlZG93bj10aGlzLl9tb3VzZWRvd24uYmluZCh0aGlzKSx0aGlzLnRvdWNoc3RhcnQ9dGhpcy5fdG91Y2hzdGFydC5iaW5kKHRoaXMpLHRoaXMudG91Y2htb3ZlPXRoaXMuX3RvdWNobW92ZS5iaW5kKHRoaXMpLHRoaXMudG91Y2hDYXBhYmxlJiYodGhpcy5zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy50b3VjaHN0YXJ0LCExKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMudG91Y2htb3ZlLCExKSksdGhpcy5zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm1vdXNlZG93biwhMSksdGhpcy5yZXNpemU9dGhpcy5fcmVzaXplLmJpbmQodGhpcyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlc2l6ZSwhMSksXCJoaWRlXCI9PT10aGlzLm9wdGlvbnMudG9vbHRpcD8odGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWluLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaGlkZVwiKSk6XCJhbHdheXNcIj09PXRoaXMub3B0aW9ucy50b29sdGlwPyh0aGlzLl9zaG93VG9vbHRpcCgpLHRoaXMuX2Fsd2F5c1Nob3dUb29sdGlwPSEwKToodGhpcy5zaG93VG9vbHRpcD10aGlzLl9zaG93VG9vbHRpcC5iaW5kKHRoaXMpLHRoaXMuaGlkZVRvb2x0aXA9dGhpcy5faGlkZVRvb2x0aXAuYmluZCh0aGlzKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0aGlzLnNob3dUb29sdGlwLCExKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLmhpZGVUb29sdGlwLCExKSx0aGlzLmhhbmRsZTEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5oYW5kbGUxLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuc2hvd1Rvb2x0aXAsITEpLHRoaXMuaGFuZGxlMi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuaGlkZVRvb2x0aXAsITEpKSx0aGlzLm9wdGlvbnMuZW5hYmxlZD90aGlzLmVuYWJsZSgpOnRoaXMuZGlzYWJsZSgpfXZhciBmPXtmb3JtYXRJbnZhbGlkSW5wdXRFcnJvck1zZzpmdW5jdGlvbihhKXtyZXR1cm5cIkludmFsaWQgaW5wdXQgdmFsdWUgJ1wiK2ErXCInIHBhc3NlZCBpblwifSxjYWxsaW5nQ29udGV4dE5vdFNsaWRlckluc3RhbmNlOlwiQ2FsbGluZyBjb250ZXh0IGVsZW1lbnQgZG9lcyBub3QgaGF2ZSBpbnN0YW5jZSBvZiBTbGlkZXIgYm91bmQgdG8gaXQuIENoZWNrIHlvdXIgY29kZSB0byBtYWtlIHN1cmUgdGhlIEpRdWVyeSBvYmplY3QgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbCB0byB0aGUgc2xpZGVyKCkgaW5pdGlhbGl6ZXIgaXMgY2FsbGluZyB0aGUgbWV0aG9kXCJ9LGc9e2xpbmVhcjp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1hLzEwMCoodGhpcy5vcHRpb25zLm1heC10aGlzLm9wdGlvbnMubWluKSxjPSEwO2lmKHRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoPjApe2Zvcih2YXIgZCxlLGYsZz0wLGg9MTtoPHRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoO2grKylpZihhPD10aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zW2hdKXtkPXRoaXMub3B0aW9ucy50aWNrc1toLTFdLGY9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toLTFdLGU9dGhpcy5vcHRpb25zLnRpY2tzW2hdLGc9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toXTticmVha312YXIgaT0oYS1mKS8oZy1mKTtiPWQraSooZS1kKSxjPSExfXZhciBqPWM/dGhpcy5vcHRpb25zLm1pbjowLGs9aitNYXRoLnJvdW5kKGIvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwO3JldHVybiBrPHRoaXMub3B0aW9ucy5taW4/dGhpcy5vcHRpb25zLm1pbjprPnRoaXMub3B0aW9ucy5tYXg/dGhpcy5vcHRpb25zLm1heDprfSx0b1BlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5vcHRpb25zLm1heD09PXRoaXMub3B0aW9ucy5taW4pcmV0dXJuIDA7aWYodGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9ucy5sZW5ndGg+MCl7Zm9yKHZhciBiLGMsZCxlPTAsZj0wO2Y8dGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aDtmKyspaWYoYTw9dGhpcy5vcHRpb25zLnRpY2tzW2ZdKXtiPWY+MD90aGlzLm9wdGlvbnMudGlja3NbZi0xXTowLGQ9Zj4wP3RoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZi0xXTowLGM9dGhpcy5vcHRpb25zLnRpY2tzW2ZdLGU9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tmXTticmVha31pZihmPjApe3ZhciBnPShhLWIpLyhjLWIpO3JldHVybiBkK2cqKGUtZCl9fXJldHVybiAxMDAqKGEtdGhpcy5vcHRpb25zLm1pbikvKHRoaXMub3B0aW9ucy5tYXgtdGhpcy5vcHRpb25zLm1pbil9fSxsb2dhcml0aG1pYzp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj0wPT09dGhpcy5vcHRpb25zLm1pbj8wOk1hdGgubG9nKHRoaXMub3B0aW9ucy5taW4pLGM9TWF0aC5sb2codGhpcy5vcHRpb25zLm1heCksZD1NYXRoLmV4cChiKyhjLWIpKmEvMTAwKTtyZXR1cm4gZD10aGlzLm9wdGlvbnMubWluK01hdGgucm91bmQoKGQtdGhpcy5vcHRpb25zLm1pbikvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwLGQ8dGhpcy5vcHRpb25zLm1pbj90aGlzLm9wdGlvbnMubWluOmQ+dGhpcy5vcHRpb25zLm1heD90aGlzLm9wdGlvbnMubWF4OmR9LHRvUGVyY2VudGFnZTpmdW5jdGlvbihhKXtpZih0aGlzLm9wdGlvbnMubWF4PT09dGhpcy5vcHRpb25zLm1pbilyZXR1cm4gMDt2YXIgYj1NYXRoLmxvZyh0aGlzLm9wdGlvbnMubWF4KSxjPTA9PT10aGlzLm9wdGlvbnMubWluPzA6TWF0aC5sb2codGhpcy5vcHRpb25zLm1pbiksZD0wPT09YT8wOk1hdGgubG9nKGEpO3JldHVybiAxMDAqKGQtYykvKGItYyl9fX07ZD1mdW5jdGlvbihhLGIpe3JldHVybiBlLmNhbGwodGhpcyxhLGIpLHRoaXN9LGQucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbigpe30sY29uc3RydWN0b3I6ZCxkZWZhdWx0T3B0aW9uczp7aWQ6XCJcIixtaW46MCxtYXg6MTAsc3RlcDoxLHByZWNpc2lvbjowLG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLHZhbHVlOjUscmFuZ2U6ITEsc2VsZWN0aW9uOlwiYmVmb3JlXCIsdG9vbHRpcDpcInNob3dcIix0b29sdGlwX3NwbGl0OiExLGhhbmRsZTpcInJvdW5kXCIscmV2ZXJzZWQ6ITEsZW5hYmxlZDohMCxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/YVswXStcIiA6IFwiK2FbMV06YX0sbmF0dXJhbF9hcnJvd19rZXlzOiExLHRpY2tzOltdLHRpY2tzX3Bvc2l0aW9uczpbXSx0aWNrc19sYWJlbHM6W10sdGlja3Nfc25hcF9ib3VuZHM6MCxzY2FsZTpcImxpbmVhclwiLGZvY3VzOiExLHRvb2x0aXBfcG9zaXRpb246bnVsbCxsYWJlbGxlZGJ5Om51bGx9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zbGlkZXJFbGVtfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMucmFuZ2U/dGhpcy5fc3RhdGUudmFsdWU6dGhpcy5fc3RhdGUudmFsdWVbMF19LHNldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXthfHwoYT0wKTt2YXIgZD10aGlzLmdldFZhbHVlKCk7dGhpcy5fc3RhdGUudmFsdWU9dGhpcy5fdmFsaWRhdGVJbnB1dFZhbHVlKGEpO3ZhciBlPXRoaXMuX2FwcGx5UHJlY2lzaW9uLmJpbmQodGhpcyk7dGhpcy5vcHRpb25zLnJhbmdlPyh0aGlzLl9zdGF0ZS52YWx1ZVswXT1lKHRoaXMuX3N0YXRlLnZhbHVlWzBdKSx0aGlzLl9zdGF0ZS52YWx1ZVsxXT1lKHRoaXMuX3N0YXRlLnZhbHVlWzFdKSx0aGlzLl9zdGF0ZS52YWx1ZVswXT1NYXRoLm1heCh0aGlzLm9wdGlvbnMubWluLE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsdGhpcy5fc3RhdGUudmFsdWVbMF0pKSx0aGlzLl9zdGF0ZS52YWx1ZVsxXT1NYXRoLm1heCh0aGlzLm9wdGlvbnMubWluLE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsdGhpcy5fc3RhdGUudmFsdWVbMV0pKSk6KHRoaXMuX3N0YXRlLnZhbHVlPWUodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuX3N0YXRlLnZhbHVlPVtNYXRoLm1heCh0aGlzLm9wdGlvbnMubWluLE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsdGhpcy5fc3RhdGUudmFsdWUpKV0sdGhpcy5fYWRkQ2xhc3ModGhpcy5oYW5kbGUyLFwiaGlkZVwiKSxcImFmdGVyXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uP3RoaXMuX3N0YXRlLnZhbHVlWzFdPXRoaXMub3B0aW9ucy5tYXg6dGhpcy5fc3RhdGUudmFsdWVbMV09dGhpcy5vcHRpb25zLm1pbiksdGhpcy5vcHRpb25zLm1heD50aGlzLm9wdGlvbnMubWluP3RoaXMuX3N0YXRlLnBlcmNlbnRhZ2U9W3RoaXMuX3RvUGVyY2VudGFnZSh0aGlzLl9zdGF0ZS52YWx1ZVswXSksdGhpcy5fdG9QZXJjZW50YWdlKHRoaXMuX3N0YXRlLnZhbHVlWzFdKSwxMDAqdGhpcy5vcHRpb25zLnN0ZXAvKHRoaXMub3B0aW9ucy5tYXgtdGhpcy5vcHRpb25zLm1pbildOnRoaXMuX3N0YXRlLnBlcmNlbnRhZ2U9WzAsMCwxMDBdLHRoaXMuX2xheW91dCgpO3ZhciBmPXRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZTp0aGlzLl9zdGF0ZS52YWx1ZVswXTtyZXR1cm4gdGhpcy5fc2V0RGF0YVZhbChmKSxiPT09ITAmJnRoaXMuX3RyaWdnZXIoXCJzbGlkZVwiLGYpLGQhPT1mJiZjPT09ITAmJnRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIix7b2xkVmFsdWU6ZCxuZXdWYWx1ZTpmfSksdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZVNsaWRlckV2ZW50SGFuZGxlcnMoKSx0aGlzLnNsaWRlckVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fY2xlYW5VcEV2ZW50Q2FsbGJhY2tzTWFwKCksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGFcIiksYSYmKHRoaXMuX3VuYmluZEpRdWVyeUV2ZW50SGFuZGxlcnMoKSx0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoXCJzbGlkZXJcIikpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITEsdGhpcy5oYW5kbGUxLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpLHRoaXMuaGFuZGxlMi5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnNsaWRlckVsZW0sXCJzbGlkZXItZGlzYWJsZWRcIiksdGhpcy5fdHJpZ2dlcihcInNsaWRlRGlzYWJsZWRcIiksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITAsdGhpcy5oYW5kbGUxLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5oYW5kbGUyLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLWRpc2FibGVkXCIpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZUVuYWJsZWRcIiksdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKSx0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZW5hYmxlZH0sb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyKGEsYiksdGhpc30sb2ZmOmZ1bmN0aW9uKGIsYyl7YT8odGhpcy4kZWxlbWVudC5vZmYoYixjKSx0aGlzLiRzbGlkZXJFbGVtLm9mZihiLGMpKTp0aGlzLl91bmJpbmROb25RdWVyeUV2ZW50SGFuZGxlcihiLGMpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5vcHRpb25zW2FdOnRoaXMub3B0aW9uc30sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub3B0aW9uc1thXT1iLHRoaXN9LHJlZnJlc2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVycygpLGUuY2FsbCh0aGlzLHRoaXMuZWxlbWVudCx0aGlzLm9wdGlvbnMpLGEmJmEuZGF0YSh0aGlzLmVsZW1lbnQsXCJzbGlkZXJcIix0aGlzKSx0aGlzfSxyZWxheW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNpemUoKSx0aGlzLl9sYXlvdXQoKSx0aGlzfSxfcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuaGFuZGxlMS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMUtleWRvd24sITEpLHRoaXMuaGFuZGxlMi5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMktleWRvd24sITEpLHRoaXMuc2hvd1Rvb2x0aXAmJih0aGlzLmhhbmRsZTEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuc2hvd1Rvb2x0aXAsITEpKSx0aGlzLmhpZGVUb29sdGlwJiYodGhpcy5oYW5kbGUxLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSkpLHRoaXMuc2hvd1Rvb2x0aXAmJnRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMuc2hvd1Rvb2x0aXAsITEpLHRoaXMuaGlkZVRvb2x0aXAmJnRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLHRoaXMuaGlkZVRvb2x0aXAsITEpLHRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMudG91Y2hzdGFydCwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLnRvdWNobW92ZSwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm1vdXNlZG93biwhMSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlc2l6ZSwhMSl9LF9iaW5kTm9uUXVlcnlFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT10aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXSYmKHRoaXMuZXZlbnRUb0NhbGxiYWNrTWFwW2FdPVtdKSx0aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXS5wdXNoKGIpfSxfdW5iaW5kTm9uUXVlcnlFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXTtpZih2b2lkIDAhPT1jKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKGNbZF09PT1iKXtjLnNwbGljZShkLDEpO2JyZWFrfX0sX2NsZWFuVXBFdmVudENhbGxiYWNrc01hcDpmdW5jdGlvbigpe2Zvcih2YXIgYT1PYmplY3Qua2V5cyh0aGlzLmV2ZW50VG9DYWxsYmFja01hcCksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO3RoaXMuZXZlbnRUb0NhbGxiYWNrTWFwW2NdPW51bGx9fSxfc2hvd1Rvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMudG9vbHRpcF9zcGxpdD09PSExPyh0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXAsXCJpblwiKSx0aGlzLnRvb2x0aXBfbWluLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy50b29sdGlwX21heC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKToodGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21pbixcImluXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJpblwiKSx0aGlzLnRvb2x0aXAuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksdGhpcy5fc3RhdGUub3Zlcj0hMH0sX2hpZGVUb29sdGlwOmZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUuaW5EcmFnPT09ITEmJnRoaXMuYWx3YXlzU2hvd1Rvb2x0aXAhPT0hMCYmKHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcCxcImluXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9taW4sXCJpblwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaW5cIikpLHRoaXMuX3N0YXRlLm92ZXI9ITF9LF9sYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYTtpZihhPXRoaXMub3B0aW9ucy5yZXZlcnNlZD9bMTAwLXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0sdGhpcy5vcHRpb25zLnJhbmdlPzEwMC10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdOnRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV1dOlt0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdLHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV1dLHRoaXMuaGFuZGxlMS5zdHlsZVt0aGlzLnN0eWxlUG9zXT1hWzBdK1wiJVwiLHRoaXMuaGFuZGxlMS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbm93XCIsdGhpcy5fc3RhdGUudmFsdWVbMF0pLHRoaXMuaGFuZGxlMi5zdHlsZVt0aGlzLnN0eWxlUG9zXT1hWzFdK1wiJVwiLHRoaXMuaGFuZGxlMi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbm93XCIsdGhpcy5fc3RhdGUudmFsdWVbMV0pLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzKSYmdGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aD4wKXt2YXIgYj1cInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/XCJoZWlnaHRcIjpcIndpZHRoXCIsYz1cInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/XCJtYXJnaW5Ub3BcIjpcIm1hcmdpbkxlZnRcIixkPXRoaXMuX3N0YXRlLnNpemUvKHRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGgtMSk7aWYodGhpcy50aWNrTGFiZWxDb250YWluZXIpe3ZhciBlPTA7aWYoMD09PXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnMubGVuZ3RoKVwidmVydGljYWxcIiE9PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbiYmKHRoaXMudGlja0xhYmVsQ29udGFpbmVyLnN0eWxlW2NdPS1kLzIrXCJweFwiKSxlPXRoaXMudGlja0xhYmVsQ29udGFpbmVyLm9mZnNldEhlaWdodDtlbHNlIGZvcihmPTA7Zjx0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aDtmKyspdGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1tmXS5vZmZzZXRIZWlnaHQ+ZSYmKGU9dGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1tmXS5vZmZzZXRIZWlnaHQpO1wiaG9yaXpvbnRhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uJiYodGhpcy5zbGlkZXJFbGVtLnN0eWxlLm1hcmdpbkJvdHRvbT1lK1wicHhcIil9Zm9yKHZhciBmPTA7Zjx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2YrKyl7dmFyIGc9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tmXXx8dGhpcy5fdG9QZXJjZW50YWdlKHRoaXMub3B0aW9ucy50aWNrc1tmXSk7dGhpcy5vcHRpb25zLnJldmVyc2VkJiYoZz0xMDAtZyksdGhpcy50aWNrc1tmXS5zdHlsZVt0aGlzLnN0eWxlUG9zXT1nK1wiJVwiLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudGlja3NbZl0sXCJpbi1zZWxlY3Rpb25cIiksdGhpcy5vcHRpb25zLnJhbmdlP2c+PWFbMF0mJmc8PWFbMV0mJnRoaXMuX2FkZENsYXNzKHRoaXMudGlja3NbZl0sXCJpbi1zZWxlY3Rpb25cIik6XCJhZnRlclwiPT09dGhpcy5vcHRpb25zLnNlbGVjdGlvbiYmZz49YVswXT90aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2ZdLFwiaW4tc2VsZWN0aW9uXCIpOlwiYmVmb3JlXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uJiZnPD1hWzBdJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2ZdLFwiaW4tc2VsZWN0aW9uXCIpLHRoaXMudGlja0xhYmVsc1tmXSYmKHRoaXMudGlja0xhYmVsc1tmXS5zdHlsZVtiXT1kK1wicHhcIixcInZlcnRpY2FsXCIhPT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJnZvaWQgMCE9PXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZl0/KHRoaXMudGlja0xhYmVsc1tmXS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy50aWNrTGFiZWxzW2ZdLnN0eWxlW3RoaXMuc3R5bGVQb3NdPWcrXCIlXCIsdGhpcy50aWNrTGFiZWxzW2ZdLnN0eWxlW2NdPS1kLzIrXCJweFwiKTpcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJih0aGlzLnRpY2tMYWJlbHNbZl0uc3R5bGUubWFyZ2luTGVmdD10aGlzLnNsaWRlckVsZW0ub2Zmc2V0V2lkdGgrXCJweFwiLHRoaXMudGlja0xhYmVsQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcD10aGlzLnNsaWRlckVsZW0ub2Zmc2V0V2lkdGgvMiotMStcInB4XCIpKX19dmFyIGg7aWYodGhpcy5vcHRpb25zLnJhbmdlKXtoPXRoaXMub3B0aW9ucy5mb3JtYXR0ZXIodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuX3NldFRleHQodGhpcy50b29sdGlwSW5uZXIsaCksdGhpcy50b29sdGlwLnN0eWxlW3RoaXMuc3R5bGVQb3NdPShhWzFdK2FbMF0pLzIrXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tdG9wXCIsLXRoaXMudG9vbHRpcC5vZmZzZXRIZWlnaHQvMitcInB4XCIpOnRoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGgvMitcInB4XCIpLFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj90aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0SGVpZ2h0LzIrXCJweFwiKTp0aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLWxlZnRcIiwtdGhpcy50b29sdGlwLm9mZnNldFdpZHRoLzIrXCJweFwiKTt2YXIgaT10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzBdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21pbixpKTt2YXIgaj10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzFdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21heCxqKSx0aGlzLnRvb2x0aXBfbWluLnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMF0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWluLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9taW4sXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldFdpZHRoLzIrXCJweFwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMV0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWF4LFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9tYXgsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldFdpZHRoLzIrXCJweFwiKX1lbHNlIGg9dGhpcy5vcHRpb25zLmZvcm1hdHRlcih0aGlzLl9zdGF0ZS52YWx1ZVswXSksdGhpcy5fc2V0VGV4dCh0aGlzLnRvb2x0aXBJbm5lcixoKSx0aGlzLnRvb2x0aXAuc3R5bGVbdGhpcy5zdHlsZVBvc109YVswXStcIiVcIixcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi10b3BcIiwtdGhpcy50b29sdGlwLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi1sZWZ0XCIsLXRoaXMudG9vbHRpcC5vZmZzZXRXaWR0aC8yK1wicHhcIik7aWYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKXRoaXMudHJhY2tMb3cuc3R5bGUudG9wPVwiMFwiLHRoaXMudHJhY2tMb3cuc3R5bGUuaGVpZ2h0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS50b3A9TWF0aC5taW4oYVswXSxhWzFdKStcIiVcIix0aGlzLnRyYWNrU2VsZWN0aW9uLnN0eWxlLmhlaWdodD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLmJvdHRvbT1cIjBcIix0aGlzLnRyYWNrSGlnaC5zdHlsZS5oZWlnaHQ9MTAwLU1hdGgubWluKGFbMF0sYVsxXSktTWF0aC5hYnMoYVswXS1hWzFdKStcIiVcIjtlbHNle3RoaXMudHJhY2tMb3cuc3R5bGUubGVmdD1cIjBcIix0aGlzLnRyYWNrTG93LnN0eWxlLndpZHRoPU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS5sZWZ0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS53aWR0aD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLnJpZ2h0PVwiMFwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLndpZHRoPTEwMC1NYXRoLm1pbihhWzBdLGFbMV0pLU1hdGguYWJzKGFbMF0tYVsxXSkrXCIlXCI7dmFyIGs9dGhpcy50b29sdGlwX21pbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPXRoaXMudG9vbHRpcF9tYXguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XCJib3R0b21cIj09PXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9uP2sucmlnaHQ+bC5sZWZ0Pyh0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiYm90dG9tXCIpLHRoaXMuX2FkZENsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJ0b3BcIiksdGhpcy50b29sdGlwX21heC5zdHlsZS50b3A9XCJcIix0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLmJvdHRvbT1cIjIycHhcIik6KHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJ0b3BcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21heCxcImJvdHRvbVwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLnRvcD10aGlzLnRvb2x0aXBfbWluLnN0eWxlLnRvcCx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLmJvdHRvbT1cIlwiKTprLnJpZ2h0PmwubGVmdD8odGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcInRvcFwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiYm90dG9tXCIpLHRoaXMudG9vbHRpcF9tYXguc3R5bGUudG9wPVwiMThweFwiKToodGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcImJvdHRvbVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwidG9wXCIpLHRoaXMudG9vbHRpcF9tYXguc3R5bGUudG9wPXRoaXMudG9vbHRpcF9taW4uc3R5bGUudG9wKX19LF9yZXNpemU6ZnVuY3Rpb24oYSl7dGhpcy5fc3RhdGUub2Zmc2V0PXRoaXMuX29mZnNldCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuX3N0YXRlLnNpemU9dGhpcy5zbGlkZXJFbGVtW3RoaXMuc2l6ZVBvc10sdGhpcy5fbGF5b3V0KCl9LF9yZW1vdmVQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2Euc3R5bGUucmVtb3ZlUHJvcGVydHk/YS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShiKTphLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZShiKX0sX21vdXNlZG93bjpmdW5jdGlvbihhKXtpZighdGhpcy5fc3RhdGUuZW5hYmxlZClyZXR1cm4hMTt0aGlzLl9zdGF0ZS5vZmZzZXQ9dGhpcy5fb2Zmc2V0KHRoaXMuc2xpZGVyRWxlbSksdGhpcy5fc3RhdGUuc2l6ZT10aGlzLnNsaWRlckVsZW1bdGhpcy5zaXplUG9zXTt2YXIgYj10aGlzLl9nZXRQZXJjZW50YWdlKGEpO2lmKHRoaXMub3B0aW9ucy5yYW5nZSl7dmFyIGM9TWF0aC5hYnModGhpcy5fc3RhdGUucGVyY2VudGFnZVswXS1iKSxkPU1hdGguYWJzKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0tYik7dGhpcy5fc3RhdGUuZHJhZ2dlZD1kPmM/MDoxLHRoaXMuX2FkanVzdFBlcmNlbnRhZ2VGb3JSYW5nZVNsaWRlcnMoYil9ZWxzZSB0aGlzLl9zdGF0ZS5kcmFnZ2VkPTA7dGhpcy5fc3RhdGUucGVyY2VudGFnZVt0aGlzLl9zdGF0ZS5kcmFnZ2VkXT1iLHRoaXMuX2xheW91dCgpLHRoaXMudG91Y2hDYXBhYmxlJiYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm1vdXNldXAsITEpKSx0aGlzLm1vdXNlbW92ZSYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSx0aGlzLm1vdXNldXAmJmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5tb3VzZXVwLCExKSx0aGlzLm1vdXNlbW92ZT10aGlzLl9tb3VzZW1vdmUuYmluZCh0aGlzKSx0aGlzLm1vdXNldXA9dGhpcy5fbW91c2V1cC5iaW5kKHRoaXMpLHRoaXMudG91Y2hDYXBhYmxlJiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm1vdXNldXAsITEpKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5tb3VzZXVwLCExKSx0aGlzLl9zdGF0ZS5pbkRyYWc9ITA7dmFyIGU9dGhpcy5fY2FsY3VsYXRlVmFsdWUoKTtyZXR1cm4gdGhpcy5fdHJpZ2dlcihcInNsaWRlU3RhcnRcIixlKSx0aGlzLl9zZXREYXRhVmFsKGUpLHRoaXMuc2V0VmFsdWUoZSwhMSwhMCksdGhpcy5fcGF1c2VFdmVudChhKSx0aGlzLm9wdGlvbnMuZm9jdXMmJnRoaXMuX3RyaWdnZXJGb2N1c09uSGFuZGxlKHRoaXMuX3N0YXRlLmRyYWdnZWQpLCEwfSxfdG91Y2hzdGFydDpmdW5jdGlvbihhKXtpZih2b2lkIDA9PT1hLmNoYW5nZWRUb3VjaGVzKXJldHVybiB2b2lkIHRoaXMuX21vdXNlZG93bihhKTt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdO3RoaXMudG91Y2hYPWIucGFnZVgsdGhpcy50b3VjaFk9Yi5wYWdlWX0sX3RyaWdnZXJGb2N1c09uSGFuZGxlOmZ1bmN0aW9uKGEpezA9PT1hJiZ0aGlzLmhhbmRsZTEuZm9jdXMoKSwxPT09YSYmdGhpcy5oYW5kbGUyLmZvY3VzKCl9LF9rZXlkb3duOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dmFyIGM7c3dpdGNoKGIua2V5Q29kZSl7Y2FzZSAzNzpjYXNlIDQwOmM9LTE7YnJlYWs7Y2FzZSAzOTpjYXNlIDM4OmM9MX1pZihjKXtpZih0aGlzLm9wdGlvbnMubmF0dXJhbF9hcnJvd19rZXlzKXt2YXIgZD1cInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJiF0aGlzLm9wdGlvbnMucmV2ZXJzZWQsZT1cImhvcml6b250YWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbiYmdGhpcy5vcHRpb25zLnJldmVyc2VkOyhkfHxlKSYmKGM9LWMpfXZhciBmPXRoaXMuX3N0YXRlLnZhbHVlW2FdK2MqdGhpcy5vcHRpb25zLnN0ZXA7cmV0dXJuIHRoaXMub3B0aW9ucy5yYW5nZSYmKGY9W2E/dGhpcy5fc3RhdGUudmFsdWVbMF06ZixhP2Y6dGhpcy5fc3RhdGUudmFsdWVbMV1dKSx0aGlzLl90cmlnZ2VyKFwic2xpZGVTdGFydFwiLGYpLHRoaXMuX3NldERhdGFWYWwoZiksdGhpcy5zZXRWYWx1ZShmLCEwLCEwKSx0aGlzLl9zZXREYXRhVmFsKGYpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZVN0b3BcIixmKSx0aGlzLl9sYXlvdXQoKSx0aGlzLl9wYXVzZUV2ZW50KGIpLCExfX0sX3BhdXNlRXZlbnQ6ZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpLGEuY2FuY2VsQnViYmxlPSEwLGEucmV0dXJuVmFsdWU9ITF9LF9tb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dmFyIGI9dGhpcy5fZ2V0UGVyY2VudGFnZShhKTt0aGlzLl9hZGp1c3RQZXJjZW50YWdlRm9yUmFuZ2VTbGlkZXJzKGIpLHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbdGhpcy5fc3RhdGUuZHJhZ2dlZF09Yix0aGlzLl9sYXlvdXQoKTt2YXIgYz10aGlzLl9jYWxjdWxhdGVWYWx1ZSghMCk7cmV0dXJuIHRoaXMuc2V0VmFsdWUoYywhMCwhMCksITF9LF90b3VjaG1vdmU6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YS5jaGFuZ2VkVG91Y2hlcyl7dmFyIGI9YS5jaGFuZ2VkVG91Y2hlc1swXSxjPWIucGFnZVgtdGhpcy50b3VjaFgsZD1iLnBhZ2VZLXRoaXMudG91Y2hZO3RoaXMuX3N0YXRlLmluRHJhZ3x8KFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbiYmNT49YyYmYz49LTUmJihkPj0xNXx8LTE1Pj1kKT90aGlzLl9tb3VzZWRvd24oYSk6NT49ZCYmZD49LTUmJihjPj0xNXx8LTE1Pj1jKSYmdGhpcy5fbW91c2Vkb3duKGEpKX19LF9hZGp1c3RQZXJjZW50YWdlRm9yUmFuZ2VTbGlkZXJzOmZ1bmN0aW9uKGEpe2lmKHRoaXMub3B0aW9ucy5yYW5nZSl7dmFyIGI9dGhpcy5fZ2V0TnVtRGlnaXRzQWZ0ZXJEZWNpbWFsUGxhY2UoYSk7Yj1iP2ItMTowO3ZhciBjPXRoaXMuX2FwcGx5VG9GaXhlZEFuZFBhcnNlRmxvYXQoYSxiKTswPT09dGhpcy5fc3RhdGUuZHJhZ2dlZCYmdGhpcy5fYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdCh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdLGIpPGM/KHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF09dGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXSx0aGlzLl9zdGF0ZS5kcmFnZ2VkPTEpOjE9PT10aGlzLl9zdGF0ZS5kcmFnZ2VkJiZ0aGlzLl9hcHBseVRvRml4ZWRBbmRQYXJzZUZsb2F0KHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0sYik+YyYmKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV09dGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSx0aGlzLl9zdGF0ZS5kcmFnZ2VkPTApfX0sX21vdXNldXA6ZnVuY3Rpb24oKXtpZighdGhpcy5fc3RhdGUuZW5hYmxlZClyZXR1cm4hMTt0aGlzLnRvdWNoQ2FwYWJsZSYmKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm1vdXNlbW92ZSwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5tb3VzZXVwLCExKSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMubW91c2Vtb3ZlLCExKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMubW91c2V1cCwhMSksdGhpcy5fc3RhdGUuaW5EcmFnPSExLHRoaXMuX3N0YXRlLm92ZXI9PT0hMSYmdGhpcy5faGlkZVRvb2x0aXAoKTt2YXIgYT10aGlzLl9jYWxjdWxhdGVWYWx1ZSghMCk7cmV0dXJuIHRoaXMuX2xheW91dCgpLHRoaXMuX3NldERhdGFWYWwoYSksdGhpcy5fdHJpZ2dlcihcInNsaWRlU3RvcFwiLGEpLCExfSxfY2FsY3VsYXRlVmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYodGhpcy5vcHRpb25zLnJhbmdlPyhiPVt0aGlzLm9wdGlvbnMubWluLHRoaXMub3B0aW9ucy5tYXhdLDAhPT10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdJiYoYlswXT10aGlzLl90b1ZhbHVlKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0pLGJbMF09dGhpcy5fYXBwbHlQcmVjaXNpb24oYlswXSkpLDEwMCE9PXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0mJihiWzFdPXRoaXMuX3RvVmFsdWUodGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXSksYlsxXT10aGlzLl9hcHBseVByZWNpc2lvbihiWzFdKSkpOihiPXRoaXMuX3RvVmFsdWUodGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSksYj1wYXJzZUZsb2F0KGIpLGI9dGhpcy5fYXBwbHlQcmVjaXNpb24oYikpLGEpe2Zvcih2YXIgYz1bYiwxLzBdLGQ9MDtkPHRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg7ZCsrKXt2YXIgZT1NYXRoLmFicyh0aGlzLm9wdGlvbnMudGlja3NbZF0tYik7ZTw9Y1sxXSYmKGM9W3RoaXMub3B0aW9ucy50aWNrc1tkXSxlXSl9aWYoY1sxXTw9dGhpcy5vcHRpb25zLnRpY2tzX3NuYXBfYm91bmRzKXJldHVybiBjWzBdfXJldHVybiBifSxfYXBwbHlQcmVjaXNpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLnByZWNpc2lvbnx8dGhpcy5fZ2V0TnVtRGlnaXRzQWZ0ZXJEZWNpbWFsUGxhY2UodGhpcy5vcHRpb25zLnN0ZXApO3JldHVybiB0aGlzLl9hcHBseVRvRml4ZWRBbmRQYXJzZUZsb2F0KGEsYil9LF9nZXROdW1EaWdpdHNBZnRlckRlY2ltYWxQbGFjZTpmdW5jdGlvbihhKXt2YXIgYj0oXCJcIithKS5tYXRjaCgvKD86XFwuKFxcZCspKT8oPzpbZUVdKFsrLV0/XFxkKykpPyQvKTtyZXR1cm4gYj9NYXRoLm1heCgwLChiWzFdP2JbMV0ubGVuZ3RoOjApLShiWzJdPytiWzJdOjApKTowfSxfYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdDpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9GaXhlZChiKTtyZXR1cm4gcGFyc2VGbG9hdChjKX0sX2dldFBlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7IXRoaXMudG91Y2hDYXBhYmxlfHxcInRvdWNoc3RhcnRcIiE9PWEudHlwZSYmXCJ0b3VjaG1vdmVcIiE9PWEudHlwZXx8KGE9YS50b3VjaGVzWzBdKTt2YXIgYj1hW3RoaXMubW91c2VQb3NdLGM9dGhpcy5fc3RhdGUub2Zmc2V0W3RoaXMuc3R5bGVQb3NdLGQ9Yi1jLGU9ZC90aGlzLl9zdGF0ZS5zaXplKjEwMDtyZXR1cm4gZT1NYXRoLnJvdW5kKGUvdGhpcy5fc3RhdGUucGVyY2VudGFnZVsyXSkqdGhpcy5fc3RhdGUucGVyY2VudGFnZVsyXSx0aGlzLm9wdGlvbnMucmV2ZXJzZWQmJihlPTEwMC1lKSxNYXRoLm1heCgwLE1hdGgubWluKDEwMCxlKSl9LF92YWxpZGF0ZUlucHV0VmFsdWU6ZnVuY3Rpb24oYSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGEpcmV0dXJuIGE7aWYoQXJyYXkuaXNBcnJheShhKSlyZXR1cm4gdGhpcy5fdmFsaWRhdGVBcnJheShhKSxhO3Rocm93IG5ldyBFcnJvcihmLmZvcm1hdEludmFsaWRJbnB1dEVycm9yTXNnKGEpKX0sX3ZhbGlkYXRlQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoXCJudW1iZXJcIiE9dHlwZW9mIGMpdGhyb3cgbmV3IEVycm9yKGYuZm9ybWF0SW52YWxpZElucHV0RXJyb3JNc2coYykpfX0sX3NldERhdGFWYWw6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtdmFsdWVcIixhKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixhKSx0aGlzLmVsZW1lbnQudmFsdWU9YX0sX3RyaWdnZXI6ZnVuY3Rpb24oYixjKXtjPWN8fDA9PT1jP2M6dm9pZCAwO3ZhciBkPXRoaXMuZXZlbnRUb0NhbGxiYWNrTWFwW2JdO2lmKGQmJmQubGVuZ3RoKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2YoYyl9YSYmdGhpcy5fdHJpZ2dlckpRdWVyeUV2ZW50KGIsYyl9LF90cmlnZ2VySlF1ZXJ5RXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dHlwZTphLHZhbHVlOmJ9O3RoaXMuJGVsZW1lbnQudHJpZ2dlcihjKSx0aGlzLiRzbGlkZXJFbGVtLnRyaWdnZXIoYyl9LF91bmJpbmRKUXVlcnlFdmVudEhhbmRsZXJzOmZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5vZmYoKSx0aGlzLiRzbGlkZXJFbGVtLm9mZigpfSxfc2V0VGV4dDpmdW5jdGlvbihhLGIpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBhLnRleHRDb250ZW50P2EudGV4dENvbnRlbnQ9YjpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5pbm5lclRleHQmJihhLmlubmVyVGV4dD1iKX0sX3JlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWIuc3BsaXQoXCIgXCIpLGQ9YS5jbGFzc05hbWUsZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdLGc9bmV3IFJlZ0V4cChcIig/OlxcXFxzfF4pXCIrZitcIig/OlxcXFxzfCQpXCIpO2Q9ZC5yZXBsYWNlKGcsXCIgXCIpfWEuY2xhc3NOYW1lPWQudHJpbSgpfSxfYWRkQ2xhc3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9Yi5zcGxpdChcIiBcIiksZD1hLmNsYXNzTmFtZSxlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV0sZz1uZXcgUmVnRXhwKFwiKD86XFxcXHN8XilcIitmK1wiKD86XFxcXHN8JClcIiksaD1nLnRlc3QoZCk7aHx8KGQrPVwiIFwiK2YpfWEuY2xhc3NOYW1lPWQudHJpbSgpfSxfb2Zmc2V0TGVmdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSxfb2Zmc2V0VG9wOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLm9mZnNldFRvcDsoYT1hLm9mZnNldFBhcmVudCkmJiFpc05hTihhLm9mZnNldFRvcCk7KWIrPWEub2Zmc2V0VG9wLFwiQk9EWVwiIT09YS50YWdOYW1lJiYoYi09YS5zY3JvbGxUb3ApO3JldHVybiBifSxfb2Zmc2V0OmZ1bmN0aW9uKGEpe3JldHVybntsZWZ0OnRoaXMuX29mZnNldExlZnQoYSksdG9wOnRoaXMuX29mZnNldFRvcChhKX19LF9jc3M6ZnVuY3Rpb24oYixjLGQpe2lmKGEpYS5zdHlsZShiLGMsZCk7ZWxzZXt2YXIgZT1jLnJlcGxhY2UoL14tbXMtLyxcIm1zLVwiKS5yZXBsYWNlKC8tKFtcXGRhLXpdKS9naSxmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9KTtiLnN0eWxlW2VdPWR9fSxfdG9WYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNjYWxlLnRvVmFsdWUuYXBwbHkodGhpcyxbYV0pfSxfdG9QZXJjZW50YWdlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9wdGlvbnMuc2NhbGUudG9QZXJjZW50YWdlLmFwcGx5KHRoaXMsW2FdKX0sX3NldFRvb2x0aXBQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPVt0aGlzLnRvb2x0aXAsdGhpcy50b29sdGlwX21pbix0aGlzLnRvb2x0aXBfbWF4XTtpZihcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24pe3ZhciBiPXRoaXMub3B0aW9ucy50b29sdGlwX3Bvc2l0aW9ufHxcInJpZ2h0XCIsYz1cImxlZnRcIj09PWI/XCJyaWdodFwiOlwibGVmdFwiO2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9hZGRDbGFzcyhhLGIpLGEuc3R5bGVbY109XCIxMDAlXCJ9LmJpbmQodGhpcykpfWVsc2VcImJvdHRvbVwiPT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24/YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuX2FkZENsYXNzKGEsXCJib3R0b21cIiksYS5zdHlsZS50b3A9XCIyMnB4XCJ9LmJpbmQodGhpcykpOmEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9hZGRDbGFzcyhhLFwidG9wXCIpLGEuc3R5bGUudG9wPS10aGlzLnRvb2x0aXAub3V0ZXJIZWlnaHQtMTQrXCJweFwifS5iaW5kKHRoaXMpKX19LGEmJiFmdW5jdGlvbigpe3ZhciBlPXZvaWQgMDthLmZuLnNsaWRlcj8od2luZG93LmNvbnNvbGUud2FybihcImJvb3RzdHJhcC1zbGlkZXIuanMgLSBXQVJOSU5HOiAkLmZuLnNsaWRlciBuYW1lc3BhY2UgaXMgYWxyZWFkeSBib3VuZC4gVXNlIHRoZSAkLmZuLmJvb3RzdHJhcFNsaWRlciBuYW1lc3BhY2UgaW5zdGVhZC5cIiksZT1jKTooYS5icmlkZ2V0KGIsZCksZT1iKSxhLmJyaWRnZXQoYyxkKSxhKGZ1bmN0aW9uKCl7YShcImlucHV0W2RhdGEtcHJvdmlkZT1zbGlkZXJdXCIpW2VdKCl9KX0oKX0oYSksZH0pOyIsIi8qXG5Db3B5cmlnaHQgKGMpIDIwMDMtMjAxNiwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbkZvciBsaWNlbnNpbmcsIHNlZSBMSUNFTlNFLm1kIG9yIGh0dHA6Ly9ja2VkaXRvci5jb20vbGljZW5zZVxuKi9cbihmdW5jdGlvbigpe2lmKHdpbmRvdy5DS0VESVRPUiYmd2luZG93LkNLRURJVE9SLmRvbSlyZXR1cm47d2luZG93LkNLRURJVE9SfHwod2luZG93LkNLRURJVE9SPWZ1bmN0aW9uKCl7dmFyIGE9LyhefC4qW1xcXFxcXC9dKWNrZWRpdG9yXFwuanMoPzpcXD8uKnw7LiopPyQvaSxkPXt0aW1lc3RhbXA6XCJHMTRFXCIsdmVyc2lvbjpcIjQuNS43XCIscmV2aXNpb246XCJlOTgyNzdmXCIscm5kOk1hdGguZmxvb3IoOTAwKk1hdGgucmFuZG9tKCkpKzEwMCxfOntwZW5kaW5nOltdLGJhc2VQYXRoU3JjUGF0dGVybjphfSxzdGF0dXM6XCJ1bmxvYWRlZFwiLGJhc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIGI9d2luZG93LkNLRURJVE9SX0JBU0VQQVRIfHxcIlwiO2lmKCFiKWZvcih2YXIgYz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBrPWNbZF0uc3JjLm1hdGNoKGEpO2lmKGspe2I9a1sxXTticmVha319LTE9PWIuaW5kZXhPZihcIjovXCIpJiZcIi8vXCIhPWIuc2xpY2UoMCwyKSYmKGI9MD09PWIuaW5kZXhPZihcIi9cIik/bG9jYXRpb24uaHJlZi5tYXRjaCgvXi4qPzpcXC9cXC9bXlxcL10qLylbMF0rXG5iOmxvY2F0aW9uLmhyZWYubWF0Y2goL15bXlxcP10qXFwvKD86KS8pWzBdK2IpO2lmKCFiKXRocm93J1RoZSBDS0VkaXRvciBpbnN0YWxsYXRpb24gcGF0aCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBkZXRlY3RlZC4gUGxlYXNlIHNldCB0aGUgZ2xvYmFsIHZhcmlhYmxlIFwiQ0tFRElUT1JfQkFTRVBBVEhcIiBiZWZvcmUgY3JlYXRpbmcgZWRpdG9yIGluc3RhbmNlcy4nO3JldHVybiBifSgpLGdldFVybDpmdW5jdGlvbihhKXstMT09YS5pbmRleE9mKFwiOi9cIikmJjAhPT1hLmluZGV4T2YoXCIvXCIpJiYoYT10aGlzLmJhc2VQYXRoK2EpO3RoaXMudGltZXN0YW1wJiZcIi9cIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkmJiEvWyY/XXQ9Ly50ZXN0KGEpJiYoYSs9KDA8PWEuaW5kZXhPZihcIj9cIik/XCJcXHgyNlwiOlwiP1wiKStcInRcXHgzZFwiK3RoaXMudGltZXN0YW1wKTtyZXR1cm4gYX0sZG9tUmVhZHk6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dHJ5e2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/KGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsXG5hLCExKSxiKCkpOmRvY3VtZW50LmF0dGFjaEV2ZW50JiZcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiYoZG9jdW1lbnQuZGV0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixhKSxiKCkpfWNhdGNoKGMpe319ZnVuY3Rpb24gYigpe2Zvcih2YXIgYTthPWMuc2hpZnQoKTspYSgpfXZhciBjPVtdO3JldHVybiBmdW5jdGlvbihiKXtmdW5jdGlvbiBkKCl7dHJ5e2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbChcImxlZnRcIil9Y2F0Y2goZil7c2V0VGltZW91dChkLDEpO3JldHVybn1hKCl9Yy5wdXNoKGIpO1wiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJnNldFRpbWVvdXQoYSwxKTtpZigxPT1jLmxlbmd0aClpZihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsYSwhMSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsYSwhMSk7ZWxzZSBpZihkb2N1bWVudC5hdHRhY2hFdmVudCl7ZG9jdW1lbnQuYXR0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixcbmEpO3dpbmRvdy5hdHRhY2hFdmVudChcIm9ubG9hZFwiLGEpO2I9ITE7dHJ5e2I9IXdpbmRvdy5mcmFtZUVsZW1lbnR9Y2F0Y2godyl7fWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCYmYiYmZCgpfX19KCl9LGI9d2luZG93LkNLRURJVE9SX0dFVFVSTDtpZihiKXt2YXIgYz1kLmdldFVybDtkLmdldFVybD1mdW5jdGlvbihhKXtyZXR1cm4gYi5jYWxsKGQsYSl8fGMuY2FsbChkLGEpfX1yZXR1cm4gZH0oKSk7XG5DS0VESVRPUi5ldmVudHx8KENLRURJVE9SLmV2ZW50PWZ1bmN0aW9uKCl7fSxDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbj1mdW5jdGlvbihhKXt2YXIgZD1DS0VESVRPUi5ldmVudC5wcm90b3R5cGUsYjtmb3IoYiBpbiBkKW51bGw9PWFbYl0mJihhW2JdPWRbYl0pfSxDS0VESVRPUi5ldmVudC5wcm90b3R5cGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBlPWQodGhpcyk7cmV0dXJuIGVbYV18fChlW2FdPW5ldyBiKGEpKX12YXIgZD1mdW5jdGlvbihhKXthPWEuZ2V0UHJpdmF0ZSYmYS5nZXRQcml2YXRlKCl8fGEuX3x8KGEuXz17fSk7cmV0dXJuIGEuZXZlbnRzfHwoYS5ldmVudHM9e30pfSxiPWZ1bmN0aW9uKGEpe3RoaXMubmFtZT1hO3RoaXMubGlzdGVuZXJzPVtdfTtiLnByb3RvdHlwZT17Z2V0TGlzdGVuZXJJbmRleDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxkPXRoaXMubGlzdGVuZXJzO2I8ZC5sZW5ndGg7YisrKWlmKGRbYl0uZm49PWEpcmV0dXJuIGI7cmV0dXJuLTF9fTtcbnJldHVybntkZWZpbmU6ZnVuY3Rpb24oYixkKXt2YXIgZz1hLmNhbGwodGhpcyxiKTtDS0VESVRPUi50b29scy5leHRlbmQoZyxkLCEwKX0sb246ZnVuY3Rpb24oYixkLGcsbCxrKXtmdW5jdGlvbiBuKGEsZix4LGspe2E9e25hbWU6YixzZW5kZXI6dGhpcyxlZGl0b3I6YSxkYXRhOmYsbGlzdGVuZXJEYXRhOmwsc3RvcDp4LGNhbmNlbDprLHJlbW92ZUxpc3RlbmVyOnd9O3JldHVybiExPT09ZC5jYWxsKGcsYSk/ITE6YS5kYXRhfWZ1bmN0aW9uIHcoKXt4LnJlbW92ZUxpc3RlbmVyKGIsZCl9dmFyIGY9YS5jYWxsKHRoaXMsYik7aWYoMD5mLmdldExpc3RlbmVySW5kZXgoZCkpe2Y9Zi5saXN0ZW5lcnM7Z3x8KGc9dGhpcyk7aXNOYU4oaykmJihrPTEwKTt2YXIgeD10aGlzO24uZm49ZDtuLnByaW9yaXR5PWs7Zm9yKHZhciBBPWYubGVuZ3RoLTE7MDw9QTtBLS0paWYoZltBXS5wcmlvcml0eTw9aylyZXR1cm4gZi5zcGxpY2UoQSsxLDAsbikse3JlbW92ZUxpc3RlbmVyOnd9O2YudW5zaGlmdChuKX1yZXR1cm57cmVtb3ZlTGlzdGVuZXI6d319LFxub25jZTpmdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYj1hWzFdO2FbMV09ZnVuY3Rpb24oYSl7YS5yZW1vdmVMaXN0ZW5lcigpO3JldHVybiBiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHRoaXMub24uYXBwbHkodGhpcyxhKX0sY2FwdHVyZTpmdW5jdGlvbigpe0NLRURJVE9SLmV2ZW50LnVzZUNhcHR1cmU9MTt2YXIgYT10aGlzLm9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPTA7cmV0dXJuIGF9LGZpcmU6ZnVuY3Rpb24oKXt2YXIgYT0wLGI9ZnVuY3Rpb24oKXthPTF9LGc9MCxsPWZ1bmN0aW9uKCl7Zz0xfTtyZXR1cm4gZnVuY3Rpb24oayxuLHcpe3ZhciBmPWQodGhpcylba107az1hO3ZhciB4PWc7YT1nPTA7aWYoZil7dmFyIEE9Zi5saXN0ZW5lcnM7aWYoQS5sZW5ndGgpZm9yKHZhciBBPUEuc2xpY2UoMCksdSxCPTA7QjxBLmxlbmd0aDtCKyspe2lmKGYuZXJyb3JQcm9vZil0cnl7dT1cbkFbQl0uY2FsbCh0aGlzLHcsbixiLGwpfWNhdGNoKHEpe31lbHNlIHU9QVtCXS5jYWxsKHRoaXMsdyxuLGIsbCk7ITE9PT11P2c9MTpcInVuZGVmaW5lZFwiIT10eXBlb2YgdSYmKG49dSk7aWYoYXx8ZylicmVha319bj1nPyExOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBuPyEwOm47YT1rO2c9eDtyZXR1cm4gbn19KCksZmlyZU9uY2U6ZnVuY3Rpb24oYSxiLGcpe2I9dGhpcy5maXJlKGEsYixnKTtkZWxldGUgZCh0aGlzKVthXTtyZXR1cm4gYn0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2YXIgZz1kKHRoaXMpW2FdO2lmKGcpe3ZhciBsPWcuZ2V0TGlzdGVuZXJJbmRleChiKTswPD1sJiZnLmxpc3RlbmVycy5zcGxpY2UobCwxKX19LHJlbW92ZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPWQodGhpcyksYjtmb3IoYiBpbiBhKWRlbGV0ZSBhW2JdfSxoYXNMaXN0ZW5lcnM6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9ZCh0aGlzKVthXSkmJjA8YS5saXN0ZW5lcnMubGVuZ3RofX19KCkpO1xuQ0tFRElUT1IuZWRpdG9yfHwoQ0tFRElUT1IuZWRpdG9yPWZ1bmN0aW9uKCl7Q0tFRElUT1IuXy5wZW5kaW5nLnB1c2goW3RoaXMsYXJndW1lbnRzXSk7Q0tFRElUT1IuZXZlbnQuY2FsbCh0aGlzKX0sQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5maXJlPWZ1bmN0aW9uKGEsZCl7YSBpbntpbnN0YW5jZVJlYWR5OjEsbG9hZGVkOjF9JiYodGhpc1thXT0hMCk7cmV0dXJuIENLRURJVE9SLmV2ZW50LnByb3RvdHlwZS5maXJlLmNhbGwodGhpcyxhLGQsdGhpcyl9LENLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuZmlyZU9uY2U9ZnVuY3Rpb24oYSxkKXthIGlue2luc3RhbmNlUmVhZHk6MSxsb2FkZWQ6MX0mJih0aGlzW2FdPSEwKTtyZXR1cm4gQ0tFRElUT1IuZXZlbnQucHJvdG90eXBlLmZpcmVPbmNlLmNhbGwodGhpcyxhLGQsdGhpcyl9LENLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKENLRURJVE9SLmVkaXRvci5wcm90b3R5cGUpKTtcbkNLRURJVE9SLmVudnx8KENLRURJVE9SLmVudj1mdW5jdGlvbigpe3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxkPWEubWF0Y2goL2VkZ2VbIFxcL10oXFxkKy4/XFxkKikvKSxiPS0xPGEuaW5kZXhPZihcInRyaWRlbnQvXCIpLGI9ISghZCYmIWIpLGI9e2llOmIsZWRnZTohIWQsd2Via2l0OiFiJiYtMTxhLmluZGV4T2YoXCIgYXBwbGV3ZWJraXQvXCIpLGFpcjotMTxhLmluZGV4T2YoXCIgYWRvYmVhaXIvXCIpLG1hYzotMTxhLmluZGV4T2YoXCJtYWNpbnRvc2hcIikscXVpcmtzOlwiQmFja0NvbXBhdFwiPT1kb2N1bWVudC5jb21wYXRNb2RlJiYoIWRvY3VtZW50LmRvY3VtZW50TW9kZXx8MTA+ZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSxtb2JpbGU6LTE8YS5pbmRleE9mKFwibW9iaWxlXCIpLGlPUzovKGlwYWR8aXBob25lfGlwb2QpLy50ZXN0KGEpLGlzQ3VzdG9tRG9tYWluOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaWUpcmV0dXJuITE7dmFyIGE9ZG9jdW1lbnQuZG9tYWluLGI9d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO1xucmV0dXJuIGEhPWImJmEhPVwiW1wiK2IrXCJdXCJ9LHNlY3VyZTpcImh0dHBzOlwiPT1sb2NhdGlvbi5wcm90b2NvbH07Yi5nZWNrbz1cIkdlY2tvXCI9PW5hdmlnYXRvci5wcm9kdWN0JiYhYi53ZWJraXQmJiFiLmllO2Iud2Via2l0JiYoLTE8YS5pbmRleE9mKFwiY2hyb21lXCIpP2IuY2hyb21lPSEwOmIuc2FmYXJpPSEwKTt2YXIgYz0wO2IuaWUmJihjPWQ/cGFyc2VGbG9hdChkWzFdKTpiLnF1aXJrc3x8IWRvY3VtZW50LmRvY3VtZW50TW9kZT9wYXJzZUZsb2F0KGEubWF0Y2goL21zaWUgKFxcZCspLylbMV0pOmRvY3VtZW50LmRvY3VtZW50TW9kZSxiLmllOUNvbXBhdD05PT1jLGIuaWU4Q29tcGF0PTg9PWMsYi5pZTdDb21wYXQ9Nz09YyxiLmllNkNvbXBhdD03PmN8fGIucXVpcmtzKTtiLmdlY2tvJiYoZD1hLm1hdGNoKC9ydjooW1xcZFxcLl0rKS8pKSYmKGQ9ZFsxXS5zcGxpdChcIi5cIiksYz0xRTQqZFswXSsxMDAqKGRbMV18fDApKzEqKGRbMl18fDApKTtiLmFpciYmKGM9cGFyc2VGbG9hdChhLm1hdGNoKC8gYWRvYmVhaXJcXC8oXFxkKykvKVsxXSkpO1xuYi53ZWJraXQmJihjPXBhcnNlRmxvYXQoYS5tYXRjaCgvIGFwcGxld2Via2l0XFwvKFxcZCspLylbMV0pKTtiLnZlcnNpb249YztiLmlzQ29tcGF0aWJsZT0hKGIuaWUmJjc+YykmJiEoYi5nZWNrbyYmNEU0PmMpJiYhKGIud2Via2l0JiY1MzQ+Yyk7Yi5oaWRwaT0yPD13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztiLm5lZWRzQnJGaWxsZXI9Yi5nZWNrb3x8Yi53ZWJraXR8fGIuaWUmJjEwPGM7Yi5uZWVkc05ic3BGaWxsZXI9Yi5pZSYmMTE+YztiLmNzc0NsYXNzPVwiY2tlX2Jyb3dzZXJfXCIrKGIuaWU/XCJpZVwiOmIuZ2Vja28/XCJnZWNrb1wiOmIud2Via2l0P1wid2Via2l0XCI6XCJ1bmtub3duXCIpO2IucXVpcmtzJiYoYi5jc3NDbGFzcys9XCIgY2tlX2Jyb3dzZXJfcXVpcmtzXCIpO2IuaWUmJihiLmNzc0NsYXNzKz1cIiBja2VfYnJvd3Nlcl9pZVwiKyhiLnF1aXJrcz9cIjYgY2tlX2Jyb3dzZXJfaWVxdWlya3NcIjpiLnZlcnNpb24pKTtiLmFpciYmKGIuY3NzQ2xhc3MrPVwiIGNrZV9icm93c2VyX2FpclwiKTtcbmIuaU9TJiYoYi5jc3NDbGFzcys9XCIgY2tlX2Jyb3dzZXJfaW9zXCIpO2IuaGlkcGkmJihiLmNzc0NsYXNzKz1cIiBja2VfaGlkcGlcIik7cmV0dXJuIGJ9KCkpO1xuXCJ1bmxvYWRlZFwiPT1DS0VESVRPUi5zdGF0dXMmJmZ1bmN0aW9uKCl7Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IpO0NLRURJVE9SLmxvYWRGdWxsQ29yZT1mdW5jdGlvbigpe2lmKFwiYmFzaWNfcmVhZHlcIiE9Q0tFRElUT1Iuc3RhdHVzKUNLRURJVE9SLmxvYWRGdWxsQ29yZS5fbG9hZD0xO2Vsc2V7ZGVsZXRlIENLRURJVE9SLmxvYWRGdWxsQ29yZTt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2EudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2Euc3JjPUNLRURJVE9SLmJhc2VQYXRoK1wiY2tlZGl0b3IuanNcIjtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoYSl9fTtDS0VESVRPUi5sb2FkRnVsbENvcmVUaW1lb3V0PTA7Q0tFRElUT1IuYWRkPWZ1bmN0aW9uKGEpeyh0aGlzLl8ucGVuZGluZ3x8KHRoaXMuXy5wZW5kaW5nPVtdKSkucHVzaChhKX07KGZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9tUmVhZHkoZnVuY3Rpb24oKXt2YXIgYT1cbkNLRURJVE9SLmxvYWRGdWxsQ29yZSxkPUNLRURJVE9SLmxvYWRGdWxsQ29yZVRpbWVvdXQ7YSYmKENLRURJVE9SLnN0YXR1cz1cImJhc2ljX3JlYWR5XCIsYSYmYS5fbG9hZD9hKCk6ZCYmc2V0VGltZW91dChmdW5jdGlvbigpe0NLRURJVE9SLmxvYWRGdWxsQ29yZSYmQ0tFRElUT1IubG9hZEZ1bGxDb3JlKCl9LDFFMypkKSl9KX0pKCk7Q0tFRElUT1Iuc3RhdHVzPVwiYmFzaWNfbG9hZGVkXCJ9KCk7XCJ1c2Ugc3RyaWN0XCI7Q0tFRElUT1IuVkVSQk9TSVRZX1dBUk49MTtDS0VESVRPUi5WRVJCT1NJVFlfRVJST1I9MjtDS0VESVRPUi52ZXJib3NpdHk9Q0tFRElUT1IuVkVSQk9TSVRZX1dBUk58Q0tFRElUT1IuVkVSQk9TSVRZX0VSUk9SO0NLRURJVE9SLndhcm49ZnVuY3Rpb24oYSxkKXtDS0VESVRPUi52ZXJib3NpdHkmQ0tFRElUT1IuVkVSQk9TSVRZX1dBUk4mJkNLRURJVE9SLmZpcmUoXCJsb2dcIix7dHlwZTpcIndhcm5cIixlcnJvckNvZGU6YSxhZGRpdGlvbmFsRGF0YTpkfSl9O1xuQ0tFRElUT1IuZXJyb3I9ZnVuY3Rpb24oYSxkKXtDS0VESVRPUi52ZXJib3NpdHkmQ0tFRElUT1IuVkVSQk9TSVRZX0VSUk9SJiZDS0VESVRPUi5maXJlKFwibG9nXCIse3R5cGU6XCJlcnJvclwiLGVycm9yQ29kZTphLGFkZGl0aW9uYWxEYXRhOmR9KX07XG5DS0VESVRPUi5vbihcImxvZ1wiLGZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cpe3ZhciBkPWNvbnNvbGVbYS5kYXRhLnR5cGVdP2EuZGF0YS50eXBlOlwibG9nXCIsYj1hLmRhdGEuZXJyb3JDb2RlO2lmKGE9YS5kYXRhLmFkZGl0aW9uYWxEYXRhKWNvbnNvbGVbZF0oXCJbQ0tFRElUT1JdIEVycm9yIGNvZGU6IFwiK2IrXCIuXCIsYSk7ZWxzZSBjb25zb2xlW2RdKFwiW0NLRURJVE9SXSBFcnJvciBjb2RlOiBcIitiK1wiLlwiKTtjb25zb2xlW2RdKFwiW0NLRURJVE9SXSBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGlzIGVycm9yIGdvIHRvIGh0dHA6Ly9kb2NzLmNrZWRpdG9yLmNvbS8jIS9ndWlkZS9kZXZfZXJyb3JzLXNlY3Rpb24tXCIrYil9fSxudWxsLG51bGwsOTk5KTtDS0VESVRPUi5kb209e307XG4oZnVuY3Rpb24oKXt2YXIgYT1bXSxkPUNLRURJVE9SLmVudi5nZWNrbz9cIi1tb3otXCI6Q0tFRElUT1IuZW52LndlYmtpdD9cIi13ZWJraXQtXCI6Q0tFRElUT1IuZW52LmllP1wiLW1zLVwiOlwiXCIsYj0vJi9nLGM9Lz4vZyxlPS88L2csZz0vXCIvZyxsPS8mKGx0fGd0fGFtcHxxdW90fG5ic3B8c2h5fCNcXGR7MSw1fSk7L2csaz17bHQ6XCJcXHgzY1wiLGd0OlwiXFx4M2VcIixhbXA6XCJcXHgyNlwiLHF1b3Q6J1wiJyxuYnNwOlwiwqBcIixzaHk6XCLCrVwifSxuPWZ1bmN0aW9uKGEsZil7cmV0dXJuXCIjXCI9PWZbMF0/U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChmLnNsaWNlKDEpLDEwKSk6a1tmXX07Q0tFRElUT1Iub24oXCJyZXNldFwiLGZ1bmN0aW9uKCl7YT1bXX0pO0NLRURJVE9SLnRvb2xzPXthcnJheUNvbXBhcmU6ZnVuY3Rpb24oYSxmKXtpZighYSYmIWYpcmV0dXJuITA7aWYoIWF8fCFmfHxhLmxlbmd0aCE9Zi5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaWYoYVtiXSE9ZltiXSlyZXR1cm4hMTtcbnJldHVybiEwfSxnZXRJbmRleDpmdW5jdGlvbihhLGYpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7KytiKWlmKGYoYVtiXSkpcmV0dXJuIGI7cmV0dXJuLTF9LGNsb25lOmZ1bmN0aW9uKGEpe3ZhciBmO2lmKGEmJmEgaW5zdGFuY2VvZiBBcnJheSl7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmW2JdPUNLRURJVE9SLnRvb2xzLmNsb25lKGFbYl0pO3JldHVybiBmfWlmKG51bGw9PT1hfHxcIm9iamVjdFwiIT10eXBlb2YgYXx8YSBpbnN0YW5jZW9mIFN0cmluZ3x8YSBpbnN0YW5jZW9mIE51bWJlcnx8YSBpbnN0YW5jZW9mIEJvb2xlYW58fGEgaW5zdGFuY2VvZiBEYXRlfHxhIGluc3RhbmNlb2YgUmVnRXhwfHxhLm5vZGVUeXBlfHxhLndpbmRvdz09PWEpcmV0dXJuIGE7Zj1uZXcgYS5jb25zdHJ1Y3Rvcjtmb3IoYiBpbiBhKWZbYl09Q0tFRElUT1IudG9vbHMuY2xvbmUoYVtiXSk7cmV0dXJuIGZ9LGNhcGl0YWxpemU6ZnVuY3Rpb24oYSxmKXtyZXR1cm4gYS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStcbihmP2Euc2xpY2UoMSk6YS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgsYixjO1wiYm9vbGVhblwiPT10eXBlb2YoYj1hcmd1bWVudHNbZi0xXSk/Zi0tOlwiYm9vbGVhblwiPT10eXBlb2YoYj1hcmd1bWVudHNbZi0yXSkmJihjPWFyZ3VtZW50c1tmLTFdLGYtPTIpO2Zvcih2YXIgaz0xO2s8ZjtrKyspe3ZhciBkPWFyZ3VtZW50c1trXSxxO2ZvcihxIGluIGQpaWYoITA9PT1ifHxudWxsPT1hW3FdKWlmKCFjfHxxIGluIGMpYVtxXT1kW3FdfXJldHVybiBhfSxwcm90b3R5cGVkQ29weTpmdW5jdGlvbihhKXt2YXIgZj1mdW5jdGlvbigpe307Zi5wcm90b3R5cGU9YTtyZXR1cm4gbmV3IGZ9LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGY9e30sYjtmb3IoYiBpbiBhKWZbYl09YVtiXTtyZXR1cm4gZn0saXNBcnJheTpmdW5jdGlvbihhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX0sXG5pc0VtcHR5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgZiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoZikpcmV0dXJuITE7cmV0dXJuITB9LGNzc1ZlbmRvclByZWZpeDpmdW5jdGlvbihhLGYsYil7aWYoYilyZXR1cm4gZCthK1wiOlwiK2YrXCI7XCIrYStcIjpcIitmO2I9e307YlthXT1mO2JbZCthXT1mO3JldHVybiBifSxjc3NTdHlsZVRvRG9tU3R5bGU6ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLnN0eWxlLGY9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuY3NzRmxvYXQ/XCJjc3NGbG9hdFwiOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnN0eWxlRmxvYXQ/XCJzdHlsZUZsb2F0XCI6XCJmbG9hdFwiO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm5cImZsb2F0XCI9PWE/ZjphLnJlcGxhY2UoLy0uL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3Vic3RyKDEpLnRvVXBwZXJDYXNlKCl9KX19KCksYnVpbGRTdHlsZUh0bWw6ZnVuY3Rpb24oYSl7YT1bXS5jb25jYXQoYSk7Zm9yKHZhciBmLFxuYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspaWYoZj1hW2NdKS9AaW1wb3J0fFt7fV0vLnRlc3QoZik/Yi5wdXNoKFwiXFx4M2NzdHlsZVxceDNlXCIrZitcIlxceDNjL3N0eWxlXFx4M2VcIik6Yi5wdXNoKCdcXHgzY2xpbmsgdHlwZVxceDNkXCJ0ZXh0L2Nzc1wiIHJlbFxceDNkc3R5bGVzaGVldCBocmVmXFx4M2RcIicrZisnXCJcXHgzZScpO3JldHVybiBiLmpvaW4oXCJcIil9LGh0bWxFbmNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWF8fG51bGw9PT1hP1wiXCI6U3RyaW5nKGEpLnJlcGxhY2UoYixcIlxceDI2YW1wO1wiKS5yZXBsYWNlKGMsXCJcXHgyNmd0O1wiKS5yZXBsYWNlKGUsXCJcXHgyNmx0O1wiKX0saHRtbERlY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGwsbil9LGh0bWxFbmNvZGVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEpLnJlcGxhY2UoZyxcIlxceDI2cXVvdDtcIil9LGh0bWxEZWNvZGVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5odG1sRGVjb2RlKGEpfSxcbnRyYW5zZm9ybVBsYWluVGV4dFRvSHRtbDpmdW5jdGlvbihhLGYpe3ZhciBiPWY9PUNLRURJVE9SLkVOVEVSX0JSLGM9dGhpcy5odG1sRW5jb2RlKGEucmVwbGFjZSgvXFxyXFxuL2csXCJcXG5cIikpLGM9Yy5yZXBsYWNlKC9cXHQvZyxcIlxceDI2bmJzcDtcXHgyNm5ic3A7IFxceDI2bmJzcDtcIiksaz1mPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCI7aWYoIWIpe3ZhciBkPS9cXG57Mn0vZztpZihkLnRlc3QoYykpdmFyIHE9XCJcXHgzY1wiK2srXCJcXHgzZVwiLG49XCJcXHgzYy9cIitrK1wiXFx4M2VcIixjPXErYy5yZXBsYWNlKGQsZnVuY3Rpb24oKXtyZXR1cm4gbitxfSkrbn1jPWMucmVwbGFjZSgvXFxuL2csXCJcXHgzY2JyXFx4M2VcIik7Ynx8KGM9Yy5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXHgzY2JyXFx4M2UoP1xceDNkXFx4M2MvXCIraytcIlxceDNlKVwiKSxmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMucmVwZWF0KGEsMil9KSk7Yz1jLnJlcGxhY2UoL14gfCAkL2csXCJcXHgyNm5ic3A7XCIpO3JldHVybiBjPWMucmVwbGFjZSgvKD58XFxzKSAvZyxcbmZ1bmN0aW9uKGEsZil7cmV0dXJuIGYrXCJcXHgyNm5ic3A7XCJ9KS5yZXBsYWNlKC8gKD89PCkvZyxcIlxceDI2bmJzcDtcIil9LGdldE5leHROdW1iZXI6ZnVuY3Rpb24oKXt2YXIgYT0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybisrYX19KCksZ2V0TmV4dElkOmZ1bmN0aW9uKCl7cmV0dXJuXCJja2VfXCIrdGhpcy5nZXROZXh0TnVtYmVyKCl9LGdldFVuaXF1ZUlkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiZVwiLGY9MDs4PmY7ZisrKWErPU1hdGguZmxvb3IoNjU1MzYqKDErTWF0aC5yYW5kb20oKSkpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7cmV0dXJuIGF9LG92ZXJyaWRlOmZ1bmN0aW9uKGEsZil7dmFyIGI9ZihhKTtiLnByb3RvdHlwZT1hLnByb3RvdHlwZTtyZXR1cm4gYn0sc2V0VGltZW91dDpmdW5jdGlvbihhLGYsYixjLGspe2t8fChrPXdpbmRvdyk7Ynx8KGI9ayk7cmV0dXJuIGsuc2V0VGltZW91dChmdW5jdGlvbigpe2M/YS5hcHBseShiLFtdLmNvbmNhdChjKSk6YS5hcHBseShiKX0sXG5mfHwwKX0sdHJpbTpmdW5jdGlvbigpe3ZhciBhPS8oPzpeWyBcXHRcXG5cXHJdKyl8KD86WyBcXHRcXG5cXHJdKyQpL2c7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiBmLnJlcGxhY2UoYSxcIlwiKX19KCksbHRyaW06ZnVuY3Rpb24oKXt2YXIgYT0vXlsgXFx0XFxuXFxyXSsvZztyZXR1cm4gZnVuY3Rpb24oZil7cmV0dXJuIGYucmVwbGFjZShhLFwiXCIpfX0oKSxydHJpbTpmdW5jdGlvbigpe3ZhciBhPS9bIFxcdFxcblxccl0rJC9nO3JldHVybiBmdW5jdGlvbihmKXtyZXR1cm4gZi5yZXBsYWNlKGEsXCJcIil9fSgpLGluZGV4T2Y6ZnVuY3Rpb24oYSxmKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBmKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7aWYoZihhW2JdKSlyZXR1cm4gYn1lbHNle2lmKGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGYpO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKWlmKGFbYl09PT1mKXJldHVybiBifXJldHVybi0xfSxzZWFyY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1DS0VESVRPUi50b29scy5pbmRleE9mKGEsXG5iKTtyZXR1cm4gMDw9Yz9hW2NdOm51bGx9LGJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fSxjcmVhdGVDbGFzczpmdW5jdGlvbihhKXt2YXIgYj1hLiQsYz1hLmJhc2Usaz1hLnByaXZhdGVzfHxhLl8sZD1hLnByb3RvO2E9YS5zdGF0aWNzOyFiJiYoYj1mdW5jdGlvbigpe2MmJnRoaXMuYmFzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtpZihrKXZhciBuPWIsYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuX3x8KHRoaXMuXz17fSksYjtmb3IoYiBpbiBrKXt2YXIgZj1rW2JdO2FbYl09XCJmdW5jdGlvblwiPT10eXBlb2YgZj9DS0VESVRPUi50b29scy5iaW5kKGYsdGhpcyk6Zn1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07YyYmKGIucHJvdG90eXBlPXRoaXMucHJvdG90eXBlZENvcHkoYy5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYi5iYXNlPWMsYi5iYXNlUHJvdG89Yy5wcm90b3R5cGUsYi5wcm90b3R5cGUuYmFzZT1cbmZ1bmN0aW9uKCl7dGhpcy5iYXNlPWMucHJvdG90eXBlLmJhc2U7Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iYXNlPWFyZ3VtZW50cy5jYWxsZWV9KTtkJiZ0aGlzLmV4dGVuZChiLnByb3RvdHlwZSxkLCEwKTthJiZ0aGlzLmV4dGVuZChiLGEsITApO3JldHVybiBifSxhZGRGdW5jdGlvbjpmdW5jdGlvbihiLGYpe3JldHVybiBhLnB1c2goZnVuY3Rpb24oKXtyZXR1cm4gYi5hcHBseShmfHx0aGlzLGFyZ3VtZW50cyl9KS0xfSxyZW1vdmVGdW5jdGlvbjpmdW5jdGlvbihiKXthW2JdPW51bGx9LGNhbGxGdW5jdGlvbjpmdW5jdGlvbihiKXt2YXIgZj1hW2JdO3JldHVybiBmJiZmLmFwcGx5KHdpbmRvdyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpfSxjc3NMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT0vXi0/XFxkK1xcLj9cXGQqcHgkLyxiO3JldHVybiBmdW5jdGlvbihjKXtiPUNLRURJVE9SLnRvb2xzLnRyaW0oYytcIlwiKStcInB4XCI7cmV0dXJuIGEudGVzdChiKT9cbmI6Y3x8XCJcIn19KCksY29udmVydFRvUHg6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7YXx8KGE9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IHN0eWxlXFx4M2RcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTlweDt0b3A6LTk5OTlweDttYXJnaW46MHB4O3BhZGRpbmc6MHB4O2JvcmRlcjowcHg7XCJcXHgzZVxceDNjL2RpdlxceDNlJyxDS0VESVRPUi5kb2N1bWVudCksQ0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpLmFwcGVuZChhKSk7cmV0dXJuLyUkLy50ZXN0KGIpP2I6KGEuc2V0U3R5bGUoXCJ3aWR0aFwiLGIpLGEuJC5jbGllbnRXaWR0aCl9fSgpLHJlcGVhdDpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheShiKzEpLmpvaW4oYSl9LHRyeVRoZXNlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPWFyZ3VtZW50cy5sZW5ndGg7YjxjO2IrKyl7dmFyIGs9YXJndW1lbnRzW2JdO3RyeXthPWsoKTticmVha31jYXRjaChkKXt9fXJldHVybiBhfSxcbmdlbktleTpmdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLmpvaW4oXCItXCIpfSxkZWZlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMsYz10aGlzO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5hcHBseShjLGIpfSwwKX19LG5vcm1hbGl6ZUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxrLGQ9Q0tFRElUT1IudG9vbHMucGFyc2VDc3NUZXh0KGEsITAsYik7Zm9yKGsgaW4gZCljLnB1c2goaytcIjpcIitkW2tdKTtjLnNvcnQoKTtyZXR1cm4gYy5sZW5ndGg/Yy5qb2luKFwiO1wiKStcIjtcIjpcIlwifSxjb252ZXJ0UmdiVG9IZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKD86cmdiXFwoXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccypcXCkpL2dpLGZ1bmN0aW9uKGEsYixjLGspe2E9W2IsYyxrXTtmb3IoYj0wOzM+YjtiKyspYVtiXT0oXCIwXCIrcGFyc2VJbnQoYVtiXSwxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG5yZXR1cm5cIiNcIithLmpvaW4oXCJcIil9KX0scGFyc2VDc3NUZXh0OmZ1bmN0aW9uKGEsYixjKXt2YXIgaz17fTtjJiYoYz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJzcGFuXCIpLGMuc2V0QXR0cmlidXRlKFwic3R5bGVcIixhKSxhPUNLRURJVE9SLnRvb2xzLmNvbnZlcnRSZ2JUb0hleChjLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpfHxcIlwiKSk7aWYoIWF8fFwiO1wiPT1hKXJldHVybiBrO2EucmVwbGFjZSgvJnF1b3Q7L2csJ1wiJykucmVwbGFjZSgvXFxzKihbXjo7XFxzXSspXFxzKjpcXHMqKFteO10rKVxccyooPz07fCQpL2csZnVuY3Rpb24oYSxjLGQpe2ImJihjPWMudG9Mb3dlckNhc2UoKSxcImZvbnQtZmFtaWx5XCI9PWMmJihkPWQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXCInXS9nLFwiXCIpLnJlcGxhY2UoL1xccyosXFxzKi9nLFwiLFwiKSksZD1DS0VESVRPUi50b29scy50cmltKGQpKTtrW2NdPWR9KTtyZXR1cm4ga30sd3JpdGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGMsaz1bXTtmb3IoYyBpbiBhKWsucHVzaChjK1xuXCI6XCIrYVtjXSk7YiYmay5zb3J0KCk7cmV0dXJuIGsuam9pbihcIjsgXCIpfSxvYmplY3RDb21wYXJlOmZ1bmN0aW9uKGEsYixjKXt2YXIgaztpZighYSYmIWIpcmV0dXJuITA7aWYoIWF8fCFiKXJldHVybiExO2ZvcihrIGluIGEpaWYoYVtrXSE9YltrXSlyZXR1cm4hMTtpZighYylmb3IoayBpbiBiKWlmKGFba10hPWJba10pcmV0dXJuITE7cmV0dXJuITB9LG9iamVjdEtleXM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKWIucHVzaChjKTtyZXR1cm4gYn0sY29udmVydEFycmF5VG9PYmplY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTsxPT1hcmd1bWVudHMubGVuZ3RoJiYoYj0hMCk7Zm9yKHZhciBrPTAsZD1hLmxlbmd0aDtrPGQ7KytrKWNbYVtrXV09YjtyZXR1cm4gY30sZml4RG9tYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhOzspdHJ5e2E9d2luZG93LnBhcmVudC5kb2N1bWVudC5kb21haW47YnJlYWt9Y2F0Y2goYil7YT1hP2EucmVwbGFjZSgvLis/KD86XFwufCQpLyxcblwiXCIpOmRvY3VtZW50LmRvbWFpbjtpZighYSlicmVhaztkb2N1bWVudC5kb21haW49YX1yZXR1cm4hIWF9LGV2ZW50c0J1ZmZlcjpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gaygpe249KG5ldyBEYXRlKS5nZXRUaW1lKCk7ZD0hMTtjP2IuY2FsbChjKTpiKCl9dmFyIGQsbj0wO3JldHVybntpbnB1dDpmdW5jdGlvbigpe2lmKCFkKXt2YXIgYj0obmV3IERhdGUpLmdldFRpbWUoKS1uO2I8YT9kPXNldFRpbWVvdXQoayxhLWIpOmsoKX19LHJlc2V0OmZ1bmN0aW9uKCl7ZCYmY2xlYXJUaW1lb3V0KGQpO2Q9bj0wfX19LGVuYWJsZUh0bWw1RWxlbWVudHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9XCJhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gYmRpIGNhbnZhcyBkYXRhIGRhdGFsaXN0IGRldGFpbHMgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFpbiBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRpbWUgdmlkZW9cIi5zcGxpdChcIiBcIiksXG5rPWMubGVuZ3RoLGQ7ay0tOylkPWEuY3JlYXRlRWxlbWVudChjW2tdKSxiJiZhLmFwcGVuZENoaWxkKGQpfSxjaGVja0lmQW55QXJyYXlJdGVtTWF0Y2hlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGs9YS5sZW5ndGg7YzxrOysrYylpZihhW2NdLm1hdGNoKGIpKXJldHVybiEwO3JldHVybiExfSxjaGVja0lmQW55T2JqZWN0UHJvcGVydHlNYXRjaGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjIGluIGEpaWYoYy5tYXRjaChiKSlyZXR1cm4hMDtyZXR1cm4hMX0sdHJhbnNwYXJlbnRJbWFnZURhdGE6XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQVBBQkFQLy8vd0FBQUNINUJBRUtBQUFBTEFBQUFBQUJBQUVBQUFJQ1JBRUFPd1xceDNkXFx4M2RcIixnZXRDb29raWU6ZnVuY3Rpb24oYSl7YT1hLnRvTG93ZXJDYXNlKCk7Zm9yKHZhciBiPWRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIiksYyxrLGQ9MDtkPGIubGVuZ3RoO2QrKylpZihjPWJbZF0uc3BsaXQoXCJcXHgzZFwiKSxcbms9ZGVjb2RlVVJJQ29tcG9uZW50KENLRURJVE9SLnRvb2xzLnRyaW0oY1swXSkudG9Mb3dlckNhc2UoKSksaz09PWEpcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgxPGMubGVuZ3RoP2NbMV06XCJcIik7cmV0dXJuIG51bGx9LHNldENvb2tpZTpmdW5jdGlvbihhLGIpe2RvY3VtZW50LmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCJcXHgzZFwiK2VuY29kZVVSSUNvbXBvbmVudChiKStcIjtwYXRoXFx4M2QvXCJ9LGdldENzcmZUb2tlbjpmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmdldENvb2tpZShcImNrQ3NyZlRva2VuXCIpO2lmKCFhfHw0MCE9YS5sZW5ndGgpe3ZhciBhPVtdLGI9XCJcIjtpZih3aW5kb3cuY3J5cHRvJiZ3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcylhPW5ldyBVaW50OEFycmF5KDQwKSx3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhKTtlbHNlIGZvcih2YXIgYz0wOzQwPmM7YysrKWEucHVzaChNYXRoLmZsb29yKDI1NipNYXRoLnJhbmRvbSgpKSk7XG5mb3IoYz0wO2M8YS5sZW5ndGg7YysrKXZhciBrPVwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIuY2hhckF0KGFbY10lMzYpLGI9YisoLjU8TWF0aC5yYW5kb20oKT9rLnRvVXBwZXJDYXNlKCk6ayk7YT1iO0NLRURJVE9SLnRvb2xzLnNldENvb2tpZShcImNrQ3NyZlRva2VuXCIsYSl9cmV0dXJuIGF9fX0pKCk7XG5DS0VESVRPUi5kdGQ9ZnVuY3Rpb24oKXt2YXIgYT1DS0VESVRPUi50b29scy5leHRlbmQsZD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1DS0VESVRPUi50b29scy5jbG9uZShhKSxrPTE7azxhcmd1bWVudHMubGVuZ3RoO2srKyl7Yj1hcmd1bWVudHNba107Zm9yKHZhciBkIGluIGIpZGVsZXRlIGNbZF19cmV0dXJuIGN9LGI9e30sYz17fSxlPXthZGRyZXNzOjEsYXJ0aWNsZToxLGFzaWRlOjEsYmxvY2txdW90ZToxLGRldGFpbHM6MSxkaXY6MSxkbDoxLGZpZWxkc2V0OjEsZmlndXJlOjEsZm9vdGVyOjEsZm9ybToxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxLGhlYWRlcjoxLGhncm91cDoxLGhyOjEsbWFpbjoxLG1lbnU6MSxuYXY6MSxvbDoxLHA6MSxwcmU6MSxzZWN0aW9uOjEsdGFibGU6MSx1bDoxfSxnPXtjb21tYW5kOjEsbGluazoxLG1ldGE6MSxub3NjcmlwdDoxLHNjcmlwdDoxLHN0eWxlOjF9LGw9e30saz17XCIjXCI6MX0sbj17Y2VudGVyOjEsZGlyOjEsbm9mcmFtZXM6MX07XG5hKGIse2E6MSxhYmJyOjEsYXJlYToxLGF1ZGlvOjEsYjoxLGJkaToxLGJkbzoxLGJyOjEsYnV0dG9uOjEsY2FudmFzOjEsY2l0ZToxLGNvZGU6MSxjb21tYW5kOjEsZGF0YWxpc3Q6MSxkZWw6MSxkZm46MSxlbToxLGVtYmVkOjEsaToxLGlmcmFtZToxLGltZzoxLGlucHV0OjEsaW5zOjEsa2JkOjEsa2V5Z2VuOjEsbGFiZWw6MSxtYXA6MSxtYXJrOjEsbWV0ZXI6MSxub3NjcmlwdDoxLG9iamVjdDoxLG91dHB1dDoxLHByb2dyZXNzOjEscToxLHJ1Ynk6MSxzOjEsc2FtcDoxLHNjcmlwdDoxLHNlbGVjdDoxLHNtYWxsOjEsc3BhbjoxLHN0cm9uZzoxLHN1YjoxLHN1cDoxLHRleHRhcmVhOjEsdGltZToxLHU6MSxcInZhclwiOjEsdmlkZW86MSx3YnI6MX0sayx7YWNyb255bToxLGFwcGxldDoxLGJhc2Vmb250OjEsYmlnOjEsZm9udDoxLGlzaW5kZXg6MSxzdHJpa2U6MSxzdHlsZToxLHR0OjF9KTthKGMsZSxiLG4pO2Q9e2E6ZChiLHthOjEsYnV0dG9uOjF9KSxhYmJyOmIsYWRkcmVzczpjLFxuYXJlYTpsLGFydGljbGU6Yyxhc2lkZTpjLGF1ZGlvOmEoe3NvdXJjZToxLHRyYWNrOjF9LGMpLGI6YixiYXNlOmwsYmRpOmIsYmRvOmIsYmxvY2txdW90ZTpjLGJvZHk6YyxicjpsLGJ1dHRvbjpkKGIse2E6MSxidXR0b246MX0pLGNhbnZhczpiLGNhcHRpb246YyxjaXRlOmIsY29kZTpiLGNvbDpsLGNvbGdyb3VwOntjb2w6MX0sY29tbWFuZDpsLGRhdGFsaXN0OmEoe29wdGlvbjoxfSxiKSxkZDpjLGRlbDpiLGRldGFpbHM6YSh7c3VtbWFyeToxfSxjKSxkZm46YixkaXY6YyxkbDp7ZHQ6MSxkZDoxfSxkdDpjLGVtOmIsZW1iZWQ6bCxmaWVsZHNldDphKHtsZWdlbmQ6MX0sYyksZmlnY2FwdGlvbjpjLGZpZ3VyZTphKHtmaWdjYXB0aW9uOjF9LGMpLGZvb3RlcjpjLGZvcm06YyxoMTpiLGgyOmIsaDM6YixoNDpiLGg1OmIsaDY6YixoZWFkOmEoe3RpdGxlOjEsYmFzZToxfSxnKSxoZWFkZXI6YyxoZ3JvdXA6e2gxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxfSxocjpsLGh0bWw6YSh7aGVhZDoxLFxuYm9keToxfSxjLGcpLGk6YixpZnJhbWU6ayxpbWc6bCxpbnB1dDpsLGluczpiLGtiZDpiLGtleWdlbjpsLGxhYmVsOmIsbGVnZW5kOmIsbGk6YyxsaW5rOmwsbWFpbjpjLG1hcDpjLG1hcms6YixtZW51OmEoe2xpOjF9LGMpLG1ldGE6bCxtZXRlcjpkKGIse21ldGVyOjF9KSxuYXY6Yyxub3NjcmlwdDphKHtsaW5rOjEsbWV0YToxLHN0eWxlOjF9LGIpLG9iamVjdDphKHtwYXJhbToxfSxiKSxvbDp7bGk6MX0sb3B0Z3JvdXA6e29wdGlvbjoxfSxvcHRpb246ayxvdXRwdXQ6YixwOmIscGFyYW06bCxwcmU6Yixwcm9ncmVzczpkKGIse3Byb2dyZXNzOjF9KSxxOmIscnA6YixydDpiLHJ1Ynk6YSh7cnA6MSxydDoxfSxiKSxzOmIsc2FtcDpiLHNjcmlwdDprLHNlY3Rpb246YyxzZWxlY3Q6e29wdGdyb3VwOjEsb3B0aW9uOjF9LHNtYWxsOmIsc291cmNlOmwsc3BhbjpiLHN0cm9uZzpiLHN0eWxlOmssc3ViOmIsc3VtbWFyeTphKHtoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MX0sYiksXG5zdXA6Yix0YWJsZTp7Y2FwdGlvbjoxLGNvbGdyb3VwOjEsdGhlYWQ6MSx0Zm9vdDoxLHRib2R5OjEsdHI6MX0sdGJvZHk6e3RyOjF9LHRkOmMsdGV4dGFyZWE6ayx0Zm9vdDp7dHI6MX0sdGg6Yyx0aGVhZDp7dHI6MX0sdGltZTpkKGIse3RpbWU6MX0pLHRpdGxlOmssdHI6e3RoOjEsdGQ6MX0sdHJhY2s6bCx1OmIsdWw6e2xpOjF9LFwidmFyXCI6Yix2aWRlbzphKHtzb3VyY2U6MSx0cmFjazoxfSxjKSx3YnI6bCxhY3JvbnltOmIsYXBwbGV0OmEoe3BhcmFtOjF9LGMpLGJhc2Vmb250OmwsYmlnOmIsY2VudGVyOmMsZGlhbG9nOmwsZGlyOntsaToxfSxmb250OmIsaXNpbmRleDpsLG5vZnJhbWVzOmMsc3RyaWtlOmIsdHQ6Yn07YShkLHskYmxvY2s6YSh7YXVkaW86MSxkZDoxLGR0OjEsZmlnY2FwdGlvbjoxLGxpOjEsdmlkZW86MX0sZSxuKSwkYmxvY2tMaW1pdDp7YXJ0aWNsZToxLGFzaWRlOjEsYXVkaW86MSxib2R5OjEsY2FwdGlvbjoxLGRldGFpbHM6MSxkaXI6MSxkaXY6MSxkbDoxLFxuZmllbGRzZXQ6MSxmaWdjYXB0aW9uOjEsZmlndXJlOjEsZm9vdGVyOjEsZm9ybToxLGhlYWRlcjoxLGhncm91cDoxLG1haW46MSxtZW51OjEsbmF2OjEsb2w6MSxzZWN0aW9uOjEsdGFibGU6MSx0ZDoxLHRoOjEsdHI6MSx1bDoxLHZpZGVvOjF9LCRjZGF0YTp7c2NyaXB0OjEsc3R5bGU6MX0sJGVkaXRhYmxlOnthZGRyZXNzOjEsYXJ0aWNsZToxLGFzaWRlOjEsYmxvY2txdW90ZToxLGJvZHk6MSxkZXRhaWxzOjEsZGl2OjEsZmllbGRzZXQ6MSxmaWdjYXB0aW9uOjEsZm9vdGVyOjEsZm9ybToxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxLGhlYWRlcjoxLGhncm91cDoxLG1haW46MSxuYXY6MSxwOjEscHJlOjEsc2VjdGlvbjoxfSwkZW1wdHk6e2FyZWE6MSxiYXNlOjEsYmFzZWZvbnQ6MSxicjoxLGNvbDoxLGNvbW1hbmQ6MSxkaWFsb2c6MSxlbWJlZDoxLGhyOjEsaW1nOjEsaW5wdXQ6MSxpc2luZGV4OjEsa2V5Z2VuOjEsbGluazoxLG1ldGE6MSxwYXJhbToxLHNvdXJjZToxLFxudHJhY2s6MSx3YnI6MX0sJGlubGluZTpiLCRsaXN0OntkbDoxLG9sOjEsdWw6MX0sJGxpc3RJdGVtOntkZDoxLGR0OjEsbGk6MX0sJG5vbkJvZHlDb250ZW50OmEoe2JvZHk6MSxoZWFkOjEsaHRtbDoxfSxkLmhlYWQpLCRub25FZGl0YWJsZTp7YXBwbGV0OjEsYXVkaW86MSxidXR0b246MSxlbWJlZDoxLGlmcmFtZToxLG1hcDoxLG9iamVjdDoxLG9wdGlvbjoxLHBhcmFtOjEsc2NyaXB0OjEsdGV4dGFyZWE6MSx2aWRlbzoxfSwkb2JqZWN0OnthcHBsZXQ6MSxhdWRpbzoxLGJ1dHRvbjoxLGhyOjEsaWZyYW1lOjEsaW1nOjEsaW5wdXQ6MSxvYmplY3Q6MSxzZWxlY3Q6MSx0YWJsZToxLHRleHRhcmVhOjEsdmlkZW86MX0sJHJlbW92ZUVtcHR5OnthYmJyOjEsYWNyb255bToxLGI6MSxiZGk6MSxiZG86MSxiaWc6MSxjaXRlOjEsY29kZToxLGRlbDoxLGRmbjoxLGVtOjEsZm9udDoxLGk6MSxpbnM6MSxsYWJlbDoxLGtiZDoxLG1hcms6MSxtZXRlcjoxLG91dHB1dDoxLHE6MSxydWJ5OjEsXG5zOjEsc2FtcDoxLHNtYWxsOjEsc3BhbjoxLHN0cmlrZToxLHN0cm9uZzoxLHN1YjoxLHN1cDoxLHRpbWU6MSx0dDoxLHU6MSxcInZhclwiOjF9LCR0YWJJbmRleDp7YToxLGFyZWE6MSxidXR0b246MSxpbnB1dDoxLG9iamVjdDoxLHNlbGVjdDoxLHRleHRhcmVhOjF9LCR0YWJsZUNvbnRlbnQ6e2NhcHRpb246MSxjb2w6MSxjb2xncm91cDoxLHRib2R5OjEsdGQ6MSx0Zm9vdDoxLHRoOjEsdGhlYWQ6MSx0cjoxfSwkdHJhbnNwYXJlbnQ6e2E6MSxhdWRpbzoxLGNhbnZhczoxLGRlbDoxLGluczoxLG1hcDoxLG5vc2NyaXB0OjEsb2JqZWN0OjEsdmlkZW86MX0sJGludGVybWVkaWF0ZTp7Y2FwdGlvbjoxLGNvbGdyb3VwOjEsZGQ6MSxkdDoxLGZpZ2NhcHRpb246MSxsZWdlbmQ6MSxsaToxLG9wdGdyb3VwOjEsb3B0aW9uOjEscnA6MSxydDoxLHN1bW1hcnk6MSx0Ym9keToxLHRkOjEsdGZvb3Q6MSx0aDoxLHRoZWFkOjEsdHI6MX19KTtyZXR1cm4gZH0oKTtcbkNLRURJVE9SLmRvbS5ldmVudD1mdW5jdGlvbihhKXt0aGlzLiQ9YX07XG5DS0VESVRPUi5kb20uZXZlbnQucHJvdG90eXBlPXtnZXRLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLmtleUNvZGV8fHRoaXMuJC53aGljaH0sZ2V0S2V5c3Ryb2tlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRLZXkoKTtpZih0aGlzLiQuY3RybEtleXx8dGhpcy4kLm1ldGFLZXkpYSs9Q0tFRElUT1IuQ1RSTDt0aGlzLiQuc2hpZnRLZXkmJihhKz1DS0VESVRPUi5TSElGVCk7dGhpcy4kLmFsdEtleSYmKGErPUNLRURJVE9SLkFMVCk7cmV0dXJuIGF9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJDtkLnByZXZlbnREZWZhdWx0P2QucHJldmVudERlZmF1bHQoKTpkLnJldHVyblZhbHVlPSExO2EmJnRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJDthLnN0b3BQcm9wYWdhdGlvbj9hLnN0b3BQcm9wYWdhdGlvbigpOmEuY2FuY2VsQnViYmxlPSEwfSxnZXRUYXJnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMuJC50YXJnZXR8fHRoaXMuJC5zcmNFbGVtZW50O3JldHVybiBhP25ldyBDS0VESVRPUi5kb20ubm9kZShhKTpudWxsfSxnZXRQaGFzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQuZXZlbnRQaGFzZXx8Mn0sZ2V0UGFnZU9mZnNldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0VGFyZ2V0KCkuZ2V0RG9jdW1lbnQoKS4kO3JldHVybnt4OnRoaXMuJC5wYWdlWHx8dGhpcy4kLmNsaWVudFgrKGEuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGEuYm9keS5zY3JvbGxMZWZ0KSx5OnRoaXMuJC5wYWdlWXx8dGhpcy4kLmNsaWVudFkrKGEuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8YS5ib2R5LnNjcm9sbFRvcCl9fX07Q0tFRElUT1IuQ1RSTD0xMTE0MTEyO0NLRURJVE9SLlNISUZUPTIyMjgyMjQ7Q0tFRElUT1IuQUxUPTQ0NTY0NDg7Q0tFRElUT1IuRVZFTlRfUEhBU0VfQ0FQVFVSSU5HPTE7Q0tFRElUT1IuRVZFTlRfUEhBU0VfQVRfVEFSR0VUPTI7XG5DS0VESVRPUi5FVkVOVF9QSEFTRV9CVUJCTElORz0zO0NLRURJVE9SLmRvbS5kb21PYmplY3Q9ZnVuY3Rpb24oYSl7YSYmKHRoaXMuJD1hKX07XG5DS0VESVRPUi5kb20uZG9tT2JqZWN0LnByb3RvdHlwZT1mdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBDS0VESVRPUiYmYS5maXJlKGIsbmV3IENLRURJVE9SLmRvbS5ldmVudChjKSl9fTtyZXR1cm57Z2V0UHJpdmF0ZTpmdW5jdGlvbigpe3ZhciBhOyhhPXRoaXMuZ2V0Q3VzdG9tRGF0YShcIl9cIikpfHx0aGlzLnNldEN1c3RvbURhdGEoXCJfXCIsYT17fSk7cmV0dXJuIGF9LG9uOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMuZ2V0Q3VzdG9tRGF0YShcIl9ja2VfbmF0aXZlTGlzdGVuZXJzXCIpO2J8fChiPXt9LHRoaXMuc2V0Q3VzdG9tRGF0YShcIl9ja2VfbmF0aXZlTGlzdGVuZXJzXCIsYikpO2JbZF18fChiPWJbZF09YSh0aGlzLGQpLHRoaXMuJC5hZGRFdmVudExpc3RlbmVyP3RoaXMuJC5hZGRFdmVudExpc3RlbmVyKGQsYiwhIUNLRURJVE9SLmV2ZW50LnVzZUNhcHR1cmUpOnRoaXMuJC5hdHRhY2hFdmVudCYmdGhpcy4kLmF0dGFjaEV2ZW50KFwib25cIitcbmQsYikpO3JldHVybiBDS0VESVRPUi5ldmVudC5wcm90b3R5cGUub24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihhKXtDS0VESVRPUi5ldmVudC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmhhc0xpc3RlbmVycyhhKSl7dmFyIGI9dGhpcy5nZXRDdXN0b21EYXRhKFwiX2NrZV9uYXRpdmVMaXN0ZW5lcnNcIiksYz1iJiZiW2FdO2MmJih0aGlzLiQucmVtb3ZlRXZlbnRMaXN0ZW5lcj90aGlzLiQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITEpOnRoaXMuJC5kZXRhY2hFdmVudCYmdGhpcy4kLmRldGFjaEV2ZW50KFwib25cIithLGMpLGRlbGV0ZSBiW2FdKX19LHJlbW92ZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VzdG9tRGF0YShcIl9ja2VfbmF0aXZlTGlzdGVuZXJzXCIpLGI7Zm9yKGIgaW4gYSl7dmFyIGM9YVtiXTt0aGlzLiQuZGV0YWNoRXZlbnQ/dGhpcy4kLmRldGFjaEV2ZW50KFwib25cIitcbmIsYyk6dGhpcy4kLnJlbW92ZUV2ZW50TGlzdGVuZXImJnRoaXMuJC5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSk7ZGVsZXRlIGFbYl19Q0tFRElUT1IuZXZlbnQucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycy5jYWxsKHRoaXMpfX19KCk7XG4oZnVuY3Rpb24oYSl7dmFyIGQ9e307Q0tFRElUT1Iub24oXCJyZXNldFwiLGZ1bmN0aW9uKCl7ZD17fX0pO2EuZXF1YWxzPWZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gYSYmYS4kPT09dGhpcy4kfWNhdGNoKGMpe3JldHVybiExfX07YS5zZXRDdXN0b21EYXRhPWZ1bmN0aW9uKGEsYyl7dmFyIGU9dGhpcy5nZXRVbmlxdWVJZCgpOyhkW2VdfHwoZFtlXT17fSkpW2FdPWM7cmV0dXJuIHRoaXN9O2EuZ2V0Q3VzdG9tRGF0YT1mdW5jdGlvbihhKXt2YXIgYz10aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdO3JldHVybihjPWMmJmRbY10pJiZhIGluIGM/Y1thXTpudWxsfTthLnJlbW92ZUN1c3RvbURhdGE9ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXSxjPWMmJmRbY10sZSxnO2MmJihlPWNbYV0sZz1hIGluIGMsZGVsZXRlIGNbYV0pO3JldHVybiBnP2U6bnVsbH07YS5jbGVhckN1c3RvbURhdGE9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO3ZhciBhPVxudGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXTthJiZkZWxldGUgZFthXX07YS5nZXRVbmlxdWVJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdfHwodGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXT1DS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCkpfTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihhKX0pKENLRURJVE9SLmRvbS5kb21PYmplY3QucHJvdG90eXBlKTtcbkNLRURJVE9SLmRvbS5ub2RlPWZ1bmN0aW9uKGEpe3JldHVybiBhP25ldyBDS0VESVRPUi5kb21bYS5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVD9cImRvY3VtZW50XCI6YS5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP1wiZWxlbWVudFwiOmEubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD9cInRleHRcIjphLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0NPTU1FTlQ/XCJjb21tZW50XCI6YS5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVD9cImRvY3VtZW50RnJhZ21lbnRcIjpcImRvbU9iamVjdFwiXShhKTp0aGlzfTtDS0VESVRPUi5kb20ubm9kZS5wcm90b3R5cGU9bmV3IENLRURJVE9SLmRvbS5kb21PYmplY3Q7Q0tFRElUT1IuTk9ERV9FTEVNRU5UPTE7Q0tFRElUT1IuTk9ERV9ET0NVTUVOVD05O0NLRURJVE9SLk5PREVfVEVYVD0zO0NLRURJVE9SLk5PREVfQ09NTUVOVD04O0NLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQ9MTE7XG5DS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUw9MDtDS0VESVRPUi5QT1NJVElPTl9ESVNDT05ORUNURUQ9MTtDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkc9MjtDS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkc9NDtDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUQ9ODtDS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUz0xNjtcbkNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20ubm9kZS5wcm90b3R5cGUse2FwcGVuZFRvOmZ1bmN0aW9uKGEsZCl7YS5hcHBlbmQodGhpcyxkKTtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oYSxkKXtmdW5jdGlvbiBiKGMpe2NbXCJkYXRhLWNrZS1leHBhbmRvXCJdJiYoY1tcImRhdGEtY2tlLWV4cGFuZG9cIl09ITEpO2lmKGMubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8Yy5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVClpZihkfHxjLm5vZGVUeXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fGMucmVtb3ZlQXR0cmlidXRlKFwiaWRcIiwhMSksYSl7Yz1jLmNoaWxkTm9kZXM7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYihjW2VdKX19ZnVuY3Rpb24gYyhiKXtpZihiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8Yi50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UKXtpZihiLnR5cGUhPUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpe3ZhciBkPVxuYi5nZXROYW1lKCk7XCI6XCI9PWRbMF0mJmIucmVuYW1lTm9kZShkLnN1YnN0cmluZygxKSl9aWYoYSlmb3IoZD0wO2Q8Yi5nZXRDaGlsZENvdW50KCk7ZCsrKWMoYi5nZXRDaGlsZChkKSl9fXZhciBlPXRoaXMuJC5jbG9uZU5vZGUoYSk7YihlKTtlPW5ldyBDS0VESVRPUi5kb20ubm9kZShlKTtDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24mJih0aGlzLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVHx8dGhpcy50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UKSYmYyhlKTtyZXR1cm4gZX0saGFzUHJldmlvdXM6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuJC5wcmV2aW91c1NpYmxpbmd9LGhhc05leHQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuJC5uZXh0U2libGluZ30saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oYSl7YS4kLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuJCxhLiQubmV4dFNpYmxpbmcpO3JldHVybiBhfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSl7YS4kLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuJCxcbmEuJCk7cmV0dXJuIGF9LGluc2VydEJlZm9yZU1lOmZ1bmN0aW9uKGEpe3RoaXMuJC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLiQsdGhpcy4kKTtyZXR1cm4gYX0sZ2V0QWRkcmVzczpmdW5jdGlvbihhKXtmb3IodmFyIGQ9W10sYj10aGlzLmdldERvY3VtZW50KCkuJC5kb2N1bWVudEVsZW1lbnQsYz10aGlzLiQ7YyYmYyE9Yjspe3ZhciBlPWMucGFyZW50Tm9kZTtlJiZkLnVuc2hpZnQodGhpcy5nZXRJbmRleC5jYWxsKHskOmN9LGEpKTtjPWV9cmV0dXJuIGR9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQodGhpcy4kLm93bmVyRG9jdW1lbnR8fHRoaXMuJC5wYXJlbnROb2RlLm93bmVyRG9jdW1lbnQpfSxnZXRJbmRleDpmdW5jdGlvbihhKXtmdW5jdGlvbiBkKGEsYyl7dmFyIG49Yz9hLm5leHRTaWJsaW5nOmEucHJldmlvdXNTaWJsaW5nO3JldHVybiBuJiZuLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/YihuKT9kKG4sXG5jKTpuOm51bGx9ZnVuY3Rpb24gYihhKXtyZXR1cm4hYS5ub2RlVmFsdWV8fGEubm9kZVZhbHVlPT1DS0VESVRPUi5kb20uc2VsZWN0aW9uLkZJTExJTkdfQ0hBUl9TRVFVRU5DRX12YXIgYz10aGlzLiQsZT0tMSxnO2lmKCF0aGlzLiQucGFyZW50Tm9kZXx8YSYmYy5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZiKGMpJiYhZChjKSYmIWQoYywhMCkpcmV0dXJuLTE7ZG8gYSYmYyE9dGhpcy4kJiZjLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihnfHxiKGMpKXx8KGUrKyxnPWMubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCk7d2hpbGUoYz1jLnByZXZpb3VzU2libGluZyk7cmV0dXJuIGV9LGdldE5leHRTb3VyY2VOb2RlOmZ1bmN0aW9uKGEsZCxiKXtpZihiJiYhYi5jYWxsKXt2YXIgYz1iO2I9ZnVuY3Rpb24oYSl7cmV0dXJuIWEuZXF1YWxzKGMpfX1hPSFhJiZ0aGlzLmdldEZpcnN0JiZ0aGlzLmdldEZpcnN0KCk7dmFyIGU7aWYoIWEpe2lmKHRoaXMudHlwZT09XG5DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmImJiExPT09Yih0aGlzLCEwKSlyZXR1cm4gbnVsbDthPXRoaXMuZ2V0TmV4dCgpfWZvcig7IWEmJihlPShlfHx0aGlzKS5nZXRQYXJlbnQoKSk7KXtpZihiJiYhMT09PWIoZSwhMCkpcmV0dXJuIG51bGw7YT1lLmdldE5leHQoKX1yZXR1cm4hYXx8YiYmITE9PT1iKGEpP251bGw6ZCYmZCE9YS50eXBlP2EuZ2V0TmV4dFNvdXJjZU5vZGUoITEsZCxiKTphfSxnZXRQcmV2aW91c1NvdXJjZU5vZGU6ZnVuY3Rpb24oYSxkLGIpe2lmKGImJiFiLmNhbGwpe3ZhciBjPWI7Yj1mdW5jdGlvbihhKXtyZXR1cm4hYS5lcXVhbHMoYyl9fWE9IWEmJnRoaXMuZ2V0TGFzdCYmdGhpcy5nZXRMYXN0KCk7dmFyIGU7aWYoIWEpe2lmKHRoaXMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiJiYhMT09PWIodGhpcywhMCkpcmV0dXJuIG51bGw7YT10aGlzLmdldFByZXZpb3VzKCl9Zm9yKDshYSYmKGU9KGV8fHRoaXMpLmdldFBhcmVudCgpKTspe2lmKGImJiExPT09XG5iKGUsITApKXJldHVybiBudWxsO2E9ZS5nZXRQcmV2aW91cygpfXJldHVybiFhfHxiJiYhMT09PWIoYSk/bnVsbDpkJiZhLnR5cGUhPWQ/YS5nZXRQcmV2aW91c1NvdXJjZU5vZGUoITEsZCxiKTphfSxnZXRQcmV2aW91czpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQsYjtkbyBiPShkPWQucHJldmlvdXNTaWJsaW5nKSYmMTAhPWQubm9kZVR5cGUmJm5ldyBDS0VESVRPUi5kb20ubm9kZShkKTt3aGlsZShiJiZhJiYhYShiKSk7cmV0dXJuIGJ9LGdldE5leHQ6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy4kLGI7ZG8gYj0oZD1kLm5leHRTaWJsaW5nKSYmbmV3IENLRURJVE9SLmRvbS5ub2RlKGQpO3doaWxlKGImJmEmJiFhKGIpKTtyZXR1cm4gYn0sZ2V0UGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJC5wYXJlbnROb2RlO3JldHVybiBkJiYoZC5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxhJiZkLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UKT9cbm5ldyBDS0VESVRPUi5kb20ubm9kZShkKTpudWxsfSxnZXRQYXJlbnRzOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMsYj1bXTtkbyBiW2E/XCJwdXNoXCI6XCJ1bnNoaWZ0XCJdKGQpO3doaWxlKGQ9ZC5nZXRQYXJlbnQoKSk7cmV0dXJuIGJ9LGdldENvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKGEpe2lmKGEuZXF1YWxzKHRoaXMpKXJldHVybiB0aGlzO2lmKGEuY29udGFpbnMmJmEuY29udGFpbnModGhpcykpcmV0dXJuIGE7dmFyIGQ9dGhpcy5jb250YWlucz90aGlzOnRoaXMuZ2V0UGFyZW50KCk7ZG8gaWYoZC5jb250YWlucyhhKSlyZXR1cm4gZDt3aGlsZShkPWQuZ2V0UGFyZW50KCkpO3JldHVybiBudWxsfSxnZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQsYj1hLiQ7aWYoZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbilyZXR1cm4gZC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKTtpZihkPT1iKXJldHVybiBDS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUw7aWYodGhpcy50eXBlPT1cbkNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2lmKGQuY29udGFpbnMpe2lmKGQuY29udGFpbnMoYikpcmV0dXJuIENLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TK0NLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORztpZihiLmNvbnRhaW5zKGQpKXJldHVybiBDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUQrQ0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HfWlmKFwic291cmNlSW5kZXhcImluIGQpcmV0dXJuIDA+ZC5zb3VyY2VJbmRleHx8MD5iLnNvdXJjZUluZGV4P0NLRURJVE9SLlBPU0lUSU9OX0RJU0NPTk5FQ1RFRDpkLnNvdXJjZUluZGV4PGIuc291cmNlSW5kZXg/Q0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HOkNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lOR31kPXRoaXMuZ2V0QWRkcmVzcygpO2E9YS5nZXRBZGRyZXNzKCk7Zm9yKHZhciBiPU1hdGgubWluKGQubGVuZ3RoLGEubGVuZ3RoKSxjPTA7YzxiO2MrKylpZihkW2NdIT1cbmFbY10pcmV0dXJuIGRbY108YVtjXT9DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkc6Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HO3JldHVybiBkLmxlbmd0aDxhLmxlbmd0aD9DS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUytDS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkc6Q0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVEK0NLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lOR30sZ2V0QXNjZW5kYW50OmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcy4kLGMsZTtkfHwoYj1iLnBhcmVudE5vZGUpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGE/KGU9ITAsYz1hKTooZT0hMSxjPWZ1bmN0aW9uKGIpe2I9XCJzdHJpbmdcIj09dHlwZW9mIGIubm9kZU5hbWU/Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOlwiXCI7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGE/Yj09YTpiIGluIGF9KTtmb3IoO2I7KXtpZihjKGU/bmV3IENLRURJVE9SLmRvbS5ub2RlKGIpOmIpKXJldHVybiBuZXcgQ0tFRElUT1IuZG9tLm5vZGUoYik7XG50cnl7Yj1iLnBhcmVudE5vZGV9Y2F0Y2goZyl7Yj1udWxsfX1yZXR1cm4gbnVsbH0saGFzQXNjZW5kYW50OmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcy4kO2R8fChiPWIucGFyZW50Tm9kZSk7Zm9yKDtiOyl7aWYoYi5ub2RlTmFtZSYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT1hKXJldHVybiEwO2I9Yi5wYXJlbnROb2RlfXJldHVybiExfSxtb3ZlOmZ1bmN0aW9uKGEsZCl7YS5hcHBlbmQodGhpcy5yZW1vdmUoKSxkKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJCxiPWQucGFyZW50Tm9kZTtpZihiKXtpZihhKWZvcig7YT1kLmZpcnN0Q2hpbGQ7KWIuaW5zZXJ0QmVmb3JlKGQucmVtb3ZlQ2hpbGQoYSksZCk7Yi5yZW1vdmVDaGlsZChkKX1yZXR1cm4gdGhpc30scmVwbGFjZTpmdW5jdGlvbihhKXt0aGlzLmluc2VydEJlZm9yZShhKTthLnJlbW92ZSgpfSx0cmltOmZ1bmN0aW9uKCl7dGhpcy5sdHJpbSgpO3RoaXMucnRyaW0oKX0sbHRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIGE7dGhpcy5nZXRGaXJzdCYmXG4oYT10aGlzLmdldEZpcnN0KCkpOyl7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQpe3ZhciBkPUNLRURJVE9SLnRvb2xzLmx0cmltKGEuZ2V0VGV4dCgpKSxiPWEuZ2V0TGVuZ3RoKCk7aWYoZClkLmxlbmd0aDxiJiYoYS5zcGxpdChiLWQubGVuZ3RoKSx0aGlzLiQucmVtb3ZlQ2hpbGQodGhpcy4kLmZpcnN0Q2hpbGQpKTtlbHNle2EucmVtb3ZlKCk7Y29udGludWV9fWJyZWFrfX0scnRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIGE7dGhpcy5nZXRMYXN0JiYoYT10aGlzLmdldExhc3QoKSk7KXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7dmFyIGQ9Q0tFRElUT1IudG9vbHMucnRyaW0oYS5nZXRUZXh0KCkpLGI9YS5nZXRMZW5ndGgoKTtpZihkKWQubGVuZ3RoPGImJihhLnNwbGl0KGQubGVuZ3RoKSx0aGlzLiQubGFzdENoaWxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy4kLmxhc3RDaGlsZCkpO2Vsc2V7YS5yZW1vdmUoKTtjb250aW51ZX19YnJlYWt9Q0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJlxuKGE9dGhpcy4kLmxhc3RDaGlsZCkmJjE9PWEudHlwZSYmXCJiclwiPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0saXNSZWFkT25seTpmdW5jdGlvbihhKXt2YXIgZD10aGlzO3RoaXMudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZD10aGlzLmdldFBhcmVudCgpKTtDS0VESVRPUi5lbnYuZWRnZSYmZCYmZC5pcyhcInRleHRhcmVhXCIsXCJpbnB1dFwiKSYmKGE9ITApO2lmKCFhJiZkJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZC4kLmlzQ29udGVudEVkaXRhYmxlKXJldHVybiEoZC4kLmlzQ29udGVudEVkaXRhYmxlfHxkLmRhdGEoXCJja2UtZWRpdGFibGVcIikpO2Zvcig7ZDspe2lmKGQuZGF0YShcImNrZS1lZGl0YWJsZVwiKSlyZXR1cm4hMTtpZihkLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm5cImZhbHNlXCI9PWQuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpO2Q9ZC5nZXRQYXJlbnQoKX1yZXR1cm4hMH19KTtcbkNLRURJVE9SLmRvbS53aW5kb3c9ZnVuY3Rpb24oYSl7Q0tFRElUT1IuZG9tLmRvbU9iamVjdC5jYWxsKHRoaXMsYSl9O0NLRURJVE9SLmRvbS53aW5kb3cucHJvdG90eXBlPW5ldyBDS0VESVRPUi5kb20uZG9tT2JqZWN0O1xuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS53aW5kb3cucHJvdG90eXBlLHtmb2N1czpmdW5jdGlvbigpe3RoaXMuJC5mb2N1cygpfSxnZXRWaWV3UGFuZVNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQuZG9jdW1lbnQsZD1cIkNTUzFDb21wYXRcIj09YS5jb21wYXRNb2RlO3JldHVybnt3aWR0aDooZD9hLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDphLmJvZHkuY2xpZW50V2lkdGgpfHwwLGhlaWdodDooZD9hLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ6YS5ib2R5LmNsaWVudEhlaWdodCl8fDB9fSxnZXRTY3JvbGxQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJDtpZihcInBhZ2VYT2Zmc2V0XCJpbiBhKXJldHVybnt4OmEucGFnZVhPZmZzZXR8fDAseTphLnBhZ2VZT2Zmc2V0fHwwfTthPWEuZG9jdW1lbnQ7cmV0dXJue3g6YS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8YS5ib2R5LnNjcm9sbExlZnR8fDAseTphLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fFxuYS5ib2R5LnNjcm9sbFRvcHx8MH19LGdldEZyYW1lOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLmZyYW1lRWxlbWVudDtyZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGEpOm51bGx9fSk7Q0tFRElUT1IuZG9tLmRvY3VtZW50PWZ1bmN0aW9uKGEpe0NLRURJVE9SLmRvbS5kb21PYmplY3QuY2FsbCh0aGlzLGEpfTtDS0VESVRPUi5kb20uZG9jdW1lbnQucHJvdG90eXBlPW5ldyBDS0VESVRPUi5kb20uZG9tT2JqZWN0O1xuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS5kb2N1bWVudC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9ET0NVTUVOVCxhcHBlbmRTdHlsZVNoZWV0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuJC5jcmVhdGVTdHlsZVNoZWV0KXRoaXMuJC5jcmVhdGVTdHlsZVNoZWV0KGEpO2Vsc2V7dmFyIGQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwibGlua1wiKTtkLnNldEF0dHJpYnV0ZXMoe3JlbDpcInN0eWxlc2hlZXRcIix0eXBlOlwidGV4dC9jc3NcIixocmVmOmF9KTt0aGlzLmdldEhlYWQoKS5hcHBlbmQoZCl9fSxhcHBlbmRTdHlsZVRleHQ6ZnVuY3Rpb24oYSl7aWYodGhpcy4kLmNyZWF0ZVN0eWxlU2hlZXQpe3ZhciBkPXRoaXMuJC5jcmVhdGVTdHlsZVNoZWV0KFwiXCIpO2QuY3NzVGV4dD1hfWVsc2V7dmFyIGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3R5bGVcIix0aGlzKTtiLmFwcGVuZChuZXcgQ0tFRElUT1IuZG9tLnRleHQoYSx0aGlzKSk7dGhpcy5nZXRIZWFkKCkuYXBwZW5kKGIpfXJldHVybiBkfHxcbmIuJC5zaGVldH0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbihhLGQpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhLHRoaXMpO2QmJihkLmF0dHJpYnV0ZXMmJmIuc2V0QXR0cmlidXRlcyhkLmF0dHJpYnV0ZXMpLGQuc3R5bGVzJiZiLnNldFN0eWxlcyhkLnN0eWxlcykpO3JldHVybiBifSxjcmVhdGVUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLnRleHQoYSx0aGlzKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmdldFdpbmRvdygpLmZvY3VzKCl9LGdldEFjdGl2ZTpmdW5jdGlvbigpe3ZhciBhO3RyeXthPXRoaXMuJC5hY3RpdmVFbGVtZW50fWNhdGNoKGQpe3JldHVybiBudWxsfXJldHVybiBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSl9LGdldEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9dGhpcy4kLmdldEVsZW1lbnRCeUlkKGEpKT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6bnVsbH0sZ2V0QnlBZGRyZXNzOmZ1bmN0aW9uKGEsZCl7Zm9yKHZhciBiPVxudGhpcy4kLmRvY3VtZW50RWxlbWVudCxjPTA7YiYmYzxhLmxlbmd0aDtjKyspe3ZhciBlPWFbY107aWYoZClmb3IodmFyIGc9LTEsbD0wO2w8Yi5jaGlsZE5vZGVzLmxlbmd0aDtsKyspe3ZhciBrPWIuY2hpbGROb2Rlc1tsXTtpZighMCE9PWR8fDMhPWsubm9kZVR5cGV8fCFrLnByZXZpb3VzU2libGluZ3x8MyE9ay5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGUpaWYoZysrLGc9PWUpe2I9azticmVha319ZWxzZSBiPWIuY2hpbGROb2Rlc1tlXX1yZXR1cm4gYj9uZXcgQ0tFRElUT1IuZG9tLm5vZGUoYik6bnVsbH0sZ2V0RWxlbWVudHNCeVRhZzpmdW5jdGlvbihhLGQpe0NLRURJVE9SLmVudi5pZSYmOD49ZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHwhZHx8KGE9ZCtcIjpcIithKTtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5ub2RlTGlzdCh0aGlzLiQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpfSxnZXRIZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbnJldHVybiBhPWE/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEpOnRoaXMuZ2V0RG9jdW1lbnRFbGVtZW50KCkuYXBwZW5kKG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImhlYWRcIiksITApfSxnZXRCb2R5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudCh0aGlzLiQuYm9keSl9LGdldERvY3VtZW50RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQodGhpcy4kLmRvY3VtZW50RWxlbWVudCl9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLndpbmRvdyh0aGlzLiQucGFyZW50V2luZG93fHx0aGlzLiQuZGVmYXVsdFZpZXcpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLiQub3BlbihcInRleHQvaHRtbFwiLFwicmVwbGFjZVwiKTtDS0VESVRPUi5lbnYuaWUmJihhPWEucmVwbGFjZSgvKD86Xlxccyo8IURPQ1RZUEVbXj5dKj8+KXxeL2ksJyRcXHgyNlxcblxceDNjc2NyaXB0IGRhdGEtY2tlLXRlbXBcXHgzZFwiMVwiXFx4M2UoJytcbkNLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtcXHgzYy9zY3JpcHRcXHgzZVwiKSk7dGhpcy4kLndyaXRlKGEpO3RoaXMuJC5jbG9zZSgpfSxmaW5kOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLm5vZGVMaXN0KHRoaXMuJC5xdWVyeVNlbGVjdG9yQWxsKGEpKX0sZmluZE9uZTpmdW5jdGlvbihhKXtyZXR1cm4oYT10aGlzLiQucXVlcnlTZWxlY3RvcihhKSk/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEpOm51bGx9LF9nZXRIdG1sNVNoaXZGcmFnOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDdXN0b21EYXRhKFwiaHRtbDVTaGl2RnJhZ1wiKTthfHwoYT10aGlzLiQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLENLRURJVE9SLnRvb2xzLmVuYWJsZUh0bWw1RWxlbWVudHMoYSwhMCksdGhpcy5zZXRDdXN0b21EYXRhKFwiaHRtbDVTaGl2RnJhZ1wiLGEpKTtyZXR1cm4gYX19KTtDS0VESVRPUi5kb20ubm9kZUxpc3Q9ZnVuY3Rpb24oYSl7dGhpcy4kPWF9O1xuQ0tFRElUT1IuZG9tLm5vZGVMaXN0LnByb3RvdHlwZT17Y291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLmxlbmd0aH0sZ2V0SXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gMD5hfHxhPj10aGlzLiQubGVuZ3RoP251bGw6KGE9dGhpcy4kW2FdKT9uZXcgQ0tFRElUT1IuZG9tLm5vZGUoYSk6bnVsbH19O0NLRURJVE9SLmRvbS5lbGVtZW50PWZ1bmN0aW9uKGEsZCl7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPShkP2QuJDpkb2N1bWVudCkuY3JlYXRlRWxlbWVudChhKSk7Q0tFRElUT1IuZG9tLmRvbU9iamVjdC5jYWxsKHRoaXMsYSl9O0NLRURJVE9SLmRvbS5lbGVtZW50LmdldD1mdW5jdGlvbihhKXtyZXR1cm4oYT1cInN0cmluZ1wiPT10eXBlb2YgYT9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKXx8ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoYSlbMF06YSkmJihhLiQ/YTpuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSkpfTtDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGU9bmV3IENLRURJVE9SLmRvbS5ub2RlO1xuQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWw9ZnVuY3Rpb24oYSxkKXt2YXIgYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJkaXZcIixkKTtiLnNldEh0bWwoYSk7cmV0dXJuIGIuZ2V0Rmlyc3QoKS5yZW1vdmUoKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyPWZ1bmN0aW9uKGEsZCxiLGMpe3ZhciBlPWQuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIpfHxkLnNldEN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9pZFwiLENLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKSkuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIpLGc9ZC5nZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfbmFtZXNcIil8fGQuc2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX25hbWVzXCIse30pLmdldEN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9uYW1lc1wiKTthW2VdPWQ7Z1tiXT0xO3JldHVybiBkLnNldEN1c3RvbURhdGEoYixjKX07XG5DS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBkIGluIGEpQ0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJNYXJrZXJzKGEsYVtkXSwxKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJNYXJrZXJzPWZ1bmN0aW9uKGEsZCxiKXt2YXIgYz1kLmdldEN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9uYW1lc1wiKSxlPWQuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIpLGc7Zm9yKGcgaW4gYylkLnJlbW92ZUN1c3RvbURhdGEoZyk7ZC5yZW1vdmVDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfbmFtZXNcIik7YiYmKGQucmVtb3ZlQ3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIpLGRlbGV0ZSBhW2VdKX07XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7cmV0dXJuLTE8KFwiIFwiK2ErXCIgXCIpLnJlcGxhY2UoZyxcIiBcIikuaW5kZXhPZihcIiBcIitiK1wiIFwiKX1mdW5jdGlvbiBkKGEpe3ZhciBiPSEwO2EuJC5pZHx8KGEuJC5pZD1cImNrZV90bXBfXCIrQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpLGI9ITEpO3JldHVybiBmdW5jdGlvbigpe2J8fGEucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fWZ1bmN0aW9uIGIoYSxiKXtyZXR1cm5cIiNcIithLiQuaWQrXCIgXCIrYi5zcGxpdCgvLFxccyovKS5qb2luKFwiLCAjXCIrYS4kLmlkK1wiIFwiKX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj0wLGM9MCxmPWxbYV0ubGVuZ3RoO2M8ZjtjKyspYis9cGFyc2VJbnQodGhpcy5nZXRDb21wdXRlZFN0eWxlKGxbYV1bY10pfHwwLDEwKXx8MDtyZXR1cm4gYn12YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKS5jbGFzc0xpc3QsZT1cInVuZGVmaW5lZFwiIT09dHlwZW9mIGUmJm51bGwhPT1TdHJpbmcoZS5hZGQpLm1hdGNoKC9cXFtOYXRpdmUgY29kZVxcXS9naSksXG5nPS9bXFxuXFx0XFxyXS9nO0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9FTEVNRU5ULGFkZENsYXNzOmU/ZnVuY3Rpb24oYSl7dGhpcy4kLmNsYXNzTGlzdC5hZGQoYSk7cmV0dXJuIHRoaXN9OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuJC5jbGFzc05hbWU7YyYmKGEoYyxiKXx8KGMrPVwiIFwiK2IpKTt0aGlzLiQuY2xhc3NOYW1lPWN8fGI7cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmU/ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kO2IuY2xhc3NMaXN0LnJlbW92ZShhKTtiLmNsYXNzTmFtZXx8Yi5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTtyZXR1cm4gdGhpc306ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtjJiZhKGMsYikmJigoYz1jLnJlcGxhY2UobmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiK2IrXCIoP1xceDNkXFxcXHN8JClcIiksXCJcIikucmVwbGFjZSgvXlxccysvLFwiXCIpKT90aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsXG5jKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpKTtyZXR1cm4gdGhpc30saGFzQ2xhc3M6ZnVuY3Rpb24oYil7cmV0dXJuIGEodGhpcy4kLmNsYXNzTmFtZSxiKX0sYXBwZW5kOmZ1bmN0aW9uKGEsYil7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPXRoaXMuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KGEpKTtiP3RoaXMuJC5pbnNlcnRCZWZvcmUoYS4kLHRoaXMuJC5maXJzdENoaWxkKTp0aGlzLiQuYXBwZW5kQ2hpbGQoYS4kKTtyZXR1cm4gYX0sYXBwZW5kSHRtbDpmdW5jdGlvbihhKXtpZih0aGlzLiQuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImRpdlwiLHRoaXMuZ2V0RG9jdW1lbnQoKSk7Yi5zZXRIdG1sKGEpO2IubW92ZUNoaWxkcmVuKHRoaXMpfWVsc2UgdGhpcy5zZXRIdG1sKGEpfSxhcHBlbmRUZXh0OmZ1bmN0aW9uKGEpe251bGwhPXRoaXMuJC50ZXh0JiZDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24/XG50aGlzLiQudGV4dCs9YTp0aGlzLmFwcGVuZChuZXcgQ0tFRElUT1IuZG9tLnRleHQoYSkpfSxhcHBlbmRCb2d1czpmdW5jdGlvbihhKXtpZihhfHxDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcil7Zm9yKGE9dGhpcy5nZXRMYXN0KCk7YSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJiFDS0VESVRPUi50b29scy5ydHJpbShhLmdldFRleHQoKSk7KWE9YS5nZXRQcmV2aW91cygpO2EmJmEuaXMmJmEuaXMoXCJiclwiKXx8KGE9dGhpcy5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoXCJiclwiKSxDS0VESVRPUi5lbnYuZ2Vja28mJmEuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiX21velwiKSx0aGlzLmFwcGVuZChhKSl9fSxicmVha1BhcmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5nZXREb2N1bWVudCgpKTtjLnNldFN0YXJ0QWZ0ZXIodGhpcyk7Yy5zZXRFbmRBZnRlcihhKTt2YXIgZj1jLmV4dHJhY3RDb250ZW50cyghMSxifHwhMSk7Yy5pbnNlcnROb2RlKHRoaXMucmVtb3ZlKCkpO1xuZi5pbnNlcnRBZnRlck5vZGUodGhpcyl9LGNvbnRhaW5zOmRvY3VtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGEpe3JldHVybiEhKHRoaXMuJC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhLiQpJjE2KX06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kO3JldHVybiBhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVD9iLmNvbnRhaW5zKGEuZ2V0UGFyZW50KCkuJCk6YiE9YS4kJiZiLmNvbnRhaW5zKGEuJCl9LGZvY3VzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RyeXt0aGlzLiQuZm9jdXMoKX1jYXRjaChiKXt9fXJldHVybiBmdW5jdGlvbihiKXtiP0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoYSwxMDAsdGhpcyk6YS5jYWxsKHRoaXMpfX0oKSxnZXRIdG1sOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLmlubmVySFRNTDtyZXR1cm4gQ0tFRElUT1IuZW52LmllP2EucmVwbGFjZSgvPFxcP1tePl0qPi9nLFwiXCIpOmF9LGdldE91dGVySHRtbDpmdW5jdGlvbigpe2lmKHRoaXMuJC5vdXRlckhUTUwpcmV0dXJuIHRoaXMuJC5vdXRlckhUTUwucmVwbGFjZSgvPFxcP1tePl0qPi8sXG5cIlwiKTt2YXIgYT10aGlzLiQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuYXBwZW5kQ2hpbGQodGhpcy4kLmNsb25lTm9kZSghMCkpO3JldHVybiBhLmlubmVySFRNTH0sZ2V0Q2xpZW50UmVjdDpmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSx0aGlzLiQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpOyFhLndpZHRoJiYoYS53aWR0aD1hLnJpZ2h0LWEubGVmdCk7IWEuaGVpZ2h0JiYoYS5oZWlnaHQ9YS5ib3R0b20tYS50b3ApO3JldHVybiBhfSxzZXRIdG1sOkNLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbj9mdW5jdGlvbihhKXt0cnl7dmFyIGI9dGhpcy4kO2lmKHRoaXMuZ2V0UGFyZW50KCkpcmV0dXJuIGIuaW5uZXJIVE1MPWE7dmFyIGM9dGhpcy5nZXREb2N1bWVudCgpLl9nZXRIdG1sNVNoaXZGcmFnKCk7Yy5hcHBlbmRDaGlsZChiKTtiLmlubmVySFRNTD1hO2MucmVtb3ZlQ2hpbGQoYik7cmV0dXJuIGF9Y2F0Y2goZil7dGhpcy4kLmlubmVySFRNTD1cblwiXCI7Yj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJib2R5XCIsdGhpcy5nZXREb2N1bWVudCgpKTtiLiQuaW5uZXJIVE1MPWE7Zm9yKGI9Yi5nZXRDaGlsZHJlbigpO2IuY291bnQoKTspdGhpcy5hcHBlbmQoYi5nZXRJdGVtKDApKTtyZXR1cm4gYX19OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLiQuaW5uZXJIVE1MPWF9LHNldFRleHQ6ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTthLmlubmVySFRNTD1cInhcIjthPWEudGV4dENvbnRlbnQ7cmV0dXJuIGZ1bmN0aW9uKGIpe3RoaXMuJFthP1widGV4dENvbnRlbnRcIjpcImlubmVyVGV4dFwiXT1ifX0oKSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kLmdldEF0dHJpYnV0ZShhLDIpfTtyZXR1cm4gQ0tFRElUT1IuZW52LmllJiYoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LnF1aXJrcyk/ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgXCJjbGFzc1wiOmE9XG5cImNsYXNzTmFtZVwiO2JyZWFrO2Nhc2UgXCJodHRwLWVxdWl2XCI6YT1cImh0dHBFcXVpdlwiO2JyZWFrO2Nhc2UgXCJuYW1lXCI6cmV0dXJuIHRoaXMuJC5uYW1lO2Nhc2UgXCJ0YWJpbmRleFwiOnJldHVybiBhPXRoaXMuJC5nZXRBdHRyaWJ1dGUoYSwyKSwwIT09YSYmMD09PXRoaXMuJC50YWJJbmRleCYmKGE9bnVsbCksYTtjYXNlIFwiY2hlY2tlZFwiOnJldHVybiBhPXRoaXMuJC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShhKSwoYS5zcGVjaWZpZWQ/YS5ub2RlVmFsdWU6dGhpcy4kLmNoZWNrZWQpP1wiY2hlY2tlZFwiOm51bGw7Y2FzZSBcImhzcGFjZVwiOmNhc2UgXCJ2YWx1ZVwiOnJldHVybiB0aGlzLiRbYV07Y2FzZSBcInN0eWxlXCI6cmV0dXJuIHRoaXMuJC5zdHlsZS5jc3NUZXh0O2Nhc2UgXCJjb250ZW50ZWRpdGFibGVcIjpjYXNlIFwiY29udGVudEVkaXRhYmxlXCI6cmV0dXJuIHRoaXMuJC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImNvbnRlbnRFZGl0YWJsZVwiKS5zcGVjaWZpZWQ/dGhpcy4kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKTpcbm51bGx9cmV0dXJuIHRoaXMuJC5nZXRBdHRyaWJ1dGUoYSwyKX06YX0oKSxnZXRDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLm5vZGVMaXN0KHRoaXMuJC5jaGlsZE5vZGVzKX0sZ2V0Q29tcHV0ZWRTdHlsZTpkb2N1bWVudC5kZWZhdWx0VmlldyYmZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZT9mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFdpbmRvdygpLiQuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiQsbnVsbCk7cmV0dXJuIGI/Yi5nZXRQcm9wZXJ0eVZhbHVlKGEpOlwiXCJ9OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLiQuY3VycmVudFN0eWxlW0NLRURJVE9SLnRvb2xzLmNzc1N0eWxlVG9Eb21TdHlsZShhKV19LGdldER0ZDpmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLmR0ZFt0aGlzLmdldE5hbWUoKV07dGhpcy5nZXREdGQ9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGF9LGdldEVsZW1lbnRzQnlUYWc6Q0tFRElUT1IuZG9tLmRvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5VGFnLFxuZ2V0VGFiSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQudGFiSW5kZXg7cmV0dXJuIDAhPT1hfHxDS0VESVRPUi5kdGQuJHRhYkluZGV4W3RoaXMuZ2V0TmFtZSgpXXx8MD09PXBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiksMTApP2E6LTF9LGdldFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLnRleHRDb250ZW50fHx0aGlzLiQuaW5uZXJUZXh0fHxcIlwifSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpLmdldFdpbmRvdygpfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQuaWR8fG51bGx9LGdldE5hbWVBdHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLm5hbWV8fG51bGx9LGdldE5hbWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihDS0VESVRPUi5lbnYuaWUmJjg+PWRvY3VtZW50LmRvY3VtZW50TW9kZSl7dmFyIGI9dGhpcy4kLnNjb3BlTmFtZTtcIkhUTUxcIiE9XG5iJiYoYT1iLnRvTG93ZXJDYXNlKCkrXCI6XCIrYSl9dGhpcy5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O3JldHVybiB0aGlzLmdldE5hbWUoKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLnZhbHVlfSxnZXRGaXJzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQuZmlyc3RDaGlsZDsoYj1iJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoYikpJiZhJiYhYShiKSYmKGI9Yi5nZXROZXh0KGEpKTtyZXR1cm4gYn0sZ2V0TGFzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQubGFzdENoaWxkOyhiPWImJm5ldyBDS0VESVRPUi5kb20ubm9kZShiKSkmJmEmJiFhKGIpJiYoYj1iLmdldFByZXZpb3VzKGEpKTtyZXR1cm4gYn0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJC5zdHlsZVtDS0VESVRPUi50b29scy5jc3NTdHlsZVRvRG9tU3R5bGUoYSldfSxpczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TmFtZSgpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pcmV0dXJuISFhcmd1bWVudHNbMF1bYV07XG5mb3IodmFyIGI9MDtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKWlmKGFyZ3VtZW50c1tiXT09YSlyZXR1cm4hMDtyZXR1cm4hMX0saXNFZGl0YWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE5hbWUoKTtyZXR1cm4gdGhpcy5pc1JlYWRPbmx5KCl8fFwibm9uZVwiPT10aGlzLmdldENvbXB1dGVkU3R5bGUoXCJkaXNwbGF5XCIpfHxcImhpZGRlblwiPT10aGlzLmdldENvbXB1dGVkU3R5bGUoXCJ2aXNpYmlsaXR5XCIpfHxDS0VESVRPUi5kdGQuJG5vbkVkaXRhYmxlW2JdfHxDS0VESVRPUi5kdGQuJGVtcHR5W2JdfHx0aGlzLmlzKFwiYVwiKSYmKHRoaXMuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHx0aGlzLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikpJiYhdGhpcy5nZXRDaGlsZENvdW50KCk/ITE6ITEhPT1hPyhhPUNLRURJVE9SLmR0ZFtiXXx8Q0tFRElUT1IuZHRkLnNwYW4sISghYXx8IWFbXCIjXCJdKSk6ITB9LGlzSWRlbnRpY2FsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoMCwxKTthPWEuY2xvbmUoMCxcbjEpO2IucmVtb3ZlQXR0cmlidXRlcyhbXCJfbW96X2RpcnR5XCIsXCJkYXRhLWNrZS1leHBhbmRvXCIsXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCIsXCJkYXRhLWNrZS1zYXZlZC1uYW1lXCJdKTthLnJlbW92ZUF0dHJpYnV0ZXMoW1wiX21vel9kaXJ0eVwiLFwiZGF0YS1ja2UtZXhwYW5kb1wiLFwiZGF0YS1ja2Utc2F2ZWQtaHJlZlwiLFwiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXSk7aWYoYi4kLmlzRXF1YWxOb2RlKXJldHVybiBiLiQuc3R5bGUuY3NzVGV4dD1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGIuJC5zdHlsZS5jc3NUZXh0KSxhLiQuc3R5bGUuY3NzVGV4dD1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGEuJC5zdHlsZS5jc3NUZXh0KSxiLiQuaXNFcXVhbE5vZGUoYS4kKTtiPWIuZ2V0T3V0ZXJIdG1sKCk7YT1hLmdldE91dGVySHRtbCgpO2lmKENLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbiYmdGhpcy5pcyhcImFcIikpe3ZhciBjPXRoaXMuZ2V0UGFyZW50KCk7XG5jLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGM9Yy5jbG9uZSgpLGMuc2V0SHRtbChiKSxiPWMuZ2V0SHRtbCgpLGMuc2V0SHRtbChhKSxhPWMuZ2V0SHRtbCgpKX1yZXR1cm4gYj09YX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMuJC5vZmZzZXRIZWlnaHR8fHRoaXMuJC5vZmZzZXRXaWR0aCkmJlwiaGlkZGVuXCIhPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcInZpc2liaWxpdHlcIiksYixjO2EmJkNLRURJVE9SLmVudi53ZWJraXQmJihiPXRoaXMuZ2V0V2luZG93KCksIWIuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpKSYmKGM9Yi4kLmZyYW1lRWxlbWVudCkmJihhPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYykpLmlzVmlzaWJsZSgpKSk7cmV0dXJuISFhfSxpc0VtcHR5SW5saW5lUmVtb3ZlYWJsZTpmdW5jdGlvbigpe2lmKCFDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3RoaXMuZ2V0TmFtZSgpXSlyZXR1cm4hMTtmb3IodmFyIGE9dGhpcy5nZXRDaGlsZHJlbigpLFxuYj0wLGM9YS5jb3VudCgpO2I8YztiKyspe3ZhciBmPWEuZ2V0SXRlbShiKTtpZihmLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWYuZGF0YShcImNrZS1ib29rbWFya1wiKSlpZihmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWYuaXNFbXB0eUlubGluZVJlbW92ZWFibGUoKXx8Zi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJkNLRURJVE9SLnRvb2xzLnRyaW0oZi5nZXRUZXh0KCkpKXJldHVybiExfXJldHVybiEwfSxoYXNBdHRyaWJ1dGVzOkNLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpP2Z1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuJC5hdHRyaWJ1dGVzLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtzd2l0Y2goYy5ub2RlTmFtZSl7Y2FzZSBcImNsYXNzXCI6aWYodGhpcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSlyZXR1cm4hMDtjYXNlIFwiZGF0YS1ja2UtZXhwYW5kb1wiOmNvbnRpbnVlO2RlZmF1bHQ6aWYoYy5zcGVjaWZpZWQpcmV0dXJuITB9fXJldHVybiExfTpcbmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLmF0dHJpYnV0ZXMsYj1hLmxlbmd0aCxjPXtcImRhdGEtY2tlLWV4cGFuZG9cIjoxLF9tb3pfZGlydHk6MX07cmV0dXJuIDA8YiYmKDI8Ynx8IWNbYVswXS5ub2RlTmFtZV18fDI9PWImJiFjW2FbMV0ubm9kZU5hbWVdKX0saGFzQXR0cmlidXRlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXt2YXIgYz10aGlzLiQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYik7aWYoXCJpbnB1dFwiPT10aGlzLmdldE5hbWUoKSlzd2l0Y2goYil7Y2FzZSBcImNsYXNzXCI6cmV0dXJuIDA8dGhpcy4kLmNsYXNzTmFtZS5sZW5ndGg7Y2FzZSBcImNoZWNrZWRcIjpyZXR1cm4hIXRoaXMuJC5jaGVja2VkO2Nhc2UgXCJ2YWx1ZVwiOnJldHVybiBiPXRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxcImNoZWNrYm94XCI9PWJ8fFwicmFkaW9cIj09Yj9cIm9uXCIhPXRoaXMuJC52YWx1ZTohIXRoaXMuJC52YWx1ZX1yZXR1cm4gYz9jLnNwZWNpZmllZDohMX1yZXR1cm4gQ0tFRElUT1IuZW52LmllP1xuOD5DS0VESVRPUi5lbnYudmVyc2lvbj9mdW5jdGlvbihiKXtyZXR1cm5cIm5hbWVcIj09Yj8hIXRoaXMuJC5uYW1lOmEuY2FsbCh0aGlzLGIpfTphOmZ1bmN0aW9uKGEpe3JldHVybiEhdGhpcy4kLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfX0oKSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIil9LG1vdmVDaGlsZHJlbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJDthPWEuJDtpZihjIT1hKXt2YXIgZjtpZihiKWZvcig7Zj1jLmxhc3RDaGlsZDspYS5pbnNlcnRCZWZvcmUoYy5yZW1vdmVDaGlsZChmKSxhLmZpcnN0Q2hpbGQpO2Vsc2UgZm9yKDtmPWMuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChjLnJlbW92ZUNoaWxkKGYpKX19LG1lcmdlU2libGluZ3M6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyxmKXtpZihjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7Zm9yKHZhciBkPVtdO2MuZGF0YShcImNrZS1ib29rbWFya1wiKXx8Yy5pc0VtcHR5SW5saW5lUmVtb3ZlYWJsZSgpOylpZihkLnB1c2goYyksXG5jPWY/Yy5nZXROZXh0KCk6Yy5nZXRQcmV2aW91cygpLCFjfHxjLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm47aWYoYi5pc0lkZW50aWNhbChjKSl7Zm9yKHZhciBrPWY/Yi5nZXRMYXN0KCk6Yi5nZXRGaXJzdCgpO2QubGVuZ3RoOylkLnNoaWZ0KCkubW92ZShiLCFmKTtjLm1vdmVDaGlsZHJlbihiLCFmKTtjLnJlbW92ZSgpO2smJmsudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZrLm1lcmdlU2libGluZ3MoKX19fXJldHVybiBmdW5jdGlvbihiKXtpZighMT09PWJ8fENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbdGhpcy5nZXROYW1lKCldfHx0aGlzLmlzKFwiYVwiKSlhKHRoaXMsdGhpcy5nZXROZXh0KCksITApLGEodGhpcyx0aGlzLmdldFByZXZpb3VzKCkpfX0oKSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZXMoe2Rpc3BsYXk6XCJcIix2aXNpYmlsaXR5OlwiXCJ9KX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxiKXt0aGlzLiQuc2V0QXR0cmlidXRlKGEsXG5iKTtyZXR1cm4gdGhpc307cmV0dXJuIENLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpP2Z1bmN0aW9uKGIsYyl7XCJjbGFzc1wiPT1iP3RoaXMuJC5jbGFzc05hbWU9YzpcInN0eWxlXCI9PWI/dGhpcy4kLnN0eWxlLmNzc1RleHQ9YzpcInRhYmluZGV4XCI9PWI/dGhpcy4kLnRhYkluZGV4PWM6XCJjaGVja2VkXCI9PWI/dGhpcy4kLmNoZWNrZWQ9YzpcImNvbnRlbnRlZGl0YWJsZVwiPT1iP2EuY2FsbCh0aGlzLFwiY29udGVudEVkaXRhYmxlXCIsYyk6YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9OkNLRURJVE9SLmVudi5pZThDb21wYXQmJkNLRURJVE9SLmVudi5zZWN1cmU/ZnVuY3Rpb24oYixjKXtpZihcInNyY1wiPT1iJiZjLm1hdGNoKC9eaHR0cDpcXC9cXC8vKSl0cnl7YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Y2F0Y2goZil7fWVsc2UgYS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9OmF9KCksc2V0QXR0cmlidXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl0aGlzLnNldEF0dHJpYnV0ZShiLFxuYVtiXSk7cmV0dXJuIHRoaXN9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuJC52YWx1ZT1hO3JldHVybiB0aGlzfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXt0aGlzLiQucmVtb3ZlQXR0cmlidXRlKGEpfTtyZXR1cm4gQ0tFRElUT1IuZW52LmllJiYoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LnF1aXJrcyk/ZnVuY3Rpb24oYSl7XCJjbGFzc1wiPT1hP2E9XCJjbGFzc05hbWVcIjpcInRhYmluZGV4XCI9PWE/YT1cInRhYkluZGV4XCI6XCJjb250ZW50ZWRpdGFibGVcIj09YSYmKGE9XCJjb250ZW50RWRpdGFibGVcIik7dGhpcy4kLnJlbW92ZUF0dHJpYnV0ZShhKX06YX0oKSxyZW1vdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpZm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYVtiXSk7ZWxzZSBmb3IoYiBpbiBhKWEuaGFzT3duUHJvcGVydHkoYikmJnRoaXMucmVtb3ZlQXR0cmlidXRlKGIpfSxcbnJlbW92ZVN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuJC5zdHlsZTtpZihiLnJlbW92ZVByb3BlcnR5fHxcImJvcmRlclwiIT1hJiZcIm1hcmdpblwiIT1hJiZcInBhZGRpbmdcIiE9YSliLnJlbW92ZVByb3BlcnR5P2IucmVtb3ZlUHJvcGVydHkoYSk6Yi5yZW1vdmVBdHRyaWJ1dGUoQ0tFRElUT1IudG9vbHMuY3NzU3R5bGVUb0RvbVN0eWxlKGEpKSx0aGlzLiQuc3R5bGUuY3NzVGV4dHx8dGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtlbHNle3ZhciBjPVtcInRvcFwiLFwibGVmdFwiLFwicmlnaHRcIixcImJvdHRvbVwiXSxmO1wiYm9yZGVyXCI9PWEmJihmPVtcImNvbG9yXCIsXCJzdHlsZVwiLFwid2lkdGhcIl0pO2Zvcih2YXIgYj1bXSxkPTA7ZDxjLmxlbmd0aDtkKyspaWYoZilmb3IodmFyIGU9MDtlPGYubGVuZ3RoO2UrKyliLnB1c2goW2EsY1tkXSxmW2VdXS5qb2luKFwiLVwiKSk7ZWxzZSBiLnB1c2goW2EsY1tkXV0uam9pbihcIi1cIikpO2ZvcihhPTA7YTxiLmxlbmd0aDthKyspdGhpcy5yZW1vdmVTdHlsZShiW2FdKX19LFxuc2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXt0aGlzLiQuc3R5bGVbQ0tFRElUT1IudG9vbHMuY3NzU3R5bGVUb0RvbVN0eWxlKGEpXT1iO3JldHVybiB0aGlzfSxzZXRTdHlsZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpdGhpcy5zZXRTdHlsZShiLGFbYl0pO3JldHVybiB0aGlzfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe0NLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbj8oYT1NYXRoLnJvdW5kKDEwMCphKSx0aGlzLnNldFN0eWxlKFwiZmlsdGVyXCIsMTAwPD1hP1wiXCI6XCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEob3BhY2l0eVxceDNkXCIrYStcIilcIikpOnRoaXMuc2V0U3R5bGUoXCJvcGFjaXR5XCIsYSl9LHVuc2VsZWN0YWJsZTpmdW5jdGlvbigpe3RoaXMuc2V0U3R5bGVzKENLRURJVE9SLnRvb2xzLmNzc1ZlbmRvclByZWZpeChcInVzZXItc2VsZWN0XCIsXCJub25lXCIpKTtpZihDS0VESVRPUi5lbnYuaWUpe3RoaXMuc2V0QXR0cmlidXRlKFwidW5zZWxlY3RhYmxlXCIsXG5cIm9uXCIpO2Zvcih2YXIgYSxiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZyhcIipcIiksYz0wLGY9Yi5jb3VudCgpO2M8ZjtjKyspYT1iLmdldEl0ZW0oYyksYS5zZXRBdHRyaWJ1dGUoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpfX0sZ2V0UG9zaXRpb25lZEFuY2VzdG9yOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXM7XCJodG1sXCIhPWEuZ2V0TmFtZSgpOyl7aWYoXCJzdGF0aWNcIiE9YS5nZXRDb21wdXRlZFN0eWxlKFwicG9zaXRpb25cIikpcmV0dXJuIGE7YT1hLmdldFBhcmVudCgpfXJldHVybiBudWxsfSxnZXREb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz0wLGY9dGhpcy5nZXREb2N1bWVudCgpLGQ9Zi5nZXRCb2R5KCksZT1cIkJhY2tDb21wYXRcIj09Zi4kLmNvbXBhdE1vZGU7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7dmFyIHU9dGhpcy4kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGc9Zi4kLmRvY3VtZW50RWxlbWVudCxxPWcuY2xpZW50VG9wfHxcbmQuJC5jbGllbnRUb3B8fDAseT1nLmNsaWVudExlZnR8fGQuJC5jbGllbnRMZWZ0fHwwLGw9ITA7Q0tFRElUT1IuZW52LmllJiYobD1mLmdldERvY3VtZW50RWxlbWVudCgpLmNvbnRhaW5zKHRoaXMpLGY9Zi5nZXRCb2R5KCkuY29udGFpbnModGhpcyksbD1lJiZmfHwhZSYmbCk7bCYmKENLRURJVE9SLmVudi53ZWJraXR8fENLRURJVE9SLmVudi5pZSYmMTI8PUNLRURJVE9SLmVudi52ZXJzaW9uPyhiPWQuJC5zY3JvbGxMZWZ0fHxnLnNjcm9sbExlZnQsYz1kLiQuc2Nyb2xsVG9wfHxnLnNjcm9sbFRvcCk6KGM9ZT9kLiQ6ZyxiPWMuc2Nyb2xsTGVmdCxjPWMuc2Nyb2xsVG9wKSxiPXUubGVmdCtiLXksYz11LnRvcCtjLXEpfWVsc2UgZm9yKHE9dGhpcyx5PW51bGw7cSYmXCJib2R5XCIhPXEuZ2V0TmFtZSgpJiZcImh0bWxcIiE9cS5nZXROYW1lKCk7KXtiKz1xLiQub2Zmc2V0TGVmdC1xLiQuc2Nyb2xsTGVmdDtjKz1xLiQub2Zmc2V0VG9wLXEuJC5zY3JvbGxUb3A7cS5lcXVhbHModGhpcyl8fFxuKGIrPXEuJC5jbGllbnRMZWZ0fHwwLGMrPXEuJC5jbGllbnRUb3B8fDApO2Zvcig7eSYmIXkuZXF1YWxzKHEpOyliLT15LiQuc2Nyb2xsTGVmdCxjLT15LiQuc2Nyb2xsVG9wLHk9eS5nZXRQYXJlbnQoKTt5PXE7cT0odT1xLiQub2Zmc2V0UGFyZW50KT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQodSk6bnVsbH1hJiYodT10aGlzLmdldFdpbmRvdygpLHE9YS5nZXRXaW5kb3coKSwhdS5lcXVhbHMocSkmJnUuJC5mcmFtZUVsZW1lbnQmJihhPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQodS4kLmZyYW1lRWxlbWVudCkpLmdldERvY3VtZW50UG9zaXRpb24oYSksYis9YS54LGMrPWEueSkpO2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3R8fCFDS0VESVRPUi5lbnYuZ2Vja298fGV8fChiKz10aGlzLiQuY2xpZW50TGVmdD8xOjAsYys9dGhpcy4kLmNsaWVudFRvcD8xOjApO3JldHVybnt4OmIseTpjfX0sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLmdldFBhcmVudCgpO2lmKGIpe2RvIGlmKChiLiQuY2xpZW50V2lkdGgmJmIuJC5jbGllbnRXaWR0aDxiLiQuc2Nyb2xsV2lkdGh8fGIuJC5jbGllbnRIZWlnaHQmJmIuJC5jbGllbnRIZWlnaHQ8Yi4kLnNjcm9sbEhlaWdodCkmJiFiLmlzKFwiYm9keVwiKSYmdGhpcy5zY3JvbGxJbnRvUGFyZW50KGIsYSwxKSxiLmlzKFwiaHRtbFwiKSl7dmFyIGM9Yi5nZXRXaW5kb3coKTt0cnl7dmFyIGY9Yy4kLmZyYW1lRWxlbWVudDtmJiYoYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZikpfWNhdGNoKGQpe319d2hpbGUoYj1iLmdldFBhcmVudCgpKX19LHNjcm9sbEludG9QYXJlbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBmLGQsZSx1O2Z1bmN0aW9uIGcoYixjKXsvYm9keXxodG1sLy50ZXN0KGEuZ2V0TmFtZSgpKT9hLmdldFdpbmRvdygpLiQuc2Nyb2xsQnkoYixjKTooYS4kLnNjcm9sbExlZnQrPWIsYS4kLnNjcm9sbFRvcCs9Yyl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjPXt4OjAseTowfTtpZighYS5pcyhsP1xuXCJib2R5XCI6XCJodG1sXCIpKXt2YXIgZj1hLiQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Yy54PWYubGVmdDtjLnk9Zi50b3B9Zj1hLmdldFdpbmRvdygpO2YuZXF1YWxzKGIpfHwoZj1xKENLRURJVE9SLmRvbS5lbGVtZW50LmdldChmLiQuZnJhbWVFbGVtZW50KSxiKSxjLngrPWYueCxjLnkrPWYueSk7cmV0dXJuIGN9ZnVuY3Rpb24geShhLGIpe3JldHVybiBwYXJzZUludChhLmdldENvbXB1dGVkU3R5bGUoXCJtYXJnaW4tXCIrYil8fDAsMTApfHwwfSFhJiYoYT10aGlzLmdldFdpbmRvdygpKTtlPWEuZ2V0RG9jdW1lbnQoKTt2YXIgbD1cIkJhY2tDb21wYXRcIj09ZS4kLmNvbXBhdE1vZGU7YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS53aW5kb3cmJihhPWw/ZS5nZXRCb2R5KCk6ZS5nZXREb2N1bWVudEVsZW1lbnQoKSk7ZT1hLmdldFdpbmRvdygpO2Q9cSh0aGlzLGUpO3ZhciB0PXEoYSxlKSx6PXRoaXMuJC5vZmZzZXRIZWlnaHQ7Zj10aGlzLiQub2Zmc2V0V2lkdGg7dmFyIGg9YS4kLmNsaWVudEhlaWdodCxcbnA9YS4kLmNsaWVudFdpZHRoO2U9ZC54LXkodGhpcyxcImxlZnRcIiktdC54fHwwO3U9ZC55LXkodGhpcyxcInRvcFwiKS10Lnl8fDA7Zj1kLngrZit5KHRoaXMsXCJyaWdodFwiKS0odC54K3ApfHwwO2Q9ZC55K3oreSh0aGlzLFwiYm90dG9tXCIpLSh0LnkraCl8fDA7KDA+dXx8MDxkKSYmZygwLCEwPT09Yj91OiExPT09Yj9kOjA+dT91OmQpO2MmJigwPmV8fDA8ZikmJmcoMD5lP2U6ZiwwKX0sc2V0U3RhdGU6ZnVuY3Rpb24oYSxiLGMpe2I9Ynx8XCJja2VcIjtzd2l0Y2goYSl7Y2FzZSBDS0VESVRPUi5UUklTVEFURV9PTjp0aGlzLmFkZENsYXNzKGIrXCJfb25cIik7dGhpcy5yZW1vdmVDbGFzcyhiK1wiX29mZlwiKTt0aGlzLnJlbW92ZUNsYXNzKGIrXCJfZGlzYWJsZWRcIik7YyYmdGhpcy5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiwhMCk7YyYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpO2JyZWFrO2Nhc2UgQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ6dGhpcy5hZGRDbGFzcyhiK1xuXCJfZGlzYWJsZWRcIik7dGhpcy5yZW1vdmVDbGFzcyhiK1wiX29mZlwiKTt0aGlzLnJlbW92ZUNsYXNzKGIrXCJfb25cIik7YyYmdGhpcy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsITApO2MmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIpO2JyZWFrO2RlZmF1bHQ6dGhpcy5hZGRDbGFzcyhiK1wiX29mZlwiKSx0aGlzLnJlbW92ZUNsYXNzKGIrXCJfb25cIiksdGhpcy5yZW1vdmVDbGFzcyhiK1wiX2Rpc2FibGVkXCIpLGMmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIpLGMmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKX19LGdldEZyYW1lRG9jdW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQ7dHJ5e2EuY29udGVudFdpbmRvdy5kb2N1bWVudH1jYXRjaChiKXthLnNyYz1hLnNyY31yZXR1cm4gYSYmbmV3IENLRURJVE9SLmRvbS5kb2N1bWVudChhLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpfSxjb3B5QXR0cmlidXRlczpmdW5jdGlvbihhLFxuYil7dmFyIGM9dGhpcy4kLmF0dHJpYnV0ZXM7Yj1ifHx7fTtmb3IodmFyIGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIGQ9Y1tmXSxlPWQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx1O2lmKCEoZSBpbiBiKSlpZihcImNoZWNrZWRcIj09ZSYmKHU9dGhpcy5nZXRBdHRyaWJ1dGUoZSkpKWEuc2V0QXR0cmlidXRlKGUsdSk7ZWxzZSBpZighQ0tFRElUT1IuZW52LmllfHx0aGlzLmhhc0F0dHJpYnV0ZShlKSl1PXRoaXMuZ2V0QXR0cmlidXRlKGUpLG51bGw9PT11JiYodT1kLm5vZGVWYWx1ZSksYS5zZXRBdHRyaWJ1dGUoZSx1KX1cIlwiIT09dGhpcy4kLnN0eWxlLmNzc1RleHQmJihhLiQuc3R5bGUuY3NzVGV4dD10aGlzLiQuc3R5bGUuY3NzVGV4dCl9LHJlbmFtZU5vZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5nZXROYW1lKCkhPWEpe3ZhciBiPXRoaXMuZ2V0RG9jdW1lbnQoKTthPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhLGIpO3RoaXMuY29weUF0dHJpYnV0ZXMoYSk7dGhpcy5tb3ZlQ2hpbGRyZW4oYSk7XG50aGlzLmdldFBhcmVudCghMCkmJnRoaXMuJC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChhLiQsdGhpcy4kKTthLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdPXRoaXMuJFtcImRhdGEtY2tlLWV4cGFuZG9cIl07dGhpcy4kPWEuJDtkZWxldGUgdGhpcy5nZXROYW1lfX0sZ2V0Q2hpbGQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyl7dmFyIGY9Yi5jaGlsZE5vZGVzO2lmKDA8PWMmJmM8Zi5sZW5ndGgpcmV0dXJuIGZbY119cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuJDtpZihiLnNsaWNlKWZvcihiPWIuc2xpY2UoKTswPGIubGVuZ3RoJiZjOyljPWEoYyxiLnNoaWZ0KCkpO2Vsc2UgYz1hKGMsYik7cmV0dXJuIGM/bmV3IENLRURJVE9SLmRvbS5ub2RlKGMpOm51bGx9fSgpLGdldENoaWxkQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLmNoaWxkTm9kZXMubGVuZ3RofSxkaXNhYmxlQ29udGV4dE1lbnU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe3JldHVybiBiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXG5iLmhhc0NsYXNzKFwiY2tlX2VuYWJsZV9jb250ZXh0X21lbnVcIil9dGhpcy5vbihcImNvbnRleHRtZW51XCIsZnVuY3Rpb24oYil7Yi5kYXRhLmdldFRhcmdldCgpLmdldEFzY2VuZGFudChhLCEwKXx8Yi5kYXRhLnByZXZlbnREZWZhdWx0KCl9KX0sZ2V0RGlyZWN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcImRpcmVjdGlvblwiKXx8dGhpcy5nZXREaXJlY3Rpb24oKXx8dGhpcy5nZXRQYXJlbnQoKSYmdGhpcy5nZXRQYXJlbnQoKS5nZXREaXJlY3Rpb24oMSl8fHRoaXMuZ2V0RG9jdW1lbnQoKS4kLmRpcnx8XCJsdHJcIjp0aGlzLmdldFN0eWxlKFwiZGlyZWN0aW9uXCIpfHx0aGlzLmdldEF0dHJpYnV0ZShcImRpclwiKX0sZGF0YTpmdW5jdGlvbihhLGIpe2E9XCJkYXRhLVwiK2E7aWYodm9pZCAwPT09YilyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYSk7ITE9PT1iP3RoaXMucmVtb3ZlQXR0cmlidXRlKGEpOnRoaXMuc2V0QXR0cmlidXRlKGEsYik7cmV0dXJuIG51bGx9LFxuZ2V0RWRpdG9yOmZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IuaW5zdGFuY2VzLGIsYztmb3IoYiBpbiBhKWlmKGM9YVtiXSxjLmVsZW1lbnQuZXF1YWxzKHRoaXMpJiZjLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfQVBQRU5EVE8pcmV0dXJuIGM7cmV0dXJuIG51bGx9LGZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGM9ZCh0aGlzKTthPW5ldyBDS0VESVRPUi5kb20ubm9kZUxpc3QodGhpcy4kLnF1ZXJ5U2VsZWN0b3JBbGwoYih0aGlzLGEpKSk7YygpO3JldHVybiBhfSxmaW5kT25lOmZ1bmN0aW9uKGEpe3ZhciBjPWQodGhpcyk7YT10aGlzLiQucXVlcnlTZWxlY3RvcihiKHRoaXMsYSkpO2MoKTtyZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6bnVsbH0sZm9yRWFjaDpmdW5jdGlvbihhLGIsYyl7aWYoIShjfHxiJiZ0aGlzLnR5cGUhPWIpKXZhciBmPWEodGhpcyk7aWYoITEhPT1mKXtjPXRoaXMuZ2V0Q2hpbGRyZW4oKTtmb3IodmFyIGQ9MDtkPGMuY291bnQoKTtkKyspZj1cbmMuZ2V0SXRlbShkKSxmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9mLmZvckVhY2goYSxiKTpiJiZmLnR5cGUhPWJ8fGEoZil9fX0pO3ZhciBsPXt3aWR0aDpbXCJib3JkZXItbGVmdC13aWR0aFwiLFwiYm9yZGVyLXJpZ2h0LXdpZHRoXCIsXCJwYWRkaW5nLWxlZnRcIixcInBhZGRpbmctcmlnaHRcIl0saGVpZ2h0OltcImJvcmRlci10b3Atd2lkdGhcIixcImJvcmRlci1ib3R0b20td2lkdGhcIixcInBhZGRpbmctdG9wXCIsXCJwYWRkaW5nLWJvdHRvbVwiXX07Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24oYSxiLGQpe1wibnVtYmVyXCI9PXR5cGVvZiBiJiYoIWR8fENLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrc3x8KGItPWMuY2FsbCh0aGlzLGEpKSx0aGlzLnNldFN0eWxlKGEsYitcInB4XCIpKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oYSxiKXt2YXIgZD1NYXRoLm1heCh0aGlzLiRbXCJvZmZzZXRcIitDS0VESVRPUi50b29scy5jYXBpdGFsaXplKGEpXSxcbnRoaXMuJFtcImNsaWVudFwiK0NLRURJVE9SLnRvb2xzLmNhcGl0YWxpemUoYSldKXx8MDtiJiYoZC09Yy5jYWxsKHRoaXMsYSkpO3JldHVybiBkfX0pKCk7Q0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQ9ZnVuY3Rpb24oYSl7YT1hfHxDS0VESVRPUi5kb2N1bWVudDt0aGlzLiQ9YS50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UP2EuJC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk6YX07XG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLENLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZSx7dHlwZTpDS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5ULGluc2VydEFmdGVyTm9kZTpmdW5jdGlvbihhKXthPWEuJDthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuJCxhLm5leHRTaWJsaW5nKX0sZ2V0SHRtbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImRpdlwiKTt0aGlzLmNsb25lKDEsMSkuYXBwZW5kVG8oYSk7cmV0dXJuIGEuZ2V0SHRtbCgpLnJlcGxhY2UoL1xccypkYXRhLWNrZS1leHBhbmRvPVwiLio/XCIvZyxcIlwiKX19LCEwLHthcHBlbmQ6MSxhcHBlbmRCb2d1czoxLGNsb25lOjEsZ2V0Rmlyc3Q6MSxnZXRIdG1sOjEsZ2V0TGFzdDoxLGdldFBhcmVudDoxLGdldE5leHQ6MSxnZXRQcmV2aW91czoxLGFwcGVuZFRvOjEsbW92ZUNoaWxkcmVuOjEsaW5zZXJ0QmVmb3JlOjEsXG5pbnNlcnRBZnRlck5vZGU6MSxyZXBsYWNlOjEsdHJpbToxLHR5cGU6MSxsdHJpbToxLHJ0cmltOjEsZ2V0RG9jdW1lbnQ6MSxnZXRDaGlsZENvdW50OjEsZ2V0Q2hpbGQ6MSxnZXRDaGlsZHJlbjoxfSk7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7dmFyIGM9dGhpcy5yYW5nZTtpZih0aGlzLl8uZW5kKXJldHVybiBudWxsO2lmKCF0aGlzLl8uc3RhcnQpe3RoaXMuXy5zdGFydD0xO2lmKGMuY29sbGFwc2VkKXJldHVybiB0aGlzLmVuZCgpLG51bGw7Yy5vcHRpbWl6ZSgpfXZhciBmLGQ9Yy5zdGFydENvbnRhaW5lcjtmPWMuZW5kQ29udGFpbmVyO3ZhciBlPWMuc3RhcnRPZmZzZXQseD1jLmVuZE9mZnNldCx6LGg9dGhpcy5ndWFyZCxwPXRoaXMudHlwZSxtPWE/XCJnZXRQcmV2aW91c1NvdXJjZU5vZGVcIjpcImdldE5leHRTb3VyY2VOb2RlXCI7aWYoIWEmJiF0aGlzLl8uZ3VhcmRMVFIpe3ZhciBDPWYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2Y6Zi5nZXRQYXJlbnQoKSxyPWYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2YuZ2V0Q2hpbGQoeCk6Zi5nZXROZXh0KCk7dGhpcy5fLmd1YXJkTFRSPWZ1bmN0aW9uKGEsYil7cmV0dXJuKCFifHwhQy5lcXVhbHMoYSkpJiYoIXJ8fFxuIWEuZXF1YWxzKHIpKSYmKGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwhYnx8IWEuZXF1YWxzKGMucm9vdCkpfX1pZihhJiYhdGhpcy5fLmd1YXJkUlRMKXt2YXIgRz1kLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9kOmQuZ2V0UGFyZW50KCksZz1kLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9lP2QuZ2V0Q2hpbGQoZS0xKTpudWxsOmQuZ2V0UHJldmlvdXMoKTt0aGlzLl8uZ3VhcmRSVEw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oIWJ8fCFHLmVxdWFscyhhKSkmJighZ3x8IWEuZXF1YWxzKGcpKSYmKGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwhYnx8IWEuZXF1YWxzKGMucm9vdCkpfX12YXIgbD1hP3RoaXMuXy5ndWFyZFJUTDp0aGlzLl8uZ3VhcmRMVFI7ej1oP2Z1bmN0aW9uKGEsYil7cmV0dXJuITE9PT1sKGEsYik/ITE6aChhLGIpfTpsO3RoaXMuY3VycmVudD9mPXRoaXMuY3VycmVudFttXSghMSxwLHopOihhP2YudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcbihmPTA8eD9mLmdldENoaWxkKHgtMSk6ITE9PT16KGYsITApP251bGw6Zi5nZXRQcmV2aW91c1NvdXJjZU5vZGUoITAscCx6KSk6KGY9ZCxmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKChmPWYuZ2V0Q2hpbGQoZSkpfHwoZj0hMT09PXooZCwhMCk/bnVsbDpkLmdldE5leHRTb3VyY2VOb2RlKCEwLHAseikpKSksZiYmITE9PT16KGYpJiYoZj1udWxsKSk7Zm9yKDtmJiYhdGhpcy5fLmVuZDspe3RoaXMuY3VycmVudD1mO2lmKCF0aGlzLmV2YWx1YXRvcnx8ITEhPT10aGlzLmV2YWx1YXRvcihmKSl7aWYoIWIpcmV0dXJuIGZ9ZWxzZSBpZihiJiZ0aGlzLmV2YWx1YXRvcilyZXR1cm4hMTtmPWZbbV0oITEscCx6KX10aGlzLmVuZCgpO3JldHVybiB0aGlzLmN1cnJlbnQ9bnVsbH1mdW5jdGlvbiBkKGIpe2Zvcih2YXIgYyxmPW51bGw7Yz1hLmNhbGwodGhpcyxiKTspZj1jO3JldHVybiBmfUNLRURJVE9SLmRvbS53YWxrZXI9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSl7dGhpcy5yYW5nZT1cbmE7dGhpcy5fPXt9fSxwcm90bzp7ZW5kOmZ1bmN0aW9uKCl7dGhpcy5fLmVuZD0xfSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbCh0aGlzKX0scHJldmlvdXM6ZnVuY3Rpb24oKXtyZXR1cm4gYS5jYWxsKHRoaXMsMSl9LGNoZWNrRm9yd2FyZDpmdW5jdGlvbigpe3JldHVybiExIT09YS5jYWxsKHRoaXMsMCwxKX0sY2hlY2tCYWNrd2FyZDpmdW5jdGlvbigpe3JldHVybiExIT09YS5jYWxsKHRoaXMsMSwxKX0sbGFzdEZvcndhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxsYXN0QmFja3dhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMsMSl9LHJlc2V0OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuY3VycmVudDt0aGlzLl89e319fX0pO3ZhciBiPXtibG9jazoxLFwibGlzdC1pdGVtXCI6MSx0YWJsZToxLFwidGFibGUtcm93LWdyb3VwXCI6MSxcInRhYmxlLWhlYWRlci1ncm91cFwiOjEsXCJ0YWJsZS1mb290ZXItZ3JvdXBcIjoxLFwidGFibGUtcm93XCI6MSxcInRhYmxlLWNvbHVtbi1ncm91cFwiOjEsXG5cInRhYmxlLWNvbHVtblwiOjEsXCJ0YWJsZS1jZWxsXCI6MSxcInRhYmxlLWNhcHRpb25cIjoxfSxjPXthYnNvbHV0ZToxLGZpeGVkOjF9O0NLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5pc0Jsb2NrQm91bmRhcnk9ZnVuY3Rpb24oYSl7cmV0dXJuXCJub25lXCIhPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcImZsb2F0XCIpfHx0aGlzLmdldENvbXB1dGVkU3R5bGUoXCJwb3NpdGlvblwiKWluIGN8fCFiW3RoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcImRpc3BsYXlcIildPyEhKHRoaXMuaXMoQ0tFRElUT1IuZHRkLiRibG9jayl8fGEmJnRoaXMuaXMoYSkpOiEwfTtDS0VESVRPUi5kb20ud2Fsa2VyLmJsb2NrQm91bmRhcnk9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiEoYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuaXNCbG9ja0JvdW5kYXJ5KGEpKX19O0NLRURJVE9SLmRvbS53YWxrZXIubGlzdEl0ZW1Cb3VuZGFyeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJsb2NrQm91bmRhcnkoe2JyOjF9KX07XG5DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYSYmYS5nZXROYW1lJiZcInNwYW5cIj09YS5nZXROYW1lKCkmJmEuZGF0YShcImNrZS1ib29rbWFya1wiKX1yZXR1cm4gZnVuY3Rpb24oZil7dmFyIGQsZTtkPWYmJmYudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZT1mLmdldFBhcmVudCgpKSYmYyhlKTtkPWE/ZDpkfHxjKGYpO3JldHVybiEhKGJeZCl9fTtDS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYztiJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGM9IUNLRURJVE9SLnRvb2xzLnRyaW0oYi5nZXRUZXh0KCkpfHxDS0VESVRPUi5lbnYud2Via2l0JiZiLmdldFRleHQoKT09Q0tFRElUT1IuZG9tLnNlbGVjdGlvbi5GSUxMSU5HX0NIQVJfU0VRVUVOQ0UpO3JldHVybiEhKGFeYyl9fTtDS0VESVRPUi5kb20ud2Fsa2VyLmludmlzaWJsZT1cbmZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxjPUNLRURJVE9SLmVudi53ZWJraXQ/MTowO3JldHVybiBmdW5jdGlvbihmKXtiKGYpP2Y9MTooZi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihmPWYuZ2V0UGFyZW50KCkpLGY9Zi4kLm9mZnNldFdpZHRoPD1jKTtyZXR1cm4hIShhXmYpfX07Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZT1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4hIShiXmMudHlwZT09YSl9fTtDS0VESVRPUi5kb20ud2Fsa2VyLmJvZ3VzPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIWcoYSkmJiFsKGEpfXJldHVybiBmdW5jdGlvbihjKXt2YXIgZj1DS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcj9jLmlzJiZjLmlzKFwiYnJcIik6Yy5nZXRUZXh0JiZlLnRlc3QoYy5nZXRUZXh0KCkpO2YmJihmPWMuZ2V0UGFyZW50KCksYz1jLmdldE5leHQoYiksZj1mLmlzQmxvY2tCb3VuZGFyeSgpJiZcbighY3x8Yy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmMuaXNCbG9ja0JvdW5kYXJ5KCkpKTtyZXR1cm4hIShhXmYpfX07Q0tFRElUT1IuZG9tLndhbGtlci50ZW1wPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtiLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGI9Yi5nZXRQYXJlbnQoKSk7Yj1iJiZiLmhhc0F0dHJpYnV0ZShcImRhdGEtY2tlLXRlbXBcIik7cmV0dXJuISEoYV5iKX19O3ZhciBlPS9eW1xcdFxcclxcbiBdKig/OiZuYnNwO3xcXHhhMCkkLyxnPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxsPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKSxrPUNLRURJVE9SLmRvbS53YWxrZXIudGVtcCgpLG49ZnVuY3Rpb24oYSl7cmV0dXJuIGwoYSl8fGcoYSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKENLRURJVE9SLmR0ZC4kaW5saW5lKSYmIWEuaXMoQ0tFRElUT1IuZHRkLiRlbXB0eSl9O0NLRURJVE9SLmRvbS53YWxrZXIuaWdub3JlZD1cbmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtiPWcoYil8fGwoYil8fGsoYik7cmV0dXJuISEoYV5iKX19O3ZhciB3PUNLRURJVE9SLmRvbS53YWxrZXIuaWdub3JlZCgpO0NLRURJVE9SLmRvbS53YWxrZXIuZW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGY9Yi5nZXRDaGlsZENvdW50KCk7YzxmOysrYylpZighdyhiLmdldENoaWxkKGMpKSlyZXR1cm4hIWE7cmV0dXJuIWF9fTt2YXIgZj1DS0VESVRPUi5kb20ud2Fsa2VyLmVtcHR5KCkseD1DS0VESVRPUi5kb20ud2Fsa2VyLnZhbGlkRW1wdHlCbG9ja0NvbnRhaW5lcnM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSlDS0VESVRPUi5kdGRbY11bXCIjXCJdJiYoYltjXT0xKTtyZXR1cm4gYn0oQ0tFRElUT1IuZHRkLiRibG9jaykse2NhcHRpb246MSx0ZDoxLHRoOjF9KTtDS0VESVRPUi5kb20ud2Fsa2VyLmVkaXRhYmxlPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtiPVxudyhiKT8hMTpiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8Yi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiLmlzKENLRURJVE9SLmR0ZC4kaW5saW5lKXx8Yi5pcyhcImhyXCIpfHxcImZhbHNlXCI9PWIuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpfHwhQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJmIuaXMoeCkmJmYoYikpPyEwOiExO3JldHVybiEhKGFeYil9fTtDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUuZ2V0Qm9ndXM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2RvIGE9YS5nZXRQcmV2aW91c1NvdXJjZU5vZGUoKTt3aGlsZShuKGEpKTtyZXR1cm4gYSYmKENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyP2EuaXMmJmEuaXMoXCJiclwiKTphLmdldFRleHQmJmUudGVzdChhLmdldFRleHQoKSkpP2E6ITF9fSkoKTtcbkNLRURJVE9SLmRvbS5yYW5nZT1mdW5jdGlvbihhKXt0aGlzLmVuZE9mZnNldD10aGlzLmVuZENvbnRhaW5lcj10aGlzLnN0YXJ0T2Zmc2V0PXRoaXMuc3RhcnRDb250YWluZXI9bnVsbDt0aGlzLmNvbGxhcHNlZD0hMDt2YXIgZD1hIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmRvY3VtZW50O3RoaXMuZG9jdW1lbnQ9ZD9hOmEuZ2V0RG9jdW1lbnQoKTt0aGlzLnJvb3Q9ZD9hLmdldEJvZHkoKTphfTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7YS5jb2xsYXBzZWQ9YS5zdGFydENvbnRhaW5lciYmYS5lbmRDb250YWluZXImJmEuc3RhcnRDb250YWluZXIuZXF1YWxzKGEuZW5kQ29udGFpbmVyKSYmYS5zdGFydE9mZnNldD09YS5lbmRPZmZzZXR9ZnVuY3Rpb24gZChhLGIsYyxkLGUpe2Z1bmN0aW9uIHEoYSxiLGMsZil7dmFyIGQ9Yz9hLmdldFByZXZpb3VzKCk6YS5nZXROZXh0KCk7aWYoZiYmaylyZXR1cm4gZDtofHxmP2IuYXBwZW5kKGEuY2xvbmUoITAsZSksYyk6KGEucmVtb3ZlKCkseiYmYi5hcHBlbmQoYSkpO3JldHVybiBkfWZ1bmN0aW9uIGcoKXt2YXIgYSxiLGMsZj1NYXRoLm1pbih2Lmxlbmd0aCxELmxlbmd0aCk7Zm9yKGE9MDthPGY7YSsrKWlmKGI9dlthXSxjPURbYV0sIWIuZXF1YWxzKGMpKXJldHVybiBhO3JldHVybiBhLTF9ZnVuY3Rpb24gbCgpe3ZhciBiPUktMSxjPXcmJm4mJiFwLmVxdWFscyhtKTtiPEUtMXx8YjxMLTF8fGM/KGM/YS5tb3ZlVG9Qb3NpdGlvbihtLFxuQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTpMPT1iKzEmJkg/YS5tb3ZlVG9Qb3NpdGlvbihEW2JdLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpOmEubW92ZVRvUG9zaXRpb24oRFtiKzFdLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksZCYmKGI9dltiKzFdKSYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihjPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY3NwYW4gZGF0YS1ja2UtYm9va21hcmtcXHgzZFwiMVwiIHN0eWxlXFx4M2RcImRpc3BsYXk6bm9uZVwiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlJyxhLmRvY3VtZW50KSxjLmluc2VydEFmdGVyKGIpLGIubWVyZ2VTaWJsaW5ncyghMSksYS5tb3ZlVG9Cb29rbWFyayh7c3RhcnROb2RlOmN9KSkpOmEuY29sbGFwc2UoITApfWEub3B0aW1pemVCb29rbWFyaygpO3ZhciBrPTA9PT1iLHo9MT09YixoPTI9PWI7Yj1ofHx6O3ZhciBwPWEuc3RhcnRDb250YWluZXIsbT1hLmVuZENvbnRhaW5lcixcbkM9YS5zdGFydE9mZnNldCxyPWEuZW5kT2Zmc2V0LEcsSCx3LG4sTSxRO2lmKGgmJm0udHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZwLmVxdWFscyhtKSlwPWEuZG9jdW1lbnQuY3JlYXRlVGV4dChwLnN1YnN0cmluZyhDLHIpKSxjLmFwcGVuZChwKTtlbHNle20udHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP2g/UT0hMDptPW0uc3BsaXQocik6MDxtLmdldENoaWxkQ291bnQoKT9yPj1tLmdldENoaWxkQ291bnQoKT8obT1tLmdldENoaWxkKHItMSksSD0hMCk6bT1tLmdldENoaWxkKHIpOm49SD0hMDtwLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD9oP009ITA6cC5zcGxpdChDKTowPHAuZ2V0Q2hpbGRDb3VudCgpPzA9PT1DPyhwPXAuZ2V0Q2hpbGQoQyksRz0hMCk6cD1wLmdldENoaWxkKEMtMSk6dz1HPSEwO2Zvcih2YXIgdj1wLmdldFBhcmVudHMoKSxEPW0uZ2V0UGFyZW50cygpLEk9ZygpLEU9di5sZW5ndGgtMSxMPUQubGVuZ3RoLTEsSj1jLGJhLFosVixmYT0tMSxPPUk7Tzw9RTtPKyspe1o9XG52W09dO1Y9Wi5nZXROZXh0KCk7Zm9yKE8hPUV8fFouZXF1YWxzKERbT10pJiZFPEw/YiYmKGJhPUouYXBwZW5kKFouY2xvbmUoMCxlKSkpOkc/cShaLEosITEsdyk6TSYmSi5hcHBlbmQoYS5kb2N1bWVudC5jcmVhdGVUZXh0KFouc3Vic3RyaW5nKEMpKSk7Vjspe2lmKFYuZXF1YWxzKERbT10pKXtmYT1PO2JyZWFrfVY9cShWLEopfUo9YmF9Sj1jO2ZvcihPPUk7Tzw9TDtPKyspaWYoYz1EW09dLFY9Yy5nZXRQcmV2aW91cygpLGMuZXF1YWxzKHZbT10pKWImJihKPUouZ2V0Q2hpbGQoMCkpO2Vsc2V7TyE9THx8Yy5lcXVhbHModltPXSkmJkw8RT9iJiYoYmE9Si5hcHBlbmQoYy5jbG9uZSgwLGUpKSk6SD9xKGMsSiwhMSxuKTpRJiZKLmFwcGVuZChhLmRvY3VtZW50LmNyZWF0ZVRleHQoYy5zdWJzdHJpbmcoMCxyKSkpO2lmKE8+ZmEpZm9yKDtWOylWPXEoVixKLCEwKTtKPWJhfWh8fGwoKX19ZnVuY3Rpb24gYigpe3ZhciBhPSExLGI9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLFxuYz1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCEwKSxkPUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSl8fGIoZSk/ITA6ZChlKSYmIWE/YT0hMDplLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGUuaGFzQXNjZW5kYW50KFwicHJlXCIpfHxDS0VESVRPUi50b29scy50cmltKGUuZ2V0VGV4dCgpKS5sZW5ndGgpfHxlLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWUuaXMoZyk/ITE6ITB9fWZ1bmN0aW9uIGMoYSl7dmFyIGI9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLGM9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygxKTtyZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIGMoZCl8fGIoZCk/ITA6IWEmJmwoZCl8fGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmlzKENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHkpfX1mdW5jdGlvbiBlKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiO3JldHVybiB0aGlzW2E/XG5cImdldFByZXZpb3VzTm9kZVwiOlwiZ2V0TmV4dE5vZGVcIl0oZnVuY3Rpb24oYSl7IWImJncoYSkmJihiPWEpO3JldHVybiBuKGEpJiYhKGwoYSkmJmEuZXF1YWxzKGIpKX0pfX12YXIgZz17YWJicjoxLGFjcm9ueW06MSxiOjEsYmRvOjEsYmlnOjEsY2l0ZToxLGNvZGU6MSxkZWw6MSxkZm46MSxlbToxLGZvbnQ6MSxpOjEsaW5zOjEsbGFiZWw6MSxrYmQ6MSxxOjEsc2FtcDoxLHNtYWxsOjEsc3BhbjoxLHN0cmlrZToxLHN0cm9uZzoxLHN1YjoxLHN1cDoxLHR0OjEsdToxLFwidmFyXCI6MX0sbD1DS0VESVRPUi5kb20ud2Fsa2VyLmJvZ3VzKCksaz0vXltcXHRcXHJcXG4gXSooPzombmJzcDt8XFx4YTApJC8sbj1DS0VESVRPUi5kb20ud2Fsa2VyLmVkaXRhYmxlKCksdz1DS0VESVRPUi5kb20ud2Fsa2VyLmlnbm9yZWQoITApO0NLRURJVE9SLmRvbS5yYW5nZS5wcm90b3R5cGU9e2Nsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2EuX3NldFN0YXJ0Q29udGFpbmVyKHRoaXMuc3RhcnRDb250YWluZXIpO1xuYS5zdGFydE9mZnNldD10aGlzLnN0YXJ0T2Zmc2V0O2EuX3NldEVuZENvbnRhaW5lcih0aGlzLmVuZENvbnRhaW5lcik7YS5lbmRPZmZzZXQ9dGhpcy5lbmRPZmZzZXQ7YS5jb2xsYXBzZWQ9dGhpcy5jb2xsYXBzZWQ7cmV0dXJuIGF9LGNvbGxhcHNlOmZ1bmN0aW9uKGEpe2E/KHRoaXMuX3NldEVuZENvbnRhaW5lcih0aGlzLnN0YXJ0Q29udGFpbmVyKSx0aGlzLmVuZE9mZnNldD10aGlzLnN0YXJ0T2Zmc2V0KToodGhpcy5fc2V0U3RhcnRDb250YWluZXIodGhpcy5lbmRDb250YWluZXIpLHRoaXMuc3RhcnRPZmZzZXQ9dGhpcy5lbmRPZmZzZXQpO3RoaXMuY29sbGFwc2VkPSEwfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudCh0aGlzLmRvY3VtZW50KTt0aGlzLmNvbGxhcHNlZHx8ZCh0aGlzLDIsYiwhMSxcInVuZGVmaW5lZFwiPT10eXBlb2YgYT8hMDphKTtyZXR1cm4gYn0sZGVsZXRlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5jb2xsYXBzZWR8fFxuZCh0aGlzLDAsbnVsbCxhKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KHRoaXMuZG9jdW1lbnQpO3RoaXMuY29sbGFwc2VkfHxkKHRoaXMsMSxjLGEsXCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/ITA6Yik7cmV0dXJuIGN9LGNyZWF0ZUJvb2ttYXJrOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLHE9dGhpcy5jb2xsYXBzZWQ7Yj10aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2IuZGF0YShcImNrZS1ib29rbWFya1wiLDEpO2Iuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpO2Iuc2V0SHRtbChcIlxceDI2bmJzcDtcIik7YSYmKGQ9XCJja2VfYm1fXCIrQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpLGIuc2V0QXR0cmlidXRlKFwiaWRcIixkKyhxP1wiQ1wiOlwiU1wiKSkpO3F8fChjPWIuY2xvbmUoKSxjLnNldEh0bWwoXCJcXHgyNm5ic3A7XCIpLGEmJmMuc2V0QXR0cmlidXRlKFwiaWRcIixkK1wiRVwiKSxlPXRoaXMuY2xvbmUoKSxcbmUuY29sbGFwc2UoKSxlLmluc2VydE5vZGUoYykpO2U9dGhpcy5jbG9uZSgpO2UuY29sbGFwc2UoITApO2UuaW5zZXJ0Tm9kZShiKTtjPyh0aGlzLnNldFN0YXJ0QWZ0ZXIoYiksdGhpcy5zZXRFbmRCZWZvcmUoYykpOnRoaXMubW92ZVRvUG9zaXRpb24oYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO3JldHVybntzdGFydE5vZGU6YT9kKyhxP1wiQ1wiOlwiU1wiKTpiLGVuZE5vZGU6YT9kK1wiRVwiOmMsc2VyaWFsaXphYmxlOmEsY29sbGFwc2VkOnF9fSxjcmVhdGVCb29rbWFyazI6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe3ZhciBmPWIuY29udGFpbmVyLGQ9Yi5vZmZzZXQsZTtlPWY7dmFyIGc9ZDtlPWUudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwwPT09Z3x8Zz09ZS5nZXRDaGlsZENvdW50KCk/MDplLmdldENoaWxkKGctMSkudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZlLmdldENoaWxkKGcpLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVDtlJiYoZj1mLmdldENoaWxkKGQtXG4xKSxkPWYuZ2V0TGVuZ3RoKCkpO2lmKGYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYwPGQpe2E6e2ZvcihlPWY7ZC0tOylpZihnPWUuZ2V0Q2hpbGQoZCkuZ2V0SW5kZXgoITApLDA8PWcpe2Q9ZzticmVhayBhfWQ9LTF9ZCs9MX1pZihmLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7ZT1mO2ZvcihnPTA7KGU9ZS5nZXRQcmV2aW91cygpKSYmZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ7KWcrPWUuZ2V0VGV4dCgpLnJlcGxhY2UoQ0tFRElUT1IuZG9tLnNlbGVjdGlvbi5GSUxMSU5HX0NIQVJfU0VRVUVOQ0UsXCJcIikubGVuZ3RoO2U9ZztmLmdldFRleHQoKT9kKz1lOihnPWYuZ2V0UHJldmlvdXMoYyksZT8oZD1lLGY9Zz9nLmdldE5leHQoKTpmLmdldFBhcmVudCgpLmdldEZpcnN0KCkpOihmPWYuZ2V0UGFyZW50KCksZD1nP2cuZ2V0SW5kZXgoITApKzE6MCkpfWIuY29udGFpbmVyPWY7Yi5vZmZzZXQ9ZH1mdW5jdGlvbiBiKGEsYyl7dmFyIGY9Yy5nZXRDdXN0b21EYXRhKFwiY2tlLWZpbGxpbmdDaGFyXCIpO1xuaWYoZil7dmFyIGQ9YS5jb250YWluZXI7Zi5lcXVhbHMoZCkmJihhLm9mZnNldC09Q0tFRElUT1IuZG9tLnNlbGVjdGlvbi5GSUxMSU5HX0NIQVJfU0VRVUVOQ0UubGVuZ3RoLDA+PWEub2Zmc2V0JiYoYS5vZmZzZXQ9ZC5nZXRJbmRleCgpLGEuY29udGFpbmVyPWQuZ2V0UGFyZW50KCkpKX19dmFyIGM9Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZShDS0VESVRPUi5OT0RFX1RFWFQsITApO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD10aGlzLmNvbGxhcHNlZCxlPXtjb250YWluZXI6dGhpcy5zdGFydENvbnRhaW5lcixvZmZzZXQ6dGhpcy5zdGFydE9mZnNldH0sZz17Y29udGFpbmVyOnRoaXMuZW5kQ29udGFpbmVyLG9mZnNldDp0aGlzLmVuZE9mZnNldH07YyYmKGEoZSksYihlLHRoaXMucm9vdCksZHx8KGEoZyksYihnLHRoaXMucm9vdCkpKTtyZXR1cm57c3RhcnQ6ZS5jb250YWluZXIuZ2V0QWRkcmVzcyhjKSxlbmQ6ZD9udWxsOmcuY29udGFpbmVyLmdldEFkZHJlc3MoYyksXG5zdGFydE9mZnNldDplLm9mZnNldCxlbmRPZmZzZXQ6Zy5vZmZzZXQsbm9ybWFsaXplZDpjLGNvbGxhcHNlZDpkLGlzMjohMH19fSgpLG1vdmVUb0Jvb2ttYXJrOmZ1bmN0aW9uKGEpe2lmKGEuaXMyKXt2YXIgYj10aGlzLmRvY3VtZW50LmdldEJ5QWRkcmVzcyhhLnN0YXJ0LGEubm9ybWFsaXplZCksYz1hLnN0YXJ0T2Zmc2V0LGQ9YS5lbmQmJnRoaXMuZG9jdW1lbnQuZ2V0QnlBZGRyZXNzKGEuZW5kLGEubm9ybWFsaXplZCk7YT1hLmVuZE9mZnNldDt0aGlzLnNldFN0YXJ0KGIsYyk7ZD90aGlzLnNldEVuZChkLGEpOnRoaXMuY29sbGFwc2UoITApfWVsc2UgYj0oYz1hLnNlcmlhbGl6YWJsZSk/dGhpcy5kb2N1bWVudC5nZXRCeUlkKGEuc3RhcnROb2RlKTphLnN0YXJ0Tm9kZSxhPWM/dGhpcy5kb2N1bWVudC5nZXRCeUlkKGEuZW5kTm9kZSk6YS5lbmROb2RlLHRoaXMuc2V0U3RhcnRCZWZvcmUoYiksYi5yZW1vdmUoKSxhPyh0aGlzLnNldEVuZEJlZm9yZShhKSxhLnJlbW92ZSgpKTpcbnRoaXMuY29sbGFwc2UoITApfSxnZXRCb3VuZGFyeU5vZGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdGFydENvbnRhaW5lcixiPXRoaXMuZW5kQ29udGFpbmVyLGM9dGhpcy5zdGFydE9mZnNldCxkPXRoaXMuZW5kT2Zmc2V0LGU7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpaWYoZT1hLmdldENoaWxkQ291bnQoKSxlPmMpYT1hLmdldENoaWxkKGMpO2Vsc2UgaWYoMT5lKWE9YS5nZXRQcmV2aW91c1NvdXJjZU5vZGUoKTtlbHNle2ZvcihhPWEuJDthLmxhc3RDaGlsZDspYT1hLmxhc3RDaGlsZDthPW5ldyBDS0VESVRPUi5kb20ubm9kZShhKTthPWEuZ2V0TmV4dFNvdXJjZU5vZGUoKXx8YX1pZihiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClpZihlPWIuZ2V0Q2hpbGRDb3VudCgpLGU+ZCliPWIuZ2V0Q2hpbGQoZCkuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCEwKTtlbHNlIGlmKDE+ZSliPWIuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCk7ZWxzZXtmb3IoYj1iLiQ7Yi5sYXN0Q2hpbGQ7KWI9XG5iLmxhc3RDaGlsZDtiPW5ldyBDS0VESVRPUi5kb20ubm9kZShiKX1hLmdldFBvc2l0aW9uKGIpJkNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lORyYmKGE9Yik7cmV0dXJue3N0YXJ0Tm9kZTphLGVuZE5vZGU6Yn19LGdldENvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5zdGFydENvbnRhaW5lcixkPXRoaXMuZW5kQ29udGFpbmVyLGM9Yy5lcXVhbHMoZCk/YSYmYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJnRoaXMuc3RhcnRPZmZzZXQ9PXRoaXMuZW5kT2Zmc2V0LTE/Yy5nZXRDaGlsZCh0aGlzLnN0YXJ0T2Zmc2V0KTpjOmMuZ2V0Q29tbW9uQW5jZXN0b3IoZCk7cmV0dXJuIGImJiFjLmlzP2MuZ2V0UGFyZW50KCk6Y30sb3B0aW1pemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyLGI9dGhpcy5zdGFydE9mZnNldDthLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGI/Yj49YS5nZXRMZW5ndGgoKSYmdGhpcy5zZXRTdGFydEFmdGVyKGEpOlxudGhpcy5zZXRTdGFydEJlZm9yZShhKSk7YT10aGlzLmVuZENvbnRhaW5lcjtiPXRoaXMuZW5kT2Zmc2V0O2EudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYj9iPj1hLmdldExlbmd0aCgpJiZ0aGlzLnNldEVuZEFmdGVyKGEpOnRoaXMuc2V0RW5kQmVmb3JlKGEpKX0sb3B0aW1pemVCb29rbWFyazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXIsYj10aGlzLmVuZENvbnRhaW5lcjthLmlzJiZhLmlzKFwic3BhblwiKSYmYS5kYXRhKFwiY2tlLWJvb2ttYXJrXCIpJiZ0aGlzLnNldFN0YXJ0QXQoYSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpO2ImJmIuaXMmJmIuaXMoXCJzcGFuXCIpJiZiLmRhdGEoXCJja2UtYm9va21hcmtcIikmJnRoaXMuc2V0RW5kQXQoYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpfSx0cmltOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5zdGFydENvbnRhaW5lcixkPXRoaXMuc3RhcnRPZmZzZXQsZT10aGlzLmNvbGxhcHNlZDtpZigoIWF8fFxuZSkmJmMmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKXtpZihkKWlmKGQ+PWMuZ2V0TGVuZ3RoKCkpZD1jLmdldEluZGV4KCkrMSxjPWMuZ2V0UGFyZW50KCk7ZWxzZXt2YXIgcT1jLnNwbGl0KGQpLGQ9Yy5nZXRJbmRleCgpKzEsYz1jLmdldFBhcmVudCgpO3RoaXMuc3RhcnRDb250YWluZXIuZXF1YWxzKHRoaXMuZW5kQ29udGFpbmVyKT90aGlzLnNldEVuZChxLHRoaXMuZW5kT2Zmc2V0LXRoaXMuc3RhcnRPZmZzZXQpOmMuZXF1YWxzKHRoaXMuZW5kQ29udGFpbmVyKSYmKHRoaXMuZW5kT2Zmc2V0Kz0xKX1lbHNlIGQ9Yy5nZXRJbmRleCgpLGM9Yy5nZXRQYXJlbnQoKTt0aGlzLnNldFN0YXJ0KGMsZCk7aWYoZSl7dGhpcy5jb2xsYXBzZSghMCk7cmV0dXJufX1jPXRoaXMuZW5kQ29udGFpbmVyO2Q9dGhpcy5lbmRPZmZzZXQ7Ynx8ZXx8IWN8fGMudHlwZSE9Q0tFRElUT1IuTk9ERV9URVhUfHwoZD8oZD49Yy5nZXRMZW5ndGgoKXx8Yy5zcGxpdChkKSxkPWMuZ2V0SW5kZXgoKSsxKTpcbmQ9Yy5nZXRJbmRleCgpLGM9Yy5nZXRQYXJlbnQoKSx0aGlzLnNldEVuZChjLGQpKX0sZW5sYXJnZTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGEmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKT9udWxsOmF9dmFyIGQ9bmV3IFJlZ0V4cCgvW15cXHNcXHVmZWZmXS8pO3N3aXRjaChhKXtjYXNlIENLRURJVE9SLkVOTEFSR0VfSU5MSU5FOnZhciBlPTE7Y2FzZSBDS0VESVRPUi5FTkxBUkdFX0VMRU1FTlQ6dmFyIHE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGwpO2Muc2V0U3RhcnQoYSxiKTtjLnNldEVuZEF0KGwsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7dmFyIGM9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYyksZjtmb3IoYy5ndWFyZD1mdW5jdGlvbihhKXtyZXR1cm4hKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzQmxvY2tCb3VuZGFyeSgpKX07Zj1cbmMubmV4dCgpOyl7aWYoZi50eXBlIT1DS0VESVRPUi5OT0RFX1RFWFQpcmV0dXJuITE7Rz1mIT1hP2YuZ2V0VGV4dCgpOmYuc3Vic3RyaW5nKGIpO2lmKGQudGVzdChHKSlyZXR1cm4hMX1yZXR1cm4hMH07aWYodGhpcy5jb2xsYXBzZWQpYnJlYWs7dmFyIGc9dGhpcy5nZXRDb21tb25BbmNlc3RvcigpLGw9dGhpcy5yb290LGsseixoLHAsbSxDPSExLHIsRztyPXRoaXMuc3RhcnRDb250YWluZXI7dmFyIEg9dGhpcy5zdGFydE9mZnNldDtyLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD8oSCYmKHI9IUNLRURJVE9SLnRvb2xzLnRyaW0oci5zdWJzdHJpbmcoMCxIKSkubGVuZ3RoJiZyLEM9ISFyKSxyJiYoKHA9ci5nZXRQcmV2aW91cygpKXx8KGg9ci5nZXRQYXJlbnQoKSkpKTooSCYmKHA9ci5nZXRDaGlsZChILTEpfHxyLmdldExhc3QoKSkscHx8KGg9cikpO2ZvcihoPWMoaCk7aHx8cDspe2lmKGgmJiFwKXshbSYmaC5lcXVhbHMoZykmJihtPSEwKTtpZihlP2guaXNCbG9ja0JvdW5kYXJ5KCk6XG4hbC5jb250YWlucyhoKSlicmVhaztDJiZcImlubGluZVwiPT1oLmdldENvbXB1dGVkU3R5bGUoXCJkaXNwbGF5XCIpfHwoQz0hMSxtP2s9aDp0aGlzLnNldFN0YXJ0QmVmb3JlKGgpKTtwPWguZ2V0UHJldmlvdXMoKX1mb3IoO3A7KWlmKHI9ITEscC50eXBlPT1DS0VESVRPUi5OT0RFX0NPTU1FTlQpcD1wLmdldFByZXZpb3VzKCk7ZWxzZXtpZihwLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVClHPXAuZ2V0VGV4dCgpLGQudGVzdChHKSYmKHA9bnVsbCkscj0vW1xcc1xcdWZlZmZdJC8udGVzdChHKTtlbHNlIGlmKChwLiQub2Zmc2V0V2lkdGg+KENLRURJVE9SLmVudi53ZWJraXQ/MTowKXx8YiYmcC5pcyhcImJyXCIpKSYmIXAuZGF0YShcImNrZS1ib29rbWFya1wiKSlpZihDJiZDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3AuZ2V0TmFtZSgpXSl7Rz1wLmdldFRleHQoKTtpZihkLnRlc3QoRykpcD1udWxsO2Vsc2UgZm9yKHZhciBIPXAuJC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIiksdz0wLG47bj1cbkhbdysrXTspaWYoIUNLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbbi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSl7cD1udWxsO2JyZWFrfXAmJihyPSEhRy5sZW5ndGgpfWVsc2UgcD1udWxsO3ImJihDP20/az1oOmgmJnRoaXMuc2V0U3RhcnRCZWZvcmUoaCk6Qz0hMCk7aWYocCl7cj1wLmdldFByZXZpb3VzKCk7aWYoIWgmJiFyKXtoPXA7cD1udWxsO2JyZWFrfXA9cn1lbHNlIGg9bnVsbH1oJiYoaD1jKGguZ2V0UGFyZW50KCkpKX1yPXRoaXMuZW5kQ29udGFpbmVyO0g9dGhpcy5lbmRPZmZzZXQ7aD1wPW51bGw7bT1DPSExO3IudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP0NLRURJVE9SLnRvb2xzLnRyaW0oci5zdWJzdHJpbmcoSCkpLmxlbmd0aD9DPSEwOihDPSFyLmdldExlbmd0aCgpLEg9PXIuZ2V0TGVuZ3RoKCk/KHA9ci5nZXROZXh0KCkpfHwoaD1yLmdldFBhcmVudCgpKTpxKHIsSCkmJihoPXIuZ2V0UGFyZW50KCkpKToocD1yLmdldENoaWxkKEgpKXx8KGg9cik7Zm9yKDtofHxcbnA7KXtpZihoJiYhcCl7IW0mJmguZXF1YWxzKGcpJiYobT0hMCk7aWYoZT9oLmlzQmxvY2tCb3VuZGFyeSgpOiFsLmNvbnRhaW5zKGgpKWJyZWFrO0MmJlwiaW5saW5lXCI9PWguZ2V0Q29tcHV0ZWRTdHlsZShcImRpc3BsYXlcIil8fChDPSExLG0/ej1oOmgmJnRoaXMuc2V0RW5kQWZ0ZXIoaCkpO3A9aC5nZXROZXh0KCl9Zm9yKDtwOyl7cj0hMTtpZihwLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVClHPXAuZ2V0VGV4dCgpLHEocCwwKXx8KHA9bnVsbCkscj0vXltcXHNcXHVmZWZmXS8udGVzdChHKTtlbHNlIGlmKHAudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKXtpZigoMDxwLiQub2Zmc2V0V2lkdGh8fGImJnAuaXMoXCJiclwiKSkmJiFwLmRhdGEoXCJja2UtYm9va21hcmtcIikpaWYoQyYmQ0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVtwLmdldE5hbWUoKV0pe0c9cC5nZXRUZXh0KCk7aWYoZC50ZXN0KEcpKXA9bnVsbDtlbHNlIGZvcihIPXAuJC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIiksdz1cbjA7bj1IW3crK107KWlmKCFDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W24ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pe3A9bnVsbDticmVha31wJiYocj0hIUcubGVuZ3RoKX1lbHNlIHA9bnVsbH1lbHNlIHI9MTtyJiZDJiYobT96PWg6dGhpcy5zZXRFbmRBZnRlcihoKSk7aWYocCl7cj1wLmdldE5leHQoKTtpZighaCYmIXIpe2g9cDtwPW51bGw7YnJlYWt9cD1yfWVsc2UgaD1udWxsfWgmJihoPWMoaC5nZXRQYXJlbnQoKSkpfWsmJnomJihnPWsuY29udGFpbnMoeik/ejprLHRoaXMuc2V0U3RhcnRCZWZvcmUoZyksdGhpcy5zZXRFbmRBZnRlcihnKSk7YnJlYWs7Y2FzZSBDS0VESVRPUi5FTkxBUkdFX0JMT0NLX0NPTlRFTlRTOmNhc2UgQ0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM6aD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCk7bD10aGlzLnJvb3Q7aC5zZXRTdGFydEF0KGwsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2guc2V0RW5kKHRoaXMuc3RhcnRDb250YWluZXIsXG50aGlzLnN0YXJ0T2Zmc2V0KTtoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGgpO3ZhciBNLFEsdj1DS0VESVRPUi5kb20ud2Fsa2VyLmJsb2NrQm91bmRhcnkoYT09Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM/e2JyOjF9Om51bGwpLEQ9bnVsbCxJPWZ1bmN0aW9uKGEpe2lmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImZhbHNlXCI9PWEuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKWlmKEQpe2lmKEQuZXF1YWxzKGEpKXtEPW51bGw7cmV0dXJufX1lbHNlIEQ9YTtlbHNlIGlmKEQpcmV0dXJuO3ZhciBiPXYoYSk7Ynx8KE09YSk7cmV0dXJuIGJ9LGU9ZnVuY3Rpb24oYSl7dmFyIGI9SShhKTshYiYmYS5pcyYmYS5pcyhcImJyXCIpJiYoUT1hKTtyZXR1cm4gYn07aC5ndWFyZD1JO2g9aC5sYXN0QmFja3dhcmQoKTtNPU18fGw7dGhpcy5zZXRTdGFydEF0KE0sIU0uaXMoXCJiclwiKSYmKCFoJiZ0aGlzLmNoZWNrU3RhcnRPZkJsb2NrKCl8fGgmJk0uY29udGFpbnMoaCkpP1xuQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKTtpZihhPT1DS0VESVRPUi5FTkxBUkdFX0xJU1RfSVRFTV9DT05URU5UUyl7aD10aGlzLmNsb25lKCk7aD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihoKTt2YXIgRT1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksTD1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCk7aC5ldmFsdWF0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIUUoYSkmJiFMKGEpfTtpZigoaD1oLnByZXZpb3VzKCkpJiZoLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmaC5pcyhcImJyXCIpKWJyZWFrfWg9dGhpcy5jbG9uZSgpO2guY29sbGFwc2UoKTtoLnNldEVuZEF0KGwsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7aD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihoKTtoLmd1YXJkPWE9PUNLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTP2U6STtNPUQ9UT1udWxsO2g9aC5sYXN0Rm9yd2FyZCgpO1xuTT1NfHxsO3RoaXMuc2V0RW5kQXQoTSwhaCYmdGhpcy5jaGVja0VuZE9mQmxvY2soKXx8aCYmTS5jb250YWlucyhoKT9DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EOkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7USYmdGhpcy5zZXRFbmRBZnRlcihRKX19LHNocmluazpmdW5jdGlvbihhLGIsYyl7aWYoIXRoaXMuY29sbGFwc2VkKXthPWF8fENLRURJVE9SLlNIUklOS19URVhUO3ZhciBkPXRoaXMuY2xvbmUoKSxlPXRoaXMuc3RhcnRDb250YWluZXIscT10aGlzLmVuZENvbnRhaW5lcixnPXRoaXMuc3RhcnRPZmZzZXQsbD10aGlzLmVuZE9mZnNldCxrPTEsej0xO2UmJmUudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZz9nPj1lLmdldExlbmd0aCgpP2Quc2V0U3RhcnRBZnRlcihlKTooZC5zZXRTdGFydEJlZm9yZShlKSxrPTApOmQuc2V0U3RhcnRCZWZvcmUoZSkpO3EmJnEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYobD9sPj1xLmdldExlbmd0aCgpP2Quc2V0RW5kQWZ0ZXIocSk6XG4oZC5zZXRFbmRBZnRlcihxKSx6PTApOmQuc2V0RW5kQmVmb3JlKHEpKTt2YXIgZD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKSxoPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKTtkLmV2YWx1YXRvcj1mdW5jdGlvbihiKXtyZXR1cm4gYi50eXBlPT0oYT09Q0tFRElUT1IuU0hSSU5LX0VMRU1FTlQ/Q0tFRElUT1IuTk9ERV9FTEVNRU5UOkNLRURJVE9SLk5PREVfVEVYVCl9O3ZhciBwO2QuZ3VhcmQ9ZnVuY3Rpb24oYixkKXtpZihoKGIpKXJldHVybiEwO2lmKGE9PUNLRURJVE9SLlNIUklOS19FTEVNRU5UJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8ZCYmYi5lcXVhbHMocCl8fCExPT09YyYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuaXNCbG9ja0JvdW5kYXJ5KCl8fGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4hMTtkfHxiLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8XG4ocD1iKTtyZXR1cm4hMH07ayYmKGU9ZFthPT1DS0VESVRPUi5TSFJJTktfRUxFTUVOVD9cImxhc3RGb3J3YXJkXCI6XCJuZXh0XCJdKCkpJiZ0aGlzLnNldFN0YXJ0QXQoZSxiP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7eiYmKGQucmVzZXQoKSwoZD1kW2E9PUNLRURJVE9SLlNIUklOS19FTEVNRU5UP1wibGFzdEJhY2t3YXJkXCI6XCJwcmV2aW91c1wiXSgpKSYmdGhpcy5zZXRFbmRBdChkLGI/Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORDpDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTtyZXR1cm4hKCFrJiYheil9fSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW1pemVCb29rbWFyaygpO3RoaXMudHJpbSghMSwhMCk7dmFyIGI9dGhpcy5zdGFydENvbnRhaW5lcixjPWIuZ2V0Q2hpbGQodGhpcy5zdGFydE9mZnNldCk7Yz9hLmluc2VydEJlZm9yZShjKTpiLmFwcGVuZChhKTthLmdldFBhcmVudCgpJiZhLmdldFBhcmVudCgpLmVxdWFscyh0aGlzLmVuZENvbnRhaW5lcikmJlxudGhpcy5lbmRPZmZzZXQrKzt0aGlzLnNldFN0YXJ0QmVmb3JlKGEpfSxtb3ZlVG9Qb3NpdGlvbjpmdW5jdGlvbihhLGIpe3RoaXMuc2V0U3RhcnRBdChhLGIpO3RoaXMuY29sbGFwc2UoITApfSxtb3ZlVG9SYW5nZTpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEuc3RhcnRDb250YWluZXIsYS5zdGFydE9mZnNldCk7dGhpcy5zZXRFbmQoYS5lbmRDb250YWluZXIsYS5lbmRPZmZzZXQpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5zZXRTdGFydChhLDApO3RoaXMuc2V0RW5kKGEsYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/YS5nZXRMZW5ndGgoKTphLmdldENoaWxkQ291bnQoKSl9LHNldFN0YXJ0OmZ1bmN0aW9uKGIsYyl7Yi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJkNLRURJVE9SLmR0ZC4kZW1wdHlbYi5nZXROYW1lKCldJiYoYz1iLmdldEluZGV4KCksYj1iLmdldFBhcmVudCgpKTt0aGlzLl9zZXRTdGFydENvbnRhaW5lcihiKTt0aGlzLnN0YXJ0T2Zmc2V0PVxuYzt0aGlzLmVuZENvbnRhaW5lcnx8KHRoaXMuX3NldEVuZENvbnRhaW5lcihiKSx0aGlzLmVuZE9mZnNldD1jKTthKHRoaXMpfSxzZXRFbmQ6ZnVuY3Rpb24oYixjKXtiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmQ0tFRElUT1IuZHRkLiRlbXB0eVtiLmdldE5hbWUoKV0mJihjPWIuZ2V0SW5kZXgoKSsxLGI9Yi5nZXRQYXJlbnQoKSk7dGhpcy5fc2V0RW5kQ29udGFpbmVyKGIpO3RoaXMuZW5kT2Zmc2V0PWM7dGhpcy5zdGFydENvbnRhaW5lcnx8KHRoaXMuX3NldFN0YXJ0Q29udGFpbmVyKGIpLHRoaXMuc3RhcnRPZmZzZXQ9Yyk7YSh0aGlzKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEuZ2V0UGFyZW50KCksYS5nZXRJbmRleCgpKzEpfSxzZXRTdGFydEJlZm9yZTpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEuZ2V0UGFyZW50KCksYS5nZXRJbmRleCgpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5zZXRFbmQoYS5nZXRQYXJlbnQoKSxcbmEuZ2V0SW5kZXgoKSsxKX0sc2V0RW5kQmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuc2V0RW5kKGEuZ2V0UGFyZW50KCksYS5nZXRJbmRleCgpKX0sc2V0U3RhcnRBdDpmdW5jdGlvbihiLGMpe3N3aXRjaChjKXtjYXNlIENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOnRoaXMuc2V0U3RhcnQoYiwwKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQ6Yi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/dGhpcy5zZXRTdGFydChiLGIuZ2V0TGVuZ3RoKCkpOnRoaXMuc2V0U3RhcnQoYixiLmdldENoaWxkQ291bnQoKSk7YnJlYWs7Y2FzZSBDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQ6dGhpcy5zZXRTdGFydEJlZm9yZShiKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORDp0aGlzLnNldFN0YXJ0QWZ0ZXIoYil9YSh0aGlzKX0sc2V0RW5kQXQ6ZnVuY3Rpb24oYixjKXtzd2l0Y2goYyl7Y2FzZSBDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVDp0aGlzLnNldEVuZChiLFxuMCk7YnJlYWs7Y2FzZSBDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EOmIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP3RoaXMuc2V0RW5kKGIsYi5nZXRMZW5ndGgoKSk6dGhpcy5zZXRFbmQoYixiLmdldENoaWxkQ291bnQoKSk7YnJlYWs7Y2FzZSBDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQ6dGhpcy5zZXRFbmRCZWZvcmUoYik7YnJlYWs7Y2FzZSBDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQ6dGhpcy5zZXRFbmRBZnRlcihiKX1hKHRoaXMpfSxmaXhCbG9jazpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlQm9va21hcmsoKSxkPXRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKTt0aGlzLmNvbGxhcHNlKGEpO3RoaXMuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0JMT0NLX0NPTlRFTlRTKTt0aGlzLmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGQpO2QudHJpbSgpO3RoaXMuaW5zZXJ0Tm9kZShkKTt2YXIgZT1kLmdldEJvZ3VzKCk7ZSYmZS5yZW1vdmUoKTtcbmQuYXBwZW5kQm9ndXMoKTt0aGlzLm1vdmVUb0Jvb2ttYXJrKGMpO3JldHVybiBkfSxzcGxpdEJsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCksZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHRoaXMuZW5kQ29udGFpbmVyLHRoaXMucm9vdCksZT1jLmJsb2NrLHE9ZC5ibG9jayxnPW51bGw7aWYoIWMuYmxvY2tMaW1pdC5lcXVhbHMoZC5ibG9ja0xpbWl0KSlyZXR1cm4gbnVsbDtcImJyXCIhPWEmJihlfHwoZT10aGlzLmZpeEJsb2NrKCEwLGEpLHE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5lbmRDb250YWluZXIsdGhpcy5yb290KSkuYmxvY2spLHF8fChxPXRoaXMuZml4QmxvY2soITEsYSkpKTtjPWUmJnRoaXMuY2hlY2tTdGFydE9mQmxvY2soKTtkPXEmJnRoaXMuY2hlY2tFbmRPZkJsb2NrKCk7dGhpcy5kZWxldGVDb250ZW50cygpO2UmJmUuZXF1YWxzKHEpJiZcbihkPyhnPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnJvb3QpLHRoaXMubW92ZVRvUG9zaXRpb24ocSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLHE9bnVsbCk6Yz8oZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5yb290KSx0aGlzLm1vdmVUb1Bvc2l0aW9uKGUsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxlPW51bGwpOihxPXRoaXMuc3BsaXRFbGVtZW50KGUsYnx8ITEpLGUuaXMoXCJ1bFwiLFwib2xcIil8fGUuYXBwZW5kQm9ndXMoKSkpO3JldHVybntwcmV2aW91c0Jsb2NrOmUsbmV4dEJsb2NrOnEsd2FzU3RhcnRPZkJsb2NrOmMsd2FzRW5kT2ZCbG9jazpkLGVsZW1lbnRQYXRoOmd9fSxzcGxpdEVsZW1lbnQ6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5jb2xsYXBzZWQpcmV0dXJuIG51bGw7dGhpcy5zZXRFbmRBdChhLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO1xudmFyIGM9dGhpcy5leHRyYWN0Q29udGVudHMoITEsYnx8ITEpLGQ9YS5jbG9uZSghMSxifHwhMSk7Yy5hcHBlbmRUbyhkKTtkLmluc2VydEFmdGVyKGEpO3RoaXMubW92ZVRvUG9zaXRpb24oYSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO3JldHVybiBkfSxyZW1vdmVFbXB0eUJsb2Nrc0F0RW5kOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShkKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl8fGMoYSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzRW1wdHlJbmxpbmVSZW1vdmVhYmxlKCl8fGQuaXMoXCJ0YWJsZVwiKSYmYS5pcyhcImNhcHRpb25cIik/ITE6ITB9fXZhciBiPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxjPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITEpO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9dGhpcy5jcmVhdGVCb29rbWFyaygpLGQ9dGhpc1tiP1wiZW5kUGF0aFwiOlwic3RhcnRQYXRoXCJdKCksZT1kLmJsb2NrfHxcbmQuYmxvY2tMaW1pdCxnO2UmJiFlLmVxdWFscyhkLnJvb3QpJiYhZS5nZXRGaXJzdChhKGUpKTspZz1lLmdldFBhcmVudCgpLHRoaXNbYj9cInNldEVuZEF0XCI6XCJzZXRTdGFydEF0XCJdKGUsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSxlLnJlbW92ZSgxKSxlPWc7dGhpcy5tb3ZlVG9Cb29rbWFyayhjKX19KCksc3RhcnRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnJvb3QpfSxlbmRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5lbmRDb250YWluZXIsdGhpcy5yb290KX0sY2hlY2tCb3VuZGFyeU9mRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBkPWI9PUNLRURJVE9SLlNUQVJULGU9dGhpcy5jbG9uZSgpO2UuY29sbGFwc2UoZCk7ZVtkP1wic2V0U3RhcnRBdFwiOlwic2V0RW5kQXRcIl0oYSxkP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOlxuQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7ZT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihlKTtlLmV2YWx1YXRvcj1jKGQpO3JldHVybiBlW2Q/XCJjaGVja0JhY2t3YXJkXCI6XCJjaGVja0ZvcndhcmRcIl0oKX0sY2hlY2tTdGFydE9mQmxvY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyLGM9dGhpcy5zdGFydE9mZnNldDtDS0VESVRPUi5lbnYuaWUmJmMmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoYT1DS0VESVRPUi50b29scy5sdHJpbShhLnN1YnN0cmluZygwLGMpKSxrLnRlc3QoYSkmJnRoaXMudHJpbSgwLDEpKTt0aGlzLnRyaW0oKTthPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnJvb3QpO2M9dGhpcy5jbG9uZSgpO2MuY29sbGFwc2UoITApO2Muc2V0U3RhcnRBdChhLmJsb2NrfHxhLmJsb2NrTGltaXQsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2E9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYyk7XG5hLmV2YWx1YXRvcj1iKCk7cmV0dXJuIGEuY2hlY2tCYWNrd2FyZCgpfSxjaGVja0VuZE9mQmxvY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVuZENvbnRhaW5lcixjPXRoaXMuZW5kT2Zmc2V0O0NLRURJVE9SLmVudi5pZSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihhPUNLRURJVE9SLnRvb2xzLnJ0cmltKGEuc3Vic3RyaW5nKGMpKSxrLnRlc3QoYSkmJnRoaXMudHJpbSgxLDApKTt0aGlzLnRyaW0oKTthPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5lbmRDb250YWluZXIsdGhpcy5yb290KTtjPXRoaXMuY2xvbmUoKTtjLmNvbGxhcHNlKCExKTtjLnNldEVuZEF0KGEuYmxvY2t8fGEuYmxvY2tMaW1pdCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTthPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGMpO2EuZXZhbHVhdG9yPWIoKTtyZXR1cm4gYS5jaGVja0ZvcndhcmQoKX0sZ2V0UHJldmlvdXNOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmNsb25lKCk7XG5kLmNvbGxhcHNlKDEpO2Quc2V0U3RhcnRBdChjfHx0aGlzLnJvb3QsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2M9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZCk7Yy5ldmFsdWF0b3I9YTtjLmd1YXJkPWI7cmV0dXJuIGMucHJldmlvdXMoKX0sZ2V0TmV4dE5vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuY2xvbmUoKTtkLmNvbGxhcHNlKCk7ZC5zZXRFbmRBdChjfHx0aGlzLnJvb3QsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7Yz1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKTtjLmV2YWx1YXRvcj1hO2MuZ3VhcmQ9YjtyZXR1cm4gYy5uZXh0KCl9LGNoZWNrUmVhZE9ubHk6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyl7Zm9yKDtiOyl7aWYoYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2lmKFwiZmFsc2VcIj09Yi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJiFiLmRhdGEoXCJja2UtZWRpdGFibGVcIikpcmV0dXJuIDA7aWYoYi5pcyhcImh0bWxcIil8fFxuXCJ0cnVlXCI9PWIuZ2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIpJiYoYi5jb250YWlucyhjKXx8Yi5lcXVhbHMoYykpKWJyZWFrfWI9Yi5nZXRQYXJlbnQoKX1yZXR1cm4gMX1yZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj10aGlzLnN0YXJ0Q29udGFpbmVyLGM9dGhpcy5lbmRDb250YWluZXI7cmV0dXJuIShhKGIsYykmJmEoYyxiKSl9fSgpLG1vdmVUb0VsZW1lbnRFZGl0YWJsZVBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFhLmlzRWRpdGFibGUoITEpKXJldHVybiB0aGlzLm1vdmVUb1Bvc2l0aW9uKGEsYj9DS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQ6Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSwhMDtmb3IodmFyIGM9MDthOyl7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQpe2ImJnRoaXMuZW5kQ29udGFpbmVyJiZ0aGlzLmNoZWNrRW5kT2ZCbG9jaygpJiZrLnRlc3QoYS5nZXRUZXh0KCkpP3RoaXMubW92ZVRvUG9zaXRpb24oYSxcbkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk6dGhpcy5tb3ZlVG9Qb3NpdGlvbihhLGI/Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EOkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7Yz0xO2JyZWFrfWlmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKWlmKGEuaXNFZGl0YWJsZSgpKXRoaXMubW92ZVRvUG9zaXRpb24oYSxiP0NLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQ6Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpLGM9MTtlbHNlIGlmKGImJmEuaXMoXCJiclwiKSYmdGhpcy5lbmRDb250YWluZXImJnRoaXMuY2hlY2tFbmRPZkJsb2NrKCkpdGhpcy5tb3ZlVG9Qb3NpdGlvbihhLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7ZWxzZSBpZihcImZhbHNlXCI9PWEuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpJiZhLmlzKENLRURJVE9SLmR0ZC4kYmxvY2spKXJldHVybiB0aGlzLnNldFN0YXJ0QmVmb3JlKGEpLHRoaXMuc2V0RW5kQWZ0ZXIoYSksXG4hMDt2YXIgZD1hLGU9YyxxPXZvaWQgMDtkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5pc0VkaXRhYmxlKCExKSYmKHE9ZFtiP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0odykpO2V8fHF8fChxPWRbYj9cImdldFByZXZpb3VzXCI6XCJnZXROZXh0XCJdKHcpKTthPXF9cmV0dXJuISFjfSxtb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MCxlLHEsZz1bQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5ELENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVF07YT8oYz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCksYy5tb3ZlVG9Qb3NpdGlvbihhLGdbYj8wOjFdKSk6Yz10aGlzLmNsb25lKCk7aWYoYSYmIWEuaXMoQ0tFRElUT1IuZHRkLiRibG9jaykpZD0xO2Vsc2UgaWYoZT1jW2I/XCJnZXROZXh0RWRpdGFibGVOb2RlXCI6XCJnZXRQcmV2aW91c0VkaXRhYmxlTm9kZVwiXSgpKWQ9MSwocT1lLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCkmJlxuZS5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKSYmXCJmYWxzZVwiPT1lLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKT8oYy5zZXRTdGFydEF0KGUsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxjLnNldEVuZEF0KGUsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSk6IUNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyJiZxJiZlLmlzKENLRURJVE9SLmRvbS53YWxrZXIudmFsaWRFbXB0eUJsb2NrQ29udGFpbmVycyk/KGMuc2V0RW5kKGUsMCksYy5jb2xsYXBzZSgpKTpjLm1vdmVUb1Bvc2l0aW9uKGUsZ1tiPzE6MF0pO2QmJnRoaXMubW92ZVRvUmFuZ2UoYyk7cmV0dXJuISFkfSxtb3ZlVG9FbGVtZW50RWRpdFN0YXJ0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1vdmVUb0VsZW1lbnRFZGl0YWJsZVBvc2l0aW9uKGEpfSxtb3ZlVG9FbGVtZW50RWRpdEVuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tb3ZlVG9FbGVtZW50RWRpdGFibGVQb3NpdGlvbihhLCEwKX0sZ2V0RW5jbG9zZWROb2RlOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmNsb25lKCk7YS5vcHRpbWl6ZSgpO2lmKGEuc3RhcnRDb250YWluZXIudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxhLmVuZENvbnRhaW5lci50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpcmV0dXJuIG51bGw7dmFyIGE9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYSksYj1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExLCEwKSxjPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoITApO2EuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiBjKGEpJiZiKGEpfTt2YXIgZD1hLm5leHQoKTthLnJlc2V0KCk7cmV0dXJuIGQmJmQuZXF1YWxzKGEucHJldmlvdXMoKSk/ZDpudWxsfSxnZXRUb3VjaGVkU3RhcnROb2RlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdGFydENvbnRhaW5lcjtyZXR1cm4gdGhpcy5jb2xsYXBzZWR8fGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2E6YS5nZXRDaGlsZCh0aGlzLnN0YXJ0T2Zmc2V0KXx8YX0sZ2V0VG91Y2hlZEVuZE5vZGU6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMuZW5kQ29udGFpbmVyO3JldHVybiB0aGlzLmNvbGxhcHNlZHx8YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/YTphLmdldENoaWxkKHRoaXMuZW5kT2Zmc2V0LTEpfHxhfSxnZXROZXh0RWRpdGFibGVOb2RlOmUoKSxnZXRQcmV2aW91c0VkaXRhYmxlTm9kZTplKDEpLHNjcm9sbEludG9WaWV3OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKFwiXFx4M2NzcGFuXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlXCIsdGhpcy5kb2N1bWVudCksYixjLGQsZT10aGlzLmNsb25lKCk7ZS5vcHRpbWl6ZSgpOyhkPWUuc3RhcnRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKT8oYz1lLnN0YXJ0Q29udGFpbmVyLmdldFRleHQoKSxiPWUuc3RhcnRDb250YWluZXIuc3BsaXQoZS5zdGFydE9mZnNldCksYS5pbnNlcnRBZnRlcihlLnN0YXJ0Q29udGFpbmVyKSk6ZS5pbnNlcnROb2RlKGEpO2Euc2Nyb2xsSW50b1ZpZXcoKTtcbmQmJihlLnN0YXJ0Q29udGFpbmVyLnNldFRleHQoYyksYi5yZW1vdmUoKSk7YS5yZW1vdmUoKX0sX3NldFN0YXJ0Q29udGFpbmVyOmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRDb250YWluZXI9YX0sX3NldEVuZENvbnRhaW5lcjpmdW5jdGlvbihhKXt0aGlzLmVuZENvbnRhaW5lcj1hfX19KSgpO0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUPTE7Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORD0yO0NLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVD0zO0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORD00O0NLRURJVE9SLkVOTEFSR0VfRUxFTUVOVD0xO0NLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFM9MjtDS0VESVRPUi5FTkxBUkdFX0xJU1RfSVRFTV9DT05URU5UUz0zO0NLRURJVE9SLkVOTEFSR0VfSU5MSU5FPTQ7Q0tFRElUT1IuU1RBUlQ9MTtDS0VESVRPUi5FTkQ9MjtDS0VESVRPUi5TSFJJTktfRUxFTUVOVD0xO0NLRURJVE9SLlNIUklOS19URVhUPTI7XCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpezE+YXJndW1lbnRzLmxlbmd0aHx8KHRoaXMucmFuZ2U9YSx0aGlzLmZvcmNlQnJCcmVhaz0wLHRoaXMuZW5sYXJnZUJyPTEsdGhpcy5lbmZvcmNlUmVhbEJsb2Nrcz0wLHRoaXMuX3x8KHRoaXMuXz17fSkpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKFwidHJ1ZVwiPT1hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4gYi5wdXNoKGEpLCExfSxDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApO3JldHVybiBifWZ1bmN0aW9uIGIoYSxjLGUsZyl7YTp7bnVsbD09ZyYmKGc9ZChlKSk7Zm9yKHZhciBsO2w9Zy5zaGlmdCgpOylpZihsLmdldER0ZCgpLnApe2c9e2VsZW1lbnQ6bCxyZW1haW5pbmc6Z307YnJlYWsgYX1nPW51bGx9aWYoIWcpcmV0dXJuIDA7aWYoKGw9Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlc1tnLmVsZW1lbnQuZGF0YShcImNrZS1maWx0ZXJcIildKSYmIWwuY2hlY2soYykpcmV0dXJuIGIoYSxcbmMsZSxnLnJlbWFpbmluZyk7Yz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGcuZWxlbWVudCk7Yy5zZWxlY3ROb2RlQ29udGVudHMoZy5lbGVtZW50KTtjPWMuY3JlYXRlSXRlcmF0b3IoKTtjLmVubGFyZ2VCcj1hLmVubGFyZ2VCcjtjLmVuZm9yY2VSZWFsQmxvY2tzPWEuZW5mb3JjZVJlYWxCbG9ja3M7Yy5hY3RpdmVGaWx0ZXI9Yy5maWx0ZXI9bDthLl8ubmVzdGVkRWRpdGFibGU9e2VsZW1lbnQ6Zy5lbGVtZW50LGNvbnRhaW5lcjplLHJlbWFpbmluZzpnLnJlbWFpbmluZyxpdGVyYXRvcjpjfTtyZXR1cm4gMX1mdW5jdGlvbiBjKGEsYixjKXtpZighYilyZXR1cm4hMTthPWEuY2xvbmUoKTthLmNvbGxhcHNlKCFjKTtyZXR1cm4gYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsYz9DS0VESVRPUi5TVEFSVDpDS0VESVRPUi5FTkQpfXZhciBlPS9eW1xcclxcblxcdCBdKyQvLGc9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyayghMSwhMCksbD1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKSxcbms9ZnVuY3Rpb24oYSl7cmV0dXJuIGcoYSkmJmwoYSl9LG49e2RkOjEsZHQ6MSxsaToxfTthLnByb3RvdHlwZT17Z2V0TmV4dFBhcmFncmFwaDpmdW5jdGlvbihhKXt2YXIgZCxsLEEsdSxCO2E9YXx8XCJwXCI7aWYodGhpcy5fLm5lc3RlZEVkaXRhYmxlKXtpZihkPXRoaXMuXy5uZXN0ZWRFZGl0YWJsZS5pdGVyYXRvci5nZXROZXh0UGFyYWdyYXBoKGEpKXJldHVybiB0aGlzLmFjdGl2ZUZpbHRlcj10aGlzLl8ubmVzdGVkRWRpdGFibGUuaXRlcmF0b3IuYWN0aXZlRmlsdGVyLGQ7dGhpcy5hY3RpdmVGaWx0ZXI9dGhpcy5maWx0ZXI7aWYoYih0aGlzLGEsdGhpcy5fLm5lc3RlZEVkaXRhYmxlLmNvbnRhaW5lcix0aGlzLl8ubmVzdGVkRWRpdGFibGUucmVtYWluaW5nKSlyZXR1cm4gdGhpcy5hY3RpdmVGaWx0ZXI9dGhpcy5fLm5lc3RlZEVkaXRhYmxlLml0ZXJhdG9yLmFjdGl2ZUZpbHRlcix0aGlzLl8ubmVzdGVkRWRpdGFibGUuaXRlcmF0b3IuZ2V0TmV4dFBhcmFncmFwaChhKTt0aGlzLl8ubmVzdGVkRWRpdGFibGU9XG5udWxsfWlmKCF0aGlzLnJhbmdlLnJvb3QuZ2V0RHRkKClbYV0pcmV0dXJuIG51bGw7aWYoIXRoaXMuXy5zdGFydGVkKXt2YXIgcT10aGlzLnJhbmdlLmNsb25lKCk7bD1xLnN0YXJ0UGF0aCgpO3ZhciB5PXEuZW5kUGF0aCgpLEY9IXEuY29sbGFwc2VkJiZjKHEsbC5ibG9jayksdD0hcS5jb2xsYXBzZWQmJmMocSx5LmJsb2NrLDEpO3Euc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5ULCEwKTtGJiZxLnNldFN0YXJ0QXQobC5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTt0JiZxLnNldEVuZEF0KHkuYmxvY2ssQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2w9cS5lbmRDb250YWluZXIuaGFzQXNjZW5kYW50KFwicHJlXCIsITApfHxxLnN0YXJ0Q29udGFpbmVyLmhhc0FzY2VuZGFudChcInByZVwiLCEwKTtxLmVubGFyZ2UodGhpcy5mb3JjZUJyQnJlYWsmJiFsfHwhdGhpcy5lbmxhcmdlQnI/Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM6Q0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUyk7XG5xLmNvbGxhcHNlZHx8KGw9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocS5jbG9uZSgpKSx5PUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITAsITApLGwuZXZhbHVhdG9yPXksdGhpcy5fLm5leHROb2RlPWwubmV4dCgpLGw9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocS5jbG9uZSgpKSxsLmV2YWx1YXRvcj15LGw9bC5wcmV2aW91cygpLHRoaXMuXy5sYXN0Tm9kZT1sLmdldE5leHRTb3VyY2VOb2RlKCEwLG51bGwscS5yb290KSx0aGlzLl8ubGFzdE5vZGUmJnRoaXMuXy5sYXN0Tm9kZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJiFDS0VESVRPUi50b29scy50cmltKHRoaXMuXy5sYXN0Tm9kZS5nZXRUZXh0KCkpJiZ0aGlzLl8ubGFzdE5vZGUuZ2V0UGFyZW50KCkuaXNCbG9ja0JvdW5kYXJ5KCkmJih5PXRoaXMucmFuZ2UuY2xvbmUoKSx5Lm1vdmVUb1Bvc2l0aW9uKHRoaXMuXy5sYXN0Tm9kZSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLHkuY2hlY2tFbmRPZkJsb2NrKCkmJlxuKHk9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh5LmVuZENvbnRhaW5lcix5LnJvb3QpLHRoaXMuXy5sYXN0Tm9kZT0oeS5ibG9ja3x8eS5ibG9ja0xpbWl0KS5nZXROZXh0U291cmNlTm9kZSghMCkpKSx0aGlzLl8ubGFzdE5vZGUmJnEucm9vdC5jb250YWlucyh0aGlzLl8ubGFzdE5vZGUpfHwodGhpcy5fLmxhc3ROb2RlPXRoaXMuXy5kb2NFbmRNYXJrZXI9cS5kb2N1bWVudC5jcmVhdGVUZXh0KFwiXCIpLHRoaXMuXy5sYXN0Tm9kZS5pbnNlcnRBZnRlcihsKSkscT1udWxsKTt0aGlzLl8uc3RhcnRlZD0xO2w9cX15PXRoaXMuXy5uZXh0Tm9kZTtxPXRoaXMuXy5sYXN0Tm9kZTtmb3IodGhpcy5fLm5leHROb2RlPW51bGw7eTspe3ZhciBGPTAsdD15Lmhhc0FzY2VuZGFudChcInByZVwiKSx6PXkudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5ULGg9MDtpZih6KXkudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZlLnRlc3QoeS5nZXRUZXh0KCkpJiYoej0wKTtlbHNle3ZhciBwPXkuZ2V0TmFtZSgpO1xuaWYoQ0tFRElUT1IuZHRkLiRibG9ja1twXSYmXCJmYWxzZVwiPT15LmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSl7ZD15O2IodGhpcyxhLGQpO2JyZWFrfWVsc2UgaWYoeS5pc0Jsb2NrQm91bmRhcnkodGhpcy5mb3JjZUJyQnJlYWsmJiF0JiZ7YnI6MX0pKXtpZihcImJyXCI9PXApej0xO2Vsc2UgaWYoIWwmJiF5LmdldENoaWxkQ291bnQoKSYmXCJoclwiIT1wKXtkPXk7QT15LmVxdWFscyhxKTticmVha31sJiYobC5zZXRFbmRBdCh5LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksXCJiclwiIT1wJiYodGhpcy5fLm5leHROb2RlPXkpKTtGPTF9ZWxzZXtpZih5LmdldEZpcnN0KCkpe2x8fChsPXRoaXMucmFuZ2UuY2xvbmUoKSxsLnNldFN0YXJ0QXQoeSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpKTt5PXkuZ2V0Rmlyc3QoKTtjb250aW51ZX16PTF9fXomJiFsJiYobD10aGlzLnJhbmdlLmNsb25lKCksbC5zZXRTdGFydEF0KHksQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSk7XG5BPSghRnx8eikmJnkuZXF1YWxzKHEpO2lmKGwmJiFGKWZvcig7IXkuZ2V0TmV4dChrKSYmIUE7KXtwPXkuZ2V0UGFyZW50KCk7aWYocC5pc0Jsb2NrQm91bmRhcnkodGhpcy5mb3JjZUJyQnJlYWsmJiF0JiZ7YnI6MX0pKXtGPTE7ej0wO0F8fHAuZXF1YWxzKHEpO2wuc2V0RW5kQXQocCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTticmVha315PXA7ej0xO0E9eS5lcXVhbHMocSk7aD0xfXomJmwuc2V0RW5kQXQoeSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO3k9dGhpcy5fZ2V0TmV4dFNvdXJjZU5vZGUoeSxoLHEpO2lmKChBPSF5KXx8RiYmbClicmVha31pZighZCl7aWYoIWwpcmV0dXJuIHRoaXMuXy5kb2NFbmRNYXJrZXImJnRoaXMuXy5kb2NFbmRNYXJrZXIucmVtb3ZlKCksdGhpcy5fLm5leHROb2RlPW51bGw7ZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGwuc3RhcnRDb250YWluZXIsbC5yb290KTt5PWQuYmxvY2tMaW1pdDtGPXtkaXY6MSx0aDoxLHRkOjF9O1xuZD1kLmJsb2NrOyFkJiZ5JiYhdGhpcy5lbmZvcmNlUmVhbEJsb2NrcyYmRlt5LmdldE5hbWUoKV0mJmwuY2hlY2tTdGFydE9mQmxvY2soKSYmbC5jaGVja0VuZE9mQmxvY2soKSYmIXkuZXF1YWxzKGwucm9vdCk/ZD15OiFkfHx0aGlzLmVuZm9yY2VSZWFsQmxvY2tzJiZkLmlzKG4pPyhkPXRoaXMucmFuZ2UuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKSxsLmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGQpLGQudHJpbSgpLGwuaW5zZXJ0Tm9kZShkKSx1PUI9ITApOlwibGlcIiE9ZC5nZXROYW1lKCk/bC5jaGVja1N0YXJ0T2ZCbG9jaygpJiZsLmNoZWNrRW5kT2ZCbG9jaygpfHwoZD1kLmNsb25lKCExKSxsLmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGQpLGQudHJpbSgpLEI9bC5zcGxpdEJsb2NrKCksdT0hQi53YXNTdGFydE9mQmxvY2ssQj0hQi53YXNFbmRPZkJsb2NrLGwuaW5zZXJ0Tm9kZShkKSk6QXx8KHRoaXMuXy5uZXh0Tm9kZT1kLmVxdWFscyhxKT9udWxsOnRoaXMuX2dldE5leHRTb3VyY2VOb2RlKGwuZ2V0Qm91bmRhcnlOb2RlcygpLmVuZE5vZGUsXG4xLHEpKX11JiYodT1kLmdldFByZXZpb3VzKCkpJiZ1LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKFwiYnJcIj09dS5nZXROYW1lKCk/dS5yZW1vdmUoKTp1LmdldExhc3QoKSYmXCJiclwiPT11LmdldExhc3QoKS4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnUuZ2V0TGFzdCgpLnJlbW92ZSgpKTtCJiYodT1kLmdldExhc3QoKSkmJnUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImJyXCI9PXUuZ2V0TmFtZSgpJiYoIUNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyfHx1LmdldFByZXZpb3VzKGcpfHx1LmdldE5leHQoZykpJiZ1LnJlbW92ZSgpO3RoaXMuXy5uZXh0Tm9kZXx8KHRoaXMuXy5uZXh0Tm9kZT1BfHxkLmVxdWFscyhxKXx8IXE/bnVsbDp0aGlzLl9nZXROZXh0U291cmNlTm9kZShkLDEscSkpO3JldHVybiBkfSxfZ2V0TmV4dFNvdXJjZU5vZGU6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIShhLmVxdWFscyhjKXx8YS5lcXVhbHMoZSkpfXZhciBlPVxudGhpcy5yYW5nZS5yb290O2ZvcihhPWEuZ2V0TmV4dFNvdXJjZU5vZGUoYixudWxsLGQpOyFnKGEpOylhPWEuZ2V0TmV4dFNvdXJjZU5vZGUoYixudWxsLGQpO3JldHVybiBhfX07Q0tFRElUT1IuZG9tLnJhbmdlLnByb3RvdHlwZS5jcmVhdGVJdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgYSh0aGlzKX19KSgpO1xuQ0tFRElUT1IuY29tbWFuZD1mdW5jdGlvbihhLGQpe3RoaXMudWlJdGVtcz1bXTt0aGlzLmV4ZWM9ZnVuY3Rpb24oYil7aWYodGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUR8fCF0aGlzLmNoZWNrQWxsb3dlZCgpKXJldHVybiExO3RoaXMuZWRpdG9yRm9jdXMmJmEuZm9jdXMoKTtyZXR1cm4hMT09PXRoaXMuZmlyZShcImV4ZWNcIik/ITA6ITEhPT1kLmV4ZWMuY2FsbCh0aGlzLGEsYil9O3RoaXMucmVmcmVzaD1mdW5jdGlvbihhLGIpe2lmKCF0aGlzLnJlYWRPbmx5JiZhLnJlYWRPbmx5KXJldHVybiEwO2lmKHRoaXMuY29udGV4dCYmIWIuaXNDb250ZXh0Rm9yKHRoaXMuY29udGV4dCl8fCF0aGlzLmNoZWNrQWxsb3dlZCghMCkpcmV0dXJuIHRoaXMuZGlzYWJsZSgpLCEwO3RoaXMuc3RhcnREaXNhYmxlZHx8dGhpcy5lbmFibGUoKTt0aGlzLm1vZGVzJiYhdGhpcy5tb2Rlc1thLm1vZGVdJiZ0aGlzLmRpc2FibGUoKTtyZXR1cm4hMT09PXRoaXMuZmlyZShcInJlZnJlc2hcIixcbntlZGl0b3I6YSxwYXRoOmJ9KT8hMDpkLnJlZnJlc2gmJiExIT09ZC5yZWZyZXNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07dmFyIGI7dGhpcy5jaGVja0FsbG93ZWQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGN8fFwiYm9vbGVhblwiIT10eXBlb2YgYj9iPWEuYWN0aXZlRmlsdGVyLmNoZWNrRmVhdHVyZSh0aGlzKTpifTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxkLHttb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czoxLGNvbnRleHRTZW5zaXRpdmU6ISFkLmNvbnRleHQsc3RhdGU6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUR9KTtDS0VESVRPUi5ldmVudC5jYWxsKHRoaXMpfTtcbkNLRURJVE9SLmNvbW1hbmQucHJvdG90eXBlPXtlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmdGhpcy5jaGVja0FsbG93ZWQoKSYmdGhpcy5zZXRTdGF0ZSh0aGlzLnByZXNlcnZlU3RhdGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLnByZXZpb3VzU3RhdGU/dGhpcy5wcmV2aW91c1N0YXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRil9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX0sc2V0U3RhdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGF0ZT09YXx8YSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJiF0aGlzLmNoZWNrQWxsb3dlZCgpKXJldHVybiExO3RoaXMucHJldmlvdXNTdGF0ZT10aGlzLnN0YXRlO3RoaXMuc3RhdGU9YTt0aGlzLmZpcmUoXCJzdGF0ZVwiKTtyZXR1cm4hMH0sdG9nZ2xlU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkY/XG50aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTp0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTiYmdGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PRkYpfX07Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IuY29tbWFuZC5wcm90b3R5cGUpO0NLRURJVE9SLkVOVEVSX1A9MTtDS0VESVRPUi5FTlRFUl9CUj0yO0NLRURJVE9SLkVOVEVSX0RJVj0zO1xuQ0tFRElUT1IuY29uZmlnPXtjdXN0b21Db25maWc6XCJjb25maWcuanNcIixhdXRvVXBkYXRlRWxlbWVudDohMCxsYW5ndWFnZTpcIlwiLGRlZmF1bHRMYW5ndWFnZTpcImVuXCIsY29udGVudHNMYW5nRGlyZWN0aW9uOlwiXCIsZW50ZXJNb2RlOkNLRURJVE9SLkVOVEVSX1AsZm9yY2VFbnRlck1vZGU6ITEsc2hpZnRFbnRlck1vZGU6Q0tFRElUT1IuRU5URVJfQlIsZG9jVHlwZTpcIlxceDNjIURPQ1RZUEUgaHRtbFxceDNlXCIsYm9keUlkOlwiXCIsYm9keUNsYXNzOlwiXCIsZnVsbFBhZ2U6ITEsaGVpZ2h0OjIwMCxjb250ZW50c0NzczpDS0VESVRPUi5nZXRVcmwoXCJjb250ZW50cy5jc3NcIiksZXh0cmFQbHVnaW5zOlwiXCIscmVtb3ZlUGx1Z2luczpcIlwiLHByb3RlY3RlZFNvdXJjZTpbXSx0YWJJbmRleDowLHdpZHRoOlwiXCIsYmFzZUZsb2F0WkluZGV4OjFFNCxibG9ja2VkS2V5c3Ryb2tlczpbQ0tFRElUT1IuQ1RSTCs2NixDS0VESVRPUi5DVFJMKzczLENLRURJVE9SLkNUUkwrODVdfTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZCxlKXt2YXIgaCxwO2E9W107Zm9yKGggaW4gYil7cD1iW2hdO3A9XCJib29sZWFuXCI9PXR5cGVvZiBwP3t9OlwiZnVuY3Rpb25cIj09dHlwZW9mIHA/e21hdGNoOnB9OksocCk7XCIkXCIhPWguY2hhckF0KDApJiYocC5lbGVtZW50cz1oKTtjJiYocC5mZWF0dXJlTmFtZT1jLnRvTG93ZXJDYXNlKCkpO3ZhciBtPXA7bS5lbGVtZW50cz1sKG0uZWxlbWVudHMsL1xccysvKXx8bnVsbDttLnByb3BlcnRpZXNPbmx5PW0ucHJvcGVydGllc09ubHl8fCEwPT09bS5lbGVtZW50czt2YXIgcj0vXFxzKixcXHMqLyxxPXZvaWQgMDtmb3IocSBpbiBRKXttW3FdPWwobVtxXSxyKXx8bnVsbDt2YXIgZj1tLEU9dltxXSx6PWwobVt2W3FdXSxyKSxnPW1bcV0sQz1bXSxHPSEwLEw9dm9pZCAwO3o/Rz0hMTp6PXt9O2ZvcihMIGluIGcpXCIhXCI9PUwuY2hhckF0KDApJiYoTD1MLnNsaWNlKDEpLEMucHVzaChMKSx6W0xdPSEwLEc9ITEpO2Zvcig7TD1DLnBvcCgpOylnW0xdPVxuZ1tcIiFcIitMXSxkZWxldGUgZ1tcIiFcIitMXTtmW0VdPShHPyExOnopfHxudWxsfW0ubWF0Y2g9bS5tYXRjaHx8bnVsbDtkLnB1c2gocCk7YS5wdXNoKHApfWI9ZS5lbGVtZW50cztlPWUuZ2VuZXJpYzt2YXIgaztjPTA7Zm9yKGQ9YS5sZW5ndGg7YzxkOysrYyl7aD1LKGFbY10pO3A9ITA9PT1oLmNsYXNzZXN8fCEwPT09aC5zdHlsZXN8fCEwPT09aC5hdHRyaWJ1dGVzO209aDtxPUU9cj12b2lkIDA7Zm9yKHIgaW4gUSltW3JdPUYobVtyXSk7Zj0hMDtmb3IocSBpbiB2KXtyPXZbcV07RT1tW3JdO3o9W107Zz12b2lkIDA7Zm9yKGcgaW4gRSktMTxnLmluZGV4T2YoXCIqXCIpP3oucHVzaChuZXcgUmVnRXhwKFwiXlwiK2cucmVwbGFjZSgvXFwqL2csXCIuKlwiKStcIiRcIikpOnoucHVzaChnKTtFPXo7RS5sZW5ndGgmJihtW3JdPUUsZj0hMSl9bS5ub3RoaW5nUmVxdWlyZWQ9ZjttLm5vUHJvcGVydGllcz0hKG0uYXR0cmlidXRlc3x8bS5jbGFzc2VzfHxtLnN0eWxlcyk7aWYoITA9PT1oLmVsZW1lbnRzfHxcbm51bGw9PT1oLmVsZW1lbnRzKWVbcD9cInVuc2hpZnRcIjpcInB1c2hcIl0oaCk7ZWxzZSBmb3IoayBpbiBtPWguZWxlbWVudHMsZGVsZXRlIGguZWxlbWVudHMsbSlpZihiW2tdKWJba11bcD9cInVuc2hpZnRcIjpcInB1c2hcIl0oaCk7ZWxzZSBiW2tdPVtoXX19ZnVuY3Rpb24gZChhLGMsZCxoKXtpZighYS5tYXRjaHx8YS5tYXRjaChjKSlpZihofHxrKGEsYykpaWYoYS5wcm9wZXJ0aWVzT25seXx8KGQudmFsaWQ9ITApLGQuYWxsQXR0cmlidXRlc3x8KGQuYWxsQXR0cmlidXRlcz1iKGEuYXR0cmlidXRlcyxjLmF0dHJpYnV0ZXMsZC52YWxpZEF0dHJpYnV0ZXMpKSxkLmFsbFN0eWxlc3x8KGQuYWxsU3R5bGVzPWIoYS5zdHlsZXMsYy5zdHlsZXMsZC52YWxpZFN0eWxlcykpLCFkLmFsbENsYXNzZXMpe2E9YS5jbGFzc2VzO2M9Yy5jbGFzc2VzO2g9ZC52YWxpZENsYXNzZXM7aWYoYSlpZighMD09PWEpYT0hMDtlbHNle2Zvcih2YXIgcD0wLGU9Yy5sZW5ndGgsbTtwPGU7KytwKW09Y1twXSxoW21dfHxcbihoW21dPWEobSkpO2E9ITF9ZWxzZSBhPSExO2QuYWxsQ2xhc3Nlcz1hfX1mdW5jdGlvbiBiKGEsYixjKXtpZighYSlyZXR1cm4hMTtpZighMD09PWEpcmV0dXJuITA7Zm9yKHZhciBkIGluIGIpY1tkXXx8KGNbZF09YShkKSk7cmV0dXJuITF9ZnVuY3Rpb24gYyhhLGIsYyl7aWYoIWEubWF0Y2h8fGEubWF0Y2goYikpe2lmKGEubm9Qcm9wZXJ0aWVzKXJldHVybiExO2MuaGFkSW52YWxpZEF0dHJpYnV0ZT1lKGEuYXR0cmlidXRlcyxiLmF0dHJpYnV0ZXMpfHxjLmhhZEludmFsaWRBdHRyaWJ1dGU7Yy5oYWRJbnZhbGlkU3R5bGU9ZShhLnN0eWxlcyxiLnN0eWxlcyl8fGMuaGFkSW52YWxpZFN0eWxlO2E9YS5jbGFzc2VzO2I9Yi5jbGFzc2VzO2lmKGEpe2Zvcih2YXIgZD0hMSxoPSEwPT09YSxwPWIubGVuZ3RoO3AtLTspaWYoaHx8YShiW3BdKSliLnNwbGljZShwLDEpLGQ9ITA7YT1kfWVsc2UgYT0hMTtjLmhhZEludmFsaWRDbGFzcz1hfHxjLmhhZEludmFsaWRDbGFzc319ZnVuY3Rpb24gZShhLFxuYil7aWYoIWEpcmV0dXJuITE7dmFyIGM9ITEsZD0hMD09PWEsaDtmb3IoaCBpbiBiKWlmKGR8fGEoaCkpZGVsZXRlIGJbaF0sYz0hMDtyZXR1cm4gY31mdW5jdGlvbiBnKGEsYixjKXtpZihhLmRpc2FibGVkfHxhLmN1c3RvbUNvbmZpZyYmIWN8fCFiKXJldHVybiExO2EuXy5jYWNoZWRDaGVja3M9e307cmV0dXJuITB9ZnVuY3Rpb24gbChhLGIpe2lmKCFhKXJldHVybiExO2lmKCEwPT09YSlyZXR1cm4gYTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSlyZXR1cm4gYT1SKGEpLFwiKlwiPT1hPyEwOkNLRURJVE9SLnRvb2xzLmNvbnZlcnRBcnJheVRvT2JqZWN0KGEuc3BsaXQoYikpO2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpcmV0dXJuIGEubGVuZ3RoP0NLRURJVE9SLnRvb2xzLmNvbnZlcnRBcnJheVRvT2JqZWN0KGEpOiExO3ZhciBjPXt9LGQ9MCxoO2ZvcihoIGluIGEpY1toXT1hW2hdLGQrKztyZXR1cm4gZD9jOiExfWZ1bmN0aW9uIGsoYSxiKXtpZihhLm5vdGhpbmdSZXF1aXJlZClyZXR1cm4hMDtcbnZhciBjLGQsaCxwO2lmKGg9YS5yZXF1aXJlZENsYXNzZXMpZm9yKHA9Yi5jbGFzc2VzLGM9MDtjPGgubGVuZ3RoOysrYylpZihkPWhbY10sXCJzdHJpbmdcIj09dHlwZW9mIGQpe2lmKC0xPT1DS0VESVRPUi50b29scy5pbmRleE9mKHAsZCkpcmV0dXJuITF9ZWxzZSBpZighQ0tFRElUT1IudG9vbHMuY2hlY2tJZkFueUFycmF5SXRlbU1hdGNoZXMocCxkKSlyZXR1cm4hMTtyZXR1cm4gbihiLnN0eWxlcyxhLnJlcXVpcmVkU3R5bGVzKSYmbihiLmF0dHJpYnV0ZXMsYS5yZXF1aXJlZEF0dHJpYnV0ZXMpfWZ1bmN0aW9uIG4oYSxiKXtpZighYilyZXR1cm4hMDtmb3IodmFyIGM9MCxkO2M8Yi5sZW5ndGg7KytjKWlmKGQ9YltjXSxcInN0cmluZ1wiPT10eXBlb2YgZCl7aWYoIShkIGluIGEpKXJldHVybiExfWVsc2UgaWYoIUNLRURJVE9SLnRvb2xzLmNoZWNrSWZBbnlPYmplY3RQcm9wZXJ0eU1hdGNoZXMoYSxkKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB3KGEpe2lmKCFhKXJldHVybnt9O1xuYT1hLnNwbGl0KC9cXHMqLFxccyovKS5zb3J0KCk7Zm9yKHZhciBiPXt9O2EubGVuZ3RoOyliW2Euc2hpZnQoKV09XCJja2UtdGVzdFwiO3JldHVybiBifWZ1bmN0aW9uIGYoYSl7dmFyIGIsYyxkLGgscD17fSxlPTE7Zm9yKGE9UihhKTtiPWEubWF0Y2goRCk7KShjPWJbMl0pPyhkPXgoYyxcInN0eWxlc1wiKSxoPXgoYyxcImF0dHJzXCIpLGM9eChjLFwiY2xhc3Nlc1wiKSk6ZD1oPWM9bnVsbCxwW1wiJFwiK2UrK109e2VsZW1lbnRzOmJbMV0sY2xhc3NlczpjLHN0eWxlczpkLGF0dHJpYnV0ZXM6aH0sYT1hLnNsaWNlKGJbMF0ubGVuZ3RoKTtyZXR1cm4gcH1mdW5jdGlvbiB4KGEsYil7dmFyIGM9YS5tYXRjaChJW2JdKTtyZXR1cm4gYz9SKGNbMV0pOm51bGx9ZnVuY3Rpb24gQShhKXt2YXIgYj1hLnN0eWxlQmFja3VwPWEuYXR0cmlidXRlcy5zdHlsZSxjPWEuY2xhc3NCYWNrdXA9YS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl07YS5zdHlsZXN8fChhLnN0eWxlcz1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYnx8XG5cIlwiLDEpKTthLmNsYXNzZXN8fChhLmNsYXNzZXM9Yz9jLnNwbGl0KC9cXHMrLyk6W10pfWZ1bmN0aW9uIHUoYSxiLGgsZSl7dmFyIG09MCxyO2UudG9IdG1sJiYoYi5uYW1lPWIubmFtZS5yZXBsYWNlKEUsXCIkMVwiKSk7aWYoZS5kb0NhbGxiYWNrcyYmYS5lbGVtZW50Q2FsbGJhY2tzKXthOntyPWEuZWxlbWVudENhbGxiYWNrcztmb3IodmFyIGc9MCxmPXIubGVuZ3RoLHo7ZzxmOysrZylpZih6PXJbZ10oYikpe3I9ejticmVhayBhfXI9dm9pZCAwfWlmKHIpcmV0dXJuIHJ9aWYoZS5kb1RyYW5zZm9ybSYmKHI9YS5fLnRyYW5zZm9ybWF0aW9uc1tiLm5hbWVdKSl7QShiKTtmb3IoZz0wO2c8ci5sZW5ndGg7KytnKXAoYSxiLHJbZ10pO3EoYil9aWYoZS5kb0ZpbHRlcil7YTp7Zz1iLm5hbWU7Zj1hLl87YT1mLmFsbG93ZWRSdWxlcy5lbGVtZW50c1tnXTtyPWYuYWxsb3dlZFJ1bGVzLmdlbmVyaWM7Zz1mLmRpc2FsbG93ZWRSdWxlcy5lbGVtZW50c1tnXTtmPWYuZGlzYWxsb3dlZFJ1bGVzLmdlbmVyaWM7XG56PWUuc2tpcFJlcXVpcmVkO3ZhciBDPXt2YWxpZDohMSx2YWxpZEF0dHJpYnV0ZXM6e30sdmFsaWRDbGFzc2VzOnt9LHZhbGlkU3R5bGVzOnt9LGFsbEF0dHJpYnV0ZXM6ITEsYWxsQ2xhc3NlczohMSxhbGxTdHlsZXM6ITEsaGFkSW52YWxpZEF0dHJpYnV0ZTohMSxoYWRJbnZhbGlkQ2xhc3M6ITEsaGFkSW52YWxpZFN0eWxlOiExfSx2LGw7aWYoYXx8cil7QShiKTtpZihnKWZvcih2PTAsbD1nLmxlbmd0aDt2PGw7Kyt2KWlmKCExPT09YyhnW3ZdLGIsQykpe2E9bnVsbDticmVhayBhfWlmKGYpZm9yKHY9MCxsPWYubGVuZ3RoO3Y8bDsrK3YpYyhmW3ZdLGIsQyk7aWYoYSlmb3Iodj0wLGw9YS5sZW5ndGg7djxsOysrdilkKGFbdl0sYixDLHopO2lmKHIpZm9yKHY9MCxsPXIubGVuZ3RoO3Y8bDsrK3YpZChyW3ZdLGIsQyx6KTthPUN9ZWxzZSBhPW51bGx9aWYoIWF8fCFhLnZhbGlkKXJldHVybiBoLnB1c2goYiksMTtsPWEudmFsaWRBdHRyaWJ1dGVzO3ZhciBHPWEudmFsaWRTdHlsZXM7XG5yPWEudmFsaWRDbGFzc2VzO3ZhciBnPWIuYXR0cmlidXRlcyxrPWIuc3R5bGVzLGY9Yi5jbGFzc2VzO3o9Yi5jbGFzc0JhY2t1cDt2YXIgST1iLnN0eWxlQmFja3VwLEQsSCxKPVtdLEM9W10sbj0vXmRhdGEtY2tlLS87dj0hMTtkZWxldGUgZy5zdHlsZTtkZWxldGUgZ1tcImNsYXNzXCJdO2RlbGV0ZSBiLmNsYXNzQmFja3VwO2RlbGV0ZSBiLnN0eWxlQmFja3VwO2lmKCFhLmFsbEF0dHJpYnV0ZXMpZm9yKEQgaW4gZylsW0RdfHwobi50ZXN0KEQpP0Q9PShIPUQucmVwbGFjZSgvXmRhdGEtY2tlLXNhdmVkLS8sXCJcIikpfHxsW0hdfHwoZGVsZXRlIGdbRF0sdj0hMCk6KGRlbGV0ZSBnW0RdLHY9ITApKTtpZighYS5hbGxTdHlsZXN8fGEuaGFkSW52YWxpZFN0eWxlKXtmb3IoRCBpbiBrKWEuYWxsU3R5bGVzfHxHW0RdP0oucHVzaChEK1wiOlwiK2tbRF0pOnY9ITA7Si5sZW5ndGgmJihnLnN0eWxlPUouc29ydCgpLmpvaW4oXCI7IFwiKSl9ZWxzZSBJJiYoZy5zdHlsZT1JKTtpZighYS5hbGxDbGFzc2VzfHxcbmEuaGFkSW52YWxpZENsYXNzKXtmb3IoRD0wO0Q8Zi5sZW5ndGg7KytEKShhLmFsbENsYXNzZXN8fHJbZltEXV0pJiZDLnB1c2goZltEXSk7Qy5sZW5ndGgmJihnW1wiY2xhc3NcIl09Qy5zb3J0KCkuam9pbihcIiBcIikpO3omJkMubGVuZ3RoPHouc3BsaXQoL1xccysvKS5sZW5ndGgmJih2PSEwKX1lbHNlIHomJihnW1wiY2xhc3NcIl09eik7diYmKG09MSk7aWYoIWUuc2tpcEZpbmFsVmFsaWRhdGlvbiYmIXkoYikpcmV0dXJuIGgucHVzaChiKSwxfWUudG9IdG1sJiYoYi5uYW1lPWIubmFtZS5yZXBsYWNlKEwsXCJja2U6JDFcIikpO3JldHVybiBtfWZ1bmN0aW9uIEIoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKS0xPGMuaW5kZXhPZihcIipcIikmJmIucHVzaChjLnJlcGxhY2UoL1xcKi9nLFwiLipcIikpO3JldHVybiBiLmxlbmd0aD9uZXcgUmVnRXhwKFwiXig/OlwiK2Iuam9pbihcInxcIikrXCIpJFwiKTpudWxsfWZ1bmN0aW9uIHEoYSl7dmFyIGI9YS5hdHRyaWJ1dGVzLGM7ZGVsZXRlIGIuc3R5bGU7ZGVsZXRlIGJbXCJjbGFzc1wiXTtcbmlmKGM9Q0tFRElUT1IudG9vbHMud3JpdGVDc3NUZXh0KGEuc3R5bGVzLCEwKSliLnN0eWxlPWM7YS5jbGFzc2VzLmxlbmd0aCYmKGJbXCJjbGFzc1wiXT1hLmNsYXNzZXMuc29ydCgpLmpvaW4oXCIgXCIpKX1mdW5jdGlvbiB5KGEpe3N3aXRjaChhLm5hbWUpe2Nhc2UgXCJhXCI6aWYoIShhLmNoaWxkcmVuLmxlbmd0aHx8YS5hdHRyaWJ1dGVzLm5hbWV8fGEuYXR0cmlidXRlcy5pZCkpcmV0dXJuITE7YnJlYWs7Y2FzZSBcImltZ1wiOmlmKCFhLmF0dHJpYnV0ZXMuc3JjKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIEYoYSl7aWYoIWEpcmV0dXJuITE7aWYoITA9PT1hKXJldHVybiEwO3ZhciBiPUIoYSk7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBjIGluIGF8fGImJmMubWF0Y2goYil9fWZ1bmN0aW9uIHQoKXtyZXR1cm4gbmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChcImJyXCIpfWZ1bmN0aW9uIHooYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoXCJiclwiPT1cbmEubmFtZXx8SC4kYmxvY2tbYS5uYW1lXSl9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9YS5uYW1lO2lmKEguJGVtcHR5W2RdfHwhYS5jaGlsZHJlbi5sZW5ndGgpXCJoclwiPT1kJiZcImJyXCI9PWI/YS5yZXBsYWNlV2l0aCh0KCkpOihhLnBhcmVudCYmYy5wdXNoKHtjaGVjazpcIml0XCIsZWw6YS5wYXJlbnR9KSxhLnJlbW92ZSgpKTtlbHNlIGlmKEguJGJsb2NrW2RdfHxcInRyXCI9PWQpaWYoXCJiclwiPT1iKWEucHJldmlvdXMmJiF6KGEucHJldmlvdXMpJiYoYj10KCksYi5pbnNlcnRCZWZvcmUoYSkpLGEubmV4dCYmIXooYS5uZXh0KSYmKGI9dCgpLGIuaW5zZXJ0QWZ0ZXIoYSkpLGEucmVwbGFjZVdpdGhDaGlsZHJlbigpO2Vsc2V7dmFyIGQ9YS5jaGlsZHJlbixoO2I6e2g9SFtiXTtmb3IodmFyIHA9MCxlPWQubGVuZ3RoLG07cDxlOysrcClpZihtPWRbcF0sbS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFoW20ubmFtZV0pe2g9ITE7YnJlYWsgYn1oPSEwfWlmKGgpYS5uYW1lPWIsYS5hdHRyaWJ1dGVzPVxue30sYy5wdXNoKHtjaGVjazpcInBhcmVudC1kb3duXCIsZWw6YX0pO2Vsc2V7aD1hLnBhcmVudDtmb3IodmFyIHA9aC50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UfHxcImJvZHlcIj09aC5uYW1lLHIsZyxlPWQubGVuZ3RoOzA8ZTspbT1kWy0tZV0scCYmKG0udHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfHxtLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmSC4kaW5saW5lW20ubmFtZV0pPyhyfHwocj1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KGIpLHIuaW5zZXJ0QWZ0ZXIoYSksYy5wdXNoKHtjaGVjazpcInBhcmVudC1kb3duXCIsZWw6cn0pKSxyLmFkZChtLDApKToocj1udWxsLGc9SFtoLm5hbWVdfHxILnNwYW4sbS5pbnNlcnRBZnRlcihhKSxoLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlR8fG0udHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxnW20ubmFtZV18fGMucHVzaCh7Y2hlY2s6XCJlbC11cFwiLGVsOm19KSk7YS5yZW1vdmUoKX19ZWxzZSBkIGluXG57c3R5bGU6MSxzY3JpcHQ6MX0/YS5yZW1vdmUoKTooYS5wYXJlbnQmJmMucHVzaCh7Y2hlY2s6XCJpdFwiLGVsOmEucGFyZW50fSksYS5yZXBsYWNlV2l0aENoaWxkcmVuKCkpfWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkLGg7Zm9yKGQ9MDtkPGMubGVuZ3RoOysrZClpZihoPWNbZF0sIShoLmNoZWNrJiYhYS5jaGVjayhoLmNoZWNrLCExKXx8aC5sZWZ0JiYhaC5sZWZ0KGIpKSl7aC5yaWdodChiLEopO2JyZWFrfX1mdW5jdGlvbiBtKGEsYil7dmFyIGM9Yi5nZXREZWZpbml0aW9uKCksZD1jLmF0dHJpYnV0ZXMsaD1jLnN0eWxlcyxwLGUsbSxyO2lmKGEubmFtZSE9Yy5lbGVtZW50KXJldHVybiExO2ZvcihwIGluIGQpaWYoXCJjbGFzc1wiPT1wKWZvcihjPWRbcF0uc3BsaXQoL1xccysvKSxtPWEuY2xhc3Nlcy5qb2luKFwifFwiKTtyPWMucG9wKCk7KXtpZigtMT09bS5pbmRleE9mKHIpKXJldHVybiExfWVsc2UgaWYoYS5hdHRyaWJ1dGVzW3BdIT1kW3BdKXJldHVybiExO2ZvcihlIGluIGgpaWYoYS5zdHlsZXNbZV0hPVxuaFtlXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBDKGEsYil7dmFyIGMsZDtcInN0cmluZ1wiPT10eXBlb2YgYT9jPWE6YSBpbnN0YW5jZW9mIENLRURJVE9SLnN0eWxlP2Q9YTooYz1hWzBdLGQ9YVsxXSk7cmV0dXJuW3tlbGVtZW50OmMsbGVmdDpkLHJpZ2h0OmZ1bmN0aW9uKGEsYyl7Yy50cmFuc2Zvcm0oYSxiKX19XX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gbShiLGEpfX1mdW5jdGlvbiBHKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2NbYV0oYil9fXZhciBIPUNLRURJVE9SLmR0ZCxLPUNLRURJVE9SLnRvb2xzLmNvcHksUj1DS0VESVRPUi50b29scy50cmltLE09W1wiXCIsXCJwXCIsXCJiclwiLFwiZGl2XCJdO0NLRURJVE9SLkZJTFRFUl9TS0lQX1RSRUU9MjtDS0VESVRPUi5maWx0ZXI9ZnVuY3Rpb24oYSl7dGhpcy5hbGxvd2VkQ29udGVudD1bXTt0aGlzLmRpc2FsbG93ZWRDb250ZW50PVtdO3RoaXMuZWxlbWVudENhbGxiYWNrcz1udWxsO3RoaXMuZGlzYWJsZWQ9XG4hMTt0aGlzLmVkaXRvcj1udWxsO3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpO3RoaXMuXz17YWxsb3dlZFJ1bGVzOntlbGVtZW50czp7fSxnZW5lcmljOltdfSxkaXNhbGxvd2VkUnVsZXM6e2VsZW1lbnRzOnt9LGdlbmVyaWM6W119LHRyYW5zZm9ybWF0aW9uczp7fSxjYWNoZWRUZXN0czp7fX07Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlc1t0aGlzLmlkXT10aGlzO2lmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5lZGl0b3Ipe2E9dGhpcy5lZGl0b3I9YTt0aGlzLmN1c3RvbUNvbmZpZz0hMDt2YXIgYj1hLmNvbmZpZy5hbGxvd2VkQ29udGVudDshMD09PWI/dGhpcy5kaXNhYmxlZD0hMDooYnx8KHRoaXMuY3VzdG9tQ29uZmlnPSExKSx0aGlzLmFsbG93KGIsXCJjb25maWdcIiwxKSx0aGlzLmFsbG93KGEuY29uZmlnLmV4dHJhQWxsb3dlZENvbnRlbnQsXCJleHRyYVwiLDEpLHRoaXMuYWxsb3coTVthLmVudGVyTW9kZV0rXCIgXCIrTVthLnNoaWZ0RW50ZXJNb2RlXSxcImRlZmF1bHRcIixcbjEpLHRoaXMuZGlzYWxsb3coYS5jb25maWcuZGlzYWxsb3dlZENvbnRlbnQpKX1lbHNlIHRoaXMuY3VzdG9tQ29uZmlnPSExLHRoaXMuYWxsb3coYSxcImRlZmF1bHRcIiwxKX07Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlcz17fTtDS0VESVRPUi5maWx0ZXIucHJvdG90eXBlPXthbGxvdzpmdW5jdGlvbihiLGMsZCl7aWYoIWcodGhpcyxiLGQpKXJldHVybiExO3ZhciBoLHA7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpYj1mKGIpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIENLRURJVE9SLnN0eWxlKXtpZihiLnRvQWxsb3dlZENvbnRlbnRSdWxlcylyZXR1cm4gdGhpcy5hbGxvdyhiLnRvQWxsb3dlZENvbnRlbnRSdWxlcyh0aGlzLmVkaXRvciksYyxkKTtoPWIuZ2V0RGVmaW5pdGlvbigpO2I9e307ZD1oLmF0dHJpYnV0ZXM7YltoLmVsZW1lbnRdPWg9e3N0eWxlczpoLnN0eWxlcyxyZXF1aXJlZFN0eWxlczpoLnN0eWxlcyYmQ0tFRElUT1IudG9vbHMub2JqZWN0S2V5cyhoLnN0eWxlcyl9O2QmJihkPVxuSyhkKSxoLmNsYXNzZXM9ZFtcImNsYXNzXCJdP2RbXCJjbGFzc1wiXS5zcGxpdCgvXFxzKy8pOm51bGwsaC5yZXF1aXJlZENsYXNzZXM9aC5jbGFzc2VzLGRlbGV0ZSBkW1wiY2xhc3NcIl0saC5hdHRyaWJ1dGVzPWQsaC5yZXF1aXJlZEF0dHJpYnV0ZXM9ZCYmQ0tFRElUT1IudG9vbHMub2JqZWN0S2V5cyhkKSl9ZWxzZSBpZihDS0VESVRPUi50b29scy5pc0FycmF5KGIpKXtmb3IoaD0wO2g8Yi5sZW5ndGg7KytoKXA9dGhpcy5hbGxvdyhiW2hdLGMsZCk7cmV0dXJuIHB9YSh0aGlzLGIsYyx0aGlzLmFsbG93ZWRDb250ZW50LHRoaXMuXy5hbGxvd2VkUnVsZXMpO3JldHVybiEwfSxhcHBseVRvOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZGlzYWJsZWQpcmV0dXJuITE7dmFyIHA9dGhpcyxlPVtdLG09dGhpcy5lZGl0b3ImJnRoaXMuZWRpdG9yLmNvbmZpZy5wcm90ZWN0ZWRTb3VyY2UscixnPSExLGY9e2RvRmlsdGVyOiFjLGRvVHJhbnNmb3JtOiEwLGRvQ2FsbGJhY2tzOiEwLHRvSHRtbDpifTtcbmEuZm9yRWFjaChmdW5jdGlvbihhKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7aWYoXCJvZmZcIj09YS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtZmlsdGVyXCJdKXJldHVybiExO2lmKCFifHxcInNwYW5cIiE9YS5uYW1lfHwhfkNLRURJVE9SLnRvb2xzLm9iamVjdEtleXMoYS5hdHRyaWJ1dGVzKS5qb2luKFwifFwiKS5pbmRleE9mKFwiZGF0YS1ja2UtXCIpKWlmKHI9dShwLGEsZSxmKSxyJjEpZz0hMDtlbHNlIGlmKHImMilyZXR1cm4hMX1lbHNlIGlmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9DT01NRU5UJiZhLnZhbHVlLm1hdGNoKC9eXFx7Y2tlX3Byb3RlY3RlZFxcfSg/IVxce0NcXH0pLykpe3ZhciBjO2E6e3ZhciBkPWRlY29kZVVSSUNvbXBvbmVudChhLnZhbHVlLnJlcGxhY2UoL15cXHtja2VfcHJvdGVjdGVkXFx9LyxcIlwiKSk7Yz1bXTt2YXIgaCxxLHo7aWYobSlmb3IocT0wO3E8bS5sZW5ndGg7KytxKWlmKCh6PWQubWF0Y2gobVtxXSkpJiZ6WzBdLmxlbmd0aD09ZC5sZW5ndGgpe2M9ITA7XG5icmVhayBhfWQ9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChkKTsxPT1kLmNoaWxkcmVuLmxlbmd0aCYmKGg9ZC5jaGlsZHJlblswXSkudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZ1KHAsaCxjLGYpO2M9IWMubGVuZ3RofWN8fGUucHVzaChhKX19LG51bGwsITApO2UubGVuZ3RoJiYoZz0hMCk7dmFyIHE7YT1bXTtkPU1bZHx8KHRoaXMuZWRpdG9yP3RoaXMuZWRpdG9yLmVudGVyTW9kZTpDS0VESVRPUi5FTlRFUl9QKV07Zm9yKHZhciB6O2M9ZS5wb3AoKTspYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/aChjLGQsYSk6Yy5yZW1vdmUoKTtmb3IoO3E9YS5wb3AoKTspaWYoYz1xLmVsLGMucGFyZW50KXN3aXRjaCh6PUhbYy5wYXJlbnQubmFtZV18fEguc3BhbixxLmNoZWNrKXtjYXNlIFwiaXRcIjpILiRyZW1vdmVFbXB0eVtjLm5hbWVdJiYhYy5jaGlsZHJlbi5sZW5ndGg/aChjLGQsYSk6eShjKXx8aChjLGQsYSk7YnJlYWs7Y2FzZSBcImVsLXVwXCI6Yy5wYXJlbnQudHlwZT09XG5DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UfHx6W2MubmFtZV18fGgoYyxkLGEpO2JyZWFrO2Nhc2UgXCJwYXJlbnQtZG93blwiOmMucGFyZW50LnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlR8fHpbYy5uYW1lXXx8aChjLnBhcmVudCxkLGEpfXJldHVybiBnfSxjaGVja0ZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXNhYmxlZHx8IWEpcmV0dXJuITA7YS50b0ZlYXR1cmUmJihhPWEudG9GZWF0dXJlKHRoaXMuZWRpdG9yKSk7cmV0dXJuIWEucmVxdWlyZWRDb250ZW50fHx0aGlzLmNoZWNrKGEucmVxdWlyZWRDb250ZW50KX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITB9LGRpc2FsbG93OmZ1bmN0aW9uKGIpe2lmKCFnKHRoaXMsYiwhMCkpcmV0dXJuITE7XCJzdHJpbmdcIj09dHlwZW9mIGImJihiPWYoYikpO2EodGhpcyxiLG51bGwsdGhpcy5kaXNhbGxvd2VkQ29udGVudCx0aGlzLl8uZGlzYWxsb3dlZFJ1bGVzKTtyZXR1cm4hMH0sXG5hZGRDb250ZW50Rm9ybXM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZGlzYWJsZWQmJmEpe3ZhciBiLGMsZD1bXSxoO2ZvcihiPTA7YjxhLmxlbmd0aCYmIWg7KytiKWM9YVtiXSwoXCJzdHJpbmdcIj09dHlwZW9mIGN8fGMgaW5zdGFuY2VvZiBDS0VESVRPUi5zdHlsZSkmJnRoaXMuY2hlY2soYykmJihoPWMpO2lmKGgpe2ZvcihiPTA7YjxhLmxlbmd0aDsrK2IpZC5wdXNoKEMoYVtiXSxoKSk7dGhpcy5hZGRUcmFuc2Zvcm1hdGlvbnMoZCl9fX0sYWRkRWxlbWVudENhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudENhbGxiYWNrc3x8KHRoaXMuZWxlbWVudENhbGxiYWNrcz1bXSk7dGhpcy5lbGVtZW50Q2FsbGJhY2tzLnB1c2goYSl9LGFkZEZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXNhYmxlZHx8IWEpcmV0dXJuITA7YS50b0ZlYXR1cmUmJihhPWEudG9GZWF0dXJlKHRoaXMuZWRpdG9yKSk7dGhpcy5hbGxvdyhhLmFsbG93ZWRDb250ZW50LGEubmFtZSk7dGhpcy5hZGRUcmFuc2Zvcm1hdGlvbnMoYS5jb250ZW50VHJhbnNmb3JtYXRpb25zKTtcbnRoaXMuYWRkQ29udGVudEZvcm1zKGEuY29udGVudEZvcm1zKTtyZXR1cm4gYS5yZXF1aXJlZENvbnRlbnQmJih0aGlzLmN1c3RvbUNvbmZpZ3x8dGhpcy5kaXNhbGxvd2VkQ29udGVudC5sZW5ndGgpP3RoaXMuY2hlY2soYS5yZXF1aXJlZENvbnRlbnQpOiEwfSxhZGRUcmFuc2Zvcm1hdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighdGhpcy5kaXNhYmxlZCYmYSl7dmFyIGQ9dGhpcy5fLnRyYW5zZm9ybWF0aW9ucyxoO2ZvcihoPTA7aDxhLmxlbmd0aDsrK2gpe2I9YVtoXTt2YXIgcD12b2lkIDAsZT12b2lkIDAsbT12b2lkIDAsZz12b2lkIDAscT12b2lkIDAsZj12b2lkIDA7Yz1bXTtmb3IoZT0wO2U8Yi5sZW5ndGg7KytlKW09YltlXSxcInN0cmluZ1wiPT10eXBlb2YgbT8obT1tLnNwbGl0KC9cXHMqOlxccyovKSxnPW1bMF0scT1udWxsLGY9bVsxXSk6KGc9bS5jaGVjayxxPW0ubGVmdCxmPW0ucmlnaHQpLHB8fChwPW0scD1wLmVsZW1lbnQ/cC5lbGVtZW50Omc/Zy5tYXRjaCgvXihbYS16MC05XSspL2kpWzBdOlxucC5sZWZ0LmdldERlZmluaXRpb24oKS5lbGVtZW50KSxxIGluc3RhbmNlb2YgQ0tFRElUT1Iuc3R5bGUmJihxPXIocSkpLGMucHVzaCh7Y2hlY2s6Zz09cD9udWxsOmcsbGVmdDpxLHJpZ2h0Olwic3RyaW5nXCI9PXR5cGVvZiBmP0coZik6Zn0pO2I9cDtkW2JdfHwoZFtiXT1bXSk7ZFtiXS5wdXNoKGMpfX19LGNoZWNrOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmRpc2FibGVkKXJldHVybiEwO2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aDtkLS07KWlmKHRoaXMuY2hlY2soYVtkXSxiLGMpKXJldHVybiEwO3JldHVybiExfXZhciBoLGU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2U9YStcIlxceDNjXCIrKCExPT09Yj9cIjBcIjpcIjFcIikrKGM/XCIxXCI6XCIwXCIpK1wiXFx4M2VcIjtpZihlIGluIHRoaXMuXy5jYWNoZWRDaGVja3MpcmV0dXJuIHRoaXMuXy5jYWNoZWRDaGVja3NbZV07ZD1mKGEpLiQxO2g9ZC5zdHlsZXM7dmFyIG09ZC5jbGFzc2VzO2QubmFtZT1kLmVsZW1lbnRzO1xuZC5jbGFzc2VzPW09bT9tLnNwbGl0KC9cXHMqLFxccyovKTpbXTtkLnN0eWxlcz13KGgpO2QuYXR0cmlidXRlcz13KGQuYXR0cmlidXRlcyk7ZC5jaGlsZHJlbj1bXTttLmxlbmd0aCYmKGQuYXR0cmlidXRlc1tcImNsYXNzXCJdPW0uam9pbihcIiBcIikpO2gmJihkLmF0dHJpYnV0ZXMuc3R5bGU9Q0tFRElUT1IudG9vbHMud3JpdGVDc3NUZXh0KGQuc3R5bGVzKSk7aD1kfWVsc2UgZD1hLmdldERlZmluaXRpb24oKSxoPWQuc3R5bGVzLG09ZC5hdHRyaWJ1dGVzfHx7fSxoPyhoPUsoaCksbS5zdHlsZT1DS0VESVRPUi50b29scy53cml0ZUNzc1RleHQoaCwhMCkpOmg9e30saD17bmFtZTpkLmVsZW1lbnQsYXR0cmlidXRlczptLGNsYXNzZXM6bVtcImNsYXNzXCJdP21bXCJjbGFzc1wiXS5zcGxpdCgvXFxzKy8pOltdLHN0eWxlczpoLGNoaWxkcmVuOltdfTt2YXIgbT1DS0VESVRPUi50b29scy5jbG9uZShoKSxyPVtdLGc7aWYoITEhPT1iJiYoZz10aGlzLl8udHJhbnNmb3JtYXRpb25zW2gubmFtZV0pKXtmb3IoZD1cbjA7ZDxnLmxlbmd0aDsrK2QpcCh0aGlzLGgsZ1tkXSk7cShoKX11KHRoaXMsbSxyLHtkb0ZpbHRlcjohMCxkb1RyYW5zZm9ybTohMSE9PWIsc2tpcFJlcXVpcmVkOiFjLHNraXBGaW5hbFZhbGlkYXRpb246IWN9KTtiPTA8ci5sZW5ndGg/ITE6Q0tFRElUT1IudG9vbHMub2JqZWN0Q29tcGFyZShoLmF0dHJpYnV0ZXMsbS5hdHRyaWJ1dGVzLCEwKT8hMDohMTtcInN0cmluZ1wiPT10eXBlb2YgYSYmKHRoaXMuXy5jYWNoZWRDaGVja3NbZV09Yik7cmV0dXJuIGJ9LGdldEFsbG93ZWRFbnRlck1vZGU6ZnVuY3Rpb24oKXt2YXIgYT1bXCJwXCIsXCJkaXZcIixcImJyXCJdLGI9e3A6Q0tFRElUT1IuRU5URVJfUCxkaXY6Q0tFRElUT1IuRU5URVJfRElWLGJyOkNLRURJVE9SLkVOVEVSX0JSfTtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgaD1hLnNsaWNlKCkscDtpZih0aGlzLmNoZWNrKE1bY10pKXJldHVybiBjO2ZvcihkfHwoaD1oLnJldmVyc2UoKSk7cD1oLnBvcCgpOylpZih0aGlzLmNoZWNrKHApKXJldHVybiBiW3BdO1xucmV0dXJuIENLRURJVE9SLkVOVEVSX0JSfX0oKSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIENLRURJVE9SLmZpbHRlci5pbnN0YW5jZXNbdGhpcy5pZF07ZGVsZXRlIHRoaXMuXztkZWxldGUgdGhpcy5hbGxvd2VkQ29udGVudDtkZWxldGUgdGhpcy5kaXNhbGxvd2VkQ29udGVudH19O3ZhciBRPXtzdHlsZXM6MSxhdHRyaWJ1dGVzOjEsY2xhc3NlczoxfSx2PXtzdHlsZXM6XCJyZXF1aXJlZFN0eWxlc1wiLGF0dHJpYnV0ZXM6XCJyZXF1aXJlZEF0dHJpYnV0ZXNcIixjbGFzc2VzOlwicmVxdWlyZWRDbGFzc2VzXCJ9LEQ9L14oW2EtejAtOVxcLSpcXHNdKykoKD86XFxzKlxce1shXFx3XFwtLFxcc1xcKl0rXFx9XFxzKnxcXHMqXFxbWyFcXHdcXC0sXFxzXFwqXStcXF1cXHMqfFxccypcXChbIVxcd1xcLSxcXHNcXCpdK1xcKVxccyopezAsM30pKD86O1xccyp8JCkvaSxJPXtzdHlsZXM6L3soW159XSspfS8sYXR0cnM6L1xcWyhbXlxcXV0rKVxcXS8sY2xhc3NlczovXFwoKFteXFwpXSspXFwpL30sRT0vXmNrZToob2JqZWN0fGVtYmVkfHBhcmFtKSQvLFxuTD0vXihvYmplY3R8ZW1iZWR8cGFyYW0pJC8sSj1DS0VESVRPUi5maWx0ZXIudHJhbnNmb3JtYXRpb25zVG9vbHM9e3NpemVUb1N0eWxlOmZ1bmN0aW9uKGEpe3RoaXMubGVuZ3RoVG9TdHlsZShhLFwid2lkdGhcIik7dGhpcy5sZW5ndGhUb1N0eWxlKGEsXCJoZWlnaHRcIil9LHNpemVUb0F0dHJpYnV0ZTpmdW5jdGlvbihhKXt0aGlzLmxlbmd0aFRvQXR0cmlidXRlKGEsXCJ3aWR0aFwiKTt0aGlzLmxlbmd0aFRvQXR0cmlidXRlKGEsXCJoZWlnaHRcIil9LGxlbmd0aFRvU3R5bGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YjtpZighKGMgaW4gYS5zdHlsZXMpKXt2YXIgZD1hLmF0dHJpYnV0ZXNbYl07ZCYmKC9eXFxkKyQvLnRlc3QoZCkmJihkKz1cInB4XCIpLGEuc3R5bGVzW2NdPWQpfWRlbGV0ZSBhLmF0dHJpYnV0ZXNbYl19LGxlbmd0aFRvQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXtjPWN8fGI7aWYoIShjIGluIGEuYXR0cmlidXRlcykpe3ZhciBkPWEuc3R5bGVzW2JdLGg9ZCYmZC5tYXRjaCgvXihcXGQrKSg/OlxcLlxcZCopP3B4JC8pO1xuaD9hLmF0dHJpYnV0ZXNbY109aFsxXTpcImNrZS10ZXN0XCI9PWQmJihhLmF0dHJpYnV0ZXNbY109XCJja2UtdGVzdFwiKX1kZWxldGUgYS5zdHlsZXNbYl19LGFsaWdubWVudFRvU3R5bGU6ZnVuY3Rpb24oYSl7aWYoIShcImZsb2F0XCJpbiBhLnN0eWxlcykpe3ZhciBiPWEuYXR0cmlidXRlcy5hbGlnbjtpZihcImxlZnRcIj09Ynx8XCJyaWdodFwiPT1iKWEuc3R5bGVzW1wiZmxvYXRcIl09Yn1kZWxldGUgYS5hdHRyaWJ1dGVzLmFsaWdufSxhbGlnbm1lbnRUb0F0dHJpYnV0ZTpmdW5jdGlvbihhKXtpZighKFwiYWxpZ25cImluIGEuYXR0cmlidXRlcykpe3ZhciBiPWEuc3R5bGVzW1wiZmxvYXRcIl07aWYoXCJsZWZ0XCI9PWJ8fFwicmlnaHRcIj09YilhLmF0dHJpYnV0ZXMuYWxpZ249Yn1kZWxldGUgYS5zdHlsZXNbXCJmbG9hdFwiXX0sbWF0Y2hlc1N0eWxlOm0sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpYS5uYW1lPWI7ZWxzZXt2YXIgYz1iLmdldERlZmluaXRpb24oKSxkPWMuc3R5bGVzLFxuaD1jLmF0dHJpYnV0ZXMscCxtLGUscjthLm5hbWU9Yy5lbGVtZW50O2ZvcihwIGluIGgpaWYoXCJjbGFzc1wiPT1wKWZvcihjPWEuY2xhc3Nlcy5qb2luKFwifFwiKSxlPWhbcF0uc3BsaXQoL1xccysvKTtyPWUucG9wKCk7KS0xPT1jLmluZGV4T2YocikmJmEuY2xhc3Nlcy5wdXNoKHIpO2Vsc2UgYS5hdHRyaWJ1dGVzW3BdPWhbcF07Zm9yKG0gaW4gZClhLnN0eWxlc1ttXT1kW21dfX19fSkoKTtcbihmdW5jdGlvbigpe0NLRURJVE9SLmZvY3VzTWFuYWdlcj1mdW5jdGlvbihhKXtpZihhLmZvY3VzTWFuYWdlcilyZXR1cm4gYS5mb2N1c01hbmFnZXI7dGhpcy5oYXNGb2N1cz0hMTt0aGlzLmN1cnJlbnRBY3RpdmU9bnVsbDt0aGlzLl89e2VkaXRvcjphfTtyZXR1cm4gdGhpc307Q0tFRElUT1IuZm9jdXNNYW5hZ2VyLl89e2JsdXJEZWxheToyMDB9O0NLRURJVE9SLmZvY3VzTWFuYWdlci5wcm90b3R5cGU9e2ZvY3VzOmZ1bmN0aW9uKGEpe3RoaXMuXy50aW1lciYmY2xlYXJUaW1lb3V0KHRoaXMuXy50aW1lcik7YSYmKHRoaXMuY3VycmVudEFjdGl2ZT1hKTt0aGlzLmhhc0ZvY3VzfHx0aGlzLl8ubG9ja2VkfHwoKGE9Q0tFRElUT1IuY3VycmVudEluc3RhbmNlKSYmYS5mb2N1c01hbmFnZXIuYmx1cigxKSx0aGlzLmhhc0ZvY3VzPSEwLChhPXRoaXMuXy5lZGl0b3IuY29udGFpbmVyKSYmYS5hZGRDbGFzcyhcImNrZV9mb2N1c1wiKSx0aGlzLl8uZWRpdG9yLmZpcmUoXCJmb2N1c1wiKSl9LGxvY2s6ZnVuY3Rpb24oKXt0aGlzLl8ubG9ja2VkPVxuMX0sdW5sb2NrOmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuXy5sb2NrZWR9LGJsdXI6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe2lmKHRoaXMuaGFzRm9jdXMpe3RoaXMuaGFzRm9jdXM9ITE7dmFyIGE9dGhpcy5fLmVkaXRvci5jb250YWluZXI7YSYmYS5yZW1vdmVDbGFzcyhcImNrZV9mb2N1c1wiKTt0aGlzLl8uZWRpdG9yLmZpcmUoXCJibHVyXCIpfX1pZighdGhpcy5fLmxvY2tlZCl7dGhpcy5fLnRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy5fLnRpbWVyKTt2YXIgYj1DS0VESVRPUi5mb2N1c01hbmFnZXIuXy5ibHVyRGVsYXk7YXx8IWI/ZC5jYWxsKHRoaXMpOnRoaXMuXy50aW1lcj1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuXy50aW1lcjtkLmNhbGwodGhpcyl9LGIsdGhpcyl9fSxhZGQ6ZnVuY3Rpb24oYSxkKXt2YXIgYj1hLmdldEN1c3RvbURhdGEoXCJmb2N1c21hbmFnZXJcIik7aWYoIWJ8fGIhPXRoaXMpe2ImJmIucmVtb3ZlKGEpO3ZhciBiPVxuXCJmb2N1c1wiLGM9XCJibHVyXCI7ZCYmKENLRURJVE9SLmVudi5pZT8oYj1cImZvY3VzaW5cIixjPVwiZm9jdXNvdXRcIik6Q0tFRElUT1IuZXZlbnQudXNlQ2FwdHVyZT0xKTt2YXIgZT17Ymx1cjpmdW5jdGlvbigpe2EuZXF1YWxzKHRoaXMuY3VycmVudEFjdGl2ZSkmJnRoaXMuYmx1cigpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZm9jdXMoYSl9fTthLm9uKGIsZS5mb2N1cyx0aGlzKTthLm9uKGMsZS5ibHVyLHRoaXMpO2QmJihDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPTApO2Euc2V0Q3VzdG9tRGF0YShcImZvY3VzbWFuYWdlclwiLHRoaXMpO2Euc2V0Q3VzdG9tRGF0YShcImZvY3VzbWFuYWdlcl9oYW5kbGVyc1wiLGUpfX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2EucmVtb3ZlQ3VzdG9tRGF0YShcImZvY3VzbWFuYWdlclwiKTt2YXIgZD1hLnJlbW92ZUN1c3RvbURhdGEoXCJmb2N1c21hbmFnZXJfaGFuZGxlcnNcIik7YS5yZW1vdmVMaXN0ZW5lcihcImJsdXJcIixkLmJsdXIpO2EucmVtb3ZlTGlzdGVuZXIoXCJmb2N1c1wiLFxuZC5mb2N1cyl9fX0pKCk7Q0tFRElUT1Iua2V5c3Ryb2tlSGFuZGxlcj1mdW5jdGlvbihhKXtpZihhLmtleXN0cm9rZUhhbmRsZXIpcmV0dXJuIGEua2V5c3Ryb2tlSGFuZGxlcjt0aGlzLmtleXN0cm9rZXM9e307dGhpcy5ibG9ja2VkS2V5c3Ryb2tlcz17fTt0aGlzLl89e2VkaXRvcjphfTtyZXR1cm4gdGhpc307XG4oZnVuY3Rpb24oKXt2YXIgYSxkPWZ1bmN0aW9uKGIpe2I9Yi5kYXRhO3ZhciBkPWIuZ2V0S2V5c3Ryb2tlKCksZz10aGlzLmtleXN0cm9rZXNbZF0sbD10aGlzLl8uZWRpdG9yO2E9ITE9PT1sLmZpcmUoXCJrZXlcIix7a2V5Q29kZTpkLGRvbUV2ZW50OmJ9KTthfHwoZyYmKGE9ITEhPT1sLmV4ZWNDb21tYW5kKGcse2Zyb206XCJrZXlzdHJva2VIYW5kbGVyXCJ9KSksYXx8KGE9ISF0aGlzLmJsb2NrZWRLZXlzdHJva2VzW2RdKSk7YSYmYi5wcmV2ZW50RGVmYXVsdCghMCk7cmV0dXJuIWF9LGI9ZnVuY3Rpb24oYil7YSYmKGE9ITEsYi5kYXRhLnByZXZlbnREZWZhdWx0KCEwKSl9O0NLRURJVE9SLmtleXN0cm9rZUhhbmRsZXIucHJvdG90eXBlPXthdHRhY2g6ZnVuY3Rpb24oYSl7YS5vbihcImtleWRvd25cIixkLHRoaXMpO2lmKENLRURJVE9SLmVudi5nZWNrbyYmQ0tFRElUT1IuZW52Lm1hYylhLm9uKFwia2V5cHJlc3NcIixiLHRoaXMpfX19KSgpO1xuKGZ1bmN0aW9uKCl7Q0tFRElUT1IubGFuZz17bGFuZ3VhZ2VzOnthZjoxLGFyOjEsYmc6MSxibjoxLGJzOjEsY2E6MSxjczoxLGN5OjEsZGE6MSxkZToxLFwiZGUtY2hcIjoxLGVsOjEsXCJlbi1hdVwiOjEsXCJlbi1jYVwiOjEsXCJlbi1nYlwiOjEsZW46MSxlbzoxLGVzOjEsZXQ6MSxldToxLGZhOjEsZmk6MSxmbzoxLFwiZnItY2FcIjoxLGZyOjEsZ2w6MSxndToxLGhlOjEsaGk6MSxocjoxLGh1OjEsaWQ6MSxpczoxLGl0OjEsamE6MSxrYToxLGttOjEsa286MSxrdToxLGx0OjEsbHY6MSxtazoxLG1uOjEsbXM6MSxuYjoxLG5sOjEsbm86MSxwbDoxLFwicHQtYnJcIjoxLHB0OjEscm86MSxydToxLHNpOjEsc2s6MSxzbDoxLHNxOjEsXCJzci1sYXRuXCI6MSxzcjoxLHN2OjEsdGg6MSx0cjoxLHR0OjEsdWc6MSx1azoxLHZpOjEsXCJ6aC1jblwiOjEsemg6MX0scnRsOnthcjoxLGZhOjEsaGU6MSxrdToxLHVnOjF9LGxvYWQ6ZnVuY3Rpb24oYSxkLGIpe2EmJkNLRURJVE9SLmxhbmcubGFuZ3VhZ2VzW2FdfHwoYT1cbnRoaXMuZGV0ZWN0KGQsYSkpO3ZhciBjPXRoaXM7ZD1mdW5jdGlvbigpe2NbYV0uZGlyPWMucnRsW2FdP1wicnRsXCI6XCJsdHJcIjtiKGEsY1thXSl9O3RoaXNbYV0/ZCgpOkNLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKENLRURJVE9SLmdldFVybChcImxhbmcvXCIrYStcIi5qc1wiKSxkLHRoaXMpfSxkZXRlY3Q6ZnVuY3Rpb24oYSxkKXt2YXIgYj10aGlzLmxhbmd1YWdlcztkPWR8fG5hdmlnYXRvci51c2VyTGFuZ3VhZ2V8fG5hdmlnYXRvci5sYW5ndWFnZXx8YTt2YXIgYz1kLnRvTG93ZXJDYXNlKCkubWF0Y2goLyhbYS16XSspKD86LShbYS16XSspKT8vKSxlPWNbMV0sYz1jWzJdO2JbZStcIi1cIitjXT9lPWUrXCItXCIrYzpiW2VdfHwoZT1udWxsKTtDS0VESVRPUi5sYW5nLmRldGVjdD1lP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OmZ1bmN0aW9uKGEpe3JldHVybiBhfTtyZXR1cm4gZXx8YX19fSkoKTtcbkNLRURJVE9SLnNjcmlwdExvYWRlcj1mdW5jdGlvbigpe3ZhciBhPXt9LGQ9e307cmV0dXJue2xvYWQ6ZnVuY3Rpb24oYixjLGUsZyl7dmFyIGw9XCJzdHJpbmdcIj09dHlwZW9mIGI7bCYmKGI9W2JdKTtlfHwoZT1DS0VESVRPUik7dmFyIGs9Yi5sZW5ndGgsbj1bXSx3PVtdLGY9ZnVuY3Rpb24oYSl7YyYmKGw/Yy5jYWxsKGUsYSk6Yy5jYWxsKGUsbix3KSl9O2lmKDA9PT1rKWYoITApO2Vsc2V7dmFyIHg9ZnVuY3Rpb24oYSxiKXsoYj9uOncpLnB1c2goYSk7MD49LS1rJiYoZyYmQ0tFRElUT1IuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCkucmVtb3ZlU3R5bGUoXCJjdXJzb3JcIiksZihiKSl9LEE9ZnVuY3Rpb24oYixjKXthW2JdPTE7dmFyIGU9ZFtiXTtkZWxldGUgZFtiXTtmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKyllW2ddKGIsYyl9LHU9ZnVuY3Rpb24oYil7aWYoYVtiXSl4KGIsITApO2Vsc2V7dmFyIGU9ZFtiXXx8KGRbYl09W10pO2UucHVzaCh4KTtpZighKDE8ZS5sZW5ndGgpKXt2YXIgZz1cbm5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNjcmlwdFwiKTtnLnNldEF0dHJpYnV0ZXMoe3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIixzcmM6Yn0pO2MmJihDS0VESVRPUi5lbnYuaWUmJjExPkNLRURJVE9SLmVudi52ZXJzaW9uP2cuJC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihcImxvYWRlZFwiPT1nLiQucmVhZHlTdGF0ZXx8XCJjb21wbGV0ZVwiPT1nLiQucmVhZHlTdGF0ZSlnLiQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsQShiLCEwKX06KGcuJC5vbmxvYWQ9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7QShiLCEwKX0sMCl9LGcuJC5vbmVycm9yPWZ1bmN0aW9uKCl7QShiLCExKX0pKTtnLmFwcGVuZFRvKENLRURJVE9SLmRvY3VtZW50LmdldEhlYWQoKSl9fX07ZyYmQ0tFRElUT1IuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCkuc2V0U3R5bGUoXCJjdXJzb3JcIixcIndhaXRcIik7Zm9yKHZhciBCPTA7QjxrO0IrKyl1KGJbQl0pfX0scXVldWU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGI7XG4oYj1jWzBdKSYmdGhpcy5sb2FkKGIuc2NyaXB0VXJsLGIuY2FsbGJhY2ssQ0tFRElUT1IsMCl9dmFyIGM9W107cmV0dXJuIGZ1bmN0aW9uKGQsZyl7dmFyIGw9dGhpcztjLnB1c2goe3NjcmlwdFVybDpkLGNhbGxiYWNrOmZ1bmN0aW9uKCl7ZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yy5zaGlmdCgpO2EuY2FsbChsKX19KTsxPT1jLmxlbmd0aCYmYS5jYWxsKHRoaXMpfX0oKX19KCk7Q0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyPWZ1bmN0aW9uKGEsZCl7dGhpcy5iYXNlUGF0aD1hO3RoaXMuZmlsZU5hbWU9ZDt0aGlzLnJlZ2lzdGVyZWQ9e307dGhpcy5sb2FkZWQ9e307dGhpcy5leHRlcm5hbHM9e307dGhpcy5fPXt3YWl0aW5nTGlzdDp7fX19O1xuQ0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyLnByb3RvdHlwZT17YWRkOmZ1bmN0aW9uKGEsZCl7aWYodGhpcy5yZWdpc3RlcmVkW2FdKXRocm93IEVycm9yKCdbQ0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyLmFkZF0gVGhlIHJlc291cmNlIG5hbWUgXCInK2ErJ1wiIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4nKTt2YXIgYj10aGlzLnJlZ2lzdGVyZWRbYV09ZHx8e307Yi5uYW1lPWE7Yi5wYXRoPXRoaXMuZ2V0UGF0aChhKTtDS0VESVRPUi5maXJlKGErQ0tFRElUT1IudG9vbHMuY2FwaXRhbGl6ZSh0aGlzLmZpbGVOYW1lKStcIlJlYWR5XCIsYik7cmV0dXJuIHRoaXMuZ2V0KGEpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVnaXN0ZXJlZFthXXx8bnVsbH0sZ2V0UGF0aDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmV4dGVybmFsc1thXTtyZXR1cm4gQ0tFRElUT1IuZ2V0VXJsKGQmJmQuZGlyfHx0aGlzLmJhc2VQYXRoK2ErXCIvXCIpfSxnZXRGaWxlUGF0aDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmV4dGVybmFsc1thXTtcbnJldHVybiBDS0VESVRPUi5nZXRVcmwodGhpcy5nZXRQYXRoKGEpKyhkP2QuZmlsZTp0aGlzLmZpbGVOYW1lK1wiLmpzXCIpKX0sYWRkRXh0ZXJuYWw6ZnVuY3Rpb24oYSxkLGIpe2E9YS5zcGxpdChcIixcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBlPWFbY107Ynx8KGQ9ZC5yZXBsYWNlKC9bXlxcL10rJC8sZnVuY3Rpb24oYSl7Yj1hO3JldHVyblwiXCJ9KSk7dGhpcy5leHRlcm5hbHNbZV09e2RpcjpkLGZpbGU6Ynx8dGhpcy5maWxlTmFtZStcIi5qc1wifX19LGxvYWQ6ZnVuY3Rpb24oYSxkLGIpe0NLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSl8fChhPWE/W2FdOltdKTtmb3IodmFyIGM9dGhpcy5sb2FkZWQsZT10aGlzLnJlZ2lzdGVyZWQsZz1bXSxsPXt9LGs9e30sbj0wO248YS5sZW5ndGg7bisrKXt2YXIgdz1hW25dO2lmKHcpaWYoY1t3XXx8ZVt3XSlrW3ddPXRoaXMuZ2V0KHcpO2Vsc2V7dmFyIGY9dGhpcy5nZXRGaWxlUGF0aCh3KTtnLnB1c2goZik7ZiBpbiBsfHwobFtmXT1cbltdKTtsW2ZdLnB1c2godyl9fUNLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKGcsZnVuY3Rpb24oYSxlKXtpZihlLmxlbmd0aCl0aHJvdyBFcnJvcignW0NLRURJVE9SLnJlc291cmNlTWFuYWdlci5sb2FkXSBSZXNvdXJjZSBuYW1lIFwiJytsW2VbMF1dLmpvaW4oXCIsXCIpKydcIiB3YXMgbm90IGZvdW5kIGF0IFwiJytlWzBdKydcIi4nKTtmb3IodmFyIGc9MDtnPGEubGVuZ3RoO2crKylmb3IodmFyIGY9bFthW2ddXSxxPTA7cTxmLmxlbmd0aDtxKyspe3ZhciB5PWZbcV07a1t5XT10aGlzLmdldCh5KTtjW3ldPTF9ZC5jYWxsKGIsayl9LHRoaXMpfX07Q0tFRElUT1IucGx1Z2lucz1uZXcgQ0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyKFwicGx1Z2lucy9cIixcInBsdWdpblwiKTtcbkNLRURJVE9SLnBsdWdpbnMubG9hZD1DS0VESVRPUi50b29scy5vdmVycmlkZShDS0VESVRPUi5wbHVnaW5zLmxvYWQsZnVuY3Rpb24oYSl7dmFyIGQ9e307cmV0dXJuIGZ1bmN0aW9uKGIsYyxlKXt2YXIgZz17fSxsPWZ1bmN0aW9uKGIpe2EuY2FsbCh0aGlzLGIsZnVuY3Rpb24oYSl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGcsYSk7dmFyIGI9W10sZjtmb3IoZiBpbiBhKXt2YXIgaz1hW2ZdLEE9ayYmay5yZXF1aXJlcztpZighZFtmXSl7aWYoay5pY29ucylmb3IodmFyIHU9ay5pY29ucy5zcGxpdChcIixcIiksQj11Lmxlbmd0aDtCLS07KUNLRURJVE9SLnNraW4uYWRkSWNvbih1W0JdLGsucGF0aCtcImljb25zL1wiKyhDS0VESVRPUi5lbnYuaGlkcGkmJmsuaGlkcGk/XCJoaWRwaS9cIjpcIlwiKSt1W0JdK1wiLnBuZ1wiKTtkW2ZdPTF9aWYoQSlmb3IoQS5zcGxpdCYmKEE9QS5zcGxpdChcIixcIikpLGs9MDtrPEEubGVuZ3RoO2srKylnW0Fba11dfHxiLnB1c2goQVtrXSl9aWYoYi5sZW5ndGgpbC5jYWxsKHRoaXMsXG5iKTtlbHNle2ZvcihmIGluIGcpaz1nW2ZdLGsub25Mb2FkJiYhay5vbkxvYWQuX2NhbGxlZCYmKCExPT09ay5vbkxvYWQoKSYmZGVsZXRlIGdbZl0say5vbkxvYWQuX2NhbGxlZD0xKTtjJiZjLmNhbGwoZXx8d2luZG93LGcpfX0sdGhpcyl9O2wuY2FsbCh0aGlzLGIpfX0pO0NLRURJVE9SLnBsdWdpbnMuc2V0TGFuZz1mdW5jdGlvbihhLGQsYil7dmFyIGM9dGhpcy5nZXQoYSk7YT1jLmxhbmdFbnRyaWVzfHwoYy5sYW5nRW50cmllcz17fSk7Yz1jLmxhbmd8fChjLmxhbmc9W10pO2Muc3BsaXQmJihjPWMuc3BsaXQoXCIsXCIpKTstMT09Q0tFRElUT1IudG9vbHMuaW5kZXhPZihjLGQpJiZjLnB1c2goZCk7YVtkXT1ifTtDS0VESVRPUi51aT1mdW5jdGlvbihhKXtpZihhLnVpKXJldHVybiBhLnVpO3RoaXMuaXRlbXM9e307dGhpcy5pbnN0YW5jZXM9e307dGhpcy5lZGl0b3I9YTt0aGlzLl89e2hhbmRsZXJzOnt9fTtyZXR1cm4gdGhpc307XG5DS0VESVRPUi51aS5wcm90b3R5cGU9e2FkZDpmdW5jdGlvbihhLGQsYil7Yi5uYW1lPWEudG9Mb3dlckNhc2UoKTt2YXIgYz10aGlzLml0ZW1zW2FdPXt0eXBlOmQsY29tbWFuZDpiLmNvbW1hbmR8fG51bGwsYXJnczpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMil9O0NLRURJVE9SLnRvb2xzLmV4dGVuZChjLGIpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW5zdGFuY2VzW2FdfSxjcmVhdGU6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5pdGVtc1thXSxiPWQmJnRoaXMuXy5oYW5kbGVyc1tkLnR5cGVdLGM9ZCYmZC5jb21tYW5kJiZ0aGlzLmVkaXRvci5nZXRDb21tYW5kKGQuY29tbWFuZCksYj1iJiZiLmNyZWF0ZS5hcHBseSh0aGlzLGQuYXJncyk7dGhpcy5pbnN0YW5jZXNbYV09YjtjJiZjLnVpSXRlbXMucHVzaChiKTtiJiYhYi50eXBlJiYoYi50eXBlPWQudHlwZSk7cmV0dXJuIGJ9LGFkZEhhbmRsZXI6ZnVuY3Rpb24oYSxkKXt0aGlzLl8uaGFuZGxlcnNbYV09XG5kfSxzcGFjZTpmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLnNwYWNlSWQoYSkpfSxzcGFjZUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVkaXRvci5pZCtcIl9cIithfX07Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IudWkpO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGUsZil7Q0tFRElUT1IuZXZlbnQuY2FsbCh0aGlzKTthPWEmJkNLRURJVE9SLnRvb2xzLmNsb25lKGEpO2lmKHZvaWQgMCE9PWUpe2lmKCEoZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50KSl0aHJvdyBFcnJvcihcIkV4cGVjdCBlbGVtZW50IG9mIHR5cGUgQ0tFRElUT1IuZG9tLmVsZW1lbnQuXCIpO2lmKCFmKXRocm93IEVycm9yKFwiT25lIG9mIHRoZSBlbGVtZW50IG1vZGVzIG11c3QgYmUgc3BlY2lmaWVkLlwiKTtpZihDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MmJmY9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUpdGhyb3cgRXJyb3IoXCJJbmxpbmUgZWxlbWVudCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgb24gSUUgcXVpcmtzLlwiKTtpZighYihlLGYpKXRocm93IEVycm9yKCdUaGUgc3BlY2lmaWVkIGVsZW1lbnQgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIG9uIGVsZW1lbnQ6IFwiJytlLmdldE5hbWUoKSsnXCIuJyk7XG50aGlzLmVsZW1lbnQ9ZTt0aGlzLmVsZW1lbnRNb2RlPWY7dGhpcy5uYW1lPXRoaXMuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUTyYmKGUuZ2V0SWQoKXx8ZS5nZXROYW1lQXR0KCkpfWVsc2UgdGhpcy5lbGVtZW50TW9kZT1DS0VESVRPUi5FTEVNRU5UX01PREVfTk9ORTt0aGlzLl89e307dGhpcy5jb21tYW5kcz17fTt0aGlzLnRlbXBsYXRlcz17fTt0aGlzLm5hbWU9dGhpcy5uYW1lfHxkKCk7dGhpcy5pZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKTt0aGlzLnN0YXR1cz1cInVubG9hZGVkXCI7dGhpcy5jb25maWc9Q0tFRElUT1IudG9vbHMucHJvdG90eXBlZENvcHkoQ0tFRElUT1IuY29uZmlnKTt0aGlzLnVpPW5ldyBDS0VESVRPUi51aSh0aGlzKTt0aGlzLmZvY3VzTWFuYWdlcj1uZXcgQ0tFRElUT1IuZm9jdXNNYW5hZ2VyKHRoaXMpO3RoaXMua2V5c3Ryb2tlSGFuZGxlcj1uZXcgQ0tFRElUT1Iua2V5c3Ryb2tlSGFuZGxlcih0aGlzKTt0aGlzLm9uKFwicmVhZE9ubHlcIixcbmMpO3RoaXMub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihhKXtnKHRoaXMsYS5kYXRhLnBhdGgpfSk7dGhpcy5vbihcImFjdGl2ZUZpbHRlckNoYW5nZVwiLGZ1bmN0aW9uKCl7Zyh0aGlzLHRoaXMuZWxlbWVudFBhdGgoKSwhMCl9KTt0aGlzLm9uKFwibW9kZVwiLGMpO3RoaXMub24oXCJpbnN0YW5jZVJlYWR5XCIsZnVuY3Rpb24oKXt0aGlzLmNvbmZpZy5zdGFydHVwRm9jdXMmJnRoaXMuZm9jdXMoKX0pO0NLRURJVE9SLmZpcmUoXCJpbnN0YW5jZUNyZWF0ZWRcIixudWxsLHRoaXMpO0NLRURJVE9SLmFkZCh0aGlzKTtDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJkZXN0cm95ZWRcIiE9PXRoaXMuc3RhdHVzP2sodGhpcyxhKTpDS0VESVRPUi53YXJuKFwiZWRpdG9yLWluY29ycmVjdC1kZXN0cm95XCIpfSwwLHRoaXMpfWZ1bmN0aW9uIGQoKXtkbyB2YXIgYT1cImVkaXRvclwiKyArK3U7d2hpbGUoQ0tFRElUT1IuaW5zdGFuY2VzW2FdKTtyZXR1cm4gYX1mdW5jdGlvbiBiKGEsXG5iKXtyZXR1cm4gYj09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT9hLmlzKENLRURJVE9SLmR0ZC4kZWRpdGFibGUpfHxhLmlzKFwidGV4dGFyZWFcIik6Yj09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U/IWEuaXMoQ0tFRElUT1IuZHRkLiRub25Cb2R5Q29udGVudCk6MX1mdW5jdGlvbiBjKCl7dmFyIGE9dGhpcy5jb21tYW5kcyxiO2ZvcihiIGluIGEpZSh0aGlzLGFbYl0pfWZ1bmN0aW9uIGUoYSxiKXtiW2Iuc3RhcnREaXNhYmxlZD9cImRpc2FibGVcIjphLnJlYWRPbmx5JiYhYi5yZWFkT25seT9cImRpc2FibGVcIjpiLm1vZGVzW2EubW9kZV0/XCJlbmFibGVcIjpcImRpc2FibGVcIl0oKX1mdW5jdGlvbiBnKGEsYixjKXtpZihiKXt2YXIgZCxlLGg9YS5jb21tYW5kcztmb3IoZSBpbiBoKWQ9aFtlXSwoY3x8ZC5jb250ZXh0U2Vuc2l0aXZlKSYmZC5yZWZyZXNoKGEsYil9fWZ1bmN0aW9uIGwoYSl7dmFyIGI9YS5jb25maWcuY3VzdG9tQ29uZmlnO2lmKCFiKXJldHVybiExO3ZhciBiPVxuQ0tFRElUT1IuZ2V0VXJsKGIpLGM9QltiXXx8KEJbYl09e30pO2MuZm4/KGMuZm4uY2FsbChhLGEuY29uZmlnKSxDS0VESVRPUi5nZXRVcmwoYS5jb25maWcuY3VzdG9tQ29uZmlnKSE9YiYmbChhKXx8YS5maXJlT25jZShcImN1c3RvbUNvbmZpZ0xvYWRlZFwiKSk6Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLnF1ZXVlKGIsZnVuY3Rpb24oKXtjLmZuPUNLRURJVE9SLmVkaXRvckNvbmZpZz9DS0VESVRPUi5lZGl0b3JDb25maWc6ZnVuY3Rpb24oKXt9O2woYSl9KTtyZXR1cm4hMH1mdW5jdGlvbiBrKGEsYil7YS5vbihcImN1c3RvbUNvbmZpZ0xvYWRlZFwiLGZ1bmN0aW9uKCl7aWYoYil7aWYoYi5vbilmb3IodmFyIGMgaW4gYi5vbilhLm9uKGMsYi5vbltjXSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGEuY29uZmlnLGIsITApO2RlbGV0ZSBhLmNvbmZpZy5vbn1jPWEuY29uZmlnO2EucmVhZE9ubHk9Yy5yZWFkT25seT8hMDphLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FP1xuYS5lbGVtZW50LmlzKFwidGV4dGFyZWFcIik/YS5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfHxhLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwicmVhZG9ubHlcIik6YS5lbGVtZW50LmlzUmVhZE9ubHkoKTphLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRT9hLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil8fGEuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTohMTthLmJsb2NrbGVzcz1hLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FPyEoYS5lbGVtZW50LmlzKFwidGV4dGFyZWFcIil8fENLRURJVE9SLmR0ZFthLmVsZW1lbnQuZ2V0TmFtZSgpXS5wKTohMTthLnRhYkluZGV4PWMudGFiSW5kZXh8fGEuZWxlbWVudCYmYS5lbGVtZW50LmdldEF0dHJpYnV0ZShcInRhYmluZGV4XCIpfHwwO2EuYWN0aXZlRW50ZXJNb2RlPWEuZW50ZXJNb2RlPWEuYmxvY2tsZXNzP0NLRURJVE9SLkVOVEVSX0JSOmMuZW50ZXJNb2RlO1xuYS5hY3RpdmVTaGlmdEVudGVyTW9kZT1hLnNoaWZ0RW50ZXJNb2RlPWEuYmxvY2tsZXNzP0NLRURJVE9SLkVOVEVSX0JSOmMuc2hpZnRFbnRlck1vZGU7Yy5za2luJiYoQ0tFRElUT1Iuc2tpbk5hbWU9Yy5za2luKTthLmZpcmVPbmNlKFwiY29uZmlnTG9hZGVkXCIpO2EuZGF0YVByb2Nlc3Nvcj1uZXcgQ0tFRElUT1IuaHRtbERhdGFQcm9jZXNzb3IoYSk7YS5maWx0ZXI9YS5hY3RpdmVGaWx0ZXI9bmV3IENLRURJVE9SLmZpbHRlcihhKTtuKGEpfSk7YiYmbnVsbCE9Yi5jdXN0b21Db25maWcmJihhLmNvbmZpZy5jdXN0b21Db25maWc9Yi5jdXN0b21Db25maWcpO2woYSl8fGEuZmlyZU9uY2UoXCJjdXN0b21Db25maWdMb2FkZWRcIil9ZnVuY3Rpb24gbihhKXtDS0VESVRPUi5za2luLmxvYWRQYXJ0KFwiZWRpdG9yXCIsZnVuY3Rpb24oKXt3KGEpfSl9ZnVuY3Rpb24gdyhhKXtDS0VESVRPUi5sYW5nLmxvYWQoYS5jb25maWcubGFuZ3VhZ2UsYS5jb25maWcuZGVmYXVsdExhbmd1YWdlLGZ1bmN0aW9uKGIsXG5jKXt2YXIgZD1hLmNvbmZpZy50aXRsZTthLmxhbmdDb2RlPWI7YS5sYW5nPUNLRURJVE9SLnRvb2xzLnByb3RvdHlwZWRDb3B5KGMpO2EudGl0bGU9XCJzdHJpbmdcIj09dHlwZW9mIGR8fCExPT09ZD9kOlthLmxhbmcuZWRpdG9yLGEubmFtZV0uam9pbihcIiwgXCIpO2EuY29uZmlnLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbnx8KGEuY29uZmlnLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbj1hLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FP2EuZWxlbWVudC5nZXREaXJlY3Rpb24oMSk6YS5sYW5nLmRpcik7YS5maXJlKFwibGFuZ0xvYWRlZFwiKTtmKGEpfSl9ZnVuY3Rpb24gZihhKXthLmdldFN0eWxlc1NldChmdW5jdGlvbihiKXthLm9uY2UoXCJsb2FkZWRcIixmdW5jdGlvbigpe2EuZmlyZShcInN0eWxlc1NldFwiLHtzdHlsZXM6Yn0pfSxudWxsLG51bGwsMSk7eChhKX0pfWZ1bmN0aW9uIHgoYSl7dmFyIGI9YS5jb25maWcsYz1iLnBsdWdpbnMsZD1iLmV4dHJhUGx1Z2lucyxlPVxuYi5yZW1vdmVQbHVnaW5zO2lmKGQpdmFyIGg9bmV3IFJlZ0V4cChcIig/Ol58LCkoPzpcIitkLnJlcGxhY2UoL1xccyosXFxzKi9nLFwifFwiKStcIikoP1xceDNkLHwkKVwiLFwiZ1wiKSxjPWMucmVwbGFjZShoLFwiXCIpLGM9YysoXCIsXCIrZCk7aWYoZSl2YXIgcD1uZXcgUmVnRXhwKFwiKD86XnwsKSg/OlwiK2UucmVwbGFjZSgvXFxzKixcXHMqL2csXCJ8XCIpK1wiKSg/XFx4M2QsfCQpXCIsXCJnXCIpLGM9Yy5yZXBsYWNlKHAsXCJcIik7Q0tFRElUT1IuZW52LmFpciYmKGMrPVwiLGFkb2JlYWlyXCIpO0NLRURJVE9SLnBsdWdpbnMubG9hZChjLnNwbGl0KFwiLFwiKSxmdW5jdGlvbihjKXt2YXIgZD1bXSxoPVtdLGU9W107YS5wbHVnaW5zPWM7Zm9yKHZhciBnIGluIGMpe3ZhciBmPWNbZ10sej1mLmxhbmcsbD1udWxsLGs9Zi5yZXF1aXJlcyx2O0NLRURJVE9SLnRvb2xzLmlzQXJyYXkoaykmJihrPWsuam9pbihcIixcIikpO2lmKGsmJih2PWsubWF0Y2gocCkpKWZvcig7az12LnBvcCgpOylDS0VESVRPUi5lcnJvcihcImVkaXRvci1wbHVnaW4tcmVxdWlyZWRcIixcbntwbHVnaW46ay5yZXBsYWNlKFwiLFwiLFwiXCIpLHJlcXVpcmVkQnk6Z30pO3omJiFhLmxhbmdbZ10mJih6LnNwbGl0JiYoej16LnNwbGl0KFwiLFwiKSksMDw9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih6LGEubGFuZ0NvZGUpP2w9YS5sYW5nQ29kZToobD1hLmxhbmdDb2RlLnJlcGxhY2UoLy0uKi8sXCJcIiksbD1sIT1hLmxhbmdDb2RlJiYwPD1DS0VESVRPUi50b29scy5pbmRleE9mKHosbCk/bDowPD1DS0VESVRPUi50b29scy5pbmRleE9mKHosXCJlblwiKT9cImVuXCI6elswXSksZi5sYW5nRW50cmllcyYmZi5sYW5nRW50cmllc1tsXT8oYS5sYW5nW2ddPWYubGFuZ0VudHJpZXNbbF0sbD1udWxsKTplLnB1c2goQ0tFRElUT1IuZ2V0VXJsKGYucGF0aCtcImxhbmcvXCIrbCtcIi5qc1wiKSkpO2gucHVzaChsKTtkLnB1c2goZil9Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoZSxmdW5jdGlvbigpe2Zvcih2YXIgYz1bXCJiZWZvcmVJbml0XCIsXCJpbml0XCIsXCJhZnRlckluaXRcIl0sZT0wO2U8Yy5sZW5ndGg7ZSsrKWZvcih2YXIgcD1cbjA7cDxkLmxlbmd0aDtwKyspe3ZhciBtPWRbcF07MD09PWUmJmhbcF0mJm0ubGFuZyYmbS5sYW5nRW50cmllcyYmKGEubGFuZ1ttLm5hbWVdPW0ubGFuZ0VudHJpZXNbaFtwXV0pO2lmKG1bY1tlXV0pbVtjW2VdXShhKX1hLmZpcmVPbmNlKFwicGx1Z2luc0xvYWRlZFwiKTtiLmtleXN0cm9rZXMmJmEuc2V0S2V5c3Ryb2tlKGEuY29uZmlnLmtleXN0cm9rZXMpO2ZvcihwPTA7cDxhLmNvbmZpZy5ibG9ja2VkS2V5c3Ryb2tlcy5sZW5ndGg7cCsrKWEua2V5c3Ryb2tlSGFuZGxlci5ibG9ja2VkS2V5c3Ryb2tlc1thLmNvbmZpZy5ibG9ja2VkS2V5c3Ryb2tlc1twXV09MTthLnN0YXR1cz1cImxvYWRlZFwiO2EuZmlyZU9uY2UoXCJsb2FkZWRcIik7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlTG9hZGVkXCIsbnVsbCxhKX0pfSl9ZnVuY3Rpb24gQSgpe3ZhciBhPXRoaXMuZWxlbWVudDtpZihhJiZ0aGlzLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfQVBQRU5EVE8pe3ZhciBiPXRoaXMuZ2V0RGF0YSgpO1xudGhpcy5jb25maWcuaHRtbEVuY29kZU91dHB1dCYmKGI9Q0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShiKSk7YS5pcyhcInRleHRhcmVhXCIpP2Euc2V0VmFsdWUoYik6YS5zZXRIdG1sKGIpO3JldHVybiEwfXJldHVybiExfWEucHJvdG90eXBlPUNLRURJVE9SLmVkaXRvci5wcm90b3R5cGU7Q0tFRElUT1IuZWRpdG9yPWE7dmFyIHU9MCxCPXt9O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLHthZGRDb21tYW5kOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPWEudG9Mb3dlckNhc2UoKTt2YXIgYz1uZXcgQ0tFRElUT1IuY29tbWFuZCh0aGlzLGIpO3RoaXMubW9kZSYmZSh0aGlzLGMpO3JldHVybiB0aGlzLmNvbW1hbmRzW2FdPWN9LF9hdHRhY2hUb0Zvcm06ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIpe2MudXBkYXRlRWxlbWVudCgpO2MuXy5yZXF1aXJlZCYmIWQuZ2V0VmFsdWUoKSYmITE9PT1jLmZpcmUoXCJyZXF1aXJlZFwiKSYmYi5kYXRhLnByZXZlbnREZWZhdWx0KCl9XG5mdW5jdGlvbiBiKGEpe3JldHVybiEhKGEmJmEuY2FsbCYmYS5hcHBseSl9dmFyIGM9dGhpcyxkPWMuZWxlbWVudCxlPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChkLiQuZm9ybSk7ZC5pcyhcInRleHRhcmVhXCIpJiZlJiYoZS5vbihcInN1Ym1pdFwiLGEpLGIoZS4kLnN1Ym1pdCkmJihlLiQuc3VibWl0PUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGUuJC5zdWJtaXQsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7YSgpO2IuYXBwbHk/Yi5hcHBseSh0aGlzKTpiKCl9fSkpLGMub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtlLnJlbW92ZUxpc3RlbmVyKFwic3VibWl0XCIsYSl9KSl9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy5maXJlKFwiYmVmb3JlRGVzdHJveVwiKTshYSYmQS5jYWxsKHRoaXMpO3RoaXMuZWRpdGFibGUobnVsbCk7dGhpcy5maWx0ZXImJih0aGlzLmZpbHRlci5kZXN0cm95KCksZGVsZXRlIHRoaXMuZmlsdGVyKTtkZWxldGUgdGhpcy5hY3RpdmVGaWx0ZXI7dGhpcy5zdGF0dXM9XG5cImRlc3Ryb3llZFwiO3RoaXMuZmlyZShcImRlc3Ryb3lcIik7dGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtDS0VESVRPUi5yZW1vdmUodGhpcyk7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlRGVzdHJveWVkXCIsbnVsbCx0aGlzKX0sZWxlbWVudFBhdGg6ZnVuY3Rpb24oYSl7aWYoIWEpe2E9dGhpcy5nZXRTZWxlY3Rpb24oKTtpZighYSlyZXR1cm4gbnVsbDthPWEuZ2V0U3RhcnRFbGVtZW50KCl9cmV0dXJuIGE/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChhLHRoaXMuZWRpdGFibGUoKSk6bnVsbH0sY3JlYXRlUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVkaXRhYmxlKCk7cmV0dXJuIGE/bmV3IENLRURJVE9SLmRvbS5yYW5nZShhKTpudWxsfSxleGVjQ29tbWFuZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q29tbWFuZChhKSxkPXtuYW1lOmEsY29tbWFuZERhdGE6Yixjb21tYW5kOmN9O3JldHVybiBjJiZjLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmXG4hMSE9PXRoaXMuZmlyZShcImJlZm9yZUNvbW1hbmRFeGVjXCIsZCkmJihkLnJldHVyblZhbHVlPWMuZXhlYyhkLmNvbW1hbmREYXRhKSwhYy5hc3luYyYmITEhPT10aGlzLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIsZCkpP2QucmV0dXJuVmFsdWU6ITF9LGdldENvbW1hbmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29tbWFuZHNbYV19LGdldERhdGE6ZnVuY3Rpb24oYSl7IWEmJnRoaXMuZmlyZShcImJlZm9yZUdldERhdGFcIik7dmFyIGI9dGhpcy5fLmRhdGE7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihiPShiPXRoaXMuZWxlbWVudCkmJnRoaXMuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFP2IuaXMoXCJ0ZXh0YXJlYVwiKT9iLmdldFZhbHVlKCk6Yi5nZXRIdG1sKCk6XCJcIik7Yj17ZGF0YVZhbHVlOmJ9OyFhJiZ0aGlzLmZpcmUoXCJnZXREYXRhXCIsYik7cmV0dXJuIGIuZGF0YVZhbHVlfSxnZXRTbmFwc2hvdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmlyZShcImdldFNuYXBzaG90XCIpO1xuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihhPShhPXRoaXMuZWxlbWVudCkmJnRoaXMuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFP2EuaXMoXCJ0ZXh0YXJlYVwiKT9hLmdldFZhbHVlKCk6YS5nZXRIdG1sKCk6XCJcIik7cmV0dXJuIGF9LGxvYWRTbmFwc2hvdDpmdW5jdGlvbihhKXt0aGlzLmZpcmUoXCJsb2FkU25hcHNob3RcIixhKX0sc2V0RGF0YTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITAsZT1iO2ImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoYz1iLmludGVybmFsLGU9Yi5jYWxsYmFjayxkPSFiLm5vU25hcHNob3QpOyFjJiZkJiZ0aGlzLmZpcmUoXCJzYXZlU25hcHNob3RcIik7aWYoZXx8IWMpdGhpcy5vbmNlKFwiZGF0YVJlYWR5XCIsZnVuY3Rpb24oYSl7IWMmJmQmJnRoaXMuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtlJiZlLmNhbGwoYS5lZGl0b3IpfSk7YT17ZGF0YVZhbHVlOmF9OyFjJiZ0aGlzLmZpcmUoXCJzZXREYXRhXCIsYSk7dGhpcy5fLmRhdGE9YS5kYXRhVmFsdWU7XG4hYyYmdGhpcy5maXJlKFwiYWZ0ZXJTZXREYXRhXCIsYSl9LHNldFJlYWRPbmx5OmZ1bmN0aW9uKGEpe2E9bnVsbD09YXx8YTt0aGlzLnJlYWRPbmx5IT1hJiYodGhpcy5yZWFkT25seT1hLHRoaXMua2V5c3Ryb2tlSGFuZGxlci5ibG9ja2VkS2V5c3Ryb2tlc1s4XT0rYSx0aGlzLmVkaXRhYmxlKCkuc2V0UmVhZE9ubHkoYSksdGhpcy5maXJlKFwicmVhZE9ubHlcIikpfSxpbnNlcnRIdG1sOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmZpcmUoXCJpbnNlcnRIdG1sXCIse2RhdGFWYWx1ZTphLG1vZGU6YixyYW5nZTpjfSl9LGluc2VydFRleHQ6ZnVuY3Rpb24oYSl7dGhpcy5maXJlKFwiaW5zZXJ0VGV4dFwiLGEpfSxpbnNlcnRFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuZmlyZShcImluc2VydEVsZW1lbnRcIixhKX0sZ2V0U2VsZWN0ZWRIdG1sOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWRpdGFibGUoKSxjPXRoaXMuZ2V0U2VsZWN0aW9uKCksYz1jJiZjLmdldFJhbmdlcygpO2lmKCFifHwhY3x8MD09PWMubGVuZ3RoKXJldHVybiBudWxsO1xuZm9yKHZhciBkPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudCxlLGgscCxtPTA7bTxjLmxlbmd0aDttKyspe3ZhciBnPWNbbV0scj1nLnN0YXJ0Q29udGFpbmVyO3IuZ2V0TmFtZSYmXCJ0clwiPT1yLmdldE5hbWUoKT8oZXx8KGU9ci5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKS5jbG9uZSgpLGUuYXBwZW5kKHIuZ2V0QXNjZW5kYW50KFwidGJvZHlcIikuY2xvbmUoKSksZC5hcHBlbmQoZSksZT1lLmZpbmRPbmUoXCJ0Ym9keVwiKSksaCYmaC5lcXVhbHMocil8fChoPXIscD1yLmNsb25lKCksZS5hcHBlbmQocCkpLHAuYXBwZW5kKGcuY2xvbmVDb250ZW50cygpKSk6ZC5hcHBlbmQoZy5jbG9uZUNvbnRlbnRzKCkpfWI9ZT9kOmIuZ2V0SHRtbEZyb21SYW5nZShjWzBdKTtyZXR1cm4gYT9iLmdldEh0bWwoKTpifSxleHRyYWN0U2VsZWN0ZWRIdG1sOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lZGl0YWJsZSgpLGQ9dGhpcy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKTtpZighY3x8MD09PVxuZC5sZW5ndGgpcmV0dXJuIG51bGw7ZD1kWzBdO2M9Yy5leHRyYWN0SHRtbEZyb21SYW5nZShkLGIpO2J8fHRoaXMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKFtkXSk7cmV0dXJuIGE/Yy5nZXRIdG1sKCk6Y30sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJiZWZvcmVGb2N1c1wiKX0sY2hlY2tEaXJ0eTpmdW5jdGlvbigpe3JldHVyblwicmVhZHlcIj09dGhpcy5zdGF0dXMmJnRoaXMuXy5wcmV2aW91c1ZhbHVlIT09dGhpcy5nZXRTbmFwc2hvdCgpfSxyZXNldERpcnR5OmZ1bmN0aW9uKCl7dGhpcy5fLnByZXZpb3VzVmFsdWU9dGhpcy5nZXRTbmFwc2hvdCgpfSx1cGRhdGVFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIEEuY2FsbCh0aGlzKX0sc2V0S2V5c3Ryb2tlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMua2V5c3Ryb2tlSGFuZGxlci5rZXlzdHJva2VzLGI9Q0tFRElUT1IudG9vbHMuaXNBcnJheShhcmd1bWVudHNbMF0pP2FyZ3VtZW50c1swXTpbW10uc2xpY2UuY2FsbChhcmd1bWVudHMsXG4wKV0sYyxkLGU9Yi5sZW5ndGg7ZS0tOyljPWJbZV0sZD0wLENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYykmJihkPWNbMV0sYz1jWzBdKSxkP2FbY109ZDpkZWxldGUgYVtjXX0sYWRkRmVhdHVyZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maWx0ZXIuYWRkRmVhdHVyZShhKX0sc2V0QWN0aXZlRmlsdGVyOmZ1bmN0aW9uKGEpe2F8fChhPXRoaXMuZmlsdGVyKTt0aGlzLmFjdGl2ZUZpbHRlciE9PWEmJih0aGlzLmFjdGl2ZUZpbHRlcj1hLHRoaXMuZmlyZShcImFjdGl2ZUZpbHRlckNoYW5nZVwiKSxhPT09dGhpcy5maWx0ZXI/dGhpcy5zZXRBY3RpdmVFbnRlck1vZGUobnVsbCxudWxsKTp0aGlzLnNldEFjdGl2ZUVudGVyTW9kZShhLmdldEFsbG93ZWRFbnRlck1vZGUodGhpcy5lbnRlck1vZGUpLGEuZ2V0QWxsb3dlZEVudGVyTW9kZSh0aGlzLnNoaWZ0RW50ZXJNb2RlLCEwKSkpfSxzZXRBY3RpdmVFbnRlck1vZGU6ZnVuY3Rpb24oYSxiKXthPWE/dGhpcy5ibG9ja2xlc3M/Q0tFRElUT1IuRU5URVJfQlI6XG5hOnRoaXMuZW50ZXJNb2RlO2I9Yj90aGlzLmJsb2NrbGVzcz9DS0VESVRPUi5FTlRFUl9CUjpiOnRoaXMuc2hpZnRFbnRlck1vZGU7aWYodGhpcy5hY3RpdmVFbnRlck1vZGUhPWF8fHRoaXMuYWN0aXZlU2hpZnRFbnRlck1vZGUhPWIpdGhpcy5hY3RpdmVFbnRlck1vZGU9YSx0aGlzLmFjdGl2ZVNoaWZ0RW50ZXJNb2RlPWIsdGhpcy5maXJlKFwiYWN0aXZlRW50ZXJNb2RlQ2hhbmdlXCIpfSxzaG93Tm90aWZpY2F0aW9uOmZ1bmN0aW9uKGEpe2FsZXJ0KGEpfX0pfSkoKTtDS0VESVRPUi5FTEVNRU5UX01PREVfTk9ORT0wO0NLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFPTE7Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0FQUEVORFRPPTI7Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT0zO0NLRURJVE9SLmh0bWxQYXJzZXI9ZnVuY3Rpb24oKXt0aGlzLl89e2h0bWxQYXJ0c1JlZ2V4Oi88KD86KD86XFwvKFtePl0rKT4pfCg/OiEtLShbXFxTfFxcc10qPyktLVxceDNlKXwoPzooW15cXC9cXHM+XSspKCg/OlxccytbXFx3XFwtOi5dKyg/Olxccyo9XFxzKj8oPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXlxcc1wiJ1xcLz5dKykpPykqKVtcXFNcXHNdKj8oXFwvPyk+KSkvZ319O1xuKGZ1bmN0aW9uKCl7dmFyIGE9LyhbXFx3XFwtOi5dKykoPzooPzpcXHMqPVxccyooPzooPzpcIihbXlwiXSopXCIpfCg/OicoW14nXSopJyl8KFteXFxzPl0rKSkpfCg/PVxcc3wkKSkvZyxkPXtjaGVja2VkOjEsY29tcGFjdDoxLGRlY2xhcmU6MSxkZWZlcjoxLGRpc2FibGVkOjEsaXNtYXA6MSxtdWx0aXBsZToxLG5vaHJlZjoxLG5vcmVzaXplOjEsbm9zaGFkZToxLG5vd3JhcDoxLHJlYWRvbmx5OjEsc2VsZWN0ZWQ6MX07Q0tFRElUT1IuaHRtbFBhcnNlci5wcm90b3R5cGU9e29uVGFnT3BlbjpmdW5jdGlvbigpe30sb25UYWdDbG9zZTpmdW5jdGlvbigpe30sb25UZXh0OmZ1bmN0aW9uKCl7fSxvbkNEQVRBOmZ1bmN0aW9uKCl7fSxvbkNvbW1lbnQ6ZnVuY3Rpb24oKXt9LHBhcnNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyxlLGc9MCxsO2M9dGhpcy5fLmh0bWxQYXJ0c1JlZ2V4LmV4ZWMoYik7KXtlPWMuaW5kZXg7aWYoZT5nKWlmKGc9Yi5zdWJzdHJpbmcoZyxlKSxsKWwucHVzaChnKTtlbHNlIHRoaXMub25UZXh0KGcpO1xuZz10aGlzLl8uaHRtbFBhcnRzUmVnZXgubGFzdEluZGV4O2lmKGU9Y1sxXSlpZihlPWUudG9Mb3dlckNhc2UoKSxsJiZDS0VESVRPUi5kdGQuJGNkYXRhW2VdJiYodGhpcy5vbkNEQVRBKGwuam9pbihcIlwiKSksbD1udWxsKSwhbCl7dGhpcy5vblRhZ0Nsb3NlKGUpO2NvbnRpbnVlfWlmKGwpbC5wdXNoKGNbMF0pO2Vsc2UgaWYoZT1jWzNdKXtpZihlPWUudG9Mb3dlckNhc2UoKSwhLz1cIi8udGVzdChlKSl7dmFyIGs9e30sbix3PWNbNF07Yz0hIWNbNV07aWYodylmb3IoO249YS5leGVjKHcpOyl7dmFyIGY9blsxXS50b0xvd2VyQ2FzZSgpO249blsyXXx8blszXXx8bls0XXx8XCJcIjtrW2ZdPSFuJiZkW2ZdP2Y6Q0tFRElUT1IudG9vbHMuaHRtbERlY29kZUF0dHIobil9dGhpcy5vblRhZ09wZW4oZSxrLGMpOyFsJiZDS0VESVRPUi5kdGQuJGNkYXRhW2VdJiYobD1bXSl9fWVsc2UgaWYoZT1jWzJdKXRoaXMub25Db21tZW50KGUpfWlmKGIubGVuZ3RoPmcpdGhpcy5vblRleHQoYi5zdWJzdHJpbmcoZyxcbmIubGVuZ3RoKSl9fX0pKCk7XG5DS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKCl7dGhpcy5fPXtvdXRwdXQ6W119fSxwcm90bzp7b3BlblRhZzpmdW5jdGlvbihhKXt0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzY1wiLGEpfSxvcGVuVGFnQ2xvc2U6ZnVuY3Rpb24oYSxkKXtkP3RoaXMuXy5vdXRwdXQucHVzaChcIiAvXFx4M2VcIik6dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2VcIil9LGF0dHJpYnV0ZTpmdW5jdGlvbihhLGQpe1wic3RyaW5nXCI9PXR5cGVvZiBkJiYoZD1DS0VESVRPUi50b29scy5odG1sRW5jb2RlQXR0cihkKSk7dGhpcy5fLm91dHB1dC5wdXNoKFwiIFwiLGEsJ1xceDNkXCInLGQsJ1wiJyl9LGNsb3NlVGFnOmZ1bmN0aW9uKGEpe3RoaXMuXy5vdXRwdXQucHVzaChcIlxceDNjL1wiLGEsXCJcXHgzZVwiKX0sdGV4dDpmdW5jdGlvbihhKXt0aGlzLl8ub3V0cHV0LnB1c2goYSl9LGNvbW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2MhLS1cIixhLFxuXCItLVxceDNlXCIpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLl8ub3V0cHV0LnB1c2goYSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fLm91dHB1dD1bXTt0aGlzLl8uaW5kZW50PSExfSxnZXRIdG1sOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuXy5vdXRwdXQuam9pbihcIlwiKTthJiZ0aGlzLnJlc2V0KCk7cmV0dXJuIGR9fX0pO1widXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCl7Q0tFRElUT1IuaHRtbFBhcnNlci5ub2RlPWZ1bmN0aW9uKCl7fTtDS0VESVRPUi5odG1sUGFyc2VyLm5vZGUucHJvdG90eXBlPXtyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcmVudC5jaGlsZHJlbixkPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoYSx0aGlzKSxiPXRoaXMucHJldmlvdXMsYz10aGlzLm5leHQ7YiYmKGIubmV4dD1jKTtjJiYoYy5wcmV2aW91cz1iKTthLnNwbGljZShkLDEpO3RoaXMucGFyZW50PW51bGx9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMucGFyZW50LmNoaWxkcmVuLGI9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihkLHRoaXMpLGM9YS5wcmV2aW91cz10aGlzLnByZXZpb3VzLGU9YS5uZXh0PXRoaXMubmV4dDtjJiYoYy5uZXh0PWEpO2UmJihlLnByZXZpb3VzPWEpO2RbYl09YTthLnBhcmVudD10aGlzLnBhcmVudDt0aGlzLnBhcmVudD1udWxsfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihhKXt2YXIgZD1hLnBhcmVudC5jaGlsZHJlbixcbmI9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihkLGEpLGM9YS5uZXh0O2Quc3BsaWNlKGIrMSwwLHRoaXMpO3RoaXMubmV4dD1hLm5leHQ7dGhpcy5wcmV2aW91cz1hO2EubmV4dD10aGlzO2MmJihjLnByZXZpb3VzPXRoaXMpO3RoaXMucGFyZW50PWEucGFyZW50fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dmFyIGQ9YS5wYXJlbnQuY2hpbGRyZW4sYj1DS0VESVRPUi50b29scy5pbmRleE9mKGQsYSk7ZC5zcGxpY2UoYiwwLHRoaXMpO3RoaXMubmV4dD1hOyh0aGlzLnByZXZpb3VzPWEucHJldmlvdXMpJiYoYS5wcmV2aW91cy5uZXh0PXRoaXMpO2EucHJldmlvdXM9dGhpczt0aGlzLnBhcmVudD1hLnBhcmVudH0sZ2V0QXNjZW5kYW50OmZ1bmN0aW9uKGEpe3ZhciBkPVwiZnVuY3Rpb25cIj09dHlwZW9mIGE/YTpcInN0cmluZ1wiPT10eXBlb2YgYT9mdW5jdGlvbihiKXtyZXR1cm4gYi5uYW1lPT1hfTpmdW5jdGlvbihiKXtyZXR1cm4gYi5uYW1lIGluIGF9LGI9dGhpcy5wYXJlbnQ7Zm9yKDtiJiZcbmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UOyl7aWYoZChiKSlyZXR1cm4gYjtiPWIucGFyZW50fXJldHVybiBudWxsfSx3cmFwV2l0aDpmdW5jdGlvbihhKXt0aGlzLnJlcGxhY2VXaXRoKGEpO2EuYWRkKHRoaXMpO3JldHVybiBhfSxnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi50b29scy5pbmRleE9mKHRoaXMucGFyZW50LmNoaWxkcmVuLHRoaXMpfSxnZXRGaWx0ZXJDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhfHx7fX19fSkoKTtcInVzZSBzdHJpY3RcIjtDS0VESVRPUi5odG1sUGFyc2VyLmNvbW1lbnQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hO3RoaXMuXz17aXNCbG9ja0xpa2U6ITF9fTtcbkNLRURJVE9SLmh0bWxQYXJzZXIuY29tbWVudC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLm5vZGUse3R5cGU6Q0tFRElUT1IuTk9ERV9DT01NRU5ULGZpbHRlcjpmdW5jdGlvbihhLGQpe3ZhciBiPXRoaXMudmFsdWU7aWYoIShiPWEub25Db21tZW50KGQsYix0aGlzKSkpcmV0dXJuIHRoaXMucmVtb3ZlKCksITE7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGIpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgoYiksITE7dGhpcy52YWx1ZT1iO3JldHVybiEwfSx3cml0ZUh0bWw6ZnVuY3Rpb24oYSxkKXtkJiZ0aGlzLmZpbHRlcihkKTthLmNvbW1lbnQodGhpcy52YWx1ZSl9fSk7XCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKXtDS0VESVRPUi5odG1sUGFyc2VyLnRleHQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hO3RoaXMuXz17aXNCbG9ja0xpa2U6ITF9fTtDS0VESVRPUi5odG1sUGFyc2VyLnRleHQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfVEVYVCxmaWx0ZXI6ZnVuY3Rpb24oYSxkKXtpZighKHRoaXMudmFsdWU9YS5vblRleHQoZCx0aGlzLnZhbHVlLHRoaXMpKSlyZXR1cm4gdGhpcy5yZW1vdmUoKSwhMX0sd3JpdGVIdG1sOmZ1bmN0aW9uKGEsZCl7ZCYmdGhpcy5maWx0ZXIoZCk7YS50ZXh0KHRoaXMudmFsdWUpfX0pfSkoKTtcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpe0NLRURJVE9SLmh0bWxQYXJzZXIuY2RhdGE9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hfTtDS0VESVRPUi5odG1sUGFyc2VyLmNkYXRhLnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIubm9kZSx7dHlwZTpDS0VESVRPUi5OT0RFX1RFWFQsZmlsdGVyOmZ1bmN0aW9uKCl7fSx3cml0ZUh0bWw6ZnVuY3Rpb24oYSl7YS53cml0ZSh0aGlzLnZhbHVlKX19KX0pKCk7XCJ1c2Ugc3RyaWN0XCI7Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudD1mdW5jdGlvbigpe3RoaXMuY2hpbGRyZW49W107dGhpcy5wYXJlbnQ9bnVsbDt0aGlzLl89e2lzQmxvY2tMaWtlOiEwLGhhc0lubGluZVN0YXJ0ZWQ6ITF9fTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXN1cnZpdmVcIl0/ITE6XCJhXCI9PWEubmFtZSYmYS5hdHRyaWJ1dGVzLmhyZWZ8fENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbYS5uYW1lXX12YXIgZD1DS0VESVRPUi50b29scy5leHRlbmQoe3RhYmxlOjEsdWw6MSxvbDoxLGRsOjF9LENLRURJVE9SLmR0ZC50YWJsZSxDS0VESVRPUi5kdGQudWwsQ0tFRElUT1IuZHRkLm9sLENLRURJVE9SLmR0ZC5kbCksYj17b2w6MSx1bDoxfSxjPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSx7aHRtbDoxfSxDS0VESVRPUi5kdGQuaHRtbCxDS0VESVRPUi5kdGQuYm9keSxDS0VESVRPUi5kdGQuaGVhZCx7c3R5bGU6MSxzY3JpcHQ6MX0pLGU9e3VsOlwibGlcIixvbDpcImxpXCIsZGw6XCJkZFwiLHRhYmxlOlwidGJvZHlcIix0Ym9keTpcInRyXCIsdGhlYWQ6XCJ0clwiLHRmb290OlwidHJcIix0cjpcInRkXCJ9O0NLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWw9XG5mdW5jdGlvbihnLGwsayl7ZnVuY3Rpb24gbihhKXt2YXIgYjtpZigwPHkubGVuZ3RoKWZvcih2YXIgYz0wO2M8eS5sZW5ndGg7YysrKXt2YXIgZD15W2NdLGg9ZC5uYW1lLGU9Q0tFRElUT1IuZHRkW2hdLGc9dC5uYW1lJiZDS0VESVRPUi5kdGRbdC5uYW1lXTtnJiYhZ1toXXx8YSYmZSYmIWVbYV0mJkNLRURJVE9SLmR0ZFthXT9oPT10Lm5hbWUmJih4KHQsdC5wYXJlbnQsMSksYy0tKTooYnx8KHcoKSxiPTEpLGQ9ZC5jbG9uZSgpLGQucGFyZW50PXQsdD1kLHkuc3BsaWNlKGMsMSksYy0tKX19ZnVuY3Rpb24gdygpe2Zvcig7Ri5sZW5ndGg7KXgoRi5zaGlmdCgpLHQpfWZ1bmN0aW9uIGYoYSl7aWYoYS5fLmlzQmxvY2tMaWtlJiZcInByZVwiIT1hLm5hbWUmJlwidGV4dGFyZWFcIiE9YS5uYW1lKXt2YXIgYj1hLmNoaWxkcmVuLmxlbmd0aCxjPWEuY2hpbGRyZW5bYi0xXSxkO2MmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoKGQ9Q0tFRElUT1IudG9vbHMucnRyaW0oYy52YWx1ZSkpP1xuYy52YWx1ZT1kOmEuY2hpbGRyZW4ubGVuZ3RoPWItMSl9fWZ1bmN0aW9uIHgoYixjLGQpe2M9Y3x8dHx8cTt2YXIgZT10O3ZvaWQgMD09PWIucHJldmlvdXMmJihBKGMsYikmJih0PWMsQi5vblRhZ09wZW4oayx7fSksYi5yZXR1cm5Qb2ludD1jPXQpLGYoYiksYShiKSYmIWIuY2hpbGRyZW4ubGVuZ3RofHxjLmFkZChiKSxcInByZVwiPT1iLm5hbWUmJihoPSExKSxcInRleHRhcmVhXCI9PWIubmFtZSYmKHo9ITEpKTtiLnJldHVyblBvaW50Pyh0PWIucmV0dXJuUG9pbnQsZGVsZXRlIGIucmV0dXJuUG9pbnQpOnQ9ZD9jOmV9ZnVuY3Rpb24gQShhLGIpe2lmKChhPT1xfHxcImJvZHlcIj09YS5uYW1lKSYmayYmKCFhLm5hbWV8fENLRURJVE9SLmR0ZFthLm5hbWVdW2tdKSl7dmFyIGMsZDtyZXR1cm4oYz1iLmF0dHJpYnV0ZXMmJihkPWIuYXR0cmlidXRlc1tcImRhdGEtY2tlLXJlYWwtZWxlbWVudC10eXBlXCJdKT9kOmIubmFtZSkmJmMgaW4gQ0tFRElUT1IuZHRkLiRpbmxpbmUmJiEoYyBpbiBDS0VESVRPUi5kdGQuaGVhZCkmJlxuIWIuaXNPcnBoYW58fGIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfX1mdW5jdGlvbiB1KGEsYil7cmV0dXJuIGEgaW4gQ0tFRElUT1IuZHRkLiRsaXN0SXRlbXx8YSBpbiBDS0VESVRPUi5kdGQuJHRhYmxlQ29udGVudD9hPT1ifHxcImR0XCI9PWEmJlwiZGRcIj09Ynx8XCJkZFwiPT1hJiZcImR0XCI9PWI6ITF9dmFyIEI9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIscT1sIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50P2w6XCJzdHJpbmdcIj09dHlwZW9mIGw/bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChsKTpuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudCx5PVtdLEY9W10sdD1xLHo9XCJ0ZXh0YXJlYVwiPT1xLm5hbWUsaD1cInByZVwiPT1xLm5hbWU7Qi5vblRhZ09wZW49ZnVuY3Rpb24oZSxtLGcsZil7bT1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KGUsbSk7bS5pc1Vua25vd24mJmcmJihtLmlzRW1wdHk9ITApO20uaXNPcHRpb25hbENsb3NlPWY7XG5pZihhKG0pKXkucHVzaChtKTtlbHNle2lmKFwicHJlXCI9PWUpaD0hMDtlbHNle2lmKFwiYnJcIj09ZSYmaCl7dC5hZGQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dChcIlxcblwiKSk7cmV0dXJufVwidGV4dGFyZWFcIj09ZSYmKHo9ITApfWlmKFwiYnJcIj09ZSlGLnB1c2gobSk7ZWxzZXtmb3IoOyEoZj0oZz10Lm5hbWUpP0NLRURJVE9SLmR0ZFtnXXx8KHQuXy5pc0Jsb2NrTGlrZT9DS0VESVRPUi5kdGQuZGl2OkNLRURJVE9SLmR0ZC5zcGFuKTpjLG0uaXNVbmtub3dufHx0LmlzVW5rbm93bnx8ZltlXSk7KWlmKHQuaXNPcHRpb25hbENsb3NlKUIub25UYWdDbG9zZShnKTtlbHNlIGlmKGUgaW4gYiYmZyBpbiBiKWc9dC5jaGlsZHJlbiwoZz1nW2cubGVuZ3RoLTFdKSYmXCJsaVwiPT1nLm5hbWV8fHgoZz1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KFwibGlcIiksdCksIW0ucmV0dXJuUG9pbnQmJihtLnJldHVyblBvaW50PXQpLHQ9ZztlbHNlIGlmKGUgaW4gQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSYmXG4hdShlLGcpKUIub25UYWdPcGVuKFwibGlcIj09ZT9cInVsXCI6XCJkbFwiLHt9LDAsMSk7ZWxzZSBpZihnIGluIGQmJiF1KGUsZykpIW0ucmV0dXJuUG9pbnQmJihtLnJldHVyblBvaW50PXQpLHQ9dC5wYXJlbnQ7ZWxzZSBpZihnIGluIENLRURJVE9SLmR0ZC4kaW5saW5lJiZ5LnVuc2hpZnQodCksdC5wYXJlbnQpeCh0LHQucGFyZW50LDEpO2Vsc2V7bS5pc09ycGhhbj0xO2JyZWFrfW4oZSk7dygpO20ucGFyZW50PXQ7bS5pc0VtcHR5P3gobSk6dD1tfX19O0Iub25UYWdDbG9zZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9eS5sZW5ndGgtMTswPD1iO2ItLSlpZihhPT15W2JdLm5hbWUpe3kuc3BsaWNlKGIsMSk7cmV0dXJufWZvcih2YXIgYz1bXSxkPVtdLGg9dDtoIT1xJiZoLm5hbWUhPWE7KWguXy5pc0Jsb2NrTGlrZXx8ZC51bnNoaWZ0KGgpLGMucHVzaChoKSxoPWgucmV0dXJuUG9pbnR8fGgucGFyZW50O2lmKGghPXEpe2ZvcihiPTA7YjxjLmxlbmd0aDtiKyspe3ZhciBlPWNbYl07eChlLGUucGFyZW50KX10PVxuaDtoLl8uaXNCbG9ja0xpa2UmJncoKTt4KGgsaC5wYXJlbnQpO2g9PXQmJih0PXQucGFyZW50KTt5PXkuY29uY2F0KGQpfVwiYm9keVwiPT1hJiYoaz0hMSl9O0Iub25UZXh0PWZ1bmN0aW9uKGEpe2lmKCEodC5fLmhhc0lubGluZVN0YXJ0ZWQmJiFGLmxlbmd0aHx8aHx8eikmJihhPUNLRURJVE9SLnRvb2xzLmx0cmltKGEpLDA9PT1hLmxlbmd0aCkpcmV0dXJuO3ZhciBiPXQubmFtZSxnPWI/Q0tFRElUT1IuZHRkW2JdfHwodC5fLmlzQmxvY2tMaWtlP0NLRURJVE9SLmR0ZC5kaXY6Q0tFRElUT1IuZHRkLnNwYW4pOmM7aWYoIXomJiFnW1wiI1wiXSYmYiBpbiBkKUIub25UYWdPcGVuKGVbYl18fFwiXCIpLEIub25UZXh0KGEpO2Vsc2V7dygpO24oKTtofHx6fHwoYT1hLnJlcGxhY2UoL1tcXHRcXHJcXG4gXXsyLH18W1xcdFxcclxcbl0vZyxcIiBcIikpO2E9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dChhKTtpZihBKHQsYSkpdGhpcy5vblRhZ09wZW4oayx7fSwwLDEpO3QuYWRkKGEpfX07Qi5vbkNEQVRBPVxuZnVuY3Rpb24oYSl7dC5hZGQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIuY2RhdGEoYSkpfTtCLm9uQ29tbWVudD1mdW5jdGlvbihhKXt3KCk7bigpO3QuYWRkKG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmNvbW1lbnQoYSkpfTtCLnBhcnNlKGcpO2Zvcih3KCk7dCE9cTspeCh0LHQucGFyZW50LDEpO2YocSk7cmV0dXJuIHF9O0NLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQucHJvdG90eXBlPXt0eXBlOkNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQsYWRkOmZ1bmN0aW9uKGEsYil7aXNOYU4oYikmJihiPXRoaXMuY2hpbGRyZW4ubGVuZ3RoKTt2YXIgYz0wPGI/dGhpcy5jaGlsZHJlbltiLTFdOm51bGw7aWYoYyl7aWYoYS5fLmlzQmxvY2tMaWtlJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGMudmFsdWU9Q0tFRElUT1IudG9vbHMucnRyaW0oYy52YWx1ZSksMD09PWMudmFsdWUubGVuZ3RoKSl7dGhpcy5jaGlsZHJlbi5wb3AoKTt0aGlzLmFkZChhKTtyZXR1cm59Yy5uZXh0PVxuYX1hLnByZXZpb3VzPWM7YS5wYXJlbnQ9dGhpczt0aGlzLmNoaWxkcmVuLnNwbGljZShiLDAsYSk7dGhpcy5fLmhhc0lubGluZVN0YXJ0ZWR8fCh0aGlzLl8uaGFzSW5saW5lU3RhcnRlZD1hLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFhLl8uaXNCbG9ja0xpa2UpfSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiPXRoaXMuZ2V0RmlsdGVyQ29udGV4dChiKTthLm9uUm9vdChiLHRoaXMpO3RoaXMuZmlsdGVyQ2hpbGRyZW4oYSwhMSxiKX0sZmlsdGVyQ2hpbGRyZW46ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuY2hpbGRyZW5GaWx0ZXJlZEJ5IT1hLmlkKXtjPXRoaXMuZ2V0RmlsdGVyQ29udGV4dChjKTtpZihiJiYhdGhpcy5wYXJlbnQpYS5vblJvb3QoYyx0aGlzKTt0aGlzLmNoaWxkcmVuRmlsdGVyZWRCeT1hLmlkO2ZvcihiPTA7Yjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtiKyspITE9PT10aGlzLmNoaWxkcmVuW2JdLmZpbHRlcihhLFxuYykmJmItLX19LHdyaXRlSHRtbDpmdW5jdGlvbihhLGIpe2ImJnRoaXMuZmlsdGVyKGIpO3RoaXMud3JpdGVDaGlsZHJlbkh0bWwoYSl9LHdyaXRlQ2hpbGRyZW5IdG1sOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmdldEZpbHRlckNvbnRleHQoKTtpZihjJiYhdGhpcy5wYXJlbnQmJmIpYi5vblJvb3QoZCx0aGlzKTtiJiZ0aGlzLmZpbHRlckNoaWxkcmVuKGIsITEsZCk7Yj0wO2M9dGhpcy5jaGlsZHJlbjtmb3IoZD1jLmxlbmd0aDtiPGQ7YisrKWNbYl0ud3JpdGVIdG1sKGEpfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYixjKXtpZighKGN8fGImJnRoaXMudHlwZSE9YikpdmFyIGQ9YSh0aGlzKTtpZighMSE9PWQpe2M9dGhpcy5jaGlsZHJlbjtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylkPWNbZV0sZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/ZC5mb3JFYWNoKGEsYik6YiYmZC50eXBlIT1ifHxhKGQpfX0sZ2V0RmlsdGVyQ29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYXx8XG57fX19fSkoKTtcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLnJ1bGVzPVtdfWZ1bmN0aW9uIGQoYixjLGQsZyl7dmFyIGwsaztmb3IobCBpbiBjKShrPWJbbF0pfHwoaz1iW2xdPW5ldyBhKSxrLmFkZChjW2xdLGQsZyl9Q0tFRElUT1IuaHRtbFBhcnNlci5maWx0ZXI9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYil7dGhpcy5pZD1DS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCk7dGhpcy5lbGVtZW50TmFtZVJ1bGVzPW5ldyBhO3RoaXMuYXR0cmlidXRlTmFtZVJ1bGVzPW5ldyBhO3RoaXMuZWxlbWVudHNSdWxlcz17fTt0aGlzLmF0dHJpYnV0ZXNSdWxlcz17fTt0aGlzLnRleHRSdWxlcz1uZXcgYTt0aGlzLmNvbW1lbnRSdWxlcz1uZXcgYTt0aGlzLnJvb3RSdWxlcz1uZXcgYTtiJiZ0aGlzLmFkZFJ1bGVzKGIsMTApfSxwcm90bzp7YWRkUnVsZXM6ZnVuY3Rpb24oYSxjKXt2YXIgZTtcIm51bWJlclwiPT10eXBlb2YgYz9lPWM6YyYmXCJwcmlvcml0eVwiaW4gYyYmKGU9XG5jLnByaW9yaXR5KTtcIm51bWJlclwiIT10eXBlb2YgZSYmKGU9MTApO1wib2JqZWN0XCIhPXR5cGVvZiBjJiYoYz17fSk7YS5lbGVtZW50TmFtZXMmJnRoaXMuZWxlbWVudE5hbWVSdWxlcy5hZGRNYW55KGEuZWxlbWVudE5hbWVzLGUsYyk7YS5hdHRyaWJ1dGVOYW1lcyYmdGhpcy5hdHRyaWJ1dGVOYW1lUnVsZXMuYWRkTWFueShhLmF0dHJpYnV0ZU5hbWVzLGUsYyk7YS5lbGVtZW50cyYmZCh0aGlzLmVsZW1lbnRzUnVsZXMsYS5lbGVtZW50cyxlLGMpO2EuYXR0cmlidXRlcyYmZCh0aGlzLmF0dHJpYnV0ZXNSdWxlcyxhLmF0dHJpYnV0ZXMsZSxjKTthLnRleHQmJnRoaXMudGV4dFJ1bGVzLmFkZChhLnRleHQsZSxjKTthLmNvbW1lbnQmJnRoaXMuY29tbWVudFJ1bGVzLmFkZChhLmNvbW1lbnQsZSxjKTthLnJvb3QmJnRoaXMucm9vdFJ1bGVzLmFkZChhLnJvb3QsZSxjKX0sYXBwbHlUbzpmdW5jdGlvbihhKXthLmZpbHRlcih0aGlzKX0sb25FbGVtZW50TmFtZTpmdW5jdGlvbihhLGMpe3JldHVybiB0aGlzLmVsZW1lbnROYW1lUnVsZXMuZXhlY09uTmFtZShhLFxuYyl9LG9uQXR0cmlidXRlTmFtZTpmdW5jdGlvbihhLGMpe3JldHVybiB0aGlzLmF0dHJpYnV0ZU5hbWVSdWxlcy5leGVjT25OYW1lKGEsYyl9LG9uVGV4dDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMudGV4dFJ1bGVzLmV4ZWMoYSxjLGQpfSxvbkNvbW1lbnQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmNvbW1lbnRSdWxlcy5leGVjKGEsYyxkKX0sb25Sb290OmZ1bmN0aW9uKGEsYyl7cmV0dXJuIHRoaXMucm9vdFJ1bGVzLmV4ZWMoYSxjKX0sb25FbGVtZW50OmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPVt0aGlzLmVsZW1lbnRzUnVsZXNbXCJeXCJdLHRoaXMuZWxlbWVudHNSdWxlc1tjLm5hbWVdLHRoaXMuZWxlbWVudHNSdWxlcy4kXSxnLGw9MDszPmw7bCsrKWlmKGc9ZFtsXSl7Zz1nLmV4ZWMoYSxjLHRoaXMpO2lmKCExPT09ZylyZXR1cm4gbnVsbDtpZihnJiZnIT1jKXJldHVybiB0aGlzLm9uTm9kZShhLGcpO2lmKGMucGFyZW50JiYhYy5uYW1lKWJyZWFrfXJldHVybiBjfSxcbm9uTm9kZTpmdW5jdGlvbihhLGMpe3ZhciBkPWMudHlwZTtyZXR1cm4gZD09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP3RoaXMub25FbGVtZW50KGEsYyk6ZD09Q0tFRElUT1IuTk9ERV9URVhUP25ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQodGhpcy5vblRleHQoYSxjLnZhbHVlKSk6ZD09Q0tFRElUT1IuTk9ERV9DT01NRU5UP25ldyBDS0VESVRPUi5odG1sUGFyc2VyLmNvbW1lbnQodGhpcy5vbkNvbW1lbnQoYSxjLnZhbHVlKSk6bnVsbH0sb25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxjLGQsZyl7cmV0dXJuKGQ9dGhpcy5hdHRyaWJ1dGVzUnVsZXNbZF0pP2QuZXhlYyhhLGcsYyx0aGlzKTpnfX19KTtDS0VESVRPUi5odG1sUGFyc2VyLmZpbHRlclJ1bGVzR3JvdXA9YTthLnByb3RvdHlwZT17YWRkOmZ1bmN0aW9uKGEsYyxkKXt0aGlzLnJ1bGVzLnNwbGljZSh0aGlzLmZpbmRJbmRleChjKSwwLHt2YWx1ZTphLHByaW9yaXR5OmMsb3B0aW9uczpkfSl9LGFkZE1hbnk6ZnVuY3Rpb24oYSxcbmMsZCl7Zm9yKHZhciBnPVt0aGlzLmZpbmRJbmRleChjKSwwXSxsPTAsaz1hLmxlbmd0aDtsPGs7bCsrKWcucHVzaCh7dmFsdWU6YVtsXSxwcmlvcml0eTpjLG9wdGlvbnM6ZH0pO3RoaXMucnVsZXMuc3BsaWNlLmFwcGx5KHRoaXMucnVsZXMsZyl9LGZpbmRJbmRleDpmdW5jdGlvbihhKXtmb3IodmFyIGM9dGhpcy5ydWxlcyxkPWMubGVuZ3RoLTE7MDw9ZCYmYTxjW2RdLnByaW9yaXR5OylkLS07cmV0dXJuIGQrMX0sZXhlYzpmdW5jdGlvbihhLGMpe3ZhciBkPWMgaW5zdGFuY2VvZiBDS0VESVRPUi5odG1sUGFyc2VyLm5vZGV8fGMgaW5zdGFuY2VvZiBDS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LGc9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGw9dGhpcy5ydWxlcyxrPWwubGVuZ3RoLG4sdyxmLHg7Zm9yKHg9MDt4PGs7eCsrKWlmKGQmJihuPWMudHlwZSx3PWMubmFtZSksZj1sW3hdLCEoYS5ub25FZGl0YWJsZSYmIWYub3B0aW9ucy5hcHBseVRvQWxsfHxcbmEubmVzdGVkRWRpdGFibGUmJmYub3B0aW9ucy5leGNsdWRlTmVzdGVkRWRpdGFibGUpKXtmPWYudmFsdWUuYXBwbHkobnVsbCxnKTtpZighMT09PWZ8fGQmJmYmJihmLm5hbWUhPXd8fGYudHlwZSE9bikpcmV0dXJuIGY7bnVsbCE9ZiYmKGdbMF09Yz1mKX1yZXR1cm4gY30sZXhlY09uTmFtZTpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZD0wLGc9dGhpcy5ydWxlcyxsPWcubGVuZ3RoLGs7YyYmZDxsO2QrKylrPWdbZF0sYS5ub25FZGl0YWJsZSYmIWsub3B0aW9ucy5hcHBseVRvQWxsfHxhLm5lc3RlZEVkaXRhYmxlJiZrLm9wdGlvbnMuZXhjbHVkZU5lc3RlZEVkaXRhYmxlfHwoYz1jLnJlcGxhY2Uoay52YWx1ZVswXSxrLnZhbHVlWzFdKSk7cmV0dXJuIGN9fX0pKCk7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZCl7ZnVuY3Rpb24gbShhKXtyZXR1cm4gYXx8Q0tFRElUT1IuZW52Lm5lZWRzTmJzcEZpbGxlcj9uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci50ZXh0KFwiwqBcIik6bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChcImJyXCIse1wiZGF0YS1ja2UtYm9ndXNcIjoxfSl9ZnVuY3Rpb24gcChhLGQpe3JldHVybiBmdW5jdGlvbihoKXtpZihoLnR5cGUhPUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpe3ZhciBlPVtdLHA9YihoKSxyLHY7aWYocClmb3IoZihwLDEpJiZlLnB1c2gocCk7cDspZyhwKSYmKHI9YyhwKSkmJmYocikmJigodj1jKHIpKSYmIWcodik/ZS5wdXNoKHIpOihtKHopLmluc2VydEFmdGVyKHIpLHIucmVtb3ZlKCkpKSxwPXAucHJldmlvdXM7Zm9yKHA9MDtwPGUubGVuZ3RoO3ArKyllW3BdLnJlbW92ZSgpO2lmKGU9IWF8fCExIT09KFwiZnVuY3Rpb25cIj09dHlwZW9mIGQ/ZChoKTpkKSl6fHxDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcnx8XG5oLnR5cGUhPUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQ/enx8Q0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXJ8fCEoNzxkb2N1bWVudC5kb2N1bWVudE1vZGV8fGgubmFtZSBpbiBDS0VESVRPUi5kdGQudHJ8fGgubmFtZSBpbiBDS0VESVRPUi5kdGQuJGxpc3RJdGVtKT8oZT1iKGgpLGU9IWV8fFwiZm9ybVwiPT1oLm5hbWUmJlwiaW5wdXRcIj09ZS5uYW1lKTplPSExOmU9ITE7ZSYmaC5hZGQobShhKSl9fX1mdW5jdGlvbiBmKGEsYil7aWYoKCF6fHxDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcikmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImJyXCI9PWEubmFtZSYmIWEuYXR0cmlidXRlc1tcImRhdGEtY2tlLWVvbFwiXSlyZXR1cm4hMDt2YXIgYztyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihjPWEudmFsdWUubWF0Y2goeSkpJiYoYy5pbmRleCYmKChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci50ZXh0KGEudmFsdWUuc3Vic3RyaW5nKDAsYy5pbmRleCkpKS5pbnNlcnRCZWZvcmUoYSksXG5hLnZhbHVlPWNbMF0pLCFDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmeiYmKCFifHxhLnBhcmVudC5uYW1lIGluIHYpfHwheiYmKChjPWEucHJldmlvdXMpJiZcImJyXCI9PWMubmFtZXx8IWN8fGcoYykpKT8hMDohMX12YXIgcj17ZWxlbWVudHM6e319LHo9XCJodG1sXCI9PWQsdj1DS0VESVRPUi50b29scy5leHRlbmQoe30saCksQztmb3IoQyBpbiB2KVwiI1wiaW4gdFtDXXx8ZGVsZXRlIHZbQ107Zm9yKEMgaW4gdilyLmVsZW1lbnRzW0NdPXAoeixhLmNvbmZpZy5maWxsRW1wdHlCbG9ja3MpO3Iucm9vdD1wKHosITEpO3IuZWxlbWVudHMuYnI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKGIucGFyZW50LnR5cGUhPUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpe3ZhciBkPWIuYXR0cmlidXRlcztpZihcImRhdGEtY2tlLWJvZ3VzXCJpbiBkfHxcImRhdGEtY2tlLWVvbFwiaW4gZClkZWxldGUgZFtcImRhdGEtY2tlLWJvZ3VzXCJdO2Vsc2V7Zm9yKGQ9Yi5uZXh0O2QmJmUoZCk7KWQ9XG5kLm5leHQ7dmFyIGg9YyhiKTshZCYmZyhiLnBhcmVudCk/bChiLnBhcmVudCxtKGEpKTpnKGQpJiZoJiYhZyhoKSYmbShhKS5pbnNlcnRCZWZvcmUoZCl9fX19KHopO3JldHVybiByfWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4gYSE9Q0tFRElUT1IuRU5URVJfQlImJiExIT09Yj9hPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIjohMX1mdW5jdGlvbiBiKGEpe2ZvcihhPWEuY2hpbGRyZW5bYS5jaGlsZHJlbi5sZW5ndGgtMV07YSYmZShhKTspYT1hLnByZXZpb3VzO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7Zm9yKGE9YS5wcmV2aW91czthJiZlKGEpOylhPWEucHJldmlvdXM7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJiFDS0VESVRPUi50b29scy50cmltKGEudmFsdWUpfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtYm9va21hcmtcIl19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gYSYmXG4oYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEubmFtZSBpbiBofHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYz1hLmNoaWxkcmVuW2EuY2hpbGRyZW4ubGVuZ3RoLTFdO2EuY2hpbGRyZW4ucHVzaChiKTtiLnBhcmVudD1hO2MmJihjLm5leHQ9YixiLnByZXZpb3VzPWMpfWZ1bmN0aW9uIGsoYSl7YT1hLmF0dHJpYnV0ZXM7XCJmYWxzZVwiIT1hLmNvbnRlbnRlZGl0YWJsZSYmKGFbXCJkYXRhLWNrZS1lZGl0YWJsZVwiXT1hLmNvbnRlbnRlZGl0YWJsZT9cInRydWVcIjoxKTthLmNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCJ9ZnVuY3Rpb24gbihhKXthPWEuYXR0cmlidXRlcztzd2l0Y2goYVtcImRhdGEtY2tlLWVkaXRhYmxlXCJdKXtjYXNlIFwidHJ1ZVwiOmEuY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiO2JyZWFrO2Nhc2UgXCIxXCI6ZGVsZXRlIGEuY29udGVudGVkaXRhYmxlfX1mdW5jdGlvbiB3KGEpe3JldHVybiBhLnJlcGxhY2UoRyxcbmZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cIlxceDNjXCIrYitjLnJlcGxhY2UoSCxmdW5jdGlvbihhLGIpe3JldHVybiBLLnRlc3QoYikmJi0xPT1jLmluZGV4T2YoXCJkYXRhLWNrZS1zYXZlZC1cIitiKT9cIiBkYXRhLWNrZS1zYXZlZC1cIithK1wiIGRhdGEtY2tlLVwiK0NLRURJVE9SLnJuZCtcIi1cIithOmF9KStcIlxceDNlXCJ9KX1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixjKXswPT09YS5pbmRleE9mKFwiXFx4M2N0ZXh0YXJlYVwiKSYmKGE9Yit1KGMpLnJlcGxhY2UoLzwvZyxcIlxceDI2bHQ7XCIpLnJlcGxhY2UoLz4vZyxcIlxceDI2Z3Q7XCIpK1wiXFx4M2MvdGV4dGFyZWFcXHgzZVwiKTtyZXR1cm5cIlxceDNjY2tlOmVuY29kZWRcXHgzZVwiK2VuY29kZVVSSUNvbXBvbmVudChhKStcIlxceDNjL2NrZTplbmNvZGVkXFx4M2VcIn0pfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGEucmVwbGFjZShRLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX0pfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS0oPyF7Y2tlX3Byb3RlY3RlZH0pW1xcc1xcU10rPy0tXFx4M2UvZyxcbmZ1bmN0aW9uKGEpe3JldHVyblwiXFx4M2MhLS1cIitGK1wie0N9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGEpLnJlcGxhY2UoLy0tL2csXCIlMkQlMkRcIikrXCItLVxceDNlXCJ9KX1mdW5jdGlvbiB1KGEpe3JldHVybiBhLnJlcGxhY2UoL1xceDNjIS0tXFx7Y2tlX3Byb3RlY3RlZFxcfVxce0NcXH0oW1xcc1xcU10rPyktLVxceDNlL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfSl9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPWIuXy5kYXRhU3RvcmU7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS1cXHtja2VfcHJvdGVjdGVkXFx9KFtcXHNcXFNdKz8pLS1cXHgzZS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX0pLnJlcGxhY2UoL1xce2NrZV9wcm90ZWN0ZWRfKFxcZCspXFx9L2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYyYmY1tiXXx8XCJcIn0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYz1bXSxkPWIuY29uZmlnLnByb3RlY3RlZFNvdXJjZSxoPWIuXy5kYXRhU3RvcmV8fChiLl8uZGF0YVN0b3JlPVxue2lkOjF9KSxlPS88XFwhLS1cXHtja2VfdGVtcChjb21tZW50KT9cXH0oXFxkKj8pLS1cXHgzZS9nLGQ9Wy88c2NyaXB0W1xcc1xcU10qPyg8XFwvc2NyaXB0PnwkKS9naSwvPG5vc2NyaXB0W1xcc1xcU10qPzxcXC9ub3NjcmlwdD4vZ2ksLzxtZXRhW1xcc1xcU10qP1xcLz8+L2dpXS5jb25jYXQoZCk7YT1hLnJlcGxhY2UoL1xceDNjIS0tW1xcc1xcU10qPy0tXFx4M2UvZyxmdW5jdGlvbihhKXtyZXR1cm5cIlxceDNjIS0te2NrZV90ZW1wY29tbWVudH1cIisoYy5wdXNoKGEpLTEpK1wiLS1cXHgzZVwifSk7Zm9yKHZhciBwPTA7cDxkLmxlbmd0aDtwKyspYT1hLnJlcGxhY2UoZFtwXSxmdW5jdGlvbihhKXthPWEucmVwbGFjZShlLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gY1tkXX0pO3JldHVybi9ja2VfdGVtcChjb21tZW50KT8vLnRlc3QoYSk/YTpcIlxceDNjIS0te2NrZV90ZW1wfVwiKyhjLnB1c2goYSktMSkrXCItLVxceDNlXCJ9KTthPWEucmVwbGFjZShlLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm5cIlxceDNjIS0tXCIrRisoYj9cIntDfVwiOlxuXCJcIikrZW5jb2RlVVJJQ29tcG9uZW50KGNbZF0pLnJlcGxhY2UoLy0tL2csXCIlMkQlMkRcIikrXCItLVxceDNlXCJ9KTthPWEucmVwbGFjZSgvPFxcdysoPzpcXHMrKD86KD86W15cXHM9Pl0rXFxzKj1cXHMqKD86W14nXCJcXHM+XSt8J1teJ10qJ3xcIlteXCJdKlwiKSl8W15cXHM9XFwvPl0rKSkrXFxzKlxcLz8+L2csZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS1cXHtja2VfcHJvdGVjdGVkXFx9KFtePl0qKS0tXFx4M2UvZyxmdW5jdGlvbihhLGIpe2hbaC5pZF09ZGVjb2RlVVJJQ29tcG9uZW50KGIpO3JldHVyblwie2NrZV9wcm90ZWN0ZWRfXCIraC5pZCsrICtcIn1cIn0pfSk7cmV0dXJuIGE9YS5yZXBsYWNlKC88KHRpdGxlfGlmcmFtZXx0ZXh0YXJlYSkoW14+XSopPihbXFxzXFxTXSo/KTxcXC9cXDE+L2csZnVuY3Rpb24oYSxjLGQsaCl7cmV0dXJuXCJcXHgzY1wiK2MrZCtcIlxceDNlXCIrQih1KGgpLGIpK1wiXFx4M2MvXCIrYytcIlxceDNlXCJ9KX1DS0VESVRPUi5odG1sRGF0YVByb2Nlc3Nvcj1mdW5jdGlvbihiKXt2YXIgYyxcbmgsZT10aGlzO3RoaXMuZWRpdG9yPWI7dGhpcy5kYXRhRmlsdGVyPWM9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZmlsdGVyO3RoaXMuaHRtbEZpbHRlcj1oPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmZpbHRlcjt0aGlzLndyaXRlcj1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5iYXNpY1dyaXRlcjtjLmFkZFJ1bGVzKHApO2MuYWRkUnVsZXMobSx7YXBwbHlUb0FsbDohMH0pO2MuYWRkUnVsZXMoYShiLFwiZGF0YVwiKSx7YXBwbHlUb0FsbDohMH0pO2guYWRkUnVsZXMoQyk7aC5hZGRSdWxlcyhyLHthcHBseVRvQWxsOiEwfSk7aC5hZGRSdWxlcyhhKGIsXCJodG1sXCIpLHthcHBseVRvQWxsOiEwfSk7Yi5vbihcInRvSHRtbFwiLGZ1bmN0aW9uKGEpe2E9YS5kYXRhO3ZhciBjPWEuZGF0YVZhbHVlLGgsYz1xKGMsYiksYz1mKGMsTSksYz13KGMpLGM9ZihjLFIpLGM9Yy5yZXBsYWNlKHYsXCIkMWNrZTokMlwiKSxjPWMucmVwbGFjZShJLFwiXFx4M2Nja2U6JDEkMlxceDNlXFx4M2MvY2tlOiQxXFx4M2VcIiksXG5jPWMucmVwbGFjZSgvKDxwcmVcXGJbXj5dKj4pKFxcclxcbnxcXG4pL2csXCIkMSQyJDJcIiksYz1jLnJlcGxhY2UoLyhbXmEtejAtOTxcXC1dKShvblxcd3szLH0pKD8hPikvZ2ksXCIkMWRhdGEtY2tlLVwiK0NLRURJVE9SLnJuZCtcIi0kMlwiKTtoPWEuY29udGV4dHx8Yi5lZGl0YWJsZSgpLmdldE5hbWUoKTt2YXIgZTtDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24mJlwicHJlXCI9PWgmJihoPVwiZGl2XCIsYz1cIlxceDNjcHJlXFx4M2VcIitjK1wiXFx4M2MvcHJlXFx4M2VcIixlPTEpO2g9Yi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGgpO2guc2V0SHRtbChcImFcIitjKTtjPWguZ2V0SHRtbCgpLnN1YnN0cigxKTtjPWMucmVwbGFjZShuZXcgUmVnRXhwKFwiZGF0YS1ja2UtXCIrQ0tFRElUT1Iucm5kK1wiLVwiLFwiaWdcIiksXCJcIik7ZSYmKGM9Yy5yZXBsYWNlKC9ePHByZT58PFxcL3ByZT4kL2dpLFwiXCIpKTtjPWMucmVwbGFjZShELFwiJDEkMlwiKTtjPXgoYyk7Yz11KGMpO2g9ITE9PT1hLmZpeEZvckJvZHk/ITE6XG5kKGEuZW50ZXJNb2RlLGIuY29uZmlnLmF1dG9QYXJhZ3JhcGgpO2M9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChjLGEuY29udGV4dCxoKTtoJiYoZT1jLCFlLmNoaWxkcmVuLmxlbmd0aCYmQ0tFRElUT1IuZHRkW2UubmFtZV1baF0mJihoPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoaCksZS5hZGQoaCkpKTthLmRhdGFWYWx1ZT1jfSxudWxsLG51bGwsNSk7Yi5vbihcInRvSHRtbFwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5maWx0ZXIuYXBwbHlUbyhhLmRhdGEuZGF0YVZhbHVlLCEwLGEuZGF0YS5kb250RmlsdGVyLGEuZGF0YS5lbnRlck1vZGUpJiZiLmZpcmUoXCJkYXRhRmlsdGVyZWRcIil9LG51bGwsbnVsbCw2KTtiLm9uKFwidG9IdG1sXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRhdGFWYWx1ZS5maWx0ZXJDaGlsZHJlbihlLmRhdGFGaWx0ZXIsITApfSxudWxsLG51bGwsMTApO2Iub24oXCJ0b0h0bWxcIixmdW5jdGlvbihhKXthPWEuZGF0YTt2YXIgYj1hLmRhdGFWYWx1ZSxcbmM9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuYmFzaWNXcml0ZXI7Yi53cml0ZUNoaWxkcmVuSHRtbChjKTtiPWMuZ2V0SHRtbCghMCk7YS5kYXRhVmFsdWU9QShiKX0sbnVsbCxudWxsLDE1KTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kYXRhLmRhdGFWYWx1ZTthLmRhdGEuZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUiYmKGM9Yy5yZXBsYWNlKC9ePGJyICpcXC8/Pi9pLFwiXCIpKTthLmRhdGEuZGF0YVZhbHVlPUNLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWwoYyxhLmRhdGEuY29udGV4dCxkKGEuZGF0YS5lbnRlck1vZGUsYi5jb25maWcuYXV0b1BhcmFncmFwaCkpfSxudWxsLG51bGwsNSk7Yi5vbihcInRvRGF0YUZvcm1hdFwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5kYXRhVmFsdWUuZmlsdGVyQ2hpbGRyZW4oZS5odG1sRmlsdGVyLCEwKX0sbnVsbCxudWxsLDEwKTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYSl7YS5kYXRhLmZpbHRlci5hcHBseVRvKGEuZGF0YS5kYXRhVmFsdWUsXG4hMSwhMCl9LG51bGwsbnVsbCwxMSk7Yi5vbihcInRvRGF0YUZvcm1hdFwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZGF0YS5kYXRhVmFsdWUsZD1lLndyaXRlcjtkLnJlc2V0KCk7Yy53cml0ZUNoaWxkcmVuSHRtbChkKTtjPWQuZ2V0SHRtbCghMCk7Yz11KGMpO2M9QihjLGIpO2EuZGF0YS5kYXRhVmFsdWU9Y30sbnVsbCxudWxsLDE1KX07Q0tFRElUT1IuaHRtbERhdGFQcm9jZXNzb3IucHJvdG90eXBlPXt0b0h0bWw6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGg9dGhpcy5lZGl0b3IsZSxwLG0sZztiJiZcIm9iamVjdFwiPT10eXBlb2YgYj8oZT1iLmNvbnRleHQsYz1iLmZpeEZvckJvZHksZD1iLmRvbnRGaWx0ZXIscD1iLmZpbHRlcixtPWIuZW50ZXJNb2RlLGc9Yi5wcm90ZWN0ZWRXaGl0ZXNwYWNlcyk6ZT1iO2V8fG51bGw9PT1lfHwoZT1oLmVkaXRhYmxlKCkuZ2V0TmFtZSgpKTtyZXR1cm4gaC5maXJlKFwidG9IdG1sXCIse2RhdGFWYWx1ZTphLGNvbnRleHQ6ZSxmaXhGb3JCb2R5OmMsZG9udEZpbHRlcjpkLFxuZmlsdGVyOnB8fGguZmlsdGVyLGVudGVyTW9kZTptfHxoLmVudGVyTW9kZSxwcm90ZWN0ZWRXaGl0ZXNwYWNlczpnfSkuZGF0YVZhbHVlfSx0b0RhdGFGb3JtYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGg7YiYmKGM9Yi5jb250ZXh0LGQ9Yi5maWx0ZXIsaD1iLmVudGVyTW9kZSk7Y3x8bnVsbD09PWN8fChjPXRoaXMuZWRpdG9yLmVkaXRhYmxlKCkuZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5lZGl0b3IuZmlyZShcInRvRGF0YUZvcm1hdFwiLHtkYXRhVmFsdWU6YSxmaWx0ZXI6ZHx8dGhpcy5lZGl0b3IuZmlsdGVyLGNvbnRleHQ6YyxlbnRlck1vZGU6aHx8dGhpcy5lZGl0b3IuZW50ZXJNb2RlfSkuZGF0YVZhbHVlfX07dmFyIHk9Lyg/OiZuYnNwO3xcXHhhMCkkLyxGPVwie2NrZV9wcm90ZWN0ZWR9XCIsdD1DS0VESVRPUi5kdGQsej1cImNhcHRpb24gY29sZ3JvdXAgY29sIHRoZWFkIHRmb290IHRib2R5XCIuc3BsaXQoXCIgXCIpLGg9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHQuJGJsb2NrTGltaXQsXG50LiRibG9jaykscD17ZWxlbWVudHM6e2lucHV0OmssdGV4dGFyZWE6a319LG09e2F0dHJpYnV0ZU5hbWVzOltbL15vbi8sXCJkYXRhLWNrZS1wYS1vblwiXSxbL15kYXRhLWNrZS1leHBhbmRvJC8sXCJcIl1dfSxDPXtlbGVtZW50czp7ZW1iZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQ7aWYoYiYmXCJvYmplY3RcIj09Yi5uYW1lKXt2YXIgYz1iLmF0dHJpYnV0ZXMud2lkdGgsYj1iLmF0dHJpYnV0ZXMuaGVpZ2h0O2MmJihhLmF0dHJpYnV0ZXMud2lkdGg9Yyk7YiYmKGEuYXR0cmlidXRlcy5oZWlnaHQ9Yil9fSxhOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYXR0cmlidXRlcztpZighKGEuY2hpbGRyZW4ubGVuZ3RofHxiLm5hbWV8fGIuaWR8fGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXNhdmVkLW5hbWVcIl0pKXJldHVybiExfX19LHI9e2VsZW1lbnROYW1lczpbWy9eY2tlOi8sXCJcIl0sWy9eXFw/eG1sOm5hbWVzcGFjZSQvLFwiXCJdXSxhdHRyaWJ1dGVOYW1lczpbWy9eZGF0YS1ja2UtKHNhdmVkfHBhKS0vLFxuXCJcIl0sWy9eZGF0YS1ja2UtLiovLFwiXCJdLFtcImhpZGVmb2N1c1wiLFwiXCJdXSxlbGVtZW50czp7JDpmdW5jdGlvbihhKXt2YXIgYj1hLmF0dHJpYnV0ZXM7aWYoYil7aWYoYltcImRhdGEtY2tlLXRlbXBcIl0pcmV0dXJuITE7Zm9yKHZhciBjPVtcIm5hbWVcIixcImhyZWZcIixcInNyY1wiXSxkLGg9MDtoPGMubGVuZ3RoO2grKylkPVwiZGF0YS1ja2Utc2F2ZWQtXCIrY1toXSxkIGluIGImJmRlbGV0ZSBiW2NbaF1dfXJldHVybiBhfSx0YWJsZTpmdW5jdGlvbihhKXthLmNoaWxkcmVuLnNsaWNlKDApLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2EudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLnR5cGU9PWEudHlwZSYmKGM9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih6LGEubmFtZSksZD1DS0VESVRPUi50b29scy5pbmRleE9mKHosYi5uYW1lKSk7LTE8YyYmLTE8ZCYmYyE9ZHx8KGM9YS5wYXJlbnQ/YS5nZXRJbmRleCgpOi0xLGQ9Yi5wYXJlbnQ/Yi5nZXRJbmRleCgpOi0xKTtyZXR1cm4gYz5kP1xuMTotMX0pfSxwYXJhbTpmdW5jdGlvbihhKXthLmNoaWxkcmVuPVtdO2EuaXNFbXB0eT0hMDtyZXR1cm4gYX0sc3BhbjpmdW5jdGlvbihhKXtcIkFwcGxlLXN0eWxlLXNwYW5cIj09YS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl0mJmRlbGV0ZSBhLm5hbWV9LGh0bWw6ZnVuY3Rpb24oYSl7ZGVsZXRlIGEuYXR0cmlidXRlcy5jb250ZW50ZWRpdGFibGU7ZGVsZXRlIGEuYXR0cmlidXRlc1tcImNsYXNzXCJdfSxib2R5OmZ1bmN0aW9uKGEpe2RlbGV0ZSBhLmF0dHJpYnV0ZXMuc3BlbGxjaGVjaztkZWxldGUgYS5hdHRyaWJ1dGVzLmNvbnRlbnRlZGl0YWJsZX0sc3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGlsZHJlblswXTtiJiZiLnZhbHVlJiYoYi52YWx1ZT1DS0VESVRPUi50b29scy50cmltKGIudmFsdWUpKTthLmF0dHJpYnV0ZXMudHlwZXx8KGEuYXR0cmlidXRlcy50eXBlPVwidGV4dC9jc3NcIil9LHRpdGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hpbGRyZW5bMF07IWImJmwoYSxiPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQpO1xuYi52YWx1ZT1hLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS10aXRsZVwiXXx8XCJcIn0saW5wdXQ6bix0ZXh0YXJlYTpufSxhdHRyaWJ1dGVzOntcImNsYXNzXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLmx0cmltKGEucmVwbGFjZSgvKD86XnxcXHMrKWNrZV9bXlxcc10qL2csXCJcIikpfHwhMX19fTtDS0VESVRPUi5lbnYuaWUmJihyLmF0dHJpYnV0ZXMuc3R5bGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvKF58OykoW15cXDpdKykvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfSl9KTt2YXIgRz0vPChhfGFyZWF8aW1nfGlucHV0fHNvdXJjZSlcXGIoW14+XSopPi9naSxIPS8oW1xcdy06XSspXFxzKj1cXHMqKD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8KD86W14gXCInPl0rKSkvZ2ksSz0vXihocmVmfHNyY3xuYW1lKSQvaSxSPS8oPzo8c3R5bGUoPz1bID5dKVtePl0qPltcXHNcXFNdKj88XFwvc3R5bGU+KXwoPzo8KDo/bGlua3xtZXRhfGJhc2UpW14+XSo+KS9naSxcbk09Lyg8dGV4dGFyZWEoPz1bID5dKVtePl0qPikoW1xcc1xcU10qPykoPzo8XFwvdGV4dGFyZWE+KS9naSxRPS88Y2tlOmVuY29kZWQ+KFtePF0qKTxcXC9ja2U6ZW5jb2RlZD4vZ2ksdj0vKDxcXC8/KSgoPzpvYmplY3R8ZW1iZWR8cGFyYW18aHRtbHxib2R5fGhlYWR8dGl0bGUpW14+XSo+KS9naSxEPS8oPFxcLz8pY2tlOigoPzpodG1sfGJvZHl8aGVhZHx0aXRsZSlbXj5dKj4pL2dpLEk9Lzxja2U6KHBhcmFtfGVtYmVkKShbXj5dKj8pXFwvPz4oPyFcXHMqPFxcL2NrZTpcXDEpL2dpfSkoKTtcInVzZSBzdHJpY3RcIjtcbkNLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudD1mdW5jdGlvbihhLGQpe3RoaXMubmFtZT1hO3RoaXMuYXR0cmlidXRlcz1kfHx7fTt0aGlzLmNoaWxkcmVuPVtdO3ZhciBiPWF8fFwiXCIsYz1iLm1hdGNoKC9eY2tlOiguKikvKTtjJiYoYj1jWzFdKTtiPSEhKENLRURJVE9SLmR0ZC4kbm9uQm9keUNvbnRlbnRbYl18fENLRURJVE9SLmR0ZC4kYmxvY2tbYl18fENLRURJVE9SLmR0ZC4kbGlzdEl0ZW1bYl18fENLRURJVE9SLmR0ZC4kdGFibGVDb250ZW50W2JdfHxDS0VESVRPUi5kdGQuJG5vbkVkaXRhYmxlW2JdfHxcImJyXCI9PWIpO3RoaXMuaXNFbXB0eT0hIUNLRURJVE9SLmR0ZC4kZW1wdHlbYV07dGhpcy5pc1Vua25vd249IUNLRURJVE9SLmR0ZFthXTt0aGlzLl89e2lzQmxvY2tMaWtlOmIsaGFzSW5saW5lU3RhcnRlZDp0aGlzLmlzRW1wdHl8fCFifX07XG5DS0VESVRPUi5odG1sUGFyc2VyLmNzc1N0eWxlPWZ1bmN0aW9uKGEpe3ZhciBkPXt9OygoYSBpbnN0YW5jZW9mIENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudD9hLmF0dHJpYnV0ZXMuc3R5bGU6YSl8fFwiXCIpLnJlcGxhY2UoLyZxdW90Oy9nLCdcIicpLnJlcGxhY2UoL1xccyooW14gOjtdKylcXHMqOlxccyooW147XSspXFxzKig/PTt8JCkvZyxmdW5jdGlvbihhLGMsZSl7XCJmb250LWZhbWlseVwiPT1jJiYoZT1lLnJlcGxhY2UoL1tcIiddL2csXCJcIikpO2RbYy50b0xvd2VyQ2FzZSgpXT1lfSk7cmV0dXJue3J1bGVzOmQscG9wdWxhdGU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy50b1N0cmluZygpO2MmJihhIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQ/YS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGMpOmEgaW5zdGFuY2VvZiBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQ/YS5hdHRyaWJ1dGVzLnN0eWxlPWM6YS5zdHlsZT1jKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1bXSxjO1xuZm9yKGMgaW4gZClkW2NdJiZhLnB1c2goYyxcIjpcIixkW2NdLFwiO1wiKTtyZXR1cm4gYS5qb2luKFwiXCIpfX19O1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoXCJzdHJpbmdcIj09dHlwZW9mIGE/Yi5uYW1lPT1hOmIubmFtZSBpbiBhKX19dmFyIGQ9ZnVuY3Rpb24oYSxiKXthPWFbMF07Yj1iWzBdO3JldHVybiBhPGI/LTE6YT5iPzE6MH0sYj1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LnByb3RvdHlwZTtDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfRUxFTUVOVCxhZGQ6Yi5hZGQsY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudCh0aGlzLm5hbWUsdGhpcy5hdHRyaWJ1dGVzKX0sZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxsLGs7Yj1kLmdldEZpbHRlckNvbnRleHQoYik7aWYoYi5vZmYpcmV0dXJuITA7XG5pZighZC5wYXJlbnQpYS5vblJvb3QoYixkKTtmb3IoOzspe2w9ZC5uYW1lO2lmKCEoaz1hLm9uRWxlbWVudE5hbWUoYixsKSkpcmV0dXJuIHRoaXMucmVtb3ZlKCksITE7ZC5uYW1lPWs7aWYoIShkPWEub25FbGVtZW50KGIsZCkpKXJldHVybiB0aGlzLnJlbW92ZSgpLCExO2lmKGQhPT10aGlzKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoKGQpLCExO2lmKGQubmFtZT09bClicmVhaztpZihkLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aChkKSwhMTtpZighZC5uYW1lKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoQ2hpbGRyZW4oKSwhMX1sPWQuYXR0cmlidXRlczt2YXIgbix3O2ZvcihuIGluIGwpe2ZvcihrPWxbbl07OylpZih3PWEub25BdHRyaWJ1dGVOYW1lKGIsbikpaWYodyE9bilkZWxldGUgbFtuXSxuPXc7ZWxzZSBicmVhaztlbHNle2RlbGV0ZSBsW25dO2JyZWFrfXcmJighMT09PShrPWEub25BdHRyaWJ1dGUoYixkLHcsaykpP2RlbGV0ZSBsW3ddOlxubFt3XT1rKX1kLmlzRW1wdHl8fHRoaXMuZmlsdGVyQ2hpbGRyZW4oYSwhMSxiKTtyZXR1cm4hMH0sZmlsdGVyQ2hpbGRyZW46Yi5maWx0ZXJDaGlsZHJlbix3cml0ZUh0bWw6ZnVuY3Rpb24oYSxiKXtiJiZ0aGlzLmZpbHRlcihiKTt2YXIgZz10aGlzLm5hbWUsbD1bXSxrPXRoaXMuYXR0cmlidXRlcyxuLHc7YS5vcGVuVGFnKGcsayk7Zm9yKG4gaW4gaylsLnB1c2goW24sa1tuXV0pO2Euc29ydEF0dHJpYnV0ZXMmJmwuc29ydChkKTtuPTA7Zm9yKHc9bC5sZW5ndGg7bjx3O24rKylrPWxbbl0sYS5hdHRyaWJ1dGUoa1swXSxrWzFdKTthLm9wZW5UYWdDbG9zZShnLHRoaXMuaXNFbXB0eSk7dGhpcy53cml0ZUNoaWxkcmVuSHRtbChhKTt0aGlzLmlzRW1wdHl8fGEuY2xvc2VUYWcoZyl9LHdyaXRlQ2hpbGRyZW5IdG1sOmIud3JpdGVDaGlsZHJlbkh0bWwscmVwbGFjZVdpdGhDaGlsZHJlbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmNoaWxkcmVuLGI9YS5sZW5ndGg7YjspYVstLWJdLmluc2VydEFmdGVyKHRoaXMpO1xudGhpcy5yZW1vdmUoKX0sZm9yRWFjaDpiLmZvckVhY2gsZ2V0Rmlyc3Q6ZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoP3RoaXMuY2hpbGRyZW5bMF06bnVsbDtcImZ1bmN0aW9uXCIhPXR5cGVvZiBiJiYoYj1hKGIpKTtmb3IodmFyIGQ9MCxnPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2Q8ZzsrK2QpaWYoYih0aGlzLmNoaWxkcmVuW2RdKSlyZXR1cm4gdGhpcy5jaGlsZHJlbltkXTtyZXR1cm4gbnVsbH0sZ2V0SHRtbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO3RoaXMud3JpdGVDaGlsZHJlbkh0bWwoYSk7cmV0dXJuIGEuZ2V0SHRtbCgpfSxzZXRIdG1sOmZ1bmN0aW9uKGEpe2E9dGhpcy5jaGlsZHJlbj1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sKGEpLmNoaWxkcmVuO2Zvcih2YXIgYj0wLGQ9YS5sZW5ndGg7YjxkOysrYilhW2JdLnBhcmVudD10aGlzfSxnZXRPdXRlckh0bWw6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO3RoaXMud3JpdGVIdG1sKGEpO3JldHVybiBhLmdldEh0bWwoKX0sc3BsaXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY2hpbGRyZW4uc3BsaWNlKGEsdGhpcy5jaGlsZHJlbi5sZW5ndGgtYSksZD10aGlzLmNsb25lKCksbD0wO2w8Yi5sZW5ndGg7KytsKWJbbF0ucGFyZW50PWQ7ZC5jaGlsZHJlbj1iO2JbMF0mJihiWzBdLnByZXZpb3VzPW51bGwpOzA8YSYmKHRoaXMuY2hpbGRyZW5bYS0xXS5uZXh0PW51bGwpO3RoaXMucGFyZW50LmFkZChkLHRoaXMuZ2V0SW5kZXgoKSsxKTtyZXR1cm4gZH0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFzQ2xhc3MoYSkpe3ZhciBiPXRoaXMuYXR0cmlidXRlc1tcImNsYXNzXCJdfHxcIlwiO3RoaXMuYXR0cmlidXRlc1tcImNsYXNzXCJdPWIrKGI/XCIgXCI6XCJcIikrYX19LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXR0cmlidXRlc1tcImNsYXNzXCJdO2ImJigoYj1cbkNLRURJVE9SLnRvb2xzLnRyaW0oYi5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoPzpcXFxccyt8XilcIithK1wiKD86XFxcXHMrfCQpXCIpLFwiIFwiKSkpP3RoaXMuYXR0cmlidXRlc1tcImNsYXNzXCJdPWI6ZGVsZXRlIHRoaXMuYXR0cmlidXRlc1tcImNsYXNzXCJdKX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl07cmV0dXJuIGI/KG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKVwiK2ErXCIoP1xceDNkXFxcXHN8JClcIikpLnRlc3QoYik6ITF9LGdldEZpbHRlckNvbnRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9W107YXx8KGE9e29mZjohMSxub25FZGl0YWJsZTohMSxuZXN0ZWRFZGl0YWJsZTohMX0pO2Eub2ZmfHxcIm9mZlwiIT10aGlzLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1wcm9jZXNzb3JcIl18fGIucHVzaChcIm9mZlwiLCEwKTthLm5vbkVkaXRhYmxlfHxcImZhbHNlXCIhPXRoaXMuYXR0cmlidXRlcy5jb250ZW50ZWRpdGFibGU/YS5ub25FZGl0YWJsZSYmIWEubmVzdGVkRWRpdGFibGUmJlxuXCJ0cnVlXCI9PXRoaXMuYXR0cmlidXRlcy5jb250ZW50ZWRpdGFibGUmJmIucHVzaChcIm5lc3RlZEVkaXRhYmxlXCIsITApOmIucHVzaChcIm5vbkVkaXRhYmxlXCIsITApO2lmKGIubGVuZ3RoKXthPUNLRURJVE9SLnRvb2xzLmNvcHkoYSk7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKz0yKWFbYltkXV09YltkKzFdfXJldHVybiBhfX0sITApfSkoKTtcbihmdW5jdGlvbigpe3ZhciBhPXt9LGQ9L3soW159XSspfS9nLGI9LyhbXFxcXCddKS9nLGM9L1xcbi9nLGU9L1xcci9nO0NLRURJVE9SLnRlbXBsYXRlPWZ1bmN0aW9uKGcpe2lmKGFbZ10pdGhpcy5vdXRwdXQ9YVtnXTtlbHNle3ZhciBsPWcucmVwbGFjZShiLFwiXFxcXCQxXCIpLnJlcGxhY2UoYyxcIlxcXFxuXCIpLnJlcGxhY2UoZSxcIlxcXFxyXCIpLnJlcGxhY2UoZCxmdW5jdGlvbihhLGIpe3JldHVyblwiJyxkYXRhWydcIitiK1wiJ11cXHgzZFxceDNkdW5kZWZpbmVkPyd7XCIrYitcIn0nOmRhdGFbJ1wiK2IrXCInXSwnXCJ9KTt0aGlzLm91dHB1dD1hW2ddPUZ1bmN0aW9uKFwiZGF0YVwiLFwiYnVmZmVyXCIsXCJyZXR1cm4gYnVmZmVyP2J1ZmZlci5wdXNoKCdcIitsK1wiJyk6WydcIitsK1wiJ10uam9pbignJyk7XCIpfX19KSgpO2RlbGV0ZSBDS0VESVRPUi5sb2FkRnVsbENvcmU7Q0tFRElUT1IuaW5zdGFuY2VzPXt9O0NLRURJVE9SLmRvY3VtZW50PW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQoZG9jdW1lbnQpO1xuQ0tFRElUT1IuYWRkPWZ1bmN0aW9uKGEpe0NLRURJVE9SLmluc3RhbmNlc1thLm5hbWVdPWE7YS5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXtDS0VESVRPUi5jdXJyZW50SW5zdGFuY2UhPWEmJihDS0VESVRPUi5jdXJyZW50SW5zdGFuY2U9YSxDS0VESVRPUi5maXJlKFwiY3VycmVudEluc3RhbmNlXCIpKX0pO2Eub24oXCJibHVyXCIsZnVuY3Rpb24oKXtDS0VESVRPUi5jdXJyZW50SW5zdGFuY2U9PWEmJihDS0VESVRPUi5jdXJyZW50SW5zdGFuY2U9bnVsbCxDS0VESVRPUi5maXJlKFwiY3VycmVudEluc3RhbmNlXCIpKX0pO0NLRURJVE9SLmZpcmUoXCJpbnN0YW5jZVwiLG51bGwsYSl9O0NLRURJVE9SLnJlbW92ZT1mdW5jdGlvbihhKXtkZWxldGUgQ0tFRElUT1IuaW5zdGFuY2VzW2EubmFtZV19O1xuKGZ1bmN0aW9uKCl7dmFyIGE9e307Q0tFRElUT1IuYWRkVGVtcGxhdGU9ZnVuY3Rpb24oZCxiKXt2YXIgYz1hW2RdO2lmKGMpcmV0dXJuIGM7Yz17bmFtZTpkLHNvdXJjZTpifTtDS0VESVRPUi5maXJlKFwidGVtcGxhdGVcIixjKTtyZXR1cm4gYVtkXT1uZXcgQ0tFRElUT1IudGVtcGxhdGUoYy5zb3VyY2UpfTtDS0VESVRPUi5nZXRUZW1wbGF0ZT1mdW5jdGlvbihkKXtyZXR1cm4gYVtkXX19KSgpOyhmdW5jdGlvbigpe3ZhciBhPVtdO0NLRURJVE9SLmFkZENzcz1mdW5jdGlvbihkKXthLnB1c2goZCl9O0NLRURJVE9SLmdldENzcz1mdW5jdGlvbigpe3JldHVybiBhLmpvaW4oXCJcXG5cIil9fSkoKTtDS0VESVRPUi5vbihcImluc3RhbmNlRGVzdHJveWVkXCIsZnVuY3Rpb24oKXtDS0VESVRPUi50b29scy5pc0VtcHR5KHRoaXMuaW5zdGFuY2VzKSYmQ0tFRElUT1IuZmlyZShcInJlc2V0XCIpfSk7Q0tFRElUT1IuVFJJU1RBVEVfT049MTtDS0VESVRPUi5UUklTVEFURV9PRkY9MjtcbkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEPTA7XG4oZnVuY3Rpb24oKXtDS0VESVRPUi5pbmxpbmU9ZnVuY3Rpb24oYSxkKXtpZighQ0tFRElUT1IuZW52LmlzQ29tcGF0aWJsZSlyZXR1cm4gbnVsbDthPUNLRURJVE9SLmRvbS5lbGVtZW50LmdldChhKTtpZihhLmdldEVkaXRvcigpKXRocm93J1RoZSBlZGl0b3IgaW5zdGFuY2UgXCInK2EuZ2V0RWRpdG9yKCkubmFtZSsnXCIgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgcHJvdmlkZWQgZWxlbWVudC4nO3ZhciBiPW5ldyBDS0VESVRPUi5lZGl0b3IoZCxhLENLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUpLGM9YS5pcyhcInRleHRhcmVhXCIpP2E6bnVsbDtjPyhiLnNldERhdGEoYy5nZXRWYWx1ZSgpLG51bGwsITApLGE9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IGNvbnRlbnRlZGl0YWJsZVxceDNkXCInKyEhYi5yZWFkT25seSsnXCIgY2xhc3NcXHgzZFwiY2tlX3RleHRhcmVhX2lubGluZVwiXFx4M2UnK2MuZ2V0VmFsdWUoKStcIlxceDNjL2RpdlxceDNlXCIsQ0tFRElUT1IuZG9jdW1lbnQpLFxuYS5pbnNlcnRBZnRlcihjKSxjLmhpZGUoKSxjLiQuZm9ybSYmYi5fYXR0YWNoVG9Gb3JtKCkpOmIuc2V0RGF0YShhLmdldEh0bWwoKSxudWxsLCEwKTtiLm9uKFwibG9hZGVkXCIsZnVuY3Rpb24oKXtiLmZpcmUoXCJ1aVJlYWR5XCIpO2IuZWRpdGFibGUoYSk7Yi5jb250YWluZXI9YTtiLnVpLmNvbnRlbnRzRWxlbWVudD1hO2Iuc2V0RGF0YShiLmdldERhdGEoMSkpO2IucmVzZXREaXJ0eSgpO2IuZmlyZShcImNvbnRlbnREb21cIik7Yi5tb2RlPVwid3lzaXd5Z1wiO2IuZmlyZShcIm1vZGVcIik7Yi5zdGF0dXM9XCJyZWFkeVwiO2IuZmlyZU9uY2UoXCJpbnN0YW5jZVJlYWR5XCIpO0NLRURJVE9SLmZpcmUoXCJpbnN0YW5jZVJlYWR5XCIsbnVsbCxiKX0sbnVsbCxudWxsLDFFNCk7Yi5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2MmJihiLmNvbnRhaW5lci5jbGVhckN1c3RvbURhdGEoKSxiLmNvbnRhaW5lci5yZW1vdmUoKSxjLnNob3coKSk7Yi5lbGVtZW50LmNsZWFyQ3VzdG9tRGF0YSgpO2RlbGV0ZSBiLmVsZW1lbnR9KTtcbnJldHVybiBifTtDS0VESVRPUi5pbmxpbmVBbGw9ZnVuY3Rpb24oKXt2YXIgYSxkLGI7Zm9yKGIgaW4gQ0tFRElUT1IuZHRkLiRlZGl0YWJsZSlmb3IodmFyIGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhiKSxlPTAsZz1jLmNvdW50KCk7ZTxnO2UrKylhPWMuZ2V0SXRlbShlKSxcInRydWVcIj09YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikmJihkPXtlbGVtZW50OmEsY29uZmlnOnt9fSwhMSE9PUNLRURJVE9SLmZpcmUoXCJpbmxpbmVcIixkKSYmQ0tFRElUT1IuaW5saW5lKGEsZC5jb25maWcpKX07Q0tFRElUT1IuZG9tUmVhZHkoZnVuY3Rpb24oKXshQ0tFRElUT1IuZGlzYWJsZUF1dG9JbmxpbmUmJkNLRURJVE9SLmlubGluZUFsbCgpfSl9KSgpO0NLRURJVE9SLnJlcGxhY2VDbGFzcz1cImNrZWRpdG9yXCI7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZSxnLGwpe2lmKCFDS0VESVRPUi5lbnYuaXNDb21wYXRpYmxlKXJldHVybiBudWxsO2E9Q0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGEpO2lmKGEuZ2V0RWRpdG9yKCkpdGhyb3cnVGhlIGVkaXRvciBpbnN0YW5jZSBcIicrYS5nZXRFZGl0b3IoKS5uYW1lKydcIiBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoZSBwcm92aWRlZCBlbGVtZW50Lic7dmFyIGs9bmV3IENLRURJVE9SLmVkaXRvcihlLGEsbCk7bD09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0UmJihhLnNldFN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLGsuXy5yZXF1aXJlZD1hLmhhc0F0dHJpYnV0ZShcInJlcXVpcmVkXCIpLGEucmVtb3ZlQXR0cmlidXRlKFwicmVxdWlyZWRcIikpO2cmJmsuc2V0RGF0YShnLG51bGwsITApO2sub24oXCJsb2FkZWRcIixmdW5jdGlvbigpe2Ioayk7bD09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0UmJmsuY29uZmlnLmF1dG9VcGRhdGVFbGVtZW50JiZcbmEuJC5mb3JtJiZrLl9hdHRhY2hUb0Zvcm0oKTtrLnNldE1vZGUoay5jb25maWcuc3RhcnR1cE1vZGUsZnVuY3Rpb24oKXtrLnJlc2V0RGlydHkoKTtrLnN0YXR1cz1cInJlYWR5XCI7ay5maXJlT25jZShcImluc3RhbmNlUmVhZHlcIik7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlUmVhZHlcIixudWxsLGspfSl9KTtrLm9uKFwiZGVzdHJveVwiLGQpO3JldHVybiBrfWZ1bmN0aW9uIGQoKXt2YXIgYT10aGlzLmNvbnRhaW5lcixiPXRoaXMuZWxlbWVudDthJiYoYS5jbGVhckN1c3RvbURhdGEoKSxhLnJlbW92ZSgpKTtiJiYoYi5jbGVhckN1c3RvbURhdGEoKSx0aGlzLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRSYmKGIuc2hvdygpLHRoaXMuXy5yZXF1aXJlZCYmYi5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLFwicmVxdWlyZWRcIikpLGRlbGV0ZSB0aGlzLmVsZW1lbnQpfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YS5uYW1lLGQ9YS5lbGVtZW50LGw9YS5lbGVtZW50TW9kZSxrPVxuYS5maXJlKFwidWlTcGFjZVwiLHtzcGFjZTpcInRvcFwiLGh0bWw6XCJcIn0pLmh0bWwsbj1hLmZpcmUoXCJ1aVNwYWNlXCIse3NwYWNlOlwiYm90dG9tXCIsaHRtbDpcIlwifSkuaHRtbCx3PW5ldyBDS0VESVRPUi50ZW1wbGF0ZSgnXFx4M2N7b3V0ZXJFbH0gaWRcXHgzZFwiY2tlX3tuYW1lfVwiIGNsYXNzXFx4M2RcIntpZH0gY2tlIGNrZV9yZXNldCBja2VfY2hyb21lIGNrZV9lZGl0b3Jfe25hbWV9IGNrZV97bGFuZ0Rpcn0gJytDS0VESVRPUi5lbnYuY3NzQ2xhc3MrJ1wiICBkaXJcXHgzZFwie2xhbmdEaXJ9XCIgbGFuZ1xceDNkXCJ7bGFuZ0NvZGV9XCIgcm9sZVxceDNkXCJhcHBsaWNhdGlvblwiJysoYS50aXRsZT8nIGFyaWEtbGFiZWxsZWRieVxceDNkXCJja2Vfe25hbWV9X2FyaWFsYmxcIic6XCJcIikrXCJcXHgzZVwiKyhhLnRpdGxlPydcXHgzY3NwYW4gaWRcXHgzZFwiY2tlX3tuYW1lfV9hcmlhbGJsXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZXt2b2ljZUxhYmVsfVxceDNjL3NwYW5cXHgzZSc6XCJcIikrJ1xceDNje291dGVyRWx9IGNsYXNzXFx4M2RcImNrZV9pbm5lciBja2VfcmVzZXRcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2V7dG9wSHRtbH1cXHgzY3tvdXRlckVsfSBpZFxceDNkXCJ7Y29udGVudElkfVwiIGNsYXNzXFx4M2RcImNrZV9jb250ZW50cyBja2VfcmVzZXRcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzYy97b3V0ZXJFbH1cXHgzZXtib3R0b21IdG1sfVxceDNjL3tvdXRlckVsfVxceDNlXFx4M2Mve291dGVyRWx9XFx4M2UnKSxcbmI9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwody5vdXRwdXQoe2lkOmEuaWQsbmFtZTpiLGxhbmdEaXI6YS5sYW5nLmRpcixsYW5nQ29kZTphLmxhbmdDb2RlLHZvaWNlTGFiZWw6YS50aXRsZSx0b3BIdG1sOms/J1xceDNjc3BhbiBpZFxceDNkXCInK2EudWkuc3BhY2VJZChcInRvcFwiKSsnXCIgY2xhc3NcXHgzZFwiY2tlX3RvcCBja2VfcmVzZXRfYWxsXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBzdHlsZVxceDNkXCJoZWlnaHQ6YXV0b1wiXFx4M2UnK2srXCJcXHgzYy9zcGFuXFx4M2VcIjpcIlwiLGNvbnRlbnRJZDphLnVpLnNwYWNlSWQoXCJjb250ZW50c1wiKSxib3R0b21IdG1sOm4/J1xceDNjc3BhbiBpZFxceDNkXCInK2EudWkuc3BhY2VJZChcImJvdHRvbVwiKSsnXCIgY2xhc3NcXHgzZFwiY2tlX2JvdHRvbSBja2VfcmVzZXRfYWxsXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlJytuK1wiXFx4M2Mvc3BhblxceDNlXCI6XCJcIixvdXRlckVsOkNLRURJVE9SLmVudi5pZT9cInNwYW5cIjpcImRpdlwifSkpO2w9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFP1xuKGQuaGlkZSgpLGIuaW5zZXJ0QWZ0ZXIoZCkpOmQuYXBwZW5kKGIpO2EuY29udGFpbmVyPWI7YS51aS5jb250ZW50c0VsZW1lbnQ9YS51aS5zcGFjZShcImNvbnRlbnRzXCIpO2smJmEudWkuc3BhY2UoXCJ0b3BcIikudW5zZWxlY3RhYmxlKCk7biYmYS51aS5zcGFjZShcImJvdHRvbVwiKS51bnNlbGVjdGFibGUoKTtkPWEuY29uZmlnLndpZHRoO2w9YS5jb25maWcuaGVpZ2h0O2QmJmIuc2V0U3R5bGUoXCJ3aWR0aFwiLENLRURJVE9SLnRvb2xzLmNzc0xlbmd0aChkKSk7bCYmYS51aS5zcGFjZShcImNvbnRlbnRzXCIpLnNldFN0eWxlKFwiaGVpZ2h0XCIsQ0tFRElUT1IudG9vbHMuY3NzTGVuZ3RoKGwpKTtiLmRpc2FibGVDb250ZXh0TWVudSgpO0NLRURJVE9SLmVudi53ZWJraXQmJmIub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7YS5mb2N1cygpfSk7YS5maXJlT25jZShcInVpUmVhZHlcIil9Q0tFRElUT1IucmVwbGFjZT1mdW5jdGlvbihiLGQpe3JldHVybiBhKGIsZCxudWxsLENLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFKX07XG5DS0VESVRPUi5hcHBlbmRUbz1mdW5jdGlvbihiLGQsZyl7cmV0dXJuIGEoYixkLGcsQ0tFRElUT1IuRUxFTUVOVF9NT0RFX0FQUEVORFRPKX07Q0tFRElUT1IucmVwbGFjZUFsbD1mdW5jdGlvbigpe2Zvcih2YXIgYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRleHRhcmVhXCIpLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGQ9bnVsbCxsPWFbYl07aWYobC5uYW1lfHxsLmlkKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdKXtpZighKG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKVwiK2FyZ3VtZW50c1swXStcIig/OiR8XFxcXHMpXCIpKS50ZXN0KGwuY2xhc3NOYW1lKSljb250aW51ZX1lbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmKGQ9e30sITE9PT1hcmd1bWVudHNbMF0obCxkKSkpY29udGludWU7dGhpcy5yZXBsYWNlKGwsZCl9fX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5hZGRNb2RlPWZ1bmN0aW9uKGEsYil7KHRoaXMuXy5tb2Rlc3x8KHRoaXMuXy5tb2Rlcz1cbnt9KSlbYV09Yn07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5zZXRNb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxsPXRoaXMuXy5tb2RlcztpZihhIT1kLm1vZGUmJmwmJmxbYV0pe2QuZmlyZShcImJlZm9yZVNldE1vZGVcIixhKTtpZihkLm1vZGUpe3ZhciBrPWQuY2hlY2tEaXJ0eSgpLGw9ZC5fLnByZXZpb3VzTW9kZURhdGEsbix3PTA7ZC5maXJlKFwiYmVmb3JlTW9kZVVubG9hZFwiKTtkLmVkaXRhYmxlKDApO2QuXy5wcmV2aW91c01vZGU9ZC5tb2RlO2QuXy5wcmV2aW91c01vZGVEYXRhPW49ZC5nZXREYXRhKDEpO1wic291cmNlXCI9PWQubW9kZSYmbD09biYmKGQuZmlyZShcImxvY2tTbmFwc2hvdFwiLHtmb3JjZVVwZGF0ZTohMH0pLHc9MSk7ZC51aS5zcGFjZShcImNvbnRlbnRzXCIpLnNldEh0bWwoXCJcIik7ZC5tb2RlPVwiXCJ9ZWxzZSBkLl8ucHJldmlvdXNNb2RlRGF0YT1kLmdldERhdGEoMSk7dGhpcy5fLm1vZGVzW2FdKGZ1bmN0aW9uKCl7ZC5tb2RlPWE7dm9pZCAwIT09ayYmIWsmJlxuZC5yZXNldERpcnR5KCk7dz9kLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKTpcInd5c2l3eWdcIj09YSYmZC5maXJlKFwic2F2ZVNuYXBzaG90XCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtkLmZpcmUoXCJtb2RlXCIpO2ImJmIuY2FsbChkKX0sMCl9KX19O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGEsYixkLGwpe3ZhciBrPXRoaXMuY29udGFpbmVyLG49dGhpcy51aS5zcGFjZShcImNvbnRlbnRzXCIpLHc9Q0tFRElUT1IuZW52LndlYmtpdCYmdGhpcy5kb2N1bWVudCYmdGhpcy5kb2N1bWVudC5nZXRXaW5kb3coKS4kLmZyYW1lRWxlbWVudDtsPWw/dGhpcy5jb250YWluZXIuZ2V0Rmlyc3QoZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmhhc0NsYXNzKFwiY2tlX2lubmVyXCIpfSk6aztsLnNldFNpemUoXCJ3aWR0aFwiLGEsITApO3cmJih3LnN0eWxlLndpZHRoPVwiMSVcIik7dmFyIGY9KGwuJC5vZmZzZXRIZWlnaHR8fDApLShuLiQuY2xpZW50SGVpZ2h0fHxcbjApLGs9TWF0aC5tYXgoYi0oZD8wOmYpLDApO2I9ZD9iK2Y6YjtuLnNldFN0eWxlKFwiaGVpZ2h0XCIsaytcInB4XCIpO3cmJih3LnN0eWxlLndpZHRoPVwiMTAwJVwiKTt0aGlzLmZpcmUoXCJyZXNpemVcIix7b3V0ZXJIZWlnaHQ6Yixjb250ZW50c0hlaWdodDprLG91dGVyV2lkdGg6YXx8bC5nZXRTaXplKFwid2lkdGhcIil9KX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5nZXRSZXNpemFibGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy51aS5zcGFjZShcImNvbnRlbnRzXCIpOnRoaXMuY29udGFpbmVyfTtDS0VESVRPUi5kb21SZWFkeShmdW5jdGlvbigpe0NLRURJVE9SLnJlcGxhY2VDbGFzcyYmQ0tFRElUT1IucmVwbGFjZUFsbChDS0VESVRPUi5yZXBsYWNlQ2xhc3MpfSl9KSgpO0NLRURJVE9SLmNvbmZpZy5zdGFydHVwTW9kZT1cInd5c2l3eWdcIjtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9YS5lZGl0b3IsZT1hLmRhdGEucGF0aCxtPWUuYmxvY2tMaW1pdCxmPWEuZGF0YS5zZWxlY3Rpb24scj1mLmdldFJhbmdlcygpWzBdLGc7aWYoQ0tFRElUT1IuZW52LmdlY2tvfHxDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyKWlmKGY9ZChmLGUpKWYuYXBwZW5kQm9ndXMoKSxnPUNLRURJVE9SLmVudi5pZTtsKGIsZS5ibG9jayxtKSYmci5jb2xsYXBzZWQmJiFyLmdldENvbW1vbkFuY2VzdG9yKCkuaXNSZWFkT25seSgpJiYoZT1yLmNsb25lKCksZS5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFMpLG09bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZSksbS5ndWFyZD1mdW5jdGlvbihhKXtyZXR1cm4hYyhhKXx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0NPTU1FTlR8fGEuaXNSZWFkT25seSgpfSwhbS5jaGVja0ZvcndhcmQoKXx8ZS5jaGVja1N0YXJ0T2ZCbG9jaygpJiZlLmNoZWNrRW5kT2ZCbG9jaygpKSYmXG4oYj1yLmZpeEJsb2NrKCEwLGIuYWN0aXZlRW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIiksQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXJ8fChiPWIuZ2V0Rmlyc3QoYykpJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmQ0tFRElUT1IudG9vbHMudHJpbShiLmdldFRleHQoKSkubWF0Y2goL14oPzombmJzcDt8XFx4YTApJC8pJiZiLnJlbW92ZSgpLGc9MSxhLmNhbmNlbCgpKTtnJiZyLnNlbGVjdCgpfWZ1bmN0aW9uIGQoYSxiKXtpZihhLmlzRmFrZSlyZXR1cm4gMDt2YXIgZD1iLmJsb2NrfHxiLmJsb2NrTGltaXQsZT1kJiZkLmdldExhc3QoYyk7aWYoISghZHx8IWQuaXNCbG9ja0JvdW5kYXJ5KCl8fGUmJmUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZlLmlzQmxvY2tCb3VuZGFyeSgpfHxkLmlzKFwicHJlXCIpfHxkLmdldEJvZ3VzKCkpKXJldHVybiBkfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YS5kYXRhLmdldFRhcmdldCgpO2IuaXMoXCJpbnB1dFwiKSYmXG4oYj1iLmdldEF0dHJpYnV0ZShcInR5cGVcIiksXCJzdWJtaXRcIiE9YiYmXCJyZXNldFwiIT1ifHxhLmRhdGEucHJldmVudERlZmF1bHQoKSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZihhKSYmeChhKX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWMuZGF0YS4kLnRvRWxlbWVudHx8Yy5kYXRhLiQuZnJvbUVsZW1lbnR8fGMuZGF0YS4kLnJlbGF0ZWRUYXJnZXQ7KGQ9ZCYmZC5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChkKTpudWxsKSYmKGIuZXF1YWxzKGQpfHxiLmNvbnRhaW5zKGQpKXx8YS5jYWxsKHRoaXMsYyl9fWZ1bmN0aW9uIGcoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZnVuY3Rpb24oYixoKXtoJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5pcyhmKSYmKGQ9Yik7aWYoIShofHwhYyhiKXx8YSYmdShiKSkpcmV0dXJuITF9fXZhciBkLGU9YS5nZXRSYW5nZXMoKVswXTthPWEucm9vdDtcbnZhciBmPXt0YWJsZToxLHVsOjEsb2w6MSxkbDoxfTtpZihlLnN0YXJ0UGF0aCgpLmNvbnRhaW5zKGYpKXt2YXIgcj1lLmNsb25lKCk7ci5jb2xsYXBzZSgxKTtyLnNldFN0YXJ0QXQoYSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7YT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihyKTthLmd1YXJkPWIoKTthLmNoZWNrQmFja3dhcmQoKTtpZihkKXJldHVybiByPWUuY2xvbmUoKSxyLmNvbGxhcHNlKCksci5zZXRFbmRBdChkLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksYT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihyKSxhLmd1YXJkPWIoITApLGQ9ITEsYS5jaGVja0ZvcndhcmQoKSxkfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiLGMpe3JldHVybiExIT09YS5jb25maWcuYXV0b1BhcmFncmFwaCYmYS5hY3RpdmVFbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoYS5lZGl0YWJsZSgpLmVxdWFscyhjKSYmIWJ8fGImJlwidHJ1ZVwiPT1iLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSl9XG5mdW5jdGlvbiBrKGEpe3JldHVybiBhLmFjdGl2ZUVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfQlImJiExIT09YS5jb25maWcuYXV0b1BhcmFncmFwaD9hLmFjdGl2ZUVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCI6ITF9ZnVuY3Rpb24gbihhKXt2YXIgYj1hLmVkaXRvcjtiLmdldFNlbGVjdGlvbigpLnNjcm9sbEludG9WaWV3KCk7c2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sMCl9ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQ9YS5nZXRDb21tb25BbmNlc3RvcihiKTtmb3IoYj1hPWM/YjphOyhhPWEuZ2V0UGFyZW50KCkpJiYhZC5lcXVhbHMoYSkmJjE9PWEuZ2V0Q2hpbGRDb3VudCgpOyliPWE7Yi5yZW1vdmUoKX1DS0VESVRPUi5lZGl0YWJsZT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5kb20uZWxlbWVudCwkOmZ1bmN0aW9uKGEsYil7dGhpcy5iYXNlKGIuJHx8Yik7dGhpcy5lZGl0b3I9YTtcbnRoaXMuc3RhdHVzPVwidW5sb2FkZWRcIjt0aGlzLmhhc0ZvY3VzPSExO3RoaXMuc2V0dXAoKX0scHJvdG86e2ZvY3VzOmZ1bmN0aW9uKCl7dmFyIGE7aWYoQ0tFRElUT1IuZW52LndlYmtpdCYmIXRoaXMuaGFzRm9jdXMmJihhPXRoaXMuZWRpdG9yLl8ucHJldmlvdXNBY3RpdmV8fHRoaXMuZ2V0RG9jdW1lbnQoKS5nZXRBY3RpdmUoKSx0aGlzLmNvbnRhaW5zKGEpKSl7YS5mb2N1cygpO3JldHVybn10cnl7dGhpcy4kW0NLRURJVE9SLmVudi5pZSYmdGhpcy5nZXREb2N1bWVudCgpLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudCk/XCJzZXRBY3RpdmVcIjpcImZvY3VzXCJdKCl9Y2F0Y2goYil7aWYoIUNLRURJVE9SLmVudi5pZSl0aHJvdyBiO31DS0VESVRPUi5lbnYuc2FmYXJpJiYhdGhpcy5pc0lubGluZSgpJiYoYT1DS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKSxhLmVxdWFscyh0aGlzLmdldFdpbmRvdygpLmdldEZyYW1lKCkpfHx0aGlzLmdldFdpbmRvdygpLmZvY3VzKCkpfSxvbjpmdW5jdGlvbihhLFxuYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO0NLRURJVE9SLmVudi5pZSYmL15mb2N1c3xibHVyJC8uZXhlYyhhKSYmKGE9XCJmb2N1c1wiPT1hP1wiZm9jdXNpblwiOlwiZm9jdXNvdXRcIixiPWUoYix0aGlzKSxjWzBdPWEsY1sxXT1iKTtyZXR1cm4gQ0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLm9uLmFwcGx5KHRoaXMsYyl9LGF0dGFjaExpc3RlbmVyOmZ1bmN0aW9uKGEpeyF0aGlzLl8ubGlzdGVuZXJzJiYodGhpcy5fLmxpc3RlbmVycz1bXSk7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGI9YS5vbi5hcHBseShhLGIpO3RoaXMuXy5saXN0ZW5lcnMucHVzaChiKTtyZXR1cm4gYn0sY2xlYXJMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8ubGlzdGVuZXJzO3RyeXtmb3IoO2EubGVuZ3RoOylhLnBvcCgpLnJlbW92ZUxpc3RlbmVyKCl9Y2F0Y2goYil7fX0scmVzdG9yZUF0dHJzOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLl8uYXR0ckNoYW5nZXMsYixjO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGI9YVtjXSxudWxsIT09Yj90aGlzLnNldEF0dHJpYnV0ZShjLGIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKGMpKX0sYXR0YWNoQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRDdXN0b21EYXRhKFwiY2xhc3Nlc1wiKTt0aGlzLmhhc0NsYXNzKGEpfHwoIWImJihiPVtdKSxiLnB1c2goYSksdGhpcy5zZXRDdXN0b21EYXRhKFwiY2xhc3Nlc1wiLGIpLHRoaXMuYWRkQ2xhc3MoYSkpfSxjaGFuZ2VBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7YiE9PWMmJighdGhpcy5fLmF0dHJDaGFuZ2VzJiYodGhpcy5fLmF0dHJDaGFuZ2VzPXt9KSxhIGluIHRoaXMuXy5hdHRyQ2hhbmdlc3x8KHRoaXMuXy5hdHRyQ2hhbmdlc1thXT1jKSx0aGlzLnNldEF0dHJpYnV0ZShhLGIpKX0saW5zZXJ0VGV4dDpmdW5jdGlvbihhKXt0aGlzLmVkaXRvci5mb2N1cygpO3RoaXMuaW5zZXJ0SHRtbCh0aGlzLnRyYW5zZm9ybVBsYWluVGV4dFRvSHRtbChhKSxcblwidGV4dFwiKX0sdHJhbnNmb3JtUGxhaW5UZXh0VG9IdG1sOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0RWxlbWVudCgpLmhhc0FzY2VuZGFudChcInByZVwiLCEwKT9DS0VESVRPUi5FTlRFUl9CUjp0aGlzLmVkaXRvci5hY3RpdmVFbnRlck1vZGU7cmV0dXJuIENLRURJVE9SLnRvb2xzLnRyYW5zZm9ybVBsYWluVGV4dFRvSHRtbChhLGIpfSxpbnNlcnRIdG1sOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmVkaXRvcjtkLmZvY3VzKCk7ZC5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2N8fChjPWQuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKClbMF0pO3EodGhpcyxifHxcImh0bWxcIixhLGMpO2Muc2VsZWN0KCk7bih0aGlzKTt0aGlzLmVkaXRvci5maXJlKFwiYWZ0ZXJJbnNlcnRIdG1sXCIse30pfSxpbnNlcnRIdG1sSW50b1JhbmdlOmZ1bmN0aW9uKGEsYixjKXtxKHRoaXMsY3x8XCJodG1sXCIsYSxiKTt0aGlzLmVkaXRvci5maXJlKFwiYWZ0ZXJJbnNlcnRIdG1sXCIsXG57aW50b1JhbmdlOmJ9KX0saW5zZXJ0RWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZWRpdG9yO2QuZm9jdXMoKTtkLmZpcmUoXCJzYXZlU25hcHNob3RcIik7dmFyIGU9ZC5hY3RpdmVFbnRlck1vZGUsZD1kLmdldFNlbGVjdGlvbigpLGY9YS5nZXROYW1lKCksZj1DS0VESVRPUi5kdGQuJGJsb2NrW2ZdO2J8fChiPWQuZ2V0UmFuZ2VzKClbMF0pO3RoaXMuaW5zZXJ0RWxlbWVudEludG9SYW5nZShhLGIpJiYoYi5tb3ZlVG9Qb3NpdGlvbihhLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksZiYmKChmPWEuZ2V0TmV4dChmdW5jdGlvbihhKXtyZXR1cm4gYyhhKSYmIXUoYSl9KSkmJmYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZmLmlzKENLRURJVE9SLmR0ZC4kYmxvY2spP2YuZ2V0RHRkKClbXCIjXCJdP2IubW92ZVRvRWxlbWVudEVkaXRTdGFydChmKTpiLm1vdmVUb0VsZW1lbnRFZGl0RW5kKGEpOmZ8fGU9PUNLRURJVE9SLkVOVEVSX0JSfHwoZj1iLmZpeEJsb2NrKCEwLFxuZT09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCIpLGIubW92ZVRvRWxlbWVudEVkaXRTdGFydChmKSkpKTtkLnNlbGVjdFJhbmdlcyhbYl0pO24odGhpcyl9LGluc2VydEVsZW1lbnRJbnRvU2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0RWxlbWVudChhKX0saW5zZXJ0RWxlbWVudEludG9SYW5nZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWRpdG9yLGQ9Yy5jb25maWcuZW50ZXJNb2RlLGU9YS5nZXROYW1lKCksZj1DS0VESVRPUi5kdGQuJGJsb2NrW2VdO2lmKGIuY2hlY2tSZWFkT25seSgpKXJldHVybiExO2IuZGVsZXRlQ29udGVudHMoMSk7Yi5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuc3RhcnRDb250YWluZXIuaXMoe3RyOjEsdGFibGU6MSx0Ym9keToxLHRoZWFkOjEsdGZvb3Q6MX0pJiZ5KGIpO3ZhciBnLGw7aWYoZilmb3IoOyhnPWIuZ2V0Q29tbW9uQW5jZXN0b3IoMCwxKSkmJihsPUNLRURJVE9SLmR0ZFtnLmdldE5hbWUoKV0pJiZcbighbHx8IWxbZV0pOylnLmdldE5hbWUoKWluIENLRURJVE9SLmR0ZC5zcGFuP2Iuc3BsaXRFbGVtZW50KGcpOmIuY2hlY2tTdGFydE9mQmxvY2soKSYmYi5jaGVja0VuZE9mQmxvY2soKT8oYi5zZXRTdGFydEJlZm9yZShnKSxiLmNvbGxhcHNlKCEwKSxnLnJlbW92ZSgpKTpiLnNwbGl0QmxvY2soZD09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCIsYy5lZGl0YWJsZSgpKTtiLmluc2VydE5vZGUoYSk7cmV0dXJuITB9LHNldERhdGE6ZnVuY3Rpb24oYSxiKXtifHwoYT10aGlzLmVkaXRvci5kYXRhUHJvY2Vzc29yLnRvSHRtbChhKSk7dGhpcy5zZXRIdG1sKGEpO3RoaXMuZml4SW5pdGlhbFNlbGVjdGlvbigpO1widW5sb2FkZWRcIj09dGhpcy5zdGF0dXMmJih0aGlzLnN0YXR1cz1cInJlYWR5XCIpO3RoaXMuZWRpdG9yLmZpcmUoXCJkYXRhUmVhZHlcIil9LGdldERhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRIdG1sKCk7YXx8KGI9dGhpcy5lZGl0b3IuZGF0YVByb2Nlc3Nvci50b0RhdGFGb3JtYXQoYikpO1xucmV0dXJuIGJ9LHNldFJlYWRPbmx5OmZ1bmN0aW9uKGEpe3RoaXMuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIWEpfSxkZXRhY2g6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNsYXNzKFwiY2tlX2VkaXRhYmxlXCIpO3RoaXMuc3RhdHVzPVwiZGV0YWNoZWRcIjt2YXIgYT10aGlzLmVkaXRvcjt0aGlzLl8uZGV0YWNoKCk7ZGVsZXRlIGEuZG9jdW1lbnQ7ZGVsZXRlIGEud2luZG93fSxpc0lubGluZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERvY3VtZW50KCkuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50KX0sZml4SW5pdGlhbFNlbGVjdGlvbjpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgYj1jLmdldERvY3VtZW50KCkuJCxkPWIuZ2V0U2VsZWN0aW9uKCksaDthOmlmKGQuYW5jaG9yTm9kZSYmZC5hbmNob3JOb2RlPT1jLiQpaD0hMDtlbHNle2lmKENLRURJVE9SLmVudi53ZWJraXQmJihoPWMuZ2V0RG9jdW1lbnQoKS5nZXRBY3RpdmUoKSkmJmguZXF1YWxzKGMpJiYhZC5hbmNob3JOb2RlKXtoPVxuITA7YnJlYWsgYX1oPXZvaWQgMH1oJiYoaD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGMpLGgubW92ZVRvRWxlbWVudEVkaXRTdGFydChjKSxiPWIuY3JlYXRlUmFuZ2UoKSxiLnNldFN0YXJ0KGguc3RhcnRDb250YWluZXIuJCxoLnN0YXJ0T2Zmc2V0KSxiLmNvbGxhcHNlKCEwKSxkLnJlbW92ZUFsbFJhbmdlcygpLGQuYWRkUmFuZ2UoYikpfWZ1bmN0aW9uIGIoKXt2YXIgYT1jLmdldERvY3VtZW50KCkuJCxkPWEuc2VsZWN0aW9uLGg9Yy5nZXREb2N1bWVudCgpLmdldEFjdGl2ZSgpO1wiTm9uZVwiPT1kLnR5cGUmJmguZXF1YWxzKGMpJiYoZD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGMpLGE9YS5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpLGQubW92ZVRvRWxlbWVudEVkaXRTdGFydChjKSxkPWQuc3RhcnRDb250YWluZXIsZC50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihkPWQuZ2V0UGFyZW50KCkpLGEubW92ZVRvRWxlbWVudFRleHQoZC4kKSxhLmNvbGxhcHNlKCEwKSxhLnNlbGVjdCgpKX1cbnZhciBjPXRoaXM7aWYoQ0tFRElUT1IuZW52LmllJiYoOT5DS0VESVRPUi5lbnYudmVyc2lvbnx8Q0tFRElUT1IuZW52LnF1aXJrcykpdGhpcy5oYXNGb2N1cyYmKHRoaXMuZm9jdXMoKSxiKCkpO2Vsc2UgaWYodGhpcy5oYXNGb2N1cyl0aGlzLmZvY3VzKCksYSgpO2Vsc2UgdGhpcy5vbmNlKFwiZm9jdXNcIixmdW5jdGlvbigpe2EoKX0sbnVsbCxudWxsLC05OTkpfSxnZXRIdG1sRnJvbVJhbmdlOmZ1bmN0aW9uKGEpe2lmKGEuY29sbGFwc2VkKXJldHVybiBuZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoYS5kb2N1bWVudCk7YT17ZG9jOnRoaXMuZ2V0RG9jdW1lbnQoKSxyYW5nZTphLmNsb25lKCl9O0YuZW9sLmRldGVjdChhLHRoaXMpO0YuYm9ndXMuZXhjbHVkZShhKTtGLmNlbGwuc2hyaW5rKGEpO2EuZnJhZ21lbnQ9YS5yYW5nZS5jbG9uZUNvbnRlbnRzKCk7Ri50cmVlLnJlYnVpbGQoYSx0aGlzKTtGLmVvbC5maXgoYSx0aGlzKTtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KGEuZnJhZ21lbnQuJCl9LFxuZXh0cmFjdEh0bWxGcm9tUmFuZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10LGQ9e3JhbmdlOmEsZG9jOmEuZG9jdW1lbnR9LGU9dGhpcy5nZXRIdG1sRnJvbVJhbmdlKGEpO2lmKGEuY29sbGFwc2VkKXJldHVybiBhLm9wdGltaXplKCksZTthLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9JTkxJTkUsMSk7Yy50YWJsZS5kZXRlY3RQdXJnZShkKTtkLmJvb2ttYXJrPWEuY3JlYXRlQm9va21hcmsoKTtkZWxldGUgZC5yYW5nZTt2YXIgZj10aGlzLmVkaXRvci5jcmVhdGVSYW5nZSgpO2YubW92ZVRvUG9zaXRpb24oZC5ib29rbWFyay5zdGFydE5vZGUsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtkLnRhcmdldEJvb2ttYXJrPWYuY3JlYXRlQm9va21hcmsoKTtjLmxpc3QuZGV0ZWN0TWVyZ2UoZCx0aGlzKTtjLnRhYmxlLmRldGVjdFJhbmdlcyhkLHRoaXMpO2MuYmxvY2suZGV0ZWN0TWVyZ2UoZCx0aGlzKTtkLnRhYmxlQ29udGVudHNSYW5nZXM/KGMudGFibGUuZGVsZXRlUmFuZ2VzKGQpLFxuYS5tb3ZlVG9Cb29rbWFyayhkLmJvb2ttYXJrKSxkLnJhbmdlPWEpOihhLm1vdmVUb0Jvb2ttYXJrKGQuYm9va21hcmspLGQucmFuZ2U9YSxhLmV4dHJhY3RDb250ZW50cyhjLmRldGVjdEV4dHJhY3RNZXJnZShkKSkpO2EubW92ZVRvQm9va21hcmsoZC50YXJnZXRCb29rbWFyayk7YS5vcHRpbWl6ZSgpO2MuZml4VW5lZGl0YWJsZVJhbmdlUG9zaXRpb24oYSk7Yy5saXN0Lm1lcmdlKGQsdGhpcyk7Yy50YWJsZS5wdXJnZShkLHRoaXMpO2MuYmxvY2subWVyZ2UoZCx0aGlzKTtpZihiKXtjPWEuc3RhcnRQYXRoKCk7aWYoZD1hLmNoZWNrU3RhcnRPZkJsb2NrKCkmJmEuY2hlY2tFbmRPZkJsb2NrKCkmJmMuYmxvY2smJiFhLnJvb3QuZXF1YWxzKGMuYmxvY2spKXthOnt2YXIgZD1jLmJsb2NrLmdldEVsZW1lbnRzQnlUYWcoXCJzcGFuXCIpLGY9MCxnO2lmKGQpZm9yKDtnPWQuZ2V0SXRlbShmKyspOylpZigheChnKSl7ZD0hMDticmVhayBhfWQ9ITF9ZD0hZH1kJiYoYS5tb3ZlVG9Qb3NpdGlvbihjLmJsb2NrLFxuQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxjLmJsb2NrLnJlbW92ZSgpKX1lbHNlIGMuYXV0b1BhcmFncmFwaCh0aGlzLmVkaXRvcixhKSxBKGEuc3RhcnRDb250YWluZXIpJiZhLnN0YXJ0Q29udGFpbmVyLmFwcGVuZEJvZ3VzKCk7YS5zdGFydENvbnRhaW5lci5tZXJnZVNpYmxpbmdzKCk7cmV0dXJuIGV9LHNldHVwOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3I7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiYmVmb3JlR2V0RGF0YVwiLGZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXREYXRhKCk7dGhpcy5pcyhcInRleHRhcmVhXCIpfHwhMSE9PWEuY29uZmlnLmlnbm9yZUVtcHR5UGFyYWdyYXBoJiYoYj1iLnJlcGxhY2UoQixmdW5jdGlvbihhLGIpe3JldHVybiBifSkpO2Euc2V0RGF0YShiLG51bGwsMSl9LHRoaXMpO3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImdldFNuYXBzaG90XCIsZnVuY3Rpb24oYSl7YS5kYXRhPXRoaXMuZ2V0RGF0YSgxKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFxuXCJhZnRlclNldERhdGFcIixmdW5jdGlvbigpe3RoaXMuc2V0RGF0YShhLmdldERhdGEoMSkpfSx0aGlzKTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJsb2FkU25hcHNob3RcIixmdW5jdGlvbihhKXt0aGlzLnNldERhdGEoYS5kYXRhLDEpfSx0aGlzKTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVGb2N1c1wiLGZ1bmN0aW9uKCl7dmFyIGI9YS5nZXRTZWxlY3Rpb24oKTsoYj1iJiZiLmdldE5hdGl2ZSgpKSYmXCJDb250cm9sXCI9PWIudHlwZXx8dGhpcy5mb2N1cygpfSx0aGlzKTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJpbnNlcnRIdG1sXCIsZnVuY3Rpb24oYSl7dGhpcy5pbnNlcnRIdG1sKGEuZGF0YS5kYXRhVmFsdWUsYS5kYXRhLm1vZGUsYS5kYXRhLnJhbmdlKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiaW5zZXJ0RWxlbWVudFwiLGZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0RWxlbWVudChhLmRhdGEpfSx0aGlzKTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJpbnNlcnRUZXh0XCIsXG5mdW5jdGlvbihhKXt0aGlzLmluc2VydFRleHQoYS5kYXRhKX0sdGhpcyk7dGhpcy5zZXRSZWFkT25seShhLnJlYWRPbmx5KTt0aGlzLmF0dGFjaENsYXNzKFwiY2tlX2VkaXRhYmxlXCIpO2EuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/dGhpcy5hdHRhY2hDbGFzcyhcImNrZV9lZGl0YWJsZV9pbmxpbmVcIik6YS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0UmJmEuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUT3x8dGhpcy5hdHRhY2hDbGFzcyhcImNrZV9lZGl0YWJsZV90aGVtZWRcIik7dGhpcy5hdHRhY2hDbGFzcyhcImNrZV9jb250ZW50c19cIithLmNvbmZpZy5jb250ZW50c0xhbmdEaXJlY3Rpb24pO2Eua2V5c3Ryb2tlSGFuZGxlci5ibG9ja2VkS2V5c3Ryb2tlc1s4XT0rYS5yZWFkT25seTthLmtleXN0cm9rZUhhbmRsZXIuYXR0YWNoKHRoaXMpO3RoaXMub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0aGlzLmhhc0ZvY3VzPVxuITF9LG51bGwsbnVsbCwtMSk7dGhpcy5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXt0aGlzLmhhc0ZvY3VzPSEwfSxudWxsLG51bGwsLTEpO2EuZm9jdXNNYW5hZ2VyLmFkZCh0aGlzKTt0aGlzLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKSkmJih0aGlzLmhhc0ZvY3VzPSEwLGEub25jZShcImNvbnRlbnREb21cIixmdW5jdGlvbigpe2EuZm9jdXNNYW5hZ2VyLmZvY3VzKHRoaXMpfSx0aGlzKSk7dGhpcy5pc0lubGluZSgpJiZ0aGlzLmNoYW5nZUF0dHIoXCJ0YWJpbmRleFwiLGEudGFiSW5kZXgpO2lmKCF0aGlzLmlzKFwidGV4dGFyZWFcIikpe2EuZG9jdW1lbnQ9dGhpcy5nZXREb2N1bWVudCgpO2Eud2luZG93PXRoaXMuZ2V0V2luZG93KCk7dmFyIGQ9YS5kb2N1bWVudDt0aGlzLmNoYW5nZUF0dHIoXCJzcGVsbGNoZWNrXCIsIWEuY29uZmlnLmRpc2FibGVOYXRpdmVTcGVsbENoZWNrZXIpO3ZhciBlPWEuY29uZmlnLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbjt0aGlzLmdldERpcmVjdGlvbigxKSE9XG5lJiZ0aGlzLmNoYW5nZUF0dHIoXCJkaXJcIixlKTt2YXIgbT1DS0VESVRPUi5nZXRDc3MoKTttJiYoZT1kLmdldEhlYWQoKSxlLmdldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0XCIpfHwobT1kLmFwcGVuZFN0eWxlVGV4dChtKSxtPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChtLm93bmVyTm9kZXx8bS5vd25pbmdFbGVtZW50KSxlLnNldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0XCIsbSksbS5kYXRhKFwiY2tlLXRlbXBcIiwxKSkpO2U9ZC5nZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldF9yZWZcIil8fDA7ZC5zZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldF9yZWZcIixlKzEpO3RoaXMuc2V0Q3VzdG9tRGF0YShcImNrZV9pbmNsdWRlUmVhZG9ubHlcIiwhYS5jb25maWcuZGlzYWJsZVJlYWRvbmx5U3R5bGluZyk7dGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwiY2xpY2tcIixmdW5jdGlvbihhKXthPWEuZGF0YTt2YXIgYj0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChhLmdldFRhcmdldCgpLHRoaXMpKS5jb250YWlucyhcImFcIik7XG5iJiYyIT1hLiQuYnV0dG9uJiZiLmlzUmVhZE9ubHkoKSYmYS5wcmV2ZW50RGVmYXVsdCgpfSk7dmFyIGw9ezg6MSw0NjoxfTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJrZXlcIixmdW5jdGlvbihiKXtpZihhLnJlYWRPbmx5KXJldHVybiEwO3ZhciBjPWIuZGF0YS5kb21FdmVudC5nZXRLZXkoKSxkO2lmKGMgaW4gbCl7Yj1hLmdldFNlbGVjdGlvbigpO3ZhciBoLGU9Yi5nZXRSYW5nZXMoKVswXSxtPWUuc3RhcnRQYXRoKCkscCx2LGssYz04PT1jO0NLRURJVE9SLmVudi5pZSYmMTE+Q0tFRElUT1IuZW52LnZlcnNpb24mJihoPWIuZ2V0U2VsZWN0ZWRFbGVtZW50KCkpfHwoaD1nKGIpKT8oYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLGUubW92ZVRvUG9zaXRpb24oaCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGgucmVtb3ZlKCksZS5zZWxlY3QoKSxhLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZD0xKTplLmNvbGxhcHNlZCYmKChwPW0uYmxvY2spJiYoaz1wW2M/XCJnZXRQcmV2aW91c1wiOlxuXCJnZXROZXh0XCJdKGYpKSYmay50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmsuaXMoXCJ0YWJsZVwiKSYmZVtjP1wiY2hlY2tTdGFydE9mQmxvY2tcIjpcImNoZWNrRW5kT2ZCbG9ja1wiXSgpPyhhLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZVtjP1wiY2hlY2tFbmRPZkJsb2NrXCI6XCJjaGVja1N0YXJ0T2ZCbG9ja1wiXSgpJiZwLnJlbW92ZSgpLGVbXCJtb3ZlVG9FbGVtZW50RWRpdFwiKyhjP1wiRW5kXCI6XCJTdGFydFwiKV0oayksZS5zZWxlY3QoKSxhLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZD0xKTptLmJsb2NrTGltaXQmJm0uYmxvY2tMaW1pdC5pcyhcInRkXCIpJiYodj1tLmJsb2NrTGltaXQuZ2V0QXNjZW5kYW50KFwidGFibGVcIikpJiZlLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQodixjP0NLRURJVE9SLlNUQVJUOkNLRURJVE9SLkVORCkmJihrPXZbYz9cImdldFByZXZpb3VzXCI6XCJnZXROZXh0XCJdKGYpKT8oYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLGVbXCJtb3ZlVG9FbGVtZW50RWRpdFwiKyhjP1wiRW5kXCI6XCJTdGFydFwiKV0oayksXG5lLmNoZWNrU3RhcnRPZkJsb2NrKCkmJmUuY2hlY2tFbmRPZkJsb2NrKCk/ay5yZW1vdmUoKTplLnNlbGVjdCgpLGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxkPTEpOih2PW0uY29udGFpbnMoW1widGRcIixcInRoXCIsXCJjYXB0aW9uXCJdKSkmJmUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudCh2LGM/Q0tFRElUT1IuU1RBUlQ6Q0tFRElUT1IuRU5EKSYmKGQ9MSkpfXJldHVybiFkfSk7YS5ibG9ja2xlc3MmJkNLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJnRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcImtleXVwXCIsZnVuY3Rpb24oYil7Yi5kYXRhLmdldEtleXN0cm9rZSgpaW4gbCYmIXRoaXMuZ2V0Rmlyc3QoYykmJih0aGlzLmFwcGVuZEJvZ3VzKCksYj1hLmNyZWF0ZVJhbmdlKCksYi5tb3ZlVG9Qb3NpdGlvbih0aGlzLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSxiLnNlbGVjdCgpKX0pO3RoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcImRibGNsaWNrXCIsZnVuY3Rpb24oYil7aWYoYS5yZWFkT25seSlyZXR1cm4hMTtcbmI9e2VsZW1lbnQ6Yi5kYXRhLmdldFRhcmdldCgpfTthLmZpcmUoXCJkb3VibGVjbGlja1wiLGIpfSk7Q0tFRElUT1IuZW52LmllJiZ0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJjbGlja1wiLGIpO0NLRURJVE9SLmVudi5pZSYmIUNLRURJVE9SLmVudi5lZGdlfHx0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJtb3VzZWRvd25cIixmdW5jdGlvbihiKXt2YXIgYz1iLmRhdGEuZ2V0VGFyZ2V0KCk7Yy5pcyhcImltZ1wiLFwiaHJcIixcImlucHV0XCIsXCJ0ZXh0YXJlYVwiLFwic2VsZWN0XCIpJiYhYy5pc1JlYWRPbmx5KCkmJihhLmdldFNlbGVjdGlvbigpLnNlbGVjdEVsZW1lbnQoYyksYy5pcyhcImlucHV0XCIsXCJ0ZXh0YXJlYVwiLFwic2VsZWN0XCIpJiZiLmRhdGEucHJldmVudERlZmF1bHQoKSl9KTtDS0VESVRPUi5lbnYuZWRnZSYmdGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwibW91c2V1cFwiLGZ1bmN0aW9uKGIpeyhiPWIuZGF0YS5nZXRUYXJnZXQoKSkmJmIuaXMoXCJpbWdcIikmJmEuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudChiKX0pO1xuQ0tFRElUT1IuZW52LmdlY2tvJiZ0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJtb3VzZXVwXCIsZnVuY3Rpb24oYil7aWYoMj09Yi5kYXRhLiQuYnV0dG9uJiYoYj1iLmRhdGEuZ2V0VGFyZ2V0KCksIWIuZ2V0T3V0ZXJIdG1sKCkucmVwbGFjZShCLFwiXCIpKSl7dmFyIGM9YS5jcmVhdGVSYW5nZSgpO2MubW92ZVRvRWxlbWVudEVkaXRTdGFydChiKTtjLnNlbGVjdCghMCl9fSk7Q0tFRElUT1IuZW52LndlYmtpdCYmKHRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldFRhcmdldCgpLmlzKFwiaW5wdXRcIixcInNlbGVjdFwiKSYmYS5kYXRhLnByZXZlbnREZWZhdWx0KCl9KSx0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJtb3VzZXVwXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldFRhcmdldCgpLmlzKFwiaW5wdXRcIixcInRleHRhcmVhXCIpJiZhLmRhdGEucHJldmVudERlZmF1bHQoKX0pKTtDS0VESVRPUi5lbnYud2Via2l0JiZ0aGlzLmF0dGFjaExpc3RlbmVyKGEsXG5cImtleVwiLGZ1bmN0aW9uKGIpe2lmKGEucmVhZE9ubHkpcmV0dXJuITA7Yj1iLmRhdGEuZG9tRXZlbnQuZ2V0S2V5KCk7aWYoYiBpbiBsKXt2YXIgYz04PT1iLGQ9YS5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKVswXTtiPWQuc3RhcnRQYXRoKCk7aWYoZC5jb2xsYXBzZWQpYTp7dmFyIGg9Yi5ibG9jaztpZihoJiZkW2M/XCJjaGVja1N0YXJ0T2ZCbG9ja1wiOlwiY2hlY2tFbmRPZkJsb2NrXCJdKCkmJmQubW92ZVRvQ2xvc2VzdEVkaXRhYmxlUG9zaXRpb24oaCwhYykmJmQuY29sbGFwc2VkKXtpZihkLnN0YXJ0Q29udGFpbmVyLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7dmFyIGU9ZC5zdGFydENvbnRhaW5lci5nZXRDaGlsZChkLnN0YXJ0T2Zmc2V0LShjPzE6MCkpO2lmKGUmJmUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZlLmlzKFwiaHJcIikpe2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtlLnJlbW92ZSgpO2I9ITA7YnJlYWsgYX19ZD1kLnN0YXJ0UGF0aCgpLmJsb2NrO2lmKCFkfHxcbmQmJmQuY29udGFpbnMoaCkpYj12b2lkIDA7ZWxzZXthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7dmFyIG07KG09KGM/ZDpoKS5nZXRCb2d1cygpKSYmbS5yZW1vdmUoKTttPWEuZ2V0U2VsZWN0aW9uKCk7ZT1tLmNyZWF0ZUJvb2ttYXJrcygpOyhjP2g6ZCkubW92ZUNoaWxkcmVuKGM/ZDpoLCExKTtiLmxhc3RFbGVtZW50Lm1lcmdlU2libGluZ3MoKTt3KGgsZCwhYyk7bS5zZWxlY3RCb29rbWFya3MoZSk7Yj0hMH19ZWxzZSBiPSExfWVsc2UgYz1kLG09Yi5ibG9jayxkPWMuZW5kUGF0aCgpLmJsb2NrLG0mJmQmJiFtLmVxdWFscyhkKT8oYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLChoPW0uZ2V0Qm9ndXMoKSkmJmgucmVtb3ZlKCksYy5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfSU5MSU5FKSxjLmRlbGV0ZUNvbnRlbnRzKCksZC5nZXRQYXJlbnQoKSYmKGQubW92ZUNoaWxkcmVuKG0sITEpLGIubGFzdEVsZW1lbnQubWVyZ2VTaWJsaW5ncygpLHcobSxkLCEwKSksYz1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdLFxuYy5jb2xsYXBzZSgxKSxjLm9wdGltaXplKCksXCJcIj09PWMuc3RhcnRDb250YWluZXIuZ2V0SHRtbCgpJiZjLnN0YXJ0Q29udGFpbmVyLmFwcGVuZEJvZ3VzKCksYy5zZWxlY3QoKSxiPSEwKTpiPSExO2lmKCFiKXJldHVybjthLmdldFNlbGVjdGlvbigpLnNjcm9sbEludG9WaWV3KCk7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO3JldHVybiExfX0sdGhpcyxudWxsLDEwMCl9fX0sXzp7ZGV0YWNoOmZ1bmN0aW9uKCl7dGhpcy5lZGl0b3Iuc2V0RGF0YSh0aGlzLmVkaXRvci5nZXREYXRhKCksMCwxKTt0aGlzLmNsZWFyTGlzdGVuZXJzKCk7dGhpcy5yZXN0b3JlQXR0cnMoKTt2YXIgYTtpZihhPXRoaXMucmVtb3ZlQ3VzdG9tRGF0YShcImNsYXNzZXNcIikpZm9yKDthLmxlbmd0aDspdGhpcy5yZW1vdmVDbGFzcyhhLnBvcCgpKTtpZighdGhpcy5pcyhcInRleHRhcmVhXCIpKXthPXRoaXMuZ2V0RG9jdW1lbnQoKTt2YXIgYj1hLmdldEhlYWQoKTtpZihiLmdldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0XCIpKXt2YXIgYz1cbmEuZ2V0Q3VzdG9tRGF0YShcInN0eWxlc2hlZXRfcmVmXCIpOy0tYz9hLnNldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0X3JlZlwiLGMpOihhLnJlbW92ZUN1c3RvbURhdGEoXCJzdHlsZXNoZWV0X3JlZlwiKSxiLnJlbW92ZUN1c3RvbURhdGEoXCJzdHlsZXNoZWV0XCIpLnJlbW92ZSgpKX19dGhpcy5lZGl0b3IuZmlyZShcImNvbnRlbnREb21VbmxvYWRcIik7ZGVsZXRlIHRoaXMuZWRpdG9yfX19KTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmVkaXRhYmxlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy5lZGl0YWJsZTtpZihiJiZhKXJldHVybiAwO2FyZ3VtZW50cy5sZW5ndGgmJihiPXRoaXMuXy5lZGl0YWJsZT1hP2EgaW5zdGFuY2VvZiBDS0VESVRPUi5lZGl0YWJsZT9hOm5ldyBDS0VESVRPUi5lZGl0YWJsZSh0aGlzLGEpOihiJiZiLmRldGFjaCgpLG51bGwpKTtyZXR1cm4gYn07Q0tFRElUT1Iub24oXCJpbnN0YW5jZUxvYWRlZFwiLGZ1bmN0aW9uKGIpe3ZhciBjPWIuZWRpdG9yO2Mub24oXCJpbnNlcnRFbGVtZW50XCIsXG5mdW5jdGlvbihhKXthPWEuZGF0YTthLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGEuaXMoXCJpbnB1dFwiKXx8YS5pcyhcInRleHRhcmVhXCIpKSYmKFwiZmFsc2VcIiE9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJmEuZGF0YShcImNrZS1lZGl0YWJsZVwiLGEuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP1widHJ1ZVwiOlwiMVwiKSxhLnNldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiLCExKSl9KTtjLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYil7aWYoIWMucmVhZE9ubHkpe3ZhciBkPWMuZ2V0U2VsZWN0aW9uKCk7ZCYmIWQuaXNMb2NrZWQmJihkPWMuY2hlY2tEaXJ0eSgpLGMuZmlyZShcImxvY2tTbmFwc2hvdFwiKSxhKGIpLGMuZmlyZShcInVubG9ja1NuYXBzaG90XCIpLCFkJiZjLnJlc2V0RGlydHkoKSl9fSl9KTtDS0VESVRPUi5vbihcImluc3RhbmNlQ3JlYXRlZFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZWRpdG9yO2Iub24oXCJtb2RlXCIsZnVuY3Rpb24oKXt2YXIgYT1cbmIuZWRpdGFibGUoKTtpZihhJiZhLmlzSW5saW5lKCkpe3ZhciBjPWIudGl0bGU7YS5jaGFuZ2VBdHRyKFwicm9sZVwiLFwidGV4dGJveFwiKTthLmNoYW5nZUF0dHIoXCJhcmlhLWxhYmVsXCIsYyk7YyYmYS5jaGFuZ2VBdHRyKFwidGl0bGVcIixjKTt2YXIgZD1iLmZpcmUoXCJhcmlhRWRpdG9ySGVscExhYmVsXCIse30pLmxhYmVsO2lmKGQmJihjPXRoaXMudWkuc3BhY2UodGhpcy5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT9cInRvcFwiOlwiY29udGVudHNcIikpKXt2YXIgZT1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKSxkPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY3NwYW4gaWRcXHgzZFwiJytlKydcIiBjbGFzc1xceDNkXCJja2Vfdm9pY2VfbGFiZWxcIlxceDNlJytkK1wiXFx4M2Mvc3BhblxceDNlXCIpO2MuYXBwZW5kKGQpO2EuY2hhbmdlQXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixlKX19fSl9KTtDS0VESVRPUi5hZGRDc3MoXCIuY2tlX2VkaXRhYmxle2N1cnNvcjp0ZXh0fS5ja2VfZWRpdGFibGUgaW1nLC5ja2VfZWRpdGFibGUgaW5wdXQsLmNrZV9lZGl0YWJsZSB0ZXh0YXJlYXtjdXJzb3I6ZGVmYXVsdH1cIik7XG52YXIgZj1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKSx4PUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITEsITApLEE9Q0tFRElUT1IuZG9tLndhbGtlci5lbXB0eSgpLHU9Q0tFRElUT1IuZG9tLndhbGtlci5ib2d1cygpLEI9LyhefDxib2R5XFxiW14+XSo+KVxccyo8KHB8ZGl2fGFkZHJlc3N8aFxcZHxjZW50ZXJ8cHJlKVtePl0qPlxccyooPzo8YnJbXj5dKj58Jm5ic3A7fFxcdTAwQTB8JiMxNjA7KT9cXHMqKDo/PFxcL1xcMj4pP1xccyooPz0kfDxcXC9ib2R5PikvZ2kscT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfWZ1bmN0aW9uIGIoYyxkKXt2YXIgZSxtLGYscCxnPVtdLGw9ZC5yYW5nZS5zdGFydENvbnRhaW5lcjtlPWQucmFuZ2Uuc3RhcnRQYXRoKCk7Zm9yKHZhciBsPXFbbC5nZXROYW1lKCldLHI9MCxrPWMuZ2V0Q2hpbGRyZW4oKSxDPWsuY291bnQoKSxHPS0xLG49LTEsdz0wLEs9ZS5jb250YWlucyhxLiRsaXN0KTtyPFxuQzsrK3IpZT1rLmdldEl0ZW0ociksYShlKT8oZj1lLmdldE5hbWUoKSxLJiZmIGluIENLRURJVE9SLmR0ZC4kbGlzdD9nPWcuY29uY2F0KGIoZSxkKSk6KHA9ISFsW2ZdLFwiYnJcIiE9Znx8IWUuZGF0YShcImNrZS1lb2xcIil8fHImJnIhPUMtMXx8KHc9KG09cj9nW3ItMV0ubm9kZTprLmdldEl0ZW0ocisxKSkmJighYShtKXx8IW0uaXMoXCJiclwiKSksbT1tJiZhKG0pJiZxLiRibG9ja1ttLmdldE5hbWUoKV0pLC0xIT1HfHxwfHwoRz1yKSxwfHwobj1yKSxnLnB1c2goe2lzRWxlbWVudDoxLGlzTGluZUJyZWFrOncsaXNCbG9jazplLmlzQmxvY2tCb3VuZGFyeSgpLGhhc0Jsb2NrU2libGluZzptLG5vZGU6ZSxuYW1lOmYsYWxsb3dlZDpwfSksbT13PTApKTpnLnB1c2goe2lzRWxlbWVudDowLG5vZGU6ZSxhbGxvd2VkOjF9KTstMTxHJiYoZ1tHXS5maXJzdE5vdEFsbG93ZWQ9MSk7LTE8biYmKGdbbl0ubGFzdE5vdEFsbG93ZWQ9MSk7cmV0dXJuIGd9ZnVuY3Rpb24gZChiLGMpe3ZhciBlPVtdLFxuaD1iLmdldENoaWxkcmVuKCksbT1oLmNvdW50KCksZixnPTAsbD1xW2NdLHI9IWIuaXMocS4kaW5saW5lKXx8Yi5pcyhcImJyXCIpO2ZvcihyJiZlLnB1c2goXCIgXCIpO2c8bTtnKyspZj1oLmdldEl0ZW0oZyksYShmKSYmIWYuaXMobCk/ZT1lLmNvbmNhdChkKGYsYykpOmUucHVzaChmKTtyJiZlLnB1c2goXCIgXCIpO3JldHVybiBlfWZ1bmN0aW9uIGUoYil7cmV0dXJuIGEoYi5zdGFydENvbnRhaW5lcikmJmIuc3RhcnRDb250YWluZXIuZ2V0Q2hpbGQoYi5zdGFydE9mZnNldC0xKX1mdW5jdGlvbiBmKGIpe3JldHVybiBiJiZhKGIpJiYoYi5pcyhxLiRyZW1vdmVFbXB0eSl8fGIuaXMoXCJhXCIpJiYhYi5pc0Jsb2NrQm91bmRhcnkoKSl9ZnVuY3Rpb24gZyhiLGMsZCxlKXt2YXIgaD1iLmNsb25lKCksbSxmO2guc2V0RW5kQXQoYyxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTsobT0obmV3IENLRURJVE9SLmRvbS53YWxrZXIoaCkpLm5leHQoKSkmJmEobSkmJm5bbS5nZXROYW1lKCldJiZcbihmPW0uZ2V0UHJldmlvdXMoKSkmJmEoZikmJiFmLmdldFBhcmVudCgpLmVxdWFscyhiLnN0YXJ0Q29udGFpbmVyKSYmZC5jb250YWlucyhmKSYmZS5jb250YWlucyhtKSYmbS5pc0lkZW50aWNhbChmKSYmKG0ubW92ZUNoaWxkcmVuKGYpLG0ucmVtb3ZlKCksZyhiLGMsZCxlKSl9ZnVuY3Rpb24gRyhiLGMpe2Z1bmN0aW9uIGQoYixjKXtpZihjLmlzQmxvY2smJmMuaXNFbGVtZW50JiYhYy5ub2RlLmlzKFwiYnJcIikmJmEoYikmJmIuaXMoXCJiclwiKSlyZXR1cm4gYi5yZW1vdmUoKSwxfXZhciBlPWMuZW5kQ29udGFpbmVyLmdldENoaWxkKGMuZW5kT2Zmc2V0KSxoPWMuZW5kQ29udGFpbmVyLmdldENoaWxkKGMuZW5kT2Zmc2V0LTEpO2UmJmQoZSxiW2IubGVuZ3RoLTFdKTtoJiZkKGgsYlswXSkmJihjLnNldEVuZChjLmVuZENvbnRhaW5lcixjLmVuZE9mZnNldC0xKSxjLmNvbGxhcHNlKCkpfXZhciBxPUNLRURJVE9SLmR0ZCxuPXtwOjEsZGl2OjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLFxuaDY6MSx1bDoxLG9sOjEsbGk6MSxwcmU6MSxkbDoxLGJsb2NrcXVvdGU6MX0sdz17cDoxLGRpdjoxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxfSxNPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxxLiRpbmxpbmUpO2RlbGV0ZSBNLmJyO3JldHVybiBmdW5jdGlvbihuLHYsRCxJKXt2YXIgRT1uLmVkaXRvcixMPSExO1widW5maWx0ZXJlZF9odG1sXCI9PXYmJih2PVwiaHRtbFwiLEw9ITApO2lmKCFJLmNoZWNrUmVhZE9ubHkoKSl7dmFyIEo9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoSS5zdGFydENvbnRhaW5lcixJLnJvb3QpKS5ibG9ja0xpbWl0fHxJLnJvb3Q7bj17dHlwZTp2LGRvbnRGaWx0ZXI6TCxlZGl0YWJsZTpuLGVkaXRvcjpFLHJhbmdlOkksYmxvY2tMaW1pdDpKLG1lcmdlQ2FuZGlkYXRlczpbXSx6b21iaWVzOltdfTt2PW4ucmFuZ2U7ST1uLm1lcmdlQ2FuZGlkYXRlczt2YXIgSyx1O1widGV4dFwiPT1uLnR5cGUmJnYuc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5ULFxuITAsITEpJiYoSz1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChcIlxceDNjc3BhblxceDNlXFx4MjZuYnNwO1xceDNjL3NwYW5cXHgzZVwiLHYuZG9jdW1lbnQpLHYuaW5zZXJ0Tm9kZShLKSx2LnNldFN0YXJ0QWZ0ZXIoSykpO0w9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh2LnN0YXJ0Q29udGFpbmVyKTtuLmVuZFBhdGg9Sj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHYuZW5kQ29udGFpbmVyKTtpZighdi5jb2xsYXBzZWQpe3ZhciBFPUouYmxvY2t8fEouYmxvY2tMaW1pdCx5PXYuZ2V0Q29tbW9uQW5jZXN0b3IoKTtFJiYhRS5lcXVhbHMoeSkmJiFFLmNvbnRhaW5zKHkpJiZ2LmNoZWNrRW5kT2ZCbG9jaygpJiZuLnpvbWJpZXMucHVzaChFKTt2LmRlbGV0ZUNvbnRlbnRzKCl9Zm9yKDsodT1lKHYpKSYmYSh1KSYmdS5pc0Jsb2NrQm91bmRhcnkoKSYmTC5jb250YWlucyh1KTspdi5tb3ZlVG9Qb3NpdGlvbih1LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO1xuZyh2LG4uYmxvY2tMaW1pdCxMLEopO0smJih2LnNldEVuZEJlZm9yZShLKSx2LmNvbGxhcHNlKCksSy5yZW1vdmUoKSk7Sz12LnN0YXJ0UGF0aCgpO2lmKEU9Sy5jb250YWlucyhmLCExLDEpKXYuc3BsaXRFbGVtZW50KEUpLG4uaW5saW5lU3R5bGVzUm9vdD1FLG4uaW5saW5lU3R5bGVzUGVhaz1LLmxhc3RFbGVtZW50O0s9di5jcmVhdGVCb29rbWFyaygpOyhFPUsuc3RhcnROb2RlLmdldFByZXZpb3VzKGMpKSYmYShFKSYmZihFKSYmSS5wdXNoKEUpOyhFPUsuc3RhcnROb2RlLmdldE5leHQoYykpJiZhKEUpJiZmKEUpJiZJLnB1c2goRSk7Zm9yKEU9Sy5zdGFydE5vZGU7KEU9RS5nZXRQYXJlbnQoKSkmJmYoRSk7KUkucHVzaChFKTt2Lm1vdmVUb0Jvb2ttYXJrKEspO2lmKEs9RCl7Sz1uLnJhbmdlO2lmKFwidGV4dFwiPT1uLnR5cGUmJm4uaW5saW5lU3R5bGVzUm9vdCl7dT1uLmlubGluZVN0eWxlc1BlYWs7dj11LmdldERvY3VtZW50KCkuY3JlYXRlVGV4dChcIntja2UtcGVha31cIik7Zm9yKEk9XG5uLmlubGluZVN0eWxlc1Jvb3QuZ2V0UGFyZW50KCk7IXUuZXF1YWxzKEkpOyl2PXYuYXBwZW5kVG8odS5jbG9uZSgpKSx1PXUuZ2V0UGFyZW50KCk7RD12LmdldE91dGVySHRtbCgpLnNwbGl0KFwie2NrZS1wZWFrfVwiKS5qb2luKEQpfXU9bi5ibG9ja0xpbWl0LmdldE5hbWUoKTtpZigvXlxccyt8XFxzKyQvLnRlc3QoRCkmJlwic3BhblwiaW4gQ0tFRElUT1IuZHRkW3VdKXt2YXIgQT0nXFx4M2NzcGFuIGRhdGEtY2tlLW1hcmtlclxceDNkXCIxXCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2UnO0Q9QStEK0F9RD1uLmVkaXRvci5kYXRhUHJvY2Vzc29yLnRvSHRtbChELHtjb250ZXh0Om51bGwsZml4Rm9yQm9keTohMSxwcm90ZWN0ZWRXaGl0ZXNwYWNlczohIUEsZG9udEZpbHRlcjpuLmRvbnRGaWx0ZXIsZmlsdGVyOm4uZWRpdG9yLmFjdGl2ZUZpbHRlcixlbnRlck1vZGU6bi5lZGl0b3IuYWN0aXZlRW50ZXJNb2RlfSk7dT1LLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO3Uuc2V0SHRtbChEKTtcbkEmJih1LmdldEZpcnN0KCkucmVtb3ZlKCksdS5nZXRMYXN0KCkucmVtb3ZlKCkpO2lmKChBPUsuc3RhcnRQYXRoKCkuYmxvY2spJiYoMSE9QS5nZXRDaGlsZENvdW50KCl8fCFBLmdldEJvZ3VzKCkpKWE6e3ZhciB4O2lmKDE9PXUuZ2V0Q2hpbGRDb3VudCgpJiZhKHg9dS5nZXRGaXJzdCgpKSYmeC5pcyh3KSYmIXguaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXtBPXguZ2V0RWxlbWVudHNCeVRhZyhcIipcIik7Sz0wO2ZvcihJPUEuY291bnQoKTtLPEk7SysrKWlmKHY9QS5nZXRJdGVtKEspLCF2LmlzKE0pKWJyZWFrIGE7eC5tb3ZlQ2hpbGRyZW4oeC5nZXRQYXJlbnQoMSkpO3gucmVtb3ZlKCl9fW4uZGF0YVdyYXBwZXI9dTtLPUR9aWYoSyl7eD1uLnJhbmdlO0s9eC5kb2N1bWVudDt2YXIgdDt1PW4uYmxvY2tMaW1pdDtJPTA7dmFyIEIsQT1bXSxOLFQ7RD1FPTA7dmFyIEYsVzt2PXguc3RhcnRDb250YWluZXI7dmFyIEw9bi5lbmRQYXRoLmVsZW1lbnRzWzBdLFgsSj1MLmdldFBvc2l0aW9uKHYpLFxueT0hIUwuZ2V0Q29tbW9uQW5jZXN0b3IodikmJkohPUNLRURJVE9SLlBPU0lUSU9OX0lERU5USUNBTCYmIShKJkNLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TK0NLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRCk7dj1iKG4uZGF0YVdyYXBwZXIsbik7Zm9yKEcodix4KTtJPHYubGVuZ3RoO0krKyl7Sj12W0ldO2lmKHQ9Si5pc0xpbmVCcmVhayl7dD14O0Y9dTt2YXIgUz12b2lkIDAsYWE9dm9pZCAwO0ouaGFzQmxvY2tTaWJsaW5nP3Q9MTooUz10LnN0YXJ0Q29udGFpbmVyLmdldEFzY2VuZGFudChxLiRibG9jaywxKSkmJlMuaXMoe2RpdjoxLHA6MX0pPyhhYT1TLmdldFBvc2l0aW9uKEYpLGFhPT1DS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUx8fGFhPT1DS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUz90PTA6KEY9dC5zcGxpdEVsZW1lbnQoUyksdC5tb3ZlVG9Qb3NpdGlvbihGLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSx0PTEpKTp0PTB9aWYodClEPTA8STtlbHNle3Q9XG54LnN0YXJ0UGF0aCgpOyFKLmlzQmxvY2smJmwobi5lZGl0b3IsdC5ibG9jayx0LmJsb2NrTGltaXQpJiYoVD1rKG4uZWRpdG9yKSkmJihUPUsuY3JlYXRlRWxlbWVudChUKSxULmFwcGVuZEJvZ3VzKCkseC5pbnNlcnROb2RlKFQpLENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyJiYoQj1ULmdldEJvZ3VzKCkpJiZCLnJlbW92ZSgpLHgubW92ZVRvUG9zaXRpb24oVCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSk7aWYoKHQ9eC5zdGFydFBhdGgoKS5ibG9jaykmJiF0LmVxdWFscyhOKSl7aWYoQj10LmdldEJvZ3VzKCkpQi5yZW1vdmUoKSxBLnB1c2godCk7Tj10fUouZmlyc3ROb3RBbGxvd2VkJiYoRT0xKTtpZihFJiZKLmlzRWxlbWVudCl7dD14LnN0YXJ0Q29udGFpbmVyO2ZvcihGPW51bGw7dCYmIXFbdC5nZXROYW1lKCldW0oubmFtZV07KXtpZih0LmVxdWFscyh1KSl7dD1udWxsO2JyZWFrfUY9dDt0PXQuZ2V0UGFyZW50KCl9aWYodClGJiYoVz14LnNwbGl0RWxlbWVudChGKSxcbm4uem9tYmllcy5wdXNoKFcpLG4uem9tYmllcy5wdXNoKEYpKTtlbHNle0Y9dS5nZXROYW1lKCk7WD0hSTt0PUk9PXYubGVuZ3RoLTE7Rj1kKEoubm9kZSxGKTtmb3IodmFyIFM9W10sYWE9Ri5sZW5ndGgsY2E9MCxlYT12b2lkIDAsWT0wLFU9LTE7Y2E8YWE7Y2ErKyllYT1GW2NhXSxcIiBcIj09ZWE/KFl8fFgmJiFjYXx8KFMucHVzaChuZXcgQ0tFRElUT1IuZG9tLnRleHQoXCIgXCIpKSxVPVMubGVuZ3RoKSxZPTEpOihTLnB1c2goZWEpLFk9MCk7dCYmVT09Uy5sZW5ndGgmJlMucG9wKCk7WD1TfX1pZihYKXtmb3IoO3Q9WC5wb3AoKTspeC5pbnNlcnROb2RlKHQpO1g9MH1lbHNlIHguaW5zZXJ0Tm9kZShKLm5vZGUpO0oubGFzdE5vdEFsbG93ZWQmJkk8di5sZW5ndGgtMSYmKChXPXk/TDpXKSYmeC5zZXRFbmRBdChXLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSxFPTApO3guY29sbGFwc2UoKX19MSE9di5sZW5ndGg/Qj0hMTooQj12WzBdLEI9Qi5pc0VsZW1lbnQmJlwiZmFsc2VcIj09XG5CLm5vZGUuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKTtCJiYoRD0hMCx0PXZbMF0ubm9kZSx4LnNldFN0YXJ0QXQodCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLHguc2V0RW5kQXQodCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTtuLmRvbnRNb3ZlQ2FyZXQ9RDtuLmJvZ3VzTmVlZGVkQmxvY2tzPUF9Qj1uLnJhbmdlO3ZhciBQO1c9bi5ib2d1c05lZWRlZEJsb2Nrcztmb3IoWD1CLmNyZWF0ZUJvb2ttYXJrKCk7Tj1uLnpvbWJpZXMucG9wKCk7KU4uZ2V0UGFyZW50KCkmJihUPUIuY2xvbmUoKSxULm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoTiksVC5yZW1vdmVFbXB0eUJsb2Nrc0F0RW5kKCkpO2lmKFcpZm9yKDtOPVcucG9wKCk7KUNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyP04uYXBwZW5kQm9ndXMoKTpOLmFwcGVuZChCLmRvY3VtZW50LmNyZWF0ZVRleHQoXCLCoFwiKSk7Zm9yKDtOPW4ubWVyZ2VDYW5kaWRhdGVzLnBvcCgpOylOLm1lcmdlU2libGluZ3MoKTtcbkIubW92ZVRvQm9va21hcmsoWCk7aWYoIW4uZG9udE1vdmVDYXJldCl7Zm9yKE49ZShCKTtOJiZhKE4pJiYhTi5pcyhxLiRlbXB0eSk7KXtpZihOLmlzQmxvY2tCb3VuZGFyeSgpKUIubW92ZVRvUG9zaXRpb24oTixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtlbHNle2lmKGYoTikmJk4uZ2V0SHRtbCgpLm1hdGNoKC8oXFxzfCZuYnNwOykkL2cpKXtQPW51bGw7YnJlYWt9UD1CLmNsb25lKCk7UC5tb3ZlVG9Qb3NpdGlvbihOLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpfU49Ti5nZXRMYXN0KGMpfVAmJkIubW92ZVRvUmFuZ2UoUCl9fX19KCkseT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7Yj1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihiKTtiLmd1YXJkPWZ1bmN0aW9uKGEsYil7aWYoYilyZXR1cm4hMTtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gYS5pcyhDS0VESVRPUi5kdGQuJHRhYmxlQ29udGVudCl9O2IuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PVxuQ0tFRElUT1IuTk9ERV9FTEVNRU5UfTtyZXR1cm4gYn1mdW5jdGlvbiBiKGEsYyxkKXtjPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KGMpO2EuYXBwZW5kKGMsZCk7cmV0dXJuIGN9ZnVuY3Rpb24gYyhhKXt2YXIgYj1hLmNvdW50KCksZDtmb3IoYjswPGItLTspZD1hLmdldEl0ZW0oYiksQ0tFRElUT1IudG9vbHMudHJpbShkLmdldEh0bWwoKSl8fChkLmFwcGVuZEJvZ3VzKCksQ0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uJiZkLmdldENoaWxkQ291bnQoKSYmZC5nZXRGaXJzdCgpLnJlbW92ZSgpKX1yZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZC5zdGFydENvbnRhaW5lcixmPWUuZ2V0QXNjZW5kYW50KFwidGFibGVcIiwxKSxnPSExO2MoZi5nZXRFbGVtZW50c0J5VGFnKFwidGRcIikpO2MoZi5nZXRFbGVtZW50c0J5VGFnKFwidGhcIikpO2Y9ZC5jbG9uZSgpO2Yuc2V0U3RhcnQoZSwwKTtmPWEoZikubGFzdEJhY2t3YXJkKCk7Znx8KGY9ZC5jbG9uZSgpLGYuc2V0RW5kQXQoZSxcbkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGY9YShmKS5sYXN0Rm9yd2FyZCgpLGc9ITApO2Z8fChmPWUpO2YuaXMoXCJ0YWJsZVwiKT8oZC5zZXRTdGFydEF0KGYsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxkLmNvbGxhcHNlKCEwKSxmLnJlbW92ZSgpKTooZi5pcyh7dGJvZHk6MSx0aGVhZDoxLHRmb290OjF9KSYmKGY9YihmLFwidHJcIixnKSksZi5pcyhcInRyXCIpJiYoZj1iKGYsZi5nZXRQYXJlbnQoKS5pcyhcInRoZWFkXCIpP1widGhcIjpcInRkXCIsZykpLChlPWYuZ2V0Qm9ndXMoKSkmJmUucmVtb3ZlKCksZC5tb3ZlVG9Qb3NpdGlvbihmLGc/Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCkpfX0oKSxGPXtlb2w6e2RldGVjdDpmdW5jdGlvbihhLGIpe3ZhciBjPWEucmFuZ2UsZD1jLmNsb25lKCksZT1jLmNsb25lKCksZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGMuc3RhcnRDb250YWluZXIsYiksZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGMuZW5kQ29udGFpbmVyLFxuYik7ZC5jb2xsYXBzZSgxKTtlLmNvbGxhcHNlKCk7Zi5ibG9jayYmZC5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGYuYmxvY2ssQ0tFRElUT1IuRU5EKSYmKGMuc2V0U3RhcnRBZnRlcihmLmJsb2NrKSxhLnByZXBlbmRFb2xCcj0xKTtnLmJsb2NrJiZlLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoZy5ibG9jayxDS0VESVRPUi5TVEFSVCkmJihjLnNldEVuZEJlZm9yZShnLmJsb2NrKSxhLmFwcGVuZEVvbEJyPTEpfSxmaXg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmdldERvY3VtZW50KCksZDthLmFwcGVuZEVvbEJyJiYoZD10aGlzLmNyZWF0ZUVvbEJyKGMpLGEuZnJhZ21lbnQuYXBwZW5kKGQpKTshYS5wcmVwZW5kRW9sQnJ8fGQmJiFkLmdldFByZXZpb3VzKCl8fGEuZnJhZ21lbnQuYXBwZW5kKHRoaXMuY3JlYXRlRW9sQnIoYyksMSl9LGNyZWF0ZUVvbEJyOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNyZWF0ZUVsZW1lbnQoXCJiclwiLHthdHRyaWJ1dGVzOntcImRhdGEtY2tlLWVvbFwiOjF9fSl9fSxcbmJvZ3VzOntleGNsdWRlOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmFuZ2UuZ2V0Qm91bmRhcnlOb2RlcygpLGM9Yi5zdGFydE5vZGUsYj1iLmVuZE5vZGU7IWJ8fCF1KGIpfHxjJiZjLmVxdWFscyhiKXx8YS5yYW5nZS5zZXRFbmRCZWZvcmUoYil9fSx0cmVlOntyZWJ1aWxkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5yYW5nZSxkPWMuZ2V0Q29tbW9uQW5jZXN0b3IoKSxlPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZCxiKSxmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYy5zdGFydENvbnRhaW5lcixiKSxjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYy5lbmRDb250YWluZXIsYiksZztkLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGQ9ZC5nZXRQYXJlbnQoKSk7aWYoZS5ibG9ja0xpbWl0LmlzKHt0cjoxLHRhYmxlOjF9KSl7dmFyIGw9ZS5jb250YWlucyhcInRhYmxlXCIpLmdldFBhcmVudCgpO2c9ZnVuY3Rpb24oYSl7cmV0dXJuIWEuZXF1YWxzKGwpfX1lbHNlIGlmKGUuYmxvY2smJlxuZS5ibG9jay5pcyhDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSYmKGY9Zi5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpLGM9Yy5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpLCFmLmVxdWFscyhjKSkpe3ZhciBrPWUuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0KS5nZXRQYXJlbnQoKTtnPWZ1bmN0aW9uKGEpe3JldHVybiFhLmVxdWFscyhrKX19Z3x8KGc9ZnVuY3Rpb24oYSl7cmV0dXJuIWEuZXF1YWxzKGUuYmxvY2spJiYhYS5lcXVhbHMoZS5ibG9ja0xpbWl0KX0pO3RoaXMucmVidWlsZEZyYWdtZW50KGEsYixkLGcpfSxyZWJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlO2MmJiFjLmVxdWFscyhiKSYmZChjKTspZT1jLmNsb25lKDAsMSksYS5mcmFnbWVudC5hcHBlbmRUbyhlKSxhLmZyYWdtZW50PWUsYz1jLmdldFBhcmVudCgpfX0sY2VsbDp7c2hyaW5rOmZ1bmN0aW9uKGEpe2E9YS5yYW5nZTt2YXIgYj1hLnN0YXJ0Q29udGFpbmVyLGM9YS5lbmRDb250YWluZXIsXG5kPWEuc3RhcnRPZmZzZXQsZT1hLmVuZE9mZnNldDtiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5lcXVhbHMoYykmJmIuaXMoXCJ0clwiKSYmKytkPT1lJiZhLnNocmluayhDS0VESVRPUi5TSFJJTktfVEVYVCl9fX0sdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXt2YXIgZD1iLmdldFBhcmVudCgpO2lmKGQuaXMoQ0tFRElUT1IuZHRkLiRpbmxpbmUpKWJbYz9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oZCl9ZnVuY3Rpb24gYihjLGQsZSl7YShkKTthKGUsMSk7Zm9yKHZhciBoO2g9ZS5nZXROZXh0KCk7KWguaW5zZXJ0QWZ0ZXIoZCksZD1oO0EoYykmJmMucmVtb3ZlKCl9ZnVuY3Rpb24gYyhhLGIpe3ZhciBkPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYSk7ZC5zZXRTdGFydEFmdGVyKGIuc3RhcnROb2RlKTtkLnNldEVuZEJlZm9yZShiLmVuZE5vZGUpO3JldHVybiBkfXJldHVybntsaXN0OntkZXRlY3RNZXJnZTpmdW5jdGlvbihhLGIpe3ZhciBkPWMoYixhLmJvb2ttYXJrKSxcbmU9ZC5zdGFydFBhdGgoKSxoPWQuZW5kUGF0aCgpLGY9ZS5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpLGc9aC5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpO2EubWVyZ2VMaXN0PWYmJmcmJmYuZ2V0UGFyZW50KCkuZXF1YWxzKGcuZ2V0UGFyZW50KCkpJiYhZi5lcXVhbHMoZyk7YS5tZXJnZUxpc3RJdGVtcz1lLmJsb2NrJiZoLmJsb2NrJiZlLmJsb2NrLmlzKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pJiZoLmJsb2NrLmlzKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pO2lmKGEubWVyZ2VMaXN0fHxhLm1lcmdlTGlzdEl0ZW1zKWQ9ZC5jbG9uZSgpLGQuc2V0U3RhcnRCZWZvcmUoYS5ib29rbWFyay5zdGFydE5vZGUpLGQuc2V0RW5kQWZ0ZXIoYS5ib29rbWFyay5lbmROb2RlKSxhLm1lcmdlTGlzdEJvb2ttYXJrPWQuY3JlYXRlQm9va21hcmsoKX0sbWVyZ2U6ZnVuY3Rpb24oYSxjKXtpZihhLm1lcmdlTGlzdEJvb2ttYXJrKXt2YXIgZD1hLm1lcmdlTGlzdEJvb2ttYXJrLnN0YXJ0Tm9kZSxcbmU9YS5tZXJnZUxpc3RCb29rbWFyay5lbmROb2RlLGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChkLGMpLGc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChlLGMpO2lmKGEubWVyZ2VMaXN0KXt2YXIgcD1mLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCksbD1nLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCk7cC5lcXVhbHMobCl8fChsLm1vdmVDaGlsZHJlbihwKSxsLnJlbW92ZSgpKX1hLm1lcmdlTGlzdEl0ZW1zJiYoZj1mLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pLGc9Zy5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSxmLmVxdWFscyhnKXx8YihnLGQsZSkpO2QucmVtb3ZlKCk7ZS5yZW1vdmUoKX19fSxibG9jazp7ZGV0ZWN0TWVyZ2U6ZnVuY3Rpb24oYSxiKXtpZighYS50YWJsZUNvbnRlbnRzUmFuZ2VzJiYhYS5tZXJnZUxpc3RCb29rbWFyayl7dmFyIGM9bmV3IENLRURJVE9SLmRvbS5yYW5nZShiKTtjLnNldFN0YXJ0QmVmb3JlKGEuYm9va21hcmsuc3RhcnROb2RlKTtcbmMuc2V0RW5kQWZ0ZXIoYS5ib29rbWFyay5lbmROb2RlKTthLm1lcmdlQmxvY2tCb29rbWFyaz1jLmNyZWF0ZUJvb2ttYXJrKCl9fSxtZXJnZTpmdW5jdGlvbihhLGMpe2lmKGEubWVyZ2VCbG9ja0Jvb2ttYXJrJiYhYS5wdXJnZVRhYmxlQm9va21hcmspe3ZhciBkPWEubWVyZ2VCbG9ja0Jvb2ttYXJrLnN0YXJ0Tm9kZSxlPWEubWVyZ2VCbG9ja0Jvb2ttYXJrLmVuZE5vZGUsZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGQsYyksZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGUsYyksZj1mLmJsb2NrLGc9Zy5ibG9jaztmJiZnJiYhZi5lcXVhbHMoZykmJmIoZyxkLGUpO2QucmVtb3ZlKCk7ZS5yZW1vdmUoKX19fSx0YWJsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYyl7dmFyIGU9W10saCxmPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGMpLGc9Yy5zdGFydFBhdGgoKS5jb250YWlucyhkKSxtPWMuZW5kUGF0aCgpLmNvbnRhaW5zKGQpLHA9e307Zi5ndWFyZD1mdW5jdGlvbihhLFxuZil7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe3ZhciBsPVwidmlzaXRlZF9cIisoZj9cIm91dFwiOlwiaW5cIik7aWYoYS5nZXRDdXN0b21EYXRhKGwpKXJldHVybjtDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIocCxhLGwsMSl9aWYoZiYmZyYmYS5lcXVhbHMoZykpaD1jLmNsb25lKCksaC5zZXRFbmRBdChnLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGUucHVzaChoKTtlbHNlIGlmKCFmJiZtJiZhLmVxdWFscyhtKSloPWMuY2xvbmUoKSxoLnNldFN0YXJ0QXQobSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksZS5wdXNoKGgpO2Vsc2V7aWYobD0hZilsPWEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKGQpJiYoIWd8fGIoYSxnKSkmJighbXx8YihhLG0pKTtsJiYoaD1jLmNsb25lKCksaC5zZWxlY3ROb2RlQ29udGVudHMoYSksZS5wdXNoKGgpKX19O2YubGFzdEZvcndhcmQoKTtDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMocCk7XG5yZXR1cm4gZX1mdW5jdGlvbiBiKGEsYyl7dmFyIGQ9Q0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlMrQ0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVELGU9YS5nZXRQb3NpdGlvbihjKTtyZXR1cm4gZT09PUNLRURJVE9SLlBPU0lUSU9OX0lERU5USUNBTD8hMTowPT09KGUmZCl9dmFyIGQ9e3RkOjEsdGg6MSxjYXB0aW9uOjF9O3JldHVybntkZXRlY3RQdXJnZTpmdW5jdGlvbihhKXt2YXIgYj1hLnJhbmdlLGM9Yi5jbG9uZSgpO2MuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0VMRU1FTlQpO3ZhciBjPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGMpLGU9MDtjLmV2YWx1YXRvcj1mdW5jdGlvbihhKXthLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5pcyhkKSYmKytlfTtjLmNoZWNrRm9yd2FyZCgpO2lmKDE8ZSl7dmFyIGM9Yi5zdGFydFBhdGgoKS5jb250YWlucyhcInRhYmxlXCIpLGg9Yi5lbmRQYXRoKCkuY29udGFpbnMoXCJ0YWJsZVwiKTtjJiZoJiZiLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoYyxcbkNLRURJVE9SLlNUQVJUKSYmYi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGgsQ0tFRElUT1IuRU5EKSYmKGI9YS5yYW5nZS5jbG9uZSgpLGIuc2V0U3RhcnRCZWZvcmUoYyksYi5zZXRFbmRBZnRlcihoKSxhLnB1cmdlVGFibGVCb29rbWFyaz1iLmNyZWF0ZUJvb2ttYXJrKCkpfX0sZGV0ZWN0UmFuZ2VzOmZ1bmN0aW9uKGUsaCl7dmFyIGY9YyhoLGUuYm9va21hcmspLGc9Zi5jbG9uZSgpLGwsayx2PWYuZ2V0Q29tbW9uQW5jZXN0b3IoKTt2LmlzKENLRURJVE9SLmR0ZC4kdGFibGVDb250ZW50KSYmIXYuaXMoZCkmJih2PXYuZ2V0QXNjZW5kYW50KFwidGFibGVcIiwhMCkpO2s9djt2PW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZi5zdGFydENvbnRhaW5lcixrKTtrPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZi5lbmRDb250YWluZXIsayk7dj12LmNvbnRhaW5zKFwidGFibGVcIik7az1rLmNvbnRhaW5zKFwidGFibGVcIik7aWYodnx8ayl2JiZrJiZiKHYsayk/KGUudGFibGVTdXJyb3VuZGluZ1JhbmdlPVxuZyxnLnNldFN0YXJ0QXQodixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGcuc2V0RW5kQXQoayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGc9Zi5jbG9uZSgpLGcuc2V0RW5kQXQodixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGw9Zi5jbG9uZSgpLGwuc2V0U3RhcnRBdChrLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksbD1hKGcpLmNvbmNhdChhKGwpKSk6dj9rfHwoZS50YWJsZVN1cnJvdW5kaW5nUmFuZ2U9ZyxnLnNldFN0YXJ0QXQodixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGYuc2V0RW5kQXQodixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTooZS50YWJsZVN1cnJvdW5kaW5nUmFuZ2U9ZyxnLnNldEVuZEF0KGssQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxmLnNldFN0YXJ0QXQoayxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCkpLGUudGFibGVDb250ZW50c1Jhbmdlcz1sP2w6YShmKX0sZGVsZXRlUmFuZ2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYjtiPVxuYS50YWJsZUNvbnRlbnRzUmFuZ2VzLnBvcCgpOyliLmV4dHJhY3RDb250ZW50cygpLEEoYi5zdGFydENvbnRhaW5lcikmJmIuc3RhcnRDb250YWluZXIuYXBwZW5kQm9ndXMoKTthLnRhYmxlU3Vycm91bmRpbmdSYW5nZSYmYS50YWJsZVN1cnJvdW5kaW5nUmFuZ2UuZXh0cmFjdENvbnRlbnRzKCl9LHB1cmdlOmZ1bmN0aW9uKGEpe2lmKGEucHVyZ2VUYWJsZUJvb2ttYXJrKXt2YXIgYj1hLmRvYyxjPWEucmFuZ2UuY2xvbmUoKSxiPWIuY3JlYXRlRWxlbWVudChcInBcIik7Yi5pbnNlcnRCZWZvcmUoYS5wdXJnZVRhYmxlQm9va21hcmsuc3RhcnROb2RlKTtjLm1vdmVUb0Jvb2ttYXJrKGEucHVyZ2VUYWJsZUJvb2ttYXJrKTtjLmRlbGV0ZUNvbnRlbnRzKCk7YS5yYW5nZS5tb3ZlVG9Qb3NpdGlvbihiLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKX19fX0oKSxkZXRlY3RFeHRyYWN0TWVyZ2U6ZnVuY3Rpb24oYSl7cmV0dXJuIShhLnJhbmdlLnN0YXJ0UGF0aCgpLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pJiZcbmEucmFuZ2UuZW5kUGF0aCgpLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pKX0sZml4VW5lZGl0YWJsZVJhbmdlUG9zaXRpb246ZnVuY3Rpb24oYSl7YS5zdGFydENvbnRhaW5lci5nZXREdGQoKVtcIiNcIl18fGEubW92ZVRvQ2xvc2VzdEVkaXRhYmxlUG9zaXRpb24obnVsbCwhMCl9LGF1dG9QYXJhZ3JhcGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLnN0YXJ0UGF0aCgpLGQ7bChhLGMuYmxvY2ssYy5ibG9ja0xpbWl0KSYmKGQ9ayhhKSkmJihkPWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkKSxkLmFwcGVuZEJvZ3VzKCksYi5pbnNlcnROb2RlKGQpLGIubW92ZVRvUG9zaXRpb24oZCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCkpfX19KCl9KSgpO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPXRoaXMuXy5mYWtlU2VsZWN0aW9uLGI7YSYmKGI9dGhpcy5nZXRTZWxlY3Rpb24oMSksYiYmYi5pc0hpZGRlbigpfHwoYS5yZXNldCgpLGE9MCkpO2lmKCFhJiYoYT1ifHx0aGlzLmdldFNlbGVjdGlvbigxKSwhYXx8YS5nZXRUeXBlKCk9PUNLRURJVE9SLlNFTEVDVElPTl9OT05FKSlyZXR1cm47dGhpcy5maXJlKFwic2VsZWN0aW9uQ2hlY2tcIixhKTtiPXRoaXMuZWxlbWVudFBhdGgoKTtiLmNvbXBhcmUodGhpcy5fLnNlbGVjdGlvblByZXZpb3VzUGF0aCl8fChDS0VESVRPUi5lbnYud2Via2l0JiYodGhpcy5fLnByZXZpb3VzQWN0aXZlPXRoaXMuZG9jdW1lbnQuZ2V0QWN0aXZlKCkpLHRoaXMuXy5zZWxlY3Rpb25QcmV2aW91c1BhdGg9Yix0aGlzLmZpcmUoXCJzZWxlY3Rpb25DaGFuZ2VcIix7c2VsZWN0aW9uOmEscGF0aDpifSkpfWZ1bmN0aW9uIGQoKXtBPSEwO3h8fChiLmNhbGwodGhpcykseD1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGIsXG4yMDAsdGhpcykpfWZ1bmN0aW9uIGIoKXt4PW51bGw7QSYmKENLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoYSwwLHRoaXMpLEE9ITEpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHUoYSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYhYS5pcyhDS0VESVRPUi5kdGQuJGVtcHR5KT8hMDohMX1mdW5jdGlvbiBlKGEpe2Z1bmN0aW9uIGIoYyxkKXtyZXR1cm4gYyYmYy50eXBlIT1DS0VESVRPUi5OT0RFX1RFWFQ/YS5jbG9uZSgpW1wibW92ZVRvRWxlbWVudEVkaXRcIisoZD9cIkVuZFwiOlwiU3RhcnRcIildKGMpOiExfWlmKCEoYS5yb290IGluc3RhbmNlb2YgQ0tFRElUT1IuZWRpdGFibGUpKXJldHVybiExO3ZhciBkPWEuc3RhcnRDb250YWluZXIsZT1hLmdldFByZXZpb3VzTm9kZShjLG51bGwsZCksZj1hLmdldE5leHROb2RlKGMsbnVsbCxkKTtyZXR1cm4gYihlKXx8YihmLDEpfHwhKGV8fGZ8fGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmlzQmxvY2tCb3VuZGFyeSgpJiZcbmQuZ2V0Qm9ndXMoKSk/ITA6ITF9ZnVuY3Rpb24gZyhhKXtsKGEsITEpO3ZhciBiPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVUZXh0KHQpO2Euc2V0Q3VzdG9tRGF0YShcImNrZS1maWxsaW5nQ2hhclwiLGIpO3JldHVybiBifWZ1bmN0aW9uIGwoYSxiKXt2YXIgYz1hJiZhLnJlbW92ZUN1c3RvbURhdGEoXCJja2UtZmlsbGluZ0NoYXJcIik7aWYoYyl7aWYoITEhPT1iKXt2YXIgZD1hLmdldERvY3VtZW50KCkuZ2V0U2VsZWN0aW9uKCkuZ2V0TmF0aXZlKCksZT1kJiZcIk5vbmVcIiE9ZC50eXBlJiZkLmdldFJhbmdlQXQoMCksZj10Lmxlbmd0aDtpZihjLmdldExlbmd0aCgpPmYmJmUmJmUuaW50ZXJzZWN0c05vZGUoYy4kKSl7dmFyIGc9W3tub2RlOmQuYW5jaG9yTm9kZSxvZmZzZXQ6ZC5hbmNob3JPZmZzZXR9LHtub2RlOmQuZm9jdXNOb2RlLG9mZnNldDpkLmZvY3VzT2Zmc2V0fV07ZC5hbmNob3JOb2RlPT1jLiQmJmQuYW5jaG9yT2Zmc2V0PmYmJihnWzBdLm9mZnNldC09Zik7ZC5mb2N1c05vZGU9PVxuYy4kJiZkLmZvY3VzT2Zmc2V0PmYmJihnWzFdLm9mZnNldC09Zil9fWMuc2V0VGV4dChrKGMuZ2V0VGV4dCgpLDEpKTtnJiYoYz1hLmdldERvY3VtZW50KCkuJCxkPWMuZ2V0U2VsZWN0aW9uKCksYz1jLmNyZWF0ZVJhbmdlKCksYy5zZXRTdGFydChnWzBdLm5vZGUsZ1swXS5vZmZzZXQpLGMuY29sbGFwc2UoITApLGQucmVtb3ZlQWxsUmFuZ2VzKCksZC5hZGRSYW5nZShjKSxkLmV4dGVuZChnWzFdLm5vZGUsZ1sxXS5vZmZzZXQpKX19ZnVuY3Rpb24gayhhLGIpe3JldHVybiBiP2EucmVwbGFjZSh6LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/XCLCoFwiOlwiXCJ9KTphLnJlcGxhY2UodCxcIlwiKX1mdW5jdGlvbiBuKGEpe3ZhciBiPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY2RpdiBkYXRhLWNrZS1oaWRkZW4tc2VsXFx4M2RcIjFcIiBkYXRhLWNrZS10ZW1wXFx4M2RcIjFcIiBzdHlsZVxceDNkXCInKyhDS0VESVRPUi5lbnYuaWU/XCJkaXNwbGF5Om5vbmVcIjpcInBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6LTEwMDBweFwiKStcbidcIlxceDNlXFx4MjZuYnNwO1xceDNjL2RpdlxceDNlJyxhLmRvY3VtZW50KTthLmZpcmUoXCJsb2NrU25hcHNob3RcIik7YS5lZGl0YWJsZSgpLmFwcGVuZChiKTt2YXIgYz1hLmdldFNlbGVjdGlvbigxKSxkPWEuY3JlYXRlUmFuZ2UoKSxlPWMucm9vdC5vbihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKGEpe2EuY2FuY2VsKCl9LG51bGwsbnVsbCwwKTtkLnNldFN0YXJ0QXQoYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7ZC5zZXRFbmRBdChiLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2Muc2VsZWN0UmFuZ2VzKFtkXSk7ZS5yZW1vdmVMaXN0ZW5lcigpO2EuZmlyZShcInVubG9ja1NuYXBzaG90XCIpO2EuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXI9Yn1mdW5jdGlvbiB3KGEpe3ZhciBiPXszNzoxLDM5OjEsODoxLDQ2OjF9O3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1jLmRhdGEuZ2V0S2V5c3Ryb2tlKCk7aWYoYltkXSl7dmFyIGU9YS5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKSxcbmY9ZVswXTsxPT1lLmxlbmd0aCYmZi5jb2xsYXBzZWQmJihkPWZbMzg+ZD9cImdldFByZXZpb3VzRWRpdGFibGVOb2RlXCI6XCJnZXROZXh0RWRpdGFibGVOb2RlXCJdKCkpJiZkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJmYWxzZVwiPT1kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGEuZ2V0U2VsZWN0aW9uKCkuZmFrZShkKSxjLmRhdGEucHJldmVudERlZmF1bHQoKSxjLmNhbmNlbCgpKX19fWZ1bmN0aW9uIGYoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07Yy5nZXRDb21tb25BbmNlc3RvcigpLmlzUmVhZE9ubHkoKSYmYS5zcGxpY2UoYiwxKTtpZighYy5jb2xsYXBzZWQpe2lmKGMuc3RhcnRDb250YWluZXIuaXNSZWFkT25seSgpKWZvcih2YXIgZD1jLnN0YXJ0Q29udGFpbmVyLGU7ZCYmISgoZT1kLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCkmJmQuaXMoXCJib2R5XCIpfHwhZC5pc1JlYWRPbmx5KCkpOyllJiZcImZhbHNlXCI9PVxuZC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJmMuc2V0U3RhcnRBZnRlcihkKSxkPWQuZ2V0UGFyZW50KCk7ZD1jLnN0YXJ0Q29udGFpbmVyO2U9Yy5lbmRDb250YWluZXI7dmFyIGY9Yy5zdGFydE9mZnNldCxnPWMuZW5kT2Zmc2V0LGw9Yy5jbG9uZSgpO2QmJmQudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZj49ZC5nZXRMZW5ndGgoKT9sLnNldFN0YXJ0QWZ0ZXIoZCk6bC5zZXRTdGFydEJlZm9yZShkKSk7ZSYmZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihnP2wuc2V0RW5kQWZ0ZXIoZSk6bC5zZXRFbmRCZWZvcmUoZSkpO2Q9bmV3IENLRURJVE9SLmRvbS53YWxrZXIobCk7ZC5ldmFsdWF0b3I9ZnVuY3Rpb24oZCl7aWYoZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuaXNSZWFkT25seSgpKXt2YXIgZT1jLmNsb25lKCk7Yy5zZXRFbmRCZWZvcmUoZCk7Yy5jb2xsYXBzZWQmJmEuc3BsaWNlKGItLSwxKTtkLmdldFBvc2l0aW9uKGwuZW5kQ29udGFpbmVyKSZcbkNLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TfHwoZS5zZXRTdGFydEFmdGVyKGQpLGUuY29sbGFwc2VkfHxhLnNwbGljZShiKzEsMCxlKSk7cmV0dXJuITB9cmV0dXJuITF9O2QubmV4dCgpfX1yZXR1cm4gYX12YXIgeCxBLHU9Q0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGUoMSksQj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPWEuZWRpdG9yLmNyZWF0ZVJhbmdlKCk7Yy5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihhLnNlbGVjdGVkLGIpJiZhLmVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2NdKTtyZXR1cm4hMX19ZnVuY3Rpb24gYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5lZGl0b3IsZD1jLmNyZWF0ZVJhbmdlKCksZTsoZT1kLm1vdmVUb0Nsb3Nlc3RFZGl0YWJsZVBvc2l0aW9uKGIuc2VsZWN0ZWQsYSkpfHwoZT1kLm1vdmVUb0Nsb3Nlc3RFZGl0YWJsZVBvc2l0aW9uKGIuc2VsZWN0ZWQsIWEpKTtcbmUmJmMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKFtkXSk7Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2Iuc2VsZWN0ZWQucmVtb3ZlKCk7ZXx8KGQubW92ZVRvRWxlbWVudEVkaXRhYmxlUG9zaXRpb24oYy5lZGl0YWJsZSgpKSxjLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbZF0pKTtjLmZpcmUoXCJzYXZlU25hcHNob3RcIik7cmV0dXJuITF9fXZhciBjPWEoKSxkPWEoMSk7cmV0dXJuezM3OmMsMzg6YywzOTpkLDQwOmQsODpiKCksNDY6YigxKX19KCk7Q0tFRElUT1Iub24oXCJpbnN0YW5jZUNyZWF0ZWRcIixmdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7dmFyIGE9ZS5nZXRTZWxlY3Rpb24oKTthJiZhLnJlbW92ZUFsbFJhbmdlcygpfXZhciBlPWIuZWRpdG9yO2Uub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7RD1uZXcgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbihlLmdldFNlbGVjdGlvbigpKTtELmxvY2soKX1mdW5jdGlvbiBjKCl7aC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixcbmMpO2sucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7dmFyIGE9Q0tFRElUT1IuZG9jdW1lbnQuJC5zZWxlY3Rpb24sYj1hLmNyZWF0ZVJhbmdlKCk7XCJOb25lXCIhPWEudHlwZSYmYi5wYXJlbnRFbGVtZW50KCkub3duZXJEb2N1bWVudD09Zi4kJiZiLnNlbGVjdCgpfXZhciBmPWUuZG9jdW1lbnQsaD1DS0VESVRPUi5kb2N1bWVudCxnPWUuZWRpdGFibGUoKSxwPWYuZ2V0Qm9keSgpLGs9Zi5nZXREb2N1bWVudEVsZW1lbnQoKSxuPWcuaXNJbmxpbmUoKSx2LEQ7Q0tFRElUT1IuZW52LmdlY2tvJiZnLmF0dGFjaExpc3RlbmVyKGcsXCJmb2N1c1wiLGZ1bmN0aW9uKGEpe2EucmVtb3ZlTGlzdGVuZXIoKTswIT09diYmKGE9ZS5nZXRTZWxlY3Rpb24oKS5nZXROYXRpdmUoKSkmJmEuaXNDb2xsYXBzZWQmJmEuYW5jaG9yTm9kZT09Zy4kJiYoYT1lLmNyZWF0ZVJhbmdlKCksYS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGcpLGEuc2VsZWN0KCkpfSxudWxsLG51bGwsLTIpO2cuYXR0YWNoTGlzdGVuZXIoZyxcbkNLRURJVE9SLmVudi53ZWJraXQ/XCJET01Gb2N1c0luXCI6XCJmb2N1c1wiLGZ1bmN0aW9uKCl7diYmQ0tFRElUT1IuZW52LndlYmtpdCYmKHY9ZS5fLnByZXZpb3VzQWN0aXZlJiZlLl8ucHJldmlvdXNBY3RpdmUuZXF1YWxzKGYuZ2V0QWN0aXZlKCkpKTtlLnVubG9ja1NlbGVjdGlvbih2KTt2PTB9LG51bGwsbnVsbCwtMSk7Zy5hdHRhY2hMaXN0ZW5lcihnLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oKXt2PTB9KTtpZihDS0VESVRPUi5lbnYuaWV8fG4pcT9nLmF0dGFjaExpc3RlbmVyKGcsXCJiZWZvcmVkZWFjdGl2YXRlXCIsYixudWxsLG51bGwsLTEpOmcuYXR0YWNoTGlzdGVuZXIoZSxcInNlbGVjdGlvbkNoZWNrXCIsYixudWxsLG51bGwsLTEpLGcuYXR0YWNoTGlzdGVuZXIoZyxDS0VESVRPUi5lbnYud2Via2l0P1wiRE9NRm9jdXNPdXRcIjpcImJsdXJcIixmdW5jdGlvbigpe2UubG9ja1NlbGVjdGlvbihEKTt2PTF9LG51bGwsbnVsbCwtMSksZy5hdHRhY2hMaXN0ZW5lcihnLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oKXt2PVxuMH0pO2lmKENLRURJVE9SLmVudi5pZSYmIW4pe3ZhciBJO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpezI9PWEuZGF0YS4kLmJ1dHRvbiYmKChhPWUuZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkpJiZhLmdldFR5cGUoKSE9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkV8fChJPWUud2luZG93LmdldFNjcm9sbFBvc2l0aW9uKCkpKX0pO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNldXBcIixmdW5jdGlvbihhKXsyPT1hLmRhdGEuJC5idXR0b24mJkkmJihlLmRvY3VtZW50LiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ9SS54LGUuZG9jdW1lbnQuJC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wPUkueSk7ST1udWxsfSk7aWYoXCJCYWNrQ29tcGF0XCIhPWYuJC5jb21wYXRNb2RlKXtpZihDS0VESVRPUi5lbnYuaWU3Q29tcGF0fHxDS0VESVRPUi5lbnYuaWU2Q29tcGF0KWsub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2E9YS5kYXRhLiQ7XG5pZihkKXt2YXIgYz1wLiQuY3JlYXRlVGV4dFJhbmdlKCk7dHJ5e2MubW92ZVRvUG9pbnQoYS5jbGllbnRYLGEuY2xpZW50WSl9Y2F0Y2goZSl7fWQuc2V0RW5kUG9pbnQoMD5mLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvU3RhcnRcIixjKT9cIkVuZFRvRW5kXCI6XCJTdGFydFRvU3RhcnRcIixjKTtkLnNlbGVjdCgpfX1mdW5jdGlvbiBjKCl7ay5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGIpO2gucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7ay5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTtkLnNlbGVjdCgpfWE9YS5kYXRhO2lmKGEuZ2V0VGFyZ2V0KCkuaXMoXCJodG1sXCIpJiZhLiQueTxrLiQuY2xpZW50SGVpZ2h0JiZhLiQueDxrLiQuY2xpZW50V2lkdGgpe3ZhciBkPXAuJC5jcmVhdGVUZXh0UmFuZ2UoKTt0cnl7ZC5tb3ZlVG9Qb2ludChhLiQuY2xpZW50WCxhLiQuY2xpZW50WSl9Y2F0Y2goZSl7fXZhciBmPWQuZHVwbGljYXRlKCk7ay5vbihcIm1vdXNlbW92ZVwiLGIpO2gub24oXCJtb3VzZXVwXCIsXG5jKTtrLm9uKFwibW91c2V1cFwiLGMpfX0pO2lmKDc8Q0tFRElUT1IuZW52LnZlcnNpb24mJjExPkNLRURJVE9SLmVudi52ZXJzaW9uKWsub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXthLmRhdGEuZ2V0VGFyZ2V0KCkuaXMoXCJodG1sXCIpJiYoaC5vbihcIm1vdXNldXBcIixjKSxrLm9uKFwibW91c2V1cFwiLGMpKX0pfX1nLmF0dGFjaExpc3RlbmVyKGcsXCJzZWxlY3Rpb25jaGFuZ2VcIixhLGUpO2cuYXR0YWNoTGlzdGVuZXIoZyxcImtleXVwXCIsZCxlKTtnLmF0dGFjaExpc3RlbmVyKGcsQ0tFRElUT1IuZW52LndlYmtpdD9cIkRPTUZvY3VzSW5cIjpcImZvY3VzXCIsZnVuY3Rpb24oKXtlLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7ZS5zZWxlY3Rpb25DaGFuZ2UoMSl9KTtpZihuJiYoQ0tFRElUT1IuZW52LndlYmtpdHx8Q0tFRElUT1IuZW52LmdlY2tvKSl7dmFyIEU7Zy5hdHRhY2hMaXN0ZW5lcihnLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oKXtFPTF9KTtnLmF0dGFjaExpc3RlbmVyKGYuZ2V0RG9jdW1lbnRFbGVtZW50KCksXG5cIm1vdXNldXBcIixmdW5jdGlvbigpe0UmJmQuY2FsbChlKTtFPTB9KX1lbHNlIGcuYXR0YWNoTGlzdGVuZXIoQ0tFRElUT1IuZW52LmllP2c6Zi5nZXREb2N1bWVudEVsZW1lbnQoKSxcIm1vdXNldXBcIixkLGUpO0NLRURJVE9SLmVudi53ZWJraXQmJmcuYXR0YWNoTGlzdGVuZXIoZixcImtleWRvd25cIixmdW5jdGlvbihhKXtzd2l0Y2goYS5kYXRhLmdldEtleSgpKXtjYXNlIDEzOmNhc2UgMzM6Y2FzZSAzNDpjYXNlIDM1OmNhc2UgMzY6Y2FzZSAzNzpjYXNlIDM5OmNhc2UgODpjYXNlIDQ1OmNhc2UgNDY6bChnKX19LG51bGwsbnVsbCwtMSk7Zy5hdHRhY2hMaXN0ZW5lcihnLFwia2V5ZG93blwiLHcoZSksbnVsbCxudWxsLC0xKX0pO2Uub24oXCJzZXREYXRhXCIsZnVuY3Rpb24oKXtlLnVubG9ja1NlbGVjdGlvbigpO0NLRURJVE9SLmVudi53ZWJraXQmJmMoKX0pO2Uub24oXCJjb250ZW50RG9tVW5sb2FkXCIsZnVuY3Rpb24oKXtlLnVubG9ja1NlbGVjdGlvbigpfSk7aWYoQ0tFRElUT1IuZW52LmllOUNvbXBhdCllLm9uKFwiYmVmb3JlRGVzdHJveVwiLFxuYyxudWxsLG51bGwsOSk7ZS5vbihcImRhdGFSZWFkeVwiLGZ1bmN0aW9uKCl7ZGVsZXRlIGUuXy5mYWtlU2VsZWN0aW9uO2RlbGV0ZSBlLl8uaGlkZGVuU2VsZWN0aW9uQ29udGFpbmVyO2Uuc2VsZWN0aW9uQ2hhbmdlKDEpfSk7ZS5vbihcImxvYWRTbmFwc2hvdFwiLGZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZShDS0VESVRPUi5OT0RFX0VMRU1FTlQpLGI9ZS5lZGl0YWJsZSgpLmdldExhc3QoYSk7YiYmYi5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS1oaWRkZW4tc2VsXCIpJiYoYi5yZW1vdmUoKSxDS0VESVRPUi5lbnYuZ2Vja28mJihhPWUuZWRpdGFibGUoKS5nZXRGaXJzdChhKSkmJmEuaXMoXCJiclwiKSYmYS5nZXRBdHRyaWJ1dGUoXCJfbW96X2VkaXRvcl9ib2d1c19ub2RlXCIpJiZhLnJlbW92ZSgpKX0sbnVsbCxudWxsLDEwMCk7ZS5vbihcImtleVwiLGZ1bmN0aW9uKGEpe2lmKFwid3lzaXd5Z1wiPT1lLm1vZGUpe3ZhciBiPWUuZ2V0U2VsZWN0aW9uKCk7aWYoYi5pc0Zha2Upe3ZhciBjPVxuQlthLmRhdGEua2V5Q29kZV07aWYoYylyZXR1cm4gYyh7ZWRpdG9yOmUsc2VsZWN0ZWQ6Yi5nZXRTZWxlY3RlZEVsZW1lbnQoKSxzZWxlY3Rpb246YixrZXlFdmVudDphfSl9fX0pfSk7aWYoQ0tFRElUT1IuZW52LndlYmtpdClDS0VESVRPUi5vbihcImluc3RhbmNlUmVhZHlcIixmdW5jdGlvbihhKXt2YXIgYj1hLmVkaXRvcjtiLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgYT1iLmVkaXRhYmxlKCksYz1hLmdldEN1c3RvbURhdGEoXCJja2UtZmlsbGluZ0NoYXJcIik7YyYmKGMuZ2V0Q3VzdG9tRGF0YShcInJlYWR5XCIpP2woYSk6Yy5zZXRDdXN0b21EYXRhKFwicmVhZHlcIiwxKSl9LG51bGwsbnVsbCwtMSk7Yi5vbihcImJlZm9yZVNldE1vZGVcIixmdW5jdGlvbigpe2woYi5lZGl0YWJsZSgpKX0sbnVsbCxudWxsLC0xKTtiLm9uKFwiZ2V0U25hcHNob3RcIixmdW5jdGlvbihhKXthLmRhdGEmJihhLmRhdGE9ayhhLmRhdGEpKX0sYixudWxsLDIwKTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsXG5mdW5jdGlvbihhKXthLmRhdGEuZGF0YVZhbHVlPWsoYS5kYXRhLmRhdGFWYWx1ZSl9LG51bGwsbnVsbCwwKX0pO0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuc2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKGIpeyhiP2E6ZCkuY2FsbCh0aGlzKX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuXy5zYXZlZFNlbGVjdGlvbiYmIXRoaXMuXy5mYWtlU2VsZWN0aW9ufHxhPyhhPXRoaXMuZWRpdGFibGUoKSkmJlwid3lzaXd5Z1wiPT10aGlzLm1vZGU/bmV3IENLRURJVE9SLmRvbS5zZWxlY3Rpb24oYSk6bnVsbDp0aGlzLl8uc2F2ZWRTZWxlY3Rpb258fHRoaXMuXy5mYWtlU2VsZWN0aW9ufTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmxvY2tTZWxlY3Rpb249ZnVuY3Rpb24oYSl7YT1hfHx0aGlzLmdldFNlbGVjdGlvbigxKTtyZXR1cm4gYS5nZXRUeXBlKCkhPUNLRURJVE9SLlNFTEVDVElPTl9OT05FPyghYS5pc0xvY2tlZCYmXG5hLmxvY2soKSx0aGlzLl8uc2F2ZWRTZWxlY3Rpb249YSwhMCk6ITF9O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUudW5sb2NrU2VsZWN0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy5zYXZlZFNlbGVjdGlvbjtyZXR1cm4gYj8oYi51bmxvY2soYSksZGVsZXRlIHRoaXMuXy5zYXZlZFNlbGVjdGlvbiwhMCk6ITF9O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuZm9yY2VOZXh0U2VsZWN0aW9uQ2hlY2s9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fLnNlbGVjdGlvblByZXZpb3VzUGF0aH07Q0tFRElUT1IuZG9tLmRvY3VtZW50LnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5zZWxlY3Rpb24odGhpcyl9O0NLRURJVE9SLmRvbS5yYW5nZS5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yb290IGluc3RhbmNlb2YgQ0tFRElUT1IuZWRpdGFibGU/dGhpcy5yb290LmVkaXRvci5nZXRTZWxlY3Rpb24oKTpcbm5ldyBDS0VESVRPUi5kb20uc2VsZWN0aW9uKHRoaXMucm9vdCk7YS5zZWxlY3RSYW5nZXMoW3RoaXNdKTtyZXR1cm4gYX07Q0tFRElUT1IuU0VMRUNUSU9OX05PTkU9MTtDS0VESVRPUi5TRUxFQ1RJT05fVEVYVD0yO0NLRURJVE9SLlNFTEVDVElPTl9FTEVNRU5UPTM7dmFyIHE9XCJmdW5jdGlvblwiIT10eXBlb2Ygd2luZG93LmdldFNlbGVjdGlvbix5PTE7Q0tFRElUT1IuZG9tLnNlbGVjdGlvbj1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbil7dmFyIGI9YTthPWEucm9vdH12YXIgYz1hIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQ7dGhpcy5yZXY9Yj9iLnJldjp5Kys7dGhpcy5kb2N1bWVudD1hIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmRvY3VtZW50P2E6YS5nZXREb2N1bWVudCgpO3RoaXMucm9vdD1jP2E6dGhpcy5kb2N1bWVudC5nZXRCb2R5KCk7dGhpcy5pc0xvY2tlZD0wO3RoaXMuXz17Y2FjaGU6e319O2lmKGIpcmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLl8uY2FjaGUsXG5iLl8uY2FjaGUpLHRoaXMuaXNGYWtlPWIuaXNGYWtlLHRoaXMuaXNMb2NrZWQ9Yi5pc0xvY2tlZCx0aGlzO2E9dGhpcy5nZXROYXRpdmUoKTt2YXIgZCxlO2lmKGEpaWYoYS5nZXRSYW5nZUF0KWQ9KGU9YS5yYW5nZUNvdW50JiZhLmdldFJhbmdlQXQoMCkpJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcik7ZWxzZXt0cnl7ZT1hLmNyZWF0ZVJhbmdlKCl9Y2F0Y2goZil7fWQ9ZSYmQ0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGUuaXRlbSYmZS5pdGVtKDApfHxlLnBhcmVudEVsZW1lbnQoKSl9aWYoIWR8fGQudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVHx8IXRoaXMucm9vdC5lcXVhbHMoZCkmJiF0aGlzLnJvb3QuY29udGFpbnMoZCkpdGhpcy5fLmNhY2hlLnR5cGU9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkUsdGhpcy5fLmNhY2hlLnN0YXJ0RWxlbWVudD1udWxsLHRoaXMuXy5jYWNoZS5zZWxlY3RlZEVsZW1lbnQ9XG5udWxsLHRoaXMuXy5jYWNoZS5zZWxlY3RlZFRleHQ9XCJcIix0aGlzLl8uY2FjaGUucmFuZ2VzPW5ldyBDS0VESVRPUi5kb20ucmFuZ2VMaXN0O3JldHVybiB0aGlzfTt2YXIgRj17aW1nOjEsaHI6MSxsaToxLHRhYmxlOjEsdHI6MSx0ZDoxLHRoOjEsZW1iZWQ6MSxvYmplY3Q6MSxvbDoxLHVsOjEsYToxLGlucHV0OjEsZm9ybToxLHNlbGVjdDoxLHRleHRhcmVhOjEsYnV0dG9uOjEsZmllbGRzZXQ6MSx0aGVhZDoxLHRmb290OjF9LHQ9Q0tFRElUT1IudG9vbHMucmVwZWF0KFwi4oCLXCIsNyksej1uZXcgUmVnRXhwKHQrXCIoICk/XCIsXCJnXCIpO0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20uc2VsZWN0aW9uLHtfcmVtb3ZlRmlsbGluZ0NoYXJTZXF1ZW5jZVN0cmluZzprLF9jcmVhdGVGaWxsaW5nQ2hhclNlcXVlbmNlTm9kZTpnLEZJTExJTkdfQ0hBUl9TRVFVRU5DRTp0fSk7Q0tFRElUT1IuZG9tLnNlbGVjdGlvbi5wcm90b3R5cGU9e2dldE5hdGl2ZTpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT1cbnRoaXMuXy5jYWNoZS5uYXRpdmVTZWw/dGhpcy5fLmNhY2hlLm5hdGl2ZVNlbDp0aGlzLl8uY2FjaGUubmF0aXZlU2VsPXE/dGhpcy5kb2N1bWVudC4kLnNlbGVjdGlvbjp0aGlzLmRvY3VtZW50LmdldFdpbmRvdygpLiQuZ2V0U2VsZWN0aW9uKCl9LGdldFR5cGU6cT9mdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5jYWNoZTtpZihhLnR5cGUpcmV0dXJuIGEudHlwZTt2YXIgYj1DS0VESVRPUi5TRUxFQ1RJT05fTk9ORTt0cnl7dmFyIGM9dGhpcy5nZXROYXRpdmUoKSxkPWMudHlwZTtcIlRleHRcIj09ZCYmKGI9Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQpO1wiQ29udHJvbFwiPT1kJiYoYj1DS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVCk7Yy5jcmVhdGVSYW5nZSgpLnBhcmVudEVsZW1lbnQoKSYmKGI9Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQpfWNhdGNoKGUpe31yZXR1cm4gYS50eXBlPWJ9OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmNhY2hlO2lmKGEudHlwZSlyZXR1cm4gYS50eXBlO3ZhciBiPVxuQ0tFRElUT1IuU0VMRUNUSU9OX1RFWFQsYz10aGlzLmdldE5hdGl2ZSgpO2lmKCFjfHwhYy5yYW5nZUNvdW50KWI9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkU7ZWxzZSBpZigxPT1jLnJhbmdlQ291bnQpe3ZhciBjPWMuZ2V0UmFuZ2VBdCgwKSxkPWMuc3RhcnRDb250YWluZXI7ZD09Yy5lbmRDb250YWluZXImJjE9PWQubm9kZVR5cGUmJjE9PWMuZW5kT2Zmc2V0LWMuc3RhcnRPZmZzZXQmJkZbZC5jaGlsZE5vZGVzW2Muc3RhcnRPZmZzZXRdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldJiYoYj1DS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVCl9cmV0dXJuIGEudHlwZT1ifSxnZXRSYW5nZXM6ZnVuY3Rpb24oKXt2YXIgYT1xP2Z1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtyZXR1cm4obmV3IENLRURJVE9SLmRvbS5ub2RlKGIpKS5nZXRJbmRleCgpfXZhciBiPWZ1bmN0aW9uKGIsYyl7Yj1iLmR1cGxpY2F0ZSgpO2IuY29sbGFwc2UoYyk7dmFyIGQ9Yi5wYXJlbnRFbGVtZW50KCk7aWYoIWQuaGFzQ2hpbGROb2RlcygpKXJldHVybntjb250YWluZXI6ZCxcbm9mZnNldDowfTtmb3IodmFyIGU9ZC5jaGlsZHJlbixmLGcsaD1iLmR1cGxpY2F0ZSgpLGw9MCx2PWUubGVuZ3RoLTEsaz0tMSxtLEU7bDw9djspaWYoaz1NYXRoLmZsb29yKChsK3YpLzIpLGY9ZVtrXSxoLm1vdmVUb0VsZW1lbnRUZXh0KGYpLG09aC5jb21wYXJlRW5kUG9pbnRzKFwiU3RhcnRUb1N0YXJ0XCIsYiksMDxtKXY9ay0xO2Vsc2UgaWYoMD5tKWw9aysxO2Vsc2UgcmV0dXJue2NvbnRhaW5lcjpkLG9mZnNldDphKGYpfTtpZigtMT09a3x8az09ZS5sZW5ndGgtMSYmMD5tKXtoLm1vdmVUb0VsZW1lbnRUZXh0KGQpO2guc2V0RW5kUG9pbnQoXCJTdGFydFRvU3RhcnRcIixiKTtoPWgudGV4dC5yZXBsYWNlKC8oXFxyXFxufFxccikvZyxcIlxcblwiKS5sZW5ndGg7ZT1kLmNoaWxkTm9kZXM7aWYoIWgpcmV0dXJuIGY9ZVtlLmxlbmd0aC0xXSxmLm5vZGVUeXBlIT1DS0VESVRPUi5OT0RFX1RFWFQ/e2NvbnRhaW5lcjpkLG9mZnNldDplLmxlbmd0aH06e2NvbnRhaW5lcjpmLG9mZnNldDpmLm5vZGVWYWx1ZS5sZW5ndGh9O1xuZm9yKGQ9ZS5sZW5ndGg7MDxoJiYwPGQ7KWc9ZVstLWRdLGcubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKEU9ZyxoLT1nLm5vZGVWYWx1ZS5sZW5ndGgpO3JldHVybntjb250YWluZXI6RSxvZmZzZXQ6LWh9fWguY29sbGFwc2UoMDxtPyEwOiExKTtoLnNldEVuZFBvaW50KDA8bT9cIlN0YXJ0VG9TdGFydFwiOlwiRW5kVG9TdGFydFwiLGIpO2g9aC50ZXh0LnJlcGxhY2UoLyhcXHJcXG58XFxyKS9nLFwiXFxuXCIpLmxlbmd0aDtpZighaClyZXR1cm57Y29udGFpbmVyOmQsb2Zmc2V0OmEoZikrKDA8bT8wOjEpfTtmb3IoOzA8aDspdHJ5e2c9ZlswPG0/XCJwcmV2aW91c1NpYmxpbmdcIjpcIm5leHRTaWJsaW5nXCJdLGcubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGgtPWcubm9kZVZhbHVlLmxlbmd0aCxFPWcpLGY9Z31jYXRjaChuKXtyZXR1cm57Y29udGFpbmVyOmQsb2Zmc2V0OmEoZil9fXJldHVybntjb250YWluZXI6RSxvZmZzZXQ6MDxtPy1oOkUubm9kZVZhbHVlLmxlbmd0aCtofX07XG5yZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldE5hdGl2ZSgpLGM9YSYmYS5jcmVhdGVSYW5nZSgpLGQ9dGhpcy5nZXRUeXBlKCk7aWYoIWEpcmV0dXJuW107aWYoZD09Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQpcmV0dXJuIGE9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpLGQ9YihjLCEwKSxhLnNldFN0YXJ0KG5ldyBDS0VESVRPUi5kb20ubm9kZShkLmNvbnRhaW5lciksZC5vZmZzZXQpLGQ9YihjKSxhLnNldEVuZChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZC5jb250YWluZXIpLGQub2Zmc2V0KSxhLmVuZENvbnRhaW5lci5nZXRQb3NpdGlvbihhLnN0YXJ0Q29udGFpbmVyKSZDS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkcmJmEuZW5kT2Zmc2V0PD1hLnN0YXJ0Q29udGFpbmVyLmdldEluZGV4KCkmJmEuY29sbGFwc2UoKSxbYV07aWYoZD09Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQpe2Zvcih2YXIgZD1bXSxlPTA7ZTxjLmxlbmd0aDtlKyspe2Zvcih2YXIgZj1cbmMuaXRlbShlKSxoPWYucGFyZW50Tm9kZSxnPTAsYT1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCk7ZzxoLmNoaWxkTm9kZXMubGVuZ3RoJiZoLmNoaWxkTm9kZXNbZ10hPWY7ZysrKTthLnNldFN0YXJ0KG5ldyBDS0VESVRPUi5kb20ubm9kZShoKSxnKTthLnNldEVuZChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoaCksZysxKTtkLnB1c2goYSl9cmV0dXJuIGR9cmV0dXJuW119fSgpOmZ1bmN0aW9uKCl7dmFyIGE9W10sYixjPXRoaXMuZ2V0TmF0aXZlKCk7aWYoIWMpcmV0dXJuIGE7Zm9yKHZhciBkPTA7ZDxjLnJhbmdlQ291bnQ7ZCsrKXt2YXIgZT1jLmdldFJhbmdlQXQoZCk7Yj1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCk7Yi5zZXRTdGFydChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZS5zdGFydENvbnRhaW5lciksZS5zdGFydE9mZnNldCk7Yi5zZXRFbmQobmV3IENLRURJVE9SLmRvbS5ub2RlKGUuZW5kQ29udGFpbmVyKSxlLmVuZE9mZnNldCk7YS5wdXNoKGIpfXJldHVybiBhfTtcbnJldHVybiBmdW5jdGlvbihiKXt2YXIgYz10aGlzLl8uY2FjaGUsZD1jLnJhbmdlcztkfHwoYy5yYW5nZXM9ZD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdChhLmNhbGwodGhpcykpKTtyZXR1cm4gYj9mKG5ldyBDS0VESVRPUi5kb20ucmFuZ2VMaXN0KGQuc2xpY2UoKSkpOmR9fSgpLGdldFN0YXJ0RWxlbWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5jYWNoZTtpZih2b2lkIDAhPT1hLnN0YXJ0RWxlbWVudClyZXR1cm4gYS5zdGFydEVsZW1lbnQ7dmFyIGI7c3dpdGNoKHRoaXMuZ2V0VHlwZSgpKXtjYXNlIENLRURJVE9SLlNFTEVDVElPTl9FTEVNRU5UOnJldHVybiB0aGlzLmdldFNlbGVjdGVkRWxlbWVudCgpO2Nhc2UgQ0tFRElUT1IuU0VMRUNUSU9OX1RFWFQ6dmFyIGM9dGhpcy5nZXRSYW5nZXMoKVswXTtpZihjKXtpZihjLmNvbGxhcHNlZCliPWMuc3RhcnRDb250YWluZXIsYi50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiPWIuZ2V0UGFyZW50KCkpO2Vsc2V7Zm9yKGMub3B0aW1pemUoKTtiPVxuYy5zdGFydENvbnRhaW5lcixjLnN0YXJ0T2Zmc2V0PT0oYi5nZXRDaGlsZENvdW50P2IuZ2V0Q2hpbGRDb3VudCgpOmIuZ2V0TGVuZ3RoKCkpJiYhYi5pc0Jsb2NrQm91bmRhcnkoKTspYy5zZXRTdGFydEFmdGVyKGIpO2I9Yy5zdGFydENvbnRhaW5lcjtpZihiLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gYi5nZXRQYXJlbnQoKTtpZigoYj1iLmdldENoaWxkKGMuc3RhcnRPZmZzZXQpKSYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpZm9yKGM9Yi5nZXRGaXJzdCgpO2MmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UOyliPWMsYz1jLmdldEZpcnN0KCk7ZWxzZSBiPWMuc3RhcnRDb250YWluZXJ9Yj1iLiR9fXJldHVybiBhLnN0YXJ0RWxlbWVudD1iP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChiKTpudWxsfSxnZXRTZWxlY3RlZEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYodm9pZCAwIT09YS5zZWxlY3RlZEVsZW1lbnQpcmV0dXJuIGEuc2VsZWN0ZWRFbGVtZW50O1xudmFyIGI9dGhpcyxjPUNLRURJVE9SLnRvb2xzLnRyeVRoZXNlKGZ1bmN0aW9uKCl7cmV0dXJuIGIuZ2V0TmF0aXZlKCkuY3JlYXRlUmFuZ2UoKS5pdGVtKDApfSxmdW5jdGlvbigpe2Zvcih2YXIgYT1iLmdldFJhbmdlcygpWzBdLmNsb25lKCksYyxkLGU9MjtlJiYhKChjPWEuZ2V0RW5jbG9zZWROb2RlKCkpJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmRltjLmdldE5hbWUoKV0mJihkPWMpKTtlLS0pYS5zaHJpbmsoQ0tFRElUT1IuU0hSSU5LX0VMRU1FTlQpO3JldHVybiBkJiZkLiR9KTtyZXR1cm4gYS5zZWxlY3RlZEVsZW1lbnQ9Yz9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYyk6bnVsbH0sZ2V0U2VsZWN0ZWRUZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmNhY2hlO2lmKHZvaWQgMCE9PWEuc2VsZWN0ZWRUZXh0KXJldHVybiBhLnNlbGVjdGVkVGV4dDt2YXIgYj10aGlzLmdldE5hdGl2ZSgpLGI9cT9cIkNvbnRyb2xcIj09Yi50eXBlP1wiXCI6Yi5jcmVhdGVSYW5nZSgpLnRleHQ6XG5iLnRvU3RyaW5nKCk7cmV0dXJuIGEuc2VsZWN0ZWRUZXh0PWJ9LGxvY2s6ZnVuY3Rpb24oKXt0aGlzLmdldFJhbmdlcygpO3RoaXMuZ2V0U3RhcnRFbGVtZW50KCk7dGhpcy5nZXRTZWxlY3RlZEVsZW1lbnQoKTt0aGlzLmdldFNlbGVjdGVkVGV4dCgpO3RoaXMuXy5jYWNoZS5uYXRpdmVTZWw9bnVsbDt0aGlzLmlzTG9ja2VkPTF9LHVubG9jazpmdW5jdGlvbihhKXtpZih0aGlzLmlzTG9ja2VkKXtpZihhKXZhciBiPXRoaXMuZ2V0U2VsZWN0ZWRFbGVtZW50KCksYz0hYiYmdGhpcy5nZXRSYW5nZXMoKSxkPXRoaXMuaXNGYWtlO3RoaXMuaXNMb2NrZWQ9MDt0aGlzLnJlc2V0KCk7YSYmKGE9Ynx8Y1swXSYmY1swXS5nZXRDb21tb25BbmNlc3RvcigpKSYmYS5nZXRBc2NlbmRhbnQoXCJib2R5XCIsMSkmJihkP3RoaXMuZmFrZShiKTpiP3RoaXMuc2VsZWN0RWxlbWVudChiKTp0aGlzLnNlbGVjdFJhbmdlcyhjKSl9fSxyZXNldDpmdW5jdGlvbigpe3RoaXMuXy5jYWNoZT17fTt0aGlzLmlzRmFrZT1cbjA7dmFyIGE9dGhpcy5yb290LmVkaXRvcjtpZihhJiZhLl8uZmFrZVNlbGVjdGlvbilpZih0aGlzLnJldj09YS5fLmZha2VTZWxlY3Rpb24ucmV2KXtkZWxldGUgYS5fLmZha2VTZWxlY3Rpb247dmFyIGI9YS5fLmhpZGRlblNlbGVjdGlvbkNvbnRhaW5lcjtpZihiKXt2YXIgYz1hLmNoZWNrRGlydHkoKTthLmZpcmUoXCJsb2NrU25hcHNob3RcIik7Yi5yZW1vdmUoKTthLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKTshYyYmYS5yZXNldERpcnR5KCl9ZGVsZXRlIGEuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXJ9ZWxzZSBDS0VESVRPUi53YXJuKFwic2VsZWN0aW9uLWZha2UtcmVzZXRcIik7dGhpcy5yZXY9eSsrfSxzZWxlY3RFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtiLnNldFN0YXJ0QmVmb3JlKGEpO2Iuc2V0RW5kQWZ0ZXIoYSk7dGhpcy5zZWxlY3RSYW5nZXMoW2JdKX0sc2VsZWN0UmFuZ2VzOmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcy5yb290LmVkaXRvcixiPWImJmIuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXI7dGhpcy5yZXNldCgpO2lmKGIpZm9yKHZhciBiPXRoaXMucm9vdCxjLGQ9MDtkPGEubGVuZ3RoOysrZCljPWFbZF0sYy5lbmRDb250YWluZXIuZXF1YWxzKGIpJiYoYy5lbmRPZmZzZXQ9TWF0aC5taW4oYy5lbmRPZmZzZXQsYi5nZXRDaGlsZENvdW50KCkpKTtpZihhLmxlbmd0aClpZih0aGlzLmlzTG9ja2VkKXt2YXIgZj1DS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKTt0aGlzLnVubG9jaygpO3RoaXMuc2VsZWN0UmFuZ2VzKGEpO3RoaXMubG9jaygpO2YmJiFmLmVxdWFscyh0aGlzLnJvb3QpJiZmLmZvY3VzKCl9ZWxzZXt2YXIgazthOnt2YXIgbix3O2lmKDE9PWEubGVuZ3RoJiYhKHc9YVswXSkuY29sbGFwc2VkJiYoaz13LmdldEVuY2xvc2VkTm9kZSgpKSYmay50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJih3PXcuY2xvbmUoKSx3LnNocmluayhDS0VESVRPUi5TSFJJTktfRUxFTUVOVCxcbiEwKSwobj13LmdldEVuY2xvc2VkTm9kZSgpKSYmbi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihrPW4pLFwiZmFsc2VcIj09ay5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpKWJyZWFrIGE7az12b2lkIDB9aWYoayl0aGlzLmZha2Uoayk7ZWxzZXtpZihxKXt3PUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoITApO249L1xcdWZlZmZ8XFx1MDBhMC87Yj17dGFibGU6MSx0Ym9keToxLHRyOjF9OzE8YS5sZW5ndGgmJihrPWFbYS5sZW5ndGgtMV0sYVswXS5zZXRFbmQoay5lbmRDb250YWluZXIsay5lbmRPZmZzZXQpKTtrPWFbMF07YT1rLmNvbGxhcHNlZDt2YXIgdSx0LHg7aWYoKGM9ay5nZXRFbmNsb3NlZE5vZGUoKSkmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZjLmdldE5hbWUoKWluIEYmJighYy5pcyhcImFcIil8fCFjLmdldFRleHQoKSkpdHJ5e3g9Yy4kLmNyZWF0ZUNvbnRyb2xSYW5nZSgpO3guYWRkRWxlbWVudChjLiQpO3guc2VsZWN0KCk7XG5yZXR1cm59Y2F0Y2godil7fWlmKGsuc3RhcnRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZrLnN0YXJ0Q29udGFpbmVyLmdldE5hbWUoKWluIGJ8fGsuZW5kQ29udGFpbmVyLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmay5lbmRDb250YWluZXIuZ2V0TmFtZSgpaW4gYilrLnNocmluayhDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApLGE9ay5jb2xsYXBzZWQ7eD1rLmNyZWF0ZUJvb2ttYXJrKCk7Yj14LnN0YXJ0Tm9kZTthfHwoZj14LmVuZE5vZGUpO3g9ay5kb2N1bWVudC4kLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7eC5tb3ZlVG9FbGVtZW50VGV4dChiLiQpO3gubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsMSk7Zj8obj1rLmRvY3VtZW50LiQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSxuLm1vdmVUb0VsZW1lbnRUZXh0KGYuJCkseC5zZXRFbmRQb2ludChcIkVuZFRvRW5kXCIsbikseC5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsLTEpKToodT1iLmdldE5leHQodyksdD1cbmIuaGFzQXNjZW5kYW50KFwicHJlXCIpLHU9ISh1JiZ1LmdldFRleHQmJnUuZ2V0VGV4dCgpLm1hdGNoKG4pKSYmKHR8fCFiLmhhc1ByZXZpb3VzKCl8fGIuZ2V0UHJldmlvdXMoKS5pcyYmYi5nZXRQcmV2aW91cygpLmlzKFwiYnJcIikpLHQ9ay5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0LnNldEh0bWwoXCJcXHgyNiM2NTI3OTtcIiksdC5pbnNlcnRCZWZvcmUoYiksdSYmay5kb2N1bWVudC5jcmVhdGVUZXh0KFwi77u/XCIpLmluc2VydEJlZm9yZShiKSk7ay5zZXRTdGFydEJlZm9yZShiKTtiLnJlbW92ZSgpO2E/KHU/KHgubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsLTEpLHguc2VsZWN0KCksay5kb2N1bWVudC4kLnNlbGVjdGlvbi5jbGVhcigpKTp4LnNlbGVjdCgpLGsubW92ZVRvUG9zaXRpb24odCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLHQucmVtb3ZlKCkpOihrLnNldEVuZEJlZm9yZShmKSxmLnJlbW92ZSgpLHguc2VsZWN0KCkpfWVsc2V7Zj10aGlzLmdldE5hdGl2ZSgpO1xuaWYoIWYpcmV0dXJuO3RoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7Zm9yKHg9MDt4PGEubGVuZ3RoO3grKyl7aWYoeDxhLmxlbmd0aC0xJiYodT1hW3hdLHQ9YVt4KzFdLG49dS5jbG9uZSgpLG4uc2V0U3RhcnQodS5lbmRDb250YWluZXIsdS5lbmRPZmZzZXQpLG4uc2V0RW5kKHQuc3RhcnRDb250YWluZXIsdC5zdGFydE9mZnNldCksIW4uY29sbGFwc2VkJiYobi5zaHJpbmsoQ0tFRElUT1IuTk9ERV9FTEVNRU5ULCEwKSxrPW4uZ2V0Q29tbW9uQW5jZXN0b3IoKSxuPW4uZ2V0RW5jbG9zZWROb2RlKCksay5pc1JlYWRPbmx5KCl8fG4mJm4uaXNSZWFkT25seSgpKSkpe3Quc2V0U3RhcnQodS5zdGFydENvbnRhaW5lcix1LnN0YXJ0T2Zmc2V0KTthLnNwbGljZSh4LS0sMSk7Y29udGludWV9az1hW3hdO3Q9dGhpcy5kb2N1bWVudC4kLmNyZWF0ZVJhbmdlKCk7ay5jb2xsYXBzZWQmJkNLRURJVE9SLmVudi53ZWJraXQmJmUoaykmJihuPWcodGhpcy5yb290KSxrLmluc2VydE5vZGUobiksKHU9XG5uLmdldE5leHQoKSkmJiFuLmdldFByZXZpb3VzKCkmJnUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImJyXCI9PXUuZ2V0TmFtZSgpPyhsKHRoaXMucm9vdCksay5tb3ZlVG9Qb3NpdGlvbih1LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCkpOmsubW92ZVRvUG9zaXRpb24obixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTt0LnNldFN0YXJ0KGsuc3RhcnRDb250YWluZXIuJCxrLnN0YXJ0T2Zmc2V0KTt0cnl7dC5zZXRFbmQoay5lbmRDb250YWluZXIuJCxrLmVuZE9mZnNldCl9Y2F0Y2goRCl7aWYoMDw9RC50b1N0cmluZygpLmluZGV4T2YoXCJOU19FUlJPUl9JTExFR0FMX1ZBTFVFXCIpKWsuY29sbGFwc2UoMSksdC5zZXRFbmQoay5lbmRDb250YWluZXIuJCxrLmVuZE9mZnNldCk7ZWxzZSB0aHJvdyBEO31mLmFkZFJhbmdlKHQpfX10aGlzLnJlc2V0KCk7dGhpcy5yb290LmZpcmUoXCJzZWxlY3Rpb25jaGFuZ2VcIil9fX0sZmFrZTpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMucm9vdC5lZGl0b3I7dGhpcy5yZXNldCgpO24oYik7dmFyIGM9dGhpcy5fLmNhY2hlLGQ9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2Quc2V0U3RhcnRCZWZvcmUoYSk7ZC5zZXRFbmRBZnRlcihhKTtjLnJhbmdlcz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdChkKTtjLnNlbGVjdGVkRWxlbWVudD1jLnN0YXJ0RWxlbWVudD1hO2MudHlwZT1DS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVDtjLnNlbGVjdGVkVGV4dD1jLm5hdGl2ZVNlbD1udWxsO3RoaXMuaXNGYWtlPTE7dGhpcy5yZXY9eSsrO2IuXy5mYWtlU2VsZWN0aW9uPXRoaXM7dGhpcy5yb290LmZpcmUoXCJzZWxlY3Rpb25jaGFuZ2VcIil9LGlzSGlkZGVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDb21tb25BbmNlc3RvcigpO2EmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoYT1hLmdldFBhcmVudCgpKTtyZXR1cm4hKCFhfHwhYS5kYXRhKFwiY2tlLWhpZGRlbi1zZWxcIikpfSxjcmVhdGVCb29rbWFya3M6ZnVuY3Rpb24oYSl7YT1cbnRoaXMuZ2V0UmFuZ2VzKCkuY3JlYXRlQm9va21hcmtzKGEpO3RoaXMuaXNGYWtlJiYoYS5pc0Zha2U9MSk7cmV0dXJuIGF9LGNyZWF0ZUJvb2ttYXJrczI6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFJhbmdlcygpLmNyZWF0ZUJvb2ttYXJrczIoYSk7dGhpcy5pc0Zha2UmJihhLmlzRmFrZT0xKTtyZXR1cm4gYX0sc2VsZWN0Qm9va21hcmtzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2UubW92ZVRvQm9va21hcmsoYVtkXSk7Yi5wdXNoKGUpfWEuaXNGYWtlJiYoYz1iWzBdLmdldEVuY2xvc2VkTm9kZSgpLGMmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwoQ0tFRElUT1Iud2FybihcInNlbGVjdGlvbi1ub3QtZmFrZVwiKSxhLmlzRmFrZT0wKSk7YS5pc0Zha2U/dGhpcy5mYWtlKGMpOnRoaXMuc2VsZWN0UmFuZ2VzKGIpO3JldHVybiB0aGlzfSxnZXRDb21tb25BbmNlc3RvcjpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5nZXRSYW5nZXMoKTtyZXR1cm4gYS5sZW5ndGg/YVswXS5zdGFydENvbnRhaW5lci5nZXRDb21tb25BbmNlc3RvcihhW2EubGVuZ3RoLTFdLmVuZENvbnRhaW5lcik6bnVsbH0sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oKXt0aGlzLnR5cGUhPUNLRURJVE9SLlNFTEVDVElPTl9OT05FJiZ0aGlzLmdldFJhbmdlcygpWzBdLnNjcm9sbEludG9WaWV3KCl9LHJlbW92ZUFsbFJhbmdlczpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0VHlwZSgpIT1DS0VESVRPUi5TRUxFQ1RJT05fTk9ORSl7dmFyIGE9dGhpcy5nZXROYXRpdmUoKTt0cnl7YSYmYVtxP1wiZW1wdHlcIjpcInJlbW92ZUFsbFJhbmdlc1wiXSgpfWNhdGNoKGIpe310aGlzLnJlc2V0KCl9fX19KSgpO1widXNlIHN0cmljdFwiO0NLRURJVE9SLlNUWUxFX0JMT0NLPTE7Q0tFRElUT1IuU1RZTEVfSU5MSU5FPTI7Q0tFRElUT1IuU1RZTEVfT0JKRUNUPTM7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7Zm9yKHZhciBjLGQ7KGE9YS5nZXRQYXJlbnQoKSkmJiFhLmVxdWFscyhiKTspaWYoYS5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5vc3R5bGVcIikpYz1hO2Vsc2UgaWYoIWQpe3ZhciBlPWEuZ2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIpO1wiZmFsc2VcIj09ZT9jPWE6XCJ0cnVlXCI9PWUmJihkPTEpfXJldHVybiBjfWZ1bmN0aW9uIGQoYSxiLGMsZCl7cmV0dXJuKGEuZ2V0UG9zaXRpb24oYil8ZCk9PWQmJighYy5jaGlsZFJ1bGV8fGMuY2hpbGRSdWxlKGEpKX1mdW5jdGlvbiBiKGMpe3ZhciBmPWMuZG9jdW1lbnQ7aWYoYy5jb2xsYXBzZWQpZj1GKHRoaXMsZiksYy5pbnNlcnROb2RlKGYpLGMubW92ZVRvUG9zaXRpb24oZixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtlbHNle3ZhciBnPXRoaXMuZWxlbWVudCxoPXRoaXMuXy5kZWZpbml0aW9uLGwsaz1oLmlnbm9yZVJlYWRvbmx5LG09a3x8aC5pbmNsdWRlUmVhZG9ubHk7bnVsbD09XG5tJiYobT1jLnJvb3QuZ2V0Q3VzdG9tRGF0YShcImNrZV9pbmNsdWRlUmVhZG9ubHlcIikpO3ZhciBuPUNLRURJVE9SLmR0ZFtnXTtufHwobD0hMCxuPUNLRURJVE9SLmR0ZC5zcGFuKTtjLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9JTkxJTkUsMSk7Yy50cmltKCk7dmFyIHA9Yy5jcmVhdGVCb29rbWFyaygpLHE9cC5zdGFydE5vZGUsdz1wLmVuZE5vZGUscj1xLHU7aWYoIWspe3ZhciB4PWMuZ2V0Q29tbW9uQW5jZXN0b3IoKSxrPWEocSx4KSx4PWEodyx4KTtrJiYocj1rLmdldE5leHRTb3VyY2VOb2RlKCEwKSk7eCYmKHc9eCl9Zm9yKHIuZ2V0UG9zaXRpb24odyk9PUNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lORyYmKHI9MCk7cjspe2s9ITE7aWYoci5lcXVhbHModykpcj1udWxsLGs9ITA7ZWxzZXt2YXIgdD1yLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9yLmdldE5hbWUoKTpudWxsLHg9dCYmXCJmYWxzZVwiPT1yLmdldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKSx5PXQmJlxuci5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5vc3R5bGVcIik7aWYodCYmci5kYXRhKFwiY2tlLWJvb2ttYXJrXCIpKXtyPXIuZ2V0TmV4dFNvdXJjZU5vZGUoITApO2NvbnRpbnVlfWlmKHgmJm0mJkNLRURJVE9SLmR0ZC4kYmxvY2tbdF0pZm9yKHZhciBBPXIsej1lKEEpLEM9dm9pZCAwLEc9ei5sZW5ndGgsSD0wLEE9RyYmbmV3IENLRURJVE9SLmRvbS5yYW5nZShBLmdldERvY3VtZW50KCkpO0g8RzsrK0gpe3ZhciBDPXpbSF0sUj1DS0VESVRPUi5maWx0ZXIuaW5zdGFuY2VzW0MuZGF0YShcImNrZS1maWx0ZXJcIildO2lmKFI/Ui5jaGVjayh0aGlzKToxKUEuc2VsZWN0Tm9kZUNvbnRlbnRzKEMpLGIuY2FsbCh0aGlzLEEpfXo9dD8hblt0XXx8eT8wOngmJiFtPzA6ZChyLHcsaCxNKToxO2lmKHopaWYoQz1yLmdldFBhcmVudCgpLHo9aCxHPWcsSD1sLCFDfHwhKEMuZ2V0RHRkKCl8fENLRURJVE9SLmR0ZC5zcGFuKVtHXSYmIUh8fHoucGFyZW50UnVsZSYmIXoucGFyZW50UnVsZShDKSlrPSEwO2Vsc2V7aWYodXx8XG50JiZDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3RdJiYoci5nZXRQb3NpdGlvbih3KXxNKSE9TXx8KHU9Yy5jbG9uZSgpLHUuc2V0U3RhcnRCZWZvcmUocikpLHQ9ci50eXBlLHQ9PUNLRURJVE9SLk5PREVfVEVYVHx8eHx8dD09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYhci5nZXRDaGlsZENvdW50KCkpe2Zvcih2YXIgdD1yLFk7KGs9IXQuZ2V0TmV4dChLKSkmJihZPXQuZ2V0UGFyZW50KCksbltZLmdldE5hbWUoKV0pJiZkKFkscSxoLFEpOyl0PVk7dS5zZXRFbmRBZnRlcih0KX19ZWxzZSBrPSEwO3I9ci5nZXROZXh0U291cmNlTm9kZSh5fHx4KX1pZihrJiZ1JiYhdS5jb2xsYXBzZWQpe2Zvcih2YXIgaz1GKHRoaXMsZikseD1rLmhhc0F0dHJpYnV0ZXMoKSx5PXUuZ2V0Q29tbW9uQW5jZXN0b3IoKSx0PXt9LHo9e30sQz17fSxHPXt9LFUsUCxkYTtrJiZ5Oyl7aWYoeS5nZXROYW1lKCk9PWcpe2ZvcihVIGluIGguYXR0cmlidXRlcykhR1tVXSYmKGRhPXkuZ2V0QXR0cmlidXRlKFApKSYmXG4oay5nZXRBdHRyaWJ1dGUoVSk9PWRhP3pbVV09MTpHW1VdPTEpO2ZvcihQIGluIGguc3R5bGVzKSFDW1BdJiYoZGE9eS5nZXRTdHlsZShQKSkmJihrLmdldFN0eWxlKFApPT1kYT90W1BdPTE6Q1tQXT0xKX15PXkuZ2V0UGFyZW50KCl9Zm9yKFUgaW4geilrLnJlbW92ZUF0dHJpYnV0ZShVKTtmb3IoUCBpbiB0KWsucmVtb3ZlU3R5bGUoUCk7eCYmIWsuaGFzQXR0cmlidXRlcygpJiYoaz1udWxsKTtrPyh1LmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGspLHUuaW5zZXJ0Tm9kZShrKSxCLmNhbGwodGhpcyxrKSxrLm1lcmdlU2libGluZ3MoKSxDS0VESVRPUi5lbnYuaWV8fGsuJC5ub3JtYWxpemUoKSk6KGs9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3BhblwiKSx1LmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGspLHUuaW5zZXJ0Tm9kZShrKSxCLmNhbGwodGhpcyxrKSxrLnJlbW92ZSghMCkpO3U9bnVsbH19Yy5tb3ZlVG9Cb29rbWFyayhwKTtjLnNocmluayhDS0VESVRPUi5TSFJJTktfVEVYVCk7XG5jLnNocmluayhDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApfX1mdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGIoKXtmb3IodmFyIGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChkLmdldFBhcmVudCgpKSxjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgobS5nZXRQYXJlbnQoKSksZT1udWxsLGY9bnVsbCxnPTA7ZzxhLmVsZW1lbnRzLmxlbmd0aDtnKyspe3ZhciBoPWEuZWxlbWVudHNbZ107aWYoaD09YS5ibG9ja3x8aD09YS5ibG9ja0xpbWl0KWJyZWFrO24uY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGgsITApJiYoZT1oKX1mb3IoZz0wO2c8Yy5lbGVtZW50cy5sZW5ndGg7ZysrKXtoPWMuZWxlbWVudHNbZ107aWYoaD09Yy5ibG9ja3x8aD09Yy5ibG9ja0xpbWl0KWJyZWFrO24uY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGgsITApJiYoZj1oKX1mJiZtLmJyZWFrUGFyZW50KGYpO2UmJmQuYnJlYWtQYXJlbnQoZSl9YS5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfSU5MSU5FLDEpO3ZhciBjPVxuYS5jcmVhdGVCb29rbWFyaygpLGQ9Yy5zdGFydE5vZGU7aWYoYS5jb2xsYXBzZWQpe2Zvcih2YXIgZT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGQuZ2V0UGFyZW50KCksYS5yb290KSxmLGc9MCxrO2c8ZS5lbGVtZW50cy5sZW5ndGgmJihrPWUuZWxlbWVudHNbZ10pJiZrIT1lLmJsb2NrJiZrIT1lLmJsb2NrTGltaXQ7ZysrKWlmKHRoaXMuY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGspKXt2YXIgbDthLmNvbGxhcHNlZCYmKGEuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChrLENLRURJVE9SLkVORCl8fChsPWEuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChrLENLRURJVE9SLlNUQVJUKSkpPyhmPWssZi5tYXRjaD1sP1wic3RhcnRcIjpcImVuZFwiKTooay5tZXJnZVNpYmxpbmdzKCksay5pcyh0aGlzLmVsZW1lbnQpP3UuY2FsbCh0aGlzLGspOnEoayxoKHRoaXMpW2suZ2V0TmFtZSgpXSkpfWlmKGYpe2s9ZDtmb3IoZz0wOztnKyspe2w9ZS5lbGVtZW50c1tnXTtpZihsLmVxdWFscyhmKSlicmVhaztcbmVsc2UgaWYobC5tYXRjaCljb250aW51ZTtlbHNlIGw9bC5jbG9uZSgpO2wuYXBwZW5kKGspO2s9bH1rW1wic3RhcnRcIj09Zi5tYXRjaD9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oZil9fWVsc2V7dmFyIG09Yy5lbmROb2RlLG49dGhpcztiKCk7Zm9yKGU9ZDshZS5lcXVhbHMobSk7KWY9ZS5nZXROZXh0U291cmNlTm9kZSgpLGUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZ0aGlzLmNoZWNrRWxlbWVudFJlbW92YWJsZShlKSYmKGUuZ2V0TmFtZSgpPT10aGlzLmVsZW1lbnQ/dS5jYWxsKHRoaXMsZSk6cShlLGgodGhpcylbZS5nZXROYW1lKCldKSxmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZi5jb250YWlucyhkKSYmKGIoKSxmPWQuZ2V0TmV4dCgpKSksZT1mfWEubW92ZVRvQm9va21hcmsoYyk7YS5zaHJpbmsoQ0tFRElUT1IuTk9ERV9FTEVNRU5ULCEwKX1mdW5jdGlvbiBlKGEpe3ZhciBiPVtdO2EuZm9yRWFjaChmdW5jdGlvbihhKXtpZihcInRydWVcIj09XG5hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4gYi5wdXNoKGEpLCExfSxDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApO3JldHVybiBifWZ1bmN0aW9uIGcoYSl7dmFyIGI9YS5nZXRFbmNsb3NlZE5vZGUoKXx8YS5nZXRDb21tb25BbmNlc3RvcighMSwhMCk7KGE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYixhLnJvb3QpKS5jb250YWlucyh0aGlzLmVsZW1lbnQsMSkpJiYhYS5pc1JlYWRPbmx5KCkmJnQoYSx0aGlzKX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEuZ2V0Q29tbW9uQW5jZXN0b3IoITAsITApO2lmKGE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYixhLnJvb3QpKS5jb250YWlucyh0aGlzLmVsZW1lbnQsMSkpe3ZhciBiPXRoaXMuXy5kZWZpbml0aW9uLGM9Yi5hdHRyaWJ1dGVzO2lmKGMpZm9yKHZhciBkIGluIGMpYS5yZW1vdmVBdHRyaWJ1dGUoZCxjW2RdKTtpZihiLnN0eWxlcylmb3IodmFyIGUgaW4gYi5zdHlsZXMpYi5zdHlsZXMuaGFzT3duUHJvcGVydHkoZSkmJlxuYS5yZW1vdmVTdHlsZShlKX19ZnVuY3Rpb24gayhhKXt2YXIgYj1hLmNyZWF0ZUJvb2ttYXJrKCEwKSxjPWEuY3JlYXRlSXRlcmF0b3IoKTtjLmVuZm9yY2VSZWFsQmxvY2tzPSEwO3RoaXMuXy5lbnRlck1vZGUmJihjLmVubGFyZ2VCcj10aGlzLl8uZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUik7Zm9yKHZhciBkLGU9YS5kb2N1bWVudCxmO2Q9Yy5nZXROZXh0UGFyYWdyYXBoKCk7KSFkLmlzUmVhZE9ubHkoKSYmKGMuYWN0aXZlRmlsdGVyP2MuYWN0aXZlRmlsdGVyLmNoZWNrKHRoaXMpOjEpJiYoZj1GKHRoaXMsZSxkKSx3KGQsZikpO2EubW92ZVRvQm9va21hcmsoYil9ZnVuY3Rpb24gbihhKXt2YXIgYj1hLmNyZWF0ZUJvb2ttYXJrKDEpLGM9YS5jcmVhdGVJdGVyYXRvcigpO2MuZW5mb3JjZVJlYWxCbG9ja3M9ITA7Yy5lbmxhcmdlQnI9dGhpcy5fLmVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfQlI7Zm9yKHZhciBkLGU7ZD1jLmdldE5leHRQYXJhZ3JhcGgoKTspdGhpcy5jaGVja0VsZW1lbnRSZW1vdmFibGUoZCkmJlxuKGQuaXMoXCJwcmVcIik/KChlPXRoaXMuXy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSP251bGw6YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuXy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIikpJiZkLmNvcHlBdHRyaWJ1dGVzKGUpLHcoZCxlKSk6dS5jYWxsKHRoaXMsZCkpO2EubW92ZVRvQm9va21hcmsoYil9ZnVuY3Rpb24gdyhhLGIpe3ZhciBjPSFiO2MmJihiPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGEuY29weUF0dHJpYnV0ZXMoYikpO3ZhciBkPWImJmIuaXMoXCJwcmVcIiksZT1hLmlzKFwicHJlXCIpLGc9IWQmJmU7aWYoZCYmIWUpe2U9YjsoZz1hLmdldEJvZ3VzKCkpJiZnLnJlbW92ZSgpO2c9YS5nZXRIdG1sKCk7Zz14KGcsLyg/Ol5bIFxcdFxcblxccl0rKXwoPzpbIFxcdFxcblxccl0rJCkvZyxcIlwiKTtnPWcucmVwbGFjZSgvWyBcXHRcXHJcXG5dKig8YnJbXj5dKj4pWyBcXHRcXHJcXG5dKi9naSxcIiQxXCIpO2c9Zy5yZXBsYWNlKC8oWyBcXHRcXG5cXHJdK3wmbmJzcDspL2csXG5cIiBcIik7Zz1nLnJlcGxhY2UoLzxiclxcYltePl0qPi9naSxcIlxcblwiKTtpZihDS0VESVRPUi5lbnYuaWUpe3ZhciBoPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2guYXBwZW5kKGUpO2UuJC5vdXRlckhUTUw9XCJcXHgzY3ByZVxceDNlXCIrZytcIlxceDNjL3ByZVxceDNlXCI7ZS5jb3B5QXR0cmlidXRlcyhoLmdldEZpcnN0KCkpO2U9aC5nZXRGaXJzdCgpLnJlbW92ZSgpfWVsc2UgZS5zZXRIdG1sKGcpO2I9ZX1lbHNlIGc/Yj1BKGM/W2EuZ2V0SHRtbCgpXTpmKGEpLGIpOmEubW92ZUNoaWxkcmVuKGIpO2IucmVwbGFjZShhKTtpZihkKXt2YXIgYz1iLGs7KGs9Yy5nZXRQcmV2aW91cyhSKSkmJmsudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZrLmlzKFwicHJlXCIpJiYoZD14KGsuZ2V0SHRtbCgpLC9cXG4kLyxcIlwiKStcIlxcblxcblwiK3goYy5nZXRIdG1sKCksL15cXG4vLFwiXCIpLENLRURJVE9SLmVudi5pZT9jLiQub3V0ZXJIVE1MPVwiXFx4M2NwcmVcXHgzZVwiK2QrXCJcXHgzYy9wcmVcXHgzZVwiOlxuYy5zZXRIdG1sKGQpLGsucmVtb3ZlKCkpfWVsc2UgYyYmeShiKX1mdW5jdGlvbiBmKGEpe3ZhciBiPVtdO3goYS5nZXRPdXRlckh0bWwoKSwvKFxcU1xccyopXFxuKD86XFxzfCg8c3BhbltePl0rZGF0YS1ja2UtYm9va21hcmsuKj9cXC9zcGFuPikpKlxcbig/ISQpL2dpLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYitcIlxceDNjL3ByZVxceDNlXCIrYytcIlxceDNjcHJlXFx4M2VcIn0pLnJlcGxhY2UoLzxwcmVcXGIuKj8+KFtcXHNcXFNdKj8pPFxcL3ByZT4vZ2ksZnVuY3Rpb24oYSxjKXtiLnB1c2goYyl9KTtyZXR1cm4gYn1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZD1cIlwiLGU9XCJcIjthPWEucmVwbGFjZSgvKF48c3BhbltePl0rZGF0YS1ja2UtYm9va21hcmsuKj9cXC9zcGFuPil8KDxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFyay4qP1xcL3NwYW4+JCkvZ2ksZnVuY3Rpb24oYSxiLGMpe2ImJihkPWIpO2MmJihlPWMpO3JldHVyblwiXCJ9KTtyZXR1cm4gZCthLnJlcGxhY2UoYixjKStlfWZ1bmN0aW9uIEEoYSxiKXt2YXIgYztcbjE8YS5sZW5ndGgmJihjPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChiLmdldERvY3VtZW50KCkpKTtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXSxlPWUucmVwbGFjZSgvKFxcclxcbnxcXHIpL2csXCJcXG5cIiksZT14KGUsL15bIFxcdF0qXFxuLyxcIlwiKSxlPXgoZSwvXFxuJC8sXCJcIiksZT14KGUsL15bIFxcdF0rfFsgXFx0XSskL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gMT09YS5sZW5ndGg/XCJcXHgyNm5ic3A7XCI6Yj9cIiBcIitDS0VESVRPUi50b29scy5yZXBlYXQoXCJcXHgyNm5ic3A7XCIsYS5sZW5ndGgtMSk6Q0tFRElUT1IudG9vbHMucmVwZWF0KFwiXFx4MjZuYnNwO1wiLGEubGVuZ3RoLTEpK1wiIFwifSksZT1lLnJlcGxhY2UoL1xcbi9nLFwiXFx4M2NiclxceDNlXCIpLGU9ZS5yZXBsYWNlKC9bIFxcdF17Mix9L2csZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLnJlcGVhdChcIlxceDI2bmJzcDtcIixhLmxlbmd0aC0xKStcIiBcIn0pO2lmKGMpe3ZhciBmPWIuY2xvbmUoKTtmLnNldEh0bWwoZSk7XG5jLmFwcGVuZChmKX1lbHNlIGIuc2V0SHRtbChlKX1yZXR1cm4gY3x8Yn1mdW5jdGlvbiB1KGEsYil7dmFyIGM9dGhpcy5fLmRlZmluaXRpb24sZD1jLmF0dHJpYnV0ZXMsYz1jLnN0eWxlcyxlPWgodGhpcylbYS5nZXROYW1lKCldLGY9Q0tFRElUT1IudG9vbHMuaXNFbXB0eShkKSYmQ0tFRElUT1IudG9vbHMuaXNFbXB0eShjKSxnO2ZvcihnIGluIGQpaWYoXCJjbGFzc1wiIT1nJiYhdGhpcy5fLmRlZmluaXRpb24uZnVsbE1hdGNofHxhLmdldEF0dHJpYnV0ZShnKT09cChnLGRbZ10pKWImJlwiZGF0YS1cIj09Zy5zbGljZSgwLDUpfHwoZj1hLmhhc0F0dHJpYnV0ZShnKSxhLnJlbW92ZUF0dHJpYnV0ZShnKSk7Zm9yKHZhciBrIGluIGMpdGhpcy5fLmRlZmluaXRpb24uZnVsbE1hdGNoJiZhLmdldFN0eWxlKGspIT1wKGssY1trXSwhMCl8fChmPWZ8fCEhYS5nZXRTdHlsZShrKSxhLnJlbW92ZVN0eWxlKGspKTtxKGEsZSxDW2EuZ2V0TmFtZSgpXSk7ZiYmKHRoaXMuXy5kZWZpbml0aW9uLmFsd2F5c1JlbW92ZUVsZW1lbnQ/XG55KGEsMSk6IUNLRURJVE9SLmR0ZC4kYmxvY2tbYS5nZXROYW1lKCldfHx0aGlzLl8uZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUiYmIWEuaGFzQXR0cmlidXRlcygpP3koYSk6YS5yZW5hbWVOb2RlKHRoaXMuXy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIikpfWZ1bmN0aW9uIEIoYSl7Zm9yKHZhciBiPWgodGhpcyksYz1hLmdldEVsZW1lbnRzQnlUYWcodGhpcy5lbGVtZW50KSxkLGU9Yy5jb3VudCgpOzA8PS0tZTspZD1jLmdldEl0ZW0oZSksZC5pc1JlYWRPbmx5KCl8fHUuY2FsbCh0aGlzLGQsITApO2Zvcih2YXIgZiBpbiBiKWlmKGYhPXRoaXMuZWxlbWVudClmb3IoYz1hLmdldEVsZW1lbnRzQnlUYWcoZiksZT1jLmNvdW50KCktMTswPD1lO2UtLSlkPWMuZ2V0SXRlbShlKSxkLmlzUmVhZE9ubHkoKXx8cShkLGJbZl0pfWZ1bmN0aW9uIHEoYSxiLGMpe2lmKGI9YiYmYi5hdHRyaWJ1dGVzKWZvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdWzBdLFxuZjtpZihmPWEuZ2V0QXR0cmlidXRlKGUpKXt2YXIgZz1iW2RdWzFdOyhudWxsPT09Z3x8Zy50ZXN0JiZnLnRlc3QoZil8fFwic3RyaW5nXCI9PXR5cGVvZiBnJiZmPT1nKSYmYS5yZW1vdmVBdHRyaWJ1dGUoZSl9fWN8fHkoYSl9ZnVuY3Rpb24geShhLGIpe2lmKCFhLmhhc0F0dHJpYnV0ZXMoKXx8YilpZihDS0VESVRPUi5kdGQuJGJsb2NrW2EuZ2V0TmFtZSgpXSl7dmFyIGM9YS5nZXRQcmV2aW91cyhSKSxkPWEuZ2V0TmV4dChSKTshY3x8Yy50eXBlIT1DS0VESVRPUi5OT0RFX1RFWFQmJmMuaXNCbG9ja0JvdW5kYXJ5KHticjoxfSl8fGEuYXBwZW5kKFwiYnJcIiwxKTshZHx8ZC50eXBlIT1DS0VESVRPUi5OT0RFX1RFWFQmJmQuaXNCbG9ja0JvdW5kYXJ5KHticjoxfSl8fGEuYXBwZW5kKFwiYnJcIik7YS5yZW1vdmUoITApfWVsc2UgYz1hLmdldEZpcnN0KCksZD1hLmdldExhc3QoKSxhLnJlbW92ZSghMCksYyYmKGMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZjLm1lcmdlU2libGluZ3MoKSxcbmQmJiFjLmVxdWFscyhkKSYmZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQubWVyZ2VTaWJsaW5ncygpKX1mdW5jdGlvbiBGKGEsYixjKXt2YXIgZDtkPWEuZWxlbWVudDtcIipcIj09ZCYmKGQ9XCJzcGFuXCIpO2Q9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGQsYik7YyYmYy5jb3B5QXR0cmlidXRlcyhkKTtkPXQoZCxhKTtiLmdldEN1c3RvbURhdGEoXCJkb2NfcHJvY2Vzc2luZ19zdHlsZVwiKSYmZC5oYXNBdHRyaWJ1dGUoXCJpZFwiKT9kLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpOmIuc2V0Q3VzdG9tRGF0YShcImRvY19wcm9jZXNzaW5nX3N0eWxlXCIsMSk7cmV0dXJuIGR9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWIuXy5kZWZpbml0aW9uLGQ9Yy5hdHRyaWJ1dGVzLGM9Q0tFRElUT1Iuc3R5bGUuZ2V0U3R5bGVUZXh0KGMpO2lmKGQpZm9yKHZhciBlIGluIGQpYS5zZXRBdHRyaWJ1dGUoZSxkW2VdKTtjJiZhLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsYyk7cmV0dXJuIGF9ZnVuY3Rpb24geihhLFxuYil7Zm9yKHZhciBjIGluIGEpYVtjXT1hW2NdLnJlcGxhY2UoSCxmdW5jdGlvbihhLGMpe3JldHVybiBiW2NdfSl9ZnVuY3Rpb24gaChhKXtpZihhLl8ub3ZlcnJpZGVzKXJldHVybiBhLl8ub3ZlcnJpZGVzO3ZhciBiPWEuXy5vdmVycmlkZXM9e30sYz1hLl8uZGVmaW5pdGlvbi5vdmVycmlkZXM7aWYoYyl7Q0tFRElUT1IudG9vbHMuaXNBcnJheShjKXx8KGM9W2NdKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmLGc7XCJzdHJpbmdcIj09dHlwZW9mIGU/Zj1lLnRvTG93ZXJDYXNlKCk6KGY9ZS5lbGVtZW50P2UuZWxlbWVudC50b0xvd2VyQ2FzZSgpOmEuZWxlbWVudCxnPWUuYXR0cmlidXRlcyk7ZT1iW2ZdfHwoYltmXT17fSk7aWYoZyl7dmFyIGU9ZS5hdHRyaWJ1dGVzPWUuYXR0cmlidXRlc3x8W10saDtmb3IoaCBpbiBnKWUucHVzaChbaC50b0xvd2VyQ2FzZSgpLGdbaF1dKX19fXJldHVybiBifWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNwYW5cIik7XG5kW2M/XCJzZXRTdHlsZVwiOlwic2V0QXR0cmlidXRlXCJdKGEsYik7cmV0dXJuIGRbYz9cImdldFN0eWxlXCI6XCJnZXRBdHRyaWJ1dGVcIl0oYSl9ZnVuY3Rpb24gbShhLGIsYyl7dmFyIGQ9YS5kb2N1bWVudCxlPWEuZ2V0UmFuZ2VzKCk7Yj1iP3RoaXMucmVtb3ZlRnJvbVJhbmdlOnRoaXMuYXBwbHlUb1JhbmdlO2Zvcih2YXIgZixnPWUuY3JlYXRlSXRlcmF0b3IoKTtmPWcuZ2V0TmV4dFJhbmdlKCk7KWIuY2FsbCh0aGlzLGYsYyk7YS5zZWxlY3RSYW5nZXMoZSk7ZC5yZW1vdmVDdXN0b21EYXRhKFwiZG9jX3Byb2Nlc3Npbmdfc3R5bGVcIil9dmFyIEM9e2FkZHJlc3M6MSxkaXY6MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSxwOjEscHJlOjEsc2VjdGlvbjoxLGhlYWRlcjoxLGZvb3RlcjoxLG5hdjoxLGFydGljbGU6MSxhc2lkZToxLGZpZ3VyZToxLGRpYWxvZzoxLGhncm91cDoxLHRpbWU6MSxtZXRlcjoxLG1lbnU6MSxjb21tYW5kOjEsa2V5Z2VuOjEsb3V0cHV0OjEscHJvZ3Jlc3M6MSxcbmRldGFpbHM6MSxkYXRhZ3JpZDoxLGRhdGFsaXN0OjF9LHI9e2E6MSxibG9ja3F1b3RlOjEsZW1iZWQ6MSxocjoxLGltZzoxLGxpOjEsb2JqZWN0OjEsb2w6MSx0YWJsZToxLHRkOjEsdHI6MSx0aDoxLHVsOjEsZGw6MSxkdDoxLGRkOjEsZm9ybToxLGF1ZGlvOjEsdmlkZW86MX0sRz0vXFxzKig/OjtcXHMqfCQpLyxIPS8jXFwoKC4rPylcXCkvZyxLPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoMCwxKSxSPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoMSk7Q0tFRElUT1Iuc3R5bGU9ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50eXBlKXJldHVybiBuZXcgQ0tFRElUT1Iuc3R5bGUuY3VzdG9tSGFuZGxlcnNbYS50eXBlXShhKTt2YXIgYz1hLmF0dHJpYnV0ZXM7YyYmYy5zdHlsZSYmKGEuc3R5bGVzPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxhLnN0eWxlcyxDS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYy5zdHlsZSkpLGRlbGV0ZSBjLnN0eWxlKTtcbmImJihhPUNLRURJVE9SLnRvb2xzLmNsb25lKGEpLHooYS5hdHRyaWJ1dGVzLGIpLHooYS5zdHlsZXMsYikpO2M9dGhpcy5lbGVtZW50PWEuZWxlbWVudD9cInN0cmluZ1wiPT10eXBlb2YgYS5lbGVtZW50P2EuZWxlbWVudC50b0xvd2VyQ2FzZSgpOmEuZWxlbWVudDpcIipcIjt0aGlzLnR5cGU9YS50eXBlfHwoQ1tjXT9DS0VESVRPUi5TVFlMRV9CTE9DSzpyW2NdP0NLRURJVE9SLlNUWUxFX09CSkVDVDpDS0VESVRPUi5TVFlMRV9JTkxJTkUpO1wib2JqZWN0XCI9PXR5cGVvZiB0aGlzLmVsZW1lbnQmJih0aGlzLnR5cGU9Q0tFRElUT1IuU1RZTEVfT0JKRUNUKTt0aGlzLl89e2RlZmluaXRpb246YX19O0NLRURJVE9SLnN0eWxlLnByb3RvdHlwZT17YXBwbHk6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5kb2N1bWVudClyZXR1cm4gbS5jYWxsKHRoaXMsYS5nZXRTZWxlY3Rpb24oKSk7aWYodGhpcy5jaGVja0FwcGxpY2FibGUoYS5lbGVtZW50UGF0aCgpLGEpKXt2YXIgYj1cbnRoaXMuXy5lbnRlck1vZGU7Ynx8KHRoaXMuXy5lbnRlck1vZGU9YS5hY3RpdmVFbnRlck1vZGUpO20uY2FsbCh0aGlzLGEuZ2V0U2VsZWN0aW9uKCksMCxhKTt0aGlzLl8uZW50ZXJNb2RlPWJ9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5kb2N1bWVudClyZXR1cm4gbS5jYWxsKHRoaXMsYS5nZXRTZWxlY3Rpb24oKSwxKTtpZih0aGlzLmNoZWNrQXBwbGljYWJsZShhLmVsZW1lbnRQYXRoKCksYSkpe3ZhciBiPXRoaXMuXy5lbnRlck1vZGU7Ynx8KHRoaXMuXy5lbnRlck1vZGU9YS5hY3RpdmVFbnRlck1vZGUpO20uY2FsbCh0aGlzLGEuZ2V0U2VsZWN0aW9uKCksMSxhKTt0aGlzLl8uZW50ZXJNb2RlPWJ9fSxhcHBseVRvUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5hcHBseVRvUmFuZ2U9dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9JTkxJTkU/Yjp0aGlzLnR5cGU9PUNLRURJVE9SLlNUWUxFX0JMT0NLP2s6dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/XG5nOm51bGw7cmV0dXJuIHRoaXMuYXBwbHlUb1JhbmdlKGEpfSxyZW1vdmVGcm9tUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVGcm9tUmFuZ2U9dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9JTkxJTkU/Yzp0aGlzLnR5cGU9PUNLRURJVE9SLlNUWUxFX0JMT0NLP246dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/bDpudWxsO3JldHVybiB0aGlzLnJlbW92ZUZyb21SYW5nZShhKX0sYXBwbHlUb09iamVjdDpmdW5jdGlvbihhKXt0KGEsdGhpcyl9LGNoZWNrQWN0aXZlOmZ1bmN0aW9uKGEsYil7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSBDS0VESVRPUi5TVFlMRV9CTE9DSzpyZXR1cm4gdGhpcy5jaGVja0VsZW1lbnRSZW1vdmFibGUoYS5ibG9ja3x8YS5ibG9ja0xpbWl0LCEwLGIpO2Nhc2UgQ0tFRElUT1IuU1RZTEVfT0JKRUNUOmNhc2UgQ0tFRElUT1IuU1RZTEVfSU5MSU5FOmZvcih2YXIgYz1hLmVsZW1lbnRzLGQ9MCxlO2Q8Yy5sZW5ndGg7ZCsrKWlmKGU9Y1tkXSxcbnRoaXMudHlwZSE9Q0tFRElUT1IuU1RZTEVfSU5MSU5FfHxlIT1hLmJsb2NrJiZlIT1hLmJsb2NrTGltaXQpe2lmKHRoaXMudHlwZT09Q0tFRElUT1IuU1RZTEVfT0JKRUNUKXt2YXIgZj1lLmdldE5hbWUoKTtpZighKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmVsZW1lbnQ/Zj09dGhpcy5lbGVtZW50OmYgaW4gdGhpcy5lbGVtZW50KSljb250aW51ZX1pZih0aGlzLmNoZWNrRWxlbWVudFJlbW92YWJsZShlLCEwLGIpKXJldHVybiEwfX1yZXR1cm4hMX0sY2hlY2tBcHBsaWNhYmxlOmZ1bmN0aW9uKGEsYixjKXtiJiZiIGluc3RhbmNlb2YgQ0tFRElUT1IuZmlsdGVyJiYoYz1iKTtpZihjJiYhYy5jaGVjayh0aGlzKSlyZXR1cm4hMTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIENLRURJVE9SLlNUWUxFX09CSkVDVDpyZXR1cm4hIWEuY29udGFpbnModGhpcy5lbGVtZW50KTtjYXNlIENLRURJVE9SLlNUWUxFX0JMT0NLOnJldHVybiEhYS5ibG9ja0xpbWl0LmdldER0ZCgpW3RoaXMuZWxlbWVudF19cmV0dXJuITB9LFxuY2hlY2tFbGVtZW50TWF0Y2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl8uZGVmaW5pdGlvbjtpZighYXx8IWMuaWdub3JlUmVhZG9ubHkmJmEuaXNSZWFkT25seSgpKXJldHVybiExO3ZhciBkPWEuZ2V0TmFtZSgpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmVsZW1lbnQ/ZD09dGhpcy5lbGVtZW50OmQgaW4gdGhpcy5lbGVtZW50KXtpZighYiYmIWEuaGFzQXR0cmlidXRlcygpKXJldHVybiEwO2lmKGQ9Yy5fQUMpYz1kO2Vsc2V7dmFyIGQ9e30sZT0wLGY9Yy5hdHRyaWJ1dGVzO2lmKGYpZm9yKHZhciBnIGluIGYpZSsrLGRbZ109ZltnXTtpZihnPUNLRURJVE9SLnN0eWxlLmdldFN0eWxlVGV4dChjKSlkLnN0eWxlfHxlKyssZC5zdHlsZT1nO2QuX2xlbmd0aD1lO2M9Yy5fQUM9ZH1pZihjLl9sZW5ndGgpe2Zvcih2YXIgaCBpbiBjKWlmKFwiX2xlbmd0aFwiIT1oKXtlPWEuZ2V0QXR0cmlidXRlKGgpfHxcIlwiO2lmKFwic3R5bGVcIj09aClhOntkPWNbaF07XCJzdHJpbmdcIj09dHlwZW9mIGQmJlxuKGQ9Q0tFRElUT1IudG9vbHMucGFyc2VDc3NUZXh0KGQpKTtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9Q0tFRElUT1IudG9vbHMucGFyc2VDc3NUZXh0KGUsITApKTtnPXZvaWQgMDtmb3IoZyBpbiBkKWlmKCEoZyBpbiBlKXx8ZVtnXSE9ZFtnXSYmXCJpbmhlcml0XCIhPWRbZ10mJlwiaW5oZXJpdFwiIT1lW2ddKXtkPSExO2JyZWFrIGF9ZD0hMH1lbHNlIGQ9Y1toXT09ZTtpZihkKXtpZighYilyZXR1cm4hMH1lbHNlIGlmKGIpcmV0dXJuITF9aWYoYilyZXR1cm4hMH1lbHNlIHJldHVybiEwfXJldHVybiExfSxjaGVja0VsZW1lbnRSZW1vdmFibGU6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuY2hlY2tFbGVtZW50TWF0Y2goYSxiLGMpKXJldHVybiEwO2lmKGI9aCh0aGlzKVthLmdldE5hbWUoKV0pe3ZhciBkO2lmKCEoYj1iLmF0dHJpYnV0ZXMpKXJldHVybiEwO2ZvcihjPTA7YzxiLmxlbmd0aDtjKyspaWYoZD1iW2NdWzBdLGQ9YS5nZXRBdHRyaWJ1dGUoZCkpe3ZhciBlPWJbY11bMV07aWYobnVsbD09PVxuZSlyZXR1cm4hMDtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7aWYoZD09ZSlyZXR1cm4hMH1lbHNlIGlmKGUudGVzdChkKSlyZXR1cm4hMH19cmV0dXJuITF9LGJ1aWxkUHJldmlldzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl8uZGVmaW5pdGlvbixjPVtdLGQ9Yi5lbGVtZW50O1wiYmRvXCI9PWQmJihkPVwic3BhblwiKTt2YXIgYz1bXCJcXHgzY1wiLGRdLGU9Yi5hdHRyaWJ1dGVzO2lmKGUpZm9yKHZhciBmIGluIGUpYy5wdXNoKFwiIFwiLGYsJ1xceDNkXCInLGVbZl0sJ1wiJyk7KGU9Q0tFRElUT1Iuc3R5bGUuZ2V0U3R5bGVUZXh0KGIpKSYmYy5wdXNoKCcgc3R5bGVcXHgzZFwiJyxlLCdcIicpO2MucHVzaChcIlxceDNlXCIsYXx8Yi5uYW1lLFwiXFx4M2MvXCIsZCxcIlxceDNlXCIpO3JldHVybiBjLmpvaW4oXCJcIil9LGdldERlZmluaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmRlZmluaXRpb259fTtDS0VESVRPUi5zdHlsZS5nZXRTdHlsZVRleHQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5fU1Q7aWYoYilyZXR1cm4gYjtcbnZhciBiPWEuc3R5bGVzLGM9YS5hdHRyaWJ1dGVzJiZhLmF0dHJpYnV0ZXMuc3R5bGV8fFwiXCIsZD1cIlwiO2MubGVuZ3RoJiYoYz1jLnJlcGxhY2UoRyxcIjtcIikpO2Zvcih2YXIgZSBpbiBiKXt2YXIgZj1iW2VdLGc9KGUrXCI6XCIrZikucmVwbGFjZShHLFwiO1wiKTtcImluaGVyaXRcIj09Zj9kKz1nOmMrPWd9Yy5sZW5ndGgmJihjPUNLRURJVE9SLnRvb2xzLm5vcm1hbGl6ZUNzc1RleHQoYywhMCkpO3JldHVybiBhLl9TVD1jK2R9O0NLRURJVE9SLnN0eWxlLmN1c3RvbUhhbmRsZXJzPXt9O0NLRURJVE9SLnN0eWxlLmFkZEN1c3RvbUhhbmRsZXI9ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYSl7dGhpcy5fPXtkZWZpbml0aW9uOmF9O3RoaXMuc2V0dXAmJnRoaXMuc2V0dXAoYSl9O2IucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi50b29scy5wcm90b3R5cGVkQ29weShDS0VESVRPUi5zdHlsZS5wcm90b3R5cGUpLHthc3NpZ25lZFRvOkNLRURJVE9SLlNUWUxFX09CSkVDVH0sXG5hLCEwKTtyZXR1cm4gdGhpcy5jdXN0b21IYW5kbGVyc1thLnR5cGVdPWJ9O3ZhciBNPUNLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElOR3xDS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUx8Q0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVELFE9Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HfENLRURJVE9SLlBPU0lUSU9OX0lERU5USUNBTHxDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUR9KSgpO0NLRURJVE9SLnN0eWxlQ29tbWFuZD1mdW5jdGlvbihhLGQpe3RoaXMucmVxdWlyZWRDb250ZW50PXRoaXMuYWxsb3dlZENvbnRlbnQ9dGhpcy5zdHlsZT1hO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGQsITApfTtcbkNLRURJVE9SLnN0eWxlQ29tbWFuZC5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihhKXthLmZvY3VzKCk7dGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT0ZGP2EuYXBwbHlTdHlsZSh0aGlzLnN0eWxlKTp0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTiYmYS5yZW1vdmVTdHlsZSh0aGlzLnN0eWxlKX07Q0tFRElUT1Iuc3R5bGVzU2V0PW5ldyBDS0VESVRPUi5yZXNvdXJjZU1hbmFnZXIoXCJcIixcInN0eWxlc1NldFwiKTtDS0VESVRPUi5hZGRTdHlsZXNTZXQ9Q0tFRElUT1IudG9vbHMuYmluZChDS0VESVRPUi5zdHlsZXNTZXQuYWRkLENLRURJVE9SLnN0eWxlc1NldCk7Q0tFRElUT1IubG9hZFN0eWxlc1NldD1mdW5jdGlvbihhLGQsYil7Q0tFRElUT1Iuc3R5bGVzU2V0LmFkZEV4dGVybmFsKGEsZCxcIlwiKTtDS0VESVRPUi5zdHlsZXNTZXQubG9hZChhLGIpfTtcbkNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLHthdHRhY2hTdHlsZVN0YXRlQ2hhbmdlOmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcy5fLnN0eWxlU3RhdGVDaGFuZ2VDYWxsYmFja3M7Ynx8KGI9dGhpcy5fLnN0eWxlU3RhdGVDaGFuZ2VDYWxsYmFja3M9W10sdGhpcy5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKGEpe2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZz1iW2RdLGw9Zy5zdHlsZS5jaGVja0FjdGl2ZShhLmRhdGEucGF0aCx0aGlzKT9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkY7Zy5mbi5jYWxsKHRoaXMsbCl9fSkpO2IucHVzaCh7c3R5bGU6YSxmbjpkfSl9LGFwcGx5U3R5bGU6ZnVuY3Rpb24oYSl7YS5hcHBseSh0aGlzKX0scmVtb3ZlU3R5bGU6ZnVuY3Rpb24oYSl7YS5yZW1vdmUodGhpcyl9LGdldFN0eWxlc1NldDpmdW5jdGlvbihhKXtpZih0aGlzLl8uc3R5bGVzRGVmaW5pdGlvbnMpYSh0aGlzLl8uc3R5bGVzRGVmaW5pdGlvbnMpO1xuZWxzZXt2YXIgZD10aGlzLGI9ZC5jb25maWcuc3R5bGVzQ29tYm9fc3R5bGVzU2V0fHxkLmNvbmZpZy5zdHlsZXNTZXQ7aWYoITE9PT1iKWEobnVsbCk7ZWxzZSBpZihiIGluc3RhbmNlb2YgQXJyYXkpZC5fLnN0eWxlc0RlZmluaXRpb25zPWIsYShiKTtlbHNle2J8fChiPVwiZGVmYXVsdFwiKTt2YXIgYj1iLnNwbGl0KFwiOlwiKSxjPWJbMF07Q0tFRElUT1Iuc3R5bGVzU2V0LmFkZEV4dGVybmFsKGMsYlsxXT9iLnNsaWNlKDEpLmpvaW4oXCI6XCIpOkNLRURJVE9SLmdldFVybChcInN0eWxlcy5qc1wiKSxcIlwiKTtDS0VESVRPUi5zdHlsZXNTZXQubG9hZChjLGZ1bmN0aW9uKGIpe2QuXy5zdHlsZXNEZWZpbml0aW9ucz1iW2NdO2EoZC5fLnN0eWxlc0RlZmluaXRpb25zKX0pfX19fSk7XG5DS0VESVRPUi5kb20uY29tbWVudD1mdW5jdGlvbihhLGQpe1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT0oZD9kLiQ6ZG9jdW1lbnQpLmNyZWF0ZUNvbW1lbnQoYSkpO0NLRURJVE9SLmRvbS5kb21PYmplY3QuY2FsbCh0aGlzLGEpfTtDS0VESVRPUi5kb20uY29tbWVudC5wcm90b3R5cGU9bmV3IENLRURJVE9SLmRvbS5ub2RlO0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5kb20uY29tbWVudC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9DT01NRU5ULGdldE91dGVySHRtbDpmdW5jdGlvbigpe3JldHVyblwiXFx4M2MhLS1cIit0aGlzLiQubm9kZVZhbHVlK1wiLS1cXHgzZVwifX0pO1widXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCl7dmFyIGE9e30sZD17fSxiO2ZvcihiIGluIENLRURJVE9SLmR0ZC4kYmxvY2tMaW1pdCliIGluIENLRURJVE9SLmR0ZC4kbGlzdHx8KGFbYl09MSk7Zm9yKGIgaW4gQ0tFRElUT1IuZHRkLiRibG9jayliIGluIENLRURJVE9SLmR0ZC4kYmxvY2tMaW1pdHx8YiBpbiBDS0VESVRPUi5kdGQuJGVtcHR5fHwoZFtiXT0xKTtDS0VESVRPUi5kb20uZWxlbWVudFBhdGg9ZnVuY3Rpb24oYixlKXt2YXIgZz1udWxsLGw9bnVsbCxrPVtdLG49Yix3O2U9ZXx8Yi5nZXREb2N1bWVudCgpLmdldEJvZHkoKTtkbyBpZihuLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7ay5wdXNoKG4pO2lmKCF0aGlzLmxhc3RFbGVtZW50JiYodGhpcy5sYXN0RWxlbWVudD1uLG4uaXMoQ0tFRElUT1IuZHRkLiRvYmplY3QpfHxcImZhbHNlXCI9PW4uZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKSljb250aW51ZTtpZihuLmVxdWFscyhlKSlicmVhaztpZighbCYmKHc9bi5nZXROYW1lKCksXG5cInRydWVcIj09bi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik/bD1uOiFnJiZkW3ddJiYoZz1uKSxhW3ddKSl7aWYodz0hZyYmXCJkaXZcIj09dyl7YTp7dz1uLmdldENoaWxkcmVuKCk7Zm9yKHZhciBmPTAseD13LmNvdW50KCk7Zjx4O2YrKyl7dmFyIEE9dy5nZXRJdGVtKGYpO2lmKEEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZDS0VESVRPUi5kdGQuJGJsb2NrW0EuZ2V0TmFtZSgpXSl7dz0hMDticmVhayBhfX13PSExfXc9IXd9dz9nPW46bD1ufX13aGlsZShuPW4uZ2V0UGFyZW50KCkpO2x8fChsPWUpO3RoaXMuYmxvY2s9Zzt0aGlzLmJsb2NrTGltaXQ9bDt0aGlzLnJvb3Q9ZTt0aGlzLmVsZW1lbnRzPWt9fSkoKTtcbkNLRURJVE9SLmRvbS5lbGVtZW50UGF0aC5wcm90b3R5cGU9e2NvbXBhcmU6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5lbGVtZW50czthPWEmJmEuZWxlbWVudHM7aWYoIWF8fGQubGVuZ3RoIT1hLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGI9MDtiPGQubGVuZ3RoO2IrKylpZighZFtiXS5lcXVhbHMoYVtiXSkpcmV0dXJuITE7cmV0dXJuITB9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsZCxiKXt2YXIgYztcInN0cmluZ1wiPT10eXBlb2YgYSYmKGM9ZnVuY3Rpb24oYil7cmV0dXJuIGIuZ2V0TmFtZSgpPT1hfSk7YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50P2M9ZnVuY3Rpb24oYil7cmV0dXJuIGIuZXF1YWxzKGEpfTpDS0VESVRPUi50b29scy5pc0FycmF5KGEpP2M9ZnVuY3Rpb24oYil7cmV0dXJuLTE8Q0tFRElUT1IudG9vbHMuaW5kZXhPZihhLGIuZ2V0TmFtZSgpKX06XCJmdW5jdGlvblwiPT10eXBlb2YgYT9jPWE6XCJvYmplY3RcIj09dHlwZW9mIGEmJihjPWZ1bmN0aW9uKGIpe3JldHVybiBiLmdldE5hbWUoKWluXG5hfSk7dmFyIGU9dGhpcy5lbGVtZW50cyxnPWUubGVuZ3RoO2QmJmctLTtiJiYoZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApLGUucmV2ZXJzZSgpKTtmb3IoZD0wO2Q8ZztkKyspaWYoYyhlW2RdKSlyZXR1cm4gZVtkXTtyZXR1cm4gbnVsbH0saXNDb250ZXh0Rm9yOmZ1bmN0aW9uKGEpe3ZhciBkO3JldHVybiBhIGluIENLRURJVE9SLmR0ZC4kYmxvY2s/KGQ9dGhpcy5jb250YWlucyhDS0VESVRPUi5kdGQuJGludGVybWVkaWF0ZSl8fHRoaXMucm9vdC5lcXVhbHModGhpcy5ibG9jaykmJnRoaXMuYmxvY2t8fHRoaXMuYmxvY2tMaW1pdCwhIWQuZ2V0RHRkKClbYV0pOiEwfSxkaXJlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5ibG9ja3x8dGhpcy5ibG9ja0xpbWl0fHx0aGlzLnJvb3QpLmdldERpcmVjdGlvbigxKX19O1xuQ0tFRElUT1IuZG9tLnRleHQ9ZnVuY3Rpb24oYSxkKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9KGQ/ZC4kOmRvY3VtZW50KS5jcmVhdGVUZXh0Tm9kZShhKSk7dGhpcy4kPWF9O0NLRURJVE9SLmRvbS50ZXh0LnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLm5vZGU7XG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLnRleHQucHJvdG90eXBlLHt0eXBlOkNLRURJVE9SLk5PREVfVEVYVCxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLm5vZGVWYWx1ZS5sZW5ndGh9LGdldFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLm5vZGVWYWx1ZX0sc2V0VGV4dDpmdW5jdGlvbihhKXt0aGlzLiQubm9kZVZhbHVlPWF9LHNwbGl0OmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJC5wYXJlbnROb2RlLGI9ZC5jaGlsZE5vZGVzLmxlbmd0aCxjPXRoaXMuZ2V0TGVuZ3RoKCksZT10aGlzLmdldERvY3VtZW50KCksZz1uZXcgQ0tFRElUT1IuZG9tLnRleHQodGhpcy4kLnNwbGl0VGV4dChhKSxlKTtkLmNoaWxkTm9kZXMubGVuZ3RoPT1iJiYoYT49Yz8oZz1lLmNyZWF0ZVRleHQoXCJcIiksZy5pbnNlcnRBZnRlcih0aGlzKSk6KGE9ZS5jcmVhdGVUZXh0KFwiXCIpLGEuaW5zZXJ0QWZ0ZXIoZyksYS5yZW1vdmUoKSkpO3JldHVybiBnfSxzdWJzdHJpbmc6ZnVuY3Rpb24oYSxcbmQpe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBkP3RoaXMuJC5ub2RlVmFsdWUuc3Vic3RyKGEpOnRoaXMuJC5ub2RlVmFsdWUuc3Vic3RyaW5nKGEsZCl9fSk7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyxkKXt2YXIgZz1hLnNlcmlhbGl6YWJsZSxsPWNbZD9cImVuZENvbnRhaW5lclwiOlwic3RhcnRDb250YWluZXJcIl0saz1kP1wiZW5kT2Zmc2V0XCI6XCJzdGFydE9mZnNldFwiLG49Zz9jLmRvY3VtZW50LmdldEJ5SWQoYS5zdGFydE5vZGUpOmEuc3RhcnROb2RlO2E9Zz9jLmRvY3VtZW50LmdldEJ5SWQoYS5lbmROb2RlKTphLmVuZE5vZGU7bC5lcXVhbHMobi5nZXRQcmV2aW91cygpKT8oYy5zdGFydE9mZnNldD1jLnN0YXJ0T2Zmc2V0LWwuZ2V0TGVuZ3RoKCktYS5nZXRQcmV2aW91cygpLmdldExlbmd0aCgpLGw9YS5nZXROZXh0KCkpOmwuZXF1YWxzKGEuZ2V0UHJldmlvdXMoKSkmJihjLnN0YXJ0T2Zmc2V0LT1sLmdldExlbmd0aCgpLGw9YS5nZXROZXh0KCkpO2wuZXF1YWxzKG4uZ2V0UGFyZW50KCkpJiZjW2tdKys7bC5lcXVhbHMoYS5nZXRQYXJlbnQoKSkmJmNba10rKztjW2Q/XCJlbmRDb250YWluZXJcIjpcInN0YXJ0Q29udGFpbmVyXCJdPWw7cmV0dXJuIGN9XG5DS0VESVRPUi5kb20ucmFuZ2VMaXN0PWZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20ucmFuZ2VMaXN0KXJldHVybiBhO2E/YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5yYW5nZSYmKGE9W2FdKTphPVtdO3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoYSxkKX07dmFyIGQ9e2NyZWF0ZUl0ZXJhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxjPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKSxkPVtdLGc7cmV0dXJue2dldE5leHRSYW5nZTpmdW5jdGlvbihsKXtnPXZvaWQgMD09PWc/MDpnKzE7dmFyIGs9YVtnXTtpZihrJiYxPGEubGVuZ3RoKXtpZighZylmb3IodmFyIG49YS5sZW5ndGgtMTswPD1uO24tLSlkLnVuc2hpZnQoYVtuXS5jcmVhdGVCb29rbWFyayghMCkpO2lmKGwpZm9yKHZhciB3PTA7YVtnK3crMV07KXt2YXIgZj1rLmRvY3VtZW50O2w9MDtuPWYuZ2V0QnlJZChkW3ddLmVuZE5vZGUpO2ZvcihmPWYuZ2V0QnlJZChkW3crMV0uc3RhcnROb2RlKTs7KXtuPVxubi5nZXROZXh0U291cmNlTm9kZSghMSk7aWYoZi5lcXVhbHMobikpbD0xO2Vsc2UgaWYoYyhuKXx8bi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJm4uaXNCbG9ja0JvdW5kYXJ5KCkpY29udGludWU7YnJlYWt9aWYoIWwpYnJlYWs7dysrfWZvcihrLm1vdmVUb0Jvb2ttYXJrKGQuc2hpZnQoKSk7dy0tOyluPWFbKytnXSxuLm1vdmVUb0Jvb2ttYXJrKGQuc2hpZnQoKSksay5zZXRFbmQobi5lbmRDb250YWluZXIsbi5lbmRPZmZzZXQpfXJldHVybiBrfX19LGNyZWF0ZUJvb2ttYXJrczpmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZCxnPTA7Zzx0aGlzLmxlbmd0aDtnKyspe2MucHVzaChkPXRoaXNbZ10uY3JlYXRlQm9va21hcmsoYiwhMCkpO2Zvcih2YXIgbD1nKzE7bDx0aGlzLmxlbmd0aDtsKyspdGhpc1tsXT1hKGQsdGhpc1tsXSksdGhpc1tsXT1hKGQsdGhpc1tsXSwhMCl9cmV0dXJuIGN9LGNyZWF0ZUJvb2ttYXJrczI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGQ9MDtkPFxudGhpcy5sZW5ndGg7ZCsrKWMucHVzaCh0aGlzW2RdLmNyZWF0ZUJvb2ttYXJrMihhKSk7cmV0dXJuIGN9LG1vdmVUb0Jvb2ttYXJrczpmdW5jdGlvbihhKXtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoO2MrKyl0aGlzW2NdLm1vdmVUb0Jvb2ttYXJrKGFbY10pfX19KSgpO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3JldHVybiBDS0VESVRPUi5nZXRVcmwoQ0tFRElUT1Iuc2tpbk5hbWUuc3BsaXQoXCIsXCIpWzFdfHxcInNraW5zL1wiK0NLRURJVE9SLnNraW5OYW1lLnNwbGl0KFwiLFwiKVswXStcIi9cIil9ZnVuY3Rpb24gZChiKXt2YXIgYz1DS0VESVRPUi5za2luW1widWFfXCIrYl0sZD1DS0VESVRPUi5lbnY7aWYoYylmb3IodmFyIGM9Yy5zcGxpdChcIixcIikuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhPmI/LTE6MX0pLGU9MCxnO2U8Yy5sZW5ndGg7ZSsrKWlmKGc9Y1tlXSxkLmllJiYoZy5yZXBsYWNlKC9eaWUvLFwiXCIpPT1kLnZlcnNpb258fGQucXVpcmtzJiZcImllcXVpcmtzXCI9PWcpJiYoZz1cImllXCIpLGRbZ10pe2IrPVwiX1wiK2NbZV07YnJlYWt9cmV0dXJuIENLRURJVE9SLmdldFVybChhKCkrYitcIi5jc3NcIil9ZnVuY3Rpb24gYihhLGIpe2dbYV18fChDS0VESVRPUi5kb2N1bWVudC5hcHBlbmRTdHlsZVNoZWV0KGQoYSkpLGdbYV09MSk7YiYmYigpfWZ1bmN0aW9uIGMoYSl7dmFyIGI9XG5hLmdldEJ5SWQobCk7Ynx8KGI9YS5nZXRIZWFkKCkuYXBwZW5kKFwic3R5bGVcIiksYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLGwpLGIuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dC9jc3NcIikpO3JldHVybiBifWZ1bmN0aW9uIGUoYSxiLGMpe3ZhciBkLGUsZztpZihDS0VESVRPUi5lbnYud2Via2l0KWZvcihiPWIuc3BsaXQoXCJ9XCIpLnNsaWNlKDAsLTEpLGU9MDtlPGIubGVuZ3RoO2UrKyliW2VdPWJbZV0uc3BsaXQoXCJ7XCIpO2Zvcih2YXIgaz0wO2s8YS5sZW5ndGg7aysrKWlmKENLRURJVE9SLmVudi53ZWJraXQpZm9yKGU9MDtlPGIubGVuZ3RoO2UrKyl7Zz1iW2VdWzFdO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspZz1nLnJlcGxhY2UoY1tkXVswXSxjW2RdWzFdKTthW2tdLiQuc2hlZXQuYWRkUnVsZShiW2VdWzBdLGcpfWVsc2V7Zz1iO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspZz1nLnJlcGxhY2UoY1tkXVswXSxjW2RdWzFdKTtDS0VESVRPUi5lbnYuaWUmJjExPkNLRURJVE9SLmVudi52ZXJzaW9uP1xuYVtrXS4kLnN0eWxlU2hlZXQuY3NzVGV4dCs9ZzphW2tdLiQuaW5uZXJIVE1MKz1nfX12YXIgZz17fTtDS0VESVRPUi5za2luPXtwYXRoOmEsbG9hZFBhcnQ6ZnVuY3Rpb24oYyxkKXtDS0VESVRPUi5za2luLm5hbWUhPUNLRURJVE9SLnNraW5OYW1lLnNwbGl0KFwiLFwiKVswXT9DS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChDS0VESVRPUi5nZXRVcmwoYSgpK1wic2tpbi5qc1wiKSxmdW5jdGlvbigpe2IoYyxkKX0pOmIoYyxkKX0sZ2V0UGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IuZ2V0VXJsKGQoYSkpfSxpY29uczp7fSxhZGRJY29uOmZ1bmN0aW9uKGEsYixjLGQpe2E9YS50b0xvd2VyQ2FzZSgpO3RoaXMuaWNvbnNbYV18fCh0aGlzLmljb25zW2FdPXtwYXRoOmIsb2Zmc2V0OmN8fDAsYmdzaXplOmR8fFwiMTZweFwifSl9LGdldEljb25TdHlsZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBnO2EmJihhPWEudG9Mb3dlckNhc2UoKSxiJiYoZz10aGlzLmljb25zW2ErXCItcnRsXCJdKSxcbmd8fChnPXRoaXMuaWNvbnNbYV0pKTthPWN8fGcmJmcucGF0aHx8XCJcIjtkPWR8fGcmJmcub2Zmc2V0O2U9ZXx8ZyYmZy5iZ3NpemV8fFwiMTZweFwiO2EmJihhPWEucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikpO3JldHVybiBhJiZcImJhY2tncm91bmQtaW1hZ2U6dXJsKCdcIitDS0VESVRPUi5nZXRVcmwoYSkrXCInKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgXCIrZCtcInB4O2JhY2tncm91bmQtc2l6ZTpcIitlK1wiO1wifX07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmVkaXRvci5wcm90b3R5cGUse2dldFVpQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51aUNvbG9yfSxzZXRVaUNvbG9yOmZ1bmN0aW9uKGEpe3ZhciBiPWMoQ0tFRElUT1IuZG9jdW1lbnQpO3JldHVybih0aGlzLnNldFVpQ29sb3I9ZnVuY3Rpb24oYSl7dGhpcy51aUNvbG9yPWE7dmFyIGM9Q0tFRElUT1Iuc2tpbi5jaGFtZWxlb24sZD1cIlwiLGc9XCJcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiYoZD1jKHRoaXMsXCJlZGl0b3JcIiksZz1cbmModGhpcyxcInBhbmVsXCIpKTthPVtbbixhXV07ZShbYl0sZCxhKTtlKGssZyxhKX0pLmNhbGwodGhpcyxhKX19KTt2YXIgbD1cImNrZV91aV9jb2xvclwiLGs9W10sbj0vXFwkY29sb3IvZztDS0VESVRPUi5vbihcImluc3RhbmNlTG9hZGVkXCIsZnVuY3Rpb24oYSl7aWYoIUNLRURJVE9SLmVudi5pZXx8IUNLRURJVE9SLmVudi5xdWlya3Mpe3ZhciBiPWEuZWRpdG9yO2E9ZnVuY3Rpb24oYSl7YT0oYS5kYXRhWzBdfHxhLmRhdGEpLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImlmcmFtZVwiKS5nZXRJdGVtKDApLmdldEZyYW1lRG9jdW1lbnQoKTtpZighYS5nZXRCeUlkKFwiY2tlX3VpX2NvbG9yXCIpKXthPWMoYSk7ay5wdXNoKGEpO3ZhciBkPWIuZ2V0VWlDb2xvcigpO2QmJmUoW2FdLENLRURJVE9SLnNraW4uY2hhbWVsZW9uKGIsXCJwYW5lbFwiKSxbW24sZF1dKX19O2Iub24oXCJwYW5lbFNob3dcIixhKTtiLm9uKFwibWVudVNob3dcIixhKTtiLmNvbmZpZy51aUNvbG9yJiZiLnNldFVpQ29sb3IoYi5jb25maWcudWlDb2xvcil9fSl9KSgpO1xuKGZ1bmN0aW9uKCl7aWYoQ0tFRElUT1IuZW52LndlYmtpdClDS0VESVRPUi5lbnYuaGM9ITE7ZWxzZXt2YXIgYT1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgc3R5bGVcXHgzZFwid2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMDAwMHB4O2JvcmRlcjoxcHggc29saWQ7Ym9yZGVyLWNvbG9yOnJlZCBibHVlXCJcXHgzZVxceDNjL2RpdlxceDNlJyxDS0VESVRPUi5kb2N1bWVudCk7YS5hcHBlbmRUbyhDS0VESVRPUi5kb2N1bWVudC5nZXRIZWFkKCkpO3RyeXt2YXIgZD1hLmdldENvbXB1dGVkU3R5bGUoXCJib3JkZXItdG9wLWNvbG9yXCIpLGI9YS5nZXRDb21wdXRlZFN0eWxlKFwiYm9yZGVyLXJpZ2h0LWNvbG9yXCIpO0NLRURJVE9SLmVudi5oYz0hKCFkfHxkIT1iKX1jYXRjaChjKXtDS0VESVRPUi5lbnYuaGM9ITF9YS5yZW1vdmUoKX1DS0VESVRPUi5lbnYuaGMmJihDS0VESVRPUi5lbnYuY3NzQ2xhc3MrPVwiIGNrZV9oY1wiKTtDS0VESVRPUi5kb2N1bWVudC5hcHBlbmRTdHlsZVRleHQoXCIuY2tle3Zpc2liaWxpdHk6aGlkZGVuO31cIik7XG5DS0VESVRPUi5zdGF0dXM9XCJsb2FkZWRcIjtDS0VESVRPUi5maXJlT25jZShcImxvYWRlZFwiKTtpZihhPUNLRURJVE9SLl8ucGVuZGluZylmb3IoZGVsZXRlIENLRURJVE9SLl8ucGVuZGluZyxkPTA7ZDxhLmxlbmd0aDtkKyspQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseShhW2RdWzBdLGFbZF1bMV0pLENLRURJVE9SLmFkZChhW2RdWzBdKX0pKCk7LypcbiBDb3B5cmlnaHQgKGMpIDIwMDMtMjAxNiwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwOi8vY2tlZGl0b3IuY29tL2xpY2Vuc2VcbiovXG5DS0VESVRPUi5za2luLm5hbWU9XCJtb29ub1wiO0NLRURJVE9SLnNraW4udWFfZWRpdG9yPVwiaWUsaWVxdWlya3MsaWU3LGllOCxnZWNrb1wiO0NLRURJVE9SLnNraW4udWFfZGlhbG9nPVwiaWUsaWVxdWlya3MsaWU3LGllOFwiO1xuQ0tFRElUT1Iuc2tpbi5jaGFtZWxlb249ZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihiLGUpe2Zvcih2YXIgYT1iLm1hdGNoKC9bXiNdLi9nKSxjPTA7Mz5jO2MrKyl7dmFyIGY9YyxkO2Q9cGFyc2VJbnQoYVtjXSwxNik7ZD0oXCIwXCIrKDA+ZT8wfGQqKDErZSk6MHxkKygyNTUtZCkqZSkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7YVtmXT1kfXJldHVyblwiI1wiK2Euam9pbihcIlwiKX19KCksYz1mdW5jdGlvbigpe3ZhciBiPW5ldyBDS0VESVRPUi50ZW1wbGF0ZShcImJhY2tncm91bmQ6I3t0b307YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLHtmcm9tfSx7dG99KTtmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGdyYWRpZW50VHlwZVxceDNkMCxzdGFydENvbG9yc3RyXFx4M2Qne2Zyb219JyxlbmRDb2xvcnN0clxceDNkJ3t0b30nKTtcIik7cmV0dXJuIGZ1bmN0aW9uKGMsYSl7cmV0dXJuIGIub3V0cHV0KHtmcm9tOmMsXG50bzphfSl9fSgpLGY9e2VkaXRvcjpuZXcgQ0tFRElUT1IudGVtcGxhdGUoXCJ7aWR9LmNrZV9jaHJvbWUgW2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfdG9wIFsge2RlZmF1bHRHcmFkaWVudH1ib3JkZXItYm90dG9tLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV9ib3R0b20gW3tkZWZhdWx0R3JhZGllbnR9Ym9yZGVyLXRvcC1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfcmVzaXplciBbYm9yZGVyLXJpZ2h0LWNvbG9yOntja2VSZXNpemVyfV0ge2lkfSAuY2tlX2RpYWxvZ190aXRsZSBbe2RlZmF1bHRHcmFkaWVudH1ib3JkZXItYm90dG9tLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV9kaWFsb2dfZm9vdGVyIFt7ZGVmYXVsdEdyYWRpZW50fW91dGxpbmUtY29sb3I6e2RlZmF1bHRCb3JkZXJ9O2JvcmRlci10b3AtY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX2RpYWxvZ190YWIgW3tsaWdodEdyYWRpZW50fWJvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfZGlhbG9nX3RhYjpob3ZlciBbe21lZGl1bUdyYWRpZW50fV0ge2lkfSAuY2tlX2RpYWxvZ19jb250ZW50cyBbYm9yZGVyLXRvcC1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfZGlhbG9nX3RhYl9zZWxlY3RlZCwge2lkfSAuY2tlX2RpYWxvZ190YWJfc2VsZWN0ZWQ6aG92ZXIgW2JhY2tncm91bmQ6e2RpYWxvZ1RhYlNlbGVjdGVkfTtib3JkZXItYm90dG9tLWNvbG9yOntkaWFsb2dUYWJTZWxlY3RlZEJvcmRlcn07XSB7aWR9IC5ja2VfZGlhbG9nX2JvZHkgW2JhY2tncm91bmQ6e2RpYWxvZ0JvZHl9O2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfdG9vbGdyb3VwIFt7bGlnaHRHcmFkaWVudH1ib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSBhLmNrZV9idXR0b25fb2ZmOmhvdmVyLCB7aWR9IGEuY2tlX2J1dHRvbl9vZmY6Zm9jdXMsIHtpZH0gYS5ja2VfYnV0dG9uX29mZjphY3RpdmUgW3ttZWRpdW1HcmFkaWVudH1dIHtpZH0gLmNrZV9idXR0b25fb24gW3tja2VCdXR0b25Pbn1dIHtpZH0gLmNrZV90b29sYmFyX3NlcGFyYXRvciBbYmFja2dyb3VuZC1jb2xvcjoge2NrZVRvb2xiYXJTZXBhcmF0b3J9O10ge2lkfSAuY2tlX2NvbWJvX2J1dHRvbiBbYm9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTt7bGlnaHRHcmFkaWVudH1dIHtpZH0gYS5ja2VfY29tYm9fYnV0dG9uOmhvdmVyLCB7aWR9IGEuY2tlX2NvbWJvX2J1dHRvbjpmb2N1cywge2lkfSAuY2tlX2NvbWJvX29uIGEuY2tlX2NvbWJvX2J1dHRvbiBbYm9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTt7bWVkaXVtR3JhZGllbnR9XSB7aWR9IC5ja2VfcGF0aF9pdGVtIFtjb2xvcjp7ZWxlbWVudHNQYXRoQ29sb3J9O10ge2lkfSBhLmNrZV9wYXRoX2l0ZW06aG92ZXIsIHtpZH0gYS5ja2VfcGF0aF9pdGVtOmZvY3VzLCB7aWR9IGEuY2tlX3BhdGhfaXRlbTphY3RpdmUgW2JhY2tncm91bmQtY29sb3I6e2VsZW1lbnRzUGF0aEJnfTtdIHtpZH0uY2tlX3BhbmVsIFtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10gXCIpLFxucGFuZWw6bmV3IENLRURJVE9SLnRlbXBsYXRlKFwiLmNrZV9wYW5lbF9ncm91cHRpdGxlIFt7bGlnaHRHcmFkaWVudH1ib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10gLmNrZV9tZW51YnV0dG9uX2ljb24gW2JhY2tncm91bmQtY29sb3I6e21lbnVidXR0b25JY29ufTtdIC5ja2VfbWVudWJ1dHRvbjpob3ZlciAuY2tlX21lbnVidXR0b25faWNvbiwgLmNrZV9tZW51YnV0dG9uOmZvY3VzIC5ja2VfbWVudWJ1dHRvbl9pY29uLCAuY2tlX21lbnVidXR0b246YWN0aXZlIC5ja2VfbWVudWJ1dHRvbl9pY29uIFtiYWNrZ3JvdW5kLWNvbG9yOnttZW51YnV0dG9uSWNvbkhvdmVyfTtdIC5ja2VfbWVudXNlcGFyYXRvciBbYmFja2dyb3VuZC1jb2xvcjp7bWVudWJ1dHRvbkljb259O10gYTpob3Zlci5ja2VfY29sb3Jib3gsIGE6Zm9jdXMuY2tlX2NvbG9yYm94LCBhOmFjdGl2ZS5ja2VfY29sb3Jib3ggW2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSBhOmhvdmVyLmNrZV9jb2xvcmF1dG8sIGE6aG92ZXIuY2tlX2NvbG9ybW9yZSwgYTpmb2N1cy5ja2VfY29sb3JhdXRvLCBhOmZvY3VzLmNrZV9jb2xvcm1vcmUsIGE6YWN0aXZlLmNrZV9jb2xvcmF1dG8sIGE6YWN0aXZlLmNrZV9jb2xvcm1vcmUgW2JhY2tncm91bmQtY29sb3I6e2NrZUNvbG9yYXV0b307Ym9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIFwiKX07XG5yZXR1cm4gZnVuY3Rpb24oZyxlKXt2YXIgYT1nLnVpQ29sb3IsYT17aWQ6XCIuXCIrZy5pZCxkZWZhdWx0Qm9yZGVyOmIoYSwtLjEpLGRlZmF1bHRHcmFkaWVudDpjKGIoYSwuOSksYSksbGlnaHRHcmFkaWVudDpjKGIoYSwxKSxiKGEsLjcpKSxtZWRpdW1HcmFkaWVudDpjKGIoYSwuOCksYihhLC41KSksY2tlQnV0dG9uT246YyhiKGEsLjYpLGIoYSwuNykpLGNrZVJlc2l6ZXI6YihhLC0uNCksY2tlVG9vbGJhclNlcGFyYXRvcjpiKGEsLjUpLGNrZUNvbG9yYXV0bzpiKGEsLjgpLGRpYWxvZ0JvZHk6YihhLC43KSxkaWFsb2dUYWJTZWxlY3RlZDpjKFwiI0ZGRkZGRlwiLFwiI0ZGRkZGRlwiKSxkaWFsb2dUYWJTZWxlY3RlZEJvcmRlcjpcIiNGRkZcIixlbGVtZW50c1BhdGhDb2xvcjpiKGEsLS42KSxlbGVtZW50c1BhdGhCZzphLG1lbnVidXR0b25JY29uOmIoYSwuNSksbWVudWJ1dHRvbkljb25Ib3ZlcjpiKGEsLjMpfTtyZXR1cm4gZltlXS5vdXRwdXQoYSkucmVwbGFjZSgvXFxbL2csXCJ7XCIpLnJlcGxhY2UoL1xcXS9nLFxuXCJ9XCIpfX0oKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImRpYWxvZ3VpXCIse29uTG9hZDpmdW5jdGlvbigpe3ZhciBoPWZ1bmN0aW9uKGIpe3RoaXMuX3x8KHRoaXMuXz17fSk7dGhpcy5fW1wiZGVmYXVsdFwiXT10aGlzLl8uaW5pdFZhbHVlPWJbXCJkZWZhdWx0XCJdfHxcIlwiO3RoaXMuXy5yZXF1aXJlZD1iLnJlcXVpcmVkfHwhMTtmb3IodmFyIGE9W3RoaXMuX10sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspYS5wdXNoKGFyZ3VtZW50c1tkXSk7YS5wdXNoKCEwKTtDS0VESVRPUi50b29scy5leHRlbmQuYXBwbHkoQ0tFRElUT1IudG9vbHMsYSk7cmV0dXJuIHRoaXMuX30sdj17YnVpbGQ6ZnVuY3Rpb24oYixhLGQpe3JldHVybiBuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnRleHRJbnB1dChiLGEsZCl9fSxuPXtidWlsZDpmdW5jdGlvbihiLGEsZCl7cmV0dXJuIG5ldyBDS0VESVRPUi51aS5kaWFsb2dbYS50eXBlXShiLGEsZCl9fSxxPXtpc0NoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpIT1cbnRoaXMuZ2V0SW5pdFZhbHVlKCl9LHJlc2V0OmZ1bmN0aW9uKGIpe3RoaXMuc2V0VmFsdWUodGhpcy5nZXRJbml0VmFsdWUoKSxiKX0sc2V0SW5pdFZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fLmluaXRWYWx1ZT10aGlzLmdldFZhbHVlKCl9LHJlc2V0SW5pdFZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fLmluaXRWYWx1ZT10aGlzLl9bXCJkZWZhdWx0XCJdfSxnZXRJbml0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmluaXRWYWx1ZX19LHI9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQucHJvdG90eXBlLmV2ZW50UHJvY2Vzc29ycyx7b25DaGFuZ2U6ZnVuY3Rpb24oYixhKXt0aGlzLl8uZG9tT25DaGFuZ2VSZWdpc3RlcmVkfHwoYi5vbihcImxvYWRcIixmdW5jdGlvbigpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2IucGFydHMuZGlhbG9nLmlzVmlzaWJsZSgpJiZ0aGlzLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy5nZXRWYWx1ZSgpfSl9LFxudGhpcyl9LHRoaXMpLHRoaXMuXy5kb21PbkNoYW5nZVJlZ2lzdGVyZWQ9ITApO3RoaXMub24oXCJjaGFuZ2VcIixhKX19LCEwKSx4PS9eb24oW0EtWl1cXHcrKS8sdD1mdW5jdGlvbihiKXtmb3IodmFyIGEgaW4gYikoeC50ZXN0KGEpfHxcInRpdGxlXCI9PWF8fFwidHlwZVwiPT1hKSYmZGVsZXRlIGJbYV07cmV0dXJuIGJ9LHc9ZnVuY3Rpb24oYil7Yj1iLmRhdGEuZ2V0S2V5c3Ryb2tlKCk7Yj09Q0tFRElUT1IuU0hJRlQrQ0tFRElUT1IuQUxUKzM2P3RoaXMuc2V0RGlyZWN0aW9uTWFya2VyKFwibHRyXCIpOmI9PUNLRURJVE9SLlNISUZUK0NLRURJVE9SLkFMVCszNSYmdGhpcy5zZXREaXJlY3Rpb25NYXJrZXIoXCJydGxcIil9O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi51aS5kaWFsb2cse2xhYmVsZWRFbGVtZW50OmZ1bmN0aW9uKGIsYSxkLGYpe2lmKCEoND5hcmd1bWVudHMubGVuZ3RoKSl7dmFyIGM9aC5jYWxsKHRoaXMsYSk7Yy5sYWJlbElkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1xuXCJfbGFiZWxcIjt0aGlzLl8uY2hpbGRyZW49W107dmFyIGU9e3JvbGU6YS5yb2xlfHxcInByZXNlbnRhdGlvblwifTthLmluY2x1ZGVMYWJlbCYmKGVbXCJhcmlhLWxhYmVsbGVkYnlcIl09Yy5sYWJlbElkKTtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LmNhbGwodGhpcyxiLGEsZCxcImRpdlwiLG51bGwsZSxmdW5jdGlvbigpe3ZhciBlPVtdLGc9YS5yZXF1aXJlZD9cIiBja2VfcmVxdWlyZWRcIjpcIlwiO1wiaG9yaXpvbnRhbFwiIT1hLmxhYmVsTGF5b3V0P2UucHVzaCgnXFx4M2NsYWJlbCBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX2xhYmVsZWRfbGFiZWwnK2crJ1wiICcsJyBpZFxceDNkXCInK2MubGFiZWxJZCsnXCInLGMuaW5wdXRJZD8nIGZvclxceDNkXCInK2MuaW5wdXRJZCsnXCInOlwiXCIsKGEubGFiZWxTdHlsZT8nIHN0eWxlXFx4M2RcIicrYS5sYWJlbFN0eWxlKydcIic6XCJcIikrXCJcXHgzZVwiLGEubGFiZWwsXCJcXHgzYy9sYWJlbFxceDNlXCIsJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfbGFiZWxlZF9jb250ZW50XCInLFxuYS5jb250cm9sU3R5bGU/JyBzdHlsZVxceDNkXCInK2EuY29udHJvbFN0eWxlKydcIic6XCJcIiwnIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZScsZi5jYWxsKHRoaXMsYixhKSxcIlxceDNjL2RpdlxceDNlXCIpOihnPXt0eXBlOlwiaGJveFwiLHdpZHRoczphLndpZHRocyxwYWRkaW5nOjAsY2hpbGRyZW46W3t0eXBlOlwiaHRtbFwiLGh0bWw6J1xceDNjbGFiZWwgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9sYWJlbGVkX2xhYmVsJytnKydcIiBpZFxceDNkXCInK2MubGFiZWxJZCsnXCIgZm9yXFx4M2RcIicrYy5pbnB1dElkKydcIicrKGEubGFiZWxTdHlsZT8nIHN0eWxlXFx4M2RcIicrYS5sYWJlbFN0eWxlKydcIic6XCJcIikrXCJcXHgzZVwiK0NLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYS5sYWJlbCkrXCJcXHgzYy9sYWJlbFxceDNlXCJ9LHt0eXBlOlwiaHRtbFwiLGh0bWw6J1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX2xhYmVsZWRfY29udGVudFwiJysoYS5jb250cm9sU3R5bGU/JyBzdHlsZVxceDNkXCInK2EuY29udHJvbFN0eWxlK1xuJ1wiJzpcIlwiKStcIlxceDNlXCIrZi5jYWxsKHRoaXMsYixhKStcIlxceDNjL3NwYW5cXHgzZVwifV19LENLRURJVE9SLmRpYWxvZy5fLnVpRWxlbWVudEJ1aWxkZXJzLmhib3guYnVpbGQoYixnLGUpKTtyZXR1cm4gZS5qb2luKFwiXCIpfSl9fSx0ZXh0SW5wdXQ6ZnVuY3Rpb24oYixhLGQpe2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7aC5jYWxsKHRoaXMsYSk7dmFyIGY9dGhpcy5fLmlucHV0SWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfdGV4dElucHV0XCIsYz17XCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9pbnB1dF9cIithLnR5cGUsaWQ6Zix0eXBlOmEudHlwZX07YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7YS5tYXhMZW5ndGgmJihjLm1heGxlbmd0aD1hLm1heExlbmd0aCk7YS5zaXplJiYoYy5zaXplPWEuc2l6ZSk7YS5pbnB1dFN0eWxlJiYoYy5zdHlsZT1hLmlucHV0U3R5bGUpO3ZhciBlPXRoaXMsbT0hMTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7ZS5nZXRJbnB1dEVsZW1lbnQoKS5vbihcImtleWRvd25cIixcbmZ1bmN0aW9uKGEpezEzPT1hLmRhdGEuZ2V0S2V5c3Ryb2tlKCkmJihtPSEwKX0pO2UuZ2V0SW5wdXRFbGVtZW50KCkub24oXCJrZXl1cFwiLGZ1bmN0aW9uKGEpezEzPT1hLmRhdGEuZ2V0S2V5c3Ryb2tlKCkmJm0mJihiLmdldEJ1dHRvbihcIm9rXCIpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5nZXRCdXR0b24oXCJva1wiKS5jbGljaygpfSwwKSxtPSExKTtlLmJpZGkmJncuY2FsbChlLGEpfSxudWxsLG51bGwsMUUzKX0pO0NLRURJVE9SLnVpLmRpYWxvZy5sYWJlbGVkRWxlbWVudC5jYWxsKHRoaXMsYixhLGQsZnVuY3Rpb24oKXt2YXIgYj1bJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfaW5wdXRfJyxhLnR5cGUsJ1wiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCInXTthLndpZHRoJiZiLnB1c2goJ3N0eWxlXFx4M2RcIndpZHRoOicrYS53aWR0aCsnXCIgJyk7Yi5wdXNoKFwiXFx4M2VcXHgzY2lucHV0IFwiKTtjW1wiYXJpYS1sYWJlbGxlZGJ5XCJdPXRoaXMuXy5sYWJlbElkO3RoaXMuXy5yZXF1aXJlZCYmXG4oY1tcImFyaWEtcmVxdWlyZWRcIl09dGhpcy5fLnJlcXVpcmVkKTtmb3IodmFyIGUgaW4gYyliLnB1c2goZSsnXFx4M2RcIicrY1tlXSsnXCIgJyk7Yi5wdXNoKFwiIC9cXHgzZVxceDNjL2RpdlxceDNlXCIpO3JldHVybiBiLmpvaW4oXCJcIil9KX19LHRleHRhcmVhOmZ1bmN0aW9uKGIsYSxkKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe2guY2FsbCh0aGlzLGEpO3ZhciBmPXRoaXMsYz10aGlzLl8uaW5wdXRJZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl90ZXh0YXJlYVwiLGU9e307YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7ZS5yb3dzPWEucm93c3x8NTtlLmNvbHM9YS5jb2xzfHwyMDtlW1wiY2xhc3NcIl09XCJja2VfZGlhbG9nX3VpX2lucHV0X3RleHRhcmVhIFwiKyhhW1wiY2xhc3NcIl18fFwiXCIpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBhLmlucHV0U3R5bGUmJihlLnN0eWxlPWEuaW5wdXRTdHlsZSk7YS5kaXImJihlLmRpcj1hLmRpcik7aWYoZi5iaWRpKWIub24oXCJsb2FkXCIsXG5mdW5jdGlvbigpe2YuZ2V0SW5wdXRFbGVtZW50KCkub24oXCJrZXl1cFwiLHcpfSxmKTtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLGZ1bmN0aW9uKCl7ZVtcImFyaWEtbGFiZWxsZWRieVwiXT10aGlzLl8ubGFiZWxJZDt0aGlzLl8ucmVxdWlyZWQmJihlW1wiYXJpYS1yZXF1aXJlZFwiXT10aGlzLl8ucmVxdWlyZWQpO3ZhciBhPVsnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF90ZXh0YXJlYVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjdGV4dGFyZWEgaWRcXHgzZFwiJyxjLCdcIiAnXSxiO2ZvcihiIGluIGUpYS5wdXNoKGIrJ1xceDNkXCInK0NLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZVtiXSkrJ1wiICcpO2EucHVzaChcIlxceDNlXCIsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShmLl9bXCJkZWZhdWx0XCJdKSxcIlxceDNjL3RleHRhcmVhXFx4M2VcXHgzYy9kaXZcXHgzZVwiKTtyZXR1cm4gYS5qb2luKFwiXCIpfSl9fSxjaGVja2JveDpmdW5jdGlvbihiLFxuYSxkKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe3ZhciBmPWguY2FsbCh0aGlzLGEse1wiZGVmYXVsdFwiOiEhYVtcImRlZmF1bHRcIl19KTthLnZhbGlkYXRlJiYodGhpcy52YWxpZGF0ZT1hLnZhbGlkYXRlKTtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LmNhbGwodGhpcyxiLGEsZCxcInNwYW5cIixudWxsLG51bGwsZnVuY3Rpb24oKXt2YXIgYz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSx7aWQ6YS5pZD9hLmlkK1wiX2NoZWNrYm94XCI6Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfY2hlY2tib3hcIn0sITApLGU9W10sZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9sYWJlbFwiLGc9e1wiY2xhc3NcIjpcImNrZV9kaWFsb2dfdWlfY2hlY2tib3hfaW5wdXRcIix0eXBlOlwiY2hlY2tib3hcIixcImFyaWEtbGFiZWxsZWRieVwiOmR9O3QoYyk7YVtcImRlZmF1bHRcIl0mJihnLmNoZWNrZWQ9XCJjaGVja2VkXCIpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBjLmlucHV0U3R5bGUmJihjLnN0eWxlPWMuaW5wdXRTdHlsZSk7XG5mLmNoZWNrYm94PW5ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50KGIsYyxlLFwiaW5wdXRcIixudWxsLGcpO2UucHVzaCgnIFxceDNjbGFiZWwgaWRcXHgzZFwiJyxkLCdcIiBmb3JcXHgzZFwiJyxnLmlkLCdcIicrKGEubGFiZWxTdHlsZT8nIHN0eWxlXFx4M2RcIicrYS5sYWJlbFN0eWxlKydcIic6XCJcIikrXCJcXHgzZVwiLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYS5sYWJlbCksXCJcXHgzYy9sYWJlbFxceDNlXCIpO3JldHVybiBlLmpvaW4oXCJcIil9KX19LHJhZGlvOmZ1bmN0aW9uKGIsYSxkKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe2guY2FsbCh0aGlzLGEpO3RoaXMuX1tcImRlZmF1bHRcIl18fCh0aGlzLl9bXCJkZWZhdWx0XCJdPXRoaXMuXy5pbml0VmFsdWU9YS5pdGVtc1swXVsxXSk7YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7dmFyIGY9W10sYz10aGlzO2Eucm9sZT1cInJhZGlvZ3JvdXBcIjthLmluY2x1ZGVMYWJlbD0hMDtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQuY2FsbCh0aGlzLFxuYixhLGQsZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sZD1bXSxnPShhLmlkP2EuaWQ6Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkpK1wiX3JhZGlvXCIsaz0wO2s8YS5pdGVtcy5sZW5ndGg7aysrKXt2YXIgbD1hLml0ZW1zW2tdLGg9dm9pZCAwIT09bFsyXT9sWzJdOmxbMF0sbj12b2lkIDAhPT1sWzFdP2xbMV06bFswXSxwPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3JhZGlvX2lucHV0XCIscT1wK1wiX2xhYmVsXCIscD1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSx7aWQ6cCx0aXRsZTpudWxsLHR5cGU6bnVsbH0sITApLGg9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHAse3RpdGxlOmh9LCEwKSxyPXt0eXBlOlwicmFkaW9cIixcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX3JhZGlvX2lucHV0XCIsbmFtZTpnLHZhbHVlOm4sXCJhcmlhLWxhYmVsbGVkYnlcIjpxfSx1PVtdO2MuX1tcImRlZmF1bHRcIl09PW4mJihyLmNoZWNrZWQ9XCJjaGVja2VkXCIpO3QocCk7dChoKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgcC5pbnB1dFN0eWxlJiZcbihwLnN0eWxlPXAuaW5wdXRTdHlsZSk7cC5rZXlib2FyZEZvY3VzYWJsZT0hMDtmLnB1c2gobmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQoYixwLHUsXCJpbnB1dFwiLG51bGwscikpO3UucHVzaChcIiBcIik7bmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQoYixoLHUsXCJsYWJlbFwiLG51bGwse2lkOnEsXCJmb3JcIjpyLmlkfSxsWzBdKTtlLnB1c2godS5qb2luKFwiXCIpKX1uZXcgQ0tFRElUT1IudWkuZGlhbG9nLmhib3goYixmLGUsZCk7cmV0dXJuIGQuam9pbihcIlwiKX0pO3RoaXMuXy5jaGlsZHJlbj1mfX0sYnV0dG9uOmZ1bmN0aW9uKGIsYSxkKXtpZihhcmd1bWVudHMubGVuZ3RoKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoYT1hKGIuZ2V0UGFyZW50RWRpdG9yKCkpKTtoLmNhbGwodGhpcyxhLHtkaXNhYmxlZDphLmRpc2FibGVkfHwhMX0pO0NLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKHRoaXMpO3ZhciBmPXRoaXM7Yi5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RWxlbWVudCgpO1xuKGZ1bmN0aW9uKCl7YS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Zi5jbGljaygpO2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSk7YS5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXthLmRhdGEuZ2V0S2V5c3Ryb2tlKClpbnszMjoxfSYmKGYuY2xpY2soKSxhLmRhdGEucHJldmVudERlZmF1bHQoKSl9KX0pKCk7YS51bnNlbGVjdGFibGUoKX0sdGhpcyk7dmFyIGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGEpO2RlbGV0ZSBjLnN0eWxlO3ZhciBlPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX2xhYmVsXCI7Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5jYWxsKHRoaXMsYixjLGQsXCJhXCIsbnVsbCx7c3R5bGU6YS5zdHlsZSxocmVmOlwiamF2YXNjcmlwdDp2b2lkKDApXCIsdGl0bGU6YS5sYWJlbCxoaWRlZm9jdXM6XCJ0cnVlXCIsXCJjbGFzc1wiOmFbXCJjbGFzc1wiXSxyb2xlOlwiYnV0dG9uXCIsXCJhcmlhLWxhYmVsbGVkYnlcIjplfSwnXFx4M2NzcGFuIGlkXFx4M2RcIicrZSsnXCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9idXR0b25cIlxceDNlJytcbkNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYS5sYWJlbCkrXCJcXHgzYy9zcGFuXFx4M2VcIil9fSxzZWxlY3Q6ZnVuY3Rpb24oYixhLGQpe2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7dmFyIGY9aC5jYWxsKHRoaXMsYSk7YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7Zi5pbnB1dElkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3NlbGVjdFwiO0NLRURJVE9SLnVpLmRpYWxvZy5sYWJlbGVkRWxlbWVudC5jYWxsKHRoaXMsYixhLGQsZnVuY3Rpb24oKXt2YXIgYz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSx7aWQ6YS5pZD9hLmlkK1wiX3NlbGVjdFwiOkNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3NlbGVjdFwifSwhMCksZT1bXSxkPVtdLGc9e2lkOmYuaW5wdXRJZCxcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX2lucHV0X3NlbGVjdFwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6dGhpcy5fLmxhYmVsSWR9O2UucHVzaCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF8nLFxuYS50eXBlLCdcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiJyk7YS53aWR0aCYmZS5wdXNoKCdzdHlsZVxceDNkXCJ3aWR0aDonK2Eud2lkdGgrJ1wiICcpO2UucHVzaChcIlxceDNlXCIpO3ZvaWQgMCE9PWEuc2l6ZSYmKGcuc2l6ZT1hLnNpemUpO3ZvaWQgMCE9PWEubXVsdGlwbGUmJihnLm11bHRpcGxlPWEubXVsdGlwbGUpO3QoYyk7Zm9yKHZhciBrPTAsbDtrPGEuaXRlbXMubGVuZ3RoJiYobD1hLml0ZW1zW2tdKTtrKyspZC5wdXNoKCdcXHgzY29wdGlvbiB2YWx1ZVxceDNkXCInLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUodm9pZCAwIT09bFsxXT9sWzFdOmxbMF0pLnJlcGxhY2UoL1wiL2csXCJcXHgyNnF1b3Q7XCIpLCdcIiAvXFx4M2UgJyxDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGxbMF0pKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYy5pbnB1dFN0eWxlJiYoYy5zdHlsZT1jLmlucHV0U3R5bGUpO2Yuc2VsZWN0PW5ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50KGIsYyxlLFwic2VsZWN0XCIsbnVsbCxcbmcsZC5qb2luKFwiXCIpKTtlLnB1c2goXCJcXHgzYy9kaXZcXHgzZVwiKTtyZXR1cm4gZS5qb2luKFwiXCIpfSl9fSxmaWxlOmZ1bmN0aW9uKGIsYSxkKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe3ZvaWQgMD09PWFbXCJkZWZhdWx0XCJdJiYoYVtcImRlZmF1bHRcIl09XCJcIik7dmFyIGY9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGguY2FsbCh0aGlzLGEpLHtkZWZpbml0aW9uOmEsYnV0dG9uczpbXX0pO2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXtDS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGYuZnJhbWVJZCkuZ2V0UGFyZW50KCkuYWRkQ2xhc3MoXCJja2VfZGlhbG9nX3VpX2lucHV0X2ZpbGVcIil9KTtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLGZ1bmN0aW9uKCl7Zi5mcmFtZUlkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX2ZpbGVJbnB1dFwiO3ZhciBiPVsnXFx4M2NpZnJhbWUgZnJhbWVib3JkZXJcXHgzZFwiMFwiIGFsbG93dHJhbnNwYXJlbmN5XFx4M2RcIjBcIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX2lucHV0X2ZpbGVcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGlkXFx4M2RcIicsXG5mLmZyYW1lSWQsJ1wiIHRpdGxlXFx4M2RcIicsYS5sYWJlbCwnXCIgc3JjXFx4M2RcImphdmFzY3JpcHQ6dm9pZCgnXTtiLnB1c2goQ0tFRElUT1IuZW52LmllP1wiKGZ1bmN0aW9uKCl7XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KSgpXCI6XCIwXCIpO2IucHVzaCgnKVwiXFx4M2VcXHgzYy9pZnJhbWVcXHgzZScpO3JldHVybiBiLmpvaW4oXCJcIil9KX19LGZpbGVCdXR0b246ZnVuY3Rpb24oYixhLGQpe3ZhciBmPXRoaXM7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXtoLmNhbGwodGhpcyxhKTthLnZhbGlkYXRlJiYodGhpcy52YWxpZGF0ZT1hLnZhbGlkYXRlKTt2YXIgYz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYSksZT1jLm9uQ2xpY2s7Yy5jbGFzc05hbWU9KGMuY2xhc3NOYW1lP2MuY2xhc3NOYW1lK1wiIFwiOlwiXCIpK1wiY2tlX2RpYWxvZ191aV9idXR0b25cIjtjLm9uQ2xpY2s9ZnVuY3Rpb24oYyl7dmFyIGQ9XG5hW1wiZm9yXCJdO2UmJiExPT09ZS5jYWxsKHRoaXMsYyl8fChiLmdldENvbnRlbnRFbGVtZW50KGRbMF0sZFsxXSkuc3VibWl0KCksdGhpcy5kaXNhYmxlKCkpfTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7Yi5nZXRDb250ZW50RWxlbWVudChhW1wiZm9yXCJdWzBdLGFbXCJmb3JcIl1bMV0pLl8uYnV0dG9ucy5wdXNoKGYpfSk7Q0tFRElUT1IudWkuZGlhbG9nLmJ1dHRvbi5jYWxsKHRoaXMsYixjLGQpfX0saHRtbDpmdW5jdGlvbigpe3ZhciBiPS9eXFxzKjxbXFx3Ol0rXFxzKyhbXj5dKik/Pi8sYT0vXihcXHMqPFtcXHc6XSsoPzpcXHMrW14+XSopPykoKD86LnxcXHJ8XFxuKSspJC8sZD0vXFwvJC87cmV0dXJuIGZ1bmN0aW9uKGYsYyxlKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe3ZhciBtPVtdLGc9Yy5odG1sO1wiXFx4M2NcIiE9Zy5jaGFyQXQoMCkmJihnPVwiXFx4M2NzcGFuXFx4M2VcIitnK1wiXFx4M2Mvc3BhblxceDNlXCIpO3ZhciBrPWMuZm9jdXM7aWYoayl7dmFyIGw9dGhpcy5mb2N1czt0aGlzLmZvY3VzPWZ1bmN0aW9uKCl7KFwiZnVuY3Rpb25cIj09XG50eXBlb2Ygaz9rOmwpLmNhbGwodGhpcyk7dGhpcy5maXJlKFwiZm9jdXNcIil9O2MuaXNGb2N1c2FibGUmJih0aGlzLmlzRm9jdXNhYmxlPXRoaXMuaXNGb2N1c2FibGUpO3RoaXMua2V5Ym9hcmRGb2N1c2FibGU9ITB9Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5jYWxsKHRoaXMsZixjLG0sXCJzcGFuXCIsbnVsbCxudWxsLFwiXCIpO209bS5qb2luKFwiXCIpLm1hdGNoKGIpO2c9Zy5tYXRjaChhKXx8W1wiXCIsXCJcIixcIlwiXTtkLnRlc3QoZ1sxXSkmJihnWzFdPWdbMV0uc2xpY2UoMCwtMSksZ1syXT1cIi9cIitnWzJdKTtlLnB1c2goW2dbMV0sXCIgXCIsbVsxXXx8XCJcIixnWzJdXS5qb2luKFwiXCIpKX19fSgpLGZpZWxkc2V0OmZ1bmN0aW9uKGIsYSxkLGYsYyl7dmFyIGU9Yy5sYWJlbDt0aGlzLl89e2NoaWxkcmVuOmF9O0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGIsYyxmLFwiZmllbGRzZXRcIixudWxsLG51bGwsZnVuY3Rpb24oKXt2YXIgYT1bXTtlJiZhLnB1c2goXCJcXHgzY2xlZ2VuZFwiK1xuKGMubGFiZWxTdHlsZT8nIHN0eWxlXFx4M2RcIicrYy5sYWJlbFN0eWxlKydcIic6XCJcIikrXCJcXHgzZVwiK2UrXCJcXHgzYy9sZWdlbmRcXHgzZVwiKTtmb3IodmFyIGI9MDtiPGQubGVuZ3RoO2IrKylhLnB1c2goZFtiXSk7cmV0dXJuIGEuam9pbihcIlwiKX0pfX0sITApO0NLRURJVE9SLnVpLmRpYWxvZy5odG1sLnByb3RvdHlwZT1uZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudDtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7c2V0TGFiZWw6ZnVuY3Rpb24oYil7dmFyIGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8ubGFiZWxJZCk7MT5hLmdldENoaWxkQ291bnQoKT8obmV3IENLRURJVE9SLmRvbS50ZXh0KGIsQ0tFRElUT1IuZG9jdW1lbnQpKS5hcHBlbmRUbyhhKTphLmdldENoaWxkKDApLiQubm9kZVZhbHVlPWI7cmV0dXJuIHRoaXN9LGdldExhYmVsOmZ1bmN0aW9uKCl7dmFyIGI9XG5DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHRoaXMuXy5sYWJlbElkKTtyZXR1cm4hYnx8MT5iLmdldENoaWxkQ291bnQoKT9cIlwiOmIuZ2V0Q2hpbGQoMCkuZ2V0VGV4dCgpfSxldmVudFByb2Nlc3NvcnM6cn0sITApO0NLRURJVE9SLnVpLmRpYWxvZy5idXR0b24ucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7Y2xpY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmRpc2FibGVkPyExOnRoaXMuZmlyZShcImNsaWNrXCIse2RpYWxvZzp0aGlzLl8uZGlhbG9nfSl9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuXy5kaXNhYmxlZD0hMTt2YXIgYj10aGlzLmdldEVsZW1lbnQoKTtiJiZiLnJlbW92ZUNsYXNzKFwiY2tlX2Rpc2FibGVkXCIpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5fLmRpc2FibGVkPSEwO3RoaXMuZ2V0RWxlbWVudCgpLmFkZENsYXNzKFwiY2tlX2Rpc2FibGVkXCIpfSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50KCkuZ2V0Rmlyc3QoKS5pc1Zpc2libGUoKX0sXG5pc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fLmRpc2FibGVkfSxldmVudFByb2Nlc3NvcnM6Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQucHJvdG90eXBlLmV2ZW50UHJvY2Vzc29ycyx7b25DbGljazpmdW5jdGlvbihiLGEpe3RoaXMub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX19LCEwKSxhY2Nlc3NLZXlVcDpmdW5jdGlvbigpe3RoaXMuY2xpY2soKX0sYWNjZXNzS2V5RG93bjpmdW5jdGlvbigpe3RoaXMuZm9jdXMoKX0sa2V5Ym9hcmRGb2N1c2FibGU6ITB9LCEwKTtDS0VESVRPUi51aS5kaWFsb2cudGV4dElucHV0LnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLnVpLmRpYWxvZy5sYWJlbGVkRWxlbWVudCx7Z2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIENLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmlucHV0SWQpfSxcbmZvY3VzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5zZWxlY3RQYXJlbnRUYWIoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRJbnB1dEVsZW1lbnQoKTthJiZhLiQuZm9jdXMoKX0sMCl9LHNlbGVjdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMuc2VsZWN0UGFyZW50VGFiKCk7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPWIuZ2V0SW5wdXRFbGVtZW50KCk7YSYmKGEuJC5mb2N1cygpLGEuJC5zZWxlY3QoKSl9LDApfSxhY2Nlc3NLZXlVcDpmdW5jdGlvbigpe3RoaXMuc2VsZWN0KCl9LHNldFZhbHVlOmZ1bmN0aW9uKGIpe2lmKHRoaXMuYmlkaSl7dmFyIGE9YiYmYi5jaGFyQXQoMCk7KGE9XCLigKpcIj09YT9cImx0clwiOlwi4oCrXCI9PWE/XCJydGxcIjpudWxsKSYmKGI9Yi5zbGljZSgxKSk7dGhpcy5zZXREaXJlY3Rpb25NYXJrZXIoYSl9Ynx8KGI9XCJcIik7cmV0dXJuIENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQucHJvdG90eXBlLnNldFZhbHVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sXG5nZXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPUNLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQucHJvdG90eXBlLmdldFZhbHVlLmNhbGwodGhpcyk7aWYodGhpcy5iaWRpJiZiKXt2YXIgYT10aGlzLmdldERpcmVjdGlvbk1hcmtlcigpO2EmJihiPShcImx0clwiPT1hP1wi4oCqXCI6XCLigKtcIikrYil9cmV0dXJuIGJ9LHNldERpcmVjdGlvbk1hcmtlcjpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldElucHV0RWxlbWVudCgpO2I/YS5zZXRBdHRyaWJ1dGVzKHtkaXI6YixcImRhdGEtY2tlLWRpci1tYXJrZXJcIjpifSk6dGhpcy5nZXREaXJlY3Rpb25NYXJrZXIoKSYmYS5yZW1vdmVBdHRyaWJ1dGVzKFtcImRpclwiLFwiZGF0YS1ja2UtZGlyLW1hcmtlclwiXSl9LGdldERpcmVjdGlvbk1hcmtlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLmRhdGEoXCJja2UtZGlyLW1hcmtlclwiKX0sa2V5Ym9hcmRGb2N1c2FibGU6ITB9LHEsITApO0NLRURJVE9SLnVpLmRpYWxvZy50ZXh0YXJlYS5wcm90b3R5cGU9XG5uZXcgQ0tFRElUT1IudWkuZGlhbG9nLnRleHRJbnB1dDtDS0VESVRPUi51aS5kaWFsb2cuc2VsZWN0LnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLnVpLmRpYWxvZy5sYWJlbGVkRWxlbWVudCx7Z2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5zZWxlY3QuZ2V0RWxlbWVudCgpfSxhZGQ6ZnVuY3Rpb24oYixhLGQpe3ZhciBmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcIm9wdGlvblwiLHRoaXMuZ2V0RGlhbG9nKCkuZ2V0UGFyZW50RWRpdG9yKCkuZG9jdW1lbnQpLGM9dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kO2YuJC50ZXh0PWI7Zi4kLnZhbHVlPXZvaWQgMD09PWF8fG51bGw9PT1hP2I6YTt2b2lkIDA9PT1kfHxudWxsPT09ZD9DS0VESVRPUi5lbnYuaWU/Yy5hZGQoZi4kKTpjLmFkZChmLiQsbnVsbCk6Yy5hZGQoZi4kLGQpO3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oYil7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kLnJlbW92ZShiKTtcbnJldHVybiB0aGlzfSxjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgYj10aGlzLmdldElucHV0RWxlbWVudCgpLiQ7MDxiLmxlbmd0aDspYi5yZW1vdmUoMCk7cmV0dXJuIHRoaXN9LGtleWJvYXJkRm9jdXNhYmxlOiEwfSxxLCEwKTtDS0VESVRPUi51aS5kaWFsb2cuY2hlY2tib3gucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7Z2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5jaGVja2JveC5nZXRFbGVtZW50KCl9LHNldFZhbHVlOmZ1bmN0aW9uKGIsYSl7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kLmNoZWNrZWQ9YjshYSYmdGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOmJ9KX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kLmNoZWNrZWR9LGFjY2Vzc0tleVVwOmZ1bmN0aW9uKCl7dGhpcy5zZXRWYWx1ZSghdGhpcy5nZXRWYWx1ZSgpKX0sZXZlbnRQcm9jZXNzb3JzOntvbkNoYW5nZTpmdW5jdGlvbihiLFxuYSl7aWYoIUNLRURJVE9SLmVudi5pZXx8ODxDS0VESVRPUi5lbnYudmVyc2lvbilyZXR1cm4gci5vbkNoYW5nZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yi5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5jaGVja2JveC5nZXRFbGVtZW50KCk7YS5vbihcInByb3BlcnR5Y2hhbmdlXCIsZnVuY3Rpb24oYil7Yj1iLmRhdGEuJDtcImNoZWNrZWRcIj09Yi5wcm9wZXJ0eU5hbWUmJnRoaXMuZmlyZShcImNoYW5nZVwiLHt2YWx1ZTphLiQuY2hlY2tlZH0pfSx0aGlzKX0sdGhpcyk7dGhpcy5vbihcImNoYW5nZVwiLGEpO3JldHVybiBudWxsfX0sa2V5Ym9hcmRGb2N1c2FibGU6ITB9LHEsITApO0NLRURJVE9SLnVpLmRpYWxvZy5yYWRpby5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LHtzZXRWYWx1ZTpmdW5jdGlvbihiLGEpe2Zvcih2YXIgZD10aGlzLl8uY2hpbGRyZW4sZixjPTA7YzxkLmxlbmd0aCYmKGY9ZFtjXSk7YysrKWYuZ2V0RWxlbWVudCgpLiQuY2hlY2tlZD1cbmYuZ2V0VmFsdWUoKT09YjshYSYmdGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOmJ9KX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5fLmNoaWxkcmVuLGE9MDthPGIubGVuZ3RoO2ErKylpZihiW2FdLmdldEVsZW1lbnQoKS4kLmNoZWNrZWQpcmV0dXJuIGJbYV0uZ2V0VmFsdWUoKTtyZXR1cm4gbnVsbH0sYWNjZXNzS2V5VXA6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLl8uY2hpbGRyZW4sYTtmb3IoYT0wO2E8Yi5sZW5ndGg7YSsrKWlmKGJbYV0uZ2V0RWxlbWVudCgpLiQuY2hlY2tlZCl7YlthXS5nZXRFbGVtZW50KCkuZm9jdXMoKTtyZXR1cm59YlswXS5nZXRFbGVtZW50KCkuZm9jdXMoKX0sZXZlbnRQcm9jZXNzb3JzOntvbkNoYW5nZTpmdW5jdGlvbihiLGEpe2lmKCFDS0VESVRPUi5lbnYuaWV8fDg8Q0tFRElUT1IuZW52LnZlcnNpb24pcmV0dXJuIHIub25DaGFuZ2UuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGE9XG50aGlzLl8uY2hpbGRyZW4sYj10aGlzLGM9MDtjPGEubGVuZ3RoO2MrKylhW2NdLmdldEVsZW1lbnQoKS5vbihcInByb3BlcnR5Y2hhbmdlXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGEuJDtcImNoZWNrZWRcIj09YS5wcm9wZXJ0eU5hbWUmJnRoaXMuJC5jaGVja2VkJiZiLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX0pfSl9LHRoaXMpO3RoaXMub24oXCJjaGFuZ2VcIixhKTtyZXR1cm4gbnVsbH19fSxxLCEwKTtDS0VESVRPUi51aS5kaWFsb2cuZmlsZS5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQscSx7Z2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uZnJhbWVJZCkuZ2V0RnJhbWVEb2N1bWVudCgpO3JldHVybiAwPGIuJC5mb3Jtcy5sZW5ndGg/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGIuJC5mb3Jtc1swXS5lbGVtZW50c1swXSk6XG50aGlzLmdldEVsZW1lbnQoKX0sc3VibWl0OmZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5nZXRQYXJlbnQoKS4kLnN1Ym1pdCgpO3JldHVybiB0aGlzfSxnZXRBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5nZXRQYXJlbnQoKS4kLmFjdGlvbn0scmVnaXN0ZXJFdmVudHM6ZnVuY3Rpb24oYil7dmFyIGE9L15vbihbQS1aXVxcdyspLyxkLGY9ZnVuY3Rpb24oYSxiLGMsZCl7YS5vbihcImZvcm1Mb2FkZWRcIixmdW5jdGlvbigpe2EuZ2V0SW5wdXRFbGVtZW50KCkub24oYyxkLGEpfSl9LGM7Zm9yKGMgaW4gYilpZihkPWMubWF0Y2goYSkpdGhpcy5ldmVudFByb2Nlc3NvcnNbY10/dGhpcy5ldmVudFByb2Nlc3NvcnNbY10uY2FsbCh0aGlzLHRoaXMuXy5kaWFsb2csYltjXSk6Zih0aGlzLHRoaXMuXy5kaWFsb2csZFsxXS50b0xvd2VyQ2FzZSgpLGJbY10pO3JldHVybiB0aGlzfSxyZXNldDpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoKXtkLiQub3BlbigpO1xudmFyIGI9XCJcIjtmLnNpemUmJihiPWYuc2l6ZS0oQ0tFRElUT1IuZW52LmllPzc6MCkpO3ZhciBoPWEuZnJhbWVJZCtcIl9pbnB1dFwiO2QuJC53cml0ZShbJ1xceDNjaHRtbCBkaXJcXHgzZFwiJytnKydcIiBsYW5nXFx4M2RcIicraysnXCJcXHgzZVxceDNjaGVhZFxceDNlXFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVxceDNjL2hlYWRcXHgzZVxceDNjYm9keSBzdHlsZVxceDNkXCJtYXJnaW46IDA7IG92ZXJmbG93OiBoaWRkZW47IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1wiXFx4M2UnLCdcXHgzY2Zvcm0gZW5jdHlwZVxceDNkXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIgbWV0aG9kXFx4M2RcIlBPU1RcIiBkaXJcXHgzZFwiJytnKydcIiBsYW5nXFx4M2RcIicraysnXCIgYWN0aW9uXFx4M2RcIicsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShmLmFjdGlvbiksJ1wiXFx4M2VcXHgzY2xhYmVsIGlkXFx4M2RcIicsYS5sYWJlbElkLCdcIiBmb3JcXHgzZFwiJyxoLCdcIiBzdHlsZVxceDNkXCJkaXNwbGF5Om5vbmVcIlxceDNlJyxDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGYubGFiZWwpLFxuJ1xceDNjL2xhYmVsXFx4M2VcXHgzY2lucHV0IHN0eWxlXFx4M2RcIndpZHRoOjEwMCVcIiBpZFxceDNkXCInLGgsJ1wiIGFyaWEtbGFiZWxsZWRieVxceDNkXCInLGEubGFiZWxJZCwnXCIgdHlwZVxceDNkXCJmaWxlXCIgbmFtZVxceDNkXCInLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZi5pZHx8XCJja2VfdXBsb2FkXCIpLCdcIiBzaXplXFx4M2RcIicsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZSgwPGI/YjpcIlwiKSwnXCIgL1xceDNlXFx4M2MvZm9ybVxceDNlXFx4M2MvYm9keVxceDNlXFx4M2MvaHRtbFxceDNlXFx4M2NzY3JpcHRcXHgzZScsQ0tFRElUT1IuZW52LmllP1wiKFwiK0NLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtcIjpcIlwiLFwid2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oXCIrZStcIik7XCIsXCJ3aW5kb3cub25iZWZvcmV1bmxvYWQgXFx4M2QgZnVuY3Rpb24oKSB7d2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oXCIrbStcIil9XCIsXCJcXHgzYy9zY3JpcHRcXHgzZVwiXS5qb2luKFwiXCIpKTtcbmQuJC5jbG9zZSgpO2ZvcihiPTA7YjxjLmxlbmd0aDtiKyspY1tiXS5lbmFibGUoKX12YXIgYT10aGlzLl8sZD1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGEuZnJhbWVJZCkuZ2V0RnJhbWVEb2N1bWVudCgpLGY9YS5kZWZpbml0aW9uLGM9YS5idXR0b25zLGU9dGhpcy5mb3JtTG9hZGVkTnVtYmVyLG09dGhpcy5mb3JtVW5sb2FkTnVtYmVyLGc9YS5kaWFsb2cuXy5lZGl0b3IubGFuZy5kaXIsaz1hLmRpYWxvZy5fLmVkaXRvci5sYW5nQ29kZTtlfHwoZT10aGlzLmZvcm1Mb2FkZWROdW1iZXI9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJmb3JtTG9hZGVkXCIpfSx0aGlzKSxtPXRoaXMuZm9ybVVubG9hZE51bWJlcj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbigpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuY2xlYXJDdXN0b21EYXRhKCl9LHRoaXMpLHRoaXMuZ2V0RGlhbG9nKCkuXy5lZGl0b3Iub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtDS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihlKTtcbkNLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKG0pfSkpO0NLRURJVE9SLmVudi5nZWNrbz9zZXRUaW1lb3V0KGIsNTAwKTpiKCl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJC52YWx1ZXx8XCJcIn0sc2V0SW5pdFZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fLmluaXRWYWx1ZT1cIlwifSxldmVudFByb2Nlc3NvcnM6e29uQ2hhbmdlOmZ1bmN0aW9uKGIsYSl7dGhpcy5fLmRvbU9uQ2hhbmdlUmVnaXN0ZXJlZHx8KHRoaXMub24oXCJmb3JtTG9hZGVkXCIsZnVuY3Rpb24oKXt0aGlzLmdldElucHV0RWxlbWVudCgpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy5nZXRWYWx1ZSgpfSl9LHRoaXMpfSx0aGlzKSx0aGlzLl8uZG9tT25DaGFuZ2VSZWdpc3RlcmVkPSEwKTt0aGlzLm9uKFwiY2hhbmdlXCIsYSl9fSxrZXlib2FyZEZvY3VzYWJsZTohMH0sITApO0NLRURJVE9SLnVpLmRpYWxvZy5maWxlQnV0dG9uLnByb3RvdHlwZT1cbm5ldyBDS0VESVRPUi51aS5kaWFsb2cuYnV0dG9uO0NLRURJVE9SLnVpLmRpYWxvZy5maWVsZHNldC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuY2xvbmUoQ0tFRElUT1IudWkuZGlhbG9nLmhib3gucHJvdG90eXBlKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwidGV4dFwiLHYpO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJwYXNzd29yZFwiLHYpO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJjaGVja2JveFwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJyYWRpb1wiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJidXR0b25cIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwic2VsZWN0XCIsbik7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcImZpbGVcIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwiZmlsZUJ1dHRvblwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJodG1sXCIsXG5uKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwiZmllbGRzZXRcIix7YnVpbGQ6ZnVuY3Rpb24oYixhLGQpe2Zvcih2YXIgZj1hLmNoaWxkcmVuLGMsZT1bXSxoPVtdLGc9MDtnPGYubGVuZ3RoJiYoYz1mW2ddKTtnKyspe3ZhciBrPVtdO2UucHVzaChrKTtoLnB1c2goQ0tFRElUT1IuZGlhbG9nLl8udWlFbGVtZW50QnVpbGRlcnNbYy50eXBlXS5idWlsZChiLGMsaykpfXJldHVybiBuZXcgQ0tFRElUT1IudWkuZGlhbG9nW2EudHlwZV0oYixoLGUsZCxhKX19KX19KTtDS0VESVRPUi5ESUFMT0dfUkVTSVpFX05PTkU9MDtDS0VESVRPUi5ESUFMT0dfUkVTSVpFX1dJRFRIPTE7Q0tFRElUT1IuRElBTE9HX1JFU0laRV9IRUlHSFQ9MjtDS0VESVRPUi5ESUFMT0dfUkVTSVpFX0JPVEg9MztDS0VESVRPUi5ESUFMT0dfU1RBVEVfSURMRT0xO0NLRURJVE9SLkRJQUxPR19TVEFURV9CVVNZPTI7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiB4KCl7Zm9yKHZhciBhPXRoaXMuXy50YWJJZExpc3QubGVuZ3RoLGI9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih0aGlzLl8udGFiSWRMaXN0LHRoaXMuXy5jdXJyZW50VGFiSWQpK2EsYz1iLTE7Yz5iLWE7Yy0tKWlmKHRoaXMuXy50YWJzW3RoaXMuXy50YWJJZExpc3RbYyVhXV1bMF0uJC5vZmZzZXRIZWlnaHQpcmV0dXJuIHRoaXMuXy50YWJJZExpc3RbYyVhXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBBKCl7Zm9yKHZhciBhPXRoaXMuXy50YWJJZExpc3QubGVuZ3RoLGI9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih0aGlzLl8udGFiSWRMaXN0LHRoaXMuXy5jdXJyZW50VGFiSWQpLGM9YisxO2M8YithO2MrKylpZih0aGlzLl8udGFic1t0aGlzLl8udGFiSWRMaXN0W2MlYV1dWzBdLiQub2Zmc2V0SGVpZ2h0KXJldHVybiB0aGlzLl8udGFiSWRMaXN0W2MlYV07cmV0dXJuIG51bGx9ZnVuY3Rpb24gSyhhLGIpe2Zvcih2YXIgYz1hLiQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKSxcbmQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChjW2RdKTtcInRleHRcIj09Zi5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLnRvTG93ZXJDYXNlKCkmJihiPyhmLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsZi5nZXRDdXN0b21EYXRhKFwiZmFrZV92YWx1ZVwiKXx8XCJcIiksZi5yZW1vdmVDdXN0b21EYXRhKFwiZmFrZV92YWx1ZVwiKSk6KGYuc2V0Q3VzdG9tRGF0YShcImZha2VfdmFsdWVcIixmLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKSxmLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIikpKX19ZnVuY3Rpb24gVChhLGIpe3ZhciBjPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCk7YyYmKGE/Yy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWludmFsaWRcIik6Yy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWludmFsaWRcIiwhMCkpO2F8fCh0aGlzLnNlbGVjdD90aGlzLnNlbGVjdCgpOnRoaXMuZm9jdXMoKSk7YiYmYWxlcnQoYik7dGhpcy5maXJlKFwidmFsaWRhdGVkXCIse3ZhbGlkOmEsbXNnOmJ9KX1cbmZ1bmN0aW9uIFUoKXt2YXIgYT10aGlzLmdldElucHV0RWxlbWVudCgpO2EmJmEucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1pbnZhbGlkXCIpfWZ1bmN0aW9uIFYoYSl7dmFyIGI9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoQ0tFRElUT1IuYWRkVGVtcGxhdGUoXCJkaWFsb2dcIixXKS5vdXRwdXQoe2lkOkNLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKSxlZGl0b3JJZDphLmlkLGxhbmdEaXI6YS5sYW5nLmRpcixsYW5nQ29kZTphLmxhbmdDb2RlLGVkaXRvckRpYWxvZ0NsYXNzOlwiY2tlX2VkaXRvcl9cIithLm5hbWUucmVwbGFjZSgvXFwuL2csXCJcXFxcLlwiKStcIl9kaWFsb2dcIixjbG9zZVRpdGxlOmEubGFuZy5jb21tb24uY2xvc2UsaGlkcGk6Q0tFRElUT1IuZW52LmhpZHBpP1wiY2tlX2hpZHBpXCI6XCJcIn0pKSxjPWIuZ2V0Q2hpbGQoWzAsMCwwLDAsMF0pLGQ9Yy5nZXRDaGlsZCgwKSxlPWMuZ2V0Q2hpbGQoMSk7YS5wbHVnaW5zLmNsaXBib2FyZCYmQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQucHJldmVudERlZmF1bHREcm9wT25FbGVtZW50KGMpO1xuIUNLRURJVE9SLmVudi5pZXx8Q0tFRElUT1IuZW52LnF1aXJrc3x8Q0tFRElUT1IuZW52LmVkZ2V8fChhPVwiamF2YXNjcmlwdDp2b2lkKGZ1bmN0aW9uKCl7XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KCkpXCIsQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjaWZyYW1lIGZyYW1lQm9yZGVyXFx4M2RcIjBcIiBjbGFzc1xceDNkXCJja2VfaWZyYW1lX3NoaW1cIiBzcmNcXHgzZFwiJythKydcIiB0YWJJbmRleFxceDNkXCItMVwiXFx4M2VcXHgzYy9pZnJhbWVcXHgzZScpLmFwcGVuZFRvKGMuZ2V0UGFyZW50KCkpKTtkLnVuc2VsZWN0YWJsZSgpO2UudW5zZWxlY3RhYmxlKCk7cmV0dXJue2VsZW1lbnQ6YixwYXJ0czp7ZGlhbG9nOmIuZ2V0Q2hpbGQoMCksdGl0bGU6ZCxjbG9zZTplLHRhYnM6Yy5nZXRDaGlsZCgyKSxjb250ZW50czpjLmdldENoaWxkKFszLDAsMCwwXSksXG5mb290ZXI6Yy5nZXRDaGlsZChbMywwLDEsMF0pfX19ZnVuY3Rpb24gTChhLGIsYyl7dGhpcy5lbGVtZW50PWI7dGhpcy5mb2N1c0luZGV4PWM7dGhpcy50YWJJbmRleD0wO3RoaXMuaXNGb2N1c2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4hYi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSYmYi5pc1Zpc2libGUoKX07dGhpcy5mb2N1cz1mdW5jdGlvbigpe2EuXy5jdXJyZW50Rm9jdXNJbmRleD10aGlzLmZvY3VzSW5kZXg7dGhpcy5lbGVtZW50LmZvY3VzKCl9O2Iub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldEtleXN0cm9rZSgpaW57MzI6MSwxMzoxfSYmdGhpcy5maXJlKFwiY2xpY2tcIil9KTtiLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe3RoaXMuZmlyZShcIm1vdXNlb3ZlclwiKX0pO2Iub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJtb3VzZW91dFwiKX0pfWZ1bmN0aW9uIFgoYSl7ZnVuY3Rpb24gYigpe2EubGF5b3V0KCl9dmFyIGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCk7XG5jLm9uKFwicmVzaXplXCIsYik7YS5vbihcImhpZGVcIixmdW5jdGlvbigpe2MucmVtb3ZlTGlzdGVuZXIoXCJyZXNpemVcIixiKX0pfWZ1bmN0aW9uIE0oYSxiKXt0aGlzLl89e2RpYWxvZzphfTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxiKX1mdW5jdGlvbiBZKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YS5nZXRTaXplKCksaz1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRWaWV3UGFuZVNpemUoKSxxPWIuZGF0YS4kLnNjcmVlblgsbj1iLmRhdGEuJC5zY3JlZW5ZLHI9cS1kLngsbD1uLWQueTtkPXt4OnEseTpufTtlLngrPXI7ZS55Kz1sO2EubW92ZShlLngraFszXTxnPy1oWzNdOmUueC1oWzFdPmsud2lkdGgtYy53aWR0aC1nP2sud2lkdGgtYy53aWR0aCsoXCJydGxcIj09Zi5sYW5nLmRpcj8wOmhbMV0pOmUueCxlLnkraFswXTxnPy1oWzBdOmUueS1oWzJdPmsuaGVpZ2h0LWMuaGVpZ2h0LWc/ay5oZWlnaHQtYy5oZWlnaHQraFsyXTplLnksMSk7Yi5kYXRhLnByZXZlbnREZWZhdWx0KCl9XG5mdW5jdGlvbiBjKCl7Q0tFRElUT1IuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIixiKTtDS0VESVRPUi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTtpZihDS0VESVRPUi5lbnYuaWU2Q29tcGF0KXt2YXIgYT11LmdldENoaWxkKDApLmdldEZyYW1lRG9jdW1lbnQoKTthLnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsYik7YS5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKX19dmFyIGQ9bnVsbCxlPW51bGwsZj1hLmdldFBhcmVudEVkaXRvcigpLGc9Zi5jb25maWcuZGlhbG9nX21hZ25ldERpc3RhbmNlLGg9Q0tFRElUT1Iuc2tpbi5tYXJnaW5zfHxbMCwwLDAsMF07XCJ1bmRlZmluZWRcIj09dHlwZW9mIGcmJihnPTIwKTthLnBhcnRzLnRpdGxlLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oZyl7ZD17eDpnLmRhdGEuJC5zY3JlZW5YLHk6Zy5kYXRhLiQuc2NyZWVuWX07Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZW1vdmVcIixiKTtDS0VESVRPUi5kb2N1bWVudC5vbihcIm1vdXNldXBcIixcbmMpO2U9YS5nZXRQb3NpdGlvbigpO2lmKENLRURJVE9SLmVudi5pZTZDb21wYXQpe3ZhciBmPXUuZ2V0Q2hpbGQoMCkuZ2V0RnJhbWVEb2N1bWVudCgpO2Yub24oXCJtb3VzZW1vdmVcIixiKTtmLm9uKFwibW91c2V1cFwiLGMpfWcuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSxhKX1mdW5jdGlvbiBaKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9XCJydGxcIj09Zi5sYW5nLmRpcixuPWsud2lkdGgscT1rLmhlaWdodCxHPW4rKGIuZGF0YS4kLnNjcmVlblgtbS54KSooYz8tMToxKSooYS5fLm1vdmVkPzE6MiksSD1xKyhiLmRhdGEuJC5zY3JlZW5ZLW0ueSkqKGEuXy5tb3ZlZD8xOjIpLEI9YS5fLmVsZW1lbnQuZ2V0Rmlyc3QoKSxCPWMmJkIuZ2V0Q29tcHV0ZWRTdHlsZShcInJpZ2h0XCIpLEM9YS5nZXRQb3NpdGlvbigpO0MueStIPnAuaGVpZ2h0JiYoSD1wLmhlaWdodC1DLnkpOyhjP0I6Qy54KStHPnAud2lkdGgmJihHPXAud2lkdGgtKGM/QjpDLngpKTtpZihlPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX1dJRFRIfHxcbmU9PUNLRURJVE9SLkRJQUxPR19SRVNJWkVfQk9USCluPU1hdGgubWF4KGQubWluV2lkdGh8fDAsRy1nKTtpZihlPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX0hFSUdIVHx8ZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9CT1RIKXE9TWF0aC5tYXgoZC5taW5IZWlnaHR8fDAsSC1oKTthLnJlc2l6ZShuLHEpO2EuXy5tb3ZlZHx8YS5sYXlvdXQoKTtiLmRhdGEucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBjKCl7Q0tFRElUT1IuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7Q0tFRElUT1IuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIixiKTtxJiYocS5yZW1vdmUoKSxxPW51bGwpO2lmKENLRURJVE9SLmVudi5pZTZDb21wYXQpe3ZhciBhPXUuZ2V0Q2hpbGQoMCkuZ2V0RnJhbWVEb2N1bWVudCgpO2EucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7YS5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGIpfX12YXIgZD1hLmRlZmluaXRpb24sZT1kLnJlc2l6YWJsZTtcbmlmKGUhPUNLRURJVE9SLkRJQUxPR19SRVNJWkVfTk9ORSl7dmFyIGY9YS5nZXRQYXJlbnRFZGl0b3IoKSxnLGgscCxtLGsscSxuPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGUpe2s9YS5nZXRTaXplKCk7dmFyIGQ9YS5wYXJ0cy5jb250ZW50cztkLiQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpZnJhbWVcIikubGVuZ3RoJiYocT1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19yZXNpemVfY292ZXJcIiBzdHlsZVxceDNkXCJoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7XCJcXHgzZVxceDNjL2RpdlxceDNlJyksZC5hcHBlbmQocSkpO2g9ay5oZWlnaHQtYS5wYXJ0cy5jb250ZW50cy5nZXRTaXplKFwiaGVpZ2h0XCIsIShDS0VESVRPUi5lbnYuZ2Vja298fENLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcykpO2c9ay53aWR0aC1hLnBhcnRzLmNvbnRlbnRzLmdldFNpemUoXCJ3aWR0aFwiLFxuMSk7bT17eDplLnNjcmVlblgseTplLnNjcmVlbll9O3A9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCk7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZW1vdmVcIixiKTtDS0VESVRPUi5kb2N1bWVudC5vbihcIm1vdXNldXBcIixjKTtDS0VESVRPUi5lbnYuaWU2Q29tcGF0JiYoZD11LmdldENoaWxkKDApLmdldEZyYW1lRG9jdW1lbnQoKSxkLm9uKFwibW91c2Vtb3ZlXCIsYiksZC5vbihcIm1vdXNldXBcIixjKSk7ZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSk7YS5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBiPVwiXCI7ZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9XSURUSD9iPVwiIGNrZV9yZXNpemVyX2hvcml6b250YWxcIjplPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX0hFSUdIVCYmKGI9XCIgY2tlX3Jlc2l6ZXJfdmVydGljYWxcIik7Yj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX3Jlc2l6ZXInK1xuYitcIiBja2VfcmVzaXplcl9cIitmLmxhbmcuZGlyKydcIiB0aXRsZVxceDNkXCInK0NLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZi5sYW5nLmNvbW1vbi5yZXNpemUpKydcIiBvbm1vdXNlZG93blxceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJytuKycsIGV2ZW50IClcIlxceDNlJysoXCJsdHJcIj09Zi5sYW5nLmRpcj9cIuKXolwiOlwi4pejXCIpK1wiXFx4M2MvZGl2XFx4M2VcIik7YS5wYXJ0cy5mb290ZXIuYXBwZW5kKGIsMSl9KTtmLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24obil9KX19ZnVuY3Rpb24gSShhKXthLmRhdGEucHJldmVudERlZmF1bHQoMSl9ZnVuY3Rpb24gTihhKXt2YXIgYj1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKSxjPWEuY29uZmlnLGQ9Yy5kaWFsb2dfYmFja2dyb3VuZENvdmVyQ29sb3J8fFwid2hpdGVcIixlPWMuZGlhbG9nX2JhY2tncm91bmRDb3Zlck9wYWNpdHksZj1jLmJhc2VGbG9hdFpJbmRleCxjPUNLRURJVE9SLnRvb2xzLmdlbktleShkLFxuZSxmKSxnPXpbY107Zz9nLnNob3coKTooZj1bJ1xceDNjZGl2IHRhYkluZGV4XFx4M2RcIi0xXCIgc3R5bGVcXHgzZFwicG9zaXRpb246ICcsQ0tFRElUT1IuZW52LmllNkNvbXBhdD9cImFic29sdXRlXCI6XCJmaXhlZFwiLFwiOyB6LWluZGV4OiBcIixmLFwiOyB0b3A6IDBweDsgbGVmdDogMHB4OyBcIixDS0VESVRPUi5lbnYuaWU2Q29tcGF0P1wiXCI6XCJiYWNrZ3JvdW5kLWNvbG9yOiBcIitkLCdcIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX2JhY2tncm91bmRfY292ZXJcIlxceDNlJ10sQ0tFRElUT1IuZW52LmllNkNvbXBhdCYmKGQ9XCJcXHgzY2h0bWxcXHgzZVxceDNjYm9keSBzdHlsZVxceDNkXFxcXCdiYWNrZ3JvdW5kLWNvbG9yOlwiK2QrXCI7XFxcXCdcXHgzZVxceDNjL2JvZHlcXHgzZVxceDNjL2h0bWxcXHgzZVwiLGYucHVzaCgnXFx4M2NpZnJhbWUgaGlkZWZvY3VzXFx4M2RcInRydWVcIiBmcmFtZWJvcmRlclxceDNkXCIwXCIgaWRcXHgzZFwiY2tlX2RpYWxvZ19iYWNrZ3JvdW5kX2lmcmFtZVwiIHNyY1xceDNkXCJqYXZhc2NyaXB0OicpLGYucHVzaChcInZvaWQoKGZ1bmN0aW9uKCl7XCIrXG5lbmNvZGVVUklDb21wb25lbnQoXCJkb2N1bWVudC5vcGVuKCk7KFwiK0NLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtkb2N1bWVudC53cml0ZSggJ1wiK2QrXCInICk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KSgpKVwiKSxmLnB1c2goJ1wiIHN0eWxlXFx4M2RcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDogMTAwJTtmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5XFx4M2QwKVwiXFx4M2VcXHgzYy9pZnJhbWVcXHgzZScpKSxmLnB1c2goXCJcXHgzYy9kaXZcXHgzZVwiKSxnPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGYuam9pbihcIlwiKSksZy5zZXRPcGFjaXR5KHZvaWQgMCE9PWU/ZTouNSksZy5vbihcImtleWRvd25cIixJKSxnLm9uKFwia2V5cHJlc3NcIixJKSxnLm9uKFwia2V5dXBcIixJKSxnLmFwcGVuZFRvKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSkseltjXT1nKTthLmZvY3VzTWFuYWdlci5hZGQoZyk7XG51PWc7YT1mdW5jdGlvbigpe3ZhciBhPWIuZ2V0Vmlld1BhbmVTaXplKCk7Zy5zZXRTdHlsZXMoe3dpZHRoOmEud2lkdGgrXCJweFwiLGhlaWdodDphLmhlaWdodCtcInB4XCJ9KX07dmFyIGg9ZnVuY3Rpb24oKXt2YXIgYT1iLmdldFNjcm9sbFBvc2l0aW9uKCksYz1DS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wO2cuc2V0U3R5bGVzKHtsZWZ0OmEueCtcInB4XCIsdG9wOmEueStcInB4XCJ9KTtpZihjKXtkbyBhPWMuZ2V0UG9zaXRpb24oKSxjLm1vdmUoYS54LGEueSk7d2hpbGUoYz1jLl8ucGFyZW50RGlhbG9nKX19O0o9YTtiLm9uKFwicmVzaXplXCIsYSk7YSgpO0NLRURJVE9SLmVudi5tYWMmJkNLRURJVE9SLmVudi53ZWJraXR8fGcuZm9jdXMoKTtpZihDS0VESVRPUi5lbnYuaWU2Q29tcGF0KXt2YXIgcD1mdW5jdGlvbigpe2goKTthcmd1bWVudHMuY2FsbGVlLnByZXZTY3JvbGxIYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yi4kLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtwLnByZXZTY3JvbGxIYW5kbGVyPVxud2luZG93Lm9uc2Nyb2xsfHxmdW5jdGlvbigpe307d2luZG93Lm9uc2Nyb2xsPXB9LDApO2goKX19ZnVuY3Rpb24gTyhhKXt1JiYoYS5mb2N1c01hbmFnZXIucmVtb3ZlKHUpLGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCksdS5oaWRlKCksYS5yZW1vdmVMaXN0ZW5lcihcInJlc2l6ZVwiLEopLENLRURJVE9SLmVudi5pZTZDb21wYXQmJmEuJC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7d2luZG93Lm9uc2Nyb2xsPXdpbmRvdy5vbnNjcm9sbCYmd2luZG93Lm9uc2Nyb2xsLnByZXZTY3JvbGxIYW5kbGVyfHxudWxsfSwwKSxKPW51bGwpfXZhciB2PUNLRURJVE9SLnRvb2xzLmNzc0xlbmd0aCxXPSdcXHgzY2RpdiBjbGFzc1xceDNkXCJja2VfcmVzZXRfYWxsIHtlZGl0b3JJZH0ge2VkaXRvckRpYWxvZ0NsYXNzfSB7aGlkcGl9XCIgZGlyXFx4M2RcIntsYW5nRGlyfVwiIGxhbmdcXHgzZFwie2xhbmdDb2RlfVwiIHJvbGVcXHgzZFwiZGlhbG9nXCIgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcImNrZV9kaWFsb2dfdGl0bGVfe2lkfVwiXFx4M2VcXHgzY3RhYmxlIGNsYXNzXFx4M2RcImNrZV9kaWFsb2cgJytcbkNLRURJVE9SLmVudi5jc3NDbGFzcysnIGNrZV97bGFuZ0Rpcn1cIiBzdHlsZVxceDNkXCJwb3NpdGlvbjphYnNvbHV0ZVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjdHJcXHgzZVxceDNjdGQgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19ib2R5XCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2NkaXYgaWRcXHgzZFwiY2tlX2RpYWxvZ190aXRsZV97aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ190aXRsZVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjL2RpdlxceDNlXFx4M2NhIGlkXFx4M2RcImNrZV9kaWFsb2dfY2xvc2VfYnV0dG9uX3tpZH1cIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX2Nsb3NlX2J1dHRvblwiIGhyZWZcXHgzZFwiamF2YXNjcmlwdDp2b2lkKDApXCIgdGl0bGVcXHgzZFwie2Nsb3NlVGl0bGV9XCIgcm9sZVxceDNkXCJidXR0b25cIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9sYWJlbFwiXFx4M2VYXFx4M2Mvc3BhblxceDNlXFx4M2MvYVxceDNlXFx4M2NkaXYgaWRcXHgzZFwiY2tlX2RpYWxvZ190YWJzX3tpZH1cIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3RhYnNcIiByb2xlXFx4M2RcInRhYmxpc3RcIlxceDNlXFx4M2MvZGl2XFx4M2VcXHgzY3RhYmxlIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfY29udGVudHNcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzY3RyXFx4M2VcXHgzY3RkIGlkXFx4M2RcImNrZV9kaWFsb2dfY29udGVudHNfe2lkfVwiIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfY29udGVudHNfYm9keVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXFx4M2N0clxceDNlXFx4M2N0ZCBpZFxceDNkXCJja2VfZGlhbG9nX2Zvb3Rlcl97aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19mb290ZXJcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzYy90ZFxceDNlXFx4M2MvdHJcXHgzZVxceDNjL3RhYmxlXFx4M2VcXHgzYy9kaXZcXHgzZVxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXFx4M2MvdGFibGVcXHgzZVxceDNjL2RpdlxceDNlJztcbkNLRURJVE9SLmRpYWxvZz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt2YXIgYT1sLl8uZm9jdXNMaXN0O2Euc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnRhYkluZGV4IT1iLnRhYkluZGV4P2IudGFiSW5kZXgtYS50YWJJbmRleDphLmZvY3VzSW5kZXgtYi5mb2N1c0luZGV4fSk7Zm9yKHZhciBiPWEubGVuZ3RoLGM9MDtjPGI7YysrKWFbY10uZm9jdXNJbmRleD1jfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bC5fLmZvY3VzTGlzdDthPWF8fDA7aWYoISgxPmIubGVuZ3RoKSl7dmFyIGM9bC5fLmN1cnJlbnRGb2N1c0luZGV4O2wuXy50YWJCYXJNb2RlJiYwPmEmJihjPTApO3RyeXtiW2NdLmdldElucHV0RWxlbWVudCgpLiQuYmx1cigpfWNhdGNoKGUpe312YXIgZD1jLGc9MTxsLl8ucGFnZUNvdW50O2Rve2QrPWE7aWYoZyYmIWwuXy50YWJCYXJNb2RlJiYoZD09Yi5sZW5ndGh8fC0xPT1kKSl7bC5fLnRhYkJhck1vZGU9ITA7bC5fLnRhYnNbbC5fLmN1cnJlbnRUYWJJZF1bMF0uZm9jdXMoKTtcbmwuXy5jdXJyZW50Rm9jdXNJbmRleD0tMTtyZXR1cm59ZD0oZCtiLmxlbmd0aCklYi5sZW5ndGg7aWYoZD09YylicmVha313aGlsZShhJiYhYltkXS5pc0ZvY3VzYWJsZSgpKTtiW2RdLmZvY3VzKCk7XCJ0ZXh0XCI9PWJbZF0udHlwZSYmYltkXS5zZWxlY3QoKX19ZnVuY3Rpb24gZShiKXtpZihsPT1DS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wKXt2YXIgYz1iLmRhdGEuZ2V0S2V5c3Ryb2tlKCksZT1cInJ0bFwiPT1hLmxhbmcuZGlyLGc9WzM3LDM4LDM5LDQwXTtxPW49MDtpZig5PT1jfHxjPT1DS0VESVRPUi5TSElGVCs5KWQoYz09Q0tFRElUT1IuU0hJRlQrOT8tMToxKSxxPTE7ZWxzZSBpZihjPT1DS0VESVRPUi5BTFQrMTIxJiYhbC5fLnRhYkJhck1vZGUmJjE8bC5nZXRQYWdlQ291bnQoKSlsLl8udGFiQmFyTW9kZT0hMCxsLl8udGFic1tsLl8uY3VycmVudFRhYklkXVswXS5mb2N1cygpLGwuXy5jdXJyZW50Rm9jdXNJbmRleD0tMSxxPTE7ZWxzZSBpZigtMSE9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihnLFxuYykmJmwuXy50YWJCYXJNb2RlKWM9LTEhPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoW2U/Mzk6MzcsMzhdLGMpP3guY2FsbChsKTpBLmNhbGwobCksbC5zZWxlY3RQYWdlKGMpLGwuXy50YWJzW2NdWzBdLmZvY3VzKCkscT0xO2Vsc2UgaWYoMTMhPWMmJjMyIT1jfHwhbC5fLnRhYkJhck1vZGUpaWYoMTM9PWMpYz1iLmRhdGEuZ2V0VGFyZ2V0KCksYy5pcyhcImFcIixcImJ1dHRvblwiLFwic2VsZWN0XCIsXCJ0ZXh0YXJlYVwiKXx8Yy5pcyhcImlucHV0XCIpJiZcImJ1dHRvblwiPT1jLiQudHlwZXx8KChjPXRoaXMuZ2V0QnV0dG9uKFwib2tcIikpJiZDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGMuY2xpY2ssMCxjKSxxPTEpLG49MTtlbHNlIGlmKDI3PT1jKShjPXRoaXMuZ2V0QnV0dG9uKFwiY2FuY2VsXCIpKT9DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGMuY2xpY2ssMCxjKTohMSE9PXRoaXMuZmlyZShcImNhbmNlbFwiLHtoaWRlOiEwfSkuaGlkZSYmdGhpcy5oaWRlKCksbj0xO2Vsc2UgcmV0dXJuO2Vsc2UgdGhpcy5zZWxlY3RQYWdlKHRoaXMuXy5jdXJyZW50VGFiSWQpLFxudGhpcy5fLnRhYkJhck1vZGU9ITEsdGhpcy5fLmN1cnJlbnRGb2N1c0luZGV4PS0xLGQoMSkscT0xO2YoYil9fWZ1bmN0aW9uIGYoYSl7cT9hLmRhdGEucHJldmVudERlZmF1bHQoMSk6biYmYS5kYXRhLnN0b3BQcm9wYWdhdGlvbigpfXZhciBnPUNLRURJVE9SLmRpYWxvZy5fLmRpYWxvZ0RlZmluaXRpb25zW2JdLGg9Q0tFRElUT1IudG9vbHMuY2xvbmUoYWEpLHA9YS5jb25maWcuZGlhbG9nX2J1dHRvbnNPcmRlcnx8XCJPU1wiLG09YS5sYW5nLmRpcixrPXt9LHEsbjsoXCJPU1wiPT1wJiZDS0VESVRPUi5lbnYubWFjfHxcInJ0bFwiPT1wJiZcImx0clwiPT1tfHxcImx0clwiPT1wJiZcInJ0bFwiPT1tKSYmaC5idXR0b25zLnJldmVyc2UoKTtnPUNLRURJVE9SLnRvb2xzLmV4dGVuZChnKGEpLGgpO2c9Q0tFRElUT1IudG9vbHMuY2xvbmUoZyk7Zz1uZXcgUCh0aGlzLGcpO2g9VihhKTt0aGlzLl89e2VkaXRvcjphLGVsZW1lbnQ6aC5lbGVtZW50LG5hbWU6Yixjb250ZW50U2l6ZTp7d2lkdGg6MCxoZWlnaHQ6MH0sXG5zaXplOnt3aWR0aDowLGhlaWdodDowfSxjb250ZW50czp7fSxidXR0b25zOnt9LGFjY2Vzc0tleU1hcDp7fSx0YWJzOnt9LHRhYklkTGlzdDpbXSxjdXJyZW50VGFiSWQ6bnVsbCxjdXJyZW50VGFiSW5kZXg6bnVsbCxwYWdlQ291bnQ6MCxsYXN0VGFiOm51bGwsdGFiQmFyTW9kZTohMSxmb2N1c0xpc3Q6W10sY3VycmVudEZvY3VzSW5kZXg6MCxoYXNGb2N1czohMX07dGhpcy5wYXJ0cz1oLnBhcnRzO0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmZpcmUoXCJhcmlhV2lkZ2V0XCIsdGhpcy5wYXJ0cy5jb250ZW50cyl9LDAsdGhpcyk7aD17cG9zaXRpb246Q0tFRElUT1IuZW52LmllNkNvbXBhdD9cImFic29sdXRlXCI6XCJmaXhlZFwiLHRvcDowLHZpc2liaWxpdHk6XCJoaWRkZW5cIn07aFtcInJ0bFwiPT1tP1wicmlnaHRcIjpcImxlZnRcIl09MDt0aGlzLnBhcnRzLmRpYWxvZy5zZXRTdHlsZXMoaCk7Q0tFRElUT1IuZXZlbnQuY2FsbCh0aGlzKTt0aGlzLmRlZmluaXRpb249Zz1DS0VESVRPUi5maXJlKFwiZGlhbG9nRGVmaW5pdGlvblwiLFxue25hbWU6YixkZWZpbml0aW9uOmd9LGEpLmRlZmluaXRpb247aWYoIShcInJlbW92ZURpYWxvZ1RhYnNcImluIGEuXykmJmEuY29uZmlnLnJlbW92ZURpYWxvZ1RhYnMpe2g9YS5jb25maWcucmVtb3ZlRGlhbG9nVGFicy5zcGxpdChcIjtcIik7Zm9yKG09MDttPGgubGVuZ3RoO20rKylpZihwPWhbbV0uc3BsaXQoXCI6XCIpLDI9PXAubGVuZ3RoKXt2YXIgcj1wWzBdO2tbcl18fChrW3JdPVtdKTtrW3JdLnB1c2gocFsxXSl9YS5fLnJlbW92ZURpYWxvZ1RhYnM9a31pZihhLl8ucmVtb3ZlRGlhbG9nVGFicyYmKGs9YS5fLnJlbW92ZURpYWxvZ1RhYnNbYl0pKWZvcihtPTA7bTxrLmxlbmd0aDttKyspZy5yZW1vdmVDb250ZW50cyhrW21dKTtpZihnLm9uTG9hZCl0aGlzLm9uKFwibG9hZFwiLGcub25Mb2FkKTtpZihnLm9uU2hvdyl0aGlzLm9uKFwic2hvd1wiLGcub25TaG93KTtpZihnLm9uSGlkZSl0aGlzLm9uKFwiaGlkZVwiLGcub25IaWRlKTtpZihnLm9uT2spdGhpcy5vbihcIm9rXCIsZnVuY3Rpb24oYil7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO1xuc2V0VGltZW91dChmdW5jdGlvbigpe2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sMCk7ITE9PT1nLm9uT2suY2FsbCh0aGlzLGIpJiYoYi5kYXRhLmhpZGU9ITEpfSk7dGhpcy5zdGF0ZT1DS0VESVRPUi5ESUFMT0dfU1RBVEVfSURMRTtpZihnLm9uQ2FuY2VsKXRoaXMub24oXCJjYW5jZWxcIixmdW5jdGlvbihhKXshMT09PWcub25DYW5jZWwuY2FsbCh0aGlzLGEpJiYoYS5kYXRhLmhpZGU9ITEpfSk7dmFyIGw9dGhpcyx0PWZ1bmN0aW9uKGEpe3ZhciBiPWwuXy5jb250ZW50cyxjPSExLGQ7Zm9yKGQgaW4gYilmb3IodmFyIGUgaW4gYltkXSlpZihjPWEuY2FsbCh0aGlzLGJbZF1bZV0pKXJldHVybn07dGhpcy5vbihcIm9rXCIsZnVuY3Rpb24oYSl7dChmdW5jdGlvbihiKXtpZihiLnZhbGlkYXRlKXt2YXIgYz1iLnZhbGlkYXRlKHRoaXMpLGQ9XCJzdHJpbmdcIj09dHlwZW9mIGN8fCExPT09YztkJiYoYS5kYXRhLmhpZGU9ITEsYS5zdG9wKCkpO1QuY2FsbChiLCFkLFwic3RyaW5nXCI9PXR5cGVvZiBjP1xuYzp2b2lkIDApO3JldHVybiBkfX0pfSx0aGlzLG51bGwsMCk7dGhpcy5vbihcImNhbmNlbFwiLGZ1bmN0aW9uKGIpe3QoZnVuY3Rpb24oYyl7aWYoYy5pc0NoYW5nZWQoKSlyZXR1cm4gYS5jb25maWcuZGlhbG9nX25vQ29uZmlybUNhbmNlbHx8Y29uZmlybShhLmxhbmcuY29tbW9uLmNvbmZpcm1DYW5jZWwpfHwoYi5kYXRhLmhpZGU9ITEpLCEwfSl9LHRoaXMsbnVsbCwwKTt0aGlzLnBhcnRzLmNsb3NlLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXshMSE9PXRoaXMuZmlyZShcImNhbmNlbFwiLHtoaWRlOiEwfSkuaGlkZSYmdGhpcy5oaWRlKCk7YS5kYXRhLnByZXZlbnREZWZhdWx0KCl9LHRoaXMpO3RoaXMuY2hhbmdlRm9jdXM9ZDt2YXIgeT10aGlzLl8uZWxlbWVudDthLmZvY3VzTWFuYWdlci5hZGQoeSwxKTt0aGlzLm9uKFwic2hvd1wiLGZ1bmN0aW9uKCl7eS5vbihcImtleWRvd25cIixlLHRoaXMpO2lmKENLRURJVE9SLmVudi5nZWNrbyl5Lm9uKFwia2V5cHJlc3NcIixmLHRoaXMpfSk7dGhpcy5vbihcImhpZGVcIixcbmZ1bmN0aW9uKCl7eS5yZW1vdmVMaXN0ZW5lcihcImtleWRvd25cIixlKTtDS0VESVRPUi5lbnYuZ2Vja28mJnkucmVtb3ZlTGlzdGVuZXIoXCJrZXlwcmVzc1wiLGYpO3QoZnVuY3Rpb24oYSl7VS5hcHBseShhKX0pfSk7dGhpcy5vbihcImlmcmFtZUFkZGVkXCIsZnVuY3Rpb24oYSl7KG5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQoYS5kYXRhLmlmcmFtZS4kLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpKS5vbihcImtleWRvd25cIixlLHRoaXMsbnVsbCwwKX0pO3RoaXMub24oXCJzaG93XCIsZnVuY3Rpb24oKXtjKCk7dmFyIGI9MTxsLl8ucGFnZUNvdW50O2EuY29uZmlnLmRpYWxvZ19zdGFydHVwRm9jdXNUYWImJmI/KGwuXy50YWJCYXJNb2RlPSEwLGwuXy50YWJzW2wuXy5jdXJyZW50VGFiSWRdWzBdLmZvY3VzKCksbC5fLmN1cnJlbnRGb2N1c0luZGV4PS0xKTp0aGlzLl8uaGFzRm9jdXN8fCh0aGlzLl8uY3VycmVudEZvY3VzSW5kZXg9Yj8tMTp0aGlzLl8uZm9jdXNMaXN0Lmxlbmd0aC0xLGcub25Gb2N1cz9cbihiPWcub25Gb2N1cy5jYWxsKHRoaXMpKSYmYi5mb2N1cygpOmQoMSkpfSx0aGlzLG51bGwsNDI5NDk2NzI5NSk7aWYoQ0tFRElUT1IuZW52LmllNkNvbXBhdCl0aGlzLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRFbGVtZW50KCksYj1hLmdldEZpcnN0KCk7Yi5yZW1vdmUoKTtiLmFwcGVuZFRvKGEpfSx0aGlzKTtZKHRoaXMpO1oodGhpcyk7KG5ldyBDS0VESVRPUi5kb20udGV4dChnLnRpdGxlLENLRURJVE9SLmRvY3VtZW50KSkuYXBwZW5kVG8odGhpcy5wYXJ0cy50aXRsZSk7Zm9yKG09MDttPGcuY29udGVudHMubGVuZ3RoO20rKykoaz1nLmNvbnRlbnRzW21dKSYmdGhpcy5hZGRQYWdlKGspO3RoaXMucGFydHMudGFicy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLmdldFRhcmdldCgpO2IuaGFzQ2xhc3MoXCJja2VfZGlhbG9nX3RhYlwiKSYmKGI9Yi4kLmlkLHRoaXMuc2VsZWN0UGFnZShiLnN1YnN0cmluZyg0LGIubGFzdEluZGV4T2YoXCJfXCIpKSksXG50aGlzLl8udGFiQmFyTW9kZSYmKHRoaXMuXy50YWJCYXJNb2RlPSExLHRoaXMuXy5jdXJyZW50Rm9jdXNJbmRleD0tMSxkKDEpKSxhLmRhdGEucHJldmVudERlZmF1bHQoKSl9LHRoaXMpO209W107az1DS0VESVRPUi5kaWFsb2cuXy51aUVsZW1lbnRCdWlsZGVycy5oYm94LmJ1aWxkKHRoaXMse3R5cGU6XCJoYm94XCIsY2xhc3NOYW1lOlwiY2tlX2RpYWxvZ19mb290ZXJfYnV0dG9uc1wiLHdpZHRoczpbXSxjaGlsZHJlbjpnLmJ1dHRvbnN9LG0pLmdldENoaWxkKCk7dGhpcy5wYXJ0cy5mb290ZXIuc2V0SHRtbChtLmpvaW4oXCJcIikpO2ZvcihtPTA7bTxrLmxlbmd0aDttKyspdGhpcy5fLmJ1dHRvbnNba1ttXS5pZF09a1ttXX07Q0tFRElUT1IuZGlhbG9nLnByb3RvdHlwZT17ZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuaGlkZSgpO3RoaXMuXy5lbGVtZW50LnJlbW92ZSgpfSxyZXNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXt0aGlzLl8uY29udGVudFNpemUmJnRoaXMuXy5jb250ZW50U2l6ZS53aWR0aD09XG5hJiZ0aGlzLl8uY29udGVudFNpemUuaGVpZ2h0PT1ifHwoQ0tFRElUT1IuZGlhbG9nLmZpcmUoXCJyZXNpemVcIix7ZGlhbG9nOnRoaXMsd2lkdGg6YSxoZWlnaHQ6Yn0sdGhpcy5fLmVkaXRvciksdGhpcy5maXJlKFwicmVzaXplXCIse3dpZHRoOmEsaGVpZ2h0OmJ9LHRoaXMuXy5lZGl0b3IpLHRoaXMucGFydHMuY29udGVudHMuc2V0U3R5bGVzKHt3aWR0aDphK1wicHhcIixoZWlnaHQ6YitcInB4XCJ9KSxcInJ0bFwiPT10aGlzLl8uZWRpdG9yLmxhbmcuZGlyJiZ0aGlzLl8ucG9zaXRpb24mJih0aGlzLl8ucG9zaXRpb24ueD1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRWaWV3UGFuZVNpemUoKS53aWR0aC10aGlzLl8uY29udGVudFNpemUud2lkdGgtcGFyc2VJbnQodGhpcy5fLmVsZW1lbnQuZ2V0Rmlyc3QoKS5nZXRTdHlsZShcInJpZ2h0XCIpLDEwKSksdGhpcy5fLmNvbnRlbnRTaXplPXt3aWR0aDphLGhlaWdodDpifSl9fSgpLGdldFNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uZWxlbWVudC5nZXRGaXJzdCgpO1xucmV0dXJue3dpZHRoOmEuJC5vZmZzZXRXaWR0aHx8MCxoZWlnaHQ6YS4kLm9mZnNldEhlaWdodHx8MH19LG1vdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuXy5lbGVtZW50LmdldEZpcnN0KCksZT1cInJ0bFwiPT10aGlzLl8uZWRpdG9yLmxhbmcuZGlyLGY9XCJmaXhlZFwiPT1kLmdldENvbXB1dGVkU3R5bGUoXCJwb3NpdGlvblwiKTtDS0VESVRPUi5lbnYuaWUmJmQuc2V0U3R5bGUoXCJ6b29tXCIsXCIxMDAlXCIpO2YmJnRoaXMuXy5wb3NpdGlvbiYmdGhpcy5fLnBvc2l0aW9uLng9PWEmJnRoaXMuXy5wb3NpdGlvbi55PT1ifHwodGhpcy5fLnBvc2l0aW9uPXt4OmEseTpifSxmfHwoZj1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRTY3JvbGxQb3NpdGlvbigpLGErPWYueCxiKz1mLnkpLGUmJihmPXRoaXMuZ2V0U2l6ZSgpLGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCkud2lkdGgtZi53aWR0aC1hKSxiPXt0b3A6KDA8Yj9iOjApK1wicHhcIn0sXG5iW2U/XCJyaWdodFwiOlwibGVmdFwiXT0oMDxhP2E6MCkrXCJweFwiLGQuc2V0U3R5bGVzKGIpLGMmJih0aGlzLl8ubW92ZWQ9MSkpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoe30sdGhpcy5fLnBvc2l0aW9uKX0sc2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5lbGVtZW50LGI9dGhpcy5kZWZpbml0aW9uO2EuZ2V0UGFyZW50KCkmJmEuZ2V0UGFyZW50KCkuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSk/YS5zZXRTdHlsZShcImRpc3BsYXlcIixcImJsb2NrXCIpOmEuYXBwZW5kVG8oQ0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpKTt0aGlzLnJlc2l6ZSh0aGlzLl8uY29udGVudFNpemUmJnRoaXMuXy5jb250ZW50U2l6ZS53aWR0aHx8Yi53aWR0aHx8Yi5taW5XaWR0aCx0aGlzLl8uY29udGVudFNpemUmJnRoaXMuXy5jb250ZW50U2l6ZS5oZWlnaHR8fGIuaGVpZ2h0fHxiLm1pbkhlaWdodCk7dGhpcy5yZXNldCgpO3RoaXMuc2VsZWN0UGFnZSh0aGlzLmRlZmluaXRpb24uY29udGVudHNbMF0uaWQpO1xubnVsbD09PUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRaSW5kZXgmJihDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50WkluZGV4PXRoaXMuXy5lZGl0b3IuY29uZmlnLmJhc2VGbG9hdFpJbmRleCk7dGhpcy5fLmVsZW1lbnQuZ2V0Rmlyc3QoKS5zZXRTdHlsZShcInotaW5kZXhcIixDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50WkluZGV4Kz0xMCk7bnVsbD09PUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3A/KENLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3A9dGhpcyx0aGlzLl8ucGFyZW50RGlhbG9nPW51bGwsTih0aGlzLl8uZWRpdG9yKSk6KHRoaXMuXy5wYXJlbnREaWFsb2c9Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcCx0aGlzLl8ucGFyZW50RGlhbG9nLmdldEVsZW1lbnQoKS5nZXRGaXJzdCgpLiQuc3R5bGUuekluZGV4LT1NYXRoLmZsb29yKHRoaXMuXy5lZGl0b3IuY29uZmlnLmJhc2VGbG9hdFpJbmRleC8yKSxDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wPXRoaXMpO1xuYS5vbihcImtleWRvd25cIixRKTthLm9uKFwia2V5dXBcIixSKTt0aGlzLl8uaGFzRm9jdXM9ITE7Zm9yKHZhciBjIGluIGIuY29udGVudHMpaWYoYi5jb250ZW50c1tjXSl7dmFyIGE9Yi5jb250ZW50c1tjXSxkPXRoaXMuXy50YWJzW2EuaWRdLGU9YS5yZXF1aXJlZENvbnRlbnQsZj0wO2lmKGQpe2Zvcih2YXIgZyBpbiB0aGlzLl8uY29udGVudHNbYS5pZF0pe3ZhciBoPXRoaXMuXy5jb250ZW50c1thLmlkXVtnXTtcImhib3hcIiE9aC50eXBlJiZcInZib3hcIiE9aC50eXBlJiZoLmdldElucHV0RWxlbWVudCgpJiYoaC5yZXF1aXJlZENvbnRlbnQmJiF0aGlzLl8uZWRpdG9yLmFjdGl2ZUZpbHRlci5jaGVjayhoLnJlcXVpcmVkQ29udGVudCk/aC5kaXNhYmxlKCk6KGguZW5hYmxlKCksZisrKSl9IWZ8fGUmJiF0aGlzLl8uZWRpdG9yLmFjdGl2ZUZpbHRlci5jaGVjayhlKT9kWzBdLmFkZENsYXNzKFwiY2tlX2RpYWxvZ190YWJfZGlzYWJsZWRcIik6ZFswXS5yZW1vdmVDbGFzcyhcImNrZV9kaWFsb2dfdGFiX2Rpc2FibGVkXCIpfX1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5sYXlvdXQoKTtcblgodGhpcyk7dGhpcy5wYXJ0cy5kaWFsb2cuc2V0U3R5bGUoXCJ2aXNpYmlsaXR5XCIsXCJcIik7dGhpcy5maXJlT25jZShcImxvYWRcIix7fSk7Q0tFRElUT1IudWkuZmlyZShcInJlYWR5XCIsdGhpcyk7dGhpcy5maXJlKFwic2hvd1wiLHt9KTt0aGlzLl8uZWRpdG9yLmZpcmUoXCJkaWFsb2dTaG93XCIsdGhpcyk7dGhpcy5fLnBhcmVudERpYWxvZ3x8dGhpcy5fLmVkaXRvci5mb2N1c01hbmFnZXIubG9jaygpO3RoaXMuZm9yZWFjaChmdW5jdGlvbihhKXthLnNldEluaXRWYWx1ZSYmYS5zZXRJbml0VmFsdWUoKX0pfSwxMDAsdGhpcyl9LGxheW91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFydHMuZGlhbG9nLGI9dGhpcy5nZXRTaXplKCksYz1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKS5nZXRWaWV3UGFuZVNpemUoKSxkPShjLndpZHRoLWIud2lkdGgpLzIsZT0oYy5oZWlnaHQtYi5oZWlnaHQpLzI7Q0tFRElUT1IuZW52LmllNkNvbXBhdHx8KGIuaGVpZ2h0KygwPGU/ZTowKT5jLmhlaWdodHx8XG5iLndpZHRoKygwPGQ/ZDowKT5jLndpZHRoP2Euc2V0U3R5bGUoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIik6YS5zZXRTdHlsZShcInBvc2l0aW9uXCIsXCJmaXhlZFwiKSk7dGhpcy5tb3ZlKHRoaXMuXy5tb3ZlZD90aGlzLl8ucG9zaXRpb24ueDpkLHRoaXMuXy5tb3ZlZD90aGlzLl8ucG9zaXRpb24ueTplKX0sZm9yZWFjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gdGhpcy5fLmNvbnRlbnRzKWZvcih2YXIgYyBpbiB0aGlzLl8uY29udGVudHNbYl0pYS5jYWxsKHRoaXMsdGhpcy5fLmNvbnRlbnRzW2JdW2NdKTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXthLnJlc2V0JiZhLnJlc2V0KDEpfTtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmZvcmVhY2goYSk7cmV0dXJuIHRoaXN9fSgpLHNldHVwQ29udGVudDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLmZvcmVhY2goZnVuY3Rpb24oYil7Yi5zZXR1cCYmYi5zZXR1cC5hcHBseShiLGEpfSl9LFxuY29tbWl0Q29udGVudDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLmZvcmVhY2goZnVuY3Rpb24oYil7Q0tFRElUT1IuZW52LmllJiZ0aGlzLl8uY3VycmVudEZvY3VzSW5kZXg9PWIuZm9jdXNJbmRleCYmYi5nZXRJbnB1dEVsZW1lbnQoKS4kLmJsdXIoKTtiLmNvbW1pdCYmYi5jb21taXQuYXBwbHkoYixhKX0pfSxoaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5wYXJ0cy5kaWFsb2cuaXNWaXNpYmxlKCkpe3RoaXMuZmlyZShcImhpZGVcIix7fSk7dGhpcy5fLmVkaXRvci5maXJlKFwiZGlhbG9nSGlkZVwiLHRoaXMpO3RoaXMuc2VsZWN0UGFnZSh0aGlzLl8udGFiSWRMaXN0WzBdKTt2YXIgYT10aGlzLl8uZWxlbWVudDthLnNldFN0eWxlKFwiZGlzcGxheVwiLFwibm9uZVwiKTt0aGlzLnBhcnRzLmRpYWxvZy5zZXRTdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKTtmb3IoYmEodGhpcyk7Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcCE9dGhpczspQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcC5oaWRlKCk7XG5pZih0aGlzLl8ucGFyZW50RGlhbG9nKXt2YXIgYj10aGlzLl8ucGFyZW50RGlhbG9nLmdldEVsZW1lbnQoKS5nZXRGaXJzdCgpO2Iuc2V0U3R5bGUoXCJ6LWluZGV4XCIscGFyc2VJbnQoYi4kLnN0eWxlLnpJbmRleCwxMCkrTWF0aC5mbG9vcih0aGlzLl8uZWRpdG9yLmNvbmZpZy5iYXNlRmxvYXRaSW5kZXgvMikpfWVsc2UgTyh0aGlzLl8uZWRpdG9yKTtpZihDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wPXRoaXMuXy5wYXJlbnREaWFsb2cpQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFpJbmRleC09MTA7ZWxzZXtDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50WkluZGV4PW51bGw7YS5yZW1vdmVMaXN0ZW5lcihcImtleWRvd25cIixRKTthLnJlbW92ZUxpc3RlbmVyKFwia2V5dXBcIixSKTt2YXIgYz10aGlzLl8uZWRpdG9yO2MuZm9jdXMoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5mb2N1c01hbmFnZXIudW5sb2NrKCk7Q0tFRElUT1IuZW52LmlPUyYmYy53aW5kb3cuZm9jdXMoKX0sMCl9ZGVsZXRlIHRoaXMuXy5wYXJlbnREaWFsb2c7XG50aGlzLmZvcmVhY2goZnVuY3Rpb24oYSl7YS5yZXNldEluaXRWYWx1ZSYmYS5yZXNldEluaXRWYWx1ZSgpfSk7dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5ESUFMT0dfU1RBVEVfSURMRSl9fSxhZGRQYWdlOmZ1bmN0aW9uKGEpe2lmKCFhLnJlcXVpcmVkQ29udGVudHx8dGhpcy5fLmVkaXRvci5maWx0ZXIuY2hlY2soYS5yZXF1aXJlZENvbnRlbnQpKXtmb3IodmFyIGI9W10sYz1hLmxhYmVsPycgdGl0bGVcXHgzZFwiJytDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpKydcIic6XCJcIixkPUNLRURJVE9SLmRpYWxvZy5fLnVpRWxlbWVudEJ1aWxkZXJzLnZib3guYnVpbGQodGhpcyx7dHlwZTpcInZib3hcIixjbGFzc05hbWU6XCJja2VfZGlhbG9nX3BhZ2VfY29udGVudHNcIixjaGlsZHJlbjphLmVsZW1lbnRzLGV4cGFuZDohIWEuZXhwYW5kLHBhZGRpbmc6YS5wYWRkaW5nLHN0eWxlOmEuc3R5bGV8fFwid2lkdGg6IDEwMCU7XCJ9LGIpLGU9dGhpcy5fLmNvbnRlbnRzW2EuaWRdPXt9LGY9ZC5nZXRDaGlsZCgpLFxuZz0wO2Q9Zi5zaGlmdCgpOylkLm5vdEFsbG93ZWR8fFwiaGJveFwiPT1kLnR5cGV8fFwidmJveFwiPT1kLnR5cGV8fGcrKyxlW2QuaWRdPWQsXCJmdW5jdGlvblwiPT10eXBlb2YgZC5nZXRDaGlsZCYmZi5wdXNoLmFwcGx5KGYsZC5nZXRDaGlsZCgpKTtnfHwoYS5oaWRkZW49ITApO2I9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoYi5qb2luKFwiXCIpKTtiLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInRhYnBhbmVsXCIpO2Q9Q0tFRElUT1IuZW52O2U9XCJja2VfXCIrYS5pZCtcIl9cIitDS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCk7Yz1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChbJ1xceDNjYSBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3RhYlwiJywwPHRoaXMuXy5wYWdlQ291bnQ/XCIgY2tlX2xhc3RcIjpcImNrZV9maXJzdFwiLGMsYS5oaWRkZW4/JyBzdHlsZVxceDNkXCJkaXNwbGF5Om5vbmVcIic6XCJcIiwnIGlkXFx4M2RcIicsZSwnXCInLGQuZ2Vja28mJiFkLmhjP1wiXCI6JyBocmVmXFx4M2RcImphdmFzY3JpcHQ6dm9pZCgwKVwiJyxcbicgdGFiSW5kZXhcXHgzZFwiLTFcIiBoaWRlZm9jdXNcXHgzZFwidHJ1ZVwiIHJvbGVcXHgzZFwidGFiXCJcXHgzZScsYS5sYWJlbCxcIlxceDNjL2FcXHgzZVwiXS5qb2luKFwiXCIpKTtiLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxsZWRieVwiLGUpO3RoaXMuXy50YWJzW2EuaWRdPVtjLGJdO3RoaXMuXy50YWJJZExpc3QucHVzaChhLmlkKTshYS5oaWRkZW4mJnRoaXMuXy5wYWdlQ291bnQrKzt0aGlzLl8ubGFzdFRhYj1jO3RoaXMudXBkYXRlU3R5bGUoKTtiLnNldEF0dHJpYnV0ZShcIm5hbWVcIixhLmlkKTtiLmFwcGVuZFRvKHRoaXMucGFydHMuY29udGVudHMpO2MudW5zZWxlY3RhYmxlKCk7dGhpcy5wYXJ0cy50YWJzLmFwcGVuZChjKTthLmFjY2Vzc0tleSYmKFModGhpcyx0aGlzLFwiQ1RSTCtcIithLmFjY2Vzc0tleSxjYSxkYSksdGhpcy5fLmFjY2Vzc0tleU1hcFtcIkNUUkwrXCIrYS5hY2Nlc3NLZXldPWEuaWQpfX0sc2VsZWN0UGFnZTpmdW5jdGlvbihhKXtpZih0aGlzLl8uY3VycmVudFRhYklkIT1hJiYhdGhpcy5fLnRhYnNbYV1bMF0uaGFzQ2xhc3MoXCJja2VfZGlhbG9nX3RhYl9kaXNhYmxlZFwiKSYmXG4hMSE9PXRoaXMuZmlyZShcInNlbGVjdFBhZ2VcIix7cGFnZTphLGN1cnJlbnRQYWdlOnRoaXMuXy5jdXJyZW50VGFiSWR9KSl7Zm9yKHZhciBiIGluIHRoaXMuXy50YWJzKXt2YXIgYz10aGlzLl8udGFic1tiXVswXSxkPXRoaXMuXy50YWJzW2JdWzFdO2IhPWEmJihjLnJlbW92ZUNsYXNzKFwiY2tlX2RpYWxvZ190YWJfc2VsZWN0ZWRcIiksZC5oaWRlKCkpO2Quc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixiIT1hKX12YXIgZT10aGlzLl8udGFic1thXTtlWzBdLmFkZENsYXNzKFwiY2tlX2RpYWxvZ190YWJfc2VsZWN0ZWRcIik7Q0tFRElUT1IuZW52LmllNkNvbXBhdHx8Q0tFRElUT1IuZW52LmllN0NvbXBhdD8oSyhlWzFdKSxlWzFdLnNob3coKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SyhlWzFdLDEpfSwwKSk6ZVsxXS5zaG93KCk7dGhpcy5fLmN1cnJlbnRUYWJJZD1hO3RoaXMuXy5jdXJyZW50VGFiSW5kZXg9Q0tFRElUT1IudG9vbHMuaW5kZXhPZih0aGlzLl8udGFiSWRMaXN0LGEpfX0sXG51cGRhdGVTdHlsZTpmdW5jdGlvbigpe3RoaXMucGFydHMuZGlhbG9nWygxPT09dGhpcy5fLnBhZ2VDb3VudD9cImFkZFwiOlwicmVtb3ZlXCIpK1wiQ2xhc3NcIl0oXCJja2Vfc2luZ2xlX3BhZ2VcIil9LGhpZGVQYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy50YWJzW2FdJiZ0aGlzLl8udGFic1thXVswXTtiJiYxIT10aGlzLl8ucGFnZUNvdW50JiZiLmlzVmlzaWJsZSgpJiYoYT09dGhpcy5fLmN1cnJlbnRUYWJJZCYmdGhpcy5zZWxlY3RQYWdlKHguY2FsbCh0aGlzKSksYi5oaWRlKCksdGhpcy5fLnBhZ2VDb3VudC0tLHRoaXMudXBkYXRlU3R5bGUoKSl9LHNob3dQYWdlOmZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5fLnRhYnNbYV0mJnRoaXMuXy50YWJzW2FdWzBdKWEuc2hvdygpLHRoaXMuXy5wYWdlQ291bnQrKyx0aGlzLnVwZGF0ZVN0eWxlKCl9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmVsZW1lbnR9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLm5hbWV9LFxuZ2V0Q29udGVudEVsZW1lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl8uY29udGVudHNbYV07cmV0dXJuIGMmJmNbYl19LGdldFZhbHVlT2Y6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRDb250ZW50RWxlbWVudChhLGIpLmdldFZhbHVlKCl9LHNldFZhbHVlT2Y6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmdldENvbnRlbnRFbGVtZW50KGEsYikuc2V0VmFsdWUoYyl9LGdldEJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLmJ1dHRvbnNbYV19LGNsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl8uYnV0dG9uc1thXS5jbGljaygpfSxkaXNhYmxlQnV0dG9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl8uYnV0dG9uc1thXS5kaXNhYmxlKCl9LGVuYWJsZUJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLmJ1dHRvbnNbYV0uZW5hYmxlKCl9LGdldFBhZ2VDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8ucGFnZUNvdW50fSxnZXRQYXJlbnRFZGl0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmVkaXRvcn0sXG5nZXRTZWxlY3RlZEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXJlbnRFZGl0b3IoKS5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZEVsZW1lbnQoKX0sYWRkRm9jdXNhYmxlOmZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGIpYj10aGlzLl8uZm9jdXNMaXN0Lmxlbmd0aCx0aGlzLl8uZm9jdXNMaXN0LnB1c2gobmV3IEwodGhpcyxhLGIpKTtlbHNle3RoaXMuXy5mb2N1c0xpc3Quc3BsaWNlKGIsMCxuZXcgTCh0aGlzLGEsYikpO2Zvcih2YXIgYz1iKzE7Yzx0aGlzLl8uZm9jdXNMaXN0Lmxlbmd0aDtjKyspdGhpcy5fLmZvY3VzTGlzdFtjXS5mb2N1c0luZGV4Kyt9fSxzZXRTdGF0ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlIT1hKXt0aGlzLnN0YXRlPWE7aWYoYT09Q0tFRElUT1IuRElBTE9HX1NUQVRFX0JVU1kpe2lmKCF0aGlzLnBhcnRzLnNwaW5uZXIpe3ZhciBiPXRoaXMuZ2V0UGFyZW50RWRpdG9yKCkubGFuZy5kaXIsYz17YXR0cmlidXRlczp7XCJjbGFzc1wiOlwiY2tlX2RpYWxvZ19zcGlubmVyXCJ9LFxuc3R5bGVzOntcImZsb2F0XCI6XCJydGxcIj09Yj9cInJpZ2h0XCI6XCJsZWZ0XCJ9fTtjLnN0eWxlc1tcIm1hcmdpbi1cIisoXCJydGxcIj09Yj9cImxlZnRcIjpcInJpZ2h0XCIpXT1cIjhweFwiO3RoaXMucGFydHMuc3Bpbm5lcj1DS0VESVRPUi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsYyk7dGhpcy5wYXJ0cy5zcGlubmVyLnNldEh0bWwoXCJcXHgyNiM4OTg3O1wiKTt0aGlzLnBhcnRzLnNwaW5uZXIuYXBwZW5kVG8odGhpcy5wYXJ0cy50aXRsZSwxKX10aGlzLnBhcnRzLnNwaW5uZXIuc2hvdygpO3RoaXMuZ2V0QnV0dG9uKFwib2tcIikuZGlzYWJsZSgpfWVsc2UgYT09Q0tFRElUT1IuRElBTE9HX1NUQVRFX0lETEUmJih0aGlzLnBhcnRzLnNwaW5uZXImJnRoaXMucGFydHMuc3Bpbm5lci5oaWRlKCksdGhpcy5nZXRCdXR0b24oXCJva1wiKS5lbmFibGUoKSk7dGhpcy5maXJlKFwic3RhdGVcIixhKX19fTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZGlhbG9nLHthZGQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl8uZGlhbG9nRGVmaW5pdGlvbnNbYV0mJlxuXCJmdW5jdGlvblwiIT10eXBlb2YgYnx8KHRoaXMuXy5kaWFsb2dEZWZpbml0aW9uc1thXT1iKX0sZXhpc3RzOmZ1bmN0aW9uKGEpe3JldHVybiEhdGhpcy5fLmRpYWxvZ0RlZmluaXRpb25zW2FdfSxnZXRDdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIENLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3B9LGlzVGFiRW5hYmxlZDpmdW5jdGlvbihhLGIsYyl7YT1hLmNvbmZpZy5yZW1vdmVEaWFsb2dUYWJzO3JldHVybiEoYSYmYS5tYXRjaChuZXcgUmVnRXhwKFwiKD86Xnw7KVwiK2IrXCI6XCIrYytcIig/OiR8OylcIixcImlcIikpKX0sb2tCdXR0b246ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGMpe2M9Y3x8e307cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZCh7aWQ6XCJva1wiLHR5cGU6XCJidXR0b25cIixsYWJlbDphLmxhbmcuY29tbW9uLm9rLFwiY2xhc3NcIjpcImNrZV9kaWFsb2dfdWlfYnV0dG9uX29rXCIsb25DbGljazpmdW5jdGlvbihhKXthPWEuZGF0YS5kaWFsb2c7ITEhPT1hLmZpcmUoXCJva1wiLFxue2hpZGU6ITB9KS5oaWRlJiZhLmhpZGUoKX19LGMsITApfTthLnR5cGU9XCJidXR0b25cIjthLm92ZXJyaWRlPWZ1bmN0aW9uKGIpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoZnVuY3Rpb24oYyl7cmV0dXJuIGEoYyxiKX0se3R5cGU6XCJidXR0b25cIn0sITApfTtyZXR1cm4gYX0oKSxjYW5jZWxCdXR0b246ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGMpe2M9Y3x8e307cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZCh7aWQ6XCJjYW5jZWxcIix0eXBlOlwiYnV0dG9uXCIsbGFiZWw6YS5sYW5nLmNvbW1vbi5jYW5jZWwsXCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9idXR0b25fY2FuY2VsXCIsb25DbGljazpmdW5jdGlvbihhKXthPWEuZGF0YS5kaWFsb2c7ITEhPT1hLmZpcmUoXCJjYW5jZWxcIix7aGlkZTohMH0pLmhpZGUmJmEuaGlkZSgpfX0sYywhMCl9O2EudHlwZT1cImJ1dHRvblwiO2Eub3ZlcnJpZGU9ZnVuY3Rpb24oYil7cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZChmdW5jdGlvbihjKXtyZXR1cm4gYShjLFxuYil9LHt0eXBlOlwiYnV0dG9uXCJ9LCEwKX07cmV0dXJuIGF9KCksYWRkVUlFbGVtZW50OmZ1bmN0aW9uKGEsYil7dGhpcy5fLnVpRWxlbWVudEJ1aWxkZXJzW2FdPWJ9fSk7Q0tFRElUT1IuZGlhbG9nLl89e3VpRWxlbWVudEJ1aWxkZXJzOnt9LGRpYWxvZ0RlZmluaXRpb25zOnt9LGN1cnJlbnRUb3A6bnVsbCxjdXJyZW50WkluZGV4Om51bGx9O0NLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKENLRURJVE9SLmRpYWxvZyk7Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IuZGlhbG9nLnByb3RvdHlwZSk7dmFyIGFhPXtyZXNpemFibGU6Q0tFRElUT1IuRElBTE9HX1JFU0laRV9CT1RILG1pbldpZHRoOjYwMCxtaW5IZWlnaHQ6NDAwLGJ1dHRvbnM6W0NLRURJVE9SLmRpYWxvZy5va0J1dHRvbixDS0VESVRPUi5kaWFsb2cuY2FuY2VsQnV0dG9uXX0sRD1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZTtlPWFbZF07ZCsrKWlmKGUuaWQ9PWJ8fGMmJmVbY10mJihlPUQoZVtjXSxcbmIsYykpKXJldHVybiBlO3JldHVybiBudWxsfSxFPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoYyl7Zm9yKHZhciBmPTAsZztnPWFbZl07ZisrKXtpZihnLmlkPT1jKXJldHVybiBhLnNwbGljZShmLDAsYiksYjtpZihkJiZnW2RdJiYoZz1FKGdbZF0sYixjLGQsITApKSlyZXR1cm4gZ31pZihlKXJldHVybiBudWxsfWEucHVzaChiKTtyZXR1cm4gYn0sRj1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZTtlPWFbZF07ZCsrKXtpZihlLmlkPT1iKXJldHVybiBhLnNwbGljZShkLDEpO2lmKGMmJmVbY10mJihlPUYoZVtjXSxiLGMpKSlyZXR1cm4gZX1yZXR1cm4gbnVsbH0sUD1mdW5jdGlvbihhLGIpe3RoaXMuZGlhbG9nPWE7Zm9yKHZhciBjPWIuY29udGVudHMsZD0wLGU7ZT1jW2RdO2QrKyljW2RdPWUmJm5ldyBNKGEsZSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYil9O1AucHJvdG90eXBlPXtnZXRDb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gRCh0aGlzLmNvbnRlbnRzLFxuYSl9LGdldEJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gRCh0aGlzLmJ1dHRvbnMsYSl9LGFkZENvbnRlbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEUodGhpcy5jb250ZW50cyxhLGIpfSxhZGRCdXR0b246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRSh0aGlzLmJ1dHRvbnMsYSxiKX0scmVtb3ZlQ29udGVudHM6ZnVuY3Rpb24oYSl7Rih0aGlzLmNvbnRlbnRzLGEpfSxyZW1vdmVCdXR0b246ZnVuY3Rpb24oYSl7Rih0aGlzLmJ1dHRvbnMsYSl9fTtNLnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBEKHRoaXMuZWxlbWVudHMsYSxcImNoaWxkcmVuXCIpfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRSh0aGlzLmVsZW1lbnRzLGEsYixcImNoaWxkcmVuXCIpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7Rih0aGlzLmVsZW1lbnRzLGEsXCJjaGlsZHJlblwiKX19O3ZhciBKLHo9e30sdSx3PXt9LFE9ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLiQuY3RybEtleXx8YS5kYXRhLiQubWV0YUtleSxjPVxuYS5kYXRhLiQuYWx0S2V5LGQ9YS5kYXRhLiQuc2hpZnRLZXksZT1TdHJpbmcuZnJvbUNoYXJDb2RlKGEuZGF0YS4kLmtleUNvZGUpOyhiPXdbKGI/XCJDVFJMK1wiOlwiXCIpKyhjP1wiQUxUK1wiOlwiXCIpKyhkP1wiU0hJRlQrXCI6XCJcIikrZV0pJiZiLmxlbmd0aCYmKGI9YltiLmxlbmd0aC0xXSxiLmtleWRvd24mJmIua2V5ZG93bi5jYWxsKGIudWlFbGVtZW50LGIuZGlhbG9nLGIua2V5KSxhLmRhdGEucHJldmVudERlZmF1bHQoKSl9LFI9ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLiQuY3RybEtleXx8YS5kYXRhLiQubWV0YUtleSxjPWEuZGF0YS4kLmFsdEtleSxkPWEuZGF0YS4kLnNoaWZ0S2V5LGU9U3RyaW5nLmZyb21DaGFyQ29kZShhLmRhdGEuJC5rZXlDb2RlKTsoYj13WyhiP1wiQ1RSTCtcIjpcIlwiKSsoYz9cIkFMVCtcIjpcIlwiKSsoZD9cIlNISUZUK1wiOlwiXCIpK2VdKSYmYi5sZW5ndGgmJihiPWJbYi5sZW5ndGgtMV0sYi5rZXl1cCYmKGIua2V5dXAuY2FsbChiLnVpRWxlbWVudCxiLmRpYWxvZyxiLmtleSksXG5hLmRhdGEucHJldmVudERlZmF1bHQoKSkpfSxTPWZ1bmN0aW9uKGEsYixjLGQsZSl7KHdbY118fCh3W2NdPVtdKSkucHVzaCh7dWlFbGVtZW50OmEsZGlhbG9nOmIsa2V5OmMsa2V5dXA6ZXx8YS5hY2Nlc3NLZXlVcCxrZXlkb3duOmR8fGEuYWNjZXNzS2V5RG93bn0pfSxiYT1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gdyl7Zm9yKHZhciBjPXdbYl0sZD1jLmxlbmd0aC0xOzA8PWQ7ZC0tKWNbZF0uZGlhbG9nIT1hJiZjW2RdLnVpRWxlbWVudCE9YXx8Yy5zcGxpY2UoZCwxKTswPT09Yy5sZW5ndGgmJmRlbGV0ZSB3W2JdfX0sZGE9ZnVuY3Rpb24oYSxiKXthLl8uYWNjZXNzS2V5TWFwW2JdJiZhLnNlbGVjdFBhZ2UoYS5fLmFjY2Vzc0tleU1hcFtiXSl9LGNhPWZ1bmN0aW9uKCl7fTsoZnVuY3Rpb24oKXtDS0VESVRPUi51aS5kaWFsb2c9e3VpRWxlbWVudDpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtpZighKDQ+YXJndW1lbnRzLmxlbmd0aCkpe3ZhciBoPShkLmNhbGw/ZChiKTpkKXx8XG5cImRpdlwiLHA9W1wiXFx4M2NcIixoLFwiIFwiXSxtPShlJiZlLmNhbGw/ZShiKTplKXx8e30saz0oZiYmZi5jYWxsP2YoYik6Zil8fHt9LHE9KGcmJmcuY2FsbD9nLmNhbGwodGhpcyxhLGIpOmcpfHxcIlwiLG49dGhpcy5kb21JZD1rLmlkfHxDS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl91aUVsZW1lbnRcIjtiLnJlcXVpcmVkQ29udGVudCYmIWEuZ2V0UGFyZW50RWRpdG9yKCkuZmlsdGVyLmNoZWNrKGIucmVxdWlyZWRDb250ZW50KSYmKG0uZGlzcGxheT1cIm5vbmVcIix0aGlzLm5vdEFsbG93ZWQ9ITApO2suaWQ9bjt2YXIgcj17fTtiLnR5cGUmJihyW1wiY2tlX2RpYWxvZ191aV9cIitiLnR5cGVdPTEpO2IuY2xhc3NOYW1lJiYocltiLmNsYXNzTmFtZV09MSk7Yi5kaXNhYmxlZCYmKHIuY2tlX2Rpc2FibGVkPTEpO2Zvcih2YXIgbD1rW1wiY2xhc3NcIl0mJmtbXCJjbGFzc1wiXS5zcGxpdD9rW1wiY2xhc3NcIl0uc3BsaXQoXCIgXCIpOltdLG49MDtuPGwubGVuZ3RoO24rKylsW25dJiYocltsW25dXT0xKTtsPVxuW107Zm9yKG4gaW4gcilsLnB1c2gobik7a1tcImNsYXNzXCJdPWwuam9pbihcIiBcIik7Yi50aXRsZSYmKGsudGl0bGU9Yi50aXRsZSk7cj0oYi5zdHlsZXx8XCJcIikuc3BsaXQoXCI7XCIpO2IuYWxpZ24mJihsPWIuYWxpZ24sbVtcIm1hcmdpbi1sZWZ0XCJdPVwibGVmdFwiPT1sPzA6XCJhdXRvXCIsbVtcIm1hcmdpbi1yaWdodFwiXT1cInJpZ2h0XCI9PWw/MDpcImF1dG9cIik7Zm9yKG4gaW4gbSlyLnB1c2gobitcIjpcIittW25dKTtiLmhpZGRlbiYmci5wdXNoKFwiZGlzcGxheTpub25lXCIpO2ZvcihuPXIubGVuZ3RoLTE7MDw9bjtuLS0pXCJcIj09PXJbbl0mJnIuc3BsaWNlKG4sMSk7MDxyLmxlbmd0aCYmKGsuc3R5bGU9KGsuc3R5bGU/ay5zdHlsZStcIjsgXCI6XCJcIikrci5qb2luKFwiOyBcIikpO2ZvcihuIGluIGspcC5wdXNoKG4rJ1xceDNkXCInK0NLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoa1tuXSkrJ1wiICcpO3AucHVzaChcIlxceDNlXCIscSxcIlxceDNjL1wiLGgsXCJcXHgzZVwiKTtjLnB1c2gocC5qb2luKFwiXCIpKTsodGhpcy5ffHwodGhpcy5fPVxue30pKS5kaWFsb2c9YTtcImJvb2xlYW5cIj09dHlwZW9mIGIuaXNDaGFuZ2VkJiYodGhpcy5pc0NoYW5nZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYi5pc0NoYW5nZWR9KTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmlzQ2hhbmdlZCYmKHRoaXMuaXNDaGFuZ2VkPWIuaXNDaGFuZ2VkKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLnNldFZhbHVlJiYodGhpcy5zZXRWYWx1ZT1DS0VESVRPUi50b29scy5vdmVycmlkZSh0aGlzLnNldFZhbHVlLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXthLmNhbGwodGhpcyxiLnNldFZhbHVlLmNhbGwodGhpcyxjKSl9fSkpO1wiZnVuY3Rpb25cIj09dHlwZW9mIGIuZ2V0VmFsdWUmJih0aGlzLmdldFZhbHVlPUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKHRoaXMuZ2V0VmFsdWUsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGIuZ2V0VmFsdWUuY2FsbCh0aGlzLGEuY2FsbCh0aGlzKSl9fSkpO0NLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKHRoaXMpO1xudGhpcy5yZWdpc3RlckV2ZW50cyhiKTt0aGlzLmFjY2Vzc0tleVVwJiZ0aGlzLmFjY2Vzc0tleURvd24mJmIuYWNjZXNzS2V5JiZTKHRoaXMsYSxcIkNUUkwrXCIrYi5hY2Nlc3NLZXkpO3ZhciB0PXRoaXM7YS5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBiPXQuZ2V0SW5wdXRFbGVtZW50KCk7aWYoYil7dmFyIGM9dC50eXBlIGlue2NoZWNrYm94OjEscmF0aW86MX0mJkNLRURJVE9SLmVudi5pZSYmOD5DS0VESVRPUi5lbnYudmVyc2lvbj9cImNrZV9kaWFsb2dfdWlfZm9jdXNlZFwiOlwiXCI7Yi5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXthLl8udGFiQmFyTW9kZT0hMTthLl8uaGFzRm9jdXM9ITA7dC5maXJlKFwiZm9jdXNcIik7YyYmdGhpcy5hZGRDbGFzcyhjKX0pO2Iub24oXCJibHVyXCIsZnVuY3Rpb24oKXt0LmZpcmUoXCJibHVyXCIpO2MmJnRoaXMucmVtb3ZlQ2xhc3MoYyl9KX19KTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxiKTt0aGlzLmtleWJvYXJkRm9jdXNhYmxlJiYodGhpcy50YWJJbmRleD1cbmIudGFiSW5kZXh8fDAsdGhpcy5mb2N1c0luZGV4PWEuXy5mb2N1c0xpc3QucHVzaCh0aGlzKS0xLHRoaXMub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7YS5fLmN1cnJlbnRGb2N1c0luZGV4PXQuZm9jdXNJbmRleH0pKX19LGhib3g6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZighKDQ+YXJndW1lbnRzLmxlbmd0aCkpe3RoaXMuX3x8KHRoaXMuXz17fSk7dmFyIGY9dGhpcy5fLmNoaWxkcmVuPWIsZz1lJiZlLndpZHRoc3x8bnVsbCxoPWUmJmUuaGVpZ2h0fHxudWxsLHAsbT17cm9sZTpcInByZXNlbnRhdGlvblwifTtlJiZlLmFsaWduJiYobS5hbGlnbj1lLmFsaWduKTtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LmNhbGwodGhpcyxhLGV8fHt0eXBlOlwiaGJveFwifSxkLFwidGFibGVcIix7fSxtLGZ1bmN0aW9uKCl7dmFyIGE9WydcXHgzY3Rib2R5XFx4M2VcXHgzY3RyIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfaGJveFwiXFx4M2UnXTtmb3IocD0wO3A8Yy5sZW5ndGg7cCsrKXt2YXIgYj1cImNrZV9kaWFsb2dfdWlfaGJveF9jaGlsZFwiLFxuZD1bXTswPT09cCYmKGI9XCJja2VfZGlhbG9nX3VpX2hib3hfZmlyc3RcIik7cD09Yy5sZW5ndGgtMSYmKGI9XCJja2VfZGlhbG9nX3VpX2hib3hfbGFzdFwiKTthLnB1c2goJ1xceDNjdGQgY2xhc3NcXHgzZFwiJyxiLCdcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiICcpO2c/Z1twXSYmZC5wdXNoKFwid2lkdGg6XCIrdihnW3BdKSk6ZC5wdXNoKFwid2lkdGg6XCIrTWF0aC5mbG9vcigxMDAvYy5sZW5ndGgpK1wiJVwiKTtoJiZkLnB1c2goXCJoZWlnaHQ6XCIrdihoKSk7ZSYmdm9pZCAwIT09ZS5wYWRkaW5nJiZkLnB1c2goXCJwYWRkaW5nOlwiK3YoZS5wYWRkaW5nKSk7Q0tFRElUT1IuZW52LmllJiZDS0VESVRPUi5lbnYucXVpcmtzJiZmW3BdLmFsaWduJiZkLnB1c2goXCJ0ZXh0LWFsaWduOlwiK2ZbcF0uYWxpZ24pOzA8ZC5sZW5ndGgmJmEucHVzaCgnc3R5bGVcXHgzZFwiJytkLmpvaW4oXCI7IFwiKSsnXCIgJyk7YS5wdXNoKFwiXFx4M2VcIixjW3BdLFwiXFx4M2MvdGRcXHgzZVwiKX1hLnB1c2goXCJcXHgzYy90clxceDNlXFx4M2MvdGJvZHlcXHgzZVwiKTtcbnJldHVybiBhLmpvaW4oXCJcIil9KX19LHZib3g6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe3RoaXMuX3x8KHRoaXMuXz17fSk7dmFyIGY9dGhpcy5fLmNoaWxkcmVuPWIsZz1lJiZlLndpZHRofHxudWxsLGg9ZSYmZS5oZWlnaHRzfHxudWxsO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGEsZXx8e3R5cGU6XCJ2Ym94XCJ9LGQsXCJkaXZcIixudWxsLHtyb2xlOlwicHJlc2VudGF0aW9uXCJ9LGZ1bmN0aW9uKCl7dmFyIGI9WydcXHgzY3RhYmxlIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgY2VsbHNwYWNpbmdcXHgzZFwiMFwiIGJvcmRlclxceDNkXCIwXCIgJ107Yi5wdXNoKCdzdHlsZVxceDNkXCInKTtlJiZlLmV4cGFuZCYmYi5wdXNoKFwiaGVpZ2h0OjEwMCU7XCIpO2IucHVzaChcIndpZHRoOlwiK3YoZ3x8XCIxMDAlXCIpLFwiO1wiKTtDS0VESVRPUi5lbnYud2Via2l0JiZiLnB1c2goXCJmbG9hdDpub25lO1wiKTtiLnB1c2goJ1wiJyk7Yi5wdXNoKCdhbGlnblxceDNkXCInLFxuQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShlJiZlLmFsaWdufHwoXCJsdHJcIj09YS5nZXRQYXJlbnRFZGl0b3IoKS5sYW5nLmRpcj9cImxlZnRcIjpcInJpZ2h0XCIpKSwnXCIgJyk7Yi5wdXNoKFwiXFx4M2VcXHgzY3Rib2R5XFx4M2VcIik7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBrPVtdO2IucHVzaCgnXFx4M2N0clxceDNlXFx4M2N0ZCByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiICcpO2cmJmsucHVzaChcIndpZHRoOlwiK3YoZ3x8XCIxMDAlXCIpKTtoP2sucHVzaChcImhlaWdodDpcIit2KGhbZF0pKTplJiZlLmV4cGFuZCYmay5wdXNoKFwiaGVpZ2h0OlwiK01hdGguZmxvb3IoMTAwL2MubGVuZ3RoKStcIiVcIik7ZSYmdm9pZCAwIT09ZS5wYWRkaW5nJiZrLnB1c2goXCJwYWRkaW5nOlwiK3YoZS5wYWRkaW5nKSk7Q0tFRElUT1IuZW52LmllJiZDS0VESVRPUi5lbnYucXVpcmtzJiZmW2RdLmFsaWduJiZrLnB1c2goXCJ0ZXh0LWFsaWduOlwiK2ZbZF0uYWxpZ24pOzA8ay5sZW5ndGgmJmIucHVzaCgnc3R5bGVcXHgzZFwiJyxcbmsuam9pbihcIjsgXCIpLCdcIiAnKTtiLnB1c2goJyBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX3Zib3hfY2hpbGRcIlxceDNlJyxjW2RdLFwiXFx4M2MvdGRcXHgzZVxceDNjL3RyXFx4M2VcIil9Yi5wdXNoKFwiXFx4M2MvdGJvZHlcXHgzZVxceDNjL3RhYmxlXFx4M2VcIik7cmV0dXJuIGIuam9pbihcIlwiKX0pfX19fSkoKTtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZT17Z2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHRoaXMuZG9tSWQpfSxnZXRJbnB1dEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50KCl9LGdldERpYWxvZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZGlhbG9nfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuc2V0VmFsdWUoYSk7IWImJnRoaXMuZmlyZShcImNoYW5nZVwiLHt2YWx1ZTphfSk7cmV0dXJuIHRoaXN9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuZ2V0VmFsdWUoKX0sXG5pc0NoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc2VsZWN0UGFyZW50VGFiOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCk7KGE9YS5nZXRQYXJlbnQoKSkmJi0xPT1hLiQuY2xhc3NOYW1lLnNlYXJjaChcImNrZV9kaWFsb2dfcGFnZV9jb250ZW50c1wiKTspO2lmKCFhKXJldHVybiB0aGlzO2E9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO3RoaXMuXy5kaWFsb2cuXy5jdXJyZW50VGFiSWQhPWEmJnRoaXMuXy5kaWFsb2cuc2VsZWN0UGFnZShhKTtyZXR1cm4gdGhpc30sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdFBhcmVudFRhYigpLmdldElucHV0RWxlbWVudCgpLmZvY3VzKCk7cmV0dXJuIHRoaXN9LHJlZ2lzdGVyRXZlbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPS9eb24oW0EtWl1cXHcrKS8sYyxkPWZ1bmN0aW9uKGEsYixjLGQpe2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXthLmdldElucHV0RWxlbWVudCgpLm9uKGMsZCxhKX0pfSxlO2ZvcihlIGluIGEpaWYoYz1cbmUubWF0Y2goYikpdGhpcy5ldmVudFByb2Nlc3NvcnNbZV0/dGhpcy5ldmVudFByb2Nlc3NvcnNbZV0uY2FsbCh0aGlzLHRoaXMuXy5kaWFsb2csYVtlXSk6ZCh0aGlzLHRoaXMuXy5kaWFsb2csY1sxXS50b0xvd2VyQ2FzZSgpLGFbZV0pO3JldHVybiB0aGlzfSxldmVudFByb2Nlc3NvcnM6e29uTG9hZDpmdW5jdGlvbihhLGIpe2Eub24oXCJsb2FkXCIsYix0aGlzKX0sb25TaG93OmZ1bmN0aW9uKGEsYil7YS5vbihcInNob3dcIixiLHRoaXMpfSxvbkhpZGU6ZnVuY3Rpb24oYSxiKXthLm9uKFwiaGlkZVwiLGIsdGhpcyl9fSxhY2Nlc3NLZXlEb3duOmZ1bmN0aW9uKCl7dGhpcy5mb2N1cygpfSxhY2Nlc3NLZXlVcDpmdW5jdGlvbigpe30sZGlzYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RWxlbWVudCgpO3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcInRydWVcIik7YS5hZGRDbGFzcyhcImNrZV9kaXNhYmxlZFwiKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmdldEVsZW1lbnQoKTt0aGlzLmdldElucHV0RWxlbWVudCgpLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO2EucmVtb3ZlQ2xhc3MoXCJja2VfZGlzYWJsZWRcIil9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmdldEVsZW1lbnQoKS5oYXNDbGFzcyhcImNrZV9kaXNhYmxlZFwiKX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuaXNWaXNpYmxlKCl9LGlzRm9jdXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbmFibGVkKCkmJnRoaXMuaXNWaXNpYmxlKCk/ITA6ITF9fTtDS0VESVRPUi51aS5kaWFsb2cuaGJveC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LHtnZXRDaGlsZDpmdW5jdGlvbihhKXtpZigxPmFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuXy5jaGlsZHJlbi5jb25jYXQoKTthLnNwbGljZXx8KGE9W2FdKTtyZXR1cm4gMj5cbmEubGVuZ3RoP3RoaXMuXy5jaGlsZHJlblthWzBdXTp0aGlzLl8uY2hpbGRyZW5bYVswXV0mJnRoaXMuXy5jaGlsZHJlblthWzBdXS5nZXRDaGlsZD90aGlzLl8uY2hpbGRyZW5bYVswXV0uZ2V0Q2hpbGQoYS5zbGljZSgxLGEubGVuZ3RoKSk6bnVsbH19LCEwKTtDS0VESVRPUi51aS5kaWFsb2cudmJveC5wcm90b3R5cGU9bmV3IENLRURJVE9SLnVpLmRpYWxvZy5oYm94OyhmdW5jdGlvbigpe3ZhciBhPXtidWlsZDpmdW5jdGlvbihhLGMsZCl7Zm9yKHZhciBlPWMuY2hpbGRyZW4sZixnPVtdLGg9W10scD0wO3A8ZS5sZW5ndGgmJihmPWVbcF0pO3ArKyl7dmFyIG09W107Zy5wdXNoKG0pO2gucHVzaChDS0VESVRPUi5kaWFsb2cuXy51aUVsZW1lbnRCdWlsZGVyc1tmLnR5cGVdLmJ1aWxkKGEsZixtKSl9cmV0dXJuIG5ldyBDS0VESVRPUi51aS5kaWFsb2dbYy50eXBlXShhLGgsZyxkLGMpfX07Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcImhib3hcIixhKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwidmJveFwiLFxuYSl9KSgpO0NLRURJVE9SLmRpYWxvZ0NvbW1hbmQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmRpYWxvZ05hbWU9YTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxiLCEwKX07Q0tFRElUT1IuZGlhbG9nQ29tbWFuZC5wcm90b3R5cGU9e2V4ZWM6ZnVuY3Rpb24oYSl7YS5vcGVuRGlhbG9nKHRoaXMuZGlhbG9nTmFtZSl9LGNhblVuZG86ITEsZWRpdG9yRm9jdXM6MX07KGZ1bmN0aW9uKCl7dmFyIGE9L14oW2FdfFteYV0pKyQvLGI9L15cXGQqJC8sYz0vXlxcZCooPzpcXC5cXGQrKT8kLyxkPS9eKCgoXFxkKihcXC5cXGQrKSl8KFxcZCopKShweHxcXCUpPyk/JC8sZT0vXigoKFxcZCooXFwuXFxkKykpfChcXGQqKSkocHh8ZW18ZXh8aW58Y218bW18cHR8cGN8XFwlKT8pPyQvaSxmPS9eKFxccypbXFx3LV0rXFxzKjpcXHMqW146O10rKD86O3wkKSkqJC87Q0tFRElUT1IuVkFMSURBVEVfT1I9MTtDS0VESVRPUi5WQUxJREFURV9BTkQ9MjtDS0VESVRPUi5kaWFsb2cudmFsaWRhdGU9e2Z1bmN0aW9uczpmdW5jdGlvbigpe3ZhciBhPVxuYXJndW1lbnRzO3JldHVybiBmdW5jdGlvbigpe3ZhciBiPXRoaXMmJnRoaXMuZ2V0VmFsdWU/dGhpcy5nZXRWYWx1ZSgpOmFbMF0sYyxkPUNLRURJVE9SLlZBTElEQVRFX0FORCxlPVtdLGY7Zm9yKGY9MDtmPGEubGVuZ3RoO2YrKylpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBhW2ZdKWUucHVzaChhW2ZdKTtlbHNlIGJyZWFrO2Y8YS5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBhW2ZdJiYoYz1hW2ZdLGYrKyk7ZjxhLmxlbmd0aCYmXCJudW1iZXJcIj09dHlwZW9mIGFbZl0mJihkPWFbZl0pO3ZhciBuPWQ9PUNLRURJVE9SLlZBTElEQVRFX0FORD8hMDohMTtmb3IoZj0wO2Y8ZS5sZW5ndGg7ZisrKW49ZD09Q0tFRElUT1IuVkFMSURBVEVfQU5EP24mJmVbZl0oYik6bnx8ZVtmXShiKTtyZXR1cm4gbj8hMDpjfX0scmVnZXg6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7Yz10aGlzJiZ0aGlzLmdldFZhbHVlP3RoaXMuZ2V0VmFsdWUoKTpjO3JldHVybiBhLnRlc3QoYyk/ITA6Yn19LFxubm90RW1wdHk6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucmVnZXgoYSxiKX0saW50ZWdlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZWdleChiLGEpfSxudW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVnZXgoYyxhKX0sY3NzTGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZ1bmN0aW9ucyhmdW5jdGlvbihhKXtyZXR1cm4gZS50ZXN0KENLRURJVE9SLnRvb2xzLnRyaW0oYSkpfSxhKX0saHRtbExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5mdW5jdGlvbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGQudGVzdChDS0VESVRPUi50b29scy50cmltKGEpKX0sYSl9LGlubGluZVN0eWxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZ1bmN0aW9ucyhmdW5jdGlvbihhKXtyZXR1cm4gZi50ZXN0KENLRURJVE9SLnRvb2xzLnRyaW0oYSkpfSxhKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZnVuY3Rpb25zKGZ1bmN0aW9uKGIpe3JldHVybiBiPT1hfSxiKX0sXG5ub3RFcXVhbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZ1bmN0aW9ucyhmdW5jdGlvbihiKXtyZXR1cm4gYiE9YX0sYil9fTtDS0VESVRPUi5vbihcImluc3RhbmNlRGVzdHJveWVkXCIsZnVuY3Rpb24oYSl7aWYoQ0tFRElUT1IudG9vbHMuaXNFbXB0eShDS0VESVRPUi5pbnN0YW5jZXMpKXtmb3IodmFyIGI7Yj1DS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wOyliLmhpZGUoKTtmb3IodmFyIGMgaW4geil6W2NdLnJlbW92ZSgpO3o9e319YT1hLmVkaXRvci5fLnN0b3JlZERpYWxvZ3M7Zm9yKHZhciBkIGluIGEpYVtkXS5kZXN0cm95KCl9KX0pKCk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmVkaXRvci5wcm90b3R5cGUse29wZW5EaWFsb2c6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9Q0tFRElUT1IuZGlhbG9nLl8uZGlhbG9nRGVmaW5pdGlvbnNbYV07bnVsbD09PUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3AmJk4odGhpcyk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZCljPVxudGhpcy5fLnN0b3JlZERpYWxvZ3N8fCh0aGlzLl8uc3RvcmVkRGlhbG9ncz17fSksYz1jW2FdfHwoY1thXT1uZXcgQ0tFRElUT1IuZGlhbG9nKHRoaXMsYSkpLGImJmIuY2FsbChjLGMpLGMuc2hvdygpO2Vsc2V7aWYoXCJmYWlsZWRcIj09ZCl0aHJvdyBPKHRoaXMpLEVycm9yKCdbQ0tFRElUT1IuZGlhbG9nLm9wZW5EaWFsb2ddIERpYWxvZyBcIicrYSsnXCIgZmFpbGVkIHdoZW4gbG9hZGluZyBkZWZpbml0aW9uLicpO1wic3RyaW5nXCI9PXR5cGVvZiBkJiZDS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChDS0VESVRPUi5nZXRVcmwoZCksZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCIhPXR5cGVvZiBDS0VESVRPUi5kaWFsb2cuXy5kaWFsb2dEZWZpbml0aW9uc1thXSYmKENLRURJVE9SLmRpYWxvZy5fLmRpYWxvZ0RlZmluaXRpb25zW2FdPVwiZmFpbGVkXCIpO3RoaXMub3BlbkRpYWxvZyhhLGIpfSx0aGlzLDAsMSl9Q0tFRElUT1Iuc2tpbi5sb2FkUGFydChcImRpYWxvZ1wiKTtyZXR1cm4gY319KX0pKCk7XG5DS0VESVRPUi5wbHVnaW5zLmFkZChcImRpYWxvZ1wiLHtyZXF1aXJlczpcImRpYWxvZ3VpXCIsaW5pdDpmdW5jdGlvbih4KXt4Lm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihBKXtBLmRhdGEuZGlhbG9nJiZ4Lm9wZW5EaWFsb2coQS5kYXRhLmRpYWxvZyl9LG51bGwsbnVsbCw5OTkpfX0pO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiYWJvdXRcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuYWRkQ29tbWFuZChcImFib3V0XCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJhYm91dFwiKSk7Yi5tb2Rlcz17d3lzaXd5ZzoxLHNvdXJjZToxfTtiLmNhblVuZG89ITE7Yi5yZWFkT25seT0xO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIkFib3V0XCIse2xhYmVsOmEubGFuZy5hYm91dC50aXRsZSxjb21tYW5kOlwiYWJvdXRcIix0b29sYmFyOlwiYWJvdXRcIn0pO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJhYm91dFwiLHRoaXMucGF0aCtcImRpYWxvZ3MvYWJvdXQuanNcIil9fSk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJhMTF5aGVscFwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGF2YWlsYWJsZUxhbmdzOnthZjoxLGFyOjEsYmc6MSxjYToxLGNzOjEsY3k6MSxkYToxLGRlOjEsXCJkZS1jaFwiOjEsZWw6MSxlbjoxLFwiZW4tZ2JcIjoxLGVvOjEsZXM6MSxldDoxLGV1OjEsZmE6MSxmaToxLGZvOjEsZnI6MSxcImZyLWNhXCI6MSxnbDoxLGd1OjEsaGU6MSxoaToxLGhyOjEsaHU6MSxpZDoxLGl0OjEsamE6MSxrbToxLGtvOjEsa3U6MSxsdDoxLGx2OjEsbWs6MSxtbjoxLG5iOjEsbmw6MSxubzoxLHBsOjEscHQ6MSxcInB0LWJyXCI6MSxybzoxLHJ1OjEsc2k6MSxzazoxLHNsOjEsc3E6MSxzcjoxLFwic3ItbGF0blwiOjEsc3Y6MSx0aDoxLHRyOjEsdHQ6MSx1ZzoxLHVrOjEsdmk6MSx6aDoxLFwiemgtY25cIjoxfSxpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7Yi5hZGRDb21tYW5kKFwiYTExeUhlbHBcIix7ZXhlYzpmdW5jdGlvbigpe3ZhciBhPWIubGFuZ0NvZGUsYT1jLmF2YWlsYWJsZUxhbmdzW2FdP1xuYTpjLmF2YWlsYWJsZUxhbmdzW2EucmVwbGFjZSgvLS4qLyxcIlwiKV0/YS5yZXBsYWNlKC8tLiovLFwiXCIpOlwiZW5cIjtDS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChDS0VESVRPUi5nZXRVcmwoYy5wYXRoK1wiZGlhbG9ncy9sYW5nL1wiK2ErXCIuanNcIiksZnVuY3Rpb24oKXtiLmxhbmcuYTExeWhlbHA9Yy5sYW5nRW50cmllc1thXTtiLm9wZW5EaWFsb2coXCJhMTF5SGVscFwiKX0pfSxtb2Rlczp7d3lzaXd5ZzoxLHNvdXJjZToxfSxyZWFkT25seToxLGNhblVuZG86ITF9KTtiLnNldEtleXN0cm9rZShDS0VESVRPUi5BTFQrNDgsXCJhMTF5SGVscFwiKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiYTExeUhlbHBcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2ExMXloZWxwLmpzXCIpO2Iub24oXCJhcmlhRWRpdG9ySGVscExhYmVsXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmxhYmVsPWIubGFuZy5jb21tb24uZWRpdG9ySGVscH0pfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBmKGMpe3ZhciBhPXRoaXMuYXR0O2M9YyYmYy5oYXNBdHRyaWJ1dGUoYSkmJmMuZ2V0QXR0cmlidXRlKGEpfHxcIlwiO3ZvaWQgMCE9PWMmJnRoaXMuc2V0VmFsdWUoYyl9ZnVuY3Rpb24gZygpe2Zvcih2YXIgYyxhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylpZihhcmd1bWVudHNbYV1pbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50KXtjPWFyZ3VtZW50c1thXTticmVha31pZihjKXt2YXIgYT10aGlzLmF0dCxiPXRoaXMuZ2V0VmFsdWUoKTtiP2Muc2V0QXR0cmlidXRlKGEsYik6Yy5yZW1vdmVBdHRyaWJ1dGUoYSxiKX19dmFyIGs9e2lkOjEsZGlyOjEsY2xhc3NlczoxLHN0eWxlczoxfTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImRpYWxvZ2FkdnRhYlwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGFsbG93ZWRDb250ZW50OmZ1bmN0aW9uKGMpe2N8fChjPWspO3ZhciBhPVtdO2MuaWQmJmEucHVzaChcImlkXCIpO2MuZGlyJiZhLnB1c2goXCJkaXJcIik7dmFyIGI9XG5cIlwiO2EubGVuZ3RoJiYoYis9XCJbXCIrYS5qb2luKFwiLFwiKStcIl1cIik7Yy5jbGFzc2VzJiYoYis9XCIoKilcIik7Yy5zdHlsZXMmJihiKz1cInsqfVwiKTtyZXR1cm4gYn0sY3JlYXRlQWR2YW5jZWRUYWI6ZnVuY3Rpb24oYyxhLGIpe2F8fChhPWspO3ZhciBkPWMubGFuZy5jb21tb24saD17aWQ6XCJhZHZhbmNlZFwiLGxhYmVsOmQuYWR2YW5jZWRUYWIsdGl0bGU6ZC5hZHZhbmNlZFRhYixlbGVtZW50czpbe3R5cGU6XCJ2Ym94XCIscGFkZGluZzoxLGNoaWxkcmVuOltdfV19LGU9W107aWYoYS5pZHx8YS5kaXIpYS5pZCYmZS5wdXNoKHtpZDpcImFkdklkXCIsYXR0OlwiaWRcIix0eXBlOlwidGV4dFwiLHJlcXVpcmVkQ29udGVudDpiP2IrXCJbaWRdXCI6bnVsbCxsYWJlbDpkLmlkLHNldHVwOmYsY29tbWl0Omd9KSxhLmRpciYmZS5wdXNoKHtpZDpcImFkdkxhbmdEaXJcIixhdHQ6XCJkaXJcIix0eXBlOlwic2VsZWN0XCIscmVxdWlyZWRDb250ZW50OmI/YitcIltkaXJdXCI6bnVsbCxsYWJlbDpkLmxhbmdEaXIsXCJkZWZhdWx0XCI6XCJcIixcbnN0eWxlOlwid2lkdGg6MTAwJVwiLGl0ZW1zOltbZC5ub3RTZXQsXCJcIl0sW2QubGFuZ0RpckxUUixcImx0clwiXSxbZC5sYW5nRGlyUlRMLFwicnRsXCJdXSxzZXR1cDpmLGNvbW1pdDpnfSksaC5lbGVtZW50c1swXS5jaGlsZHJlbi5wdXNoKHt0eXBlOlwiaGJveFwiLHdpZHRoczpbXCI1MCVcIixcIjUwJVwiXSxjaGlsZHJlbjpbXS5jb25jYXQoZSl9KTtpZihhLnN0eWxlc3x8YS5jbGFzc2VzKWU9W10sYS5zdHlsZXMmJmUucHVzaCh7aWQ6XCJhZHZTdHlsZXNcIixhdHQ6XCJzdHlsZVwiLHR5cGU6XCJ0ZXh0XCIscmVxdWlyZWRDb250ZW50OmI/YitcIntja2UteHl6fVwiOm51bGwsbGFiZWw6ZC5zdHlsZXMsXCJkZWZhdWx0XCI6XCJcIix2YWxpZGF0ZTpDS0VESVRPUi5kaWFsb2cudmFsaWRhdGUuaW5saW5lU3R5bGUoZC5pbnZhbGlkSW5saW5lU3R5bGUpLG9uQ2hhbmdlOmZ1bmN0aW9uKCl7fSxnZXRTdHlsZTpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZ2V0VmFsdWUoKS5tYXRjaChuZXcgUmVnRXhwKFwiKD86Xnw7KVxcXFxzKlwiK1xuYStcIlxcXFxzKjpcXFxccyooW147XSopXCIsXCJpXCIpKTtyZXR1cm4gYj9iWzFdOmN9LHVwZGF0ZVN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5nZXRWYWx1ZSgpLGU9Yy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsZCk7ZS5zZXRTdHlsZShhLGIpO2Q9Q0tFRElUT1IudG9vbHMubm9ybWFsaXplQ3NzVGV4dChlLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKTt0aGlzLnNldFZhbHVlKGQsMSl9LHNldHVwOmYsY29tbWl0Omd9KSxhLmNsYXNzZXMmJmUucHVzaCh7dHlwZTpcImhib3hcIix3aWR0aHM6W1wiNDUlXCIsXCI1NSVcIl0sY2hpbGRyZW46W3tpZDpcImFkdkNTU0NsYXNzZXNcIixhdHQ6XCJjbGFzc1wiLHR5cGU6XCJ0ZXh0XCIscmVxdWlyZWRDb250ZW50OmI/YitcIihja2UteHl6KVwiOm51bGwsbGFiZWw6ZC5jc3NDbGFzc2VzLFwiZGVmYXVsdFwiOlwiXCIsc2V0dXA6Zixjb21taXQ6Z31dfSksaC5lbGVtZW50c1swXS5jaGlsZHJlbi5wdXNoKHt0eXBlOlwiaGJveFwiLFxud2lkdGhzOltcIjUwJVwiLFwiNTAlXCJdLGNoaWxkcmVuOltdLmNvbmNhdChlKX0pO3JldHVybiBofX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImJhc2ljc3R5bGVzXCIse2luaXQ6ZnVuY3Rpb24oYyl7dmFyIGU9MCxkPWZ1bmN0aW9uKGcsZCxiLGEpe2lmKGEpe2E9bmV3IENLRURJVE9SLnN0eWxlKGEpO3ZhciBmPWhbYl07Zi51bnNoaWZ0KGEpO2MuYXR0YWNoU3R5bGVTdGF0ZUNoYW5nZShhLGZ1bmN0aW9uKGEpeyFjLnJlYWRPbmx5JiZjLmdldENvbW1hbmQoYikuc2V0U3RhdGUoYSl9KTtjLmFkZENvbW1hbmQoYixuZXcgQ0tFRElUT1Iuc3R5bGVDb21tYW5kKGEse2NvbnRlbnRGb3JtczpmfSkpO2MudWkuYWRkQnV0dG9uJiZjLnVpLmFkZEJ1dHRvbihnLHtsYWJlbDpkLGNvbW1hbmQ6Yix0b29sYmFyOlwiYmFzaWNzdHlsZXMsXCIrKGUrPTEwKX0pfX0saD17Ym9sZDpbXCJzdHJvbmdcIixcImJcIixbXCJzcGFuXCIsZnVuY3Rpb24oYSl7YT1hLnN0eWxlc1tcImZvbnQtd2VpZ2h0XCJdO3JldHVyblwiYm9sZFwiPT1hfHw3MDA8PSthfV1dLGl0YWxpYzpbXCJlbVwiLFwiaVwiLFtcInNwYW5cIixmdW5jdGlvbihhKXtyZXR1cm5cIml0YWxpY1wiPT1cbmEuc3R5bGVzW1wiZm9udC1zdHlsZVwiXX1dXSx1bmRlcmxpbmU6W1widVwiLFtcInNwYW5cIixmdW5jdGlvbihhKXtyZXR1cm5cInVuZGVybGluZVwiPT1hLnN0eWxlc1tcInRleHQtZGVjb3JhdGlvblwiXX1dXSxzdHJpa2U6W1wic1wiLFwic3RyaWtlXCIsW1wic3BhblwiLGZ1bmN0aW9uKGEpe3JldHVyblwibGluZS10aHJvdWdoXCI9PWEuc3R5bGVzW1widGV4dC1kZWNvcmF0aW9uXCJdfV1dLHN1YnNjcmlwdDpbXCJzdWJcIl0sc3VwZXJzY3JpcHQ6W1wic3VwXCJdfSxiPWMuY29uZmlnLGE9Yy5sYW5nLmJhc2ljc3R5bGVzO2QoXCJCb2xkXCIsYS5ib2xkLFwiYm9sZFwiLGIuY29yZVN0eWxlc19ib2xkKTtkKFwiSXRhbGljXCIsYS5pdGFsaWMsXCJpdGFsaWNcIixiLmNvcmVTdHlsZXNfaXRhbGljKTtkKFwiVW5kZXJsaW5lXCIsYS51bmRlcmxpbmUsXCJ1bmRlcmxpbmVcIixiLmNvcmVTdHlsZXNfdW5kZXJsaW5lKTtkKFwiU3RyaWtlXCIsYS5zdHJpa2UsXCJzdHJpa2VcIixiLmNvcmVTdHlsZXNfc3RyaWtlKTtkKFwiU3Vic2NyaXB0XCIsYS5zdWJzY3JpcHQsXG5cInN1YnNjcmlwdFwiLGIuY29yZVN0eWxlc19zdWJzY3JpcHQpO2QoXCJTdXBlcnNjcmlwdFwiLGEuc3VwZXJzY3JpcHQsXCJzdXBlcnNjcmlwdFwiLGIuY29yZVN0eWxlc19zdXBlcnNjcmlwdCk7Yy5zZXRLZXlzdHJva2UoW1tDS0VESVRPUi5DVFJMKzY2LFwiYm9sZFwiXSxbQ0tFRElUT1IuQ1RSTCs3MyxcIml0YWxpY1wiXSxbQ0tFRElUT1IuQ1RSTCs4NSxcInVuZGVybGluZVwiXV0pfX0pO0NLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX2JvbGQ9e2VsZW1lbnQ6XCJzdHJvbmdcIixvdmVycmlkZXM6XCJiXCJ9O0NLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX2l0YWxpYz17ZWxlbWVudDpcImVtXCIsb3ZlcnJpZGVzOlwiaVwifTtDS0VESVRPUi5jb25maWcuY29yZVN0eWxlc191bmRlcmxpbmU9e2VsZW1lbnQ6XCJ1XCJ9O0NLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX3N0cmlrZT17ZWxlbWVudDpcInNcIixvdmVycmlkZXM6XCJzdHJpa2VcIn07Q0tFRElUT1IuY29uZmlnLmNvcmVTdHlsZXNfc3Vic2NyaXB0PXtlbGVtZW50Olwic3ViXCJ9O1xuQ0tFRElUT1IuY29uZmlnLmNvcmVTdHlsZXNfc3VwZXJzY3JpcHQ9e2VsZW1lbnQ6XCJzdXBcIn07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcShhLGYsZCxiKXtpZighYS5pc1JlYWRPbmx5KCkmJiFhLmVxdWFscyhkLmVkaXRhYmxlKCkpKXtDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoYixhLFwiYmlkaV9wcm9jZXNzZWRcIiwxKTtiPWE7Zm9yKHZhciBjPWQuZWRpdGFibGUoKTsoYj1iLmdldFBhcmVudCgpKSYmIWIuZXF1YWxzKGMpOylpZihiLmdldEN1c3RvbURhdGEoXCJiaWRpX3Byb2Nlc3NlZFwiKSl7YS5yZW1vdmVTdHlsZShcImRpcmVjdGlvblwiKTthLnJlbW92ZUF0dHJpYnV0ZShcImRpclwiKTtyZXR1cm59Yj1cInVzZUNvbXB1dGVkU3RhdGVcImluIGQuY29uZmlnP2QuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGU6MTsoYj9hLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIik6YS5nZXRTdHlsZShcImRpcmVjdGlvblwiKXx8YS5oYXNBdHRyaWJ1dGUoXCJkaXJcIikpIT1mJiYoYS5yZW1vdmVTdHlsZShcImRpcmVjdGlvblwiKSxiPyhhLnJlbW92ZUF0dHJpYnV0ZShcImRpclwiKSxmIT1hLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIikmJlxuYS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixmKSk6YS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixmKSxkLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCkpfX1mdW5jdGlvbiB2KGEsZixkKXt2YXIgYj1hLmdldENvbW1vbkFuY2VzdG9yKCExLCEwKTthPWEuY2xvbmUoKTthLmVubGFyZ2UoZD09Q0tFRElUT1IuRU5URVJfQlI/Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM6Q0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUyk7aWYoYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsQ0tFRElUT1IuU1RBUlQpJiZhLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoYixDS0VESVRPUi5FTkQpKXtmb3IodmFyIGM7YiYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihjPWIuZ2V0UGFyZW50KCkpJiYxPT1jLmdldENoaWxkQ291bnQoKSYmIShiLmdldE5hbWUoKWluIGYpOyliPWM7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmdldE5hbWUoKWluIGYmJmJ9fWZ1bmN0aW9uIHAoYSl7cmV0dXJue2NvbnRleHQ6XCJwXCIsXG5hbGxvd2VkQ29udGVudDp7XCJoMSBoMiBoMyBoNCBoNSBoNiB0YWJsZSB1bCBvbCBibG9ja3F1b3RlIGRpdiB0ciBwIGRpdiBsaSB0ZFwiOntwcm9wZXJ0aWVzT25seTohMCxhdHRyaWJ1dGVzOlwiZGlyXCJ9fSxyZXF1aXJlZENvbnRlbnQ6XCJwW2Rpcl1cIixyZWZyZXNoOmZ1bmN0aW9uKGEsZCl7dmFyIGI9YS5jb25maWcudXNlQ29tcHV0ZWRTdGF0ZSxjLGI9dm9pZCAwPT09Ynx8YjtpZighYil7Yz1kLmxhc3RFbGVtZW50O2Zvcih2YXIgaD1hLmVkaXRhYmxlKCk7YyYmIShjLmdldE5hbWUoKWluIHV8fGMuZXF1YWxzKGgpKTspe3ZhciBlPWMuZ2V0UGFyZW50KCk7aWYoIWUpYnJlYWs7Yz1lfX1jPWN8fGQuYmxvY2t8fGQuYmxvY2tMaW1pdDtjLmVxdWFscyhhLmVkaXRhYmxlKCkpJiYoaD1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdLmdldEVuY2xvc2VkTm9kZSgpKSYmaC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihjPWgpO2MmJihiPWI/Yy5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpOlxuYy5nZXRTdHlsZShcImRpcmVjdGlvblwiKXx8Yy5nZXRBdHRyaWJ1dGUoXCJkaXJcIiksYS5nZXRDb21tYW5kKFwiYmlkaXJ0bFwiKS5zZXRTdGF0ZShcInJ0bFwiPT1iP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRiksYS5nZXRDb21tYW5kKFwiYmlkaWx0clwiKS5zZXRTdGF0ZShcImx0clwiPT1iP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRikpO2I9KGQuYmxvY2t8fGQuYmxvY2tMaW1pdHx8YS5lZGl0YWJsZSgpKS5nZXREaXJlY3Rpb24oMSk7YiE9KGEuXy5zZWxEaXJ8fGEubGFuZy5kaXIpJiYoYS5fLnNlbERpcj1iLGEuZmlyZShcImNvbnRlbnREaXJDaGFuZ2VkXCIsYikpfSxleGVjOmZ1bmN0aW9uKGYpe3ZhciBkPWYuZ2V0U2VsZWN0aW9uKCksYj1mLmNvbmZpZy5lbnRlck1vZGUsYz1kLmdldFJhbmdlcygpO2lmKGMmJmMubGVuZ3RoKXtmb3IodmFyIGg9e30sZT1kLmNyZWF0ZUJvb2ttYXJrcygpLGM9Yy5jcmVhdGVJdGVyYXRvcigpLGcsXG5sPTA7Zz1jLmdldE5leHRSYW5nZSgxKTspe3ZhciBrPWcuZ2V0RW5jbG9zZWROb2RlKCk7ayYmKCFrfHxrLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmay5nZXROYW1lKClpbiByKXx8KGs9dihnLHQsYikpO2smJnEoayxhLGYsaCk7dmFyIG09bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZyksbj1lW2xdLnN0YXJ0Tm9kZSxwPWVbbCsrXS5lbmROb2RlO20uZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3ZhciBjPWI9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIixkO2lmKGQ9KGE/YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ6ITEpJiZhLmdldE5hbWUoKWluIHQpe2lmKGM9YS5pcyhjKSljPShjPWEuZ2V0UGFyZW50KCkpP2MudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UOiExO2Q9IShjJiZhLmdldFBhcmVudCgpLmlzKFwiYmxvY2txdW90ZVwiKSl9cmV0dXJuISEoZCYmYS5nZXRQb3NpdGlvbihuKSZDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkcmJihhLmdldFBvc2l0aW9uKHApJlxuQ0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HK0NLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TKT09Q0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HKX07Zm9yKDtrPW0ubmV4dCgpOylxKGssYSxmLGgpO2c9Zy5jcmVhdGVJdGVyYXRvcigpO2ZvcihnLmVubGFyZ2VCcj1iIT1DS0VESVRPUi5FTlRFUl9CUjtrPWcuZ2V0TmV4dFBhcmFncmFwaChiPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpOylxKGssYSxmLGgpfUNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhoKTtmLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7ZC5zZWxlY3RCb29rbWFya3MoZSk7Zi5mb2N1cygpfX19fWZ1bmN0aW9uIHcoYSl7dmFyIGY9YT09bC5zZXRBdHRyaWJ1dGUsZD1hPT1sLnJlbW92ZUF0dHJpYnV0ZSxiPS9cXGJkaXJlY3Rpb25cXHMqOlxccyooLio/KVxccyooOj8kfDspLztyZXR1cm4gZnVuY3Rpb24oYyxoKXtpZighdGhpcy5pc1JlYWRPbmx5KCkpe3ZhciBlO2lmKGU9Yz09KGZ8fGQ/XG5cImRpclwiOlwiZGlyZWN0aW9uXCIpfHxcInN0eWxlXCI9PWMmJihkfHxiLnRlc3QoaCkpKXthOntlPXRoaXM7Zm9yKHZhciBnPWUuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCkuZ2V0UGFyZW50KCk7ZTspe2lmKGUuZXF1YWxzKGcpKXtlPSExO2JyZWFrIGF9ZT1lLmdldFBhcmVudCgpfWU9ITB9ZT0hZX1pZihlJiYoZT10aGlzLmdldERpcmVjdGlvbigxKSxnPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUhPXRoaXMuZ2V0RGlyZWN0aW9uKDEpKSlyZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpLmZpcmUoXCJkaXJDaGFuZ2VkXCIsdGhpcyksZ31yZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciB0PXt0YWJsZToxLHVsOjEsb2w6MSxibG9ja3F1b3RlOjEsZGl2OjF9LHI9e30sdT17fTtDS0VESVRPUi50b29scy5leHRlbmQocix0LHt0cjoxLHA6MSxkaXY6MSxsaToxfSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHUscix7dGQ6MX0pO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiYmlkaVwiLHtpbml0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGYoYixcbmMsZCxlLGYpe2EuYWRkQ29tbWFuZChkLG5ldyBDS0VESVRPUi5jb21tYW5kKGEsZSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihiLHtsYWJlbDpjLGNvbW1hbmQ6ZCx0b29sYmFyOlwiYmlkaSxcIitmfSl9aWYoIWEuYmxvY2tsZXNzKXt2YXIgZD1hLmxhbmcuYmlkaTtmKFwiQmlkaUx0clwiLGQubHRyLFwiYmlkaWx0clwiLHAoXCJsdHJcIiksMTApO2YoXCJCaWRpUnRsXCIsZC5ydGwsXCJiaWRpcnRsXCIscChcInJ0bFwiKSwyMCk7YS5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe2EuZG9jdW1lbnQub24oXCJkaXJDaGFuZ2VkXCIsZnVuY3Rpb24oYil7YS5maXJlKFwiZGlyQ2hhbmdlZFwiLHtub2RlOmIuZGF0YSxkaXI6Yi5kYXRhLmdldERpcmVjdGlvbigxKX0pfSl9KTthLm9uKFwiY29udGVudERpckNoYW5nZWRcIixmdW5jdGlvbihiKXtiPShhLmxhbmcuZGlyIT1iLmRhdGE/XCJhZGRcIjpcInJlbW92ZVwiKStcIkNsYXNzXCI7dmFyIGM9YS51aS5zcGFjZShhLmNvbmZpZy50b29sYmFyTG9jYXRpb24pO2lmKGMpY1tiXShcImNrZV9taXhlZF9kaXJfY29udGVudFwiKX0pfX19KTtcbmZvcih2YXIgbD1DS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUsbj1bXCJzZXRTdHlsZVwiLFwicmVtb3ZlU3R5bGVcIixcInNldEF0dHJpYnV0ZVwiLFwicmVtb3ZlQXR0cmlidXRlXCJdLG09MDttPG4ubGVuZ3RoO20rKylsW25bbV1dPUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGxbblttXV0sdyl9KSgpOyhmdW5jdGlvbigpe3ZhciBtPXtleGVjOmZ1bmN0aW9uKGcpe3ZhciBhPWcuZ2V0Q29tbWFuZChcImJsb2NrcXVvdGVcIikuc3RhdGUsaz1nLmdldFNlbGVjdGlvbigpLGM9ayYmay5nZXRSYW5nZXMoKVswXTtpZihjKXt2YXIgaD1rLmNyZWF0ZUJvb2ttYXJrcygpO2lmKENLRURJVE9SLmVudi5pZSl7dmFyIGU9aFswXS5zdGFydE5vZGUsYj1oWzBdLmVuZE5vZGUsZDtpZihlJiZcImJsb2NrcXVvdGVcIj09ZS5nZXRQYXJlbnQoKS5nZXROYW1lKCkpZm9yKGQ9ZTtkPWQuZ2V0TmV4dCgpOylpZihkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5pc0Jsb2NrQm91bmRhcnkoKSl7ZS5tb3ZlKGQsITApO2JyZWFrfWlmKGImJlwiYmxvY2txdW90ZVwiPT1iLmdldFBhcmVudCgpLmdldE5hbWUoKSlmb3IoZD1iO2Q9ZC5nZXRQcmV2aW91cygpOylpZihkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5pc0Jsb2NrQm91bmRhcnkoKSl7Yi5tb3ZlKGQpO2JyZWFrfX12YXIgZj1jLmNyZWF0ZUl0ZXJhdG9yKCk7XG5mLmVubGFyZ2VCcj1nLmNvbmZpZy5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSO2lmKGE9PUNLRURJVE9SLlRSSVNUQVRFX09GRil7Zm9yKGU9W107YT1mLmdldE5leHRQYXJhZ3JhcGgoKTspZS5wdXNoKGEpOzE+ZS5sZW5ndGgmJihhPWcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChnLmNvbmZpZy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIiksYj1oLnNoaWZ0KCksYy5pbnNlcnROb2RlKGEpLGEuYXBwZW5kKG5ldyBDS0VESVRPUi5kb20udGV4dChcIu+7v1wiLGcuZG9jdW1lbnQpKSxjLm1vdmVUb0Jvb2ttYXJrKGIpLGMuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLGMuY29sbGFwc2UoITApLGI9Yy5jcmVhdGVCb29rbWFyaygpLGUucHVzaChhKSxoLnVuc2hpZnQoYikpO2Q9ZVswXS5nZXRQYXJlbnQoKTtjPVtdO2ZvcihiPTA7YjxlLmxlbmd0aDtiKyspYT1lW2JdLGQ9ZC5nZXRDb21tb25BbmNlc3RvcihhLmdldFBhcmVudCgpKTtmb3IoYT17dGFibGU6MSx0Ym9keToxLFxudHI6MSxvbDoxLHVsOjF9O2FbZC5nZXROYW1lKCldOylkPWQuZ2V0UGFyZW50KCk7Zm9yKGI9bnVsbDswPGUubGVuZ3RoOyl7Zm9yKGE9ZS5zaGlmdCgpOyFhLmdldFBhcmVudCgpLmVxdWFscyhkKTspYT1hLmdldFBhcmVudCgpO2EuZXF1YWxzKGIpfHxjLnB1c2goYSk7Yj1hfWZvcig7MDxjLmxlbmd0aDspaWYoYT1jLnNoaWZ0KCksXCJibG9ja3F1b3RlXCI9PWEuZ2V0TmFtZSgpKXtmb3IoYj1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoZy5kb2N1bWVudCk7YS5nZXRGaXJzdCgpOyliLmFwcGVuZChhLmdldEZpcnN0KCkucmVtb3ZlKCkpLGUucHVzaChiLmdldExhc3QoKSk7Yi5yZXBsYWNlKGEpfWVsc2UgZS5wdXNoKGEpO2M9Zy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYmxvY2txdW90ZVwiKTtmb3IoYy5pbnNlcnRCZWZvcmUoZVswXSk7MDxlLmxlbmd0aDspYT1lLnNoaWZ0KCksYy5hcHBlbmQoYSl9ZWxzZSBpZihhPT1DS0VESVRPUi5UUklTVEFURV9PTil7Yj1bXTtcbmZvcihkPXt9O2E9Zi5nZXROZXh0UGFyYWdyYXBoKCk7KXtmb3IoZT1jPW51bGw7YS5nZXRQYXJlbnQoKTspe2lmKFwiYmxvY2txdW90ZVwiPT1hLmdldFBhcmVudCgpLmdldE5hbWUoKSl7Yz1hLmdldFBhcmVudCgpO2U9YTticmVha31hPWEuZ2V0UGFyZW50KCl9YyYmZSYmIWUuZ2V0Q3VzdG9tRGF0YShcImJsb2NrcXVvdGVfbW92ZW91dFwiKSYmKGIucHVzaChlKSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoZCxlLFwiYmxvY2txdW90ZV9tb3Zlb3V0XCIsITApKX1DS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoZCk7YT1bXTtlPVtdO2ZvcihkPXt9OzA8Yi5sZW5ndGg7KWY9Yi5zaGlmdCgpLGM9Zi5nZXRQYXJlbnQoKSxmLmdldFByZXZpb3VzKCk/Zi5nZXROZXh0KCk/KGYuYnJlYWtQYXJlbnQoZi5nZXRQYXJlbnQoKSksZS5wdXNoKGYuZ2V0TmV4dCgpKSk6Zi5yZW1vdmUoKS5pbnNlcnRBZnRlcihjKTpmLnJlbW92ZSgpLmluc2VydEJlZm9yZShjKSxjLmdldEN1c3RvbURhdGEoXCJibG9ja3F1b3RlX3Byb2Nlc3NlZFwiKXx8XG4oZS5wdXNoKGMpLENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihkLGMsXCJibG9ja3F1b3RlX3Byb2Nlc3NlZFwiLCEwKSksYS5wdXNoKGYpO0NLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhkKTtmb3IoYj1lLmxlbmd0aC0xOzA8PWI7Yi0tKXtjPWVbYl07YTp7ZD1jO2Zvcih2YXIgZj0wLG09ZC5nZXRDaGlsZENvdW50KCksbD12b2lkIDA7ZjxtJiYobD1kLmdldENoaWxkKGYpKTtmKyspaWYobC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmwuaXNCbG9ja0JvdW5kYXJ5KCkpe2Q9ITE7YnJlYWsgYX1kPSEwfWQmJmMucmVtb3ZlKCl9aWYoZy5jb25maWcuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUilmb3IoYz0hMDthLmxlbmd0aDspaWYoZj1hLnNoaWZ0KCksXCJkaXZcIj09Zi5nZXROYW1lKCkpe2I9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KGcuZG9jdW1lbnQpOyFjfHwhZi5nZXRQcmV2aW91cygpfHxmLmdldFByZXZpb3VzKCkudHlwZT09XG5DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmYuZ2V0UHJldmlvdXMoKS5pc0Jsb2NrQm91bmRhcnkoKXx8Yi5hcHBlbmQoZy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO2ZvcihjPWYuZ2V0TmV4dCgpJiYhKGYuZ2V0TmV4dCgpLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZi5nZXROZXh0KCkuaXNCbG9ja0JvdW5kYXJ5KCkpO2YuZ2V0Rmlyc3QoKTspZi5nZXRGaXJzdCgpLnJlbW92ZSgpLmFwcGVuZFRvKGIpO2MmJmIuYXBwZW5kKGcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtiLnJlcGxhY2UoZik7Yz0hMX19ay5zZWxlY3RCb29rbWFya3MoaCk7Zy5mb2N1cygpfX0scmVmcmVzaDpmdW5jdGlvbihnLGEpe3RoaXMuc2V0U3RhdGUoZy5lbGVtZW50UGF0aChhLmJsb2NrfHxhLmJsb2NrTGltaXQpLmNvbnRhaW5zKFwiYmxvY2txdW90ZVwiLDEpP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRil9LGNvbnRleHQ6XCJibG9ja3F1b3RlXCIsYWxsb3dlZENvbnRlbnQ6XCJibG9ja3F1b3RlXCIsXG5yZXF1aXJlZENvbnRlbnQ6XCJibG9ja3F1b3RlXCJ9O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiYmxvY2txdW90ZVwiLHtpbml0OmZ1bmN0aW9uKGcpe2cuYmxvY2tsZXNzfHwoZy5hZGRDb21tYW5kKFwiYmxvY2txdW90ZVwiLG0pLGcudWkuYWRkQnV0dG9uJiZnLnVpLmFkZEJ1dHRvbihcIkJsb2NrcXVvdGVcIix7bGFiZWw6Zy5sYW5nLmJsb2NrcXVvdGUudG9vbGJhcixjb21tYW5kOlwiYmxvY2txdW90ZVwiLHRvb2xiYXI6XCJibG9ja3MsMTBcIn0pKX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihiLGEsYyl7YS50eXBlfHwoYS50eXBlPVwiYXV0b1wiKTtpZihjJiYhMT09PWIuZmlyZShcImJlZm9yZVBhc3RlXCIsYSl8fCFhLmRhdGFWYWx1ZSYmYS5kYXRhVHJhbnNmZXIuaXNFbXB0eSgpKXJldHVybiExO2EuZGF0YVZhbHVlfHwoYS5kYXRhVmFsdWU9XCJcIik7aWYoQ0tFRElUT1IuZW52LmdlY2tvJiZcImRyb3BcIj09YS5tZXRob2QmJmIudG9vbGJveCliLm9uY2UoXCJhZnRlclBhc3RlXCIsZnVuY3Rpb24oKXtiLnRvb2xib3guZm9jdXMoKX0pO3JldHVybiBiLmZpcmUoXCJwYXN0ZVwiLGEpfWZ1bmN0aW9uIHkoYil7ZnVuY3Rpb24gYSgpe3ZhciBhPWIuZWRpdGFibGUoKTtpZihDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbUNvcHlDdXRTdXBwb3J0ZWQpe3ZhciBkPWZ1bmN0aW9uKGEpe2IucmVhZE9ubHkmJlwiY3V0XCI9PWEubmFtZXx8bi5pbml0UGFzdGVEYXRhVHJhbnNmZXIoYSxiKTthLmRhdGEucHJldmVudERlZmF1bHQoKX07YS5vbihcImNvcHlcIixcbmQpO2Eub24oXCJjdXRcIixkKTthLm9uKFwiY3V0XCIsZnVuY3Rpb24oKXtiLnJlYWRPbmx5fHxiLmV4dHJhY3RTZWxlY3RlZEh0bWwoKX0sbnVsbCxudWxsLDk5OSl9YS5vbihuLm1haW5QYXN0ZUV2ZW50LGZ1bmN0aW9uKGIpe1wiYmVmb3JlcGFzdGVcIj09bi5tYWluUGFzdGVFdmVudCYmcHx8ayhiKX0pO1wiYmVmb3JlcGFzdGVcIj09bi5tYWluUGFzdGVFdmVudCYmKGEub24oXCJwYXN0ZVwiLGZ1bmN0aW9uKGEpe3Z8fChlKCksYS5kYXRhLnByZXZlbnREZWZhdWx0KCksayhhKSxmKFwicGFzdGVcIil8fGIub3BlbkRpYWxvZyhcInBhc3RlXCIpKX0pLGEub24oXCJjb250ZXh0bWVudVwiLGcsbnVsbCxudWxsLDApLGEub24oXCJiZWZvcmVwYXN0ZVwiLGZ1bmN0aW9uKGIpeyFiLmRhdGF8fGIuZGF0YS4kLmN0cmxLZXl8fGIuZGF0YS4kLnNoaWZ0S2V5fHxnKCl9LG51bGwsbnVsbCwwKSk7YS5vbihcImJlZm9yZWN1dFwiLGZ1bmN0aW9uKCl7IXAmJmgoYil9KTt2YXIgYzthLmF0dGFjaExpc3RlbmVyKENLRURJVE9SLmVudi5pZT9cbmE6Yi5kb2N1bWVudC5nZXREb2N1bWVudEVsZW1lbnQoKSxcIm1vdXNldXBcIixmdW5jdGlvbigpe2M9c2V0VGltZW91dChmdW5jdGlvbigpe3QoKX0sMCl9KTtiLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGMpfSk7YS5vbihcImtleXVwXCIsdCl9ZnVuY3Rpb24gYyhhKXtyZXR1cm57dHlwZTphLGNhblVuZG86XCJjdXRcIj09YSxzdGFydERpc2FibGVkOiEwLGV4ZWM6ZnVuY3Rpb24oKXtcImN1dFwiPT10aGlzLnR5cGUmJmgoKTt2YXIgYTt2YXIgZD10aGlzLnR5cGU7aWYoQ0tFRElUT1IuZW52LmllKWE9ZihkKTtlbHNlIHRyeXthPWIuZG9jdW1lbnQuJC5leGVjQ29tbWFuZChkLCExLG51bGwpfWNhdGNoKGMpe2E9ITF9YXx8Yi5zaG93Tm90aWZpY2F0aW9uKGIubGFuZy5jbGlwYm9hcmRbdGhpcy50eXBlK1wiRXJyb3JcIl0pO3JldHVybiBhfX19ZnVuY3Rpb24gZCgpe3JldHVybntjYW5VbmRvOiExLGFzeW5jOiEwLGV4ZWM6ZnVuY3Rpb24oYixhKXt2YXIgZD1mdW5jdGlvbihhLFxuZCl7YSYmcihiLGEsISFkKTtiLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJwYXN0ZVwiLGNvbW1hbmQ6YyxyZXR1cm5WYWx1ZTohIWF9KX0sYz10aGlzO1wic3RyaW5nXCI9PXR5cGVvZiBhP2Qoe2RhdGFWYWx1ZTphLG1ldGhvZDpcInBhc3RlXCIsZGF0YVRyYW5zZmVyOm4uaW5pdFBhc3RlRGF0YVRyYW5zZmVyKCl9LDEpOmIuZ2V0Q2xpcGJvYXJkRGF0YShkKX19fWZ1bmN0aW9uIGUoKXt2PTE7c2V0VGltZW91dChmdW5jdGlvbigpe3Y9MH0sMTAwKX1mdW5jdGlvbiBnKCl7cD0xO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtwPTB9LDEwKX1mdW5jdGlvbiBmKGEpe3ZhciBkPWIuZG9jdW1lbnQsYz1kLmdldEJvZHkoKSxlPSExLGY9ZnVuY3Rpb24oKXtlPSEwfTtjLm9uKGEsZik7NzxDS0VESVRPUi5lbnYudmVyc2lvbj9kLiQuZXhlY0NvbW1hbmQoYSk6ZC4kLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLmV4ZWNDb21tYW5kKGEpO2MucmVtb3ZlTGlzdGVuZXIoYSxmKTtyZXR1cm4gZX1cbmZ1bmN0aW9uIGgoKXtpZihDS0VESVRPUi5lbnYuaWUmJiFDS0VESVRPUi5lbnYucXVpcmtzKXt2YXIgYT1iLmdldFNlbGVjdGlvbigpLGQsYyxlO2EuZ2V0VHlwZSgpPT1DS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVCYmKGQ9YS5nZXRTZWxlY3RlZEVsZW1lbnQoKSkmJihjPWEuZ2V0UmFuZ2VzKClbMF0sZT1iLmRvY3VtZW50LmNyZWF0ZVRleHQoXCJcIiksZS5pbnNlcnRCZWZvcmUoZCksYy5zZXRTdGFydEJlZm9yZShlKSxjLnNldEVuZEFmdGVyKGQpLGEuc2VsZWN0UmFuZ2VzKFtjXSksc2V0VGltZW91dChmdW5jdGlvbigpe2QuZ2V0UGFyZW50KCkmJihlLnJlbW92ZSgpLGEuc2VsZWN0RWxlbWVudChkKSl9LDApKX19ZnVuY3Rpb24gbChhLGQpe3ZhciBjPWIuZG9jdW1lbnQsZT1iLmVkaXRhYmxlKCksZj1mdW5jdGlvbihiKXtiLmNhbmNlbCgpfSxxO2lmKCFjLmdldEJ5SWQoXCJja2VfcGFzdGViaW5cIikpe3ZhciBnPWIuZ2V0U2VsZWN0aW9uKCksaD1nLmNyZWF0ZUJvb2ttYXJrcygpO1xuQ0tFRElUT1IuZW52LmllJiZnLnJvb3QuZmlyZShcInNlbGVjdGlvbmNoYW5nZVwiKTt2YXIgbT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoIUNLRURJVE9SLmVudi53ZWJraXQmJiFlLmlzKFwiYm9keVwiKXx8Q0tFRElUT1IuZW52LmllP1wiZGl2XCI6XCJib2R5XCIsYyk7bS5zZXRBdHRyaWJ1dGVzKHtpZDpcImNrZV9wYXN0ZWJpblwiLFwiZGF0YS1ja2UtdGVtcFwiOlwiMVwifSk7dmFyIGs9MCxjPWMuZ2V0V2luZG93KCk7Q0tFRElUT1IuZW52LndlYmtpdD8oZS5hcHBlbmQobSksbS5hZGRDbGFzcyhcImNrZV9lZGl0YWJsZVwiKSxlLmlzKFwiYm9keVwiKXx8KGs9XCJzdGF0aWNcIiE9ZS5nZXRDb21wdXRlZFN0eWxlKFwicG9zaXRpb25cIik/ZTpDS0VESVRPUi5kb20uZWxlbWVudC5nZXQoZS4kLm9mZnNldFBhcmVudCksaz1rLmdldERvY3VtZW50UG9zaXRpb24oKS55KSk6ZS5nZXRBc2NlbmRhbnQoQ0tFRElUT1IuZW52LmllP1wiYm9keVwiOlwiaHRtbFwiLDEpLmFwcGVuZChtKTttLnNldFN0eWxlcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLFxudG9wOmMuZ2V0U2Nyb2xsUG9zaXRpb24oKS55LWsrMTArXCJweFwiLHdpZHRoOlwiMXB4XCIsaGVpZ2h0Ok1hdGgubWF4KDEsYy5nZXRWaWV3UGFuZVNpemUoKS5oZWlnaHQtMjApK1wicHhcIixvdmVyZmxvdzpcImhpZGRlblwiLG1hcmdpbjowLHBhZGRpbmc6MH0pO0NLRURJVE9SLmVudi5zYWZhcmkmJm0uc2V0U3R5bGVzKENLRURJVE9SLnRvb2xzLmNzc1ZlbmRvclByZWZpeChcInVzZXItc2VsZWN0XCIsXCJ0ZXh0XCIpKTsoaz1tLmdldFBhcmVudCgpLmlzUmVhZE9ubHkoKSk/KG0uc2V0T3BhY2l0eSgwKSxtLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCEwKSk6bS5zZXRTdHlsZShcImx0clwiPT1iLmNvbmZpZy5jb250ZW50c0xhbmdEaXJlY3Rpb24/XCJsZWZ0XCI6XCJyaWdodFwiLFwiLTEwMDBweFwiKTtiLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZixudWxsLG51bGwsMCk7aWYoQ0tFRElUT1IuZW52LndlYmtpdHx8Q0tFRElUT1IuZW52LmdlY2tvKXE9ZS5vbmNlKFwiYmx1clwiLGYsbnVsbCxudWxsLC0xMDApO1xuayYmbS5mb2N1cygpO2s9bmV3IENLRURJVE9SLmRvbS5yYW5nZShtKTtrLnNlbGVjdE5vZGVDb250ZW50cyhtKTt2YXIgdD1rLnNlbGVjdCgpO0NLRURJVE9SLmVudi5pZSYmKHE9ZS5vbmNlKFwiYmx1clwiLGZ1bmN0aW9uKCl7Yi5sb2NrU2VsZWN0aW9uKHQpfSkpO3ZhciBsPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLmdldFNjcm9sbFBvc2l0aW9uKCkueTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Q0tFRElUT1IuZW52LndlYmtpdCYmKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKS4kLnNjcm9sbFRvcD1sKTtxJiZxLnJlbW92ZUxpc3RlbmVyKCk7Q0tFRElUT1IuZW52LmllJiZlLmZvY3VzKCk7Zy5zZWxlY3RCb29rbWFya3MoaCk7bS5yZW1vdmUoKTt2YXIgYTtDS0VESVRPUi5lbnYud2Via2l0JiYoYT1tLmdldEZpcnN0KCkpJiZhLmlzJiZhLmhhc0NsYXNzKFwiQXBwbGUtc3R5bGUtc3BhblwiKSYmKG09YSk7Yi5yZW1vdmVMaXN0ZW5lcihcInNlbGVjdGlvbkNoYW5nZVwiLGYpO1xuZChtLmdldEh0bWwoKSl9LDApfX1mdW5jdGlvbiB6KCl7aWYoXCJwYXN0ZVwiPT1uLm1haW5QYXN0ZUV2ZW50KXJldHVybiBiLmZpcmUoXCJiZWZvcmVQYXN0ZVwiLHt0eXBlOlwiYXV0b1wiLG1ldGhvZDpcInBhc3RlXCJ9KSwhMTtiLmZvY3VzKCk7ZSgpO3ZhciBhPWIuZm9jdXNNYW5hZ2VyO2EubG9jaygpO2lmKGIuZWRpdGFibGUoKS5maXJlKG4ubWFpblBhc3RlRXZlbnQpJiYhZihcInBhc3RlXCIpKXJldHVybiBhLnVubG9jaygpLCExO2EudW5sb2NrKCk7cmV0dXJuITB9ZnVuY3Rpb24gcShhKXtpZihcInd5c2l3eWdcIj09Yi5tb2RlKXN3aXRjaChhLmRhdGEua2V5Q29kZSl7Y2FzZSBDS0VESVRPUi5DVFJMKzg2OmNhc2UgQ0tFRElUT1IuU0hJRlQrNDU6YT1iLmVkaXRhYmxlKCk7ZSgpO1wicGFzdGVcIj09bi5tYWluUGFzdGVFdmVudCYmYS5maXJlKFwiYmVmb3JlcGFzdGVcIik7YnJlYWs7Y2FzZSBDS0VESVRPUi5DVFJMKzg4OmNhc2UgQ0tFRElUT1IuU0hJRlQrNDY6Yi5maXJlKFwic2F2ZVNuYXBzaG90XCIpLFxuc2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sNTApfX1mdW5jdGlvbiBrKGEpe3ZhciBkPXt0eXBlOlwiYXV0b1wiLG1ldGhvZDpcInBhc3RlXCIsZGF0YVRyYW5zZmVyOm4uaW5pdFBhc3RlRGF0YVRyYW5zZmVyKGEpfTtkLmRhdGFUcmFuc2Zlci5jYWNoZURhdGEoKTt2YXIgYz0hMSE9PWIuZmlyZShcImJlZm9yZVBhc3RlXCIsZCk7YyYmbi5jYW5DbGlwYm9hcmRBcGlCZVRydXN0ZWQoZC5kYXRhVHJhbnNmZXIsYik/KGEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyKGIsZCl9LDApKTpsKGEsZnVuY3Rpb24oYSl7ZC5kYXRhVmFsdWU9YS5yZXBsYWNlKC88c3BhbltePl0rZGF0YS1ja2UtYm9va21hcmtbXjxdKj88XFwvc3Bhbj4vaWcsXCJcIik7YyYmcihiLGQpfSl9ZnVuY3Rpb24gdCgpe2lmKFwid3lzaXd5Z1wiPT1iLm1vZGUpe3ZhciBhPXUoXCJwYXN0ZVwiKTtiLmdldENvbW1hbmQoXCJjdXRcIikuc2V0U3RhdGUodShcImN1dFwiKSk7Yi5nZXRDb21tYW5kKFwiY29weVwiKS5zZXRTdGF0ZSh1KFwiY29weVwiKSk7XG5iLmdldENvbW1hbmQoXCJwYXN0ZVwiKS5zZXRTdGF0ZShhKTtiLmZpcmUoXCJwYXN0ZVN0YXRlXCIsYSl9fWZ1bmN0aW9uIHUoYSl7aWYodyYmYSBpbntwYXN0ZToxLGN1dDoxfSlyZXR1cm4gQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ7aWYoXCJwYXN0ZVwiPT1hKXJldHVybiBDS0VESVRPUi5UUklTVEFURV9PRkY7YT1iLmdldFNlbGVjdGlvbigpO3ZhciBkPWEuZ2V0UmFuZ2VzKCk7cmV0dXJuIGEuZ2V0VHlwZSgpPT1DS0VESVRPUi5TRUxFQ1RJT05fTk9ORXx8MT09ZC5sZW5ndGgmJmRbMF0uY29sbGFwc2VkP0NLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOkNLRURJVE9SLlRSSVNUQVRFX09GRn12YXIgbj1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZCxwPTAsdj0wLHc9MDsoZnVuY3Rpb24oKXtiLm9uKFwia2V5XCIscSk7Yi5vbihcImNvbnRlbnREb21cIixhKTtiLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYil7dz1iLmRhdGEuc2VsZWN0aW9uLmdldFJhbmdlcygpWzBdLmNoZWNrUmVhZE9ubHkoKTtcbnQoKX0pO2IuY29udGV4dE1lbnUmJmIuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYixhKXt3PWEuZ2V0UmFuZ2VzKClbMF0uY2hlY2tSZWFkT25seSgpO3JldHVybntjdXQ6dShcImN1dFwiKSxjb3B5OnUoXCJjb3B5XCIpLHBhc3RlOnUoXCJwYXN0ZVwiKX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShkLGMsZSxmLHEpe3ZhciBnPWIubGFuZy5jbGlwYm9hcmRbY107Yi5hZGRDb21tYW5kKGMsZSk7Yi51aS5hZGRCdXR0b24mJmIudWkuYWRkQnV0dG9uKGQse2xhYmVsOmcsY29tbWFuZDpjLHRvb2xiYXI6XCJjbGlwYm9hcmQsXCIrZn0pO2IuYWRkTWVudUl0ZW1zJiZiLmFkZE1lbnVJdGVtKGMse2xhYmVsOmcsY29tbWFuZDpjLGdyb3VwOlwiY2xpcGJvYXJkXCIsb3JkZXI6cX0pfWEoXCJDdXRcIixcImN1dFwiLGMoXCJjdXRcIiksMTAsMSk7YShcIkNvcHlcIixcImNvcHlcIixjKFwiY29weVwiKSwyMCw0KTthKFwiUGFzdGVcIixcInBhc3RlXCIsZCgpLDMwLDgpfSkoKTtiLmdldENsaXBib2FyZERhdGE9XG5mdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGMoYSl7YS5yZW1vdmVMaXN0ZW5lcigpO2EuY2FuY2VsKCk7ZChhLmRhdGEpfWZ1bmN0aW9uIGUoYSl7YS5yZW1vdmVMaXN0ZW5lcigpO2EuY2FuY2VsKCk7az0hMDtkKHt0eXBlOmcsZGF0YVZhbHVlOmEuZGF0YS5kYXRhVmFsdWUsZGF0YVRyYW5zZmVyOmEuZGF0YS5kYXRhVHJhbnNmZXIsbWV0aG9kOlwicGFzdGVcIn0pfWZ1bmN0aW9uIGYoKXt0aGlzLmN1c3RvbVRpdGxlPWEmJmEudGl0bGV9dmFyIHE9ITEsZz1cImF1dG9cIixrPSExO2R8fChkPWEsYT1udWxsKTtiLm9uKFwicGFzdGVcIixjLG51bGwsbnVsbCwwKTtiLm9uKFwiYmVmb3JlUGFzdGVcIixmdW5jdGlvbihhKXthLnJlbW92ZUxpc3RlbmVyKCk7cT0hMDtnPWEuZGF0YS50eXBlfSxudWxsLG51bGwsMUUzKTshMT09PXooKSYmKGIucmVtb3ZlTGlzdGVuZXIoXCJwYXN0ZVwiLGMpLHEmJmIuZmlyZShcInBhc3RlRGlhbG9nXCIsZik/KGIub24oXCJwYXN0ZURpYWxvZ0NvbW1pdFwiLGUpLGIub24oXCJkaWFsb2dIaWRlXCIsXG5mdW5jdGlvbihhKXthLnJlbW92ZUxpc3RlbmVyKCk7YS5kYXRhLnJlbW92ZUxpc3RlbmVyKFwicGFzdGVEaWFsb2dDb21taXRcIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7a3x8ZChudWxsKX0sMTApfSkpOmQobnVsbCkpfX1mdW5jdGlvbiBBKGIpe2lmKENLRURJVE9SLmVudi53ZWJraXQpe2lmKCFiLm1hdGNoKC9eW148XSokL2cpJiYhYi5tYXRjaCgvXig8ZGl2PjxiciggP1xcLyk/PjxcXC9kaXY+fDxkaXY+W148XSo8XFwvZGl2PikqJC9naSkpcmV0dXJuXCJodG1sXCJ9ZWxzZSBpZihDS0VESVRPUi5lbnYuaWUpe2lmKCFiLm1hdGNoKC9eKFtePF18PGJyKCA/XFwvKT8+KSokL2dpKSYmIWIubWF0Y2goL14oPHA+KFtePF18PGJyKCA/XFwvKT8+KSo8XFwvcD58KFxcclxcbikpKiQvZ2kpKXJldHVyblwiaHRtbFwifWVsc2UgaWYoQ0tFRElUT1IuZW52LmdlY2tvKXtpZighYi5tYXRjaCgvXihbXjxdfDxiciggP1xcLyk/PikqJC9naSkpcmV0dXJuXCJodG1sXCJ9ZWxzZSByZXR1cm5cImh0bWxcIjtyZXR1cm5cImh0bWxpZmllZHRleHRcIn1cbmZ1bmN0aW9uIEIoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBDS0VESVRPUi50b29scy5yZXBlYXQoXCJcXHgzYy9wXFx4M2VcXHgzY3BcXHgzZVwiLH5+KGEvMikpKygxPT1hJTI/XCJcXHgzY2JyXFx4M2VcIjpcIlwiKX1hPWEucmVwbGFjZSgvXFxzKy9nLFwiIFwiKS5yZXBsYWNlKC8+ICs8L2csXCJcXHgzZVxceDNjXCIpLnJlcGxhY2UoLzxiciA/XFwvPi9naSxcIlxceDNjYnJcXHgzZVwiKTthPWEucmVwbGFjZSgvPFxcLz9bQS1aXSs+L2csZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKX0pO2lmKGEubWF0Y2goL15bXjxdJC8pKXJldHVybiBhO0NLRURJVE9SLmVudi53ZWJraXQmJi0xPGEuaW5kZXhPZihcIlxceDNjZGl2XFx4M2VcIikmJihhPWEucmVwbGFjZSgvXig8ZGl2Pig8YnI+fCk8XFwvZGl2PikoPyEkfCg8ZGl2Pig8YnI+fCk8XFwvZGl2PikpL2csXCJcXHgzY2JyXFx4M2VcIikucmVwbGFjZSgvXig8ZGl2Pig8YnI+fCk8XFwvZGl2Pil7Mn0oPyEkKS9nLFwiXFx4M2NkaXZcXHgzZVxceDNjL2RpdlxceDNlXCIpLGEubWF0Y2goLzxkaXY+KDxicj58KTxcXC9kaXY+LykmJlxuKGE9XCJcXHgzY3BcXHgzZVwiK2EucmVwbGFjZSgvKDxkaXY+KDxicj58KTxcXC9kaXY+KSsvZyxmdW5jdGlvbihhKXtyZXR1cm4gYyhhLnNwbGl0KFwiXFx4M2MvZGl2XFx4M2VcXHgzY2RpdlxceDNlXCIpLmxlbmd0aCsxKX0pK1wiXFx4M2MvcFxceDNlXCIpLGE9YS5yZXBsYWNlKC88XFwvZGl2PjxkaXY+L2csXCJcXHgzY2JyXFx4M2VcIiksYT1hLnJlcGxhY2UoLzxcXC8/ZGl2Pi9nLFwiXCIpKTtDS0VESVRPUi5lbnYuZ2Vja28mJmIuZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUiYmKENLRURJVE9SLmVudi5nZWNrbyYmKGE9YS5yZXBsYWNlKC9ePGJyPjxicj4kLyxcIlxceDNjYnJcXHgzZVwiKSksLTE8YS5pbmRleE9mKFwiXFx4M2NiclxceDNlXFx4M2NiclxceDNlXCIpJiYoYT1cIlxceDNjcFxceDNlXCIrYS5yZXBsYWNlKC8oPGJyPil7Mix9L2csZnVuY3Rpb24oYSl7cmV0dXJuIGMoYS5sZW5ndGgvNCl9KStcIlxceDNjL3BcXHgzZVwiKSk7cmV0dXJuIEMoYixhKX1mdW5jdGlvbiBEKCl7ZnVuY3Rpb24gYigpe3ZhciBhPXt9LGI7Zm9yKGIgaW4gQ0tFRElUT1IuZHRkKVwiJFwiIT1cbmIuY2hhckF0KDApJiZcImRpdlwiIT1iJiZcInNwYW5cIiE9YiYmKGFbYl09MSk7cmV0dXJuIGF9dmFyIGE9e307cmV0dXJue2dldDpmdW5jdGlvbihjKXtyZXR1cm5cInBsYWluLXRleHRcIj09Yz9hLnBsYWluVGV4dHx8KGEucGxhaW5UZXh0PW5ldyBDS0VESVRPUi5maWx0ZXIoXCJiclwiKSk6XCJzZW1hbnRpYy1jb250ZW50XCI9PWM/KChjPWEuc2VtYW50aWNDb250ZW50KXx8KGM9bmV3IENLRURJVE9SLmZpbHRlcixjLmFsbG93KHskMTp7ZWxlbWVudHM6YigpLGF0dHJpYnV0ZXM6ITAsc3R5bGVzOiExLGNsYXNzZXM6ITF9fSksYz1hLnNlbWFudGljQ29udGVudD1jKSxjKTpjP25ldyBDS0VESVRPUi5maWx0ZXIoYyk6bnVsbH19fWZ1bmN0aW9uIHgoYixhLGMpe2E9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChhKTt2YXIgZD1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5iYXNpY1dyaXRlcjtjLmFwcGx5VG8oYSwhMCwhMSxiLmFjdGl2ZUVudGVyTW9kZSk7YS53cml0ZUh0bWwoZCk7XG5yZXR1cm4gZC5nZXRIdG1sKCl9ZnVuY3Rpb24gQyhiLGEpe2IuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUj9hPWEucmVwbGFjZSgvKDxcXC9wPjxwPikrL2csZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLnJlcGVhdChcIlxceDNjYnJcXHgzZVwiLGEubGVuZ3RoLzcqMil9KS5yZXBsYWNlKC88XFwvP3A+L2csXCJcIik6Yi5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0RJViYmKGE9YS5yZXBsYWNlKC88KFxcLyk/cD4vZyxcIlxceDNjJDFkaXZcXHgzZVwiKSk7cmV0dXJuIGF9ZnVuY3Rpb24gRShiKXtiLmRhdGEucHJldmVudERlZmF1bHQoKTtiLmRhdGEuJC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1cIm5vbmVcIn1mdW5jdGlvbiBGKGIpe3ZhciBhPUNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkO2Iub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBjKGEsZCxjKXtkLnNlbGVjdCgpO3IoYix7ZGF0YVRyYW5zZmVyOmMsbWV0aG9kOlwiZHJvcFwifSwxKTtjLnNvdXJjZUVkaXRvci5maXJlKFwic2F2ZVNuYXBzaG90XCIpO1xuYy5zb3VyY2VFZGl0b3IuZWRpdGFibGUoKS5leHRyYWN0SHRtbEZyb21SYW5nZShhKTtjLnNvdXJjZUVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2FdKTtjLnNvdXJjZUVkaXRvci5maXJlKFwic2F2ZVNuYXBzaG90XCIpfWZ1bmN0aW9uIGQoZCxjKXtkLnNlbGVjdCgpO3IoYix7ZGF0YVRyYW5zZmVyOmMsbWV0aG9kOlwiZHJvcFwifSwxKTthLnJlc2V0RHJhZ0RhdGFUcmFuc2ZlcigpfWZ1bmN0aW9uIGUoYSxkLGMpe3ZhciBlPXskOmEuZGF0YS4kLHRhcmdldDphLmRhdGEuZ2V0VGFyZ2V0KCl9O2QmJihlLmRyYWdSYW5nZT1kKTtjJiYoZS5kcm9wUmFuZ2U9Yyk7ITE9PT1iLmZpcmUoYS5uYW1lLGUpJiZhLmRhdGEucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBnKGEpe2EudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYT1hLmdldFBhcmVudCgpKTtyZXR1cm4gYS5nZXRDaGlsZENvdW50KCl9dmFyIGY9Yi5lZGl0YWJsZSgpLGg9Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuZ2V0RHJvcFRhcmdldChiKSxcbmw9Yi51aS5zcGFjZShcInRvcFwiKSxwPWIudWkuc3BhY2UoXCJib3R0b21cIik7YS5wcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQobCk7YS5wcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQocCk7Zi5hdHRhY2hMaXN0ZW5lcihoLFwiZHJhZ3N0YXJ0XCIsZSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ3N0YXJ0XCIsYS5yZXNldERyYWdEYXRhVHJhbnNmZXIsYSxudWxsLDEpO2YuYXR0YWNoTGlzdGVuZXIoYixcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGQpe2EuaW5pdERyYWdEYXRhVHJhbnNmZXIoZCxiKX0sbnVsbCxudWxsLDIpO2YuYXR0YWNoTGlzdGVuZXIoYixcImRyYWdzdGFydFwiLGZ1bmN0aW9uKCl7dmFyIGQ9YS5kcmFnUmFuZ2U9Yi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKVswXTtDS0VESVRPUi5lbnYuaWUmJjEwPkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYS5kcmFnU3RhcnRDb250YWluZXJDaGlsZENvdW50PWQ/ZyhkLnN0YXJ0Q29udGFpbmVyKTpudWxsLGEuZHJhZ0VuZENvbnRhaW5lckNoaWxkQ291bnQ9XG5kP2coZC5lbmRDb250YWluZXIpOm51bGwpfSxudWxsLG51bGwsMTAwKTtmLmF0dGFjaExpc3RlbmVyKGgsXCJkcmFnZW5kXCIsZSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ2VuZFwiLGEuaW5pdERyYWdEYXRhVHJhbnNmZXIsYSxudWxsLDEpO2YuYXR0YWNoTGlzdGVuZXIoYixcImRyYWdlbmRcIixhLnJlc2V0RHJhZ0RhdGFUcmFuc2ZlcixhLG51bGwsMTAwKTtmLmF0dGFjaExpc3RlbmVyKGgsXCJkcmFnb3ZlclwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5nZXRUYXJnZXQoKTtiJiZiLmlzJiZiLmlzKFwiaHRtbFwiKT9hLmRhdGEucHJldmVudERlZmF1bHQoKTpDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmlzRmlsZUFwaVN1cHBvcnRlZCYmYS5kYXRhLiQuZGF0YVRyYW5zZmVyLnR5cGVzLmNvbnRhaW5zKFwiRmlsZXNcIikmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSk7Zi5hdHRhY2hMaXN0ZW5lcihoLFwiZHJvcFwiLGZ1bmN0aW9uKGQpe2lmKCFkLmRhdGEuJC5kZWZhdWx0UHJldmVudGVkKXtkLmRhdGEucHJldmVudERlZmF1bHQoKTtcbnZhciBjPWQuZGF0YS5nZXRUYXJnZXQoKTtpZighYy5pc1JlYWRPbmx5KCl8fGMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZjLmlzKFwiaHRtbFwiKSl7dmFyIGM9YS5nZXRSYW5nZUF0RHJvcFBvc2l0aW9uKGQsYiksZj1hLmRyYWdSYW5nZTtjJiZlKGQsZixjKX19fSxudWxsLG51bGwsOTk5OSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJvcFwiLGEuaW5pdERyYWdEYXRhVHJhbnNmZXIsYSxudWxsLDEpO2YuYXR0YWNoTGlzdGVuZXIoYixcImRyb3BcIixmdW5jdGlvbihlKXtpZihlPWUuZGF0YSl7dmFyIGY9ZS5kcm9wUmFuZ2UsZz1lLmRyYWdSYW5nZSxoPWUuZGF0YVRyYW5zZmVyO2guZ2V0VHJhbnNmZXJUeXBlKGIpPT1DS0VESVRPUi5EQVRBX1RSQU5TRkVSX0lOVEVSTkFMP3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLmludGVybmFsRHJvcChnLGYsaCxiKX0sMCk6aC5nZXRUcmFuc2ZlclR5cGUoYik9PUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfQ1JPU1NfRURJVE9SUz9jKGcsZixoKTpcbmQoZixoKX19LG51bGwsbnVsbCw5OTk5KX0pfUNLRURJVE9SLnBsdWdpbnMuYWRkKFwiY2xpcGJvYXJkXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihiKXt2YXIgYSxjPUQoKTtiLmNvbmZpZy5mb3JjZVBhc3RlQXNQbGFpblRleHQ/YT1cInBsYWluLXRleHRcIjpiLmNvbmZpZy5wYXN0ZUZpbHRlcj9hPWIuY29uZmlnLnBhc3RlRmlsdGVyOiFDS0VESVRPUi5lbnYud2Via2l0fHxcInBhc3RlRmlsdGVyXCJpbiBiLmNvbmZpZ3x8KGE9XCJzZW1hbnRpYy1jb250ZW50XCIpO2IucGFzdGVGaWx0ZXI9Yy5nZXQoYSk7eShiKTtGKGIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJwYXN0ZVwiLENLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJkaWFsb2dzL3Bhc3RlLmpzXCIpKTtiLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXthLmRhdGEuZGF0YVRyYW5zZmVyfHwoYS5kYXRhLmRhdGFUcmFuc2Zlcj1uZXcgQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuZGF0YVRyYW5zZmVyKTtpZighYS5kYXRhLmRhdGFWYWx1ZSl7dmFyIGM9XG5hLmRhdGEuZGF0YVRyYW5zZmVyLGc9Yy5nZXREYXRhKFwidGV4dC9odG1sXCIpO2lmKGcpYS5kYXRhLmRhdGFWYWx1ZT1nLGEuZGF0YS50eXBlPVwiaHRtbFwiO2Vsc2UgaWYoZz1jLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpKWEuZGF0YS5kYXRhVmFsdWU9Yi5lZGl0YWJsZSgpLnRyYW5zZm9ybVBsYWluVGV4dFRvSHRtbChnKSxhLmRhdGEudHlwZT1cInRleHRcIn19LG51bGwsbnVsbCwxKTtiLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuZGF0YVZhbHVlLGM9Q0tFRElUT1IuZHRkLiRibG9jazstMTxiLmluZGV4T2YoXCJBcHBsZS1cIikmJihiPWIucmVwbGFjZSgvPHNwYW4gY2xhc3M9XCJBcHBsZS1jb252ZXJ0ZWQtc3BhY2VcIj4mbmJzcDs8XFwvc3Bhbj4vZ2ksXCIgXCIpLFwiaHRtbFwiIT1hLmRhdGEudHlwZSYmKGI9Yi5yZXBsYWNlKC88c3BhbiBjbGFzcz1cIkFwcGxlLXRhYi1zcGFuXCJbXj5dKj4oW148XSopPFxcL3NwYW4+L2dpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIucmVwbGFjZSgvXFx0L2csXG5cIlxceDI2bmJzcDtcXHgyNm5ic3A7IFxceDI2bmJzcDtcIil9KSksLTE8Yi5pbmRleE9mKCdcXHgzY2JyIGNsYXNzXFx4M2RcIkFwcGxlLWludGVyY2hhbmdlLW5ld2xpbmVcIlxceDNlJykmJihhLmRhdGEuc3RhcnRzV2l0aEVPTD0xLGEuZGF0YS5wcmVTbmlmZmluZz1cImh0bWxcIixiPWIucmVwbGFjZSgvPGJyIGNsYXNzPVwiQXBwbGUtaW50ZXJjaGFuZ2UtbmV3bGluZVwiPi8sXCJcIikpLGI9Yi5yZXBsYWNlKC8oPFtePl0rKSBjbGFzcz1cIkFwcGxlLVteXCJdKlwiL2dpLFwiJDFcIikpO2lmKGIubWF0Y2goL148W148XStja2VfKGVkaXRhYmxlfGNvbnRlbnRzKS9pKSl7dmFyIGYsaCxsPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImRpdlwiKTtmb3IobC5zZXRIdG1sKGIpOzE9PWwuZ2V0Q2hpbGRDb3VudCgpJiYoZj1sLmdldEZpcnN0KCkpJiZmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGYuaGFzQ2xhc3MoXCJja2VfZWRpdGFibGVcIil8fGYuaGFzQ2xhc3MoXCJja2VfY29udGVudHNcIikpOylsPWg9ZjtcbmgmJihiPWguZ2V0SHRtbCgpLnJlcGxhY2UoLzxicj4kL2ksXCJcIikpfUNLRURJVE9SLmVudi5pZT9iPWIucmVwbGFjZSgvXiZuYnNwOyg/OiB8XFxyXFxuKT88KFxcdyspL2csZnVuY3Rpb24oYixmKXtyZXR1cm4gZi50b0xvd2VyQ2FzZSgpaW4gYz8oYS5kYXRhLnByZVNuaWZmaW5nPVwiaHRtbFwiLFwiXFx4M2NcIitmKTpifSk6Q0tFRElUT1IuZW52LndlYmtpdD9iPWIucmVwbGFjZSgvPFxcLyhcXHcrKT48ZGl2Pjxicj48XFwvZGl2PiQvLGZ1bmN0aW9uKGIsZil7cmV0dXJuIGYgaW4gYz8oYS5kYXRhLmVuZHNXaXRoRU9MPTEsXCJcXHgzYy9cIitmK1wiXFx4M2VcIik6Yn0pOkNLRURJVE9SLmVudi5nZWNrbyYmKGI9Yi5yZXBsYWNlKC8oXFxzKTxicj4kLyxcIiQxXCIpKTthLmRhdGEuZGF0YVZhbHVlPWJ9LG51bGwsbnVsbCwzKTtiLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXthPWEuZGF0YTt2YXIgZT1hLnR5cGUsZz1hLmRhdGFWYWx1ZSxmLGg9Yi5jb25maWcuY2xpcGJvYXJkX2RlZmF1bHRDb250ZW50VHlwZXx8XCJodG1sXCIsXG5sPWEuZGF0YVRyYW5zZmVyLmdldFRyYW5zZmVyVHlwZShiKTtmPVwiaHRtbFwiPT1lfHxcImh0bWxcIj09YS5wcmVTbmlmZmluZz9cImh0bWxcIjpBKGcpO1wiaHRtbGlmaWVkdGV4dFwiPT1mJiYoZz1CKGIuY29uZmlnLGcpKTtcInRleHRcIj09ZSYmXCJodG1sXCI9PWY/Zz14KGIsZyxjLmdldChcInBsYWluLXRleHRcIikpOmw9PUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUwmJmIucGFzdGVGaWx0ZXImJiFhLmRvbnRGaWx0ZXImJihnPXgoYixnLGIucGFzdGVGaWx0ZXIpKTthLnN0YXJ0c1dpdGhFT0wmJihnPSdcXHgzY2JyIGRhdGEtY2tlLWVvbFxceDNkXCIxXCJcXHgzZScrZyk7YS5lbmRzV2l0aEVPTCYmKGcrPSdcXHgzY2JyIGRhdGEtY2tlLWVvbFxceDNkXCIxXCJcXHgzZScpO1wiYXV0b1wiPT1lJiYoZT1cImh0bWxcIj09Znx8XCJodG1sXCI9PWg/XCJodG1sXCI6XCJ0ZXh0XCIpO2EudHlwZT1lO2EuZGF0YVZhbHVlPWc7ZGVsZXRlIGEucHJlU25pZmZpbmc7ZGVsZXRlIGEuc3RhcnRzV2l0aEVPTDtkZWxldGUgYS5lbmRzV2l0aEVPTH0sXG5udWxsLG51bGwsNik7Yi5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7YS5kYXRhVmFsdWUmJihiLmluc2VydEh0bWwoYS5kYXRhVmFsdWUsYS50eXBlLGEucmFuZ2UpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZpcmUoXCJhZnRlclBhc3RlXCIpfSwwKSl9LG51bGwsbnVsbCwxRTMpO2Iub24oXCJwYXN0ZURpYWxvZ1wiLGZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLm9wZW5EaWFsb2coXCJwYXN0ZVwiLGEuZGF0YSl9LDApfSl9fSk7Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQ9e2lzQ3VzdG9tQ29weUN1dFN1cHBvcnRlZDohQ0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmlPUyxpc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZDohQ0tFRElUT1IuZW52LmllLGlzRmlsZUFwaVN1cHBvcnRlZDohQ0tFRElUT1IuZW52LmllfHw5PENLRURJVE9SLmVudi52ZXJzaW9uLG1haW5QYXN0ZUV2ZW50OkNLRURJVE9SLmVudi5pZSYmIUNLRURJVE9SLmVudi5lZGdlP1xuXCJiZWZvcmVwYXN0ZVwiOlwicGFzdGVcIixjYW5DbGlwYm9hcmRBcGlCZVRydXN0ZWQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5nZXRUcmFuc2ZlclR5cGUoYSkhPUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUx8fENLRURJVE9SLmVudi5jaHJvbWUmJiFiLmlzRW1wdHkoKXx8Q0tFRElUT1IuZW52LmdlY2tvJiYoYi5nZXREYXRhKFwidGV4dC9odG1sXCIpfHxiLmdldEZpbGVzQ291bnQoKSk/ITA6ITF9LGdldERyb3BUYXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGE9Yi5lZGl0YWJsZSgpO3JldHVybiBDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb258fGEuaXNJbmxpbmUoKT9hOmIuZG9jdW1lbnR9LGZpeFNwbGl0Tm9kZXNBZnRlckRyb3A6ZnVuY3Rpb24oYixhLGMsZCl7ZnVuY3Rpb24gZShiLGMsZCl7dmFyIGU9YjtlLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGU9Yi5nZXRQYXJlbnQoKSk7aWYoZS5lcXVhbHMoYykmJmQhPWMuZ2V0Q2hpbGRDb3VudCgpKXJldHVybiBiPVxuYS5zdGFydENvbnRhaW5lci5nZXRDaGlsZChhLnN0YXJ0T2Zmc2V0LTEpLGM9YS5zdGFydENvbnRhaW5lci5nZXRDaGlsZChhLnN0YXJ0T2Zmc2V0KSxiJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmYyYmYy50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihkPWIuZ2V0TGVuZ3RoKCksYi5zZXRUZXh0KGIuZ2V0VGV4dCgpK2MuZ2V0VGV4dCgpKSxjLnJlbW92ZSgpLGEuc2V0U3RhcnQoYixkKSxhLmNvbGxhcHNlKCEwKSksITB9dmFyIGc9YS5zdGFydENvbnRhaW5lcjtcIm51bWJlclwiPT10eXBlb2YgZCYmXCJudW1iZXJcIj09dHlwZW9mIGMmJmcudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZShiLnN0YXJ0Q29udGFpbmVyLGcsYyl8fGUoYi5lbmRDb250YWluZXIsZyxkKSl9LGlzRHJvcFJhbmdlQWZmZWN0ZWRCeURyYWdSYW5nZTpmdW5jdGlvbihiLGEpe3ZhciBjPWEuc3RhcnRDb250YWluZXIsZD1hLmVuZE9mZnNldDtyZXR1cm4gYi5lbmRDb250YWluZXIuZXF1YWxzKGMpJiZcbmIuZW5kT2Zmc2V0PD1kfHxiLnN0YXJ0Q29udGFpbmVyLmdldFBhcmVudCgpLmVxdWFscyhjKSYmYi5zdGFydENvbnRhaW5lci5nZXRJbmRleCgpPGR8fGIuZW5kQ29udGFpbmVyLmdldFBhcmVudCgpLmVxdWFscyhjKSYmYi5lbmRDb250YWluZXIuZ2V0SW5kZXgoKTxkPyEwOiExfSxpbnRlcm5hbERyb3A6ZnVuY3Rpb24oYixhLGMsZCl7dmFyIGU9Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQsZz1kLmVkaXRhYmxlKCksZixoO2QuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtkLmZpcmUoXCJsb2NrU25hcHNob3RcIix7ZG9udFVwZGF0ZToxfSk7Q0tFRElUT1IuZW52LmllJiYxMD5DS0VESVRPUi5lbnYudmVyc2lvbiYmdGhpcy5maXhTcGxpdE5vZGVzQWZ0ZXJEcm9wKGIsYSxlLmRyYWdTdGFydENvbnRhaW5lckNoaWxkQ291bnQsZS5kcmFnRW5kQ29udGFpbmVyQ2hpbGRDb3VudCk7KGg9dGhpcy5pc0Ryb3BSYW5nZUFmZmVjdGVkQnlEcmFnUmFuZ2UoYixhKSl8fChmPWIuY3JlYXRlQm9va21hcmsoITEpKTtcbmU9YS5jbG9uZSgpLmNyZWF0ZUJvb2ttYXJrKCExKTtoJiYoZj1iLmNyZWF0ZUJvb2ttYXJrKCExKSk7Yj1mLnN0YXJ0Tm9kZTthPWYuZW5kTm9kZTtoPWUuc3RhcnROb2RlO2EmJmIuZ2V0UG9zaXRpb24oaCkmQ0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HJiZhLmdldFBvc2l0aW9uKGgpJkNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lORyYmaC5pbnNlcnRCZWZvcmUoYik7Yj1kLmNyZWF0ZVJhbmdlKCk7Yi5tb3ZlVG9Cb29rbWFyayhmKTtnLmV4dHJhY3RIdG1sRnJvbVJhbmdlKGIsMSk7YT1kLmNyZWF0ZVJhbmdlKCk7YS5tb3ZlVG9Cb29rbWFyayhlKTtyKGQse2RhdGFUcmFuc2ZlcjpjLG1ldGhvZDpcImRyb3BcIixyYW5nZTphfSwxKTtkLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKX0sZ2V0UmFuZ2VBdERyb3BQb3NpdGlvbjpmdW5jdGlvbihiLGEpe3ZhciBjPWIuZGF0YS4kLGQ9Yy5jbGllbnRYLGU9Yy5jbGllbnRZLGc9YS5nZXRTZWxlY3Rpb24oITApLmdldFJhbmdlcygpWzBdLGY9XG5hLmNyZWF0ZVJhbmdlKCk7aWYoYi5kYXRhLnRlc3RSYW5nZSlyZXR1cm4gYi5kYXRhLnRlc3RSYW5nZTtpZihkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KWM9YS5kb2N1bWVudC4kLmNhcmV0UmFuZ2VGcm9tUG9pbnQoZCxlKSxmLnNldFN0YXJ0KENLRURJVE9SLmRvbS5ub2RlKGMuc3RhcnRDb250YWluZXIpLGMuc3RhcnRPZmZzZXQpLGYuY29sbGFwc2UoITApO2Vsc2UgaWYoYy5yYW5nZVBhcmVudClmLnNldFN0YXJ0KENLRURJVE9SLmRvbS5ub2RlKGMucmFuZ2VQYXJlbnQpLGMucmFuZ2VPZmZzZXQpLGYuY29sbGFwc2UoITApO2Vsc2V7aWYoQ0tFRElUT1IuZW52LmllJiY4PENLRURJVE9SLmVudi52ZXJzaW9uJiZnJiZhLmVkaXRhYmxlKCkuaGFzRm9jdXMpcmV0dXJuIGc7aWYoZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2Upe2EuZm9jdXMoKTtjPWEuZG9jdW1lbnQuZ2V0Qm9keSgpLiQuY3JlYXRlVGV4dFJhbmdlKCk7dHJ5e2Zvcih2YXIgaD0hMSxsPTA7MjA+bCYmXG4haDtsKyspe2lmKCFoKXRyeXtjLm1vdmVUb1BvaW50KGQsZS1sKSxoPSEwfWNhdGNoKHApe31pZighaCl0cnl7Yy5tb3ZlVG9Qb2ludChkLGUrbCksaD0hMH1jYXRjaChxKXt9fWlmKGgpe3ZhciBrPVwiY2tlLXRlbXAtXCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7Yy5wYXN0ZUhUTUwoJ1xceDNjc3BhbiBpZFxceDNkXCInK2srJ1wiXFx4M2XigItcXHgzYy9zcGFuXFx4M2UnKTt2YXIgdD1hLmRvY3VtZW50LmdldEJ5SWQoayk7Zi5tb3ZlVG9Qb3NpdGlvbih0LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7dC5yZW1vdmUoKX1lbHNle3ZhciB1PWEuZG9jdW1lbnQuJC5lbGVtZW50RnJvbVBvaW50KGQsZSksbj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQodSkscjtpZihuLmVxdWFscyhhLmVkaXRhYmxlKCkpfHxcImh0bWxcIj09bi5nZXROYW1lKCkpcmV0dXJuIGcmJmcuc3RhcnRDb250YWluZXImJiFnLnN0YXJ0Q29udGFpbmVyLmVxdWFscyhhLmVkaXRhYmxlKCkpP2c6bnVsbDtyPW4uZ2V0Q2xpZW50UmVjdCgpO1xuZDxyLmxlZnQ/Zi5zZXRTdGFydEF0KG4sQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpOmYuc2V0U3RhcnRBdChuLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2YuY29sbGFwc2UoITApfX1jYXRjaCh2KXtyZXR1cm4gbnVsbH19ZWxzZSByZXR1cm4gbnVsbH1yZXR1cm4gZn0saW5pdERyYWdEYXRhVHJhbnNmZXI6ZnVuY3Rpb24oYixhKXt2YXIgYz1iLmRhdGEuJD9iLmRhdGEuJC5kYXRhVHJhbnNmZXI6bnVsbCxkPW5ldyB0aGlzLmRhdGFUcmFuc2ZlcihjLGEpO2M/dGhpcy5kcmFnRGF0YSYmZC5pZD09dGhpcy5kcmFnRGF0YS5pZD9kPXRoaXMuZHJhZ0RhdGE6dGhpcy5kcmFnRGF0YT1kOnRoaXMuZHJhZ0RhdGE/ZD10aGlzLmRyYWdEYXRhOnRoaXMuZHJhZ0RhdGE9ZDtiLmRhdGEuZGF0YVRyYW5zZmVyPWR9LHJlc2V0RHJhZ0RhdGFUcmFuc2ZlcjpmdW5jdGlvbigpe3RoaXMuZHJhZ0RhdGE9bnVsbH0saW5pdFBhc3RlRGF0YVRyYW5zZmVyOmZ1bmN0aW9uKGIsYSl7aWYodGhpcy5pc0N1c3RvbUNvcHlDdXRTdXBwb3J0ZWQmJlxuYiYmYi5kYXRhJiZiLmRhdGEuJCl7dmFyIGM9bmV3IHRoaXMuZGF0YVRyYW5zZmVyKGIuZGF0YS4kLmNsaXBib2FyZERhdGEsYSk7dGhpcy5jb3B5Q3V0RGF0YSYmYy5pZD09dGhpcy5jb3B5Q3V0RGF0YS5pZD8oYz10aGlzLmNvcHlDdXREYXRhLGMuJD1iLmRhdGEuJC5jbGlwYm9hcmREYXRhKTp0aGlzLmNvcHlDdXREYXRhPWM7cmV0dXJuIGN9cmV0dXJuIG5ldyB0aGlzLmRhdGFUcmFuc2ZlcihudWxsLGEpfSxwcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQ6ZnVuY3Rpb24oYil7YiYmYi5vbihcImRyYWdvdmVyXCIsRSl9fTt2YXIgcD1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZD9cImNrZS9pZFwiOlwiVGV4dFwiO0NLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmRhdGFUcmFuc2Zlcj1mdW5jdGlvbihiLGEpe2ImJih0aGlzLiQ9Yik7dGhpcy5fPXttZXRhUmVnRXhwOi9ePG1ldGEuKj8+L2ksYm9keVJlZ0V4cDovPGJvZHkoPzpbXFxzXFxTXSo/KT4oW1xcc1xcU10qKTxcXC9ib2R5Pi9pLFxuZnJhZ21lbnRSZWdFeHA6L1xceDNjIS0tKD86U3RhcnR8RW5kKUZyYWdtZW50LS1cXHgzZS9nLGRhdGE6e30sZmlsZXM6W10sbm9ybWFsaXplVHlwZTpmdW5jdGlvbihhKXthPWEudG9Mb3dlckNhc2UoKTtyZXR1cm5cInRleHRcIj09YXx8XCJ0ZXh0L3BsYWluXCI9PWE/XCJUZXh0XCI6XCJ1cmxcIj09YT9cIlVSTFwiOmF9fTt0aGlzLmlkPXRoaXMuZ2V0RGF0YShwKTt0aGlzLmlkfHwodGhpcy5pZD1cIlRleHRcIj09cD9cIlwiOlwiY2tlLVwiK0NLRURJVE9SLnRvb2xzLmdldFVuaXF1ZUlkKCkpO2lmKFwiVGV4dFwiIT1wKXRyeXt0aGlzLiQuc2V0RGF0YShwLHRoaXMuaWQpfWNhdGNoKGMpe31hJiYodGhpcy5zb3VyY2VFZGl0b3I9YSx0aGlzLnNldERhdGEoXCJ0ZXh0L2h0bWxcIixhLmdldFNlbGVjdGVkSHRtbCgxKSksXCJUZXh0XCI9PXB8fHRoaXMuZ2V0RGF0YShcInRleHQvcGxhaW5cIil8fHRoaXMuc2V0RGF0YShcInRleHQvcGxhaW5cIixhLmdldFNlbGVjdGlvbigpLmdldFNlbGVjdGVkVGV4dCgpKSl9O0NLRURJVE9SLkRBVEFfVFJBTlNGRVJfSU5URVJOQUw9XG4xO0NLRURJVE9SLkRBVEFfVFJBTlNGRVJfQ1JPU1NfRURJVE9SUz0yO0NLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUw9MztDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5kYXRhVHJhbnNmZXIucHJvdG90eXBlPXtnZXREYXRhOmZ1bmN0aW9uKGIpe2I9dGhpcy5fLm5vcm1hbGl6ZVR5cGUoYik7dmFyIGE9dGhpcy5fLmRhdGFbYl07aWYodm9pZCAwPT09YXx8bnVsbD09PWF8fFwiXCI9PT1hKXRyeXthPXRoaXMuJC5nZXREYXRhKGIpfWNhdGNoKGMpe31pZih2b2lkIDA9PT1hfHxudWxsPT09YXx8XCJcIj09PWEpYT1cIlwiO1widGV4dC9odG1sXCI9PWI/KGE9YS5yZXBsYWNlKHRoaXMuXy5tZXRhUmVnRXhwLFwiXCIpLChiPXRoaXMuXy5ib2R5UmVnRXhwLmV4ZWMoYSkpJiZiLmxlbmd0aCYmKGE9YlsxXSxhPWEucmVwbGFjZSh0aGlzLl8uZnJhZ21lbnRSZWdFeHAsXCJcIikpKTpcIlRleHRcIj09YiYmQ0tFRElUT1IuZW52LmdlY2tvJiZ0aGlzLmdldEZpbGVzQ291bnQoKSYmXCJmaWxlOi8vXCI9PWEuc3Vic3RyaW5nKDAsXG43KSYmKGE9XCJcIik7cmV0dXJuIGF9LHNldERhdGE6ZnVuY3Rpb24oYixhKXtiPXRoaXMuXy5ub3JtYWxpemVUeXBlKGIpO3RoaXMuXy5kYXRhW2JdPWE7aWYoQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaXNDdXN0b21EYXRhVHlwZXNTdXBwb3J0ZWR8fFwiVVJMXCI9PWJ8fFwiVGV4dFwiPT1iKXtcIlRleHRcIj09cCYmXCJUZXh0XCI9PWImJih0aGlzLmlkPWEpO3RyeXt0aGlzLiQuc2V0RGF0YShiLGEpfWNhdGNoKGMpe319fSxnZXRUcmFuc2ZlclR5cGU6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuc291cmNlRWRpdG9yP3RoaXMuc291cmNlRWRpdG9yPT1iP0NLRURJVE9SLkRBVEFfVFJBTlNGRVJfSU5URVJOQUw6Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9DUk9TU19FRElUT1JTOkNLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUx9LGNhY2hlRGF0YTpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYil7Yj1hLl8ubm9ybWFsaXplVHlwZShiKTt2YXIgYz1hLmdldERhdGEoYik7YyYmKGEuXy5kYXRhW2JdPVxuYyl9aWYodGhpcy4kKXt2YXIgYT10aGlzLGMsZDtpZihDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZCl7aWYodGhpcy4kLnR5cGVzKWZvcihjPTA7Yzx0aGlzLiQudHlwZXMubGVuZ3RoO2MrKyliKHRoaXMuJC50eXBlc1tjXSl9ZWxzZSBiKFwiVGV4dFwiKSxiKFwiVVJMXCIpO2Q9dGhpcy5fZ2V0SW1hZ2VGcm9tQ2xpcGJvYXJkKCk7aWYodGhpcy4kJiZ0aGlzLiQuZmlsZXN8fGQpe3RoaXMuXy5maWxlcz1bXTtmb3IoYz0wO2M8dGhpcy4kLmZpbGVzLmxlbmd0aDtjKyspdGhpcy5fLmZpbGVzLnB1c2godGhpcy4kLmZpbGVzW2NdKTswPT09dGhpcy5fLmZpbGVzLmxlbmd0aCYmZCYmdGhpcy5fLmZpbGVzLnB1c2goZCl9fX0sZ2V0RmlsZXNDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZmlsZXMubGVuZ3RoP3RoaXMuXy5maWxlcy5sZW5ndGg6dGhpcy4kJiZ0aGlzLiQuZmlsZXMmJnRoaXMuJC5maWxlcy5sZW5ndGg/dGhpcy4kLmZpbGVzLmxlbmd0aDpcbnRoaXMuX2dldEltYWdlRnJvbUNsaXBib2FyZCgpPzE6MH0sZ2V0RmlsZTpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5fLmZpbGVzLmxlbmd0aD90aGlzLl8uZmlsZXNbYl06dGhpcy4kJiZ0aGlzLiQuZmlsZXMmJnRoaXMuJC5maWxlcy5sZW5ndGg/dGhpcy4kLmZpbGVzW2JdOjA9PT1iP3RoaXMuX2dldEltYWdlRnJvbUNsaXBib2FyZCgpOnZvaWQgMH0saXNFbXB0eTpmdW5jdGlvbigpe3ZhciBiPXt9LGE7aWYodGhpcy5nZXRGaWxlc0NvdW50KCkpcmV0dXJuITE7Zm9yKGEgaW4gdGhpcy5fLmRhdGEpYlthXT0xO2lmKHRoaXMuJClpZihDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZCl7aWYodGhpcy4kLnR5cGVzKWZvcih2YXIgYz0wO2M8dGhpcy4kLnR5cGVzLmxlbmd0aDtjKyspYlt0aGlzLiQudHlwZXNbY11dPTF9ZWxzZSBiLlRleHQ9MSxiLlVSTD0xO1wiVGV4dFwiIT1wJiYoYltwXT0wKTtmb3IoYSBpbiBiKWlmKGJbYV0mJlwiXCIhPT1cbnRoaXMuZ2V0RGF0YShhKSlyZXR1cm4hMTtyZXR1cm4hMH0sX2dldEltYWdlRnJvbUNsaXBib2FyZDpmdW5jdGlvbigpe3ZhciBiO2lmKHRoaXMuJCYmdGhpcy4kLml0ZW1zJiZ0aGlzLiQuaXRlbXNbMF0pdHJ5e2lmKChiPXRoaXMuJC5pdGVtc1swXS5nZXRBc0ZpbGUoKSkmJmIudHlwZSlyZXR1cm4gYn1jYXRjaChhKXt9fX19KSgpOyhmdW5jdGlvbigpe3ZhciBjPSdcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9idXR0b24gY2tlX2J1dHRvbl9fe25hbWV9IGNrZV9idXR0b25fe3N0YXRlfSB7Y2xzfVwiJysoQ0tFRElUT1IuZW52LmdlY2tvJiYhQ0tFRElUT1IuZW52LmhjP1wiXCI6XCIgaHJlZlxceDNkXFxcImphdmFzY3JpcHQ6dm9pZCgne3RpdGxlSnN9JylcXFwiXCIpKycgdGl0bGVcXHgzZFwie3RpdGxlfVwiIHRhYmluZGV4XFx4M2RcIi0xXCIgaGlkZWZvY3VzXFx4M2RcInRydWVcIiByb2xlXFx4M2RcImJ1dHRvblwiIGFyaWEtbGFiZWxsZWRieVxceDNkXCJ7aWR9X2xhYmVsXCIgYXJpYS1oYXNwb3B1cFxceDNkXCJ7aGFzQXJyb3d9XCIgYXJpYS1kaXNhYmxlZFxceDNkXCJ7YXJpYURpc2FibGVkfVwiJztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihjKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7Q0tFRElUT1IuZW52LmdlY2tvJiYoYys9JyBvbmJsdXJcXHgzZFwidGhpcy5zdHlsZS5jc3NUZXh0IFxceDNkIHRoaXMuc3R5bGUuY3NzVGV4dDtcIicpO1xudmFyIGM9YysoJyBvbmtleWRvd25cXHgzZFwicmV0dXJuIENLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7a2V5ZG93bkZufSxldmVudCk7XCIgb25mb2N1c1xceDNkXCJyZXR1cm4gQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtmb2N1c0ZufSxldmVudCk7XCIgJysoQ0tFRElUT1IuZW52LmllPydvbmNsaWNrXFx4M2RcInJldHVybiBmYWxzZTtcIiBvbm1vdXNldXAnOlwib25jbGlja1wiKSsnXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0sdGhpcyk7cmV0dXJuIGZhbHNlO1wiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2J1dHRvbl9pY29uIGNrZV9idXR0b25fX3tpY29uTmFtZX1faWNvblwiIHN0eWxlXFx4M2RcIntzdHlsZX1cIicpLGM9YysnXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlXFx4M2NzcGFuIGlkXFx4M2RcIntpZH1fbGFiZWxcIiBjbGFzc1xceDNkXCJja2VfYnV0dG9uX2xhYmVsIGNrZV9idXR0b25fX3tuYW1lfV9sYWJlbFwiIGFyaWEtaGlkZGVuXFx4M2RcImZhbHNlXCJcXHgzZXtsYWJlbH1cXHgzYy9zcGFuXFx4M2V7YXJyb3dIdG1sfVxceDNjL2FcXHgzZScsXG5yPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwiYnV0dG9uQXJyb3dcIiwnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9idXR0b25fYXJyb3dcIlxceDNlJysoQ0tFRElUT1IuZW52LmhjP1wiXFx4MjYjOTY2MDtcIjpcIlwiKStcIlxceDNjL3NwYW5cXHgzZVwiKSx0PUNLRURJVE9SLmFkZFRlbXBsYXRlKFwiYnV0dG9uXCIsYyk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJidXR0b25cIix7YmVmb3JlSW5pdDpmdW5jdGlvbihhKXthLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfQlVUVE9OLENLRURJVE9SLnVpLmJ1dHRvbi5oYW5kbGVyKX19KTtDS0VESVRPUi5VSV9CVVRUT049XCJidXR0b25cIjtDS0VESVRPUi51aS5idXR0b249ZnVuY3Rpb24oYSl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYSx7dGl0bGU6YS5sYWJlbCxjbGljazphLmNsaWNrfHxmdW5jdGlvbihiKXtiLmV4ZWNDb21tYW5kKGEuY29tbWFuZCl9fSk7dGhpcy5fPXt9fTtDS0VESVRPUi51aS5idXR0b24uaGFuZGxlcj17Y3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IudWkuYnV0dG9uKGEpfX07XG5DS0VESVRPUi51aS5idXR0b24ucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7dmFyIGU9YS5tb2RlO2UmJihlPXRoaXMubW9kZXNbZV0/dm9pZCAwIT09a1tlXT9rW2VdOkNLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxlPWEucmVhZE9ubHkmJiF0aGlzLnJlYWRPbmx5P0NLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOmUsdGhpcy5zZXRTdGF0ZShlKSx0aGlzLnJlZnJlc2gmJnRoaXMucmVmcmVzaCgpKX12YXIgbD1DS0VESVRPUi5lbnYsbT10aGlzLl8uaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCksZj1cIlwiLGc9dGhpcy5jb21tYW5kLG47dGhpcy5fLmVkaXRvcj1hO3ZhciBkPXtpZDptLGJ1dHRvbjp0aGlzLGVkaXRvcjphLGZvY3VzOmZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChtKS5mb2N1cygpfSxleGVjdXRlOmZ1bmN0aW9uKCl7dGhpcy5idXR0b24uY2xpY2soYSl9LGF0dGFjaDpmdW5jdGlvbihhKXt0aGlzLmJ1dHRvbi5hdHRhY2goYSl9fSxcbnU9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7aWYoZC5vbmtleSlyZXR1cm4gYT1uZXcgQ0tFRElUT1IuZG9tLmV2ZW50KGEpLCExIT09ZC5vbmtleShkLGEuZ2V0S2V5c3Ryb2tlKCkpfSksdj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhKXt2YXIgYjtkLm9uZm9jdXMmJihiPSExIT09ZC5vbmZvY3VzKGQsbmV3IENLRURJVE9SLmRvbS5ldmVudChhKSkpO3JldHVybiBifSkscD0wO2QuY2xpY2tGbj1uPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7cCYmKGEudW5sb2NrU2VsZWN0aW9uKDEpLHA9MCk7ZC5leGVjdXRlKCk7bC5pT1MmJmEuZm9jdXMoKX0pO2lmKHRoaXMubW9kZXMpe3ZhciBrPXt9O2Eub24oXCJiZWZvcmVNb2RlVW5sb2FkXCIsZnVuY3Rpb24oKXthLm1vZGUmJnRoaXMuXy5zdGF0ZSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJihrW2EubW9kZV09dGhpcy5fLnN0YXRlKX0sdGhpcyk7YS5vbihcImFjdGl2ZUZpbHRlckNoYW5nZVwiLFxuYyx0aGlzKTthLm9uKFwibW9kZVwiLGMsdGhpcyk7IXRoaXMucmVhZE9ubHkmJmEub24oXCJyZWFkT25seVwiLGMsdGhpcyl9ZWxzZSBnJiYoZz1hLmdldENvbW1hbmQoZykpJiYoZy5vbihcInN0YXRlXCIsZnVuY3Rpb24oKXt0aGlzLnNldFN0YXRlKGcuc3RhdGUpfSx0aGlzKSxmKz1nLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTj9cIm9uXCI6Zy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ/XCJkaXNhYmxlZFwiOlwib2ZmXCIpO2lmKHRoaXMuZGlyZWN0aW9uYWwpYS5vbihcImNvbnRlbnREaXJDaGFuZ2VkXCIsZnVuY3Rpb24oYil7dmFyIGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uaWQpLGQ9Yy5nZXRGaXJzdCgpO2I9Yi5kYXRhO2IhPWEubGFuZy5kaXI/Yy5hZGRDbGFzcyhcImNrZV9cIitiKTpjLnJlbW92ZUNsYXNzKFwiY2tlX2x0clwiKS5yZW1vdmVDbGFzcyhcImNrZV9ydGxcIik7ZC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLENLRURJVE9SLnNraW4uZ2V0SWNvblN0eWxlKGgsXG5cInJ0bFwiPT1iLHRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpKX0sdGhpcyk7Z3x8KGYrPVwib2ZmXCIpO3ZhciBxPXRoaXMubmFtZXx8dGhpcy5jb21tYW5kLGg9cTt0aGlzLmljb24mJiEvXFwuLy50ZXN0KHRoaXMuaWNvbikmJihoPXRoaXMuaWNvbix0aGlzLmljb249bnVsbCk7Zj17aWQ6bSxuYW1lOnEsaWNvbk5hbWU6aCxsYWJlbDp0aGlzLmxhYmVsLGNsczp0aGlzLmNsYXNzTmFtZXx8XCJcIixzdGF0ZTpmLGFyaWFEaXNhYmxlZDpcImRpc2FibGVkXCI9PWY/XCJ0cnVlXCI6XCJmYWxzZVwiLHRpdGxlOnRoaXMudGl0bGUsdGl0bGVKczpsLmdlY2tvJiYhbC5oYz9cIlwiOih0aGlzLnRpdGxlfHxcIlwiKS5yZXBsYWNlKFwiJ1wiLFwiXCIpLGhhc0Fycm93OnRoaXMuaGFzQXJyb3c/XCJ0cnVlXCI6XCJmYWxzZVwiLGtleWRvd25Gbjp1LGZvY3VzRm46dixjbGlja0ZuOm4sc3R5bGU6Q0tFRElUT1Iuc2tpbi5nZXRJY29uU3R5bGUoaCxcInJ0bFwiPT1hLmxhbmcuZGlyLHRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpLGFycm93SHRtbDp0aGlzLmhhc0Fycm93P1xuci5vdXRwdXQoKTpcIlwifTt0Lm91dHB1dChmLGIpO2lmKHRoaXMub25SZW5kZXIpdGhpcy5vblJlbmRlcigpO3JldHVybiBkfSxzZXRTdGF0ZTpmdW5jdGlvbihhKXtpZih0aGlzLl8uc3RhdGU9PWEpcmV0dXJuITE7dGhpcy5fLnN0YXRlPWE7dmFyIGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uaWQpO3JldHVybiBiPyhiLnNldFN0YXRlKGEsXCJja2VfYnV0dG9uXCIpLGE9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEP2Iuc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCEwKTpiLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiksdGhpcy5oYXNBcnJvdz8oYT1hPT1DS0VESVRPUi5UUklTVEFURV9PTj90aGlzLl8uZWRpdG9yLmxhbmcuYnV0dG9uLnNlbGVjdGVkTGFiZWwucmVwbGFjZSgvJTEvZyx0aGlzLmxhYmVsKTp0aGlzLmxhYmVsLENLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmlkK1wiX2xhYmVsXCIpLnNldFRleHQoYSkpOmE9PUNLRURJVE9SLlRSSVNUQVRFX09OP1xuYi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiwhMCk6Yi5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiksITApOiExfSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uc3RhdGV9LHRvRmVhdHVyZTpmdW5jdGlvbihhKXtpZih0aGlzLl8uZmVhdHVyZSlyZXR1cm4gdGhpcy5fLmZlYXR1cmU7dmFyIGI9dGhpczt0aGlzLmFsbG93ZWRDb250ZW50fHx0aGlzLnJlcXVpcmVkQ29udGVudHx8IXRoaXMuY29tbWFuZHx8KGI9YS5nZXRDb21tYW5kKHRoaXMuY29tbWFuZCl8fGIpO3JldHVybiB0aGlzLl8uZmVhdHVyZT1ifX07Q0tFRElUT1IudWkucHJvdG90eXBlLmFkZEJ1dHRvbj1mdW5jdGlvbihhLGIpe3RoaXMuYWRkKGEsQ0tFRElUT1IuVUlfQlVUVE9OLGIpfX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJwYW5lbGJ1dHRvblwiLHtyZXF1aXJlczpcImJ1dHRvblwiLG9uTG9hZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoYyl7dmFyIGE9dGhpcy5fO2Euc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiYodGhpcy5jcmVhdGVQYW5lbChjKSxhLm9uP2EucGFuZWwuaGlkZSgpOmEucGFuZWwuc2hvd0Jsb2NrKHRoaXMuXy5pZCx0aGlzLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmlkKSw0KSl9Q0tFRElUT1IudWkucGFuZWxCdXR0b249Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IudWkuYnV0dG9uLCQ6ZnVuY3Rpb24oYyl7dmFyIGE9Yy5wYW5lbHx8e307ZGVsZXRlIGMucGFuZWw7dGhpcy5iYXNlKGMpO3RoaXMuZG9jdW1lbnQ9YS5wYXJlbnQmJmEucGFyZW50LmdldERvY3VtZW50KCl8fENLRURJVE9SLmRvY3VtZW50O2EuYmxvY2s9e2F0dHJpYnV0ZXM6YS5hdHRyaWJ1dGVzfTt0aGlzLmhhc0Fycm93PWEudG9vbGJhclJlbGF0ZWQ9XG4hMDt0aGlzLmNsaWNrPWU7dGhpcy5fPXtwYW5lbERlZmluaXRpb246YX19LHN0YXRpY3M6e2hhbmRsZXI6e2NyZWF0ZTpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLnBhbmVsQnV0dG9uKGMpfX19LHByb3RvOntjcmVhdGVQYW5lbDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLl87aWYoIWEucGFuZWwpe3ZhciBmPXRoaXMuXy5wYW5lbERlZmluaXRpb24sZT10aGlzLl8ucGFuZWxEZWZpbml0aW9uLmJsb2NrLGc9Zi5wYXJlbnR8fENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSxkPXRoaXMuXy5wYW5lbD1uZXcgQ0tFRElUT1IudWkuZmxvYXRQYW5lbChjLGcsZiksZj1kLmFkZEJsb2NrKGEuaWQsZSksYj10aGlzO2Qub25TaG93PWZ1bmN0aW9uKCl7Yi5jbGFzc05hbWUmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhiLmNsYXNzTmFtZStcIl9wYW5lbFwiKTtiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTthLm9uPTE7Yi5lZGl0b3JGb2N1cyYmYy5mb2N1cygpO2lmKGIub25PcGVuKWIub25PcGVuKCl9O1xuZC5vbkhpZGU9ZnVuY3Rpb24oZCl7Yi5jbGFzc05hbWUmJnRoaXMuZWxlbWVudC5nZXRGaXJzdCgpLnJlbW92ZUNsYXNzKGIuY2xhc3NOYW1lK1wiX3BhbmVsXCIpO2Iuc2V0U3RhdGUoYi5tb2RlcyYmYi5tb2Rlc1tjLm1vZGVdP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCk7YS5vbj0wO2lmKCFkJiZiLm9uQ2xvc2UpYi5vbkNsb3NlKCl9O2Qub25Fc2NhcGU9ZnVuY3Rpb24oKXtkLmhpZGUoMSk7Yi5kb2N1bWVudC5nZXRCeUlkKGEuaWQpLmZvY3VzKCl9O2lmKHRoaXMub25CbG9jayl0aGlzLm9uQmxvY2soZCxmKTtmLm9uSGlkZT1mdW5jdGlvbigpe2Eub249MDtiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09GRil9fX19fSl9LGJlZm9yZUluaXQ6ZnVuY3Rpb24oZSl7ZS51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX1BBTkVMQlVUVE9OLENLRURJVE9SLnVpLnBhbmVsQnV0dG9uLmhhbmRsZXIpfX0pO1xuQ0tFRElUT1IuVUlfUEFORUxCVVRUT049XCJwYW5lbGJ1dHRvblwiOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicGFuZWxcIix7YmVmb3JlSW5pdDpmdW5jdGlvbihhKXthLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfUEFORUwsQ0tFRElUT1IudWkucGFuZWwuaGFuZGxlcil9fSk7Q0tFRElUT1IuVUlfUEFORUw9XCJwYW5lbFwiO0NLRURJVE9SLnVpLnBhbmVsPWZ1bmN0aW9uKGEsYil7YiYmQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYik7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMse2NsYXNzTmFtZTpcIlwiLGNzczpbXX0pO3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCk7dGhpcy5kb2N1bWVudD1hO3RoaXMuaXNGcmFtZWQ9dGhpcy5mb3JjZUlGcmFtZXx8dGhpcy5jc3MubGVuZ3RoO3RoaXMuXz17YmxvY2tzOnt9fX07Q0tFRElUT1IudWkucGFuZWwuaGFuZGxlcj17Y3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IudWkucGFuZWwoYSl9fTt2YXIgZj1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsXCIsXG4nXFx4M2NkaXYgbGFuZ1xceDNkXCJ7bGFuZ0NvZGV9XCIgaWRcXHgzZFwie2lkfVwiIGRpclxceDNke2Rpcn0gY2xhc3NcXHgzZFwiY2tlIGNrZV9yZXNldF9hbGwge2VkaXRvcklkfSBja2VfcGFuZWwgY2tlX3BhbmVsIHtjbHN9IGNrZV97ZGlyfVwiIHN0eWxlXFx4M2RcInotaW5kZXg6e3otaW5kZXh9XCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNle2ZyYW1lfVxceDNjL2RpdlxceDNlJyksZz1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsLWZyYW1lXCIsJ1xceDNjaWZyYW1lIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfZnJhbWVcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGZyYW1lYm9yZGVyXFx4M2RcIjBcIiBzcmNcXHgzZFwie3NyY31cIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKSxoPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtZnJhbWUtaW5uZXJcIiwnXFx4M2MhRE9DVFlQRSBodG1sXFx4M2VcXHgzY2h0bWwgY2xhc3NcXHgzZFwiY2tlX3BhbmVsX2NvbnRhaW5lciB7ZW52fVwiIGRpclxceDNkXCJ7ZGlyfVwiIGxhbmdcXHgzZFwie2xhbmdDb2RlfVwiXFx4M2VcXHgzY2hlYWRcXHgzZXtjc3N9XFx4M2MvaGVhZFxceDNlXFx4M2Nib2R5IGNsYXNzXFx4M2RcImNrZV97ZGlyfVwiIHN0eWxlXFx4M2RcIm1hcmdpbjowO3BhZGRpbmc6MFwiIG9ubG9hZFxceDNkXCJ7b25sb2FkfVwiXFx4M2VcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2UnKTtcbkNLRURJVE9SLnVpLnBhbmVsLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5nZXRIb2xkZXJFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmhvbGRlcjtpZighYSl7aWYodGhpcy5pc0ZyYW1lZCl7dmFyIGE9dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQrXCJfZnJhbWVcIiksYj1hLmdldFBhcmVudCgpLGE9YS5nZXRGcmFtZURvY3VtZW50KCk7Q0tFRElUT1IuZW52LmlPUyYmYi5zZXRTdHlsZXMoe292ZXJmbG93Olwic2Nyb2xsXCIsXCItd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZ1wiOlwidG91Y2hcIn0pO2I9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oQ0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3RoaXMuaXNMb2FkZWQ9ITA7aWYodGhpcy5vbkxvYWQpdGhpcy5vbkxvYWQoKX0sdGhpcykpO2Eud3JpdGUoaC5vdXRwdXQoQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHtjc3M6Q0tFRElUT1IudG9vbHMuYnVpbGRTdHlsZUh0bWwodGhpcy5jc3MpLG9ubG9hZDpcIndpbmRvdy5wYXJlbnQuQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKFwiK1xuYitcIik7XCJ9LGQpKSk7YS5nZXRXaW5kb3coKS4kLkNLRURJVE9SPUNLRURJVE9SO2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLmdldEtleXN0cm9rZSgpLGM9dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQpLmdldEF0dHJpYnV0ZShcImRpclwiKTt0aGlzLl8ub25LZXlEb3duJiYhMT09PXRoaXMuXy5vbktleURvd24oYik/YS5kYXRhLnByZXZlbnREZWZhdWx0KCk6KDI3PT1ifHxiPT0oXCJydGxcIj09Yz8zOTozNykpJiZ0aGlzLm9uRXNjYXBlJiYhMT09PXRoaXMub25Fc2NhcGUoYikmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKTthPWEuZ2V0Qm9keSgpO2EudW5zZWxlY3RhYmxlKCk7Q0tFRElUT1IuZW52LmFpciYmQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKGIpfWVsc2UgYT10aGlzLmRvY3VtZW50LmdldEJ5SWQodGhpcy5pZCk7dGhpcy5fLmhvbGRlcj1hfXJldHVybiBhfTt2YXIgZD17ZWRpdG9ySWQ6YS5pZCxpZDp0aGlzLmlkLGxhbmdDb2RlOmEubGFuZ0NvZGUsXG5kaXI6YS5sYW5nLmRpcixjbHM6dGhpcy5jbGFzc05hbWUsZnJhbWU6XCJcIixlbnY6Q0tFRElUT1IuZW52LmNzc0NsYXNzLFwiei1pbmRleFwiOmEuY29uZmlnLmJhc2VGbG9hdFpJbmRleCsxfTtpZih0aGlzLmlzRnJhbWVkKXt2YXIgZT1DS0VESVRPUi5lbnYuYWlyP1wiamF2YXNjcmlwdDp2b2lkKDApXCI6Q0tFRElUT1IuZW52LmllP1wiamF2YXNjcmlwdDp2b2lkKGZ1bmN0aW9uKCl7XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KCkpXCI6XCJcIjtkLmZyYW1lPWcub3V0cHV0KHtpZDp0aGlzLmlkK1wiX2ZyYW1lXCIsc3JjOmV9KX1lPWYub3V0cHV0KGQpO2ImJmIucHVzaChlKTtyZXR1cm4gZX0sYWRkQmxvY2s6ZnVuY3Rpb24oYSxiKXtiPXRoaXMuXy5ibG9ja3NbYV09YiBpbnN0YW5jZW9mIENLRURJVE9SLnVpLnBhbmVsLmJsb2NrP2I6bmV3IENLRURJVE9SLnVpLnBhbmVsLmJsb2NrKHRoaXMuZ2V0SG9sZGVyRWxlbWVudCgpLFxuYik7dGhpcy5fLmN1cnJlbnRCbG9ja3x8dGhpcy5zaG93QmxvY2soYSk7cmV0dXJuIGJ9LGdldEJsb2NrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl8uYmxvY2tzW2FdfSxzaG93QmxvY2s6ZnVuY3Rpb24oYSl7YT10aGlzLl8uYmxvY2tzW2FdO3ZhciBiPXRoaXMuXy5jdXJyZW50QmxvY2ssZD0hdGhpcy5mb3JjZUlGcmFtZXx8Q0tFRElUT1IuZW52LmllP3RoaXMuXy5ob2xkZXI6dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQrXCJfZnJhbWVcIik7YiYmYi5oaWRlKCk7dGhpcy5fLmN1cnJlbnRCbG9jaz1hO0NLRURJVE9SLmZpcmUoXCJhcmlhV2lkZ2V0XCIsZCk7YS5fLmZvY3VzSW5kZXg9LTE7dGhpcy5fLm9uS2V5RG93bj1hLm9uS2V5RG93biYmQ0tFRElUT1IudG9vbHMuYmluZChhLm9uS2V5RG93bixhKTthLnNob3coKTtyZXR1cm4gYX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LnJlbW92ZSgpfX07Q0tFRElUT1IudWkucGFuZWwuYmxvY2s9XG5DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihhLGIpe3RoaXMuZWxlbWVudD1hLmFwcGVuZChhLmdldERvY3VtZW50KCkuY3JlYXRlRWxlbWVudChcImRpdlwiLHthdHRyaWJ1dGVzOnt0YWJpbmRleDotMSxcImNsYXNzXCI6XCJja2VfcGFuZWxfYmxvY2tcIn0sc3R5bGVzOntkaXNwbGF5Olwibm9uZVwifX0pKTtiJiZDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxiKTt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlcyh7cm9sZTp0aGlzLmF0dHJpYnV0ZXMucm9sZXx8XCJwcmVzZW50YXRpb25cIixcImFyaWEtbGFiZWxcIjp0aGlzLmF0dHJpYnV0ZXNbXCJhcmlhLWxhYmVsXCJdLHRpdGxlOnRoaXMuYXR0cmlidXRlcy50aXRsZXx8dGhpcy5hdHRyaWJ1dGVzW1wiYXJpYS1sYWJlbFwiXX0pO3RoaXMua2V5cz17fTt0aGlzLl8uZm9jdXNJbmRleD0tMTt0aGlzLmVsZW1lbnQuZGlzYWJsZUNvbnRleHRNZW51KCl9LF86e21hcmtJdGVtOmZ1bmN0aW9uKGEpey0xIT1hJiYoYT10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIikuZ2V0SXRlbSh0aGlzLl8uZm9jdXNJbmRleD1cbmEpLENLRURJVE9SLmVudi53ZWJraXQmJmEuZ2V0RG9jdW1lbnQoKS5nZXRXaW5kb3coKS5mb2N1cygpLGEuZm9jdXMoKSx0aGlzLm9uTWFyayYmdGhpcy5vbk1hcmsoYSkpfX0scHJvdG86e3Nob3c6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIil9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9uSGlkZSYmITA9PT10aGlzLm9uSGlkZS5jYWxsKHRoaXMpfHx0aGlzLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpfSxvbktleURvd246ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmtleXNbYV07c3dpdGNoKGQpe2Nhc2UgXCJuZXh0XCI6Zm9yKHZhciBlPXRoaXMuXy5mb2N1c0luZGV4LGQ9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGM7Yz1kLmdldEl0ZW0oKytlKTspaWYoYy5nZXRBdHRyaWJ1dGUoXCJfY2tlX2ZvY3VzXCIpJiZjLiQub2Zmc2V0V2lkdGgpe3RoaXMuXy5mb2N1c0luZGV4PWU7Yy5mb2N1cygpO2JyZWFrfXJldHVybiBjfHxcbmI/ITE6KHRoaXMuXy5mb2N1c0luZGV4PS0xLHRoaXMub25LZXlEb3duKGEsMSkpO2Nhc2UgXCJwcmV2XCI6ZT10aGlzLl8uZm9jdXNJbmRleDtmb3IoZD10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIik7MDxlJiYoYz1kLmdldEl0ZW0oLS1lKSk7KXtpZihjLmdldEF0dHJpYnV0ZShcIl9ja2VfZm9jdXNcIikmJmMuJC5vZmZzZXRXaWR0aCl7dGhpcy5fLmZvY3VzSW5kZXg9ZTtjLmZvY3VzKCk7YnJlYWt9Yz1udWxsfXJldHVybiBjfHxiPyExOih0aGlzLl8uZm9jdXNJbmRleD1kLmNvdW50KCksdGhpcy5vbktleURvd24oYSwxKSk7Y2FzZSBcImNsaWNrXCI6Y2FzZSBcIm1vdXNldXBcIjpyZXR1cm4gZT10aGlzLl8uZm9jdXNJbmRleCwoYz0wPD1lJiZ0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIikuZ2V0SXRlbShlKSkmJihjLiRbZF0/Yy4kW2RdKCk6Yy4kW1wib25cIitkXSgpKSwhMX1yZXR1cm4hMH19fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmxvYXRwYW5lbFwiLHtyZXF1aXJlczpcInBhbmVsXCJ9KTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHYoYSxiLGMsbCxoKXtoPUNLRURJVE9SLnRvb2xzLmdlbktleShiLmdldFVuaXF1ZUlkKCksYy5nZXRVbmlxdWVJZCgpLGEubGFuZy5kaXIsYS51aUNvbG9yfHxcIlwiLGwuY3NzfHxcIlwiLGh8fFwiXCIpO3ZhciBnPWZbaF07Z3x8KGc9ZltoXT1uZXcgQ0tFRElUT1IudWkucGFuZWwoYixsKSxnLmVsZW1lbnQ9Yy5hcHBlbmQoQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoZy5yZW5kZXIoYSksYikpLGcuZWxlbWVudC5zZXRTdHlsZXMoe2Rpc3BsYXk6XCJub25lXCIscG9zaXRpb246XCJhYnNvbHV0ZVwifSkpO3JldHVybiBnfXZhciBmPXt9O0NLRURJVE9SLnVpLmZsb2F0UGFuZWw9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSxiLGMsbCl7ZnVuY3Rpb24gaCgpe2UuaGlkZSgpfWMuZm9yY2VJRnJhbWU9MTtjLnRvb2xiYXJSZWxhdGVkJiZhLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiZcbihiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoXCJja2VfXCIrYS5uYW1lKSk7dmFyIGc9Yi5nZXREb2N1bWVudCgpO2w9dihhLGcsYixjLGx8fDApO3ZhciBtPWwuZWxlbWVudCxwPW0uZ2V0Rmlyc3QoKSxlPXRoaXM7bS5kaXNhYmxlQ29udGV4dE1lbnUoKTt0aGlzLmVsZW1lbnQ9bTt0aGlzLl89e2VkaXRvcjphLHBhbmVsOmwscGFyZW50RWxlbWVudDpiLGRlZmluaXRpb246Yyxkb2N1bWVudDpnLGlmcmFtZTpwLGNoaWxkcmVuOltdLGRpcjphLmxhbmcuZGlyLHNob3dCbG9ja1BhcmFtczpudWxsfTthLm9uKFwibW9kZVwiLGgpO2Eub24oXCJyZXNpemVcIixoKTtnLmdldFdpbmRvdygpLm9uKFwicmVzaXplXCIsZnVuY3Rpb24oKXt0aGlzLnJlcG9zaXRpb24oKX0sdGhpcyl9LHByb3RvOnthZGRCbG9jazpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl8ucGFuZWwuYWRkQmxvY2soYSxiKX0sYWRkTGlzdEJsb2NrOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuXy5wYW5lbC5hZGRMaXN0QmxvY2soYSxcbmIpfSxnZXRCbG9jazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLnBhbmVsLmdldEJsb2NrKGEpfSxzaG93QmxvY2s6ZnVuY3Rpb24oYSxiLGMsbCxoLGcpe3ZhciBtPXRoaXMuXy5wYW5lbCxwPW0uc2hvd0Jsb2NrKGEpO3RoaXMuXy5zaG93QmxvY2tQYXJhbXM9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpO3RoaXMuYWxsb3dCbHVyKCExKTt2YXIgZT10aGlzLl8uZWRpdG9yLmVkaXRhYmxlKCk7dGhpcy5fLnJldHVybkZvY3VzPWUuaGFzRm9jdXM/ZTpuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoQ0tFRElUT1IuZG9jdW1lbnQuJC5hY3RpdmVFbGVtZW50KTt0aGlzLl8uaGlkZVRpbWVvdXQ9MDt2YXIgaz10aGlzLmVsZW1lbnQsZT10aGlzLl8uaWZyYW1lLGU9Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2U/ZTpuZXcgQ0tFRElUT1IuZG9tLndpbmRvdyhlLiQuY29udGVudFdpbmRvdyksZj1rLmdldERvY3VtZW50KCkscj10aGlzLl8ucGFyZW50RWxlbWVudC5nZXRQb3NpdGlvbmVkQW5jZXN0b3IoKSxcbnQ9Yi5nZXREb2N1bWVudFBvc2l0aW9uKGYpLGY9cj9yLmdldERvY3VtZW50UG9zaXRpb24oZik6e3g6MCx5OjB9LHE9XCJydGxcIj09dGhpcy5fLmRpcixkPXQueCsobHx8MCktZi54LG49dC55KyhofHwwKS1mLnk7IXF8fDEhPWMmJjQhPWM/cXx8MiE9YyYmMyE9Y3x8KGQrPWIuJC5vZmZzZXRXaWR0aC0xKTpkKz1iLiQub2Zmc2V0V2lkdGg7aWYoMz09Y3x8ND09YyluKz1iLiQub2Zmc2V0SGVpZ2h0LTE7dGhpcy5fLnBhbmVsLl8ub2Zmc2V0UGFyZW50SWQ9Yi5nZXRJZCgpO2suc2V0U3R5bGVzKHt0b3A6bitcInB4XCIsbGVmdDowLGRpc3BsYXk6XCJcIn0pO2suc2V0T3BhY2l0eSgwKTtrLmdldEZpcnN0KCkucmVtb3ZlU3R5bGUoXCJ3aWR0aFwiKTt0aGlzLl8uZWRpdG9yLmZvY3VzTWFuYWdlci5hZGQoZSk7dGhpcy5fLmJsdXJTZXR8fChDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPSEwLGUub24oXCJibHVyXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gdSgpe2RlbGV0ZSB0aGlzLl8ucmV0dXJuRm9jdXM7XG50aGlzLmhpZGUoKX10aGlzLmFsbG93Qmx1cigpJiZhLmRhdGEuZ2V0UGhhc2UoKT09Q0tFRElUT1IuRVZFTlRfUEhBU0VfQVRfVEFSR0VUJiZ0aGlzLnZpc2libGUmJiF0aGlzLl8uYWN0aXZlQ2hpbGQmJihDS0VESVRPUi5lbnYuaU9TP3RoaXMuXy5oaWRlVGltZW91dHx8KHRoaXMuXy5oaWRlVGltZW91dD1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KHUsMCx0aGlzKSk6dS5jYWxsKHRoaXMpKX0sdGhpcyksZS5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXt0aGlzLl8uZm9jdXNlZD0hMDt0aGlzLmhpZGVDaGlsZCgpO3RoaXMuYWxsb3dCbHVyKCEwKX0sdGhpcyksQ0tFRElUT1IuZW52LmlPUyYmKGUub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fLmhpZGVUaW1lb3V0KX0sdGhpcyksZS5vbihcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXt0aGlzLl8uaGlkZVRpbWVvdXQ9MDt0aGlzLmZvY3VzKCl9LHRoaXMpKSxDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPSExLFxudGhpcy5fLmJsdXJTZXQ9MSk7bS5vbkVzY2FwZT1DS0VESVRPUi50b29scy5iaW5kKGZ1bmN0aW9uKGEpe2lmKHRoaXMub25Fc2NhcGUmJiExPT09dGhpcy5vbkVzY2FwZShhKSlyZXR1cm4hMX0sdGhpcyk7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmJpbmQoZnVuY3Rpb24oKXt2YXIgYT1rO2EucmVtb3ZlU3R5bGUoXCJ3aWR0aFwiKTtpZihwLmF1dG9TaXplKXt2YXIgYj1wLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKSxiPShDS0VESVRPUi5lbnYud2Via2l0P3AuZWxlbWVudDpiLmdldEJvZHkoKSkuJC5zY3JvbGxXaWR0aDtDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MmJjA8YiYmKGIrPShhLiQub2Zmc2V0V2lkdGh8fDApLShhLiQuY2xpZW50V2lkdGh8fDApKzMpO2Euc2V0U3R5bGUoXCJ3aWR0aFwiLGIrMTArXCJweFwiKTtiPXAuZWxlbWVudC4kLnNjcm9sbEhlaWdodDtDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MmJlxuMDxiJiYoYis9KGEuJC5vZmZzZXRIZWlnaHR8fDApLShhLiQuY2xpZW50SGVpZ2h0fHwwKSszKTthLnNldFN0eWxlKFwiaGVpZ2h0XCIsYitcInB4XCIpO20uXy5jdXJyZW50QmxvY2suZWxlbWVudC5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIikucmVtb3ZlU3R5bGUoXCJkaXNwbGF5XCIpfWVsc2UgYS5yZW1vdmVTdHlsZShcImhlaWdodFwiKTtxJiYoZC09ay4kLm9mZnNldFdpZHRoKTtrLnNldFN0eWxlKFwibGVmdFwiLGQrXCJweFwiKTt2YXIgYj1tLmVsZW1lbnQuZ2V0V2luZG93KCksYT1rLiQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYj1iLmdldFZpZXdQYW5lU2l6ZSgpLGM9YS53aWR0aHx8YS5yaWdodC1hLmxlZnQsZT1hLmhlaWdodHx8YS5ib3R0b20tYS50b3AsbD1xP2EucmlnaHQ6Yi53aWR0aC1hLmxlZnQsaD1xP2Iud2lkdGgtYS5yaWdodDphLmxlZnQ7cT9sPGMmJihkPWg+Yz9kK2M6Yi53aWR0aD5jP2QtYS5sZWZ0OmQtYS5yaWdodCtiLndpZHRoKTpsPGMmJihkPWg+Yz9kLWM6Yi53aWR0aD5cbmM/ZC1hLnJpZ2h0K2Iud2lkdGg6ZC1hLmxlZnQpO2M9YS50b3A7Yi5oZWlnaHQtYS50b3A8ZSYmKG49Yz5lP24tZTpiLmhlaWdodD5lP24tYS5ib3R0b20rYi5oZWlnaHQ6bi1hLnRvcCk7Q0tFRElUT1IuZW52LmllJiYoYj1hPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChrLiQub2Zmc2V0UGFyZW50KSxcImh0bWxcIj09Yi5nZXROYW1lKCkmJihiPWIuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCkpLFwicnRsXCI9PWIuZ2V0Q29tcHV0ZWRTdHlsZShcImRpcmVjdGlvblwiKSYmKGQ9Q0tFRElUT1IuZW52LmllOENvbXBhdD9kLTIqay5nZXREb2N1bWVudCgpLmdldERvY3VtZW50RWxlbWVudCgpLiQuc2Nyb2xsTGVmdDpkLShhLiQuc2Nyb2xsV2lkdGgtYS4kLmNsaWVudFdpZHRoKSkpO3ZhciBhPWsuZ2V0Rmlyc3QoKSxmOyhmPWEuZ2V0Q3VzdG9tRGF0YShcImFjdGl2ZVBhbmVsXCIpKSYmZi5vbkhpZGUmJmYub25IaWRlLmNhbGwodGhpcywxKTthLnNldEN1c3RvbURhdGEoXCJhY3RpdmVQYW5lbFwiLHRoaXMpO1xuay5zZXRTdHlsZXMoe3RvcDpuK1wicHhcIixsZWZ0OmQrXCJweFwifSk7ay5zZXRPcGFjaXR5KDEpO2cmJmcoKX0sdGhpcyk7bS5pc0xvYWRlZD9hKCk6bS5vbkxvYWQ9YTtDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IuZW52LndlYmtpdCYmQ0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsUG9zaXRpb24oKS55O3RoaXMuZm9jdXMoKTtwLmVsZW1lbnQuZm9jdXMoKTtDS0VESVRPUi5lbnYud2Via2l0JiYoQ0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpLiQuc2Nyb2xsVG9wPWEpO3RoaXMuYWxsb3dCbHVyKCEwKTt0aGlzLl8uZWRpdG9yLmZpcmUoXCJwYW5lbFNob3dcIix0aGlzKX0sMCx0aGlzKX0sQ0tFRElUT1IuZW52LmFpcj8yMDA6MCx0aGlzKTt0aGlzLnZpc2libGU9MTt0aGlzLm9uU2hvdyYmdGhpcy5vblNob3cuY2FsbCh0aGlzKX0scmVwb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5zaG93QmxvY2tQYXJhbXM7XG50aGlzLnZpc2libGUmJnRoaXMuXy5zaG93QmxvY2tQYXJhbXMmJih0aGlzLmhpZGUoKSx0aGlzLnNob3dCbG9jay5hcHBseSh0aGlzLGEpKX0sZm9jdXM6ZnVuY3Rpb24oKXtpZihDS0VESVRPUi5lbnYud2Via2l0KXt2YXIgYT1DS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKTthJiYhYS5lcXVhbHModGhpcy5fLmlmcmFtZSkmJmEuJC5ibHVyKCl9KHRoaXMuXy5sYXN0Rm9jdXNlZHx8dGhpcy5fLmlmcmFtZS5nZXRGcmFtZURvY3VtZW50KCkuZ2V0V2luZG93KCkpLmZvY3VzKCl9LGJsdXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uaWZyYW1lLmdldEZyYW1lRG9jdW1lbnQoKS5nZXRBY3RpdmUoKTthJiZhLmlzKFwiYVwiKSYmKHRoaXMuXy5sYXN0Rm9jdXNlZD1hKX0saGlkZTpmdW5jdGlvbihhKXtpZih0aGlzLnZpc2libGUmJighdGhpcy5vbkhpZGV8fCEwIT09dGhpcy5vbkhpZGUuY2FsbCh0aGlzKSkpe3RoaXMuaGlkZUNoaWxkKCk7Q0tFRElUT1IuZW52LmdlY2tvJiZ0aGlzLl8uaWZyYW1lLmdldEZyYW1lRG9jdW1lbnQoKS4kLmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xudGhpcy5lbGVtZW50LnNldFN0eWxlKFwiZGlzcGxheVwiLFwibm9uZVwiKTt0aGlzLnZpc2libGU9MDt0aGlzLmVsZW1lbnQuZ2V0Rmlyc3QoKS5yZW1vdmVDdXN0b21EYXRhKFwiYWN0aXZlUGFuZWxcIik7aWYoYT1hJiZ0aGlzLl8ucmV0dXJuRm9jdXMpQ0tFRElUT1IuZW52LndlYmtpdCYmYS50eXBlJiZhLmdldFdpbmRvdygpLiQuZm9jdXMoKSxhLmZvY3VzKCk7ZGVsZXRlIHRoaXMuXy5sYXN0Rm9jdXNlZDt0aGlzLl8uc2hvd0Jsb2NrUGFyYW1zPW51bGw7dGhpcy5fLmVkaXRvci5maXJlKFwicGFuZWxIaWRlXCIsdGhpcyl9fSxhbGxvd0JsdXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLnBhbmVsO3ZvaWQgMCE9PWEmJihiLmFsbG93Qmx1cj1hKTtyZXR1cm4gYi5hbGxvd0JsdXJ9LHNob3dBc0NoaWxkOmZ1bmN0aW9uKGEsYixjLGYsaCxnKXtpZih0aGlzLl8uYWN0aXZlQ2hpbGQhPWF8fGEuXy5wYW5lbC5fLm9mZnNldFBhcmVudElkIT1jLmdldElkKCkpdGhpcy5oaWRlQ2hpbGQoKSxhLm9uSGlkZT1cbkNLRURJVE9SLnRvb2xzLmJpbmQoZnVuY3Rpb24oKXtDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5fLmZvY3VzZWR8fHRoaXMuaGlkZSgpfSwwLHRoaXMpfSx0aGlzKSx0aGlzLl8uYWN0aXZlQ2hpbGQ9YSx0aGlzLl8uZm9jdXNlZD0hMSxhLnNob3dCbG9jayhiLGMsZixoLGcpLHRoaXMuYmx1cigpLChDS0VESVRPUi5lbnYuaWU3Q29tcGF0fHxDS0VESVRPUi5lbnYuaWU2Q29tcGF0KSYmc2V0VGltZW91dChmdW5jdGlvbigpe2EuZWxlbWVudC5nZXRDaGlsZCgwKS4kLnN0eWxlLmNzc1RleHQrPVwiXCJ9LDEwMCl9LGhpZGVDaGlsZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl8uYWN0aXZlQ2hpbGQ7YiYmKGRlbGV0ZSBiLm9uSGlkZSxkZWxldGUgdGhpcy5fLmFjdGl2ZUNoaWxkLGIuaGlkZSgpLGEmJnRoaXMuZm9jdXMoKSl9fX0pO0NLRURJVE9SLm9uKFwiaW5zdGFuY2VEZXN0cm95ZWRcIixmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmlzRW1wdHkoQ0tFRElUT1IuaW5zdGFuY2VzKSxcbmI7Zm9yKGIgaW4gZil7dmFyIGM9ZltiXTthP2MuZGVzdHJveSgpOmMuZWxlbWVudC5oaWRlKCl9YSYmKGY9e30pfSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiY29sb3JidXR0b25cIix7cmVxdWlyZXM6XCJwYW5lbGJ1dHRvbixmbG9hdHBhbmVsXCIsaW5pdDpmdW5jdGlvbihjKXtmdW5jdGlvbiByKHAsZyxlLGgpe3ZhciBrPW5ldyBDS0VESVRPUi5zdHlsZShsW1wiY29sb3JCdXR0b25fXCIrZytcIlN0eWxlXCJdKSxtPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX2NvbG9yQm94XCI7Yy51aS5hZGQocCxDS0VESVRPUi5VSV9QQU5FTEJVVFRPTix7bGFiZWw6ZSx0aXRsZTplLG1vZGVzOnt3eXNpd3lnOjF9LGVkaXRvckZvY3VzOjAsdG9vbGJhcjpcImNvbG9ycyxcIitoLGFsbG93ZWRDb250ZW50OmsscmVxdWlyZWRDb250ZW50OmsscGFuZWw6e2NzczpDS0VESVRPUi5za2luLmdldFBhdGgoXCJlZGl0b3JcIiksYXR0cmlidXRlczp7cm9sZTpcImxpc3Rib3hcIixcImFyaWEtbGFiZWxcIjpmLnBhbmVsVGl0bGV9fSxvbkJsb2NrOmZ1bmN0aW9uKGEsYil7Yi5hdXRvU2l6ZT0hMDtiLmVsZW1lbnQuYWRkQ2xhc3MoXCJja2VfY29sb3JibG9ja1wiKTtcbmIuZWxlbWVudC5zZXRIdG1sKHUoYSxnLG0pKTtiLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCkuc2V0U3R5bGUoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpO0NLRURJVE9SLnVpLmZpcmUoXCJyZWFkeVwiLHRoaXMpO3ZhciBkPWIua2V5cyxlPVwicnRsXCI9PWMubGFuZy5kaXI7ZFtlPzM3OjM5XT1cIm5leHRcIjtkWzQwXT1cIm5leHRcIjtkWzldPVwibmV4dFwiO2RbZT8zOTozN109XCJwcmV2XCI7ZFszOF09XCJwcmV2XCI7ZFtDS0VESVRPUi5TSElGVCs5XT1cInByZXZcIjtkWzMyXT1cImNsaWNrXCJ9LHJlZnJlc2g6ZnVuY3Rpb24oKXtjLmFjdGl2ZUZpbHRlci5jaGVjayhrKXx8dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9LG9uT3BlbjpmdW5jdGlvbigpe3ZhciBhPWMuZ2V0U2VsZWN0aW9uKCksYT1hJiZhLmdldFN0YXJ0RWxlbWVudCgpLGE9Yy5lbGVtZW50UGF0aChhKSxiO2lmKGEpe2E9YS5ibG9ja3x8YS5ibG9ja0xpbWl0fHxjLmRvY3VtZW50LmdldEJvZHkoKTtkbyBiPVxuYSYmYS5nZXRDb21wdXRlZFN0eWxlKFwiYmFja1wiPT1nP1wiYmFja2dyb3VuZC1jb2xvclwiOlwiY29sb3JcIil8fFwidHJhbnNwYXJlbnRcIjt3aGlsZShcImJhY2tcIj09ZyYmXCJ0cmFuc3BhcmVudFwiPT1iJiZhJiYoYT1hLmdldFBhcmVudCgpKSk7YiYmXCJ0cmFuc3BhcmVudFwiIT1ifHwoYj1cIiNmZmZmZmZcIik7dGhpcy5fLnBhbmVsLl8uaWZyYW1lLmdldEZyYW1lRG9jdW1lbnQoKS5nZXRCeUlkKG0pLnNldFN0eWxlKFwiYmFja2dyb3VuZC1jb2xvclwiLGIpO3JldHVybiBifX19KX1mdW5jdGlvbiB1KHAsZyxlKXt2YXIgaD1bXSxrPWwuY29sb3JCdXR0b25fY29sb3JzLnNwbGl0KFwiLFwiKSxtPWMucGx1Z2lucy5jb2xvcmRpYWxvZyYmITEhPT1sLmNvbG9yQnV0dG9uX2VuYWJsZU1vcmUsYT1rLmxlbmd0aCsobT8yOjEpLGI9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEpe3RoaXMucmVtb3ZlTGlzdGVuZXIoXCJva1wiLGQpO3RoaXMucmVtb3ZlTGlzdGVuZXIoXCJjYW5jZWxcIixcbmQpO1wib2tcIj09YS5uYW1lJiZlKHRoaXMuZ2V0Q29udGVudEVsZW1lbnQoXCJwaWNrZXJcIixcInNlbGVjdGVkQ29sb3JcIikuZ2V0VmFsdWUoKSxiKX12YXIgZT1hcmd1bWVudHMuY2FsbGVlO2lmKFwiP1wiPT1hKWMub3BlbkRpYWxvZyhcImNvbG9yZGlhbG9nXCIsZnVuY3Rpb24oKXt0aGlzLm9uKFwib2tcIixkKTt0aGlzLm9uKFwiY2FuY2VsXCIsZCl9KTtlbHNle2MuZm9jdXMoKTtwLmhpZGUoKTtjLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yy5yZW1vdmVTdHlsZShuZXcgQ0tFRElUT1Iuc3R5bGUobFtcImNvbG9yQnV0dG9uX1wiK2IrXCJTdHlsZVwiXSx7Y29sb3I6XCJpbmhlcml0XCJ9KSk7aWYoYSl7dmFyIGY9bFtcImNvbG9yQnV0dG9uX1wiK2IrXCJTdHlsZVwiXTtmLmNoaWxkUnVsZT1cImJhY2tcIj09Yj9mdW5jdGlvbihhKXtyZXR1cm4gdChhKX06ZnVuY3Rpb24oYSl7cmV0dXJuIShhLmlzKFwiYVwiKXx8YS5nZXRFbGVtZW50c0J5VGFnKFwiYVwiKS5jb3VudCgpKXx8dChhKX07Yy5hcHBseVN0eWxlKG5ldyBDS0VESVRPUi5zdHlsZShmLFxue2NvbG9yOmF9KSl9Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpfX0pO2gucHVzaCgnXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb2xvcmF1dG9cIiBfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkdHJ1ZSB0aXRsZVxceDNkXCInLGYuYXV0bywnXCIgb25jbGlja1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJyxiLFwiLG51bGwsJ1wiLGcsXCInKTtyZXR1cm4gZmFsc2U7XFxcIiBocmVmXFx4M2RcXFwiamF2YXNjcmlwdDp2b2lkKCdcIixmLmF1dG8sJ1xcJylcIiByb2xlXFx4M2RcIm9wdGlvblwiIGFyaWEtcG9zaW5zZXRcXHgzZFwiMVwiIGFyaWEtc2V0c2l6ZVxceDNkXCInLGEsJ1wiXFx4M2VcXHgzY3RhYmxlIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgY2VsbHNwYWNpbmdcXHgzZDAgY2VsbHBhZGRpbmdcXHgzZDAgd2lkdGhcXHgzZFwiMTAwJVwiXFx4M2VcXHgzY3RyXFx4M2VcXHgzY3RkXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2NvbG9yYm94XCIgaWRcXHgzZFwiJyxlLCdcIlxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2MvdGRcXHgzZVxceDNjdGQgY29sc3BhblxceDNkNyBhbGlnblxceDNkY2VudGVyXFx4M2UnLFxuZi5hdXRvLCdcXHgzYy90ZFxceDNlXFx4M2MvdHJcXHgzZVxceDNjL3RhYmxlXFx4M2VcXHgzYy9hXFx4M2VcXHgzY3RhYmxlIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgY2VsbHNwYWNpbmdcXHgzZDAgY2VsbHBhZGRpbmdcXHgzZDAgd2lkdGhcXHgzZFwiMTAwJVwiXFx4M2UnKTtmb3IoZT0wO2U8ay5sZW5ndGg7ZSsrKXswPT09ZSU4JiZoLnB1c2goXCJcXHgzYy90clxceDNlXFx4M2N0clxceDNlXCIpO3ZhciBkPWtbZV0uc3BsaXQoXCIvXCIpLG49ZFswXSxxPWRbMV18fG47ZFsxXXx8KG49XCIjXCIrbi5yZXBsYWNlKC9eKC4pKC4pKC4pJC8sXCIkMSQxJDIkMiQzJDNcIikpO2Q9Yy5sYW5nLmNvbG9yYnV0dG9uLmNvbG9yc1txXXx8cTtoLnB1c2goJ1xceDNjdGRcXHgzZVxceDNjYSBjbGFzc1xceDNkXCJja2VfY29sb3Jib3hcIiBfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkdHJ1ZSB0aXRsZVxceDNkXCInLGQsJ1wiIG9uY2xpY2tcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKCcsYixcIiwnXCIsbixcIicsJ1wiLGcsXCInKTsgcmV0dXJuIGZhbHNlO1xcXCIgaHJlZlxceDNkXFxcImphdmFzY3JpcHQ6dm9pZCgnXCIsXG5kLCdcXCcpXCIgcm9sZVxceDNkXCJvcHRpb25cIiBhcmlhLXBvc2luc2V0XFx4M2RcIicsZSsyLCdcIiBhcmlhLXNldHNpemVcXHgzZFwiJyxhLCdcIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9jb2xvcmJveFwiIHN0eWxlXFx4M2RcImJhY2tncm91bmQtY29sb3I6IycscSwnXCJcXHgzZVxceDNjL3NwYW5cXHgzZVxceDNjL2FcXHgzZVxceDNjL3RkXFx4M2UnKX1tJiZoLnB1c2goJ1xceDNjL3RyXFx4M2VcXHgzY3RyXFx4M2VcXHgzY3RkIGNvbHNwYW5cXHgzZDggYWxpZ25cXHgzZGNlbnRlclxceDNlXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb2xvcm1vcmVcIiBfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkdHJ1ZSB0aXRsZVxceDNkXCInLGYubW9yZSwnXCIgb25jbGlja1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJyxiLFwiLCc/JywnXCIsZyxcIicpO3JldHVybiBmYWxzZTtcXFwiIGhyZWZcXHgzZFxcXCJqYXZhc2NyaXB0OnZvaWQoJ1wiLGYubW9yZSxcIicpXFxcIlwiLCcgcm9sZVxceDNkXCJvcHRpb25cIiBhcmlhLXBvc2luc2V0XFx4M2RcIicsXG5hLCdcIiBhcmlhLXNldHNpemVcXHgzZFwiJyxhLCdcIlxceDNlJyxmLm1vcmUsXCJcXHgzYy9hXFx4M2VcXHgzYy90ZFxceDNlXCIpO2gucHVzaChcIlxceDNjL3RyXFx4M2VcXHgzYy90YWJsZVxceDNlXCIpO3JldHVybiBoLmpvaW4oXCJcIil9ZnVuY3Rpb24gdChjKXtyZXR1cm5cImZhbHNlXCI9PWMuZ2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIpfHxjLmdldEF0dHJpYnV0ZShcImRhdGEtbm9zdHlsZVwiKX12YXIgbD1jLmNvbmZpZyxmPWMubGFuZy5jb2xvcmJ1dHRvbjtDS0VESVRPUi5lbnYuaGN8fChyKFwiVGV4dENvbG9yXCIsXCJmb3JlXCIsZi50ZXh0Q29sb3JUaXRsZSwxMCkscihcIkJHQ29sb3JcIixcImJhY2tcIixmLmJnQ29sb3JUaXRsZSwyMCkpfX0pO0NLRURJVE9SLmNvbmZpZy5jb2xvckJ1dHRvbl9jb2xvcnM9XCIwMDAsODAwMDAwLDhCNDUxMywyRjRGNEYsMDA4MDgwLDAwMDA4MCw0QjAwODIsNjk2OTY5LEIyMjIyMixBNTJBMkEsREFBNTIwLDAwNjQwMCw0MEUwRDAsMDAwMENELDgwMDA4MCw4MDgwODAsRjAwLEZGOEMwMCxGRkQ3MDAsMDA4MDAwLDBGRiwwMEYsRUU4MkVFLEE5QTlBOSxGRkEwN0EsRkZBNTAwLEZGRkYwMCwwMEZGMDAsQUZFRUVFLEFERDhFNixEREEwREQsRDNEM0QzLEZGRjBGNSxGQUVCRDcsRkZGRkUwLEYwRkZGMCxGMEZGRkYsRjBGOEZGLEU2RTZGQSxGRkZcIjtcbkNLRURJVE9SLmNvbmZpZy5jb2xvckJ1dHRvbl9mb3JlU3R5bGU9e2VsZW1lbnQ6XCJzcGFuXCIsc3R5bGVzOntjb2xvcjpcIiMoY29sb3IpXCJ9LG92ZXJyaWRlczpbe2VsZW1lbnQ6XCJmb250XCIsYXR0cmlidXRlczp7Y29sb3I6bnVsbH19XX07Q0tFRElUT1IuY29uZmlnLmNvbG9yQnV0dG9uX2JhY2tTdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e1wiYmFja2dyb3VuZC1jb2xvclwiOlwiIyhjb2xvcilcIn19O0NLRURJVE9SLnBsdWdpbnMuY29sb3JkaWFsb2c9e3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImNvbG9yZGlhbG9nXCIpO2MuZWRpdG9yRm9jdXM9ITE7Yi5hZGRDb21tYW5kKFwiY29sb3JkaWFsb2dcIixjKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiY29sb3JkaWFsb2dcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2NvbG9yZGlhbG9nLmpzXCIpO2IuZ2V0Q29sb3JGcm9tRGlhbG9nPWZ1bmN0aW9uKGMsZil7dmFyIGQ9ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVMaXN0ZW5lcihcIm9rXCIsZCk7dGhpcy5yZW1vdmVMaXN0ZW5lcihcImNhbmNlbFwiLGQpO2E9XCJva1wiPT1hLm5hbWU/dGhpcy5nZXRWYWx1ZU9mKFwicGlja2VyXCIsXCJzZWxlY3RlZENvbG9yXCIpOm51bGw7Yy5jYWxsKGYsYSl9LGU9ZnVuY3Rpb24oYSl7YS5vbihcIm9rXCIsZCk7YS5vbihcImNhbmNlbFwiLGQpfTtiLmV4ZWNDb21tYW5kKFwiY29sb3JkaWFsb2dcIik7aWYoYi5fLnN0b3JlZERpYWxvZ3MmJlxuYi5fLnN0b3JlZERpYWxvZ3MuY29sb3JkaWFsb2cpZShiLl8uc3RvcmVkRGlhbG9ncy5jb2xvcmRpYWxvZyk7ZWxzZSBDS0VESVRPUi5vbihcImRpYWxvZ0RlZmluaXRpb25cIixmdW5jdGlvbihhKXtpZihcImNvbG9yZGlhbG9nXCI9PWEuZGF0YS5uYW1lKXt2YXIgYj1hLmRhdGEuZGVmaW5pdGlvbjthLnJlbW92ZUxpc3RlbmVyKCk7Yi5vbkxvYWQ9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoYi5vbkxvYWQsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZSh0aGlzKTtiLm9uTG9hZD1hO1wiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEuY2FsbCh0aGlzKX19KX19KX19fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImNvbG9yZGlhbG9nXCIsQ0tFRElUT1IucGx1Z2lucy5jb2xvcmRpYWxvZyk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ0ZW1wbGF0ZXNcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe0NLRURJVE9SLmRpYWxvZy5hZGQoXCJ0ZW1wbGF0ZXNcIixDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiZGlhbG9ncy90ZW1wbGF0ZXMuanNcIikpO2EuYWRkQ29tbWFuZChcInRlbXBsYXRlc1wiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwidGVtcGxhdGVzXCIpKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJUZW1wbGF0ZXNcIix7bGFiZWw6YS5sYW5nLnRlbXBsYXRlcy5idXR0b24sY29tbWFuZDpcInRlbXBsYXRlc1wiLHRvb2xiYXI6XCJkb2N0b29scywxMFwifSl9fSk7dmFyIGM9e30sZj17fTtDS0VESVRPUi5hZGRUZW1wbGF0ZXM9ZnVuY3Rpb24oYSxkKXtjW2FdPWR9O0NLRURJVE9SLmdldFRlbXBsYXRlcz1mdW5jdGlvbihhKXtyZXR1cm4gY1thXX07Q0tFRElUT1IubG9hZFRlbXBsYXRlcz1mdW5jdGlvbihhLGQpe2Zvcih2YXIgZT1cbltdLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspZlthW2JdXXx8KGUucHVzaChhW2JdKSxmW2FbYl1dPTEpO2UubGVuZ3RoP0NLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKGUsZCk6c2V0VGltZW91dChkLDApfX0pKCk7Q0tFRElUT1IuY29uZmlnLnRlbXBsYXRlc19maWxlcz1bQ0tFRElUT1IuZ2V0VXJsKFwicGx1Z2lucy90ZW1wbGF0ZXMvdGVtcGxhdGVzL2RlZmF1bHQuanNcIildO0NLRURJVE9SLmNvbmZpZy50ZW1wbGF0ZXNfcmVwbGFjZUNvbnRlbnQ9ITA7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJtZW51XCIse3JlcXVpcmVzOlwiZmxvYXRwYW5lbFwiLGJlZm9yZUluaXQ6ZnVuY3Rpb24oZyl7Zm9yKHZhciBoPWcuY29uZmlnLm1lbnVfZ3JvdXBzLnNwbGl0KFwiLFwiKSxwPWcuXy5tZW51R3JvdXBzPXt9LG49Zy5fLm1lbnVJdGVtcz17fSxhPTA7YTxoLmxlbmd0aDthKyspcFtoW2FdXT1hKzE7Zy5hZGRNZW51R3JvdXA9ZnVuY3Rpb24oYixhKXtwW2JdPWF8fDEwMH07Zy5hZGRNZW51SXRlbT1mdW5jdGlvbihhLGMpe3BbYy5ncm91cF0mJihuW2FdPW5ldyBDS0VESVRPUi5tZW51SXRlbSh0aGlzLGEsYykpfTtnLmFkZE1lbnVJdGVtcz1mdW5jdGlvbihhKXtmb3IodmFyIGMgaW4gYSl0aGlzLmFkZE1lbnVJdGVtKGMsYVtjXSl9O2cuZ2V0TWVudUl0ZW09ZnVuY3Rpb24oYSl7cmV0dXJuIG5bYV19O2cucmVtb3ZlTWVudUl0ZW09ZnVuY3Rpb24oYSl7ZGVsZXRlIG5bYV19fX0pO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhhKXthLnNvcnQoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYS5ncm91cDxjLmdyb3VwPy0xOmEuZ3JvdXA+Yy5ncm91cD8xOmEub3JkZXI8Yy5vcmRlcj8tMTphLm9yZGVyPmMub3JkZXI/MTowfSl9dmFyIGg9J1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbWVudWl0ZW1cIlxceDNlXFx4M2NhIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfbWVudWJ1dHRvbiBja2VfbWVudWJ1dHRvbl9fe25hbWV9IGNrZV9tZW51YnV0dG9uX3tzdGF0ZX0ge2Nsc31cIiBocmVmXFx4M2RcIntocmVmfVwiIHRpdGxlXFx4M2RcInt0aXRsZX1cIiB0YWJpbmRleFxceDNkXCItMVwiX2NrZV9mb2N1c1xceDNkMSBoaWRlZm9jdXNcXHgzZFwidHJ1ZVwiIHJvbGVcXHgzZFwie3JvbGV9XCIgYXJpYS1oYXNwb3B1cFxceDNkXCJ7aGFzUG9wdXB9XCIgYXJpYS1kaXNhYmxlZFxceDNkXCJ7ZGlzYWJsZWR9XCIge2FyaWFDaGVja2VkfSc7Q0tFRElUT1IuZW52LmdlY2tvJiZDS0VESVRPUi5lbnYubWFjJiYoaCs9JyBvbmtleXByZXNzXFx4M2RcInJldHVybiBmYWxzZTtcIicpO1xuQ0tFRElUT1IuZW52LmdlY2tvJiYoaCs9JyBvbmJsdXJcXHgzZFwidGhpcy5zdHlsZS5jc3NUZXh0IFxceDNkIHRoaXMuc3R5bGUuY3NzVGV4dDtcIicpO3ZhciBoPWgrKCcgb25tb3VzZW92ZXJcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtob3ZlckZufSx7aW5kZXh9KTtcIiBvbm1vdXNlb3V0XFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7bW92ZU91dEZufSx7aW5kZXh9KTtcIiAnKyhDS0VESVRPUi5lbnYuaWU/J29uY2xpY2tcXHgzZFwicmV0dXJuIGZhbHNlO1wiIG9ubW91c2V1cCc6XCJvbmNsaWNrXCIpKydcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtjbGlja0ZufSx7aW5kZXh9KTsgcmV0dXJuIGZhbHNlO1wiXFx4M2UnKSxwPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwibWVudUl0ZW1cIixoKydcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX21lbnVidXR0b25faW5uZXJcIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9tZW51YnV0dG9uX2ljb25cIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9idXR0b25faWNvbiBja2VfYnV0dG9uX197aWNvbk5hbWV9X2ljb25cIiBzdHlsZVxceDNkXCJ7aWNvblN0eWxlfVwiXFx4M2VcXHgzYy9zcGFuXFx4M2VcXHgzYy9zcGFuXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX21lbnVidXR0b25fbGFiZWxcIlxceDNle2xhYmVsfVxceDNjL3NwYW5cXHgzZXthcnJvd0h0bWx9XFx4M2Mvc3BhblxceDNlXFx4M2MvYVxceDNlXFx4M2Mvc3BhblxceDNlJyksXG5uPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwibWVudUFycm93XCIsJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbWVudWFycm93XCJcXHgzZVxceDNjc3BhblxceDNle2xhYmVsfVxceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZScpO0NLRURJVE9SLm1lbnU9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSxiKXtiPXRoaXMuXy5kZWZpbml0aW9uPWJ8fHt9O3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCk7dGhpcy5lZGl0b3I9YTt0aGlzLml0ZW1zPVtdO3RoaXMuXy5saXN0ZW5lcnM9W107dGhpcy5fLmxldmVsPWIubGV2ZWx8fDE7dmFyIGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGIucGFuZWwse2NzczpbQ0tFRElUT1Iuc2tpbi5nZXRQYXRoKFwiZWRpdG9yXCIpXSxsZXZlbDp0aGlzLl8ubGV2ZWwtMSxibG9jazp7fX0pLG09Yy5ibG9jay5hdHRyaWJ1dGVzPWMuYXR0cmlidXRlc3x8e307IW0ucm9sZSYmKG0ucm9sZT1cIm1lbnVcIik7dGhpcy5fLnBhbmVsRGVmaW5pdGlvbj1cbmN9LF86e29uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLGI9YSYmYS5nZXRTdGFydEVsZW1lbnQoKSxjPXRoaXMuZWRpdG9yLmVsZW1lbnRQYXRoKCksbT10aGlzLl8ubGlzdGVuZXJzO3RoaXMucmVtb3ZlQWxsKCk7Zm9yKHZhciBlPTA7ZTxtLmxlbmd0aDtlKyspe3ZhciBsPW1bZV0oYixhLGMpO2lmKGwpZm9yKHZhciBrIGluIGwpe3ZhciBmPXRoaXMuZWRpdG9yLmdldE1lbnVJdGVtKGspOyFmfHxmLmNvbW1hbmQmJiF0aGlzLmVkaXRvci5nZXRDb21tYW5kKGYuY29tbWFuZCkuc3RhdGV8fChmLnN0YXRlPWxba10sdGhpcy5hZGQoZikpfX19LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5oaWRlKCk7aWYoYS5vbkNsaWNrKWEub25DbGljaygpO2Vsc2UgYS5jb21tYW5kJiZ0aGlzLmVkaXRvci5leGVjQ29tbWFuZChhLmNvbW1hbmQpfSxvbkVzY2FwZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcmVudDtiP2IuXy5wYW5lbC5oaWRlQ2hpbGQoMSk6XG4yNz09YSYmdGhpcy5oaWRlKDEpO3JldHVybiExfSxvbkhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9uSGlkZSYmdGhpcy5vbkhpZGUoKX0sc2hvd1N1Yk1lbnU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLnN1Yk1lbnUsYz10aGlzLml0ZW1zW2FdO2lmKGM9Yy5nZXRJdGVtcyYmYy5nZXRJdGVtcygpKXtiP2IucmVtb3ZlQWxsKCk6KGI9dGhpcy5fLnN1Yk1lbnU9bmV3IENLRURJVE9SLm1lbnUodGhpcy5lZGl0b3IsQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHRoaXMuXy5kZWZpbml0aW9uLHtsZXZlbDp0aGlzLl8ubGV2ZWwrMX0sITApKSxiLnBhcmVudD10aGlzLGIuXy5vbkNsaWNrPUNLRURJVE9SLnRvb2xzLmJpbmQodGhpcy5fLm9uQ2xpY2ssdGhpcykpO2Zvcih2YXIgbSBpbiBjKXt2YXIgZT10aGlzLmVkaXRvci5nZXRNZW51SXRlbShtKTtlJiYoZS5zdGF0ZT1jW21dLGIuYWRkKGUpKX12YXIgbD10aGlzLl8ucGFuZWwuZ2V0QmxvY2sodGhpcy5pZCkuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5pZCtcblN0cmluZyhhKSk7c2V0VGltZW91dChmdW5jdGlvbigpe2Iuc2hvdyhsLDIpfSwwKX1lbHNlIHRoaXMuXy5wYW5lbC5oaWRlQ2hpbGQoMSl9fSxwcm90bzp7YWRkOmZ1bmN0aW9uKGEpe2Eub3JkZXJ8fChhLm9yZGVyPXRoaXMuaXRlbXMubGVuZ3RoKTt0aGlzLml0ZW1zLnB1c2goYSl9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3RoaXMuaXRlbXM9W119LHNob3c6ZnVuY3Rpb24oYSxiLGMsbSl7aWYoIXRoaXMucGFyZW50JiYodGhpcy5fLm9uU2hvdygpLCF0aGlzLml0ZW1zLmxlbmd0aCkpcmV0dXJuO2I9Ynx8KFwicnRsXCI9PXRoaXMuZWRpdG9yLmxhbmcuZGlyPzI6MSk7dmFyIGU9dGhpcy5pdGVtcyxsPXRoaXMuZWRpdG9yLGs9dGhpcy5fLnBhbmVsLGY9dGhpcy5fLmVsZW1lbnQ7aWYoIWspe2s9dGhpcy5fLnBhbmVsPW5ldyBDS0VESVRPUi51aS5mbG9hdFBhbmVsKHRoaXMuZWRpdG9yLENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSx0aGlzLl8ucGFuZWxEZWZpbml0aW9uLHRoaXMuXy5sZXZlbCk7XG5rLm9uRXNjYXBlPUNLRURJVE9SLnRvb2xzLmJpbmQoZnVuY3Rpb24oYSl7aWYoITE9PT10aGlzLl8ub25Fc2NhcGUoYSkpcmV0dXJuITF9LHRoaXMpO2sub25TaG93PWZ1bmN0aW9uKCl7ay5fLnBhbmVsLmdldEhvbGRlckVsZW1lbnQoKS5nZXRQYXJlbnQoKS5hZGRDbGFzcyhcImNrZVwiKS5hZGRDbGFzcyhcImNrZV9yZXNldF9hbGxcIil9O2sub25IaWRlPUNLRURJVE9SLnRvb2xzLmJpbmQoZnVuY3Rpb24oKXt0aGlzLl8ub25IaWRlJiZ0aGlzLl8ub25IaWRlKCl9LHRoaXMpO2Y9ay5hZGRCbG9jayh0aGlzLmlkLHRoaXMuXy5wYW5lbERlZmluaXRpb24uYmxvY2spO2YuYXV0b1NpemU9ITA7dmFyIGQ9Zi5rZXlzO2RbNDBdPVwibmV4dFwiO2RbOV09XCJuZXh0XCI7ZFszOF09XCJwcmV2XCI7ZFtDS0VESVRPUi5TSElGVCs5XT1cInByZXZcIjtkW1wicnRsXCI9PWwubGFuZy5kaXI/Mzc6MzldPUNLRURJVE9SLmVudi5pZT9cIm1vdXNldXBcIjpcImNsaWNrXCI7ZFszMl09Q0tFRElUT1IuZW52LmllP1wibW91c2V1cFwiOlxuXCJjbGlja1wiO0NLRURJVE9SLmVudi5pZSYmKGRbMTNdPVwibW91c2V1cFwiKTtmPXRoaXMuXy5lbGVtZW50PWYuZWxlbWVudDtkPWYuZ2V0RG9jdW1lbnQoKTtkLmdldEJvZHkoKS5zZXRTdHlsZShcIm92ZXJmbG93XCIsXCJoaWRkZW5cIik7ZC5nZXRFbGVtZW50c0J5VGFnKFwiaHRtbFwiKS5nZXRJdGVtKDApLnNldFN0eWxlKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTt0aGlzLl8uaXRlbU92ZXJGbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQodGhpcy5fLnNob3dTdWJUaW1lb3V0KTt0aGlzLl8uc2hvd1N1YlRpbWVvdXQ9Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dCh0aGlzLl8uc2hvd1N1Yk1lbnUsbC5jb25maWcubWVudV9zdWJNZW51RGVsYXl8fDQwMCx0aGlzLFthXSl9LHRoaXMpO3RoaXMuXy5pdGVtT3V0Rm49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fLnNob3dTdWJUaW1lb3V0KX0sdGhpcyk7XG50aGlzLl8uaXRlbUNsaWNrRm49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pdGVtc1thXTtpZihiLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl0aGlzLmhpZGUoMSk7ZWxzZSBpZihiLmdldEl0ZW1zKXRoaXMuXy5zaG93U3ViTWVudShhKTtlbHNlIHRoaXMuXy5vbkNsaWNrKGIpfSx0aGlzKX1nKGUpO2Zvcih2YXIgZD1sLmVsZW1lbnRQYXRoKCksZD1bJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9tZW51JysoZCYmZC5kaXJlY3Rpb24oKSE9bC5sYW5nLmRpcj9cIiBja2VfbWl4ZWRfZGlyX2NvbnRlbnRcIjpcIlwiKSsnXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlJ10saD1lLmxlbmd0aCxwPWgmJmVbMF0uZ3JvdXAsbj0wO248aDtuKyspe3ZhciBxPWVbbl07cCE9cS5ncm91cCYmKGQucHVzaCgnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX21lbnVzZXBhcmF0b3JcIiByb2xlXFx4M2RcInNlcGFyYXRvclwiXFx4M2VcXHgzYy9kaXZcXHgzZScpLFxucD1xLmdyb3VwKTtxLnJlbmRlcih0aGlzLG4sZCl9ZC5wdXNoKFwiXFx4M2MvZGl2XFx4M2VcIik7Zi5zZXRIdG1sKGQuam9pbihcIlwiKSk7Q0tFRElUT1IudWkuZmlyZShcInJlYWR5XCIsdGhpcyk7dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuXy5wYW5lbC5zaG93QXNDaGlsZChrLHRoaXMuaWQsYSxiLGMsbSk6ay5zaG93QmxvY2sodGhpcy5pZCxhLGIsYyxtKTtsLmZpcmUoXCJtZW51U2hvd1wiLFtrXSl9LGFkZExpc3RlbmVyOmZ1bmN0aW9uKGEpe3RoaXMuXy5saXN0ZW5lcnMucHVzaChhKX0saGlkZTpmdW5jdGlvbihhKXt0aGlzLl8ub25IaWRlJiZ0aGlzLl8ub25IaWRlKCk7dGhpcy5fLnBhbmVsJiZ0aGlzLl8ucGFuZWwuaGlkZShhKX19fSk7Q0tFRElUT1IubWVudUl0ZW09Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSxiLGMpe0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGMse29yZGVyOjAsY2xhc3NOYW1lOlwiY2tlX21lbnVidXR0b25fX1wiK2J9KTt0aGlzLmdyb3VwPVxuYS5fLm1lbnVHcm91cHNbdGhpcy5ncm91cF07dGhpcy5lZGl0b3I9YTt0aGlzLm5hbWU9Yn0scHJvdG86e3JlbmRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGg9YS5pZCtTdHJpbmcoYiksZT1cInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpcy5zdGF0ZT9DS0VESVRPUi5UUklTVEFURV9PRkY6dGhpcy5zdGF0ZSxsPVwiXCIsaz1lPT1DS0VESVRPUi5UUklTVEFURV9PTj9cIm9uXCI6ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ/XCJkaXNhYmxlZFwiOlwib2ZmXCI7dGhpcy5yb2xlIGlue21lbnVpdGVtY2hlY2tib3g6MSxtZW51aXRlbXJhZGlvOjF9JiYobD0nIGFyaWEtY2hlY2tlZFxceDNkXCInKyhlPT1DS0VESVRPUi5UUklTVEFURV9PTj9cInRydWVcIjpcImZhbHNlXCIpKydcIicpO3ZhciBmPXRoaXMuZ2V0SXRlbXMsZD1cIlxceDI2I1wiKyhcInJ0bFwiPT10aGlzLmVkaXRvci5sYW5nLmRpcj9cIjk2NjhcIjpcIjk2NThcIikrXCI7XCIsZz10aGlzLm5hbWU7dGhpcy5pY29uJiYhL1xcLi8udGVzdCh0aGlzLmljb24pJiYoZz1cbnRoaXMuaWNvbik7YT17aWQ6aCxuYW1lOnRoaXMubmFtZSxpY29uTmFtZTpnLGxhYmVsOnRoaXMubGFiZWwsY2xzOnRoaXMuY2xhc3NOYW1lfHxcIlwiLHN0YXRlOmssaGFzUG9wdXA6Zj9cInRydWVcIjpcImZhbHNlXCIsZGlzYWJsZWQ6ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsdGl0bGU6dGhpcy5sYWJlbCxocmVmOlwiamF2YXNjcmlwdDp2b2lkKCdcIisodGhpcy5sYWJlbHx8XCJcIikucmVwbGFjZShcIidcIikrXCInKVwiLGhvdmVyRm46YS5fLml0ZW1PdmVyRm4sbW92ZU91dEZuOmEuXy5pdGVtT3V0Rm4sY2xpY2tGbjphLl8uaXRlbUNsaWNrRm4saW5kZXg6YixpY29uU3R5bGU6Q0tFRElUT1Iuc2tpbi5nZXRJY29uU3R5bGUoZyxcInJ0bFwiPT10aGlzLmVkaXRvci5sYW5nLmRpcixnPT10aGlzLmljb24/bnVsbDp0aGlzLmljb24sdGhpcy5pY29uT2Zmc2V0KSxhcnJvd0h0bWw6Zj9uLm91dHB1dCh7bGFiZWw6ZH0pOlwiXCIscm9sZTp0aGlzLnJvbGU/dGhpcy5yb2xlOlwibWVudWl0ZW1cIixhcmlhQ2hlY2tlZDpsfTtcbnAub3V0cHV0KGEsYyl9fX0pfSkoKTtDS0VESVRPUi5jb25maWcubWVudV9ncm91cHM9XCJjbGlwYm9hcmQsZm9ybSx0YWJsZWNlbGwsdGFibGVjZWxscHJvcGVydGllcyx0YWJsZXJvdyx0YWJsZWNvbHVtbix0YWJsZSxhbmNob3IsbGluayxpbWFnZSxmbGFzaCxjaGVja2JveCxyYWRpbyx0ZXh0ZmllbGQsaGlkZGVuZmllbGQsaW1hZ2VidXR0b24sYnV0dG9uLHNlbGVjdCx0ZXh0YXJlYSxkaXZcIjtDS0VESVRPUi5wbHVnaW5zLmFkZChcImNvbnRleHRtZW51XCIse3JlcXVpcmVzOlwibWVudVwiLG9uTG9hZDpmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuY29udGV4dE1lbnU9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IubWVudSwkOmZ1bmN0aW9uKGEpe3RoaXMuYmFzZS5jYWxsKHRoaXMsYSx7cGFuZWw6e2NsYXNzTmFtZTpcImNrZV9tZW51X3BhbmVsXCIsYXR0cmlidXRlczp7XCJhcmlhLWxhYmVsXCI6YS5sYW5nLmNvbnRleHRtZW51Lm9wdGlvbnN9fX0pfSxwcm90bzp7YWRkVGFyZ2V0OmZ1bmN0aW9uKGEsZSl7YS5vbihcImNvbnRleHRtZW51XCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7dmFyIGM9Q0tFRElUT1IuZW52LndlYmtpdD9mOkNLRURJVE9SLmVudi5tYWM/YS4kLm1ldGFLZXk6YS4kLmN0cmxLZXk7aWYoIWV8fCFjKXthLnByZXZlbnREZWZhdWx0KCk7aWYoQ0tFRElUT1IuZW52Lm1hYyYmQ0tFRElUT1IuZW52LndlYmtpdCl7dmFyIGM9dGhpcy5lZGl0b3IsXG5iPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGEuZ2V0VGFyZ2V0KCksYy5lZGl0YWJsZSgpKSkuY29udGFpbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpfSwhMCk7YiYmXCJmYWxzZVwiPT1iLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmYy5nZXRTZWxlY3Rpb24oKS5mYWtlKGIpfXZhciBiPWEuZ2V0VGFyZ2V0KCkuZ2V0RG9jdW1lbnQoKSxkPWEuZ2V0VGFyZ2V0KCkuZ2V0RG9jdW1lbnQoKS5nZXREb2N1bWVudEVsZW1lbnQoKSxjPSFiLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudCksYj1iLmdldFdpbmRvdygpLmdldFNjcm9sbFBvc2l0aW9uKCksZz1jP2EuJC5jbGllbnRYOmEuJC5wYWdlWHx8Yi54K2EuJC5jbGllbnRYLGg9Yz9hLiQuY2xpZW50WTphLiQucGFnZVl8fGIueSthLiQuY2xpZW50WTtDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5vcGVuKGQsbnVsbCxnLGgpfSxDS0VESVRPUi5lbnYuaWU/XG4yMDA6MCx0aGlzKX19LHRoaXMpO2lmKENLRURJVE9SLmVudi53ZWJraXQpe3ZhciBmLGQ9ZnVuY3Rpb24oKXtmPTB9O2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7Zj1DS0VESVRPUi5lbnYubWFjP2EuZGF0YS4kLm1ldGFLZXk6YS5kYXRhLiQuY3RybEtleX0pO2Eub24oXCJrZXl1cFwiLGQpO2Eub24oXCJjb250ZXh0bWVudVwiLGQpfX0sb3BlbjpmdW5jdGlvbihhLGUsZixkKXt0aGlzLmVkaXRvci5mb2N1cygpO2E9YXx8Q0tFRElUT1IuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCk7dGhpcy5lZGl0b3Iuc2VsZWN0aW9uQ2hhbmdlKDEpO3RoaXMuc2hvdyhhLGUsZixkKX19fSl9LGJlZm9yZUluaXQ6ZnVuY3Rpb24oYSl7dmFyIGU9YS5jb250ZXh0TWVudT1uZXcgQ0tFRElUT1IucGx1Z2lucy5jb250ZXh0TWVudShhKTthLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7ZS5hZGRUYXJnZXQoYS5lZGl0YWJsZSgpLCExIT09YS5jb25maWcuYnJvd3NlckNvbnRleHRNZW51T25DdHJsKX0pO1xuYS5hZGRDb21tYW5kKFwiY29udGV4dE1lbnVcIix7ZXhlYzpmdW5jdGlvbigpe2EuY29udGV4dE1lbnUub3BlbihhLmRvY3VtZW50LmdldEJvZHkoKSl9fSk7YS5zZXRLZXlzdHJva2UoQ0tFRElUT1IuU0hJRlQrMTIxLFwiY29udGV4dE1lbnVcIik7YS5zZXRLZXlzdHJva2UoQ0tFRElUT1IuQ1RSTCtDS0VESVRPUi5TSElGVCsxMjEsXCJjb250ZXh0TWVudVwiKX19KTsoZnVuY3Rpb24oKXtDS0VESVRPUi5wbHVnaW5zLmFkZChcImRpdlwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYSl7aWYoIWEuYmxvY2tsZXNzKXt2YXIgYz1hLmxhbmcuZGl2LGI9XCJkaXYoKilcIjtDS0VESVRPUi5kaWFsb2cuaXNUYWJFbmFibGVkKGEsXCJlZGl0ZGl2XCIsXCJhZHZhbmNlZFwiKSYmKGIrPVwiO2RpdltkaXIsaWQsbGFuZyx0aXRsZV17Kn1cIik7YS5hZGRDb21tYW5kKFwiY3JlYXRlZGl2XCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJjcmVhdGVkaXZcIix7YWxsb3dlZENvbnRlbnQ6YixyZXF1aXJlZENvbnRlbnQ6XCJkaXZcIixjb250ZXh0U2Vuc2l0aXZlOiEwLHJlZnJlc2g6ZnVuY3Rpb24oYSxjKXt0aGlzLnNldFN0YXRlKFwiZGl2XCJpbihhLmNvbmZpZy5kaXZfd3JhcFRhYmxlP2Mucm9vdDpjLmJsb2NrTGltaXQpLmdldER0ZCgpP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9fSkpO2EuYWRkQ29tbWFuZChcImVkaXRkaXZcIixcbm5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiZWRpdGRpdlwiLHtyZXF1aXJlZENvbnRlbnQ6XCJkaXZcIn0pKTthLmFkZENvbW1hbmQoXCJyZW1vdmVkaXZcIix7cmVxdWlyZWRDb250ZW50OlwiZGl2XCIsZXhlYzpmdW5jdGlvbihhKXtmdW5jdGlvbiBjKGIpeyhiPUNLRURJVE9SLnBsdWdpbnMuZGl2LmdldFN1cnJvdW5kRGl2KGEsYikpJiYhYi5kYXRhKFwiY2tlLWRpdi1hZGRlZFwiKSYmKGYucHVzaChiKSxiLmRhdGEoXCJja2UtZGl2LWFkZGVkXCIpKX1mb3IodmFyIGI9YS5nZXRTZWxlY3Rpb24oKSxnPWImJmIuZ2V0UmFuZ2VzKCksZSxoPWIuY3JlYXRlQm9va21hcmtzKCksZj1bXSxkPTA7ZDxnLmxlbmd0aDtkKyspZT1nW2RdLGUuY29sbGFwc2VkP2MoYi5nZXRTdGFydEVsZW1lbnQoKSk6KGU9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZSksZS5ldmFsdWF0b3I9YyxlLmxhc3RGb3J3YXJkKCkpO2ZvcihkPTA7ZDxmLmxlbmd0aDtkKyspZltkXS5yZW1vdmUoITApO2Iuc2VsZWN0Qm9va21hcmtzKGgpfX0pO1xuYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiQ3JlYXRlRGl2XCIse2xhYmVsOmMudG9vbGJhcixjb21tYW5kOlwiY3JlYXRlZGl2XCIsdG9vbGJhcjpcImJsb2Nrcyw1MFwifSk7YS5hZGRNZW51SXRlbXMmJihhLmFkZE1lbnVJdGVtcyh7ZWRpdGRpdjp7bGFiZWw6Yy5lZGl0LGNvbW1hbmQ6XCJlZGl0ZGl2XCIsZ3JvdXA6XCJkaXZcIixvcmRlcjoxfSxyZW1vdmVkaXY6e2xhYmVsOmMucmVtb3ZlLGNvbW1hbmQ6XCJyZW1vdmVkaXZcIixncm91cDpcImRpdlwiLG9yZGVyOjV9fSksYS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihiKXtyZXR1cm4hYnx8Yi5pc1JlYWRPbmx5KCk/bnVsbDpDS0VESVRPUi5wbHVnaW5zLmRpdi5nZXRTdXJyb3VuZERpdihhKT97ZWRpdGRpdjpDS0VESVRPUi5UUklTVEFURV9PRkYscmVtb3ZlZGl2OkNLRURJVE9SLlRSSVNUQVRFX09GRn06bnVsbH0pKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiY3JlYXRlZGl2XCIsdGhpcy5wYXRoK1xuXCJkaWFsb2dzL2Rpdi5qc1wiKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiZWRpdGRpdlwiLHRoaXMucGF0aCtcImRpYWxvZ3MvZGl2LmpzXCIpfX19KTtDS0VESVRPUi5wbHVnaW5zLmRpdj17Z2V0U3Vycm91bmREaXY6ZnVuY3Rpb24oYSxjKXt2YXIgYj1hLmVsZW1lbnRQYXRoKGMpO3JldHVybiBhLmVsZW1lbnRQYXRoKGIuYmxvY2tMaW1pdCkuY29udGFpbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXMoXCJkaXZcIikmJiFhLmlzUmVhZE9ubHkoKX0sMSl9fX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJyZXNpemVcIix7aW5pdDpmdW5jdGlvbihiKXtmdW5jdGlvbiBmKGQpe3ZhciBlPWMud2lkdGgsbT1jLmhlaWdodCxmPWUrKGQuZGF0YS4kLnNjcmVlblgtbi54KSooXCJydGxcIj09Zz8tMToxKTtkPW0rKGQuZGF0YS4kLnNjcmVlblktbi55KTtoJiYoZT1NYXRoLm1heChhLnJlc2l6ZV9taW5XaWR0aCxNYXRoLm1pbihmLGEucmVzaXplX21heFdpZHRoKSkpO3AmJihtPU1hdGgubWF4KGEucmVzaXplX21pbkhlaWdodCxNYXRoLm1pbihkLGEucmVzaXplX21heEhlaWdodCkpKTtiLnJlc2l6ZShoP2U6bnVsbCxtKX1mdW5jdGlvbiBrKCl7Q0tFRElUT1IuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIixmKTtDS0VESVRPUi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixrKTtiLmRvY3VtZW50JiYoYi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGYpLGIuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsXG5rKSl9dmFyIGE9Yi5jb25maWcscj1iLnVpLnNwYWNlSWQoXCJyZXNpemVyXCIpLGc9Yi5lbGVtZW50P2IuZWxlbWVudC5nZXREaXJlY3Rpb24oMSk6XCJsdHJcIjshYS5yZXNpemVfZGlyJiYoYS5yZXNpemVfZGlyPVwidmVydGljYWxcIik7dm9pZCAwPT09YS5yZXNpemVfbWF4V2lkdGgmJihhLnJlc2l6ZV9tYXhXaWR0aD0zRTMpO3ZvaWQgMD09PWEucmVzaXplX21heEhlaWdodCYmKGEucmVzaXplX21heEhlaWdodD0zRTMpO3ZvaWQgMD09PWEucmVzaXplX21pbldpZHRoJiYoYS5yZXNpemVfbWluV2lkdGg9NzUwKTt2b2lkIDA9PT1hLnJlc2l6ZV9taW5IZWlnaHQmJihhLnJlc2l6ZV9taW5IZWlnaHQ9MjUwKTtpZighMSE9PWEucmVzaXplX2VuYWJsZWQpe3ZhciBsPW51bGwsbixjLGg9KFwiYm90aFwiPT1hLnJlc2l6ZV9kaXJ8fFwiaG9yaXpvbnRhbFwiPT1hLnJlc2l6ZV9kaXIpJiZhLnJlc2l6ZV9taW5XaWR0aCE9YS5yZXNpemVfbWF4V2lkdGgscD0oXCJib3RoXCI9PWEucmVzaXplX2Rpcnx8XCJ2ZXJ0aWNhbFwiPT1cbmEucmVzaXplX2RpcikmJmEucmVzaXplX21pbkhlaWdodCE9YS5yZXNpemVfbWF4SGVpZ2h0LHE9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oZCl7bHx8KGw9Yi5nZXRSZXNpemFibGUoKSk7Yz17d2lkdGg6bC4kLm9mZnNldFdpZHRofHwwLGhlaWdodDpsLiQub2Zmc2V0SGVpZ2h0fHwwfTtuPXt4OmQuc2NyZWVuWCx5OmQuc2NyZWVuWX07YS5yZXNpemVfbWluV2lkdGg+Yy53aWR0aCYmKGEucmVzaXplX21pbldpZHRoPWMud2lkdGgpO2EucmVzaXplX21pbkhlaWdodD5jLmhlaWdodCYmKGEucmVzaXplX21pbkhlaWdodD1jLmhlaWdodCk7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZW1vdmVcIixmKTtDS0VESVRPUi5kb2N1bWVudC5vbihcIm1vdXNldXBcIixrKTtiLmRvY3VtZW50JiYoYi5kb2N1bWVudC5vbihcIm1vdXNlbW92ZVwiLGYpLGIuZG9jdW1lbnQub24oXCJtb3VzZXVwXCIsaykpO2QucHJldmVudERlZmF1bHQmJmQucHJldmVudERlZmF1bHQoKX0pO2Iub24oXCJkZXN0cm95XCIsXG5mdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKHEpfSk7Yi5vbihcInVpU3BhY2VcIixmdW5jdGlvbihhKXtpZihcImJvdHRvbVwiPT1hLmRhdGEuc3BhY2Upe3ZhciBlPVwiXCI7aCYmIXAmJihlPVwiIGNrZV9yZXNpemVyX2hvcml6b250YWxcIik7IWgmJnAmJihlPVwiIGNrZV9yZXNpemVyX3ZlcnRpY2FsXCIpO3ZhciBjPSdcXHgzY3NwYW4gaWRcXHgzZFwiJytyKydcIiBjbGFzc1xceDNkXCJja2VfcmVzaXplcicrZStcIiBja2VfcmVzaXplcl9cIitnKydcIiB0aXRsZVxceDNkXCInK0NLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYi5sYW5nLmNvbW1vbi5yZXNpemUpKydcIiBvbm1vdXNlZG93blxceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oJytxKycsIGV2ZW50KVwiXFx4M2UnKyhcImx0clwiPT1nP1wi4peiXCI6XCLil6NcIikrXCJcXHgzYy9zcGFuXFx4M2VcIjtcImx0clwiPT1nJiZcImx0clwiPT1lP2EuZGF0YS5odG1sKz1jOmEuZGF0YS5odG1sPWMrYS5kYXRhLmh0bWx9fSxiLG51bGwsMTAwKTtiLm9uKFwibWF4aW1pemVcIixcbmZ1bmN0aW9uKGEpe2IudWkuc3BhY2UoXCJyZXNpemVyXCIpW2EuZGF0YT09Q0tFRElUT1IuVFJJU1RBVEVfT04/XCJoaWRlXCI6XCJzaG93XCJdKCl9KX19fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gQihhKXtmdW5jdGlvbiBkKCl7Zm9yKHZhciBiPWcoKSxlPUNLRURJVE9SLnRvb2xzLmNsb25lKGEuY29uZmlnLnRvb2xiYXJHcm91cHMpfHxxKGEpLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGw9ZVtmXTtpZihcIi9cIiE9bCl7XCJzdHJpbmdcIj09dHlwZW9mIGwmJihsPWVbZl09e25hbWU6bH0pO3ZhciBtLGQ9bC5ncm91cHM7aWYoZClmb3IodmFyIGg9MDtoPGQubGVuZ3RoO2grKyltPWRbaF0sKG09YlttXSkmJmMobCxtKTsobT1iW2wubmFtZV0pJiZjKGwsbSl9fXJldHVybiBlfWZ1bmN0aW9uIGcoKXt2YXIgYj17fSxjLGYsZTtmb3IoYyBpbiBhLnVpLml0ZW1zKWY9YS51aS5pdGVtc1tjXSxlPWYudG9vbGJhcnx8XCJvdGhlcnNcIixlPWUuc3BsaXQoXCIsXCIpLGY9ZVswXSxlPXBhcnNlSW50KGVbMV18fC0xLDEwKSxiW2ZdfHwoYltmXT1bXSksYltmXS5wdXNoKHtuYW1lOmMsb3JkZXI6ZX0pO2ZvcihmIGluIGIpYltmXT1iW2ZdLnNvcnQoZnVuY3Rpb24oYixcbmEpe3JldHVybiBiLm9yZGVyPT1hLm9yZGVyPzA6MD5hLm9yZGVyPy0xOjA+Yi5vcmRlcj8xOmIub3JkZXI8YS5vcmRlcj8tMToxfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhjLGUpe2lmKGUubGVuZ3RoKXtjLml0ZW1zP2MuaXRlbXMucHVzaChhLnVpLmNyZWF0ZShcIi1cIikpOmMuaXRlbXM9W107Zm9yKHZhciBmO2Y9ZS5zaGlmdCgpOylmPVwic3RyaW5nXCI9PXR5cGVvZiBmP2Y6Zi5uYW1lLGImJi0xIT1DS0VESVRPUi50b29scy5pbmRleE9mKGIsZil8fChmPWEudWkuY3JlYXRlKGYpKSYmYS5hZGRGZWF0dXJlKGYpJiZjLml0ZW1zLnB1c2goZil9fWZ1bmN0aW9uIGgoYil7dmFyIGE9W10sZSxkLGg7Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSlkPWJbZV0saD17fSxcIi9cIj09ZD9hLnB1c2goZCk6Q0tFRElUT1IudG9vbHMuaXNBcnJheShkKT8oYyhoLENLRURJVE9SLnRvb2xzLmNsb25lKGQpKSxhLnB1c2goaCkpOmQuaXRlbXMmJihjKGgsQ0tFRElUT1IudG9vbHMuY2xvbmUoZC5pdGVtcykpLFxuaC5uYW1lPWQubmFtZSxhLnB1c2goaCkpO3JldHVybiBhfXZhciBiPWEuY29uZmlnLnJlbW92ZUJ1dHRvbnMsYj1iJiZiLnNwbGl0KFwiLFwiKSxlPWEuY29uZmlnLnRvb2xiYXI7XCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWEuY29uZmlnW1widG9vbGJhcl9cIitlXSk7cmV0dXJuIGEudG9vbGJhcj1lP2goZSk6ZCgpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIGEuXy50b29sYmFyR3JvdXBzfHwoYS5fLnRvb2xiYXJHcm91cHM9W3tuYW1lOlwiZG9jdW1lbnRcIixncm91cHM6W1wibW9kZVwiLFwiZG9jdW1lbnRcIixcImRvY3Rvb2xzXCJdfSx7bmFtZTpcImNsaXBib2FyZFwiLGdyb3VwczpbXCJjbGlwYm9hcmRcIixcInVuZG9cIl19LHtuYW1lOlwiZWRpdGluZ1wiLGdyb3VwczpbXCJmaW5kXCIsXCJzZWxlY3Rpb25cIixcInNwZWxsY2hlY2tlclwiXX0se25hbWU6XCJmb3Jtc1wifSxcIi9cIix7bmFtZTpcImJhc2ljc3R5bGVzXCIsZ3JvdXBzOltcImJhc2ljc3R5bGVzXCIsXCJjbGVhbnVwXCJdfSx7bmFtZTpcInBhcmFncmFwaFwiLGdyb3VwczpbXCJsaXN0XCIsXG5cImluZGVudFwiLFwiYmxvY2tzXCIsXCJhbGlnblwiLFwiYmlkaVwiXX0se25hbWU6XCJsaW5rc1wifSx7bmFtZTpcImluc2VydFwifSxcIi9cIix7bmFtZTpcInN0eWxlc1wifSx7bmFtZTpcImNvbG9yc1wifSx7bmFtZTpcInRvb2xzXCJ9LHtuYW1lOlwib3RoZXJzXCJ9LHtuYW1lOlwiYWJvdXRcIn1dKX12YXIgeT1mdW5jdGlvbigpe3RoaXMudG9vbGJhcnM9W107dGhpcy5mb2N1c0NvbW1hbmRFeGVjdXRlZD0hMX07eS5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxkO2Q9dGhpcy50b29sYmFyc1thKytdOylmb3IodmFyIGc9MCxjO2M9ZC5pdGVtc1tnKytdOylpZihjLmZvY3VzKXtjLmZvY3VzKCk7cmV0dXJufX07dmFyIEM9e21vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LHJlYWRPbmx5OjEsZXhlYzpmdW5jdGlvbihhKXthLnRvb2xib3gmJihhLnRvb2xib3guZm9jdXNDb21tYW5kRXhlY3V0ZWQ9ITAsQ0tFRElUT1IuZW52LmllfHxDS0VESVRPUi5lbnYuYWlyP3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLnRvb2xib3guZm9jdXMoKX0sXG4xMDApOmEudG9vbGJveC5mb2N1cygpKX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwidG9vbGJhclwiLHtyZXF1aXJlczpcImJ1dHRvblwiLGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGQsZz1mdW5jdGlvbihjLGgpe3ZhciBiLGU9XCJydGxcIj09YS5sYW5nLmRpcixrPWEuY29uZmlnLnRvb2xiYXJHcm91cEN5Y2xpbmcscj1lPzM3OjM5LGU9ZT8zOTozNyxrPXZvaWQgMD09PWt8fGs7c3dpdGNoKGgpe2Nhc2UgOTpjYXNlIENLRURJVE9SLlNISUZUKzk6Zm9yKDshYnx8IWIuaXRlbXMubGVuZ3RoOylpZihiPTk9PWg/KGI/Yi5uZXh0OmMudG9vbGJhci5uZXh0KXx8YS50b29sYm94LnRvb2xiYXJzWzBdOihiP2IucHJldmlvdXM6Yy50b29sYmFyLnByZXZpb3VzKXx8YS50b29sYm94LnRvb2xiYXJzW2EudG9vbGJveC50b29sYmFycy5sZW5ndGgtMV0sYi5pdGVtcy5sZW5ndGgpZm9yKGM9Yi5pdGVtc1tkP2IuaXRlbXMubGVuZ3RoLTE6MF07YyYmIWMuZm9jdXM7KShjPWQ/Yy5wcmV2aW91czpjLm5leHQpfHxcbihiPTApO2MmJmMuZm9jdXMoKTtyZXR1cm4hMTtjYXNlIHI6Yj1jO2RvIGI9Yi5uZXh0LCFiJiZrJiYoYj1jLnRvb2xiYXIuaXRlbXNbMF0pO3doaWxlKGImJiFiLmZvY3VzKTtiP2IuZm9jdXMoKTpnKGMsOSk7cmV0dXJuITE7Y2FzZSA0MDpyZXR1cm4gYy5idXR0b24mJmMuYnV0dG9uLmhhc0Fycm93PyhhLm9uY2UoXCJwYW5lbFNob3dcIixmdW5jdGlvbihiKXtiLmRhdGEuXy5wYW5lbC5fLmN1cnJlbnRCbG9jay5vbktleURvd24oNDApfSksYy5leGVjdXRlKCkpOmcoYyw0MD09aD9yOmUpLCExO2Nhc2UgZTpjYXNlIDM4OmI9YztkbyBiPWIucHJldmlvdXMsIWImJmsmJihiPWMudG9vbGJhci5pdGVtc1tjLnRvb2xiYXIuaXRlbXMubGVuZ3RoLTFdKTt3aGlsZShiJiYhYi5mb2N1cyk7Yj9iLmZvY3VzKCk6KGQ9MSxnKGMsQ0tFRElUT1IuU0hJRlQrOSksZD0wKTtyZXR1cm4hMTtjYXNlIDI3OnJldHVybiBhLmZvY3VzKCksITE7Y2FzZSAxMzpjYXNlIDMyOnJldHVybiBjLmV4ZWN1dGUoKSxcbiExfXJldHVybiEwfTthLm9uKFwidWlTcGFjZVwiLGZ1bmN0aW9uKGMpe2lmKGMuZGF0YS5zcGFjZT09YS5jb25maWcudG9vbGJhckxvY2F0aW9uKXtjLnJlbW92ZUxpc3RlbmVyKCk7YS50b29sYm94PW5ldyB5O3ZhciBkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpLGI9WydcXHgzY3NwYW4gaWRcXHgzZFwiJyxkLCdcIiBjbGFzc1xceDNkXCJja2Vfdm9pY2VfbGFiZWxcIlxceDNlJyxhLmxhbmcudG9vbGJhci50b29sYmFycyxcIlxceDNjL3NwYW5cXHgzZVwiLCdcXHgzY3NwYW4gaWRcXHgzZFwiJythLnVpLnNwYWNlSWQoXCJ0b29sYm94XCIpKydcIiBjbGFzc1xceDNkXCJja2VfdG9vbGJveFwiIHJvbGVcXHgzZFwiZ3JvdXBcIiBhcmlhLWxhYmVsbGVkYnlcXHgzZFwiJyxkLCdcIiBvbm1vdXNlZG93blxceDNkXCJyZXR1cm4gZmFsc2U7XCJcXHgzZSddLGQ9ITEhPT1hLmNvbmZpZy50b29sYmFyU3RhcnR1cEV4cGFuZGVkLGUsazthLmNvbmZpZy50b29sYmFyQ2FuQ29sbGFwc2UmJmEuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUmJlxuYi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xib3hfbWFpblwiJysoZD9cIlxceDNlXCI6JyBzdHlsZVxceDNkXCJkaXNwbGF5Om5vbmVcIlxceDNlJykpO2Zvcih2YXIgcj1hLnRvb2xib3gudG9vbGJhcnMsZj1CKGEpLGw9MDtsPGYubGVuZ3RoO2wrKyl7dmFyIG0sbj0wLHYscD1mW2xdLHc7aWYocClpZihlJiYoYi5wdXNoKFwiXFx4M2Mvc3BhblxceDNlXCIpLGs9ZT0wKSxcIi9cIj09PXApYi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJfYnJlYWtcIlxceDNlXFx4M2Mvc3BhblxceDNlJyk7ZWxzZXt3PXAuaXRlbXN8fHA7Zm9yKHZhciB4PTA7eDx3Lmxlbmd0aDt4Kyspe3ZhciB0PXdbeF0scTtpZih0KXt2YXIgej1mdW5jdGlvbihjKXtjPWMucmVuZGVyKGEsYik7dT1uLml0ZW1zLnB1c2goYyktMTswPHUmJihjLnByZXZpb3VzPW4uaXRlbXNbdS0xXSxjLnByZXZpb3VzLm5leHQ9Yyk7Yy50b29sYmFyPW47Yy5vbmtleT1nO2Mub25mb2N1cz1mdW5jdGlvbigpe2EudG9vbGJveC5mb2N1c0NvbW1hbmRFeGVjdXRlZHx8XG5hLmZvY3VzKCl9fTtpZih0LnR5cGU9PUNLRURJVE9SLlVJX1NFUEFSQVRPUilrPWUmJnQ7ZWxzZXtxPSExIT09dC5jYW5Hcm91cDtpZighbil7bT1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKTtuPXtpZDptLGl0ZW1zOltdfTt2PXAubmFtZSYmKGEubGFuZy50b29sYmFyLnRvb2xiYXJHcm91cHNbcC5uYW1lXXx8cC5uYW1lKTtiLnB1c2goJ1xceDNjc3BhbiBpZFxceDNkXCInLG0sJ1wiIGNsYXNzXFx4M2RcImNrZV90b29sYmFyXCInLHY/JyBhcmlhLWxhYmVsbGVkYnlcXHgzZFwiJyttKydfbGFiZWxcIic6XCJcIiwnIHJvbGVcXHgzZFwidG9vbGJhclwiXFx4M2UnKTt2JiZiLnB1c2goJ1xceDNjc3BhbiBpZFxceDNkXCInLG0sJ19sYWJlbFwiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2UnLHYsXCJcXHgzYy9zcGFuXFx4M2VcIik7Yi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJfc3RhcnRcIlxceDNlXFx4M2Mvc3BhblxceDNlJyk7dmFyIHU9ci5wdXNoKG4pLTE7MDx1JiYobi5wcmV2aW91cz1yW3UtXG4xXSxuLnByZXZpb3VzLm5leHQ9bil9cT9lfHwoYi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xncm91cFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZScpLGU9MSk6ZSYmKGIucHVzaChcIlxceDNjL3NwYW5cXHgzZVwiKSxlPTApO2smJih6KGspLGs9MCk7eih0KX19fWUmJihiLnB1c2goXCJcXHgzYy9zcGFuXFx4M2VcIiksaz1lPTApO24mJmIucHVzaCgnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV90b29sYmFyX2VuZFwiXFx4M2VcXHgzYy9zcGFuXFx4M2VcXHgzYy9zcGFuXFx4M2UnKX19YS5jb25maWcudG9vbGJhckNhbkNvbGxhcHNlJiZiLnB1c2goXCJcXHgzYy9zcGFuXFx4M2VcIik7aWYoYS5jb25maWcudG9vbGJhckNhbkNvbGxhcHNlJiZhLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FKXt2YXIgQT1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbigpe2EuZXhlY0NvbW1hbmQoXCJ0b29sYmFyQ29sbGFwc2VcIil9KTthLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24oQSl9KTtcbmEuYWRkQ29tbWFuZChcInRvb2xiYXJDb2xsYXBzZVwiLHtyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYil7dmFyIGE9Yi51aS5zcGFjZShcInRvb2xiYXJfY29sbGFwc2VyXCIpLGM9YS5nZXRQcmV2aW91cygpLGU9Yi51aS5zcGFjZShcImNvbnRlbnRzXCIpLGQ9Yy5nZXRQYXJlbnQoKSxmPXBhcnNlSW50KGUuJC5zdHlsZS5oZWlnaHQsMTApLGg9ZC4kLm9mZnNldEhlaWdodCxnPWEuaGFzQ2xhc3MoXCJja2VfdG9vbGJveF9jb2xsYXBzZXJfbWluXCIpO2c/KGMuc2hvdygpLGEucmVtb3ZlQ2xhc3MoXCJja2VfdG9vbGJveF9jb2xsYXBzZXJfbWluXCIpLGEuc2V0QXR0cmlidXRlKFwidGl0bGVcIixiLmxhbmcudG9vbGJhci50b29sYmFyQ29sbGFwc2UpKTooYy5oaWRlKCksYS5hZGRDbGFzcyhcImNrZV90b29sYm94X2NvbGxhcHNlcl9taW5cIiksYS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGIubGFuZy50b29sYmFyLnRvb2xiYXJFeHBhbmQpKTthLmdldEZpcnN0KCkuc2V0VGV4dChnP1wi4payXCI6XCLil4BcIik7ZS5zZXRTdHlsZShcImhlaWdodFwiLFxuZi0oZC4kLm9mZnNldEhlaWdodC1oKStcInB4XCIpO2IuZmlyZShcInJlc2l6ZVwiLHtvdXRlckhlaWdodDpiLmNvbnRhaW5lci4kLm9mZnNldEhlaWdodCxjb250ZW50c0hlaWdodDplLiQub2Zmc2V0SGVpZ2h0LG91dGVyV2lkdGg6Yi5jb250YWluZXIuJC5vZmZzZXRXaWR0aH0pfSxtb2Rlczp7d3lzaXd5ZzoxLHNvdXJjZToxfX0pO2Euc2V0S2V5c3Ryb2tlKENLRURJVE9SLkFMVCsoQ0tFRElUT1IuZW52LmllfHxDS0VESVRPUi5lbnYud2Via2l0PzE4OToxMDkpLFwidG9vbGJhckNvbGxhcHNlXCIpO2IucHVzaCgnXFx4M2NhIHRpdGxlXFx4M2RcIicrKGQ/YS5sYW5nLnRvb2xiYXIudG9vbGJhckNvbGxhcHNlOmEubGFuZy50b29sYmFyLnRvb2xiYXJFeHBhbmQpKydcIiBpZFxceDNkXCInK2EudWkuc3BhY2VJZChcInRvb2xiYXJfY29sbGFwc2VyXCIpKydcIiB0YWJJbmRleFxceDNkXCItMVwiIGNsYXNzXFx4M2RcImNrZV90b29sYm94X2NvbGxhcHNlcicpO2R8fGIucHVzaChcIiBja2VfdG9vbGJveF9jb2xsYXBzZXJfbWluXCIpO1xuYi5wdXNoKCdcIiBvbmNsaWNrXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbignK0ErJylcIlxceDNlJywnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9hcnJvd1wiXFx4M2VcXHgyNiM5NjUwO1xceDNjL3NwYW5cXHgzZScsXCJcXHgzYy9hXFx4M2VcIil9Yi5wdXNoKFwiXFx4M2Mvc3BhblxceDNlXCIpO2MuZGF0YS5odG1sKz1iLmpvaW4oXCJcIil9fSk7YS5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2lmKHRoaXMudG9vbGJveCl7dmFyIGEsZD0wLGIsZSxnO2ZvcihhPXRoaXMudG9vbGJveC50b29sYmFycztkPGEubGVuZ3RoO2QrKylmb3IoZT1hW2RdLml0ZW1zLGI9MDtiPGUubGVuZ3RoO2IrKylnPWVbYl0sZy5jbGlja0ZuJiZDS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihnLmNsaWNrRm4pLGcua2V5RG93bkZuJiZDS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihnLmtleURvd25Gbil9fSk7YS5vbihcInVpUmVhZHlcIixmdW5jdGlvbigpe3ZhciBjPWEudWkuc3BhY2UoXCJ0b29sYm94XCIpO2MmJmEuZm9jdXNNYW5hZ2VyLmFkZChjLFxuMSl9KTthLmFkZENvbW1hbmQoXCJ0b29sYmFyRm9jdXNcIixDKTthLnNldEtleXN0cm9rZShDS0VESVRPUi5BTFQrMTIxLFwidG9vbGJhckZvY3VzXCIpO2EudWkuYWRkKFwiLVwiLENLRURJVE9SLlVJX1NFUEFSQVRPUix7fSk7YS51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX1NFUEFSQVRPUix7Y3JlYXRlOmZ1bmN0aW9uKCl7cmV0dXJue3JlbmRlcjpmdW5jdGlvbihhLGQpe2QucHVzaCgnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV90b29sYmFyX3NlcGFyYXRvclwiIHJvbGVcXHgzZFwic2VwYXJhdG9yXCJcXHgzZVxceDNjL3NwYW5cXHgzZScpO3JldHVybnt9fX19fSl9fSk7Q0tFRElUT1IudWkucHJvdG90eXBlLmFkZFRvb2xiYXJHcm91cD1mdW5jdGlvbihhLGQsZyl7dmFyIGM9cSh0aGlzLmVkaXRvciksaD0wPT09ZCxiPXtuYW1lOmF9O2lmKGcpe2lmKGc9Q0tFRElUT1IudG9vbHMuc2VhcmNoKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGEubmFtZT09Z30pKXshZy5ncm91cHMmJihnLmdyb3Vwcz1bXSk7aWYoZCYmXG4oZD1DS0VESVRPUi50b29scy5pbmRleE9mKGcuZ3JvdXBzLGQpLDA8PWQpKXtnLmdyb3Vwcy5zcGxpY2UoZCsxLDAsYSk7cmV0dXJufWg/Zy5ncm91cHMuc3BsaWNlKDAsMCxhKTpnLmdyb3Vwcy5wdXNoKGEpO3JldHVybn1kPW51bGx9ZCYmKGQ9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihjLGZ1bmN0aW9uKGEpe3JldHVybiBhLm5hbWU9PWR9KSk7aD9jLnNwbGljZSgwLDAsYSk6XCJudW1iZXJcIj09dHlwZW9mIGQ/Yy5zcGxpY2UoZCsxLDAsYik6Yy5wdXNoKGEpfX0pKCk7Q0tFRElUT1IuVUlfU0VQQVJBVE9SPVwic2VwYXJhdG9yXCI7Q0tFRElUT1IuY29uZmlnLnRvb2xiYXJMb2NhdGlvbj1cInRvcFwiOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHEoYSxkKXtmdW5jdGlvbiBsKGMpe2M9ay5saXN0W2NdO2lmKGMuZXF1YWxzKGEuZWRpdGFibGUoKSl8fFwidHJ1ZVwiPT1jLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSl7dmFyIGU9YS5jcmVhdGVSYW5nZSgpO2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGMpO2Uuc2VsZWN0KCl9ZWxzZSBhLmdldFNlbGVjdGlvbigpLnNlbGVjdEVsZW1lbnQoYyk7YS5mb2N1cygpfWZ1bmN0aW9uIG0oKXtuJiZuLnNldEh0bWwoJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfcGF0aF9lbXB0eVwiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlJyk7ZGVsZXRlIGsubGlzdH12YXIgcD1hLnVpLnNwYWNlSWQoXCJwYXRoXCIpLG4saz1hLl8uZWxlbWVudHNQYXRoLHE9ay5pZEJhc2U7ZC5odG1sKz0nXFx4M2NzcGFuIGlkXFx4M2RcIicrcCsnX2xhYmVsXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZScrYS5sYW5nLmVsZW1lbnRzcGF0aC5lbGVMYWJlbCsnXFx4M2Mvc3BhblxceDNlXFx4M2NzcGFuIGlkXFx4M2RcIicrXG5wKydcIiBjbGFzc1xceDNkXCJja2VfcGF0aFwiIHJvbGVcXHgzZFwiZ3JvdXBcIiBhcmlhLWxhYmVsbGVkYnlcXHgzZFwiJytwKydfbGFiZWxcIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9wYXRoX2VtcHR5XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2VcXHgzYy9zcGFuXFx4M2UnO2Eub24oXCJ1aVJlYWR5XCIsZnVuY3Rpb24oKXt2YXIgYz1hLnVpLnNwYWNlKFwicGF0aFwiKTtjJiZhLmZvY3VzTWFuYWdlci5hZGQoYywxKX0pO2sub25DbGljaz1sO3ZhciB2PUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGwpLHc9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYyxlKXt2YXIgZz1rLmlkQmFzZSxiO2U9bmV3IENLRURJVE9SLmRvbS5ldmVudChlKTtiPVwicnRsXCI9PWEubGFuZy5kaXI7c3dpdGNoKGUuZ2V0S2V5c3Ryb2tlKCkpe2Nhc2UgYj8zOTozNzpjYXNlIDk6cmV0dXJuKGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChnKyhjKzEpKSl8fChiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoZytcblwiMFwiKSksYi5mb2N1cygpLCExO2Nhc2UgYj8zNzozOTpjYXNlIENLRURJVE9SLlNISUZUKzk6cmV0dXJuKGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChnKyhjLTEpKSl8fChiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoZysoay5saXN0Lmxlbmd0aC0xKSkpLGIuZm9jdXMoKSwhMTtjYXNlIDI3OnJldHVybiBhLmZvY3VzKCksITE7Y2FzZSAxMzpjYXNlIDMyOnJldHVybiBsKGMpLCExfXJldHVybiEwfSk7YS5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPVtdLGU9ay5saXN0PVtdLGc9W10sYj1rLmZpbHRlcnMsZD0hMCxsPWEuZWxlbWVudFBhdGgoKS5lbGVtZW50cyxmLHU9bC5sZW5ndGg7dS0tOyl7dmFyIGg9bFt1XSxyPTA7Zj1oLmRhdGEoXCJja2UtZGlzcGxheS1uYW1lXCIpP2guZGF0YShcImNrZS1kaXNwbGF5LW5hbWVcIik6aC5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpP2guZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKTpoLmdldE5hbWUoKTtcbihkPWguaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP1widHJ1ZVwiPT1oLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKTpkKXx8aC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIil8fChyPTEpO2Zvcih2YXIgdD0wO3Q8Yi5sZW5ndGg7dCsrKXt2YXIgbT1iW3RdKGgsZik7aWYoITE9PT1tKXtyPTE7YnJlYWt9Zj1tfHxmfXJ8fChlLnVuc2hpZnQoaCksZy51bnNoaWZ0KGYpKX1lPWUubGVuZ3RoO2ZvcihiPTA7YjxlO2IrKylmPWdbYl0sZD1hLmxhbmcuZWxlbWVudHNwYXRoLmVsZVRpdGxlLnJlcGxhY2UoLyUxLyxmKSxmPXgub3V0cHV0KHtpZDpxK2IsbGFiZWw6ZCx0ZXh0OmYsanNUaXRsZTpcImphdmFzY3JpcHQ6dm9pZCgnXCIrZitcIicpXCIsaW5kZXg6YixrZXlEb3duRm46dyxjbGlja0ZuOnZ9KSxjLnVuc2hpZnQoZik7bnx8KG49Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChwKSk7Zz1uO2cuc2V0SHRtbChjLmpvaW4oXCJcIikrJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfcGF0aF9lbXB0eVwiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlJyk7XG5hLmZpcmUoXCJlbGVtZW50c1BhdGhVcGRhdGVcIix7c3BhY2U6Z30pfSk7YS5vbihcInJlYWRPbmx5XCIsbSk7YS5vbihcImNvbnRlbnREb21VbmxvYWRcIixtKTthLmFkZENvbW1hbmQoXCJlbGVtZW50c1BhdGhGb2N1c1wiLHkudG9vbGJhckZvY3VzKTthLnNldEtleXN0cm9rZShDS0VESVRPUi5BTFQrMTIyLFwiZWxlbWVudHNQYXRoRm9jdXNcIil9dmFyIHk9e3Rvb2xiYXJGb2N1czp7ZWRpdG9yRm9jdXM6ITEscmVhZE9ubHk6MSxleGVjOmZ1bmN0aW9uKGEpeyhhPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoYS5fLmVsZW1lbnRzUGF0aC5pZEJhc2UrXCIwXCIpKSYmYS5mb2N1cyhDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi5haXIpfX19LGQ9XCJcIjtDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihkKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7Q0tFRElUT1IuZW52LmdlY2tvJiYoZCs9JyBvbmJsdXJcXHgzZFwidGhpcy5zdHlsZS5jc3NUZXh0IFxceDNkIHRoaXMuc3R5bGUuY3NzVGV4dDtcIicpO1xudmFyIHg9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJwYXRoSXRlbVwiLCdcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGhyZWZcXHgzZFwie2pzVGl0bGV9XCIgdGFiaW5kZXhcXHgzZFwiLTFcIiBjbGFzc1xceDNkXCJja2VfcGF0aF9pdGVtXCIgdGl0bGVcXHgzZFwie2xhYmVsfVwiJytkKycgaGlkZWZvY3VzXFx4M2RcInRydWVcIiAgb25rZXlkb3duXFx4M2RcInJldHVybiBDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2tleURvd25Gbn0se2luZGV4fSwgZXZlbnQgKTtcIiBvbmNsaWNrXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0se2luZGV4fSk7IHJldHVybiBmYWxzZTtcIiByb2xlXFx4M2RcImJ1dHRvblwiIGFyaWEtbGFiZWxcXHgzZFwie2xhYmVsfVwiXFx4M2V7dGV4dH1cXHgzYy9hXFx4M2UnKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImVsZW1lbnRzcGF0aFwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuXy5lbGVtZW50c1BhdGg9e2lkQmFzZTpcImNrZV9lbGVtZW50c3BhdGhfXCIrQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpK1xuXCJfXCIsZmlsdGVyczpbXX07YS5vbihcInVpU3BhY2VcIixmdW5jdGlvbihkKXtcImJvdHRvbVwiPT1kLmRhdGEuc3BhY2UmJnEoYSxkLmRhdGEpfSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHEoYixkLGEpe2E9Yi5jb25maWcuZm9yY2VFbnRlck1vZGV8fGE7XCJ3eXNpd3lnXCI9PWIubW9kZSYmKGR8fChkPWIuYWN0aXZlRW50ZXJNb2RlKSxiLmVsZW1lbnRQYXRoKCkuaXNDb250ZXh0Rm9yKFwicFwiKXx8KGQ9Q0tFRElUT1IuRU5URVJfQlIsYT0xKSxiLmZpcmUoXCJzYXZlU25hcHNob3RcIiksZD09Q0tFRElUT1IuRU5URVJfQlI/dChiLGQsbnVsbCxhKTp1KGIsZCxudWxsLGEpLGIuZmlyZShcInNhdmVTbmFwc2hvdFwiKSl9ZnVuY3Rpb24gdihiKXtiPWIuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKCEwKTtmb3IodmFyIGQ9Yi5sZW5ndGgtMTswPGQ7ZC0tKWJbZF0uZGVsZXRlQ29udGVudHMoKTtyZXR1cm4gYlswXX1mdW5jdGlvbiB5KGIpe3ZhciBkPWIuc3RhcnRDb250YWluZXIuZ2V0QXNjZW5kYW50KGZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJ0cnVlXCI9PWEuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpfSxcbiEwKTtpZihiLnJvb3QuZXF1YWxzKGQpKXJldHVybiBiO2Q9bmV3IENLRURJVE9SLmRvbS5yYW5nZShkKTtkLm1vdmVUb1JhbmdlKGIpO3JldHVybiBkfUNLRURJVE9SLnBsdWdpbnMuYWRkKFwiZW50ZXJrZXlcIix7aW5pdDpmdW5jdGlvbihiKXtiLmFkZENvbW1hbmQoXCJlbnRlclwiLHttb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czohMSxleGVjOmZ1bmN0aW9uKGIpe3EoYil9fSk7Yi5hZGRDb21tYW5kKFwic2hpZnRFbnRlclwiLHttb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czohMSxleGVjOmZ1bmN0aW9uKGIpe3EoYixiLmFjdGl2ZVNoaWZ0RW50ZXJNb2RlLDEpfX0pO2Iuc2V0S2V5c3Ryb2tlKFtbMTMsXCJlbnRlclwiXSxbQ0tFRElUT1IuU0hJRlQrMTMsXCJzaGlmdEVudGVyXCJdXSl9fSk7dmFyIHo9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLEE9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygpO0NLRURJVE9SLnBsdWdpbnMuZW50ZXJrZXk9e2VudGVyQmxvY2s6ZnVuY3Rpb24oYixcbmQsYSxoKXtpZihhPWF8fHYoYikpe2E9eShhKTt2YXIgZj1hLmRvY3VtZW50LGs9YS5jaGVja1N0YXJ0T2ZCbG9jaygpLG09YS5jaGVja0VuZE9mQmxvY2soKSxsPWIuZWxlbWVudFBhdGgoYS5zdGFydENvbnRhaW5lciksYz1sLmJsb2NrLG49ZD09Q0tFRElUT1IuRU5URVJfRElWP1wiZGl2XCI6XCJwXCIsZTtpZihrJiZtKXtpZihjJiYoYy5pcyhcImxpXCIpfHxjLmdldFBhcmVudCgpLmlzKFwibGlcIikpKXtjLmlzKFwibGlcIil8fChjPWMuZ2V0UGFyZW50KCkpO2E9Yy5nZXRQYXJlbnQoKTtlPWEuZ2V0UGFyZW50KCk7aD0hYy5oYXNQcmV2aW91cygpO3ZhciBwPSFjLmhhc05leHQoKSxuPWIuZ2V0U2VsZWN0aW9uKCksZz1uLmNyZWF0ZUJvb2ttYXJrcygpLGs9Yy5nZXREaXJlY3Rpb24oMSksbT1jLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLHI9Yy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSxxPWUuZ2V0RGlyZWN0aW9uKDEpIT1rO2I9Yi5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSfHxxfHxyfHxtO1xuaWYoZS5pcyhcImxpXCIpKWh8fHA/KGgmJnAmJmEucmVtb3ZlKCksY1twP1wiaW5zZXJ0QWZ0ZXJcIjpcImluc2VydEJlZm9yZVwiXShlKSk6Yy5icmVha1BhcmVudChlKTtlbHNle2lmKGIpaWYobC5ibG9jay5pcyhcImxpXCIpPyhlPWYuY3JlYXRlRWxlbWVudChkPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpLHEmJmUuc2V0QXR0cmlidXRlKFwiZGlyXCIsayksciYmZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHIpLG0mJmUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixtKSxjLm1vdmVDaGlsZHJlbihlKSk6ZT1sLmJsb2NrLGh8fHApZVtoP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShhKTtlbHNlIGMuYnJlYWtQYXJlbnQoYSksZS5pbnNlcnRBZnRlcihhKTtlbHNlIGlmKGMuYXBwZW5kQm9ndXMoITApLGh8fHApZm9yKDtmPWNbaD9cImdldEZpcnN0XCI6XCJnZXRMYXN0XCJdKCk7KWZbaD9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oYSk7ZWxzZSBmb3IoYy5icmVha1BhcmVudChhKTtmPWMuZ2V0TGFzdCgpOylmLmluc2VydEFmdGVyKGEpO1xuYy5yZW1vdmUoKX1uLnNlbGVjdEJvb2ttYXJrcyhnKTtyZXR1cm59aWYoYyYmYy5nZXRQYXJlbnQoKS5pcyhcImJsb2NrcXVvdGVcIikpe2MuYnJlYWtQYXJlbnQoYy5nZXRQYXJlbnQoKSk7Yy5nZXRQcmV2aW91cygpLmdldEZpcnN0KENLRURJVE9SLmRvbS53YWxrZXIuaW52aXNpYmxlKDEpKXx8Yy5nZXRQcmV2aW91cygpLnJlbW92ZSgpO2MuZ2V0TmV4dCgpLmdldEZpcnN0KENLRURJVE9SLmRvbS53YWxrZXIuaW52aXNpYmxlKDEpKXx8Yy5nZXROZXh0KCkucmVtb3ZlKCk7YS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGMpO2Euc2VsZWN0KCk7cmV0dXJufX1lbHNlIGlmKGMmJmMuaXMoXCJwcmVcIikmJiFtKXt0KGIsZCxhLGgpO3JldHVybn1pZihrPWEuc3BsaXRCbG9jayhuKSl7ZD1rLnByZXZpb3VzQmxvY2s7Yz1rLm5leHRCbG9jaztsPWsud2FzU3RhcnRPZkJsb2NrO2I9ay53YXNFbmRPZkJsb2NrO2M/KGc9Yy5nZXRQYXJlbnQoKSxnLmlzKFwibGlcIikmJihjLmJyZWFrUGFyZW50KGcpLFxuYy5tb3ZlKGMuZ2V0TmV4dCgpLDEpKSk6ZCYmKGc9ZC5nZXRQYXJlbnQoKSkmJmcuaXMoXCJsaVwiKSYmKGQuYnJlYWtQYXJlbnQoZyksZz1kLmdldE5leHQoKSxhLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoZyksZC5tb3ZlKGQuZ2V0UHJldmlvdXMoKSkpO2lmKGx8fGIpe2lmKGQpe2lmKGQuaXMoXCJsaVwiKXx8IXcudGVzdChkLmdldE5hbWUoKSkmJiFkLmlzKFwicHJlXCIpKWU9ZC5jbG9uZSgpfWVsc2UgYyYmKGU9Yy5jbG9uZSgpKTtlP2gmJiFlLmlzKFwibGlcIikmJmUucmVuYW1lTm9kZShuKTpnJiZnLmlzKFwibGlcIik/ZT1nOihlPWYuY3JlYXRlRWxlbWVudChuKSxkJiYocD1kLmdldERpcmVjdGlvbigpKSYmZS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixwKSk7aWYoZj1rLmVsZW1lbnRQYXRoKWZvcihoPTAsbj1mLmVsZW1lbnRzLmxlbmd0aDtoPG47aCsrKXtnPWYuZWxlbWVudHNbaF07aWYoZy5lcXVhbHMoZi5ibG9jayl8fGcuZXF1YWxzKGYuYmxvY2tMaW1pdCkpYnJlYWs7Q0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVtnLmdldE5hbWUoKV0mJlxuKGc9Zy5jbG9uZSgpLGUubW92ZUNoaWxkcmVuKGcpLGUuYXBwZW5kKGcpKX1lLmFwcGVuZEJvZ3VzKCk7ZS5nZXRQYXJlbnQoKXx8YS5pbnNlcnROb2RlKGUpO2UuaXMoXCJsaVwiKSYmZS5yZW1vdmVBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTshQ0tFRElUT1IuZW52LmllfHwhbHx8YiYmZC5nZXRDaGlsZENvdW50KCl8fChhLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYj9kOmUpLGEuc2VsZWN0KCkpO2EubW92ZVRvRWxlbWVudEVkaXRTdGFydChsJiYhYj9jOmUpfWVsc2UgYy5pcyhcImxpXCIpJiYoZT1hLmNsb25lKCksZS5zZWxlY3ROb2RlQ29udGVudHMoYyksZT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihlKSxlLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4hKEEoYSl8fHooYSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmdldE5hbWUoKWluIENLRURJVE9SLmR0ZC4kaW5saW5lJiYhKGEuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRlbXB0eSkpfSwoZz1lLm5leHQoKSkmJlxuZy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmcuaXMoXCJ1bFwiLFwib2xcIikmJihDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcj9mLmNyZWF0ZUVsZW1lbnQoXCJiclwiKTpmLmNyZWF0ZVRleHQoXCLCoFwiKSkuaW5zZXJ0QmVmb3JlKGcpKSxjJiZhLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYyk7YS5zZWxlY3QoKTthLnNjcm9sbEludG9WaWV3KCl9fX0sZW50ZXJCcjpmdW5jdGlvbihiLGQsYSxoKXtpZihhPWF8fHYoYikpe3ZhciBmPWEuZG9jdW1lbnQsaz1hLmNoZWNrRW5kT2ZCbG9jaygpLG09bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChiLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0RWxlbWVudCgpKSxsPW0uYmxvY2ssYz1sJiZtLmJsb2NrLmdldE5hbWUoKTtofHxcImxpXCIhPWM/KCFoJiZrJiZ3LnRlc3QoYyk/KGs9bC5nZXREaXJlY3Rpb24oKSk/KGY9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGYuc2V0QXR0cmlidXRlKFwiZGlyXCIsayksZi5pbnNlcnRBZnRlcihsKSxhLnNldFN0YXJ0KGYsXG4wKSk6KGYuY3JlYXRlRWxlbWVudChcImJyXCIpLmluc2VydEFmdGVyKGwpLENLRURJVE9SLmVudi5nZWNrbyYmZi5jcmVhdGVUZXh0KFwiXCIpLmluc2VydEFmdGVyKGwpLGEuc2V0U3RhcnRBdChsLmdldE5leHQoKSxDS0VESVRPUi5lbnYuaWU/Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUOkNLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSk6KGI9XCJwcmVcIj09YyYmQ0tFRElUT1IuZW52LmllJiY4PkNLRURJVE9SLmVudi52ZXJzaW9uP2YuY3JlYXRlVGV4dChcIlxcclwiKTpmLmNyZWF0ZUVsZW1lbnQoXCJiclwiKSxhLmRlbGV0ZUNvbnRlbnRzKCksYS5pbnNlcnROb2RlKGIpLENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyPyhmLmNyZWF0ZVRleHQoXCLvu79cIikuaW5zZXJ0QWZ0ZXIoYiksayYmKGx8fG0uYmxvY2tMaW1pdCkuYXBwZW5kQm9ndXMoKSxiLmdldE5leHQoKS4kLm5vZGVWYWx1ZT1cIlwiLGEuc2V0U3RhcnRBdChiLmdldE5leHQoKSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCkpOlxuYS5zZXRTdGFydEF0KGIsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSksYS5jb2xsYXBzZSghMCksYS5zZWxlY3QoKSxhLnNjcm9sbEludG9WaWV3KCkpOnUoYixkLGEsaCl9fX07dmFyIHg9Q0tFRElUT1IucGx1Z2lucy5lbnRlcmtleSx0PXguZW50ZXJCcix1PXguZW50ZXJCbG9jayx3PS9eaFsxLTZdJC99KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGsoYixmKXt2YXIgZz17fSxjPVtdLGU9e25ic3A6XCLCoFwiLHNoeTpcIsKtXCIsZ3Q6XCJcXHgzZVwiLGx0OlwiXFx4M2NcIixhbXA6XCJcXHgyNlwiLGFwb3M6XCInXCIscXVvdDonXCInfTtiPWIucmVwbGFjZSgvXFxiKG5ic3B8c2h5fGd0fGx0fGFtcHxhcG9zfHF1b3QpKD86LHwkKS9nLGZ1bmN0aW9uKGIsYSl7dmFyIGQ9Zj9cIlxceDI2XCIrYStcIjtcIjplW2FdO2dbZF09Zj9lW2FdOlwiXFx4MjZcIithK1wiO1wiO2MucHVzaChkKTtyZXR1cm5cIlwifSk7aWYoIWYmJmIpe2I9Yi5zcGxpdChcIixcIik7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxkO2EuaW5uZXJIVE1MPVwiXFx4MjZcIitiLmpvaW4oXCI7XFx4MjZcIikrXCI7XCI7ZD1hLmlubmVySFRNTDthPW51bGw7Zm9yKGE9MDthPGQubGVuZ3RoO2ErKyl7dmFyIGg9ZC5jaGFyQXQoYSk7Z1toXT1cIlxceDI2XCIrYlthXStcIjtcIjtjLnB1c2goaCl9fWcucmVnZXg9Yy5qb2luKGY/XCJ8XCI6XCJcIik7cmV0dXJuIGd9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJlbnRpdGllc1wiLFxue2FmdGVySW5pdDpmdW5jdGlvbihiKXtmdW5jdGlvbiBmKGEpe3JldHVybiBoW2FdfWZ1bmN0aW9uIGcoYil7cmV0dXJuXCJmb3JjZVwiIT1jLmVudGl0aWVzX3Byb2Nlc3NOdW1lcmljYWwmJmFbYl0/YVtiXTpcIlxceDI2I1wiK2IuY2hhckNvZGVBdCgwKStcIjtcIn12YXIgYz1iLmNvbmZpZztpZihiPShiPWIuZGF0YVByb2Nlc3NvcikmJmIuaHRtbEZpbHRlcil7dmFyIGU9W107ITEhPT1jLmJhc2ljRW50aXRpZXMmJmUucHVzaChcIm5ic3AsZ3QsbHQsYW1wXCIpO2MuZW50aXRpZXMmJihlLmxlbmd0aCYmZS5wdXNoKFwicXVvdCxpZXhjbCxjZW50LHBvdW5kLGN1cnJlbix5ZW4sYnJ2YmFyLHNlY3QsdW1sLGNvcHksb3JkZixsYXF1byxub3Qsc2h5LHJlZyxtYWNyLGRlZyxwbHVzbW4sc3VwMixzdXAzLGFjdXRlLG1pY3JvLHBhcmEsbWlkZG90LGNlZGlsLHN1cDEsb3JkbSxyYXF1byxmcmFjMTQsZnJhYzEyLGZyYWMzNCxpcXVlc3QsdGltZXMsZGl2aWRlLGZub2YsYnVsbCxoZWxsaXAscHJpbWUsUHJpbWUsb2xpbmUsZnJhc2wsd2VpZXJwLGltYWdlLHJlYWwsdHJhZGUsYWxlZnN5bSxsYXJyLHVhcnIscmFycixkYXJyLGhhcnIsY3JhcnIsbEFycix1QXJyLHJBcnIsZEFycixoQXJyLGZvcmFsbCxwYXJ0LGV4aXN0LGVtcHR5LG5hYmxhLGlzaW4sbm90aW4sbmkscHJvZCxzdW0sbWludXMsbG93YXN0LHJhZGljLHByb3AsaW5maW4sYW5nLGFuZCxvcixjYXAsY3VwLGludCx0aGVyZTQsc2ltLGNvbmcsYXN5bXAsbmUsZXF1aXYsbGUsZ2Usc3ViLHN1cCxuc3ViLHN1YmUsc3VwZSxvcGx1cyxvdGltZXMscGVycCxzZG90LGxjZWlsLHJjZWlsLGxmbG9vcixyZmxvb3IsbGFuZyxyYW5nLGxveixzcGFkZXMsY2x1YnMsaGVhcnRzLGRpYW1zLGNpcmMsdGlsZGUsZW5zcCxlbXNwLHRoaW5zcCx6d25qLHp3aixscm0scmxtLG5kYXNoLG1kYXNoLGxzcXVvLHJzcXVvLHNicXVvLGxkcXVvLHJkcXVvLGJkcXVvLGRhZ2dlcixEYWdnZXIscGVybWlsLGxzYXF1byxyc2FxdW8sZXVyb1wiKSxcbmMuZW50aXRpZXNfbGF0aW4mJmUucHVzaChcIkFncmF2ZSxBYWN1dGUsQWNpcmMsQXRpbGRlLEF1bWwsQXJpbmcsQUVsaWcsQ2NlZGlsLEVncmF2ZSxFYWN1dGUsRWNpcmMsRXVtbCxJZ3JhdmUsSWFjdXRlLEljaXJjLEl1bWwsRVRILE50aWxkZSxPZ3JhdmUsT2FjdXRlLE9jaXJjLE90aWxkZSxPdW1sLE9zbGFzaCxVZ3JhdmUsVWFjdXRlLFVjaXJjLFV1bWwsWWFjdXRlLFRIT1JOLHN6bGlnLGFncmF2ZSxhYWN1dGUsYWNpcmMsYXRpbGRlLGF1bWwsYXJpbmcsYWVsaWcsY2NlZGlsLGVncmF2ZSxlYWN1dGUsZWNpcmMsZXVtbCxpZ3JhdmUsaWFjdXRlLGljaXJjLGl1bWwsZXRoLG50aWxkZSxvZ3JhdmUsb2FjdXRlLG9jaXJjLG90aWxkZSxvdW1sLG9zbGFzaCx1Z3JhdmUsdWFjdXRlLHVjaXJjLHV1bWwseWFjdXRlLHRob3JuLHl1bWwsT0VsaWcsb2VsaWcsU2Nhcm9uLHNjYXJvbixZdW1sXCIpLGMuZW50aXRpZXNfZ3JlZWsmJmUucHVzaChcIkFscGhhLEJldGEsR2FtbWEsRGVsdGEsRXBzaWxvbixaZXRhLEV0YSxUaGV0YSxJb3RhLEthcHBhLExhbWJkYSxNdSxOdSxYaSxPbWljcm9uLFBpLFJobyxTaWdtYSxUYXUsVXBzaWxvbixQaGksQ2hpLFBzaSxPbWVnYSxhbHBoYSxiZXRhLGdhbW1hLGRlbHRhLGVwc2lsb24semV0YSxldGEsdGhldGEsaW90YSxrYXBwYSxsYW1iZGEsbXUsbnUseGksb21pY3JvbixwaSxyaG8sc2lnbWFmLHNpZ21hLHRhdSx1cHNpbG9uLHBoaSxjaGkscHNpLG9tZWdhLHRoZXRhc3ltLHVwc2loLHBpdlwiKSxcbmMuZW50aXRpZXNfYWRkaXRpb25hbCYmZS5wdXNoKGMuZW50aXRpZXNfYWRkaXRpb25hbCkpO3ZhciBhPWsoZS5qb2luKFwiLFwiKSksZD1hLnJlZ2V4P1wiW1wiK2EucmVnZXgrXCJdXCI6XCJhXlwiO2RlbGV0ZSBhLnJlZ2V4O2MuZW50aXRpZXMmJmMuZW50aXRpZXNfcHJvY2Vzc051bWVyaWNhbCYmKGQ9XCJbXiAtfl18XCIrZCk7dmFyIGQ9bmV3IFJlZ0V4cChkLFwiZ1wiKSxoPWsoXCJuYnNwLGd0LGx0LGFtcCxzaHlcIiwhMCksbD1uZXcgUmVnRXhwKGgucmVnZXgsXCJnXCIpO2IuYWRkUnVsZXMoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShsLGYpLnJlcGxhY2UoZCxnKX19LHthcHBseVRvQWxsOiEwLGV4Y2x1ZGVOZXN0ZWRFZGl0YWJsZTohMH0pfX19KX0pKCk7Q0tFRElUT1IuY29uZmlnLmJhc2ljRW50aXRpZXM9ITA7Q0tFRElUT1IuY29uZmlnLmVudGl0aWVzPSEwO0NLRURJVE9SLmNvbmZpZy5lbnRpdGllc19sYXRpbj0hMDtDS0VESVRPUi5jb25maWcuZW50aXRpZXNfZ3JlZWs9ITA7XG5DS0VESVRPUi5jb25maWcuZW50aXRpZXNfYWRkaXRpb25hbD1cIiMzOVwiO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicG9wdXBcIik7XG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7cG9wdXA6ZnVuY3Rpb24oZSxhLGIsZCl7YT1hfHxcIjgwJVwiO2I9Ynx8XCI3MCVcIjtcInN0cmluZ1wiPT10eXBlb2YgYSYmMTxhLmxlbmd0aCYmXCIlXCI9PWEuc3Vic3RyKGEubGVuZ3RoLTEsMSkmJihhPXBhcnNlSW50KHdpbmRvdy5zY3JlZW4ud2lkdGgqcGFyc2VJbnQoYSwxMCkvMTAwLDEwKSk7XCJzdHJpbmdcIj09dHlwZW9mIGImJjE8Yi5sZW5ndGgmJlwiJVwiPT1iLnN1YnN0cihiLmxlbmd0aC0xLDEpJiYoYj1wYXJzZUludCh3aW5kb3cuc2NyZWVuLmhlaWdodCpwYXJzZUludChiLDEwKS8xMDAsMTApKTs2NDA+YSYmKGE9NjQwKTs0MjA+YiYmKGI9NDIwKTt2YXIgZj1wYXJzZUludCgod2luZG93LnNjcmVlbi5oZWlnaHQtYikvMiwxMCksZz1wYXJzZUludCgod2luZG93LnNjcmVlbi53aWR0aC1hKS8yLDEwKTtkPShkfHxcImxvY2F0aW9uXFx4M2RubyxtZW51YmFyXFx4M2Rubyx0b29sYmFyXFx4M2RubyxkZXBlbmRlbnRcXHgzZHllcyxtaW5pbWl6YWJsZVxceDNkbm8sbW9kYWxcXHgzZHllcyxhbHdheXNSYWlzZWRcXHgzZHllcyxyZXNpemFibGVcXHgzZHllcyxzY3JvbGxiYXJzXFx4M2R5ZXNcIikrXCIsd2lkdGhcXHgzZFwiK1xuYStcIixoZWlnaHRcXHgzZFwiK2IrXCIsdG9wXFx4M2RcIitmK1wiLGxlZnRcXHgzZFwiK2c7dmFyIGM9d2luZG93Lm9wZW4oXCJcIixudWxsLGQsITApO2lmKCFjKXJldHVybiExO3RyeXstMT09bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCIgY2hyb21lL1wiKSYmKGMubW92ZVRvKGcsZiksYy5yZXNpemVUbyhhLGIpKSxjLmZvY3VzKCksYy5sb2NhdGlvbi5ocmVmPWV9Y2F0Y2goaCl7d2luZG93Lm9wZW4oZSxudWxsLGQsITApfXJldHVybiEwfX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGcoYSxjKXt2YXIgZD1bXTtpZihjKWZvcih2YXIgYiBpbiBjKWQucHVzaChiK1wiXFx4M2RcIitlbmNvZGVVUklDb21wb25lbnQoY1tiXSkpO2Vsc2UgcmV0dXJuIGE7cmV0dXJuIGErKC0xIT1hLmluZGV4T2YoXCI/XCIpP1wiXFx4MjZcIjpcIj9cIikrZC5qb2luKFwiXFx4MjZcIil9ZnVuY3Rpb24gayhhKXthKz1cIlwiO3JldHVybiBhLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc3Vic3RyKDEpfWZ1bmN0aW9uIG0oKXt2YXIgYT10aGlzLmdldERpYWxvZygpLGM9YS5nZXRQYXJlbnRFZGl0b3IoKTtjLl8uZmlsZWJyb3dzZXJTZT10aGlzO3ZhciBkPWMuY29uZmlnW1wiZmlsZWJyb3dzZXJcIitrKGEuZ2V0TmFtZSgpKStcIldpbmRvd1dpZHRoXCJdfHxjLmNvbmZpZy5maWxlYnJvd3NlcldpbmRvd1dpZHRofHxcIjgwJVwiLGE9Yy5jb25maWdbXCJmaWxlYnJvd3NlclwiK2soYS5nZXROYW1lKCkpK1wiV2luZG93SGVpZ2h0XCJdfHxjLmNvbmZpZy5maWxlYnJvd3NlcldpbmRvd0hlaWdodHx8XG5cIjcwJVwiLGI9dGhpcy5maWxlYnJvd3Nlci5wYXJhbXN8fHt9O2IuQ0tFZGl0b3I9Yy5uYW1lO2IuQ0tFZGl0b3JGdW5jTnVtPWMuXy5maWxlYnJvd3NlckZuO2IubGFuZ0NvZGV8fChiLmxhbmdDb2RlPWMubGFuZ0NvZGUpO2I9Zyh0aGlzLmZpbGVicm93c2VyLnVybCxiKTtjLnBvcHVwKGIsZCxhLGMuY29uZmlnLmZpbGVicm93c2VyV2luZG93RmVhdHVyZXN8fGMuY29uZmlnLmZpbGVCcm93c2VyV2luZG93RmVhdHVyZXMpfWZ1bmN0aW9uIG4oKXt2YXIgYT10aGlzLmdldERpYWxvZygpO2EuZ2V0UGFyZW50RWRpdG9yKCkuXy5maWxlYnJvd3NlclNlPXRoaXM7cmV0dXJuIGEuZ2V0Q29udGVudEVsZW1lbnQodGhpc1tcImZvclwiXVswXSx0aGlzW1wiZm9yXCJdWzFdKS5nZXRJbnB1dEVsZW1lbnQoKS4kLnZhbHVlJiZhLmdldENvbnRlbnRFbGVtZW50KHRoaXNbXCJmb3JcIl1bMF0sdGhpc1tcImZvclwiXVsxXSkuZ2V0QWN0aW9uKCk/ITA6ITF9ZnVuY3Rpb24gcChhLGMsZCl7dmFyIGI9ZC5wYXJhbXN8fFxue307Yi5DS0VkaXRvcj1hLm5hbWU7Yi5DS0VkaXRvckZ1bmNOdW09YS5fLmZpbGVicm93c2VyRm47Yi5sYW5nQ29kZXx8KGIubGFuZ0NvZGU9YS5sYW5nQ29kZSk7Yy5hY3Rpb249ZyhkLnVybCxiKTtjLmZpbGVicm93c2VyPWR9ZnVuY3Rpb24gbChhLGMsZCxiKXtpZihiJiZiLmxlbmd0aClmb3IodmFyIGUsZz1iLmxlbmd0aDtnLS07KWlmKGU9YltnXSxcImhib3hcIiE9ZS50eXBlJiZcInZib3hcIiE9ZS50eXBlJiZcImZpZWxkc2V0XCIhPWUudHlwZXx8bChhLGMsZCxlLmNoaWxkcmVuKSxlLmZpbGVicm93c2VyKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBlLmZpbGVicm93c2VyJiYoZS5maWxlYnJvd3Nlcj17YWN0aW9uOlwiZmlsZUJ1dHRvblwiPT1lLnR5cGU/XCJRdWlja1VwbG9hZFwiOlwiQnJvd3NlXCIsdGFyZ2V0OmUuZmlsZWJyb3dzZXJ9KSxcIkJyb3dzZVwiPT1lLmZpbGVicm93c2VyLmFjdGlvbil7dmFyIGY9ZS5maWxlYnJvd3Nlci51cmw7dm9pZCAwPT09ZiYmKGY9YS5jb25maWdbXCJmaWxlYnJvd3NlclwiK1xuayhjKStcIkJyb3dzZVVybFwiXSx2b2lkIDA9PT1mJiYoZj1hLmNvbmZpZy5maWxlYnJvd3NlckJyb3dzZVVybCkpO2YmJihlLm9uQ2xpY2s9bSxlLmZpbGVicm93c2VyLnVybD1mLGUuaGlkZGVuPSExKX1lbHNlIGlmKFwiUXVpY2tVcGxvYWRcIj09ZS5maWxlYnJvd3Nlci5hY3Rpb24mJmVbXCJmb3JcIl0mJihmPWUuZmlsZWJyb3dzZXIudXJsLHZvaWQgMD09PWYmJihmPWEuY29uZmlnW1wiZmlsZWJyb3dzZXJcIitrKGMpK1wiVXBsb2FkVXJsXCJdLHZvaWQgMD09PWYmJihmPWEuY29uZmlnLmZpbGVicm93c2VyVXBsb2FkVXJsKSksZikpe3ZhciBoPWUub25DbGljaztlLm9uQ2xpY2s9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zZW5kZXI7aWYoaCYmITE9PT1oLmNhbGwoYixhKSlyZXR1cm4hMTtpZihuLmNhbGwoYixhKSl7YT1iLmdldERpYWxvZygpLmdldENvbnRlbnRFbGVtZW50KHRoaXNbXCJmb3JcIl1bMF0sdGhpc1tcImZvclwiXVsxXSkuZ2V0SW5wdXRFbGVtZW50KCk7aWYoYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYS4kLmZvcm0pKShhPVxuYi4kLmVsZW1lbnRzLmNrQ3NyZlRva2VuKT9hPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKTooYT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJpbnB1dFwiKSxhLnNldEF0dHJpYnV0ZXMoe25hbWU6XCJja0NzcmZUb2tlblwiLHR5cGU6XCJoaWRkZW5cIn0pLGIuYXBwZW5kKGEpKSxhLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsQ0tFRElUT1IudG9vbHMuZ2V0Q3NyZlRva2VuKCkpO3JldHVybiEwfXJldHVybiExfTtlLmZpbGVicm93c2VyLnVybD1mO2UuaGlkZGVuPSExO3AoYSxkLmdldENvbnRlbnRzKGVbXCJmb3JcIl1bMF0pLmdldChlW1wiZm9yXCJdWzFdKSxlLmZpbGVicm93c2VyKX19ZnVuY3Rpb24gaChhLGMsZCl7aWYoLTEhPT1kLmluZGV4T2YoXCI7XCIpKXtkPWQuc3BsaXQoXCI7XCIpO2Zvcih2YXIgYj0wO2I8ZC5sZW5ndGg7YisrKWlmKGgoYSxjLGRbYl0pKXJldHVybiEwO3JldHVybiExfXJldHVybihhPWEuZ2V0Q29udGVudHMoYykuZ2V0KGQpLmZpbGVicm93c2VyKSYmYS51cmx9ZnVuY3Rpb24gcShhLFxuYyl7dmFyIGQ9dGhpcy5fLmZpbGVicm93c2VyU2UuZ2V0RGlhbG9nKCksYj10aGlzLl8uZmlsZWJyb3dzZXJTZVtcImZvclwiXSxlPXRoaXMuXy5maWxlYnJvd3NlclNlLmZpbGVicm93c2VyLm9uU2VsZWN0O2ImJmQuZ2V0Q29udGVudEVsZW1lbnQoYlswXSxiWzFdKS5yZXNldCgpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGN8fCExIT09Yy5jYWxsKHRoaXMuXy5maWxlYnJvd3NlclNlKSlpZighZXx8ITEhPT1lLmNhbGwodGhpcy5fLmZpbGVicm93c2VyU2UsYSxjKSlpZihcInN0cmluZ1wiPT10eXBlb2YgYyYmYyYmYWxlcnQoYyksYSYmKGI9dGhpcy5fLmZpbGVicm93c2VyU2UsZD1iLmdldERpYWxvZygpLGI9Yi5maWxlYnJvd3Nlci50YXJnZXR8fG51bGwpKWlmKGI9Yi5zcGxpdChcIjpcIiksZT1kLmdldENvbnRlbnRFbGVtZW50KGJbMF0sYlsxXSkpZS5zZXRWYWx1ZShhKSxkLnNlbGVjdFBhZ2UoYlswXSl9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmaWxlYnJvd3NlclwiLHtyZXF1aXJlczpcInBvcHVwXCIsXG5pbml0OmZ1bmN0aW9uKGEpe2EuXy5maWxlYnJvd3NlckZuPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKHEsYSk7YS5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKHRoaXMuXy5maWxlYnJvd3NlckZuKX0pfX0pO0NLRURJVE9SLm9uKFwiZGlhbG9nRGVmaW5pdGlvblwiLGZ1bmN0aW9uKGEpe2lmKGEuZWRpdG9yLnBsdWdpbnMuZmlsZWJyb3dzZXIpZm9yKHZhciBjPWEuZGF0YS5kZWZpbml0aW9uLGQsYj0wO2I8Yy5jb250ZW50cy5sZW5ndGg7KytiKWlmKGQ9Yy5jb250ZW50c1tiXSlsKGEuZWRpdG9yLGEuZGF0YS5uYW1lLGMsZC5lbGVtZW50cyksZC5oaWRkZW4mJmQuZmlsZWJyb3dzZXImJihkLmhpZGRlbj0haChjLGQuaWQsZC5maWxlYnJvd3NlcikpfSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmluZFwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hZGRDb21tYW5kKFwiZmluZFwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiZmluZFwiKSk7Yi5jYW5VbmRvPSExO2IucmVhZE9ubHk9MTthLmFkZENvbW1hbmQoXCJyZXBsYWNlXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJyZXBsYWNlXCIpKS5jYW5VbmRvPSExO2EudWkuYWRkQnV0dG9uJiYoYS51aS5hZGRCdXR0b24oXCJGaW5kXCIse2xhYmVsOmEubGFuZy5maW5kLmZpbmQsY29tbWFuZDpcImZpbmRcIix0b29sYmFyOlwiZmluZCwxMFwifSksYS51aS5hZGRCdXR0b24oXCJSZXBsYWNlXCIse2xhYmVsOmEubGFuZy5maW5kLnJlcGxhY2UsY29tbWFuZDpcInJlcGxhY2VcIix0b29sYmFyOlwiZmluZCwyMFwifSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJmaW5kXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9maW5kLmpzXCIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJyZXBsYWNlXCIsdGhpcy5wYXRoK1xuXCJkaWFsb2dzL2ZpbmQuanNcIil9fSk7Q0tFRElUT1IuY29uZmlnLmZpbmRfaGlnaGxpZ2h0PXtlbGVtZW50Olwic3BhblwiLHN0eWxlczp7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCIjMDA0XCIsY29sb3I6XCIjZmZmXCJ9fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBnKGEsYil7dmFyIGM9bC5leGVjKGEpLGQ9bC5leGVjKGIpO2lmKGMpe2lmKCFjWzJdJiZcInB4XCI9PWRbMl0pcmV0dXJuIGRbMV07aWYoXCJweFwiPT1jWzJdJiYhZFsyXSlyZXR1cm4gZFsxXStcInB4XCJ9cmV0dXJuIGJ9dmFyIGs9Q0tFRElUT1IuaHRtbFBhcnNlci5jc3NTdHlsZSxoPUNLRURJVE9SLnRvb2xzLmNzc0xlbmd0aCxsPS9eKCg/OlxcZCooPzpcXC5cXGQrKSl8KD86XFxkKykpKC4qKT8kL2ksbT17ZWxlbWVudHM6eyQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRyaWJ1dGVzO2lmKChiPShiPShiPWImJmJbXCJkYXRhLWNrZS1yZWFsZWxlbWVudFwiXSkmJm5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sKGRlY29kZVVSSUNvbXBvbmVudChiKSkpJiZiLmNoaWxkcmVuWzBdKSYmYS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtcmVzaXphYmxlXCJdKXt2YXIgYz0obmV3IGsoYSkpLnJ1bGVzO2E9Yi5hdHRyaWJ1dGVzO3ZhciBkPWMud2lkdGgsXG5jPWMuaGVpZ2h0O2QmJihhLndpZHRoPWcoYS53aWR0aCxkKSk7YyYmKGEuaGVpZ2h0PWcoYS5oZWlnaHQsYykpfXJldHVybiBifX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmFrZW9iamVjdHNcIix7aW5pdDpmdW5jdGlvbihhKXthLmZpbHRlci5hbGxvdyhcImltZ1shZGF0YS1ja2UtcmVhbGVsZW1lbnQsc3JjLGFsdCx0aXRsZV0oKil7Kn1cIixcImZha2VvYmplY3RzXCIpfSxhZnRlckluaXQ6ZnVuY3Rpb24oYSl7KGE9KGE9YS5kYXRhUHJvY2Vzc29yKSYmYS5odG1sRmlsdGVyKSYmYS5hZGRSdWxlcyhtLHthcHBseVRvQWxsOiEwfSl9fSk7Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5jcmVhdGVGYWtlRWxlbWVudD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmxhbmcuZmFrZW9iamVjdHMsZT1lW2NdfHxlLnVua25vd247Yj17XCJjbGFzc1wiOmIsXCJkYXRhLWNrZS1yZWFsZWxlbWVudFwiOmVuY29kZVVSSUNvbXBvbmVudChhLmdldE91dGVySHRtbCgpKSxcImRhdGEtY2tlLXJlYWwtbm9kZS10eXBlXCI6YS50eXBlLFxuYWx0OmUsdGl0bGU6ZSxhbGlnbjphLmdldEF0dHJpYnV0ZShcImFsaWduXCIpfHxcIlwifTtDS0VESVRPUi5lbnYuaGN8fChiLnNyYz1DS0VESVRPUi50b29scy50cmFuc3BhcmVudEltYWdlRGF0YSk7YyYmKGJbXCJkYXRhLWNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiXT1jKTtkJiYoYltcImRhdGEtY2tlLXJlc2l6YWJsZVwiXT1kLGM9bmV3IGssZD1hLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpLGE9YS5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiksZCYmKGMucnVsZXMud2lkdGg9aChkKSksYSYmKGMucnVsZXMuaGVpZ2h0PWgoYSkpLGMucG9wdWxhdGUoYikpO3JldHVybiB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIix7YXR0cmlidXRlczpifSl9O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuY3JlYXRlRmFrZVBhcnNlckVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5sYW5nLmZha2VvYmplY3RzLGU9ZVtjXXx8ZS51bmtub3duLGY7Zj1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5iYXNpY1dyaXRlcjtcbmEud3JpdGVIdG1sKGYpO2Y9Zi5nZXRIdG1sKCk7Yj17XCJjbGFzc1wiOmIsXCJkYXRhLWNrZS1yZWFsZWxlbWVudFwiOmVuY29kZVVSSUNvbXBvbmVudChmKSxcImRhdGEtY2tlLXJlYWwtbm9kZS10eXBlXCI6YS50eXBlLGFsdDplLHRpdGxlOmUsYWxpZ246YS5hdHRyaWJ1dGVzLmFsaWdufHxcIlwifTtDS0VESVRPUi5lbnYuaGN8fChiLnNyYz1DS0VESVRPUi50b29scy50cmFuc3BhcmVudEltYWdlRGF0YSk7YyYmKGJbXCJkYXRhLWNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiXT1jKTtkJiYoYltcImRhdGEtY2tlLXJlc2l6YWJsZVwiXT1kLGQ9YS5hdHRyaWJ1dGVzLGE9bmV3IGssYz1kLndpZHRoLGQ9ZC5oZWlnaHQsdm9pZCAwIT09YyYmKGEucnVsZXMud2lkdGg9aChjKSksdm9pZCAwIT09ZCYmKGEucnVsZXMuaGVpZ2h0PWgoZCkpLGEucG9wdWxhdGUoYikpO3JldHVybiBuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KFwiaW1nXCIsYil9O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUucmVzdG9yZVJlYWxFbGVtZW50PVxuZnVuY3Rpb24oYSl7aWYoYS5kYXRhKFwiY2tlLXJlYWwtbm9kZS10eXBlXCIpIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpcmV0dXJuIG51bGw7dmFyIGI9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoZGVjb2RlVVJJQ29tcG9uZW50KGEuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKSksdGhpcy5kb2N1bWVudCk7aWYoYS5kYXRhKFwiY2tlLXJlc2l6YWJsZVwiKSl7dmFyIGM9YS5nZXRTdHlsZShcIndpZHRoXCIpO2E9YS5nZXRTdHlsZShcImhlaWdodFwiKTtjJiZiLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsZyhiLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpLGMpKTthJiZiLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGcoYi5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiksYSkpfXJldHVybiBifX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChhKXthPWEuYXR0cmlidXRlcztyZXR1cm5cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCI9PWEudHlwZXx8Zi50ZXN0KGEuc3JjfHxcIlwiKX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGEuY3JlYXRlRmFrZVBhcnNlckVsZW1lbnQoYixcImNrZV9mbGFzaFwiLFwiZmxhc2hcIiwhMCl9dmFyIGY9L1xcLnN3Zig/OiR8XFw/KS9pO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmxhc2hcIix7cmVxdWlyZXM6XCJkaWFsb2csZmFrZW9iamVjdHNcIixvbkxvYWQ6ZnVuY3Rpb24oKXtDS0VESVRPUi5hZGRDc3MoXCJpbWcuY2tlX2ZsYXNoe2JhY2tncm91bmQtaW1hZ2U6IHVybChcIitDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiaW1hZ2VzL3BsYWNlaG9sZGVyLnBuZ1wiKStcIik7YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JvcmRlcjogMXB4IHNvbGlkICNhOWE5YTk7d2lkdGg6IDgwcHg7aGVpZ2h0OiA4MHB4O31cIil9LFxuaW5pdDpmdW5jdGlvbihhKXt2YXIgYj1cIm9iamVjdFtjbGFzc2lkLGNvZGViYXNlLGhlaWdodCxoc3BhY2UsdnNwYWNlLHdpZHRoXTtwYXJhbVtuYW1lLHZhbHVlXTtlbWJlZFtoZWlnaHQsaHNwYWNlLHBsdWdpbnNwYWdlLHNyYyx0eXBlLHZzcGFjZSx3aWR0aF1cIjtDS0VESVRPUi5kaWFsb2cuaXNUYWJFbmFibGVkKGEsXCJmbGFzaFwiLFwicHJvcGVydGllc1wiKSYmKGIrPVwiO29iamVjdFthbGlnbl07IGVtYmVkW2FsbG93c2NyaXB0YWNjZXNzLHF1YWxpdHksc2NhbGUsd21vZGVdXCIpO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYSxcImZsYXNoXCIsXCJhZHZhbmNlZFwiKSYmKGIrPVwiO29iamVjdFtpZF17Kn07IGVtYmVkW2JnY29sb3Jdeyp9KCopXCIpO2EuYWRkQ29tbWFuZChcImZsYXNoXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJmbGFzaFwiLHthbGxvd2VkQ29udGVudDpiLHJlcXVpcmVkQ29udGVudDpcImVtYmVkXCJ9KSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiRmxhc2hcIixcbntsYWJlbDphLmxhbmcuY29tbW9uLmZsYXNoLGNvbW1hbmQ6XCJmbGFzaFwiLHRvb2xiYXI6XCJpbnNlcnQsMjBcIn0pO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJmbGFzaFwiLHRoaXMucGF0aCtcImRpYWxvZ3MvZmxhc2guanNcIik7YS5hZGRNZW51SXRlbXMmJmEuYWRkTWVudUl0ZW1zKHtmbGFzaDp7bGFiZWw6YS5sYW5nLmZsYXNoLnByb3BlcnRpZXMsY29tbWFuZDpcImZsYXNoXCIsZ3JvdXA6XCJmbGFzaFwifX0pO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5lbGVtZW50O2IuaXMoXCJpbWdcIikmJlwiZmxhc2hcIj09Yi5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpJiYoYS5kYXRhLmRpYWxvZz1cImZsYXNoXCIpfSk7YS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhKXtpZihhJiZhLmlzKFwiaW1nXCIpJiYhYS5pc1JlYWRPbmx5KCkmJlwiZmxhc2hcIj09YS5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpKXJldHVybntmbGFzaDpDS0VESVRPUi5UUklTVEFURV9PRkZ9fSl9LFxuYWZ0ZXJJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YVByb2Nlc3NvcjsoYj1iJiZiLmRhdGFGaWx0ZXIpJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7XCJja2U6b2JqZWN0XCI6ZnVuY3Rpb24oYil7dmFyIGM9Yi5hdHRyaWJ1dGVzO2lmKCEoYy5jbGFzc2lkJiZTdHJpbmcoYy5jbGFzc2lkKS50b0xvd2VyQ2FzZSgpfHxkKGIpKSl7Zm9yKGM9MDtjPGIuY2hpbGRyZW4ubGVuZ3RoO2MrKylpZihcImNrZTplbWJlZFwiPT1iLmNoaWxkcmVuW2NdLm5hbWUpe2lmKCFkKGIuY2hpbGRyZW5bY10pKWJyZWFrO3JldHVybiBlKGEsYil9cmV0dXJuIG51bGx9cmV0dXJuIGUoYSxiKX0sXCJja2U6ZW1iZWRcIjpmdW5jdGlvbihiKXtyZXR1cm4gZChiKT9lKGEsYik6bnVsbH19fSw1KX19KX0pKCk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmNvbmZpZyx7Zmxhc2hFbWJlZFRhZ09ubHk6ITEsZmxhc2hBZGRFbWJlZFRhZzohMCxmbGFzaENvbnZlcnRPbkVkaXQ6ITF9KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBrKGEpe3ZhciBsPWEuY29uZmlnLHA9YS5maXJlKFwidWlTcGFjZVwiLHtzcGFjZTpcInRvcFwiLGh0bWw6XCJcIn0pLmh0bWwsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGYoYSxjLGUpe2Iuc2V0U3R5bGUoYyx3KGUpKTtiLnNldFN0eWxlKFwicG9zaXRpb25cIixhKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWsuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO3N3aXRjaChhKXtjYXNlIFwidG9wXCI6ZihcImFic29sdXRlXCIsXCJ0b3BcIixiLnktcS1yKTticmVhaztjYXNlIFwicGluXCI6ZihcImZpeGVkXCIsXCJ0b3BcIix4KTticmVhaztjYXNlIFwiYm90dG9tXCI6ZihcImFic29sdXRlXCIsXCJ0b3BcIixiLnkrKGMuaGVpZ2h0fHxjLmJvdHRvbS1jLnRvcCkrcil9bT1hfXZhciBtLGssbixjLGgscSx2LHA9bC5mbG9hdFNwYWNlRG9ja2VkT2Zmc2V0WHx8MCxyPWwuZmxvYXRTcGFjZURvY2tlZE9mZnNldFl8fDAsdT1sLmZsb2F0U3BhY2VQaW5uZWRPZmZzZXRYfHwwLHg9bC5mbG9hdFNwYWNlUGlubmVkT2Zmc2V0WXx8XG4wO3JldHVybiBmdW5jdGlvbihkKXtpZihrPWEuZWRpdGFibGUoKSl7dmFyIGY9ZCYmXCJmb2N1c1wiPT1kLm5hbWU7ZiYmYi5zaG93KCk7YS5maXJlKFwiZmxvYXRpbmdTcGFjZUxheW91dFwiLHtzaG93OmZ9KTtiLnJlbW92ZVN0eWxlKFwibGVmdFwiKTtiLnJlbW92ZVN0eWxlKFwicmlnaHRcIik7bj1iLmdldENsaWVudFJlY3QoKTtjPWsuZ2V0Q2xpZW50UmVjdCgpO2g9Zy5nZXRWaWV3UGFuZVNpemUoKTtxPW4uaGVpZ2h0O3Y9XCJwYWdlWE9mZnNldFwiaW4gZy4kP2cuJC5wYWdlWE9mZnNldDpDS0VESVRPUi5kb2N1bWVudC4kLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O20/KHErcjw9Yy50b3A/ZShcInRvcFwiKTpxK3I+aC5oZWlnaHQtYy5ib3R0b20/ZShcInBpblwiKTplKFwiYm90dG9tXCIpLGQ9aC53aWR0aC8yLGQ9bC5mbG9hdFNwYWNlUHJlZmVyUmlnaHQ/XCJyaWdodFwiOjA8Yy5sZWZ0JiZjLnJpZ2h0PGgud2lkdGgmJmMud2lkdGg+bi53aWR0aD9cInJ0bFwiPT1sLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbj9cblwicmlnaHRcIjpcImxlZnRcIjpkLWMubGVmdD5jLnJpZ2h0LWQ/XCJsZWZ0XCI6XCJyaWdodFwiLG4ud2lkdGg+aC53aWR0aD8oZD1cImxlZnRcIixmPTApOihmPVwibGVmdFwiPT1kPzA8Yy5sZWZ0P2MubGVmdDowOmMucmlnaHQ8aC53aWR0aD9oLndpZHRoLWMucmlnaHQ6MCxmK24ud2lkdGg+aC53aWR0aCYmKGQ9XCJsZWZ0XCI9PWQ/XCJyaWdodFwiOlwibGVmdFwiLGY9MCkpLGIuc2V0U3R5bGUoZCx3KChcInBpblwiPT1tP3U6cCkrZisoXCJwaW5cIj09bT8wOlwibGVmdFwiPT1kP3Y6LXYpKSkpOihtPVwicGluXCIsZShcInBpblwiKSx0KGQpKX19fSgpO2lmKHApe3ZhciBrPW5ldyBDS0VESVRPUi50ZW1wbGF0ZSgnXFx4M2NkaXYgaWRcXHgzZFwiY2tlX3tuYW1lfVwiIGNsYXNzXFx4M2RcImNrZSB7aWR9IGNrZV9yZXNldF9hbGwgY2tlX2Nocm9tZSBja2VfZWRpdG9yX3tuYW1lfSBja2VfZmxvYXQgY2tlX3tsYW5nRGlyfSAnK0NLRURJVE9SLmVudi5jc3NDbGFzcysnXCIgZGlyXFx4M2RcIntsYW5nRGlyfVwiIHRpdGxlXFx4M2RcIicrKENLRURJVE9SLmVudi5nZWNrbz9cblwiIFwiOlwiXCIpKydcIiBsYW5nXFx4M2RcIntsYW5nQ29kZX1cIiByb2xlXFx4M2RcImFwcGxpY2F0aW9uXCIgc3R5bGVcXHgzZFwie3N0eWxlfVwiJysoYS50aXRsZT8nIGFyaWEtbGFiZWxsZWRieVxceDNkXCJja2Vfe25hbWV9X2FyaWFsYmxcIic6XCIgXCIpK1wiXFx4M2VcIisoYS50aXRsZT8nXFx4M2NzcGFuIGlkXFx4M2RcImNrZV97bmFtZX1fYXJpYWxibFwiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2V7dm9pY2VMYWJlbH1cXHgzYy9zcGFuXFx4M2UnOlwiIFwiKSsnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX2lubmVyXCJcXHgzZVxceDNjZGl2IGlkXFx4M2RcInt0b3BJZH1cIiBjbGFzc1xceDNkXCJja2VfdG9wXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNle2NvbnRlbnR9XFx4M2MvZGl2XFx4M2VcXHgzYy9kaXZcXHgzZVxceDNjL2RpdlxceDNlJyksYj1DS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkuYXBwZW5kKENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGsub3V0cHV0KHtjb250ZW50OnAsaWQ6YS5pZCxsYW5nRGlyOmEubGFuZy5kaXIsXG5sYW5nQ29kZTphLmxhbmdDb2RlLG5hbWU6YS5uYW1lLHN0eWxlOlwiZGlzcGxheTpub25lO3otaW5kZXg6XCIrKGwuYmFzZUZsb2F0WkluZGV4LTEpLHRvcElkOmEudWkuc3BhY2VJZChcInRvcFwiKSx2b2ljZUxhYmVsOmEudGl0bGV9KSkpLHU9Q0tFRElUT1IudG9vbHMuZXZlbnRzQnVmZmVyKDUwMCx0KSxlPUNLRURJVE9SLnRvb2xzLmV2ZW50c0J1ZmZlcigxMDAsdCk7Yi51bnNlbGVjdGFibGUoKTtiLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7YS5nZXRUYXJnZXQoKS5oYXNBc2NlbmRhbnQoXCJhXCIsMSl8fGEucHJldmVudERlZmF1bHQoKX0pO2Eub24oXCJmb2N1c1wiLGZ1bmN0aW9uKGIpe3QoYik7YS5vbihcImNoYW5nZVwiLHUuaW5wdXQpO2cub24oXCJzY3JvbGxcIixlLmlucHV0KTtnLm9uKFwicmVzaXplXCIsZS5pbnB1dCl9KTthLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7Yi5oaWRlKCk7YS5yZW1vdmVMaXN0ZW5lcihcImNoYW5nZVwiLHUuaW5wdXQpO2cucmVtb3ZlTGlzdGVuZXIoXCJzY3JvbGxcIixcbmUuaW5wdXQpO2cucmVtb3ZlTGlzdGVuZXIoXCJyZXNpemVcIixlLmlucHV0KX0pO2Eub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtnLnJlbW92ZUxpc3RlbmVyKFwic2Nyb2xsXCIsZS5pbnB1dCk7Zy5yZW1vdmVMaXN0ZW5lcihcInJlc2l6ZVwiLGUuaW5wdXQpO2IuY2xlYXJDdXN0b21EYXRhKCk7Yi5yZW1vdmUoKX0pO2EuZm9jdXNNYW5hZ2VyLmhhc0ZvY3VzJiZiLnNob3coKTthLmZvY3VzTWFuYWdlci5hZGQoYiwxKX19dmFyIGc9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCksdz1DS0VESVRPUi50b29scy5jc3NMZW5ndGg7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmbG9hdGluZ3NwYWNlXCIse2luaXQ6ZnVuY3Rpb24oYSl7YS5vbihcImxvYWRlZFwiLGZ1bmN0aW9uKCl7ayh0aGlzKX0sbnVsbCxudWxsLDIwKX19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJsaXN0YmxvY2tcIix7cmVxdWlyZXM6XCJwYW5lbFwiLG9uTG9hZDpmdW5jdGlvbigpe3ZhciBmPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtbGlzdFwiLCdcXHgzY3VsIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgY2xhc3NcXHgzZFwiY2tlX3BhbmVsX2xpc3RcIlxceDNle2l0ZW1zfVxceDNjL3VsXFx4M2UnKSxnPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtbGlzdC1pdGVtXCIsJ1xceDNjbGkgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9wYW5lbF9saXN0SXRlbVwiIHJvbGVcXHgzZHByZXNlbnRhdGlvblxceDNlXFx4M2NhIGlkXFx4M2RcIntpZH1fb3B0aW9uXCIgX2NrZV9mb2N1c1xceDNkMSBoaWRlZm9jdXNcXHgzZHRydWUgdGl0bGVcXHgzZFwie3RpdGxlfVwiIGhyZWZcXHgzZFwiamF2YXNjcmlwdDp2b2lkKFxcJ3t2YWx9XFwnKVwiICB7b25jbGlja31cXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtjbGlja0ZufSxcXCd7dmFsfVxcJyk7IHJldHVybiBmYWxzZTtcIiByb2xlXFx4M2RcIm9wdGlvblwiXFx4M2V7dGV4dH1cXHgzYy9hXFx4M2VcXHgzYy9saVxceDNlJyksXG5oPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtbGlzdC1ncm91cFwiLCdcXHgzY2gxIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfZ3JvdXB0aXRsZVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCIgXFx4M2V7bGFiZWx9XFx4M2MvaDFcXHgzZScpLGs9L1xcJy9nO0NLRURJVE9SLnVpLnBhbmVsLnByb3RvdHlwZS5hZGRMaXN0QmxvY2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hZGRCbG9jayhhLG5ldyBDS0VESVRPUi51aS5saXN0QmxvY2sodGhpcy5nZXRIb2xkZXJFbGVtZW50KCksYikpfTtDS0VESVRPUi51aS5saXN0QmxvY2s9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IudWkucGFuZWwuYmxvY2ssJDpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi5hdHRyaWJ1dGVzfHwoYi5hdHRyaWJ1dGVzPXt9KTsodGhpcy5tdWx0aVNlbGVjdD0hIWIubXVsdGlTZWxlY3QpJiYoY1tcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCJdPSEwKTshYy5yb2xlJiZcbihjLnJvbGU9XCJsaXN0Ym94XCIpO3RoaXMuYmFzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIixjLnJvbGUpO2M9dGhpcy5rZXlzO2NbNDBdPVwibmV4dFwiO2NbOV09XCJuZXh0XCI7Y1szOF09XCJwcmV2XCI7Y1tDS0VESVRPUi5TSElGVCs5XT1cInByZXZcIjtjWzMyXT1DS0VESVRPUi5lbnYuaWU/XCJtb3VzZXVwXCI6XCJjbGlja1wiO0NLRURJVE9SLmVudi5pZSYmKGNbMTNdPVwibW91c2V1cFwiKTt0aGlzLl8ucGVuZGluZ0h0bWw9W107dGhpcy5fLnBlbmRpbmdMaXN0PVtdO3RoaXMuXy5pdGVtcz17fTt0aGlzLl8uZ3JvdXBzPXt9fSxfOntjbG9zZTpmdW5jdGlvbigpe2lmKHRoaXMuXy5zdGFydGVkKXt2YXIgYT1mLm91dHB1dCh7aXRlbXM6dGhpcy5fLnBlbmRpbmdMaXN0LmpvaW4oXCJcIil9KTt0aGlzLl8ucGVuZGluZ0xpc3Q9W107dGhpcy5fLnBlbmRpbmdIdG1sLnB1c2goYSk7ZGVsZXRlIHRoaXMuXy5zdGFydGVkfX0sZ2V0Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLl8uY2xpY2t8fFxuKHRoaXMuXy5jbGljaz1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRvZ2dsZShhKTtpZih0aGlzLm9uQ2xpY2spdGhpcy5vbkNsaWNrKGEsYil9LHRoaXMpKTtyZXR1cm4gdGhpcy5fLmNsaWNrfX0scHJvdG86e2FkZDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCk7dGhpcy5fLnN0YXJ0ZWR8fCh0aGlzLl8uc3RhcnRlZD0xLHRoaXMuXy5zaXplPXRoaXMuXy5zaXplfHwwKTt0aGlzLl8uaXRlbXNbYV09ZDt2YXIgZTtlPUNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGVBdHRyKGEpLnJlcGxhY2UoayxcIlxcXFwnXCIpO2E9e2lkOmQsdmFsOmUsb25jbGljazpDS0VESVRPUi5lbnYuaWU/J29uY2xpY2tcXHgzZFwicmV0dXJuIGZhbHNlO1wiIG9ubW91c2V1cCc6XCJvbmNsaWNrXCIsY2xpY2tGbjp0aGlzLl8uZ2V0Q2xpY2soKSx0aXRsZTpDS0VESVRPUi50b29scy5odG1sRW5jb2RlQXR0cihjfHxhKSx0ZXh0OmJ8fGF9O1xudGhpcy5fLnBlbmRpbmdMaXN0LnB1c2goZy5vdXRwdXQoYSkpfSxzdGFydEdyb3VwOmZ1bmN0aW9uKGEpe3RoaXMuXy5jbG9zZSgpO3ZhciBiPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMuXy5ncm91cHNbYV09Yjt0aGlzLl8ucGVuZGluZ0h0bWwucHVzaChoLm91dHB1dCh7aWQ6YixsYWJlbDphfSkpfSxjb21taXQ6ZnVuY3Rpb24oKXt0aGlzLl8uY2xvc2UoKTt0aGlzLmVsZW1lbnQuYXBwZW5kSHRtbCh0aGlzLl8ucGVuZGluZ0h0bWwuam9pbihcIlwiKSk7ZGVsZXRlIHRoaXMuXy5zaXplO3RoaXMuXy5wZW5kaW5nSHRtbD1bXX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaXNNYXJrZWQoYSk7Yj90aGlzLnVubWFyayhhKTp0aGlzLm1hcmsoYSk7cmV0dXJuIWJ9LGhpZGVHcm91cDpmdW5jdGlvbihhKXt2YXIgYj0oYT10aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCeUlkKHRoaXMuXy5ncm91cHNbYV0pKSYmYS5nZXROZXh0KCk7YSYmKGEuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXG5cIm5vbmVcIiksYiYmXCJ1bFwiPT1iLmdldE5hbWUoKSYmYi5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIikpfSxoaWRlSXRlbTpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCeUlkKHRoaXMuXy5pdGVtc1thXSkuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpfSxzaG93QWxsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLml0ZW1zLGI9dGhpcy5fLmdyb3VwcyxjPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLGQ7Zm9yKGQgaW4gYSljLmdldEJ5SWQoYVtkXSkuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIik7Zm9yKHZhciBlIGluIGIpYT1jLmdldEJ5SWQoYltlXSksZD1hLmdldE5leHQoKSxhLnNldFN0eWxlKFwiZGlzcGxheVwiLFwiXCIpLGQmJlwidWxcIj09ZC5nZXROYW1lKCkmJmQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIil9LG1hcms6ZnVuY3Rpb24oYSl7dGhpcy5tdWx0aVNlbGVjdHx8dGhpcy51bm1hcmtBbGwoKTthPXRoaXMuXy5pdGVtc1thXTt2YXIgYj10aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCeUlkKGEpO1xuYi5hZGRDbGFzcyhcImNrZV9zZWxlY3RlZFwiKTt0aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKS5nZXRCeUlkKGErXCJfb3B0aW9uXCIpLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhMCk7dGhpcy5vbk1hcmsmJnRoaXMub25NYXJrKGIpfSx1bm1hcms6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50LmdldERvY3VtZW50KCk7YT10aGlzLl8uaXRlbXNbYV07dmFyIGM9Yi5nZXRCeUlkKGEpO2MucmVtb3ZlQ2xhc3MoXCJja2Vfc2VsZWN0ZWRcIik7Yi5nZXRCeUlkKGErXCJfb3B0aW9uXCIpLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIik7dGhpcy5vblVubWFyayYmdGhpcy5vblVubWFyayhjKX0sdW5tYXJrQWxsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLml0ZW1zLGI9dGhpcy5lbGVtZW50LmdldERvY3VtZW50KCksYztmb3IoYyBpbiBhKXt2YXIgZD1hW2NdO2IuZ2V0QnlJZChkKS5yZW1vdmVDbGFzcyhcImNrZV9zZWxlY3RlZFwiKTtiLmdldEJ5SWQoZCtcIl9vcHRpb25cIikucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiKX10aGlzLm9uVW5tYXJrJiZcbnRoaXMub25Vbm1hcmsoKX0saXNNYXJrZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLml0ZW1zW2FdKS5oYXNDbGFzcyhcImNrZV9zZWxlY3RlZFwiKX0sZm9jdXM6ZnVuY3Rpb24oYSl7dGhpcy5fLmZvY3VzSW5kZXg9LTE7dmFyIGI9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGMsZD0tMTtpZihhKWZvcihjPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLml0ZW1zW2FdKS5nZXRGaXJzdCgpO2E9Yi5nZXRJdGVtKCsrZCk7KXtpZihhLmVxdWFscyhjKSl7dGhpcy5fLmZvY3VzSW5kZXg9ZDticmVha319ZWxzZSB0aGlzLmVsZW1lbnQuZm9jdXMoKTtjJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5mb2N1cygpfSwwKX19fSl9fSk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJyaWNoY29tYm9cIix7cmVxdWlyZXM6XCJmbG9hdHBhbmVsLGxpc3RibG9jayxidXR0b25cIixiZWZvcmVJbml0OmZ1bmN0aW9uKGQpe2QudWkuYWRkSGFuZGxlcihDS0VESVRPUi5VSV9SSUNIQ09NQk8sQ0tFRElUT1IudWkucmljaENvbWJvLmhhbmRsZXIpfX0pO1xuKGZ1bmN0aW9uKCl7dmFyIGQ9J1xceDNjc3BhbiBpZFxceDNkXCJ7aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2NvbWJvIGNrZV9jb21ib19fe25hbWV9IHtjbHN9XCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2NzcGFuIGlkXFx4M2RcIntpZH1fbGFiZWxcIiBjbGFzc1xceDNkXCJja2VfY29tYm9fbGFiZWxcIlxceDNle2xhYmVsfVxceDNjL3NwYW5cXHgzZVxceDNjYSBjbGFzc1xceDNkXCJja2VfY29tYm9fYnV0dG9uXCIgdGl0bGVcXHgzZFwie3RpdGxlfVwiIHRhYmluZGV4XFx4M2RcIi0xXCInKyhDS0VESVRPUi5lbnYuZ2Vja28mJiFDS0VESVRPUi5lbnYuaGM/XCJcIjpcIiBocmVmXFx4M2RcXFwiamF2YXNjcmlwdDp2b2lkKCd7dGl0bGVKc30nKVxcXCJcIikrJyBoaWRlZm9jdXNcXHgzZFwidHJ1ZVwiIHJvbGVcXHgzZFwiYnV0dG9uXCIgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcIntpZH1fbGFiZWxcIiBhcmlhLWhhc3BvcHVwXFx4M2RcInRydWVcIic7Q0tFRElUT1IuZW52LmdlY2tvJiZDS0VESVRPUi5lbnYubWFjJiYoZCs9JyBvbmtleXByZXNzXFx4M2RcInJldHVybiBmYWxzZTtcIicpO1xuQ0tFRElUT1IuZW52LmdlY2tvJiYoZCs9JyBvbmJsdXJcXHgzZFwidGhpcy5zdHlsZS5jc3NUZXh0IFxceDNkIHRoaXMuc3R5bGUuY3NzVGV4dDtcIicpO3ZhciBkPWQrKCcgb25rZXlkb3duXFx4M2RcInJldHVybiBDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2tleWRvd25Gbn0sZXZlbnQsdGhpcyk7XCIgb25mb2N1c1xceDNkXCJyZXR1cm4gQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtmb2N1c0ZufSxldmVudCk7XCIgJysoQ0tFRElUT1IuZW52LmllPydvbmNsaWNrXFx4M2RcInJldHVybiBmYWxzZTtcIiBvbm1vdXNldXAnOlwib25jbGlja1wiKSsnXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0sdGhpcyk7cmV0dXJuIGZhbHNlO1wiXFx4M2VcXHgzY3NwYW4gaWRcXHgzZFwie2lkfV90ZXh0XCIgY2xhc3NcXHgzZFwiY2tlX2NvbWJvX3RleHQgY2tlX2NvbWJvX2lubGluZWxhYmVsXCJcXHgzZXtsYWJlbH1cXHgzYy9zcGFuXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2NvbWJvX29wZW5cIlxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9jb21ib19hcnJvd1wiXFx4M2UnK1xuKENLRURJVE9SLmVudi5oYz9cIlxceDI2Izk2NjA7XCI6Q0tFRElUT1IuZW52LmFpcj9cIlxceDI2bmJzcDtcIjpcIlwiKStcIlxceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZVxceDNjL2FcXHgzZVxceDNjL3NwYW5cXHgzZVwiKSxrPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwiY29tYm9cIixkKTtDS0VESVRPUi5VSV9SSUNIQ09NQk89XCJyaWNoY29tYm9cIjtDS0VESVRPUi51aS5yaWNoQ29tYm89Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYSx7Y2FuR3JvdXA6ITEsdGl0bGU6YS5sYWJlbCxtb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czoxfSk7YT10aGlzLnBhbmVsfHx7fTtkZWxldGUgdGhpcy5wYW5lbDt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKTt0aGlzLmRvY3VtZW50PWEucGFyZW50JiZhLnBhcmVudC5nZXREb2N1bWVudCgpfHxDS0VESVRPUi5kb2N1bWVudDthLmNsYXNzTmFtZT1cImNrZV9jb21ib3BhbmVsXCI7XG5hLmJsb2NrPXttdWx0aVNlbGVjdDphLm11bHRpU2VsZWN0LGF0dHJpYnV0ZXM6YS5hdHRyaWJ1dGVzfTthLnRvb2xiYXJSZWxhdGVkPSEwO3RoaXMuXz17cGFuZWxEZWZpbml0aW9uOmEsaXRlbXM6e319fSxwcm90bzp7cmVuZGVySHRtbDpmdW5jdGlvbihhKXt2YXIgYj1bXTt0aGlzLnJlbmRlcihhLGIpO3JldHVybiBiLmpvaW4oXCJcIil9LHJlbmRlcjpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGcoKXtpZih0aGlzLmdldFN0YXRlKCkhPUNLRURJVE9SLlRSSVNUQVRFX09OKXt2YXIgYz10aGlzLm1vZGVzW2EubW9kZV0/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEO2EucmVhZE9ubHkmJiF0aGlzLnJlYWRPbmx5JiYoYz1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCk7dGhpcy5zZXRTdGF0ZShjKTt0aGlzLnNldFZhbHVlKFwiXCIpO2MhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZ0aGlzLnJlZnJlc2gmJnRoaXMucmVmcmVzaCgpfX12YXIgZD1cbkNLRURJVE9SLmVudixoPVwiY2tlX1wiK3RoaXMuaWQsZT1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihiKXtsJiYoYS51bmxvY2tTZWxlY3Rpb24oMSksbD0wKTtjLmV4ZWN1dGUoYil9LHRoaXMpLGY9dGhpcyxjPXtpZDpoLGNvbWJvOnRoaXMsZm9jdXM6ZnVuY3Rpb24oKXtDS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGgpLmdldENoaWxkKDEpLmZvY3VzKCl9LGV4ZWN1dGU6ZnVuY3Rpb24oYyl7dmFyIGI9Zi5fO2lmKGIuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKWlmKGYuY3JlYXRlUGFuZWwoYSksYi5vbiliLnBhbmVsLmhpZGUoKTtlbHNle2YuY29tbWl0KCk7dmFyIGQ9Zi5nZXRWYWx1ZSgpO2Q/Yi5saXN0Lm1hcmsoZCk6Yi5saXN0LnVubWFya0FsbCgpO2IucGFuZWwuc2hvd0Jsb2NrKGYuaWQsbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGMpLDQpfX0sY2xpY2tGbjplfTthLm9uKFwiYWN0aXZlRmlsdGVyQ2hhbmdlXCIsZyx0aGlzKTthLm9uKFwibW9kZVwiLFxuZyx0aGlzKTthLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZyx0aGlzKTshdGhpcy5yZWFkT25seSYmYS5vbihcInJlYWRPbmx5XCIsZyx0aGlzKTt2YXIgbT1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihiLGQpe2I9bmV3IENLRURJVE9SLmRvbS5ldmVudChiKTt2YXIgZz1iLmdldEtleXN0cm9rZSgpO2lmKDQwPT1nKWEub25jZShcInBhbmVsU2hvd1wiLGZ1bmN0aW9uKGEpe2EuZGF0YS5fLnBhbmVsLl8uY3VycmVudEJsb2NrLm9uS2V5RG93big0MCl9KTtzd2l0Y2goZyl7Y2FzZSAxMzpjYXNlIDMyOmNhc2UgNDA6Q0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKGUsZCk7YnJlYWs7ZGVmYXVsdDpjLm9ua2V5KGMsZyl9Yi5wcmV2ZW50RGVmYXVsdCgpfSksbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbigpe2Mub25mb2N1cyYmYy5vbmZvY3VzKCl9KSxsPTA7Yy5rZXlEb3duRm49bTtkPXtpZDpoLG5hbWU6dGhpcy5uYW1lfHx0aGlzLmNvbW1hbmQsbGFiZWw6dGhpcy5sYWJlbCxcbnRpdGxlOnRoaXMudGl0bGUsY2xzOnRoaXMuY2xhc3NOYW1lfHxcIlwiLHRpdGxlSnM6ZC5nZWNrbyYmIWQuaGM/XCJcIjoodGhpcy50aXRsZXx8XCJcIikucmVwbGFjZShcIidcIixcIlwiKSxrZXlkb3duRm46bSxmb2N1c0ZuOm4sY2xpY2tGbjplfTtrLm91dHB1dChkLGIpO2lmKHRoaXMub25SZW5kZXIpdGhpcy5vblJlbmRlcigpO3JldHVybiBjfSxjcmVhdGVQYW5lbDpmdW5jdGlvbihhKXtpZighdGhpcy5fLnBhbmVsKXt2YXIgYj10aGlzLl8ucGFuZWxEZWZpbml0aW9uLGQ9dGhpcy5fLnBhbmVsRGVmaW5pdGlvbi5ibG9jayxrPWIucGFyZW50fHxDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCksaD1cImNrZV9jb21ib3BhbmVsX19cIit0aGlzLm5hbWUsZT1uZXcgQ0tFRElUT1IudWkuZmxvYXRQYW5lbChhLGssYiksZj1lLmFkZExpc3RCbG9jayh0aGlzLmlkLGQpLGM9dGhpcztlLm9uU2hvdz1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyhoKTtjLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTtcbmMuXy5vbj0xO2MuZWRpdG9yRm9jdXMmJiFhLmZvY3VzTWFuYWdlci5oYXNGb2N1cyYmYS5mb2N1cygpO2lmKGMub25PcGVuKWMub25PcGVuKCk7YS5vbmNlKFwicGFuZWxTaG93XCIsZnVuY3Rpb24oKXtmLmZvY3VzKCFmLm11bHRpU2VsZWN0JiZjLmdldFZhbHVlKCkpfSl9O2Uub25IaWRlPWZ1bmN0aW9uKGIpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhoKTtjLnNldFN0YXRlKGMubW9kZXMmJmMubW9kZXNbYS5tb2RlXT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2MuXy5vbj0wO2lmKCFiJiZjLm9uQ2xvc2UpYy5vbkNsb3NlKCl9O2Uub25Fc2NhcGU9ZnVuY3Rpb24oKXtlLmhpZGUoMSl9O2Yub25DbGljaz1mdW5jdGlvbihhLGIpe2Mub25DbGljayYmYy5vbkNsaWNrLmNhbGwoYyxhLGIpO2UuaGlkZSgpfTt0aGlzLl8ucGFuZWw9ZTt0aGlzLl8ubGlzdD1mO2UuZ2V0QmxvY2sodGhpcy5pZCkub25IaWRlPWZ1bmN0aW9uKCl7Yy5fLm9uPVxuMDtjLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09GRil9O3RoaXMuaW5pdCYmdGhpcy5pbml0KCl9fSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuXy52YWx1ZT1hO3ZhciBkPXRoaXMuZG9jdW1lbnQuZ2V0QnlJZChcImNrZV9cIit0aGlzLmlkK1wiX3RleHRcIik7ZCYmKGF8fGI/ZC5yZW1vdmVDbGFzcyhcImNrZV9jb21ib19pbmxpbmVsYWJlbFwiKTooYj10aGlzLmxhYmVsLGQuYWRkQ2xhc3MoXCJja2VfY29tYm9faW5saW5lbGFiZWxcIikpLGQuc2V0VGV4dChcInVuZGVmaW5lZFwiIT10eXBlb2YgYj9iOmEpKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnZhbHVlfHxcIlwifSx1bm1hcmtBbGw6ZnVuY3Rpb24oKXt0aGlzLl8ubGlzdC51bm1hcmtBbGwoKX0sbWFyazpmdW5jdGlvbihhKXt0aGlzLl8ubGlzdC5tYXJrKGEpfSxoaWRlSXRlbTpmdW5jdGlvbihhKXt0aGlzLl8ubGlzdC5oaWRlSXRlbShhKX0saGlkZUdyb3VwOmZ1bmN0aW9uKGEpe3RoaXMuXy5saXN0LmhpZGVHcm91cChhKX0sXG5zaG93QWxsOmZ1bmN0aW9uKCl7dGhpcy5fLmxpc3Quc2hvd0FsbCgpfSxhZGQ6ZnVuY3Rpb24oYSxiLGQpe3RoaXMuXy5pdGVtc1thXT1kfHxhO3RoaXMuXy5saXN0LmFkZChhLGIsZCl9LHN0YXJ0R3JvdXA6ZnVuY3Rpb24oYSl7dGhpcy5fLmxpc3Quc3RhcnRHcm91cChhKX0sY29tbWl0OmZ1bmN0aW9uKCl7dGhpcy5fLmNvbW1pdHRlZHx8KHRoaXMuXy5saXN0LmNvbW1pdCgpLHRoaXMuXy5jb21taXR0ZWQ9MSxDS0VESVRPUi51aS5maXJlKFwicmVhZHlcIix0aGlzKSk7dGhpcy5fLmNvbW1pdHRlZD0xfSxzZXRTdGF0ZTpmdW5jdGlvbihhKXtpZih0aGlzLl8uc3RhdGUhPWEpe3ZhciBiPXRoaXMuZG9jdW1lbnQuZ2V0QnlJZChcImNrZV9cIit0aGlzLmlkKTtiLnNldFN0YXRlKGEsXCJja2VfY29tYm9cIik7YT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ/Yi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIsITApOmIucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTt0aGlzLl8uc3RhdGU9XG5hfX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnN0YXRlfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLl8uc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZ0aGlzLnNldFN0YXRlKHRoaXMuXy5sYXN0U3RhdGUpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5fLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmKHRoaXMuXy5sYXN0U3RhdGU9dGhpcy5fLnN0YXRlLHRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpKX19LHN0YXRpY3M6e2hhbmRsZXI6e2NyZWF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLnJpY2hDb21ibyhhKX19fX0pO0NLRURJVE9SLnVpLnByb3RvdHlwZS5hZGRSaWNoQ29tYm89ZnVuY3Rpb24oYSxiKXt0aGlzLmFkZChhLENLRURJVE9SLlVJX1JJQ0hDT01CTyxiKX19KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGwoYSxiLGMsZixwLGwsdCx2KXt2YXIgdz1hLmNvbmZpZyxxPW5ldyBDS0VESVRPUi5zdHlsZSh0KSxrPXAuc3BsaXQoXCI7XCIpO3A9W107Zm9yKHZhciBtPXt9LGQ9MDtkPGsubGVuZ3RoO2QrKyl7dmFyIGg9a1tkXTtpZihoKXt2YXIgaD1oLnNwbGl0KFwiL1wiKSx1PXt9LG49a1tkXT1oWzBdO3VbY109cFtkXT1oWzFdfHxuO21bbl09bmV3IENLRURJVE9SLnN0eWxlKHQsdSk7bVtuXS5fLmRlZmluaXRpb24ubmFtZT1ufWVsc2Ugay5zcGxpY2UoZC0tLDEpfWEudWkuYWRkUmljaENvbWJvKGIse2xhYmVsOmYubGFiZWwsdGl0bGU6Zi5wYW5lbFRpdGxlLHRvb2xiYXI6XCJzdHlsZXMsXCIrdixhbGxvd2VkQ29udGVudDpxLHJlcXVpcmVkQ29udGVudDpxLHBhbmVsOntjc3M6W0NLRURJVE9SLnNraW4uZ2V0UGF0aChcImVkaXRvclwiKV0uY29uY2F0KHcuY29udGVudHNDc3MpLG11bHRpU2VsZWN0OiExLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmYucGFuZWxUaXRsZX19LFxuaW5pdDpmdW5jdGlvbigpe3RoaXMuc3RhcnRHcm91cChmLnBhbmVsVGl0bGUpO2Zvcih2YXIgYT0wO2E8ay5sZW5ndGg7YSsrKXt2YXIgYj1rW2FdO3RoaXMuYWRkKGIsbVtiXS5idWlsZFByZXZpZXcoKSxiKX19LG9uQ2xpY2s6ZnVuY3Rpb24oYil7YS5mb2N1cygpO2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKTt2YXIgYz10aGlzLmdldFZhbHVlKCksZj1tW2JdO2lmKGMmJmIhPWMpe3ZhciBrPW1bY10sZT1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdO2lmKGUuY29sbGFwc2VkKXt2YXIgZD1hLmVsZW1lbnRQYXRoKCksZz1kLmNvbnRhaW5zKGZ1bmN0aW9uKGEpe3JldHVybiBrLmNoZWNrRWxlbWVudFJlbW92YWJsZShhKX0pO2lmKGcpe3ZhciBoPWUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChnLENLRURJVE9SLlNUQVJUKSxsPWUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChnLENLRURJVE9SLkVORCk7aWYoaCYmbCl7Zm9yKGg9ZS5jcmVhdGVCb29rbWFyaygpO2Q9Zy5nZXRGaXJzdCgpOylkLmluc2VydEJlZm9yZShnKTtcbmcucmVtb3ZlKCk7ZS5tb3ZlVG9Cb29rbWFyayhoKX1lbHNlIGg/ZS5tb3ZlVG9Qb3NpdGlvbihnLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk6bD9lLm1vdmVUb1Bvc2l0aW9uKGcsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKTooZS5zcGxpdEVsZW1lbnQoZyksZS5tb3ZlVG9Qb3NpdGlvbihnLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkscihlLGQuZWxlbWVudHMuc2xpY2UoKSxnKSk7YS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2VdKX19ZWxzZSBhLnJlbW92ZVN0eWxlKGspfWFbYz09Yj9cInJlbW92ZVN0eWxlXCI6XCJhcHBseVN0eWxlXCJdKGYpO2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXthLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXRWYWx1ZSgpO2I9Yi5kYXRhLnBhdGguZWxlbWVudHM7Zm9yKHZhciBkPTAsZjtkPGIubGVuZ3RoO2QrKyl7Zj1iW2RdO2Zvcih2YXIgZSBpbiBtKWlmKG1bZV0uY2hlY2tFbGVtZW50TWF0Y2goZixcbiEwLGEpKXtlIT1jJiZ0aGlzLnNldFZhbHVlKGUpO3JldHVybn19dGhpcy5zZXRWYWx1ZShcIlwiLGwpfSx0aGlzKX0scmVmcmVzaDpmdW5jdGlvbigpe2EuYWN0aXZlRmlsdGVyLmNoZWNrKHEpfHx0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19KX1mdW5jdGlvbiByKGEsYixjKXt2YXIgZj1iLnBvcCgpO2lmKGYpe2lmKGMpcmV0dXJuIHIoYSxiLGYuZXF1YWxzKGMpP251bGw6Yyk7Yz1mLmNsb25lKCk7YS5pbnNlcnROb2RlKGMpO2EubW92ZVRvUG9zaXRpb24oYyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7cihhLGIpfX1DS0VESVRPUi5wbHVnaW5zLmFkZChcImZvbnRcIix7cmVxdWlyZXM6XCJyaWNoY29tYm9cIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY29uZmlnO2woYSxcIkZvbnRcIixcImZhbWlseVwiLGEubGFuZy5mb250LGIuZm9udF9uYW1lcyxiLmZvbnRfZGVmYXVsdExhYmVsLGIuZm9udF9zdHlsZSwzMCk7bChhLFwiRm9udFNpemVcIixcInNpemVcIixcbmEubGFuZy5mb250LmZvbnRTaXplLGIuZm9udFNpemVfc2l6ZXMsYi5mb250U2l6ZV9kZWZhdWx0TGFiZWwsYi5mb250U2l6ZV9zdHlsZSw0MCl9fSl9KSgpO0NLRURJVE9SLmNvbmZpZy5mb250X25hbWVzPVwiQXJpYWwvQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtDb21pYyBTYW5zIE1TL0NvbWljIFNhbnMgTVMsIGN1cnNpdmU7Q291cmllciBOZXcvQ291cmllciBOZXcsIENvdXJpZXIsIG1vbm9zcGFjZTtHZW9yZ2lhL0dlb3JnaWEsIHNlcmlmO0x1Y2lkYSBTYW5zIFVuaWNvZGUvTHVjaWRhIFNhbnMgVW5pY29kZSwgTHVjaWRhIEdyYW5kZSwgc2Fucy1zZXJpZjtUYWhvbWEvVGFob21hLCBHZW5ldmEsIHNhbnMtc2VyaWY7VGltZXMgTmV3IFJvbWFuL1RpbWVzIE5ldyBSb21hbiwgVGltZXMsIHNlcmlmO1RyZWJ1Y2hldCBNUy9UcmVidWNoZXQgTVMsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtWZXJkYW5hL1ZlcmRhbmEsIEdlbmV2YSwgc2Fucy1zZXJpZlwiO1xuQ0tFRElUT1IuY29uZmlnLmZvbnRfZGVmYXVsdExhYmVsPVwiXCI7Q0tFRElUT1IuY29uZmlnLmZvbnRfc3R5bGU9e2VsZW1lbnQ6XCJzcGFuXCIsc3R5bGVzOntcImZvbnQtZmFtaWx5XCI6XCIjKGZhbWlseSlcIn0sb3ZlcnJpZGVzOlt7ZWxlbWVudDpcImZvbnRcIixhdHRyaWJ1dGVzOntmYWNlOm51bGx9fV19O0NLRURJVE9SLmNvbmZpZy5mb250U2l6ZV9zaXplcz1cIjgvOHB4OzkvOXB4OzEwLzEwcHg7MTEvMTFweDsxMi8xMnB4OzE0LzE0cHg7MTYvMTZweDsxOC8xOHB4OzIwLzIwcHg7MjIvMjJweDsyNC8yNHB4OzI2LzI2cHg7MjgvMjhweDszNi8zNnB4OzQ4LzQ4cHg7NzIvNzJweFwiO0NLRURJVE9SLmNvbmZpZy5mb250U2l6ZV9kZWZhdWx0TGFiZWw9XCJcIjtDS0VESVRPUi5jb25maWcuZm9udFNpemVfc3R5bGU9e2VsZW1lbnQ6XCJzcGFuXCIsc3R5bGVzOntcImZvbnQtc2l6ZVwiOlwiIyhzaXplKVwifSxvdmVycmlkZXM6W3tlbGVtZW50OlwiZm9udFwiLGF0dHJpYnV0ZXM6e3NpemU6bnVsbH19XX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmb3Jtc1wiLHtyZXF1aXJlczpcImRpYWxvZyxmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe0NLRURJVE9SLmFkZENzcyhcIi5ja2VfZWRpdGFibGUgZm9ybXtib3JkZXI6IDFweCBkb3R0ZWQgI0ZGMDAwMDtwYWRkaW5nOiAycHg7fVxcblwiKTtDS0VESVRPUi5hZGRDc3MoXCJpbWcuY2tlX2hpZGRlbntiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIrQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImltYWdlcy9oaWRkZW5maWVsZC5naWZcIikrXCIpO2JhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtib3JkZXI6IDFweCBzb2xpZCAjYTlhOWE5O3dpZHRoOiAxNnB4ICFpbXBvcnRhbnQ7aGVpZ2h0OiAxNnB4ICFpbXBvcnRhbnQ7fVwiKX0saW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmxhbmcsZz0wLGg9e2VtYWlsOjEscGFzc3dvcmQ6MSxzZWFyY2g6MSx0ZWw6MSx0ZXh0OjEsdXJsOjF9LGw9e2NoZWNrYm94OlwiaW5wdXRbdHlwZSxuYW1lLGNoZWNrZWQscmVxdWlyZWRdXCIsXG5yYWRpbzpcImlucHV0W3R5cGUsbmFtZSxjaGVja2VkLHJlcXVpcmVkXVwiLHRleHRmaWVsZDpcImlucHV0W3R5cGUsbmFtZSx2YWx1ZSxzaXplLG1heGxlbmd0aCxyZXF1aXJlZF1cIix0ZXh0YXJlYTpcInRleHRhcmVhW2NvbHMscm93cyxuYW1lLHJlcXVpcmVkXVwiLHNlbGVjdDpcInNlbGVjdFtuYW1lLHNpemUsbXVsdGlwbGUscmVxdWlyZWRdOyBvcHRpb25bdmFsdWUsc2VsZWN0ZWRdXCIsYnV0dG9uOlwiaW5wdXRbdHlwZSxuYW1lLHZhbHVlXVwiLGZvcm06XCJmb3JtW2FjdGlvbixuYW1lLGlkLGVuY3R5cGUsdGFyZ2V0LG1ldGhvZF1cIixoaWRkZW5maWVsZDpcImlucHV0W3R5cGUsbmFtZSx2YWx1ZV1cIixpbWFnZWJ1dHRvbjpcImlucHV0W3R5cGUsYWx0LHNyY117d2lkdGgsaGVpZ2h0LGJvcmRlcixib3JkZXItd2lkdGgsYm9yZGVyLXN0eWxlLG1hcmdpbixmbG9hdH1cIn0sbT17Y2hlY2tib3g6XCJpbnB1dFwiLHJhZGlvOlwiaW5wdXRcIix0ZXh0ZmllbGQ6XCJpbnB1dFwiLHRleHRhcmVhOlwidGV4dGFyZWFcIixcbnNlbGVjdDpcInNlbGVjdFwiLGJ1dHRvbjpcImlucHV0XCIsZm9ybTpcImZvcm1cIixoaWRkZW5maWVsZDpcImlucHV0XCIsaW1hZ2VidXR0b246XCJpbnB1dFwifSxlPWZ1bmN0aW9uKGQsYyxlKXt2YXIgaD17YWxsb3dlZENvbnRlbnQ6bFtjXSxyZXF1aXJlZENvbnRlbnQ6bVtjXX07XCJmb3JtXCI9PWMmJihoLmNvbnRleHQ9XCJmb3JtXCIpO2EuYWRkQ29tbWFuZChjLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKGMsaCkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihkLHtsYWJlbDpiLmNvbW1vbltkLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK2Quc2xpY2UoMSldLGNvbW1hbmQ6Yyx0b29sYmFyOlwiZm9ybXMsXCIrKGcrPTEwKX0pO0NLRURJVE9SLmRpYWxvZy5hZGQoYyxlKX0sZj10aGlzLnBhdGgrXCJkaWFsb2dzL1wiOyFhLmJsb2NrbGVzcyYmZShcIkZvcm1cIixcImZvcm1cIixmK1wiZm9ybS5qc1wiKTtlKFwiQ2hlY2tib3hcIixcImNoZWNrYm94XCIsZitcImNoZWNrYm94LmpzXCIpO2UoXCJSYWRpb1wiLFwicmFkaW9cIixcbmYrXCJyYWRpby5qc1wiKTtlKFwiVGV4dEZpZWxkXCIsXCJ0ZXh0ZmllbGRcIixmK1widGV4dGZpZWxkLmpzXCIpO2UoXCJUZXh0YXJlYVwiLFwidGV4dGFyZWFcIixmK1widGV4dGFyZWEuanNcIik7ZShcIlNlbGVjdFwiLFwic2VsZWN0XCIsZitcInNlbGVjdC5qc1wiKTtlKFwiQnV0dG9uXCIsXCJidXR0b25cIixmK1wiYnV0dG9uLmpzXCIpO3ZhciBrPWEucGx1Z2lucy5pbWFnZTtrJiYhYS5wbHVnaW5zLmltYWdlMiYmZShcIkltYWdlQnV0dG9uXCIsXCJpbWFnZWJ1dHRvblwiLENLRURJVE9SLnBsdWdpbnMuZ2V0UGF0aChcImltYWdlXCIpK1wiZGlhbG9ncy9pbWFnZS5qc1wiKTtlKFwiSGlkZGVuRmllbGRcIixcImhpZGRlbmZpZWxkXCIsZitcImhpZGRlbmZpZWxkLmpzXCIpO2EuYWRkTWVudUl0ZW1zJiYoZT17Y2hlY2tib3g6e2xhYmVsOmIuZm9ybXMuY2hlY2tib3hBbmRSYWRpby5jaGVja2JveFRpdGxlLGNvbW1hbmQ6XCJjaGVja2JveFwiLGdyb3VwOlwiY2hlY2tib3hcIn0scmFkaW86e2xhYmVsOmIuZm9ybXMuY2hlY2tib3hBbmRSYWRpby5yYWRpb1RpdGxlLFxuY29tbWFuZDpcInJhZGlvXCIsZ3JvdXA6XCJyYWRpb1wifSx0ZXh0ZmllbGQ6e2xhYmVsOmIuZm9ybXMudGV4dGZpZWxkLnRpdGxlLGNvbW1hbmQ6XCJ0ZXh0ZmllbGRcIixncm91cDpcInRleHRmaWVsZFwifSxoaWRkZW5maWVsZDp7bGFiZWw6Yi5mb3Jtcy5oaWRkZW4udGl0bGUsY29tbWFuZDpcImhpZGRlbmZpZWxkXCIsZ3JvdXA6XCJoaWRkZW5maWVsZFwifSxidXR0b246e2xhYmVsOmIuZm9ybXMuYnV0dG9uLnRpdGxlLGNvbW1hbmQ6XCJidXR0b25cIixncm91cDpcImJ1dHRvblwifSxzZWxlY3Q6e2xhYmVsOmIuZm9ybXMuc2VsZWN0LnRpdGxlLGNvbW1hbmQ6XCJzZWxlY3RcIixncm91cDpcInNlbGVjdFwifSx0ZXh0YXJlYTp7bGFiZWw6Yi5mb3Jtcy50ZXh0YXJlYS50aXRsZSxjb21tYW5kOlwidGV4dGFyZWFcIixncm91cDpcInRleHRhcmVhXCJ9fSxrJiYoZS5pbWFnZWJ1dHRvbj17bGFiZWw6Yi5pbWFnZS50aXRsZUJ1dHRvbixjb21tYW5kOlwiaW1hZ2VidXR0b25cIixncm91cDpcImltYWdlYnV0dG9uXCJ9KSwhYS5ibG9ja2xlc3MmJlxuKGUuZm9ybT17bGFiZWw6Yi5mb3Jtcy5mb3JtLm1lbnUsY29tbWFuZDpcImZvcm1cIixncm91cDpcImZvcm1cIn0pLGEuYWRkTWVudUl0ZW1zKGUpKTthLmNvbnRleHRNZW51JiYoIWEuYmxvY2tsZXNzJiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGQsYyxhKXtpZigoZD1hLmNvbnRhaW5zKFwiZm9ybVwiLDEpKSYmIWQuaXNSZWFkT25seSgpKXJldHVybntmb3JtOkNLRURJVE9SLlRSSVNUQVRFX09GRn19KSxhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGQpe2lmKGQmJiFkLmlzUmVhZE9ubHkoKSl7dmFyIGM9ZC5nZXROYW1lKCk7aWYoXCJzZWxlY3RcIj09YylyZXR1cm57c2VsZWN0OkNLRURJVE9SLlRSSVNUQVRFX09GRn07aWYoXCJ0ZXh0YXJlYVwiPT1jKXJldHVybnt0ZXh0YXJlYTpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2lmKFwiaW5wdXRcIj09Yyl7dmFyIGE9ZC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpfHxcInRleHRcIjtzd2l0Y2goYSl7Y2FzZSBcImJ1dHRvblwiOmNhc2UgXCJzdWJtaXRcIjpjYXNlIFwicmVzZXRcIjpyZXR1cm57YnV0dG9uOkNLRURJVE9SLlRSSVNUQVRFX09GRn07XG5jYXNlIFwiY2hlY2tib3hcIjpyZXR1cm57Y2hlY2tib3g6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTtjYXNlIFwicmFkaW9cIjpyZXR1cm57cmFkaW86Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTtjYXNlIFwiaW1hZ2VcIjpyZXR1cm4gaz97aW1hZ2VidXR0b246Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTpudWxsfWlmKGhbYV0pcmV0dXJue3RleHRmaWVsZDpDS0VESVRPUi5UUklTVEFURV9PRkZ9fWlmKFwiaW1nXCI9PWMmJlwiaGlkZGVuZmllbGRcIj09ZC5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpKXJldHVybntoaWRkZW5maWVsZDpDS0VESVRPUi5UUklTVEFURV9PRkZ9fX0pKTthLm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihkKXt2YXIgYz1kLmRhdGEuZWxlbWVudDtpZighYS5ibG9ja2xlc3MmJmMuaXMoXCJmb3JtXCIpKWQuZGF0YS5kaWFsb2c9XCJmb3JtXCI7ZWxzZSBpZihjLmlzKFwic2VsZWN0XCIpKWQuZGF0YS5kaWFsb2c9XCJzZWxlY3RcIjtlbHNlIGlmKGMuaXMoXCJ0ZXh0YXJlYVwiKSlkLmRhdGEuZGlhbG9nPVxuXCJ0ZXh0YXJlYVwiO2Vsc2UgaWYoYy5pcyhcImltZ1wiKSYmXCJoaWRkZW5maWVsZFwiPT1jLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpZC5kYXRhLmRpYWxvZz1cImhpZGRlbmZpZWxkXCI7ZWxzZSBpZihjLmlzKFwiaW5wdXRcIikpe2M9Yy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpfHxcInRleHRcIjtzd2l0Y2goYyl7Y2FzZSBcImJ1dHRvblwiOmNhc2UgXCJzdWJtaXRcIjpjYXNlIFwicmVzZXRcIjpkLmRhdGEuZGlhbG9nPVwiYnV0dG9uXCI7YnJlYWs7Y2FzZSBcImNoZWNrYm94XCI6ZC5kYXRhLmRpYWxvZz1cImNoZWNrYm94XCI7YnJlYWs7Y2FzZSBcInJhZGlvXCI6ZC5kYXRhLmRpYWxvZz1cInJhZGlvXCI7YnJlYWs7Y2FzZSBcImltYWdlXCI6ZC5kYXRhLmRpYWxvZz1cImltYWdlYnV0dG9uXCJ9aFtjXSYmKGQuZGF0YS5kaWFsb2c9XCJ0ZXh0ZmllbGRcIil9fSl9LGFmdGVySW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGFQcm9jZXNzb3IsZz1iJiZiLmh0bWxGaWx0ZXIsYj1iJiZiLmRhdGFGaWx0ZXI7Q0tFRElUT1IuZW52LmllJiZcbmcmJmcuYWRkUnVsZXMoe2VsZW1lbnRzOntpbnB1dDpmdW5jdGlvbihhKXthPWEuYXR0cmlidXRlczt2YXIgYj1hLnR5cGU7Ynx8KGEudHlwZT1cInRleHRcIik7XCJjaGVja2JveFwiIT1iJiZcInJhZGlvXCIhPWJ8fFwib25cIiE9YS52YWx1ZXx8ZGVsZXRlIGEudmFsdWV9fX0se2FwcGx5VG9BbGw6ITB9KTtiJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7aW5wdXQ6ZnVuY3Rpb24oYil7aWYoXCJoaWRkZW5cIj09Yi5hdHRyaWJ1dGVzLnR5cGUpcmV0dXJuIGEuY3JlYXRlRmFrZVBhcnNlckVsZW1lbnQoYixcImNrZV9oaWRkZW5cIixcImhpZGRlbmZpZWxkXCIpfX19LHthcHBseVRvQWxsOiEwfSl9fSk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmb3JtYXRcIix7cmVxdWlyZXM6XCJyaWNoY29tYm9cIixpbml0OmZ1bmN0aW9uKGEpe2lmKCFhLmJsb2NrbGVzcyl7Zm9yKHZhciBmPWEuY29uZmlnLGM9YS5sYW5nLmZvcm1hdCxsPWYuZm9ybWF0X3RhZ3Muc3BsaXQoXCI7XCIpLGQ9e30sbT0wLG49W10sZz0wO2c8bC5sZW5ndGg7ZysrKXt2YXIgaD1sW2ddLGs9bmV3IENLRURJVE9SLnN0eWxlKGZbXCJmb3JtYXRfXCIraF0pO2lmKCFhLmZpbHRlci5jdXN0b21Db25maWd8fGEuZmlsdGVyLmNoZWNrKGspKW0rKyxkW2hdPWssZFtoXS5fLmVudGVyTW9kZT1hLmNvbmZpZy5lbnRlck1vZGUsbi5wdXNoKGspfTAhPT1tJiZhLnVpLmFkZFJpY2hDb21ibyhcIkZvcm1hdFwiLHtsYWJlbDpjLmxhYmVsLHRpdGxlOmMucGFuZWxUaXRsZSx0b29sYmFyOlwic3R5bGVzLDIwXCIsYWxsb3dlZENvbnRlbnQ6bixwYW5lbDp7Y3NzOltDS0VESVRPUi5za2luLmdldFBhdGgoXCJlZGl0b3JcIildLmNvbmNhdChmLmNvbnRlbnRzQ3NzKSxcbm11bHRpU2VsZWN0OiExLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmMucGFuZWxUaXRsZX19LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0R3JvdXAoYy5wYW5lbFRpdGxlKTtmb3IodmFyIGEgaW4gZCl7dmFyIGU9Y1tcInRhZ19cIithXTt0aGlzLmFkZChhLGRbYV0uYnVpbGRQcmV2aWV3KGUpLGUpfX0sb25DbGljazpmdW5jdGlvbihiKXthLmZvY3VzKCk7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2I9ZFtiXTt2YXIgZT1hLmVsZW1lbnRQYXRoKCk7YVtiLmNoZWNrQWN0aXZlKGUsYSk/XCJyZW1vdmVTdHlsZVwiOlwiYXBwbHlTdHlsZVwiXShiKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSwwKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXthLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYil7dmFyIGU9dGhpcy5nZXRWYWx1ZSgpO2I9Yi5kYXRhLnBhdGg7dGhpcy5yZWZyZXNoKCk7Zm9yKHZhciBjIGluIGQpaWYoZFtjXS5jaGVja0FjdGl2ZShiLGEpKXtjIT1cbmUmJnRoaXMuc2V0VmFsdWUoYyxhLmxhbmcuZm9ybWF0W1widGFnX1wiK2NdKTtyZXR1cm59dGhpcy5zZXRWYWx1ZShcIlwiKX0sdGhpcyl9LG9uT3BlbjpmdW5jdGlvbigpe3RoaXMuc2hvd0FsbCgpO2Zvcih2YXIgYiBpbiBkKWEuYWN0aXZlRmlsdGVyLmNoZWNrKGRbYl0pfHx0aGlzLmhpZGVJdGVtKGIpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9YS5lbGVtZW50UGF0aCgpO2lmKGIpe2lmKGIuaXNDb250ZXh0Rm9yKFwicFwiKSlmb3IodmFyIGMgaW4gZClpZihhLmFjdGl2ZUZpbHRlci5jaGVjayhkW2NdKSlyZXR1cm47dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9fX0pfX19KTtDS0VESVRPUi5jb25maWcuZm9ybWF0X3RhZ3M9XCJwO2gxO2gyO2gzO2g0O2g1O2g2O3ByZTthZGRyZXNzO2RpdlwiO0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfcD17ZWxlbWVudDpcInBcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9kaXY9e2VsZW1lbnQ6XCJkaXZcIn07XG5DS0VESVRPUi5jb25maWcuZm9ybWF0X3ByZT17ZWxlbWVudDpcInByZVwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2FkZHJlc3M9e2VsZW1lbnQ6XCJhZGRyZXNzXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfaDE9e2VsZW1lbnQ6XCJoMVwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2gyPXtlbGVtZW50OlwiaDJcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9oMz17ZWxlbWVudDpcImgzXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfaDQ9e2VsZW1lbnQ6XCJoNFwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2g1PXtlbGVtZW50OlwiaDVcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9oNj17ZWxlbWVudDpcImg2XCJ9OyhmdW5jdGlvbigpe3ZhciBiPXtjYW5VbmRvOiExLGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIik7YS5pbnNlcnRFbGVtZW50KGIpfSxhbGxvd2VkQ29udGVudDpcImhyXCIscmVxdWlyZWRDb250ZW50OlwiaHJcIn07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJob3Jpem9udGFscnVsZVwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuYmxvY2tsZXNzfHwoYS5hZGRDb21tYW5kKFwiaG9yaXpvbnRhbHJ1bGVcIixiKSxhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJIb3Jpem9udGFsUnVsZVwiLHtsYWJlbDphLmxhbmcuaG9yaXpvbnRhbHJ1bGUudG9vbGJhcixjb21tYW5kOlwiaG9yaXpvbnRhbHJ1bGVcIix0b29sYmFyOlwiaW5zZXJ0LDQwXCJ9KSl9fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaHRtbHdyaXRlclwiLHtpbml0OmZ1bmN0aW9uKGIpe3ZhciBhPW5ldyBDS0VESVRPUi5odG1sV3JpdGVyO2EuZm9yY2VTaW1wbGVBbXBlcnNhbmQ9Yi5jb25maWcuZm9yY2VTaW1wbGVBbXBlcnNhbmQ7YS5pbmRlbnRhdGlvbkNoYXJzPWIuY29uZmlnLmRhdGFJbmRlbnRhdGlvbkNoYXJzfHxcIlxcdFwiO2IuZGF0YVByb2Nlc3Nvci53cml0ZXI9YX19KTtcbkNLRURJVE9SLmh0bWxXcml0ZXI9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IuaHRtbFBhcnNlci5iYXNpY1dyaXRlciwkOmZ1bmN0aW9uKCl7dGhpcy5iYXNlKCk7dGhpcy5pbmRlbnRhdGlvbkNoYXJzPVwiXFx0XCI7dGhpcy5zZWxmQ2xvc2luZ0VuZD1cIiAvXFx4M2VcIjt0aGlzLmxpbmVCcmVha0NoYXJzPVwiXFxuXCI7dGhpcy5zb3J0QXR0cmlidXRlcz0xO3RoaXMuXy5pbmRlbnQ9MDt0aGlzLl8uaW5kZW50YXRpb249XCJcIjt0aGlzLl8uaW5QcmU9MDt0aGlzLl8ucnVsZXM9e307dmFyIGI9Q0tFRElUT1IuZHRkLGE7Zm9yKGEgaW4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGIuJG5vbkJvZHlDb250ZW50LGIuJGJsb2NrLGIuJGxpc3RJdGVtLGIuJHRhYmxlQ29udGVudCkpdGhpcy5zZXRSdWxlcyhhLHtpbmRlbnQ6IWJbYV1bXCIjXCJdLGJyZWFrQmVmb3JlT3BlbjoxLGJyZWFrQmVmb3JlQ2xvc2U6IWJbYV1bXCIjXCJdLGJyZWFrQWZ0ZXJDbG9zZToxLG5lZWRzU3BhY2U6YSBpblxuYi4kYmxvY2smJiEoYSBpbntsaToxLGR0OjEsZGQ6MX0pfSk7dGhpcy5zZXRSdWxlcyhcImJyXCIse2JyZWFrQWZ0ZXJPcGVuOjF9KTt0aGlzLnNldFJ1bGVzKFwidGl0bGVcIix7aW5kZW50OjAsYnJlYWtBZnRlck9wZW46MH0pO3RoaXMuc2V0UnVsZXMoXCJzdHlsZVwiLHtpbmRlbnQ6MCxicmVha0JlZm9yZUNsb3NlOjF9KTt0aGlzLnNldFJ1bGVzKFwicHJlXCIse2JyZWFrQWZ0ZXJPcGVuOjEsaW5kZW50OjB9KX0scHJvdG86e29wZW5UYWc6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5fLnJ1bGVzW2JdO3RoaXMuXy5hZnRlckNsb3NlciYmYSYmYS5uZWVkc1NwYWNlJiZ0aGlzLl8ubmVlZHNTcGFjZSYmdGhpcy5fLm91dHB1dC5wdXNoKFwiXFxuXCIpO3RoaXMuXy5pbmRlbnQ/dGhpcy5pbmRlbnRhdGlvbigpOmEmJmEuYnJlYWtCZWZvcmVPcGVuJiYodGhpcy5saW5lQnJlYWsoKSx0aGlzLmluZGVudGF0aW9uKCkpO3RoaXMuXy5vdXRwdXQucHVzaChcIlxceDNjXCIsYik7dGhpcy5fLmFmdGVyQ2xvc2VyPTB9LFxub3BlblRhZ0Nsb3NlOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5fLnJ1bGVzW2JdO2E/KHRoaXMuXy5vdXRwdXQucHVzaCh0aGlzLnNlbGZDbG9zaW5nRW5kKSxjJiZjLmJyZWFrQWZ0ZXJDbG9zZSYmKHRoaXMuXy5uZWVkc1NwYWNlPWMubmVlZHNTcGFjZSkpOih0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzZVwiKSxjJiZjLmluZGVudCYmKHRoaXMuXy5pbmRlbnRhdGlvbis9dGhpcy5pbmRlbnRhdGlvbkNoYXJzKSk7YyYmYy5icmVha0FmdGVyT3BlbiYmdGhpcy5saW5lQnJlYWsoKTtcInByZVwiPT1iJiYodGhpcy5fLmluUHJlPTEpfSxhdHRyaWJ1dGU6ZnVuY3Rpb24oYixhKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKHRoaXMuZm9yY2VTaW1wbGVBbXBlcnNhbmQmJihhPWEucmVwbGFjZSgvJmFtcDsvZyxcIlxceDI2XCIpKSxhPUNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGVBdHRyKGEpKTt0aGlzLl8ub3V0cHV0LnB1c2goXCIgXCIsYiwnXFx4M2RcIicsYSwnXCInKX0sY2xvc2VUYWc6ZnVuY3Rpb24oYil7dmFyIGE9XG50aGlzLl8ucnVsZXNbYl07YSYmYS5pbmRlbnQmJih0aGlzLl8uaW5kZW50YXRpb249dGhpcy5fLmluZGVudGF0aW9uLnN1YnN0cih0aGlzLmluZGVudGF0aW9uQ2hhcnMubGVuZ3RoKSk7dGhpcy5fLmluZGVudD90aGlzLmluZGVudGF0aW9uKCk6YSYmYS5icmVha0JlZm9yZUNsb3NlJiYodGhpcy5saW5lQnJlYWsoKSx0aGlzLmluZGVudGF0aW9uKCkpO3RoaXMuXy5vdXRwdXQucHVzaChcIlxceDNjL1wiLGIsXCJcXHgzZVwiKTtcInByZVwiPT1iJiYodGhpcy5fLmluUHJlPTApO2EmJmEuYnJlYWtBZnRlckNsb3NlJiYodGhpcy5saW5lQnJlYWsoKSx0aGlzLl8ubmVlZHNTcGFjZT1hLm5lZWRzU3BhY2UpO3RoaXMuXy5hZnRlckNsb3Nlcj0xfSx0ZXh0OmZ1bmN0aW9uKGIpe3RoaXMuXy5pbmRlbnQmJih0aGlzLmluZGVudGF0aW9uKCksIXRoaXMuXy5pblByZSYmKGI9Q0tFRElUT1IudG9vbHMubHRyaW0oYikpKTt0aGlzLl8ub3V0cHV0LnB1c2goYil9LGNvbW1lbnQ6ZnVuY3Rpb24oYil7dGhpcy5fLmluZGVudCYmXG50aGlzLmluZGVudGF0aW9uKCk7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2MhLS1cIixiLFwiLS1cXHgzZVwiKX0sbGluZUJyZWFrOmZ1bmN0aW9uKCl7IXRoaXMuXy5pblByZSYmMDx0aGlzLl8ub3V0cHV0Lmxlbmd0aCYmdGhpcy5fLm91dHB1dC5wdXNoKHRoaXMubGluZUJyZWFrQ2hhcnMpO3RoaXMuXy5pbmRlbnQ9MX0saW5kZW50YXRpb246ZnVuY3Rpb24oKXshdGhpcy5fLmluUHJlJiZ0aGlzLl8uaW5kZW50YXRpb24mJnRoaXMuXy5vdXRwdXQucHVzaCh0aGlzLl8uaW5kZW50YXRpb24pO3RoaXMuXy5pbmRlbnQ9MH0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl8ub3V0cHV0PVtdO3RoaXMuXy5pbmRlbnQ9MDt0aGlzLl8uaW5kZW50YXRpb249XCJcIjt0aGlzLl8uYWZ0ZXJDbG9zZXI9MDt0aGlzLl8uaW5QcmU9MH0sc2V0UnVsZXM6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLl8ucnVsZXNbYl07Yz9DS0VESVRPUi50b29scy5leHRlbmQoYyxhLCEwKTp0aGlzLl8ucnVsZXNbYl09YX19fSk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJpZnJhbWVcIix7cmVxdWlyZXM6XCJkaWFsb2csZmFrZW9iamVjdHNcIixvbkxvYWQ6ZnVuY3Rpb24oKXtDS0VESVRPUi5hZGRDc3MoXCJpbWcuY2tlX2lmcmFtZXtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIrQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImltYWdlcy9wbGFjZWhvbGRlci5wbmdcIikrXCIpO2JhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtib3JkZXI6IDFweCBzb2xpZCAjYTlhOWE5O3dpZHRoOiA4MHB4O2hlaWdodDogODBweDt9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGFuZy5pZnJhbWUsYz1cImlmcmFtZVthbGlnbixsb25nZGVzYyxmcmFtZWJvcmRlcixoZWlnaHQsbmFtZSxzY3JvbGxpbmcsc3JjLHRpdGxlLHdpZHRoXVwiO2EucGx1Z2lucy5kaWFsb2dhZHZ0YWImJihjKz1cIjtpZnJhbWVcIithLnBsdWdpbnMuZGlhbG9nYWR2dGFiLmFsbG93ZWRDb250ZW50KHtpZDoxLFxuY2xhc3NlczoxLHN0eWxlczoxfSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJpZnJhbWVcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2lmcmFtZS5qc1wiKTthLmFkZENvbW1hbmQoXCJpZnJhbWVcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImlmcmFtZVwiLHthbGxvd2VkQ29udGVudDpjLHJlcXVpcmVkQ29udGVudDpcImlmcmFtZVwifSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIklmcmFtZVwiLHtsYWJlbDpiLnRvb2xiYXIsY29tbWFuZDpcImlmcmFtZVwiLHRvb2xiYXI6XCJpbnNlcnQsODBcIn0pO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5lbGVtZW50O2IuaXMoXCJpbWdcIikmJlwiaWZyYW1lXCI9PWIuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSYmKGEuZGF0YS5kaWFsb2c9XCJpZnJhbWVcIil9KTthLmFkZE1lbnVJdGVtcyYmYS5hZGRNZW51SXRlbXMoe2lmcmFtZTp7bGFiZWw6Yi50aXRsZSxjb21tYW5kOlwiaWZyYW1lXCIsZ3JvdXA6XCJpbWFnZVwifX0pO1xuYS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhKXtpZihhJiZhLmlzKFwiaW1nXCIpJiZcImlmcmFtZVwiPT1hLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpcmV0dXJue2lmcmFtZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fSl9LGFmdGVySW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGFQcm9jZXNzb3I7KGI9YiYmYi5kYXRhRmlsdGVyKSYmYi5hZGRSdWxlcyh7ZWxlbWVudHM6e2lmcmFtZTpmdW5jdGlvbihiKXtyZXR1cm4gYS5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChiLFwiY2tlX2lmcmFtZVwiLFwiaWZyYW1lXCIsITApfX19KX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbShhKXtmdW5jdGlvbiBmKGEpe3ZhciBiPSExO2cuYXR0YWNoTGlzdGVuZXIoZyxcImtleWRvd25cIixmdW5jdGlvbigpe3ZhciBkPWMuZ2V0Qm9keSgpLmdldEVsZW1lbnRzQnlUYWcoYSk7aWYoIWIpe2Zvcih2YXIgZT0wO2U8ZC5jb3VudCgpO2UrKylkLmdldEl0ZW0oZSkuc2V0Q3VzdG9tRGF0YShcInJldGFpblwiLCEwKTtiPSEwfX0sbnVsbCxudWxsLDEpO2cuYXR0YWNoTGlzdGVuZXIoZyxcImtleXVwXCIsZnVuY3Rpb24oKXt2YXIgZD1jLmdldEVsZW1lbnRzQnlUYWcoYSk7YiYmKDEhPWQuY291bnQoKXx8ZC5nZXRJdGVtKDApLmdldEN1c3RvbURhdGEoXCJyZXRhaW5cIil8fGQuZ2V0SXRlbSgwKS5yZW1vdmUoMSksYj0hMSl9KX12YXIgYj10aGlzLmVkaXRvcixjPWEuZG9jdW1lbnQsZD1jLmJvZHksZT1jLmdldEVsZW1lbnRCeUlkKFwiY2tlX2FjdHNjcnB0XCIpO2UmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTsoZT1jLmdldEVsZW1lbnRCeUlkKFwiY2tlX3NoaW1zY3JwdFwiKSkmJlxuZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpOyhlPWMuZ2V0RWxlbWVudEJ5SWQoXCJja2VfYmFzZXRhZ3NjcnB0XCIpKSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpO2QuY29udGVudEVkaXRhYmxlPSEwO0NLRURJVE9SLmVudi5pZSYmKGQuaGlkZUZvY3VzPSEwLGQuZGlzYWJsZWQ9ITAsZC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSk7ZGVsZXRlIHRoaXMuXy5pc0xvYWRpbmdEYXRhO3RoaXMuJD1kO2M9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudChjKTt0aGlzLnNldHVwKCk7dGhpcy5maXhJbml0aWFsU2VsZWN0aW9uKCk7dmFyIGc9dGhpcztDS0VESVRPUi5lbnYuaWUmJiFDS0VESVRPUi5lbnYuZWRnZSYmYy5nZXREb2N1bWVudEVsZW1lbnQoKS5hZGRDbGFzcyhjLiQuY29tcGF0TW9kZSk7Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2UmJmIuZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9QP2YoXCJwXCIpOkNLRURJVE9SLmVudi5lZGdlJiZiLmVudGVyTW9kZSE9XG5DS0VESVRPUi5FTlRFUl9ESVYmJmYoXCJkaXZcIik7aWYoQ0tFRElUT1IuZW52LndlYmtpdHx8Q0tFRElUT1IuZW52LmllJiYxMDxDS0VESVRPUi5lbnYudmVyc2lvbiljLmdldERvY3VtZW50RWxlbWVudCgpLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldFRhcmdldCgpLmlzKFwiaHRtbFwiKSYmc2V0VGltZW91dChmdW5jdGlvbigpe2IuZWRpdGFibGUoKS5mb2N1cygpfSl9KTtuKGIpO3RyeXtiLmRvY3VtZW50LiQuZXhlY0NvbW1hbmQoXCIyRC1wb3NpdGlvblwiLCExLCEwKX1jYXRjaChoKXt9KENLRURJVE9SLmVudi5nZWNrb3x8Q0tFRElUT1IuZW52LmllJiZcIkNTUzFDb21wYXRcIj09Yi5kb2N1bWVudC4kLmNvbXBhdE1vZGUpJiZ0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kYXRhLmdldEtleXN0cm9rZSgpO2lmKDMzPT1jfHwzND09YylpZihDS0VESVRPUi5lbnYuaWUpc2V0VGltZW91dChmdW5jdGlvbigpe2IuZ2V0U2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKX0sXG4wKTtlbHNlIGlmKGIud2luZG93LiQuaW5uZXJIZWlnaHQ+dGhpcy4kLm9mZnNldEhlaWdodCl7dmFyIGQ9Yi5jcmVhdGVSYW5nZSgpO2RbMzM9PWM/XCJtb3ZlVG9FbGVtZW50RWRpdFN0YXJ0XCI6XCJtb3ZlVG9FbGVtZW50RWRpdEVuZFwiXSh0aGlzKTtkLnNlbGVjdCgpO2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfX0pO0NLRURJVE9SLmVudi5pZSYmdGhpcy5hdHRhY2hMaXN0ZW5lcihjLFwiYmx1clwiLGZ1bmN0aW9uKCl7dHJ5e2MuJC5zZWxlY3Rpb24uZW1wdHkoKX1jYXRjaChhKXt9fSk7Q0tFRElUT1IuZW52LmlPUyYmdGhpcy5hdHRhY2hMaXN0ZW5lcihjLFwidG91Y2hlbmRcIixmdW5jdGlvbigpe2EuZm9jdXMoKX0pO2Q9Yi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnKFwidGl0bGVcIikuZ2V0SXRlbSgwKTtkLmRhdGEoXCJja2UtdGl0bGVcIixkLmdldFRleHQoKSk7Q0tFRElUT1IuZW52LmllJiYoYi5kb2N1bWVudC4kLnRpdGxlPXRoaXMuXy5kb2NUaXRsZSk7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe1widW5sb2FkZWRcIj09XG50aGlzLnN0YXR1cyYmKHRoaXMuc3RhdHVzPVwicmVhZHlcIik7Yi5maXJlKFwiY29udGVudERvbVwiKTt0aGlzLl8uaXNQZW5kaW5nRm9jdXMmJihiLmZvY3VzKCksdGhpcy5fLmlzUGVuZGluZ0ZvY3VzPSExKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5maXJlKFwiZGF0YVJlYWR5XCIpfSwwKX0sMCx0aGlzKX1mdW5jdGlvbiBuKGEpe2Z1bmN0aW9uIGYoKXt2YXIgYzthLmVkaXRhYmxlKCkuYXR0YWNoTGlzdGVuZXIoYSxcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGQ9YS5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZEVsZW1lbnQoKTtkJiYoYyYmKGMuZGV0YWNoRXZlbnQoXCJvbnJlc2l6ZXN0YXJ0XCIsYiksYz1udWxsKSxkLiQuYXR0YWNoRXZlbnQoXCJvbnJlc2l6ZXN0YXJ0XCIsYiksYz1kLiQpfSl9ZnVuY3Rpb24gYihhKXthLnJldHVyblZhbHVlPSExfWlmKENLRURJVE9SLmVudi5nZWNrbyl0cnl7dmFyIGM9YS5kb2N1bWVudC4kO2MuZXhlY0NvbW1hbmQoXCJlbmFibGVPYmplY3RSZXNpemluZ1wiLFxuITEsIWEuY29uZmlnLmRpc2FibGVPYmplY3RSZXNpemluZyk7Yy5leGVjQ29tbWFuZChcImVuYWJsZUlubGluZVRhYmxlRWRpdGluZ1wiLCExLCFhLmNvbmZpZy5kaXNhYmxlTmF0aXZlVGFibGVIYW5kbGVzKX1jYXRjaChkKXt9ZWxzZSBDS0VESVRPUi5lbnYuaWUmJjExPkNLRURJVE9SLmVudi52ZXJzaW9uJiZhLmNvbmZpZy5kaXNhYmxlT2JqZWN0UmVzaXppbmcmJmYoYSl9ZnVuY3Rpb24gcCgpe3ZhciBhPVtdO2lmKDg8PUNLRURJVE9SLmRvY3VtZW50LiQuZG9jdW1lbnRNb2RlKXthLnB1c2goXCJodG1sLkNTUzFDb21wYXQgW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2Vde21pbi1oZWlnaHQ6MCAhaW1wb3J0YW50fVwiKTt2YXIgZj1bXSxiO2ZvcihiIGluIENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHkpZi5wdXNoKFwiaHRtbC5DU1MxQ29tcGF0IFwiK2IrXCJbY29udGVudGVkaXRhYmxlXFx4M2RmYWxzZV1cIik7YS5wdXNoKGYuam9pbihcIixcIikrXCJ7ZGlzcGxheTppbmxpbmUtYmxvY2t9XCIpfWVsc2UgQ0tFRElUT1IuZW52LmdlY2tvJiZcbihhLnB1c2goXCJodG1se2hlaWdodDoxMDAlICFpbXBvcnRhbnR9XCIpLGEucHVzaChcImltZzotbW96LWJyb2tlbnstbW96LWZvcmNlLWJyb2tlbi1pbWFnZS1pY29uOjE7bWluLXdpZHRoOjI0cHg7bWluLWhlaWdodDoyNHB4fVwiKSk7YS5wdXNoKFwiaHRtbHtjdXJzb3I6dGV4dDsqY3Vyc29yOmF1dG99XCIpO2EucHVzaChcImltZyxpbnB1dCx0ZXh0YXJlYXtjdXJzb3I6ZGVmYXVsdH1cIik7cmV0dXJuIGEuam9pbihcIlxcblwiKX1DS0VESVRPUi5wbHVnaW5zLmFkZChcInd5c2l3eWdhcmVhXCIse2luaXQ6ZnVuY3Rpb24oYSl7YS5jb25maWcuZnVsbFBhZ2UmJmEuYWRkRmVhdHVyZSh7YWxsb3dlZENvbnRlbnQ6XCJodG1sIGhlYWQgdGl0bGU7IHN0eWxlIFttZWRpYSx0eXBlXTsgYm9keSAoKilbaWRdOyBtZXRhIGxpbmsgWypdXCIscmVxdWlyZWRDb250ZW50OlwiYm9keVwifSk7YS5hZGRNb2RlKFwid3lzaXd5Z1wiLGZ1bmN0aW9uKGYpe2Z1bmN0aW9uIGIoYil7YiYmYi5yZW1vdmVMaXN0ZW5lcigpO2EuZWRpdGFibGUobmV3IGwoYSxcbmQuJC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkpKTthLnNldERhdGEoYS5nZXREYXRhKDEpLGYpfXZhciBjPVwiZG9jdW1lbnQub3BlbigpO1wiKyhDS0VESVRPUi5lbnYuaWU/XCIoXCIrQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO1wiOlwiXCIpK1wiZG9jdW1lbnQuY2xvc2UoKTtcIixjPUNLRURJVE9SLmVudi5haXI/XCJqYXZhc2NyaXB0OnZvaWQoMClcIjpDS0VESVRPUi5lbnYuaWUmJiFDS0VESVRPUi5lbnYuZWRnZT9cImphdmFzY3JpcHQ6dm9pZChmdW5jdGlvbigpe1wiK2VuY29kZVVSSUNvbXBvbmVudChjKStcIn0oKSlcIjpcIlwiLGQ9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjaWZyYW1lIHNyY1xceDNkXCInK2MrJ1wiIGZyYW1lQm9yZGVyXFx4M2RcIjBcIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKTtkLnNldFN0eWxlcyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifSk7ZC5hZGRDbGFzcyhcImNrZV93eXNpd3lnX2ZyYW1lXCIpLmFkZENsYXNzKFwiY2tlX3Jlc2V0XCIpO1xuYz1hLnVpLnNwYWNlKFwiY29udGVudHNcIik7Yy5hcHBlbmQoZCk7dmFyIGU9Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2V8fENLRURJVE9SLmVudi5nZWNrbztpZihlKWQub24oXCJsb2FkXCIsYik7dmFyIGc9YS50aXRsZSxoPWEuZmlyZShcImFyaWFFZGl0b3JIZWxwTGFiZWxcIix7fSkubGFiZWw7ZyYmKENLRURJVE9SLmVudi5pZSYmaCYmKGcrPVwiLCBcIitoKSxkLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsZykpO2lmKGgpe3ZhciBnPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpLGs9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjc3BhbiBpZFxceDNkXCInK2crJ1wiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2UnK2grXCJcXHgzYy9zcGFuXFx4M2VcIik7Yy5hcHBlbmQoaywxKTtkLnNldEF0dHJpYnV0ZShcImFyaWEtZGVzY3JpYmVkYnlcIixnKX1hLm9uKFwiYmVmb3JlTW9kZVVubG9hZFwiLGZ1bmN0aW9uKGEpe2EucmVtb3ZlTGlzdGVuZXIoKTtrJiZrLnJlbW92ZSgpfSk7XG5kLnNldEF0dHJpYnV0ZXMoe3RhYkluZGV4OmEudGFiSW5kZXgsYWxsb3dUcmFuc3BhcmVuY3k6XCJ0cnVlXCJ9KTshZSYmYigpO2EuZmlyZShcImFyaWFXaWRnZXRcIixkKX0pfX0pO0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuYWRkQ29udGVudHNDc3M9ZnVuY3Rpb24oYSl7dmFyIGY9dGhpcy5jb25maWcsYj1mLmNvbnRlbnRzQ3NzO0NLRURJVE9SLnRvb2xzLmlzQXJyYXkoYil8fChmLmNvbnRlbnRzQ3NzPWI/W2JdOltdKTtmLmNvbnRlbnRzQ3NzLnB1c2goYSl9O3ZhciBsPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKCl7dGhpcy5iYXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl8uZnJhbWVMb2FkZWRIYW5kbGVyPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGEpe0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQobSwwLHRoaXMsYSl9LHRoaXMpO3RoaXMuXy5kb2NUaXRsZT10aGlzLmdldFdpbmRvdygpLmdldEZyYW1lKCkuZ2V0QXR0cmlidXRlKFwidGl0bGVcIil9LFxuYmFzZTpDS0VESVRPUi5lZGl0YWJsZSxwcm90bzp7c2V0RGF0YTpmdW5jdGlvbihhLGYpe3ZhciBiPXRoaXMuZWRpdG9yO2lmKGYpdGhpcy5zZXRIdG1sKGEpLHRoaXMuZml4SW5pdGlhbFNlbGVjdGlvbigpLGIuZmlyZShcImRhdGFSZWFkeVwiKTtlbHNle3RoaXMuXy5pc0xvYWRpbmdEYXRhPSEwO2IuXy5kYXRhU3RvcmU9e2lkOjF9O3ZhciBjPWIuY29uZmlnLGQ9Yy5mdWxsUGFnZSxlPWMuZG9jVHlwZSxnPUNLRURJVE9SLnRvb2xzLmJ1aWxkU3R5bGVIdG1sKHAoKSkucmVwbGFjZSgvPHN0eWxlPi8sJ1xceDNjc3R5bGUgZGF0YS1ja2UtdGVtcFxceDNkXCIxXCJcXHgzZScpO2R8fChnKz1DS0VESVRPUi50b29scy5idWlsZFN0eWxlSHRtbChiLmNvbmZpZy5jb250ZW50c0NzcykpO3ZhciBoPWMuYmFzZUhyZWY/J1xceDNjYmFzZSBocmVmXFx4M2RcIicrYy5iYXNlSHJlZisnXCIgZGF0YS1ja2UtdGVtcFxceDNkXCIxXCIgL1xceDNlJzpcIlwiO2QmJihhPWEucmVwbGFjZSgvPCFET0NUWVBFW14+XSo+L2ksZnVuY3Rpb24oYSl7Yi5kb2NUeXBlPVxuZT1hO3JldHVyblwiXCJ9KS5yZXBsYWNlKC88XFw/eG1sXFxzW15cXD9dKlxcPz4vaSxmdW5jdGlvbihhKXtiLnhtbERlY2xhcmF0aW9uPWE7cmV0dXJuXCJcIn0pKTthPWIuZGF0YVByb2Nlc3Nvci50b0h0bWwoYSk7ZD8oLzxib2R5W1xcc3w+XS8udGVzdChhKXx8KGE9XCJcXHgzY2JvZHlcXHgzZVwiK2EpLC88aHRtbFtcXHN8Pl0vLnRlc3QoYSl8fChhPVwiXFx4M2NodG1sXFx4M2VcIithK1wiXFx4M2MvaHRtbFxceDNlXCIpLC88aGVhZFtcXHN8Pl0vLnRlc3QoYSk/Lzx0aXRsZVtcXHN8Pl0vLnRlc3QoYSl8fChhPWEucmVwbGFjZSgvPGhlYWRbXj5dKj4vLFwiJFxceDI2XFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVwiKSk6YT1hLnJlcGxhY2UoLzxodG1sW14+XSo+LyxcIiRcXHgyNlxceDNjaGVhZFxceDNlXFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVxceDNjL2hlYWRcXHgzZVwiKSxoJiYoYT1hLnJlcGxhY2UoLzxoZWFkW14+XSo/Pi8sXCIkXFx4MjZcIitoKSksYT1hLnJlcGxhY2UoLzxcXC9oZWFkXFxzKj4vLGcrXCIkXFx4MjZcIiksYT1cbmUrYSk6YT1jLmRvY1R5cGUrJ1xceDNjaHRtbCBkaXJcXHgzZFwiJytjLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbisnXCIgbGFuZ1xceDNkXCInKyhjLmNvbnRlbnRzTGFuZ3VhZ2V8fGIubGFuZ0NvZGUpKydcIlxceDNlXFx4M2NoZWFkXFx4M2VcXHgzY3RpdGxlXFx4M2UnK3RoaXMuXy5kb2NUaXRsZStcIlxceDNjL3RpdGxlXFx4M2VcIitoK2crXCJcXHgzYy9oZWFkXFx4M2VcXHgzY2JvZHlcIisoYy5ib2R5SWQ/JyBpZFxceDNkXCInK2MuYm9keUlkKydcIic6XCJcIikrKGMuYm9keUNsYXNzPycgY2xhc3NcXHgzZFwiJytjLmJvZHlDbGFzcysnXCInOlwiXCIpK1wiXFx4M2VcIithK1wiXFx4M2MvYm9keVxceDNlXFx4M2MvaHRtbFxceDNlXCI7Q0tFRElUT1IuZW52LmdlY2tvJiYoYT1hLnJlcGxhY2UoLzxib2R5LywnXFx4M2Nib2R5IGNvbnRlbnRlZGl0YWJsZVxceDNkXCJ0cnVlXCIgJyksMkU0PkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYT1hLnJlcGxhY2UoLzxib2R5W14+XSo+LyxcIiRcXHgyNlxceDNjIS0tIGNrZS1jb250ZW50LXN0YXJ0IC0tXFx4M2VcIikpKTtcbmM9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9hY3RzY3JwdFwiIHR5cGVcXHgzZFwidGV4dC9qYXZhc2NyaXB0XCInKyhDS0VESVRPUi5lbnYuaWU/JyBkZWZlclxceDNkXCJkZWZlclwiICc6XCJcIikrXCJcXHgzZXZhciB3YXNMb2FkZWRcXHgzZDA7ZnVuY3Rpb24gb25sb2FkKCl7aWYoIXdhc0xvYWRlZCl3aW5kb3cucGFyZW50LkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbihcIit0aGlzLl8uZnJhbWVMb2FkZWRIYW5kbGVyK1wiLHdpbmRvdyk7d2FzTG9hZGVkXFx4M2QxO31cIisoQ0tFRElUT1IuZW52LmllP1wib25sb2FkKCk7XCI6J2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIG9ubG9hZCwgZmFsc2UgKTsnKStcIlxceDNjL3NjcmlwdFxceDNlXCI7Q0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYys9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9zaGltc2NycHRcIlxceDNld2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5lbmFibGVIdG1sNUVsZW1lbnRzKGRvY3VtZW50KVxceDNjL3NjcmlwdFxceDNlJyk7XG5oJiZDS0VESVRPUi5lbnYuaWUmJjEwPkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYys9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9iYXNldGFnc2NycHRcIlxceDNldmFyIGJhc2VUYWcgXFx4M2QgZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXCJiYXNlXCIgKTtiYXNlVGFnLmhyZWYgXFx4M2QgYmFzZVRhZy5ocmVmO1xceDNjL3NjcmlwdFxceDNlJyk7YT1hLnJlcGxhY2UoLyg/PVxccyo8XFwvKDo/aGVhZCk+KS8sYyk7dGhpcy5jbGVhckN1c3RvbURhdGEoKTt0aGlzLmNsZWFyTGlzdGVuZXJzKCk7Yi5maXJlKFwiY29udGVudERvbVVubG9hZFwiKTt2YXIgaz10aGlzLmdldERvY3VtZW50KCk7dHJ5e2sud3JpdGUoYSl9Y2F0Y2gobCl7c2V0VGltZW91dChmdW5jdGlvbigpe2sud3JpdGUoYSl9LDApfX19LGdldERhdGE6ZnVuY3Rpb24oYSl7aWYoYSlyZXR1cm4gdGhpcy5nZXRIdG1sKCk7YT10aGlzLmVkaXRvcjt2YXIgZj1hLmNvbmZpZyxiPWYuZnVsbFBhZ2UsYz1iJiZhLmRvY1R5cGUsZD1iJiZhLnhtbERlY2xhcmF0aW9uLFxuZT10aGlzLmdldERvY3VtZW50KCksYj1iP2UuZ2V0RG9jdW1lbnRFbGVtZW50KCkuZ2V0T3V0ZXJIdG1sKCk6ZS5nZXRCb2R5KCkuZ2V0SHRtbCgpO0NLRURJVE9SLmVudi5nZWNrbyYmZi5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoYj1iLnJlcGxhY2UoLzxicj4oPz1cXHMqKDo/JHw8XFwvYm9keT4pKS8sXCJcIikpO2I9YS5kYXRhUHJvY2Vzc29yLnRvRGF0YUZvcm1hdChiKTtkJiYoYj1kK1wiXFxuXCIrYik7YyYmKGI9YytcIlxcblwiK2IpO3JldHVybiBifSxmb2N1czpmdW5jdGlvbigpe3RoaXMuXy5pc0xvYWRpbmdEYXRhP3RoaXMuXy5pc1BlbmRpbmdGb2N1cz0hMDpsLmJhc2VQcm90by5mb2N1cy5jYWxsKHRoaXMpfSxkZXRhY2g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVkaXRvcixmPWEuZG9jdW1lbnQsYjt0cnl7Yj1hLndpbmRvdy5nZXRGcmFtZSgpfWNhdGNoKGMpe31sLmJhc2VQcm90by5kZXRhY2guY2FsbCh0aGlzKTt0aGlzLmNsZWFyQ3VzdG9tRGF0YSgpO2YuZ2V0RG9jdW1lbnRFbGVtZW50KCkuY2xlYXJDdXN0b21EYXRhKCk7XG5DS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbih0aGlzLl8uZnJhbWVMb2FkZWRIYW5kbGVyKTtiJiZiLmdldFBhcmVudCgpPyhiLmNsZWFyQ3VzdG9tRGF0YSgpLChhPWIucmVtb3ZlQ3VzdG9tRGF0YShcIm9uUmVzaXplXCIpKSYmYS5yZW1vdmVMaXN0ZW5lcigpLGIucmVtb3ZlKCkpOkNLRURJVE9SLndhcm4oXCJlZGl0b3ItZGVzdHJveS1pZnJhbWVcIil9fX0pfSkoKTtDS0VESVRPUi5jb25maWcuZGlzYWJsZU9iamVjdFJlc2l6aW5nPSExO0NLRURJVE9SLmNvbmZpZy5kaXNhYmxlTmF0aXZlVGFibGVIYW5kbGVzPSEwO0NLRURJVE9SLmNvbmZpZy5kaXNhYmxlTmF0aXZlU3BlbGxDaGVja2VyPSEwOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoYixhKXthfHwoYT1iLmdldFNlbGVjdGlvbigpLmdldFNlbGVjdGVkRWxlbWVudCgpKTtpZihhJiZhLmlzKFwiaW1nXCIpJiYhYS5kYXRhKFwiY2tlLXJlYWxlbGVtZW50XCIpJiYhYS5pc1JlYWRPbmx5KCkpcmV0dXJuIGF9ZnVuY3Rpb24gZihiKXt2YXIgYT1iLmdldFN0eWxlKFwiZmxvYXRcIik7aWYoXCJpbmhlcml0XCI9PWF8fFwibm9uZVwiPT1hKWE9MDthfHwoYT1iLmdldEF0dHJpYnV0ZShcImFsaWduXCIpKTtyZXR1cm4gYX1DS0VESVRPUi5wbHVnaW5zLmFkZChcImltYWdlXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihiKXtpZighYi5wbHVnaW5zLmltYWdlMil7Q0tFRElUT1IuZGlhbG9nLmFkZChcImltYWdlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9pbWFnZS5qc1wiKTt2YXIgYT1cImltZ1thbHQsIXNyY117Ym9yZGVyLXN0eWxlLGJvcmRlci13aWR0aCxmbG9hdCxoZWlnaHQsbWFyZ2luLG1hcmdpbi1ib3R0b20sbWFyZ2luLWxlZnQsbWFyZ2luLXJpZ2h0LG1hcmdpbi10b3Asd2lkdGh9XCI7XG5DS0VESVRPUi5kaWFsb2cuaXNUYWJFbmFibGVkKGIsXCJpbWFnZVwiLFwiYWR2YW5jZWRcIikmJihhPVwiaW1nW2FsdCxkaXIsaWQsbGFuZyxsb25nZGVzYywhc3JjLHRpdGxlXXsqfSgqKVwiKTtiLmFkZENvbW1hbmQoXCJpbWFnZVwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiaW1hZ2VcIix7YWxsb3dlZENvbnRlbnQ6YSxyZXF1aXJlZENvbnRlbnQ6XCJpbWdbYWx0LHNyY11cIixjb250ZW50VHJhbnNmb3JtYXRpb25zOltbXCJpbWd7d2lkdGh9OiBzaXplVG9TdHlsZVwiLFwiaW1nW3dpZHRoXTogc2l6ZVRvQXR0cmlidXRlXCJdLFtcImltZ3tmbG9hdH06IGFsaWdubWVudFRvU3R5bGVcIixcImltZ1thbGlnbl06IGFsaWdubWVudFRvQXR0cmlidXRlXCJdXX0pKTtiLnVpLmFkZEJ1dHRvbiYmYi51aS5hZGRCdXR0b24oXCJJbWFnZVwiLHtsYWJlbDpiLmxhbmcuY29tbW9uLmltYWdlLGNvbW1hbmQ6XCJpbWFnZVwiLHRvb2xiYXI6XCJpbnNlcnQsMTBcIn0pO2Iub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGIpe3ZhciBhPVxuYi5kYXRhLmVsZW1lbnQ7IWEuaXMoXCJpbWdcIil8fGEuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKXx8YS5pc1JlYWRPbmx5KCl8fChiLmRhdGEuZGlhbG9nPVwiaW1hZ2VcIil9KTtiLmFkZE1lbnVJdGVtcyYmYi5hZGRNZW51SXRlbXMoe2ltYWdlOntsYWJlbDpiLmxhbmcuaW1hZ2UubWVudSxjb21tYW5kOlwiaW1hZ2VcIixncm91cDpcImltYWdlXCJ9fSk7Yi5jb250ZXh0TWVudSYmYi5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhKXtpZihlKGIsYSkpcmV0dXJue2ltYWdlOkNLRURJVE9SLlRSSVNUQVRFX09GRn19KX19LGFmdGVySW5pdDpmdW5jdGlvbihiKXtmdW5jdGlvbiBhKGEpe3ZhciBkPWIuZ2V0Q29tbWFuZChcImp1c3RpZnlcIithKTtpZihkKXtpZihcImxlZnRcIj09YXx8XCJyaWdodFwiPT1hKWQub24oXCJleGVjXCIsZnVuY3Rpb24oZCl7dmFyIGM9ZShiKSxnO2MmJihnPWYoYyksZz09YT8oYy5yZW1vdmVTdHlsZShcImZsb2F0XCIpLGE9PWYoYykmJmMucmVtb3ZlQXR0cmlidXRlKFwiYWxpZ25cIikpOlxuYy5zZXRTdHlsZShcImZsb2F0XCIsYSksZC5jYW5jZWwoKSl9KTtkLm9uKFwicmVmcmVzaFwiLGZ1bmN0aW9uKGQpe3ZhciBjPWUoYik7YyYmKGM9ZihjKSx0aGlzLnNldFN0YXRlKGM9PWE/Q0tFRElUT1IuVFJJU1RBVEVfT046XCJyaWdodFwiPT1hfHxcImxlZnRcIj09YT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpLGQuY2FuY2VsKCkpfSl9fWIucGx1Z2lucy5pbWFnZTJ8fChhKFwibGVmdFwiKSxhKFwicmlnaHRcIiksYShcImNlbnRlclwiKSxhKFwiYmxvY2tcIikpfX0pfSkoKTtDS0VESVRPUi5jb25maWcuaW1hZ2VfcmVtb3ZlTGlua0J5RW1wdHlVUkw9ITA7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbShhLGIpe3ZhciBlLGY7Yi5vbihcInJlZnJlc2hcIixmdW5jdGlvbihhKXt2YXIgYj1ba10sYztmb3IoYyBpbiBhLmRhdGEuc3RhdGVzKWIucHVzaChhLmRhdGEuc3RhdGVzW2NdKTt0aGlzLnNldFN0YXRlKENLRURJVE9SLnRvb2xzLnNlYXJjaChiLHApP3A6ayl9LGIsbnVsbCwxMDApO2Iub24oXCJleGVjXCIsZnVuY3Rpb24oYil7ZT1hLmdldFNlbGVjdGlvbigpO2Y9ZS5jcmVhdGVCb29rbWFya3MoMSk7Yi5kYXRhfHwoYi5kYXRhPXt9KTtiLmRhdGEuZG9uZT0hMX0sYixudWxsLDApO2Iub24oXCJleGVjXCIsZnVuY3Rpb24oKXthLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7ZS5zZWxlY3RCb29rbWFya3MoZil9LGIsbnVsbCwxMDApfXZhciBrPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHA9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaW5kZW50XCIse2luaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQuZ2VuZXJpY0RlZmluaXRpb247XG5tKGEsYS5hZGRDb21tYW5kKFwiaW5kZW50XCIsbmV3IGIoITApKSk7bShhLGEuYWRkQ29tbWFuZChcIm91dGRlbnRcIixuZXcgYikpO2EudWkuYWRkQnV0dG9uJiYoYS51aS5hZGRCdXR0b24oXCJJbmRlbnRcIix7bGFiZWw6YS5sYW5nLmluZGVudC5pbmRlbnQsY29tbWFuZDpcImluZGVudFwiLGRpcmVjdGlvbmFsOiEwLHRvb2xiYXI6XCJpbmRlbnQsMjBcIn0pLGEudWkuYWRkQnV0dG9uKFwiT3V0ZGVudFwiLHtsYWJlbDphLmxhbmcuaW5kZW50Lm91dGRlbnQsY29tbWFuZDpcIm91dGRlbnRcIixkaXJlY3Rpb25hbDohMCx0b29sYmFyOlwiaW5kZW50LDEwXCJ9KSk7YS5vbihcImRpckNoYW5nZWRcIixmdW5jdGlvbihiKXt2YXIgZj1hLmNyZWF0ZVJhbmdlKCksbD1iLmRhdGEubm9kZTtmLnNldFN0YXJ0QmVmb3JlKGwpO2Yuc2V0RW5kQWZ0ZXIobCk7Zm9yKHZhciBuPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYpLGM7Yz1uLm5leHQoKTspaWYoYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpaWYoIWMuZXF1YWxzKGwpJiZcbmMuZ2V0RGlyZWN0aW9uKCkpZi5zZXRTdGFydEFmdGVyKGMpLG49bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZik7ZWxzZXt2YXIgZD1hLmNvbmZpZy5pbmRlbnRDbGFzc2VzO2lmKGQpZm9yKHZhciBnPVwibHRyXCI9PWIuZGF0YS5kaXI/W1wiX3J0bFwiLFwiXCJdOltcIlwiLFwiX3J0bFwiXSxoPTA7aDxkLmxlbmd0aDtoKyspYy5oYXNDbGFzcyhkW2hdK2dbMF0pJiYoYy5yZW1vdmVDbGFzcyhkW2hdK2dbMF0pLGMuYWRkQ2xhc3MoZFtoXStnWzFdKSk7ZD1jLmdldFN0eWxlKFwibWFyZ2luLXJpZ2h0XCIpO2c9Yy5nZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIpO2Q/Yy5zZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIsZCk6Yy5yZW1vdmVTdHlsZShcIm1hcmdpbi1sZWZ0XCIpO2c/Yy5zZXRTdHlsZShcIm1hcmdpbi1yaWdodFwiLGcpOmMucmVtb3ZlU3R5bGUoXCJtYXJnaW4tcmlnaHRcIil9fSl9fSk7Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQ9e2dlbmVyaWNEZWZpbml0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaXNJbmRlbnQ9ISFhO1xudGhpcy5zdGFydERpc2FibGVkPSF0aGlzLmlzSW5kZW50fSxzcGVjaWZpY0RlZmluaXRpb246ZnVuY3Rpb24oYSxiLGUpe3RoaXMubmFtZT1iO3RoaXMuZWRpdG9yPWE7dGhpcy5qb2JzPXt9O3RoaXMuZW50ZXJCcj1hLmNvbmZpZy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSO3RoaXMuaXNJbmRlbnQ9ISFlO3RoaXMucmVsYXRlZEdsb2JhbD1lP1wiaW5kZW50XCI6XCJvdXRkZW50XCI7dGhpcy5pbmRlbnRLZXk9ZT85OkNLRURJVE9SLlNISUZUKzk7dGhpcy5kYXRhYmFzZT17fX0scmVnaXN0ZXJDb21tYW5kczpmdW5jdGlvbihhLGIpe2Eub24oXCJwbHVnaW5zTG9hZGVkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gYikoZnVuY3Rpb24oYSxiKXt2YXIgZT1hLmdldENvbW1hbmQoYi5yZWxhdGVkR2xvYmFsKSxjO2ZvcihjIGluIGIuam9icyllLm9uKFwiZXhlY1wiLGZ1bmN0aW9uKGQpe2QuZGF0YS5kb25lfHwoYS5maXJlKFwibG9ja1NuYXBzaG90XCIpLGIuZXhlY0pvYihhLGMpJiYoZC5kYXRhLmRvbmU9XG4hMCksYS5maXJlKFwidW5sb2NrU25hcHNob3RcIiksQ0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGIuZGF0YWJhc2UpKX0sdGhpcyxudWxsLGMpLGUub24oXCJyZWZyZXNoXCIsZnVuY3Rpb24oZCl7ZC5kYXRhLnN0YXRlc3x8KGQuZGF0YS5zdGF0ZXM9e30pO2QuZGF0YS5zdGF0ZXNbYi5uYW1lK1wiQFwiK2NdPWIucmVmcmVzaEpvYihhLGMsZC5kYXRhLnBhdGgpfSx0aGlzLG51bGwsYyk7YS5hZGRGZWF0dXJlKGIpfSkodGhpcyxiW2FdKX0pfX07Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQuZ2VuZXJpY0RlZmluaXRpb24ucHJvdG90eXBlPXtjb250ZXh0OlwicFwiLGV4ZWM6ZnVuY3Rpb24oKXt9fTtDS0VESVRPUi5wbHVnaW5zLmluZGVudC5zcGVjaWZpY0RlZmluaXRpb24ucHJvdG90eXBlPXtleGVjSm9iOmZ1bmN0aW9uKGEsYil7dmFyIGU9dGhpcy5qb2JzW2JdO2lmKGUuc3RhdGUhPWspcmV0dXJuIGUuZXhlYy5jYWxsKHRoaXMsYSl9LHJlZnJlc2hKb2I6ZnVuY3Rpb24oYSxcbmIsZSl7Yj10aGlzLmpvYnNbYl07YS5hY3RpdmVGaWx0ZXIuY2hlY2tGZWF0dXJlKHRoaXMpP2Iuc3RhdGU9Yi5yZWZyZXNoLmNhbGwodGhpcyxhLGUpOmIuc3RhdGU9aztyZXR1cm4gYi5zdGF0ZX0sZ2V0Q29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250YWlucyh0aGlzLmNvbnRleHQpfX19KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGYoYixjLGEpe2lmKCFiLmdldEN1c3RvbURhdGEoXCJpbmRlbnRfcHJvY2Vzc2VkXCIpKXt2YXIgZD10aGlzLmVkaXRvcixsPXRoaXMuaXNJbmRlbnQ7aWYoYyl7ZD1iLiQuY2xhc3NOYW1lLm1hdGNoKHRoaXMuY2xhc3NOYW1lUmVnZXgpO2E9MDtkJiYoZD1kWzFdLGE9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihjLGQpKzEpO2lmKDA+KGErPWw/MTotMSkpcmV0dXJuO2E9TWF0aC5taW4oYSxjLmxlbmd0aCk7YT1NYXRoLm1heChhLDApO2IuJC5jbGFzc05hbWU9Q0tFRElUT1IudG9vbHMubHRyaW0oYi4kLmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY2xhc3NOYW1lUmVnZXgsXCJcIikpOzA8YSYmYi5hZGRDbGFzcyhjW2EtMV0pfWVsc2V7Yz1tKGIsYSk7YT1wYXJzZUludChiLmdldFN0eWxlKGMpLDEwKTt2YXIgZz1kLmNvbmZpZy5pbmRlbnRPZmZzZXR8fDQwO2lzTmFOKGEpJiYoYT0wKTthKz0obD8xOi0xKSpnO2lmKDA+YSlyZXR1cm47YT1NYXRoLm1heChhLFxuMCk7YT1NYXRoLmNlaWwoYS9nKSpnO2Iuc2V0U3R5bGUoYyxhP2ErKGQuY29uZmlnLmluZGVudFVuaXR8fFwicHhcIik6XCJcIik7XCJcIj09PWIuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikmJmIucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIil9Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKHRoaXMuZGF0YWJhc2UsYixcImluZGVudF9wcm9jZXNzZWRcIiwxKX19ZnVuY3Rpb24gbShiLGMpe3JldHVyblwibHRyXCI9PShjfHxiLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIikpP1wibWFyZ2luLWxlZnRcIjpcIm1hcmdpbi1yaWdodFwifXZhciBoPUNLRURJVE9SLmR0ZC4kbGlzdEl0ZW0scD1DS0VESVRPUi5kdGQuJGxpc3Qsaz1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxuPUNLRURJVE9SLlRSSVNUQVRFX09GRjtDS0VESVRPUi5wbHVnaW5zLmFkZChcImluZGVudGJsb2NrXCIse3JlcXVpcmVzOlwiaW5kZW50XCIsaW5pdDpmdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7YS5zcGVjaWZpY0RlZmluaXRpb24uYXBwbHkodGhpcyxcbmFyZ3VtZW50cyk7dGhpcy5hbGxvd2VkQ29udGVudD17XCJkaXYgaDEgaDIgaDMgaDQgaDUgaDYgb2wgcCBwcmUgdWxcIjp7cHJvcGVydGllc09ubHk6ITAsc3R5bGVzOmQ/bnVsbDpcIm1hcmdpbi1sZWZ0LG1hcmdpbi1yaWdodFwiLGNsYXNzZXM6ZHx8bnVsbH19O3RoaXMuZW50ZXJCciYmKHRoaXMuYWxsb3dlZENvbnRlbnQuZGl2PSEwKTt0aGlzLnJlcXVpcmVkQ29udGVudD0odGhpcy5lbnRlckJyP1wiZGl2XCI6XCJwXCIpKyhkP1wiKFwiK2Quam9pbihcIixcIikrXCIpXCI6XCJ7bWFyZ2luLWxlZnR9XCIpO3RoaXMuam9icz17MjA6e3JlZnJlc2g6ZnVuY3Rpb24oYSxiKXt2YXIgZT1iLmJsb2NrfHxiLmJsb2NrTGltaXQ7aWYoIWUuaXMoaCkpdmFyIGM9ZS5nZXRBc2NlbmRhbnQoaCksZT1jJiZiLmNvbnRhaW5zKGMpfHxlO2UuaXMoaCkmJihlPWUuZ2V0UGFyZW50KCkpO2lmKHRoaXMuZW50ZXJCcnx8dGhpcy5nZXRDb250ZXh0KGIpKXtpZihkKXt2YXIgYz1kLGU9ZS4kLmNsYXNzTmFtZS5tYXRjaCh0aGlzLmNsYXNzTmFtZVJlZ2V4KSxcbmY9dGhpcy5pc0luZGVudCxjPWU/Zj9lWzFdIT1jLnNsaWNlKC0xKTohMDpmO3JldHVybiBjP246a31yZXR1cm4gdGhpcy5pc0luZGVudD9uOmU/Q0tFRElUT1JbMD49KHBhcnNlSW50KGUuZ2V0U3R5bGUobShlKSksMTApfHwwKT9cIlRSSVNUQVRFX0RJU0FCTEVEXCI6XCJUUklTVEFURV9PRkZcIl06a31yZXR1cm4ga30sZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmdldFNlbGVjdGlvbigpLGI9YiYmYi5nZXRSYW5nZXMoKVswXSxjO2lmKGM9YS5lbGVtZW50UGF0aCgpLmNvbnRhaW5zKHApKWYuY2FsbCh0aGlzLGMsZCk7ZWxzZSBmb3IoYj1iLmNyZWF0ZUl0ZXJhdG9yKCksYT1hLmNvbmZpZy5lbnRlck1vZGUsYi5lbmZvcmNlUmVhbEJsb2Nrcz0hMCxiLmVubGFyZ2VCcj1hIT1DS0VESVRPUi5FTlRFUl9CUjtjPWIuZ2V0TmV4dFBhcmFncmFwaChhPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpOyljLmlzUmVhZE9ubHkoKXx8Zi5jYWxsKHRoaXMsYyxkKTtyZXR1cm4hMH19fX12YXIgYT1cbkNLRURJVE9SLnBsdWdpbnMuaW5kZW50LGQ9Yi5jb25maWcuaW5kZW50Q2xhc3NlczthLnJlZ2lzdGVyQ29tbWFuZHMoYix7aW5kZW50YmxvY2s6bmV3IGMoYixcImluZGVudGJsb2NrXCIsITApLG91dGRlbnRibG9jazpuZXcgYyhiLFwib3V0ZGVudGJsb2NrXCIpfSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGMucHJvdG90eXBlLGEuc3BlY2lmaWNEZWZpbml0aW9uLnByb3RvdHlwZSx7Y29udGV4dDp7ZGl2OjEsZGw6MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSx1bDoxLG9sOjEscDoxLHByZToxLHRhYmxlOjF9LGNsYXNzTmFtZVJlZ2V4OmQ/bmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKShcIitkLmpvaW4oXCJ8XCIpK1wiKSg/XFx4M2QkfFxcXFxzKVwiKTpudWxsfSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHcoYyl7ZnVuY3Rpb24gZihiKXtmb3IodmFyIGU9ZC5zdGFydENvbnRhaW5lcixhPWQuZW5kQ29udGFpbmVyO2UmJiFlLmdldFBhcmVudCgpLmVxdWFscyhiKTspZT1lLmdldFBhcmVudCgpO2Zvcig7YSYmIWEuZ2V0UGFyZW50KCkuZXF1YWxzKGIpOylhPWEuZ2V0UGFyZW50KCk7aWYoIWV8fCFhKXJldHVybiExO2Zvcih2YXIgZz1lLGU9W10saz0hMTshazspZy5lcXVhbHMoYSkmJihrPSEwKSxlLnB1c2goZyksZz1nLmdldE5leHQoKTtpZigxPmUubGVuZ3RoKXJldHVybiExO2c9Yi5nZXRQYXJlbnRzKCEwKTtmb3IoYT0wO2E8Zy5sZW5ndGg7YSsrKWlmKGdbYV0uZ2V0TmFtZSYmcFtnW2FdLmdldE5hbWUoKV0pe2I9Z1thXTticmVha31mb3IodmFyIGc9bC5pc0luZGVudD8xOi0xLGE9ZVswXSxlPWVbZS5sZW5ndGgtMV0saz1DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkoYixxKSxuPWtbZS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpXS5pbmRlbnQsXG5hPWEuZ2V0Q3VzdG9tRGF0YShcImxpc3RhcnJheV9pbmRleFwiKTthPD1lLmdldEN1c3RvbURhdGEoXCJsaXN0YXJyYXlfaW5kZXhcIik7YSsrKWlmKGtbYV0uaW5kZW50Kz1nLDA8Zyl7dmFyIGg9a1thXS5wYXJlbnQ7a1thXS5wYXJlbnQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGguZ2V0TmFtZSgpLGguZ2V0RG9jdW1lbnQoKSl9Zm9yKGE9ZS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpKzE7YTxrLmxlbmd0aCYma1thXS5pbmRlbnQ+bjthKyspa1thXS5pbmRlbnQrPWc7ZT1DS0VESVRPUi5wbHVnaW5zLmxpc3QuYXJyYXlUb0xpc3QoayxxLG51bGwsYy5jb25maWcuZW50ZXJNb2RlLGIuZ2V0RGlyZWN0aW9uKCkpO2lmKCFsLmlzSW5kZW50KXt2YXIgZjtpZigoZj1iLmdldFBhcmVudCgpKSYmZi5pcyhcImxpXCIpKWZvcih2YXIgZz1lLmxpc3ROb2RlLmdldENoaWxkcmVuKCkscj1bXSxtLGE9Zy5jb3VudCgpLTE7MDw9YTthLS0pKG09Zy5nZXRJdGVtKGEpKSYmbS5pcyYmbS5pcyhcImxpXCIpJiZcbnIucHVzaChtKX1lJiZlLmxpc3ROb2RlLnJlcGxhY2UoYik7aWYociYmci5sZW5ndGgpZm9yKGE9MDthPHIubGVuZ3RoO2ErKyl7Zm9yKG09Yj1yW2FdOyhtPW0uZ2V0TmV4dCgpKSYmbS5pcyYmbS5nZXROYW1lKClpbiBwOylDS0VESVRPUi5lbnYubmVlZHNOYnNwRmlsbGVyJiYhYi5nZXRGaXJzdCh4KSYmYi5hcHBlbmQoZC5kb2N1bWVudC5jcmVhdGVUZXh0KFwiwqBcIikpLGIuYXBwZW5kKG0pO2IuaW5zZXJ0QWZ0ZXIoZil9ZSYmYy5maXJlKFwiY29udGVudERvbUludmFsaWRhdGVkXCIpO3JldHVybiEwfWZvcih2YXIgbD10aGlzLHE9dGhpcy5kYXRhYmFzZSxwPXRoaXMuY29udGV4dCxuPWMuZ2V0U2VsZWN0aW9uKCksbj0obiYmbi5nZXRSYW5nZXMoKSkuY3JlYXRlSXRlcmF0b3IoKSxkO2Q9bi5nZXROZXh0UmFuZ2UoKTspe2Zvcih2YXIgYj1kLmdldENvbW1vbkFuY2VzdG9yKCk7YiYmKGIudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwhcFtiLmdldE5hbWUoKV0pOyl7aWYoYy5lZGl0YWJsZSgpLmVxdWFscyhiKSl7Yj1cbiExO2JyZWFrfWI9Yi5nZXRQYXJlbnQoKX1ifHwoYj1kLnN0YXJ0UGF0aCgpLmNvbnRhaW5zKHApKSYmZC5zZXRFbmRBdChiLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2lmKCFiKXt2YXIgaD1kLmdldEVuY2xvc2VkTm9kZSgpO2gmJmgudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZoLmdldE5hbWUoKWluIHAmJihkLnNldFN0YXJ0QXQoaCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksZC5zZXRFbmRBdChoLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGI9aCl9YiYmZC5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuc3RhcnRDb250YWluZXIuZ2V0TmFtZSgpaW4gcCYmKGg9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZCksaC5ldmFsdWF0b3I9dCxkLnN0YXJ0Q29udGFpbmVyPWgubmV4dCgpKTtiJiZkLmVuZENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuZW5kQ29udGFpbmVyLmdldE5hbWUoKWluXG5wJiYoaD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKSxoLmV2YWx1YXRvcj10LGQuZW5kQ29udGFpbmVyPWgucHJldmlvdXMoKSk7aWYoYilyZXR1cm4gZihiKX1yZXR1cm4gMH1mdW5jdGlvbiB0KGMpe3JldHVybiBjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5pcyhcImxpXCIpfWZ1bmN0aW9uIHgoYyl7cmV0dXJuIHkoYykmJnooYyl9dmFyIHk9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCksej1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExLCEwKSx1PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHY9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaW5kZW50bGlzdFwiLHtyZXF1aXJlczpcImluZGVudFwiLGluaXQ6ZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZihjKXtsLnNwZWNpZmljRGVmaW5pdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZXF1aXJlZENvbnRlbnQ9W1widWxcIixcIm9sXCJdO2Mub24oXCJrZXlcIixcbmZ1bmN0aW9uKGYpe2lmKFwid3lzaXd5Z1wiPT1jLm1vZGUmJmYuZGF0YS5rZXlDb2RlPT10aGlzLmluZGVudEtleSl7dmFyIG49dGhpcy5nZXRDb250ZXh0KGMuZWxlbWVudFBhdGgoKSk7IW58fHRoaXMuaXNJbmRlbnQmJkNLRURJVE9SLnBsdWdpbnMuaW5kZW50TGlzdC5maXJzdEl0ZW1JblBhdGgodGhpcy5jb250ZXh0LGMuZWxlbWVudFBhdGgoKSxuKXx8KGMuZXhlY0NvbW1hbmQodGhpcy5yZWxhdGVkR2xvYmFsKSxmLmNhbmNlbCgpKX19LHRoaXMpO3RoaXMuam9ic1t0aGlzLmlzSW5kZW50PzEwOjMwXT17cmVmcmVzaDp0aGlzLmlzSW5kZW50P2Z1bmN0aW9uKGMsZil7dmFyIGQ9dGhpcy5nZXRDb250ZXh0KGYpLGI9Q0tFRElUT1IucGx1Z2lucy5pbmRlbnRMaXN0LmZpcnN0SXRlbUluUGF0aCh0aGlzLmNvbnRleHQsZixkKTtyZXR1cm4gZCYmdGhpcy5pc0luZGVudCYmIWI/djp1fTpmdW5jdGlvbihjLGYpe3JldHVybiF0aGlzLmdldENvbnRleHQoZil8fHRoaXMuaXNJbmRlbnQ/XG51OnZ9LGV4ZWM6Q0tFRElUT1IudG9vbHMuYmluZCh3LHRoaXMpfX12YXIgbD1DS0VESVRPUi5wbHVnaW5zLmluZGVudDtsLnJlZ2lzdGVyQ29tbWFuZHMoYyx7aW5kZW50bGlzdDpuZXcgZihjLFwiaW5kZW50bGlzdFwiLCEwKSxvdXRkZW50bGlzdDpuZXcgZihjLFwib3V0ZGVudGxpc3RcIil9KTtDS0VESVRPUi50b29scy5leHRlbmQoZi5wcm90b3R5cGUsbC5zcGVjaWZpY0RlZmluaXRpb24ucHJvdG90eXBlLHtjb250ZXh0OntvbDoxLHVsOjF9fSl9fSk7Q0tFRElUT1IucGx1Z2lucy5pbmRlbnRMaXN0PXt9O0NLRURJVE9SLnBsdWdpbnMuaW5kZW50TGlzdC5maXJzdEl0ZW1JblBhdGg9ZnVuY3Rpb24oYyxmLGwpe3ZhciBxPWYuY29udGFpbnModCk7bHx8KGw9Zi5jb250YWlucyhjKSk7cmV0dXJuIGwmJnEmJnEuZXF1YWxzKGwuZ2V0Rmlyc3QodCkpfX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzbWlsZXlcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe2EuY29uZmlnLnNtaWxleV9wYXRoPWEuY29uZmlnLnNtaWxleV9wYXRofHx0aGlzLnBhdGgrXCJpbWFnZXMvXCI7YS5hZGRDb21tYW5kKFwic21pbGV5XCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJzbWlsZXlcIix7YWxsb3dlZENvbnRlbnQ6XCJpbWdbYWx0LGhlaWdodCwhc3JjLHRpdGxlLHdpZHRoXVwiLHJlcXVpcmVkQ29udGVudDpcImltZ1wifSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNtaWxleVwiLHtsYWJlbDphLmxhbmcuc21pbGV5LnRvb2xiYXIsY29tbWFuZDpcInNtaWxleVwiLHRvb2xiYXI6XCJpbnNlcnQsNTBcIn0pO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJzbWlsZXlcIix0aGlzLnBhdGgrXCJkaWFsb2dzL3NtaWxleS5qc1wiKX19KTtDS0VESVRPUi5jb25maWcuc21pbGV5X2ltYWdlcz1cInJlZ3VsYXJfc21pbGUucG5nIHNhZF9zbWlsZS5wbmcgd2lua19zbWlsZS5wbmcgdGVldGhfc21pbGUucG5nIGNvbmZ1c2VkX3NtaWxlLnBuZyB0b25ndWVfc21pbGUucG5nIGVtYmFycmFzc2VkX3NtaWxlLnBuZyBvbWdfc21pbGUucG5nIHdoYXRjaHV0YWxraW5nYWJvdXRfc21pbGUucG5nIGFuZ3J5X3NtaWxlLnBuZyBhbmdlbF9zbWlsZS5wbmcgc2hhZGVzX3NtaWxlLnBuZyBkZXZpbF9zbWlsZS5wbmcgY3J5X3NtaWxlLnBuZyBsaWdodGJ1bGIucG5nIHRodW1ic19kb3duLnBuZyB0aHVtYnNfdXAucG5nIGhlYXJ0LnBuZyBicm9rZW5faGVhcnQucG5nIGtpc3MucG5nIGVudmVsb3BlLnBuZ1wiLnNwbGl0KFwiIFwiKTtcbkNLRURJVE9SLmNvbmZpZy5zbWlsZXlfZGVzY3JpcHRpb25zPVwic21pbGV5O3NhZDt3aW5rO2xhdWdoO2Zyb3duO2NoZWVreTtibHVzaDtzdXJwcmlzZTtpbmRlY2lzaW9uO2FuZ3J5O2FuZ2VsO2Nvb2w7ZGV2aWw7Y3J5aW5nO2VubGlnaHRlbmVkO25vO3llcztoZWFydDticm9rZW4gaGVhcnQ7a2lzczttYWlsXCIuc3BsaXQoXCI7XCIpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG4oYSxjKXtjPXZvaWQgMD09PWN8fGM7dmFyIGI7aWYoYyliPWEuZ2V0Q29tcHV0ZWRTdHlsZShcInRleHQtYWxpZ25cIik7ZWxzZXtmb3IoOyFhLmhhc0F0dHJpYnV0ZXx8IWEuaGFzQXR0cmlidXRlKFwiYWxpZ25cIikmJiFhLmdldFN0eWxlKFwidGV4dC1hbGlnblwiKTspe2I9YS5nZXRQYXJlbnQoKTtpZighYilicmVhazthPWJ9Yj1hLmdldFN0eWxlKFwidGV4dC1hbGlnblwiKXx8YS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKXx8XCJcIn1iJiYoYj1iLnJlcGxhY2UoLyg/Oi0oPzptb3p8d2Via2l0KS0pPyg/OnN0YXJ0fGF1dG8pL2ksXCJcIikpOyFiJiZjJiYoYj1cInJ0bFwiPT1hLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIik/XCJyaWdodFwiOlwibGVmdFwiKTtyZXR1cm4gYn1mdW5jdGlvbiBnKGEsYyxiKXt0aGlzLmVkaXRvcj1hO3RoaXMubmFtZT1jO3RoaXMudmFsdWU9Yjt0aGlzLmNvbnRleHQ9XCJwXCI7Yz1hLmNvbmZpZy5qdXN0aWZ5Q2xhc3Nlczt2YXIgaD1hLmNvbmZpZy5lbnRlck1vZGU9PVxuQ0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiO2lmKGMpe3N3aXRjaChiKXtjYXNlIFwibGVmdFwiOnRoaXMuY3NzQ2xhc3NOYW1lPWNbMF07YnJlYWs7Y2FzZSBcImNlbnRlclwiOnRoaXMuY3NzQ2xhc3NOYW1lPWNbMV07YnJlYWs7Y2FzZSBcInJpZ2h0XCI6dGhpcy5jc3NDbGFzc05hbWU9Y1syXTticmVhaztjYXNlIFwianVzdGlmeVwiOnRoaXMuY3NzQ2xhc3NOYW1lPWNbM119dGhpcy5jc3NDbGFzc1JlZ2V4PW5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKykoPzpcIitjLmpvaW4oXCJ8XCIpK1wiKSg/XFx4M2QkfFxcXFxzKVwiKTt0aGlzLnJlcXVpcmVkQ29udGVudD1oK1wiKFwiK3RoaXMuY3NzQ2xhc3NOYW1lK1wiKVwifWVsc2UgdGhpcy5yZXF1aXJlZENvbnRlbnQ9aCtcInt0ZXh0LWFsaWdufVwiO3RoaXMuYWxsb3dlZENvbnRlbnQ9e1wiY2FwdGlvbiBkaXYgaDEgaDIgaDMgaDQgaDUgaDYgcCBwcmUgdGQgdGggbGlcIjp7cHJvcGVydGllc09ubHk6ITAsc3R5bGVzOnRoaXMuY3NzQ2xhc3NOYW1lP251bGw6XCJ0ZXh0LWFsaWduXCIsXG5jbGFzc2VzOnRoaXMuY3NzQ2xhc3NOYW1lfHxudWxsfX07YS5jb25maWcuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUiYmKHRoaXMuYWxsb3dlZENvbnRlbnQuZGl2PSEwKX1mdW5jdGlvbiBsKGEpe3ZhciBjPWEuZWRpdG9yLGI9Yy5jcmVhdGVSYW5nZSgpO2Iuc2V0U3RhcnRCZWZvcmUoYS5kYXRhLm5vZGUpO2Iuc2V0RW5kQWZ0ZXIoYS5kYXRhLm5vZGUpO2Zvcih2YXIgaD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihiKSxkO2Q9aC5uZXh0KCk7KWlmKGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKWlmKCFkLmVxdWFscyhhLmRhdGEubm9kZSkmJmQuZ2V0RGlyZWN0aW9uKCkpYi5zZXRTdGFydEFmdGVyKGQpLGg9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYik7ZWxzZXt2YXIgZT1jLmNvbmZpZy5qdXN0aWZ5Q2xhc3NlcztlJiYoZC5oYXNDbGFzcyhlWzBdKT8oZC5yZW1vdmVDbGFzcyhlWzBdKSxkLmFkZENsYXNzKGVbMl0pKTpkLmhhc0NsYXNzKGVbMl0pJiYoZC5yZW1vdmVDbGFzcyhlWzJdKSxcbmQuYWRkQ2xhc3MoZVswXSkpKTtlPWQuZ2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIpO1wibGVmdFwiPT1lP2Quc2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIsXCJyaWdodFwiKTpcInJpZ2h0XCI9PWUmJmQuc2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIsXCJsZWZ0XCIpfX1nLnByb3RvdHlwZT17ZXhlYzpmdW5jdGlvbihhKXt2YXIgYz1hLmdldFNlbGVjdGlvbigpLGI9YS5jb25maWcuZW50ZXJNb2RlO2lmKGMpe2Zvcih2YXIgaD1jLmNyZWF0ZUJvb2ttYXJrcygpLGQ9Yy5nZXRSYW5nZXMoKSxlPXRoaXMuY3NzQ2xhc3NOYW1lLGcsZixrPWEuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGUsaz12b2lkIDA9PT1rfHxrLG09ZC5sZW5ndGgtMTswPD1tO20tLSlmb3IoZz1kW21dLmNyZWF0ZUl0ZXJhdG9yKCksZy5lbmxhcmdlQnI9YiE9Q0tFRElUT1IuRU5URVJfQlI7Zj1nLmdldE5leHRQYXJhZ3JhcGgoYj09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKTspaWYoIWYuaXNSZWFkT25seSgpKXtmLnJlbW92ZUF0dHJpYnV0ZShcImFsaWduXCIpO1xuZi5yZW1vdmVTdHlsZShcInRleHQtYWxpZ25cIik7dmFyIGw9ZSYmKGYuJC5jbGFzc05hbWU9Q0tFRElUT1IudG9vbHMubHRyaW0oZi4kLmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY3NzQ2xhc3NSZWdleCxcIlwiKSkpLHA9dGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT0ZGJiYoIWt8fG4oZiwhMCkhPXRoaXMudmFsdWUpO2U/cD9mLmFkZENsYXNzKGUpOmx8fGYucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik6cCYmZi5zZXRTdHlsZShcInRleHQtYWxpZ25cIix0aGlzLnZhbHVlKX1hLmZvY3VzKCk7YS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2Muc2VsZWN0Qm9va21hcmtzKGgpfX0scmVmcmVzaDpmdW5jdGlvbihhLGMpe3ZhciBiPWMuYmxvY2t8fGMuYmxvY2tMaW1pdDt0aGlzLnNldFN0YXRlKFwiYm9keVwiIT1iLmdldE5hbWUoKSYmbihiLHRoaXMuZWRpdG9yLmNvbmZpZy51c2VDb21wdXRlZFN0YXRlKT09dGhpcy52YWx1ZT9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpfX07XG5DS0VESVRPUi5wbHVnaW5zLmFkZChcImp1c3RpZnlcIix7aW5pdDpmdW5jdGlvbihhKXtpZighYS5ibG9ja2xlc3Mpe3ZhciBjPW5ldyBnKGEsXCJqdXN0aWZ5bGVmdFwiLFwibGVmdFwiKSxiPW5ldyBnKGEsXCJqdXN0aWZ5Y2VudGVyXCIsXCJjZW50ZXJcIiksaD1uZXcgZyhhLFwianVzdGlmeXJpZ2h0XCIsXCJyaWdodFwiKSxkPW5ldyBnKGEsXCJqdXN0aWZ5YmxvY2tcIixcImp1c3RpZnlcIik7YS5hZGRDb21tYW5kKFwianVzdGlmeWxlZnRcIixjKTthLmFkZENvbW1hbmQoXCJqdXN0aWZ5Y2VudGVyXCIsYik7YS5hZGRDb21tYW5kKFwianVzdGlmeXJpZ2h0XCIsaCk7YS5hZGRDb21tYW5kKFwianVzdGlmeWJsb2NrXCIsZCk7YS51aS5hZGRCdXR0b24mJihhLnVpLmFkZEJ1dHRvbihcIkp1c3RpZnlMZWZ0XCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LmxlZnQsY29tbWFuZDpcImp1c3RpZnlsZWZ0XCIsdG9vbGJhcjpcImFsaWduLDEwXCJ9KSxhLnVpLmFkZEJ1dHRvbihcIkp1c3RpZnlDZW50ZXJcIix7bGFiZWw6YS5sYW5nLmp1c3RpZnkuY2VudGVyLFxuY29tbWFuZDpcImp1c3RpZnljZW50ZXJcIix0b29sYmFyOlwiYWxpZ24sMjBcIn0pLGEudWkuYWRkQnV0dG9uKFwiSnVzdGlmeVJpZ2h0XCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LnJpZ2h0LGNvbW1hbmQ6XCJqdXN0aWZ5cmlnaHRcIix0b29sYmFyOlwiYWxpZ24sMzBcIn0pLGEudWkuYWRkQnV0dG9uKFwiSnVzdGlmeUJsb2NrXCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LmJsb2NrLGNvbW1hbmQ6XCJqdXN0aWZ5YmxvY2tcIix0b29sYmFyOlwiYWxpZ24sNDBcIn0pKTthLm9uKFwiZGlyQ2hhbmdlZFwiLGwpfX19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJtZW51YnV0dG9uXCIse3JlcXVpcmVzOlwiYnV0dG9uLG1lbnVcIixvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbihjKXt2YXIgYT10aGlzLl8sYj1hLm1lbnU7YS5zdGF0ZSE9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiYoYS5vbiYmYj9iLmhpZGUoKTooYS5wcmV2aW91c1N0YXRlPWEuc3RhdGUsYnx8KGI9YS5tZW51PW5ldyBDS0VESVRPUi5tZW51KGMse3BhbmVsOntjbGFzc05hbWU6XCJja2VfbWVudV9wYW5lbFwiLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmMubGFuZy5jb21tb24ub3B0aW9uc319fSksYi5vbkhpZGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29tbWFuZD9jLmdldENvbW1hbmQodGhpcy5jb21tYW5kKS5tb2Rlczp0aGlzLm1vZGVzO3RoaXMuc2V0U3RhdGUoIWJ8fGJbYy5tb2RlXT9hLnByZXZpb3VzU3RhdGU6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2Eub249MH0sdGhpcyksXG50aGlzLm9uTWVudSYmYi5hZGRMaXN0ZW5lcih0aGlzLm9uTWVudSkpLHRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pLGEub249MSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5zaG93KENLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoYS5pZCksNCl9LDApKSl9O0NLRURJVE9SLnVpLm1lbnVCdXR0b249Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IudWkuYnV0dG9uLCQ6ZnVuY3Rpb24oYyl7ZGVsZXRlIGMucGFuZWw7dGhpcy5iYXNlKGMpO3RoaXMuaGFzQXJyb3c9ITA7dGhpcy5jbGljaz1kfSxzdGF0aWNzOntoYW5kbGVyOntjcmVhdGU6ZnVuY3Rpb24oYyl7cmV0dXJuIG5ldyBDS0VESVRPUi51aS5tZW51QnV0dG9uKGMpfX19fSl9LGJlZm9yZUluaXQ6ZnVuY3Rpb24oZCl7ZC51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX01FTlVCVVRUT04sQ0tFRElUT1IudWkubWVudUJ1dHRvbi5oYW5kbGVyKX19KTtcbkNLRURJVE9SLlVJX01FTlVCVVRUT049XCJtZW51YnV0dG9uXCI7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJsYW5ndWFnZVwiLHtyZXF1aXJlczpcIm1lbnVidXR0b25cIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY29uZmlnLmxhbmd1YWdlX2xpc3R8fFtcImFyOkFyYWJpYzpydGxcIixcImZyOkZyZW5jaFwiLFwiZXM6U3BhbmlzaFwiXSxjPXRoaXMsZD1hLmxhbmcubGFuZ3VhZ2UsZT17fSxnLGgsayxmO2EuYWRkQ29tbWFuZChcImxhbmd1YWdlXCIse2FsbG93ZWRDb250ZW50Olwic3BhblshbGFuZywhZGlyXVwiLHJlcXVpcmVkQ29udGVudDpcInNwYW5bbGFuZyxkaXJdXCIsY29udGV4dFNlbnNpdGl2ZTohMCxleGVjOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZVtcImxhbmd1YWdlX1wiK2JdO2lmKGMpYVtjLnN0eWxlLmNoZWNrQWN0aXZlKGEuZWxlbWVudFBhdGgoKSxhKT9cInJlbW92ZVN0eWxlXCI6XCJhcHBseVN0eWxlXCJdKGMuc3R5bGUpfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhdGUoYy5nZXRDdXJyZW50TGFuZ0VsZW1lbnQoYSk/Q0tFRElUT1IuVFJJU1RBVEVfT046XG5DS0VESVRPUi5UUklTVEFURV9PRkYpfX0pO2ZvcihmPTA7ZjxiLmxlbmd0aDtmKyspZz1iW2ZdLnNwbGl0KFwiOlwiKSxoPWdbMF0saz1cImxhbmd1YWdlX1wiK2gsZVtrXT17bGFiZWw6Z1sxXSxsYW5nSWQ6aCxncm91cDpcImxhbmd1YWdlXCIsb3JkZXI6ZixsdHI6XCJydGxcIiE9KFwiXCIrZ1syXSkudG9Mb3dlckNhc2UoKSxvbkNsaWNrOmZ1bmN0aW9uKCl7YS5leGVjQ29tbWFuZChcImxhbmd1YWdlXCIsdGhpcy5sYW5nSWQpfSxyb2xlOlwibWVudWl0ZW1jaGVja2JveFwifSxlW2tdLnN0eWxlPW5ldyBDS0VESVRPUi5zdHlsZSh7ZWxlbWVudDpcInNwYW5cIixhdHRyaWJ1dGVzOntsYW5nOmgsZGlyOmVba10ubHRyP1wibHRyXCI6XCJydGxcIn19KTtlLmxhbmd1YWdlX3JlbW92ZT17bGFiZWw6ZC5yZW1vdmUsZ3JvdXA6XCJsYW5ndWFnZV9yZW1vdmVcIixzdGF0ZTpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxvcmRlcjplLmxlbmd0aCxvbkNsaWNrOmZ1bmN0aW9uKCl7dmFyIGI9Yy5nZXRDdXJyZW50TGFuZ0VsZW1lbnQoYSk7XG5iJiZhLmV4ZWNDb21tYW5kKFwibGFuZ3VhZ2VcIixiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpfX07YS5hZGRNZW51R3JvdXAoXCJsYW5ndWFnZVwiLDEpO2EuYWRkTWVudUdyb3VwKFwibGFuZ3VhZ2VfcmVtb3ZlXCIpO2EuYWRkTWVudUl0ZW1zKGUpO2EudWkuYWRkKFwiTGFuZ3VhZ2VcIixDS0VESVRPUi5VSV9NRU5VQlVUVE9OLHtsYWJlbDpkLmJ1dHRvbixhbGxvd2VkQ29udGVudDpcInNwYW5bIWxhbmcsIWRpcl1cIixyZXF1aXJlZENvbnRlbnQ6XCJzcGFuW2xhbmcsZGlyXVwiLHRvb2xiYXI6XCJiaWRpLDMwXCIsY29tbWFuZDpcImxhbmd1YWdlXCIsb25NZW51OmZ1bmN0aW9uKCl7dmFyIGI9e30sZD1jLmdldEN1cnJlbnRMYW5nRWxlbWVudChhKSxmO2ZvcihmIGluIGUpYltmXT1DS0VESVRPUi5UUklTVEFURV9PRkY7Yi5sYW5ndWFnZV9yZW1vdmU9ZD9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ7ZCYmKGJbXCJsYW5ndWFnZV9cIitkLmdldEF0dHJpYnV0ZShcImxhbmdcIildPVxuQ0tFRElUT1IuVFJJU1RBVEVfT04pO3JldHVybiBifX0pfSxnZXRDdXJyZW50TGFuZ0VsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50UGF0aCgpO2E9YiYmYi5lbGVtZW50czt2YXIgYztpZihiKWZvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKWI9YVtkXSwhYyYmXCJzcGFuXCI9PWIuZ2V0TmFtZSgpJiZiLmhhc0F0dHJpYnV0ZShcImRpclwiKSYmYi5oYXNBdHRyaWJ1dGUoXCJsYW5nXCIpJiYoYz1iKTtyZXR1cm4gY319KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcChjKXtyZXR1cm4gYy5yZXBsYWNlKC8nL2csXCJcXFxcJFxceDI2XCIpfWZ1bmN0aW9uIHEoYyl7Zm9yKHZhciBiLGE9Yy5sZW5ndGgsZj1bXSxlPTA7ZTxhO2UrKyliPWMuY2hhckNvZGVBdChlKSxmLnB1c2goYik7cmV0dXJuXCJTdHJpbmcuZnJvbUNoYXJDb2RlKFwiK2Yuam9pbihcIixcIikrXCIpXCJ9ZnVuY3Rpb24gcihjLGIpe3ZhciBhPWMucGx1Z2lucy5saW5rLGY9YS5jb21waWxlZFByb3RlY3Rpb25GdW5jdGlvbi5wYXJhbXMsZSxkO2Q9W2EuY29tcGlsZWRQcm90ZWN0aW9uRnVuY3Rpb24ubmFtZSxcIihcIl07Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspYT1mW2ddLnRvTG93ZXJDYXNlKCksZT1iW2FdLDA8ZyYmZC5wdXNoKFwiLFwiKSxkLnB1c2goXCInXCIsZT9wKGVuY29kZVVSSUNvbXBvbmVudChiW2FdKSk6XCJcIixcIidcIik7ZC5wdXNoKFwiKVwiKTtyZXR1cm4gZC5qb2luKFwiXCIpfWZ1bmN0aW9uIG4oYyl7Yz1jLmNvbmZpZy5lbWFpbFByb3RlY3Rpb258fFwiXCI7XG52YXIgYjtjJiZcImVuY29kZVwiIT1jJiYoYj17fSxjLnJlcGxhY2UoL14oW14oXSspXFwoKFteKV0rKVxcKSQvLGZ1bmN0aW9uKGEsYyxlKXtiLm5hbWU9YztiLnBhcmFtcz1bXTtlLnJlcGxhY2UoL1teLFxcc10rL2csZnVuY3Rpb24oYSl7Yi5wYXJhbXMucHVzaChhKX0pfSkpO3JldHVybiBifUNLRURJVE9SLnBsdWdpbnMuYWRkKFwibGlua1wiLHtyZXF1aXJlczpcImRpYWxvZyxmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYil7cmV0dXJuIGEucmVwbGFjZSgvJTEvZyxcInJ0bFwiPT1iP1wicmlnaHRcIjpcImxlZnRcIikucmVwbGFjZSgvJTIvZyxcImNrZV9jb250ZW50c19cIitiKX12YXIgYj1cImJhY2tncm91bmQ6dXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXNcIisoQ0tFRElUT1IuZW52LmhpZHBpP1wiL2hpZHBpXCI6XCJcIikrXCIvYW5jaG9yLnBuZ1wiKStcIikgbm8tcmVwZWF0ICUxIGNlbnRlcjtib3JkZXI6MXB4IGRvdHRlZCAjMDBmO2JhY2tncm91bmQtc2l6ZToxNnB4O1wiLFxuYT1cIi4lMiBhLmNrZV9hbmNob3IsLiUyIGEuY2tlX2FuY2hvcl9lbXB0eSwuY2tlX2VkaXRhYmxlLiUyIGFbbmFtZV0sLmNrZV9lZGl0YWJsZS4lMiBhW2RhdGEtY2tlLXNhdmVkLW5hbWVde1wiK2IrXCJwYWRkaW5nLSUxOjE4cHg7Y3Vyc29yOmF1dG87fS4lMiBpbWcuY2tlX2FuY2hvcntcIitiK1wid2lkdGg6MTZweDttaW4taGVpZ2h0OjE1cHg7aGVpZ2h0OjEuMTVlbTt2ZXJ0aWNhbC1hbGlnbjp0ZXh0LWJvdHRvbTt9XCI7Q0tFRElUT1IuYWRkQ3NzKGMoXCJsdHJcIikrYyhcInJ0bFwiKSl9LGluaXQ6ZnVuY3Rpb24oYyl7dmFyIGI9XCJhWyFocmVmXVwiO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYyxcImxpbmtcIixcImFkdmFuY2VkXCIpJiYoYj1iLnJlcGxhY2UoXCJdXCIsXCIsYWNjZXNza2V5LGNoYXJzZXQsZGlyLGlkLGxhbmcsbmFtZSxyZWwsdGFiaW5kZXgsdGl0bGUsdHlwZV17Kn0oKilcIikpO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYyxcImxpbmtcIixcInRhcmdldFwiKSYmKGI9Yi5yZXBsYWNlKFwiXVwiLFxuXCIsdGFyZ2V0LG9uY2xpY2tdXCIpKTtjLmFkZENvbW1hbmQoXCJsaW5rXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJsaW5rXCIse2FsbG93ZWRDb250ZW50OmIscmVxdWlyZWRDb250ZW50OlwiYVtocmVmXVwifSkpO2MuYWRkQ29tbWFuZChcImFuY2hvclwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiYW5jaG9yXCIse2FsbG93ZWRDb250ZW50OlwiYVshbmFtZSxpZF1cIixyZXF1aXJlZENvbnRlbnQ6XCJhW25hbWVdXCJ9KSk7Yy5hZGRDb21tYW5kKFwidW5saW5rXCIsbmV3IENLRURJVE9SLnVubGlua0NvbW1hbmQpO2MuYWRkQ29tbWFuZChcInJlbW92ZUFuY2hvclwiLG5ldyBDS0VESVRPUi5yZW1vdmVBbmNob3JDb21tYW5kKTtjLnNldEtleXN0cm9rZShDS0VESVRPUi5DVFJMKzc2LFwibGlua1wiKTtjLnVpLmFkZEJ1dHRvbiYmKGMudWkuYWRkQnV0dG9uKFwiTGlua1wiLHtsYWJlbDpjLmxhbmcubGluay50b29sYmFyLGNvbW1hbmQ6XCJsaW5rXCIsdG9vbGJhcjpcImxpbmtzLDEwXCJ9KSxjLnVpLmFkZEJ1dHRvbihcIlVubGlua1wiLFxue2xhYmVsOmMubGFuZy5saW5rLnVubGluayxjb21tYW5kOlwidW5saW5rXCIsdG9vbGJhcjpcImxpbmtzLDIwXCJ9KSxjLnVpLmFkZEJ1dHRvbihcIkFuY2hvclwiLHtsYWJlbDpjLmxhbmcubGluay5hbmNob3IudG9vbGJhcixjb21tYW5kOlwiYW5jaG9yXCIsdG9vbGJhcjpcImxpbmtzLDMwXCJ9KSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImxpbmtcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2xpbmsuanNcIik7Q0tFRElUT1IuZGlhbG9nLmFkZChcImFuY2hvclwiLHRoaXMucGF0aCtcImRpYWxvZ3MvYW5jaG9yLmpzXCIpO2Mub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLnBsdWdpbnMubGluay5nZXRTZWxlY3RlZExpbmsoYyl8fGEuZGF0YS5lbGVtZW50O2IuaXNSZWFkT25seSgpfHwoYi5pcyhcImFcIik/KGEuZGF0YS5kaWFsb2c9IWIuZ2V0QXR0cmlidXRlKFwibmFtZVwiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpJiZiLmdldENoaWxkQ291bnQoKT9cImxpbmtcIjpcImFuY2hvclwiLGEuZGF0YS5saW5rPVxuYik6Q0tFRElUT1IucGx1Z2lucy5saW5rLnRyeVJlc3RvcmVGYWtlQW5jaG9yKGMsYikmJihhLmRhdGEuZGlhbG9nPVwiYW5jaG9yXCIpKX0sbnVsbCxudWxsLDApO2Mub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe2EuZGF0YS5kaWFsb2cgaW57bGluazoxLGFuY2hvcjoxfSYmYS5kYXRhLmxpbmsmJmMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudChhLmRhdGEubGluayl9LG51bGwsbnVsbCwyMCk7Yy5hZGRNZW51SXRlbXMmJmMuYWRkTWVudUl0ZW1zKHthbmNob3I6e2xhYmVsOmMubGFuZy5saW5rLmFuY2hvci5tZW51LGNvbW1hbmQ6XCJhbmNob3JcIixncm91cDpcImFuY2hvclwiLG9yZGVyOjF9LHJlbW92ZUFuY2hvcjp7bGFiZWw6Yy5sYW5nLmxpbmsuYW5jaG9yLnJlbW92ZSxjb21tYW5kOlwicmVtb3ZlQW5jaG9yXCIsZ3JvdXA6XCJhbmNob3JcIixvcmRlcjo1fSxsaW5rOntsYWJlbDpjLmxhbmcubGluay5tZW51LGNvbW1hbmQ6XCJsaW5rXCIsZ3JvdXA6XCJsaW5rXCIsb3JkZXI6MX0sdW5saW5rOntsYWJlbDpjLmxhbmcubGluay51bmxpbmssXG5jb21tYW5kOlwidW5saW5rXCIsZ3JvdXA6XCJsaW5rXCIsb3JkZXI6NX19KTtjLmNvbnRleHRNZW51JiZjLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGEpe2lmKCFhfHxhLmlzUmVhZE9ubHkoKSlyZXR1cm4gbnVsbDthPUNLRURJVE9SLnBsdWdpbnMubGluay50cnlSZXN0b3JlRmFrZUFuY2hvcihjLGEpO2lmKCFhJiYhKGE9Q0tFRElUT1IucGx1Z2lucy5saW5rLmdldFNlbGVjdGVkTGluayhjKSkpcmV0dXJuIG51bGw7dmFyIGI9e307YS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpJiZhLmdldENoaWxkQ291bnQoKSYmKGI9e2xpbms6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHVubGluazpDS0VESVRPUi5UUklTVEFURV9PRkZ9KTthJiZhLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikmJihiLmFuY2hvcj1iLnJlbW92ZUFuY2hvcj1DS0VESVRPUi5UUklTVEFURV9PRkYpO3JldHVybiBifSk7dGhpcy5jb21waWxlZFByb3RlY3Rpb25GdW5jdGlvbj1uKGMpfSxhZnRlckluaXQ6ZnVuY3Rpb24oYyl7Yy5kYXRhUHJvY2Vzc29yLmRhdGFGaWx0ZXIuYWRkUnVsZXMoe2VsZW1lbnRzOnthOmZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHJpYnV0ZXMubmFtZT9cbmEuY2hpbGRyZW4ubGVuZ3RoP251bGw6Yy5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChhLFwiY2tlX2FuY2hvclwiLFwiYW5jaG9yXCIpOm51bGx9fX0pO3ZhciBiPWMuXy5lbGVtZW50c1BhdGgmJmMuXy5lbGVtZW50c1BhdGguZmlsdGVycztiJiZiLnB1c2goZnVuY3Rpb24oYSxiKXtpZihcImFcIj09YiYmKENLRURJVE9SLnBsdWdpbnMubGluay50cnlSZXN0b3JlRmFrZUFuY2hvcihjLGEpfHxhLmdldEF0dHJpYnV0ZShcIm5hbWVcIikmJighYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfHwhYS5nZXRDaGlsZENvdW50KCkpKSlyZXR1cm5cImFuY2hvclwifSl9fSk7dmFyIHQ9L15qYXZhc2NyaXB0Oi8sdT0vXm1haWx0bzooW14/XSspKD86XFw/KC4rKSk/JC8sdj0vc3ViamVjdD0oW147PzpAJj0kLFxcL10qKS9pLHc9L2JvZHk9KFteOz86QCY9JCxcXC9dKikvaSx4PS9eIyguKikkLyx5PS9eKCg/Omh0dHB8aHR0cHN8ZnRwfG5ld3MpOlxcL1xcLyk/KC4qKSQvLHo9L14oXyg/OnNlbGZ8dG9wfHBhcmVudHxibGFuaykpJC8sXG5BPS9eamF2YXNjcmlwdDp2b2lkXFwobG9jYXRpb25cXC5ocmVmPSdtYWlsdG86J1xcK1N0cmluZ1xcLmZyb21DaGFyQ29kZVxcKChbXildKylcXCkoPzpcXCsnKC4qKScpP1xcKSQvLEI9L15qYXZhc2NyaXB0OihbXihdKylcXCgoW14pXSspXFwpJC8sQz0vXFxzKndpbmRvdy5vcGVuXFwoXFxzKnRoaXNcXC5ocmVmXFxzKixcXHMqKD86JyhbXiddKiknfG51bGwpXFxzKixcXHMqJyhbXiddKiknXFxzKlxcKVxccyo7XFxzKnJldHVyblxccypmYWxzZTsqXFxzKi8sRD0vKD86XnwsKShbXj1dKyk9KFxcZCt8eWVzfG5vKS9naSxtPXtpZDpcImFkdklkXCIsZGlyOlwiYWR2TGFuZ0RpclwiLGFjY2Vzc0tleTpcImFkdkFjY2Vzc0tleVwiLG5hbWU6XCJhZHZOYW1lXCIsbGFuZzpcImFkdkxhbmdDb2RlXCIsdGFiaW5kZXg6XCJhZHZUYWJJbmRleFwiLHRpdGxlOlwiYWR2VGl0bGVcIix0eXBlOlwiYWR2Q29udGVudFR5cGVcIixcImNsYXNzXCI6XCJhZHZDU1NDbGFzc2VzXCIsY2hhcnNldDpcImFkdkNoYXJzZXRcIixzdHlsZTpcImFkdlN0eWxlc1wiLHJlbDpcImFkdlJlbFwifTtcbkNLRURJVE9SLnBsdWdpbnMubGluaz17Z2V0U2VsZWN0ZWRMaW5rOmZ1bmN0aW9uKGMpe3ZhciBiPWMuZ2V0U2VsZWN0aW9uKCksYT1iLmdldFNlbGVjdGVkRWxlbWVudCgpO3JldHVybiBhJiZhLmlzKFwiYVwiKT9hOihiPWIuZ2V0UmFuZ2VzKClbMF0pPyhiLnNocmluayhDS0VESVRPUi5TSFJJTktfVEVYVCksYy5lbGVtZW50UGF0aChiLmdldENvbW1vbkFuY2VzdG9yKCkpLmNvbnRhaW5zKFwiYVwiLDEpKTpudWxsfSxnZXRFZGl0b3JBbmNob3JzOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj1jLmVkaXRhYmxlKCksYT1iLmlzSW5saW5lKCkmJiFjLnBsdWdpbnMuZGl2YXJlYT9jLmRvY3VtZW50OmIsYj1hLmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGE9YS5nZXRFbGVtZW50c0J5VGFnKFwiaW1nXCIpLGY9W10sZT0wLGQ7ZD1iLmdldEl0ZW0oZSsrKTspKGQuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHxkLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikpJiZmLnB1c2goe25hbWU6ZC5kYXRhKFwiY2tlLXNhdmVkLW5hbWVcIil8fFxuZC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGlkOmQuZ2V0QXR0cmlidXRlKFwiaWRcIil9KTtmb3IoZT0wO2Q9YS5nZXRJdGVtKGUrKyk7KShkPXRoaXMudHJ5UmVzdG9yZUZha2VBbmNob3IoYyxkKSkmJmYucHVzaCh7bmFtZTpkLmdldEF0dHJpYnV0ZShcIm5hbWVcIiksaWQ6ZC5nZXRBdHRyaWJ1dGUoXCJpZFwiKX0pO3JldHVybiBmfSxmYWtlQW5jaG9yOiEwLHRyeVJlc3RvcmVGYWtlQW5jaG9yOmZ1bmN0aW9uKGMsYil7aWYoYiYmYi5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpJiZcImFuY2hvclwiPT1iLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpe3ZhciBhPWMucmVzdG9yZVJlYWxFbGVtZW50KGIpO2lmKGEuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpKXJldHVybiBhfX0scGFyc2VMaW5rQXR0cmlidXRlczpmdW5jdGlvbihjLGIpe3ZhciBhPWImJihiLmRhdGEoXCJja2Utc2F2ZWQtaHJlZlwiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKXx8XCJcIixmPWMucGx1Z2lucy5saW5rLmNvbXBpbGVkUHJvdGVjdGlvbkZ1bmN0aW9uLFxuZT1jLmNvbmZpZy5lbWFpbFByb3RlY3Rpb24sZCxnPXt9O2EubWF0Y2godCkmJihcImVuY29kZVwiPT1lP2E9YS5yZXBsYWNlKEEsZnVuY3Rpb24oYSxiLGMpe2M9Y3x8XCJcIjtyZXR1cm5cIm1haWx0bzpcIitTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxiLnNwbGl0KFwiLFwiKSkrYy5yZXBsYWNlKC9cXFxcJy9nLFwiJ1wiKX0pOmUmJmEucmVwbGFjZShCLGZ1bmN0aW9uKGEsYixjKXtpZihiPT1mLm5hbWUpe2cudHlwZT1cImVtYWlsXCI7YT1nLmVtYWlsPXt9O2I9LyheJyl8KCckKS9nO2M9Yy5tYXRjaCgvW14sXFxzXSsvZyk7Zm9yKHZhciBkPWMubGVuZ3RoLGUsaCxrPTA7azxkO2srKyllPWRlY29kZVVSSUNvbXBvbmVudCxoPWNba10ucmVwbGFjZShiLFwiXCIpLnJlcGxhY2UoL1xcXFwnL2csXCInXCIpLGg9ZShoKSxlPWYucGFyYW1zW2tdLnRvTG93ZXJDYXNlKCksYVtlXT1oO2EuYWRkcmVzcz1bYS5uYW1lLGEuZG9tYWluXS5qb2luKFwiQFwiKX19KSk7aWYoIWcudHlwZSlpZihlPWEubWF0Y2goeCkpZy50eXBlPVxuXCJhbmNob3JcIixnLmFuY2hvcj17fSxnLmFuY2hvci5uYW1lPWcuYW5jaG9yLmlkPWVbMV07ZWxzZSBpZihlPWEubWF0Y2godSkpe2Q9YS5tYXRjaCh2KTthPWEubWF0Y2godyk7Zy50eXBlPVwiZW1haWxcIjt2YXIgaz1nLmVtYWlsPXt9O2suYWRkcmVzcz1lWzFdO2QmJihrLnN1YmplY3Q9ZGVjb2RlVVJJQ29tcG9uZW50KGRbMV0pKTthJiYoay5ib2R5PWRlY29kZVVSSUNvbXBvbmVudChhWzFdKSl9ZWxzZSBhJiYoZD1hLm1hdGNoKHkpKSYmKGcudHlwZT1cInVybFwiLGcudXJsPXt9LGcudXJsLnByb3RvY29sPWRbMV0sZy51cmwudXJsPWRbMl0pO2lmKGIpe2lmKGE9Yi5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIikpZy50YXJnZXQ9e3R5cGU6YS5tYXRjaCh6KT9hOlwiZnJhbWVcIixuYW1lOmF9O2Vsc2UgaWYoYT0oYT1iLmRhdGEoXCJja2UtcGEtb25jbGlja1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJvbmNsaWNrXCIpKSYmYS5tYXRjaChDKSlmb3IoZy50YXJnZXQ9e3R5cGU6XCJwb3B1cFwiLG5hbWU6YVsxXX07ZT1cbkQuZXhlYyhhWzJdKTspXCJ5ZXNcIiE9ZVsyXSYmXCIxXCIhPWVbMl18fGVbMV1pbntoZWlnaHQ6MSx3aWR0aDoxLHRvcDoxLGxlZnQ6MX0/aXNGaW5pdGUoZVsyXSkmJihnLnRhcmdldFtlWzFdXT1lWzJdKTpnLnRhcmdldFtlWzFdXT0hMDt2YXIgYT17fSxoO2ZvcihoIGluIG0pKGU9Yi5nZXRBdHRyaWJ1dGUoaCkpJiYoYVttW2hdXT1lKTtpZihoPWIuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHxhLmFkdk5hbWUpYS5hZHZOYW1lPWg7Q0tFRElUT1IudG9vbHMuaXNFbXB0eShhKXx8KGcuYWR2YW5jZWQ9YSl9cmV0dXJuIGd9LGdldExpbmtBdHRyaWJ1dGVzOmZ1bmN0aW9uKGMsYil7dmFyIGE9Yy5jb25maWcuZW1haWxQcm90ZWN0aW9ufHxcIlwiLGY9e307c3dpdGNoKGIudHlwZSl7Y2FzZSBcInVybFwiOnZhciBhPWIudXJsJiZ2b2lkIDAhPT1iLnVybC5wcm90b2NvbD9iLnVybC5wcm90b2NvbDpcImh0dHA6Ly9cIixlPWIudXJsJiZDS0VESVRPUi50b29scy50cmltKGIudXJsLnVybCl8fFwiXCI7ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09XG4wPT09ZS5pbmRleE9mKFwiL1wiKT9lOmErZTticmVhaztjYXNlIFwiYW5jaG9yXCI6YT1iLmFuY2hvciYmYi5hbmNob3IuaWQ7ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09XCIjXCIrKGIuYW5jaG9yJiZiLmFuY2hvci5uYW1lfHxhfHxcIlwiKTticmVhaztjYXNlIFwiZW1haWxcIjp2YXIgZD1iLmVtYWlsLGU9ZC5hZGRyZXNzO3N3aXRjaChhKXtjYXNlIFwiXCI6Y2FzZSBcImVuY29kZVwiOnZhciBnPWVuY29kZVVSSUNvbXBvbmVudChkLnN1YmplY3R8fFwiXCIpLGs9ZW5jb2RlVVJJQ29tcG9uZW50KGQuYm9keXx8XCJcIiksZD1bXTtnJiZkLnB1c2goXCJzdWJqZWN0XFx4M2RcIitnKTtrJiZkLnB1c2goXCJib2R5XFx4M2RcIitrKTtkPWQubGVuZ3RoP1wiP1wiK2Quam9pbihcIlxceDI2XCIpOlwiXCI7XCJlbmNvZGVcIj09YT8oYT1bXCJqYXZhc2NyaXB0OnZvaWQobG9jYXRpb24uaHJlZlxceDNkJ21haWx0bzonK1wiLHEoZSldLGQmJmEucHVzaChcIisnXCIscChkKSxcIidcIiksYS5wdXNoKFwiKVwiKSk6YT1bXCJtYWlsdG86XCIsZSxkXTticmVhaztkZWZhdWx0OmE9XG5lLnNwbGl0KFwiQFwiLDIpLGQubmFtZT1hWzBdLGQuZG9tYWluPWFbMV0sYT1bXCJqYXZhc2NyaXB0OlwiLHIoYyxkKV19ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09YS5qb2luKFwiXCIpfWlmKGIudGFyZ2V0KWlmKFwicG9wdXBcIj09Yi50YXJnZXQudHlwZSl7Zm9yKHZhciBhPVtcIndpbmRvdy5vcGVuKHRoaXMuaHJlZiwgJ1wiLGIudGFyZ2V0Lm5hbWV8fFwiXCIsXCInLCAnXCJdLGg9XCJyZXNpemFibGUgc3RhdHVzIGxvY2F0aW9uIHRvb2xiYXIgbWVudWJhciBmdWxsc2NyZWVuIHNjcm9sbGJhcnMgZGVwZW5kZW50XCIuc3BsaXQoXCIgXCIpLGU9aC5sZW5ndGgsZz1mdW5jdGlvbihhKXtiLnRhcmdldFthXSYmaC5wdXNoKGErXCJcXHgzZFwiK2IudGFyZ2V0W2FdKX0sZD0wO2Q8ZTtkKyspaFtkXSs9Yi50YXJnZXRbaFtkXV0/XCJcXHgzZHllc1wiOlwiXFx4M2Rub1wiO2coXCJ3aWR0aFwiKTtnKFwibGVmdFwiKTtnKFwiaGVpZ2h0XCIpO2coXCJ0b3BcIik7YS5wdXNoKGguam9pbihcIixcIiksXCInKTsgcmV0dXJuIGZhbHNlO1wiKTtmW1wiZGF0YS1ja2UtcGEtb25jbGlja1wiXT1cbmEuam9pbihcIlwiKX1lbHNlXCJub3RTZXRcIiE9Yi50YXJnZXQudHlwZSYmYi50YXJnZXQubmFtZSYmKGYudGFyZ2V0PWIudGFyZ2V0Lm5hbWUpO2lmKGIuYWR2YW5jZWQpe2Zvcih2YXIgbCBpbiBtKShhPWIuYWR2YW5jZWRbbVtsXV0pJiYoZltsXT1hKTtmLm5hbWUmJihmW1wiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXT1mLm5hbWUpfWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdJiYoZi5ocmVmPWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdKTtsPXt0YXJnZXQ6MSxvbmNsaWNrOjEsXCJkYXRhLWNrZS1wYS1vbmNsaWNrXCI6MSxcImRhdGEtY2tlLXNhdmVkLW5hbWVcIjoxfTtiLmFkdmFuY2VkJiZDS0VESVRPUi50b29scy5leHRlbmQobCxtKTtmb3IodmFyIG4gaW4gZilkZWxldGUgbFtuXTtyZXR1cm57c2V0OmYscmVtb3ZlZDpDS0VESVRPUi50b29scy5vYmplY3RLZXlzKGwpfX19O0NLRURJVE9SLnVubGlua0NvbW1hbmQ9ZnVuY3Rpb24oKXt9O0NLRURJVE9SLnVubGlua0NvbW1hbmQucHJvdG90eXBlPVxue2V4ZWM6ZnVuY3Rpb24oYyl7dmFyIGI9bmV3IENLRURJVE9SLnN0eWxlKHtlbGVtZW50OlwiYVwiLHR5cGU6Q0tFRElUT1IuU1RZTEVfSU5MSU5FLGFsd2F5c1JlbW92ZUVsZW1lbnQ6MX0pO2MucmVtb3ZlU3R5bGUoYil9LHJlZnJlc2g6ZnVuY3Rpb24oYyxiKXt2YXIgYT1iLmxhc3RFbGVtZW50JiZiLmxhc3RFbGVtZW50LmdldEFzY2VuZGFudChcImFcIiwhMCk7YSYmXCJhXCI9PWEuZ2V0TmFtZSgpJiZhLmdldEF0dHJpYnV0ZShcImhyZWZcIikmJmEuZ2V0Q2hpbGRDb3VudCgpP3RoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT0ZGKTp0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX0sY29udGV4dFNlbnNpdGl2ZToxLHN0YXJ0RGlzYWJsZWQ6MSxyZXF1aXJlZENvbnRlbnQ6XCJhW2hyZWZdXCJ9O0NLRURJVE9SLnJlbW92ZUFuY2hvckNvbW1hbmQ9ZnVuY3Rpb24oKXt9O0NLRURJVE9SLnJlbW92ZUFuY2hvckNvbW1hbmQucHJvdG90eXBlPXtleGVjOmZ1bmN0aW9uKGMpe3ZhciBiPVxuYy5nZXRTZWxlY3Rpb24oKSxhPWIuY3JlYXRlQm9va21hcmtzKCksZjtpZihiJiYoZj1iLmdldFNlbGVjdGVkRWxlbWVudCgpKSYmKGYuZ2V0Q2hpbGRDb3VudCgpP2YuaXMoXCJhXCIpOkNLRURJVE9SLnBsdWdpbnMubGluay50cnlSZXN0b3JlRmFrZUFuY2hvcihjLGYpKSlmLnJlbW92ZSgxKTtlbHNlIGlmKGY9Q0tFRElUT1IucGx1Z2lucy5saW5rLmdldFNlbGVjdGVkTGluayhjKSlmLmhhc0F0dHJpYnV0ZShcImhyZWZcIik/KGYucmVtb3ZlQXR0cmlidXRlcyh7bmFtZToxLFwiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiOjF9KSxmLnJlbW92ZUNsYXNzKFwiY2tlX2FuY2hvclwiKSk6Zi5yZW1vdmUoMSk7Yi5zZWxlY3RCb29rbWFya3MoYSl9LHJlcXVpcmVkQ29udGVudDpcImFbbmFtZV1cIn07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmNvbmZpZyx7bGlua1Nob3dBZHZhbmNlZFRhYjohMCxsaW5rU2hvd1RhcmdldFRhYjohMH0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBJKGIsbSxlKXtmdW5jdGlvbiBjKGMpe2lmKCEoIShhPWRbYz9cImdldEZpcnN0XCI6XCJnZXRMYXN0XCJdKCkpfHxhLmlzJiZhLmlzQmxvY2tCb3VuZGFyeSgpfHwhKHA9bS5yb290W2M/XCJnZXRQcmV2aW91c1wiOlwiZ2V0TmV4dFwiXShDS0VESVRPUi5kb20ud2Fsa2VyLmludmlzaWJsZSghMCkpKXx8cC5pcyYmcC5pc0Jsb2NrQm91bmRhcnkoe2JyOjF9KSkpYi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIilbYz9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oYSl9Zm9yKHZhciBmPUNLRURJVE9SLnBsdWdpbnMubGlzdC5saXN0VG9BcnJheShtLnJvb3QsZSksZz1bXSxrPTA7azxtLmNvbnRlbnRzLmxlbmd0aDtrKyspe3ZhciBoPW0uY29udGVudHNba107KGg9aC5nZXRBc2NlbmRhbnQoXCJsaVwiLCEwKSkmJiFoLmdldEN1c3RvbURhdGEoXCJsaXN0X2l0ZW1fcHJvY2Vzc2VkXCIpJiYoZy5wdXNoKGgpLENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihlLFxuaCxcImxpc3RfaXRlbV9wcm9jZXNzZWRcIiwhMCkpfWg9bnVsbDtmb3Ioaz0wO2s8Zy5sZW5ndGg7aysrKWg9Z1trXS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpLGZbaF0uaW5kZW50PS0xO2ZvcihrPWgrMTtrPGYubGVuZ3RoO2srKylpZihmW2tdLmluZGVudD5mW2stMV0uaW5kZW50KzEpe2c9ZltrLTFdLmluZGVudCsxLWZba10uaW5kZW50O2ZvcihoPWZba10uaW5kZW50O2Zba10mJmZba10uaW5kZW50Pj1oOylmW2tdLmluZGVudCs9ZyxrKys7ay0tfXZhciBkPUNLRURJVE9SLnBsdWdpbnMubGlzdC5hcnJheVRvTGlzdChmLGUsbnVsbCxiLmNvbmZpZy5lbnRlck1vZGUsbS5yb290LmdldEF0dHJpYnV0ZShcImRpclwiKSkubGlzdE5vZGUsYSxwO2MoITApO2MoKTtkLnJlcGxhY2UobS5yb290KTtiLmZpcmUoXCJjb250ZW50RG9tSW52YWxpZGF0ZWRcIil9ZnVuY3Rpb24gQihiLG0pe3RoaXMubmFtZT1iO3RoaXMuY29udGV4dD10aGlzLnR5cGU9bTt0aGlzLmFsbG93ZWRDb250ZW50PVxubStcIiBsaVwiO3RoaXMucmVxdWlyZWRDb250ZW50PW19ZnVuY3Rpb24gRShiLG0sZSxjKXtmb3IodmFyIGYsZztmPWJbYz9cImdldExhc3RcIjpcImdldEZpcnN0XCJdKEopOykoZz1mLmdldERpcmVjdGlvbigxKSkhPT1tLmdldERpcmVjdGlvbigxKSYmZi5zZXRBdHRyaWJ1dGUoXCJkaXJcIixnKSxmLnJlbW92ZSgpLGU/ZltjP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShlKTptLmFwcGVuZChmLGMpfWZ1bmN0aW9uIEYoYil7ZnVuY3Rpb24gbShlKXt2YXIgYz1iW2U/XCJnZXRQcmV2aW91c1wiOlwiZ2V0TmV4dFwiXSh1KTtjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5pcyhiLmdldE5hbWUoKSkmJihFKGIsYyxudWxsLCFlKSxiLnJlbW92ZSgpLGI9Yyl9bSgpO20oMSl9ZnVuY3Rpb24gRyhiKXtyZXR1cm4gYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiLmdldE5hbWUoKWluIENLRURJVE9SLmR0ZC4kYmxvY2t8fGIuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSkmJlxuQ0tFRElUT1IuZHRkW2IuZ2V0TmFtZSgpXVtcIiNcIl19ZnVuY3Rpb24gQyhiLG0sZSl7Yi5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2UuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0xJU1RfSVRFTV9DT05URU5UUyk7dmFyIGM9ZS5leHRyYWN0Q29udGVudHMoKTttLnRyaW0oITEsITApO3ZhciBmPW0uY3JlYXRlQm9va21hcmsoKSxnPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgobS5zdGFydENvbnRhaW5lciksaz1nLmJsb2NrLGc9Zy5sYXN0RWxlbWVudC5nZXRBc2NlbmRhbnQoXCJsaVwiLDEpfHxrLGg9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChlLnN0YXJ0Q29udGFpbmVyKSxkPWguY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSksaD1oLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCk7az8oaz1rLmdldEJvZ3VzKCkpJiZrLnJlbW92ZSgpOmgmJihrPWguZ2V0UHJldmlvdXModSkpJiZ6KGspJiZrLnJlbW92ZSgpOyhrPWMuZ2V0TGFzdCgpKSYmay50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJlxuay5pcyhcImJyXCIpJiZrLnJlbW92ZSgpOyhrPW0uc3RhcnRDb250YWluZXIuZ2V0Q2hpbGQobS5zdGFydE9mZnNldCkpP2MuaW5zZXJ0QmVmb3JlKGspOm0uc3RhcnRDb250YWluZXIuYXBwZW5kKGMpO2QmJihjPUEoZCkpJiYoZy5jb250YWlucyhkKT8oRShjLGQuZ2V0UGFyZW50KCksZCksYy5yZW1vdmUoKSk6Zy5hcHBlbmQoYykpO2Zvcig7ZS5jaGVja1N0YXJ0T2ZCbG9jaygpJiZlLmNoZWNrRW5kT2ZCbG9jaygpOyl7aD1lLnN0YXJ0UGF0aCgpO2M9aC5ibG9jaztpZighYylicmVhaztjLmlzKFwibGlcIikmJihnPWMuZ2V0UGFyZW50KCksYy5lcXVhbHMoZy5nZXRMYXN0KHUpKSYmYy5lcXVhbHMoZy5nZXRGaXJzdCh1KSkmJihjPWcpKTtlLm1vdmVUb1Bvc2l0aW9uKGMsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtjLnJlbW92ZSgpfWU9ZS5jbG9uZSgpO2M9Yi5lZGl0YWJsZSgpO2Uuc2V0RW5kQXQoYyxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtlPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpO1xuZS5ldmFsdWF0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIHUoYSkmJiF6KGEpfTsoZT1lLm5leHQoKSkmJmUudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZlLmdldE5hbWUoKWluIENLRURJVE9SLmR0ZC4kbGlzdCYmRihlKTttLm1vdmVUb0Jvb2ttYXJrKGYpO20uc2VsZWN0KCk7Yi5maXJlKFwic2F2ZVNuYXBzaG90XCIpfWZ1bmN0aW9uIEEoYil7cmV0dXJuKGI9Yi5nZXRMYXN0KHUpKSYmYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuZ2V0TmFtZSgpaW4gdj9iOm51bGx9dmFyIHY9e29sOjEsdWw6MX0sSz1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksSD1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCksdT1mdW5jdGlvbihiKXtyZXR1cm4hKEsoYil8fEgoYikpfSx6PUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKTtDS0VESVRPUi5wbHVnaW5zLmxpc3Q9e2xpc3RUb0FycmF5OmZ1bmN0aW9uKGIsbSxlLGMsZil7aWYoIXZbYi5nZXROYW1lKCldKXJldHVybltdO1xuY3x8KGM9MCk7ZXx8KGU9W10pO2Zvcih2YXIgZz0wLGs9Yi5nZXRDaGlsZENvdW50KCk7ZzxrO2crKyl7dmFyIGg9Yi5nZXRDaGlsZChnKTtoLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmaC5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGxpc3QmJkNLRURJVE9SLnBsdWdpbnMubGlzdC5saXN0VG9BcnJheShoLG0sZSxjKzEpO2lmKFwibGlcIj09aC4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe3ZhciBkPXtwYXJlbnQ6YixpbmRlbnQ6YyxlbGVtZW50OmgsY29udGVudHM6W119O2Y/ZC5ncmFuZHBhcmVudD1mOihkLmdyYW5kcGFyZW50PWIuZ2V0UGFyZW50KCksZC5ncmFuZHBhcmVudCYmXCJsaVwiPT1kLmdyYW5kcGFyZW50LiQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmKGQuZ3JhbmRwYXJlbnQ9ZC5ncmFuZHBhcmVudC5nZXRQYXJlbnQoKSkpO20mJkNLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihtLGgsXCJsaXN0YXJyYXlfaW5kZXhcIixlLmxlbmd0aCk7ZS5wdXNoKGQpO1xuZm9yKHZhciBhPTAscD1oLmdldENoaWxkQ291bnQoKSxsO2E8cDthKyspbD1oLmdldENoaWxkKGEpLGwudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZ2W2wuZ2V0TmFtZSgpXT9DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkobCxtLGUsYysxLGQuZ3JhbmRwYXJlbnQpOmQuY29udGVudHMucHVzaChsKX19cmV0dXJuIGV9LGFycmF5VG9MaXN0OmZ1bmN0aW9uKGIsbSxlLGMsZil7ZXx8KGU9MCk7aWYoIWJ8fGIubGVuZ3RoPGUrMSlyZXR1cm4gbnVsbDtmb3IodmFyIGcsaz1iW2VdLnBhcmVudC5nZXREb2N1bWVudCgpLGg9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KGspLGQ9bnVsbCxhPWUscD1NYXRoLm1heChiW2VdLmluZGVudCwwKSxsPW51bGwscSxuLHQ9Yz09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiOzspe3ZhciByPWJbYV07Zz1yLmdyYW5kcGFyZW50O3E9ci5lbGVtZW50LmdldERpcmVjdGlvbigxKTtpZihyLmluZGVudD09cCl7ZCYmYlthXS5wYXJlbnQuZ2V0TmFtZSgpPT1cbmQuZ2V0TmFtZSgpfHwoZD1iW2FdLnBhcmVudC5jbG9uZSghMSwxKSxmJiZkLnNldEF0dHJpYnV0ZShcImRpclwiLGYpLGguYXBwZW5kKGQpKTtsPWQuYXBwZW5kKHIuZWxlbWVudC5jbG9uZSgwLDEpKTtxIT1kLmdldERpcmVjdGlvbigxKSYmbC5zZXRBdHRyaWJ1dGUoXCJkaXJcIixxKTtmb3IoZz0wO2c8ci5jb250ZW50cy5sZW5ndGg7ZysrKWwuYXBwZW5kKHIuY29udGVudHNbZ10uY2xvbmUoMSwxKSk7YSsrfWVsc2UgaWYoci5pbmRlbnQ9PU1hdGgubWF4KHAsMCkrMSlyPWJbYS0xXS5lbGVtZW50LmdldERpcmVjdGlvbigxKSxhPUNLRURJVE9SLnBsdWdpbnMubGlzdC5hcnJheVRvTGlzdChiLG51bGwsYSxjLHIhPXE/cTpudWxsKSwhbC5nZXRDaGlsZENvdW50KCkmJkNLRURJVE9SLmVudi5uZWVkc05ic3BGaWxsZXImJjc+PWsuJC5kb2N1bWVudE1vZGUmJmwuYXBwZW5kKGsuY3JlYXRlVGV4dChcIsKgXCIpKSxsLmFwcGVuZChhLmxpc3ROb2RlKSxhPWEubmV4dEluZGV4O2Vsc2UgaWYoLTE9PVxuci5pbmRlbnQmJiFlJiZnKXt2W2cuZ2V0TmFtZSgpXT8obD1yLmVsZW1lbnQuY2xvbmUoITEsITApLHEhPWcuZ2V0RGlyZWN0aW9uKDEpJiZsLnNldEF0dHJpYnV0ZShcImRpclwiLHEpKTpsPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChrKTt2YXIgZD1nLmdldERpcmVjdGlvbigxKSE9cSx5PXIuZWxlbWVudCxEPXkuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIiksej15LmdldEF0dHJpYnV0ZShcInN0eWxlXCIpLEE9bC50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UJiYoYyE9Q0tFRElUT1IuRU5URVJfQlJ8fGR8fHp8fEQpLHcsQj1yLmNvbnRlbnRzLmxlbmd0aCx4O2ZvcihnPTA7ZzxCO2crKylpZih3PXIuY29udGVudHNbZ10sSCh3KSYmMTxCKUE/eD13LmNsb25lKDEsMSk6bC5hcHBlbmQody5jbG9uZSgxLDEpKTtlbHNlIGlmKHcudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZ3LmlzQmxvY2tCb3VuZGFyeSgpKXtkJiYhdy5nZXREaXJlY3Rpb24oKSYmXG53LnNldEF0dHJpYnV0ZShcImRpclwiLHEpO249dzt2YXIgQz15LmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO0MmJm4uc2V0QXR0cmlidXRlKFwic3R5bGVcIixDLnJlcGxhY2UoLyhbXjtdKSQvLFwiJDE7XCIpKyhuLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpfHxcIlwiKSk7RCYmdy5hZGRDbGFzcyhEKTtuPW51bGw7eCYmKGwuYXBwZW5kKHgpLHg9bnVsbCk7bC5hcHBlbmQody5jbG9uZSgxLDEpKX1lbHNlIEE/KG58fChuPWsuY3JlYXRlRWxlbWVudCh0KSxsLmFwcGVuZChuKSxkJiZuLnNldEF0dHJpYnV0ZShcImRpclwiLHEpKSx6JiZuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIseiksRCYmbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLEQpLHgmJihuLmFwcGVuZCh4KSx4PW51bGwpLG4uYXBwZW5kKHcuY2xvbmUoMSwxKSkpOmwuYXBwZW5kKHcuY2xvbmUoMSwxKSk7eCYmKChufHxsKS5hcHBlbmQoeCkseD1udWxsKTtsLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQmJmEhPWIubGVuZ3RoLTEmJihDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmXG4ocT1sLmdldExhc3QoKSkmJnEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZxLmlzKFwiYnJcIikmJnEucmVtb3ZlKCksKHE9bC5nZXRMYXN0KHUpKSYmcS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJnEuaXMoQ0tFRElUT1IuZHRkLiRibG9jayl8fGwuYXBwZW5kKGsuY3JlYXRlRWxlbWVudChcImJyXCIpKSk7cT1sLiQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImRpdlwiIT1xJiZcInBcIiE9cXx8bC5hcHBlbmRCb2d1cygpO2guYXBwZW5kKGwpO2Q9bnVsbDthKyt9ZWxzZSByZXR1cm4gbnVsbDtuPW51bGw7aWYoYi5sZW5ndGg8PWF8fE1hdGgubWF4KGJbYV0uaW5kZW50LDApPHApYnJlYWt9aWYobSlmb3IoYj1oLmdldEZpcnN0KCk7Yjspe2lmKGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoQ0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJNYXJrZXJzKG0sYiksYi5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGxpc3RJdGVtJiYoZT1iLGs9Zj1jPXZvaWQgMCxjPWUuZ2V0RGlyZWN0aW9uKCkpKSl7Zm9yKGY9XG5lLmdldFBhcmVudCgpO2YmJiEoaz1mLmdldERpcmVjdGlvbigpKTspZj1mLmdldFBhcmVudCgpO2M9PWsmJmUucmVtb3ZlQXR0cmlidXRlKFwiZGlyXCIpfWI9Yi5nZXROZXh0U291cmNlTm9kZSgpfXJldHVybntsaXN0Tm9kZTpoLG5leHRJbmRleDphfX19O3ZhciBMPS9eaFsxLTZdJC8sSj1DS0VESVRPUi5kb20ud2Fsa2VyLm5vZGVUeXBlKENLRURJVE9SLk5PREVfRUxFTUVOVCk7Qi5wcm90b3R5cGU9e2V4ZWM6ZnVuY3Rpb24oYil7dGhpcy5yZWZyZXNoKGIsYi5lbGVtZW50UGF0aCgpKTt2YXIgbT1iLmNvbmZpZyxlPWIuZ2V0U2VsZWN0aW9uKCksYz1lJiZlLmdldFJhbmdlcygpO2lmKHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRil7dmFyIGY9Yi5lZGl0YWJsZSgpO2lmKGYuZ2V0Rmlyc3QodSkpe3ZhciBnPTE9PWMubGVuZ3RoJiZjWzBdOyhtPWcmJmcuZ2V0RW5jbG9zZWROb2RlKCkpJiZtLmlzJiZ0aGlzLnR5cGU9PW0uZ2V0TmFtZSgpJiZ0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKX1lbHNlIG0uZW50ZXJNb2RlPT1cbkNLRURJVE9SLkVOVEVSX0JSP2YuYXBwZW5kQm9ndXMoKTpjWzBdLmZpeEJsb2NrKDEsbS5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIiksZS5zZWxlY3RSYW5nZXMoYyl9Zm9yKHZhciBtPWUuY3JlYXRlQm9va21hcmtzKCEwKSxmPVtdLGs9e30sYz1jLmNyZWF0ZUl0ZXJhdG9yKCksaD0wOyhnPWMuZ2V0TmV4dFJhbmdlKCkpJiYrK2g7KXt2YXIgZD1nLmdldEJvdW5kYXJ5Tm9kZXMoKSxhPWQuc3RhcnROb2RlLHA9ZC5lbmROb2RlO2EudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcInRkXCI9PWEuZ2V0TmFtZSgpJiZnLnNldFN0YXJ0QXQoZC5zdGFydE5vZGUsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO3AudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcInRkXCI9PXAuZ2V0TmFtZSgpJiZnLnNldEVuZEF0KGQuZW5kTm9kZSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtnPWcuY3JlYXRlSXRlcmF0b3IoKTtmb3IoZy5mb3JjZUJyQnJlYWs9XG50aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkY7ZD1nLmdldE5leHRQYXJhZ3JhcGgoKTspaWYoIWQuZ2V0Q3VzdG9tRGF0YShcImxpc3RfYmxvY2tcIikpe0NLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihrLGQsXCJsaXN0X2Jsb2NrXCIsMSk7Zm9yKHZhciBsPWIuZWxlbWVudFBhdGgoZCksYT1sLmVsZW1lbnRzLHA9MCxsPWwuYmxvY2tMaW1pdCxxLG49YS5sZW5ndGgtMTswPD1uJiYocT1hW25dKTtuLS0paWYodltxLmdldE5hbWUoKV0mJmwuY29udGFpbnMocSkpe2wucmVtb3ZlQ3VzdG9tRGF0YShcImxpc3RfZ3JvdXBfb2JqZWN0X1wiK2gpOyhhPXEuZ2V0Q3VzdG9tRGF0YShcImxpc3RfZ3JvdXBfb2JqZWN0XCIpKT9hLmNvbnRlbnRzLnB1c2goZCk6KGE9e3Jvb3Q6cSxjb250ZW50czpbZF19LGYucHVzaChhKSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoayxxLFwibGlzdF9ncm91cF9vYmplY3RcIixhKSk7cD0xO2JyZWFrfXB8fChwPWwscC5nZXRDdXN0b21EYXRhKFwibGlzdF9ncm91cF9vYmplY3RfXCIrXG5oKT9wLmdldEN1c3RvbURhdGEoXCJsaXN0X2dyb3VwX29iamVjdF9cIitoKS5jb250ZW50cy5wdXNoKGQpOihhPXtyb290OnAsY29udGVudHM6W2RdfSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoayxwLFwibGlzdF9ncm91cF9vYmplY3RfXCIraCxhKSxmLnB1c2goYSkpKX19Zm9yKHE9W107MDxmLmxlbmd0aDspaWYoYT1mLnNoaWZ0KCksdGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKWlmKHZbYS5yb290LmdldE5hbWUoKV0pe2M9YjtoPWE7YT1rO2c9cTtwPUNLRURJVE9SLnBsdWdpbnMubGlzdC5saXN0VG9BcnJheShoLnJvb3QsYSk7bD1bXTtmb3IoZD0wO2Q8aC5jb250ZW50cy5sZW5ndGg7ZCsrKW49aC5jb250ZW50c1tkXSwobj1uLmdldEFzY2VuZGFudChcImxpXCIsITApKSYmIW4uZ2V0Q3VzdG9tRGF0YShcImxpc3RfaXRlbV9wcm9jZXNzZWRcIikmJihsLnB1c2gobiksQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGEsbixcImxpc3RfaXRlbV9wcm9jZXNzZWRcIixcbiEwKSk7Zm9yKHZhciBuPWgucm9vdC5nZXREb2N1bWVudCgpLHQ9dm9pZCAwLHI9dm9pZCAwLGQ9MDtkPGwubGVuZ3RoO2QrKyl7dmFyIHk9bFtkXS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpLHQ9cFt5XS5wYXJlbnQ7dC5pcyh0aGlzLnR5cGUpfHwocj1uLmNyZWF0ZUVsZW1lbnQodGhpcy50eXBlKSx0LmNvcHlBdHRyaWJ1dGVzKHIse3N0YXJ0OjEsdHlwZToxfSksci5yZW1vdmVTdHlsZShcImxpc3Qtc3R5bGUtdHlwZVwiKSxwW3ldLnBhcmVudD1yKX1hPUNLRURJVE9SLnBsdWdpbnMubGlzdC5hcnJheVRvTGlzdChwLGEsbnVsbCxjLmNvbmZpZy5lbnRlck1vZGUpO3A9dm9pZCAwO2w9YS5saXN0Tm9kZS5nZXRDaGlsZENvdW50KCk7Zm9yKGQ9MDtkPGwmJihwPWEubGlzdE5vZGUuZ2V0Q2hpbGQoZCkpO2QrKylwLmdldE5hbWUoKT09dGhpcy50eXBlJiZnLnB1c2gocCk7YS5saXN0Tm9kZS5yZXBsYWNlKGgucm9vdCk7Yy5maXJlKFwiY29udGVudERvbUludmFsaWRhdGVkXCIpfWVsc2V7cD1cbmI7Zz1hO2Q9cTtsPWcuY29udGVudHM7Yz1nLnJvb3QuZ2V0RG9jdW1lbnQoKTtoPVtdOzE9PWwubGVuZ3RoJiZsWzBdLmVxdWFscyhnLnJvb3QpJiYoYT1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbFswXS5tb3ZlQ2hpbGRyZW4mJmxbMF0ubW92ZUNoaWxkcmVuKGEpLGxbMF0uYXBwZW5kKGEpLGxbMF09YSk7Zz1nLmNvbnRlbnRzWzBdLmdldFBhcmVudCgpO2ZvcihuPTA7bjxsLmxlbmd0aDtuKyspZz1nLmdldENvbW1vbkFuY2VzdG9yKGxbbl0uZ2V0UGFyZW50KCkpO3Q9cC5jb25maWcudXNlQ29tcHV0ZWRTdGF0ZTtwPWE9dm9pZCAwO3Q9dm9pZCAwPT09dHx8dDtmb3Iobj0wO248bC5sZW5ndGg7bisrKWZvcihyPWxbbl07eT1yLmdldFBhcmVudCgpOyl7aWYoeS5lcXVhbHMoZykpe2gucHVzaChyKTshcCYmci5nZXREaXJlY3Rpb24oKSYmKHA9MSk7cj1yLmdldERpcmVjdGlvbih0KTtudWxsIT09YSYmKGE9YSYmYSE9cj9udWxsOnIpO2JyZWFrfXI9eX1pZighKDE+aC5sZW5ndGgpKXtsPVxuaFtoLmxlbmd0aC0xXS5nZXROZXh0KCk7bj1jLmNyZWF0ZUVsZW1lbnQodGhpcy50eXBlKTtkLnB1c2gobik7Zm9yKHQ9ZD12b2lkIDA7aC5sZW5ndGg7KWQ9aC5zaGlmdCgpLHQ9Yy5jcmVhdGVFbGVtZW50KFwibGlcIikscj1kLHIuaXMoXCJwcmVcIil8fEwudGVzdChyLmdldE5hbWUoKSl8fFwiZmFsc2VcIj09ci5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik/ZC5hcHBlbmRUbyh0KTooZC5jb3B5QXR0cmlidXRlcyh0KSxhJiZkLmdldERpcmVjdGlvbigpJiYodC5yZW1vdmVTdHlsZShcImRpcmVjdGlvblwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcImRpclwiKSksZC5tb3ZlQ2hpbGRyZW4odCksZC5yZW1vdmUoKSksdC5hcHBlbmRUbyhuKTthJiZwJiZuLnNldEF0dHJpYnV0ZShcImRpclwiLGEpO2w/bi5pbnNlcnRCZWZvcmUobCk6bi5hcHBlbmRUbyhnKX19ZWxzZSB0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTiYmdlthLnJvb3QuZ2V0TmFtZSgpXSYmSS5jYWxsKHRoaXMsYixhLGspO1xuZm9yKG49MDtuPHEubGVuZ3RoO24rKylGKHFbbl0pO0NLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhrKTtlLnNlbGVjdEJvb2ttYXJrcyhtKTtiLmZvY3VzKCl9LHJlZnJlc2g6ZnVuY3Rpb24oYixtKXt2YXIgZT1tLmNvbnRhaW5zKHYsMSksYz1tLmJsb2NrTGltaXR8fG0ucm9vdDtlJiZjLmNvbnRhaW5zKGUpP3RoaXMuc2V0U3RhdGUoZS5pcyh0aGlzLnR5cGUpP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRik6dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PRkYpfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJsaXN0XCIse3JlcXVpcmVzOlwiaW5kZW50bGlzdFwiLGluaXQ6ZnVuY3Rpb24oYil7Yi5ibG9ja2xlc3N8fChiLmFkZENvbW1hbmQoXCJudW1iZXJlZGxpc3RcIixuZXcgQihcIm51bWJlcmVkbGlzdFwiLFwib2xcIikpLGIuYWRkQ29tbWFuZChcImJ1bGxldGVkbGlzdFwiLG5ldyBCKFwiYnVsbGV0ZWRsaXN0XCIsXCJ1bFwiKSksYi51aS5hZGRCdXR0b24mJlxuKGIudWkuYWRkQnV0dG9uKFwiTnVtYmVyZWRMaXN0XCIse2xhYmVsOmIubGFuZy5saXN0Lm51bWJlcmVkbGlzdCxjb21tYW5kOlwibnVtYmVyZWRsaXN0XCIsZGlyZWN0aW9uYWw6ITAsdG9vbGJhcjpcImxpc3QsMTBcIn0pLGIudWkuYWRkQnV0dG9uKFwiQnVsbGV0ZWRMaXN0XCIse2xhYmVsOmIubGFuZy5saXN0LmJ1bGxldGVkbGlzdCxjb21tYW5kOlwiYnVsbGV0ZWRsaXN0XCIsZGlyZWN0aW9uYWw6ITAsdG9vbGJhcjpcImxpc3QsMjBcIn0pKSxiLm9uKFwia2V5XCIsZnVuY3Rpb24obSl7dmFyIGU9bS5kYXRhLmRvbUV2ZW50LmdldEtleSgpLGM7aWYoXCJ3eXNpd3lnXCI9PWIubW9kZSYmZSBpbns4OjEsNDY6MX0pe3ZhciBmPWIuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKClbMF0sZz1mJiZmLnN0YXJ0UGF0aCgpO2lmKGYmJmYuY29sbGFwc2VkKXt2YXIgaz04PT1lLGg9Yi5lZGl0YWJsZSgpLGQ9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZi5jbG9uZSgpKTtkLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4gdShhKSYmXG4heihhKX07ZC5ndWFyZD1mdW5jdGlvbihhLGIpe3JldHVybiEoYiYmYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXMoXCJ0YWJsZVwiKSl9O2U9Zi5jbG9uZSgpO2lmKGspe3ZhciBhOyhhPWcuY29udGFpbnModikpJiZmLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoYSxDS0VESVRPUi5TVEFSVCkmJihhPWEuZ2V0UGFyZW50KCkpJiZhLmlzKFwibGlcIikmJihhPUEoYSkpPyhjPWEsYT1hLmdldFByZXZpb3VzKHUpLGUubW92ZVRvUG9zaXRpb24oYSYmeihhKT9hOmMsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSk6KGQucmFuZ2Uuc2V0U3RhcnRBdChoLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSxkLnJhbmdlLnNldEVuZChmLnN0YXJ0Q29udGFpbmVyLGYuc3RhcnRPZmZzZXQpLChhPWQucHJldmlvdXMoKSkmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYS5nZXROYW1lKClpbiB2fHxhLmlzKFwibGlcIikpJiYoYS5pcyhcImxpXCIpfHwoZC5yYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoYSksXG5kLnJlc2V0KCksZC5ldmFsdWF0b3I9RyxhPWQucHJldmlvdXMoKSksYz1hLGUubW92ZVRvRWxlbWVudEVkaXRFbmQoYyksZS5tb3ZlVG9Qb3NpdGlvbihlLmVuZFBhdGgoKS5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSkpO2lmKGMpQyhiLGUsZiksbS5jYW5jZWwoKTtlbHNle3ZhciBwPWcuY29udGFpbnModik7cCYmZi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KHAsQ0tFRElUT1IuU1RBUlQpJiYoYz1wLmdldEZpcnN0KHUpLGYuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChjLENLRURJVE9SLlNUQVJUKSYmKGE9cC5nZXRQcmV2aW91cyh1KSxBKGMpP2EmJihmLm1vdmVUb0VsZW1lbnRFZGl0RW5kKGEpLGYuc2VsZWN0KCkpOmIuZXhlY0NvbW1hbmQoXCJvdXRkZW50XCIpLG0uY2FuY2VsKCkpKX19ZWxzZSBpZihjPWcuY29udGFpbnMoXCJsaVwiKSl7aWYoZC5yYW5nZS5zZXRFbmRBdChoLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGs9KGg9Yy5nZXRMYXN0KHUpKSYmXG5HKGgpP2g6YyxnPTAsKGE9ZC5uZXh0KCkpJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5nZXROYW1lKClpbiB2JiZhLmVxdWFscyhoKT8oZz0xLGE9ZC5uZXh0KCkpOmYuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChrLENLRURJVE9SLkVORCkmJihnPTIpLGcmJmEpe2Y9Zi5jbG9uZSgpO2YubW92ZVRvRWxlbWVudEVkaXRTdGFydChhKTtpZigxPT1nJiYoZS5vcHRpbWl6ZSgpLCFlLnN0YXJ0Q29udGFpbmVyLmVxdWFscyhjKSkpe2ZvcihjPWUuc3RhcnRDb250YWluZXI7Yy5pcyhDS0VESVRPUi5kdGQuJGlubGluZSk7KXA9YyxjPWMuZ2V0UGFyZW50KCk7cCYmZS5tb3ZlVG9Qb3NpdGlvbihwLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCl9Mj09ZyYmKGUubW92ZVRvUG9zaXRpb24oZS5lbmRQYXRoKCkuYmxvY2ssQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCksZi5lbmRQYXRoKCkuYmxvY2smJmYubW92ZVRvUG9zaXRpb24oZi5lbmRQYXRoKCkuYmxvY2ssQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpKTtcbkMoYixlLGYpO20uY2FuY2VsKCl9fWVsc2UgZC5yYW5nZS5zZXRFbmRBdChoLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLChhPWQubmV4dCgpKSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXModikmJihhPWEuZ2V0Rmlyc3QodSksZy5ibG9jayYmZi5jaGVja1N0YXJ0T2ZCbG9jaygpJiZmLmNoZWNrRW5kT2ZCbG9jaygpPyhnLmJsb2NrLnJlbW92ZSgpLGYubW92ZVRvRWxlbWVudEVkaXRTdGFydChhKSxmLnNlbGVjdCgpKTpBKGEpPyhmLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSksZi5zZWxlY3QoKSk6KGY9Zi5jbG9uZSgpLGYubW92ZVRvRWxlbWVudEVkaXRTdGFydChhKSxDKGIsZSxmKSksbS5jYW5jZWwoKSk7c2V0VGltZW91dChmdW5jdGlvbigpe2Iuc2VsZWN0aW9uQ2hhbmdlKDEpfSl9fX0pKX19KX0pKCk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5saXN0c3R5bGU9e3JlcXVpcmVzOlwiZGlhbG9nLGNvbnRleHRtZW51XCIsaW5pdDpmdW5jdGlvbihhKXtpZighYS5ibG9ja2xlc3Mpe3ZhciBiO2I9bmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJudW1iZXJlZExpc3RTdHlsZVwiLHtyZXF1aXJlZENvbnRlbnQ6XCJvbFwiLGFsbG93ZWRDb250ZW50Olwib2x7bGlzdC1zdHlsZS10eXBlfVtzdGFydF1cIn0pO2I9YS5hZGRDb21tYW5kKFwibnVtYmVyZWRMaXN0U3R5bGVcIixiKTthLmFkZEZlYXR1cmUoYik7Q0tFRElUT1IuZGlhbG9nLmFkZChcIm51bWJlcmVkTGlzdFN0eWxlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9saXN0c3R5bGUuanNcIik7Yj1uZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImJ1bGxldGVkTGlzdFN0eWxlXCIse3JlcXVpcmVkQ29udGVudDpcInVsXCIsYWxsb3dlZENvbnRlbnQ6XCJ1bHtsaXN0LXN0eWxlLXR5cGV9XCJ9KTtiPWEuYWRkQ29tbWFuZChcImJ1bGxldGVkTGlzdFN0eWxlXCIsYik7XG5hLmFkZEZlYXR1cmUoYik7Q0tFRElUT1IuZGlhbG9nLmFkZChcImJ1bGxldGVkTGlzdFN0eWxlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9saXN0c3R5bGUuanNcIik7YS5hZGRNZW51R3JvdXAoXCJsaXN0XCIsMTA4KTthLmFkZE1lbnVJdGVtcyh7bnVtYmVyZWRsaXN0OntsYWJlbDphLmxhbmcubGlzdHN0eWxlLm51bWJlcmVkVGl0bGUsZ3JvdXA6XCJsaXN0XCIsY29tbWFuZDpcIm51bWJlcmVkTGlzdFN0eWxlXCJ9LGJ1bGxldGVkbGlzdDp7bGFiZWw6YS5sYW5nLmxpc3RzdHlsZS5idWxsZXRlZFRpdGxlLGdyb3VwOlwibGlzdFwiLGNvbW1hbmQ6XCJidWxsZXRlZExpc3RTdHlsZVwifX0pO2EuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYSl7aWYoIWF8fGEuaXNSZWFkT25seSgpKXJldHVybiBudWxsO2Zvcig7YTspe3ZhciBiPWEuZ2V0TmFtZSgpO2lmKFwib2xcIj09YilyZXR1cm57bnVtYmVyZWRsaXN0OkNLRURJVE9SLlRSSVNUQVRFX09GRn07aWYoXCJ1bFwiPT1iKXJldHVybntidWxsZXRlZGxpc3Q6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTtcbmE9YS5nZXRQYXJlbnQoKX1yZXR1cm4gbnVsbH0pfX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwibGlzdHN0eWxlXCIsQ0tFRElUT1IucGx1Z2lucy5saXN0c3R5bGUpfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBWKGEsYyxkKXtyZXR1cm4gbihjKSYmbihkKSYmZC5lcXVhbHMoYy5nZXROZXh0KGZ1bmN0aW9uKGEpe3JldHVybiEoRShhKXx8RihhKXx8dShhKSl9KSl9ZnVuY3Rpb24geihhKXt0aGlzLnVwcGVyPWFbMF07dGhpcy5sb3dlcj1hWzFdO3RoaXMuc2V0LmFwcGx5KHRoaXMsYS5zbGljZSgyKSl9ZnVuY3Rpb24gTyhhKXt2YXIgYz1hLmVsZW1lbnQ7aWYoYyYmbihjKSYmKGM9Yy5nZXRBc2NlbmRhbnQoYS50cmlnZ2VycywhMCkpJiZhLmVkaXRhYmxlLmNvbnRhaW5zKGMpKXt2YXIgZD1QKGMpO2lmKFwidHJ1ZVwiPT1kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4gYztpZihkLmlzKGEudHJpZ2dlcnMpKXJldHVybiBkfXJldHVybiBudWxsfWZ1bmN0aW9uIGthKGEsYyxkKXtyKGEsYyk7cihhLGQpO2E9Yy5zaXplLmJvdHRvbTtkPWQuc2l6ZS50b3A7cmV0dXJuIGEmJmQ/MHwoYStkKS8yOmF8fGR9ZnVuY3Rpb24gdyhhLGMsZCl7cmV0dXJuIGM9XG5jW2Q/XCJnZXRQcmV2aW91c1wiOlwiZ2V0TmV4dFwiXShmdW5jdGlvbihiKXtyZXR1cm4gYiYmYi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJiFFKGIpfHxuKGIpJiYhdShiKSYmIUEoYSxiKX0pfWZ1bmN0aW9uIHEoYSxjLGQpe3JldHVybiBhPmMmJmE8ZH1mdW5jdGlvbiBQKGEsYyl7aWYoYS5kYXRhKFwiY2tlLWVkaXRhYmxlXCIpKXJldHVybiBudWxsO2ZvcihjfHwoYT1hLmdldFBhcmVudCgpKTthJiYhYS5kYXRhKFwiY2tlLWVkaXRhYmxlXCIpOyl7aWYoYS5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpcmV0dXJuIGE7YT1hLmdldFBhcmVudCgpfXJldHVybiBudWxsfWZ1bmN0aW9uIGxhKGEpe3ZhciBjPWEuZG9jLGQ9RygnXFx4M2NzcGFuIGNvbnRlbnRlZGl0YWJsZVxceDNkXCJmYWxzZVwiIHN0eWxlXFx4M2RcIicrUStcInBvc2l0aW9uOmFic29sdXRlO2JvcmRlci10b3A6MXB4IGRhc2hlZCBcIithLmJveENvbG9yKydcIlxceDNlXFx4M2Mvc3BhblxceDNlJyxjKSxiPUNLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXG5cImltYWdlcy9cIisodC5oaWRwaT9cImhpZHBpL1wiOlwiXCIpK1wiaWNvblwiKyhhLnJ0bD9cIi1ydGxcIjpcIlwiKStcIi5wbmdcIik7dihkLHthdHRhY2g6ZnVuY3Rpb24oKXt0aGlzLndyYXAuZ2V0UGFyZW50KCl8fHRoaXMud3JhcC5hcHBlbmRUbyhhLmVkaXRhYmxlLCEwKTtyZXR1cm4gdGhpc30sbGluZUNoaWxkcmVuOlt2KEcoJ1xceDNjc3BhbiB0aXRsZVxceDNkXCInK2EuZWRpdG9yLmxhbmcubWFnaWNsaW5lLnRpdGxlKydcIiBjb250ZW50ZWRpdGFibGVcXHgzZFwiZmFsc2VcIlxceDNlXFx4MjYjODYyOTtcXHgzYy9zcGFuXFx4M2UnLGMpLHtiYXNlOlErXCJoZWlnaHQ6MTdweDt3aWR0aDoxN3B4O1wiKyhhLnJ0bD9cImxlZnRcIjpcInJpZ2h0XCIpK1wiOjE3cHg7YmFja2dyb3VuZDp1cmwoXCIrYitcIikgY2VudGVyIG5vLXJlcGVhdCBcIithLmJveENvbG9yK1wiO2N1cnNvcjpwb2ludGVyO1wiKyh0LmhjP1wiZm9udC1zaXplOiAxNXB4O2xpbmUtaGVpZ2h0OjE0cHg7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO3RleHQtYWxpZ246Y2VudGVyO1wiOlxuXCJcIikrKHQuaGlkcGk/XCJiYWNrZ3JvdW5kLXNpemU6IDlweCAxMHB4O1wiOlwiXCIpLGxvb2tzOltcInRvcDotOHB4OyBib3JkZXItcmFkaXVzOiAycHg7XCIsXCJ0b3A6LTE3cHg7IGJvcmRlci1yYWRpdXM6IDJweCAycHggMHB4IDBweDtcIixcInRvcDotMXB4OyBib3JkZXItcmFkaXVzOiAwcHggMHB4IDJweCAycHg7XCJdfSksdihHKFcsYykse2Jhc2U6WCtcImxlZnQ6MHB4O2JvcmRlci1sZWZ0LWNvbG9yOlwiK2EuYm94Q29sb3IrXCI7XCIsbG9va3M6W1wiYm9yZGVyLXdpZHRoOjhweCAwIDhweCA4cHg7dG9wOi04cHhcIixcImJvcmRlci13aWR0aDo4cHggMCAwIDhweDt0b3A6LThweFwiLFwiYm9yZGVyLXdpZHRoOjAgMCA4cHggOHB4O3RvcDowcHhcIl19KSx2KEcoVyxjKSx7YmFzZTpYK1wicmlnaHQ6MHB4O2JvcmRlci1yaWdodC1jb2xvcjpcIithLmJveENvbG9yK1wiO1wiLGxvb2tzOltcImJvcmRlci13aWR0aDo4cHggOHB4IDhweCAwO3RvcDotOHB4XCIsXCJib3JkZXItd2lkdGg6OHB4IDhweCAwIDA7dG9wOi04cHhcIixcblwiYm9yZGVyLXdpZHRoOjAgOHB4IDhweCAwO3RvcDowcHhcIl19KV0sZGV0YWNoOmZ1bmN0aW9uKCl7dGhpcy53cmFwLmdldFBhcmVudCgpJiZ0aGlzLndyYXAucmVtb3ZlKCk7cmV0dXJuIHRoaXN9LG1vdXNlTmVhcjpmdW5jdGlvbigpe3IoYSx0aGlzKTt2YXIgYj1hLmhvbGREaXN0YW5jZSxjPXRoaXMuc2l6ZTtyZXR1cm4gYyYmcShhLm1vdXNlLnksYy50b3AtYixjLmJvdHRvbStiKSYmcShhLm1vdXNlLngsYy5sZWZ0LWIsYy5yaWdodCtiKT8hMDohMX0scGxhY2U6ZnVuY3Rpb24oKXt2YXIgYj1hLnZpZXcsYz1hLmVkaXRhYmxlLGQ9YS50cmlnZ2VyLGg9ZC51cHBlcixnPWQubG93ZXIsbD1ofHxnLHA9bC5nZXRQYXJlbnQoKSxtPXt9O3RoaXMudHJpZ2dlcj1kO2gmJnIoYSxoLCEwKTtnJiZyKGEsZywhMCk7cihhLHAsITApO2EuaW5JbmxpbmVNb2RlJiZIKGEsITApO3AuZXF1YWxzKGMpPyhtLmxlZnQ9Yi5zY3JvbGwueCxtLnJpZ2h0PS1iLnNjcm9sbC54LG0ud2lkdGg9XCJcIik6KG0ubGVmdD1cbmwuc2l6ZS5sZWZ0LWwuc2l6ZS5tYXJnaW4ubGVmdCtiLnNjcm9sbC54LShhLmluSW5saW5lTW9kZT9iLmVkaXRhYmxlLmxlZnQrYi5lZGl0YWJsZS5ib3JkZXIubGVmdDowKSxtLndpZHRoPWwuc2l6ZS5vdXRlcldpZHRoK2wuc2l6ZS5tYXJnaW4ubGVmdCtsLnNpemUubWFyZ2luLnJpZ2h0K2Iuc2Nyb2xsLngsbS5yaWdodD1cIlwiKTtoJiZnP20udG9wPWguc2l6ZS5tYXJnaW4uYm90dG9tPT09Zy5zaXplLm1hcmdpbi50b3A/MHxoLnNpemUuYm90dG9tK2guc2l6ZS5tYXJnaW4uYm90dG9tLzI6aC5zaXplLm1hcmdpbi5ib3R0b208Zy5zaXplLm1hcmdpbi50b3A/aC5zaXplLmJvdHRvbStoLnNpemUubWFyZ2luLmJvdHRvbTpoLnNpemUuYm90dG9tK2guc2l6ZS5tYXJnaW4uYm90dG9tLWcuc2l6ZS5tYXJnaW4udG9wOmg/Z3x8KG0udG9wPWguc2l6ZS5ib3R0b20raC5zaXplLm1hcmdpbi5ib3R0b20pOm0udG9wPWcuc2l6ZS50b3AtZy5zaXplLm1hcmdpbi50b3A7ZC5pcyhDKXx8cShtLnRvcCxcbmIuc2Nyb2xsLnktMTUsYi5zY3JvbGwueSs1KT8obS50b3A9YS5pbklubGluZU1vZGU/MDpiLnNjcm9sbC55LHRoaXMubG9vayhDKSk6ZC5pcyhEKXx8cShtLnRvcCxiLnBhbmUuYm90dG9tLTUsYi5wYW5lLmJvdHRvbSsxNSk/KG0udG9wPWEuaW5JbmxpbmVNb2RlP2IuZWRpdGFibGUuaGVpZ2h0K2IuZWRpdGFibGUucGFkZGluZy50b3ArYi5lZGl0YWJsZS5wYWRkaW5nLmJvdHRvbTpiLnBhbmUuYm90dG9tLTEsdGhpcy5sb29rKEQpKTooYS5pbklubGluZU1vZGUmJihtLnRvcC09Yi5lZGl0YWJsZS50b3ArYi5lZGl0YWJsZS5ib3JkZXIudG9wKSx0aGlzLmxvb2soeCkpO2EuaW5JbmxpbmVNb2RlJiYobS50b3AtLSxtLnRvcCs9Yi5lZGl0YWJsZS5zY3JvbGwudG9wLG0ubGVmdCs9Yi5lZGl0YWJsZS5zY3JvbGwubGVmdCk7Zm9yKHZhciBuIGluIG0pbVtuXT1DS0VESVRPUi50b29scy5jc3NMZW5ndGgobVtuXSk7dGhpcy5zZXRTdHlsZXMobSl9LGxvb2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5vbGRMb29rIT1cbmEpe2Zvcih2YXIgYj10aGlzLmxpbmVDaGlsZHJlbi5sZW5ndGgsYztiLS07KShjPXRoaXMubGluZUNoaWxkcmVuW2JdKS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGMuYmFzZStjLmxvb2tzWzB8YS8yXSk7dGhpcy5vbGRMb29rPWF9fSx3cmFwOm5ldyBSKFwic3BhblwiLGEuZG9jKX0pO2ZvcihjPWQubGluZUNoaWxkcmVuLmxlbmd0aDtjLS07KWQubGluZUNoaWxkcmVuW2NdLmFwcGVuZFRvKGQpO2QubG9vayh4KTtkLmFwcGVuZFRvKGQud3JhcCk7ZC51bnNlbGVjdGFibGUoKTtkLmxpbmVDaGlsZHJlblswXS5vbihcIm1vdXNldXBcIixmdW5jdGlvbihiKXtkLmRldGFjaCgpO1MoYSxmdW5jdGlvbihiKXt2YXIgYz1hLmxpbmUudHJpZ2dlcjtiW2MuaXMoSSk/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGMuaXMoSSk/Yy5sb3dlcjpjLnVwcGVyKX0sITApO2EuZWRpdG9yLmZvY3VzKCk7dC5pZXx8YS5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSfHxhLmhvdE5vZGUuc2Nyb2xsSW50b1ZpZXcoKTtcbmIuZGF0YS5wcmV2ZW50RGVmYXVsdCghMCl9KTtkLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLnByZXZlbnREZWZhdWx0KCEwKX0pO2EubGluZT1kfWZ1bmN0aW9uIFMoYSxjLGQpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYS5kb2MpLGU9YS5lZGl0b3IsZjt0LmllJiZhLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlI/Zj1hLmRvYy5jcmVhdGVUZXh0KEopOihmPShmPVAoYS5lbGVtZW50LCEwKSkmJmYuZGF0YShcImNrZS1lbnRlci1tb2RlXCIpfHxhLmVudGVyTW9kZSxmPW5ldyBSKEtbZl0sYS5kb2MpLGYuaXMoXCJiclwiKXx8YS5kb2MuY3JlYXRlVGV4dChKKS5hcHBlbmRUbyhmKSk7ZCYmZS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2MoZik7Yi5tb3ZlVG9Qb3NpdGlvbihmLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTtlLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbYl0pO2EuaG90Tm9kZT1mO2QmJmUuZmlyZShcInNhdmVTbmFwc2hvdFwiKX1cbmZ1bmN0aW9uIFkoYSxjKXtyZXR1cm57Y2FuVW5kbzohMCxtb2Rlczp7d3lzaXd5ZzoxfSxleGVjOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChiKXt2YXIgZD10LmllJiY5PnQudmVyc2lvbj9cIiBcIjpKLGY9YS5ob3ROb2RlJiZhLmhvdE5vZGUuZ2V0VGV4dCgpPT1kJiZhLmVsZW1lbnQuZXF1YWxzKGEuaG90Tm9kZSkmJmEubGFzdENtZERpcmVjdGlvbj09PSEhYztTKGEsZnVuY3Rpb24oZCl7ZiYmYS5ob3ROb2RlJiZhLmhvdE5vZGUucmVtb3ZlKCk7ZFtjP1wiaW5zZXJ0QWZ0ZXJcIjpcImluc2VydEJlZm9yZVwiXShiKTtkLnNldEF0dHJpYnV0ZXMoe1wiZGF0YS1ja2UtbWFnaWNsaW5lLWhvdFwiOjEsXCJkYXRhLWNrZS1tYWdpY2xpbmUtZGlyXCI6ISFjfSk7YS5sYXN0Q21kRGlyZWN0aW9uPSEhY30pO3QuaWV8fGEuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUnx8YS5ob3ROb2RlLnNjcm9sbEludG9WaWV3KCk7YS5saW5lLmRldGFjaCgpfXJldHVybiBmdW5jdGlvbihiKXtiPWIuZ2V0U2VsZWN0aW9uKCkuZ2V0U3RhcnRFbGVtZW50KCk7XG52YXIgZTtiPWIuZ2V0QXNjZW5kYW50KFosMSk7aWYoIWFhKGEsYikmJmImJiFiLmVxdWFscyhhLmVkaXRhYmxlKSYmIWIuY29udGFpbnMoYS5lZGl0YWJsZSkpeyhlPVAoYikpJiZcImZhbHNlXCI9PWUuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpJiYoYj1lKTthLmVsZW1lbnQ9YjtlPXcoYSxiLCFjKTt2YXIgZjtuKGUpJiZlLmlzKGEudHJpZ2dlcnMpJiZlLmlzKG1hKSYmKCF3KGEsZSwhYyl8fChmPXcoYSxlLCFjKSkmJm4oZikmJmYuaXMoYS50cmlnZ2VycykpP2QoZSk6KGY9TyhhLGIpLG4oZikmJih3KGEsZiwhYyk/KGI9dyhhLGYsIWMpKSYmbihiKSYmYi5pcyhhLnRyaWdnZXJzKSYmZChmKTpkKGYpKSl9fX0oKX19ZnVuY3Rpb24gQShhLGMpe2lmKCFjfHxjLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWMuJClyZXR1cm4hMTt2YXIgZD1hLmxpbmU7cmV0dXJuIGQud3JhcC5lcXVhbHMoYyl8fGQud3JhcC5jb250YWlucyhjKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhJiZcbmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLiR9ZnVuY3Rpb24gdShhKXtpZighbihhKSlyZXR1cm4hMTt2YXIgYzsoYz1iYShhKSl8fChuKGEpPyhjPXtsZWZ0OjEscmlnaHQ6MSxjZW50ZXI6MX0sYz0hKCFjW2EuZ2V0Q29tcHV0ZWRTdHlsZShcImZsb2F0XCIpXSYmIWNbYS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKV0pKTpjPSExKTtyZXR1cm4gY31mdW5jdGlvbiBiYShhKXtyZXR1cm4hIXthYnNvbHV0ZToxLGZpeGVkOjF9W2EuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpXX1mdW5jdGlvbiBMKGEsYyl7cmV0dXJuIG4oYyk/Yy5pcyhhLnRyaWdnZXJzKTpudWxsfWZ1bmN0aW9uIGFhKGEsYyl7aWYoIWMpcmV0dXJuITE7Zm9yKHZhciBkPWMuZ2V0UGFyZW50cygxKSxiPWQubGVuZ3RoO2ItLTspZm9yKHZhciBlPWEudGFidUxpc3QubGVuZ3RoO2UtLTspaWYoZFtiXS5oYXNBdHRyaWJ1dGUoYS50YWJ1TGlzdFtlXSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gbmEoYSxcbmMsZCl7Yz1jW2Q/XCJnZXRMYXN0XCI6XCJnZXRGaXJzdFwiXShmdW5jdGlvbihiKXtyZXR1cm4gYS5pc1JlbGV2YW50KGIpJiYhYi5pcyhvYSl9KTtpZighYylyZXR1cm4hMTtyKGEsYyk7cmV0dXJuIGQ/Yy5zaXplLnRvcD5hLm1vdXNlLnk6Yy5zaXplLmJvdHRvbTxhLm1vdXNlLnl9ZnVuY3Rpb24gY2EoYSl7dmFyIGM9YS5lZGl0YWJsZSxkPWEubW91c2UsYj1hLnZpZXcsZT1hLnRyaWdnZXJPZmZzZXQ7SChhKTt2YXIgZj1kLnk+KGEuaW5JbmxpbmVNb2RlP2IuZWRpdGFibGUudG9wK2IuZWRpdGFibGUuaGVpZ2h0LzI6TWF0aC5taW4oYi5lZGl0YWJsZS5oZWlnaHQsYi5wYW5lLmhlaWdodCkvMiksYz1jW2Y/XCJnZXRMYXN0XCI6XCJnZXRGaXJzdFwiXShmdW5jdGlvbihhKXtyZXR1cm4hKEUoYSl8fEYoYSkpfSk7aWYoIWMpcmV0dXJuIG51bGw7QShhLGMpJiYoYz1hLmxpbmUud3JhcFtmP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIShFKGEpfHxGKGEpKX0pKTtcbmlmKCFuKGMpfHx1KGMpfHwhTChhLGMpKXJldHVybiBudWxsO3IoYSxjKTtyZXR1cm4hZiYmMDw9Yy5zaXplLnRvcCYmcShkLnksMCxjLnNpemUudG9wK2UpPyhhPWEuaW5JbmxpbmVNb2RlfHwwPT09Yi5zY3JvbGwueT9DOngsbmV3IHooW251bGwsYyxJLE0sYV0pKTpmJiZjLnNpemUuYm90dG9tPD1iLnBhbmUuaGVpZ2h0JiZxKGQueSxjLnNpemUuYm90dG9tLWUsYi5wYW5lLmhlaWdodCk/KGE9YS5pbklubGluZU1vZGV8fHEoYy5zaXplLmJvdHRvbSxiLnBhbmUuaGVpZ2h0LWUsYi5wYW5lLmhlaWdodCk/RDp4LG5ldyB6KFtjLG51bGwsZGEsTSxhXSkpOm51bGx9ZnVuY3Rpb24gZWEoYSl7dmFyIGM9YS5tb3VzZSxkPWEudmlldyxiPWEudHJpZ2dlck9mZnNldCxlPU8oYSk7aWYoIWUpcmV0dXJuIG51bGw7cihhLGUpO3ZhciBiPU1hdGgubWluKGIsMHxlLnNpemUub3V0ZXJIZWlnaHQvMiksZj1bXSxrLGg7aWYocShjLnksZS5zaXplLnRvcC0xLGUuc2l6ZS50b3ArYikpaD0hMTtlbHNlIGlmKHEoYy55LFxuZS5zaXplLmJvdHRvbS1iLGUuc2l6ZS5ib3R0b20rMSkpaD0hMDtlbHNlIHJldHVybiBudWxsO2lmKHUoZSl8fG5hKGEsZSxoKXx8ZS5nZXRQYXJlbnQoKS5pcyhmYSkpcmV0dXJuIG51bGw7dmFyIGc9dyhhLGUsIWgpO2lmKGcpe2lmKGcmJmcudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKXJldHVybiBudWxsO2lmKG4oZykpe2lmKHUoZyl8fCFMKGEsZyl8fGcuZ2V0UGFyZW50KCkuaXMoZmEpKXJldHVybiBudWxsO2Y9W2csZV1baD9cInJldmVyc2VcIjpcImNvbmNhdFwiXSgpLmNvbmNhdChbVCxNXSl9fWVsc2UgZS5lcXVhbHMoYS5lZGl0YWJsZVtoP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0oYS5pc1JlbGV2YW50KSk/KEgoYSksaCYmcShjLnksZS5zaXplLmJvdHRvbS1iLGQucGFuZS5oZWlnaHQpJiZxKGUuc2l6ZS5ib3R0b20sZC5wYW5lLmhlaWdodC1iLGQucGFuZS5oZWlnaHQpP2s9RDpxKGMueSwwLGUuc2l6ZS50b3ArYikmJihrPUMpKTprPXgsZj1bbnVsbCxlXVtoP1wicmV2ZXJzZVwiOlxuXCJjb25jYXRcIl0oKS5jb25jYXQoW2g/ZGE6SSxNLGssZS5lcXVhbHMoYS5lZGl0YWJsZVtoP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0oYS5pc1JlbGV2YW50KSk/aD9EOkM6eF0pO3JldHVybiAwIGluIGY/bmV3IHooZik6bnVsbH1mdW5jdGlvbiBVKGEsYyxkLGIpe2Zvcih2YXIgZT1jLmdldERvY3VtZW50UG9zaXRpb24oKSxmPXt9LGs9e30saD17fSxnPXt9LGw9eS5sZW5ndGg7bC0tOylmW3lbbF1dPXBhcnNlSW50KGMuZ2V0Q29tcHV0ZWRTdHlsZS5jYWxsKGMsXCJib3JkZXItXCIreVtsXStcIi13aWR0aFwiKSwxMCl8fDAsaFt5W2xdXT1wYXJzZUludChjLmdldENvbXB1dGVkU3R5bGUuY2FsbChjLFwicGFkZGluZy1cIit5W2xdKSwxMCl8fDAsa1t5W2xdXT1wYXJzZUludChjLmdldENvbXB1dGVkU3R5bGUuY2FsbChjLFwibWFyZ2luLVwiK3lbbF0pLDEwKXx8MDtkJiYhYnx8TihhLGIpO2cudG9wPWUueS0oZD8wOmEudmlldy5zY3JvbGwueSk7Zy5sZWZ0PWUueC0oZD8wOmEudmlldy5zY3JvbGwueCk7XG5nLm91dGVyV2lkdGg9Yy4kLm9mZnNldFdpZHRoO2cub3V0ZXJIZWlnaHQ9Yy4kLm9mZnNldEhlaWdodDtnLmhlaWdodD1nLm91dGVySGVpZ2h0LShoLnRvcCtoLmJvdHRvbStmLnRvcCtmLmJvdHRvbSk7Zy53aWR0aD1nLm91dGVyV2lkdGgtKGgubGVmdCtoLnJpZ2h0K2YubGVmdCtmLnJpZ2h0KTtnLmJvdHRvbT1nLnRvcCtnLm91dGVySGVpZ2h0O2cucmlnaHQ9Zy5sZWZ0K2cub3V0ZXJXaWR0aDthLmluSW5saW5lTW9kZSYmKGcuc2Nyb2xsPXt0b3A6Yy4kLnNjcm9sbFRvcCxsZWZ0OmMuJC5zY3JvbGxMZWZ0fSk7cmV0dXJuIHYoe2JvcmRlcjpmLHBhZGRpbmc6aCxtYXJnaW46ayxpZ25vcmVTY3JvbGw6ZH0sZywhMCl9ZnVuY3Rpb24gcihhLGMsZCl7aWYoIW4oYykpcmV0dXJuIGMuc2l6ZT1udWxsO2lmKCFjLnNpemUpYy5zaXplPXt9O2Vsc2UgaWYoYy5zaXplLmlnbm9yZVNjcm9sbD09ZCYmYy5zaXplLmRhdGU+bmV3IERhdGUtZ2EpcmV0dXJuIG51bGw7cmV0dXJuIHYoYy5zaXplLFxuVShhLGMsZCkse2RhdGU6K25ldyBEYXRlfSwhMCl9ZnVuY3Rpb24gSChhLGMpe2Eudmlldy5lZGl0YWJsZT1VKGEsYS5lZGl0YWJsZSxjLCEwKX1mdW5jdGlvbiBOKGEsYyl7YS52aWV3fHwoYS52aWV3PXt9KTt2YXIgZD1hLnZpZXc7aWYoISghYyYmZCYmZC5kYXRlPm5ldyBEYXRlLWdhKSl7dmFyIGI9YS53aW4sZD1iLmdldFNjcm9sbFBvc2l0aW9uKCksYj1iLmdldFZpZXdQYW5lU2l6ZSgpO3YoYS52aWV3LHtzY3JvbGw6e3g6ZC54LHk6ZC55LHdpZHRoOmEuZG9jLiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoLWIud2lkdGgsaGVpZ2h0OmEuZG9jLiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodC1iLmhlaWdodH0scGFuZTp7d2lkdGg6Yi53aWR0aCxoZWlnaHQ6Yi5oZWlnaHQsYm90dG9tOmIuaGVpZ2h0K2QueX0sZGF0ZTorbmV3IERhdGV9LCEwKX19ZnVuY3Rpb24gcGEoYSxjLGQsYil7Zm9yKHZhciBlPWIsZj1iLGs9MCxoPSExLGc9ITEsbD1hLnZpZXcucGFuZS5oZWlnaHQsXG5wPWEubW91c2U7cC55K2s8bCYmMDxwLnktazspe2h8fChoPWMoZSxiKSk7Z3x8KGc9YyhmLGIpKTshaCYmMDxwLnktayYmKGU9ZChhLHt4OnAueCx5OnAueS1rfSkpOyFnJiZwLnkrazxsJiYoZj1kKGEse3g6cC54LHk6cC55K2t9KSk7aWYoaCYmZylicmVhaztrKz0yfXJldHVybiBuZXcgeihbZSxmLG51bGwsbnVsbF0pfUNLRURJVE9SLnBsdWdpbnMuYWRkKFwibWFnaWNsaW5lXCIse2luaXQ6ZnVuY3Rpb24oYSl7dmFyIGM9YS5jb25maWcsZD1jLm1hZ2ljbGluZV90cmlnZ2VyT2Zmc2V0fHwzMCxiPXtlZGl0b3I6YSxlbnRlck1vZGU6Yy5lbnRlck1vZGUsdHJpZ2dlck9mZnNldDpkLGhvbGREaXN0YW5jZTowfGQqKGMubWFnaWNsaW5lX2hvbGREaXN0YW5jZXx8LjUpLGJveENvbG9yOmMubWFnaWNsaW5lX2NvbG9yfHxcIiNmZjAwMDBcIixydGw6XCJydGxcIj09Yy5jb250ZW50c0xhbmdEaXJlY3Rpb24sdGFidUxpc3Q6W1wiZGF0YS1ja2UtaGlkZGVuLXNlbFwiXS5jb25jYXQoYy5tYWdpY2xpbmVfdGFidUxpc3R8fFxuW10pLHRyaWdnZXJzOmMubWFnaWNsaW5lX2V2ZXJ5d2hlcmU/Wjp7dGFibGU6MSxocjoxLGRpdjoxLHVsOjEsb2w6MSxkbDoxLGZvcm06MSxibG9ja3F1b3RlOjF9fSxlLGYsaztiLmlzUmVsZXZhbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oYSkmJiFBKGIsYSkmJiF1KGEpfTthLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7dmFyIGQ9YS5lZGl0YWJsZSgpLGc9YS5kb2N1bWVudCxsPWEud2luZG93O3YoYix7ZWRpdGFibGU6ZCxpbklubGluZU1vZGU6ZC5pc0lubGluZSgpLGRvYzpnLHdpbjpsLGhvdE5vZGU6bnVsbH0sITApO2IuYm91bmRhcnk9Yi5pbklubGluZU1vZGU/Yi5lZGl0YWJsZTpiLmRvYy5nZXREb2N1bWVudEVsZW1lbnQoKTtkLmlzKEIuJGlubGluZSl8fChiLmluSW5saW5lTW9kZSYmIWJhKGQpJiZkLnNldFN0eWxlcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDpudWxsLGxlZnQ6bnVsbH0pLGxhLmNhbGwodGhpcyxiKSxOKGIpLGQuYXR0YWNoTGlzdGVuZXIoYSxcImJlZm9yZVVuZG9JbWFnZVwiLFxuZnVuY3Rpb24oKXtiLmxpbmUuZGV0YWNoKCl9KSxkLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVHZXREYXRhXCIsZnVuY3Rpb24oKXtiLmxpbmUud3JhcC5nZXRQYXJlbnQoKSYmKGIubGluZS5kZXRhY2goKSxhLm9uY2UoXCJnZXREYXRhXCIsZnVuY3Rpb24oKXtiLmxpbmUuYXR0YWNoKCl9LG51bGwsbnVsbCwxRTMpKX0sbnVsbCxudWxsLDApLGQuYXR0YWNoTGlzdGVuZXIoYi5pbklubGluZU1vZGU/ZzpnLmdldFdpbmRvdygpLmdldEZyYW1lKCksXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGMpe2lmKFwid3lzaXd5Z1wiPT1hLm1vZGUpaWYoYi5pbklubGluZU1vZGUpe3ZhciBkPWMuZGF0YS4kLmNsaWVudFg7Yz1jLmRhdGEuJC5jbGllbnRZO04oYik7SChiLCEwKTt2YXIgZT1iLnZpZXcuZWRpdGFibGUsZj1iLnZpZXcuc2Nyb2xsO2Q+ZS5sZWZ0LWYueCYmZDxlLnJpZ2h0LWYueCYmYz5lLnRvcC1mLnkmJmM8ZS5ib3R0b20tZi55fHwoY2xlYXJUaW1lb3V0KGspLGs9bnVsbCxiLmxpbmUuZGV0YWNoKCkpfWVsc2UgY2xlYXJUaW1lb3V0KGspLFxuaz1udWxsLGIubGluZS5kZXRhY2goKX0pLGQuYXR0YWNoTGlzdGVuZXIoZCxcImtleXVwXCIsZnVuY3Rpb24oKXtiLmhpZGRlbk1vZGU9MH0pLGQuYXR0YWNoTGlzdGVuZXIoZCxcImtleWRvd25cIixmdW5jdGlvbihjKXtpZihcInd5c2l3eWdcIj09YS5tb2RlKXN3aXRjaChjLmRhdGEuZ2V0S2V5c3Ryb2tlKCkpe2Nhc2UgMjIyODI0MDpjYXNlIDE2OmIuaGlkZGVuTW9kZT0xLGIubGluZS5kZXRhY2goKX19KSxkLmF0dGFjaExpc3RlbmVyKGIuaW5JbmxpbmVNb2RlP2Q6ZyxcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKGMpe2Y9ITA7aWYoXCJ3eXNpd3lnXCI9PWEubW9kZSYmIWEucmVhZE9ubHkmJiFrKXt2YXIgZD17eDpjLmRhdGEuJC5jbGllbnRYLHk6Yy5kYXRhLiQuY2xpZW50WX07az1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5tb3VzZT1kO2s9Yi50cmlnZ2VyPW51bGw7TihiKTtmJiYhYi5oaWRkZW5Nb2RlJiZhLmZvY3VzTWFuYWdlci5oYXNGb2N1cyYmIWIubGluZS5tb3VzZU5lYXIoKSYmKGIuZWxlbWVudD1cbmhhKGIsITApKSYmKChiLnRyaWdnZXI9Y2EoYil8fGVhKGIpfHxpYShiKSkmJiFhYShiLGIudHJpZ2dlci51cHBlcnx8Yi50cmlnZ2VyLmxvd2VyKT9iLmxpbmUuYXR0YWNoKCkucGxhY2UoKTooYi50cmlnZ2VyPW51bGwsYi5saW5lLmRldGFjaCgpKSxmPSExKX0sMzApfX0pLGQuYXR0YWNoTGlzdGVuZXIobCxcInNjcm9sbFwiLGZ1bmN0aW9uKCl7XCJ3eXNpd3lnXCI9PWEubW9kZSYmKGIubGluZS5kZXRhY2goKSx0LndlYmtpdCYmKGIuaGlkZGVuTW9kZT0xLGNsZWFyVGltZW91dChlKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLm1vdXNlRG93bnx8KGIuaGlkZGVuTW9kZT0wKX0sNTApKSl9KSxkLmF0dGFjaExpc3RlbmVyKGphP2c6bCxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKCl7XCJ3eXNpd3lnXCI9PWEubW9kZSYmKGIubGluZS5kZXRhY2goKSxiLmhpZGRlbk1vZGU9MSxiLm1vdXNlRG93bj0xKX0pLGQuYXR0YWNoTGlzdGVuZXIoamE/ZzpsLFwibW91c2V1cFwiLGZ1bmN0aW9uKCl7Yi5oaWRkZW5Nb2RlPVxuMDtiLm1vdXNlRG93bj0wfSksYS5hZGRDb21tYW5kKFwiYWNjZXNzUHJldmlvdXNTcGFjZVwiLFkoYikpLGEuYWRkQ29tbWFuZChcImFjY2Vzc05leHRTcGFjZVwiLFkoYiwhMCkpLGEuc2V0S2V5c3Ryb2tlKFtbYy5tYWdpY2xpbmVfa2V5c3Ryb2tlUHJldmlvdXMsXCJhY2Nlc3NQcmV2aW91c1NwYWNlXCJdLFtjLm1hZ2ljbGluZV9rZXlzdHJva2VOZXh0LFwiYWNjZXNzTmV4dFNwYWNlXCJdXSksYS5vbihcImxvYWRTbmFwc2hvdFwiLGZ1bmN0aW9uKCl7dmFyIGMsZCxlLGY7Zm9yKGYgaW57cDoxLGJyOjEsZGl2OjF9KWZvcihjPWEuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhmKSxlPWMuY291bnQoKTtlLS07KWlmKChkPWMuZ2V0SXRlbShlKSkuZGF0YShcImNrZS1tYWdpY2xpbmUtaG90XCIpKXtiLmhvdE5vZGU9ZDtiLmxhc3RDbWREaXJlY3Rpb249XCJ0cnVlXCI9PT1kLmRhdGEoXCJja2UtbWFnaWNsaW5lLWRpclwiKT8hMDohMTtyZXR1cm59fSksdGhpcy5iYWNrZG9vcj17YWNjZXNzRm9jdXNTcGFjZTpTLFxuYm94VHJpZ2dlcjp6LGlzTGluZTpBLGdldEFzY2VuZGFudFRyaWdnZXI6TyxnZXROb25FbXB0eU5laWdoYm91cjp3LGdldFNpemU6VSx0aGF0OmIsdHJpZ2dlckVkZ2U6ZWEsdHJpZ2dlckVkaXRhYmxlOmNhLHRyaWdnZXJFeHBhbmQ6aWF9KX0sdGhpcyl9fSk7dmFyIHY9Q0tFRElUT1IudG9vbHMuZXh0ZW5kLFI9Q0tFRElUT1IuZG9tLmVsZW1lbnQsRz1SLmNyZWF0ZUZyb21IdG1sLHQ9Q0tFRElUT1IuZW52LGphPUNLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbixCPUNLRURJVE9SLmR0ZCxLPXt9LEk9MTI4LGRhPTY0LFQ9MzIsTT0xNixDPTQsRD0yLHg9MSxKPVwiwqBcIixmYT1CLiRsaXN0SXRlbSxvYT1CLiR0YWJsZUNvbnRlbnQsbWE9dih7fSxCLiRub25FZGl0YWJsZSxCLiRlbXB0eSksWj1CLiRibG9jayxnYT0xMDAsUT1cIndpZHRoOjBweDtoZWlnaHQ6MHB4O3BhZGRpbmc6MHB4O21hcmdpbjowcHg7ZGlzcGxheTpibG9jazt6LWluZGV4Ojk5OTk7Y29sb3I6I2ZmZjtwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6IDBweDtsaW5lLWhlaWdodDowcHg7XCIsXG5YPVErXCJib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7ZGlzcGxheTpibG9jaztib3JkZXItc3R5bGU6c29saWQ7XCIsVz1cIlxceDNjc3BhblxceDNlXCIrSitcIlxceDNjL3NwYW5cXHgzZVwiO0tbQ0tFRElUT1IuRU5URVJfQlJdPVwiYnJcIjtLW0NLRURJVE9SLkVOVEVSX1BdPVwicFwiO0tbQ0tFRElUT1IuRU5URVJfRElWXT1cImRpdlwiO3oucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxjLGQpe3RoaXMucHJvcGVydGllcz1hK2MrKGR8fHgpO3JldHVybiB0aGlzfSxpczpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5wcm9wZXJ0aWVzJmEpPT1hfX07dmFyIGhhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGQpe3ZhciBiPWEuJC5lbGVtZW50RnJvbVBvaW50KGQueCxkLnkpO3JldHVybiBiJiZiLm5vZGVUeXBlP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChiKTpudWxsfXJldHVybiBmdW5jdGlvbihjLGQsYil7aWYoIWMubW91c2UpcmV0dXJuIG51bGw7dmFyIGU9Yy5kb2MsZj1jLmxpbmUud3JhcDtiPWJ8fGMubW91c2U7XG52YXIgaz1hKGUsYik7ZCYmQShjLGspJiYoZi5oaWRlKCksaz1hKGUsYiksZi5zaG93KCkpO3JldHVybiFrfHxrLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWsuJHx8dC5pZSYmOT50LnZlcnNpb24mJiFjLmJvdW5kYXJ5LmVxdWFscyhrKSYmIWMuYm91bmRhcnkuY29udGFpbnMoayk/bnVsbDprfX0oKSxFPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxGPUNLRURJVE9SLmRvbS53YWxrZXIubm9kZVR5cGUoQ0tFRElUT1IuTk9ERV9DT01NRU5UKSxpYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9YS5lbGVtZW50LGUsZixrO2lmKCFuKGIpfHxiLmNvbnRhaW5zKGEuZWRpdGFibGUpfHxiLmlzUmVhZE9ubHkoKSlyZXR1cm4gbnVsbDtrPXBhKGEsZnVuY3Rpb24oYSxiKXtyZXR1cm4hYi5lcXVhbHMoYSl9LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGhhKGEsITAsYil9LGIpO2U9ay51cHBlcjtmPWsubG93ZXI7aWYoVihhLGUsZikpcmV0dXJuIGsuc2V0KFQsXG44KTtpZihlJiZiLmNvbnRhaW5zKGUpKWZvcig7IWUuZ2V0UGFyZW50KCkuZXF1YWxzKGIpOyllPWUuZ2V0UGFyZW50KCk7ZWxzZSBlPWIuZ2V0Rmlyc3QoZnVuY3Rpb24oYil7cmV0dXJuIGMoYSxiKX0pO2lmKGYmJmIuY29udGFpbnMoZikpZm9yKDshZi5nZXRQYXJlbnQoKS5lcXVhbHMoYik7KWY9Zi5nZXRQYXJlbnQoKTtlbHNlIGY9Yi5nZXRMYXN0KGZ1bmN0aW9uKGIpe3JldHVybiBjKGEsYil9KTtpZighZXx8IWYpcmV0dXJuIG51bGw7cihhLGUpO3IoYSxmKTtpZighcShhLm1vdXNlLnksZS5zaXplLnRvcCxmLnNpemUuYm90dG9tKSlyZXR1cm4gbnVsbDtmb3IodmFyIGI9TnVtYmVyLk1BWF9WQUxVRSxoLGcsbCxwO2YmJiFmLmVxdWFscyhlKSYmKGc9ZS5nZXROZXh0KGEuaXNSZWxldmFudCkpOyloPU1hdGguYWJzKGthKGEsZSxnKS1hLm1vdXNlLnkpLGg8YiYmKGI9aCxsPWUscD1nKSxlPWcscihhLGUpO2lmKCFsfHwhcHx8IXEoYS5tb3VzZS55LGwuc2l6ZS50b3AscC5zaXplLmJvdHRvbSkpcmV0dXJuIG51bGw7XG5rLnVwcGVyPWw7ay5sb3dlcj1wO3JldHVybiBrLnNldChULDgpfWZ1bmN0aW9uIGMoYSxiKXtyZXR1cm4hKGImJmIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfHxGKGIpfHx1KGIpfHxBKGEsYil8fGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLiQmJmIuaXMoXCJiclwiKSl9cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBiPWEoYyksZTtpZihlPWIpe2U9Yi51cHBlcjt2YXIgZj1iLmxvd2VyO2U9IWV8fCFmfHx1KGYpfHx1KGUpfHxmLmVxdWFscyhlKXx8ZS5lcXVhbHMoZil8fGYuY29udGFpbnMoZSl8fGUuY29udGFpbnMoZik/ITE6TChjLGUpJiZMKGMsZikmJlYoYyxlLGYpPyEwOiExfXJldHVybiBlP2I6bnVsbH19KCkseT1bXCJ0b3BcIixcImxlZnRcIixcInJpZ2h0XCIsXCJib3R0b21cIl19KSgpO0NLRURJVE9SLmNvbmZpZy5tYWdpY2xpbmVfa2V5c3Ryb2tlUHJldmlvdXM9Q0tFRElUT1IuQ1RSTCtDS0VESVRPUi5TSElGVCs1MTtcbkNLRURJVE9SLmNvbmZpZy5tYWdpY2xpbmVfa2V5c3Ryb2tlTmV4dD1DS0VESVRPUi5DVFJMK0NLRURJVE9SLlNISUZUKzUyOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG4oYSl7aWYoIWF8fGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxcImZvcm1cIiE9YS5nZXROYW1lKCkpcmV0dXJuW107Zm9yKHZhciBlPVtdLGY9W1wic3R5bGVcIixcImNsYXNzTmFtZVwiXSxiPTA7YjxmLmxlbmd0aDtiKyspe3ZhciBjPWEuJC5lbGVtZW50cy5uYW1lZEl0ZW0oZltiXSk7YyYmKGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGMpLGUucHVzaChbYyxjLm5leHRTaWJsaW5nXSksYy5yZW1vdmUoKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdChhLGUpe2lmKGEmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImZvcm1cIj09YS5nZXROYW1lKCkmJjA8ZS5sZW5ndGgpZm9yKHZhciBmPWUubGVuZ3RoLTE7MDw9ZjtmLS0pe3ZhciBiPWVbZl1bMF0sYz1lW2ZdWzFdO2M/Yi5pbnNlcnRCZWZvcmUoYyk6Yi5hcHBlbmRUbyhhKX19ZnVuY3Rpb24gcihhLGUpe3ZhciBmPW4oYSksYj17fSxjPWEuJDtlfHwoYltcImNsYXNzXCJdPWMuY2xhc3NOYW1lfHxcblwiXCIsYy5jbGFzc05hbWU9XCJcIik7Yi5pbmxpbmU9Yy5zdHlsZS5jc3NUZXh0fHxcIlwiO2V8fChjLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjogc3RhdGljOyBvdmVyZmxvdzogdmlzaWJsZVwiKTt0KGYpO3JldHVybiBifWZ1bmN0aW9uIHUoYSxlKXt2YXIgZj1uKGEpLGI9YS4kO1wiY2xhc3NcImluIGUmJihiLmNsYXNzTmFtZT1lW1wiY2xhc3NcIl0pO1wiaW5saW5lXCJpbiBlJiYoYi5zdHlsZS5jc3NUZXh0PWUuaW5saW5lKTt0KGYpfWZ1bmN0aW9uIHYoYSl7aWYoIWEuZWRpdGFibGUoKS5pc0lubGluZSgpKXt2YXIgZT1DS0VESVRPUi5pbnN0YW5jZXMsZjtmb3IoZiBpbiBlKXt2YXIgYj1lW2ZdO1wid3lzaXd5Z1wiIT1iLm1vZGV8fGIucmVhZE9ubHl8fChiPWIuZG9jdW1lbnQuZ2V0Qm9keSgpLGIuc2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIsITEpLGIuc2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIsITApKX1hLmVkaXRhYmxlKCkuaGFzRm9jdXMmJihhLnRvb2xib3guZm9jdXMoKSxcbmEuZm9jdXMoKSl9fUNLRURJVE9SLnBsdWdpbnMuYWRkKFwibWF4aW1pemVcIix7aW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBlKCl7dmFyIGI9Yy5nZXRWaWV3UGFuZVNpemUoKTthLnJlc2l6ZShiLndpZHRoLGIuaGVpZ2h0LG51bGwsITApfWlmKGEuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUpe3ZhciBmPWEubGFuZyxiPUNLRURJVE9SLmRvY3VtZW50LGM9Yi5nZXRXaW5kb3coKSxsLG0scCxuPUNLRURJVE9SLlRSSVNUQVRFX09GRjthLmFkZENvbW1hbmQoXCJtYXhpbWl6ZVwiLHttb2Rlczp7d3lzaXd5ZzohQ0tFRElUT1IuZW52LmlPUyxzb3VyY2U6IUNLRURJVE9SLmVudi5pT1N9LHJlYWRPbmx5OjEsZWRpdG9yRm9jdXM6ITEsZXhlYzpmdW5jdGlvbigpe3ZhciBoPWEuY29udGFpbmVyLmdldEZpcnN0KGZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5oYXNDbGFzcyhcImNrZV9pbm5lclwiKX0pLGc9YS51aS5zcGFjZShcImNvbnRlbnRzXCIpO1xuaWYoXCJ3eXNpd3lnXCI9PWEubW9kZSl7dmFyIGQ9YS5nZXRTZWxlY3Rpb24oKTtsPWQmJmQuZ2V0UmFuZ2VzKCk7bT1jLmdldFNjcm9sbFBvc2l0aW9uKCl9ZWxzZXt2YXIgaz1hLmVkaXRhYmxlKCkuJDtsPSFDS0VESVRPUi5lbnYuaWUmJltrLnNlbGVjdGlvblN0YXJ0LGsuc2VsZWN0aW9uRW5kXTttPVtrLnNjcm9sbExlZnQsay5zY3JvbGxUb3BdfWlmKHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRil7Yy5vbihcInJlc2l6ZVwiLGUpO3A9Yy5nZXRTY3JvbGxQb3NpdGlvbigpO2ZvcihkPWEuY29udGFpbmVyO2Q9ZC5nZXRQYXJlbnQoKTspZC5zZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIscihkKSksZC5zZXRTdHlsZShcInotaW5kZXhcIixhLmNvbmZpZy5iYXNlRmxvYXRaSW5kZXgtNSk7Zy5zZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIscihnLCEwKSk7aC5zZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIscihoLCEwKSk7XG5nPXtvdmVyZmxvdzpDS0VESVRPUi5lbnYud2Via2l0P1wiXCI6XCJoaWRkZW5cIix3aWR0aDowLGhlaWdodDowfTtiLmdldERvY3VtZW50RWxlbWVudCgpLnNldFN0eWxlcyhnKTshQ0tFRElUT1IuZW52LmdlY2tvJiZiLmdldERvY3VtZW50RWxlbWVudCgpLnNldFN0eWxlKFwicG9zaXRpb25cIixcImZpeGVkXCIpO0NLRURJVE9SLmVudi5nZWNrbyYmQ0tFRElUT1IuZW52LnF1aXJrc3x8Yi5nZXRCb2R5KCkuc2V0U3R5bGVzKGcpO0NLRURJVE9SLmVudi5pZT9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy4kLnNjcm9sbFRvKDAsMCl9LDApOmMuJC5zY3JvbGxUbygwLDApO2guc2V0U3R5bGUoXCJwb3NpdGlvblwiLENLRURJVE9SLmVudi5nZWNrbyYmQ0tFRElUT1IuZW52LnF1aXJrcz9cImZpeGVkXCI6XCJhYnNvbHV0ZVwiKTtoLiQub2Zmc2V0TGVmdDtoLnNldFN0eWxlcyh7XCJ6LWluZGV4XCI6YS5jb25maWcuYmFzZUZsb2F0WkluZGV4LTUsbGVmdDpcIjBweFwiLHRvcDpcIjBweFwifSk7aC5hZGRDbGFzcyhcImNrZV9tYXhpbWl6ZWRcIik7XG5lKCk7Zz1oLmdldERvY3VtZW50UG9zaXRpb24oKTtoLnNldFN0eWxlcyh7bGVmdDotMSpnLngrXCJweFwiLHRvcDotMSpnLnkrXCJweFwifSk7Q0tFRElUT1IuZW52LmdlY2tvJiZ2KGEpfWVsc2UgaWYodGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04pe2MucmVtb3ZlTGlzdGVuZXIoXCJyZXNpemVcIixlKTtmb3IodmFyIGQ9W2csaF0scT0wO3E8ZC5sZW5ndGg7cSsrKXUoZFtxXSxkW3FdLmdldEN1c3RvbURhdGEoXCJtYXhpbWl6ZV9zYXZlZF9zdHlsZXNcIikpLGRbcV0ucmVtb3ZlQ3VzdG9tRGF0YShcIm1heGltaXplX3NhdmVkX3N0eWxlc1wiKTtmb3IoZD1hLmNvbnRhaW5lcjtkPWQuZ2V0UGFyZW50KCk7KXUoZCxkLmdldEN1c3RvbURhdGEoXCJtYXhpbWl6ZV9zYXZlZF9zdHlsZXNcIikpLGQucmVtb3ZlQ3VzdG9tRGF0YShcIm1heGltaXplX3NhdmVkX3N0eWxlc1wiKTtDS0VESVRPUi5lbnYuaWU/c2V0VGltZW91dChmdW5jdGlvbigpe2MuJC5zY3JvbGxUbyhwLngscC55KX0sMCk6Yy4kLnNjcm9sbFRvKHAueCxcbnAueSk7aC5yZW1vdmVDbGFzcyhcImNrZV9tYXhpbWl6ZWRcIik7Q0tFRElUT1IuZW52LndlYmtpdCYmKGguc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJpbmxpbmVcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2guc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKX0sMCkpO2EuZmlyZShcInJlc2l6ZVwiLHtvdXRlckhlaWdodDphLmNvbnRhaW5lci4kLm9mZnNldEhlaWdodCxjb250ZW50c0hlaWdodDpnLiQub2Zmc2V0SGVpZ2h0LG91dGVyV2lkdGg6YS5jb250YWluZXIuJC5vZmZzZXRXaWR0aH0pfXRoaXMudG9nZ2xlU3RhdGUoKTtpZihkPXRoaXMudWlJdGVtc1swXSlnPXRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRj9mLm1heGltaXplLm1heGltaXplOmYubWF4aW1pemUubWluaW1pemUsZD1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGQuXy5pZCksZC5nZXRDaGlsZCgxKS5zZXRIdG1sKGcpLGQuc2V0QXR0cmlidXRlKFwidGl0bGVcIixnKSxkLnNldEF0dHJpYnV0ZShcImhyZWZcIiwnamF2YXNjcmlwdDp2b2lkKFwiJytcbmcrJ1wiKTsnKTtcInd5c2l3eWdcIj09YS5tb2RlP2w/KENLRURJVE9SLmVudi5nZWNrbyYmdihhKSxhLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhsKSwoaz1hLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0RWxlbWVudCgpKSYmay5zY3JvbGxJbnRvVmlldyghMCkpOmMuJC5zY3JvbGxUbyhtLngsbS55KToobCYmKGsuc2VsZWN0aW9uU3RhcnQ9bFswXSxrLnNlbGVjdGlvbkVuZD1sWzFdKSxrLnNjcm9sbExlZnQ9bVswXSxrLnNjcm9sbFRvcD1tWzFdKTtsPW09bnVsbDtuPXRoaXMuc3RhdGU7YS5maXJlKFwibWF4aW1pemVcIix0aGlzLnN0YXRlKX0sY2FuVW5kbzohMX0pO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIk1heGltaXplXCIse2xhYmVsOmYubWF4aW1pemUubWF4aW1pemUsY29tbWFuZDpcIm1heGltaXplXCIsdG9vbGJhcjpcInRvb2xzLDEwXCJ9KTthLm9uKFwibW9kZVwiLGZ1bmN0aW9uKCl7dmFyIGI9YS5nZXRDb21tYW5kKFwibWF4aW1pemVcIik7Yi5zZXRTdGF0ZShiLnN0YXRlPT1cbkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEP0NLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOm4pfSxudWxsLG51bGwsMTAwKX19fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwibmV3cGFnZVwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuYWRkQ29tbWFuZChcIm5ld3BhZ2VcIix7bW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0sZXhlYzpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2Iuc2V0RGF0YShiLmNvbmZpZy5uZXdwYWdlX2h0bWx8fFwiXCIsZnVuY3Rpb24oKXtiLmZvY3VzKCk7c2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcImFmdGVyQ29tbWFuZEV4ZWNcIix7bmFtZTpcIm5ld3BhZ2VcIixjb21tYW5kOmF9KTtiLnNlbGVjdGlvbkNoYW5nZSgpfSwyMDApfSl9LGFzeW5jOiEwfSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiTmV3UGFnZVwiLHtsYWJlbDphLmxhbmcubmV3cGFnZS50b29sYmFyLGNvbW1hbmQ6XCJuZXdwYWdlXCIsdG9vbGJhcjpcImRvY3VtZW50LDIwXCJ9KX19KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGEpe3JldHVybntcImFyaWEtbGFiZWxcIjphLFwiY2xhc3NcIjpcImNrZV9wYWdlYnJlYWtcIixjb250ZW50ZWRpdGFibGU6XCJmYWxzZVwiLFwiZGF0YS1ja2UtZGlzcGxheS1uYW1lXCI6XCJwYWdlYnJlYWtcIixcImRhdGEtY2tlLXBhZ2VicmVha1wiOjEsc3R5bGU6XCJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXNcIix0aXRsZTphfX1DS0VESVRPUi5wbHVnaW5zLmFkZChcInBhZ2VicmVha1wiLHtyZXF1aXJlczpcImZha2VvYmplY3RzXCIsb25Mb2FkOmZ1bmN0aW9uKCl7dmFyIGE9KFwiYmFja2dyb3VuZDp1cmwoXCIrQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImltYWdlcy9wYWdlYnJlYWsuZ2lmXCIpK1wiKSBuby1yZXBlYXQgY2VudGVyIGNlbnRlcjtjbGVhcjpib3RoO3dpZHRoOjEwMCU7Ym9yZGVyLXRvcDojOTk5IDFweCBkb3R0ZWQ7Ym9yZGVyLWJvdHRvbTojOTk5IDFweCBkb3R0ZWQ7cGFkZGluZzowO2hlaWdodDo3cHg7Y3Vyc29yOmRlZmF1bHQ7XCIpLnJlcGxhY2UoLzsvZyxcblwiICFpbXBvcnRhbnQ7XCIpO0NLRURJVE9SLmFkZENzcyhcImRpdi5ja2VfcGFnZWJyZWFre1wiK2ErXCJ9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe2EuYmxvY2tsZXNzfHwoYS5hZGRDb21tYW5kKFwicGFnZWJyZWFrXCIsQ0tFRElUT1IucGx1Z2lucy5wYWdlYnJlYWtDbWQpLGEudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlBhZ2VCcmVha1wiLHtsYWJlbDphLmxhbmcucGFnZWJyZWFrLnRvb2xiYXIsY29tbWFuZDpcInBhZ2VicmVha1wiLHRvb2xiYXI6XCJpbnNlcnQsNzBcIn0pLENLRURJVE9SLmVudi53ZWJraXQmJmEub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXthLmRvY3VtZW50Lm9uKFwiY2xpY2tcIixmdW5jdGlvbihiKXtiPWIuZGF0YS5nZXRUYXJnZXQoKTtiLmlzKFwiZGl2XCIpJiZiLmhhc0NsYXNzKFwiY2tlX3BhZ2VicmVha1wiKSYmYS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RFbGVtZW50KGIpfSl9KSl9LGFmdGVySW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGYpe0NLRURJVE9SLnRvb2xzLmV4dGVuZChmLmF0dHJpYnV0ZXMsXG5lKGEubGFuZy5wYWdlYnJlYWsuYWx0KSwhMCk7Zi5jaGlsZHJlbi5sZW5ndGg9MH12YXIgYz1hLmRhdGFQcm9jZXNzb3IsZz1jJiZjLmRhdGFGaWx0ZXIsYz1jJiZjLmh0bWxGaWx0ZXIsaD0vcGFnZS1icmVhay1hZnRlclxccyo6XFxzKmFsd2F5cy9pLGs9L2Rpc3BsYXlcXHMqOlxccypub25lL2k7YyYmYy5hZGRSdWxlcyh7YXR0cmlidXRlczp7XCJjbGFzc1wiOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5yZXBsYWNlKFwiY2tlX3BhZ2VicmVha1wiLFwiXCIpO2lmKGMhPWEpe3ZhciBkPUNLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWwoJ1xceDNjc3BhbiBzdHlsZVxceDNkXCJkaXNwbGF5OiBub25lO1wiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlJykuY2hpbGRyZW5bMF07Yi5jaGlsZHJlbi5sZW5ndGg9MDtiLmFkZChkKTtkPWIuYXR0cmlidXRlcztkZWxldGUgZFtcImFyaWEtbGFiZWxcIl07ZGVsZXRlIGQuY29udGVudGVkaXRhYmxlO2RlbGV0ZSBkLnRpdGxlfXJldHVybiBjfX19LHthcHBseVRvQWxsOiEwLFxucHJpb3JpdHk6NX0pO2cmJmcuYWRkUnVsZXMoe2VsZW1lbnRzOntkaXY6ZnVuY3Rpb24oYSl7aWYoYS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtcGFnZWJyZWFrXCJdKWIoYSk7ZWxzZSBpZihoLnRlc3QoYS5hdHRyaWJ1dGVzLnN0eWxlKSl7dmFyIGM9YS5jaGlsZHJlblswXTtjJiZcInNwYW5cIj09Yy5uYW1lJiZrLnRlc3QoYy5hdHRyaWJ1dGVzLnN0eWxlKSYmYihhKX19fX0pfX0pO0NLRURJVE9SLnBsdWdpbnMucGFnZWJyZWFrQ21kPXtleGVjOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiLHthdHRyaWJ1dGVzOmUoYS5sYW5nLnBhZ2VicmVhay5hbHQpfSk7YS5pbnNlcnRFbGVtZW50KGIpfSxjb250ZXh0OlwiZGl2XCIsYWxsb3dlZENvbnRlbnQ6e2Rpdjp7c3R5bGVzOlwiIXBhZ2UtYnJlYWstYWZ0ZXJcIn0sc3Bhbjp7bWF0Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9YS5wYXJlbnQpJiZcImRpdlwiPT1hLm5hbWUmJmEuc3R5bGVzJiZhLnN0eWxlc1tcInBhZ2UtYnJlYWstYWZ0ZXJcIl19LFxuc3R5bGVzOlwiZGlzcGxheVwifX0scmVxdWlyZWRDb250ZW50OlwiZGl2e3BhZ2UtYnJlYWstYWZ0ZXJ9XCJ9fSkoKTsoZnVuY3Rpb24oKXt2YXIgYz17Y2FuVW5kbzohMSxhc3luYzohMCxleGVjOmZ1bmN0aW9uKGEpe2EuZ2V0Q2xpcGJvYXJkRGF0YSh7dGl0bGU6YS5sYW5nLnBhc3RldGV4dC50aXRsZX0sZnVuY3Rpb24oYil7YiYmYS5maXJlKFwicGFzdGVcIix7dHlwZTpcInRleHRcIixkYXRhVmFsdWU6Yi5kYXRhVmFsdWUsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaW5pdFBhc3RlRGF0YVRyYW5zZmVyKCl9KTthLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJwYXN0ZXRleHRcIixjb21tYW5kOmMscmV0dXJuVmFsdWU6ISFifSl9KX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicGFzdGV0ZXh0XCIse3JlcXVpcmVzOlwiY2xpcGJvYXJkXCIsaW5pdDpmdW5jdGlvbihhKXthLmFkZENvbW1hbmQoXCJwYXN0ZXRleHRcIixjKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJQYXN0ZVRleHRcIix7bGFiZWw6YS5sYW5nLnBhc3RldGV4dC5idXR0b24sXG5jb21tYW5kOlwicGFzdGV0ZXh0XCIsdG9vbGJhcjpcImNsaXBib2FyZCw0MFwifSk7aWYoYS5jb25maWcuZm9yY2VQYXN0ZUFzUGxhaW5UZXh0KWEub24oXCJiZWZvcmVQYXN0ZVwiLGZ1bmN0aW9uKGEpe1wiaHRtbFwiIT1hLmRhdGEudHlwZSYmKGEuZGF0YS50eXBlPVwidGV4dFwiKX0pO2Eub24oXCJwYXN0ZVN0YXRlXCIsZnVuY3Rpb24oYil7YS5nZXRDb21tYW5kKFwicGFzdGV0ZXh0XCIpLnNldFN0YXRlKGIuZGF0YSl9KX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gaChhLGQsZil7dmFyIGI9Q0tFRElUT1IuY2xlYW5Xb3JkO2I/ZigpOihhPUNLRURJVE9SLmdldFVybChhLmNvbmZpZy5wYXN0ZUZyb21Xb3JkQ2xlYW51cEZpbGV8fGQrXCJmaWx0ZXIvZGVmYXVsdC5qc1wiKSxDS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChhLGYsbnVsbCwhMCkpO3JldHVybiFifWZ1bmN0aW9uIGsoYSl7YS5kYXRhLnR5cGU9XCJodG1sXCJ9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJwYXN0ZWZyb213b3JkXCIse3JlcXVpcmVzOlwiY2xpcGJvYXJkXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgZD0wLGY9dGhpcy5wYXRoO2EuYWRkQ29tbWFuZChcInBhc3RlZnJvbXdvcmRcIix7Y2FuVW5kbzohMSxhc3luYzohMCxleGVjOmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXM7ZD0xO2Eub25jZShcImJlZm9yZVBhc3RlXCIsayk7YS5nZXRDbGlwYm9hcmREYXRhKHt0aXRsZTphLmxhbmcucGFzdGVmcm9td29yZC50aXRsZX0sZnVuY3Rpb24oYyl7YyYmYS5maXJlKFwicGFzdGVcIixcbnt0eXBlOlwiaHRtbFwiLGRhdGFWYWx1ZTpjLmRhdGFWYWx1ZSxtZXRob2Q6XCJwYXN0ZVwiLGRhdGFUcmFuc2ZlcjpDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pbml0UGFzdGVEYXRhVHJhbnNmZXIoKX0pO2EuZmlyZShcImFmdGVyQ29tbWFuZEV4ZWNcIix7bmFtZTpcInBhc3RlZnJvbXdvcmRcIixjb21tYW5kOmUscmV0dXJuVmFsdWU6ISFjfSl9KX19KTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJQYXN0ZUZyb21Xb3JkXCIse2xhYmVsOmEubGFuZy5wYXN0ZWZyb213b3JkLnRvb2xiYXIsY29tbWFuZDpcInBhc3RlZnJvbXdvcmRcIix0b29sYmFyOlwiY2xpcGJvYXJkLDUwXCJ9KTthLm9uKFwicGFzdGVTdGF0ZVwiLGZ1bmN0aW9uKGIpe2EuZ2V0Q29tbWFuZChcInBhc3RlZnJvbXdvcmRcIikuc2V0U3RhdGUoYi5kYXRhKX0pO2Eub24oXCJwYXN0ZVwiLGZ1bmN0aW9uKGIpe3ZhciBlPWIuZGF0YSxjPWUuZGF0YVZhbHVlO2lmKGMmJihkfHwvKGNsYXNzPVxcXCI/TXNvfHN0eWxlPVxcXCJbXlxcXCJdKlxcYm1zb1xcLXx3OldvcmREb2N1bWVudCkvLnRlc3QoYykpKXtlLmRvbnRGaWx0ZXI9XG4hMDt2YXIgZz1oKGEsZixmdW5jdGlvbigpe2lmKGcpYS5maXJlKFwicGFzdGVcIixlKTtlbHNlIGlmKCFhLmNvbmZpZy5wYXN0ZUZyb21Xb3JkUHJvbXB0Q2xlYW51cHx8ZHx8Y29uZmlybShhLmxhbmcucGFzdGVmcm9td29yZC5jb25maXJtQ2xlYW51cCkpZS5kYXRhVmFsdWU9Q0tFRElUT1IuY2xlYW5Xb3JkKGMsYSk7ZD0wfSk7ZyYmYi5jYW5jZWwoKX19LG51bGwsbnVsbCwzKX19KX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGgsaz17bW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0sY2FuVW5kbzohMSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGcsYj1hLmNvbmZpZyxmPWIuYmFzZUhyZWY/J1xceDNjYmFzZSBocmVmXFx4M2RcIicrYi5iYXNlSHJlZisnXCIvXFx4M2UnOlwiXCI7aWYoYi5mdWxsUGFnZSlnPWEuZ2V0RGF0YSgpLnJlcGxhY2UoLzxoZWFkPi8sXCIkXFx4MjZcIitmKS5yZXBsYWNlKC9bXj5dKig/PTxcXC90aXRsZT4pLyxcIiRcXHgyNiBcXHgyNm1kYXNoOyBcIithLmxhbmcucHJldmlldy5wcmV2aWV3KTtlbHNle3ZhciBiPVwiXFx4M2Nib2R5IFwiLGQ9YS5kb2N1bWVudCYmYS5kb2N1bWVudC5nZXRCb2R5KCk7ZCYmKGQuZ2V0QXR0cmlidXRlKFwiaWRcIikmJihiKz0naWRcXHgzZFwiJytkLmdldEF0dHJpYnV0ZShcImlkXCIpKydcIiAnKSxkLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpJiYoYis9J2NsYXNzXFx4M2RcIicrZC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSsnXCIgJykpO2IrPVwiXFx4M2VcIjtnPWEuY29uZmlnLmRvY1R5cGUrXG4nXFx4M2NodG1sIGRpclxceDNkXCInK2EuY29uZmlnLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbisnXCJcXHgzZVxceDNjaGVhZFxceDNlJytmK1wiXFx4M2N0aXRsZVxceDNlXCIrYS5sYW5nLnByZXZpZXcucHJldmlldytcIlxceDNjL3RpdGxlXFx4M2VcIitDS0VESVRPUi50b29scy5idWlsZFN0eWxlSHRtbChhLmNvbmZpZy5jb250ZW50c0NzcykrXCJcXHgzYy9oZWFkXFx4M2VcIitiK2EuZ2V0RGF0YSgpK1wiXFx4M2MvYm9keVxceDNlXFx4M2MvaHRtbFxceDNlXCJ9Zj02NDA7Yj00MjA7ZD04MDt0cnl7dmFyIGM9d2luZG93LnNjcmVlbixmPU1hdGgucm91bmQoLjgqYy53aWR0aCksYj1NYXRoLnJvdW5kKC43KmMuaGVpZ2h0KSxkPU1hdGgucm91bmQoLjEqYy53aWR0aCl9Y2F0Y2goayl7fWlmKCExPT09YS5maXJlKFwiY29udGVudFByZXZpZXdcIixhPXtkYXRhVmFsdWU6Z30pKXJldHVybiExO3ZhciBjPVwiXCIsZTtDS0VESVRPUi5lbnYuaWUmJih3aW5kb3cuX2NrZV9odG1sVG9Mb2FkPWEuZGF0YVZhbHVlLGU9XCJqYXZhc2NyaXB0OnZvaWQoIChmdW5jdGlvbigpe2RvY3VtZW50Lm9wZW4oKTtcIitcbihcIihcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7XCIpLnJlcGxhY2UoL1xcL1xcLy4qP1xcbi9nLFwiXCIpLnJlcGxhY2UoL3BhcmVudFxcLi9nLFwid2luZG93Lm9wZW5lci5cIikrXCJkb2N1bWVudC53cml0ZSggd2luZG93Lm9wZW5lci5fY2tlX2h0bWxUb0xvYWQgKTtkb2N1bWVudC5jbG9zZSgpO3dpbmRvdy5vcGVuZXIuX2NrZV9odG1sVG9Mb2FkIFxceDNkIG51bGw7fSkoKSApXCIsYz1cIlwiKTtDS0VESVRPUi5lbnYuZ2Vja28mJih3aW5kb3cuX2NrZV9odG1sVG9Mb2FkPWEuZGF0YVZhbHVlLGM9Q0tFRElUT1IuZ2V0VXJsKGgrXCJwcmV2aWV3Lmh0bWxcIikpO2M9d2luZG93Lm9wZW4oYyxudWxsLFwidG9vbGJhclxceDNkeWVzLGxvY2F0aW9uXFx4M2RubyxzdGF0dXNcXHgzZHllcyxtZW51YmFyXFx4M2R5ZXMsc2Nyb2xsYmFyc1xceDNkeWVzLHJlc2l6YWJsZVxceDNkeWVzLHdpZHRoXFx4M2RcIitmK1wiLGhlaWdodFxceDNkXCIrYitcIixsZWZ0XFx4M2RcIitkKTtDS0VESVRPUi5lbnYuaWUmJmMmJihjLmxvY2F0aW9uPVxuZSk7Q0tFRElUT1IuZW52LmllfHxDS0VESVRPUi5lbnYuZ2Vja298fChlPWMuZG9jdW1lbnQsZS5vcGVuKCksZS53cml0ZShhLmRhdGFWYWx1ZSksZS5jbG9zZSgpKTtyZXR1cm4hMH19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicHJldmlld1wiLHtpbml0OmZ1bmN0aW9uKGEpe2EuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUmJihoPXRoaXMucGF0aCxhLmFkZENvbW1hbmQoXCJwcmV2aWV3XCIsayksYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiUHJldmlld1wiLHtsYWJlbDphLmxhbmcucHJldmlldy5wcmV2aWV3LGNvbW1hbmQ6XCJwcmV2aWV3XCIsdG9vbGJhcjpcImRvY3VtZW50LDQwXCJ9KSl9fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicHJpbnRcIix7aW5pdDpmdW5jdGlvbihhKXthLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiYoYS5hZGRDb21tYW5kKFwicHJpbnRcIixDS0VESVRPUi5wbHVnaW5zLnByaW50KSxhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJQcmludFwiLHtsYWJlbDphLmxhbmcucHJpbnQudG9vbGJhcixjb21tYW5kOlwicHJpbnRcIix0b29sYmFyOlwiZG9jdW1lbnQsNTBcIn0pKX19KTtDS0VESVRPUi5wbHVnaW5zLnByaW50PXtleGVjOmZ1bmN0aW9uKGEpe0NLRURJVE9SLmVudi5nZWNrbz9hLndpbmRvdy4kLnByaW50KCk6YS5kb2N1bWVudC4kLmV4ZWNDb21tYW5kKFwiUHJpbnRcIil9LGNhblVuZG86ITEscmVhZE9ubHk6MSxtb2Rlczp7d3lzaXd5ZzoxfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJyZW1vdmVmb3JtYXRcIix7aW5pdDpmdW5jdGlvbihhKXthLmFkZENvbW1hbmQoXCJyZW1vdmVGb3JtYXRcIixDS0VESVRPUi5wbHVnaW5zLnJlbW92ZWZvcm1hdC5jb21tYW5kcy5yZW1vdmVmb3JtYXQpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlJlbW92ZUZvcm1hdFwiLHtsYWJlbDphLmxhbmcucmVtb3ZlZm9ybWF0LnRvb2xiYXIsY29tbWFuZDpcInJlbW92ZUZvcm1hdFwiLHRvb2xiYXI6XCJjbGVhbnVwLDEwXCJ9KX19KTtcbkNLRURJVE9SLnBsdWdpbnMucmVtb3ZlZm9ybWF0PXtjb21tYW5kczp7cmVtb3ZlZm9ybWF0OntleGVjOmZ1bmN0aW9uKGEpe2Zvcih2YXIgaD1hLl8ucmVtb3ZlRm9ybWF0UmVnZXh8fChhLl8ucmVtb3ZlRm9ybWF0UmVnZXg9bmV3IFJlZ0V4cChcIl4oPzpcIithLmNvbmZpZy5yZW1vdmVGb3JtYXRUYWdzLnJlcGxhY2UoLywvZyxcInxcIikrXCIpJFwiLFwiaVwiKSksZT1hLl8ucmVtb3ZlQXR0cmlidXRlc3x8KGEuXy5yZW1vdmVBdHRyaWJ1dGVzPWEuY29uZmlnLnJlbW92ZUZvcm1hdEF0dHJpYnV0ZXMuc3BsaXQoXCIsXCIpKSxmPUNLRURJVE9SLnBsdWdpbnMucmVtb3ZlZm9ybWF0LmZpbHRlcixtPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKCksbj1tLmNyZWF0ZUl0ZXJhdG9yKCkscD1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlR9LGM7Yz1uLmdldE5leHRSYW5nZSgpOyl7Yy5jb2xsYXBzZWR8fGMuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0VMRU1FTlQpO1xudmFyIGw9Yy5jcmVhdGVCb29rbWFyaygpLGI9bC5zdGFydE5vZGUsZD1sLmVuZE5vZGUsaz1mdW5jdGlvbihiKXtmb3IodmFyIGM9YS5lbGVtZW50UGF0aChiKSxlPWMuZWxlbWVudHMsZD0xLGc7KGc9ZVtkXSkmJiFnLmVxdWFscyhjLmJsb2NrKSYmIWcuZXF1YWxzKGMuYmxvY2tMaW1pdCk7ZCsrKWgudGVzdChnLmdldE5hbWUoKSkmJmYoYSxnKSYmYi5icmVha1BhcmVudChnKX07ayhiKTtpZihkKWZvcihrKGQpLGI9Yi5nZXROZXh0U291cmNlTm9kZSghMCxDS0VESVRPUi5OT0RFX0VMRU1FTlQpO2ImJiFiLmVxdWFscyhkKTspaWYoYi5pc1JlYWRPbmx5KCkpe2lmKGIuZ2V0UG9zaXRpb24oZCkmQ0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlMpYnJlYWs7Yj1iLmdldE5leHQocCl9ZWxzZSBrPWIuZ2V0TmV4dFNvdXJjZU5vZGUoITEsQ0tFRElUT1IuTk9ERV9FTEVNRU5UKSxcImltZ1wiPT1iLmdldE5hbWUoKSYmYi5kYXRhKFwiY2tlLXJlYWxlbGVtZW50XCIpfHwhZihhLGIpfHwoaC50ZXN0KGIuZ2V0TmFtZSgpKT9cbmIucmVtb3ZlKDEpOihiLnJlbW92ZUF0dHJpYnV0ZXMoZSksYS5maXJlKFwicmVtb3ZlRm9ybWF0Q2xlYW51cFwiLGIpKSksYj1rO2MubW92ZVRvQm9va21hcmsobCl9YS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2EuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKG0pfX19LGZpbHRlcjpmdW5jdGlvbihhLGgpe2Zvcih2YXIgZT1hLl8ucmVtb3ZlRm9ybWF0RmlsdGVyc3x8W10sZj0wO2Y8ZS5sZW5ndGg7ZisrKWlmKCExPT09ZVtmXShoKSlyZXR1cm4hMTtyZXR1cm4hMH19O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuYWRkUmVtb3ZlRm9ybWF0RmlsdGVyPWZ1bmN0aW9uKGEpe3RoaXMuXy5yZW1vdmVGb3JtYXRGaWx0ZXJzfHwodGhpcy5fLnJlbW92ZUZvcm1hdEZpbHRlcnM9W10pO3RoaXMuXy5yZW1vdmVGb3JtYXRGaWx0ZXJzLnB1c2goYSl9O0NLRURJVE9SLmNvbmZpZy5yZW1vdmVGb3JtYXRUYWdzPVwiYixiaWcsY2l0ZSxjb2RlLGRlbCxkZm4sZW0sZm9udCxpLGlucyxrYmQscSxzLHNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdHQsdSx2YXJcIjtcbkNLRURJVE9SLmNvbmZpZy5yZW1vdmVGb3JtYXRBdHRyaWJ1dGVzPVwiY2xhc3Msc3R5bGUsbGFuZyx3aWR0aCxoZWlnaHQsYWxpZ24saHNwYWNlLHZhbGlnblwiOyhmdW5jdGlvbigpe3ZhciBiPXtyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7aWYoYS5maXJlKFwic2F2ZVwiKSYmKGE9YS5lbGVtZW50LiQuZm9ybSkpdHJ5e2Euc3VibWl0KCl9Y2F0Y2goYil7YS5zdWJtaXQuY2xpY2smJmEuc3VibWl0LmNsaWNrKCl9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzYXZlXCIse2luaXQ6ZnVuY3Rpb24oYSl7YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0UmJihhLmFkZENvbW1hbmQoXCJzYXZlXCIsYikubW9kZXM9e3d5c2l3eWc6ISFhLmVsZW1lbnQuJC5mb3JtfSxhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJTYXZlXCIse2xhYmVsOmEubGFuZy5zYXZlLnRvb2xiYXIsY29tbWFuZDpcInNhdmVcIix0b29sYmFyOlwiZG9jdW1lbnQsMTBcIn0pKX19KX0pKCk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzZWxlY3RhbGxcIix7aW5pdDpmdW5jdGlvbihiKXtiLmFkZENvbW1hbmQoXCJzZWxlY3RBbGxcIix7bW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0sZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmVkaXRhYmxlKCk7aWYoYi5pcyhcInRleHRhcmVhXCIpKWE9Yi4kLENLRURJVE9SLmVudi5pZT9hLmNyZWF0ZVRleHRSYW5nZSgpLmV4ZWNDb21tYW5kKFwiU2VsZWN0QWxsXCIpOihhLnNlbGVjdGlvblN0YXJ0PTAsYS5zZWxlY3Rpb25FbmQ9YS52YWx1ZS5sZW5ndGgpLGEuZm9jdXMoKTtlbHNle2lmKGIuaXMoXCJib2R5XCIpKWEuZG9jdW1lbnQuJC5leGVjQ29tbWFuZChcIlNlbGVjdEFsbFwiLCExLG51bGwpO2Vsc2V7dmFyIGM9YS5jcmVhdGVSYW5nZSgpO2Muc2VsZWN0Tm9kZUNvbnRlbnRzKGIpO2Muc2VsZWN0KCl9YS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2Euc2VsZWN0aW9uQ2hhbmdlKCl9fSxjYW5VbmRvOiExfSk7Yi51aS5hZGRCdXR0b24mJlxuYi51aS5hZGRCdXR0b24oXCJTZWxlY3RBbGxcIix7bGFiZWw6Yi5sYW5nLnNlbGVjdGFsbC50b29sYmFyLGNvbW1hbmQ6XCJzZWxlY3RBbGxcIix0b29sYmFyOlwic2VsZWN0aW9uLDEwXCJ9KX19KX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGs9e3JlYWRPbmx5OjEscHJlc2VydmVTdGF0ZTohMCxlZGl0b3JGb2N1czohMSxleGVjOmZ1bmN0aW9uKGEpe3RoaXMudG9nZ2xlU3RhdGUoKTt0aGlzLnJlZnJlc2goYSl9LHJlZnJlc2g6ZnVuY3Rpb24oYSl7aWYoYS5kb2N1bWVudCl7dmFyIGM9dGhpcy5zdGF0ZSE9Q0tFRElUT1IuVFJJU1RBVEVfT058fGEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUmJiFhLmZvY3VzTWFuYWdlci5oYXNGb2N1cz9cInJlbW92ZUNsYXNzXCI6XCJhdHRhY2hDbGFzc1wiO2EuZWRpdGFibGUoKVtjXShcImNrZV9zaG93X2Jsb2Nrc1wiKX19fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInNob3dibG9ja3NcIix7b25Mb2FkOmZ1bmN0aW9uKCl7dmFyIGE9XCJwIGRpdiBwcmUgYWRkcmVzcyBibG9ja3F1b3RlIGgxIGgyIGgzIGg0IGg1IGg2XCIuc3BsaXQoXCIgXCIpLGMsYixlLGYsaz1DS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoKSxsPSEoQ0tFRElUT1IuZW52LmllJiZcbjk+Q0tFRElUT1IuZW52LnZlcnNpb24pLGc9bD9cIjpub3QoW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2VdKTpub3QoLmNrZV9zaG93X2Jsb2Nrc19vZmYpXCI6XCJcIixkLGg7Zm9yKGM9Yj1lPWY9XCJcIjtkPWEucG9wKCk7KWg9YS5sZW5ndGg/XCIsXCI6XCJcIixjKz1cIi5ja2Vfc2hvd19ibG9ja3MgXCIrZCtnK2gsZSs9XCIuY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19sdHIgXCIrZCtnK2gsZis9XCIuY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19ydGwgXCIrZCtnK2gsYis9XCIuY2tlX3Nob3dfYmxvY2tzIFwiK2QrZytcIntiYWNrZ3JvdW5kLWltYWdlOnVybChcIitDS0VESVRPUi5nZXRVcmwoaytcImltYWdlcy9ibG9ja19cIitkK1wiLnBuZ1wiKStcIil9XCI7Q0tFRElUT1IuYWRkQ3NzKChjK1wie2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3JkZXI6MXB4IGRvdHRlZCBncmF5O3BhZGRpbmctdG9wOjhweH1cIikuY29uY2F0KGIsZStcIntiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCBsZWZ0O3BhZGRpbmctbGVmdDo4cHh9XCIsXG5mK1wie2JhY2tncm91bmQtcG9zaXRpb246dG9wIHJpZ2h0O3BhZGRpbmctcmlnaHQ6OHB4fVwiKSk7bHx8Q0tFRElUT1IuYWRkQ3NzKFwiLmNrZV9zaG93X2Jsb2NrcyBbY29udGVudGVkaXRhYmxlXFx4M2RmYWxzZV0sLmNrZV9zaG93X2Jsb2NrcyAuY2tlX3Nob3dfYmxvY2tzX29mZntib3JkZXI6bm9uZTtwYWRkaW5nLXRvcDowO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0uY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19ydGwgW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2VdLC5ja2Vfc2hvd19ibG9ja3MuY2tlX2NvbnRlbnRzX3J0bCAuY2tlX3Nob3dfYmxvY2tzX29mZntwYWRkaW5nLXJpZ2h0OjB9LmNrZV9zaG93X2Jsb2Nrcy5ja2VfY29udGVudHNfbHRyIFtjb250ZW50ZWRpdGFibGVcXHgzZGZhbHNlXSwuY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19sdHIgLmNrZV9zaG93X2Jsb2Nrc19vZmZ7cGFkZGluZy1sZWZ0OjB9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoKXtiLnJlZnJlc2goYSl9XG5pZighYS5ibG9ja2xlc3Mpe3ZhciBiPWEuYWRkQ29tbWFuZChcInNob3dibG9ja3NcIixrKTtiLmNhblVuZG89ITE7YS5jb25maWcuc3RhcnR1cE91dGxpbmVCbG9ja3MmJmIuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNob3dCbG9ja3NcIix7bGFiZWw6YS5sYW5nLnNob3dibG9ja3MudG9vbGJhcixjb21tYW5kOlwic2hvd2Jsb2Nrc1wiLHRvb2xiYXI6XCJ0b29scywyMFwifSk7YS5vbihcIm1vZGVcIixmdW5jdGlvbigpe2Iuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZiLnJlZnJlc2goYSl9KTthLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiYoYS5vbihcImZvY3VzXCIsYyksYS5vbihcImJsdXJcIixjKSk7YS5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe2Iuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZiLnJlZnJlc2goYSl9KX19fSl9KSgpOyhmdW5jdGlvbigpe3ZhciBmPXtwcmVzZXJ2ZVN0YXRlOiEwLGVkaXRvckZvY3VzOiExLHJlYWRPbmx5OjEsZXhlYzpmdW5jdGlvbihhKXt0aGlzLnRvZ2dsZVN0YXRlKCk7dGhpcy5yZWZyZXNoKGEpfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe2lmKGEuZG9jdW1lbnQpe3ZhciBiPXRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09OP1wiYXR0YWNoQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCI7YS5lZGl0YWJsZSgpW2JdKFwiY2tlX3Nob3dfYm9yZGVyc1wiKX19fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInNob3dib3JkZXJzXCIse21vZGVzOnt3eXNpd3lnOjF9LG9uTG9hZDpmdW5jdGlvbigpe3ZhciBhO2E9KENLRURJVE9SLmVudi5pZTZDb21wYXQ/W1wiLiUxIHRhYmxlLiUyLFwiLFwiLiUxIHRhYmxlLiUyIHRkLCAuJTEgdGFibGUuJTIgdGhcIixcIntcIixcImJvcmRlciA6ICNkM2QzZDMgMXB4IGRvdHRlZFwiLFwifVwiXTpcIi4lMSB0YWJsZS4lMiw7LiUxIHRhYmxlLiUyIFxceDNlIHRyIFxceDNlIHRkLCAuJTEgdGFibGUuJTIgXFx4M2UgdHIgXFx4M2UgdGgsOy4lMSB0YWJsZS4lMiBcXHgzZSB0Ym9keSBcXHgzZSB0ciBcXHgzZSB0ZCwgLiUxIHRhYmxlLiUyIFxceDNlIHRib2R5IFxceDNlIHRyIFxceDNlIHRoLDsuJTEgdGFibGUuJTIgXFx4M2UgdGhlYWQgXFx4M2UgdHIgXFx4M2UgdGQsIC4lMSB0YWJsZS4lMiBcXHgzZSB0aGVhZCBcXHgzZSB0ciBcXHgzZSB0aCw7LiUxIHRhYmxlLiUyIFxceDNlIHRmb290IFxceDNlIHRyIFxceDNlIHRkLCAuJTEgdGFibGUuJTIgXFx4M2UgdGZvb3QgXFx4M2UgdHIgXFx4M2UgdGg7eztib3JkZXIgOiAjZDNkM2QzIDFweCBkb3R0ZWQ7fVwiLnNwbGl0KFwiO1wiKSkuam9pbihcIlwiKS5yZXBsYWNlKC8lMi9nLFxuXCJja2Vfc2hvd19ib3JkZXJcIikucmVwbGFjZSgvJTEvZyxcImNrZV9zaG93X2JvcmRlcnMgXCIpO0NLRURJVE9SLmFkZENzcyhhKX0saW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJzaG93Ym9yZGVyc1wiLGYpO2IuY2FuVW5kbz0hMTshMSE9PWEuY29uZmlnLnN0YXJ0dXBTaG93Qm9yZGVycyYmYi5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PTik7YS5vbihcIm1vZGVcIixmdW5jdGlvbigpe2Iuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZiLnJlZnJlc2goYSl9LG51bGwsbnVsbCwxMDApO2Eub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSk7YS5vbihcInJlbW92ZUZvcm1hdENsZWFudXBcIixmdW5jdGlvbihkKXtkPWQuZGF0YTthLmdldENvbW1hbmQoXCJzaG93Ym9yZGVyc1wiKS5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04mJmQuaXMoXCJ0YWJsZVwiKSYmKCFkLmhhc0F0dHJpYnV0ZShcImJvcmRlclwiKXx8XG4wPj1wYXJzZUludChkLmdldEF0dHJpYnV0ZShcImJvcmRlclwiKSwxMCkpJiZkLmFkZENsYXNzKFwiY2tlX3Nob3dfYm9yZGVyXCIpfSl9LGFmdGVySW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGFQcm9jZXNzb3I7YT1iJiZiLmRhdGFGaWx0ZXI7Yj1iJiZiLmh0bWxGaWx0ZXI7YSYmYS5hZGRSdWxlcyh7ZWxlbWVudHM6e3RhYmxlOmZ1bmN0aW9uKGEpe2E9YS5hdHRyaWJ1dGVzO3ZhciBiPWFbXCJjbGFzc1wiXSxjPXBhcnNlSW50KGEuYm9yZGVyLDEwKTtjJiYhKDA+PWMpfHxiJiYtMSE9Yi5pbmRleE9mKFwiY2tlX3Nob3dfYm9yZGVyXCIpfHwoYVtcImNsYXNzXCJdPShifHxcIlwiKStcIiBja2Vfc2hvd19ib3JkZXJcIil9fX0pO2ImJmIuYWRkUnVsZXMoe2VsZW1lbnRzOnt0YWJsZTpmdW5jdGlvbihhKXthPWEuYXR0cmlidXRlczt2YXIgYj1hW1wiY2xhc3NcIl07YiYmKGFbXCJjbGFzc1wiXT1iLnJlcGxhY2UoXCJja2Vfc2hvd19ib3JkZXJcIixcIlwiKS5yZXBsYWNlKC9cXHN7Mn0vLFwiIFwiKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC8sXG5cIlwiKSl9fX0pfX0pO0NLRURJVE9SLm9uKFwiZGlhbG9nRGVmaW5pdGlvblwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5uYW1lO2lmKFwidGFibGVcIj09Ynx8XCJ0YWJsZVByb3BlcnRpZXNcIj09YilpZihhPWEuZGF0YS5kZWZpbml0aW9uLGI9YS5nZXRDb250ZW50cyhcImluZm9cIikuZ2V0KFwidHh0Qm9yZGVyXCIpLGIuY29tbWl0PUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGIuY29tbWl0LGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2EuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXBhcnNlSW50KHRoaXMuZ2V0VmFsdWUoKSwxMCk7Y1shZXx8MD49ZT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImNrZV9zaG93X2JvcmRlclwiKX19KSxhPShhPWEuZ2V0Q29udGVudHMoXCJhZHZhbmNlZFwiKSkmJmEuZ2V0KFwiYWR2Q1NTQ2xhc3Nlc1wiKSlhLnNldHVwPUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGEuc2V0dXAsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YS5hcHBseSh0aGlzLFxuYXJndW1lbnRzKTt0aGlzLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWUoKS5yZXBsYWNlKC9ja2Vfc2hvd19ib3JkZXIvLFwiXCIpKX19KSxhLmNvbW1pdD1DS0VESVRPUi50b29scy5vdmVycmlkZShhLmNvbW1pdCxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtwYXJzZUludChjLmdldEF0dHJpYnV0ZShcImJvcmRlclwiKSwxMCl8fGMuYWRkQ2xhc3MoXCJja2Vfc2hvd19ib3JkZXJcIil9fSl9KX0pKCk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzb3VyY2VhcmVhXCIse2luaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe3ZhciBhPWUmJnRoaXMuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldEFjdGl2ZSgpKTt0aGlzLmhpZGUoKTt0aGlzLnNldFN0eWxlKFwiaGVpZ2h0XCIsdGhpcy5nZXRQYXJlbnQoKS4kLmNsaWVudEhlaWdodCtcInB4XCIpO3RoaXMuc2V0U3R5bGUoXCJ3aWR0aFwiLHRoaXMuZ2V0UGFyZW50KCkuJC5jbGllbnRXaWR0aCtcInB4XCIpO3RoaXMuc2hvdygpO2EmJnRoaXMuZm9jdXMoKX1pZihhLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FKXt2YXIgZj1DS0VESVRPUi5wbHVnaW5zLnNvdXJjZWFyZWE7YS5hZGRNb2RlKFwic291cmNlXCIsZnVuY3Rpb24oZSl7dmFyIGI9YS51aS5zcGFjZShcImNvbnRlbnRzXCIpLmdldERvY3VtZW50KCkuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO2Iuc2V0U3R5bGVzKENLRURJVE9SLnRvb2xzLmV4dGVuZCh7d2lkdGg6Q0tFRElUT1IuZW52LmllN0NvbXBhdD9cblwiOTklXCI6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwiLHJlc2l6ZTpcIm5vbmVcIixvdXRsaW5lOlwibm9uZVwiLFwidGV4dC1hbGlnblwiOlwibGVmdFwifSxDS0VESVRPUi50b29scy5jc3NWZW5kb3JQcmVmaXgoXCJ0YWItc2l6ZVwiLGEuY29uZmlnLnNvdXJjZUFyZWFUYWJTaXplfHw0KSkpO2Iuc2V0QXR0cmlidXRlKFwiZGlyXCIsXCJsdHJcIik7Yi5hZGRDbGFzcyhcImNrZV9zb3VyY2VcIikuYWRkQ2xhc3MoXCJja2VfcmVzZXRcIikuYWRkQ2xhc3MoXCJja2VfZW5hYmxlX2NvbnRleHRfbWVudVwiKTthLnVpLnNwYWNlKFwiY29udGVudHNcIikuYXBwZW5kKGIpO2I9YS5lZGl0YWJsZShuZXcgYyhhLGIpKTtiLnNldERhdGEoYS5nZXREYXRhKDEpKTtDS0VESVRPUi5lbnYuaWUmJihiLmF0dGFjaExpc3RlbmVyKGEsXCJyZXNpemVcIixkLGIpLGIuYXR0YWNoTGlzdGVuZXIoQ0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCksXCJyZXNpemVcIixkLGIpLENLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZCwwLGIpKTthLmZpcmUoXCJhcmlhV2lkZ2V0XCIsXG50aGlzKTtlKCl9KTthLmFkZENvbW1hbmQoXCJzb3VyY2VcIixmLmNvbW1hbmRzLnNvdXJjZSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiU291cmNlXCIse2xhYmVsOmEubGFuZy5zb3VyY2VhcmVhLnRvb2xiYXIsY29tbWFuZDpcInNvdXJjZVwiLHRvb2xiYXI6XCJtb2RlLDEwXCJ9KTthLm9uKFwibW9kZVwiLGZ1bmN0aW9uKCl7YS5nZXRDb21tYW5kKFwic291cmNlXCIpLnNldFN0YXRlKFwic291cmNlXCI9PWEubW9kZT9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpfSk7dmFyIGU9Q0tFRElUT1IuZW52LmllJiY5PT1DS0VESVRPUi5lbnYudmVyc2lvbn19fSk7dmFyIGM9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IuZWRpdGFibGUscHJvdG86e3NldERhdGE6ZnVuY3Rpb24oYSl7dGhpcy5zZXRWYWx1ZShhKTt0aGlzLnN0YXR1cz1cInJlYWR5XCI7dGhpcy5lZGl0b3IuZmlyZShcImRhdGFSZWFkeVwiKX0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZhbHVlKCl9LFxuaW5zZXJ0SHRtbDpmdW5jdGlvbigpe30saW5zZXJ0RWxlbWVudDpmdW5jdGlvbigpe30saW5zZXJ0VGV4dDpmdW5jdGlvbigpe30sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYSl7dGhpc1soYT9cInNldFwiOlwicmVtb3ZlXCIpK1wiQXR0cmlidXRlXCJdKFwicmVhZE9ubHlcIixcInJlYWRvbmx5XCIpfSxkZXRhY2g6ZnVuY3Rpb24oKXtjLmJhc2VQcm90by5kZXRhY2guY2FsbCh0aGlzKTt0aGlzLmNsZWFyQ3VzdG9tRGF0YSgpO3RoaXMucmVtb3ZlKCl9fX0pfSkoKTtcbkNLRURJVE9SLnBsdWdpbnMuc291cmNlYXJlYT17Y29tbWFuZHM6e3NvdXJjZTp7bW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0sZWRpdG9yRm9jdXM6ITEscmVhZE9ubHk6MSxleGVjOmZ1bmN0aW9uKGMpe1wid3lzaXd5Z1wiPT1jLm1vZGUmJmMuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtjLmdldENvbW1hbmQoXCJzb3VyY2VcIikuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2Muc2V0TW9kZShcInNvdXJjZVwiPT1jLm1vZGU/XCJ3eXNpd3lnXCI6XCJzb3VyY2VcIil9LGNhblVuZG86ITF9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzcGVjaWFsY2hhclwiLHthdmFpbGFibGVMYW5nczp7YWY6MSxhcjoxLGJnOjEsY2E6MSxjczoxLGN5OjEsZGE6MSxkZToxLFwiZGUtY2hcIjoxLGVsOjEsZW46MSxcImVuLWdiXCI6MSxlbzoxLGVzOjEsZXQ6MSxldToxLGZhOjEsZmk6MSxmcjoxLFwiZnItY2FcIjoxLGdsOjEsaGU6MSxocjoxLGh1OjEsaWQ6MSxpdDoxLGphOjEsa206MSxrbzoxLGt1OjEsbHQ6MSxsdjoxLG5iOjEsbmw6MSxubzoxLHBsOjEscHQ6MSxcInB0LWJyXCI6MSxydToxLHNpOjEsc2s6MSxzbDoxLHNxOjEsc3Y6MSx0aDoxLHRyOjEsdHQ6MSx1ZzoxLHVrOjEsdmk6MSx6aDoxLFwiemgtY25cIjoxfSxyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcztDS0VESVRPUi5kaWFsb2cuYWRkKFwic3BlY2lhbGNoYXJcIix0aGlzLnBhdGgrXCJkaWFsb2dzL3NwZWNpYWxjaGFyLmpzXCIpO2EuYWRkQ29tbWFuZChcInNwZWNpYWxjaGFyXCIse2V4ZWM6ZnVuY3Rpb24oKXt2YXIgYj1cbmEubGFuZ0NvZGUsYj1jLmF2YWlsYWJsZUxhbmdzW2JdP2I6Yy5hdmFpbGFibGVMYW5nc1tiLnJlcGxhY2UoLy0uKi8sXCJcIildP2IucmVwbGFjZSgvLS4qLyxcIlwiKTpcImVuXCI7Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoQ0tFRElUT1IuZ2V0VXJsKGMucGF0aCtcImRpYWxvZ3MvbGFuZy9cIitiK1wiLmpzXCIpLGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGEubGFuZy5zcGVjaWFsY2hhcixjLmxhbmdFbnRyaWVzW2JdKTthLm9wZW5EaWFsb2coXCJzcGVjaWFsY2hhclwiKX0pfSxtb2Rlczp7d3lzaXd5ZzoxfSxjYW5VbmRvOiExfSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiU3BlY2lhbENoYXJcIix7bGFiZWw6YS5sYW5nLnNwZWNpYWxjaGFyLnRvb2xiYXIsY29tbWFuZDpcInNwZWNpYWxjaGFyXCIsdG9vbGJhcjpcImluc2VydCw1MFwifSl9fSk7Q0tFRElUT1IuY29uZmlnLnNwZWNpYWxDaGFycz1cIiEgXFx4MjZxdW90OyAjICQgJSBcXHgyNmFtcDsgJyAoICkgKiArIC0gLiAvIDAgMSAyIDMgNCA1IDYgNyA4IDkgOiA7IFxceDI2bHQ7IFxceDNkIFxceDI2Z3Q7ID8gQCBBIEIgQyBEIEUgRiBHIEggSSBKIEsgTCBNIE4gTyBQIFEgUiBTIFQgVSBWIFcgWCBZIFogWyBdIF4gXyBgIGEgYiBjIGQgZSBmIGcgaCBpIGogayBsIG0gbiBvIHAgcSByIHMgdCB1IHYgdyB4IHkgeiB7IHwgfSB+IFxceDI2ZXVybzsgXFx4MjZsc3F1bzsgXFx4MjZyc3F1bzsgXFx4MjZsZHF1bzsgXFx4MjZyZHF1bzsgXFx4MjZuZGFzaDsgXFx4MjZtZGFzaDsgXFx4MjZpZXhjbDsgXFx4MjZjZW50OyBcXHgyNnBvdW5kOyBcXHgyNmN1cnJlbjsgXFx4MjZ5ZW47IFxceDI2YnJ2YmFyOyBcXHgyNnNlY3Q7IFxceDI2dW1sOyBcXHgyNmNvcHk7IFxceDI2b3JkZjsgXFx4MjZsYXF1bzsgXFx4MjZub3Q7IFxceDI2cmVnOyBcXHgyNm1hY3I7IFxceDI2ZGVnOyBcXHgyNnN1cDI7IFxceDI2c3VwMzsgXFx4MjZhY3V0ZTsgXFx4MjZtaWNybzsgXFx4MjZwYXJhOyBcXHgyNm1pZGRvdDsgXFx4MjZjZWRpbDsgXFx4MjZzdXAxOyBcXHgyNm9yZG07IFxceDI2cmFxdW87IFxceDI2ZnJhYzE0OyBcXHgyNmZyYWMxMjsgXFx4MjZmcmFjMzQ7IFxceDI2aXF1ZXN0OyBcXHgyNkFncmF2ZTsgXFx4MjZBYWN1dGU7IFxceDI2QWNpcmM7IFxceDI2QXRpbGRlOyBcXHgyNkF1bWw7IFxceDI2QXJpbmc7IFxceDI2QUVsaWc7IFxceDI2Q2NlZGlsOyBcXHgyNkVncmF2ZTsgXFx4MjZFYWN1dGU7IFxceDI2RWNpcmM7IFxceDI2RXVtbDsgXFx4MjZJZ3JhdmU7IFxceDI2SWFjdXRlOyBcXHgyNkljaXJjOyBcXHgyNkl1bWw7IFxceDI2RVRIOyBcXHgyNk50aWxkZTsgXFx4MjZPZ3JhdmU7IFxceDI2T2FjdXRlOyBcXHgyNk9jaXJjOyBcXHgyNk90aWxkZTsgXFx4MjZPdW1sOyBcXHgyNnRpbWVzOyBcXHgyNk9zbGFzaDsgXFx4MjZVZ3JhdmU7IFxceDI2VWFjdXRlOyBcXHgyNlVjaXJjOyBcXHgyNlV1bWw7IFxceDI2WWFjdXRlOyBcXHgyNlRIT1JOOyBcXHgyNnN6bGlnOyBcXHgyNmFncmF2ZTsgXFx4MjZhYWN1dGU7IFxceDI2YWNpcmM7IFxceDI2YXRpbGRlOyBcXHgyNmF1bWw7IFxceDI2YXJpbmc7IFxceDI2YWVsaWc7IFxceDI2Y2NlZGlsOyBcXHgyNmVncmF2ZTsgXFx4MjZlYWN1dGU7IFxceDI2ZWNpcmM7IFxceDI2ZXVtbDsgXFx4MjZpZ3JhdmU7IFxceDI2aWFjdXRlOyBcXHgyNmljaXJjOyBcXHgyNml1bWw7IFxceDI2ZXRoOyBcXHgyNm50aWxkZTsgXFx4MjZvZ3JhdmU7IFxceDI2b2FjdXRlOyBcXHgyNm9jaXJjOyBcXHgyNm90aWxkZTsgXFx4MjZvdW1sOyBcXHgyNmRpdmlkZTsgXFx4MjZvc2xhc2g7IFxceDI2dWdyYXZlOyBcXHgyNnVhY3V0ZTsgXFx4MjZ1Y2lyYzsgXFx4MjZ1dW1sOyBcXHgyNnlhY3V0ZTsgXFx4MjZ0aG9ybjsgXFx4MjZ5dW1sOyBcXHgyNk9FbGlnOyBcXHgyNm9lbGlnOyBcXHgyNiMzNzI7IFxceDI2IzM3NCBcXHgyNiMzNzMgXFx4MjYjMzc1OyBcXHgyNnNicXVvOyBcXHgyNiM4MjE5OyBcXHgyNmJkcXVvOyBcXHgyNmhlbGxpcDsgXFx4MjZ0cmFkZTsgXFx4MjYjOTY1ODsgXFx4MjZidWxsOyBcXHgyNnJhcnI7IFxceDI2ckFycjsgXFx4MjZoQXJyOyBcXHgyNmRpYW1zOyBcXHgyNmFzeW1wO1wiLnNwbGl0KFwiIFwiKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInNjYXl0XCIse3JlcXVpcmVzOlwibWVudWJ1dHRvbixkaWFsb2dcIix0YWJUb09wZW46bnVsbCxkaWFsb2dOYW1lOlwic2NheXREaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1DS0VESVRPUi5wbHVnaW5zLnNjYXl0O3RoaXMuYmluZEV2ZW50cyhhKTt0aGlzLnBhcnNlQ29uZmlnKGEpO3RoaXMuYWRkUnVsZShhKTtDS0VESVRPUi5kaWFsb2cuYWRkKHRoaXMuZGlhbG9nTmFtZSxDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiZGlhbG9ncy9vcHRpb25zLmpzXCIpKTt0aGlzLmFkZE1lbnVJdGVtcyhhKTt2YXIgYj1hLmxhbmcuc2NheXQsZT1DS0VESVRPUi5lbnY7YS51aS5hZGQoXCJTY2F5dFwiLENLRURJVE9SLlVJX01FTlVCVVRUT04se2xhYmVsOmIudGV4dF90aXRsZSx0aXRsZTphLnBsdWdpbnMud3NjP2EubGFuZy53c2MudGl0bGU6Yi50ZXh0X3RpdGxlLG1vZGVzOnt3eXNpd3lnOiEoZS5pZSYmKDg+ZS52ZXJzaW9ufHxlLnF1aXJrcykpfSxcbnRvb2xiYXI6XCJzcGVsbGNoZWNrZXIsMjBcIixyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9YS51aS5pbnN0YW5jZXMuU2NheXQuZ2V0U3RhdGUoKTthLnNjYXl0JiYoYj1kLnN0YXRlLnNjYXl0W2EubmFtZV0/Q0tFRElUT1IuVFJJU1RBVEVfT046Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKTthLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsYil9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpczthLm9uKFwic2NheXRCdXR0b25TdGF0ZVwiLGZ1bmN0aW9uKGEpe3ZvaWQgMCE9PXR5cGVvZiBhLmRhdGEmJmIuc2V0U3RhdGUoYS5kYXRhKX0pfSxvbk1lbnU6ZnVuY3Rpb24oKXt2YXIgYj1hLnNjYXl0O2EuZ2V0TWVudUl0ZW0oXCJzY2F5dFRvZ2dsZVwiKS5sYWJlbD1hLmxhbmcuc2NheXRbYiYmZC5zdGF0ZS5zY2F5dFthLm5hbWVdP1wiYnRuX2Rpc2FibGVcIjpcImJ0bl9lbmFibGVcIl07Yj17c2NheXRUb2dnbGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHNjYXl0T3B0aW9uczpiP0NLRURJVE9SLlRSSVNUQVRFX09GRjpcbkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHNjYXl0TGFuZ3M6Yj9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsc2NheXREaWN0OmI/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHNjYXl0QWJvdXQ6Yj9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsV1NDOmEucGx1Z2lucy53c2M/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEfTthLmNvbmZpZy5zY2F5dF91aVRhYnNbMF18fGRlbGV0ZSBiLnNjYXl0T3B0aW9uczthLmNvbmZpZy5zY2F5dF91aVRhYnNbMV18fGRlbGV0ZSBiLnNjYXl0TGFuZ3M7YS5jb25maWcuc2NheXRfdWlUYWJzWzJdfHxkZWxldGUgYi5zY2F5dERpY3Q7cmV0dXJuIGJ9fSk7YS5jb250ZXh0TWVudSYmYS5hZGRNZW51SXRlbXMmJihhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGIsZCl7dmFyIGU9XG5hLnNjYXl0LGssbDtlJiYobD1lLmdldFNlbGVjdGlvbk5vZGUoKSkmJihrPWMubWVudUdlbmVyYXRvcihhLGwpLGUuc2hvd0Jhbm5lcihcIi5cIithLmNvbnRleHRNZW51Ll8uZGVmaW5pdGlvbi5wYW5lbC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLmpvaW4oXCIgLlwiKSkpO3JldHVybiBrfSksYS5jb250ZXh0TWVudS5fLm9uSGlkZT1DS0VESVRPUi50b29scy5vdmVycmlkZShhLmNvbnRleHRNZW51Ll8ub25IaWRlLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWEuc2NheXQ7ZCYmZC5oaWRlQmFubmVyKCk7cmV0dXJuIGIuYXBwbHkodGhpcyl9fSkpfSxhZGRNZW51SXRlbXM6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPUNLRURJVE9SLnBsdWdpbnMuc2NheXQ7YS5hZGRNZW51R3JvdXAoXCJzY2F5dEJ1dHRvblwiKTtmb3IodmFyIGI9YS5jb25maWcuc2NheXRfY29udGV4dE1lbnVJdGVtc09yZGVyLnNwbGl0KFwifFwiKSxlPTA7ZTxiLmxlbmd0aDtlKyspYltlXT1cInNjYXl0X1wiK2JbZV07XG5pZigoYj1bXCJncmF5dF9kZXNjcmlwdGlvblwiLFwiZ3JheXRfc3VnZ2VzdFwiLFwiZ3JheXRfY29udHJvbFwiXS5jb25jYXQoYikpJiZiLmxlbmd0aClmb3IoZT0wO2U8Yi5sZW5ndGg7ZSsrKWEuYWRkTWVudUdyb3VwKGJbZV0sZS0xMCk7YS5hZGRDb21tYW5kKFwic2NheXRUb2dnbGVcIix7ZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLnNjYXl0O2Quc3RhdGUuc2NheXRbYS5uYW1lXT0hZC5zdGF0ZS5zY2F5dFthLm5hbWVdOyEwPT09ZC5zdGF0ZS5zY2F5dFthLm5hbWVdP2J8fGQuY3JlYXRlU2NheXQoYSk6YiYmZC5kZXN0cm95KGEpfX0pO2EuYWRkQ29tbWFuZChcInNjYXl0QWJvdXRcIix7ZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cImFib3V0XCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9fSk7YS5hZGRDb21tYW5kKFwic2NheXRPcHRpb25zXCIse2V4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJvcHRpb25zXCI7YS5sb2NrU2VsZWN0aW9uKCk7XG5hLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX19KTthLmFkZENvbW1hbmQoXCJzY2F5dExhbmdzXCIse2V4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJsYW5nc1wiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfX0pO2EuYWRkQ29tbWFuZChcInNjYXl0RGljdFwiLHtleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQudGFiVG9PcGVuPVwiZGljdGlvbmFyaWVzXCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9fSk7Yj17c2NheXRUb2dnbGU6e2xhYmVsOmEubGFuZy5zY2F5dC5idG5fZW5hYmxlLGdyb3VwOlwic2NheXRCdXR0b25cIixjb21tYW5kOlwic2NheXRUb2dnbGVcIn0sc2NheXRBYm91dDp7bGFiZWw6YS5sYW5nLnNjYXl0LmJ0bl9hYm91dCxncm91cDpcInNjYXl0QnV0dG9uXCIsY29tbWFuZDpcInNjYXl0QWJvdXRcIn0sc2NheXRPcHRpb25zOntsYWJlbDphLmxhbmcuc2NheXQuYnRuX29wdGlvbnMsZ3JvdXA6XCJzY2F5dEJ1dHRvblwiLFxuY29tbWFuZDpcInNjYXl0T3B0aW9uc1wifSxzY2F5dExhbmdzOntsYWJlbDphLmxhbmcuc2NheXQuYnRuX2xhbmdzLGdyb3VwOlwic2NheXRCdXR0b25cIixjb21tYW5kOlwic2NheXRMYW5nc1wifSxzY2F5dERpY3Q6e2xhYmVsOmEubGFuZy5zY2F5dC5idG5fZGljdGlvbmFyaWVzLGdyb3VwOlwic2NheXRCdXR0b25cIixjb21tYW5kOlwic2NheXREaWN0XCJ9fTthLnBsdWdpbnMud3NjJiYoYi5XU0M9e2xhYmVsOmEubGFuZy53c2MudG9vbGJhcixncm91cDpcInNjYXl0QnV0dG9uXCIsb25DbGljazpmdW5jdGlvbigpe3ZhciBiPUNLRURJVE9SLnBsdWdpbnMuc2NheXQsZD1hLnNjYXl0LGM9YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT9hLmNvbnRhaW5lci5nZXRUZXh0KCk6YS5kb2N1bWVudC5nZXRCb2R5KCkuZ2V0VGV4dCgpOyhjPWMucmVwbGFjZSgvXFxzL2csXCJcIikpPyhkJiZiLnN0YXRlLnNjYXl0W2EubmFtZV0mJmQuc2V0TWFya3VwUGF1c2VkJiZkLnNldE1hcmt1cFBhdXNlZCghMCksXG5hLmxvY2tTZWxlY3Rpb24oKSxhLmV4ZWNDb21tYW5kKFwiY2hlY2tzcGVsbFwiKSk6YWxlcnQoXCJOb3RoaW5nIHRvIGNoZWNrIVwiKX19KTthLmFkZE1lbnVJdGVtcyhiKX0sYmluZEV2ZW50czpmdW5jdGlvbihhKXt2YXIgYz1DS0VESVRPUi5wbHVnaW5zLnNjYXl0LGQ9YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSxiPWZ1bmN0aW9uKCl7Yy5kZXN0cm95KGEpfSxlPWZ1bmN0aW9uKCl7IWMuc3RhdGUuc2NheXRbYS5uYW1lXXx8YS5yZWFkT25seXx8YS5zY2F5dHx8Yy5jcmVhdGVTY2F5dChhKX0sZj1mdW5jdGlvbigpe3ZhciBiPWEuZWRpdGFibGUoKTtiLmF0dGFjaExpc3RlbmVyKGIsXCJmb2N1c1wiLGZ1bmN0aW9uKGIpe0NLRURJVE9SLnBsdWdpbnMuc2NheXQmJiFhLnNjYXl0JiZzZXRUaW1lb3V0KGUsMCk7Yj1DS0VESVRPUi5wbHVnaW5zLnNjYXl0JiZDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN0YXRlLnNjYXl0W2EubmFtZV0mJmEuc2NheXQ7dmFyIGMsXG5oO2lmKChkfHxiKSYmYS5fLnNhdmVkU2VsZWN0aW9uKXtiPWEuXy5zYXZlZFNlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKTtiPSFiJiZhLl8uc2F2ZWRTZWxlY3Rpb24uZ2V0UmFuZ2VzKCk7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspaD1iW2ZdLFwic3RyaW5nXCI9PT10eXBlb2YgaC5zdGFydENvbnRhaW5lci4kLm5vZGVWYWx1ZSYmKGM9aC5zdGFydENvbnRhaW5lci5nZXRUZXh0KCkubGVuZ3RoLChjPGguc3RhcnRPZmZzZXR8fGM8aC5lbmRPZmZzZXQpJiZhLnVubG9ja1NlbGVjdGlvbighMSkpfX0sdGhpcyxudWxsLC0xMCl9LGc9ZnVuY3Rpb24oKXtkP2EuY29uZmlnLnNjYXl0X2lubGluZU1vZGVJbW1lZGlhdGVNYXJrdXA/ZSgpOihhLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChiLDApfSksYS5vbihcImZvY3VzXCIsZSksYS5mb2N1c01hbmFnZXIuaGFzRm9jdXMmJmUoKSk6ZSgpO2YoKTt2YXIgYz1hLmVkaXRhYmxlKCk7Yy5hdHRhY2hMaXN0ZW5lcihjLFwibW91c2Vkb3duXCIsXG5mdW5jdGlvbihiKXtiPWIuZGF0YS5nZXRUYXJnZXQoKTt2YXIgZD1hLndpZGdldHMmJmEud2lkZ2V0cy5nZXRCeUVsZW1lbnQoYik7ZCYmKGQud3JhcHBlcj1iLmdldEFzY2VuZGFudChmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS13aWRnZXQtd3JhcHBlclwiKX0sITApKX0sdGhpcyxudWxsLC0xMCl9O2Eub24oXCJjb250ZW50RG9tXCIsZyk7YS5vbihcImJlZm9yZUNvbW1hbmRFeGVjXCIsZnVuY3Rpb24oYil7dmFyIGQ9YS5zY2F5dCxlPW51bGwsZj0hMSxnPSEwO2IuZGF0YS5uYW1lIGluIGMub3B0aW9ucy5kaXNhYmxpbmdDb21tYW5kRXhlYyYmXCJ3eXNpd3lnXCI9PWEubW9kZT9kJiYoYy5kZXN0cm95KGEpLGEuZmlyZShcInNjYXl0QnV0dG9uU3RhdGVcIixDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCkpOlwiYm9sZFwiIT09Yi5kYXRhLm5hbWUmJlwiaXRhbGljXCIhPT1iLmRhdGEubmFtZSYmXCJ1bmRlcmxpbmVcIiE9PWIuZGF0YS5uYW1lJiZcInN0cmlrZVwiIT09Yi5kYXRhLm5hbWUmJlxuXCJzdWJzY3JpcHRcIiE9PWIuZGF0YS5uYW1lJiZcInN1cGVyc2NyaXB0XCIhPT1iLmRhdGEubmFtZSYmXCJlbnRlclwiIT09Yi5kYXRhLm5hbWUmJlwiY3V0XCIhPT1iLmRhdGEubmFtZSYmXCJsYW5ndWFnZVwiIT09Yi5kYXRhLm5hbWV8fCFkfHwoXCJjdXRcIj09PWIuZGF0YS5uYW1lJiYoZz0hMSxmPSEwKSxcImxhbmd1YWdlXCI9PT1iLmRhdGEubmFtZSYmKGU9KGU9YS5wbHVnaW5zLmxhbmd1YWdlLmdldEN1cnJlbnRMYW5nRWxlbWVudChhKSkmJmUuJCxmPSEwKSxhLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiLHtyZW1vdmVPcHRpb25zOntyZW1vdmVJbnNpZGU6Zyxmb3JjZUJvb2ttYXJrOmYsc2VsZWN0aW9uTm9kZTplfSx0aW1lb3V0OjB9KSl9KTthLm9uKFwiYmVmb3JlU2V0TW9kZVwiLGZ1bmN0aW9uKGIpe2lmKFwic291cmNlXCI9PWIuZGF0YSl7aWYoYj1hLnNjYXl0KWMuZGVzdHJveShhKSxhLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2EuZG9jdW1lbnQmJlxuYS5kb2N1bWVudC5nZXRCb2R5KCkucmVtb3ZlQXR0cmlidXRlKFwiX2pxdWlkXCIpfX0pO2Eub24oXCJhZnRlckNvbW1hbmRFeGVjXCIsZnVuY3Rpb24oYil7XCJ3eXNpd3lnXCIhPWEubW9kZXx8XCJ1bmRvXCIhPWIuZGF0YS5uYW1lJiZcInJlZG9cIiE9Yi5kYXRhLm5hbWV8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYj1hLnNjYXl0LGQ9YiYmYi5nZXRTY2F5dExhbmdMaXN0KCk7ZCYmZC5sdHImJmQucnRsJiZiLmZpcmUoXCJzdGFydFNwZWxsQ2hlY2ssIHN0YXJ0R3JhbW1hckNoZWNrXCIpfSwyNTApfSk7YS5vbihcInJlYWRPbmx5XCIsZnVuY3Rpb24oYil7dmFyIGQ7YiYmKGQ9YS5zY2F5dCwhMD09PWIuZWRpdG9yLnJlYWRPbmx5P2QmJmQuZmlyZShcInJlbW92ZU1hcmt1cEluRG9jdW1lbnRcIix7fSk6ZD9kLmZpcmUoXCJzdGFydFNwZWxsQ2hlY2ssIHN0YXJ0R3JhbW1hckNoZWNrXCIpOlwid3lzaXd5Z1wiPT1iLmVkaXRvci5tb2RlJiYhMD09PWMuc3RhdGUuc2NheXRbYi5lZGl0b3IubmFtZV0mJihjLmNyZWF0ZVNjYXl0KGEpLFxuYi5lZGl0b3IuZmlyZShcInNjYXl0QnV0dG9uU3RhdGVcIixDS0VESVRPUi5UUklTVEFURV9PTikpKX0pO2Eub24oXCJiZWZvcmVEZXN0cm95XCIsYik7YS5vbihcInNldERhdGFcIixmdW5jdGlvbigpe2IoKTsoYS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORXx8YS5wbHVnaW5zLmRpdmFyZWEpJiZnKCl9LHRoaXMsbnVsbCw1MCk7YS5vbihcInJlbG9hZE1hcmt1cFNjYXl0XCIsZnVuY3Rpb24oYil7dmFyIGQ9Yi5kYXRhJiZiLmRhdGEucmVtb3ZlT3B0aW9ucztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGI9YS5zY2F5dCxjPWImJmIuZ2V0U2NheXRMYW5nTGlzdCgpO2MmJmMubHRyJiZjLnJ0bCYmKGEuZG9jdW1lbnQuZmlyZShcImtleWRvd25cIixuZXcgQ0tFRElUT1IuZG9tLmV2ZW50KHtrZXlDb2RlOjM3fSkpLGIucmVtb3ZlTWFya3VwSW5TZWxlY3Rpb25Ob2RlKGQpLGIuZmlyZShcInN0YXJ0U3BlbGxDaGVjaywgc3RhcnRHcmFtbWFyQ2hlY2tcIikpfSxiLmRhdGEmJlxuYi5kYXRhLnRpbWVvdXR8fDApfSk7YS5vbihcImluc2VydEVsZW1lbnRcIixmdW5jdGlvbigpe2EuZmlyZShcInJlbG9hZE1hcmt1cFNjYXl0XCIse3JlbW92ZU9wdGlvbnM6e2ZvcmNlQm9va21hcms6ITB9fSl9LHRoaXMsbnVsbCw1MCk7YS5vbihcImluc2VydEh0bWxcIixmdW5jdGlvbigpe2EuZmlyZShcInJlbG9hZE1hcmt1cFNjYXl0XCIpfSx0aGlzLG51bGwsNTApO2Eub24oXCJpbnNlcnRUZXh0XCIsZnVuY3Rpb24oKXthLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiKX0sdGhpcyxudWxsLDUwKTthLm9uKFwic2NheXREaWFsb2dTaG93blwiLGZ1bmN0aW9uKGIpe2IuZGF0YS5zZWxlY3RQYWdlKGEuc2NheXQudGFiVG9PcGVuKX0pfSxwYXJzZUNvbmZpZzpmdW5jdGlvbihhKXt2YXIgYz1DS0VESVRPUi5wbHVnaW5zLnNjYXl0O2MucmVwbGFjZU9sZE9wdGlvbnNOYW1lcyhhLmNvbmZpZyk7XCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfYXV0b1N0YXJ0dXAmJihhLmNvbmZpZy5zY2F5dF9hdXRvU3RhcnR1cD1cbiExKTtjLnN0YXRlLnNjYXl0W2EubmFtZV09YS5jb25maWcuc2NheXRfYXV0b1N0YXJ0dXA7XCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuZ3JheXRfYXV0b1N0YXJ0dXAmJihhLmNvbmZpZy5ncmF5dF9hdXRvU3RhcnR1cD0hMSk7XCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfaW5saW5lTW9kZUltbWVkaWF0ZU1hcmt1cCYmKGEuY29uZmlnLnNjYXl0X2lubGluZU1vZGVJbW1lZGlhdGVNYXJrdXA9ITEpO2Muc3RhdGUuZ3JheXRbYS5uYW1lXT1hLmNvbmZpZy5ncmF5dF9hdXRvU3RhcnR1cDthLmNvbmZpZy5zY2F5dF9jb250ZXh0Q29tbWFuZHN8fChhLmNvbmZpZy5zY2F5dF9jb250ZXh0Q29tbWFuZHM9XCJpZ25vcmV8aWdub3JlYWxsfGFkZFwiKTthLmNvbmZpZy5zY2F5dF9jb250ZXh0TWVudUl0ZW1zT3JkZXJ8fChhLmNvbmZpZy5zY2F5dF9jb250ZXh0TWVudUl0ZW1zT3JkZXI9XCJzdWdnZXN0fG1vcmVzdWdnZXN0fGNvbnRyb2xcIik7YS5jb25maWcuc2NheXRfc0xhbmd8fFxuKGEuY29uZmlnLnNjYXl0X3NMYW5nPVwiZW5fVVNcIik7aWYodm9pZCAwPT09YS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnN8fFwibnVtYmVyXCIhPXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9tYXhTdWdnZXN0aW9uc3x8MD5hLmNvbmZpZy5zY2F5dF9tYXhTdWdnZXN0aW9ucylhLmNvbmZpZy5zY2F5dF9tYXhTdWdnZXN0aW9ucz01O2lmKHZvaWQgMD09PWEuY29uZmlnLnNjYXl0X21pbldvcmRMZW5ndGh8fFwibnVtYmVyXCIhPXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9taW5Xb3JkTGVuZ3RofHwxPmEuY29uZmlnLnNjYXl0X21pbldvcmRMZW5ndGgpYS5jb25maWcuc2NheXRfbWluV29yZExlbmd0aD00O2lmKHZvaWQgMD09PWEuY29uZmlnLnNjYXl0X2N1c3RvbURpY3Rpb25hcnlJZHN8fFwic3RyaW5nXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfY3VzdG9tRGljdGlvbmFyeUlkcylhLmNvbmZpZy5zY2F5dF9jdXN0b21EaWN0aW9uYXJ5SWRzPVwiXCI7aWYodm9pZCAwPT09YS5jb25maWcuc2NheXRfdXNlckRpY3Rpb25hcnlOYW1lfHxcblwic3RyaW5nXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfdXNlckRpY3Rpb25hcnlOYW1lKWEuY29uZmlnLnNjYXl0X3VzZXJEaWN0aW9uYXJ5TmFtZT1udWxsO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfdWlUYWJzJiYzPT09YS5jb25maWcuc2NheXRfdWlUYWJzLnNwbGl0KFwiLFwiKS5sZW5ndGgpe3ZhciBkPVtdLGI9W107YS5jb25maWcuc2NheXRfdWlUYWJzPWEuY29uZmlnLnNjYXl0X3VpVGFicy5zcGxpdChcIixcIik7Q0tFRElUT1IudG9vbHMuc2VhcmNoKGEuY29uZmlnLnNjYXl0X3VpVGFicyxmdW5jdGlvbihhKXsxPT09TnVtYmVyKGEpfHwwPT09TnVtYmVyKGEpPyhiLnB1c2goITApLGQucHVzaChOdW1iZXIoYSkpKTpiLnB1c2goITEpfSk7bnVsbD09PUNLRURJVE9SLnRvb2xzLnNlYXJjaChiLCExKT9hLmNvbmZpZy5zY2F5dF91aVRhYnM9ZDphLmNvbmZpZy5zY2F5dF91aVRhYnM9WzEsMSwxXX1lbHNlIGEuY29uZmlnLnNjYXl0X3VpVGFicz1bMSwxLDFdO1xuXCJzdHJpbmdcIiE9dHlwZW9mIGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQcm90b2NvbCYmKGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQcm90b2NvbD1udWxsKTtcInN0cmluZ1wiIT10eXBlb2YgYS5jb25maWcuc2NheXRfc2VydmljZUhvc3QmJihhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlSG9zdD1udWxsKTtcInN0cmluZ1wiIT10eXBlb2YgYS5jb25maWcuc2NheXRfc2VydmljZVBvcnQmJihhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUG9ydD1udWxsKTtcInN0cmluZ1wiIT10eXBlb2YgYS5jb25maWcuc2NheXRfc2VydmljZVBhdGgmJihhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUGF0aD1udWxsKTthLmNvbmZpZy5zY2F5dF9tb3JlU3VnZ2VzdGlvbnN8fChhLmNvbmZpZy5zY2F5dF9tb3JlU3VnZ2VzdGlvbnM9XCJvblwiKTtcInN0cmluZ1wiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2N1c3RvbWVySWQmJihhLmNvbmZpZy5zY2F5dF9jdXN0b21lcklkPVwiMTpXdkYwRDQtVXRQcU4xLTQzbmtENC1OS3ZVbTItZGFRcWszLUxtTmlJLXo3WXNiNC1td3J5MjQtVDhZclMzLVEydHBxMlwiKTtcblwic3RyaW5nXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfc3JjVXJsJiYoYz1kb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCxjPS0xIT1jLnNlYXJjaCgvaHR0cHM/Oi8pP2M6XCJodHRwOlwiLGEuY29uZmlnLnNjYXl0X3NyY1VybD1jK1wiLy9zdmMud2Vic3BlbGxjaGVja2VyLm5ldC9zcGVsbGNoZWNrMzEvbGYvc2NheXQzL2Nrc2NheXQvY2tzY2F5dC5qc1wiKTtcImJvb2xlYW5cIiE9PXR5cGVvZiBDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlQ2hlY2tEaXJ0eSYmKENLRURJVE9SLmNvbmZpZy5zY2F5dF9oYW5kbGVDaGVja0RpcnR5PSEwKTtcImJvb2xlYW5cIiE9PXR5cGVvZiBDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlVW5kb1JlZG8mJihDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlVW5kb1JlZG89ITApO0NLRURJVE9SLmNvbmZpZy5zY2F5dF9oYW5kbGVVbmRvUmVkbz1DS0VESVRPUi5wbHVnaW5zLnVuZG8/Q0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZVVuZG9SZWRvOiExO1xuXCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZU1vZGUmJihhLmNvbmZpZy5zY2F5dF9tdWx0aUxhbmd1YWdlTW9kZT0hMSk7XCJvYmplY3RcIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9tdWx0aUxhbmd1YWdlU3R5bGVzJiYoYS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZVN0eWxlcz17fSk7YS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVBbGxDYXBzV29yZHMmJihhLmNvbmZpZy5zY2F5dF9pZ25vcmVBbGxDYXBzV29yZHM9ITEpO2EuY29uZmlnLnNjYXl0X2lnbm9yZURvbWFpbk5hbWVzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyYmKGEuY29uZmlnLnNjYXl0X2lnbm9yZURvbWFpbk5hbWVzPSExKTthLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzJiZcbihhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzPSExKTthLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhOdW1iZXJzJiZcImJvb2xlYW5cIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhOdW1iZXJzJiYoYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTnVtYmVycz0hMSk7aWYoYS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlKXt2YXIgYz1DS0VESVRPUi50b29scy5pc0FycmF5KGEuY29uZmlnLnNjYXl0X2Rpc2FibGVPcHRpb25zU3RvcmFnZSk/YS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlOlwic3RyaW5nXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlP1thLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2VdOnZvaWQgMCxlPVwiYWxsIG9wdGlvbnMgbGFuZyBpZ25vcmUtYWxsLWNhcHMtd29yZHMgaWdub3JlLWRvbWFpbi1uYW1lcyBpZ25vcmUtd29yZHMtd2l0aC1taXhlZC1jYXNlcyBpZ25vcmUtd29yZHMtd2l0aC1udW1iZXJzXCIuc3BsaXQoXCIgXCIpLFxuZj1bXCJsYW5nXCIsXCJpZ25vcmUtYWxsLWNhcHMtd29yZHNcIixcImlnbm9yZS1kb21haW4tbmFtZXNcIixcImlnbm9yZS13b3Jkcy13aXRoLW1peGVkLWNhc2VzXCIsXCJpZ25vcmUtd29yZHMtd2l0aC1udW1iZXJzXCJdLGc9Q0tFRElUT1IudG9vbHMuc2VhcmNoLGg9Q0tFRElUT1IudG9vbHMuaW5kZXhPZjthLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2U9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGM9YVtkXSxtPSEhZyhhLFwib3B0aW9uc1wiKTtpZighZyhlLGMpfHxtJiZnKGYsZnVuY3Rpb24oYSl7aWYoXCJsYW5nXCI9PT1hKXJldHVybiExfSkpcmV0dXJuO2coZixjKSYmZi5zcGxpY2UoaChmLGMpLDEpO2lmKFwiYWxsXCI9PT1jfHxtJiZnKGEsXCJsYW5nXCIpKXJldHVybltdO1wib3B0aW9uc1wiPT09YyYmKGY9W1wibGFuZ1wiXSl9cmV0dXJuIGI9Yi5jb25jYXQoZil9KGMpfX0sYWRkUnVsZTpmdW5jdGlvbihhKXt2YXIgYz1DS0VESVRPUi5wbHVnaW5zLnNjYXl0LFxuZD1hLmRhdGFQcm9jZXNzb3IsYj1kJiZkLmh0bWxGaWx0ZXIsZT1hLl8uZWxlbWVudHNQYXRoJiZhLl8uZWxlbWVudHNQYXRoLmZpbHRlcnMsZD1kJiZkLmRhdGFGaWx0ZXIsZj1hLmFkZFJlbW92ZUZvcm1hdEZpbHRlcixnPWZ1bmN0aW9uKGIpe2lmKGEuc2NheXQmJihiLmhhc0F0dHJpYnV0ZShjLm9wdGlvbnMuZGF0YV9hdHRyaWJ1dGVfbmFtZSl8fGIuaGFzQXR0cmlidXRlKGMub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGUpKSlyZXR1cm4hMX0saD1mdW5jdGlvbihiKXt2YXIgZD0hMDthLnNjYXl0JiYoYi5oYXNBdHRyaWJ1dGUoYy5vcHRpb25zLmRhdGFfYXR0cmlidXRlX25hbWUpfHxiLmhhc0F0dHJpYnV0ZShjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlKSkmJihkPSExKTtyZXR1cm4gZH07ZSYmZS5wdXNoKGcpO2QmJmQuYWRkUnVsZXMoe2VsZW1lbnRzOntzcGFuOmZ1bmN0aW9uKGEpe3ZhciBiPWEuaGFzQ2xhc3MoYy5vcHRpb25zLm1pc3NwZWxsZWRfd29yZF9jbGFzcykmJlxuYS5hdHRyaWJ1dGVzW2Mub3B0aW9ucy5kYXRhX2F0dHJpYnV0ZV9uYW1lXSxkPWEuaGFzQ2xhc3MoYy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9jbGFzcykmJmEuYXR0cmlidXRlc1tjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlXTtjJiYoYnx8ZCkmJmRlbGV0ZSBhLm5hbWU7cmV0dXJuIGF9fX0pO2ImJmIuYWRkUnVsZXMoe2VsZW1lbnRzOntzcGFuOmZ1bmN0aW9uKGEpe3ZhciBiPWEuaGFzQ2xhc3MoYy5vcHRpb25zLm1pc3NwZWxsZWRfd29yZF9jbGFzcykmJmEuYXR0cmlidXRlc1tjLm9wdGlvbnMuZGF0YV9hdHRyaWJ1dGVfbmFtZV0sZD1hLmhhc0NsYXNzKGMub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfY2xhc3MpJiZhLmF0dHJpYnV0ZXNbYy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9kYXRhX2F0dHJpYnV0ZV07YyYmKGJ8fGQpJiZkZWxldGUgYS5uYW1lO3JldHVybiBhfX19KTtmJiZmLmNhbGwoYSxoKX0sc2NheXRNZW51RGVmaW5pdGlvbjpmdW5jdGlvbihhKXt2YXIgYz1cbnRoaXM7YT1hLnNjYXl0O3JldHVybntzY2F5dDp7c2NheXRfaWdub3JlOntsYWJlbDphLmdldExvY2FsKFwiYnRuX2lnbm9yZVwiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjoxLGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC5pZ25vcmVXb3JkKCl9fSxzY2F5dF9pZ25vcmVhbGw6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5faWdub3JlQWxsXCIpLGdyb3VwOlwic2NheXRfY29udHJvbFwiLG9yZGVyOjIsZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0Lmlnbm9yZUFsbFdvcmRzKCl9fSxzY2F5dF9hZGQ6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5fYWRkV29yZFwiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjozLGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zY2F5dDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5hZGRXb3JkVG9Vc2VyRGljdGlvbmFyeSgpfSwxMCl9fSxzY2F5dF9vcHRpb246e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5fb3B0aW9uc1wiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjo0LFxuZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cIm9wdGlvbnNcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX0sdmVyaWZpY2F0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLmNvbmZpZy5zY2F5dF91aVRhYnNbMF0/ITA6ITF9fSxzY2F5dF9sYW5ndWFnZTp7bGFiZWw6YS5nZXRMb2NhbChcImJ0bl9sYW5nc1wiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjo1LGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJsYW5nc1wiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfSx2ZXJpZmljYXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEuY29uZmlnLnNjYXl0X3VpVGFic1sxXT8hMDohMX19LHNjYXl0X2RpY3Rpb25hcnk6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5fZGljdGlvbmFyaWVzXCIpLGdyb3VwOlwic2NheXRfY29udHJvbFwiLG9yZGVyOjYsZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cblwiZGljdGlvbmFyaWVzXCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9LHZlcmlmaWNhdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gMT09YS5jb25maWcuc2NheXRfdWlUYWJzWzJdPyEwOiExfX0sc2NheXRfYWJvdXQ6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5fYWJvdXRcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6NyxleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQudGFiVG9PcGVuPVwiYWJvdXRcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX19fSxncmF5dDp7Z3JheXRfcHJvYmxlbWRlc2NyaXB0aW9uOntsYWJlbDpcIkdyYW1tYXIgcHJvYmxlbSBkZXNjcmlwdGlvblwiLGdyb3VwOlwiZ3JheXRfZGVzY3JpcHRpb25cIixvcmRlcjoxLHN0YXRlOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELGV4ZWM6ZnVuY3Rpb24oYSl7fX0sZ3JheXRfaWdub3JlOntsYWJlbDphLmdldExvY2FsKFwiYnRuX2lnbm9yZVwiKSxncm91cDpcImdyYXl0X2NvbnRyb2xcIixcbm9yZGVyOjIsZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0Lmlnbm9yZVBocmFzZSgpfX19fX0sYnVpbGRTdWdnZXN0aW9uTWVudUl0ZW1zOmZ1bmN0aW9uKGEsYyxkKXt2YXIgYj17fSxlPXt9LGY9ZD9cIndvcmRcIjpcInBocmFzZVwiLGc9ZD9cInN0YXJ0R3JhbW1hckNoZWNrXCI6XCJzdGFydFNwZWxsQ2hlY2tcIixoPWEuc2NheXQ7aWYoMDxjLmxlbmd0aCYmXCJub19hbnlfc3VnZ2VzdGlvbnNcIiE9PWNbMF0paWYoZClmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgaz1cInNjYXl0X3N1Z2dlc3RfXCIrQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9uc1tkXS5yZXBsYWNlKFwiIFwiLFwiX1wiKTthLmFkZENvbW1hbmQoayx0aGlzLmNyZWF0ZUNvbW1hbmQoQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9uc1tkXSxmLGcpKTtkPGEuY29uZmlnLnNjYXl0X21heFN1Z2dlc3Rpb25zPyhhLmFkZE1lbnVJdGVtKGsse2xhYmVsOmNbZF0sY29tbWFuZDprLGdyb3VwOlwic2NheXRfc3VnZ2VzdFwiLFxub3JkZXI6ZCsxfSksYltrXT1DS0VESVRPUi5UUklTVEFURV9PRkYpOihhLmFkZE1lbnVJdGVtKGsse2xhYmVsOmNbZF0sY29tbWFuZDprLGdyb3VwOlwic2NheXRfbW9yZXN1Z2dlc3RcIixvcmRlcjpkKzF9KSxlW2tdPUNLRURJVE9SLlRSSVNUQVRFX09GRixcIm9uXCI9PT1hLmNvbmZpZy5zY2F5dF9tb3JlU3VnZ2VzdGlvbnMmJihhLmFkZE1lbnVJdGVtKFwic2NheXRfbW9yZXN1Z2dlc3RcIix7bGFiZWw6aC5nZXRMb2NhbChcImJ0bl9tb3JlU3VnZ2VzdGlvbnNcIiksZ3JvdXA6XCJzY2F5dF9tb3Jlc3VnZ2VzdFwiLG9yZGVyOjEwLGdldEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSksYi5zY2F5dF9tb3Jlc3VnZ2VzdD1DS0VESVRPUi5UUklTVEFURV9PRkYpKX1lbHNlIGZvcihkPTA7ZDxjLmxlbmd0aDtkKyspaz1cImdyYXl0X3N1Z2dlc3RfXCIrQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9uc1tkXS5yZXBsYWNlKFwiIFwiLFwiX1wiKSxhLmFkZENvbW1hbmQoayx0aGlzLmNyZWF0ZUNvbW1hbmQoQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9uc1tkXSxcbmYsZykpLGEuYWRkTWVudUl0ZW0oayx7bGFiZWw6Y1tkXSxjb21tYW5kOmssZ3JvdXA6XCJncmF5dF9zdWdnZXN0XCIsb3JkZXI6ZCsxfSksYltrXT1DS0VESVRPUi5UUklTVEFURV9PRkY7ZWxzZSBiLm5vX3NjYXl0X3N1Z2dlc3Q9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsYS5hZGRDb21tYW5kKFwibm9fc2NheXRfc3VnZ2VzdFwiLHtleGVjOmZ1bmN0aW9uKCl7fX0pLGEuYWRkTWVudUl0ZW0oXCJub19zY2F5dF9zdWdnZXN0XCIse2xhYmVsOmguZ2V0TG9jYWwoXCJidG5fbm9TdWdnZXN0aW9uc1wiKXx8XCJub19zY2F5dF9zdWdnZXN0XCIsY29tbWFuZDpcIm5vX3NjYXl0X3N1Z2dlc3RcIixncm91cDpcInNjYXl0X3N1Z2dlc3RcIixvcmRlcjowfSk7cmV0dXJuIGJ9LG1lbnVHZW5lcmF0b3I6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLnNjYXl0LGI9dGhpcy5zY2F5dE1lbnVEZWZpbml0aW9uKGEpLGU9e30sZj1hLmNvbmZpZy5zY2F5dF9jb250ZXh0Q29tbWFuZHMuc3BsaXQoXCJ8XCIpLGc9Yy5nZXRBdHRyaWJ1dGUoZC5nZXRMYW5nQXR0cmlidXRlKCkpfHxcbmQuZ2V0TGFuZygpLGgsaztoPWQuaXNTY2F5dE5vZGUoYyk7az1kLmlzR3JheXROb2RlKGMpO2g/KGI9Yi5zY2F5dCxlPWMuZ2V0QXR0cmlidXRlKGQuZ2V0U2NheXROb2RlQXR0cmlidXRlTmFtZSgpKSxkLmZpcmUoXCJnZXRTdWdnZXN0aW9uc0xpc3RcIix7bGFuZzpnLHdvcmQ6ZX0pLGU9dGhpcy5idWlsZFN1Z2dlc3Rpb25NZW51SXRlbXMoYSxDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN1Z2dlc3Rpb25zLGgpKTprJiYoYj1iLmdyYXl0LGU9Yy5nZXRBdHRyaWJ1dGUoZC5nZXRHcmF5dE5vZGVBdHRyaWJ1dGVOYW1lKCkpLGs9ZC5nZXRQcm9ibGVtRGVzY3JpcHRpb25UZXh0KGUsZyksYi5ncmF5dF9wcm9ibGVtZGVzY3JpcHRpb24mJmsmJihiLmdyYXl0X3Byb2JsZW1kZXNjcmlwdGlvbi5sYWJlbD1rKSxkLmZpcmUoXCJnZXRHcmFtbWFyU3VnZ2VzdGlvbnNMaXN0XCIse2xhbmc6ZyxwaHJhc2U6ZX0pLGU9dGhpcy5idWlsZFN1Z2dlc3Rpb25NZW51SXRlbXMoYSxDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN1Z2dlc3Rpb25zLFxuaCkpO2lmKGgmJlwib2ZmXCI9PWEuY29uZmlnLnNjYXl0X2NvbnRleHRDb21tYW5kcylyZXR1cm4gZTtmb3IodmFyIGwgaW4gYiloJiYtMT09Q0tFRElUT1IudG9vbHMuaW5kZXhPZihmLGwucmVwbGFjZShcInNjYXl0X1wiLFwiXCIpKSYmXCJhbGxcIiE9YS5jb25maWcuc2NheXRfY29udGV4dENvbW1hbmRzfHwoZVtsXT1cInVuZGVmaW5lZFwiIT10eXBlb2YgYltsXS5zdGF0ZT9iW2xdLnN0YXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRixcImZ1bmN0aW9uXCIhPT10eXBlb2YgYltsXS52ZXJpZmljYXRpb258fGJbbF0udmVyaWZpY2F0aW9uKGEpfHxkZWxldGUgZVtsXSxhLmFkZENvbW1hbmQobCx7ZXhlYzpiW2xdLmV4ZWN9KSxhLmFkZE1lbnVJdGVtKGwse2xhYmVsOmEubGFuZy5zY2F5dFtiW2xdLmxhYmVsXXx8YltsXS5sYWJlbCxjb21tYW5kOmwsZ3JvdXA6YltsXS5ncm91cCxvcmRlcjpiW2xdLm9yZGVyfSkpO3JldHVybiBlfSxjcmVhdGVDb21tYW5kOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm57ZXhlYzpmdW5jdGlvbihiKXtiPVxuYi5zY2F5dDt2YXIgZT17fTtlW2NdPWE7Yi5yZXBsYWNlU2VsZWN0aW9uTm9kZShlKTtcInN0YXJ0R3JhbW1hckNoZWNrXCI9PT1kJiZiLnJlbW92ZU1hcmt1cEluU2VsZWN0aW9uTm9kZSh7Z3JhbW1hck9ubHk6ITB9KTtiLmZpcmUoZCl9fX19KTtcbkNLRURJVE9SLnBsdWdpbnMuc2NheXQ9e3N0YXRlOntzY2F5dDp7fSxncmF5dDp7fX0sc3VnZ2VzdGlvbnM6W10sbG9hZGluZ0hlbHBlcjp7bG9hZE9yZGVyOltdfSxpc0xvYWRpbmc6ITEsb3B0aW9uczp7ZGlzYWJsaW5nQ29tbWFuZEV4ZWM6e3NvdXJjZTohMCxuZXdwYWdlOiEwLHRlbXBsYXRlczohMH0sZGF0YV9hdHRyaWJ1dGVfbmFtZTpcImRhdGEtc2NheXQtd29yZFwiLG1pc3NwZWxsZWRfd29yZF9jbGFzczpcInNjYXl0LW1pc3NwZWxsLXdvcmRcIixwcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGU6XCJkYXRhLWdyYXl0LXBocmFzZVwiLHByb2JsZW1fZ3JhbW1hcl9jbGFzczpcImdyYW1tLXByb2JsZW1cIn0sYmFja0NvbXBhdGliaWxpdHlNYXA6e3NjYXl0X3NlcnZpY2VfcHJvdG9jb2w6XCJzY2F5dF9zZXJ2aWNlUHJvdG9jb2xcIixzY2F5dF9zZXJ2aWNlX2hvc3Q6XCJzY2F5dF9zZXJ2aWNlSG9zdFwiLHNjYXl0X3NlcnZpY2VfcG9ydDpcInNjYXl0X3NlcnZpY2VQb3J0XCIsc2NheXRfc2VydmljZV9wYXRoOlwic2NheXRfc2VydmljZVBhdGhcIixcbnNjYXl0X2N1c3RvbWVyaWQ6XCJzY2F5dF9jdXN0b21lcklkXCJ9LHJlcGxhY2VPbGRPcHRpb25zTmFtZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjIGluIGEpYyBpbiB0aGlzLmJhY2tDb21wYXRpYmlsaXR5TWFwJiYoYVt0aGlzLmJhY2tDb21wYXRpYmlsaXR5TWFwW2NdXT1hW2NdLGRlbGV0ZSBhW2NdKX0sY3JlYXRlU2NheXQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPUNLRURJVE9SLnBsdWdpbnMuc2NheXQ7dGhpcy5sb2FkU2NheXRMaWJyYXJ5KGEsZnVuY3Rpb24oYSl7dmFyIGU9YS53aW5kb3cmJmEud2luZG93LmdldEZyYW1lKCl8fGEuZWRpdGFibGUoKTtlPyhlPXtsYW5nOmEuY29uZmlnLnNjYXl0X3NMYW5nLGNvbnRhaW5lcjplLiQsY3VzdG9tRGljdGlvbmFyeTphLmNvbmZpZy5zY2F5dF9jdXN0b21EaWN0aW9uYXJ5SWRzLHVzZXJEaWN0aW9uYXJ5TmFtZTphLmNvbmZpZy5zY2F5dF91c2VyRGljdGlvbmFyeU5hbWUsbG9jYWxpemF0aW9uOmEubGFuZ0NvZGUsY3VzdG9tZXJfaWQ6YS5jb25maWcuc2NheXRfY3VzdG9tZXJJZCxcbmRlYnVnOmEuY29uZmlnLnNjYXl0X2RlYnVnLGRhdGFfYXR0cmlidXRlX25hbWU6Yy5vcHRpb25zLmRhdGFfYXR0cmlidXRlX25hbWUsbWlzc3BlbGxlZF93b3JkX2NsYXNzOmMub3B0aW9ucy5taXNzcGVsbGVkX3dvcmRfY2xhc3MscHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlOmMub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGUscHJvYmxlbV9ncmFtbWFyX2NsYXNzOmMub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfY2xhc3MsXCJvcHRpb25zLXRvLXJlc3RvcmVcIjphLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2UsZm9jdXNlZDphLmVkaXRhYmxlKCkuaGFzRm9jdXMsaWdub3JlRWxlbWVudHNSZWdleDphLmNvbmZpZy5zY2F5dF9lbGVtZW50c1RvSWdub3JlLG1pbldvcmRMZW5ndGg6YS5jb25maWcuc2NheXRfbWluV29yZExlbmd0aCxtdWx0aUxhbmd1YWdlTW9kZTphLmNvbmZpZy5zY2F5dF9tdWx0aUxhbmd1YWdlTW9kZSxtdWx0aUxhbmd1YWdlU3R5bGVzOmEuY29uZmlnLnNjYXl0X211bHRpTGFuZ3VhZ2VTdHlsZXMsXG5ncmF5dEF1dG9TdGFydHVwOmQuc3RhdGUuZ3JheXRbYS5uYW1lXX0sYS5jb25maWcuc2NheXRfc2VydmljZVByb3RvY29sJiYoZS5zZXJ2aWNlX3Byb3RvY29sPWEuY29uZmlnLnNjYXl0X3NlcnZpY2VQcm90b2NvbCksYS5jb25maWcuc2NheXRfc2VydmljZUhvc3QmJihlLnNlcnZpY2VfaG9zdD1hLmNvbmZpZy5zY2F5dF9zZXJ2aWNlSG9zdCksYS5jb25maWcuc2NheXRfc2VydmljZVBvcnQmJihlLnNlcnZpY2VfcG9ydD1hLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUG9ydCksYS5jb25maWcuc2NheXRfc2VydmljZVBhdGgmJihlLnNlcnZpY2VfcGF0aD1hLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUGF0aCksXCJib29sZWFuXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzJiYoZVtcImlnbm9yZS1hbGwtY2Fwcy13b3Jkc1wiXT1hLmNvbmZpZy5zY2F5dF9pZ25vcmVBbGxDYXBzV29yZHMpLFwiYm9vbGVhblwiPT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2lnbm9yZURvbWFpbk5hbWVzJiZcbihlW1wiaWdub3JlLWRvbWFpbi1uYW1lc1wiXT1hLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyksXCJib29sZWFuXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTWl4ZWRDYXNlcyYmKGVbXCJpZ25vcmUtd29yZHMtd2l0aC1taXhlZC1jYXNlc1wiXT1hLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhNaXhlZENhc2VzKSxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVXb3Jkc1dpdGhOdW1iZXJzJiYoZVtcImlnbm9yZS13b3Jkcy13aXRoLW51bWJlcnNcIl09YS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTnVtYmVycyksZT1uZXcgU0NBWVQuQ0tTQ0FZVChlLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30pLGUuc3Vic2NyaWJlKFwic3VnZ2VzdGlvbkxpc3RTZW5kXCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXt9LGQ9W10sYz0wO2M8YS5zdWdnZXN0aW9uTGlzdC5sZW5ndGg7YysrKWJbXCJ3b3JkX1wiK2Euc3VnZ2VzdGlvbkxpc3RbY11dfHxcbihiW1wid29yZF9cIithLnN1Z2dlc3Rpb25MaXN0W2NdXT1hLnN1Z2dlc3Rpb25MaXN0W2NdLGQucHVzaChhLnN1Z2dlc3Rpb25MaXN0W2NdKSk7Q0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9ucz1kfSksZS5zdWJzY3JpYmUoXCJzZWxlY3Rpb25Jc0NoYW5nZWRcIixmdW5jdGlvbihkKXthLmdldFNlbGVjdGlvbigpLmlzTG9ja2VkJiZhLmxvY2tTZWxlY3Rpb24oKX0pLGUuc3Vic2NyaWJlKFwiZ3JheXRTdGF0ZUNoYW5nZWRcIixmdW5jdGlvbihjKXtkLnN0YXRlLmdyYXl0W2EubmFtZV09Yy5zdGF0ZX0pLGEuc2NheXQ9ZSxhLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsYS5yZWFkT25seT9DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRDpDS0VESVRPUi5UUklTVEFURV9PTikpOmQuc3RhdGUuc2NheXRbYS5uYW1lXT0hMX0pfSxkZXN0cm95OmZ1bmN0aW9uKGEpe2Euc2NheXQmJmEuc2NheXQuZGVzdHJveSgpO2RlbGV0ZSBhLnNjYXl0O2EuZmlyZShcInNjYXl0QnV0dG9uU3RhdGVcIixcbkNLRURJVE9SLlRSSVNUQVRFX09GRil9LGxvYWRTY2F5dExpYnJhcnk6ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLGIsZTt0aGlzLmxvYWRpbmdIZWxwZXJbYS5uYW1lXXx8KFwidW5kZWZpbmVkXCI9PT10eXBlb2Ygd2luZG93LlNDQVlUfHxcImZ1bmN0aW9uXCIhPT10eXBlb2Ygd2luZG93LlNDQVlULkNLU0NBWVQ/KHRoaXMubG9hZGluZ0hlbHBlclthLm5hbWVdPWMsdGhpcy5sb2FkaW5nSGVscGVyLmxvYWRPcmRlci5wdXNoKGEubmFtZSksYj1uZXcgRGF0ZSxiPWIuZ2V0VGltZSgpLGU9YS5jb25maWcuc2NheXRfc3JjVXJsLGUrPTA8PWUuaW5kZXhPZihcIj9cIik/XCJcIjpcIj9cIitiLHRoaXMubG9hZGluZ0hlbHBlci5ja3NjYXl0TG9hZGluZ3x8KENLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKGUsZnVuY3Rpb24oYSl7aWYoYSl7Q0tFRElUT1IuZmlyZU9uY2UoXCJzY2F5dFJlYWR5XCIpO2Zvcih2YXIgYj0wO2I8ZC5sb2FkaW5nSGVscGVyLmxvYWRPcmRlci5sZW5ndGg7YisrKXthPWQubG9hZGluZ0hlbHBlci5sb2FkT3JkZXJbYl07XG5pZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5sb2FkaW5nSGVscGVyW2FdKWQubG9hZGluZ0hlbHBlclthXShDS0VESVRPUi5pbnN0YW5jZXNbYV0pO2RlbGV0ZSBkLmxvYWRpbmdIZWxwZXJbYV19ZC5sb2FkaW5nSGVscGVyLmxvYWRPcmRlcj1bXX19KSx0aGlzLmxvYWRpbmdIZWxwZXIuY2tzY2F5dExvYWRpbmc9ITApKTp3aW5kb3cuU0NBWVQmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiB3aW5kb3cuU0NBWVQuQ0tTQ0FZVCYmKENLRURJVE9SLmZpcmVPbmNlKFwic2NheXRSZWFkeVwiKSxhLnNjYXl0fHxcImZ1bmN0aW9uXCI9PT10eXBlb2YgYyYmYyhhKSkpfX07XG5DS0VESVRPUi5vbihcImRpYWxvZ0RlZmluaXRpb25cIixmdW5jdGlvbihhKXt2YXIgYz1hLmRhdGEubmFtZTthPWEuZGF0YS5kZWZpbml0aW9uLmRpYWxvZztpZihcInNjYXl0RGlhbG9nXCI9PT1jKWEub24oXCJjYW5jZWxcIixmdW5jdGlvbihhKXtyZXR1cm4hMX0sdGhpcyxudWxsLC0xKTtpZihcImNoZWNrc3BlbGxcIj09PWMpYS5vbihcImNhbmNlbFwiLGZ1bmN0aW9uKGEpe2E9YS5zZW5kZXImJmEuc2VuZGVyLmdldFBhcmVudEVkaXRvcigpO3ZhciBiPUNLRURJVE9SLnBsdWdpbnMuc2NheXQsYz1hLnNjYXl0O2MmJmIuc3RhdGUuc2NheXRbYS5uYW1lXSYmYy5zZXRNYXJrdXBQYXVzZWQmJmMuc2V0TWFya3VwUGF1c2VkKCExKTthLnVubG9ja1NlbGVjdGlvbigpfSx0aGlzLG51bGwsLTIpO2lmKFwibGlua1wiPT09YylhLm9uKFwib2tcIixmdW5jdGlvbihhKXt2YXIgYj1hLnNlbmRlciYmYS5zZW5kZXIuZ2V0UGFyZW50RWRpdG9yKCk7YiYmc2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcInJlbG9hZE1hcmt1cFNjYXl0XCIsXG57cmVtb3ZlT3B0aW9uczp7cmVtb3ZlSW5zaWRlOiEwLGZvcmNlQm9va21hcms6ITB9LHRpbWVvdXQ6MH0pfSwwKX0pfSk7XG5DS0VESVRPUi5vbihcInNjYXl0UmVhZHlcIixmdW5jdGlvbigpe2lmKCEwPT09Q0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZUNoZWNrRGlydHkpe3ZhciBhPUNLRURJVE9SLmVkaXRvci5wcm90b3R5cGU7YS5jaGVja0RpcnR5PUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGEuY2hlY2tEaXJ0eSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1udWxsLGM9dGhpcy5zY2F5dDtpZihDS0VESVRPUi5wbHVnaW5zLnNjYXl0JiZDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN0YXRlLnNjYXl0W3RoaXMubmFtZV0mJnRoaXMuc2NheXQpe2lmKGI9XCJyZWFkeVwiPT10aGlzLnN0YXR1cyl2YXIgZj1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcodGhpcy5nZXRTbmFwc2hvdCgpKSxjPWMucmVtb3ZlTWFya3VwRnJvbVN0cmluZyh0aGlzLl8ucHJldmlvdXNWYWx1ZSksYj1iJiZjIT09Zn1lbHNlIGI9YS5jYWxsKHRoaXMpO3JldHVybiBifX0pO2EucmVzZXREaXJ0eT1DS0VESVRPUi50b29scy5vdmVycmlkZShhLnJlc2V0RGlydHksXG5mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj10aGlzLnNjYXl0O0NLRURJVE9SLnBsdWdpbnMuc2NheXQmJkNLRURJVE9SLnBsdWdpbnMuc2NheXQuc3RhdGUuc2NheXRbdGhpcy5uYW1lXSYmdGhpcy5zY2F5dD90aGlzLl8ucHJldmlvdXNWYWx1ZT1iLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcodGhpcy5nZXRTbmFwc2hvdCgpKTphLmNhbGwodGhpcyl9fSl9aWYoITA9PT1DS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlVW5kb1JlZG8pe3ZhciBhPUNLRURJVE9SLnBsdWdpbnMudW5kby5JbWFnZS5wcm90b3R5cGUsYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmVxdWFsc0NvbnRlbnQ/XCJlcXVhbHNDb250ZW50XCI6XCJlcXVhbHNcIjthW2NdPUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKGFbY10sZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIuZWRpdG9yLnNjYXl0LGY9dGhpcy5jb250ZW50cyxnPWIuY29udGVudHMsaD1udWxsO0NLRURJVE9SLnBsdWdpbnMuc2NheXQmJlxuQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdGF0ZS5zY2F5dFtiLmVkaXRvci5uYW1lXSYmYi5lZGl0b3Iuc2NheXQmJih0aGlzLmNvbnRlbnRzPWMucmVtb3ZlTWFya3VwRnJvbVN0cmluZyhmKXx8XCJcIixiLmNvbnRlbnRzPWMucmVtb3ZlTWFya3VwRnJvbVN0cmluZyhnKXx8XCJcIik7aD1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbnRlbnRzPWY7Yi5jb250ZW50cz1nO3JldHVybiBofX0pfX0pOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwic3R5bGVzY29tYm9cIix7cmVxdWlyZXM6XCJyaWNoY29tYm9cIixpbml0OmZ1bmN0aW9uKGMpe3ZhciBsPWMuY29uZmlnLGc9Yy5sYW5nLnN0eWxlc2NvbWJvLGY9e30saz1bXSxtPVtdO2Mub24oXCJzdHlsZXNTZXRcIixmdW5jdGlvbihiKXtpZihiPWIuZGF0YS5zdHlsZXMpe2Zvcih2YXIgYSxoLGQsZT0wLG49Yi5sZW5ndGg7ZTxuO2UrKykoYT1iW2VdLGMuYmxvY2tsZXNzJiZhLmVsZW1lbnQgaW4gQ0tFRElUT1IuZHRkLiRibG9ja3x8KGg9YS5uYW1lLGE9bmV3IENLRURJVE9SLnN0eWxlKGEpLGMuZmlsdGVyLmN1c3RvbUNvbmZpZyYmIWMuZmlsdGVyLmNoZWNrKGEpKSl8fChhLl9uYW1lPWgsYS5fLmVudGVyTW9kZT1sLmVudGVyTW9kZSxhLl8udHlwZT1kPWEuYXNzaWduZWRUb3x8YS50eXBlLGEuXy53ZWlnaHQ9ZSsxRTMqKGQ9PUNLRURJVE9SLlNUWUxFX09CSkVDVD8xOmQ9PUNLRURJVE9SLlNUWUxFX0JMT0NLPzI6MyksZltoXT1cbmEsay5wdXNoKGEpLG0ucHVzaChhKSk7ay5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuXy53ZWlnaHQtYi5fLndlaWdodH0pfX0pO2MudWkuYWRkUmljaENvbWJvKFwiU3R5bGVzXCIse2xhYmVsOmcubGFiZWwsdGl0bGU6Zy5wYW5lbFRpdGxlLHRvb2xiYXI6XCJzdHlsZXMsMTBcIixhbGxvd2VkQ29udGVudDptLHBhbmVsOntjc3M6W0NLRURJVE9SLnNraW4uZ2V0UGF0aChcImVkaXRvclwiKV0uY29uY2F0KGwuY29udGVudHNDc3MpLG11bHRpU2VsZWN0OiEwLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmcucGFuZWxUaXRsZX19LGluaXQ6ZnVuY3Rpb24oKXt2YXIgYixhLGMsZCxlLGY7ZT0wO2ZvcihmPWsubGVuZ3RoO2U8ZjtlKyspYj1rW2VdLGE9Yi5fbmFtZSxkPWIuXy50eXBlLGQhPWMmJih0aGlzLnN0YXJ0R3JvdXAoZ1tcInBhbmVsVGl0bGVcIitTdHJpbmcoZCldKSxjPWQpLHRoaXMuYWRkKGEsYi50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/YTpiLmJ1aWxkUHJldmlldygpLGEpO1xudGhpcy5jb21taXQoKX0sb25DbGljazpmdW5jdGlvbihiKXtjLmZvY3VzKCk7Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2I9ZltiXTt2YXIgYT1jLmVsZW1lbnRQYXRoKCk7Y1tiLmNoZWNrQWN0aXZlKGEsYyk/XCJyZW1vdmVTdHlsZVwiOlwiYXBwbHlTdHlsZVwiXShiKTtjLmZpcmUoXCJzYXZlU25hcHNob3RcIil9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7Yy5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0VmFsdWUoKTtiPWIuZGF0YS5wYXRoLmVsZW1lbnRzO2Zvcih2YXIgaD0wLGQ9Yi5sZW5ndGgsZTtoPGQ7aCsrKXtlPWJbaF07Zm9yKHZhciBnIGluIGYpaWYoZltnXS5jaGVja0VsZW1lbnRSZW1vdmFibGUoZSwhMCxjKSl7ZyE9YSYmdGhpcy5zZXRWYWx1ZShnKTtyZXR1cm59fXRoaXMuc2V0VmFsdWUoXCJcIil9LHRoaXMpfSxvbk9wZW46ZnVuY3Rpb24oKXt2YXIgYj1jLmdldFNlbGVjdGlvbigpLmdldFNlbGVjdGVkRWxlbWVudCgpLGI9Yy5lbGVtZW50UGF0aChiKSxcbmE9WzAsMCwwLDBdO3RoaXMuc2hvd0FsbCgpO3RoaXMudW5tYXJrQWxsKCk7Zm9yKHZhciBoIGluIGYpe3ZhciBkPWZbaF0sZT1kLl8udHlwZTtkLmNoZWNrQXBwbGljYWJsZShiLGMsYy5hY3RpdmVGaWx0ZXIpP2FbZV0rKzp0aGlzLmhpZGVJdGVtKGgpO2QuY2hlY2tBY3RpdmUoYixjKSYmdGhpcy5tYXJrKGgpfWFbQ0tFRElUT1IuU1RZTEVfQkxPQ0tdfHx0aGlzLmhpZGVHcm91cChnW1wicGFuZWxUaXRsZVwiK1N0cmluZyhDS0VESVRPUi5TVFlMRV9CTE9DSyldKTthW0NLRURJVE9SLlNUWUxFX0lOTElORV18fHRoaXMuaGlkZUdyb3VwKGdbXCJwYW5lbFRpdGxlXCIrU3RyaW5nKENLRURJVE9SLlNUWUxFX0lOTElORSldKTthW0NLRURJVE9SLlNUWUxFX09CSkVDVF18fHRoaXMuaGlkZUdyb3VwKGdbXCJwYW5lbFRpdGxlXCIrU3RyaW5nKENLRURJVE9SLlNUWUxFX09CSkVDVCldKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBiPWMuZWxlbWVudFBhdGgoKTtpZihiKXtmb3IodmFyIGEgaW4gZilpZihmW2FdLmNoZWNrQXBwbGljYWJsZShiLFxuYyxjLmFjdGl2ZUZpbHRlcikpcmV0dXJuO3RoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX0scmVzZXQ6ZnVuY3Rpb24oKXtmPXt9O2s9W119fSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGsoYyl7cmV0dXJue2VkaXRvckZvY3VzOiExLGNhblVuZG86ITEsbW9kZXM6e3d5c2l3eWc6MX0sZXhlYzpmdW5jdGlvbihkKXtpZihkLmVkaXRhYmxlKCkuaGFzRm9jdXMpe3ZhciBlPWQuZ2V0U2VsZWN0aW9uKCksYjtpZihiPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGUuZ2V0Q29tbW9uQW5jZXN0b3IoKSxlLnJvb3QpKS5jb250YWlucyh7dGQ6MSx0aDoxfSwxKSl7dmFyIGU9ZC5jcmVhdGVSYW5nZSgpLGE9Q0tFRElUT1IudG9vbHMudHJ5VGhlc2UoZnVuY3Rpb24oKXt2YXIgYT1iLmdldFBhcmVudCgpLiQuY2VsbHNbYi4kLmNlbGxJbmRleCsoYz8tMToxKV07YS5wYXJlbnROb2RlLnBhcmVudE5vZGU7cmV0dXJuIGF9LGZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRQYXJlbnQoKSxhPWEuZ2V0QXNjZW5kYW50KFwidGFibGVcIikuJC5yb3dzW2EuJC5yb3dJbmRleCsoYz8tMToxKV07cmV0dXJuIGEuY2VsbHNbYz9hLmNlbGxzLmxlbmd0aC0xOlxuMF19KTtpZihhfHxjKWlmKGEpYT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSksZS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGEpLGUuY2hlY2tTdGFydE9mQmxvY2soKSYmZS5jaGVja0VuZE9mQmxvY2soKXx8ZS5zZWxlY3ROb2RlQ29udGVudHMoYSk7ZWxzZSByZXR1cm4hMDtlbHNle2Zvcih2YXIgZj1iLmdldEFzY2VuZGFudChcInRhYmxlXCIpLiQsYT1iLmdldFBhcmVudCgpLiQuY2VsbHMsZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZi5pbnNlcnRSb3coLTEpLGQuZG9jdW1lbnQpLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspZi5hcHBlbmQoKG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhW2ddLGQuZG9jdW1lbnQpKS5jbG9uZSghMSwhMSkpLmFwcGVuZEJvZ3VzKCk7ZS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGYpfWUuc2VsZWN0KCEwKTtyZXR1cm4hMH19cmV0dXJuITF9fX12YXIgaD17ZWRpdG9yRm9jdXM6ITEsbW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX19LGc9e2V4ZWM6ZnVuY3Rpb24oYyl7Yy5jb250YWluZXIuZm9jdXNOZXh0KCEwLFxuYy50YWJJbmRleCl9fSxmPXtleGVjOmZ1bmN0aW9uKGMpe2MuY29udGFpbmVyLmZvY3VzUHJldmlvdXMoITAsYy50YWJJbmRleCl9fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInRhYlwiLHtpbml0OmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0hMSE9PWMuY29uZmlnLmVuYWJsZVRhYktleVRvb2xzLGU9Yy5jb25maWcudGFiU3BhY2VzfHwwLGI9XCJcIjtlLS07KWIrPVwiwqBcIjtpZihiKWMub24oXCJrZXlcIixmdW5jdGlvbihhKXs5PT1hLmRhdGEua2V5Q29kZSYmKGMuaW5zZXJ0VGV4dChiKSxhLmNhbmNlbCgpKX0pO2lmKGQpYy5vbihcImtleVwiLGZ1bmN0aW9uKGEpeyg5PT1hLmRhdGEua2V5Q29kZSYmYy5leGVjQ29tbWFuZChcInNlbGVjdE5leHRDZWxsXCIpfHxhLmRhdGEua2V5Q29kZT09Q0tFRElUT1IuU0hJRlQrOSYmYy5leGVjQ29tbWFuZChcInNlbGVjdFByZXZpb3VzQ2VsbFwiKSkmJmEuY2FuY2VsKCl9KTtjLmFkZENvbW1hbmQoXCJibHVyXCIsQ0tFRElUT1IudG9vbHMuZXh0ZW5kKGcsaCkpO2MuYWRkQ29tbWFuZChcImJsdXJCYWNrXCIsXG5DS0VESVRPUi50b29scy5leHRlbmQoZixoKSk7Yy5hZGRDb21tYW5kKFwic2VsZWN0TmV4dENlbGxcIixrKCkpO2MuYWRkQ29tbWFuZChcInNlbGVjdFByZXZpb3VzQ2VsbFwiLGsoITApKX19KX0pKCk7XG5DS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUuZm9jdXNOZXh0PWZ1bmN0aW9uKGssaCl7dmFyIGc9dm9pZCAwPT09aD90aGlzLmdldFRhYkluZGV4KCk6aCxmLGMsZCxlLGIsYTtpZigwPj1nKWZvcihiPXRoaXMuZ2V0TmV4dFNvdXJjZU5vZGUoayxDS0VESVRPUi5OT0RFX0VMRU1FTlQpO2I7KXtpZihiLmlzVmlzaWJsZSgpJiYwPT09Yi5nZXRUYWJJbmRleCgpKXtkPWI7YnJlYWt9Yj1iLmdldE5leHRTb3VyY2VOb2RlKCExLENLRURJVE9SLk5PREVfRUxFTUVOVCl9ZWxzZSBmb3IoYj10aGlzLmdldERvY3VtZW50KCkuZ2V0Qm9keSgpLmdldEZpcnN0KCk7Yj1iLmdldE5leHRTb3VyY2VOb2RlKCExLENLRURJVE9SLk5PREVfRUxFTUVOVCk7KXtpZighZilpZighYyYmYi5lcXVhbHModGhpcykpe2lmKGM9ITAsayl7aWYoIShiPWIuZ2V0TmV4dFNvdXJjZU5vZGUoITAsQ0tFRElUT1IuTk9ERV9FTEVNRU5UKSkpYnJlYWs7Zj0xfX1lbHNlIGMmJiF0aGlzLmNvbnRhaW5zKGIpJiZcbihmPTEpO2lmKGIuaXNWaXNpYmxlKCkmJiEoMD4oYT1iLmdldFRhYkluZGV4KCkpKSl7aWYoZiYmYT09Zyl7ZD1iO2JyZWFrfWE+ZyYmKCFkfHwhZXx8YTxlKT8oZD1iLGU9YSk6ZHx8MCE9PWF8fChkPWIsZT1hKX19ZCYmZC5mb2N1cygpfTtcbkNLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZS5mb2N1c1ByZXZpb3VzPWZ1bmN0aW9uKGssaCl7Zm9yKHZhciBnPXZvaWQgMD09PWg/dGhpcy5nZXRUYWJJbmRleCgpOmgsZixjLGQsZT0wLGIsYT10aGlzLmdldERvY3VtZW50KCkuZ2V0Qm9keSgpLmdldExhc3QoKTthPWEuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCExLENLRURJVE9SLk5PREVfRUxFTUVOVCk7KXtpZighZilpZighYyYmYS5lcXVhbHModGhpcykpe2lmKGM9ITAsayl7aWYoIShhPWEuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCEwLENLRURJVE9SLk5PREVfRUxFTUVOVCkpKWJyZWFrO2Y9MX19ZWxzZSBjJiYhdGhpcy5jb250YWlucyhhKSYmKGY9MSk7aWYoYS5pc1Zpc2libGUoKSYmISgwPihiPWEuZ2V0VGFiSW5kZXgoKSkpKWlmKDA+PWcpe2lmKGYmJjA9PT1iKXtkPWE7YnJlYWt9Yj5lJiYoZD1hLGU9Yil9ZWxzZXtpZihmJiZiPT1nKXtkPWE7YnJlYWt9YjxnJiYoIWR8fGI+ZSkmJihkPWEsZT1iKX19ZCYmZC5mb2N1cygpfTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInRhYmxlXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBlKGEpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoYXx8e30se2NvbnRleHRTZW5zaXRpdmU6MSxyZWZyZXNoOmZ1bmN0aW9uKGEsZil7dGhpcy5zZXRTdGF0ZShmLmNvbnRhaW5zKFwidGFibGVcIiwxKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX0pfWlmKCFhLmJsb2NrbGVzcyl7dmFyIGM9YS5sYW5nLnRhYmxlO2EuYWRkQ29tbWFuZChcInRhYmxlXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJ0YWJsZVwiLHtjb250ZXh0OlwidGFibGVcIixhbGxvd2VkQ29udGVudDpcInRhYmxle3dpZHRoLGhlaWdodH1bYWxpZ24sYm9yZGVyLGNlbGxwYWRkaW5nLGNlbGxzcGFjaW5nLHN1bW1hcnldO2NhcHRpb24gdGJvZHkgdGhlYWQgdGZvb3Q7dGggdGQgdHJbc2NvcGVdO1wiKyhhLnBsdWdpbnMuZGlhbG9nYWR2dGFiP1xuXCJ0YWJsZVwiK2EucGx1Z2lucy5kaWFsb2dhZHZ0YWIuYWxsb3dlZENvbnRlbnQoKTpcIlwiKSxyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGNvbnRlbnRUcmFuc2Zvcm1hdGlvbnM6W1tcInRhYmxle3dpZHRofTogc2l6ZVRvU3R5bGVcIixcInRhYmxlW3dpZHRoXTogc2l6ZVRvQXR0cmlidXRlXCJdXX0pKTthLmFkZENvbW1hbmQoXCJ0YWJsZVByb3BlcnRpZXNcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcInRhYmxlUHJvcGVydGllc1wiLGUoKSkpO2EuYWRkQ29tbWFuZChcInRhYmxlRGVsZXRlXCIsZSh7ZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnRQYXRoKCkuY29udGFpbnMoXCJ0YWJsZVwiLDEpO2lmKGIpe3ZhciBkPWIuZ2V0UGFyZW50KCksYz1hLmVkaXRhYmxlKCk7MSE9ZC5nZXRDaGlsZENvdW50KCl8fGQuaXMoXCJ0ZFwiLFwidGhcIil8fGQuZXF1YWxzKGMpfHwoYj1kKTthPWEuY3JlYXRlUmFuZ2UoKTthLm1vdmVUb1Bvc2l0aW9uKGIsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtcbmIucmVtb3ZlKCk7YS5zZWxlY3QoKX19fSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlRhYmxlXCIse2xhYmVsOmMudG9vbGJhcixjb21tYW5kOlwidGFibGVcIix0b29sYmFyOlwiaW5zZXJ0LDMwXCJ9KTtDS0VESVRPUi5kaWFsb2cuYWRkKFwidGFibGVcIix0aGlzLnBhdGgrXCJkaWFsb2dzL3RhYmxlLmpzXCIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJ0YWJsZVByb3BlcnRpZXNcIix0aGlzLnBhdGgrXCJkaWFsb2dzL3RhYmxlLmpzXCIpO2EuYWRkTWVudUl0ZW1zJiZhLmFkZE1lbnVJdGVtcyh7dGFibGU6e2xhYmVsOmMubWVudSxjb21tYW5kOlwidGFibGVQcm9wZXJ0aWVzXCIsZ3JvdXA6XCJ0YWJsZVwiLG9yZGVyOjV9LHRhYmxlZGVsZXRlOntsYWJlbDpjLmRlbGV0ZVRhYmxlLGNvbW1hbmQ6XCJ0YWJsZURlbGV0ZVwiLGdyb3VwOlwidGFibGVcIixvcmRlcjoxfX0pO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe2EuZGF0YS5lbGVtZW50LmlzKFwidGFibGVcIikmJihhLmRhdGEuZGlhbG9nPVxuXCJ0YWJsZVByb3BlcnRpZXNcIil9KTthLmNvbnRleHRNZW51JiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKCl7cmV0dXJue3RhYmxlZGVsZXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fSl9fX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7ZnVuY3Rpb24gZChhKXswPGIubGVuZ3RofHxhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IUMudGVzdChhLmdldE5hbWUoKSl8fGEuZ2V0Q3VzdG9tRGF0YShcInNlbGVjdGVkX2NlbGxcIil8fChDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoYyxhLFwic2VsZWN0ZWRfY2VsbFwiLCEwKSxiLnB1c2goYSkpfWU9ZS5nZXRSYW5nZXMoKTtmb3IodmFyIGI9W10sYz17fSxhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBmPWVbYV07aWYoZi5jb2xsYXBzZWQpZj1mLmdldENvbW1vbkFuY2VzdG9yKCksKGY9Zi5nZXRBc2NlbmRhbnQoXCJ0ZFwiLCEwKXx8Zi5nZXRBc2NlbmRhbnQoXCJ0aFwiLCEwKSkmJmIucHVzaChmKTtlbHNle3ZhciBmPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYpLGc7Zm9yKGYuZ3VhcmQ9ZDtnPWYubmV4dCgpOylnLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZy5pcyhDS0VESVRPUi5kdGQudGFibGUpfHwoZz1nLmdldEFzY2VuZGFudChcInRkXCIsXG4hMCl8fGcuZ2V0QXNjZW5kYW50KFwidGhcIiwhMCkpJiYhZy5nZXRDdXN0b21EYXRhKFwic2VsZWN0ZWRfY2VsbFwiKSYmKENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihjLGcsXCJzZWxlY3RlZF9jZWxsXCIsITApLGIucHVzaChnKSl9fUNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhjKTtyZXR1cm4gYn1mdW5jdGlvbiBwKGUsZCl7Zm9yKHZhciBiPXQoZSksYz1iWzBdLGE9Yy5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSxjPWMuZ2V0RG9jdW1lbnQoKSxmPWJbMF0uZ2V0UGFyZW50KCksZz1mLiQucm93SW5kZXgsYj1iW2IubGVuZ3RoLTFdLGg9Yi5nZXRQYXJlbnQoKS4kLnJvd0luZGV4K2IuJC5yb3dTcGFuLTEsYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYS4kLnJvd3NbaF0pLGc9ZD9nOmgsZj1kP2Y6YixiPUNLRURJVE9SLnRvb2xzLmJ1aWxkVGFibGVNYXAoYSksYT1iW2ddLGc9ZD9iW2ctMV06YltnKzFdLGI9YlswXS5sZW5ndGgsYz1jLmNyZWF0ZUVsZW1lbnQoXCJ0clwiKSxcbmg9MDthW2hdJiZoPGI7aCsrKXt2YXIgazsxPGFbaF0ucm93U3BhbiYmZyYmYVtoXT09Z1toXT8oaz1hW2hdLGsucm93U3Bhbis9MSk6KGs9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhW2hdKSkuY2xvbmUoKSxrLnJlbW92ZUF0dHJpYnV0ZShcInJvd1NwYW5cIiksay5hcHBlbmRCb2d1cygpLGMuYXBwZW5kKGspLGs9ay4kKTtoKz1rLmNvbFNwYW4tMX1kP2MuaW5zZXJ0QmVmb3JlKGYpOmMuaW5zZXJ0QWZ0ZXIoZil9ZnVuY3Rpb24gdShlKXtpZihlIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbil7dmFyIGQ9dChlKSxiPWRbMF0uZ2V0QXNjZW5kYW50KFwidGFibGVcIiksYz1DS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwKGIpO2U9ZFswXS5nZXRQYXJlbnQoKS4kLnJvd0luZGV4O2Zvcih2YXIgZD1kW2QubGVuZ3RoLTFdLGE9ZC5nZXRQYXJlbnQoKS4kLnJvd0luZGV4K2QuJC5yb3dTcGFuLTEsZD1bXSxmPWU7Zjw9YTtmKyspe2Zvcih2YXIgZz1jW2ZdLGg9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGIuJC5yb3dzW2ZdKSxcbms9MDtrPGcubGVuZ3RoO2srKyl7dmFyIGw9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGdba10pLG49bC5nZXRQYXJlbnQoKS4kLnJvd0luZGV4OzE9PWwuJC5yb3dTcGFuP2wucmVtb3ZlKCk6KC0tbC4kLnJvd1NwYW4sbj09ZiYmKG49Y1tmKzFdLG5bay0xXT9sLmluc2VydEFmdGVyKG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChuW2stMV0pKToobmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGIuJC5yb3dzW2YrMV0pKS5hcHBlbmQobCwxKSkpO2srPWwuJC5jb2xTcGFuLTF9ZC5wdXNoKGgpfWM9Yi4kLnJvd3M7Yj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoY1thKzFdfHwoMDxlP2NbZS0xXTpudWxsKXx8Yi4kLnBhcmVudE5vZGUpO2ZvcihmPWQubGVuZ3RoOzA8PWY7Zi0tKXUoZFtmXSk7cmV0dXJuIGJ9ZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50JiYoYj1lLmdldEFzY2VuZGFudChcInRhYmxlXCIpLDE9PWIuJC5yb3dzLmxlbmd0aD9iLnJlbW92ZSgpOmUucmVtb3ZlKCkpO1xucmV0dXJuIG51bGx9ZnVuY3Rpb24gdihlLGQpe2Zvcih2YXIgYj1kP0luZmluaXR5OjAsYz0wO2M8ZS5sZW5ndGg7YysrKXt2YXIgYTthPWVbY107Zm9yKHZhciBmPWQsZz1hLmdldFBhcmVudCgpLiQuY2VsbHMsaD0wLGs9MDtrPGcubGVuZ3RoO2srKyl7dmFyIGw9Z1trXSxoPWgrKGY/MTpsLmNvbFNwYW4pO2lmKGw9PWEuJClicmVha31hPWgtMTtpZihkP2E8YjphPmIpYj1hfXJldHVybiBifWZ1bmN0aW9uIG0oZSxkKXtmb3IodmFyIGI9dChlKSxjPWJbMF0uZ2V0QXNjZW5kYW50KFwidGFibGVcIiksYT12KGIsMSksYj12KGIpLGE9ZD9hOmIsZj1DS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwKGMpLGM9W10sYj1bXSxnPWYubGVuZ3RoLGg9MDtoPGc7aCsrKWMucHVzaChmW2hdW2FdKSxiLnB1c2goZD9mW2hdW2EtMV06ZltoXVthKzFdKTtmb3IoaD0wO2g8ZztoKyspY1toXSYmKDE8Y1toXS5jb2xTcGFuJiZiW2hdPT1jW2hdPyhhPWNbaF0sYS5jb2xTcGFuKz0xKTooYT0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGNbaF0pKS5jbG9uZSgpLFxuYS5yZW1vdmVBdHRyaWJ1dGUoXCJjb2xTcGFuXCIpLGEuYXBwZW5kQm9ndXMoKSxhW2Q/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdLmNhbGwoYSxuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoY1toXSkpLGE9YS4kKSxoKz1hLnJvd1NwYW4tMSl9ZnVuY3Rpb24geShlLGQpe3ZhciBiPWUuZ2V0U3RhcnRFbGVtZW50KCk7aWYoYj1iLmdldEFzY2VuZGFudChcInRkXCIsMSl8fGIuZ2V0QXNjZW5kYW50KFwidGhcIiwxKSl7dmFyIGM9Yi5jbG9uZSgpO2MuYXBwZW5kQm9ndXMoKTtkP2MuaW5zZXJ0QmVmb3JlKGIpOmMuaW5zZXJ0QWZ0ZXIoYil9fWZ1bmN0aW9uIHgoZSl7aWYoZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5zZWxlY3Rpb24pe2U9dChlKTt2YXIgZD1lWzBdJiZlWzBdLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGI7YTp7dmFyIGM9MDtiPWUubGVuZ3RoLTE7Zm9yKHZhciBhPXt9LGYsZztmPWVbYysrXTspQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGEsZixcImRlbGV0ZV9jZWxsXCIsXG4hMCk7Zm9yKGM9MDtmPWVbYysrXTspaWYoKGc9Zi5nZXRQcmV2aW91cygpKSYmIWcuZ2V0Q3VzdG9tRGF0YShcImRlbGV0ZV9jZWxsXCIpfHwoZz1mLmdldE5leHQoKSkmJiFnLmdldEN1c3RvbURhdGEoXCJkZWxldGVfY2VsbFwiKSl7Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGEpO2I9ZzticmVhayBhfUNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhhKTtnPWVbMF0uZ2V0UGFyZW50KCk7KGc9Zy5nZXRQcmV2aW91cygpKT9iPWcuZ2V0TGFzdCgpOihnPWVbYl0uZ2V0UGFyZW50KCksYj0oZz1nLmdldE5leHQoKSk/Zy5nZXRDaGlsZCgwKTpudWxsKX1mb3IoZz1lLmxlbmd0aC0xOzA8PWc7Zy0tKXgoZVtnXSk7Yj9xKGIsITApOmQmJmQucmVtb3ZlKCl9ZWxzZSBlIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQmJihkPWUuZ2V0UGFyZW50KCksMT09ZC5nZXRDaGlsZENvdW50KCk/ZC5yZW1vdmUoKTplLnJlbW92ZSgpKX1mdW5jdGlvbiBxKGUsXG5kKXt2YXIgYj1lLmdldERvY3VtZW50KCksYz1DS0VESVRPUi5kb2N1bWVudDtDS0VESVRPUi5lbnYuaWUmJjEwPT1DS0VESVRPUi5lbnYudmVyc2lvbiYmKGMuZm9jdXMoKSxiLmZvY3VzKCkpO2I9bmV3IENLRURJVE9SLmRvbS5yYW5nZShiKTtiW1wibW92ZVRvRWxlbWVudEVkaXRcIisoZD9cIkVuZFwiOlwiU3RhcnRcIildKGUpfHwoYi5zZWxlY3ROb2RlQ29udGVudHMoZSksYi5jb2xsYXBzZShkPyExOiEwKSk7Yi5zZWxlY3QoITApfWZ1bmN0aW9uIHooZSxkLGIpe2U9ZVtkXTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYilyZXR1cm4gZTtmb3IoZD0wO2UmJmQ8ZS5sZW5ndGg7ZCsrKXtpZihiLmlzJiZlW2RdPT1iLiQpcmV0dXJuIGQ7aWYoZD09YilyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGVbZF0pfXJldHVybiBiLmlzPy0xOm51bGx9ZnVuY3Rpb24gdyhlLGQsYil7dmFyIGM9dChlKSxhO2lmKChkPzEhPWMubGVuZ3RoOjI+Yy5sZW5ndGgpfHwoYT1lLmdldENvbW1vbkFuY2VzdG9yKCkpJiZcbmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKFwidGFibGVcIikpcmV0dXJuITE7dmFyIGY7ZT1jWzBdO2E9ZS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKTt2YXIgZz1DS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwKGEpLGg9Zy5sZW5ndGgsaz1nWzBdLmxlbmd0aCxsPWUuZ2V0UGFyZW50KCkuJC5yb3dJbmRleCxuPXooZyxsLGUpO2lmKGQpe3ZhciByO3RyeXt2YXIgcT1wYXJzZUludChlLmdldEF0dHJpYnV0ZShcInJvd3NwYW5cIiksMTApfHwxO2Y9cGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJjb2xzcGFuXCIpLDEwKXx8MTtyPWdbXCJ1cFwiPT1kP2wtcTpcImRvd25cIj09ZD9sK3E6bF1bXCJsZWZ0XCI9PWQ/bi1mOlwicmlnaHRcIj09ZD9uK2Y6bl19Y2F0Y2goRCl7cmV0dXJuITF9aWYoIXJ8fGUuJD09cilyZXR1cm4hMTtjW1widXBcIj09ZHx8XCJsZWZ0XCI9PWQ/XCJ1bnNoaWZ0XCI6XCJwdXNoXCJdKG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChyKSl9ZD1lLmdldERvY3VtZW50KCk7dmFyIHA9bCxcbnE9cj0wLHU9IWImJm5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChkKSx3PTA7Zm9yKGQ9MDtkPGMubGVuZ3RoO2QrKyl7Zj1jW2RdO3ZhciBtPWYuZ2V0UGFyZW50KCkseD1mLmdldEZpcnN0KCksdj1mLiQuY29sU3Bhbix5PWYuJC5yb3dTcGFuLG09bS4kLnJvd0luZGV4LEE9eihnLG0sZiksdz13K3YqeSxxPU1hdGgubWF4KHEsQS1uK3YpO3I9TWF0aC5tYXgocixtLWwreSk7Ynx8KHY9ZiwoeT12LmdldEJvZ3VzKCkpJiZ5LnJlbW92ZSgpLHYudHJpbSgpLGYuZ2V0Q2hpbGRyZW4oKS5jb3VudCgpJiYobT09cHx8IXh8fHguaXNCbG9ja0JvdW5kYXJ5JiZ4LmlzQmxvY2tCb3VuZGFyeSh7YnI6MX0pfHwocD11LmdldExhc3QoQ0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCkpLCFwfHxwLmlzJiZwLmlzKFwiYnJcIil8fHUuYXBwZW5kKFwiYnJcIikpLGYubW92ZUNoaWxkcmVuKHUpKSxkP2YucmVtb3ZlKCk6Zi5zZXRIdG1sKFwiXCIpKTtwPW19aWYoYilyZXR1cm4gcipcbnE9PXc7dS5tb3ZlQ2hpbGRyZW4oZSk7ZS5hcHBlbmRCb2d1cygpO3E+PWs/ZS5yZW1vdmVBdHRyaWJ1dGUoXCJyb3dTcGFuXCIpOmUuJC5yb3dTcGFuPXI7cj49aD9lLnJlbW92ZUF0dHJpYnV0ZShcImNvbFNwYW5cIik6ZS4kLmNvbFNwYW49cTtiPW5ldyBDS0VESVRPUi5kb20ubm9kZUxpc3QoYS4kLnJvd3MpO2M9Yi5jb3VudCgpO2ZvcihkPWMtMTswPD1kO2QtLSlhPWIuZ2V0SXRlbShkKSxhLiQuY2VsbHMubGVuZ3RofHwoYS5yZW1vdmUoKSxjKyspO3JldHVybiBlfWZ1bmN0aW9uIEEoZSxkKXt2YXIgYj10KGUpO2lmKDE8Yi5sZW5ndGgpcmV0dXJuITE7aWYoZClyZXR1cm4hMDt2YXIgYj1iWzBdLGM9Yi5nZXRQYXJlbnQoKSxhPWMuZ2V0QXNjZW5kYW50KFwidGFibGVcIiksZj1DS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwKGEpLGc9Yy4kLnJvd0luZGV4LGg9eihmLGcsYiksaz1iLiQucm93U3BhbixsO2lmKDE8ayl7bD1NYXRoLmNlaWwoay8yKTtmb3IodmFyIGs9TWF0aC5mbG9vcihrL1xuMiksYz1nK2wsYT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYS4kLnJvd3NbY10pLGY9eihmLGMpLG4sYz1iLmNsb25lKCksZz0wO2c8Zi5sZW5ndGg7ZysrKWlmKG49ZltnXSxuLnBhcmVudE5vZGU9PWEuJCYmZz5oKXtjLmluc2VydEJlZm9yZShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQobikpO2JyZWFrfWVsc2Ugbj1udWxsO258fGEuYXBwZW5kKGMpfWVsc2UgZm9yKGs9bD0xLGE9Yy5jbG9uZSgpLGEuaW5zZXJ0QWZ0ZXIoYyksYS5hcHBlbmQoYz1iLmNsb25lKCkpLG49eihmLGcpLGg9MDtoPG4ubGVuZ3RoO2grKyluW2hdLnJvd1NwYW4rKztjLmFwcGVuZEJvZ3VzKCk7Yi4kLnJvd1NwYW49bDtjLiQucm93U3Bhbj1rOzE9PWwmJmIucmVtb3ZlQXR0cmlidXRlKFwicm93U3BhblwiKTsxPT1rJiZjLnJlbW92ZUF0dHJpYnV0ZShcInJvd1NwYW5cIik7cmV0dXJuIGN9ZnVuY3Rpb24gQihlLGQpe3ZhciBiPXQoZSk7aWYoMTxiLmxlbmd0aClyZXR1cm4hMTtpZihkKXJldHVybiEwO3ZhciBiPVxuYlswXSxjPWIuZ2V0UGFyZW50KCksYT1jLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGE9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChhKSxmPXooYSxjLiQucm93SW5kZXgsYiksZz1iLiQuY29sU3BhbjtpZigxPGcpYz1NYXRoLmNlaWwoZy8yKSxnPU1hdGguZmxvb3IoZy8yKTtlbHNle2Zvcih2YXIgZz1jPTEsaD1bXSxrPTA7azxhLmxlbmd0aDtrKyspe3ZhciBsPWFba107aC5wdXNoKGxbZl0pOzE8bFtmXS5yb3dTcGFuJiYoays9bFtmXS5yb3dTcGFuLTEpfWZvcihhPTA7YTxoLmxlbmd0aDthKyspaFthXS5jb2xTcGFuKyt9YT1iLmNsb25lKCk7YS5pbnNlcnRBZnRlcihiKTthLmFwcGVuZEJvZ3VzKCk7Yi4kLmNvbFNwYW49YzthLiQuY29sU3Bhbj1nOzE9PWMmJmIucmVtb3ZlQXR0cmlidXRlKFwiY29sU3BhblwiKTsxPT1nJiZhLnJlbW92ZUF0dHJpYnV0ZShcImNvbFNwYW5cIik7cmV0dXJuIGF9dmFyIEM9L14oPzp0ZHx0aCkkLztDS0VESVRPUi5wbHVnaW5zLnRhYmxldG9vbHM9XG57cmVxdWlyZXM6XCJ0YWJsZSxkaWFsb2csY29udGV4dG1lbnVcIixpbml0OmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZChhfHx7fSx7Y29udGV4dFNlbnNpdGl2ZToxLHJlZnJlc2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnNldFN0YXRlKGIuY29udGFpbnMoe3RkOjEsdGg6MX0sMSk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19KX1mdW5jdGlvbiBiKGEsYil7dmFyIGM9ZS5hZGRDb21tYW5kKGEsYik7ZS5hZGRGZWF0dXJlKGMpfXZhciBjPWUubGFuZy50YWJsZTtiKFwiY2VsbFByb3BlcnRpZXNcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImNlbGxQcm9wZXJ0aWVzXCIsZCh7YWxsb3dlZENvbnRlbnQ6XCJ0ZCB0aHt3aWR0aCxoZWlnaHQsYm9yZGVyLWNvbG9yLGJhY2tncm91bmQtY29sb3Isd2hpdGUtc3BhY2UsdmVydGljYWwtYWxpZ24sdGV4dC1hbGlnbn1bY29sc3Bhbixyb3dzcGFuXVwiLFxucmVxdWlyZWRDb250ZW50OlwidGFibGVcIn0pKSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImNlbGxQcm9wZXJ0aWVzXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy90YWJsZUNlbGwuanNcIik7YihcInJvd0RlbGV0ZVwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7cSh1KGEpKX19KSk7YihcInJvd0luc2VydEJlZm9yZVwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7cChhLCEwKX19KSk7YihcInJvd0luc2VydEFmdGVyXCIsZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTtwKGEpfX0pKTtiKFwiY29sdW1uRGVsZXRlXCIsZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTthPXQoYSk7dmFyIGI9YVswXSxjPWFbYS5sZW5ndGgtMV07YT1iLmdldEFzY2VuZGFudChcInRhYmxlXCIpO1xuZm9yKHZhciBkPUNLRURJVE9SLnRvb2xzLmJ1aWxkVGFibGVNYXAoYSksZSxsLG49W10scj0wLHA9ZC5sZW5ndGg7cjxwO3IrKylmb3IodmFyIG09MCx1PWRbcl0ubGVuZ3RoO208dTttKyspZFtyXVttXT09Yi4kJiYoZT1tKSxkW3JdW21dPT1jLiQmJihsPW0pO2ZvcihyPWU7cjw9bDtyKyspZm9yKG09MDttPGQubGVuZ3RoO20rKyljPWRbbV0sYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYS4kLnJvd3NbbV0pLGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGNbcl0pLGMuJCYmKDE9PWMuJC5jb2xTcGFuP2MucmVtb3ZlKCk6LS1jLiQuY29sU3BhbixtKz1jLiQucm93U3Bhbi0xLGIuJC5jZWxscy5sZW5ndGh8fG4ucHVzaChiKSk7bD1hLiQucm93c1swXSYmYS4kLnJvd3NbMF0uY2VsbHM7ZT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQobFtlXXx8KGU/bFtlLTFdOmEuJC5wYXJlbnROb2RlKSk7bi5sZW5ndGg9PXAmJmEucmVtb3ZlKCk7ZSYmcShlLCEwKX19KSk7YihcImNvbHVtbkluc2VydEJlZm9yZVwiLFxuZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTttKGEsITApfX0pKTtiKFwiY29sdW1uSW5zZXJ0QWZ0ZXJcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO20oYSl9fSkpO2IoXCJjZWxsRGVsZXRlXCIsZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTt4KGEpfX0pKTtiKFwiY2VsbE1lcmdlXCIsZCh7YWxsb3dlZENvbnRlbnQ6XCJ0ZFtjb2xzcGFuLHJvd3NwYW5dXCIscmVxdWlyZWRDb250ZW50OlwidGRbY29sc3Bhbixyb3dzcGFuXVwiLGV4ZWM6ZnVuY3Rpb24oYSl7cSh3KGEuZ2V0U2VsZWN0aW9uKCkpLCEwKX19KSk7YihcImNlbGxNZXJnZVJpZ2h0XCIsZCh7YWxsb3dlZENvbnRlbnQ6XCJ0ZFtjb2xzcGFuXVwiLHJlcXVpcmVkQ29udGVudDpcInRkW2NvbHNwYW5dXCIsZXhlYzpmdW5jdGlvbihhKXtxKHcoYS5nZXRTZWxlY3Rpb24oKSxcblwicmlnaHRcIiksITApfX0pKTtiKFwiY2VsbE1lcmdlRG93blwiLGQoe2FsbG93ZWRDb250ZW50OlwidGRbcm93c3Bhbl1cIixyZXF1aXJlZENvbnRlbnQ6XCJ0ZFtyb3dzcGFuXVwiLGV4ZWM6ZnVuY3Rpb24oYSl7cSh3KGEuZ2V0U2VsZWN0aW9uKCksXCJkb3duXCIpLCEwKX19KSk7YihcImNlbGxWZXJ0aWNhbFNwbGl0XCIsZCh7YWxsb3dlZENvbnRlbnQ6XCJ0ZFtyb3dzcGFuXVwiLHJlcXVpcmVkQ29udGVudDpcInRkW3Jvd3NwYW5dXCIsZXhlYzpmdW5jdGlvbihhKXtxKEIoYS5nZXRTZWxlY3Rpb24oKSkpfX0pKTtiKFwiY2VsbEhvcml6b250YWxTcGxpdFwiLGQoe2FsbG93ZWRDb250ZW50OlwidGRbY29sc3Bhbl1cIixyZXF1aXJlZENvbnRlbnQ6XCJ0ZFtjb2xzcGFuXVwiLGV4ZWM6ZnVuY3Rpb24oYSl7cShBKGEuZ2V0U2VsZWN0aW9uKCkpKX19KSk7YihcImNlbGxJbnNlcnRCZWZvcmVcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3koYSwhMCl9fSkpO1xuYihcImNlbGxJbnNlcnRBZnRlclwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7eShhKX19KSk7ZS5hZGRNZW51SXRlbXMmJmUuYWRkTWVudUl0ZW1zKHt0YWJsZWNlbGw6e2xhYmVsOmMuY2VsbC5tZW51LGdyb3VwOlwidGFibGVjZWxsXCIsb3JkZXI6MSxnZXRJdGVtczpmdW5jdGlvbigpe3ZhciBhPWUuZ2V0U2VsZWN0aW9uKCksYj10KGEpO3JldHVybnt0YWJsZWNlbGxfaW5zZXJ0QmVmb3JlOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZWNlbGxfaW5zZXJ0QWZ0ZXI6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY2VsbF9kZWxldGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY2VsbF9tZXJnZTp3KGEsbnVsbCwhMCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHRhYmxlY2VsbF9tZXJnZV9yaWdodDp3KGEsXCJyaWdodFwiLCEwKT9DS0VESVRPUi5UUklTVEFURV9PRkY6XG5DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCx0YWJsZWNlbGxfbWVyZ2VfZG93bjp3KGEsXCJkb3duXCIsITApP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCx0YWJsZWNlbGxfc3BsaXRfdmVydGljYWw6QihhLCEwKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsdGFibGVjZWxsX3NwbGl0X2hvcml6b250YWw6QShhLCEwKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsdGFibGVjZWxsX3Byb3BlcnRpZXM6MDxiLmxlbmd0aD9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUR9fX0sdGFibGVjZWxsX2luc2VydEJlZm9yZTp7bGFiZWw6Yy5jZWxsLmluc2VydEJlZm9yZSxncm91cDpcInRhYmxlY2VsbFwiLGNvbW1hbmQ6XCJjZWxsSW5zZXJ0QmVmb3JlXCIsb3JkZXI6NX0sdGFibGVjZWxsX2luc2VydEFmdGVyOntsYWJlbDpjLmNlbGwuaW5zZXJ0QWZ0ZXIsXG5ncm91cDpcInRhYmxlY2VsbFwiLGNvbW1hbmQ6XCJjZWxsSW5zZXJ0QWZ0ZXJcIixvcmRlcjoxMH0sdGFibGVjZWxsX2RlbGV0ZTp7bGFiZWw6Yy5jZWxsLmRlbGV0ZUNlbGwsZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbERlbGV0ZVwiLG9yZGVyOjE1fSx0YWJsZWNlbGxfbWVyZ2U6e2xhYmVsOmMuY2VsbC5tZXJnZSxncm91cDpcInRhYmxlY2VsbFwiLGNvbW1hbmQ6XCJjZWxsTWVyZ2VcIixvcmRlcjoxNn0sdGFibGVjZWxsX21lcmdlX3JpZ2h0OntsYWJlbDpjLmNlbGwubWVyZ2VSaWdodCxncm91cDpcInRhYmxlY2VsbFwiLGNvbW1hbmQ6XCJjZWxsTWVyZ2VSaWdodFwiLG9yZGVyOjE3fSx0YWJsZWNlbGxfbWVyZ2VfZG93bjp7bGFiZWw6Yy5jZWxsLm1lcmdlRG93bixncm91cDpcInRhYmxlY2VsbFwiLGNvbW1hbmQ6XCJjZWxsTWVyZ2VEb3duXCIsb3JkZXI6MTh9LHRhYmxlY2VsbF9zcGxpdF9ob3Jpem9udGFsOntsYWJlbDpjLmNlbGwuc3BsaXRIb3Jpem9udGFsLGdyb3VwOlwidGFibGVjZWxsXCIsXG5jb21tYW5kOlwiY2VsbEhvcml6b250YWxTcGxpdFwiLG9yZGVyOjE5fSx0YWJsZWNlbGxfc3BsaXRfdmVydGljYWw6e2xhYmVsOmMuY2VsbC5zcGxpdFZlcnRpY2FsLGdyb3VwOlwidGFibGVjZWxsXCIsY29tbWFuZDpcImNlbGxWZXJ0aWNhbFNwbGl0XCIsb3JkZXI6MjB9LHRhYmxlY2VsbF9wcm9wZXJ0aWVzOntsYWJlbDpjLmNlbGwudGl0bGUsZ3JvdXA6XCJ0YWJsZWNlbGxwcm9wZXJ0aWVzXCIsY29tbWFuZDpcImNlbGxQcm9wZXJ0aWVzXCIsb3JkZXI6MjF9LHRhYmxlcm93OntsYWJlbDpjLnJvdy5tZW51LGdyb3VwOlwidGFibGVyb3dcIixvcmRlcjoxLGdldEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJue3RhYmxlcm93X2luc2VydEJlZm9yZTpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVyb3dfaW5zZXJ0QWZ0ZXI6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlcm93X2RlbGV0ZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fX0sdGFibGVyb3dfaW5zZXJ0QmVmb3JlOntsYWJlbDpjLnJvdy5pbnNlcnRCZWZvcmUsXG5ncm91cDpcInRhYmxlcm93XCIsY29tbWFuZDpcInJvd0luc2VydEJlZm9yZVwiLG9yZGVyOjV9LHRhYmxlcm93X2luc2VydEFmdGVyOntsYWJlbDpjLnJvdy5pbnNlcnRBZnRlcixncm91cDpcInRhYmxlcm93XCIsY29tbWFuZDpcInJvd0luc2VydEFmdGVyXCIsb3JkZXI6MTB9LHRhYmxlcm93X2RlbGV0ZTp7bGFiZWw6Yy5yb3cuZGVsZXRlUm93LGdyb3VwOlwidGFibGVyb3dcIixjb21tYW5kOlwicm93RGVsZXRlXCIsb3JkZXI6MTV9LHRhYmxlY29sdW1uOntsYWJlbDpjLmNvbHVtbi5tZW51LGdyb3VwOlwidGFibGVjb2x1bW5cIixvcmRlcjoxLGdldEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJue3RhYmxlY29sdW1uX2luc2VydEJlZm9yZTpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVjb2x1bW5faW5zZXJ0QWZ0ZXI6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY29sdW1uX2RlbGV0ZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fX0sdGFibGVjb2x1bW5faW5zZXJ0QmVmb3JlOntsYWJlbDpjLmNvbHVtbi5pbnNlcnRCZWZvcmUsXG5ncm91cDpcInRhYmxlY29sdW1uXCIsY29tbWFuZDpcImNvbHVtbkluc2VydEJlZm9yZVwiLG9yZGVyOjV9LHRhYmxlY29sdW1uX2luc2VydEFmdGVyOntsYWJlbDpjLmNvbHVtbi5pbnNlcnRBZnRlcixncm91cDpcInRhYmxlY29sdW1uXCIsY29tbWFuZDpcImNvbHVtbkluc2VydEFmdGVyXCIsb3JkZXI6MTB9LHRhYmxlY29sdW1uX2RlbGV0ZTp7bGFiZWw6Yy5jb2x1bW4uZGVsZXRlQ29sdW1uLGdyb3VwOlwidGFibGVjb2x1bW5cIixjb21tYW5kOlwiY29sdW1uRGVsZXRlXCIsb3JkZXI6MTV9fSk7ZS5jb250ZXh0TWVudSYmZS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhLGIsYyl7cmV0dXJuKGE9Yy5jb250YWlucyh7dGQ6MSx0aDoxfSwxKSkmJiFhLmlzUmVhZE9ubHkoKT97dGFibGVjZWxsOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZXJvdzpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVjb2x1bW46Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTpudWxsfSl9LGdldFNlbGVjdGVkQ2VsbHM6dH07XG5DS0VESVRPUi5wbHVnaW5zLmFkZChcInRhYmxldG9vbHNcIixDS0VESVRPUi5wbHVnaW5zLnRhYmxldG9vbHMpfSkoKTtDS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwPWZ1bmN0aW9uKHQpe3Q9dC4kLnJvd3M7Zm9yKHZhciBwPS0xLHU9W10sdj0wO3Y8dC5sZW5ndGg7disrKXtwKys7IXVbcF0mJih1W3BdPVtdKTtmb3IodmFyIG09LTEseT0wO3k8dFt2XS5jZWxscy5sZW5ndGg7eSsrKXt2YXIgeD10W3ZdLmNlbGxzW3ldO2ZvcihtKys7dVtwXVttXTspbSsrO2Zvcih2YXIgcT1pc05hTih4LmNvbFNwYW4pPzE6eC5jb2xTcGFuLHg9aXNOYU4oeC5yb3dTcGFuKT8xOngucm93U3Bhbix6PTA7ejx4O3orKyl7dVtwK3pdfHwodVtwK3pdPVtdKTtmb3IodmFyIHc9MDt3PHE7dysrKXVbcCt6XVttK3ddPXRbdl0uY2VsbHNbeV19bSs9cS0xfX1yZXR1cm4gdX07KGZ1bmN0aW9uKCl7dmFyIGc9W0NLRURJVE9SLkNUUkwrOTAsQ0tFRElUT1IuQ1RSTCs4OSxDS0VESVRPUi5DVFJMK0NLRURJVE9SLlNISUZUKzkwXSxuPXs4OjEsNDY6MX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ1bmRvXCIse2luaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtkLmVuYWJsZWQmJiExIT09YS5kYXRhLmNvbW1hbmQuY2FuVW5kbyYmZC5zYXZlKCl9ZnVuY3Rpb24gYygpe2QuZW5hYmxlZD1hLnJlYWRPbmx5PyExOlwid3lzaXd5Z1wiPT1hLm1vZGU7ZC5vbkNoYW5nZSgpfXZhciBkPWEudW5kb01hbmFnZXI9bmV3IGUoYSksbD1kLmVkaXRpbmdIYW5kbGVyPW5ldyBrKGQpLGY9YS5hZGRDb21tYW5kKFwidW5kb1wiLHtleGVjOmZ1bmN0aW9uKCl7ZC51bmRvKCkmJihhLnNlbGVjdGlvbkNoYW5nZSgpLHRoaXMuZmlyZShcImFmdGVyVW5kb1wiKSl9LHN0YXJ0RGlzYWJsZWQ6ITAsY2FuVW5kbzohMX0pLGg9YS5hZGRDb21tYW5kKFwicmVkb1wiLHtleGVjOmZ1bmN0aW9uKCl7ZC5yZWRvKCkmJlxuKGEuc2VsZWN0aW9uQ2hhbmdlKCksdGhpcy5maXJlKFwiYWZ0ZXJSZWRvXCIpKX0sc3RhcnREaXNhYmxlZDohMCxjYW5VbmRvOiExfSk7YS5zZXRLZXlzdHJva2UoW1tnWzBdLFwidW5kb1wiXSxbZ1sxXSxcInJlZG9cIl0sW2dbMl0sXCJyZWRvXCJdXSk7ZC5vbkNoYW5nZT1mdW5jdGlvbigpe2Yuc2V0U3RhdGUoZC51bmRvYWJsZSgpP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCk7aC5zZXRTdGF0ZShkLnJlZG9hYmxlKCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX07YS5vbihcImJlZm9yZUNvbW1hbmRFeGVjXCIsYik7YS5vbihcImFmdGVyQ29tbWFuZEV4ZWNcIixiKTthLm9uKFwic2F2ZVNuYXBzaG90XCIsZnVuY3Rpb24oYSl7ZC5zYXZlKGEuZGF0YSYmYS5kYXRhLmNvbnRlbnRPbmx5KX0pO2Eub24oXCJjb250ZW50RG9tXCIsbC5hdHRhY2hMaXN0ZW5lcnMsbCk7YS5vbihcImluc3RhbmNlUmVhZHlcIixmdW5jdGlvbigpe2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0pO1xuYS5vbihcImJlZm9yZU1vZGVVbmxvYWRcIixmdW5jdGlvbigpe1wid3lzaXd5Z1wiPT1hLm1vZGUmJmQuc2F2ZSghMCl9KTthLm9uKFwibW9kZVwiLGMpO2Eub24oXCJyZWFkT25seVwiLGMpO2EudWkuYWRkQnV0dG9uJiYoYS51aS5hZGRCdXR0b24oXCJVbmRvXCIse2xhYmVsOmEubGFuZy51bmRvLnVuZG8sY29tbWFuZDpcInVuZG9cIix0b29sYmFyOlwidW5kbywxMFwifSksYS51aS5hZGRCdXR0b24oXCJSZWRvXCIse2xhYmVsOmEubGFuZy51bmRvLnJlZG8sY29tbWFuZDpcInJlZG9cIix0b29sYmFyOlwidW5kbywyMFwifSkpO2EucmVzZXRVbmRvPWZ1bmN0aW9uKCl7ZC5yZXNldCgpO2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKX07YS5vbihcInVwZGF0ZVNuYXBzaG90XCIsZnVuY3Rpb24oKXtkLmN1cnJlbnRJbWFnZSYmZC51cGRhdGUoKX0pO2Eub24oXCJsb2NrU25hcHNob3RcIixmdW5jdGlvbihhKXthPWEuZGF0YTtkLmxvY2soYSYmYS5kb250VXBkYXRlLGEmJmEuZm9yY2VVcGRhdGUpfSk7YS5vbihcInVubG9ja1NuYXBzaG90XCIsXG5kLnVubG9jayxkKX19KTtDS0VESVRPUi5wbHVnaW5zLnVuZG89e307dmFyIGU9Q0tFRElUT1IucGx1Z2lucy51bmRvLlVuZG9NYW5hZ2VyPWZ1bmN0aW9uKGEpe3RoaXMuc3Ryb2tlc1JlY29yZGVkPVswLDBdO3RoaXMubG9ja2VkPW51bGw7dGhpcy5wcmV2aW91c0tleUdyb3VwPS0xO3RoaXMubGltaXQ9YS5jb25maWcudW5kb1N0YWNrU2l6ZXx8MjA7dGhpcy5zdHJva2VzTGltaXQ9MjU7dGhpcy5lZGl0b3I9YTt0aGlzLnJlc2V0KCl9O2UucHJvdG90eXBlPXt0eXBlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5nZXRLZXlHcm91cChhKSxkPXRoaXMuc3Ryb2tlc1JlY29yZGVkW2NdKzE7Yj1ifHxkPj10aGlzLnN0cm9rZXNMaW1pdDt0aGlzLnR5cGluZ3x8KHRoaXMuaGFzVW5kbz10aGlzLnR5cGluZz0hMCx0aGlzLmhhc1JlZG89ITEsdGhpcy5vbkNoYW5nZSgpKTtiPyhkPTAsdGhpcy5lZGl0b3IuZmlyZShcInNhdmVTbmFwc2hvdFwiKSk6dGhpcy5lZGl0b3IuZmlyZShcImNoYW5nZVwiKTt0aGlzLnN0cm9rZXNSZWNvcmRlZFtjXT1cbmQ7dGhpcy5wcmV2aW91c0tleUdyb3VwPWN9LGtleUdyb3VwQ2hhbmdlZDpmdW5jdGlvbihhKXtyZXR1cm4gZS5nZXRLZXlHcm91cChhKSE9dGhpcy5wcmV2aW91c0tleUdyb3VwfSxyZXNldDpmdW5jdGlvbigpe3RoaXMuc25hcHNob3RzPVtdO3RoaXMuaW5kZXg9LTE7dGhpcy5jdXJyZW50SW1hZ2U9bnVsbDt0aGlzLmhhc1JlZG89dGhpcy5oYXNVbmRvPSExO3RoaXMubG9ja2VkPW51bGw7dGhpcy5yZXNldFR5cGUoKX0scmVzZXRUeXBlOmZ1bmN0aW9uKCl7dGhpcy5zdHJva2VzUmVjb3JkZWQ9WzAsMF07dGhpcy50eXBpbmc9ITE7dGhpcy5wcmV2aW91c0tleUdyb3VwPS0xfSxyZWZyZXNoU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLmhhc1VuZG89ISF0aGlzLmdldE5leHRJbWFnZSghMCk7dGhpcy5oYXNSZWRvPSEhdGhpcy5nZXROZXh0SW1hZ2UoITEpO3RoaXMucmVzZXRUeXBlKCk7dGhpcy5vbkNoYW5nZSgpfSxzYXZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmVkaXRvcjtpZih0aGlzLmxvY2tlZHx8XG5cInJlYWR5XCIhPWQuc3RhdHVzfHxcInd5c2l3eWdcIiE9ZC5tb2RlKXJldHVybiExO3ZhciBlPWQuZWRpdGFibGUoKTtpZighZXx8XCJyZWFkeVwiIT1lLnN0YXR1cylyZXR1cm4hMTtlPXRoaXMuc25hcHNob3RzO2J8fChiPW5ldyBmKGQpKTtpZighMT09PWIuY29udGVudHMpcmV0dXJuITE7aWYodGhpcy5jdXJyZW50SW1hZ2UpaWYoYi5lcXVhbHNDb250ZW50KHRoaXMuY3VycmVudEltYWdlKSl7aWYoYXx8Yi5lcXVhbHNTZWxlY3Rpb24odGhpcy5jdXJyZW50SW1hZ2UpKXJldHVybiExfWVsc2UhMSE9PWMmJmQuZmlyZShcImNoYW5nZVwiKTtlLnNwbGljZSh0aGlzLmluZGV4KzEsZS5sZW5ndGgtdGhpcy5pbmRleC0xKTtlLmxlbmd0aD09dGhpcy5saW1pdCYmZS5zaGlmdCgpO3RoaXMuaW5kZXg9ZS5wdXNoKGIpLTE7dGhpcy5jdXJyZW50SW1hZ2U9YjshMSE9PWMmJnRoaXMucmVmcmVzaFN0YXRlKCk7cmV0dXJuITB9LHJlc3RvcmVJbWFnZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVkaXRvcixcbmM7YS5ib29rbWFya3MmJihiLmZvY3VzKCksYz1iLmdldFNlbGVjdGlvbigpKTt0aGlzLmxvY2tlZD17bGV2ZWw6OTk5fTt0aGlzLmVkaXRvci5sb2FkU25hcHNob3QoYS5jb250ZW50cyk7YS5ib29rbWFya3M/Yy5zZWxlY3RCb29rbWFya3MoYS5ib29rbWFya3MpOkNLRURJVE9SLmVudi5pZSYmKGM9dGhpcy5lZGl0b3IuZG9jdW1lbnQuZ2V0Qm9keSgpLiQuY3JlYXRlVGV4dFJhbmdlKCksYy5jb2xsYXBzZSghMCksYy5zZWxlY3QoKSk7dGhpcy5sb2NrZWQ9bnVsbDt0aGlzLmluZGV4PWEuaW5kZXg7dGhpcy5jdXJyZW50SW1hZ2U9dGhpcy5zbmFwc2hvdHNbdGhpcy5pbmRleF07dGhpcy51cGRhdGUoKTt0aGlzLnJlZnJlc2hTdGF0ZSgpO2IuZmlyZShcImNoYW5nZVwiKX0sZ2V0TmV4dEltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc25hcHNob3RzLGM9dGhpcy5jdXJyZW50SW1hZ2UsZDtpZihjKWlmKGEpZm9yKGQ9dGhpcy5pbmRleC0xOzA8PWQ7ZC0tKXtpZihhPWJbZF0sIWMuZXF1YWxzQ29udGVudChhKSlyZXR1cm4gYS5pbmRleD1cbmQsYX1lbHNlIGZvcihkPXRoaXMuaW5kZXgrMTtkPGIubGVuZ3RoO2QrKylpZihhPWJbZF0sIWMuZXF1YWxzQ29udGVudChhKSlyZXR1cm4gYS5pbmRleD1kLGE7cmV0dXJuIG51bGx9LHJlZG9hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmdGhpcy5oYXNSZWRvfSx1bmRvYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWQmJnRoaXMuaGFzVW5kb30sdW5kbzpmdW5jdGlvbigpe2lmKHRoaXMudW5kb2FibGUoKSl7dGhpcy5zYXZlKCEwKTt2YXIgYT10aGlzLmdldE5leHRJbWFnZSghMCk7aWYoYSlyZXR1cm4gdGhpcy5yZXN0b3JlSW1hZ2UoYSksITB9cmV0dXJuITF9LHJlZG86ZnVuY3Rpb24oKXtpZih0aGlzLnJlZG9hYmxlKCkmJih0aGlzLnNhdmUoITApLHRoaXMucmVkb2FibGUoKSkpe3ZhciBhPXRoaXMuZ2V0TmV4dEltYWdlKCExKTtpZihhKXJldHVybiB0aGlzLnJlc3RvcmVJbWFnZShhKSwhMH1yZXR1cm4hMX0sdXBkYXRlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmxvY2tlZCl7YXx8XG4oYT1uZXcgZih0aGlzLmVkaXRvcikpO2Zvcih2YXIgYj10aGlzLmluZGV4LGM9dGhpcy5zbmFwc2hvdHM7MDxiJiZ0aGlzLmN1cnJlbnRJbWFnZS5lcXVhbHNDb250ZW50KGNbYi0xXSk7KS0tYjtjLnNwbGljZShiLHRoaXMuaW5kZXgtYisxLGEpO3RoaXMuaW5kZXg9Yjt0aGlzLmN1cnJlbnRJbWFnZT1hfX0sdXBkYXRlU2VsZWN0aW9uOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLnNuYXBzaG90cy5sZW5ndGgpcmV0dXJuITE7dmFyIGI9dGhpcy5zbmFwc2hvdHMsYz1iW2IubGVuZ3RoLTFdO3JldHVybiBjLmVxdWFsc0NvbnRlbnQoYSkmJiFjLmVxdWFsc1NlbGVjdGlvbihhKT8odGhpcy5jdXJyZW50SW1hZ2U9YltiLmxlbmd0aC0xXT1hLCEwKTohMX0sbG9jazpmdW5jdGlvbihhLGIpe2lmKHRoaXMubG9ja2VkKXRoaXMubG9ja2VkLmxldmVsKys7ZWxzZSBpZihhKXRoaXMubG9ja2VkPXtsZXZlbDoxfTtlbHNle3ZhciBjPW51bGw7aWYoYiljPSEwO2Vsc2V7dmFyIGQ9bmV3IGYodGhpcy5lZGl0b3IsXG4hMCk7dGhpcy5jdXJyZW50SW1hZ2UmJnRoaXMuY3VycmVudEltYWdlLmVxdWFsc0NvbnRlbnQoZCkmJihjPWQpfXRoaXMubG9ja2VkPXt1cGRhdGU6YyxsZXZlbDoxfX19LHVubG9jazpmdW5jdGlvbigpe2lmKHRoaXMubG9ja2VkJiYhLS10aGlzLmxvY2tlZC5sZXZlbCl7dmFyIGE9dGhpcy5sb2NrZWQudXBkYXRlO3RoaXMubG9ja2VkPW51bGw7aWYoITA9PT1hKXRoaXMudXBkYXRlKCk7ZWxzZSBpZihhKXt2YXIgYj1uZXcgZih0aGlzLmVkaXRvciwhMCk7YS5lcXVhbHNDb250ZW50KGIpfHx0aGlzLnVwZGF0ZSgpfX19fTtlLm5hdmlnYXRpb25LZXlDb2Rlcz17Mzc6MSwzODoxLDM5OjEsNDA6MSwzNjoxLDM1OjEsMzM6MSwzNDoxfTtlLmtleUdyb3Vwcz17UFJJTlRBQkxFOjAsRlVOQ1RJT05BTDoxfTtlLmlzTmF2aWdhdGlvbktleT1mdW5jdGlvbihhKXtyZXR1cm4hIWUubmF2aWdhdGlvbktleUNvZGVzW2FdfTtlLmdldEtleUdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPWUua2V5R3JvdXBzO1xucmV0dXJuIG5bYV0/Yi5GVU5DVElPTkFMOmIuUFJJTlRBQkxFfTtlLmdldE9wcG9zaXRlS2V5R3JvdXA9ZnVuY3Rpb24oYSl7dmFyIGI9ZS5rZXlHcm91cHM7cmV0dXJuIGE9PWIuRlVOQ1RJT05BTD9iLlBSSU5UQUJMRTpiLkZVTkNUSU9OQUx9O2UuaWVGdW5jdGlvbmFsS2V5c0J1Zz1mdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IuZW52LmllJiZlLmdldEtleUdyb3VwKGEpPT1lLmtleUdyb3Vwcy5GVU5DVElPTkFMfTt2YXIgZj1DS0VESVRPUi5wbHVnaW5zLnVuZG8uSW1hZ2U9ZnVuY3Rpb24oYSxiKXt0aGlzLmVkaXRvcj1hO2EuZmlyZShcImJlZm9yZVVuZG9JbWFnZVwiKTt2YXIgYz1hLmdldFNuYXBzaG90KCk7Q0tFRElUT1IuZW52LmllJiZjJiYoYz1jLnJlcGxhY2UoL1xccytkYXRhLWNrZS1leHBhbmRvPVwiLio/XCIvZyxcIlwiKSk7dGhpcy5jb250ZW50cz1jO2J8fCh0aGlzLmJvb2ttYXJrcz0oYz1jJiZhLmdldFNlbGVjdGlvbigpKSYmYy5jcmVhdGVCb29rbWFya3MyKCEwKSk7YS5maXJlKFwiYWZ0ZXJVbmRvSW1hZ2VcIil9LFxuaD0vXFxiKD86aHJlZnxzcmN8bmFtZSk9XCJbXlwiXSo/XCIvZ2k7Zi5wcm90b3R5cGU9e2VxdWFsc0NvbnRlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb250ZW50czthPWEuY29udGVudHM7Q0tFRElUT1IuZW52LmllJiYoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LnF1aXJrcykmJihiPWIucmVwbGFjZShoLFwiXCIpLGE9YS5yZXBsYWNlKGgsXCJcIikpO3JldHVybiBiIT1hPyExOiEwfSxlcXVhbHNTZWxlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ib29rbWFya3M7YT1hLmJvb2ttYXJrcztpZihifHxhKXtpZighYnx8IWF8fGIubGVuZ3RoIT1hLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXSxlPWFbY107aWYoZC5zdGFydE9mZnNldCE9ZS5zdGFydE9mZnNldHx8ZC5lbmRPZmZzZXQhPWUuZW5kT2Zmc2V0fHwhQ0tFRElUT1IudG9vbHMuYXJyYXlDb21wYXJlKGQuc3RhcnQsZS5zdGFydCl8fCFDS0VESVRPUi50b29scy5hcnJheUNvbXBhcmUoZC5lbmQsXG5lLmVuZCkpcmV0dXJuITF9fXJldHVybiEwfX07dmFyIGs9Q0tFRElUT1IucGx1Z2lucy51bmRvLk5hdGl2ZUVkaXRpbmdIYW5kbGVyPWZ1bmN0aW9uKGEpe3RoaXMudW5kb01hbmFnZXI9YTt0aGlzLmlnbm9yZUlucHV0RXZlbnQ9ITE7dGhpcy5rZXlFdmVudHNTdGFjaz1uZXcgbTt0aGlzLmxhc3RLZXlkb3duSW1hZ2U9bnVsbH07ay5wcm90b3R5cGU9e29uS2V5ZG93bjpmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEuZ2V0S2V5KCk7aWYoMjI5IT09YilpZigtMTxDS0VESVRPUi50b29scy5pbmRleE9mKGcsYS5kYXRhLmdldEtleXN0cm9rZSgpKSlhLmRhdGEucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKHRoaXMua2V5RXZlbnRzU3RhY2suY2xlYW5VcChhKSxhPXRoaXMudW5kb01hbmFnZXIsdGhpcy5rZXlFdmVudHNTdGFjay5nZXRMYXN0KGIpfHx0aGlzLmtleUV2ZW50c1N0YWNrLnB1c2goYiksdGhpcy5sYXN0S2V5ZG93bkltYWdlPW5ldyBmKGEuZWRpdG9yKSxlLmlzTmF2aWdhdGlvbktleShiKXx8XG50aGlzLnVuZG9NYW5hZ2VyLmtleUdyb3VwQ2hhbmdlZChiKSlpZihhLnN0cm9rZXNSZWNvcmRlZFswXXx8YS5zdHJva2VzUmVjb3JkZWRbMV0pYS5zYXZlKCExLHRoaXMubGFzdEtleWRvd25JbWFnZSwhMSksYS5yZXNldFR5cGUoKX0sb25JbnB1dDpmdW5jdGlvbigpe2lmKHRoaXMuaWdub3JlSW5wdXRFdmVudCl0aGlzLmlnbm9yZUlucHV0RXZlbnQ9ITE7ZWxzZXt2YXIgYT10aGlzLmtleUV2ZW50c1N0YWNrLmdldExhc3QoKTthfHwoYT10aGlzLmtleUV2ZW50c1N0YWNrLnB1c2goMCkpO3RoaXMua2V5RXZlbnRzU3RhY2suaW5jcmVtZW50KGEua2V5Q29kZSk7dGhpcy5rZXlFdmVudHNTdGFjay5nZXRUb3RhbElucHV0cygpPj10aGlzLnVuZG9NYW5hZ2VyLnN0cm9rZXNMaW1pdCYmKHRoaXMudW5kb01hbmFnZXIudHlwZShhLmtleUNvZGUsITApLHRoaXMua2V5RXZlbnRzU3RhY2sucmVzZXRJbnB1dHMoKSl9fSxvbktleXVwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudW5kb01hbmFnZXI7XG5hPWEuZGF0YS5nZXRLZXkoKTt2YXIgYz10aGlzLmtleUV2ZW50c1N0YWNrLmdldFRvdGFsSW5wdXRzKCk7dGhpcy5rZXlFdmVudHNTdGFjay5yZW1vdmUoYSk7aWYoIShlLmllRnVuY3Rpb25hbEtleXNCdWcoYSkmJnRoaXMubGFzdEtleWRvd25JbWFnZSYmdGhpcy5sYXN0S2V5ZG93bkltYWdlLmVxdWFsc0NvbnRlbnQobmV3IGYoYi5lZGl0b3IsITApKSkpaWYoMDxjKWIudHlwZShhKTtlbHNlIGlmKGUuaXNOYXZpZ2F0aW9uS2V5KGEpKXRoaXMub25OYXZpZ2F0aW9uS2V5KCEwKX0sb25OYXZpZ2F0aW9uS2V5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudW5kb01hbmFnZXI7IWEmJmIuc2F2ZSghMCxudWxsLCExKXx8Yi51cGRhdGVTZWxlY3Rpb24obmV3IGYoYi5lZGl0b3IpKTtiLnJlc2V0VHlwZSgpfSxpZ25vcmVJbnB1dEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt0aGlzLmlnbm9yZUlucHV0RXZlbnQ9ITB9LGF0dGFjaExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudW5kb01hbmFnZXIuZWRpdG9yLFxuYj1hLmVkaXRhYmxlKCksYz10aGlzO2IuYXR0YWNoTGlzdGVuZXIoYixcImtleWRvd25cIixmdW5jdGlvbihhKXtjLm9uS2V5ZG93bihhKTtpZihlLmllRnVuY3Rpb25hbEtleXNCdWcoYS5kYXRhLmdldEtleSgpKSljLm9uSW5wdXQoKX0sbnVsbCxudWxsLDk5OSk7Yi5hdHRhY2hMaXN0ZW5lcihiLENLRURJVE9SLmVudi5pZT9cImtleXByZXNzXCI6XCJpbnB1dFwiLGMub25JbnB1dCxjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIsXCJrZXl1cFwiLGMub25LZXl1cCxjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIsXCJwYXN0ZVwiLGMuaWdub3JlSW5wdXRFdmVudExpc3RlbmVyLGMsbnVsbCw5OTkpO2IuYXR0YWNoTGlzdGVuZXIoYixcImRyb3BcIixjLmlnbm9yZUlucHV0RXZlbnRMaXN0ZW5lcixjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIuaXNJbmxpbmUoKT9iOmEuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCksXCJjbGlja1wiLGZ1bmN0aW9uKCl7Yy5vbk5hdmlnYXRpb25LZXkoKX0sXG5udWxsLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKHRoaXMudW5kb01hbmFnZXIuZWRpdG9yLFwiYmx1clwiLGZ1bmN0aW9uKCl7Yy5rZXlFdmVudHNTdGFjay5yZW1vdmUoOSl9LG51bGwsbnVsbCw5OTkpfX07dmFyIG09Q0tFRElUT1IucGx1Z2lucy51bmRvLktleUV2ZW50c1N0YWNrPWZ1bmN0aW9uKCl7dGhpcy5zdGFjaz1bXX07bS5wcm90b3R5cGU9e3B1c2g6ZnVuY3Rpb24oYSl7YT10aGlzLnN0YWNrLnB1c2goe2tleUNvZGU6YSxpbnB1dHM6MH0pO3JldHVybiB0aGlzLnN0YWNrW2EtMV19LGdldExhc3RJbmRleDpmdW5jdGlvbihhKXtpZihcIm51bWJlclwiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5zdGFjay5sZW5ndGgtMTtmb3IodmFyIGI9dGhpcy5zdGFjay5sZW5ndGg7Yi0tOylpZih0aGlzLnN0YWNrW2JdLmtleUNvZGU9PWEpcmV0dXJuIGI7cmV0dXJuLTF9LGdldExhc3Q6ZnVuY3Rpb24oYSl7YT10aGlzLmdldExhc3RJbmRleChhKTtyZXR1cm4tMSE9YT90aGlzLnN0YWNrW2FdOlxubnVsbH0saW5jcmVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0TGFzdChhKS5pbnB1dHMrK30scmVtb3ZlOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRMYXN0SW5kZXgoYSk7LTEhPWEmJnRoaXMuc3RhY2suc3BsaWNlKGEsMSl9LHJlc2V0SW5wdXRzOmZ1bmN0aW9uKGEpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhKXRoaXMuZ2V0TGFzdChhKS5pbnB1dHM9MDtlbHNlIGZvcihhPXRoaXMuc3RhY2subGVuZ3RoO2EtLTspdGhpcy5zdGFja1thXS5pbnB1dHM9MH0sZ2V0VG90YWxJbnB1dHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5zdGFjay5sZW5ndGgsYj0wO2EtLTspYis9dGhpcy5zdGFja1thXS5pbnB1dHM7cmV0dXJuIGJ9LGNsZWFuVXA6ZnVuY3Rpb24oYSl7YT1hLmRhdGEuJDthLmN0cmxLZXl8fGEubWV0YUtleXx8dGhpcy5yZW1vdmUoMTcpO2Euc2hpZnRLZXl8fHRoaXMucmVtb3ZlKDE2KTthLmFsdEtleXx8dGhpcy5yZW1vdmUoMTgpfX19KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwid3NjXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIscGFyc2VBcGk6ZnVuY3Rpb24oYSl7YS5jb25maWcud3NjX29uRmluaXNoPVwiZnVuY3Rpb25cIj09PXR5cGVvZiBhLmNvbmZpZy53c2Nfb25GaW5pc2g/YS5jb25maWcud3NjX29uRmluaXNoOmZ1bmN0aW9uKCl7fTthLmNvbmZpZy53c2Nfb25DbG9zZT1cImZ1bmN0aW9uXCI9PT10eXBlb2YgYS5jb25maWcud3NjX29uQ2xvc2U/YS5jb25maWcud3NjX29uQ2xvc2U6ZnVuY3Rpb24oKXt9fSxwYXJzZUNvbmZpZzpmdW5jdGlvbihhKXthLmNvbmZpZy53c2NfY3VzdG9tZXJJZD1hLmNvbmZpZy53c2NfY3VzdG9tZXJJZHx8Q0tFRElUT1IuY29uZmlnLndzY19jdXN0b21lcklkfHxcIjE6dWEzeHcxLTJYeUdKMy1HV3J1RDMtNk9GTlQxLW9YY3VCMS1uUjZCcDQtaGdRSGMtRWNZbmczLXNkUlhHMy1OT2ZGa1wiO2EuY29uZmlnLndzY19jdXN0b21EaWN0aW9uYXJ5SWRzPWEuY29uZmlnLndzY19jdXN0b21EaWN0aW9uYXJ5SWRzfHxcbkNLRURJVE9SLmNvbmZpZy53c2NfY3VzdG9tRGljdGlvbmFyeUlkc3x8XCJcIjthLmNvbmZpZy53c2NfdXNlckRpY3Rpb25hcnlOYW1lPWEuY29uZmlnLndzY191c2VyRGljdGlvbmFyeU5hbWV8fENLRURJVE9SLmNvbmZpZy53c2NfdXNlckRpY3Rpb25hcnlOYW1lfHxcIlwiO2EuY29uZmlnLndzY19jdXN0b21Mb2FkZXJTY3JpcHQ9YS5jb25maWcud3NjX2N1c3RvbUxvYWRlclNjcmlwdHx8Q0tFRElUT1IuY29uZmlnLndzY19jdXN0b21Mb2FkZXJTY3JpcHQ7Q0tFRElUT1IuY29uZmlnLndzY19jbWQ9YS5jb25maWcud3NjX2NtZHx8Q0tFRElUT1IuY29uZmlnLndzY19jbWR8fFwic3BlbGxcIjtDS0VESVRPUi5jb25maWcud3NjX3ZlcnNpb249XCJ2NC4zLjAtbWFzdGVyLWQ3NjkyMzNcIjtDS0VESVRPUi5jb25maWcud3NjX3JlbW92ZUdsb2JhbFZhcmlhYmxlPSEwfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLmVudjt0aGlzLnBhcnNlQ29uZmlnKGEpO3RoaXMucGFyc2VBcGkoYSk7XG5hLmFkZENvbW1hbmQoXCJjaGVja3NwZWxsXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJjaGVja3NwZWxsXCIpKS5tb2Rlcz17d3lzaXd5ZzohQ0tFRElUT1IuZW52Lm9wZXJhJiYhQ0tFRElUT1IuZW52LmFpciYmZG9jdW1lbnQuZG9tYWluPT13aW5kb3cubG9jYXRpb24uaG9zdG5hbWUmJiEoYi5pZSYmKDg+Yi52ZXJzaW9ufHxiLnF1aXJrcykpfTtcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5wbHVnaW5zLnNjYXl0JiZhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJTcGVsbENoZWNrZXJcIix7bGFiZWw6YS5sYW5nLndzYy50b29sYmFyLGNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/YS5jb250YWluZXIuZ2V0VGV4dCgpOmEuZG9jdW1lbnQuZ2V0Qm9keSgpLmdldFRleHQoKTsoYj1iLnJlcGxhY2UoL1xccy9nLFwiXCIpKT9hLmV4ZWNDb21tYW5kKFwiY2hlY2tzcGVsbFwiKTphbGVydChcIk5vdGhpbmcgdG8gY2hlY2shXCIpfSxcbnRvb2xiYXI6XCJzcGVsbGNoZWNrZXIsMTBcIn0pO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJjaGVja3NwZWxsXCIsdGhpcy5wYXRoKyhDS0VESVRPUi5lbnYuaWUmJjc+PUNLRURJVE9SLmVudi52ZXJzaW9uP1wiZGlhbG9ncy93c2NfaWUuanNcIjp3aW5kb3cucG9zdE1lc3NhZ2U/XCJkaWFsb2dzL3dzYy5qc1wiOlwiZGlhbG9ncy93c2NfaWUuanNcIikpfX0pO0NLRURJVE9SLmNvbmZpZy5wbHVnaW5zPSdkaWFsb2d1aSxkaWFsb2csYWJvdXQsYTExeWhlbHAsZGlhbG9nYWR2dGFiLGJhc2ljc3R5bGVzLGJpZGksYmxvY2txdW90ZSxjbGlwYm9hcmQsYnV0dG9uLHBhbmVsYnV0dG9uLHBhbmVsLGZsb2F0cGFuZWwsY29sb3JidXR0b24sY29sb3JkaWFsb2csdGVtcGxhdGVzLG1lbnUsY29udGV4dG1lbnUsZGl2LHJlc2l6ZSx0b29sYmFyLGVsZW1lbnRzcGF0aCxlbnRlcmtleSxlbnRpdGllcyxwb3B1cCxmaWxlYnJvd3NlcixmaW5kLGZha2VvYmplY3RzLGZsYXNoLGZsb2F0aW5nc3BhY2UsbGlzdGJsb2NrLHJpY2hjb21ibyxmb250LGZvcm1zLGZvcm1hdCxob3Jpem9udGFscnVsZSxodG1sd3JpdGVyLGlmcmFtZSx3eXNpd3lnYXJlYSxpbWFnZSxpbmRlbnQsaW5kZW50YmxvY2ssaW5kZW50bGlzdCxzbWlsZXksanVzdGlmeSxtZW51YnV0dG9uLGxhbmd1YWdlLGxpbmssbGlzdCxsaXN0c3R5bGUsbWFnaWNsaW5lLG1heGltaXplLG5ld3BhZ2UscGFnZWJyZWFrLHBhc3RldGV4dCxwYXN0ZWZyb213b3JkLHByZXZpZXcscHJpbnQscmVtb3ZlZm9ybWF0LHNhdmUsc2VsZWN0YWxsLHNob3dibG9ja3Msc2hvd2JvcmRlcnMsc291cmNlYXJlYSxzcGVjaWFsY2hhcixzY2F5dCxzdHlsZXNjb21ibyx0YWIsdGFibGUsdGFibGV0b29scyx1bmRvLHdzYyc7Q0tFRElUT1IuY29uZmlnLnNraW49J21vb25vJzsoZnVuY3Rpb24oKSB7dmFyIHNldEljb25zID0gZnVuY3Rpb24oaWNvbnMsIHN0cmlwKSB7dmFyIHBhdGggPSBDS0VESVRPUi5nZXRVcmwoICdwbHVnaW5zLycgKyBzdHJpcCApO2ljb25zID0gaWNvbnMuc3BsaXQoICcsJyApO2ZvciAoIHZhciBpID0gMDsgaSA8IGljb25zLmxlbmd0aDsgaSsrIClDS0VESVRPUi5za2luLmljb25zWyBpY29uc1sgaSBdIF0gPSB7IHBhdGg6IHBhdGgsIG9mZnNldDogLWljb25zWyArK2kgXSwgYmdzaXplIDogaWNvbnNbICsraSBdIH07fTtpZiAoQ0tFRElUT1IuZW52LmhpZHBpKSBzZXRJY29ucygnYWJvdXQsMCwsYm9sZCwyNCwsaXRhbGljLDQ4LCxzdHJpa2UsNzIsLHN1YnNjcmlwdCw5Niwsc3VwZXJzY3JpcHQsMTIwLCx1bmRlcmxpbmUsMTQ0LCxiaWRpbHRyLDE2OCwsYmlkaXJ0bCwxOTIsLGJsb2NrcXVvdGUsMjE2LCxjb3B5LXJ0bCwyNDAsLGNvcHksMjY0LCxjdXQtcnRsLDI4OCwsY3V0LDMxMiwscGFzdGUtcnRsLDMzNiwscGFzdGUsMzYwLCxiZ2NvbG9yLDM4NCwsdGV4dGNvbG9yLDQwOCwsdGVtcGxhdGVzLXJ0bCw0MzIsLHRlbXBsYXRlcyw0NTYsLGNyZWF0ZWRpdiw0ODAsLGZpbmQtcnRsLDUwNCwsZmluZCw1MjgsLHJlcGxhY2UsNTUyLCxmbGFzaCw1NzYsLGJ1dHRvbiw2MDAsLGNoZWNrYm94LDYyNCwsZm9ybSw2NDgsLGhpZGRlbmZpZWxkLDY3MiwsaW1hZ2VidXR0b24sNjk2LCxyYWRpbyw3MjAsLHNlbGVjdC1ydGwsNzQ0LCxzZWxlY3QsNzY4LCx0ZXh0YXJlYS1ydGwsNzkyLCx0ZXh0YXJlYSw4MTYsLHRleHRmaWVsZC1ydGwsODQwLCx0ZXh0ZmllbGQsODY0LCxob3Jpem9udGFscnVsZSw4ODgsLGlmcmFtZSw5MTIsLGltYWdlLDkzNiwsaW5kZW50LXJ0bCw5NjAsLGluZGVudCw5ODQsLG91dGRlbnQtcnRsLDEwMDgsLG91dGRlbnQsMTAzMiwsc21pbGV5LDEwNTYsLGp1c3RpZnlibG9jaywxMDgwLCxqdXN0aWZ5Y2VudGVyLDExMDQsLGp1c3RpZnlsZWZ0LDExMjgsLGp1c3RpZnlyaWdodCwxMTUyLCxsYW5ndWFnZSwxMTc2LCxhbmNob3ItcnRsLDEyMDAsLGFuY2hvciwxMjI0LCxsaW5rLDEyNDgsLHVubGluaywxMjcyLCxidWxsZXRlZGxpc3QtcnRsLDEyOTYsLGJ1bGxldGVkbGlzdCwxMzIwLCxudW1iZXJlZGxpc3QtcnRsLDEzNDQsLG51bWJlcmVkbGlzdCwxMzY4LCxtYXhpbWl6ZSwxMzkyLCxuZXdwYWdlLXJ0bCwxNDE2LCxuZXdwYWdlLDE0NDAsLHBhZ2VicmVhay1ydGwsMTQ2NCwscGFnZWJyZWFrLDE0ODgsLHBhc3RldGV4dC1ydGwsMTUxMiwscGFzdGV0ZXh0LDE1MzYsLHBhc3RlZnJvbXdvcmQtcnRsLDE1NjAsLHBhc3RlZnJvbXdvcmQsMTU4NCwscHJldmlldy1ydGwsMTYwOCwscHJldmlldywxNjMyLCxwcmludCwxNjU2LCxyZW1vdmVmb3JtYXQsMTY4MCwsc2F2ZSwxNzA0LCxzZWxlY3RhbGwsMTcyOCwsc2hvd2Jsb2Nrcy1ydGwsMTc1Miwsc2hvd2Jsb2NrcywxNzc2LCxzb3VyY2UtcnRsLDE4MDAsLHNvdXJjZSwxODI0LCxzcGVjaWFsY2hhciwxODQ4LCxzY2F5dCwxODcyLCx0YWJsZSwxODk2LCxyZWRvLXJ0bCwxOTIwLCxyZWRvLDE5NDQsLHVuZG8tcnRsLDE5NjgsLHVuZG8sMTk5Miwsc3BlbGxjaGVja2VyLDIwMTYsJywnaWNvbnNfaGlkcGkucG5nJyk7ZWxzZSBzZXRJY29ucygnYWJvdXQsMCxhdXRvLGJvbGQsMjQsYXV0byxpdGFsaWMsNDgsYXV0byxzdHJpa2UsNzIsYXV0byxzdWJzY3JpcHQsOTYsYXV0byxzdXBlcnNjcmlwdCwxMjAsYXV0byx1bmRlcmxpbmUsMTQ0LGF1dG8sYmlkaWx0ciwxNjgsYXV0byxiaWRpcnRsLDE5MixhdXRvLGJsb2NrcXVvdGUsMjE2LGF1dG8sY29weS1ydGwsMjQwLGF1dG8sY29weSwyNjQsYXV0byxjdXQtcnRsLDI4OCxhdXRvLGN1dCwzMTIsYXV0byxwYXN0ZS1ydGwsMzM2LGF1dG8scGFzdGUsMzYwLGF1dG8sYmdjb2xvciwzODQsYXV0byx0ZXh0Y29sb3IsNDA4LGF1dG8sdGVtcGxhdGVzLXJ0bCw0MzIsYXV0byx0ZW1wbGF0ZXMsNDU2LGF1dG8sY3JlYXRlZGl2LDQ4MCxhdXRvLGZpbmQtcnRsLDUwNCxhdXRvLGZpbmQsNTI4LGF1dG8scmVwbGFjZSw1NTIsYXV0byxmbGFzaCw1NzYsYXV0byxidXR0b24sNjAwLGF1dG8sY2hlY2tib3gsNjI0LGF1dG8sZm9ybSw2NDgsYXV0byxoaWRkZW5maWVsZCw2NzIsYXV0byxpbWFnZWJ1dHRvbiw2OTYsYXV0byxyYWRpbyw3MjAsYXV0byxzZWxlY3QtcnRsLDc0NCxhdXRvLHNlbGVjdCw3NjgsYXV0byx0ZXh0YXJlYS1ydGwsNzkyLGF1dG8sdGV4dGFyZWEsODE2LGF1dG8sdGV4dGZpZWxkLXJ0bCw4NDAsYXV0byx0ZXh0ZmllbGQsODY0LGF1dG8saG9yaXpvbnRhbHJ1bGUsODg4LGF1dG8saWZyYW1lLDkxMixhdXRvLGltYWdlLDkzNixhdXRvLGluZGVudC1ydGwsOTYwLGF1dG8saW5kZW50LDk4NCxhdXRvLG91dGRlbnQtcnRsLDEwMDgsYXV0byxvdXRkZW50LDEwMzIsYXV0byxzbWlsZXksMTA1NixhdXRvLGp1c3RpZnlibG9jaywxMDgwLGF1dG8sanVzdGlmeWNlbnRlciwxMTA0LGF1dG8sanVzdGlmeWxlZnQsMTEyOCxhdXRvLGp1c3RpZnlyaWdodCwxMTUyLGF1dG8sbGFuZ3VhZ2UsMTE3NixhdXRvLGFuY2hvci1ydGwsMTIwMCxhdXRvLGFuY2hvciwxMjI0LGF1dG8sbGluaywxMjQ4LGF1dG8sdW5saW5rLDEyNzIsYXV0byxidWxsZXRlZGxpc3QtcnRsLDEyOTYsYXV0byxidWxsZXRlZGxpc3QsMTMyMCxhdXRvLG51bWJlcmVkbGlzdC1ydGwsMTM0NCxhdXRvLG51bWJlcmVkbGlzdCwxMzY4LGF1dG8sbWF4aW1pemUsMTM5MixhdXRvLG5ld3BhZ2UtcnRsLDE0MTYsYXV0byxuZXdwYWdlLDE0NDAsYXV0byxwYWdlYnJlYWstcnRsLDE0NjQsYXV0byxwYWdlYnJlYWssMTQ4OCxhdXRvLHBhc3RldGV4dC1ydGwsMTUxMixhdXRvLHBhc3RldGV4dCwxNTM2LGF1dG8scGFzdGVmcm9td29yZC1ydGwsMTU2MCxhdXRvLHBhc3RlZnJvbXdvcmQsMTU4NCxhdXRvLHByZXZpZXctcnRsLDE2MDgsYXV0byxwcmV2aWV3LDE2MzIsYXV0byxwcmludCwxNjU2LGF1dG8scmVtb3ZlZm9ybWF0LDE2ODAsYXV0byxzYXZlLDE3MDQsYXV0byxzZWxlY3RhbGwsMTcyOCxhdXRvLHNob3dibG9ja3MtcnRsLDE3NTIsYXV0byxzaG93YmxvY2tzLDE3NzYsYXV0byxzb3VyY2UtcnRsLDE4MDAsYXV0byxzb3VyY2UsMTgyNCxhdXRvLHNwZWNpYWxjaGFyLDE4NDgsYXV0byxzY2F5dCwxODcyLGF1dG8sdGFibGUsMTg5NixhdXRvLHJlZG8tcnRsLDE5MjAsYXV0byxyZWRvLDE5NDQsYXV0byx1bmRvLXJ0bCwxOTY4LGF1dG8sdW5kbywxOTkyLGF1dG8sc3BlbGxjaGVja2VyLDIwMTYsYXV0bycsJ2ljb25zLnBuZycpO30pKCk7Q0tFRElUT1IubGFuZy5sYW5ndWFnZXM9e1wiYWZcIjoxLFwic3FcIjoxLFwiYXJcIjoxLFwiZXVcIjoxLFwiYm5cIjoxLFwiYnNcIjoxLFwiYmdcIjoxLFwiY2FcIjoxLFwiemgtY25cIjoxLFwiemhcIjoxLFwiaHJcIjoxLFwiY3NcIjoxLFwiZGFcIjoxLFwibmxcIjoxLFwiZW5cIjoxLFwiZW4tYXVcIjoxLFwiZW4tY2FcIjoxLFwiZW4tZ2JcIjoxLFwiZW9cIjoxLFwiZXRcIjoxLFwiZm9cIjoxLFwiZmlcIjoxLFwiZnJcIjoxLFwiZnItY2FcIjoxLFwiZ2xcIjoxLFwia2FcIjoxLFwiZGVcIjoxLFwiZGUtY2hcIjoxLFwiZWxcIjoxLFwiZ3VcIjoxLFwiaGVcIjoxLFwiaGlcIjoxLFwiaHVcIjoxLFwiaXNcIjoxLFwiaWRcIjoxLFwiaXRcIjoxLFwiamFcIjoxLFwia21cIjoxLFwia29cIjoxLFwia3VcIjoxLFwibHZcIjoxLFwibHRcIjoxLFwibWtcIjoxLFwibXNcIjoxLFwibW5cIjoxLFwibm9cIjoxLFwibmJcIjoxLFwiZmFcIjoxLFwicGxcIjoxLFwicHQtYnJcIjoxLFwicHRcIjoxLFwicm9cIjoxLFwicnVcIjoxLFwic3JcIjoxLFwic3ItbGF0blwiOjEsXCJzaVwiOjEsXCJza1wiOjEsXCJzbFwiOjEsXCJlc1wiOjEsXCJzdlwiOjEsXCJ0dFwiOjEsXCJ0aFwiOjEsXCJ0clwiOjEsXCJ1Z1wiOjEsXCJ1a1wiOjEsXCJ2aVwiOjEsXCJjeVwiOjF9O30oKSk7IiwiLypnbG9iYWwgZXhwb3J0cywgcmVxdWlyZSovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLWV2YWwgKi9cclxuLyogSlNPTlBhdGggMC44LjAgLSBYUGF0aCBmb3IgSlNPTlxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDcgU3RlZmFuIEdvZXNzbmVyIChnb2Vzc25lci5uZXQpXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkgbGljZW5jZS5cclxuICovXHJcblxyXG52YXIgbW9kdWxlO1xyXG4oZnVuY3Rpb24gKHJlcXVpcmUpIHsndXNlIHN0cmljdCc7XHJcblxyXG4vLyBNYWtlIHN1cmUgdG8ga25vdyBpZiB3ZSBhcmUgaW4gcmVhbCBub2RlIG9yIG5vdCAodGhlIGByZXF1aXJlYCB2YXJpYWJsZVxyXG4vLyBjb3VsZCBhY3R1YWxseSBiZSByZXF1aXJlLmpzLCBmb3IgZXhhbXBsZS5cclxudmFyIGlzTm9kZSA9IG1vZHVsZSAmJiAhIW1vZHVsZS5leHBvcnRzO1xyXG5cclxudmFyIGFsbG93ZWRSZXN1bHRUeXBlcyA9IFsndmFsdWUnLCAncGF0aCcsICdwb2ludGVyJywgJ3BhcmVudCcsICdwYXJlbnRQcm9wZXJ0eScsICdhbGwnXTtcclxuXHJcbnZhciB2bSA9IGlzTm9kZVxyXG4gICAgPyByZXF1aXJlKCd2bScpIDoge1xyXG4gICAgICAgIHJ1bkluTmV3Q29udGV4dDogZnVuY3Rpb24gKGV4cHIsIGNvbnRleHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV2YWwoT2JqZWN0LmtleXMoY29udGV4dCkucmVkdWNlKGZ1bmN0aW9uIChzLCB2cikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd2YXIgJyArIHZyICsgJz0nICsgSlNPTi5zdHJpbmdpZnkoY29udGV4dFt2cl0pLnJlcGxhY2UoL1xcdTIwMjh8XFx1MjAyOS9nLCBmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cudGhlc3Bhbm5lci5jby51ay8yMDExLzA3LzI1L3RoZS1qc29uLXNwZWNpZmljYXRpb24taXMtbm93LXdyb25nL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnXFxcXHUyMDInICsgKG0gPT09ICdcXHUyMDI4JyA/ICc4JyA6ICc5Jyk7XHJcbiAgICAgICAgICAgICAgICB9KSArICc7JyArIHM7XHJcbiAgICAgICAgICAgIH0sIGV4cHIpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuZnVuY3Rpb24gcHVzaCAoYXJyLCBlbGVtKSB7YXJyID0gYXJyLnNsaWNlKCk7IGFyci5wdXNoKGVsZW0pOyByZXR1cm4gYXJyO31cclxuZnVuY3Rpb24gdW5zaGlmdCAoZWxlbSwgYXJyKSB7YXJyID0gYXJyLnNsaWNlKCk7IGFyci51bnNoaWZ0KGVsZW0pOyByZXR1cm4gYXJyO31cclxuZnVuY3Rpb24gTmV3RXJyb3IgKHZhbHVlKSB7XHJcbiAgdGhpcy5hdm9pZE5ldyA9IHRydWU7XHJcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gIHRoaXMubWVzc2FnZSA9ICdKU09OUGF0aCBzaG91bGQgbm90IGJlIGNhbGxlZCB3aXRoIFwibmV3XCIgKGl0IHByZXZlbnRzIHJldHVybiBvZiAodW53cmFwcGVkKSBzY2FsYXIgdmFsdWVzKSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEpTT05QYXRoIChvcHRzLCBleHByLCBvYmosIGNhbGxiYWNrLCBvdGhlclR5cGVDYWxsYmFjaykge1xyXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEpTT05QYXRoKSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTlBhdGgob3B0cywgZXhwciwgb2JqLCBjYWxsYmFjaywgb3RoZXJUeXBlQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoIWUuYXZvaWROZXcpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGUudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBvdGhlclR5cGVDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGNhbGxiYWNrID0gb2JqO1xyXG4gICAgICAgIG9iaiA9IGV4cHI7XHJcbiAgICAgICAgZXhwciA9IG9wdHM7XHJcbiAgICAgICAgb3B0cyA9IHt9O1xyXG4gICAgfVxyXG4gICAgb3B0cyA9IG9wdHMgfHwge307XHJcbiAgICB2YXIgb2JqQXJncyA9IG9wdHMuaGFzT3duUHJvcGVydHkoJ2pzb24nKSAmJiBvcHRzLmhhc093blByb3BlcnR5KCdwYXRoJyk7XHJcbiAgICB0aGlzLmpzb24gPSBvcHRzLmpzb24gfHwgb2JqO1xyXG4gICAgdGhpcy5wYXRoID0gb3B0cy5wYXRoIHx8IGV4cHI7XHJcbiAgICB0aGlzLnJlc3VsdFR5cGUgPSAob3B0cy5yZXN1bHRUeXBlICYmIG9wdHMucmVzdWx0VHlwZS50b0xvd2VyQ2FzZSgpKSB8fCAndmFsdWUnO1xyXG4gICAgdGhpcy5mbGF0dGVuID0gb3B0cy5mbGF0dGVuIHx8IGZhbHNlO1xyXG4gICAgdGhpcy53cmFwID0gb3B0cy5oYXNPd25Qcm9wZXJ0eSgnd3JhcCcpID8gb3B0cy53cmFwIDogdHJ1ZTtcclxuICAgIHRoaXMuc2FuZGJveCA9IG9wdHMuc2FuZGJveCB8fCB7fTtcclxuICAgIHRoaXMucHJldmVudEV2YWwgPSBvcHRzLnByZXZlbnRFdmFsIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5wYXJlbnQgPSBvcHRzLnBhcmVudCB8fCBudWxsO1xyXG4gICAgdGhpcy5wYXJlbnRQcm9wZXJ0eSA9IG9wdHMucGFyZW50UHJvcGVydHkgfHwgbnVsbDtcclxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRzLmNhbGxiYWNrIHx8IGNhbGxiYWNrIHx8IG51bGw7XHJcbiAgICB0aGlzLm90aGVyVHlwZUNhbGxiYWNrID0gb3B0cy5vdGhlclR5cGVDYWxsYmFjayB8fCBvdGhlclR5cGVDYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBzdXBwbHkgYW4gb3RoZXJUeXBlQ2FsbGJhY2sgY2FsbGJhY2sgb3B0aW9uIHdpdGggdGhlIEBvdGhlcigpIG9wZXJhdG9yLicpO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAob3B0cy5hdXRvc3RhcnQgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgdmFyIHJldCA9IHRoaXMuZXZhbHVhdGUoe1xyXG4gICAgICAgICAgICBwYXRoOiAob2JqQXJncyA/IG9wdHMucGF0aCA6IGV4cHIpLFxyXG4gICAgICAgICAgICBqc29uOiAob2JqQXJncyA/IG9wdHMuanNvbiA6IG9iailcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIXJldCB8fCB0eXBlb2YgcmV0ICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTmV3RXJyb3IocmV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxufVxyXG5cclxuLy8gUFVCTElDIE1FVEhPRFNcclxuXHJcbkpTT05QYXRoLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChleHByLCBqc29uLCBjYWxsYmFjaywgb3RoZXJUeXBlQ2FsbGJhY2spIHtcclxuICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICBmbGF0dGVuID0gdGhpcy5mbGF0dGVuLFxyXG4gICAgICAgIHdyYXAgPSB0aGlzLndyYXAsXHJcbiAgICAgICAgY3VyclBhcmVudCA9IHRoaXMucGFyZW50LFxyXG4gICAgICAgIGN1cnJQYXJlbnRQcm9wZXJ0eSA9IHRoaXMucGFyZW50UHJvcGVydHk7XHJcblxyXG4gICAgdGhpcy5jdXJyUmVzdWx0VHlwZSA9IHRoaXMucmVzdWx0VHlwZTtcclxuICAgIHRoaXMuY3VyclByZXZlbnRFdmFsID0gdGhpcy5wcmV2ZW50RXZhbDtcclxuICAgIHRoaXMuY3VyclNhbmRib3ggPSB0aGlzLnNhbmRib3g7XHJcbiAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IHRoaXMuY2FsbGJhY2s7XHJcbiAgICB0aGlzLmN1cnJPdGhlclR5cGVDYWxsYmFjayA9IG90aGVyVHlwZUNhbGxiYWNrIHx8IHRoaXMub3RoZXJUeXBlQ2FsbGJhY2s7XHJcblxyXG4gICAganNvbiA9IGpzb24gfHwgdGhpcy5qc29uO1xyXG4gICAgZXhwciA9IGV4cHIgfHwgdGhpcy5wYXRoO1xyXG4gICAgaWYgKGV4cHIgJiYgdHlwZW9mIGV4cHIgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKCFleHByLnBhdGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBzdXBwbHkgYSBcInBhdGhcIiBwcm9wZXJ0eSB3aGVuIHByb3ZpZGluZyBhbiBvYmplY3QgYXJndW1lbnQgdG8gSlNPTlBhdGguZXZhbHVhdGUoKS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAganNvbiA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ2pzb24nKSA/IGV4cHIuanNvbiA6IGpzb247XHJcbiAgICAgICAgZmxhdHRlbiA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ2ZsYXR0ZW4nKSA/IGV4cHIuZmxhdHRlbiA6IGZsYXR0ZW47XHJcbiAgICAgICAgdGhpcy5jdXJyUmVzdWx0VHlwZSA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ3Jlc3VsdFR5cGUnKSA/IGV4cHIucmVzdWx0VHlwZSA6IHRoaXMuY3VyclJlc3VsdFR5cGU7XHJcbiAgICAgICAgdGhpcy5jdXJyU2FuZGJveCA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ3NhbmRib3gnKSA/IGV4cHIuc2FuZGJveCA6IHRoaXMuY3VyclNhbmRib3g7XHJcbiAgICAgICAgd3JhcCA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ3dyYXAnKSA/IGV4cHIud3JhcCA6IHdyYXA7XHJcbiAgICAgICAgdGhpcy5jdXJyUHJldmVudEV2YWwgPSBleHByLmhhc093blByb3BlcnR5KCdwcmV2ZW50RXZhbCcpID8gZXhwci5wcmV2ZW50RXZhbCA6IHRoaXMuY3VyclByZXZlbnRFdmFsO1xyXG4gICAgICAgIGNhbGxiYWNrID0gZXhwci5oYXNPd25Qcm9wZXJ0eSgnY2FsbGJhY2snKSA/IGV4cHIuY2FsbGJhY2sgOiBjYWxsYmFjaztcclxuICAgICAgICB0aGlzLmN1cnJPdGhlclR5cGVDYWxsYmFjayA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ290aGVyVHlwZUNhbGxiYWNrJykgPyBleHByLm90aGVyVHlwZUNhbGxiYWNrIDogdGhpcy5jdXJyT3RoZXJUeXBlQ2FsbGJhY2s7XHJcbiAgICAgICAgY3VyclBhcmVudCA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ3BhcmVudCcpID8gZXhwci5wYXJlbnQgOiBjdXJyUGFyZW50O1xyXG4gICAgICAgIGN1cnJQYXJlbnRQcm9wZXJ0eSA9IGV4cHIuaGFzT3duUHJvcGVydHkoJ3BhcmVudFByb3BlcnR5JykgPyBleHByLnBhcmVudFByb3BlcnR5IDogY3VyclBhcmVudFByb3BlcnR5O1xyXG4gICAgICAgIGV4cHIgPSBleHByLnBhdGg7XHJcbiAgICB9XHJcbiAgICBjdXJyUGFyZW50ID0gY3VyclBhcmVudCB8fCBudWxsO1xyXG4gICAgY3VyclBhcmVudFByb3BlcnR5ID0gY3VyclBhcmVudFByb3BlcnR5IHx8IG51bGw7XHJcblxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwcikpIHtcclxuICAgICAgICBleHByID0gSlNPTlBhdGgudG9QYXRoU3RyaW5nKGV4cHIpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFleHByIHx8ICFqc29uIHx8IGFsbG93ZWRSZXN1bHRUeXBlcy5pbmRleE9mKHRoaXMuY3VyclJlc3VsdFR5cGUpID09PSAtMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX29iaiA9IGpzb247XHJcblxyXG4gICAgdmFyIGV4cHJMaXN0ID0gSlNPTlBhdGgudG9QYXRoQXJyYXkoZXhwcik7XHJcbiAgICBpZiAoZXhwckxpc3RbMF0gPT09ICckJyAmJiBleHByTGlzdC5sZW5ndGggPiAxKSB7ZXhwckxpc3Quc2hpZnQoKTt9XHJcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5fdHJhY2UoZXhwckxpc3QsIGpzb24sIFsnJCddLCBjdXJyUGFyZW50LCBjdXJyUGFyZW50UHJvcGVydHksIGNhbGxiYWNrKTtcclxuICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKGVhKSB7cmV0dXJuIGVhICYmICFlYS5pc1BhcmVudFNlbGVjdG9yO30pO1xyXG5cclxuICAgIGlmICghcmVzdWx0Lmxlbmd0aCkge3JldHVybiB3cmFwID8gW10gOiB1bmRlZmluZWQ7fVxyXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDEgJiYgIXdyYXAgJiYgIUFycmF5LmlzQXJyYXkocmVzdWx0WzBdLnZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRQcmVmZXJyZWRPdXRwdXQocmVzdWx0WzBdKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGVhKSB7XHJcbiAgICAgICAgdmFyIHZhbE9yUGF0aCA9IHNlbGYuX2dldFByZWZlcnJlZE91dHB1dChlYSk7XHJcbiAgICAgICAgaWYgKGZsYXR0ZW4gJiYgQXJyYXkuaXNBcnJheSh2YWxPclBhdGgpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodmFsT3JQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbE9yUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9LCBbXSk7XHJcbn07XHJcblxyXG4vLyBQUklWQVRFIE1FVEhPRFNcclxuXHJcbkpTT05QYXRoLnByb3RvdHlwZS5fZ2V0UHJlZmVycmVkT3V0cHV0ID0gZnVuY3Rpb24gKGVhKSB7XHJcbiAgICB2YXIgcmVzdWx0VHlwZSA9IHRoaXMuY3VyclJlc3VsdFR5cGU7XHJcbiAgICBzd2l0Y2ggKHJlc3VsdFR5cGUpIHtcclxuICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgZWEucGF0aCA9IHR5cGVvZiBlYS5wYXRoID09PSAnc3RyaW5nJyA/IGVhLnBhdGggOiBKU09OUGF0aC50b1BhdGhTdHJpbmcoZWEucGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGVhO1xyXG4gICAgY2FzZSAndmFsdWUnOiBjYXNlICdwYXJlbnQnOiBjYXNlICdwYXJlbnRQcm9wZXJ0eSc6XHJcbiAgICAgICAgcmV0dXJuIGVhW3Jlc3VsdFR5cGVdO1xyXG4gICAgY2FzZSAncGF0aCc6XHJcbiAgICAgICAgcmV0dXJuIEpTT05QYXRoLnRvUGF0aFN0cmluZyhlYVtyZXN1bHRUeXBlXSk7XHJcbiAgICBjYXNlICdwb2ludGVyJzpcclxuICAgICAgICByZXR1cm4gSlNPTlBhdGgudG9Qb2ludGVyKGVhLnBhdGgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuSlNPTlBhdGgucHJvdG90eXBlLl9oYW5kbGVDYWxsYmFjayA9IGZ1bmN0aW9uIChmdWxsUmV0T2JqLCBjYWxsYmFjaywgdHlwZSkge1xyXG4gICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIHByZWZlcnJlZE91dHB1dCA9IHRoaXMuX2dldFByZWZlcnJlZE91dHB1dChmdWxsUmV0T2JqKTtcclxuICAgICAgICBmdWxsUmV0T2JqLnBhdGggPSB0eXBlb2YgZnVsbFJldE9iai5wYXRoID09PSAnc3RyaW5nJyA/IGZ1bGxSZXRPYmoucGF0aCA6IEpTT05QYXRoLnRvUGF0aFN0cmluZyhmdWxsUmV0T2JqLnBhdGgpO1xyXG4gICAgICAgIGNhbGxiYWNrKHByZWZlcnJlZE91dHB1dCwgdHlwZSwgZnVsbFJldE9iaik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU09OUGF0aC5wcm90b3R5cGUuX3RyYWNlID0gZnVuY3Rpb24gKGV4cHIsIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spIHtcclxuICAgIC8vIE5vIGV4cHIgdG8gZm9sbG93PyByZXR1cm4gcGF0aCBhbmQgdmFsdWUgYXMgdGhlIHJlc3VsdCBvZiB0aGlzIHRyYWNlIGJyYW5jaFxyXG4gICAgdmFyIHJldE9iaiwgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoIWV4cHIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0T2JqID0ge3BhdGg6IHBhdGgsIHZhbHVlOiB2YWwsIHBhcmVudDogcGFyZW50LCBwYXJlbnRQcm9wZXJ0eTogcGFyZW50UHJvcE5hbWV9O1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhbGxiYWNrKHJldE9iaiwgY2FsbGJhY2ssICd2YWx1ZScpO1xyXG4gICAgICAgIHJldHVybiByZXRPYmo7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGxvYyA9IGV4cHJbMF0sIHggPSBleHByLnNsaWNlKDEpO1xyXG5cclxuICAgIC8vIFdlIG5lZWQgdG8gZ2F0aGVyIHRoZSByZXR1cm4gdmFsdWUgb2YgcmVjdXJzaXZlIHRyYWNlIGNhbGxzIGluIG9yZGVyIHRvXHJcbiAgICAvLyBkbyB0aGUgcGFyZW50IHNlbCBjb21wdXRhdGlvbi5cclxuICAgIHZhciByZXQgPSBbXTtcclxuICAgIGZ1bmN0aW9uIGFkZFJldCAoZWxlbXMpIHtyZXQgPSByZXQuY29uY2F0KGVsZW1zKTt9XHJcblxyXG4gICAgaWYgKHZhbCAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsLCBsb2MpKSB7IC8vIHNpbXBsZSBjYXNlLS1kaXJlY3RseSBmb2xsb3cgcHJvcGVydHlcclxuICAgICAgICBhZGRSZXQodGhpcy5fdHJhY2UoeCwgdmFsW2xvY10sIHB1c2gocGF0aCwgbG9jKSwgdmFsLCBsb2MsIGNhbGxiYWNrKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2MgPT09ICcqJykgeyAvLyBhbGwgY2hpbGQgcHJvcGVydGllc1xyXG4gICAgICAgIHRoaXMuX3dhbGsobG9jLCB4LCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrLCBmdW5jdGlvbiAobSwgbCwgeCwgdiwgcCwgcGFyLCBwciwgY2IpIHtcclxuICAgICAgICAgICAgYWRkUmV0KHNlbGYuX3RyYWNlKHVuc2hpZnQobSwgeCksIHYsIHAsIHBhciwgcHIsIGNiKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2MgPT09ICcuLicpIHsgLy8gYWxsIGRlc2NlbmRlbnQgcGFyZW50IHByb3BlcnRpZXNcclxuICAgICAgICBhZGRSZXQodGhpcy5fdHJhY2UoeCwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaykpOyAvLyBDaGVjayByZW1haW5pbmcgZXhwcmVzc2lvbiB3aXRoIHZhbCdzIGltbWVkaWF0ZSBjaGlsZHJlblxyXG4gICAgICAgIHRoaXMuX3dhbGsobG9jLCB4LCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrLCBmdW5jdGlvbiAobSwgbCwgeCwgdiwgcCwgcGFyLCBwciwgY2IpIHtcclxuICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgam9pbiBtIGFuZCB4IGhlcmUgYmVjYXVzZSB3ZSBvbmx5IHdhbnQgcGFyZW50cywgbm90IHNjYWxhciB2YWx1ZXNcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2W21dID09PSAnb2JqZWN0JykgeyAvLyBLZWVwIGdvaW5nIHdpdGggcmVjdXJzaXZlIGRlc2NlbnQgb24gdmFsJ3Mgb2JqZWN0IGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICBhZGRSZXQoc2VsZi5fdHJhY2UodW5zaGlmdChsLCB4KSwgdlttXSwgcHVzaChwLCBtKSwgdiwgbSwgY2IpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9jWzBdID09PSAnKCcpIHsgLy8gWyhleHByKV0gKGR5bmFtaWMgcHJvcGVydHkvaW5kZXgpXHJcbiAgICAgICAgaWYgKHRoaXMuY3VyclByZXZlbnRFdmFsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXZhbCBbKGV4cHIpXSBwcmV2ZW50ZWQgaW4gSlNPTlBhdGggZXhwcmVzc2lvbi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXMgdGhpcyB3aWxsIHJlc29sdmUgdG8gYSBwcm9wZXJ0eSBuYW1lIChidXQgd2UgZG9uJ3Qga25vdyBpdCB5ZXQpLCBwcm9wZXJ0eSBhbmQgcGFyZW50IGluZm9ybWF0aW9uIGlzIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgb2YgdGhlIHByb3BlcnR5IHRvIHdoaWNoIHRoaXMgZXhwcmVzc2lvbiB3aWxsIHJlc29sdmVcclxuICAgICAgICBhZGRSZXQodGhpcy5fdHJhY2UodW5zaGlmdCh0aGlzLl9ldmFsKGxvYywgdmFsLCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIHBhdGguc2xpY2UoMCwgLTEpLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lKSwgeCksIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spKTtcclxuICAgIH1cclxuICAgIC8vIFRoZSBwYXJlbnQgc2VsIGNvbXB1dGF0aW9uIGlzIGhhbmRsZWQgaW4gdGhlIGZyYW1lIGFib3ZlIHVzaW5nIHRoZVxyXG4gICAgLy8gYW5jZXN0b3Igb2JqZWN0IG9mIHZhbFxyXG4gICAgZWxzZSBpZiAobG9jID09PSAnXicpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIG5vdCBhIGZpbmFsIGVuZHBvaW50LCBzbyB3ZSBkbyBub3QgaW52b2tlIHRoZSBjYWxsYmFjayBoZXJlXHJcbiAgICAgICAgcmV0dXJuIHBhdGgubGVuZ3RoID8ge1xyXG4gICAgICAgICAgICBwYXRoOiBwYXRoLnNsaWNlKDAsIC0xKSxcclxuICAgICAgICAgICAgZXhwcjogeCxcclxuICAgICAgICAgICAgaXNQYXJlbnRTZWxlY3RvcjogdHJ1ZVxyXG4gICAgICAgIH0gOiBbXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxvYyA9PT0gJ34nKSB7IC8vIHByb3BlcnR5IG5hbWVcclxuICAgICAgICByZXRPYmogPSB7cGF0aDogcHVzaChwYXRoLCBsb2MpLCB2YWx1ZTogcGFyZW50UHJvcE5hbWUsIHBhcmVudDogcGFyZW50LCBwYXJlbnRQcm9wZXJ0eTogbnVsbH07XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FsbGJhY2socmV0T2JqLCBjYWxsYmFjaywgJ3Byb3BlcnR5Jyk7XHJcbiAgICAgICAgcmV0dXJuIHJldE9iajtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxvYyA9PT0gJyQnKSB7IC8vIHJvb3Qgb25seVxyXG4gICAgICAgIGFkZFJldCh0aGlzLl90cmFjZSh4LCB2YWwsIHBhdGgsIG51bGwsIG51bGwsIGNhbGxiYWNrKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2MuaW5kZXhPZignPygnKSA9PT0gMCkgeyAvLyBbPyhleHByKV0gKGZpbHRlcmluZylcclxuICAgICAgICBpZiAodGhpcy5jdXJyUHJldmVudEV2YWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmFsIFs/KGV4cHIpXSBwcmV2ZW50ZWQgaW4gSlNPTlBhdGggZXhwcmVzc2lvbi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fd2Fsayhsb2MsIHgsIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2ssIGZ1bmN0aW9uIChtLCBsLCB4LCB2LCBwLCBwYXIsIHByLCBjYikge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5fZXZhbChsLnJlcGxhY2UoL15cXD9cXCgoLio/KVxcKSQvLCAnJDEnKSwgdlttXSwgbSwgcCwgcGFyLCBwcikpIHtcclxuICAgICAgICAgICAgICAgIGFkZFJldChzZWxmLl90cmFjZSh1bnNoaWZ0KG0sIHgpLCB2LCBwLCBwYXIsIHByLCBjYikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsb2MuaW5kZXhPZignLCcpID4gLTEpIHsgLy8gW25hbWUxLG5hbWUyLC4uLl1cclxuICAgICAgICB2YXIgcGFydHMsIGk7XHJcbiAgICAgICAgZm9yIChwYXJ0cyA9IGxvYy5zcGxpdCgnLCcpLCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFkZFJldCh0aGlzLl90cmFjZSh1bnNoaWZ0KHBhcnRzW2ldLCB4KSwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxvY1swXSA9PT0gJ0AnKSB7IC8vIHZhbHVlIHR5cGU6IEBib29sZWFuKCksIGV0Yy5cclxuICAgICAgICB2YXIgYWRkVHlwZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciB2YWx1ZVR5cGUgPSBsb2Muc2xpY2UoMSwgLTIpO1xyXG4gICAgICAgIHN3aXRjaCAodmFsdWVUeXBlKSB7XHJcbiAgICAgICAgY2FzZSAnc2NhbGFyJzpcclxuICAgICAgICAgICAgaWYgKCF2YWwgfHwgKFsnb2JqZWN0JywgJ2Z1bmN0aW9uJ10uaW5kZXhPZih0eXBlb2YgdmFsKSA9PT0gLTEpKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUeXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdib29sZWFuJzogY2FzZSAnc3RyaW5nJzogY2FzZSAndW5kZWZpbmVkJzogY2FzZSAnZnVuY3Rpb24nOlxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gdmFsdWVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUeXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gdmFsdWVUeXBlICYmIGlzRmluaXRlKHZhbCkpIHtcclxuICAgICAgICAgICAgICAgIGFkZFR5cGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ25vbkZpbml0ZSc6XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiAhaXNGaW5pdGUodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgYWRkVHlwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSB2YWx1ZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGFkZFR5cGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2FycmF5JzpcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgYWRkVHlwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnb3RoZXInOlxyXG4gICAgICAgICAgICBhZGRUeXBlID0gdGhpcy5jdXJyT3RoZXJUeXBlQ2FsbGJhY2sodmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09ICt2YWwgJiYgaXNGaW5pdGUodmFsKSAmJiAhKHZhbCAlIDEpKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUeXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdudWxsJzpcclxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYWRkVHlwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhZGRUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldE9iaiA9IHtwYXRoOiBwYXRoLCB2YWx1ZTogdmFsLCBwYXJlbnQ6IHBhcmVudCwgcGFyZW50UHJvcGVydHk6IHBhcmVudFByb3BOYW1lfTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FsbGJhY2socmV0T2JqLCBjYWxsYmFjaywgJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXRPYmo7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoL14oLT9bMC05XSopOigtP1swLTldKik6PyhbMC05XSopJC8udGVzdChsb2MpKSB7IC8vIFtzdGFydDplbmQ6c3RlcF0gIFB5dGhvbiBzbGljZSBzeW50YXhcclxuICAgICAgICBhZGRSZXQodGhpcy5fc2xpY2UobG9jLCB4LCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2UgY2hlY2sgdGhlIHJlc3VsdGluZyB2YWx1ZXMgZm9yIHBhcmVudCBzZWxlY3Rpb25zLiBGb3IgcGFyZW50XHJcbiAgICAvLyBzZWxlY3Rpb25zIHdlIGRpc2NhcmQgdGhlIHZhbHVlIG9iamVjdCBhbmQgY29udGludWUgdGhlIHRyYWNlIHdpdGggdGhlXHJcbiAgICAvLyBjdXJyZW50IHZhbCBvYmplY3RcclxuICAgIHJldHVybiByZXQucmVkdWNlKGZ1bmN0aW9uIChhbGwsIGVhKSB7XHJcbiAgICAgICAgcmV0dXJuIGFsbC5jb25jYXQoZWEuaXNQYXJlbnRTZWxlY3RvciA/IHNlbGYuX3RyYWNlKGVhLmV4cHIsIHZhbCwgZWEucGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spIDogZWEpO1xyXG4gICAgfSwgW10pO1xyXG59O1xyXG5cclxuSlNPTlBhdGgucHJvdG90eXBlLl93YWxrID0gZnVuY3Rpb24gKGxvYywgZXhwciwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaywgZikge1xyXG4gICAgdmFyIGksIG4sIG07XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XHJcbiAgICAgICAgZm9yIChpID0gMCwgbiA9IHZhbC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgZihpLCBsb2MsIGV4cHIsIHZhbCwgcGF0aCwgcGFyZW50LCBwYXJlbnRQcm9wTmFtZSwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgZm9yIChtIGluIHZhbCkge1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbCwgbSkpIHtcclxuICAgICAgICAgICAgICAgIGYobSwgbG9jLCBleHByLCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbkpTT05QYXRoLnByb3RvdHlwZS5fc2xpY2UgPSBmdW5jdGlvbiAobG9jLCBleHByLCB2YWwsIHBhdGgsIHBhcmVudCwgcGFyZW50UHJvcE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkge3JldHVybjt9XHJcbiAgICB2YXIgaSxcclxuICAgICAgICBsZW4gPSB2YWwubGVuZ3RoLCBwYXJ0cyA9IGxvYy5zcGxpdCgnOicpLFxyXG4gICAgICAgIHN0YXJ0ID0gKHBhcnRzWzBdICYmIHBhcnNlSW50KHBhcnRzWzBdLCAxMCkpIHx8IDAsXHJcbiAgICAgICAgZW5kID0gKHBhcnRzWzFdICYmIHBhcnNlSW50KHBhcnRzWzFdLCAxMCkpIHx8IGxlbixcclxuICAgICAgICBzdGVwID0gKHBhcnRzWzJdICYmIHBhcnNlSW50KHBhcnRzWzJdLCAxMCkpIHx8IDE7XHJcbiAgICBzdGFydCA9IChzdGFydCA8IDApID8gTWF0aC5tYXgoMCwgc3RhcnQgKyBsZW4pIDogTWF0aC5taW4obGVuLCBzdGFydCk7XHJcbiAgICBlbmQgPSAoZW5kIDwgMCkgPyBNYXRoLm1heCgwLCBlbmQgKyBsZW4pIDogTWF0aC5taW4obGVuLCBlbmQpO1xyXG4gICAgdmFyIHJldCA9IFtdO1xyXG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gc3RlcCkge1xyXG4gICAgICAgIHJldCA9IHJldC5jb25jYXQodGhpcy5fdHJhY2UodW5zaGlmdChpLCBleHByKSwgdmFsLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lLCBjYWxsYmFjaykpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufTtcclxuXHJcbkpTT05QYXRoLnByb3RvdHlwZS5fZXZhbCA9IGZ1bmN0aW9uIChjb2RlLCBfdiwgX3ZuYW1lLCBwYXRoLCBwYXJlbnQsIHBhcmVudFByb3BOYW1lKSB7XHJcbiAgICBpZiAoIXRoaXMuX29iaiB8fCAhX3YpIHtyZXR1cm4gZmFsc2U7fVxyXG4gICAgaWYgKGNvZGUuaW5kZXhPZignQHBhcmVudFByb3BlcnR5JykgPiAtMSkge1xyXG4gICAgICAgIHRoaXMuY3VyclNhbmRib3guXyRfcGFyZW50UHJvcGVydHkgPSBwYXJlbnRQcm9wTmFtZTtcclxuICAgICAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9AcGFyZW50UHJvcGVydHkvZywgJ18kX3BhcmVudFByb3BlcnR5Jyk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29kZS5pbmRleE9mKCdAcGFyZW50JykgPiAtMSkge1xyXG4gICAgICAgIHRoaXMuY3VyclNhbmRib3guXyRfcGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UoL0BwYXJlbnQvZywgJ18kX3BhcmVudCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvZGUuaW5kZXhPZignQHByb3BlcnR5JykgPiAtMSkge1xyXG4gICAgICAgIHRoaXMuY3VyclNhbmRib3guXyRfcHJvcGVydHkgPSBfdm5hbWU7XHJcbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvQHByb3BlcnR5L2csICdfJF9wcm9wZXJ0eScpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvZGUuaW5kZXhPZignQHBhdGgnKSA+IC0xKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyU2FuZGJveC5fJF9wYXRoID0gSlNPTlBhdGgudG9QYXRoU3RyaW5nKHBhdGguY29uY2F0KFtfdm5hbWVdKSk7XHJcbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvQHBhdGgvZywgJ18kX3BhdGgnKTtcclxuICAgIH1cclxuICAgIGlmIChjb2RlLm1hdGNoKC9AKFtcXC5cXHNcXClcXFtdKS8pKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyU2FuZGJveC5fJF92ID0gX3Y7XHJcbiAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZSgvQChbXFwuXFxzXFwpXFxbXSkvZywgJ18kX3YkMScpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdm0ucnVuSW5OZXdDb250ZXh0KGNvZGUsIHRoaXMuY3VyclNhbmRib3gpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2pzb25QYXRoOiAnICsgZS5tZXNzYWdlICsgJzogJyArIGNvZGUpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gUFVCTElDIENMQVNTIFBST1BFUlRJRVMgQU5EIE1FVEhPRFNcclxuXHJcbi8vIENvdWxkIHN0b3JlIHRoZSBjYWNoZSBvYmplY3QgaXRzZWxmXHJcbkpTT05QYXRoLmNhY2hlID0ge307XHJcblxyXG5KU09OUGF0aC50b1BhdGhTdHJpbmcgPSBmdW5jdGlvbiAocGF0aEFycikge1xyXG4gICAgdmFyIGksIG4sIHggPSBwYXRoQXJyLCBwID0gJyQnO1xyXG4gICAgZm9yIChpID0gMSwgbiA9IHgubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCEoL14ofnxcXF58QC4qP1xcKFxcKSkkLykudGVzdCh4W2ldKSkge1xyXG4gICAgICAgICAgICBwICs9ICgvXlswLTkqXSskLykudGVzdCh4W2ldKSA/ICgnWycgKyB4W2ldICsgJ10nKSA6IChcIlsnXCIgKyB4W2ldICsgXCInXVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcclxuXHJcbkpTT05QYXRoLnRvUG9pbnRlciA9IGZ1bmN0aW9uIChwb2ludGVyKSB7XHJcbiAgICB2YXIgaSwgbiwgeCA9IHBvaW50ZXIsIHAgPSAnJztcclxuICAgIGZvciAoaSA9IDEsIG4gPSB4Lmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgIGlmICghKC9eKH58XFxefEAuKj9cXChcXCkpJC8pLnRlc3QoeFtpXSkpIHtcclxuICAgICAgICAgICAgcCArPSAnLycgKyB4W2ldLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcfi9nLCAnfjAnKVxyXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvL2csICd+MScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xyXG5cclxuSlNPTlBhdGgudG9QYXRoQXJyYXkgPSBmdW5jdGlvbiAoZXhwcikge1xyXG4gICAgdmFyIGNhY2hlID0gSlNPTlBhdGguY2FjaGU7XHJcbiAgICBpZiAoY2FjaGVbZXhwcl0pIHtyZXR1cm4gY2FjaGVbZXhwcl07fVxyXG4gICAgdmFyIHN1YnggPSBbXTtcclxuICAgIHZhciBub3JtYWxpemVkID0gZXhwclxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvQCg/Om51bGx8Ym9vbGVhbnxudW1iZXJ8c3RyaW5nfGludGVnZXJ8dW5kZWZpbmVkfG5vbkZpbml0ZXxzY2FsYXJ8YXJyYXl8b2JqZWN0fGZ1bmN0aW9ufG90aGVyKVxcKFxcKS9nLCAnOyQmOycpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyZW50aGV0aWNhbCBldmFsdWF0aW9ucyAoZmlsdGVyaW5nIGFuZCBvdGhlcndpc2UpLCBkaXJlY3RseSB3aXRoaW4gYnJhY2tldHMgb3Igc2luZ2xlIHF1b3Rlc1xyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxbJ10oXFw/P1xcKC4qP1xcKSlbXFxdJ10vZywgZnVuY3Rpb24gKCQwLCAkMSkge3JldHVybiAnWyMnICsgKHN1YngucHVzaCgkMSkgLSAxKSArICddJzt9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEVzY2FwZSBwZXJpb2RzIGFuZCB0aWxkZXMgd2l0aGluIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbJyhbXidcXF1dKiknXFxdL2csIGZ1bmN0aW9uICgkMCwgcHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbJ1wiICsgcHJvcC5yZXBsYWNlKC9cXC4vZywgJyVAJScpLnJlcGxhY2UoL34vZywgJyUlQEAlJScpICsgXCInXVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvcGVydGllcyBvcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9+L2csICc7fjsnKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHByb3BlcnR5IGJvdW5kYXJpZXNcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJz9cXC4nPyg/IVteXFxbXSpcXF0pfFxcWyc/L2csICc7JylcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZWluc2VydCBwZXJpb2RzIHdpdGhpbiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyVAJS9nLCAnLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVpbnNlcnQgdGlsZGVzIHdpdGhpbiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyUlQEAlJS9nLCAnficpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyg/OjspPyhcXF4rKSg/OjspPy9nLCBmdW5jdGlvbiAoJDAsIHVwcykge3JldHVybiAnOycgKyB1cHMuc3BsaXQoJycpLmpvaW4oJzsnKSArICc7Jzt9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlc2NlbmRlbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzs7O3w7Oy9nLCAnOy4uOycpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzskfCc/XFxdfCckL2csICcnKTtcclxuXHJcbiAgICB2YXIgZXhwckxpc3QgPSBub3JtYWxpemVkLnNwbGl0KCc7JykubWFwKGZ1bmN0aW9uIChleHByKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gZXhwci5tYXRjaCgvIyhbMC05XSspLyk7XHJcbiAgICAgICAgcmV0dXJuICFtYXRjaCB8fCAhbWF0Y2hbMV0gPyBleHByIDogc3VieFttYXRjaFsxXV07XHJcbiAgICB9KTtcclxuICAgIGNhY2hlW2V4cHJdID0gZXhwckxpc3Q7XHJcbiAgICByZXR1cm4gY2FjaGVbZXhwcl07XHJcbn07XHJcblxyXG4vLyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSAoZGVwcmVjYXRlZClcclxuSlNPTlBhdGguZXZhbCA9IGZ1bmN0aW9uIChvYmosIGV4cHIsIG9wdHMpIHtcclxuICAgIHJldHVybiBKU09OUGF0aChvcHRzLCBleHByLCBvYmopO1xyXG59O1xyXG5cclxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtyZXR1cm4gSlNPTlBhdGg7fSk7XHJcbn1cclxuZWxzZSBpZiAoaXNOb2RlKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IEpTT05QYXRoO1xyXG59XHJcbmVsc2Uge1xyXG4gICAgc2VsZi5qc29uUGF0aCA9IHsgLy8gRGVwcmVjYXRlZFxyXG4gICAgICAgIGV2YWw6IEpTT05QYXRoLmV2YWxcclxuICAgIH07XHJcbiAgICBzZWxmLkpTT05QYXRoID0gSlNPTlBhdGg7XHJcbn1cclxufSh0eXBlb2YgcmVxdWlyZSA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWlyZSkpO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
