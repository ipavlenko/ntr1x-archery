{% extends 'NTR1XMediaBundle:private-media-list.html.twig' %}

{% block editor %}

	<form enctype="multipart/form-data" id="form-update" method="POST"
		action="{{ path('admin-media-items-do-update', {
			category: category == null ? null : category.id
		}) }}"
		data-vue
	>
		<div class="container-fluid">
			<div class="row">
				<div class="col-xs-12">
					<h1>Новая запись</h1>
				</div>
				<div class="col-xs-12 col-md-6">
					<input type="hidden" name="id" value="{{ form.inputData['$.request.id'] }}" />
					<div class="form-group">
						<label for="form-update-title">Заголовок</label>
						<input class="form-control" type="text" id="form-update-title" name="title" required="true" value="{{ form.inputData['$.request.title']|e }}" />
					</div>
					<div class="form-group">
						<label for="form-update-category">Категория</label>
						<select class="form-control" id="form-update-category" name="category" required="true">
						{% for c in categories %}
							<option value="{{ c.id }}" {{ form.inputData['$.request.category'] == c.id ? 'selected="selected"' : ''}}>{{ c.title|e }}</option>
						{% endfor %}
						</select>
					</div>
					<div class="form-group">
						<label for="form-update-published">Дата публикации</label>
						<input v-date class="form-control" type="text" id="form-update-published" name="published" required="true" value="{{ form.inputData['$.request.published']|e }}" />
					</div>
					<div class="form-group">
						<label for="form-update-tags">Теги</label>
						<input v-tags class="form-control" type="text" id="form-update-tags" name="tags" value="{{ form.inputData['$.request.tags']|e }}" />
					</div>
					<div class="form-group">
						<label for="form-update-image">Основная картинка</label>
						{% if form.inputData['$.files.thumbnail'] %}
						<div>
							<img src="{{ asset('uploads/%s/%s'|format(form.inputData['$.files.thumbnail'].dir, form.inputData['$.files.thumbnail'].path)) }}" class="img-thumbnail" border="0" width="200px" />
						</div>
						{% endif %}
						<div>
							<a data-form="file" class="btn btn-default">
								<div class="control-input">
									<input type="file" id="form-update-image" name="thumbnail" />
								</div>
								<span>Загрузить</span>
							</a>
						</div>
					</div>
					<div class="form-group">
						<label for="form-update-video">Ссылка на видео</label>
						<input class="form-control" type="text" id="form-update-video" name="video" value="{{ form.inputData['$.request.video']|e }}" />
					</div>
					<div class="form-group">
						<label for="form-update-promo">Короткий текст</label>
						<textarea v-rich class="form-control" rows="8" id="form-update-promo" name="promo">{{ form.inputData['$.request.promo'] }}</textarea>
					</div>
					<div class="form-group">
						<label for="form-update-description">Длинный текст</label>
						<textarea v-rich class="form-control" rows="8" id="form-update-description" name="description">{{ form.inputData['$.request.description'] }}</textarea>
					</div>

					<section>
						<nav class="navbar">
							<input type="submit" class="btn btn-primary navbar-btn" value="Сохранить" />
						</nav>
					</section>
				</div>
			</div>
		<div>

	</form>

{% endblock %}